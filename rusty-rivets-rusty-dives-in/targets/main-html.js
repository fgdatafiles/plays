/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function o(a,b){function d(){}d.prototype=a;var i=new d,c;for(c in b)i[c]=b[c];b.toString!==Object.prototype.toString&&(i.toString=b.toString);return i}function Ye(a){return a instanceof Array?function(){return A.iter(a)}:"function"==typeof a.iterator?m(a,a.iterator):a.iterator}function m(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=df++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[b.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=b,a.hx__closures__[b.__id__]=d);return d}var e={},g=function(){return Q.__string_rec(this,"")},jb=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};e.EReg=jb;jb.__name__=["EReg"];jb.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:jb};var A=function(){};e.HxOverrides=A;A.__name__=["HxOverrides"];A.dateStr=function(a){var b=a.getMonth()+1,d=a.getDate(),i=a.getHours(),c=a.getMinutes(),k=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>d?"0"+d:""+d)+" "+(10>i?"0"+i:""+i)+":"+(10>c?"0"+c:""+c)+":"+(10>k?"0"+k:""+k)};A.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);
return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};A.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};A.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return"";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};A.remove=function(a,b){var d=a.indexOf(b);if(-1==d)return!1;
a.splice(d,1);return!0};A.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ac=function(){};e.Lambda=Ac;Ac.__name__=["Lambda"];Ac.array=function(a){for(var b=[],a=Ye(a)();a.hasNext();){var d=a.next();b.push(d)}return b};Ac.count=function(a,b){var d=0;if(null==b)for(var i=Ye(a)();i.hasNext();)i.next(),d++;else for(i=Ye(a)();i.hasNext();){var c=i.next();b(c)&&d++}return d};var zb=function(){this.length=0};e.List=
zb;zb.__name__=["List"];zb.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:zb};var Bc=function(){};e.IMap=Bc;Bc.__name__=["IMap"];Math.__name__=["Math"];var R=
function(){};e.Reflect=R;R.__name__=["Reflect"];R.hasField=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};R.field=function(a,b){try{return a[b]}catch(d){return null}};R.setField=function(a,b,d){a[b]=d};R.fields=function(a){var b=[];if(null!=a){var d=Object.prototype.hasOwnProperty,i;for(i in a)"__id__"!=i&&"hx__closures__"!=i&&d.call(a,i)&&b.push(i)}return b};R.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};R.compare=function(a,b){return a==b?0:a>b?
1:-1};R.isEnumValue=function(a){return null!=a&&null!=a.__enum__};R.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var x=function(){};e.Std=x;x.__name__=["Std"];x.is=function(a,b){return Q.__instanceof(a,b)};x.instance=function(a,b){return a instanceof b?a:null};x.string=function(a){return Q.__string_rec(a,"")};x["int"]=function(a){return a|0};x.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==A.cca(a,1)||88==A.cca(a,1)))b=parseInt(a);
return isNaN(b)?null:b};x.parseFloat=function(a){return parseFloat(a)};var rb=function(){this.b=""};e.StringBuf=rb;rb.__name__=["StringBuf"];rb.prototype={add:function(a){this.b+=x.string(a)},addSub:function(a,b,d){this.b=null==d?this.b+A.substr(a,b,null):this.b+A.substr(a,b,d)},__class__:rb};var K=function(){};e.StringTools=K;K.__name__=["StringTools"];K.startsWith=function(a,b){return a.length>=b.length&&A.substr(a,0,b.length)==b};K.endsWith=function(a,b){var d=b.length,i=a.length;return i>=d&&
A.substr(a,i-d,d)==b};K.isSpace=function(a,b){var d=A.cca(a,b);return 8<d&&14>d||32==d};K.ltrim=function(a){for(var b=a.length,d=0;d<b&&K.isSpace(a,d);)d++;return 0<d?A.substr(a,d,b-d):a};K.rtrim=function(a){for(var b=a.length,d=0;d<b&&K.isSpace(a,b-d-1);)d++;return 0<d?A.substr(a,0,b-d):a};K.trim=function(a){return K.ltrim(K.rtrim(a))};K.replace=function(a,b,d){return a.split(b).join(d)};K.fastCodeAt=function(a,b){return a.charCodeAt(b)};var B=e.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};
B.TNull=["TNull",0];B.TNull.toString=g;B.TNull.__enum__=B;B.TInt=["TInt",1];B.TInt.toString=g;B.TInt.__enum__=B;B.TFloat=["TFloat",2];B.TFloat.toString=g;B.TFloat.__enum__=B;B.TBool=["TBool",3];B.TBool.toString=g;B.TBool.__enum__=B;B.TObject=["TObject",4];B.TObject.toString=g;B.TObject.__enum__=B;B.TFunction=["TFunction",5];B.TFunction.toString=g;B.TFunction.__enum__=B;B.TClass=function(a){a=["TClass",6,a];a.__enum__=B;a.toString=g;return a};B.TEnum=function(a){a=["TEnum",7,a];a.__enum__=B;a.toString=
g;return a};B.TUnknown=["TUnknown",8];B.TUnknown.toString=g;B.TUnknown.__enum__=B;B.__empty_constructs__=[B.TNull,B.TInt,B.TFloat,B.TBool,B.TObject,B.TFunction,B.TUnknown];var O=function(){};e.Type=O;O.__name__=["Type"];O.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};O.getClassName=function(a){return a.__name__.join(".")};O.getEnumName=function(a){return a.__ename__.join(".")};O.resolveClass=function(a){a=e[a];return null==a||!a.__name__?null:a};
O.resolveEnum=function(a){a=e[a];return null==a||!a.__ename__?null:a};O.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";
}};O.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};O.createEnum=function(a,b,d){var i=R.field(a,b);if(null==i)throw"No such constructor "+b;if(R.isFunction(i)){if(null==d)throw"Constructor "+b+" need parameters";return i.apply(a,d)}if(null!=d&&0!=d.length)throw"Constructor "+b+" does not need parameters";return i};O.getEnumConstructs=function(a){return a.__constructs__.slice()};O["typeof"]=function(a){switch(typeof a){case "boolean":return B.TBool;case "string":return B.TClass(String);
case "number":return Math.ceil(a)==a%2147483648?B.TInt:B.TFloat;case "object":if(null==a)return B.TNull;var b=a.__enum__;if(null!=b)return B.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?B.TClass(a):B.TObject;case "function":return a.__name__||a.__ename__?B.TObject:B.TFunction;case "undefined":return B.TNull;default:return B.TUnknown}};O.allEnums=function(a){return a.__empty_constructs__};(e.XmlType={__ename__:["XmlType"],__constructs__:[]}).__empty_constructs__=
[];var z=function(){};e.Xml=z;z.__name__=["Xml"];z.parse=function(a){return kb.parse(a)};z.createElement=function(a){var b=new z;b.nodeType=z.Element;b._children=[];b._attributes=new M;b.set_nodeName(a);return b};z.createPCData=function(a){var b=new z;b.nodeType=z.PCData;b.set_nodeValue(a);return b};z.createCData=function(a){var b=new z;b.nodeType=z.CData;b.set_nodeValue(a);return b};z.createComment=function(a){var b=new z;b.nodeType=z.Comment;b.set_nodeValue(a);return b};z.createDocType=function(a){var b=
new z;b.nodeType=z.DocType;b.set_nodeValue(a);return b};z.createProcessingInstruction=function(a){var b=new z;b.nodeType=z.ProcessingInstruction;b.set_nodeValue(a);return b};z.createDocument=function(){var a=new z;a.nodeType=z.Document;a._children=[];return a};z.prototype={get_nodeName:function(){if(this.nodeType!=z.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=z.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==
z.Element||this.nodeType==z.Document)throw"bad nodeType";return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==z.Element||this.nodeType==z.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=z.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=z.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=z.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var i=this.x[b];if(i.nodeType==z.Element&&i._nodeName==a)break;b++}this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var i=this.x[b];b++;if(i.nodeType==
z.Element&&i._nodeName==a)return this.cur=b,i}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var d=this._children[a];if(d.nodeType==z.Element)return d;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&A.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:z};var Qa=function(){};e["flambe.util.Disposable"]=Qa;Qa.__name__=["flambe","util","Disposable"];
Qa.prototype={__class__:Qa};var v=function(){this._flags=0;this.owner=this.next=null};e["flambe.Component"]=v;v.__name__=["flambe","Component"];v.__interfaces__=[Qa];v.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:v};var Cc=function(){v.call(this);this._disposables=[]};e["flambe.Disposer"]=Cc;Cc.__name__=["flambe","Disposer"];
Cc.__super__=v;Cc.prototype=o(v.prototype,{get_name:function(){return"Disposer_15"},add:function(a){this._disposables.push(a);return this},onRemoved:function(){this.freeDisposables()},dispose:function(){v.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var d=a[b];++b;d.dispose()}},__class__:Cc});var p=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};e["flambe.Entity"]=
p;p.__name__=["flambe","Entity"];p.__interfaces__=[Qa];p.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var i=d.next;if(d==a)return null==b?this.firstComponent=i:(b.owner=this,b.next=i),delete this._compMap[d.get_name()],
0!=(d._flags&1)&&(d.onStop(),d._flags&=-2),d.onRemoved(),d.owner=null,d.next=null,!0;b=d;d=i}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,i=this.firstChild;null!=i;)d=i,i=i.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var i=d.next;if(d==a){null==b?this.firstChild=i:b.next=i;d.parent=null;d.next=null;
break}b=d;d=i}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},_internal_getFromParents:function(a,b){var d=this;do{var i=d._compMap[a];null!=b&&!(i instanceof b)&&(i=null);if(null!=i)return i;d=d.parent}while(null!=d);return null},__class__:p};var Pe=function(){};e["flambe.util.PackageLog"]=Pe;Pe.__name__=["flambe",
"util","PackageLog"];var Zd=function(){};e["flambe.platform.Platform"]=Zd;Zd.__name__=["flambe","platform","Platform"];Zd.prototype={__class__:Zd};var lb=function(){};e["flambe.platform.html.HtmlPlatform"]=lb;lb.__name__=["flambe","platform","html","HtmlPlatform"];lb.__interfaces__=[Zd];lb.prototype={init:function(){var a=this;G.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(d){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";
b.setAttribute("moz-opaque","true");this._stage=new Ab(b);this._pointer=new na;this._mouse=new Dc(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new Bb;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var i=0,c=function(d){if(!(1E3>d.timeStamp-i)){var c=b.getBoundingClientRect(),ea=a.getX(d,c),c=a.getY(d,c);switch(d.type){case "mousedown":d.target==
b&&(d.preventDefault(),a._mouse.submitDown(ea,c,d.button),b.focus());break;case "mousemove":a._mouse.submitMove(ea,c);break;case "mouseup":a._mouse.submitUp(ea,c,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(ea,c,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",c,!1);window.addEventListener("mousemove",c,!1);window.addEventListener("mouseup",c,!1);b.addEventListener("mousewheel",c,!1);b.addEventListener("DOMMouseScroll",
c,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var k="undefined"!=typeof window.ontouchstart,c="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(k||c){var e=new Ec(this._pointer,k?4:window.navigator.msMaxTouchPoints);this._touch=e;c=function(b){var d;d=k?b.changedTouches:[b];var c=b.target.getBoundingClientRect();i=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();G.SHOULD_HIDE_MOBILE_BROWSER&&
G.hideMobileBrowser();for(b=0;b<d.length;){var ea=d[b];++b;var f=a.getX(ea,c),g=a.getY(ea,c);e.submitDown((k?ea.identifier:ea.pointerId)|0,f,g)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<d.length;)ea=d[b],++b,f=a.getX(ea,c),g=a.getY(ea,c),e.submitMove((k?ea.identifier:ea.pointerId)|0,f,g);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<d.length;)ea=d[b],++b,f=a.getX(ea,c),g=a.getY(ea,c),e.submitUp((k?ea.identifier:
ea.pointerId)|0,f,g)}};k?(b.addEventListener("touchstart",c,!1),b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",c,!1),b.addEventListener("touchcancel",c,!1)):(b.addEventListener("MSPointerDown",c,!1),b.addEventListener("MSPointerMove",c,!1),b.addEventListener("MSPointerUp",c,!1))}else this._touch=new Fc;var f=window.onerror;window.onerror=function(a,b,d){q.uncaughtError.emit(a);return null!=f?f(a,b,d):!1};var g=G.loadExtension("hidden",window.document);null!=g.value?(c=function(){q.hidden.set__(R.field(window.document,
g.field))},c(null),window.document.addEventListener(g.prefix+"visibilitychange",c,!1)):(c=function(a){q.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",c,!1),window.addEventListener("pagehide",c,!1));q.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var h=G.loadExtension("requestAnimationFrame").value;if(null!=h){var j=window.performance,l=null!=j&&G.polyfill("now",j);l?this._lastUpdate=j.now():null;var m=null,m=function(d){a.update(l?
j.now():d);h(m,b)};h(m,b)}else window.setInterval(function(){a.update(Date.now())},16);Yb.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new S(this,a)).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var a=Qe.getLocalStorage();this._storage=null!=a?new Gc(a):new Hc}return this._storage},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;q.hidden._value||(this._skipFrame?this._skipFrame=
!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new Ra;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},
getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Re.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(G.detectSlowDriver(b))null;else return new Ic(this._stage,b)}catch(d){}return new Cb(a)},__class__:lb};var oa=function(a,b){this._value=a;this._changed=null!=b?new $a(b):null};
e["flambe.util.Value"]=oa;oa.__name__=["flambe","util","Value"];oa.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},get__:function(){return this._value},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new $a);return this._changed},__class__:oa};var Db=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};
e["flambe.util.SignalConnection"]=Db;Db.__name__=["flambe","util","SignalConnection"];Db.__interfaces__=[Qa];Db.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Db};var ga=function(a){this._head=null!=a?new Db(this,a):null;this._deferredTasks=null};e["flambe.util.SignalBase"]=ga;ga.__name__=["flambe","util","SignalBase"];ga.prototype={hasListeners:function(){return null!=this._head},connectImpl:function(a,
b){var d=this,i=new Db(this,a);this._head==ga.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(i,b)}):this.listAdd(i,b);return i},disconnect:function(a){var b=this;this._head==ga.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new $d(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=ga.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=
a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var d=null,i=this._head;null!=i;)d=i,i=i._next;null!=d?d._next=a:this._head=a}},listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._next;null==b?this._head=a:b._next=a;break}b=d;d=d._next}},__class__:ga};var $a=function(a){ga.call(this,a)};e["flambe.util.Signal2"]=$a;$a.__name__=["flambe","util","Signal2"];$a.__super__=ga;$a.prototype=
o(ga.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var d=this;this._head==ga.DISPATCHING_SENTINEL?this.defer(function(){d.emitImpl(a,b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var d=this.willEmit(),i=d;null!=i;)i._listener(a,b),i.stayInList||i.dispose(),i=i._next;this.didEmit(d)},__class__:$a});var C=function(a){ga.call(this,a)};e["flambe.util.Signal1"]=C;C.__name__=["flambe","util","Signal1"];C.__super__=ga;C.prototype=o(ga.prototype,{connect:function(a,
b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==ga.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},emitImpl:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._listener(a),d.stayInList||d.dispose(),d=d._next;this.didEmit(b)},__class__:C});var X=function(a,b){this._behavior=null;oa.call(this,a,b)};e["flambe.animation.AnimatedFloat"]=X;X.__name__=["flambe","animation","AnimatedFloat"];X.__super__=oa;X.prototype=o(oa.prototype,{set__:function(a){this._behavior=
null;return oa.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(oa.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,b,d){this.set_behavior(new Eb(this._value,a,b,d))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:X});var q=function(){};e["flambe.System"]=q;q.__name__=["flambe","System"];q.init=function(){q._calledInit||(q._platform.init(),q._calledInit=!0)};var Yb=function(){};
e["flambe.Log"]=Yb;Yb.__name__=["flambe","Log"];Yb.info=function(){null};Yb.__super__=Pe;Yb.prototype=o(Pe.prototype,{__class__:Yb});var sb=function(a){null==a&&(a=1);this._realDt=0;v.call(this);this.scale=new X(a)};e["flambe.SpeedAdjuster"]=sb;sb.__name__=["flambe","SpeedAdjuster"];sb.__super__=v;sb.prototype=o(v.prototype,{get_name:function(){return"SpeedAdjuster_18"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:sb});var ae=function(){};e["flambe.animation.Behavior"]=
ae;ae.__name__=["flambe","animation","Behavior"];ae.prototype={__class__:ae};var ab=function(){};e["flambe.animation.Ease"]=ab;ab.__name__=["flambe","animation","Ease"];ab.linear=function(a){return a};ab.sineOut=function(a){return Math.sin(1.5707963267948966*a)};ab.sineInOut=function(a){return 0.5-Math.cos(3.141592653589793*a)/2};ab.backInOut=function(a){a*=2;if(1>a)return a*a*(2.70158*a-1.70158)/2;a-=2;return(1-a*a*(-2.70158*a-1.70158))/2+0.5};var Eb=function(a,b,d,i){this._from=a;this._to=b;this._duration=
d;this.elapsed=0;this._easing=null!=i?i:ab.linear};e["flambe.animation.Tween"]=Eb;Eb.__name__=["flambe","animation","Tween"];Eb.__interfaces__=[ae];Eb.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:Eb};var tb=function(){};e["flambe.asset.Asset"]=tb;tb.__name__=["flambe","asset","Asset"];tb.__interfaces__=[Qa];tb.prototype=
{__class__:tb};var s=e["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};s.WEBP=["WEBP",0];s.WEBP.toString=g;s.WEBP.__enum__=s;s.JXR=["JXR",1];s.JXR.toString=g;s.JXR.__enum__=s;s.PNG=["PNG",2];s.PNG.toString=g;s.PNG.__enum__=s;s.JPG=["JPG",3];s.JPG.toString=g;s.JPG.__enum__=s;s.GIF=["GIF",4];s.GIF.toString=g;s.GIF.__enum__=s;s.DDS=["DDS",5];s.DDS.toString=g;s.DDS.__enum__=s;s.PVR=["PVR",6];
s.PVR.toString=g;s.PVR.__enum__=s;s.PKM=["PKM",7];s.PKM.toString=g;s.PKM.__enum__=s;s.MP3=["MP3",8];s.MP3.toString=g;s.MP3.__enum__=s;s.M4A=["M4A",9];s.M4A.toString=g;s.M4A.__enum__=s;s.OPUS=["OPUS",10];s.OPUS.toString=g;s.OPUS.__enum__=s;s.OGG=["OGG",11];s.OGG.toString=g;s.OGG.__enum__=s;s.WAV=["WAV",12];s.WAV.toString=g;s.WAV.__enum__=s;s.Data=["Data",13];s.Data.toString=g;s.Data.__enum__=s;s.__empty_constructs__=[s.WEBP,s.JXR,s.PNG,s.JPG,s.GIF,s.DDS,s.PVR,s.PKM,s.MP3,s.M4A,s.OPUS,s.OGG,s.WAV,s.Data];
var be=function(a,b,d,i){this.name=a;this.url=b;this.format=d;this.bytes=i};e["flambe.asset.AssetEntry"]=be;be.__name__=["flambe","asset","AssetEntry"];be.prototype={__class__:be};var Jc=function(){};e["flambe.asset.AssetPack"]=Jc;Jc.__name__=["flambe","asset","AssetPack"];Jc.__interfaces__=[Qa];Jc.prototype={__class__:Jc};var Kc=function(){};e["flambe.asset.File"]=Kc;Kc.__name__=["flambe","asset","File"];Kc.__interfaces__=[tb];Kc.prototype={__class__:Kc};var Ka=function(){this._localBase=this._remoteBase=
null;this._entries=[]};e["flambe.asset.Manifest"]=Ka;Ka.__name__=["flambe","asset","Manifest"];Ka.fromAssets=function(a,b){null==b&&(b=!0);var d=R.field(Se.getType(Ka).assets[0],a);if(null==d){if(b)throw ja.withFields("Missing asset pack",["name",a]);return null}var i=new Ka;i.set_localBase("assets");for(var c=0;c<d.length;){var k=d[c];++c;var e=k.name,f=a+"/"+e+"?v="+x.string(k.md5),g=Ka.inferFormat(e);g!=s.Data&&(e=ja.removeFileExtension(e));i.add(e,f,k.bytes,g)}return i};Ka.inferFormat=function(a){a=
ja.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return s.GIF;case "jpg":case "jpeg":return s.JPG;case "jxr":case "wdp":return s.JXR;case "png":return s.PNG;case "webp":return s.WEBP;case "dds":return s.DDS;case "pvr":return s.PVR;case "pkm":return s.PKM;case "m4a":return s.M4A;case "mp3":return s.MP3;case "ogg":return s.OGG;case "opus":return s.OPUS;case "wav":return s.WAV}else null;return s.Data};Ka.prototype={add:function(a,b,d,i){null==d&&(d=0);null==i&&(i=Ka.inferFormat(b));
a=new be(a,b,i,d);this._entries.push(a);return a},iterator:function(){return A.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Ka._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?ja.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Zb.that(!K.startsWith(a,"http://")&&!K.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=
a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&Zb.that(K.startsWith(a,"http://")||K.startsWith(a,"https://"),"remoteBase must be on a remote domain, starting with http(s)://",null);return this._remoteBase=a},__class__:Ka};var T=e["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};T.Normal=["Normal",0];T.Normal.toString=g;T.Normal.__enum__=T;T.Add=["Add",1];T.Add.toString=
g;T.Add.__enum__=T;T.Multiply=["Multiply",2];T.Multiply.toString=g;T.Multiply.__enum__=T;T.Screen=["Screen",3];T.Screen.toString=g;T.Screen.__enum__=T;T.Mask=["Mask",4];T.Mask.toString=g;T.Mask.__enum__=T;T.Copy=["Copy",5];T.Copy.toString=g;T.Copy.__enum__=T;T.__empty_constructs__=[T.Normal,T.Add,T.Multiply,T.Screen,T.Mask,T.Copy];var Y=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};e["flambe.math.Point"]=Y;Y.__name__=["flambe","math","Point"];Y.prototype={set:function(a,b){this.x=
a;this.y=b},__class__:Y};var y=function(){this._viewMatrixUpdateCount=this._parentViewMatrixUpdateCount=0;this.blendMode=this.scissor=this._viewMatrix=null;var a=this;v.call(this);this._flags|=54;this._localMatrix=new La;var b=function(){a._flags|=24};this.x=new X(0,b);this.y=new X(0,b);this.rotation=new X(0,b);this.scaleX=new X(1,b);this.scaleY=new X(1,b);this.anchorX=new X(0,b);this.anchorY=new X(0,b);this.alpha=new X(1)};e["flambe.display.Sprite"]=y;y.__name__=["flambe","display","Sprite"];y.hitTest=
function(a,b,d){var i=a._compMap.Sprite_13;if(null!=i){if(6!=(i._flags&6))return null;i.getLocalMatrix().inverseTransform(b,d,y._scratchPoint)&&(b=y._scratchPoint.x,d=y._scratchPoint.y);var c=i.scissor;if(null!=c&&!c.contains(b,d))return null}a=y.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=i&&i.containsLocal(b,d)?i:null};y.getBounds=function(a,b){null==b&&(b=new bb);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);y.getBoundsImpl(a,null,b);
b.width-=b.x;b.height-=b.y;return b};y.render=function(a,b){var d=a._compMap.Sprite_13;if(null!=d){var i=d.alpha._value;if(0==(d._flags&2)||0>=i)return;b.save();1>i&&b.multiplyAlpha(i);null!=d.blendMode&&b.setBlendMode(d.blendMode);var i=d.getLocalMatrix(),c=i.m02,k=i.m12;0!=(d._flags&32)&&(c=Math.round(c),k=Math.round(k));b.transform(i.m00,i.m10,i.m01,i.m11,c,k);i=d.scissor;null!=i&&b.applyScissor(i.x,i.y,i.width,i.height);d.draw(b)}i=a._compMap.Director_19;if(null!=i){i=i.occludedScenes;for(c=0;c<
i.length;)k=i[c],++c,y.render(k,b)}for(i=a.firstChild;null!=i;)c=i.next,y.render(i,b),i=c;null!=d&&b.restore()};y.hitTestBackwards=function(a,b,d){if(null!=a){var i=y.hitTestBackwards(a.next,b,d);return null!=i?i:y.hitTest(a,b,d)}return null};y.getBoundsImpl=function(a,b,d){var i=a._compMap.Sprite_13;if(null!=i){var b=null!=b?La.multiply(b,i.getLocalMatrix()):i.getLocalMatrix(),c=i.getNaturalWidth(),i=i.getNaturalHeight();0<c&&0<i&&(y.extendRect(b,0,0,d),y.extendRect(b,c,0,d),y.extendRect(b,c,i,d),
y.extendRect(b,0,i,d))}c=a._compMap.Director_19;if(null!=c)for(var c=c.occludedScenes,i=0,k=c.length;i<k;)y.getBoundsImpl(c[i],b,d),++i;for(a=a.firstChild;null!=a;)c=a.next,y.getBoundsImpl(a,b,d),a=c};y.extendRect=function(a,b,d,i){a=a.transform(b,d,y._scratchPoint);b=a.x;d=a.y;b<i.x&&(i.x=b);d<i.y&&(i.y=d);b>i.width&&(i.width=b);d>i.height&&(i.height=d)};y.__super__=v;y.prototype=o(v.prototype,{get_name:function(){return"Sprite_13"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},
containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var a=this.getParentSprite();this._viewMatrix=null!=
a?La.multiply(a.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix);this._flags&=-17;null!=a&&(this._parentViewMatrixUpdateCount=a._viewMatrixUpdateCount);++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);
this.y.set__(b);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);
this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},isViewMatrixDirty:function(){if(0!=(this._flags&16))return!0;var a=this.getParentSprite();return null==a?!1:this._parentViewMatrixUpdateCount!=a._viewMatrixUpdateCount||a.isViewMatrixDirty()},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_13;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new C);
return this._pointerDown},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new C);return this._pointerUp},get_pointerIn:function(){null==this._pointerIn&&(this._pointerIn=new C);return this._pointerIn},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new C);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=q._platform.getPointer().move.connect(function(b){for(var d=b.hit;null!=d;){if(d==a)return;d=d.getParentSprite()}null!=
a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Lc.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Lc.set(this._flags,4,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&
(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:y});var ub=function(a,b,d){y.call(this);this.color=a;this.width=new X(b);this.height=
new X(d)};e["flambe.display.FillSprite"]=ub;ub.__name__=["flambe","display","FillSprite"];ub.__super__=y;ub.prototype=o(y.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},onUpdate:function(a){y.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:ub});var Mc=function(a){this._kernings=null;this.xOffset=this.yOffset=
this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};e["flambe.display.Glyph"]=Mc;Mc.__name__=["flambe","display","Glyph"];Mc.prototype={draw:function(a,b,d){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,d+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?x["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new Ea);this._kernings.set(a,b)},__class__:Mc};var vb=
function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};e["flambe.display.Font"]=vb;vb.__name__=["flambe","display","Font"];vb.prototype={disposeFiles:function(){this._file.dispose();return this},layoutText:function(a,b,d,i,c){null==c&&(c=0);null==i&&(i=0);null==d&&(d=0);null==b&&(b=ba.Left);return new wb(this,a,b,d,i,c)},reload:function(){this._glyphs=new Ea;this._glyphs.set(vb.NEWLINE.charCode,vb.NEWLINE);for(var a=new Fb(this._file.toString()),b=new Ea,d=this.name.lastIndexOf("/"),
d=0<=d?A.substr(this.name,0,d+1):"",i=a.keywords();i.hasNext();)switch(i.next()){case "info":for(var c=a.pairs();c.hasNext();){var k=c.next();switch(k.key){case "size":this.size=k.getInt()}}break;case "common":for(c=a.pairs();c.hasNext();)switch(k=c.next(),k.key){case "lineHeight":this.lineHeight=k.getInt()}break;case "page":for(var c=0,k=null,e=a.pairs();e.hasNext();){var f=e.next();switch(f.key){case "id":c=f.getInt();break;case "file":k=f.getString()}}k=this._pack.getTexture(d+ja.removeFileExtension(k));
b.set(c,k);break;case "char":c=null;for(k=a.pairs();k.hasNext();)switch(e=k.next(),e.key){case "id":c=new Mc(e.getInt());break;case "x":c.x=e.getInt();break;case "y":c.y=e.getInt();break;case "width":c.width=e.getInt();break;case "height":c.height=e.getInt();break;case "page":e=e.getInt();c.page=b.get(e);break;case "xoffset":c.xOffset=e.getInt();break;case "yoffset":c.yOffset=e.getInt();break;case "xadvance":c.xAdvance=e.getInt()}this._glyphs.set(c.charCode,c);break;case "kerning":c=null;e=k=0;for(f=
a.pairs();f.hasNext();){var g=f.next();switch(g.key){case "first":c=this._glyphs.get(g.getInt());break;case "second":k=g.getInt();break;case "amount":e=g.getInt()}}null!=c&&0!=e&&c.setKerning(k,e)}},__class__:vb};var ba=e["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};ba.Left=["Left",0];ba.Left.toString=g;ba.Left.__enum__=ba;ba.Center=["Center",1];ba.Center.toString=g;ba.Center.__enum__=ba;ba.Right=["Right",2];ba.Right.toString=g;
ba.Right.__enum__=ba;ba.__empty_constructs__=[ba.Left,ba.Center,ba.Right];var wb=function(a,b,d,i,c,k){this.lines=0;var e=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+k);this.bounds=new bb;for(var f=[],k=b.length,g=0;g<k;){var h=g++,h=b.charCodeAt(h),h=a._glyphs.get(h);null!=h?this._glyphs.push(h):null}for(var b=-1,j=0,l=0,a=a._glyphs.get(10),k=function(){e.bounds.width=pa.max(e.bounds.width,j);e.bounds.height+=l;f[e.lines]=j;l=j=0;++e.lines},g=0;g<this._glyphs.length;){h=
this._glyphs[g];this._offsets[g]=Math.round(j);var m=0<i&&j+h.width>i;m||h==a?(m&&(0<=b?(this._glyphs[b]=a,j=this._offsets[b],g=b):this._glyphs.splice(g,0,a)),b=-1,l=this._lineOffset,k()):(32==h.charCode&&(b=g),j+=h.xAdvance+c,l=pa.max(l,h.height+h.yOffset),g+1<this._glyphs.length&&(j+=h.getKerning(this._glyphs[g+1].charCode)));++g}k();c=0;a=wb.getAlignOffset(d,f[0],i);b=1.79769313486231E308;k=-1.79769313486231E308;h=g=0;for(m=this._glyphs.length;h<m;){var n=this._glyphs[h];10==n.charCode&&(c+=this._lineOffset,
++g,a=wb.getAlignOffset(d,f[g],i));this._offsets[h]+=a;var o=c+n.yOffset;b<o||(b=o);k=pa.max(k,o+n.height);++h}this.bounds.x=wb.getAlignOffset(d,this.bounds.width,i);this.bounds.y=b;this.bounds.height=k-b};e["flambe.display.TextLayout"]=wb;wb.__name__=["flambe","display","TextLayout"];wb.getAlignOffset=function(a,b,d){switch(a[1]){case 0:return 0;case 2:return d-b;case 1:return Math.round((d-b)/2)}};wb.prototype={draw:function(a){for(var b=0,d=0,i=this._glyphs.length;d<i;){var c=this._glyphs[d];10==
c.charCode?b+=this._lineOffset:c.draw(a,this._offsets[d],b);++d}},__class__:wb};var Fb=function(a){this._configText=a;this._keywordPattern=new jb("([A-Za-z]+)(.*)","");this._pairPattern=new jb('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};e["flambe.display._Font.ConfigParser"]=Fb;Fb.__name__=["flambe","display","_Font","ConfigParser"];Fb.advance=function(a,b){var d=b.matchedPos();return A.substr(a,d.pos+d.len,a.length)};Fb.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=
Fb.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Fb.advance(b,a._pairPattern);return new ce(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Fb};var ce=function(a,b){this.key=a;this._value=b};e["flambe.display._Font.ConfigPair"]=ce;ce.__name__=["flambe",
"display","_Font","ConfigPair"];ce.prototype={getInt:function(){return x.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:A.substr(this._value,1,this._value.length-2)},__class__:ce};var de=function(){};e["flambe.display.Graphics"]=de;de.__name__=["flambe","display","Graphics"];de.prototype={__class__:de};var cb=function(a){y.call(this);this.texture=a};e["flambe.display.ImageSprite"]=cb;cb.__name__=["flambe","display","ImageSprite"];cb.__super__=y;cb.prototype=
o(y.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:cb});var Sa=e["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};Sa.Portrait=["Portrait",0];Sa.Portrait.toString=g;Sa.Portrait.__enum__=Sa;Sa.Landscape=["Landscape",1];Sa.Landscape.toString=
g;Sa.Landscape.__enum__=Sa;Sa.__empty_constructs__=[Sa.Portrait,Sa.Landscape];var Nc=function(){};e["flambe.display.Texture"]=Nc;Nc.__name__=["flambe","display","Texture"];Nc.__interfaces__=[tb];Nc.prototype={__class__:Nc};var Te=function(){};e["flambe.display.SubTexture"]=Te;Te.__name__=["flambe","display","SubTexture"];Te.__interfaces__=[Nc];var $b=function(a,b){null==b&&(b="");this._layout=null;var d=this;y.call(this);this._font=a;this._text=b;this._align=ba.Left;this._flags|=128;var i=function(){d._flags|=
128};this.wrapWidth=new X(0,i);this.letterSpacing=new X(0,i);this.lineSpacing=new X(0,i)};e["flambe.display.TextSprite"]=$b;$b.__name__=["flambe","display","TextSprite"];$b.__super__=y;$b.prototype=o(y.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),
b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){y.prototype.onUpdate.call(this,
a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:$b});var c=e["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
c.A=["A",0];c.A.toString=g;c.A.__enum__=c;c.B=["B",1];c.B.toString=g;c.B.__enum__=c;c.C=["C",2];c.C.toString=g;c.C.__enum__=c;c.D=["D",3];c.D.toString=g;c.D.__enum__=c;c.E=["E",4];c.E.toString=g;c.E.__enum__=c;c.F=["F",5];c.F.toString=g;c.F.__enum__=c;c.G=["G",6];c.G.toString=g;c.G.__enum__=c;c.H=["H",7];c.H.toString=g;c.H.__enum__=c;c.I=["I",8];c.I.toString=g;c.I.__enum__=c;c.J=["J",9];c.J.toString=g;c.J.__enum__=c;c.K=["K",10];c.K.toString=g;c.K.__enum__=c;c.L=["L",11];c.L.toString=g;c.L.__enum__=
c;c.M=["M",12];c.M.toString=g;c.M.__enum__=c;c.N=["N",13];c.N.toString=g;c.N.__enum__=c;c.O=["O",14];c.O.toString=g;c.O.__enum__=c;c.P=["P",15];c.P.toString=g;c.P.__enum__=c;c.Q=["Q",16];c.Q.toString=g;c.Q.__enum__=c;c.R=["R",17];c.R.toString=g;c.R.__enum__=c;c.S=["S",18];c.S.toString=g;c.S.__enum__=c;c.T=["T",19];c.T.toString=g;c.T.__enum__=c;c.U=["U",20];c.U.toString=g;c.U.__enum__=c;c.V=["V",21];c.V.toString=g;c.V.__enum__=c;c.W=["W",22];c.W.toString=g;c.W.__enum__=c;c.X=["X",23];c.X.toString=
g;c.X.__enum__=c;c.Y=["Y",24];c.Y.toString=g;c.Y.__enum__=c;c.Z=["Z",25];c.Z.toString=g;c.Z.__enum__=c;c.Number0=["Number0",26];c.Number0.toString=g;c.Number0.__enum__=c;c.Number1=["Number1",27];c.Number1.toString=g;c.Number1.__enum__=c;c.Number2=["Number2",28];c.Number2.toString=g;c.Number2.__enum__=c;c.Number3=["Number3",29];c.Number3.toString=g;c.Number3.__enum__=c;c.Number4=["Number4",30];c.Number4.toString=g;c.Number4.__enum__=c;c.Number5=["Number5",31];c.Number5.toString=g;c.Number5.__enum__=
c;c.Number6=["Number6",32];c.Number6.toString=g;c.Number6.__enum__=c;c.Number7=["Number7",33];c.Number7.toString=g;c.Number7.__enum__=c;c.Number8=["Number8",34];c.Number8.toString=g;c.Number8.__enum__=c;c.Number9=["Number9",35];c.Number9.toString=g;c.Number9.__enum__=c;c.Numpad0=["Numpad0",36];c.Numpad0.toString=g;c.Numpad0.__enum__=c;c.Numpad1=["Numpad1",37];c.Numpad1.toString=g;c.Numpad1.__enum__=c;c.Numpad2=["Numpad2",38];c.Numpad2.toString=g;c.Numpad2.__enum__=c;c.Numpad3=["Numpad3",39];c.Numpad3.toString=
g;c.Numpad3.__enum__=c;c.Numpad4=["Numpad4",40];c.Numpad4.toString=g;c.Numpad4.__enum__=c;c.Numpad5=["Numpad5",41];c.Numpad5.toString=g;c.Numpad5.__enum__=c;c.Numpad6=["Numpad6",42];c.Numpad6.toString=g;c.Numpad6.__enum__=c;c.Numpad7=["Numpad7",43];c.Numpad7.toString=g;c.Numpad7.__enum__=c;c.Numpad8=["Numpad8",44];c.Numpad8.toString=g;c.Numpad8.__enum__=c;c.Numpad9=["Numpad9",45];c.Numpad9.toString=g;c.Numpad9.__enum__=c;c.NumpadAdd=["NumpadAdd",46];c.NumpadAdd.toString=g;c.NumpadAdd.__enum__=c;c.NumpadDecimal=
["NumpadDecimal",47];c.NumpadDecimal.toString=g;c.NumpadDecimal.__enum__=c;c.NumpadDivide=["NumpadDivide",48];c.NumpadDivide.toString=g;c.NumpadDivide.__enum__=c;c.NumpadEnter=["NumpadEnter",49];c.NumpadEnter.toString=g;c.NumpadEnter.__enum__=c;c.NumpadMultiply=["NumpadMultiply",50];c.NumpadMultiply.toString=g;c.NumpadMultiply.__enum__=c;c.NumpadSubtract=["NumpadSubtract",51];c.NumpadSubtract.toString=g;c.NumpadSubtract.__enum__=c;c.F1=["F1",52];c.F1.toString=g;c.F1.__enum__=c;c.F2=["F2",53];c.F2.toString=
g;c.F2.__enum__=c;c.F3=["F3",54];c.F3.toString=g;c.F3.__enum__=c;c.F4=["F4",55];c.F4.toString=g;c.F4.__enum__=c;c.F5=["F5",56];c.F5.toString=g;c.F5.__enum__=c;c.F6=["F6",57];c.F6.toString=g;c.F6.__enum__=c;c.F7=["F7",58];c.F7.toString=g;c.F7.__enum__=c;c.F8=["F8",59];c.F8.toString=g;c.F8.__enum__=c;c.F9=["F9",60];c.F9.toString=g;c.F9.__enum__=c;c.F10=["F10",61];c.F10.toString=g;c.F10.__enum__=c;c.F11=["F11",62];c.F11.toString=g;c.F11.__enum__=c;c.F12=["F12",63];c.F12.toString=g;c.F12.__enum__=c;c.F13=
["F13",64];c.F13.toString=g;c.F13.__enum__=c;c.F14=["F14",65];c.F14.toString=g;c.F14.__enum__=c;c.F15=["F15",66];c.F15.toString=g;c.F15.__enum__=c;c.Left=["Left",67];c.Left.toString=g;c.Left.__enum__=c;c.Up=["Up",68];c.Up.toString=g;c.Up.__enum__=c;c.Right=["Right",69];c.Right.toString=g;c.Right.__enum__=c;c.Down=["Down",70];c.Down.toString=g;c.Down.__enum__=c;c.Alt=["Alt",71];c.Alt.toString=g;c.Alt.__enum__=c;c.Backquote=["Backquote",72];c.Backquote.toString=g;c.Backquote.__enum__=c;c.Backslash=
["Backslash",73];c.Backslash.toString=g;c.Backslash.__enum__=c;c.Backspace=["Backspace",74];c.Backspace.toString=g;c.Backspace.__enum__=c;c.CapsLock=["CapsLock",75];c.CapsLock.toString=g;c.CapsLock.__enum__=c;c.Comma=["Comma",76];c.Comma.toString=g;c.Comma.__enum__=c;c.Command=["Command",77];c.Command.toString=g;c.Command.__enum__=c;c.Control=["Control",78];c.Control.toString=g;c.Control.__enum__=c;c.Delete=["Delete",79];c.Delete.toString=g;c.Delete.__enum__=c;c.End=["End",80];c.End.toString=g;c.End.__enum__=
c;c.Enter=["Enter",81];c.Enter.toString=g;c.Enter.__enum__=c;c.Equals=["Equals",82];c.Equals.toString=g;c.Equals.__enum__=c;c.Escape=["Escape",83];c.Escape.toString=g;c.Escape.__enum__=c;c.Home=["Home",84];c.Home.toString=g;c.Home.__enum__=c;c.Insert=["Insert",85];c.Insert.toString=g;c.Insert.__enum__=c;c.LeftBracket=["LeftBracket",86];c.LeftBracket.toString=g;c.LeftBracket.__enum__=c;c.Minus=["Minus",87];c.Minus.toString=g;c.Minus.__enum__=c;c.PageDown=["PageDown",88];c.PageDown.toString=g;c.PageDown.__enum__=
c;c.PageUp=["PageUp",89];c.PageUp.toString=g;c.PageUp.__enum__=c;c.Period=["Period",90];c.Period.toString=g;c.Period.__enum__=c;c.Quote=["Quote",91];c.Quote.toString=g;c.Quote.__enum__=c;c.RightBracket=["RightBracket",92];c.RightBracket.toString=g;c.RightBracket.__enum__=c;c.Semicolon=["Semicolon",93];c.Semicolon.toString=g;c.Semicolon.__enum__=c;c.Shift=["Shift",94];c.Shift.toString=g;c.Shift.__enum__=c;c.Slash=["Slash",95];c.Slash.toString=g;c.Slash.__enum__=c;c.Space=["Space",96];c.Space.toString=
g;c.Space.__enum__=c;c.Tab=["Tab",97];c.Tab.toString=g;c.Tab.__enum__=c;c.Menu=["Menu",98];c.Menu.toString=g;c.Menu.__enum__=c;c.Search=["Search",99];c.Search.toString=g;c.Search.__enum__=c;c.Unknown=function(a){a=["Unknown",100,a];a.__enum__=c;a.toString=g;return a};c.__empty_constructs__=[c.A,c.B,c.C,c.D,c.E,c.F,c.G,c.H,c.I,c.J,c.K,c.L,c.M,c.N,c.O,c.P,c.Q,c.R,c.S,c.T,c.U,c.V,c.W,c.X,c.Y,c.Z,c.Number0,c.Number1,c.Number2,c.Number3,c.Number4,c.Number5,c.Number6,c.Number7,c.Number8,c.Number9,c.Numpad0,
c.Numpad1,c.Numpad2,c.Numpad3,c.Numpad4,c.Numpad5,c.Numpad6,c.Numpad7,c.Numpad8,c.Numpad9,c.NumpadAdd,c.NumpadDecimal,c.NumpadDivide,c.NumpadEnter,c.NumpadMultiply,c.NumpadSubtract,c.F1,c.F2,c.F3,c.F4,c.F5,c.F6,c.F7,c.F8,c.F9,c.F10,c.F11,c.F12,c.F13,c.F14,c.F15,c.Left,c.Up,c.Right,c.Down,c.Alt,c.Backquote,c.Backslash,c.Backspace,c.CapsLock,c.Comma,c.Command,c.Control,c.Delete,c.End,c.Enter,c.Equals,c.Escape,c.Home,c.Insert,c.LeftBracket,c.Minus,c.PageDown,c.PageUp,c.Period,c.Quote,c.RightBracket,
c.Semicolon,c.Shift,c.Slash,c.Space,c.Tab,c.Menu,c.Search];var ee=function(){this.init(0,null)};e["flambe.input.KeyboardEvent"]=ee;ee.__name__=["flambe","input","KeyboardEvent"];ee.prototype={init:function(a,b){this.id=a;this.key=b},__class__:ee};var ca=e["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};ca.Left=["Left",0];ca.Left.toString=g;ca.Left.__enum__=ca;ca.Middle=["Middle",1];ca.Middle.toString=g;ca.Middle.__enum__=
ca;ca.Right=["Right",2];ca.Right.toString=g;ca.Right.__enum__=ca;ca.Unknown=function(a){a=["Unknown",3,a];a.__enum__=ca;a.toString=g;return a};ca.__empty_constructs__=[ca.Left,ca.Middle,ca.Right];var sa=e["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};sa.Default=["Default",0];sa.Default.toString=g;sa.Default.__enum__=sa;sa.Button=["Button",1];sa.Button.toString=g;sa.Button.__enum__=sa;sa.None=["None",2];sa.None.toString=g;sa.None.__enum__=
sa;sa.__empty_constructs__=[sa.Default,sa.Button,sa.None];var fe=function(){this.init(0,0,0,null)};e["flambe.input.MouseEvent"]=fe;fe.__name__=["flambe","input","MouseEvent"];fe.prototype={init:function(a,b,d,i){this.id=a;this.viewX=b;this.viewY=d;this.button=i},__class__:fe};var ac=e["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};ac.Mouse=function(a){a=["Mouse",0,a];a.__enum__=ac;a.toString=g;return a};ac.Touch=function(a){a=["Touch",1,a];
a.__enum__=ac;a.toString=g;return a};ac.__empty_constructs__=[];var ge=function(){this.init(0,0,0,null,null)};e["flambe.input.PointerEvent"]=ge;ge.__name__=["flambe","input","PointerEvent"];ge.prototype={init:function(a,b,d,i,c){this.id=a;this.viewX=b;this.viewY=d;this.hit=i;this.source=c;this._stopped=!1},__class__:ge};var he=function(a){this.id=a;this._source=ac.Touch(this)};e["flambe.input.TouchPoint"]=he;he.__name__=["flambe","input","TouchPoint"];he.prototype={init:function(a,b){this.viewX=a;
this.viewY=b},__class__:he};var pa=function(){};e["flambe.math.FMath"]=pa;pa.__name__=["flambe","math","FMath"];pa.max=function(a,b){return a>b?a:b};pa.min=function(a,b){return a<b?a:b};pa.clamp=function(a,b,d){return a<b?b:a>d?d:a};var La=function(){this.identity()};e["flambe.math.Matrix"]=La;La.__name__=["flambe","math","Matrix"];La.multiply=function(a,b,d){null==d&&(d=new La);var i=a.m00*b.m00+a.m01*b.m10,c=a.m00*b.m01+a.m01*b.m11,k=a.m00*b.m02+a.m01*b.m12+a.m02;d.m00=i;d.m01=c;d.m02=k;i=a.m10*
b.m00+a.m11*b.m10;c=a.m10*b.m01+a.m11*b.m11;k=a.m10*b.m02+a.m11*b.m12+a.m12;d.m10=i;d.m11=c;d.m12=k;return d};La.prototype={set:function(a,b,d,i,c,k){this.m00=a;this.m01=d;this.m02=c;this.m10=b;this.m11=i;this.m12=k},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,d,i,c){var k=Math.sin(c),c=Math.cos(c);this.set(c*d,k*d,-k*i,c*i,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;
this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,d){null==d&&(d=new Y);d.x=a*this.m00+b*this.m01+this.m02;d.y=a*this.m10+b*this.m11+this.m12;return d},transformArray:function(a,b,d){for(var i=0;i<b;){var c=a[i],k=a[i+1];d[i++]=c*this.m00+k*this.m01+this.m02;d[i++]=c*this.m10+k*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,
b,d){var i=this.determinant();if(0==i)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/i;d.y=(b*this.m00-a*this.m10)/i;return!0},clone:function(a){null==a&&(a=new La);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:La};var bb=function(a,b,d,i){null==i&&(i=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,i)};e["flambe.math.Rectangle"]=bb;bb.__name__=["flambe","math","Rectangle"];bb.prototype={set:function(a,b,d,i){this.x=a;this.y=b;this.width=
d;this.height=i},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new bb);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:bb};var ka=function(){this._disposed=!1};e["flambe.platform.BasicAsset"]=
ka;ka.__name__=["flambe","platform","BasicAsset"];ka.__interfaces__=[tb];ka.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:ka};var xb=function(a,b){var d=this;this.manifest=b;this._platform=a;this.promise=new Oc;this._bytesLoaded=new M;this._pack=new Pc(b,this);var i=Ac.array(b);if(0==i.length)this.handleSuccess();else{for(var c=new M,k=0;k<i.length;){var e=i[k];++k;var f=c.get(e.name);null==f&&(f=[],c.set(e.name,f));f.push(e)}this._assetsRemaining=
Ac.count(c);for(i=c.iterator();i.hasNext();)c=[i.next()],this.pickBestEntry(c[0],function(a){return function(i){if(null!=i){var c=b.getFullURL(i);try{d.loadEntry(c,i)}catch(ea){d.handleError(i,"Unexpected error: "+x.string(ea))}c=d.promise;c.set_total(c._total+i.bytes)}else i=a[0][0],xb.isAudio(i.format)?d.handleLoad(i,Ma.getInstance()):d.handleError(i,"Could not find a supported format to load")}}(c))}};e["flambe.platform.BasicAssetPackLoader"]=xb;xb.__name__=["flambe","platform","BasicAssetPackLoader"];
xb.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};xb.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(d){for(var i=0;i<d.length;){var c=d[i];++i;for(var k=0;k<a.length;){var e=a[k];++k;if(e.format==c){b(e);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var d;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:d=
this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:d=this._pack.sounds;break;case 13:d=this._pack.files}d.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var d=0,i=this._bytesLoaded.iterator();i.hasNext();)var c=i.next(),d=d+c;this.promise.set_progress(d)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(ja.withFields(b,
["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:xb};var Pc=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new M;this.sounds=new M;this.files=new M};e["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=Pc;Pc.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];Pc.__interfaces__=[Jc];Pc.prototype={getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);
if(null==d&&b)throw ja.withFields("Missing texture",["name",a]);return d},getSound:function(a,b){null==b&&(b=!0);var d=this.sounds.get(a);if(null==d&&b)throw ja.withFields("Missing sound",["name",a]);return d},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);if(null==d&&b)throw ja.withFields("Missing file",["name",a]);return d},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();
this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},__class__:Pc};var bc=function(a){this._disposed=!1;this._content=a};e["flambe.platform.BasicFile"]=bc;bc.__name__=["flambe","platform","BasicFile"];bc.__interfaces__=[Kc];bc.__super__=ka;bc.prototype=o(ka.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:bc});var ie=function(){};
e["flambe.subsystem.KeyboardSystem"]=ie;ie.__name__=["flambe","subsystem","KeyboardSystem"];ie.prototype={__class__:ie};var Ra=function(){this.down=new C;this.up=new C;this.backButton=new L;this._keyStates=new Ea};e["flambe.platform.BasicKeyboard"]=Ra;Ra.__name__=["flambe","platform","BasicKeyboard"];Ra.__interfaces__=[ie];Ra.prototype={isDown:function(a){return this.isCodeDown(cc.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=
this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),Ra._sharedEvent.init(Ra._sharedEvent.id+1,cc.toKey(a)),this.down.emit(Ra._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),Ra._sharedEvent.init(Ra._sharedEvent.id+1,cc.toKey(a)),this.up.emit(Ra._sharedEvent))},__class__:Ra};var Ze=function(){};e["flambe.subsystem.MouseSystem"]=Ze;Ze.__name__=["flambe","subsystem","MouseSystem"];var Fa=function(a){this._pointer=
a;this._source=ac.Mouse(Fa._sharedEvent);this.down=new C;this.move=new C;this.up=new C;this.scroll=new C;this._y=this._x=0;this._cursor=sa.Default;this._buttonStates=new Ea};e["flambe.platform.BasicMouse"]=Fa;Fa.__name__=["flambe","platform","BasicMouse"];Fa.__interfaces__=[Ze];Fa.prototype={submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,je.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit(Fa._sharedEvent))},submitMove:function(a,
b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(Fa._sharedEvent)},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,b,je.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit(Fa._sharedEvent))},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(d);return!0},prepare:function(a,b,d){this._x=a;this._y=b;Fa._sharedEvent.init(Fa._sharedEvent.id+1,a,b,d)},
__class__:Fa};var ke=function(){};e["flambe.subsystem.PointerSystem"]=ke;ke.__name__=["flambe","subsystem","PointerSystem"];ke.prototype={__class__:ke};var na=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new C;this.move=new C;this.up=new C;this._x=a;this._y=b;this._isDown=d};e["flambe.platform.BasicPointer"]=na;na.__name__=["flambe","platform","BasicPointer"];na.__interfaces__=[ke];na.prototype={get_x:function(){return this._x},get_y:function(){return this._y},isDown:function(){return this._isDown},
submitDown:function(a,b,d){if(!this._isDown){this.submitMove(a,b,d);this._isDown=!0;var i=[],c=y.hitTest(q.root,a,b);if(null!=c){var e=c.owner;do{var f=e._compMap.Sprite_13;null!=f&&i.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,c,d);for(a=0;a<i.length;)if(b=i[a],++a,b.onPointerDown(na._sharedEvent),na._sharedEvent._stopped)return;this.down.emit(na._sharedEvent)}},submitMove:function(a,b,d){if(!(a==this._x&&b==this._y)){var i=[],c=y.hitTest(q.root,a,b);if(null!=c){var e=c.owner;do{var f=e._compMap.Sprite_13;
null!=f&&i.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,c,d);for(a=0;a<i.length;)if(b=i[a],++a,b.onPointerMove(na._sharedEvent),na._sharedEvent._stopped)return;this.move.emit(na._sharedEvent)}},submitUp:function(a,b,d){if(this._isDown){this.submitMove(a,b,d);this._isDown=!1;var i=[],c=y.hitTest(q.root,a,b);if(null!=c){var e=c.owner;do{var f=e._compMap.Sprite_13;null!=f&&i.push(f);e=e.parent}while(null!=e)}this.prepare(a,b,c,d);for(a=0;a<i.length;)if(b=i[a],++a,b.onPointerUp(na._sharedEvent),
na._sharedEvent._stopped)return;this.up.emit(na._sharedEvent)}},prepare:function(a,b,d,i){this._x=a;this._y=b;na._sharedEvent.init(na._sharedEvent.id+1,a,b,d,i)},__class__:na};var Wa=function(a,b,d){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=d};e["flambe.platform.BasicTexture"]=Wa;Wa.__name__=["flambe","platform","BasicTexture"];Wa.__interfaces__=[Te];Wa.__super__=ka;Wa.prototype=o(ka.prototype,{subTexture:function(a,b,d,i){d=
this.root.createTexture(d,i);d._parent=this;d._x=a;d._y=b;d.rootX=this.rootX+a;d.rootY=this.rootY+b;return d},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Wa});var Qc=function(){};e["flambe.subsystem.TouchSystem"]=Qc;Qc.__name__=["flambe","subsystem","TouchSystem"];Qc.prototype={__class__:Qc};var Ec=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new Ea;this._points=
[];this.down=new C;this.move=new C;this.up=new C};e["flambe.platform.BasicTouch"]=Ec;Ec.__name__=["flambe","platform","BasicTouch"];Ec.__interfaces__=[Qc];Ec.prototype={get_supported:function(){return!0},get_points:function(){return this._points.slice()},submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var i=new he(a);i.init(b,d);this._pointMap.set(a,i);this._points.push(i);null==this._pointerTouch&&(this._pointerTouch=i,this._pointer.submitDown(b,d,i._source));this.down.emit(i)}},submitMove:function(a,
b,d){a=this._pointMap.get(a);null!=a&&(a.init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._source),this.move.emit(a))},submitUp:function(a,b,d){var i=this._pointMap.get(a);null!=i&&(i.init(b,d),this._pointMap.remove(a),A.remove(this._points,i),this._pointerTouch==i&&(this._pointerTouch=null,this._pointer.submitUp(b,d,i._source)),this.up.emit(i))},__class__:Ec};var Gb=function(){};e["flambe.sound.Sound"]=Gb;Gb.__name__=["flambe","sound","Sound"];Gb.__interfaces__=[tb];Gb.prototype={__class__:Gb};
var Ma=function(){this._disposed=!1;this._playback=new Rc(this)};e["flambe.platform.DummySound"]=Ma;Ma.__name__=["flambe","platform","DummySound"];Ma.__interfaces__=[Gb];Ma.getInstance=function(){null==Ma._instance&&(Ma._instance=new Ma);return Ma._instance};Ma.__super__=ka;Ma.prototype=o(ka.prototype,{play:function(){return this._playback},loop:function(){return this._playback},get_duration:function(){return 0},onDisposed:function(){},__class__:Ma});var Hb=function(){};e["flambe.sound.Playback"]=
Hb;Hb.__name__=["flambe","sound","Playback"];Hb.__interfaces__=[Qa];Hb.prototype={__class__:Hb};var Rc=function(a){this._sound=a;this.volume=new X(0);this._complete=new oa(!0)};e["flambe.platform.DummyPlayback"]=Rc;Rc.__name__=["flambe","platform","DummyPlayback"];Rc.__interfaces__=[Hb];Rc.prototype={get_paused:function(){return!0},set_paused:function(){return!0},get_complete:function(){return this._complete},get_position:function(){return 0},dispose:function(){},__class__:Rc};var Sc=function(){};
e["flambe.subsystem.StorageSystem"]=Sc;Sc.__name__=["flambe","subsystem","StorageSystem"];Sc.prototype={__class__:Sc};var Hc=function(){this.clear()};e["flambe.platform.DummyStorage"]=Hc;Hc.__name__=["flambe","platform","DummyStorage"];Hc.__interfaces__=[Sc];Hc.prototype={set:function(a,b){this._hash.set(a,b);return!0},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},clear:function(){this._hash=new M},__class__:Hc};var Fc=function(){this.down=new C;this.move=new C;this.up=new C};
e["flambe.platform.DummyTouch"]=Fc;Fc.__name__=["flambe","platform","DummyTouch"];Fc.__interfaces__=[Qc];Fc.prototype={get_supported:function(){return!1},get_points:function(){return[]},__class__:Fc};var dc=function(){this._entries=[]};e["flambe.platform.EventGroup"]=dc;dc.__name__=["flambe","platform","EventGroup"];dc.__interfaces__=[Qa];dc.prototype={addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new le(a,b,d))},addDisposingListener:function(a,b,d){var i=this;this.addListener(a,
b,function(a){i.dispose();d(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}this._entries=[]},__class__:dc};var le=function(a,b,d){this.dispatcher=a;this.type=b;this.listener=d};e["flambe.platform._EventGroup.Entry"]=le;le.__name__=["flambe","platform","_EventGroup","Entry"];le.prototype={__class__:le};var ec=function(){};e["flambe.platform.InternalGraphics"]=ec;ec.__name__=["flambe","platform","InternalGraphics"];
ec.__interfaces__=[de];ec.prototype={__class__:ec};var me=function(){};e["flambe.subsystem.RendererSystem"]=me;me.__name__=["flambe","subsystem","RendererSystem"];me.prototype={__class__:me};var fc=function(){};e["flambe.platform.InternalRenderer"]=fc;fc.__name__=["flambe","platform","InternalRenderer"];fc.__interfaces__=[me];fc.prototype={__class__:fc};var cc=function(){};e["flambe.platform.KeyCodes"]=cc;cc.__name__=["flambe","platform","KeyCodes"];cc.toKey=function(a){switch(a){case 65:return c.A;
case 66:return c.B;case 67:return c.C;case 68:return c.D;case 69:return c.E;case 70:return c.F;case 71:return c.G;case 72:return c.H;case 73:return c.I;case 74:return c.J;case 75:return c.K;case 76:return c.L;case 77:return c.M;case 78:return c.N;case 79:return c.O;case 80:return c.P;case 81:return c.Q;case 82:return c.R;case 83:return c.S;case 84:return c.T;case 85:return c.U;case 86:return c.V;case 87:return c.W;case 88:return c.X;case 89:return c.Y;case 90:return c.Z;case 48:return c.Number0;case 49:return c.Number1;
case 50:return c.Number2;case 51:return c.Number3;case 52:return c.Number4;case 53:return c.Number5;case 54:return c.Number6;case 55:return c.Number7;case 56:return c.Number8;case 57:return c.Number9;case 96:return c.Numpad0;case 97:return c.Numpad1;case 98:return c.Numpad2;case 99:return c.Numpad3;case 100:return c.Numpad4;case 101:return c.Numpad5;case 102:return c.Numpad6;case 103:return c.Numpad7;case 104:return c.Numpad8;case 105:return c.Numpad9;case 107:return c.NumpadAdd;case 110:return c.NumpadDecimal;
case 111:return c.NumpadDivide;case 108:return c.NumpadEnter;case 106:return c.NumpadMultiply;case 109:return c.NumpadSubtract;case 112:return c.F1;case 113:return c.F2;case 114:return c.F3;case 115:return c.F4;case 116:return c.F5;case 117:return c.F6;case 118:return c.F7;case 119:return c.F8;case 120:return c.F9;case 121:return c.F10;case 122:return c.F11;case 123:return c.F12;case 37:return c.Left;case 38:return c.Up;case 39:return c.Right;case 40:return c.Down;case 18:return c.Alt;case 192:return c.Backquote;
case 220:return c.Backslash;case 8:return c.Backspace;case 20:return c.CapsLock;case 188:return c.Comma;case 15:return c.Command;case 17:return c.Control;case 46:return c.Delete;case 35:return c.End;case 13:return c.Enter;case 187:return c.Equals;case 27:return c.Escape;case 36:return c.Home;case 45:return c.Insert;case 219:return c.LeftBracket;case 189:return c.Minus;case 34:return c.PageDown;case 33:return c.PageUp;case 190:return c.Period;case 222:return c.Quote;case 221:return c.RightBracket;
case 186:return c.Semicolon;case 16:return c.Shift;case 191:return c.Slash;case 32:return c.Space;case 9:return c.Tab;case 16777234:return c.Menu;case 16777247:return c.Search}return c.Unknown(a)};cc.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;
case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;
case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;
case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;
case 99:return 16777247;case 100:return a[2]}};var Bb=function(){this._tickables=[]};e["flambe.platform.MainLoop"]=Bb;Bb.__name__=["flambe","platform","MainLoop"];Bb.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_18;if(null!=d&&(d._realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}for(d=a.firstComponent;null!=d;){var i=d.next;0==(d._flags&1)&&(d._flags|=1,d.onStart());d.onUpdate(b);d=i}for(d=a.firstChild;null!=d;)i=d.next,Bb.updateEntity(d,b),d=i};Bb.prototype={update:function(a){if(!(0>=
a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}q.volume.update(a);Bb.updateEntity(q.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),y.render(q.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Bb};var ne=function(){};e["flambe.platform.MathUtil"]=ne;ne.__name__=["flambe","platform","MathUtil"];ne.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var je=
function(){};e["flambe.platform.MouseCodes"]=je;je.__name__=["flambe","platform","MouseCodes"];je.toButton=function(a){switch(a){case 0:return ca.Left;case 1:return ca.Middle;case 2:return ca.Right}return ca.Unknown(a)};var Tc=function(){};e["flambe.platform.TextureRoot"]=Tc;Tc.__name__=["flambe","platform","TextureRoot"];Tc.prototype={__class__:Tc};var Uc=function(){};e["flambe.platform.Tickable"]=Uc;Uc.__name__=["flambe","platform","Tickable"];Uc.prototype={__class__:Uc};var Vc=function(a,b){this._firstDraw=
!1;this._canvasCtx=a.getContext("2d",{alpha:b})};e["flambe.platform.html.CanvasGraphics"]=Vc;Vc.__name__=["flambe","platform","html","CanvasGraphics"];Vc.__interfaces__=[ec];Vc.prototype={save:function(){this._canvasCtx.save()},transform:function(a,b,d,i,c,e){this._canvasCtx.transform(a,b,d,i,c,e)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,d){this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,i,c,e,f){this._firstDraw?(this._firstDraw=
!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,d,i,c,e,f),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+i|0,a.rootY+c|0,e|0,f|0,b|0,d|0,e|0,f|0)},fillRect:function(a,b,d,i,c){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,d,i,c),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+x.string(a);this._canvasCtx.fillStyle=
"#"+x.string(a);this._canvasCtx.fillRect(b|0,d|0,i|0,c|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,d,i){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,d|0,i|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=
!0},didRender:function(){},onResize:function(){},__class__:Vc};var Cb=function(a){this.graphics=new Vc(a,!1);this._hasGPU=new oa(!0)};e["flambe.platform.html.CanvasRenderer"]=Cb;Cb.__name__=["flambe","platform","html","CanvasRenderer"];Cb.__interfaces__=[fc];Cb.prototype={get_type:function(){return qa.Canvas},createTextureFromImage:function(a){a=new gc(Cb.CANVAS_TEXTURES?G.createCanvas(a):a);return a.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},
willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:Cb};var Wc=function(a,b,d){Wa.call(this,a,b,d)};e["flambe.platform.html.CanvasTexture"]=Wc;Wc.__name__=["flambe","platform","html","CanvasTexture"];Wc.__super__=Wa;Wc.prototype=o(Wa.prototype,{__class__:Wc});var gc=function(a){this._graphics=null;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};e["flambe.platform.html.CanvasTextureRoot"]=gc;gc.__name__=["flambe","platform",
"html","CanvasTextureRoot"];gc.__interfaces__=[Tc];gc.__super__=ka;gc.prototype=o(ka.prototype,{createTexture:function(a,b){return new Wc(this,a,b)},onDisposed:function(){this._graphics=this.image=null},__class__:gc});var S=function(a,b){xb.call(this,a,b)};e["flambe.platform.html.HtmlAssetPackLoader"]=S;S.__name__=["flambe","platform","html","HtmlAssetPackLoader"];S.detectImageFormats=function(a){var b=[s.PNG,s.JPG,s.GIF],d=2,i;i=window.document.createElement("img");i.onload=i.onerror=function(){1==
i.width&&b.unshift(s.WEBP);--d;0==d&&a(b)};i.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var c;c=window.document.createElement("img");c.onload=c.onerror=function(){1==c.width&&b.unshift(s.JXR);--d;0==d&&a(b)};c.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};S.detectAudioFormats=function(){var a;a=window.document.createElement("audio");
if(null==a||null==m(a,a.canPlayType))return[];var b=new jb("\\b(iPhone|iPod|iPad|Android|Windows Phone)\\b",""),d=window.navigator.userAgent;if(!U.get_supported()&&b.match(d))return[];for(var b=[{format:s.M4A,mimeType:"audio/mp4; codecs=mp4a"},{format:s.MP3,mimeType:"audio/mpeg"},{format:s.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:s.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:s.WAV,mimeType:"audio/wav"}],d=[],i=0;i<b.length;){var c=b[i];++i;var e="";try{e=a.canPlayType(c.mimeType)}catch(f){}""!=
e&&d.push(c.format)}return d};S.supportsBlob=function(){if(S._detectBlobSupport){S._detectBlobSupport=!1;if((new jb("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;S._URL=G.loadExtension("URL").value}return null!=S._URL&&null!=S._URL.createObjectURL};S.__super__=xb;S.prototype=o(xb.prototype,{loadEntry:function(a,b){var d=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var i;
i=window.document.createElement("img");var c=new dc;c.addDisposingListener(i,"load",function(){S.supportsBlob()&&S._URL.revokeObjectURL(i.src);var a=d._platform.getRenderer().createTextureFromImage(i);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});c.addDisposingListener(i,"error",function(){d.handleError(b,"Failed to load image")});S.supportsBlob()?this.download(a,b,"blob",function(a){i.src=S._URL.createObjectURL(a)}):i.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=
d._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(U.get_supported())this.download(a,b,"arraybuffer",function(a){U.ctx.decodeAudioData(a,function(a){d.handleLoad(b,new U(a))},function(){d.handleLoad(b,Ma.getInstance())})});else{var e;e=window.document.createElement("audio");e.preload="auto";var f=++S._mediaRefCount;null==S._mediaElements&&(S._mediaElements=new Ea);S._mediaElements.set(f,
e);c=new dc;c.addDisposingListener(e,"canplaythrough",function(){S._mediaElements.remove(f);d.handleLoad(b,new hc(e))});c.addDisposingListener(e,"error",function(){S._mediaElements.remove(f);var a=e.error.code;3==a||4==a?d.handleLoad(b,Ma.getInstance()):d.handleError(b,"Failed to load audio: "+e.error.code)});c.addListener(e,"progress",function(){if(0<e.buffered.length&&0<e.duration){var a=e.buffered.end(0)/e.duration;d.handleProgress(b,a*b.bytes|0)}});e.src=a;e.load()}break;case 13:this.download(a,
b,"text",function(a){d.handleLoad(b,new bc(a))})}},getAssetFormats:function(a){var b=this;null==S._supportedFormats&&(S._supportedFormats=new Oc,S.detectImageFormats(function(a){S._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(S.detectAudioFormats()).concat([s.Data]))}));S._supportedFormats.get(a)},download:function(a,b,d,c){var e=this,k=null,f=null,g=0,h=!1,j=function(){h&&(h=!1,window.clearInterval(g))},l=3,m=function(){--l;return 0<=l?(f(),
!0):!1},f=function(){j();null!=k&&k.abort();k=new XMLHttpRequest;k.open("GET",a,!0);k.responseType=d;var f=0;k.onprogress=function(a){h||(h=!0,g=window.setInterval(function(){4!=k.readyState&&5E3<Date.now()-f&&!m()&&(j(),e.handleError(b,"Download stalled"))},1E3));f=Date.now();e.handleProgress(b,a.loaded)};k.onerror=function(){if(0!=k.status||!m())j(),e.handleError(b,"HTTP error "+k.status)};k.onload=function(){var a=k.response;null==a&&(a=k.responseText);j();c(a)};k.send()};f()},__class__:S});var Dc=
function(a,b){Fa.call(this,a);this._canvas=b};e["flambe.platform.html.HtmlMouse"]=Dc;Dc.__name__=["flambe","platform","html","HtmlMouse"];Dc.__super__=Fa;Dc.prototype=o(Fa.prototype,{__class__:Dc});var hc=function(a){this._disposed=!1;this.audioElement=a};e["flambe.platform.html.HtmlSound"]=hc;hc.__name__=["flambe","platform","html","HtmlSound"];hc.__interfaces__=[Gb];hc.__super__=ka;hc.prototype=o(ka.prototype,{play:function(a){null==a&&(a=1);return new ic(this,a,!1)},loop:function(a){null==a&&(a=
1);return new ic(this,a,!0)},get_duration:function(){return this.audioElement.duration},onDisposed:function(){this.audioElement=null},__class__:hc});var ic=function(a,b,d){var c=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=d;this._clonedElement.src=a.audioElement.src;this.volume=new X(b,function(){c.updateVolume()});this.updateVolume();this._complete=new oa(!1);this.playAudio();q.hidden._value&&this.set_paused(!0)};e["flambe.platform.html._HtmlSound.HtmlPlayback"]=
ic;ic.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];ic.__interfaces__=[Uc,Hb];ic.prototype={get_paused:function(){return this._clonedElement.paused},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._clonedElement.currentTime},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||
this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(lb.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=q.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=q.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,
a.set_paused(!0)):a.set_paused(a._wasPaused)}))},updateVolume:function(){this._clonedElement.volume=q.volume._value*this.volume._value},__class__:ic};var oe=function(){};e["flambe.subsystem.StageSystem"]=oe;oe.__name__=["flambe","subsystem","StageSystem"];oe.prototype={__class__:oe};var Ab=function(a){var b=this;this._canvas=a;this.resize=new L;this.scaleFactor=Ab.computeScaleFactor();1!=this.scaleFactor&&(G.setVendorStyle(this._canvas,"transform-origin","top left"),G.setVendorStyle(this._canvas,
"transform","scale("+1/this.scaleFactor+")"));G.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){G.callLater(m(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",m(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new oa(null);null!=window.orientation&&(window.addEventListener("orientationchange",m(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new oa(!1);G.addVendorListener(window.document,
"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};e["flambe.platform.html.HtmlStage"]=Ab;Ab.__name__=["flambe","platform","html","HtmlStage"];Ab.__interfaces__=[oe];Ab.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=window.document.createElement("canvas").getContext("2d"),b=G.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=window.screen.height;return 1136<a*window.screen.width||1136<a*b?1:a};Ab.prototype={get_width:function(){return this._canvas.width},
get_height:function(){return this._canvas.height},onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var d=this.scaleFactor*a,c=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==c)return!1;this._canvas.width=d|0;this._canvas.height=c|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=
window.innerWidth+"px";b.overflow="visible";G.callLater(function(){G.hideMobileBrowser();G.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(G.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==G.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:Ab};var Gc=function(a){this._storage=a};e["flambe.platform.html.HtmlStorage"]=Gc;
Gc.__name__=["flambe","platform","html","HtmlStorage"];Gc.__interfaces__=[Sc];Gc.prototype={set:function(a,b){var d;try{var c=new db;c.useCache=!0;c.useEnumIndex=!1;c.serialize(b);d=c.toString()}catch(e){return!1}try{this._storage.setItem("flambe:"+a,d)}catch(k){return!1}return!0},get:function(a,b){var d=null;try{d=this._storage.getItem("flambe:"+a)}catch(c){null}if(null!=d)try{return ta.run(d)}catch(e){null}return b},__class__:Gc};var G=function(){};e["flambe.platform.html.HtmlUtil"]=G;G.__name__=
["flambe","platform","html","HtmlUtil"];G.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};G.hideMobileBrowser=function(){window.scrollTo(1,0)};G.loadExtension=function(a,b){null==b&&(b=window);var d=R.field(b,a);if(null!=d)return{prefix:"",field:a,value:d};for(var d=a.charAt(0).toUpperCase()+A.substr(a,1,null),c=0,e=G.VENDOR_PREFIXES;c<e.length;){var k=e[c];++c;var f=k+d,g=R.field(b,f);if(null!=g)return{prefix:k,field:f,value:g}}return{prefix:null,field:null,value:null}};G.loadFirstExtension=
function(a,b){for(var d=0;d<a.length;){var c=a[d];++d;c=G.loadExtension(c,b);if(null!=c.field)return c}return{prefix:null,field:null,value:null}};G.polyfill=function(a,b){null==b&&(b=window);var d=G.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};G.setVendorStyle=function(a,b,d){for(var a=a.style,c=0,e=G.VENDOR_PREFIXES;c<e.length;){var k=e[c];++c;a.setProperty("-"+k+"-"+b,d)}a.setProperty(b,d)};G.addVendorListener=function(a,b,d,c){for(var e=0,k=G.VENDOR_PREFIXES;e<k.length;){var f=
k[e];++e;a.addEventListener(f+b,d,c)}a.addEventListener(b,d,c)};G.orientation=function(a){switch(a){case -90:case 90:return Sa.Landscape;default:return Sa.Portrait}};G.createEmptyCanvas=function(a,b){var d;d=window.document.createElement("canvas");d.width=a;d.height=b;return d};G.createCanvas=function(a){var b=G.createEmptyCanvas(a.width,a.height),d=b.getContext("2d");d.save();d.globalCompositeOperation="copy";d.drawImage(a,0,0);d.restore();return b};G.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&
null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var d=a[b];++b;if(0<=d.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};G.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var U=function(a){this._disposed=!1;this.buffer=a};e["flambe.platform.html.WebAudioSound"]=U;U.__name__=["flambe","platform","html","WebAudioSound"];
U.__interfaces__=[Gb];U.get_supported=function(){if(U._detectSupport){U._detectSupport=!1;var a=G.loadExtension("AudioContext").value;null!=a&&(U.ctx=new a,U.gain=U.createGain(),U.gain.connect(U.ctx.destination),q.volume.watch(function(a){U.gain.gain.value=a}))}return null!=U.ctx};U.createGain=function(){return null!=U.ctx.createGain?U.ctx.createGain():U.ctx.createGainNode()};U.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};U.__super__=ka;U.prototype=o(ka.prototype,{play:function(a){null==
a&&(a=1);return new jc(this,a,!1)},loop:function(a){null==a&&(a=1);return new jc(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:U});var jc=function(a,b,d){var c=this;this._sound=a;this._head=U.gain;this._complete=new oa(!1);this._sourceNode=U.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=d;this._sourceNode.onended=function(){c._complete.set__(!0)};U.start(this._sourceNode,0);this.playAudio();this.volume=
new X(b,function(a){c.setVolume(a)});1!=b&&this.setVolume(b);q.hidden._value&&this.set_paused(!0)};e["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=jc;jc.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];jc.__interfaces__=[Uc,Hb];jc.prototype={get_paused:function(){return 0<=this._pausedAt},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},
get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(U.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=
U.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=U.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(lb.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=q.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,
a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:jc};var pe=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,
this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new Xc(a);this._drawPatternShader=new Yc(a);this._fillRectShader=new Zc(a);this.resize(16)};e["flambe.platform.html.WebGLBatcher"]=pe;pe.__name__=["flambe","platform","html","WebGLBatcher"];pe.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();
this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,d,c){c!=this._lastTexture&&(this.flush(),this._lastTexture=
c);return this.prepareQuad(5,a,b,d,this._drawTextureShader)},prepareFillRect:function(a,b,d){return this.prepareQuad(6,a,b,d,this._fillRectShader)},prepareQuad:function(a,b,d,c,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);d!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=d);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=c||null!=this._lastScissor)if(null==c||null==this._lastScissor||!this._lastScissor.equals(c))this.flush(),this._lastScissor=null!=
c?c.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,
771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),
this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=
0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),d=0;d<a;){var c=d++;b[6*c]=4*c;b[6*c+1]=4*c+1;b[6*c+2]=4*c+2;b[6*c+3]=4*c+2;b[6*c+4]=4*c+3;b[6*c+5]=4*c}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,
0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:pe};var Ta=function(a,b){this._inverseProjection=this._stateList=null;null==Ta._scratchQuadArray&&(Ta._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};e["flambe.platform.html.WebGLGraphics"]=Ta;Ta.__name__=["flambe","platform","html","WebGLGraphics"];Ta.__interfaces__=[ec];Ta.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new $c,
b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},transform:function(a,b,d,c,e,k){var f=this._stateList;Ta._scratchMatrix.set(a,b,d,c,e,k);La.multiply(f.matrix,Ta._scratchMatrix,f.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,d){this.drawSubTexture(a,b,d,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,d,c,e,k,f){var g=this._stateList,
h=a.root,b=this.transformQuad(b,d,k,f),d=h.width,h=h.height,c=(a.rootX+c)/d,e=(a.rootY+e)/h,k=c+k/d,f=e+f/h,d=g.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,g.blendMode,g.scissor,a),g=this._batcher.data;g[a]=b[0];g[++a]=b[1];g[++a]=c;g[++a]=e;g[++a]=d;g[++a]=b[2];g[++a]=b[3];g[++a]=k;g[++a]=e;g[++a]=d;g[++a]=b[4];g[++a]=b[5];g[++a]=k;g[++a]=f;g[++a]=d;g[++a]=b[6];g[++a]=b[7];g[++a]=c;g[++a]=f;g[++a]=d},fillRect:function(a,b,d,c,e){var k=this._stateList,b=this.transformQuad(b,d,c,e),
d=(a&16711680)/16711680,c=(a&65280)/65280,a=(a&255)/255,e=k.alpha,k=this._batcher.prepareFillRect(this._renderTarget,k.blendMode,k.scissor),f=this._batcher.data;f[k]=b[0];f[++k]=b[1];f[++k]=d;f[++k]=c;f[++k]=a;f[++k]=e;f[++k]=b[2];f[++k]=b[3];f[++k]=d;f[++k]=c;f[++k]=a;f[++k]=e;f[++k]=b[4];f[++k]=b[5];f[++k]=d;f[++k]=c;f[++k]=a;f[++k]=e;f[++k]=b[6];f[++k]=b[7];f[++k]=d;f[++k]=c;f[++k]=a;f[++k]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=
a},applyScissor:function(a,b,d,c){var e=this._stateList,k=Ta._scratchQuadArray;k[0]=a;k[1]=b;k[2]=a+d;k[3]=b+c;e.matrix.transformArray(k,4,k);this._inverseProjection.transformArray(k,4,k);a=k[0];b=k[1];d=k[2]-a;c=k[3]-b;0>d&&(a+=d,d=-d);0>c&&(b+=c,c=-c);e.applyScissor(a,b,d,c)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new $c;var d;d=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*d/
b,-1,d);this._inverseProjection=new La;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,d,c){var d=a+d,c=b+c,e=Ta._scratchQuadArray;e[0]=a;e[1]=b;e[2]=d;e[3]=b;e[4]=d;e[5]=c;e[6]=a;e[7]=c;this._stateList.matrix.transformArray(e,8,e);return e},__class__:Ta};var $c=function(){this.scissor=this.prev=this.next=null;this.matrix=new La;this.alpha=1;this.blendMode=T.Normal};e["flambe.platform.html._WebGLGraphics.DrawingState"]=$c;$c.__name__=["flambe",
"platform","html","_WebGLGraphics","DrawingState"];$c.prototype={applyScissor:function(a,b,d,c){if(null!=this.scissor)var e=pa.max(this.scissor.x,a),k=pa.max(this.scissor.y,b),d=pa.min(this.scissor.x+this.scissor.width,a+d),c=pa.min(this.scissor.y+this.scissor.height,b+c),a=e,b=k,d=d-e,c=c-k;else this.scissor=new bb;this.scissor.set(Math.round(a),Math.round(b),Math.round(d),Math.round(c))},__class__:$c};var Ic=function(a,b){var d=this;this._hasGPU=new oa(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",
function(a){a.preventDefault();d._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){d.init();d._hasGPU.set__(!0)},!1);a.resize.connect(m(this,this.onResize));this.init()};e["flambe.platform.html.WebGLRenderer"]=Ic;Ic.__name__=["flambe","platform","html","WebGLRenderer"];Ic.__interfaces__=[fc];Ic.prototype={get_type:function(){return qa.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new yb(this,a.width,a.height);b.uploadImageData(a);
return b.createTexture(a.width,a.height)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new pe(this.gl);this.graphics=new Ta(this.batcher,null);this.onResize()},__class__:Ic};
var ad=function(a,b,d){Wa.call(this,a,b,d)};e["flambe.platform.html.WebGLTexture"]=ad;ad.__name__=["flambe","platform","html","WebGLTexture"];ad.__super__=Wa;ad.prototype=o(Wa.prototype,{__class__:ad});var yb=function(a,b,d){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=pa.max(2,ne.nextPowerOfTwo(b));this.height=pa.max(2,ne.nextPowerOfTwo(d));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);
b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9985)};e["flambe.platform.html.WebGLTextureRoot"]=yb;yb.__name__=["flambe","platform","html","WebGLTextureRoot"];yb.__interfaces__=[Tc];yb.drawBorder=function(a,b,d){var c=a.getContext("2d");c.drawImage(a,b-1,0,1,d,b,0,1,d);c.drawImage(a,0,d-1,b,1,0,d,b,1)};yb.__super__=ka;yb.prototype=o(ka.prototype,{createTexture:function(a,b){return new ad(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||
this.height!=a.height){var b=G.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);yb.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);b=this._renderer.gl;b.texImage2D(3553,0,6408,6408,5121,a);b.generateMipmap(3553)},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:yb});var za=function(a,b,d){d=
"#ifdef GL_ES\nprecision mediump float;\n#endif\n"+d;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,za.createShader(a,35633,b));a.attachShader(this._program,za.createShader(a,35632,d));a.linkProgram(this._program);a.useProgram(this._program)};e["flambe.platform.shader.ShaderGL"]=za;za.__name__=["flambe","platform","shader","ShaderGL"];za.createShader=function(a,b,d){b=a.createShader(b);a.shaderSource(b,d);a.compileShader(b);return b};za.prototype={useProgram:function(){this._gl.useProgram(this._program)},
prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:za};var Yc=function(a){za.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};e["flambe.platform.shader.DrawPatternGL"]=Yc;Yc.__name__=["flambe","platform","shader","DrawPatternGL"];Yc.__super__=za;Yc.prototype=o(za.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,d,c){this._gl.uniform4f(this.u_region,
a,b,d,c)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Yc});var Xc=function(a){za.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};e["flambe.platform.shader.DrawTextureGL"]=Xc;Xc.__name__=["flambe","platform","shader","DrawTextureGL"];Xc.__super__=za;Xc.prototype=
o(za.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:Xc});var Zc=function(a){za.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};e["flambe.platform.shader.FillRectGL"]=Zc;Zc.__name__=["flambe","platform","shader","FillRectGL"];Zc.__super__=za;Zc.prototype=o(za.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);
this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:Zc});var bd=function(){this._transitor=null;v.call(this);this.scenes=[];this.occludedScenes=[];this._root=new p};e["flambe.scene.Director"]=bd;bd.__name__=["flambe","scene","Director"];bd.__super__=v;bd.prototype=o(v.prototype,{get_name:function(){return"Director_19"},pushScene:function(a,b){var d=this;this.completeTransition();
var c=this.get_topScene();null!=c?this.playTransition(c,a,b,function(){d.hide(c)}):(this.add(a),this.invalidateVisibility())},unwindToScene:function(a,b){var d=this;this.completeTransition();var c=this.get_topScene();if(null!=c){if(c!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(c,a,b,function(){d.hideAndDispose(c)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();
for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);A.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_0;null!=a&&a.hidden.emit()},
hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_0;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_0;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},
playTransition:function(a,b,d,c){this.completeTransition();this.add(b);null!=d?(this.occludedScenes.push(a),this._transitor=new qe(a,b,d,c),this._transitor.init(this)):(c(),this.invalidateVisibility())},__class__:bd});var qe=function(a,b,d,c){this._from=a;this._to=b;this._transition=d;this._onComplete=c};e["flambe.scene._Director.Transitor"]=qe;qe.__name__=["flambe","scene","_Director","Transitor"];qe.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},
complete:function(){this._transition.complete();this._onComplete()},__class__:qe};var Na=function(a){null==a&&(a=!0);v.call(this);this.opaque=a;this.shown=new L;this.hidden=new L};e["flambe.scene.Scene"]=Na;Na.__name__=["flambe","scene","Scene"];Na.__super__=v;Na.prototype=o(v.prototype,{get_name:function(){return"Scene_0"},__class__:Na});var Ue=function(){};e["flambe.scene.Transition"]=Ue;Ue.__name__=["flambe","scene","Transition"];Ue.prototype={init:function(a,b,d){this._director=a;this._from=b;
this._to=d},update:function(){return!0},complete:function(){},__class__:Ue};var mb=function(){};e["flambe.script.Action"]=mb;mb.__name__=["flambe","script","Action"];mb.prototype={__class__:mb};var kc=function(a,b,d,c){this._value=a;this._by=b;this._seconds=d;this._easing=c};e["flambe.script.AnimateBy"]=kc;kc.__name__=["flambe","script","AnimateBy"];kc.__interfaces__=[mb];kc.prototype={update:function(a){null==this._tween&&(this._tween=new Eb(this._value._value,this._value._value+this._by,this._seconds,
this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:kc};var $=function(a,b,d,c){this._value=a;this._to=b;this._seconds=d;this._easing=c};e["flambe.script.AnimateTo"]=$;$.__name__=["flambe","script","AnimateTo"];$.__interfaces__=[mb];$.prototype={update:function(a){null==this._tween&&(this._tween=new Eb(this._value._value,this._to,this._seconds,
this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:$};var la=function(a){this._fn=a};e["flambe.script.CallFunction"]=la;la.__name__=["flambe","script","CallFunction"];la.__interfaces__=[mb];la.prototype={update:function(){this._fn();return 0},__class__:la};var Ib=function(a){this._duration=a;this._elapsed=0};e["flambe.script.Delay"]=
Ib;Ib.__name__=["flambe","script","Delay"];Ib.__interfaces__=[mb];Ib.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:Ib};var nb=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};e["flambe.script.Parallel"]=nb;nb.__name__=["flambe","script","Parallel"];nb.__interfaces__=[mb];nb.prototype={update:function(a,b){for(var d=!0,c=0,e=0,k=this._runningActions.length;e<
k;){var f=e++,g=this._runningActions[f];if(null!=g){var h=g.update(a,b);0<=h?(this._runningActions[f]=null,this._completedActions.push(g),h>c&&(c=h)):d=!1}}return d?(this._runningActions=this._completedActions,this._completedActions=[],c):-1},__class__:nb};var Ga=function(){v.call(this);this.stopAll()};e["flambe.script.Script"]=Ga;Ga.__name__=["flambe","script","Script"];Ga.__super__=v;Ga.prototype=o(v.prototype,{get_name:function(){return"Script_16"},run:function(a){a=new cd(a);this._handles.push(a);
return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var d=this._handles[b];d.removed||0<=d.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:Ga});var cd=function(a){this.removed=!1;this.action=a};e["flambe.script._Script.Handle"]=cd;cd.__name__=["flambe","script","_Script","Handle"];cd.__interfaces__=[Qa];cd.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:cd};var Ha=function(a){this._idx=0;this._runningActions=
null!=a?a.slice():[]};e["flambe.script.Sequence"]=Ha;Ha.__name__=["flambe","script","Sequence"];Ha.__interfaces__=[mb];Ha.prototype={update:function(a,b){for(var d=0;;){var c=this._runningActions[this._idx];if(null!=c)if(c=c.update(a-d,b),0<=c)d+=c;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(d>a)return-1}return d},__class__:Ha};var qa=e["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D","WebGL",
"Canvas"]};qa.Stage3D=["Stage3D",0];qa.Stage3D.toString=g;qa.Stage3D.__enum__=qa;qa.WebGL=["WebGL",1];qa.WebGL.toString=g;qa.WebGL.__enum__=qa;qa.Canvas=["Canvas",2];qa.Canvas.toString=g;qa.Canvas.__enum__=qa;qa.__empty_constructs__=[qa.Stage3D,qa.WebGL,qa.Canvas];var dd=function(){};e["flambe.swf.Symbol"]=dd;dd.__name__=["flambe","swf","Symbol"];dd.prototype={__class__:dd};var ed=function(a,b){this._name=a.symbol;var d=a.rect;this.texture=b.subTexture(d[0],d[1],d[2],d[3]);d=a.origin;null!=d?(this.anchorX=
d[0],this.anchorY=d[1]):this.anchorY=this.anchorX=0};e["flambe.swf.BitmapSymbol"]=ed;ed.__name__=["flambe","swf","BitmapSymbol"];ed.__interfaces__=[dd];ed.prototype={createSprite:function(){var a=new cb(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:ed};var re=function(a,b){this._file=a.getFile(b+"/library.json");var d=JSON.parse(this._file.toString());this._symbols=new M;this.frameRate=d.frameRate;for(var c=[],e=0,k=d.movies;e<k.length;){var f=k[e];++e;f=new fd(this,f);
c.push(f);this._symbols.set(f._name,f)}d=d.textureGroups;(1!=d[0].scaleFactor||1<d.length)&&null;d=d[0].atlases;for(e=0;e<d.length;){var g=d[e];++e;k=a.getTexture(b+"/"+ja.removeFileExtension(g.file));f=0;for(g=g.textures;f<g.length;){var h=g[f];++f;h=new ed(h,k);this._symbols.set(h._name,h)}}for(d=0;d<c.length;){k=c[d];++d;e=0;for(k=k.layers;e<k.length;){f=k[e];++e;f=f.keyframes;g=f.length;for(h=0;h<g;){var j=h++,l=f[j];if(null!=l.symbolName){var m=this._symbols.get(l.symbolName);l.symbol=m}if(l.tweened&&
1==l.duration&&j+1<g&&(j=f[j+1],!j.visible||null==j.symbolName))l.visible=!1}}}};e["flambe.swf.Library"]=re;re.__name__=["flambe","swf","Library"];re.prototype={createSprite:function(a,b){null==b&&(b=!0);var d=this._symbols.get(a);if(null==d){if(b)throw ja.withFields("Missing symbol",["name",a]);return null}return d.createSprite()},__class__:re};var Jb=function(a){this._oneshotSprite=this._loopingSprite=null;v.call(this);this._lib=a;this._root=new p;this.movie=new oa(null);this.setCache(!0)};e["flambe.swf.MoviePlayer"]=
Jb;Jb.__name__=["flambe","swf","MoviePlayer"];Jb.__super__=v;Jb.prototype=o(v.prototype,{get_name:function(){return"MoviePlayer_11"},setCache:function(a){this._cache=a?new M:null;return this},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this._root.dispose();this._oneshotSprite=this._loopingSprite=null;this.movie.set__(null)},onUpdate:function(a){null!=this._oneshotSprite&&this._oneshotSprite._position+a>this._oneshotSprite.symbol.duration&&(this._oneshotSprite=null,this.setCurrent(this._loopingSprite))},
playFromCache:function(a){var b;null!=this._cache?(b=this._cache.get(a),null!=b?b.set_position(0):(b=this.createMovie(a),this._cache.set(a,b))):b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);return this.movie.set__(a)},__class__:Jb});var lc=function(a){this._looped=null;y.call(this);this.symbol=a;this.speed=new X(1);this._animators=Array(a.layers.length);
for(var b=0,d=this._animators.length;b<d;){var c=b++;this._animators[c]=new se(a.layers[c])}this._position=this._frame=0;this["goto"](1)};e["flambe.swf.MovieSprite"]=lc;lc.__name__=["flambe","swf","MovieSprite"];lc.__super__=y;lc.prototype=o(y.prototype,{onAdded:function(){y.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];++a;this.owner.addChild(d.content)}},onRemoved:function(){y.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];
++a;this.owner.removeChild(d.content)}},onUpdate:function(a){y.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,d=this._animators;b<d.length;){var c=d[b];++b;c.needsKeyframeUpdate=
!0;c.keyframeIdx=0}b=0;for(d=this._animators;b<d.length;)c=d[b],++b,c.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=pa.clamp(a,0,this.symbol.duration)},set_paused:function(a){this._flags=Lc.set(this._flags,128,a);return a},rewind:function(){this._position=0;this._flags|=256},__class__:lc});var se=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new p;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=
0,d=this._sprites.length;b<d;){var c=b++,e=a.keyframes[c];this._sprites[c]=0<c&&a.keyframes[c-1].symbol==e.symbol?this._sprites[c-1]:null==e.symbol?new y:e.symbol.createSprite()}this.content.add(this._sprites[0])}};e["flambe.swf._MovieSprite.LayerAnimator"]=se;se.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];se.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,d=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_13.set_visible(!1),this.keyframeIdx=
d,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<d&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var c;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,c=this._sprites[this.keyframeIdx],c!=this.content._compMap.Sprite_13&&(O.getClass(c)==lc&&c.rewind(),this.content.add(c))):c=this.content._compMap.Sprite_13;var e=b[this.keyframeIdx],k=e.visible&&null!=e.symbol;c.set_visible(k);if(k){var k=e.x,f=e.y,g=e.scaleX,h=e.scaleY,j=e.skewX,l=e.skewY,m=e.alpha;
if(e.tweened&&this.keyframeIdx<d){a=(a-e.index)/e.duration;d=e.ease;if(0!=d){var n;0>d?(n=1-a,n=1-n*n,d=-d):n=a*a;a=d*n+(1-d)*a}b=b[this.keyframeIdx+1];k+=(b.x-k)*a;f+=(b.y-f)*a;g+=(b.scaleX-g)*a;h+=(b.scaleY-h)*a;j+=(b.skewX-j)*a;l+=(b.skewY-l)*a;m+=(b.alpha-m)*a}b=c.getLocalMatrix();a=Math.sin(j);j=Math.cos(j);d=Math.sin(l);l=Math.cos(l);b.set(l*g,d*g,-a*h,j*h,k,f);b.translate(-e.pivotX,-e.pivotY);c.alpha.set__(m)}}}},__class__:se};var fd=function(a,b){this._name=b.id;this.frameRate=a.frameRate;
this.frames=0;this.layers=Array(b.layers.length);for(var d=0,c=this.layers.length;d<c;){var e=d++,k=new te(b.layers[e]);this.frames=Math.max(k.frames,this.frames);this.layers[e]=k}this.duration=this.frames/this.frameRate};e["flambe.swf.MovieSymbol"]=fd;fd.__name__=["flambe","swf","MovieSymbol"];fd.__interfaces__=[dd];fd.prototype={createSprite:function(){return new lc(this)},__class__:fd};var te=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var d=
0,c=this.keyframes.length;d<c;){var e=d++,b=new ue(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};e["flambe.swf.MovieLayer"]=te;te.__name__=["flambe","swf","MovieLayer"];te.prototype={__class__:te};var ue=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=
a.duration;this.label=a.label;this.symbolName=a.ref;var d=a.loc;null!=d&&(this.x=d[0],this.y=d[1]);d=a.scale;null!=d&&(this.scaleX=d[0],this.scaleY=d[1]);d=a.skew;null!=d&&(this.skewX=d[0],this.skewY=d[1]);d=a.pivot;null!=d&&(this.pivotX=d[0],this.pivotY=d[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};e["flambe.swf.MovieKeyframe"]=ue;ue.__name__=["flambe","swf","MovieKeyframe"];ue.prototype=
{__class__:ue};var Zb=function(){};e["flambe.util.Assert"]=Zb;Zb.__name__=["flambe","util","Assert"];Zb.that=function(){};var Lc=function(){};e["flambe.util.BitSets"]=Lc;Lc.__name__=["flambe","util","BitSets"];Lc.set=function(a,b,d){return d?a|b:a&~b};var Oc=function(){this.success=new C;this.error=new C;this.progressChanged=new L;this.hasResult=!1;this._total=this._progress=0};e["flambe.util.Promise"]=Oc;Oc.__name__=["flambe","util","Promise"];Oc.prototype={set_result:function(a){if(this.hasResult)throw"Promise result already assigned";
this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Oc};var L=function(a){ga.call(this,a)};e["flambe.util.Signal0"]=L;L.__name__=["flambe","util","Signal0"];L.__super__=ga;L.prototype=o(ga.prototype,
{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==ga.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:L});var $d=function(a){this.next=null;this.fn=a};e["flambe.util._SignalBase.Task"]=$d;$d.__name__=["flambe","util","_SignalBase","Task"];$d.prototype={__class__:$d};var ja=function(){};
e["flambe.util.Strings"]=ja;ja.__name__=["flambe","util","Strings"];ja.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,b+1,null):null};ja.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?A.substr(a,0,b):a};ja.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=A.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=A.substr(a,b+1,null));return ja.getFileExtension(a)};ja.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+
b};ja.withFields=function(a,b){var d=b.length;if(0<d){for(var a=0<a.length?a+" [":a+"[",c=0;c<d;){0<c&&(a+=", ");var e=b[c],k=b[c+1];if(x.is(k,Error)){var f=k.stack;null!=f&&(k=f)}a+=e+"="+x.string(k);c+=2}a+="]"}return a};var Aa=function(){};e["flambesdk.BaseUtils"]=Aa;Aa.__name__=["flambesdk","BaseUtils"];Aa.setupManifest=function(a){""!=Aa.BASE_URL&&(Ba.get_isCrossdomain()?a.set_remoteBase(Aa.BASE_URL):a.set_localBase(Aa.BASE_URL));return a};Aa.setupBaseURL=function(){Aa.BASE_URL=Ba.get_exists()?
Ba.get_isCrossdomain()?Aa.appendAssetsToUrl(Ba.get_base()):Aa.trimUrl(Ba.get_base()):""};Aa.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=A.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=A.substr(a,b,a.length-b);return a=Aa.appendAssetsToUrl(a)};Aa.appendAssetsToUrl=function(a){"/"!=a.charAt(a.length-1)&&(a+="/");return a+"assets/"};var gd=function(){v.call(this);this.sdk=new eb;q.uncaughtError.connect(($e=
this.sdk,m($e,$e.onException)));N.onSuspendToggle=function(a){q.root.add(new sb(a?0:1))}};e["flambesdk.SDKComponent"]=gd;gd.__name__=["flambesdk","SDKComponent"];gd.__super__=v;gd.prototype=o(v.prototype,{get_name:function(){return"SDKComponent_17"},onUpdate:function(a){this.sdk.onUpdate(a)},__class__:gd});var ve=function(a,b,d,c,e){null==e&&(e=!1);null==d&&(d=0);this._muted=this._singleTrack=!1;this._pan=0;this._name=a;this._volume=b;this._pan=d;this._singleTrack=e;this._sounds=new M;this._channels=
new M;this.onChannelVolumeChange=new $a;if(null!=c){a=0;for(b=c.length;a<b;)d=a++,this.createAndAddSound(c[d])}};e["gamecontainer.general.audio.SoundChannel"]=ve;ve.__name__=["gamecontainer","general","audio","SoundChannel"];ve.prototype={createAndAddSound:function(a){a=new we(this,a.soundname,a.volume,a.loops,a.pan,a.fadeIn,a.fadeOut,a.priority,a.queueSound);this._sounds.set(a.getName(),a)},hasSound:function(a){return this._sounds.exists(a)},getVolume:function(){return this._volume},playSound:function(a,
b,d,c){if(this._sounds.exists(a)){d=this._sounds.get(a);if(!0==this._singleTrack&&!this.checkPriority(d))return!1;if(!d.isReady())if(this.doesSoundExistInPack(a,b))d.createSound(b);else return!1;null!=c&&d.connectionDisposer.add(d.onSoundComplete.connect(c));d.connectionDisposer.add(d.onSoundError.connect(m(this,this.onSoundError)));d.play();return!0}return!1},stopSound:function(a){this._sounds.exists(a)&&this._sounds.get(a).stopSound()},stopAllSounds:function(){for(var a=this._sounds.iterator();a.hasNext();){var b=
a.next();b.isPlaying()&&b.stopSound()}},isMuted:function(){return this._muted},getName:function(){return this._name},doesSoundExistInPack:function(a,b){for(var d=b.get_manifest().iterator();d.hasNext();)if(d.next().name==a)return!0;return!1},checkPriority:function(a){for(var b=this._sounds.iterator();b.hasNext();){var d=b.next();if(d.isPlaying())if(d.getPrioity()<a.getPrioity())d.stopSound();else return!1}return!0},onSoundError:function(){},destroy:function(){for(var a=this._channels.iterator();a.hasNext();)a.next().destroy();
this.destroySoundObjects()},destroySoundObjects:function(){for(var a=this._sounds.iterator();a.hasNext();)a.next().destroy();for(a=this._channels.iterator();a.hasNext();)a.next().destroySoundObjects()},__class__:ve};var r=function(){};e["gamecontainer.general.audio.SoundManager"]=r;r.__name__=["gamecontainer","general","audio","SoundManager"];r.prototype={createAll:function(a){null==this._channels&&(this._channels=new M);for(var b=0,d=a.channels.length;b<d;){var c=b++;if(this._channels.exists(a.channels[c].name)){var e=
this._channels.get(a.channels[c].name);if(null!=a.channels[c].sounds&&0<a.channels[c].sounds.length)for(var k=0,f=a.channels[c].sounds.length;k<f;){var g=k++;e.hasSound(a.channels[c].sounds[g].soundname)||e.createAndAddSound(a.channels[c].sounds[g])}}else c=new ve(a.channels[c].name,a.channels[c].volume,a.channels[c].pan,a.channels[c].sounds,a.channels[c].singleTrack),this._channels.set(c.getName(),c)}},playSoundByConfig:function(a,b,d,c){null==d&&(d=!0);var e=this;switch(a.playbackType){case "Random":return this.playSound(a.soundname[Math.floor(Math.random()*
a.soundname.length)],b,d,c);case "All":for(var k=0,f=a.soundname.length;k<f;){var g=k++;this.playSound(a.soundname[g],b,d,c)}break;case "Normal":return this.playSound(a.soundname,b,d,c);case "Sequence":var h=0,j=null,j=function(k){h++;h<a.soundname.length?e.playSound(a.soundname[h],b,d,j):null!=c&&c(k)};return this.playSound(a.soundname[h],b,d,j);case "Cycle":if(null==a.index||a.index>=a.soundname.length)a.index=0;if(this.playSound(a.soundname[Q.__cast(a.index,fb)],b,d,c)||""==a.soundname[Q.__cast(a.index,
fb)])return a.index++,!0;break;default:return this.playSound(a.soundname,b,d,c)}return!1},playSound:function(a,b,d,c){null==d&&(d=!0);if(null!=this._channels)for(var e=this._channels.iterator();e.hasNext();){var k=e.next();if(k.hasSound(a))return k.playSound(a,b,d,c)}return!1},stopSound:function(a){if(null!=this._channels)for(var b=this._channels.iterator();b.hasNext();){var d=b.next();d.hasSound(a)&&d.stopSound(a)}},stopAllSounds:function(){if(null!=this._channels)for(var a=this._channels.iterator();a.hasNext();)a.next().stopAllSounds()},
stopAllChannelSounds:function(a){null!=this._channels&&this._channels.exists(a)&&this._channels.get(a).stopAllSounds()},destroySoundChannels:function(){if(null!=this._channels){for(var a=this._channels.iterator();a.hasNext();)a.next().destroy();this._channels=null}},__class__:r};var we=function(a,b,d,c,e,k,f,g){null==g&&(g=0);null==f&&(f=0);null==k&&(k=0);null==c&&(c=0);null==d&&(d=-1);this._muted=!1;this._priority=0;this._channel=a;this._channel.onChannelVolumeChange.connect(m(this,this.updateVolumeFromChannel));
this._name=b;this._defaultVolume=-1==d?0.8:d;this._loop=c;this._fadeIn=k;this._fadeOut=f;this._priority=g;this.connectionDisposer=new Cc;this.onFadeComplete=new C;this.onSoundComplete=new C;this.onSoundError=new $a};e["gamecontainer.general.audio.SoundObject"]=we;we.__name__=["gamecontainer","general","audio","SoundObject"];we.prototype={play:function(a,b,d,c){this._currentVolume=-1==a||null==a?this._defaultVolume:a;a=this.getChannelRelativeVolume();null!=this._playBack&&this._playBack.get_paused()?
(this._playBack.set_paused(!1),0==this._playBack.volume._value&&null!=c&&0<c&&this.fadeTo(a,c),this._playBack.volume.set__(a)):(null!=this._playBack&&(this._playBack.dispose(),this._playBack=null),this._playBack=-1!=this._loop?this._sound.play():this._sound.loop(),this._loopCount=this._loop,0<this._fadeIn?(this._playBack.volume.set__(0.01),this.fadeTo(a,this._fadeIn)):this._playBack.volume.set__(a));this._channel.isMuted()&&this.mute();null!=this._playBack&&!1==this._playBack.get_complete().get__()?
(null!=this._onCompleteListenerConnection&&(this._onCompleteListenerConnection.dispose(),this._onCompleteListenerConnection=null),this._onCompleteListenerConnection=this._playBack.get_complete().watch(m(this,this.onCompleteChange))):(this.onSoundError.emit(this._name,"Error Playing Sound - Be sure system supports Audio"),this.onSoundComplete.emit(this._name),this.connectionDisposer.dispose())},isReady:function(){return null!=this._sound},createSound:function(a){null==this._sound&&(this._sound=a.getSound(this._name))},
stopSound:function(){0<this._fadeOut?this.fadeTo(0,this._fadeOut):null!=this._playBack&&(this._playBack.set_paused(!0),this._playBack.dispose(),this._playBack=null)},fadeTo:function(a,b){null==b&&(b=1);null==a&&(a=0);null!=this._playBack?(this._playBack.volume.get_changed().connect(m(this,this.onFadeVolumeChange)),this._fadeTo=a,this._playBack.volume.animateTo(this._fadeTo,b)):this.onSoundError.emit(this._name,"Can't fade, sound is not playing::No playBack")},onFadeVolumeChange:function(a){a==this._fadeTo&&
(this.onFadeComplete.emit(this._name),0==a&&this._playBack.set_paused(!0))},isPlaying:function(){return null!=this._playBack&&!this._playBack.get_paused()&&!this._playBack.get_complete().get__()&&this._playBack.get_position()<this._sound.get_duration()},onCompleteChange:function(a,b){var d=this;!0==a&&!1==b&&(this._loopCount--,0<this._loopCount?(this._playBack=this._sound.play(),this._playBack.volume.set__(this.getChannelRelativeVolume()),this._onCompleteListenerConnection=this._playBack.get_complete().watch(m(this,
this.onCompleteChange))):q.root.addChild(w.Delay(0.05,function(){d.onSoundComplete.emit(d._name);null!=d._onCompleteListenerConnection&&(d._onCompleteListenerConnection.dispose(),d._onCompleteListenerConnection=null);d.connectionDisposer.dispose()})))},getName:function(){return this._name},getPrioity:function(){return this._priority},mute:function(){null!=this._playBack&&(this._mutedVolume=this._playBack.volume._value,this._playBack.volume.set__(0),this._muted=!0)},getChannelRelativeVolume:function(){return this._channel.getVolume()*
this._currentVolume},updateVolumeFromChannel:function(a,b){var d=(b-a)*this._currentVolume;!this._muted&&null!=this._playBack?this._playBack.volume.set__(d):this._mutedVolume=d},destroy:function(){null!=this._onCompleteListenerConnection&&(this._onCompleteListenerConnection.dispose(),this._onCompleteListenerConnection=null);null!=this._playBack&&(this._playBack.set_paused(!0),this._playBack.volume.set__(0),this._playBack.dispose(),this._playBack=null);null!=this._sound&&(this._sound=null);this.connectionDisposer.dispose()},
__class__:we};var Xa=function(a,b,d){null==d&&(d=16711680);null==a&&(a="default");this.colliding=[];this.enabled=!0;v.call(this);this.collisionType=a;this.collisionTarget=b;null==this.collisionTarget?(F.inactiveColliders.exists(this.collisionType)||F.inactiveColliders.set(this.collisionType,[]),F.inactiveColliders.get(this.collisionType).push(this)):"noCollision"!=a&&F.activeColliders.push(this);this.collisionEnter=new C;this.collisionOngoing=new C;this.collisionExit=new C;this.enabled=!0;this.customProperties=
{};this.sprite=new ub(d,0,0);this.sprite.set_visible(!1)};e["gamecontainer.general.collision.Collider"]=Xa;Xa.__name__=["gamecontainer","general","collision","Collider"];Xa.__super__=v;Xa.prototype=o(v.prototype,{get_name:function(){return"Collider_12"},dispose:function(){var a;null==this.collisionTarget&&F.inactiveColliders.exists(this.collisionType)&&(a=F.inactiveColliders.get(this.collisionType).indexOf(this),0<=a&&F.inactiveColliders.get(this.collisionType).splice(a,1));a=F.activeColliders.indexOf(this);
0<=a&&F.activeColliders.splice(a,1);v.prototype.dispose.call(this)},onAdded:function(){v.prototype.onAdded.call(this);this.owner.add(this.sprite)},onStart:function(){v.prototype.onStart.call(this)},CollisionEnter:function(){},CollisionOnGoing:function(){},CollisionExit:function(){},SetActive:function(a){this.enabled=a},CheckCollision:function(){return!0},__class__:Xa});var gb=function(a,b,d,c,e){null==e&&(e=16711680);null==d&&(d="default");Xa.call(this,d,c,e);this.SetBounds(a,b)};e["gamecontainer.general.collision.BoxCollider"]=
gb;gb.__name__=["gamecontainer","general","collision","BoxCollider"];gb.__super__=Xa;gb.prototype=o(Xa.prototype,{SetBounds:function(a,b){this.width=a;this.height=b;this.offsetX=this.get_width()/2;this.offsetY=this.get_height()/2;this.sprite.width.set__(this.get_width());this.sprite.height.set__(this.get_height());this.sprite.centerAnchor()},CollisionEnter:function(a){Xa.prototype.CollisionEnter.call(this,a);if(!(-1!=this.colliding.indexOf(a)||!a.enabled||!this.enabled)&&this.CheckCollision(a))this.colliding.push(a),
this.collisionEnter.emit(a),a.collisionEnter.emit(this)},CollisionOnGoing:function(){Xa.prototype.CollisionOnGoing.call(this);for(var a=0,b=this.colliding;a<b.length;){var d=b[a];++a;!d.enabled||!this.enabled?(this.collisionExit.emit(d),d.collisionExit.emit(this),A.remove(this.colliding,d)):this.CheckCollision(d)&&(this.collisionOngoing.emit(d),d.collisionOngoing.emit(this))}},CollisionExit:function(){Xa.prototype.CollisionExit.call(this);for(var a=0,b=this.colliding;a<b.length;){var d=b[a];++a;this.CheckCollision(d)||
(this.collisionExit.emit(d),d.collisionExit.emit(this),A.remove(this.colliding,d))}},CheckCollision:function(a){Xa.prototype.CheckCollision.call(this,a);a=Q.__cast(a,gb);return this.get_bottom()>a.get_top()&&this.get_top()<a.get_bottom()&&this.get_right()>a.get_left()&&this.get_left()<a.get_right()?!0:!1},get_top:function(){return(this.sprite.getViewMatrix().m12-F.yOffset)/F.scale},get_right:function(){return(this.sprite.getViewMatrix().m02-F.xOffset)/F.scale+this.get_width()},get_bottom:function(){return(this.sprite.getViewMatrix().m12-
F.yOffset)/F.scale+this.get_height()},get_left:function(){return(this.sprite.getViewMatrix().m02-F.xOffset)/F.scale},get_width:function(){return this.width},get_height:function(){return this.height},__class__:gb});var F=function(a,b,d,c){null==c&&(c=0);null==d&&(d=0);null==b&&(b=1);null==a&&(a=1);v.call(this);F.inactiveColliders=new M;F.activeColliders=[];F.iterationCount=a;F.scale=b;F.xOffset=d;F.yOffset=c;n.connect(u.onResize,m(this,this.onResize));this.onResize()};e["gamecontainer.general.collision.CollisionWorld"]=
F;F.__name__=["gamecontainer","general","collision","CollisionWorld"];F.__super__=v;F.prototype=o(v.prototype,{get_name:function(){return"CollisionWorld_9"},onAdded:function(){v.prototype.onAdded.call(this)},onStart:function(){v.prototype.onStart.call(this)},onUpdate:function(a){v.prototype.onUpdate.call(this,a);F.iteration++;if(!(F.iteration<F.iterationCount))for(var a=F.iteration=0,b=F.activeColliders;a<b.length;){var d=b[a];++a;if(F.inactiveColliders.exists(d.collisionTarget)){for(var c=0,e=F.inactiveColliders.get(d.collisionTarget);c<
e.length;){var k=e[c];++c;d.CollisionEnter(k)}d.CollisionOnGoing();d.CollisionExit()}c=0;for(e=F.activeColliders;c<e.length;)k=e[c],++c,d!=k&&d.collisionTarget==k.collisionTarget&&(d.CollisionEnter(k),d.CollisionOnGoing(),d.CollisionExit())}},onResize:function(){null!=u.get_instance()&&(F.scale=u.get_instance().scale,F.xOffset=u.get_instance().offset.x,F.yOffset=u.get_instance().offset.y)},__class__:F});var I=function(a,b){Y.call(this,a,b)};e["gamecontainer.general.math.Vector2"]=I;I.__name__=["gamecontainer",
"general","math","Vector2"];I.get_zero=function(){return new I(0,0)};I.get_up=function(){return new I(0,-1)};I.get_down=function(){return new I(0,1)};I.get_right=function(){return new I(1,0)};I.get_left=function(){return new I(-1,0)};I.__super__=Y;I.prototype=o(Y.prototype,{__class__:I});var hd=function(a){this.isComplete=!1;Jb.call(this,a);this.completeSignal=new L;this.frameLabelSignal=new C;this.isComplete=!0};e["gamecontainer.general.movie.ExtendedMoviePlayer"]=hd;hd.__name__=["gamecontainer",
"general","movie","ExtendedMoviePlayer"];hd.__super__=Jb;hd.prototype=o(Jb.prototype,{playOnce:function(a,b,d,c){null==c&&(c=!1);null==d&&(d=!1);null==b&&(b=!0);if(b||null==this._oneshotSprite||this._oneshotSprite.symbol._name!=a)d||(this._loopingSprite=null),this.isComplete=!1,this._oneshotSprite=this.playFromCache(a),this._oneshotSprite.set_paused(c);return this},loop:function(a,b){null==b&&(b=!0);if(b||null==this._loopingSprite||this._loopingSprite.symbol._name!=a)null!=this.frameLabelSignalConnection&&
this.frameLabelSignalConnection.dispose(),this._oneshotSprite=null,this._loopingSprite=this.playFromCache(a);return this},onUpdate:function(a){!this.isComplete&&null!=this._oneshotSprite&&this._oneshotSprite._position+a>this._oneshotSprite.symbol.duration&&(null==this._loopingSprite?this._oneshotSprite.set_paused(!0):(this._oneshotSprite=null,this.setCurrent(this._loopingSprite)),this.isComplete=!0,this.completeSignal.emit())},setCurrent:function(a){return null!=a?(this._root.add(a),this.movie.set__(a)):
null},__class__:hd});var j=function(a){v.call(this);this.config=a};e["gamecontainer.general.objects.BaseGameObject"]=j;j.__name__=["gamecontainer","general","objects","BaseGameObject"];j.__super__=v;j.prototype=o(v.prototype,{get_name:function(){return"BaseGameObject_1"},onAdded:function(){v.prototype.onAdded.call(this)},onStart:function(){v.prototype.onStart.call(this)},onUpdate:function(a){v.prototype.onUpdate.call(this,a)},get_display:function(){return this.display},get_width:function(){return u.get_targetWidth()},
get_height:function(){return u.get_targetHeight()},__class__:j});var mc=function(a,b,d,c){null==c&&(c=2147483647);null==b&&(b=0);this._spawnedCount=0;v.call(this);this._freeEntities=[];this._allocatorFunc=a;this._capacity=c;this._parentEntity=d;for(a=0;a<b;)a++,this.put(this._allocatorFunc())};e["gamecontainer.general.pooling.EntityPool"]=mc;mc.__name__=["gamecontainer","general","pooling","EntityPool"];mc.__super__=v;mc.prototype=o(v.prototype,{get_name:function(){return"EntityPool_8"},onAdded:function(){null==
this._parentEntity&&(this._parentEntity=this.owner)},dispose:function(){for(var a=0,b=this._freeEntities;a<b.length;){var d=b[a];++a;d.dispose()}this._freeEntities=[];v.prototype.dispose.call(this)},spawn:function(){var a=this._freeEntities.pop();if(null==a)if(this.getAllocatedCount()<this._capacity)a=this._allocatorFunc();else return null;this._parentEntity.addChild(a);this._spawnedCount++;return a},despawn:function(a){this._parentEntity.removeChild(a);this._spawnedCount--;this.getAllocatedCount()<
this._capacity?this._freeEntities.push(a):a.dispose()},getAllocatedCount:function(){return this._spawnedCount+this._freeEntities.length},put:function(a){this.getAllocatedCount()<this._capacity&&this._freeEntities.push(a)},__class__:mc});var ra=function(a){Na.call(this,a)};e["gamecontainer.general.scenes.BaseScene"]=ra;ra.__name__=["gamecontainer","general","scenes","BaseScene"];ra.__super__=Na;ra.prototype=o(Na.prototype,{onAdded:function(){Na.prototype.onAdded.call(this);this.signalConnectionMap=
new M;this._gamePaused=!1;this.layerEntity=new p;this.layerSprite=new y;this.layerEntity.add(this.layerSprite);this.maingroundEntity=new p;this.backgroundEntity=new p;this.foregroundEntity=new p;this.overlayEntity=new p;this.uiEntity=new p;this.layerEntity.addChild(this.backgroundEntity);this.layerEntity.addChild(this.maingroundEntity);this.layerEntity.addChild(this.foregroundEntity);this.layerEntity.addChild(this.overlayEntity);this.owner.addChild(this.layerEntity);this.owner.addChild(this.uiEntity)},
onStart:function(){Na.prototype.onStart.call(this)},LoadConfigValues:function(a){this.configVariables=f.get_instance().assetPacks.get(a).configVariables;this.configSounds=f.get_instance().assetPacks.get(a).configSounds;this.configAssets=f.get_instance().assetPacks.get(a).configAssets},CreateSceneBackground:function(a,b){null==b&&(b="background");return new cb(f.get_instance().assetPacks.get(a).assetPack.getTexture(b))},__class__:ra});var hb=function(a,b){this.packsLoaded=this.currentProgress=0;Na.call(this,
void 0);this.assetPackName=a;this.onComplete=new L;this.loader=b};e["gamecontainer.general.scenes.BaseLoadingScene"]=hb;hb.__name__=["gamecontainer","general","scenes","BaseLoadingScene"];hb.__super__=ra;hb.prototype=o(ra.prototype,{onAdded:function(){ra.prototype.onAdded.call(this);this.LoadConfigValues(this.assetPackName);this.ConstructDisplay()},ConstructDisplay:function(){},ProgressChanged:function(){for(var a=this.currentProgress=0,b=this.loader.length;a<b;){var d=a++;this.currentProgress+=100*
(this.loader[d]._progress/this.loader[d]._total)/this.loader.length}},OnPackLoaded:function(){this.packsLoaded++;this.packsLoaded==this.loader.length&&this.foregroundEntity.addChild(w.Delay(1,m(this,this.onLoadComplete)))},onLoadComplete:function(){this.onComplete.emit()},get_width:function(){return u.get_targetWidth()},get_height:function(){return u.get_targetHeight()},__class__:hb});var f=function(){this.signalCount=0};e["gamecontainer.general.utils.AssetLoader"]=f;f.__name__=["gamecontainer","general",
"utils","AssetLoader"];f.get_instance=function(){null==f._instance&&(f._instance=new f);return f._instance};f.prototype={LoadMappedAsset:function(a,b){var d=this;null==this.signalConnectionMap&&(this.signalConnectionMap=new M);var c=Ka.fromAssets(a);Aa.setupManifest(c);c=q._platform.loadAssetPack(c);c.get(function(c){null==d.assetPacks&&(d.assetPacks=new M);var i=new xe;i.assetPack=c;null!=b&&i.SetConfigData(JSON.parse(c.getFile(b).toString()));d.assetPacks.set(a,i)});return c},AddConnection:function(a,
b){null!=b?this.signalConnectionMap.set(b,a):(this.signalConnectionMap.set(x.string(this.signalCount),a),this.signalCount++)},UnloadMappedAsset:function(a){this.assetPacks.get(a).dispose();this.assetPacks.remove(a)},__class__:f};var Kb=function(){this.firstLoad=!0;this.director=new bd;this.currentAssetPacks=[];this.scenes=new M};e["gamecontainer.general.utils.BaseSceneManager"]=Kb;Kb.__name__=["gamecontainer","general","utils","BaseSceneManager"];Kb.prototype={init:function(a,b){this.container=a;
this.container.addChild((new p).add(new y).add(this.director));for(var d=f.get_instance().assetPacks.get("main").configAssets.scenes,c=0,e=d.length;c<e;){var k=c++,g=new ye;g.classPath=d[k].classPath;g.primaryAssetPack=d[k].primaryAssetPack;for(var h=0,j=d[k].assetPacks.length;h<j;){var l=h++;g.assetPacks.push(d[k].assetPacks[l])}this.scenes.set(d[k].name,g)}null!=b&&this.ChangeScene(b)},ChangeScene:function(a,b){null==b&&(b=!1);var d=b;if(!b)for(var c=0,e=this.scenes.get(a).assetPacks.length;c<e;){for(var k=
c++,f=!1,g=0,h=this.currentAssetPacks.length;g<h;){var j=g++;this.scenes.get(a).assetPacks[k].name==this.currentAssetPacks[j]&&(f=!0)}if(!f){d=!0;break}}d?this.LoadAssets(a):((null==r.instance?r.instance=new r:r.instance).destroySoundChannels(),n.get_instance().dumpConnections(),this.LoadScene(a))},LoadAssets:function(a){var b=this;(null==r.instance?r.instance=new r:r.instance).destroySoundChannels();n.get_instance().dumpConnections();for(var d=0,c=this.currentAssetPacks.length;d<c;){var e=d++;f.get_instance().UnloadMappedAsset(this.currentAssetPacks[e])}this.currentAssetPacks=
[];d=[];c=0;for(e=this.scenes.get(a).assetPacks.length;c<e;){var k=c++;d.push(f.get_instance().LoadMappedAsset(this.scenes.get(a).assetPacks[k].name,this.scenes.get(a).assetPacks[k].config));this.currentAssetPacks.push(this.scenes.get(a).assetPacks[k].name)}f.get_instance().AddConnection(this.ShowLoadScene(d).onComplete.connect(function(){b.LoadScene(a)}).once())},ShowLoadScene:function(a){var b=this.scenes.get("LOADING_SCENE");this.currentSceneName="LOADING_SCENE";var d=b.assetPacks[b.primaryAssetPack].name;
Zb.that(null!=O.resolveClass(b.classPath),"RESOLVE CLASS IS RETURNING NULL, IS THE SCENE YOU ARE LOADING IMPORTED IN THE SCENE MANAGER?\n                    (@:keep is also needed in front of contructor of class you are loading)",null);a=O.createInstance(O.resolveClass(b.classPath),[d,a]);this.UnwindToScene((new p).add(a));this.firstLoad=!1;return a},LoadScene:function(a){var b=this.scenes.get(a);this.currentSceneName=a;var d=b.assetPacks[b.primaryAssetPack].name;Zb.that(null!=O.resolveClass(b.classPath),
"RESOLVE CLASS IS RETURNING NULL, IS THE SCENE YOU ARE LOADING IMPORTED IN THE SCENE MANAGER?\n                    (@:keep is also needed in front of contructor of class you are loading)",null);b=O.createInstance(O.resolveClass(b.classPath),[d]);b.sceneName=a;this.UnwindToScene((new p).add(b))},UnwindToScene:function(a,b){this.director.unwindToScene(a,b)},__class__:Kb};var id=function(a,b){null==a&&(a=0);this._time=0;v.call(this);this._delay=0>a?0:a;this._onBeforeDispose=b};e["gamecontainer.general.utils.DelayComponent"]=
id;id.__name__=["gamecontainer","general","utils","DelayComponent"];id.__super__=v;id.prototype=o(v.prototype,{get_name:function(){return"DelayComponent_20"},onUpdate:function(a){this._time+=a;this._time>=this._delay&&(null!=this._onBeforeDispose&&this._onBeforeDispose(),null!=this.owner&&this.owner.dispose())},__class__:id});var nc=function(){};e["gamecontainer.general.utils.Random"]=nc;nc.__name__=["gamecontainer","general","utils","Random"];nc["int"]=function(a,b){return a+Math.floor((b-a+1)*Math.random())};
nc["float"]=function(a,b){return a+(b-a)*Math.random()};var Ve=function(){};e["gamecontainer.general.utils.SafeUtils"]=Ve;Ve.__name__=["gamecontainer","general","utils","SafeUtils"];Ve.get=function(a){for(var b=null,d,b=a.shift();0<a.length;){d=a.shift();if(null==b||!R.hasField(b,d))return null;b=R.field(b,d)}return b};var Ua=e["gamecontainer.general.utils.ResizeBy"]={__ename__:["gamecontainer","general","utils","ResizeBy"],__constructs__:["WIDTH","HEIGHT"]};Ua.WIDTH=["WIDTH",0];Ua.WIDTH.toString=
g;Ua.WIDTH.__enum__=Ua;Ua.HEIGHT=["HEIGHT",1];Ua.HEIGHT.toString=g;Ua.HEIGHT.__enum__=Ua;Ua.__empty_constructs__=[Ua.WIDTH,Ua.HEIGHT];var u=function(){};e["gamecontainer.general.utils.ScreenManager"]=u;u.__name__=["gamecontainer","general","utils","ScreenManager"];u.get_instance=function(){null==u.instance&&(u.instance=new u);return u.instance};u.get_targetWidth=function(){return Q.__cast(u.get_instance().target.x,fb)};u.get_targetHeight=function(){return Q.__cast(u.get_instance().target.y,fb)};u.prototype=
{init:function(a,b,d,c){q._platform.getStage().resize.connect(m(this,this.resize));this.canvas=a;this.type=null==b?Ua.WIDTH:b;this.target=null==d?new Y(q._platform.getStage().get_width(),q._platform.getStage().get_height()):d;this.offset=null==c?new Y:c;this.bounds=new bb(0,0,this.target.x,this.target.y);this.resize()},toScreenSpace:function(a,b){return new Y((a-this.offset.x)/this.scale,(b-this.offset.y)/this.scale)},resize:function(){switch(this.type[1]){case 0:this.scale=pa.min(q._platform.getStage().get_width()/
this.target.x,q._platform.getStage().get_height()/this.target.y);break;case 1:this.scale=q._platform.getStage().get_height()/this.target.y}this.offset.x=(q._platform.getStage().get_width()-this.target.x*this.scale)/2;this.offset.y=(q._platform.getStage().get_height()-this.target.y*this.scale)/2;this.canvas._compMap.Sprite_13.setScale(this.scale).setXY(this.offset.x,this.offset.y);this.view=new bb(Math.abs(this.offset.x),Math.abs(this.offset.y),this.target.x-2*Math.abs(this.offset.x),this.target.y-
2*Math.abs(this.offset.y));this.canvas._compMap.Sprite_13.scissor=this.bounds;u.onResize.emit()},__class__:u};var af=function(){};e["gamecontainer.general.utils._SignalConnectionManager.SignalConnectionManagerLock"]=af;af.__name__=["gamecontainer","general","utils","_SignalConnectionManager","SignalConnectionManagerLock"];var n=function(){this._map=new Ya};e["gamecontainer.general.utils.SignalConnectionManager"]=n;n.__name__=["gamecontainer","general","utils","SignalConnectionManager"];n.__interfaces__=
[Qa];n.connect=function(a,b){n.get_instance().addConnection(a,b)};n.disconnect=function(a,b){n.get_instance().removeConnection(a,b)};n.get_instance=function(){null==n.instance&&(n.instance=new n(af));return n.instance};n.prototype={addConnection:function(a,b,d){null==d&&(d=!1);this.removeConnection(a,b);this._map.exists(a)||this._map.set(a,new Ya);if(d)a.connect(b).once();else this._map.get(a).set(b,a.connect(b));return a},removeConnection:function(a,b){this._map.exists(a)&&this._map.get(a).exists(b)&&
(this._map.get(a).get(b).dispose(),this._map.get(a).remove(b),this._map.get(a).keys().hasNext()||this._map.remove(a))},dumpConnections:function(){for(var a=this._map.keys();a.hasNext();)for(var b=a.next(),d=this._map.get(b).keys();d.hasNext();)this._map.get(b).get(d.next()).dispose();this._map=new Ya},dispose:function(){this.dumpConnections();this._map=null},__class__:n};var w=function(){};e["gamecontainer.general.utils.Util"]=w;w.__name__=["gamecontainer","general","utils","Util"];w.PlaySound=function(a,
b,d,c){null==d&&(d=!0);switch(a.playbackType){case "Random":for(var e=0,f=a.soundname.length;e<f;){var g=e++;K.endsWith(a.soundname[g],"_")&&(a.soundname[g]+=w.PlatformString())}break;case "All":e=0;for(f=a.soundname.length;e<f;)g=e++,K.endsWith(a.soundname[g],"_")&&(a.soundname[g]+=w.PlatformString());break;case "Normal":K.endsWith(a.soundname,"_")&&(a.soundname+=w.PlatformString());break;case "Sequence":e=0;for(f=a.soundname.length;e<f;)g=e++,K.endsWith(a.soundname[g],"_")&&(a.soundname[g]+=w.PlatformString());
break;default:K.endsWith(a.soundname,"_")&&(a.soundname+=w.PlatformString())}(null==r.instance?r.instance=new r:r.instance).playSoundByConfig(a,b,d,c)};w.PlatformString=function(){return w.isMobile()?"MBL":"DT"};w.CreateMoviePlayer=function(a,b,d,c,e,f){null==f&&(f=!1);null==e&&(e=!0);var g=new ib,h=new re(a,b),a=new p,b=new y;a.add(b);var j=new p;a.addChild(j);h=new hd(h);c?h.loop(d):e&&h.playOnce(d,!0,!1,f);j.add(h);g.entity=a;g.sprite=b;g.moviePlayer=h;return g};w.Delay=function(a,b){var d=new id(a,
b);return(new p).add(d)};w.isMobile=function(){return q._platform.getTouch().get_supported()?!0:!1};var xe=function(){};e["gamecontainer.general.vo.AssetPackVO"]=xe;xe.__name__=["gamecontainer","general","vo","AssetPackVO"];xe.prototype={SetConfigData:function(a){this.data=a;this.configAssets=this.data.assets;this.configVariables=this.data.variables;this.configSounds=this.data.sounds},dispose:function(){this.assetPack.dispose();this.configSounds=this.configVariables=this.configAssets=this.data=this.assetPack=
null},__class__:xe};var ib=function(){this.customProperties={}};e["gamecontainer.general.vo.MoviePlayerVO"]=ib;ib.__name__=["gamecontainer","general","vo","MoviePlayerVO"];ib.prototype={__class__:ib};var ye=function(){this.primaryAssetPack=0;this.assetPacks=[]};e["gamecontainer.general.vo.SceneVO"]=ye;ye.__name__=["gamecontainer","general","vo","SceneVO"];ye.prototype={__class__:ye};var Za=function(){v.call(this);this.tapThreshold=0.75;this.deltaPosition=new Y;this.signalConnectionMap=new M};e["gamecontainer.input.IInput"]=
Za;Za.__name__=["gamecontainer","input","IInput"];Za.__super__=v;Za.prototype=o(v.prototype,{get_name:function(){return"IInput_3"},onStart:function(){v.prototype.onStart.call(this);this.isTouchSupported=q._platform.getTouch().get_supported()},getOnDown:function(){return!1},getOnUp:function(){return!1},getOnPressed:function(){return!1},onRemoved:function(){this.ResetSignalConnections()},ResetSignalConnections:function(){for(var a,b=this.signalConnectionMap.keys();b.hasNext();){var d=b.next();a=this.signalConnectionMap.get(d);
a.dispose();this.signalConnectionMap.remove(d)}},__class__:Za});var Lb=function(){Za.call(this);this.keysPressed=[];this.keysRequested=new M;this.keysUpRequested=[];this.keysUpRequestedFrame=[];this.getKeysPressed=new M;this.onKeyPressed=new C;this.getKeysUpPressed=new M;this.checkKeyDown=[];for(var a=this.pastFrame=this.currentFrame=0,b=O.allEnums(c);a<b.length;){var d=b[a];++a;this.getKeysPressed.set(x.string(d),!1);this.getKeysUpPressed.set(x.string(d),!1)}};e["gamecontainer.input.InputKeyboard"]=
Lb;Lb.__name__=["gamecontainer","input","InputKeyboard"];Lb.__super__=Za;Lb.prototype=o(Za.prototype,{getOnDown:function(a){q._platform.getKeyboard().isDown(a)?(this.getKeysPressed.set(x.string(a),!1),this.keysRequested.exists(x.string(a))||this.keysRequested.set(x.string(a),this.currentFrame),this.keysRequested.get(x.string(a))==this.currentFrame&&(this.getKeysPressed.set(x.string(a),!0),this.getKeysUpPressed.set(x.string(a),!0))):(this.keysRequested.exists(x.string(a))&&this.keysRequested.remove(x.string(a)),
this.getKeysPressed.set(x.string(a),!1));return this.getKeysPressed.get(x.string(a))},getOnUp:function(a){return!q._platform.getKeyboard().isDown(a)&&this.getKeysUpPressed.exists(x.string(a))&&this.getKeysUpPressed.get(x.string(a))?(this.getKeysUpPressed.set(x.string(a),!1),!0):!1},getOnPressed:function(a){return q._platform.getKeyboard().isDown(a)},onUpdate:function(){!1==this.keysRequested.keys().hasNext()&&0==this.keysUpRequested.length?this.currentFrame=0:this.currentFrame++;if(0<this.keysPressed.length)for(var a=
0,b=this.keysPressed.length;a<b;){var d=a++;q._platform.getKeyboard().isDown(this.keysPressed[d])&&this.onKeyPressed.emit(this.keysPressed[d])}},__class__:Lb});var ob=function(){this.swipeDelay=!1;this.isDown=!0;Za.call(this);this.onMousePressed=new C;this.mousePosition=new Y;this.isUp=!0;this.currentFrame=this.pastDelta=this.deltaTime=this.tapDelta=this.tapCount=0;this.pastFrame=-1;this.pastDeltaPos=new Y;this.swipeStart=new Y;this.screenCenter=new Y};e["gamecontainer.input.InputMouse"]=ob;ob.__name__=
["gamecontainer","input","InputMouse"];ob.__super__=Za;ob.prototype=o(Za.prototype,{onStart:function(){Za.prototype.onStart.call(this);this.screenCenter.set(q._platform.getStage().get_width()/2,q._platform.getStage().get_height()/2);q._platform.getTouch().get_supported()&&(this.touches=q._platform.getTouch().get_points(),this.touch=q._platform.getTouch())},getOnDown:function(){var a=!1;q._platform.getPointer().isDown()?(this.isDown||(a=!0,this.pastFrame=this.currentFrame),this.currentFrame==this.pastFrame&&
(a=!0),this.isDown=!0):this.isDown=a=!1;return a},getOnUp:function(){var a=!1;q._platform.getPointer().isDown()?this.isUp=!1:(this.isUp||(a=!0,this.pastFrame=this.currentFrame),this.currentFrame==this.pastFrame&&(a=!0),this.isUp=!0);return a},getOnPressed:function(){return q._platform.getPointer().isDown()},getGesture:function(a,b){null==b&&(b=25);if(q._platform.getPointer().isDown()&&!this.swipeDelay){0==this.swipeStart.x&&this.swipeStart.set(q._platform.getPointer().get_x(),q._platform.getPointer().get_y());
var d=100*this.deltaPosition.y*this.deltaTime;if(1<=Math.abs(100*this.deltaPosition.x*this.deltaTime)||1<=Math.abs(d)){1<a.x&&(a.x=1);-1>a.x&&(a.x=-1);1<a.y&&(a.y=1);-1>a.y&&(a.y=-1);var d=new Y(this.screenCenter.x+this.screenCenter.x*a.x-this.screenCenter.x,this.screenCenter.y+this.screenCenter.y*a.y-this.screenCenter.y),c=new Y(q._platform.getPointer().get_x()-this.swipeStart.x,q._platform.getPointer().get_y()-this.swipeStart.y);0==d.x&&(d.x=50/c.x);0==d.y&&(d.y=50/c.y);if(50*(c.x/d.x)>=b*Math.abs(a.x)&&
50*(c.y/d.y)>=b*Math.abs(a.y))return this.swipeStart.set(0,0),!0}}else this.swipeStart.set(0,0);return!1},onUpdate:function(a){this.deltaTime=a;q._platform.getTouch().get_supported()&&(this.touches=q._platform.getTouch().get_points());q._platform.getPointer().isDown()?this.currentFrame++:this.currentFrame=0;this.deltaPosition.set(q._platform.getPointer().get_x()-this.pastDeltaPos.x,q._platform.getPointer().get_y()-this.pastDeltaPos.y);this.pastDeltaPos.set(q._platform.getPointer().get_x(),q._platform.getPointer().get_y());
q._platform.getPointer().isDown()&&(this.mousePosition.set(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()),this.onMousePressed.emit(this.mousePosition))},__class__:ob});var ha=function(){this.fonts=new M;this.strings=new M};e["gamecontainer.localization.Localization"]=ha;ha.__name__=["gamecontainer","localization","Localization"];ha.prototype={parseXML:function(a,b){this.localizationXML=z.parse(a.getFile(b).toString());this.fast=new jd(this.localizationXML.firstElement());null},
getValue:function(a){if(this.strings.exists(a))return this.strings.get(a);for(var b=this.fast.nodes.resolve("string").iterator();b.hasNext();){var d=b.next();if(a==d.att.resolve("id"))return b=new ze,b.rawValue=d.get_innerData(),b.value=this.parseString(d.get_innerData()),b.fontScale=x.parseFloat(d.att.resolve("fontScale")),b.fontName=d.att.resolve("fontName"),b.offsetX=x.parseInt(d.att.resolve("offsetX")),b.offsetY=x.parseInt(d.att.resolve("offsetY")),b.letterSpacing=x.parseInt(d.att.resolve("letterSpacing")),
b.lineSpacing=x.parseInt(d.att.resolve("lineSpacing")),this.strings.set(a,b),b}return null},getFont:function(a,b,d){null==d&&(d=!1);a=this.getValue(a);if(this.fonts.exists(a.fontName))return this.fonts.get(a.fontName);return null!=b?(b=new vb(b,a.fontName),this.fonts.set(a.fontName,b),d&&b.disposeFiles(),b):null},processTextSprite:function(a,b,d,c,e){null==e&&(e=1);a=this.getValue(a);b.set_text(a.value);b.x.set__(d+a.offsetX);b.y.set__(c+a.offsetY);b.letterSpacing.set__(a.letterSpacing);b.lineSpacing.set__(a.lineSpacing);
b.setScaleXY(e*a.fontScale,e*a.fontScale)},createAndProcessTextSprite:function(a,b,d,c,e,f){null==f&&(f=!1);null==e&&(e=1);null==c&&(c=0);null==d&&(d=0);b=new $b(this.getFont(a,b,f),(null==ha.instance?ha.instance=new ha:ha.instance).getValue(a).value);this.processTextSprite(a,b,d,c,e);return b},parseString:function(a){return a=K.replace(a,"<BR>","\n")},__class__:ha};var ze=function(){};e["gamecontainer.localization.StringVO"]=ze;ze.__name__=["gamecontainer","localization","StringVO"];ze.prototype=
{__class__:ze};var Oa=function(a,b,d){this._idleKey=this._upKey=this._downKey=this._overKey=this._outKey=this._inactiveKey=this._inactiveDownKey=this._highlightKey=this._upSound=this._downSound=this._overSound=this._outSound=this._inactiveSound=null;v.call(this);this._view=a;this._config=b;this._assetPack=d;this.properties=this._config.properties;this._isOver=!1;this.set_enabled(!0);this.up=new C;this.down=new C;this.over=new L;this.out=new L;this.upButton=new C;this.downButton=new C};e["gamecontainer.ui.UIBaseButton"]=
Oa;Oa.__name__=["gamecontainer","ui","UIBaseButton"];Oa.__super__=v;Oa.prototype=o(v.prototype,{get_name:function(){return"UIBaseButton_5"},dispose:function(){this.out=this.over=this.down=this.up=null;v.prototype.dispose.call(this)},goIdle:function(){},goInactive:function(){},onUp:function(a){this.enabled?(this.playSound(this._upSound),this.up.emit(a),this.upButton.emit(this)):this.playSound(this._inactiveSound)},onDown:function(a){this.enabled?(this.playSound(this._downSound),this.down.emit(a),this.downButton.emit(this)):
this.playSound(this._inactiveSound)},onOver:function(){this._isOver=!0;this.enabled&&(this.playSound(this._overSound),this.over.emit())},onOut:function(){this._isOver=!1;this.enabled&&(this.playSound(this._outSound),this.out.emit())},playSound:function(a){null!=a&&!(null==this._assetPack&&null==a.assetPack)&&w.PlaySound(a,null!=this._assetPack?this._assetPack:f.get_instance().assetPacks.get(a.assetPack).assetPack,!0)},onAdded:function(){null!=this._config&&(this._idleKey=this._config.clips.idle,this._upKey=
this._config.clips.onUp,this._downKey=this._config.clips.onDown,this._overKey=this._config.clips.onOver,this._outKey=this._config.clips.onOut,this._inactiveKey=this._config.clips.onInactive,this._inactiveDownKey=this._config.clips.onInactiveDown,this._highlightKey=this._config.clips.highlight,null!=this._config.sounds&&(this._upSound=this._config.sounds.onUp,this._downSound=this._config.sounds.onDown,this._overSound=this._config.sounds.onOver,this._outSound=this._config.sounds.onOut,this._inactiveSound=
this._config.sounds.onInactive))},set_enabled:function(a){(this.enabled=a)?this.goIdle():this.goInactive();return a},__class__:Oa});var Mb=function(a,b,d){Oa.call(this,a,b,d)};e["gamecontainer.ui.UIMovieButton"]=Mb;Mb.__name__=["gamecontainer","ui","UIMovieButton"];Mb.__super__=Oa;Mb.prototype=o(Oa.prototype,{goIdle:function(){this._isOver?null!=this._overKey?this.get_view().moviePlayer.playOnce(this._overKey):null!=this._idleKey&&this.get_view().moviePlayer.loop(this._idleKey):null!=this._idleKey&&
this.get_view().moviePlayer.loop(this._idleKey)},goInactive:function(){!this.enabled&&null!=this._inactiveKey&&this.get_view().moviePlayer.loop(this._inactiveKey)},onAdded:function(){Oa.prototype.onAdded.call(this);null!=this._config&&this.get_view().sprite.setXY(this._config.transform.position.x,this._config.transform.position.y);this.owner.addChild(this.get_view().entity);this.hitArea=new ub(0,y.getBounds(this.get_view().entity).width,y.getBounds(this.get_view().entity).height);this.get_hitArea().centerAnchor();
this.get_hitArea().alpha.set__(0);this.get_view().entity.addChild((new p).add(this.get_hitArea()));n.get_instance().addConnection(this.get_hitArea().get_pointerDown(),m(this,this.onDown));n.get_instance().addConnection(this.get_hitArea().get_pointerIn(),m(this,this.onOver));n.get_instance().addConnection(this.get_hitArea().get_pointerOut(),m(this,this.onOut))},onUp:function(a){this.enabled&&(null!=this._upKey?(this.get_view().moviePlayer.playOnce(this._upKey),n.get_instance().addConnection(this.get_view().moviePlayer.completeSignal,
m(this,this.goIdle),!0)):this.goIdle());Oa.prototype.onUp.call(this,a)},onDown:function(a){this.enabled?(this.get_view().sprite.get_pointerUp().hasListeners()||n.get_instance().addConnection(this.get_hitArea().get_pointerUp(),m(this,this.onUp),!0),null!=this._downKey&&this.get_view().moviePlayer.playOnce(this._downKey)):null!=this._inactiveDownKey&&this.get_view().moviePlayer.playOnce(this._inactiveDownKey,!0,!0);Oa.prototype.onDown.call(this,a)},onOver:function(a){this.enabled&&null!=this._overKey&&
this.get_view().moviePlayer.loop(this._overKey);Oa.prototype.onOver.call(this,a)},onOut:function(a){this.enabled&&(null!=this._outKey?(this.get_view().moviePlayer.playOnce(this._outKey),n.get_instance().addConnection(this.get_view().moviePlayer.completeSignal,m(this,this.goIdle),!0)):(this._isOver=!1,this.goIdle()));Oa.prototype.onOut.call(this,a)},Highlight:function(){this.enabled&&null!=this._highlightKey&&this.get_view().moviePlayer.playOnce(this._highlightKey,!0,!0)},get_view:function(){return Q.__cast(this._view,
ib)},get_hitArea:function(){return this.hitArea},__class__:Mb});var kd=function(a,b,d,c){null==c&&(c=1);this.currentProgress=0;this.progressTotal=100;v.call(this);this.position=new ub(13369344,0,0);this.backgroundBar=a;this.foregroundBar=b;this.progressText=d;this.steps=c};e["gamecontainer.ui.UIProgressBar"]=kd;kd.__name__=["gamecontainer","ui","UIProgressBar"];kd.__super__=v;kd.prototype=o(v.prototype,{get_name:function(){return"UIProgressBar_10"},onStart:function(){this.owner.add(this.position);
this.owner.addChild((new p).add(this.backgroundBar));this.owner.addChild((new p).add(this.foregroundBar));null!=this.progressText&&(this.owner.addChild((new p).add(this.progressText)),this.progressText.set_align(ba.Center),this.progressText.setXY(this.backgroundBar.getNaturalWidth()/2,0));this.UpdateBar()},AddProgress:function(a){this.SetProgress(a*this.steps)},SetProgress:function(a){this.currentProgress=a;this.UpdateBar()},UpdateBar:function(){this.currentProgress>this.progressTotal&&(this.currentProgress=
this.progressTotal);this.mask=new bb(0,0,this.GetAdjustWidth(),this.foregroundBar.getNaturalHeight());this.foregroundBar.scissor=this.mask;null!=this.progressText&&this.progressText.set_text(""+this.currentProgress)},GetAdjustWidth:function(){return this.foregroundBar.getNaturalWidth()*(this.currentProgress/this.progressTotal)},__class__:kd});var ua=e["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};ua.CFunction=["CFunction",
0];ua.CFunction.toString=g;ua.CFunction.__enum__=ua;ua.Module=function(a){a=["Module",1,a];a.__enum__=ua;a.toString=g;return a};ua.FilePos=function(a,b,d){a=["FilePos",2,a,b,d];a.__enum__=ua;a.toString=g;return a};ua.Method=function(a,b){var d=["Method",3,a,b];d.__enum__=ua;d.toString=g;return d};ua.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=ua;a.toString=g;return a};ua.__empty_constructs__=[ua.CFunction];var Pa=function(){};e["haxe.CallStack"]=Pa;Pa.__name__=["haxe","CallStack"];
Pa.callStack=function(){var a=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var c=[],e=0;e<b.length;){var f=b[e];++e;var g=null,h=f.getFunctionName();if(null!=h){var j=h.lastIndexOf(".");0<=j&&(g=A.substr(h,0,j),h=A.substr(h,j+1,null),g=ua.Method(g,h))}c.push(ua.FilePos(g,f.getFileName(),f.getLineNumber()))}return c};var b=Pa.makeStack(Error().stack);b.shift();Error.prepareStackTrace=a;return b};Pa.exceptionStack=function(){return[]};Pa.toString=function(a){for(var b=new rb,d=
0;d<a.length;){var c=a[d];++d;b.b+="\nCalled from ";Pa.itemToString(b,c)}return b.b};Pa.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var d=b[2];a.b+="module ";a.b=null==d?a.b+"null":a.b+(""+d);break;case 2:var d=b[4],c=b[3],e=b[2];null!=e&&(Pa.itemToString(a,e),a.b+=" (");a.b=null==c?a.b+"null":a.b+(""+c);a.b+=" line ";a.b=null==d?a.b+"null":a.b+(""+d);null!=e&&(a.b+=")");break;case 3:d=b[3];c=b[2];a.b=null==c?a.b+"null":a.b+(""+c);a.b+=".";a.b=null==d?a.b+"null":
a.b+(""+d);break;case 4:d=b[2],a.b+="local function #",a.b=null==d?a.b+"null":a.b+(""+d)}};Pa.makeStack=function(a){if("string"==typeof a){for(var a=a.split("\n"),b=[],d=0;d<a.length;){var c=a[d];++d;b.push(ua.Module(c))}return b}return a};var db=function(){this.buf=new rb;this.cache=[];this.useCache=db.USE_CACHE;this.useEnumIndex=db.USE_ENUM_INDEX;this.shash=new M;this.scount=0};e["haxe.Serializer"]=db;db.__name__=["haxe","Serializer"];db.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=
this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,d=0,c=this.cache.length;d<c;){var e=d++,f=this.cache[e];if(typeof f==b&&f==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+
(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,d=R.fields(a);b<d.length;){var c=d[b];++b;this.serializeString(c);this.serialize(R.field(a,c))}this.buf.b+="g"},serialize:function(a){var b=O["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+
(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var d=a.length,c=0;c<d;){var e=c++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==
b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case zb:this.buf.b+="l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(A.dateStr(a));break;case M:this.buf.b+="b";for(b=a.keys();b.hasNext();)d=b.next(),this.serializeString(d),this.serialize(a.get(d));this.buf.b+="h";break;case Ea:this.buf.b+="q";for(b=a.keys();b.hasNext();)d=b.next(),this.buf.b+=":",this.buf.b=null==d?this.buf.b+"null":this.buf.b+(""+d),this.serialize(a.get(d));
this.buf.b+="h";break;case Ya:this.buf.b+="M";for(b=a.keys();b.hasNext();)d=b.next(),c=R.field(d,"__id__"),R.deleteField(d,"__id__"),this.serialize(d),d.__id__=c,this.serialize(a.h[d.__id__]);this.buf.b+="h";break;case Nb:c=0;e=a.length-2;b=new rb;for(d=db.BASE64;c<e;){var f=a.get(c++),g=a.get(c++),h=a.get(c++);b.add(d.charAt(f>>2));b.add(d.charAt((f<<4|g>>4)&63));b.add(d.charAt((g<<2|h>>6)&63));b.add(d.charAt(h&63))}c==e?(e=a.get(c++),a=a.get(c++),b.add(d.charAt(e>>2)),b.add(d.charAt((e<<4|a>>4)&
63)),b.add(d.charAt(a<<2&63))):c==e+1&&(a=a.get(c++),b.add(d.charAt(a>>2)),b.add(d.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(O.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(O.getClassName(b)),
this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(O.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=x.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=x.string(b-2);for(d=2;d<b;)c=d++,
this.serialize(a[c]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+x.string(a);}},__class__:db};var ta=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=ta.DEFAULT_RESOLVER;null==a&&(a=O,ta.DEFAULT_RESOLVER=a);this.setResolver(a)};e["haxe.Unserializer"]=ta;ta.__name__=["haxe","Unserializer"];ta.initCodes=function(){for(var a=[],b=0,d=ta.BASE64.length;b<d;){var c=b++;a[ta.BASE64.charCodeAt(c)]=c}return a};
ta.run=function(a){return(new ta(a)).unserialize()};ta.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,d=this.pos;;){var c=this.buf.charCodeAt(this.pos);if(c!=c)break;if(45==c){if(this.pos!=d)break;b=!0}else{if(48>c||57<c)break;a=10*a+(c-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";
if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var d=this.unserialize();a[b]=d}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var d=this.readDigits();if(0==d)return O.createEnum(a,b);for(var c=[];0<d--;)c.push(this.unserialize());return O.createEnum(a,b,c)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;
case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return x.parseFloat(A.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=A.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;
case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();
case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=O.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var d=this.readDigits(),c=O.getEnumConstructs(b)[d];
if(null==c)throw"Unknown enum index "+a+"@"+d;a=this.unserializeEnum(b,c);this.cache.push(a);return a;case 108:a=new zb;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new M;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new Ea;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);
if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new Ya;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=A.substr(this.buf,this.pos,19),a=A.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();c=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=ta.CODES;null==e&&(e=ta.initCodes(),ta.CODES=e);for(var f=this.pos,g=a&3,h=f+(a-g),b=
Nb.alloc(3*(a>>2)+(2<=g?g-1:0)),d=0;f<h;){var j=e[K.fastCodeAt(c,f++)],l=e[K.fastCodeAt(c,f++)];b.set(d++,j<<2|l>>4);j=e[K.fastCodeAt(c,f++)];b.set(d++,l<<4|j>>2);l=e[K.fastCodeAt(c,f++)];b.set(d++,j<<6|l)}2<=g&&(l=e[K.fastCodeAt(c,f++)],h=e[K.fastCodeAt(c,f++)],b.set(d++,l<<2|h>>4),3==g&&(c=e[K.fastCodeAt(c,f++)],b.set(d++,h<<4|c>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=O.createEmptyInstance(b);
this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:ta};var ld=function(){};e["haxe.ds.BalancedTree"]=ld;ld.__name__=["haxe","ds","BalancedTree"];ld.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return b.value;b=0>d?b.left:b.right}return null},exists:function(a){for(var b=
this.root;null!=b;){var d=this.compare(a,b.key);if(0==d)return!0;b=0>d?b.left:b.right}return!1},setLoop:function(a,b,d){if(null==d)return new va(null,a,b,null);var c=this.compare(a,d.key);if(0==c)return new va(d.left,a,b,d.right,null==d?0:d._height);if(0>c)return this.balance(this.setLoop(a,b,d.left),d.key,d.value,d.right);a=this.setLoop(a,b,d.right);return this.balance(d.left,d.key,d.value,a)},balance:function(a,b,d,c){var e;e=null==a?0:a._height;var f;f=null==c?0:c._height;return e>f+2?function(){var b=
a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new va(a.left,a.key,a.value,new va(a.right,b,d,c)):new va(new va(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new va(a.right.right,b,d,c)):f>e+2?function(){var a=c.right;return null==a?0:a._height}(this)>function(){var a=c.left;return null==a?0:a._height}(this)?new va(new va(a,b,d,c.left),c.key,c.value,c.right):new va(new va(a,b,d,c.left.left),c.left.key,c.left.value,new va(c.left.right,
c.key,c.value,c.right)):new va(a,b,d,c,(e>f?e:f)+1)},compare:function(a,b){return R.compare(a,b)},__class__:ld};var va=function(a,b,d,c,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=d;this.right=c;this._height=-1==e?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:e};e["haxe.ds.TreeNode"]=va;va.__name__=["haxe","ds",
"TreeNode"];va.prototype={__class__:va};var Ob=function(){};e["haxe.ds.EnumValueMap"]=Ob;Ob.__name__=["haxe","ds","EnumValueMap"];Ob.__interfaces__=[Bc];Ob.__super__=ld;Ob.prototype=o(ld.prototype,{compare:function(a,b){var d=a[1]-b[1];if(0!=d)return d;var d=a.slice(2),c=b.slice(2);return 0==d.length&&0==c.length?0:this.compareArgs(d,c)},compareArgs:function(a,b){var d=a.length-b.length;if(0!=d)return d;for(var d=0,c=a.length;d<c;){var e=d++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},
compareArg:function(a,b){return R.isEnumValue(a)&&R.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):R.compare(a,b)},__class__:Ob});var Ea=function(){this.h={}};e["haxe.ds.IntMap"]=Ea;Ea.__name__=["haxe","ds","IntMap"];Ea.__interfaces__=[Bc];Ea.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return A.iter(a)},__class__:Ea};var Ya=function(){this.h={};this.h.__keys__={}};e["haxe.ds.ObjectMap"]=Ya;Ya.__name__=["haxe","ds","ObjectMap"];Ya.__interfaces__=[Bc];Ya.prototype={set:function(a,b){var d=a.__id__||(a.__id__=++Ya.count);this.h[d]=b;this.h.__keys__[d]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;
if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return A.iter(a)},__class__:Ya};var M=function(){this.h={}};e["haxe.ds.StringMap"]=M;M.__name__=["haxe","ds","StringMap"];M.__interfaces__=[Bc];M.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a=
"$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return A.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:M};var Nb=function(a,b){this.length=a;this.b=b};e["haxe.io.Bytes"]=Nb;Nb.__name__=["haxe","io","Bytes"];Nb.alloc=function(a){for(var b=[],d=0;d<a;)d++,b.push(0);
return new Nb(a,b)};Nb.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},__class__:Nb};var We=function(){};e["haxe.io.Eof"]=We;We.__name__=["haxe","io","Eof"];We.prototype={toString:function(){return"Eof"},__class__:We};var Se=function(){};e["haxe.rtti.Meta"]=Se;Se.__name__=["haxe","rtti","Meta"];Se.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var Ae=function(a){this.__x=a};e["haxe.xml._Fast.NodeAccess"]=Ae;Ae.__name__=["haxe","xml","_Fast",
"NodeAccess"];Ae.prototype={__class__:Ae};var Be=function(a){this.__x=a};e["haxe.xml._Fast.AttribAccess"]=Be;Be.__name__=["haxe","xml","_Fast","AttribAccess"];Be.prototype={resolve:function(a){if(this.__x.nodeType==z.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:Be};var Ce=function(a){this.__x=a};e["haxe.xml._Fast.HasAttribAccess"]=Ce;Ce.__name__=["haxe","xml","_Fast","HasAttribAccess"];
Ce.prototype={__class__:Ce};var De=function(a){this.__x=a};e["haxe.xml._Fast.HasNodeAccess"]=De;De.__name__=["haxe","xml","_Fast","HasNodeAccess"];De.prototype={__class__:De};var Ee=function(a){this.__x=a};e["haxe.xml._Fast.NodeListAccess"]=Ee;Ee.__name__=["haxe","xml","_Fast","NodeListAccess"];Ee.prototype={resolve:function(a){for(var b=new zb,a=this.__x.elementsNamed(a);a.hasNext();){var d=a.next();b.add(new jd(d))}return b},__class__:Ee};var jd=function(a){if(a.nodeType!=z.Document&&a.nodeType!=
z.Element)throw"Invalid nodeType "+x.string(a.nodeType);this.x=a;this.node=new Ae(a);this.nodes=new Ee(a);this.att=new Be(a);this.has=new Ce(a);this.hasNode=new De(a)};e["haxe.xml.Fast"]=jd;jd.__name__=["haxe","xml","Fast"];jd.prototype={get_name:function(){return this.x.nodeType==z.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),d=a.next();if(null!=d){if(b.nodeType==z.PCData&&d.nodeType==
z.CData&&""==K.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==z.PCData&&""==K.trim(b.get_nodeValue())&&null==a.next()))return d.get_nodeValue();throw this.get_name()+" does not only have data";}if(b.nodeType!=z.PCData&&b.nodeType!=z.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:jd};var kb=function(){};e["haxe.xml.Parser"]=kb;kb.__name__=["haxe","xml","Parser"];kb.parse=function(a){var b=z.createDocument();kb.doParse(a,0,b);return b};kb.doParse=function(a,
b,d){null==b&&(b=0);for(var c=null,e=1,f=1,g=null,h=0,j=0,l=0,m=a.charCodeAt(b),n=new rb;m==m;){switch(e){case 0:switch(m){case 10:case 13:case 9:case 32:break;default:e=f;continue}break;case 1:switch(m){case 60:e=0;f=2;break;default:h=b;e=13;continue}break;case 13:60==m?(f=z.createPCData(n.b+A.substr(a,h,b-h)),n=new rb,d.addChild(f),j++,e=0,f=2):38==m&&(n.addSub(a,h,b-h),e=18,f=13,h=b+1);break;case 17:93==m&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=z.createCData(A.substr(a,h,b-h)),d.addChild(e),
j++,b+=2,e=1);break;case 2:switch(m){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=A.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=A.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}h=b+1;break;case 63:e=14;h=b;break;case 47:if(null==d)throw"Expected node name";h=b+1;e=0;f=10;break;default:e=3;h=b;continue}break;
case 3:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(b==h)throw"Expected node name";c=z.createElement(A.substr(a,h,b-h));d.addChild(c);e=0;f=4;continue}break;case 4:switch(m){case 47:e=11;j++;break;case 62:e=9;j++;break;default:e=5;h=b;continue}break;case 5:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(h==b)throw"Expected attribute name";g=A.substr(a,h,b-h);if(c.exists(g))throw"Duplicate attribute";e=0;f=6;continue}break;case 6:switch(m){case 61:e=
0;f=7;break;default:throw"Expected =";}break;case 7:switch(m){case 34:case 39:e=8;h=b;break;default:throw'Expected "';}break;case 8:m==a.charCodeAt(h)&&(f=A.substr(a,h+1,b-h-1),c.set(g,f),e=0,f=4);break;case 9:h=b=kb.doParse(a,b,c);e=1;break;case 11:switch(m){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(m){case 62:return 0==j&&d.addChild(z.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=m&&122>=m||65<=m&&90>=m||48<=m&&57>=m||58==m||46==m||95==m||45==m)){if(h==
b)throw"Expected node name";if(A.substr(a,h,b-h)!=d.get_nodeName())throw"Expected </"+d.get_nodeName()+">";e=0;f=12;continue}break;case 15:45==m&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(d.addChild(z.createComment(A.substr(a,h,b-h))),b+=2,e=1);break;case 16:91==m?l++:93==m?l--:62==m&&0==l&&(d.addChild(z.createDocType(A.substr(a,h,b-h))),e=1);break;case 14:63==m&&62==a.charCodeAt(b+1)&&(b++,e=A.substr(a,h+1,b-h-2),d.addChild(z.createProcessingInstruction(e)),e=1);break;case 18:59==m&&(h=A.substr(a,
h,b-h),35==h.charCodeAt(0)?(h=120==h.charCodeAt(1)?x.parseInt("0"+A.substr(h,1,h.length-1)):x.parseInt(A.substr(h,1,h.length-1)),n.add(String.fromCharCode(h))):kb.escapes.exists(h)?n.add(kb.escapes.get(h)):n.b+=x.string("&"+h+";"),h=b+1,e=f)}m=K.fastCodeAt(a,++b)}1==e&&(h=b,e=13);if(13==e)return(b!=h||0==j)&&d.addChild(z.createPCData(n.b+A.substr(a,h,b-h))),b;throw"Unexpected end";};var Q=function(){};e["js.Boot"]=Q;Q.__name__=["js","Boot"];Q.getClass=function(a){return a instanceof Array&&null==
a.__enum__?Array:a.__class__};Q.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",c=2,e=a.length;c<e;)var f=c++,d=2!=f?d+(","+Q.__string_rec(a[f],b)):d+Q.__string_rec(a[f],b);return d+")"}d=a.length;c="[";b+="\t";for(e=0;e<d;)f=e++,c+=(0<f?",":"")+Q.__string_rec(a[f],b);return c+"]"}try{c=
a.toString}catch(g){return"???"}if(null!=c&&c!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;d=null;c="{\n";b+="\t";e=null!=a.hasOwnProperty;for(d in a)if(!e||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=c.length&&(c+=", \n"),c+=b+d+" : "+Q.__string_rec(a[d],b));b=b.substring(1);return c+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};Q.__interfLoop=function(a,b){if(null==
a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)for(var c=0,e=d.length;c<e;){var f=c++,f=d[f];if(f==b||Q.__interfLoop(f,b))return!0}return Q.__interfLoop(a.__super__,b)};Q.__instanceof=function(a,b){if(null==b)return!1;switch(b){case fb:return(a|0)===a;case bf:return"number"==typeof a;case cf:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case ef:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof
b||Q.__interfLoop(Q.getClass(a),b)))return!0}else return!1;return b==ff&&null!=a.__name__||b==gf&&null!=a.__ename__?!0:a.__enum__==b}};Q.__cast=function(a,b){if(Q.__instanceof(a,b))return a;throw"Cannot cast "+x.string(a)+" to "+x.string(b);};var Qe=function(){};e["js.Browser"]=Qe;Qe.__name__=["js","Browser"];Qe.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};var Re=function(){};e["js.html._CanvasElement.CanvasUtil"]=Re;Re.__name__=["js","html",
"_CanvasElement","CanvasUtil"];Re.getContextWebGL=function(a,b){for(var d=0,c=["webgl","experimental-webgl"];d<c.length;){var e=c[d];++d;e=a.getContext(e,b);if(null!=e)return e}return null};var eb=function(){this.isDirty=!1;this.eventQueue=new zb;this.debugMode=!1;this.modules=[];this.gameObj={majorversion:1,minorversion:0.4,apiversion:1};N.init(this);wa.init(this);this.initializeBridge()};e["nicksdk.SDK"]=eb;eb.__name__=["nicksdk","SDK"];eb.eval=function(a,b){null==b&&(b=[]);for(var d=null,c=null,
e=0,f=a.split(".");e<f.length;){var g=f[e];++e;d=c;c=null==d?R.field(window,g):R.field(d,g)}return c.apply(d,b)};eb.prototype={onException:function(a){try{this.queueEvent("error",{msg:a,callstack:Pa.toString(Pa.callStack()),exceptionstack:Pa.toString(Pa.exceptionStack())})}catch(b){this.queueEvent("error",{msg:a})}},initializeBridge:function(){try{this.queueEvent("init",{js:N.executeWebRequest})}catch(a){null}},setDebugMode:function(a){(this.debugMode=a)?this.gameObj.debugmode=!0:R.deleteField(this.gameObj,
"debugmode");this.isDirty=!0;for(var b=0,d=this.modules;b<d.length;){var c=d[b];++b;c.setDebugMode(a)}},queueEvent:function(a,b){b.eventName=a;R.setField(b,"timestamp",(new Date).getTime());this.eventQueue.add(b);this.flush_events();this.sync_state()},onUpdate:function(a){var b=this.isDirty;this.isDirty=!1;for(var d=0,c=this.modules;d<c.length;){var e=c[d];++d;b=b||e.update(a)}0<this.eventQueue.length&&(b=!0,this.flush_events());b&&this.sync_state()},flush_events:function(){for(;0<this.eventQueue.length;)eb.output_event_array.push(this.eventQueue.pop())},
sync_state:function(){try{eb.eval("nsdk_expose",[this.gameObj,eb.output_event_array]),eb.output_event_array.length=0}catch(a){null}},log:function(a,b){this.debugMode&&this.queueEvent("log",{id:a,msg:b})},__class__:eb};var Xe=function(){};e["nicksdk.SDKModule"]=Xe;Xe.__name__=["nicksdk","SDKModule"];Xe.prototype={__class__:Xe};var wa=function(){};e["nicksdk.event.GameEventEmitter"]=wa;wa.__name__=["nicksdk","event","GameEventEmitter"];wa.init=function(a){wa.sdk=a};wa.sendGameEvent=function(a,b){wa.callExternal(a,
b)};wa.callExternal=function(a,b){if(null!=wa.sdk)wa.sdk.queueEvent(a,{params:b});else throw"SDK not initialized!";};var N=function(){};e["nicksdk.event.GameEventListener"]=N;N.__name__=["nicksdk","event","GameEventListener"];N.init=function(a){N.sdk=a};N.executeWebRequest=function(a){N.AssertType(a,B.TObject);if(null==a.name)return!1;switch(a.name){case "toggleaudio":N.AssertParameter(a,"enable",B.TBool);if(null!=N.onAudioToggle)return N.onAudioToggle(a.enable),!0;N.sdk.log("SDKGameEventListener",
"Audio Toggle is not implemented.");break;case "toggleplayback":N.AssertParameter(a,"enable",B.TBool);if(null!=N.onPlaybackToggle)return N.onPlaybackToggle(a.enable),!0;N.sdk.log("SDKGameEventListener","Playback Toggle is not implemented.");break;case "togglesuspend":N.AssertParameter(a,"enable",B.TBool);if(null!=N.onSuspendToggle)N.onSuspendToggle(a.enable);else N.sdk.log("SDKGameEventListener","Suspend Toggle is not implemented.");break;case "toggledebug":N.AssertParameter(a,"enable",B.TBool);if(null!=
N.onDebugModeToggle)N.onDebugModeToggle(a.enable);else N.sdk.log("SDKGameEventListener","Debug Mode Toggle is not implemented.");if(null!=N.sdk)return N.sdk.setDebugMode(a.enable),!0;break;default:N.sdk.log("SDKGameEventListener","Unknown function")}return!1};N.AssertType=function(a,b){var d=O["typeof"](a);if(d!=b)throw d="TypeCheck: Object {"+x.string(a)+"} was of type {"+x.string(d)+"}. Expected type {"+x.string(b)+"}",null!=N.sdk&&N.sdk.log("SDKGameEventListener",d),d;};N.AssertParameter=function(a,
b,d){if(Object.prototype.hasOwnProperty.call(a,b))a=R.field(a,b),N.AssertType(a,d);else throw d="ParameterCheck: Parameter {"+b+"} of type{"+x.string(d)+"} does not exist!",null!=N.sdk&&N.sdk.log("SDKGameEventListener",d),d;};var Ba=function(){};e["nicksdk.jsembed.JSEmbedProxy"]=Ba;Ba.__name__=["nicksdk","jsembed","JSEmbedProxy"];Ba.get_exists=function(){return Ba.callJSEmbedMethod("exists()")};Ba.get_base=function(){return Ba.callJSEmbedMethod("baseUrl()")};Ba.get_isCrossdomain=function(){return Ba.callJSEmbedMethod("isBaseCrossdomain()")};
Ba.callJSEmbedMethod=function(a){try{var b=Ba.eval("eval",["jsembed."+a]);if(null!=b)return b}catch(d){}return""};Ba.eval=function(a,b){null==b&&(b=[]);for(var d=window,c=d,e=0,f=a.split(".");e<f.length;){var g=f[e];++e;d=c;c=R.field(d,g)}return c.apply(d,b)};var xa=function(){};e["rustyrivets.Main"]=xa;xa.__name__=["rustyrivets","Main"];xa.main=function(){q.init();Aa.setupBaseURL();q.root.add(new gd);f.get_instance().LoadMappedAsset("main","config.json").get(xa.OnMainLoaded);wa.sendGameEvent("onLoadingStart")};
xa.OnMainLoaded=function(a){xa.container=new p;xa.container.add(new y);q.root.addChild(xa.container);(null==ha.instance?ha.instance=new ha:ha.instance).parseXML(a,"strings.xml");l.get_instance().init();u.get_instance().init(xa.container,Ua.WIDTH,new Y(960,560));da.get_instance().init(xa.container,"TITLE_SCENE");a=w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",f.get_instance().assetPacks.get("main").configAssets.border.display.primary,!0);xa.container.addChild(a.entity)};
var md=function(a){this._partsConnected=0;v.call(this);this._config=a};e["rustyrivets.building.components.PartPlacer"]=md;md.__name__=["rustyrivets","building","components","PartPlacer"];md.__super__=v;md.prototype=o(v.prototype,{get_name:function(){return"PartPlacer_6"},onAdded:function(){this.maingroundEntity=new p;this.backgroundEntity=new p;this.foregroundEntity=new p;this.owner.addChild(this.backgroundEntity);this.owner.addChild(this.maingroundEntity);this.owner.addChild(this.foregroundEntity);
var a=new oc(this._config.targetHighlight);this.maingroundEntity.addChild((new p).add(a));a.get_display().sprite.setXY(u.get_targetWidth()/2+this._config.target.transform.position.x,u.get_targetHeight()/2+this._config.target.transform.position.y);this._target=new nd(this._config.target,a);this.maingroundEntity.addChild((new p).add(this._target));a=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this._config.buildGrid.display.primary,!0);a.sprite.setXY(this._config.buildGrid.transform.position.x,
u.get_targetHeight()/2+this._config.buildGrid.transform.position.y);this.maingroundEntity.addChild(a.entity);this._parts=[];for(var a=0,b=this._config.parts.length;a<b;){var d=a++,c=new od(this._config.iconRing);this.maingroundEntity.addChild((new p).add(c));c.get_display().sprite.setXY(this._config.parts[d].transform.position.x,u.get_targetHeight()/2+this._config.parts[d].transform.position.y);var e=new oc(this._config.partHighlight);this.maingroundEntity.addChild((new p).add(e));e.get_display().sprite.setXY(this._config.parts[d].transform.position.x,
u.get_targetHeight()/2+this._config.parts[d].transform.position.y);d=new pc(this._config.parts[d],this._target,c,e);this._parts.push(d);this.foregroundEntity.addChild((new p).add(d))}a=new pd(this._config.zoneIndicator);this.maingroundEntity.addChild((new p).add(a));a.get_display().sprite.setXY(this._target.get_display().sprite.x._value,this._target.get_display().sprite.y._value);n.get_instance().addConnection(P.partPlaced,m(this,this.partPlaced))},partPlaced:function(){this._partsConnected++;4==
this._partsConnected?(t.PlaySound(this._config.sounds.subComplete,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),P.allPartsPlaced.emit()):t.PlaySound(this._config.sounds.correctPlace,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},__class__:md});var qd=function(a){this._surfboardPicked=!1;v.call(this);this._config=a};e["rustyrivets.building.components.SurfboardPicker"]=qd;qd.__name__=["rustyrivets","building","components","SurfboardPicker"];
qd.__super__=v;qd.prototype=o(v.prototype,{get_name:function(){return"SurfboardPicker_4"},onAdded:function(){v.prototype.onAdded.call(this);this.maingroundEntity=new p;this.backgroundEntity=new p;this.foregroundEntity=new p;this.owner.addChild(this.backgroundEntity);this.owner.addChild(this.maingroundEntity);this.owner.addChild(this.foregroundEntity);this._surfboards=[];for(var a=0,b=this._config.surfboards.length;a<b;){var d=a++,c=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,
"atlas",this._config.surfboardRing.display.idle,!0);c.sprite.setXY(u.get_targetWidth()/2+this._config.surfboards[d].transform.position.x,u.get_targetHeight()/2+this._config.surfboards[d].transform.position.y);this.maingroundEntity.addChild(c.entity);c=new Mb(w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this._config.surfboards[d].clips.idle,!0),this._config.surfboards[d],f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
this.foregroundEntity.addChild((new p).add(c));c.get_view().sprite.setXY(u.get_targetWidth()/2+this._config.surfboards[d].transform.position.x,u.get_targetHeight()/2+this._config.surfboards[d].transform.position.y);n.get_instance().addConnection(c.upButton,m(this,this.onUp));this._surfboards.push(c)}n.get_instance().addConnection(P.highlightParts,m(this,this.highlightParts))},highlightParts:function(){for(var a=0,b=this._surfboards.length;a<b;)this._surfboards[a++].Highlight()},onUp:function(a){this._surfboardPicked||
(this._surfboardPicked=!0,a.set_enabled(!1),P.surfboardPicked.emit(a.properties.index))},__class__:qd});var P=function(){};e["rustyrivets.building.events.BuildingEvents"]=P;P.__name__=["rustyrivets","building","events","BuildingEvents"];var oc=function(a){j.call(this,a)};e["rustyrivets.building.objects.parts.Highlight"]=oc;oc.__name__=["rustyrivets","building","objects","parts","Highlight"];oc.__super__=j;oc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,
"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor()},click:function(){this.get_display().moviePlayer.playOnce(this.config.display.click,!0,!0)},highlight:function(){this.get_display().moviePlayer.playOnce(this.config.display.highlight,!0,!0)},complete:function(){this.get_display().moviePlayer.playOnce(this.config.display.complete,!0,!0)},__class__:oc});var pc=function(a,b,d,c){this._held=!1;this.incorrectCount=0;j.call(this,
a);this._target=b;this._container=d;this._highlight=c};e["rustyrivets.building.objects.parts.Part"]=pc;pc.__name__=["rustyrivets","building","objects","parts","Part"];pc.__super__=j;pc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary+l.get_instance().subIndex,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.setXY(this.config.transform.position.x,
this.get_height()/2+this.config.transform.position.y);this.get_display().sprite.centerAnchor();this._collider=new gb(this.config.transform.collider.size.x,this.config.transform.collider.size.y);this._collider.sprite.setXY(this.config.transform.collider.offset.x,this.config.transform.collider.offset.y);this.get_display().sprite.owner.addChild((new p).add(this._collider));this._delayEntity=new p;n.get_instance().addConnection(this._collider.sprite.get_pointerIn(),m(this,this.OnHover));n.get_instance().addConnection(this._collider.collisionEnter,
m(this,this.OnCollisionEnter));n.get_instance().addConnection(this._collider.collisionExit,m(this,this.OnCollisionExit));n.get_instance().addConnection(P.highlightParts,m(this,this.Flash));n.get_instance().addConnection(P.unhighlightParts,m(this,this.Unhighlight));this._collider.sprite.alpha.set__(0);this._collider.sprite.set_visible(!0)},Grab:function(){if(null!=this._currentTarget)return!1;this.owner.parent.addChild(this.owner);this._held=!0;P.partGrabbed.emit(this.config.properties.type);var a=
{playbackType:"Normal"},b=this.config.properties.sound;b.lastIndexOf("_")==b.length-1&&(b+=l.get_instance().subIndex);a.soundname=b;t.PlaySound(a,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this._container.hide();this._highlight.click();return!0},Place:function(){this._held=!1;if(null!=this._currentTarget)return this._currentTarget.Place(this.config.properties.type),this.get_display().sprite.setXY(this._currentTarget.get_display().sprite.x._value,this._currentTarget.get_display().sprite.y._value),
this.get_display().sprite.alpha.set__(0),P.partPlaced.emit(),"success";this.get_display().sprite.setXY(this.config.transform.position.x,this.get_height()/2+this.config.transform.position.y);this.incorrectCount++;this.get_display().moviePlayer.loop(this.config.display.primary+l.get_instance().subIndex);P.partPlacedFailed.emit();this._container.show();return null==this._currentTarget?"miss":"taken"},Highlight:function(a){this._highlight.highlight();a&&this._target.Highlight()},Flash:function(){},Unhighlight:function(){},
OnHover:function(){},OnCollisionEnter:function(a){null!=a.customProperties.target&&(this._currentTarget=a.customProperties.target,null!=this._currentTarget&&this._currentTarget.HoverEnter())},OnCollisionExit:function(a){null!=a.customProperties.target&&null!=this._currentTarget&&this._currentTarget==a.customProperties.target&&(this._currentTarget.HoverExit(),this._currentTarget=null)},__class__:pc});var od=function(a){j.call(this,a)};e["rustyrivets.building.objects.parts.PartContainer"]=od;od.__name__=
["rustyrivets","building","objects","parts","PartContainer"];od.__super__=j;od.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor()},show:function(){this.get_display().sprite.alpha.set__(1)},hide:function(){this.get_display().sprite.alpha.set__(0)},
__class__:od});var nd=function(a,b){j.call(this,a);this._highlight=b};e["rustyrivets.building.objects.parts.Target"]=nd;nd.__name__=["rustyrivets","building","objects","parts","Target"];nd.__super__=j;nd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this._top=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.top+1,!0);this.owner.addChild(this._top.entity);this._top.sprite.setXY(this.get_width()/
2+this.config.transform.position.x,this.get_height()/2+this.config.transform.position.y);this._top.sprite.centerAnchor();this._top.sprite.alpha.set__(0);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary+0,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.setXY(this.get_width()/2+this.config.transform.position.x,this.get_height()/2+this.config.transform.position.y);this.get_display().sprite.centerAnchor();
this._collider=new gb(this.config.transform.collider.size.x,this.config.transform.collider.size.y,"default","default");this._collider.sprite.setXY(this.config.transform.collider.offset.x,this.config.transform.collider.offset.y);this._collider.customProperties.target=this;this.get_display().sprite.owner.addChild((new p).add(this._collider));this._side=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.side+1,!0);this.owner.addChild(this._side.entity);
this._side.sprite.setXY(this.get_width()/2+this.config.transform.position.x,this.get_height()/2+this.config.transform.position.y);this._side.sprite.centerAnchor();this._side.sprite.alpha.set__(0);this._decal=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.decal+1,!0);this.owner.addChild(this._decal.entity);this._decal.sprite.setXY(this.get_width()/2+this.config.transform.position.x,this.get_height()/2+this.config.transform.position.y);
this._decal.sprite.centerAnchor();this._decal.sprite.alpha.set__(0);n.get_instance().addConnection(P.unhighlightParts,m(this,this.Unhighlight));n.get_instance().addConnection(P.allPartsPlaced,m(this,this.onAllPartsPlaced))},Place:function(a){"top"==a?(this._top.moviePlayer.loop(this.config.display.top+l.get_instance().subIndex,!0),this._top.sprite.alpha.set__(1)):"side"==a?(this._side.moviePlayer.loop(this.config.display.side+l.get_instance().subIndex,!0),this._side.sprite.alpha.set__(1)):"decal"==
a?(this._decal.moviePlayer.loop(this.config.display.decal+l.get_instance().subIndex,!0),this._decal.sprite.alpha.set__(1)):"paint"==a&&this.get_display().moviePlayer.loop(this.config.display.primary+l.get_instance().subIndex,!0)},Highlight:function(){this._highlight.highlight()},HoverEnter:function(){},HoverExit:function(){},Unhighlight:function(){},onAllPartsPlaced:function(){this._highlight.complete()},__class__:nd});var pd=function(a){j.call(this,a)};e["rustyrivets.building.objects.parts.ZoneIndicator"]=
pd;pd.__name__=["rustyrivets","building","objects","parts","ZoneIndicator"];pd.__super__=j;pd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();n.connect(P.partGrabbed,m(this,this.onPartGrabbed));n.connect(P.partPlaced,m(this,this.onPartPlaced));
n.connect(P.partPlacedFailed,m(this,this.onPartPlacedFailed))},onPartGrabbed:function(a){"top"==a?this.get_display().moviePlayer.loop(this.config.display.top):"side"==a?this.get_display().moviePlayer.loop(this.config.display.side):"decal"==a?this.get_display().moviePlayer.loop(this.config.display.decal):"paint"==a&&this.get_display().moviePlayer.loop(this.config.display.paint)},onPartPlaced:function(){this.get_display().moviePlayer.loop(this.config.display.primary)},onPartPlacedFailed:function(){this.get_display().moviePlayer.loop(this.config.display.primary)},
__class__:pd});var rd=function(a){this._tutorialComplete=!1;this._timeout=0;j.call(this,a)};e["rustyrivets.building.objects.player.Player"]=rd;rd.__name__=["rustyrivets","building","objects","player","Player"];rd.__super__=j;rd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this._input=new ob;this.owner.add(this._input)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(null==this._selectedPart){if(this._input.getOnDown()){var b=u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),
q._platform.getPointer().get_y()),b=y.hitTest(this.owner.parent,b.x,b.y);null!=b&&(b=b.owner._internal_getFromParents("BaseGameObject_1",pc),null!=b&&this.GrabPiece(b))}}else w.isMobile()?this._input.getOnPressed()?this._selectedPart.get_display().sprite.setXY(u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).x,u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).y):this._input.getOnUp()&&this.PlacePiece():
(this._selectedPart.get_display().sprite.setXY(u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).x,u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).y),this._input.getOnDown()&&this.PlacePiece());this._tutorialComplete&&(this._timeout+=a,this._timeout>this.config.properties.timeout&&(t.PlaySound(this.config.sounds.timeout,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this._timeout=
0))},tutorial:function(a){this._tutorialComponent=new Pb;this._tutorialComponent.stages.push(new sd(this.config.properties.tutorial.stage01));this._tutorialComponent.stages.push(new td(this.config.properties.tutorial.stage02));this._tutorialComponent.stages.push(new ud(this.config.properties.tutorial.stage03));a.addChild((new p).add(this._tutorialComponent))},startGame:function(){this._tutorialComplete=!0},endGame:function(a){this._tutorialComplete||this._tutorialComponent.Stop();t.PlaySound(this.config.sounds.complete,
f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,null,a)},GrabPiece:function(a){a.Grab()&&(this._selectedPart=a,this._timeout=0)},PlacePiece:function(){var a=this._selectedPart.Place();"success"==a?t.PlaySound(this.config.sounds.correct,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack):"miss"==a&&1!=this._selectedPart.incorrectCount&&(2==this._selectedPart.incorrectCount?this._selectedPart.Highlight(!1):this._selectedPart.Highlight(!0));this._selectedPart=
null;this._timeout=0},__class__:rd});var D=function(){this.timeoutCount=0;this.timeout=10;this.completed=this.started=!1;v.call(this);this.config={};this.complete=new C};e["rustyrivets.shared.components.tutorial.TutorialStage"]=D;D.__name__=["rustyrivets","shared","components","tutorial","TutorialStage"];D.__super__=v;D.prototype=o(v.prototype,{get_name:function(){return"TutorialStage_2"},onUpdate:function(a){var b=this;v.prototype.onUpdate.call(this,a);!this.completed&&this.started&&null!=this.timeoutClip&&
(this.timeout+=a,10<this.timeout&&(this.Timeout(),this.timeout=0,t.PlaySound(this.timeoutClip,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){b.timeout=0;b.timeoutCount++})))},Start:function(){this.started=!0},End:function(){this.completed=!0},Timeout:function(){},isMobile:function(){return w.isMobile()?"MBL":"DT"},__class__:D});var sd=function(a){D.call(this);this.config=a};e["rustyrivets.building.tutorial.TutorialStage1"]=sd;sd.__name__=["rustyrivets",
"building","tutorial","TutorialStage1"];sd.__super__=D;sd.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);n.connect(P.surfboardPicked,m(this,this.surfboardPicked));t.PlaySound(this.config.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.timeoutClip=a.config.sounds.action})},surfboardPicked:function(){this.Complete()},Timeout:function(){D.prototype.Timeout.call(this);P.highlightParts.emit()},Complete:function(){var a=
this;n.disconnect(P.surfboardPicked,m(this,this.surfboardPicked));t.PlaySound(this.config.sounds.outro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(1)})},__class__:sd});var td=function(a){this.delay=1;D.call(this);this.config=a};e["rustyrivets.building.tutorial.TutorialStage2"]=td;td.__name__=["rustyrivets","building","tutorial","TutorialStage2"];td.__super__=D;td.prototype=o(D.prototype,{Start:function(){D.prototype.Start.call(this);this.display=
w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",x.string(this.config.display.start)+this.isMobile(),!1);this.display.sprite.setXY(u.get_targetWidth()/2,u.get_targetHeight()/2);this.owner.addChild(this.display.entity);this.display.sprite.centerAnchor();this.display.moviePlayer.completeSignal.connect(m(this,this.showAction)).once();this.timeoutClip=this.config.sounds.action;n.connect(P.partPlaced,m(this,this.partPlaced))},showAction:function(){this.display.moviePlayer.loop(x.string(this.config.display.action)+
this.isMobile());this.delay=0},partPlaced:function(){this.Complete()},Complete:function(){var a=this;n.disconnect(P.partPlaced,m(this,this.partPlaced));this.owner.addChild(w.Delay(this.delay,function(){a.display.moviePlayer.playOnce(x.string(a.config.display.end)+a.isMobile());a.complete.emit(2)}))},End:function(){D.prototype.End.call(this);n.disconnect(P.partPlaced,m(this,this.partPlaced))},__class__:td});var ud=function(a){D.call(this);this.config=a};e["rustyrivets.building.tutorial.TutorialStage3"]=
ud;ud.__name__=["rustyrivets","building","tutorial","TutorialStage3"];ud.__super__=D;ud.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);t.PlaySound(this.config.sounds.outro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(3)})},__class__:ud});var Va=function(a,b,d,c,e){this._spinOutAngle=6;this._spinOutInterval=0.33;this._tiltAngle=12;this._slowDownTime=0.66;this.isInputActive=!0;j.call(this,null);this._rootSprite=
a;this._speed=b;this._velocityY=new X(0);this._collider=d;this._laneController=c;this._altVisualSprite=this._rootSprite;null!=e&&(this._altVisualSprite=e)};e["rustyrivets.exploration.components.BaseMovementComponent"]=Va;Va.__name__=["rustyrivets","exploration","components","BaseMovementComponent"];Va.__super__=j;Va.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this._maxPosY=this.getMaxPosY();this._minPosY=this.getMinPosY()},onUpdate:function(a){j.prototype.onUpdate.call(this,
a);this._velocityY.update(a);this._rootSprite.y.set__(pa.clamp(this._rootSprite.y._value,this._minPosY,this._maxPosY))},get_velocityY:function(){return this._velocityY._value},updateMovement:function(a){this.isInputActive&&(this._velocityY.set__(this._speed.y*a.y),this.runTiltScript(a.y*this._tiltAngle))},stop:function(){this._velocityY.set__(0);this.runTiltScript(0)},slowStop:function(){this._velocityY.animateTo(0,this._slowDownTime);this.runTiltScript(0,0.45)},untilt:function(){this.runTiltScript(0)},
spinOut:function(){var a=this;this.isInputActive=!1;null!=this._spinOutScript&&this._spinOutScript.owner.dispose();this._spinOutScript=new Ga;this._spinOutScript.run(new Ha([new $(this._altVisualSprite.rotation,this._spinOutAngle,this._spinOutInterval),new $(this._altVisualSprite.rotation,-this._spinOutAngle,this._spinOutInterval),new $(this._altVisualSprite.rotation,this._spinOutAngle,this._spinOutInterval),new $(this._altVisualSprite.rotation,-this._spinOutAngle,this._spinOutInterval),new $(this._altVisualSprite.rotation,
0,this._spinOutInterval),new la(function(){a._spinOutScript.owner.dispose();a._spinOutScript=null;a.isInputActive=!0})]));this.owner.addChild((new p).add(this._spinOutScript))},fullSpin:function(){var a=this;this.isInputActive=!1;null!=this._spinOutScript&&this._spinOutScript.owner.dispose();this._spinOutScript=new Ga;this._spinOutScript.run(new Ha([new $(this._altVisualSprite.rotation,-360,3*this._spinOutInterval,ab.sineInOut),new $(this._altVisualSprite.rotation,0,0),new la(function(){a._spinOutScript.owner.dispose();
a._spinOutScript=null;a.isInputActive=!0})]));this.owner.addChild((new p).add(this._spinOutScript))},resumeTiltIfMoving:function(){this.get_velocityY()==this._speed.y?this.updateMovement(new I(0,1)):this.get_velocityY()==-this._speed.y&&this.updateMovement(new I(0,-1))},stopAllMovement:function(){this._velocityY.set__(0);null!=this._spinOutScript&&(this._spinOutScript.owner.dispose(),this._spinOutScript=null);null!=this._tiltScript&&(this._tiltScript.owner.dispose(),this._tiltScript.owner=null)},
runTiltScript:function(a,b){null==b&&(b=0.25);var d=this;null==this._spinOutScript&&(null!=this._tiltScript&&this._tiltScript.owner.dispose(),this._tiltScript=new Ga,this._tiltScript.run(new Ha([new $(this._altVisualSprite.rotation,a,b),new la(function(){d._tiltScript.owner.dispose();d._tiltScript=null})])),this.owner.addChild((new p).add(this._tiltScript)))},isPlayerInPlayArea:function(){return this._collider.get_top()<this._laneController.get_playAreaStart()||this._collider.get_bottom()>this._laneController.get_playAreaEnd()?
!1:!0},getMinPosY:function(){var a=this._laneController.get_playAreaStart();return a+=0.5*this._collider.get_height()},getMaxPosY:function(){var a=this._laneController.get_playAreaEnd();return a-=0.5*this._collider.get_height()},__class__:Va});var vd=function(a,b,d,c,e){Va.call(this,a,b,d,c,e)};e["rustyrivets.exploration.components.MovementComponentKeys"]=vd;vd.__name__=["rustyrivets","exploration","components","MovementComponentKeys"];vd.__super__=Va;vd.prototype=o(Va.prototype,{onUpdate:function(a){Va.prototype.onUpdate.call(this,
a);this._lastPosY=this._rootSprite.y._value;var b=this._rootSprite.y;b.set__(b._value+this._velocityY._value*a);this.isPlayerInPlayArea()||(this._rootSprite.y.set__(this._lastPosY),this.stop())},__class__:vd});var wd=function(a,b,d,c,e){this.direction=0;Va.call(this,a,b,d,c,e)};e["rustyrivets.exploration.components.MovementComponentTouch"]=wd;wd.__name__=["rustyrivets","exploration","components","MovementComponentTouch"];wd.__super__=Va;wd.prototype=o(Va.prototype,{onUpdate:function(a){Va.prototype.onUpdate.call(this,
a);this._lastPosY=this._rootSprite.y._value;if(q._platform.getPointer().isDown()){a=(q._platform.getPointer().get_y()-u.get_instance().offset.y)/u.get_instance().scale;if(5<a-this._rootSprite.y._value){this.direction=1;var b=this._rootSprite.y;b.set__(b._value+Math.min(a-this._rootSprite.y._value,this._speed.y)/30)}else-5>a-this._rootSprite.y._value&&(this.direction=-1,b=this._rootSprite.y,b.set__(b._value+Math.max(a-this._rootSprite.y._value,-this._speed.y)/30));20>Math.abs(a-this._rootSprite.y._value)&&
(this.direction=0);this.runTiltScript(this.direction*this._tiltAngle)}this.isPlayerInPlayArea()||(this._rootSprite.y.set__(this._lastPosY),this.stop())},updateMovement:function(){},__class__:wd});var H=function(){};e["rustyrivets.exploration.events.ExplorationEvents"]=H;H.__name__=["rustyrivets","exploration","events","ExplorationEvents"];var xd=function(a){this.isSelected=!1;j.call(this,a)};e["rustyrivets.exploration.objects.Tablet"]=xd;xd.__name__=["rustyrivets","exploration","objects","Tablet"];
xd.__super__=j;xd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.isSelected&&this.get_display().sprite.setXY(u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).x,
u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y()).y)},grab:function(){this.isSelected=!0;this._startingPos=new Y(this.get_display().sprite.x._value,this.get_display().sprite.y._value)},reset:function(){this.isSelected=!1;this.get_display().sprite.setXY(this._startingPos.x,this._startingPos.y)},__class__:xd});var yd=function(a,b,d){this._tauntTimer=0;j.call(this,a);this._tauntDelay=a.properties.tauntDelay;this._ninjaFish=b;this._isRightStart=d;this._gameplayTaunts=
[];this._gameplayTaunts=a.display.gameTaunts};e["rustyrivets.exploration.objects.fish.FishTaunt"]=yd;yd.__name__=["rustyrivets","exploration","objects","fish","FishTaunt"];yd.__super__=j;yd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();
this.get_display().sprite.setXY(0.5*u.get_targetWidth(),0.5*u.get_targetHeight());this.get_display().sprite.set_visible(!1);this._isRightStart&&this.get_display().sprite.scaleX.set__(-1)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);l.get_instance().gameState==E.PLAYING&&(this._tauntTimer>this._tauntDelay&&(this.showGameplayTaunt(),this._tauntTimer=0),this._tauntTimer+=a)},startTaunt:function(){this.get_display().moviePlayer.playOnce(this.config.display.introTaunt);n.connect(this.get_display().moviePlayer.completeSignal,
m(this,this.onIntroAnimationFinished));this.get_display().sprite.set_visible(!0);t.PlaySound(this.config.sounds.taunt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},startOutro:function(){this._isRightStart&&this.get_display().sprite.scaleX.set__(-1);this.get_display().moviePlayer.loop(this.config.display.primary);this.get_display().moviePlayer.playOnce(this.config.display.outroTaunt);n.connect(this.get_display().moviePlayer.completeSignal,m(this,this.onOutroAnimationFinished));
this.get_display().sprite.set_visible(!0);t.PlaySound(this.config.sounds.taunt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},onIntroAnimationFinished:function(){this.get_display().sprite.set_visible(!1);n.disconnect(this.get_display().moviePlayer.completeSignal,m(this,this.onIntroAnimationFinished));H.fishTauntIntroCompleted.emit()},showGameplayTaunt:function(){var a=this._gameplayTaunts[Math.floor((this._gameplayTaunts.length-1+1)*Math.random())];Math.abs(0.5*u.get_targetWidth()-
this._ninjaFish.get_display().sprite.x._value)>u.get_targetWidth()&&(this.get_display().sprite.scaleX.set__(1),0>this._ninjaFish.get_display().sprite.x._value&&this.get_display().sprite.scaleX.set__(-1),this.get_display().sprite.set_visible(!0),this.get_display().moviePlayer.playOnce(a),n.connect(this.get_display().moviePlayer.completeSignal,m(this,this.onGameplayTauntAnimationFinished)),t.PlaySound(this.config.sounds.taunt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),
H.fishTauntGameplayStarted.emit())},onGameplayTauntAnimationFinished:function(){this.get_display().sprite.set_visible(!1);n.disconnect(this.get_display().moviePlayer.completeSignal,m(this,this.onGameplayTauntAnimationFinished))},onOutroAnimationFinished:function(){this.get_display().sprite.set_visible(!1);n.disconnect(this.get_display().moviePlayer.completeSignal,m(this,this.onOutroAnimationFinished));H.fishTauntOutroCompleted.emit()},__class__:yd});var zd=function(a,b,d,c,e){this._wallEndOffset=
200;this._isRightStart=!0;this.isActive=!1;this.foundCount=0;j.call(this,a);this._chunkSpawner=b;this._laneController=d;this._wallEndLeft=c;this._wallEndRight=e};e["rustyrivets.exploration.objects.fish.NinjaFish"]=zd;zd.__name__=["rustyrivets","exploration","objects","fish","NinjaFish"];zd.__super__=j;zd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,
!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this.get_display().sprite.y.set__(this._laneController.getLaneCenterById(1))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);var b=this.get_display().sprite.x;b.set__(b._value+V.worldSpeed.x*a);b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a)},setStartingEndRight:function(a){this._isRightStart=a},isOnScreen:function(){return 0<this.get_display().sprite.x._value&&this.get_display().sprite.x._value<
u.get_targetWidth()?!0:!1},swimAcrossScreen:function(){this.isActive=!1;this._isRightStart?(this.get_display().sprite.scaleX.set__(1),this.get_display().sprite.x.set__(-20)):(this.get_display().sprite.scaleX.set__(-1),this.get_display().sprite.x.set__(u.get_targetWidth()+20));this.get_display().sprite.y.set__(this._laneController.getLaneCenterById(2));this.get_display().moviePlayer.playOnce(this.config.display.swim,!1,!0);n.get_instance().addConnection(this.get_display().moviePlayer.completeSignal,
m(this,this.onSwimAnimationComplete),!0);t.PlaySound(this.config.sounds.swim,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},placeFishAtEnd:function(){var a=0;this._isRightStart?(this.get_display().sprite.scaleX.set__(-1),a=this._wallEndRight.get_display().sprite.x._value-this._wallEndOffset):(this.get_display().sprite.scaleX.set__(1),a=this._wallEndLeft.get_display().sprite.x._value+this._wallEndOffset);this.get_display().sprite.setXY(a,this._laneController.getLaneCenterById(1))},
escape:function(){this.isActive=!1;this.get_display().moviePlayer.playOnce(this.config.display.escape,!1,!0);n.get_instance().addConnection(this.get_display().moviePlayer.completeSignal,m(this,this.onEscapeAnimationComplete),!0);t.PlaySound(this.config.sounds.escape,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},scareOff:function(){this.isActive=!1;1==l.get_instance().subIndex?this.get_display().moviePlayer.playOnce(this.config.display.scareRusty):2==l.get_instance().subIndex?
this.get_display().moviePlayer.playOnce(this.config.display.scareRuby):this.get_display().moviePlayer.playOnce(this.config.display.scareGeneral);n.get_instance().addConnection(this.get_display().moviePlayer.completeSignal,m(this,this.onScaredAnimationComplete),!0);t.PlaySound(this.config.sounds.scared,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},onSwimAnimationComplete:function(){this.isActive=!0;this.placeFishAtEnd();H.ninjaFishSwimFinished.emit()},onEscapeAnimationComplete:function(){this.isActive=
!0;this._isRightStart=!this._isRightStart;this.placeFishAtEnd();H.ninjaFishEscapeFinished.emit()},onScaredAnimationComplete:function(){H.ninjaFishScaredFinished.emit()},__class__:zd});var Ca=function(a,b,d,c,e){this._cellWidth=this._cellHeight=0;j.call(this,a);this._levelConfig=c;this._sceneRoot=b;this._collidableFactory=new Fe;this._laneController=d;this.isActive=!1;this._chunks=Qb.convertConfigToChunks(this._levelConfig);this._altSceneRoot=null!=e?e:this._sceneRoot};e["rustyrivets.shared.objects.level.ChunkSpawner"]=
Ca;Ca.__name__=["rustyrivets","shared","objects","level","ChunkSpawner"];Ca.__super__=j;Ca.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.sprite=new y;this.owner.add(this.sprite);this.setupPools();n.connect(J.spawnObject,m(this,this.spawnObject))},onStart:function(){j.prototype.onStart.call(this)},despawn:function(a){a.get_display().sprite.set_visible(!1);a.collider.SetActive(!1);(function(b){var d=a.get_collidableType();return b._chunkObjectPoolMap.exists(d)})(this)?
function(b){var d=a.get_collidableType();return b._chunkObjectPoolMap.get(d)}(this).despawn(a.owner):a.dispose()},setupPools:function(){},spawnChunk:function(){for(var a=this._chunks[Math.floor((this._chunks.length-1+1)*Math.random())],b=0,d=a.chunkGrid.length;b<d;)for(var c=b++,e=0,f=a.chunkGrid[c].length;e<f;){var g=e++;this.getCollidableFromChunk(a.chunkGrid[c][g],c,g)}},getCollidableFromChunk:function(a,b,d){if(this._chunkObjectPoolMap.exists(a)){var c=this._chunkObjectPoolMap.get(a).spawn(),
e=x.instance(c._compMap.BaseGameObject_1,Z);null==e&&(e=this._collidableFactory.createCollidable(a),c.add(e));a=this.getPointFromChunkIndex(b,d);e.get_display().sprite.setXY(a.x,a.y);e.reset()}},getPointFromChunkIndex:function(){return new Y(0,0)},addCollidablePool:function(a,b){null==b&&(b=!1);var d;d=b?new mc(function(){return new p},15,this._altSceneRoot):new mc(function(){return new p},15,this._sceneRoot);this.owner.addChild((new p).add(d));this._chunkObjectPoolMap.set(a,d)},spawnObject:function(a,
b){this.getCollidableFromChunk(a,Q.__cast(b.x,fb),Q.__cast(b.y,fb))},__class__:Ca});var Ad=function(a,b,d,c,e){this._currentChunkOffsetIndex=0;Ca.call(this,a,b,d,c,e);this._outerWallContainers=[];this._lateAddContainers=[];this._isActive=!1;this._cellHeight=this._laneController.laneSize;this._cellWidth=a.properties.cellWidth;this._centerWidth=a.properties.centerWidth;this.endWidth=a.properties.endWidth;this._chunkWidth=this.getChunkWidth();this._maxLevelChunks=this.getMaxLevelChunks();this.levelEndRight=
this.getLevelEndStartPosX(1);this.levelEndLeft=this.getLevelEndStartPosX(-1)};e["rustyrivets.exploration.objects.level.ChunkSpawnerExploration"]=Ad;Ad.__name__=["rustyrivets","exploration","objects","level","ChunkSpawnerExploration"];Ad.__super__=Ca;Ad.prototype=o(Ca.prototype,{onAdded:function(){Ca.prototype.onAdded.call(this);var a;a=Q.__cast(0.5*this._maxLevelChunks,fb);this.spawnChunksFront(a);this.spawnChunksRear(a)},onStart:function(){Ca.prototype.onStart.call(this);for(var a=0,b=this._outerWallContainers;a<
b.length;){var d=b[a];++a;this._sceneRoot.addChild(d.owner)}a=0;for(b=this._lateAddContainers;a<b.length;)d=b[a],++a,this._sceneRoot.addChild(d.owner)},setupPools:function(){this._chunkObjectPoolMap=new Ob;this.addCollidablePool(h.BARREL);this.addCollidablePool(h.CRATE);this.addCollidablePool(h.SCHOOL_OF_FISH);this.addCollidablePool(h.SEAWEED);this.addCollidablePool(h.WHIRLPOOL);this.addCollidablePool(h.WALL_UPPER_LEFT);this.addCollidablePool(h.WALL_UPPER_MID);this.addCollidablePool(h.WALL_UPPER_RIGHT);
this.addCollidablePool(h.WALL_MID_LEFT);this.addCollidablePool(h.WALL_MID_MID);this.addCollidablePool(h.WALL_MID_RIGHT);this.addCollidablePool(h.WALL_LOWER_LEFT);this.addCollidablePool(h.WALL_LOWER_MID);this.addCollidablePool(h.WALL_LOWER_RIGHT);this.addCollidablePool(h.BOOST);this.addCollidablePool(h.COLLECTIBLE,!0)},getCollidableFromChunk:function(a,b,d){if(a!=h.EMPTY){var c;a==h.COLLECTIBLE?(c=new Rb(a,this._altSceneRoot,this._chunkObjectPoolMap.get(a),this._collidableFactory),this._altSceneRoot.addChild((new p).add(c))):
(c=new Rb(a,this._sceneRoot,this._chunkObjectPoolMap.get(a),this._collidableFactory),this._sceneRoot.addChild((new p).add(c)));b=this.getPointFromChunkIndex(b,d);c.get_display().sprite.setXY(b.x,b.y);a==h.BOOST?this._lateAddContainers.push(c):(a==h.WALL_LOWER_LEFT||a==h.WALL_LOWER_MID||a==h.WALL_LOWER_RIGHT||a==h.WALL_UPPER_LEFT||a==h.WALL_UPPER_MID||a==h.WALL_UPPER_RIGHT)&&this._outerWallContainers.push(c)}},getPointFromChunkIndex:function(a,b){var d=this._laneController.getLaneCenterById(a),c=0.5*
u.get_targetWidth();0<this._currentChunkOffsetIndex?(c+=0.5*this._centerWidth,c+=this._cellWidth*b,c+=(this._currentChunkOffsetIndex-1)*this._chunkWidth):(c=0.5*u.get_targetWidth()-0.5*this._centerWidth,c-=Math.abs(this._currentChunkOffsetIndex)*this._chunkWidth,c+=this._cellWidth*(b+1));return new Y(c,d)},getChunkWidth:function(){return this._cellWidth*this._levelConfig.configVariables.width},getMaxLevelChunks:function(){var a;a=Q.__cast(this.config.properties.maxLevelChunks,fb);0<a%2&&a++;return a},
spawnChunksFront:function(a){for(var b=this._currentChunkOffsetIndex=0;b<a;)this._currentChunkOffsetIndex=b++ +1,this.spawnChunk()},spawnChunksRear:function(a){for(var b=this._currentChunkOffsetIndex=0;b<a;)this._currentChunkOffsetIndex=-(b++ +1),this.spawnChunk()},getLevelEndStartPosX:function(a){var a=0<=a?1:-1,b=0.5*u.get_targetWidth(),b=b+a*0.5*this._centerWidth;return b+a*0.5*this.getMaxLevelChunks()*this.getChunkWidth()},__class__:Ad});var Rb=function(a,b,d,c){this._isOffScreen=!1;this.isActive=
!0;this._collidable=null;j.call(this,null);this.currentCollidableType=a;this._collidableSceneRoot=b;this._pool=d;this._collidableFactory=c};e["rustyrivets.exploration.objects.level.CollidablePartitionContainer"]=Rb;Rb.__name__=["rustyrivets","exploration","objects","level","CollidablePartitionContainer"];Rb.__super__=j;Rb.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=new ib;this.get_display().entity=new p;this.get_display().sprite=new y;this.get_display().entity.add(this.get_display().sprite);
this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor()},onStart:function(){j.prototype.onStart.call(this);this.checkInitialVisibility()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.isOffScreenEdges()?this._isOffScreen||(this._isOffScreen=!0,null!=this._collidable&&!this._collidable.isAnimating&&this.detachCollidable()):this._isOffScreen&&(this._isOffScreen=!1,this.isActive&&this.attachCollidable());var b=this.get_display().sprite.x;b.set__(b._value+
V.worldSpeed.x*a);b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a)},inactivate:function(){this.isActive=!1;null!=this._collidable&&!this._collidable.isAnimating&&(this.detachCollidable(),this.dispose())},attachCollidable:function(){var a=this._pool.spawn(),b=x.instance(a._compMap.BaseGameObject_1,Z);null==b&&(b=this._collidableFactory.createCollidable(this.currentCollidableType),a.add(b));this._collidable=b;this._collidable.isMoveable=!1;this.get_display().entity.addChild(this._collidable.owner);
this._collidable.get_display().sprite.setXY(0,0);this._collidable.reset()},detachCollidable:function(){null!=this._collidable&&(this._collidableSceneRoot.addChild(this._collidable.owner),this._collidable.get_display().sprite.set_visible(!1),this._collidable.collider.SetActive(!1),this._pool.despawn(this._collidable.owner),this._collidable=null)},checkInitialVisibility:function(){this.isOffScreenEdges()?this._isOffScreen=!0:(this._isOffScreen=!1,this.attachCollidable())},isOffScreenEdges:function(){return-100>
this.get_display().sprite.x._value||this.get_display().sprite.x._value>u.get_targetWidth()+100?!0:!1},dispose:function(){j.prototype.dispose.call(this)},__class__:Rb});var Bd=function(a,b,d,c){this._isTimeoutActive=!1;this._timeoutCounter=0;this._clipAppendType="DT";j.call(this,a);this._player=b;this._ninjaFish=d;this._tablet=c;w.isMobile()&&(this._clipAppendType="MBL")};e["rustyrivets.exploration.objects.level.EndTutorial"]=Bd;Bd.__name__=["rustyrivets","exploration","objects","level","EndTutorial"];
Bd.__super__=j;Bd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",x.string(this.config.display.primary)+this._clipAppendType,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this.get_display().sprite.setXY(0.5*u.get_targetWidth(),0.5*u.get_targetHeight());n.connect(H.ninjaFishScaredFinished,m(this,this.onNinjaFishScaredFinished));
n.connect(H.fishTauntOutroCompleted,m(this,this.onFishTauntOutroFinished))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(null!=this._input)if(this._tablet.isSelected)w.isMobile()?this._input.getOnUp()&&this.dropTablet():this._input.getOnDown()&&this.dropTablet();else if(this._input.getOnDown()){var b=u.get_instance().toScreenSpace(q._platform.getPointer().get_x(),q._platform.getPointer().get_y());null!=y.hitTest(this._tablet.get_display().entity,b.x,b.y)&&this._tablet.grab()}this._isTimeoutActive&&
(this._timeoutCounter>this.config.properties.timeoutInterval&&(t.PlaySound(this._timeoutSound,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this._timeoutCounter=0),this._timeoutCounter+=a)},show:function(){var a=this;this._player.moveToCenter();t.PlaySound(this.config.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a._isTimeoutActive=!0;a._timeoutSound=a.config.sounds.scareFish;t.PlaySound(a.config.sounds.scareFish,
f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);a.get_display().sprite.set_visible(!0);a.get_display().sprite.setXY(a._ninjaFish.get_display().sprite.x._value,a._ninjaFish.get_display().sprite.y._value);a.get_display().moviePlayer.loop(x.string(a.config.display.action1)+a._clipAppendType);n.get_instance().addConnection(q._platform.getPointer().down,function(){a.fishScareInputReceived()},!0);a._player.get_collider().SetBounds(250,200);var b=a._player.get_collider().sprite.x;
b.set__(b._value-33)})},hide:function(){this.get_display().sprite.set_visible(!1)},fishScareInputReceived:function(){this._player.scare();this._isTimeoutActive=!1;this._timeoutCounter=0;t.PlaySound(this.config.sounds.fishScared,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this.get_display().sprite.set_visible(!1);this._ninjaFish.scareOff();this._tablet.get_display().sprite.setXY(this._ninjaFish.get_display().sprite.x._value,this._ninjaFish.get_display().sprite.y._value+
60);this._tablet.get_display().sprite.set_visible(!0);H.fishScareInputReceived.emit()},onNinjaFishScaredFinished:function(){this.owner.addChild(w.Delay(1.66,m(this,this.startTabletDragTutorial)))},onFishTauntOutroFinished:function(){},startTabletDragTutorial:function(){this._isTimeoutActive=!0;this._timeoutSound=this.config.sounds.grabTablet;t.PlaySound(this.config.sounds.grabTablet,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);var a=this.config.display.action2R;this._ninjaFish.get_display().sprite.x._value<
0.5*u.get_targetWidth()&&(a=this.config.display.action2L);this.get_display().sprite.setXY(this._tablet.get_display().sprite.x._value,this._tablet.get_display().sprite.y._value);this.get_display().moviePlayer.loop(a+this._clipAppendType);this.get_display().sprite.set_visible(!0);this._input=new ob;this.owner.add(this._input)},dropTablet:function(){this.isTabletOnPlayer()?this.tabletPlaced():this._tablet.reset()},isTabletOnPlayer:function(){var a=new Y(this._tablet.get_display().sprite.x._value,this._tablet.get_display().sprite.y._value);
return a.x>this._player.get_collider().get_left()&&a.x<this._player.get_collider().get_right()&&a.y>this._player.get_collider().get_top()&&a.y<this._player.get_collider().get_bottom()?!0:!1},tabletPlaced:function(){this.owner.remove(this._input);this._input.dispose();this._input=null;this._tablet.get_display().sprite.set_visible(!1);this.get_display().sprite.set_visible(!1);H.tabletReturned.emit()},__class__:Bd});var Cd=function(a,b,d){this._tutorialComplete=this.shouldFireTurnAnim=!1;this._timeout=
0;this._currentDirectionX=1;this._isFacingRight=!0;j.call(this,a);this.speed=a.properties.speed;this._world=b;this._laneController=d;this._turnSlowDownTime=1.25*a.properties.turnTime;this._turnSpeedUpTime=a.properties.turnTime};e["rustyrivets.exploration.objects.player.Player"]=Cd;Cd.__name__=["rustyrivets","exploration","objects","player","Player"];Cd.__super__=j;Cd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=new ib;this.get_display().entity=new p;this.get_display().sprite=
new y;this.get_display().entity.add(this.get_display().sprite);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this._playerVO=w.CreateMoviePlayer(f.get_instance().assetPacks.get("exploration_scene").assetPack,"atlas",this.config.display.primary,!0);this._playerVO.sprite.centerAnchor();this.get_display().entity.addChild(this._playerVO.entity);this._boostEffect=new qc(this.config.properties.boostEffect);this.get_display().entity.addChild((new p).add(this._boostEffect));
this._moveSoundFx=this.config.sounds.moveFx;1==l.get_instance().subIndex&&(this._moveSoundFx=this.config.sounds.moveRustyFx);n.connect(H.fishTauntGameplayStarted,m(this,this.onFishTauntGameplayStarted))},onStart:function(){j.prototype.onStart.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.shouldFireTurnAnim&&(this._playerVO.moviePlayer.playOnce(this.config.display.turn,!0,!1),this.shouldFireTurnAnim=!1);this._tutorialComplete&&(this._timeout+=a,this._timeout>this.config.properties.timeout&&
(t.PlaySound(this.config.sounds.timeout,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this._timeout=0))},enterScreen:function(){var a=this;t.PlaySound(this._moveSoundFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);t.PlaySound(this.config.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);l.get_instance().gameState=E.CUTSCENE;var b=-525;0>this._currentDirectionX&&(b=u.get_targetWidth()+-b);this.get_display().sprite.setXY(b,
0);var d=new Ga;d.run(new Ha([new nb([new $(this.get_display().sprite.x,0.5*u.get_targetWidth(),4.2,ab.sineOut),new $(this.get_display().sprite.y,this._laneController.getLaneCenterById(1),4.2,ab.sineOut)]),new la(function(){t.StopSound(a.config.sounds.intro);a._collider=a.getCollider();a.get_display().sprite.owner.addChild((new p).add(a._collider));a.addMovementComponent();a._playerVO.moviePlayer.loop(a.config.display.still);H.playerEnteredScreen.emit();d.owner.dispose();d=null})]));this.owner.addChild((new p).add(d))},
tutorial:function(a){var b=new Pb;b.stages.push(new Dd(this.config.properties.tutorial.stage01));b.stages.push(new Ed(this.config.properties.tutorial.stage02));b.stages.push(new Fd(this.config.properties.tutorial.stage03));a.addChild((new p).add(b))},startGame:function(){this._tutorialComplete=!0},end:function(){t.PlaySound(this.config.sounds.end,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},startMoving:function(){this._playerVO.moviePlayer.loop(this.config.display.primary)},
get_collider:function(){return this._collider},setDirection:function(a){0>a?(this._isFacingRight=!1,this.changeDirection(-1)):(this._isFacingRight=!0,this.changeDirection(1))},centerPlayer:function(){this.get_display().sprite.setXY(0.5*u.get_targetWidth(),this._laneController.getLaneCenterById(1))},hit:function(){null==this._turnScript&&this._playerVO.moviePlayer.playOnce(this.config.display.hit,!1,!0)},turnAround:function(a){this.updateDirection(new I(a,0))},slowStop:function(){this._playerVO.moviePlayer.loop(this.config.display.still);
this._boostEffect.hide();this._movementComponent.slowStop()},moveToCenter:function(){var a=this;this._boostEffect.hide();this._movementComponent.stopAllMovement();this.get_display().entity.remove(this._movementComponent);var b=new Ga;b.run(new Ha([new nb([new $(this.get_display().sprite.y,this._laneController.getLaneCenterById(1),0.66),new $(this._playerVO.sprite.rotation,0,0.45)]),new la(function(){t.StopSound(a._moveSoundFx);b.owner.dispose();b=null;a._playerVO.moviePlayer.loop(a.config.display.still)})]));
this.owner.addChild((new p).add(b))},scare:function(){this._playerVO.moviePlayer.loop(this.config.display.still);this._playerVO.moviePlayer.playOnce(this.config.display.scare,!0,!0)},foundFish:function(){t.PlaySound(this.config.sounds.foundFish,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},addMovementComponent:function(){this._movementComponent=w.isMobile()?new wd(this.get_display().sprite,this.config.properties.speed,this._collider,this._laneController,this._playerVO.sprite):
new vd(this.get_display().sprite,this.config.properties.speed,this._collider,this._laneController,this._playerVO.sprite);this.get_display().entity.add(this._movementComponent);n.connect(ma.inputMoveSignal,m(this,this.inputReceived))},inputReceived:function(a,b){if(l.get_instance().gameState==E.PLAYING||l.get_instance().gameState==E.TUTORIAL)w.isMobile()?(b&&0!=a.x&&this.updateDirection(a),0!=a.y&&(b||this._movementComponent.slowStop())):(b&&0!=a.x&&this.updateDirection(a),0!=a.y&&(b?(a.x=this._currentDirectionX,
this._movementComponent.updateMovement(a)):this._movementComponent.slowStop())),this._timeout=0},updateDirection:function(a){null==this._turnScript&&this._movementComponent.isInputActive&&(0>a.x&&this._isFacingRight?(this._isFacingRight=!1,this.runTurnScript(-1)):0<a.x&&!this._isFacingRight&&(this._isFacingRight=!0,this.runTurnScript(1)))},runTurnScript:function(a){var b=this;this._boostEffect.hide();this.shouldFireTurnAnim=!0;n.connect(this._playerVO.moviePlayer.completeSignal,m(this,this.onTurnFinished));
null!=this._turnScript&&this._turnScript.owner.dispose();l.get_instance().gameState==E.PLAYING&&this._world.stopAndResume(this._turnSlowDownTime,this._turnSpeedUpTime);this._movementComponent.untilt();t.PlaySound(this.config.sounds.turnFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this._turnScript=new Ga;this._turnScript.run(new Ha([new Ib(this.config.properties.turnTime),new la(function(){b.changeDirection(a);b._turnScript.owner.dispose();b._turnScript=null})]));
this.owner.addChild((new p).add(this._turnScript))},changeDirection:function(a){!this._tutorialComplete&&null!=this._movementComponent?this._playerVO.moviePlayer.loop(this.config.display.still):this._playerVO.moviePlayer.loop(this.config.display.primary);this._currentDirectionX=a;this.get_display().sprite.setScaleXY(a,1);null!=this._collider&&this._collider.sprite.setScaleXY(a,1);this._world.setHorizontalDirection(a);H.playerChangedDirection.emit(a)},onTurnFinished:function(){n.disconnect(this._playerVO.moviePlayer.completeSignal,
m(this,this.onTurnFinished));this._movementComponent.resumeTiltIfMoving()},getCollider:function(){var a=new gb(this.config.transform.collider.size.x,this.config.transform.collider.size.y,"default","default");a.sprite.setXY(this.config.transform.collider.offset.x,this.config.transform.collider.offset.y);n.connect(a.collisionEnter,m(this,this.onCollisionEnter));a.sprite.setScaleXY(this.get_display().sprite.scaleX._value,1);return a},onCollisionEnter:function(a){var b=a.owner._internal_getFromParents("BaseGameObject_1",
Sb),d=a.owner._internal_getFromParents("BaseGameObject_1",aa),c=a.owner._internal_getFromParents("BaseGameObject_1",Tb),a=a.owner._internal_getFromParents("BaseGameObject_1",Ia);null!=b?this.playerHitCollectible(b):null!=d?this.playerHitObstacle(d):null!=c?this.playerHitBoost(c):null!=a&&this.playerHitWall(a)},playerHitCollectible:function(a){J.collectibleHit.emit(a);t.PlaySound(this.config.sounds.bolt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},playerHitObstacle:function(a){this._boostEffect.hide();
a.get_isPassable()?(a.get_collidableType()==h.WHIRLPOOL?this._movementComponent.fullSpin():this._movementComponent.spinOut(),t.PlaySound(this.config.sounds.passableObstacle,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)):(this.hit(),t.PlaySound(this.config.sounds.hitFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),t.PlaySound(this.config.sounds.impassableObstacle,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack));
J.obstacleHit.emit(a)},playerHitBoost:function(a){this._boostEffect.show();J.boostHit.emit(a);t.PlaySound(this.config.sounds.boost,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},playerHitWall:function(a){this._boostEffect.hide();a.hit();t.PlaySound(this.config.sounds.impassableObstacle,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);t.PlaySound(this.config.sounds.hitFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
t.PlaySound(this.config.sounds.wallHitFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);var b=!1;a.isEdge()&&(b=Ja.isFrontEdgeCollision(this._collider,a,this._isFacingRight));b?(this.hit(),H.wallHit.emit(b)):(Ja.positionPlayerFromWall(this,a),this._movementComponent.stop())},onFishTauntGameplayStarted:function(){t.PlaySound(this.config.sounds.fishTaunt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},__class__:Cd});var Dd=function(a){D.call(this);
this.config=a};e["rustyrivets.exploration.tutorial.TutorialStage1"]=Dd;Dd.__name__=["rustyrivets","exploration","tutorial","TutorialStage1"];Dd.__super__=D;Dd.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);t.PlaySound(this.config.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(1)})},__class__:Dd});var Ed=function(a){this.currentAction=this.delay=1;D.call(this);this.config=a};e["rustyrivets.exploration.tutorial.TutorialStage2"]=
Ed;Ed.__name__=["rustyrivets","exploration","tutorial","TutorialStage2"];Ed.__super__=D;Ed.prototype=o(D.prototype,{Start:function(){D.prototype.Start.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",x.string(this.config.display.start)+this.isMobile(),!1);this.display.sprite.setXY(u.get_targetWidth()/2,u.get_targetHeight()/4);this.owner.addChild(this.display.entity);this.display.sprite.centerAnchor();this.display.moviePlayer.completeSignal.connect(m(this,
this.showAction)).once();this.timeoutClip=this.config.sounds.action1},showAction:function(){this.display.moviePlayer.loop(x.string(this.config.display.action1)+this.isMobile());this.delay=0;n.connect(ma.inputMoveSignal,m(this,this.playerMoved))},playerMoved:function(a){0!=a.y&&(this.timeoutClip=this.config.sounds.action2,this.display.moviePlayer.loop(x.string(this.config.display.action2)+this.isMobile()),this.timeout=10,this.currentAction=-1,n.disconnect(ma.inputMoveSignal,m(this,this.playerMoved)),
n.connect(H.playerChangedDirection,m(this,this.directionChanged)))},directionChanged:function(){this.Complete()},Complete:function(){var a=this;n.disconnect(H.playerChangedDirection,m(this,this.directionChanged));this.owner.addChild(w.Delay(this.delay,function(){a.display.moviePlayer.playOnce(x.string(a.config.display.end)+a.isMobile());a.complete.emit(2)}))},End:function(){D.prototype.End.call(this);n.disconnect(ma.inputMoveSignal,m(this,this.playerMoved));n.disconnect(H.playerChangedDirection,m(this,
this.directionChanged))},__class__:Ed});var Fd=function(a){D.call(this);this.config=a};e["rustyrivets.exploration.tutorial.TutorialStage3"]=Fd;Fd.__name__=["rustyrivets","exploration","tutorial","TutorialStage3"];Fd.__super__=D;Fd.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);t.PlaySound(this.config.sounds.outro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(3)})},__class__:Fd});var Gd=function(a,b){this._direction=
1;this.isActive=!0;j.call(this,null);this._rootSprite=a;this._speed=b;this._velocity=I.get_zero();this._destination=I.get_zero()};e["rustyrivets.fishing.components.MovementComponent"]=Gd;Gd.__name__=["rustyrivets","fishing","components","MovementComponent"];Gd.__super__=j;Gd.prototype=o(j.prototype,{onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(this.isActive&&0<this._velocity.x){var b=this._rootSprite.x;b.set__(b._value+this._velocity.x*a*this._direction);if(0<this._direction&&this._rootSprite.x._value>=
this._destination.x||0>this._direction&&this._rootSprite.x._value<=this._destination.x)this._velocity.x=0,this._rootSprite.x.set__(this._destination.x)}},moveTo:function(a){0==this._velocity.x&&this._rootSprite.x._value!=a.x&&(this._destination=a,this._direction=this.getDirection(this._destination),this._velocity.x=this._speed.x)},isMoving:function(){return 0<this._velocity.x?!0:!1},getDirection:function(a){return a.x<this._rootSprite.x._value?-1:1},__class__:Gd});var fa=function(){};e["rustyrivets.fishing.events.FishingEvents"]=
fa;fa.__name__=["rustyrivets","fishing","events","FishingEvents"];var Hd=function(a,b,d,c,e,f){Ca.call(this,a,b,d,c,f);this.isActive=!1;this._chunkCounter=this._spawnTimer=0;this._cellWidth=this._laneController.laneSize;this._cellHeight=a.properties.cellHeight;this._surfboardConfig=e};e["rustyrivets.fishing.objects.level.ChunkSpawnerFishing"]=Hd;Hd.__name__=["rustyrivets","fishing","objects","level","ChunkSpawnerFishing"];Hd.__super__=Ca;Hd.prototype=o(Ca.prototype,{onAdded:function(){Ca.prototype.onAdded.call(this);
n.connect(J.collidableExitScreenSignal,m(this,this.onCollidableExitScreen))},onUpdate:function(a){Ca.prototype.onUpdate.call(this,a);this._isActive&&(this._spawnTimer>this.config.properties.spawnTime&&(this._spawnTimer=0,this._chunkCounter>=this.config.properties.maxLevelChunks?(this._isActive=!1,this.spawnFinishChunk()):this.spawnChunk()),this._spawnTimer+=a*V.speedScale)},spawnChunk:function(){Ca.prototype.spawnChunk.call(this);this._chunkCounter++},start:function(){this._isActive=!0;this.spawnChunk()},
setupPools:function(){this._chunkObjectPoolMap=new Ob;this.addCollidablePool(h.SCHOOL_OF_FISH);this.addCollidablePool(h.SEAWEED);this.addCollidablePool(h.BARREL);this.addCollidablePool(h.CRATE);this.addCollidablePool(h.BOOST);this.addCollidablePool(h.COLLECTIBLE,!0)},getPointFromChunkIndex:function(a,b){var d=0.5*this._cellHeight*(a+1),c=this._laneController.getLaneCenterById(b),d=d+(u.get_targetHeight()+30);return new Y(c,d)},onCollidableExitScreen:function(a){!a.isAnimating&&a.get_collidableType()!=
h.COLLECTIBLE&&this.despawn(a)},spawnFinishChunk:function(){var a=this._levelConfig.configVariables.height,b;b=Q.__cast(Math.floor(0.5*this._levelConfig.configVariables.width),fb);a=this.getPointFromChunkIndex(a,b);this._surfboard=new Id(this._surfboardConfig);this._sceneRoot.addChild((new p).add(this._surfboard));this._surfboard.get_display().sprite.setXY(a.x,a.y);fa.finishChunkSpawned.emit()},__class__:Hd});var Jd=function(a){this._isTimeoutActive=!1;this._timeoutCounter=0;this._clipAppendType=
"DT";j.call(this,a);w.isMobile()&&(this._clipAppendType="MBL")};e["rustyrivets.fishing.objects.level.EndTutorial"]=Jd;Jd.__name__=["rustyrivets","fishing","objects","level","EndTutorial"];Jd.__super__=j;Jd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",x.string(this.config.display.primary)+this._clipAppendType,!0);this.owner.addChild(this.get_display().entity);
this.get_display().sprite.centerAnchor();this.get_display().sprite.setXY(0.5*u.get_targetWidth(),0.5*u.get_targetHeight())},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._isTimeoutActive&&(this._timeoutCounter>this.config.properties.timeoutInterval&&(t.PlaySound(this.config.sounds.grabSurfboard,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this._timeoutCounter=0),this._timeoutCounter+=a)},show:function(a){var b=this;this._surfboard=a;this.get_display().sprite.setXY(this._surfboard.get_display().sprite.x._value,
this._surfboard.get_display().sprite.y._value);t.PlaySound(this.config.sounds.surfboardReached,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){b._isTimeoutActive=!0;t.PlaySound(b.config.sounds.grabSurfboard,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);b.get_display().sprite.set_visible(!0);b.get_display().moviePlayer.loop(x.string(b.config.display.primary)+b._clipAppendType);n.get_instance().addConnection(q._platform.getPointer().down,
function(){b._isTimeoutActive=!1;(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO");fa.levelEndInputReceived.emit(b._surfboard)},!0)})},hide:function(){this.get_display().sprite.set_visible(!1)},__class__:Jd});var Kd=function(a,b){null==b&&(b=1);j.call(this,a);this._speedMultiplierY=b;this._maxDelay=a.properties.maxDelay;this._heightExtent=0.5*a.properties.height};e["rustyrivets.fishing.objects.level.FishBackground"]=Kd;Kd.__name__=["rustyrivets","fishing","objects","level",
"FishBackground"];Kd.__super__=j;Kd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this.spawnAtBottom()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);0>this.get_display().sprite.y._value+this._heightExtent&&this.spawnAtBottom();
var b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a*this._speedMultiplierY)},spawnAtBottom:function(){this.get_display().moviePlayer.loop(this.config.display.primary);this.get_display().sprite.setXY(0.5*u.get_targetWidth(),u.get_targetHeight())},__class__:Kd});var Id=function(a){j.call(this,a);this._reachedScreenPosionY=this.getReachedScreenPositionY()};e["rustyrivets.fishing.objects.level.Surfboard"]=Id;Id.__name__=["rustyrivets","fishing","objects","level","Surfboard"];Id.__super__=
j;Id.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=new ib;this.get_display().entity=new p;this.get_display().sprite=new y;this.get_display().entity.add(this.get_display().sprite);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this._background=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.properties.background.display.primary,!0);this.get_display().entity.addChild(this._background.entity);
this._background.sprite.centerAnchor();this.mainBoard=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.get_display().entity.addChild(this.mainBoard.entity);this.mainBoard.sprite.centerAnchor();this._foreground=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.properties.foreground.display.primary,!0);this.get_display().entity.addChild(this._foreground.entity);
this._foreground.sprite.centerAnchor()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(this.get_display().sprite.y._value>this._reachedScreenPosionY){var b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a)}else fa.surfboardReached.emit(this)},getReachedScreenPositionY:function(){return u.get_targetHeight()*this.config.properties.reachedScreenPercentage},__class__:Id});var Ld=function(a,b){null==b&&(b=1);this._spawnCount=0;j.call(this,a);this._speedMultiplierY=b;this._maxDelay=
a.properties.maxDelay;this._heightExtent=0.5*a.properties.height};e["rustyrivets.fishing.objects.level.WallBackground"]=Ld;Ld.__name__=["rustyrivets","fishing","objects","level","WallBackground"];Ld.__super__=j;Ld.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.clips[0],!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();
this.spawnAtBottom()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);0>this.get_display().sprite.y._value+this._heightExtent&&(l.get_instance().gameState==E.TUTORIAL?this.spawnAtBottom():1>this._spawnCount&&(this.spawnAtBottom(),this._spawnCount++));var b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a*this._speedMultiplierY)},spawnAtBottom:function(){var a=Math.floor(8*Math.random()),b=100*Math.random();this.get_display().moviePlayer.loop(this.config.clips[a]);this.get_display().sprite.setXY(0.5*
u.get_targetWidth(),u.get_targetHeight()+this._heightExtent+b)},__class__:Ld});var Md=function(a,b){this._tutorialComplete=!1;this._timeout=0;j.call(this,a);this._laneController=b};e["rustyrivets.fishing.objects.player.Player"]=Md;Md.__name__=["rustyrivets","fishing","objects","player","Player"];Md.__super__=j;Md.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get("fishing_scene").assetPack,"atlas",this.config.display.primary,
!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.y.set__(-200);this._movementComponent=new Gd(this.get_display().sprite,this.config.properties.speed);this.get_display().entity.add(this._movementComponent);this._collider=this.getCollider();this.get_display().sprite.owner.addChild((new p).add(this._collider));n.connect(ma.inputMoveSignal,m(this,this.inputReceived))},onStart:function(){j.prototype.onStart.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);
this._boostEffect.get_display().sprite.setXY(this.get_display().sprite.x._value,this.get_display().sprite.y._value);this._tutorialComplete&&(this._timeout+=a,this._timeout>this.config.properties.timeout&&(t.PlaySound(this.config.sounds.timeout,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this._timeout=0));this._boostEffect.get_display().sprite.x.set__(this.get_display().sprite.x._value)},setBoostEffect:function(a){this._boostEffect=a;this._boostEffect.get_display().sprite.setXY(this.get_display().sprite.x._value,
this.get_display().sprite.y._value)},tutorial:function(a){var b=new Pb;b.stages.push(new Nd(this.config.properties.tutorial.stage01));b.stages.push(new Od(this.config.properties.tutorial.stage02));b.stages.push(new Pd(this.config.properties.tutorial.stage03));b.stages.push(new Qd(this.config.properties.tutorial.stage04));a.addChild((new p).add(b))},startGame:function(){this._tutorialComplete=!0},setPositionByLane:function(a){this.currentLaneId=a;this.get_display().sprite.setXY(this._laneController.getLaneCenterById(this.currentLaneId),
this.get_display().sprite.y._value)},moveToLane:function(a){this._movementComponent.isMoving()||(this.currentLaneId!=a&&t.PlaySound(this.config.sounds.moveSidewaysFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack),this.currentLaneId=a,this._movementComponent.moveTo(new I(this._laneController.getLaneCenterById(this.currentLaneId),this.get_display().sprite.y._value)),this._timeout=0)},surfboardReached:function(a){this._boostEffect.hide();this._movementComponent.isActive=
!1;this.runSurfboardGrabScript(a)},enterScreen:function(){l.get_instance().gameState=E.CUTSCENE;t.PlaySound(this.config.sounds.moveDownFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);var a=new Ga;a.run(new Ha([new $(this.get_display().sprite.y,this.config.transform.offset.y,1.33),new la(function(){fa.playerEnteredScreen.emit()})]));this.owner.addChild((new p).add(a))},getCollider:function(){var a=new gb(this.config.transform.collider.size.x,this.config.transform.collider.size.y,
"default","default");a.sprite.setXY(this.config.transform.collider.offset.x,this.config.transform.collider.offset.y);n.connect(a.collisionEnter,m(this,this.onCollisionEnter));return a},inputReceived:function(a,b){if(l.get_instance().gameState==E.PLAYING||l.get_instance().gameState==E.TUTORIAL){var d=this.currentLaneId+(a.x|0),d=pa.clamp(d,0,this._laneController.numLanes-1);this.moveToLane(d);this.checkManualSpeedBoost(a,b)}},checkManualSpeedBoost:function(a,b){0<a.y&&(b?fa.boostInputReceived.emit(!0):
fa.boostInputReceived.emit(!1))},onCollisionEnter:function(a){var b=a.owner._internal_getFromParents("BaseGameObject_1",Sb),d=a.owner._internal_getFromParents("BaseGameObject_1",aa),a=a.owner._internal_getFromParents("BaseGameObject_1",Tb);null!=b?this.playerHitCollectible(b):null!=d?this.playerHitObstacle(d):null!=a&&this.playerHitBoost(a)},playerHitCollectible:function(a){J.collectibleHit.emit(a);t.PlaySound(this.config.sounds.grabFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
t.PlaySound(this.config.sounds.bolt,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this.get_display().moviePlayer.playOnce(this.config.display.grab,!0,!0)},playerHitObstacle:function(a){this._boostEffect.hide();J.obstacleHit.emit(a);a.get_collidableType()==h.SCHOOL_OF_FISH?t.PlaySound(this.config.sounds.obstacleWithFish,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack):t.PlaySound(this.config.sounds.obstacle,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
this.get_display().moviePlayer.playOnce(this.config.display.hit,!0,!0);t.PlaySound(this.config.sounds.hitFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},playerHitBoost:function(a){this._boostEffect.show();J.boostHit.emit(a);t.PlaySound(this.config.sounds.boost,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},runSurfboardGrabScript:function(a){var b=this;this._boostEffect.hide();var d=new Ga;d.run(new Ha([new nb([new la(function(){t.PlaySound(b.config.sounds.moveSidewaysFx,
f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)}),new $(this.get_display().sprite.x,0.5*u.get_targetWidth(),1)]),new nb([new la(function(){t.PlaySound(b.config.sounds.moveDownFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)}),new $(this.get_display().sprite.y,a.get_display().sprite.y._value-260,1)]),new la(function(){t.PlaySound(b.config.sounds.grabReleaseFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
b.get_display().moviePlayer.playOnce(b.config.display.endGrab)}),new Ib(1),new nb([new la(function(){t.PlaySound(b.config.sounds.moveUpFx,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)}),new kc(this.get_display().sprite.y,-600,2),new kc(a.mainBoard.sprite.y,-600,2)]),new la(function(){b.grabFinished()})]));this.owner.addChild((new p).add(d))},grabFinished:function(){t.PlaySound(this.config.sounds.end,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);
fa.surfboardGrabFinished.emit()},__class__:Md});var Nd=function(a){D.call(this);this.config=a};e["rustyrivets.fishing.tutorial.TutorialStage1"]=Nd;Nd.__name__=["rustyrivets","fishing","tutorial","TutorialStage1"];Nd.__super__=D;Nd.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);t.PlaySound(this.config.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(1)})},__class__:Nd});var Od=function(a){this.delay=
1;D.call(this);this.config=a};e["rustyrivets.fishing.tutorial.TutorialStage2"]=Od;Od.__name__=["rustyrivets","fishing","tutorial","TutorialStage2"];Od.__super__=D;Od.prototype=o(D.prototype,{Start:function(){D.prototype.Start.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",x.string(this.config.display.start)+this.isMobile(),!1);this.display.sprite.setXY(u.get_targetWidth()/2,u.get_targetHeight()/2);this.owner.addChild(this.display.entity);
this.display.sprite.centerAnchor();this.display.moviePlayer.completeSignal.connect(m(this,this.showAction)).once();this.timeoutClip=this.config.sounds.action;n.connect(ma.inputMoveSignal,m(this,this.playerMoved))},showAction:function(){this.display.moviePlayer.loop(x.string(this.config.display.action)+this.isMobile());this.delay=0},playerMoved:function(a){0!=a.x&&this.Complete()},Complete:function(){var a=this;n.disconnect(ma.inputMoveSignal,m(this,this.playerMoved));this.owner.addChild(w.Delay(this.delay,
function(){a.display.moviePlayer.playOnce(x.string(a.config.display.end)+a.isMobile());t.PlaySound(a.config.sounds.outro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(2)})}))},End:function(){D.prototype.End.call(this);n.disconnect(ma.inputMoveSignal,m(this,this.playerMoved))},__class__:Od});var Pd=function(a){D.call(this);this.config=a};e["rustyrivets.fishing.tutorial.TutorialStage3"]=Pd;Pd.__name__=["rustyrivets","fishing","tutorial","TutorialStage3"];
Pd.__super__=D;Pd.prototype=o(D.prototype,{Start:function(){D.prototype.Start.call(this);this.timeoutClip=this.config.sounds.action;n.connect(J.collidableExitScreenSignal,m(this,this.obstacleDodged));J.spawnObject.emit(h.BARREL,new I(0,2))},obstacleDodged:function(){this.Complete()},Complete:function(){n.disconnect(J.collidableExitScreenSignal,m(this,this.obstacleDodged));this.complete.emit(3)},End:function(){D.prototype.End.call(this);n.disconnect(J.collidableExitScreenSignal,m(this,this.obstacleDodged))},
__class__:Pd});var Qd=function(a){D.call(this);this.config=a};e["rustyrivets.fishing.tutorial.TutorialStage4"]=Qd;Qd.__name__=["rustyrivets","fishing","tutorial","TutorialStage4"];Qd.__super__=D;Qd.prototype=o(D.prototype,{Start:function(){var a=this;D.prototype.Start.call(this);t.PlaySound(this.config.sounds.outro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,!0,function(){a.complete.emit(4)})},__class__:Qd});var da=function(){Kb.call(this)};e["rustyrivets.scenes.SceneManager"]=
da;da.__name__=["rustyrivets","scenes","SceneManager"];da.get_instance=function(){null==da._instance&&(da._instance=new da);return da._instance};da.__super__=Kb;da.prototype=o(Kb.prototype,{LoadScene:function(a){Kb.prototype.LoadScene.call(this,a);(null==r.instance?r.instance=new r:r.instance).createAll(f.get_instance().assetPacks.get("main").configSounds)},__class__:da});var ia=function(a){Na.call(this,void 0);this.assetPackName=a;this._mainConfig=f.get_instance().assetPacks.get("main").configAssets};
e["rustyrivets.scenes.cutscenes.BaseCutscene"]=ia;ia.__name__=["rustyrivets","scenes","cutscenes","BaseCutscene"];ia.__super__=ra;ia.prototype=o(ra.prototype,{onAdded:function(){ra.prototype.onAdded.call(this);this.LoadConfigValues(this.assetPackName);l.get_instance().currentAssetPack=this.assetPackName;(null==r.instance?r.instance=new r:r.instance).createAll(this.configSounds);t.PlaySound(this.configAssets.sounds.cutscene,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,
!0);n.get_instance().addConnection(q.hidden.get_changed(),m(this,this.onWindowChanged));this.createCutscene();this.addSkipButton()},createCutscene:function(){this.backgroundEntity.addChild((new p).add(this.CreateSceneBackground(this.assetPackName)));this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.configAssets.cutscene.display.primary,!1);this.maingroundEntity.addChild(this.display.entity);n.get_instance().addConnection(this.display.moviePlayer.completeSignal,
m(this,this.onCutsceneComplete))},addSkipButton:function(){this._skipButton=new pb(w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",this._mainConfig.skipButton.clips.idle,!0),this._mainConfig.skipButton,f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild((new p).add(this._skipButton));this._skipButton.addTextLocalized("BTN_SKIP");n.connect(this._skipButton.up,m(this,this.skipPressed))},onCutsceneComplete:function(){n.disconnect(this.display.moviePlayer.completeSignal,
m(this,this.onCutsceneComplete));this.cutsceneComplete(!1)},cutsceneComplete:function(){},skipPressed:function(){this._skipButton.set_enabled(!1);(null==r.instance?r.instance=new r:r.instance).stopAllSounds()},onWindowChanged:function(a){a&&this.skipPressed(null)},__class__:ia});var Ge=function(a){ia.call(this,a)};e["rustyrivets.scenes.cutscenes.BuildingIntroScene"]=Ge;Ge.__name__=["rustyrivets","scenes","cutscenes","BuildingIntroScene"];Ge.__super__=ia;Ge.prototype=o(ia.prototype,{onAdded:function(){ia.prototype.onAdded.call(this)},
skipPressed:function(a){ia.prototype.skipPressed.call(this,a);(null==r.instance?r.instance=new r:r.instance).stopAllSounds();t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,function(){da.get_instance().ChangeScene("BUILDING_SCENE")}))},cutsceneComplete:function(){var a=this;this.owner.addChild(w.Delay(0.5,function(){a.owner.add(new sb(0));
da.get_instance().ChangeScene("BUILDING_SCENE")}))},__class__:Ge});var He=function(a){ia.call(this,a)};e["rustyrivets.scenes.cutscenes.FishingIntroScene"]=He;He.__name__=["rustyrivets","scenes","cutscenes","FishingIntroScene"];He.__super__=ia;He.prototype=o(ia.prototype,{onAdded:function(){ia.prototype.onAdded.call(this)},skipPressed:function(a){ia.prototype.skipPressed.call(this,a);(null==r.instance?r.instance=new r:r.instance).stopAllSounds();t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,
f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,function(){da.get_instance().ChangeScene("FISHING_SCENE")}))},cutsceneComplete:function(){var a=this;this.owner.addChild(w.Delay(0.5,function(){a.owner.add(new sb(0));da.get_instance().ChangeScene("FISHING_SCENE")}))},__class__:He});var Ie=function(a){ia.call(this,a)};e["rustyrivets.scenes.cutscenes.GameCompleteScene"]=Ie;Ie.__name__=["rustyrivets",
"scenes","cutscenes","GameCompleteScene"];Ie.__super__=ia;Ie.prototype=o(ia.prototype,{onAdded:function(){ia.prototype.onAdded.call(this)},skipPressed:function(a){ia.prototype.skipPressed.call(this,a);(null==r.instance?r.instance=new r:r.instance).stopAllSounds();t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,
function(){da.get_instance().ChangeScene("PLAY_AGAIN_SCENE")}))},cutsceneComplete:function(){var a=this;this.owner.addChild(w.Delay(0.5,function(){a.owner.add(new sb(0));da.get_instance().ChangeScene("PLAY_AGAIN_SCENE")}))},__class__:Ie});var W=function(a){this._gameStarted=!1;Na.call(this,void 0);this.assetPackName=a;this._mainConfig=f.get_instance().assetPacks.get("main").configAssets};e["rustyrivets.scenes.games.BaseGameScene"]=W;W.__name__=["rustyrivets","scenes","games","BaseGameScene"];W.__super__=
ra;W.prototype=o(ra.prototype,{onAdded:function(){ra.prototype.onAdded.call(this);this.LoadConfigValues(this.assetPackName);(null==r.instance?r.instance=new r:r.instance).createAll(this.configSounds);null!=Ve.get([this.configAssets,"background"])&&this.backgroundEntity.addChild((new p).add(this.CreateSceneBackground(this.assetPackName)));l.get_instance().currentAssetPack=this.assetPackName;t.PlaySound(this.configAssets.sounds.bgm,f.get_instance().assetPacks.get(this.assetPackName).assetPack);n.get_instance().addConnection(q.hidden.get_changed(),
m(this,this.onWindowChanged))},tutorial:function(){n.get_instance().addConnection(J.tutorialComplete,m(this,this.start),!0)},start:function(){this._gameStarted=!0},dispose:function(){n.get_instance().dumpConnections();ra.prototype.dispose.call(this)},onWindowChanged:function(){(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO");(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("SFX")},__class__:W});var Je=function(a){W.call(this,a)};e["rustyrivets.scenes.games.BuildingScene"]=
Je;Je.__name__=["rustyrivets","scenes","games","BuildingScene"];Je.__super__=W;Je.prototype=o(W.prototype,{onAdded:function(){W.prototype.onAdded.call(this);this._collisionWorld=new F(5);q.root.add(this._collisionWorld);F.scale=u.get_instance().scale;this.createGameObjects();n.connect(P.partGrabbed,m(this,this.onPartGrabbed));n.connect(P.partPlacedFailed,m(this,this.onPartPlaceFailed));this.tutorial()},tutorial:function(){W.prototype.tutorial.call(this);this._player.tutorial(this.uiEntity)},start:function(){W.prototype.start.call(this);
this._player.startGame()},createGameObjects:function(){this.backgroundEntity.addChild((new p).add(this.CreateSceneBackground(this.assetPackName)));this._player=new rd(this.configAssets.player);this.foregroundEntity.addChild((new p).add(this._player));this._surfboardPicker=new qd(this.configAssets.surfboardPicker);this.foregroundEntity.addChild((new p).add(this._surfboardPicker));n.get_instance().addConnection(P.surfboardPicked,m(this,this.surfboardPicked));n.get_instance().addConnection(P.allPartsPlaced,
m(this,this.allPartsPlaced))},surfboardPicked:function(a){var b=this;t.PlaySound(this.configAssets.sounds.surfboardClick,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this.owner.addChild(w.Delay(1,function(){l.get_instance().subIndex=a;b._surfboardPicker.owner.dispose();b._partPlacer=new md(b.configAssets.partPlacer);b.foregroundEntity.addChild((new p).add(b._partPlacer))}))},allPartsPlaced:function(){(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO");
this._player.endGame(function(){da.get_instance().ChangeScene("EXPLORATION_SCENE")})},onPartGrabbed:function(){t.PlaySound(this.configAssets.sounds.partSelected,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},onPartPlaceFailed:function(){t.PlaySound(this.configAssets.sounds.invalidPlace,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},__class__:Je});var Ub=function(a){W.call(this,a);Ub._collisionWorld=new F(2);q.root.add(Ub._collisionWorld)};
e["rustyrivets.scenes.games.ExplorationScene"]=Ub;Ub.__name__=["rustyrivets","scenes","games","ExplorationScene"];Ub.__super__=W;Ub.prototype=o(W.prototype,{onAdded:function(){W.prototype.onAdded.call(this);this._world=new rc(this.configAssets.world);this.backgroundEntity.addChild((new p).add(this._world));this._laneController=new sc(this.configAssets.laneController,!1);this.backgroundEntity.addChild((new p).add(this._laneController));this._hud=new tc(this._mainConfig.hud);this.uiEntity.addChild((new p).add(this._hud));
this._hud.SetScore(l.get_instance().collectiblesCount);this.addBackgrounds();this.addPlayer(this._world,this._laneController);var a=f.get_instance().assetPacks.get("exploration_level_chunks");this._chunkSpawner=new Ad(this.configAssets.chunkSpawner,this.maingroundEntity,this._laneController,a,this.foregroundEntity);this.maingroundEntity.addChild((new p).add(this._chunkSpawner));this.addLevelEnds();this.addNinjaFishAndTablet(this._chunkSpawner,this._laneController,this._wallEndLeft,this._wallEndRight);
this.addBubbles();this._endTutorial=new Bd(this.configAssets.endTutorial,this._player,this._ninjaFish,this._tablet);this.uiEntity.addChild((new p).add(this._endTutorial));this._endTutorial.hide();this._popup=new uc(null);this.uiEntity.addChild((new p).add(this._popup));this._popup.disable();this._world.setBaseSpeed(new I(this._player.speed.x,0));this._world.stop();a=!0;0<Math.floor(2*Math.random())&&(a=!1,this._player.setDirection(-1));this._ninjaFish.setStartingEndRight(a);this._fishTaunt=new yd(this.configAssets.fishTaunt,
this._ninjaFish,a);this.uiEntity.addChild((new p).add(this._fishTaunt));n.connect(J.collectibleHit,m(this,this.onCollectibleHit));n.connect(J.obstacleHit,m(this,this.onObstacleHit));n.connect(J.boostHit,m(this,this.onBoostHit));n.connect(H.wallHit,m(this,this.onWallHit));n.connect(J.collectibleHitEffectComplete,m(this,this.onCollectibleHitEffectComplete));n.connect(H.wallEndReached,m(this,this.onWallEndReached));n.connect(H.ninjaFishSwimFinished,m(this,this.onNinjaFishSwimFinished));n.connect(H.ninjaFishEscapeFinished,
m(this,this.onNinjaFishEscapeFinished));n.connect(H.ninjaFishScaredFinished,m(this,this.onNinjaFishScaredFinished));n.connect(J.popupNextButtonPressed,m(this,this.onPopupNextButtonPressed));n.connect(H.playerEnteredScreen,m(this,this.onPlayerEnteredScreen));n.connect(H.fishTauntIntroCompleted,m(this,this.onFishTauntIntroCompleted));n.connect(H.fishScareInputReceived,m(this,this.onFishScareInputReceived));n.connect(H.tabletReturned,m(this,this.onTabletReturned));this._player.enterScreen()},onStart:function(){W.prototype.onStart.call(this);
this._inputHandler=new vc(this.configVariables);this.owner.add(this._inputHandler)},onUpdate:function(a){W.prototype.onUpdate.call(this,a)},tutorial:function(){W.prototype.tutorial.call(this);this._player.tutorial(this.uiEntity);l.get_instance().gameState=E.TUTORIAL},start:function(){W.prototype.start.call(this);this._player.startGame();this.startIntroCutscene()},onPlayerEnteredScreen:function(){this.tutorial()},startIntroCutscene:function(){this._world.stop();this._player.slowStop();l.get_instance().gameState=
E.CUTSCENE;this._fishTaunt.startTaunt();t.PlaySound(this.configAssets.sounds.intro,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},addBackgrounds:function(){var a=new ub(561645,u.get_targetWidth(),u.get_targetHeight());this.backgroundEntity.addChild((new p).add(a));a=new Vb(this.configAssets.scrollingBackground,this.configVariables.backgroundSpeedModifer,12);this.backgroundEntity.addChild((new p).add(a));a=new Vb(this.configAssets.scrollingTop);this.foregroundEntity.addChild((new p).add(a));
a=new Vb(this.configAssets.scrollingBottom);this.foregroundEntity.addChild((new p).add(a));a.get_display().sprite.y.set__(u.get_targetHeight()-50)},addPlayer:function(a,b){this._player=new Cd(this.getPlayerConfig(),a,b);this.foregroundEntity.addChild((new p).add(this._player));this._player.centerPlayer();var d=this._player.get_display().sprite.y;d.set__(d._value+0.5*this.configAssets.chunkSpawner.properties.topOffsetY)},addNinjaFishAndTablet:function(a,b,d,c){this._tablet=new xd(this.configAssets.tablet);
this.uiEntity.addChild((new p).add(this._tablet));this._tablet.get_display().sprite.set_visible(!1);this._ninjaFish=new zd(this.configAssets.ninjaFish,a,b,d,c);this.foregroundEntity.addChild((new p).add(this._ninjaFish));this._ninjaFish.get_display().sprite.x.set__(-100)},addLevelEnds:function(){var a=0.5*u.get_targetHeight(),b=this._chunkSpawner.levelEndLeft-this.configAssets.chunkSpawner.properties.endWidth;this._wallEndLeft=new wc(this.configAssets.walls.wallEnd,!1);this.maingroundEntity.addChild((new p).add(this._wallEndLeft));
this._wallEndLeft.get_display().sprite.setXY(b,a);b=this._chunkSpawner.levelEndRight+this.configAssets.chunkSpawner.properties.endWidth;this._wallEndRight=new wc(this.configAssets.walls.wallEnd,!0);this.maingroundEntity.addChild((new p).add(this._wallEndRight));this._wallEndRight.get_display().sprite.setXY(b,a)},addBubbles:function(){for(var a=this.configAssets.bubbles.properties.count,b=0;b<a;){b++;var d=new xc(this.configAssets.bubbles,this.configVariables.foregroundSpeedModifier);this.foregroundEntity.addChild((new p).add(d));
d.get_display().sprite.setXY(0,u.get_targetHeight())}},onCollectibleHit:function(a){a.isAnimating||(l.get_instance().collectiblesCount++,a.hit())},onCollectibleHitEffectComplete:function(a){this._hud.Collect(l.get_instance().collectiblesCount);a=a.owner._internal_getFromParents("BaseGameObject_1",Rb);null!=a&&a.inactivate()},onObstacleHit:function(a){a.hit();a.get_isPassable()?this._world.temporarySlowDown():this._world.bounceBack()},onBoostHit:function(a){a.hit();this._world.speedBoost(this.configAssets.boost.properties.speedModifier,
this.configAssets.boost.properties.boostDuration)},onWallHit:function(a){a&&this._world.bounceBack()},onWallEndReached:function(a){this._ninjaFish.isOnScreen()&&this._ninjaFish.isActive?(l.get_instance().gameState=E.CUTSCENE,this._world.stop(),0==this._ninjaFish.foundCount?(this._ninjaFish.escape(),this._player.foundFish(),this._player.slowStop()):1==this._ninjaFish.foundCount&&this.ninjaFishFoundFinal(),this._ninjaFish.foundCount++):l.get_instance().gameState==E.PLAYING&&(a.get_isRightEnd()&&0<this._player.get_display().sprite.scaleX._value?
this._player.turnAround(-1):!a.get_isRightEnd()&&0>this._player.get_display().sprite.scaleX._value&&this._player.turnAround(1))},ninjaFishFoundFinal:function(){(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO");l.get_instance().gameState=E.CUTSCENE;this._endTutorial.show()},getPlayerConfig:function(){var a={},a=1==l.get_instance().subIndex?this.configAssets.playerRusty:2==l.get_instance().subIndex?this.configAssets.playerRuby:this.configAssets.playerGeneral;a.sounds=this.configAssets.playerShared.sounds;
a.properties.tutorial=this.configAssets.playerShared.properties.tutorial;a.properties.boostEffect=this.configAssets.playerShared.properties.boostEffect;return a},onFishTauntIntroCompleted:function(){this._ninjaFish.swimAcrossScreen()},onNinjaFishSwimFinished:function(){this._world.resetSpeed();l.get_instance().gameState=E.PLAYING;this._player.startMoving()},onNinjaFishEscapeFinished:function(){this._world.resetSpeed();l.get_instance().gameState=E.PLAYING;this._player.startMoving()},onPopupNextButtonPressed:function(){(null==
r.instance?r.instance=new r:r.instance).stopAllSounds();da.get_instance().ChangeScene("GAME_COMPLETE_SCENE")},onFishScareInputReceived:function(){},onNinjaFishScaredFinished:function(){this._fishTaunt.startOutro()},onTabletReturned:function(){t.PlaySound(this.configAssets.sounds.levelComplete,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this._endTutorial.dispose();this._player.end();this._popup.show()},dispose:function(){Ub._collisionWorld.dispose();W.prototype.dispose.call(this)},
__class__:Ub});var Wb=function(a){W.call(this,a);Wb._collisionWorld=new F(5);q.root.add(Wb._collisionWorld)};e["rustyrivets.scenes.games.FishingScene"]=Wb;Wb.__name__=["rustyrivets","scenes","games","FishingScene"];Wb.__super__=W;Wb.prototype=o(W.prototype,{onAdded:function(){W.prototype.onAdded.call(this);this._world=new rc(this.configAssets.world);this.backgroundEntity.addChild((new p).add(this._world));this._world.setBaseSpeed(new I(0,this.configAssets.player.properties.speed.y));this._laneController=
new sc(this.configAssets.laneController,!0);this.backgroundEntity.addChild((new p).add(this._laneController));var a=f.get_instance().assetPacks.get("fishing_level_chunks");this._chunkSpawner=new Hd(this.configAssets.chunkSpawner,this.backgroundEntity,this._laneController,a,this.configAssets.surfboard,this.foregroundEntity);this.backgroundEntity.addChild((new p).add(this._chunkSpawner));this._hud=new tc(this._mainConfig.hud);this.uiEntity.addChild((new p).add(this._hud));this.addBackgrounds();this.addPlayer();
this.addBubbles();this._popup=new uc(null);this.uiEntity.addChild((new p).add(this._popup));this._popup.disable();this._endTutorial=new Jd(this.configAssets.endTutorial);this.uiEntity.addChild((new p).add(this._endTutorial));this._endTutorial.hide();n.connect(J.collectibleHit,m(this,this.onCollectibleHit));n.connect(J.obstacleHit,m(this,this.onObstacleHit));n.connect(J.boostHit,m(this,this.onBoostHit));n.get_instance().addConnection(fa.finishChunkSpawned,m(this,this.onfinishChunkSpawned),!0);n.get_instance().addConnection(fa.surfboardReached,
m(this,this.onSurfboardReached),!0);n.connect(J.collectibleHitEffectComplete,m(this,this.onCollectibleHitEffectComplete));n.connect(fa.surfboardGrabFinished,m(this,this.onSurfboardGrabFinished));n.connect(J.popupNextButtonPressed,m(this,this.onPopupNextButtonPressed));n.connect(fa.playerEnteredScreen,m(this,this.onPlayerEnteredScreen));n.connect(fa.levelEndInputReceived,m(this,this.onLevelEndInputReceived));n.connect(fa.boostInputReceived,m(this,this.onBoostHitInputReceived));this._player.enterScreen()},
onStart:function(){W.prototype.onStart.call(this);l.get_instance().collectiblesCount=0;this._inputHandler=new vc(this.configVariables);this.owner.add(this._inputHandler)},tutorial:function(){W.prototype.tutorial.call(this);l.get_instance().gameState=E.TUTORIAL;this._player.tutorial(this.uiEntity)},start:function(){W.prototype.start.call(this);l.get_instance().gameState=E.PLAYING;this._player.startGame();this._chunkSpawner.start()},onPlayerEnteredScreen:function(){this._world.resetSpeed();this.tutorial()},
addPlayer:function(){this._player=new Md(this.configAssets.player,this._laneController);this.maingroundEntity.addChild((new p).add(this._player));this._player.setPositionByLane(2);var a=new qc(this.configAssets.boostEffect);this.maingroundEntity.addChild((new p).add(a));this._player.setBoostEffect(a)},addBackgrounds:function(){var a=new Xb(this.configAssets.scrollingBackground,!0,this.configVariables.backgroundSpeedModifer);this.backgroundEntity.addChild((new p).add(a));a=new Kd(this.configAssets.fishBackground,
this.configVariables.backgroundSpeedModifer.y);this.backgroundEntity.addChild((new p).add(a));a=new Ld(this.configAssets.wallBackgrounds,this.configVariables.backgroundSpeedModifer.y);this.backgroundEntity.addChild((new p).add(a));a=new Xb(this.configAssets.scrollingLeft);this.foregroundEntity.addChild((new p).add(a));a=new Xb(this.configAssets.scrollingRight);this.foregroundEntity.addChild((new p).add(a));a.get_display().sprite.x.set__(u.get_targetWidth()-60)},addBubbles:function(){for(var a=this.configAssets.bubbles.properties.count,
b=0;b<a;){b++;var d=new xc(this.configAssets.bubbles,this.configVariables.foregroundSpeedModifier);this.foregroundEntity.addChild((new p).add(d));d.get_display().sprite.setXY(0,u.get_targetHeight())}},onCollectibleHit:function(a){l.get_instance().collectiblesCount++;a.hit()},onCollectibleHitEffectComplete:function(a){this._hud.Collect(l.get_instance().collectiblesCount);this._chunkSpawner.despawn(a)},onObstacleHit:function(a){a.hit();a.get_isPassable()?this._world.temporarySlowDown():this._world.bounceBack()},
onBoostHit:function(a){this._world.speedBoost(this.configAssets.boost.properties.speedModifier,this.configAssets.boost.properties.boostDuration);a.hit()},onfinishChunkSpawned:function(){this._world.resetSpeed()},onSurfboardReached:function(a){l.get_instance().gameState=E.CUTSCENE;this._world.stop();this._endTutorial.show(a)},onSurfboardGrabFinished:function(){t.PlaySound(this.configAssets.sounds.levelComplete,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);this._popup.show()},
onPopupNextButtonPressed:function(){(null==r.instance?r.instance=new r:r.instance).stopAllSounds();da.get_instance().ChangeScene("BUILDING_INTRO_SCENE")},onLevelEndInputReceived:function(a){this._endTutorial.hide();this._player.surfboardReached(a)},onBoostHitInputReceived:function(a){a?this._world.manualBoost(this.configAssets.boost.properties.speedModifier):this._world.resetSpeed()},dispose:function(){Wb._collisionWorld.dispose();W.prototype.dispose.call(this)},__class__:Wb});var Da=function(a){Na.call(this,
void 0);this.assetPackName=a};e["rustyrivets.scenes.menus.BaseMenuScene"]=Da;Da.__name__=["rustyrivets","scenes","menus","BaseMenuScene"];Da.__super__=ra;Da.prototype=o(ra.prototype,{onAdded:function(){ra.prototype.onAdded.call(this);this.LoadConfigValues(this.assetPackName);(null==r.instance?r.instance=new r:r.instance).createAll(this.configSounds);this._configButtons=this.configAssets.buttons;this.backgroundEntity.addChild((new p).add(this.CreateSceneBackground(this.assetPackName)));l.get_instance().currentAssetPack=
this.assetPackName},__class__:Da});var Ke=function(a,b){hb.call(this,a,b)};e["rustyrivets.scenes.menus.LoadingScene"]=Ke;Ke.__name__=["rustyrivets","scenes","menus","LoadingScene"];Ke.__super__=hb;Ke.prototype=o(hb.prototype,{onAdded:function(){hb.prototype.onAdded.call(this);xa.FIRST_LOAD&&wa.sendGameEvent("onLoadingStart");this.StartLoading()},ConstructDisplay:function(){var a=f.get_instance().assetPacks.get(this.assetPackName).assetPack;this.backgroundEntity.addChild((new p).add(this.CreateSceneBackground(this.assetPackName)));
var b=w.CreateMoviePlayer(f.get_instance().assetPacks.get(this.assetPackName).assetPack,"atlas",this.configAssets.loadingScreen.clips.loadingLoop,!0);b.sprite.setXY(this.get_width()/2,this.get_height()/2-40);this.owner.addChild(b.entity);b=new cb(a.getTexture(this.configAssets.loadingScreen.progessBar.clips.background));b.centerAnchor();a=new cb(a.getTexture(this.configAssets.loadingScreen.progessBar.clips.fill));a.centerAnchor();this.progressBar=new kd(b,a);this.progressBar.position.setXY(this.get_width()/
2,this.get_height()/2+110);this.foregroundEntity.addChild((new p).add(this.progressBar))},StartLoading:function(){for(var a=0,b=this.loader.length;a<b;){var d=a++;f.get_instance().AddConnection(this.loader[d].progressChanged.connect(m(this,this.ProgressChanged)));this.loader[d].get(m(this,this.OnPackLoaded))}},ProgressChanged:function(){hb.prototype.ProgressChanged.call(this);this.progressBar.AddProgress(this.currentProgress);xa.FIRST_LOAD&&wa.sendGameEvent("getLoadingProgress",this.currentProgress)},
OnPackLoaded:function(a){hb.prototype.OnPackLoaded.call(this,a);xa.FIRST_LOAD&&(wa.sendGameEvent("onLoadingEnd"),xa.FIRST_LOAD=!1)},__class__:Ke});var Le=function(a){this._timeoutCounter=0;Da.call(this,a);this._mainConfig=f.get_instance().assetPacks.get("main").configAssets};e["rustyrivets.scenes.menus.PlayAgainScene"]=Le;Le.__name__=["rustyrivets","scenes","menus","PlayAgainScene"];Le.__super__=Da;Le.prototype=o(Da.prototype,{onAdded:function(){Da.prototype.onAdded.call(this);this._timeoutInterval=
this.configVariables.timeoutInterval;var a=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.configAssets.end.display.primary,!1);this.maingroundEntity.addChild(a.entity);a.moviePlayer.loop(this.configAssets.end.display.primary);this.addPlayAgainButton();t.PlaySound(this.configAssets.sounds.bgm,f.get_instance().assetPacks.get(this.assetPackName).assetPack);t.PlaySound(this.configAssets.sounds.timeout,f.get_instance().assetPacks.get(this.assetPackName).assetPack);
this._playAgainButton.Highlight()},onUpdate:function(a){Da.prototype.onUpdate.call(this,a);this._timeoutCounter>this._timeoutInterval&&(this._timeoutCounter=0,this._playAgainButton.Highlight(),t.PlaySound(this.configAssets.sounds.timeout,f.get_instance().assetPacks.get(this.assetPackName).assetPack));this._timeoutCounter+=a},addPlayAgainButton:function(){this._playAgainButton=new pb(w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",this._mainConfig.playAgainButton.clips.idle,
!0),this._mainConfig.playAgainButton,f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild((new p).add(this._playAgainButton));this._playAgainButton.addTextLocalized("BTN_PLAY_AGAIN");n.connect(this._playAgainButton.up,m(this,this.onPlayAgainPressed))},onPlayAgainPressed:function(){wa.sendGameEvent("onPlayAgain");this._playAgainButton.set_enabled(!1);(null==r.instance?r.instance=new r:r.instance).stopAllSounds();t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,
f.get_instance().assetPacks.get("main").assetPack);t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.playAgain,f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,function(){da.get_instance().ChangeScene("FISHING_INTRO_SCENE")}))},__class__:Le});var Me=function(a){this._timeout=0;Da.call(this,a)};e["rustyrivets.scenes.menus.TitleScene"]=Me;Me.__name__=["rustyrivets","scenes",
"menus","TitleScene"];Me.__super__=Da;Me.prototype=o(Da.prototype,{onAdded:function(){Da.prototype.onAdded.call(this);l.get_instance().collectiblesCount=0;this.addPlayButton()},onStart:function(){Da.prototype.onStart.call(this);wa.sendGameEvent("onTitleScreenStart");t.PlaySound(this.configAssets.sounds.bgm,f.get_instance().assetPacks.get(this.assetPackName).assetPack);t.PlaySound(this.configAssets.sounds.intro,f.get_instance().assetPacks.get(this.assetPackName).assetPack)},onUpdate:function(a){Da.prototype.onUpdate.call(this,
a);this._timeout>this.configVariables.timeoutInterval&&(this._playButton.Highlight(),t.PlaySound(this.configAssets.sounds.timeout,f.get_instance().assetPacks.get(this.assetPackName).assetPack),this._timeout=0);this._timeout+=a},addPlayButton:function(){this._playButton=new pb(w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",f.get_instance().assetPacks.get("main").configAssets.playButton.clips.idle,!0),f.get_instance().assetPacks.get("main").configAssets.playButton,f.get_instance().assetPacks.get("main").assetPack);
this.uiEntity.addChild((new p).add(this._playButton));this._playButton.addTextLocalized("BTN_PLAY");n.connect(this._playButton.up,m(this,this.playPressed))},playPressed:function(){this._playButton.set_enabled(!1);wa.sendGameEvent("onTitleScreenEnd");(null==r.instance?r.instance=new r:r.instance).stopAllSounds();t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,f.get_instance().assetPacks.get("main").assetPack);t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.play,
f.get_instance().assetPacks.get("main").assetPack);this.uiEntity.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,function(){da.get_instance().ChangeScene("FISHING_INTRO_SCENE")}))},__class__:Me});var h=e["rustyrivets.shared.constants.CollidableTypes"]={__ename__:["rustyrivets","shared","constants","CollidableTypes"],__constructs__:"COLLECTIBLE,BOOST,SCHOOL_OF_FISH,CRATE,SEAWEED,BARREL,WHIRLPOOL,WALL,WALL_UPPER_LEFT,WALL_UPPER_MID,WALL_UPPER_RIGHT,WALL_MID_LEFT,WALL_MID_MID,WALL_MID_RIGHT,WALL_LOWER_LEFT,WALL_LOWER_MID,WALL_LOWER_RIGHT,EMPTY".split(",")};
h.COLLECTIBLE=["COLLECTIBLE",0];h.COLLECTIBLE.toString=g;h.COLLECTIBLE.__enum__=h;h.BOOST=["BOOST",1];h.BOOST.toString=g;h.BOOST.__enum__=h;h.SCHOOL_OF_FISH=["SCHOOL_OF_FISH",2];h.SCHOOL_OF_FISH.toString=g;h.SCHOOL_OF_FISH.__enum__=h;h.CRATE=["CRATE",3];h.CRATE.toString=g;h.CRATE.__enum__=h;h.SEAWEED=["SEAWEED",4];h.SEAWEED.toString=g;h.SEAWEED.__enum__=h;h.BARREL=["BARREL",5];h.BARREL.toString=g;h.BARREL.__enum__=h;h.WHIRLPOOL=["WHIRLPOOL",6];h.WHIRLPOOL.toString=g;h.WHIRLPOOL.__enum__=h;h.WALL=
["WALL",7];h.WALL.toString=g;h.WALL.__enum__=h;h.WALL_UPPER_LEFT=["WALL_UPPER_LEFT",8];h.WALL_UPPER_LEFT.toString=g;h.WALL_UPPER_LEFT.__enum__=h;h.WALL_UPPER_MID=["WALL_UPPER_MID",9];h.WALL_UPPER_MID.toString=g;h.WALL_UPPER_MID.__enum__=h;h.WALL_UPPER_RIGHT=["WALL_UPPER_RIGHT",10];h.WALL_UPPER_RIGHT.toString=g;h.WALL_UPPER_RIGHT.__enum__=h;h.WALL_MID_LEFT=["WALL_MID_LEFT",11];h.WALL_MID_LEFT.toString=g;h.WALL_MID_LEFT.__enum__=h;h.WALL_MID_MID=["WALL_MID_MID",12];h.WALL_MID_MID.toString=g;h.WALL_MID_MID.__enum__=
h;h.WALL_MID_RIGHT=["WALL_MID_RIGHT",13];h.WALL_MID_RIGHT.toString=g;h.WALL_MID_RIGHT.__enum__=h;h.WALL_LOWER_LEFT=["WALL_LOWER_LEFT",14];h.WALL_LOWER_LEFT.toString=g;h.WALL_LOWER_LEFT.__enum__=h;h.WALL_LOWER_MID=["WALL_LOWER_MID",15];h.WALL_LOWER_MID.toString=g;h.WALL_LOWER_MID.__enum__=h;h.WALL_LOWER_RIGHT=["WALL_LOWER_RIGHT",16];h.WALL_LOWER_RIGHT.toString=g;h.WALL_LOWER_RIGHT.__enum__=h;h.EMPTY=["EMPTY",17];h.EMPTY.toString=g;h.EMPTY.__enum__=h;h.__empty_constructs__=[h.COLLECTIBLE,h.BOOST,h.SCHOOL_OF_FISH,
h.CRATE,h.SEAWEED,h.BARREL,h.WHIRLPOOL,h.WALL,h.WALL_UPPER_LEFT,h.WALL_UPPER_MID,h.WALL_UPPER_RIGHT,h.WALL_MID_LEFT,h.WALL_MID_MID,h.WALL_MID_RIGHT,h.WALL_LOWER_LEFT,h.WALL_LOWER_MID,h.WALL_LOWER_RIGHT,h.EMPTY];var Qb=function(){};e["rustyrivets.shared.classes.ChunkConverter"]=Qb;Qb.__name__=["rustyrivets","shared","classes","ChunkConverter"];Qb.convertConfigToChunks=function(a){for(var b=a.configVariables.width,d=a.configVariables.height,a=a.configAssets.chunks,c=[],e=0;e<a.length;){var f=a[e];++e;
for(var g=0,j=[],l=0;l<f.length;){var m=f[l];++l;for(var n=0,o=[],p=0;p<m.length;){var q=m[p];++p;if(function(){var a=q.toLowerCase();return Qb.chunkObjectMap.exists(a)}(this))if(function(){var a=q.toLowerCase();return Qb.chunkObjectMap.get(a)}(this)==h.WALL){var r=qb.convertToSpecificWallType(n,m,g);o.push(r)}else o.push(function(){var a=q.toLowerCase();return Qb.chunkObjectMap.get(a)}(this));else o.push(h.EMPTY);n++}j.push(o);g++}f=new Rd(j,b,d);c.push(f)}return c};var Ja=function(){};e["rustyrivets.shared.classes.WallCollisionDetector"]=
Ja;Ja.__name__=["rustyrivets","shared","classes","WallCollisionDetector"];Ja.isFrontEdgeCollision=function(a,b,d){var c=!1;if(Ja.isRightFrontEdge(a,b,d)||Ja.isLeftFrontEdge(a,b,d))Ja.getColliderCenterDifferenceY(a,b.collider)>0.5*b.collider.get_width()&&(c=!0);return c};Ja.positionPlayerFromWall=function(a,b){var d=0;b.collider.get_top()<a.get_collider().get_top()?(d=b.collider.get_bottom(),d+=0.5*a.get_collider().get_height(),d+=Ja._wallCollisionOffset):b.collider.get_bottom()>a.get_collider().get_bottom()&&
(d=b.collider.get_top(),d-=0.5*a.get_collider().get_height(),d-=Ja._wallCollisionOffset);a.get_display().sprite.y.set__(d)};Ja.isLeftFrontEdge=function(a,b,d){return a.get_right()>b.collider.get_left()&&a.get_right()<b.collider.get_right()&&(b.get_collidableType()==h.WALL_UPPER_LEFT||b.get_collidableType()==h.WALL_MID_LEFT||b.get_collidableType()==h.WALL_LOWER_LEFT)&&d?!0:!1};Ja.isRightFrontEdge=function(a,b,d){return a.get_left()<b.collider.get_right()&&a.get_left()>b.collider.get_left()&&(b.get_collidableType()==
h.WALL_UPPER_RIGHT||b.get_collidableType()==h.WALL_MID_RIGHT||b.get_collidableType()==h.WALL_LOWER_RIGHT)&&!d?!0:!1};Ja.getColliderCenterDifferenceY=function(a,b){var d=a.get_left()+0.5*a.get_width(),c=b.get_left()+0.5*b.get_width();return Math.abs(d-c)};var qb=function(){};e["rustyrivets.shared.classes.WallConverter"]=qb;qb.__name__=["rustyrivets","shared","classes","WallConverter"];qb.convertToSpecificWallType=function(a,b,d){d=qb.getRowMapKey(d);a=qb.getWallTypeValueIndex(a,b);return qb.wallTypeMap.get(d)[a]};
qb.getRowMapKey=function(a){return 0>=a?0:1==a?1:2};qb.getWallTypeValueIndex=function(a,b){return 0==a||"w"!=b[a-1]?0:a>=b.length-1||"w"!=b[a+1]?2:1};var Sd=function(){};e["rustyrivets.shared.interfaces.IGameplayInput"]=Sd;Sd.__name__=["rustyrivets","shared","interfaces","IGameplayInput"];Sd.prototype={__class__:Sd};var yc=function(){Lb.call(this)};e["rustyrivets.shared.classes.input.KeyboardInput"]=yc;yc.__name__=["rustyrivets","shared","classes","input","KeyboardInput"];yc.__interfaces__=[Sd];yc.__super__=
Lb;yc.prototype=o(Lb.prototype,{leftInput:function(){return this.getOnDown(c.Left)},rightInput:function(){return this.getOnDown(c.Right)},upInput:function(){return this.getOnDown(c.Up)},downInput:function(){return this.getOnDown(c.Down)},upInputStop:function(){return this.getOnUp(c.Up)},downInputStop:function(){return this.getOnUp(c.Down)},touchStart:function(){return!1},touchStop:function(){return!1},__class__:yc});var zc=function(){ob.call(this)};e["rustyrivets.shared.classes.input.TouchInput"]=
zc;zc.__name__=["rustyrivets","shared","classes","input","TouchInput"];zc.__interfaces__=[Sd];zc.__super__=ob;zc.prototype=o(ob.prototype,{leftInput:function(){return this.getGesture(I.get_left(),15)},rightInput:function(){return this.getGesture(I.get_right(),15)},upInput:function(){return this.getGesture(I.get_up(),15)},downInput:function(){return this.getGesture(I.get_down(),15)},upInputStop:function(){return!1},downInputStop:function(){return!1},touchStart:function(){return this.getOnDown()},touchStop:function(){return this.getOnUp()},
__class__:zc});var Pb=function(){this.index=0;v.call(this);this.stages=[];this.complete=new L;this.signalConnections=new M;this.config=f.get_instance().assetPacks.get("main").configAssets};e["rustyrivets.shared.components.tutorial.TutorialComponent"]=Pb;Pb.__name__=["rustyrivets","shared","components","tutorial","TutorialComponent"];Pb.__super__=v;Pb.prototype=o(v.prototype,{get_name:function(){return"TutorialComponent_7"},onStart:function(){v.prototype.onStart.call(this);for(var a=0,b=0,d=this.stages;b<
d.length;){var c=d[b];++b;this.signalConnections.set("stage"+a,c.complete.connect(m(this,this.StageComplete)).once());this.owner.addChild((new p).add(c));a++}this.stages[this.index].Start();n.get_instance().addConnection(q.hidden.get_changed(),m(this,this.EndTutorial));l.get_instance().hasPlayed(l.get_instance().currentAssetPack)&&(a=new pb(w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",f.get_instance().assetPacks.get("main").configAssets.skipButton.clips.idle,!0),f.get_instance().assetPacks.get("main").configAssets.skipButton,
f.get_instance().assetPacks.get("main").assetPack),this.owner.addChild((new p).add(a)),a.addTextLocalized("BTN_SKIP"),n.connect(a.up,m(this,this.SkipTutorial)),a.Highlight())},Stop:function(){this.TutorialComplete()},StageComplete:function(a){this.stages[this.index].completed=!0;this.index=a;this.index==this.stages.length?this.TutorialComplete():this.stages[this.index].Start()},TutorialComplete:function(){l.get_instance().playGame(l.get_instance().currentAssetPack);for(var a=0,b=this.stages;a<b.length;){var c=
b[a];++a;c.End()}(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO");J.tutorialComplete.emit();for(b=this.signalConnections.keys();b.hasNext();)c=b.next(),a=this.signalConnections.get(c),a.dispose(),this.signalConnections.remove(c);n.get_instance().removeConnection(q.hidden.get_changed(),m(this,this.EndTutorial));this.complete.emit();this.owner.dispose()},SkipTutorial:function(){t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,f.get_instance().assetPacks.get("main").assetPack);
this.index+1>=this.stages.length?(null==r.instance?r.instance=new r:r.instance).stopAllChannelSounds("VO"):this.TutorialComplete()},EndTutorial:function(){this.TutorialComplete()},__class__:Pb});var tc=function(a){j.call(this,a)};e["rustyrivets.shared.components.ui.Hud"]=tc;tc.__name__=["rustyrivets","shared","components","ui","Hud"];tc.__super__=j;tc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,
"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.setXY(this.get_width()+this.config.transform.position.x,this.config.transform.position.y);this.get_display().sprite.centerAnchor();this.score=(null==ha.instance?ha.instance=new ha:ha.instance).createAndProcessTextSprite("HUD",f.get_instance().assetPacks.get("main").assetPack,0,0);this.score.set_align(ba.Left);this.score.setXY(51,-26);this.score.set_text("0");this.get_display().entity.addChild((new p).add(this.score))},
Collect:function(a){this.get_display().moviePlayer.playOnce(this.config.display.collect,!0,!0);this.score.set_text(""+a)},SetScore:function(a){this.score.set_text(""+a)},__class__:tc});var pb=function(a,b,c){Oa.call(this,a,b,c)};e["rustyrivets.shared.components.ui.RRButton"]=pb;pb.__name__=["rustyrivets","shared","components","ui","RRButton"];pb.__super__=Mb;pb.prototype=o(Mb.prototype,{addTextLocalized:function(a){a=(null==ha.instance?ha.instance=new ha:ha.instance).createAndProcessTextSprite(a,
f.get_instance().assetPacks.get("main").assetPack,0,0,0.4);a.set_align(ba.Center);a.set_pointerEnabled(!1);a.setXY(this.get_view().sprite.getNaturalWidth()*this.get_view().sprite.scaleX._value/2+a.x._value,this.get_view().sprite.getNaturalHeight()*this.get_view().sprite.scaleY._value/2-a.getNaturalHeight()*a.scaleY._value/2+a.y._value);this.get_view().sprite.owner.addChild((new p).add(a))},__class__:pb});var E=e["rustyrivets.shared.constants.GameStates"]={__ename__:["rustyrivets","shared","constants",
"GameStates"],__constructs__:["INIT","TUTORIAL","CUTSCENE","PLAYING","GAME_OVER"]};E.INIT=["INIT",0];E.INIT.toString=g;E.INIT.__enum__=E;E.TUTORIAL=["TUTORIAL",1];E.TUTORIAL.toString=g;E.TUTORIAL.__enum__=E;E.CUTSCENE=["CUTSCENE",2];E.CUTSCENE.toString=g;E.CUTSCENE.__enum__=E;E.PLAYING=["PLAYING",3];E.PLAYING.toString=g;E.PLAYING.__enum__=E;E.GAME_OVER=["GAME_OVER",4];E.GAME_OVER.toString=g;E.GAME_OVER.__enum__=E;E.__empty_constructs__=[E.INIT,E.TUTORIAL,E.CUTSCENE,E.PLAYING,E.GAME_OVER];var ya=e["rustyrivets.shared.constants.GameTypes"]=
{__ename__:["rustyrivets","shared","constants","GameTypes"],__constructs__:["FISHING","BUILDING","EXPLORATION"]};ya.FISHING=["FISHING",0];ya.FISHING.toString=g;ya.FISHING.__enum__=ya;ya.BUILDING=["BUILDING",1];ya.BUILDING.toString=g;ya.BUILDING.__enum__=ya;ya.EXPLORATION=["EXPLORATION",2];ya.EXPLORATION.toString=g;ya.EXPLORATION.__enum__=ya;ya.__empty_constructs__=[ya.FISHING,ya.BUILDING,ya.EXPLORATION];var J=function(){};e["rustyrivets.shared.events.GameplayEvents"]=J;J.__name__=["rustyrivets","shared",
"events","GameplayEvents"];var ma=function(){};e["rustyrivets.shared.events.InputEvents"]=ma;ma.__name__=["rustyrivets","shared","events","InputEvents"];var l=function(){this.saveFile="gameData";this.clearSaveData=!1;this.gameState=E.INIT;this.gameType=ya.FISHING;this.collectiblesCount=0};e["rustyrivets.shared.models.GameModel"]=l;l.__name__=["rustyrivets","shared","models","GameModel"];l.get_instance=function(){null==l._instance&&(l._instance=new l);return l._instance};l.prototype={init:function(){this.clearSaveData&&
this.ClearSaveData();var a=q._platform.getStorage().get(this.saveFile);null!=a?this.gameData=a:(this.gameData=new Ne,q._platform.getStorage().set(this.saveFile,this.gameData))},ClearSaveData:function(){for(var a=this.gameData.games.iterator();a.hasNext();)a.next().played=!1;q._platform.getStorage().set(this.saveFile,this.gameData)},hasPlayed:function(a){return this.gameData.games.exists(a)&&this.gameData.games.get(a).played},playGame:function(a){this.gameData.games.exists(a)||this.gameData.games.set(a,
new Oe);this.gameData.games.get(a).played=!0;this.SaveGameData()},SaveGameData:function(){q._platform.getStorage().set(this.saveFile,this.gameData)},__class__:l};var V=function(){};e["rustyrivets.shared.models.WorldModel"]=V;V.__name__=["rustyrivets","shared","models","WorldModel"];var vc=function(a){j.call(this,a)};e["rustyrivets.shared.objects.InputHandler"]=vc;vc.__name__=["rustyrivets","shared","objects","InputHandler"];vc.__super__=j;vc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);
this._input=w.isMobile()?new zc:new yc;this.owner.add(Q.__cast(this._input,v))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._input.leftInput()?ma.inputMoveSignal.emit(I.get_left(),!0):this._input.rightInput()?ma.inputMoveSignal.emit(I.get_right(),!0):this._input.upInput()?ma.inputMoveSignal.emit(I.get_up(),!0):this._input.downInput()?ma.inputMoveSignal.emit(I.get_down(),!0):this._input.upInputStop()?ma.inputMoveSignal.emit(I.get_up(),!1):this._input.downInputStop()?ma.inputMoveSignal.emit(I.get_down(),
!1):this._input.touchStart()?ma.inputMoveSignal.emit(I.get_up(),!0):this._input.touchStop()&&ma.inputMoveSignal.emit(I.get_up(),!1)},__class__:vc});var Vb=function(a,b,c){null==c&&(c=0);this._offScreenBuffer=200;j.call(this,a);this._xMax=960;this._xMin=-960;this._speedMultiplier=new I;null==b?(this._speedMultiplier.x=1,this._speedMultiplier.y=1):(this._speedMultiplier.x=b.x,this._speedMultiplier.y=b.y);this._screenEdgeBuffer=c};e["rustyrivets.shared.objects.backgrounds.LeftRightScroller"]=Vb;Vb.__name__=
["rustyrivets","shared","objects","backgrounds","LeftRightScroller"];Vb.__super__=j;Vb.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=new ib;this.get_display().entity=new p;this.get_display().sprite=new y;this.get_display().entity.add(this.get_display().sprite);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this._images=[];for(var a=0;3>a;){a++;var b=nc["int"](0,Q.__cast(this.config.clips.length-1,fb));this._images.push(new cb(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack.getTexture(this.config.clips[b])))}a=
Math.floor((this._images.length-1+1)*Math.random());this.get_display().sprite.owner.addChild((new p).add(this._images[a]));b=this.getTrailingIndexLeft(a);this.get_display().sprite.owner.addChild((new p).add(this._images[b]));this._images[b].x.set__(-960+this._screenEdgeBuffer);a=this.getTrailingIndexRight(a);this.get_display().sprite.owner.addChild((new p).add(this._images[a]));this._images[a].x.set__(960-this._screenEdgeBuffer)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.move(a)},
move:function(a){for(var b=0,c=this._images.length;b<c;){var e=b++;this.fixPositionX(this._images[e],e)}b=0;for(c=this._images.length;b<c;){var e=b++,f=this._images[e].x;f.set__(f._value+V.worldSpeed.x*this._speedMultiplier.x*a);e=this._images[e].y;e.set__(e._value+V.worldSpeed.y*this._speedMultiplier.y*a)}},fixPositionX:function(a,b){if(0<V.movementDirection){if(a.x._value<this._xMin-this._offScreenBuffer){var c=this.getTrailingIndexRight(this.getTrailingIndexRight(b));a.x.set__(this._images[c].x._value+
960-this._screenEdgeBuffer)}}else 0>V.movementDirection&&a.x._value>this._xMax+this._offScreenBuffer&&(c=this.getTrailingIndexLeft(this.getTrailingIndexLeft(b)),a.x.set__(this._images[c].x._value-960+this._screenEdgeBuffer))},getTrailingIndexRight:function(a){var b=0;return b=a==this._images.length-1?0:a+1},getTrailingIndexLeft:function(a){var b=0;return b=0==a?this._images.length-1:a-1},__class__:Vb});var Xb=function(a,b,c){null==b&&(b=!1);this._isSwappable=!1;this._imageOffScreenCount=0;this._screenEdgeBuffer=
3;j.call(this,a);this._isSwappable=b;this._speedMultiplier=new I;null==c?(this._speedMultiplier.x=1,this._speedMultiplier.y=1):(this._speedMultiplier.x=c.x,this._speedMultiplier.y=c.y)};e["rustyrivets.shared.objects.backgrounds.VerticalScroller"]=Xb;Xb.__name__=["rustyrivets","shared","objects","backgrounds","VerticalScroller"];Xb.__super__=j;Xb.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=new ib;this.get_display().entity=new p;this.get_display().sprite=
new y;this.get_display().entity.add(this.get_display().sprite);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this._images=[];for(var a=0,b=this.config.clips.length;a<b;){var c=a++;this._images.push(new cb(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack.getTexture(this.config.clips[c])));this._images[c].setXY(0,560*c);if(0<c){var e=this._images[c].y;e.set__(e._value-c*this._screenEdgeBuffer)}this.get_display().entity.addChild((new p).add(this._images[c]))}this._yMax=
u.get_targetHeight()*(this._images.length-1);this._yMin=0.75*-this._yMax},onStart:function(){j.prototype.onStart.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.move(a)},move:function(a){for(var b=0,c=this._images.length;b<c;){var e=b++,f=this._images[e].y;f.set__(f._value+V.worldSpeed.y*a*this._speedMultiplier.y);this._images[e].y.set__(Math.floor(this._images[e].y._value))}a=0;for(b=this._images.length;a<b;)c=a++,this.fixPosition(this._images[c],c)},fixPosition:function(a,
b){if(a.y._value<=this._yMin){var c=this.getTrailingIndex(b);a.y.set__(this._images[c].y._value+560-this._screenEdgeBuffer);this.get_display().entity.addChild(a.owner);this._isSwappable&&(this._imageOffScreenCount++,2>=this._imageOffScreenCount&&(a.texture=f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack.getTexture(this.config.clips[2])))}},getTrailingIndex:function(a){var b=0;return b=0==a?this._images.length-1:a-1},__class__:Xb});var xc=function(a,b){this._isAnimating=
!1;this._maxTimeout=10;this._minTimeout=2;this._timeout=this._counter=0;j.call(this,a);this._minTimeout=a.properties.minTimeout;this._maxTimeout=a.properties.maxTimeout;this._speedMultiplier=new I;null!=b&&(this._speedMultiplier=b)};e["rustyrivets.shared.objects.bubbles.Bubbles"]=xc;xc.__name__=["rustyrivets","shared","objects","bubbles","Bubbles"];xc.__super__=j;xc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,
"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this._timeout=this.getNewTimeout();this.get_display().sprite.set_visible(!1)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(this._isAnimating){var b=this.get_display().sprite.x;b.set__(b._value+V.worldSpeed.x*this._speedMultiplier.x*a);b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*this._speedMultiplier.y*a)}else this._counter>this._timeout&&this.showBubbles(),
this._counter+=a},showBubbles:function(){this._isAnimating=!0;this.get_display().sprite.x.set__(nc["float"](0,u.get_targetWidth()));this.get_display().sprite.set_visible(!0);this.get_display().moviePlayer.playOnce(this.config.display.primary);n.connect(this.get_display().moviePlayer.completeSignal,m(this,this.onAnimationComplete))},getNewTimeout:function(){return nc["float"](this._minTimeout,this._maxTimeout)},onAnimationComplete:function(){n.disconnect(this.get_display().moviePlayer.completeSignal,
m(this,this.onAnimationComplete));this.get_display().sprite.set_visible(!1);this._isAnimating=!1;this._counter=0;this._timeout=this.getNewTimeout()},__class__:xc});var Z=function(a){this.isMoveable=!0;this.isAnimating=!1;j.call(this,a)};e["rustyrivets.shared.objects.collidables.BaseCollidable"]=Z;Z.__name__=["rustyrivets","shared","objects","collidables","BaseCollidable"];Z.__super__=j;Z.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,
"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();this.collider=this.getCollider();this.get_display().sprite.owner.addChild((new p).add(this.collider))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.isOffScreenTop()&&J.collidableExitScreenSignal.emit(this);if(this.isMoveable){var b=this.get_display().sprite.x;b.set__(b._value+V.worldSpeed.x*a);b=this.get_display().sprite.y;b.set__(b._value+V.worldSpeed.y*a)}},
reset:function(){this.get_display().sprite.set_visible(!0);this.collider.SetActive(!0);this.get_display().moviePlayer.loop(this.config.display.primary)},get_collidableType:function(){return this._collidableType},getCollider:function(){var a=new gb(this.config.transform.collider.size.x,this.config.transform.collider.size.y,"default");a.sprite.setXY(this.config.transform.collider.offset.x,this.config.transform.collider.offset.y);return a},isOffScreenTop:function(){return 0>this.get_display().sprite.y._value&&
0>this.collider.get_bottom()?!0:!1},__class__:Z});var Tb=function(a){this._direction=1;Z.call(this,a);this._collidableType=h.BOOST;this._speedModifier=a.properties.speedModifier};e["rustyrivets.shared.objects.collidables.Boost"]=Tb;Tb.__name__=["rustyrivets","shared","objects","collidables","Boost"];Tb.__super__=Z;Tb.prototype=o(Z.prototype,{onAdded:function(){Z.prototype.onAdded.call(this);n.connect(H.playerChangedDirection,m(this,this.onPlayerChangedDirection))},reset:function(){Z.prototype.reset.call(this);
this.get_display().sprite.setScaleXY(V.movementDirection,1);this.collider.sprite.setScaleXY(V.movementDirection,1)},hit:function(){t.PlaySound(this.config.sounds.hit,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},onPlayerChangedDirection:function(a){this._direction=a;this.get_display().moviePlayer.playOnce(this.config.display.flip);n.connect(this.get_display().moviePlayer.completeSignal,m(this,this.onFlipAnimationComplete))},onFlipAnimationComplete:function(){this.get_display().sprite.setScaleXY(this._direction,
1);this.collider.sprite.setScaleXY(this._direction,1);n.disconnect(this.get_display().moviePlayer.completeSignal,m(this,this.onFlipAnimationComplete));this.get_display().moviePlayer.loop(this.config.display.primary)},__class__:Tb});var Sb=function(a){Z.call(this,a);this._collidableType=h.COLLECTIBLE};e["rustyrivets.shared.objects.collidables.Collectible"]=Sb;Sb.__name__=["rustyrivets","shared","objects","collidables","Collectible"];Sb.__super__=Z;Sb.prototype=o(Z.prototype,{hit:function(){this.isAnimating=
!0;this.get_display().moviePlayer.playOnce(this.config.display.hit,!1);t.PlaySound(this.config.sounds.hit,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack);n.connect(this.get_display().moviePlayer.completeSignal,m(this,this.onCollectAnimationComplete))},onCollectAnimationComplete:function(){this.isAnimating=!1;n.disconnect(this.get_display().moviePlayer.completeSignal,m(this,this.onCollectAnimationComplete));J.collectibleHitEffectComplete.emit(this)},__class__:Sb});var Fe=
function(){this._mainConfig=f.get_instance().assetPacks.get("main").configAssets;this._sceneConfig=f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).configAssets};e["rustyrivets.shared.objects.collidables.CollidableFactory"]=Fe;Fe.__name__=["rustyrivets","shared","objects","collidables","CollidableFactory"];Fe.prototype={createCollidable:function(a){switch(a[1]){case 5:a=new Td(this._sceneConfig.obstacles.barrel);break;case 1:a=new Tb(this._sceneConfig.boost);break;case 0:a=new Sb(this._sceneConfig.collectible);
break;case 3:a=new Ud(this._sceneConfig.obstacles.crate);break;case 2:a=new Vd(this._sceneConfig.obstacles.schoolOfFish);break;case 4:a=new Wd(this._sceneConfig.obstacles.seaweed);break;case 6:a=new Xd(this._sceneConfig.obstacles.whirlpool);break;case 8:a=new Ia(this._sceneConfig.walls.wallUpperLeft,h.WALL_UPPER_LEFT);break;case 9:a=new Ia(this._sceneConfig.walls.wallUpperMid,h.WALL_UPPER_MID);break;case 10:a=new Ia(this._sceneConfig.walls.wallUpperRight,h.WALL_UPPER_RIGHT);break;case 11:a=new Ia(this._sceneConfig.walls.wallMidLeft,
h.WALL_MID_LEFT);break;case 12:a=new Ia(this._sceneConfig.walls.wallMidMid,h.WALL_MID_MID);break;case 13:a=new Ia(this._sceneConfig.walls.wallMidRight,h.WALL_MID_RIGHT);break;case 14:a=new Ia(this._sceneConfig.walls.wallLowerLeft,h.WALL_LOWER_LEFT);break;case 15:a=new Ia(this._sceneConfig.walls.wallLowerMid,h.WALL_LOWER_MID);break;case 16:a=new Ia(this._sceneConfig.walls.wallLowerRight,h.WALL_LOWER_RIGHT);break;default:a=null}return a},__class__:Fe};var aa=function(a){Z.call(this,a);this._isPassable=
a.properties.isPassable};e["rustyrivets.shared.objects.collidables.obstacles.Obstacle"]=aa;aa.__name__="rustyrivets,shared,objects,collidables,obstacles,Obstacle".split(",");aa.__super__=Z;aa.prototype=o(Z.prototype,{hit:function(){this.get_display().moviePlayer.loop(this.config.display.primary,!0);this.get_display().moviePlayer.playOnce(this.config.display.hit,!1,!0);t.PlaySound(this.config.sounds.hit,f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack)},get_isPassable:function(){return this._isPassable},
__class__:aa});var Td=function(a){aa.call(this,a);this._collidableType=h.BARREL};e["rustyrivets.shared.objects.collidables.obstacles.Barrel"]=Td;Td.__name__="rustyrivets,shared,objects,collidables,obstacles,Barrel".split(",");Td.__super__=aa;Td.prototype=o(aa.prototype,{__class__:Td});var Ud=function(a){aa.call(this,a);this._collidableType=h.CRATE};e["rustyrivets.shared.objects.collidables.obstacles.Crate"]=Ud;Ud.__name__="rustyrivets,shared,objects,collidables,obstacles,Crate".split(",");Ud.__super__=
aa;Ud.prototype=o(aa.prototype,{__class__:Ud});var Vd=function(a){aa.call(this,a);this._collidableType=h.SCHOOL_OF_FISH};e["rustyrivets.shared.objects.collidables.obstacles.SchoolOfFish"]=Vd;Vd.__name__="rustyrivets,shared,objects,collidables,obstacles,SchoolOfFish".split(",");Vd.__super__=aa;Vd.prototype=o(aa.prototype,{reset:function(){aa.prototype.reset.call(this);var a=1;0==Math.floor(2*Math.random())&&(a=-1);this.get_display().sprite.setScaleXY(a,1);this.collider.sprite.setScaleXY(a,1)},__class__:Vd});
var Wd=function(a){aa.call(this,a);this._collidableType=h.SEAWEED};e["rustyrivets.shared.objects.collidables.obstacles.Seaweed"]=Wd;Wd.__name__="rustyrivets,shared,objects,collidables,obstacles,Seaweed".split(",");Wd.__super__=aa;Wd.prototype=o(aa.prototype,{__class__:Wd});var Xd=function(a){aa.call(this,a);this._collidableType=h.WHIRLPOOL};e["rustyrivets.shared.objects.collidables.obstacles.Whirlpool"]=Xd;Xd.__name__="rustyrivets,shared,objects,collidables,obstacles,Whirlpool".split(",");Xd.__super__=
aa;Xd.prototype=o(aa.prototype,{__class__:Xd});var Ia=function(a,b){Z.call(this,a);this._collidableType=b};e["rustyrivets.shared.objects.collidables.walls.Wall"]=Ia;Ia.__name__="rustyrivets,shared,objects,collidables,walls,Wall".split(",");Ia.__super__=Z;Ia.prototype=o(Z.prototype,{isEdge:function(){var a=!0;if(this._collidableType==h.WALL_UPPER_MID||this._collidableType==h.WALL_MID_MID||this._collidableType==h.WALL_LOWER_MID)a=!1;return a},hit:function(){this.get_display().moviePlayer.playOnce(this.config.display.hit,
!1,!0)},__class__:Ia});var wc=function(a,b){Z.call(this,a);this._isRightEnd=b};e["rustyrivets.shared.objects.collidables.walls.WallEnd"]=wc;wc.__name__="rustyrivets,shared,objects,collidables,walls,WallEnd".split(",");wc.__super__=Z;wc.prototype=o(Z.prototype,{onUpdate:function(a){Z.prototype.onUpdate.call(this,a);this.get_isRightEnd()?this.collider.get_left()<u.get_targetWidth()&&H.wallEndReached.emit(this):0<this.collider.get_right()&&H.wallEndReached.emit(this)},get_isRightEnd:function(){return this._isRightEnd},
__class__:wc});var qc=function(a){j.call(this,a)};e["rustyrivets.shared.objects.effects.BoostEffect"]=qc;qc.__name__=["rustyrivets","shared","objects","effects","BoostEffect"];qc.__super__=j;qc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this.display=w.CreateMoviePlayer(f.get_instance().assetPacks.get(l.get_instance().currentAssetPack).assetPack,"atlas",this.config.display.primary,!0);this.owner.addChild(this.get_display().entity);this.get_display().sprite.centerAnchor();
this.hide();n.connect(J.worldSpeedReturnedToBase,m(this,this.onWorldSpeedReturnedToBase))},show:function(){this.get_display().sprite.set_visible(!0)},hide:function(){this.get_display().sprite.set_visible(!1)},onWorldSpeedReturnedToBase:function(){this.hide()},__class__:qc});var Rd=function(a,b,c){j.call(this,null);this.chunkGrid=a;this._numRows=c;this._numColumns=b};e["rustyrivets.shared.objects.level.Chunk"]=Rd;Rd.__name__=["rustyrivets","shared","objects","level","Chunk"];Rd.__super__=j;Rd.prototype=
o(j.prototype,{__class__:Rd});var sc=function(a,b){this._screenSize=0;j.call(this,a);this.numLanes=a.properties.numLanes;this.laneSize=a.properties.playArea/this.numLanes;this._screenSize=u.get_targetWidth();b||(this._screenSize=u.get_targetHeight());this._playAreaStart=this.getPlayAreaStart();this._playAreaEnd=this.getPlayAreaEnd();this.buildLaneCenters(this._screenSize,this.laneSize,a.properties.numLanes,a.properties.playArea)};e["rustyrivets.shared.objects.level.LaneController"]=sc;sc.__name__=
["rustyrivets","shared","objects","level","LaneController"];sc.__super__=j;sc.prototype=o(j.prototype,{getLaneCenterById:function(a){return this._laneCenters[a]},get_playAreaStart:function(){return this._playAreaStart},get_playAreaEnd:function(){return this._playAreaEnd},buildLaneCenters:function(a,b,c){this._laneCenters=[];for(a=0;a<c;){var e=a++,f=this._playAreaStart+0.5*b,f=f+e*b;this._laneCenters.push(f)}},getPlayAreaStart:function(){var a=0.5*(this._screenSize-this.config.properties.playArea);
return a+=this.config.properties.offset},getPlayAreaEnd:function(){return this._playAreaStart+this.config.properties.playArea},__class__:sc});var rc=function(a){this._horizontalDirection=1;j.call(this,a);this._currentSpeedModifier=new X(0);this._baseWorldSpeed=I.get_zero()};e["rustyrivets.shared.objects.level.World"]=rc;rc.__name__=["rustyrivets","shared","objects","level","World"];rc.__super__=j;rc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this)},
onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._currentSpeedModifier.update(a);V.speedScale=this._currentSpeedModifier._value;V.worldSpeed.x=this._baseWorldSpeed.x*this._currentSpeedModifier._value*this._horizontalDirection;V.worldSpeed.y=this._baseWorldSpeed.y*this._currentSpeedModifier._value},setBaseSpeed:function(a){this._baseWorldSpeed=a},setHorizontalDirection:function(a){this._horizontalDirection=1;0>a&&(this._horizontalDirection=-1);V.movementDirection=this._horizontalDirection},
stop:function(a){null==a&&(a=0.25);this.runStopSpeedScript(a)},resetSpeed:function(){this.runChangeSpeedScript(1,0.25)},bounceBack:function(){this.runChangeSpeedScript(this.config.properties.obstacleHitSpeedModifier,this.config.properties.obstacleHitDuration)},speedBoost:function(a,b){this.runChangeSpeedScript(a,b)},temporarySlowDown:function(){this.runChangeSpeedScript(this.config.properties.slowDownSpeedModifier,this.config.properties.slowDownDuration)},stopAndResume:function(a,b){this.runChangeSpeedScript(0,
0,a,b)},manualBoost:function(a){null!=this._speedScript&&(this._speedScript.owner.dispose(),this._speedScript=null);this._currentSpeedModifier.set__(a)},runChangeSpeedScript:function(a,b,c,e){null==e&&(e=1);null==c&&(c=0.25);var f=this;null!=this._speedScript&&this._speedScript.owner.dispose();this._speedScript=new Ga;this._speedScript.run(new Ha([new $(this._currentSpeedModifier,a,c),new Ib(b),new $(this._currentSpeedModifier,1,e),new la(function(){J.worldSpeedReturnedToBase.emit();f._speedScript.owner.dispose();
f._speedScript=null})]));this.owner.addChild((new p).add(this._speedScript))},runStopSpeedScript:function(a){var b=this;null!=this._speedScript&&this._speedScript.owner.dispose();this._speedScript=new Ga;this._speedScript.run(new Ha([new $(this._currentSpeedModifier,0,a),new la(function(){b._speedScript.owner.dispose();b._speedScript=null})]));this.owner.addChild((new p).add(this._speedScript))},__class__:rc});var Yd=function(a){this._isSpinning=!1;this._spinCounter=0;j.call(this,a);this._scrollTime=
a.properties.scrollTime};e["rustyrivets.shared.objects.ui.Counter"]=Yd;Yd.__name__=["rustyrivets","shared","objects","ui","Counter"];Yd.__super__=j;Yd.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this._score=new $b(new vb(f.get_instance().assetPacks.get("main").assetPack,f.get_instance().assetPacks.get("main").configAssets.fonts.main.name),"0");this._score.set_align(ba.Left);this._score.centerAnchor();this._score.set_pointerEnabled(!1);this._score.setXY(this.config.properties.textPosition.x,
this.config.properties.textPosition.y);this._score.setScale(0.7);this._score.set_visible(!1);this.owner.addChild((new p).add(this._score))},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._isSpinning&&(this._spinCounter>this._scrollTime&&(this._spinCounter=0,this._isSpinning=!1,this.hideSpinners(),this._score.set_visible(!0)),this._spinCounter+=a)},start:function(){var a=l.get_instance().collectiblesCount;9999<a&&(a=9999);this._score.set_text(""+a);this.addSpinners(this._score._text.length);
this._spinCounter=0;this._isSpinning=!0},addSpinners:function(a){this._spinners=[];for(var b=0;b<a;){var c=b++,e=this.config.clips[0];0<c%2&&(e=this.config.clips[1]);var e=w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",e,!0),g=e.sprite.y;g.set__(g._value+9);e.sprite.x.set__(this.config.properties.textPosition.x+32*c);this.owner.addChild(e.entity);this._spinners.push(e)}},hideSpinners:function(){for(var a=0,b=this._spinners;a<b.length;){var c=b[a];++a;c.sprite.set_visible(!1)}},
__class__:Yd});var uc=function(a){this._autoAdvanceTimeout=10;j.call(this,a);this._mainConfigAssets=f.get_instance().assetPacks.get("main").configAssets};e["rustyrivets.shared.objects.ui.Popup"]=uc;uc.__name__=["rustyrivets","shared","objects","ui","Popup"];uc.__super__=j;uc.prototype=o(j.prototype,{onAdded:function(){j.prototype.onAdded.call(this);this._container=new y;this.owner.add(this._container);this._backgroundFade=w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",
this._mainConfigAssets.backgroundFade.display.primary,!0);this._backgroundFade.sprite.set_visible(!1);this.owner.addChild(this._backgroundFade.entity);this._popupFrame=w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",f.get_instance().assetPacks.get("main").configAssets.popupFrame.display.primary,!0);this._popupFrame.sprite.setXY(0.5*this.get_width(),0.5*this.get_height());this.owner.addChild(this._popupFrame.entity);this._counter=new Yd(this._mainConfigAssets.popupFrame.counter);
this._popupFrame.entity.addChild((new p).add(this._counter));this.addNextButton()},onStart:function(){j.prototype.onStart.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);0!=(this._container._flags&2)&&(this._timeoutCounter>this._autoAdvanceTimeout&&(J.popupNextButtonPressed.emit(),this._timeoutCounter=0),this._timeoutCounter+=a)},disable:function(){this._container.set_visible(!1);this._popupFrame.sprite.y.set__(0.5*-u.get_targetHeight());this._timeoutCounter=0},show:function(){this._container.set_visible(!0);
this._backgroundFade.moviePlayer.playOnce(this._mainConfigAssets.backgroundFade.display.fadeIn);this._backgroundFade.sprite.set_visible(!0);this._counter.start();this._popupFrame.sprite.y.animateTo(0.5*u.get_targetHeight(),0.66,ab.backInOut)},addNextButton:function(){this._nextButton=new pb(w.CreateMoviePlayer(f.get_instance().assetPacks.get("main").assetPack,"atlas",f.get_instance().assetPacks.get("main").configAssets.summaryNextButton.clips.idle,!0),f.get_instance().assetPacks.get("main").configAssets.summaryNextButton,
f.get_instance().assetPacks.get("main").assetPack);this.owner.addChild((new p).add(this._nextButton));this._nextButton.addTextLocalized("BTN_NEXT");n.connect(this._nextButton.up,m(this,this.onNextPressed))},onNextPressed:function(){this._nextButton.set_enabled(!1);this._timeoutCounter=0;t.PlaySound(f.get_instance().assetPacks.get("main").configAssets.soundEffects.button_press,f.get_instance().assetPacks.get("main").assetPack);this.owner.addChild(w.Delay(f.get_instance().assetPacks.get("main").configVariables.buttonDelay,
function(){J.popupNextButtonPressed.emit()}))},__class__:uc});var t=function(){};e["rustyrivets.shared.utils.RRUtils"]=t;t.__name__=["rustyrivets","shared","utils","RRUtils"];t.PlaySound=function(a,b,c,e){null==c&&(c=!0);switch(a.playbackType){case "Random":for(var f=0,g=a.soundname.length;f<g;){var h=f++;K.endsWith(a.soundname[h],"_")&&(a.soundname[h]+=t.PlatformString())}break;case "All":f=0;for(g=a.soundname.length;f<g;)h=f++,K.endsWith(a.soundname[h],"_")&&(a.soundname[h]+=t.PlatformString());
break;case "Normal":K.endsWith(a.soundname,"_")&&(a.soundname+=t.PlatformString());break;case "Sequence":f=0;for(g=a.soundname.length;f<g;)h=f++,K.endsWith(a.soundname[h],"_")&&(a.soundname[h]+=t.PlatformString());break;case "Cycle":f=0;for(g=a.soundname.length;f<g;)h=f++,K.endsWith(a.soundname[h],"_")&&(a.soundname[h]+=t.PlatformString());break;default:K.endsWith(a.soundname,"_")&&(a.soundname+=t.PlatformString())}return(null==r.instance?r.instance=new r:r.instance).playSoundByConfig(a,b,c,e)};t.StopSound=
function(a){(null==r.instance?r.instance=new r:r.instance).stopSound(a.soundname)};t.PlatformString=function(){return w.isMobile()?"mbl":"dt"};var Ne=function(){this.games=new M};e["rustyrivets.shared.vo.GameDataVO"]=Ne;Ne.__name__=["rustyrivets","shared","vo","GameDataVO"];Ne.prototype={__class__:Ne};var Oe=function(){this.played=!1};e["rustyrivets.shared.vo.GameVO"]=Oe;Oe.__name__=["rustyrivets","shared","vo","GameVO"];Oe.prototype={__class__:Oe};var $e,df=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=
Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;e.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=e.String=String;String.__name__=["String"];e.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=e.Date=Date;Date.__name__=["Date"];var fb=e.Int={__name__:["Int"]},ef=e.Dynamic={__name__:["Dynamic"]},bf=e.Float=Number;bf.__name__=["Float"];var cf=e.Bool=Boolean;cf.__ename__=["Bool"];var ff=e.Class=
{__name__:["Class"]},gf={};z.Element="element";z.PCData="pcdata";z.CData="cdata";z.Comment="comment";z.DocType="doctype";z.ProcessingInstruction="processingInstruction";z.Document="document";lb.instance=new lb;ga.DISPATCHING_SENTINEL=new Db(null,null);q.root=new p;q.uncaughtError=new C;q.hidden=new oa(!1);q.volume=new X(1);q._platform=lb.instance;q._calledInit=!1;Ka.__meta__={obj:{assets:[{game_complete_scene:[{bytes:1258871,md5:"c71d84b39a219401d6ee980c84e7ded5",name:"atlas/atlas0.png"},{bytes:60872,
md5:"71174b7dd2f5db9ddd75c7c6d0ec22ef",name:"atlas/library.json"},{bytes:48902,md5:"aa0c96bcf1df4ad6044dd85ee7c04495",name:"audio/game_complete_cutscene.mp3"},{bytes:116173,md5:"a3d97ee14865c144d442dd756f434ff9",name:"audio/game_complete_cutscene.ogg"},{bytes:149867,md5:"01754f17e203149fda054f2c45c76eac",name:"background.png"},{bytes:531,md5:"03f8a5ad79d7b076b285779417ebc90b",name:"config.json"}],building_scene:[{bytes:153061,md5:"105374bdef2e06d1552505c9d93d076b",name:"atlas/atlas0.png"},{bytes:41237,
md5:"ae165ae637763b073bfeb39424dd3d96",name:"atlas/atlas1.png"},{bytes:7468,md5:"c1a82ace61acdfa95b89da37548c0415",name:"atlas/atlas2.png"},{bytes:39325,md5:"d822c7e77a620cb8e67579229ff6b9fb",name:"atlas/library.json"},{bytes:178129,md5:"b7164a4e6a5177741b7e98ffdc50a4d1",name:"audio/bgm.mp3"},{bytes:654988,md5:"e7c975bb994ba1e95446238d20b68f26",name:"audio/bgm.ogg"},{bytes:27987,md5:"43ebc495a3e2616ba3ee643d9a1dd056",name:"audio/building_complete.mp3"},{bytes:66312,md5:"492020492b8455f5474a68109d936218",
name:"audio/building_complete.ogg"},{bytes:19511,md5:"db67bb47826ca7121f1cb27abb06b98e",name:"audio/building_cutscene5.ogg"},{bytes:10012,md5:"b2dea4d067b6c9a8f41f42d569800cc5",name:"audio/building_decal.mp3"},{bytes:24665,md5:"02105871622165e8a965bc94846e5221",name:"audio/building_decal.ogg"},{bytes:11470,md5:"0a6271c505f392ce52f060e455cb5a45",name:"audio/building_paint_1.mp3"},{bytes:25563,md5:"cdcd09a6c2e954a46ff6d140a83a030b",name:"audio/building_paint_1.ogg"},{bytes:14721,md5:"0c8c056a8dca682611389e9e707676d7",
name:"audio/building_paint_2.mp3"},{bytes:34997,md5:"df9eb2676af8d90a2a7b315da21bb831",name:"audio/building_paint_2.ogg"},{bytes:13188,md5:"75d305672a23ca2da9ceccf6b22caff2",name:"audio/building_paint_3.mp3"},{bytes:32136,md5:"d2598ab07edee87d4187d1f10578e46f",name:"audio/building_paint_3.ogg"},{bytes:5619,md5:"f52e9af463e71b14a2f2af14b53b92a2",name:"audio/building_partPlaced1.mp3"},{bytes:12852,md5:"575016cf9433c055b54147441835009d",name:"audio/building_partPlaced1.ogg"},{bytes:4473,md5:"d669fc8dcd589bff06971b02e8826a96",
name:"audio/building_PartPlaced2.mp3"},{bytes:11216,md5:"4f387309be5c8c78297e6a252203dc12",name:"audio/building_PartPlaced2.ogg"},{bytes:6764,md5:"34ce71bc163bf5512c7689553d6e0065",name:"audio/building_side_1.mp3"},{bytes:15348,md5:"dc77b84a5e16e1f9024ecbabc80ecac6",name:"audio/building_side_1.ogg"},{bytes:11914,md5:"9556f2b50433d7bef8246b22ca635a9f",name:"audio/building_side_2.mp3"},{bytes:28071,md5:"ea138b84615a1ff0a28b6740d49fe03f",name:"audio/building_side_2.ogg"},{bytes:4967,md5:"20b46fd0ba1642fa7b4d13e259543ad7",
name:"audio/building_side_3.mp3"},{bytes:11804,md5:"fd4d1c65738179614bb4c44acee9f3c8",name:"audio/building_side_3.ogg"},{bytes:11498,md5:"05ef0a3ea8e7a21fe753bd47bc0f7e24",name:"audio/building_timeout.mp3"},{bytes:27057,md5:"02cdc11a07ec063b8e2bc25afcb3fa76",name:"audio/building_timeout.ogg"},{bytes:10066,md5:"55b77406f58c9c6f5a0ee15a4bcfe720",name:"audio/building_top_1.mp3"},{bytes:23389,md5:"50aa51c51e3e61fad8bb124a20f034cd",name:"audio/building_top_1.ogg"},{bytes:14514,md5:"87d3ca8bae794d788f056d76c390b007",
name:"audio/building_top_2.mp3"},{bytes:35753,md5:"1beacf89dcc2daab8b5f50e897daaf0b",name:"audio/building_top_2.ogg"},{bytes:6815,md5:"af0ee4400a7776e689dc22c9c7211819",name:"audio/building_top_3.mp3"},{bytes:15889,md5:"bc449bd0a9be1edd97d540c6a44ab341",name:"audio/building_top_3.ogg"},{bytes:14696,md5:"9bf3254891db9d4f3b74b6e253cd082a",name:"audio/building_tutorial_1.mp3"},{bytes:35513,md5:"25cabe8a111ff64858ce802e2d1d3aa5",name:"audio/building_tutorial_1.ogg"},{bytes:29127,md5:"c4a1b60f83eff785abf6d01a7c721063",
name:"audio/building_tutorial_2.mp3"},{bytes:67913,md5:"32e5e1c1a98e5519d89366a88fc9fca0",name:"audio/building_tutorial_2.ogg"},{bytes:23696,md5:"f5dabfee7680b1d5fde1d1b1380fc1a3",name:"audio/building_tutorial_3_dt.mp3"},{bytes:56153,md5:"919be78c143f55202d6d76d7cf8dbc3e",name:"audio/building_tutorial_3_dt.ogg"},{bytes:23540,md5:"e378f1f62c5eeb61c2cf86793890c43c",name:"audio/building_tutorial_3_mbl.mp3"},{bytes:55022,md5:"bac8faff1e73fbb72e34ffdea0a3e640",name:"audio/building_tutorial_3_mbl.ogg"},
{bytes:6815,md5:"a88fd435e04dacfe87131acff8f7bf64",name:"audio/building_tutorial_4.mp3"},{bytes:16761,md5:"1add6aff9b649d8453bbdc7b4b81d53d",name:"audio/building_tutorial_4.ogg"},{bytes:26974,md5:"cd86d55989d586e3159bcb00d2fe3d38",name:"audio/building_tutorial_5_dt.mp3"},{bytes:63533,md5:"e23125acc0aad9cd198d65c6dfd8b8c1",name:"audio/building_tutorial_5_dt.ogg"},{bytes:17842,md5:"849f9491240b485770376fb74ed7d1d7",name:"audio/building_tutorial_5_mbl.mp3"},{bytes:42465,md5:"e8908137999339acbe9832d40e36be16",
name:"audio/building_tutorial_5_mbl.ogg"},{bytes:13966,md5:"c21ac9edab952a73fa43cdf689e99440",name:"audio/building_tutorial_6.mp3"},{bytes:33827,md5:"4ccf589a63849062dfd1db09c9a4a196",name:"audio/building_tutorial_6.ogg"},{bytes:2383,md5:"0d79bd33dc8c07084a125fab5f8a2043",name:"audio/correct_place.mp3"},{bytes:12772,md5:"8e6f25d0c6f82f92da7f7abd0ee872cc",name:"audio/correct_place.ogg"},{bytes:1996,md5:"25d4369a3ec5302f92e6488ca92c5790",name:"audio/invalid_place.mp3"},{bytes:5555,md5:"a0fcf391539b8596263de3c74a3ae9a6",
name:"audio/invalid_place.ogg"},{bytes:2436,md5:"41b9a05d88f87826fc817c4d8536cd35",name:"audio/select_click.mp3"},{bytes:8851,md5:"966702355f81969d5a4abc32b8317c09",name:"audio/select_click.ogg"},{bytes:6491,md5:"b7b17660521c00ef80f4577706392ad6",name:"audio/sub_complete.mp3"},{bytes:34773,md5:"3e01a2f26ec75af805a923d9b33dd5f7",name:"audio/sub_complete.ogg"},{bytes:4931,md5:"93f3b1a9a840fb76c24b03a090783491",name:"audio/surfboard_click.mp3"},{bytes:26270,md5:"62cf68f314fd36382aea21ec085c0090",name:"audio/surfboard_click.ogg"},
{bytes:191835,md5:"371c0edc7616cefbd9a5a71e0ebc93c9",name:"background.png"},{bytes:7103,md5:"f026a82dc9bff4bd9a398a6b00f1f1bd",name:"config.json"}],fishing_scene:[{bytes:191545,md5:"6339b288120cc6a6f58fb61b3a4870a0",name:"atlas/atlas0.png"},{bytes:244567,md5:"94def91ec000b9ea0ccda148be49f89e",name:"atlas/atlas1.png"},{bytes:31150,md5:"997b9fc7d86afb451374e16af9065d51",name:"atlas/atlas2.png"},{bytes:153566,md5:"1514a869f965d6fd5705bf71d44dc57d",name:"atlas/library.json"},{bytes:2341,md5:"e5dd0ed65e7c835b10b91fb77e5918a3",
name:"audio/barrel_hit.mp3"},{bytes:8374,md5:"d2d87523557ea5ebd120b7e83449a401",name:"audio/barrel_hit.ogg"},{bytes:127640,md5:"545ff5ad1220465199e27cab4882c437",name:"audio/bgm.mp3"},{bytes:430597,md5:"199f6fc75736b086f7b0ea54977a1f08",name:"audio/bgm.ogg"},{bytes:3034,md5:"e0c9f25c843fe55fc984ee7ec00cf930",name:"audio/bolt_collected.mp3"},{bytes:11087,md5:"9b1421b0a4ae8e3d3684d6c84bfa2263",name:"audio/bolt_collected.ogg"},{bytes:4986,md5:"56ecf01cf731dbf8d0fee03918b3a9ca",name:"audio/boost_hit.mp3"},
{bytes:15271,md5:"91bc17f55c7d401d6ed6cbbbdf65f2f1",name:"audio/boost_hit.ogg"},{bytes:5067,md5:"684f4e6a24c3f54ebb18c01925534985",name:"audio/bubbles.mp3"},{bytes:17726,md5:"1fcc9324b7bb22b1756c8365d47cadde",name:"audio/bubbles.ogg"},{bytes:2439,md5:"5eb8d61e0b13b53a918d442289876a5a",name:"audio/crane_grab.mp3"},{bytes:8154,md5:"b55c9593eae5992c988c25fa5ff7fe18",name:"audio/crane_grab.ogg"},{bytes:4467,md5:"f38ce8af6297d2ac8883e8d422e2009e",name:"audio/crane_grab_release.mp3"},{bytes:12628,md5:"ad41fe2575b5c068eb718ebf31697f18",
name:"audio/crane_grab_release.ogg"},{bytes:4804,md5:"ae316c3831ff0fd2abdd2c82c7b11299",name:"audio/crane_hit.mp3"},{bytes:14921,md5:"e437207e41b633823ee65c34067169e2",name:"audio/crane_hit.ogg"},{bytes:7196,md5:"6563d07af8396f966a1026f251d92da7",name:"audio/crane_move_down.mp3"},{bytes:22962,md5:"7f88744bdea02f90ede4934ce2821a6a",name:"audio/crane_move_down.ogg"},{bytes:4154,md5:"2e4a77a5f527d1d5b4f6e8aa8c82af91",name:"audio/crane_move_sideways.mp3"},{bytes:13465,md5:"ee8fddbeb80cb4f719a907649e07d413",
name:"audio/crane_move_sideways.ogg"},{bytes:6078,md5:"0bf87421ebef42b84705f65f3eb6962e",name:"audio/crane_move_up.mp3"},{bytes:17076,md5:"c110133431a0071d2e0f12529dd8afeb",name:"audio/crane_move_up.ogg"},{bytes:2906,md5:"20afef70a4f39d2c166ecfd8423a7590",name:"audio/crate_hit.mp3"},{bytes:10689,md5:"bc4c46b7c4c36958300e3e512af52116",name:"audio/crate_hit.ogg"},{bytes:3374,md5:"be86fac83ae224f12b7b9834036a1301",name:"audio/fish_hit.mp3"},{bytes:10606,md5:"ee9012bf0feb8c7ecefa8812bcdb969a",name:"audio/fish_hit.ogg"},
{bytes:4709,md5:"57be7a29d1a036c1053a19b5018e14a5",name:"audio/fishing_boltHit.mp3"},{bytes:11634,md5:"133a778a53ea22db534fb60ae0d22f9e",name:"audio/fishing_boltHit.ogg"},{bytes:4863,md5:"174befbfe0b3461997ec354da9105e17",name:"audio/fishing_boostHit.mp3"},{bytes:11446,md5:"61744c5020428fb99a402cb98dae19f2",name:"audio/fishing_boostHit.ogg"},{bytes:14514,md5:"cd796ccd7de1e3dd7bdc95cd76934498",name:"audio/fishing_grabSurfboard_dt.mp3"},{bytes:33969,md5:"3e9ec7a01f507ad993cd3c63c9751007",name:"audio/fishing_grabSurfboard_dt.ogg"},
{bytes:14072,md5:"5b345077a406d0886b5c32371861a950",name:"audio/fishing_grabSurfboard_mbl.mp3"},{bytes:32852,md5:"da5fb69ccbb9f15773994542a3829c3e",name:"audio/fishing_grabSurfboard_mbl.ogg"},{bytes:5592,md5:"81e765a53df89b482254626981628de2",name:"audio/fishing_itemHit.mp3"},{bytes:14124,md5:"132a313333494bcbbdeea341f31caea2",name:"audio/fishing_itemHit.ogg"},{bytes:15345,md5:"7a2c0ee47d4156637c9003f0664e397c",name:"audio/fishing_levelEnd.mp3"},{bytes:38349,md5:"1aec5490279ede814273a6b0c28d0e32",
name:"audio/fishing_levelEnd.ogg"},{bytes:4577,md5:"dfe0e09e3a1d1a0c1e6cbe477b8fd21e",name:"audio/fishing_obstacleHit1.mp3"},{bytes:11350,md5:"302474c844375df9445d19259c4c4c2a",name:"audio/fishing_obstacleHit1.ogg"},{bytes:4603,md5:"e0b9c9b1fbcad45d8f5f8011db91410e",name:"audio/fishing_obstacleHit2.mp3"},{bytes:11607,md5:"e7d73ccb93fdf51a6471a8dc1df03088",name:"audio/fishing_obstacleHit2.ogg"},{bytes:8062,md5:"711d9c59f87d5b1c0964c03e8fac9214",name:"audio/fishing_obstacleHit3.mp3"},{bytes:19859,md5:"bd7196c3b5e7cb5f2af6635011902faf",
name:"audio/fishing_obstacleHit3.ogg"},{bytes:33527,md5:"bcd1b568097355ec9dfea550332257f4",name:"audio/fishing_surfboardFound.mp3"},{bytes:80079,md5:"cf05f059662c1394d7e6194a942e986e",name:"audio/fishing_surfboardFound.ogg"},{bytes:35170,md5:"e55d628ee19f29a2d8af7ea16595de9c",name:"audio/fishing_timeout1.mp3"},{bytes:81382,md5:"267be344a2c895b19462a45db8204bd7",name:"audio/fishing_timeout1.ogg"},{bytes:15658,md5:"01e576a256ab750a81e47f308a4eb21a",name:"audio/fishing_timeout2_dt.mp3"},{bytes:39111,
md5:"87ce28f0672f3bfa7b3bd92de4eedcee",name:"audio/fishing_timeout2_dt.ogg"},{bytes:11210,md5:"97c14d1e065109d85a5256d8ca20dc7e",name:"audio/fishing_timeout2_mbl.mp3"},{bytes:26191,md5:"9e4b162b03983d55dd1c631320013ac9",name:"audio/fishing_timeout2_mbl.ogg"},{bytes:28739,md5:"c9bba29aec748ead43de98a40933d17f",name:"audio/fishing_tutorial_1.mp3"},{bytes:69977,md5:"7131ed326161a954c1bcf6267a1dfadd",name:"audio/fishing_tutorial_1.ogg"},{bytes:21773,md5:"b29bbd05fa65979af990ad59437fca01",name:"audio/fishing_tutorial_2_dt.mp3"},
{bytes:52465,md5:"6d5d383288a79e4394af5f9786d416ff",name:"audio/fishing_tutorial_2_dt.ogg"},{bytes:19588,md5:"28a02be08f31d3f28c686f91ea482168",name:"audio/fishing_tutorial_2_mbl.mp3"},{bytes:45288,md5:"a675e8d84733a855b8b271e449377498",name:"audio/fishing_tutorial_2_mbl.ogg"},{bytes:4837,md5:"e23a7bee55a25dc5936eff91dd319944",name:"audio/fishing_tutorial_3.mp3"},{bytes:12463,md5:"0ba2cbbd75b2d85d4de80a4b8c89deee",name:"audio/fishing_tutorial_3.ogg"},{bytes:16906,md5:"8c709f67fae1555ac4aea5ca61aee10d",
name:"audio/fishing_tutorial_4.mp3"},{bytes:39753,md5:"07a44b0186850318942c30991bb964b6",name:"audio/fishing_tutorial_4.ogg"},{bytes:5071,md5:"803b89fbd1d0b8d7f2347a81e1ab58ed",name:"audio/fishing_tutorial_5.mp3"},{bytes:13310,md5:"e399729d7fe84030811b63ac736d4448",name:"audio/fishing_tutorial_5.ogg"},{bytes:8886,md5:"0c04afadf4c9b224c0b1be11b2ae6561",name:"audio/level_complete.mp3"},{bytes:44480,md5:"d407b017cf9424cf6b9d0305cc33626a",name:"audio/level_complete.ogg"},{bytes:3556,md5:"44cfba99dffca62e69090c5708aefa08",
name:"audio/ninja_fish_swim.mp3"},{bytes:18362,md5:"c656d9735bc69317e3c5f01272374246",name:"audio/ninja_fish_swim.ogg"},{bytes:4519,md5:"f8ccf147500cfda3ca5373c20122cb4e",name:"audio/seaweed_hit.mp3"},{bytes:16847,md5:"9081ad808e90141d0edb37a5cdc51175",name:"audio/seaweed_hit.ogg"},{bytes:195350,md5:"275bc44295a263aa36a8c7fbf7990432",name:"bg_fish1.png"},{bytes:140792,md5:"a69a3f4fa3a7470d352991d789d51e16",name:"bg_fish2.png"},{bytes:190,md5:"6b598ea3a4800cdf238a524e38f936db",name:"bg_fish3.png"},
{bytes:21459,md5:"03bf3cb2c217ab83bbceaf859c225115",name:"bg_fishLf1.PNG"},{bytes:22323,md5:"091b6179e7dfd9fcdafe5c680ebb44e5",name:"bg_fishLf2.PNG"},{bytes:18466,md5:"69bdbeb675fb24321277cb52e8c373b1",name:"bg_fishRt1.PNG"},{bytes:18805,md5:"58282d9b9cac34ff2250c209bbd455db",name:"bg_fishRt2.PNG"},{bytes:9354,md5:"e1394ca25cc98e58609a2a6e8942e04f",name:"config.json"}],fishing_intro_scene:[{bytes:831732,md5:"8ed0485655a74c340ff854c2c0b4c2b0",name:"atlas/atlas0.png"},{bytes:783015,md5:"5bc6470a85850abce53e5e444a7a68e9",
name:"atlas/atlas1.png"},{bytes:233311,md5:"ffe8a6d0507ef59f387a050590b9accb",name:"atlas/atlas2.png"},{bytes:836331,md5:"7f44887b84fc0ffc3dfa093fe2f9665e",name:"atlas/atlas3.png"},{bytes:540797,md5:"0027e37354a45293644489cfd039e08e",name:"atlas/atlas4.png"},{bytes:281398,md5:"6b19e9edac843bc94a3a9ba05c8f756a",name:"atlas/library.json"},{bytes:184049,md5:"accc7d47ff41a2567821d7dfc3d6944c",name:"audio/intro_cutscene_sfx.mp3"},{bytes:443506,md5:"1f5a727ab40d48af718ea022911053dc",name:"audio/intro_cutscene_sfx.ogg"},
{bytes:149867,md5:"01754f17e203149fda054f2c45c76eac",name:"background.png"},{bytes:471,md5:"4cf97bbe9b02adab958bbd0cfb8d709b",name:"config.json"}],play_again_scene:[{bytes:888772,md5:"ba66c05d8a3621e267c73b1281a59936",name:"atlas/atlas0.png"},{bytes:426098,md5:"9c3b205e7d9cf4b8470cf50ca8277b38",name:"atlas/atlas1.png"},{bytes:13364,md5:"1ec9244bb86809c25f527effe7ffae0f",name:"atlas/library.json"},{bytes:125345,md5:"a6d5be6a5cce16def1f8e417daaa1b3c",name:"audio/bgm.mp3"},{bytes:478513,md5:"6cc8ce836576f5f275827043bd4c6fd6",
name:"audio/bgm.ogg"},{bytes:15006,md5:"bd9a957105186b6c9abee0f4a65059e0",name:"audio/playagain_timeout_dt.mp3"},{bytes:37788,md5:"437977a42dae6ab6574368d76a64cf0f",name:"audio/playagain_timeout_dt.ogg"},{bytes:16024,md5:"f8687cec4f7b64c229774f9e4c5acc47",name:"audio/playagain_timeout_mbl.mp3"},{bytes:36602,md5:"73e624faa96e2cbce13d01b352139c9a",name:"audio/playagain_timeout_mbl.ogg"},{bytes:136512,md5:"fdc4540b471d71fcd227db4d84a78a7d",name:"background.png"},{bytes:829,md5:"ce00029c03b491df44fb7526f4fddcf3",
name:"config.json"}],fishing_level_chunks:[{bytes:1245,md5:"3dccfe27914424c6d7eee2794fe5dd22",name:"fishingLevelChunks.json"}],exploration_scene:[{bytes:283710,md5:"c4c40e60770e10a7a16941e2c8e15f34",name:"atlas/atlas0.png"},{bytes:299559,md5:"417f6671bbaeddf44f199ee9b31e6947",name:"atlas/atlas1.png"},{bytes:63531,md5:"ccbb13e94c68b1c19355becaf45e453f",name:"atlas/atlas2.png"},{bytes:364664,md5:"200a3708a56fac00cd902f9f7cc78f09",name:"atlas/library.json"},{bytes:2341,md5:"e5dd0ed65e7c835b10b91fb77e5918a3",
name:"audio/barrel_hit.mp3"},{bytes:8374,md5:"d2d87523557ea5ebd120b7e83449a401",name:"audio/barrel_hit.ogg"},{bytes:171304,md5:"0b459d97e0b2edafa0284d58452289c2",name:"audio/bgm.mp3"},{bytes:617771,md5:"ae20cd2da1e1b5439c35e0604dc7f321",name:"audio/bgm.ogg"},{bytes:3034,md5:"e0c9f25c843fe55fc984ee7ec00cf930",name:"audio/bolt_collected.mp3"},{bytes:11087,md5:"9b1421b0a4ae8e3d3684d6c84bfa2263",name:"audio/bolt_collected.ogg"},{bytes:4986,md5:"56ecf01cf731dbf8d0fee03918b3a9ca",name:"audio/boost_hit.mp3"},
{bytes:15271,md5:"91bc17f55c7d401d6ed6cbbbdf65f2f1",name:"audio/boost_hit.ogg"},{bytes:5067,md5:"684f4e6a24c3f54ebb18c01925534985",name:"audio/bubbles.mp3"},{bytes:17726,md5:"1fcc9324b7bb22b1756c8365d47cadde",name:"audio/bubbles.ogg"},{bytes:2906,md5:"20afef70a4f39d2c166ecfd8423a7590",name:"audio/crate_hit.mp3"},{bytes:10689,md5:"bc4c46b7c4c36958300e3e512af52116",name:"audio/crate_hit.ogg"},{bytes:7230,md5:"dfffa9151d355b0b08315e22b3080fad",name:"audio/exploration_boostHit1.mp3"},{bytes:16339,md5:"aa38a9f6e6d49add0f78c7a4538504ab",
name:"audio/exploration_boostHit1.ogg"},{bytes:11081,md5:"0ef1beba648f394beeb05f9c68859c29",name:"audio/exploration_boostHit2.mp3"},{bytes:26623,md5:"b30a8ad918957bd7fc6cd575882f7d00",name:"audio/exploration_boostHit2.ogg"},{bytes:11992,md5:"d4e774cf5d86d48c9880f0e7518baafa",name:"audio/exploration_fishFound1.mp3"},{bytes:28558,md5:"58959a43c2e0b7d666c89b46c77a40d1",name:"audio/exploration_fishFound1.ogg"},{bytes:17036,md5:"f074e85465d6609df418d02eae7a286d",name:"audio/exploration_fishFound2.mp3"},
{bytes:39963,md5:"bcc976ef850492968cc022146fc5207f",name:"audio/exploration_fishFound2.ogg"},{bytes:10142,md5:"fff4e06e2dec5b287b3698baf855ed08",name:"audio/exploration_fishScared.mp3"},{bytes:25236,md5:"d7d77dc8fb5d60d67ac5db38a97ee108",name:"audio/exploration_fishScared.ogg"},{bytes:18544,md5:"e7288957168c85d29bbe45c2bea6409a",name:"audio/exploration_grabTablet_dt.mp3"},{bytes:44049,md5:"24256212680d253f6d7d1f0d54931c93",name:"audio/exploration_grabTablet_dt.ogg"},{bytes:20081,md5:"2066504117a69688fd9c62095c055a41",
name:"audio/exploration_grabTablet_mbl.mp3"},{bytes:47334,md5:"f7803bfc7498203733e5ca28b56b9d92",name:"audio/exploration_grabTablet_mbl.ogg"},{bytes:13915,md5:"74f40d46b56ec44da12f939906160a79",name:"audio/exploration_obstacleHit1_dt.mp3"},{bytes:33598,md5:"aa48d2c609033c5ee71a94cfa6548223",name:"audio/exploration_obstacleHit1_dt.ogg"},{bytes:11393,md5:"dca405a396f54f3052ad08518979ed44",name:"audio/exploration_obstacleHit1_mbl.mp3"},{bytes:27380,md5:"b95a4915bb2569c3af0d55cecdd6eec6",name:"audio/exploration_obstacleHit1_mbl.ogg"},
{bytes:4682,md5:"b71c4ce76fe482f7d246ef845c3a0ecb",name:"audio/exploration_obstacleHit2.mp3"},{bytes:11596,md5:"8893114c94595b37eb7bfeac8c334075",name:"audio/exploration_obstacleHit2.ogg"},{bytes:4369,md5:"b94af9ff4d561db034089e24e7aa73dc",name:"audio/exploration_obstacleHit3.mp3"},{bytes:11436,md5:"7099a098da318fc991ed9e9e3888d325",name:"audio/exploration_obstacleHit3.ogg"},{bytes:5020,md5:"89e31b0196be98ba0e7f1119f8325a37",name:"audio/exploration_obstacleHit4.mp3"},{bytes:12204,md5:"be84d687ad8533f3a0b625b85fae603a",
name:"audio/exploration_obstacleHit4.ogg"},{bytes:5202,md5:"058e75226c8072221cb62d3ee0c827a1",name:"audio/exploration_obstacleHit5.mp3"},{bytes:12585,md5:"e952a9ea4729942f4f151bfed1682843",name:"audio/exploration_obstacleHit5.ogg"},{bytes:5435,md5:"a22e0e9b9321d6fe87ea99b6c00058ae",name:"audio/exploration_obstacleHit6.mp3"},{bytes:13645,md5:"781c953289a8ccbc2c16bdf5ba68f2bf",name:"audio/exploration_obstacleHit6.ogg"},{bytes:8192,md5:"dfa3f8577242ee5e6be9cc44ceb94ed1",name:"audio/exploration_obstacleHit7.mp3"},
{bytes:19375,md5:"2877416d9a81f4ecc2c1bccb50868534",name:"audio/exploration_obstacleHit7.ogg"},{bytes:11079,md5:"d187bfba38a24e3d0b76b1b208c9e54f",name:"audio/exploration_scareFish_dt.mp3"},{bytes:27891,md5:"b3750b663be64ca3c5a4c28872339ae3",name:"audio/exploration_scareFish_dt.ogg"},{bytes:11783,md5:"cd26730ef013ff31bb3b098b06f3dced",name:"audio/exploration_scareFish_mbl.mp3"},{bytes:27809,md5:"299ccf2f308f4af20fdcb91b3f6d05ce",name:"audio/exploration_scareFish_mbl.ogg"},{bytes:12825,md5:"aaff4b6295286d67f740b93d2cd6b669",
name:"audio/exploration_tabletFound1.mp3"},{bytes:30635,md5:"3892fd9a00e80ce1ef4dca33bb32f811",name:"audio/exploration_tabletFound1.ogg"},{bytes:10769,md5:"548332c993e65d61f46943b9eb7fc166",name:"audio/exploration_tabletFound2.mp3"},{bytes:25696,md5:"2d4a7d921011aceb41b9caa13d989f6d",name:"audio/exploration_tabletFound2.ogg"},{bytes:15530,md5:"de30e3224d0fd28be55b1e29c379db4d",name:"audio/exploration_timeout1_dt.mp3"},{bytes:36185,md5:"e70e16a4d8e7aba712515a51b940c2ac",name:"audio/exploration_timeout1_dt.ogg"},
{bytes:13085,md5:"8ec76bf7c994edc3ab393b1b5b53e8ac",name:"audio/exploration_timeout1_mbl.mp3"},{bytes:29534,md5:"81a1f96b92681bc3ba71313efd14cc8f",name:"audio/exploration_timeout1_mbl.ogg"},{bytes:20447,md5:"75e72475f07f86257935d449dcb2a08d",name:"audio/exploration_timeout2_dt.mp3"},{bytes:47881,md5:"9c54b9ad68c5dd96a95ab55567048ac6",name:"audio/exploration_timeout2_dt.ogg"},{bytes:16282,md5:"f4ea16e0840b96b27bd70ff22204d7de",name:"audio/exploration_timeout2_mbl.mp3"},{bytes:39065,md5:"8ff3df5e84c499761233d41e0ace1200",
name:"audio/exploration_timeout2_mbl.ogg"},{bytes:8271,md5:"18871c47dc294f62ce03f17f0cb34337",name:"audio/exploration_timeout3.mp3"},{bytes:19743,md5:"4c0127b003c1717b8a0981e7373a622e",name:"audio/exploration_timeout3.ogg"},{bytes:9156,md5:"44b0cf3d621540c1626ad78f98b2522d",name:"audio/exploration_timeout4.mp3"},{bytes:21796,md5:"5edf86059c68ce9675c2257c32168b36",name:"audio/exploration_timeout4.ogg"},{bytes:13136,md5:"8f7ee6df05883750cb770f2620a57296",name:"audio/exploration_tutorial_1.mp3"},{bytes:31385,
md5:"99b5c8db01e71afe90c9cceb088b471b",name:"audio/exploration_tutorial_1.ogg"},{bytes:8272,md5:"d075a4c4e9cc4c54f542d1a701618189",name:"audio/exploration_tutorial_2.mp3"},{bytes:20350,md5:"d2c2eef70d5a6f1a08959af0370d36de",name:"audio/exploration_tutorial_2.ogg"},{bytes:27990,md5:"daf001f459875be923ce7174b5769b3f",name:"audio/exploration_tutorial_3.mp3"},{bytes:65684,md5:"8342d7d6e5b5b3062c98aec08f8c6445",name:"audio/exploration_tutorial_3.ogg"},{bytes:20131,md5:"69d8cb4bd375dd999e119f078b72f0d2",
name:"audio/exploration_tutorial_4_dt.mp3"},{bytes:46741,md5:"726994f438d992cdfddc2cc6a1226109",name:"audio/exploration_tutorial_4_dt.ogg"},{bytes:12769,md5:"793dac0818268f4cd9bbae76276c3522",name:"audio/exploration_tutorial_4_mbl.mp3"},{bytes:30502,md5:"029a8fa58acdace9a4721ad6e3b61fd1",name:"audio/exploration_tutorial_4_mbl.ogg"},{bytes:20863,md5:"b2511b7aacd88548f672d636187fe489",name:"audio/exploration_tutorial_5_dt.mp3"},{bytes:46633,md5:"271e884ba804f1e905a87a8247ffa534",name:"audio/exploration_tutorial_5_dt.ogg"},
{bytes:14126,md5:"bcd81d5b3a64266139aae573ec0dcfba",name:"audio/exploration_tutorial_5_mbl.mp3"},{bytes:32640,md5:"075f6460904603befd432f45d13dd1a8",name:"audio/exploration_tutorial_5_mbl.ogg"},{bytes:15344,md5:"f5c0144ea5f7646178642496e777ac0f",name:"audio/exploration_tutorial_6.mp3"},{bytes:36773,md5:"21e4c7ad5bfddbd574f8c708902cd988",name:"audio/exploration_tutorial_6.ogg"},{bytes:17606,md5:"c196068bcf0c03029901a89777ed889d",name:"audio/exploration_tutorial_7.mp3"},{bytes:44468,md5:"142e39c05ea26bb9d94f8909545a002c",
name:"audio/exploration_tutorial_7.ogg"},{bytes:3374,md5:"be86fac83ae224f12b7b9834036a1301",name:"audio/fish_hit.mp3"},{bytes:10606,md5:"ee9012bf0feb8c7ecefa8812bcdb969a",name:"audio/fish_hit.ogg"},{bytes:4709,md5:"57be7a29d1a036c1053a19b5018e14a5",name:"audio/fishing_boltHit.mp3"},{bytes:11634,md5:"133a778a53ea22db534fb60ae0d22f9e",name:"audio/fishing_boltHit.ogg"},{bytes:8886,md5:"0c04afadf4c9b224c0b1be11b2ae6561",name:"audio/level_complete.mp3"},{bytes:44480,md5:"d407b017cf9424cf6b9d0305cc33626a",
name:"audio/level_complete.ogg"},{bytes:3737,md5:"0b195e6c2aad89619cd950fb32f4c2c3",name:"audio/ninja_fish_escape.mp3"},{bytes:22307,md5:"78bb34244b17718056b6369eb809ad5c",name:"audio/ninja_fish_escape.ogg"},{bytes:4882,md5:"818c47feeac768ff96dbcb9c66a6a89b",name:"audio/ninja_fish_scared.mp3"},{bytes:27104,md5:"5a2439995ceb7595815a2b1fc08337cd",name:"audio/ninja_fish_scared.ogg"},{bytes:3556,md5:"44cfba99dffca62e69090c5708aefa08",name:"audio/ninja_fish_swim.mp3"},{bytes:18362,md5:"c656d9735bc69317e3c5f01272374246",
name:"audio/ninja_fish_swim.ogg"},{bytes:6087,md5:"779d18a6b0f3cb8608e33a54771eea49",name:"audio/NinjaFish_CU.mp3"},{bytes:20340,md5:"c1262e2e74b3a5f3e9069b0241ddaa76",name:"audio/NinjaFish_CU.ogg"},{bytes:4552,md5:"6f4a85663926caa88c7d0b53a6e8fbcb",name:"audio/Ruby_Extra_01.mp3"},{bytes:11108,md5:"7bc600abbd8b19802bee9846e34aceda",name:"audio/Ruby_Extra_01.ogg"},{bytes:4369,md5:"8d568e19f91338b88617ab0f778d778f",name:"audio/Ruby_Extra_03.mp3"},{bytes:10799,md5:"7497af3266d176f0de49f815111a9393",
name:"audio/Ruby_Extra_03.ogg"},{bytes:6371,md5:"d87a3139eab6d19bd57fb159db1810f2",name:"audio/Rusty_extra_06.mp3"},{bytes:15585,md5:"7f1bcfa1654fc0cdcf4df0dbd0a23678",name:"audio/Rusty_extra_06.ogg"},{bytes:4519,md5:"f8ccf147500cfda3ca5373c20122cb4e",name:"audio/seaweed_hit.mp3"},{bytes:16847,md5:"9081ad808e90141d0edb37a5cdc51175",name:"audio/seaweed_hit.ogg"},{bytes:4128,md5:"8f6113758aa7408c3f32b97fd0df0909",name:"audio/sub_hit.mp3"},{bytes:13386,md5:"f2cbba392eca68300fc26cf6939ec947",name:"audio/sub_hit.ogg"},
{bytes:11096,md5:"46491498810f4a5ca1965f99d9276e43",name:"audio/sub_jet.mp3"},{bytes:27639,md5:"6ba61a17d29692ba2fb87458e59895e4",name:"audio/sub_jet.ogg"},{bytes:19E3,md5:"8ee00244a45cb161b00176bde87b459a",name:"audio/sub_move.mp3"},{bytes:51950,md5:"22a5477bd273cc505b0b1ce45b1c310b",name:"audio/sub_move.ogg"},{bytes:4258,md5:"1b8779e4750df29e7de306e6494ebb75",name:"audio/sub_turn.mp3"},{bytes:19165,md5:"a0fc75d3381c835e3567b4959836d958",name:"audio/sub_turn.ogg"},{bytes:5349,md5:"42572d8fc701a9bb8aff428ab0b29563",
name:"audio/wall_hit.mp3"},{bytes:15817,md5:"385547213be7b943e48efbceeae63602",name:"audio/wall_hit.ogg"},{bytes:169304,md5:"88023e03fe2fd4c0a8dd2c642b20274e",name:"bg_explore1.PNG"},{bytes:171105,md5:"4a633b3f641002bb75b9577535f2f31d",name:"bg_explore2.PNG"},{bytes:172867,md5:"3cebd47cf7b1c6b0a8d788a100136f69",name:"bg_explore3.PNG"},{bytes:31966,md5:"21652cb6b79cc290398d6e4d4ba16987",name:"bg_exploreBtm1.PNG"},{bytes:30211,md5:"498694e0c078154ac777e6d10b53f4ae",name:"bg_exploreBtm2.PNG"},{bytes:60172,
md5:"9d1847a10172994757da0ebb6d5761a6",name:"bg_exploreTop1.PNG"},{bytes:61259,md5:"6a96753cb5a58f9d8933b49742fc2b90",name:"bg_exploreTop2.PNG"},{bytes:15297,md5:"7d2096cd6f31431e06521af209181c0a",name:"config.json"}],exploration_level_chunks:[{bytes:2494,md5:"7d6a9a67f76ad7814addbefb292484fc",name:"explorationLevelChunks.json"}],building_intro_scene:[{bytes:1287892,md5:"1a1d1264afa8cc1bf1524f38f307e23b",name:"atlas/atlas0.png"},{bytes:88396,md5:"e110e7c89643a9500cd88ac413065b50",name:"atlas/library.json"},
{bytes:66924,md5:"6a0dad84fb08880454d04df6a481d69c",name:"audio/building_cutscene.mp3"},{bytes:160272,md5:"2618b4877c1e8004f067e26c19d8c22c",name:"audio/building_cutscene.ogg"},{bytes:149867,md5:"01754f17e203149fda054f2c45c76eac",name:"background.png"},{bytes:469,md5:"5ae2c53d0b28bc8eb72c2f9768db7b4f",name:"config.json"}],title_scene:[{bytes:396,md5:"2f7489c5622556850d45d05eb995707a",name:"atlas/atlas0.png"},{bytes:2338,md5:"1e81d38d052c5e2b3dcd8e81db72ac83",name:"atlas/library.json"},{bytes:125345,
md5:"a6d5be6a5cce16def1f8e417daaa1b3c",name:"audio/bgm.mp3"},{bytes:478513,md5:"6cc8ce836576f5f275827043bd4c6fd6",name:"audio/bgm.ogg"},{bytes:7594,md5:"78fa6e5822100f5891d3f8c163b0009d",name:"audio/title_intro.mp3"},{bytes:18774,md5:"177e5f0a6488faf05f5194b96443b25c",name:"audio/title_intro.ogg"},{bytes:9286,md5:"4dd4fd6f7bbcc052efbd184df7e36f8c",name:"audio/title_start_dt.mp3"},{bytes:21603,md5:"4d1ae320f6e67b0a802cc8120bc2d139",name:"audio/title_start_dt.ogg"},{bytes:8350,md5:"8d5ee2a30f1a1f9c6ae6bd48ca894d6d",
name:"audio/title_start_mbl.mp3"},{bytes:20231,md5:"163fe96625be2b3c8648c3def3b5cb4a",name:"audio/title_start_mbl.ogg"},{bytes:800645,md5:"4aa57ac90a648f523b62f14821d28ffb",name:"background.png"},{bytes:1039,md5:"ee3dda113b90a5fd60c72cdd0205339f",name:"config.json"}],temp:[],main:[{bytes:430471,md5:"8f4a6a99ddbd286d19022fd47b500475",name:"atlas/atlas0.png"},{bytes:29508,md5:"40313643c6b379a5a26779b1f559ba38",name:"atlas/library.json"},{bytes:2231,md5:"ae400d2a2be3226e57578085947a2b73",name:"audio/button_press.mp3"},
{bytes:7976,md5:"c61fc9e6f0acb5b28e16454c87c4ce12",name:"audio/button_press.ogg"},{bytes:5255,md5:"3fbfa0c9a07d453603b27f1f17d65fd6",name:"audio/construct_next.mp3"},{bytes:19134,md5:"579932be7f3df36547c939d4ae3f4221",name:"audio/construct_next.ogg"},{bytes:3615,md5:"79b4d4dd4e46a4aaea7bd6dae6999b0f",name:"audio/play.mp3"},{bytes:9335,md5:"6d990747152dd9e36c9dc9f074f3fd86",name:"audio/play.ogg"},{bytes:5670,md5:"38529962912c84c25639c18cfdfe79d2",name:"audio/Ruby_Extra_05.mp3"},{bytes:13645,md5:"4304ef6b17d7db53b26a7e8a2ff2b030",
name:"audio/Ruby_Extra_05.ogg"},{bytes:4838,md5:"8faaaca611aa8faa4bf8f40d82b5d5ab",name:"audio/skip.mp3"},{bytes:11403,md5:"75618924272bac9fcfd7a84cce06efc8",name:"audio/skip.ogg"},{bytes:143749,md5:"f1f3c58af8e99f0cec12563213a01ef9",name:"background.png"},{bytes:4767,md5:"9152bed4376f991e8a2a880e700a55ec",name:"config.json"},{bytes:6396,md5:"b7a0aca65a11852a9c4afe5d4537ab5f",name:"loadBarFill.png"},{bytes:8521,md5:"e5dda49a356f8d8433a8395e6d8ecf08",name:"loadBarMain.png"},{bytes:14579,md5:"cafad6700b2529e061e49eed2067f37b",
name:"Marvin.fnt"},{bytes:123024,md5:"df823609636cb4659e30063b4d215eae",name:"Marvin.png"},{bytes:892,md5:"e2887fdb296ccb22094a8de9cb94350f",name:"strings.xml"}]}]}};Ka._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();y._scratchPoint=new Y;vb.NEWLINE=new Mc(10);Ra._sharedEvent=new ee;Fa._sharedEvent=new fe;na._sharedEvent=new ge;Cb.CANVAS_TEXTURES=(new jb("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);
S._mediaRefCount=0;S._detectBlobSupport=!0;G.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];G.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new jb("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);U._detectSupport=!0;Ta._scratchMatrix=new La;Aa.BASE_URL="";F.iteration=0;F.iterationCount=1;u.onResize=new L;db.USE_CACHE=!1;db.USE_ENUM_INDEX=!1;db.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";ta.DEFAULT_RESOLVER=O;ta.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
Ya.count=0;kb.escapes=function(){var a=new M;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);eb.output_event_array=[];xa.FIRST_LOAD=!0;P.surfboardPicked=new C;P.partGrabbed=new C;P.partPlaced=new L;P.partPlacedFailed=new L;P.highlightParts=new L;P.unhighlightParts=new L;P.allPartsPlaced=new L;H.playerChangedDirection=new C;H.wallHit=new C;H.wallEndReached=new C;H.ninjaFishSwimFinished=new L;H.ninjaFishEscapeFinished=
new L;H.ninjaFishScaredFinished=new L;H.fishScareInputReceived=new L;H.playerEnteredScreen=new L;H.fishTauntIntroCompleted=new L;H.fishTauntOutroCompleted=new L;H.fishTauntGameplayStarted=new L;H.tabletReturned=new L;fa.finishChunkSpawned=new L;fa.surfboardReached=new C;fa.surfboardGrabFinished=new L;fa.playerEnteredScreen=new L;fa.levelEndInputReceived=new C;fa.boostInputReceived=new C;Qb.chunkObjectMap=function(){var a=new M;a.set("c",h.COLLECTIBLE);a.set("b",h.BOOST);a.set("f",h.SCHOOL_OF_FISH);
a.set("t",h.CRATE);a.set("s",h.SEAWEED);a.set("r",h.BARREL);a.set("w",h.WALL);a.set("p",h.WHIRLPOOL);return a}(this);Ja._wallCollisionOffset=5;qb.wallTypeMap=function(){var a=new Ea;a.set(0,[h.WALL_UPPER_LEFT,h.WALL_UPPER_MID,h.WALL_UPPER_RIGHT]);a.set(1,[h.WALL_MID_LEFT,h.WALL_MID_MID,h.WALL_MID_RIGHT]);a.set(2,[h.WALL_LOWER_LEFT,h.WALL_LOWER_MID,h.WALL_LOWER_RIGHT]);return a}(this);J.tutorialComplete=new L;J.collidableExitScreenSignal=new C;J.spawnObject=new $a;J.collectibleHit=new C;J.obstacleHit=
new C;J.boostHit=new C;J.collectibleHitEffectComplete=new C;J.popupNextButtonPressed=new L;J.worldSpeedReturnedToBase=new L;ma.inputMoveSignal=new $a;V.speedScale=1;V.worldSpeed=I.get_zero();V.movementDirection=1;xa.main()})();
