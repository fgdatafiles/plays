var GameStartup={targetHeight:768,targetWidth:1154,minSupportedWidth:1154,maxSupportedWidth:1364,resizeTimeout:0,lastInnerHeight:0,ua:{},init:function(){this.getUserAgentData();if(this.ua.iOS7Small){this.dealWithiOSProblems()}var c=document.getElementById("wrapper");if((this.ua.iOS&&this.ua.iOSVersion<5)||(this.ua.android&&this.ua.androidOSVersion<4.1)){c.innerHTML="<img src='media/images/localized/unsupported_OS.jpg' />"}else{if(!Modernizr.canvas){c.innerHTML="<img src='media/images/localized/unsupported.jpg' />"}else{var b=this;window.addEventListener("resize",function(){b.resizeGame()},false);window.addEventListener("orientationchange",function(){b.resizeGame()},false);window.addEventListener("load",function(){b.onPageLoad()},false);document.ontouchmove=function(d){d.preventDefault()};var a=setInterval(function(){if(ig&&ig.deploy){ig.deploy();b.resizeGame();clearInterval(a)}},250)}}},hideAddressBar:function(){setTimeout(function(){window.scrollTo(0,0)},0)},onPageLoad:function(){this.hideAddressBar()},resizeGame:function(){window.scrollTo(0,0);var c=window.innerWidth;var d=window.innerHeight;var g=document.getElementById("wrapper");g.style.maxWidth="";g.style.maxHeight="";g.style.margin="";g.style.marginTop="";var f=c;var e=d;var b=(d/this.targetHeight);if(c>this.maxSupportedWidth*b){this.targetWidth=this.maxSupportedWidth}else{if(c<this.minSupportedWidth*b){this.targetWidth=this.minSupportedWidth}else{this.targetWidth=c/b}}if(c>this.targetWidth*(d/this.targetHeight)){f=(d/this.targetHeight)*this.targetWidth;g.style.maxWidth=f+"px";g.style.margin="0 auto"}else{e=(c/this.targetWidth)*this.targetHeight;g.style.maxHeight=e+"px";g.style.marginTop=(d-e)/2+"px"}if((typeof ig!="undefined")&&(typeof ig.system!="undefined")){ig.system.resize(this.targetWidth,this.targetHeight)}var a=document.getElementById("canvas");a.style.width=f+"px";a.style.height=e+"px";clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(GameStartup.hideAddressBar,500);this.lastInnerHeight=window.innerHeight},getUserAgentData:function(){this.ua.pixelRatio=window.devicePixelRatio||1;this.ua.iPhone=/iPhone/i.test(navigator.userAgent);this.ua.iPod=/iPod/i.test(navigator.userAgent);this.ua.iPad=/iPad/i.test(navigator.userAgent);this.ua.iOS=this.ua.iPhone||this.ua.iPad||this.ua.iPod;if(this.ua.iOS){var a=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);this.ua.iOSVersion=parseInt(a[1],10)}else{this.ua.iOSVersion=-1}this.ua.iOS7Small=(this.ua.iPhone||this.ua.iPod)&&this.ua.iOSVersion==7;this.ua.kindle=/Silk/i.test(navigator.userAgent);this.ua.androidPhone=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i.test(navigator.userAgent);this.ua.androidTablet=(!this.ua.androidPhone&&/Android/i.test(navigator.userAgent))||this.ua.kindle;this.ua.android=this.ua.androidPhone||this.ua.androidTablet;if(this.ua.android){this.ua.androidOSVersion=parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8));if(isNaN(this.ua.androidOSVersion)){this.ua.androidOSVersion=99}}this.ua.winPhone=/IEMobile/i.test(navigator.userAgent);this.ua.winTablet=/(?=.*\bWindows\b)(?=.*\bTouch\b)/i.test(navigator.userAgent);this.ua.tablet=this.ua.iPad||this.ua.androidTablet||this.ua.winTablet;this.ua.mobile=this.ua.iPhone||this.ua.iPod||this.ua.winPhone||this.ua.androidPhone;this.ua.touchDevice=(("ontouchstart" in window)||(window.navigator.msMaxTouchPoints))},dealWithiOSProblems:function(){if(this.ua.iOS7Small&&!window.navigator.standalone){var b=document.getElementById("ios7");b.style.display="block";b.ontouchstart=function(c){b.style.display="none"};var a=this;setInterval(function(){if(a.lastInnerHeight!=window.innerHeight){a.resizeGame()}},1000)}}};