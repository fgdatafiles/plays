'use strict';(function(){var J,aa,g,k,h,f,P,q,p,Y,o,ba,Q,L,y,S,K,R,T,W,G,u,A,M,j,c,F,l,I,v,s,D,e,w,C,Z;function t(a,b){function d(){}
d.prototype=a;var c=new d,e;for(e in b)c[e]=b[e];return c}
function fa(a){return a instanceof Array?function(){return x.iter(a)}:"function"==typeof a.iterator?z(a,a.iterator):a.iterator}
function z(a,b){var d=function(){return d.method.apply(d.scope,arguments)};d.scope=a;d.method=b;return d}
var i={},m=function(){return G.__string_rec(this,"")},V=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};i.EReg=V;V.__name__=["EReg"];V.prototype={matchedPos:function(){if(null==this.r.m)throw "No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw "EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:V};var E=function(){this.h={}};i.Hash=E;E.__name__=["Hash"];E.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return x.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:E};var x=function(){};i.HxOverrides=x;x.__name__=["HxOverrides"];x.dateStr=function(a){var b=a.getMonth()+1,d=a.getDate(),c=a.getHours(),e=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>d?"0"+d:""+d)+" "+(10>c?"0"+c:""+c)+":"+(10>e?"0"+e:""+e)+":"+(10>f?"0"+f:""+f)};x.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw "Invalid date format : "+a;}};x.cca=function(a,b){var d=a.charCodeAt(b);return d!=d?void 0:d};x.substr=function(a,b,d){if(null!=b&&0!=b&&null!=d&&0>d)return "";null==d&&(d=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>d&&(d=a.length+d-b);return a.substr(b,d)};x.remove=function(a,b){for(var d=0,c=a.length;d<c;){if(a[d]==b)return a.splice(d,1),!0;d++}
return!1};x.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var U=function(){this.h={}};i.IntHash=U;U.__name__=["IntHash"];U.prototype={keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return x.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:U};var $=function(){};i.Lambda=$;$.__name__=["Lambda"];$.array=function(a){for(var b=[],a=fa(a)();a.hasNext();){var d=a.next();b.push(d)}
return b};$.has=function(a,b,d){if(null==d)
for(d=fa(a)();d.hasNext();){if(a=d.next(),a==b)return!0}else
for(var c=fa(a)();c.hasNext();)
if(a=c.next(),d(a,b))return!0;return!1};$.count=function(a,b){var d=0;if(null==b)
for(var c=fa(a)();c.hasNext();)c.next(),d++;else
for(c=fa(a)();c.hasNext();){var e=c.next();b(e)&&d++}
return d};var ca=function(){this.length=0};i.List=ca;ca.__name__=["List"];ca.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:ca};var N=function(){};i.Reflect=N;N.__name__=["Reflect"];N.field=function(a,b){var d=null;try{d=a[b]}catch(c){}
return d};N.fields=function(a){var b=[];if(null!=a){var d=Object.prototype.hasOwnProperty,c;for(c in a)d.call(a,c)&&b.push(c)}
return b};N.isFunction=function(a){return "function"==typeof a&&!(a.__name__||a.__ename__)};N.compareMethods=function(a,b){return a==b?!0:!N.isFunction(a)||!N.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};var n=function(){};i.Std=n;n.__name__=["Std"];n.string=function(a){return G.__string_rec(a,"")};n.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==x.cca(a,1)||88==x.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};n.parseFloat=function(a){return parseFloat(a)};n.random=function(a){return Math.floor(Math.random()*a)};var X=function(){this.b=""};i.StringBuf=X;X.__name__=["StringBuf"];X.prototype={__class__:X};var O=function(){};i.StringTools=O;O.__name__=["StringTools"];O.urlEncode=function(a){return encodeURIComponent(a)};O.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};O.startsWith=function(a,b){return a.length>=b.length&&x.substr(a,0,b.length)==b};O.isSpace=function(a,b){var d=x.cca(a,b);return 9<=d&&13>=d||32==d};O.ltrim=function(a){for(var b=a.length,d=0;d<b&&O.isSpace(a,d);)d++;return 0<d?x.substr(a,d,b-d):a};O.rtrim=function(a){for(var b=a.length,d=0;d<b&&O.isSpace(a,b-d-1);)d++;return 0<d?x.substr(a,0,b-d):a};O.trim=function(a){return O.ltrim(O.rtrim(a))};var B=i.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};B.TNull=["TNull",0];B.TNull.toString=m;B.TNull.__enum__=B;B.TInt=["TInt",1];B.TInt.toString=m;B.TInt.__enum__=B;B.TFloat=["TFloat",2];B.TFloat.toString=m;B.TFloat.__enum__=B;B.TBool=["TBool",3];B.TBool.toString=m;B.TBool.__enum__=B;B.TObject=["TObject",4];B.TObject.toString=m;B.TObject.__enum__=B;B.TFunction=["TFunction",5];B.TFunction.toString=m;B.TFunction.__enum__=B;B.TClass=function(a){a=["TClass",6,a];a.__enum__=B;a.toString=m;return a};B.TEnum=function(a){a=["TEnum",7,a];a.__enum__=B;a.toString=m;return a};B.TUnknown=["TUnknown",8];B.TUnknown.toString=m;B.TUnknown.__enum__=B;var H=function(){};i.Type=H;H.__name__=["Type"];H.getClassName=function(a){return a.__name__.join(".")};H.getEnumName=function(a){return a.__ename__.join(".")};H.resolveClass=function(a){a=i[a];return null==a||!a.__name__?null:a};H.resolveEnum=function(a){a=i[a];return null==a||!a.__ename__?null:a};H.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw "Too many arguments";}};H.createEmptyInstance=function(a){function b(){}
b.prototype=a.prototype;return new b};H.createEnum=function(a,b,d){var c=N.field(a,b);if(null==c)throw "No such constructor "+b;if(N.isFunction(c)){if(null==d)throw "Constructor "+b+" need parameters";return c.apply(a,d)}
if(null!=d&&0!=d.length)throw "Constructor "+b+" does not need parameters";return c};H.getEnumConstructs=function(a){return a.__constructs__.slice()};H["typeof"]=function(a){switch(typeof a){case "boolean":return B.TBool;case "string":return B.TClass(String);case "number":return Math.ceil(a)==a%2147483648?B.TInt:B.TFloat;case "object":if(null==a)return B.TNull;var b=a.__enum__;if(null!=b)return B.TEnum(b);a=a.__class__;return null!=a?B.TClass(a):B.TObject;case "function":return a.__name__||a.__ename__?B.TObject:B.TFunction;case "undefined":return B.TNull;default:return B.TUnknown}};var r=function(){};i.Xml=r;r.__name__=["Xml"];r.parse=function(a){return y.Parser.parse(a)};r.createElement=function(a){var b=new r;b.nodeType=r.Element;b._children=[];b._attributes=new E;b.setNodeName(a);return b};r.createPCData=function(a){var b=new r;b.nodeType=r.PCData;b.setNodeValue(a);return b};r.createCData=function(a){var b=new r;b.nodeType=r.CData;b.setNodeValue(a);return b};r.createComment=function(a){var b=new r;b.nodeType=r.Comment;b.setNodeValue(a);return b};r.createDocType=function(a){var b=new r;b.nodeType=r.DocType;b.setNodeValue(a);return b};r.createProlog=function(a){var b=new r;b.nodeType=r.Prolog;b.setNodeValue(a);return b};r.createDocument=function(){var a=new r;a.nodeType=r.Document;a._children=[];return a};r.prototype={toString:function(){if(this.nodeType==r.PCData)return this._nodeValue;if(this.nodeType==r.CData)return "<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==r.Comment)return "<\!--"+this._nodeValue+"--\>";if(this.nodeType==r.DocType)return "<!DOCTYPE "+this._nodeValue+">";if(this.nodeType==r.Prolog)return "<?"+this._nodeValue+"?>";var a=new X;if(this.nodeType==r.Element){a.b+=n.string("<");a.b+=n.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var d=b.next();a.b+=n.string(" ");a.b+=n.string(d);a.b+=n.string('="');a.b+=n.string(this._attributes.get(d));a.b+=n.string('"')}
if(0==this._children.length)return a.b+=n.string("/>"),a.b;a.b+=n.string(">")}
for(b=this.iterator();b.hasNext();)d=b.next(),a.b+=n.string(d.toString());this.nodeType==r.Element&&(a.b+=n.string("</"),a.b+=n.string(this._nodeName),a.b+=n.string(">"));return a.b},addChild:function(a){if(null==this._children)throw "bad nodetype";null!=a._parent&&x.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw "bad nodetype";for(var a=0,b=this._children.length;a<b;){var d=this._children[a];if(d.nodeType==r.Element)return d;a++}
return null},elementsNamed:function(a){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,d=this.x.length;b<d;){var c=this.x[b];if(c.nodeType==r.Element&&c._nodeName==a)break;b++}
this.cur=b;return b<d},next:function(){for(var b=this.cur,d=this.x.length;b<d;){var c=this.x[b];b++;if(c.nodeType==r.Element&&c._nodeName==a)return this.cur=b,c}
return null}}},elements:function(){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==r.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var d=this.x[a],a=a+1;if(d.nodeType==r.Element)return this.cur=a,d}
return null}}},iterator:function(){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=r.Element)throw "bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=r.Element)throw "bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=r.Element)throw "bad nodeType";return this._attributes.get(a)},getParent:function(){return this._parent},setNodeValue:function(a){if(this.nodeType==r.Element||this.nodeType==r.Document)throw "bad nodeType";return this._nodeValue=a},getNodeValue:function(){if(this.nodeType==r.Element||this.nodeType==r.Document)throw "bad nodeType";return this._nodeValue},setNodeName:function(a){if(this.nodeType!=r.Element)throw "bad nodeType";return this._nodeName=a},getNodeName:function(){if(this.nodeType!=r.Element)throw "bad nodeType";return this._nodeName},__class__:r};J=function(){};aa=void 0;g=void 0;k=void 0;h=void 0;i["com.nick.spongebob.sandy_sponge_stacker.DocumentApp"]=J;J.__name__=["com","nick","spongebob","sandy_sponge_stacker","DocumentApp"];J.main=function(){A.init();J._fillEntity=new M;J._fillSprite=new j.FillSprite(0,960,560);J._fillEntity.add(J._fillSprite);A.root.addChild(J._fillEntity);f.WorkinCloud.instance.getAssets()._setBaseUrl(J.trimUrl(f.JSEmbedProxy.getBase()));f.WorkinCloud.instance.getDispatcher().addEventListener(P.ConstantsCloud.EVENT_FILES_LOADED,J._onBootstrapLoad);f.WorkinCloud.instance.getAssets().addPackDef("bootstrap");f.WorkinCloud.instance.getAssets().loadPack("bootstrap")};J._onBootstrapLoad=function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(P.ConstantsCloud.EVENT_FILES_LOADED,J._onBootstrapLoad);J._initServices();S.delay(J._initMain,800)};J._initMain=function(){J._main=new aa};J._initServices=function(){for(var a=f.WorkinCloud.instance.getAssets().getXML(g.constants.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics"),q.ServiceAnalytics.init(b.att.resolve("id").toString()))}}};J.trimUrl=function(a){if(""==a)return "";if(0>a.indexOf("http"))return "/"==a.charAt(0)&&(a=x.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=x.substr(a,b,a.length-b);0>a.indexOf("assets")&&(a+="assets/");return a};aa=function(){this._RATE_REFRESH_SCALE=0.4;this._flagGameplayPaused=this._flagInitialLoadComplete=this._flagJSEmbedPauseState=this._flagJSEmbedExists=!1;this._timerRefreshScale=0.0010;f.WorkinCloud.instance.log("[Main] Constructed");this._timeline=A.root;A.uncaughtError.connect(z(this,this.errorHandler));f.WorkinCloud.instance.getInput().prime();this._layerWorld=new M;this._layerUI=new M;this._scaleSprite=new j.Sprite;this._timeline.add(this._scaleSprite);this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._flagJSEmbedExists=f.JSEmbedProxy.getExists();this._flagWebAudioUnlocked=this._isListeningForLoading=this._isUIActive=this._isWorldActive=!1;this._document={canvasScale:1};this._document=eval("document");f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_MOUSE_PRESSED,!1);this._flowstack=[];this._addEventListeners();this._parseConfigXML();this._beginEngine();S.delay(z(this,this._beginInitialLoad),800)};i["com.nick.spongebob.sandy_sponge_stacker.Main"]=aa;aa.__name__=["com","nick","spongebob","sandy_sponge_stacker","Main"];aa.prototype={_worldDestroy:function(){this._isWorldActive&&(this._isWorldActive=!1,this._world.dispose(),this._world=null)},_generateWorld:function(){this._isWorldActive&&this._worldDestroy();this._isWorldActive=!0;this._world=new k.World(this._layerWorld,this)},_onEventInput:function(a){this._handleWebAudioUnlock();f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._document&&this._document.canvasScale&&(a.x/=this._document.canvasScale,a.y/=this._document.canvasScale),this._ui.handleInput(a)&&this._isWorldActive&&this._world.handleInput(a))},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,f.WorkinCloud.instance._getSound().playSound("audio/silent"))},_generateUI:function(){this._isUIActive=!0;this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_LOADING,h.screens.ScreenLoading,"ui/loading_panel.jpg");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_SPLASH,h.screens.ScreenSplash,"elements/AssetSplash.jpg");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD,h.screens.ScreenGameplayHUD,"ui/AssetScreenGameplayHud.png");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_LOAD_LEVEL,h.screens.ScreenNextLevel,"ui/AssetScreenNextLevel.png");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU,h.screens.ScreenGameplayMenu,"ui/AssetScreenNextLevel.png");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_HELP,h.screens.ScreenHelp,"ui/AssetScreenHelp.jpg");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM,h.screens.ScreenQuitConfirm,"ui/AssetScreenNextLevel.png");this._ui.addScreen(g.constants.ConstantsScreen.SCREEN_END_GAME,h.screens.ScreenEndGame,"ui/AssetScreenEndGame.jpg")},_enableInput:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(p.WMEventInput.EVENT_INPUT,z(this,this._onEventInput))},_addEventListeners:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(p.WMEventUpdate.EVENT_UPDATE,z(this,this._onEventUpdate));f.WorkinCloud.instance.getDispatcher().addEventListener(g.constants.ConstantsApp.EVENT_MUTE_TOGGLE,z(this,this._onMuteToggle));f.WorkinCloud.instance.getDispatcher().addEventListener(p.WMEventFlow.EVENT_FLOW,z(this,this._onFlowEvent));f.WorkinCloud.instance.getDispatcher().addEventListener(g.constants.ConstantsApp.EVENT_INPUT,z(this,this._onEventInput))},_runFlowStack:function(){if(0!=this._flowstack.length)
for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},_onMuteToggle:function(){f.WorkinCloud.instance.setValue(g.constants.ConstantsApp.BOOL_MUTED,!f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_MUTED))},_onEventUpdate:function(a){if(this._flagJSEmbedExists&&(f.JSEmbedProxy.getIsPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=f.JSEmbedProxy.getIsPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=a.getDt(),0>=this._timerRefreshScale)){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_TOUCH_DEVICE)){if(f.JSEmbedProxy.getCanvasHeight()>f.JSEmbedProxy.getCanvasWidth()){this._showOrientationAlert();return}
if(f.WorkinCloud.instance.getValue(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();return}}
this._flagJSEmbedExists&&f.JSEmbedProxy.getCanvasScale()!=this._scaleSprite.scaleX._value&&this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(f.JSEmbedProxy.getCanvasScale()))}
this._isUIActive&&this._ui.update(a.getDt());this._isWorldActive&&(this._world.update(a.getDt()),this._world.render());f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(new p.WMEventFlow(g.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(new p.WMEventFlow(g.constants.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(new p.WMEventFlow(g.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(new p.WMEventFlow(g.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));this._runFlowStack()},_resetFlagsResults:function(){f.WorkinCloud.instance.resetValue(g.constants.ConstantsApp.BOOL_GAME_LOSE);f.WorkinCloud.instance.resetValue(g.constants.ConstantsApp.BOOL_GAME_WIN);f.WorkinCloud.instance.resetValue(g.constants.ConstantsApp.BOOL_LEVEL_LOSE);f.WorkinCloud.instance.resetValue(g.constants.ConstantsApp.BOOL_LEVEL_WIN)},_hideOrientationAlert:function(){f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape."),f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!1),f.JSEmbedProxy.unpause(),f.JSEmbedProxy.alertOff())},_showOrientationAlert:function(){f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)||(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!"),f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!0),f.JSEmbedProxy.pause(),f.JSEmbedProxy.alertOn(f.WorkinCloud.instance._getLocalize().getData("orientation_landscape")._getString()))},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_PAUSED,!1)},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_PAUSED,!0)},_onGameNew:function(){f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_SCORE,0);f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_LEVEL,0);f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_TIMER,0);this._resetFlagsResults()},_gotoEndGame:function(a,b){null==b&&(b=!1);this._flagWonPreviousGame=a;b?(this._world._level=1,this._world._score=0,this._world.restart(),this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD),this._unpauseGameplay(),this._onGameNew(),this._gotoAndPlayGame()):this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_END_GAME);q.ServiceAnalytics.sendMilestone("custom7")},_gotoAndPlayGame:function(){this._isWorldActive?f.WorkinCloud.instance.log("[Main](_gotoAndPlayGame) World already exists. Using existing world instead of creating new one."):this._generateWorld();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!1);q.ServiceAnalytics.sendMilestone("custom6")},_executeFlowStack:function(a){switch(a){case g.constants.ConstantsScreen.FLOW_SPLASH_PLAY:this._gotoAndPlayGame();q.ServiceAnalytics.start();break;case g.constants.ConstantsScreen.FLOW_END_LEVEL_NEXT:this._pauseGameplay();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_LOAD_LEVEL);break;case g.constants.ConstantsScreen.FLOW_END_LEVEL_QUIT:this._unpauseGameplay();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU:this._pauseGameplay();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(g.constants.ConstantsScreen.SCREEN_HELP,!1);q.ServiceAnalytics.sendMilestone("custom3");break;case g.constants.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(g.constants.ConstantsScreen.SCREEN_HELP);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(g.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:this._resetFlagsResults();this._gotoEndGame(!1);break;case g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(g.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM);break;case g.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._pauseGameplay();this._gotoEndGame(!1);break;case g.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._gotoEndGame(this._flagWonPreviousGame,!0)}},errorHandler:function(a){f.WorkinCloud.instance.log("Error:"+
a)},_registerInput:function(){f.WorkinCloud.instance.getInput().registerInput(g.constants.ConstantsApp.INPUT_SPACE,[c.Key.Space]);f.WorkinCloud.instance.getInput().registerInput(g.constants.ConstantsApp.INPUT_LEFT,[c.Key.Left,c.Key.A]);f.WorkinCloud.instance.getInput().registerInput(g.constants.ConstantsApp.INPUT_RIGHT,[c.Key.Right,c.Key.D]);f.WorkinCloud.instance.getInput().registerInput(g.constants.ConstantsApp.INPUT_UP,[c.Key.Up,c.Key.W]);f.WorkinCloud.instance.getInput().registerInput(g.constants.ConstantsApp.INPUT_DOWN,[c.Key.Down,c.Key.S])},_gotoSplash:function(){this._enableInput();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_SPLASH);q.ServiceAnalytics.sendMilestone("custom2")},_eventInitialLoadComplete:function(){this._flagInitialLoadComplete=!0;S.delay(z(this,this._gotoSplash),800)},_beginInitialLoad:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(P.ConstantsCloud.EVENT_FILES_LOADED,z(this,this._eventInitialLoadComplete));f.WorkinCloud.instance.getAssets().loadFolder("fonts_"+
f.WorkinCloud.instance.getString(P.ConstantsCloud.STRING_REGION_ID))},_parseConfigXML:function(){f.WorkinCloud.instance.log("[Main] Parse Config XML: "+g.constants.ConstantsApp.STRING_CONFIG_PATH);for(var a=r.parse(f.WorkinCloud.instance.getAssets().getFile(g.constants.ConstantsApp.STRING_CONFIG_PATH)),a=new y.Fast(a.firstElement()),b=[],d=a.nodes.resolve("pack").iterator();d.hasNext();){for(var c=d.next();0<b.length;)b.splice(0,1);for(var e=c.nodes.resolve("flump").iterator();e.hasNext();){var h=e.next();b.push(h.att.resolve("id").toString())}
f.WorkinCloud.instance.getAssets().addPackDef(c.att.resolve("id").toString(),b)}
for(b=a.node.resolve("initial").nodes.resolve("pack").iterator();b.hasNext();)d=b.next(),f.WorkinCloud.instance.getAssets().loadPack(d.att.resolve("id").toString());f.WorkinCloud.instance.setString(P.ConstantsCloud.STRING_REGION_ID,n.string(a.node.resolve("localization").node.resolve("region").getInnerData()));f.WorkinCloud.instance.log("[Main] Localization : Set Region: "+
f.WorkinCloud.instance.getString(P.ConstantsCloud.STRING_REGION_ID))},_beginEngine:function(){f.WorkinCloud.instance.log("[Main](_beginEngine)");f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);f.WorkinCloud.instance.setBool(g.constants.ConstantsApp.BOOL_TOUCH_DEVICE,A._platform.getTouch().get_supported());f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_CANVAS_SCALE,1);f.WorkinCloud.instance.setDefault(g.constants.ConstantsApp.BOOL_PAUSED,0);f.WorkinCloud.instance.setDefault(g.constants.ConstantsApp.BOOL_MUTED,0);f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_LEVEL,0);f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_SCORE,0);f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_TIMER,0);this._timeline.add(new Y.Updater);this._registerInput();this._ui=new h.ScreenManager(this._layerUI);this._generateUI();this._ui.changeScreenTo(g.constants.ConstantsScreen.SCREEN_LOADING)},__class__:aa};g={constants:{}};g.constants.ConstantsApp=function(){};i["com.nick.spongebob.sandy_sponge_stacker.data.constants.ConstantsApp"]=g.constants.ConstantsApp;g.constants.ConstantsApp.__name__="com,nick,spongebob,sandy_sponge_stacker,data,constants,ConstantsApp".split(",");g.constants.ConstantsScreen=function(){};i["com.nick.spongebob.sandy_sponge_stacker.data.constants.ConstantsScreen"]=g.constants.ConstantsScreen;g.constants.ConstantsScreen.__name__="com,nick,spongebob,sandy_sponge_stacker,data,constants,ConstantsScreen".split(",");f={};P=void 0;q=void 0;p=void 0;Y=void 0;o=void 0;ba=void 0;Q=void 0;L=void 0;f.WMEventDispatcher=function(){this._signals=new E};i["com.workinman.utils.WMEventDispatcher"]=f.WMEventDispatcher;f.WMEventDispatcher.__name__=["com","workinman","utils","WMEventDispatcher"];f.WMEventDispatcher.prototype={dispose:function(){for(var a=this._signals.iterator();a.hasNext();)a.next().dispose();this._signals=null},dispatchEvent:function(a){this._signals.exists(a.getEventId())&&this._signals.get(a.getEventId()).dispatchEvent(a)},removeEventListener:function(a,b){this._signals.exists(a)&&(this._signals.get(a).removeEventListener(b),this._signals.get(a).isEmtpy()&&(this._signals.get(a).dispose(),this._signals.remove(a)))},addEventListener:function(a,b){this._signals.exists(a)||this._signals.set(a,new f._WMEventDispatcher.WMEventTracker);this._signals.get(a).addEventListener(b)},__class__:f.WMEventDispatcher};h={ScreenManager:function(a){f.WMEventDispatcher.call(this);this._container=a;this._layerScreen=new M;this._layerTransition=new M;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1}};i["com.nick.spongebob.sandy_sponge_stacker.ui.ScreenManager"]=h.ScreenManager;h.ScreenManager.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,ScreenManager".split(",");h.ScreenManager.__super__=f.WMEventDispatcher;h.ScreenManager.prototype=t(f.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition._getEntity()),this._transition._getDispatcher().removeEventListener(p.WMEventScreenOut.EVENT_SCREEN_OUTPUT,z(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;this._removeTransition()}
this._transition=new h.transitions.TransitionBase(a);this._transition.hide();this._transition._getDispatcher().addEventListener(p.WMEventScreenOut.EVENT_SCREEN_OUTPUT,z(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition._getEntity());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case g.constants.ConstantsScreen.TRANSITION_SCROLL:var b=this._transitionScreenHeadedOut._getDisplay().x;b.set__(b._value-
2E3*a);b=this._transitionScreenHeadedIn._getDisplay().x;b.set__(b._value-2E3*a);0>=this._transitionScreenHeadedIn._getDisplay().x._value&&(this._transitionScreenHeadedIn._getDisplay().x.set__(0),this._flagHasTransition=!1,this._onQueueConditionMet(g.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE));break;case g.constants.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,b){this.dispatchEvent(new p.WMEventInterfaceChange(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var d=0;d<this._screensQueue.length;)this._screensQueue[d].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[d].screenData),this._screensQueue.splice(d,1)),d++},dispose:function(){for(var a=0;a<this._screensOpen.length;)this._disposeScreen(this._screensOpen[a].id),a++;this._screens=this._screensQueue=null;this._removeTransition();this._container.removeChild(this._layerScreen);this._container.removeChild(this._layerTransition);this._layerTransition=this._layerScreen=null;f.WMEventDispatcher.prototype.dispose.call(this)},_getScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}
f.WorkinCloud.instance.log("[ScreenManager](_getScreenData) ERROR: Screen >"+a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return!0;b--}
return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot._getEntity()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){f.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},_onEventTransitionOutput:function(a){a.flowId==g.constants.ConstantsScreen.OUTPUT_OPENED?(f.WorkinCloud.instance.log("[ScreenManager] Transition Midway..."),this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=!1),this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1),this._removeScreenshot(),this._onQueueConditionMet(g.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==g.constants.ConstantsScreen.OUTPUT_CLOSED&&(f.WorkinCloud.instance.log("[ScreenManager] Transition Complete."),this._removeScreenshot(),this._onQueueConditionMet(g.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==g.constants.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==g.constants.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_CLOSE_COMPLETE,a.screenId),this._onQueueConditionMet(g.constants.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,a.screenId),this._flagHasTransition&&this._transitionType==g.constants.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b]._getDispatcher().removeEventListener(p.WMEventScreenOut.EVENT_SCREEN_OUTPUT,z(this,this._onEventScreenOutput));this._screensOpen[b].dispose();this._removeScreenDisplay(this._screensOpen[b]._getEntity());this._screensOpen[b].disposeDisplay();this._screensOpen.splice(b,1);break}
b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) com.nick.spongebob.sandy_sponge_stacker.ui.screens."+n.string(a.screenClass)+" ~~ "+n.string(H.resolveClass("com.nick.spongebob.sandy_sponge_stacker.ui.screens."+n.string(a.screenClass))));var b=H.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) success");if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{this._screensOpen.push(b);this._addScreenDisplay(b._getEntity());if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=b,this._transitionType){case g.constants.ConstantsScreen.TRANSITION_SCROLL:b._getDisplay().x.set__(g.constants.ConstantsApp.STAGE_WIDTH)}
b._getDispatcher().addEventListener(p.WMEventScreenOut.EVENT_SCREEN_OUTPUT,z(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},_addScreenToQueue:function(a,b,d){null==d&&(d="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new h.screens.data.ScreenQueueData(a,b,d))},removeAllQueuedScreens:function(){for(var a=this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}
b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a)return!0;b--}
return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return!0;b--}
return!1},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}
f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+a+"< is not open or does not exist. getScreen() returning NULL.");return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(g.constants.ConstantsScreen.CONDITION_CLOSED_ALL)),this._loop--}},changeScreenTo:function(a,b,d,c){null==c&&(c="");null==d&&(d=-1);null==b&&(b=!1);f.WorkinCloud.instance.log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){f.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");for(b=this._screensOpen.length-
1;0<=b;)this._screensOpen[b].id!=a&&this.closeScreen(this._screensOpen[b].id,!1,b),b--;this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_OPEN_BEGIN,a);this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE,a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){f.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);var e=g.constants.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<d)switch(this._transitionType=d,this._transitionType){case g.constants.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();this._transitionPlay();break;case g.constants.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];e=g.constants.ConstantsScreen.CONDITION_IMMEDIATE;break;case g.constants.ConstantsScreen.TRANSITION_FADE:this._addTransition(c,this._flagHasTransition?this._transition._getIsOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),e=g.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}
if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))
for(b=1;b<this._screensOpen.length;)this.closeScreen(this._screensOpen[b].id,!1,this._screensOpen.length),b++;this._flagOpenScreenAfterTransition?(f.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,e)}else this.openScreen(a,!1)},_moveScreenToTop:function(a){var b=this.getScreen(a);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+a+"< is not open or does not exist. Cancelling move.");else{b.isClosing()&&b.open(!1);for(var d=this._screensOpen.length-1;0<=d&&!(this._screensOpen[d].id==a);)d--;this._screensOpen.splice(d,1);b.reset();this._removeScreenDisplay(b._getEntity());this._addScreenDisplay(b._getEntity());this._screensOpen.push(b)}},openScreen:function(a,b,d,c){null==c&&(c="");null==d&&(d=0);null==b&&(b=!0);f.WorkinCloud.instance.log("[ScreenManager](openScreen) "+a);if(this._hasScreenData(a))
if(this.isScreenOpen(a))this._moveScreenToTop(a);else{if(d!=g.constants.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this._getScreenData(a),d,c);return}
if((d==g.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||d==g.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this._getScreenData(a),d,c);return}}
this._generateScreen(this._getScreenData(a))}
else f.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+a+"< does not exist. Cancelling open().")},closeScreen:function(a,b,d){null==d&&(d=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);else{if(""==a)d=this._screensOpen[this._screensOpen.length-1];else if(0<=d&&d<this._screensOpen.length)d=this._screensOpen[d];else if(d=this.getScreen(a),null==d){this.removeQueuedScreen(a);return}
d.close(b);this._dispatchEventChange(g.constants.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=!0,d=this._screensOpen.length-1;0<=d;)this._screensOpen[d].handleInput(a)||(b=!1),d--;return b},addScreen:function(a,b,d,c,e){null==c&&(c=0);null==d&&(d="");this._screens.push(new h.screens.data.ScreenData(a,b,d,c,e))},__class__:h.ScreenManager});h.UserInterfaceElement=function(a,b,d,c,e){null==c&&(c="");this.sorted=!1;this._dispatcher=new f.WMEventDispatcher;this._entity=new M;this._tweens=[];this._position=new o.WorkinPoint(a,b);this._layer=d;this._flagChangePosition=!1;!0==this._flagBitmapAdded?(this._assetBase=c,this._flagHasAssetBase=""==this._assetBase):(this._flagBitmapAdded=!1,this._bitmapAssetCurrent="",this._assetBase=c,""==this._assetBase?this._flagHasAssetBase=!1:(this._flagHasAssetBase=!0,this._addBitmap(this._assetBase)));null!=this._display&&null!=e&&this._display.setAnchor(e.getX(),e.getY())};i["com.nick.spongebob.sandy_sponge_stacker.ui.UserInterfaceElement"]=h.UserInterfaceElement;h.UserInterfaceElement.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,UserInterfaceElement".split(",");h.UserInterfaceElement.prototype={_doMotionPoint:function(a){a=a._getPos().copy();if(0==a.getX()%1){var b=a;b.setX(b.getX()+0.0010)}
0==a.getY()%1&&(b=a,b.setY(b.getY()+0.0010));return a},_doMotionFloat:function(a){a=a._getPos().getX();0==a%1&&(a+=0.0010);return a},disposeDisplay:function(){this._display=null},dispose:function(){f.WorkinCloud.instance.log("[UserInterfaceElement] dispose begun");this._entity.dispose();this._disposeBitmapContainer();this._dispatcher.dispose();for(var a=0,b=0;a<this._tweens.length;){for(b=0;b<this._tweens[a].length;)this._tweens[a][b].dispose(),b++;this._tweens[a]=null;a++}
this._position=this._tweens=null},_disposeBitmapContainer:function(){!1!=this._flagBitmapAdded&&(this._flagBitmapAdded=!1,this._display.dispose())},_addBitmap:function(a){if(this._flagBitmapAdded){if(this._bitmapAssetCurrent==a)return;this._disposeBitmapContainer()}
this._bitmapAssetCurrent=a;""!=this._bitmapAssetCurrent&&(this._flagBitmapAdded=!0,this._display=new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture(this._bitmapAssetCurrent)),this._entity.add(this._display),this.renderPosition())},_initializeTween:function(a){switch(a._getType()){case "tx":a.setStartFast(this._position.getX(),this._position.getX());break;case "ty":a.setStartFast(this._position.getY(),this._position.getY());break;case "rtx":a.setStartFast(this._position.getX(),this._position.getX());break;case "rty":a.setStartFast(this._position.getY(),this._position.getY());break;case "":a.setStart(this._position);break;case "t":a.setStart(this._position);break;case "sx":a.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "sy":a.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "s":a.setStartFast(this._display.scaleX._value,this._display.scaleY._value);break;case "a":a.setStartFast(this._display.alpha._value,this._display.alpha._value);break;case "r":a.setStartFast(this._display.rotation._value,this._display.rotation._value)}},_applyTween:function(a,b){this._flagChangePosition=!0;switch(b._getType()){case "tx":if(b.isReady()){var d=this._doMotionFloat(b,a);0!=d%1&&this._position.setX(d)}else this._initializeTween(b);break;case "ty":b.isReady()?this._position.setY(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "rtx":b.isReady()?(d=this._doMotionFloat(b,a),0!=d%1&&this._position.setX(d)):this._initializeTween(b);break;case "rty":b.isReady()?this._position.setY(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "":b.isReady()?this._position.toPoint(this._doMotionPoint(b,a)):this._initializeTween(b);break;case "t":b.isReady()?this._position.toPoint(this._doMotionPoint(b,a)):this._initializeTween(b);break;case "sx":b.isReady()?this._display.scaleX.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "sy":b.isReady()?this._display.scaleY.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "s":b.isReady()?(d=this._doMotionPoint(b,a),this._display.scaleX.set__(d.getX()),this._display.scaleY.set__(d.getY())):this._initializeTween(b);break;case "a":b.isReady()?this._display.alpha.set__(this._doMotionFloat(b,a)):this._initializeTween(b);break;case "r":b.isReady()?this._display.rotation.set__(this._doMotionFloat(b,a)):this._initializeTween(b)}},_updatePositionFromTween:function(a){for(var b=this._tweens[0].length;0<=b;)this._tweens[0][b].update(a),this._applyTween(a,this._tweens[0][b]),this._tweens[0][b].complete&&(this._tweens[0].splice(b,1),this._onTweenStageComplete()),b--;0==this._tweens[0].length&&(this._tweens.shift(),0==this._tweens.length&&this._onTweenAllComplete())},_onTweenAllComplete:function(){},_onTweenStageComplete:function(){},update:function(a){0<this._tweens.length&&this._updatePositionFromTween(a);this._flagChangePosition&&this.renderPosition()},renderPosition:function(){this._flagBitmapAdded&&(this._display.x.set__(this._position.getX()),this._display.y.set__(this._position.getY()),this._flagChangePosition=!1)},_setPosition:function(a){return this._position=a},_getPosition:function(){return this._position},_getDisplay:function(){return this._display},_setLayer:function(a){if(a==this._layer)return this._layer;this.sorted=!1;return this._layer=a},_getLayer:function(){return this._layer},_getTweensComplete:function(){return 0==this._tweens.length},_getDispatcher:function(){return this._dispatcher},_getEntity:function(){return this._entity},__class__:h.UserInterfaceElement};h.buttons={};h.buttons.ButtonBase=function(a,b,d,c,e,f,g,i){null==i&&(i="");null==f&&(f="");null==e&&(e="");null==c&&(c="");null==d&&(d=0);h.UserInterfaceElement.call(this,a,b,d,"",g);this._assetUp=""==c?this._getDefaultAssetUp():c;this._assetOver=""==e?this._getDefaultAssetOver():e;this._assetDown=""==f?this._getDefaultAssetDown():f;this._assetDisabled=""==i?this._getDefaultAssetDisabled():i;this._bitmapAssetCurrent="";this._flagDragged=this._flagDown=this._flagBitmapAdded=this._flagEventListenersAdded=!1;this.enable();this._addEventListeners()};i["com.nick.spongebob.sandy_sponge_stacker.ui.buttons.ButtonBase"]=h.buttons.ButtonBase;h.buttons.ButtonBase.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,buttons,ButtonBase".split(",");h.buttons.ButtonBase.__super__=h.UserInterfaceElement;h.buttons.ButtonBase.prototype=t(h.UserInterfaceElement.prototype,{_removeEventListeners:function(){this._flagEventListenersAdded&&(this._flagEventListenersAdded=!1,this._downConnection.dispose(),this._downConnection=null,this._flagDown&&(this._upConnection.dispose(),this._upConnection=null))},_addEventListeners:function(){this._flagEventListenersAdded||(this._flagEventListenersAdded=!0,this._downConnection=this._display.get_pointerDown().connect(z(this,this._onDownEvent)))},renderPosition:function(){h.UserInterfaceElement.prototype.renderPosition.call(this)},_renderDisabled:function(){},_renderReturnUp:function(){},_renderDown:function(){},_renderUp:function(){this._addBitmap(this._assetUp)},update:function(a){h.UserInterfaceElement.prototype.update.call(this,a);this._flagDown&&!1==f.WorkinCloud.instance.getInput().getInput(g.constants.ConstantsApp.INPUT_CLICK)&&(this._upConnection.dispose(),this._renderReturnUp())},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(h.buttons.ButtonBase.CANCEL_DRAG)},_onUp:function(){this._flagDown&&(this._upConnection.dispose(),this._upConnection=null,this._flagDown=!1,this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(h.buttons.ButtonBase.UP))},_onDown:function(){this._flagBitmapAdded&&(this._flagDown=!0,this._renderDown(),this._upConnection=this._display.get_pointerUp().connect(z(this,this._onUpEvent)),this._dispatch(h.buttons.ButtonBase.DOWN))},_click:function(){f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._dispatch(h.buttons.ButtonBase.CLICK),""!=this._getClickFlow()&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventFlow(this._getClickFlow())),""!=this._getClickEvent()&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEvent(this._getClickEvent())))},_dispatch:function(a){this._GET_DO_DISPATCH()&&this._dispatcher.dispatchEvent(new p.WMEvent(a))},_onUpEvent:function(a){this._onUp(a.viewX,a.viewY)},_onDownEvent:function(a){this._onDown(a.viewX,a.viewY)},_getClickFlow:function(){return ""},_getClickEvent:function(){return ""},_GET_DISABLE_FRAME:function(){return 1},_GET_CUSTOM_HIT_BOX:function(){return new F.Point(0,0)},_GET_DO_DISPATCH:function(){return!0},_getDefaultAssetDisabled:function(){return ""},_getDefaultAssetDown:function(){return ""},_getDefaultAssetOver:function(){return ""},_getDefaultAssetUp:function(){return ""},dispose:function(){this.disable();this._removeEventListeners()},disable:function(){this._flagEnabled=!1;this._renderDisabled()},enable:function(){this._flagEnabled=!0;this._renderUp()},_getFlagBehaveAsElement:function(){return!1},__class__:h.buttons.ButtonBase});h.buttons.ButtonSoundToggle=function(){};i["com.nick.spongebob.sandy_sponge_stacker.ui.buttons.ButtonSoundToggle"]=h.buttons.ButtonSoundToggle;h.buttons.ButtonSoundToggle.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,buttons,ButtonSoundToggle".split(",");h.buttons.ButtonSoundToggle.__super__=h.buttons.ButtonBase;h.buttons.ButtonSoundToggle.prototype=t(h.buttons.ButtonBase.prototype,{_getClickEvent:function(){var a=f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_MUTED)?this._onAssets:this._offAssets;this._assetUp=a[0];this._assetOver=a[1];this._assetDown=a[3==a.length?2:1];return g.constants.ConstantsApp.EVENT_MUTE_TOGGLE},__class__:h.buttons.ButtonSoundToggle});h.displays={};h.displays.Display=function(a,b,d,c,e){null==c&&(c="");h.UserInterfaceElement.call(this,a,b,d,c,e);this._addEventListeners()};i["com.nick.spongebob.sandy_sponge_stacker.ui.displays.Display"]=h.displays.Display;h.displays.Display.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,displays,Display".split(",");h.displays.Display.__super__=h.UserInterfaceElement;h.displays.Display.prototype=t(h.UserInterfaceElement.prototype,{dispose:function(){h.UserInterfaceElement.prototype.dispose.call(this);this._removeEventListeners()},_updateValue:function(){return ""},_refresh:function(){},_onUpdateDisplay:function(a){a._getData().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(g.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,z(this,this._onUpdateDisplay))},_addEventListeners:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(g.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,z(this,this._onUpdateDisplay))},__class__:h.displays.Display});h.displays.DisplayLevel=function(a,b,d,c,e){null==c&&(c="");h.displays.Display.call(this,a,b,d,c,e);d=f.WorkinCloud.instance.getFloat(this._updateValue());this._textNum=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("Basic"),""+d);this._textNum.x.set__(a);this._textNum.y.set__(b);this._display=this._textNum;this._entity.add(this._display)};i["com.nick.spongebob.sandy_sponge_stacker.ui.displays.DisplayLevel"]=h.displays.DisplayLevel;h.displays.DisplayLevel.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,displays,DisplayLevel".split(",");h.displays.DisplayLevel.__super__=h.displays.Display;h.displays.DisplayLevel.prototype=t(h.displays.Display.prototype,{_updateValue:function(){return g.constants.ConstantsApp.FLOAT_LEVEL},_refresh:function(){this._textNum.set_text(""+f.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayLevel});h.displays.DisplayScore=function(a,b,d,c,e){null==c&&(c="");h.displays.Display.call(this,a,b,d,c,e);d=f.WorkinCloud.instance.getFloat(this._updateValue());this._textNum=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("Basic"),""+d);this._textNum.x.set__(a);this._textNum.y.set__(b);a=this._textNum.scaleX;a.set__(0.5*a._value);a=this._textNum.scaleY;a.set__(0.5*a._value);this._display=this._textNum;this._entity.add(this._display)};i["com.nick.spongebob.sandy_sponge_stacker.ui.displays.DisplayScore"]=h.displays.DisplayScore;h.displays.DisplayScore.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,displays,DisplayScore".split(",");h.displays.DisplayScore.__super__=h.displays.Display;h.displays.DisplayScore.prototype=t(h.displays.Display.prototype,{_updateValue:function(){return g.constants.ConstantsApp.FLOAT_SCORE},_refresh:function(){this._textNum.set_text(""+f.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayScore});h.displays.DisplayText=function(a,b,d,c,e,g,i){null==g&&(g="");h.displays.Display.call(this,b,d,c,g,i);this._text=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("Basic"),a);this._text.x.set__(b);this._text.y.set__(d);a=this._text.scaleX;a.set__(a._value*e);a=this._text.scaleY;a.set__(a._value*e);this._entity.add(this._text)};i["com.nick.spongebob.sandy_sponge_stacker.ui.displays.DisplayText"]=h.displays.DisplayText;h.displays.DisplayText.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,displays,DisplayText".split(",");h.displays.DisplayText.__super__=h.displays.Display;h.displays.DisplayText.prototype=t(h.displays.Display.prototype,{_updateValue:function(){return g.constants.ConstantsApp.FLOAT_TEXT},_refresh:function(){this._text.set_text(f.WorkinCloud.instance.getString(this._updateValue()))},setTextPos:function(a){this._text.x.set__(a)},getTextPos:function(){return this._text.x._value},__class__:h.displays.DisplayText});h.displays.DisplayTimer=function(a,b,d,c,e){null==c&&(c="");h.displays.Display.call(this,a,b,d,c,e);d=f.WorkinCloud.instance.getFloat(this._updateValue());this._textTimer=new j.TextSprite(f.WorkinCloud.instance.getAssets().getFont("Basic"),""+d);this._textTimer.x.set__(a);this._textTimer.y.set__(b);a=this._textTimer.scaleX;a.set__(0.5*a._value);a=this._textTimer.scaleY;a.set__(0.5*a._value);this._display=this._textTimer;this._entity.add(this._display)};i["com.nick.spongebob.sandy_sponge_stacker.ui.displays.DisplayTimer"]=h.displays.DisplayTimer;h.displays.DisplayTimer.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,displays,DisplayTimer".split(",");h.displays.DisplayTimer.__super__=h.displays.Display;h.displays.DisplayTimer.prototype=t(h.displays.Display.prototype,{_updateValue:function(){return g.constants.ConstantsApp.FLOAT_TIMER},_refresh:function(){this._textTimer.set_text(""+f.WorkinCloud.instance.getFloat(this._updateValue()))},__class__:h.displays.DisplayTimer});h.screens={};h.screens.ScreenBase=function(a,b,d){null==d&&(d=0);null==b&&(b="");this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";""==b&&(b=this._getAssetId());this.id=a;h.UserInterfaceElement.call(this,0,0,d,b);this._addEventListeners();this._buttons=[];this._buildButtons();this._flagStateAnimationComplete=this._flagStateCompleteTemp=this.flagDispose=!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+2;this._setFirstState()};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenBase"]=h.screens.ScreenBase;h.screens.ScreenBase.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenBase".split(",");h.screens.ScreenBase.__super__=h.UserInterfaceElement;h.screens.ScreenBase.prototype=t(h.UserInterfaceElement.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;""!=this._states[this._stateIndex].outFunc&&f.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");switch(this._states[this._stateIndex].actionOnComplete){case h.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();this._dispatcher.dispatchEvent(new p.WMEventScreenOut(g.constants.ConstantsScreen.OUTPUT_OPENED,this.id));break;case h.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new p.WMEventScreenOut(g.constants.ConstantsScreen.OUTPUT_CLOSED,this.id));break;case h.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);break;case h.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new p.WMEvent(this._states[this._stateIndex].actionData));break;case h.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData)}},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}
return-1},getState:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var d=this._findStateIndex(a);if(0>d)f.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),f.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");else if(b||d!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=d},_addState:function(a,b,d,c,e,f){null==f&&(f="");null==e&&(e="");null==c&&(c="");null==d&&(d=0);this._states.push(new h.screens.data.ScreenStateData(a,b,d,c,e,f))},isClosing:function(){return this.getState()==this._STATE_OUT},close:function(){this.setFlagDispose();this._dispatcher.dispatchEvent(new p.WMEventScreenOut(g.constants.ConstantsScreen.OUTPUT_CLOSED,this.id))},open:function(){this._setOpenedState();this._dispatcher.dispatchEvent(new p.WMEventScreenOut(g.constants.ConstantsScreen.OUTPUT_OPENED,this.id))},dispose:function(){for(var a=0,b=this._buttons;a<b.length;){var d=b[a];++a;d.dispose()}
this._buttons=null;this._removeEventListeners();this._states=null;h.UserInterfaceElement.prototype.dispose.call(this)},reset:function(){this._setFirstState()},handleInput:function(a){var b=!0;switch(a.input){case g.constants.ConstantsApp.INPUT_CLICK:switch(a.phase){case 1:this._onInputDown(a.x,a.y)||(b=!1);break;case 2:this._onInputMove(a.x,a.y)||(b=!1);break;case 0:this._onInputUp(a.x,a.y)||(b=!1)}
break;default:this._onInput(a)||(b=!1)}
return b},update:function(a){h.UserInterfaceElement.prototype.update.call(this,a);for(var a=0,b=this._buttons;a<b.length;){var d=b[a];++a;d.renderPosition()}
this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventFlow(a))},_addButton:function(a){this._buttons.push(a);this._entity.addChild(a._getEntity());return a},_buildButtons:function(){},_removeEventListeners:function(){},_addEventListeners:function(){},_onInput:function(){return!0},_onInputMove:function(){return!0},_onInputUp:function(){return!0},_onInputDown:function(){return!0},_generateStates:function(){this._addState(this._STATE_IN,"in",h.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",h.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setFirstState:function(){this._setState(this._STATE_IN)},setFlagDispose:function(){this.flagDispose=!0},_getAssetId:function(){return "MovieClip"},__class__:h.screens.ScreenBase});h.screens.ScreenEndGame=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._addButton(new h.displays.DisplayText("Game Over!",420,170,0,1));this._addButton(new h.displays.DisplayText("Your score: ",440,250,0,0.5));this._addButton(new h.displays.DisplayScore(570,250,0));this._buttonPlayAgain=new h.buttons.ButtonBase(480,350,0,"ui/menu_button_play_up.png","ui/menu_button_play_over.png","ui/menu_button_play_down.png",new o.WorkinPoint(1,0));a=this._buttonPlayAgain._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonPlayAgain._getDisplay().scaleY;a.set__(0.7*a._value);this._entity.addChild(this._buttonPlayAgain._getEntity());this._buttonPlayAgain._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onPlayAgainClick))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenEndGame"]=h.screens.ScreenEndGame;h.screens.ScreenEndGame.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenEndGame".split(",");h.screens.ScreenEndGame.__super__=h.screens.ScreenBase;h.screens.ScreenEndGame.prototype=t(h.screens.ScreenBase.prototype,{_onPlayAgainClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN)},__class__:h.screens.ScreenEndGame});h.screens.ScreenGameplayHUD=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._addButton(new h.buttons.ButtonBase(900,514,0,"ui/hud_button_pause_up.png","ui/hud_button_pause_up.png","ui/hud_button_pause_up.png",new o.WorkinPoint(1,0)))._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onPauseClick));this._addButton(new h.displays.DisplayText("Timer",60,38,0,0.5));this._addButton(new h.displays.DisplayTimer(77,80,0));this._addButton(new h.displays.DisplayText("Score",60,118,0,0.5));this._addButton(new h.displays.DisplayScore(75,160,0))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenGameplayHUD"]=h.screens.ScreenGameplayHUD;h.screens.ScreenGameplayHUD.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenGameplayHUD".split(",");h.screens.ScreenGameplayHUD.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayHUD.prototype=t(h.screens.ScreenBase.prototype,{_onPauseClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU)},__class__:h.screens.ScreenGameplayHUD});h.screens.ScreenGameplayMenu=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._soundIsMuted=f.WorkinCloud.instance._getSound().getMute();this._addButton(new h.displays.DisplayText("Menu",485,210,0,1));this._buttonBack=new h.buttons.ButtonBase(480,370,0,"ui/menu_button_play_up.png","ui/menu_button_play_up.png","ui/menu_button_play_up.png",new o.WorkinPoint(1,0));a=this._buttonBack._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonBack._getDisplay().scaleY;a.set__(0.7*a._value);this._entity.addChild(this._buttonBack._getEntity());this._buttonBack._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onBackClick));this._buttonHelp=new h.buttons.ButtonBase(390,290,0,"ui/menu_button_help_up.png","ui/menu_button_help_up.png","ui/menu_button_help_up.png",new o.WorkinPoint(1,0));a=this._buttonHelp._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonHelp._getDisplay().scaleY;a.set__(0.7*a._value);this._entity.addChild(this._buttonHelp._getEntity());this._buttonHelp._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onHelpClick));this._buttonSoundOn=new h.buttons.ButtonBase(510,305,0,"ui/menu_button_soundon_up.png","ui/menu_button_soundon_up.png","ui/menu_button_soundon_up.png",new o.WorkinPoint(1,0));a=this._buttonSoundOn._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonSoundOn._getDisplay().scaleY;a.set__(0.7*a._value);this._buttonSoundOn._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onSoundMute));this._buttonSoundOff=new h.buttons.ButtonBase(510,305,0,"ui/menu_button_soundoff_up.png","ui/menu_button_soundoff_up.png","ui/menu_button_soundoff_up.png",new o.WorkinPoint(1,0));a=this._buttonSoundOff._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonSoundOff._getDisplay().scaleY;a.set__(0.7*a._value);this._buttonSoundOff._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onSoundMute));this._soundIsMuted?this._entity.addChild(this._buttonSoundOff._getEntity()):this._entity.addChild(this._buttonSoundOn._getEntity());this._buttonQuit=new h.buttons.ButtonBase(620,305,0,"ui/menu_button_quit_up.png","ui/menu_button_quit_up.png","ui/menu_button_quit_up.png",new o.WorkinPoint(1,0));a=this._buttonQuit._getDisplay().scaleX;a.set__(0.7*a._value);a=this._buttonQuit._getDisplay().scaleY;a.set__(0.7*a._value);this._entity.addChild(this._buttonQuit._getEntity());this._buttonQuit._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onQuitClick))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenGameplayMenu"]=h.screens.ScreenGameplayMenu;h.screens.ScreenGameplayMenu.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenGameplayMenu".split(",");h.screens.ScreenGameplayMenu.__super__=h.screens.ScreenBase;h.screens.ScreenGameplayMenu.prototype=t(h.screens.ScreenBase.prototype,{_onQuitClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT)},_onHelpClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)},_onBackClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE)},_onSoundMute:function(){!1==this._soundIsMuted?(this._soundIsMuted=!0,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._entity.removeChild(this._buttonSoundOn._getEntity()),this._entity.addChild(this._buttonSoundOff._getEntity())):(this._soundIsMuted=!1,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._entity.removeChild(this._buttonSoundOff._getEntity()),this._entity.addChild(this._buttonSoundOn._getEntity()))},__class__:h.screens.ScreenGameplayMenu});h.screens.ScreenHelp=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c)};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenHelp"]=h.screens.ScreenHelp;h.screens.ScreenHelp.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenHelp".split(",");h.screens.ScreenHelp.__super__=h.screens.ScreenBase;h.screens.ScreenHelp.prototype=t(h.screens.ScreenBase.prototype,{_onInputDown:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_HELP_CLOSE);return!0},__class__:h.screens.ScreenHelp});h.screens.ScreenLoading=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._timerSpin=0.25;this._loadSpinner=new k.elements.Element({x:g.constants.ConstantsApp.STAGE_CENTER_X-470,y:g.constants.ConstantsApp.STAGE_CENTER_Y-125,ox:76,oy:75.5,asset:"loading_spinner"});this._entity.addChild(this._loadSpinner._getEntity())};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenLoading"]=h.screens.ScreenLoading;h.screens.ScreenLoading.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenLoading".split(",");h.screens.ScreenLoading.__super__=h.screens.ScreenBase;h.screens.ScreenLoading.prototype=t(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this);this._loadSpinner=null},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._loadSpinner.update(a);this._loadSpinner.renderPosition(new o.WorkinMotion(null));this._timerSpin-=a;0>=this._timerSpin&&(this._timerSpin=0.1,a=this._loadSpinner._display.rotation,a.set__(a._value+45))},__class__:h.screens.ScreenLoading});h.screens.ScreenNextLevel=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._addButton(new h.displays.DisplayText("Level",455,210,0,1));this._addButton(new h.displays.DisplayLevel(590,210,0));this._addButton(new h.displays.DisplayText("Tap anywhere to play!",280,417,0,0.8))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenNextLevel"]=h.screens.ScreenNextLevel;h.screens.ScreenNextLevel.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenNextLevel".split(",");h.screens.ScreenNextLevel.__super__=h.screens.ScreenBase;h.screens.ScreenNextLevel.prototype=t(h.screens.ScreenBase.prototype,{_onInputDown:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_END_LEVEL_QUIT);return!0},__class__:h.screens.ScreenNextLevel});h.screens.ScreenQuitConfirm=function(a,b,d,c){null==d&&(d=0);null==b&&(b="");h.screens.ScreenBase.call(this,a,b,d,c);this._addButton(new h.displays.DisplayText("Quit?",495,210,0,1));this._buttonYes=new h.buttons.ButtonBase(450,320,0,"ui/confirm_button_yes_up.png","ui/confirm_button_yes_up.png","ui/confirm_button_yes_up.png",new o.WorkinPoint(1,0));this._entity.addChild(this._buttonYes._getEntity());this._buttonYes._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onYesClick));this._buttonNo=new h.buttons.ButtonBase(600,320,0,"ui/confirm_button_no_up.png","ui/confirm_button_no_up.png","ui/confirm_button_no_up.png",new o.WorkinPoint(1,0));this._entity.addChild(this._buttonNo._getEntity());this._buttonNo._getDispatcher().addEventListener(h.buttons.ButtonBase.CLICK,z(this,this._onNoClick))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenQuitConfirm"]=h.screens.ScreenQuitConfirm;h.screens.ScreenQuitConfirm.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenQuitConfirm".split(",");h.screens.ScreenQuitConfirm.__super__=h.screens.ScreenBase;h.screens.ScreenQuitConfirm.prototype=t(h.screens.ScreenBase.prototype,{_onNoClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO)},_onYesClick:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES)},__class__:h.screens.ScreenQuitConfirm});h.screens.ScreenScreenshot=function(){};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenScreenshot"]=h.screens.ScreenScreenshot;h.screens.ScreenScreenshot.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenScreenshot".split(",");h.screens.ScreenScreenshot.__super__=h.screens.ScreenBase;h.screens.ScreenScreenshot.prototype=t(h.screens.ScreenBase.prototype,{dispose:function(){h.screens.ScreenBase.prototype.dispose.call(this)},__class__:h.screens.ScreenScreenshot});h.screens.ScreenSplash=function(a,b,d){null==b&&(b="");this._BLINK_TIME=0.8;h.screens.ScreenBase.call(this,a,b,0,d);this._blinkTimer=this._BLINK_TIME;this._clickToPlayImage=this._addButton(new h.displays.DisplayText("Tap anywhere to play!",580,500,0,0.7))};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.ScreenSplash"]=h.screens.ScreenSplash;h.screens.ScreenSplash.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,ScreenSplash".split(",");h.screens.ScreenSplash.__super__=h.screens.ScreenBase;h.screens.ScreenSplash.prototype=t(h.screens.ScreenBase.prototype,{_onInputDown:function(){this._doFlowEvent(g.constants.ConstantsScreen.FLOW_SPLASH_PLAY);return!0},update:function(a){h.screens.ScreenBase.prototype.update.call(this,a);this._blinkTimer-=a;0>=this._blinkTimer&&(580==this._clickToPlayImage.getTextPos()?this._clickToPlayImage.setTextPos(1E3):this._clickToPlayImage.setTextPos(580),this._blinkTimer=this._BLINK_TIME)},__class__:h.screens.ScreenSplash});h.screens.data={};h.screens.data.ScreenData=function(a,b,d,c,e){null==c&&(c=0);null==d&&(d="");this.id=a;this.screenClass=b;this.assetClassName=d;this.layer=c;this.data=null==e?new E:e};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.data.ScreenData"]=h.screens.data.ScreenData;h.screens.data.ScreenData.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,data,ScreenData".split(",");h.screens.data.ScreenData.prototype={__class__:h.screens.data.ScreenData};h.screens.data.ScreenQueueData=function(a,b,d){null==d&&(d="");this.screenData=a;this.openCondition=b;this.openTestString=d};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.data.ScreenQueueData"]=h.screens.data.ScreenQueueData;h.screens.data.ScreenQueueData.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,data,ScreenQueueData".split(",");h.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:h.screens.data.ScreenQueueData};h.screens.data.ScreenStateData=function(a,b,d,c,e,f){this.id=a;this.animation=b;this.actionOnComplete=d;this.actionData=c;this.inFunc=e;this.outFunc=f};i["com.nick.spongebob.sandy_sponge_stacker.ui.screens.data.ScreenStateData"]=h.screens.data.ScreenStateData;h.screens.data.ScreenStateData.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,screens,data,ScreenStateData".split(",");h.screens.data.ScreenStateData.prototype={__class__:h.screens.data.ScreenStateData};h.transitions={};h.transitions.TransitionBase=function(a,b,d,c){null==c&&(c="");null==d&&(d=!1);null==b&&(b=!0);this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=c;this._flagOutOnly=d;this.flagDispose=!1;h.UserInterfaceElement.call(this,0,0,1E3,a);b?this._setState(this._STATE_HIDDEN):this._flagOutOnly?this._setState(this._STATE_OUT):this._setState(this._STATE_IN)};i["com.nick.spongebob.sandy_sponge_stacker.ui.transitions.TransitionBase"]=h.transitions.TransitionBase;h.transitions.TransitionBase.__name__="com,nick,spongebob,sandy_sponge_stacker,ui,transitions,TransitionBase".split(",");h.transitions.TransitionBase.__super__=h.UserInterfaceElement;h.transitions.TransitionBase.prototype=t(h.UserInterfaceElement.prototype,{dispose:function(){h.UserInterfaceElement.prototype.dispose.call(this);this._mc=null},_setState:function(a){this._state=a;switch(this._state){case this._STATE_HIDDEN:this.hide()}},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this._setState(this._STATE_IN)},update:function(a){h.UserInterfaceElement.prototype.update.call(this,a)},_getIsOutro:function(){return this._state==this._STATE_OUT},__class__:h.transitions.TransitionBase});k={World:function(a,b){this._animCalled=this._dragging=this._moveUp=this._musicPlaying=!1;f.WorkinCloud.instance.log("World Created!");this._timeline=a;this._main=b;this._generate()}};i["com.nick.spongebob.sandy_sponge_stacker.world.World"]=k.World;k.World.__name__="com,nick,spongebob,sandy_sponge_stacker,world,World".split(",");k.World.prototype={_unpause:function(){f.WorkinCloud.instance.setValue(g.constants.ConstantsApp.BOOL_PAUSED,!1)},_pause:function(){f.WorkinCloud.instance.setValue(g.constants.ConstantsApp.BOOL_PAUSED,!0)},_onUnpause:function(){this._unpause()},_onPause:function(){this._pause()},handleInput:function(a){this._mouse=new F.Point(a.x,a.y);if(a.input==g.constants.ConstantsApp.INPUT_CLICK&&null!=this._sponge){var b=g.constants.ConstantsApp.SPONGE_WIDTH,d=g.constants.ConstantsApp.SPONGE_HEIGHT;1==a.phase&&a.x>this._sponge.pos._x-b/2&&a.x<this._sponge.pos._x+b/2&&a.y>this._sponge.pos._y-d&&a.y<this._sponge.pos._y?(this._offset=new F.Point(a.x-this._sponge.pos._x,a.y-this._sponge.pos._y),this._dragging=!0,this._removeElement(this._glow)):0==a.phase&&!0==this._dragging&&(this._game.stageMouseUp(),this._dragging=!1)}},_removeEventListeners:function(){f.WorkinCloud.instance.getDispatcher().removeEventListener(g.constants.ConstantsApp.EVENT_PAUSE,z(this,this._onPause));f.WorkinCloud.instance.getDispatcher().removeEventListener(g.constants.ConstantsApp.EVENT_UNPAUSE,z(this,this._onUnpause))},_addEventListeners:function(){f.WorkinCloud.instance.getDispatcher().addEventListener(g.constants.ConstantsApp.EVENT_PAUSE,z(this,this._onPause));f.WorkinCloud.instance.getDispatcher().addEventListener(g.constants.ConstantsApp.EVENT_UNPAUSE,z(this,this._onUnpause))},_removeElementAtIndex:function(a){this._elements[a].dispose();this._viewport.removeChild(this._elements[a]);this._elements[a].disposeDisplay();this._elements.splice(a,1)},_removeElement:function(a){for(var b=this._elements.length;0<b;)
if(b--,this._elements[b]==a){this._removeElementAtIndex(b);break}},_addElement:function(a){this._elements.push(a);this._viewport.addChild(a)},dispose:function(){for(;0<this._elements.length;)this._removeElementAtIndex(this._elements.length-1);this._timeline=this._camera=this._music=this._elements=null;this._removeEventListeners()},render:function(){for(var a=0;a<this._elements.length;)this._elements[a].renderPosition(this._camera),a++},update:function(a){if(!f.WorkinCloud.instance.getBool(g.constants.ConstantsApp.BOOL_PAUSED)){0.15<a&&(a=0.15);a=Math.round(1E3*a)/1E3;switch(this._state){case k.World._STATE_PLAYING:this._game._update(a);null!=this._sponge?(this._sponge._update(a),this._dragging&&!this._moveUp?(this._sponge._waiting=!1,this._sponge.pos._x=this._mouse.x-this._offset.x,this._sponge.pos._y=this._mouse.y-this._offset.y,200>this._sponge.pos._x&&(this._sponge.pos._x=200),930<this._sponge.pos._x&&(this._sponge.pos._x=930),35>this._sponge.pos._y&&(this._sponge.pos._y=35),515<this._sponge.pos._y&&(this._sponge.pos._y=515)):this._dragging=!1):!1==this._animCalled&&this._machine.createSponge();!0==this._game._tMan._indicatorBool&&this._game._tMan._indicator.update(a);for(var b=0,d=0,c=this._game._tMan._powerups;d<c.length;)++d,this._game._tMan._powerups[b].update(a),b++;if(this._moveUp){d=0;for(c=this._game._sMan._sponges;d<c.length;)b=c[d],++d,b.moveY(this._moveRate*a);d=0;for(c=this._game._tMan._powerups;d<c.length;)b=c[d],++d,b.moveY(this._moveRate*a);d=0;for(c=this._game._tMan._trees;d<c.length;)b=c[d],++d,b.moveY(this._moveRate*a);this._game._tMan._gary.moveY(this._moveRate*a);this._bgBottom.moveY(this._moveRate/3*a);this._bgLeaves.moveY(this._moveRate/3*a);this._bgLeaves2.moveY(this._moveRate/3*a);this._cameraY-=this._moveRate*a;this._cameraY<=this._moveDest&&(this._cameraY=this._moveDest,this._moveUp=!1,this._game._sMan.killShortStacks())}
0<this._game._tMan._gary.pos._y&&(this._removeElement(this._game._tMan._indicator),this._game._tMan._indicatorBool=!1);null!=this._spongeRotate&&this._spongeRotate._display.rotation._value!=this._spongeRotate._gRotation&&(0<this._spongeRotate._gRotation?(d=this._spongeRotate._display.rotation,d.set__(d._value+1)):(d=this._spongeRotate._display.rotation,d.set__(d._value-1)))}!1==this._musicPlaying&&(f.WorkinCloud.instance._getSound().playMusic("audio/Sound_BGM"),this._musicPlaying=!0)}},getScore:function(){return this._score},addScore:function(a){this._score+=a;f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_SCORE,this._score)},_setState:function(a){this._state!=a&&(this._state=a)},createSponge:function(){this._glow=new k.elements.Element({asset:"elements/AssetGlow.png",x:this._camera._getPos().getX()-g.constants.ConstantsApp.STAGE_CENTER_Y-39,y:g.constants.ConstantsApp.BASE_GROUND-84,layer:g.constants.ConstantsApp.LAYER_MAIN});this._addElement(this._glow);this._sponge=new k.elements.SpongeBob({x:this._camera._getPos().getX()-g.constants.ConstantsApp.STAGE_CENTER_Y,y:g.constants.ConstantsApp.BASE_GROUND,layer:g.constants.ConstantsApp.LAYER_SPONGES});this._addElement(this._sponge)},restart:function(){for(var a=0,b=this._elements.length;a<b;)a++,this._removeElement(this._elements[this._elements.length-
1]);this._spongeRotate=this._sponge=null;this._animCalled=!1;this._game=new k.elements.GameManager(this,this._level);this._addElement(new k.elements.Background({asset:"elements/AssetBgBack.png",y:g.constants.ConstantsApp.GROUND_Y_BASE,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._bgBottom=new k.elements.Element({asset:"elements/AssetBgBottom.png",y:0,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgBottom);this._bgLeaves=new k.elements.Element({asset:"elements/AssetBgLeaves.png",y:-958,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgLeaves);this._bgLeaves2=new k.elements.Element({asset:"elements/AssetBgLeaves.png",y:-1916,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgLeaves2);this._addElement(new k.elements.Element({asset:"elements/AssetDisplay.png",x:5,y:40,layer:g.constants.ConstantsApp.LAYER_MAIN,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._addElement(new k.elements.Element({asset:"elements/AssetStump.png",x:50,y:465,layer:g.constants.ConstantsApp.LAYER_MAIN,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._machine=new k.elements.Machine({x:40,y:292,layer:g.constants.ConstantsApp.LAYER_MAIN},this);this._addElement(this._machine);null},win:function(){this._moveUp=!1;this._level++;f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_LEVEL,this._level);this.restart();f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventFlow(g.constants.ConstantsScreen.FLOW_END_LEVEL_NEXT))},startMoveUp:function(){this._moveUp=!0;this._moveDest=this._cameraY-g.constants.ConstantsApp.STAGE_HEIGHT;this._moveRate=400},_generate:function(){this._viewport=new ba.Viewport(this._timeline);this._viewport.addLayer(g.constants.ConstantsApp.LAYER_BG);this._viewport.addLayer(g.constants.ConstantsApp.LAYER_MAIN);this._viewport.addLayer(g.constants.ConstantsApp.LAYER_SPONGES);this._viewport.addLayer(g.constants.ConstantsApp.LAYER_MAIN_TOP);this._elements=[];this._music=null;this._cameraY=0;this._addEventListeners();this._camera=new o.WorkinMotion(new o.WorkinPoint(g.constants.ConstantsApp.STAGE_CENTER_X,g.constants.ConstantsApp.STAGE_CENTER_Y),new o.WorkinPoint(g.constants.ConstantsApp.STAGE_CENTER_X,g.constants.ConstantsApp.STAGE_CENTER_Y));this._timerProgress=-1;this._score=0;this._level=1;this._state=-1;this._game=new k.elements.GameManager(this,this._level);this._addElement(new k.elements.Background({asset:"elements/AssetBgBack.jpg",y:g.constants.ConstantsApp.GROUND_Y_BASE,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._bgBottom=new k.elements.Element({asset:"elements/AssetBgBottom.png",y:0,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgBottom);this._bgLeaves=new k.elements.Element({asset:"elements/AssetBgLeaves.jpg",y:-958,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgLeaves);this._bgLeaves2=new k.elements.Element({asset:"elements/AssetBgLeaves.jpg",y:-1916,layer:g.constants.ConstantsApp.LAYER_BG,type:g.constants.ConstantsApp.TYPE_BACKGROUND});this._addElement(this._bgLeaves2);this._addElement(new k.elements.Element({asset:"elements/AssetDisplay.png",x:5,y:40,layer:g.constants.ConstantsApp.LAYER_MAIN,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._addElement(new k.elements.Element({asset:"elements/AssetStump.png",x:50,y:465,layer:g.constants.ConstantsApp.LAYER_MAIN,type:g.constants.ConstantsApp.TYPE_BACKGROUND}));this._machine=new k.elements.Machine({x:40,y:292,layer:g.constants.ConstantsApp.LAYER_MAIN},this);this._addElement(this._machine);this._setState(k.World._STATE_PLAYING)},__class__:k.World};k.elements={};k.elements.Element=function(a){this.group=a.group?a.group:"";this.carriable=!0;this._entity=new M;this._effects=[];this.pos=new o.WorkinPoint;this._velocity=new o.WorkinPoint;this._renderOffset=new o.WorkinPoint;this._scaleOffset=new o.WorkinPoint;a.asset?(this.assetId=a.asset,this._display=new j.ImageSprite(f.WorkinCloud.instance.getAssets().getTexture(this.assetId))):(this.assetId="",this._display=new j.Sprite);this._entity.add(this._display);this._toggleAlphaCount=this._toggleAlphaTimerReset=this._toggleAlphaTimer=0;this.layer=this._defaultLayer();a.layer&&(this.layer=a.layer);var b=new o.WorkinPoint;a.ox&&b.setX(a.ox);a.oy&&b.setY(a.oy);this.setOrigin(b);this.pos.setX(0);this.pos.setY(0);a.x&&this.pos.setX(a.x);a.y&&this.pos.setY(a.y);this.registrationPos=new o.WorkinPoint(this.pos.getX()+this.registrationXOffset(),this.pos.getY()+this.registrationYOffset());a.rot&&this._display.rotation.set__(a.rot);this._type=g.constants.ConstantsApp.TYPE_OBJECT;a.type&&(this._type=a.type);this._flagScaleOffsetChanged=!1;this._sin=n.random(100)/100;this._shimmerRandomize();this._addEventListeners();this.doDelete=!1};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Element"]=k.elements.Element;k.elements.Element.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Element".split(",");k.elements.Element.prototype={disposeDisplay:function(){this._display=null},_removeEventListeners:function(){},_addEventListeners:function(){},moveY:function(a){this.pos._y+=a},setOrigin:function(a){null!=this._display&&this._display.setAnchor(a.getX(),a.getY())},_onCompleteEffect:function(){},_shimmerRandomize:function(){this._shimmerAlphaTarget=Math.round(30+n.random(70))/100;this._shimmerRate=0.4+n.random(4)/6},_onApplyEffect:function(a,b,d){var c=d.magnitude;switch(a){case "pulse":this._flagScaleOffsetChanged=!0;this._sin+=50*b*c;this._scaleOffset.to(1+0.03*Math.sin(this._sin),1+0.03*Math.sin(this._sin));break;case "shakex":this._sin+=50*b;this._renderOffset.to(12*c*Math.sin(this._sin),0);break;case "shakey":this._sin+=50*b;this._renderOffset.to(0,12*c*Math.sin(this._sin));break;case "run":this._sin+=15*b*c;this._renderOffset.to(0,5*Math.sin(this._sin));break;case "shake":this._renderOffset.to(c*n.random(4)*(1>=n.random(2)?-1:1),c*n.random(4)*(1>=n.random(2)?-1:1));break;case "togglealpha":this._toggleAlphaTimer=this._toggleAlphaTimerReset=d._getDurDefault()/d.loops;this._toggleAlphaCount=0==d.loops?1:d.loops;break;case "shimmer":this._display.alpha._value>this._shimmerAlphaTarget?(a=this._display.alpha,a.set__(a._value-this._shimmerRate*b),this._display.alpha._value<=this._shimmerAlphaTarget&&(this._display.alpha.set__(this._shimmerAlphaTarget),this._shimmerRandomize())):this._display.alpha._value<this._shimmerAlphaTarget?(a=this._display.alpha,a.set__(a._value+this._shimmerRate*b),this._display.alpha._value>=this._shimmerAlphaTarget&&(this._display.alpha.set__(this._shimmerAlphaTarget),this._shimmerRandomize())):this._shimmerRandomize();break;case "sin":this._sin+=2.6*b,this._renderOffset.to(50*c*Math.sin(this._sin),this._renderOffset.getY())}},renderPosition:function(a){this._display.x.set__(this.pos.getX()-a._getPos().getX()+g.constants.ConstantsApp.STAGE_CENTER_X+this._renderOffset.getX());this._display.y.set__(this.pos.getY()-a._getPos().getY()+g.constants.ConstantsApp.STAGE_CENTER_Y+this._renderOffset.getY());this._despawnOffScreen()&&this._display.x._value<0-this._display.getNaturalWidth()&&(this.doDelete=!0)},updatePositionFromVelocity:function(a){var b=this.pos;b.setX(b.getX()+this._velocity.getX()*a);b=this.pos;b.setY(b.getY()+this._velocity.getY()*a);this.registrationPos=new o.WorkinPoint(this.pos.getX()+this.registrationXOffset(),this.pos.getY()+this.registrationYOffset())},update:function(a){for(var b=0;b<this._effects.length;)this._effects[b].update(a),this._effects[b].isActive()?this._onApplyEffect(this._effects[b].type,a,this._effects[b]):this._effects[b]._getWasActive()&&this._onCompleteEffect(this._effects[b].type),b++;0<this._toggleAlphaCount&&(this._toggleAlphaTimer-=a,0>this._toggleAlphaTimer&&(this._display.alpha.set__(0==this._display.alpha._value?1:0),this._toggleAlphaCount--,0<this._toggleAlphaCount&&(this._toggleAlphaTimer=this._toggleAlphaTimerReset)))},registrationYOffset:function(){return 0},registrationXOffset:function(){return 0},_despawnOffScreen:function(){return!0},_getEntity:function(){return this._entity},_defaultLayer:function(){return g.constants.ConstantsApp.LAYER_MAIN},dispose:function(){this.registrationPos=this._velocity=null;this._entity.dispose();this._entity=null;this._display.dispose();this._scaleOffset=this._renderOffset=this._display=null;this._removeEventListeners()},__class__:k.elements.Element};k.elements.Image=function(a){k.elements.Element.call(this,a);this._tweens=[];a.pId&&(this.id=a.pId);this._display.scaleX.set__(1);this._display.scaleY.set__(1);a.pScale&&(this._display.scaleX.set__(a.pScale.x),this._display.scaleY.set__(a.pScale.y));this._display.rotation.set__(0);a.pRot&&this._display.rotation.set__(a.pRot);this._display.alpha.set__(1);a.pAlpha&&this._display.alpha.set__(a.pAlpha)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Image"]=k.elements.Image;k.elements.Image.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Image".split(",");k.elements.Image.__super__=k.elements.Element;k.elements.Image.prototype=t(k.elements.Element.prototype,{_doMotionPoint:function(a){a=a._getPos().copy();if(0==a.getX()%1){var b=a;b.setX(b.getX()+0.0010)}
0==a.getY()%1&&(b=a,b.setY(b.getY()+0.0010));return a},_doMotionFloat:function(a){0==a%1&&(a+=0.0010);return a},update:function(a){k.elements.Element.prototype.update.call(this,a);if(null!=this._tweens){var b;new o.WorkinPoint;for(var d=this._tweens.length-1;-1<d;){b=this._tweens[d];b.update(a);switch(b._getType()){case "tx":b.isReady()?(b=this._doMotionFloat(b._getPos().getX(),a),0!=b%1&&this.pos.setX(b)):b.setStartFast(this.pos.getX(),this.pos.getX());break;case "ty":b.isReady()?this.pos.setY(this._doMotionFloat(b._getPos().getY(),a)):b.setStartFast(this.pos.getY(),this.pos.getY());break;case "rtx":b.isReady()?(b=this._doMotionFloat(b._getPos().getX(),a),0!=b%1&&this.pos.setX(b)):b.setStartFast(this.pos.getX(),this.pos.getX());break;case "rty":b.isReady()?this.pos.setY(this._doMotionFloat(b._getPos().getY(),a)):b.setStartFast(this.pos.getY(),this.pos.getY());break;case "t":b.isReady()?this.pos.toPoint(this._doMotionPoint(b,a)):b.setStart(this.pos);break;case "sx":b.isReady()?this._display.scaleX.set__(this._doMotionFloat(b._getPos().getX(),a)):b.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "sy":b.isReady()?this._display.scaleY.set__(this._doMotionFloat(b._getPos().getY(),a)):b.setStartFast(this._display.scaleY._value,this._display.scaleY._value);break;case "s":b.isReady()?(b=this._doMotionPoint(b,a),this._display.scaleX.set__(b.getX()),this._display.scaleY.set__(b.getY())):b.setStartFast(this._display.scaleX._value,this._display.scaleY._value);break;case "a":b.isReady()?this._display.alpha.set__(this._doMotionFloat(b._getPos().getX(),a)):b.setStartFast(this._display.alpha._value,this._display.alpha._value);break;case "r":b.isReady()?this._display.rotation.set__(this._doMotionFloat(b._getPos().getX(),a)):b.setStartFast(this._display.rotation._value,this._display.rotation._value)}
this._tweens[d].complete&&this._tweens.splice(d,1);d--}}},dispose:function(){this._tweens=null;k.elements.Element.prototype.dispose.call(this)},__class__:k.elements.Image});k.elements.AnimatedElement=function(a){this._currentAnimation="";this._currentFrame=0;k.elements.Image.call(this,a);this._animations=new E;this._lastFrame=-1;a.library&&(this._display.dispose(),a=f.WorkinCloud.instance.getAssets().getLibrary(a.library)._symbols.get(a.movie),this._duration=a.duration,this._frames=a.frames,this._movie=a.createSprite(),this._movie.set_paused(!0),this.tileWidth=this._movie.getNaturalWidth(),this.tileHeight=this._movie.getNaturalHeight(),this._display=this._movie,this._entity.add(this._movie))};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.AnimatedElement"]=k.elements.AnimatedElement;k.elements.AnimatedElement.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,AnimatedElement".split(",");k.elements.AnimatedElement.__super__=k.elements.Image;k.elements.AnimatedElement.prototype=t(k.elements.Image.prototype,{dispose:function(){this._animations=this._movie=null;k.elements.Image.prototype.dispose.call(this)},_onAnimationComplete:function(){},update:function(a){k.elements.Image.prototype.update.call(this,a);if(""!=this._currentAnimation&&(0<this._currentLoop||this._flagLoop))this._currentFrame+=g.constants.ConstantsApp.FRAMES_PER_SECOND*a,this._currentFrame>this._currentFrameList[1]&&(this._currentLoop--,1>this._currentLoop&&!1==this._flagLoop?this._onAnimationComplete(this._currentAnimation):this._currentFrame=this._currentFrameList[0]),null!=this._movie&&(this._currentFrame|0)!=this._lastFrame&&this._movie.set_position(this._currentFrame/this._frames*this._duration),this._lastFrame=this._currentFrame|0},playAnimation:function(a,b){null==b&&(b=0);null!=this._animations&&(this._animations.exists(a)?(this._currentFrameList=null,this._currentFrameList=this._animations.get(a).slice(),this._currentFrame=this._currentFrameList[0],this._currentAnimation=a,this._currentLoop=b,this._flagLoop=0==b):f.WorkinCloud.instance.log("Animation not found: "+a+" "+n.string(this._animations)))},addAnimation:function(a,b,d){this._animations.set(a,[b,d])},__class__:k.elements.AnimatedElement});k.elements.Background=function(a){k.elements.Element.call(this,a)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Background"]=k.elements.Background;k.elements.Background.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Background".split(",");k.elements.Background.__super__=k.elements.Element;k.elements.Background.prototype=t(k.elements.Element.prototype,{renderPosition:function(){this._display.x.set__(this._display.y.set__(0))},__class__:k.elements.Background});k.elements.GameManager=function(a,b){this._gameOver=!1;k.elements.GameManager._instance=this;this._doc=a;this._level=b;this._runGame=!0;this._mYSpeed=this._mXSpeed=this._pMouseY=this._pMouseX=0;this._dying=!1;10<b&&(b=10);this._gameTime=20+4*b;this.init()};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.GameManager"]=k.elements.GameManager;k.elements.GameManager.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,GameManager".split(",");k.elements.GameManager.getInstance=function(){return k.elements.GameManager._instance};k.elements.GameManager.prototype={noSpongeSpawn:function(){this._dying=!0},addTime:function(a){this._gameTime+=a},addScore:function(a){this._doc.addScore(a)},stageMouseUp:function(){null!=this._doc._sponge&&(this._sMan._sponges.push(this._doc._sponge),this._sMan.dropSponge(this._sMan._sponges[this._sMan._sponges.length-1]),this._doc._sponge=null)},gameOver:function(){this._runGame=!1;this._doc.restart();this._doc._main._gotoEndGame(!1)},manageScore:function(){this._score=this._doc.getScore()},manageTimer:function(a){this._gameTime-=a;f.WorkinCloud.instance.setFloat(g.constants.ConstantsApp.FLOAT_TIMER,Math.round(this._gameTime));0>this._gameTime&&!this._gameOver&&(this._gameTime=0,this._gameOver=!0,this.gameOver())},stopGame:function(){this._runGame=!1;this._doc.win();this.addScore(100*this._level)},_update:function(a){this._runGame&&(this.manageScore(),this._sMan._update(a),this._doc._machine._update(a),null!=this._tMan._gary&&this._tMan._gary._update(a),this.manageTimer(a))},init:function(){this._sMan=new k.elements.SpongeManager(this,this._level);this._tMan=new k.elements.TreeManager(this,this._level);this._tMan.buildLevel(this._level)},__class__:k.elements.GameManager};k.elements.Gary=function(a){a.type=g.constants.ConstantsApp.TYPE_OBJECT;a.library="anim_player";a.movie="Gary";k.elements.AnimatedElement.call(this,a);this.setOrigin(new o.WorkinPoint(0,-40));this.addAnimation("idle",0,174);this.playAnimation("idle")};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Gary"]=k.elements.Gary;k.elements.Gary.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Gary".split(",");k.elements.Gary.__super__=k.elements.AnimatedElement;k.elements.Gary.prototype=t(k.elements.AnimatedElement.prototype,{_update:function(a){k.elements.AnimatedElement.prototype.update.call(this,a)},testCollision:function(a,b,d){return Math.abs(this.pos.getX()+10-a.getX())<b+this.collisionRadius()&&this.pos.getY()+10<a.getY()+this.collisionRadius()&&Math.abs(this.pos.getY()+10-a.getY())<d+this.collisionRadius()?!0:!1},collisionRadius:function(){return 10},registrationYOffset:function(){return this._display.getNaturalHeight()},registrationXOffset:function(){return this._display.getNaturalWidth()},__class__:k.elements.Gary});k.elements.Indicator=function(a){a.type=g.constants.ConstantsApp.TYPE_OBJECT;a.asset="elements/AssetIndicator.png";this._sinDisplay=Math.random()*Math.PI;k.elements.Element.call(this,a)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Indicator"]=k.elements.Indicator;k.elements.Indicator.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Indicator".split(",");k.elements.Indicator.__super__=k.elements.Element;k.elements.Indicator.prototype=t(k.elements.Element.prototype,{renderPosition:function(a){k.elements.Element.prototype.renderPosition.call(this,a);a=this._display.y;a.set__(a._value+8*Math.sin(this._sinDisplay))},update:function(a){k.elements.Element.prototype.update.call(this,a);this._sinDisplay+=4*a},__class__:k.elements.Indicator});k.elements.Machine=function(a,b){this._doc=b;a.type=g.constants.ConstantsApp.TYPE_BACKGROUND;a.library="anim_player";a.movie="Cloning machine";k.elements.AnimatedElement.call(this,a);var d=this._display.scaleX;d.set__(1.1*d._value);d=this._display.scaleY;d.set__(1.1*d._value);this.addAnimation("stand",0,23);this.addAnimation("create",24,40)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Machine"]=k.elements.Machine;k.elements.Machine.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Machine".split(",");k.elements.Machine.__super__=k.elements.AnimatedElement;k.elements.Machine.prototype=t(k.elements.AnimatedElement.prototype,{_update:function(a){k.elements.AnimatedElement.prototype.update.call(this,a)},_onAnimationComplete:function(){this._doc.createSponge();this._doc._animCalled=!1;this.playAnimation("stand")},createSponge:function(){this._doc._animCalled=!0;f.WorkinCloud.instance._getSound().playSound("audio/Sound_newSponge");this.playAnimation("create",1)},__class__:k.elements.Machine});k.elements.Powerup=function(a){this._chooseType();a.type=g.constants.ConstantsApp.TYPE_OBJECT;a.asset=this._assetId();this._sinDisplay=Math.random()*Math.PI;k.elements.Element.call(this,a)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Powerup"]=k.elements.Powerup;k.elements.Powerup.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Powerup".split(",");k.elements.Powerup.__super__=k.elements.Element;k.elements.Powerup.prototype=t(k.elements.Element.prototype,{renderPosition:function(a){k.elements.Element.prototype.renderPosition.call(this,a);a=this._display.y;a.set__(a._value+5*Math.sin(this._sinDisplay))},update:function(a){k.elements.Element.prototype.update.call(this,a);this._sinDisplay+=3*a},testCollision:function(a,b,d){return Math.abs(this.pos.getX()+
10-a.getX())<b+this.collisionRadius()&&this.pos.getY()+10<a.getY()+this.collisionRadius()&&Math.abs(this.pos.getY()+10-a.getY())<d+this.collisionRadius()?!0:!1},collisionRadius:function(){return 10},_assetId:function(){switch(this._typeObject){case 1:return "elements/AssetPickup1.png";case 2:return "elements/AssetPickup2.png";case 3:return "elements/AssetPickup3.png";case 4:return "elements/AssetPickup4.png";default:return ""}},_chooseType:function(){this._typeObject=f.WorkinUtils.getRandom(1,4)|0},registrationYOffset:function(){return this._display.getNaturalHeight()},registrationXOffset:function(){return this._display.getNaturalWidth()},__class__:k.elements.Powerup});k.elements.SpongeBob=function(a){this._prevAnim=0;a.type=g.constants.ConstantsApp.TYPE_PLAYER;a.library="anim_player";a.movie="com.nick.spongebob_anniversary.sponge_stacker.SpongeBob";k.elements.AnimatedElement.call(this,a);this.addAnimation("stand",0,0);this.addAnimation("grabbed",1,14);this.addAnimation("drop",15,30);this.addAnimation("land",31,37);this.addAnimation("idle",38,197);this.addAnimation("fall",198,227);this.addAnimation("die",228,243);this._renderOffset.to(this.registrationXOffset(),this.registrationYOffset());this._doc=k.elements.GameManager.getInstance();this._ySpeed=this._xSpeed=0;this._ground=g.constants.ConstantsApp.BASE_GROUND;this._gRotation=0;this._alive=!0;this._dragging=this._grounded=!1;this._waiting=!0;this._falling=this._mouseChildren=this._killOnGround=!1;this._buttonMode=!0;this.setOrigin(new o.WorkinPoint(0,35));a=this._display.scaleX;a.set__(0.98*a._value);a=this._display.scaleY;a.set__(0.98*a._value);this.animState(1)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.SpongeBob"]=k.elements.SpongeBob;k.elements.SpongeBob.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,SpongeBob".split(",");k.elements.SpongeBob.__super__=k.elements.AnimatedElement;k.elements.SpongeBob.prototype=t(k.elements.AnimatedElement.prototype,{animState:function(a){if(this._prevAnim!=a)switch(a){case 1:this.playAnimation("stand");this._prevAnim=1;break;case 2:this.playAnimation("grabbed");this._prevAnim=2;break;case 3:this.playAnimation("drop");this._prevAnim=3;break;case 4:this.playAnimation("land",1);this._prevAnim=4;break;case 5:this.playAnimation("idle");this._prevAnim=5;break;case 6:this.playAnimation("fall");this._prevAnim=6;break;case 7:this.playAnimation("die"),this._prevAnim=7}},_onAnimationComplete:function(){this.animState(5)},isFalling:function(){return this._falling},setKillOnGround:function(a){null==a&&(a=!0);if(this._killOnGround=a)this._ground=g.constants.ConstantsApp.BASE_GROUND+
200},instantKill:function(){this._alive=!1},isAlive:function(){return this._alive},getGRotation:function(){return this._gRotation},getStack:function(){return this._myStack},setStack:function(a){this._myStack=a},getGround:function(){return this._ground},setGround:function(a,b){this._ground=a;this._gRotation=b},unGround:function(){this._grounded=!1;this.animState(7);this.setKillOnGround();1==n.random(2)?f.WorkinCloud.instance._getSound().playSound("audio/Sound_fall1"):f.WorkinCloud.instance._getSound().playSound("audio/Sound_fall2")},kill:function(){this.unGround();this._ySpeed=0;this._falling=!0;this.setKillOnGround()},_update:function(a){k.elements.AnimatedElement.prototype.update.call(this,a);this._killOnGround&&this.pos.getY()>g.constants.ConstantsApp.BASE_GROUND+150&&(this._alive=!1,this._doc._doc._spongeRotate=null);this._falling&&(7!=this._prevAnim&&this.animState(7),this.pos._x+=this._xSpeed*a,this.pos._y+=this._ySpeed*a,this._ySpeed+=k.elements.SpongeBob.GRAVITY*a,this._myStack._doc.killStack(this._myStack));if(!this._waiting)
if(this._dragging=this._doc._doc._dragging,!this._dragging&&!this._grounded)this.pos._y+this._ySpeed*a>this._ground&&(7!=this._prevAnim&&this.animState(3),this._ySpeed=0,this.pos._y=this._ground,this._killOnGround&&this.pos.getY()>g.constants.ConstantsApp.BASE_GROUND+150?(this._alive=!1,this._doc._doc._spongeRotate=null):(this._grounded=!0,this._myStack.isBalanced()?this.animState(4):this.animState(6),f.WorkinCloud.instance._getSound().playSound("audio/Sound_stack"),this._doc._doc._spongeRotate=this,this._doc.addScore(5))),this.pos._x+=this._xSpeed*a,this.pos._y+=this._ySpeed*a,this._ySpeed+=k.elements.SpongeBob.GRAVITY*a;else if(this._dragging&&!this._grounded)7!=this._prevAnim&&this.animState(2);else if(this._grounded){this._myStack.isBalanced()&&4!=this._prevAnim&&5!=this._prevAnim&&this.animState(4);this._doc._tMan._gary.testCollision(new o.WorkinPoint(this.pos._x,this.pos._y),60,120)&&(f.WorkinCloud.instance._getSound().playSound("audio/Sound_levelUp"),f.WorkinCloud.instance._getSound().playSound("audio/Sound_missionComplete"),this._doc.stopGame());for(var b=a=0,d=this._doc._tMan._powerups;b<d.length;)++b,this._doc._tMan._powerups[a].testCollision(new o.WorkinPoint(this.pos._x,this.pos._y),60,120)&&(this._doc._doc._removeElement(this._doc._tMan._powerups[a]),this._doc._tMan._powerups.splice(a,1),f.WorkinCloud.instance._getSound().playSound("audio/Sound_levelUp"),this._doc.addScore(200),this._doc.addTime(2)),a++}},__class__:k.elements.SpongeBob});k.elements.SpongeManager=function(a,b){this._moveUpTimes=1;this._doc=a;this._level=b;this._sponges=[];this._stacks=[];this._groundFloor=!0;this._lastHeight=380;this._heightOffset=330};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.SpongeManager"]=k.elements.SpongeManager;k.elements.SpongeManager.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,SpongeManager".split(",");k.elements.SpongeManager.prototype={noSpongeSpawn:function(){this._groundFloor||this._doc.noSpongeSpawn()},killStack:function(a){for(var b=0,d=0,c=this._stacks;d<c.length;)++d,this._stacks[b]==a&&this._stacks[b]._sponges[0].pos.getY()>g.constants.ConstantsApp.BASE_GROUND+140&&(this._groundFloor||this._doc.gameOver(),this._stacks.splice(b,1)),b++},sortOnHeight:function(a,b){return a.getHeight()>b.getHeight()?1:a.getHeight()<b.getHeight()?-1:0},sortOnY:function(a,b){return a.pos._y>b.pos._y?1:a.pos._y<b.pos._y?-1:0},killShortStacks:function(){for(var a=0,b=0,d=this._stacks;b<d.length;)++b,this._stacks[a].trimStack(),a++},moveUp:function(a){this._groundFloor=!1;var b=k.elements.TreeManager._maxHeight;560-a.pos._y+280>b&&(this._lastMove=a=b-a.pos._y);for(var b=a=0,d=this._sponges;b<d.length;)++b,this._sponges[a]._yPrev=this._sponges[a].pos._y,a++;b=a=0;for(d=this._doc._tMan._powerups;b<d.length;)++b,this._doc._tMan._powerups[a]._yPrev=this._doc._tMan._powerups[a].pos._y,a++;b=a=0;for(d=this._doc._tMan._trees;b<d.length;)++b,this._doc._tMan._trees[a]._yPrev=this._doc._tMan._trees[a].pos._y,a++;this._doc._tMan._gary._yPrev=this._doc._tMan._gary.pos._y;this._doc._doc._bgBottom._yPrev=this._doc._doc._bgBottom.pos._y;this._doc._doc._bgLeaves._yPrev=this._doc._doc._bgLeaves.pos._y;this._doc._doc._bgLeaves2._yPrev=this._doc._doc._bgLeaves2.pos._y;this._doc._doc.startMoveUp();this._moveUpTimes++},checkStackHeight:function(a){this._stacks.sort(z(this,this.sortOnHeight));this._stacks[0].getHeight()<this._lastHeight-this._heightOffset&&0>this._doc._tMan._gary.pos._y&&this.moveUp(a)},dropSponge:function(a){var b=!1;this._sponges.sort(z(this,this.sortOnY));for(var d=0,c=0,e=this._sponges;c<e.length;){++c;if(this._sponges[d]!=a&&this._sponges[d].pos._y>a.pos._y&&this._sponges[d].isAlive()&&!this._sponges[d].isFalling()){var f=Math.abs(a.pos._x-this._sponges[d].pos._x);if(50>=f){b=Math.sqrt(6400-f*f);f=57.2957795*Math.atan(b/f)-90;a.pos._x>this._sponges[d].pos._x&&(f=-f);a.setGround(this._sponges[d].pos._y-b|0,f|0);this._sponges[d].getStack().addSponge(a);b=!0;break}}
d++}
b?b&&this.checkStackHeight(a):this._groundFloor?(d=new k.elements.Stack(this),d.addSponge(a),this._stacks.push(d)):a.setKillOnGround()},_update:function(a){for(var b=0,d=0,c=this._sponges;d<c.length;)++d,null!=this._sponges[b]&&(this._sponges[b]._update(a),this._sponges[b].isAlive()||(this._doc._doc._removeElement(this._sponges[b]),this._sponges.splice(b,1))),b++;d=b=0;for(c=this._stacks;d<c.length;)++d,null!=this._stacks[b]&&this._stacks[b]._update(a),b++},__class__:k.elements.SpongeManager};k.elements.Stack=function(a){this._doc=a;this._balance=0;this._fallCounterMax=this._fallCounter=5;this._balanceNumber=70;this._sponges=[];this._dead=this._offBalance=!1};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Stack"]=k.elements.Stack;k.elements.Stack.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Stack".split(",");k.elements.Stack.prototype={getHeight:function(){this._sponges.sort((da=this._doc,z(da,da.sortOnY)));return this._sponges[0].getGround()},isBalanced:function(){return!this._offBalance},killStack:function(){for(var a=0,b=0,d=this._sponges;b<d.length;)++b,this._sponges[a].animState(7),this._sponges[a].kill(),a++;this._doc.killStack(this)},trimStack:function(){this._sponges.sort((da=this._doc,z(da,da.sortOnY)));for(var a=3,b=this._sponges.length;a<b;)this._sponges[a++].instantKill();this._sponges.splice(4,this._sponges.length-5);this._balance=0;this._fallCounter=this._fallCounterMax;this._offBalance=!1},manageBalance:function(a){this._offBalance&&!this._dead&&(this._fallCounter-=a,0>=this._fallCounter&&(this.killStack(),this._dead=!0,this._doc.noSpongeSpawn()))},_update:function(a){this.manageBalance(a)},addSponge:function(a){this._balance+=a.getGRotation();this._sponges.push(a);a.setStack(this);a=0;if(this._offBalance&&this._balance<this._balanceNumber&&this._balance>-this._balanceNumber){this._fallCounter=this._fallCounterMax;this._offBalance=!1;for(var b=0,d=this._sponges;b<d.length;)++b,this._sponges[a].animState(5),a++}
if(this._balance>this._balanceNumber||this._balance<-this._balanceNumber){this._offBalance=!0;d=0;for(b=this._sponges.length-1;d<b;)this._sponges[d++].animState(6)}},__class__:k.elements.Stack};k.elements.Tree=function(a){this._chooseType();a.type=g.constants.ConstantsApp.TYPE_OBJECT;null==a.asset&&(a.asset=this._assetId());k.elements.Element.call(this,a)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.Tree"]=k.elements.Tree;k.elements.Tree.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,Tree".split(",");k.elements.Tree.__super__=k.elements.Element;k.elements.Tree.prototype=t(k.elements.Element.prototype,{_assetId:function(){switch(this._typeObject){case 1:return "elements/AssetTree1.png";case 2:return "elements/AssetTree2.png";case 3:return "elements/AssetTree3.png";case 4:return "elements/AssetTree4.png";default:return ""}},_chooseType:function(){this._typeObject=f.WorkinUtils.getRandom(1,4)|0},__class__:k.elements.Tree});k.elements.TreeManager=function(a,b){this._doc=a;this._level=b;this._indicatorBool=!1;this._trees=[];this._powerups=[];10<this._level&&(this._level=10);k.elements.TreeManager._maxHeight=g.constants.ConstantsApp.STAGE_HEIGHT*this._level-g.constants.ConstantsApp.STAGE_HEIGHT};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.TreeManager"]=k.elements.TreeManager;k.elements.TreeManager.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,TreeManager".split(",");k.elements.TreeManager.prototype={placeObject:function(a,b){switch(a){case 1:switch(b){case 1:return new o.WorkinPoint(205,130);case 2:return new o.WorkinPoint(288,130);case 3:return new o.WorkinPoint(405,120);case 4:return new o.WorkinPoint(460,30);case 5:return new o.WorkinPoint(545,100);case 6:return new o.WorkinPoint(659,80);default:return new o.WorkinPoint(0,0)}
case 2:switch(b){case 1:return new o.WorkinPoint(220,80);case 2:return new o.WorkinPoint(390,200);case 3:return new o.WorkinPoint(554,120);case 4:return new o.WorkinPoint(250,350);case 5:return new o.WorkinPoint(404,355);case 6:return new o.WorkinPoint(604,390);default:return new o.WorkinPoint(0,0)}
case 3:switch(b){case 1:return new o.WorkinPoint(251,75);case 2:return new o.WorkinPoint(277,289);case 3:return new o.WorkinPoint(437,300);case 4:return new o.WorkinPoint(485,410);case 5:return new o.WorkinPoint(577,285);case 6:return new o.WorkinPoint(747,270);default:return new o.WorkinPoint(0,0)}
case 4:switch(b){case 1:return new o.WorkinPoint(226,135);case 2:return new o.WorkinPoint(240,364);case 3:return new o.WorkinPoint(333,365);case 4:return new o.WorkinPoint(516,380);case 5:return new o.WorkinPoint(603,255);case 6:return new o.WorkinPoint(708,330);default:return new o.WorkinPoint(0,0)}
default:return new o.WorkinPoint(0,0)}},buildLevel:function(a){this._level=a;10<this._level&&(this._level=10);for(var a=0,b=this._level+1;a<b;){var d=a++;0==d?(d=new k.elements.Tree({x:-2,y:0,layer:g.constants.ConstantsApp.LAYER_MAIN,asset:"elements/AssetTree1.png"}),d._typeObject=1):d=new k.elements.Tree({x:-2,y:-(d*g.constants.ConstantsApp.STAGE_HEIGHT),layer:g.constants.ConstantsApp.LAYER_MAIN});this._doc._doc._addElement(d);this._trees.push(d)}
if(1<this._level){a=0;for(b=this._level-1;a<b;)
for(var d=a++,c=0,e=f.WorkinUtils.getRandom(1,3,!0)|0;c<e;)
if(c++,0<f.WorkinUtils.getRandom(0,4,!0)){for(var h=f.WorkinUtils.getRandom(1,6,!0)|0,h=this.placeObject(this._trees[d]._typeObject,h),h=new k.elements.Powerup({x:h.getX(),y:-(d*g.constants.ConstantsApp.STAGE_HEIGHT)+h.getY(),layer:g.constants.ConstantsApp.LAYER_SPONGES}),i=0,j=0,l=this._powerups;j<l.length;){var m=l[j];++j;m.pos==this._powerups[i].pos&&(m=f.WorkinUtils.getRandom(1,6,!0)|0,m=this.placeObject(this._trees[d]._typeObject,m),new k.elements.Powerup({x:m.getX(),y:-(d*g.constants.ConstantsApp.STAGE_HEIGHT)+m.getY(),layer:g.constants.ConstantsApp.LAYER_SPONGES}));i++}
this._doc._doc._addElement(h);this._powerups.push(h)}}
h=this.placeObject(this._trees[this._trees.length-2]._typeObject,f.WorkinUtils.getRandom(1,6,!0)|0);this._gary=new k.elements.Gary({x:h.getX(),y:-((this._level-1)*g.constants.ConstantsApp.STAGE_HEIGHT)+h.getY(),layer:g.constants.ConstantsApp.LAYER_SPONGES});this._doc._doc._addElement(this._gary);1<this._level&&(this._indicatorBool=!0,this._indicator=new k.elements.Indicator({x:this._gary.pos._x,y:20,layer:g.constants.ConstantsApp.LAYER_MAIN_TOP}),this._doc._doc._addElement(this._indicator))},__class__:k.elements.TreeManager};k.elements.effects={};k.elements.effects.EffectBasic=function(a){this._lifespanMax=0;a.lifespan&&(this._lifespanMax=a.lifespan);this._flagScreenlock=!1;a.screenlock&&(this._flagScreenlock=a.screenlock);this._lifespanRemaining=this._lifespanMax;this._flagLifespan=0<this._lifespanMax;this._gravity=0;a.gravity&&(this._gravity=a.gravity);this._velocity=new o.WorkinPoint(0,0);a.velocity&&(this._velocity=a.velocity.copy());a.noAnimation||(a.rows||(a.rows=4),a.columns||(a.columns=5));k.elements.AnimatedElement.call(this,a);a.noAnimation||(this.addAnimation("in",0,5),this.addAnimation("idle",7,12),this.addAnimation("out",13,17));this._setState(0)};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.effects.EffectBasic"]=k.elements.effects.EffectBasic;k.elements.effects.EffectBasic.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,effects,EffectBasic".split(",");k.elements.effects.EffectBasic.__super__=k.elements.AnimatedElement;k.elements.effects.EffectBasic.prototype=t(k.elements.AnimatedElement.prototype,{_doOut:function(){this.playAnimation("out",1)},_doIdle:function(){this._flagLifespan?this.playAnimation("idle"):this.playAnimation("idle",1)},_doIn:function(){this.playAnimation("in",1)},_setState:function(a){this._state=a;switch(this._state){case 0:this._doIn();break;case 1:this._doIdle();break;case 2:this._doOut()}},_onAnimationComplete:function(){0==this._state?this._setState(1):1==this._state?this._flagLifespan||this._setState(2):2==this._state&&(this.doDelete=!0)},_doLifespanDecrement:function(a){2!=this._state&&this._flagLifespan&&(this._lifespanRemaining-=a,0>=this._lifespanRemaining&&this._setState(2))},_doMotion:function(a){var b=this._velocity;b.setY(b.getY()+this._gravity*a);this.updatePositionFromVelocity(a)},renderPosition:function(a){this._flagScreenlock?(this._display.x.set__(g.constants.ConstantsApp.STAGE_CENTER_X-this.tileWidth/2),this._display.y.set__(g.constants.ConstantsApp.STAGE_CENTER_Y-
this.tileHeight/2)):k.elements.AnimatedElement.prototype.renderPosition.call(this,a)},update:function(a){k.elements.AnimatedElement.prototype.update.call(this,a);this._doMotion(a);this._doLifespanDecrement(a)},__class__:k.elements.effects.EffectBasic});k.elements.effects.EffectFloatingScoreText=function(){};i["com.nick.spongebob.sandy_sponge_stacker.world.elements.effects.EffectFloatingScoreText"]=k.elements.effects.EffectFloatingScoreText;k.elements.effects.EffectFloatingScoreText.__name__="com,nick,spongebob,sandy_sponge_stacker,world,elements,effects,EffectFloatingScoreText".split(",");k.elements.effects.EffectFloatingScoreText.__super__=k.elements.effects.EffectBasic;k.elements.effects.EffectFloatingScoreText.prototype=t(k.elements.effects.EffectBasic.prototype,{update:function(a){this._doMotion(a);0==this._state?(this._stateProgress+=3*a,1<=this._stateProgress?this._setState(1):this._display.scaleX.set__(this._display.scaleY.set__(1+(1-this._stateProgress)))):1==this._state?this._doLifespanDecrement(a):2==this._state&&(this._stateProgress+=3*a,1<=this._stateProgress?this.doDelete=!0:this._display.alpha.set__(1-this._stateProgress/1))},_setState:function(a){this._state=a;this._stateProgress=0},__class__:k.elements.effects.EffectFloatingScoreText});A=void 0;M=void 0;j=void 0;c=void 0;F=void 0;l=void 0;I=void 0;v=void 0;s=void 0;D=void 0;e=void 0;Q=void 0;w=void 0;C=void 0;w=void 0;Z=void 0;w=void 0;w=void 0;l={Disposable:function(){}};i["flambe.util.Disposable"]=l.Disposable;l.Disposable.__name__=["flambe","util","Disposable"];l.Disposable.prototype={__class__:l.Disposable};I=function(){};i["flambe.Component"]=I;I.__name__=["flambe","Component"];I.__interfaces__=[l.Disposable];I.prototype={_internal_init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:I};Y={Updater:function(){this._paused=!1}};i["com.workinman.components.Updater"]=Y.Updater;Y.Updater.__name__=["com","workinman","components","Updater"];Y.Updater.__super__=I;Y.Updater.prototype=t(I.prototype,{setPaused:function(a){return this._paused=a},getPaused:function(){return this._paused},onUpdate:function(a){this._paused||f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventUpdate(a))},get_name:function(){return "Updater_3"},__class__:Y.Updater});P={ConstantsCloud:function(){}};i["com.workinman.data.ConstantsCloud"]=P.ConstantsCloud;P.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];Q={EffectDef:function(){}};i["com.workinman.defs.EffectDef"]=Q.EffectDef;Q.EffectDef.__name__=["com","workinman","defs","EffectDef"];Q.EffectDef.prototype={isActive:function(){return 0>=this.delay&&0<this.dur},_getWasActive:function(){return this._flagWasActive},_getDurDefault:function(){return this._durDefault},update:function(a){this._flagWasActive=this.isActive();0>this.dur||(0<this.delay?this.delay-=a:this.dur-=a)},__class__:Q.EffectDef};ba={Viewport:function(a){this._timeline=a;this._layers=new E}};i["com.workinman.display.Viewport"]=ba.Viewport;ba.Viewport.__name__=["com","workinman","display","Viewport"];ba.Viewport.prototype={removeChild:function(a){null!=a&&this._layers.exists(a.layer)&&this._layers.get(a.layer).removeChild(a._getEntity())},addChild:function(a){null!=a&&this._layers.exists(a.layer)&&this._layers.get(a.layer).addChild(a._getEntity())},addLayer:function(a){var b=new M;this._timeline.addChild(b);this._layers.set(a,b)},__class__:ba.Viewport};p={WMEvent:function(a){this._eventId=a}};i["com.workinman.events.WMEvent"]=p.WMEvent;p.WMEvent.__name__=["com","workinman","events","WMEvent"];p.WMEvent.prototype={getEventId:function(){return this._eventId},__class__:p.WMEvent};p.WMEventData=function(a,b){p.WMEvent.call(this,a);this._data=b};i["com.workinman.events.WMEventData"]=p.WMEventData;p.WMEventData.__name__=["com","workinman","events","WMEventData"];p.WMEventData.__super__=p.WMEvent;p.WMEventData.prototype=t(p.WMEvent.prototype,{_getData:function(){return this._data},__class__:p.WMEventData});p.WMEventFlow=function(a,b){null==b&&(b=!1);this.flowId=a;this.targetScreen=b;p.WMEvent.call(this,p.WMEventFlow.EVENT_FLOW)};i["com.workinman.events.WMEventFlow"]=p.WMEventFlow;p.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];p.WMEventFlow.__super__=p.WMEvent;p.WMEventFlow.prototype=t(p.WMEvent.prototype,{__class__:p.WMEventFlow});p.WMEventInput=function(a,b,d,c){p.WMEvent.call(this,p.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=d;this.y=c};i["com.workinman.events.WMEventInput"]=p.WMEventInput;p.WMEventInput.__name__=["com","workinman","events","WMEventInput"];p.WMEventInput.__super__=p.WMEvent;p.WMEventInput.prototype=t(p.WMEvent.prototype,{__class__:p.WMEventInput});p.WMEventInterfaceChange=function(a,b,d){null==b&&(b="");this.flowId=a;this.screenId=b;null==d&&(d=new E);this.customData=d;p.WMEvent.call(this,p.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT)};i["com.workinman.events.WMEventInterfaceChange"]=p.WMEventInterfaceChange;p.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];p.WMEventInterfaceChange.__super__=p.WMEvent;p.WMEventInterfaceChange.prototype=t(p.WMEvent.prototype,{__class__:p.WMEventInterfaceChange});p.WMEventScreenOut=function(a,b){this.flowId=a;this.screenId=b;p.WMEvent.call(this,p.WMEventScreenOut.EVENT_SCREEN_OUTPUT)};i["com.workinman.events.WMEventScreenOut"]=p.WMEventScreenOut;p.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];p.WMEventScreenOut.__super__=p.WMEvent;p.WMEventScreenOut.prototype=t(p.WMEvent.prototype,{__class__:p.WMEventScreenOut});p.WMEventUpdate=function(a){p.WMEvent.call(this,p.WMEventUpdate.EVENT_UPDATE);this._dt=a};i["com.workinman.events.WMEventUpdate"]=p.WMEventUpdate;p.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];p.WMEventUpdate.__super__=p.WMEvent;p.WMEventUpdate.prototype=t(p.WMEvent.prototype,{getDt:function(){return this._dt},__class__:p.WMEventUpdate});o={};o.WorkinCamera=function(a,b){this._screenCenterX=a;this._screenCenterY=b;this._pos=new o.WorkinPoint(a,b)};i["com.workinman.math.WorkinCamera"]=o.WorkinCamera;o.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];o.WorkinCamera.prototype={_getScreenCenterY:function(){return this._screenCenterY},_getScreenCenterX:function(){return this._screenCenterX},_getPos:function(){return this._pos},__class__:o.WorkinCamera};o.WorkinLine=function(a,b){this._p0=a.copy();this._p1=b.copy();this._calcProperties()};i["com.workinman.math.WorkinLine"]=o.WorkinLine;o.WorkinLine.__name__=["com","workinman","math","WorkinLine"];o.WorkinLine.prototype={_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.getX()-this._p1.getX())*(this._p0.getX()-this._p1.getX())+(this._p0.getY()-this._p1.getY())*(this._p0.getY()-this._p1.getY())))/1E3;this._vector=new o.WorkinPoint(this._getP1().getX()-this._getP0().getX(),this._getP1().getY()-this._getP0().getY());this._slope=this._vector.getY()/this._vector.getX();0==this._getVector().getX()&&(this._slope=1E5);this._yIntercept=this._getP0().getY()-this._slope*this._getP0().getX();this._parametricDenom=new o.WorkinPoint(this._getP1().getX()-this._getP0().getX(),this._getP1().getY()-this._getP0().getY());this._normal=this._vector.pseudoCross();this._normal.normalize()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties()},copy:function(){return new o.WorkinLine(this._p0,this._p1)},_setLength:function(a){if(0==this._getLength())return this._length;this._p1=new o.WorkinPoint(this._p0.getX()+this._vector.getX()*(a/this._getLength()),this._p0.getY()+this._vector.getY()*(a/this._getLength()));this._calcProperties();return this._length},_getLength:function(){return this._length},_getParametricDenom:function(){return this._parametricDenom},_getCenterY:function(){return this._p0.getY()+this._vector.getY()/2},_getCenterX:function(){return this._p0.getX()+this._vector.getX()/2},_getCenter:function(){return new o.WorkinPoint(this._p0.getX()+this._vector.getX()/2,this._p0.getY()+this._vector.getY()/2)},_getVector:function(){return this._vector},_getNormal:function(){return this._normal},_getYIntercept:function(){return this._yIntercept},_getSlope:function(){return this._slope},_getP1:function(){return this._p1},_getP0:function(){return this._p0},__class__:o.WorkinLine};o.WorkinMotion=function(a,b,d,c,e,f){null==f&&(f="");null==e&&(e="");null==c&&(c=0);null==d&&(d=0);null==a&&(a=new o.WorkinPoint);this._vel=new o.WorkinPoint;this._pos=a.copy();this._progress=0;this._dest=null;this._rate=d;this._delay=c;this._type="";this._ease=""==e?o.WorkinMotion.EASE_IN_OUT:e;""!=f&&(this._type=f);this.complete=!1;null!=b&&(this._dest=b.copy(),this._makeVel(),this._calculateTween())};i["com.workinman.math.WorkinMotion"]=o.WorkinMotion;o.WorkinMotion.__name__=["com","workinman","math","WorkinMotion"];o.WorkinMotion.prototype={dispose:function(){this._start=this._vectorTween=this._dest=this._pos=this._vel=null;this.complete=!0},_updatePosFromVel:function(a){var b=this._pos;b.setX(b.getX()+this._vel.getX()*a);b=this._pos;b.setY(b.getY()+this._vel.getY()*a)},_formulaEase:function(a,b,d,c){switch(this._ease){case o.WorkinMotion.EASE_IN_OUT:return 1>(a/=c/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b;case o.WorkinMotion.EASE_IN:return d*(a/=c)*a+b;case o.WorkinMotion.EASE_IN_FAST:return d*(a/=c)*a+b;case o.WorkinMotion.EASE_OUT:return-d*(a/=c)*(a-2)+b;case o.WorkinMotion.EASE_OUT_FAST:return a==c?b+d:d*(-Math.pow(2,-10*a/c)+1)+b;case o.WorkinMotion.EASE_BOUNCE_IN:return(a/=c)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b}
return d*a/c+b},update:function(a){0<this._delay?this._delay-=a:null!=this._dest?(0==this._rate?this._pos.toPoint(this._dest):this._progress>=this._rate?this._pos.toPoint(this._dest):(this._progress+=a,this._progress>this._rate&&(this._progress=this._rate),this._pos.setX(this._formulaEase(this._progress,this._start.getX(),this._vectorTween.getX(),this._rate)),this._pos.setY(this._formulaEase(this._progress,this._start.getY(),this._vectorTween.getY(),this._rate))),this._progress>=this._rate&&(this.complete=!0)):this._updatePosFromVel(a)},isReady:function(){return 0>=this._delay},_makeVel:function(){this._vel.to(this._rate,0);this._vel.rotateTo(this._pos.getAngleBetween(this._dest))},setStartFast:function(a,b){this._getPos().setX(a);this._getPos().setY(b);this._calculateTween()},setStart:function(a){this._setPos(a.copy());this._calculateTween()},_setType:function(a){return this._type=a},_getType:function(){return this._type},_setRate:function(a){0==a&&null!=this._dest&&(this._pos.toPoint(this._dest),this.complete=!0);return this._rate=a},_getRate:function(){return this._rate},_setVel:function(a){this._dest=null;this.complete=!0;this._vel.toPoint(a);return this._vel},_getVel:function(){return this._vel},_setDest:function(a){if(null==a)return this._dest=null,this._vel.to(0,0),this.complete=!0,null;this._dest.toPoint(a);this.complete=!1;1<=this._rate?this._makeVel():0==this._rate&&this._pos.toPoint(this._dest);this._calculateTween();return this._dest},_getDest:function(){return this._dest},_setEase:function(a){return this._ease=a},_getEase:function(){return this._ease},_setPos:function(a){this._pos.toPoint(a);1<=this._rate&&this._makeVel();this._calculateTween();return this._pos},_getPos:function(){return this._pos},_getRatio:function(){return this._progress/this._rate},_calculateTween:function(){this._progress=0;this._start=this._pos.copy();this._vectorTween=new o.WorkinPoint(this._dest.getX()-this._start.getX(),this._dest.getY()-this._start.getY())},__class__:o.WorkinMotion};o.WorkinPoint=function(a,b){null==b&&(b=0);null==a&&(a=0);this._x=Math.round(1E3*a)/1E3;this._y=Math.round(1E3*b)/1E3;this.calculateLength()};i["com.workinman.math.WorkinPoint"]=o.WorkinPoint;o.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];o.WorkinPoint.prototype={getAngle:function(){return 180*Math.atan2(this._y,this._x)/Math.PI},setLength:function(a){return this._length=a},getLength:function(){return this._length},setY:function(a){return this._y=a},getY:function(){return this._y},setX:function(a){return this._x=a},getX:function(){return this._x},rotateTo:function(a){this.rotate(a-this.getAngle())},subtractPoint:function(a){var b=this;b.setX(b.getX()-a.getX());b=this;b.setY(b.getY()-a.getY());this.calculateLength()},normalize:function(){if(0!=this._length){var a=this;a.setX(a.getX()/this._length);a=this;a.setY(a.getY()/this._length);this.calculateLength()}},pseudoCross:function(){return new o.WorkinPoint(this.getY(),-this.getX())},rotate:function(a){var a=a*(Math.PI/180),b=this.getX()*Math.cos(a)-this.getY()*Math.sin(a),a=this.getY()*Math.cos(a)+this.getX()*Math.sin(a);this.setX(b);this.setY(a)},getAngleBetween:function(a){return Math.atan2(a.getY()-this._y,a.getX()-this._x)*(180/Math.PI)},calculateLength:function(){this._length=Math.sqrt(this._x*this._x+this._y*this._y)},copy:function(){return new o.WorkinPoint(this._x,this._y)},toPoint:function(a){this._x=a.getX();this._y=a.getY();this.calculateLength()},to:function(a,b){this._x=a;this._y=b;this.calculateLength()},__class__:o.WorkinPoint};L={WMSharedObject:function(){f.WMEventDispatcher.call(this);this._data={};this.sharedKey=""}};i["com.workinman.net.WMSharedObject"]=L.WMSharedObject;L.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];L.WMSharedObject.getLocalStorage=function(){return u.window.localStorage};L.WMSharedObject.getLocal=function(a,b){var d=u.window.location.href;null==b&&(b=d);d=new L.WMSharedObject;d.sharedKey=b+":"+a;var c=L.WMSharedObject.getLocalStorage().getItem(d.sharedKey);d._setData(""==c||null==c?{}:K.run(c));return d};L.WMSharedObject.__super__=f.WMEventDispatcher;L.WMSharedObject.prototype=t(f.WMEventDispatcher.prototype,{flush:function(){var a=R.run(this._getData());L.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return L.SharedObjectFlushedStatus.FLUSHED},_setData:function(a){return this._data=a},_getData:function(){return this._data},dispose:function(){this._data=null;f.WMEventDispatcher.prototype.dispose.call(this)},__class__:L.WMSharedObject});L.SharedObjectFlushedStatus=function(){};i["com.workinman.net.SharedObjectFlushedStatus"]=L.SharedObjectFlushedStatus;L.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];q={ServiceAnalytics:function(){}};i["com.workinman.services.ServiceAnalytics"]=q.ServiceAnalytics;q.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];q.ServiceAnalytics.onAnalyticsLoad=function(){q.ServiceAnalytics._flagLoaded||(f.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete"),q.ServiceAnalytics._flagLoaded=!0,S.delay(q.ServiceAnalytics._runQueuedCommands,1E3))};q.ServiceAnalytics.init=function(a,b){null==b&&(b="");q.ServiceAnalytics._flagInitted=!0;q.ServiceAnalytics._queuedCommands=[];"x"==a.toLowerCase()&&(q.ServiceAnalytics.OPTION_ENABLE_TRACKING=!1);q.ServiceAnalytics.OPTION_ENABLE_TRACKING&&(""==b&&(b=q.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID),q.ServiceAnalytics._flagStarted=!1,f.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)"),q.ServiceAnalytics._appId=a,q.ServiceAnalytics._sharedObjectId=b,q.ServiceAnalytics._sharedObjectData=f.WorkinCloud.instance.sharedObjectGetData(q.ServiceAnalytics._sharedObjectId),q.ServiceAnalytics._generateSessionID(),null==q.ServiceAnalytics._sharedObjectData.userID||14>n.string(q.ServiceAnalytics._sharedObjectData.userID).length?(q.ServiceAnalytics._generateOfflineIDs(),q.ServiceAnalytics._sharedObjectData.userID=q.ServiceAnalytics._offlineUserId,q.ServiceAnalytics._sharedObjectData.trackingID=q.ServiceAnalytics._offlineTrackingId,f.WorkinCloud.instance.sharedObjectSetData(q.ServiceAnalytics._sharedObjectId,q.ServiceAnalytics._sharedObjectData)):(q.ServiceAnalytics._offlineUserId=q.ServiceAnalytics._sharedObjectData.userID,q.ServiceAnalytics._offlineTrackingId=q.ServiceAnalytics._sharedObjectData.trackingID),eval("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+q.ServiceAnalytics._offlineUserId+"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+
q.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t"),eval("window.pnCallbackReference").addEventListener("load",q.ServiceAnalytics.onAnalyticsLoad,!1),eval("document.body.appendChild(window.pnCallbackReference);"),q.ServiceAnalytics.sendUserInfo(),q.ServiceAnalytics.sendMilestone("custom1"))};q.ServiceAnalytics._runQueuedCommands=function(){for(;0<q.ServiceAnalytics._queuedCommands.length;)q.ServiceAnalytics.sendPlaynomicsEvent(q.ServiceAnalytics._queuedCommands[0].method,q.ServiceAnalytics._queuedCommands[0].params),q.ServiceAnalytics._queuedCommands.shift()};q.ServiceAnalytics.start=function(){};q.ServiceAnalytics.sendUserInfo=function(){var a=0;};q.ServiceAnalytics.sendMilestone=function(a){var b=0;};q.ServiceAnalytics.sendPlaynomicsEvent=function(a,b){if(q.ServiceAnalytics.OPTION_ENABLE_TRACKING&&q.ServiceAnalytics._flagInitted)
if(q.ServiceAnalytics._flagLoaded){f.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+a);var d,c="";for(d=0;d<b.length;)c+="'"+b[d]+"'",d++,d<b.length&&(c+=",");eval(a+"("+c+")")}else q.ServiceAnalytics._queuedCommands.push({method:a,params:b})};q.ServiceAnalytics._generateSessionID=function(){for(var a="",b=11;-1<b;)a+=Math.floor(10*Math.random()),b--;q.ServiceAnalytics._sessionId=a};q.ServiceAnalytics._generateOfflineIDs=function(){q.ServiceAnalytics._offlineUserId="";q.ServiceAnalytics._offlineTrackingId="";for(var a=15;-1<a;){if(0.66>Math.random())q.ServiceAnalytics._offlineUserId+=n.string(Math.floor(10*Math.random()));else switch(Math.floor(10*Math.random())){case 0:q.ServiceAnalytics._offlineUserId+="a";break;case 1:q.ServiceAnalytics._offlineUserId+="b";break;case 2:q.ServiceAnalytics._offlineUserId+="c";break;case 3:q.ServiceAnalytics._offlineUserId+="d";break;case 4:q.ServiceAnalytics._offlineUserId+="e";break;case 5:q.ServiceAnalytics._offlineUserId+="f";break;case 6:q.ServiceAnalytics._offlineUserId+="g";break;case 7:q.ServiceAnalytics._offlineUserId+="h";break;case 8:q.ServiceAnalytics._offlineUserId+="i";break;case 9:q.ServiceAnalytics._offlineUserId+="j";break;default:q.ServiceAnalytics._offlineUserId+="z"}
a--}
q.ServiceAnalytics._offlineTrackingId="";for(a=15;-1<a;)q.ServiceAnalytics._offlineTrackingId+=Math.floor(10*Math.random()),a--};q.ServiceAnalytics.prototype={__class__:q.ServiceAnalytics};f.JSEmbedProxy=function(){};i["com.workinman.utils.JSEmbedProxy"]=f.JSEmbedProxy;f.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];f.JSEmbedProxy.alertOn=function(a){f.JSEmbedProxy.callJSEmbedMethod("addAlert('"+a+"', '')")};f.JSEmbedProxy.alertOff=function(){f.JSEmbedProxy.callJSEmbedMethod("removeAlert('')")};f.JSEmbedProxy.getExists=function(){return f.JSEmbedProxy.callJSEmbedMethod("exists()")};f.JSEmbedProxy.getParameters=function(){return f.JSEmbedProxy.callJSEmbedMethod("params()")};f.JSEmbedProxy.getAttributes=function(){return f.JSEmbedProxy.callJSEmbedMethod("attr()")};f.JSEmbedProxy.getBase=function(){return f.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};f.JSEmbedProxy.getCanvasScale=function(){return n.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};f.JSEmbedProxy.getCanvasWidth=function(){return n.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};f.JSEmbedProxy.getCanvasHeight=function(){return n.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"))};f.JSEmbedProxy.getIsPaused=function(){return f.JSEmbedProxy.callJSEmbedMethod("isPaused()")};f.JSEmbedProxy.pause=function(){f.JSEmbedProxy.callJSEmbedMethod("pause()")};f.JSEmbedProxy.unpause=function(){f.JSEmbedProxy.callJSEmbedMethod("unpause()")};f.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(d){}
return ""};f.JSEmbedProxy.prototype={__class__:f.JSEmbedProxy};f.WMAssetManager=function(){this._LOADING_CHANCES=3;this._baseUrl="";this._assets=new E;this._defs=new E;this._flump=new E;this._packs=new E;this._chunks=new E;this._packsLoaded=this._packsMax=this._loadingChances=0};i["com.workinman.utils.WMAssetManager"]=f.WMAssetManager;f.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];f.WMAssetManager.prototype={getFont:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+a+" exists! Returning null."),null):new j.Font(this._assets.get(a)._getPack(),a)},getLibrary:function(a){return!1==this._flump.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+a+" exists! Is it defined in config.xml?"),null):this._flump.get(a)},getSound:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+a+" exists! Returning null."),null):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getSound(this._assets.get(a)._getPath(),!0)},getXML:function(a){if(!1==this._assets.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+a+" exists! Returning null."),null;a=r.parse(this.getFile(a));return new y.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+a+" exists! Returning empty string."),""):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getFile(this._assets.get(a)._getPath(),!0)},getTexture:function(a){a=a.split(".")[0];return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+a+" exists! Returning null."),null):!0==this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getTexture(this._assets.get(a)._getPath(),!0)},_parseSpritesheet:function(a){for(var b=this.getXML(a+".xml"),a=this.getTexture(a),d="",c=new F.Rectangle(0,0,0,0),e,b=b.nodes.resolve("SubTexture").iterator();b.hasNext();)e=b.next(),d=e.att.resolve("name").toString(),c.x=n.parseFloat(e.att.resolve("x").toString()),c.y=n.parseFloat(e.att.resolve("y").toString()),c.width=n.parseFloat(e.att.resolve("width").toString()),c.height=n.parseFloat(e.att.resolve("height").toString()),e=A.createTexture(c.width|0,c.height|0),e.get_graphics().drawSubImage(a,0,0,c.x|0,c.y|0,c.width|0,c.height|0),this.addConstructedAsset(d,e)},_onAllLoadComplete:function(){f.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEvent(P.ConstantsCloud.EVENT_FILES_LOADED))},addConstructedAsset:function(a,b){new f._WMAssetManager.AssetDef(a,this._assets,b)},addPack:function(a){for(var b=x.iter(a.get_manifest()._entries);b.hasNext();){var d=b.next();new f._WMAssetManager.AssetDef(d.name,this._assets,a)}},isPackLoaded:function(a){return this._packs.exists(a)},loadPack:function(a,b,d){null==d&&(d=!0);null==b&&(b="");var c=this;!1==this._defs.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+
a+" , define the pack in config.xml.");f.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+a);d&&(this._loadingChances=this._LOADING_CHANCES,this._packsMax++);d=v.Manifest.build(a);""!=this._baseUrl&&d.set_relativeBasePath(this._baseUrl);d=A._platform.loadAssetPack(d);d.error.connect(function(d){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+d);c._loadingChances--;0<=c._loadingChances?S.delay(function(){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+
c._loadingChances+" more chances.");c.loadPack(a,b,!1)},500):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out.")});d.get(function(b){c.addPack(b);c._packsLoaded++;for(var d=0,e=c._defs.get(a)._getFlump();d<e.length;){var f=e[d];++d;c._flump.set(f,new s.Library(b,f))}
d=0;for(e=c._defs.get(a)._getTiles();d<e.length;)f=e[d],++d,c._parseSpritesheet(f);c._packs.set(a,b);c._packsLoaded>=c._packsMax&&c._onAllLoadComplete()})},addPackDef:function(a,b,d){null==b&&(b=[]);null==d&&(d=[]);this._defs.set(a,new f._WMAssetManager.PackDef(a,b,d))},loadFolder:function(a){f.WorkinCloud.instance.log("[WMAssetManager](loadFolder) "+a);this.isPackLoaded(a)||(this.addPackDef(a),this.loadPack(a))},_setBaseUrl:function(a){this._baseUrl=a;f.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+a+"'");return this._baseUrl},_getBaseUrl:function(){return this._baseUrl},__class__:f.WMAssetManager};f._WMAssetManager={};f._WMAssetManager.AssetDef=function(a,b,d){this._path=a;a=a.split("/");this._id=a[a.length-1].split(".")[0];this._constructed=!1;this._data=this._pack=null;G.__instanceof(d,v.AssetPack)?this._pack=d:(this._constructed=!0,this._data=d);this._hash=b;this._hash.set(this._path,this);this._hash.set(this._id,this)};i["com.workinman.utils._WMAssetManager.AssetDef"]=f._WMAssetManager.AssetDef;f._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];f._WMAssetManager.AssetDef.prototype={_getPack:function(){return this._pack},_getPath:function(){return this._path},_getData:function(){return this._data},_getConstructed:function(){return this._constructed},__class__:f._WMAssetManager.AssetDef};f._WMAssetManager.PackDef=function(a,b,d){this._id=a;this._flump=b;this._tiles=d};i["com.workinman.utils._WMAssetManager.PackDef"]=f._WMAssetManager.PackDef;f._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];f._WMAssetManager.PackDef.prototype={_getTiles:function(){return this._tiles},_getFlump:function(){return this._flump},__class__:f._WMAssetManager.PackDef};f._WMAssetManager.ChunkDef=function(){};i["com.workinman.utils._WMAssetManager.ChunkDef"]=f._WMAssetManager.ChunkDef;f._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];f._WMAssetManager.ChunkDef.prototype={_getChunks:function(){return this._chunks},_getPacks:function(){return this._packs},__class__:f._WMAssetManager.ChunkDef};f._WMEventDispatcher={};f._WMEventDispatcher.WMEventTracker=function(){this._signalConnection=[];this._signal=new l.Signal1};i["com.workinman.utils._WMEventDispatcher.WMEventTracker"]=f._WMEventDispatcher.WMEventTracker;f._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","utils","_WMEventDispatcher","WMEventTracker"];f._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;for(var a=0,b=this._signalConnection;a<b.length;){var d=b[a];++a;d.dispose()}
this._signalConnection=null},isEmtpy:function(){return null==this._signal._head},dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalConnection.length;0<b;)b--,N.compareMethods(this._signalConnection[b]._getListener(),a)&&(this._signalConnection[b].dispose(),this._signalConnection.splice(b,1))},addEventListener:function(a){this._signalConnection.push(new f._WMEventDispatcher.SignalTracker(a,this._signal.connect(a)))},__class__:f._WMEventDispatcher.WMEventTracker};f._WMEventDispatcher.SignalTracker=function(a,b){this._function=a;this._connection=b};i["com.workinman.utils._WMEventDispatcher.SignalTracker"]=f._WMEventDispatcher.SignalTracker;f._WMEventDispatcher.SignalTracker.__name__=["com","workinman","utils","_WMEventDispatcher","SignalTracker"];f._WMEventDispatcher.SignalTracker.prototype={_getListener:function(){return this._function},dispose:function(){this._function=null;this._connection.dispose();this._connection=null},__class__:f._WMEventDispatcher.SignalTracker};f.WMInput=function(){this._multiTouchAvail=!1;this._keycodes=new E;this._keydown=new E;this._touchList=new E;this._touchRemoval=[];this._keydown.set("input_click",!1);this._scale=1;this._offset=new o.WorkinPoint;this._pointer=new f.WMPointer("",0)};i["com.workinman.utils.WMInput"]=f.WMInput;f.WMInput.__name__=["com","workinman","utils","WMInput"];f.WMInput.prototype={_onPointerUp:function(a){this._keydown.set("input_click",!1);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.getX(),a=a+this._offset.getY();this._pointer.end(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(0,"input_click",b,a))},_onPointerMove:function(a){var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.getX(),a=a+this._offset.getY();this._pointer.move(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(2,"input_click",b,a))},_onPointerDown:function(a){this._keydown.set("input_click",!0);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.getX(),a=a+this._offset.getY();this._pointer.begin(b,a);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(1,"input_click",b,a))},_onTouchUp:function(a){var b=a.viewX/this._scale,d=a.viewY/this._scale,b=b+this._offset.getX(),d=d+this._offset.getY();this._touchList.get(n.string(a.id)).end(b,d);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(0,"input_click",b,d))},_onTouchMove:function(a){var b=a.viewX/this._scale,d=a.viewY/this._scale,b=b+this._offset.getX(),d=d+this._offset.getY();this._touchList.get(n.string(a.id)).move(b,d);f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(2,"input_click",b,d))},_onTouchDown:function(a){var b=0,d=!1;do
for(var d=!0,c=this._touchList.iterator();c.hasNext();){var e=c.next();if(b==e._getIndex()){b++;d=!1;break}}
while(!1==d);d=new f.WMPointer(n.string(a.id),b);this._touchList.set(d._getId(),d);c=a.viewX/this._scale;a=a.viewY/this._scale;c+=this._offset.getX();a+=this._offset.getY();d.begin(c,a);0<b&&f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(1,"input_click",c,a))},_onKeyUp:function(a){for(var b,d=this._keycodes.keys();d.hasNext();){var c=d.next();b=this._keycodes.get(c);for(var e=0;e<b.length;){var g=b[e];++e;g==a.key&&(this._keydown.set(c,!1),f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(0,c,0,0)))}}},_onKeyDown:function(a){for(var b,d=this._keycodes.keys();d.hasNext();){var c=d.next();b=this._keycodes.get(c);for(var e=0;e<b.length;){var g=b[e];++e;g==a.key&&(this._keydown.set(c,!0),f.WorkinCloud.instance.getDispatcher().dispatchEvent(new p.WMEventInput(1,c,0,0)))}}},getInput:function(a){return this._keydown.get(a)},registerInput:function(a,b){this._keycodes.set(a,b);this._keydown.set(a,!1)},prime:function(){this._multiTouchAvail=A._platform.getTouch().get_supported();A._platform.getKeyboard().down.connect(z(this,this._onKeyDown));A._platform.getKeyboard().up.connect(z(this,this._onKeyUp));this._multiTouchAvail&&(A._platform.getTouch().down.connect(z(this,this._onTouchDown)),A._platform.getTouch().move.connect(z(this,this._onTouchMove)),A._platform.getTouch().up.connect(z(this,this._onTouchUp)));A._platform.getPointer().down.connect(z(this,this._onPointerDown));A._platform.getPointer().move.connect(z(this,this._onPointerMove));A._platform.getPointer().up.connect(z(this,this._onPointerUp))},_getMultiTouch:function(){return this._touchList},_getPointer:function(){return this._pointer},_getOffset:function(){return this._offset},_setScale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},_getScale:function(){return this._scale},__class__:f.WMInput};f.WMPointer=function(a,b){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=!0;this._timer=f.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._origin=new o.WorkinPoint(0,0);this._current=new o.WorkinPoint(0,0);this._last=new o.WorkinPoint(0,0);this._delta=new o.WorkinPoint(0,0);this._line=new o.WorkinLine(new o.WorkinPoint(0,0),new o.WorkinPoint(0,0));this._deltaLine=this._line.copy();this._camera=new o.WorkinCamera(0,0);this._phase=p.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1};i["com.workinman.utils.WMPointer"]=f.WMPointer;f.WMPointer.__name__=["com","workinman","utils","WMPointer"];f.WMPointer.prototype={_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);var d=this._current;d.setX(d.getX()+(this._camera._getPos().getX()-this._camera._getScreenCenterX()));d=this._current;d.setY(d.getY()+(this._camera._getPos().getY()-this._camera._getScreenCenterY()));this._delta.toPoint(this._current);this._delta.subtractPoint(this._last)},end:function(a,b){this._phase=p.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._line.endToPoint(this._current);this._swipe=this.SWIPE_NONE;this._consumed=!1},move:function(a,b){this._updateInfo(a,b);if(!1!=f.WorkinCloud.instance.getInput().getInput("input_click")){this._phase=p.WMEventInput.PHASE_MOVE;if(!1==this._consumed){var d=this._origin.getX()-this._current.getX(),c=this._origin.getY()-this._current.getY();this._swipe=Math.abs(d)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(c)<f.WMPointer._DELTA_ALLOWANCE?0<d?this.SWIPE_LEFT:this.SWIPE_RIGHT:Math.abs(c)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(d)<f.WMPointer._DELTA_ALLOWANCE?0<c?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE}else this._swipe=this.SWIPE_NONE;this._line.endToPoint(this._current)}},begin:function(a,b){this._origin.to(a,b);var d=this._origin;d.setX(d.getX()+(this._camera._getPos().getX()-this._camera._getScreenCenterX()));d=this._origin;d.setY(d.getY()+(this._camera._getPos().getY()-this._camera._getScreenCenterY()));this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._consumed=!1;this._phase=p.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},_getDeltaLine:function(){if(!1==this._resetDeltaLine)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=!1;return this._deltaLine},_setIndex:function(a){return this._index=a},_getIndex:function(){return this._index},_getId:function(){return this._id},_setConsumed:function(a){return this._consumed=a},_getConsumed:function(){return this._consumed},_getSwipe:function(){return this._swipe},_getLine:function(){return this._line},_getDeltaPos:function(){return this._delta},_getLastPos:function(){return this._last},_getCurrentPos:function(){return this._current},_getOriginPos:function(){return this._origin},_getPhase:function(){return this._phase},__class__:f.WMPointer};f.WMLocalize=function(){};i["com.workinman.utils.WMLocalize"]=f.WMLocalize;f.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];f.WMLocalize.prototype={getData:function(a,b){null==b&&(b="");""==b&&(b=P.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+f.WorkinCloud.instance.getString(P.ConstantsCloud.STRING_REGION_ID)+".xml");for(var d=f.WorkinCloud.instance.getAssets().getXML(b).nodes.resolve("string").iterator();d.hasNext();){var c=d.next();if(c.att.resolve("id")==a)return new f.WMLocalizedData(c.att.resolve("id"),c.getInnerData(),c.att.resolve("fontName"),n.parseFloat(c.att.resolve("fontScale")),n.parseFloat(c.att.resolve("offsetX")),n.parseFloat(c.att.resolve("offsetX")))}
f.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+a);return new f.WMLocalizedData(a,"","",1,0,0)},__class__:f.WMLocalize};f.WMLocalizedData=function(a,b,d,c,e,f){this._id=a;this._string=b;this._fontName=d;this._scale=c;this._offsetX=e;this._offsetY=f};i["com.workinman.utils.WMLocalizedData"]=f.WMLocalizedData;f.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];f.WMLocalizedData.prototype={_getOffsetY:function(){return this._offsetY},_getOffsetX:function(){return this._offsetX},_getScale:function(){return this._scale},_getFontName:function(){return this._fontName},_getString:function(){return this._string},_getId:function(){return this._id},__class__:f.WMLocalizedData};f.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._isMuted=!1;this._mixer=new D.Mixer;this._sounds=[]};i["com.workinman.utils.WMSound"]=f.WMSound;f.WMSound.__name__=["com","workinman","utils","WMSound"];f.WMSound.prototype={_muteMusic:function(a){""!=this._musicId&&(a?this._musicPlaying=null:(this._musicPlaying=a=new f._WMSound.SoundDef(this._musicId,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(this._musicId),1),!0),a.playSound(this._musicGain)))},playMusic:function(a,b){null==b&&(b=1);if(this._musicId!=a&&(this._musicId=a,this._musicGain=b,!(this._isMuted||""==a))){null!=this._musicPlaying&&this._musicPlaying.dispose();var d=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(this._musicId),1),!0);this._musicPlaying=d;d.playSound(b)}},playSound:function(a,b){null==b&&(b=1);if(!this._isMuted){for(var d=0;d<this._sounds.length;){if(this._sounds[d].id==a){this._sounds[d].playSound(b);return}
d++}
d=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance.getAssets().getSound(a),4),!1);this._sounds.push(d);d.playSound(b)}},setMute:function(a){if(a&&!1==this._isMuted){this._isMuted=!0;for(this._mixer.stopAll();0<this._sounds.length;)this._sounds.splice(0,1);this._muteMusic(this._isMuted)}else!1==a&&this._isMuted&&(this._isMuted=!1,this._muteMusic(this._isMuted))},getMute:function(){return this._isMuted},__class__:f.WMSound};f._WMSound={};f._WMSound.SoundDef=function(a,b,d){null==d&&(d=!1);this.id=a;this.isMusic=d;this._flagPlayed=this._flagHasSound=!1;this._sound=b};i["com.workinman.utils._WMSound.SoundDef"]=f._WMSound.SoundDef;f._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];f._WMSound.SoundDef.prototype={playSound:function(a){null==a&&(a=1);this._playback=this.isMusic?this._sound.loop(a):this._sound.play(a)},_setPlayback:function(a){return this._playback=a},_getPlayback:function(){return this._playback},dispose:function(){this._playback.dispose();this._playback=null},__class__:f._WMSound.SoundDef};D={Mixer:function(){this._sounds=[]}};i["flambe.sound.Mixer"]=D.Mixer;D.Mixer.__name__=["flambe","sound","Mixer"];D.Mixer.__super__=I;D.Mixer.prototype=t(I.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var d=b[a];++a;d.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var d=new D._Mixer.MixerSound(a,b);this._sounds.push(d);return d},get_name:function(){return "Mixer_2"},__class__:D.Mixer});f.WorkinCloud=function(){this._values=new E;this._defaults=new E;this._dispatcher=new f.WMEventDispatcher;this._input=new f.WMInput;this._assets=new f.WMAssetManager;this._sound=new f.WMSound;this._localize=new f.WMLocalize};i["com.workinman.utils.WorkinCloud"]=f.WorkinCloud;f.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];f.WorkinCloud.prototype={_updateDisplays:function(a){this._dispatcher.dispatchEvent(new p.WMEventData(g.constants.ConstantsApp.EVENT_UPDATE_DISPLAY,{valueID:a}))},sharedObjectSetData:function(a,b){var d=L.WMSharedObject.getLocal(a);d._setData(b);d.flush();d.dispose()},sharedObjectGetData:function(a){var a=L.WMSharedObject.getLocal(a),b=a._getData();a.dispose();return b},resetValue:function(a){this._values.set(a,this._defaults.get(a));this._updateDisplays(a)},setValue:function(a,b){this._values.set(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},setFloat:function(a,b){this.setValue(a,b)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},_getLocalize:function(){return this._localize},_getSound:function(){return this._sound},getAssets:function(){return this._assets},getInput:function(){return this._input},getDispatcher:function(){return this._dispatcher},log:function(){null},__class__:f.WorkinCloud};f.WorkinUtils=function(){};i["com.workinman.utils.WorkinUtils"]=f.WorkinUtils;f.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];f.WorkinUtils.getRandom=function(a,b,d){null==d&&(d=!0);var c=Math.random();1==c&&(c=0.99);return d?a+Math.floor(c*(b+1-a)):a+c*(b-a)};M=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};i["flambe.Entity"]=M;M.__name__=["flambe","Entity"];M.__interfaces__=[l.Disposable];M.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren();this.onDispose()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},onDispose:function(){},onRemoved:function(){},onAdded:function(){},removeChild:function(a){for(var b=null,d=this.firstChild;null!=d;){var c=d.next;if(d==a){d.onRemoved();null==b?this.firstChild=c:b.next=c;d.parent=null;d.next=null;break}
b=d;d=c}},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var d=null,c=this.firstChild;null!=c;)d=c,c=c.next;null!=d?d.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;a.onAdded();return this},remove:function(a){for(var b=null,d=this.firstComponent;null!=d;){var c=d.next;if(d==a){null==b?this.firstComponent=c:b._internal_init(this,c);delete this._compMap[d.get_name()];d.onRemoved();d._internal_init(null,null);break}
b=d;d=c}},add:function(a){var b=a.get_name(),d=this._compMap[b];null!=d&&this.remove(d);this._compMap[b]=a;b=null;for(d=this.firstComponent;null!=d;)b=d,d=d.next;null!=b?b.next=a:this.firstComponent=a;a._internal_init(this,null);a.onAdded();return this},__class__:M};l.PackageLog=function(){};i["flambe.util.PackageLog"]=l.PackageLog;l.PackageLog.__name__=["flambe","util","PackageLog"];e={Platform:function(){}};i["flambe.platform.Platform"]=e.Platform;e.Platform.__name__=["flambe","platform","Platform"];e.Platform.prototype={__class__:e.Platform};e.html={};e.html.HtmlPlatform=function(){};i["flambe.platform.html.HtmlPlatform"]=e.html.HtmlPlatform;e.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];e.html.HtmlPlatform.__interfaces__=[e.Platform];e.html.HtmlPlatform.prototype={getY:function(a,b){return this._stage.scaleFactor*(a.clientY-b.top)},getX:function(a,b){return this._stage.scaleFactor*(a.clientX-b.left)},getTempGraphics:function(){return this._tempGraphics},getTempCanvas:function(){return this._tempCanvas},getRenderer:function(){return this._renderer},getExternal:function(){null==this._external&&(this._external=new e.html.HtmlExternal);return this._external},getWeb:function(){null==this._web&&(this._web=new e.html.HtmlWeb(this._container));return this._web},getKeyboard:function(){return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer))},getTime:function(){return Date.now()/1E3},createLogHandler:function(){return null},getLocale:function(){return u.window.navigator.language},getStorage:function(){if(null==this._storage){var a=null;try{a=u.window.localStorage}catch(b){}
this._storage=null!=a?new e.html.HtmlStorage(a):new e.DummyStorage}
return this._storage},getStage:function(){return this._stage},loadAssetPack:function(a){return(new e.html.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this,b=null;try{b=u.window.flambe.canvas}catch(d){}
b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque","true");this._stage=new e.html.HtmlStage(b);this._pointer=new e.BasicPointer;this._mouse=new e.html.HtmlMouse(this._pointer,b);this._keyboard=new e.BasicKeyboard;this._tempCanvas=e.html.HtmlUtil.createCanvas(b);this._tempGraphics=new e.html.CanvasGraphics(this._tempCanvas);this._renderer=new e.html.CanvasRenderer(b);A.hasGPU.set__(!0);this.mainLoop=new e.MainLoop;this._container=b.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var c=0,f=function(d){if(!(1E3>d.timeStamp-c)){var e=b.getBoundingClientRect(),f=a.getX(d,e),e=a.getY(d,e);switch(d.type){case "mousedown":d.target==b&&(d.preventDefault(),a._mouse.submitDown(f,e,d.button),d.target.focus());break;case "mousemove":a._mouse.submitMove(f,e);break;case "mouseup":a._mouse.submitUp(f,e,d.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,e,"mousewheel"==d.type?d.wheelDelta/40:-d.detail)&&d.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,!1);b.addEventListener("mousewheel",f,!1);b.addEventListener("DOMMouseScroll",f,!1);if("ontouchstart"in window){var g=new e.BasicTouch(this._pointer);this._touch=g;f=function(b){var d=b.changedTouches,f=b.target.getBoundingClientRect();c=b.timeStamp;switch(b.type){case "touchstart":b.preventDefault();e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&e.html.HtmlUtil.hideMobileBrowser();for(b=0;b<d.length;){var h=d[b];++b;var i=a.getX(h,f),ea=a.getY(h,f);g.submitDown(h.identifier|0,i,ea)}
break;case "touchmove":b.preventDefault();for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,f),ea=a.getY(h,f),g.submitMove(h.identifier|0,i,ea);break;case "touchend":case "touchcancel":for(b=0;b<d.length;)h=d[b],++b,i=a.getX(h,f),ea=a.getY(h,f),g.submitUp(h.identifier|0,i,ea)}};b.addEventListener("touchstart",f,!1);b.addEventListener("touchmove",f,!1);b.addEventListener("touchend",f,!1);b.addEventListener("touchcancel",f,!1)}else this._touch=new e.DummyTouch;f=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};b.addEventListener("keydown",f,!1);b.addEventListener("keyup",f,!1);var h=u.window.onerror;u.window.onerror=function(a,b,d){A.uncaughtError.emit1(a);return null!=h?h(a,b,d):!1};var i=e.html.HtmlUtil.loadExtension("hidden",u.document);null!=i.value&&(f=function(){A.hidden.set__(N.field(u.document,i.field))},f(),u.document.addEventListener(i.prefix+"visibilitychange",f,!1),A.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)}));this._lastUpdate=Date.now();this._skipFrame=!1;var j=e.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=j){var k=u.window.performance,l=null!=k&&e.html.HtmlUtil.polyfill("now",k);l?this._lastUpdate=k.now():null;var m=null,m=function(d){a.update(l?k.now():d);j(m,b)};j(m,b)}else u.window.setInterval(function(){a.update(Date.now())},1E3/60)},__class__:e.html.HtmlPlatform};l.Value=function(a,b){this._value=a;null!=b&&(this._changed=new l.Signal2(b))};i["flambe.util.Value"]=l.Value;l.Value.__name__=["flambe","util","Value"];l.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new l.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},__class__:l.Value};l.SignalConnection=function(a,b){this._internal_next=null;this._signal=a;this._internal_listener=b;this.stayInList=!0};i["flambe.util.SignalConnection"]=l.SignalConnection;l.SignalConnection.__name__=["flambe","util","SignalConnection"];l.SignalConnection.__interfaces__=[l.Disposable];l.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal._internal_disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:l.SignalConnection};l.SignalBase=function(a){this._head=null!=a?new l.SignalConnection(this,a):null;this._deferredTasks=null};i["flambe.util.SignalBase"]=l.SignalBase;l.SignalBase.__name__=["flambe","util","SignalBase"];l.SignalBase.prototype={listRemove:function(a){for(var b=null,d=this._head;null!=d;){if(d==a){a=d._internal_next;null==b?this._head=a:b._internal_next=a;break}
b=d;d=d._internal_next}},listAdd:function(a,b){if(b)a._internal_next=this._head,this._head=a;else{for(var d=null,c=this._head;null!=c;)d=c,c=c._internal_next;null!=d?d._internal_next=a:this._head=a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=l.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,d=this._deferredTasks;null!=d;)b=d,d=d.next;a=new l._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var d=this.willEmit(),c=d;null!=c;)c._internal_listener(a,b),c.stayInList||c.dispose(),c=c._internal_next;this.didEmit(d)},emit1:function(a){for(var b=this.willEmit(),d=b;null!=d;)d._internal_listener(a),d.stayInList||d.dispose(),d=d._internal_next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._internal_listener(),b.stayInList||b.dispose(),b=b._internal_next;this.didEmit(a)},_internal_disconnect:function(a){var b=this;this._head==l.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var d=this,c=new l.SignalConnection(this,a);this._head==l.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){d.listAdd(c,b)}):this.listAdd(c,b);return c},__class__:l.SignalBase};l.Signal2=function(a){l.SignalBase.call(this,a)};i["flambe.util.Signal2"]=l.Signal2;l.Signal2.__name__=["flambe","util","Signal2"];l.Signal2.__super__=l.SignalBase;l.Signal2.prototype=t(l.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:l.Signal2});l.Signal1=function(a){l.SignalBase.call(this,a)};i["flambe.util.Signal1"]=l.Signal1;l.Signal1.__name__=["flambe","util","Signal1"];l.Signal1.__super__=l.SignalBase;l.Signal1.prototype=t(l.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:l.Signal1});A=function(){};i["flambe.System"]=A;A.__name__=["flambe","System"];A.init=function(){A._calledInit||(A._platform.init(),A._calledInit=!0)};A.createTexture=function(a,b){return A._platform.getRenderer().createEmptyTexture(a,b)};l.Logger=function(a){this._handler=a};i["flambe.util.Logger"]=l.Logger;l.Logger.__name__=["flambe","util","Logger"];l.Logger.prototype={__class__:l.Logger};Q=function(){};i["flambe.Log"]=Q;Q.__name__=["flambe","Log"];Q.__super__=l.PackageLog;Q.prototype=t(l.PackageLog.prototype,{__class__:Q});w=function(a){null==a&&(a=1);this._internal_realDt=0;this.scale=new C.AnimatedFloat(a)};i["flambe.SpeedAdjuster"]=w;w.__name__=["flambe","SpeedAdjuster"];w.__super__=I;w.prototype=t(I.prototype,{onUpdate:function(a){0<this._internal_realDt&&(a=this._internal_realDt,this._internal_realDt=0);this.scale.update(a)},get_name:function(){return "SpeedAdjuster_5"},__class__:w});C={AnimatedFloat:function(a,b){l.Value.call(this,a,b);this.behaviorComplete=new l.Signal0}};i["flambe.animation.AnimatedFloat"]=C.AnimatedFloat;C.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];C.AnimatedFloat.__super__=l.Value;C.AnimatedFloat.prototype=t(l.Value.prototype,{set_behavior:function(a){this._behavior=a;this.update(0);return a},update:function(a){null!=this._behavior&&(l.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null,this.behaviorComplete.emit0()))},set__:function(a){this._behavior=null;return l.Value.prototype.set__.call(this,a)},__class__:C.AnimatedFloat});C.Behavior=function(){};i["flambe.animation.Behavior"]=C.Behavior;C.Behavior.__name__=["flambe","animation","Behavior"];C.Behavior.prototype={__class__:C.Behavior};C.Binding=function(){};i["flambe.animation.Binding"]=C.Binding;C.Binding.__name__=["flambe","animation","Binding"];C.Binding.__interfaces__=[C.Behavior];C.Binding.prototype={isComplete:function(){return!1},update:function(){var a=this._target._value;return null!=this._fn?this._fn(a):a},__class__:C.Binding};v={};v.AssetType=i["flambe.asset.AssetType"]={__ename__:["flambe","asset","AssetType"],__constructs__:["Image","Audio","Data"]};v.AssetType.Image=["Image",0];v.AssetType.Image.toString=m;v.AssetType.Image.__enum__=v.AssetType;v.AssetType.Audio=["Audio",1];v.AssetType.Audio.toString=m;v.AssetType.Audio.__enum__=v.AssetType;v.AssetType.Data=["Data",2];v.AssetType.Data.toString=m;v.AssetType.Data.__enum__=v.AssetType;v.AssetEntry=function(a,b,d,c){this.name=a;this.url=b;this.type=d;this.bytes=c};i["flambe.asset.AssetEntry"]=v.AssetEntry;v.AssetEntry.__name__=["flambe","asset","AssetEntry"];v.AssetEntry.prototype={getUrlExtension:function(){return l.Strings.getFileExtension(this.url.split("?")[0]).toLowerCase()},__class__:v.AssetEntry};v.AssetPack=function(){};i["flambe.asset.AssetPack"]=v.AssetPack;v.AssetPack.__name__=["flambe","asset","AssetPack"];v.AssetPack.prototype={__class__:v.AssetPack};G=void 0;u=void 0;G=function(){};i["js.Boot"]=G;G.__name__=["js","Boot"];G.__string_rec=function(a,b){if(null==a)return "null";if(5<=b.length)return "<...>";var d=typeof a;if("function"==d&&(a.__name__||a.__ename__))d="object";switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var d=a[0]+"(",b=b+"\t",c=2,e=a.length;c<e;)var f=c++,d=2!=f?d+(","+G.__string_rec(a[f],b)):d+G.__string_rec(a[f],b);return d+")"}
c=a.length;d="[";b+="\t";for(e=0;e<c;)f=e++,d+=(0<f?",":"")+G.__string_rec(a[f],b);return d+"]"}
try{e=a.toString}catch(g){return "???"}
if(null!=e&&e!=Object.toString&&(d=a.toString(),"[object Object]"!=d))return d;e=null;d="{\n";b+="\t";c=null!=a.hasOwnProperty;for(e in a)
if(!c||a.hasOwnProperty(e))"prototype"==e||"__class__"==e||"__super__"==e||"__interfaces__"==e||"__properties__"==e||(2!=d.length&&(d+=", \n"),d+=b+e+" : "+G.__string_rec(a[e],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return "<function>";case "string":return a;default:return ""+a}};G.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var d=a.__interfaces__;if(null!=d)
for(var c=0,e=d.length;c<e;){var f=c++,f=d[f];if(f==b||G.__interfLoop(f,b))return!0}
return G.__interfLoop(a.__super__,b)};G.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:!0;if(G.__interfLoop(a.__class__,b))return!0}catch(d){if(null==b)return!1}
switch(b){case ia:return Math.ceil(a%2147483648)===a;case ga:return "number"==typeof a;case ha:return!0===a||!1===a;case String:return "string"==typeof a;case ja:return!0;default:if(null==a)return!1;if(b==ka&&null!=a.__name__)return!0;null;if(b==la&&null!=a.__ename__)return!0;null;return a.__enum__==b}};G.__cast=function(a,b){if(G.__instanceof(a,b))return a;throw "Cannot cast "+n.string(a)+" to "+n.string(b);};l.Strings=function(){};i["flambe.util.Strings"]=l.Strings;l.Strings.__name__=["flambe","util","Strings"];l.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?x.substr(a,b+1,null):null};l.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?x.substr(a,0,b):a};l.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};l.Strings.withFields=function(a,b){var d=b.length;if(0<d){for(var a=a+(0<a.length?" [":"["),c=0;c<d;){0<c&&(a+=", ");var e=b[c],f=b[c+1];if(G.__instanceof(f,Error)){var g=f.stack;null!=g&&(f=g)}
a+=e+"="+n.string(f);c+=2}
a+="]"}
return a};u=function(){};i["js.Lib"]=u;u.__name__=["js","Lib"];v.Manifest=function(){this._entries=[]};i["flambe.asset.Manifest"]=v.Manifest;v.Manifest.__name__=["flambe","asset","Manifest"];v.Manifest.build=function(a,b){null==b&&(b=!0);var d=v.Manifest._buildManifest.get(a);if(null==d){if(b)throw l.Strings.withFields("Missing asset pack",["name",a]);return null}
return d.clone()};v.Manifest.inferType=function(a){a=l.Strings.getFileExtension(a.split("?")[0]);if(null!=a)switch(a.toLowerCase()){case "png":case "jpg":case "gif":return v.AssetType.Image;case "ogg":case "m4a":case "mp3":case "wav":return v.AssetType.Audio}
return v.AssetType.Data};v.Manifest.createBuildManifests=function(){var a=new E;a.set("main_pack",[{name:"ui/menu_button_soundon_up.png",md5:"d04bea3b03b15eb62ab980ddcc4d0f53",bytes:9755},{name:"ui/menu_button_soundoff_up.png",md5:"0034c43c86ec9b608d72e4abff416f4d",bytes:8641},{name:"ui/menu_button_quit_up.png",md5:"031dabb7ec0d4fb931f51e8de41f8b79",bytes:10103},{name:"ui/menu_button_play_up.png",md5:"dd8d211672267e19e3d2b6d5546612ae",bytes:8406},{name:"ui/menu_button_help_up.png",md5:"d357e2bebcc49bef6db9cab0c27fcfc6",bytes:12299},{name:"ui/hud_button_pause_up.png",md5:"8694b9ee479aa43dfa63a32927d32517",bytes:2079},{name:"ui/hud_button_level_up.png",md5:"c95de56d24805ee14676914b96f41606",bytes:17982},{name:"ui/confirm_button_yes_up.png",md5:"36adfded1f168681464e7971a238bfc7",bytes:6087},{name:"ui/confirm_button_no_up.png",md5:"fe5ef7a50d3d42945d91eb39e6ff7c20",bytes:5730},{name:"ui/AssetScreenNextLevel.png",md5:"3e0fc898a5e09267ff4f2a50ac10032b",bytes:74347},{name:"ui/AssetScreenHelp.jpg",md5:"e171c303216c0cb92037e720ec100ee2",bytes:129437},{name:"ui/AssetScreenGameplayHud.png",md5:"66924c2b66c439ac9f3f61d30adc3b4d",bytes:5664},{name:"ui/AssetScreenEndGame.jpg",md5:"43f9fef8d2ba58b9e87ac4779de01468",bytes:95152},{name:"elements/AssetTree4.png",md5:"856ee731db4c7e87a86277c04506e446",bytes:50467},{name:"elements/AssetTree3.png",md5:"b785922c7982bcd95770b74b7ef4e580",bytes:48328},{name:"elements/AssetTree2.png",md5:"8db22bcd5fe92757b5948a22a2eca6dd",bytes:54217},{name:"elements/AssetTree1.png",md5:"8a1e4418a815d9e06562df66db248fb3",bytes:34123},{name:"elements/AssetStump.png",md5:"cee7c83def7a2d5aa2a37eb17a9e1ef3",bytes:11907},{name:"elements/AssetSplash.jpg",md5:"54d0e00218340d4e07629cbd39012d50",bytes:153303},{name:"elements/AssetPickup4.png",md5:"a4d5471dff370ea763a5edbd961fd33a",bytes:4959},{name:"elements/AssetPickup3.png",md5:"2f5198663e1432e3dd4405dc06e101d9",bytes:5096},{name:"elements/AssetPickup2.png",md5:"e21ecc8f49c9275cdfead6da00c90151",bytes:4837},{name:"elements/AssetPickup1.png",md5:"344fe870087b6010f82809af522195d8",bytes:5624},{name:"elements/AssetIndicator.png",md5:"1b2d5372fcaa076cff4ff252ea3bc626",bytes:6204},{name:"elements/AssetGlow.png",md5:"224459449d5b1d7bd7da96b5fce41b9e",bytes:5213},{name:"elements/AssetDisplay.png",md5:"b20dde73cd9c55a3cc51784e001e0334",bytes:10841},{name:"elements/AssetBgLeaves.jpg",md5:"bde5edaf061100789cb66b763249d4c1",bytes:96666},{name:"elements/AssetBgBottom.png",md5:"ac64a64dc9b45069fc6a44e1bfe5ddb2",bytes:101331},{name:"elements/AssetBgBack.jpg",md5:"b20d62350a33ff2266d9f0be5d472244",bytes:56397},{name:"audio/Sound_stack.ogg",md5:"de9b24284710d1a7a79e5581b51ca917",bytes:4408},{name:"audio/Sound_stack.mp3",md5:"9725159e7677b32e074260b76477c720",bytes:2506},{name:"audio/Sound_newSponge.ogg",md5:"1c21040351fe75c5836052f07aff8674",bytes:8896},{name:"audio/Sound_newSponge.mp3",md5:"5985b41f70ee8f662075b9d7aac2147d",bytes:9194},{name:"audio/Sound_missionComplete.ogg",md5:"5ae92dd7692067e132fd880fabc82555",bytes:22018},{name:"audio/Sound_missionComplete.mp3",md5:"3f8b96a2687c3d41a366580a74931154",bytes:97383},{name:"audio/Sound_levelUp.ogg",md5:"c10029404ff1a308b3fcbb482e3c6f0b",bytes:8368},{name:"audio/Sound_levelUp.mp3",md5:"c1b32466a671a25c9b6ccd8fe8eea925",bytes:8776},{name:"audio/Sound_fall2.ogg",md5:"a319f8863f07b1af6e61f483f433a3b4",bytes:22488},{name:"audio/Sound_fall2.mp3",md5:"676be15559e85b5743be30ef6a2dbb20",bytes:87770},{name:"audio/Sound_fall1.ogg",md5:"a0b981c77a111d4f2fdf490035e357a2",bytes:39953},{name:"audio/Sound_fall1.mp3",md5:"f8fd06ee2a41b6db062fc0e666c50fb7",bytes:109922},{name:"audio/Sound_BGM.ogg",md5:"4ac002febac047f7e8976a1d4c338b4d",bytes:1073291},{name:"audio/Sound_BGM.mp3",md5:"8e26d6e5581a12d1e1ea5d29c2bde7b9",bytes:954617},{name:"anim_player/library.json",md5:"1f598d8e17536a369cdda4ff12f13f19",bytes:109888},{name:"anim_player/atlas1.png",md5:"ee00cc57e584ea1415c3b0bcf9127ecf",bytes:745},{name:"anim_player/atlas0.png",md5:"f9140116a1a6e082b09af925c04affd7",bytes:40845}]);a.set("fonts_la",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_kr",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_jp",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("fonts_en",[{name:"Basic.png",md5:"5f3041810ca15d6d707a738710658476",bytes:225207},{name:"Basic.fnt",md5:"fa6ba21435446d25ac0ca56ac086277e",bytes:9687}]);a.set("fonts_cn",[{name:"Basic.png",md5:"6a36225f74ea1a7793667cffcb1047ce",bytes:622185},{name:"Basic.fnt",md5:"a0e96df3ee1859e9a082bb8b061791c5",bytes:25155}]);a.set("bootstrap",[{name:"ui/loading_spinner.png",md5:"4d3d00e1e4ec16e9b3cbb531f6c59dcd",bytes:12504},{name:"ui/loading_panel.jpg",md5:"12a1fff0444c2e8c43f8f7edcd467661",bytes:137182},{name:"config/translation_la.xml",md5:"d0bb03966a8bcdc1f4d2cff0541e8f6b",bytes:6413},{name:"config/translation_kr.xml",md5:"d0bb03966a8bcdc1f4d2cff0541e8f6b",bytes:6413},{name:"config/translation_jp.xml",md5:"d0bb03966a8bcdc1f4d2cff0541e8f6b",bytes:6413},{name:"config/translation_en.xml",md5:"8423d83b9c44d7b2fdbeb02b65e2a94d",bytes:5983},{name:"config/translation_cn.xml",md5:"d0bb03966a8bcdc1f4d2cff0541e8f6b",bytes:6413},{name:"config/config.xml",md5:"f5667df288cf120597a038906ddfc6ee",bytes:548},{name:"audio/silent.ogg",md5:"3526550092a0e091f382852de5ef2315",bytes:5514},{name:"audio/silent.mp3",md5:"ba9e6829ba32e427142251a85cbd4fbb",bytes:2114}]);for(var b=new E,d=a.keys();d.hasNext();){var c=d.next(),e=new v.Manifest;e.set_relativeBasePath("assets");for(var f=0,g=a.get(c);f<g.length;){var h=g[f];++f;var i=h.name,j=c+"/"+i+"?v="+n.string(h.md5),k=v.Manifest.inferType(i);if(k==v.AssetType.Image||k==v.AssetType.Audio)i=l.Strings.removeFileExtension(i);e.add(i,j,h.bytes,k)}
b.set(c,e)}
return b};v.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=null!=this.get_externalBasePath()&&v.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),d=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.type==v.AssetType.Data&&(d=b);return null!=d?l.Strings.joinPath(d,a.url):a.url},clone:function(){var a=new v.Manifest;a.set_relativeBasePath(this.get_relativeBasePath());a.set_externalBasePath(this.get_externalBasePath());a._entries=this._entries.slice();return a},iterator:function(){return x.iter(this._entries)},add:function(a,b,d,c){null==d&&(d=0);null==c&&(c=v.Manifest.inferType(b));a=new v.AssetEntry(a,b,c,d);this._entries.push(a);return a},__class__:v.Manifest};j={};j.BlendMode=i["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","CopyExperimental"]};j.BlendMode.Normal=["Normal",0];j.BlendMode.Normal.toString=m;j.BlendMode.Normal.__enum__=j.BlendMode;j.BlendMode.Add=["Add",1];j.BlendMode.Add.toString=m;j.BlendMode.Add.__enum__=j.BlendMode;j.BlendMode.CopyExperimental=["CopyExperimental",2];j.BlendMode.CopyExperimental.toString=m;j.BlendMode.CopyExperimental.__enum__=j.BlendMode;F={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};i["flambe.math.Point"]=F.Point;F.Point.__name__=["flambe","math","Point"];F.Point.prototype={__class__:F.Point};j.Sprite=function(){this.blendMode=this.scissor=null;var a=this;this._flags=11;this._localMatrix=new F.Matrix;var b=function(){a._flags|=12};this.x=new C.AnimatedFloat(0,b);this.y=new C.AnimatedFloat(0,b);this.rotation=new C.AnimatedFloat(0,b);this.scaleX=new C.AnimatedFloat(1,b);this.scaleY=new C.AnimatedFloat(1,b);this.anchorX=new C.AnimatedFloat(0,b);this.anchorY=new C.AnimatedFloat(0,b);this.alpha=new C.AnimatedFloat(1)};i["flambe.display.Sprite"]=j.Sprite;j.Sprite.__name__=["flambe","display","Sprite"];j.Sprite.hitTest=function(a,b,d){var c=a._compMap.Sprite_1;if(null!=c){if(3!=(c._flags&3))return null;c.getLocalMatrix().inverseTransform(b,d,j.Sprite._scratchPoint)&&(b=j.Sprite._scratchPoint.x,d=j.Sprite._scratchPoint.y);var e=c.scissor;if(null!=e&&!e.contains(b,d))return null}
a=j.Sprite.hitTestBackwards(a.firstChild,b,d);return null!=a?a:null!=c&&c.containsLocal(b,d)?c:null};j.Sprite.render=function(a,b){var d=a._compMap.Sprite_1;if(null!=d){var c=d.alpha._value;if(0==(d._flags&1)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=d.blendMode&&b.setBlendMode(d.blendMode);c=d.getLocalMatrix();b.transform(c.m00,c.m10,c.m01,c.m11,c.m02,c.m12);c=d.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);d.draw(b)}
c=a._compMap.Director_0;if(null!=c)
for(var c=c.occludedScenes,e=0;e<c.length;){var f=c[e];++e;j.Sprite.render(f,b)}
for(c=a.firstChild;null!=c;)e=c.next,j.Sprite.render(c,b),c=e;null!=d&&b.restore()};j.Sprite.hitTestBackwards=function(a,b,d){if(null!=a){var c=j.Sprite.hitTestBackwards(a.next,b,d);return null!=c?c:j.Sprite.hitTest(a,b,d)}
return null};j.Sprite.__super__=I;j.Sprite.prototype=t(I.prototype,{set_pointerEnabled:function(a){this._flags=l.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=l.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._internal_pointerUp&&(this._internal_pointerUp=new l.Signal1);return this._internal_pointerUp},get_pointerMove:function(){null==this._internal_pointerMove&&(this._internal_pointerMove=new l.Signal1);return this._internal_pointerMove},get_pointerDown:function(){null==this._internal_pointerDown&&(this._internal_pointerDown=new l.Signal1);return this._internal_pointerDown},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return "Sprite_1"},__class__:j.Sprite});j.FillSprite=function(a,b,d){j.Sprite.call(this);this.color=a;this.width=new C.AnimatedFloat(b);this.height=new C.AnimatedFloat(d)};i["flambe.display.FillSprite"]=j.FillSprite;j.FillSprite.__name__=["flambe","display","FillSprite"];j.FillSprite.__super__=j.Sprite;j.FillSprite.prototype=t(j.Sprite.prototype,{onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:j.FillSprite});j.Font=function(a,b){this.name=b;this._glyphs=new U;for(var d=new j._Font.ConfigParser(a.getFile(b+".fnt")),c=new U,e=b.lastIndexOf("/"),e=0<=e?x.substr(b,0,e+1):"",f=d.keywords();f.hasNext();)switch(f.next()){case "info":for(var g=d.pairs();g.hasNext();){var h=g.next();switch(h.key){case "size":this.size=h.getInt()}}
break;case "page":for(var g=0,i=null,k=d.pairs();k.hasNext();)switch(h=k.next(),h.key){case "id":g=h.getInt();break;case "file":i=h.getString()}
c.set(g,a.getTexture(e+l.Strings.removeFileExtension(i)));break;case "char":g=null;for(i=d.pairs();i.hasNext();)switch(h=i.next(),h.key){case "id":g=new j.Glyph(h.getInt());break;case "x":g.x=h.getInt();break;case "y":g.y=h.getInt();break;case "width":g.width=h.getInt();break;case "height":g.height=h.getInt();break;case "page":g.page=c.get(h.getInt());break;case "xoffset":g.xOffset=h.getInt();break;case "yoffset":g.yOffset=h.getInt();break;case "xadvance":g.xAdvance=h.getInt()}
this._glyphs.set(g.charCode,g);break;case "kerning":g=null;i=-1;for(k=d.pairs();k.hasNext();)switch(h=k.next(),h.key){case "first":g=this._glyphs.get(h.getInt());break;case "second":i=h.getInt();break;case "amount":g._internal_setKerning(i,h.getInt())}}};i["flambe.display.Font"]=j.Font;j.Font.__name__=["flambe","display","Font"];j.Font.prototype={getGlyphs:function(a){for(var b=[],d=0,c=a.length;d<c;){var e=d++,e=this._glyphs.get(a.charCodeAt(e));null!=e?b.push(e):null}
return b},__class__:j.Font};j.Glyph=function(a){this.charCode=a};i["flambe.display.Glyph"]=j.Glyph;j.Glyph.__name__=["flambe","display","Glyph"];j.Glyph.prototype={_internal_setKerning:function(a,b){null==this._kernings&&(this._kernings=new U);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,d){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,d+this.yOffset,this.x,this.y,this.width,this.height)},__class__:j.Glyph};j._Font={};j._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new V("([a-z]+)(.*)","");this._pairPattern=new V('([a-z]+)=("[^"]*"|[^\\s]+)',"")};i["flambe.display._Font.ConfigParser"]=j._Font.ConfigParser;j._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];j._Font.ConfigParser.advance=function(a,b){var d=b.matchedPos();return x.substr(a,d.pos+d.len,a.length)};j._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=j._Font.ConfigParser.advance(b,a._pairPattern);return new j._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=j._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:j._Font.ConfigParser};j._Font.ConfigPair=function(a,b){this.key=a;this._value=b};i["flambe.display._Font.ConfigPair"]=j._Font.ConfigPair;j._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];j._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:x.substr(this._value,1,this._value.length-2)},getInt:function(){return n.parseInt(this._value)},__class__:j._Font.ConfigPair};j.Graphics=function(){};i["flambe.display.Graphics"]=j.Graphics;j.Graphics.__name__=["flambe","display","Graphics"];j.Graphics.prototype={__class__:j.Graphics};j.ImageSprite=function(a){j.Sprite.call(this);this.texture=a};i["flambe.display.ImageSprite"]=j.ImageSprite;j.ImageSprite.__name__=["flambe","display","ImageSprite"];j.ImageSprite.__super__=j.Sprite;j.ImageSprite.prototype=t(j.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:j.ImageSprite});j.MaskSprite=function(a,b){j.Sprite.call(this);this.image=b;this.shape=a;this.flagRefreshMask=!0};i["flambe.display.MaskSprite"]=j.MaskSprite;j.MaskSprite.__name__=["flambe","display","MaskSprite"];j.MaskSprite.__super__=j.Sprite;j.MaskSprite.prototype=t(j.Sprite.prototype,{onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);this.image.onUpdate(a);this.shape.onUpdate(a)},draw:function(a){a.mask(this.shape,this.image)},__class__:j.MaskSprite});j.Orientation=i["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};j.Orientation.Portrait=["Portrait",0];j.Orientation.Portrait.toString=m;j.Orientation.Portrait.__enum__=j.Orientation;j.Orientation.Landscape=["Landscape",1];j.Orientation.Landscape.toString=m;j.Orientation.Landscape.__enum__=j.Orientation;j.SHAPE_METHODS=i["flambe.display.SHAPE_METHODS"]={__ename__:["flambe","display","SHAPE_METHODS"],__constructs__:"MoveTo,LineTo,BeginPath,ClosePath,BeginStroke,EndStroke,BeginFill,EndFill,QuadCurve,BezCurve,Save,Restore,DrawRect,Arc".split(",")};j.SHAPE_METHODS.MoveTo=["MoveTo",0];j.SHAPE_METHODS.MoveTo.toString=m;j.SHAPE_METHODS.MoveTo.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.LineTo=["LineTo",1];j.SHAPE_METHODS.LineTo.toString=m;j.SHAPE_METHODS.LineTo.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BeginPath=["BeginPath",2];j.SHAPE_METHODS.BeginPath.toString=m;j.SHAPE_METHODS.BeginPath.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.ClosePath=["ClosePath",3];j.SHAPE_METHODS.ClosePath.toString=m;j.SHAPE_METHODS.ClosePath.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BeginStroke=["BeginStroke",4];j.SHAPE_METHODS.BeginStroke.toString=m;j.SHAPE_METHODS.BeginStroke.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.EndStroke=["EndStroke",5];j.SHAPE_METHODS.EndStroke.toString=m;j.SHAPE_METHODS.EndStroke.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BeginFill=["BeginFill",6];j.SHAPE_METHODS.BeginFill.toString=m;j.SHAPE_METHODS.BeginFill.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.EndFill=["EndFill",7];j.SHAPE_METHODS.EndFill.toString=m;j.SHAPE_METHODS.EndFill.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.QuadCurve=["QuadCurve",8];j.SHAPE_METHODS.QuadCurve.toString=m;j.SHAPE_METHODS.QuadCurve.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.BezCurve=["BezCurve",9];j.SHAPE_METHODS.BezCurve.toString=m;j.SHAPE_METHODS.BezCurve.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Save=["Save",10];j.SHAPE_METHODS.Save.toString=m;j.SHAPE_METHODS.Save.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Restore=["Restore",11];j.SHAPE_METHODS.Restore.toString=m;j.SHAPE_METHODS.Restore.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.DrawRect=["DrawRect",12];j.SHAPE_METHODS.DrawRect.toString=m;j.SHAPE_METHODS.DrawRect.__enum__=j.SHAPE_METHODS;j.SHAPE_METHODS.Arc=["Arc",13];j.SHAPE_METHODS.Arc.toString=m;j.SHAPE_METHODS.Arc.__enum__=j.SHAPE_METHODS;j.ShapeSprite=function(){this.isShape=this.isLine=this.isPath=!1;this.color=0;j.Sprite.call(this);this.points=[]};i["flambe.display.ShapeSprite"]=j.ShapeSprite;j.ShapeSprite.__name__=["flambe","display","ShapeSprite"];j.ShapeSprite.__super__=j.Sprite;j.ShapeSprite.prototype=t(j.Sprite.prototype,{draw:function(a){this.isShape&&a.beginFill(this.color);this.isLine&&a.beginStroke(this.color,1);for(var b=0;b<this.points.length;){switch(this.points[b][0][1]){case 0:a.moveTo(this.points[b][1],this.points[b][2]);break;case 1:a.lineTo(this.points[b][1],this.points[b][2]);break;case 2:a.beginPath();break;case 3:a.closePath();break;case 4:a.beginStroke(this.points[b][1],this.points[b][2]);break;case 5:a.endStroke();break;case 6:a.beginFill(this.points[b][1]);break;case 7:a.endFill();break;case 8:a.quadraticCurveTo(this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4]);break;case 9:a.bezierCurveTo(this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4],this.points[b][5],this.points[b][6]);break;case 10:a.save();break;case 11:a.restore();break;case 12:a.fillRect(this.color,this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4]);break;case 13:a.arc(this.points[b][1],this.points[b][2],this.points[b][3],this.points[b][4],this.points[b][5])}
b++}
this.isShape&&a.endFill();this.isLine&&a.endStroke();!this.isPath&&(this.isShape||this.isLine)&&a.drawShapeSprite();null==this.graphics&&(this.graphics=a)},__class__:j.ShapeSprite});j.Stage=function(){};i["flambe.display.Stage"]=j.Stage;j.Stage.__name__=["flambe","display","Stage"];j.Stage.prototype={__class__:j.Stage};j.TextSprite=function(a,b){null==b&&(b="");this._width=this._height=0;this._glyphs=this._offsets=this._font=this._text=null;j.Sprite.call(this);this._font=a;this._text=b;this._flags|=32};i["flambe.display.TextSprite"]=j.TextSprite;j.TextSprite.__name__=["flambe","display","TextSprite"];j.TextSprite.__super__=j.Sprite;j.TextSprite.prototype=t(j.Sprite.prototype,{updateGlyphs:function(){if(0!=(this._flags&32)){this._flags&=-33;this._glyphs=this._font.getGlyphs(this._text);this._offsets=[0];for(var a=this._height=this._width=0,b=this._glyphs.length;a<b;){var d=this._glyphs[a];++a;a==b?this._width+=d.width:(this._width+=d.xAdvance+d.getKerning(this._glyphs[a].charCode),this._offsets.push(this._width));this._height=F.FMath.max(this._height,d.height+d.yOffset)}}},set_font:function(a){this._font=a;this._flags|=32;return a},set_text:function(a){this._text=a;this._flags|=32;return a},getNaturalHeight:function(){this.updateGlyphs();return this._height},getNaturalWidth:function(){this.updateGlyphs();return this._width},draw:function(a){this.updateGlyphs();for(var b=0,d=this._glyphs.length;b<d;)this._glyphs[b].draw(a,this._offsets[b],0),++b},__class__:j.TextSprite});j.Texture=function(){};i["flambe.display.Texture"]=j.Texture;j.Texture.__name__=["flambe","display","Texture"];j.Texture.prototype={__class__:j.Texture};w={External:function(){}};i["flambe.external.External"]=w.External;w.External.__name__=["flambe","external","External"];w.External.prototype={__class__:w.External};c={};c.Key=i["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};c.Key.A=["A",0];c.Key.A.toString=m;c.Key.A.__enum__=c.Key;c.Key.B=["B",1];c.Key.B.toString=m;c.Key.B.__enum__=c.Key;c.Key.C=["C",2];c.Key.C.toString=m;c.Key.C.__enum__=c.Key;c.Key.D=["D",3];c.Key.D.toString=m;c.Key.D.__enum__=c.Key;c.Key.E=["E",4];c.Key.E.toString=m;c.Key.E.__enum__=c.Key;c.Key.F=["F",5];c.Key.F.toString=m;c.Key.F.__enum__=c.Key;c.Key.G=["G",6];c.Key.G.toString=m;c.Key.G.__enum__=c.Key;c.Key.H=["H",7];c.Key.H.toString=m;c.Key.H.__enum__=c.Key;c.Key.I=["I",8];c.Key.I.toString=m;c.Key.I.__enum__=c.Key;c.Key.J=["J",9];c.Key.J.toString=m;c.Key.J.__enum__=c.Key;c.Key.K=["K",10];c.Key.K.toString=m;c.Key.K.__enum__=c.Key;c.Key.L=["L",11];c.Key.L.toString=m;c.Key.L.__enum__=c.Key;c.Key.M=["M",12];c.Key.M.toString=m;c.Key.M.__enum__=c.Key;c.Key.N=["N",13];c.Key.N.toString=m;c.Key.N.__enum__=c.Key;c.Key.O=["O",14];c.Key.O.toString=m;c.Key.O.__enum__=c.Key;c.Key.P=["P",15];c.Key.P.toString=m;c.Key.P.__enum__=c.Key;c.Key.Q=["Q",16];c.Key.Q.toString=m;c.Key.Q.__enum__=c.Key;c.Key.R=["R",17];c.Key.R.toString=m;c.Key.R.__enum__=c.Key;c.Key.S=["S",18];c.Key.S.toString=m;c.Key.S.__enum__=c.Key;c.Key.T=["T",19];c.Key.T.toString=m;c.Key.T.__enum__=c.Key;c.Key.U=["U",20];c.Key.U.toString=m;c.Key.U.__enum__=c.Key;c.Key.V=["V",21];c.Key.V.toString=m;c.Key.V.__enum__=c.Key;c.Key.W=["W",22];c.Key.W.toString=m;c.Key.W.__enum__=c.Key;c.Key.X=["X",23];c.Key.X.toString=m;c.Key.X.__enum__=c.Key;c.Key.Y=["Y",24];c.Key.Y.toString=m;c.Key.Y.__enum__=c.Key;c.Key.Z=["Z",25];c.Key.Z.toString=m;c.Key.Z.__enum__=c.Key;c.Key.Number0=["Number0",26];c.Key.Number0.toString=m;c.Key.Number0.__enum__=c.Key;c.Key.Number1=["Number1",27];c.Key.Number1.toString=m;c.Key.Number1.__enum__=c.Key;c.Key.Number2=["Number2",28];c.Key.Number2.toString=m;c.Key.Number2.__enum__=c.Key;c.Key.Number3=["Number3",29];c.Key.Number3.toString=m;c.Key.Number3.__enum__=c.Key;c.Key.Number4=["Number4",30];c.Key.Number4.toString=m;c.Key.Number4.__enum__=c.Key;c.Key.Number5=["Number5",31];c.Key.Number5.toString=m;c.Key.Number5.__enum__=c.Key;c.Key.Number6=["Number6",32];c.Key.Number6.toString=m;c.Key.Number6.__enum__=c.Key;c.Key.Number7=["Number7",33];c.Key.Number7.toString=m;c.Key.Number7.__enum__=c.Key;c.Key.Number8=["Number8",34];c.Key.Number8.toString=m;c.Key.Number8.__enum__=c.Key;c.Key.Number9=["Number9",35];c.Key.Number9.toString=m;c.Key.Number9.__enum__=c.Key;c.Key.Numpad0=["Numpad0",36];c.Key.Numpad0.toString=m;c.Key.Numpad0.__enum__=c.Key;c.Key.Numpad1=["Numpad1",37];c.Key.Numpad1.toString=m;c.Key.Numpad1.__enum__=c.Key;c.Key.Numpad2=["Numpad2",38];c.Key.Numpad2.toString=m;c.Key.Numpad2.__enum__=c.Key;c.Key.Numpad3=["Numpad3",39];c.Key.Numpad3.toString=m;c.Key.Numpad3.__enum__=c.Key;c.Key.Numpad4=["Numpad4",40];c.Key.Numpad4.toString=m;c.Key.Numpad4.__enum__=c.Key;c.Key.Numpad5=["Numpad5",41];c.Key.Numpad5.toString=m;c.Key.Numpad5.__enum__=c.Key;c.Key.Numpad6=["Numpad6",42];c.Key.Numpad6.toString=m;c.Key.Numpad6.__enum__=c.Key;c.Key.Numpad7=["Numpad7",43];c.Key.Numpad7.toString=m;c.Key.Numpad7.__enum__=c.Key;c.Key.Numpad8=["Numpad8",44];c.Key.Numpad8.toString=m;c.Key.Numpad8.__enum__=c.Key;c.Key.Numpad9=["Numpad9",45];c.Key.Numpad9.toString=m;c.Key.Numpad9.__enum__=c.Key;c.Key.NumpadAdd=["NumpadAdd",46];c.Key.NumpadAdd.toString=m;c.Key.NumpadAdd.__enum__=c.Key;c.Key.NumpadDecimal=["NumpadDecimal",47];c.Key.NumpadDecimal.toString=m;c.Key.NumpadDecimal.__enum__=c.Key;c.Key.NumpadDivide=["NumpadDivide",48];c.Key.NumpadDivide.toString=m;c.Key.NumpadDivide.__enum__=c.Key;c.Key.NumpadEnter=["NumpadEnter",49];c.Key.NumpadEnter.toString=m;c.Key.NumpadEnter.__enum__=c.Key;c.Key.NumpadMultiply=["NumpadMultiply",50];c.Key.NumpadMultiply.toString=m;c.Key.NumpadMultiply.__enum__=c.Key;c.Key.NumpadSubtract=["NumpadSubtract",51];c.Key.NumpadSubtract.toString=m;c.Key.NumpadSubtract.__enum__=c.Key;c.Key.F1=["F1",52];c.Key.F1.toString=m;c.Key.F1.__enum__=c.Key;c.Key.F2=["F2",53];c.Key.F2.toString=m;c.Key.F2.__enum__=c.Key;c.Key.F3=["F3",54];c.Key.F3.toString=m;c.Key.F3.__enum__=c.Key;c.Key.F4=["F4",55];c.Key.F4.toString=m;c.Key.F4.__enum__=c.Key;c.Key.F5=["F5",56];c.Key.F5.toString=m;c.Key.F5.__enum__=c.Key;c.Key.F6=["F6",57];c.Key.F6.toString=m;c.Key.F6.__enum__=c.Key;c.Key.F7=["F7",58];c.Key.F7.toString=m;c.Key.F7.__enum__=c.Key;c.Key.F8=["F8",59];c.Key.F8.toString=m;c.Key.F8.__enum__=c.Key;c.Key.F9=["F9",60];c.Key.F9.toString=m;c.Key.F9.__enum__=c.Key;c.Key.F10=["F10",61];c.Key.F10.toString=m;c.Key.F10.__enum__=c.Key;c.Key.F11=["F11",62];c.Key.F11.toString=m;c.Key.F11.__enum__=c.Key;c.Key.F12=["F12",63];c.Key.F12.toString=m;c.Key.F12.__enum__=c.Key;c.Key.F13=["F13",64];c.Key.F13.toString=m;c.Key.F13.__enum__=c.Key;c.Key.F14=["F14",65];c.Key.F14.toString=m;c.Key.F14.__enum__=c.Key;c.Key.F15=["F15",66];c.Key.F15.toString=m;c.Key.F15.__enum__=c.Key;c.Key.Left=["Left",67];c.Key.Left.toString=m;c.Key.Left.__enum__=c.Key;c.Key.Up=["Up",68];c.Key.Up.toString=m;c.Key.Up.__enum__=c.Key;c.Key.Right=["Right",69];c.Key.Right.toString=m;c.Key.Right.__enum__=c.Key;c.Key.Down=["Down",70];c.Key.Down.toString=m;c.Key.Down.__enum__=c.Key;c.Key.Alt=["Alt",71];c.Key.Alt.toString=m;c.Key.Alt.__enum__=c.Key;c.Key.Backquote=["Backquote",72];c.Key.Backquote.toString=m;c.Key.Backquote.__enum__=c.Key;c.Key.Backslash=["Backslash",73];c.Key.Backslash.toString=m;c.Key.Backslash.__enum__=c.Key;c.Key.Backspace=["Backspace",74];c.Key.Backspace.toString=m;c.Key.Backspace.__enum__=c.Key;c.Key.CapsLock=["CapsLock",75];c.Key.CapsLock.toString=m;c.Key.CapsLock.__enum__=c.Key;c.Key.Comma=["Comma",76];c.Key.Comma.toString=m;c.Key.Comma.__enum__=c.Key;c.Key.Command=["Command",77];c.Key.Command.toString=m;c.Key.Command.__enum__=c.Key;c.Key.Control=["Control",78];c.Key.Control.toString=m;c.Key.Control.__enum__=c.Key;c.Key.Delete=["Delete",79];c.Key.Delete.toString=m;c.Key.Delete.__enum__=c.Key;c.Key.End=["End",80];c.Key.End.toString=m;c.Key.End.__enum__=c.Key;c.Key.Enter=["Enter",81];c.Key.Enter.toString=m;c.Key.Enter.__enum__=c.Key;c.Key.Equals=["Equals",82];c.Key.Equals.toString=m;c.Key.Equals.__enum__=c.Key;c.Key.Escape=["Escape",83];c.Key.Escape.toString=m;c.Key.Escape.__enum__=c.Key;c.Key.Home=["Home",84];c.Key.Home.toString=m;c.Key.Home.__enum__=c.Key;c.Key.Insert=["Insert",85];c.Key.Insert.toString=m;c.Key.Insert.__enum__=c.Key;c.Key.LeftBracket=["LeftBracket",86];c.Key.LeftBracket.toString=m;c.Key.LeftBracket.__enum__=c.Key;c.Key.Minus=["Minus",87];c.Key.Minus.toString=m;c.Key.Minus.__enum__=c.Key;c.Key.PageDown=["PageDown",88];c.Key.PageDown.toString=m;c.Key.PageDown.__enum__=c.Key;c.Key.PageUp=["PageUp",89];c.Key.PageUp.toString=m;c.Key.PageUp.__enum__=c.Key;c.Key.Period=["Period",90];c.Key.Period.toString=m;c.Key.Period.__enum__=c.Key;c.Key.Quote=["Quote",91];c.Key.Quote.toString=m;c.Key.Quote.__enum__=c.Key;c.Key.RightBracket=["RightBracket",92];c.Key.RightBracket.toString=m;c.Key.RightBracket.__enum__=c.Key;c.Key.Semicolon=["Semicolon",93];c.Key.Semicolon.toString=m;c.Key.Semicolon.__enum__=c.Key;c.Key.Shift=["Shift",94];c.Key.Shift.toString=m;c.Key.Shift.__enum__=c.Key;c.Key.Slash=["Slash",95];c.Key.Slash.toString=m;c.Key.Slash.__enum__=c.Key;c.Key.Space=["Space",96];c.Key.Space.toString=m;c.Key.Space.__enum__=c.Key;c.Key.Tab=["Tab",97];c.Key.Tab.toString=m;c.Key.Tab.__enum__=c.Key;c.Key.Menu=["Menu",98];c.Key.Menu.toString=m;c.Key.Menu.__enum__=c.Key;c.Key.Search=["Search",99];c.Key.Search.toString=m;c.Key.Search.__enum__=c.Key;c.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=c.Key;a.toString=m;return a};c.Keyboard=function(){};i["flambe.input.Keyboard"]=c.Keyboard;c.Keyboard.__name__=["flambe","input","Keyboard"];c.Keyboard.prototype={__class__:c.Keyboard};c.KeyboardEvent=function(){this._internal_init(0,null)};i["flambe.input.KeyboardEvent"]=c.KeyboardEvent;c.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];c.KeyboardEvent.prototype={_internal_init:function(a,b){this.id=a;this.key=b},__class__:c.KeyboardEvent};c.Mouse=function(){};i["flambe.input.Mouse"]=c.Mouse;c.Mouse.__name__=["flambe","input","Mouse"];c.Mouse.prototype={__class__:c.Mouse};c.MouseButton=i["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};c.MouseButton.Left=["Left",0];c.MouseButton.Left.toString=m;c.MouseButton.Left.__enum__=c.MouseButton;c.MouseButton.Middle=["Middle",1];c.MouseButton.Middle.toString=m;c.MouseButton.Middle.__enum__=c.MouseButton;c.MouseButton.Right=["Right",2];c.MouseButton.Right.toString=m;c.MouseButton.Right.__enum__=c.MouseButton;c.MouseButton.Unknown=function(a){a=["Unknown",3,a];a.__enum__=c.MouseButton;a.toString=m;return a};c.MouseCursor=i["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};c.MouseCursor.Default=["Default",0];c.MouseCursor.Default.toString=m;c.MouseCursor.Default.__enum__=c.MouseCursor;c.MouseCursor.Button=["Button",1];c.MouseCursor.Button.toString=m;c.MouseCursor.Button.__enum__=c.MouseCursor;c.MouseCursor.None=["None",2];c.MouseCursor.None.toString=m;c.MouseCursor.None.__enum__=c.MouseCursor;c.MouseEvent=function(){this._internal_init(0,0,0,null)};i["flambe.input.MouseEvent"]=c.MouseEvent;c.MouseEvent.__name__=["flambe","input","MouseEvent"];c.MouseEvent.prototype={_internal_init:function(a,b,d,c){this.id=a;this.viewX=b;this.viewY=d;this.button=c},__class__:c.MouseEvent};c.Pointer=function(){};i["flambe.input.Pointer"]=c.Pointer;c.Pointer.__name__=["flambe","input","Pointer"];c.Pointer.prototype={__class__:c.Pointer};c.EventSource=i["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};c.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=c.EventSource;a.toString=m;return a};c.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=c.EventSource;a.toString=m;return a};c.PointerEvent=function(){this._internal_init(0,0,0,null,null)};i["flambe.input.PointerEvent"]=c.PointerEvent;c.PointerEvent.__name__=["flambe","input","PointerEvent"];c.PointerEvent.prototype={_internal_init:function(a,b,d,c,e){this.id=a;this.viewX=b;this.viewY=d;this.hit=c;this.source=e;this._internal_stopped=!1},__class__:c.PointerEvent};c.Touch=function(){};i["flambe.input.Touch"]=c.Touch;c.Touch.__name__=["flambe","input","Touch"];c.Touch.prototype={__class__:c.Touch};c.TouchPoint=function(a){this.id=a;this._internal_source=c.EventSource.Touch(this)};i["flambe.input.TouchPoint"]=c.TouchPoint;c.TouchPoint.__name__=["flambe","input","TouchPoint"];c.TouchPoint.prototype={_internal_init:function(a,b){this.viewX=a;this.viewY=b},__class__:c.TouchPoint};F.FMath=function(){};i["flambe.math.FMath"]=F.FMath;F.FMath.__name__=["flambe","math","FMath"];F.FMath.max=function(a,b){return a>b?a:b};F.FMath.clamp=function(a,b,d){return a<b?b:a>d?d:a};F.Matrix=function(){this.identity()};i["flambe.math.Matrix"]=F.Matrix;F.Matrix.__name__=["flambe","math","Matrix"];F.Matrix.prototype={inverseTransform:function(a,b,d){var c=this.determinant();if(0==c)return!1;a-=this.m02;b-=this.m12;d.x=(a*this.m11-b*this.m01)/c;d.y=(b*this.m00-a*this.m10)/c;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,d,c,e){var f=Math.sin(e),e=Math.cos(e);this.set(e*d,f*d,-f*c,e*c,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,d,c,e,f){this.m00=a;this.m01=d;this.m02=e;this.m10=b;this.m11=c;this.m12=f},__class__:F.Matrix};F.Rectangle=function(a,b,d,c){null==c&&(c=0);null==d&&(d=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,d,c)};i["flambe.math.Rectangle"]=F.Rectangle;F.Rectangle.__name__=["flambe","math","Rectangle"];F.Rectangle.prototype={contains:function(a,b){a-=this.x;b-=this.y;return 0<=a&&0<=b&&a<=this.width&&b<=this.height},set:function(a,b,d,c){this.x=a;this.y=b;this.width=d;this.height=c},__class__:F.Rectangle};e.BasicAssetPackLoader=function(a,b){this._platform=a;this.promise=new l.Promise;this._bytesLoaded=new E;this._pack=new e._BasicAssetPackLoader.BasicAssetPack(b);var d=$.array(b);if(0==d.length)this.handleSuccess();else{for(var c=0,f=new E,g=0;g<d.length;){var h=d[g];++g;var i=f.get(h.name);null==i&&(i=[],f.set(h.name,i));i.push(h)}
this._assetsRemaining=$.count(f);for(d=f.iterator();d.hasNext();)
if(i=d.next(),i=1<i.length?this.pickBestEntry(i):i[0],f=this.createPlaceholder(i),null!=f)this.handleLoad(i,f);else{c+=i.bytes;f=b.getFullURL(i);try{this.loadEntry(f,i)}catch(j){this.handleError(i,"Unexpected error: "+n.string(j))}}
this.promise.set_total(c)}};i["flambe.platform.BasicAssetPackLoader"]=e.BasicAssetPackLoader;e.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];e.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit1(l.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var d=0,c=this._bytesLoaded.iterator();c.hasNext();)var e=c.next(),d=d+e;this.promise.set_progress(d)},handleLoad:function(a,b){this.handleProgress(a,a.bytes);var d=a.name;switch(a.type[1]){case 0:this._pack.textures.set(d,b);break;case 1:this._pack.sounds.set(d,b);break;case 2:this._pack.files.set(d,b)}
this._assetsRemaining-=1;0>=this._assetsRemaining&&this.handleSuccess()},getAudioFormats:function(){return[]},loadEntry:function(){},createPlaceholder:function(a){switch(a.type[1]){case 1:if(!$.has(this.getAudioFormats(),a.getUrlExtension()))return e.DummySound.getInstance()}
return null},pickBestEntry:function(a){switch(a[0].type[1]){case 1:for(var b=this.getAudioFormats(),d=0;d<b.length;){var c=b[d];++d;for(var e=0;e<a.length;){var f=a[e];++e;if(f.getUrlExtension()==c)return f}}}
return a[0]},__class__:e.BasicAssetPackLoader};e._BasicAssetPackLoader={};e._BasicAssetPackLoader.BasicAssetPack=function(a){this._manifest=a;this.textures=new E;this.sounds=new E;this.files=new E};i["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=e._BasicAssetPackLoader.BasicAssetPack;e._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];e._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[v.AssetPack];e._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},getFile:function(a,b){null==b&&(b=!0);var d=this.files.get(a);if(null==d&&b)throw l.Strings.withFields("Missing file",["name",a]);return d},getSound:function(a,b){null==b&&(b=!0);var d=this.sounds.get(a);if(null==d&&b)throw l.Strings.withFields("Missing sound",["name",a]);return d},getTexture:function(a,b){null==b&&(b=!0);var d=this.textures.get(a);if(null==d&&b)throw l.Strings.withFields("Missing texture",["name",a]);return d},__class__:e._BasicAssetPackLoader.BasicAssetPack};e.BasicKeyboard=function(){this.down=new l.Signal1;this.up=new l.Signal1;this.backButton=new l.Signal0;this._keyStates=new U};i["flambe.platform.BasicKeyboard"]=e.BasicKeyboard;e.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];e.BasicKeyboard.__interfaces__=[c.Keyboard];e.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),e.BasicKeyboard._sharedEvent._internal_init(e.BasicKeyboard._sharedEvent.id+1,e.KeyCodes.toKey(a)),this.up.emit1(e.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),e.BasicKeyboard._sharedEvent._internal_init(e.BasicKeyboard._sharedEvent.id+1,e.KeyCodes.toKey(a)),this.down.emit1(e.BasicKeyboard._sharedEvent));return!0},isDown:function(a){return this._keyStates.exists(e.KeyCodes.toKeyCode(a))},get_supported:function(){return!0},__class__:e.BasicKeyboard};e.BasicMouse=function(a){this._pointer=a;this._source=c.EventSource.Mouse(e.BasicMouse._sharedEvent);this.down=new l.Signal1;this.move=new l.Signal1;this.up=new l.Signal1;this.scroll=new l.Signal1;this._y=this._x=0;this._cursor=c.MouseCursor.Default;this._buttonStates=new U};i["flambe.platform.BasicMouse"]=e.BasicMouse;e.BasicMouse.__name__=["flambe","platform","BasicMouse"];e.BasicMouse.__interfaces__=[c.Mouse];e.BasicMouse.prototype={prepare:function(a,b,d){this._x=a;this._y=b;e.BasicMouse._sharedEvent._internal_init(e.BasicMouse._sharedEvent.id+1,a,b,d)},submitScroll:function(a,b,d){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(d);return!0},submitUp:function(a,b,d){this._buttonStates.exists(d)&&(this._buttonStates.remove(d),this.prepare(a,b,e.MouseCodes.toButton(d)),this._pointer.submitUp(a,b,this._source),this.up.emit1(e.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(e.BasicMouse._sharedEvent)},submitDown:function(a,b,d){this._buttonStates.exists(d)||(this._buttonStates.set(d,!0),this.prepare(a,b,e.MouseCodes.toButton(d)),this._pointer.submitDown(a,b,this._source),this.down.emit1(e.BasicMouse._sharedEvent))},isDown:function(a){return this._buttonStates.exists(e.MouseCodes.toButtonCode(a))},set_cursor:function(a){return this._cursor=a},get_cursor:function(){return this._cursor},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:e.BasicMouse};e.BasicPointer=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);null==a&&(a=0);this.down=new l.Signal1;this.move=new l.Signal1;this.up=new l.Signal1;this._x=a;this._y=b;this._isDown=d};i["flambe.platform.BasicPointer"]=e.BasicPointer;e.BasicPointer.__name__=["flambe","platform","BasicPointer"];e.BasicPointer.__interfaces__=[c.Pointer];e.BasicPointer.prototype={prepare:function(a,b,d,c){this._x=a;this._y=b;e.BasicPointer._sharedEvent._internal_init(e.BasicPointer._sharedEvent.id+1,a,b,d,c)},submitUp:function(a,b,d){if(this._isDown){this._isDown=!1;var c=[],f=j.Sprite.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var h=g._compMap.Sprite_1;null!=h&&c.push(h);g=g.parent}while(null!=g)}
this.prepare(a,b,f,d);for(a=0;a<c.length;)
if(h=c[a],++a,h=h._internal_pointerUp,null!=h&&(h.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;this.up.emit1(e.BasicPointer._sharedEvent)}},submitMove:function(a,b,d){var c=[],f=j.Sprite.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var h=g._compMap.Sprite_1;null!=h&&c.push(h);g=g.parent}while(null!=g)}
this.prepare(a,b,f,d);for(a=0;a<c.length;)
if(h=c[a],++a,h=h._internal_pointerMove,null!=h&&(h.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;this.move.emit1(e.BasicPointer._sharedEvent)},submitDown:function(a,b,d){if(!this._isDown){this._isDown=!0;var c=[],f=j.Sprite.hitTest(A.root,a,b);if(null!=f){var g=f.owner;do{var h=g._compMap.Sprite_1;null!=h&&c.push(h);g=g.parent}while(null!=g)}
this.prepare(a,b,f,d);for(a=0;a<c.length;)
if(h=c[a],++a,h=h._internal_pointerDown,null!=h&&(h.emit1(e.BasicPointer._sharedEvent),e.BasicPointer._sharedEvent._internal_stopped))return;this.down.emit1(e.BasicPointer._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:e.BasicPointer};e.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new U;this._points=[];this.down=new l.Signal1;this.move=new l.Signal1;this.up=new l.Signal1};i["flambe.platform.BasicTouch"]=e.BasicTouch;e.BasicTouch.__name__=["flambe","platform","BasicTouch"];e.BasicTouch.__interfaces__=[c.Touch];e.BasicTouch.prototype={submitUp:function(a,b,d){var c=this._pointMap.get(a);null!=c&&(c._internal_init(b,d),this._pointMap.remove(a),x.remove(this._points,c),this._pointerTouch==c&&(this._pointerTouch=null,this._pointer.submitUp(b,d,c._internal_source)),this.up.emit1(c))},submitMove:function(a,b,d){a=this._pointMap.get(a);null!=a&&(a._internal_init(b,d),this._pointerTouch==a&&this._pointer.submitMove(b,d,a._internal_source),this.move.emit1(a))},submitDown:function(a,b,d){if(!this._pointMap.exists(a)){var e=new c.TouchPoint(a);e._internal_init(b,d);this._pointMap.set(a,e);this._points.push(e);null==this._pointerTouch&&(this._pointerTouch=e,this._pointer.submitDown(b,d,e._internal_source));this.down.emit1(e)}},get_points:function(){return this._points.slice()},get_maxPoints:function(){return this._maxPoints},get_supported:function(){return!0},__class__:e.BasicTouch};D.Sound=function(){};i["flambe.sound.Sound"]=D.Sound;D.Sound.__name__=["flambe","sound","Sound"];D.Sound.prototype={__class__:D.Sound};e.DummySound=function(){this._playback=new e.DummyPlayback(this)};i["flambe.platform.DummySound"]=e.DummySound;e.DummySound.__name__=["flambe","platform","DummySound"];e.DummySound.__interfaces__=[D.Sound];e.DummySound.getInstance=function(){null==e.DummySound._instance&&(e.DummySound._instance=new e.DummySound);return e.DummySound._instance};e.DummySound.prototype={get_duration:function(){return 0},loop:function(){return this._playback},play:function(){return this._playback},__class__:e.DummySound};D.Playback=function(){};i["flambe.sound.Playback"]=D.Playback;D.Playback.__name__=["flambe","sound","Playback"];D.Playback.__interfaces__=[l.Disposable];D.Playback.prototype={__class__:D.Playback};e.DummyPlayback=function(a){this._sound=a;this.volume=new C.AnimatedFloat(0)};i["flambe.platform.DummyPlayback"]=e.DummyPlayback;e.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];e.DummyPlayback.__interfaces__=[D.Playback];e.DummyPlayback.prototype={dispose:function(){},get_position:function(){return 0},get_ended:function(){return!0},set_paused:function(){return!0},get_paused:function(){return!0},get_sound:function(){return this._sound},__class__:e.DummyPlayback};Z={Storage:function(){}};i["flambe.storage.Storage"]=Z.Storage;Z.Storage.__name__=["flambe","storage","Storage"];Z.Storage.prototype={__class__:Z.Storage};e.DummyStorage=function(){this.clear()};i["flambe.platform.DummyStorage"]=e.DummyStorage;e.DummyStorage.__name__=["flambe","platform","DummyStorage"];e.DummyStorage.__interfaces__=[Z.Storage];e.DummyStorage.prototype={clear:function(){this._hash=new E},remove:function(a){this._hash.remove(a)},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},set:function(a,b){this._hash.set(a,b);return!0},get_supported:function(){return!1},__class__:e.DummyStorage};e.DummyTouch=function(){this.down=new l.Signal1;this.move=new l.Signal1;this.up=new l.Signal1};i["flambe.platform.DummyTouch"]=e.DummyTouch;e.DummyTouch.__name__=["flambe","platform","DummyTouch"];e.DummyTouch.__interfaces__=[c.Touch];e.DummyTouch.prototype={get_points:function(){return[]},get_maxPoints:function(){return 0},get_supported:function(){return!1},__class__:e.DummyTouch};e.EventGroup=function(){this._entries=[]};i["flambe.platform.EventGroup"]=e.EventGroup;e.EventGroup.__name__=["flambe","platform","EventGroup"];e.EventGroup.__interfaces__=[l.Disposable];e.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var d=b[a];++a;d.dispatcher.removeEventListener(d.type,d.listener,!1)}
this._entries=[]},addDisposingListener:function(a,b,d){var c=this;this.addListener(a,b,function(a){c.dispose();d(a)})},addListener:function(a,b,d){a.addEventListener(b,d,!1);this._entries.push(new e._EventGroup.Entry(a,b,d))},__class__:e.EventGroup};e._EventGroup={};e._EventGroup.Entry=function(a,b,d){this.dispatcher=a;this.type=b;this.listener=d};i["flambe.platform._EventGroup.Entry"]=e._EventGroup.Entry;e._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];e._EventGroup.Entry.prototype={__class__:e._EventGroup.Entry};e.KeyCodes=function(){};i["flambe.platform.KeyCodes"]=e.KeyCodes;e.KeyCodes.__name__=["flambe","platform","KeyCodes"];e.KeyCodes.toKey=function(a){switch(a){case 65:return c.Key.A;case 66:return c.Key.B;case 67:return c.Key.C;case 68:return c.Key.D;case 69:return c.Key.E;case 70:return c.Key.F;case 71:return c.Key.G;case 72:return c.Key.H;case 73:return c.Key.I;case 74:return c.Key.J;case 75:return c.Key.K;case 76:return c.Key.L;case 77:return c.Key.M;case 78:return c.Key.N;case 79:return c.Key.O;case 80:return c.Key.P;case 81:return c.Key.Q;case 82:return c.Key.R;case 83:return c.Key.S;case 84:return c.Key.T;case 85:return c.Key.U;case 86:return c.Key.V;case 87:return c.Key.W;case 88:return c.Key.X;case 89:return c.Key.Y;case 90:return c.Key.Z;case 48:return c.Key.Number0;case 49:return c.Key.Number1;case 50:return c.Key.Number2;case 51:return c.Key.Number3;case 52:return c.Key.Number4;case 53:return c.Key.Number5;case 54:return c.Key.Number6;case 55:return c.Key.Number7;case 56:return c.Key.Number8;case 57:return c.Key.Number9;case 96:return c.Key.Numpad0;case 97:return c.Key.Numpad1;case 98:return c.Key.Numpad2;case 99:return c.Key.Numpad3;case 100:return c.Key.Numpad4;case 101:return c.Key.Numpad5;case 102:return c.Key.Numpad6;case 103:return c.Key.Numpad7;case 104:return c.Key.Numpad8;case 105:return c.Key.Numpad9;case 107:return c.Key.NumpadAdd;case 110:return c.Key.NumpadDecimal;case 111:return c.Key.NumpadDivide;case 108:return c.Key.NumpadEnter;case 106:return c.Key.NumpadMultiply;case 109:return c.Key.NumpadSubtract;case 112:return c.Key.F1;case 113:return c.Key.F2;case 114:return c.Key.F3;case 115:return c.Key.F4;case 116:return c.Key.F5;case 117:return c.Key.F6;case 118:return c.Key.F7;case 119:return c.Key.F8;case 120:return c.Key.F9;case 121:return c.Key.F10;case 122:return c.Key.F11;case 123:return c.Key.F12;case 37:return c.Key.Left;case 38:return c.Key.Up;case 39:return c.Key.Right;case 40:return c.Key.Down;case 18:return c.Key.Alt;case 192:return c.Key.Backquote;case 220:return c.Key.Backslash;case 8:return c.Key.Backspace;case 20:return c.Key.CapsLock;case 188:return c.Key.Comma;case 15:return c.Key.Command;case 17:return c.Key.Control;case 46:return c.Key.Delete;case 35:return c.Key.End;case 13:return c.Key.Enter;case 187:return c.Key.Equals;case 27:return c.Key.Escape;case 36:return c.Key.Home;case 45:return c.Key.Insert;case 219:return c.Key.LeftBracket;case 189:return c.Key.Minus;case 34:return c.Key.PageDown;case 33:return c.Key.PageUp;case 190:return c.Key.Period;case 222:return c.Key.Quote;case 221:return c.Key.RightBracket;case 186:return c.Key.Semicolon;case 16:return c.Key.Shift;case 191:return c.Key.Slash;case 32:return c.Key.Space;case 9:return c.Key.Tab;case 16777234:return c.Key.Menu;case 16777247:return c.Key.Search}
return c.Key.Unknown(a)};e.KeyCodes.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};e.MainLoop=function(){this._tickables=[]};i["flambe.platform.MainLoop"]=e.MainLoop;e.MainLoop.__name__=["flambe","platform","MainLoop"];e.MainLoop.updateEntity=function(a,b){var d=a._compMap.SpeedAdjuster_5;if(null!=d&&(d._internal_realDt=b,b*=d.scale._value,0>=b)){d.onUpdate(b);return}
for(var c=a.firstComponent;null!=c;)d=c.next,c.onUpdate(b),c=d;for(c=a.firstChild;null!=c;)d=c.next,e.MainLoop.updateEntity(c,b),c=d};e.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.willRender();null!=b&&(j.Sprite.render(A.root,b),a.didRender())},update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var d=this._tickables[b];null==d||d.update(a)?this._tickables.splice(b,1):++b}
e.MainLoop.updateEntity(A.root,a)}},__class__:e.MainLoop};e.ManifestBuilder=function(){};i["flambe.platform.ManifestBuilder"]=e.ManifestBuilder;e.ManifestBuilder.__name__=["flambe","platform","ManifestBuilder"];e.MouseCodes=function(){};i["flambe.platform.MouseCodes"]=e.MouseCodes;e.MouseCodes.__name__=["flambe","platform","MouseCodes"];e.MouseCodes.toButton=function(a){switch(a){case 0:return c.MouseButton.Left;case 1:return c.MouseButton.Middle;case 2:return c.MouseButton.Right}
return c.MouseButton.Unknown(a)};e.MouseCodes.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};e.Renderer=function(){};i["flambe.platform.Renderer"]=e.Renderer;e.Renderer.__name__=["flambe","platform","Renderer"];e.Renderer.prototype={__class__:e.Renderer};e.Tickable=function(){};i["flambe.platform.Tickable"]=e.Tickable;e.Tickable.__name__=["flambe","platform","Tickable"];e.Tickable.prototype={__class__:e.Tickable};e.html.CanvasGraphics=function(a){this._firstDraw=this._drawToTemp=!1;this._canvasCtx=a.getContext("2d");this.clear()};i["flambe.platform.html.CanvasGraphics"]=e.html.CanvasGraphics;e.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];e.html.CanvasGraphics.__interfaces__=[j.Graphics];e.html.CanvasGraphics.prototype={erase:function(){this._canvasCtx.clearRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height)},clip2:function(a,b){this._tempGraphics.erase();this._tempGraphics.save();var d=b.getLocalMatrix();this._tempGraphics.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12);this._tempGraphics.setAlpha(b.alpha._value);G.__instanceof(b,j.MaskSprite)?(d=G.__cast(b,j.MaskSprite),G.__instanceof(d.shape,j.FillSprite)&&this.tint(d.shape,d.image,!1)):b.draw(this._tempGraphics);this._tempGraphics.restore();this._tempGraphics.save();this._tempGraphics.setGlobalComposite("destination-in");d=a.getLocalMatrix();this._tempGraphics.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12);this._tempGraphics.setAlpha(a.alpha._value);a.draw(this._tempGraphics);this._tempGraphics.setGlobalComposite("source-over");this.setGlobalComposite("source-over");this._canvasCtx.drawImage(this._tempCanvas,0,0);this._tempGraphics.restore()},clip:function(a,b){this.save();var d=a.getLocalMatrix();this.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12);a.draw(this);this.restore();this.save();this._canvasCtx.clip();d=b.getLocalMatrix();this.transform(d.m00,d.m10,d.m01,d.m11,d.m02,d.m12);b.draw(this);this.restore()},tint:function(a,b,d){null==d&&(d=!0);d&&this._tempGraphics.erase();this._tempGraphics.setAlpha(a.alpha._value);a.draw(this._tempGraphics);this._tempGraphics.setGlobalComposite("destination-atop");this._tempGraphics.setAlpha(b.alpha._value);b.draw(this._tempGraphics);this._tempGraphics.setGlobalComposite("source-over");this.setGlobalComposite("source-over");d&&this._canvasCtx.drawImage(this._tempCanvas,0,0)},mask:function(a,b){G.__instanceof(a,j.FillSprite)?this.tint(a,b):G.__instanceof(a,j.ShapeSprite)?this.clip(a,b):this.clip2(a,b)},arc:function(a,b,d,c,e){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).arc(a,b,d,c,e)},isPointInPath:function(a,b){return this._canvasCtx.isPointInPath(a,b)},bezierCurveTo:function(a,b,d,c,e,f){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).bezierCurveTo(a,b,d,c,e,f)},quadraticCurveTo:function(a,b,d,c){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).quadraticCurveTo(a,b,d,c)},drawShapeSprite:function(){this._canvasCtx.drawImage(this._tempCanvas,0,0);this._tempGraphics.erase()},endFill:function(){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).fill();this._drawToTemp=!1},beginFill:function(a){this._drawToTemp=!0;(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).fillStyle="#"+("00000"+a.toString(16)).slice(-6)},endStroke:function(){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).stroke();this._drawToTemp=!1},beginStroke:function(a,b){this._drawToTemp=!0;(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).strokeStyle="#"+("00000"+a.toString(16)).slice(-6);(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).lineWidth=b},closePath:function(){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).closePath()},beginPath:function(){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).beginPath()},lineTo:function(a,b){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).lineTo(a,b)},moveTo:function(a,b){(this._drawToTemp?this._tempGraphics._canvasCtx:this._canvasCtx).moveTo(a,b)},willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,d,c){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,d|0,c|0);this._canvasCtx.clip()},setGlobalComposite:function(a){this._canvasCtx.globalCompositeOperation=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="source-over"}
this._canvasCtx.globalCompositeOperation=b},setAlpha:function(a){this._canvasCtx.globalAlpha=a},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,d,c,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,d,c,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,d|0,c|0,e|0))},drawPattern:function(a,b,d,c,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,d,c,e),this._canvasCtx.globalCompositeOperation="source-over"):(null==a.pattern&&(a.pattern=this._canvasCtx.createPattern(a.image,"repeat")),this._canvasCtx.fillStyle=a.pattern,this._canvasCtx.fillRect(b|0,d|0,c|0,e|0))},drawSubImage:function(a,b,d,c,e,f,g){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,d,c,e,f,g),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,c|0,e|0,f|0,g|0,b|0,d|0,f|0,g|0)},drawImage:function(a,b,d){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,d),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,d|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,d,c,e,f){this._canvasCtx.transform(a,b,d,c,e|0,f|0)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},scale:function(a,b){this._canvasCtx.scale(a,b)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},clear:function(){this._canvasCtx.fillStyle="#000000";this._canvasCtx.fillRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height)},getTemp:function(){this._tempCanvas=e.html.HtmlPlatform.instance.getTempCanvas();this._tempGraphics=e.html.HtmlPlatform.instance.getTempGraphics()},__class__:e.html.CanvasGraphics};e.html.CanvasRenderer=function(a){this._drawCtx=new e.html.CanvasGraphics(a);this._drawCtx.clear();this._drawCtx.getTemp()};i["flambe.platform.html.CanvasRenderer"]=e.html.CanvasRenderer;e.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];e.html.CanvasRenderer.__interfaces__=[e.Renderer];e.html.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._drawCtx.willRender();return this._drawCtx},createEmptyTexture:function(a,b){var d=u.document.createElement("canvas");d.width=a;d.height=b;return new e.html.CanvasTexture(d)},createTexture:function(a){return new e.html.CanvasTexture(e.html.CanvasRenderer.CANVAS_TEXTURES?e.html.HtmlUtil.createCanvas(a):a)},__class__:e.html.CanvasRenderer};e.html.CanvasTexture=function(a){this._graphics=null;this.image=a};i["flambe.platform.html.CanvasTexture"]=e.html.CanvasTexture;e.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];e.html.CanvasTexture.__interfaces__=[j.Texture];e.html.CanvasTexture.prototype={getContext2d:function(){G.__instanceof(this.image,HTMLCanvasElement)||(this.image=e.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new e.html._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},writePixels:function(a,b,d,c,e){var f=this.getContext2d(),g=f.createImageData(c,e),h=g.data;if(null!=h.set)h.set(a.b);else{c=4*c*e;for(e=0;e<c;){var i=e++;h[i]=a.b[i]}}
f.putImageData(g,b,d);this.pattern=null},readPixels:function(a,b,d,c){return T.Bytes.ofData(this.getContext2d().getImageData(a,b,d,c).data)},__class__:e.html.CanvasTexture};e.html._CanvasTexture={};e.html._CanvasTexture.InternalGraphics=function(a){e.html.CanvasGraphics.call(this,a.image);this._renderTarget=a};i["flambe.platform.html._CanvasTexture.InternalGraphics"]=e.html._CanvasTexture.InternalGraphics;e.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];e.html._CanvasTexture.InternalGraphics.__super__=e.html.CanvasGraphics;e.html._CanvasTexture.InternalGraphics.prototype=t(e.html.CanvasGraphics.prototype,{fillRect:function(a,b,d,c,f){e.html.CanvasGraphics.prototype.fillRect.call(this,a,b,d,c,f);this._renderTarget.pattern=null},drawPattern:function(a,b,d,c,f){e.html.CanvasGraphics.prototype.drawPattern.call(this,a,b,d,c,f);this._renderTarget.pattern=null},drawSubImage:function(a,b,d,c,f,g,h){e.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,d,c,f,g,h);this._renderTarget.pattern=null},drawImage:function(a,b,d){e.html.CanvasGraphics.prototype.drawImage.call(this,a,b,d);this._renderTarget.pattern=null},__class__:e.html._CanvasTexture.InternalGraphics});e.html.HtmlAssetPackLoader=function(a,b){e.BasicAssetPackLoader.call(this,a,b)};i["flambe.platform.html.HtmlAssetPackLoader"]=e.html.HtmlAssetPackLoader;e.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];e.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=u.document.createElement("audio");if(null==a||null==a.canPlayType)return[];var b=new V("\\b(iPhone|iPod|iPad|Android)\\b","");if(!e.html.WebAudioSound.get_supported()&&b.match(u.window.navigator.userAgent))return[];for(var b=[{extension:"m4a",type:"audio/mp4; codecs=mp4a"},{extension:"mp3",type:"audio/mpeg"},{extension:"ogg",type:"audio/ogg; codecs=vorbis"},{extension:"wav",type:"audio/wav"}],d=[],c=0;c<b.length;){var f=b[c];++c;var g="";try{g=a.canPlayType(f.type)}catch(h){}
""!=g&&d.push(f.extension)}
return d};e.html.HtmlAssetPackLoader.supportsBlob=function(){if(e.html.HtmlAssetPackLoader._detectBlobSupport){e.html.HtmlAssetPackLoader._detectBlobSupport=!1;try{(new XMLHttpRequest).responseType="blob"}catch(a){return!1}
e.html.HtmlAssetPackLoader._URL=e.html.HtmlUtil.loadExtension("URL").value}
return null!=e.html.HtmlAssetPackLoader._URL&&null!=e.html.HtmlAssetPackLoader._URL.createObjectURL};e.html.HtmlAssetPackLoader.__super__=e.BasicAssetPackLoader;e.html.HtmlAssetPackLoader.prototype=t(e.BasicAssetPackLoader.prototype,{handleLoad:function(a,b){this.handleProgress(a,a.bytes);e.BasicAssetPackLoader.prototype.handleLoad.call(this,a,b)},sendRequest:function(a,b,d,c){var e=this,f=new XMLHttpRequest,g=0,h=function(){g=Date.now();f.open("GET",a,!0);f.responseType=d;""==f.responseType&&(f.responseType="arraybuffer");f.send()},i=0;if("undefined"!=typeof f.onprogress){var j=4;f.onprogress=function(a){g=Date.now();e.handleProgress(b,a.loaded)};i=u.window.setInterval(function(){1<=f.readyState&&5E3<Date.now()-g&&(f.abort(),--j,0<j?h():(u.window.clearInterval(i),e.handleError(b,"Failed to load asset: timeout")))},1E3)}
f.onload=function(){u.window.clearInterval(i);var a=f.response;null==a?a=f.responseText:"blob"==d&&"arraybuffer"==f.responseType&&(a=new Blob([f.response]));c(a)};f.onerror=function(){u.window.clearInterval(i);e.handleError(b,"Failed to load asset: error #"+n.string(f.status))};h();return f},getAudioFormats:function(){null==e.html.HtmlAssetPackLoader._audioFormats&&(e.html.HtmlAssetPackLoader._audioFormats=e.html.HtmlAssetPackLoader.detectAudioFormats());return e.html.HtmlAssetPackLoader._audioFormats},loadEntry:function(a,b){var d=this;switch(b.type[1]){case 0:var c=new Image,f=new e.EventGroup;f.addDisposingListener(c,"load",function(){e.html.HtmlAssetPackLoader.supportsBlob()&&e.html.HtmlAssetPackLoader._URL.revokeObjectURL(c.src);var a=d._platform.getRenderer().createTexture(c);null!=a?d.handleLoad(b,a):d.handleTextureError(b)});f.addDisposingListener(c,"error",function(){d.handleError(b,"Failed to load image")});e.html.HtmlAssetPackLoader.supportsBlob()?this.sendRequest(a,b,"blob",function(a){c.src=e.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):c.src=a;break;case 1:if(e.html.WebAudioSound.get_supported())this.sendRequest(a,b,"arraybuffer",function(a){e.html.WebAudioSound.ctx.decodeAudioData(a,function(a){d.handleLoad(b,new e.html.WebAudioSound(a))},function(){d.handleLoad(b,e.DummySound.getInstance())})});else{var g=u.document.createElement("audio");g.preload="auto";var h=++e.html.HtmlAssetPackLoader._mediaRefCount;null==e.html.HtmlAssetPackLoader._mediaElements&&(e.html.HtmlAssetPackLoader._mediaElements=new U);e.html.HtmlAssetPackLoader._mediaElements.set(h,g);f=new e.EventGroup;f.addDisposingListener(g,"canplaythrough",function(){e.html.HtmlAssetPackLoader._mediaElements.remove(h);d.handleLoad(b,new e.html.HtmlSound(g))});f.addDisposingListener(g,"error",function(){e.html.HtmlAssetPackLoader._mediaElements.remove(h);var a=g.error.code;3==a||4==a?d.handleLoad(b,e.DummySound.getInstance()):d.handleError(b,"Failed to load audio: "+n.string(g.error.code))});f.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=g.buffered.end(0)/g.duration;d.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}
break;case 2:this.sendRequest(a,b,"text",function(a){d.handleLoad(b,a)})}},__class__:e.html.HtmlAssetPackLoader});e.html.HtmlExternal=function(){};i["flambe.platform.html.HtmlExternal"]=e.html.HtmlExternal;e.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];e.html.HtmlExternal.__interfaces__=[w.External];e.html.HtmlExternal.prototype={bind:function(a,b){u.window[a]=b},call:function(a,b){null==b&&(b=[]);return N.field(u.window,a).apply(null,b)},get_supported:function(){return!0},__class__:e.html.HtmlExternal};e.html.HtmlMouse=function(a,b){e.BasicMouse.call(this,a);this._canvas=b};i["flambe.platform.html.HtmlMouse"]=e.html.HtmlMouse;e.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];e.html.HtmlMouse.__super__=e.BasicMouse;e.html.HtmlMouse.prototype=t(e.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}
this._canvas.style.cursor=b;return e.BasicMouse.prototype.set_cursor.call(this,a)},__class__:e.html.HtmlMouse});e.html.HtmlSound=function(a){this.audioElement=a};i["flambe.platform.html.HtmlSound"]=e.html.HtmlSound;e.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];e.html.HtmlSound.__interfaces__=[D.Sound];e.html.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration},loop:function(a){null==a&&(a=1);return new e.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:e.html.HtmlSound};e.html._HtmlSound={};e.html._HtmlSound.HtmlPlayback=function(a,b,d){var c=this;this._sound=a;this._tickableAdded=!1;this.volume=new C.AnimatedFloat(b,function(a){c._clonedElement.volume=a});this._clonedElement=u.document.createElement("audio");this._clonedElement.volume=b;this._clonedElement.loop=d;this._clonedElement.src=a.audioElement.src;this.playAudio()};i["flambe.platform.html._HtmlSound.HtmlPlayback"]=e.html._HtmlSound.HtmlPlayback;e.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];e.html._HtmlSound.HtmlPlayback.__interfaces__=[e.Tickable,D.Playback];e.html._HtmlSound.HtmlPlayback.prototype={playAudio:function(){this._clonedElement.play();this._tickableAdded||(e.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0)},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,!0):!1},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_paused:function(){return this._clonedElement.paused},get_sound:function(){return this._sound},__class__:e.html._HtmlSound.HtmlPlayback};e.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new l.Signal0;this.scaleFactor=e.html.HtmlStage.computeScaleFactor(a);1!=this.scaleFactor&&(e.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),e.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){e.html.HtmlUtil.callLater(z(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",z(this,this.onWindowResize),!1);this.onWindowResize();this.orientation=new l.Value(null);null!=window.orientation&&(window.addEventListener("orientationchange",z(this,this.onOrientationChange),!1),this.onOrientationChange());this.fullscreen=new l.Value(!1);e.html.HtmlUtil.addVendorListener(u.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};i["flambe.platform.html.HtmlStage"]=e.html.HtmlStage;e.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];e.html.HtmlStage.__interfaces__=[j.Stage];e.html.HtmlStage.computeScaleFactor=function(){return 1};e.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==e.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],u.document).value)},onOrientationChange:function(){this.orientation.set__(e.html.HtmlUtil.orientation(window.orientation))},hideMobileBrowser:function(){var a=this,b=u.document.documentElement.style;b.height=u.window.innerHeight+100+"px";b.width=u.window.innerWidth+"px";b.overflow="visible";e.html.HtmlUtil.callLater(function(){e.html.HtmlUtil.hideMobileBrowser();e.html.HtmlUtil.callLater(function(){b.height=u.window.innerHeight+
"px";a.onWindowResize()},100)})},resizeCanvas:function(a,b){var d=this.scaleFactor*a,c=this.scaleFactor*b;if(this._canvas.width==d&&this._canvas.height==c)return!1;this._canvas.width=d;this._canvas.height=c;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentNode.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=u.document.documentElement,b=e.html.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=e.html.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],u.document).value,null!=a&&a.apply(u.document,[])},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var d=this._canvas.parentNode;d.style.width=a+"px";d.style.height=b+"px"}},unlockOrientation:function(){},lockOrientation:function(){},get_fullscreenSupported:function(){return!0==e.html.HtmlUtil.loadFirstExtension(["fullscreenEnabled","fullScreenEnabled"],u.document).value},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:e.html.HtmlStage};e.html.HtmlStorage=function(a){this._storage=a};i["flambe.platform.html.HtmlStorage"]=e.html.HtmlStorage;e.html.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];e.html.HtmlStorage.__interfaces__=[Z.Storage];e.html.HtmlStorage.prototype={clear:function(){try{this._storage.clear()}catch(a){null}},remove:function(a){try{this._storage.removeItem("flambe:"+a)}catch(b){null}},get:function(a,b){var d=null;try{d=this._storage.getItem("flambe:"+
a)}catch(c){null}
if(null!=d)try{return K.run(d)}catch(e){null}
return b},set:function(a,b){var d;try{var c=new R;c.useCache=!0;c.useEnumIndex=!1;c.serialize(b);d=c.toString()}catch(e){return!1}
try{this._storage.setItem("flambe:"+a,d)}catch(f){return!1}
return!0},get_supported:function(){return!0},__class__:e.html.HtmlStorage};e.html.HtmlUtil=function(){};i["flambe.platform.html.HtmlUtil"]=e.html.HtmlUtil;e.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];e.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);u.window.setTimeout(a,b)};e.html.HtmlUtil.hideMobileBrowser=function(){u.window.scrollTo(1,0)};e.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=u.window);var d=N.field(b,a);if(null!=d)return{prefix:null,field:a,value:d};for(var d=a.charAt(0).toUpperCase()+x.substr(a,1,null),c=0,f=e.html.HtmlUtil.VENDOR_PREFIXES;c<f.length;){var g=f[c];++c;var h=g+d,i=N.field(b,h);if(null!=i)return{prefix:g,field:h,value:i}}
return{prefix:null,field:null,value:null}};e.html.HtmlUtil.loadFirstExtension=function(a,b){for(var d=0;d<a.length;){var c=a[d];++d;c=e.html.HtmlUtil.loadExtension(c,b);if(null!=c.field)return c}
return{prefix:null,field:null,value:null}};e.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=u.window);var d=e.html.HtmlUtil.loadExtension(a,b).value;if(null==d)return!1;b[a]=d;return!0};e.html.HtmlUtil.setVendorStyle=function(a,b,d){for(var a=a.style,c=0,f=e.html.HtmlUtil.VENDOR_PREFIXES;c<f.length;){var g=f[c];++c;a.setProperty("-"+g+"-"+b,d)}
a.setProperty(b,d)};e.html.HtmlUtil.addVendorListener=function(a,b,d,c){for(var f=0,g=e.html.HtmlUtil.VENDOR_PREFIXES;f<g.length;){var h=g[f];++f;a.addEventListener(h+b,d,c)}
a.addEventListener(b,d,c)};e.html.HtmlUtil.orientation=function(a){switch(a){case-90:case 90:return j.Orientation.Landscape;default:return j.Orientation.Portrait}};e.html.HtmlUtil.createCanvas=function(a){var b=u.document.createElement("canvas");b.width=a.width;b.height=a.height;var d=b.getContext("2d");d.save();d.globalCompositeOperation="copy";d.drawImage(a,0,0);d.restore();return b};w={Web:function(){}};i["flambe.web.Web"]=w.Web;w.Web.__name__=["flambe","web","Web"];w.Web.prototype={__class__:w.Web};e.html.HtmlWeb=function(a){this._container=a};i["flambe.platform.html.HtmlWeb"]=e.html.HtmlWeb;e.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];e.html.HtmlWeb.__interfaces__=[w.Web];e.html.HtmlWeb.prototype={openBrowser:function(a){u.window.open(a,"_blank")},createView:function(a,b,d,c){var f=u.document.createElement("iframe");f.style.position="absolute";f.style.border="0";f.scrolling="no";this._container.appendChild(f);a=new e.html.HtmlWebView(f,a,b,d,c);e.html.HtmlPlatform.instance.mainLoop.addTickable(a);return a},get_supported:function(){return!0},__class__:e.html.HtmlWeb};w.WebView=function(){};i["flambe.web.WebView"]=w.WebView;w.WebView.__name__=["flambe","web","WebView"];w.WebView.__interfaces__=[l.Disposable];w.WebView.prototype={__class__:w.WebView};e.html.HtmlWebView=function(a,b,d,c,e){var f=this;this.iframe=a;a=function(){f.updateBounds()};this.x=new C.AnimatedFloat(b,a);this.y=new C.AnimatedFloat(d,a);this.width=new C.AnimatedFloat(c,a);this.height=new C.AnimatedFloat(e,a);this.updateBounds();this.url=new l.Value(null,function(a){f.loadUrl(a)});this.error=new l.Signal1};i["flambe.platform.html.HtmlWebView"]=e.html.HtmlWebView;e.html.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];e.html.HtmlWebView.__interfaces__=[e.Tickable,w.WebView];e.html.HtmlWebView.prototype={loadUrl:function(a){null!=this.iframe&&(this.iframe.src=a)},updateBounds:function(){null!=this.iframe&&(this.iframe.style.left=this.x._value+"px",this.iframe.style.top=this.y._value+"px",this.iframe.width=this.width._value,this.iframe.height=this.height._value)},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);return null==this.iframe},dispose:function(){null!=this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},__class__:e.html.HtmlWebView};e.html.WebAudioSound=function(a){this.buffer=a};i["flambe.platform.html.WebAudioSound"]=e.html.WebAudioSound;e.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];e.html.WebAudioSound.__interfaces__=[D.Sound];e.html.WebAudioSound.get_supported=function(){if(e.html.WebAudioSound._detectSupport){e.html.WebAudioSound._detectSupport=!1;var a=e.html.HtmlUtil.loadExtension("AudioContext").value;e.html.WebAudioSound.ctx=null!=a?new a:null}
return null!=e.html.WebAudioSound.ctx};e.html.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new e.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new e.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:e.html.WebAudioSound};e.html._WebAudioSound={};e.html._WebAudioSound.WebAudioPlayback=function(a,b,d){var c=this;this._sound=a;this._head=e.html.WebAudioSound.ctx.destination;this._sourceNode=e.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=d;(this._sourceNode.start)?this._sourceNode.start(0):this._sourceNode.noteOn(0);this.playAudio();this.volume=new C.AnimatedFloat(b,function(a){c.setVolume(a)});1!=b&&this.setVolume(b)};i["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=e.html._WebAudioSound.WebAudioPlayback;e.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];e.html._WebAudioSound.WebAudioPlayback.__interfaces__=[e.Tickable,D.Playback];e.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){this._sourceNode.connect(this._head);this._startedAt=e.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(this._tickableAdded=!0,e.html.HtmlPlatform.instance.mainLoop.addTickable(this))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=(e.html.WebAudioSound.ctx.createGain)?e.html.WebAudioSound.ctx.createGain():e.html.WebAudioSound.ctx.createGainNode(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,!0):!1},get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(e.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return 3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_paused:function(){return 0<=this._pausedAt},get_sound:function(){return this._sound},__class__:e.html._WebAudioSound.WebAudioPlayback};w={Director:function(){this._width=this._height=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new M}};i["flambe.scene.Director"]=w.Director;w.Director.__name__=["flambe","scene","Director"];w.Director.__super__=I;w.Director.prototype=t(I.prototype,{get_height:function(){return 0>this._height?A._platform.getStage().get_height():this._height},get_width:function(){return 0>this._width?A._platform.getStage().get_width():this._width},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_4;if(null==b||b.opaque)break}
this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_4;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var d=b[a];++a;d.dispose()}
this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return "Director_0"},__class__:w.Director});w._Director={};w._Director.Transitor=function(){};i["flambe.scene._Director.Transitor"]=w._Director.Transitor;w._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];w._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},__class__:w._Director.Transitor};w.Scene=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new l.Signal0;this.hidden=new l.Signal0};i["flambe.scene.Scene"]=w.Scene;w.Scene.__name__=["flambe","scene","Scene"];w.Scene.__super__=I;w.Scene.prototype=t(I.prototype,{get_name:function(){return "Scene_4"},__class__:w.Scene});w.Transition=function(){};i["flambe.scene.Transition"]=w.Transition;w.Transition.__name__=["flambe","scene","Transition"];w.Transition.prototype={complete:function(){},update:function(){return!0},__class__:w.Transition};D._Mixer={};D._Mixer.MixerSound=function(a,b){this._source=a;this._channels=b;this._playbacks=[]};i["flambe.sound._Mixer.MixerSound"]=D._Mixer.MixerSound;D._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];D._Mixer.MixerSound.__interfaces__=[l.Disposable,D.Sound];D._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var d=b[a];++a;d.dispose()}
this._playbacks=[]},get_duration:function(){return this._source.get_duration()},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var d=a++,c=this._playbacks[d];if(null==c||c.get_ended())return d}
return-1},playOrLoop:function(a,b){var d=this.findOpenChannel();if(0>d)return new e.DummyPlayback(this);var c=b?this._source.loop(a):this._source.play(a);return this._playbacks[d]=c},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,!1)},__class__:D._Mixer.MixerSound};s={BitmapSprite:function(a){j.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};i["flambe.swf.BitmapSprite"]=s.BitmapSprite;s.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];s.BitmapSprite.__super__=j.Sprite;s.BitmapSprite.prototype=t(j.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:s.BitmapSprite});s.Symbol=function(){};i["flambe.swf.Symbol"]=s.Symbol;s.Symbol.__name__=["flambe","swf","Symbol"];s.Symbol.prototype={__class__:s.Symbol};s.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var d=a.rect;this.x=d[0];this.y=d[1];this.width=d[2];this.height=d[3];d=a.origin;null!=d?(this.anchorX=d[0],this.anchorY=d[1]):(d=a.offset,null!=d?(this.anchorX=-d[0],this.anchorY=-d[1]):this.anchorY=this.anchorX=0)};i["flambe.swf.BitmapSymbol"]=s.BitmapSymbol;s.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];s.BitmapSymbol.__interfaces__=[s.Symbol];s.BitmapSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new s.BitmapSprite(this)},__class__:s.BitmapSymbol};s.Library=function(a,b){this._symbols=new E;var d=W.parse(a.getFile(b+"/library.json"));this.frameRate=d.frameRate;for(var c=[],e=0,f=d.movies;e<f.length;){var g=f[e];++e;g=new s.MovieSymbol(this,g);c.push(g);this._symbols.set(g.get_name(),g)}
null!=d.textureGroups?(e=d.textureGroups,(1!=e[0].scaleFactor||1<e.length)&&null,g=e[0].atlases):g=d.atlases;for(e=0;e<g.length;){d=g[e];++e;for(var h=a.getTexture(b+"/"+l.Strings.removeFileExtension(d.file)),f=0,d=d.textures;f<d.length;){var i=d[f];++f;i=new s.BitmapSymbol(i,h);this._symbols.set(i.get_name(),i)}}
for(e=0;e<c.length;){g=c[e];++e;f=0;for(d=g.layers;f<d.length;){g=d[f];++f;h=0;for(i=g.keyframes;h<i.length;){var j=i[h];++h;var k=this._symbols.get(j.symbolName);null!=k&&(null==g.lastSymbol?g.lastSymbol=k:g.lastSymbol!=k&&(g.multipleSymbols=!0),j.symbol=k)}}}};i["flambe.swf.Library"]=s.Library;s.Library.__name__=["flambe","swf","Library"];s.Library.prototype={__class__:s.Library};s.MovieSprite=function(a){this._looped=null;j.Sprite.call(this);this.symbol=a;this.animFinishedPlaying=new l.Signal1;this.speed=new C.AnimatedFloat(1);this.isPlaying=!0;this._animators=[];for(var b=0,a=a.layers;b<a.length;){var d=a[b];++b;this._animators.push(new s._MovieSprite.LayerAnimator(d))}
this._position=this._frame=0;this["goto"](1)};i["flambe.swf.MovieSprite"]=s.MovieSprite;s.MovieSprite.__name__=["flambe","swf","MovieSprite"];s.MovieSprite.__super__=j.Sprite;s.MovieSprite.prototype=t(j.Sprite.prototype,{get_looped:function(){null==this._looped&&(this._looped=new l.Signal0);return this._looped},set_paused:function(a){this._flags=l.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=F.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)
for(var b=0,d=this._animators;b<d.length;){var c=d[b];++b;c.changedKeyframe=!0;c.keyframeIdx=0}
b=0;for(d=this._animators;b<d.length;)c=d[b],++b,c.composeFrame(a);this._frame=a}},onUpdate:function(a){j.Sprite.prototype.onUpdate.call(this,a);if(this.isPlaying){this.speed.update(a);var b=!1;0==(this._flags&16)&&(this._position+=this.speed._value*a,this._position>this.symbol.duration&&(this._position%=this.symbol.duration,this.animFinishedPlaying.emit1(this),b=!0));this.isPlaying&&(this["goto"](this._position*this.symbol.frameRate),b&&null!=this._looped&&this._looped.emit0())}},onRemoved:function(){j.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];++a;this.owner.removeChild(d.content)}},onAdded:function(){j.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var d=b[a];++a;this.owner.addChild(d.content)}},__class__:s.MovieSprite});s._MovieSprite={};s._MovieSprite.LayerAnimator=function(a){this._sprites=null;this.changedKeyframe=!1;this.keyframeIdx=0;this.layer=a;this.content=new M;var b;if(a.multipleSymbols){this._sprites=[];b=0;for(a=a.keyframes;b<a.length;){var d=a[b];++b;this._sprites.push(d.symbol.createSprite())}
b=this._sprites[0]}else b=null!=a.lastSymbol?a.lastSymbol.createSprite():new j.Sprite;this.content.add(b)};i["flambe.swf._MovieSprite.LayerAnimator"]=s._MovieSprite.LayerAnimator;s._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];s._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){for(var b=this.layer.keyframes,d=b.length-1;this.keyframeIdx<d&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.changedKeyframe=!0;var c;this.changedKeyframe&&null!=this._sprites?(this.changedKeyframe=!1,c=this._sprites[this.keyframeIdx],this.content.add(c)):c=this.content._compMap.Sprite_1;var e=b[this.keyframeIdx],f=e.visible;c.set_visible(f);if(f){var f=e.x,g=e.y,h=e.scaleX,i=e.scaleY,j=e.skewX,k=e.skewY,l=e.alpha;if(this.keyframeIdx<d){a=(a-e.index)/e.duration;d=e.ease;if(0!=d){var m;0>d?(m=1-a,m=1-m*m,d=-d):m=a*a;a=d*m+(1-d)*a}
b=b[this.keyframeIdx+1];f+=(b.x-f)*a;g+=(b.y-g)*a;h+=(b.scaleX-h)*a;i+=(b.scaleY-i)*a;j+=(b.skewX-j)*a;k+=(b.skewY-k)*a;l+=(b.alpha-l)*a}
b=c.getLocalMatrix();a=Math.sin(j);j=Math.cos(j);d=Math.sin(k);k=Math.cos(k);b.set(k*h,d*h,-a*i,j*i,f,g);b.translate(-(e.pivotX+
c.anchorX._value),-(e.pivotY+c.anchorY._value));c.alpha.set__(l)}},__class__:s._MovieSprite.LayerAnimator};s.MovieSymbol=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=[];for(var d=0,c=b.layers;d<c.length;){var e=c[d];++d;e=new s.MovieLayer(e);this.frames=Math.max(e.get_frames(),this.frames);this.layers.push(e)}
this.duration=this.frames/this.frameRate};i["flambe.swf.MovieSymbol"]=s.MovieSymbol;s.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];s.MovieSymbol.__interfaces__=[s.Symbol];s.MovieSymbol.prototype={createSprite:function(){return new s.MovieSprite(this)},get_name:function(){return this._name},__class__:s.MovieSymbol};s.MovieLayer=function(a){this.name=a.name;this.multipleSymbols=!1;this.keyframes=[];for(var b=null,d=0,a=a.keyframes;d<a.length;){var c=a[d];++d;b=new s.MovieKeyframe(c,b);this.keyframes.push(b)}};i["flambe.swf.MovieLayer"]=s.MovieLayer;s.MovieLayer.__name__=["flambe","swf","MovieLayer"];s.MovieLayer.prototype={get_frames:function(){var a=this.keyframes[this.keyframes.length-
1];return a.index+(a.duration|0)},__class__:s.MovieLayer};s.MovieKeyframe=function(a,b){this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;this.y=this.x=0;this.scaleY=this.scaleX=1;this.pivotY=this.pivotX=this.skewY=this.skewX=0;this.alpha=1;this.visible=!0;this.ease=0;if(null!=this.symbolName){var d=a.loc;null!=d&&(this.x=d[0],this.y=d[1]);d=a.scale;null!=d&&(this.scaleX=d[0],this.scaleY=d[1]);d=a.skew;null!=d&&(this.skewX=d[0],this.skewY=d[1]);d=a.pivot;null!=d&&(this.pivotX=d[0],this.pivotY=d[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.ease&&(this.ease=a.ease)}};i["flambe.swf.MovieKeyframe"]=s.MovieKeyframe;s.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];s.MovieKeyframe.prototype={__class__:s.MovieKeyframe};l.Assert=function(){};i["flambe.util.Assert"]=l.Assert;l.Assert.__name__=["flambe","util","Assert"];l.BitSets=function(){};i["flambe.util.BitSets"]=l.BitSets;l.BitSets.__name__=["flambe","util","BitSets"];l.BitSets.set=function(a,b,d){return d?a|b:a&~b};l.LogHandler=function(){};i["flambe.util.LogHandler"]=l.LogHandler;l.LogHandler.__name__=["flambe","util","LogHandler"];l.LogHandler.prototype={__class__:l.LogHandler};l.Promise=function(){this.success=new l.Signal1;this.error=new l.Signal1;this.progressChanged=new l.Signal0;this.hasResult=!1;this._total=this._progress=0};i["flambe.util.Promise"]=l.Promise;l.Promise.__name__=["flambe","util","Promise"];l.Promise.prototype={set_total:function(a){this._total=a;this.progressChanged.emit0();return a},set_progress:function(a){this._progress=a;this.progressChanged.emit0();return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw "Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);return a},get_result:function(){if(!this.hasResult)throw "Promise result not yet available";return this._result},__class__:l.Promise};l.Signal0=function(a){l.SignalBase.call(this,a)};i["flambe.util.Signal0"]=l.Signal0;l.Signal0.__name__=["flambe","util","Signal0"];l.Signal0.__super__=l.SignalBase;l.Signal0.prototype=t(l.SignalBase.prototype,{__class__:l.Signal0});l._SignalBase={};l._SignalBase.Task=function(a){this.next=null;this.fn=a};i["flambe.util._SignalBase.Task"]=l._SignalBase.Task;l._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];l._SignalBase.Task.prototype={__class__:l._SignalBase.Task};y=void 0;S=void 0;K=void 0;R=void 0;T=void 0;W=void 0;W=function(){};i["haxe.Json"]=W;W.__name__=["haxe","Json"];W.parse=function(a){return(new W).doParse(a)};W.prototype={parseString:function(){for(var a=this.pos,b=new X;;){var d=this.str.charCodeAt(this.pos++);if(34==d)break;if(92==d){b.b+=x.substr(this.str,a,this.pos-a-1);d=this.str.charCodeAt(this.pos++);switch(d){case 114:b.b+=String.fromCharCode(13);break;case 110:b.b+=String.fromCharCode(10);break;case 116:b.b+=String.fromCharCode(9);break;case 98:b.b+=String.fromCharCode(8);break;case 102:b.b+=String.fromCharCode(12);break;case 47:case 92:case 34:b.b+=String.fromCharCode(d);break;case 117:a=n.parseInt("0x"+x.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw "Invalid escape sequence \\"+String.fromCharCode(d)+" at position "+(this.pos-1);}
a=this.pos}else if(d!=d)throw "Unclosed string";}
b.b+=x.substr(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;)switch(this.str.charCodeAt(this.pos++)){case 32:case 13:case 10:case 9:break;case 123:for(var a={},b=null,d=null;;){var c=this.str.charCodeAt(this.pos++);switch(c){case 32:case 13:case 10:case 9:break;case 125:return(null!=b||!1==d)&&this.invalidChar(),a;case 58:null==b&&this.invalidChar();a[b]=this.parseRec();b=null;d=!0;break;case 44:d?d=!1:this.invalidChar();break;case 34:d&&this.invalidChar();b=this.parseString();break;default:this.invalidChar()}}
break;case 91:a=[];for(d=null;;)switch(c=this.str.charCodeAt(this.pos++),c){case 32:case 13:case 10:case 9:break;case 93:return!1==d&&this.invalidChar(),a;case 44:d?d=!1:this.invalidChar();break;default:d&&this.invalidChar(),this.pos--,a.push(this.parseRec()),d=!0}
break;case 116:d=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();return!0;case 102:d=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();return!1;case 110:d=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=d,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(x.substr(this.str,this.pos,null)))throw "Invalid float at position "+this.pos;d=this.reg_float.matched(0);this.pos+=d.length;d=n.parseFloat(d);c=d|0;return c==d?c:d;default:this.invalidChar()}},invalidChar:function(){this.pos--;throw "Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.reg_float=new V("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=a;this.pos=0;return this.parseRec()},__class__:W};R=function(){this.buf=new X;this.cache=[];this.useCache=R.USE_CACHE;this.useEnumIndex=R.USE_ENUM_INDEX;this.shash=new E;this.scount=0};i["haxe.Serializer"]=R;R.__name__=["haxe","Serializer"];R.run=function(a){var b=new R;b.serialize(a);return b.toString()};R.prototype={serialize:function(a){var b=H["typeof"](a);switch(b[1]){case 0:this.buf.b+=n.string("n");break;case 1:if(0==a){this.buf.b+=n.string("z");break}
this.buf.b+=n.string("i");this.buf.b+=n.string(a);break;case 2:Math.isNaN(a)?this.buf.b+=n.string("k"):Math.isFinite(a)?(this.buf.b+=n.string("d"),this.buf.b+=n.string(a)):this.buf.b+=n.string(0>a?"m":"p");break;case 3:this.buf.b+=n.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);break}
if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var c=0;this.buf.b+=n.string("a");for(var e=a.length,f=0;f<e;)b=f++,null==a[b]?c++:(0<c&&(1==c?this.buf.b+=n.string("n"):(this.buf.b+=n.string("u"),this.buf.b+=n.string(c)),c=0),this.serialize(a[b]));0<c&&(1==c?this.buf.b+=n.string("n"):(this.buf.b+=n.string("u"),this.buf.b+=n.string(c)));this.buf.b+=n.string("h");break;case ca:this.buf.b+=n.string("l");for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.b+=n.string("h");break;case Date:this.buf.b+=n.string("v");this.buf.b+=n.string(x.dateStr(a));break;case E:this.buf.b+=n.string("b");for(c=a.keys();c.hasNext();)b=c.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+=n.string("h");break;case U:this.buf.b+=n.string("q");for(c=a.keys();c.hasNext();)b=c.next(),this.buf.b+=n.string(":"),this.buf.b+=n.string(b),this.serialize(a.get(b));this.buf.b+=n.string("h");break;case T.Bytes:b=0;c=a.length-2;e=new X;for(f=R.BASE64;b<c;){var g=a.b[b++],h=a.b[b++],i=a.b[b++];e.b+=n.string(f.charAt(g>>2));e.b+=n.string(f.charAt((g<<4|h>>4)&63));e.b+=n.string(f.charAt((h<<2|i>>6)&63));e.b+=n.string(f.charAt(i&63))}
b==c?(g=a.b[b++],h=a.b[b++],e.b+=n.string(f.charAt(g>>2)),e.b+=n.string(f.charAt((g<<4|h>>4)&63)),e.b+=n.string(f.charAt(h<<2&63))):b==c+1&&(g=a.b[b++],e.b+=n.string(f.charAt(g>>2)),e.b+=n.string(f.charAt(g<<4&63)));b=e.b;this.buf.b+=n.string("s");this.buf.b+=n.string(b.length);this.buf.b+=n.string(":");this.buf.b+=n.string(b);break;default:this.cache.pop(),null!=a.hxSerialize?(this.buf.b+=n.string("C"),this.serializeString(H.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+=n.string("g")):(this.buf.b+=n.string("c"),this.serializeString(H.getClassName(b)),this.cache.push(a),this.serializeFields(a))}
break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+=n.string("o");this.serializeFields(a);break;case 7:b=b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=n.string(this.useEnumIndex?"j":"w");this.serializeString(H.getEnumName(b));this.useEnumIndex?(this.buf.b+=n.string(":"),this.buf.b+=n.string(a[1])):this.serializeString(a[0]);this.buf.b+=n.string(":");e=a.length;this.buf.b+=n.string(e-2);for(f=2;f<e;)b=f++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw "Cannot serialize function";default:throw "Cannot serialize "+n.string(a);}},serializeFields:function(a){for(var b=0,c=N.fields(a);b<c.length;){var e=c[b];++b;this.serializeString(e);this.serialize(N.field(a,e))}
this.buf.b+=n.string("g")},serializeRef:function(a){for(var b=typeof a,c=0,e=this.cache.length;c<e;){var f=c++,g=this.cache[f];if(typeof g==b&&g==a)return this.buf.b+=n.string("r"),this.buf.b+=n.string(f),!0}
this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+=n.string("R"),this.buf.b+=n.string(b)):(this.shash.set(a,this.scount++),this.buf.b+=n.string("y"),a=O.urlEncode(a),this.buf.b+=n.string(a.length),this.buf.b+=n.string(":"),this.buf.b+=n.string(a))},toString:function(){return this.buf.b},__class__:R};S=function(a){var b=this;this.id=window.setInterval(function(){b.run()},a)};i["haxe.Timer"]=S;S.__name__=["haxe","Timer"];S.delay=function(a,b){var c=new S(b);c.run=function(){c.stop();a()};return c};S.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:S};K=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=K.DEFAULT_RESOLVER;null==a&&(a=H,K.DEFAULT_RESOLVER=a);this.setResolver(a)};i["haxe.Unserializer"]=K;K.__name__=["haxe","Unserializer"];K.initCodes=function(){for(var a=[],b=0,c=K.BASE64.length;b<c;){var e=b++;a[K.BASE64.charCodeAt(e)]=e}
return a};K.run=function(a){return(new K(a)).unserialize()};K.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}
return n.parseFloat(x.substr(this.buf,a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw "Invalid string length";a=x.substr(this.buf,this.pos,b);this.pos+=b;a=O.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}
117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}
return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw "Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw "Invalid string reference";return this.scache[b];case 120:throw this.unserialize();case 99:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw "Class not found "+b;b=H.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw "Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw "Enum not found "+b;this.pos++;var c=this.readDigits(),e=H.getEnumConstructs(a)[c];if(null==e)throw "Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,e);this.cache.push(b);return b;case 108:b=new ca;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 98:c=new E;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new U;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);if(104!=b)throw "Invalid IntHash format";return c;case 118:return b=x.strDate(x.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw "Invalid bytes length";e=K.CODES;null==e&&(e=K.initCodes(),K.CODES=e);for(var a=this.pos,f=b&3,g=a+(b-f),h=T.Bytes.alloc(3*(b>>2)+(2<=f?f-1:0)),i=0;a<g;){var j=e[c.charCodeAt(a++)],k=e[c.charCodeAt(a++)];h.b[i++]=(j<<2|k>>4)&255;j=e[c.charCodeAt(a++)];h.b[i++]=(k<<4|j>>2)&255;k=e[c.charCodeAt(a++)];h.b[i++]=(j<<6|k)&255}
2<=f&&(j=e[c.charCodeAt(a++)],k=e[c.charCodeAt(a++)],h.b[i++]=(j<<2|k>>4)&255,3==f&&(j=e[c.charCodeAt(a++)],h.b[i++]=(k<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw "Class not found "+b;b=H.createEmptyInstance(a);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw "Invalid custom data";return b}
this.pos--;throw "Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw "Invalid enum format";var c=this.readDigits();if(0==c)return H.createEnum(a,b);for(var e=[];0<c--;)e.push(this.unserialize());return H.createEnum(a,b,e)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw "Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!G.__instanceof(b,String))throw "Invalid object key";var c=this.unserialize();a[b]=c}
this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var e=this.buf.charCodeAt(this.pos);if(e!=e)break;if(45==e){if(this.pos!=c)break;b=!0}else{if(48>e||57<e)break;a=10*a+(e-48)}
this.pos++}
b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:K};T={Bytes:function(a,b){this.length=a;this.b=b}};i["haxe.io.Bytes"]=T.Bytes;T.Bytes.__name__=["haxe","io","Bytes"];T.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new T.Bytes(a,b)};T.Bytes.ofData=function(a){return new T.Bytes(a.length,a)};T.Bytes.prototype={__class__:T.Bytes};y={_Fast:{}};y._Fast.NodeAccess=function(a){this.__x=a};i["haxe.xml._Fast.NodeAccess"]=y._Fast.NodeAccess;y._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];y._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==r.Document?"Document":this.__x.getNodeName())+" is missing element "+a;return new y.Fast(b)},__class__:y._Fast.NodeAccess};y._Fast.AttribAccess=function(a){this.__x=a};i["haxe.xml._Fast.AttribAccess"]=y._Fast.AttribAccess;y._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];y._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==r.Document)throw "Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.getNodeName()+" is missing attribute "+a;return b},__class__:y._Fast.AttribAccess};y._Fast.HasAttribAccess=function(a){this.__x=a};i["haxe.xml._Fast.HasAttribAccess"]=y._Fast.HasAttribAccess;y._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];y._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==r.Document)throw "Cannot access document attribute "+a;return this.__x.exists(a)},__class__:y._Fast.HasAttribAccess};y._Fast.HasNodeAccess=function(a){this.__x=a};i["haxe.xml._Fast.HasNodeAccess"]=y._Fast.HasNodeAccess;y._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];y._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:y._Fast.HasNodeAccess};y._Fast.NodeListAccess=function(a){this.__x=a};i["haxe.xml._Fast.NodeListAccess"]=y._Fast.NodeListAccess;y._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];y._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new ca,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new y.Fast(c))}
return b},__class__:y._Fast.NodeListAccess};y.Fast=function(a){if(a.nodeType!=r.Document&&a.nodeType!=r.Element)throw "Invalid nodeType "+n.string(a.nodeType);this.x=a;this.node=new y._Fast.NodeAccess(a);this.nodes=new y._Fast.NodeListAccess(a);this.att=new y._Fast.AttribAccess(a);this.has=new y._Fast.HasAttribAccess(a);this.hasNode=new y._Fast.HasNodeAccess(a)};i["haxe.xml.Fast"]=y.Fast;y.Fast.__name__=["haxe","xml","Fast"];y.Fast.prototype={getElements:function(){var a=this.x.elements();return{hasNext:z(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new y.Fast(b)}}},getInnerHTML:function(){for(var a=new X,b=this.x.iterator();b.hasNext();){var c=b.next();a.b+=n.string(c.toString())}
return a.b},getInnerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.getName()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==r.PCData&&c.nodeType==r.CData&&""==O.trim(b.getNodeValue())&&(b=a.next(),null==b||b.nodeType==r.PCData&&""==O.trim(b.getNodeValue())&&null==a.next()))return c.getNodeValue();throw this.getName()+" does not only have data";}
if(b.nodeType!=r.PCData&&b.nodeType!=r.CData)throw this.getName()+" does not have data";return b.getNodeValue()},getName:function(){return this.x.nodeType==r.Document?"Document":this.x.getNodeName()},__class__:y.Fast};y.Parser=function(){};i["haxe.xml.Parser"]=y.Parser;y.Parser.__name__=["haxe","xml","Parser"];y.Parser.parse=function(a){var b=r.createDocument();y.Parser.doParse(a,0,b);return b};y.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var e=null,f=1,g=1,h=null,i=0,j=0,k=0,l=a.charCodeAt(b);l==l;){switch(f){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:f=g;continue}
break;case 1:switch(l){case 60:f=0;g=2;break;default:i=b;f=13;continue}
break;case 13:60==l&&(f=r.createPCData(x.substr(a,i,b-i)),c.addChild(f),j++,f=0,g=2);break;case 17:93==l&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=r.createCData(x.substr(a,i,b-i)),c.addChild(f),j++,b+=2,f=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=x.substr(a,b,6).toUpperCase())throw "Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=x.substr(a,b+2,6).toUpperCase())throw "Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw "Expected <\!--";b+=2;f=15}
i=b+1;break;case 63:f=14;i=b;break;case 47:if(null==c)throw "Expected node name";i=b+1;f=0;g=10;break;default:f=3;i=b;continue}
break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(b==i)throw "Expected node name";e=r.createElement(x.substr(a,i,b-i));c.addChild(e);f=0;g=4;continue}
break;case 4:switch(l){case 47:f=11;j++;break;case 62:f=9;j++;break;default:f=5;i=b;continue}
break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw "Expected attribute name";h=x.substr(a,i,b-i);if(e.exists(h))throw "Duplicate attribute";f=0;g=6;continue}
break;case 6:switch(l){case 61:f=0;g=7;break;default:throw "Expected =";}
break;case 7:switch(l){case 34:case 39:f=8;i=b;break;default:throw 'Expected "';}
break;case 8:l==a.charCodeAt(i)&&(g=x.substr(a,i+1,b-i-1),e.set(h,g),f=0,g=4);break;case 9:i=b=y.Parser.doParse(a,b,e);f=1;break;case 11:switch(l){case 62:f=1;break;default:throw "Expected >";}
break;case 12:switch(l){case 62:return 0==j&&c.addChild(r.createPCData("")),b;default:throw "Expected >";}
case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(i==b)throw "Expected node name";if(x.substr(a,i,b-i)!=c.getNodeName())throw "Expected </"+c.getNodeName()+">";f=0;g=12;continue}
break;case 15:45==l&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(r.createComment(x.substr(a,i,b-i))),b+=2,f=1);break;case 16:91==l?k++:93==l?k--:62==l&&0==k&&(c.addChild(r.createDocType(x.substr(a,i,b-i))),f=1);break;case 14:63==l&&62==a.charCodeAt(b+1)&&(b++,f=x.substr(a,i+1,b-i-2),c.addChild(r.createProlog(f)),f=1)}
l=a.charCodeAt(++b)}
1==f&&(i=b,f=13);if(13==f)return(b!=i||0==j)&&c.addChild(r.createPCData(x.substr(a,i,b-i))),b;throw "Unexpected end";};var da;Array.prototype.indexOf?x.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0}:null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;i.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=i.String=String;String.__name__=["String"];Array.prototype.__class__=i.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=i.Date=Date;Date.__name__=["Date"];var ia=i.Int={__name__:["Int"]},ja=i.Dynamic={__name__:["Dynamic"]},ga=i.Float=Number;ga.__name__=["Float"];var ha=i.Bool=Boolean;ha.__ename__=["Bool"];var ka=i.Class={__name__:["Class"]},la={};r.Element="element";r.PCData="pcdata";r.CData="cdata";r.Comment="comment";r.DocType="doctype";r.Prolog="prolog";r.Document="document";"undefined"!=typeof document&&(u.document=document);"undefined"!=typeof window&&(u.window=window,u.window.onerror=function(a,b,c){var e=u.onerror;return null==e?!1:e(a,[b+":"+c])});"undefined"!=typeof JSON&&(W=JSON);g.constants.ConstantsApp.EVENT_PAUSE="eventPause";g.constants.ConstantsApp.EVENT_UNPAUSE="eventUnpause";g.constants.ConstantsApp.EVENT_UPDATE_DISPLAY="eventUpdateDisplay";g.constants.ConstantsApp.EVENT_MUTE_TOGGLE="eventMuteToggle";g.constants.ConstantsApp.EVENT_INPUT="eventKeyboardInput";g.constants.ConstantsApp.BOOL_PAUSED="bool_paused";g.constants.ConstantsApp.BOOL_MUTED="bool_muted";g.constants.ConstantsApp.BOOL_MOUSE_PRESSED="boolMousePressed";g.constants.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";g.constants.ConstantsApp.BOOL_GAME_WIN="bool_game_win";g.constants.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";g.constants.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";g.constants.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";g.constants.ConstantsApp.BOOL_TOUCH_DEVICE="bool_touch_device";g.constants.ConstantsApp.FLOAT_CANVAS_SCALE="canvas_scale";g.constants.ConstantsApp.FLOAT_LEVEL="float_level";g.constants.ConstantsApp.FLOAT_TIMER="float_timer";g.constants.ConstantsApp.FLOAT_SCORE="float_score";g.constants.ConstantsApp.FLOAT_TEXT="float_text";g.constants.ConstantsApp.STRING_CONFIG_PATH="config/config.xml";g.constants.ConstantsApp.CONFIG_XML_PATH="config/config.xml";g.constants.ConstantsApp.TYPE_OBJECT="object";g.constants.ConstantsApp.TYPE_PLAYER="player";g.constants.ConstantsApp.TYPE_BACKGROUND="bg";g.constants.ConstantsApp.STAGE_WIDTH=960;g.constants.ConstantsApp.STAGE_HEIGHT=560;g.constants.ConstantsApp.STAGE_CENTER_X=480;g.constants.ConstantsApp.STAGE_CENTER_Y=280;g.constants.ConstantsApp.FRAMES_PER_SECOND=30;g.constants.ConstantsApp.GROUND_Y_BASE=1E3;g.constants.ConstantsApp.BASE_GROUND=470;g.constants.ConstantsApp.SPONGE_WIDTH=100;g.constants.ConstantsApp.SPONGE_HEIGHT=80;g.constants.ConstantsApp.INPUT_CLICK="input_click";g.constants.ConstantsApp.INPUT_SPACE="input_space";g.constants.ConstantsApp.INPUT_UP="input_up";g.constants.ConstantsApp.INPUT_DOWN="input_down";g.constants.ConstantsApp.INPUT_LEFT="input_left";g.constants.ConstantsApp.INPUT_RIGHT="input_right";g.constants.ConstantsApp.LAYER_BG="bg";g.constants.ConstantsApp.LAYER_MAIN="main";g.constants.ConstantsApp.LAYER_SPONGES="sponges";g.constants.ConstantsApp.LAYER_MAIN_TOP="top";g.constants.ConstantsScreen.SCREEN_LOADING="loadpanel";g.constants.ConstantsScreen.SCREEN_SPLASH="splash";g.constants.ConstantsScreen.SCREEN_HELP="help";g.constants.ConstantsScreen.SCREEN_LOAD_LEVEL="loadlevel";g.constants.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";g.constants.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";g.constants.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";g.constants.ConstantsScreen.SCREEN_END_GAME="endgame";g.constants.ConstantsScreen.TRANSITION_FADE=0;g.constants.ConstantsScreen.TRANSITION_SCROLL=1;g.constants.ConstantsScreen.TRANSITION_STAGED=2;g.constants.ConstantsScreen.TRANSITION_SCREENSHOT=3;g.constants.ConstantsScreen.CHANGE_OPEN_BEGIN=0;g.constants.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;g.constants.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;g.constants.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;g.constants.ConstantsScreen.OUTPUT_OPENED=0;g.constants.ConstantsScreen.OUTPUT_CLOSED=1;g.constants.ConstantsScreen.CONDITION_CLOSED_ALL=0;g.constants.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;g.constants.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;g.constants.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;g.constants.ConstantsScreen.CONDITION_IMMEDIATE=4;g.constants.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";g.constants.ConstantsScreen.FLOW_SPLASH_PRINTABLE="FLOW_SPLASH_PRINTABLE";g.constants.ConstantsScreen.FLOW_HELP_CLOSE="FLOW_HELP_CLOSE";g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";g.constants.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";g.constants.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";g.constants.ConstantsScreen.FLOW_END_LEVEL_NEXT="FLOW_END_LEVEL_NEXT";g.constants.ConstantsScreen.FLOW_END_LEVEL_QUIT="FLOW_END_LEVEL_QUIT";g.constants.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";g.constants.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";g.constants.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";g.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN="FLOW_BRANCH_LEVEL_WIN";g.constants.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";h.buttons.ButtonBase.UP="workinBtnUp";h.buttons.ButtonBase.DOWN="workinBtnDown";h.buttons.ButtonBase.CLICK="workinBtnClick";h.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";h.screens.data.ScreenStateData.ACTION_STOP=0;h.screens.data.ScreenStateData.ACTION_OPENED=1;h.screens.data.ScreenStateData.ACTION_EVENT=2;h.screens.data.ScreenStateData.ACTION_NEW_STATE=3;h.screens.data.ScreenStateData.ACTION_CLOSED=4;h.screens.data.ScreenStateData.ACTION_FLOW=5;k.World._STATE_IDLE=0;k.World._STATE_PLAYING=1;k.elements.SpongeBob.GRAVITY=1E3;P.ConstantsCloud.STRING_REGION_ID="cloudregionid";P.ConstantsCloud.LOCALIZATION_XML_PATH="config/";P.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";p.WMEventFlow.EVENT_FLOW="Nflow";p.WMEventInput.EVENT_INPUT="eventinput";p.WMEventInput.PHASE_DOWN=1;p.WMEventInput.PHASE_UP=0;p.WMEventInput.PHASE_MOVE=2;p.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";p.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";p.WMEventUpdate.EVENT_UPDATE="eventupdate";o.WorkinMotion.EASE_IN_OUT="ease";o.WorkinMotion.EASE_IN="in";o.WorkinMotion.EASE_OUT="out";o.WorkinMotion.EASE_IN_FAST="infast";o.WorkinMotion.EASE_OUT_FAST="outfast";o.WorkinMotion.EASE_LINEAR="linear";o.WorkinMotion.EASE_BOUNCE_IN="bouncein";q.ServiceAnalytics._offlineUserId="";q.ServiceAnalytics._offlineTrackingId="";q.ServiceAnalytics._appId="";q.ServiceAnalytics._sessionId="";q.ServiceAnalytics._flagInitted=!1;q.ServiceAnalytics._flagStarted=!1;q.ServiceAnalytics._flagLoaded=!1;q.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";q.ServiceAnalytics.OPTION_ENABLE_TRACKING=!0;f.WMPointer._DELTA_ALLOWANCE=30;f.WMPointer._DELTA_TIMEOUT=0.2;f.WorkinCloud.instance=new f.WorkinCloud;e.html.HtmlPlatform.instance=new e.html.HtmlPlatform;l.SignalBase.DISPATCHING_SENTINEL=new l.SignalConnection(null,null);A.root=new M;A.uncaughtError=new l.Signal1;A.hidden=new l.Value(!1);A.hasGPU=new l.Value(!1);A._platform=e.html.HtmlPlatform.instance;A._calledInit=!1;Q.logger=new l.Logger(A._platform.createLogHandler("flambe"));v.Manifest._buildManifest=v.Manifest.createBuildManifests();I=v.Manifest;Q=(new V("\\b(Android)\\b","")).match(u.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;I._supportsCrossOrigin=Q;j.Sprite._scratchPoint=new F.Point;e.BasicKeyboard._sharedEvent=new c.KeyboardEvent;e.BasicMouse._sharedEvent=new c.MouseEvent;e.BasicPointer._sharedEvent=new c.PointerEvent;e.html.CanvasRenderer.CANVAS_TEXTURES=(new V("(iPhone|iPod|iPad)","")).match(u.window.navigator.userAgent);e.html.HtmlAssetPackLoader._mediaRefCount=0;e.html.HtmlAssetPackLoader._detectBlobSupport=!0;e.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];e.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=u.window.top==u.window&&(new V("Mobile(/.*)? Safari","")).match(u.window.navigator.userAgent);e.html.WebAudioSound._detectSupport=!0;R.USE_CACHE=!1;R.USE_ENUM_INDEX=!1;R.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";K.DEFAULT_RESOLVER=H;K.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";J.main()})();