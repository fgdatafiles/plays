!function(a){"use strict";function b(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function c(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Q++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var d=function(){};d.__name__=["HxOverrides"],d.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c){if(0!=b)return"";c=a.length+c}return a.substr(b,c)},d.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}},Math.__name__=["Math"];var e=function(){};e.__name__=["Std"],e.string=function(a){return k.__string_rec(a,"")};var f=function(){};f.__name__=["Type"],f.getClassName=function(a){var b=a.__name__;return null==b?null:b.join(".")};var g=function(){};g.__name__=["haxe","IMap"];var h=function(){this.h={__keys__:{}}};h.__name__=["haxe","ds","ObjectMap"],h.__interfaces__=[g],h.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++h.count);this.h[c]=b,this.h.__keys__[c]=a},__class__:h};var i=function(){this.h={}};i.__name__=["haxe","ds","StringMap"],i.__interfaces__=[g],i.prototype={setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){return null!=X[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){return d.iter(this.arrayKeys())},arrayKeys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(var b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},__class__:i};var j=function(){};j.__name__=["haxe","macro","Error"],j.prototype={toString:function(){return this.message},__class__:j};var k=function(){};k.__name__=["js","Boot"],k.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;var c=k.__nativeClassName(a);return null!=c?k.__resolveNativeClass(c):null},k.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"function":return"<function>";case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+k.__string_rec(a[g],b):k.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0,l=h;l>j;){var m=j++;i+=(m>0?",":"")+k.__string_rec(a[m],b)}return i+="]"}var n;try{n=a.toString}catch(o){return"???"}if(null!=n&&n!=Object.toString&&"function"==typeof n){var p=a.toString();if("[object Object]"!=p)return p}var q=null,r="{\n";b+="	";var s=null!=a.hasOwnProperty;for(var q in a)(!s||a.hasOwnProperty(q))&&"prototype"!=q&&"__class__"!=q&&"__super__"!=q&&"__interfaces__"!=q&&"__properties__"!=q&&(2!=r.length&&(r+=", \n"),r+=b+q+" : "+k.__string_rec(a[q],b));return b=b.substring(1),r+="\n"+b+"}";case"string":return a;default:return String(a)}},k.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||k.__interfLoop(g,b))return!0}return k.__interfLoop(a.__super__,b)},k.__instanceof=function(a,b){if(null==b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case U:return"boolean"==typeof a;case S:return!0;case T:return"number"==typeof a;case R:return"number"==typeof a?(0|a)===a:!1;case String:return"string"==typeof a;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(k.__interfLoop(k.getClass(a),b))return!0}else if("object"==typeof b&&k.__isNativeObj(b)&&a instanceof b)return!0;return(b==V?null==a.__name__:1)&&(b==W?null==a.__ename__:1)?a.__enum__==b:!0}},k.__nativeClassName=function(a){var b=k.__toStr.call(a).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b},k.__isNativeObj=function(a){return null!=k.__nativeClassName(a)},k.__resolveNativeClass=function(b){return a[b]};var l=function(){};l.__name__=["pbsdaniel","Constants"];var m=function(){createjs.Container.call(this),this._bg=new createjs.Shape,this._drawBG(o.SpringrollApp.display.width,o.SpringrollApp.display.height),this.addChild(this._bg),this._trolleyContainer=new createjs.Container,this.addChild(this._trolleyContainer),this._trolley=new createjs.Container,this._trolleyContainer.addChild(this._trolley),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()};m.__name__=["pbsdaniel","DTLoadingScreen"],m.__super__=createjs.Container,m.prototype=b(createjs.Container.prototype,{onResize:function(a,b){this._drawBG(a,b),this._trolleyContainer.set({x:a/2,y:b/2})},_drawBG:function(a,b){this._bg.graphics.clear(),this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,a,b),this._bg.graphics.endFill()},start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut),o.SpringrollApp.on("resize",c(this,this.onResize)),this.onResize(o.SpringrollApp.display.width,o.SpringrollApp.display.height)},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley),o.SpringrollApp.off("resize",c(this,this.onResize))},onPackageReady:function(){var a=this._assets.getSpriteFromSheet("loadingTrolley");G.setRegs(a,.5,1.05),this._trolley.addChild(a),this._text=this._assets.getSpriteFromSheet("loadingText"),G.setRegs(this._text,.5,-.05),this._trolleyContainer.addChild(this._text),this.onResize(o.SpringrollApp.display.width,o.SpringrollApp.display.height)},getImageManifest:function(){var a=[];return a.push(K.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),a},getAudioManifest:function(){var a=[];return a},__class__:m});var n=function(a){this._data=a,this._assets=new K(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,c(this,this.onPackageReady)),this._assets.load(),this._noteUp=[],this._noteSpin=[],this.sprites=[]};n.__name__=["pbsdaniel","music","Effects"],n.prototype={onPackageReady:function(){this._ready=!0,this._noteUp.push(this.setupSprite(this._data.note1Up)),this._noteUp.push(this.setupSprite(this._data.note2Up)),this._noteUp.push(this.setupSprite(this._data.note3Up)),this._noteSpin.push(this.setupSprite(this._data.note1Spin)),this._noteSpin.push(this.setupSprite(this._data.note2Spin)),this._noteSpin.push(this.setupSprite(this._data.note3Spin)),this._burst=this.setupSprite(this._data.burst)},setupSprite:function(a){var b=this._assets.getSpriteFromSheet(a.name,a.sheet);return b.x=a.position.x,b.y=a.position.y,b.framerate=this._data.framerate,b},play:function(a,b){if(this._ready){var d;if(d="NOTE_UP"==a?this._noteUp[Math.floor(Math.random()*this._noteUp.length)].clone():"NOTE_SPIN"==a?this._noteSpin[Math.floor(Math.random()*this._noteSpin.length)].clone():this._burst.clone(),null!=d){if(d.x+=b.x,d.y+=b.y,"NOTE_UP"==a||"NOTE_SPIN"==a){d.gotoAndStop(12),d.x+=80,d.y+=240,d.filters=[new createjs.ColorFilter(0,0,0,1,255*Math.random(),255*Math.random(),255*Math.random())],d.cache(0,0,d.getBounds().width,d.getBounds().height),d.regX=.5*d.getBounds().width,d.regY=.5*d.getBounds().height,d.scaleX=d.scaleY=0,d.set({dir:4*Math.random()-2});var e=100*Math.random(),f=createjs.Tween.get(d),g=d.x<832?d.x-.5*e:d.x+.5*e,h=d.y-80*Math.random()-120,i=d.x<832?d.x-e:d.x+e,j=d.y+300;f.to({x:g,y:h,scaleX:1,scaleY:1},300,createjs.Ease.cubicOut).to({x:i,y:j},400,createjs.Ease.cubicIn).call(c(this,this.removeSprite),[d]),this.sprites.push(d)}else d.addEventListener("animationend",c(this,this.animationEnd),null),d.addEventListener("change",c(this,this.animationChange),null),d.gotoAndPlay(d.currentAnimation);b.parent.addChild(d)}}},animationChange:function(a){var b=a.target;b.cache(0,0,b.getBounds().width,b.getBounds().height)},animationEnd:function(a){var b=a.target;b.removeEventListener("animationend",c(this,this.animationEnd),null),b.removeEventListener("change",c(this,this.animationChange),null),this.removeSprite(b)},removeSprite:function(a){var b=this.sprites.indexOf(a);b>-1&&this.sprites.splice(b,1),a.parent.removeChild(a)},update:function(a){for(var b=0,c=this.sprites.length;c>b;){var d=b++,e=this.sprites[d].dir;this.sprites[d].rotation+=.001*a.delta*180*e}},__class__:n};var o=function(a,b){null==b&&(b=!1);var c=this;o.SpringrollApp=a,1==a.options.debug?N.enabled=!0:N.enabled=!1,N.log("New DanielGame!",o),this._stage=a.display.stage,this._stage.enableMouseOver(10),window.SRApp=a,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,a.display.width,a.display.height).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),b&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),a.on("update",function(a,b,d){c.update({delta:a})})};o.__name__=["sg","pbskids","daniel","SpringrollGame"],o.prototype={begin:function(){null!=o.SpringrollApp.scaling&&N.purple(o.SpringrollApp.scaling._items)},update:function(a){this._stage.update(a)},__class__:o};var p=function(a){o.call(this,a),this._loadingScreen=new m,this._loadingScreen.addEventListener("added",(P=this._loadingScreen,c(P,P.start))),this._loadingScreen.addEventListener("removed",(P=this._loadingScreen,c(P,P.freeze))),this._loadLayer.addChild(this._loadingScreen),p.globalAssets=new K(this.getGlobalData(),null,c(this,this.onGlobalAssetsRetrieved)),p.globalAssets.load()};p.__name__=["pbsdaniel","music","FeelTheMusic"],p.__super__=o,p.prototype=b(o.prototype,{begin:function(){o.prototype.begin.call(this)},getGlobalData:function(){window.console.log("global assets REQUESTED");var a=[];return a.push(K.makeManifestItem("charaterData","assets/data/character_data.json","json")),a.push(K.makeManifestItem("titlescreenData","assets/data/titlescreen_data.json","json")),a.push(K.makeManifestItem("happyscreenData","assets/data/happyscreen_data.json","json")),a.push(K.makeManifestItem("angryscreenData","assets/data/angryscreen_data.json","json")),a.push(K.makeManifestItem("sadscreenData","assets/data/sadscreen_data.json","json")),a.push(K.makeManifestItem("effectsData","assets/data/effects_data.json","json")),a},onGlobalAssetsRetrieved:function(){window.console.log("global assets retrieved"),this._gameData=p.globalAssets.getResult("gameData");var a=p.globalAssets.getResult("charaterData");this._charactersData=a.characters[0],this._daniel=new M(this._charactersData,c(this,this.onDanielLoaded)),this._effects=new n(p.globalAssets.getResult("effectsData")),window.console.log("load Effects"),this._screen=new u(p.globalAssets.getResult("titlescreenData"),c(this,this.screenReady)),this._screen.addEventListener("sceneRequest",c(this,this.titleLoadRequest))},onDanielLoaded:function(){this._daniel.x=200,this._daniel.y=500,this._daniel.scaleX=this._daniel.scaleY=1.3,this._daniel.name="daniel",window.console.log("daniel bounds = "+e.string(this._daniel.getBounds())),this._daniel.loopAnimation("idle")},titleLoadRequest:function(a){this._loadStartTime=createjs.Ticker.getTime(!0),this._screen.removeEventListener("sceneRequest",c(this,this.sceneLoadRequest)),this._loadLayer.addChild(this._loadingScreen),this.container.addChild(this._loadLayer),this._gameLayer.removeAllChildren(),this._screen.destroy(),this._screen=null,window.console.log("load 1st scene"),this._screen=new t(p.globalAssets.getResult("happyscreenData"),c(this,this.screenReady),this._effects,this._daniel),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest))},sceneLoadRequest:function(a){this._loadStartTime=createjs.Ticker.getTime(!0),this._screen.removeEventListener("sceneRequest",c(this,this.sceneLoadRequest)),this._loadLayer.addChild(this._loadingScreen),window.console.log("load a new scene: "+a.get_sceneId()),this.container.addChild(this._loadLayer),this._screen.destroy(),this._screen=null,this._gameLayer.removeAllChildren(),L.instance.killAll();var b=a.get_sceneId();switch(b){case"happy":this._screen=new t(p.globalAssets.getResult("happyscreenData"),c(this,this.screenReady),this._effects,this._daniel),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest));break;case"mad":this._screen=new t(p.globalAssets.getResult("angryscreenData"),c(this,this.screenReady),this._effects,this._daniel),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest));break;case"sad":this._screen=new t(p.globalAssets.getResult("sadscreenData"),c(this,this.screenReady),this._effects,this._daniel),this._screen.addEventListener("sceneRequest",c(this,this.sceneLoadRequest))}},screenReady:function(){window.console.log("Screen Ready!"),createjs.Ticker.getTime(!0)-this._loadStartTime>500?this.startScreen():createjs.Tween.get(this).wait(500-(createjs.Ticker.getTime(!0)-this._loadStartTime),!0).call(c(this,this.startScreen))},startScreen:function(){this._gameLayer.addChild(this._screen),this._loadingScreen.parent==this._loadLayer&&this._loadLayer.removeChild(this._loadingScreen),this._screen.start(),window.console.log("Screen Started!")},update:function(a){o.prototype.update.call(this,a),null!=this._screen&&this._screen.update(a),null!=this._effects&&this._effects.update(a),dragonBones.animation.WorldClock.clock.advanceTime(a.delta/1e3)},__class__:p});var q=function(){};q.__name__=["pbsdaniel","music","Main"],q.main=function(){window.SGGameButler=new J("FeelTheMusic",q.start),q._isSpringroll="undefined"!=typeof springroll},q.start=function(a,b){q.SpringrollApp=a,q._bellhop=b,L.init(q.SpringrollApp),window.focus(),q._game=new p(q.SpringrollApp)},q.ga_call=function(a){try{q._bellhop.send("gacall",a)}catch(b){if(!k.__instanceof(b,j))throw b;window.console.warn("Warning: "+e.string(b))}};var r=function(){this.sceneName="unnamed",createjs.Container.call(this)};r.__name__=["sg","cjs","GameScreen"],r.__super__=createjs.Container,r.prototype=b(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){},getImageManifest:function(){var a=[];return a},getAudioManifest:function(){var a=[];return a},__class__:r});var s=function(a,b,c,d){this._isDebug=!1,r.call(this),this._isDebug=o.SpringrollApp.options.debug,this._data=a,this._readyCallback=b,this._audioDictionary=new h,this._effects=c,this._dan=d,this._volume=1,this._playing=0,this.changeDanState()};s.__name__=["pbsdaniel","music","screens","BaseScreen"],s.__super__=r,s.prototype=b(r.prototype,{destroy:function(){createjs.Tween.removeTweens(this),this._bg=null,this._ui=null,null!=this._happyButton&&this._happyButton.removeAllEventListeners(),this._happyButton=null,null!=this._sadButton&&this._sadButton.removeAllEventListeners(),this._sadButton=null,null!=this._angryButton&&this._angryButton.removeAllEventListeners(),this._angryButton=null,L.instance.killAll()},onPackageReady:function(){this.setUpScreen(),this._readyCallback()},setUpScreen:function(){},triggerAdvance:function(a){window.console.log("trigger"),this.removeEventListener("mousedown",c(this,this.triggerAdvance),null),createjs.Tween.removeTweens(this),L.instance.killAll();var b=a.currentTarget.name;switch(b){case"happy":this.dispatchEvent(new C("sceneRequest","happy"));break;case"mad":this.dispatchEvent(new C("sceneRequest","mad"));break;case"sad":this.dispatchEvent(new C("sceneRequest","sad"))}},onInstrumentPrecussionHandler:function(a){this.onInstrumentHandler(a),this._effects.play("BURST",a.target)},onInstrumentStrumHandler:function(a){this.onInstrumentHandler(a),this._effects.play("NOTE_SPIN",a.target)},onInstrumentNoteHandler:function(a){this.onInstrumentHandler(a),this._effects.play("NOTE_UP",a.target)},onInstrumentHandler:function(a){var b=this._audioDictionary.h[a.target.__id__];L.instance.playAudio(b[Math.floor(Math.random()*b.length)],c(this,this.onAudioComplete)),this._playing++,this.changeDanState()},onAudioComplete:function(){this._playing--,this.changeDanState()},makeButton:function(a,b){var c=new v(this._assets.getSpriteFromSheet(a.art.up,a.art.sheet));return c.addOver(this._assets.getSpriteFromSheet(a.art.down,a.art.sheet)),"center"==a.align&&(c.x=a.position.x-.5*c.getBounds().width,c.y=a.position.y-.5*c.getBounds().height),c.turnOn(),c.addEventListener("down",b),c},makeToggleButton:function(a,b,c){null==c&&(c=!1);var d=this._assets.getSpriteFromSheet(a.art.up,a.art.sheet),e=new A(d);return e.addOver(new E(d)),d=this._assets.getSpriteFromSheet(a.art.down,a.art.sheet),e.addToggledOver(new E(d)),e.addDown(d),e.x=a.position.x,e.y=a.position.y,null!=a.position.ox&&(e.x=o.SpringrollApp.display.width*a.position.ox+a.position.x),null!=a.position.oy&&(e.y=o.SpringrollApp.display.height*a.position.oy+a.position.y),G.setRegs(e,.5,1),e.meta=a,e.turnOn(),e.toggle(c),e.addEventListener("down",b),e},strikeInstrument:function(a,b,d){null==d&&(d=!1);var e=this._assets.getSpriteFromSheet(a.art.up,a.art.sheet),f=new x(e),g=this._assets.getSpriteFromSheet(a.art.down,a.art.sheet);return f.addDown(g),f.addOver(new E(e)),f.x=a.position.x,f.y=a.position.y,null!=a.position.ox&&(f.x=o.SpringrollApp.display.width*a.position.ox+a.position.x),null!=a.position.oy&&(f.y=o.SpringrollApp.display.height*a.position.oy+a.position.y),"center"==a.align&&(f.x-=.5*f.getBounds().width,f.y-=.5*f.getBounds().height),f.meta=a,1==this._isDebug&&null!=O.getQueryParam("edit")?(f.mouseChildren=!1,f.addEventListener("pressmove",function(a){var b=a.target.parent.globalToLocal(a.stageX,a.stageY),c=f.getBounds(),d={x:b.x,y:b.y};a.target.set(d),window.console.log(JSON.stringify({x:b.x+.5*c.width,y:b.y+.5*c.height}))})):(f.turnOn(),d?f.addEventListener("down",c(this,this.onInstrumentPrecussionHandler)):f.addEventListener("down",c(this,this.onInstrumentNoteHandler))),this._audioDictionary.set(f,b),f},makeXYDynamicObj:function(a,b){return{x:a,y:b}},strumInstrument:function(a,b,d){var e;return e=a.flash?new z(this._assets.getSpriteFromSheet(a.art.up,a.art.sheet),"off"):new w(this._assets.getSpriteFromSheet(a.art.up,a.art.sheet),"off"),"center"==a.align&&(e.x=a.position.x-.5*e.getBounds().width,e.y=a.position.y-.5*e.getBounds().height),null!=a.scale&&(e.scaleX=a.scale.x,e.scaleY=a.scale.y),null!=a.rotation&&(e.rotation=a.rotation),e.addEventListener("out",c(this,this.onInstrumentStrumHandler)),this._audioDictionary.set(e,b),a.foreground?d.addChild(e):d.addChildAt(e,0),e},changeDanState:function(){var a=this._data.danielStateDance3,b=this._volume+(this._playing>0?1:0);switch(b){case 0:a=this._data.danielStateIdle;break;case 1:a=this._data.danielStateDance1;break;case 2:a=this._data.danielStateDance2}this._danielAnimationState!=a&&(this._danielAnimationState=a,this._dan.loopAnimation(this._danielAnimationState))},__class__:s});var t=function(a,b,d,e){this._mute3=!0,this._mute2=!0,s.call(this,a,b,d,e),this._environmentContainer=new createjs.Container,this._uiContainer=new createjs.Container,this.addChild(this._environmentContainer),this.addChild(this._uiContainer),this._environmentContainer.x=-(o.SpringrollApp.options.maxWidth-o.SpringrollApp.display.width)/2,this._assets=new K(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,c(this,this.onPackageReady)),this._assets.load(),this._strumDictionary=new h,1==this._isDebug&&(this._debugGraphics=new createjs.Graphics,this._debugGraphics.setStrokeStyle(2),this._debugGraphics.beginStroke("red"))};t.__name__=["pbsdaniel","music","screens","MoodScreen"],t.__super__=s,t.prototype=b(s.prototype,{start:function(){o.SpringrollApp.container.send("gameplay_started"),this.loopAudio(),o.SpringrollApp.on("resize",c(this,this.onResize)),this.onResize(o.SpringrollApp.display.width,o.SpringrollApp.display.height),this.stage.addEventListener("stagemousemove",c(this,this.onMouseMove),null)},onResize:function(a,b){for(var c=0,d=this._uiContainer.children;c<d.length;){var e=d[c];if(++c,null!=e.meta){var f=0,g=0;if("center"==e.meta.align){var h=e.getBounds();f=h.width/2,g=h.height/2}null!=e.meta.position.ox&&(e.x=e.meta.position.ox*a+e.meta.position.x-f),null!=e.meta.position.oy&&(e.y=e.meta.position.oy*b+e.meta.position.y-g)}}this._environmentContainer.x=-(o.SpringrollApp.options.maxWidth-a)/2},loopAudio:function(){this._track1=L.instance.playAudio(this._data.audio.melody_3,c(this,this.loopAudio)),this._track2=L.instance.playAudio(this._data.audio.melody_2),this._track3=L.instance.playAudio(this._data.audio.melody_1),this._track1.volume=this._mute1?0:1,this._track2.volume=this._mute2?0:1,this._track3.volume=this._mute3?0:1},setUpScreen:function(){this._data.hit1.position.ox>=1&&o.SpringrollApp.display.width>1100&&(this._data.hit1.position.ox=.94,this._data.hit2.position.ox=.94,this._data.hit3.position.ox=.94),this._bg=this._assets.getBitmap(this._data.background);var a=new i;if(null==this._data.happyButton){var b=this._data.angryButton;null!=X.angryButton?a.setReserved("angryButton",b):a.h.angryButton=b;var d=this._data.sadButton;null!=X.sadButton?a.setReserved("sadButton",d):a.h.sadButton=d}else if(null==this._data.sadButton){var e=this._data.happyButton;null!=X.happyButton?a.setReserved("happyButton",e):a.h.happyButton=e;var f=this._data.angryButton;null!=X.angryButton?a.setReserved("angryButton",f):a.h.angryButton=f}else if(null==this._data.angryButton){var g=this._data.sadButton;null!=X.sadButton?a.setReserved("sadButton",g):a.h.sadButton=g;var h=this._data.happyButton;null!=X.happyButton?a.setReserved("happyButton",h):a.h.happyButton=h}this._emotionSelector=new y(this._assets,this._data.activeTab,a,c(this,this.triggerAdvance)),this._emotionSelector.set({x:31,y:19}),this._randomInstrument=this.strikeInstrument(this._data.randomInstrument,[this._data.audio.random_1,this._data.audio.random_2,this._data.audio.random_3],!0),this._hit1=this.strikeInstrument(this._data.hit1,[this._data.audio.percussion_1],!0),this._hit2=this.strikeInstrument(this._data.hit2,[this._data.audio.percussion_2],!0),this._hit3=this.strikeInstrument(this._data.hit3,[this._data.audio.percussion_3],!0),this._key1=this.strikeInstrument(this._data.key1,[this._data.audio.key_1]),this._key2=this.strikeInstrument(this._data.key2,[this._data.audio.key_2]),this._key3=this.strikeInstrument(this._data.key3,[this._data.audio.key_3]),this._key4=this.strikeInstrument(this._data.key4,[this._data.audio.key_4]),this._key5=this.strikeInstrument(this._data.key5,[this._data.audio.key_5]),this._pluck1=this.strumInstrument(this._data.strum1,[this._data.audio.strum_1],this._key1),this._pluck2=this.strumInstrument(this._data.strum2,[this._data.audio.strum_2],this._key2),this._pluck3=this.strumInstrument(this._data.strum3,[this._data.audio.strum_3],this._key3),this._pluck4=this.strumInstrument(this._data.strum4,[this._data.audio.strum_4],this._key4),this._pluck5=this.strumInstrument(this._data.strum5,[this._data.audio.strum_5],this._key5),this._strumDictionary.set(this._pluck1,this._data.strum1.lineSegment),this._strumDictionary.set(this._pluck2,this._data.strum2.lineSegment),this._strumDictionary.set(this._pluck3,this._data.strum3.lineSegment),this._strumDictionary.set(this._pluck4,this._data.strum4.lineSegment),this._strumDictionary.set(this._pluck5,this._data.strum5.lineSegment),this._melody1=this.makeToggleButton(this._data.melody1,c(this,this.muteTrack),!this._mute1),this._melody2=this.makeToggleButton(this._data.melody2,c(this,this.muteTrack),!this._mute2),this._melody3=this.makeToggleButton(this._data.melody3,c(this,this.muteTrack),!this._mute3),this._environmentContainer.addChild(this._bg);var j=1664*this._data.danielLocation.x,k=.5*this._dan.getBounds().width;this._dan.x=j-k;var l=768*this._data.danielLocation.y,m=.5*this._dan.getBounds().height;this._dan.y=l-m,this._environmentContainer.addChild(this._dan),this._uiContainer.addChild(this._emotionSelector),this._uiContainer.addChild(this._randomInstrument),this._uiContainer.addChild(this._hit1),this._uiContainer.addChild(this._hit2),this._uiContainer.addChild(this._hit3),this._environmentContainer.addChild(this._key1),this._environmentContainer.addChild(this._key5),this._environmentContainer.addChild(this._key2),this._environmentContainer.addChild(this._key4),this._environmentContainer.addChild(this._key3),this._uiContainer.addChild(this._melody1),this._uiContainer.addChild(this._melody2),this._uiContainer.addChild(this._melody3),this._isDebug&&(this._debugGraphics.moveTo(this._data.strum1.lineSegment.start.x,this._data.strum1.lineSegment.start.y).lineTo(this._data.strum1.lineSegment.end.x,this._data.strum1.lineSegment.end.y),this._debugGraphics.moveTo(this._data.strum2.lineSegment.start.x,this._data.strum2.lineSegment.start.y).lineTo(this._data.strum2.lineSegment.end.x,this._data.strum2.lineSegment.end.y),this._debugGraphics.moveTo(this._data.strum3.lineSegment.start.x,this._data.strum3.lineSegment.start.y).lineTo(this._data.strum3.lineSegment.end.x,this._data.strum3.lineSegment.end.y),this._debugGraphics.moveTo(this._data.strum4.lineSegment.start.x,this._data.strum4.lineSegment.start.y).lineTo(this._data.strum4.lineSegment.end.x,this._data.strum4.lineSegment.end.y),this._debugGraphics.moveTo(this._data.strum5.lineSegment.start.x,this._data.strum5.lineSegment.start.y).lineTo(this._data.strum5.lineSegment.end.x,this._data.strum5.lineSegment.end.y),this._environmentContainer.addChild(new createjs.Shape(this._debugGraphics))),window.addEventListener("keydown",c(this,this.onKeyDown))},onMouseMove:function(a){var b=new createjs.Point(a.stageX,a.stageY);null!=this._previousMousePoint&&(this.intersect(this._previousMousePoint,b,this._strumDictionary.h[this._pluck1.__id__].start,this._strumDictionary.h[this._pluck1.__id__].end)&&this._pluck1.forceOut(),this.intersect(this._previousMousePoint,b,this._strumDictionary.h[this._pluck2.__id__].start,this._strumDictionary.h[this._pluck2.__id__].end)&&this._pluck2.forceOut(),this.intersect(this._previousMousePoint,b,this._strumDictionary.h[this._pluck3.__id__].start,this._strumDictionary.h[this._pluck3.__id__].end)&&this._pluck3.forceOut(),this.intersect(this._previousMousePoint,b,this._strumDictionary.h[this._pluck4.__id__].start,this._strumDictionary.h[this._pluck4.__id__].end)&&this._pluck4.forceOut(),this.intersect(this._previousMousePoint,b,this._strumDictionary.h[this._pluck5.__id__].start,this._strumDictionary.h[this._pluck5.__id__].end)&&this._pluck5.forceOut()),this._previousMousePoint=b},onKeyDown:function(a){if(window.console.log(a.keyCode),32==a.keyCode){var b=Math.floor(3*Math.random());switch(b){case 0:this._hit1.force();break;case 1:this._hit2.force();break;case 2:this._hit3.force()}}else{var c=Math.floor(5*Math.random());switch(c){case 0:this._key1.force();break;case 1:this._key2.force();break;case 2:this._key3.force();break;case 3:this._key4.force();break;case 4:this._key5.force()}}},muteTrack:function(a){a.currentTarget==this._melody1?this._mute1=!this._mute1:a.currentTarget==this._melody2?this._mute2=!this._mute2:a.currentTarget==this._melody3&&(this._mute3=!this._mute3),this._track1.volume=this._mute1?0:1,this._track2.volume=this._mute2?0:1,this._track3.volume=this._mute3?0:1;var b=Math.round(this._track1.volume)+Math.round(this._track2.volume)+Math.round(this._track3.volume);b!=this._volume&&(this._volume=b,this.changeDanState())},destroy:function(){null!=this.stage&&this.stage.removeEventListener("stagemousemove",c(this,this.onMouseMove),null),s.prototype.destroy.call(this),o.SpringrollApp.off("resize",c(this,this.onResize)),window.removeEventListener("keydown",c(this,this.onKeyDown)),this._randomInstrument.destroy()},ccw:function(a,b,c){return(c.y-a.y)*(b.x-a.x)>(b.y-a.y)*(c.x-a.x)},intersect:function(a,b,c,d){return this.ccw(a,c,d)!=this.ccw(b,c,d)?this.ccw(a,b,c)!=this.ccw(a,b,d):!1},__class__:t});var u=function(a,b){r.call(this),this._readyCallback=b,N.log(a),this._data=a,this._assets=new K(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,c(this,this.onPackageReady)),this._assets.load()};u.__name__=["pbsdaniel","music","screens","TitleScreen"],u.__super__=r,u.prototype=b(r.prototype,{destroy:function(){createjs.Tween.removeTweens(this),this._bg=null,this._playButton.removeAllEventListeners(),this._playButton.destroy(),this._playButton=null,window.removeEventListener("keydown",c(this,this.onKeyDown)),o.SpringrollApp.off("resize",c(this,this.onResize)),L.instance.killAll()},getQueryVariable:function(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0,e=c.length;e>d;){var f=d++,g=c[f].split("=");if(g[0]==a)return g[1]}return""},start:function(){o.SpringrollApp.on("resize",c(this,this.onResize)),this.onResize(o.SpringrollApp.display.width,o.SpringrollApp.display.height),"true"==this.getQueryVariable("playathome")?this.triggerAdvance():createjs.Tween.get(this).wait(1500,!0).call((P=L.instance,c(P,P.playVO)),[this._data.audio])},onResize:function(a,b){this.x=-(o.SpringrollApp.options.maxWidth-a)/2},onPackageReady:function(){N.log("Title screen assets ready",u),this._bg=this._assets.getBitmap(this._data.image),this.addChild(this._bg),this._playButton=new F(this._assets.getSpriteFromSheet(this._data.playButton.art.up,this._data.playButton.art.sheet),this._assets.getSpriteFromSheet(this._data.playButton.art.down,this._data.playButton.art.sheet)),this.addChild(this._playButton),"center"==this._data.playButton.align&&G.centerRegs(this._playButton),this._playButton.x=1664*this._data.playButton.position.x,this._playButton.y=768*this._data.playButton.position.y,this._playButton.turnOn(),this._playButton.addEventListener("down",c(this,this.triggerAdvance)),this.addEventListener("mousedown",c(this,this.triggerAdvance),null),window.addEventListener("keydown",c(this,this.onKeyDown)),this._readyCallback()},onKeyDown:function(a){window.console.log(a),window.removeEventListener("keydown",c(this,this.onKeyDown)),this.triggerAdvance()},triggerAdvance:function(a){window.console.log("trigger"),this.removeEventListener("mousedown",c(this,this.triggerAdvance),null),window.removeEventListener("keydown",c(this,this.onKeyDown)),this._playButton.removeEventListener("down",c(this,this.triggerAdvance)),this._playButton.turnOff(),createjs.Tween.removeTweens(this),L.instance.killAll(),this.dispatchEvent(new C("sceneRequest","gameScene"))},__class__:u});var v=function(a,b,c){null==c&&(c=!1),createjs.Container.call(this),this._state="off",this._off=a,this.addChildAt(this._off,0),0==c?(null==b&&(b=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(b.x,b.y,b.width,b.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this.addChild(this._hitbox)):this.mouseChildren=!1};v.__name__=["pbsdaniel","music","ui","Button"],v.__super__=createjs.Container,v.prototype=b(createjs.Container.prototype,{turnOn:function(){null!=this._hitbox?(this._hitbox.addEventListener("mousedown",c(this,this.onDown)),this._hitbox.addEventListener("mouseover",c(this,this.onOver)),this._hitbox.addEventListener("mouseout",c(this,this.onOut))):(this.addEventListener("mousedown",c(this,this.onDown)),this.addEventListener("mouseover",c(this,this.onOver)),this.addEventListener("mouseout",c(this,this.onOut)))},turnOff:function(){null!=this._hitbox?(this._hitbox.removeEventListener("mousedown",c(this,this.onDown)),
this._hitbox.removeEventListener("mouseover",c(this,this.onOver)),this._hitbox.removeEventListener("mouseout",c(this,this.onOut))):(this.removeEventListener("mousedown",c(this,this.onDown)),this.removeEventListener("mouseover",c(this,this.onOver)),this.removeEventListener("mouseout",c(this,this.onOut)))},stateChange:function(a){this._state=a,null!=this._off&&(this._off.visible="off"==this._state||"over"==this._state&&null==this._over||"down"==this._state&&null==this._down),null!=this._over&&(this._over.visible="over"==this._state),null!=this._down&&(this._down.visible="down"==this._state)},onOut:function(a){this.stateChange("off"),this.dispatchEvent(new createjs.Event("out",!1,!1))},onOver:function(a){this.stateChange("over"),this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){this.stateChange("down"),this.dispatchEvent(new createjs.Event("down",!1,!1))},forceOver:function(){this.onOver(null)},forceOut:function(){this.onOut(null)},addOver:function(a,b){this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1},addDown:function(a,b){this._down=a,null!=b&&(this._down.x=b.x,this._down.y=b.y),this.addChildAt(this._down,0),this._down.visible=!1},destroy:function(){this.removeAllChildren(),this.turnOff()},force:function(){this.onDown(null)},__class__:v});var w=function(a,b,d){v.call(this,a,d),this._offSprite=a,this._offSprite.gotoAndStop(this._offSprite.currentAnimation),this._offSprite.addEventListener("animationend",c(this,this.animationEnd),null),this._animateState=b};w.__name__=["pbsdaniel","music","ui","AnimationButton"],w.__super__=v,w.prototype=b(v.prototype,{animationEnd:function(a){this._offSprite.gotoAndStop(this._offSprite.currentAnimation)},stateChange:function(a){v.prototype.stateChange.call(this,a),a==this._animateState&&this._offSprite.gotoAndPlay(this._offSprite.currentAnimation)},__class__:w});var x=function(a,b,c){v.call(this,a,b,c)};x.__name__=["pbsdaniel","music","ui","BounceButton"],x.__super__=v,x.prototype=b(v.prototype,{turnOn:function(){v.prototype.turnOn.call(this),this.initialYPos=this.y},onDown:function(a){v.prototype.onDown.call(this,a),this.y=this.initialYPos+10,createjs.Tween.get(this).to({y:this.initialYPos},500,createjs.Ease.quadOut).call(c(this,this.reset))},destroy:function(){v.prototype.destroy.call(this)},reset:function(){v.prototype.stateChange.call(this,"off")},__class__:x});var y=function(a,b,c,d){createjs.Container.call(this),this._assets=a;var e=new i;null!=X.happyButton?e.setReserved("happyButton","happy"):e.h.happyButton="happy",null!=X.sadButton?e.setReserved("sadButton","sad"):e.h.sadButton="sad",null!=X.angryButton?e.setReserved("angryButton","mad"):e.h.angryButton="mad";for(var f=e,g=c.keys(),h=g;h.hasNext();){var j=h.next(),k=this.makeButton(null!=X[j]?c.getReserved(j):c.h[j],d);(null!=X[j]?f.existsReserved(j):f.h.hasOwnProperty(j))&&(k.name=null!=X[j]?f.getReserved(j):f.h[j]),window.console.log(k),this.addChild(k)}var l=this._assets.getSpriteFromSheet(b.art.up,b.art.sheet);this.addChild(l)};y.__name__=["pbsdaniel","music","ui","EmotionalButtonGroup"],y.__super__=createjs.Container,y.prototype=b(createjs.Container.prototype,{makeButton:function(a,b){var c=new v(this._assets.getSpriteFromSheet(a.art.up,a.art.sheet),null,!0);return c.addOver(this._assets.getSpriteFromSheet(a.art.down,a.art.sheet)),"center"==a.align&&G.centerRegs(c),c.x=a.position.x,c.y=a.position.y,c.turnOn(),c.addEventListener("down",b),c},__class__:y});var z=function(a,b,d){v.call(this,a,d),this._offSprite=a,this._offSprite.gotoAndStop(this._offSprite.currentAnimation),this._offSprite.addEventListener("animationend",c(this,this.animationEnd),null),this._animateState=b};z.__name__=["pbsdaniel","music","ui","FlashButton"],z.__super__=v,z.prototype=b(v.prototype,{animationEnd:function(a){this._offSprite.gotoAndStop(this._offSprite.currentAnimation)},stateChange:function(a){v.prototype.stateChange.call(this,a),a==this._animateState&&(this._time=new Date,this._offSprite.addEventListener("tick",c(this,this.doFlash),null))},doFlash:function(a){var b=(new Date).getTime()-this._time.getTime(),d=255*(b/100),e=255-255*((b-100)/100);100>b?(this.filters=[new createjs.ColorFilter(1,1,1,1,d,d,d)],this.cache(0,0,this.getBounds().width,this.getBounds().height)):200>b?(this.filters=[new createjs.ColorFilter(1,1,1,1,e,e,e)],this.cache(0,0,this.getBounds().width,this.getBounds().height)):(this.filters=[],this.cache(0,0,this.getBounds().width,this.getBounds().height),this._offSprite.removeEventListener("tick",c(this,this.doFlash),null))},__class__:z});var A=function(a,b){v.call(this,a,b)};A.__name__=["pbsdaniel","music","ui","ToggleButton"],A.__super__=v,A.prototype=b(v.prototype,{toggle:function(a){this._toggled=a,this.stateChange(this._state)},stateChange:function(a){this._toggled?(this._state=a,null!=this._off&&(this._off.visible="down"==this._state||"over"==this._state&&null==this._over||"off"==this._state&&null==this._down),null!=this._down&&(this._down.visible="off"==this._state),null!=this._over&&(this._over.visible="over"==this._state&&null==this._toggledOver),null!=this._toggledOver&&(this._toggledOver.visible="over"==this._state)):(v.prototype.stateChange.call(this,a),null!=this._toggledOver&&(this._toggledOver.visible=!1))},onDown:function(a){v.prototype.onDown.call(this,a),this._toggled=!this._toggled},addToggledOver:function(a,b){this._toggledOver=a,null!=b&&(this._toggledOver.x=b.x,this._toggledOver.y=b.y),this.addChildAt(this._toggledOver,0),this._toggledOver.visible=!1},__class__:A});var B=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};B.__name__=["sg","cjs","AssetLoader"],B.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",c(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b},__class__:B};var C=function(a,b,c,d,e){null==e&&(e=!1),null==d&&(d=!1),createjs.Event.call(this,a,d,e),this.sceneId=b,this.data=c};C.__name__=["sg","cjs","SceneLoadEvent"],C.__super__=createjs.Event,C.prototype=b(createjs.Event.prototype,{get_sceneId:function(){return this.sceneId},get_data:function(){return this.data},__class__:C});var D=function(a,b){this.completed=!1,createjs.Container.call(this),this._data=a;var d=[];d.push(a.skeleton),d.push(a.texture),d.push(a.textureJSON),this._assets=new K(d,null,c(this,this.chracterDataLoaded)),this._id=a.name,this._readyCallback=b,this._assets.load()};D.__name__=["sg","cjs","dragonbones","DBCharacterCJS"],D.__super__=createjs.Container,D.prototype=b(createjs.Container.prototype,{get_characterId:function(){return this._id},playAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){null!=b&&(this._currentCompleteCallback=b,this.armature.addEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)));var d=this.armature.animation.gotoAndPlay(a);window.console.log(d)}else window.console.log("Animation does not contain label ["+a+"]")},loopAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){this.armature.animation.gotoAndPlay(a,-1,-1,1e3)}else window.console.log("Animation does not contain label ["+a+"]")},stopAnimation:function(a){null==a&&(a=!1),a&&(this._currentCompleteCallback=null,this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete))),this.armature.animation.stop()},onAnimationComplete:function(a){window.console.log("Character ["+this._id+"] animation complete. Callback."),this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,c(this,this.onAnimationComplete)),this._currentCompleteCallback(a)},chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.build()},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null,this._assets.dispose(),this._assets=null},onTextureLoaded:function(a){this._filesToLoad--,this.charCreationCheck()},charCreationCheck:function(){this._filesToLoad<=0&&this.build()},onTextureDataLoaded:function(a){this._textureData=a,this._filesToLoad--,this.charCreationCheck()},onSkeletonDataLoaded:function(a){this._skeletonData=a,this._filesToLoad--,this.charCreationCheck()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._readyCallback()},omBoneFrameEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?L.instance.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?L.instance.playAudio(a.frameLabel.split("sfx_")[1]):L.instance.playAudio(a.frameLabel)},__class__:D});var E=function(a,b,c,d){null==d&&(d=5),null==c&&(c="#FFFFFF"),null==b&&(b=15),createjs.Container.call(this),this.x=a.x,this.y=a.y;for(var e=0,f=d;f>e;){var g=(e++,a.clone());this.addChild(g),g.x=0,g.y=0,g.shadow=new createjs.Shadow(c,0,0,b),g.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b)}this.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b),this.removeAllChildren()};E.__name__=["sg","cjs","ui","Glow"],E.__super__=createjs.Container,E.prototype=b(createjs.Container.prototype,{__class__:E});var F=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over?this._down=this._over:this._down=c,this.addChild(this._hitbox)};F.__name__=["sg","cjs","ui","HoverButton"],F.__super__=createjs.Container,F.prototype=b(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",c(this,this.onOver)),this._hitbox.addEventListener("mouseout",c(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",c(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",c(this,this.onOver)),this._hitbox.removeEventListener("mouseout",c(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(null!=this._over&&(this._over.visible=!1),this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:F});var G=function(){};G.__name__=["sg","cjs","utils","DisplayObjectUtils"],G.centerRegs=function(a){G.setRegs(a,.5,.5)},G.setRegs=function(a,b,c){var d,e,f=a.getBounds();null!=f?(d=f.width*b,e=f.height*c,a.set({regX:d,regY:e})):window.console.log("Could not set reg points on displayObject, rectangular bounds are not set")};var H=function(){B.call(this,H.manifest(),"loadingSpriteSheet","loadingData")};H.__name__=["sg","cjs","views","LoadingAnimation"],H.get_instance=function(){return null==H.instance&&(H.instance=new H),H.instance},H.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},H.load=function(a){H.get_instance().loadSpriteSheet(a)},H.loadingAnimation=function(){return new createjs.Sprite(H.get_instance()._spriteSheet,"Loading")},H.__super__=B,H.prototype=b(B.prototype,{__class__:H});var I=function(){r.call(this)};I.__name__=["sg","cjs","views","LoadingScreen"],I.__super__=r,I.prototype=b(r.prototype,{init:function(){window.console.log("Load assets for LodaingScreen"),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),c(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){window.console.log("LoadingScreen: onPackageReady")},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:I});var J=function(a,b){this._started=!1,this.name=a,this._startCall=b};J.__name__=["sg","kit","PBSGameButler"],J.prototype={startGame:function(a,b){this._started||(window.console.log("Butler starting game"),this._startCall(a,b),window.console.log("Start complete"))},get_name:function(){return this.name},__class__:J};var K=function(a,b,c,d){null==d&&(d=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=a,this._audioManifest=b,this._completeCallback=c,this._loadQueue=new createjs.LoadQueue(!0,d),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=L.instance};K.__name__=["sg","pbskids","AssetPackage"],K.makeManifestItem=function(a,b,c){return{id:a,src:b,type:c}},K.makeAudioManifestItem=function(a){return{id:a}},K.prototype={load:function(){null!=this._audioManifest&&this._audioManifest.length>0?L.instance.loadAudio(this._audioManifest,c(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(a,b){if(null!=b&&""!=b){var c=new createjs.Sprite(this._loadQueue.getResult(b),a);return c}for(var d=this._loadQueue.getItems(!0),e=0,f=d.length;f>e;){var g=e++;if("spritesheet"==d[g].item.type&&-1!=this._loadQueue.getResult(d[g].item.id).animations.indexOf(a)){var h=new createjs.Sprite(this._loadQueue.getResult(d[g].item.id),a);return h}}return null},getBitmap:function(a){var b=this._loadQueue.getResult(a);return new createjs.Bitmap(b)},getImage:function(a){return this._loadQueue.getResult(a)},getResult:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a){a.length>0?(this._loadQueue.addEventListener("complete",c(this,this.onQueueComplete),null),this._loadQueue.loadManifest(a)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(a){this._loadQueue.loadManifest(a)},onQueueComplete:function(a){this._loadQueue.removeEventListener("complete",c(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:K};var L=function(a,b){this._callbacks=new i,this._soundMap=new i,this._sounds=new i,createjs.EventDispatcher.call(this),this._voPlayer=a,this._sound=b};L.__name__=["sg","pbskids","audio","SRAudioManager"],L.init=function(a){null==L.instance&&(L.instance=new L(a.voPlayer,a.sound))},L.__super__=createjs.EventDispatcher,L.prototype=b(createjs.EventDispatcher.prototype,{playAudio:function(a,b){var c=this._sound.play(a,b);return c},loopAudio:function(a){var b={loop:-1},c=this._sound.play(a,b);return c},playVO:function(a,b,c){null==c&&(c=!0),c||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(a,b)):window.console.log("VO dropped due to conflicting VO playing. "+a+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(a){this._sound.stop(a)},stopVO:function(a){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(a){},handleComplete:function(a){var b=a.currentTarget.uniqueId,d=this._callbacks;if(null!=(null!=X[b]?d.getReserved(b):d.h[b])){var e=a.currentTarget.uniqueId,f=this._callbacks;(null!=X[e]?f.getReserved(e):f.h[e])()}var g=a.currentTarget.uniqueId,h=this._sounds;(null!=X[g]?h.getReserved(g):h.h[g]).stop();var i=a.currentTarget.uniqueId,j=this._sounds;(null!=X[i]?j.getReserved(i):j.h[i]).removeEventListener("complete",c(this,this.handleComplete));var k=a.currentTarget.uniqueId,l=this._sounds;(null!=X[k]?l.getReserved(k):l.h[k]).removeEventListener("failed",c(this,this.handleFailed));var m=a.currentTarget.uniqueId,n=this._sounds;null!=X[m]?n.setReserved(m,null):n.h[m]=null,this._sounds.remove(a.currentTarget.uniqueId);var o=a.currentTarget.uniqueId,p=this._callbacks;null!=X[o]?p.setReserved(o,null):p.h[o]=null,this._callbacks.remove(a.currentTarget.uniqueId)},loadAudio:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}window.console.log(c),window.console.log(this._sound),this._sound.preload(c,b)},queueLoaded:function(a){},__class__:L});var M=function(a,b){D.call(this,a,b)};M.__name__=["sg","springroll","dragonbones","SRDBCharacter"],M.__super__=D,M.prototype=b(D.prototype,{chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.preloadAudio(this._skeletonData),this.build()},preloadAudio:function(a){var b=[];this._audioLoaded=!1;for(var e=0,f=a.armature;e<f.length;){var g=f[e];++e;for(var h=0,i=g.animation;h<i.length;){var j=i[h];++h;for(var k=0,l=j.timeline;k<l.length;){var m=l[k];++k;for(var n=0,o=m.frame;n<o.length;){var p=o[n];if(++n,null!=p.event){var q="";p.event.indexOf("vo_")>-1?q=d.substr(p.event,3,null):p.event.indexOf("sfx_")>-1&&(q=d.substr(p.event,4,null)),b.push(K.makeAudioManifestItem(q))}}}}}N.log("Audio from "+this.get_characterId()),N.log(b),b.length>0?L.instance.loadAudio(b,c(this,this.characterAudioLoaded)):(this._audioLoaded=!0,this.characterAudioLoaded())},characterAudioLoaded:function(){N.log("Audio from "+this.get_characterId()+" is preloaded"),this._audioLoaded=!0,null!=this._readyCallback&&this.completed&&this._readyCallback()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,c(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._audioLoaded&&this._readyCallback()},__class__:M});var N=function(){};N.__name__=["sg","springroll","logging","Logging"],N.log=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.log(a))},N.getCallerString=function(a){if(null==a)return"";var b=f.getClassName(a).split(".");return"["+b[b.length-1]+"] "},N.clear=function(){N.enabled&&springroll.Debug.clear()},N.debug=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.debug(a))},N.error=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.error(a))},N.info=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.info(a))},N.trace=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.trace(a))},N.aqua=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.aqua(a))},N.blue=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.blue(a))},N.gray=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.gray(a))},N.green=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.green(a))},N.lime=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.lime(a))},N.maroon=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.maroon(a))},N.navy=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.navy(a))},N.olive=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.olive(a))},N.orange=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.orange(a))},N.pink=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.pink(a))},N.purple=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.purple(a))},N.red=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.red(a))},N.silver=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.silver(a))},N.teal=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.teal(a))},N.yellow=function(a,b){N.enabled&&(null!=b&&(a=N.getCallerString(b)+e.string(a)),springroll.Debug.yellow(a))};var O=function(){};O.__name__=["sg","utils","Utils"],O.shuffleArray=function(a){for(var b=[];a.length>0;)b.push(a.splice(Math.floor(Math.random()*a.length),1)[0]);return b},O.getQueryParam=function(a){var b=new i,c=function(a,c,d){null!=X[c]?b.setReserved(c,d):b.h[c]=d};return window.location.href.replace(new RegExp("[?&]+([^=&]+)=([^&]*)","gi"),c),0==(null!=X[a]?b.existsReserved(a):b.h.hasOwnProperty(a))?null:null!=X[a]?b.getReserved(a):b.h[a]},O.prototype={__class__:O};var P,Q=0;String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"],Date.prototype.__class__=Date,Date.__name__=["Date"];var R={__name__:["Int"]},S={__name__:["Dynamic"]},T=Number;T.__name__=["Float"];var U=Boolean;U.__ename__=["Bool"];var V={__name__:["Class"]},W={};createjs.DisplayObject.prototype.setBounds=function(a,b,c,d){this._bounds=null!=a?(this._bounds||new createjs.Rectangle).setValues(a,b,c,d):null};var X={};h.count=0,k.__toStr={}.toString,l.GAME_WIDTH=1664,l.GAME_HEIGHT=768,l.GAME_INTRO="gameIntro",l.GAME_SCENE="gameScene",l.GAME_DATA="gameData",l.CHARATER_DATA="charaterData",l.TITLESCREEN_DATA="titlescreenData",l.HAPPYSCREEN_DATA="happyscreenData",l.SADSCREEN_DATA="sadscreenData",l.ANGRYSCREEN_DATA="angryscreenData",l.EFFECTS_DATA="effectsData",l.IMAGE="image",l.CHARACTER="character",l.SPRITE="sprite",l.CUSTOM="custom",l.EMOTION_MAD="mad",l.EMOTION_SAD="sad",l.EMOTION_HAPPY="happy",m.DT_LOADING_SS="loadingScreenSheet",n.NOTE_UP="NOTE_UP",n.NOTE_SPIN="NOTE_SPIN",n.BURST="BURST",p.LOAD_MIN_TIME=500,q.GAME_NAME="FeelTheMusic",r.COMPLETE="complete",s.TITLE_SCREEN_SS="titleScreenSS",t.TITLE_SCREEN_SS="titleScreenSS",u.TITLE_SCREEN_SS="titleScreenSS",v.DOWN="down",v.OVER="over",v.OUT="out",v.OFF="off",z.FLASHTIME=100,C.SCENE_REQUEST="sceneRequest",C.GAME_RESTART="gameRestart",F.ACTIVATED="activated",F.DOWN="down",F.OVER="over",H.SPRITESHEET="loadingSpriteSheet",H.DATA="loadingData",I.READY="ready",N.enabled=!0,q.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);