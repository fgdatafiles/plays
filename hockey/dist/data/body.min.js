/* Created by Olphabet */var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c.game,d,e)||this;f._bgballs=[],f._balls=[];for(var g=0;g<3;g++)f._bgballs.push(f.game.make.sprite(70*g*a.Main.SCALE,0,"catlas","bgBallUI")),f._bgballs[g].anchor.set(.5),f._balls.push(f.game.make.sprite(0,0,"ui","shaibaIndicator0001")),f._balls[g].anchor.set(.5),f._bgballs[g].addChild(f._balls[g]),f.addChild(f._bgballs[g]);return f._timeText=f.game.make.text(68*a.Main.SCALE,-4*a.Main.SCALE,"0:30",{font:"GinzaNarrow-Heavy",fontSize:80*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),f._timeText.anchor.set(.5),f._timeText.visible=!1,f.addChild(f._timeText),f._containerToBonus=f.game.make.sprite(f.game.width/2-f.x,123*a.Main.SCALE-f.y),f._containerToBonus.anchor.set(.5),f.addChild(f._containerToBonus),f._shaibaCountPlank=f.game.make.image(f.game.width/2-f.x,123*a.Main.SCALE-f.y,"ui","bonusIndicator"),f._shaibaCountPlank.anchor.set(.5),f._shaibaCountPlank.exists=!1,f.addChild(f._shaibaCountPlank),f._shaibaGold=f.game.make.graphics(0,0),f._shaibaGold.angle=-90,f._shaibaGold.scale.y=-1,f._shaibaGold.alpha=0,f._shaibaGold.blendMode=PIXI.blendModes.ADD,f._shaibaCountPlank.addChild(f._shaibaGold),f._shaibaCountText=f.game.make.text(0,0,"",{font:"GinzaNarrow-Heavy",fontSize:80*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),f._shaibaCountText.anchor.set(.5),f._shaibaCountPlank.addChild(f._shaibaCountText),f._bonusBGPlank=f.game.make.image(74*a.Main.SCALE,248*a.Main.SCALE,"ui","bonus_plank"),f._bonusBGPlank.anchor.set(.5),f._bonusBGPlank.alpha=0,f.addChild(f._bonusBGPlank),f._bonusBGPlankUp=f.game.make.graphics(-f._bonusBGPlank.width/2+1*a.Main.SCALE,-f._bonusBGPlank.height/2+1*a.Main.SCALE),f._bonusBGPlankUp.beginFill(16777215),f._bonusBGPlankUp.drawRect(0,0,f._bonusBGPlank.width-2*a.Main.SCALE,f._bonusBGPlank.height-2*a.Main.SCALE),f._bonusBGPlankUp.endFill(),f._bonusBGPlankUp.scale.x=0,f._bonusBGPlank.addChild(f._bonusBGPlankUp),f.initPlank(),f}return __extends(c,b),c.prototype.initPlank=function(){if(1==a.Cockey.CURRENT_GAME_MOD){this._currentBall=0;for(var b=0;b<3;b++)this._balls[b].alpha=1,this._balls[b].y=0,this._balls[b].scale.set(1,1)}else{for(var b=0;b<3;b++)this._balls[b].alpha=0,this._bgballs[b].alpha=0;2==a.Cockey.CURRENT_GAME_MOD&&(this._timeText.text="0:30",this._timeText.visible=!0)}},c.prototype.hideShowTime=function(b,c){this._shaibaCount=5,this._currentGood=0,this._scoreToAddTime=3,this._addTimeToBonus=!1,this._currentArc=360,this._currentArcRad=45*a.Main.SCALE,this._shaibaGold.clear(),this._shaibaGold.alpha=0,this._timeBonus=15,console.log(c,"AZAZAZA"),c>=2&&c<5?this._scoreToAddTime=4:c>=5&&(this._scoreToAddTime=5),this._shaibaCountText.text=this._shaibaCount.toString(),this._shaibaCountPlank.exists=!b,this._bonusBGPlank.exists=b,b||(this._bonusBGPlank.alpha=0),this._shaibaGold.scale.set(1,-1)},c.prototype.incrementShaiba=function(b){var c=this.game.add.text(this._shaibaCountText.x,this._shaibaCountText.y,this._shaibaCount.toString(),{font:"GinzaNarrow-Heavy",fontSize:80*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"});c.anchor.set(.5),this._shaibaCountPlank.addChild(c),this._shaibaCount--,this._shaibaCountText.text=this._shaibaCount.toString(),this.game.add.tween(c.scale).to({x:2,y:2},600,Phaser.Easing.Sinusoidal.Out,!0),this.game.add.tween(c).to({alpha:0},400,Phaser.Easing.Sinusoidal.Out,!0,200).onComplete.addOnce(function(){c.destroy(!0)});var d=this._addTimeToBonus,e=!1;return this.updateBonusGold(b),this._addTimeToBonus&&!d&&(e=!0),{count:this._shaibaCount,result:e}},c.prototype.updateBonusGold=function(b){var c=this;if(!this._addTimeToBonus){b?++this._currentGood>=this._scoreToAddTime&&(this._currentGood=this._scoreToAddTime,this._addTimeToBonus=!0,console.log("ДОБАВЛЯЕМ ВРЕМЯ!")):--this._currentGood<0&&(this._currentGood=0);var d=this._currentGood/this._scoreToAddTime,e=360-360*d;this.game.add.tween(this._shaibaGold).to({alpha:d},750,Phaser.Easing.Quartic.InOut,!0,200).onStart.addOnce(function(){b?a.SoundMixer.play(Phaser.ArrayUtils.getRandomItem(["happy_1","happy_2"]),.75):a.SoundMixer.play("bad",.65)}),this.game.add.tween(this).to({_currentArc:e},750,Phaser.Easing.Quartic.InOut,!0,200).onUpdateCallback(function(){c._shaibaGold.clear(),c._shaibaGold.beginFill(16760134),c._shaibaGold.arc(0,0,c._currentArcRad,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(c._currentArc),!0,160),c._shaibaGold.endFill()}).onComplete.addOnce(function(){c._addTimeToBonus&&(c._shaibaGold.clear(),c._shaibaGold.beginFill(16760134),c._shaibaGold.drawCircle(0,0,2*c._currentArcRad),c._shaibaGold.endFill(),c.game.add.tween(c._shaibaGold).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0,150),c.game.add.tween(c._shaibaGold.scale).to({x:2,y:-2},350,Phaser.Easing.Back.InOut,!0).onStart.addOnce(function(){c._shaibaGold.scale.set(1,-1),a.SoundMixer.play("interface_Main_Metal_small_01",.75);var b=c.game.add.text(0,0,"+"+c._timeBonus,{font:"GinzaNarrow-Heavy",fontSize:80*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"});b.anchor.set(.5),b.blendMode=PIXI.blendModes.ADD,c._shaibaCountPlank.addChild(b);var d=new Phaser.Point(c._timeText.x-c._containerToBonus.x,c._timeText.y-c._containerToBonus.y),e=750+c.game.rnd.integerInRange(-100,200);c.tweenTint(b,"#FFBD46","#FFFFFF",e),c.game.add.tween(b.scale).to({x:3.5,y:3.5},e/2,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),c.game.add.tween(b).to({x:[b.x,Math.max(b.x-d.x,d.x-b.x)/2+c.game.rnd.integerInRange(-200*a.Main.SCALE,400*a.Main.SCALE),d.x],y:[b.y,Math.max(b.y-d.y,d.y-b.y)/2+c.game.rnd.integerInRange(200*a.Main.SCALE,400*a.Main.SCALE),d.y]},e,Phaser.Easing.Sinusoidal.Out,!0,100).interpolation(function(a,b){return Phaser.Math.bezierInterpolation(a,b)}).onComplete.addOnce(function(){c.updateTime(),b.destroy(!0)},c)}))})}},c.prototype.tweenTint=function(a,b,c,d,e){if(void 0===d&&(d=250),void 0===e&&(e=null),a){var f=Phaser.Color.hexToColor(b),g=Phaser.Color.hexToColor(c),h={step:0},i=this.game.add.tween(h).to({step:100},d);i.onUpdateCallback(function(){a.tint=Phaser.Color.interpolateRGB(f.r,f.g,f.b,g.r,g.g,g.b,100,h.step)}),e&&i.onComplete.add(function(){e()}),i.start()}},c.prototype.updateTime=function(){var b=this;this.game.add.tween(this._timeText.scale).to({x:1.4,y:1.4},150,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){a.Cockey.instance.updateTextAddTime(b._timeBonus),b.game.add.tween(b._timeText.scale).to({x:1,y:1},300,Phaser.Easing.Sinusoidal.InOut,!0,100)})},c.prototype.incrementBall=function(){var b=this;this.game.add.tween(this._balls[this._currentBall]).to({alpha:0,y:this._balls[this._currentBall].y-40*a.Main.SCALE},320,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){b._currentBall++})},c.prototype.addLiveBall=function(){this._currentBall--,this.game.add.tween(this._balls[this._currentBall]).to({alpha:1,y:0},320,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){})},c.prototype.updateTimeText=function(a){this._timeText.text=a},c.prototype.updateBonusTimer=function(a){if(0==a){if(0==this._bonusBGPlank.alpha)return;this.game.add.tween(this._bonusBGPlank).to({alpha:0},250,Phaser.Easing.Sinusoidal.Out,!0)}else 0==this._bonusBGPlank.alpha&&this.game.add.tween(this._bonusBGPlank).to({alpha:1},250,Phaser.Easing.Sinusoidal.Out,!0);this._bonusBGPlankUp.scale.x=a,1==a&&this.game.add.tween(this._bonusBGPlank).to({alpha:0},250,Phaser.Easing.Sinusoidal.Out,!0)},c}(Phaser.Sprite);a.BallUIPlank=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c.game,d,e)||this;g._baseGame=c,g._visual=g.game.make.sprite(0,0,"catlas","PINGUIN"),g._visual.anchor.set(.5,.55),g._downPanelG=g.game.make.graphics(-g._visual.width/2,15*a.Main.SCALE),g._downPanelG.beginFill(1451565,1),g._downPanelG.drawRect(0,0,g._visual.width,-30*a.Main.SCALE),g.addChild(g._downPanelG),g._downPanelG.scale.y=0,g.addChild(g._visual),g._barierY=g.y;var h=.8+(g._barierY-a.Cockey.SHAIBA_POS_FINISH_Y)/-a.Cockey.HEIGHT_SHAIBA_FIELD*.5;return g._visual.scale.set(h,h),g.game.physics.arcade.enable(g),g.body.setSize(g._visual.width,g._visual.height,-g._visual.width/2,-g._visual.height),g._maskG=g.game.make.graphics(-g._visual.width/2,-g._visual.height),g._maskG.beginFill(0,.5),g._maskG.drawRect(0,0,g._visual.width,g._visual.height),g.addChild(g._maskG),g._visual.mask=g._maskG,g.body.enable=!1,g._visual.visible=!1,console.log(h),g}return __extends(c,b),c.prototype.quicHide=function(){this._moveTween&&this.game.tweens.remove(this._moveTween),this.body.enable=!1,this._visual.visible=!1},c.prototype.resetBarier=function(b,c,d){var e=this;if(void 0===c&&(c=0),void 0===d&&(d=0),b)1==this._visual.visible&&(this._moveTween&&this.game.tweens.remove(this._moveTween),this._maskG.position.set(-this._visual.width/2,-this._visual.height),this.game.add.tween(this._downPanelG.scale).to({y:1},150,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){e.game.add.tween(e._downPanelG.scale).to({y:0},50,Phaser.Easing.Sinusoidal.Out,!0,300),e.game.add.tween(e._visual).to({y:e._visual.height},450,Phaser.Easing.Quintic.Out,!0).onComplete.addOnce(function(){e.body.enable=!1,e._visual.visible=!1})}));else{0==this._visual.visible&&(this._visual.y+=this._visual.height,this.body.enable=!0,this._visual.visible=!0,this.body.enable=!0,this._visual.visible=!0,this.game.add.tween(this._downPanelG.scale).to({y:1},150,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){e.game.add.tween(e._visual).to({y:0},450,Phaser.Easing.Quintic.Out,!0),e.game.add.tween(e._downPanelG.scale).to({y:0},50,Phaser.Easing.Sinusoidal.Out,!0,300).onComplete.addOnce(function(){e._maskG.position.set(-e._visual.width/2,-e._visual.height*e._visual.anchor.y)})})),this.x=c,this.y=d,this._barierY=this.y,this.depth=this.y;var f=.8+(this._barierY-a.Cockey.SHAIBA_POS_FINISH_Y)/-a.Cockey.HEIGHT_SHAIBA_FIELD*.5;this._visual.scale.set(f,f),this.body.setSize(.8*this._visual.width,this._visual.height,-this._visual.width/2+.2*this._visual.width/2,-this._visual.height),console.log("RESIZEN AND OTHER",f),this._downPanelG.clear(),this._downPanelG.position.set(-this._visual.width/2,5*a.Main.SCALE),this._downPanelG.beginFill(1451565,1),this._downPanelG.drawRect(0,0,this._visual.width,-30*a.Main.SCALE),this._downPanelG.scale.y=0,this._maskG.clear(),this._maskG.position.set(-this._visual.width/2,-this._visual.height),this._maskG.beginFill(0,.5),this._maskG.drawRect(0,0,this._visual.width,this._visual.height)}},c.prototype.startMoveBarier=function(a,b){this._startPosition=this.x,this._moveTween=this.game.add.tween(this).to({x:this._startPosition+a},b,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0)},c.prototype.hitObj=function(b){a.Cockey.instance.playHitStickSound(a.Cockey.instance._barierSound,"hitGame_Body",2,.35),this.game.add.tween(this._visual.scale).to({y:this._visual.scale.y+.05,x:this._visual.scale.x-.05},50,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),console.log("HIT!")},c}(Phaser.Sprite);a.Barrier=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e,f){var g=b.call(this,c.game,d,e)||this;return g._baseGame=c,g._shadow=g.game.make.image(d,360*a.Main.SCALE,"catlas","shaibaSh"),g._shadow.alpha=.5,g._shadow.anchor.set(.5),"target"==f?(g._visual=g.game.make.image(0,0,"catlas","medal_standart"),g._visual.anchor.set(.5),g._visual.scale.set(.7,.7)):"bonus"==f&&(g._fakeBack=g.game.make.sprite(0,0,"catlas","outStarLine"),g._fakeBack.anchor.set(.5),g._fakeBack.alpha=.3,g._fakeBack.scale.set(1,1),g._bonusBack=g.game.make.sprite(0,0,"catlas","outStarLine"),g._bonusBack.anchor.set(.5),g._bonusBack.scale.set(1,1),g._currentDeg=0,g._bonusMask=g.game.make.graphics(0,0),g._bonusMask.beginFill(16724736),g._bonusMask.arc(0,0,135*a.Main.SCALE,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(g._currentDeg),!0),g._bonusBack.addChild(g._bonusMask),g._bonusBack.mask=g._bonusMask,g._visual=g.game.make.image(0,0,"catlas","medal_super"),g._visual.anchor.set(.5),g._visual.scale.set(2,2)),g._type=f,g.game.physics.arcade.enable(g),g.body.setSize(g._visual.width,g._visual.height,-g._visual.width/2,-g._visual.height/2),g.body.immovable=!0,a.Cockey.instance.shadowContainer().addChild(g._shadow),"bonus"==f&&(g.addChild(g._fakeBack),g.addChild(g._bonusBack)),g.addChild(g._visual),g.resetBonus(d,e,g._visual.scale.x,null,f),g}return __extends(c,b),c.prototype.createPath=function(b){var c=[630*a.Main.SCALE,630*a.Main.SCALE,1270*a.Main.SCALE,1270*a.Main.SCALE],d=[234*a.Main.SCALE,402*a.Main.SCALE,402*a.Main.SCALE,234*a.Main.SCALE],e=Math.min.apply(null,c),f=Math.min.apply(null,d),g=Math.max.apply(null,c)-e,h=Math.max.apply(null,d)-f,i=[],j=[],k=0;switch(b){case"hirisontal":k=this.x>960*a.Main.SCALE?-1:1,i=[this.x,this.x+g/4*k,this.x],j=[this.y,this.y+this.game.rnd.integerInRange(-20*a.Main.SCALE,20*a.Main.SCALE),this.y];break;case"hirisontal_diag":k=this.x>960*a.Main.SCALE?-1:1,i=[this.x,this.x+g/4*k,this.x];var l=this.y>f+h/2?-1:1;j=[this.y,this.y+this.game.rnd.integerInRange(h/4,h/2)*l,this.y];break;case"infinity":k=this.x>960*a.Main.SCALE?-1:1,i=[140*a.Main.SCALE,440*a.Main.SCALE,140*a.Main.SCALE,440*a.Main.SCALE,140*a.Main.SCALE],j=[328*a.Main.SCALE,168*a.Main.SCALE,168*a.Main.SCALE,328*a.Main.SCALE,328*a.Main.SCALE];break;case"batterfly":k=this.x>960*a.Main.SCALE?-1:1,i=[120*a.Main.SCALE,120*a.Main.SCALE,320*a.Main.SCALE,520*a.Main.SCALE,520*a.Main.SCALE,320*a.Main.SCALE,120*a.Main.SCALE],j=[68*a.Main.SCALE,288*a.Main.SCALE,248*a.Main.SCALE,288*a.Main.SCALE,68*a.Main.SCALE,168*a.Main.SCALE,68*a.Main.SCALE];break;case"triangle":Math.random()>.5?(i=[220*a.Main.SCALE,320*a.Main.SCALE,420*a.Main.SCALE,220*a.Main.SCALE],j=[288*a.Main.SCALE,108*a.Main.SCALE,288*a.Main.SCALE,288*a.Main.SCALE]):(i=[220*a.Main.SCALE,320*a.Main.SCALE,420*a.Main.SCALE,220*a.Main.SCALE],j=[108*a.Main.SCALE,288*a.Main.SCALE,108*a.Main.SCALE,108*a.Main.SCALE]);break;case"zigzag":Math.random()>.5?(i=[0*a.Main.SCALE,120*a.Main.SCALE,220*a.Main.SCALE,320*a.Main.SCALE,440*a.Main.SCALE,320*a.Main.SCALE,220*a.Main.SCALE,120*a.Main.SCALE,0*a.Main.SCALE],j=[268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE]):(i=[0*a.Main.SCALE,120*a.Main.SCALE,220*a.Main.SCALE,320*a.Main.SCALE,440*a.Main.SCALE,320*a.Main.SCALE,220*a.Main.SCALE,120*a.Main.SCALE,0*a.Main.SCALE],j=[68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE,268*a.Main.SCALE,68*a.Main.SCALE])}var m=Math.min.apply(null,i),n=Math.min.apply(null,j),o=Math.max.apply(null,i)-m,p=Math.max.apply(null,j)-n,q=o/g,r=p/h,s=[],t=[],u=3200;if("hirisontal_diag"==b||"hirisontal"==b)s=i,t=j,u=3200;else if("infinity"==b){var v=Math.max(q,r),w=Phaser.ArrayUtils.getRandomItem([0,g/2-o/2,g-o]);s=i.map(function(a){return(a-m+w)/v+e}),t=j.map(function(a){return(a-n)/(v/.8)+f}),u=4500}else if("batterfly"==b){var x=Math.max(q,r),y=Phaser.ArrayUtils.getRandomItem([0,g-o,g-o/2]);s=i.map(function(a){return(a-m+y)/x+e}),t=j.map(function(a){return(a-n)/x+f}),u=4500}else if("triangle"==b){var z=Math.max(q,r),A=this.game.rnd.integerInRange(0,g+(-o/2-this._visual.width/2));s=i.map(function(a){return(a-m+A)/z+e}),t=j.map(function(a){return(a-n)/z+f}),u=3200}else if("zigzag"==b){var B=Math.max(q,r),C=this.game.rnd.integerInRange(0,g+(-o/2-this._visual.width/2));s=i.map(function(a){return(a-m+C)/B+e}),t=j.map(function(a){return(a-n)/B+f}),u=6500}this.x=s.splice(0,1)[0],this.y=t.splice(0,1)[0],this._pathTween="zigzag"==b?this.game.add.tween(this).to({x:s,y:t},u*a.Cockey.TARGET_SPEED,Phaser.Easing.Linear.None,!0,0,-1):this.game.add.tween(this).to({x:s,y:t},u*a.Cockey.TARGET_SPEED,Phaser.Easing.Linear.None,!0,0,-1).interpolation(function(a,b){return Phaser.Math.catmullRomInterpolation(a,b)})},c.prototype.updateBonus=function(){this._shadow.x=this.x;var b=(510*a.Main.SCALE-this.y)/300*a.Main.SCALE;if(this._shadow.scale.set(1+b,1+b/2),this.visible&&!this._dead&&0!=this._canTouch){if(this._shadow.alpha=.5,this.y=this._beginY+15*Math.sin(this._ang+=.05)*a.Main.SCALE,this._shadow.y=510*a.Main.SCALE,"bonus"==this._type){if(this._currentDeg+=1,this._bonusMask.clear(),this._currentDeg>=360*a.Main.SCALE)return this._fakeBack.visible=!1,this._bonusBack.visible=!1,void this.freeBonus();this._bonusMask.beginFill(16724736),this._bonusMask.arc(0,0,135*a.Main.SCALE,a.GameConfig.degreesToRad(0),a.GameConfig.degreesToRad(this._currentDeg),!0)}return!1}},c.prototype.checkBonusCollide=function(b){return!this._dead&&(!!(b&&Math.abs(b.y-this.y)<50*a.Main.SCALE&&this.game.physics.arcade.collide(b,this))&&("bonus"==this._type?(this._dead=!0,this._baseGame._bonusPosition.set(this.x,this.y),this.deadBonus()):(this._dead=!0,this.deadBonus()),!0))},Object.defineProperty(c.prototype,"bonusType",{get:function(){return this._type},enumerable:!0,configurable:!0}),c.prototype.resetBonus=function(a,b,d,e,f){var g=this;this._type=f||this._type,this.game.tweens.remove(this._pathTween),this.exists=!0,d&&(this._visual.scale.set(d),"bonus"==f&&(this._fakeBack.scale.set(d+.3),this._bonusBack.scale.set(d+.3))),"bonus"==f?this.body.setSize(1.4*this._visual.width,1.4*this._visual.height,-(1.4*this._visual.width)/2,-(1.4*this._visual.height)/2):this.body.setSize(this._visual.width,this._visual.height,-this._visual.width/2,-this._visual.height/2),this.scale.set(.1,.1),this.alpha=0,this.game.add.tween(this).to({alpha:1},300,Phaser.Easing.Linear.None,!0),this._shadow.alpha=0,this.game.add.tween(this._shadow).to({alpha:.5},300,Phaser.Easing.Linear.None,!0),"bonus"!=f?this.game.add.tween(this.scale).to({x:.5,y:.5},500,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){g._canTouch=!0}):(console.log("OLOLONUS"),this.game.add.tween(this.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){g._canTouch=!0})),this.x=a,this.y=b,e&&this.createPath(e),this._shadow.x=this.x,this._ang=0,this._beginY=b,this._timeLife=c.LIFE_TIME,this._dead=!1,this._canTouch=!1},c.prototype.deadBonus=function(){var a=this;this.game.tweens.remove(this._pathTween),this.game.add.tween(this._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.game.add.tween(a._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),a.game.add.tween(a._shadow).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),a.game.add.tween(a).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),a.game.add.tween(a.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.game.add.tween(a._shadow.scale).to({x:-1},150,Phaser.Easing.Linear.None,!0),a.game.add.tween(a.scale).to({x:-.5},150,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a.scale.x=.5,a._shadow.scale.x=1,a.exists=!1,"bonus"!=a._type?a._baseGame.addBonuses():a.annihilation()})})})},c.prototype.freeBonus=function(){var a=this;this._dead||(this.game.add.tween(this._shadow).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(this).to({alpha:.2},300,Phaser.Easing.Linear.None,!0),this._dead=!0,this.game.add.tween(this.scale).to({x:0,y:0},400,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){a.annihilation()}))},c.prototype.annihilation=function(){this.exists=!1,this._shadow.destroy(!0),this._baseGame.removeBonus(this),this.parent&&this.parent.removeChild(this),this.destroy(!0)},c.LIFE_TIME=400,c}(Phaser.Sprite);a.Bonus=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(c,d){var e=b.call(this,c,0,0)||this;return e._markContainer=d,e._tutorialOverlay=e.game.make.graphics(0,0),e._tutorialOverlay.beginFill(0),e._tutorialOverlay.drawRect(0,0,e.game.width,e.game.height),e._tutorialOverlay.visible=!1,e._markContainer.add(e._tutorialOverlay),e._mark=e.game.make.image(336*a.Main.SCALE,918*a.Main.SCALE,"catlas","bonusTarget_1"),e._mark.anchor.set(.5),e._mark.visible=!1,e._markContainer.add(e._mark),e._mark1=e.game.make.image(0,0,"catlas","bonusTarget_2"),e._mark1.anchor.set(.5),e._mark.addChild(e._mark1),e._mark2=e.game.make.image(0,0,"catlas","bonusTarget_2"),e._mark2.anchor.set(.5),e._mark2.alpha=0,e._mark.addChild(e._mark2),e._fakeShaiba=e.game.make.image(300*a.Main.SCALE,918*a.Main.SCALE,"catlas","shaiba0001"),e._fakeShaiba.anchor.set(.5),e._fakeShaiba.visible=!1,e._markContainer.add(e._fakeShaiba),e._currentBonusPlays=0,e._speedModif=1,e._maxShaibaDist=180*a.Main.SCALE,e._canPush=!1,e._tutorialShowed=!1,e._timeEvent=e.game.time.events.add(.5*Phaser.Timer.SECOND,function(){e.animationCircle()}),e._timeEvent.loop=!0,e._timeEvent.delay=1.5*Phaser.Timer.SECOND,e}return __extends(c,b),c.prototype.animationCircle=function(){var a=this;this._mark1.alpha=1,this._mark1.scale.x=1,this._mark1.scale.y=1,this._mark2.alpha=0,this.game.add.tween(this._mark1.scale).to({x:2,y:2},1100,Phaser.Easing.Sinusoidal.InOut,!0),this.game.add.tween(this._mark1).to({alpha:0},1100,Phaser.Easing.Sinusoidal.InOut,!0),this.game.time.events.add(.3*Phaser.Timer.SECOND,function(){a.game.add.tween(a._mark2).to({alpha:1},400,Phaser.Easing.Sinusoidal.InOut,!0)},this)},c.prototype.startBonusMode=function(b){this._currentBonusPlays=b,this._speedModif=1-.025*this._currentBonusPlays,this._maxShaibaDist=180*a.Main.SCALE-10*this._currentBonusPlays*a.Main.SCALE,a.Boot.MEDALY_TIPS&&!this._tutorialShowed&&(this._tutorialShowed=!0),a.Cockey.instance._bgMusic=a.SoundMixer.play("overtimeSound",.7,!0,!0),this._tutorialShowed?this.startNormalBonusMode():this.startFirstBonusMode()},c.prototype.startFirstBonusMode=function(){var b=this;this._tutorialOverlay.alpha=0,this._tutorialOverlay.visible=!0,this._tutorialBlueBlink=this.game.make.image(958*a.Main.SCALE,880*a.Main.SCALE,"catlas","blue"),this._tutorialBlueBlink.anchor.set(.5),this._tutorialBlueBlink.blendMode=PIXI.blendModes.ADD,this._tutorialBlueBlink.scale.set(3),this._tutorialBlueBlink.alpha=0,a.Cockey.instance.add.existing(this._tutorialBlueBlink),this._tutorialHand=this.game.make.image(1e3*a.Main.SCALE,1600*a.Main.SCALE,"catlas","newHand"),this._tutorialHand.anchor.set(.5,1),a.Cockey.instance.add.existing(this._tutorialHand),this._mark.position.x=960*a.Main.SCALE;var c=450*a.Main.SCALE*Phaser.Utils.randomChoice(-1,1);this._fakeShaiba.x=this._mark.position.x+c,this._mark.visible=!0,this._fakeShaiba.visible=!0;var d=1500*this._speedModif;this.game.add.tween(this._tutorialOverlay).to({alpha:.7},d,Phaser.Easing.Circular.Out,!0),this.game.add.tween(this._fakeShaiba).to({x:this._mark.position.x},d,Phaser.Easing.Circular.Out,!0),this._shaibaTween=this.game.add.tween(this._tutorialHand).to({x:1e3*a.Main.SCALE,y:1138*a.Main.SCALE},150,Phaser.Easing.Circular.Out,!0,d-150),this._shaibaTween.onComplete.addOnce(function(){b._shaibaTween=b.game.add.tween(b._tutorialHand.scale).to({y:.9*b._tutorialHand.scale.y},250,Phaser.Easing.Cubic.InOut,!0,0,-1,!0),b._shaibaTween.repeatDelay(350),b._tutorialSubTween=b.game.add.tween(b._tutorialBlueBlink).to({alpha:1},250,Phaser.Easing.Cubic.InOut,!0,0,-1,!0),b._tutorialSubTween.repeatDelay(350),b._canPush=!0})},c.prototype.removeTutorialShit=function(){var a=this;this.game.tweens.remove(this._tutorialSubTween),this.game.add.tween(this._tutorialOverlay).to({alpha:0},100,Phaser.Easing.Circular.Out,!0).onComplete.addOnce(function(){a._tutorialOverlay.destroy(!0)}),this.game.add.tween(this._tutorialHand).to({alpha:0},100,Phaser.Easing.Circular.Out,!0).onComplete.addOnce(function(){a._tutorialHand.destroy(!0)}),this.game.add.tween(this._tutorialBlueBlink).to({alpha:0},100,Phaser.Easing.Circular.Out,!0).onComplete.addOnce(function(){a._tutorialBlueBlink.destroy(!0)})},c.prototype.startNormalBonusMode=function(){this._mark.position.x=this.game.rnd.integerInRange(336*a.Main.SCALE,1584*a.Main.SCALE);var b=350*a.Main.SCALE*Phaser.Utils.randomChoice(-1,1);this._fakeShaiba.x=this._mark.position.x+b,this._fakeShaiba.alpha=0,this._mark.visible=!0,this._fakeShaiba.visible=!0;var c=2200*this._speedModif;this.game.add.tween(this._mark).to({alpha:1},120,Phaser.Easing.Linear.None,!0),this.game.add.tween(this._fakeShaiba).to({alpha:1},.2*c,Phaser.Easing.Sinusoidal.InOut,!0),this._shaibaTween=this.game.add.tween(this._fakeShaiba).to({x:this._mark.position.x-b},c,Phaser.Easing.Back.InOut,!0,0,-1,!0),this._canPush=!0},c.prototype.pushShaiba=function(){if(this._canPush){this._canPush=!1,this._tutorialShowed||(this._tutorialShowed=!0,a.Boot.MEDALY_TIPS=!0,this.removeTutorialShit()),this.game.tweens.remove(this._shaibaTween);var b=Math.abs(this._fakeShaiba.x-this._mark.x),c=!1;b<=this._maxShaibaDist&&(c=!0),a.Cockey.instance.pushShaibaInBonusMode(c,this._fakeShaiba,this._mark),this._fakeShaiba.visible=!1,this.game.add.tween(this._mark).to({alpha:0},150,Phaser.Easing.Sinusoidal.Out,!0,100)}},c}(b);a.BonusMark=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(c,d,e){var f=b.call(this,c.game,d,e)||this;f._baseGame=c,f._bg=f.game.make.sprite(0,0,"atlas02","endGamePlank"),f._bg.anchor.set(.5,.53),f._ssChar=f.game.make.sprite(-270,198,"atlas02","endGamePlank_bear"),f._ssChar.anchor.set(.5,1),f._bg.addChild(f._ssChar),f.addChild(f._bg),f._currentScore="",f._resultText=f.game.make.text(76,-426,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].result,{font:"GinzaNarrow-Light",fontSize:"80px",fill:"#FFFFFF",align:"center"}),f._resultText.anchor.setTo(.5),f._resultScoreText=f.game.make.text(106,-208,f._currentScore,{font:"GinzaNarrow-Heavy",fontSize:"175px",fill:"#FFFFFF",align:"center"}),f._resultScoreText.anchor.setTo(.5),f._resultScoreText.setShadow(3,3,"rgba(0,0,0,0.5)",5),f._restartBtn=new a.OButton(f.game,"atlas01",["btnStart_10001","btnStart_10002","btnStart_10003"],function(){f.hideWindow()}),f._restartBtn.x=294,f._restartBtn.y=100,f._restartBtn.anchor.set(.5);var g=f.game.add.sprite(0,0);g.scale.set(.63),g.addChild(f._restartBtn),f._gotoMenuBtn=new a.OButton(f.game,"atlas01",["btnHome_10001","btnHome_10002","btnHome_10003"],function(){f.enableDisableAll(!1),f._baseGame.gotoMenu()}),f._gotoMenuBtn.x=12,f._gotoMenuBtn.y=62,f._gotoMenuBtn.anchor.set(.5),f._gotoMenuBtn.scale.set(.95),f._ssPlank=f.game.make.sprite(-246,342),f._ssPlank.tint=0,f._ssPlank.anchor.set(.5),f._bg.addChild(f._resultText),f._bg.addChild(f._resultScoreText),f._bg.addChild(g),f._bg.addChild(f._gotoMenuBtn),f._bg.addChild(f._ssPlank),f._ssButtonsArray=[];for(var h=this,i=0;i<4;i++)!function(b){h._ssButtonsArray.push(new a.OButton(h.game,"UI_Sound_Atlas",["social000"+b,"social000"+b,"social000"+b],function(){f.showSocialShare(b)})),h._ssButtonsArray[b].anchor.set(.5),h._ssButtonsArray[b].position.set(184*b-26,20),h._ssButtonsArray[b]._defaultScale=1.15,h._ssPlank.addChild(h._ssButtonsArray[b])}(i);return f.enableDisableAll(!1),f._gameUrl=window.url,f._imgUrl=f._gameUrl+window.img_url,f._description_start=2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].competition_begin:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_begin,f._description_end=2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].competition_end:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_end,f}return __extends(c,b),c.prototype.showSocialShare=function(b){var c=+this._currentScore,d="",e="";if(c>0){var f=(c+"").substr(-1);c>0&&c<11&&(d="1"==f?2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball1:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball1:"2"==f||"3"==f||"4"==f?2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball2:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball2:2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball3:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball3),c>20?d="1"==f?2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball1:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball1:"2"==f||"3"==f||"4"==f?2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball2:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball2:2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball3:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball3:c>10&&c<21&&(d=2==a.Cockey.CURRENT_GAME_MOD?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].training_ball3:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].chalenge_ball3),e=this._description_start+" "+c+" "+d+this._description_end}else e=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].share_fall;switch(b){case 0:Share.vk(this._gameUrl,e,this._imgUrl);break;case 1:Share.fb(this._gameUrl,e,this._imgUrl);break;case 2:Share.ok(this._gameUrl,e,this._imgUrl);break;case 3:Share.tw(this._gameUrl,e,this._imgUrl)}},c.prototype.showWindow=function(a){var b=this;this._currentScore=a,this._resultScoreText.text=this._currentScore,this._ssChar.frameName=+a>9?"endGamePlank_bear":"endGamePlank_masha",this.game.add.tween(this).to({y:this.game.height/2},400,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){b.enableDisableAll(!0)})},c.prototype.enableDisableAll=function(a){this._restartBtn.enabled=a,this._gotoMenuBtn.enabled=a;for(var b=0;b<this._ssButtonsArray.length;b++)this._ssButtonsArray[b].enabled=a},c.prototype.hideWindow=function(){var a=this;this.enableDisableAll(!1),this._baseGame.whiteFlash(!0),setTimeout(function(){a.y=-a.game.height},100)},c}(Phaser.Sprite);a.EndGameWindow=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(c){var d=b.call(this,c.game,0,518*a.Main.SCALE)||this;return d._baseGame=c,d._dz=0,d._vGraph=d.game.add.graphics(-145*a.Main.SCALE,-320*a.Main.SCALE),d._vGraph.beginFill(1451565,0),d._vGraph.drawRect(0,0,290*a.Main.SCALE,320*a.Main.SCALE),d.addChild(d._vGraph),d.game.physics.arcade.enable(d),d.body.setSize(d._vGraph.width,d._vGraph.height,-d._vGraph.width/2,-d._vGraph.height),d._stepRight=d.game.make.sprite(0,0,"smoke_right","smoke-right_10001"),
d._stepRight.animations.add("loop",Phaser.Animation.generateFrameNames("smoke-right_1",1,26,"",4),30,!0),d._stepRight.anchor.set(.55,1),d._stepRight.exists=!1,d._stepLeft=d.game.make.sprite(0,0,"smoke_left","smoke-left_10001"),d._stepLeft.animations.add("loop",Phaser.Animation.generateFrameNames("smoke-left_1",1,26,"",4),30,!0),d._stepLeft.anchor.set(.55,1),d._stepLeft.exists=!1,d._hit=d.game.make.sprite(0,12*a.Main.SCALE,"smoke_hit","smoke-hit_10004"),d._hit.animations.add("loop",Phaser.Animation.generateFrameNames("smoke-hit_1",4,16,"",4),30),d._hit.animations.add("stop",["smoke-hit_10016"],0),d._hit.anchor.set(.55,1),d._hit.exists=!1,d._defense=d.game.make.sprite(-2*a.Main.SCALE,8*a.Main.SCALE,"smoke_defense","smoke-defense_10004"),d._defense.animations.add("loop",Phaser.Animation.generateFrameNames("smoke-defense_1",4,21,"",4),30),d._defense.anchor.set(.55,1),d._defense.exists=!1,d._idle=d.game.make.sprite(0,0,"smoke_idle","smoke-idle_10001"),d._idle.animations.add("loop",Phaser.Animation.generateFrameNames("smoke-idle_1",1,61,"",4),30,!0),d._idle.anchor.set(.55,1),d._idle.exists=!1,d._shadow=d.game.make.image(0,0,"catlas","bearShadow"),d._shadow.anchor.set(.5),d.addChild(d._shadow),d.addChild(d._stepRight),d.addChild(d._stepLeft),d.addChild(d._hit),d.addChild(d._defense),d.addChild(d._idle),d.step(),d}return __extends(c,b),c.prototype.update=function(){},c.prototype.canFlip=function(){return this._stepRight.exists?this._stepRight.frame%25==0:this._stepLeft.exists?this._stepLeft.frame%25==0:!!this._idle.exists&&this._idle.frame%20==0},c.prototype.canMove=function(){return 0==this._defense.exists&&0==this._hit.exists},c.prototype.nowStay=function(){return this._stepRight.exists||this._stepLeft.exists},c.prototype.closeAll=function(){this._stepRight.exists=!1,this._stepLeft.exists=!1,this._hit.exists=!1,this._defense.exists=!1,this._idle.exists=!1,this._stepRight.animations.stop(),this._stepLeft.animations.stop(),this._hit.animations.stop(),this._defense.animations.stop(),this._idle.animations.stop()},c.prototype.goal=function(a){void 0===a&&(a=!1),1!=this._idle.exists&&(this._baseGame._dir=1,this.closeAll(),this._idle.play("loop"),this._idle.exists=!0)},c.prototype.step=function(){1!=this._stepRight.exists&&1!=this._stepLeft.exists&&this.closeAll()},c.prototype.doubleStep=function(){this._baseGame._dir>0?(this._stepRight.play("loop",a.Cockey.instance.LOOP_SPEED),this._stepRight.exists=!0):(this._stepLeft.play("loop",a.Cockey.instance.LOOP_SPEED),this._stepLeft.exists=!0)},c.prototype.rotateBear=function(){this._baseGame._dir>0?(this._stepRight.play("loop",a.Cockey.instance.LOOP_SPEED),this._stepLeft.animations.stop(),this._stepLeft.exists=!1,this._stepRight.exists=!0):(this._stepLeft.play("loop",a.Cockey.instance.LOOP_SPEED),this._stepRight.animations.stop(),this._stepRight.exists=!1,this._stepLeft.exists=!0)},c.prototype.hitObj=function(a){this.hit(a)},c.prototype.hit=function(b){var c=this;if(1!=this._hit.exists&&1!=this._defense.exists){this._stepRight.exists||this._stepLeft.exists?this._endStepAnim=!0:this._idle.exists&&(this._endStepAnim=!1),this._baseGame._dir=1,this.closeAll();"hit"==(Math.abs(this.position.x-b.x)<60?"hit":"dif")?(a.SoundMixer.play(Phaser.ArrayUtils.getRandomItem(["ouch_1","ouch_2"]),.75),this._hit.play("loop").onComplete.addOnce(function(){c.goal(!0),c._endStepAnim?c._baseGame.bearGetHit()&&(c.step(),c.rotateBear(),c.step()):c.goal()}),this._hit.exists=!0):(a.Cockey.instance.playHitStickSound(a.Cockey.instance._hdKickSounds,"shaiba_hit_strongHD"),this._defense.play("loop").onComplete.addOnce(function(){c.goal(!0),c._endStepAnim?c._baseGame.bearGetHit()&&(c.step(),c.rotateBear(),c.step()):c.goal()}),this._defense.exists=!0)}},c.prototype.jump=function(){},c}(b);a.GoalKeeper=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(c){var d=b.call(this,c,0,0,"catlas","shaiba0001")||this;return d._shaibaShadow=c.make.image(0,0,"catlas","shaibaSh"),d._shaibaShadow.anchor.set(.5),a.Cockey.instance.shadowContainer().add(d._shaibaShadow),d.animations.add("idle",["shaiba0001"]),d.animations.add("fly",Phaser.Animation.generateFrameNames("shaiba",2,5,"",4),20,!0),d.anchor.set(.5),d.game.physics.arcade.enable(d),d.body.setCircle(30*a.Main.SCALE,.25*d.width,.25*d.height),d.body.immovable=!0,d.depth=0,d.init(),d}return __extends(c,b),c.prototype.init=function(){this._speed=0,this._punch=!1,this._punchDir=0,this.exists=!0,this.scale.set(1,1),this._barrierHit=!1,this._goal=!1,this._onGround=!0,this._dz=0,this._zgravity=0,this.depth=0,this._stop=!1,this.y=a.Cockey.SHAIBA_POS_Y,this._realShaibaY=this.y,this._shaibaZ=0,this.x=a.Cockey.SHAIBA_POS_X[this.game.rnd.integerInRange(0,2)],this._shaibaShadow.position.set(this.x,this.y),this._shaibaShadow.alpha=1,this._shaibaShadow.exists=!0,this.play("idle"),this._shaibaShadow.exists=!1,this.alpha=0,this.game.add.tween(this).to({alpha:1},300).start()},c.prototype.free=function(b){var c=this;void 0===b&&(b=!1),a.Cockey.instance.DEL_SHAIBA(this),b?(this.exists=!1,this._shaibaShadow.exists=!1):this.game.add.tween(this).to({alpha:0},200).start().onComplete.addOnce(function(){c.exists=!1,c._shaibaShadow.exists=!1})},c.prototype.update=function(){var b=this;if(!this.isFree&&!this._stop){var c=1-(this._realShaibaY-a.Cockey.SHAIBA_POS_Y)/a.Cockey.HEIGHT_SHAIBA_FIELD*a.Cockey.SHAIBA_SCALE_FINISH;this.scale.set(c,c),this.x+=Math.cos(this._punchDir)*this._speed,this._realShaibaY+=Math.sin(this._punchDir)*this._speed,this.depth=this._realShaibaY,this._shaibaZ+=this._dz,this._dz-=this._zgravity,this._shaibaShadow.position.set(this.x,this._realShaibaY);var d=this._shaibaZ/(270*a.Main.SCALE),e=1.1+.5*d;this._shaibaShadow.scale.set(c*e,c*e),this._shaibaShadow.alpha=1-.5*d,this._realShaibaY<=a.Cockey.SHAIBA_POS_FINISH_Y&&(this._realShaibaY=a.Cockey.SHAIBA_POS_FINISH_Y+1,this._punchDir*=-1,this._speed*=.4,a.Cockey.instance.playHitStickSound(a.Cockey.instance._hitGameSounds,"hitGame_"),this._barrierHit=!0),this.y=this._realShaibaY-this._shaibaZ,0==this._goal&&(this._punch&&Math.abs(this._speed)<.2||0==this.inBox(this.x,this._realShaibaY,this.game.width,this.game.height,this.width,this.height))&&(a.Cockey.instance.MIMO(),this._stop=!0,setTimeout(function(){b.free()},500)),this._speed*=0==this._shaibaZ?.94:.97,this._shaibaZ<=0&&(this._shaibaZ=0,this.play("idle"),this._shaibaShadow.exists&&a.Cockey.instance.playHitStickSound(a.Cockey.instance._shaibaFallSounds,"shaibaFall_",5,.45),this._shaibaShadow.exists=!1,this._dz=0,this._zgravity=0,1==this._goal&&(a.Cockey.instance.GOAL(),this._stop=!0,setTimeout(function(){b.free()},500)))}},c.prototype.push=function(b,c){if(!(this._punch||this.isFree||this._stop)){var d=Math.sqrt(b*b+c*c);this._punchDir=Math.atan2(c,b),this._oldDir=this._punchDir;var e=Math.min(d,a.Cockey.SWAP_DIST)/a.Cockey.SWAP_DIST;return!(e<.05)&&(this._speed=a.Cockey.SHAIBA_MAX_SPEED*e,e>.4&&(this.play("fly"),this._shaibaShadow.exists=!0,this._dz=a.Cockey.MAX_Z_VEL*e,this._zgravity=a.Cockey.GRAVITATION),this._punch=!0,this._onGround=!1,a.Cockey.instance.playHitStickSound(a.Cockey.instance._hdKickSounds,"shaiba_hit_strongHD"),!0)}},c.prototype.pushStop=function(){if(!this.isBarrierHit&&!this.isGoal){this.game.camera.shake(.0035,150),this._punchDir*=-1,this._speed*=.1,this._goal=!0,this._shaibaShadow.alpha=0;var b=this._realShaibaY-500*a.Main.SCALE,c=this._shaibaZ;this._shaibaZ-=b,c<=0&&(this._shaibaZ=0),this._realShaibaY=500*a.Main.SCALE}},c.prototype.barierStop=function(a){if(!this.isBarrierHit&&!this.isGoal){this._punchDir*=-1,this._speed*=.15,this._barrierHit=!0,this._shaibaShadow.alpha=0;var b=this._realShaibaY-a.y,c=this._shaibaZ;this._shaibaZ-=b,c<=0&&(this._shaibaZ=0),this._realShaibaY=a.y}},c.prototype.inBox=function(a,b,c,d,e,f){void 0===e&&(e=0),void 0===f&&(f=0);var g=a-e,h=a+e,i=b-f,j=b+f;return!(h<0||j<0)&&!(g>c||i>d)},Object.defineProperty(c.prototype,"isBarrierHit",{get:function(){return this._barrierHit},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isGoal",{get:function(){return this._goal},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isFree",{get:function(){return 0==this.exists},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"isTrueDir",{get:function(){return this._oldDir==this._punchDir},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"canHit",{get:function(){return!this.isFree&&(!this.isGoal&&(!this.isBarrierHit&&0==this._stop))},enumerable:!0,configurable:!0}),c}(b);a.Shaiba=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(a){function b(b){var c=a.call(this,b,0,0)||this;return c._visual=b.make.sprite(0,0,"hk_masha_min"),c.addChild(c._visual),c}return __extends(b,a),b}(b);a.HockHero=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=Phaser.Sprite,c=function(b){function c(c,d){var e=b.call(this,c,0,0)||this;e._black=e.game.make.graphics(0,0),e._black.beginFill(0,.4),e._black.drawRect(0,0,c.width,c.height),e._black.endFill(),e._black.inputEnabled=!0,e._popbg=c.make.image(e.game.world.centerX,e.game.world.centerY,"ui","plahaEndScreen"),e._popbg.anchor.set(.5),e._avatar=c.make.image(-160*a.Main.SCALE,4.7*a.Main.SCALE,"ui","avatarpopup0002"),e._avatar.anchor.set(.5),e._caption=e.game.add.text(0,-280*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].result,{font:"BubbleboddyNeue-Regular",fontSize:72*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff"}),e._caption.wordWrap=!0,e._caption.align="center",e._caption.anchor.set(.5),e._score=e.game.add.text(100*a.Main.SCALE,-50*a.Main.SCALE,"10",{font:"BubbleboddyNeue-Regular",fontSize:150*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff"}),e._score.wordWrap=!0,e._score.align="center",e._score.anchor.set(.5),e._home=new a.OButton(e.game,"ui",["btnHomeEndScreen","btnHomeEndScreen"],function(){a.SoundMixer.bgStop(),e.game.state.start("MainMenu",!0)}),e._home.position.set(-60*a.Main.SCALE,330*a.Main.SCALE),e._replay=new a.OButton(e.game,"ui",["playpopup","playpopup"],function(){d&&d()}),e._replay.position.set(122*a.Main.SCALE,325*a.Main.SCALE),e._soc=[];for(var f=this,g=0;g<4;g++)!function(b){f._soc[b]=new a.OButton(f.game,"ui",["social000"+(b+1)],function(){e.showSocialShare(b)}),f._soc[b].position.set(350*a.Main.SCALE,-290*a.Main.SCALE+140*a.Main.SCALE*b),f._popbg.addChild(f._soc[b])}(g);return e._gameUrl=window["game-share-url"],e._imgUrl=window["game-share-img-url "+a.Boot.CURRENT_LANGUAGE.curLng],e._imgUrl=e._imgUrl?e._imgUrl:window["game-share-img-url"],e.addChild(e._black),e.addChild(e._popbg),e._popbg.addChild(e._avatar),e._popbg.addChild(e._caption),e._popbg.addChild(e._score),e._popbg.addChild(e._home),e._popbg.addChild(e._replay),e.exists=!1,e}return __extends(c,b),c.prototype.showSocialShare=function(b){var c=this._currentScore,d="",e="",f="shareScore",g="shareScore",h="shareScore",i="shareBegin",j="shareEnd",k="shareBadScore";if(1==a.MainMenu.CURRENT_GAME_START?(f+="MedalA",g+="MedalB",h+="MedalC",i+="Medal",j+="Medal",k+="Medal"):(f+="ShaibaA",g+="ShaibaB",h+="ShaibaC",i+="Shaiba",j+="Shaiba",k+="Shaiba"),c>0){var l=(c+"").substr(-1);"ru"==a.Boot.CURRENT_LANGUAGE.curLng?(c>0&&c<11&&(d="1"==l?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][f]:"2"==l||"3"==l||"4"==l?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][g]:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][h]),c>20?d="1"==l?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][f]:"2"==l||"3"==l||"4"==l?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][g]:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][h]:c>10&&c<21&&(d=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][h])):d=1==c?a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][f]:a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][g],e=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][i]+c+" "+d+a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][j]}else e=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng][k];switch(b){case 0:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:VK",1),Share.vk(this._gameUrl,e,this._imgUrl);break;case 1:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:OK",1),Share.ok(this._gameUrl,e,this._imgUrl);break;case 2:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:FB",1),Share.fb(this._gameUrl,e,this._imgUrl);break;case 3:gameanalytics.GameAnalytics.addDesignEvent("Game:Sharing:TW",1),Share.tw(this._gameUrl,e,this._imgUrl)}},c.prototype.show=function(a,b,c){void 0===c&&(c=!1),this.exists=!0,this._currentScore=a,this._score.text=""+a;for(var d=0;d<4;d++)this._soc[d].alpha=0,this._soc[d].scale.set(.2,.2),this.game.add.tween(this._soc[d]).to({alpha:1},100,Phaser.Easing.Linear.None,!0,600),this.game.add.tween(this._soc[d].scale).to({x:1,y:1},250+80*d,Phaser.Easing.Back.Out,!0,600);this._popbg.y=.5*-this._popbg.height,this._popbg.alpha=0,this.game.add.tween(this._popbg).to({alpha:1},500,Phaser.Easing.Linear.None,!0),this.game.add.tween(this._popbg).to({y:this.game.world.centerY},500,Phaser.Easing.Back.Out,!0),this._black.alpha=0,this.game.add.tween(this._black).to({alpha:1},100,Phaser.Easing.Linear.None,!0)},c.prototype.hide=function(){var a=this;this.game.add.tween(this._black).to({alpha:0},100,Phaser.Easing.Linear.None,!0),this.game.add.tween(this._popbg).to({alpha:0},200,Phaser.Easing.Linear.None,!0),this.game.add.tween(this._popbg).to({y:.5*-this._popbg.height},200,Phaser.Easing.Back.In,!0).onComplete.addOnce(function(){a.exists=!1})},Object.defineProperty(c.prototype,"isShowed",{get:function(){return this.exists},enumerable:!0,configurable:!0}),c}(b);a.Popup=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d){var e=a.call(this,b.game,c,d)||this;return e._visual=e.game.make.sprite(0,0,"catlas","star"),e._visual.anchor.set(.5),e._visual.scale.set(.5,.5),e._rotationSpeed=e.game.rnd.integerInRange(2.8,7.5),e.addChild(e._visual),e}return __extends(b,a),b.prototype.update=function(){this.angle+=this._rotationSpeed},b}(Phaser.Sprite);a.StarParticle=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a.enableDrag=function(a){a.inputEnabled=!0,a.input.enableDrag(),a.events.onDragUpdate.add(function(){console.log(a.x+","+a.y)},this)},a.degreesToRad=function(a){return a*Math.PI/180},a.MAP_COLS=9,a.MAP_ROWS=6,a.BLOCK_SIZE=80,a.TELEPORTATION_FRAMERATE=24,a.REVERSE_FRAMERATE=24,a.PLAYER_SPEED_X=100,a.PINGUIN_SPAWN_TIME=2,a.PINGUIN_SPEED=75,a.MAGIC_SPEED=240,a.PLAYER_SPPED_Y=400,a.playMusic=!0,a.WIDTH=720,a.HEIGHT=480,a}();a.GameConfig=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a._loadedAssets=!1,a._loadedFont=!1,a}return __extends(c,b),c.prototype.preload=function(){this._beginTime=performance.now(),this.game.load.onFileComplete.add(this.loadingUpdate,this),this.add.image(0,0,"preload","bg"),this._mm=this.add.image(this.world.centerX,this.world.centerY,"preload","mashaPreloader"),this._mm.x-=Math.round(.5*this._mm.width),this._mm.y-=Math.round(.5*this._mm.height);var b=this.add.image(Math.round(this.world.centerX),Math.round(1050*a.Main.SCALE),"preload","copyright000"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?1:2));b.x-=Math.round(.5*b.width),b.y-=Math.round(.5*b.height),this._logo=this.add.image(this.world.centerX,135*a.Main.SCALE,"preload","mmLogo_"+a.Boot.CURRENT_LANGUAGE.curLng),this._logo.anchor.set(.5),this._footer=this.add.image(this.world.centerX,this.world.centerY+350*a.Main.SCALE,"preload","pbg"),this._footer.anchor.set(.5),this._loading=this.add.image(this._footer.x,this._footer.y,"preload","pfg"),this._loading.anchor.set(.5),this._loadingMask=this.add.graphics(.5*-this._loading.width-2*a.Main.SCALE,.5*-this._loading.height-2*a.Main.SCALE),this._loadingMask.beginFill(16711680,.5),this._loadingMask.drawRect(0,0,this._footer.width-5*a.Main.SCALE,this._footer.height-5*a.Main.SCALE),this._loadingMask.endFill(),this._loading.addChild(this._loadingMask),this._loading.mask=this._loadingMask,this._loadingMask.scale.x=0,this._loadedAssets=!0,this._loadedFont=!0,this._logo.y=0,this._logo.alpha=0,this.add.tween(this._logo).to({alpha:1,y:135*a.Main.SCALE},400,Phaser.Easing.Quadratic.Out,!0),gameanalytics.GameAnalytics.setEnabledInfoLog(!1),gameanalytics.GameAnalytics.setEnabledVerboseLog(!1),gameanalytics.GameAnalytics.configureBuild("masha hockey 1.0.0"),gameanalytics.GameAnalytics.initialize("ad5687d80a23957171e7c0046dbaee20","b9d9359addde4ddcb4a5155dec3262878beedb40"),this.loading()},c.prototype.loading=function(){},c.prototype.end=function(){},c.prototype.loadSounds=function(b,c){if(void 0===c&&(c="mp3"),null!=b&&0!=b.length)for(var d=0;d<b.length;d++)this.game.load.audio(name,a.Boot.PATH_SOUNDS+name+"."+c,!0)},c.prototype.loadAudiosprite=function(b){void 0===b&&(b="sfx"),this.game.load.audiosprite(b,[a.Boot.PATH_SOUNDS+b+".mp3",a.Boot.PATH_SOUNDS+b+".ogg"],a.Boot.PATH_SOUNDS+b+".json")},c.prototype.loadFonts=function(b,c,d){var e=this;void 0===c&&(c="styles"),null!=b&&0!=b.length&&a.System.loadFonts(b,c+".css",function(){e._loadedFont=!0,d&&d()})},c.prototype.loadAtlases=function(b,c){if(void 0===c&&(c="png"),null!=b&&0!=b.length){for(var d=0;d<b.length;d++){var e=b[d].split("/").pop(),f=(1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X)+b[d];this.game.load.atlas(e,f+"."+c,f+".json")}this._loadedAssets=!1}},c.prototype.loadImages=function(b,c){if(void 0===c&&(c="png"),null!=b&&0!=b.length){for(var d=0;d<b.length;d++){var e=b[d].split("/").pop(),f=(1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X)+b[d];this.game.load.image(e,f+"."+c)}this._loadedAssets=!1}},c.prototype.loadAtlas=function(b,c){c=c?(1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X)+c:1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X;var d=c+b;this.game.load.atlas(b,d+".png",d+".json"),this._loadedAssets=!1},c.prototype.loadImage=function(b,c){c=c?(1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X)+c:1==a.Main.SCALE?a.Boot.PATH_IMAGES:a.Boot.PATH_IMAGES1X;var d=c+b;this.game.load.atlas(b,d+".png",d+".json"),this._loadedAssets=!1},c.prototype.shutdown=function(){this._loading.destroy(),this._loading=null,this._footer.destroy(),this._footer=null,this._loadingMask.destroy(),this._loadingMask=null},c.prototype.loadingUpdate=function(a,b,c,d,e){if(this._loadingMask.scale.x=a/100,a>=100){this.game.load.onFileComplete.removeAll();var f=.001*(performance.now()-this._beginTime);f<=2?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 2 sec",1):f>2&&f<=5?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 5 sec",1):f>5&&f<=10?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 10 sec",1):f>10&&f<=15?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 15 sec",1):f>15&&f<=30?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 30 sec",1):f>30&&f<=60?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 1 min",1):f>60&&f<=120?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 2 min",1):f>120&&f<=180?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 3 min",1):f>180&&f<=300?gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:less 5 min",1):gameanalytics.GameAnalytics.addDesignEvent("Game:LoadTime:more 5 min",1),this._loadedAssets=!0}},c.prototype.update=function(){var b=this;this._loadedAssets&&this._loadedFont&&(this._loadedAssets=!1,this.end(),setTimeout(function(){b.game.state.start(a.LocalConfig.CURRENT_STATE,!0)},400),this.add.tween(this._logo).to({alpha:0},350,Phaser.Easing.Quadratic.In,!0),this.add.tween(this._mm).to({alpha:0},350,Phaser.Easing.Quadratic.In,!0),this.add.tween(this._footer).to({alpha:0},350,Phaser.Easing.Quadratic.In,!0),this.add.tween(this._loading).to({alpha:0},350,Phaser.Easing.Quadratic.In,!0),this.add.tween(this._logo.scale).to({x:1.02,y:1.02},350,Phaser.Easing.Quadratic.In,!0))},c}(Phaser.State);a.BasePreloader=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this._x=a,this._y=b}return a.prototype.rotate=function(b,c,d){void 0===c&&(c=0),void 0===d&&(d=0);var e=new a;return e.x=(this.x-c)*Math.cos(b)-(this.y-d)*Math.sin(b)+c,e.y=(this.y-d)*Math.cos(b)+(this.x-c)*Math.sin(b)+d,e},a.prototype.rotateX=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=0),(this.x-b)*Math.cos(a)-(this.y-c)*Math.sin(a)+b},a.prototype.rotateY=function(a,b,c){return void 0===b&&(b=0),void 0===c&&(c=0),(this.y-c)*Math.cos(a)+(this.x-b)*Math.sin(a)+c},Object.defineProperty(a.prototype,"x",{get:function(){return this._x},set:function(a){this._x=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this._y},set:function(a){this._y=a},enumerable:!0,configurable:!0}),a}();a.MPoint=b;var c=function(){function a(a){void 0===a&&(a=null),this.mirror=1,this.setPoints(a),this.x=0,this.y=0,this.cx=0,this.cy=0,this.angle=0}return a.prototype.setPoints=function(a){if(null!=a){this._points=[];for(var c=0;c<.5*a.length;c++)this._points.push(new b(a[2*c],a[2*c+1]))}},a.prototype.setBox=function(a,c){var d=.5*a,e=.5*c;this._points=[],this._points.push(new b(-d,-e)),this._points.push(new b(d,-e)),this._points.push(new b(d,e)),this._points.push(new b(-d,e))},Object.defineProperty(a.prototype,"error",{get:function(){return null==this._points},enumerable:!0,configurable:!0}),a.prototype.contains=function(a,b){for(var c=this._points.length,d=0;d<c;d++){var e=d<c-1?d+1:0;if((this.pointX(e)-this.pointX(d))*(this.pointY(e)-b)-(this.pointX(e)-a)*(this.pointY(e)-this.pointY(d))>0)return!1}return!0},a.prototype.hit=function(a){for(var b=0;b<a.length;b++)if(this.contains(a.pointX(b),a.pointY(b)))return!0;for(var b=0;b<this.length;b++)if(a.contains(this.pointX(b),this.pointY(b)))return!0;return!1},a.prototype.pointX=function(a){return 1*this._points[a].rotateX(this.angle,this.cx,this.cy)+this.x*this.mirror+(this.parent?this.parent.x:0)},a.prototype.pointY=function(a){return 1*this._points[a].rotateY(this.angle,this.cx,this.cy)+this.y+(this.parent?this.parent.y:0)},a.prototype.debugDraw=function(a){a.lineStyle(.1,65280),a.beginFill(65280,.3);var b=this._points.length;b>1&&a.moveTo(this.pointX(0),this.pointY(0));for(var c=1;c<b;c++)a.lineTo(this.pointX(c),this.pointY(c));b>1&&a.lineTo(this.pointX(0),this.pointY(0)),a.endFill()},Object.defineProperty(a.prototype,"length",{get:function(){return this._points.length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angle",{get:function(){return 1==this.mirror?this._angle:0==this._angle?0:Math.PI-this._angle},set:function(a){this._angle=a},enumerable:!0,configurable:!0}),a}();a.MPolygon=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e,f){void 0===e&&(e=null),void 0===f&&(f=null);var g=this,h=null,i=null,j=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),g=a.call(this,b,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j],g.soundOver="over",g.soundDown="click",g.anchor.setTo(.5),g._cb=e,g._upcb=f,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(b,a),b.prototype.setCBContext=function(a){this._cntxt=a},b.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},b.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0},b.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},b.prototype.up=function(){var a=this;if(this._isDown){null!=this._upcb&&(this._cntxt?this._upcb.bind(this._cntxt)(this.id):this._upcb(this.id)),this.scale.set(this._isOver?this._defaultScale+this._deltaScale:this._defaultScale);var b=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:b&&setTimeout(function(){a.frameName=a._framesString[0]},5),this._isDown=!1,b&&null!=this._cb?(null==this._upcb&&(this._cntxt?this._cb.bind(this._cntxt)(this.id):this._cb(this.id)),this.frameName=this._framesString[0]):0==b&&this.scale.set(this._defaultScale)}},b.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0,null!=this._upcb&&(this._cntxt?this._cb.bind(this._cntxt)(this.id):this._cb(this.id)))},b.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(b.prototype,"enabled",{set:function(a){this.inputEnabled=a,a||(this.frameName=this._framesString[0],this.scale.set(this._defaultScale))},enumerable:!0,configurable:!0}),b}(Phaser.Button);a.OButton2=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(a){function b(b,c,d,e){void 0===d&&(d=0);var f=a.call(this,b,0,0)||this;return b.world.add(f),f._images=[],f._images.push(new Phaser.Image(b,d,0,c,e)),f._imgWidth=f._images[0].width,f._images.push(new Phaser.Image(b,d+f._imgWidth-1,0,c,e)),f.addChild(f._images[0]),f.addChild(f._images[1]),f}return __extends(b,a),b.prototype.updateScroll=function(a){this._images[0].x-=a,this._images[1].x-=a,this._images[0].x<=-this._imgWidth&&(this._images[0].x=this._images[1].x+this._imgWidth-1),this._images[1].x<=-this._imgWidth&&(this._images[1].x=this._images[0].x+this._imgWidth-1)},b.prototype.free=function(){this.removeChild(this._images[0]),this.removeChild(this._images[1]),this._images.pop().destroy(!0),this._images.pop().destroy(!0),this._images=null},b.prototype.setPosition=function(a){this._images[0].x=a,this._images[1].x=a+this._imgWidth-1},b}(Phaser.Sprite);a.ParallaxImage=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){}return b.loadFonts=function(b,c,d){WebFont.load({custom:{families:b,urls:[a.Boot.PATH_FONTS+c]},active:function(){window.setTimeout(function(){null!=d&&d()},100)}})},b}();a.System=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(){}return a.setProperty=function(a,b){document.cookie=a+"="+b},a.setData=function(a,b){document.cookie=a+"="+JSON.stringify(b)},a.getProperty=function(a){var b=document.cookie.match(new RegExp("(?:^|; )"+a.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return b?decodeURIComponent(b[1]):null},a.getData=function(a){var b=this.getProperty(a);return null==b?null:JSON.parse(b)},a}();a.CookieSave=b}(TProject||(TProject={}));var TProject;!function(a){var b;!function(a){a.RUSSIAN="ru",a.ENGLISH="en",a.DEUTSCH="de",a.FRENCH="fr",a.ITALIAN="it",a.PORTUG="pt",a.SPANISH="es",a.POLISH="pl"}(b=a.GAME_LANGUAGE||(a.GAME_LANGUAGE={}));var c=function(){function c(c){this.DEFAULT_LNG=b.ENGLISH,null!=c&&this.inLanguage(c)?this._lng=c:(this._lng=a.CookieSave.getProperty("game_language"),null==this._lng&&(this._lng=this.brouserLng)),this.inLanguage(this._lng)||(this._lng=this.DEFAULT_LNG),console.log("Current lng:",this._lng)}return c.prototype.inLanguage=function(a){for(var c in b)if(b[c]==a)return!0;return!1},c.prototype.getIndexLanguage=function(a){var c=0;for(var d in b){if(b[d]==a)return c;c++}return 0},c.prototype.getNameLanguage=function(a){var c=0;for(var d in b){if(c==a)return b[d];c++}return this.DEFAULT_LNG},c.prototype.setLng=function(b){this._lng=b,a.CookieSave.setProperty("game_language",this._lng),console.log("Current lng:",this._lng)},Object.defineProperty(c.prototype,"curLng",{get:function(){return this._lng},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"currentIndex",{get:function(){return this.getIndexLanguage(this._lng)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"brouserLng",{get:function(){var a=navigator.language||navigator.browserLanguage;return null==a?this.DEFAULT_LNG:2==a.length?a:a.substr(0,2)},enumerable:!0,configurable:!0}),c}();a.LngSelector=c}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===e&&(e=null),void 0===f&&(f=!1);var g=this,h=null,i=null,j=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j],g.soundOver="Over",g.soundDown="Click",g.anchor.setTo(.5),g._cb=e,g._deltaScale=.05,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g._invert=f,g._invert?g.scale.set(-g._defaultScale,g._defaultScale):g.scale.set(g._defaultScale),g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.setNewFrames=function(a){var b=null,c=null,d=null;a.length>0&&(b=a[0],a.length>1?(c=a[1],d=a.length>2?a[2]:a[0]):(c=a[0],d=a[0])),this._framesString=[b,c,d],this.setFrames(c,b,d)},c.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0,a.SoundMixer.play(this.soundOver,1.2)},c.prototype.out=function(){this._isDown||(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale)),this._isOver=!1},c.prototype.up=function(){var b=this
;if(this._isDown){this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale);var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:c&&setTimeout(function(){b.frameName=b._framesString[0]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.play(this.soundDown,1),this._cntxt?this._cb.bind(this._cntxt)(this):this._cb(this),this.frameName=this._framesString[0]):0==c&&(this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))}},c.prototype.down=function(){this._isDown||(this._invert?this.scale.set(-(this._defaultScale-this._deltaScale),this._defaultScale-this._deltaScale):this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){this.inputEnabled=a,a||(this.frameName=this._framesString[0],this._invert?this.scale.set(-this._defaultScale,this._defaultScale):this.scale.set(this._defaultScale))},enumerable:!0,configurable:!0}),c.prototype.createStableContainer=function(){this.stableContainer=this.game.make.sprite(0,0),this.addChild(this.stableContainer)},c.prototype.update=function(){this.stableContainer&&(this.stableContainer.angle=-this.angle)},c}(Phaser.Button);a.OButton=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===e&&(e=null),void 0===f&&(f=0);var g=this,h=null,i=null,j=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j],g.soundOver="Over",g.soundDown="Click",g.anchor.setTo(.5),g._cb=e,g._deltaScale=.1,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g._defaultAngle=0,g._angleNew=f,g.scale.set(g._defaultScale),g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setDefaultAngle=function(a){this._defaultAngle=a,this.angle=this._defaultAngle},c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.setNewFrames=function(a){var b=null,c=null,d=null;a.length>0&&(b=a[0],a.length>1?(c=a[1],d=a.length>2?a[2]:a[0]):(c=a[0],d=a[0])),this._framesString=[b,c,d],this.setFrames(c,b,d)},c.prototype.over=function(){this._isDown||(this.angle=this._angleNew),this._isOver=!0,a.SoundMixer.play(this.soundOver,1.2)},c.prototype.out=function(){this._isDown||(this.angle=this._defaultAngle),this._isOver=!1},c.prototype.up=function(){var b=this;if(this._isDown){this.angle=this._defaultAngle;var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1]:c&&setTimeout(function(){b.frameName=b._framesString[0]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.play(this.soundDown,1),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[0]):0==c&&(this.angle=this._defaultAngle)}},c.prototype.down=function(){this._isDown||(this.angle=this._angleNew,this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){this.inputEnabled=a,a||(this.frameName=this._framesString[0],this.angle=this._defaultAngle)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.ObuttonAngle=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(a,c,d,e,f){void 0===f&&(f=null);var g=this,h=null,i=null,j=null,k=null,l=null,m=null;return d.length>0&&(h=d[0],d.length>1?(i=d[1],j=d.length>2?d[2]:d[0]):(i=d[0],j=d[0])),e.length>0&&(k=e[0],e.length>1?(l=e[1],m=e.length>2?e[2]:e[0]):(l=e[0],m=e[0])),g=b.call(this,a,0,0,c,null,null,i,h,j,null)||this,g._framesString=[h,i,j,k,l,m],g._check=!0,g.soundOver="Over",g.soundDown="Click",g.anchor.setTo(.5),g._cb=f,g._deltaScale=.05,g._defaultScale=1,g._isDown=!1,g._isOver=!1,g.onInputOver.add(g.over,g),g.onInputOut.add(g.out,g),g.onInputDown.add(g.down,g),g.onInputUp.add(g.up,g),g}return __extends(c,b),c.prototype.setCheck=function(a){if(this._check!=a){this._check=a;var b=0;a||(b=3),this.setFrames(this._framesString[b+1],this._framesString[b],this._framesString[b+2],this._framesString[b])}},Object.defineProperty(c.prototype,"check",{get:function(){return this._check},enumerable:!0,configurable:!0}),c.prototype.setCBContext=function(a){this._cntxt=a},c.prototype.setAnimationScale=function(a,b){void 0===a&&(a=0),void 0===b&&(b=1),this._deltaScale=a,this._defaultScale=b},c.prototype.over=function(){this._isDown||this.scale.set(this._defaultScale+this._deltaScale),this._isOver=!0,a.SoundMixer.play(this.soundOver,1.2)},c.prototype.out=function(){this._isDown||this.scale.set(this._defaultScale),this._isOver=!1},c.prototype.up=function(){var b=this;if(this._isDown){this.scale.set(this._defaultScale);var c=this.game.device.desktop?this._isOver:this.input.pointerOver();this._isOver?this.frameName=this._framesString[1+(this._check?0:3)]:c&&setTimeout(function(){b.frameName=b._framesString[b._check?0:3]},5),this._isDown=!1,c&&null!=this._cb?(a.SoundMixer.play(this.soundDown,1),this.setCheck(!this.check),this._cntxt?this._cb.bind(this._cntxt)():this._cb(),this.frameName=this._framesString[this._check?0:3]):0==c&&this.scale.set(this._defaultScale)}},c.prototype.down=function(){this._isDown||(this.scale.set(this._defaultScale-this._deltaScale),this._isDown=!0)},c.prototype.deleteFromParent=function(){this.parent&&this.parent.removeChild(this),this.onInputOver.remove(this.over,this),this.onInputOut.remove(this.out,this),this.onInputDown.remove(this.down,this),this.onInputUp.remove(this.up,this)},Object.defineProperty(c.prototype,"enabled",{set:function(a){var b=this;this.inputEnabled=a,a||setTimeout(function(){b.frameName=b._framesString[b._check?0:3],b.scale.set(b._defaultScale)},5)},enumerable:!0,configurable:!0}),c}(Phaser.Button);a.OButtonCheck=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function a(a){this._overlayVisible=!1,this._game=a,this.isIphone&&this.setupScrollOverlay()}return Object.defineProperty(a.prototype,"checkFullScreen",{get:function(){return screenfull.enabled},enumerable:!0,configurable:!0}),a.prototype.toggleFullScreen=function(){screenfull.toggle(this._game.canvas)},a.prototype.start=function(){var a=this;0!=this.isIphone&&1==window["iphone-scroll-overlay"]&&(setTimeout(function(){a.toggleOverlay()},500),window.addEventListener("resize",this.checkScreenStatus.bind(this),!1),this._game.scale.onOrientationChange.add(this.checkScreenStatus,this),document.body.addEventListener("touchend",this.checkScreenStatus.bind(this),!1))},a.prototype.checkScreenStatus=function(){this.toggleOverlay()},a.prototype.setupScrollOverlay=function(){this._scrollOverlay=document.createElement("div"),this._scrollOverlay.className="scrollup",this._scrollOverlay.setAttribute("id","scrollup"),this._scrollOverlay.style.height="1000000px",this._scrollOverlay.style.display="none",this._animationContainer=document.createElement("div"),this._game.scale.isLandscape&&this.isIphone6PlusStandardMode&&(this._animationContainer.style.position="absolute"),this._animationContainer.className="scrollAnimationContainer iOS_scrollup_uri",this._animationContainer.style.visibility="hidden",document.body.appendChild(this._animationContainer),document.body.appendChild(this._scrollOverlay)},a.prototype.resetGamePosition=function(){this._removeOverlayTimeout&&window.clearTimeout(this._removeOverlayTimeout),this._removeOverlayTimeout=window.setTimeout(function(){window.scrollTo(0,0),document.getElementById("scrollup").scrollTo(0,0)},300)},a.prototype.removeOverlay=function(){this.resetGamePosition(),this._overlayVisible&&(this._scrollOverlay.style.display="none",this._animationContainer.style.visibility="hidden",this._overlayVisible=!1,this._game.scale.isLandscape&&this.isIphone5Or5sOr5c,window.needPreventDefault=!0)},a.prototype.eventPreventDefault=function(a){a.preventDefault()},a.prototype.showOverlay=function(){this._overlayVisible||(window.needPreventDefault=!1,this._scrollOverlay.style.display="block",this._animationContainer.style.visibility="visible",this._overlayVisible=!0)},a.prototype.isFullscreen=function(){var a=this.getRealScreenSize();return a.height===window.innerHeight||window.innerHeight/a.height>=.9},a.prototype.getRealScreenSize=function(){var a,b;return this._game.device.desktop?this.getInnerScreenSize():(this._game.scale.isPortrait?(a=Math.min(window.screen.width,window.screen.height),b=Math.max(window.screen.width,window.screen.height)):(a=Math.max(window.screen.width,window.screen.height),b=Math.min(window.screen.width,window.screen.height)),{width:a,height:b})},a.prototype.getInnerScreenSize=function(){return{width:window.innerWidth,height:window.innerHeight}},a.prototype.toggleOverlay=function(){document.documentElement.style.paddingBottom="79px",this._game.scale.isLandscape&&this.isIphone6PlusStandardMode&&(document.documentElement.style.paddingBottom=""),this.isFullscreen()?this.removeOverlay():this.showOverlay()},Object.defineProperty(a.prototype,"isIphone6PlusStandardMode",{get:function(){return!!this.isIphone&&"6+"==this.iPhoneVersion()},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isIphone5Or5sOr5c",{get:function(){return!!this.isIphone&&"5"==this.iPhoneVersion()},enumerable:!0,configurable:!0}),a.prototype.iPhoneVersion=function(){var a=window.screen.height,b=window.screen.width;return 320===b&&480===a?"4":375===b&&667===a?"6":414===b&&736===a?"6+":320===b&&568===a?"5":a<=480?"2-3":"none"},Object.defineProperty(a.prototype,"isIphone",{get:function(){return!!navigator.userAgent.match(/iPhone/i)||this._game.device.iPhone},enumerable:!0,configurable:!0}),a}();a.ScrollOverlay=b}(TProject||(TProject={}));var Share;!function(a){function b(b,c,d){var e="http://vkontakte.ru/share.php?";e+="url="+encodeURIComponent(b),e+="&title="+encodeURIComponent(c),e+="&image="+encodeURIComponent(d),e+="&noparse=true",a.openUrl(e)}function c(b,c,d){var e="https://connect.ok.ru/offer?";e+="url="+encodeURIComponent(b),e+="&title=&description="+encodeURIComponent(c),e+="&imageUrl="+encodeURIComponent(d),a.openUrl(e)}function d(b,c,d){if(0!=window["use-share-api"])window.facebookShare(b,c);else{var e="https://www.facebook.com/sharer.php?u=";e+="&p[quote]="+encodeURIComponent(c),e+="&p[url]="+encodeURIComponent(b),e+="&p[images][0]="+d,a.openUrl(e)}}function e(b,c,d){var e="http://twitter.com/share?";e+="text="+encodeURIComponent(c),e+="&url="+encodeURIComponent(b),a.openUrl(e)}function f(a){window.open(a,"","toolbar=0,status=0,width=626,height=436")}a.vk=b,a.ok=c,a.fb=d,a.tw=e,a.openUrl=f}(Share||(Share={}));var TProject;!function(a){var b=function(){function a(){}return a.init=function(b){a._audio=b.add.audioSprite("sfx")},a.play=function(b,c,d,e){if(void 0===c&&(c=.3),void 0===d&&(d=!1),void 0===e&&(e=!1),0==this._playMusic&&d)return a._bgKey=b,void(a._bgVolume=c);if(d){if(a._bg&&a._bg.isPlaying&&a._bgKey==b)return;return a._bg&&a._bg.stop(),a._bgKey=b,a._bgVolume=c,a._bg=a._audio.play(b,c),a._bg.allowMultiple=!0,a._bg.loop=!0,a._bg}if(this._playMusic){var f=a._audio.play(b,c);return f.allowMultiple=!0,f.loop=e,f}},a.bgStop=function(){a._bg&&a._bg.stop()},a.on=function(){a._bgKey&&a.play(a._bgKey,a._bgVolume,!0,!0)},a.off=function(){a._audio.stop(null)},a._playMusic=!0,a}();a.SoundMixer=b}(TProject||(TProject={}));var Utils;!function(a){function b(a,b){return a+Math.random()*(b-a)}a.randomRange=b}(Utils||(Utils={}));var TProject;!function(a){var b=function(){function a(){}return a.CURRENT_STATE="MainMenu",a.roomName="kitchenRoom",a.roomStage=2,a}();a.LocalConfig=b}(TProject||(TProject={}));var TProject;!function(a){var b=function(){function b(){0==b.getParentDomain(document.domain)&&(window["use-share-api"]=!1,window["use-lock-screen"]=!1,window["mobile-redirect"]=!1,b.MY_DOMAIN=!1),b.SCALE=.5,0!=window["use-hd-for-pc"]&&0==b.isMobile&&(b.SCALE=1),this.game=new Phaser.Game({width:1920*b.SCALE,height:1080*b.SCALE,renderer:Phaser.AUTO,parent:"game_container",transparent:!1,antialias:!0,physicsConfig:null,preserveDrawingBuffer:!0}),this.game.state.add("Boot",a.Boot,!0),this.game.state.add("Preloader",a.Preloader),this.game.state.add("MainMenu",a.MainMenu),this.game.state.add("Hockey",a.Hockey),this.game.state.add("Cockey",a.Cockey)}return b.getParentDomain=function(a){var b=window.location!=window.parent.location?document.referrer:document.location.href;return window["parent-domain"]||(window["parent-domain"]=this.DEF_PARENT_DOMAIN),!!(b.indexOf(window["parent-domain"])+1)},Object.defineProperty(b,"isMobile",{get:function(){return!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)))},enumerable:!0,configurable:!0}),b.MY_DOMAIN=!0,b.DEF_PARENT_DOMAIN="mashabear.ru",b}();a.Main=b}(TProject||(TProject={})),window.onload=function(){new TProject.Main;window.needPreventDefault=!0,setTimeout("window.scrollTo(0, 1)",10),document.addEventListener("touchmove",function(a){1==window.needPreventDefault&&a.preventDefault()},!1)},window.onerror=function(a,b,c,d,e){gameanalytics.GameAnalytics.addErrorEvent(gameanalytics.EGAErrorSeverity.Error,a+" "+b+" "+c+" "+d)};var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.init=function(){var b=this.getUrlParam();if(1==window["mobile-redirect"]&&0==this.game.device.desktop&&window.top.location.pathname.split("game.html").length<2){var d=window.top.location.protocol+"//"+window.top.location.host+window.top.location.pathname.split("index.html")[0]+"game.html"+window.top.location.search;return void(window.top.location.href=d)}c.SCROLL_OVERLAY=new a.ScrollOverlay(this.game),0!=window["use-lock-screen"]&&0==this.game.device.desktop&&this.initLockScreen(!0,!0);var e=null;b.lng?e=b.lng:window.language&&(e=window.language),c.CURRENT_LANGUAGE=new a.LngSelector(e)},c.prototype.getUrlParam=function(){var b;return b=a.Main.MY_DOMAIN?window.top:window,b=b.location.search.replace("?","").split("&").reduce(function(a,b){var c=b.split("=");return a[decodeURIComponent(c[0])]=decodeURIComponent(c[1]),a},{})},c.prototype.preload=function(){this.game.load.onFileComplete.add(this.loadingUpdate,this),this.game.load.atlas("preload",(1==a.Main.SCALE?c.PATH_IMAGES:c.PATH_IMAGES1X)+"preloader/npreloader.png",(1==a.Main.SCALE?c.PATH_IMAGES:c.PATH_IMAGES1X)+"preloader/npreloader.json")},c.prototype.create=function(){this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0,this.enabledMultitouch(!0),this.game.stage.backgroundColor=1712705,this.game.stage.smoothed=!0},c.prototype.loadingUpdate=function(a,b,c,d,e){a>=100&&(this.game.load.onFileComplete.removeAll(),this.game.state.start("Preloader",!0))},c.prototype.enabledMultitouch=function(a){a?(this.game.input.maxPointers=2,this.game.input.addPointer(),this.game.input.addPointer()):this.game.input.maxPointers=1},c.prototype.initLockScreen=function(a,b){void 0===b&&(b=!1),window.addEventListener("resize",this.checkScreenStatus.bind(this),!1),this.game.scale.onOrientationChange.add(this.checkScreenStatus,this);var c=document.createElement("div");c.className="lockscren",c.setAttribute("id","lockscren"),c.style.height="1000000px",c.style.display="none";var d=document.createElement("div");d.className=a?"lockIconContainer PORT_lock_uri":"lockIconContainer LAND_lock_uri",d.style.visibility="hidden",d.style.top=a?"30%":"15%",window["-lockscreen"]={portrait:a,lock:c,icon:d,paused:b},document.body.appendChild(c),document.body.appendChild(d),this.checkScreenStatus()},c.prototype.checkScreenStatus=function(){var a=this.game.scale.isPortrait;window["-lockscreen"]&&a==window["-lockscreen"].portrait?(window["-lockscreen"].lock.style.display="block",window["-lockscreen"].icon.style.visibility="visible"):(window["-lockscreen"].lock.style.display="none",window["-lockscreen"].icon.style.visibility="hidden")},c.PATH_IMAGES="./assets/images/",c.PATH_IMAGES1X="./assets/images1x/",c.PATH_FONTS="./assets/fonts/",c.PATH_SOUNDS="./assets/sounds/",c.PATH_SETTINGS="./assets/settings/",c.HOKKEY_TIPS=!1,c.MEDALY_TIPS=!1,c.CHALANGE_TIPS=!1,c.BONUS_TIPS=!1,c.CURRENT_GAME_MOD=1,c}(Phaser.State);a.Boot=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var a=null!==b&&b.apply(this,arguments)||this;return a.STUPID_AI=!1,a._currentTime=.75,a._gameDifCoef=.75,a._dir=0,a}return __extends(c,b),c.prototype.INITSTATIC=function(){c.SHAIBA_POS_Y=920*a.Main.SCALE,c.SHAIBA_POS_X=[350*a.Main.SCALE,960*a.Main.SCALE,1570*a.Main.SCALE],c.SHAIBA_POS_FINISH_Y=460*a.Main.SCALE,c.SHAIBA_SCALE_FINISH=.5,c.SWAP_DIST=500*a.Main.SCALE,c.MAX_Z_VEL=25*a.Main.SCALE,c.GRAVITATION=1.2*a.Main.SCALE,c.SHAIBA_MAX_SPEED=50*a.Main.SCALE,c.HEIGHT_SHAIBA_FIELD=c.SHAIBA_POS_FINISH_Y-c.SHAIBA_POS_Y,c.GOALKEEPER_CURRENT_MODE=1,c.GOALKEEPER_SPEED_MODE=1,c.GOALKEEPER_SPEED=3*a.Main.SCALE},c.prototype.buildBg=function(){if(2==c.CURRENT_GAME_MOD){var b=110*a.Main.SCALE;this._bgAnimals3=this.game.add.sprite(954*a.Main.SCALE,94*a.Main.SCALE+b,"catlas","animals3"),this._bgAnimals3.anchor.set(.5),this._bgAnimals2=this.game.add.sprite(966*a.Main.SCALE,120*a.Main.SCALE+b,"catlas","animals2"),this._bgAnimals2.anchor.set(.5),this._bgAnimals1=this.game.add.sprite(972*a.Main.SCALE,176*a.Main.SCALE+b,"catlas","animals1"),this._bgAnimals1.anchor.set(.5)}this.add.image(0,0,"bg2"),this._vorota=this.add.image(this.world.centerX,490*a.Main.SCALE,"catlas","vorota"),this._vorota.anchor.set(.5,.96)},c.prototype.playGoalReaction=function(){0==this._goalCounter?(this._goalCounter=8,this.subGoalReaction()):this._goalCounter=8,0==this._starSoundNamesArray.length&&(this._starSoundNamesArray=["Stars_01","Stars_02","Stars_03"])},c.prototype.subGoalReaction=function(){this._goalCounter--,this._goalCounter<=0?(this._goalCounter=0,this.resetPublicTween()):this.goalReaction()},c.prototype.goalReaction=function(){var b=this;this._bgAnimals1Tween=this.game.add.tween(this._bgAnimals1).to({y:this._bgAnimals1.y-20*a.Main.SCALE},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),this._bgAnimals1Tween.onComplete.addOnce(function(){b.subGoalReaction()}),this._bgAnimals2Tween=this.game.add.tween(this._bgAnimals2).to({y:this._bgAnimals2.y-15*a.Main.SCALE},118.75,Phaser.Easing.Sinusoidal.InOut,!0,25,1,!0),this._bgAnimals3Tween=this.game.add.tween(this._bgAnimals3).to({y:this._bgAnimals3.y-12*a.Main.SCALE},106.25,Phaser.Easing.Sinusoidal.InOut,!0,50,1,!0),this._bgAnimals2TweenX=this.game.add.tween(this._bgAnimals2).to({x:this._bgAnimals2.x+this.game.rnd.integerInRange(-30,30)*a.Main.SCALE},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0),this._bgAnimals3TweenX=this.game.add.tween(this._bgAnimals3).to({x:this._bgAnimals3.x+this.game.rnd.integerInRange(-15,15)*a.Main.SCALE},262.5,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0)},c.prototype.initVarsForTreningMode=function(){this._bonuses=[],this._bonusPosition=new Phaser.Point(0,0),this._currentBonusType="empty",this._patternBodyIsCreate=!1,this._patternBodyActiveNumber=0,this._patternBodyDelayNubmer=0,this._currentBarierArray=[],this._currentBarierArray.push(new a.Barrier(this,550*a.Main.SCALE,836*a.Main.SCALE,"N")),this._currentBarierArray.push(new a.Barrier(this,980*a.Main.SCALE,488*a.Main.SCALE,"N"));for(var b=0;b<this._currentBarierArray.length;b++)this._hitArea.push(this._currentBarierArray[b]),this._currentBarierArray[b].obj_type="barrier";for(var b=0;b<this._currentBarierArray.length;b++)this._zContainer.add(this._currentBarierArray[b]),this._currentBarierArray[b].depth=this._currentBarierArray[b].y},c.prototype.initVarsForGoalKeeperMode=function(){this._currentTime=31,this._currentBearStartPos=this.game.width/2,this._goalkeeper.x=this.game.width/2,c.GOALKEEPER_CURRENT_MODE=1,this._bearCanMoveNow3MOD=!1,c.TARGET_SPEED=1,this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME,this._goalkeeper.goal()},c.prototype.createGUI=function(){var b=this;this._text=this.game.make.text(90*a.Main.SCALE,50*a.Main.SCALE,"test",{font:"GinzaNarrow-Heavy",fontSize:160*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),this._text.anchor.set(.5),this._text.visible=!1,this._whiteOver=this.game.add.graphics(0,0),this._whiteOver.beginFill(16777215,1),this._whiteOver.drawRect(0,0,this.game.width,this.game.height),this._whiteOver.tint=0,this.game.add.tween(this._whiteOver).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){b._whiteOver.alpha=0,b._whiteOver.tint=16777215,(1!=c.CURRENT_GAME_MOD||a.Boot.MEDALY_TIPS)&&(2!=c.CURRENT_GAME_MOD||a.Boot.CHALANGE_TIPS)?b._gameIsGoOne=!0:b.showTutorialWindow()}),this._blackOver=this.game.add.graphics(0,0),this._blackOver.beginFill(0,1),this._blackOver.drawRect(0,0,this.game.width,this.game.height),this._blackOver.alpha=1,this.game.add.tween(this._blackOver).to({alpha:0},350,Phaser.Easing.Linear.None,!0,50),this._nameScoreText=this.game.make.text(1758*a.Main.SCALE,182*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].points,{font:"GinzaNarrow-Light",fontSize:45*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),this._nameScoreText.anchor.setTo(.5),this._currentScoreText=this.game.make.text(1758*a.Main.SCALE,250*a.Main.SCALE,"0"+this._scoreCounter,{font:"GinzaNarrow-Heavy",fontSize:90*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),this._currentScoreText.anchor.setTo(.5),this._currentScoreText.setShadow(3,3,"rgba(0,0,0,0.5)",5),this._ingameScoreText=this.game.make.text(90*a.Main.SCALE,130*a.Main.SCALE,this._scoreCounter+"",{font:"GinzaNarrow-Heavy",fontSize:60*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),this._ingameScoreText.anchor.setTo(.5),this._ingameScoreText.alpha=0,this._ingameScoreText.stroke="#000000",this._ingameScoreText.strokeThickness=6*a.Main.SCALE,this._plankBalls=new a.BallUIPlank(this,1686*a.Main.SCALE,88*a.Main.SCALE),this._exitMenuBtn=new a.OButton(this.game,"ui",["btnHome"],function(){b.gotoMenu()}),this._exitMenuBtn.position.set(118*a.Main.SCALE,148*a.Main.SCALE),this._exitMenuBtn.anchor.set(.5),1!=c.CURRENT_GAME_MOD||a.Boot.MEDALY_TIPS||this.createTutorialWindow(),2!=c.CURRENT_GAME_MOD||a.Boot.CHALANGE_TIPS||this.createTutorialWindow(),this._endGamePlank=new a.Popup(this.game,function(){b.game.state.start("Cockey",!0,!1,c.CURRENT_GAME_MOD)}),this._gameUILayer.addChild(this._text),this._gameUILayer.addChild(this._nameScoreText),this._gameUILayer.addChild(this._currentScoreText),this._gameUILayer.addChild(this._plankBalls),this._gameUILayer.addChild(this._exitMenuBtn),this._gameUILayer.addChild(this._ingameScoreText),this._gameUILayer.addChild(this._blackOver),this._gameUILayer.addChild(this._graphOverlay),this._gameUILayer.addChild(this._startTutorialBG),this._gameUILayer.addChild(this._endGamePlank)},c.prototype.init=function(a){void 0===a&&(a=2),c.CURRENT_GAME_MOD=a},c.prototype.create=function(){c.instance=this,this.INITSTATIC(),this._bonusMode=!1,this.buildBg(),this._markContainer=this.add.group(),this._shadowContainer=this.add.group(),this._zContainer=this.add.group(),this._hdKickSounds=[],this._hitGameSounds=[],this._barierSound=[],this._setkaSound=[],this._shaibaFallSounds=[],this._voooshSounds=[],this._starSoundNamesArray=[],this._shaibas=[],this._hitArea=[],1==c.CURRENT_GAME_MOD?(this.initVarsForTreningMode(),this._bgMusic=a.SoundMixer.play("ambientT",.5,!0,!0)):(this._bgMusic=a.SoundMixer.play("ambientH",.5,!0,!0),this._goalkeeper=new a.GoalKeeper(this),this._goalkeeper.obj_type="barrier",this._goalkeeper.depth=this._goalkeeper.y,this._hitArea.push(this._goalkeeper),this._zContainer.add(this._goalkeeper),this.initVarsForGoalKeeperMode());var b=750*a.Main.SCALE,d=380*a.Main.SCALE,e=this.add.sprite(960*a.Main.SCALE,c.SHAIBA_POS_FINISH_Y);this.game.physics.arcade.enable(e),e.body.setSize(b,d,.5*-b,120*a.Main.SCALE-c.SHAIBA_POS_FINISH_Y),e.body.immovable=!0,this._hitArea.push(e),e.depth=e.y,e.obj_type="gate",this._gameUILayer=this.game.add.sprite(0,0),this.startGame(),this.createGUI(),this.initController(),2==c.CURRENT_GAME_MOD&&(this._bonusMark=new a.BonusMark(this.game,this._markContainer)),this._bonusText=this.game.add.text(this.game.width/2,this.game.height/2+50*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].bonus,{font:"GinzaNarrow-Heavy",fontSize:210*a.Main.SCALE+"px",fill:"#DF5102",align:"center"}),this._bonusText.anchor.setTo(.5),this._bonusText.alpha=0,this._bonusText.stroke="#FFFFFF",this._bonusText.strokeThickness=14*a.Main.SCALE,this._bonusText.skew.set(.32,0),this._gameUILayer.addChild(this._bonusText)},c.prototype.showTutorialWindow=function(){var b=this;this._graphOverlay.inputEnabled=!0,this.game.add.tween(this._graphOverlay).to({alpha:1},300,Phaser.Easing.Sinusoidal.Out,!0),a.SoundMixer.play("swishSnd",1),1==c.CURRENT_GAME_MOD?(this._startTutorialAnimation.visible=!0,this._targetTutorialAnimation.visible=!0,this._targetTutorialBear.visible=!1):2==c.CURRENT_GAME_MOD&&(this._startTutorialAnimation.visible=!0,this._targetTutorialAnimation.visible=!1,this._targetTutorialBear.visible=!0),this.game.add.tween(this._startTutorialBG).to({y:this.game.height/2},400,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){b._startTutorialBtn.enabled=!0,b._startTutorialAnimation.y=210*a.Main.SCALE,b.add.tween(b._startTutorialAnimation).to({y:240*a.Main.SCALE},200,null,!0,1300),b._targetTutorialAnimation.animations.play("tutorialLoop",24,!0),b._startTutorialAnimation.animations.play("tutorialLoop",24,!0).onLoop.add(function(){b._targetTutorialAnimation.frameName="help1_medal_10030",b._startTutorialAnimation.frameName="help1_shaiba_10030",b._targetTutorialAnimation.animations.paused=!0,b._startTutorialAnimation.animations.paused=!0,setTimeout(function(){b._startTutorialAnimation.y=210*a.Main.SCALE,b.add.tween(b._startTutorialAnimation).to({y:240*a.Main.SCALE},200,null,!0,1200)},600),b._timerTutorialIndex=setTimeout(function(){null!=b._targetTutorialAnimation&&(b._targetTutorialAnimation.animations.paused=!1),null!=b._startTutorialAnimation&&(b._startTutorialAnimation.animations.paused=!1)},550)}),b._gameIsGoOne=!1})},c.prototype.hideTutorialWindow=function(){var b=this;this.game.add.tween(this._graphOverlay).to({alpha:0},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){b._graphOverlay.inputEnabled=!1}),this.game.add.tween(this._blackOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b._blackOver.inputEnabled=!1}),a.SoundMixer.play("swishSnd",.8),this.game.add.tween(this._startTutorialBG).to({y:-this.game.height},300,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b._startTutorialBtn.enabled=!1,b._startTutorialAnimation.animations.stop("tutorialLoop"),b._targetTutorialAnimation.animations.stop("tutorialLoop"),b._gameIsGoOne=!0,b.initController(),1!=c.CURRENT_GAME_MOD||a.Boot.MEDALY_TIPS?2!=c.CURRENT_GAME_MOD||a.Boot.CHALANGE_TIPS||(a.Boot.CHALANGE_TIPS=!0):a.Boot.MEDALY_TIPS=!0,clearTimeout(b._timerTutorialIndex),b._startTutorialBG.destroy(!0)})},c.prototype.shutdown=function(){clearInterval(this._timerTutorialIndex),clearInterval(this._gameCreateBonusTimeoutIndex),clearInterval(this._gameCreateShaibaTimeoutIndex),a.SoundMixer.off()},c.prototype.createTutorialWindow=function(){var b=this;this._graphOverlay=this.game.add.graphics(0,0),this._graphOverlay.beginFill(0,.4),this._graphOverlay.drawRect(0,0,this.game.width,this.game.height),this._graphOverlay.endFill(),this._graphOverlay.alpha=0,this._startTutorialBG=this.game.make.sprite(this.game.width/2,2*this.game.height,"ui","bgpopup"),this._startTutorialBG.anchor.set(.5),this._startTutorialBG.scale.set(.9);var c=this.game.make.image(0,-146*a.Main.SCALE,"ui","help_vorota.png");c.anchor.set(.5),this._startTutorialAnimation=this.game.make.sprite(20*a.Main.SCALE,220*a.Main.SCALE,"ui","help1_shaiba_10001"),this._startTutorialAnimation.anchor.set(.5),this._startTutorialAnimation.animations.add("tutorialLoop",Phaser.Animation.generateFrameNames("help1_shaiba_1",1,30,"",4)),this._targetTutorialAnimation=this.game.make.sprite(-72*a.Main.SCALE,-148*a.Main.SCALE,"ui","help1_medal_10001"),this._targetTutorialAnimation.anchor.set(.5),
this._targetTutorialAnimation.animations.add("tutorialLoop",Phaser.Animation.generateFrameNames("help1_medal_1",1,30,"",4)),this._targetTutorialBear=this.game.make.sprite(34*a.Main.SCALE,-132*a.Main.SCALE,"ui","help_pinguin"),this._targetTutorialBear.anchor.set(.5),this._startTutorialBtn=new a.OButton(this.game,"lng",["close","close2"],function(){b.hideTutorialWindow()}),this._startTutorialBtn.position.set(0,372*a.Main.SCALE),this._startTutorialBtn.anchor.set(.5),this._startTutorialBtn.enabled=!1,this._startTutorialText=this.game.make.text(0,-296*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["how-to-play"],{font:"BubbleboddyNeue-Regular",fontSize:58*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center"}),this._startTutorialText.anchor.setTo(.5),this._startTutorialBG.addChild(this._targetTutorialAnimation),this._startTutorialBG.addChild(c),this._startTutorialBG.addChild(this._targetTutorialBear),this._startTutorialBG.addChild(this._startTutorialAnimation),this._startTutorialBG.addChild(this._startTutorialBtn),this._startTutorialBG.addChild(this._startTutorialText)},c.prototype.GOAL=function(){this.resultBall(!0),console.log("GOAL")},c.prototype.MIMO=function(){this.resultBall(!1),console.log("MIMO")},c.prototype.DEL_SHAIBA=function(a){console.log("DEL ",a.isGoal)},c.prototype.getShaiba=function(){this._punch=!1;for(var b=0;b<this._shaibas.length;b++)if(this._shaibas[b].isFree)return this._shaibas[b].init(),b;var c=new a.Shaiba(this.game);return this._shaibas.push(c),this._zContainer.add(c),this._shaibas.length-1},c.prototype.startGame=function(){this.LOOP_SPEED=30,this._punch=!1,this._punchDir=0,this._curShaiba=this.getShaiba(),this._realShaiba=this._curShaiba,this._takeMedal=!1,this._targetCounter=0,this._goalCounter=0,this._downX=null,this._downY=null,this._context=null,this._stopGame=!1,this._startLives=3,this._currentLivesCount=this._startLives,this._scoreCounter=0,this._targetCounter=0,this._gameIsGoOne=!0,this._successGoal=!1,this._totalBonusGames=0,this._currentBonusScore=0,this._maxBonusScore=5,this._realMaxBonusScore=10,this.initGame()},c.prototype.initGame=function(){if(1==c.CURRENT_GAME_MOD){for(var a=this._bonuses.length-1;a>=0;a--)if(0!=a){var b=this._bonuses.splice(a,1)[0];b.annihilation()}for(var a=0;a<this._currentBarierArray.length;a++)this._currentBarierArray[a].quicHide();this.addBonuses()}else this.initVarsForGoalKeeperMode()},c.prototype.collisionWall=function(a){for(var b=null,c=this._hitArea.length-1;c>=0;c--)this._bonusMode&&"gate"!=this._hitArea[c].obj_type||this.game.physics.arcade.overlap(a,this._hitArea[c])&&(null!=b?this._hitArea[c].depth>b.depth&&(b=this._hitArea[c]):b=this._hitArea[c]);return null==b?null:{y:b.y,obj_type:b.obj_type,b:b}},c.prototype.checkBGSound=function(){this._bgMusic&&!this._bonusMode&&(this._bgMusic.isPlaying||(1==c.CURRENT_GAME_MOD?this._bgMusic=a.SoundMixer.play("ambientT",.5,!0,!0):this._bgMusic=a.SoundMixer.play("ambientH",.5,!0,!0)))},c.prototype.update=function(){var b=this;if(!this._stopGame){this.checkBGSound(),this._zContainer.sort("depth",Phaser.Group.SORT_ASCENDING);for(var d=0;d<this._shaibas.length;d++)if(0==this._shaibas[d].isFree&&1==c.CURRENT_GAME_MOD&&this.checkBonusAndShaibaCollide(this._shaibas[d]),0!=this._shaibas[d].canHit){var e=this.collisionWall(this._shaibas[d]);if(null!=e){var f=Math.abs(e.b.depth-this._shaibas[d].depth);f<=35&&("gate"==e.obj_type?(this._shaibas[d].pushStop(),this.playHitStickSound(this._setkaSound,"setkaHit_",4,.55),this.add.tween(this._vorota.scale).to({x:1.01,y:1.01},100,Phaser.Easing.Linear.None,!0,0,0,!0),2==c.CURRENT_GAME_MOD&&(this._scoreCounter++,this._ingameScoreText.text="+ 1",2==c.CURRENT_GAME_MOD&&this.playGoalReaction(),this._ingameScoreText.position.set(this._shaibas[d].x,this._shaibas[d].y-this._shaibas[d].height),this._ingameAlphaTextTween=this.game.add.tween(this._ingameScoreText).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0),this._ingameAlphaTextTween.onComplete.addOnce(function(){b._ingameAlphaTextTween=b.game.add.tween(b._ingameScoreText).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0,600)}),this.game.add.tween(this._ingameScoreText).to({y:this._ingameScoreText.y-30*a.Main.SCALE},700,Phaser.Easing.Back.InOut,!0),c.GOALKEEPER_SPEED=6*a.Main.SCALE,this.LOOP_SPEED=30,this._gameDifCoef=.75,this._scoreCounter>=15&&this._scoreCounter<30&&this._totalBonusGames>=3?this._gameDifCoef=.5:this._scoreCounter>=30&&this._scoreCounter<75&&this._totalBonusGames>=5?(c.GOALKEEPER_SPEED=9*a.Main.SCALE,this.LOOP_SPEED=60,this._gameDifCoef=.25):this._scoreCounter>=75&&this._totalBonusGames>=7&&(c.GOALKEEPER_SPEED=12*a.Main.SCALE,this.LOOP_SPEED=90,this._gameDifCoef=0),this.resultBall(!0),this.updateScore(),this._currentBonusScore++)):"barrier"==e.obj_type&&(this._bonusMode||(e.b.hitObj(this._shaibas[d].position),this._shaibas[d].barierStop(e.b))))}}if(2==c.CURRENT_GAME_MOD){if(this._gameIsGoOne&&!this._bonusMode){if(this._goalkeeper.update(),this.updateBonusScore(),1==c.GOALKEEPER_CURRENT_MODE)if(this._goalkeeperStopTime<=-1&&this._goalkeeper.canMove()){var g=1==this._dir?this._goalkeeper.x>=this._currentBearStartPos:this._goalkeeper.x<=this._currentBearStartPos;c.GOALKEEPER_SPEED_MODE=g?.5:1,this._bearCanMoveNow3MOD&&(this._goalkeeper.x+=c.GOALKEEPER_SPEED*c.GOALKEEPER_SPEED_MODE*this._dir),g&&this._goalkeeper.canFlip()&&(this._bearCanMoveNow3MOD=!1,this._goalkeeper.goal())}else this._goalkeeperStopTime--;var h=this.game.time.elapsedMS/1e3;h>.02&&(h=.02),this._currentTime-=h,this._currentTime<=0&&(this._currentTime=0,this._gameIsGoOne=!1,this._stopGame=!0,this._shaibas[this._curShaiba]&&this._shaibas[this._curShaiba].free(),this._curShaiba=null,this.endScreen());var i=Math.floor(this._currentTime),j=i%60,k=Math.floor(i/60);this._plankBalls.updateTimeText(+this.ccc(k)+":"+this.ccc(j))}}else for(var d=0;d<this._bonuses.length;d++)this._bonuses[d].updateBonus()}},c.prototype.updateBonusScore=function(){this._currentBonusScore>=this._maxBonusScore&&(this._currentBonusScore=this._maxBonusScore,this.startBonusScore()),this._currentBonusScore-=.0025,this._currentBonusScore<0&&(this._currentBonusScore=0),this._plankBalls.updateBonusTimer(this._currentBonusScore/this._maxBonusScore)},c.prototype.startBonusScore=function(){var b=this;if(!this._stopGame){this._goalkeeper.goal(),this._bonusMode=!this._bonusMode,a.SoundMixer.bgStop(),a.SoundMixer.play("Whistle",.6);var c=this._bonusText.x;this._bonusText.x-=125*a.Main.SCALE,this.game.add.tween(this._bonusText).to({alpha:1},250,Phaser.Easing.Sinusoidal.InOut,!0),this.game.add.tween(this._bonusText).to({x:c},450,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b._gameCreateBonusTimeoutIndex=setTimeout(function(){b._stopGame||b.whiteFlash(!1,function(){b.startEndBonusMode()})},350)})}},c.prototype.updateTextAddTime=function(a){this._currentTime+=a;var b=Math.floor(this._currentTime),c=b%60,d=Math.floor(b/60);this._plankBalls.updateTimeText(+this.ccc(d)+":"+this.ccc(c))},c.prototype.ccc=function(a){var b=""+a;return 1==b.length&&(b="0"+b),b},c.prototype.resultBall=function(a){var b=this;a&&1==this._takeMedal?1==c.CURRENT_GAME_MOD&&(this._takeMedal=!1,this._curShaiba=this.getShaiba(),this._realShaiba=this._curShaiba):(1==c.CURRENT_GAME_MOD&&"empty"==this._currentBonusType&&this._targetCounter>0&&(this._currentLivesCount--,this._plankBalls.incrementBall()),2==c.CURRENT_GAME_MOD||(0==this._currentLivesCount?setTimeout(function(){b.endScreen()},500):(this._curShaiba=this.getShaiba(),this._realShaiba=this._curShaiba)))},c.prototype.checkBonusAndShaibaCollide=function(b){for(var c=this,d=0;d<this._bonuses.length;d++){var e=this._bonuses[d].bonusType;if(this._bonuses[d].checkBonusCollide(b))return this._currentBonusType=e,this._bonusPosition.set(this._bonuses[d].x,this._bonuses[d].y),this.bonusGetCheck(),this._targetCounter>=15&&this.createRandomBodyPattern(),3==this._targetCounter&&(this._currentBarierArray[0].resetBarier(!1,756*a.Main.SCALE,658*a.Main.SCALE),setTimeout(function(){c._currentBarierArray[0].startMoveBarier(340*a.Main.SCALE,1250)},500)),6==this._targetCounter&&this._currentBarierArray[0].resetBarier(!0,956*a.Main.SCALE,658*a.Main.SCALE),7==this._targetCounter&&(this._currentBarierArray[0].resetBarier(!1,1156*a.Main.SCALE,558*a.Main.SCALE),setTimeout(function(){c._currentBarierArray[0].startMoveBarier(-340*a.Main.SCALE,1250)},500),this._currentBarierArray[1].resetBarier(!1,610*a.Main.SCALE,800*a.Main.SCALE),setTimeout(function(){c._currentBarierArray[1].startMoveBarier(540*a.Main.SCALE,1950)},500)),11==this._targetCounter&&this._currentBarierArray[0].resetBarier(!0,956*a.Main.SCALE,658*a.Main.SCALE),void(12==this._targetCounter&&this._currentBarierArray[1].resetBarier(!0,956*a.Main.SCALE,658*a.Main.SCALE))}},c.prototype.createRandomBodyPattern=function(){var b=this;if(console.log("RANDOM UPDATE"),console.log(this._patternBodyActiveNumber),this._patternBodyIsCreate)--this._patternBodyActiveNumber<=0&&(this._patternBodyDelayNubmer=this.game.rnd.integerInRange(1,5),this._patternBodyIsCreate=!1,this._currentBarierArray[0].resetBarier(!0),this._currentBarierArray[1].resetBarier(!0));else if(--this._patternBodyDelayNubmer<=0){this._patternBodyIsCreate=!0,this._patternBodyActiveNumber=this.game.rnd.integerInRange(3,7);var c=this.game.rnd.integerInRange(1,4);switch(c){case 1:this._currentBarierArray[0].resetBarier(!1,756*a.Main.SCALE,658*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[0].startMoveBarier(340*a.Main.SCALE,1250)},500);break;case 2:this._currentBarierArray[0].resetBarier(!1,1156*a.Main.SCALE,558*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[0].startMoveBarier(-340*a.Main.SCALE,1250)},500),this._currentBarierArray[1].resetBarier(!1,610*a.Main.SCALE,800*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[1].startMoveBarier(540*a.Main.SCALE,1950)},500);break;case 3:this._currentBarierArray[0].resetBarier(!1,1356*a.Main.SCALE,680*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[0].startMoveBarier(-290*a.Main.SCALE,950)},500),this._currentBarierArray[1].resetBarier(!1,564*a.Main.SCALE,680*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[1].startMoveBarier(290*a.Main.SCALE,950)},500);break;case 4:this._currentBarierArray[0].resetBarier(!1,this.game.width/2-20*a.Main.SCALE,600*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[0].startMoveBarier(380*a.Main.SCALE,730),b._currentBarierArray[1].resetBarier(!1,b.game.width/2+50*a.Main.SCALE,700*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[1].startMoveBarier(-230*a.Main.SCALE,730)},500)},500);break;case 5:this._currentBarierArray[0].resetBarier(!1,this.game.width/2-20*a.Main.SCALE,600*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[0].startMoveBarier(-230*a.Main.SCALE,730),b._currentBarierArray[1].resetBarier(!1,b.game.width/2+50*a.Main.SCALE,700*a.Main.SCALE),setTimeout(function(){b._currentBarierArray[1].startMoveBarier(380*a.Main.SCALE,730)},500)},500)}}},c.prototype.getBearRandomPos=function(){var b=0;return b=Math.random()>.7?this._bonuses[0].x+(this.game.rnd.integerInRange(50,150)*a.Main.SCALE+40*this._bearStrayingCurrent*a.Main.SCALE)*(Math.random()>.5?1:-1):this._bonuses[0].x+(this.game.rnd.integerInRange(0,70)*a.Main.SCALE+40*this._bearStrayingCurrent*a.Main.SCALE)*(Math.random()>.5?1:-1),b>960*a.Main.SCALE&&b>1190*a.Main.SCALE?b=1190*a.Main.SCALE-(b-1190*a.Main.SCALE):b<=960*a.Main.SCALE&&b<720*a.Main.SCALE&&(b=720*a.Main.SCALE+(720*a.Main.SCALE-b)),this._bearPrevTargetOffcet=Math.abs(this._bonuses[0].x-b),b},c.prototype.bearGetHit=function(){if(2==c.CURRENT_GAME_MOD)return this._bearCanMoveNow3MOD=!0,this._currentBearStartPos=960*a.Main.SCALE,this._goalkeeper.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._goalkeeper.rotateBear(),this._goalkeeper.step(),!1},c.prototype.bearTargetSet=function(){var b=this;this._goalkeeper.canMove()?2==c.CURRENT_GAME_MOD&&(null==this._downX?(this._currentBearStartPos=960*a.Main.SCALE,this._goalkeeper.step(),this._dir=this._currentBearStartPos-this._goalkeeper.x>=0?1:-1,this._goalkeeper.rotateBear(),this._goalkeeper.step(),this._bearCanMoveNow3MOD=!0):this.setBerarPositionFromMove()):setTimeout(function(){b.bearTargetSet()},100)},c.prototype.getEndXTraectoryPos=function(){var a,b=new Phaser.Point(0,c.SHAIBA_POS_FINISH_Y),d=new Phaser.Point(this._vorota.width,c.SHAIBA_POS_FINISH_Y);console.log(this._scoreCounter),a=this.STUPID_AI&&(this._scoreCounter<15||this._totalBonusGames<2)?new Phaser.Point(this._shaibas[this._shaibas.length-1].x,this._shaibas[this._shaibas.length-1].y):new Phaser.Point(this._shaibas[this._realShaiba].x,this._shaibas[this._realShaiba].y);var e,f,g,h=new Phaser.Point(this._mouseX,this._mouseY),i=d.x-b.x,j=d.y-b.y,k=h.x-a.x,l=h.y-a.y;return 0==j&&(j=1e-4),0==k?e=(a.x-b.x)/i:0==l?e=(a.y-b.y)/j:(f=k/l,g=i-f*j,e=(a.x-b.x-(a.y-b.y)*f)/g),new Phaser.Point(b.x+e*i,b.y+e*j)},c.prototype.setBerarPositionFromMove=function(){var b=this.getEndXTraectoryPos().x;b=b<960*a.Main.SCALE?Math.max(790*a.Main.SCALE,b):Math.min(1119*a.Main.SCALE,b),isNaN(b)&&(b=960*a.Main.SCALE);var c=b-this._goalkeeper.x>=0?1:-1;this._dir!=c?this.testPlayerStep(b,c):(this._currentBearStartPos=b,this._bearCanMoveNow3MOD=!0,this._goalkeeper.nowStay()||(this._goalkeeper.step(),this._goalkeeper.rotateBear(),this._goalkeeper.step()))},c.prototype.testPlayerStep=function(a,b){this._bearCanMoveNow3MOD=!0,this._goalkeeper.step(),this._currentBearStartPos=a,this._dir=b,this._goalkeeper.rotateBear(),this._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME-10,this._goalkeeper.step()},c.prototype.updateScore=function(){var a=this;this.game.add.tween(this._currentScoreText.scale).to({x:1.4,y:1.4},150,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.add(function(){a._currentScoreText.text=a._scoreCounter<10?"0"+a._scoreCounter:a._scoreCounter+"",a.game.add.tween(a._currentScoreText.scale).to({x:1,y:1},300,Phaser.Easing.Sinusoidal.InOut,!0,100)})},c.prototype.bonusGetCheck=function(){var b=this;switch(this._scoreCounter++,this._ingameScoreText.text="+ 1",this._currentBonusType){case"bonus":this._scoreCounter+=2,this._ingameScoreText.text="+ 3",this._takeMedal=!0,a.SoundMixer.play("bonus",.5),this.makeStarParticle(this._bonusPosition.x,this._bonusPosition.y),this._currentLivesCount<3&&(this._currentLivesCount++,this._plankBalls.addLiveBall()),2==c.CURRENT_GAME_MOD&&this.playGoalReaction();break;case"target":this._targetCounter++,this.updateScore(),a.SoundMixer.play("MedalHit",this.game.rnd.realInRange(.35,.6)),this._takeMedal=!0,this._targetCounter%5==0&&setTimeout(function(){var c=b._bonuses[0].x>=960*a.Main.SCALE?730*a.Main.SCALE:1190*a.Main.SCALE,d=b.game.rnd.integerInRange(b._vorota.y-70*a.Main.SCALE,b._vorota.y-200*a.Main.SCALE),e=new a.Bonus(b,c,d,"bonus");e.depth=d,b._bonuses.push(e),b._zContainer.add(e),e.resetBonus(c,d,1.3,null)},800),2==c.CURRENT_GAME_MOD&&this.playGoalReaction()}this._ingameScoreText.position.set(this._bonusPosition.x,this._bonusPosition.y-70*a.Main.SCALE),this.game.add.tween(this._ingameScoreText).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){b.game.add.tween(b._ingameScoreText).to({alpha:0},200,Phaser.Easing.Sinusoidal.InOut,!0,600)}),this.game.add.tween(this._ingameScoreText).to({y:this._ingameScoreText.y-30*a.Main.SCALE},700,Phaser.Easing.Back.InOut,!0)},c.prototype.addBonuses=function(b){void 0===b&&(b=null);var d,e,f;if(null==b)e=1170*a.Main.SCALE;else{var g=110*a.Main.SCALE,h=[];if(b-g>650*a.Main.SCALE&&h.push([650,b-g]),b+g<1210*a.Main.SCALE&&h.push([b+g,1210*a.Main.SCALE]),h.length>1){var i=Math.random()<.5?0:1;e=this.game.rnd.integerInRange(h[i][0],h[i][1])}else e=this.game.rnd.integerInRange(h[0][0],h[0][1])}f=this._vorota.y-130*a.Main.SCALE;var j=this.getBonusPattern();null!=this._bonuses[0]?(d=this._bonuses[0],d.resetBonus(j.x,j.y,j.scale,j.pattern),d.depth=j.y):(d=new a.Bonus(this,e,f,"target"),d.depth=f,this._bonuses.push(d),this._zContainer.add(d),d.resetBonus(j.x,j.y,j.scale,j.pattern)),2==c.CURRENT_GAME_MOD&&this.bearTargetSet()},c.prototype.getBonusPattern=function(){var b={};return this._targetCounter<6?(b.x=this.game.rnd.integerInRange(630*a.Main.SCALE,1270*a.Main.SCALE),b.y=this._vorota.y-130*a.Main.SCALE,b.scale=1.4,b.pattern=null,b):(b.x=this.game.rnd.integerInRange(630*a.Main.SCALE,1270*a.Main.SCALE),b.y=this.game.rnd.integerInRange(this._vorota.y-70*a.Main.SCALE,this._vorota.y-200*a.Main.SCALE),b.scale=Math.max(1,1.4-this._targetCounter/100),b.pattern=Phaser.ArrayUtils.getRandomItem(["hirisontal","hirisontal_diag","infinity","batterfly","triangle","zigzag"]),b)},c.prototype.removeBonus=function(a){for(var b=0;b<this._bonuses.length;b++)if(a==this._bonuses[b])return void this._bonuses.splice(b,1)},c.prototype.makeStarParticle=function(b,c){for(var d=this,e=this,f=0;f<3;f++)!function(f){var g=e.game.rnd.between(0,Phaser.Math.PI2),h=new Phaser.Point(Math.sin(g),Math.cos(g)),i=e.game.rnd.between(30*a.Main.SCALE,50*a.Main.SCALE);h.setMagnitude(i);var j=new Phaser.Point(b,c);h.x+=j.x,h.y+=j.y;var k=new a.StarParticle(e,h.x,h.y);e._gameUILayer.addChild(k);var l=e._currentScoreText.position,m=750+e.game.rnd.integerInRange(-100,200);e.game.add.tween(k.scale).to({x:3.5,y:3.5},m/2,Phaser.Easing.Sinusoidal.InOut,!0,0,0,!0);var n=e.game.add.tween(k).to({x:[k.x,Math.max(k.x-l.x,l.x-k.x)/2+e.game.rnd.integerInRange(-400*a.Main.SCALE,800*a.Main.SCALE),l.x],y:[k.y,Math.max(k.y-l.y,l.y-k.y)/2+e.game.rnd.integerInRange(-400*a.Main.SCALE,400*a.Main.SCALE),l.y]},m,Phaser.Easing.Sinusoidal.Out,!0,100).interpolation(function(a,b){return Phaser.Math.bezierInterpolation(a,b)});n.onStart.addOnce(function(){setTimeout(function(){d.playHitStickSound(d._voooshSounds,"SnowBallVoosh_",4,d.game.rnd.realInRange(.8,1.3))},100+150*f)}),n.onComplete.addOnce(function(){0==f&&d.updateScore(),a.SoundMixer.play("Stars_0"+(f+1),.5+.1*f),k.destroy(!0)},e)}(f)},c.prototype.restartGame=function(){this._blackOver.alpha=0,this._currentScoreText.exists=!0,this._nameScoreText.exists=!0,this._plankBalls.exists=!0,this._exitMenuBtn.exists=!0,this._currentLivesCount=this._startLives,this._scoreCounter=0,this._targetCounter=0,this._gameIsGoOne=!0,this._successGoal=!1,2==c.CURRENT_GAME_MOD&&this.resetPublicTween(),this._currentBonusType="empty",this._currentScoreText.text="0"+this._scoreCounter,this._plankBalls.initPlank(),this.startGame(),this.initController()},c.prototype.resetPublicTween=function(){this._goalCounter=0,this.game.tweens.remove(this._bgAnimals1Tween),this.game.tweens.remove(this._bgAnimals2Tween),this.game.tweens.remove(this._bgAnimals3Tween),this.game.tweens.remove(this._bgAnimals2TweenX),this.game.tweens.remove(this._bgAnimals3TweenX);var b=110*a.Main.SCALE;this._bgAnimals3.position.set(954*a.Main.SCALE,94*a.Main.SCALE+b),this._bgAnimals2.position.set(966*a.Main.SCALE,120*a.Main.SCALE+b),this._bgAnimals1.position.set(972*a.Main.SCALE,176*a.Main.SCALE+b)},c.prototype.endScreen=function(){this._text.exists=!1,this._currentScoreText.exists=!1,this._nameScoreText.exists=!1,this._plankBalls.exists=!1,this._exitMenuBtn.exists=!1,this._bonusText.exists=!1,clearTimeout(this._gameCreateShaibaTimeoutIndex),clearTimeout(this._gameCreateBonusTimeoutIndex),a.SoundMixer.off(),a.SoundMixer.on(),this._bgMusic&&(this._bgMusic.volume=.2),a.SoundMixer.play("endGameHorn",1),this._endGamePlank.show(this._scoreCounter,this._scoreCounter<15?2:1)},c.prototype.whiteFlash=function(a,b){var c=this;void 0===a&&(a=!1),a?this.game.add.tween(this._whiteOver).to({alpha:1},100,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){c.restartGame(),c.game.add.tween(c._whiteOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0)}):this.game.add.tween(this._whiteOver).to({alpha:1},100,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){c.game.tweens.remove(c._ingameAlphaTextTween),c._ingameScoreText.alpha=0,b(),c.game.add.tween(c._whiteOver).to({alpha:0},300,Phaser.Easing.Sinusoidal.InOut,!0)})},c.prototype.initController=function(){this.enabledMouse(this.downCallback,this.upCallback,this.moveCallback,this)},c.prototype.startEndBonusMode=function(){this._bonusText.alpha=0,this._goalkeeper.visible=!this._bonusMode,this._plankBalls.hideShowTime(!this._bonusMode,this._totalBonusGames),this._shaibas[this._curShaiba].visible=!this._bonusMode,this._currentBonusScore=0,1!=c.CURRENT_GAME_MOD&&this._bonusMark.startBonusMode(this._totalBonusGames)},c.prototype.startGameMode=function(){this._bonusMode=!this._bonusMode,this._currentBonusType="empty",this._curShaiba=null,this._currentBonusScore=0,this._totalBonusGames++,this._maxBonusScore++,this._maxBonusScore>=this._realMaxBonusScore&&(this._maxBonusScore=this._maxBonusScore),this._goalkeeper.visible=!0,this._plankBalls.hideShowTime(!this._bonusMode),this._curShaiba=this.getShaiba(),this._realShaiba=this._curShaiba},c.prototype.pushShaibaInBonusMode=function(b,d,e){var f=this;this._shaibas[this._curShaiba].position.set(d.position.x,d.position.y),this._shaibas[this._curShaiba].visible=!0;var g;g=b?new Phaser.Point(this._vorota.x+this.game.rnd.integerInRange(-this._vorota.width/2+200*a.Main.SCALE,this._vorota.width/2-200*a.Main.SCALE),this._vorota.y-this.game.rnd.integerInRange(0,this._vorota.width/2-100*a.Main.SCALE)):d.x<this.game.width/2?new Phaser.Point(this._vorota.x-this.game.rnd.integerInRange(500,this._vorota.width/2+750*a.Main.SCALE),this._vorota.y-this.game.rnd.integerInRange(0,this._vorota.width/2-500*a.Main.SCALE)):new Phaser.Point(this._vorota.x+this.game.rnd.integerInRange(500,this._vorota.width/2+750*a.Main.SCALE),this._vorota.y-this.game.rnd.integerInRange(0,this._vorota.width/2-500*a.Main.SCALE));var h=g.x-this._shaibas[this._curShaiba].x,i=g.y-this._shaibas[this._curShaiba].y;this._punch=!0,this._shaibas[this._curShaiba].push(.65*h,.65*i),this._currentBonusType="empty",this._curShaiba=null;var j=this._plankBalls.incrementShaiba(b);j.count>0?setTimeout(function(){f._curShaiba=f.getShaiba(),f._realShaiba=f._curShaiba,f._shaibas[f._curShaiba].visible=!f._bonusMode,1!=c.CURRENT_GAME_MOD&&f._bonusMark.startBonusMode(f._totalBonusGames)},800):(this._bgMusic=a.SoundMixer.play("ambientH",.5,!0,!0),a.SoundMixer.play("overtimeSoundEnd",.85),j.result?setTimeout(function(){console.log("LONG END"),f.whiteFlash(!1,function(){f.startGameMode()})},2400):setTimeout(function(){console.log("SHORT END"),f.whiteFlash(!1,function(){f.startGameMode()})},1200))},c.prototype.downCallback=function(b){this._stopGame||b.y<250*a.Main.SCALE||this._gameIsGoOne&&(2==c.CURRENT_GAME_MOD&&(this._bonusMode&&this._bonusMark.pushShaiba(),this._bonusMode)||(this._downX=b.x,this._downY=b.y,this._mouseX=b.x,this._mouseY=b.y,this._minMX=Number.MAX_VALUE,this._maxMX=Number.MIN_VALUE))},c.prototype.upCallback=function(b){var d=this;if(null==this._downX||this._stopGame)return void(this._punch=!1);if(null==this._curShaiba)return void(this._punch=!1);this._punch=!0;var e=b.x-this._downX,f=b.y-this._downY;this._punchDir=Math.atan2(f,e),this._shaibas[this._curShaiba].push(e,f)?(this._currentBonusType="empty",this._curShaiba=null,2==c.CURRENT_GAME_MOD&&this._currentTime>0&&(this._gameCreateShaibaTimeoutIndex=setTimeout(function(){d._curShaiba=d.getShaiba(),d._realShaiba=d._curShaiba,2==c.CURRENT_GAME_MOD&&(d._goalkeeper.x>=1060*a.Main.SCALE||d._goalkeeper.x<=860*a.Main.SCALE)&&(d._currentBearStartPos=960*a.Main.SCALE,d._goalkeeper.canMove()&&(d._bearCanMoveNow3MOD=!0,d._goalkeeper.step(),d._dir=d._currentBearStartPos-d._goalkeeper.x>=0?1:-1,d._goalkeeper.rotateBear(),d._goalkeeperStopTime=c.GOALKEEPER_STOP_TIME,d._goalkeeper.step()))},800))):this._punch=!1;var g=this.getEndXTraectoryPos();1!=c.CURRENT_GAME_MOD&&(e=g.x-this._goalkeeper.x,f=g.y-this._goalkeeper.y,this._targetCounter>0&&Math.abs(e)>250*a.Main.SCALE&&Math.abs(f)<200*a.Main.SCALE&&g.x<1300*a.Main.SCALE&&g.x>548*a.Main.SCALE&&(this._dir=e<0?-1:1,this._goalkeeper.rotateBear(),this._goalkeeper.jump(),3!=c.CURRENT_GAME_MOD&&(this._goalkeeper.body.enable=!1))),this._downX=null,this._downY=null},c.prototype.moveCallback=function(a){if(null!=this._downX&&(this._mouseX=a.x,this._mouseY=a.y,a.x<this._minMX&&(this._minMX=a.x),a.x>this._maxMX&&(this._maxMX=a.x),2==c.CURRENT_GAME_MOD)){if(1==this._stopGame)return;Math.random()>this._gameDifCoef&&this.setBerarPositionFromMove()}},c.prototype.shadowContainer=function(){return this._shadowContainer},c.prototype.playHitStickSound=function(b,c,d,e){void 0===d&&(d=4),void 0===e&&(e=.75);for(var f=[],g=0;g<d;g++)f.push(g+1);var h=Phaser.ArrayUtils.getRandomItem(f);b[h]&&b[h].isPlaying&&b[h].stop(),b[h]=a.SoundMixer.play(c+h,e)},c.prototype.render=function(){},c.prototype.enabledMouse=function(a,b,c,d){this._mouseFunction=[a,b,c],this._context=d,a&&this.game.input.onDown.add(this.downMouseCallback,d),b&&this.game.input.onUp.add(this.upMouseCallback,d),c&&this.game.input.addMoveCallback(this.moveMouseCallback,d)},c.prototype.disableMouse=function(){this._mouseFunction[0]&&this.game.input.onDown.add(this.downMouseCallback,this),this._mouseFunction[1]&&this.game.input.onUp.add(this.upMouseCallback,this),this._mouseFunction[2]&&this.game.input.addMoveCallback(this.moveMouseCallback,this),this._mouseFunction=null},c.prototype.downMouseCallback=function(a){this._mouseFunction[0].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.upMouseCallback=function(a){this._mouseFunction[1].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.moveMouseCallback=function(a){this._mouseFunction[2].call(this._context,{x:a.position.x,y:a.position.y,default:a})},c.prototype.gotoMenu=function(){for(var b=this,c=window.setTimeout(function(){},0);c--;)window.clearTimeout(c);this.game.tweens.removeAll(),this._whiteOver.alpha=0,this._whiteOver.tint=0,this.game.add.tween(this._whiteOver).to({alpha:1},200,Phaser.Easing.Sinusoidal.InOut,!0).onComplete.addOnce(function(){a.SoundMixer.bgStop(),b.game.state.start("MainMenu",!0)})},c.CURRENT_GAME_MOD=1,c.SHAIBA_POS_Y=920*a.Main.SCALE,c.SHAIBA_POS_X=[350*a.Main.SCALE,960*a.Main.SCALE,1570*a.Main.SCALE],c.SHAIBA_POS_FINISH_Y=460*a.Main.SCALE,c.SHAIBA_SCALE_FINISH=.5,c.SWAP_DIST=500*a.Main.SCALE,c.MAX_Z_VEL=25*a.Main.SCALE,c.GRAVITATION=1.2*a.Main.SCALE,c.SHAIBA_MAX_SPEED=50*a.Main.SCALE,c.HEIGHT_SHAIBA_FIELD=c.SHAIBA_POS_FINISH_Y-c.SHAIBA_POS_Y,c.GOALKEEPER_CURRENT_MODE=1,c.GOALKEEPER_SPEED_MODE=1,c.GOALKEEPER_SPEED=3*a.Main.SCALE,c.GOALKEEPER_STOP_TIME=15,c.TARGET_SPEED=1,c}(Phaser.State);a.Cockey=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){var c=null!==b&&b.apply(this,arguments)||this;return c.GOAL_WIDHT=320*a.Main.SCALE,c.GOAL_WIDHT_OFFCET=0,c.GOAL_CAMERA_ZOOM=!1,c.START_CAMERA_ZOOM=!1,c._gameMode="",c}return __extends(c,b),c.prototype.create=function(){var b=this;console.log("Хоккей"),this.GOAL_WIDHT=320*a.Main.SCALE,this._bgMusic=a.SoundMixer.play("ambientH",.5,!0,!0),this._hdKickSounds=[],this._hitGameSounds=[],this.BEGINGAME=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].start,this.OVERTIME=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["over-time"],this._mainContainer=this.game.add.sprite(0,0),this._startGame=!1,this._time=60,this._overTime=!1;var c=this.make.image(0,0,"hockeybg");this._mainContainer.addChild(c),this.game.physics.startSystem(Phaser.Physics.ARCADE),this._snowEmmiter=this.game.make.emitter(0,0,100),this._snowEmmiter.makeParticles("hockeyAtlas3",["particle"]),this._snowEmmiter.minParticleScale=.25,this._snowEmmiter.maxParticleScale=.75,this._snowEmmiter.gravity=0,this._snowEmmiter.height=96*a.Main.SCALE,this._snowEmmiter.width=96*a.Main.SCALE,this._mainContainer.addChild(this._snowEmmiter),this._canParticleBrust=!0,this._shaibaContainer=this.game.make.sprite(this.world.centerX,this.world.centerY),this._shaibaContainer.anchor.set(.5),this._mainContainer.addChild(this._shaibaContainer),this._shaiba=this.make.sprite(0,0,"hockeyAtlas","shaiba"),this._shaiba.anchor.set(.5),this._shaiba.scale.set(.75),this._shaibaContainer.addChild(this._shaiba),this._hero=this.make.image(400*a.Main.SCALE,this.world.centerY,"hockeyAtlas","whore0001"),this._hero.anchor.set(.5),this._hero.scale.set(.75),this._mainContainer.addChild(this._hero),this._hero.animations.add("idle",Phaser.Animation.generateFrameNames("whore",1,11,"",4),16,!0),this._hero.animations.add("hit",Phaser.Animation.generateFrameNames("whore",12,20,"",4),24),this._hero.play("idle"),this._hitAnim=!1,this._hitAnim2=!1,this._enemy=this.make.image(this.game.width-400*a.Main.SCALE,this.world.centerY,"hockeyAtlas2","pingui0001"),this._enemy.anchor.set(.5),this._enemy.scale.set(.75),this._mainContainer.addChild(this._enemy),this._enemy.animations.add("idle",Phaser.Animation.generateFrameNames("pingui",1,11,"",4),16,!0),this._enemy.animations.add("hit",Phaser.Animation.generateFrameNames("pingui",12,20,"",4),24),this._enemy.play("idle"),this._bordersArray=[];var d=this.game.make.image(-14*a.Main.SCALE,-22*a.Main.SCALE,"hockeyAtlas3","bordur");this._mainContainer.addChild(d),this._bordersArray.push(d);var e=this.game.make.image(-14*a.Main.SCALE,this.game.height-236*a.Main.SCALE+22*a.Main.SCALE,"hockeyAtlas3","bordur");this._mainContainer.addChild(e),this._bordersArray.push(e);var f=this.game.make.image(this.game.width+14*a.Main.SCALE,-22*a.Main.SCALE,"hockeyAtlas3","bordur");f.scale.set(-1,1),this._mainContainer.addChild(f),this._bordersArray.push(f);var g=this.game.make.image(this.game.width+14*a.Main.SCALE,this.game.height-236*a.Main.SCALE+22*a.Main.SCALE,"hockeyAtlas3","bordur");g.scale.set(-1,1),this._mainContainer.addChild(g),this._bordersArray.push(g),this._blueGoal=this.make.sprite(-7*a.Main.SCALE,this.world.centerY,"hockeyAtlas3","new_blue"),this._blueGoal.anchor.set(0,.5),this._mainContainer.addChild(this._blueGoal),this._redGoal=this.make.sprite(this.game.width+7*a.Main.SCALE,this.world.centerY,"hockeyAtlas3","new_red"),this._redGoal.anchor.set(1,.5),this._mainContainer.addChild(this._redGoal),this._goals=this.game.add.group();var h=this.game.height/2-this.GOAL_WIDHT-this.GOAL_WIDHT_OFFCET,i=85*a.Main.SCALE;this._playerUpGoal=this.game.make.graphics(0,this.game.height/2+this.GOAL_WIDHT+this.GOAL_WIDHT_OFFCET),this._playerUpGoal.beginFill(0,0),this._playerUpGoal.drawRect(0,0,i,h),this._playerUpGoal.endFill(),this._playerUpGoal.name="downL",this._playerDownGoal=this.game.make.graphics(0,this.game.height/2-this.GOAL_WIDHT+this.GOAL_WIDHT_OFFCET-h),this._playerDownGoal.beginFill(16777215,0),this._playerDownGoal.drawRect(0,0,i,h),this._playerDownGoal.endFill(),this._playerDownGoal.name="upL",this._enemyUpGoal=this.game.make.graphics(this.game.width-i,this.game.height/2+this.GOAL_WIDHT+this.GOAL_WIDHT_OFFCET),this._enemyUpGoal.beginFill(0,0),this._enemyUpGoal.drawRect(0,0,i,h),this._enemyUpGoal.endFill(),this._enemyUpGoal.name="downR",this._enemyDownGoal=this.game.make.graphics(this.game.width-i,this.game.height/2-this.GOAL_WIDHT+this.GOAL_WIDHT_OFFCET-h),this._enemyDownGoal.beginFill(16777215,0),this._enemyDownGoal.drawRect(0,0,i,h),this._enemyDownGoal.endFill(),this._enemyDownGoal.name="upR",this._goals.add(this._playerUpGoal),this._goals.add(this._playerDownGoal),this._goals.add(this._enemyUpGoal),this._goals.add(this._enemyDownGoal),this._collideCounter=0,this._shaibaSpeed=8*a.Main.SCALE,this._velX=0,this._velY=0,this._enY=0,this._enKey=[!1,!1],this._goY=0,this._goKey=[!1,!1],this._heroSpeedY=0,this._borderOffset=150*a.Main.SCALE,this._speedY=20*a.Main.SCALE,this._enemySpeedY=0,this._heroScore=0,this._enemyScore=0,this._winLose=0,this._winLoseTimeout=0,this._wasCollHero=!1,this._wasCollEnemy=!1,this._canHitGoal=!0,this._cameraZoomTween=null,this._beginCounter=this.game.add.text(this.world.centerX,this.world.centerY,"1",{font:"GinzaNarrow-Heavy",
fontSize:190*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff"}),this._beginCounter.wordWrap=!0,this._beginCounter.align="center",this._beginCounter.anchor.set(.5),this._beginCounter.setShadow(5*a.Main.SCALE,5*a.Main.SCALE,"rgba(0,0,0,0.5)",15*a.Main.SCALE),this._beginCounter.alpha=0,this._centerText=this.game.add.text(this.world.centerX,80*a.Main.SCALE,"0:60",{font:"GinzaNarrow-Heavy",fontSize:84*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff",align:"center"}),this._centerText.anchor.set(.5),this._centerText.setShadow(5*a.Main.SCALE,5*a.Main.SCALE,"rgba(0,0,0,0.5)",15*a.Main.SCALE),this._centerText.alpha=0,this._leftText=this.game.add.text(this.world.centerX-120*a.Main.SCALE,80*a.Main.SCALE,"0",{font:"GinzaNarrow-Heavy",fontSize:120*a.Main.SCALE+"px",fontWeight:"normal",fill:"#007595"}),this._leftText.wordWrap=!0,this._leftText.align="right",this._leftText.anchor.set(1,.5),this._leftText.setShadow(5*a.Main.SCALE,5*a.Main.SCALE,"rgba(0,0,0,0.5)",15*a.Main.SCALE),this._leftText.alpha=0,this._rightText=this.game.add.text(this.world.centerX+120*a.Main.SCALE,80*a.Main.SCALE,"0",{font:"GinzaNarrow-Heavy",fontSize:120*a.Main.SCALE+"px",fontWeight:"normal",fill:"#AE4144"}),this._rightText.wordWrap=!0,this._rightText.align="left",this._rightText.anchor.set(0,.5),this._rightText.setShadow(5*a.Main.SCALE,5*a.Main.SCALE,"rgba(0,0,0,0.5)",15*a.Main.SCALE),this._rightText.alpha=0,this._homeBtn=new a.OButton(this.game,"ui",["btnHome","btnHome"],function(){a.SoundMixer.bgStop(),b.game.state.start("MainMenu",!0)}),this._homeBtn.x=110*a.Main.SCALE,this._homeBtn.y=110*a.Main.SCALE,this.add.existing(this._homeBtn),this._homeBtn.alpha=0,this._homeBtn.enabled=!1,this._popup=new a.Popup(this.game,function(){a.SoundMixer.bgStop(),b.game.state.start("Hockey",!0)}),this.game.add.existing(this._popup),this.showChoiceController(),this.game.physics.arcade.enable([this._shaiba]),this._shaiba.body.setCircle(this._shaiba.width/2*this._shaiba.scale.x,0,23*a.Main.SCALE),this._shaiba.body.moves=!1,this._goals.forEach(function(a){b.game.physics.arcade.enable([a]),a.body.moves=!1},this),this._oldX=0},c.prototype.showChoiceController=function(){var b=this,c=this.game.add.graphics(0,0);c.beginFill(0),c.drawRect(0,0,this.game.width,this.game.height),c.endFill(),c.alpha=0,this.game.add.tween(c).to({alpha:.4},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){var d=b.game.add.sprite(b.game.width/2,0,"ui","bgpopup");d.anchor.set(.5),b.game.add.tween(d).to({y:b.game.height/2},400,Phaser.Easing.Back.Out,!0).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",1)});var e=b.game.add.text(0,-300*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["chose-players"],{font:"BubbleboddyNeue-Regular",fontSize:55*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff"});e.align="center",e.anchor.set(.5,0),d.addChild(e),b._onePlayer=new a.OButton(b.game,"mmui",["selectBtnLight","selectBtn2"],function(){b._onePlayer.enabled=!1,b.game.add.tween(d).to({y:2*b.game.height},300,Phaser.Easing.Sinusoidal.Out,!0).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",.8)}),b.game.add.tween(c).to({alpha:0},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){b._gameMode="single",b.choseStartState()})});var f=-5;"ru"!=a.Boot.CURRENT_LANGUAGE.curLng&&"en"!=a.Boot.CURRENT_LANGUAGE.curLng&&"de"!=a.Boot.CURRENT_LANGUAGE.curLng||(f=0);b._onePlayer.position.set(0,-44*a.Main.SCALE),b._onePlayer.angle=-1.4,b._onePlayer.setAnimationScale(.02),d.addChild(b._onePlayer);var g=b.game.add.text(0,-8*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["one-player"],{font:"BubbleboddyNeue-Regular",fontSize:(50+f)*a.Main.SCALE+"px",fill:"#FFFFFF"});g.align="center",g.anchor.set(.5),b._onePlayer.createStableContainer(),b._onePlayer.stableContainer.addChild(g),b._twoPlayer=new a.OButton(b.game,"mmui",["selectBtnLight","selectBtn2"],function(){b._twoPlayer.enabled=!1,b.game.add.tween(d).to({y:2*b.game.height},300,Phaser.Easing.Sinusoidal.Out,!0).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",.8)}),b.game.add.tween(c).to({alpha:0},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){b._gameMode="multiplayer",b.choseStartState()})}),b._twoPlayer.position.set(0,140*a.Main.SCALE),b._twoPlayer.angle=1.5,b._twoPlayer.setAnimationScale(.02),d.addChild(b._twoPlayer);var h=b.game.add.text(0,-8*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["play-with-friend"],{font:"BubbleboddyNeue-Regular",fontSize:(48+f)*a.Main.SCALE+"px",fill:"#FFFFFF"});h.align="center",h.anchor.set(.5),b._twoPlayer.createStableContainer(),b._twoPlayer.stableContainer.addChild(h)})},c.prototype.choseStartState=function(){this.initController(),a.Boot.HOKKEY_TIPS?this.beginC():this.showTips()},c.prototype.showTips=function(){var b=this,c=this.game.add.graphics(0,0);c.beginFill(0),c.drawRect(0,0,this.game.width,this.game.height),c.endFill(),c.alpha=0,this.game.add.tween(c).to({alpha:.4},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){var d=b.game.add.sprite(b.game.width/2,0,"ui","bgpopup");d.anchor.set(.5),b.game.add.tween(d).to({y:b.game.height/2},400,Phaser.Easing.Back.Out,!0).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",1)});var e=b.game.add.text(0,-300*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["how-to-play"],{font:"BubbleboddyNeue-Regular",fontSize:58*a.Main.SCALE+"px",fontWeight:"normal",fill:"#ffffff"});if(e.align="center",e.anchor.set(.5,0),d.addChild(e),"multiplayer"==b._gameMode){var f=b.game.make.sprite(0,-100*a.Main.SCALE,"ui","wasdKey");f.anchor.set(.5),d.addChild(f);var g=b.game.make.sprite(0,140*a.Main.SCALE,"ui","arrows0001");g.anchor.set(.5),d.addChild(g)}else{var f=b.game.make.sprite(0,0,"ui","arrows0001");f.anchor.set(.5),d.addChild(f)}var h=new a.OButton(b.game,"lng",["close","close2"],function(){h.enabled=!1,b.game.add.tween(d).to({y:2*b.game.height},300,Phaser.Easing.Sinusoidal.Out,!0).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",.8)}),b.game.add.tween(c).to({alpha:0},300,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){b.beginC(),a.Boot.HOKKEY_TIPS=!0})});h.position.set(0,350*a.Main.SCALE),d.addChild(h)})},c.prototype.solveShaiba=function(){var b=Math.random()<.5?-1:1;this._velX=8*a.Main.SCALE*b+this.rnd.realInRange(0,1)*b,b=Math.random()<.5?1:-1,this._velY=8*a.Main.SCALE*b+this.rnd.realInRange(0,2)*b},c.prototype.startShaiba=function(){var a=this;this.solveShaiba(),this._startGame=!0,this._mobileUI&&(this._mobileUI.exists=!0),this.add.tween(this._centerText).to({alpha:1},500,Phaser.Easing.Linear.None,!0),this.add.tween(this._leftText).to({alpha:1},500,Phaser.Easing.Linear.None,!0),this.add.tween(this._rightText).to({alpha:1},500,Phaser.Easing.Linear.None,!0),this.add.tween(this._homeBtn).to({alpha:1},500,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){a._homeBtn.enabled=!0})},c.prototype.beginC=function(){var a=this;this._beginCounter.alpha=0,this._beginCounter.scale.set(.2,.2),this._beginCounter.text="3",this.zoomGameStart(this._beginCounter.text),this.add.tween(this._beginCounter).to({alpha:1},500,Phaser.Easing.Linear.None,!0,800).onStart.addOnce(function(){}),this.add.tween(this._beginCounter.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,800).onComplete.addOnce(function(){a.add.tween(a._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,200).onComplete.addOnce(function(){a._beginCounter.scale.set(.2,.2),a._beginCounter.text="2",a.zoomGameStart(a._beginCounter.text),a.add.tween(a._beginCounter).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onStart.addOnce(function(){}),a.add.tween(a._beginCounter.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,300).onComplete.addOnce(function(){a.add.tween(a._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,200).onComplete.addOnce(function(){a._beginCounter.scale.set(.2,.2),a._beginCounter.text="1",a.zoomGameStart(a._beginCounter.text),a.add.tween(a._beginCounter).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onStart.addOnce(function(){}),a.add.tween(a._beginCounter.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,300).onComplete.addOnce(function(){a.add.tween(a._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,200).onComplete.addOnce(function(){a._beginCounter.scale.set(.2,.2),a._beginCounter.text=a.BEGINGAME,a.zoomGameStart(a._beginCounter.text),a.add.tween(a._beginCounter).to({alpha:1},500,Phaser.Easing.Linear.None,!0,300).onStart.addOnce(function(){}),a.add.tween(a._beginCounter.scale).to({x:1,y:1},500,Phaser.Easing.Back.Out,!0,300).onComplete.addOnce(function(){a.add.tween(a._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,800).onComplete.addOnce(function(){a._beginCounter.scale.set(.2,.2),a.startShaiba()})})})})})})})})},c.prototype.beginC2=function(){var b=this;if(this._overTime)return void(this._startGame=!0);this._beginCounter.scale.set(.2,.2),this._beginCounter.text=this.BEGINGAME,this.add.tween(this._beginCounter).to({alpha:1},400,Phaser.Easing.Linear.None,!0,500).onStart.addOnce(function(){a.SoundMixer.play("beepEnd",.5)}),this.add.tween(this._beginCounter.scale).to({x:1,y:1},400,Phaser.Easing.Back.Out,!0,500).onComplete.addOnce(function(){b.add.tween(b._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,500).onComplete.addOnce(function(){b._beginCounter.scale.set(.2,.2);var c=Math.random()<.5?1:-1;b._velX=8*a.Main.SCALE*c+b.rnd.realInRange(-1,1),c=Math.random()<.5?1:-1,b._velY=8*a.Main.SCALE*c+b.rnd.realInRange(-2,2),b._startGame=!0})})},Object.defineProperty(c.prototype,"MAX_SHAIBA_SPEED",{get:function(){return 15*a.Main.SCALE+this._collideCounter},enumerable:!0,configurable:!0}),c.prototype.heroHitHaiba=function(){var a=this;this._hitAnim||(this._hitAnim=!0,this._hero.play("hit").onComplete.addOnce(function(){a._hitAnim=!1,a._hero.play("idle")}))},c.prototype.enemyHitHaiba=function(){var a=this;this._hitAnim2||(this._hitAnim2=!0,this._enemy.play("hit").onComplete.addOnce(function(){a._hitAnim2=!1,a._enemy.play("idle")}))},c.prototype.overtime=function(){0==this._overTime&&(this._overTime=!0,a.SoundMixer.play("Whistle",.65),this._centerText.text=this.OVERTIME,"de"==a.Boot.CURRENT_LANGUAGE.curLng?(this._leftText.x-=130*a.Main.SCALE,this._rightText.x+=130*a.Main.SCALE):"fr"==a.Boot.CURRENT_LANGUAGE.curLng?(this._leftText.x-=50*a.Main.SCALE,this._rightText.x+=50*a.Main.SCALE):"it"==a.Boot.CURRENT_LANGUAGE.curLng?(this._leftText.x-=160*a.Main.SCALE,this._rightText.x+=160*a.Main.SCALE):"pt"==a.Boot.CURRENT_LANGUAGE.curLng||"pl"==a.Boot.CURRENT_LANGUAGE.curLng?(this._leftText.x-=120*a.Main.SCALE,this._rightText.x+=120*a.Main.SCALE):(this._leftText.x-=40*a.Main.SCALE,this._rightText.x+=40*a.Main.SCALE))},c.prototype.borderShake=function(b){var c,d=this,e=1;"upL"==b?(c=this._bordersArray[0],e=-1):"downL"==b?(c=this._bordersArray[1],e=-1):"upR"==b?c=this._bordersArray[2]:"downR"==b&&(c=this._bordersArray[3]),a.SoundMixer.play("shaiba_hit_bordure_duel_game",.65),this.game.add.tween(c).to({x:c.x+20*e*a.Main.SCALE},50,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){d.game.add.tween(c).to({x:c.x-20*e*a.Main.SCALE},250,Phaser.Easing.Bounce.Out,!0)})},c.prototype.goalText=function(){var b,c=this,d=1;1==this._winLose?(b=this._blueGoal,d=-1):2==this._winLose&&(b=this._redGoal),this.GOAL_CAMERA_ZOOM&&(this.game.camera.flash(16777215,140),this.zoomCameraFX(this._shaibaContainer,!0)),this.game.add.tween(b).to({x:b.x+50*d*a.Main.SCALE},100,Phaser.Easing.Sinusoidal.Out,!0).onComplete.addOnce(function(){c._publicReaction=a.SoundMixer.play(Math.random()>.5?"happy_1":"happy_2",.65),c.game.add.tween(b).to({x:b.x-50*d*a.Main.SCALE},300,Phaser.Easing.Elastic.Out,!0)}),this._beginCounter.alpha=0,this._beginCounter.scale.set(.2,.2),this._beginCounter.text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng].goal,a.SoundMixer.play("MedalHit",.9),this.add.tween(this._beginCounter).to({alpha:1},200,Phaser.Easing.Linear.None,!0),this.add.tween(this._beginCounter.scale).to({x:1,y:1},200,Phaser.Easing.Back.Out,!0).onComplete.addOnce(function(){c.add.tween(c._beginCounter).to({alpha:0},200,Phaser.Easing.Linear.None,!0,500).onComplete.addOnce(function(){c._beginCounter.scale.set(0,0),c.GOAL_CAMERA_ZOOM||(c.game.camera.flash(16777215,300),c.initNextGameRound())})})},c.prototype.collideHitTest=function(a,b){return this.game.physics.arcade.collide(a,b)},c.prototype.overlapHitTest=function(a,b){return this.game.physics.arcade.overlap(a,b)},c.prototype.zoomGameStart=function(a){var b=1,c=1,d=!1,e=Phaser.Easing.Exponential.Out,f=0;switch(a){case"1":d=!0,b=2.2,c=50;break;case"2":b=1.75,c=500,f=300;break;case"3":b=1.25,c=500,f=300;break;case this.BEGINGAME:b=1,c=500,f=300}this.START_CAMERA_ZOOM&&(d&&this.game.camera.flash(16777215,200),this._mainContainer.anchor.set(.5),this.game.add.tween(this._mainContainer).to({x:.5*(this.game.width-this.game.width*b),y:.5*(this.game.height-this.game.height*b)},c,e,!0,f),this.game.add.tween(this._mainContainer.scale).to({x:b,y:b},c,e,!0,f))},c.prototype.particleBurst=function(b,c,d,e){var f=this;this._canParticleBrust&&(this._snowEmmiter.x=b,this._snowEmmiter.y=c,this._snowEmmiter.minParticleSpeed.setTo(5*d*a.Main.SCALE,5*e*a.Main.SCALE),this._snowEmmiter.maxParticleSpeed.setTo(35*d*a.Main.SCALE,35*e*a.Main.SCALE),this._snowEmmiter.start(!0,350,null,40),setTimeout(function(){f._canParticleBrust=!0},150))},c.prototype.zoomCameraFX=function(a,b){var c=this;if(void 0===b&&(b=!1),b&&null!=this._cameraZoomTween&&(this.game.tweens.remove(this._cameraZoomTween),this._cameraZoomTween=null),null==this._cameraZoomTween){var d=Math.min(this._collideCounter/3,.15)/2;b&&(d=1.2),this.game.camera.shake(.007*.8,50,!1,Phaser.Camera.SHAKE_HORIZONTAL);var e=1+.45*d,f=5*d,g=-5*d;b&&(f=0),g=0,this._mainContainer.anchor.set(.5);var h=Math.abs(g)+Math.abs(f),i=g+a.y/this.game.height*h,j=a.x<this.game.width/2?1:-1,k=0,l=200;b&&(k=600,l=50),this.game.add.tween(this._mainContainer).to({x:(this.game.width-this.game.width*e)*(a.x/this.game.width),y:(this.game.height-this.game.height*e)*(a.y/this.game.height)+i*j*e,angle:i},200,Phaser.Easing.Back.Out,!0),this._cameraZoomTween=this.game.add.tween(this._mainContainer.scale).to({x:e,y:e},200,Phaser.Easing.Back.Out,!0),this._cameraZoomTween.onComplete.addOnce(function(){c.game.add.tween(c._mainContainer).to({x:0,y:0,angle:0},l,Phaser.Easing.Sinusoidal.Out,!0,k),c._cameraZoomTween=c.game.add.tween(c._mainContainer.scale).to({x:1,y:1},l,Phaser.Easing.Sinusoidal.Out,!0,k),c._cameraZoomTween.onStart.addOnce(function(){b&&c.game.camera.flash(16777215,250)}),c._cameraZoomTween.onComplete.addOnce(function(){c._mainContainer.anchor.set(0,0),c._cameraZoomTween=null,b&&c.initNextGameRound()})})}},c.prototype.initNextGameRound=function(){this._winLoseTimeout=0,console.log("NEXT ROUND"),this._startGame=!1;Math.random();this._velX=0,this._velY=0,this._shaibaContainer.x=this.world.centerX,this._shaibaContainer.y=this.world.centerY,this._collideCounter=0,this._hero.x=400*a.Main.SCALE,this._hero.y=this.world.centerY,this._enemy.x=this.game.width-400*a.Main.SCALE,this._enemy.y=this.world.centerY,this._hero.angle=0,this._enemy.angle=0,2==this._winLose?this._heroScore++:this._enemyScore++,this._winLose=0,this._leftText.text=""+this._heroScore,this._rightText.text=""+this._enemyScore,this.beginC2()},c.prototype.playHitStickSound=function(b,c){var d=Phaser.ArrayUtils.getRandomItem([1,2,3,4]);b[d]&&b[d].isPlaying&&b[d].stop(),b[d]=a.SoundMixer.play(c+d,.45)},c.prototype.update=function(){var b=this,c=this.game.time.elapsedMS/1e3;if(this._snowEmmiter.forEachAlive(function(a){a.alpha=a.lifespan/b._snowEmmiter.lifespan}),this._onePlayer&&(this._onePlayer.update(),this._twoPlayer.update()),this._winLoseTimeout>0)return void(this._winLoseTimeout-=c);if(0!=this._startGame){this._time-=c;var d=Math.round(this._time);if(d<0&&(d=0),0==this._overTime&&(this._centerText.text="0:"+(d>9?d:"0"+d)),this._time<=0){if(this._heroScore!=this._enemyScore)return this._startGame=!1,this._mobileUI&&(this._mobileUI.exists=!1),this._publicReaction.isPlaying&&this._publicReaction.stop(),this._bgMusic&&(this._bgMusic.volume=.2),a.SoundMixer.play("endGameHorn",1),void this._popup.show(this._heroScore,this._heroScore<this._enemyScore?2:1);this.overtime()}var e=30*a.Main.SCALE,f=24*a.Main.SCALE;this._oldX=this._shaibaContainer.x,this._shaibaContainer.x+=this._velX,this._shaibaContainer.y+=this._velY;this._oldX,this._shaibaContainer.x;this._shaibaContainer.x=Math.max(e+f,Math.min(this._shaibaContainer.x,this.game.width-e-f)),this._shaibaContainer.y=Math.max(e+f,Math.min(this._shaibaContainer.y,this.game.height-e-f));this._shaibaContainer.x-f<=e&&(this._velX*=-1,this._wasCollHero=!1,this._wasCollEnemy=!1),this._shaibaContainer.x+f>=this.game.width-e&&(this._velX*=-1,this._wasCollHero=!1,this._wasCollEnemy=!1),this._shaibaContainer.y-f<=e&&(this.playHitStickSound(this._hitGameSounds,"hitGame_"),this.particleBurst(this._shaibaContainer.x,this._shaibaContainer.y,this._velX,this._velY),this._velY*=-(1+this.game.rnd.realInRange(.01,.3)),this._wasCollHero=!1,this._wasCollEnemy=!1),this._shaibaContainer.y+f>=this.game.height-e&&(this.playHitStickSound(this._hitGameSounds,"hitGame_"),this.particleBurst(this._shaibaContainer.x,this._shaibaContainer.y,this._velX,this._velY),this._velY*=-(1+this.game.rnd.realInRange(.01,.3)),this._wasCollHero=!1,this._wasCollEnemy=!1),this._shaibaContainer.x-f<=e&&this._shaibaContainer.y+f<this._playerUpGoal.y&&this._shaibaContainer.y-f>this._playerDownGoal.y+this._playerDownGoal.height&&(this._velX*=-1,this._wasCollHero=!1,this._wasCollEnemy=!1,this._winLose=1,this._winLoseTimeout=1.7,this.goalText()),this._shaibaContainer.x+f>=this.game.width-e&&this._shaibaContainer.y+f<this._enemyUpGoal.y&&this._shaibaContainer.y-f>this._enemyDownGoal.y+this._enemyDownGoal.height&&(this._velX*=-1,this._wasCollHero=!1,this._wasCollEnemy=!1,this._winLose=2,this._winLoseTimeout=1.7,this.goalText()),this._canHitGoal&&this._goals.forEach(function(a){b.collideHitTest(a,b._shaiba)?b._canHitGoal&&(console.log(a.body.touching),b.particleBurst(b._shaibaContainer.x,b._shaibaContainer.y,b._velX,b._velY),(a.body.touching.left||a.body.touching.right)&&(b._velX*=-1),(a.body.touching.up||a.body.touching.down)&&(b._velY*=-1),a.body.touching.none&&(b._velX*=-1,b._velY*=-1),b._wasCollHero=!1,b._wasCollEnemy=!1,b._canHitGoal=!1,setTimeout(function(){b._canHitGoal=!0,console.log("ALIVE")},150),b.borderShake(a.name)):b.overlapHitTest(a,b._shaiba)&&b._canHitGoal&&(console.log("HIT!"),b.particleBurst(b._shaibaContainer.x,b._shaibaContainer.y,b._velX,b._velY),b._velX*=-1,b._velY*=-1,b._wasCollHero=!1,b._wasCollEnemy=!1,b._canHitGoal=!1,setTimeout(function(){b._canHitGoal=!0,console.log("ALIVE")},150),b.borderShake(a.name))},this);var g=this._shaibaContainer.x-this._hero.x,h=this._shaibaContainer.y-this._hero.y,i=Math.sqrt(g*g+h*h);if(i<200*a.Main.SCALE&&0==this._wasCollHero&&this.heroHitHaiba(),i<140*a.Main.SCALE&&0==this._wasCollHero){this.particleBurst(this._shaibaContainer.x,this._shaibaContainer.y,this._velX,this._velY);var j=Math.atan2(h,g);this._velX=Math.cos(j)*(this.MAX_SHAIBA_SPEED+5*Math.random()*a.Main.SCALE),this._velY=Math.sin(j)*(this.MAX_SHAIBA_SPEED+5*Math.random()*a.Main.SCALE),this._wasCollHero=!0,this._wasCollEnemy=!1,this._collideCounter+=.25*a.Main.SCALE,this.playHitStickSound(this._hdKickSounds,"shaiba_hit_strongHD"),this.zoomCameraFX(this._shaibaContainer)}if(g=this._shaibaContainer.x-this._enemy.x,h=this._shaibaContainer.y-this._enemy.y,i=Math.sqrt(g*g+h*h),i<200*a.Main.SCALE&&0==this._wasCollEnemy&&this.enemyHitHaiba(),i<140*a.Main.SCALE&&0==this._wasCollEnemy){this.particleBurst(this._shaibaContainer.x,this._shaibaContainer.y,this._velX,this._velY);var j=Math.atan2(h,g);this._velX=Math.cos(j)*(this.MAX_SHAIBA_SPEED+5*Math.random()*a.Main.SCALE),this._velY=Math.sin(j)*(this.MAX_SHAIBA_SPEED+5*Math.random()*a.Main.SCALE),this._wasCollHero=!1,this._wasCollEnemy=!0,this._collideCounter+=.25*a.Main.SCALE,this.playHitStickSound(this._hdKickSounds,"shaiba_hit_strongHD"),this.zoomCameraFX(this._shaibaContainer)}var k=6*a.Main.SCALE;this._heroScore>3&&(k=8*a.Main.SCALE);var l=0;"single"==this._gameMode&&this._velX>0&&(this._enemy.y<this._shaibaContainer.y?(this._enemy.y+=k,this._enemy.y>this._shaibaContainer.y&&(this._enemy.y=this._shaibaContainer.y),l=-15):this._enemy.y>this._shaibaContainer.y&&(this._enemy.y-=k,this._enemy.y<this._shaibaContainer.y&&(this._enemy.y=this._shaibaContainer.y),l=15));var m=20*a.Main.SCALE,n=Math.abs(this._enemy.y-this._shaibaContainer.y);n<m&&(l*=n/m),"single"==this._gameMode&&(this._enemy.y=Math.max(this._borderOffset,Math.min(this._enemy.y,this.game.height-this._borderOffset)),this._enemy.angle+=.2*(l-this._enemy.angle)),this._velX>this.MAX_SHAIBA_SPEED&&(this._velX*=.96),this._velY>this.MAX_SHAIBA_SPEED&&(this._velY*=.96),this._hero.y!=this._borderOffset&&this._hero.y!=this.game.height-this._borderOffset||(this._heroSpeedY=0),l=0,0!=this._goY?(this._heroSpeedY+=2*this._goY*a.Main.SCALE,l=15*this._goY):this._heroSpeedY*=.85*a.Main.SCALE;var o=this._heroSpeedY<0?-1:1;if(this._heroSpeedY=Math.min(this._speedY,Math.abs(this._heroSpeedY))*o,this._hero.angle+=.2*(l-this._hero.angle),this._hero.y+=this._heroSpeedY,this._hero.y=Math.max(this._borderOffset,Math.min(this._hero.y,this.game.height-this._borderOffset)),"multiplayer"==this._gameMode){this._enemy.y!=this._borderOffset&&this._enemy.y!=this.game.height-this._borderOffset||(this._enemySpeedY=0),l=0,0!=this._enY?(this._enemySpeedY+=2*this._enY*a.Main.SCALE,l=15*this._enY):this._enemySpeedY*=.85*a.Main.SCALE;var p=this._enemySpeedY<0?-1:1;this._enemySpeedY=Math.min(this._speedY,Math.abs(this._enemySpeedY))*p,this._enemy.angle+=.2*(l-this._enemy.angle),this._enemy.y+=this._enemySpeedY,this._enemy.y=Math.max(this._borderOffset,Math.min(this._enemy.y,this.game.height-this._borderOffset))}}},c.prototype.shutdown=function(){a.SoundMixer.off()},c.prototype.render=function(){var a=this._shaibaContainer.x-this._shaiba.body.x,b=this._shaibaContainer.y-this._shaiba.body.y;this._shaiba.body.setCircle(this._shaiba.width/2*this._shaiba.scale.x,a+this._velX,b+this._velY)},c.prototype.initController=function(){var b=this;if(this.game.device.desktop)this.game.input.keyboard.onDownCallback=function(a){b.onKeyDown(a.keyCode)},this.game.input.keyboard.onUpCallback=function(a){b.onKeyUp(a.keyCode)};else if(this._mobileUI=this.game.add.sprite(0,0),this._mobileUI.exists=!1,"multiplayer"==this._gameMode){var c=this.game.make.sprite(350*a.Main.SCALE,160*a.Main.SCALE);c.angle=90,c.scale.set(.8),this._mobileUI.addChild(c);var d=new a.OButton2(this.game,"ui",["leftMobile"],function(){b.onKeyDown(Phaser.Keyboard.W)},function(){b.onKeyUp(Phaser.Keyboard.W)});d.position.set(0,0),c.addChild(d);var e=this.game.make.sprite(350*a.Main.SCALE,this.game.height-160*a.Main.SCALE);e.angle=90,e.scale.set(.8),this._mobileUI.addChild(e);var f=new a.OButton2(this.game,"ui",["rightMobile"],function(){b.onKeyDown(Phaser.Keyboard.S)},function(){b.onKeyUp(Phaser.Keyboard.S)});f.position.set(0,0),e.addChild(f);var g=this.game.make.sprite(this.game.width-350*a.Main.SCALE,160*a.Main.SCALE);g.angle=90,g.scale.set(.8),this._mobileUI.addChild(g);var h=new a.OButton2(this.game,"ui",["leftMobile"],function(){b.onKeyDown(Phaser.Keyboard.UP)},function(){b.onKeyUp(Phaser.Keyboard.UP)});h.position.set(0,0),g.addChild(h);var i=this.game.make.sprite(this.game.width-350*a.Main.SCALE,this.game.height-160*a.Main.SCALE);i.angle=90,i.scale.set(.8),this._mobileUI.addChild(i);var j=new a.OButton2(this.game,"ui",["rightMobile"],function(){b.onKeyDown(Phaser.Keyboard.DOWN)},function(){b.onKeyUp(Phaser.Keyboard.DOWN)});j.position.set(0,0),i.addChild(j)}else{var c=this.game.make.sprite(350*a.Main.SCALE,this.game.height-160*a.Main.SCALE);c.angle=90,c.scale.set(.8),this._mobileUI.addChild(c);var d=new a.OButton2(this.game,"ui",["leftMobile"],function(){b.onKeyDown(Phaser.Keyboard.UP)},function(){b.onKeyUp(Phaser.Keyboard.UP)});d.position.set(0,0),c.addChild(d);var e=this.game.make.sprite(this.game.width-350*a.Main.SCALE,this.game.height-160*a.Main.SCALE);e.angle=90,e.scale.set(.8),this._mobileUI.addChild(e);var f=new a.OButton2(this.game,"ui",["rightMobile"],function(){b.onKeyDown(Phaser.Keyboard.DOWN)},function(){b.onKeyUp(Phaser.Keyboard.DOWN)});f.position.set(0,0),e.addChild(f)}},Object.defineProperty(c.prototype,"canMove",{get:function(){return!0},enumerable:!0,configurable:!0}),c.prototype.onKeyDown=function(a){if(0!=this._startGame&&0!=this.canMove)if("multiplayer"==this._gameMode)switch(a){case Phaser.Keyboard.W:this._goY=-1,this._goKey[0]=!0;break;case Phaser.Keyboard.S:this._goY=1,this._goKey[1]=!0;break;case Phaser.Keyboard.UP:this._enY=-1,this._enKey[0]=!0;break;case Phaser.Keyboard.DOWN:this._enY=1,this._enKey[1]=!0}else switch(a){case Phaser.Keyboard.UP:this._goY=-1,this._goKey[0]=!0;break;case Phaser.Keyboard.DOWN:this._goY=1,this._goKey[1]=!0;break;case Phaser.Keyboard.W:this._goY=-1,this._goKey[0]=!0;break;case Phaser.Keyboard.S:this._goY=1,this._goKey[1]=!0}},c.prototype.onKeyUp=function(a){if(0!=this.canMove)if("multiplayer"==this._gameMode)switch(a){case Phaser.Keyboard.W:this._goKey[1]?this._goY=1:this._goY=0,this._goKey[0]=!1;break;case Phaser.Keyboard.S:this._goKey[0]?this._goY=-1:this._goY=0,this._goKey[1]=!1;break;case Phaser.Keyboard.UP:this._enKey[1]?this._enY=1:this._enY=0,this._enKey[0]=!1;break;case Phaser.Keyboard.DOWN:this._enKey[0]?this._enY=-1:this._enY=0,this._enKey[1]=!1}else switch(a){case Phaser.Keyboard.UP:this._goKey[1]?this._goY=1:this._goY=0,this._goKey[0]=!1;break;case Phaser.Keyboard.DOWN:this._goKey[0]?this._goY=-1:this._goY=0,this._goKey[1]=!1;break;case Phaser.Keyboard.W:this._goKey[1]?this._goY=1:this._goY=0,this._goKey[0]=!1;break;case Phaser.Keyboard.S:this._goKey[0]?this._goY=-1:this._goY=0,this._goKey[1]=!1}},c}(Phaser.State);a.Hockey=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.create=function(){var b=this;this.add.image(0,0,"preload","bg"),this._copyright=this.add.image(Math.round(this.world.centerX),Math.round(1050*a.Main.SCALE),"preload","copyright000"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?1:2)),this._copyright.x-=Math.round(.5*this._copyright.width),this._copyright.y-=Math.round(.5*this._copyright.height),a.SoundMixer.play("main_menu_music",.3,!0,!0),this._textArrays=[],this._logo=this.add.image(this.world.centerX,135*a.Main.SCALE,"preload","mmLogo_"+a.Boot.CURRENT_LANGUAGE.curLng),this._logo.anchor.set(.5),this._animLogo=-1,this._logo.y=0,this._logo.alpha=0,this.add.tween(this._logo).to({alpha:1,y:135*a.Main.SCALE},400,Phaser.Easing.Quadratic.Out,!0).onComplete.addOnce(function(){b._animLogo=0}),this._capBg=this.add.image(this.world.centerX,365*a.Main.SCALE,"mmui","captionBg"),this._capBg.anchor.set(.5),this._capBg.alpha=0,this._capBg.scale.set(1.1,1.1),this.add.tween(this._capBg).to({alpha:1},400,Phaser.Easing.Quadratic.Out,!0),this.add.tween(this._capBg.scale).to({x:1,y:1},600,Phaser.Easing.Elastic.Out,!0,200),this._caption=this.add.image(0,0,"mmui","caption0001"),this._caption.alpha=0,this._caption.anchor.set(.5),this._capBg.addChild(this._caption),this.add.tween(this._caption).to({alpha:1},300,Phaser.Easing.Quadratic.Out,!0,500),this._maska=this.add.image(462*a.Main.SCALE,575*a.Main.SCALE,"mmui","mashkaInMenu"),this._maska.anchor.set(1,.5),this._maska.alpha=0,this._maska.x=200*a.Main.SCALE,this._maska.scale.x=1.25,this.add.tween(this._maska).to({alpha:1},300,Phaser.Easing.Quadratic.Out,!0,300),this.add.tween(this._maska).to({x:462*a.Main.SCALE+758*a.Main.SCALE},400,Phaser.Easing.Back.Out,!0,300),this.add.tween(this._maska.scale).to({x:1},400,Phaser.Easing.Quadratic.Out,!0,400),this._crc1=this.add.image(1432*a.Main.SCALE,698*a.Main.SCALE),this._shaiba=this.add.image(1234*a.Main.SCALE,830*a.Main.SCALE,"mmui","shaibaInMenu"),this._crc2=this.add.image(1508*a.Main.SCALE,742*a.Main.SCALE,"mmui","circlesFg"),this._crc1.anchor.set(.5),this._shaiba.anchor.set(.5),this._crc2.anchor.set(.5),this._circ1x=this._crc1.x,this._circ2x=this._crc2.x,this._circ3x=this._shaiba.x,this._crc1.alpha=0,this._crc2.alpha=0,this._shaiba.alpha=0,this._shaiba.x=1234*a.Main.SCALE-30*a.Main.SCALE,this._shaiba.y=830*a.Main.SCALE+20*a.Main.SCALE,this._shaiba.angle=-2,this._shaiba.scale.set(.8,.8),this.add.tween(this._crc1).to({alpha:1},300,Phaser.Easing.Quadratic.Out,!0,600),this.add.tween(this._crc2).to({alpha:1},300,Phaser.Easing.Quadratic.Out,!0,600),this.add.tween(this._shaiba).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,600),this.add.tween(this._shaiba).to({x:1234*a.Main.SCALE,y:830*a.Main.SCALE,angle:0},200,Phaser.Easing.Back.Out,!0,600),this.add.tween(this._shaiba.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,600),this._play=new a.OButton(this.game,"mmui",["playBtn","playBtn2"],function(){b.add.tween(b._play).to({alpha:0},200,Phaser.Easing.Quadratic.Out,!0),b.showSelectLevel(),b.game.sound.context.resume().then(function(){console.log("Звук приди")})}),this._play.position.set(this.world.centerX,702*a.Main.SCALE),this.game.add.existing(this._play),this._play.enabled=!1,this._play.alpha=0,this._play.scale.set(1.2,1.2),this.add.tween(this._play).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,800),this.add.tween(this._play.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,800).onComplete.addOnce(function(){b._play.enabled=!0}),this._sound=new a.OButtonCheck(this.game,"mmui",["btnSound0001"],["btnSound0004"],function(){a.GameConfig.playMusic=!a.GameConfig.playMusic,a.GameConfig.playMusic?b.game.sound.volume=1:b.game.sound.volume=0}),this._sound.setCheck(a.GameConfig.playMusic),this._sound.x=1818*a.Main.SCALE,this._sound.y=115*a.Main.SCALE,this.world.addChild(this._sound),this._sound.alpha=0,this.add.tween(this._sound).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,400),0!=window["fullscreen-btn"]&&a.Boot.SCROLL_OVERLAY.checkFullScreen&&(this._fullScreen=new a.OButton(this.game,"mmui",["fullscreen"],function(){a.Boot.SCROLL_OVERLAY.toggleFullScreen()}),this._fullScreen.x=this.game.width-1778*a.Main.SCALE,this._fullScreen.y=115*a.Main.SCALE,this.world.addChild(this._fullScreen),this._fullScreen.alpha=0,this.add.tween(this._fullScreen).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,400)),this.initLngPanel(),this.updateLanguage(a.Boot.CURRENT_LANGUAGE.currentIndex,a.Boot.CURRENT_LANGUAGE.curLng),this.createSelectLevel(),this.input.addMoveCallback(this.moveCallback,this)},c.prototype.shutdown=function(){this.input.deleteMoveCallback(this.moveCallback,this),a.SoundMixer.bgStop()},c.prototype.update=function(){if(this._crc1.x+=.02*(this._circ1x-this._crc1.x),this._crc2.x+=.02*(this._circ2x-this._crc2.x),this._shaiba.x+=.02*(this._circ3x-this._shaiba.x),this._animLogo!=-1&&(this._logo.y=135*a.Main.SCALE+16*Math.sin(this._animLogo+=.03)*a.Main.SCALE),this._btns)for(var b=0;b<this._btns.length;b++)this._btns[b].update()},c.prototype.createSelectLevel=function(){var b=this;this._black=this.add.graphics(0,0),this._black.beginFill(0,.4),this._black.drawRect(0,0,this.game.width,this.game.height),this._black.endFill(),this._black.inputEnabled=!0,this._btns=[new a.OButton(this.game,"mmui",["selectBtn","selectBtn2"],function(){a.SoundMixer.bgStop(),b.game.state.start("Cockey",!0,!1,1),c.CURRENT_GAME_START=1}),new a.OButton(this.game,"mmui",["selectBtn","selectBtn2"],function(){a.SoundMixer.bgStop(),b.game.state.start("Cockey",!0,!1,2),c.CURRENT_GAME_START=2}),new a.OButton(this.game,"mmui",["selectBtn","selectBtn2"],function(){a.SoundMixer.bgStop(),b.game.state.start("Hockey",!0),c.CURRENT_GAME_START=3})],this._btns[0].position.set(this.world.centerX,572*a.Main.SCALE),
this._btns[1].position.set(this.world.centerX,728*a.Main.SCALE),this._btns[2].position.set(this.world.centerX,886*a.Main.SCALE),this._btns[0].bangle=1.2,this._btns[1].bangle=-1,this._btns[2].bangle=1,this._btns[0].enabled=!1,this._btns[1].enabled=!1,this._btns[2].enabled=!1,this._black.addChild(this._btns[0]),this._black.addChild(this._btns[1]),this._black.addChild(this._btns[2]);var d=this.game.make.text(0,-4*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-training"],{font:"BubbleboddyNeue-Regular",fontSize:50*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center",fontWeight:"bold"});d.anchor.setTo(.5),this._textArrays.push(d),this._btns[0].createStableContainer(),this._btns[0].stableContainer.addChild(d);var e=this.game.make.text(0,-4*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-championship"],{font:"BubbleboddyNeue-Regular",fontSize:50*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center",fontWeight:"bold"});e.anchor.setTo(.5),this._textArrays.push(e),this._btns[1].createStableContainer(),this._btns[1].stableContainer.addChild(e);var f=this.game.make.text(0,-4*a.Main.SCALE,a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-duel"],{font:"BubbleboddyNeue-Regular",fontSize:50*a.Main.SCALE+"px",fill:"#FFFFFF",align:"center",fontWeight:"bold"});f.anchor.setTo(.5),this._textArrays.push(f),this._btns[2].createStableContainer(),this._btns[2].stableContainer.addChild(f),this._black.exists=!1},c.prototype.showSelectLevel=function(){this._black.exists=!0,this._black.alpha=0,this.add.tween(this._black).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0),this._btns[0].angle=-12,this._btns[1].angle=17,this._btns[2].angle=-15;for(var b=this,c=0;c<3;c++)!function(c){b._btns[c].y=b.game.height,b._btns[c].alpha=0,b._btns[c].idd=c;var d=572*a.Main.SCALE;1==c&&(d=728*a.Main.SCALE),2==c&&(d=886*a.Main.SCALE),b.add.tween(b._btns[c]).to({angle:b._btns[c].bangle,y:d},400,Phaser.Easing.Back.Out,!0,100+150*c).onStart.addOnce(function(){a.SoundMixer.play("swishSnd",1+.1*c)}),b.add.tween(b._btns[c]).to({alpha:1},400,Phaser.Easing.Quadratic.Out,!0,100+150*c).onComplete.addOnce(function(a){a.enabled=!0})}(c)},c.prototype.moveCallback=function(b){var c=b.position.x,d=(b.position.y,(this.game.world.centerX-c)/this.game.world.centerX);this._circ1x=1432*a.Main.SCALE-50*d*a.Main.SCALE,this._circ2x=1508*a.Main.SCALE-20*d*a.Main.SCALE,this._circ3x=1234*a.Main.SCALE-10*d*a.Main.SCALE},c.prototype.initLngPanel=function(){var b=this;1==window["language-menu"]&&(this._lang=new a.OButton(this.game,"lng",["btnLng"],function(){b.showLngPanel()}),this._lang.x=1818*a.Main.SCALE-150*a.Main.SCALE,this._lang.y=115*a.Main.SCALE,this.world.addChild(this._lang),this._langIcon=this.make.image(0,-3*a.Main.SCALE,"lng","miniBtnLng0001"),this._langIcon.anchor.set(.5),this._lang.addChild(this._langIcon),this._lang.alpha=0,this.add.tween(this._lang).to({alpha:1},200,Phaser.Easing.Quadratic.Out,!0,400),this.createLngPanel())},c.prototype.updateLanguage=function(b,c){this._langIcon&&(this._langIcon.frameName="miniBtnLng000"+(b+1)),this._logo.frameName="mmLogo_"+a.Boot.CURRENT_LANGUAGE.curLng,this._caption.frameName="caption000"+(0==b?"1":"2"),this._copyright.frameName="copyright000"+("ru"==a.Boot.CURRENT_LANGUAGE.curLng?1:2),this._textArrays[0]&&(this._textArrays[0].text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-training"],this._textArrays[1].text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-championship"],this._textArrays[2].text=a.Main.DATA[a.Boot.CURRENT_LANGUAGE.curLng]["game-duel"])},c.prototype.showLngPanel=function(){this._exitBtn.enabled=!0,this._bglp.exists=!0,this.add.tween(this._bglp).to({alpha:1},300,Phaser.Easing.Circular.Out,!0),this.add.tween(this._panel).to({y:this.world.centerY},300,Phaser.Easing.Circular.Out,!0);var b=a.Boot.CURRENT_LANGUAGE.currentIndex;this._selector.x=this._lngBtns[b].x,this._selector.y=this._lngBtns[b].y},c.prototype.hideLngPanel=function(){var b=this;this.add.tween(this._bglp).to({alpha:0},300,Phaser.Easing.Circular.Out,!0),this.add.tween(this._panel).to({y:this.world.centerY-500*a.Main.SCALE},300,Phaser.Easing.Circular.Out,!0).onComplete.addOnce(function(){b._bglp.exists=!1})},c.prototype.createLngPanel=function(){var b=this;this._bglp=this.add.graphics(0,0),this._bglp.beginFill(0,.4),this._bglp.drawRect(0,0,this.game.width,this.game.height),this._bglp.endFill(),this._bglp.alpha=0,this._bglp.exists=!1,this._bglp.inputEnabled=!0,this._panel=this.make.sprite(this.world.centerX,this.world.centerY-500*a.Main.SCALE,"lng","lngPanel"),this._panel.anchor.set(.5),this._bglp.addChild(this._panel),this._exitBtn=new a.OButton(this.game,"lng",["close","close2"],function(){b._exitBtn.enabled=!1,b.hideLngPanel()}),this._exitBtn.enabled=!1,this._exitBtn.position.set(0,350*a.Main.SCALE),this._panel.addChild(this._exitBtn),this._selector=this.make.image(0,0,"lng","lngSelected"),this._selector.anchor.set(.5),this._panel.addChild(this._selector),this._lngBtns=[];for(var c=0;c<4;c++){var d=new a.OButton(this.game,"lng",["LNG000"+(c+1)],function(c){a.Boot.CURRENT_LANGUAGE.setLng(c.lng),b.updateLanguage(c.lngind,c.lng),b._selector.x=c.x,b._selector.y=c.y});d.lngind=c,d.lng=a.Boot.CURRENT_LANGUAGE.getNameLanguage(c);var e=5+c>0?5:0;d.position.set(-214.7*a.Main.SCALE+210*a.Main.SCALE*c-(99+e)*a.Main.SCALE,-241.1*a.Main.SCALE+119*a.Main.SCALE),d.setAnimationScale(0),this._panel.addChild(d),this._lngBtns.push(d)}for(var c=0;c<4;c++){var d=new a.OButton(this.game,"lng",["LNG000"+(c+1+4)],function(c){a.Boot.CURRENT_LANGUAGE.setLng(c.lng),b.updateLanguage(c.lngind,c.lng),b._selector.x=c.x,b._selector.y=c.y});d.lngind=c+4,d.lng=a.Boot.CURRENT_LANGUAGE.getNameLanguage(c+4);var e=5+c>0?5:0;d.position.set(-214.7*a.Main.SCALE+210*a.Main.SCALE*c-(99+e)*a.Main.SCALE,107.9*a.Main.SCALE),d.setAnimationScale(0),this._panel.addChild(d),this._lngBtns.push(d)}},c.prototype.setEnbldLngBtns=function(a){for(var b=0;b<this._lngBtns.length;b++)this._lngBtns[b].enabled=a},c.CURRENT_GAME_START=1,c.FIRST_TIME=!0,c}(Phaser.State);a.MainMenu=b}(TProject||(TProject={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),TProject;!function(a){var b=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}return __extends(c,b),c.prototype.loading=function(){this.loadAtlases(["hockey/hockeyAtlas","hockey/hockeyAtlas2","hockey/hockeyAtlas3","ui/mmui","ui/lng","ui/ui","cockey/catlas","cockey/smoke_defense","cockey/smoke_hit","cockey/smoke_idle","cockey/smoke_left","cockey/smoke_right"]),this.loadImages(["hockey/hockeybg","cockey/bg2"]),this.loadFonts(["GinzaNarrow-Heavy","GinzaNarrow-Light","BubbleboddyNeue-Regular"]),this.loadAudiosprite("sfx"),this.game.load.json("msgs",a.Boot.PATH_SETTINGS+"msgs.json"),a.Boot.SCROLL_OVERLAY.start()},c.prototype.end=function(){a.SoundMixer.init(this.game),a.Main.DATA=this.game.cache.getJSON("msgs"),a.SoundMixer.play("main_menu_music",.3,!0,!0)},c}(a.BasePreloader);a.Preloader=b}(TProject||(TProject={}));