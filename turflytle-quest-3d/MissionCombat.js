pc.script.attribute("enemyAmount","number",1),pc.script.attribute("displayName","string",""),pc.script.attribute("unlockNextMission","string",""),pc.script.attribute("time","number",30,{displayName:"Time(Second)"}),pc.script.attribute("showTutorial","boolean",!1),pc.script.create("MissionCombat",function(a){var b=function(a){this.entity=a,this.type=MissionTypes.COMBAT};return b.prototype={initialize:function(){this.displayName.indexOf("Bowling")>0?this.displayName=textDic.Mission.Bowling.value:this.displayName=textDic.Mission.Combat.value,this.childGame="List"===this.entity.getParent().getName(),this.childGame?this.missionManager=this.entity.getParent().getParent().script.ComplexMission:this.missionManager=a.root.findByName("Missions").script.MissionManager,this.missionManager.registerMission(this),this.popupMessageScript=a.root.findByName("PopupMessage").script.PopupMessage,this.tutorialMessageScript=a.root.findByName("TutorialMessage").script.PopupMessage,this.enemies=this.entity.findByName("Enemies"),this.childGame||(this.start=this.entity.findByName("Start"),this.startBodyWrapper=this.start.script?this.start.script.BodyWrapper:this.start.findByName("Collision").script.BodyWrapper),this.killedEnemies=0,this.enemyList=this.enemies.getChildren(),this.screenCoord=new pc.Vec3,this.camera=a.root.findByName("Camera").camera},update:function(a){!this.enemies.enabled},onEnable:function(){this.startBodyWrapper&&this.startBodyWrapper.on("onCollisionEnter",this.onCollisionEnter,this)},onDisable:function(){this.startBodyWrapper&&this.startBodyWrapper.off("onCollisionEnter",this.onCollisionEnter,this)},onCollisionEnter:function(a){"Player"!==a.name||this.enemies.enabled||(pc.Utils.debug("missionCombat","onCollisionEnter",this.displayName+" Started!"),this.missionManager.showMission(this))},killEnemy:function(a){if(this.killedEnemies+=a,this.killedEnemies===this.enemyAmount)this.showTutorial&&(this.tutorialMessageScript.timer=-1),this.missionManager.missionComplete(this);else{var b,c,d,e,f=this.enemyAmount-this.killedEnemies;if(f>1){var g=textDic.Mission.Combat_Emeny_Left_Plural;b=f.toString()+" "+g.value,c=g.offsetX,d=g.offsetY,e=g.size}else{var g=textDic.Mission.Combat_Emeny_Left_Singular;b=f.toString()+" "+g.value,c=g.offsetX,d=g.offsetY,e=g.size}this.popupMessageScript.addMessage(b),this.popupMessageScript.setFont(c,d,e)}},_showTutorial:function(){var b,c,d,e,f="";a.touch?(e=textDic.Mission.Combat_Tutorial_Mobile,f=e.value,b=e.offsetX,c=e.offsetY,d=e.size):(e=textDic.Mission.Combat_Tutorial_Desktop,f=e.value,b=e.offsetX,c=e.offsetY,d=e.size),this.tutorialMessageScript.addMessage(f,MissionTypes.COMBAT),this.tutorialMessageScript.setFont(b,c,d)},disableMission:function(){this.entity.enabled=!1},enableMission:function(){this.entity.enabled=!0},startMission:function(){this.showTutorial&&this._showTutorial(),this.enemies.enabled=!0;for(var a=0;a<this.enemyList.length;a++){var b=this.enemyList[a];b.enabled=!0,b.script.Enemy.spawnEvent()}},destroyMission:function(){this.startBodyWrapper&&nick.engine.removeBody(this.startBodyWrapper.body);for(var a=0;a<this.enemyList.length;a++)nick.engine.removeBody(this.enemyList[a].script.BodyWrapper.body);this.entity.destroy()},failMission:function(){this.showTutorial&&(this.tutorialMessageScript.timer=-1),this.entity.enabled=!0,this.enemies.enabled=!1,this.killedEnemies=0}},b});