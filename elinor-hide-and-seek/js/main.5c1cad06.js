(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"++5T":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s){var a;return(a=t.call(this,e)||this).followerId=i,a.seeker=s,a.onPosition=new Phaser.Signal,a.onAnimEnd=new Phaser.Signal,a.skin=a.game.make.spine(0,0,i,!0),a.skin.anchor.set(.5,1),a.addChild(a.skin),a.update(),a.updateTransform(),a.skin.setMixByName("walk","idle",.25),a.skin.setMixByName("idle","walk",.25),a.currentAnim="",a.playAnim("idle"),a.skin.setSkinByName("base"),a.x=a.destX=a.seeker.x-100,a.skin.skeleton.getRootBone().scaleX=.4,a.skin.skeleton.getRootBone().scaleY=.4,a}(0,a.default)(e,t);var i=e.prototype;return i.playAnim=function(t,e){void 0===e&&(e=!0),this.currentAnim!==t&&(this.currentAnim=t,this.skin.setAnimationByName(0,t,e))},i.setPosition=function(t){this.x=this.destX=t,this.playAnim("idle")},i.gotoPosition=function(t){this.destX=t;var e=this.destX>this.x?1:-1;this.setDirection(-e),this.playAnim("walk")},i.step=function(t){var e=this.seeker.x-this.x;if(Math.abs(e)>100){var i=e>0?1:-1;this.gotoPosition(this.seeker.x-100*i)}if(this.destX!==this.x){var s=this.destX-this.x,a=this.destX>this.x?1:-1,n=Math.min(Math.abs(s),300*t);this.x+=a*n,this.setDirection(-a)}else"walk"===this.currentAnim&&this.playAnim("idle")},i.setDirection=function(t){this.skin.skeleton.getRootBone().scaleX=.4*t},e}(Phaser.Group);e.default=n},0:function(t,e,i){t.exports=i("vGYV")},"0BGZ":function(t,e,i){"use strict";i("YY9M"),i("pXic"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("hDA+"),a=i("6YV8"),n=function(){function t(t,e,i,a){this.game=t,this.id=e,this.data=i,this.levelRef=a,this.onEnd=new Phaser.Signal,this.captionsData=this.game.cache.getJSON(e+"_captions"),this.captionsData&&(this.captionsData=(0,s.processCaptions)(this.game,this.captionsData,this.id+"_vo-audioatlas"),this.game.springRollCaptionsPlugin.setData(this.captionsData)),this.skip=!1,this.data.displayOnce&&(this.skip=this.game.controller.player.wasOnboardingDisplayed(this.id))}var e=t.prototype;return e.start=function(){this.ind=-1,this.time=0,this.waitTime=0,this.isDelayed=!1,this.delayEvent=null,this.finished=!1,this.nextEvent()},e.nextEvent=function(){this.ind++,this.time=0,this.ind<this.data.events.length&&!this.skip?(this.event=this.data.events[this.ind],this.waitTime=this.event.duration||0,this.setEventEndCondition(),this.event.delay>0?(this.isDelayed=!0,this.delayEvent=this.game.time.events.add(1e3*this.event.delay,this.startEvent,this)):this.startEvent()):this.finished||(this.finished=!0,this.game.controller.player.saveOnboarding(this.id),this.data.tracking&&(0,a.getGA)().track({action:"TutorialComplete",label:this.data.tracking}),this.onEnd.dispatch())},e.startEvent=function(){switch(this.isDelayed=!1,this.delayEvent=null,this.event.action.type){case"lock_controls":this.levelRef.location.disableControls(),this.levelRef.location.lockCharacters();break;case"unlock_controls":this.levelRef.location.unlockCharacters(),this.event.action.onlyCharacters||this.levelRef.location.enableControls();break;case"lock_hud":this.levelRef.gameHud.charactersList.lock();break;case"unlock_hud":this.levelRef.gameHud.charactersList.unlock();break;case"lock_arrows":this.levelRef.gameHud.lockArrows();break;case"unlock_arrows":this.levelRef.gameHud.unlockArrows();break;case"ui_unlock_icon":var t=this.event.action.character;this.levelRef.gameHud.charactersList.getSlotForCharacter(t).unlock();break;case"seeker_goto":this.event.action.from&&this.levelRef.seeker.setPosition(this.event.action.from),this.levelRef.seeker.gotoPosition(this.event.action.to);break;case"seeker_play_anim":this.levelRef.seeker.playAnim(this.event.action.name);break;case"simple_character_add":this.levelRef.location.addSimpleCharacter(this.event.action.character_id,this.event.action.x,this.event.action.dir);break;case"simple_character_remove":this.levelRef.location.removeSimpleCharacter(this.event.action.character_id);break;case"simple_character_goto":this.levelRef.location.moveSimpleCharacter(this.event.action.character_id,this.event.action.x,this.event.action.time);break;case"reveal_character":var e=this.event.action.character,i=this.levelRef.location.findSlotWithCharacter(e);i&&i.character.findMe();break;case"hide_character":var s=this.event.action.character,a=this.levelRef.location.getSlotById(this.event.action.slot_id),n=this.levelRef.gameHud.charactersList.getSlotForCharacter(s);n.setStateHidden(),a.addCharacter(s,n),a.hudSlotRef=n,a.character.removeControls();break;case"lock_character":var o=this.event.action.character,h=this.levelRef.location.findSlotWithCharacter(o);h&&h.character.lock(this.event.action.withClothing);break;case"unlock_character":var r=this.event.action.character,l=this.levelRef.location.findSlotWithCharacter(r);l&&l.character.unlock();break;case"play_vo":var d=this.event.action.textId;if(this.event.action.alts){var c=Math.floor(Math.random()*this.event.action.alts.length);d+=this.event.action.alts[c]}this.event.action.suffix&&(this.game.device.desktop?d+=this.event.action.suffix.desktop:d+=this.event.action.suffix.mobile),this.game.springRollCaptionsPlugin.playCaption(d),this.playingVO=this.game.sounds.playVO(d,{spriteID:this.id+"_vo"});var u=this.captionsData[d];this.waitTime=this.waitTime>0?this.waitTime:u[u.length-1].end/1e3,this.event.action.withAnim&&this.levelRef.seeker.startTalkForward(.9*this.waitTime*1e3);break;case"stop_last_vo":this.playingVO&&(this.playingVO.stop(),this.playingVO=null,this.levelRef.seeker&&this.levelRef.seeker.stopTalkForward());break;case"set_toPlace":this.levelRef.toPlace=this.event.action.value,this.levelRef.location.isDraggingCharacter&&this.levelRef.toPlace++;break;case"ui_enlarge_character_icon":this.levelRef.gameHud.charactersList.enlargeCharacter(this.event.action.character);break;case"ui_normalize_character_icon":this.levelRef.gameHud.charactersList.normalizeCharacter(this.event.action.character);break;case"ui_pulse_character_icon":this.levelRef.gameHud.charactersList.pulseCharacter(this.event.action.character,this.event.action.repeat||-1);break;case"camera_pan":this.levelRef.camera.pan(this.event.action.x);break;case"ui_show_goto_marker":this.levelRef.location.addGotoMarker(this.event.action.x);break;case"ui_show_scroll_arrow":this.levelRef.gameHud.showScrollArrow(this.event.action.arrow,this.event.action.enabled);break;case"ui_hide_scroll_arrow":this.levelRef.gameHud.hideScrollArrow(this.event.action.arrow,this.event.action.enabled);break;case"ui_set_scroll_arrow_state":this.levelRef.gameHud.setScrollArrowState(this.event.action.arrow,this.event.action.state);break;case"ui_show_check_mark":this.levelRef.displayContinueButton();break;case"ui_show_slot_marker":this.levelRef.location.showSlotMarker(this.event.action.slot_id);break;case"ui_hide_slot_marker":this.levelRef.location.hideSlotMarker(this.event.action.slot_id);break;case"ui_disable_all_slots":this.levelRef.location.disableAllSlots();break;case"ui_enable_slot":this.levelRef.location.enableSlot(this.event.action.slot_id);break;case"ui_disable_slot":this.levelRef.location.disableSlot(this.event.action.slot_id);break;case"ui_pulse_clothing_button":var g=this.event.action.character;this.levelRef.location.findSlotWithCharacter(g).character.btnClothingEdit.pulse(4);break;case"ui_hide_clothing_check":var p=this.event.action.character;this.levelRef.location.findSlotWithCharacter(p).character.btnClothingCheck.visible=!1;break;case"ui_show_clothing_check":var m=this.event.action.character;this.levelRef.location.findSlotWithCharacter(m).character.btnClothingCheck.visible=!0;break;case"ui_hide_clothing_edit":var f=this.event.action.character;this.levelRef.location.findSlotWithCharacter(f).character.btnClothingEdit.visible=!1;break;case"ui_show_clothing_edit":var v=this.event.action.character;this.levelRef.location.findSlotWithCharacter(v).character.btnClothingEdit.visible=!0;break;case"ui_pulse_clothes":this.levelRef.gameHud.clothesList.pulseItems();break;case"ui_stop_pulse_clothes":this.levelRef.gameHud.clothesList.stopPulseItems();break;case"ui_show_draghand":this.levelRef.gameHud.charactersList.showDragHand(this.event.action.character);break;case"ui_hide_draghand":this.levelRef.gameHud.charactersList.hideDragHand(this.event.action.character);break;case"ui_hide_character_arrow":this.levelRef.gameHud.charactersList.hideArrow(this.event.action.character);break;case"ui_show_character_arrow":this.levelRef.gameHud.charactersList.showArrow(this.event.action.character)}void 0!==this.event.next_event_id&&(this.ind=this.event.next_event_id-1),0!==this.waitTime||this.event.end_condition&&this.event.end_condition.stopper||this.nextEvent()},e.setEventEndCondition=function(){if(this.removeAllListeners(),this.event.end_condition)switch(this.event.end_condition.type){case"seeker_on_position":this.levelRef.seeker.onPosition.addOnce(this.handleEndConditionPosition,this);break;case"user_found_any_character":this.levelRef.location.onFindChar.addOnce(this.handleEndConditionFoundAny,this);break;case"camera_on_position":this.levelRef.camera.onPosition.add(this.handleEndConditionCamera,this);break;case"user_tap_goto_marker":break;case"user_drag_character":this.levelRef.onDragCharacter.add(this.handleEndConditionDrag,this);break;case"user_hide_character":this.levelRef.onHideCharacter.add(this.handleEndConditionHide,this);break;case"user_scroll_screen":this.levelRef.camera.onScroll.add(this.handleEndConditionScroll,this);break;case"is_character_hidden":this.checkIfCharacterIsHidden(this.event.end_condition.character);break;case"user_tap_clothing_edit":var t=this.event.end_condition.character;this.levelRef.location.findSlotWithCharacter(t).character.onTapClothingEdit.addOnce(this.handleEndCondition,this);break;case"user_tap_clothing_check":var e=this.event.end_condition.character;this.levelRef.location.findSlotWithCharacter(e).character.onTapClothingCheck.addOnce(this.handleEndCondition,this);break;case"user_wear_clothes":var i=this.event.end_condition.character;this.levelRef.location.findSlotWithCharacter(i).character.onWearClothes.addOnce(this.handleEndCondition,this);break;case"user_tap_check_mark":this.levelRef.gameHud.charactersList.btnCheck.onInputDown.addOnce(this.handleEndCondition,this)}},e.handleEndConditionPosition=function(){this.levelRef.location.removeGotoMarker(),this.handleEndCondition()},e.handleEndConditionFoundAny=function(){this.handleEndCondition()},e.handleGotoMarkerTap=function(){this.handleEndCondition()},e.handleEndConditionCamera=function(){this.levelRef.camera.onPosition.remove(this.handleEndConditionCamera,this),this.handleEndCondition()},e.handleEndConditionDrag=function(){this.levelRef.onDragCharacter.remove(this.handleEndConditionDrag,this),this.handleEndCondition()},e.handleEndConditionHide=function(){this.levelRef.onHideCharacter.remove(this.handleEndConditionHide,this),this.handleEndCondition()},e.handleEndConditionScroll=function(){this.levelRef.camera.onScroll.remove(this.handleEndConditionScroll,this),this.handleEndCondition()},e.checkIfCharacterIsHidden=function(t){this.levelRef.location.findSlotWithCharacter(t)?this.handleEndCondition():this.game.time.events.add(100,this.checkIfCharacterIsHidden,this,t)},e.removeAllListeners=function(){this.levelRef.camera&&this.levelRef.camera.onPosition.remove(this.handleEndConditionCamera,this),this.levelRef.onDragCharacter&&this.levelRef.onDragCharacter.remove(this.handleEndConditionDrag,this),this.levelRef.onHideCharacter&&this.levelRef.onHideCharacter.remove(this.handleEndConditionHide,this),this.levelRef.camera&&this.levelRef.camera.onScroll.remove(this.handleEndConditionScroll,this),this.levelRef.gameHud.charactersList.btnCheck&&this.levelRef.gameHud.charactersList.btnCheck.onInputDown.remove(this.handleEndCondition,this)},e.handleEndCondition=function(){if(this.event.end_condition&&void 0!==this.event.end_condition.next_event_id)for(var t=0;t<this.data.events.length;t++)if(this.data.events[t].id===this.event.end_condition.next_event_id){this.ind=t-1;break}this.delayEvent&&(this.game.time.events.remove(this.delayEvent),this.delayEvent=null),this.nextEvent()},e.step=function(t){this.isDelayed||this.skip||(this.time+=t,this.time>=this.waitTime&&(this.event.end_condition&&this.event.end_condition.stopper||this.nextEvent()))},e.destroy=function(){this.playingVO&&this.playingVO.stop()},t}();e.default=n},"0nnT":function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("oyd0")),o=s(i("XpLG")),h=s(i("gsUa")),r=s(i("cE2L")),l=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).data=i,s.obj=s.game.make.image(0,0,"hiding_places",i.object_front),s.obj.scale.set(1),s.obj.anchor.set(.5,1),s.addChild(s.obj),s.x=i.position.x,s.y=i.position.y,s.isEmpty=!0,s.enabled=!0,s.onFindChar=new Phaser.Signal,s}(0,a.default)(e,t);var i=e.prototype;return i.getCenter=function(t){var e=this.data.characters.find((function(e){return e.id===t}));if(e){var i=this.data.character_scale;return{x:this.x+e.offset.x+this.parent.x,y:this.y+e.offset.y-120*i}}return null},i.getDestX=function(){return"bg"===this.data.layer?this.x:this.x-this.game.state.getCurrentState().location.getForegrounOffsetForX(this.x)},i.showMarker=function(){if(this.marker&&(this.marker.destroy(),this.marker=null),this.enabled){var t=this.data.characters[0],e=this.data.character_scale,i=t.offset.x,s=t.offset.y-120*e;e=Math.min(1,e),this.marker=new h.default(this.game,i,s),this.marker.scale.set(e),this.addChild(this.marker)}},i.hideMarker=function(){this.marker&&(this.removeChild(this.marker),this.marker.destroy(),this.marker=null)},i.showBlings=function(){var t=this.data.characters[0],e=this.data.character_scale,i=t.offset.x,s=t.offset.y-120*e;e=Math.min(1,e);var a=new r.default(this.game,i,s);a.scale.set(e),this.addChild(a),this.character.wiggle()},i.lockCharacter=function(){this.character&&this.character.lock()},i.unlockCharacter=function(){this.character&&this.character.unlock()},i.unlockCharacterCheckBtn=function(){this.character&&this.character.unlockCheckBtn()},i.hideDressUpButtons=function(t){this.character&&this.characterId!==t&&this.character.hideDressUpButtons()},i.showDressUpButtons=function(){this.character&&this.character.showDressUpButtons()},i.addCharacter=function(t,e){void 0===e&&(e=null),this.isEmpty=!1;var i=this.data.characters.find((function(e){return e.id===t}));this.characterId=t,this.character=new n.default(this.game,this,i,this.data.character_scale),this.addChildAt(this.character,0),this.character.onFindChar.add(this.handleFindChar,this),this.character.hudSlotRef=e,this.rating=i.score},i.updateRating=function(){var t=this;-1===this.character.clothId?this.rating=this.character.charData.score:this.rating=this.data.clothes.find((function(e){return e.id===t.character.clothId})).score},i.revealCharacter=function(){this.removeChild(this.character),this.addChild(this.character),this.character.reveal()},i.removeCharacter=function(){this.isEmpty=!0,this.removeChild(this.character),this.character.destroy(),this.character=null,this.characterId=null},i.returnCharacter=function(){this.isEmpty||(this.character.hudSlotRef.setStateInitial(),this.removeCharacter())},i.handleFindChar=function(t){this.revealCharacter(),this.onFindChar.dispatch(t)},i.getCharacterPos=function(){return{x:this.x+this.parent.x+this.character.x,y:this.y+this.character.y-.5*this.character.height}},i.getCharacterToFront=function(){this.addChild(this.character)},i.sendCharacterBack=function(){this.addChildAt(this.character,0)},i.showStarsPopup=function(){var t=new o.default(this.game,this.rating+1);t.x=this.character.x,t.y=this.character.y-this.character.height+this.character.character.y,this.addChild(t)},e}(Phaser.Group);e.default=l},"0rWv":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i,s=e.game,a=e.x,n=void 0===a?0:a,o=e.y,h=void 0===o?0:o,r=e.up,l=e.over,d=e.atlas,c=void 0===d?"ui_buttons":d,u=e.voID,g=e.voSpriteID,p=void 0===g?"vo_ui":g;return(i=t.call(this,{game:s,x:n,y:h,up:r,over:l,atlas:c})||this).voID=u,i.voSpriteID=p,i.canPlayVO=!0,i}return(0,a.default)(e,t),e.prototype.onOver=function(){this.isOver=!0,this.scale.set(1.1),this.canPlayVO&&(this.game.sounds.playVO(this.voID,{spriteID:this.voSpriteID}),this.game.springRollCaptionsPlugin.playCaption(this.voID))},e}(s(i("dD3M")).default);e.default=n},"1f/r":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i;return(i=t.call(this,e)||this).char=i.game.make.spine(0,0,"elinor_no_peeking",!0),i.char.anchor.set(.5,1),i.char.setAnimationByName(0,"animation",!0),i.addChild(i.char),i}(0,a.default)(e,t);var i=e.prototype;return i.idle=function(){this.char.setSkinByName("mouth/closed"),this.char.setToSetupPose()},i.talk=function(){this.char.setSkinByName("mouth/talking"),this.char.setToSetupPose()},e}(Phaser.Group);e.default=n},"2drJ":function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e,i,s,n,h){var r;(r=t.call(this,e,i,s)||this).clothData=n,r.slotRef=h;var l=r.clothData.image_key;return r.game.controller.location===o.LOCATION_WINTER&&l.indexOf("olive")>-1&&(l+="_winter"),r.loadTexture("ui_dress_up",l),r.anchor.set(.5),r.inputEnabled=!0,r.input.enabled=!0,r.game.input.onUp.add(r.onReleaseMe,(0,a.default)(r)),r}(0,n.default)(e,t);var i=e.prototype;return i.startDrag=function(t){this.pointer=t,this.isDragging=!0,this.dx=this.x+this.parent.x-t.x,this.dy=this.y+this.parent.y-t.y},i.onDragMe=function(t,e,i,s,a){},i.onReleaseMe=function(t){this.pointer===t&&(this.input.enabled=!1,this.input.disableDrag(),this.events.onDragUpdate.remove(this.onDragMe,this),this.game.input.onUp.remove(this.onReleaseMe,this),this.game.state.getCurrentState().stopDragCloth(this),this.destroy())},i.update=function(){if(this.isDragging){var e=this.pointer;this.x=e.x+this.dx-this.parent.x,this.y=e.y+this.dy-this.parent.y}t.prototype.update.call(this)},e}(Phaser.Image);e.default=h},"2yko":function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("YY9M"),i("ocEJ"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("dD3M")),o=i("6YV8"),h=i("hDA+"),r=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).cutsceneId=i,s.data=s.game.controller.getCutsceneData(i).data,s.game.controller.player.saveCutscene(s.cutsceneId),s.data.onlyAnim||s.setAudioId(i),s.onAnimComplete=new Phaser.Signal,s.audioSkeleton=null,s.makeScene(),s.playAnim(s.data.anims[0]),s}(0,a.default)(e,t);var i=e.prototype;return i.setAudioId=function(t){this.audioId=t+"_vo",this.cptData=this.game.cache.getJSON(t+"_captions"),this.cptData=(0,h.processCaptions)(this.game,this.cptData,this.audioId+"-audioatlas"),this.game.springRollCaptionsPlugin.setData(this.cptData)},i.getIcon=function(){var t=this.data.skeletons.indexOf(this.data.icon_skeleton_id),e=this.skeletons[t];return this.skeletons[t]=null,e},i.showSkipButton=function(){this.btnSkip=new n.default({game:this.game,up:"btn_skip",over:"btn_skip"}),this.btnSkip.x=this.game.width/2-55,this.btnSkip.y=this.game.defaultHeight/2-55,this.addChild(this.btnSkip),this.btnSkip.onInputDown.add(this.handleSkipButton,this)},i.handleSkipButton=function(){var t=this.game.controller.location,e=(t=t.replace(/^\w/,(function(t){return t.toUpperCase()})))+" Level "+(this.game.controller.levelId+1);(0,o.getGA)().track({action:"CutSceneSkip",label:e}),this.handleAnimComplete()},i.makeScene=function(){this.skeletons=[];for(var t=0;t<this.data.skeletons.length;t++){var e=this.data.skeletons[t],i=this.game.make.spine(0,0,e,!0);i.anchor.set(.5,1),this.skeletons.push(i),this.addChild(i),e===this.data.audio_skeleton_id&&(this.audioSkeleton=i,this.audioSkeleton.onEvent.add(this.handleAudioEvent,this))}},i.handleAudioEvent=function(t,e){this.textId=e.data.name,this.game.springRollCaptionsPlugin.playCaption(this.textId),this.game.sounds.playVO(this.textId,{spriteID:this.audioId})},i.playAnim=function(t,e){if(void 0===e&&(e=!1),this.game.controller.shortcutsModel.cutscenesEnabled){var i=-1,s=0;this.tracks=[];for(var a=0;a<this.skeletons.length;a++){var n=this.skeletons[a].setAnimationByName(0,t,e);n.animationEnd>0&&n.animationEnd>s&&(s=n.animationEnd,i=a),this.tracks.push(n),n.timeScale=.01}i>=0&&(this.skeletenWithEvent=this.skeletons[i],this.skeletenWithEvent.onComplete.addOnce(this.handleAnimComplete,this)),this.game.time.events.add(500,this.startAnim,this)}else this.onAnimComplete.dispatch()},i.startAnim=function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].timeScale=1;this.tracks=[]},i.handleAnimComplete=function(){this.skeletenWithEvent.onComplete.remove(this.handleAnimComplete,this),this.skeletenWithEvent=null,this.dispatchAnimComplete()},i.dispatchAnimComplete=function(){this.onAnimComplete.dispatch()},i.destroy=function(){this.btnSkip&&(this.btnSkip.destroy(),this.btnSkip=null),this.game.springRollCaptionsPlugin.stopCaption(),this.game.sounds.stopAudioSprite(this.textId,{spriteID:this.audioId});for(var e=0;e<this.skeletons.length;e++)this.removeChild(this.skeletons[e]),this.skeletons[e]&&this.skeletons[e].destroy();this.skeletons=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=r},"3huV":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e,i){var s,n=void 0===i?{}:i,o=n.background,h=void 0!==o&&o,r=n.title,l=void 0!==r&&r;return(s=t.call(this,e)||this).game.scale.onSizeChange.add(s.positionContainer,(0,a.default)(s)),h&&s.setBackground(h),l&&s.setTitle(l),s.positionContainer(),s}(0,n.default)(e,t);var i=e.prototype;return i.setTitle=function(t){if(!this.title){var e={font:"62px "+o.FONT_EXTRA_BOLD,fill:"#FFFFFF",align:"center",wordWrap:!0,wordWrapWidth:960};this.title=this.game.make.text(.5*this.game.defaultWidth,50,"",e),this.title.setShadow(0,4,"rgba(0,0,0,0.15)",0),this.title.anchor.set(.5,0),this.add(this.title)}this.title.text=t},i.setBackground=function(t){this.bg||(this.bg=this.game.make.image(0,0),this.bg.anchor.set(.5),this.bg.x=.5*this.game.defaultWidth,this.bg.y=.5*this.game.defaultHeight,this.addChildAt(this.bg,0)),this.bg.loadTexture(t)},i.positionContainer=function(){this.x=(this.game.width-this.game.defaultWidth)/2,this.y=(this.game.height-this.game.defaultHeight)/2},i.update=function(){t.prototype.update.call(this)},i.destroy=function(){this.bg&&(this.bg.destroy(),this.bg=null),this.title&&(this.title.destroy(),this.title=null),this.game.scale.onSizeChange.remove(this.positionContainer,this),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=h},"4+AI":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s,a,n){var o;(o=t.call(this,e)||this).x=i,o.y=s,o.character=o.game.make.spine(0,0,a,!0),o.character.anchor.set(.5,1),o.playAnim("idle"),o.addChild(o.character);var h=1;return"right"===n&&(h=-1),o.dir=h,o.sc=.4,o.rb=o.character.skeleton.getRootBone(),o.rb.scaleX=o.sc*h,o.rb.scaleY=o.sc,o.character.setSkinByName("base"),o.updateTransform(),o.update(),o}(0,a.default)(e,t);var i=e.prototype;return i.setScale=function(t){this.sc=t,this.rb.scaleX=this.sc*this.dir,this.rb.scaleY=this.sc,this.updateTransform(),this.update()},i.runTo=function(t,e){this.playAnim("walk");var i=t>this.x?1:-1;this.setDirection(-i),this.game.add.tween(this).to({x:t},1e3*e,null,!0)},i.playAnim=function(t,e){void 0===e&&(e=!0),this.currentAnim!==t&&(this.currentAnim=t,this.character.setAnimationByName(0,t,e))},i.setDirection=function(t){this.character.skeleton.getRootBone().scaleX=this.sc*t,this.update(),this.updateTransform()},i.destroy=function(){this.character.destroy(),this.character=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=n},"4M19":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("r1nK")),o=function(t){function e(e,i){var s;s=t.call(this,e)||this;var a=.5*-(i.length-1)*150;s.slots={};for(var o=0;o<i.length;o++){var h=i[o].id,r=new n.default(s.game,h);r.x=a+150*o,r.destX=r.x,s.addChild(r),s.slots[h]=r}return s}(0,a.default)(e,t);var i=e.prototype;return i.setSlotsPositions=function(){var t=0;for(var e in this.slots)this.slots.hasOwnProperty(e)&&t++;var i=.5*-(t-1)*150,s=0;for(var a in this.slots)this.slots.hasOwnProperty(a)&&(this.slots[a].destX=i+150*s,s++)},i.revealCharacter=function(t){this.slots[t].revealCharacter(),this.game.time.events.add(1e3,this.handleRevealEnd,this,t)},i.handleRevealEnd=function(t){delete this.slots[t],this.setSlotsPositions()},i.enlargeCharacter=function(t){this.slots[t].enlarge()},i.normalizeCharacter=function(t){this.slots[t].normalize()},i.pulseCharacter=function(t,e){this.slots[t].pulse(e)},i.getSlotForCharacter=function(t){return this.slots[t]},i.lock=function(){for(var t in this.slots)if(this.slots.hasOwnProperty(t)){var e=this.slots[t];e.isEmpty||e.lock()}},i.unlock=function(){for(var t in this.slots)if(this.slots.hasOwnProperty(t)){var e=this.slots[t];e.isEmpty||e.unlock()}},e}(Phaser.Group);e.default=o},"4UFF":function(t,e,i){"use strict";var s=i("R6lU");i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=s(i("figK")),r=s(i("t/rg")),l=s(i("hF+C")),d=s(i("nZCe")),c=s(i("bpkO")),u=s(i("xJv3")),g=s(i("9QYG")),p=s(i("as36")),m=s(i("qmnK")),f=s(i("62b2")),v=s(i("V1hc")),y=s(i("4M19")),b=s(i("QK8x")),_=s(i("7xLJ")),C=s(i("fZdh")),k=i("zgbH"),w=i("6YV8"),P=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).game.scale.onSizeChange.add(s.positionContainer,(0,a.default)(s)),s.onScrollLeft=new Phaser.Signal,s.onScrollRight=new Phaser.Signal,s.onCountEnd=new Phaser.Signal,s.onCloseResult=new Phaser.Signal,s.onCloseExplainer=new Phaser.Signal,s.onConfirmHide=new Phaser.Signal,s.onCloseTPOverlay=new Phaser.Signal,s.onCloseElinor=new Phaser.Signal,s.createScrollArrows(),s.hideScrollArrows(),s.game.controller.gameMode===k.MODE_SEEK?s.charactersList=new y.default(s.game,i):s.charactersList=new b.default(s.game,i),s.addChild(s.charactersList),s.charactersList.x=.5*s.game.width,s.charactersList.y=100,s.game.controller.levelData.dress_up&&(s.createClothesList(),s.hideClothes()),s.btnHome=new o.default({game:s.game,up:"btn_home_small",down:"btn_home_small"}),s.btnHome.x=80,s.btnHome.y=80,s.btnHome.onInputDown.add(s.handleBtnHome,(0,a.default)(s)),s.addChild(s.btnHome),s}(0,n.default)(e,t);var i=e.prototype;return i.handleBtnHome=function(){var t=this.game.controller.location,e=(t=t.replace(/^\w/,(function(t){return t.toUpperCase()})))+" Level "+(this.game.controller.levelId+1);(0,w.getGA)().track({action:"Home",label:e}),this.game.controller.showWelcomeScreen()},i.positionContainer=function(){this.btnRight.x=this.game.width-43,this.arrowRight&&(this.arrowRight.x=this.game.width-140),this.overlayCount&&(this.overlayCount.x=.5*(this.game.width-this.game.defaultWidth),this.overlayCount.positionElements()),this.overlayResult&&(this.overlayResult.x=.5*(this.game.width-this.overlayResult.width)),this.overlayElinor&&(this.overlayElinor.x=.5*(this.game.width-this.game.defaultWidth)),this.overlayTPEndScreen&&(this.overlayTPEndScreen.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPEndScreen.positionElements()),this.charactersList.parent===this&&(this.charactersList.x=.5*this.game.width+(this.charactersList.offset||0)),this.btnContinue&&(this.btnContinue.x=.5*(this.game.width-this.btnContinue.width),this.btnContinue.y=this.game.height-this.btnContinue.height-50)},i.showOverlayCount=function(t,e){void 0===e&&(e=!0),this.game.controller.shortcutsModel.countdownEnabled?(this.overlayCount=new h.default(this.game,t,e),this.addChild(this.overlayCount),this.overlayCount.x=.5*(this.game.width-this.overlayCount.width),this.overlayCount.onCountEnd.addOnce(this.handleCountEnd,this)):this.onCountEnd.dispatch()},i.handleCountEnd=function(){this.onCountEnd.dispatch()},i.removeOverlayCount=function(){this.removeChild(this.overlayCount),this.overlayCount.destroy(),this.overlayCount=null},i.showOverlayResult=function(t,e){this.overlayResult=new r.default(this.game,t,e),this.addChild(this.overlayResult),this.overlayResult.x=.5*(this.game.width-this.overlayResult.width),this.overlayResult.onCloseResult.addOnce(this.handleCloseResult,this)},i.showOverlayResultHide=function(t,e,i){this.overlayResult=new l.default(this.game,t,e,i),this.addChild(this.overlayResult),this.overlayResult.x=.5*(this.game.width-this.overlayResult.width),this.overlayResult.onCloseResult.addOnce(this.handleCloseResult,this)},i.handleCloseResult=function(t){this.onCloseResult.dispatch(t)},i.showOverlayElinorTalk=function(t,e){this.overlayElinor=new c.default(this.game,t,e),this.addChild(this.overlayElinor),this.overlayElinor.x=.5*(this.game.width-this.game.defaultWidth),this.overlayElinor.onClose.addOnce(this.handleCloseElinor,this)},i.handleCloseElinor=function(){this.overlayElinor.destroy(),this.overlayElinor=null,this.onCloseElinor.dispatch()},i.showDressUp=function(t,e,i){this.clothesList.init(i,e),this.showClothes()},i.createClothesList=function(){this.clothesList=new C.default(this.game),this.clothesList.x=.5*this.game.width,this.clothesList.y=60,this.addChild(this.clothesList)},i.showClothes=function(){this.clothesList.visible=!0},i.hideClothes=function(){this.clothesList.visible=!1},i.showCurrentPlayerIcon=function(t,e){this.playerIcon&&this.playerIcon.destroy(),this.playerIcon=new _.default(this.game,25,640,e,t),this.playerIcon.scale.set(.8),this.addChild(this.playerIcon)},i.showOverlayTPCharacters=function(t){var e=this.game.controller.twoPlayersModel.getHidingPlayerIcon(),i=this.game.controller.twoPlayersModel.hidingPlayerId+1;this.overlayTPCharacters=new u.default(this.game,e,i,t),this.addChild(this.overlayTPCharacters),this.overlayTPCharacters.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPCharacters.onEnd.addOnce(this.showOverlayTPHidingAlert,this)},i.showOverlayTPHidingAlert=function(){var t=this.game.controller.twoPlayersModel.getSeekingPlayerIcon(),e=(this.game.controller.twoPlayersModel.hidingPlayerId+1)%2+1;this.overlayTPHidingAlert=new g.default(this.game,t,e),this.addChild(this.overlayTPHidingAlert),this.overlayTPHidingAlert.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPHidingAlert.onEnd.addOnce(this.showOverlayTPIcons,this)},i.showOverlayTPIcons=function(){this.overlayTPCharacters.destroy(),this.overlayTPHidingAlert.destroy(),this.overlayTPCharacters=null,this.overlayTPHidingAlert=null;var t=this.game.controller.twoPlayersModel.hidingPlayerId+1;this.overlayTPIcons=new p.default(this.game,this.playerIcon,t,this.charactersList),this.addChild(this.overlayTPIcons),this.overlayTPIcons.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPIcons.onEnd.add(this.handleOverlayTPIconsEnd,this)},i.handleOverlayTPIconsEnd=function(){this.addChild(this.charactersList),this.charactersList.x=.5*this.game.width,this.addChild(this.playerIcon),this.playerIcon.x=25,this.overlayTPIcons.destroy(),this.overlayTPIcons=null,this.onCloseTPOverlay.dispatch()},i.showOverlayTPSeekingAlert=function(){var t=this.game.controller.twoPlayersModel.getSeekingPlayerIcon(),e=(this.game.controller.twoPlayersModel.hidingPlayerId+1)%2+1;this.overlayTPSeekingAlert=new m.default(this.game,t,e),this.addChild(this.overlayTPSeekingAlert),this.overlayTPSeekingAlert.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPSeekingAlert.onClose.add(this.handleOverlayTPSeekingClose,this)},i.handleOverlayTPSeekingClose=function(){this.overlayTPSeekingAlert.onClose.remove(this.handleOverlayTPSeekingClose,this),this.overlayTPSeekingAlert.destroy(),this.overlayTPSeekingAlert=null,this.onCloseTPOverlay.dispatch()},i.showOverlayTPPlayerTwoTurn=function(){var t=this.game.controller.twoPlayersModel.getHidingPlayerIcon();this.overlayTPPlayerTwoTurn=new f.default(this.game,t),this.addChild(this.overlayTPPlayerTwoTurn),this.overlayTPPlayerTwoTurn.x=.5*(this.game.width-this.game.defaultWidth),this.overlayTPPlayerTwoTurn.onEnd.addOnce(this.hideOverlayTPPlayerTwoTurn,this)},i.hideOverlayTPPlayerTwoTurn=function(){this.overlayTPPlayerTwoTurn.destroy(),this.overlayTPPlayerTwoTurn=null,this.onCloseTPOverlay.dispatch()},i.showOverlayTPEndScreen=function(){this.overlayTPEndScreen=new v.default(this.game),this.addChild(this.overlayTPEndScreen),this.overlayTPEndScreen.x=.5*(this.game.width-this.game.defaultWidth)},i.createScrollArrows=function(){this.arrowsContainer=this.game.make.group(),this.addChild(this.arrowsContainer),this.btnLeft=new o.default({game:this.game,up:"arrow_left",down:"arrow_left",atlas:"ui_various"}),this.arrowsContainer.addChild(this.btnLeft),this.btnLeft.x=43,this.btnLeft.y=.5*this.game.height,this.btnLeft.onInputDown.add(this.handleBtnLeftInputDown,this),this.btnRight=new o.default({game:this.game,up:"arrow_right",down:"arrow_right",atlas:"ui_various"}),this.arrowsContainer.addChild(this.btnRight),this.btnRight.x=this.game.width-43,this.btnRight.y=.5*this.game.height,this.btnRight.onInputDown.add(this.handleBtnRightInputDown,this)},i.showScrollArrows=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&(this.btnLeft.visible=!0),e&&(this.btnRight.visible=!0)},i.hideScrollArrows=function(){this.btnLeft.visible=!1,this.btnRight.visible=!1},i.handleBtnLeftInputDown=function(){this.onScrollLeft.dispatch()},i.handleBtnRightInputDown=function(){this.onScrollRight.dispatch()},i.showContinueButton=function(){this.charactersList.showCheckButton()},i.handleContinueDown=function(){this.onConfirmHide.dispatch(),this.hideContinueButton()},i.hideContinueButton=function(){this.charactersList.hideCheckButton()},i.showTargets=function(t){},i.targetFound=function(t){},i.showExplainer=function(t,e,i,s){this.overlayExplainer=new d.default(this.game,t,e,i,s),this.addChild(this.overlayExplainer),this.overlayExplainer.onClick.addOnce(this.handleExplainerClick,this)},i.handleExplainerClick=function(){this.overlayExplainer.destroy(),this.overlayExplainer=null,this.onCloseExplainer.dispatch()},i.showScrollArrow=function(t,e){var i=this.btnLeft;"right"===t&&(i=this.btnRight),i.visible=!0,i.input.enabled=e},i.hideScrollArrow=function(t,e){var i=this.btnLeft;"right"===t&&(i=this.btnRight),i.visible=!1,i.input.enabled=e},i.setScrollArrowState=function(t,e){var i=this.btnLeft;"right"===t&&(i=this.btnRight),"active"===e?i.scale.set(1.2):i.scale.set(1)},i.lockArrows=function(){this.arrowsLocked=!0,this.btnLeft.input.enabled=!1,this.btnRight.input.enabled=!1},i.unlockArrows=function(){this.arrowsLocked=!1,this.btnLeft.input.enabled=!0,this.btnRight.input.enabled=!0},i.destroy=function(){this.game.scale.onSizeChange.remove(this.positionContainer,this),this.btnHome.onInputDown.remove(this.handleBtnHome,this),this.onScrollLeft.removeAll(),this.onScrollRight.removeAll(),this.onScrollLeft=null,this.onScrollRight=null,this.overlayTPEndScreen=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=P},"4ase":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("++5T")),h=i("zgbH"),r=function(t){function e(e,i,s,n,r,l){var d;return(d=t.call(this,e)||this).seekerId=i,d.navPoints=s,d.xMin=r,d.xMax=l,d.allFound=!1,d.onStartWalk=new Phaser.Signal,d.onPosition=new Phaser.Signal,d.onAnimEnd=new Phaser.Signal,d.levelRef=d.game.state.getCurrentState(),d.skin=d.game.make.spine(0,0,d.seekerId,!0),d.skin.anchor.set(.5,1),d.addChild(d.skin),d.update(),d.updateTransform(),d.mixAnimations(),d.currentAnim="",d.playAnim("idle"),d.skin.setSkinByName("base"),d.x=d.destX=n,d.skin.skeleton.getRootBone().scaleX=.4,d.skin.skeleton.getRootBone().scaleY=.4,"twins"===d.seekerId&&(d.follower=new o.default(d.game,"mary",(0,a.default)(d))),d.game.controller.gameMode===h.MODE_SEEK&&d.createButton(),d}(0,n.default)(e,t);var i=e.prototype;return i.mixAnimations=function(){this.skin.setMixByName("walk","idle",.2),this.skin.setMixByName("idle","walk",.2),this.skin.setMixByName("idle","pointing",.2),this.skin.setMixByName("pointing","idle",.2),this.skin.setMixByName("idle","quizzical",.2),this.skin.setMixByName("quizzical","idle",.2),this.skin.setMixByName("idle","talking",.2),this.skin.setMixByName("talking","idle",.2),this.skin.setMixByName("idle","cheering",.2),this.skin.setMixByName("cheering","idle",.2),this.skin.setMixByName("pointing","talking",.2),this.skin.setMixByName("walk","pointing",.2),this.skin.setMixByName("cheering","walk",.2),this.skin.setMixByName("walk","quizzical",.2)},i.createButton=function(){this.button=this.game.make.button(0,0,"slot_marker"),this.button.width=.4*this.skin.width,this.button.height=.4*this.skin.height,"elinor"===this.seekerId&&(this.button.height=.5*this.skin.height),this.button.alpha=0,this.button.anchor.set(.5,1),this.addChild(this.button),this.button.inputEnabled=!0,this.button.events.onInputDown.add(this.handleInputDown,this),this.button.input.useHandCursor=!1},i.handleInputDown=function(){if("idle"===this.currentAnim&&!this.allFound&&!this.levelRef.hintPlaying){if(this.sndTalking&&this.sndTalking.isPlaying)return;var t=["026","030"],e="vo_01_"+this.seekerId+"_"+t[Phaser.Math.between(0,t.length-1)];this.game.springRollCaptionsPlugin.playCaption(e),this.sndTalking=this.game.sounds.playVO(e,{spriteID:this.seekerId+"_vo"}).get(e),this.talk()}},i.stopTalking=function(){this.sndTalking&&this.sndTalking.isPlaying&&(this.sndTalking.stop(),this.sndTalking=null,this.handleAnimTalkEnd())},i.getDestX=function(){return this.x},i.playAnim=function(t,e){void 0===e&&(e=!0),this.currentAnim!==t&&(this.currentAnim=t,this.skin.setAnimationByName(0,t,e),"walk"===t?this.game.sounds.playSFX("walking",{loop:!0,spriteID:"sfx_location"}):this.game.sounds.stopAudioSprite("walking",{spriteID:"sfx_location"}))},i.startTalkForward=function(t){void 0===t&&(t=500),this.skin.setSkinByName("mouth/talking"),this.refreshSkin(),this.playAnim("idle_forward"),this.game.time.events.add(t,this.stopTalkForward,this)},i.stopTalkForward=function(){this.skin.setSkinByName("base"),this.refreshSkin(),this.playAnim("idle")},i.refreshSkin=function(){var t=this.skin.skeleton.getRootBone(),e=t.scaleX,i=t.scaleY;this.skin.setToSetupPose(),t.scaleX=e,t.scaleY=i},i.idle=function(){this.playAnim("idle")},i.pointCharacter=function(){this.playAnim("pointing",!1),this.follower&&this.follower.playAnim("pointing",!1),this.game.time.events.add(400,this.handleAnimEnd,this)},i.think=function(){this.playAnim("quizzical"),this.follower&&this.follower.playAnim("quizzical",!1),this.game.time.events.add(1e3,this.handleAnimEnd,this)},i.celebrate=function(){this.playAnim("cheering"),this.follower&&this.follower.playAnim("cheering",!1),this.game.time.events.add(1100,this.handleAnimEnd,this)},i.talk=function(t,e){void 0===t&&(t=1e3),void 0===e&&(e=0),e>0?this.game.time.events.add(e,this.talk,this,t):(this.playAnim("talking"),this.follower&&this.follower.playAnim("talking",!1),this.game.time.events.add(t,this.handleAnimTalkEnd,this))},i.handleAnimTalkEnd=function(){"talking"===this.currentAnim&&this.playAnim("idle"),this.handleAnimEnd()},i.handleAnimEnd=function(){this.onAnimEnd.dispatch()},i.gotoNextNavPoint=function(){this.currentNavId<this.navPoints.length-1&&this.currentNavId++,this.destX=this.navPoints[this.currentNavId],this.playAnim("walk")},i.gotoPrevNavPoint=function(){this.currentNavId>0&&this.currentNavId--,this.destX=this.navPoints[this.currentNavId],this.playAnim("walk")},i.setPosition=function(t){this.x=this.destX=t,this.playAnim("idle")},i.gotoPosition=function(t){if(this.destX=Phaser.Math.clamp(t,this.xMin,this.xMax),this.destX!==this.x){var e=this.destX>this.x?1:-1;this.setDirection(-e),this.playAnim("walk"),this.onStartWalk.dispatch()}else this.destX!==t&&this.onPosition.dispatch()},i.atFirstNavPoint=function(){return this.x<=this.navPoints[0]+1},i.atLastNavPoint=function(){return this.x>=this.navPoints[this.navPoints.length-1]-1},i.stop=function(){this.destX=this.x,this.playAnim("idle"),this.onPosition.dispatch()},i.step=function(t){if(this.destX!==this.x){var e=this.destX>this.x?1:-1,i=Math.min(Math.abs(this.destX-this.x),300*t);this.x+=e*i,this.setDirection(-e),Math.abs(this.x-this.destX)<1&&(this.x=this.destX,this.playAnim("idle"),this.onPosition.dispatch())}this.follower&&this.follower.step(t)},i.setDirection=function(t){this.skin.skeleton.getRootBone().scaleX=.4*t},i.destroy=function(){this.game.sounds.stopAudioSprite("walking",{spriteID:"sfx_location"}),t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=r},"5mNR":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_MAP=e.STATE_TWO_PLAYERS_SETUP=e.STATE_LEVEL_TWO_PLAYERS=e.STATE_LEVEL_HIDE=e.STATE_LEVEL_SEEK=e.STATE_LOCATION_LOADER=e.STATE_CUTSCENE=e.STATE_WELCOME=e.STATE_LOAD=e.STATE_BOOT=void 0;var a=s(i("VawD")),n=s(i("GEMp")),o=s(i("WtpM")),h=s(i("FuGw")),r=s(i("tcTG")),l=s(i("F+WU")),d=s(i("l/Ay")),c=s(i("nANl")),u=s(i("V6s1"));e.STATE_BOOT="STATE_BOOT";e.STATE_LOAD="STATE_LOAD";e.STATE_WELCOME="STATE_WELCOME";e.STATE_CUTSCENE="STATE_CUTSCENE";e.STATE_LOCATION_LOADER="STATE_LOCATION_LOADER";e.STATE_LEVEL_SEEK="STATE_LEVEL_SEEK";e.STATE_LEVEL_HIDE="STATE_LEVEL_HIDE";e.STATE_LEVEL_TWO_PLAYERS="STATE_LEVEL_TWO_PLAYERS";e.STATE_TWO_PLAYERS_SETUP="STATE_TWO_PLAYERS_SETUP";var g={STATE_BOOT:a.default,STATE_LOAD:n.default,STATE_WELCOME:o.default,STATE_LOCATION_LOADER:r.default,STATE_CUTSCENE:h.default,STATE_LEVEL_SEEK:l.default,STATE_LEVEL_HIDE:d.default,STATE_LEVEL_TWO_PLAYERS:c.default,STATE_TWO_PLAYERS_SETUP:u.default};e.STATE_MAP=g},"62b2":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("7xLJ")),h=function(t){function e(e,i){var s;(s=t.call(this,e)||this).onEnd=new Phaser.Signal;var n=s.game.make.image(0,0,"bg_location_"+s.game.controller.location);s.addChild(n);var h=0===s.game.controller.twoPlayersModel.hidingPlayerId?1:2;return s.icon=new o.default(s.game,0,360,h,i),s.icon.x=s.game.defaultWidth/2,s.addChild(s.icon),1===h?s.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_023_alt"]):s.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_023"]),s.game.twoPlayersOnboarding.onEnd.addOnce(s.handleOnboardingEnd,(0,a.default)(s)),s}(0,n.default)(e,t);var i=e.prototype;return i.handleOnboardingEnd=function(){this.game.time.events.add(500,this.close,this)},i.close=function(){this.onEnd.dispatch()},e}(Phaser.Group);e.default=h},"6R9f":function(t,e,i){"use strict";i("wiMi"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("5mNR"),a=i("Bx3X"),n=function(){function t(t){this.game=t,this.transitionToState=!1,this.transitionToParams=!1,this.onTransitionComplete=new Phaser.Signal}var e=t.prototype;return e.clearCurrentState=function(){this.game.state.clearCurrentState()},e.onTransitionInComplete=function(){this.switchStates()},e.isWelcomeScreen=function(){return this.game.state.current===s.STATE_WELCOME},e.switchStates=function(){var t;(t=this.game.state).start.apply(t,[this.transitionToState].concat(this.transitionToParams)),this.game.state.onStateChange.addOnce(this.handleStateChanged,this)},e.handleStateChanged=function(){this.onTransitionControllerComplete()},e.onTransitionControllerComplete=function(){this.onTransitionComplete.dispatch(),this.transitionController=null},e.startState=function(t){var e=t.nextState,i=t.nextStateParams;this.useLightWeightTransition=(0,a.doesRequireLightVersion)(),this.transitionToState=e,this.transitionToParams=i,this.switchStates()},t}();e.default=n},"6YV8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGA=function(t){return new o(t)},e.addGoogleAnalyticsPlugin=function(t){var e=t.plugin;return new o(e)};var s=i("TEuq"),a=i("zgbH"),n=null,o=function(){function t(t){return n||(n=this,s.Debugger.log("log","GoogleAnalytics plugin registered",t),this._plugin=t,this.category=a.GA_TRACKING_CATEGORY,this.label="",n)}var e=t.prototype;return e.destroy=function(){n=null,this._plugin=null},e.setLabel=function(t){this.label=t},e.track=function(t){var e=t.category,i=void 0===e?this.category:e,a=t.action,n=void 0===a?"":a,o=t.label,h=void 0===o?this.label:o,r=t.value,l=void 0===r?"":r;s.Debugger.log("log","GoogleAnalytics.track",i,n,h,l),this._plugin&&this._plugin.event(i,n,h,l)},t}()},"7xLJ":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s,a,n){var o;return(o=t.call(this,e,i,s,"ui_player_mode","circle_"+n)||this).anchor.set(.5),o.icon=o.game.make.image(-10,50,"ui_player_mode","icon_"+n),o.icon.anchor.set(.5,1),o.addChild(o.icon),o.text=o.game.make.text(0,10,a,{font:"70px Elinor",fill:"#FFFFFF"}),o.text.anchor.set(.5,0),o.addChild(o.text),o}(0,a.default)(e,t);var i=e.prototype;return i.setHudMode=function(){this.icon.scale.set(.9),this.text.scale.set(.8),this.icon.x=this.text.x=33,this.icon.y=28,this.text.y=8},i.animateToHudMode=function(t){this.game.add.tween(this.icon).to({x:33,y:28},t,null,!0),this.game.add.tween(this.icon.scale).to({x:.9,y:.9},t,null,!0),this.game.add.tween(this.text).to({x:33,y:8},t,null,!0),this.game.add.tween(this.text.scale).to({x:.8,y:.8},t,null,!0)},e}(Phaser.Sprite);e.default=n},"9QYG":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("7xLJ")),h=s(i("1f/r")),r=function(t){function e(e,i,s){var n;(n=t.call(this,e)||this).onEnd=new Phaser.Signal;var r=n.game.make.graphics();r.beginFill(0,.7),r.drawRect(0,0,n.game.defaultWidth,n.game.defaultHeight),r.endFill(),n.addChild(r),n.icon=new o.default(n.game,0,165,s,i),n.icon.x=n.game.defaultWidth/2,n.addChild(n.icon);var l=new h.default(n.game);return l.x=n.game.defaultWidth/2,l.y=n.game.defaultHeight,n.addChild(l),1===s?n.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_025","ob_05_elinor_014"]):n.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_013","ob_05_elinor_014"]),n.game.twoPlayersOnboarding.onEnd.addOnce(n.handleOnboardingEnd,(0,a.default)(n)),n}(0,n.default)(e,t);var i=e.prototype;return i.handleOnboardingEnd=function(){this.game.time.events.add(500,this.close,this)},i.close=function(){this.onEnd.dispatch()},e}(Phaser.Group);e.default=r},"9SIq":function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=s(i("oTeA")),h=s(i("0nnT")),r=s(i("yIt9")),l=s(i("4+AI")),d=s(i("M09M")),c=s(i("2drJ")),u=i("hDA+"),g=i("zgbH"),p=function(t){function e(e,i,s){var a;return(a=t.call(this,e)||this).locationData=i,a.sceneWidth=s,a.isDraggingScene=!1,a.pointer=null,a.startPointerX=0,a.startSceneX=0,a.controlsEnabled=!1,a.onFindChar=new Phaser.Signal,a.sky=new o.default(a.game,i.sky,!0),a.background=new o.default(a.game,i.background,!0),a.midground=a.game.make.group(),a.foreground=new o.default(a.game,i.foreground),a.midUI=a.game.make.group(),a.forUI=a.game.make.group(),a.placeSlots(),a.addChild(a.sky),a.addChild(a.background),a.addChild(a.midground),a.addChild(a.foreground),a.addChild(a.midUI),a.addChild(a.forUI),a}(0,n.default)(e,t);var i=e.prototype;return i.enableControls=function(){this.controlsEnabled=!0,this.game.controller.gameMode===g.MODE_SEEK?this.background.onChildInputDown.add(this.handleSeekInputDown,this):(this.background.onChildInputDown.add(this.handleHideInputDown,this),this.background.onChildInputUp.add(this.handleHideInputUp,this),this.pointer=null)},i.disableControls=function(){this.controlsEnabled=!1,this.game.controller.gameMode===g.MODE_SEEK?this.background.onChildInputDown.remove(this.handleSeekInputDown,this):(this.background.onChildInputDown.remove(this.handleHideInputDown,this),this.background.onChildInputUp.remove(this.handleHideInputUp,this),this.pointer=null)},i.placeSlots=function(){this.slots={};for(var t=0;t<this.locationData.slots.length;t++){var e=this.locationData.slots[t],i=new h.default(this.game,e);"bg"===e.layer?this.background.addSlot(i):this.foreground.addSlot(i),this.slots[e.id]=i}},i.placeCharacters=function(t,e,i){t=(0,u.shuffle)(t);for(var s=0;s<t.length;s++){var a=t[s],n=void 0;if(a.slot)n=this.slots[a.slot];else for(var o=i[s];!n&&o>=0;)n=this.getFreeSlot(a.id,e,o),o--;n.addCharacter(a.id),n.onFindChar.add(this.handleFindChar,this)}},i.addOnFindToSlots=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].onFindChar.add(this.handleFindChar,this)}},i.handleFindChar=function(t){this.onFindChar.dispatch(t)},i.getFreeSlot=function(t,e,i){for(var s,a,n=this,o=[],h=function(h){a=n.locationData.slots.find((function(t){return t.id===e[h]})),s=n.slots[a.id];var r=a.characters.find((function(e){return e.id===t}));s.isEmpty&&r&&r.score===i&&o.push(s)},r=0;r<e.length;r++)h(r);return s=o[Math.floor(Math.random()*o.length)]},i.handleSeekInputDown=function(t,e){var i=-this.x+e.x;this.seeker.gotoPosition(i)},i.placeDragCharacter=function(t,e,i,s,a,n,o){var h=-this.x+a,l=-this.y+n;this.draggable=new r.default(this.game,h,l,t,e,i,s),this.addChild(this.draggable),this.draggable.startDrag(o);var d=.5*this.game.width-this.x;this.camera.setPosition(d),this.isDraggingCharacter=!0},i.removeDragCharacter=function(){this.removeChild(this.draggable),this.draggable=null,this.isDraggingCharacter=!1},i.tryAddCharToSlot=function(t){var e,i=t.x,s=t.y,a=999;for(var n in this.slots)if(this.slots.hasOwnProperty(n)){var o=this.slots[n];if(o.enabled){var h=o.getCenter(t.characterId);if(h){var r=i-h.x,l=s-h.y,d=Math.sqrt(r*r+l*l);d<150&&d<a&&(e=o,a=d)}}}if(e){var c=e.isEmpty;if(c||e.returnCharacter(),e.addCharacter(t.characterId,t.slotRef),e.hudSlotRef=t.slotRef,t.clothId>-1){var u=this.game.controller.gameData.clothes.find((function(e){return e.id===t.clothId}));e.character.wearCloth(t.clothSlotRef,u)}return{added:!0,slot:e,wasSlotEmpty:c}}return{added:!1}},i.disableAllSlots=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].enabled=!1}},i.enableSlot=function(t){this.slots[t].enabled=!0},i.disableSlot=function(t){this.slots[t].enabled=!1},i.showSlotMarker=function(t){this.slots[t].showMarker()},i.hideSlotMarker=function(t){this.slots[t].hideMarker()},i.showSlotMarkers=function(t){for(var e in this.slots){if(this.slots.hasOwnProperty(e))this.slots[e].showMarker()}},i.hideSlotMarkers=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].hideMarker()}},i.lockCharacters=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].lockCharacter()}},i.unlockCharacters=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].unlockCharacter()}},i.hideCharacterDressUpButtons=function(t){for(var e in void 0===t&&(t=null),this.slots){if(this.slots.hasOwnProperty(e))this.slots[e].hideDressUpButtons(t)}},i.showCharacterDressUpButtons=function(){for(var t in this.slots){if(this.slots.hasOwnProperty(t))this.slots[t].showDressUpButtons()}},i.getSlotsWithChars=function(){var t=[];for(var e in this.slots)if(this.slots.hasOwnProperty(e)){var i=this.slots[e];i.isEmpty||t.push(i)}return t},i.handleHideInputDown=function(t,e){this.isDraggingScene=!0,this.pointer=e,this.startPointerX=e.x,this.startSceneX=.5*this.game.width-this.x,this.camera.setPosition(this.startSceneX)},i.handleHideInputUp=function(t,e){this.isDraggingScene=!1,this.pointer=null},i.placeDragCloth=function(t,e,i){var s=i.x,a=i.y,n=-this.x+s,o=-this.y+a;this.draggable=new c.default(this.game,n,o,e,t),this.addChild(this.draggable),this.draggable.startDrag(i)},i.removeDragCloth=function(){this.removeChild(this.draggable),this.draggable=null},i.findSlotWithCharacter=function(t){for(var e in this.slots)if(this.slots.hasOwnProperty(e)){var i=this.slots[e];if(!i.isEmpty&&i.characterId===t)return i}return null},i.getSlotById=function(t){return this.slots[t]},i.addGotoMarker=function(t){this.marker=new d.default(this.game,t,640),this.midground.addChildAt(this.marker,0)},i.removeGotoMarker=function(){this.marker&&(this.marker.destroy(),this.marker=null)},i.step=function(t){if(this.isDraggingScene&&this.pointer){var e=this.pointer.x-this.startPointerX;this.camera.destX=this.startSceneX-e}if(this.isDraggingCharacter&&this.controlsEnabled){var i=this.game.width-150,s=this.draggable.worldPosition.x;if(s<150)this.x<0&&(this.camera.destX-=5);else if(s>i)this.x>-this.sceneWidth+this.game.width&&(this.camera.destX+=5);else{var a=.5*this.game.width-this.x;this.camera.destX=a}}var n=this.x/(this.width-this.game.width);this.sky.x=n*(this.sky.width-this.width),this.foreground.x=n*(this.foreground.width-this.width),this.forUI.x=this.foreground.x},i.getForegrounOffsetForX=function(t){return t/(this.width-this.game.width)*(this.foreground.width-this.width)},i.placeSeeker=function(t){this.seeker=t,this.midground.addChild(this.seeker),this.seeker.y=640,this.seeker.follower&&(this.midground.addChildAt(this.seeker.follower,0),this.seeker.follower.y=640)},i.addSimpleCharacter=function(t,e,i){this.simpleChars||(this.simpleChars={});var s=new l.default(this.game,e,640,t,i);this.midground.addChildAt(s,0),this.simpleChars[t]=s},i.removeSimpleCharacter=function(t){this.midground.removeChild(this.simpleChars[t]),this.simpleChars[t].destroy(),delete this.simpleChars[t]},i.moveSimpleCharacter=function(t,e,i){this.simpleChars[t].runTo(e,i)},(0,a.default)(e,[{key:"width",get:function(){return this.locationData.width}}]),e}(Phaser.Group);e.default=p},"9i5X":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=s(i("ZThm")),r=i("zgbH"),l=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).createContent(),i&&(s.bg.alpha=0,s.game.add.tween(s.bg).to({alpha:1},300,Phaser.Easing.Quadratic.Out,!0)),s.btnPlayer1.scale.set(0),s.game.add.tween(s.btnPlayer1.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),s.btnPlayer2.scale.set(0),s.game.add.tween(s.btnPlayer2.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100),s.onSelect=new Phaser.Signal,s.onBack=new Phaser.Signal,s.game.scale.onSizeChange.add(s.positionElements,(0,a.default)(s)),s}(0,n.default)(e,t);var i=e.prototype;return i.createContent=function(){this.bg=this.game.make.image(0,0,"bg_welcome_blur"),this.text=this.game.make.text(this.game.defaultWidth/2,110,"How many players?",{font:"70px Elinor",fill:"#FFFFFF",stroke:"#000000",strokeThickness:8}),this.text.anchor.set(.5,0),this.btnPlayer1=new h.default({game:this.game,bg:"btn_player_bg",mask:"btn_player_mask",key:"btn_one_player",dy:-5,voId:"ui_01_elinor_010"}),this.btnPlayer1.x=this.game.defaultWidth/2-140,this.btnPlayer1.y=385,this.btnPlayer1.onInputDown.addOnce(this.handlePlayerSelect,this),this.btnPlayer2=new h.default({game:this.game,bg:"btn_player_bg",mask:"btn_player_mask",key:"btn_two_players",dy:-5,voId:"ui_01_elinor_011"}),this.btnPlayer2.x=this.game.defaultWidth/2+140,this.btnPlayer2.y=385,this.btnPlayer2.onInputDown.addOnce(this.handlePlayerSelect,this),this.btnBack=new o.default({game:this.game,up:"btn_back",over:"btn_back"}),this.btnBack.x=.5*(this.game.defaultWidth-this.game.width)+60,this.btnBack.y=60,this.btnBack.onInputDown.addOnce(this.handleBackBtn,this),this.addChild(this.bg),this.addChild(this.text),this.addChild(this.btnPlayer1),this.addChild(this.btnPlayer2),this.addChild(this.btnBack)},i.positionElements=function(){this.btnBack.x=.5*(this.game.defaultWidth-this.game.width)+60},i.handlePlayerSelect=function(t){this.selectedButton=t,this.btnPlayer1.inputEnabled=!1,this.btnPlayer2.inputEnabled=!1,this.btnBack.inputEnabled=!1,this.game.time.events.add(1e3,this.dispatchEvent,this)},i.dispatchEvent=function(){this.selectedButton===this.btnPlayer1?this.onSelect.dispatch(r.PLAYER_SINGLE):this.onSelect.dispatch(r.PLAYER_TWO)},i.handleBackBtn=function(){this.onBack.dispatch()},i.destroy=function(){this.game.scale.onSizeChange.remove(this.positionElements,this),this.btnPlayer1.destroy(),this.btnPlayer2.destroy(),this.btnBack.destroy(),this.btnPlayer1=null,this.btnPlayer2=null,this.btnBack=null,this.text=null,this.bg=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=l},AxTc:function(t,e,i){"use strict";i("XvIX"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("cjcH"),a=function(){function t(){this.storage=(0,s.getLS)(),this.storage.onRead.addOnce(this.handleDataRead,this),this.version="2",this.lastLevel=[0,0,0],this.unlockedLocations=1,this.cutscenes=[],this.onboardings=[],this.serializable=["version","unlockedLocations","lastLevel","onboardings","cutscenes"],this.storage.loadData()}var e=t.prototype;return e.handleDataRead=function(){this.storage.onRead.remove(this.handleDataRead,this),this.storage.data.saves?(this.deserialize(this.storage.data.saves),"2"!==this.version&&"1"===this.version&&(this.convert1to2(),this.save())):this.save()},e.save=function(){this.storage.setGameData("saves",this.serialize())},e.getLastLevel=function(t){return this.lastLevel[t]},e.saveOnboarding=function(t){this.wasOnboardingDisplayed(t)||(this.onboardings.push(t),this.save())},e.wasOnboardingDisplayed=function(t){return this.onboardings.indexOf(t)>=0},e.saveCutscene=function(t){this.wasCutsceneDisplayed(t)||(this.cutscenes.push(t),this.save())},e.wasCutsceneDisplayed=function(t){return this.cutscenes.indexOf(t)>=0},e.deserialize=function(t){var e=this;(t=JSON.parse(t))&&this.serializable.forEach((function(i){(t[i]||0===t[i])&&(e[i]=t[i])}))},e.serialize=function(){var t=this,e=this.serializable.reduce((function(e,i){return e[i]=t[i],e}),{});return JSON.stringify(e)},e.convert1to2=function(){var t=this.lastLevel[0];t=t>5&&t<10?6:11===t?7:12===t||14===t?8:9,this.lastLevel[0]=t,t=this.lastLevel[1],t=Math.min(5,t),this.lastLevel[1]=t,t=this.lastLevel[2],t=Math.min(5,t),this.lastLevel[2]=t},t}();e.default=a},Bx3X:function(t,e,i){"use strict";i("XvIX"),i("ZKpu"),i("6WZY"),i("LBAN"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.isIE11=e.isIE=e.doesRequireLightVersion=e.isNewAppleDevice=e.isOldAppleDevice=e.isOldDevice=e.isNewiPad=e.isOldiPad=e.isNewiPhone=e.isOldiPhone=e.isKindle=e.isOldAndroid=e.isSamsungGalaxyTabE=e.isWindowsPhone=e.isTescoHudl=e.isGalaxyTab4=e.isNexus7=e.isiOS=e.getiOSversion=e.getiPadModel=e.getiPhoneModel=e.BRIM_PADDING=void 0;e.BRIM_PADDING=25;var s=["KFSUWI","KFAUWI","KFDOWI","KFGIWI","KFFOWI","KFMEWI","KFTBWI","KFARWI","KFASWI","KFSAWA","KFSAWI","KFAPWA","KFAPWI","KFAPWA","KFAPWI","KFSOWI","KFJWA","KFJWI","KFTT","KFOT","Kindle Fire"],a=function(){if(/iPhone/.test(navigator.userAgent)&&!window.MSStream){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;return t===320/480&&1===e?"iPhone 1/3g/3gs":t===640/960&&2===e?"iPhone 4/4s":t===640/1136&&2===e?"iPhone 5/5c/5s":t===750/1334&&2===e?"iPhone 6/6s/7/8":t===640/1136&&2===e?"iPhone 6/6s/7/8 (Display Zoom)":.5625===t&&3===e?"iPhone 6/6s/7 Plus/8 Plus":t===1125/2001&&3===e?"iPhone 6/6s/7 Plus/8 Plus (Display Zoom)":t===375/812&&3===e?"iPhone X":""}return""};e.getiPhoneModel=a;var n=function(){if(!/iPad/.test(navigator.userAgent)||window.MSStream)return"";var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI;return.75===t?1===e?"iPad 1/2 | Mini 1":"iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7":.75===t?"iPad Pro 10.5":t===1024/1366?"iPad Pro 12.9, Pro 12.9 (2nd Gen)":void 0};e.getiPadModel=n;e.getiOSversion=function(){var t=window.navigator.userAgent,e=t.indexOf("OS ");return(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&e>-1?window.Number(t.substr(e+3,3).replace("_",".")):0};e.isiOS=function(){return!!navigator.platform.match(/iPhone|iPod|iPad/)};var o=function(){return/nexus 7/i.test(navigator.userAgent.toLowerCase())};e.isNexus7=o;var h=function(){return/sm-t530|sm-t330|gt-n8010/i.test(navigator.userAgent.toLowerCase())};e.isGalaxyTab4=h;var r=function(){return/hudl/i.test(navigator.userAgent.toLowerCase())};e.isTescoHudl=r;var l=function(){return/windows phone|iemobile/i.test(navigator.userAgent.toLowerCase())};e.isWindowsPhone=l;var d=function(){var t=/sm-t377./g.test(navigator.userAgent.toLowerCase()),e=/sm-t56./g.test(navigator.userAgent.toLowerCase());return t||e};e.isSamsungGalaxyTabE=d;var c=function(){var t=navigator.userAgent.indexOf("Nexus 7")>-1,e=navigator.userAgent.indexOf("SM-T530")>-1||navigator.userAgent.indexOf("SM-T330")>-1||navigator.userAgent.indexOf("GT-N8010")>-1;return t||e};e.isOldAndroid=c;var u=function(){for(var t=0;t<s.length;t++)if(navigator.userAgent.indexOf(s[t])>-1)return!0;return!1};e.isKindle=u;var g=function(){var t=a();return"iPhone 1/3g/3gs"===t||"iPhone 4/4s"===t||"iPhone 5/5c/5s"===t};e.isOldiPhone=g;var p=function(){return"iPhone X"===a()};e.isNewiPhone=p;var m=function(){return"iPad 1/2 | Mini 1"===n()};e.isOldiPad=m;var f=function(){var t=n();return"iPad Pro 10.5"===t||"iPad Pro 12.9, Pro 12.9 (2nd Gen)"===t};e.isNewiPad=f;e.isOldDevice=function(){var t=g()||m()||u()||c();return t};e.isOldAppleDevice=function(){return g()||m()};e.isNewAppleDevice=function(){return p()||f()};e.doesRequireLightVersion=function(){return!!(m()||g()||u()||h()||o()||r()||l()||d())};e.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return!1};e.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode}},CDWU:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=s(i("C9uT")),o=i("TEuq");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(i,!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={id:null,volume:.2},d=function(){function t(t){var e=t.game;this.game=e,this.sounds={},this.sprites={},this.backgroundMusic=r({},l),this._soundVolume=1,this._sfxVolume=1,this._musicVolume=1,this._voVolume=1}var e=t.prototype;return e.startup=function(){this.game.sound.mute=!1,this.touchLock()},e.decode=function(t,e,i){this.game.sound.setDecodedCallback(t,e,i)},e.touchLock=function(){this.game.sound.usingWebAudio&&"suspended"===this.game.sound.context.state&&(o.Debugger.log("log","AudioContext is suspended"),this.game.sound.setTouchLock(),this.isTouchLocked=!0)},e.checkAudioContext=function(){var t=this;this.isTouchLocked&&this.game.sound.usingWebAudio&&(o.Debugger.log("log","AudioContext attempting resume"),this.game.sound.context.resume().then((function(){o.Debugger.log("log","AudioContext resumed successfully"),t.isTouchLocked="suspended"===t.game.sound.context.state})))},e.addSound=function(t,e){this.sounds[t]=this.game.make.audio(e),this.sounds[t].stop()},e.removeSound=function(t,e){this.sounds[t]&&(this.sounds[t].destroy(),this.game.cache.removeSound(e))},e.addAudioSprite=function(t){var e=t.id;this.sprites[e]=this.game.add.audioSprite(e)},e.removeAudioSprite=function(t){var e=this,i=t.id;this.sprites[i]&&(this.sprites[i].isPlaying&&this.sprites[i].stop(),Object.keys(this.sprites[i].sounds).forEach((function(t){e.sprites[i].sounds[t].isPlaying&&e.sprites[i].sounds[t].stop(),e.sprites[i].sounds[t].destroy(),e.game.cache.removeSound(t),delete e.sprites[i].sounds[t]})),this.game.cache.removeJSON(i),this.game.cache.removeSound(i),delete this.sprites[i])},e.getSfx=function(t,e){return this.checkSfxExists(t,e)?this.sprites[e].sounds[t]:null},e.checkSfxExists=function(t,e){return this.sprites[e]&&this.sprites[e].sounds[t]},e.sfxExists=function(t,e){return!!this.checkSfxExists(t,e)||(o.Debugger.log("warn","Cant find "+t+" in audiosprite "+e+", has it been added? (config.json and assetpack)"),!1)},e.playSFX=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._sfxVolume,this.playAudioSprite(t,e)},e.playVO=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._voVolume,this.playAudioSprite(t,e)},e.playAudioSprite=function(t,e){void 0===e&&(e={});var i=e,s=i.volume,a=void 0===s?1:s,n=i.loop,o=void 0!==n&&n,h=i.ignoreIfPlaying,r=void 0!==h&&h,l=i.delay,d=void 0===l?null:l,c=i.onComplete,u=void 0===c?null:c,g=i.onCompleteScope,p=void 0===g?null:g,m=i.spriteID,f=void 0===m?"generic_audiosprite":m;if(!this.sfxExists(t,f))return!1;if(!0!==Phaser.Device.ie||!this.game.paused){if(this.checkAudioContext(),d)return e.delay=null,this.game.time.events.add(d,this.playAudioSprite,this,t,e),!0;var v=this.sprites[f],y=v.get(t);if(this.isTouchLocked){if(!u)return!1;var b=new Phaser.Signal;b.addOnce((function(){u.call(p)})),b.dispatch()}else{if(r&&y.isPlaying)return!1;y.loop=o,y.markers[t].loop=o,v.play(t,a),u&&y.onStop.addOnce((function(){u.call(p)}))}return v}},e.stopAudioSprite=function(t,e){void 0===e&&(e={});var i=e.spriteID,s=void 0===i?"":i;if(this.sprites[s]){var a=this.sprites[s].get(t);a&&a.isPlaying&&this.sprites[s].stop(t)}else this.sounds[t]&&this.sounds[t].isPlaying&&this.sounds[t].stop()},e.stopAllSFX=function(){for(var t in this.sprites)if(this.sprites.hasOwnProperty(t))for(var e in this.sprites[t].sounds)this.sprites[t].sounds.hasOwnProperty(e)&&this.sprites[t].sounds[e].isPlaying&&"click"!==e&&this.sprites[t].sounds[e].stop()},e.clearBackgroundMusic=function(){this.backgroundMusic=r({},l)},e.setBackgroundMusic=function(t){this.sounds[t]?this.backgroundMusic.id=t:o.Debugger.log("warn","Background music "+t+" not found.")},e.stopBackgroundMusic=function(){var t=this.backgroundMusic.id;this.stopSound(t)},e.playBackgroundMusic=function(){var t=this.backgroundMusic,e=t.id,i=t.volume,s=this.sounds[e];s&&this.allowMusic&&(s.paused||s.isPlaying?s.paused&&(s.volume=0,s.resume(),s.fadeTo(500,i)):s.play("",0,i,!0)),this.game.paused&&this.pauseBackgroundMusic()},e.pauseBackgroundMusic=function(){var t=this.backgroundMusic.id,e=this.sounds[t];e&&e.pause()},e.stopSound=function(t){this.sounds[t]&&(this.sounds[t].pausedPosition=0,this.sounds[t].isPlaying&&this.sounds[t].stop())},e.setVolume=function(t,e){this.backgroundMusic.id===t?(this.backgroundMusic.volume=e,this.sounds[t].fadeTo(1e3,e)):this.sounds[t].volume=e},(0,n.default)(t,[{key:"soundVolume",set:function(t){this.game.sound.volume=t,this._soundVolume=t}},{key:"sfxVolume",set:function(t){for(var e in this._sfxVolume=t,this.sounds)e!==this.backgroundMusic.id&&(this.sounds[e].mute=0===this._sfxVolume)}},{key:"musicVolume",set:function(t){this._musicVolume=t,1===this._musicVolume?this.playBackgroundMusic():this.pauseBackgroundMusic()}},{key:"voVolume",set:function(t){this._voVolume=t}},{key:"allowSFX",get:function(){return 1===this._sfxVolume}},{key:"allowMusic",get:function(){return 1===this._musicVolume}},{key:"allowVo",get:function(){return 1===this._voVolume}}]),t}();e.default=d},"Da/+":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("XvIX"),i("mizm"),i("pkSX"),i("3Ipg"),i("ocEJ"),i("388n"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=i("hDA+");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var r=function(){function t(t){this.game=t,this.onEnd=new Phaser.Signal,this.locationSuffix="_"+this.game.controller.location,this.cptData=this.game.cache.getJSON("vo_explainer_captions"),this.cptData=(0,n.processCaptions)(this.game,this.cptData,"vo_explainer_variable-audioatlas"),this.cptData=(0,n.processCaptions)(this.game,this.cptData,"vo_explainer_character_trait-audioatlas"),this.cptData=(0,n.processCaptions)(this.game,this.cptData,"vo_explainer_object_trait-audioatlas",this.locationSuffix),this.cptData=(0,n.processCaptions)(this.game,this.cptData,"vo_explainer_stars-audioatlas"),this.processRemainingCaptions(),this.game.springRollCaptionsPlugin.setData(this.cptData)}var e=t.prototype;return e.processRemainingCaptions=function(){for(var t in this.cptData)this.cptData.hasOwnProperty(t)&&(this.cptData[t][0].end||(this.cptData[t][0].start=0,this.cptData[t][0].end=0))},e.init=function(t,e,i,s){this.characterId=t,this.rating=i,this.explainerData=e,this.clothId=s,this.pattern=this.getPattern(i,e.version);for(var a=0;a<this.pattern.length;a++)for(var n=0;n<this.pattern[a].length;n++){var o=this.pattern[a][n];o=(o=(o=o.replace("{name}","elinor"===t?"me":t)).replace("{their}","elinor"===t?"my":"their")).replace("{them}","elinor"===t?"me":"them"),this.pattern[a][n]=o}this.ind1=0,this.ind2=0,this.playSentence()},e.getPattern=function(t,e){var i={star1a:[["ex_star1a_hid_{name}","obj_0"],["ex_star1a_but_{their}","char_0","ex_star1a_made_{them}"],["ex_star1a_next_time_{their}","char_1"]],star2a:[["ex_star2a_hid_{name}","obj_0"],["ex_star2a_but_{their}","char_0","ex_star2a_made_{them}"],["ex_star2a_next_time_{their}","char_1"]],star2b:[["ex_star2b_hid_{name}","char_0"],["ex_star2b_nearly","obj_0"],["ex_star2b_where_{them}_a"],["ex_star2b_where_{them}_b","char_1"]],star3a:[["ex_star3a_hid_{name}","char_0"],["ex_star3a_matches","obj_0","ex_star3a_you_hid_{them}"],["ex_star3a_{them}_camouflaged"]]};return 2===t&&(e="a"),i["star"+(t+1)+e]},e.playSentence=function(){for(var t=this.pattern[this.ind1],e=[],i=0,s=t.length,a={content:"",start:0,end:0},n=0;n<s;n++){var o=t[n],r=o,l=!1;if(0===o.indexOf("obj")){var d=o.split("_")[1];r=this.explainerData.object_trait[d]+this.locationSuffix,l=!0}else if(0===o.indexOf("char")){var c=o.split("_")[1];r=this.explainerData.character_trait[c],l=!0}var u=this.cptData[r];if(l)a.content+=" "+u[0].content,a.end+=u[0].end,i=a.end;else{for(var g=0;g<u.length;g++)(a=h({},u[g])).start+=i,a.end+=i,e.push(a);i=a.end}}this.ind2=0;var p={caption:e};this.game.springRollCaptionsPlugin.setData(p),this.game.springRollCaptionsPlugin.playCaption("caption"),this.playVO()},e.playSentenceOld=function(){for(var t=this.pattern[this.ind1],e={content:"",start:0,end:0},i=t.length,s=0;s<i;s++){var a=t[s],n=a;if(0===a.indexOf("obj")){var o=a.split("_")[1];n=this.explainerData.object_trait[o]+this.locationSuffix}else if(0===a.indexOf("char")){var h=a.split("_")[1];n=this.explainerData.character_trait[h]}e.content+=this.cptData[n][0].content+(s<i?" ":""),e.end+=this.cptData[n][0].end}this.ind2=0;var r={caption:[e]};this.game.springRollCaptionsPlugin.setData(r),this.game.springRollCaptionsPlugin.playCaption("caption"),this.playVO()},e.playVO=function(){var t=this.pattern[this.ind1][this.ind2],e="";if(0===t.indexOf("obj")){var i=t.split("_")[1];e=this.explainerData.object_trait[i],this.game.sounds.playVO(e,{spriteID:"vo_explainer_object_trait",onComplete:this.handleEndVO,onCompleteScope:this})}else if(0===t.indexOf("char")){var s=t.split("_")[1];e=this.explainerData.character_trait[s],this.game.sounds.playVO(e,{spriteID:"vo_explainer_character_trait",onComplete:this.handleEndVO,onCompleteScope:this})}else e=t,this.game.sounds.playVO(e,{spriteID:"vo_explainer_variable",onComplete:this.handleEndVO,onCompleteScope:this})},e.handleEndVO=function(){this.ind2===this.pattern[this.ind1].length-1?this.ind1===this.pattern.length-1?(this.game.springRollCaptionsPlugin.setData(this.cptData),this.onEnd.dispatch()):(this.ind1++,this.playSentence()):(this.ind2++,this.playVO())},t}();e.default=r},DaKh:function(t,e,i){"use strict";"resetTransform"in CanvasRenderingContext2D.prototype||(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)})},EapQ:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("a/rO"),i("vw/H"),i("GPcm"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s){var a;(a=t.call(this,e)||this).size=.5*s+Math.random()*s*.5,a.costume=a.game.make.image(0,0,"ui_character_icons","star"),a.costume.anchor.set(.5),a.costume.angle=360*Math.random(),a.costume.scale.set(a.size),a.shadow=a.game.make.image(0,7,"ui_character_icons","star_shadow"),a.shadow.anchor.set(.5),a.shadow.angle=a.costume.angle,a.shadow.scale.set(a.size),a.addChild(a.shadow),a.addChild(a.costume);var n=30+30*Math.random();return a.vx=n*Math.cos(i),a.vy=-n*Math.sin(i),a}return(0,a.default)(e,t),e.prototype.update=function(){var t=this.game.time.elapsedMS/1e3;this.x+=this.vx*t,this.y+=this.vy*t,this.costume.angle+=5,this.shadow.angle+=5;var e=Phaser.Math.distance(0,0,this.x,this.y);this.costume.scale.set(.96*this.costume.scale.x,.96*this.costume.scale.y),this.shadow.scale.set(.96*this.shadow.scale.x,.96*this.shadow.scale.y),e>20&&this.alpha>.1?(this.alpha+=4*(0-this.alpha)*t,this.vx+=2*(0-this.vx)*t,this.vy+=2*(0-this.vy)*t):e>20&&this.destroy(!0)},e}(Phaser.Sprite),o=function(t){function e(e,i,s,a){var o;void 0===i&&(i=40),void 0===s&&(s=65),void 0===a&&(a=.6),o=t.call(this,e,0,0)||this;for(var h=0;h<15;h++){var r=2*Math.random()*Math.PI,l=new n(e,r,a),d=i+Math.random()*(s-i);l.x=d*Math.cos(r),l.y=-d*Math.sin(r),o.addChild(l)}return o}(0,a.default)(e,t);var i=e.prototype;return i.update=function(){if(0===this.children.length)this.destroy();else{var t=this.children,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var s;if(e){if(i>=t.length)break;s=t[i++]}else{if((i=t.next()).done)break;s=i.value}s.update()}}},i.destroy=function(e){void 0===e&&(e=!0);var i=this.children,s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var n;if(s){if(a>=i.length)break;n=i[a++]}else{if((a=i.next()).done)break;n=a.value}var o=n;o.destroy(!0),o=null}t.prototype.destroy.call(this,e)},e}(Phaser.Sprite);e.default=o},"F+WU":function(t,e,i){"use strict";var s=i("R6lU");i("j3Ef"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("drmM")),o=s(i("9SIq")),h=s(i("dMJc")),r=s(i("4ase")),l=s(i("4UFF")),d=s(i("0BGZ")),c=i("6YV8"),u=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.create=function(){var t=this;this.container=this.game.add.group(),this.location=new o.default(this.game,this.locationData,this.levelData.sceneWidth),this.location.onFindChar.add(this.handleFindChar,this),this.container.addChild(this.location),this.seeker=new r.default(this.game,this.seekerId,this.locationData.nav_points,this.levelData.start_point,100,this.levelData.sceneWidth-100),this.seeker.onStartWalk.add(this.handleSeekerStartWalk,this),this.seeker.onPosition.add(this.handleSeekerOnPosition,this),this.location.placeSeeker(this.seeker),this.charsData=this.levelData.characters.filter((function(e){return e.id!==t.seekerId})),this.location.placeCharacters(this.charsData,this.levelData.slots,this.levelData.difficulty),this.camera=new h.default(this.game,this.location),this.camera.setPosition(this.seeker.x),this.camera.setTarget(this.seeker),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.LEFT),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.RIGHT),this.handleResize(),this.gameHud=new l.default(this.game,this.charsData),this.container.addChild(this.gameHud),this.gameHud.onScrollLeft.add(this.handleScrollLeft,this),this.gameHud.onScrollRight.add(this.handleScrollRight,this),this.location.sceneWidth>2e3&&this.gameHud.showScrollArrows(!this.seeker.atFirstNavPoint(),!this.seeker.atLastNavPoint()),this.toFind=this.charsData.length,this.found=0,this.gameStarted=!1,this.timeToWiggle=5,this.cptHint=this.game.cache.getJSON("vo_ui_captions"),this.gameHud.onCountEnd.addOnce(this.handleCountEnd,this),this.gameHud.showOverlayCount(this.seekerId,!1),this.transition=this.game.controller.getTransition(),this.transition.fadeOut()},i.handleCountEnd=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToStart,this),this.transition.fadeIn()},i.handleTransitionEndToStart=function(){this.gameHud.removeOverlayCount(),this.transition.fadeOut(),this.gameStarted=!0,this.location.enableControls(),this.levelData.onboarding&&(this.game.onboarding=new d.default(this.game,this.levelData.onboarding,this.game.cache.getJSON(this.levelData.onboarding+"_config"),this),this.game.onboarding.onEnd.addOnce(this.handleOnboardingEnd,this),this.game.onboarding.start())},i.handleOnboardingEnd=function(){this.game.onboarding.destroy(),this.game.onboarding=null,this.game.springRollCaptionsPlugin.setData(this.cptData)},i.handleResize=function(){this.calculateNavPoints(),this.seeker.navPoints=this.navPoints,this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId},i.handleScrollLeft=function(){this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.seeker.gotoPrevNavPoint(),this.gameHud.hideScrollArrows()},i.handleScrollRight=function(){this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.seeker.gotoNextNavPoint(),this.gameHud.hideScrollArrows()},i.handleSeekerOnPosition=function(){this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.location.sceneWidth>2e3&&this.gameHud.showScrollArrows(!this.seeker.atFirstNavPoint(),!this.seeker.atLastNavPoint())},i.handleSeekerStartWalk=function(){this.gameHud.hideScrollArrows()},i.handleFindChar=function(t){this.game.onboarding&&this.game.springRollCaptionsPlugin.setData(this.cptData),this.gameHud.charactersList.revealCharacter(t);var e=Math.floor(3*Math.random()),i="vo_01_"+this.seekerId+"_"+["011","015","016"][e];this.game.springRollCaptionsPlugin.playCaption(i),this.game.sounds.playVO(i,{spriteID:this.seekerId+"_vo",delay:450});var s=this.cptData[i],a=s[s.length-1].end;this.seeker.stop(),this.seeker.pointCharacter(),this.seeker.talk(a,450),0===this.found&&(this.game.controller.nextSeekerId=t),this.found++,this.found>=this.toFind?(this.seeker.allFound=!0,this.game.time.events.add(a+450,this.showResult,this)):this.game.time.events.add(a+450,this.enableControls,this),this.gameHud.arrowsContainer.visible=!1,this.location.disableControls(),this.location.lockCharacters(),this.gameHud.charactersList.lock()},i.showResult=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToResult,this),this.transition.fadeIn()},i.enableControls=function(){this.gameHud.arrowsContainer.visible=!0,this.location.enableControls(),this.location.unlockCharacters(),this.gameHud.charactersList.unlock()},i.enableKeyboardControls=function(){},i.handleTransitionEndToResult=function(){this.gameHud.onCloseResult.addOnce(this.handleCloseResult,this),this.gameHud.showOverlayResult(this.seekerId,this.charsData),this.transition.fadeOut();var t=this.game.controller.location,e="EndLevel_"+(t=t.replace(/^\w/,(function(t){return t.toUpperCase()})))+"_Level_"+(this.levelData.id+1);(0,c.getGA)().track({action:e})},i.handleCloseResult=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToNextLevel,this),this.transition.fadeIn()},i.handleTransitionEndToNextLevel=function(){this.game.controller.endLevel()},i.showClue=function(t){if(this.clueId!==t){this.clueId=t,this.clueCount=1;var e="ui_01_elinor_101";"twins"===t?e+="_twins":Math.random()<1&&(e+="elinor"===t||"olive"===t?"_her":"_him");var i=["ui_01_elinor_"+t,e];this.playHintVOs(i),this.hintPlaying=!0,this.seeker.stopTalking()}else if(!this.hintPlaying){this.seeker.stopTalking(),this.gameHud.charactersList.lock(),this.location.disableControls(),this.location.lockCharacters(),this.gameHud.arrowsContainer.visible=!1;var s=this.location.findSlotWithCharacter(t);this.camera.setTarget(s),this.camera.onPosition.addOnce(this.handleCameraOnClueTarget,this)}},i.handleCameraOnClueTarget=function(){var t=["ui_01_elinor_102","ui_01_elinor_"+this.clueId];(this.playHintVOs(t),2===this.clueCount)&&this.location.findSlotWithCharacter(this.clueId).showBlings();this.clueCount=2,this.game.time.events.add(2500,this.returnToSeeker,this)},i.returnToSeeker=function(){this.camera.setTarget(this.seeker),this.camera.onPosition.addOnce(this.handleCameraOnSeeker,this)},i.handleCameraOnSeeker=function(){this.location.enableControls(),this.location.unlockCharacters(),this.gameHud.arrowsContainer.visible=!0,this.gameHud.charactersList.unlock()},i.playHintVOs=function(t){this.stopHintVO(),this.game.springRollCaptionsPlugin.setData(this.cptHint),this.voIds=t,this.voInd=0,this.playHintVO(this.voIds[this.voInd])},i.playHintVO=function(t){this.audio=this.game.sounds.playVO(t,{spriteID:"vo_ui",onComplete:this.handleHintVOEnd,onCompleteScope:this}),this.game.springRollCaptionsPlugin.playCaption(t)},i.handleHintVOEnd=function(){this.audio=null,this.voInd++,this.voInd<this.voIds.length?this.playHintVO(this.voIds[this.voInd]):(this.game.springRollCaptionsPlugin.setData(this.cptData),this.hintPlaying=!1)},i.stopHintVO=function(){this.audio&&(this.voInd=999,this.audio.stop(),this.audio=null,this.game.springRollCaptionsPlugin.stopCaption())},i.update=function(){var t=Math.min(.1,this.game.time.elapsedMS/1e3);this.timeToWiggle-=t,this.location.controlsEnabled&&(this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)&&this.seeker.gotoPosition(this.seeker.x-100),this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&this.seeker.gotoPosition(this.seeker.x+100)),this.seeker.step(t),this.location.step(t),this.camera.step(t),this.game.onboarding&&this.game.onboarding.step(t)},i.shutdown=function(){this.game.onboarding&&(this.game.onboarding.onEnd.remove(this.handleOnboardingEnd,this),this.game.onboarding.destroy(),this.game.onboarding=null),this.seeker&&(this.seeker.destroy(),this.seeker=null),this.container.destroy(!0),this.container=null,t.prototype.shutdown.call(this)},e}(n.default);e.default=u},FuGw:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("2yko")),h=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){this.sceneData=t},i.preload=function(){},i.create=function(){this.container=new n.default(this.game),this.game.controller.shortcutsModel.cutscenesEnabled?(this.cutscene=new o.default(this.game,this.sceneData.id),this.container.addChild(this.cutscene),this.cutscene.x=this.game.defaultWidth/2,this.cutscene.y=this.game.defaultHeight/2,this.cutscene.onAnimComplete.addOnce(this.handleAnimComplete,this),this.cutscene.showSkipButton()):this.handleAnimComplete(),this.transition=this.game.controller.getTransition(),this.transition.fadeOut()},i.handleAnimComplete=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEnd,this),this.transition.fadeIn()},i.handleTransitionEnd=function(){this.game.controller.endCutscene(this.sceneData.isEndScene)},i.shutdown=function(){this.cutscene&&this.cutscene.destroy(),this.container.destroy(!0),this.cutscene=null,this.transition=null,this.container=null},e}(Phaser.State);e.default=h},G9dM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(){this.hideShortcuts=function(){},this.currentLevel="none",this.seasonsUnlocked=!1,this.cutscenesEnabled=!0,this.countdownEnabled=!0,this.sound=!0,this.sfx=!0,this.music=!0,this.vo=!0,this.captions=!0,this.nextLevel=function(){},this.launchLevel=[]}},GEMp:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("01M/")),o=i("zgbH"),h=s(i("LClc")),r=s(i("x1tP")),l=s(i("duvY")),d=i("SPpy"),c=i("6YV8"),u=i("zgbH"),g=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.preload=function(){this.debug=!1,this.loadComplete=!1,this.loadBar=new h.default(this.game),this.game.add.existing(this.loadBar),this.fontsReady=!1,this.assetsReady=!1,this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.loadFonts(),this.loadAppAssetPacks()},i.handleLoadStart=function(){(0,d.getGameFileLoadList)(this.game,this.debug)},i.handleFileStart=function(t,e,i){-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},i.loadFonts=function(){n.default.load({custom:{families:[o.FONT_COPY,o.FONT_SUBTITLE,o.FONT_REGULAR,o.FONT_ITALIC,o.FONT_EXTRA_BOLD,o.FONT_BOLD,o.FONT_BOLD_ITALIC,o.FONT_LIGHT],urls:[this.game.urls.getFontsDirectory(o.FONT_CSS)]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)})},i.loadAppAssetPacks=function(){this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous";var t=this.game.cache.getJSON("loading_data").main;this.audioSprites=[];for(var e=t.packs,i=0;i<e.length;i++){var s=e[i];this.game.load.pack(s.key,s.path,null,this)}for(var a=t.characters,n=0;n<a.length;n++){var o=a[n];this.game.load.pack("load",this.game.urls.getCharacterPath(o)+"assetpack.json")}for(var h=new l.default(this.game.cache.getJSON("data_cutscenes")),r=t.cutscenes,d=0;d<r.length;d++){var c=r[d],u=h.getScene(c);this.loadCutsceneAssets(c,u)}},i.loadCutsceneAssets=function(t,e){for(var i=this.game.urls.getCutscenePath(t),s=0;s<e.skeletons.length;s++){var a=e.skeletons[s],n=a;this.game.load.spine(n,i+"spine/"+a+".json")}e.onlyAnim||(this.game.load.json(t+"_captions",i+"captions.json"),i+="audio/64/"+t,this.game.load.audioSprite(t+"_vo",[i+".mp3"],i+".json"))},i.loadUpdate=function(){this.loadBar.visible=!0,this.loadBar.setProgress(this.game.load.progress/100)},i.create=function(){this.assetsReady=!0,this.game.sounds.startup()},i.fontsLoaded=function(){this.fontsReady=!0,this.checkLoading()},i.update=function(){this.checkLoading()},i.checkLoading=function(){!this.loadComplete&&this.assetsReady&&this.fontsReady&&(this.loadBar.setProgress(1),this.handleLoadComplete())},i.handleLoadComplete=function(){var t=this;if(!this.loadComplete){this.loadComplete=!0,this.game.app_config=this.game.cache.getJSON("app_config"),this.setControllers();for(var e=0;e<this.audioSprites.length;e++)this.game.sounds.addAudioSprite({id:this.audioSprites[e]});for(var i=0;i<this.game.app_config.audio.length;i++)this.game.sounds.addSound(this.game.app_config.audio[i],this.game.app_config.audio[i]);this.game.sounds.decode(this.audioSprites,this.audioDecoded,this),this.decodeSoundsCallback=this.game.time.events.add(u.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()}))}},i.audioDecoded=function(){this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.loadBar.onAnimationComplete.add(this.handleLoadAnimationComplete,this),this.loadBar.animateCompleteSequence();var t=this.game.springRollApplication.getPlugin("GoogleAnalytics");(0,c.addGoogleAnalyticsPlugin)({plugin:t})},i.setControllers=function(){this.game.controller=new r.default(this.game),this.game.controller.init(this.game.cache.getJSON("gamedata"))},i.handleLoadAnimationComplete=function(){this.game.controller.showWelcomeScreen(),this.loadComplete=!0},i.shutdown=function(){this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.loadBar.onAnimationComplete.remove(this.handleLoadAnimationComplete,this),this.loadBar.destroy(),this.loadBar=null},e}(Phaser.State);e.default=g},JIfh:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=s(i("ZThm")),r=function(t){function e(e){var i;(i=t.call(this,e)||this).bg=i.game.make.image(0,0,"bg_welcome_blur"),i.addChild(i.bg),i.text=i.game.make.text(i.game.defaultWidth/2,110,"Choose where to play",{font:"70px Elinor",fill:"#FFFFFF",stroke:"#000000",strokeThickness:8}),i.text.anchor.set(.5,0),i.addChild(i.text);var s=Math.min(3,i.game.controller.player.unlockedLocations),n=["btn_location_summer","btn_location_autumn","btn_location_winter"],r=[[{dx:-165,dy:35},{dx:165,dy:35}],[{dx:-305,dy:85},{dx:0,dy:15},{dx:305,dy:85}]][s-2];i.buttons=[];for(var l=0;l<s;l++){var d=new h.default({game:i.game,bg:"btn_location_bg",mask:"btn_location_mask",key:n[l],dy:-4,voId:"ui_01_elinor_0"+(28+l)});d.x=i.game.defaultWidth/2+r[l].dx,d.y=i.game.defaultHeight/2+r[l].dy,d.data.id=l,d.onInputDown.addOnce(i.handleLocationSelect,(0,a.default)(i)),i.addChild(d),i.buttons.push(d),d.scale.set(0),i.game.add.tween(d.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100*l)}return i.btnBack=new o.default({game:i.game,up:"btn_back",over:"btn_back"}),i.btnBack.x=.5*(i.game.defaultWidth-i.game.width)+60,i.btnBack.y=60,i.btnBack.onInputDown.addOnce(i.handleBackBtn,(0,a.default)(i)),i.addChild(i.btnBack),i.onSelect=new Phaser.Signal,i.onBack=new Phaser.Signal,i.game.scale.onSizeChange.add(i.positionElements,(0,a.default)(i)),i}(0,n.default)(e,t);var i=e.prototype;return i.positionElements=function(){this.btnBack.x=.5*(this.game.defaultWidth-this.game.width)+60},i.handleLocationSelect=function(t){this.selectedButton=t;for(var e=0;e<this.buttons.length;e++)this.buttons[e].inputEnabled=!1;this.btnBack.inputEnabled=!1,this.game.time.events.add(1e3,this.dispatchEvent,this)},i.dispatchEvent=function(){this.onSelect.dispatch(this.selectedButton.data.id)},i.handleBackBtn=function(){this.onBack.dispatch()},i.destroy=function(){this.game.scale.onSizeChange.remove(this.positionElements,this);for(var e=0;e<this.buttons.length;e++)this.buttons[e].destroy();this.buttons=null,this.btnBack=null,this.text=null,this.bg=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=r},JTXM:function(t,e,i){"use strict";i("j3Ef"),i("XvIX"),i("QQAp"),i("3Ss1"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e,i,s,a){this.game=t,this.location=e,this.slots=i,this.seeker=s,this.quickFind=a,this.targetSlot=null,this.onFindChar=new Phaser.Signal,this.onShowExplainer=new Phaser.Signal}var e=t.prototype;return e.getNextTarget=function(){this.slots.sort((function(t,e){return t.rating-e.rating}));for(var t=this.slots[0].rating,e=this.slots.filter((function(e){return e.rating===t})),i=1e4,s=0;s<e.length;s++){var a=Math.abs(this.seeker.x-e[s].getCharacterPos().x);a<i&&(i=a,this.targetSlot=e[s])}this.startSearching()},e.startSearching=function(){if(0===this.targetSlot.rating||this.quickFind){var t=this.targetSlot.getCharacterPos().x,e=t+200*(this.seeker.x-t>0?1:-1);this.seeker.onPosition.addOnce(this.handleSeekerOnPosition,this),this.seeker.gotoPosition(e)}else if(1===this.targetSlot.rating){var i=this.targetSlot.getCharacterPos().x,s=i+350*(this.seeker.x-i>0?1:-1);this.seeker.onPosition.addOnce(this.handleSeekerOnPosition1,this),this.seeker.gotoPosition(s)}else{var a=this.targetSlot.getCharacterPos().x,n=this.seeker.x-a;if(this.destX=a+200*(n>0?1:-1),this.voCounter=0,Math.abs(n)<1e3){var o=0;o=this.destX<800?this.destX+800:this.destX>this.location.width-800?this.destX-800:this.destX+800*(n>0?1:-1),this.seeker.onPosition.addOnce(this.handleSeekerOnWayPoint,this),this.seeker.gotoPosition(o)}else this.handleThinkingEnd3()}},e.handleSeekerOnWayPoint=function(){if(this.seeker.think(),this.seeker.onAnimEnd.addOnce(this.handleThinkingEnd3,this),this.voCounter%2==0){var t="vo_01_"+this.seeker.seekerId+"_"+["026","027","028"][3*Math.random()|0];this.game.springRollCaptionsPlugin.playCaption(t),this.game.sounds.playVO(t,{spriteID:this.seeker.seekerId+"_vo"})}this.voCounter++},e.handleThinkingEnd3=function(){var t=this.destX-this.seeker.x;if(Math.abs(t)<=800)this.seeker.onPosition.addOnce(this.handleSeekerOnPosition,this),this.seeker.gotoPosition(this.destX);else{var e=this.seeker.x+700*(t>0?1:-1);this.seeker.onPosition.addOnce(this.handleSeekerOnWayPoint,this),this.seeker.gotoPosition(e)}},e.handleSeekerOnPosition1=function(){this.seeker.think(),this.seeker.onAnimEnd.addOnce(this.handleThinkingEndMedium,this)},e.handleThinkingEndMedium=function(){this.seeker.idle(),this.game.time.events.add(1e3,this.gotoTarget,this)},e.gotoTarget=function(){var t=this.targetSlot.getCharacterPos().x,e=t+200*(this.seeker.x-t>0?1:-1);this.seeker.onPosition.addOnce(this.handleSeekerOnPosition,this),this.seeker.gotoPosition(e)},e.handleSeekerOnPosition=function(){var t=this.targetSlot.getCharacterPos();this.game.state.getCurrentState().makeScreenshot(t.x,t.y,this.targetSlot.character);var e=this.targetSlot.getCharacterPos().x-this.seeker.x;this.seeker.setDirection(e>0?-1:1),0===this.targetSlot.rating||this.quickFind||1===this.targetSlot.rating?(this.seeker.think(),this.seeker.onAnimEnd.addOnce(this.handleThinkingEnd,this)):(this.seeker.think(),this.seeker.onAnimEnd.addOnce(this.handleThinkingEnd2,this))},e.handleThinkingEnd2=function(){this.seeker.idle(),this.targetSlot.character.hudSlotRef.setStateClue(),this.game.time.events.add(100,this.wiggleChar,this)},e.wiggleChar=function(){this.targetSlot.character.wiggle(),this.game.time.events.add(1e3,this.seekerReactionOnWiggle,this)},e.seekerReactionOnWiggle=function(){var t="vo_01_"+this.seeker.seekerId+"_015";this.game.springRollCaptionsPlugin.playCaption(t),this.game.sounds.playVO(t,{spriteID:this.seeker.seekerId+"_vo"}),this.seeker.talk(1e3),this.seeker.onAnimEnd.addOnce(this.jumpUpChar,this)},e.jumpUpChar=function(){this.targetSlot.character.jumpUp(),this.game.time.events.add(1e3,this.showBestHiddenChar,this)},e.seekerReactionOnJumpUp=function(){var t="vo_01_"+this.seeker.seekerId+"_012";this.game.springRollCaptionsPlugin.playCaption(t),this.game.sounds.playVO(t,{spriteID:this.seeker.seekerId+"_vo"}),this.seeker.talk(1700),this.seeker.onAnimEnd.addOnce(this.showBestHiddenChar,this)},e.showBestHiddenChar=function(){this.handlePointingEnd()},e.handleThinkingEnd=function(){this.seeker.idle(),this.game.time.events.add(1e3,this.pointTarget,this)},e.pointTarget=function(){this.seeker.pointCharacter(),this.seeker.onAnimEnd.addOnce(this.handlePointingEnd,this)},e.handlePointingEnd=function(){this.onFindChar.dispatch(this.targetSlot.character.charData.id,this.targetSlot),this.game.time.events.add(1500,this.celebrate,this)},e.celebrate=function(){this.targetSlot.revealCharacter(),this.seeker.celebrate(),this.seeker.onAnimEnd.addOnce(this.handleCelebratingEnd,this)},e.handleCelebratingEnd=function(){this.seeker.idle(),this.slots.splice(this.slots.indexOf(this.targetSlot),1),this.targetSlot=null,this.slots.length>0&&this.getNextTarget()},e.afterExplainer=function(){this.slots.length>0&&this.getNextTarget()},t}();e.default=s},JfT4:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.x,o=void 0===n?0:n,h=e.y,r=void 0===h?0:h,l=e.dx,d=void 0===l?0:l,c=e.dy,u=void 0===c?0:c,g=e.id,p=e.bmd,m=e.atlas,f=void 0===m?"ui_buttons":m;(i=t.call(this,s,o,r,f)||this).characterId=g,i.onTap=new Phaser.Signal,i.bg=i.game.make.image(0,5,f,"btn_rating_bg"),i.bg.anchor.set(.5),i.bg.inputEnabled=!0,i.bg.input.useHandCursor=!0,i.bg.events.onInputDown.add(i.handleInputDown,(0,a.default)(i)),i.bg.events.onInputOver.add(i.handleInputOver,(0,a.default)(i)),i.bg.events.onInputOut.add(i.handleInputOut,(0,a.default)(i)),i.addChild(i.bg);var v=i.bg.getLocalBounds();return v.y-=120,v.height+=120,i.bg.hitArea=v,i.image=i.game.make.image(0,0,i.getMaskedTexture(d,u,p)),i.image.anchor.set(.5),i.image.inputEnabled=!1,i.addChild(i.image),i.border=i.game.make.image(0,5,f,"btn_rating_frame"),i.border.anchor.set(.5),i.addChild(i.border),i}(0,n.default)(e,t);var i=e.prototype;return i.getMaskedTexture=function(t,e,i){var s=90,a=this.game.make.image(.6*-t,.6*-e,i);a.anchor.set(.5);var n=s-.6*a.width/2,o=.6*a.width/2-90;a.x=Phaser.Math.clamp(a.x,n,o);var h=s-.6*a.height/2,r=.6*a.height/2-90;a.y=Phaser.Math.clamp(a.y,h,r),a.scale.set(.6),a.x+=s,a.y+=s;var l=this.game.make.graphics();l.beginFill(16711680),l.drawCircle(0,0,180);var d=this.game.make.image(0,0,l.generateTexture()),c=d.width,u=d.height,g=this.game.make.bitmapData(c,u);return g.alphaMask(a,d),g},i.enable=function(){this.bg.input.enabled=!0},i.disable=function(){this.bg.input.enabled=!1},i.onDown=function(){this.game.sounds.playVO(this.voId,{spriteID:"vo_ui"})},i.handleInputDown=function(){this.onTap.dispatch(this)},i.handleInputOver=function(){this.scaleBeforeOver=this.bg.scale.x;var t=1.2===this.bg.scale.x?1.2:1.1*this.bg.scale.x;this.bg.scale.set(t),this.image.scale.set(t),this.border.scale.set(t),this.stars.scale.set(t)},i.handleInputOut=function(){var t=this.scaleBeforeOver;this.bg.scale.set(t),this.image.scale.set(t),this.border.scale.set(t),this.stars.scale.set(t)},i.destroy=function(){this.bg.events.onInputDown.removeAll(),this.disable(),t.prototype.destroy.call(this)},i.makeBigger=function(){this.game.add.tween(this.bg.scale).to({x:1.2,y:1.2},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.image.scale).to({x:1.2,y:1.2},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.border.scale).to({x:1.2,y:1.2},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.stars.scale).to({x:1.2,y:1.2},350,Phaser.Easing.Back.Out,!0)},i.makeNormal=function(){this.game.add.tween(this.bg.scale).to({x:1,y:1},350,Phaser.Easing.Back.In,!0),this.game.add.tween(this.image.scale).to({x:1,y:1},350,Phaser.Easing.Back.In,!0),this.game.add.tween(this.border.scale).to({x:1,y:1},350,Phaser.Easing.Back.In,!0),this.game.add.tween(this.stars.scale).to({x:1,y:1},350,Phaser.Easing.Back.In,!0)},i.makeSmaller=function(){this.game.add.tween(this.bg.scale).to({x:.9,y:.9},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.image.scale).to({x:.9,y:.9},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.border.scale).to({x:.9,y:.9},350,Phaser.Easing.Back.Out,!0),this.game.add.tween(this.stars.scale).to({x:.9,y:.9},350,Phaser.Easing.Back.Out,!0)},e}(Phaser.Group);e.default=o},LClc:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("ssJl")),h=s(i("4+AI")),r=function(t){function e(e){var i;return(i=t.call(this,e,{background:"bg_location_summer"})||this).onAnimationComplete=new Phaser.Signal,i.loadBar=new o.default(i.game),i.loadBar.x=.5*i.game.defaultWidth-.5*i.loadBar.width,i.loadBar.y=510,i.add(i.loadBar),i.elinor=new h.default(i.game,.5*i.game.defaultWidth,370,"elinor","right"),i.elinor.playAnim("preloader"),i.elinor.setScale(.3),i.addChild(i.elinor),i}(0,a.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.loadBar.setProgress(Math.max(0,Math.min(1,t)))},i.setProcessing=function(){this.loadBar.setProcessing()},i.animateCompleteSequence=function(){this.loadBar.tweenInCrystal(),this.animateOutTween=this.game.add.tween(this).to({alpha:0},200,Phaser.Easing.Quadratic.Out,!0,2e3),this.animateOutTween.onComplete.add(this.handleAnimateSequenceComplete,this)},i.handleAnimateSequenceComplete=function(){this.onAnimationComplete.dispatch()},i.destroy=function(){this.onAnimationComplete.removeAll(),this.animateOutTween&&(this.animateOutTween.stop(),this.game.tweens.remove(this.animateOutTween)),this.loadBar.destroy(),this.onAnimationComplete=null,this.animateOutTween=null,this.loadBar=null,t.prototype.destroy.call(this,!0)},e}(n.default);e.default=r},M09M:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s,"goto_marker")||this).anchor.set(.5),n.inputEnabled=!0,n.events.onInputDown.addOnce(n.handleInputDown,(0,a.default)(n)),n}return(0,n.default)(e,t),e.prototype.handleInputDown=function(){this.game.onboarding.handleGotoMarkerTap()},e}(Phaser.Image);e.default=o},Odga:function(t,e,i){"use strict";i("3Ipg"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("zgbH"),a=function(){function t(t){var e=t.game;this.game=e,this.dataSlots=this.initSaveSlots()}var e=t.prototype;return e.initSaveSlots=function(){return this.dataSlots=this.loadSlotsData(),this.dataSlots||(this.dataSlots={},this.saveGameSlots()),this.dataSlots},e.loadSlotsData=function(){var t={}[s.SAVED_PLAYER_DATA_ID];return!!t&&JSON.parse(t)},e.createNewSaveSlot=function(t){this.dataSlots[t.slotindex]=t.serialize(),this.saveGameSlots()},e.deleteSaveSlot=function(t){delete this.dataSlots[t],this.saveGameSlots()},e.savePlayerData=function(t){this.dataSlots[t.slotindex]=t.serialize(),this.saveGameSlots()},e.loadSaveSlot=function(t,e){return e?!!this.dataSlots[t]&&JSON.parse(this.dataSlots[t]):this.dataSlots[t]},e.hasSaveSlot=function(t){return void 0!==this.dataSlots[t]},e.hasPlayerSaves=function(){return!!this.dataSlots&&Object.keys(this.dataSlots).length>0},e.getGameSlots=function(){return this.dataSlots},e.saveGameSlots=function(){},t}();e.default=a},PFbm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i;return(i=t.call(this,e)||this).onFadeEnd=new Phaser.Signal,i.fade=i.game.add.spine(i.game.defaultWidth/2,i.game.defaultHeight/2,"transition_ring",!0),i.fade.anchor.set(.5,1),i.add(i.fade),i.fade.visible=!1,i}(0,a.default)(e,t);var i=e.prototype;return i.fadeIn=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_in",!1),this.update(),this.fade.onComplete.addOnce(this.handleFadeInEnd,this)},i.fadeOut=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_out",!1),this.update(),this.updateTransform(),this.fade.onComplete.addOnce(this.handleFadeOutEnd,this)},i.handleFadeInEnd=function(){this.onFadeEnd.dispatch()},i.handleFadeOutEnd=function(){this.fade.visible=!1,this.onFadeEnd.dispatch()},i.destroy=function(){this.fade.destroy(),this.fade=null,t.prototype.destroy.call(this)},e}(s(i("3huV")).default);e.default=n},QK8x:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("ZoOD")),o=s(i("dD3M")),h=function(t){function e(e,i){var s;(s=t.call(this,e)||this).charData=i,s.slotsAmount=i.length,s.offset=0;var a=.5*-(s.slotsAmount-1)*150;s.slots={};for(var o=0;o<s.slotsAmount;o++){var h=i[o].id,r=new n.default(s.game,h);r.x=a+150*o,r.destX=r.x,s.addChild(r),s.slots[h]=r}return s.createCheckButton(),s.createPanel(),s}(0,a.default)(e,t);var i=e.prototype;return i.setSlotsPositions=function(){var t=0;for(var e in this.slots)this.slots.hasOwnProperty(e)&&t++;var i=.5*-(t-1)*150,s=0;for(var a in this.slots)this.slots.hasOwnProperty(a)&&(this.slots[a].destX=i+150*s,s++)},i.setArrowsVisibility=function(t){for(var e in this.slots)this.slots.hasOwnProperty(e)&&this.slots[e].setArrowVisibility(t)},i.setArrowsAnim=function(t){for(var e in this.slots)this.slots.hasOwnProperty(e)&&this.slots[e].setArrowsAnim(t)},i.getSlot=function(t){return isNaN(t)||(t=this.charData[t].id),this.slots[t]},i.revealCharacter=function(t){this.getSlot(t).revealCharacter(),this.game.time.events.add(1e3,this.handleRevealEnd,this,t)},i.handleRevealEnd=function(t){delete this.slots[t],this.setSlotsPositions()},i.enlargeCharacter=function(t){this.getSlot(t).enlarge()},i.normalizeCharacter=function(t){this.getSlot(t).normalize()},i.pulseCharacter=function(t,e){this.getSlot(t).pulse(e)},i.getSlotForCharacter=function(t){return this.getSlot(t)},i.showDragHand=function(t){var e=this.getSlot(t);this.hand=this.game.make.image(e.x,e.y,"ui_character_icons","hand"),this.hand.anchor.set(0,.5),this.hand.alpha=0,this.addChild(this.hand),this.game.time.events.add(500,this.animateHand,this,t),this.game.time.events.add(2e3,this.animateHand,this,t),this.game.time.events.add(3500,this.animateHand,this,t),this.game.time.events.add(5e3,this.handleHandAnimEnd,this,t)},i.animateHand=function(t){if(this.hand){var e=this.getSlot(t);this.hand.alpha=0,this.hand.y=e.y,this.game.add.tween(this.hand).to({alpha:1},100,null,!0),this.game.add.tween(this.hand).to({y:"+200"},1500,null,!0),this.game.add.tween(this.hand).to({alpha:0},100,null,!0,1400)}},i.handleHandAnimEnd=function(t){this.hand&&this.showArrow(t)},i.hideDragHand=function(t){this.hand.destroy(),this.hand=null},i.hideArrow=function(t){this.getSlot(t).setArrowVisibility(!1)},i.showArrow=function(t){this.getSlot(t).setArrowVisibility(!0)},i.lock=function(){for(var t in this.slots)if(this.slots.hasOwnProperty(t)){var e=this.slots[t];e.isEmpty||e.lock()}},i.unlock=function(){for(var t in this.slots)if(this.slots.hasOwnProperty(t)){var e=this.slots[t];e.isEmpty||e.unlock()}},i.createCheckButton=function(){this.btnCheck=new o.default({game:this.game,up:"btn_check",over:"btn_check"});this.btnCheck.x=.5*-(this.slotsAmount-1)*150+150*this.slotsAmount,this.btnCheck.y=5,this.addChild(this.btnCheck),this.btnCheck.visible=!1},i.createPanel=function(){this.panel=this.game.make.group(),this.panelDestWidth=150*(this.slotsAmount+1),this.panel.x=.5*-this.panelDestWidth+75,this.panel.y=8,this.panelLeft=this.game.make.image(0,0,"ui_various","top_panel_left"),this.panelLeft.anchor.set(0,.5),this.panelRight=this.game.make.image(0,0,"ui_various","top_panel_right"),this.panelRight.anchor.set(0,.5),this.panelMid=this.game.make.image(0,0,"ui_various","top_panel_middle"),this.panelMid.anchor.set(0,.5),this.panel.addChild(this.panelLeft),this.panel.addChild(this.panelMid),this.panel.addChild(this.panelRight),this.addChildAt(this.panel,0),this.panel.visible=!1},i.handleBtnCheck=function(){this.btnCheck.onInputDown.remove(this.handleBtnCheck,this),this.hideCheckButton(),this.game.state.getCurrentState().handleButtonContinue()},i.showCheckButton=function(){this.btnCheck.onInputDown.add(this.handleBtnCheck,this),this.tween1&&(this.tween1.stop(),this.tween2.stop(),this.tween3.stop()),this.btnCheck.visible=!0,this.btnCheck.scale.set(0),this.tween1=this.game.add.tween(this.btnCheck.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),this.startX=.5*this.game.width,this.offset=-75,this.tween2=this.game.add.tween(this).to({x:this.startX-75},300,null,!0),this.panel.visible=!0,this.panelLeft.width=0,this.panelMid.width=0,this.panelRight.width=0,this.panelWidth=0;var t=150*(this.slotsAmount+1);this.tween3=this.game.add.tween(this).to({panelWidth:t},300,Phaser.Easing.Quadratic.Out,!0),this.tween3.onUpdateCallback(this.handlePanelWidthUpdate,this)},i.handlePanelWidthUpdate=function(t,e,i){var s=Math.max(0,this.panelWidth-160),a=.5*(this.panelWidth-s);this.panelLeft.width=a,this.panelMid.x=a,this.panelMid.width=s,this.panelRight.x=a+s,this.panelRight.width=a},i.hideCheckButton=function(){this.tween1&&(this.tween1.stop(),this.tween2.stop()),this.tween1=this.game.add.tween(this.btnCheck.scale).to({x:0,y:0},300,Phaser.Easing.Back.In,!0),this.tween1.onComplete.add(this.handleCheckButtonHideEnd,this),this.offset=0,this.tween2=this.game.add.tween(this).to({x:this.startX},300,null,!0),this.tween3=this.game.add.tween(this).to({panelWidth:0},300,Phaser.Easing.Quadratic.In,!0),this.tween3.onUpdateCallback(this.handlePanelWidthUpdate,this)},i.handleCheckButtonHideEnd=function(){this.btnCheck.visible=!1,this.panel.visible=!1},e}(Phaser.Group);e.default=h},RAsK:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("hDA+"),a=function(){function t(t){this.game=t,this.onEnd=new Phaser.Signal,this.cptData=this.game.cache.getJSON("onboarding_05_captions"),this.cptData=(0,s.processCaptions)(this.game,this.cptData,"onboarding_05_vo-audioatlas"),this.game.springRollCaptionsPlugin.setData(this.cptData)}var e=t.prototype;return e.playVOs=function(t,e){void 0===e&&(e=null),this.stopVO(),this.avatar=e,this.game.springRollCaptionsPlugin.setData(this.cptData),this.voIds=t,this.ind=0,this.playVO(this.voIds[this.ind])},e.playVO=function(t){this.audio=this.game.sounds.playVO(t,{spriteID:"onboarding_05_vo",onComplete:this.handleVOEnd,onCompleteScope:this}),this.game.springRollCaptionsPlugin.playCaption(t),this.avatar&&this.avatar.talk()},e.handleVOEnd=function(){this.audio=null,this.ind++,this.ind<this.voIds.length?this.playVO(this.voIds[this.ind]):(this.avatar&&this.avatar.idle(),this.onEnd.dispatch())},e.stopVO=function(){this.audio&&(this.ind=999,this.audio.stop(),this.audio=null,this.game.springRollCaptionsPlugin.stopCaption(),this.avata&&this.avatar.idle())},e.destroy=function(){this.audio&&this.audio.stop()},t}();e.default=a},SPpy:function(t,e,i){"use strict";i("j3Ef"),i("/TzG"),i("3Ipg"),i("ocEJ"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.getGameFileLoadList=e.unloadAssetPack=e.unloadFile=void 0;var s=i("Bx3X"),a=function(t,e){switch(e.type){case"image":t.cache.checkImageKey(e.key)&&t.cache.removeImage(e.key,!0);break;case"text":t.cache.checkTextKey(e.key)&&t.cache.removeText(e.key);break;case"json":t.cache.checkJSONKey(e.key)&&t.cache.removeJSON(e.key);break;case"xml":t.cache.checkXMLKey(e.key)&&t.cache.removeXML(e.key);break;case"binary":t.cache.checkBinaryKey(e.key)&&t.cache.removeBinary(e.key);break;case"spritesheet":t.cache.checkKey(e.key)&&t.cache.removeSpriteSheet(e.key);break;case"video":t.cache.checkVideoKey(e.key)&&t.cache.removeVideo(e.key);break;case"tilemap":t.cache.checkTilemapKey(e.key)&&t.cache.removeTilemap(e.key);break;case"physics":t.cache.checkPhysicsKey(e.key)&&t.cache.removePhysics(e.key);break;case"bitmapFont":t.cache.checkBitmapFontKey(e.key)&&t.cache.removeBitmapFont(e.key);break;case"atlasJSONArray":case"atlasJSONHash":case"atlasXML":case"atlas":case"textureatlas":t.cache.removeTextureAtlas(e.key);break;case"audiosprite":t.sounds.removeAudioSprite({id:e.key});break;case"audio":t.sounds.removeSound(e.key,e.key)}};e.unloadFile=a;e.unloadAssetPack=function(t,e){Object.keys(e).forEach((function(i){e[i].forEach((function(e){a(t,e)}))}))};e.getGameFileLoadList=function(t,e){return(0,s.doesRequireLightVersion)()?t.load._fileList.filter((function(t){if("audio"===t.type){var e=t.url.map((function(t){return t.replace("64","32")}));t.url=e}return"packfile"!==t.type})):t.load._fileList.filter((function(t){return"packfile"!==t.type}))}},TSJq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("zgbH"),a=function(){function t(t){this.game=t}var e=t.prototype;return e.getBaseDirectory=function(){return s.PATH_BASE},e.resolveRelatveUrl=function(t){return this.getBaseDirectory()+t},e.getAssetsDirectory=function(t){return t?this.resolveRelatveUrl(s.PATH_ASSETS+t):this.resolveRelatveUrl(s.PATH_ASSETS)},e.getGameAssetsDirectory=function(t,e){return e?this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/"+e):this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/")},e.getFontsDirectory=function(t){return this.getAssetsDirectory("fonts/"+t)},e.getCutscenePath=function(t){return"cutscenes/"+t+"/"},e.getOnboardingPath=function(t){return"onboarding/"+t+"/"},e.getLocationAssetpack=function(t){return"locations/"+t+"/assetpack.json"},e.getCharacterPath=function(t){return"characters/"+t+"/"},e.getCharacterSpinePath=function(t){return"characters/"+t+"/spine/"+t+".json"},e.getCopyXML=function(t){return"locale/"+t+".xml"},e.getResultImage=function(t){return"ui/images/result_"+t+".png"},t}();e.default=a},V1hc:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=function(t){function e(e){var i;(i=t.call(this,e)||this).onClose=new Phaser.Signal;var s=i.game.make.image(0,0,"bg_location_"+i.game.controller.location);return i.addChild(s),i.btnReplay=new o.default({game:i.game,up:"btn_continue",over:"btn_continue",atlas:"ui_buttons"}),i.btnReplay.x=i.game.defaultWidth/2+140,i.btnReplay.y=360,i.addChild(i.btnReplay),i.btnReplay.onInputDown.addOnce(i.handleTapReplay,(0,a.default)(i)),i.btnReplay.scale.set(0),i.game.add.tween(i.btnReplay.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),i.btnHome=new o.default({game:i.game,up:"btn_home",over:"btn_home",atlas:"ui_buttons"}),i.btnHome.x=i.game.defaultWidth/2-130,i.btnHome.y=360,i.addChild(i.btnHome),i.btnHome.onInputDown.addOnce(i.handleTapHome,(0,a.default)(i)),i.btnHome.scale.set(0),i.game.add.tween(i.btnHome.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100),i.elinor=i.game.make.image(0,i.game.height,"ui_player_mode","elinor"),i.elinor.anchor.set(1,1),i.addChild(i.elinor),i.positionElements(),i}(0,n.default)(e,t);var i=e.prototype;return i.positionElements=function(){this.elinor.x=this.game.defaultWidth-.5*(this.game.defaultWidth-this.game.width)-50},i.removeListeners=function(){this.btnReplay.onInputDown.remove(this.handleTapReplay,this),this.btnHome.onInputDown.remove(this.handleTapHome,this)},i.handleTapReplay=function(){this.removeListeners(),this.game.controller.replayTwoPlayers()},i.handleTapHome=function(){this.removeListeners(),this.game.controller.showWelcomeScreen()},i.destroy=function(){this.removeListeners(),this.btnHome=null,this.btnReplay=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},V6s1:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("vle9")),h=s(i("dD3M")),r=s(i("7xLJ")),l=s(i("EapQ")),d=s(i("RAsK")),c=s(i("voi6")),u=i("5mNR"),g=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.levelData,i=t.seekerId;this.levelData=e,this.seekerId=i,this.availableIcons=["olive","ari","koa","elinor"]},i.preload=function(){},i.create=function(){this.game.twoPlayersOnboarding=new d.default(this.game),this.twoPlayersModel=new o.default,this.container=new n.default(this.game,{title:""});var t=this.game.make.image(0,0,"bg_location_"+this.game.controller.location);t.width=this.game.defaultWidth,t.height=this.game.defaultHeight,this.container.addChild(t),this.createPlayerButtons(),this.elinor=new c.default(this.game),this.elinor.y=this.game.defaultHeight,this.container.addChild(this.elinor),this.game.scale.onSizeChange.add(this.handleResize,this),this.handleResize(),this.playInitialAnim(),this.transition=this.game.controller.getTransition(),this.transition.fadeOut()},i.playInitialAnim=function(){this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_001","ob_05_elinor_002"],this.elinor),this.game.twoPlayersOnboarding.onEnd.addOnce(this.showPlayerButtons,this),this.emptyPlayer1.scale.set(0),this.game.add.tween(this.emptyPlayer1.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),this.emptyPlayer2.scale.set(0),this.game.add.tween(this.emptyPlayer2.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100)},i.handleResize=function(){this.elinor.x=this.game.defaultWidth-.5*(this.game.defaultWidth-this.game.width)-200},i.createPlayerButtons=function(){this.playerButtons=this.game.make.group(),this.container.addChild(this.playerButtons);var t=this.game.defaultWidth/2,e=this.game.defaultHeight/2;this.emptyPlayer1=this.game.make.image(t-145,e,"ui_player_mode","btn_player1_empty"),this.emptyPlayer1.anchor.set(.5),this.emptyPlayer2=this.game.make.image(t+145,e,"ui_player_mode","btn_player2_empty"),this.emptyPlayer2.anchor.set(.5),this.btnPlayer1=new h.default({game:this.game,up:"btn_player1",over:"btn_player1"}),this.btnPlayer1.position.set(t-145,e+5),this.btnPlayer1.onInputDown.add(this.handleBtnPlayer,this),this.btnPlayer1.disable(),this.btnPlayer2=new h.default({game:this.game,up:"btn_player2",over:"btn_player2"}),this.btnPlayer2.position.set(t+145,e+5),this.btnPlayer2.onInputDown.add(this.handleBtnPlayer,this),this.btnPlayer2.disable(),this.arrow=this.game.make.image(0,0,"ui_various","arrow_pointing_dr"),this.arrow.anchor.set(1),this.playerButtons.addChild(this.emptyPlayer1),this.playerButtons.addChild(this.emptyPlayer2),this.playerButtons.addChild(this.btnPlayer1),this.playerButtons.addChild(this.btnPlayer2),this.playerButtons.addChild(this.arrow),this.btnPlayer1.visible=!1,this.btnPlayer2.visible=!1,this.arrow.visible=!1},i.showPlayerButtons=function(){this.playerButtons||this.createPlayerButtons(),this.playerButtons.visible=!0;var t=this.btnPlayer1,e=null;if(this.arrow.visible=!1,this.twoPlayersModel.playerIcon1)this.twoPlayersModel.playerIcon2?(this.iconPlayer2=new r.default(this.game,this.btnPlayer2.x,this.btnPlayer2.y,2,this.twoPlayersModel.playerIcon2),this.playerButtons.addChild(this.iconPlayer2),this.btnPlayer2.visible=!1,this.btnPlayer2.disable(),t=this.iconPlayer1,e=this.iconPlayer2,this.transition.onFadeEnd.addOnce(this.loadLevel,this),this.transition.fadeIn()):(this.iconPlayer1=new r.default(this.game,this.btnPlayer1.x,this.btnPlayer1.y,1,this.twoPlayersModel.playerIcon1),this.playerButtons.addChild(this.iconPlayer1),this.btnPlayer1.visible=!1,this.btnPlayer1.disable(),this.btnPlayer2.visible=!0,this.btnPlayer2.enable(),this.emptyPlayer2.visible=!1,t=this.iconPlayer1,e=this.btnPlayer2,this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_007"],this.elinor),this.showArrow(this.btnPlayer2));else{this.emptyPlayer1.visible=!1,this.btnPlayer1.visible=!0,this.btnPlayer1.enable();var i=this.game.device.desktop?"ob_05_elinor_003_click":"ob_05_elinor_003_tap";this.game.twoPlayersOnboarding.playVOs([i],this.elinor),this.showArrow(this.btnPlayer1)}t.scale.set(0),this.game.add.tween(t.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),e&&(e.scale.set(0),this.game.add.tween(e.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100))},i.showArrow=function(t){this.arrow.visible=!0;var e=t.x-80,i=t.y-110;this.arrow.x=e-20,this.arrow.y=i-20,this.arrow.alpha=0,this.game.add.tween(this.arrow).to({alpha:1,x:e,y:i},300,null,!0)},i.handleBtnPlayer=function(){this.playerButtons.visible=!1,this.showIcons()},i.showIcons=function(){this.iconsGroup=this.game.make.group(),this.container.addChild(this.iconsGroup);var t=this.availableIcons.length,e=[[{dx:-115,dy:-115},{dx:115,dy:-115},{dx:0,dy:115}],[{dx:-115,dy:-115},{dx:115,dy:-115},{dx:-115,dy:115},{dx:115,dy:115}]][t-3],i=this.game.defaultWidth/2,s=this.game.defaultHeight/2;this.iconBtns=[];for(var a=0;a<t;a++){var n="btn_icon_"+this.availableIcons[a],o=new h.default({game:this.game,up:n,over:n,atlas:"ui_player_mode"});o.position.set(i+e[a].dx,s+e[a].dy),o.id=this.availableIcons[a],o.onInputDown.add(this.handleIconDown,this),this.iconsGroup.addChild(o),this.iconBtns.push(o);var r=this.game.make.image(-10,-20,"ui_player_mode","icon_"+this.availableIcons[a]);r.anchor.set(.5),o.addChild(r),o.scale.set(0),this.game.add.tween(o.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100*a)}this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_004"],this.elinor)},i.handleIconDown=function(t){if(this.twoPlayersModel.playerIcon1)this.twoPlayersModel.playerIcon2=t.id;else{this.twoPlayersModel.playerIcon1=t.id;var e=this.availableIcons.indexOf(t.id);this.availableIcons.splice(e,1)}for(var i=0;i<this.iconBtns.length;i++){var s=this.iconBtns[i];s.disable(),s===t?(s.scale.set(.7),this.game.add.tween(s.scale).to({x:1.1,y:1.1},300,Phaser.Easing.Back.Out,!0),this.starBurst=new l.default(this.game,90,120,1),this.starBurst.x=s.x,this.starBurst.y=s.y,this.iconsGroup.addChild(this.starBurst)):this.game.add.tween(s.scale).to({x:0,y:0},200,Phaser.Easing.Back.In,!0)}this.twoPlayersModel.playerIcon2?this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_009","ob_05_elinor_"+this.twoPlayersModel.playerIcon2],this.elinor):this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_006","ob_05_elinor_"+this.twoPlayersModel.playerIcon1],this.elinor),this.game.twoPlayersOnboarding.onEnd.addOnce(this.hideIcons,this)},i.hideIcons=function(){this.iconsGroup.destroy(),this.iconsGroup=null,this.iconBtns=null,this.showPlayerButtons()},i.loadLevel=function(){this.game.controller.twoPlayersModel=this.twoPlayersModel,this.game.controller.startState(u.STATE_LEVEL_TWO_PLAYERS,{levelData:this.levelData,seekerId:this.twoPlayersModel.getSeekingPlayerIcon()})},i.update=function(){},i.shutdown=function(){this.game.scale.onSizeChange.remove(this.handleResize,this),this.btnPlayer1.destroy(),this.btnPlayer2.destroy(),this.playerButtons.destroy(),this.container.destroy(),this.btnPlayer1=null,this.btnPlayer2=null,this.iconBtns=null,this.playerButtons=null,this.iconsGroup=null,this.elinor=null,this.container=null},e}(Phaser.State);e.default=g},VawD:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("XvIX"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("86MP")),o=a(i("01M/")),h=a(i("fY54")),r=i("zgbH"),l=i("5mNR"),d=a(i("Odga")),c=i("mQkb"),u=i("Y66D"),g=s(i("zgbH")),p=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){this.fontsReady=!1,this.loadComplete=!1,this.audioSprites=[],this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.game.load.pack("boot","assetpack.json",null,this),this.game.load.pack("load","characters/elinor/assetpack.json",null,this),o.default.load({custom:{families:[r.FONT_COPY,r.FONT_SUBTITLE,r.FONT_REGULAR,r.FONT_ITALIC,r.FONT_EXTRA_BOLD,r.FONT_BOLD,r.FONT_BOLD_ITALIC,r.FONT_LIGHT],urls:[this.game.urls.getFontsDirectory(r.FONT_CSS)]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)}),this.game.springRollScaleManagerPlugin=this.game.plugins.add(new c.ScaleManagerPlugin(this.game,this.game.plugins,{width:g.GAME_WIDTH_DEFAULT,height:g.GAME_HEIGHT_DEFAULT,safeWidth:g.GAME_SAFE_WIDTH,safeHeight:g.GAME_SAFE_HEIGHT})),this.game.springRollCaptionsPlugin=this.game.plugins.add(new u.CaptionsPlugin(this.game,this.game.plugins)),this.game.springRollCaptionsPlugin.setMute(!0),this.game.load.onFileStart.add(this.handleFileStart,this),Phaser.Loader.prototype.processPack=function(t){var e=t.data[t.key];if(e)for(var i=0;i<e.length;i++){var s=e[i];switch(s.type){case"image":this.image(s.key,s.url,s.overwrite);break;case"text":this.text(s.key,s.url,s.overwrite);break;case"json":this.json(s.key,s.url,s.overwrite);break;case"xml":this.xml(s.key,s.url,s.overwrite);break;case"script":this.script(s.key,s.url,s.callback,t.callbackContext||this);break;case"binary":this.binary(s.key,s.url,s.callback,t.callbackContext||this);break;case"spritesheet":this.spritesheet(s.key,s.url,s.frameWidth,s.frameHeight,s.frameMax,s.margin,s.spacing,s.skipFrames);break;case"video":this.video(s.key,s.urls);break;case"audio":this.audio(s.key,s.urls,s.autoDecode);break;case"audiosprite":this.audiosprite(s.key,s.urls,s.jsonURL,s.jsonData,s.autoDecode);break;case"tilemap":this.tilemap(s.key,s.url,s.data,Phaser.Tilemap[s.format]);break;case"physics":this.physics(s.key,s.url,s.data,Phaser.Loader[s.format]);break;case"bitmapFont":this.bitmapFont(s.key,s.textureURL,s.atlasURL,s.atlasData,s.xSpacing,s.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasXML":this.atlasXML(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlas":this.atlas(s.key,s.textureURL,s.atlasURL,s.atlasData,Phaser.Loader[s.format]);break;case"shader":this.shader(s.key,s.url,s.overwrite);break;case"spine":this.spine(s.key,s.url)}}},this.game.add.plugin(PhaserSpine.SpinePlugin,{triangleRendering:!0,debugRendering:!1})},i.handleFileStart=function(t,e,i){-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},i.fontsLoaded=function(){this.fontsReady=!0},i.create=function(){this.game.copy=new h.default(this.game,this.game.cache.getXML("copy_xml")),this.game.saves=new d.default({game:this}),this.game.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,this.loadComplete=!0;for(var t=0;t<this.audioSprites.length;t++)this.game.cache.checkSoundKey(this.audioSprites[t])&&this.game.sounds.addAudioSprite({id:this.audioSprites[t]})},i.update=function(){this.checkLoading()},i.checkLoading=function(){this.loadComplete&&this.fontsReady&&this.game.state.start(l.STATE_LOAD,!0,!1)},e}(Phaser.State);e.default=p},W5ee:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BUTTON_TERTIARY=e.BUTTON_SECONDRY=e.BUTTON_PRIMARY=void 0;var a=s(i("C9uT")),n=s(i("M1I4")),o=s(i("86MP")),h=i("zgbH"),r={up:{bg:16777215,font:5263440},over:{bg:5263440,font:16777215},down:{bg:5263440,font:16777215},disabled:{bg:16777215,font:5263440,alpha:.5}},l={up:{bg:5263440,font:16777215},over:{bg:16777215,font:5263440},down:{bg:16777215,font:5263440},disabled:{bg:5263440,font:16777215,alpha:.5}},d={up:{bg:13421772,font:5263440},over:{bg:5263440,font:13421772},down:{bg:5263440,font:13421772},disabled:{bg:13421772,font:5263440,alpha:.5}};e.BUTTON_PRIMARY="PRIMARY";e.BUTTON_SECONDRY="SECONDRY";e.BUTTON_TERTIARY="TERTIARY";var c=function(t){function e(e){var i,s=e.game,a=e.id,o=e.sfxID,h=e.ariaLabelID,c=e.label,u=e.icon,g=e.hierarchy,p=e.labelLeft,m=e.enabled,f=void 0===m||m,v=e.minWidth,y=void 0===v||v,b=e.minSizeNarrow,_=void 0===b?42:b,C=e.minSizeWide,k=void 0===C?70:C,w=e.maxSizeNarrow,P=void 0===w?76:w,S=e.maxSizeWide,E=void 0===S?128:S;switch((i=t.call(this,s)||this).id=a,i.sfxID=o,i.ariaLabelID=h,i.btnEnabled=!0,i.disabled=!1,i.minSizeNarrow=_,i.minSizeWide=k,i.maxSizeNarrow=P,i.maxSizeWide=E,i.buttonStates=l,g){case"PRIMARY":i.buttonStates=l;break;case"SECONDRY":i.buttonStates=r;break;case"TERTIARY":i.buttonStates=d}return i.costume=i.createCostume({icon:u,label:c,labelLeft:p,minWidth:y}),i.addChild(i.costume),i.isOver=!1,i.isMute=!1,i.onInputDown=new Phaser.Signal,i.game.scale.onSizeChange.add(i.manageSize,(0,n.default)(i)),i.manageSize(),i.bindedHandlePausedMouseMove=i.handlePausedMouseMove.bind((0,n.default)(i)),i.game.onPause.add(i.handleGamePaused,(0,n.default)(i)),i.game.onResume.add(i.handleGameResumed,(0,n.default)(i)),i.isOver=!1,f&&i.enable(),i.game.paused&&i.handleGamePaused(),i.manageSize(),i.updateIconGraphic(),i}(0,o.default)(e,t);var i=e.prototype;return i.createCostume=function(t){var e=t.icon,i=t.label,s=t.labelLeft,a=t.minWidth,n=this.game.make.group();n.contentDisplay=this.createContentDisplay(e,i,s),n.contentDisplay.anchor.set(.5),n.addChild(n.contentDisplay);var o=0;o=i?Math.max(a?255:0,n.contentDisplay.width+25):86;var h=this.createContentPanelTexture(o,86,24);return n.shadow=this.game.make.image(0,5,h),n.shadow.tint="0x000000",n.shadow.alpha=.15,n.panel=this.game.make.image(0,0,h),n.panel.tint=this.buttonStates.up.bg,n.addChildAt(n.panel,0),n.addChildAt(n.shadow,0),n.contentDisplay.x=.5*n.panel.width,n.contentDisplay.y=.5*n.panel.height,n},i.createContentPanelTexture=function(t,e,i){var s="BtnDefaultPanel"+t+e+i;if(!this.game.cache.checkRenderTextureKey(s)){var a=this.game.make.graphics();a.beginFill(16777215),a.drawRoundedRect(0,0,t,e,i),this.game.cache.addRenderTexture(s,a.generateTexture()),a.destroy()}return this.game.cache.getRenderTexture(s).texture},i.createContentDisplay=function(t,e,i){if(e){var s="BtnDefaultContent"+t+e+(i?1:0);if(!this.game.cache.checkRenderTextureKey(s)){var a,n,o=this.game.make.group();e&&(a=this.game.make.text(0,0,this.game.copy.getCopy(e),{font:"30px "+h.FONT_BOLD,fill:"#ffffff"}),o.add(a)),t&&((n=this.game.make.image(0,0,"uiicons",t)).scale.set(.6),o.add(n)),n&&!i?a.x=n.x+n.width+5:n&&(n.x=a.x+a.width+5),n&&(a.y=n?.5*n.height-.46*a.height:0),this.game.cache.addRenderTexture(s,o.generateTexture()),o.destroy()}return this.game.make.image(0,0,this.game.cache.getRenderTexture(s).texture)}return this.game.make.image(0,0,"uiicons",t)},i.init=function(){if(this.game){var t=this.game.input.activePointer.x,e=this.game.input.activePointer.y;this.isWithinBounds(t,e)}this.btnEnabled&&this.enable()},i.setMute=function(t){void 0===t&&(t=!1),this.isMute=t},i.enable=function(){this.btnEnabled=!0,this.inputEnabled=!0,this.input.useHandCursor=!0,this.events.onInputDown.add(this.inputDown,this),this.events.onInputOver.add(this.onOver,this),this.events.onInputOut.add(this.onOut,this),this.updateIconGraphic()},i.disable=function(){this.btnEnabled=!1,this.isOver=!1,this.input.useHandCursor=!1,this.events.onInputDown.removeAll(),this.events.onInputOver.removeAll(),this.events.onInputOut.removeAll(),this.inputEnabled=!1,this.updateIconGraphic()},i.handleGamePaused=function(){this.game.canvas.addEventListener("mousemove",this.bindedHandlePausedMouseMove),this.game.input.onDown.add(this.handlePausedMouseDown,this)},i.handleGameResumed=function(){this.game.canvas.removeEventListener("mousemove",this.bindedHandlePausedMouseMove),this.game.input.onDown.remove(this.handlePausedMouseDown,this)},i.handlePausedMouseMove=function(t,e,i){if(this.btnEnabled){var s=this.isWithinBounds(e||this.game.input.mousePointer.x,i||this.game.input.mousePointer.y);s&&!1===this.isOver?(this.game.canvas.style.cursor="pointer",this.onOver()):!1===s&&!0===this.isOver&&(this.isOver=!1,this.game.canvas.style.cursor="default",this.updateIconGraphic()),this.isOver=s}},i.handlePausedMouseDown=function(t){this.handlePausedMouseMove(t,t.x,t.y),this.isOver&&this.btnEnabled&&this.onDown()},i.onOut=function(){this.isOver=!1,this.updateIconGraphic()},i.onOver=function(){this.isOver=!0,this.updateIconGraphic()},i.inputDown=function(){this.game.paused||this.onDown()},i.onDown=function(){this.btnEnabled&&(this.isMute||this.game.sounds.playSFX("click",{volume:.5}),this.isOver=!0,this.updateIconGraphic(),this.onInputDown.dispatch(this))},i.updateIconGraphic=function(){!this.btnEnabled||this.disabled?(this.costume.panel.tint=this.buttonStates.disabled.bg,this.costume.contentDisplay.tint=this.buttonStates.disabled.font,this.costume.alpha=this.buttonStates.disabled.alpha||1):(this.costume.panel.tint=this.isOver?this.buttonStates.over.bg:this.buttonStates.up.bg,this.costume.contentDisplay.tint=this.isOver?this.buttonStates.over.font:this.buttonStates.up.font,this.costume.alpha=1)},i.manageSize=function(){},i.isWithinBounds=function(t,e){if(this.btnEnabled){var i=this.getBounds();return this.hitArea&&(i.width=this.hitArea.width,i.height=this.hitArea.height),i.contains(t,e)}return!1},i.destroy=function(e){void 0===e&&(e=!0),this.onInputDown.removeAll(),this.events.onInputOver.remove(this.onOver,this),this.game&&(this.game.onPause.remove(this.handleGamePaused,this),this.game.onResume.remove(this.handleGameResumed,this),this.game.input.onDown.remove(this.handlePausedMouseDown,this),this.game.scale.onSizeChange.remove(this.manageSize,this),this.game.canvas&&this.game.canvas.removeEventListener("mousemove",this.bindedHandlePausedMouseMove),this.disable()),this.costume.destroy(!0),this.onInputDown=null,this.shadow=null,this.panel=null,t.prototype.destroy.call(this,e)},(0,a.default)(e,[{key:"width",get:function(){return this.costume.panel.width*this.costume.scale.x}},{key:"height",get:function(){return this.costume.panel.height*this.costume.scale.y}}]),e}(Phaser.Sprite);e.default=c},WtpM:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("3huV")),o=s(i("dD3M")),h=s(i("9i5X")),r=s(i("JIfh")),l=i("6YV8"),d=i("zgbH"),c=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.endOfLevel;this.endOfLevel=e},i.preload=function(){},i.create=function(){this.container=new n.default(this.game,{title:""}),this.bg=this.game.make.image(0,0,"bg_welcome"),this.container.addChild(this.bg),this.logo=this.game.make.image(this.game.defaultWidth/2,145,"logo_game"),this.logo.anchor.set(.5),this.container.addChild(this.logo),this.btnStart=new o.default({game:this.game,up:"btn_play",over:"btn_play"}),this.btnStart.position.set(.5*this.game.defaultWidth,385),this.btnStart.onInputDown.add(this.handleBtnStart,this),this.container.addChild(this.btnStart),this.endOfLevel&&(this.endOfLevel=!1,this.showOverlayLocation()),this.game.sounds.setBackgroundMusic("music_title",!0),this.game.sounds.playBackgroundMusic();var t=this.game.cache.getJSON("vo_ui_captions");this.game.springRollCaptionsPlugin.setData(t);this.playVO("ui_01_elinor_001")},i.playVO=function(t){this.game.springRollCaptionsPlugin.playCaption(t),this.snd=this.game.sounds.playVO(t,{spriteID:"vo_ui"})},i.handleBtnStart=function(){this.btnStart.onInputDown.remove(this.handleBtnStart,this),this.btnStart.visible=!1,this.game.sounds.checkAudioContext(),this.snd&&(this.game.springRollCaptionsPlugin.stopCaption(),this.snd.stop()),this.timeEvent&&(this.game.time.events.remove(this.timeEvent),this.timeEvent=null),this.showOverlayPlayerMode(!0)},i.showOverlayPlayerMode=function(t){this.overlayPlayer=new h.default(this.game,t),this.overlayPlayer.onSelect.addOnce(this.handleSelectPlayerMode,this),this.overlayPlayer.onBack.addOnce(this.handleBackToHome,this),this.container.addChild(this.overlayPlayer),this.playVO("ui_01_elinor_004")},i.handleSelectPlayerMode=function(t){this.overlayPlayer.destroy(),this.overlayPlayer=null,this.game.controller.playerMode=t,t===d.PLAYER_SINGLE?(0,l.getGA)().setLabel(d.GA_LABEL_PLAYER_1):(0,l.getGA)().setLabel(d.GA_LABEL_PLAYER_2),this.game.controller.player.unlockedLocations>1?this.showOverlayLocation():this.handleSelectLocation(0)},i.handleBackToHome=function(){this.container.removeChild(this.overlayPlayer),this.overlayPlayer.destroy(),this.overlayPlayer=null,this.btnStart.onInputDown.add(this.handleBtnStart,this),this.btnStart.visible=!0},i.showOverlayLocation=function(){this.overlayLocation=new r.default(this.game),this.overlayLocation.onSelect.addOnce(this.handleSelectLocation,this),this.overlayLocation.onBack.addOnce(this.handleBackToSelectPlayerMode,this),this.container.addChild(this.overlayLocation)},i.handleSelectLocation=function(t){this.overlayLocation&&(this.overlayLocation.destroy(),this.overlayLocation=null),this.game.controller.setLocation(t),(0,l.getGA)().track({action:"GameStart"}),this.game.controller.startGame()},i.handleBackToSelectPlayerMode=function(){this.overlayLocation.destroy(),this.overlayLocation=null,this.showOverlayPlayerMode(!1)},i.shutdown=function(){this.game.sounds.stopBackgroundMusic(),this.game.sounds.clearBackgroundMusic(),this.container.destroy(!0),this.container=null},e}(Phaser.State);e.default=c},XpLG:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s){var n;return void 0===s&&(s=!0),(n=t.call(this,e)||this).stars=i,n.popup=n.game.make.image(0,0,"ui_various","star_popup"),n.popup.anchor.set(.5,1),n.addChild(n.popup),n.popup.scale.set(0),n.game.add.tween(n.popup.scale).to({x:1,y:1},300,Phaser.Easing.Quadratic.Out,!0).onComplete.add(n.showStars,(0,a.default)(n)),s&&n.game.time.events.add(1500,n.hide,(0,a.default)(n)),n}(0,n.default)(e,t);var i=e.prototype;return i.showStars=function(){for(var t=[{x:-59,y:-65},{x:1,y:-74},{x:59,y:-65}],e=0;e<this.stars;e++){var i=t[e].x,s=t[e].y,a=this.game.make.image(i,s,"ui_various","star_"+(e+1));a.anchor.set(.5),a.scale.set(0),this.addChild(a),this.game.add.tween(a.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0,100*e)}},i.hide=function(){this.game.add.tween(this.scale).to({x:0,y:0},300,Phaser.Easing.Back.In,!0).onComplete.add(this.destroy,this)},i.destroy=function(){this.popup=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=o},ZThm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.x,o=void 0===n?0:n,h=e.y,r=void 0===h?0:h,l=e.dy,d=void 0===l?0:l,c=e.voId,u=e.bg,g=e.mask,p=e.key,m=e.atlas,f=void 0===m?"ui_buttons":m;return(i=t.call(this,s,o,r,f)||this).frameName=u,i.anchor.set(.5),i.voId=c,i.image=i.game.make.image(0,0,f,p),i.image.anchor.set(.5),i.image.x=i.image.width/2,i.image.y=i.image.height/2,i.imageMask=i.game.make.image(0,0,f,g),i.bmd=i.game.make.bitmapData(i.image.width,i.image.height),i.bmd.alphaMask(i.image,i.imageMask),i.icon=i.game.make.image(0,d,i.bmd),i.icon.anchor.set(.5),i.addChild(i.icon),i.data={},i.isOver=!1,i.input.useHandCursor=!0,i.game.time.events.add(1,i.init,(0,a.default)(i)),i.onInputDown.add(i.onDown,(0,a.default)(i)),i.onInputOver.add(i.onOver,(0,a.default)(i)),i.onInputOut.add(i.onOut,(0,a.default)(i)),i}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){if(this.game){var t=this.game.input.activePointer.x,e=this.game.input.activePointer.y;this.isWithinBounds(t,e)}this.enable()},i.enable=function(){this.input.enabled=!0},i.disable=function(){this.input.enabled=!1},i.isWithinBounds=function(t,e){return this.getBounds().contains(t,e)},i.onOver=function(){this.isOver=!0,this.game.add.tween(this.image.scale).to({x:1.2,y:1.2},200,null,!0).onUpdateCallback(this.updateMask,this)},i.onOut=function(){this.isOver=!1,this.game.add.tween(this.image.scale).to({x:1,y:1},200,null,!0).onUpdateCallback(this.updateMask,this)},i.updateMask=function(t,e,i){this.bmd.alphaMask(this.image,this.imageMask)},i.onDown=function(){this.onInputDown.remove(this.onDown,this),this.onInputOver.remove(this.onOver,this),this.onInputOut.remove(this.onOut,this),this.onOver(),this.game.sounds.playSFX("click",{spriteID:"sfx_gameplay"}),this.game.sounds.playVO(this.voId,{spriteID:"vo_ui",delay:200}),this.game.springRollCaptionsPlugin.playCaption(this.voId)},i.destroy=function(){this.onInputDown.removeAll(),this.onInputOver.removeAll(),this.onInputOut.removeAll(),this.disable(),t.prototype.destroy.call(this)},e}(Phaser.Button);e.default=o},ZoOD:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("EapQ")),h=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).characterId=i,s.isGoingUp=!1,s.createContent(),s.startX=0,s.startY=0,s.isDown=!1,s.charHide.inputEnabled=!0,s.charHide.input.useHandCursor=!0,s.charHide.events.onInputDown.add(s.handleInputDown,(0,a.default)(s)),s.charHide.events.onInputUp.add(s.handleInputUp,(0,a.default)(s)),s.charHide.events.onInputOver.add(s.handleInputOver,(0,a.default)(s)),s.charHide.events.onInputOut.add(s.handleInputOut,(0,a.default)(s)),s.setStateInitial(),s}(0,n.default)(e,t);var i=e.prototype;return i.createContent=function(){this.empty=this.game.make.image(0,0,"ui_character_icons","empty_hide"),this.empty.anchor.set(.5),this.charHide=this.game.make.image(0,0,"ui_character_icons",this.characterId+"_hide"),this.charHide.anchor.set(.5),this.charHidden=this.game.make.image(0,0,"ui_character_icons",this.characterId+"_hidden"),this.charHidden.anchor.set(.5),this.charFound=this.game.make.image(0,0,"ui_character_icons",this.characterId+"_found"),this.charFound.anchor.set(.5),this.arrow=this.game.make.sprite(0,45,"ui_character_icons","arrow_hide_01"),this.arrow.anchor.set(.5,0);var t=Phaser.Animation.generateFrameNames("arrow_hide_",1,4,"",2);this.arrow.animations.add("loop",t,4,!0,!1),this.arrow.play("loop"),this.addChild(this.empty),this.addChild(this.charHide),this.addChild(this.charHidden),this.addChild(this.charFound),this.addChild(this.arrow),this.empty.visible=!1,this.charHidden.visible=!1,this.charFound.visible=!1},i.setStateInitial=function(){this.charHide.input.enabled=!0,this.charHide.visible=!0,this.empty.visible=!1,this.charHidden.visible=!1,this.charFound.visible=!1,this.arrow.alpha=1,this.scale.set(1)},i.setStateDrag=function(){this.charHide.input.enabled=!1,this.charHide.visible=!1,this.empty.visible=!0,this.charHidden.visible=!1,this.charFound.visible=!1,this.arrow.alpha=0},i.setStateHidden=function(){this.charHide.input.enabled=!1,this.charHide.visible=!1,this.empty.visible=!1,this.charHidden.visible=!0,this.charFound.visible=!1,this.arrow.alpha=0,this.scale.set(1)},i.setArrowVisibility=function(t){this.arrow.visible=t},i.setArrowsAnim=function(t){this.arrow.animations.paused=!t},i.setStateClue=function(){},i.setStateResult=function(){this.setStateHidden(),this.charHidden.inputEnabled=!0,this.charHidden.input.useHandCursor=!0,this.charHidden.events.onInputDown.add(this.handleInputDownResult,this),this.onTap=new Phaser.Signal},i.lockResult=function(){this.charHidden.input.enabled=!1},i.unlockResult=function(){this.charHidden.input.enabled=!0},i.lock=function(){this.charHide.input.enabled=!1},i.unlock=function(){this.charHide.input.enabled=!0},i.handleInputOver=function(){this.scale.set(1.1)},i.handleInputOut=function(){this.scale.set(1)},i.handleInputDown=function(t,e){this.pointer=e,this.isDown=!0,this.startX=e.x,this.startY=e.y,this.game.state.getCurrentState().removeCurrentDragCharacter()},i.handleInputUp=function(){this.isDown&&this.pickUp()},i.pickUp=function(){this.game.sounds.playSFX("remove",{spriteID:"sfx_gameplay",volume:.8}),this.game.state.getCurrentState().startDragCharacter(this.characterId,this,null,-1,this.worldPosition.x,this.worldPosition.y,this.pointer),this.isDown=!1,this.pointer=null},i.handleInputDownResult=function(){this.onTap.dispatch(this)},i.revealCharacter=function(){this.stopPulse(),this.charHide.visible=!1,this.empty.visible=!1,this.charHidden.visible=!1,this.charFound.visible=!0,this.game.add.tween(this.scale).to({x:[1.2,1],y:[1.2,1]},400,Phaser.Easing.BackOut,!0).onComplete.add(this.goUp,this),this.starBurst=new o.default(this.game),this.addChild(this.starBurst)},i.goUp=function(){this.game.add.tween(this).to({y:-200},300,Phaser.Easing.Back.In,!0,200),this.isGoingUp=!0},i.enlarge=function(){this.stopPulse(),this.game.add.tween(this.scale).to({x:1.2,y:1.2},200,Phaser.Easing.BackOut,!0)},i.normalize=function(){this.stopPulse(),this.game.add.tween(this.scale).to({x:1,y:1},200,Phaser.Easing.BackOut,!0)},i.pulse=function(t){this.pulseTween=this.game.add.tween(this.scale).to({x:[1.2,1],y:[1.2,1]},800,Phaser.Easing.BackOut,!0,0,t)},i.stopPulse=function(){this.pulseTween&&(this.pulseTween.stop(),this.pulseTween=!1)},i.update=function(){if(this.x===this.destX||this.isGoingUp||(this.x+=.2*(this.destX-this.x)),this.isDown){var e=Math.abs(this.pointer.x-this.startX),i=Math.abs(this.pointer.y-this.startY);Math.sqrt(e*e+i*i)>20&&this.pickUp()}t.prototype.update.call(this)},i.destroy=function(){this.stopPulse(),this.empty.destroy(),this.charHide.destroy(),this.charHidden=null,this.charFound=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},as36:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s,n){var o;return(o=t.call(this,e)||this).onEnd=new Phaser.Signal,o.bg=o.game.make.image(0,0,"bg_location_"+o.game.controller.location),o.addChild(o.bg),o.icon=i,o.icon.x=o.game.defaultWidth/2,o.icon.y=165,o.icon.scale.set(1),o.addChild(o.icon),o.characterIcons=n,o.iconsY=o.characterIcons.y,o.characterIcons.x=o.game.defaultWidth/2,o.characterIcons.y=425,o.characterIcons.scale.set(1.5),o.characterIcons.setArrowsVisibility(!1),o.addChild(o.characterIcons),1===s?o.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_015"]):o.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_026"]),o.game.twoPlayersOnboarding.onEnd.addOnce(o.transitionOut,(0,a.default)(o)),o}(0,n.default)(e,t);var i=e.prototype;return i.transitionOut=function(){this.game.add.tween(this.bg).to({alpha:0},500,null,!0);var t=(this.game.defaultWidth-this.game.width)/2+25;this.game.add.tween(this.icon).to({x:t,y:640},700,null,!0),this.game.add.tween(this.icon.scale).to({x:.8,y:.8},700,null,!0),this.icon.animateToHudMode(700),this.game.add.tween(this.characterIcons.scale).to({x:1,y:1},700,null,!0),this.game.add.tween(this.characterIcons).to({y:this.iconsY},700,null,!0).onComplete.add(this.handelAnimEnd,this)},i.handelAnimEnd=function(){this.characterIcons.setArrowsVisibility(!0),this.onEnd.dispatch()},e}(Phaser.Group);e.default=o},bpkO:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("voi6")),h=function(t){function e(e,i,s){var n;return void 0===s&&(s=0),(n=t.call(this,e)||this).onClose=new Phaser.Signal,n.bg=n.game.make.image(0,0,"bg_location_"+n.game.controller.location),n.addChild(n.bg),n.bg.inputEnabled=!0,n.elinor=new o.default(n.game),n.elinor.x=.5*n.game.defaultWidth,n.elinor.y=n.game.defaultHeight,n.elinor.setScale(2),n.elinor.idle(),n.addChild(n.elinor),n.textInd=-1,n.textIds=i,n.cptData=n.game.cache.getJSON("vo_ui_captions"),n.game.springRollCaptionsPlugin.setData(n.cptData),n.game.time.events.add(s,n.playText,(0,a.default)(n)),n}(0,n.default)(e,t);var i=e.prototype;return i.playText=function(){if(this.textInd++,this.textInd<this.textIds.length){var t=this.textIds[this.textInd],e=this.cptData[t],i=e[e.length-1].end;this.game.springRollCaptionsPlugin.playCaption(t),this.game.sounds.playVO(t,{spriteID:"vo_ui"}),this.elinor.talk(),this.game.time.events.add(i,this.playText,this)}else this.elinor.idle(),this.game.time.events.add(1e3,this.handleInputDown,this)},i.handleInputDown=function(){this.onClose.dispatch()},i.destroy=function(){this.elinor.destroy(),this.elinor=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},cE2L:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e,i,s){var n;(n=t.call(this,e)||this).x=i,n.y=s,n.blingRight=n.game.make.image(50,0,"ui_various","blings"),n.blingRight.anchor.set(0,.5),n.addChild(n.blingRight),n.blingLeft=n.game.make.image(-50,0,"ui_various","blings"),n.blingLeft.anchor.set(0,.5),n.addChild(n.blingLeft);return n.animate(800),n.game.time.events.add(800,n.animate,(0,a.default)(n),800),n.game.time.events.add(1600,n.destroy,(0,a.default)(n)),n}(0,n.default)(e,t);var i=e.prototype;return i.animate=function(t){this.blingRight.scale.set(.5),this.blingRight.alpha=0,this.blingLeft.scale.set(-.5,.5),this.blingLeft.alpha=0,this.game.add.tween(this.blingRight).to({x:100},t,null,!0),this.game.add.tween(this.blingRight).to({alpha:1},100,null,!0),this.game.add.tween(this.blingRight).to({alpha:0},100,null,!0,t-100),this.game.add.tween(this.blingRight.scale).to({x:1.5,y:1.5},t,null,!0),this.game.add.tween(this.blingLeft).to({x:-100},t,null,!0),this.game.add.tween(this.blingLeft).to({alpha:1},100,null,!0),this.game.add.tween(this.blingLeft).to({alpha:0},100,null,!0,t-100),this.game.add.tween(this.blingLeft.scale).to({x:-1.5,y:1.5},t,null,!0)},i.destroy=function(){this.blingLeft.destroy(),this.blingRight.destroy(),this.blingLeft=null,this.blingRight=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=o},cjcH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLS=function(){return new n};var s=i("TEuq"),a=null,n=function(){function t(){return a||(a=this,this.useSpringroll=!1,this.onRead=new Phaser.Signal,a)}var e=t.prototype;return e.isSupported=function(){return"undefined"!=typeof Storage},e.parseData=function(t){try{return JSON.parse(t)}catch(t){}},e.handleLoadSuccess=function(t){if(this.useSpringroll=!0,this.data=t,!this.data){var e=window.localStorage.getItem("pbs_hideseek");e?(this.data=this.parseData(e),s.UserData.write("pbs_hideseek",this.data).then((function(){}))):this.data={}}this.onRead.dispatch()},e.handleLoadFail=function(t){var e=window.localStorage.getItem("pbs_hideseek");this.data=this.parseData(e)||{},this.onRead.dispatch()},e.loadData=function(){s.UserData.read("pbs_hideseek").then(this.handleLoadSuccess.bind(this),this.handleLoadFail.bind(this))},e.setGameData=function(t,e){if(this.data[t]=e,this.useSpringroll)s.UserData.write("pbs_hideseek",this.data).then((function(){}));else try{window.localStorage.setItem("pbs_hideseek",JSON.stringify(this.data))}catch(t){}},e.getGameData=function(){return this.data},e.destroy=function(){a=null},t}()},dD3M:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,n=e.x,o=void 0===n?0:n,h=e.y,r=void 0===h?0:h,l=e.up,d=e.over,c=e.atlas,u=void 0===c?"ui_buttons":c;return(i=t.call(this,s,o,r,u)||this).setFrames(d,l,l,l),i.anchor.set(.5),i.data={},i.out=l,i.over=d,i.isOver=!1,i.input.useHandCursor=!0,i.game.time.events.add(1,i.init,(0,a.default)(i)),i.onInputDown.add(i.onDown,(0,a.default)(i)),i.onInputOver.add(i.onOver,(0,a.default)(i)),i.onInputOut.add(i.onOut,(0,a.default)(i)),i}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){if(this.game){var t=this.game.input.activePointer.x,e=this.game.input.activePointer.y;this.isWithinBounds(t,e)}this.enable()},i.enable=function(){this.input.enabled=!0},i.disable=function(){this.input.enabled=!1},i.isWithinBounds=function(t,e){return this.getBounds().contains(t,e)},i.onOver=function(){this.isOver=!0,this.scale.set(1.1)},i.onOut=function(){this.isOver=!1,this.scale.set(1)},i.onDown=function(){this.scale.set(1.15),this.game.sounds.playSFX("click",{spriteID:"sfx_gameplay"})},i.pulse=function(t){this.pulseTween=this.game.add.tween(this.scale).to({x:[1.2,1],y:[1.2,1]},800,Phaser.Easing.BackOut,!0,0,t)},i.stopPulse=function(){this.pulseTween&&(this.pulseTween.stop(),this.pulseTween=!1)},i.destroy=function(){this.onInputDown.removeAll(),this.onInputOver.removeAll(),this.onInputOut.removeAll(),this.disable(),t.prototype.destroy.call(this)},e}(Phaser.Button);e.default=o},dMJc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t,e){this.game=t,this.scene=e,this.target=null,this.isPanning=!1,this.onPosition=new Phaser.Signal,this.onScroll=new Phaser.Signal}var e=t.prototype;return e.setTarget=function(t){this.target=t},e.step=function(t){if(this.isPanning){if(this.currentX!==this.destX){var e=this.destX-this.currentX,i=e<0?-1:1;e=Math.min(150,Math.abs(e))*i,this.currentX+=e*t*5,this.setCamera(),Math.abs(this.destX-this.currentX)<1&&(this.currentX=this.destX,this.isPanning=!1,this.onPosition.dispatch())}}else if(this.target&&(this.destX=this.target.getDestX()),this.scene.sceneWidth<2e3&&(this.setPosition(872),this.onPosition.dispatch()),this.currentX!==this.destX){var s=this.destX-this.currentX,a=s<0?-1:1;s=Math.min(150,Math.abs(s))*a,this.currentX+=s*t*5,this.setCamera(),this.onScroll.dispatch(),Math.abs(this.destX-this.currentX)<1&&(this.currentX=this.destX,this.onPosition.dispatch())}},e.setPosition=function(t){this.destX=this.currentX=t,this.setCamera()},e.setCamera=function(){this.scene.x=.5*this.game.width-this.currentX,this.checkBorders()},e.checkBorders=function(){this.scene.x>0&&(this.scene.x=0,this.currentX=.5*this.game.width,this.destX=this.currentX);var t=this.scene.sceneWidth;this.scene.x+t<this.game.width&&(this.scene.x=this.game.width-t,this.currentX=.5*this.game.width-this.scene.x,this.destX=this.currentX)},e.pan=function(t){this.destX=t,this.isPanning=!0},t}();e.default=s},drmM:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=i("hDA+"),o=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.levelData,i=t.seekerId;this.levelData=e,this.seekerId=i,this.locationData=this.game.cache.getJSON("location_data"),this.cptData=this.game.cache.getJSON(i+"_captions"),this.cptData=(0,n.processCaptions)(this.game,this.cptData,i+"_vo-audioatlas"),this.game.springRollCaptionsPlugin.setData(this.cptData),this.game.scale.onSizeChange.add(this.handleResize,this),this.game.sounds.playSFX("loop",{loop:!0,spriteID:"sfx_location"})},i.handleResize=function(){},i.calculateNavPoints=function(){var t=.5*this.game.width,e=this.levelData.sceneWidth-.5*this.game.width,i=e-t;if(this.navPoints=[],i<this.game.width)this.navPoints.push(t),this.navPoints.push(e);else for(var s=Math.round(i/this.game.width)+1,a=i/s,n=0;n<s+1;n++)this.navPoints[n]=t+a*n},i.setCurrentNavPoint=function(){var t=this.camera.currentX,e=.5*this.game.width,i=this.levelData.sceneWidth-.5*this.game.width;if(t<e)this.navPointId=0;else if(t>i)this.navPointId=this.navPoints.length-1;else for(var s=this.navPoints[1]-this.navPoints[0],a=0;a<this.navPoints.length;a++){if(Math.abs(this.navPoints[a]-t)<.5*s){this.navPointId=a;break}}},i.shutdown=function(){this.game.scale.onSizeChange.remove(this.handleResize,this),this.game.sounds.stopAudioSprite("loop",{spriteID:"sfx_location"})},e}(Phaser.State);e.default=o},duvY:function(t,e,i){"use strict";i("qnda"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t){this.data=t}var e=t.prototype;return e.getScene=function(t){return this.data.cutscenes.find((function(e){return e.id===t}))},e.getCaptions=function(t){return this.getScene(t).captions},t}();e.default=s},fY54:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("fKPv")),n=i("zgbH");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(i,!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var r=function(){function t(t,e,i){this.copy={},this.game=t,this.levelDialogue=i;for(var s=e.getElementsByTagName("item"),a=0;a<s.length;a++)this.copy[s[a].getAttribute("id")]=s[a].childNodes[0].nodeValue}var e=t.prototype;return e.setElinorCopy=function(t){var e=t.getElementsByTagName("item");this.elinorCopy={};for(var i=0;i<e.length;i++)this.elinorCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.setSceneCopy=function(t){var e=t.getElementsByTagName("item");this.sceneCopy={};for(var i=0;i<e.length;i++)this.sceneCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.getElinorCopy=function(t,e){return e&&this.elinorCopy[t+"_device"]?this.elinorCopy[t+"_device"]:this.elinorCopy[t]||""},e.getSceneCopy=function(t,e){return e&&this.sceneCopy[t+"_device"]?this.sceneCopy[t+"_device"]:this.sceneCopy[t]||""},e.getCopy=function(t,e){return e&&this.copy[t+"_device"]?this.copy[t+"_device"]:this.copy[t]||"copy not found [ "+t+" ]"},e.getCopyNoDefault=function(t){return this.copy[t]||null},e.getFontFamily=function(t,e){return t?e+"px "+n.FONT_TITLE:e+"px "+n.FONT_COPY},e.createFontStyle=function(t,e,i,s){return void 0===s&&(s={}),h({font:this.getFontFamily(t,e),fill:i,boundsAlignH:s.boundsAlignH||"center",boundsAlignV:s.boundsAlignV||"middle"},s)},e.createSubtitleFontStyle=function(t,e,i){return void 0===i&&(i={}),h({font:t+"px "+n.FONT_SUBTITLE,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.createSetUpFontStyle=function(t,e,i){return void 0===i&&(i={}),h({font:t+"px "+n.FONT_ITALIC,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.getLevelDialogue=function(t){return this.levelDialogue[t]},e.getGameDialogue=function(t){return this.game.cache.getJSON("dialogue_"+t)},e.getGameIntroDialogue=function(t){var e=this.getGameDialogue(t);return!!e&&e.intro},e.getGameOutroDialogue=function(t,e){var i=this.getGameDialogue(t);return i&&i.outro[e]||!1},e.getCharacterName=function(t){return this.getCopy(t)},e.getHowToPlayCopy=function(){for(var t=0,e=[];t<1;){var i=this.copy["howtoplay_"+(t+1)+"_title"],s=this.copy["howtoplay_"+(t+1)+"_copy"];e.push({title:i,copy:s}),t++}return e},t}();e.default=r},fZdh:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("g1bE")),o=function(t){function e(e){var i;return(i=t.call(this,e)||this).data=i.game.controller.gameData.clothes,i.rail=i.game.make.image(0,0,"ui_dress_up","rail"),i.rail.anchor.set(.5,0),i.rail.scale.x=2,i.addChild(i.rail),i.createItems(),i}(0,a.default)(e,t);var i=e.prototype;return i.createItems=function(){this.clothes=[];for(var t=0,e=0;e<this.data.length;e++){var i=this.data[e];if(i.wearable){var s=new n.default(this.game,i,this);s.y=-10,s.x=130*t,this.clothes[i.id]=s,this.addChild(s),t++}}for(var a=this.clothes.length,o=.5*-(a-1)*130,h=0;h<a;h++){this.clothes[h].x=o+130*h}},i.init=function(t,e){this.reset(),t>-1&&this.clothes[t].showCharacterCloth(e)},i.reset=function(){for(var t=this.clothes.length,e=0;e<t;e++)this.clothes[e].resetOutfit()},i.pulseItems=function(){this.pulseEnabled=!0,this.pulseInd=0,this.clothes[this.pulseInd].pulse(),this.game.time.events.add(600,this.pulseNextItem,this)},i.pulseNextItem=function(){this.pulseEnabled&&(this.pulseInd=(this.pulseInd+1)%this.clothes.length,this.clothes[this.pulseInd].pulse(),this.game.time.events.add(600,this.pulseNextItem,this))},i.stopPulseItems=function(){this.pulseEnabled=!1,this.clothes[this.pulseInd].stopPulse()},e}(Phaser.Group);e.default=o},figK:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("2yko")),h=function(t){function e(e,i,s){var n;return(n=t.call(this,e)||this).bg=n.game.make.image(0,0,"bg_location_"+n.game.controller.location),n.addChild(n.bg),n.game.controller.isFirstLevel()?(s=!0,n.sceneData=n.game.controller.cutscenes.getScene("cutscene_01")):n.sceneData=n.game.controller.cutscenes.getScene("cutscene_counting_"+i),n.onCountEnd=new Phaser.Signal,n.cutscene=new o.default(n.game,n.sceneData.id),n.addChild(n.cutscene),n.cutscene.x=n.game.defaultWidth/2,n.cutscene.y=n.game.defaultHeight/2,n.game.controller.isFirstLevel()||n.cutscene.setAudioId(i),n.cutscene.onAnimComplete.addOnce(n.handleAnimComplete,(0,a.default)(n)),s||n.cutscene.playAnim(n.cutscene.data.anims[1]),n.bg.inputEnabled=!0,n}(0,n.default)(e,t);var i=e.prototype;return i.handleAnimComplete=function(){this.onCountEnd.dispatch()},i.setIcon=function(){this.cutscene.destroy(),this.cutscene=null,this.game.add.tween(this.bg).to({alpha:0},300,null,!0).onComplete.add(this.removeBackground,this)},i.removeBackground=function(){this.bg.destroy(),this.bg=null},i.positionElements=function(){this.icon&&(this.icon.x=(this.game.defaultWidth-this.game.width)/2+360,this.icon.y=40)},i.destroy=function(){this.removeChild(this.bg),this.removeChild(this.cutscene),this.cutscene&&(this.cutscene.destroy(),this.cutscene=null),t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},g1bE:function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e,i,s){var n;return(n=t.call(this,e)||this).data=i,n.listRef=s,n.charData=null,n.hanger=n.game.make.image(0,0,"ui_dress_up","hanger"),n.hanger.anchor.set(.5,0),n.addChild(n.hanger),n.startX=0,n.startY=0,n.isDown=!1,n.btn=n.game.make.button(0,30,"ui_dress_up"),n.btn.frameName=n.data.image_key,n.btn.anchor.set(.5,0),n.btn.events.onInputDown.add(n.handleInputDown,(0,a.default)(n)),n.btn.events.onInputUp.add(n.handleInputUp,(0,a.default)(n)),n.addChild(n.btn),n}(0,n.default)(e,t);var i=e.prototype;return i.enable=function(){this.btn.input.enabled=!0},i.disable=function(){this.btn.input.enabled=!1},i.handleInputDown=function(t,e){this.pointer=e,this.isDown=!0,this.startX=e.x,this.startY=e.y},i.handleInputUp=function(){this.isDown&&this.wearCloth()},i.dragCloth=function(){this.btn.visible=!1,this.isDown=!1,this.game.state.getCurrentState().startDragCloth(this,this.charData?this.charData:this.data,this.pointer)},i.wearCloth=function(){this.isDown=!1,this.game.state.getCurrentState().stopDragCloth({slotRef:this,clothData:this.charData?this.charData:this.data,worldPosition:new Phaser.Point},!0)},i.update=function(){if(this.isDown){var e=Math.abs(this.pointer.x-this.startX),i=Math.abs(this.pointer.y-this.startY);Math.sqrt(e*e+i*i)>20&&this.dragCloth()}t.prototype.update.call(this)},i.showCharacterCloth=function(t){this.charData=this.game.controller.gameData.clothes.find((function(e){return e.character===t}));var e="outfit_"+t;"olive"===t&&this.game.controller.location===o.LOCATION_WINTER&&(e+="_winter"),this.btn.frameName=e,this.btn.visible=!0,this.btn.input.enabled=!0},i.resetOutfit=function(){this.charData=null,this.btn.frameName=this.data.image_key,this.btn.visible=!0,this.btn.input.enabled=!0},i.returnOutfit=function(){this.btn.visible=!0},i.getWP=function(){return{x:this.btn.worldPosition.x,y:this.btn.worldPosition.y+.5*this.btn.height}},i.pulse=function(){this.pulseTween=this.game.add.tween(this.btn.scale).to({x:[1.1,1],y:[1.1,1]},800,Phaser.Easing.BackOut,!0,0),this.pulseTween.onComplete},i.stopPulse=function(){this.pulseTween&&(this.pulseTween.stop(),this.pulseTween=!1,this.btn.scale.set(1))},e}(Phaser.Group);e.default=h},gsGo:function(t,e,i){"use strict";var s=i("R6lU"),a=i("IfHf");i("AaIv"),i("45zI"),i("YY9M"),i("z4Bw"),i("388n"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ShortcutStub=void 0;var n=a(i("+G5l")),o=s(i("wqsV")),h=function(){function t(){}var e=t.prototype;return e.reset=function(){},e.addLevelData=function(){},e.showLevelSettings=function(){},t}();e.ShortcutStub=h;var r=function(){function t(t,e){var i=e.model,s=e.isVisible,a=void 0!==s&&s;this.game=t,this.model=i,this.gameSettings=null,this.levelSettings=null,this.hideSettingsControl=null,this.currentLevelControl=null,this.seasonUnlockedControl=null,this.cutscenesEnabledControl=null,this.countdownEnabledControl=null,this.soundControl=null,this.sfxControl=null,this.musicControl=null,this.voControl=null,this.captionsControl=null,this.levelSelectControl=null,this.nextLevelControl=null,this.boundHide=this.hide.bind(this),this.boundToggle=this.toggleDisplay.bind(this),this.boundLevelSelect=this.onLevelSelect.bind(this),this.boundNextLevel=this.onNextLevel.bind(this),this.boundToggleSound=this.toggleSound.bind(this),this.boundToggleSFX=this.toggleSFX.bind(this),this.boundToggleMusic=this.toggleMusic.bind(this),this.boundToggleVO=this.toggleVO.bind(this),this.boundToggleCaptions=this.toggleCaptions.bind(this),this.isVisible=a,this.trigger=new o.default({sequence:"↑ ↑ ↓ ↓ ← →",onComplete:this.boundToggle})}var e=t.prototype;return e.toggleDisplay=function(){this.isVisible?this.hide():this.show()},e.toggleSound=function(){this.game.sounds.soundVolume=this.model.sound?1:0},e.toggleSFX=function(){this.game.sounds.sfxVolume=this.model.sfx?1:0},e.toggleMusic=function(){this.game.sounds.musicVolume=this.model.music?1:0},e.toggleVO=function(){this.game.sounds.voVolume=this.model.vo?1:0},e.toggleCaptions=function(){this.game.springRollCaptionsPlugin.setMute(!this.model.captions)},e.open=function(){this.gui.open()},e.close=function(){this.gui.close()},e.show=function(){this.isVisible=!0,this.gui.show()},e.hide=function(){this.isVisible=!1,this.gui.hide()},e.setVisible=function(){this.isVisible?this.show():this.hide()},e.createGameSettings=function(){this.gameSettings=this.gui.addFolder("Game Settings"),this.hideSettingsControl=this.gameSettings.add(this.model,"hideShortcuts").name("Hide Shortcuts").onChange(this.boundHide),this.currentLevelControl=this.gameSettings.add(this.model,"currentLevel").name("Current Level");var t=this.currentLevelControl.domElement.getElementsByTagName("input")[0];t&&(t.readOnly=!0),this.seasonUnlockedControl=this.gameSettings.add(this.model,"seasonsUnlocked").name("Seasons unlocked [ TODO ]"),this.cutscenesEnabledControl=this.gameSettings.add(this.model,"cutscenesEnabled").name("Play cutscenes"),this.countdownEnabledControl=this.gameSettings.add(this.model,"countdownEnabled").name("Play countdown"),this.gameSettings.open()},e.onNextLevel=function(){this.game.controller.scNextLevel()},e.onLevelSelect=function(t){var e=Math.trunc(t.split("|")[0]);this.game.controller.scLaunchLevel({levelID:e})},e.createLevelSettings=function(){this.levelSettings=this.gui.addFolder("Level Settings"),this.levelSelectControl=this.levelSettings.add(this.model,"launchLevel",this.levels).name("Start level"),this.levelSelectControl.setValue(this.levels[0]),this.levelSelectControl.onChange(this.boundLevelSelect),this.nextLevelControl=this.levelSettings.add(this.model,"nextLevel").name("Skip current level").onChange(this.boundNextLevel),this.levelSettings.open()},e.createAudioSettings=function(){this.audioSettings=this.gui.addFolder("Audio"),this.soundControl=this.audioSettings.add(this.model,"sound").name("Sound").onChange(this.boundToggleSound),this.sfxControl=this.audioSettings.add(this.model,"sfx").name("SFX").onChange(this.boundToggleSFX),this.musicControl=this.audioSettings.add(this.model,"music").name("Music").onChange(this.boundToggleMusic),this.voControl=this.audioSettings.add(this.model,"vo").name("VO").onChange(this.boundToggleVO),this.captionsControl=this.audioSettings.add(this.model,"captions").name("Captions").onChange(this.boundToggleCaptions)},e.create=function(){n.GUI.TEXT_CLOSED="Close Shortcuts",n.GUI.TEXT_OPEN="Open Shortcuts",this.gui=new n.GUI({name:"Shortcuts",closed:!1,autoPlace:!1}),this.gui.domElement.id="gui",document.getElementById("shortcuts-container").appendChild(this.gui.domElement),this.createGameSettings(),this.createAudioSettings(),this.close(),this.hide()},e.reset=function(){this.model.currentLevel="none",this.currentLevelControl.updateDisplay(),this.cleanUp(this.levelSelectControl),this.levelSettings&&this.gui.removeFolder(this.levelSettings),this.levelSettings=null},e.addLevelData=function(t){var e=t.levelData;this.levels=e.reduce((function(t,e){return t.push(e.id+" | "+e.description),t}),[])},e.showLevelSettings=function(t){var e=t.level;this.model.currentLevel=this.levels[e],this.currentLevelControl.updateDisplay(),this.levelSettings?(this.levelSelectControl.onChange(null),this.levelSelectControl.setValue(this.model.currentLevel),this.levelSelectControl.onChange(this.boundLevelSelect)):this.createLevelSettings()},e.cleanUp=function(t){t&&(t.remove(),t=null)},e.destroy=function(){this.boundHide=null,this.boundLevelSelect=null,this.boundNextLevel=null,this.cleanUp(this.hideSettingsControl),this.cleanUp(this.currentLevelControl),this.cleanUp(this.seasonUnlockedControl),this.cleanUp(this.cutscenesEnabledControl),this.cleanUp(this.countdownEnabledControl),this.gui.removeFolder(this.gameSettings),this.gameSettings=null,this.cleanUp(this.soundControl),this.cleanUp(this.sfxControl),this.cleanUp(this.musicControl),this.cleanUp(this.voControl),this.cleanUp(this.captionsControl),this.gui.removeFolder(this.audioSettings),this.audioSettings=null,this.cleanUp(this.levelSelectControl),this.cleanUp(this.nextLevelControl),this.gui.removeFolder(this.levelSettings),this.levelSettings=null,this.gui.destroy(),this.gui=null,this.trigger.destroy(),this.trigger=null},t}();e.default=r},gsUa:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e,i,s){var a;(a=t.call(this,e)||this).x=i,a.y=s,a.marker=a.game.make.image(0,8,"ui_various","slot_marker"),a.marker.anchor.set(.5),a.circles=[];for(var n=0;n<1;n++){var o=a.game.make.image(0,0,"ui_various","slot_circle");o.anchor.set(.5);var h=a.game.add.tween(o.scale).to({x:1.7,y:1.7},1500,null,!0,1500*n,-1),r=a.game.add.tween(o).to({alpha:0},1500,null,!0,1500*n,-1);a.circles.push({tweenS:h,tweenA:r,circle:o}),a.addChild(o)}return a.addChild(a.marker),a}return(0,a.default)(e,t),e.prototype.destroy=function(){for(var e=0;e<this.circles.length;e++)this.circles[e].tweenA.stop(),this.circles[e].tweenS.stop(),this.circles[e].circle.destroy();this.marker.destroy(),this.circles=null,this.marker=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=n},"hDA+":function(t,e,i){"use strict";i("vw/H"),i("q4B+"),Object.defineProperty(e,"__esModule",{value:!0}),e.processCaptions=e.isObjEmpty=e.shuffle=e.easeOutQuad=e.easeInQuad=e.zeroPad=void 0;e.zeroPad=function(t,e){var i=Math.abs(t),s=Math.max(0,e-Math.floor(i).toString().length),a=Math.pow(10,s).toString().substr(1);return t<0&&(a="-"+a),a+i};e.easeInQuad=function(t,e,i,s){return i*(t/=s)*t+e};e.easeOutQuad=function(t,e,i,s){return-i*(t/=s)*(t-2)+e};e.shuffle=function(t){for(var e,i,s=t.length;s>0;)i=Math.floor(Math.random()*s),e=t[--s],t[s]=t[i],t[i]=e;return t};e.isObjEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})};e.processCaptions=function(t,e,i,s){void 0===s&&(s="");var a=t.cache.getJSON(i);for(var n in a.spritemap)if(a.spritemap.hasOwnProperty(n)){var o=e[n+s];if(o){for(var h=a.spritemap[n],r=1e3*(h.end-h.start)+100,l=0,d=0,c=0;c<o.length;c++)d+=o[c].content.length;for(var u=0;u<o.length;u++){var g=o[u];g.start=l;var p=Math.ceil(r*(g.content.length/d));g.end=h?l+p:1e3*(u+1),l+=p}}else;}return e}},"hF+C":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("XpLG")),h=s(i("0rWv")),r=s(i("JfT4")),l=s(i("Da/+")),d=s(i("voi6")),c=i("6YV8"),u=i("zgbH"),g=function(t){function e(e,i,s,n){var o;return(o=t.call(this,e,0,0)||this).loadTexture("bg_location_"+o.game.controller.location),o.screenshots=n,o.charsData=i,o.foundData=s,o.idleTime=0,o.idlePlayed=!1,o.onCloseResult=new Phaser.Signal,o.addCharacters(i,s),o.addButtons(),o.elinor=new d.default(o.game),o.elinor.x=o.game.defaultWidth/2-450,o.elinor.y=o.game.defaultHeight,o.addChild(o.elinor),o.elinor.enable(),o.elinor.onClick.add(o.onClickElinor,(0,a.default)(o)),o.voController=new l.default(o.game),o.game.time.events.add(500,o.onClickElinor,(0,a.default)(o)),o}(0,n.default)(e,t);var i=e.prototype;return i.addCharacters=function(t,e){this.slots=[];var i=.5*-(t.length-1)*210;this.charsGroup=this.game.make.group(),this.charsGroup.x=this.game.defaultWidth/2,this.charsGroup.y=360;for(var s=0;s<t.length;s++){var a=t[s].id,n=this.screenshots[a],h=n.dx,l=n.dy,d=n.bmd2,c=new r.default({game:this.game,dx:h,dy:l,bmd:d,id:a});c.x=i+210*s,c.onTap.add(this.handleTapChar,this),this.charsGroup.addChild(c);var u=new o.default(this.game,e[a].rating+1,!1);u.y=-110,u.scale.set(1),c.stars=u,c.addChild(u),this.slots.push(c)}this.addChild(this.charsGroup)},i.addButtons=function(){this.btnReplay=new h.default({game:this.game,up:"btn_replay",over:"btn_replay",voID:"ui_01_elinor_031"}),this.btnReplay.onInputDown.add(this.handleReplayDown,this),this.btnReplay.position.set(this.game.defaultWidth/2-80,600),this.addChild(this.btnReplay),this.btnNext=new h.default({game:this.game,up:"btn_next",over:"btn_next",voID:"ui_01_elinor_015"}),this.btnNext.onInputDown.add(this.handleNextDown,this),this.btnNext.position.set(this.game.defaultWidth/2+90,600),this.addChild(this.btnNext)},i.handleTapChar=function(t){this.endStarVO(),this.idleTime=-1,this.idlePlayed=!0,this.idleVO&&this.idleVO.isPlaying&&(this.idleVO.stop(),this.idleVO=null,this.btnReplay.canPlayVO=!0,this.btnNext.canPlayVO=!0),this.elinor.disable(),this.btnReplay.input.enabled=!1,this.btnNext.input.enabled=!1,this.selectedSlot=t;for(var e=0;e<this.slots.length;e++)this.slots[e].disable(),this.slots[e]!==t?this.game.add.tween(this.slots[e].scale).to({x:0,y:0},300,null,!0):this.game.add.tween(this.slots[e].scale).to({x:0,y:0},100,null,!0,200);this.game.add.tween(this.btnReplay).to({y:800},300,Phaser.Easing.Back.In,!0),this.game.add.tween(this.btnNext).to({y:800},300,Phaser.Easing.Back.In,!0,100),this.game.time.events.add(300,this.showHidingPlace,this);var i=[u.GA_LABEL_STAR_1,u.GA_LABEL_STAR_2,u.GA_LABEL_STAR_3][t.stars.stars-1];(0,c.getGA)().track({action:"StarExplainer",label:i})},i.showHidingPlace=function(){var t=this.selectedSlot.characterId;this.bubble=this.game.make.image(this.game.defaultWidth/2,this.game.defaultHeight/2,"explain_bubble"),this.screenshot=this.game.make.image(0,0,this.screenshots[t].bmd),this.screenshot.anchor.set(.5),this.bubble.addChild(this.screenshot),this.bubble.anchor.set(.5),this.addChild(this.bubble),this.bubble.scale.set(0),this.game.add.tween(this.bubble.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0),this.addChild(this.elinor);var e=this.elinor.getRootBone(),i=1.3*e.scaleX;this.game.add.tween(e).to({scaleX:i,scaleY:i},300,null,!0),this.game.time.events.add(500,this.playVO,this)},i.playVO=function(){this.elinor.talk();var t=this.selectedSlot.characterId,e=this.foundData[t];this.voController.init(t,e.explainerData,e.rating,null),this.voController.onEnd.addOnce(this.hideBubble,this)},i.hideBubble=function(){this.elinor.idle(),this.game.add.tween(this.bubble.scale).to({x:0,y:0},300,Phaser.Easing.Back.In,!0).onComplete.add(this.handleHideBubble,this);var t=this.elinor.getRootBone(),e=t.scaleX/1.3;this.game.add.tween(t).to({scaleX:e,scaleY:e},500,null,!0);for(var i=0;i<this.slots.length;i++)this.slots[i]!==this.selectedSlot?this.game.add.tween(this.slots[i].scale).to({x:1,y:1},300,null,!0,300):this.game.add.tween(this.slots[i].scale).to({x:1,y:1},300,null,!0);this.game.add.tween(this.btnReplay).to({y:600},300,Phaser.Easing.Back.Out,!0,300),this.game.add.tween(this.btnNext).to({y:600},300,Phaser.Easing.Back.Out,!0,400)},i.handleHideBubble=function(){for(var t=0;t<this.slots.length;t++)this.slots[t].enable();this.elinor.enable(),this.btnReplay.input.enabled=!0,this.btnNext.input.enabled=!0,this.screenshot.destroy(),this.bubble.destroy(),this.screenshot=null,this.bubble=null,this.selectedSlot=null},i.removeListeners=function(){this.btnReplay.onInputDown.remove(this.handleReplayDown,this),this.btnNext.onInputDown.remove(this.handleNextDown,this)},i.handleReplayDown=function(){this.removeListeners(),this.endStarVO(),this.onCloseResult.dispatch(!0)},i.handleNextDown=function(){this.removeListeners(),this.endStarVO(),this.onCloseResult.dispatch(!1)},i.update=function(){if(this.elinor.update(),t.prototype.update.call(this),this.idleTime>-1&&!this.idlePlayed&&(this.idleTime+=this.game.time.elapsedMS/1e3,this.idleTime>5)){this.idleTime=-2;var e=this.game.device.desktop?"ex_star_idle_click":"ex_star_idle_tap";this.idleVO=this.game.sounds.playVO(e,{spriteID:"vo_explainer_stars",onComplete:this.endIdleVO,onCompleteScope:this}).get(e),this.game.springRollCaptionsPlugin.playCaption(e),this.elinor.talk(),this.btnReplay.canPlayVO=!1,this.btnNext.canPlayVO=!1}},i.endIdleVO=function(){-2===this.idleTime&&(this.idleTime=0,this.idleVO=null,this.elinor.idle(),this.btnReplay.canPlayVO=!0,this.btnNext.canPlayVO=!0)},i.onClickElinor=function(){if(!this.selectedSlot){this.idleTime=-1,this.idleVO&&this.idleVO.isPlaying&&(this.idleVO.stop(),this.idleVO=null);var t=Phaser.Math.between(0,this.slots.length-1);this.selectedSlotEl=this.slots[t];for(var e=this.selectedSlotEl.stars.stars,i=0;i<this.slots.length;i++)i!==t?this.slots[i].makeSmaller():this.slots[i].makeBigger();this.elinor.disable(),this.btnReplay.canPlayVO=!1,this.btnNext.canPlayVO=!1,this.elinorClicked=!0,this.elinor.talk();var s="ex_"+e+"_star";this.starVO=this.game.sounds.playVO(s,{spriteID:"vo_explainer_stars",onComplete:this.playStarVO,onCompleteScope:this}),this.game.springRollCaptionsPlugin.playCaption(s)}},i.playStarVO=function(){if(this.elinorClicked){var t=this.selectedSlotEl.stars.stars,e="ex_"+t+"_star_variable_"+Phaser.Math.between(1,3===t?2:4);this.starVO=this.game.sounds.playVO(e,{spriteID:"vo_explainer_stars",onComplete:this.handleStarVOComplete,onCompleteScope:this}).get(e),this.game.springRollCaptionsPlugin.playCaption(e)}},i.handleStarVOComplete=function(){if(this.elinorClicked)if(this.selectedSlotEl.stars.stars<3&&Math.random()<.5){var t="ex_1_2_star_variable";this.starVO=this.game.sounds.playVO(t,{spriteID:"vo_explainer_stars",onComplete:this.endStarVO,onCompleteScope:this}).get(t),this.game.springRollCaptionsPlugin.playCaption(t)}else this.endStarVO()},i.endStarVO=function(){if(this.elinorClicked=!1,this.starVO&&this.starVO.isPlaying&&this.starVO.stop(),this.slots)for(var t=0;t<this.slots.length;t++)this.slots[t].makeNormal();this.elinor&&(this.elinor.idle(),this.elinor.enable()),this.btnReplay&&(this.btnReplay.canPlayVO=!0,this.btnNext.canPlayVO=!0),this.idleTime=0},i.destroy=function(){this.elinorClicked=!1,this.starVO&&this.starVO.isPlaying&&this.starVO.stop(),this.starVO=null,this.btnReplay.onInputDown.remove(this.handleReplayDown,this),this.btnNext.onInputDown.remove(this.handleNextDown,this),this.elinor.onClick.remove(this.onClickElinor,this),this.elinor.disable(),this.elinor=null,t.prototype.destroy.call(this)},e}(Phaser.Image);e.default=g},"l/Ay":function(t,e,i){"use strict";var s=i("R6lU");i("j3Ef"),i("qnda"),i("ocEJ"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("drmM")),o=s(i("9SIq")),h=s(i("dMJc")),r=s(i("4ase")),l=s(i("JTXM")),d=s(i("4UFF")),c=s(i("0BGZ")),u=i("zgbH"),g=i("6YV8"),p=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.create=function(){this.container=this.game.add.group(),this.location=new o.default(this.game,this.locationData,this.levelData.sceneWidth),this.container.addChild(this.location),this.setCharsData(),this.camera=new h.default(this.game,this.location),this.camera.setPosition(this.levelData.start_point),this.navPointId=0,this.calculateNavPoints(),this.location.camera=this.camera,this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.LEFT),this.game.input.keyboard.removeKeyCapture(Phaser.Keyboard.RIGHT),this.location.disableAllSlots();for(var t=0;t<this.levelData.slots.length;t++)this.location.enableSlot(this.levelData.slots[t]);this.gameHud=new d.default(this.game,this.charsData),this.container.addChild(this.gameHud),this.gameHud.onScrollLeft.add(this.handleScrollLeft,this),this.gameHud.onScrollRight.add(this.handleScrollRight,this),this.setArrowsVisibility(),this.toPlace=this.charsData.length,this.toFind=this.charsData.length,this.found=0,this.screenShots={},this.ratings={},this.foundData={},this.onHideCharacter=new Phaser.Signal,this.onDragCharacter=new Phaser.Signal,this.create2(),this.transition=this.game.controller.getTransition(),this.transition.fadeOut()},i.create2=function(){this.gameHud.onCloseElinor.addOnce(this.handleCloseElinor1,this),this.gameHud.showOverlayElinorTalk(["cs_10a_elinor_002"],500)},i.setCharsData=function(){var t=this;this.charsData=this.levelData.characters.filter((function(e){return e.id!==t.seekerId}))},i.handleResize=function(){this.calculateNavPoints(),this.setCurrentNavPoint()},i.handleCloseElinor1=function(){this.location.enableControls(),this.levelData.onboarding&&(this.game.onboarding=new c.default(this.game,this.levelData.onboarding,this.game.cache.getJSON(this.levelData.onboarding+"_config"),this),this.game.onboarding.onEnd.addOnce(this.handleOnboardingEnd,this),this.game.onboarding.start())},i.handleOnboardingEnd=function(){this.game.springRollCaptionsPlugin.captions&&!this.game.springRollCaptionsPlugin.captions.cs_10a_elinor_002&&this.game.springRollCaptionsPlugin.setData(this.cptData)},i.handleScrollLeft=function(){this.setCurrentNavPoint(),this.gameHud.hideScrollArrows(),this.navPointId>0&&this.navPointId--,this.camera.destX=this.navPoints[this.navPointId],this.gameHud.showScrollArrows(this.navPointId>0,this.navPointId<this.navPoints.length-1)},i.handleScrollRight=function(){this.setCurrentNavPoint(),this.gameHud.hideScrollArrows(),this.navPointId<this.navPoints.length-1&&this.navPointId++,this.camera.destX=this.navPoints[this.navPointId],this.gameHud.showScrollArrows(this.navPointId>0,this.navPointId<this.navPoints.length-1)},i.removeCurrentDragCharacter=function(){this.location.draggable&&this.stopDragCharacter(this.location.draggable)},i.startDragCharacter=function(t,e,i,s,a,n,o,h){void 0===h&&(h=!1),e.setStateDrag(),this.gameHud.charactersList.setArrowsVisibility(!1),this.location.placeDragCharacter(t,e,i,s,a,n,o),this.location.showSlotMarkers(t),h&&(this.toPlace++,this.gameHud.hideContinueButton()),this.onDragCharacter.dispatch()},i.stopDragCharacter=function(t){this.gameHud.charactersList.setArrowsVisibility(!0),this.location.removeDragCharacter(),this.location.hideSlotMarkers();var e=this.location.tryAddCharToSlot(t);e.added?(t.slotRef.setStateHidden(),e.wasSlotEmpty&&this.toPlace--,this.game.sounds.playSFX("place_object",{spriteID:"sfx_gameplay",volume:.3}),this.onHideCharacter.dispatch(),0===this.toPlace&&this.displayContinueButton()):t.slotRef.setStateInitial()},i.displayContinueButton=function(){this.gameHud.showContinueButton()},i.handleButtonContinue=function(){this.location.lockCharacters(),this.gameHud.hideScrollArrows(),this.location.disableControls(),this.location.hideCharacterDressUpButtons(),this.seeker=new r.default(this.game,this.seekerId,this.locationData.nav_points,this.levelData.start_point,100,this.levelData.sceneWidth-100),this.location.placeSeeker(this.seeker),this.camera.setTarget(this.seeker),this.camera.setPosition(this.seeker.x),this.AI=new l.default(this.game,this.location,this.location.getSlotsWithChars(),this.seeker,this.levelData.quick_find),this.AI.onFindChar.add(this.handleFindChar,this),this.gameHud.onCloseElinor.addOnce(this.handleCloseElinor2,this),this.gameHud.showOverlayElinorTalk(["cs_10b_elinor_001","ui_01_elinor_"+this.seekerId])},i.handleCloseElinor2=function(){this.gameHud.onCountEnd.addOnce(this.handleCountEnd,this),this.gameHud.showOverlayCount(this.seekerId,!1)},i.handleCountEnd=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndAfterCount,this),this.transition.fadeIn()},i.handleTransitionEndAfterCount=function(){this.gameHud.removeOverlayCount(),this.transition.onFadeEnd.addOnce(this.handleTransitionEndToStart,this),this.transition.fadeOut()},i.handleTransitionEndToStart=function(){this.AI.getNextTarget()},i.handleFindChar=function(t,e){var i=["011","015","016"][Math.floor(3*Math.random())];i=2===e.rating?"012":i;var s="vo_01_"+this.seekerId+"_"+i;this.game.springRollCaptionsPlugin.playCaption(s),this.game.sounds.playVO(s,{spriteID:this.seekerId+"_vo",delay:400}),this.seeker.talk(1e3,450),0===this.found&&(this.game.controller.nextSeekerId=t),this.found++;var a=e.data.characters.find((function(e){return e.id===t})).explainer;-1!==e.character.clothId&&(a=e.data.clothes.find((function(t){return t.id===e.character.clothId})).explainer),this.foundData[t]={charId:t,slotId:e.data.id,rating:e.rating,clothId:e.character.clothId,explainerData:a},this.game.time.events.add(1500,this.revealCharacter,this,t,e)},i.revealCharacter=function(t,e){this.gameHud.charactersList.revealCharacter(t),this.ratings[t]=e.rating,e.showStarsPopup(),this.game.time.events.add(2e3,this.handleCloseStarsPopup,this)},i.handleCloseStarsPopup=function(){this.finishLevel()},i.finishLevel=function(){if(this.found>=this.toFind){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToResult,this),this.transition.fadeIn();var t=this.game.controller.location,e="EndLevel_"+(t=t.replace(/^\w/,(function(t){return t.toUpperCase()})))+"_Level_"+(this.levelData.id+1);this.game.controller.replays>0&&(e+="_Replay_"+this.game.controller.replays);for(var i=0,s=this.location.getSlotsWithChars(),a=0;a<s.length;a++)i+=s[a].rating+1;(0,g.getGA)().track({action:e,value:i})}},i.handleTransitionEndToResult=function(){this.gameHud.onCloseResult.addOnce(this.handleCloseWellDone,this),this.gameHud.showOverlayResult(this.seekerId,this.charsData),this.transition.fadeOut()},i.handleCloseWellDone=function(){this.gameHud.onCloseResult.addOnce(this.handleCloseResult,this),this.gameHud.showOverlayResultHide(this.charsData,this.foundData,this.screenShots)},i.handleCloseResult=function(t){this.replayLevel=t,this.transition.onFadeEnd.addOnce(this.handleTransitionEndToNextLevel,this),this.transition.fadeIn()},i.handleTransitionEndToNextLevel=function(){this.replayLevel?this.game.controller.replayLevel():this.game.controller.endLevel()},i.makeScreenshot=function(t,e,i){t+=this.location.x;var s=this.game.make.image(0,0,"explain_mask"),a=s.width,n=s.height,o=a/1.5/2,h=this.game.width-o,r=n/1.5/2,l=this.game.height-r,d=Phaser.Math.clamp(t,o,h),c=Phaser.Math.clamp(e,r,l),u=this.game.make.image(a/2,n/2);this.seeker.visible=!1,this.gameHud.visible=!1,this.game.renderer.render(this.game.stage),u.setTexture(PIXI.Texture.fromCanvas(this.game.canvas)),this.seeker.visible=!0,this.gameHud.visible=!0,u.anchor.set(d/this.game.width,c/this.game.height),u.scale.set(1.5);var g=this.game.make.bitmapData(a,n);g.alphaMask(u,s),u.anchor.set(d/this.game.width,c/this.game.height),u.scale.set(1.5);var p=this.game.make.bitmapData(a,n);p.draw(u),this.screenShots[i.charData.id]={bmd:g,bmd2:p,dx:t-d,dy:e-c,cx:t,cy:e}},i.openDressUp=function(t,e,i){this.characterDressUpRef=t,this.location.disableControls(),this.gameHud.arrowsContainer.visible=!1,this.gameHud.charactersList.visible=!1,this.location.lockCharacters(),this.location.findSlotWithCharacter(e).unlockCharacterCheckBtn(),this.location.hideCharacterDressUpButtons(e),this.gameHud.showDressUp(t,e,i)},i.hideDressUp=function(){this.location.enableControls(),this.gameHud.arrowsContainer.visible=!0,this.gameHud.charactersList.visible=!0,this.location.unlockCharacters(),this.location.showCharacterDressUpButtons(),this.gameHud.hideClothes()},i.startDragCloth=function(t,e,i){this.location.placeDragCloth(t,e,i)},i.stopDragCloth=function(t,e){void 0===e&&(e=!1),this.location.removeDragCloth();var i=this.characterDressUpRef,s=t.slotRef,a=t.worldPosition.x-s.worldPosition.x,n=t.worldPosition.y-s.worldPosition.y,o=t.worldPosition.x-i.worldPosition.x,h=t.worldPosition.y-i.worldPosition.y;o*o+h*h<a*a+n*n||e?(i.wearCloth(t.slotRef,t.clothData),i.clothId>-1?s.showCharacterCloth(i.charData.id):s.resetOutfit(),this.game.sounds.playSFX("clothes_on",{spriteID:"sfx_gameplay",volume:.3})):s.returnOutfit()},i.setArrowsVisibility=function(){if(!this.gameHud.arrowsLocked){this.setCurrentNavPoint(),this.gameHud.hideScrollArrows();var t=this.camera.currentX;this.gameHud.showScrollArrows(t>=this.navPoints[0]+1,t<=this.navPoints[this.navPoints.length-1]-1)}},i.update=function(){var t=Math.min(.1,this.game.time.elapsedMS/1e3);this.location.controlsEnabled&&this.game.controller.gameMode===u.MODE_HIDE&&(this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)&&(this.camera.destX-=10),this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&(this.camera.destX+=10)),this.seeker&&this.seeker.step(t),this.location.step(t),this.camera.step(t),(this.location.isDraggingScene||this.location.isDraggingCharacter)&&this.setArrowsVisibility(),this.game.onboarding&&this.game.onboarding.step(t)},i.shutdown=function(){this.game.onboarding&&(this.game.onboarding.onEnd.remove(this.handleOnboardingEnd,this),this.game.onboarding.destroy(),this.game.onboarding=null),this.screenShots=null,this.seeker&&(this.seeker.destroy(),this.seeker=null),this.container.destroy(!0),this.container=null,t.prototype.shutdown.call(this)},e}(n.default);e.default=p},"m/lz":function(t,e,i){"use strict";var s=i("R6lU");i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("TSJq")),n=s(i("CDWU")),o=s(i("v2oV")),h=i("zgbH"),r=i("5mNR"),l=i("TEuq"),d=i("zgbH"),c=function(){function t(){}var e=t.prototype;return e.init=function(t){var e,i=this,s=this;this.game=new Phaser.Game(h.GAME_WIDTH_DEFAULT,h.GAME_HEIGHT_DEFAULT,(/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Phaser.AUTO),h.GAME_DIV_ID,{init:function(){l.Debugger.log("log","Initialising app"),this.game.springRollApplication=t,this.game.stage.disableVisibilityChange=!0,this.game.preserveDrawingBuffer=!0,this.game.input.maxPointers=1,this.game.stage.backgroundColor=d.GAME_BACKGROUND_COLOR,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!1,this.game.scale.pageAlignVertically=!1,this.game.defaultWidth=h.GAME_WIDTH_DEFAULT,this.game.defaultHeight=h.GAME_HEIGHT_DEFAULT,this.game.offsetWidth=0,this.game.offsetHeight=0,this.game.screenPadding=.02*Math.max(h.GAME_WIDTH_DEFAULT,h.GAME_HEIGHT_DEFAULT),this.game.aspectController=new o.default(this.game),this.game.sounds=new n.default({game:this.game}),this.game.urls=new a.default(this.game)},preload:function(){},create:function(){var t=this;this.game.onBlur.add(s.onBlur,s),this.game.onFocus.add(s.onFocus,s),this.game.input.onUp.add(s.onFocus,s),this.game.input.onDown.add(s.onFocus,s),this.game.input.onTap.add(s.onFocus,s),this.game.input.onHold.add(s.onFocus,s),Object.keys(r.STATE_MAP).forEach((function(e){t.game.state.add(e,r.STATE_MAP[e],!1)})),this.game.canvas.addEventListener("MSPointerCancel",(function(e){t._pointerCancel(e)})),this.game.canvas.addEventListener("pointercancel",(function(e){t._pointerCancel(e)})),this.game.state.start(r.STATE_BOOT,!0,!1)}}),this.hidden=void 0,this.originalPauseValue=void 0,void 0!==document.hidden?(this.hidden="hidden",e="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",e="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this.hidden&&document.addEventListener(e,(function(){return i.handleVisibilityChange()}),!1),window.addEventListener("onpagehide",(function(){return i.onBlur()}),!1),window.addEventListener("pageshow",(function(){return i.onFocus()}),!1)},e.handleVisibilityChange=function(){document[this.hidden]?this.onBlur():this.onFocus()},e.onBlur=function(){document[this.hidden]&&void 0===this.originalPauseValue&&(this.originalPauseValue=this.game.paused,this.pauseGame(!0))},e.onFocus=function(){void 0!==this.originalPauseValue&&(this.pauseGame(this.originalPauseValue),this.originalPauseValue=void 0)},e.pauseGame=function(t){this.game.paused=t,t?this.game.sound.pauseAll():this.game.sound.resumeAll()},e._pointerCancel=function(t){this.game.input&&this.game.input.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.game.input.mousePointer.stop(t):this.game.input.stopPointer(t))},t}();e.default=c},nANl:function(t,e,i){"use strict";var s=i("R6lU");i("j3Ef"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("l/Ay")),o=s(i("4ase")),h=s(i("0BGZ")),r=i("zgbH"),l=i("5mNR"),d=i("6YV8"),c=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.create=function(){this.game.controller.gameMode=r.MODE_HIDE,t.prototype.create.call(this),this.firstTimeCheckButton=!0,this.location.disableControls(),this.gameHud.charactersList.lock();var e=this.game.controller.twoPlayersModel.getHidingPlayerIcon(),i=this.game.controller.twoPlayersModel.hidingPlayerId+1;this.gameHud.showCurrentPlayerIcon(e,i),this.gameHud.showOverlayTPCharacters(this.charsData),this.gameHud.onCloseTPOverlay.add(this.handleOverlayCharactersClose,this)},i.create2=function(){},i.setCharsData=function(){var t=this;this.charsData=this.levelData.characters.filter((function(e){return e.id!==t.game.controller.twoPlayersModel.playerIcon1&&e.id!==t.game.controller.twoPlayersModel.playerIcon2}))},i.startLevel=function(){this.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_034"]),this.location.enableControls(),this.gameHud.charactersList.unlock()},i.handleOverlayCharactersClose=function(){if(this.gameHud.onCloseTPOverlay.remove(this.handleOverlayCharactersClose,this),this.game.controller.player.wasOnboardingDisplayed("onboarding_01"))this.startLevel();else{var t="onboarding_05a";this.game.controller.twoPlayersModel.playerIcon2===this.game.controller.twoPlayersModel.getHidingPlayerIcon()&&(t="onboarding_05b"),this.game.onboarding=new h.default(this.game,t,this.game.cache.getJSON(t+"_config"),this),this.game.onboarding.onEnd.addOnce(this.handleOnboardingEnd,this),this.game.onboarding.start()}},i.handleOnboardingEnd=function(){this.game.springRollCaptionsPlugin.setData(this.cptData),this.startLevel()},i.handleButtonContinue=function(){this.location.lockCharacters(),this.location.disableControls(),this.gameHud.hideScrollArrows(),this.location.hideCharacterDressUpButtons(),this.seeker=new o.default(this.game,this.seekerId,this.locationData.nav_points,this.levelData.start_point,100,this.levelData.sceneWidth-100),this.location.placeSeeker(this.seeker),this.seeker.onStartWalk.add(this.handleSeekerStartWalk,this),this.seeker.onPosition.add(this.handleSeekerOnPosition,this),this.camera.setTarget(this.seeker),this.camera.setPosition(this.seeker.x),this.gameHud.showOverlayTPSeekingAlert(),this.gameHud.onCloseTPOverlay.add(this.handleOverlaySeekingClose,this)},i.handleOverlaySeekingClose=function(){var t=this.game.controller.twoPlayersModel.getSeekingPlayerIcon(),e=(this.game.controller.twoPlayersModel.hidingPlayerId+1)%2+1;this.gameHud.showCurrentPlayerIcon(t,e),this.gameHud.playerIcon.setHudMode(),this.game.springRollCaptionsPlugin.setData(this.cptData),this.gameHud.onCountEnd.addOnce(this.handleCountEnd,this),this.gameHud.showOverlayCount(this.seekerId,!1)},i.handleCountEnd=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToStart,this),this.transition.fadeIn()},i.handleTransitionEndToStart=function(){this.gameHud.removeOverlayCount(),this.transition.fadeOut(),this.game.controller.gameMode=r.MODE_SEEK,this.handleResize(),this.gameHud.showScrollArrows(!this.seeker.atFirstNavPoint(),!this.seeker.atLastNavPoint()),this.location.addOnFindToSlots(),this.location.onFindChar.add(this.handleFindChar,this),this.location.enableControls(),this.location.unlockCharacters()},i.handleResize=function(){this.calculateNavPoints(),this.setCurrentNavPoint(),this.seeker&&(this.seeker.navPoints=this.navPoints,this.seeker.currentNavId=this.navPointId)},i.handleScrollLeft=function(){this.game.controller.gameMode===r.MODE_SEEK?(this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.seeker.gotoPrevNavPoint(),this.gameHud.hideScrollArrows()):t.prototype.handleScrollLeft.call(this)},i.handleScrollRight=function(){this.game.controller.gameMode===r.MODE_SEEK?(this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.seeker.gotoNextNavPoint(),this.gameHud.hideScrollArrows()):t.prototype.handleScrollRight.call(this)},i.handleSeekerOnPosition=function(){this.setCurrentNavPoint(),this.seeker.currentNavId=this.navPointId,this.gameHud.showScrollArrows(!this.seeker.atFirstNavPoint(),!this.seeker.atLastNavPoint())},i.handleSeekerStartWalk=function(){this.gameHud.hideScrollArrows()},i.handleFindChar=function(t,e){this.gameHud.charactersList.revealCharacter(t);var i=["011","015","016"][Math.floor(3*Math.random())];i=e?"012":i;var s="vo_01_"+this.seekerId+"_"+i;this.game.springRollCaptionsPlugin.playCaption(s),this.game.sounds.playVO(s,{spriteID:this.seekerId+"_vo",delay:400});var a=this.cptData[s],n=a[a.length-1].end;this.seeker.stop(),this.seeker.pointCharacter(),this.seeker.talk(n,450),this.found++,this.found>=this.toFind?this.game.time.events.add(n+450,this.showResult,this):this.game.time.events.add(n+450,this.enableControls,this),this.gameHud.arrowsContainer.visible=!1,this.location.disableControls(),this.location.lockCharacters()},i.enableControls=function(){this.gameHud.arrowsContainer.visible=!0,this.location.enableControls(),this.location.unlockCharacters()},i.showResult=function(){this.transition.onFadeEnd.addOnce(this.handleTransitionEndToResult,this),this.transition.fadeIn()},i.handleTransitionEndToResult=function(){for(var t=this.game.controller.location,e="EndLevel_"+(t=t.replace(/^\w/,(function(t){return t.toUpperCase()}))),i=0,s=this.location.getSlotsWithChars(),a=0;a<s.length;a++)i+=s[a].rating+1;(0,d.getGA)().track({action:e,value:i}),this.gameHud.onCloseResult.addOnce(this.handleCloseResult,this),this.gameHud.showOverlayResult(this.seekerId,this.charsData),this.transition.fadeOut()},i.handleCloseResult=function(){0===this.game.controller.twoPlayersModel.hidingPlayerId?(this.game.controller.twoPlayersModel.changeHidingPlayer(),this.firstTimeCheckButton=!0,this.gameHud.showOverlayTPPlayerTwoTurn(),this.gameHud.onCloseTPOverlay.add(this.handleOverlayPlayerTwoTurnClose,this)):this.gameHud.showOverlayTPEndScreen()},i.handleOverlayPlayerTwoTurnClose=function(){this.gameHud.onCloseTPOverlay.remove(this.handleOverlayPlayerTwoTurnClose,this),this.game.controller.startState(l.STATE_LEVEL_TWO_PLAYERS,{levelData:this.levelData,seekerId:this.game.controller.twoPlayersModel.getSeekingPlayerIcon()})},i.displayContinueButton=function(){if(t.prototype.displayContinueButton.call(this),this.firstTimeCheckButton){this.firstTimeCheckButton=!1;var e=this.game.device.desktop?"ob_05_elinor_017_click":"ob_05_elinor_017_tap";this.game.twoPlayersOnboarding.playVOs([e])}},i.update=function(){t.prototype.update.call(this),this.location.controlsEnabled&&this.game.controller.gameMode===r.MODE_SEEK&&(this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)&&this.seeker.gotoPosition(this.seeker.x-10),this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&this.seeker.gotoPosition(this.seeker.x+10))},i.shutdown=function(){this.game.twoPlayersOnboarding&&this.game.twoPlayersOnboarding.stopVO(),t.prototype.shutdown.call(this)},e}(n.default);e.default=c},nZCe:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("W5ee")),h=function(t){function e(e,i,s,n,h){var r;return(r=t.call(this,e)||this).vo=s,r.onClick=new Phaser.Signal,r.bg=r.game.make.graphics(),r.bg.beginFill(0,.6),r.bg.drawRect(0,0,r.game.defaultWidth,r.game.defaultHeight),r.bg.endFill(),r.addChild(r.bg),r.bubble=r.game.make.image(0,0,"explain_bubble"),r.character=r.game.make.image(23,15,i),r.bubble.addChild(r.character),r.bubble.x=.5*(r.game.defaultWidth-r.bubble.width),r.bubble.y=130,r.addChild(r.bubble),r.btnClose=new o.default({game:r.game,id:"close",icon:"close"}),r.addChild(r.btnClose),r.btnClose.x=.5*(r.game.defaultWidth+r.game.width)-r.btnClose.width-20,r.btnClose.y=20,r.btnClose.onInputDown.addOnce(r.handleInputDown,(0,a.default)(r)),r.addChild(r.btnClose),r.bg.inputEnabled=!0,r.bg.events.onInputDown.addOnce(r.handleInputDown,(0,a.default)(r)),r.game.time.events.add(500,r.handleVoComplete,(0,a.default)(r)),r}(0,n.default)(e,t);var i=e.prototype;return i.positionContainer=function(){t.prototype.positionContainer.call(this),this.btnClose&&(this.btnClose.x=.5*(this.game.defaultWidth+this.game.width)-this.btnClose.width-20)},i.handleVoComplete=function(){this.closed||this.vo.length>0&&(this.sound=this.game.sounds.playVO(this.vo.shift(),{spriteID:"vo_gameplay",onComplete:this.handleVoComplete,onCompleteScope:this}))},i.handleInputDown=function(){this.btnClose.onInputDown.remove(this.handleInputDown,this),this.bg.events.onInputDown.remove(this.handleInputDown,this),this.closed=!0,this.sound&&this.sound.stop(),this.sound=null,this.onClick.dispatch()},e}(s(i("3huV")).default);e.default=h},oTeA:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=function(t){function e(e,i,s){var a;void 0===s&&(s=!1),(a=t.call(this,e)||this).data=i,a.w=0,a.inputEnableChildren=s;for(var n=0,o=0;o<i.parts.length;o++){var h=a.game.make.image(n,a.game.height,i.parts[o]);h.anchor.set(0,1),n+=h.width,a.w+=h.width,a.add(h)}return a}return(0,n.default)(e,t),e.prototype.addSlot=function(t){this.add(t)},(0,a.default)(e,[{key:"width",get:function(){return this.data.width||this.w}}]),e}(Phaser.Group);e.default=o},ohYO:function(t,e,i){},oyd0:function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=s(i("dD3M")),h=i("vXl+"),r=i("zgbH"),l=i("6YV8"),d=function(t){function e(e,i,s,a){var n;return(n=t.call(this,e)||this).slotRef=i,n.charData=s,n.isCharFound=!1,n.slotScale=a,n.clothSlotRef=null,n.clothId=-1,n.clothData=n.game.controller.gameData.clothes.find((function(t){return t.character===n.charData.id})),n.x=s.offset.x,n.y=s.offset.y,n.onFindChar=new Phaser.Signal,n.onRemoveChar=new Phaser.Signal,n.onTapClothingEdit=new Phaser.Signal,n.onTapClothingCheck=new Phaser.Signal,n.onWearClothes=new Phaser.Signal,n.hudSlotRef=null,n.timeToWiggle=Phaser.Math.random(5,7),n.createCharacter(),n}(0,n.default)(e,t);var i=e.prototype;return i.createCharacter=function(){this.character=this.game.make.spine(0,0,this.charData.id,!0),this.character.anchor.set(.5,1),this.addChild(this.character);var t=1;"right"===this.charData.direction&&(t=-1),this.character.skeleton.getRootBone().scaleX=.4*t*this.slotScale,this.character.skeleton.getRootBone().scaleY=.4*this.slotScale,this.character.setSkinByName(this.clothData.skin_name),"twins"===this.charData.id&&(this.character2=this.game.make.spine(50*t*this.slotScale,0,"mary",!0),this.character2.anchor.set(.5,1),this.addChildAt(this.character2,0),this.character2.skeleton.getRootBone().scaleX=.4*t*this.slotScale,this.character2.skeleton.getRootBone().scaleY=.4*this.slotScale,this.character2.setSkinByName(this.clothData.skin_name)),this.mixAnimations(),this.playAnim("hiding"),this.updateTransform(),this.update(),this.startX=0,this.startY=0,this.isDown=!1,this.button=this.game.make.button(0,0,"slot_marker"),this.button.width=.5*this.character.width*this.slotScale,this.button.height=.4*this.character.height*this.slotScale,"ari"===this.charData.id&&(this.button.width=.7*this.character.width*this.slotScale,this.button.x-=t*this.slotScale*50),this.button.alpha=0,this.button.anchor.set(.5,1),this.addChild(this.button),this.button.inputEnabled=!0,this.button.events.onInputDown.add(this.handleInputDown,this),this.button.events.onInputUp.add(this.handleInputUp,this),this.game.controller.gameMode===r.MODE_SEEK&&(this.button.input.useHandCursor=!1),this.addDressUpButtons()},i.mixAnimations=function(){this.character.setMixByName("wiggle","hiding",.2),this.character.setMixByName("hiding","wiggle",.2),this.character.setMixByName("hiding","peer out",.2),this.character.setMixByName("peer out","idle",.2),this.character.setMixByName("hiding","reveal",.2),this.character2&&(this.character2.setMixByName("wiggle","hiding",.2),this.character2.setMixByName("hiding","wiggle",.2),this.character2.setMixByName("hiding","peer out",.2),this.character2.setMixByName("peer out","idle",.2),this.character2.setMixByName("hiding","reveal",.2))},i.addDressUpButtons=function(){if(this.game.controller.levelData.dress_up){var t=this.slotRef.x+this.x,e=this.slotRef.y+this.y-this.height+this.character.y-50,i=Math.min(660,this.slotRef.y+this.y+70);if(this.btnClothingEdit=new o.default({game:this.game,up:"btn_clothing_edit",over:"btn_clothing_edit"}),this.btnClothingEdit.x=t,this.btnClothingEdit.y=e,this.btnClothingEdit.onInputDown.add(this.handleClothingEditDown,this),this.btnClothingCheck=new o.default({game:this.game,up:"btn_clothing_check",over:"btn_clothing_check"}),this.btnClothingCheck.x=t,this.btnClothingCheck.y=e,e<320){this.btnClothingCheck.y=i;var s="btn_clothing_check_up";this.btnClothingCheck.setFrames(s,s,s,s)}this.btnClothingCheck.onInputDown.add(this.handleClothingCheckDown,this),this.btnClothingCheck.visible=!1;var a=this.game.state.getCurrentState().location;"bg"===this.slotRef.data.layer?(a.midUI.addChild(this.btnClothingEdit),a.midUI.addChild(this.btnClothingCheck)):(a.forUI.addChild(this.btnClothingEdit),a.forUI.addChild(this.btnClothingCheck))}},i.handleClothingEditDown=function(){this.slotRef.getCharacterToFront(),this.playAnim("idle"),this.btnClothingEdit.visible=!1,this.btnClothingCheck.visible=!0,this.game.state.getCurrentState().openDressUp(this,this.charData.id,this.clothId),this.onTapClothingEdit.dispatch(),(0,l.getGA)().track({action:"DressUpModeSelected"})},i.handleClothingCheckDown=function(){this.slotRef.sendCharacterBack(),this.playAnim("hiding"),this.btnClothingEdit.visible=!0,this.btnClothingCheck.visible=!1,this.game.state.getCurrentState().hideDressUp(),this.onTapClothingCheck.dispatch()},i.showDressUpButtons=function(){this.btnClothingEdit&&(this.btnClothingEdit.visible=!0,this.btnClothingCheck.visible=!1)},i.hideDressUpButtons=function(){this.btnClothingEdit&&(this.btnClothingEdit.visible=!1,this.btnClothingCheck.visible=!1)},i.addCharacter=function(){this.alpha=1},i.playAnim=function(t,e){void 0===e&&(e=!0),this.currentAnim!==t&&(this.currentAnim=t,this.character.setAnimationByName(0,t,e),this.character2&&this.character2.setAnimationByName(0,t,e))},i.handleInputDown=function(t,e){this.game.controller.gameMode===r.MODE_SEEK?this.findMe():(this.pointer=e,this.isDown=!0,this.startX=e.x,this.startY=e.y)},i.handleInputUp=function(){this.isDown&&this.pickUp()},i.pickUp=function(){this.slotRef.isEmpty=!0,this.game.state.getCurrentState().startDragCharacter(this.charData.id,this.hudSlotRef,this.clothSlotRef,this.clothId,this.worldPosition.x,this.worldPosition.y-this.height*this.scale.y*.5,this.pointer,!0),this.game.sounds.playSFX("remove_pop",{spriteID:"sfx_gameplay",volume:.3}),this.slotRef.removeCharacter()},i.findMe=function(){this.isCharFound||(this.onFindChar.dispatch(this.charData.id),this.lock())},i.lock=function(t){void 0===t&&(t=!0),this.button.input.enabled=!1,this.button.visible=!1,this.btnClothingEdit&&t&&(this.btnClothingEdit.input.enabled=!1,this.btnClothingCheck.input.enabled=!1)},i.unlock=function(){this.isCharFound||(this.button.input.enabled=!0,this.button.visible=!0),this.btnClothingEdit&&(this.btnClothingEdit.input.enabled=!0,this.btnClothingCheck.input.enabled=!0)},i.unlockCheckBtn=function(){this.btnClothingEdit&&(this.btnClothingEdit.input.enabled=!0,this.btnClothingCheck.input.enabled=!0)},i.removeControls=function(){this.button.inputEnabled=!1,this.button.events.onInputDown.remove(this.handleInputDown,this)},i.reveal=function(){this.isCharFound=!0,this.playAnim("peer out"),this.game.add.tween(this.character).to({alpha:0},500,null,!0,1500),this.character2&&this.game.add.tween(this.character2).to({alpha:0},500,null,!0,1500),this.outfit&&this.game.add.tween(this.outfit).to({alpha:0},500,null,!0,1500);var t=new h.StarBurst(this.game,{x:0,y:.6*-this.height});this.addChild(t),this.game.sounds.playSFX("found",{spriteID:"sfx_gameplay",volume:.3})},i.jumpUp=function(){if("up"===this.slotRef.data.jump_up){var t=100*this.slotScale;this.game.add.tween(this.character).to({y:this.character.y-t},300,Phaser.Easing.QuadraticOut,!0),this.character2&&this.game.add.tween(this.character2).to({y:this.character2.y-t},300,Phaser.Easing.QuadraticOut,!0)}else"left"===this.slotRef.data.jump_up||this.slotRef.data.jump_up;this.playAnim("reveal")},i.update=function(){if(t.prototype.update.call(this),!this.isCharFound&&this.game.controller.gameMode===r.MODE_SEEK){var e=this.game.state.getCurrentState();if(e.gameStarted)if(this.worldPosition.x>50&&this.worldPosition.x<this.game.width-50){var i=Math.min(.1,this.game.time.elapsedMS/1e3);this.timeToWiggle-=i,this.timeToWiggle<0&&e.timeToWiggle<0&&(this.timeToWiggle=Phaser.Math.random(5.5,7),e.timeToWiggle=5,this.wiggle())}else this.timeToWiggle=Phaser.Math.random(5.5,7)}if(this.isDown){var s=Math.abs(this.pointer.x-this.startX),a=Math.abs(this.pointer.y-this.startY);Math.sqrt(s*s+a*a)>20&&this.pickUp()}},i.wiggle=function(){this.playAnim("wiggle",!1),this.game.time.events.add(1e3,this.onWiggleEnd,this);var t=Math.random()<.5?"giggle":"rustle";this.game.sounds.playSFX(t,{spriteID:"sfx_gameplay",volume:.5})},i.onWiggleEnd=function(){"wiggle"===this.currentAnim&&this.playAnim("hiding")},i.wearCloth=function(t,e){-1!==this.clothId&&this.clothSlotRef&&this.clothSlotRef.resetOutfit(),this.clothSlotRef=t,e.wearable?(this.clothId=e.id,this.character.setSkinByName(e.skin_name),this.character2&&this.character2.setSkinByName(e.skin_name)):(this.clothId=-1,this.character.setSkinByName(this.clothData.skin_name),this.character2&&this.character2.setSkinByName(this.clothData.skin_name));var i=this.character.skeleton.getRootBone(),s=i.scaleX,a=i.scaleY;this.character.setToSetupPose(),i.scaleX=s,i.scaleY=a,this.character2&&(s=(i=this.character2.skeleton.getRootBone()).scaleX,a=i.scaleY,this.character2.setToSetupPose(),i.scaleX=s,i.scaleY=a),this.updateTransform(),this.update(),this.slotRef.updateRating(),this.onWearClothes.dispatch()},i.destroy=function(){this.btnClothingCheck&&(this.btnClothingEdit.destroy(),this.btnClothingCheck.destroy()),this.outfit&&this.outfit.destroy(),this.character.destroy(),this.character2&&this.character2.destroy(),this.button.destroy(),this.btnClothingEdit=null,this.btnClothingCheck=null,this.outfit=null,this.character=null,this.character2=null,this.button=null,t.prototype.destroy.call(this)},(0,a.default)(e,[{key:"height",get:function(){var t=this.character.skeleton.getRootBone();return{ari:630,elinor:630,koa:630,mary:630,olive:630,tito:630,twins:630}[this.charData.id]*t.scaleY}}]),e}(Phaser.Group);e.default=d},qmnK:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("dD3M")),h=s(i("voi6")),r=function(t){function e(e,i,s){var n;(n=t.call(this,e)||this).onClose=new Phaser.Signal;var r=n.game.make.image(0,0,"bg_location_"+n.game.controller.location);n.addChild(r),n.elinor=new h.default(n.game),n.elinor.x=n.game.defaultWidth/2-300,n.elinor.y=n.game.defaultHeight,n.addChild(n.elinor);var l="btn_icon_"+i;n.btn=new o.default({game:n.game,up:l,over:l,atlas:"ui_player_mode"}),n.btn.x=n.game.defaultWidth/2,n.btn.y=360,n.addChild(n.btn),n.btn.onInputDown.add(n.handleTapButton,(0,a.default)(n)),n.btn.scale.set(0),n.game.add.tween(n.btn.scale).to({x:1,y:1},300,Phaser.Easing.Back.Out,!0);var d=n.game.make.image(-10,30,"ui_player_mode","icon_"+i);d.anchor.set(.5,1),d.scale.set(.8),n.btn.addChild(d);var c=n.game.make.text(0,5,s,{font:"60px Elinor",fill:"#FFFFFF"});c.anchor.set(.5,0),n.btn.addChild(c);var u=n.game.device.desktop?"ob_05_elinor_020_click":"ob_05_elinor_020_tap";return 1===s?n.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_027","ob_05_elinor_028",u],n.elinor):n.game.twoPlayersOnboarding.playVOs(["ob_05_elinor_018","ob_05_elinor_019",u],n.elinor),n}(0,n.default)(e,t);var i=e.prototype;return i.handleTapButton=function(){this.game.twoPlayersOnboarding.stopVO(),this.onClose.dispatch()},i.destroy=function(){this.elinor=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=r},r1nK:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=s(i("EapQ")),h=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).characterId=i,s.hidden=s.game.make.image(0,0,"ui_character_icons",s.characterId+"_seek"),s.hidden.anchor.set(.5),s.addChild(s.hidden),s.found=s.game.make.image(0,0,"ui_character_icons",s.characterId+"_found"),s.found.anchor.set(.5),s.addChild(s.found),s.found.visible=!1,s.isGoingUp=!1,s.hidden.inputEnabled=!0,s.hidden.input.useHandCursor=!0,s.hidden.events.onInputOver.add(s.handleInputOver,(0,a.default)(s)),s.hidden.events.onInputOut.add(s.handleInputOut,(0,a.default)(s)),s.hidden.events.onInputDown.add(s.handleInputDown,(0,a.default)(s)),s}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.game.state.getCurrentState().showClue(this.characterId),this.game.device.desktop||this.handleInputOut()},i.handleInputOver=function(){this.scale.set(1.1)},i.handleInputOut=function(){this.scale.set(1)},i.lock=function(){this.hidden.events.onInputDown.remove(this.handleInputDown,this)},i.unlock=function(){this.hidden.events.onInputDown.add(this.handleInputDown,this)},i.revealCharacter=function(){this.stopPulse(),this.scale.set(1),this.hidden.visible=!1,this.found.visible=!0,this.game.add.tween(this.scale).to({x:[1.2,1],y:[1.2,1]},400,Phaser.Easing.Back.Out,!0).onComplete.add(this.goUp,this),this.starBurst=new o.default(this.game),this.addChild(this.starBurst)},i.goUp=function(){this.game.add.tween(this).to({y:-200},300,Phaser.Easing.Back.In,!0,200),this.isGoingUp=!0},i.enlarge=function(){this.stopPulse(),this.game.add.tween(this.scale).to({x:1.2,y:1.2},200,Phaser.Easing.Back.Out,!0)},i.normalize=function(){this.stopPulse(),this.game.add.tween(this.scale).to({x:1,y:1},200,Phaser.Easing.Back.Out,!0)},i.pulse=function(t){this.pulseTween=this.game.add.tween(this.scale).to({x:[1.2,1],y:[1.2,1]},800,Phaser.Easing.BackOut,!0,0,t)},i.stopPulse=function(){this.pulseTween&&(this.pulseTween.stop(),this.pulseTween=!1)},i.update=function(){this.x===this.destX||this.isGoingUp||(this.x+=.2*(this.destX-this.x)),t.prototype.update.call(this)},i.destroy=function(){this.stopPulse(),this.hidden.destroy(),this.found.destroy(),this.hidden=null,this.found=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=h},ssJl:function(t,e,i){"use strict";var s=i("R6lU");i("GFHg"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("C9uT")),n=s(i("86MP")),o=i("zgbH"),h=function(t){function e(e){var i;return(i=t.call(this,e)||this).backing=i.game.make.graphics(),i.backing.beginFill(0,.2),i.backing.drawRoundedRect(0,0,200,20,10),i.addChild(i.backing),i.fill=i.game.make.graphics(),i.fill.beginFill(7822995),i.fill.drawRoundedRect(0,0,200,20,10),i.addChild(i.fill),i.masker=i.game.make.graphics(),i.masker.beginFill(16711680),i.masker.drawRect(0,0,200,20),i.addChild(i.masker),i.fill.mask=i.masker,i.copy=i.game.add.text(0,0,i.game.copy.getCopy("loading")+" 0%",{font:"47px "+o.FONT_REGULAR,fill:"#775e93",boundsAlignH:"center"}),i.copy.setTextBounds(-50,-90,300),i.addChild(i.copy),i.setProgress(0),i}(0,n.default)(e,t);var i=e.prototype;return i.tweenInCrystal=function(){},i.setProgress=function(t){this.masker.clear(),this.masker.beginFill(16711680),this.masker.drawRect(0,0,this.fill.width*t,20);var e=Math.round(100*t);this.copy.text=this.game.copy.getCopy("loading")+" "+e+"%"},i.setProcessing=function(){this.copy.text=this.game.copy.getCopy("processing")},i.destroy=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.copy.destroy(),this.backing.destroy(),this.fill.destroy(),this.masker.destroy(),this.backing=null,this.fill=null,this.masker=null,this.copy=null,t.prototype.destroy.call(this,e,i)},(0,a.default)(e,[{key:"width",get:function(){return this.backing.width}},{key:"height",get:function(){return this.backing.height}}]),e}(Phaser.Group);e.default=h},"t/rg":function(t,e,i){"use strict";var s=i("R6lU");i("wiMi"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=i("zgbH"),h=s(i("4+AI")),r=function(t){function e(e,i,s){var n;(n=t.call(this,e,0,0,"bg_result")||this).seekerId=i,n.onCloseResult=new Phaser.Signal,n.bgTop=n.game.make.image(.5*n.game.defaultWidth,0,"bg_welldone_top"),n.bgTop.anchor.set(.5,0),n.addChild(n.bgTop),n.bgBtm=n.game.make.image(.5*n.game.defaultWidth,n.game.defaultHeight,"bg_welldone_btm"),n.bgBtm.anchor.set(.5,1),n.addChild(n.bgBtm),(s=s.concat()).unshift({id:i}),n.addCharacters(s),n.inputEnabled=!0,n.events.onInputDown.addOnce(n.handleInputDown,(0,a.default)(n)),n.game.time.events.add(4e3,n.handleInputDown,(0,a.default)(n));return n.game.springRollCaptionsPlugin.setData(n.game.cache.getJSON("vo_ui_captions")),n.game.springRollCaptionsPlugin.playCaption("cs_10a_group_001"),n.game.sounds.playVO("cs_10a_group_001",{spriteID:"vo_ui"}),o.PLAYER_SINGLE,n}(0,n.default)(e,t);var i=e.prototype;return i.addCharacters=function(t){var e=t.length,i=.5*-(e-1)*165;this.charsGroup=this.game.make.group(),this.charsGroup.x=this.game.defaultWidth/2,this.charsGroup.y=540;for(var s=0;s<e;s++){var a=t[s].id,n=i+165*s,o=new h.default(this.game,n,0,a,s<e/2?"right":"left");o.playAnim("cheering",!0),this.charsGroup.addChild(o),"twins"===a&&(o.x+=40,(o=new h.default(this.game,n-40,0,"mary",s<e/2?"right":"left")).playAnim("cheering",!0),this.charsGroup.addChild(o))}this.addChild(this.charsGroup)},i.update=function(){this.charsGroup.update(),t.prototype.update.call(this)},i.handleInputDown=function(){this.events.onInputDown.remove(this.handleInputDown,this),this.game.springRollCaptionsPlugin.stopCaption(),this.game.sounds.stopAudioSprite("cs_10a_group_001",{spriteID:"vo_ui"}),this.onCloseResult.dispatch()},e}(Phaser.Image);e.default=r},tcTG:function(t,e,i){"use strict";var s=i("R6lU");i("j3Ef"),i("qnda"),i("XvIX"),i("ocEJ"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("LClc")),o=i("SPpy"),h=i("SPpy"),r=i("zgbH"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){e.unloadAssets(this.game),this.location=t.location,this.playerMode=t.playerMode,this.waitForDecodeSounds=!1},i.preload=function(){this.loadBar=new n.default(this.game),this.game.add.existing(this.loadBar),this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.loadAssets()},i.handleFileStart=function(t,i,s){if(-1!==i.indexOf("-audioatlas")&&this.audioSprites.push(i.replace("-audioatlas","")),!this.loadedAssets.find((function(t){return t.key===i}))){var a=this.game.load._fileList.find((function(t){return t.key===i}));e.LoadedAssets.push(a)}},i.handleLoadStart=function(){var t;(0,o.getGameFileLoadList)(this.game,this.debug),this.loadedAssets=this.game.load._fileList.filter((function(t){return"packfile"!==t.type})),(t=e.LoadedAssets).push.apply(t,this.loadedAssets)},i.loadAssets=function(){var t=this.game.cache.getJSON("loading_data")["location_"+this.location][this.playerMode];this.audioSprites=[];for(var e=t.packs,i=0;i<e.length;i++){var s=e[i];this.game.load.pack(s.key,s.path,null,this)}var a=t.cutscenes;if(a)for(var n=0;n<a.length;n++){var o=a[n],h=this.game.controller.cutscenes.getScene(o);this.loadCutsceneAssets(o,h)}var r=t.spine_anims;if(r)for(var l=0;l<r.length;l++){var d=r[l];this.game.load.spine(d,"spine/"+d+".json")}},i.loadCutsceneAssets=function(t,e){for(var i=this.game.urls.getCutscenePath(t),s=0;s<e.skeletons.length;s++){var a=e.skeletons[s],n=a;this.game.load.spine(n,i+"spine/"+a+".json")}e.onlyAnim||(this.game.load.json(t+"_captions",i+"captions.json"),i+="audio/64/"+t,this.game.load.audioSprite(t+"_vo",[i+".mp3"],i+".json"))},i.loadUpdate=function(){this.loadBar.setProgress(this.game.load.progress/100)},i.create=function(){var t=this;this.loadComplete=!0;for(var e=0;e<this.audioSprites.length;e++)this.game.cache.checkSoundKey(this.audioSprites[e])&&this.game.sounds.addAudioSprite({id:this.audioSprites[e]});this.game.sounds.decode(this.audioSprites,this.handleLoadComplete,this),this.decodeSoundsCallback=this.game.time.events.add(r.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()})),this.waitForDecodeSounds=!0},i.handleLoadComplete=function(){this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null);var t=this.game.controller.getTransition();t.onFadeEnd.addOnce(this.handleTransitionEnd,this),t.fadeIn()},i.handleTransitionEnd=function(){this.game.controller.startLocation()},i.shutdown=function(){this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this)},e}(Phaser.State);e.default=l,l.LoadedAssets=[],l.LoadedAssetPacks={},l.unloadAssets=function(t){l.LoadedAssets.forEach((function(e){(0,h.unloadFile)(t,e)}))}},v2oV:function(t,e,i){"use strict";var s=i("IfHf");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("zgbH")),n=i("TEuq"),o=function(){function t(t){this.game=t,this.rotateScreen=!1}return t.prototype.updateGameSize=function(t){if(this.game.scale){var e=t.width,i=t.height,s=1;i<a.GAME_SAFE_HEIGHT&&(s=i/a.GAME_SAFE_HEIGHT),e<a.GAME_SAFE_WIDTH&&s>e/a.GAME_SAFE_WIDTH&&(s=e/a.GAME_SAFE_WIDTH),e=e>this.game.defaultWidth?this.game.defaultWidth:Math.floor(e),i=i>this.game.defaultHeight?this.game.defaultHeight:Math.floor(i),e=Math.floor(e/s),i=Math.floor(i/s),e%2==1&&e++,n.Debugger.log("log","Display size",e,i,", scale is",s),this.game.screenPadding=.02*Math.max(e,i),this.game.scale.setGameSize(e,i),this.game.scale.setUserScale(s),this.game.offsetWidth=e/2-this.game.defaultWidth/2,this.game.offsetHeight=i/2-this.game.defaultHeight/2}},t}();e.default=o},vGYV:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ohYO");var n=i("TEuq"),o=a(i("a8kN")),h=a(i("LQdk")),r=a(i("GhOu")),l=a(i("m/lz")),d=s(i("zgbH"));i("DaKh");var c=i("vaxU");i("o+jM");o.default,h.default,r.default,window.PhaserGlobal={hideBanner:!0},document.getElementById(d.GAME_DIV_ID).className=d.GAME_DIV_CLASSNAME,n.Debugger.minLevel("GENERAL"),n.Debugger.enable(!1),n.Application.uses(new c.GoogleAnalytics);var u=new n.Application({features:{captions:!0,vo:!0,music:!0,sfx:!0}}),g=new l.default;u.state.ready.subscribe((function(t){t&&g.init(u)})),u.state.pause.subscribe((function(t){g.game&&g.pauseGame(t)})),u.state.captionsMuted.subscribe((function(t){g.game&&g.game.springRollCaptionsPlugin&&g.game.springRollCaptionsPlugin.setMute(t)})),u.state.soundVolume.subscribe((function(t){g.game&&g.game.sounds&&(g.game.sounds.soundVolume=t)})),u.state.voVolume.subscribe((function(t){g.game&&g.game.sounds&&(g.game.sounds.voVolume=t)})),u.state.musicVolume.subscribe((function(t){g.game&&g.game.sounds&&(g.game.sounds.musicVolume=t)})),u.state.sfxVolume.subscribe((function(t){g.game&&g.game.sounds&&(g.game.sounds.sfxVolume=t)}));var p=u;e.default=p},"vXl+":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("a/rO"),i("vw/H"),i("GPcm"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.StarBurst=void 0;var a=s(i("86MP")),n=function(t){function e(e,i){var s;(s=t.call(this,e)||this).costume=s.game.make.image(0,0,"ui_various","burst_star"),s.costume.anchor.set(.5),s.costume.scale.set(.4+.4*Math.random());var a=i||360*Math.random(),n=100+100*Math.random();return s.vx=n*Math.cos(a),s.vy=n*Math.sin(a),s.costume.angle=360*Math.random(),s.addChild(s.costume),s}(0,a.default)(e,t);var i=e.prototype;return i.update=function(){var t=this.game.time.elapsedMS/1e3;this.x+=this.vx*t,this.y+=this.vy*t,this.angle+=1;var e=Phaser.Math.distance(0,0,this.x,this.y);this.costume.scale.set(1.01*this.costume.scale.x,1.01*this.costume.scale.y),e>60&&this.alpha>.1?this.alpha+=8*(0-this.alpha)*t:e>60&&this.destroy(!0)},i.drawStar=function(t,e,i,s,a){var n=this.game.make.graphics(),o=Math.PI/2*3,h=t,r=e,l=Math.PI/i;n.beginFill(16773027,1),n.moveTo(t,e-s);for(var d=0;d<i;d++)h=t+Math.cos(o)*s,r=e+Math.sin(o)*s,n.lineTo(h,r),o+=l,h=t+Math.cos(o)*a,r=e+Math.sin(o)*a,n.lineTo(h,r),o+=l;return n.lineTo(t,e-s),n},e}(Phaser.Group),o=function(t){function e(e,i){var s,a=i.x,o=i.y;s=t.call(this,e,a,o)||this;for(var h=0;h<360;h+=30){var r=new n(e,h);s.addChild(r)}return s}(0,a.default)(e,t);var i=e.prototype;return i.update=function(){if(0===this.children.length)this.destroy();else{var t=this.children,e=Array.isArray(t),i=0;for(t=e?t:t[Symbol.iterator]();;){var s;if(e){if(i>=t.length)break;s=t[i++]}else{if((i=t.next()).done)break;s=i.value}s.update()}}},i.destroy=function(e){void 0===e&&(e=!0);var i=this.children,s=Array.isArray(i),a=0;for(i=s?i:i[Symbol.iterator]();;){var n;if(s){if(a>=i.length)break;n=i[a++]}else{if((a=i.next()).done)break;n=a.value}var o=n;o.destroy(!0),o=null}t.prototype.destroy.call(this,e)},e}(Phaser.Sprite);e.StarBurst=o},vle9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(){this.playerIcon1="",this.playerIcon2="",this.hidingPlayerId=0,this.isReplay=!1}var e=t.prototype;return e.changeHidingPlayer=function(){this.hidingPlayerId++,this.hidingPlayerId%=2},e.getHidingPlayerIcon=function(){return 0===this.hidingPlayerId?this.playerIcon1:this.playerIcon2},e.getSeekingPlayerIcon=function(){return 0===this.hidingPlayerId?this.playerIcon2:this.playerIcon1},t}();e.default=s},voi6:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=function(t){function e(e){var i;return(i=t.call(this,e)||this).char=i.game.make.spine(0,0,"elinor_talking_forward",!0),i.char.anchor.set(.5,1),i.char.setAnimationByName(0,"animation",!0),i.addChild(i.char),i.rb=i.char.skeleton.getRootBone(),i.scaleDefault=i.rb.scaleX,i.onClick=new Phaser.Signal,i.idle(),i}(0,a.default)(e,t);var i=e.prototype;return i.setScale=function(t){this.rb.scaleX=this.scaleDefault*t,this.rb.scaleY=this.rb.scaleX},i.idle=function(){this.char.setSkinByName("mouth/closed"),this.updatePose()},i.talk=function(){this.char.setSkinByName("mouth/talking"),this.updatePose()},i.updatePose=function(){var t=this.rb,e=t.scaleX,i=t.scaleY;this.char.setToSetupPose(),t.scaleX=e,t.scaleY=i},i.getRootBone=function(){return this.rb},i.enable=function(){this.char.inputEnabled=!0,this.char.input.useHandCursor=!0,this.char.events.onInputDown.add(this.handleInputDown,this)},i.disable=function(){this.char.inputEnabled=!1,this.char.input.useHandCursor=!1,this.char.events.onInputDown.remove(this.handleInputDown,this)},i.handleInputDown=function(){this.onClick.dispatch()},e}(Phaser.Group);e.default=n},wqsV:function(t,e,i){"use strict";i("a/rO"),i("/TzG"),i("vw/H"),i("388n"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={backspace:8,tab:9,enter:13,return:13,shift:16,"⇧":16,control:17,ctrl:17,"⌃":17,alt:18,option:18,"⌥":18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,L:37,"←":37,up:38,U:38,"↑":38,right:39,R:39,"→":39,down:40,D:40,"↓":40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"⌘":91,command:91,kp_0:96,kp_1:97,kp_2:98,kp_3:99,kp_4:100,kp_5:101,kp_6:102,kp_7:103,kp_8:104,kp_9:105,kp_multiply:106,kp_plus:107,kp_minus:109,kp_decimal:110,kp_divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,equal:187,"=":187,comma:188,",":188,minus:189,"-":189,period:190,".":190},a=function(){};function n(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]))}function o(t,e,i){t.removeEventListener(e,i)}function h(t){t.index=0}function r(t,e){var i=t.str,s=t.seq,a=t.keys,n=t.next,o=t.fail,r=t.done,l=t.index;e===a[l]?(t.index++,n(i,s[l],l,s),t.index===a.length&&(r(i),h(t))):l>0&&(h(t),o(i))}var l=function(){function t(t){var e,i,n,o,h,r,l,d,c,u,g=t.sequence,p=void 0===g?"↑ ↑ ↓ ↓ ← →":g,m=t.onComplete,f=t.onNext,v=t.onFail;this.touchCoords={startX:null,startY:null,endX:null,endY:null},this.bindedNext=this.next.bind(this),this.bindedFail=this.fail.bind(this),this.bindedComplete=this.complete.bind(this),this.bindedKeyDown=this.keydown.bind(this),this.bindedKeyUp=this.keyup.bind(this),this.bindedTouchStart=this.touchstart.bind(this),this.bindedTouchEnd=this.touchend.bind(this),this.touchEnabled="ontouchstart"in window,this.sequence=(e=p,i={done:m||this.bindedComplete,next:f||this.bindedNext,fail:v||this.bindedFail},n=i.done,o=void 0===n?a:n,h=i.next,r=void 0===h?a:h,l=i.fail,d=void 0===l?a:l,c=e.split(" "),u=c.map((function(t){return s[t]})),{index:0,str:e,next:r,fail:d,done:o,seq:c,keys:u}),this.enable()}var e=t.prototype;return e.enable=function(){n(window,"keydown",this.bindedKeyDown),n(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(n(window,"touchstart",this.bindedTouchStart),n(window,"touchend",this.bindedTouchEnd))},e.disable=function(){o(window,"keydown",this.bindedKeyDown),o(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(o(window,"touchstart",this.bindedTouchStart),o(window,"touchend",this.bindedTouchEnd))},e.destroy=function(){this.disable(),this.sequence=null},e.keydown=function(t){},e.keyup=function(t){r(this.sequence,t.keyCode)},e.touchstart=function(t){this.touchCoords.startX=t.touches[0].screenX,this.touchCoords.startY=t.touches[0].screenY},e.touchend=function(t){this.touchCoords.endX=t.changedTouches[0].screenX,this.touchCoords.endY=t.changedTouches[0].screenY,this.determineSwipeDirection(this.touchCoords)},e.determineSwipeDirection=function(t){var e=t.startX,i=t.startY,a=t.endX-e,n=t.endY-i,o=Math.abs(a),h=Math.abs(n);(Math.abs(a)>100||Math.abs(n)>100)&&(h>1.5*o?n>100?r(this.sequence,s.down):n<-100&&r(this.sequence,s.up):o>1.5*h&&(a>100?r(this.sequence,s.right):a<-100&&r(this.sequence,s.left)))},e.fail=function(t){},e.next=function(t,e,i,s){},e.complete=function(t){},t}();e.default=l},x1tP:function(t,e,i){"use strict";var s=i("IfHf"),a=i("R6lU");i("qnda"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("AxTc")),o=a(i("6R9f")),h=i("5mNR"),r=i("zgbH"),l=a(i("duvY")),d=s(i("gsGo")),c=a(i("G9dM")),u=a(i("PFbm")),g=function(){function t(t){this.game=t}var e=t.prototype;return e.init=function(t){this.gameData=t,this.cutscenes=new l.default(this.game.cache.getJSON("data_cutscenes")),this.onGamePaused=new Phaser.Signal,this.onGameResume=new Phaser.Signal,this.stateController=new o.default(this.game),this.seekerId="elinor",this.nextSeekerId="elinor",this.levelId=0,this.location=r.LOCATION_SUMMER,this.playerMode=r.PLAYER_SINGLE,this.gameMode=r.MODE_SEEK,this.player=null,this.twoPlayersModel=null,this.replays=0,this.shortcutsModel=new c.default,this.shortcuts=new d.ShortcutStub,this.startNewGame()},e.startBoot=function(){this.game.state.start(h.STATE_BOOT,!0,!0)},e.startLoad=function(){},e.reloadApp=function(){this.startBoot()},e.showWelcomeScreen=function(t){void 0===t&&(t=!1),this.shortcuts.reset(),this.game.paused&&this.resumeGame(),this.startState(h.STATE_WELCOME,{endOfLevel:t})},e.hasLevel=function(t){return this.gameData.location[this.location][this.playerMode].levels.reduce((function(e,i){return i.id===t||e}),!1)},e.scNextLevel=function(){return this.endLevel(),this.levelId},e.scLaunchLevel=function(t){var e=t.levelID;this.hasLevel(e)&&(this.levelId=e,this.initNewLevel(this.levelId),this.levelData.cutscene?this.startCutscene(this.levelData.cutscene):this.startLevel())},e.startNewGame=function(){this.setPlayer()},e.setPlayer=function(){this.player=new n.default},e.setLocation=function(t){var e=[r.LOCATION_SUMMER,r.LOCATION_AUTUMN,r.LOCATION_WINTER];this.location=e[t],this.locationInd=t},e.isNextLevelHiding=function(){var t=this.gameData.location[this.location][this.playerMode].levels;return this.levelId<t.length-1&&"hide"===t[this.levelId+1].mode},e.isFirstLevel=function(){return this.location===r.LOCATION_SUMMER&&0===this.levelId&&this.playerMode===r.PLAYER_SINGLE},e.getTransition=function(){return this.transition=new u.default(this.game),this.transition},e.startCutscene=function(t,e){void 0===e&&(e=!1),this.cutsceneId=t;var i=this.cutscenes.getScene(t);this.startState(h.STATE_CUTSCENE,{id:t,data:i,isEndScene:e})},e.getCutsceneData=function(t){return{id:t,captions:this.cutscenes.getCaptions(t),data:this.cutscenes.getScene(t)}},e.initNewLevel=function(t){this.shortcuts.showLevelSettings({level:t}),this.playerMode===r.PLAYER_TWO?t=0:(this.player.lastLevel[this.locationInd]=t,this.player.save()),this.levelId=t,this.levelData=this.gameData.location[this.location][this.playerMode].levels.find((function(e){return e.id===t})),this.gameMode="seek"===this.levelData.mode?r.MODE_SEEK:r.MODE_HIDE,this.playerMode===r.PLAYER_SINGLE?this.seekerId=this.levelData.seeker?this.levelData.seeker:this.nextSeekerId:this.setRandomSeeker()},e.setRandomSeeker=function(){var t=Math.floor(Math.random()*this.levelData.characters.length);this.seekerId=this.levelData.characters[t].id},e.startGame=function(){this.shortcuts.addLevelData({levelData:this.gameData.location[this.location][this.playerMode].levels}),this.loadLevel(this.player.getLastLevel(this.locationInd))},e.loadLevel=function(t){this.initNewLevel(t),this.startState(h.STATE_LOCATION_LOADER,{location:this.location,playerMode:this.playerMode})},e.startLocation=function(){this.replays=0;var t=this.player.getLastLevel(this.locationInd),e=0!==this.levelId||0===t;this.levelData.cutscene&&e?this.startCutscene(this.levelData.cutscene):this.startLevel()},e.startLevel=function(){this.playerMode===r.PLAYER_SINGLE?this.gameMode===r.MODE_SEEK?this.startState(h.STATE_LEVEL_SEEK,{levelData:this.levelData,seekerId:this.seekerId}):this.startState(h.STATE_LEVEL_HIDE,{levelData:this.levelData,seekerId:this.seekerId}):this.startState(h.STATE_TWO_PLAYERS_SETUP,{levelData:this.levelData,seekerId:this.seekerId})},e.startState=function(t,e){this.game.controller.stateController.startState({nextState:t,nextStateParams:[!0,!1,e]})},e.endCutscene=function(t){t?2===this.locationInd?this.showWelcomeScreen(!1):this.nextLevel():this.startLevel()},e.endLevel=function(){this.replays=0,this.levelData.cutscene_end&&!this.game.controller.player.wasCutsceneDisplayed(this.levelData.cutscene_end)?this.startCutscene(this.levelData.cutscene_end,!0):this.nextLevel()},e.nextLevel=function(){this.replays=0;var t=this.gameData.location[this.location][this.playerMode].levels;this.levelId<t.length-1?(this.levelId++,this.initNewLevel(this.levelId),this.levelData.cutscene?this.startCutscene(this.levelData.cutscene):this.startLevel()):this.locationInd+1===this.player.unlockedLocations&&this.player.unlockedLocations<3?(this.player.lastLevel[this.locationInd]=this.levelId-1,this.player.unlockedLocations++,this.player.save(),this.setLocation(this.locationInd+1),this.startGame()):(this.levelId--,this.initNewLevel(this.levelId),this.startLevel())},e.replayLevel=function(){this.replays++,this.startLevel()},e.replayTwoPlayers=function(){this.twoPlayersModel.hidingPlayerId=0,this.twoPlayersModel.isReplay=!0,this.seekerId=this.twoPlayersModel.getSeekingPlayerIcon(),this.startState(h.STATE_LEVEL_TWO_PLAYERS,{levelData:this.levelData,seekerId:this.seekerId})},e.pauseGame=function(){this.game.paused||(this.onGamePaused.dispatch(),this.game.paused=!0,this.game.sounds.pauseAll())},e.resumeGame=function(){this.game.paused&&(this.onGameResume.dispatch(),this.game.paused=!1,this.game.sounds.resumeAll())},t}();e.default=g},xJv3:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("86MP")),n=s(i("7xLJ")),o=function(t){function e(e,i,s,a){var o;(o=t.call(this,e)||this).onEnd=new Phaser.Signal;var h=o.game.make.image(0,0,"bg_location_"+o.game.controller.location);o.addChild(h),o.icon=new n.default(o.game,0,165,s,i),o.icon.x=o.game.defaultWidth/2,o.addChild(o.icon);for(var r=a.length,l=o.game.defaultWidth/2-.5*(r-1)*200,d=0;d<r;d++){var c=l+200*d,u=o.game.make.spine(c,610,a[d].id,!0);u.anchor.set(.5,1),u.setAnimationByName(0,"idle",!0),u.setSkinByName("base"),o.addChild(u),u.skeleton.getRootBone().scaleX=-.4,u.skeleton.getRootBone().scaleY=.4,"twins"===a[d].id&&(u.x+=40,(u=o.game.make.spine(c-40,610,"mary",!0)).anchor.set(.5,1),u.setAnimationByName(0,"idle",!0),u.setSkinByName("base"),o.addChild(u),u.skeleton.getRootBone().scaleX=-.4,u.skeleton.getRootBone().scaleY=.4)}return o.updateTransform(),o.update(),o.playVOs(s,a),o}(0,a.default)(e,t);var i=e.prototype;return i.playVOs=function(t,e){var i=e.length,s=[];s=1===t?this.game.controller.twoPlayersModel.isReplay?["ob_05_elinor_023_alt","ob_05_elinor_011"]:["ob_05_elinor_010","ob_05_elinor_011"]:["ob_05_elinor_011"];for(var a=0;a<i;a++)s.push("ob_05_elinor_"+e[a].id);this.game.twoPlayersOnboarding.playVOs(s),this.game.twoPlayersOnboarding.onEnd.addOnce(this.handleOnboardingEnd,this)},i.handleOnboardingEnd=function(){this.game.time.events.add(500,this.close,this)},i.close=function(){this.onEnd.dispatch()},e}(Phaser.Group);e.default=o},yIt9:function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=s(i("M1I4")),n=s(i("86MP")),o=function(t){function e(i,s,n,o,h,r,l){var d;return(d=t.call(this,i,s,n)||this).characterId=o,d.slotRef=h,d.clothSlotRef=r,d.clothId=l,d.character=d.game.make.spine(0,0,o,!0),d.character.setAnimationByName(0,"picked up",!0),d.character.skeleton.getRootBone().scaleX=.4,d.character.skeleton.getRootBone().scaleY=.4,d.character.anchor.set(.5,.8),d.addChild(d.character),d.update(),d.updateTransform(),d.clothId>-1?d.wearCloth():d.character.setSkinByName("base"),d.inputEnabled=!0,d.input.enabled=!0,d.game.input.onUp.add(d.onReleaseMe,(0,a.default)(d)),d.checkWorldBounds=!0,"twins"===o&&(d.twin=new e(d.game,50,0,"mary",null,null,l),d.twin.inputEnabled=!1,d.addChild(d.twin)),d}(0,n.default)(e,t);var i=e.prototype;return i.startDrag=function(t){this.pointer=t,this.isDragging=!0,this.dx=this.x+this.parent.x-t.x,this.dy=this.y+this.parent.y-t.y},i.onReleaseMe=function(t){this.pointer===t&&(this.input.enabled=!1,this.input.disableDrag(),this.game.input.onUp.remove(this.onReleaseMe,this),this.game.state.getCurrentState().stopDragCharacter(this),this.destroy())},i.update=function(){if(this.isDragging){var e=this.game.input.position;this.x=e.x+this.dx-this.parent.x,this.y=e.y+this.dy-this.parent.y}this.character.update(),this.twin&&this.twin.update(),t.prototype.update.call(this),this.isDragging&&this.pointer&&!this.pointer.withinGame&&this.onReleaseMe(this.pointer)},i.wearCloth=function(){var t=this,e=this.game.controller.gameData.clothes.find((function(e){return e.id===t.clothId}));if(e&&e.wearable){this.character.setSkinByName(e.skin_name);var i=this.character.skeleton.getRootBone(),s=i.scaleX,a=i.scaleY;this.character.setToSetupPose(),i.scaleX=s,i.scaleY=a,this.updateTransform(),this.update()}},i.destroy=function(){this.twin=null,t.prototype.destroy.call(this)},e}(Phaser.Image);e.default=o},zgbH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GA_LABEL_STAR_3=e.GA_LABEL_STAR_2=e.GA_LABEL_STAR_1=e.GA_LABEL_PLAYER_2=e.GA_LABEL_PLAYER_1=e.GA_TRACKING_CATEGORY=e.FONT_SUBTITLE_SIZE=e.FONT_SUBTITLE_CSS=e.FONT_SUBTITLE=e.FONT_COPY_CSS=e.FONT_COPY=e.FONT_TITLE=e.FONT_CSS=e.FONT_ITALIC=e.FONT_LIGHT=e.FONT_REGULAR=e.FONT_EXTRA_BOLD=e.FONT_BOLD_ITALIC=e.FONT_BOLD=e.PATH_ASSETS=e.PATH_BASE=e.SAVED_PLAYER_DATA_PREFIX=e.SAVED_PLAYER_DATA_ID=e.GAME_DIV_CLASSNAME=e.GAME_DIV_ID=e.LOCATION_WINTER=e.LOCATION_AUTUMN=e.LOCATION_SUMMER=e.PLAYER_TWO=e.PLAYER_SINGLE=e.MODE_SEEK=e.MODE_HIDE=e.MODE_TUTORIAL=e.DECODE_TIMEOUT_SPEED=e.GAME_BACKGROUND_COLOR=e.GAME_SAFE_HEIGHT=e.GAME_SAFE_WIDTH=e.GAME_HEIGHT_DEFAULT=e.GAME_WIDTH_DEFAULT=void 0;e.GAME_WIDTH_DEFAULT=1680;e.GAME_HEIGHT_DEFAULT=720;e.GAME_SAFE_WIDTH=1024;e.GAME_SAFE_HEIGHT=720;e.GAME_BACKGROUND_COLOR="0xFFFFFF";e.DECODE_TIMEOUT_SPEED=3e3;e.MODE_TUTORIAL="MODE_TUTORIAL";e.MODE_HIDE="MODE_HIDE";e.MODE_SEEK="MODE_SEEK";e.PLAYER_SINGLE="single_player";e.PLAYER_TWO="two_players";e.LOCATION_SUMMER="summer";e.LOCATION_AUTUMN="autumn";e.LOCATION_WINTER="winter";e.GAME_DIV_ID="gameContent";e.GAME_DIV_CLASSNAME="canvas_container absolute_center page_background trap";e.SAVED_PLAYER_DATA_ID="ewwhide";e.SAVED_PLAYER_DATA_PREFIX="playersave_";e.PATH_BASE="./";e.PATH_ASSETS="assets/";e.FONT_BOLD="Elinor";e.FONT_BOLD_ITALIC="Elinor";e.FONT_EXTRA_BOLD="Elinor";e.FONT_REGULAR="Elinor";e.FONT_LIGHT="Elinor";e.FONT_ITALIC="Elinor";e.FONT_CSS="stylesheet.css";e.FONT_TITLE="Elinor";e.FONT_COPY="Elinor";e.FONT_COPY_CSS="stylesheet.css";e.FONT_SUBTITLE="Elinor";e.FONT_SUBTITLE_CSS="stylesheet.css";e.FONT_SUBTITLE_SIZE="32";e.GA_TRACKING_CATEGORY="Game_Elinor Hide And Seek";e.GA_LABEL_PLAYER_1="One Player";e.GA_LABEL_PLAYER_2="Two Player";e.GA_LABEL_STAR_1="One Star";e.GA_LABEL_STAR_2="Two Stars";e.GA_LABEL_STAR_3="Three Stars"}},[[0,2,1]]]);
//# sourceMappingURL=../sourcemaps/js/main.5c1cad06.js.map