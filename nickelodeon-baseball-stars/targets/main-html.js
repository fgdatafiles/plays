/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function k(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function ql(a){return a instanceof Array?function(){return M.iter(a)}:"function"==typeof a.iterator?l(a,a.iterator):a.iterator}function l(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=lm++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var g={},p=function(){return X.__string_rec(this,"")},Pb=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};g.EReg=Pb;Pb.__name__=["EReg"];Pb.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},replace:function(a,b){return a.replace(this.r,b)},__class__:Pb};var M=function(){};g.HxOverrides=M;M.__name__=["HxOverrides"];M.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),h=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>h?"0"+h:""+h)};M.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);
b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};M.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};M.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,
c)};M.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};M.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var af=function(){};g.Lambda=af;af.__name__=["Lambda"];af.array=function(a){for(var b=[],a=ql(a)();a.hasNext();){var c=a.next();b.push(c)}return b};af.exists=function(a,b){for(var c=ql(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};af.count=function(a,b){var c=0;
if(null==b)for(var d=ql(a)();d.hasNext();)d.next(),c++;else for(d=ql(a)();d.hasNext();){var e=d.next();b(e)&&c++}return c};var pe=function(){this.length=0};g.List=pe;pe.__name__=["List"];pe.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return{h:this.h,
hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:pe};var Hf=function(){};g.IMap=Hf;Hf.__name__=["IMap"];Hf.prototype={__class__:Hf};Math.__name__=["Math"];var y=function(){};g.Reflect=y;y.__name__=["Reflect"];y.field=function(a,b){try{return a[b]}catch(c){return null}};y.setField=function(a,b,c){a[b]=c};y.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():
a[b]};y.setProperty=function(a,b,c){var d;if(a.__properties__&&(d=a.__properties__["set_"+b]))a[d](c);else a[b]=c};y.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};y.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};y.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return!1;delete a[b];return!0};var q=function(){};g.Std=q;q.__name__=["Std"];
q.is=function(a,b){return X.__instanceof(a,b)};q.instance=function(a,b){return a instanceof b?a:null};q.string=function(a){return X.__string_rec(a,"")};q["int"]=function(a){return a|0};q.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==M.cca(a,1)||88==M.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};q.parseFloat=function(a){return parseFloat(a)};var qe=function(){this.b=""};g.StringBuf=qe;qe.__name__=["StringBuf"];qe.prototype={add:function(a){this.b+=q.string(a)},addSub:function(a,b,c){this.b=
null==c?this.b+M.substr(a,b,null):this.b+M.substr(a,b,c)},__class__:qe};var ja=function(){};g.StringTools=ja;ja.__name__=["StringTools"];ja.startsWith=function(a,b){return a.length>=b.length&&M.substr(a,0,b.length)==b};ja.isSpace=function(a,b){var c=M.cca(a,b);return 8<c&&14>c||32==c};ja.ltrim=function(a){for(var b=a.length,c=0;c<b&&ja.isSpace(a,c);)c++;return 0<c?M.substr(a,c,b-c):a};ja.rtrim=function(a){for(var b=a.length,c=0;c<b&&ja.isSpace(a,b-c-1);)c++;return 0<c?M.substr(a,0,b-c):a};ja.trim=
function(a){return ja.ltrim(ja.rtrim(a))};ja.lpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a=b+a;return a};ja.replace=function(a,b,c){return a.split(b).join(c)};ja.fastCodeAt=function(a,b){return a.charCodeAt(b)};var N=g.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};N.TNull=["TNull",0];N.TNull.toString=p;N.TNull.__enum__=N;N.TInt=["TInt",1];N.TInt.toString=p;N.TInt.__enum__=N;N.TFloat=["TFloat",2];N.TFloat.toString=
p;N.TFloat.__enum__=N;N.TBool=["TBool",3];N.TBool.toString=p;N.TBool.__enum__=N;N.TObject=["TObject",4];N.TObject.toString=p;N.TObject.__enum__=N;N.TFunction=["TFunction",5];N.TFunction.toString=p;N.TFunction.__enum__=N;N.TClass=function(a){a=["TClass",6,a];a.__enum__=N;a.toString=p;return a};N.TEnum=function(a){a=["TEnum",7,a];a.__enum__=N;a.toString=p;return a};N.TUnknown=["TUnknown",8];N.TUnknown.toString=p;N.TUnknown.__enum__=N;var ca=function(){};g.Type=ca;ca.__name__=["Type"];ca.getClass=function(a){return null==
a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};ca.getClassName=function(a){return a.__name__.join(".")};ca.getEnumName=function(a){return a.__ename__.join(".")};ca.resolveClass=function(a){a=g[a];return null==a||!a.__name__?null:a};ca.resolveEnum=function(a){a=g[a];return null==a||!a.__ename__?null:a};ca.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};ca.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};ca.createEnum=function(a,b,c){var d=y.field(a,b);if(null==d)throw"No such constructor "+b;if(y.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";
return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d};ca.getEnumConstructs=function(a){return a.__constructs__.slice()};ca["typeof"]=function(a){switch(typeof a){case "boolean":return N.TBool;case "string":return N.TClass(String);case "number":return Math.ceil(a)==a%2147483648?N.TInt:N.TFloat;case "object":if(null==a)return N.TNull;var b=a.__enum__;if(null!=b)return N.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?
N.TClass(a):N.TObject;case "function":return a.__name__||a.__ename__?N.TObject:N.TFunction;case "undefined":return N.TNull;default:return N.TUnknown}};ca.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;c<d;){var e=c++;if(!ca.enumEq(a[e],b[e]))return!1}var h=a.__enum__;if(h!=b.__enum__||null==h)return!1}catch(n){return!1}return!0};ca.enumIndex=function(a){return a[1]};g.XmlType={__ename__:["XmlType"],__constructs__:[]};var S=function(){};g.Xml=S;S.__name__=["Xml"];
S.parse=function(a){return Hd.parse(a)};S.createElement=function(a){var b=new S;b.nodeType=S.Element;b._children=[];b._attributes=new C;b.set_nodeName(a);return b};S.createPCData=function(a){var b=new S;b.nodeType=S.PCData;b.set_nodeValue(a);return b};S.createCData=function(a){var b=new S;b.nodeType=S.CData;b.set_nodeValue(a);return b};S.createComment=function(a){var b=new S;b.nodeType=S.Comment;b.set_nodeValue(a);return b};S.createDocType=function(a){var b=new S;b.nodeType=S.DocType;b.set_nodeValue(a);
return b};S.createProcessingInstruction=function(a){var b=new S;b.nodeType=S.ProcessingInstruction;b.set_nodeValue(a);return b};S.createDocument=function(){var a=new S;a.nodeType=S.Document;a._children=[];return a};S.prototype={get_nodeName:function(){if(this.nodeType!=S.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=S.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==S.Element||this.nodeType==S.Document)throw"bad nodeType";
return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==S.Element||this.nodeType==S.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=S.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,b){if(this.nodeType!=S.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=S.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==this._children)throw"bad nodetype";
return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==S.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==S.Element)return this.cur=a,c}return null}}},elementsNamed:function(a){if(null==
this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==S.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==S.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];
if(c.nodeType==S.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&M.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:S,__properties__:{set_nodeValue:"set_nodeValue",get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var gc=function(){};g["flambe.util.Disposable"]=gc;gc.__name__=["flambe","util","Disposable"];gc.prototype={__class__:gc};var j=function(){this._flags=
0;this.owner=this.next=null};g["flambe.Component"]=j;j.__name__=["flambe","Component"];j.__interfaces__=[gc];j.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&this.owner.remove(this)},get_name:function(){return null},__class__:j,__properties__:{get_name:"get_name"}};var bb=function(){j.call(this);this._disposables=[]};g["flambe.Disposer"]=bb;bb.__name__=["flambe","Disposer"];bb.__super__=j;bb.prototype=
k(j.prototype,{get_name:function(){return"Disposer_34"},add:function(a){this._disposables.push(a);return this},connect0:function(a,b){this.add(a.connect(b));return this},connect1:function(a,b){this.add(a.connect(b));return this},onRemoved:function(){this.freeDisposables()},dispose:function(){j.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:bb});var o=function(){this.parent=
this.firstChild=this.next=this.firstComponent=null;this._compMap={}};g["flambe.Entity"]=o;o.__name__=["flambe","Entity"];o.__interfaces__=[gc];o.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=
c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},getComponent:function(a){return this._compMap[a]},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},
removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},_internal_getFromParents:function(a,b){var c=this;do{var d=c._compMap[a];null!=b&&!(d instanceof b)&&
(d=null);if(null!=d)return d;c=c.parent}while(null!=c);return null},_internal_getFromChildren:function(a,b){var c=this._compMap[a];null!=b&&!(c instanceof b)&&(c=null);if(null!=c)return c;for(c=this.firstChild;null!=c;){var d=c._internal_getFromChildren(a,b);if(null!=d)return d;c=c.next}return null},__class__:o};var rl=function(){};g["flambe.util.PackageLog"]=rl;rl.__name__=["flambe","util","PackageLog"];var ek=function(){};g["flambe.platform.Platform"]=ek;ek.__name__=["flambe","platform","Platform"];
ek.prototype={__class__:ek};var cd=function(){};g["flambe.platform.html.HtmlPlatform"]=cd;cd.__name__=["flambe","platform","html","HtmlPlatform"];cd.__interfaces__=[ek];cd.prototype={init:function(){var a=this;oa.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new If(b);this._pointer=new sb;this._mouse=new Mg(this._pointer,b);this._renderer=
this.createRenderer(b);this.mainLoop=new bf;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),h=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(h,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(h,e);
break;case "mouseup":a._mouse.submitUp(h,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(h,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h="undefined"!=typeof window.ontouchstart,
e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(h||e){var n=new Ng(this._pointer,h?4:window.navigator.msMaxTouchPoints);this._touch=n;e=function(b){var c;c=h?b.changedTouches:[b];var e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();oa.SHOULD_HIDE_MOBILE_BROWSER&&oa.hideMobileBrowser();for(b=0;b<c.length;){var f=c[b];++b;var fk=a.getX(f,e),da=a.getY(f,e);n.submitDown((h?f.identifier:
f.pointerId)|0,fk,da)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)f=c[b],++b,fk=a.getX(f,e),da=a.getY(f,e),n.submitMove((h?f.identifier:f.pointerId)|0,fk,da);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)f=c[b],++b,fk=a.getX(f,e),da=a.getY(f,e),n.submitUp((h?f.identifier:f.pointerId)|0,fk,da)}};h?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",
e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Og;var f=window.onerror;window.onerror=function(a,b,c){u.uncaughtError.emit(a);return null!=f?f(a,b,c):!1};var da=oa.loadExtension("hidden",window.document);null!=da.value?(e=function(){u.hidden.set__(y.field(window.document,da.field))},e(null),window.document.addEventListener(da.prefix+"visibilitychange",e,!1)):
(e=function(a){u.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));u.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var g=oa.loadExtension("requestAnimationFrame").value;if(null!=g){var i=window.performance,j=null!=i&&oa.polyfill("now",i);j?this._lastUpdate=i.now():null;var k=null,k=function(c){a.update(j?i.now():c);g(k,b)};g(k,b)}else window.setInterval(function(){a.update(Date.now())},
16);Jf.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new ua(this,a)).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var a=Pg.getLocalStorage();this._storage=null!=a?new Qg(a):new Rg}return this._storage},getLocale:function(){var a=window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},getTime:function(){return Date.now()/1E3},update:function(a){var b=(a-this._lastUpdate)/
1E3;this._lastUpdate=a;u.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=new dd;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};
this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getWeb:function(){null==this._web&&(this._web=new Sg(this._container));return this._web},getExternal:function(){null==this._external&&(this._external=new Tg);return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=
sl.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(oa.detectSlowDriver(b))null;else return new Ug(this._stage,b)}catch(c){}return new cf(a)},__class__:cd};var Na=function(a,b){this._value=a;this._changed=null!=b?new gb(b):null};g["flambe.util.Value"]=Na;Na.__name__=["flambe","util","Value"];Na.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},get__:function(){return this._value},set__:function(a){var b=this._value;a!=
b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new gb);return this._changed},toString:function(){return""+q.string(this._value)},__class__:Na,__properties__:{get_changed:"get_changed",set__:"set__",get__:"get__"}};var df=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};g["flambe.util.SignalConnection"]=df;df.__name__=["flambe","util","SignalConnection"];df.__interfaces__=[gc];df.prototype=
{once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:df};var tb=function(a){this._head=null!=a?new df(this,a):null;this._deferredTasks=null};g["flambe.util.SignalBase"]=tb;tb.__name__=["flambe","util","SignalBase"];tb.prototype={connectImpl:function(a,b){var c=this,d=new df(this,a);this._head==tb.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=
this;this._head==tb.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new gk(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=tb.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,
d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:tb};var gb=function(a){tb.call(this,a)};g["flambe.util.Signal2"]=gb;gb.__name__=["flambe","util","Signal2"];gb.__super__=tb;gb.prototype=k(tb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==tb.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,
b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:gb});var T=function(a){tb.call(this,a)};g["flambe.util.Signal1"]=T;T.__name__=["flambe","util","Signal1"];T.__super__=tb;T.prototype=k(tb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==tb.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},
emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:T});var Q=function(a,b){this._behavior=null;Na.call(this,a,b)};g["flambe.animation.AnimatedFloat"]=Q;Q.__name__=["flambe","animation","AnimatedFloat"];Q.__super__=Na;Q.prototype=k(Na.prototype,{set__:function(a){this._behavior=null;return Na.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(Na.prototype.set__.call(this,this._behavior.update(a)),
this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,b,c){this.set_behavior(new He(this._value,a,b,c))},animateBy:function(a,b,c){this.set_behavior(new He(this._value,this._value+a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:Q,__properties__:k(Na.prototype.__properties__,{set_behavior:"set_behavior"})});var u=function(){};g["flambe.System"]=u;u.__name__=["flambe","System"];u.init=function(){u._calledInit||(u._platform.init(),u._calledInit=
!0)};var Jf=function(){};g["flambe.Log"]=Jf;Jf.__name__=["flambe","Log"];Jf.info=function(){null};Jf.__super__=rl;Jf.prototype=k(rl.prototype,{__class__:Jf});var ef=function(a){null==a&&(a=1);this._realDt=0;j.call(this);this.scale=new Q(a)};g["flambe.SpeedAdjuster"]=ef;ef.__name__=["flambe","SpeedAdjuster"];ef.__super__=j;ef.prototype=k(j.prototype,{get_name:function(){return"SpeedAdjuster_29"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:ef});
var Ie=function(){};g["flambe.animation.Behavior"]=Ie;Ie.__name__=["flambe","animation","Behavior"];Ie.prototype={__class__:Ie};var D=function(){};g["flambe.animation.Ease"]=D;D.__name__=["flambe","animation","Ease"];D.linear=function(a){return a};D.quadIn=function(a){return a*a};D.quadOut=function(a){return a*(2-a)};D.quadInOut=function(a){return 0.5>=a?2*a*a:1-2*--a*a};D.quintIn=function(a){return a*a*a*a*a};D.quintOut=function(a){return(a-=1)*a*a*a*a+1};D.quintInOut=function(a){return 1>(a*=2)?
a*a*a*a*a/2:((a-=2)*a*a*a*a+2)/2};D.sineInOut=function(a){return 0.5-Math.cos(3.141592653589793*a)/2};D.bounceInOut=function(a){if(0.5>a)return a=1-2*a,0.36363636363636365>a?(1-7.5625*a*a)/2:0.7272727272727273>a?(1-(7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75))/2:0.9090909090909091>a?(1-(7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375))/2:(1-(7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375))/2;a=2*a-1;return 0.36363636363636365>a?7.5625*a*a/2+0.5:0.7272727272727273>
a?(7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75)/2+0.5:0.9090909090909091>a?(7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375)/2+0.5:(7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375)/2+0.5};D.expoOut=function(a){return-Math.pow(2,-10*a)+1};D.backIn=function(a){return a*a*(2.70158*a-1.70158)};D.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)};D.backInOut=function(a){a*=2;if(1>a)return a*a*(2.70158*a-1.70158)/2;a-=2;return(1-a*a*(-2.70158*a-1.70158))/2+
0.5};D.elasticOut=function(a){return 1*Math.pow(2,-10*a)*Math.sin(6.283185307179586*(a-0.06366197723675814*Math.asin(1))/0.4)+1};var Kf=function(a,b){this.base=a;this.strength=b};g["flambe.animation.Jitter"]=Kf;Kf.__name__=["flambe","animation","Jitter"];Kf.__interfaces__=[Ie];Kf.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:Kf};var Qc=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=1);this.start=
a;this.end=b;this.cycles=d;this.speed=new Q(c);this._count=1.5707963267948966+e*(3.141592653589793/c);this._distance=0.5*(a-b);this._center=b+this._distance};g["flambe.animation.Sine"]=Qc;Qc.__name__=["flambe","animation","Sine"];Qc.__interfaces__=[Ie];Qc.prototype={update:function(a){this.speed.update(a);this._count+=a*(3.141592653589793/this.speed._value);return this._center+Math.sin(this._count)*this._distance},isComplete:function(){return 0<this.cycles&&0.5*((this._count-1.5707963267948966)/3.141592653589793)>=
this.cycles},__class__:Qc};var He=function(a,b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:D.linear};g["flambe.animation.Tween"]=He;He.__name__=["flambe","animation","Tween"];He.__interfaces__=[Ie];He.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:He};var Je=function(){};
g["flambe.asset.Asset"]=Je;Je.__name__=["flambe","asset","Asset"];Je.__interfaces__=[gc];Je.prototype={__class__:Je};var L=g["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};L.WEBP=["WEBP",0];L.WEBP.toString=p;L.WEBP.__enum__=L;L.JXR=["JXR",1];L.JXR.toString=p;L.JXR.__enum__=L;L.PNG=["PNG",2];L.PNG.toString=p;L.PNG.__enum__=L;L.JPG=["JPG",3];L.JPG.toString=p;L.JPG.__enum__=L;L.GIF=["GIF",
4];L.GIF.toString=p;L.GIF.__enum__=L;L.DDS=["DDS",5];L.DDS.toString=p;L.DDS.__enum__=L;L.PVR=["PVR",6];L.PVR.toString=p;L.PVR.__enum__=L;L.PKM=["PKM",7];L.PKM.toString=p;L.PKM.__enum__=L;L.MP3=["MP3",8];L.MP3.toString=p;L.MP3.__enum__=L;L.M4A=["M4A",9];L.M4A.toString=p;L.M4A.__enum__=L;L.OPUS=["OPUS",10];L.OPUS.toString=p;L.OPUS.__enum__=L;L.OGG=["OGG",11];L.OGG.toString=p;L.OGG.__enum__=L;L.WAV=["WAV",12];L.WAV.toString=p;L.WAV.__enum__=L;L.Data=["Data",13];L.Data.toString=p;L.Data.__enum__=L;var hk=
function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};g["flambe.asset.AssetEntry"]=hk;hk.__name__=["flambe","asset","AssetEntry"];hk.prototype={__class__:hk};var Vg=function(){};g["flambe.asset.AssetPack"]=Vg;Vg.__name__=["flambe","asset","AssetPack"];Vg.__interfaces__=[gc];Vg.prototype={__class__:Vg};var Wg=function(){};g["flambe.asset.File"]=Wg;Wg.__name__=["flambe","asset","File"];Wg.__interfaces__=[Je];Wg.prototype={__class__:Wg};var Qa=function(){this._localBase=this._remoteBase=
null;this._entries=[]};g["flambe.asset.Manifest"]=Qa;Qa.__name__=["flambe","asset","Manifest"];Qa.fromAssets=function(a,b){null==b&&(b=!0);var c=y.field(ik.getType(Qa).assets[0],a);if(null==c){if(b)throw ka.withFields("Missing asset pack",["name",a]);return null}var d=new Qa;d.set_localBase("assets");for(var e=0;e<c.length;){var h=c[e];++e;var n=h.name,f=a+"/"+n+"?v="+q.string(h.md5),da=Qa.inferFormat(n);da!=L.Data&&(n=ka.removeFileExtension(n));d.add(n,f,h.bytes,da)}return d};Qa.fromAssetsLocalized=
function(a,b,c){null==c&&(c=!0);null==b&&(b=u._platform.getLocale());if(null!=b)for(b=b.split("-");0<b.length;){var d=Qa.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return Qa.fromAssets(a,c)};Qa.exists=function(a){return Object.prototype.hasOwnProperty.call(ik.getType(Qa).assets[0],a)};Qa.inferFormat=function(a){a=ka.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return L.GIF;case "jpg":case "jpeg":return L.JPG;case "jxr":case "wdp":return L.JXR;case "png":return L.PNG;
case "webp":return L.WEBP;case "dds":return L.DDS;case "pvr":return L.PVR;case "pkm":return L.PKM;case "m4a":return L.M4A;case "mp3":return L.MP3;case "ogg":return L.OGG;case "opus":return L.OPUS;case "wav":return L.WAV}else null;return L.Data};Qa.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=Qa.inferFormat(b));a=new hk(a,b,d,c);this._entries.push(a);return a},iterator:function(){return M.iter(this._entries)},getFullURL:function(a){var b;b=null!=this.get_remoteBase()&&Qa._supportsCrossOrigin?
this.get_remoteBase():this.get_localBase();return null!=b?ka.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&jk.that(!ja.startsWith(a,"http://")&&!ja.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&jk.that(ja.startsWith(a,"http://")||ja.startsWith(a,"https://"),"remoteBase must be on a remote domain, starting with http(s)://",
null);return this._remoteBase=a},__class__:Qa,__properties__:{set_remoteBase:"set_remoteBase",get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var Ca=g["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};Ca.Normal=["Normal",0];Ca.Normal.toString=p;Ca.Normal.__enum__=Ca;Ca.Add=["Add",1];Ca.Add.toString=p;Ca.Add.__enum__=Ca;Ca.Multiply=["Multiply",2];Ca.Multiply.toString=
p;Ca.Multiply.__enum__=Ca;Ca.Screen=["Screen",3];Ca.Screen.toString=p;Ca.Screen.__enum__=Ca;Ca.Mask=["Mask",4];Ca.Mask.toString=p;Ca.Mask.__enum__=Ca;Ca.Copy=["Copy",5];Ca.Copy.toString=p;Ca.Copy.__enum__=Ca;var La=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};g["flambe.math.Point"]=La;La.__name__=["flambe","math","Point"];La.prototype={set:function(a,b){this.x=a;this.y=b},__class__:La};var s=function(){this.blendMode=this.scissor=null;var a=this;j.call(this);this._flags|=54;this._localMatrix=
new ed;var b=function(){a._flags|=24};this.x=new Q(0,b);this.y=new Q(0,b);this.rotation=new Q(0,b);this.scaleX=new Q(1,b);this.scaleY=new Q(1,b);this.anchorX=new Q(0,b);this.anchorY=new Q(0,b);this.alpha=new Q(1)};g["flambe.display.Sprite"]=s;s.__name__=["flambe","display","Sprite"];s.hitTest=function(a,b,c){var d=a._compMap.Sprite_5;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,s._scratchPoint)&&(b=s._scratchPoint.x,c=s._scratchPoint.y);var e=d.scissor;if(null!=
e&&!e.contains(b,c))return null}a=s.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};s.getBounds=function(a,b){null==b&&(b=new yb);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);s.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};s.render=function(a,b){var c=a._compMap.Sprite_5;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);
var d=c.getLocalMatrix(),e=d.m02,h=d.m12;0!=(c._flags&32)&&(e=Math.round(e),h=Math.round(h));b.transform(d.m00,d.m10,d.m01,d.m11,e,h);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_35;if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)h=d[e],++e,s.render(h,b)}for(d=a.firstChild;null!=d;)e=d.next,s.render(d,b),d=e;null!=c&&b.restore()};s.hitTestBackwards=function(a,b,c){if(null!=a){var d=s.hitTestBackwards(a.next,b,c);return null!=d?d:s.hitTest(a,b,c)}return null};
s.getBoundsImpl=function(a,b,c){var d=a._compMap.Sprite_5;if(null!=d){var b=null!=b?ed.multiply(b,d.getLocalMatrix()):d.getLocalMatrix(),e=d.getNaturalWidth(),d=d.getNaturalHeight();0<e&&0<d&&(s.extendRect(b,0,0,c),s.extendRect(b,e,0,c),s.extendRect(b,e,d,c),s.extendRect(b,0,d,c))}e=a._compMap.Director_35;if(null!=e)for(var e=e.occludedScenes,d=0,h=e.length;d<h;)s.getBoundsImpl(e[d],b,c),++d;for(a=a.firstChild;null!=a;)e=a.next,s.getBoundsImpl(a,b,c),a=e};s.extendRect=function(a,b,c,d){a=a.transform(b,
c,s._scratchPoint);b=a.x;c=a.y;b<d.x&&(d.x=b);c<d.y&&(d.y=c);b>d.width&&(d.width=b);c>d.height&&(d.height=c)};s.__super__=j;s.prototype=k(j.prototype,{get_name:function(){return"Sprite_5"},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,
3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);
return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);
this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a._compMap.Sprite_5;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new T);return this._pointerDown},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new T);return this._pointerUp},connectHover:function(){var a=
this;null==this._hoverConnection&&(this._hoverConnection=u._platform.getPointer().move.connect(function(b){for(var c=b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Xg.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Xg.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=Xg.set(this._flags,
32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),
this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=this._pointerUp&&this._pointerUp.emit(a)},__class__:s,__properties__:k(j.prototype.__properties__,{set_pixelSnapping:"set_pixelSnapping",set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible",get_pointerUp:"get_pointerUp",get_pointerDown:"get_pointerDown"})});var Da=function(a,b,c){s.call(this);this.color=a;this.width=new Q(b);this.height=new Q(c)};g["flambe.display.FillSprite"]=
Da;Da.__name__=["flambe","display","FillSprite"];Da.__super__=s;Da.prototype=k(s.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){s.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:Da});var Yg=function(a){this._kernings=
null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};g["flambe.display.Glyph"]=Yg;Yg.__name__=["flambe","display","Glyph"];Yg.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?q["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new Fb);this._kernings.set(a,
b)},__class__:Yg};var Ke=function(a,b){this.name=b;this._pack=a;this._file=a.getFile(b+".fnt");this.reload()};g["flambe.display.Font"]=Ke;Ke.__name__=["flambe","display","Font"];Ke.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=Z.Left);return new Le(this,a,b,c,d,e)},reload:function(){this._glyphs=new Fb;this._glyphs.set(Ke.NEWLINE.charCode,Ke.NEWLINE);for(var a=new ff(this._file.toString()),b=new Fb,c=this.name.lastIndexOf("/"),c=0<=c?M.substr(this.name,
0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=a.pairs();e.hasNext();){var h=e.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(h=e.next(),h.key){case "lineHeight":this.lineHeight=h.getInt()}break;case "page":for(var e=0,h=null,n=a.pairs();n.hasNext();){var f=n.next();switch(f.key){case "id":e=f.getInt();break;case "file":h=f.getString()}}h=this._pack.getTexture(c+ka.removeFileExtension(h));b.set(e,h);break;
case "char":e=null;for(h=a.pairs();h.hasNext();)switch(n=h.next(),n.key){case "id":e=new Yg(n.getInt());break;case "x":e.x=n.getInt();break;case "y":e.y=n.getInt();break;case "width":e.width=n.getInt();break;case "height":e.height=n.getInt();break;case "page":n=n.getInt();e.page=b.get(n);break;case "xoffset":e.xOffset=n.getInt();break;case "yoffset":e.yOffset=n.getInt();break;case "xadvance":e.xAdvance=n.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;n=h=0;for(f=a.pairs();f.hasNext();){var da=
f.next();switch(da.key){case "first":e=this._glyphs.get(da.getInt());break;case "second":h=da.getInt();break;case "amount":n=da.getInt()}}null!=e&&0!=n&&e.setKerning(h,n)}},__class__:Ke};var Z=g["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};Z.Left=["Left",0];Z.Left.toString=p;Z.Left.__enum__=Z;Z.Center=["Center",1];Z.Center.toString=p;Z.Center.__enum__=Z;Z.Right=["Right",2];Z.Right.toString=p;Z.Right.__enum__=Z;var Le=function(a,
b,c,d,e,h){this.lines=0;var n=this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+h);this.bounds=new yb;for(var f=[],h=b.length,da=0;da<h;){var g=da++,g=b.charCodeAt(g),g=a._glyphs.get(g);null!=g?this._glyphs.push(g):null}for(var b=-1,i=0,j=0,a=a._glyphs.get(10),h=function(){n.bounds.width=zb.max(n.bounds.width,i);n.bounds.height+=j;f[n.lines]=i;j=i=0;++n.lines},da=0;da<this._glyphs.length;){g=this._glyphs[da];this._offsets[da]=Math.round(i);var k=0<d&&i+g.width>
d;k||g==a?(k&&(0<=b?(this._glyphs[b]=a,i=this._offsets[b],da=b):this._glyphs.splice(da,0,a)),b=-1,j=this._lineOffset,h()):(32==g.charCode&&(b=da),i+=g.xAdvance+e,j=zb.max(j,g.height+g.yOffset),da+1<this._glyphs.length&&(i+=g.getKerning(this._glyphs[da+1].charCode)));++da}h();e=0;a=Le.getAlignOffset(c,f[0],d);b=1.79769313486231E308;h=-1.79769313486231E308;g=da=0;for(k=this._glyphs.length;g<k;){var l=this._glyphs[g];10==l.charCode&&(e+=this._lineOffset,++da,a=Le.getAlignOffset(c,f[da],d));this._offsets[g]+=
a;var m=e+l.yOffset;b<m||(b=m);h=zb.max(h,m+l.height);++g}this.bounds.x=Le.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=h-b};g["flambe.display.TextLayout"]=Le;Le.__name__=["flambe","display","TextLayout"];Le.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};Le.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],
b);++c}},__class__:Le};var ff=function(a){this._configText=a;this._keywordPattern=new Pb("([A-Za-z]+)(.*)","");this._pairPattern=new Pb('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};g["flambe.display._Font.ConfigParser"]=ff;ff.__name__=["flambe","display","_Font","ConfigParser"];ff.advance=function(a,b){var c=b.matchedPos();return M.substr(a,c.pos+c.len,a.length)};ff.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=ff.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);
return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},pairs:function(){var a=this,b=this._pairText;return{next:function(){b=ff.advance(b,a._pairPattern);return new kk(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:ff};var kk=function(a,b){this.key=a;this._value=b};g["flambe.display._Font.ConfigPair"]=kk;kk.__name__=["flambe","display","_Font","ConfigPair"];kk.prototype={getInt:function(){return q.parseInt(this._value)},
getString:function(){return 34!=this._value.charCodeAt(0)?null:M.substr(this._value,1,this._value.length-2)},__class__:kk};var lk=function(){};g["flambe.display.Graphics"]=lk;lk.__name__=["flambe","display","Graphics"];lk.prototype={__class__:lk};var Y=function(a){s.call(this);this.texture=a};g["flambe.display.ImageSprite"]=Y;Y.__name__=["flambe","display","ImageSprite"];Y.__super__=s;Y.prototype=k(s.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=
this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:Y});var Id=g["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};Id.Portrait=["Portrait",0];Id.Portrait.toString=p;Id.Portrait.__enum__=Id;Id.Landscape=["Landscape",1];Id.Landscape.toString=p;Id.Landscape.__enum__=Id;var Zg=function(){};g["flambe.display.Texture"]=Zg;Zg.__name__=["flambe","display","Texture"];
Zg.__interfaces__=[Je];Zg.prototype={__class__:Zg};var tl=function(){};g["flambe.display.SubTexture"]=tl;tl.__name__=["flambe","display","SubTexture"];tl.__interfaces__=[Zg];var Ya=function(a,b){null==b&&(b="");this._layout=null;var c=this;s.call(this);this._font=a;this._text=b;this._align=Z.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=new Q(0,d);this.letterSpacing=new Q(0,d);this.lineSpacing=new Q(0,d)};g["flambe.display.TextSprite"]=Ya;Ya.__name__=["flambe","display","TextSprite"];
Ya.__super__=s;Ya.prototype=k(s.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,b)},setWrapWidth:function(a){this.wrapWidth.set__(a);
return this},setAlign:function(a){this.set_align(a);return this},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,this.lineSpacing._value))},onUpdate:function(a){s.prototype.onUpdate.call(this,
a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:Ya,__properties__:k(s.prototype.__properties__,{set_align:"set_align",set_font:"set_font",set_text:"set_text"})});var i=g["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
i.A=["A",0];i.A.toString=p;i.A.__enum__=i;i.B=["B",1];i.B.toString=p;i.B.__enum__=i;i.C=["C",2];i.C.toString=p;i.C.__enum__=i;i.D=["D",3];i.D.toString=p;i.D.__enum__=i;i.E=["E",4];i.E.toString=p;i.E.__enum__=i;i.F=["F",5];i.F.toString=p;i.F.__enum__=i;i.G=["G",6];i.G.toString=p;i.G.__enum__=i;i.H=["H",7];i.H.toString=p;i.H.__enum__=i;i.I=["I",8];i.I.toString=p;i.I.__enum__=i;i.J=["J",9];i.J.toString=p;i.J.__enum__=i;i.K=["K",10];i.K.toString=p;i.K.__enum__=i;i.L=["L",11];i.L.toString=p;i.L.__enum__=
i;i.M=["M",12];i.M.toString=p;i.M.__enum__=i;i.N=["N",13];i.N.toString=p;i.N.__enum__=i;i.O=["O",14];i.O.toString=p;i.O.__enum__=i;i.P=["P",15];i.P.toString=p;i.P.__enum__=i;i.Q=["Q",16];i.Q.toString=p;i.Q.__enum__=i;i.R=["R",17];i.R.toString=p;i.R.__enum__=i;i.S=["S",18];i.S.toString=p;i.S.__enum__=i;i.T=["T",19];i.T.toString=p;i.T.__enum__=i;i.U=["U",20];i.U.toString=p;i.U.__enum__=i;i.V=["V",21];i.V.toString=p;i.V.__enum__=i;i.W=["W",22];i.W.toString=p;i.W.__enum__=i;i.X=["X",23];i.X.toString=
p;i.X.__enum__=i;i.Y=["Y",24];i.Y.toString=p;i.Y.__enum__=i;i.Z=["Z",25];i.Z.toString=p;i.Z.__enum__=i;i.Number0=["Number0",26];i.Number0.toString=p;i.Number0.__enum__=i;i.Number1=["Number1",27];i.Number1.toString=p;i.Number1.__enum__=i;i.Number2=["Number2",28];i.Number2.toString=p;i.Number2.__enum__=i;i.Number3=["Number3",29];i.Number3.toString=p;i.Number3.__enum__=i;i.Number4=["Number4",30];i.Number4.toString=p;i.Number4.__enum__=i;i.Number5=["Number5",31];i.Number5.toString=p;i.Number5.__enum__=
i;i.Number6=["Number6",32];i.Number6.toString=p;i.Number6.__enum__=i;i.Number7=["Number7",33];i.Number7.toString=p;i.Number7.__enum__=i;i.Number8=["Number8",34];i.Number8.toString=p;i.Number8.__enum__=i;i.Number9=["Number9",35];i.Number9.toString=p;i.Number9.__enum__=i;i.Numpad0=["Numpad0",36];i.Numpad0.toString=p;i.Numpad0.__enum__=i;i.Numpad1=["Numpad1",37];i.Numpad1.toString=p;i.Numpad1.__enum__=i;i.Numpad2=["Numpad2",38];i.Numpad2.toString=p;i.Numpad2.__enum__=i;i.Numpad3=["Numpad3",39];i.Numpad3.toString=
p;i.Numpad3.__enum__=i;i.Numpad4=["Numpad4",40];i.Numpad4.toString=p;i.Numpad4.__enum__=i;i.Numpad5=["Numpad5",41];i.Numpad5.toString=p;i.Numpad5.__enum__=i;i.Numpad6=["Numpad6",42];i.Numpad6.toString=p;i.Numpad6.__enum__=i;i.Numpad7=["Numpad7",43];i.Numpad7.toString=p;i.Numpad7.__enum__=i;i.Numpad8=["Numpad8",44];i.Numpad8.toString=p;i.Numpad8.__enum__=i;i.Numpad9=["Numpad9",45];i.Numpad9.toString=p;i.Numpad9.__enum__=i;i.NumpadAdd=["NumpadAdd",46];i.NumpadAdd.toString=p;i.NumpadAdd.__enum__=i;i.NumpadDecimal=
["NumpadDecimal",47];i.NumpadDecimal.toString=p;i.NumpadDecimal.__enum__=i;i.NumpadDivide=["NumpadDivide",48];i.NumpadDivide.toString=p;i.NumpadDivide.__enum__=i;i.NumpadEnter=["NumpadEnter",49];i.NumpadEnter.toString=p;i.NumpadEnter.__enum__=i;i.NumpadMultiply=["NumpadMultiply",50];i.NumpadMultiply.toString=p;i.NumpadMultiply.__enum__=i;i.NumpadSubtract=["NumpadSubtract",51];i.NumpadSubtract.toString=p;i.NumpadSubtract.__enum__=i;i.F1=["F1",52];i.F1.toString=p;i.F1.__enum__=i;i.F2=["F2",53];i.F2.toString=
p;i.F2.__enum__=i;i.F3=["F3",54];i.F3.toString=p;i.F3.__enum__=i;i.F4=["F4",55];i.F4.toString=p;i.F4.__enum__=i;i.F5=["F5",56];i.F5.toString=p;i.F5.__enum__=i;i.F6=["F6",57];i.F6.toString=p;i.F6.__enum__=i;i.F7=["F7",58];i.F7.toString=p;i.F7.__enum__=i;i.F8=["F8",59];i.F8.toString=p;i.F8.__enum__=i;i.F9=["F9",60];i.F9.toString=p;i.F9.__enum__=i;i.F10=["F10",61];i.F10.toString=p;i.F10.__enum__=i;i.F11=["F11",62];i.F11.toString=p;i.F11.__enum__=i;i.F12=["F12",63];i.F12.toString=p;i.F12.__enum__=i;i.F13=
["F13",64];i.F13.toString=p;i.F13.__enum__=i;i.F14=["F14",65];i.F14.toString=p;i.F14.__enum__=i;i.F15=["F15",66];i.F15.toString=p;i.F15.__enum__=i;i.Left=["Left",67];i.Left.toString=p;i.Left.__enum__=i;i.Up=["Up",68];i.Up.toString=p;i.Up.__enum__=i;i.Right=["Right",69];i.Right.toString=p;i.Right.__enum__=i;i.Down=["Down",70];i.Down.toString=p;i.Down.__enum__=i;i.Alt=["Alt",71];i.Alt.toString=p;i.Alt.__enum__=i;i.Backquote=["Backquote",72];i.Backquote.toString=p;i.Backquote.__enum__=i;i.Backslash=
["Backslash",73];i.Backslash.toString=p;i.Backslash.__enum__=i;i.Backspace=["Backspace",74];i.Backspace.toString=p;i.Backspace.__enum__=i;i.CapsLock=["CapsLock",75];i.CapsLock.toString=p;i.CapsLock.__enum__=i;i.Comma=["Comma",76];i.Comma.toString=p;i.Comma.__enum__=i;i.Command=["Command",77];i.Command.toString=p;i.Command.__enum__=i;i.Control=["Control",78];i.Control.toString=p;i.Control.__enum__=i;i.Delete=["Delete",79];i.Delete.toString=p;i.Delete.__enum__=i;i.End=["End",80];i.End.toString=p;i.End.__enum__=
i;i.Enter=["Enter",81];i.Enter.toString=p;i.Enter.__enum__=i;i.Equals=["Equals",82];i.Equals.toString=p;i.Equals.__enum__=i;i.Escape=["Escape",83];i.Escape.toString=p;i.Escape.__enum__=i;i.Home=["Home",84];i.Home.toString=p;i.Home.__enum__=i;i.Insert=["Insert",85];i.Insert.toString=p;i.Insert.__enum__=i;i.LeftBracket=["LeftBracket",86];i.LeftBracket.toString=p;i.LeftBracket.__enum__=i;i.Minus=["Minus",87];i.Minus.toString=p;i.Minus.__enum__=i;i.PageDown=["PageDown",88];i.PageDown.toString=p;i.PageDown.__enum__=
i;i.PageUp=["PageUp",89];i.PageUp.toString=p;i.PageUp.__enum__=i;i.Period=["Period",90];i.Period.toString=p;i.Period.__enum__=i;i.Quote=["Quote",91];i.Quote.toString=p;i.Quote.__enum__=i;i.RightBracket=["RightBracket",92];i.RightBracket.toString=p;i.RightBracket.__enum__=i;i.Semicolon=["Semicolon",93];i.Semicolon.toString=p;i.Semicolon.__enum__=i;i.Shift=["Shift",94];i.Shift.toString=p;i.Shift.__enum__=i;i.Slash=["Slash",95];i.Slash.toString=p;i.Slash.__enum__=i;i.Space=["Space",96];i.Space.toString=
p;i.Space.__enum__=i;i.Tab=["Tab",97];i.Tab.toString=p;i.Tab.__enum__=i;i.Menu=["Menu",98];i.Menu.toString=p;i.Menu.__enum__=i;i.Search=["Search",99];i.Search.toString=p;i.Search.__enum__=i;i.Unknown=function(a){a=["Unknown",100,a];a.__enum__=i;a.toString=p;return a};var mk=function(){this.init(0,null)};g["flambe.input.KeyboardEvent"]=mk;mk.__name__=["flambe","input","KeyboardEvent"];mk.prototype={init:function(a,b){this.id=a;this.key=b},__class__:mk};var Qb=g["flambe.input.MouseButton"]={__ename__:["flambe",
"input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};Qb.Left=["Left",0];Qb.Left.toString=p;Qb.Left.__enum__=Qb;Qb.Middle=["Middle",1];Qb.Middle.toString=p;Qb.Middle.__enum__=Qb;Qb.Right=["Right",2];Qb.Right.toString=p;Qb.Right.__enum__=Qb;Qb.Unknown=function(a){a=["Unknown",3,a];a.__enum__=Qb;a.toString=p;return a};var wc=g["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};wc.Default=["Default",0];wc.Default.toString=
p;wc.Default.__enum__=wc;wc.Button=["Button",1];wc.Button.toString=p;wc.Button.__enum__=wc;wc.None=["None",2];wc.None.toString=p;wc.None.__enum__=wc;var nk=function(){this.init(0,0,0,null)};g["flambe.input.MouseEvent"]=nk;nk.__name__=["flambe","input","MouseEvent"];nk.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:nk};var $g=g["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};$g.Mouse=function(a){a=
["Mouse",0,a];a.__enum__=$g;a.toString=p;return a};$g.Touch=function(a){a=["Touch",1,a];a.__enum__=$g;a.toString=p;return a};var ok=function(){this.init(0,0,0,null,null)};g["flambe.input.PointerEvent"]=ok;ok.__name__=["flambe","input","PointerEvent"];ok.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:ok};var pk=function(a){this.id=a;this._source=$g.Touch(this)};g["flambe.input.TouchPoint"]=pk;pk.__name__=["flambe","input",
"TouchPoint"];pk.prototype={init:function(a,b){this.viewX=a;this.viewY=b},__class__:pk};var zb=function(){};g["flambe.math.FMath"]=zb;zb.__name__=["flambe","math","FMath"];zb.toRadians=function(a){return 3.141592653589793*a/180};zb.toDegrees=function(a){return 180*a/3.141592653589793};zb.max=function(a,b){return a>b?a:b};zb.min=function(a,b){return a<b?a:b};zb.clamp=function(a,b,c){return a<b?b:a>c?c:a};var ed=function(){this.identity()};g["flambe.math.Matrix"]=ed;ed.__name__=["flambe","math","Matrix"];
ed.multiply=function(a,b,c){null==c&&(c=new ed);var d=a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,h=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=h;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;h=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=h;return c};ed.prototype={set:function(a,b,c,d,e,h){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=h},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var h=Math.sin(e),e=Math.cos(e);this.set(e*c,
h*c,-h*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,c){null==c&&(c=new La);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],h=
a[d+1];c[d++]=e*this.m00+h*this.m01+this.m02;c[d++]=e*this.m10+h*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new ed);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:ed};var yb=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==
b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};g["flambe.math.Rectangle"]=yb;yb.__name__=["flambe","math","Rectangle"];yb.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new yb);a.set(this.x,this.y,this.width,this.height);
return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},__class__:yb};var Gb=function(){this._disposed=!1};g["flambe.platform.BasicAsset"]=Gb;Gb.__name__=["flambe","platform","BasicAsset"];Gb.__interfaces__=[Je];Gb.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:Gb};var Ne=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new Me;this._bytesLoaded=new C;
this._pack=new ah(b,this);var d=af.array(b);if(0==d.length)this.handleSuccess();else{for(var e=new C,h=0;h<d.length;){var n=d[h];++h;var f=e.get(n.name);null==f&&(f=[],e.set(n.name,f));f.push(n)}this._assetsRemaining=af.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(h){c.handleError(d,"Unexpected error: "+q.string(h))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],Ne.isAudio(d.format)?
c.handleLoad(d,Rc.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};g["flambe.platform.BasicAssetPackLoader"]=Ne;Ne.__name__=["flambe","platform","BasicAssetPackLoader"];Ne.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};Ne.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var h=0;h<a.length;){var n=a[h];++h;if(n.format==e){b(n);
return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,
b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(ka.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:Ne};var ah=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new C;this.sounds=new C;this.files=new C};
g["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=ah;ah.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];ah.__interfaces__=[Vg];ah.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw ka.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw ka.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);
if(null==c&&b)throw ka.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},__class__:ah,__properties__:{get_manifest:"get_manifest"}};var Lf=
function(a){this._disposed=!1;this._content=a};g["flambe.platform.BasicFile"]=Lf;Lf.__name__=["flambe","platform","BasicFile"];Lf.__interfaces__=[Wg];Lf.__super__=Gb;Lf.prototype=k(Gb.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Lf});var qk=function(){};g["flambe.subsystem.KeyboardSystem"]=qk;qk.__name__=["flambe","subsystem","KeyboardSystem"];qk.prototype={__class__:qk};var dd=function(){this.down=new T;this.up=new T;this.backButton=new pa;
this._keyStates=new Fb};g["flambe.platform.BasicKeyboard"]=dd;dd.__name__=["flambe","platform","BasicKeyboard"];dd.__interfaces__=[qk];dd.prototype={isDown:function(a){return this.isCodeDown(Mf.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),dd._sharedEvent.init(dd._sharedEvent.id+1,Mf.toKey(a)),this.down.emit(dd._sharedEvent));
return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),dd._sharedEvent.init(dd._sharedEvent.id+1,Mf.toKey(a)),this.up.emit(dd._sharedEvent))},__class__:dd};var rk=function(){};g["flambe.subsystem.MouseSystem"]=rk;rk.__name__=["flambe","subsystem","MouseSystem"];rk.prototype={__class__:rk};var Sc=function(a){this._pointer=a;this._source=$g.Mouse(Sc._sharedEvent);this.down=new T;this.move=new T;this.up=new T;this.scroll=new T;this._y=this._x=0;this._cursor=wc.Default;this._buttonStates=
new Fb};g["flambe.platform.BasicMouse"]=Sc;Sc.__name__=["flambe","platform","BasicMouse"];Sc.__interfaces__=[rk];Sc.prototype={get_x:function(){return this._x},get_y:function(){return this._y},set_cursor:function(a){return this._cursor=a},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,sk.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(Sc._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,
b,this._source);this.move.emit(Sc._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&(this._buttonStates.remove(c),this.prepare(a,b,sk.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(Sc._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;Sc._sharedEvent.init(Sc._sharedEvent.id+1,a,b,c)},__class__:Sc,__properties__:{set_cursor:"set_cursor",
get_y:"get_y",get_x:"get_x"}};var tk=function(){};g["flambe.subsystem.PointerSystem"]=tk;tk.__name__=["flambe","subsystem","PointerSystem"];tk.prototype={__class__:tk};var sb=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new T;this.move=new T;this.up=new T;this._x=a;this._y=b;this._isDown=c};g["flambe.platform.BasicPointer"]=sb;sb.__name__=["flambe","platform","BasicPointer"];sb.__interfaces__=[tk];sb.prototype={get_x:function(){return this._x},get_y:function(){return this._y},
submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=s.hitTest(u.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(sb._sharedEvent),sb._sharedEvent._stopped)return;this.down.emit(sb._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=s.hitTest(u.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;
null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerMove(sb._sharedEvent),sb._sharedEvent._stopped)return;this.move.emit(sb._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=s.hitTest(u.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(sb._sharedEvent),
sb._sharedEvent._stopped)return;this.up.emit(sb._sharedEvent)}},prepare:function(a,b,c,d){this._x=a;this._y=b;sb._sharedEvent.init(sb._sharedEvent.id+1,a,b,c,d)},__class__:sb,__properties__:{get_y:"get_y",get_x:"get_x"}};var fd=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};g["flambe.platform.BasicTexture"]=fd;fd.__name__=["flambe","platform","BasicTexture"];fd.__interfaces__=[tl];fd.__super__=Gb;fd.prototype=
k(Gb.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:fd,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var bh=function(){};g["flambe.subsystem.TouchSystem"]=
bh;bh.__name__=["flambe","subsystem","TouchSystem"];bh.prototype={__class__:bh};var Ng=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new Fb;this._points=[];this.down=new T;this.move=new T;this.up=new T};g["flambe.platform.BasicTouch"]=Ng;Ng.__name__=["flambe","platform","BasicTouch"];Ng.__interfaces__=[bh];Ng.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new pk(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);
null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),M.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Ng,
__properties__:{get_supported:"get_supported"}};var gf=function(){};g["flambe.sound.Sound"]=gf;gf.__name__=["flambe","sound","Sound"];gf.__interfaces__=[Je];gf.prototype={__class__:gf};var Rc=function(){this._disposed=!1;this._playback=new ch(this)};g["flambe.platform.DummySound"]=Rc;Rc.__name__=["flambe","platform","DummySound"];Rc.__interfaces__=[gf];Rc.getInstance=function(){null==Rc._instance&&(Rc._instance=new Rc);return Rc._instance};Rc.__super__=Gb;Rc.prototype=k(Gb.prototype,{play:function(){return this._playback},
loop:function(){return this._playback},get_duration:function(){return 0},onDisposed:function(){},__class__:Rc,__properties__:{get_duration:"get_duration"}});var hf=function(){};g["flambe.sound.Playback"]=hf;hf.__name__=["flambe","sound","Playback"];hf.__interfaces__=[gc];hf.prototype={__class__:hf};var ch=function(a){this._sound=a;this.volume=new Q(0);this._complete=new Na(!0)};g["flambe.platform.DummyPlayback"]=ch;ch.__name__=["flambe","platform","DummyPlayback"];ch.__interfaces__=[hf];ch.prototype=
{set_paused:function(){return!0},get_complete:function(){return this._complete},dispose:function(){},__class__:ch,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};var dh=function(){};g["flambe.subsystem.StorageSystem"]=dh;dh.__name__=["flambe","subsystem","StorageSystem"];dh.prototype={__class__:dh};var Rg=function(){this.clear()};g["flambe.platform.DummyStorage"]=Rg;Rg.__name__=["flambe","platform","DummyStorage"];Rg.__interfaces__=[dh];Rg.prototype={set:function(a,b){this._hash.set(a,
b);return!0},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},clear:function(){this._hash=new C},__class__:Rg};var Og=function(){this.down=new T;this.move=new T;this.up=new T};g["flambe.platform.DummyTouch"]=Og;Og.__name__=["flambe","platform","DummyTouch"];Og.__interfaces__=[bh];Og.prototype={get_supported:function(){return!1},__class__:Og,__properties__:{get_supported:"get_supported"}};var Nf=function(){this._entries=[]};g["flambe.platform.EventGroup"]=Nf;Nf.__name__=["flambe",
"platform","EventGroup"];Nf.__interfaces__=[gc];Nf.prototype={addListener:function(a,b,c){a.addEventListener(b,c,!1);this._entries.push(new uk(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Nf};var uk=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};g["flambe.platform._EventGroup.Entry"]=
uk;uk.__name__=["flambe","platform","_EventGroup","Entry"];uk.prototype={__class__:uk};var Of=function(){};g["flambe.platform.InternalGraphics"]=Of;Of.__name__=["flambe","platform","InternalGraphics"];Of.__interfaces__=[lk];Of.prototype={__class__:Of};var vk=function(){};g["flambe.subsystem.RendererSystem"]=vk;vk.__name__=["flambe","subsystem","RendererSystem"];vk.prototype={__class__:vk};var Pf=function(){};g["flambe.platform.InternalRenderer"]=Pf;Pf.__name__=["flambe","platform","InternalRenderer"];
Pf.__interfaces__=[vk];Pf.prototype={__class__:Pf};var Mf=function(){};g["flambe.platform.KeyCodes"]=Mf;Mf.__name__=["flambe","platform","KeyCodes"];Mf.toKey=function(a){switch(a){case 65:return i.A;case 66:return i.B;case 67:return i.C;case 68:return i.D;case 69:return i.E;case 70:return i.F;case 71:return i.G;case 72:return i.H;case 73:return i.I;case 74:return i.J;case 75:return i.K;case 76:return i.L;case 77:return i.M;case 78:return i.N;case 79:return i.O;case 80:return i.P;case 81:return i.Q;
case 82:return i.R;case 83:return i.S;case 84:return i.T;case 85:return i.U;case 86:return i.V;case 87:return i.W;case 88:return i.X;case 89:return i.Y;case 90:return i.Z;case 48:return i.Number0;case 49:return i.Number1;case 50:return i.Number2;case 51:return i.Number3;case 52:return i.Number4;case 53:return i.Number5;case 54:return i.Number6;case 55:return i.Number7;case 56:return i.Number8;case 57:return i.Number9;case 96:return i.Numpad0;case 97:return i.Numpad1;case 98:return i.Numpad2;case 99:return i.Numpad3;
case 100:return i.Numpad4;case 101:return i.Numpad5;case 102:return i.Numpad6;case 103:return i.Numpad7;case 104:return i.Numpad8;case 105:return i.Numpad9;case 107:return i.NumpadAdd;case 110:return i.NumpadDecimal;case 111:return i.NumpadDivide;case 108:return i.NumpadEnter;case 106:return i.NumpadMultiply;case 109:return i.NumpadSubtract;case 112:return i.F1;case 113:return i.F2;case 114:return i.F3;case 115:return i.F4;case 116:return i.F5;case 117:return i.F6;case 118:return i.F7;case 119:return i.F8;
case 120:return i.F9;case 121:return i.F10;case 122:return i.F11;case 123:return i.F12;case 37:return i.Left;case 38:return i.Up;case 39:return i.Right;case 40:return i.Down;case 18:return i.Alt;case 192:return i.Backquote;case 220:return i.Backslash;case 8:return i.Backspace;case 20:return i.CapsLock;case 188:return i.Comma;case 15:return i.Command;case 17:return i.Control;case 46:return i.Delete;case 35:return i.End;case 13:return i.Enter;case 187:return i.Equals;case 27:return i.Escape;case 36:return i.Home;
case 45:return i.Insert;case 219:return i.LeftBracket;case 189:return i.Minus;case 34:return i.PageDown;case 33:return i.PageUp;case 190:return i.Period;case 222:return i.Quote;case 221:return i.RightBracket;case 186:return i.Semicolon;case 16:return i.Shift;case 191:return i.Slash;case 32:return i.Space;case 9:return i.Tab;case 16777234:return i.Menu;case 16777247:return i.Search}return i.Unknown(a)};Mf.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;
case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;
case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;
case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;
case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var bf=function(){this._tickables=[]};g["flambe.platform.MainLoop"]=bf;bf.__name__=["flambe","platform","MainLoop"];bf.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_29;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=
a.firstComponent;null!=c;){var d=c.next;0==(c._flags&1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,bf.updateEntity(c,b),c=d};bf.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}u.volume.update(a);bf.updateEntity(u.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),s.render(u.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},
__class__:bf};var wk=function(){};g["flambe.platform.MathUtil"]=wk;wk.__name__=["flambe","platform","MathUtil"];wk.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var sk=function(){};g["flambe.platform.MouseCodes"]=sk;sk.__name__=["flambe","platform","MouseCodes"];sk.toButton=function(a){switch(a){case 0:return Qb.Left;case 1:return Qb.Middle;case 2:return Qb.Right}return Qb.Unknown(a)};var eh=function(){};g["flambe.platform.TextureRoot"]=eh;eh.__name__=["flambe","platform","TextureRoot"];
eh.prototype={__class__:eh};var fh=function(){};g["flambe.platform.Tickable"]=fh;fh.__name__=["flambe","platform","Tickable"];fh.prototype={__class__:fh};var td=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};g["flambe.platform.html.CanvasGraphics"]=td;td.__name__=["flambe","platform","html","CanvasGraphics"];td.__interfaces__=[Of];td.prototype={save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,
b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},transform:function(a,b,c,d,e,h){this._canvasCtx.transform(a,b,c,d,e,h)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,h,n){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,h,n),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,
a.rootX+d|0,a.rootY+e|0,h|0,n|0,b|0,c|0,h|0,n|0)},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation=
"source-over";else{for(a=(16777215&a).toString(16);6>a.length;)a="0"+q.string(a);this._canvasCtx.fillStyle="#"+q.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();
this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:td};var cf=function(a){this.graphics=new td(a,!1);this._hasGPU=new Na(!0)};g["flambe.platform.html.CanvasRenderer"]=cf;cf.__name__=["flambe","platform","html","CanvasRenderer"];cf.__interfaces__=[Pf];cf.prototype={get_type:function(){return gd.Canvas},createTextureFromImage:function(a){a=new jf(cf.CANVAS_TEXTURES?oa.createCanvas(a):a);return a.createTexture(a.width,
a.height)},createTexture:function(a,b){return(new jf(oa.createEmptyCanvas(a,b))).createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:cf,__properties__:{get_type:"get_type"}};var gh=function(a,b,c){this._rootUpdateCount=0;this._pattern=null;fd.call(this,a,b,c)};g["flambe.platform.html.CanvasTexture"]=gh;gh.__name__=["flambe","platform",
"html","CanvasTexture"];gh.__super__=fd;gh.prototype=k(fd.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,this._height);return this._pattern},__class__:gh});var jf=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};g["flambe.platform.html.CanvasTextureRoot"]=
jf;jf.__name__=["flambe","platform","html","CanvasTextureRoot"];jf.__interfaces__=[eh];jf.__super__=Gb;jf.prototype=k(Gb.prototype,{createTexture:function(a,b){return new gh(this,a,b)},getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new hh(this));return this._graphics},createPattern:function(a,b,c,d){var e=this.getContext2d(),h=this.image;if(0!=a||0!=b||c!=this.width||d!=this.height)h=oa.createEmptyCanvas(c,d),c=h.getContext("2d"),c.globalCompositeOperation="copy",
c.drawImage(this.image,-a,-b);return e.createPattern(h,"repeat")},getContext2d:function(){X.__instanceof(this.image,HTMLCanvasElement)||(this.image=oa.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:jf});var hh=function(a){td.call(this,a.image,!0);this._renderTarget=a};g["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=hh;hh.__name__=["flambe","platform","html","_CanvasTextureRoot","InternalGraphics"];hh.__super__=
td;hh.prototype=k(td.prototype,{drawTexture:function(a,b,c){td.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},drawSubTexture:function(a,b,c,d,e,h,n){td.prototype.drawSubTexture.call(this,a,b,c,d,e,h,n);++this._renderTarget.updateCount},drawPattern:function(a,b,c,d,e){td.prototype.drawPattern.call(this,a,b,c,d,e);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,e){td.prototype.fillRect.call(this,a,b,c,d,e);++this._renderTarget.updateCount},__class__:hh});var ua=
function(a,b){Ne.call(this,a,b)};g["flambe.platform.html.HtmlAssetPackLoader"]=ua;ua.__name__=["flambe","platform","html","HtmlAssetPackLoader"];ua.detectImageFormats=function(a){var b=[L.PNG,L.JPG,L.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(L.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(L.JXR);
--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};ua.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==l(a,a.canPlayType))return[];var b=new Pb("\\b(iPhone|iPod|iPad|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!wa.get_supported()&&b.match(c))return[];for(var b=[{format:L.M4A,
mimeType:"audio/mp4; codecs=mp4a"},{format:L.MP3,mimeType:"audio/mpeg"},{format:L.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:L.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:L.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var h="";try{h=a.canPlayType(e.mimeType)}catch(n){}""!=h&&c.push(e.format)}return c};ua.supportsBlob=function(){if(ua._detectBlobSupport){ua._detectBlobSupport=!1;if((new Pb("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;
var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;ua._URL=oa.loadExtension("URL").value}return null!=ua._URL&&null!=ua._URL.createObjectURL};ua.__super__=Ne;ua.prototype=k(Ne.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new Nf;e.addDisposingListener(d,"load",function(){ua.supportsBlob()&&ua._URL.revokeObjectURL(d.src);
var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});ua.supportsBlob()?this.download(a,b,"blob",function(a){d.src=ua._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(wa.get_supported())this.download(a,
b,"arraybuffer",function(a){wa.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new wa(a))},function(){c.handleLoad(b,Rc.getInstance())})});else{var h;h=window.document.createElement("audio");h.preload="auto";var n=++ua._mediaRefCount;null==ua._mediaElements&&(ua._mediaElements=new Fb);ua._mediaElements.set(n,h);e=new Nf;e.addDisposingListener(h,"canplaythrough",function(){ua._mediaElements.remove(n);c.handleLoad(b,new Qf(h))});e.addDisposingListener(h,"error",function(){ua._mediaElements.remove(n);
var a=h.error.code;3==a||4==a?c.handleLoad(b,Rc.getInstance()):c.handleError(b,"Failed to load audio: "+h.error.code)});e.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Lf(a))})}},getAssetFormats:function(a){var b=this;null==ua._supportedFormats&&(ua._supportedFormats=new Me,ua.detectImageFormats(function(a){ua._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(ua.detectAudioFormats()).concat([L.Data]))}));
ua._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,h=null,n=null,f=0,da=!1,g=function(){da&&(da=!1,window.clearInterval(f))},i=3,j=function(){--i;return 0<=i?(n(),!0):!1},n=function(){g();null!=h&&h.abort();h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType=c;var n=0;h.onprogress=function(a){da||(da=!0,f=window.setInterval(function(){4!=h.readyState&&5E3<Date.now()-n&&!j()&&(g(),e.handleError(b,"Download stalled"))},1E3));n=Date.now();e.handleProgress(b,a.loaded)};h.onerror=function(){if(0!=
h.status||!j())g(),e.handleError(b,"HTTP error "+h.status)};h.onload=function(){var a=h.response;null==a&&(a=h.responseText);g();d(a)};h.send()};n()},__class__:ua});var xk=function(){};g["flambe.subsystem.ExternalSystem"]=xk;xk.__name__=["flambe","subsystem","ExternalSystem"];xk.prototype={__class__:xk};var Tg=function(){};g["flambe.platform.html.HtmlExternal"]=Tg;Tg.__name__=["flambe","platform","html","HtmlExternal"];Tg.__interfaces__=[xk];Tg.prototype={call:function(a,b){null==b&&(b=[]);for(var c=
window,d=c,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=y.field(c,n)}return d.apply(c,b)},__class__:Tg};var Mg=function(a,b){Sc.call(this,a);this._canvas=b};g["flambe.platform.html.HtmlMouse"]=Mg;Mg.__name__=["flambe","platform","html","HtmlMouse"];Mg.__super__=Sc;Mg.prototype=k(Sc.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return Sc.prototype.set_cursor.call(this,a)},__class__:Mg});var Qf=function(a){this._disposed=
!1;this.audioElement=a};g["flambe.platform.html.HtmlSound"]=Qf;Qf.__name__=["flambe","platform","html","HtmlSound"];Qf.__interfaces__=[gf];Qf.__super__=Gb;Qf.prototype=k(Gb.prototype,{play:function(a){null==a&&(a=1);return new Rf(this,a,!1)},loop:function(a){null==a&&(a=1);return new Rf(this,a,!0)},get_duration:function(){return this.audioElement.duration},onDisposed:function(){this.audioElement=null},__class__:Qf,__properties__:{get_duration:"get_duration"}});var Rf=function(a,b,c){var d=this;this._sound=
a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new Q(b,function(){d.updateVolume()});this.updateVolume();this._complete=new Na(!1);this.playAudio();u.hidden._value&&this.set_paused(!0)};g["flambe.platform.html._HtmlSound.HtmlPlayback"]=Rf;Rf.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];Rf.__interfaces__=[fh,hf];Rf.prototype={set_paused:function(a){this._clonedElement.paused!=
a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.loop&&!cd.instance.musicPlaying&&(cd.instance.musicPlaying=
!0,this._clonedElement.play(),this._tickableAdded||(cd.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=u.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=u.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)})))},updateVolume:function(){this._clonedElement.volume=u.volume._value*this.volume._value},__class__:Rf,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};
var yk=function(){};g["flambe.subsystem.StageSystem"]=yk;yk.__name__=["flambe","subsystem","StageSystem"];yk.prototype={__class__:yk};var If=function(a){var b=this;this._canvas=a;this.resize=new pa;this.scaleFactor=1;oa.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){oa.callLater(l(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",l(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new Na(null);null!=
window.orientation&&(window.addEventListener("orientationchange",l(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new Na(!1);oa.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};g["flambe.platform.html.HtmlStage"]=If;If.__name__=["flambe","platform","html","HtmlStage"];If.__interfaces__=[yk];If.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},
onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";oa.callLater(function(){oa.hideMobileBrowser();
oa.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(oa.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==oa.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:If,__properties__:{get_height:"get_height",get_width:"get_width"}};var Qg=function(a){this._storage=a};g["flambe.platform.html.HtmlStorage"]=Qg;Qg.__name__=["flambe","platform",
"html","HtmlStorage"];Qg.__interfaces__=[dh];Qg.prototype={set:function(a,b){var c;try{var d=new Rb;d.useCache=!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(e){return!1}try{this._storage.setItem("flambe:"+a,c)}catch(h){return!1}return!0},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){null}if(null!=c)try{return ub.run(c)}catch(e){null}return b},__class__:Qg};var oa=function(){};g["flambe.platform.html.HtmlUtil"]=oa;oa.__name__=["flambe","platform","html",
"HtmlUtil"];oa.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};oa.hideMobileBrowser=function(){window.scrollTo(1,0)};oa.loadExtension=function(a,b){null==b&&(b=window);var c=y.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+M.substr(a,1,null),d=0,e=oa.VENDOR_PREFIXES;d<e.length;){var h=e[d];++d;var n=h+c,f=y.field(b,n);if(null!=f)return{prefix:h,field:n,value:f}}return{prefix:null,field:null,value:null}};oa.loadFirstExtension=function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;d=oa.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};oa.polyfill=function(a,b){null==b&&(b=window);var c=oa.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};oa.addVendorListener=function(a,b,c,d){for(var e=0,h=oa.VENDOR_PREFIXES;e<h.length;){var n=h[e];++e;a.addEventListener(n+b,c,d)}a.addEventListener(b,c,d)};oa.orientation=function(a){switch(a){case -90:case 90:return Id.Landscape;default:return Id.Portrait}};oa.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};oa.createCanvas=function(a){var b=oa.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};oa.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
oa.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var zk=function(){};g["flambe.subsystem.WebSystem"]=zk;zk.__name__=["flambe","subsystem","WebSystem"];zk.prototype={__class__:zk};var Sg=function(a){this._container=a};g["flambe.platform.html.HtmlWeb"]=Sg;Sg.__name__=["flambe","platform","html","HtmlWeb"];Sg.__interfaces__=[zk];Sg.prototype={openBrowser:function(a){window.open(a,
"_blank")},__class__:Sg};var wa=function(a){this._disposed=!1;this.buffer=a};g["flambe.platform.html.WebAudioSound"]=wa;wa.__name__=["flambe","platform","html","WebAudioSound"];wa.__interfaces__=[gf];wa.__properties__={get_supported:"get_supported"};wa.get_supported=function(){if(wa._detectSupport){wa._detectSupport=!1;var a=oa.loadExtension("AudioContext").value;null!=a&&(wa.ctx=new a,wa.gain=wa.createGain(),wa.gain.connect(wa.ctx.destination),u.volume.watch(function(a){wa.gain.gain.value=a}))}return null!=
wa.ctx};wa.createGain=function(){return null!=wa.ctx.createGain?wa.ctx.createGain():wa.ctx.createGainNode()};wa.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};wa.__super__=Gb;wa.prototype=k(Gb.prototype,{play:function(a){null==a&&(a=1);return new Sf(this,a,!1)},loop:function(a){null==a&&(a=1);return new Sf(this,a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:wa,__properties__:{get_duration:"get_duration"}});var Sf=function(a,
b,c){var d=this;this._sound=a;this._head=wa.gain;this._complete=new Na(!1);this._sourceNode=wa.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};wa.start(this._sourceNode,0);this.playAudio();this.volume=new Q(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b);u.hidden._value&&this.set_paused(!0)};g["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Sf;Sf.__name__=["flambe","platform","html","_WebAudioSound",
"WebAudioPlayback"];Sf.__interfaces__=[fh,hf];Sf.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(wa.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&
this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=wa.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=
this;this._sourceNode.connect(this._head);this._startedAt=wa.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(cd.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=u.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Sf,__properties__:{get_position:"get_position",get_complete:"get_complete",set_paused:"set_paused"}};var Ak=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=
this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new ih(a);
this._drawPatternShader=new jh(a);this._fillRectShader=new kh(a);this.resize(16)};g["flambe.platform.html.WebGLBatcher"]=Ak;Ak.__name__=["flambe","platform","html","WebGLBatcher"];Ak.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=
this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},bindFramebuffer:function(a){a!=this._lastRenderTarget&&(this.flush(),this.bindRenderTarget(a))},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=
d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareDrawPattern:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawPatternShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=
e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,
771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&
(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,
6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,
null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:Ak};var hd=function(a,b){this._inverseProjection=this._stateList=null;null==hd._scratchQuadArray&&(hd._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};g["flambe.platform.html.WebGLGraphics"]=hd;hd.__name__=["flambe","platform","html","WebGLGraphics"];hd.__interfaces__=[Of];hd.prototype={save:function(){var a=this._stateList,b=this._stateList.next;
null==b&&(b=new lh,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},translate:function(a,b){var c=this._stateList.matrix;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},scale:function(a,b){var c=this._stateList.matrix;c.m00*=a;c.m10*=a;c.m01*=b;c.m11*=b},rotate:function(a){var b=this._stateList.matrix,a=3.141592653589793*a/180,c=Math.sin(a),a=Math.cos(a),d=b.m00,e=b.m10,h=b.m01,n=b.m11;b.m00=
d*a+h*c;b.m10=e*a+n*c;b.m01=h*a-d*c;b.m11=n*a-e*c},transform:function(a,b,c,d,e,h){var n=this._stateList;hd._scratchMatrix.set(a,b,c,d,e,h);ed.multiply(n.matrix,hd._scratchMatrix,n.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,h,n){var f=this._stateList,da=a.root,b=this.transformQuad(b,c,h,n),c=da.width,da=da.height,d=(a.rootX+d)/c,e=(a.rootY+e)/da,h=d+h/c,
n=e+n/da,c=f.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,f.blendMode,f.scissor,a),f=this._batcher.data;f[a]=b[0];f[++a]=b[1];f[++a]=d;f[++a]=e;f[++a]=c;f[++a]=b[2];f[++a]=b[3];f[++a]=h;f[++a]=e;f[++a]=c;f[++a]=b[4];f[++a]=b[5];f[++a]=h;f[++a]=n;f[++a]=c;f[++a]=b[6];f[++a]=b[7];f[++a]=d;f[++a]=n;f[++a]=c},drawPattern:function(a,b,c,d,e){var h=this._stateList,n=a.root,b=this.transformQuad(b,c,d,e),d=d/n.width,e=e/n.height,n=h.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,
h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=0;h[++a]=0;h[++a]=n;h[++a]=b[2];h[++a]=b[3];h[++a]=d;h[++a]=0;h[++a]=n;h[++a]=b[4];h[++a]=b[5];h[++a]=d;h[++a]=e;h[++a]=n;h[++a]=b[6];h[++a]=b[7];h[++a]=0;h[++a]=e;h[++a]=n},fillRect:function(a,b,c,d,e){var h=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=(a&255)/255,e=h.alpha,h=this._batcher.prepareFillRect(this._renderTarget,h.blendMode,h.scissor),n=this._batcher.data;n[h]=b[0];
n[++h]=b[1];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[2];n[++h]=b[3];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[4];n[++h]=b[5];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[6];n[++h]=b[7];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,h=hd._scratchQuadArray;h[0]=a;h[1]=b;h[2]=a+c;h[3]=b+d;e.matrix.transformArray(h,4,h);this._inverseProjection.transformArray(h,
4,h);a=h[0];b=h[1];c=h[2]-a;d=h[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new lh;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new ed;this._inverseProjection.set(2/a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=hd._scratchQuadArray;
e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:hd};var lh=function(){this.scissor=this.prev=this.next=null;this.matrix=new ed;this.alpha=1;this.blendMode=Ca.Normal};g["flambe.platform.html._WebGLGraphics.DrawingState"]=lh;lh.__name__=["flambe","platform","html","_WebGLGraphics","DrawingState"];lh.prototype={applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=zb.max(this.scissor.x,a),h=zb.max(this.scissor.y,b),c=zb.min(this.scissor.x+
this.scissor.width,a+c),d=zb.min(this.scissor.y+this.scissor.height,b+d),a=e,b=h,c=c-e,d=d-h;else this.scissor=new yb;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:lh};var Ug=function(a,b){var c=this;this._hasGPU=new Na(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(l(this,this.onResize));
this.init()};g["flambe.platform.html.WebGLRenderer"]=Ug;Ug.__name__=["flambe","platform","html","WebGLRenderer"];Ug.__interfaces__=[Pf];Ug.prototype={get_type:function(){return gd.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new re(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},createTexture:function(a,b){if(this.gl.isContextLost())return null;var c=new re(this,a,b);c.clear();return c.createTexture(a,b)},getCompressedTextureFormats:function(){return[]},
createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Ak(this.gl);this.graphics=new hd(this.batcher,null);this.onResize()},__class__:Ug,__properties__:{get_type:"get_type"}};var mh=function(a,b,c){fd.call(this,a,b,c)};
g["flambe.platform.html.WebGLTexture"]=mh;mh.__name__=["flambe","platform","html","WebGLTexture"];mh.__super__=fd;mh.prototype=k(fd.prototype,{__class__:mh});var re=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=zb.max(2,wk.nextPowerOfTwo(b));this.height=zb.max(2,wk.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,
10240,9729);b.texParameteri(3553,10241,9729)};g["flambe.platform.html.WebGLTextureRoot"]=re;re.__name__=["flambe","platform","html","WebGLTextureRoot"];re.__interfaces__=[eh];re.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};re.__super__=Gb;re.prototype=k(Gb.prototype,{createTexture:function(a,b){return new mh(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=oa.createEmptyCanvas(this.width,
this.height);b.getContext("2d").drawImage(a,0,0);re.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},clear:function(){this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,null)},getGraphics:function(){if(null==this._graphics){this._graphics=new hd(this._renderer.batcher,this);this._graphics.onResize(this.width,this.height);var a=
this._renderer.gl;this.framebuffer=a.createFramebuffer();this._renderer.batcher.bindFramebuffer(this);a.framebufferTexture2D(36160,36064,3553,this.nativeTexture,0)}return this._graphics},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:re});var xc=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();
a.attachShader(this._program,xc.createShader(a,35633,b));a.attachShader(this._program,xc.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};g["flambe.platform.shader.ShaderGL"]=xc;xc.__name__=["flambe","platform","shader","ShaderGL"];xc.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};xc.prototype={useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,
a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:xc};var jh=function(a){xc.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};g["flambe.platform.shader.DrawPatternGL"]=jh;jh.__name__=["flambe","platform","shader","DrawPatternGL"];jh.__super__=xc;jh.prototype=k(xc.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,
a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:jh});var ih=function(a){xc.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};g["flambe.platform.shader.DrawTextureGL"]=ih;ih.__name__=["flambe","platform","shader","DrawTextureGL"];ih.__super__=xc;ih.prototype=
k(xc.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:ih});var kh=function(a){xc.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};g["flambe.platform.shader.FillRectGL"]=kh;kh.__name__=["flambe","platform","shader","FillRectGL"];kh.__super__=xc;kh.prototype=k(xc.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);
this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:kh});var nh=function(){this._transitor=null;j.call(this);this.scenes=[];this.occludedScenes=[];this._root=new o};g["flambe.scene.Director"]=nh;nh.__name__=["flambe","scene","Director"];nh.__super__=j;nh.prototype=k(j.prototype,{get_name:function(){return"Director_35"},pushScene:function(a,b){var c=this;this.completeTransition();
var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),this.invalidateVisibility())},popScene:function(a){var b=this;this.completeTransition();var c=this.get_topScene();if(null!=c){this.scenes.pop();var d=this.get_topScene();null!=d?this.playTransition(c,d,a,function(){b.hideAndDispose(c)}):(this.hideAndDispose(c),this.invalidateVisibility())}},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<
this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=
this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=this.get_topScene();null!=b&&this._root.removeChild(b);M.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_2;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_2;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_2;if(null==b||b.opaque)break}this.occludedScenes=
0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new Bk(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},__class__:nh,__properties__:k(j.prototype.__properties__,
{get_topScene:"get_topScene"})});var Bk=function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};g["flambe.scene._Director.Transitor"]=Bk;Bk.__name__=["flambe","scene","_Director","Transitor"];Bk.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:Bk};var Tf=function(){};g["flambe.scene.Transition"]=Tf;Tf.__name__=["flambe",
"scene","Transition"];Tf.prototype={init:function(a,b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Tf};var ge=function(a,b){this._duration=a;this._ease=null!=b?b:D.linear};g["flambe.scene.TweenTransition"]=ge;ge.__name__=["flambe","scene","TweenTransition"];ge.__super__=Tf;ge.prototype=k(Tf.prototype,{init:function(a,b,c){Tf.prototype.init.call(this,a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},
interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/this._duration)},__class__:ge});var oh=function(a,b){ge.call(this,a,b)};g["flambe.scene.FadeTransition"]=oh;oh.__name__=["flambe","scene","FadeTransition"];oh.__super__=ge;oh.prototype=k(ge.prototype,{init:function(a,b,c){ge.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_5;null==a&&this._to.add(a=new s);a.alpha.set__(0)},update:function(a){a=ge.prototype.update.call(this,a);this._to._compMap.Sprite_5.alpha.set__(this.interp(0,
1));return a},complete:function(){this._to._compMap.Sprite_5.alpha.set__(1)},__class__:oh});var Jd=function(a){null==a&&(a=!0);j.call(this);this.opaque=a;this.shown=new pa;this.hidden=new pa};g["flambe.scene.Scene"]=Jd;Jd.__name__=["flambe","scene","Scene"];Jd.__super__=j;Jd.prototype=k(j.prototype,{get_name:function(){return"Scene_2"},__class__:Jd});var Kd=function(){};g["flambe.script.Action"]=Kd;Kd.__name__=["flambe","script","Action"];Kd.prototype={__class__:Kd};var Za=function(a,b,c,d){this._value=
a;this._by=b;this._seconds=c;this._easing=d};g["flambe.script.AnimateBy"]=Za;Za.__name__=["flambe","script","AnimateBy"];Za.__interfaces__=[Kd];Za.prototype={update:function(a){null==this._tween&&(this._tween=new He(this._value._value,this._value._value+this._by,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:Za};
var hc=function(a,b,c,d){this._value=a;this._to=b;this._seconds=c;this._easing=d};g["flambe.script.AnimateTo"]=hc;hc.__name__=["flambe","script","AnimateTo"];hc.__interfaces__=[Kd];hc.prototype={update:function(a){null==this._tween&&(this._tween=new He(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},
__class__:hc};var ab=function(a){this._fn=a};g["flambe.script.CallFunction"]=ab;ab.__name__=["flambe","script","CallFunction"];ab.__interfaces__=[Kd];ab.prototype={update:function(){this._fn();return 0},__class__:ab};var Oa=function(a){this._duration=a;this._elapsed=0};g["flambe.script.Delay"]=Oa;Oa.__name__=["flambe","script","Delay"];Oa.__interfaces__=[Kd];Oa.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-
b}return-1},__class__:Oa};var fb=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};g["flambe.script.Parallel"]=fb;fb.__name__=["flambe","script","Parallel"];fb.__interfaces__=[Kd];fb.prototype={add:function(a){this._runningActions.push(a)},update:function(a,b){for(var c=!0,d=0,e=0,h=this._runningActions.length;e<h;){var n=e++,f=this._runningActions[n];if(null!=f){var da=f.update(a,b);0<=da?(this._runningActions[n]=null,this._completedActions.push(f),da>d&&(d=da)):c=
!1}}return c?(this._runningActions=this._completedActions,this._completedActions=[],d):-1},__class__:fb};var Uf=function(a,b){null==b&&(b=-1);this._action=a;this._remaining=this._count=b};g["flambe.script.Repeat"]=Uf;Uf.__name__=["flambe","script","Repeat"];Uf.__interfaces__=[Kd];Uf.prototype={update:function(a,b){if(0==this._count)return 0;var c=this._action.update(a,b);return 0<this._count&&0<=c&&0==--this._remaining?(this._remaining=this._count,c):-1},__class__:Uf};var Sb=function(){j.call(this);
this.stopAll()};g["flambe.script.Script"]=Sb;Sb.__name__=["flambe","script","Script"];Sb.__super__=j;Sb.prototype=k(j.prototype,{get_name:function(){return"Script_28"},run:function(a){a=new ph(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:Sb});var ph=function(a){this.removed=!1;this.action=a};g["flambe.script._Script.Handle"]=
ph;ph.__name__=["flambe","script","_Script","Handle"];ph.__interfaces__=[gc];ph.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:ph};var Ra=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};g["flambe.script.Sequence"]=Ra;Ra.__name__=["flambe","script","Sequence"];Ra.__interfaces__=[Kd];Ra.prototype={add:function(a){this._runningActions.push(a)},removeAll:function(){this._idx=0;this._runningActions=[]},update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];
if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:Ra};var qh=function(a,b,c){this._strengthX=a;this._strengthY=b;this._duration=c;this._elapsed=0};g["flambe.script.Shake"]=qh;qh.__name__=["flambe","script","Shake"];qh.__interfaces__=[Kd];qh.prototype={update:function(a,b){var c=b._compMap.Sprite_5;null==this._jitterX&&(this._jitterX=new Kf(c.x._value,this._strengthX),this._jitterY=
new Kf(c.y._value,this._strengthY),c.x.set_behavior(this._jitterX),c.y.set_behavior(this._jitterY));this._elapsed+=a;if(this._elapsed>=this._duration){var d=this._elapsed-this._duration;c.x._behavior==this._jitterX&&c.x.set__(this._jitterX.base);c.y._behavior==this._jitterY&&c.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-d}return-1},__class__:qh};var gd=g["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D",
"WebGL","Canvas"]};gd.Stage3D=["Stage3D",0];gd.Stage3D.toString=p;gd.Stage3D.__enum__=gd;gd.WebGL=["WebGL",1];gd.WebGL.toString=p;gd.WebGL.__enum__=gd;gd.Canvas=["Canvas",2];gd.Canvas.toString=p;gd.Canvas.__enum__=gd;var rh=function(){};g["flambe.swf.Symbol"]=rh;rh.__name__=["flambe","swf","Symbol"];rh.prototype={__class__:rh};var sh=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=
0};g["flambe.swf.BitmapSymbol"]=sh;sh.__name__=["flambe","swf","BitmapSymbol"];sh.__interfaces__=[rh];sh.prototype={createSprite:function(){var a=new Y(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:sh};var Ck=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new C;this.frameRate=c.frameRate;for(var d=[],e=0,h=c.movies;e<h.length;){var n=h[e];++e;n=new th(this,n);d.push(n);this._symbols.set(n._name,n)}c=c.textureGroups;
(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(e=0;e<c.length;){var f=c[e];++e;h=a.getTexture(b+"/"+ka.removeFileExtension(f.file));n=0;for(f=f.textures;n<f.length;){var da=f[n];++n;da=new sh(da,h);this._symbols.set(da._name,da)}}for(c=0;c<d.length;){h=d[c];++c;e=0;for(h=h.layers;e<h.length;){n=h[e];++e;n=n.keyframes;f=n.length;for(da=0;da<f;){var g=da++,i=n[g];if(null!=i.symbolName){var j=this._symbols.get(i.symbolName);i.symbol=j}if(i.tweened&&1==i.duration&&g+1<f&&(g=n[g+1],!g.visible||
null==g.symbolName))i.visible=!1}}}};g["flambe.swf.Library"]=Ck;Ck.__name__=["flambe","swf","Library"];Ck.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw ka.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:Ck};var Vf=function(a){this._looped=null;s.call(this);this.symbol=a;this.speed=new Q(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new Dk(a.layers[d])}this._position=
this._frame=0;this["goto"](1)};g["flambe.swf.MovieSprite"]=Vf;Vf.__name__=["flambe","swf","MovieSprite"];Vf.__super__=s;Vf.prototype=k(s.prototype,{getLayer:function(a,b){null==b&&(b=!0);for(var c=0,d=this._animators;c<d.length;){var e=d[c];++c;if(e.layer.name==a)return e.content}if(b)throw ka.withFields("Missing layer",["name",a]);return null},onAdded:function(){s.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},onRemoved:function(){s.prototype.onRemoved.call(this);
for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onUpdate:function(a){s.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=
0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=zb.clamp(a,0,this.symbol.duration)},get_looped:function(){null==this._looped&&(this._looped=new pa);return this._looped},set_pixelSnapping:function(a){for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.setPixelSnapping(a)}return s.prototype.set_pixelSnapping.call(this,a)},
rewind:function(){this._position=0;this._flags|=256},__class__:Vf,__properties__:k(s.prototype.__properties__,{get_looped:"get_looped",set_position:"set_position"})});var Dk=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new o;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new s:
e.symbol.createSprite()}this.content.add(this._sprites[0])}};g["flambe.swf._MovieSprite.LayerAnimator"]=Dk;Dk.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];Dk.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_5.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;
this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_5&&(ca.getClass(d)==Vf&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_5;var e=b[this.keyframeIdx],h=e.visible&&null!=e.symbol;d.set_visible(h);if(h){var h=e.x,n=e.y,f=e.scaleX,da=e.scaleY,g=e.skewX,i=e.skewY,j=e.alpha;if(e.tweened&&this.keyframeIdx<c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var k;0>c?(k=1-a,k=1-k*k,c=-c):k=a*a;a=c*k+(1-c)*a}b=b[this.keyframeIdx+
1];h+=(b.x-h)*a;n+=(b.y-n)*a;f+=(b.scaleX-f)*a;da+=(b.scaleY-da)*a;g+=(b.skewX-g)*a;i+=(b.skewY-i)*a;j+=(b.alpha-j)*a}b=d.getLocalMatrix();a=Math.sin(g);g=Math.cos(g);c=Math.sin(i);i=Math.cos(i);b.set(i*f,c*f,-a*da,g*da,h,n);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(j)}}}},setPixelSnapping:function(a){for(var b=0,c=this._sprites;b<c.length;){var d=c[b];++b;d.set_pixelSnapping(a)}},__class__:Dk};var th=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);
for(var c=0,d=this.layers.length;c<d;){var e=c++,h=new Ek(b.layers[e]);this.frames=Math.max(h.frames,this.frames);this.layers[e]=h}this.duration=this.frames/this.frameRate};g["flambe.swf.MovieSymbol"]=th;th.__name__=["flambe","swf","MovieSymbol"];th.__interfaces__=[rh];th.prototype={createSprite:function(){return new Vf(this)},__class__:th};var Ek=function(a){this.empty=!0;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new Fk(a.keyframes[e],
b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};g["flambe.swf.MovieLayer"]=Ek;Ek.__name__=["flambe","swf","MovieLayer"];Ek.prototype={__class__:Ek};var Fk=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=
a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};g["flambe.swf.MovieKeyframe"]=Fk;Fk.__name__=["flambe","swf","MovieKeyframe"];Fk.prototype={__class__:Fk};var jk=function(){};g["flambe.util.Assert"]=
jk;jk.__name__=["flambe","util","Assert"];jk.that=function(){};var Xg=function(){};g["flambe.util.BitSets"]=Xg;Xg.__name__=["flambe","util","BitSets"];Xg.set=function(a,b,c){return c?a|b:a&~b};var Me=function(){this.success=new T;this.error=new T;this.progressChanged=new pa;this.hasResult=!1;this._total=this._progress=0};g["flambe.util.Promise"]=Me;Me.__name__=["flambe","util","Promise"];Me.prototype={get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},
set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit());return a},__class__:Me,__properties__:{set_total:"set_total",set_progress:"set_progress",
set_result:"set_result",get_result:"get_result"}};var uh=function(a){Me.call(this);this._promises=a.slice();this._successCount=0;this._disposer=new bb;this.onProgressChanged();for(var a=this._promises,b=0;b<a.length;){var c=a[b];++b;this._disposer.connect1(c.error,l(this,this.onError));this._disposer.connect0(c.progressChanged,l(this,this.onProgressChanged));c=c.get(l(this,this.onSuccess));null!=c&&this._disposer.add(c)}};g["flambe.util.MultiPromise"]=uh;uh.__name__=["flambe","util","MultiPromise"];
uh.__super__=Me;uh.prototype=k(Me.prototype,{onSuccess:function(){if(null!=this._promises&&(++this._successCount,this._successCount>=this._promises.length)){for(var a=[],b=0,c=this._promises;b<c.length;){var d=c[b];++b;a.push(d.get_result())}this.finalize();this.set_result(a)}},onError:function(a){null!=this._promises&&(this.finalize(),this.error.emit(a))},onProgressChanged:function(){if(null!=this._promises){for(var a=this._total=this._progress=0,b=this._promises;a<b.length;){var c=b[a];++a;this._progress+=
c._progress;this._total+=c._total}this.progressChanged.emit()}},finalize:function(){this._disposer.dispose();this._promises=null},__class__:uh});var pa=function(a){tb.call(this,a)};g["flambe.util.Signal0"]=pa;pa.__name__=["flambe","util","Signal0"];pa.__super__=tb;pa.prototype=k(tb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;this._head==tb.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=
this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:pa});var gk=function(a){this.next=null;this.fn=a};g["flambe.util._SignalBase.Task"]=gk;gk.__name__=["flambe","util","_SignalBase","Task"];gk.prototype={__class__:gk};var ka=function(){};g["flambe.util.Strings"]=ka;ka.__name__=["flambe","util","Strings"];ka.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?M.substr(a,b+1,null):null};ka.removeFileExtension=function(a){var b=a.lastIndexOf(".");
return 0<b?M.substr(a,0,b):a};ka.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=M.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=M.substr(a,b+1,null));return ka.getFileExtension(a)};ka.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};ka.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&(a+=", ");var e=b[d],h=b[d+1];if(q.is(h,Error)){var n=h.stack;null!=n&&(h=n)}a+=e+"="+q.string(h);d+=2}a+="]"}return a};
var vh=function(){j.call(this);this.sdk=new ic;u.uncaughtError.connect((cb=this.sdk,l(cb,cb.onException)));za.onSuspendToggle=function(a){u.root.add(new ef(a?0:1))}};g["flambesdk.SDKComponent"]=vh;vh.__name__=["flambesdk","SDKComponent"];vh.__super__=j;vh.prototype=k(j.prototype,{get_name:function(){return"SDKComponent_1"},onUpdate:function(a){this.sdk.onUpdate(a)},__class__:vh});var W=function(){};g["game.Analytics"]=W;W.__name__=["game","Analytics"];W.init=function(){null!=m.config.canada_tracking&&
(W.canadaTrackingEnabled=m.config.canada_tracking.enabled);aa.initDeltaDNA(m.config,W.onDeltaDNAReady)};W.onDeltaDNAReady=function(){W.isReady=!0;w.isNewPlayer&&W.track("newPlayer",{referrer:w.getCurrentURL()});W.track("gameStarted");w.trackClientDevice()};W.getMatchId=function(){return"Round_"+(ha.getLvlIndexByName(m.currentLevel)+1)};W.getGameMode=function(){return m.inTournament?"tournament":"derby"};W.getUserLevel=function(){return m.game.maxLevel()};W.track=function(a,b){null==b&&(b={});b.userLevel=
W.getUserLevel();w.track(a,b)};W.trackMatch=function(a,b){W.track(a,U.merge(b,{matchID:W.getMatchId(),matchType:W.getGameMode()}))};W.trackMatchEnd=function(a){W.trackMatch(a,{userScore:m.score,starsCollected:m.starsCollected,okScore:m.oks,goodScore:m.goods,perfectScore:m.perfects,superAbilityActivated:m.superAbilityActivated,timeInRound:m.timeInRound})};W.trackUI=function(a,b){W.track("uiInteraction",{UIName:a,UIAction:"Click",UIType:"Button",UILocation:b})};W.trackPlayButton=function(){W.canadaTrackingEnabled&&
u._platform.getExternal().call("trackFlashEvent",["Show Title: Game Title","play","true"])};W.emitSdkEvent=function(a,b){Ld.sendGameEvent(a,b)};var ud=function(){};g["game.Main"]=ud;ud.__name__=["game","Main"];ud.main=function(){xa.init();u.init();r.init(x.width,x.height);var a=new aa(!0);u.root.add(a);G.setScenes(wh.scenes);G.onChange.connect(ud.onSceneChange);A.loadPacks(["config","ui_loading"],ud.onInitPacksReady)};ud.start=function(){if(m.config.unlockAll){for(var a=0,b=I.list;a<b.length;){var c=
b[a];++a;m.game.unlockCharacter(c.name)}a=0;for(b=ha.LIST;a<b.length;)c=b[a],++a,m.game.unlockLevel(c)}W.emitSdkEvent("onLoadingEnd");G.change(wh.DefaultScene)};ud.onSceneChange=function(){F.killAll()};ud.onInitPacksReady=function(){m.init();W.init();W.emitSdkEvent("onLoadingStart");va.checkPiracy(m.config.nick.url);aa.configure(m.config);G.change("Loading",G.createInstantTransition());jc.instance.load("text,fonts,ui,ui_title,ui_level,ui_character,levels,actors".split(","),ud.onBasePacksLoaded)};
ud.onBasePacksLoaded=function(){v.loadSounds(r.mobile&&r.slow?"sound_mobile":"sound");O.setSharedAssets("ui");K.addFontPack(A.getPack("fonts"));Sa.loadXML();Ta.init("actors",ul.components,!0);ud.start()};var B=function(a){null==a&&(a=!0);this._disposer=new bb;Jd.call(this,a)};g["stolo.ui.BaseScene"]=B;B.__name__=["stolo","ui","BaseScene"];B.__super__=Jd;B.prototype=k(Jd.prototype,{dispose:function(){Jd.prototype.dispose.call(this);this.set_pack(null)},loadAssets:function(a,b){null==b&&(b=!0);this._loadedPackName=
a;this._autoDisposePack=b;A.loadPack(a,l(this,this.onAssetsLoaded))},onAssetsLoaded:function(a){this.set_pack(a)},onAssetsReady:function(){},onStart:function(){this.owner.add(this._disposer);this.makeReady()},makeReady:function(){if(!this.isReady&&!(null==this._pack||null==this.owner))this.onAssetsReady(),this.isReady=!0},createButton:function(a,b,c,d,e,h){null==d&&(d="buttons");a=O.createButton(a,b,c,d,this.getPack(h));this.addSprite(a,e);return a},createImage:function(a,b,c){a=O.createImage(a,this.getPack(c));
this.addSprite(a,b);return a},createText:function(a,b,c,d){a=K.getLocalizedTextSprite(a,b,0,0,d);this.addSprite(a,c);return a},addSprite:function(a,b){null==b&&(b=this.owner);return O.addSprite(a,b)},addSoundBtn:function(a,b){var c=O.createSoundButton(b);c.setXY(877,15);this.addSprite(c,a);return c},getTexture:function(a,b){return O.getTexture(a,this.getPack(b))},getPack:function(a){null==a&&(a=this._pack);null==a&&(a=O.get_sharedAssets());return a},set_pack:function(a){null!=this._pack&&null!=this._loadedPackName&&
this._autoDisposePack&&this._pack!=a&&(A.disposePack(this._loadedPackName),this._loadedPackName=null);this._pack=a;null!=a&&this.makeReady();return this._pack},__class__:B,__properties__:k(Jd.prototype.__properties__,{set_pack:"set_pack"})});var Tb=function(a){this._time=0;B.call(this);this._packName=a};g["stolo.ui.PreloadingScene"]=Tb;Tb.__name__=["stolo","ui","PreloadingScene"];Tb.__super__=B;Tb.prototype=k(B.prototype,{dispose:function(){B.prototype.dispose.call(this);this._loader=null},onStart:function(){B.prototype.onStart.call(this);
null==this._packName&&(this._packName=Tb.defaultPack);this.loadAssets(this._packName,!1)},onUpdate:function(a){B.prototype.onUpdate.call(this,a);this._time+=a},load:function(a,b){this.set_loader(A.loadPacks(a,b));return this._loader},setProgress:function(){},set_loader:function(a){this._loader=a;null!=this._loader&&this._disposer.add(this._loader.progressChanged.connect(l(this,this.onLoaderProgress)));return this._loader},onLoaderProgress:function(){this.setProgress(this._loader._progress/this._loader._total)},
__class__:Tb,__properties__:k(B.prototype.__properties__,{set_loader:"set_loader"})});var jc=function(){Tb.call(this);jc.instance=this};g["game.ui.Loading"]=jc;jc.__name__=["game","ui","Loading"];jc.__super__=Tb;jc.prototype=k(Tb.prototype,{dispose:function(){this._barLoading=null;Tb.prototype.dispose.call(this);jc.instance==this&&(jc.instance=null)},onAssetsReady:function(){this.createImage("bg");var a=new Ke(this._pack,"loading");this._txtProgress=new Ya(a,"0%");this._txtProgress.setXY(440,350);
this.owner.addChild((new o).add(this._txtProgress));a=new vb("loading","ui_loading");a.speed.set__(0.3);this.owner.addChild((new o).add(a));a.centerAnchor().setXY(x.width/2,160);this._barLoading=new Y(A.getPack("ui_loading").getTexture("bar_loading"));this._barLoading.setXY(270,300);this.owner.addChild((new o).add(this._barLoading));this._barLoading.scissor=new yb(0,0,0,this._barLoading.getNaturalHeight())},onLoaderProgress:function(){if(null!=this._barLoading){var a=this._loader._progress/this._loader._total;
this._txtProgress.set_text(Math.round(100*a)+"%");this._barLoading.scissor.width=this._barLoading.getNaturalWidth()*a}},__class__:jc});var xh=function(){B.call(this)};g["game.ui.Gameplay"]=xh;xh.__name__=["game","ui","Gameplay"];xh.__super__=B;xh.prototype=k(B.prototype,{onAdded:function(){this._gameEntity=new o;V.codeUnlocked("NIGHTLIFE")?this._gameEntity.add(new Da(0,960,560)):this._gameEntity.add(new Da(2047130,960,560));x.slimeBall&&0.25<=Math.random()&&(m.slimeBall=!0);this._gameSystem=new yh;
this._gameEntity.add(this._gameSystem);this.owner.addChild(this._gameEntity);this.owner.addChild(this._gameSystem.hud.container);this.owner.addChild(this._gameSystem.tut.container);W.trackMatch("matchStarted")},__class__:xh});var zh=function(){this._assetsLoaded=!1;this._nextDotIn=this._nbDot=0;this._loadingDotRate=0.5;B.call(this)};g["game.ui.GameplayLoading"]=zh;zh.__name__=["game","ui","GameplayLoading"];zh.__super__=B;zh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.loadAssets("ui_preview")},dispose:function(){B.prototype.dispose.call(this)},onAssetsReady:function(){this.createImage("bg");this._curLevel=m.currentLevel;this._curLevelIndex=ha.getLvlIndexByName(this._curLevel);var a=this.createText("WIN_LEVEL","lobster_white_shadow",null,{l:this._curLevelIndex+1});a.setAlign(Z.Left);a.setXY(36,15);this.owner.addChild((new o).add(a));this.createHighScore();this.createTarget();this.createVs(m.currentCharacter,m.currentOpponent);this.createTeamLogo();this.owner.addChild((new o).add(new Ah));
this.preparePlayButton();this.addSoundBtn();this.load(ha.get(m.currentLevel).getPacks(),l(this,this.onPacksLoaded))},createHighScore:function(){var a=this.createText("PREVIEW_HIGH_SCORE","small_white");a.setAlign(Z.Left);a.setXY(36,66);this.owner.addChild((new o).add(a));var b=this.createText("","info_sm");b.set_text(q.string(m.game.getHighScore(this._curLevel)));b.setAlign(Z.Left);b.setXY(a.x._value+a.getNaturalWidth()+5,68);this.owner.addChild((new o).add(b))},createTarget:function(){var a=this.createImage("target_bg");
a.setXY(0,104);this.owner.addChild((new o).add(a));var b=this.createText("TARGET","lobster_small_black",a.owner);b.set_align(Z.Right);b.setScale(0.7);b.setXY(90,8);var b=ha.getLvlIndexByName(m.currentLevel),c=K.getTextSprite("small_purple");c.set_text(x.starRatings[b][0]+"");c.set_align(Z.Left);c.setXY(100,6);c.setScale(1.3);a.owner.addChild((new o).add(c))},createTeamLogo:function(){var a=this.createText(m.currentCharacter.team,"info_team");a.setScale(0.67);a.setXY(500,360);this.createImage("characters/"+
m.currentCharacter.team).centerAnchor().setXY(450,385)},createVs:function(){this.createImage("characters/avatar_"+m.currentCharacter.name).setXY(207,91);var a=this.createText("VS","lobster_white_shadow");a.setAlign(Z.Left);a.setXY(500,235);this.owner.addChild((new o).add(a));a=this.createImage("characters/pitch_"+m.currentOpponent.name);a.setScale(0.67);a.setXY(525,60);a=this.createImage("characters/catcher_"+m.currentOpponent.team);a.setScale(0.5);a.setXY(745,160)},preparePlayButton:function(){this._loadingText=
Sa.localize("LOADING").text;this._loadingLabel=this.createText("LOADING","lobster_white_shadow",null,{l:this._curLevelIndex+1});this._loadingLabel.localized=!1;this._loadingLabel.setAlign(Z.Left);this._loadingLabel.setXY(750,460);this.owner.addChild((new o).add(this._loadingLabel));this._playBtn=this.createButton(l(this,this.onPlay),"btn_play");this._playBtn.centerAnchor().setXY(890,490-x.getOffset());this.owner.removeChild(this._playBtn.owner)},onUpdate:function(a){B.prototype.onUpdate.call(this,
a);null!=this._loadingLabel&&(this._nextDotIn-=a,0>=this._nextDotIn&&this.updateLoading());v.isLoaded()&&this._assetsLoaded&&null==this._playBtn.owner.parent&&(this.owner.removeChild(this._loadingLabel.owner),this._loadingLabel=null,this.owner.addChild(this._playBtn.owner))},updateLoading:function(){this._nbDot++;3<this._nbDot&&(this._nbDot=0);for(var a=this._loadingText+" ",b=0,c=this._nbDot;b<c;)b++,a+=".";this._loadingLabel.set_text(a);this._nextDotIn=this._loadingDotRate},load:function(a,b){this._loader=
A.loadPacks(a,b)},onPacksLoaded:function(){this._assetsLoaded=!0},onPlay:function(){W.trackUI(W.getGameMode(),"Play Loading");v.play("silence");G.change("gameplay")},__class__:zh});var Bh=function(){this._assetsLoaded=!1;this._nextDotIn=this._nbDot=0;this._loadingDotRate=0.5;B.call(this)};g["game.ui.DerbyLoading"]=Bh;Bh.__name__=["game","ui","DerbyLoading"];Bh.__super__=B;Bh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_derby")},dispose:function(){B.prototype.dispose.call(this)},
onAssetsReady:function(){this.createImage("bg");this._curLevel=m.currentLevel;this._curLevelIndex=ha.getLvlIndexByName(this._curLevel);var a=this.createText("DERBY_TITLE","lobster_white_shadow");a.setAlign(Z.Left);a.setXY(36,35);this.owner.addChild((new o).add(a));a=this.createText("DERBY_TIME_LIMIT","small_white");a.setAlign(Z.Left);a.setWrapWidth(150);a.setXY(650,135);this.owner.addChild((new o).add(a));a=this.createText("DERBY_INFINITE_BALLS","small_white");a.setAlign(Z.Left);a.setWrapWidth(150);
a.setXY(650,220);this.owner.addChild((new o).add(a));a=this.createText("DERBY_EXPLODING_BALL","small_white");a.setAlign(Z.Left);a.setWrapWidth(150);a.setXY(650,305);this.owner.addChild((new o).add(a));this.createHighScore();this.createAvatar(m.currentCharacter);this.createTeamLogo();this.preparePlayButton();this.addSoundBtn();this.load(ha.get(m.currentLevel).getPacks(),l(this,this.onPacksLoaded))},createHighScore:function(){var a=this.createText("PREVIEW_HIGH_SCORE","small_white");a.setAlign(Z.Left);
a.setXY(36,88);a.setScale(0.8);this.owner.addChild((new o).add(a));var b=this.createText("","info_sm");b.set_text(q.string(m.game.getHighScore("derby")));b.setAlign(Z.Left);b.setXY(a.x._value+0.8*a.getNaturalWidth()+5,88);this.owner.addChild((new o).add(b))},createTeamLogo:function(){var a=this.createText(m.currentCharacter.team,"info_team");a.setScale(0.67);a.setXY(360,360);this.createImage("characters/"+m.currentCharacter.team).centerAnchor().setXY(310,385)},createAvatar:function(){this.createImage("characters/avatar_"+
m.currentCharacter.name).setXY(62,135)},preparePlayButton:function(){this._loadingText=Sa.localize("LOADING").text;this._loadingLabel=this.createText("LOADING","lobster_white_shadow",null,{l:this._curLevelIndex+1});this._loadingLabel.localized=!1;this._loadingLabel.setAlign(Z.Left);this._loadingLabel.setXY(750,460);this.owner.addChild((new o).add(this._loadingLabel));this._playBtn=this.createButton(l(this,this.onPlay),"btn_play");this._playBtn.centerAnchor().setXY(890,490-x.getOffset());this.owner.removeChild(this._playBtn.owner)},
onUpdate:function(a){B.prototype.onUpdate.call(this,a);null!=this._loadingLabel&&(this._nextDotIn-=a,0>=this._nextDotIn&&this.updateLoading());v.isLoaded()&&this._assetsLoaded&&null==this._playBtn.owner.parent&&(this.owner.removeChild(this._loadingLabel.owner),this._loadingLabel=null,this.owner.addChild(this._playBtn.owner))},updateLoading:function(){this._nbDot++;3<this._nbDot&&(this._nbDot=0);for(var a=this._loadingText+" ",b=0,c=this._nbDot;b<c;)b++,a+=".";this._loadingLabel.set_text(a);this._nextDotIn=
this._loadingDotRate},load:function(a,b){this._loader=A.loadPacks(a,b)},onPacksLoaded:function(){this._assetsLoaded=!0},onPlay:function(){W.trackUI(W.getGameMode(),"Play Loading");m.inTournament=!1;v.play("silence");G.change("gameplay")},__class__:Bh});var Ch=function(){B.call(this)};g["game.ui.Editor"]=Ch;Ch.__name__=["game","ui","Editor"];Ch.__super__=B;Ch.prototype=k(B.prototype,{onAdded:function(){this._entity=new o;this._entity.add(new s);this._system=new kc(ha.get(m.currentLevel));this._entity.add(this._system);
this.owner.addChild(this._entity)},__class__:Ch});var Dh=function(){jc.call(this)};g["game.ui.EditorLoading"]=Dh;Dh.__name__=["game","ui","EditorLoading"];Dh.__super__=jc;Dh.prototype=k(jc.prototype,{dispose:function(){jc.prototype.dispose.call(this)},onAssetsReady:function(){jc.prototype.onAssetsReady.call(this);this.load(ha.get(m.currentLevel).getPacks(!0),l(this,this.onPacksLoaded))},onPacksLoaded:function(){G.change("editor")},__class__:Dh});var Eh=function(){this._gotoEnd=!1;B.call(this,!1)};
g["game.ui.GameplayWin"]=Eh;Eh.__name__=["game","ui","GameplayWin"];Eh.__super__=B;Eh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_win")},onStop:function(){F.killAll();this._btnNext=null;B.prototype.onStop.call(this)},onAssetsReady:function(){v.play("sting_win");F.delayCallTo(function(){v.playMusic("menu")},0.5);this._curLevel=m.currentLevel;this._curLevelIndex=ha.getLvlIndexByName(this._curLevel);this._levelList=ha.LIST;this._curLevelIndex==this._levelList.length-
1?this._gotoEnd=!0:m.game.unlockLevel(this._levelList[this._curLevelIndex+1]);this.createImage("bg");this.buildConfettiBG();this.createMiniField();this.createImage("characters/avatar_"+m.currentCharacter.name).setXY(75,135);this.createImage("characters/"+m.currentCharacter.team).setXY(246,381);var a=this.createText(m.currentCharacter.team,"info_team");a.setXY(359,400);a.setScale(0.7);this.buildConfettiFG();this.addSoundBtn();this._btnChangeCharacter=this.createButton(l(this,this.backToCharacters),
"btn_character",null,null,null,A.getPack("ui")).centerAnchor().setXY(85,455-x.getOffset());this._btnChangeCharacter.setAlpha(0);this._btnChangeCharacter.set_pointerEnabled(!1);B.prototype.onAssetsReady.call(this)},createMiniField:function(){var a=this,b=m.score,c=[{textY:133,txtName:"WIN_MEH",numY:160,textData:m.oks},{textY:197,txtName:"WIN_GOOD",numY:223,textData:m.goods},{textY:262,txtName:"WIN_PERFECT",numY:287,textData:m.perfects},{textY:334,txtName:"WIN_SCORE",numY:363,textData:b}];m.game.setScore(this._curLevel,
b);var d=0,e;e=V.codeUnlocked("HARDCORE")?x.starRatingsHardcore[this._curLevelIndex]:x.starRatings[this._curLevelIndex];for(var h=0;h<e.length;){var n=e[h];++h;if(b>n)d++;else break}m.game.setStars(this._curLevel,d);for(var f=[{dotsPos:{x:635,y:426},starPos:{x:777,y:254},starName:"star"},{dotsPos:{x:765,y:213},starPos:{x:590,y:72},starName:"star"},{dotsPos:{x:552,y:84},starPos:{x:402,y:254},starName:"star"},{dotsPos:{x:416,y:301},starPos:{x:590,y:445},starName:"star_home"}],g=new o,b=0;b<d;)e=[b++],
F.delayCallTo(function(b){return function(){var c=(new vb("win_dots","ui",null,!1)).setXY(f[b[0]].dotsPos.x,f[b[0]].dotsPos.y).setRotation(-45+-90*b[0]);c.speed.set__(0.5);c.gotoAndPlay("idle",{loop:!1});g.addChild((new o).add(c));F.delayCallTo(function(b){return function(){v.play("win_star","WIN");var c=a.createImage(f[b[0]].starName,g);c.centerAnchor().setXY(f[b[0]].starPos.x,f[b[0]].starPos.y);c.setScale(1.5);c.scaleX.animateTo(1,0.4,D.bounceInOut);c.scaleY.animateTo(1,0.4,D.bounceInOut)}}(b),
1,g)}}(e),1.2*(e[0]+1));b=this.createText("WIN_LEVEL","lobster_white_shadow",null,{l:this._curLevelIndex+1});b.setAlign(Z.Left);b.setXY(36,20);g.addChild((new o).add(b));b=this.createText("WIN_TITLE","title");b.setAlign(Z.Left);b.setXY(36,59);g.addChild((new o).add(b));b=this.createText("WIN_HIGH_SCORE","small_white",null,{n:m.game.getHighScore(this._curLevel)});b.setAlign(Z.Left);b.setXY(36,116);g.addChild((new o).add(b));for(b=0;4>b;)e=b++,h=this.createText(c[e].txtName,"small_white"),h.setXY(591,
c[e].textY),g.addChild((new o).add(h)),h=this.createText("","numbers"),h.set_text(c[e].textData+""),h.setXY(591,c[e].numY),g.addChild((new o).add(h));this._btnNext=this.createButton(l(this,this.onClick),"btn_play").setXY(817,430-x.getOffset());this._btnNext.setAlpha(0);this._btnNext.set_pointerEnabled(!1);g.addChild(this._btnNext.owner);this.owner.addChild(g);F.delayCallTo(l(this,this.introComplete),1.2*(d+1))},introComplete:function(){if(null!=m.currentCharacter.unlocks){var a=I.getDataByName(m.currentCharacter.unlocks);
m.game.tryUnlockCharacter(a.name)&&(m.game.unlockCharacter(m.currentCharacter.unlocks),G.push("NewCharacter"))}this._btnNext.setAlpha(1);this._btnNext.set_pointerEnabled(!0);this._btnChangeCharacter.setAlpha(1);this._btnChangeCharacter.set_pointerEnabled(!0);m.config.showNickSportPopup&&G.push("NickSportPopup")},onClick:function(){W.trackUI("CONTINUE","End Game (Win)");this._gotoEnd?G.change("End"):(m.currentLevel="level"+(this._curLevelIndex+2),G.change("GameplayLoading"))},backToCharacters:function(){W.trackUI("CHARACTERS",
"End Game (Win)");G.change("SelectCharacter")},buildConfettiBG:function(){var a=new Wf(x.width,x.height);a.autoStart=!1;this.owner.add(a);a.maxCount=80;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=0.333*x.width;a.centerX=m.hasWon?x.width/6:5*x.width/6;return a},buildConfettiFG:function(){var a=new Wf(x.width,x.height);a.autoStart=!1;this.owner.addChild((new o).add(a));a.maxCount=20;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.width=0.333*x.width;a.centerX=m.hasWon?
x.width/6:5*x.width/6;return a},__class__:Eh});var Fh=function(){B.call(this)};g["game.ui.DerbyWin"]=Fh;Fh.__name__=["game","ui","DerbyWin"];Fh.__super__=B;Fh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_derby_win")},dispose:function(){B.prototype.dispose.call(this)},onAssetsReady:function(){this.createImage("bg");this._curLevel=m.currentLevel;this._curLevelIndex=ha.getLvlIndexByName(this._curLevel);this.createTitle();this.createAvatar(m.currentCharacter);
this.createTeamLogo();this.createMiniField();this.createButtons();this.showNewCharacterPopup();m.config.showNickSportPopup&&G.push("NickSportPopup")},createTitle:function(){var a=this.createText("DERBY_TITLE","lobster_white_shadow");a.setAlign(Z.Left);a.setXY(36,5);this.owner.addChild((new o).add(a));a=this.createText("GOOD_GAME","title");a.setAlign(Z.Left);a.setXY(36,40);this.owner.addChild((new o).add(a));a=this.createText("PREVIEW_HIGH_SCORE","small_white");a.setAlign(Z.Left);a.setXY(36,100);a.setScale(0.8);
this.owner.addChild((new o).add(a));var b=this.createText("","info_sm");b.set_text(q.string(m.game.getHighScore("derby")));b.setAlign(Z.Left);b.setXY(a.x._value+0.8*a.getNaturalWidth()+5,100);this.owner.addChild((new o).add(b))},createTeamLogo:function(){var a=this.createText(m.currentCharacter.team,"info_team");a.setScale(0.67);a.setXY(360,360);this.createImage("characters/"+m.currentCharacter.team).centerAnchor().setXY(310,385)},createAvatar:function(a){this.createImage("characters/avatar_"+a.name).setXY(62,
135)},createMiniField:function(){var a=m.score,b=[{textY:133,txtName:"WIN_MEH",numY:160,textData:m.oks},{textY:197,txtName:"WIN_GOOD",numY:223,textData:m.goods},{textY:262,txtName:"WIN_PERFECT",numY:287,textData:m.perfects},{textY:334,txtName:"WIN_SCORE",numY:363,textData:a}];m.game.setScore("derby",a);for(var a=new o,c,d=0;4>d;){var e=d++;c=this.createText(b[e].txtName,"small_white");c.setXY(665,b[e].textY);a.addChild((new o).add(c));c=this.createText("","numbers");c.set_text(b[e].textData+"");c.setXY(665,
b[e].numY);a.addChild((new o).add(c))}this.owner.addChild(a)},createButtons:function(){this.addSoundBtn();this._restartBtn=this.createButton(l(this,this.onPlay),"btn_restart");this._restartBtn.centerAnchor().setXY(855,470);this._quitBtn=this.createButton(l(this,this.onQuit),"btn_return");this._quitBtn.centerAnchor().setXY(82,470)},showNewCharacterPopup:function(){if(null!=m.currentCharacter.unlocks){var a=I.getDataByName(m.currentCharacter.unlocks);m.game.tryUnlockCharacter(a.name)&&(m.game.unlockCharacter(m.currentCharacter.unlocks),
G.push("NewCharacter"))}},onPlay:function(){G.change("DerbyLoading")},onQuit:function(){m.currentLevel=null;G.change("SelectMode")},__class__:Fh});var se=function(){B.call(this,!1)};g["game.ui.GameplayFail"]=se;se.__name__=["game","ui","GameplayFail"];se.backToCharacters=function(){W.trackUI("CHARACTERS","End Game (Fail)")};se.leave=function(){W.trackUI("LEAVE","End Game (Fail)");G.change("SelectLevel")};se.__super__=B;se.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.loadAssets("ui_fail")},onAssetsReady:function(){v.play("sting_fail");this.createImage("bg");var a=this.createText("FAIL_TITLE","title");a.setWrapWidth(230);a.setXY(265,35);this.createText("FAIL_SUBTITLE","small_white").setXY(385,240);a=K.getTextSprite("small_purple");a.set_text(m.score+"");a.setXY(385,261);a.setScale(1.3);this.owner.addChild((new o).add(a));this.createText("TARGET","small_white").setXY(385,340);var a=ha.getLvlIndexByName(m.currentLevel),b=K.getTextSprite("score_purple");b.set_text(x.starRatings[a][0]+
"");b.set_align(Z.Center);b.setXY(385,365);b.setScale(0.8);this.owner.addChild((new o).add(b));this.createImage("characters/catcher_"+m.currentOpponent.team).setXY(640,133);this.addSoundBtn();this.createImage("characters/pitch_"+m.currentOpponent.name).setXY(404,138);this.owner.addChild(this.createButton(se.leave,"btn_play",null,null,null,A.getPack("ui")).centerAnchor().setXY(853,468-x.getOffset()).owner);this.createButton(se.backToCharacters,"btn_character",null,null,null,A.getPack("ui")).centerAnchor().setXY(85,
455-x.getOffset());B.prototype.onAssetsReady.call(this)},__class__:se});var kf=function(){B.call(this,!1)};g["game.ui.GameplayEnd"]=kf;kf.__name__=["game","ui","GameplayEnd"];kf.onClick=function(){G.change("SelectMode")};kf.__super__=B;kf.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_end");v.playMusic("menu",!0)},onAssetsReady:function(){this.createImage("bg");this.createImage("end_"+m.currentCharacter.team+"_l").setXY(0,71);this.createImage("end_"+
m.currentCharacter.team+"_r").setXY(567,68);this.owner.addChild(this.createButton(kf.onClick,"btn_play").setXY(830,410).owner);this.addSoundBtn();var a=this.createText("AMAZING","hud_callout");a.setXY(x.width/2-a.getNaturalWidth()/2,345).setScale(1);this.owner.addChild(a.owner);a=this.createText("END_STORY","buttons");a.setXY(x.width/2,475);this.owner.addChild(a.owner);B.prototype.onAssetsReady.call(this)},__class__:kf});var Gh=function(){this._glowRotationSpeed=45;this._codePointerDown=!1;B.call(this,
!1)};g["game.ui.Title"]=Gh;Gh.__name__=["game","ui","Title"];Gh.__super__=B;Gh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);W.emitSdkEvent("onTitleScreenStart");this.loadAssets("ui_title");v.playMusic("menu")},onRemoved:function(){this._codePointerDown=!1;this._btnCode=this._star2=this._star1=this._spongebob=this._glow=this._ball=this._logo=this._playLabel=null;B.prototype.onRemoved.call(this)},onAssetsReady:function(){var a=this;B.prototype.onAssetsReady.call(this);
var b=new Da(0,x.width,x.height);this.owner.addChild((new o).add(b));b=this.createImage("bg");this._logo=new Y(this._pack.getTexture("logo"));this._logo.setXY(338,4);this.owner.addChild((new o).add(this._logo));this._glow=new Y(this._pack.getTexture("glow"));this._glow.centerAnchor().setXY(506,373);var c=new o;this._spongebob=new Y(this._pack.getTexture("spongebob"));this._spongebob.setXY(211,151);c.addChild((new o).add(this._glow));c.addChild((new o).add(this._spongebob));this.owner.addChild(c);
this._ball=new Y(this._pack.getTexture("ball"));this._ball.setXY(496,0);this.owner.addChild((new o).add(this._ball));this._star1=new vb("star","ui");this._star1.centerAnchor().setXY(350,120);this.owner.addChild((new o).add(this._star1));this._star2=new vb("star","ui");this._star2.centerAnchor().setXY(610,120);this.owner.addChild((new o).add(this._star2));this._playLabel=this.createText(u._platform.getTouch().get_supported()?"PLAY_TOUCH":"PLAY_TITLE");this._playLabel.setXY(475,455);m.config.codeEnabled&&
(this._btnCode=this.createButton(l(this,this.onGameCode),"btn_large","ENTER_CODE"),this._btnCode.setXY(377,480),this._disposer.add(this._btnCode.get_pointerDown().connect(function(){a._codePointerDown=!0})));F.from(this._logo,{y:x.height/2+this._logo.getNaturalHeight()/2},{time:1,ease:D.quintInOut});F.from(this._star1,{y:x.height/2+this._logo.getNaturalHeight()/2+116},{time:1,ease:D.quintInOut});F.from(this._star2,{y:x.height/2+this._logo.getNaturalHeight()/2+116},{time:1,ease:D.quintInOut});F.from(b,
{alpha:0},{time:1,delay:0.5,ease:D.quintInOut});F.from(this._ball,{x:0,y:x.height},{time:1,delay:1,ease:D.elasticOut});F.from(this._glow,{y:x.height+this._glow.getNaturalHeight()/2},{time:0.5,delay:1,ease:D.expoOut});F.from(this._spongebob,{y:x.height},{time:0.5,delay:1,ease:D.expoOut});F.from(this._playLabel,{alpha:0},{time:1.5,delay:1,ease:D.quintInOut,onComplete:function(){a._playLabel.alpha.set_behavior(new Qc(1,0.5,0.4))}});m.config.codeEnabled&&F.from(this._btnCode,{alpha:0},{time:1.5,delay:0.9,
ease:D.quintInOut})},onStart:function(){B.prototype.onStart.call(this);u._platform.getPointer().up.connect(l(this,this.onClick)).once()},onUpdate:function(a){B.prototype.onUpdate.call(this,a);if(null!=this._glow){var b=this._glow.rotation;b.set__(b._value+this._glowRotationSpeed*a)}},onClick:function(){this._codePointerDown||(W.emitSdkEvent("onTitleScreenEnd"),v.playMusic("menu"),G.change("SelectMode"));this._codePointerDown=!1},onGameCode:function(){var a=this;G.push("PromoScreen");G.onPop.connect(function(){a.bindClick()}).once()},
bindClick:function(){var a=this;F.delayCallTo(function(){u._platform.getPointer().up.connect(l(a,a.onClick)).once()},0.7)},__class__:Gh});var Hh=function(){B.call(this,!1)};g["game.ui.Test"]=Hh;Hh.__name__=["game","ui","Test"];Hh.__super__=B;Hh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("debug")},onAssetsReady:function(){this._bg=this.createImage("bg");this._bg.setAlpha(0.3);this.createText("test").setXY(480,511);var a=this.getTexture("sprite"),b=new kb("particles",
"debug");b.setXY(u._platform.getStage().get_width(),0);this.addSprite(b);this.createImage("sprite").setXY(0,0).setAlpha(0.3);this.createImage("sprite").setXY(u._platform.getStage().get_width()-a.get_width(),0).setAlpha(0.3);this.createImage("sprite").setXY(u._platform.getStage().get_width()-a.get_width(),u._platform.getStage().get_height()-a.get_height()).setAlpha(0.3);this.createImage("sprite").setXY(0,u._platform.getStage().get_height()-a.get_height()).setAlpha(0.3);B.prototype.onAssetsReady.call(this);
this.animate()},animate:function(){},__class__:Hh});var Ih=function(){this._buttons=[];B.call(this,!1)};g["game.ui.SelectMode"]=Ih;Ih.__name__=["game","ui","SelectMode"];Ih.__super__=B;Ih.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_mode");v.playMusic("menu")},onAssetsReady:function(){this._backgroundSprite=this.createImage("bg");var a=this.createText("MODE_TITLE","default");a.set_align(Z.Left);a.setXY(510,35);a=(new s).setXY(222,265);this.owner.addChild((new o).add(a));
this._btnTournament=this.createButton(l(this,this.nextPageTournament),"btn_tournament",null,null,a.owner).centerAnchor().setXY(0,0);this._btnTournament.rotation.set__(45);var b=this.createImage("white_1",a.owner).setXY(-160,-118);b.set_pointerEnabled(!1);this.createText("MODE_TOURNAMENT","info_team",b.owner).setXY(40,15);this._buttons.push(a);a=(new s).setXY(787,295);this.owner.addChild((new o).add(a));this._btnStats=this.createButton(l(this,this.nextPageStats),"btn_stats",null,null,a.owner).centerAnchor().setXY(0,
0);this._btnStats.rotation.set__(45);b=this.createImage("white_3",a.owner).setXY(-130,-118);b.set_pointerEnabled(!1);this.createText("MODE_STATS","info_team",b.owner).setXY(45,20);this._buttons.push(a);a=(new s).setXY(475,307);this.owner.addChild((new o).add(a));this._btnRandom=this.createButton(l(this,this.nextPageRandom),"btn_random",null,null,a.owner).centerAnchor().setXY(0,0);this._btnRandom.rotation.set__(45);b=this.createImage("white_2",a.owner).setXY(-201,19);b.set_pointerEnabled(!1);this.createText(r.lowPerformance?
"MODE_RANDOM":"MODE_DERBY","info_team",b.owner).setXY(35,15);this._buttons.push(a);this._btnPrev=this.createButton(l(this,this.prevPage),"btn_prev",null,null,null,A.getPack("ui")).setXY(59,453-x.getOffset());this.owner.addChild(this._btnPrev.owner);this.addSoundBtn();for(var b=a=0,c=this._buttons;b<c.length;){var d=c[b];++b;F.from(d,{y:"-=100",alpha:0},{time:0.5,ease:D.backOut,delay:0.06*a});a++}B.prototype.onAssetsReady.call(this)},onStop:function(){B.prototype.onStop.call(this);this._btnStats=this._btnRandom=
this._btnTournament=this._btnPrev=this._backgroundSprite=this._modeText=null},prevPage:function(){G.change("Title")},nextPageTournament:function(){W.trackUI(W.getGameMode(),"Select Mode");m.inTournament=!0;G.change("SelectCharacter")},nextPageRandom:function(){W.trackUI(W.getGameMode(),"Select Mode");m.inTournament=!1;G.change("SelectCharacter")},nextPageStats:function(){W.trackUI("STATS","Select Mode");G.change("Stats")},__class__:Ih});var vd=function(){this._selectedIndex=-1;this._list=I.list;B.call(this,
!1)};g["game.ui.SelectCharacter"]=vd;vd.__name__=["game","ui","SelectCharacter"];vd.onNextClick=function(){m.setRandomOpponent();W.trackUI("PLAY","Select Character");if(m.inTournament)G.change("SelectLevel");else if(r.lowPerformance){for(var a=m.inTournament=!0,b="";a;)b=ha.LIST[Math.floor(Math.random()*ha.LIST.length)],a=m.game.isLevelLocked(b);m.currentLevel=b;G.change("GameplayLoading")}else m.currentLevel=ha.DERBY_LIST[Math.floor(Math.random()*ha.DERBY_LIST.length)],G.change("DerbyLoading")};
vd.__super__=B;vd.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_character");v.playMusic("menu")},onAssetsReady:function(){B.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("CHARACTER_TITLE","default");a.set_align(Z.Left);a.setXY(510,35);this.buildGrid();this._avatarHolder=new o;this.owner.addChild(this._avatarHolder);this._btnPrev=this.createButton(l(this,this.prevPage),"btn_prev",null,null,null,A.getPack("ui")).setXY(60,
453-x.getOffset());this._btnNext=this.createButton(vd.onNextClick,"btn_small","PLAY",null,null,A.getPack("ui")).setXY(230,460-x.getOffset(110));if(null!=m.currentCharacter){var b=this.getIndexByName(m.currentCharacter.name);this.select(-1<b?b:0)}else this.select(0);this.addSoundBtn();F.from(a,{y:"-=60",alpha:0},{time:0.7,ease:D.quintOut,delay:0})},prevPage:function(){G.change("SelectMode")},select:function(a){var b=this._list[a];if(null==b)throw"No data for button"+a;if(this._selectedIndex!=a){-1!=
this._selectedIndex&&this._buttons[this._selectedIndex].deselect();m.currentCharacter=b;this._selectedIndex=a;this._buttons[this._selectedIndex].select();null==this._avatar?this._avatar=this.createImage("characters/avatar_"+b.name,this._avatarHolder):this._avatar.texture=this.getTexture("characters/avatar_"+b.name);this._avatar.setAnchor(0,this._avatar.getNaturalHeight()).setXY(-50,x.height-85);null==this._playerName?(this._playerName=this.createText(b.name,"info_team"),this._playerName.setScale(1.2),
this._playerName.setXY(150,85)):this._playerName.setText(b.name);a=b.name+"_SM";m.isCharacterUnlock(b)||(a=b.name+"_UNLOCK");null==this._superMove&&(this._superMove=this.createText(a,"info_sm"),this._superMove.setXY(197,191),this._superMove.wrapWidth.set__(130));this._superMove.setText(a,{n:q.string(m.game.isCharacterLocked(b.name))});m.isCharacterUnlock(b)?(this._superMove.wrapWidth.set__(130),this._superMove.setScale(1)):(this._superMove.wrapWidth.set__(180),this._superMove.setScale(0.8));null==
this._superMoveDesc?(this._superMoveDesc=this.createText(b.sm_type.toUpperCase(),"small_white"),this._superMoveDesc.setScale(0.8),this._superMoveDesc.setAlign(Z.Left),this._superMoveDesc.setXY(197,248),this._superMoveDesc.wrapWidth.set__(130)):(this._superMoveDesc.setText(b.sm_type.toUpperCase()),this._superMoveDesc.setAlign(Z.Left));0>=b.locked?this._superMoveDesc.setAlpha(1):this._superMoveDesc.setAlpha(0);null==this._teamName?(this._teamName=this.createText(b.team,"info_team"),this._teamName.setScale(0.67)):
this._teamName.setText(b.team);this._teamName.anchorY.set__(this._teamName.getNaturalHeight()/2);this._teamName.setXY(255,410);null==this._teamLogo?this._teamLogo=this.createImage("characters/"+b.team):this._teamLogo.texture=this.getTexture("characters/"+b.team);this._teamLogo.setXY(149,362);m.isCharacterUnlock(b)?(this._btnNext.set_pointerEnabled(!0),this._btnNext.alpha.set__(1)):(this._btnNext.disablePointer(),this._btnNext.alpha.set__(0.5));for(b=0;3>b;)b++}},buildGrid:function(){this._buttons=
[];this._container=new s;this.owner.addChild((new o).add(this._container));for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=vd.Grid[a.name],d=new Xf(a,!m.isCharacterUnlock(a),l(this,this.onButtonClick));d.setScale(0.9);d.rotation.set__(45);d.index=b;d.setXY(c.x+vd.Grid.offsetX,c.y+vd.Grid.offsetY);this._container.owner.addChild((new o).add(d));this._buttons.push(d)},onButtonClick:function(a){this.select(a.index)},getIndexByName:function(a){for(var b=
0,c=this._list;b<c.length;){var d=c[b];++b;if(d.name==a)return this._list.indexOf(d)}return-1},onStop:function(){B.prototype.onStop.call(this);this._avatar=this._teamLogo=this._superMoveDesc=this._superMove=this._playerName=this._teamName=this._btnPrev=this._btnNext=this._container=this._buttons=this._list=null},__class__:vd});var Md=function(){this._list=ha.LIST;this._levelsPerPage=6;this._currentPage=1;this._basePos=[{x:60,y:85},{x:-25,y:8},{x:-105,y:86},{x:-22,y:165}];B.call(this,!1)};g["game.ui.SelectLevel"]=
Md;Md.__name__=["game","ui","SelectLevel"];Md.__super__=B;Md.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_level")},onAssetsReady:function(){B.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("LEVEL_TITLE","default");a.set_align(Z.Left);a.setXY(510,40);this.buildGrid();this._maxPages=Math.ceil(this._list.length/this._levelsPerPage);this.createImage("mask_left").setXY(0,0);this.createImage("mask_right").setXY(817,0);this.getIndexByName(m.currentLevel);
this._btnBackward=this.createButton(l(this,this.moveLeft),"back").setXY(31,234);this._btnForward=this.createButton(l(this,this.moveRight),"next").setXY(875,234);this._btnPrev=this.createButton(l(this,this.onPrevClick),"btn_prev");this._btnPrev.setXY(50,496-x.getOffset());this._btnPrev.centerAnchor();a=this.getIndexByName(m.currentLevel);0<=a&&a<ha.LIST.length?this.gotoPage(Math.ceil((a+1)/this._levelsPerPage)):this.gotoPage(1);for(var a=0,b=this._buttons.length;a<b;){var c=a++;F.from(this._buttons[c],
{y:"-=100",alpha:0},{time:0.5,ease:D.backOut,delay:0.06*c})}this.addSoundBtn()},onPrevClick:function(){G.change("SelectMode")},onNextClick:function(){null!=m.currentLevel&&(W.trackPlayButton(),G.change("GameplayLoading"))},select:function(a){var b=this._list[a];if(null==b)throw"No data for button"+a;m.game.isLevelLocked(b);m.currentLevel!=b&&(m.currentLevel=b,null)},buildGrid:function(){this._buttons=[];this._container=(new s).setXY(Md.Grid.x,Md.Grid.y);this.owner.addChild((new o).add(this._container));
for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=new s;this._container.owner.addChild((new o).add(c));var d=this.createButton(l(this,this.onButtonClick),"level"+(b+1),null,null,c.owner);d.rotation.set__(45);d.index=b;d.id=a;m.game.isLevelLocked(a)&&(d.disable(),d.set_pointerEnabled(!1));for(var d=m.game.getStars("level"+(b+1)),e=0;4>e;){var h=e++,n="base_";3==h&&(n="home_");n=d>h?n+"full":n+"empty";this.createImage(n,c.owner).setXY(this._basePos[h].x,
this._basePos[h].y).set_pointerEnabled(!1)}c.setXY(b*Md.Grid.spacing.x/2,Md.Grid.spacing.y*(b%2));this._buttons.push(c)},onButtonClick:function(a){this._currentButton=a;this.select(this._currentButton.index);this.onNextClick(this._currentButton)},getIndexByName:function(a){return this._list.indexOf(a)},moveLeft:function(){1!=this._currentPage&&this.gotoPage(this._currentPage-1)},moveRight:function(){this._currentPage!=this._maxPages&&(W.trackUI("MORE LEVELS ARROW","Select Level"),this.gotoPage(this._currentPage+
1))},gotoPage:function(a){var b=this._currentPage-a;this._currentPage=a;a=this._container.x;a.set__(a._value+b*0.5*Md.Grid.spacing.x*this._levelsPerPage);1==this._currentPage?(this._btnBackward.alpha.set__(0),this._btnBackward.set_pointerEnabled(!1)):(this._btnBackward.alpha.set__(1),this._btnBackward.set_pointerEnabled(!0));this._currentPage==this._maxPages?(this._btnForward.alpha.set__(0),this._btnForward.set_pointerEnabled(!1)):(this._btnForward.alpha.set__(1),this._btnForward.set_pointerEnabled(!0))},
onStop:function(){B.prototype.onStop.call(this);this._btnForward=this._btnBackward=this._btnPrev=this._btnNext=this._container=this._buttons=this._list=null},__class__:Md});var Nd=function(){this._buttons=[];this._list=I.list;B.call(this,!1)};g["game.ui.Stats"]=Nd;Nd.__name__=["game","ui","Stats"];Nd.prevPage=function(){v.playMusic("menu");G.change("SelectMode")};Nd.__super__=B;Nd.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_stats");v.playMusic("menu")},
onAssetsReady:function(){B.prototype.onAssetsReady.call(this);this.createImage("bg");this.createText("STATS_TITLE","default").setXY(80,30);this._btnPrev=this.createButton(Nd.prevPage,"btn_prev",null,null,null,A.getPack("ui")).setXY(59,453-x.getOffset());this.owner.addChild(this._btnPrev.owner);this.buildCharacterGrid();this.buildDiamond();this.buildStats();this.addSoundBtn()},onStart:function(){B.prototype.onStart.call(this)},buildCharacterGrid:function(){this._buttons=[];this._container=new s;this._container.setScale(0.9);
this.owner.addChild((new o).add(this._container));for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=Nd.Grid[a.name],d=new Xf(a,!m.isCharacterUnlock(a),l(this,this.selectCharacter));d.rotation.set__(45);d.index=b;d.setXY(c.x+Nd.Grid.offsetX,c.y+Nd.Grid.offsetY);this._container.owner.addChild((new o).add(d));this._buttons.push(d)},buildDiamond:function(){this._diamondContainer=new s;this._diamondContainer.set_pointerEnabled(!1);this.owner.addChild((new o).add(this._diamondContainer));
var a=this.createImage("diamond",this._diamondContainer.owner);a.anchorX.set__(a.getNaturalWidth());a.x.set__(x.width);this._diamondContainer.y.set__(-a.getNaturalHeight())},buildStats:function(){var a=this.createText("STATS_STRIKES","stats",this._diamondContainer.owner);a.setXY(825,190);this._strikes=this.createText("","numbers",this._diamondContainer.owner);this._strikes.setXY(805-a.getNaturalWidth()/2,190);a=this.createText("STATS_MEH","stats",this._diamondContainer.owner);a.setXY(825,225);this._meh=
this.createText("","numbers",this._diamondContainer.owner);this._meh.setXY(805-a.getNaturalWidth()/2,225);a=this.createText("STATS_GOOD","stats",this._diamondContainer.owner);a.setXY(825,260);this._good=this.createText("","numbers",this._diamondContainer.owner);this._good.setXY(805-a.getNaturalWidth()/2,260);a=this.createText("STATS_PERFECT","stats",this._diamondContainer.owner);a.setXY(825,295);this._perfect=this.createText("","numbers",this._diamondContainer.owner);this._perfect.setXY(805-a.getNaturalWidth()/
2,295);a=this.createText("STATS_HOMERUNS","stats",this._diamondContainer.owner);a.setXY(825,330);this._homeruns=this.createText("0","numbers",this._diamondContainer.owner);this._homeruns.setXY(805-a.getNaturalWidth()/2,330);this.createText("STATS_DERBY","stats",this._diamondContainer.owner).setXY(815,365);this._derby=this.createText("","numbers",this._diamondContainer.owner);this._derby.setXY(815,400)},updateStats:function(a){this._strikes.set_text(q.string(m.game.getStat(a,"strikes")));this._meh.set_text(q.string(m.game.getStat(a,
"meh")));this._good.set_text(q.string(m.game.getStat(a,"good")));this._perfect.set_text(q.string(m.game.getStat(a,"perfect")));this._homeruns.set_text(q.string(m.game.getStat(a,"homeruns")));this._derby.set_text(q.string(m.game.getStat(a,"derby")))},selectCharacter:function(a){this._diamondContainer.y.animateTo(0,1,D.expoOut);var b=I.list[a.index];null!=this._selectedButton&&this._selectedButton.deselect();a.select();this._selectedButton=a;null==this._playerName?(this._playerName=this.createText(b.name,
"player_name",this._diamondContainer.owner),this._playerName.setXY(750,100)):this._playerName.setText(b.name);null==this._teamLogo?this._teamLogo=this.createImage("characters/"+b.team,this._diamondContainer.owner):this._teamLogo.texture=this.getTexture("characters/"+b.team);this._teamLogo.centerAnchor().setXY(895,115);this.updateStats(b.name)},__class__:Nd});var Jh=function(){B.call(this,!1)};g["game.ui.Pause"]=Jh;Jh.__name__=["game","ui","Pause"];Jh.__super__=B;Jh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.loadAssets("ui_pause")},onAssetsReady:function(){this.owner.add(new Y(this.getTexture("bg")));var a=this.createText("PAUSE_TITLE","title");a.setXY(480,220);this.owner.addChild(a.owner);this.owner.addChild(this.createButton(l(this,this.onResume),"btn_resume").setXY(233,248).owner);this.addSoundBtn().setXY(445,38);this.owner.addChild(this.createButton(l(this,this.onHelp),"btn_help").setXY(657,248).owner);this.owner.addChild(this.createButton(l(this,this.onQuit),"btn_quit").setXY(448,462-x.getOffset()).owner);
m.config.codeEnabled&&this.owner.addChild(this.createButton(l(this,this.onCode),"btn_large","ENTER_CODE","buttons").setXY(371,285).owner);this._quitBg=new Y(this.getTexture("quit_bg"));this._quitBg.set_visible(!1);this.owner.addChild((new o).add(this._quitBg));a=new Ea("QUIT_TEXT","small_white");a.setXY(480,225);this._quitBg.owner.addChild((new o).add(a));this.createButton(l(this,this.onYes),"btn_small","YES",null,this._quitBg.owner).setXY(320,302);this.createButton(l(this,this.onNo),"btn_small",
"NO",null,this._quitBg.owner).setXY(495,302)},onResume:function(){G.pop()},onHelp:function(){W.trackUI("TUTORIAL",W.getMatchId());G.pop();G.push("Help")},onCode:function(){G.push("PromoScreen")},onQuit:function(){this._quitBg.set_visible(!0)},onYes:function(){W.trackUI("EXIT",W.getMatchId());G.change("SelectCharacter")},onNo:function(){this._quitBg.set_visible(!1)},__class__:Jh});var V=function(){this.cursorTimer=0;this.keyboardMobile=[];this.codeString="";B.call(this,!1);this._bg=new Da(0,x.width,
x.height);this._bg.alpha.set__(0.7);this._disposer.add(u._platform.getKeyboard().up.connect(l(this,this.handleKeyUp),!0));V.getCodes()};g["game.ui.PromoScreen"]=V;V.__name__=["game","ui","PromoScreen"];V.getCodes=function(){if(null==V.codes){V.codes=new C;for(var a=0,b=V.availableCodes;a<b.length;){var c=b[a];++a;V.codes.set(c,Sa.localize("CODE_"+c).text)}}return V.codes};V.codeUnlocked=function(a){return-1!=V.codesUnlocked.indexOf(a)};V.__super__=B;V.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);
this.owner.addChild((new o).add(this._bg));var a=this.createImage("popup_bg"),b=x.width/2,c=x.height/2,d=a.getNaturalWidth()/2,e=a.getNaturalHeight()/2;a.setXY(b,c).centerAnchor();var h=this.createImage("enter_code");h.setXY(b,c-30).centerAnchor();u._platform.getTouch().get_supported()&&(this.keyboardSprite=(new Y(this.getTexture("popup_keyboard"))).setXY(b,0),this._disposer.add(this.keyboardSprite.get_pointerDown().connect(l(this,this.onPointerDown))),this.keyboardSprite.setAnchor(0.5*this.keyboardSprite.getNaturalWidth(),
this.keyboardSprite.getNaturalHeight()),this.keyboardSprite.y.set__(x.height-x.getOffset(410)),this.addSprite(this.keyboardSprite),this.keyboardMobile="Q,W,E,R,T,Y,U,I,O,P,A,S,D,F,G,H,J,K,L,Z,X,C,V,B,N,M".split(","));this.createButton(l(this,this.onBack),"btn_return",null,null,a.owner).centerAnchor().setXY(475,32);this.createButton(l(this,this.onNext),"btn_small","CODE_SUBMIT").setXY(b+10,c+10);var n=this.createButton(l(this,this.onReset),"btn_small","CODE_RESET");n.setXY(b-n.getNaturalWidth()-20,
c+10);this.codeSprite=[];for(n=0;12>n;){var f=n++,g=new Ya(K.getFont("small_purple"),"X");h.owner.addChild((new o).add(g));g.setXY(24+24*f,30);g.set_visible(!1);this.codeSprite.push(g)}this.createText("PROMO_POPUP_TITLE","lobster_white_shadow").setXY(b,c-100);this.textError=this.createText("TEXT_ERROR_CODE","small_white",a.owner);this.textError.setXY(d,e+70);this.imageError=this.createImage("wrong_code",a.owner);this.imageError.centerAnchor().setXY(120,240);this.imageError.set_visible(this.textError.set_visible(!1));
this.textOKCode=this.createText("TEXT_UNLOCKALL","small_white",a.owner);this.textOKCode.setXY(d,e+60);this.textOKCode.setScale(0.7);this.textOKUnlocked=this.createText("TEXT_UNLOCKED","small_white",a.owner);this.textOKUnlocked.setXY(d,e+85);this.textOKUnlocked.setScale(0.7);this.imageOK=this.createImage("true_code",a.owner);this.imageOK.centerAnchor().setXY(110,235);this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)));this.codeEmpty=this.createText("TYPE_HERE",
"small_purple",h.owner);this.codeEmpty.setXY(h.getNaturalWidth()/2,30);this.cursor=new Da(7697781,3,30);this.cursor.x.set__(this.codeSprite[0].x._value);this.cursor.y.set__(this.codeSprite[0].y._value);h.owner.addChild((new o).add(this.cursor))},onNext:function(){this.validateCode();W.trackUI("SUBMIT","Code Entry")},onReset:function(){this.resetCode();W.trackUI("RESET","Code Entry")},onBack:function(){G.pop();W.trackUI("EXIT","Code Entry")},handleKeyUp:function(a){a=q.string(a.key);"Unknow"!=a&&1==
a.length&&12>this.codeString.length&&(this.codeString+=a,this.update("key"));"Backspace"==a&&0<this.codeString.length&&this.update("delete");"Enter"==a&&0<this.codeString.length&&this.validateCode()},update:function(a){if("key"==a){this.resetResult();this.codeEmpty.set_visible(!1);var b=this.codeSprite[this.codeString.length-1];b.set_text(this.codeString.charAt(this.codeString.length-1));b.set_visible(!0);this.cursor.x.set__(b.x._value+10)}"delete"==a&&0<this.codeString.length&&(this.imageError.set_visible(this.textError.set_visible(!1)),
this.codeSprite[this.codeString.length-1].set_visible(!1),this.codeString=M.substr(this.codeString,0,this.codeString.length-1),0==this.codeString.length?(this.codeEmpty.set_visible(!0),this.cursor.x.set__(this.codeSprite[0].x._value)):this.cursor.x.set__(this.codeSprite[this.codeString.length-1].x._value+10));"reset"==a&&(this.resetKey(),this.resetResult(),this.codeEmpty.set_visible(!0))},validateCode:function(){for(var a=!1,b="",c="",d=V.codes.keys();d.hasNext();){var e=d.next(),h=V.codes.get(e);
this.codeString==h&&(b="TEXT_"+e,a=!0,c=h,this.applyCode(e))}a&&(this.textOKCode.setText(b),this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!0))),W.track("codeEntrySuccess",{codeID:c}));this.textError.set_visible(this.imageError.set_visible(!a));this.resetKey()},resetCode:function(){for(;0<V.codesUnlocked.length;)V.codesUnlocked.pop();this.resetKey()},applyCode:function(a){-1==V.codesUnlocked.indexOf(a)&&V.codesUnlocked.push(a);switch(a){case "UNLOCKALL":for(var a=
0,b=I.list;a<b.length;){var c=b[a];++a;m.game.unlockCharacter(c.name)}a=0;for(b=ha.LIST;a<b.length;)c=b[a],++a,m.game.unlockLevel(c);break;case "LOCKALL":m.game.clear();m.game.save();m.currentCharacter=I.donnie;break;case "FULLHOUSE":a=0;for(b=I.list;a<b.length;)c=b[a],++a,m.game.unlockCharacter(c.name);break;case "HOUSEKEYS":a=0;for(b=ha.LIST;a<b.length;)c=b[a],++a,m.game.unlockLevel(c)}},onPointerDown:function(a){var b="",c=!1,d=a.viewX,a=a.viewY;1!=r.scale&&(d/=r.scale,a/=r.scale);var e=this.keyboardSprite.x._value-
this.keyboardSprite.getNaturalWidth()/2,h=560-this.keyboardSprite.getNaturalHeight()-x.getOffset(410);d>e+2&&a>h+4&&(a<h+44?b=this.keyboardMobile[Math.floor((d-e+2)/50)]:a<h+86?d>e+26&&d<e+479&&(b=this.keyboardMobile[10+Math.floor((d-(e+26))/50)]):d>e+76&&d<e+428?b=this.keyboardMobile[19+Math.floor((d-(e+76))/50)]:d>e+428&&(c=!0));!c&&""!=b&&12>this.codeString.length&&(this.codeString+=b,this.update("key"));c&&this.update("delete")},resetKey:function(){for(var a=0,b=this.codeSprite;a<b.length;){var c=
b[a];++a;c.set_visible(!1)}this.codeString="";this.codeEmpty.set_visible(!0);this.cursor.x.set__(this.codeSprite[0].x._value)},resetResult:function(){this.textError.set_visible(this.imageError.set_visible(!1));this.imageOK.set_visible(this.textOKCode.set_visible(this.textOKUnlocked.set_visible(!1)))},onUpdate:function(a){0>=this.cursorTimer&&(this.cursorTimer+=0.5,this.cursor.alpha.animateTo(1==this.cursor.alpha._value?0:1,0.2));this.cursorTimer-=a},__class__:V});var Kh=function(){this._currentPage=
0;this._pages="aiming,swing,stars,breakables,power,homerun".split(",");B.call(this,!1)};g["game.ui.Help"]=Kh;Kh.__name__=["game","ui","Help"];Kh.__super__=B;Kh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_tut",!1)},onAssetsReady:function(){this._blackScreen=new Da(0,x.width,x.height);this._blackScreen.alpha.set__(0.5);this._blackScreen.set_pointerEnabled(!1);this.owner.addChild((new o).add(this._blackScreen));this._pageContainer=new s;this.owner.addChild((new o).add(this._pageContainer));
this._currentPage=0;this.changePage(this._pages[this._currentPage]);this._prev=O.createButton(l(this,this.onPrevious),"btn_prevpage",null,null,this._pack);this._prev.centerAnchor().setXY(210,410);this._prev.set_pointerEnabled(!1);this._prev.setAlpha(0);this.owner.addChild((new o).add(this._prev));this._next=O.createButton(l(this,this.onNext),"btn_nextpage",null,null,this._pack);this._next.centerAnchor().setXY(745,410);this.owner.addChild((new o).add(this._next));var a=O.createButton(l(this,this.onClose),
"btn_return");a.centerAnchor().setXY(745,150);this.owner.addChild((new o).add(a))},changePage:function(a){null!=this._bigBox&&this._bigBox.dispose();switch(a){case "aiming":this.stepAiming();break;case "swing":this.stepSwing();break;case "stars":this.stepStars();break;case "breakables":this.stepBreakables();break;case "power":this.stepPower();break;case "homerun":this.stepHomerun()}},onPrevious:function(){this._currentPage--;0==this._currentPage&&(this._prev.set_pointerEnabled(!1),this._prev.setAlpha(0));
this._next.set_pointerEnabled(!0);this._next.setAlpha(1);this.changePage(this._pages[this._currentPage])},onNext:function(){this._currentPage++;this._currentPage==this._pages.length-1&&(this._next.set_pointerEnabled(!1),this._next.setAlpha(0));this._prev.set_pointerEnabled(!0);this._prev.setAlpha(1);this.changePage(this._pages[this._currentPage])},onClose:function(){G.pop();G.push("Pause")},stepAiming:function(){this.createImageBox("aiming","TUT_AIMING","TUT_AIMING2");var a=new Ea("TUT_WEAK","small_white");
a.setScale(0.8).setAlpha(0.2).setXY(382,253);this._bigBox.addChild((new o).add(a));a=new Ea("TUT_MEDIUM","small_white");a.setScale(0.8).setAlpha(0.4).setXY(337,273);this._bigBox.addChild((new o).add(a));a=new Ea("TUT_HARD","small_white");a.setScale(0.8).setXY(307,296);this._bigBox.addChild((new o).add(a))},stepSwing:function(){this.createImageBox("swing","TUT_SWING","TUT_SWING2")},stepStars:function(){this.createImageBox("stars","TUT_STARS","TUT_STARS2")},stepPower:function(){this.createImageBox("strength",
"TUT_POWER","TUT_POWER2");var a=new Ea("TUT_POWER3","small_white");a.setScale(0.7).setXY(565,300);this._bigBox.addChild((new o).add(a))},stepBreakables:function(){this.createImageBox("breakables","TUT_BREAKABLES","TUT_BREAKABLES2")},stepHomerun:function(){this.createImageBox("homerun","TUT_HOMERUN","TUT_HOMERUN2")},createImageBox:function(a,b,c){this._bigBox=new o;this._pageContainer.owner.addChild(this._bigBox);a=new Y(this._pack.getTexture(a));a.setXY(220,150);this._bigBox.addChild((new o).add(a));
b=new Ea(b,"lobster_white_shadow");b.setXY(482,170);this._bigBox.addChild((new o).add(b));c=(new Ea(c,"small_white")).setWrapWidth(400).setXY(330,355).setScale(0.8);this._bigBox.addChild((new o).add(c))},__class__:Kh});var Lh=function(){B.call(this,!1)};g["game.ui.NewCharacter"]=Lh;Lh.__name__=["game","ui","NewCharacter"];Lh.__super__=B;Lh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);var a=new Da(0,x.width,x.height);a.alpha.set__(0.7);this.owner.addChild((new o).add(a));
a=this.createImage("popup_bg");a.setXY(x.width/2,x.height/2).centerAnchor();this.createText("UNLOCK_CHARACTER","small_white",a.owner).setXY(a.getNaturalWidth()/2,76);this.createText("UNLOCK_UNLOCK","lobster_blue",a.owner).setXY(a.getNaturalWidth()/2,107);var b=this.createButton(l(this,this.onBack),"btn_return",null,null,a.owner);b.setXY(a.getNaturalWidth()-35,35);b.centerAnchor();b=this.createButton(l(this,this.onNext),"btn_small","UNLOCK_GO",null,a.owner);b.setXY((a.getNaturalWidth()-b.getNaturalWidth())/
2,a.getNaturalHeight()/2+40)},onNext:function(){G.change("SelectCharacter")},onBack:function(){G.pop()},__class__:Lh});var Mh=function(){B.call(this,!1)};g["game.ui.NickSportPopup"]=Mh;Mh.__name__=["game","ui","NickSportPopup"];Mh.__super__=B;Mh.prototype=k(B.prototype,{onAdded:function(){B.prototype.onAdded.call(this);this.loadAssets("ui_nickpopup")},onAssetsReady:function(){B.prototype.onAssetsReady.call(this);this._darken=new Da(0,x.width,x.height);this._darken.setAlpha(0.5);this.owner.addChild((new o).add(this._darken));
this._bg=new Y(this._pack.getTexture("bg"));this._bg.setXY(x.width/2-this._bg.getNaturalWidth()/2,x.height/2-this._bg.getNaturalHeight()/2);this.owner.addChild((new o).add(this._bg));this._closeBtn=new wb(this._pack,"btn_close",l(this,this.onClose));this._closeBtn.centerAnchor();this._bg.owner.addChild((new o).add(this._closeBtn));this._appleBtn=new wb(this._pack,"btn_apple",l(this,this.onAppStore));this._appleBtn.centerAnchor().setXY(249,400);this._bg.owner.addChild((new o).add(this._appleBtn));
this._googleBtn=new wb(this._pack,"btn_google",l(this,this.onGooglePlay));this._googleBtn.centerAnchor().setXY(358,400);this._bg.owner.addChild((new o).add(this._googleBtn));this._kindleBtn=new wb(this._pack,"btn_kindle",l(this,this.onKindleFire));this._kindleBtn.centerAnchor().setXY(462,400);this._bg.owner.addChild((new o).add(this._kindleBtn))},onStart:function(){B.prototype.onStart.call(this)},onStop:function(){B.prototype.onStop.call(this)},onClose:function(){G.pop()},onAppStore:function(){u._platform.getWeb().openBrowser(m.config.nickSportApple);
G.pop()},onGooglePlay:function(){u._platform.getWeb().openBrowser(m.config.nickSportGoogle);G.pop()},onKindleFire:function(){u._platform.getWeb().openBrowser(m.config.nickSportAmazon);G.pop()},__class__:Mh});var wh=function(){};g["game.SceneList"]=wh;wh.__name__=["game","SceneList"];var Nh=function(){this._speedNull=this._speedSlow=!1;this._counterNull=this._counterSlow=0;this.onSpeedSlow=new T;this.onSpeedNull=new T;this.offset={x:0,y:0};this.speedSlow=180;this.speedNull=3;this.playSound=!1;j.call(this)};
g["game.components.Ball"]=Nh;Nh.__name__=["game","components","Ball"];Nh.__super__=j;Nh.prototype=k(j.prototype,{get_name:function(){return"Ball_65"},onStart:function(){j.prototype.onStart.call(this);this._animation=this.owner._compMap.Sprite_5;this._physics=this.owner._compMap.PhysicsComponent_25;this._transform=this.owner._compMap.TransformComponent_32;this.playSound&&(this._soundPlayback=v.play("gameplay","BALL",1,!0),this._soundVolume=1)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);
-50>this._transform.position.x&&this.stop();30<this._counterNull&&!this._speedNull&&this.stop();30<this._counterSlow&&!this._speedSlow&&this._onSpeedSlow();null!=this._physics&&(a=this._physics.getSpeed(),null!=this._soundPlayback&&(this._soundVolume=Math.min(this._soundVolume,a/300),this._soundPlayback.volume.animateTo(this._soundVolume,1)),this._counterNull=a<this.speedNull?this._counterNull+1:0,this._counterSlow=a<this.speedSlow?this._counterSlow+1:0)},remove:function(){E.getSystemEntity(this.owner);
E.getSystemEntity(this.owner).getComponent("ActorSystem_4").removeActor(this.owner);null!=this._soundPlayback&&this._soundPlayback.dispose()},stop:function(){this._speedNull=!0;this.onSpeedNull.emit(this);null!=this._physics&&this._physics.disable();this.remove()},_onSpeedSlow:function(){this._speedSlow=!0;this.onSpeedSlow.emit(this)},__class__:Nh});var he=function(){this.current=!1;j.call(this)};g["game.components.CameraComponent"]=he;he.__name__=["game","components","CameraComponent"];he.__super__=
j;he.prototype=k(j.prototype,{get_name:function(){return"CameraComponent_67"},onStart:function(){j.prototype.onStart.call(this);this._cameras=this.owner._internal_getFromParents("CamerasSystem_68");this._renderer=this.owner._internal_getFromParents("RendererSystem_7");this._transform=this.owner._compMap.TransformComponent_32;this.current&&this.setCurrent()},onStop:function(){j.prototype.onStop.call(this);this._transform=this._renderer=this._cameras=null},setCurrent:function(){null==this._cameras?
this.current=!0:this._cameras.setCurrent(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.current&&this.update(a)},update:function(){var a,b;a=0-this._transform.position.x;b=0-this._transform.position.y;a+=0.5*this._renderer.dimensionsScaled.width;b+=0.5*this._renderer.dimensionsScaled.height;this._renderer.move(a,b)},__class__:he});var id=function(){he.call(this)};g["game.components.BaseballCamera"]=id;id.__name__=["game","components","BaseballCamera"];id.__super__=he;id.prototype=
k(he.prototype,{update:function(){var a,b=0;a=0-this._transform.position.x;a+=0.5*this._renderer.dimensionsScaled.width;a=Math.min(a,0);b=this._renderer.dimensionsScaled.height-560;this._renderer.move(a,b)},__class__:id});var Oh=function(){this.unzoomToMax=!1;this.yTop=-1400;he.call(this)};g["game.components.BallCamera"]=Oh;Oh.__name__=["game","components","BallCamera"];Oh.__super__=id;Oh.prototype=k(id.prototype,{update:function(){var a=1,a=this._transform.position.y-200,a=Math.max(560/(560-this.yTop),
0<a?1:560/(560-a));a<this._renderer.scale&&this._renderer.setScale(a);var b=a=0,a=Math.max(-this._transform.position.x,-x.MAX_BALL_CAMERA_POS+0.5*this._renderer.dimensionsScaled.width),a=a+0.5*this._renderer.dimensionsScaled.width,a=Math.min(a,0),b=this._renderer.dimensionsScaled.height-560;this._renderer.move(a,b)},__class__:Oh});var yc=function(){this.isCollected=!1;this.collectedSound="";this.type="COLLECTABLE";this.data={};this.amount=1;this.isActive=!0;j.call(this)};g["stolo.ensys.components.CollectableComponent"]=
yc;yc.__name__=["stolo","ensys","components","CollectableComponent"];yc.__super__=j;yc.prototype=k(j.prototype,{get_name:function(){return"CollectableComponent_56"},onStart:function(){E.getSystemEntity(this.owner);this._actorSystem=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType(this.type);this._soundSystem=E.getSystemEntity(this.owner)._compMap.SoundSystem_27},collect:function(a){""!=
this.collectedSound&&this._soundSystem.play(this.collectedSound,this.owner,yc.SOUND_CHANNEL);this.isCollected=!0;null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.enable(!1);if(X.__instanceof(this.owner._compMap.Sprite_5,mb)){var b=this.owner._compMap.Sprite_5;if(b.animation.hasAnim("pickup")){b.animation.gotoAndPlay("pickup",{onComplete:function(a,b){return function(){return a(b)}}(l(this,this.onCollect),a),loop:!1});return}}this.onCollect(a)},onCollect:function(){this._actorSystem.removeActor(this.owner)},
isCollectable:function(){return this.isActive&&!this.isCollected},__class__:yc});var Ph=function(){this.collected=new gb;yc.call(this)};g["game.components.BallCollectable"]=Ph;Ph.__name__=["game","components","BallCollectable"];Ph.__super__=yc;Ph.prototype=k(yc.prototype,{onStart:function(){this.type="BALL";yc.prototype.onStart.call(this)},onCollect:function(a){this.collected.emit(a,this.owner)},__class__:Ph});var wd=function(){this.onDamage=new T;this._ignoreList=new db;this._actorsToDamage=[];this.currentCooldown=
-100;j.call(this)};g["stolo.ensys.components.DamageComponent"]=wd;wd.__name__=["stolo","ensys","components","DamageComponent"];wd.__super__=j;wd.prototype=k(j.prototype,{get_name:function(){return"DamageComponent_53"},onStart:function(){null==this.damager&&(this.damager=this.owner);this._physicsSystem=E.getSystemEntity(this.owner)._compMap.PhysicSystem_26;null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("DAMAGER");this._physicsSystem.addContactListener(Ba.PRELISTENER,
Ia.ANY,this.target,"DAMAGER",this.owner,l(this,this.onPreContact));this._physicsSystem.addContactListener(Ba.BEGIN,Ia.ANY,this.target,"DAMAGER",this.owner,l(this,this.onContactBegin));this._physicsSystem.addContactListener(Ba.END,Ia.ANY,this.target,"DAMAGER",this.owner,l(this,this.onContactEnd));j.prototype.onStart.call(this)},onStop:function(){this._physicsSystem.removeContactListener(Ba.PRELISTENER,Ia.ANY,this.target,"DAMAGER",this.owner);this._physicsSystem.removeContactListener(Ba.BEGIN,Ia.ANY,
this.target,"DAMAGER",this.owner);this._physicsSystem.removeContactListener(Ba.END,Ia.ANY,this.target,"DAMAGER",this.owner);this._actorsToDamage=this._ignoreList=this._physicsSystem=null;j.prototype.onStop.call(this)},onUpdate:function(a){this.currentCooldown-=a;if(!(0<this.currentCooldown||0==this._actorsToDamage.length||!this.enabled||0==this.charge)){for(var a=0,b=this._actorsToDamage;a<b.length;){var c=b[a];++a;this.damageActor(c)}this.charge--;this.currentCooldown=this.cooldown}},damageActor:function(a){if(!this._ignoreList.h[a.__id__]){var b=
a._compMap.HealthComponent_54,c=!1;null!=b&&(c=b.damage(this.value,this.damager,this.knockBackX,this.knockBackY))&&this.onDamage.emit(a)}},onPreContact:function(){return!0},onContactBegin:function(a){this._actorsToDamage.push(a)},onContactEnd:function(a){M.remove(this._actorsToDamage,a)},__class__:wd});var Yf=function(){this.velocityLoss=0.8;wd.call(this)};g["game.components.BallDamage"]=Yf;Yf.__name__=["game","components","BallDamage"];Yf.__super__=wd;Yf.prototype=k(wd.prototype,{onStart:function(){wd.prototype.onStart.call(this);
this.enabled=!1;this._physics=this.owner._compMap.PhysicsComponent_25},onStop:function(){this._physics=null;wd.prototype.onStop.call(this)},onPreContact:function(a,b){var c=a._compMap.HealthComponent_54,d=this._physics.getSpeed();if(null!=c&&d>=this.velocityDamageTheshold){c.damage(this.value,this.damager);if(c.isDead()){var e=this._physics.getVelocity();this._physics.setVelocity(function(){e.zpp_inner.validate();return e.zpp_inner.x}(this)*this.velocityLoss,function(){e.zpp_inner.validate();return e.zpp_inner.y}(this)*
this.velocityLoss);return!1}return!0}return wd.prototype.onPreContact.call(this,a,b)},__class__:Yf});var Qh=function(){this._currentStrength=-1;this._visible=!1;this.offsetX=this.offsetY=0;j.call(this)};g["game.components.BatFx"]=Qh;Qh.__name__=["game","components","BatFx"];Qh.__super__=j;Qh.prototype=k(j.prototype,{get_name:function(){return"BatFx_81"},onStart:function(){j.prototype.onStart.call(this);E.getSystemEntity(this.owner);this._actorSystem=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");
this._animation=this.owner._compMap.Sprite_5;this._transform=this.owner._compMap.TransformComponent_32;this._batter=this.owner._compMap.Batter_73},onStop:function(){this._actorSystem=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);a=Math.floor(this._batter.strengthLevel);0<a&&this._currentStrength!=a&&this.show(a);this._visible&&this.updateFx(this._animation.getAnimation().get_currentSymbol().data)},show:function(a){null!=this._fx&&this.hide();this._visible||
(this._visible=!0,this._currentStrength=a,this._fx=this._actorSystem.spawn({template:{key:"batFx"},animation:{start:"bat_strength_"+a}}),this._fxTransform=this._fx._compMap.TransformComponent_32,this._fxAnim=this._fx._compMap.Sprite_5,this.updateFx(this._animation.getAnimation().get_currentSymbol().data))},hide:function(){this._visible&&(this._visible=!1,this._actorSystem.removeActor(this._fx))},updateFx:function(a){this._currentFxData==a||null==this._fx||(null==a||null==a.bat?this._fxAnim.setAlpha(0):
(this._currentFxData=a,this._fxAnim.setAnchor(25,120),this._fxAnim.setAlpha(1),this._fxAnim.set_visible(a.bat.visible),this._fxTransform.position.x=this._transform.position.x+a.bat.x+this.offsetX,this._fxTransform.position.y=this._transform.position.y+a.bat.y+this.offsetY,this._fxTransform.rotation=a.bat.rotation,this._fxAnim.setScaleXY(a.bat.scaleX,a.bat.scaleY)))},__class__:Qh});var te=function(){this.onScore=new gb;this.onSwingFail=new T;this.onSwingSuccess=new gb;this.fails=this.homeruns=this.multiplier=
this.mehs=this.goods=this.perfects=this.powermoves=this.stars=0;this.balls=10;this.power=this.score=0;this.strengthLevelMax=3;this.strengthLevel=0;this.strengthPerLevel=15;this.strengthBase=100;this.strengthMin=50;this.powerTemplate="powerRocket";j.call(this)};g["game.components.Batter"]=te;te.__name__=["game","components","Batter"];te.getMultiplierColor=function(a){return["blue","orange","purple"][a-1]};te.__super__=j;te.prototype=k(j.prototype,{get_name:function(){return"Batter_73"},init:function(){this._swing=
m.inTournament?new xb:new Zf;m.slimeBall&&(this._swing.ballTemplate="batter_ball_slime");this._powerSwing=this.owner._compMap.Swing_74;if(!m.inTournament||V.codeUnlocked("BEEFCAKE"))this.strengthLevel=3;V.codeUnlocked("MAXPOWER")&&(this.power=te.maxPower)},onStart:function(){j.prototype.onStart.call(this);if(m.inTournament){var a=ha.getLvlIndexByName(m.currentLevel);this.balls=x.levelBallsQty[a]}else this.balls=99;E.getSystemEntity(this.owner);this._actorSystem=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");
this._transform=this.owner._compMap.TransformComponent_32;this._animation=this.owner._compMap.Sprite_5;V.codeUnlocked("DREAMFIELD")&&this._animation.setAlpha(0.4)},onStop:function(){null!=this._ballConnection&&this._ballConnection.dispose();null!=this._swingConnection&&this._swingConnection.dispose();this._swing=this._powerSwing=this._animation=null;j.prototype.onStop.call(this)},get_strengthMax:function(){return this.strengthBase+this.strengthPerLevel*Math.floor(this.strengthLevel)},getStrengthRatio:function(a){return(a-
this.strengthMin)/(this.strengthBase+this.strengthPerLevel*this.strengthLevelMax-this.strengthMin)},addFails:function(){},get_swing:function(){return this._currentSwing},prepareBat:function(a,b){this._currentSwing.prepare(a,b,this.getStrengthRatio(b),l(this,this.onCollection));this.isPowerActive()&&(v.play(m.currentCharacter.name+"_supermove","VOICEOVER"),this.powermoves++)},followBall:function(a){null!=this._swingConnection&&this._swingConnection.dispose();this._swingConnection=this._currentSwing.onSwingResult.connect(l(this,
this.onSwingResult));this._currentSwing.followBall(a.owner)},bat:function(){v.play("swoosh_"+Math.floor(this.strengthLevel),"BATTER");this._currentSwing.swing()},onSwingResult:function(a,b){0==a?this.onSwingFail.emit(b._compMap.Ball_65):(3==a?(m.game.increaseStat("perfect"),this.perfects++,F.delayCallTo(function(){v.play("homerun","CROWD")},0.3)):2==a?(m.game.increaseStat("good"),this.goods++,F.delayCallTo(function(){v.play("crowd_cheer","CROWD")},0.3)):1==a&&(m.game.increaseStat("meh"),this.mehs++),
this.multiplier=a,this.isPowerActive()&&!V.codeUnlocked("MAXPOWER")&&(this.power=0),this._ballConnection=b._compMap.CollectorComponent_55.onCollection.connect(l(this,this.onCollection)),this.onSwingSuccess.emit(b._compMap.Ball_65,a))},setPowerSwing:function(){null==this._powerSwing.owner&&(this.owner.remove(this._swing),this.owner.add(this._powerSwing),this._powerSwing.init());this._currentSwing=this._powerSwing;this.addPowerAura()},setSwing:function(){null==this._swing.owner&&(this.owner.remove(this._powerSwing),
this.owner.add(this._swing),this._swing.init());this._currentSwing=this._swing;this.removePowerAura()},isPowerActive:function(){return this._currentSwing==this._powerSwing},onCollection:function(a,b){var c=b._compMap.TransformComponent_32,d=b._compMap.CollectableComponent_56,e=y.fields(d.data);c.fixed=!0;for(var h=0;h<e.length;){var n=e[h];++h;var f=y.field(d.data,n);switch(n){case "strength":this.strengthLevel=Math.min(this.strengthLevelMax,f+this.strengthLevel);break;case "power":this.isPowerActive()||
(this.power+=f);break;case "ball":this.balls+=f;this._actorSystem.spawn({template:{key:"callout_pickup"},transform:{position:{x:c.position.x,y:c.position.y}},text:{font:"small_white",text:"+"+f,scale:2.5}});break;case "fail":this.addFails(f);break;case "homerun":this.homeruns+=f;m.game.increaseStat("homeruns");break;case "score":this.stars++,n=f*this.multiplier,this.score+=n,this._actorSystem.spawn({template:{key:"callout_pickup"},transform:{position:{x:c.position.x,y:c.position.y}},text:{font:"hud_score_"+
te.getMultiplierColor(this.multiplier),text:"+"+n}}),this.onScore.emit(n,this.score),this.owner._internal_getFromParents("GameTut_75").playStep("stars")}}"star_big"==b._compMap.TemplateComponent_3.key&&v.play("pickup_big","BIG_STAR")},addPowerAura:function(){null==this._aura&&(v.play("super_activation","SUPER"),this.owner._internal_getFromParents("GameTut_75").playStep("supermove"),this._aura=this._actorSystem.spawn({template:{key:"power_aura"}}))},removePowerAura:function(){null!=this._aura&&(this._actorSystem.removeActor(this._aura),
this._aura=null)},__class__:te,__properties__:k(j.prototype.__properties__,{get_swing:"get_swing",get_strengthMax:"get_strengthMax"})});var Rh=function(){he.call(this)};g["game.components.BatterCamera"]=Rh;Rh.__name__=["game","components","BatterCamera"];Rh.__super__=id;Rh.prototype=k(id.prototype,{update:function(){var a,b=0;a=0-this._transform.position.x;a+=0.5*this._renderer.dimensionsScaled.width;a=Math.min(a,0);b=this._renderer.dimensionsScaled.height-560;this._renderer.setScale(1);this._renderer.move(a,
b)},__class__:Rh});var Sh=function(){this._ads=[];j.call(this)};g["game.components.Billboard"]=Sh;Sh.__name__=["game","components","Billboard"];Sh.__super__=j;Sh.prototype=k(j.prototype,{get_name:function(){return"Billboard_72"},onAdded:function(){j.prototype.onAdded.call(this);this.createAd("ad_up_1_",4,50,2);this.createAd("ad_up_2_",81,58,2);this.createAd("ad_up_3_",180,58,3);this.createAd("ad_up_4_",279,50,3);this.createAd("ad_down_1_",4,105,2);this.createAd("ad_down_2_",81,99,0,!0);this.createAd("ad_down_3_",
180,99,3);this.createAd("ad_down_4_",279,105,2)},onRemoved:function(){for(var a=0,b=this._ads;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.owner)}this._ads=null;j.prototype.onRemoved.call(this)},createAd:function(a,b,c,d,e){null==e&&(e=!1);var h=new Th;h.init(a,d,e);h.setXY(b,c);this.owner.addChild((new o).add(h));this._ads.push(h)},__class__:Sh});var Th=function(){this._currentDelay=-1;s.call(this)};g["game.components.BillboardAd"]=Th;Th.__name__=["game","components","BillboardAd"];Th.__super__=
s;Th.prototype=k(s.prototype,{init:function(a,b,c){null==c&&(c=!1);this._prefix=a;this._nbRandom=b;c?this.changeImage(!0):(this.changeImage(!1),this._currentDelay=5*Math.random()+1)},onStart:function(){s.prototype.onStart.call(this);E.inEditor(this.owner)||(this._pack=A.getPack("sprites_highend"),this._image=O.createImage("billboard/"+this._imageUrl,this._pack),this.owner.addChild((new o).add(this._image)))},onRemoved:function(){null!=this._image&&this.owner.removeChild(this._image.owner);this._image=
null;s.prototype.onRemoved.call(this)},onUpdate:function(a){s.prototype.onUpdate.call(this,a);0<this._nbRandom&&null!=this._image&&(0>=this._currentDelay&&(this.changeImage(!1)&&this.swapImage(this._imageUrl),this._currentDelay=5*Math.random()+1),this._currentDelay-=a)},changeImage:function(a){var b=!1,a=a?this._prefix+m.currentCharacter.name:this._prefix+(Math.floor(Math.random()*this._nbRandom)+1);a!=this._imageUrl&&(b=!0,this._imageUrl=a);return b},swapImage:function(){this._image2=O.createImage("billboard/"+
this._imageUrl,this._pack);this.owner.addChild((new o).add(this._image2));F.from(this._image2,{alpha:0},{time:1});F.to(this._image,{alpha:0},{time:1,onComplete:l(this,this.onSwapComplete)})},onSwapComplete:function(){this._image=this._image2;this._image2=null},__class__:Th});var Uh=function(){j.call(this)};g["game.components.CalloutText"]=Uh;Uh.__name__=["game","components","CalloutText"];Uh.__super__=j;Uh.prototype=k(j.prototype,{get_name:function(){return"CalloutText_66"},onStart:function(){j.prototype.onStart.call(this);
this._text=this.owner._compMap.Sprite_5;F.to(this._text,{anchorY:30},{time:1,onComplete:l(this,this.onCalloutComplete),ease:D.backOut})},onStop:function(){this._text=null;j.prototype.onStop.call(this)},onCalloutComplete:function(){this.owner._internal_getFromParents("ActorSystem_4").removeActor(this.owner)},__class__:Uh});var Vh=function(){this.minFallSpeed=5;this.returnToIdleDelay=2};g["game.components.Catcher"]=Vh;Vh.__name__=["game","components","Catcher"];Vh.__super__=j;Vh.prototype=k(j.prototype,
{get_name:function(){return"Catcher_83"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._animation=this.owner._compMap.Sprite_5;this._physics=this.owner._compMap.PhysicsComponent_25;this._connection=this.owner._compMap.CollectorComponent_55.onCollection.connect(l(this,this.onCollection));this.setState("idle")},onStop:function(){this._connection.dispose();j.prototype.onStop.call(this)},onCollection:function(a,b){b._compMap.Sprite_5.setAlpha(0);
this.setState("catch",null,!1);F.delayCallTo(l(this,this.onCatch),this.returnToIdleDelay)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);"idle"==this._currentState&&this._physics.getVelocity().get_y()>this.minFallSpeed?this.setState("fall"):"fall"==this._currentState&&0>=this._physics.getVelocity().get_y()&&this.setState("land",l(this,this.onLanded))},onCatch:function(){this.setState("idle")},onLanded:function(){this.setState("idle")},setState:function(a,b,c){null==c&&(c=!0);a!=this._currentState&&
(this._currentState=a,null!=this._animation&&null!=this._animation.animation&&this._animation.set(a,{onComplete:b,loop:c}))},__class__:Vh});var Wh=function(){};g["game.components.CatcherSpawner"]=Wh;Wh.__name__=["game","components","CatcherSpawner"];Wh.__super__=j;Wh.prototype=k(j.prototype,{get_name:function(){return"CatcherSpawner_82"},onStart:function(){j.prototype.onStart.call(this);E.inEditor(this.owner)||(this._transform=this.owner._compMap.TransformComponent_32,this.recreateCatcher())},onStop:function(){this._transform=
null;j.prototype.onStop.call(this)},recreateCatcher:function(){var a;E.getSystemEntity(this.owner);a=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");a.spawn({template:{key:m.currentOpponent.team+"_catcher"},transform:{position:{x:this._transform.position.x,y:this._transform.position.y}}});a.removeActor(this.owner)},__class__:Wh});var Xh=function(){this._state="idle";this._totalIdle=1;this.specialIdleChance=0.3};g["game.components.Character"]=Xh;Xh.__name__=["game","components","Character"];
Xh.__super__=j;Xh.prototype=k(j.prototype,{get_name:function(){return"Character_64"},onStart:function(){j.prototype.onStart.call(this);var a=E.getSystemEntity(this.owner);this._soundSystem=a._compMap.SoundSystem_27;this._actors=a._compMap.ActorSystem_4;this._disposer=this.owner._compMap.Disposer_34;this._transform=this.owner._compMap.TransformComponent_32;this._anim=X.__instanceof(this.owner._compMap.Sprite_5,mb)?this.owner._compMap.Sprite_5:null;null!=this._anim&&(a=this._anim.getAnimation(),a.hasAnim("idle2")&&
this._totalIdle++,a.hasAnim("idle3")&&this._totalIdle++,a.hasAnim("idle5")&&this._totalIdle++,this._disposer.add(a.animComplete.connect(l(this,this.onAnimComplete))))},onAnimComplete:function(){if("swing"==this._state||"power"==this._state)this._state="idle";if("idle"==this._state){var a="idle";if(Math.random()<=this.specialIdleChance){var b=Math.round(Math.random()*this._totalIdle)+1;2<=b&&(a="idle"+b)}this.setAnim(this._anim.getAnimation().hasAnim(a)?a:"idle")}},setState:function(a,b,c){null==b&&
(b=!1);if(a==this._state)return this._state;a=this._state=a;null==c&&(c={});switch(this._state){case "power_in":c.loop=!1;break;case "power":c.loop=!1;break;case "swing":c.loop=!1;break;case "ready":c.loop=!1}this.setAnim(a,c,b);return this._state},get_state:function(){return this._state},setAnim:function(a,b,c){null==c&&(c=!1);this._anim.set(a,b,c)},__class__:Xh,__properties__:k(j.prototype.__properties__,{get_state:"get_state"})});var Yh=function(){this._nbCodeMultiplier=5;this.templates=[]};g["game.components.DecorSpawner"]=
Yh;Yh.__name__=["game","components","DecorSpawner"];Yh.__super__=j;Yh.prototype=k(j.prototype,{get_name:function(){return"DecorSpawner_69"},onStart:function(){j.prototype.onStart.call(this);V.codeUnlocked("GOJIRA")?this._forcedTemplate="dino":V.codeUnlocked("MARSATTACK")&&(this._forcedTemplate="alien_saucer");null==this._forcedTemplate&&(0.3>Math.random()||0==this.templates.length||E.inEditor(this.owner))||this.recreateDecor()},onStop:function(){j.prototype.onStop.call(this)},recreateDecor:function(){var a;
a=null==this._forcedTemplate?this.templates[Math.floor(Math.random()*this.templates.length)]:this._forcedTemplate;var b;E.getSystemEntity(this.owner);b=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");b.spawn({template:{key:a}});b.removeActor(this.owner);if(null!=this._forcedTemplate)for(var c=0,d=this._nbCodeMultiplier;c<d;){var e=c++;b.spawn({template:{key:a},transform:{position:this.getPosition(e+1)}});b.removeActor(this.owner)}},getPosition:function(a){var b={};"dino"==this._forcedTemplate?
b={x:800+800*a,y:0}:"alien_saucer"==this._forcedTemplate&&(b={x:800+400*a,y:-200-200*(a%2)});return b},__class__:Yh});var Zh=function(){this._roaring=!1;this._dir=1;j.call(this)};g["game.components.Dinosaur"]=Zh;Zh.__name__=["game","components","Dinosaur"];Zh.__super__=j;Zh.prototype=k(j.prototype,{get_name:function(){return"Dinosaur_70"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._sprite=this.owner._compMap.Sprite_5},onRemoved:function(){j.prototype.onRemoved.call(this);
this._transform=null},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._roaring||(0.05>Math.random()&&null==this._sprite.rotation._behavior&&this._sprite.rotation.animateTo(0==this._sprite.rotation._value?10:0,1,D.quadInOut),this._sprite.rotation.update(a),0.01>Math.random()&&null==this._sprite.x._behavior&&(this._roaring=!0,this._sprite.animation.gotoAndPlay("roar",{onComplete:l(this,this.onRoarComplete)})),this._sprite.x.update(a))},onRoarComplete:function(){this._roaring=!1;this._dir*=
-1;this._sprite.x.animateBy(300*this._dir,5,D.backInOut);this._sprite.scaleX.set__(this._dir);this._sprite.animation.gotoAndPlay(["flip","idle"])},__class__:Zh});var $h=function(){this._dir=1;j.call(this)};g["game.components.Saucer"]=$h;$h.__name__=["game","components","Saucer"];$h.__super__=j;$h.prototype=k(j.prototype,{get_name:function(){return"Saucer_71"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._sprite=this.owner._compMap.Sprite_5},
onRemoved:function(){j.prototype.onRemoved.call(this);this._transform=null},onUpdate:function(a){j.prototype.onUpdate.call(this,a);0.01>Math.random()&&null==this._sprite.x._behavior&&(this._dir*=-1,this._sprite.x.animateBy(300*this._dir,5,D.backInOut),this._sprite.scaleX.set__(-this._dir));this._sprite.x.update(a)},__class__:$h});var ai=function(){this._forceNormalPitch=!1;this.onPitch=new T;j.call(this)};g["game.components.Pitcher"]=ai;ai.__name__=["game","components","Pitcher"];ai.__super__=j;ai.prototype=
k(j.prototype,{get_name:function(){return"Pitcher_77"},onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this);if(m.inTournament){var a=ha.getLvlIndexByName(m.currentLevel);this._ballTemplates=x.levelPitches[a]}else this._ballTemplates=x.derbyPitches;this._transform=this.owner._compMap.TransformComponent_32;this._character=this.owner._compMap.Character_64;this._animation=this.owner._compMap.Sprite_5;E.getSystemEntity(this.owner);this._tut=E.getSystemEntity(this.owner).getComponent("GameTut_75");
V.codeUnlocked("DREAMFIELD")&&this._animation.setAlpha(0.4)},onStop:function(){j.prototype.onStop.call(this);this._transform=this._animation=this._character=null},idle:function(){this.setState("pitch_idle")},pitch:function(a){"level2"==m.currentLevel?this._tut.playStep("power"):"level3"==m.currentLevel&&this._tut.playStep("breakables");this._forceNormalPitch=a;this.setState("pitch_in",!1,{onComplete:l(this,this.pitchThrow),loop:!1})},pitchThrow:function(){v.play("pitch");var a=this._ballTemplates[Math.floor(Math.random()*
this._ballTemplates.length)];this._forceNormalPitch&&(a="pitcher_ball_normal");E.getSystemEntity(this.owner);this._ball=E.getSystemEntity(this.owner).getComponent("ActorSystem_4").spawn({template:{key:a},transform:{position:{x:this._transform.position.x+this.ballOffset.x,y:this._transform.position.y+this.ballOffset.y}}});this.onPitch.emit(this._ball._compMap.Ball_65);this.setState("pitch",!1,{onComplete:l(this,this.idle)})},setState:function(a,b,c){null==b&&(b=!1);null!=this._character&&this._character.setState(a,
b,c)},__class__:ai});var $f=function(){this.currentState=-1;this.states=this.removalDelay=0;j.call(this);this.baseState=1};g["game.components.Destructible"]=$f;$f.__name__=["game","components","Destructible"];$f.__super__=j;$f.prototype=k(j.prototype,{get_name:function(){return"Destructible_84"},onStart:function(){j.prototype.onStart.call(this);this._disposer=this.owner._compMap.Disposer_34;this._health=this.owner._compMap.HealthComponent_54;this._display=this.owner._compMap.Sprite_5;this._animation=
X.__instanceof(this._display,mb)?this._display:null;this._image=X.__instanceof(this._display,lf)?this._display:null;this._damage=this.owner._compMap.DamageComponent_53;this._transform=this.owner._compMap.TransformComponent_32;this._physics=this.owner._compMap.PhysicsComponent_25;this._exploder=q.instance(this.owner._compMap.LauncherComponent_57,mf);this._disposer.add(this._health.onDamage.connect(l(this,this.onDamageEvent)));this._disposer.add(this._health.onDeath.connect(l(this,this.onDeathEvent)));
this.setDamageState()},onRemoved:function(){j.prototype.onRemoved.call(this);this._exploder=this._physics=this._transform=this._damage=this._image=this._animation=this._display=this._health=this._disposer=null},remove:function(){if(null!=this.owner){var a;a=this.owner._internal_getFromParents("ActorSystem_4");null!=a&&a.removeActor(this.owner)}},onDamageEvent:function(a){if(!this._health.isDead()&&(this.setDamageState(),a=a._compMap.Sprite_5.x._value<this._display.x._value?-1:1,null!=this.owner.firstChild)){var b=
this.owner.firstChild._compMap.Sprite_5;b.x.set__(25*a);b.x.animateTo(0,0.3,D.elasticOut)}},onDeathEvent:function(){null!=this._damage&&this.owner.remove(this._damage);null!=this._animation&&(this._animation.animation.gotoAndStop("hurt"),this._animation.animation.stop());this.executeLastState()},setState:function(a){a!=this.currentState&&(this.currentState=a,this.currentStateName=this.getStateName(a),this.currentState-this.baseState>=this.getLastState()-1?this.executeLastState():this.executeState())},
setDamageState:function(a){null==a&&(a=-1);0>a&&(a=this.getStateFromHealth());this.setState(a)},getStateFromHealth:function(){return Math.round((1-this._health.value())*(this.states-this.baseState))+this.baseState},getLastState:function(){return this.states},executeState:function(){if(null!=this._animation)this._animation.animation.gotoAndPlay(this.currentStateName);else if(null!=this._image)this._image.setSymbol(this.currentStateName);else throw"Incompatible display";},executeLastState:function(){if(!this.onLastState)if(this.onLastState=
!0,this.hideOnLastState&&null!=this._display&&this._display.alpha.set__(0),this.disablePhysicsOnLastState&&null!=this._physics&&this._physics.disable(),null==this.lastStateType&&this.setState(this.getLastState()),"explode"==this.lastStateType)this.explode();else this.onLastStateComplete()},explode:function(){null!=this._exploder&&(!this.disableExplosionForSlowDevices||!r.slow)&&this._exploder.explode();this.onLastStateComplete()},onLastStateComplete:function(){this.removeOnDeath&&(0<this.removalDelay?
F.delayCallTo(l(this,this.remove),1,this.owner):this.remove())},getStateName:function(a){if(null==this.asset)throw"No state name template!";return this.asset+a},__class__:$f});var bi=function(){this._lastPosition=new La(0,0);this._timeLeft=0;this._savingPositions=!1;this.distanceMin=30;this.duration=2;this.autoStart=!0;j.call(this)};g["game.components.Trajectory"]=bi;bi.__name__=["game","components","Trajectory"];bi.__super__=j;bi.prototype=k(j.prototype,{get_name:function(){return"Trajectory_85"},
onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this);E.getSystemEntity(this.owner);this._layer=E.getSystemEntity(this.owner).getComponent("RendererSystem_7").addLayer({name:"trajectory"});this._timeLeft=this.duration;this._transform=this.owner._compMap.TransformComponent_32;this.autoStart&&this.startSaving()},onUpdate:function(a){if(this._savingPositions){if(0<this.duration&&(this._timeLeft-=a,0>=this._timeLeft)){this._savingPositions=!1;return}var b=
Math.abs(this._transform.position.x-this._lastPosition.x),c=Math.abs(this._transform.position.y-this._lastPosition.y);b+c>this.distanceMin&&this.savePosition();j.prototype.onUpdate.call(this,a)}},startSaving:function(){this._layer.owner.disposeChildren();this._savingPositions=!0},savePosition:function(){this._lastPosition.set(this._transform.position.x,this._transform.position.y);this.createDot()},createDot:function(){var a=new Y(A.getPack("sprites").getTexture("dot"));a.setXY(this._lastPosition.x,
this._lastPosition.y);this._layer.addChild((new o).add(a))},__class__:bi});var ci=function(){this.magnetType="BALL_PICKUP";this.minSpeed=25;this.speedFactor=0.15;this.range=500;j.call(this)};g["game.components.Magnet"]=ci;ci.__name__=["game","components","Magnet"];ci.__super__=j;ci.prototype=k(j.prototype,{get_name:function(){return"Magnet_86"},onStart:function(){j.prototype.onStart.call(this);E.getSystemEntity(this.owner);this._collectables=E.getSystemEntity(this.owner).getComponent("ActorSystem_4").getActorsByComponent(yc);
this._transform=this.owner._compMap.TransformComponent_32},onStop:function(){this._collectables=this._transform=null;j.prototype.onStop.call(this)},onUpdate:function(){var a;if(null!=this._collectables&&0<this._collectables.length)for(var b=0,c=this._collectables.length;b<c;){var d=b++;if(this._collectables[d]._compMap.CollectableComponent_56.type!=this.magnetType)break;a=this._collectables[d]._compMap.TransformComponent_32;this.inRange(a)&&this.magnetize(this._collectables[d])}},inRange:function(a){var b=
Math.abs(this._transform.position.x-a.position.x),a=Math.abs(this._transform.position.y-a.position.y);return b+a<=this.range},magnetize:function(a){var b=a._compMap.PhysicsComponent_25,a=a._compMap.TransformComponent_32,c=(this._transform.position.x-a.position.x)*this.speedFactor,d=(this._transform.position.y-a.position.y)*this.speedFactor;0<c&&c<this.minSpeed?c=this.minSpeed:0>c&&c>-this.minSpeed&&(c=-this.minSpeed);b.setTransform=!1;a.position.x+=c;a.position.y+=d},__class__:ci});var Hb=function(){j.call(this)};
g["game.components.pitch.PitchBall"]=Hb;Hb.__name__=["game","components","pitch","PitchBall"];Hb.__super__=j;Hb.prototype=k(j.prototype,{get_name:function(){return"PitchBall_87"},onAdded:function(){j.prototype.onAdded.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._physics=this.owner._compMap.PhysicsComponent_25;this.applyEffect()},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._physics=this.owner._compMap.PhysicsComponent_25;
this.applyEffect()},applyEffect:function(){null!=this._physics&&(this._physics.velocity={x:-700,y:0},this._physics.setVelocity(-700,0))},stopEffect:function(){null!=this._physics&&this._physics.enable(!1)},__class__:Hb});var di=function(){j.call(this)};g["game.components.pitch.PitchNormal"]=di;di.__name__=["game","components","pitch","PitchNormal"];di.__super__=Hb;di.prototype=k(Hb.prototype,{applyEffect:function(){null!=this._physics&&(this._physics.velocity={x:-430,y:-350},this._physics.setVelocity(-430,
-350))},__class__:di});var ei=function(){j.call(this)};g["game.components.pitch.PitchFire"]=ei;ei.__name__=["game","components","pitch","PitchFire"];ei.__super__=Hb;ei.prototype=k(Hb.prototype,{applyEffect:function(){null!=this._physics&&(this._physics.velocity={x:-700,y:0});null!=this._physics&&this._physics.setVelocity(-700,0)},__class__:ei});var fi=function(){this._started=!1;this.speedDuration=1.2;this.backDuration=0.4;this.slowDuration=0.5;this.totalDistance=1E3;this.backDistance=30;this.slowDistance=
150;j.call(this)};g["game.components.pitch.PitchRocket"]=fi;fi.__name__=["game","components","pitch","PitchRocket"];fi.__super__=Hb;fi.prototype=k(Hb.prototype,{onStart:function(){Hb.prototype.onStart.call(this);this._started=!0},onUpdate:function(a){Hb.prototype.onUpdate.call(this,a);this._started&&null!=this._animatedPoint&&(this._animatedPoint.update(a),this._transform.position.x=this._animatedPoint.x._value,this._transform.position.y=this._animatedPoint.y._value)},applyEffect:function(){if(null!=
this._transform){this._secondTranslation=this.totalDistance-this.slowDistance+this.backDistance;this._animatedPoint=new Ib(this._transform.position.x,this._transform.position.y);var a=this.owner._compMap.Script_28;null==a&&(a=new Sb,this.owner.add(a));a.run(new Ra([new hc(this._animatedPoint.x,this._transform.position.x-this.slowDistance,this.slowDuration,D.quadIn),new hc(this._animatedPoint.x,this._transform.position.x-this.backDistance,this.backDuration,D.sineInOut),new hc(this._animatedPoint.x,
this._transform.position.x-this._secondTranslation,this.speedDuration,D.quadIn)]))}},stopEffect:function(){this._started=!1},__class__:fi});var gi=function(){this._randomTime=0;this._started=!1;this.randomRange=20;this.randomFrequency=0.1;this.maxSquirrelOffset=20;j.call(this)};g["game.components.pitch.PitchSquirrel"]=gi;gi.__name__=["game","components","pitch","PitchSquirrel"];gi.__super__=Hb;gi.prototype=k(Hb.prototype,{onStart:function(){Hb.prototype.onStart.call(this);this._animatedOffset=new Q(0);
this._started=!0},onStop:function(){this._started=!1;this._animatedPoint.dispose();this._animatedPoint=null;Hb.prototype.onStop.call(this)},onUpdate:function(a){Hb.prototype.onUpdate.call(this,a);this._started&&null!=this._animatedPoint&&(this._animatedPoint.update(a),this._animatedOffset.update(a),this._randomTime-=a,0>=this._randomTime&&(this._randomTime=this.randomFrequency,this._animatedOffset.animateTo(2*Math.random()*this.randomRange-this.randomRange,this.randomFrequency)),this._transform.position.x=
this._animatedPoint.x._value,this._transform.position.y=this._animatedPoint.y._value+this._animatedOffset._value)},applyEffect:function(){null!=this._transform&&(this._origin=this._transform.position.y,this._animatedPoint=new Ib(this._transform.position.x,this._transform.position.y),this._animatedPoint.x.animateTo(this._transform.position.x-900,3,D.linear),this._animatedPoint.y.set_behavior(new Qc(this._transform.position.y-this.maxSquirrelOffset,this._transform.position.y+this.maxSquirrelOffset,
0.5,0,0)))},stopEffect:function(){this._started=!1},__class__:gi});var xb=function(){this._disposer=new bb;this.onSwingResult=new gb;this.hitRangeBad=75;this.hitRangeGood=50;this.hitRangePerfect=10;this.hitPosition={x:20,y:-60};this.ballTemplate="batter_ball_normal";j.call(this)};g["game.components.swings.Swing"]=xb;xb.__name__=["game","components","swings","Swing"];xb.__super__=j;xb.prototype=k(j.prototype,{get_name:function(){return"Swing_74"},init:function(){E.getSystemEntity(this.owner);this._actorSystem=
E.getSystemEntity(this.owner).getComponent("ActorSystem_4");this._character=this.owner._compMap.Character_64;this._transform=this.owner._compMap.TransformComponent_32;this._animation=this.owner._compMap.Sprite_5;this._disposer.add(this._animation.getAnimation().onCuePoint.connect(l(this,this.onCuePoint)));"ready"==this._character.get_state()&&this.setState("swing")},onRemoved:function(){this._disposer.dispose();this._ballTransform=this._ballPhysics=this._ball=this._animation=this._actorSystem=this._transform=
null;j.prototype.onRemoved.call(this)},setState:function(a,b){null!=this._character&&this._character.setState(a,!1,{onComplete:b})},onCuePoint:function(a){null!=this._ball&&("impact"==a||"createBall"==a)&&this.swingImpact()},prepare:function(a,b,c,d){this._result=-1;this._angle=a;this._strength=b;this._ratio=c;this._collectionCallback=d;this.prepareAnimation()},prepareAnimation:function(){this.setState("ready")},followBall:function(a){this._ball=a;this._ballPhysics=this._ball._compMap.PhysicsComponent_25;
this._ballTransform=this._ball._compMap.TransformComponent_32},swing:function(){this.swingCheck()},swingCheck:function(){var a=this.getBallDistance();this._result=a<this.hitRangePerfect?3:a<this.hitRangeGood?2:a<this.hitRangeBad?1:0;0!=this._result?(this._ball._compMap.PitchBall_87.stopEffect(),3==this._result&&this.swingEffect(),null==this._effectSoundPlayback&&this.swingPreAnimation()):(this.swingAnimation(),this.onSwingEnd())},swingEffect:function(){this.swingPreAnimation()},swingPreAnimation:function(){this._actorSystem.removeActor(this._ball);
this.swingAnimation()},swingAnimation:function(){this.setState("swing")},swingImpact:function(){0!=this._result&&(130<=this._strength?v.play("hit_3","CROWD"):100<=this._strength?v.play("hit_2","CROWD"):50<=this._strength&&v.play("hit_1","CROWD"),this.createImpact(this._result),this._ball=this.createBall({x:this._transform.position.x+this.hitPosition.x,y:this._transform.position.y+this.hitPosition.y}),this._ballPhysics=this._ball._compMap.PhysicsComponent_25,this._ballTransform=this._ball._compMap.TransformComponent_32,
this.onSwingEnd())},onSwingEnd:function(){this.onSwingResult.emit(this._result,this._ball)},onUpdate:function(){null!=this._effectSoundPlayback&&"true"==this._effectSoundPlayback.get_complete().toString()&&(this._effectSoundPlayback=null,this.swingPreAnimation())},getBallDistance:function(){return Math.abs(this._ballTransform.position.x-(this._transform.position.x+this.hitPosition.x))},createBall:function(a){var b=this.getVelocity(this._angle,this._strength);return this._actorSystem.spawn({template:{key:this.ballTemplate},
transform:{position:{x:a.x,y:a.y}},physics:{velocity:b}})},getVelocity:function(a,b){return{x:10*Math.cos(a)*b,y:10*Math.sin(a)*b}},createImpact:function(a){0!=a&&this._actorSystem.spawn({template:{key:"impact"},transform:{position:{x:this._ballTransform.position.x,y:this._ballTransform.position.y}},animation:{start:"impact"+a}})},__class__:xb});var $=function(){this.removeBallBeforeSwing=this._checkPitcherBall=this._checkBatterBall=!1;xb.call(this)};g["game.components.swings.PowerSwing"]=$;$.__name__=
["game","components","swings","PowerSwing"];$.__super__=xb;$.prototype=k(xb.prototype,{onRemoved:function(){xb.prototype.onRemoved.call(this);this._velocity=null;this._checkBatterBall=!1},prepareAnimation:function(){this.setState("power_in")},swingEffect:function(){this.removeBallBeforeSwing&&this._actorSystem.removeActor(this._ball);xb.prototype.swingEffect.call(this)},swingPreAnimation:function(){this.removeBallBeforeSwing||this._actorSystem.removeActor(this._ball);this.swingAnimation()},swingAnimation:function(){this.setState("power")},
swingImpact:function(){this._checkBatterBall=!0;null!=this.soundOnImpact&&v.play(this.soundOnImpact,"SUPER_MOVE");xb.prototype.swingImpact.call(this)},followBall:function(a){xb.prototype.followBall.call(this,a);this._checkPitcherBall=!0},onUpdate:function(a){xb.prototype.onUpdate.call(this,a);this._checkPitcherBall&&this.getBallDistance()<this.hitRangePerfect&&(this._checkPitcherBall=!1,this.swing())},__class__:$});var hi=function(){this.magnifyRangeIncrease=150;this.strengthBoost=30;$.call(this)};
g["game.components.swings.MagnetBall"]=hi;hi.__name__=["game","components","swings","MagnetBall"];hi.__super__=$;hi.prototype=k($.prototype,{onRemoved:function(){this.stopSfx();$.prototype.onRemoved.call(this)},onStop:function(){this.stopSfx();$.prototype.onStop.call(this)},createBall:function(a){this._strength+=this.strengthBoost;a=$.prototype.createBall.call(this,a);X.__cast(a._compMap.Sprite_5,mb).animation.gotoAndPlay("magnet_in,magnet");V.codeUnlocked("MAGNIFY")&&(a._compMap.Magnet_86.range+=
this.magnifyRangeIncrease);null==this._sfx&&(this._sfx=v.play("magnet","SUPERMOVE",1,!0));this._disposer.add(a._compMap.Ball_65.onSpeedSlow.connect(l(this,this.stopSfx)));this._disposer.add(a._compMap.Ball_65.onSpeedNull.connect(l(this,this.stopSfx)));return a},stopSfx:function(){null!=this._sfx&&(this._sfx.dispose(),this._sfx=null)},__class__:hi});var ii=function(){this._isMainBall=!0;this.splitStrength=75;this.splitDistance=50;this.splitAngle=30;this.nbSplit=6;this.splitDelay=2;this.strengthBoost=
0;$.call(this)};g["game.components.swings.MultiBall"]=ii;ii.__name__=["game","components","swings","MultiBall"];ii.__super__=$;ii.prototype=k($.prototype,{onAdded:function(){$.prototype.onAdded.call(this);this._isMainBall=!0;this._addedBalls=[]},onRemoved:function(){for(var a=0,b=this._addedBalls;a<b.length;){var c=b[a];++a;this._actorSystem.removeActor(c)}this._velocity=this._addedBalls=null;$.prototype.onRemoved.call(this)},swing:function(){V.codeUnlocked("MAKEITRAIN")&&(this.splitAngle=15,this.nbSplit=
Math.round(360/this.splitAngle));this._splitDelay=this.splitDelay;$.prototype.swing.call(this)},swingImpact:function(){$.prototype.swingImpact.call(this);this._ballTransform.rotation=this._angle*(180/Math.PI)},onUpdate:function(a){$.prototype.onUpdate.call(this,a);this._checkBatterBall&&(this._splitDelay-=a,0>=this._splitDelay&&(this._checkBatterBall=!1,this.split()))},split:function(){this._isMainBall=!1;var a,b=this._ballPhysics.getVelocity(),c=Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this),
function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)),d=this.getVelocity(c,this.splitStrength);this._ballPhysics.velocity=d;this._ballPhysics.setVelocity(d.x,d.y);for(var d=0,e=this.nbSplit;d<e;){a=d++;a=Math.floor(a-this.nbSplit/2);0<=a&&a++;a=c-this.splitAngle*a*Math.PI/180;var h=Math.cos(a)*this.splitDistance,n=Math.sin(a)*this.splitDistance;this._angle=a-0.1;this._strength=this.splitStrength;a=this.createBall({x:this._ballTransform.position.x+h,y:this._ballTransform.position.y+n});this._disposer.add(a._compMap.CollectorComponent_55.onCollection.connect(this._collectionCallback));
a._compMap.TransformComponent_32.rotation=this.splitAngle;this._addedBalls.push(a)}this.addExplosion();v.play("split_ball","SUPERMOVE")},createBall:function(a){this._isMainBall&&(this._strength+=this.strengthBoost);return $.prototype.createBall.call(this,a)},addExplosion:function(){this._actorSystem.spawn({template:{key:"splitExplosion"},transform:{position:{x:this._ballTransform.position.x,y:this._ballTransform.position.y}}})},__class__:ii});var ji=function(){this._subExplosionOffsetsCode=[{x:100,
y:-100},{x:-100,y:100},{x:-100,y:-100},{x:100,y:100},{x:0,y:-200},{x:-200,y:0},{x:200,y:0},{x:0,y:200}];this._subExplosionOffsets=[{x:100,y:-100},{x:-100,y:100},{x:-100,y:-100},{x:100,y:100}];this.explosionDuration=0.7;this.explosionRadius=300;this.ballDistanceRange=2800;this.minBallDistance=1E3;this.minY=-1E3;$.call(this)};g["game.components.swings.RocketBall"]=ji;ji.__name__=["game","components","swings","RocketBall"];ji.__super__=$;ji.prototype=k($.prototype,{swing:function(){this._ballDistance=
this.minBallDistance+this.ballDistanceRange*this._ratio;$.prototype.swing.call(this)},onRemoved:function(){this._scaleDuration=this._anims=this._physics=this._explosions=null;$.prototype.onRemoved.call(this)},onUpdate:function(a){$.prototype.onUpdate.call(this,a);if(this._checkBatterBall){var b=Math.abs(this._transform.position.x-this._ballTransform.position.x),c=Math.abs(this._transform.position.y-this._ballTransform.position.y);if(b+c>=this._ballDistance||this._ballTransform.position.y<=this.minY)this._checkBatterBall=
!1,this.explode()}if(null!=this._explosions){b=0;for(c=this._explosions.length;b<c;){var d=b++;this._scaleDuration[d]<this.explosionDuration&&(this._scaleDuration[d]+=a,this._physics[d].setRadius(this._ballPhysics.shape.radius+(this.explosionRadius-this._ballPhysics.shape.radius)*(this._scaleDuration[d]/this.explosionDuration)))}}},onSwingEnd:function(){this._ballTransform.rotation=this._angle*(180/Math.PI);$.prototype.onSwingEnd.call(this)},explode:function(){var a=this;this._explosions=[];this._physics=
[];this._anims=[];this._scaleDuration=[];this._explosionDone=0;this._ballPhysics.enable(!1);this._ball._compMap.Sprite_5.setAlpha(0);this.createExplosion(this._ballTransform.position.x,this._ballTransform.position.y);var b;b=V.codeUnlocked("JULYFOURTH")?this._subExplosionOffsetsCode:this._subExplosionOffsets;for(var c=0,d=b.length;c<d;){var e=[c++];F.delayCallTo(function(c){return function(){a.createExplosion(a._ballTransform.position.x+b[c[0]].x,a._ballTransform.position.y+b[c[0]].y)}}(e),0.2*(e[0]+
1))}},createExplosion:function(a,b){var c,d;c=this._actorSystem.spawn({template:{key:"rocketExplosion"},transform:{position:{x:a,y:b}},physics:{shape:{radius:this._ballPhysics.shape.radius}}});this._disposer.add(c._compMap.CollectorComponent_55.onCollection.connect(this._collectionCallback));d=c._compMap.Sprite_5;d.getAnimation().animComplete.connect(l(this,this.onExplosionDone)).once();this._explosions.push(c);this._scaleDuration.push(0);this._physics.push(c._compMap.PhysicsComponent_25);this._anims.push(d);
v.play("rocket_explosion","SUPERMOVE")},onExplosionDone:function(a,b){b.stop();b.setAlpha(0);this._explosionDone++;if(this._explosionDone>=this._explosions.length){for(var c=0,d=this._explosions;c<d.length;){var e=d[c];++c;this._actorSystem.removeActor(e)}this._explosions=[];this._ball._compMap.Ball_65.stop();this._ballTransform=this._ballPhysics=this._ball=null}},createBall:function(a){v.play("rocket_launch","SUPERMOVE");return $.prototype.createBall.call(this,a)},__class__:ji});var ki=function(){this.moonCodeOffset=
400;this.angleMin=55;this.scale=1;this.ballDistance=-1800;$.call(this)};g["game.components.swings.FallingMoon"]=ki;ki.__name__=["game","components","swings","FallingMoon"];ki.__super__=$;ki.prototype=k($.prototype,{onRemoved:function(){this._moons=null;$.prototype.onRemoved.call(this)},onUpdate:function(a){$.prototype.onUpdate.call(this,a);this._checkBatterBall&&this._ballTransform.position.y<=this.ballDistance&&(this._checkBatterBall=!1,this._moons=[],a=this.createMoon(),a._compMap.Moon_88.onComplete.connect(l(this,
this.onMoonComplete)).once(),this._moons.push(a),V.codeUnlocked("THATSNOMOON")&&(this._moons.push(this.createMoon(-this.moonCodeOffset)),this._moons.push(this.createMoon(this.moonCodeOffset))))},swingImpact:function(){this._angle=(Math.min(this.angleMin,180*this._angle/Math.PI+90)-90)*(Math.PI/180);$.prototype.swingImpact.call(this)},createMoon:function(a){null==a&&(a=0);this._ball._compMap.Sprite_5.setAlpha(0);this._ballPhysics.setVelocity(0,-this._ballPhysics.getVelocity().get_y());a=this._actorSystem.spawn({template:{key:"moonball"},
transform:{position:{x:this._ballTransform.position.x+a,y:this._ballTransform.position.y}}});this._disposer.add(a._compMap.CollectorComponent_55.onCollection.connect(this._collectionCallback));return a},onMoonComplete:function(){for(var a=0,b=this._moons;a<b.length;){var c=b[a];++a;F.to(c._compMap.Sprite_5,{alpha:0},{time:0.5,onComplete:l(this,this.onMoonDisappeared),ease:D.backOut})}},onMoonDisappeared:function(){for(var a=0,b=this._moons;a<b.length;){var c=b[a];++a;F.kill(c._compMap.Sprite_5);this._ballPhysics.setVelocity(0,
0);this._actorSystem.removeActor(c)}this._moons=null},__class__:ki});var li=function(){this._landed=!1;this.onComplete=new pa;this.groundY=400;this.scale=1};g["game.components.swings.Moon"]=li;li.__name__=["game","components","swings","Moon"];li.__super__=j;li.prototype=k(j.prototype,{get_name:function(){return"Moon_88"},onAdded:function(){j.prototype.onAdded.call(this)},onStart:function(){j.prototype.onStart.call(this);this._animation=this.owner._compMap.Sprite_5;this._physics=this.owner._compMap.PhysicsComponent_25;
this._transform=this.owner._compMap.TransformComponent_32;this._animation.scale=this.scale;this._animation.setScale(this.scale);this._physics.shape.width*=this.scale;this._physics.shape.height*=this.scale;this._physics.setSize(this._physics.shape.width,this._physics.shape.height);v.play("moon_fall","SUPERMOVE")},onStop:function(){j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);!this._landed&&this._transform.position.y>=this.groundY&&this.land()},land:function(){this._landed=
!0;this._physics.setVelocity(0,0);this._physics.enable(!1);this._animation.animation.gotoAndPlay("land",{onComplete:l(this,this.onMoonComplete)});this._animation.animation.get_animation().loop=!1;v.play("moon_explosion","SUPERMOVE")},onMoonComplete:function(){this.onComplete.emit()},__class__:li});var mi=function(){this.running=!1;this.onTravellingComplete=new pa;he.call(this)};g["game.components.TravellingCamera"]=mi;mi.__name__=["game","components","TravellingCamera"];mi.__super__=id;mi.prototype=
k(id.prototype,{onStart:function(){id.prototype.onStart.call(this);this.init()},init:function(){E.getSystemEntity(this.owner);var a=E.getSystemEntity(this.owner).getComponent("BaseGameSystem_8").levelData,b=560-a.yMinimum+200,a=a.xMaximum+200,b=b<a?560/b:960/a;this._scale=new Q(b);this._position=new Q(a-960/b);this._script=this.owner._compMap.Script_28;null==this._script&&(this._script=new Sb,this.owner.add(this._script))},start:function(){this.init();this._script.run(new Ra([new hc(this._position,
0,5,D.quadInOut),new hc(this._scale,1,2,D.quadInOut),new ab(l(this,this.stop))]));this.running=!0;this.setCurrent()},stop:function(){this.running=!1;this._script.stopAll();this.onTravellingComplete.emit()},update:function(a){this._position.update(a);this._scale.update(a);this._renderer.setScale(this._scale._value);this._transform.position.x=this._position._value;var b=0,a=0-this._transform.position.x,a=Math.min(a,0),b=this._renderer.dimensionsScaled.height-560;this._renderer.move(a,b)},__class__:mi});
var ni=function(){j.call(this)};g["game.components.SoundTrigger"]=ni;ni.__name__=["game","components","SoundTrigger"];ni.__super__=j;ni.prototype=k(j.prototype,{get_name:function(){return"SoundTrigger_89"},onStart:function(){j.prototype.onStart.call(this);null!=this.hitSound&&(E.getSystemEntity(this.owner),this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26"),this._physicSystem.addContactListener(Ba.BEGIN,Ia.ANY,"ANY_BODY","ANY_BODY",this.owner,l(this,this.onContactBegin)));
null!=this.deathSound&&(this._deathConnection=this.owner._compMap.HealthComponent_54.onDeath.connect(l(this,this.onDeath)).once())},onStop:function(){null!=this._deathConnection&&this._deathConnection.dispose();null!=this._physicSystem&&this._physicSystem.removeContactListener(Ba.BEGIN,Ia.ANY,"ANY_BODY","ANY_BODY",this.owner);j.prototype.onStop.call(this)},onContactBegin:function(){v.play(this.hitSound,"COLLISION")},onDeath:function(){v.play(this.deathSound,"COLLISION")},__class__:ni});var oi=function(){this.points=
500;j.call(this)};g["game.components.Homerun"]=oi;oi.__name__=["game","components","Homerun"];oi.__super__=j;oi.prototype=k(j.prototype,{get_name:function(){return"Homerun_90"},onStart:function(){j.prototype.onStart.call(this);this._disposer=new bb;E.getSystemEntity(this.owner);this._logic=E.getSystemEntity(this.owner).getComponent("GameLogic_76");E.getSystemEntity(this.owner);this._tut=E.getSystemEntity(this.owner).getComponent("GameTut_75");this._collector=this.owner._compMap.CollectorComponent_55;
this._disposer.add(this._collector.onCollection.connect(l(this,this.onCollection)))},onStop:function(){this._disposer.dispose();this._tut=this._logic=this._collector=null;j.prototype.onStop.call(this)},onCollection:function(a,b){b._compMap.CollectableComponent_56.data.score=this.points;b._compMap.CollectableComponent_56.data.homerun=1;this._logic.batter.onCollection(a,b);this._tut.playStep("homerun")},__class__:oi});var pi=function(){j.call(this)};g["game.components.ToiletTeleport"]=pi;pi.__name__=
["game","components","ToiletTeleport"];pi.__super__=j;pi.prototype=k(j.prototype,{get_name:function(){return"ToiletTeleport_91"},onStart:function(){j.prototype.onStart.call(this);E.getSystemEntity(this.owner);this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");this._physicSystem.addContactListener(Ba.PRELISTENER,Ia.ANY,"ANY_BODY","ANY_BODY",this.owner,l(this,this.onContact))},onStop:function(){j.prototype.onStop.call(this)},onContact:function(a,b){null==a._compMap.Ball_65||
null==a._compMap.CollectableComponent_56||this._lastBall==a||-90!=180*b.angle/3.141592653589793||(this._lastBall=a,a._compMap.PhysicsComponent_25.setPosition(a._compMap.TransformComponent_32.position.x,a._compMap.TransformComponent_32.position.y-1E3),v.play("toilet","SFX"))},__class__:pi});var qi=function(){};g["stolo.ensys.components.ICullingComponent"]=qi;qi.__name__=["stolo","ensys","components","ICullingComponent"];qi.prototype={__class__:qi};var H=function(){this.onInitComplete=new pa;this.initialized=
!1;this.forceUpdate=!0;this.scale=this.flipX=this.flipY=1;s.call(this);this.set_pointerEnabled(H.ENABLE_POINTER);this.set_visible(!1)};g["stolo.ensys.components.DisplayComponent"]=H;H.__name__=["stolo","ensys","components","DisplayComponent"];H.__interfaces__=[qi];H.__super__=s;H.prototype=k(s.prototype,{dispose:function(){this.layer=this.offset=this._transform=null;s.prototype.dispose.call(this)},onAdded:function(){s.prototype.onAdded.call(this);this.mobilePack&&r.mobile&&(this.pack+=H.mobilePackSuffix);
r.slow&&(this.lowEndPack&&(this.pack+=H.lowEndPackSuffix),null!=this.lowEndAsset&&(this.asset=this.lowEndAsset));this.initialized||this.initStart()},initStart:function(){this.initEnd()},initEnd:function(){this.set_pointerEnabled(0!=(this._flags&4))},initComplete:function(){this.initialized||(this.applyOffset(),this.updateDisplay(),this.initialized=!0,this.onInitComplete.emit())},onStart:function(){s.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;E.getSystemEntity(this.owner);
this._cullingSystem=E.getSystemEntity(this.owner).getComponent("CullingSystem_6");null!=this._cullingSystem?this._cullingSystem.addComponent(this,this.owner):this.enableCulling(!1);this.initComplete()},onStop:function(){null!=this._cullingSystem&&this._cullingSystem.removeComponent(this,this.owner);s.prototype.onStop.call(this)},applyOffset:function(){this.centerAnchor();null!=this.pivot&&(0<=this.pivot.x&&this.anchorX.set__(this.getNaturalWidth()*this.pivot.x),0<=this.pivot.y&&this.anchorY.set__(this.getNaturalHeight()*
this.pivot.y));null!=this.align&&("none"==this.align?this.setAnchor(0,0):"left"==this.align?this.anchorX.set__(0):"right"==this.align&&this.anchorX.set__(this.getNaturalWidth()));if(null!=this.offset){if(0!=this.offset.x){var a=this.anchorX;a.set__(a._value-this.offset.x)}0!=this.offset.y&&(a=this.anchorY,a.set__(a._value-this.offset.y))}},enableCulling:function(a){this.set_visible(!a)},updateDisplay:function(){if(null!=this._transform){if(!this._transform.fixed||this.forceUpdate)this.setXY(this._transform.position.x,
this._transform.position.y),this.setScaleXY(this._transform.direction*this.scale*this.flipX,this.scale*this.flipY),this.set_visible(!0);(!this._transform.fixedRotation||this.forceUpdate)&&this.setRotation(this._transform.rotation);this.forceUpdate=!1}},onUpdate:function(a){this.updateDisplay();s.prototype.onUpdate.call(this,a)},getTexture:function(a,b){var c=A.getPack(a,!1);if(null==c)throw"Cannot load asset '"+b+"', pack '"+a+"' was not found or loaded...";return O.getTexture(b,c)},__class__:H});
var xd=function(){this._partsTotal=0;this._parts=[];this.horizontal=!0;this.scroll=this.scrollOffset=this.autoScroll=0;H.call(this)};g["stolo.ensys.components.ScrollerComponent"]=xd;xd.__name__=["stolo","ensys","components","ScrollerComponent"];xd.__super__=H;xd.prototype=k(H.prototype,{onAdded:function(){H.prototype.onAdded.call(this);null==this.assets&&(this.assets=[]);null!=this.asset&&""!=this.asset&&this.assets.push(this.asset)},onRemoved:function(){H.prototype.onRemoved.call(this);for(var a=
0,b=this._parts;a<b.length;){var c=b[a];++a;c.texture=null;c.next=null;c.previous=null}this._parts=null},onUpdate:function(a){this.scrollOffset+=this.autoScroll;H.prototype.onUpdate.call(this,a)},onStart:function(){for(var a=0,b=this.assets;a<b.length;){var c=b[a];++a;var d=0,e=null,h=0,n=0,h=c.split("@");if("void"==h[0]){if(1==h.length)throw"You must specify a size for the void "+q.string(this.assets);2==h.length?d=q.parseInt(h[1]):3==h.length&&(d=q.parseInt(h[1])+Math.round(Math.random()*q.parseInt(h[2])));
h=this.horizontal?d:this.width;n=this.horizontal?this.height:d}else e=this.getTexture(this.pack,c),d=this.horizontal?e.get_width():e.get_height(),h=e.get_width(),n=e.get_height();this._parts.push({texture:e,width:h,height:n,next:null,previous:null,first:!1,last:!1,start:this._partsTotal,end:this._partsTotal+d});this._partsTotal+=d}a=0;for(b=this._parts.length;a<b;)c=a++,d=this._parts[c],d.next=this._parts[c+1],d.previous=this._parts[c-1],d.first=0==c,d.last=c==this._parts.length-1;this._parts[0].previous=
this._parts[this._parts.length-1];this._parts[this._parts.length-1].next=this._parts[0];this._drawTextureFunc=this.horizontal?l(this,this.drawTextureHorizontal):l(this,this.drawTextureVertical);H.prototype.onStart.call(this)},draw:function(a){if(!(0>=this._parts.length)){var b=(this.scroll+this.scrollOffset)%this._partsTotal;0>b&&(b=this._partsTotal+b);for(var c=this._parts[0];b>c.end&&!(c=c.next,c.last););this._drawTextureFunc(a,c,b-c.start,0)}},drawTextureHorizontal:function(a,b,c,d){var e=Math.max(1,
b.width-c),h=Math.max(1,this.width-d);e<h?(null!=b.texture&&a.drawSubTexture(b.texture,d,0,c,0,e,this.height),this.drawTextureHorizontal(a,b.next,0,d+e)):null!=b.texture&&a.drawSubTexture(b.texture,d,0,c,0,h,this.height)},drawTextureVertical:function(a,b,c,d){var e=Math.max(1,b.height-c),h=Math.max(1,this.height-d);e<h?(null!=b.texture&&a.drawSubTexture(b.texture,0,d,0,c,this.width,e),this.drawTextureVertical(a,b.next,0,d+e)):null!=b.texture&&a.drawSubTexture(b.texture,0,d,0,c,this.width,h)},getNaturalWidth:function(){return this.width},
getNaturalHeight:function(){return this.height},__class__:xd});var Od=function(){this.lockHorizontal=this.lockVertical=this.lockWidth=this.lockHeight=!1;xd.call(this)};g["stolo.ensys.components.LayerScrollerComponent"]=Od;Od.__name__=["stolo","ensys","components","LayerScrollerComponent"];Od.__super__=xd;Od.prototype=k(xd.prototype,{onAdded:function(){xd.prototype.onAdded.call(this)},onRemoved:function(){xd.prototype.onRemoved.call(this)},onStart:function(){xd.prototype.onStart.call(this);this._layer=
this.owner.parent._compMap.Sprite_5;this._layerX=this._layer.x;this._layerY=this._layer.y;this._layerS=this.horizontal?this._layerX:this._layerY;var a;E.getSystemEntity(this.owner);a=E.getSystemEntity(this.owner).getComponent("RendererSystem_7");this._rendererDimensions=null!=a?a.dimensionsScaled:new yb(0,0,r.gameWidth,r.gameHeight)},onUpdate:function(a){xd.prototype.onUpdate.call(this,a);this.scroll=-this._layerS._value;this.lockHorizontal&&this.anchorX.set__(this._layerX._value);this.lockVertical&&
this.anchorY.set__(this._layerY._value);this.lockWidth&&(this.width=this._rendererDimensions.width|0);this.lockHeight&&(this.height=this._rendererDimensions.height|0)},__class__:Od});var ri=function(){Od.call(this)};g["game.components.NightlifeImage"]=ri;ri.__name__=["game","components","NightlifeImage"];ri.__super__=Od;ri.prototype=k(Od.prototype,{onAdded:function(){V.codeUnlocked("NIGHTLIFE")&&(this.pack="sprites_env2");Od.prototype.onAdded.call(this)},__class__:ri});var si=function(){j.call(this)};
g["game.components.Star"]=si;si.__name__=["game","components","Star"];si.__super__=j;si.prototype=k(j.prototype,{get_name:function(){return"Star_92"},onStart:function(){j.prototype.onStart.call(this);r.lowPerformance&&(X.__cast(this.owner._compMap.Sprite_5,mb).animation.stop(),X.__cast(this.owner._compMap.Sprite_5,mb).onAnimStart.connect(l(this,this.stopAnim)).once())},stopAnim:function(){X.__cast(this.owner._compMap.Sprite_5,mb).animation.stop()},__class__:si});var ul=function(){};g["game.components.ComponentList"]=
ul;ul.__name__=["game","components","ComponentList"];var Zf=function(){this._scaleDuration=0;this.minSpeed=10;this.explosionDuration=0.7;this.explosionRadius=200;xb.call(this);this.ballTemplate="batter_ball_derby"};g["game.components.swings.DerbySwing"]=Zf;Zf.__name__=["game","components","swings","DerbySwing"];Zf.__super__=xb;Zf.prototype=k(xb.prototype,{onAdded:function(){xb.prototype.onAdded.call(this)},onRemoved:function(){this._explosionAnim=this._explosion=null;xb.prototype.onRemoved.call(this)},
onUpdate:function(a){xb.prototype.onUpdate.call(this,a);null!=this._explosion&&this._scaleDuration<this.explosionDuration&&(this._scaleDuration+=a,this._explosionPhysics.setRadius(this._ballPhysics.shape.radius+(this.explosionRadius-this._ballPhysics.shape.radius)*(this._scaleDuration/this.explosionDuration)))},onSwingEnd:function(){xb.prototype.onSwingEnd.call(this)},explode:function(){null!=this._explosion||this._ballPhysics.getSpeed()<this.minSpeed||0>=this._result||null==this._ball||(this._ballPhysics.enable(!1),
this._explosion=this._actorSystem.spawn({template:{key:"rocketExplosion"},transform:{position:{x:this._ballTransform.position.x,y:this._ballTransform.position.y}},physics:{shape:{radius:this._ballPhysics.shape.radius}}}),this._disposer.add(this._explosion._compMap.CollectorComponent_55.onCollection.connect(this._collectionCallback)),null!=this._ball._compMap.Sprite_5&&this._ball._compMap.Sprite_5.setAlpha(0),this._scaleDuration=0,this._explosionPhysics=this._explosion._compMap.PhysicsComponent_25,
this._explosionAnim=this._explosion._compMap.Sprite_5,this._explosionAnim.getAnimation().animComplete.connect(l(this,this.onExplosionDone)).once(),v.play("ball_explosion","SUPERMOVE"))},onExplosionDone:function(a,b){b.stop();b.setAlpha(0);this._ball._compMap.Ball_65.stop();this._ballTransform=this._ballPhysics=this._ball=null;null!=this._explosion&&this._actorSystem.removeActor(this._explosion);this._explosion=this._explosionAnim=null},__class__:Zf});var x=function(){};g["game.config.GameConfig"]=
x;x.__name__=["game","config","GameConfig"];x.getOffset=function(a){null==a&&(a=80);return r.iphone?a:0};var Oe=function(a,b,c,d,e){null==e&&(e=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==ga.zpp_pool?this.zpp_inner=new ga:(this.zpp_inner=ga.zpp_pool,ga.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(ga.WAKE|ga.ARBITERS));this.zpp_inner.elasticity;
b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=b/1,this.zpp_inner.invalidate(ga.WAKE|ga.ANGDRAG|ga.ARBITERS));this.zpp_inner.dynamicFriction;c!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=c/1,this.zpp_inner.invalidate(ga.WAKE|ga.ARBITERS));this.zpp_inner.staticFriction;d!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=d/1E3,this.zpp_inner.invalidate(ga.WAKE|ga.PROPS));1E3*this.zpp_inner.density;e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=
e/1,this.zpp_inner.invalidate(ga.WAKE|ga.ARBITERS));this.zpp_inner.rollingFriction};g["nape.phys.Material"]=Oe;Oe.__name__=["nape","phys","Material"];Oe.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:Oe};var ga=function(){this.dynamicFriction=this.staticFriction=
this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=null;this.shapes=new Pe;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};g["zpp_nape.phys.ZPP_Material"]=ga;ga.__name__=["zpp_nape","phys","ZPP_Material"];ga.prototype={wrapper:function(){if(null==this.outer){this.outer=new Oe;var a=this.outer.zpp_inner;a.outer=null;a.next=ga.zpp_pool;ga.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=
a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:ga};var Pe=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Shape"]=Pe;Pe.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];Pe.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==ob.zpp_pool?b=new ob:(b=ob.zpp_pool,ob.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==ob.zpp_pool?c=new ob:(c=ob.zpp_pool,ob.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=ob.zpp_pool;ob.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,
a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ob.zpp_pool;ob.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Pe};var zc=function(){};g["game.config.PhysicsConfig"]=zc;zc.__name__=["game","config","PhysicsConfig"];zc.configure=function(a){a.setGravity(0,zc.gravity);r.lowPerformance?a.stepMode=1:(a.stepMode=0,a.setFixedDt(0.016666666666666666));Tc.add("collider",zc.colliderMaterial);
m.slimeBall?Tc.add("ball",zc.slimeMaterial):V.codeUnlocked("SUPERBALL")?Tc.add("ball",zc.superballMaterial):Tc.add("ball",zc.ballMaterial)};var I=function(){};g["game.data.Characters"]=I;I.__name__=["game","data","Characters"];I.getDataByName=function(a){for(var b=0,c=I.list;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null};var m=function(){};g["game.data.GameData"]=m;m.__name__=["game","data","GameData"];m.init=function(){m.loadConfig("config.json");ea.Prefix=x.$name+"_";m.game=new Gk;
m.game.load()};m.loadConfig=function(a,b,c){null==c&&(c=!0);null==b&&(b="config");null==a&&(a="config.json");m.config=A.getJSON(a,b,c)};m.isCharacterUnlock=function(a){return 0>=a.locked||0>=m.game.isCharacterLocked(a.name)};m.setRandomOpponent=function(){for(var a=[],b=0,c=I.list;b<c.length;){var d=c[b];++b;0>=d.locked&&d.team!=m.currentCharacter.team&&a.push(d)}a=a[Math.floor(Math.random()*a.length)];null!=m.currentOpponent&&m.currentOpponent.team==a.team?m.setRandomOpponent():m.currentOpponent=
a};var Jb=function(){};g["stolo.ensys.data.LevelData"]=Jb;Jb.__name__=["stolo","ensys","data","LevelData"];Jb.get=function(a,b,c){null==b&&(b="levels");if("storage"==b)return Jb.getFromStorage(a,null,c);var d=Jb._levelCache.get(a);null==d&&(b=A.getJSON(a,b),b.filename=a,d=Jb.createData(c),d.parse(b),Jb._levelCache.set(a,d));return d};Jb.getFromStorage=function(a,b,c){if(null==b||""==b)b=a;b=ea.get(b);return null!=b&&""!=b?(b=JSON.parse(b),b.filename=a,a=Jb.createData(c),a.parse(b),a):null};Jb.createData=
function(a){return ca.createInstance(a,[])};Jb.prototype={getDefaultLayers:function(){return[{name:"default",parallax:{x:0,y:0},editor:{locked:!0},alpha:1}]},parse:function(a){if(null==a)throw"Level data null";this.data=a;this.name=this.parseName();this.filename=this.parseFilename();this.env=this.parseEnv();this.layers=this.parseLayers();this.actors=this.parseActors()},parseName:function(){return null==this.data.name?"noname":this.data.name},parseFilename:function(){return null==this.data.filename?
"nofilename":this.data.filename},parseEnv:function(){return null==this.data.env?"1":this.data.env},parseActors:function(){return null==this.data.actors?[]:this.data.actors},parseLayers:function(){return null==this.data.layers?this.getDefaultLayers():this.data.layers},__class__:Jb};var ha=function(){this.yMinimum=this.xMaximum=0};g["game.data.GameLevelData"]=ha;ha.__name__=["game","data","GameLevelData"];ha.getLvlIndexByName=function(a){var b=ha.LIST.indexOf(a);-1==b&&(b=ha.DERBY_LIST.indexOf(a));
return b};ha.get=function(a){return Jb.get(a,"levels",ha)};ha.__super__=Jb;ha.prototype=k(Jb.prototype,{getDefaultLayers:function(){return[{name:"bg",parallax:{x:0.1,y:0.8},editor:{locked:!0}},{name:"clouds",alpha:0.5,parallax:{x:0.12,y:0.85},editor:{locked:!0}},{name:"city_back",parallax:{x:0.25,y:0.95},editor:{locked:!0}},{name:"city",parallax:{x:0.3,y:0.96},editor:{locked:!0}},{name:"city_front",parallax:{x:0.35,y:0.98},editor:{locked:!0}},{name:"ground",parallax:{x:1,y:1},editor:{locked:!0}},
{name:"stands",parallax:{x:1,y:1},editor:{locked:!0}},{name:"default",parallax:{x:1,y:1}},{name:"player",parallax:{x:1,y:1}},{name:"effects",parallax:{x:1,y:1}},{name:"fg",parallax:{x:1,y:1}}]},getPacks:function(a){if(a)return"actors,sprites,ui_hud,sprites_env1,sprites_env2,sprites_highend,alvin_batter,alvin_pitcher,asami_batter,asami_pitcher,brittany_batter,brittany_pitcher,buhdeuce_batter,buhdeuce_pitcher,craig_batter,craig_pitcher,donnie_batter,donnie_pitcher,fee_batter,fee_pitcher,foo_batter,foo_pitcher,korra_batter,korra_pitcher,leo_batter,leo_pitcher,mike_batter,mike_pitcher,moonball,patrick_batter,patrick_pitcher,raph_batter,raph_pitcher,rocket_explosion,sanjay_batter,sanjay_pitcher,spongebob_batter,spongebob_pitcher,swaysway_batter,swaysway_pitcher,team_alvin_catcher,team_bw_catcher,team_hb_catcher,team_korra_catcher,team_sb_catcher,team_sc_catcher,team_tmnt_catcher".split(",");
a=["actors","sprites","sprites_env"+this.env,"ui_hud","ui_tut",m.currentCharacter.name+"_batter",m.currentOpponent.name+"_pitcher",m.currentOpponent.team+"_catcher"];"moon"==m.currentCharacter.sm_type?a.push("moonball"):"rocket"==m.currentCharacter.sm_type&&a.push("rocket_explosion");V.codeUnlocked("NIGHTLIFE")?a.push("sprites_env2"):a.push("sprites_env1");!r.lowMemory&&!r.lowPerformance&&a.push("sprites_highend");return a},parse:function(a){Jb.prototype.parse.call(this,a);for(var a=0,b=this.actors;a<
b.length;){var c=b[a];++a;null!=c.template&&"collider"!=c.template.key&&null!=c.transform&&null!=c.transform.position&&(this.xMaximum=Math.max(this.xMaximum,c.transform.position.x),this.yMinimum=Math.min(this.yMinimum,c.transform.position.y))}},__class__:ha});var Gk=function(){this.tutSeen=new C;this.unlockedLevels=new C;this.stars=new C;this.highscores=new C};g["game.data.SaveGame"]=Gk;Gk.__name__=["game","data","SaveGame"];Gk.prototype={clear:function(){this.unlockedLevels=new C;this.highscores=
new C;this.stars=new C;this.unlockedCharacters=new C;this.newCharacters=new C;this.stats=new C;this.tutSeen=new C},load:function(){this.unlockedLevels=ea.get("levels",new C);this.highscores=ea.get("highscores",new C);this.stars=ea.get("stars",new C);this.unlockedCharacters=ea.get("characters",new C);this.newCharacters=ea.get("newCharacters",new C);this.stats=ea.get("stats",new C);this.tutSeen=ea.get("tutSeen",new C)},save:function(){ea.set("levels",this.unlockedLevels);ea.set("highscores",this.highscores);
ea.set("stars",this.stars);ea.set("characters",this.unlockedCharacters);ea.set("newCharacters",this.newCharacters);ea.set("stats",this.stats);ea.set("tutSeen",this.tutSeen)},isLevelLocked:function(a){return"level1"==a?!1:!ag.isUnlocked(a,this.unlockedLevels)},unlockLevel:function(a){var b=ag.unlock(a,this.unlockedLevels);this.lastUnlockedLevel=a;b&&this.save();return!0},maxLevel:function(){for(var a=1,b=9;0<b;){if(!this.isLevelLocked("level"+b)){a=b;break}b--}return a},getHighScore:function(a){return!this.highscores.exists(a)?
0:this.highscores.get(a)},setScore:function(a,b){var c=this.getHighScore(a);return b>c?(this.highscores.set(a,b),this.save(),!0):!1},getStars:function(a){return!this.stars.exists(a)?0:this.stars.get(a)},setStars:function(a,b){var c=this.getStars(a);return b>c?(this.stars.set(a,b),this.save(),!0):!1},isCharacterLocked:function(a){null==this.unlockedCharacters.get(a)&&this.unlockedCharacters.set(a,I.getDataByName(a).locked);return this.unlockedCharacters.get(a)},tryUnlockCharacter:function(a){null==
this.unlockedCharacters.get(a)&&this.unlockedCharacters.set(a,I.getDataByName(a).locked);var b=this.unlockedCharacters.get(a);b--;this.unlockedCharacters.set(a,b);this.save();return 0==b},unlockCharacter:function(a){this.unlockedCharacters.set(a,-1);this.save();return!0},getStat:function(a,b){var c;if(!(c=!this.stats.exists(a)))c=!this.stats.get(a).exists(b);return c?0:this.stats.get(a).get(b)},setStat:function(a,b,c){if(!this.stats.exists(a)){var d=new C;this.stats.set(a,d)}this.stats.get(a).set(b,
c)},increaseStat:function(a){var b=this.getStat(m.currentCharacter.name,a);this.setStat(m.currentCharacter.name,a,b+1)},isTutSeen:function(a){return this.tutSeen.exists(a)?!0:!1},setTutSeen:function(a){this.tutSeen.set(a,!0);this.save()},__class__:Gk};var ti=function(){j.call(this)};g["game.system.CamerasSystem"]=ti;ti.__name__=["game","system","CamerasSystem"];ti.__super__=j;ti.prototype=k(j.prototype,{get_name:function(){return"CamerasSystem_68"},onStart:function(){j.prototype.onStart.call(this);
this._renderer=this.owner._compMap.RendererSystem_7},setCurrent:function(a){null!=this._current&&(this._current.current=!1);this._current=a;null!=this._current&&(this._current.current=!0)},__class__:ti});var ui=function(a){this._itemCount=this._homeruns=0;this.padding=50;j.call(this);this._system=a};g["game.system.GameHud"]=ui;ui.__name__=["game","system","GameHud"];ui.__super__=j;ui.prototype=k(j.prototype,{get_name:function(){return"GameHud_78"},onAdded:function(){this._pack=A.getPack("ui_hud");
this.container=new o;this.container.add(new s);this.gameOverlay=new o;this.container.addChild(this.gameOverlay);this._disposer=new bb;this.container.add(this._disposer);this._logic=this._system.logic;this._disposer.add(this._logic.onBegin.connect(l(this,this.onLogicBegin)));this._disposer.add(this._logic.onReset.connect(l(this,this.onLogicReset)));this._disposer.add(this._logic.onSuccess.connect(l(this,this.onLogicSuccess)));this._disposer.add(this._logic.onFail.connect(l(this,this.onLogicFail)));
this._disposer.add(this._logic.onWin.connect(l(this,this.onEndGame)));this._disposer.add(this._logic.onLose.connect(l(this,this.onEndGame)));this._disposer.add(this._logic.onBallHit.connect(l(this,this.onBallHit)));this._blackScreen=new Da(0,x.width,x.height);this.gameOverlay.add(this._blackScreen);this.build()},onStart:function(){null==this.container.parent&&this.owner.addChild(this.container)},onStop:function(){this._launcher=this._disposer=this.container=this._pack=null;this.removeCallout(this._currentCallout);
for(var a=this._callouts.iterator();a.hasNext();)a.next().dispose();this._callouts=this._currentCallout=null;j.prototype.onStop.call(this)},build:function(){this.buildCallouts();this._launcher=new vi(this._pack);this._launcher.enabled=!1;this._launcher.angleMin=-Math.PI/2;this._launcher.angleMax=0;this.owner.addChild((new o).add(this._launcher));this._tapper=new wi;this.owner.addChild((new o).add(this._tapper));this._batterHelper=new xi(this._pack,this._system);this.owner.addChild((new o).add(this._batterHelper));
this._score=this.addSprite(new yi(this._pack),0,0,this.padding,this.padding-20);this._travellingBtn=this.addSprite(O.createButton(l(this,this.onTravellingBtn),"travelling_on",null,null,this._pack),0.5,1,-34,-this.padding-30);m.inTournament&&(this._skipBtn=this.addSprite(O.createButton(l(this,this.onSkipBtn),"skip","SKIP","buttons",this._pack),0.5,1,-56,-this.padding-30));this._pause=this.addSprite(O.createButton(l(this,this.onPauseBtn),"btn_pause"),1,0,-this.padding-60,this.padding-20);m.inTournament?
this._balls=this.addSprite(new Qe(this._pack),0.2,0,this.padding-25,this.padding-42):this._timer=this.addSprite(new zi(this._pack),0.2,0,-51,this.padding-25);m.inTournament?("level1"!=m.currentLevel&&(this._powerBar=this.addSprite(new Ai(this._pack),0,0.5,this.padding,0)),this._special=this.addSprite(new Bi(this._pack,l(this,this.onSpecialClick)),1,1,-this.padding-20,-this.padding-20)):this._explosion=this.addSprite(new Ci(this._pack,l(this,this.onExplosion)),0.5,1,0,-this.padding-20)},addSprite:function(a,
b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);a.x.set__(d+b*x.width);c=a.y.set__(e+c*x.height);this.container.addChild((new o).add(a));a.y.set__(c<0.5*x.height?-300:x.height+300);yd.delay(function(a,b,c,d){return function(){return a(b,c,d)}}((cb=a.y,l(cb,cb.animateTo)),c,0.5,D.backOut),100*this._itemCount);this._itemCount++;return a},onTravellingBtn:function(){this._travellingBtn.set_visible(!1);null!=this._skipBtn&&this._skipBtn.set_visible(!0);null!=this._special&&(this._special.enabled=
!1);this._launcher.enabled=!1;this._travelling.start();this._logic.pause()},onSkipBtn:function(){if(this._travelling.running)this._travelling.stop(),this._logic.resume();else this.onReset(null)},onPauseBtn:function(){W.trackUI("PAUSE",W.getMatchId());G.push("Pause")},onTravellingComplete:function(){var a=this;this._logic.batter.owner._compMap.CameraComponent_67.setCurrent();this._travellingBtn.set_visible(!0);null!=this._skipBtn&&this._skipBtn.set_visible(!1);0<this._logic.batter.balls&&(null!=this._special&&
(this._special.enabled=!0),this._launcher.enabled=!0);this._logic.resume();F.delayCallTo(function(){a._system.tut.playStep("aim")},0.1)},onLogicBegin:function(){var a=this;m.inTournament?this.callout("target_score",null,l(this,this.onShowReadyCallout)):this.callout("ready");this._disposer.add(this._logic.pitcher.onPitch.connect(l(this,this.onPitcherPitch)));this._disposer.add(this._logic.batter.onScore.connect(l(this,this.onScore)));this._travelling=this._system.actors.spawn({template:{key:"travelling"}})._compMap.CameraComponent_67;
this._disposer.add(this._travelling.onTravellingComplete.connect(l(this,this.onTravellingComplete)));F.delayCallTo(function(){a.fadeToGame();a.onTravellingBtn()},0.1)},onShowReadyCallout:function(){this.callout("ready")},onScore:function(a){this._score.add(a)},onLogicReset:function(){var a=this._logic.batter,b=a.owner._compMap.TransformComponent_32.position;null!=this._powerBar&&(this._powerBar.batter=a);null!=this._special&&(this._special.batter=a);0<this._logic.batter.balls&&(this._launcher.setPosition(b.x+
a.get_swing().hitPosition.x,b.y+a.get_swing().hitPosition.y),this._launcher.batter=a,this._launcherConnection=this._launcher.shoot.connect(l(this,this.onLauncherShoot)).once(),this._launcher.enabled=!0);null!=this._special&&(this._special.enabled=!0);null!=this._explosion&&this._explosion.deactivate();null!=this._balls&&this._balls.animate();this._travellingBtn.set_visible(!0);null!=this._skipBtn&&this._skipBtn.set_visible(!1);this.onSpecialClick()},onLauncherShoot:function(){this._logic.prepareBat(this._launcher.angle,
this._launcher.strength);this._logic.pitch();this._launcher.enabled=!1;null!=this._special&&(this._special.enabled=!1);this._travellingBtn.set_visible(!1)},onPitcherPitch:function(a){this.cleanup();this._logic.batter.isPowerActive()||(this._batterHelper.help(this._logic.batter,a),this._tapperConnection=this._tapper.tapDown.connect(l(this,this.onTapperBat)),this._tapper.enabled=!0,null!=this._balls&&this._balls.stopAnimation())},onTapperBat:function(){this._system.tut.isSeen("swing")&&(this.cleanup(),
this._logic.bat())},onBallHit:function(a,b){this.callout(3==b?"perfect":2==b?"good":"bad");this._score.setCounterFont("hud_score_"+te.getMultiplierColor(b));null!=this._special&&this._special.deactivate();null!=this._explosion&&this._explosion.activate();this._score.endCompileAnim()},onLogicFail:function(a,b){this.cleanup();2!=b&&this.callout(0==b?"missed":"catched");this._logic.reset()},onLogicSuccess:function(){this.cleanup();this._tapperConnection=this._tapper.tapDown.connect(l(this,this.onReset)).once();
this._tapper.enabled=!0;null!=this._skipBtn&&this._skipBtn.set_visible(!0)},onReset:function(){this.cleanup();this._logic.reset()},onEndGame:function(){m.inTournament?this.callout("end_level",null,(cb=this._logic,l(cb,cb.end))):(this.callout("end_derby",null,(cb=this._logic,l(cb,cb.end))),null!=this._explosion&&this._explosion.deactivate())},cleanup:function(){this._batterHelper.stop();this._launcher.hideArrow();null!=this._launcherConnection&&this._launcherConnection.dispose();null!=this._tapperConnection&&
this._tapperConnection.dispose();this._launcher.enabled=!1;this._tapper.enabled=!1},onSpecialClick:function(){if(!this._tapper.enabled||x.AUTO_SUPER_MOVE)null!=this._special&&this._special.isActive?this._logic.batter.setPowerSwing():this._logic.batter.setSwing()},onExplosion:function(){X.__cast(this._logic.batter.get_swing(),Zf).explode()},onUpdate:function(a){j.prototype.onUpdate.call(this,a);m.inTournament?this._balls.updateValue(this._logic.batter.balls):this._timer.updateValue(Math.round(this._logic.timeLeft));
this._homeruns<this._logic.batter.homeruns&&(this._homeruns=this._logic.batter.homeruns,this.callout("homerun"))},buildCallouts:function(){null==this._callouts&&(this._callouts=new C,this._callouts.set("target_score",new Di("CALLOUT_TARGET_SCORE")),this._callouts.set("ready",new Ei("CALLOUT_READY"+(m.slimeBall?"_SLIME":""))),this._callouts.set("bad",new nf("CALLOUT_BAD","x1","blue",1)),this._callouts.set("good",new nf("CALLOUT_GOOD","x2","orange",1.25)),this._callouts.set("perfect",new nf("CALLOUT_PERFECT",
"x3","purple",1.5)),this._callouts.set("catched",new bg("CALLOUT_BALL","CALLOUT_CATCHED")),this._callouts.set("missed",new bg("CALLOUT_BALL","CALLOUT_MISSED")),this._callouts.set("homerun",new Ub("CALLOUT_HOMERUN")),this._callouts.set("end_level",new Ub("CALLOUT_END_LEVEL")),this._callouts.set("end_derby",new Ub("CALLOUT_END_DERBY")),this._callouts.set("new_ball",new Ub("CALLOUT_NEW_BALL")));this._calloutEntity=this.owner},callout:function(a,b,c){this.removeCallout(this._currentCallout);this._currentCallout=
this._callouts.get(a);if(null==this._currentCallout)throw"Callout not found: '"+a+"'";null==this._currentCallout.owner&&(new o).add(this._currentCallout);this._calloutEntity.addChild(this._currentCallout.owner);this._currentCallout.setXY(0.5*x.width,0.5*x.height);this._currentCallout.complete.connect(l(this,this.onCalloutComplete)).once();this._currentCallout.start(b);this._calloutCallback=c;return this._currentCallout},onCalloutComplete:function(){this.removeCallout(this._currentCallout);this._currentCallout=
null;null!=this._calloutCallback&&(this._calloutCallback(),this._calloutCallback=null)},removeCallout:function(a){null!=a&&null!=a.owner&&null!=a.owner.parent&&a.owner.parent.removeChild(a.owner)},fadeToGame:function(a){null==a&&(a=0.5);this._blackScreen.alpha.animateTo(0,a,D.quintInOut);return this._blackScreen},__class__:ui});var Fi=function(a){this._saved=!1;this._timeInRound=0;this._soundScript=new Sb;this._paused=!1;this.timeLeft=0;this.onBallHit=new gb;this.onEnd=new T;this.onLose=new T;this.onWin=
new T;this.onFail=new gb;this.onSuccess=new T;this.onReset=new T;this.onBegin=new T;j.call(this);this._system=a};g["game.system.GameLogic"]=Fi;Fi.__name__=["game","system","GameLogic"];Fi.__super__=j;Fi.prototype=k(j.prototype,{get_name:function(){return"GameLogic_76"},onAdded:function(){j.prototype.onAdded.call(this);this._disposer=new bb},onStop:function(){this._saved||(this.save(!1),W.trackMatchEnd("matchAbandoned"));null!=this._pitchConnection&&this._pitchConnection.dispose();F.killAll();this._system=
this._disposer=null;j.prototype.onStop.call(this)},onStart:function(){j.prototype.onStart.call(this);this.begin();this._levelIndex=ha.getLvlIndexByName(m.currentLevel);this.owner.add(this._soundScript)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this._paused||(this._timeInRound+=a,!m.inTournament&&0<this.timeLeft&&(this.timeLeft-=a,0>=this.timeLeft&&(this.reset(),this.win())))},createBatter:function(){var a=this._system.actors.getActorsByTemplate("batter_spawn")[0];this.batter=this._system.actors.spawn({template:{key:m.currentCharacter.name+
"_batter"},transform:{position:a._compMap.TransformComponent_32.position}})._compMap.Batter_73;this.batter.init()},createPitcher:function(){var a=this._system.actors.getActorsByTemplate("pitcher_spawn")[0];this.pitcher=this._system.actors.spawn({template:{key:m.currentOpponent.name+"_pitcher"},transform:{position:a._compMap.TransformComponent_32.position}})._compMap.Pitcher_77;this._pitchConnection=this.pitcher.onPitch.connect(l(this,this.onPitch))},begin:function(){m.inTournament||(this.timeLeft=
x.DERBY_DURATION);this._saved=!1;this._timeInRound=0;this._paused=!0;this.createBatter();this.createPitcher();this.onBegin.emit(this);x.AUTO_SUPER_MOVE&&this.batter.setSwing();this.reset()},pause:function(){this._paused=!0},resume:function(){this._paused=!1},reset:function(){this._disposer.dispose();0>=this.batter.balls?this.batter.score>=x.starRatings[this._levelIndex][0]?this.win():this.lose():this.playCrowdNoise();v.playMusic("crowd_bkgd",!1,0.2);x.AUTO_SUPER_MOVE||this.batter.setSwing();this.batter.owner._compMap.CameraComponent_67.setCurrent();
this.onReset.emit(this);this.checkForCollectables()},pitch:function(){if(m.inTournament)this.batter.balls--;else if(0>=this.timeLeft)return;this.pitcher.pitch(this.batter.isPowerActive())},prepareBat:function(a,b){this.batter.prepareBat(a,b)},onPitch:function(a){this._disposer.add(a.onSpeedNull.connect(l(this,this.onBallMissed)).once());this._disposer.add(this.batter.onSwingSuccess.connect(l(this,this.onSwingSuccess)));this._disposer.add(this.batter.onSwingFail.connect(l(this,this.onSwingFail)));
this.batter.followBall(a)},bat:function(){(m.inTournament||!(0>=this.timeLeft))&&this.batter.bat()},playCrowdNoise:function(){var a=this;this._soundScript.run(new Ra([new Oa(12+Math.round(10*Math.random())),new ab(function(){a._idleSound=v.play("idle_crowd_{random(3)}","BG_CROWD");a.playCrowdNoise()})]))},onSwingSuccess:function(a,b){this.onBallHit.emit(this,b);this._system.sound.init(a.owner);this._disposer.dispose();this._disposer.add(a.onSpeedNull.connect(l(this,this.onBallStopped)));this._disposer.add(a.onSpeedSlow.connect(l(this,
this.onBallSlowed)));var c=a.owner._compMap.CollectableComponent_56;null!=c&&this._disposer.add(c.collected.connect(l(this,this.onBallCatched)).once());a.owner._compMap.CameraComponent_67.setCurrent();null!=this._soundScript&&this._soundScript.stopAll();null!=this._idleSound&&this._idleSound.dispose()},onSwingFail:function(){m.game.increaseStat("strikes");this.fail(0)},onBallMissed:function(){m.game.increaseStat("strikes");this.fail(0)},onBallCatched:function(a,b){this._disposer.dispose();b._compMap.Ball_65.stop();
null!=a._compMap.Homerun_90?F.delayCallTo(l(this,this.onHomerun),1):(v.play("catch","BALL"),F.delayCallTo(l(this,this.onCatched),1))},onHomerun:function(){this.fail(2)},onCatched:function(){this.fail(1)},onBallSlowed:function(){this.success()},onBallStopped:function(){this.reset()},fail:function(a){this._disposer.dispose();this.batter.addFails(1);2==a?v.play("homerun","CROWD"):(v.play("crowd_boo","CROWD"),v.play("strike","CALLOUT"));this.onFail.emit(this,a)},success:function(){this.onSuccess.emit(this)},
checkForCollectables:function(){1>=this._system.actors.getActorsByComponent(yc).length&&this._system.tut.playStep("homerun")},win:function(){this.save(!0);W.trackMatchEnd("matchWon");this.onWin.emit(this)},lose:function(){this.save(!1);W.trackMatchEnd("matchLost");v.play("lose_out","CALLOUT");this.onLose.emit(this)},save:function(a){m.hasWon=a;m.score=this.batter.score;m.perfects=this.batter.perfects;m.goods=this.batter.goods;m.oks=this.batter.mehs;m.starsCollected=this.batter.stars;m.superAbilityActivated=
this.batter.powermoves;m.timeInRound=Math.round(this._timeInRound);this._saved=!0},end:function(){F.killAll();this.onEnd.emit(this);m.inTournament?m.hasWon?G.change("Win"):G.change("Fail"):(this.batter.score>m.game.getStat(m.currentCharacter.name,"derby")&&(m.game.setStat(m.currentCharacter.name,"derby",this.batter.score),m.game.save()),G.change("DerbyWin"))},__class__:Fi});var Vb=function(a){this._disposer=new bb;this.onInitComplete=new pa;j.call(this);this.dimensions=a};g["stolo.ensys.system.BaseGameSystem"]=
Vb;Vb.__name__=["stolo","ensys","system","BaseGameSystem"];Vb.__super__=j;Vb.prototype=k(j.prototype,{get_name:function(){return"BaseGameSystem_8"},dispose:function(){j.prototype.dispose.call(this);null!=this.parallelEntity&&(this.parallelEntity.dispose(),this.parallelEntity=null);this.level=this.camera=this.culling=this.physics=this.sound=this.actors=this.renderer=this.parallelScript=this._speedAdjuster=this._disposer=null},onAdded:function(){j.prototype.onAdded.call(this);this.owner.add(this._disposer);
this.parallelEntity=new o;this.parallelScript=new Sb;this.parallelEntity.add(this.parallelScript);this._speedAdjuster=new ef;this.owner.add(this._speedAdjuster);this.buildSubSystems();this.init()},onStart:function(){j.prototype.onStart.call(this);null!=this.owner.parent?this.owner.parent.addChild(this.parallelEntity):u.root.addChild(this.parallelEntity)},buildSubSystems:function(){this.buildRenderer();this.buildCamera();this.buildActors();this.buildPhysics();this.buildSound();this.buildLevel()},buildRenderer:function(){this.renderer=
new Gi(this.dimensions);this.culling=new Hi(this.renderer,this.dimensions);this.owner.add(this.renderer);this.owner.add(this.culling)},buildCamera:function(){this.camera=new ie;this.owner.add(this.camera)},buildActors:function(){this.actors=new Re;this.owner.add(this.actors)},buildPhysics:function(){this.physics=new jd;this.owner.add(this.physics)},buildSound:function(){this.sound=new Ii;this.owner.add(this.sound)},buildLevel:function(){this.level=new je;this.owner.add(this.level)},init:function(){this.onInitComplete.emit()},
setSpeed:function(a,b,c){null==b&&(b=0.2);0>=b?(this._speedAdjuster.scale.set__(a),this._speedAdjuster.scale.set_behavior(null)):this._speedAdjuster.scale.animateTo(a,b,c)},__class__:Vb});var yh=function(){Vb.call(this,new yb(0,0,x.width,x.height))};g["game.system.GameSystem"]=yh;yh.__name__=["game","system","GameSystem"];yh.__super__=Vb;yh.prototype=k(Vb.prototype,{onAdded:function(){Vb.prototype.onAdded.call(this)},onStop:function(){Vb.prototype.onStop.call(this)},buildSubSystems:function(){Vb.prototype.buildSubSystems.call(this);
this.owner.remove(this.camera);this.camera=null;this.cameras=new ti;this.owner.add(this.cameras);this.logic=new Fi(this);this.owner.add(this.logic);this.hud=new ui(this);this.owner.add(this.hud);this.tut=new Ji(this);this.owner.add(this.tut)},init:function(){zc.configure(this.physics);this.levelData=ha.get(m.currentLevel);this.level.build(this.levelData.layers,this.levelData.actors);Vb.prototype.init.call(this)},__class__:yh});var Ji=function(a){this._tutContent=[];j.call(this);this._system=a};g["game.system.GameTut"]=
Ji;Ji.__name__=["game","system","GameTut"];Ji.__super__=j;Ji.prototype=k(j.prototype,{get_name:function(){return"GameTut_75"},onAdded:function(){this._pack=A.getPack("ui_tut");this.container=new o;this.container.add(new s);this._disposer=new bb;this.container.add(this._disposer);this._script=new Sb;this.container.add(this._script);this._curGame=m.game;this._blackScreen=new Da(0,x.width,x.height);this._blackScreen.alpha.set__(0);this._blackScreen.set_pointerEnabled(!1);this.container.addChild((new o).add(this._blackScreen));
this.build()},onStart:function(){null==this.container.parent&&this.owner.addChild(this.container)},onStop:function(){this._disposer=this.container=this._pack=null;A.disposePack("ui_tut");j.prototype.onStop.call(this)},build:function(){this._stepMap=new C;this._stepMap.set("aim",l(this,this.stepAim));this._stepMap.set("swing",l(this,this.stepSwing));this._stepMap.set("supermove",l(this,this.stepSM));this._stepMap.set("stars",l(this,this.stepStars));this._stepMap.set("breakables",l(this,this.stepBreakables));
this._stepMap.set("power",l(this,this.stepPower));this._stepMap.set("homerun",l(this,this.stepHomerun))},addSprite:function(a,b,c){null==c&&(c=0);null==b&&(b=0);a.x.set__(b);a.y.set__(c);b=(new o).add(a);this.container.addChild(b);this._tutContent.push(b);return a},clean:function(){for(var a=0,b=this._tutContent;a<b.length;){var c=b[a];++a;this.container.removeChild(c)}null!=this._disposable&&this._disposable.dispose()},addPointer:function(){u._platform.getPointer().down.connect(l(this,this.closeCurTut)).once()},
closeCurTut:function(){this.clean();this._system.setSpeed(1,0);this._curGame.setTutSeen(this._curStep);this._blackScreen.set_pointerEnabled(!1);null!=this._callback&&this._callback()},isSeen:function(a){return this._curGame.isTutSeen(a)},playStep:function(a,b){this.clean();this._stepMap.exists(a)&&!this.isSeen(a)&&(this._blackScreen.set_pointerEnabled(!0),this._curStep=a,this._system.setSpeed(0,0),this._stepMap.get(a)(),this._callback=b,this.addPointer())},stepAim:function(){this.addSprite(new Y(this._pack.getTexture("aim")),
309,320);var a=this.addSprite(new Y(this._pack.getTexture("aim_ball")),267,426),b=this.addSprite(new Y(this._pack.getTexture("wide_box")),163,187),c=(new Ea("TUT_DRAG","lobster_white_shadow")).setXY(170,53);b.owner.addChild((new o).add(c));var b=this.addSprite(new s,230,340),d=(new Ea("TUT_WEAK","small_white")).setXY(33,67).setScale(0.9);b.owner.addChild((new o).add(d));var e=(new Ea("TUT_MEDIUM","small_white")).setXY(13,87).setAlpha(0).setScale(0.9);b.owner.addChild((new o).add(e));var h=(new Ea("TUT_HARD",
"small_white")).setXY(-13,107).setAlpha(0).setScale(0.9);b.owner.addChild((new o).add(h));var n=this.addSprite(new Y(this._pack.getTexture("hand")),277,437);this._disposable=this._script.run(new Uf(new fb([new Ra([new fb([new Za(a.x,-60,2,D.quadOut),new Za(a.y,50,2,D.quadOut),new Za(n.x,-60,2,D.quadOut),new Za(n.y,50,2,D.quadOut)])]),new Ra([new Oa(0.2),new fb([new Za(d.alpha,-1,0.5,D.quadOut),new Za(d.y,-20,0.5,D.quadOut)]),new ab(function(){e.alpha.set__(1)}),new Oa(0.2),new fb([new Za(e.alpha,
-1,0.5,D.quadOut),new Za(e.y,-20,0.5,D.quadOut)]),new ab(function(){h.alpha.set__(1)}),new Oa(0.2),new fb([new Za(h.alpha,-1,0.5,D.quadOut),new Za(h.y,-20,0.5,D.quadOut)]),new Oa(0.2),new ab(function(){c.setText("TUT_RELEASE")}),new fb([new Za(n.scaleX,0.2,0.4,D.quintOut),new Za(n.scaleY,0.2,0.4,D.quintOut)]),new Oa(1),new ab(function(){c.setText("TUT_DRAG");a.x.set__(267);a.y.set__(426);n.x.set__(277);n.y.set__(437);n.scaleX.set__(1);n.scaleY.set__(1);d.alpha.set__(1);var b=d.y;b.set__(b._value+
20);b=e.y;b.set__(b._value+20);b=h.y;b.set__(b._value+20)})])])))},stepSwing:function(){this._curGame.setTutSeen("swing");this.addSprite(new Y(this._pack.getTexture("arrow")),383,237);var a=this.addSprite(new Y(this._pack.getTexture("square")),254,70),b=(new Ea("TUT_SWING","lobster_white_shadow")).setXY(170,25);a.owner.addChild((new o).add(b));b=(new Ea("HTP_SWING_SUB","small_white")).setXY(170,90);a.owner.addChild((new o).add(b));a=this.addSprite(new Y(this._pack.getTexture("hand")),293,419);this._disposable=
this._script.run(new Uf(this.handTap(a)))},stepSM:function(){this.addSprite(new Y(this._pack.getTexture("arrow")),850,398);var a=this.addSprite(new Y(this._pack.getTexture("square")),625,235),b=(new Ea("TUT_SM","lobster_white_shadow")).setXY(170,25);a.owner.addChild((new o).add(b));b=(new Ea("TUT_SM_SUB","small_white")).setXY(170,90).setScale(0.8);a.owner.addChild((new o).add(b))},stepStars:function(){this.createImageBox("stars","TUT_STARS","TUT_STARS2")},stepPower:function(){var a=this.createImageBox("strength",
"TUT_POWER","TUT_POWER2"),b=new Ea("TUT_POWER3","small_white");b.setScale(0.7).setXY(345,150);a.addChild((new o).add(b))},stepBreakables:function(){this.createImageBox("breakables","TUT_BREAKABLES","TUT_BREAKABLES2")},stepHomerun:function(){this.createImageBox("homerun","TUT_HOMERUN","TUT_HOMERUN2")},createImageBox:function(a,b,c){var a=this.addSprite(new Y(this._pack.getTexture(a)),220,115),d=O.createImage("btn_return").centerAnchor().setXY(535,10);a.owner.addChild((new o).add(d));b=(new Ea(b,"lobster_white_shadow")).setXY(252,
20);a.owner.addChild((new o).add(b));c=(new Ea(c,"small_white")).setWrapWidth(400).setXY(110,205).setScale(0.8);a.owner.addChild((new o).add(c));return a.owner},handTap:function(a){return new Ra([new fb([new Za(a.scaleX,-0.1,0.4,D.quintIn),new Za(a.scaleY,-0.1,0.4,D.quintIn)]),new fb([new Za(a.scaleX,0.1,0.4,D.quintOut),new Za(a.scaleY,0.1,0.4,D.quintOut)])])},__class__:Ji});var wb=function(a,b,c,d,e){null==e&&(e="buttons");null==d&&(d="");this._centered=this._hadDown=!1;this._textID=this._fontStyle=
"";this._state=la.up;this.onDownCallback=this.onUpCallback=null;this.onChange=new T;this.onDown=new T;this.onUp=new T;this.onClick=new T;this.pressAnimation=vl.bounceDownTemplate;this.clickNeedsDown=this.upClick=!0;this.index=-1;this.isSelected=this.isDisabled=!1;s.call(this);null==a&&(a=O.get_sharedAssets());this._pack=a;this._disposer=new bb;this.updateTexture(b);null!=c&&this._disposer.add(this.onClick.connect(c));this._textID=d;this._fontStyle=e};g["stolo.ui.Button"]=wb;wb.__name__=["stolo","ui",
"Button"];wb.__super__=s;wb.prototype=k(s.prototype,{onAdded:function(){this.owner.add(this._disposer);this.build();null==this.origin&&this.updateOrigin()},onRemoved:function(){F.kill(this);s.prototype.onRemoved.call(this);this.pressAnimation=this.onChange=this.onDown=this.onUp=this.onClick=this.onUpCallback=this.onDownCallback=this._disposer=this.origin=this._pack=this._downTexture=this._texture=this.display=null},setXY:function(a,b){s.prototype.setXY.call(this,a,b);this.updateOrigin();return this},
updateOrigin:function(){null==this.origin&&(this.origin=new La(this.x._value,this.y._value));this.origin.x=this.x._value;this.origin.y=this.y._value},build:function(){if(null!=this.display)throw"This button was already added into an Entity.";this.display=new Y(this._texture);this.owner.addChild((new o).add(this.display));this._centered&&this.display.centerAnchor();this._disposer.add(u._platform.getPointer().up.connect(l(this,this.onStageUp)));""!=this._textID&&this.createLabel()},createLabel:function(){this.label=
new Ea(this._textID,this._fontStyle);this.label.setAlign(Z.Center);this.owner.addChild((new o).add(this.label));var a=s.getBounds(this.owner);this.label.centerAnchor().setXY(0.5*a.width+0.5*this.label.getNaturalWidth(),0.5*a.height)},updateUpTexture:function(a){this._texture=a},updateTexture:function(a){null!=a&&(this._texture=O.getTexture(a,this._pack),this._downTexture=O.getTexture(a+"_pressed",this._pack,!1),this._disabledTexture=O.getTexture(a+"_disabled",this._pack,!1),this._selectedTexture=
O.getTexture(a+"_selected",this._pack,!1))},updateState:function(a,b){switch(a[1]){case 1:b=this._downTexture;this.PressedAnimation();break;case 2:b=this._selectedTexture;break;case 4:b=this._disabledTexture;break;default:if(this.isDisabled)return this.updateState(la.disabled);if(this.isSelected)return this.updateState(la.selected);b=this._texture}null==b&&(b=this._texture);this.display.texture=b;this._state!=a&&this._state},PressedAnimation:function(){null!=this.pressAnimation&&(this.setXY(this.origin.x,
this.origin.y),F.runTemplate(this.pressAnimation,this))},centerAnchor:function(){null!=this.display&&this.display.centerAnchor();this._centered=!0;return this},getNaturalWidth:function(){return this.owner.firstChild._compMap.Sprite_5.getNaturalWidth()},getNaturalHeight:function(){return this.owner.firstChild._compMap.Sprite_5.getNaturalHeight()},onStageUp:function(){this._hadDown&&this.updateState(la.up);this._hadDown=!1},disable:function(){this.isSelected||(this.isDisabled=!0,this.updateState(la.disabled),
this.onChange.emit(this))},enable:function(){this.isDisabled&&(this.isDisabled=!1,this.updateState(la.up),this.onChange.emit(this))},select:function(){this.isSelected||(this.isSelected=!0,this.updateState(la.selected),this.onChange.emit(this))},deselect:function(){this.isSelected&&(this.isSelected=!1,this.updateState(la.up),this.onChange.emit(this))},onPointerDown:function(a){if(!this.isDisabled){s.prototype.onPointerDown.call(this,a);this._hadDown=!0;a._stopped=!0;this.updateState(la.pressed);this.onDown.emit(this);
if(null!=this.onDownCallback)this.onDownCallback(a);this.upClick||this.dispatchClick()}},onPointerUp:function(a){if(!this.isDisabled&&(s.prototype.onPointerUp.call(this,a),!this.clickNeedsDown||this._hadDown)){this.updateState(la.up);this.onUp.emit(this);if(null!=this.onUpCallback)this.onUpCallback(a);this.upClick&&this.dispatchClick();this._hadDown=!1}},dispatchClick:function(){this.onClick.emit(this)},__class__:wb});var Xf=function(a,b,c){this._locked=!1;this._packName="ui";this._data=a;this._locked=
b;a="characters/btn_"+a.team;this._locked&&(a+="_locked");wb.call(this,A.getPack(this._packName),a,c);this.addFace();this._locked&&this.addLock()};g["game.ui.CharacterButton"]=Xf;Xf.__name__=["game","ui","CharacterButton"];Xf.__super__=wb;Xf.prototype=k(wb.prototype,{onStart:function(){wb.prototype.onStart.call(this);this.owner.addChild((new o).add(this._face));null!=this._lock&&this.owner.addChild((new o).add(this._lock))},addFace:function(){var a="characters/face_"+this._data.name;this._locked&&
(a+="_locked");this._face=new Y(this._pack.getTexture(a));this._face.set_pointerEnabled(!1);this._face.setXY(-24,-6)},addLock:function(){this._lock=new Y(this._pack.getTexture("characters/lockIcon"));this._lock.set_pointerEnabled(!1);this._lock.centerAnchor().setRotation(-45).setXY(70,60)},__class__:Xf});var Ab=function(){this.complete=new pa;this.started=new pa;s.call(this);this.set_pointerEnabled(!1)};g["game.ui.callouts.BaseCallout"]=Ab;Ab.__name__=["game","ui","callouts","BaseCallout"];Ab.__super__=
s;Ab.prototype=k(s.prototype,{onAdded:function(){s.prototype.onAdded.call(this);this._pack=A.getPack("ui_hud");null==this._script?this.build():(this._script.dispose(),this._script=new Sb,this.owner.add(this._script),F.kill(this),F.kill(this._txt1),F.kill(this._txt2),F.kill(this._txt3),F.kill(this._bg1),F.kill(this._bg2))},dispose:function(){s.prototype.dispose.call(this);this._bg2=this._bg1=this._txt3=this._txt2=this._txt1=this._script=null},start:function(){throw"override";},build:function(){this._script=
new Sb;this.owner.add(this._script)},runSequence:function(a,b){if(null!=b){if(null!=b.onStart)this.started.connect(b.onStart).once();if(null!=b.onComplete)this.complete.connect(b.onComplete).once();0<b.delay&&a.unshift(new Oa(b.delay))}a.unshift(new ab((cb=this.started,l(cb,cb.emit))));a.push(new ab((cb=this.complete,l(cb,cb.emit))));this._script.run(new Ra(a))},createText:function(a,b){var c=K.getLocalizedTextSprite(a,b);c.centerAnchor();c.disablePointer();this.addSprite(c);return c},addSprite:function(a){null==
a.owner&&(new o).add(a);this.owner.addChild(a.owner);return a},scaleIn:function(a,b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.5);null==b.ease&&(b.ease=D.quintOut);var c;c=null==b.scale?1:b.scale;a.setAlpha(0);a.setScale(0);return F.to(a,{scaleX:c,scaleY:c,alpha:1},b)},scaleOut:function(a,b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.3);null==b.ease&&(b.ease=D.quintIn);return F.to(a,{scaleX:0,scaleY:0,alpha:0},b)},shake:function(a,
b,c,d,e){null==d&&(d=2);null==c&&(c=2);null==b&&(b=2);var h=a.owner._compMap.Script_28;null==h&&(h=new Sb);a.owner.add(h);a=new Ra([new qh(c,d,b),new Oa(b)]);null!=e&&a.add(new ab(e));h.run(a)},__class__:Ab});var nf=function(a,b,c,d){Ab.call(this);this._txt_key_1=a;this._txt_key_2=b;this._color=c;this._scale=d};g["game.ui.callouts.MultiplierCallout"]=nf;nf.__name__=["game","ui","callouts","MultiplierCallout"];nf.__super__=Ab;nf.prototype=k(Ab.prototype,{build:function(){Ab.prototype.build.call(this);
this._txt1=this.createText(this._txt_key_1,"hud_callout");this._txt1.anchorX.set__(0.5*this._txt1.getNaturalWidth());this._txt2=this.createText(this._txt_key_2,"hud_score_"+this._color);this._txt2.anchorX.set__(0.5*this._txt2.getNaturalWidth())},start:function(a){var b=this;this._txt1.setXY(0,-50);this._txt2.setXY(0.5*this._txt2.getNaturalWidth(),50);this.scaleIn(this._txt1);this.scaleIn(this._txt2,{scale:this._scale});this.runSequence([new Oa(0.5),new ab(function(){b.shake(b._txt1);b.shake(b._txt2)}),
new Oa(1),new ab(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2)}),new Oa(0.7)],a)},__class__:nf});var Ub=function(a){Ab.call(this);this._txt_key_1=a};g["game.ui.callouts.ShakingCallout"]=Ub;Ub.__name__=["game","ui","callouts","ShakingCallout"];Ub.__super__=Ab;Ub.prototype=k(Ab.prototype,{build:function(){Ab.prototype.build.call(this);this._txt1=this.createText(this._txt_key_1,"hud_callout")},start:function(a){var b=this;this.scaleIn(this._txt1);this.runSequence([new Oa(0.5),new ab(function(){b.shake(b._txt1)}),
new Oa(1),new ab(function(){b.scaleOut(b._txt1)}),new Oa(0.7)],a)},__class__:Ub});var Ei=function(a){Ub.call(this,a)};g["game.ui.callouts.ReadyCallout"]=Ei;Ei.__name__=["game","ui","callouts","ReadyCallout"];Ei.__super__=Ub;Ei.prototype=k(Ub.prototype,{shake:function(a,b,c,d,e){null==d&&(d=2);null==c&&(c=2);null==b&&(b=2);Ub.prototype.shake.call(this,a,b,c,d,e);v.play("play_ball","CALLOUT")},__class__:Ei});var Di=function(a){Ub.call(this,a)};g["game.ui.callouts.TargetScoreCallout"]=Di;Di.__name__=
["game","ui","callouts","TargetScoreCallout"];Di.__super__=Ub;Di.prototype=k(Ub.prototype,{build:function(){this._script=new Sb;this.owner.add(this._script);this._txt1=this.createText(this._txt_key_1,"hud_callout");var a=ha.getLvlIndexByName(m.currentLevel),a=V.codeUnlocked("HARDCORE")?x.starRatingsHardcore[a][0]:x.starRatings[a][0];this._txt2=this.createText(null==a?"null":""+a,"hud_score_purple")},start:function(a){var b=this;this._txt1.anchorX.set__(0.5*this._txt1.getNaturalWidth());this._txt2.anchorX.set__(0.5*
this._txt2.getNaturalWidth());this._txt1.setXY(0,-50);this._txt2.setXY(0.5*this._txt2.getNaturalWidth(),50);this.scaleIn(this._txt1);this.scaleIn(this._txt2);this.runSequence([new Oa(0.5),new ab(function(){b.shake(b._txt1);b.shake(b._txt2)}),new Oa(1),new ab(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2)}),new Oa(0.7)],a)},__class__:Di});var bg=function(a,b){Ab.call(this);this._txt_key_1=a;this._txt_key_2=b};g["game.ui.callouts.TwoWordsBreakCallout"]=bg;bg.__name__=["game","ui","callouts","TwoWordsBreakCallout"];
bg.__super__=Ab;bg.prototype=k(Ab.prototype,{build:function(){Ab.prototype.build.call(this);this._txt1=this.createText(this._txt_key_1,"hud_callout");this._txt1.anchorX.set__(0.25*this._txt1.getNaturalWidth());this._txt2=this.createText(this._txt_key_2,"hud_callout");this._txt2.anchorX.set__(0.75*this._txt2.getNaturalWidth())},start:function(a){var b=this;this._txt1.setXY(0.25*-this._txt1.getNaturalWidth()+20,-50);this._txt2.setXY(0.25*this._txt2.getNaturalWidth()+30,50);this._txt1.setRotation(90);
this._txt2.setRotation(-90);this._txt1.rotation.animateTo(0,0.6,D.quintOut);this._txt2.rotation.animateTo(0,0.6,D.quintOut);this.scaleIn(this._txt1);this.scaleIn(this._txt2,{delay:0.2});this.runSequence([new Oa(0.8),new ab(function(){F.to(b._txt1,{rotation:90},{time:1.2,ease:D.backInOut,delay:0.08});F.to(b._txt2,{rotation:-90},{time:1,ease:D.backOut})}),new Oa(0.5),new ab(function(){b._txt1.y.animateTo(700,0.6,D.quadIn);b._txt2.y.animateTo(700,0.6,D.quadIn);b._txt1.alpha.animateTo(0,0.6,D.quadIn);
b._txt2.alpha.animateTo(0,0.6,D.quadIn)}),new Oa(1)],a)},__class__:bg});var Qe=function(a){this._animationSpeed=0.4;this._animate=!1;this._pack=a;s.call(this)};g["game.ui.hud.BallCount"]=Qe;Qe.__name__=["game","ui","hud","BallCount"];Qe.__super__=s;Qe.prototype=k(s.prototype,{dispose:function(){this._pack=null;s.prototype.dispose.call(this)},onStart:function(){this._ballBg=new Y(this._pack.getTexture("ball_count_bg"));this._ballIcon=new Y(this._pack.getTexture(m.inTournament?"ball_count_icon":"time_count_icon"));
this._ballIcon.centerAnchor().setXY(52,35);this._balls=K.getTextSprite("numbers");this._balls.setXY(100,23);this._balls.set_text("0");this._currentValue=0;this.owner.addChild((new o).add(this._ballBg));this._ballBg.owner.addChild((new o).add(this._ballIcon));this.owner.addChild((new o).add(this._balls));this.animate()},updateValue:function(a){null==this._balls||this._currentValue==a||(this._balls.set_text(null==a?"null":""+a),this._currentValue=a,this._animate||(this._ballIcon.setScale(1.5),this._ballIcon.scaleX.animateTo(1,
this._animationSpeed,D.backInOut),this._ballIcon.scaleY.animateTo(1,this._animationSpeed,D.backInOut)))},animate:function(){if(!this._animate&&!(null==this._ballIcon||null==this._balls))this._ballIcon.scaleX.set_behavior(new Qc(1.1,1,this._animationSpeed)),this._ballIcon.scaleY.set_behavior(new Qc(1.1,1,this._animationSpeed)),this._balls.alpha.set_behavior(new Qc(0,1,this._animationSpeed)),this._animate=!0},stopAnimation:function(){this._animate&&(this._ballIcon.setScale(1),this._balls.setAlpha(1),
this._animate=!1)},__class__:Qe});var xi=function(a,b){this._target=new La;this._currentDistance=this._startDistance=0;this._pack=a;s.call(this);this._system=b};g["game.ui.hud.BatterHelper"]=xi;xi.__name__=["game","ui","hud","BatterHelper"];xi.__super__=s;xi.prototype=k(s.prototype,{dispose:function(){s.prototype.dispose.call(this);this._pack=null},help:function(a,b){this._batter=a;var c=b.owner;this._indicator=new Y(this._pack.getTexture("helper_circle3"));c.addChild((new o).add(this._indicator));
this._indicator.setXY(b.offset.x,b.offset.y);this._indicator.centerAnchor();this._indicatorPerfect=new Y(this._pack.getTexture("helper_circle1"));c.addChild((new o).add(this._indicatorPerfect));this._indicatorPerfect.set_visible(!1);this._indicatorPerfect.setXY(b.offset.x,b.offset.y);this._indicatorPerfect.centerAnchor();c=a.owner._compMap.TransformComponent_32;this._ballTransform=b.owner._compMap.TransformComponent_32;this._startDistance=c.distanceTo(this._ballTransform);this._target.set(c.position.x+
a.get_swing().hitPosition.x,c.position.y+a.get_swing().hitPosition.y)},stop:function(){null!=this._indicator&&(this._indicator.owner.parent.removeChild(this._indicator.owner),this._indicator=null);null!=this._indicatorPerfect&&(this._indicatorPerfect.owner.parent.removeChild(this._indicatorPerfect.owner),this._indicatorPerfect=null);null!=this._zones&&this._zones.set_visible(!1);this._batter=this._ballTransform=null},onUpdate:function(){null!=this._indicator&&(this._currentDistance=this._ballTransform.position.x-
this._target.x,Math.abs(this._currentDistance)<this._batter.get_swing().hitRangePerfect?(this._system.tut.playStep("swing"),this._indicatorPerfect.set_visible(!0)):this._indicatorPerfect.set_visible(!1),this._indicator.setScale(0.1+0.9*Math.max(0,this._currentDistance)/this._startDistance))},__class__:xi});var Ci=function(a,b){this._active=!1;s.call(this);this._pack=a;this._callback=b};g["game.ui.hud.ExplosionButton"]=Ci;Ci.__name__=["game","ui","hud","ExplosionButton"];Ci.__super__=s;Ci.prototype=
k(s.prototype,{dispose:function(){s.prototype.dispose.call(this);this._pack=null;this._btn.dispose();this._callback=this._btn=null},onStart:function(){s.prototype.onStart.call(this);this._btn=new wb(this._pack,"btn_explosion",l(this,this.onClick));this._btn.centerAnchor();this._active||this._btn.set_pointerEnabled(!1);this.owner.addChild((new o).add(this._btn))},onUpdate:function(a){s.prototype.onUpdate.call(this,a)},onClick:function(){this._callback()},activate:function(){this._active=!0;null!=this._btn&&
this._btn.set_pointerEnabled(!0);this.setAlpha(1);F.from(this,{y:this.y._value+150},{time:1.25,delay:0.5,ease:D.elasticOut});this.scaleX.set_behavior(new Qc(0.95,1,0.2));this.scaleY.set_behavior(new Qc(0.95,1,0.2))},deactivate:function(){this._active=!1;null!=this._btn&&this._btn.set_pointerEnabled(!1);this.setScale(1);this.setAlpha(0)},__class__:Ci});var vi=function(a){this._strengthMin=this._strengthMax=0;this.textureName_pivot="launcher_pivot";this.textureName_dragger="launcher_dragger";this.textureName_arrow=
"launcher_arrow";this.lockStrength=this.lockAngle=this.pivotVisible=this.autoMove=!1;this.strength=this.angle=this.angleMax=this.angleMin=0;this.drag=new T;this.shoot=new T;this.isActive=!1;this.enabled=!0;j.call(this);this._pack=a};g["game.ui.hud.Launcher"]=vi;vi.__name__=["game","ui","hud","Launcher"];vi.__super__=j;vi.prototype=k(j.prototype,{get_name:function(){return"Launcher_80"},onRemoved:function(){j.prototype.onRemoved.call(this);this._pack=null},onAdded:function(){var a=new o;this._containerSprite=
new s;a.add(this._containerSprite);this.owner.addChild(a);this._disposer=new bb;a.addChild((new o).add(this._disposer));this._pivotSprite=new Y(O.getTexture(this.textureName_pivot,this._pack));this._pivotSprite.set_pointerEnabled(!1);this._pivotSprite.set_visible(this.pivotVisible);this._pivotSprite.centerAnchor();a.addChild((new o).add(this._pivotSprite));this._currentArrowName=this.textureName_arrow+"_1";this._arrowSprite=new Y(O.getTexture(this._currentArrowName,this._pack));this._arrowSprite.set_pointerEnabled(!1);
this._arrowSprite.set_visible(!1);this._arrowSprite.centerAnchor();a.addChild((new o).add(this._arrowSprite));this._draggerSprite=new Y(O.getTexture(this.textureName_dragger,this._pack));this._draggerSprite.set_pointerEnabled(!1);this._draggerSprite.setAnchor(0,0.5*this._draggerSprite.getNaturalHeight());a.addChild((new o).add(this._draggerSprite));this.setActive(!1);this.setupListeners()},setActive:function(a){this.isActive=a;this._draggerSprite.set_visible(a);this._pivotSprite.set_visible(a&&this.pivotVisible)},
setupListeners:function(){this._disposer.add(u._platform.getPointer().down.connect(l(this,this.onPointerDown)));this._disposer.add(u._platform.getPointer().move.connect(l(this,this.onPointerMove)));this._disposer.add(u._platform.getPointer().up.connect(l(this,this.onPointerUp)))},onPointerDown:function(a){!(a.viewX>2*x.width/3)&&this.enabled&&(this.strength=0,this._strengthMin=this.batter.strengthMin,this._strengthMax=this.batter.get_strengthMax(),this.setActive(!0),this._dragOrigin=new La(a.viewX,
a.viewY),this.autoMove&&this.setPosition(a.viewX,a.viewY),this.onPointerMove(a))},onPointerMove:function(a){if(this.enabled&&this.isActive){var b=this._dragOrigin.x-a.viewX,a=this._dragOrigin.y-a.viewY;this.lockAngle||(this.angle=Math.min(this.angleMax,Math.max(this.angleMin,Math.atan2(a,b))));this.lockStrength||(this.strength=Math.min(this._strengthMax,Math.sqrt(Math.pow(b,2)+Math.pow(a,2))));b=Math.cos(this.angle)*this.strength;a=Math.sin(this.angle)*this.strength;this._draggerSprite.set_visible(this._arrowSprite.set_visible(this.strength>=
this._strengthMin));this.updateArrow();this._arrowSprite.setRotation(180*this.angle/Math.PI);this._arrowSprite.setXY(b,a);this._draggerSprite.setXY(-b,-a);this._draggerSprite.setRotation(180*this.angle/Math.PI);this.drag.emit(this)}},onPointerUp:function(){this.enabled&&this.isActive&&(this.setActive(!1),0!=(this._arrowSprite._flags&2)&&this.shoot.emit(this))},setPosition:function(a,b){this._containerSprite.setXY(a,b)},hideArrow:function(){this._arrowSprite.set_visible(!1)},updateArrow:function(){var a=
this.textureName_arrow,b=1;this.strength<=this.batter.strengthBase+this.batter.strengthPerLevel?(b=(this.strength-this.batter.strengthPerLevel)/this.batter.strengthBase,a+="_1"):this.strength<=this.batter.strengthBase+2*this.batter.strengthPerLevel?(b=(this.strength-2*this.batter.strengthPerLevel)/this.batter.strengthBase,a+="_2"):(b=(this.strength-3*this.batter.strengthPerLevel)/this.batter.strengthBase,a+="_3");this._currentArrowName!=a&&(this._currentArrowName=a,this._arrowSprite.texture=this._pack.getTexture(a));
this._arrowSprite.setScale(b)},__class__:vi});var Ai=function(a){this._currentLevel=-1;s.call(this);this._pack=a};g["game.ui.hud.PowerBar"]=Ai;Ai.__name__=["game","ui","hud","PowerBar"];Ai.__super__=s;Ai.prototype=k(s.prototype,{dispose:function(){s.prototype.dispose.call(this);this._txtLevel=this._fill=this._bg=this._pack=null},onStart:function(){s.prototype.onStart.call(this);var a=new s;this.owner.addChild((new o).add(a));this._txtBg=O.createImage("power_dot",this._pack);this._txtBg.centerAnchor();
this._txtBg.setXY(0,112);this._txtBg.setAlpha(0.6);a.owner.addChild((new o).add(this._txtBg));this._bg=O.createImage("power_bg",this._pack);this._bg.centerAnchor();a.owner.addChild((new o).add(this._bg));this._fill=O.createImage("power_fill",this._pack);this._fill.centerAnchor();this._fillMask=new cg(this._fill);this._fillMask.height.set__(0);this._fill.setXY(1,-1);a.owner.addChild((new o).add(this._fill));this._totalHeight=this._fill.getNaturalHeight();this._txtLevel=K.getTextSprite("hud_score");
this._txtLevel.setXY(this._txtBg.x._value,this._txtBg.y._value-15);this._txtLevel.set_text("0");this.owner.addChild((new o).add(this._txtLevel));this._anim=new vb("hud_anims.json","hud_anims");this._anim.setXY(-1,17);this.owner.addChild((new o).add(this._anim))},onUpdate:function(a){s.prototype.onUpdate.call(this,a);if(!(null==this.batter||null==this._fill)){var b=Math.floor(this.batter.strengthLevel);this._current=this._totalHeight*this.batter.strengthLevel/this.batter.strengthLevelMax;this._fillMask.height.animateTo(this._current,
0.3,D.quadOut);this._fillMask.update(a);this._fillMask.y.set__(this._totalHeight-this._fillMask.height._value);b!=this._currentLevel&&(this._currentLevel=b,null!=this._anim&&(0==b?this._anim.setAlpha(0):(this._anim.setAlpha(1),this._anim.gotoAndPlay("power"+b))));this._txtLevel.set_text(""+b)}},__class__:Ai});var yi=function(a){this._total=this._value=this._currentScore=0;this.compileDelay=4E3;this.counterScale=0.6;this.scrollSpeed=4;this._pack=a;s.call(this)};g["game.ui.hud.ScoreBox"]=yi;yi.__name__=
["game","ui","hud","ScoreBox"];yi.__super__=s;yi.prototype=k(s.prototype,{dispose:function(){s.prototype.dispose.call(this);this._txtScore=this._pack=null},onStart:function(){s.prototype.onStart.call(this);var a=ha.getLvlIndexByName(m.currentLevel);m.inTournament&&(this._targetBg=O.createImage("score_target_bg",this._pack),this._targetBg.setXY(-60,-5),this.owner.addChild((new o).add(this._targetBg)),this._txtTarget=K.getLocalizedTextSprite("HUD_TARGET"),this._txtTarget.setScale(0.6).setXY(75,-6),
this.owner.addChild((new o).add(this._txtTarget)),this._txtTargetScore=K.getTextSprite("small_purple"),this._txtTargetScore.set_align(Z.Left),this._txtTargetScore.set_text(q.string(x.starRatings[a][0])),this._txtTargetScore.setXY(76,13),this.owner.addChild((new o).add(this._txtTargetScore)));this._bg=O.createImage("score_bg",this._pack);this._bg.setXY(-60,-1);this.owner.addChild((new o).add(this._bg));this._txtScore=K.getTextSprite("hud_score");this._txtScore.set_text(q.string(this._total));this._txtScore.setXY(5,
4);this.owner.addChild((new o).add(this._txtScore))},setCounterFont:function(a){null!=this._txtScoreCounter&&this._txtScoreCounter.dispose();this._txtScoreCounter=K.getTextSprite(a);this._txtScoreCounter.setXY(this._txtScore.x._value+10,this._txtScore.y._value+35);this._txtScoreCounter.setScale(0);this.owner.addChild((new o).add(this._txtScoreCounter))},endCompileAnim:function(){this._currentScore=this._total;this._txtScoreCounter.scaleX.animateTo(0,0.5,D.backIn);this._txtScoreCounter.scaleY.animateTo(0,
0.5,D.backIn);this._txtScore.set_text(q.string(this._currentScore))},onUpdate:function(a){s.prototype.onUpdate.call(this,a);null!=this._txtScoreCounter&&this._total!=this._currentScore&&(this._currentScore+=(this._total-this._currentScore)*a*this.scrollSpeed,5>Math.abs(this._currentScore-this._total)&&(this._currentScore=this._total,this._txtScoreCounter.scaleX.animateTo(0,0.5,D.backIn),this._txtScoreCounter.scaleY.animateTo(0,0.5,D.backIn)),this._currentScore=Math.ceil(this._currentScore),this._txtScore.set_text(q.string(this._currentScore)),
this._txtScoreCounter.set_text("+"+(this._total-this._currentScore)))},add:function(a){a+=this._value;null==this._txtScore||a==this._value||(0==this._value&&(this._txtScoreCounter.scaleX.animateTo(this.counterScale,0.4,D.backOut),this._txtScoreCounter.scaleY.animateTo(this.counterScale,0.4,D.backOut)),this._value=a,this._txtScoreCounter.set_text("+"+q.string(this._value)),null!=this._timer&&this._timer.stop(),this._timer=yd.delay(l(this,this.compile),this.compileDelay))},compile:function(){this._txtScoreCounter.setScale(1.5*
this.counterScale);this._txtScoreCounter.scaleX.animateTo(this.counterScale,0.4,D.backInOut);this._txtScoreCounter.scaleY.animateTo(this.counterScale,0.4,D.backInOut);F.delayCallTo(l(this,this.startScoreLoop),0.4)},startScoreLoop:function(){0<this._value&&v.play("score_loop","HUD");this._total+=this._value;this._value=0},__class__:yi});var Bi=function(a,b){this.isActive=this.isFxActive=!1;this.enabled=!0;s.call(this);this._pack=a;this._callback=b};g["game.ui.hud.SpecialPowerButton"]=Bi;Bi.__name__=
["game","ui","hud","SpecialPowerButton"];Bi.__super__=s;Bi.prototype=k(s.prototype,{dispose:function(){s.prototype.dispose.call(this);this._pack=null;this._btn.dispose();this._callback=this._bottomFx=this._topFx=this._particles=this._fill=this._btn=null},onStart:function(){s.prototype.onStart.call(this);this._particles=O.createImage("special_particles",this._pack);this._particles.centerAnchor().setAlpha(0);this.owner.addChild((new o).add(this._particles));this._bottomFx=O.createImage("special_fx_bottom",
this._pack);this._bottomFx.centerAnchor().setAlpha(0);this.owner.addChild((new o).add(this._bottomFx));this._topFx=O.createImage("special_fx_top",this._pack);this._topFx.centerAnchor().setAlpha(0);this.owner.addChild((new o).add(this._topFx));this._btn=new wb(this._pack,"special_bg",null);this._btn.centerAnchor();this._btn.set_pointerEnabled(!1);this.owner.addChild((new o).add(this._btn));this._fill=O.createImage("special_fill",this._pack);this._fill.set_pointerEnabled(!1);this._fill.centerAnchor();
this.owner.addChild((new o).add(this._fill));this._totalHeight=this._fill.getNaturalHeight();this._fillMask=new cg(this._fill);this._fillMask.height.set__(0)},onUpdate:function(a){s.prototype.onUpdate.call(this,a);if(null!=this.batter){null!=this._fillMask&&(this._fillMask.height.animateTo(this.batter.power*this._totalHeight/100,0.4,D.quadOut),this._fillMask.update(a),this._fillMask.y.set__(this._totalHeight-this._fillMask.height._value));if(!this.isActive&&100<=this.batter.power&&x.AUTO_SUPER_MOVE)this.onClick(null);
if(this.isFxActive){var b=this._topFx.rotation;b.set__(b._value-30*a);b=this._bottomFx.rotation;b.set__(b._value+30*a)}}},onClick:function(){null==this.batter||!this.enabled&&!x.AUTO_SUPER_MOVE||(!this.isActive&&100<=this.batter.power?this.activate():this.deactivate(),this._callback())},activate:function(){this.isActive||(this.isActive=!0,this.showFX())},deactivate:function(){this.isActive&&(this.isActive=!1,this.hideFX())},showFX:function(){this.isFxActive||(this.isFxActive=!0,this._particles.alpha.animateTo(1,
0.3,D.quintInOut),this._topFx.alpha.animateTo(1,0.3,D.quintInOut),this._bottomFx.alpha.animateTo(1,0.3,D.quintInOut))},hideFX:function(){this.isFxActive&&(this.isFxActive=!1,this._particles.alpha.animateTo(0,0.4,D.quintInOut),this._topFx.alpha.animateTo(0,0.4,D.quintInOut),this._bottomFx.alpha.animateTo(0,0.4,D.quintInOut))},__class__:Bi});var wi=function(){this.tapMove=new T;this.tapUp=new T;this.tapDown=new T;this.enabled=!1;j.call(this)};g["game.ui.hud.Tapper"]=wi;wi.__name__=["game","ui","hud",
"Tapper"];wi.__super__=j;wi.prototype=k(j.prototype,{get_name:function(){return"Tapper_79"},onRemoved:function(){j.prototype.onRemoved.call(this)},onAdded:function(){this._disposer=new bb;this.owner.addChild((new o).add(this._disposer));this._disposer.add(u._platform.getPointer().down.connect(l(this,this.onPointerDown)));this._disposer.add(u._platform.getPointer().move.connect(l(this,this.onPointerMove)));this._disposer.add(u._platform.getPointer().up.connect(l(this,this.onPointerUp)))},onPointerDown:function(){this.enabled&&
this.tapDown.emit(this)},onPointerMove:function(){this.enabled&&this.tapMove.emit(this)},onPointerUp:function(){this.enabled&&this.tapUp.emit(this)},__class__:wi});var zi=function(a){this._pack=a;Qe.call(this,this._pack)};g["game.ui.hud.TimerCount"]=zi;zi.__name__=["game","ui","hud","TimerCount"];zi.__super__=Qe;zi.prototype=k(Qe.prototype,{onStart:function(){this._ballBg=new Y(this._pack.getTexture("timer"));this._ballIcon=new Y(this._pack.getTexture("time_count_icon"));this._ballIcon.centerAnchor().setXY(50,
17);this._balls=K.getTextSprite("score");this._balls.setScale(0.8);this._balls.setXY(50,31);this._balls.set_text("0");this.owner.addChild((new o).add(this._ballBg));this._ballBg.owner.addChild((new o).add(this._ballIcon));this.owner.addChild((new o).add(this._balls));this._currentValue=0},__class__:zi});var Ah=function(){this._rareCodes=["MAXPOWER","BEEFCAKE","FULLHOUSE","HOUSEKEYS"];this._uncommonCodes=["MAKEITRAIN","THATSNOMOON","MAGNIFY","JULYFOURTH","SUPERBALL"];this._frequentCodes=["DREAMFIELD",
"HARDCORE","NIGHTLIFE","GOJIRA","MARSATTACK"];this._rareRate=0.2;this._reallyRareRate=0.1;this._codeRate=0.3;this._tipsQty=11;j.call(this)};g["game.ui.tips.Tip"]=Ah;Ah.__name__=["game","ui","tips","Tip"];Ah.__super__=j;Ah.prototype=k(j.prototype,{get_name:function(){return"Tip_95"},onAdded:function(){j.prototype.onAdded.call(this);m.config.codeEnabled||(this._tipsQty=10);var a=Math.random();m.config.codeEnabled&&a<=this._codeRate?this.showCode():this.showTip()},getCode:function(){var a=Math.random(),
b=0;if(a<this._reallyRareRate)return b=Math.floor(Math.random()*this._rareCodes.length),this._rareCodes[b];if(a<this._rareRate+this._reallyRareRate)return b=Math.floor(Math.random()*this._uncommonCodes.length),this._uncommonCodes[b];b=Math.floor(Math.random()*this._frequentCodes.length);return this._frequentCodes[b]},showCode:function(){var a=this.getCode(),b=K.getLocalizedTextSprite("CODE_"+a,"info_sm");b.setScale(1.25);b.setAlign(Z.Left);b.setXY(100,476);this.owner.addChild((new o).add(b));a=K.getLocalizedTextSprite("TEXT_"+
a,"small_white");a.setAlign(Z.Left);a.setXY(1.25*b.getNaturalWidth()+125,476);this.owner.addChild((new o).add(a));b=O.createImage("unlocked_icon");b.centerAnchor().setXY(50,490);this.owner.addChild((new o).add(b))},showTip:function(){var a=K.getLocalizedTextSprite("PREVIEW_TIP_"+(Math.floor(Math.random()*this._tipsQty)+1),"small_white");a.setAlign(Z.Left);a.setXY(100,476);this.owner.addChild((new o).add(a))},__class__:Ah});var lc=g["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction",
"Module","FilePos","Method","LocalFunction"]};lc.CFunction=["CFunction",0];lc.CFunction.toString=p;lc.CFunction.__enum__=lc;lc.Module=function(a){a=["Module",1,a];a.__enum__=lc;a.toString=p;return a};lc.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=lc;a.toString=p;return a};lc.Method=function(a,b){var c=["Method",3,a,b];c.__enum__=lc;c.toString=p;return c};lc.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=lc;a.toString=p;return a};var Ac=function(){};g["haxe.CallStack"]=Ac;
Ac.__name__=["haxe","CallStack"];Ac.callStack=function(){var a=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var e=[],h=0;h<b.length;){var n=b[h];++h;var f=null,g=n.getFunctionName();if(null!=g){var i=g.lastIndexOf(".");0<=i&&(f=M.substr(g,0,i),g=M.substr(g,i+1,null),f=lc.Method(f,g))}e.push(lc.FilePos(f,n.getFileName(),n.getLineNumber()))}return e};var b=Ac.makeStack(Error().stack);b.shift();Error.prepareStackTrace=a;return b};Ac.exceptionStack=function(){return[]};Ac.toString=
function(a){for(var b=new qe,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";Ac.itemToString(b,d)}return b.b};Ac.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var c=b[2];a.b+="module ";a.b=null==c?a.b+"null":a.b+(""+c);break;case 2:var c=b[4],d=b[3],e=b[2];null!=e&&(Ac.itemToString(a,e),a.b+=" (");a.b=null==d?a.b+"null":a.b+(""+d);a.b+=" line ";a.b=null==c?a.b+"null":a.b+(""+c);null!=e&&(a.b+=")");break;case 3:c=b[3];d=b[2];a.b=null==d?a.b+"null":a.b+(""+d);
a.b+=".";a.b=null==c?a.b+"null":a.b+(""+c);break;case 4:c=b[2],a.b+="local function #",a.b=null==c?a.b+"null":a.b+(""+c)}};Ac.makeStack=function(a){if("string"==typeof a){for(var a=a.split("\n"),b=[],c=0;c<a.length;){var d=a[c];++c;b.push(lc.Module(d))}return b}return a};var dg=function(a){this.url=a;this.headers=new pe;this.params=new pe;this.async=!0};g["haxe.Http"]=dg;dg.__name__=["haxe","Http"];dg.prototype={addHeader:function(a,b){this.headers.push({header:a,value:b});return this},setPostData:function(a){this.postData=
a;return this},request:function(a){var b=this;b.responseData=null;var c=this.req=Pg.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.req=null,b.onData(b.responseData=c.responseText);else if(null==a)b.req=null,b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.req=null;b.onError("Failed to connect to host");break;case 12007:b.req=null;b.onError("Unknown host");
break;default:b.req=null,b.responseData=c.responseText,b.onError("Http Error #"+c.status)}}};this.async&&(c.onreadystatechange=d);var e=this.postData;if(null!=e)a=!0;else for(var h=this.params.iterator();h.hasNext();)var n=h.next(),e=null==e?"":e+"&",e=e+(encodeURIComponent(n.param)+"="+encodeURIComponent(n.value));try{if(a)c.open("POST",this.url,this.async);else if(null!=e){var f=1>=this.url.split("?").length;c.open("GET",this.url+(f?"?":"&")+e,this.async);e=null}else c.open("GET",this.url,this.async)}catch(g){b.req=
null;this.onError(g.toString());return}!af.exists(this.headers,function(a){return"Content-Type"==a.header})&&a&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.iterator();a.hasNext();)h=a.next(),c.setRequestHeader(h.header,h.value);c.send(e);this.async||d(null)},onData:function(){},onError:function(){},onStatus:function(){},__class__:dg};var Rb=function(){this.buf=new qe;this.cache=[];this.useCache=Rb.USE_CACHE;this.useEnumIndex=Rb.USE_ENUM_INDEX;
this.shash=new C;this.scount=0};g["haxe.Serializer"]=Rb;Rb.__name__=["haxe","Serializer"];Rb.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=
typeof a,c=0,d=this.cache.length;c<d;){var e=c++,h=this.cache[e];if(typeof h==b&&h==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=0,c=y.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(y.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=ca["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==
a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var e=d++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":
(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case pe:this.buf.b+="l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(M.dateStr(a));break;case C:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.b+=
"h";break;case Fb:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.get(c));this.buf.b+="h";break;case db:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=b.next(),d=y.field(c,"__id__"),y.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case zd:d=0;e=a.length-2;b=new qe;for(c=Rb.BASE64;d<e;){var h=a.get(d++),n=a.get(d++),f=a.get(d++);b.add(c.charAt(h>>2));
b.add(c.charAt((h<<4|n>>4)&63));b.add(c.charAt((n<<2|f>>6)&63));b.add(c.charAt(f&63))}d==e?(e=a.get(d++),a=a.get(d++),b.add(c.charAt(e>>2)),b.add(c.charAt((e<<4|a>>4)&63)),b.add(c.charAt(a<<2&63))):d==e+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+=
"C",this.serializeString(ca.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(ca.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(ca.getEnumName(b));
this.useEnumIndex?(this.buf.b+=":",this.buf.b+=q.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=q.string(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";default:throw"Cannot serialize "+q.string(a);}},__class__:Rb};var yd=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};g["haxe.Timer"]=yd;yd.__name__=["haxe","Timer"];yd.delay=function(a,b){var c=new yd(b);c.run=function(){c.stop();
a()};return c};yd.stamp=function(){return(new Date).getTime()/1E3};yd.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:yd};var ub=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=ub.DEFAULT_RESOLVER;null==a&&(a=ca,ub.DEFAULT_RESOLVER=a);this.setResolver(a)};g["haxe.Unserializer"]=ub;ub.__name__=["haxe","Unserializer"];ub.initCodes=function(){for(var a=[],b=0,c=ub.BASE64.length;b<c;){var d=b++;a[ub.BASE64.charCodeAt(d)]=
d}return a};ub.run=function(a){return(new ub(a)).unserialize()};ub.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=
this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";var c=this.readDigits();if(0==c)return ca.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ca.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;
case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return q.parseFloat(M.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=M.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;
case 112:return Math.POSITIVE_INFINITY;case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];
case 120:throw this.unserialize();case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=ca.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),
d=ca.getEnumConstructs(b)[c];if(null==d)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new pe;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 98:a=new C;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new Fb;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),
b=this.get(this.pos++);if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new db;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=M.substr(this.buf,this.pos,19),a=M.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=ub.CODES;null==e&&(e=ub.initCodes(),ub.CODES=e);for(var h=this.pos,
n=a&3,f=h+(a-n),b=zd.alloc(3*(a>>2)+(2<=n?n-1:0)),c=0;h<f;){var g=e[ja.fastCodeAt(d,h++)],i=e[ja.fastCodeAt(d,h++)];b.set(c++,g<<2|i>>4);g=e[ja.fastCodeAt(d,h++)];b.set(c++,i<<4|g>>2);i=e[ja.fastCodeAt(d,h++)];b.set(c++,g<<6|i)}2<=n&&(i=e[ja.fastCodeAt(d,h++)],f=e[ja.fastCodeAt(d,h++)],b.set(c++,i<<2|f>>4),3==n&&(d=e[ja.fastCodeAt(d,h++)],b.set(c++,f<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;
a=ca.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:ub};var zd=function(a,b){this.length=a;this.b=b};g["haxe.io.Bytes"]=zd;zd.__name__=["haxe","io","Bytes"];zd.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new zd(a,b)};zd.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=ja.fastCodeAt(a,c++);55296<=d&&
56319>=d&&(d=d-55232<<10|ja.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new zd(b.length,b)};zd.prototype={get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw Wb.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,h=a,n=a+b;h<n;){var f=d[h++];if(128>f){if(0==f)break;c+=e(f)}else if(224>
f)c+=e((f&63)<<6|d[h++]&127);else if(240>f)var g=d[h++],c=c+e((f&31)<<12|(g&127)<<6|d[h++]&127);else var g=d[h++],i=d[h++],f=(f&15)<<18|(g&127)<<12|(i&127)<<6|d[h++]&127,c=c+e((f>>10)+55232),c=c+e(f&1023|56320)}return c},toString:function(){return this.getString(0,this.length)},__class__:zd};var of=function(){};g["haxe.crypto.Base64"]=of;of.__name__=["haxe","crypto","Base64"];of.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==M.cca(a,a.length-1);)a=M.substr(a,0,-1);return(new Hk(of.BYTES)).decodeBytes(zd.ofString(a))};
var Hk=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw"BaseCode : base length must be a power of two.";this.base=a;this.nbits=c};g["haxe.crypto.BaseCode"]=Hk;Hk.__name__=["haxe","crypto","BaseCode"];Hk.prototype={initTable:function(){for(var a=[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=zd.alloc(d),h=0,n=
0,f=0,g=0;g<d;){for(;8>n;){var n=n+b,h=h<<b,i=c[a.get(f++)];if(-1==i)throw"BaseCode : invalid encoded char";h|=i}n-=8;e.set(g++,h>>n&255)}return e},__class__:Hk};var nb=function(){};g["haxe.ds.ArraySort"]=nb;nb.__name__=["haxe","ds","ArraySort"];nb.sort=function(a,b){nb.rec(a,b,0,a.length)};nb.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var h=e++;h>c;){if(0>b(a[h],a[h-1]))nb.swap(a,h-1,h);else break;h--}}else nb.rec(a,b,c,e),nb.rec(a,b,e,d),nb.doMerge(a,b,c,e,d,e-c,
d-e)};nb.doMerge=function(a,b,c,d,e,h,n){var f,g,i,j;0==h||0==n||(2==h+n?0>b(a[d],a[c])&&nb.swap(a,d,c):(h>n?(i=h>>1,f=c+i,g=nb.lower(a,b,d,e,f),j=g-d):(j=n>>1,g=d+j,f=nb.upper(a,b,c,d,g),i=f-c),nb.rotate(a,b,f,d,g),d=f+j,nb.doMerge(a,b,c,f,d,i,j),nb.doMerge(a,b,d,g,e,h-i,n-j)))};nb.rotate=function(a,b,c,d,e){if(!(c==d||d==e))for(b=nb.gcd(e-c,d-c);0!=b--;){for(var h=a[c+b],n=d-c,f=c+b,g=c+b+n;g!=c+b;)a[f]=a[g],f=g,g=e-g>n?g+n:c+(n-(e-g));a[f]=h}};nb.gcd=function(a,b){for(;0!=b;)var c=a%b,a=b,b=c;
return a};nb.upper=function(a,b,c,d,e){for(var d=d-c,h,n;0<d;)h=d>>1,n=c+h,0>b(a[e],a[n])?d=h:(c=n+1,d=d-h-1);return c};nb.lower=function(a,b,c,d,e){for(var d=d-c,h,n;0<d;)h=d>>1,n=c+h,0>b(a[n],a[e])?(c=n+1,d=d-h-1):d=h;return c};nb.swap=function(a,b,c){var d=a[b];a[b]=a[c];a[c]=d};var Fb=function(){this.h={}};g["haxe.ds.IntMap"]=Fb;Fb.__name__=["haxe","ds","IntMap"];Fb.__interfaces__=[Hf];Fb.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},
remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return M.iter(a)},__class__:Fb};var db=function(){this.h={};this.h.__keys__={}};g["haxe.ds.ObjectMap"]=db;db.__name__=["haxe","ds","ObjectMap"];db.__interfaces__=[Hf];db.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++db.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=
this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return M.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next().__id__]}}},__class__:db};var C=function(){this.h={}};g["haxe.ds.StringMap"]=C;C.__name__=
["haxe","ds","StringMap"];C.__interfaces__=[Hf];C.prototype={set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return M.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+
this.it.next()]}}},__class__:C};var eg=function(a,b){this.replacer=a;this.indent=b;this.pretty=null!=b;this.nind=0;this.buf=new qe};g["haxe.format.JsonPrinter"]=eg;eg.__name__=["haxe","format","JsonPrinter"];eg.print=function(a,b,c){b=new eg(b,c);b.write("",a);return b.buf.b};eg.prototype={ipad:function(){if(this.pretty){var a=ja.lpad("",this.indent,this.nind*this.indent.length);this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)}},write:function(a,b){null!=this.replacer&&(b=this.replacer(a,b));
var c=ca["typeof"](b);switch(c[1]){case 8:this.buf.b+='"???"';break;case 4:this.fieldsString(b,y.fields(b));break;case 1:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 2:c=Math.isFinite(b)?b:"null";this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 5:this.buf.b+='"<fun>"';break;case 6:c=c[2];if(c==String)this.quote(b);else if(c==Array){c=b;this.buf.b+="[";for(var d=c.length,e=d-1,h=0;h<d;){var n=h++;0<n?this.buf.b+=",":this.nind++;this.pretty&&(this.buf.b+="\n");
this.ipad();this.write(n,c[n]);n==e&&(this.nind--,this.pretty&&(this.buf.b+="\n"),this.ipad())}this.buf.b+="]"}else if(c==C){c=b;d={};for(e=c.keys();e.hasNext();)h=e.next(),y.setField(d,h,c.get(h));this.fieldsString(d,y.fields(d))}else c==Date?this.quote(M.dateStr(b)):this.fieldsString(b,y.fields(b));break;case 7:c=ca.enumIndex(b);this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 3:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 0:this.buf.b+="null"}},fieldsString:function(a,
b){this.buf.b+="{";for(var c=b.length,d=c-1,e=0;e<c;){var h=e++,n=b[h],f=y.field(a,n);y.isFunction(f)||(0<h?this.buf.b+=",":this.nind++,this.pretty&&(this.buf.b+="\n"),this.ipad(),this.quote(n),this.buf.b+=":",this.pretty&&(this.buf.b+=" "),this.write(n,f),h==d&&(this.nind--,this.pretty&&(this.buf.b+="\n"),this.ipad()))}this.buf.b+="}"},quote:function(a){this.buf.b+='"';for(var b=0;;){var c=ja.fastCodeAt(a,b++);if(c!=c)break;switch(c){case 34:this.buf.b+='\\"';break;case 92:this.buf.b+="\\\\";break;
case 10:this.buf.b+="\\n";break;case 13:this.buf.b+="\\r";break;case 9:this.buf.b+="\\t";break;case 8:this.buf.b+="\\b";break;case 12:this.buf.b+="\\f";break;default:this.buf.b+=String.fromCharCode(c)}}this.buf.b+='"'},__class__:eg};var wl=function(){};g["haxe.io.Eof"]=wl;wl.__name__=["haxe","io","Eof"];wl.prototype={toString:function(){return"Eof"},__class__:wl};var Wb=g["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};Wb.Blocked=["Blocked",
0];Wb.Blocked.toString=p;Wb.Blocked.__enum__=Wb;Wb.Overflow=["Overflow",1];Wb.Overflow.toString=p;Wb.Overflow.__enum__=Wb;Wb.OutsideBounds=["OutsideBounds",2];Wb.OutsideBounds.toString=p;Wb.OutsideBounds.__enum__=Wb;Wb.Custom=function(a){a=["Custom",3,a];a.__enum__=Wb;a.toString=p;return a};var ik=function(){};g["haxe.rtti.Meta"]=ik;ik.__name__=["haxe","rtti","Meta"];ik.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var Ik=function(a){this.__x=a};g["haxe.xml._Fast.NodeAccess"]=
Ik;Ik.__name__=["haxe","xml","_Fast","NodeAccess"];Ik.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==S.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new fg(b)},__class__:Ik};var Jk=function(a){this.__x=a};g["haxe.xml._Fast.AttribAccess"]=Jk;Jk.__name__=["haxe","xml","_Fast","AttribAccess"];Jk.prototype={resolve:function(a){if(this.__x.nodeType==S.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);
if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:Jk};var Kk=function(a){this.__x=a};g["haxe.xml._Fast.HasAttribAccess"]=Kk;Kk.__name__=["haxe","xml","_Fast","HasAttribAccess"];Kk.prototype={resolve:function(a){if(this.__x.nodeType==S.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:Kk};var Lk=function(a){this.__x=a};g["haxe.xml._Fast.HasNodeAccess"]=Lk;Lk.__name__=["haxe","xml","_Fast","HasNodeAccess"];Lk.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},
__class__:Lk};var Mk=function(a){this.__x=a};g["haxe.xml._Fast.NodeListAccess"]=Mk;Mk.__name__=["haxe","xml","_Fast","NodeListAccess"];Mk.prototype={resolve:function(a){for(var b=new pe,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new fg(c))}return b},__class__:Mk};var fg=function(a){if(a.nodeType!=S.Document&&a.nodeType!=S.Element)throw"Invalid nodeType "+q.string(a.nodeType);this.x=a;this.node=new Ik(a);this.nodes=new Mk(a);this.att=new Jk(a);this.has=new Kk(a);this.hasNode=new Lk(a)};
g["haxe.xml.Fast"]=fg;fg.__name__=["haxe","xml","Fast"];fg.prototype={get_name:function(){return this.x.nodeType==S.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==S.PCData&&c.nodeType==S.CData&&""==ja.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==S.PCData&&""==ja.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+
" does not only have data";}if(b.nodeType!=S.PCData&&b.nodeType!=S.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:fg,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var Hd=function(){};g["haxe.xml.Parser"]=Hd;Hd.__name__=["haxe","xml","Parser"];Hd.parse=function(a){var b=S.createDocument();Hd.doParse(a,0,b);return b};Hd.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,h=1,n=null,f=0,g=0,i=0,j=a.charCodeAt(b),k=new qe;j==j;){switch(e){case 0:switch(j){case 10:case 13:case 9:case 32:break;
default:e=h;continue}break;case 1:switch(j){case 60:e=0;h=2;break;default:f=b;e=13;continue}break;case 13:60==j?(h=S.createPCData(k.b+M.substr(a,f,b-f)),k=new qe,c.addChild(h),g++,e=0,h=2):38==j&&(k.addSub(a,f,b-f),e=18,h=13,f=b+1);break;case 17:93==j&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=S.createCData(M.substr(a,f,b-f)),c.addChild(e),g++,b+=2,e=1);break;case 2:switch(j){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=M.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=
17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=M.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}f=b+1;break;case 63:e=14;f=b;break;case 47:if(null==c)throw"Expected node name";f=b+1;e=0;h=10;break;default:e=3;f=b;continue}break;case 3:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(b==f)throw"Expected node name";d=S.createElement(M.substr(a,
f,b-f));c.addChild(d);e=0;h=4;continue}break;case 4:switch(j){case 47:e=11;g++;break;case 62:e=9;g++;break;default:e=5;f=b;continue}break;case 5:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(f==b)throw"Expected attribute name";n=M.substr(a,f,b-f);if(d.exists(n))throw"Duplicate attribute";e=0;h=6;continue}break;case 6:switch(j){case 61:e=0;h=7;break;default:throw"Expected =";}break;case 7:switch(j){case 34:case 39:e=8;f=b;break;default:throw'Expected "';}break;case 8:j==
a.charCodeAt(f)&&(h=M.substr(a,f+1,b-f-1),d.set(n,h),e=0,h=4);break;case 9:f=b=Hd.doParse(a,b,d);e=1;break;case 11:switch(j){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(j){case 62:return 0==g&&c.addChild(S.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(f==b)throw"Expected node name";if(M.substr(a,f,b-f)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;h=12;continue}break;case 15:45==
j&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(S.createComment(M.substr(a,f,b-f))),b+=2,e=1);break;case 16:91==j?i++:93==j?i--:62==j&&0==i&&(c.addChild(S.createDocType(M.substr(a,f,b-f))),e=1);break;case 14:63==j&&62==a.charCodeAt(b+1)&&(b++,e=M.substr(a,f+1,b-f-2),c.addChild(S.createProcessingInstruction(e)),e=1);break;case 18:59==j&&(f=M.substr(a,f,b-f),35==f.charCodeAt(0)?(f=120==f.charCodeAt(1)?q.parseInt("0"+M.substr(f,1,f.length-1)):q.parseInt(M.substr(f,1,f.length-1)),k.add(String.fromCharCode(f))):
Hd.escapes.exists(f)?k.add(Hd.escapes.get(f)):k.b+=q.string("&"+f+";"),f=b+1,e=h)}j=ja.fastCodeAt(a,++b)}1==e&&(f=b,e=13);if(13==e)return(b!=f||0==g)&&c.addChild(S.createPCData(k.b+M.substr(a,f,b-f))),b;throw"Unexpected end";};var X=function(){};g["js.Boot"]=X;X.__name__=["js","Boot"];X.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};X.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||a.__ename__))c=
"object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var h=d++,c=2!=h?c+(","+X.__string_rec(a[h],b)):c+X.__string_rec(a[h],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)h=e++,d+=(0<h?",":"")+X.__string_rec(a[h],b);return d+"]"}try{d=a.toString}catch(n){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;for(c in a)if(!e||
a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+X.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};X.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var h=d++,h=c[h];if(h==b||X.__interfLoop(h,b))return!0}return X.__interfLoop(a.__super__,
b)};X.__instanceof=function(a,b){if(null==b)return!1;switch(b){case mm:return(a|0)===a;case gm:return"number"==typeof a;case hm:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case nm:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||X.__interfLoop(X.getClass(a),b)))return!0}else return!1;return b==om&&null!=a.__name__||b==pm&&null!=a.__ename__?!0:a.__enum__==b}};X.__cast=function(a,b){if(X.__instanceof(a,b))return a;
throw"Cannot cast "+q.string(a)+" to "+q.string(b);};var Pg=function(){};g["js.Browser"]=Pg;Pg.__name__=["js","Browser"];Pg.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};Pg.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object.";};var sl=function(){};g["js.html._CanvasElement.CanvasUtil"]=
sl;sl.__name__=["js","html","_CanvasElement","CanvasUtil"];sl.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var hb=function(){j.call(this);if(null!=hb._scaleSprite)throw"AutoScale should be added only once!";ta.init()};g["jsembed.AutoScale"]=hb;hb.__name__=["jsembed","AutoScale"];hb.__super__=j;hb.prototype=k(j.prototype,{get_name:function(){return"AutoScale_94"},onAdded:function(){null!=
this.owner._compMap.Sprite_5?hb._scaleSprite=this.owner._compMap.Sprite_5:(hb._scaleSprite=new s,this.owner.add(hb._scaleSprite))},onUpdate:function(){hb.tmp=ta.get_canvasScale();0<hb.tmp&&hb.tmp!=hb.SCALE&&(hb.SCALE=hb.tmp,hb._scaleSprite.scaleX.set__(hb.tmp),hb._scaleSprite.scaleY.set__(hb.tmp))},__class__:hb});var Xb=function(){};g["jsembed.BaseUtils"]=Xb;Xb.__name__=["jsembed","BaseUtils"];Xb.setupManifest=function(a){""!=Xb.BASE_URL&&(ta.get_isCrossdomain()?a.set_remoteBase(Xb.BASE_URL):a.set_localBase(Xb.BASE_URL))};
Xb.setupBaseURL=function(){ta.init();Xb.BASE_URL=ta.get_exists()?ta.get_isCrossdomain()?Xb.appendAssetsToUrl(ta.get_base()):Xb.trimUrl(ta.get_base()):""};Xb.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=M.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=M.substr(a,b,a.length-b);return a=Xb.appendAssetsToUrl(a)};Xb.appendAssetsToUrl=function(a){"/"!=a.charAt(a.length-1)&&(a+="/");return a+
"assets/"};var xa=function(a,b){j.call(this);if(!xa.hasInit)throw"Please call 'jsembed.HardwareAutoScale.init();' BEFORE  Flambe 'System.init()'";ta.init();this.gameWidth=a;this.gameHeight=b;this._htmlStage=u._platform.getStage();this._stage=u._platform.getStage();this._canvas=this._stage._canvas;this.resizeCanvas(a,b)};g["jsembed.HardwareAutoScale"]=xa;xa.__name__=["jsembed","HardwareAutoScale"];xa.init=function(){if(!xa.hasInit){xa.hasInit=!0;var a=If;a.prototype.onWindowResize=function(){};a.prototype.requestResize=
function(){};a.prototype.resizeCanvas=function(a,c){this._canvas.width=a;this._canvas.height=c;this.resize.emit();return!0}}};xa.__super__=j;xa.prototype=k(j.prototype,{get_name:function(){return"HardwareAutoScale_93"},resizeCanvas:function(a,b){this._canvas.width=this._stage.width=a;this._canvas.height=this._stage.width=b;this._htmlStage.resize.emit()},onUpdate:function(){xa._tmp=ta.get_canvasScale();0<xa._tmp&&xa._tmp!=xa.SCALE&&(xa.SCALE=xa._tmp,this._canvas.style.width=this.gameWidth*xa.SCALE+
"px",this._canvas.style.height=this.gameHeight*xa.SCALE+"px")},__class__:xa});var ta=function(){};g["jsembed.JSEmbedProxy"]=ta;ta.__name__=["jsembed","JSEmbedProxy"];ta.__properties__={get_canvasScale:"get_canvasScale",get_isCrossdomain:"get_isCrossdomain",get_base:"get_base",get_exists:"get_exists"};ta.init=function(){if(null!=ta.JSEMBED)return!0;try{return ta.JSEMBED=eval("jsembed"),ta.enabled=!0}catch(a){}return!1};ta.get_exists=function(){return!ta.enabled?!1:ta.JSEMBED.exists()};ta.get_base=
function(){return!ta.enabled?null:ta.JSEMBED.baseUrl()};ta.get_isCrossdomain=function(){return!ta.enabled?!0:ta.JSEMBED.isBaseCrossdomain()};ta.get_canvasScale=function(){return!ta.enabled?0:q.parseFloat(ta.JSEMBED.canvasScale())};var t=function(){};g["nape.Config"]=t;t.__name__=["nape","Config"];var Ad=function(){this.zpp_inner=null};g["nape.callbacks.Callback"]=Ad;Ad.__name__=["nape","callbacks","Callback"];Ad.prototype={toString:function(){return""},__class__:Ad};var Ki=function(){this.zpp_inner=
null};g["nape.callbacks.BodyCallback"]=Ki;Ki.__name__=["nape","callbacks","BodyCallback"];Ki.__super__=Ad;Ki.prototype=k(Ad.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-f.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+q.string(this.zpp_inner.listener.outer)},__class__:Ki});var kd=function(){this.zpp_inner=null};g["nape.callbacks.Listener"]=kd;kd.__name__=["nape","callbacks","Listener"];kd.prototype={toString:function(){var a=
"BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==f.id_ListenerType_BODY)return"BodyListener{"+a+"::"+q.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==f.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+q.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,c;switch(b.itype){case f.id_InteractionType_COLLISION:c="COLLISION";break;case f.id_InteractionType_SENSOR:c=
"SENSOR";break;case f.id_InteractionType_FLUID:c="FLUID";break;default:c="ALL"}return(this.zpp_inner.type==f.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+c+"::"+q.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+q.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+c+"::"+q.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+q.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:kd};var Nk=function(){this.zpp_inner_zn=
null};g["nape.callbacks.BodyListener"]=Nk;Nk.__name__=["nape","callbacks","BodyListener"];Nk.__super__=kd;Nk.prototype=k(kd.prototype,{__class__:Nk});var Yb=function(){};g["nape.callbacks.CbEvent"]=Yb;Yb.__name__=["nape","callbacks","CbEvent"];Yb.prototype={toString:function(){var a;null==f.CbEvent_PRE&&(f.internal=!0,f.CbEvent_PRE=new Yb,f.internal=!1);this==f.CbEvent_PRE?a="PRE":(null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Yb,f.internal=!1),this==f.CbEvent_BEGIN?a="BEGIN":(null==f.CbEvent_ONGOING&&
(f.internal=!0,f.CbEvent_ONGOING=new Yb,f.internal=!1),this==f.CbEvent_ONGOING?a="ONGOING":(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Yb,f.internal=!1),this==f.CbEvent_END?a="END":(null==f.CbEvent_WAKE&&(f.internal=!0,f.CbEvent_WAKE=new Yb,f.internal=!1),this==f.CbEvent_WAKE?a="WAKE":(null==f.CbEvent_SLEEP&&(f.internal=!0,f.CbEvent_SLEEP=new Yb,f.internal=!1),this==f.CbEvent_SLEEP?a="SLEEP":(null==f.CbEvent_BREAK&&(f.internal=!0,f.CbEvent_BREAK=new Yb,f.internal=!1),a=this==f.CbEvent_BREAK?
"BREAK":""))))));return a},__class__:Yb};var ue=function(){this.zpp_inner=null;this.zpp_inner=new mc;this.zpp_inner.outer=this};g["nape.callbacks.CbType"]=ue;ue.__name__=["nape","callbacks","CbType"];ue.prototype={toString:function(){return this==mc.ANY_BODY?"ANY_BODY":this==mc.ANY_SHAPE?"ANY_SHAPE":this==mc.ANY_COMPOUND?"ANY_COMPOUND":this==mc.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:ue};var pb=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=
null};g["nape.callbacks.CbTypeIterator"]=pb;pb.__name__=["nape","callbacks","CbTypeIterator"];pb.get=function(a){var b;null==pb.zpp_pool?(ld.internal=!0,b=new pb,ld.internal=!1):(b=pb.zpp_pool,pb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};pb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=pb.zpp_pool;pb.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=
!1;return this.zpp_inner.at(this.zpp_i++)},__class__:pb};var Li=function(){this.zpp_inner=null;this.zpp_inner=new ld;this.zpp_inner.outer=this};g["nape.callbacks.CbTypeList"]=Li;Li.__name__=["nape","callbacks","CbTypeList"];Li.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?
this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},
remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=pb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==
d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Li,__properties__:{get_length:"get_length"}};var Mi=function(){this.zpp_inner=null};g["nape.callbacks.ConstraintCallback"]=Mi;Mi.__name__=["nape","callbacks","ConstraintCallback"];Mi.__super__=Ad;Mi.prototype=k(Ad.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-f.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+q.string(this.zpp_inner.listener.outer)},__class__:Mi});
var Ok=function(){this.zpp_inner_zn=null};g["nape.callbacks.ConstraintListener"]=Ok;Ok.__name__=["nape","callbacks","ConstraintListener"];Ok.__super__=kd;Ok.prototype=k(kd.prototype,{__class__:Ok});var Ni=function(){this.zpp_inner=null};g["nape.callbacks.InteractionCallback"]=Ni;Ni.__name__=["nape","callbacks","InteractionCallback"];Ni.__super__=Ad;Ni.prototype=k(Ad.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+
"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+q.string(this.zpp_inner.listener.outer)},__class__:Ni});var pf=function(a,b,c,d,e,h){null==h&&(h=0);this.zpp_inner=this.zpp_inner_zn=null;var n=-1;null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Yb,f.internal=!1);a==f.CbEvent_BEGIN?n=f.id_CbEvent_BEGIN:(null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Yb,f.internal=!1),a==f.CbEvent_END?n=f.id_CbEvent_END:(null==f.CbEvent_ONGOING&&
(f.internal=!0,f.CbEvent_ONGOING=new Yb,f.internal=!1),a==f.CbEvent_ONGOING&&(n=f.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new Kb(ke.argument(c),ke.argument(d),n,f.id_ListenerType_INTERACTION);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=h;this.zpp_inner_zn.handleri=e;this.set_interactionType(b)};g["nape.callbacks.InteractionListener"]=pf;pf.__name__=["nape","callbacks","InteractionListener"];pf.__super__=kd;pf.prototype=k(kd.prototype,{get_interactionType:function(){var a=
this.zpp_inner_zn.itype;if(a==f.id_InteractionType_COLLISION)return null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new $a,f.internal=!1),f.InteractionType_COLLISION;if(a==f.id_InteractionType_SENSOR)return null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new $a,f.internal=!1),f.InteractionType_SENSOR;if(a==f.id_InteractionType_FLUID)return null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1),f.InteractionType_FLUID;
return a==f.id_InteractionType_ANY?(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new $a,f.internal=!1),f.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new $a,f.internal=!1);a==f.InteractionType_COLLISION?a=f.id_InteractionType_COLLISION:(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new $a,f.internal=!1),
a==f.InteractionType_SENSOR?a=f.id_InteractionType_SENSOR:(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1),a=a==f.InteractionType_FLUID?f.id_InteractionType_FLUID:f.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:pf,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType"}});var $a=function(){};g["nape.callbacks.InteractionType"]=$a;$a.__name__=["nape","callbacks","InteractionType"];
$a.prototype={toString:function(){var a;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new $a,f.internal=!1);this==f.InteractionType_COLLISION?a="COLLISION":(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new $a,f.internal=!1),this==f.InteractionType_SENSOR?a="SENSOR":(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1),this==f.InteractionType_FLUID?a="FLUID":(null==f.InteractionType_ANY&&(f.internal=!0,
f.InteractionType_ANY=new $a,f.internal=!1),a=this==f.InteractionType_ANY?"ANY":"")));return a},__class__:$a};var md=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.callbacks.ListenerIterator"]=md;md.__name__=["nape","callbacks","ListenerIterator"];md.get=function(a){var b;null==md.zpp_pool?(ve.internal=!0,b=new md,ve.internal=!1):(b=md.zpp_pool,md.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};md.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=md.zpp_pool;md.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:md};var Pk=function(){this.zpp_inner=null;this.zpp_inner=new ve;this.zpp_inner.outer=this};g["nape.callbacks.ListenerList"]=Pk;Pk.__name__=["nape","callbacks","ListenerList"];Pk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=md.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Pk,__properties__:{get_length:"get_length"}};var qf=function(){};g["nape.callbacks.ListenerType"]=qf;qf.__name__=["nape","callbacks","ListenerType"];qf.prototype={toString:function(){var a;null==f.ListenerType_BODY&&(f.internal=!0,f.ListenerType_BODY=new qf,f.internal=!1);this==f.ListenerType_BODY?a="BODY":
(null==f.ListenerType_CONSTRAINT&&(f.internal=!0,f.ListenerType_CONSTRAINT=new qf,f.internal=!1),this==f.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==f.ListenerType_INTERACTION&&(f.internal=!0,f.ListenerType_INTERACTION=new qf,f.internal=!1),this==f.ListenerType_INTERACTION?a="INTERACTION":(null==f.ListenerType_PRE&&(f.internal=!0,f.ListenerType_PRE=new qf,f.internal=!1),a=this==f.ListenerType_PRE?"PRE":"")));return a},__class__:qf};var rf=function(a,b){this.zpp_inner=null;this.zpp_inner=new ke;
this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};g["nape.callbacks.OptionType"]=rf;rf.__name__=["nape","callbacks","OptionType"];rf.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&
this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:rf};var Oi=function(){this.zpp_inner=null};g["nape.callbacks.PreCallback"]=Oi;Oi.__name__=["nape","callbacks","PreCallback"];Oi.__super__=Ad;Oi.prototype=k(Ad.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+q.string(this.zpp_inner.listener.outer)},
__class__:Oi});var Ua=function(){};g["nape.callbacks.PreFlag"]=Ua;Ua.__name__=["nape","callbacks","PreFlag"];Ua.prototype={toString:function(){var a;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1);this==f.PreFlag_ACCEPT?a="ACCEPT":(null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1),this==f.PreFlag_IGNORE?a="IGNORE":(null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1),this==f.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":
(null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new Ua,f.internal=!1),a=this==f.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:Ua};var Pi=function(a,b,c,d,e,h){null==h&&(h=!1);null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=new Kb(ke.argument(b),ke.argument(c),f.id_CbEvent_PRE,f.id_ListenerType_PRE);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=e;this.zpp_inner_zn.pure=h;this.zpp_inner_zn.handlerp=
d;this.set_interactionType(a)};g["nape.callbacks.PreListener"]=Pi;Pi.__name__=["nape","callbacks","PreListener"];Pi.__super__=kd;Pi.prototype=k(kd.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==f.id_InteractionType_COLLISION)return null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new $a,f.internal=!1),f.InteractionType_COLLISION;if(a==f.id_InteractionType_SENSOR)return null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=
new $a,f.internal=!1),f.InteractionType_SENSOR;if(a==f.id_InteractionType_FLUID)return null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1),f.InteractionType_FLUID;return a==f.id_InteractionType_ANY?(null==f.InteractionType_ANY&&(f.internal=!0,f.InteractionType_ANY=new $a,f.internal=!1),f.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=
new $a,f.internal=!1);a==f.InteractionType_COLLISION?a=f.id_InteractionType_COLLISION:(null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new $a,f.internal=!1),a==f.InteractionType_SENSOR?a=f.id_InteractionType_SENSOR:(null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1),a=a==f.InteractionType_FLUID?f.id_InteractionType_FLUID:f.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:Pi,__properties__:{set_interactionType:"set_interactionType",
get_interactionType:"get_interactionType"}});var xl=function(){};g["nape.constraint.Constraint"]=xl;xl.__name__=["nape","constraint","Constraint"];xl.prototype={toString:function(){return"{Constraint}"},__class__:xl};var nd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.constraint.ConstraintIterator"]=nd;nd.__name__=["nape","constraint","ConstraintIterator"];nd.get=function(a){var b;null==nd.zpp_pool?(Lb.internal=!0,b=new nd,Lb.internal=!1):(b=nd.zpp_pool,
nd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};nd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=nd.zpp_pool;nd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:nd};var Qk=function(){this.zpp_inner=null;this.zpp_inner=new Lb;this.zpp_inner.outer=this};g["nape.constraint.ConstraintList"]=
Qk;Qk.__name__=["nape","constraint","ConstraintList"];Qk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=nd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Qk,__properties__:{get_length:"get_length"}};var Pd=function(){this.zpp_inner=null};g["nape.dynamics.Arbiter"]=Pd;Pd.__name__=["nape","dynamics","Arbiter"];Pd.prototype={get_collisionArbiter:function(){return this.zpp_inner.type==ma.COL?this.zpp_inner.colarb.outer_zn:null},get_state:function(){var a=this.zpp_inner.immState;if(a==(f.id_ImmState_ACCEPT|
f.id_ImmState_ALWAYS))return null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1),f.PreFlag_ACCEPT;switch(a){case f.id_ImmState_ACCEPT:return null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1),f.PreFlag_ACCEPT_ONCE;default:if(a==(f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS))return null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1),f.PreFlag_IGNORE;null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=
new Ua,f.internal=!1);return f.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==ma.COL?"CollisionArbiter":this.zpp_inner.type==ma.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==ma.COL?"["+["SD",
"DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:Pd,__properties__:{get_state:"get_state",get_collisionArbiter:"get_collisionArbiter"}};var Bc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.ArbiterIterator"]=Bc;Bc.__name__=["nape","dynamics","ArbiterIterator"];Bc.get=function(a){var b;null==Bc.zpp_pool?(Bd.internal=!0,b=new Bc,Bd.internal=!1):(b=Bc.zpp_pool,Bc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};Bc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Bc.zpp_pool;Bc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Bc};var Rk=function(){this.zpp_inner=null;this.zpp_inner=new Bd;this.zpp_inner.outer=this};g["nape.dynamics.ArbiterList"]=Rk;Rk.__name__=["nape","dynamics","ArbiterList"];
Rk.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=
this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return Bc.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;
d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Rk};var gg=function(){};g["nape.dynamics.ArbiterType"]=gg;gg.__name__=["nape","dynamics","ArbiterType"];gg.prototype={toString:function(){var a;null==f.ArbiterType_COLLISION&&(f.internal=!0,f.ArbiterType_COLLISION=new gg,f.internal=!1);this==f.ArbiterType_COLLISION?a="COLLISION":(null==f.ArbiterType_SENSOR&&(f.internal=!0,f.ArbiterType_SENSOR=new gg,f.internal=!1),this==f.ArbiterType_SENSOR?a="SENSOR":
(null==f.ArbiterType_FLUID&&(f.internal=!0,f.ArbiterType_FLUID=new gg,f.internal=!1),a=this==f.ArbiterType_FLUID?"FLUID":""));return a},__class__:gg};var Qi=function(){this.zpp_inner=null};g["nape.dynamics.CollisionArbiter"]=Qi;Qi.__name__=["nape","dynamics","CollisionArbiter"];Qi.__super__=Pd;Qi.prototype=k(Pd.prototype,{get_dynamicFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||
a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||
(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.dyn_fric},set_dynamicFriction:function(a){var b=this.zpp_inner.colarb;b.dyn_fric=a;b.userdef_dyn_fric=!0;return this.get_dynamicFriction()},get_staticFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||
a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.stat_fric},
set_staticFriction:function(a){var b=this.zpp_inner.colarb;b.stat_fric=a;b.userdef_stat_fric=!0;return this.get_staticFriction()},get_rollingFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/
2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.rfric},set_rollingFriction:function(a){var b=this.zpp_inner.colarb;b.rfric=a;b.userdef_rfric=!0;return this.get_rollingFriction()},
__class__:Qi,__properties__:k(Pd.prototype.__properties__,{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction"})});var Sk=function(){this.zpp_inner=null};g["nape.dynamics.Contact"]=Sk;Sk.__name__=["nape","dynamics","Contact"];Sk.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?
"{object-pooled}":"{Contact}"},__class__:Sk};var Uc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.ContactIterator"]=Uc;Uc.__name__=["nape","dynamics","ContactIterator"];Uc.get=function(a){var b;null==Uc.zpp_pool?(hg.internal=!0,b=new Uc,hg.internal=!1):(b=Uc.zpp_pool,Uc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Uc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Uc.zpp_pool;Uc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Uc};var yl=function(){this.zpp_inner=null};g["nape.dynamics.ContactList"]=yl;yl.__name__=["nape","dynamics","ContactList"];yl.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=
a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;
for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Uc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:yl,__properties__:{get_length:"get_length"}};var Ri=function(){this.zpp_inner=
null};g["nape.dynamics.FluidArbiter"]=Ri;Ri.__name__=["nape","dynamics","FluidArbiter"];Ri.__super__=Pd;Ri.prototype=k(Pd.prototype,{__class__:Ri});var Tk=function(a,b,c,d,e,h){null==h&&(h=-1);null==e&&(e=1);null==d&&(d=-1);null==c&&(c=1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==ib.zpp_pool?this.zpp_inner=new ib:(this.zpp_inner=ib.zpp_pool,ib.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=
a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=c&&(this.zpp_inner.sensorGroup=c,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate());
this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=h&&(this.zpp_inner.fluidMask=h,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};g["nape.dynamics.InteractionFilter"]=Tk;Tk.__name__=["nape","dynamics","InteractionFilter"];Tk.prototype={set_collisionGroup:function(a){this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.collisionGroup},set_collisionMask:function(a){this.zpp_inner.collisionMask!=a&&(this.zpp_inner.collisionMask=
a,this.zpp_inner.invalidate());return this.zpp_inner.collisionMask},set_sensorGroup:function(a){this.zpp_inner.sensorGroup!=a&&(this.zpp_inner.sensorGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.sensorGroup},set_sensorMask:function(a){this.zpp_inner.sensorMask!=a&&(this.zpp_inner.sensorMask=a,this.zpp_inner.invalidate());return this.zpp_inner.sensorMask},set_fluidGroup:function(a){this.zpp_inner.fluidGroup!=a&&(this.zpp_inner.fluidGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidGroup},
set_fluidMask:function(a){this.zpp_inner.fluidMask!=a&&(this.zpp_inner.fluidMask=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidMask},__class__:Tk,__properties__:{set_fluidMask:"set_fluidMask",set_fluidGroup:"set_fluidGroup",set_sensorMask:"set_sensorMask",set_sensorGroup:"set_sensorGroup",set_collisionMask:"set_collisionMask",set_collisionGroup:"set_collisionGroup"}};var zl=function(){this.zpp_inner=null};g["nape.dynamics.InteractionGroup"]=zl;zl.__name__=["nape","dynamics","InteractionGroup"];
zl.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:zl};var nc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.dynamics.InteractionGroupIterator"]=nc;nc.__name__=["nape","dynamics","InteractionGroupIterator"];nc.get=function(a){var b;null==nc.zpp_pool?(ig.internal=!0,b=new nc,ig.internal=!1):(b=nc.zpp_pool,nc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};nc.prototype=
{hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=nc.zpp_pool;nc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:nc};var Al=function(){this.zpp_inner=null};g["nape.dynamics.InteractionGroupList"]=Al;Al.__name__=["nape","dynamics","InteractionGroupList"];Al.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=nc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Al,__properties__:{get_length:"get_length"}};var Uk=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_inner=null;this.zpp_inner=Pa.get(a,b,a+c,b+d);this.zpp_inner.outer=this};g["nape.geom.AABB"]=Uk;Uk.__name__=["nape","geom","AABB"];Uk.prototype=
{get_width:function(){this.zpp_inner.validate();return this.zpp_inner.width()},get_height:function(){this.zpp_inner.validate();return this.zpp_inner.height()},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:Uk,__properties__:{get_height:"get_height",get_width:"get_width"}};var Bl=function(){this.zpp_inner=null};g["nape.geom.ConvexResult"]=Bl;Bl.__name__=["nape","geom","ConvexResult"];Bl.prototype={toString:function(){return"{ shape: "+q.string(this.zpp_inner.shape)+
" toi: "+this.zpp_inner.toiDistance+" }"},__class__:Bl};var Cd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.ConvexResultIterator"]=Cd;Cd.__name__=["nape","geom","ConvexResultIterator"];Cd.get=function(a){var b;null==Cd.zpp_pool?(jg.internal=!0,b=new Cd,jg.internal=!1):(b=Cd.zpp_pool,Cd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Cd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Cd.zpp_pool;Cd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Cd};var Cl=function(){this.zpp_inner=null};g["nape.geom.ConvexResultList"]=Cl;Cl.__name__=["nape","geom","ConvexResultList"];Cl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Cd.get(this);c.hasNext();){var d;
c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Cl,__properties__:{get_length:"get_length"}};var Vk=function(){this.zpp_inner=null};g["nape.geom.GeomPoly"]=Vk;Vk.__name__=["nape","geom","GeomPoly"];Vk.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b){do{var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next}while(b!=c)}return a+"]"},__class__:Vk};
var Dd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.GeomPolyIterator"]=Dd;Dd.__name__=["nape","geom","GeomPolyIterator"];Dd.get=function(a){var b;null==Dd.zpp_pool?(kg.internal=!0,b=new Dd,kg.internal=!1):(b=Dd.zpp_pool,Dd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Dd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
Dd.zpp_pool;Dd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Dd};var Dl=function(){this.zpp_inner=null};g["nape.geom.GeomPolyList"]=Dl;Dl.__name__=["nape","geom","GeomPolyList"];Dl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Dd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=
",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Dl,__properties__:{get_length:"get_length"}};var El=function(){this.zpp_inner=null};g["nape.geom.Mat23"]=El;El.__name__=["nape","geom","Mat23"];El.prototype={toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:El};var Fl=function(){this.zpp_inner=null};g["nape.geom.MatMN"]=Fl;Fl.__name__=["nape",
"geom","MatMN"];Fl.prototype={toString:function(){for(var a="{ ",b=!0,c=0,d=this.zpp_inner.m;c<d;){var e=c++;b||(a+="; ");for(var b=!1,h=0,n=this.zpp_inner.n;h<n;)var f=h++,a=a+(this.zpp_inner.x[e*this.zpp_inner.n+f]+" ")}return a+"}"},__class__:Fl};var im=function(){};g["nape.geom.Ray"]=im;im.__name__=["nape","geom","Ray"];var Gl=function(){this.zpp_inner=null};g["nape.geom.RayResult"]=Gl;Gl.__name__=["nape","geom","RayResult"];Gl.prototype={toString:function(){return"{ shape: "+q.string(this.zpp_inner.shape)+
" distance: "+this.zpp_inner.toiDistance+" ?inner: "+q.string(this.zpp_inner.inner)+" }"},__class__:Gl};var Qd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.RayResultIterator"]=Qd;Qd.__name__=["nape","geom","RayResultIterator"];Qd.get=function(a){var b;null==Qd.zpp_pool?(lg.internal=!0,b=new Qd,lg.internal=!1):(b=Qd.zpp_pool,Qd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Qd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Qd.zpp_pool;Qd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Qd};var Hl=function(){this.zpp_inner=null};g["nape.geom.RayResultList"]=Hl;Hl.__name__=["nape","geom","RayResultList"];Hl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=
this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=Qd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Hl,__properties__:{get_length:"get_length"}};var ra=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=qa.get(a,b,null);this.zpp_inner.outer=this};g["nape.geom.Vec2"]=ra;ra.__name__=["nape","geom","Vec2"];ra.weak=function(a,b){null==b&&(b=0);null==a&&(a=0);return ra.get(a,b,!0)};ra.get=function(a,b,
c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);var d;null==mg.poolVec2?d=new ra:(d=mg.poolVec2,mg.poolVec2=d.zpp_pool,d.zpp_pool=null);if(null==d.zpp_inner)d.zpp_inner=qa.get(a,b,null),d.zpp_inner.outer=d;else{var e;d.zpp_inner.validate();if(e=d.zpp_inner.x==a)d.zpp_inner.validate(),e=d.zpp_inner.y==b;e||(d.zpp_inner.x=a,d.zpp_inner.y=b,d.zpp_inner.invalidate());d}d.zpp_inner.weak=c;return d};ra.prototype={dispose:function(){var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=
mg.poolVec2;mg.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=qa.zpp_pool;qa.zpp_pool=a},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.validate();this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.validate();
this.zpp_inner.y!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.y},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var c;this.zpp_inner.validate();if(c=this.zpp_inner.x==a)this.zpp_inner.validate(),c=this.zpp_inner.y==b;c||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());
return this},sub:function(a,b){null==b&&(b=!1);var c=ra.get(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.y}(this),b);a.zpp_inner.weak?(a.dispose(),!0):!1;return c},muleq:function(a){return this.setxy(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*a,function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)*
a)},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:ra,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var Rd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.geom.Vec2Iterator"]=Rd;Rd.__name__=["nape","geom","Vec2Iterator"];Rd.get=function(a){var b;null==Rd.zpp_pool?(sf.internal=!0,b=new Rd,sf.internal=!1):(b=Rd.zpp_pool,Rd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;
return b};Rd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Rd.zpp_pool;Rd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Rd};var Se=function(){this.zpp_inner=null;this.zpp_inner=new sf;this.zpp_inner.outer=this};g["nape.geom.Vec2List"]=Se;Se.__name__=["nape","geom","Vec2List"];Se.prototype={zpp_gl:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},iterator:function(){this.zpp_vm();return Rd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Se};var Il=function(){this.zpp_inner=null};g["nape.geom.Vec3"]=Il;Il.__name__=["nape","geom","Vec3"];Il.prototype={toString:function(){this.zpp_inner.validate();var a=
"{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:Il};var ng=function(){};g["nape.geom.Winding"]=ng;ng.__name__=["nape","geom","Winding"];ng.prototype={toString:function(){var a;null==f.Winding_UNDEFINED&&(f.internal=!0,f.Winding_UNDEFINED=new ng,f.internal=!1);this==f.Winding_UNDEFINED?a="UNDEFINED":(null==f.Winding_CLOCKWISE&&(f.internal=!0,f.Winding_CLOCKWISE=new ng,f.internal=!1),this==f.Winding_CLOCKWISE?
a="CLOCKWISE":(null==f.Winding_ANTICLOCKWISE&&(f.internal=!0,f.Winding_ANTICLOCKWISE=new ng,f.internal=!1),a=this==f.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:ng};var Sd=function(){this.zpp_inner_i=null};g["nape.phys.Interactor"]=Sd;Sd.__name__=["nape","phys","Interactor"];Sd.prototype={get_userData:function(){null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:
null},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:Sd,__properties__:{get_cbTypes:"get_cbTypes",get_castBody:"get_castBody",get_userData:"get_userData"}};var og=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new Td;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,
b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Bb,f.internal=!1);return f.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(mc.ANY_BODY.zpp_inner)};g["nape.phys.Body"]=og;og.__name__=["nape","phys","Body"];og.__super__=Sd;og.prototype=k(Sd.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");
Td.types[this.zpp_inner.type]!=a&&(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Bb,f.internal=!1),a==f.BodyType_DYNAMIC?a=f.id_BodyType_DYNAMIC:(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Bb,f.internal=!1),a=a==f.BodyType_KINEMATIC?f.id_BodyType_KINEMATIC:f.id_BodyType_STATIC),a==f.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?
this.zpp_inner.space.transmitType(this.zpp_inner,a):this.zpp_inner.type=a);return Td.types[this.zpp_inner.type]},set_isBullet:function(a){this.zpp_inner.bulletEnabled=a;return this.zpp_inner.bulletEnabled},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();
return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},setVelocityFromTarget:function(a,b,c){c=1/c;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();this.zpp_inner.wrap_vel.set(a.sub(function(a){null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();return a.zpp_inner.wrap_pos}(this),!0).muleq(c));this.set_angularVel((b-this.zpp_inner.rot)*c);a.zpp_inner.weak?(a.dispose(),!0):!1;return this},
set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.zpp_inner.rot!=a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.zpp_inner.rot},set_angularVel:function(a){this.zpp_inner.angvel!=a&&(this.zpp_inner.angvel=a,this.zpp_inner.wake());return this.zpp_inner.angvel},set_allowRotation:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));!this.zpp_inner.norotate!=a&&(this.zpp_inner.norotate=!a,this.zpp_inner.invalidate_inertia());
return!this.zpp_inner.norotate},set_mass:function(a){this.zpp_inner.immutable_midstep("Body::mass");this.zpp_inner.massMode=f.id_MassMode_FIXED;this.zpp_inner.cmass=a;this.zpp_inner.invalidate_mass();this.zpp_inner.validate_mass();return this.zpp_inner.cmass},set_gravMassScale:function(a){this.zpp_inner.immutable_midstep("Body::gravMassScale");this.zpp_inner.gravMassMode=f.id_GravMassMode_SCALED;this.zpp_inner.gravMassScale=a;this.zpp_inner.invalidate_gravMassScale();this.zpp_inner.validate_gravMassScale();
return this.zpp_inner.gravMassScale},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass,e=this.zpp_inner,h=this.zpp_inner.velx;a.zpp_inner.validate();e.velx=h+a.zpp_inner.x*d;e=this.zpp_inner;h=this.zpp_inner.vely;a.zpp_inner.validate();e.vely=h+a.zpp_inner.y*d;if(null!=b){var n=0,d=0;b.zpp_inner.validate();n=b.zpp_inner.x-
this.zpp_inner.posx;b.zpp_inner.validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();e=this.zpp_inner;h=this.zpp_inner.angvel;a.zpp_inner.validate();n*=a.zpp_inner.y;a.zpp_inner.validate();e.angvel=h+(n-a.zpp_inner.x*d)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):!1}c||this.zpp_inner.type==f.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==
f.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==f.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:og,__properties__:k(Sd.prototype.__properties__,{set_gravMassScale:"set_gravMassScale",set_mass:"set_mass",set_allowRotation:"set_allowRotation",set_angularVel:"set_angularVel",set_rotation:"set_rotation",get_velocity:"get_velocity",set_position:"set_position",get_position:"get_position",set_isBullet:"set_isBullet",set_type:"set_type"})});var Ud=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.BodyIterator"]=Ud;Ud.__name__=["nape","phys","BodyIterator"];Ud.get=function(a){var b;null==Ud.zpp_pool?(le.internal=!0,b=new Ud,le.internal=!1):(b=Ud.zpp_pool,Ud.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ud.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Ud.zpp_pool;Ud.zpp_pool=this;this.zpp_inner=
null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ud};var Wk=function(){this.zpp_inner=null;this.zpp_inner=new le;this.zpp_inner.outer=this};g["nape.phys.BodyList"]=Wk;Wk.__name__=["nape","phys","BodyList"];Wk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?
this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Ud.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Wk,
__properties__:{get_length:"get_length"}};var Bb=function(){};g["nape.phys.BodyType"]=Bb;Bb.__name__=["nape","phys","BodyType"];Bb.prototype={toString:function(){var a;null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Bb,f.internal=!1);this==f.BodyType_STATIC?a="STATIC":(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Bb,f.internal=!1),this==f.BodyType_DYNAMIC?a="DYNAMIC":(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Bb,f.internal=!1),a=this==f.BodyType_KINEMATIC?
"KINEMATIC":""));return a},__class__:Bb};var Xk=function(){this.zpp_inner=null};g["nape.phys.Compound"]=Xk;Xk.__name__=["nape","phys","Compound"];Xk.__super__=Sd;Xk.prototype=k(Sd.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:Xk});var Vd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.CompoundIterator"]=Vd;Vd.__name__=["nape","phys","CompoundIterator"];Vd.get=function(a){var b;null==Vd.zpp_pool?(we.internal=!0,b=new Vd,
we.internal=!1):(b=Vd.zpp_pool,Vd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Vd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Vd.zpp_pool;Vd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Vd};var Yk=function(){this.zpp_inner=null;this.zpp_inner=new we;this.zpp_inner.outer=this};
g["nape.phys.CompoundList"]=Yk;Yk.__name__=["nape","phys","CompoundList"];Yk.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);
else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=Vd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Yk,__properties__:{get_length:"get_length"}};var Te=function(a,b){null==b&&(b=1);null==a&&(a=1);this.zpp_inner=null;null==Wd.zpp_pool?this.zpp_inner=new Wd:(this.zpp_inner=Wd.zpp_pool,Wd.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=
a/1E3,this.zpp_inner.invalidate());1E3*this.zpp_inner.density;b!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=b/1,this.zpp_inner.invalidate());this.zpp_inner.viscosity};g["nape.phys.FluidProperties"]=Te;Te.__name__=["nape","phys","FluidProperties"];Te.prototype={set_density:function(a){a!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());return 1E3*this.zpp_inner.density},set_viscosity:function(a){a!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=a/
1,this.zpp_inner.invalidate());return this.zpp_inner.viscosity},toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+q.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Te,__properties__:{set_viscosity:"set_viscosity",set_density:"set_density"}};var pg=function(){};g["nape.phys.GravMassMode"]=pg;pg.__name__=["nape","phys","GravMassMode"];pg.prototype={toString:function(){var a;null==f.GravMassMode_DEFAULT&&(f.internal=!0,f.GravMassMode_DEFAULT=
new pg,f.internal=!1);this==f.GravMassMode_DEFAULT?a="DEFAULT":(null==f.GravMassMode_FIXED&&(f.internal=!0,f.GravMassMode_FIXED=new pg,f.internal=!1),this==f.GravMassMode_FIXED?a="FIXED":(null==f.GravMassMode_SCALED&&(f.internal=!0,f.GravMassMode_SCALED=new pg,f.internal=!1),a=this==f.GravMassMode_SCALED?"SCALED":""));return a},__class__:pg};var Si=function(){};g["nape.phys.InertiaMode"]=Si;Si.__name__=["nape","phys","InertiaMode"];Si.prototype={toString:function(){var a;null==f.InertiaMode_DEFAULT&&
(f.internal=!0,f.InertiaMode_DEFAULT=new Si,f.internal=!1);this==f.InertiaMode_DEFAULT?a="DEFAULT":(null==f.InertiaMode_FIXED&&(f.internal=!0,f.InertiaMode_FIXED=new Si,f.internal=!1),a=this==f.InertiaMode_FIXED?"FIXED":"");return a},__class__:Si};var Xd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.phys.InteractorIterator"]=Xd;Xd.__name__=["nape","phys","InteractorIterator"];Xd.get=function(a){var b;null==Xd.zpp_pool?(qg.internal=!0,b=new Xd,qg.internal=
!1):(b=Xd.zpp_pool,Xd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Xd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Xd.zpp_pool;Xd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Xd};var Jl=function(){this.zpp_inner=null};g["nape.phys.InteractorList"]=Jl;Jl.__name__=["nape","phys",
"InteractorList"];Jl.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,
this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Xd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Jl,__properties__:{get_length:"get_length"}};var Ti=function(){};g["nape.phys.MassMode"]=Ti;Ti.__name__=["nape","phys","MassMode"];Ti.prototype={toString:function(){var a;null==f.MassMode_DEFAULT&&
(f.internal=!0,f.MassMode_DEFAULT=new Ti,f.internal=!1);this==f.MassMode_DEFAULT?a="DEFAULT":(null==f.MassMode_FIXED&&(f.internal=!0,f.MassMode_FIXED=new Ti,f.internal=!1),a=this==f.MassMode_FIXED?"FIXED":"");return a},__class__:Ti};var me=function(){this.zpp_inner_i=this.zpp_inner=null};g["nape.shape.Shape"]=me;me.__name__=["nape","shape","Shape"];me.__super__=Sd;me.prototype=k(Sd.prototype,{set_localCOM:function(a){this.zpp_inner.immutable_midstep("Body::localCOM");null==this.zpp_inner.wrap_localCOM&&
(this.zpp_inner.type==f.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());this.zpp_inner.wrap_localCOM.set(a);null==this.zpp_inner.wrap_localCOM&&(this.zpp_inner.type==f.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());return this.zpp_inner.wrap_localCOM},set_fluidProperties:function(a){this.zpp_inner.setFluid(a.zpp_inner);this.zpp_inner.immutable_midstep("Shape::fluidProperties");null==this.zpp_inner.fluidProperties&&
this.zpp_inner.setFluid((new Te).zpp_inner);return this.zpp_inner.fluidProperties.wrapper()},set_sensorEnabled:function(a){this.zpp_inner.immutable_midstep("Shape::sensorEnabled");this.zpp_inner.sensorEnabled=a;this.zpp_inner.wake();return this.zpp_inner.sensorEnabled},rotate:function(a){this.zpp_inner.immutable_midstep("Shape::rotate()");if(0!=a%(2*Math.PI)){var b=Math.cos(a),a=Math.sin(a);this.zpp_inner.type==f.id_ShapeType_CIRCLE?this.zpp_inner.circle.__rotate(a,b):this.zpp_inner.polygon.__rotate(a,
b)}return this},toString:function(){return(this.zpp_inner.type==f.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:me,__properties__:k(Sd.prototype.__properties__,{set_sensorEnabled:"set_sensorEnabled",set_fluidProperties:"set_fluidProperties",set_localCOM:"set_localCOM"})});var Vi=function(a,b,c,d){this.zpp_inner_zn=null;me.call(this);this.zpp_inner_zn=new Ui;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=
this;this.zpp_inner.immutable_midstep("Circle::radius");a!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());this.zpp_inner_zn.radius;null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0):(b.zpp_inner.validate(),this.zpp_inner.localCOMx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.localCOMy=b.zpp_inner.y,b.zpp_inner.weak?(b.dispose(),!0):!1);null==c?(null==ga.zpp_pool?this.zpp_inner.material=new ga:(this.zpp_inner.material=ga.zpp_pool,ga.zpp_pool=
this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(c.zpp_inner),this.zpp_inner.material.wrapper());null==d?(null==ib.zpp_pool?this.zpp_inner.filter=new ib:(this.zpp_inner.filter=ib.zpp_pool,ib.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(d.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(mc.ANY_SHAPE.zpp_inner)};
g["nape.shape.Circle"]=Vi;Vi.__name__=["nape","shape","Circle"];Vi.__super__=me;Vi.prototype=k(me.prototype,{__class__:Vi});var Zk=function(){this.zpp_inner=null};g["nape.shape.Edge"]=Zk;Zk.__name__=["nape","shape","Edge"];Zk.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();
return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:Zk};var od=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.shape.EdgeIterator"]=od;od.__name__=["nape","shape","EdgeIterator"];od.get=function(a){var b;null==od.zpp_pool?(rg.internal=!0,b=new od,rg.internal=!1):(b=od.zpp_pool,od.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};od.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=od.zpp_pool;od.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:od};var Kl=function(){this.zpp_inner=null};g["nape.shape.EdgeList"]=Kl;Kl.__name__=["nape","shape","EdgeList"];Kl.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;
return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=od.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Kl,__properties__:{get_length:"get_length"}};var Cc=function(a,b,c){this.zpp_inner_zn=null;me.call(this);this.zpp_inner_zn=new Wi;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;
this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=a[d];++d;var h=e;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(ra.get(function(){h.zpp_inner.validate();return h.zpp_inner.x}(this),function(){h.zpp_inner.validate();return h.zpp_inner.y}(this),!1))}else if(X.__instanceof(a,Se))for(d=a.iterator();d.hasNext();){var n;d.zpp_critical=!1;n=d.zpp_inner.at(d.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&
this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(ra.get(function(){n.zpp_inner.validate();return n.zpp_inner.x}(this),function(){n.zpp_inner.validate();return n.zpp_inner.y}(this),!1))}else if(X.__instanceof(a,Vk)&&(d=a.zpp_inner.vertices,null!=d)){e=d;do{var f=ra.get(e.x,e.y,null),e=e.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(ra.get(function(){f.zpp_inner.validate();return f.zpp_inner.x}(this),function(){f.zpp_inner.validate();
return f.zpp_inner.y}(this),!1));f.dispose()}while(e!=d)}if(a instanceof Array&&null==a.__enum__)for(d=0;d<a.length;){var e=a[d],g;if(g=e.zpp_inner.weak)e.dispose(),g=!0;g?a.splice(d,1):d++}else if(X.__instanceof(a,Se)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;d=null;for(e=a.head;null!=e;)g=e.elt,g.outer.zpp_inner.weak?(e=a.erase(d),g.outer.zpp_inner.weak?(g.outer.dispose(),!0):!1):(d=e,e=e.next)}null==b?(null==ga.zpp_pool?this.zpp_inner.material=new ga:(this.zpp_inner.material=
ga.zpp_pool,ga.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==ib.zpp_pool?this.zpp_inner.filter=new ib:(this.zpp_inner.filter=ib.zpp_pool,ib.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());
this.zpp_inner_i.insert_cbtype(mc.ANY_SHAPE.zpp_inner)};g["nape.shape.Polygon"]=Cc;Cc.__name__=["nape","shape","Polygon"];Cc.rect=function(a,b,c,d,e){null==e&&(e=!1);return[ra.get(a,b,e),ra.get(a+c,b,e),ra.get(a+c,b+d,e),ra.get(a,b+d,e)]};Cc.box=function(a,b,c){null==c&&(c=!1);return Cc.rect(-a/2,-b/2,a,b,c)};Cc.regular=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);for(var h=[],n=2*Math.PI/c,f=0;f<c;){var g=f++*n+d,g=ra.get(Math.cos(g)*a,Math.sin(g)*b,e);h.push(g)}return h};Cc.__super__=me;Cc.prototype=
k(me.prototype,{__class__:Cc});var Ed=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};g["nape.shape.ShapeIterator"]=Ed;Ed.__name__=["nape","shape","ShapeIterator"];Ed.get=function(a){var b;null==Ed.zpp_pool?(Fd.internal=!0,b=new Ed,Fd.internal=!1):(b=Ed.zpp_pool,Ed.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ed.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<
a)return!0;this.zpp_next=Ed.zpp_pool;Ed.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ed};var $k=function(){this.zpp_inner=null;this.zpp_inner=new Fd;this.zpp_inner.outer=this};g["nape.shape.ShapeList"]=$k;$k.__name__=["nape","shape","ShapeList"];$k.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=
null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},pop:function(){this.zpp_inner.modify_test();
this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2),a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);
this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b;b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);
this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=
c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Ed.get(this);c.hasNext();){var d;c.zpp_critical=!1;
d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:$k,__properties__:{get_length:"get_length"}};var Xi=function(){};g["nape.shape.ShapeType"]=Xi;Xi.__name__=["nape","shape","ShapeType"];Xi.prototype={toString:function(){var a;null==f.ShapeType_CIRCLE&&(f.internal=!0,f.ShapeType_CIRCLE=new Xi,f.internal=!1);this==f.ShapeType_CIRCLE?a="CIRCLE":(null==f.ShapeType_POLYGON&&(f.internal=!0,f.ShapeType_POLYGON=new Xi,f.internal=!1),a=this==f.ShapeType_POLYGON?
"POLYGON":"");return a},__class__:Xi};var tf=function(){};g["nape.shape.ValidationResult"]=tf;tf.__name__=["nape","shape","ValidationResult"];tf.prototype={toString:function(){var a;null==f.ValidationResult_VALID&&(f.internal=!0,f.ValidationResult_VALID=new tf,f.internal=!1);this==f.ValidationResult_VALID?a="VALID":(null==f.ValidationResult_DEGENERATE&&(f.internal=!0,f.ValidationResult_DEGENERATE=new tf,f.internal=!1),this==f.ValidationResult_DEGENERATE?a="DEGENERATE":(null==f.ValidationResult_CONCAVE&&
(f.internal=!0,f.ValidationResult_CONCAVE=new tf,f.internal=!1),this==f.ValidationResult_CONCAVE?a="CONCAVE":(null==f.ValidationResult_SELF_INTERSECTING&&(f.internal=!0,f.ValidationResult_SELF_INTERSECTING=new tf,f.internal=!1),a=this==f.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")));return a},__class__:tf};var uf=function(){};g["nape.space.Broadphase"]=uf;uf.__name__=["nape","space","Broadphase"];uf.prototype={toString:function(){var a;null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=
!0,f.Broadphase_DYNAMIC_AABB_TREE=new uf,f.internal=!1);this==f.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==f.Broadphase_SWEEP_AND_PRUNE&&(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new uf,f.internal=!1),a=this==f.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:uf};var bl=function(a,b){this.zpp_inner=null;this.zpp_inner=new al(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};g["nape.space.Space"]=bl;bl.__name__=
["nape","space","Space"];bl.prototype={get_gravity:function(){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},set_gravity:function(a){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();this.zpp_inner.wrap_gravity.set(a);null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},clear:function(){this.zpp_inner.clear()},step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,c)},
__class__:bl,__properties__:{set_gravity:"set_gravity",get_gravity:"get_gravity"}};var aa=function(a,b){null==b&&(b=!0);null==a&&(a=!1);j.call(this);ta.init();Xb.setupBaseURL();A.onManifestInit.connect(aa.onManifestInit);u.root.add(new vh);a&&(b?u.root.add(new xa(r.gameWidth,r.gameHeight)):(aa.autoScaleEnabled=!0,u.root.add(new s),u.root.add(new hb)))};g["nick.NickUtils"]=aa;aa.__name__=["nick","NickUtils"];aa.configure=function(a){if(null==a.nick)throw"No nick section found in config.json";if(null==
a.nick.url)throw"nick.url not set in config.json";if(null!=a.nick.url&&-1<a.nick.url.indexOf("GAME_PAGE.html"))throw"nick.url requires actual game url (should not be GAME_PAGE)";a=va;if(""==a.REDIRECT_URL||null==a.REDIRECT_URL)throw"Please call AntiPiracy.checkPiracy(GameData.config.nick.url) before NickUtils.configure!";if(null!=a.DOMAIN_LIST)for(var b=0,c=aa.staging;b<c.length;){var d=c[b];++b;a.DOMAIN_LIST.push(d)}aa.setupSdkListeners()};aa.onManifestInit=function(a,b){Xb.setupManifest(b)};aa.initDeltaDNA=
function(a,b){var c=a.delta_dna;w.allowLiveKey=!0==c.allowLiveKey;w.staging=aa.staging;var d=a.nick.url;null!=a.version&&(w.clientVersion=a.version);null!=c.platforms&&w.setPlatforms(c.platforms);w.onReady.connect(b).once();w.init(d,c.key_dev,c.key_live,c.collect,c.engage)};aa.setupSdkListeners=function(){za.onAudioToggle=aa.onAudioToggle;za.onPlaybackToggle=aa.onPlaybackToggle};aa.onAudioToggle=function(a){aa.onMute.emit(a)};aa.onPlaybackToggle=function(a){a?aa.onResume.emit():aa.onPause.emit()};
aa.__super__=j;aa.prototype=k(j.prototype,{get_name:function(){return"NickUtils_0"},onUpdate:function(){aa.autoScaleEnabled&&r.setScale(hb.SCALE)},__class__:aa});var va=function(){};g["nicksdk.AntiPiracy"]=va;va.__name__=["nicksdk","AntiPiracy"];va.checkPiracy=function(a){null==a&&(a="");var b;b=of.decode("aHR0cDovL3d3dy5uaWNrLmNvbS9uaWNrLWFzc2V0cy9nYW1lcy9uaWNrX2RvbWFpbi9OaWNrRG9tYWluLmpzb24=").toString();va.REDIRECT_URL=a;""==va.REDIRECT_URL&&(va.REDIRECT_URL="http://www.nick.com/games/");Ld.sendGameEvent("Check AntiPiracy : ",
va.REDIRECT_URL);ic.eval("eval",["window.getDomains = function(data) {eval('list=data.domains');}"]);ic.eval("eval",["window.getList = function() {return list;}"]);va.eval("var script = document.createElement('script');script.src = \""+b+'",document.body.insertBefore(script, document.body.firstChild);');yd.delay(function(){for(var a=null,a=ic.eval("getList"),a=X.__cast(a,Array),b=0;b<a.length;){var e=a[b];++b;va.DOMAIN_LIST.push(e)}va.startCheck()},va.GET_DOMAINS_DELAY)};va.startCheck=function(){va.debug("startCheck()");
var a="",b=a="",c=!1,d=!0,a=window.location.host;try{b=window.parent.location.host}catch(e){c=!0}b!=a&&(c=!0);va.debug("childURL : "+a);va.debug("parentURL : "+b);va.debug("isiFrameCrossDomain : "+(null==c?"null":""+c));if(c)d=!0;else{b=0;for(c=va.DOMAIN_LIST;b<c.length;){var h=c[b];++b;if((new Pb(h,"i")).match(a)){d=!1;break}}}d?(va.debug("redirect"),yd.delay(va.redirect,va.REDIRECT_DELAY)):va.debug("do not redirect")};va.redirect=function(){window.top.location.replace(va.REDIRECT_URL)};va.eval=
function(a){ic.eval("eval",["void (function() {"+a+"}())"])};va.debug=function(){};var ic=function(){this.isDirty=!1;this.eventQueue=new pe;this.debugMode=!1;this.modules=[];this.gameObj={majorversion:1,minorversion:0.4,apiversion:1};za.init(this);Ld.init(this);this.initializeBridge()};g["nicksdk.SDK"]=ic;ic.__name__=["nicksdk","SDK"];ic.eval=function(a,b){null==b&&(b=[]);for(var c=null,d=null,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=null==c?y.field(window,n):y.field(c,n)}return d.apply(c,
b)};ic.prototype={onException:function(a){try{this.queueEvent("error",{msg:a,callstack:Ac.toString(Ac.callStack()),exceptionstack:Ac.toString(Ac.exceptionStack())})}catch(b){this.queueEvent("error",{msg:a})}},initializeBridge:function(){try{this.queueEvent("init",{js:za.executeWebRequest})}catch(a){null}},setDebugMode:function(a){(this.debugMode=a)?this.gameObj.debugmode=!0:y.deleteField(this.gameObj,"debugmode");this.isDirty=!0;for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setDebugMode(a)}},
queueEvent:function(a,b){b.eventName=a;y.setField(b,"timestamp",(new Date).getTime());this.eventQueue.add(b);this.flush_events();this.sync_state()},onUpdate:function(a){var b=this.isDirty;this.isDirty=!1;for(var c=0,d=this.modules;c<d.length;){var e=d[c];++c;b=b||e.update(a)}0<this.eventQueue.length&&(b=!0,this.flush_events());b&&this.sync_state()},flush_events:function(){for(;0<this.eventQueue.length;)ic.output_event_array.push(this.eventQueue.pop())},sync_state:function(){try{ic.eval("nsdk_expose",
[this.gameObj,ic.output_event_array]),ic.output_event_array.length=0}catch(a){null}},log:function(a,b){this.debugMode&&this.queueEvent("log",{id:a,msg:b})},__class__:ic};var Ll=function(){};g["nicksdk.SDKModule"]=Ll;Ll.__name__=["nicksdk","SDKModule"];Ll.prototype={__class__:Ll};var Ld=function(){};g["nicksdk.event.GameEventEmitter"]=Ld;Ld.__name__=["nicksdk","event","GameEventEmitter"];Ld.init=function(a){Ld.sdk=a};Ld.sendGameEvent=function(a,b){Ld.callExternal(a,b)};Ld.callExternal=function(a,b){if(null!=
Ld.sdk)Ld.sdk.queueEvent(a,{params:b});else throw"SDK not initialized!";};var za=function(){};g["nicksdk.event.GameEventListener"]=za;za.__name__=["nicksdk","event","GameEventListener"];za.init=function(a){za.sdk=a};za.executeWebRequest=function(a){za.AssertType(a,N.TObject);if(null==a.name)return!1;switch(a.name){case "toggleaudio":za.AssertParameter(a,"enable",N.TBool);if(null!=za.onAudioToggle)return za.onAudioToggle(a.enable),!0;za.sdk.log("SDKGameEventListener","Audio Toggle is not implemented.");
break;case "toggleplayback":za.AssertParameter(a,"enable",N.TBool);if(null!=za.onPlaybackToggle)return za.onPlaybackToggle(a.enable),!0;za.sdk.log("SDKGameEventListener","Playback Toggle is not implemented.");break;case "togglesuspend":za.AssertParameter(a,"enable",N.TBool);if(null!=za.onSuspendToggle)za.onSuspendToggle(a.enable);else za.sdk.log("SDKGameEventListener","Suspend Toggle is not implemented.");break;case "toggledebug":za.AssertParameter(a,"enable",N.TBool);if(null!=za.onDebugModeToggle)za.onDebugModeToggle(a.enable);
else za.sdk.log("SDKGameEventListener","Debug Mode Toggle is not implemented.");if(null!=za.sdk)return za.sdk.setDebugMode(a.enable),!0;break;default:za.sdk.log("SDKGameEventListener","Unknown function")}return!1};za.AssertType=function(a,b){var c=ca["typeof"](a);if(c!=b)throw c="TypeCheck: Object {"+q.string(a)+"} was of type {"+q.string(c)+"}. Expected type {"+q.string(b)+"}",null!=za.sdk&&za.sdk.log("SDKGameEventListener",c),c;};za.AssertParameter=function(a,b,c){if(Object.prototype.hasOwnProperty.call(a,
b))a=y.field(a,b),za.AssertType(a,c);else throw c="ParameterCheck: Parameter {"+b+"} of type{"+q.string(c)+"} does not exist!",null!=za.sdk&&za.sdk.log("SDKGameEventListener",c),c;};var F=function(){};g["stolo.animation.Animate"]=F;F.__name__=["stolo","animation","Animate"];F.delayCallTo=function(a,b,c){if(0>=b)return a(),null;null==c&&(c=u.root);var d=c._compMap.Script_28;null==d&&(d=new Sb,c.add(d));a=new Ra([new Oa(b),new ab(a)]);d.run(a);return a};F.kill=function(a){F.removeSequence(a)};F.killAll=
function(){for(var a=F.tweens.iterator();a.hasNext();)a.next().dispose();F.tweens=new db};F.removeSequence=function(a){if(null!=F.tweens.h.__keys__[a.__id__]){var b=F.tweens.h[a.__id__];F.tweens.remove(a);b.dispose()}};F.to=function(a,b,c,d){if(null==a)return null;c=F.checkTweenParams(c,d);F.kill(a);d=new sg(a,c.entity,c.delay);d.to(b,c.time,c.ease,0,c.origin);F.tweens.set(a,d);d.addListener(d.onStart,c.onStart);d.run(null,c.onComplete);return d};F.from=function(a,b,c,d){if(null==a)return null;c=
F.checkTweenParams(c,d);F.kill(a);d=new sg(a,c.entity,c.delay);d.from(b,c.time,c.ease,0,c.origin);F.tweens.set(a,d);d.addListener(d.onStart,c.onStart);d.run(null,c.onComplete);return d};F.checkTweenParams=function(a,b){0<a&&(a={time:a});null==a&&(a={});null==a.time&&(a.time=F.DefaultTime);null!=b&&(a.ease=b);null==a.ease&&(a.ease=F.DefaultEase);return a};F.runTemplate=function(a,b,c){for(var d=null,e=0;e<a.length;){var h=a[e];++e;if(null!=h.then){if(null==d)throw"'then' can be used only after 'to' or 'from' sequences";
d.then(h.then,h.time,h.ease,h.delay,null!=c?c.origin:null)}else if(null!=h.to||null!=h.from)if(null!=c?(d={time:h.time,ease:h.ease},d.delay=c.delay,d.onStart=c.onStart,d.onComplete=c.onComplete,d.origin=c.origin):d=h,null!=h.to)d=F.to(b,h.to,d);else if(null!=h.from)d=F.from(b,h.from,d);else throw"Unsupported tween data:"+q.string(h);else null!=h.delay&&0<h.delay&&d.addDelay(h.delay)}return d};var vl=function(){};g["stolo.animation.Animations"]=vl;vl.__name__=["stolo","animation","Animations"];var Ib=
function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=new Q(a);this.y=new Q(b);this.z=new Q(c)};g["stolo.animation.behaviors.AnimatedPoint"]=Ib;Ib.__name__=["stolo","animation","behaviors","AnimatedPoint"];Ib.__interfaces__=[Ie];Ib.prototype={dispose:function(){this.z=this.y=this.x=null},update:function(a){this.x.update(a);this.y.update(a);this.z.update(a);return 0},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()||
null!=this.z._behavior&&!this.z._behavior.isComplete()?!1:!0},__class__:Ib};var cg=function(a){this.rect=null!=a?X.__instanceof(a,s)?this.maskSprite(a):a:new yb(0,0,0,0);this.x=new Q(this.rect.x);this.y=new Q(this.rect.y);this.width=new Q(this.rect.width);this.height=new Q(this.rect.height)};g["stolo.animation.behaviors.AnimatedRect"]=cg;cg.__name__=["stolo","animation","behaviors","AnimatedRect"];cg.__interfaces__=[Ie];cg.prototype={maskSprite:function(a){return this.rect=a.scissor=new yb(0,0,a.getNaturalWidth(),
a.getNaturalHeight())},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);null!=this.rect&&(this.rect.x=this.x._value,this.rect.y=this.y._value,this.rect.width=this.width._value,this.rect.height=this.height._value);return 0},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()||null!=this.width._behavior&&!this.width._behavior.isComplete()||null!=this.height._behavior&&
!this.height._behavior.isComplete()?!1:!0},__class__:cg};var oc=function(a,b){null==b&&(b=0);this.currentIndex=0;this._disposables=new bb;this.onComplete=new pa;this.onStart=new pa;this.isRunning=this.isPaused=!1;Ra.call(this);null!=a&&(this._entity=a);this.setDelay(b);this.add(new ab((cb=this.onStart,l(cb,cb.emit))))};g["stolo.animation.sequences.AnimationSequence"]=oc;oc.__name__=["stolo","animation","sequences","AnimationSequence"];oc.__super__=Ra;oc.prototype=k(Ra.prototype,{dispose:function(){this._ownScript&&
null!=this._script&&(null!=this._script.owner&&this._script.owner.dispose(),this._script.stopAll(),this._script.dispose());this.onComplete=this.onStart=this._entity=this._script=null;this.isRunning=!1;this.removeAll();null!=this._disposables&&this._disposables.dispose();this._disposables=null},update:function(a,b){if(this.isPaused)return-1;var c=Ra.prototype.update.call(this,a,b);this.currentIndex=this._idx;return c},add:function(a){if(this.isRunning){var b=this._runningActions.pop();Ra.prototype.add.call(this,
a);Ra.prototype.add.call(this,b)}else Ra.prototype.add.call(this,a)},setDelay:function(a){return this.addDelay(a)},addDelay:function(a){null==a&&(a=0);if(0>=a)return this;this.add(new Oa(a));return this},run:function(a,b){null!=a&&(this._entity=a);this.currentIndex=this._idx=0;this._ownScript=!0;this._script=new Sb;this._entity.addChild((new o).add(this._script));this.add(new ab(l(this,this.complete)));null!=b&&this.addListener(this.onComplete,b);this.isRunning=!0;this._script.run(this);return this},
addListener:function(a,b){null!=b&&this._disposables.add(a.connect(b))},complete:function(){this.isRunning=!1;this._ownScript&&null!=this._script&&this._script.stopAll();null!=this.onComplete&&this.onComplete.emit();this.dispose()},__class__:oc});var Zb=function(a,b){null==b&&(b=0);oc.call(this,a,b)};g["stolo.animation.sequences.RelativeSequence"]=Zb;Zb.__name__=["stolo","animation","sequences","RelativeSequence"];Zb.__super__=oc;Zb.prototype=k(oc.prototype,{init:function(a,b,c,d,e){null==e&&(e=0);
null==d&&(d=!1);null==c&&(c=!0);Zb.lastDest=null;this.appendActions(a,b);d&&(a=a.reverse(),a.shift(),this.appendActions(a,b),this.appendActions([{x:0,y:0}],b));(c||d)&&this.appendActions([{x:0,y:0}],b);0<e&&this.add(new Oa(e));return this},appendActions:function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;Object.prototype.hasOwnProperty.call(d,"delay")&&this.add(new Oa(d.delay));var e=Object.prototype.hasOwnProperty.call(d,"x"),h=Object.prototype.hasOwnProperty.call(d,"y");e&&h&&(e=new La(d.x+b.offsetX,
d.y+b.offsetY),this.add(this.getMovementAction(d,b.x,b.y,e,Zb.lastDest,b)),Zb.lastDest=e)}return this},getMovementAction:function(a,b,c,d,e,h){var n=Zb.DefaultMoveSpeed,f=Zb.DefaultMovePPS,g=Zb.DefaultMoveEase,i=Zb.DefaultMoveTime,j=!1;0<a.time?i=a.time:j=!0;0<a.pps&&(f=a.pps);0<a.speed&&(n=a.speed);j&&(a=null!=e?Math.abs(e.x-d.x)+Math.abs(e.y-d.y):Math.abs(b._value-d.x)+Math.abs(c._value-d.y),i=a/f-0.1*(a/f)*n,0>=i&&(i=Zb.DefaultMoveTime));null!=h&&null!=h.ease&&(g=h.ease);return new fb([new hc(b,
d.x,i,g),new hc(c,d.y,i,g)])},__class__:Zb});var sg=function(a,b,c){null==c&&(c=0);this._target=a;this._entity=b;null==b&&(b=a.owner);null==b&&(b=u.root);oc.call(this,b,c)};g["stolo.animation.sequences.TweenSequence"]=sg;sg.__name__=["stolo","animation","sequences","TweenSequence"];sg.__super__=oc;sg.prototype=k(oc.prototype,{dispose:function(){oc.prototype.dispose.call(this);null!=this._target&&(null!=F.tweens.h.__keys__[this._target.__id__]&&F.tweens.remove(this._target),this._target=null)},to:function(a,
b,c,d,e){null==d&&(d=0);null==c&&(c=F.DefaultEase);if(0>b||null==b)b=F.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!1,e));return this},from:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=F.DefaultEase);if(0>b||null==b)b=F.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!0,e));return this},then:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=F.DefaultEase);if(0>b||null==b)b=F.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!1,e));return this},getActions:function(a,
b,c,d,e){null==d&&(d=!1);for(var h=[],n,f,g=0,i=y.fields(a);g<i.length;){var j=i[g];++g;n=y.field(this._target,j);if(null==n)throw"Cannot find property '"+j+"' to animate";var k=y.field(a,j);f=n._value;null!=e&&Object.prototype.hasOwnProperty.call(e,j)&&(f=y.field(e,j));"string"==typeof k&&(k=U.mod(f,k));d&&(n.set__(k),k=f);h.push(new hc(n,k,b,c))}return new fb(h)},__class__:sg});var Dc=function(){this._isDirty=!1;this._children=[];this.depthSorter=new cl;s.call(this)};g["stolo.display.Container"]=
Dc;Dc.__name__=["stolo","display","Container"];Dc.__super__=s;Dc.prototype=k(s.prototype,{onStop:function(){s.prototype.onStop.call(this);this._children=null},onUpdate:function(){this._isDirty&&this.sortDepth()},addChild:function(a){this._children.push(a);this.owner.addChild(a);return a},removeChild:function(a){M.remove(this._children,a);this.owner.removeChild(a);return a},setChildIndex:function(a,b){return 0<=b&&b<=this._children.length&&a.parent==this.owner?(M.remove(this._children,a),this._children.splice(b,
0,a),this._isDirty=!0,a):null},getChildIndex:function(a){for(var b=0,c=this._children.length;b<c;){var d=b++;if(this._children[d]==a)return d}return-1},sortDepth:function(){this.depthSorter.reorder(this._children,this.owner);this._isDirty=!1},bringToFront:function(a){this.owner.addChild(a);M.remove(this._children,a);this._children.push(a)},sendToBack:function(a){this.owner.addChild(a,!1);M.remove(this._children,a);this._children.unshift(a)},__class__:Dc});var cl=function(){};g["stolo.display.DepthSorter"]=
cl;cl.__name__=["stolo","display","DepthSorter"];cl.prototype={reorder:function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;b.addChild(d)}},__class__:cl};var Yi=function(a,b){null==b&&(b=2);null==a&&(a=16711680);Da.call(this,a,100,b)};g["stolo.display.Line"]=Yi;Yi.__name__=["stolo","display","Line"];Yi.__super__=Da;Yi.prototype=k(Da.prototype,{fromTo:function(a,b,c,d){this.gap=O.gap(a,b,c,d,this.gap);this.setXY(this.gap.x,this.gap.y);this.scaleX.set__(this.gap.width/100);this.rotation.set__(this.gap.rotation)},
__class__:Yi});var Zi=function(){this.skewX=this.skewY=0;j.call(this)};g["stolo.display.Skew"]=Zi;Zi.__name__=["stolo","display","Skew"];Zi.__super__=j;Zi.prototype=k(j.prototype,{get_name:function(){return"Skew_40"},dispose:function(){j.prototype.dispose.call(this);this._sprite=null},onStart:function(){j.prototype.onStart.call(this);this._sprite=this.owner._compMap.Sprite_5},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(null!=this._sprite){var a=this._sprite.getLocalMatrix(),b=0,c=1,
d=0,e=1,h=-3.141592653589793*this.skewX/180,n=3.141592653589793*this.skewY/180;0!=h&&(b=Math.sin(h),c=Math.cos(h));0!=n&&(d=Math.sin(n),e=Math.cos(n));a.set(e*this._sprite.scaleX._value,d*this._sprite.scaleX._value,-b*this._sprite.scaleY._value,c*this._sprite.scaleY._value,a.m02,a.m12)}},__class__:Zi});var pc=g["stolo.display.particles.EmitterType"]={__ename__:["stolo","display","particles","EmitterType"],__constructs__:["Gravity","Radial"]};pc.Gravity=["Gravity",0];pc.Gravity.toString=p;pc.Gravity.__enum__=
pc;pc.Radial=["Radial",1];pc.Radial.toString=p;pc.Radial.__enum__=pc;var kb=function(a,b){this.direction=1;this.tangentialAccelVariance=new Q(0);this.tangentialAccel=new Q(0);this.radialAccelVariance=new Q(0);this.radialAccel=new Q(0);this.speedVariance=new Q(0);this.speed=new Q(0);this.sizeEndVariance=new Q(0);this.sizeEnd=new Q(0);this.sizeStartVariance=new Q(0);this.sizeStart=new Q(0);this.rotationEndVariance=new Q(0);this.rotationEnd=new Q(0);this.rotationStartVariance=new Q(0);this.rotationStart=
new Q(0);this.rotatePerSecondVariance=new Q(0);this.rotatePerSecond=new Q(0);this.lifespan=new Q(0);this.lifespanVariance=new Q(0);this.minRadius=new Q(0);this.maxRadiusVariance=new Q(0);this.maxRadius=new Q(0);this.gravityY=new Q(0);this.gravityX=new Q(0);this.angleVariance=new Q(0);this.angle=new Q(0);this.alphaEndVariance=new Q(0);this.alphaEnd=new Q(0);this.alphaStartVariance=new Q(0);this.alphaStart=new Q(0);this.emitYVariance=new Q(0);this.emitY=new Q(0);this.emitXVariance=new Q(0);this.emitX=
new Q(0);this.enabled=!0;this.emitElapsed=this.totalElapsed=this.numParticles=this.duration=0;null!=a&&null!=b&&ba.setEmitter(this,a,b);s.call(this)};g["stolo.display.particles.Emitter"]=kb;kb.__name__=["stolo","display","particles","Emitter"];kb.random=function(a,b){0!=b&&(a+=b*(2*Math.random()-1));return a};kb.__super__=s;kb.prototype=k(s.prototype,{onAdded:function(){this.build()},build:function(){this.particles=Array(this._maxParticles);for(var a=0,b=this.particles.length;a<b;)this.particles[a]=
new $i,++a},onUpdate:function(a){s.prototype.onUpdate.call(this,a);this.alphaEnd.update(a);this.alphaEndVariance.update(a);this.alphaStart.update(a);this.alphaStartVariance.update(a);this.angle.update(a);this.angleVariance.update(a);this.emitX.update(a);this.emitXVariance.update(a);this.emitY.update(a);this.emitYVariance.update(a);this.gravityX.update(a);this.gravityY.update(a);this.lifespan.update(a);this.lifespanVariance.update(a);this.maxRadius.update(a);this.maxRadiusVariance.update(a);this.minRadius.update(a);
this.radialAccel.update(a);this.radialAccelVariance.update(a);this.rotatePerSecond.update(a);this.rotatePerSecondVariance.update(a);this.rotationEnd.update(a);this.rotationEndVariance.update(a);this.rotationStart.update(a);this.rotationStartVariance.update(a);this.sizeEnd.update(a);this.sizeEndVariance.update(a);this.sizeStart.update(a);this.sizeStartVariance.update(a);this.speed.update(a);this.speedVariance.update(a);this.tangentialAccel.update(a);this.tangentialAccelVariance.update(a);for(var b=
this.type==pc.Gravity,c=0;c<this.numParticles;){var d=this.particles[c];if(d.life>a){if(b){d.x+=d.velX*a;d.y+=d.velY*a;var e=this.gravityX._value,h=-this.gravityY._value;if(0!=d.radialAccel||0!=d.tangentialAccel)var n=d.x-d.emitX,f=d.y-d.emitY,g=Math.sqrt(n*n+f*f),n=n/g,f=f/g,e=e+n*d.radialAccel,h=h+f*d.radialAccel,g=n,e=e+-f*d.tangentialAccel,h=h+g*d.tangentialAccel;d.velX+=e*a;d.velY+=h*a}else d.radialRotation+=d.velRadialRotation*a,d.radialRadius+=d.velRadialRadius*a,e=d.radialRadius,d.x=this.emitX._value-
Math.cos(d.radialRotation)*e,d.y=this.emitY._value-Math.sin(d.radialRotation)*e,e<this.minRadius._value&&(d.life=0);d.scale+=d.velScale*a;d.rotation+=d.velRotation*a;d.alpha+=d.velAlpha*a;d.life-=a;++c}else--this.numParticles,c!=this.numParticles&&(this.particles[c]=this.particles[this.numParticles],this.particles[this.numParticles]=d)}if(this.enabled){if(0<this.duration&&(this.totalElapsed+=a,this.totalElapsed>=this.duration)){this.enabled=!1;return}b=this.lifespan._value/this.particles.length;for(this.emitElapsed+=
a;this.emitElapsed>=b;)this.numParticles<this.particles.length&&this.initParticle(this.particles[this.numParticles])&&++this.numParticles,this.emitElapsed-=b}},draw:function(a){for(var b=0,c=this.numParticles;b<c;){var d=this.particles[b];a.save();a.translate(d.x,d.y);d.draw(a);a.restore();++b}},getRandomTexture:function(){return 1>=this.textures.length?this.textures[0]:this.textures[Math.floor(Math.random()*this.textures.length)]},getRandomColor:function(){return null==this.colors?16777215:1>=this.colors.length?
this.colors[0]:this.colors[Math.round(Math.random()*this.colors.length)]},initParticle:function(a){a.life=kb.random(this.lifespan._value,this.lifespanVariance._value);if(0>=a.life)return!1;a.emitX=this.emitX._value;a.emitY=this.emitY._value;var b=-zb.toRadians(kb.random(this.angle._value,this.angleVariance._value)),c=kb.random(this.speed._value,this.speedVariance._value)*this.direction;a.velX=c*Math.cos(b);a.velY=c*Math.sin(b);a.radialAccel=kb.random(this.radialAccel._value,this.radialAccelVariance._value);
a.tangentialAccel=kb.random(this.tangentialAccel._value,this.tangentialAccelVariance._value);a.radialRadius=kb.random(this.maxRadius._value,this.maxRadiusVariance._value);a.velRadialRadius=-a.radialRadius/a.life;a.radialRotation=b;a.velRadialRotation=zb.toRadians(kb.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value));this.type==pc.Gravity?(a.x=kb.random(this.emitX._value,this.emitXVariance._value),a.y=kb.random(this.emitY._value,this.emitYVariance._value)):(b=a.radialRadius,a.x=
this.emitX._value-Math.cos(a.radialRotation)*b,a.y=this.emitY._value-Math.sin(a.radialRotation)*b);null!=this.textures&&0<this.textures.length?(a.texture=this.getRandomTexture(a),a.width=a.texture.get_width(),a.height=a.texture.get_height()):(a.color=this.getRandomColor(a),a.width=0<this.particleWidth?this.particleWidth:this.particleHeight,a.height=0<this.particleHeight?this.particleHeight:this.particleWidth);c=a.width;a.offsetX=-a.width/2;a.offsetY=-a.height/2;b=kb.random(this.sizeStart._value,this.sizeStartVariance._value)/
c;c=kb.random(this.sizeEnd._value,this.sizeEndVariance._value)/c;a.scale=b;a.velScale=(c-b)/a.life;b=kb.random(this.rotationStart._value,this.rotationStartVariance._value);c=kb.random(this.rotationEnd._value,this.rotationEndVariance._value);a.rotation=b;a.velRotation=(c-b)/a.life;b=kb.random(this.alphaStart._value,this.alphaStartVariance._value);c=kb.random(this.alphaEnd._value,this.alphaEndVariance._value);a.alpha=b;a.velAlpha=(c-b)/a.life;a.direction=this.direction;return!0},set_maxParticles:function(a){this._maxParticles=
a;if(null==this.particles)return this._maxParticles;var b=this.particles.length;for(this.particles.length=a;b<a;)this.particles[b]=new $i,++b;this.numParticles>a&&(this.numParticles=a);return this._maxParticles},__class__:kb,__properties__:k(s.prototype.__properties__,{set_maxParticles:"set_maxParticles"})});var Ml=g["stolo.display.particles.FileFormat"]={__ename__:["stolo","display","particles","FileFormat"],__constructs__:["ParticleDesignerXML"]};Ml.ParticleDesignerXML=["ParticleDesignerXML",0];
Ml.ParticleDesignerXML.toString=p;Ml.ParticleDesignerXML.__enum__=Ml;var ba=function(){};g["stolo.display.particles.EmitterFactory"]=ba;ba.__name__=["stolo","display","particles","EmitterFactory"];ba.setEmitter=function(a,b,c){return ba.getPexEmitter(b,c,a)};ba.getPexEmitter=function(a,b,c){var d=A.getPack(b),e=A.getXML(a+".pex",b,!0,!0);null==c&&(c=new kb);c.textures=null;for(var b=a.lastIndexOf("/"),a=0<=b?M.substr(a,0,b+1):"",h=b=0,e=e.firstElement().elements();e.hasNext();){var n=e.next();switch(n.get_nodeName().toLowerCase()){case "colors":n=
n.get("value").split(",");c.colors=[];for(var f=0;f<n.length;){var g=n[f];++f;g=q.parseInt("0x"+g);c.colors.push(g)}break;case "width":c.particleWidth=ba.getFloat(n,"value");break;case "height":c.particleHeight=ba.getFloat(n,"value");break;case "texture":null==c.textures&&(c.textures=[]);c.textures.push(d.getTexture(a+ka.removeFileExtension(n.get("name"))));break;case "angle":c.angle.set__(ba.getFloat(n,"value"));break;case "anglevariance":c.angleVariance.set__(ba.getFloat(n,"value"));break;case "blendfuncdestination":b=
q["int"](ba.getFloat(n,"value"));break;case "blendfuncsource":h=q["int"](ba.getFloat(n,"value"));break;case "duration":c.duration=ba.getFloat(n,"value");break;case "emittertype":c.type=0==q["int"](ba.getFloat(n,"value"))?pc.Gravity:pc.Radial;break;case "finishcolor":c.alphaEnd.set__(ba.getFloat(n,"alpha"));break;case "finishcolorvariance":c.alphaEndVariance.set__(ba.getFloat(n,"alpha"));break;case "finishparticlesize":c.sizeEnd.set__(ba.getFloat(n,"value"));break;case "finishparticlesizevariance":c.sizeEndVariance.set__(ba.getFloat(n,
"value"));break;case "gravity":c.gravityX.set__(ba.getFloat(n,"x"));c.gravityY.set__(ba.getFloat(n,"y"));break;case "maxparticles":c.set_maxParticles(q["int"](ba.getFloat(n,"value")));break;case "maxradius":c.maxRadius.set__(ba.getFloat(n,"value"));break;case "maxradiusvariance":c.maxRadiusVariance.set__(ba.getFloat(n,"value"));break;case "minradius":c.minRadius.set__(ba.getFloat(n,"value"));break;case "particlelifespan":c.lifespan.set__(ba.getFloat(n,"value"));break;case "particlelifespanvariance":c.lifespanVariance.set__(ba.getFloat(n,
"value"));break;case "radialaccelvariance":c.radialAccelVariance.set__(ba.getFloat(n,"value"));break;case "radialacceleration":c.radialAccel.set__(ba.getFloat(n,"value"));break;case "rotatepersecond":c.rotatePerSecond.set__(ba.getFloat(n,"value"));break;case "rotatepersecondvariance":c.rotatePerSecondVariance.set__(ba.getFloat(n,"value"));break;case "rotationend":c.rotationEnd.set__(ba.getFloat(n,"value"));break;case "rotationendvariance":c.rotationEndVariance.set__(ba.getFloat(n,"value"));break;
case "rotationstart":c.rotationStart.set__(ba.getFloat(n,"value"));break;case "rotationstartvariance":c.rotationStartVariance.set__(ba.getFloat(n,"value"));break;case "sourcepositionvariance":c.emitXVariance.set__(ba.getFloat(n,"x"));c.emitYVariance.set__(ba.getFloat(n,"y"));break;case "speed":c.speed.set__(ba.getFloat(n,"value"));break;case "speedvariance":c.speedVariance.set__(ba.getFloat(n,"value"));break;case "startcolor":c.alphaStart.set__(ba.getFloat(n,"alpha"));break;case "startcolorvariance":c.alphaStartVariance.set__(ba.getFloat(n,
"alpha"));break;case "startparticlesize":c.sizeStart.set__(ba.getFloat(n,"value"));break;case "startparticlesizevariance":c.sizeStartVariance.set__(ba.getFloat(n,"value"));break;case "tangentialaccelvariance":c.tangentialAccelVariance.set__(ba.getFloat(n,"value"));break;case "tangentialacceleration":c.tangentialAccel.set__(ba.getFloat(n,"value"))}}0>=c.lifespan._value&&c.lifespan.set__(c.duration);1==h&&1==b?c.blendMode=Ca.Add:1==h&&771==b?c.blendMode=null:(0!=h||0!=b)&&null;return c};ba.getFloat=
function(a,b){return q.parseFloat(a.get(b))};var $i=function(){this.direction=1;this.color=16777215;this.emitX=this.emitY=this.x=this.velX=this.y=this.velY=this.radialRadius=this.velRadialRadius=this.radialRotation=this.velRadialRotation=this.radialAccel=this.tangentialAccel=this.scale=this.velScale=this.rotation=this.velRotation=this.alpha=this.velAlpha=this.life=this.offsetX=this.offsetY=0};g["stolo.display.particles.Particle"]=$i;$i.__name__=["stolo","display","particles","Particle"];$i.prototype=
{draw:function(a){null==this.texture?this.drawRect(a):(1>this.alpha&&a.multiplyAlpha(this.alpha),0!=this.rotation&&a.rotate(this.rotation),(1!=this.scale||1!=this.direction)&&a.scale(this.scale*this.direction,this.scale),a.drawTexture(this.texture,this.offsetX,this.offsetY))},drawRect:function(a){1>this.alpha&&a.multiplyAlpha(this.alpha);0!=this.rotation&&a.rotate(this.rotation);1!=this.scale&&a.scale(this.scale,this.scale);a.fillRect(this.color,this.offsetX,this.offsetY,this.width,this.height)},
__class__:$i};var J=function(){};g["stolo.ensys.actor.ActorFactory"]=J;J.__name__=["stolo","ensys","actor","ActorFactory"];J.reset=function(){for(var a=J._registeredComponents.keys();a.hasNext();){var b=a.next();J._registeredComponents.remove(b)}for(a=J._componentMap.keys();a.hasNext();)b=a.next(),J._componentMap.remove(b);for(a=J._templateMap.keys();a.hasNext();)b=a.next(),J._templateMap.remove(b)};J.create=function(a){var b=new o,c=J.getTemplate(J.getTemplateName(a,!0));if(null!=c&&(c.template.onlyHighEnd&&
r.slow||c.template.onlySlowEnd&&!r.slow))return null;a=U.merge(c,a,!0);if(null==a)return null;J.onActorData.emit(a);return J.compose(b,a)};J.compose=function(a,b){for(var c=0,d=y.fields(b);c<d.length;){var e=d[c];++c;var h=y.field(b,e);if(!(null==h||!1==h)&&null==h.debug){h=J.createComponent(e,h);if(null==h)throw"ActorFactory: Unknown component '"+e+"'";a.add(h)}}null==a._compMap.TransformComponent_32&&a.add(new Gd);return a};J.registerComponent=function(a,b){J._registeredComponents.set(a,b);var c=
ca.getClassName(b);J._componentMap.set(c,a)};J.getComponentName=function(a){a=ca.getClassName(ca.getClass(a));return J._componentMap.get(a)};J.getComponentsIds=function(){for(var a=[],b=J._registeredComponents.iterator();b.hasNext();){var c=b.next();a.push(ca.getClassName(c))}return a};J.getTemplateIds=function(){for(var a=[],b=J._templateMap.iterator();b.hasNext();){var c=b.next();a.push(c.template.key)}return a};J.getTemplate=function(a,b){null==b&&(b=!0);J._lastTempalte=a;var c=J._templateMap.get(a);
if(b&&null!=c&&Object.prototype.hasOwnProperty.call(c.template,"parent")){var d;d=J._templateMap.get(c.template.parent);if(null==d)throw"parent template not found: '"+q.string(c.template.parent)+"' for template '"+a+"'";c=U.merge(d,c,!0)}return c};J.addTemplate=function(a){var b=J.getTemplateName(a);null!=b&&(J._templateMap.exists(b)?null:J._templateMap.set(b,a),J.onTemplateAdded.emit(a))};J.getTemplateName=function(a,b){null==b&&(b=!1);var c=y.getProperty(a,"template");if(null!=c&&null!=c.key){c=
c.key;if(b&&!J._templateMap.exists(c))throw"ActorFactory: Unknown template '"+c+"'";return c}return null};J.createComponent=function(a,b){var c;if("string"==typeof a){if(c=J._registeredComponents.get(a),null==c)return null}else c=a;return J.initComponent(ca.createInstance(c,[]),b)};J.initComponent=function(a,b){var c=J.getComponentDefaults(a);null!=c&&(b=null!=b?U.merge(c,b,!0):c);J.applyProps(a,b);return a};J.applyProps=function(a,b){for(var c=0,d=y.fields(b);c<d.length;){var e=d[c];++c;var h=y.field(b,
e);y.setProperty(a,e,h)}return a};J.getComponentDefaults=function(a){return y.getProperty(ca.getClass(a),"DEFAULTS")};var mb=function(){this.onAnimStart=new pa;this.onCreate=new pa;this.locked=!1;this.fps=-1;this.loop=!0;this.delay=0;this.autoRemove=!1;H.call(this)};g["stolo.ensys.components.AnimationComponent"]=mb;mb.__name__=["stolo","ensys","components","AnimationComponent"];mb.__super__=H;mb.prototype=k(H.prototype,{onAdded:function(){this.createAnim();H.prototype.onAdded.call(this)},onUpdate:function(a){H.prototype.onUpdate.call(this,
a);0<this._timeout&&(this._timeout-=a,0>this._timeout&&this._timeoutCallback())},createAnim:function(){this.animation=new vb(this.asset,this.pack,null,!1,this.overrides);this.owner.addChild((new o).add(this.animation));this.onCreate.emit()},initStart:function(){this.animation.setAnchor(0,0);0<this.fps&&(this.animation.get_spritesheet().fps=this.fps);if(this.autoRemove)this.animation.animComplete.connect(l(this,this.onAutoRemove)).once();0<this.delay?(this.setTimeout(l(this,this.startAnim),this.delay),
this.animation.set_visible(!1)):this.startAnim();this.initEnd()},startAnim:function(){null==this.start&&(this.start=this.animation.get_spritesheet().defaultAnim);var a=this.start;-1!=this.start.indexOf(",")&&(a=this.start.split(","));this.animation.set_visible(!0);a=this.animation.gotoAndPlay(a);!this.loop&&null!=a&&(a.loop=!1);this.onAnimStart.emit()},onAutoRemove:function(){!E.inEditor()&&this.autoRemove&&(E.getSystemEntity(this.owner),E.getSystemEntity(this.owner).getComponent("ActorSystem_4").removeActor(this.owner))},
enableCulling:function(a){H.prototype.enableCulling.call(this,a);this.animation.set_isPlaying(!a)},set:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);if(this.locked)return this._unlockTo=a,this.animation.animName;d&&null!=this.suffix&&(a+=this.suffix);this.animation.gotoAndPlay(a,b);c&&(this.locked=!0,this.animation.animComplete.connect(l(this,this.onLockedAnimComplete)).once());return this.animation.animName},onLockedAnimComplete:function(){this.unlock()},unlock:function(a){this.locked=!1;null==
a&&(a=this._unlockTo);null!=a&&this.set(a);this._unlockTo=null},getAnimation:function(){return this.animation},getNaturalWidth:function(){return null!=this.animation?this.animation.getNaturalWidth():100},getNaturalHeight:function(){return null!=this.animation?this.animation.getNaturalHeight():100},set_pointerEnabled:function(a){null!=this.animation&&this.animation.set_pointerEnabled(a);return H.prototype.set_pointerEnabled.call(this,a)},setTimeout:function(a,b){this._timeout=b;this._timeoutCallback=
a},__class__:mb});var aj=function(){this.target="ANY_BODY";this.enabled=!0;j.call(this)};g["stolo.ensys.components.BouncerComponent"]=aj;aj.__name__=["stolo","ensys","components","BouncerComponent"];aj.__super__=j;aj.prototype=k(j.prototype,{get_name:function(){return"BouncerComponent_63"},onStart:function(){j.prototype.onStart.call(this);E.getSystemEntity(this.owner);this._physicsSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("BOUNCER");
this._physicsSystem.addContactListener(Ba.BEGIN,Ia.ANY,this.target,"BOUNCER",this.owner,l(this,this.onContactBegin))},onStop:function(){this._physicsSystem.removeContactListener(Ba.BEGIN,Ia.ANY,this.target,"BOUNCER",this.owner);this._physicsSystem=null;j.prototype.onStop.call(this)},onContactBegin:function(a,b){if(this.enabled&&null!=b){var c=a._compMap.PhysicsComponent_25;if(null!=c){var d=c.getVelocity();if(0<this.impulse){var e=-Math.cos(b.angle)*this.impulse,e=Math.round(100*e)/100,h=-Math.sin(b.angle)*
this.impulse,h=Math.round(100*h)/100;c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)+e,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)+h)}else 0<this.ratio&&c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)*this.ratio,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)*this.ratio)}}},__class__:aj});var bj=function(){this.offsetDirectionX=this.offsetDirectionY=1;this.offsetX=this.offsetY=0;this.active=!1;j.call(this)};g["stolo.ensys.components.CameraTargetComponent"]=
bj;bj.__name__=["stolo","ensys","components","CameraTargetComponent"];bj.__super__=j;bj.prototype=k(j.prototype,{get_name:function(){return"CameraTargetComponent_22"},dispose:function(){j.prototype.dispose.call(this);null!=this._cameraSystem&&(this._cameraSystem.removeTarget(this),this._cameraSystem=null);this._returnParams=this._returnTarget=null},onActorAdded:function(){E.getSystemEntity(this.owner);this._cameraSystem=E.getSystemEntity(this.owner).getComponent("CameraSystem_21");null!=this._cameraSystem&&
(this._cameraSystem.addTarget(this),this.active&&this._cameraSystem.setTarget(this))},setOffsetDirectionX:function(a,b,c){this._cameraSystem.get_target()!=this||a==this.offsetDirectionX||(this.offsetDirectionX=a,this._cameraSystem.offsetTargetDirectionX(this,a,b,c))},__class__:bj});var cj=function(){this.directionEaseX=D.quadInOut;this.directionTimeX=1.5;this.directionSwapX=!0;j.call(this)};g["stolo.ensys.components.CameraTargetDirection"]=cj;cj.__name__=["stolo","ensys","components","CameraTargetDirection"];
cj.__super__=j;cj.prototype=k(j.prototype,{get_name:function(){return"CameraTargetDirection_43"},onStart:function(){j.prototype.onStart.call(this);this._target=this.owner._compMap.CameraTargetComponent_22;this._transform=this.owner._compMap.TransformComponent_32},onStop:function(){j.prototype.onStop.call(this);this._transform=this._target=null},onUpdate:function(){this.directionSwapX&&this.setCameraDirectionX(this._transform.direction)},setCameraDirectionX:function(a){this._target.setOffsetDirectionX(a,
this.directionTimeX,this.directionEaseX)},__class__:cj});var dj=function(){this.enabled=!0;j.call(this)};g["stolo.ensys.components.CheckpointComponent"]=dj;dj.__name__=["stolo","ensys","components","CheckpointComponent"];dj.__super__=j;dj.prototype=k(j.prototype,{get_name:function(){return"CheckpointComponent_59"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("CHECKPOINT")},__class__:dj});var ej=function(){this._respawnPosition=
new La;j.call(this)};g["stolo.ensys.components.CheckpointerComponent"]=ej;ej.__name__=["stolo","ensys","components","CheckpointerComponent"];ej.__super__=j;ej.prototype=k(j.prototype,{get_name:function(){return"CheckpointerComponent_60"},dispose:function(){j.prototype.dispose.call(this);this._physicsSystem=this._physics=this._transform=null;this.clear();this._respawnPosition=null},onStart:function(){this._transform=this.owner._compMap.TransformComponent_32;this._physics=this.owner._compMap.PhysicsComponent_25;
null!=this._physics&&this._physics.addContactType("CHECKPOINTER");null==this.position&&(this.position={x:this._transform.position.x,y:this._transform.position.y});E.getSystemEntity(this.owner);this._physicsSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");this._physicsSystem.addContactListener(Ba.BEGIN,Ia.SENSOR,"CHECKPOINT","CHECKPOINTER",this.owner,l(this,this.onContactBegin))},onStop:function(){this._physicsSystem.removeContactListener(Ba.BEGIN,Ia.SENSOR,"CHECKPOINT","CHECKPOINTER",
this.owner);j.prototype.onStop.call(this)},onContactBegin:function(a){this.lastCheckPoint=a._compMap.CheckpointComponent_59},clear:function(){this.lastCheckPoint=null},__class__:ej});var fj=function(){this.onCollection=new gb;this.targets=["COLLECTABLE"];j.call(this)};g["stolo.ensys.components.CollectorComponent"]=fj;fj.__name__=["stolo","ensys","components","CollectorComponent"];fj.__super__=j;fj.prototype=k(j.prototype,{get_name:function(){return"CollectorComponent_55"},onStart:function(){j.prototype.onStart.call(this);
this._physic=this.owner._compMap.PhysicsComponent_25;null!=this._physic&&this._physic.addContactType("COLLECTOR");E.getSystemEntity(this.owner);this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");this._physicSystem.addContactListener(Ba.BEGIN,Ia.ANY,"COLLECTOR",this.targets,this.owner,l(this,this.onContactBegin))},onStop:function(){this._physicSystem.removeContactListener(Ba.BEGIN,Ia.ANY,"COLLECTOR",this.targets,this.owner);this._physic=this._physicSystem=null;j.prototype.onStop.call(this)},
onContactBegin:function(a){var b=a._compMap.CollectableComponent_56;null!=b&&(b.isCollectable()&&b.collect(this.owner),this.onCollection.emit(this.owner,a))},__class__:fj});var pd=function(a,b,c,d,e){null==e&&(e=0.3);null==d&&(d=16727552);null==b&&(b=100);null==a&&(a=100);this.font=pd.DefaultFont;this.debugOnly=!0;j.call(this);this.shape=pd.getShape(a,b,d,e);this.text=c};g["stolo.ensys.components.DebugComponent"]=pd;pd.__name__=["stolo","ensys","components","DebugComponent"];pd.getShape=function(a,
b,c,d){null==d&&(d=0.3);null==c&&(c=16727552);null==b&&(b=100);null==a&&(a=100);return{alpha:d,color:c,width:a,height:b}};pd.__super__=j;pd.prototype=k(j.prototype,{get_name:function(){return"DebugComponent_31"},onAdded:function(){this.debugOnly&&this.owner.remove(this)},onStart:function(){this.debugOnly||(null==this.owner._compMap.Sprite_5&&this.owner.add(new H),null!=this.shape&&0<this.shape.width&&0<this.shape.height&&(0>=this.shape.color&&(this.shape.color=0),0>=this.shape.alpha&&(this.shape.alpha=
0.3),this.setShape(this.shape)),null!=this.text&&""!=this.text&&(this.textSprite=K.getTextSprite(this.font),this.textSprite.set_text(this.text),this.owner.addChild((new o).add(this.textSprite)),this.centerText&&this.textSprite.centerAnchor()),j.prototype.onStart.call(this))},setShape:function(a){null!=this.bg&&this.bg.owner.dispose();this.bg=new Da(a.color,a.width,a.height);this.bg.alpha.set__(a.alpha);this.owner.addChild((new o).add(this.bg));this.center&&this.bg.centerAnchor();return this.bg},__class__:pd});
var tg=function(){this.disposer=new bb;this.onlyHighEnd=this.onlyLowEnd=!1;this.uuid="";this.spawner=0;this.tags=[];this.comment="";this.key="no_name";j.call(this)};g["stolo.ensys.components.TemplateComponent"]=tg;tg.__name__=["stolo","ensys","components","TemplateComponent"];tg.__super__=j;tg.prototype=k(j.prototype,{get_name:function(){return"TemplateComponent_3"},onAdded:function(){j.prototype.onAdded.call(this);this.owner.add(this.disposer)},dispose:function(){j.prototype.dispose.call(this);this.tags=
this.disposer=null},__class__:tg});var Gd=function(){this.fixed=this.fixedRotation=!0;this.direction=1;this.rotation=0;j.call(this)};g["stolo.ensys.components.TransformComponent"]=Gd;Gd.__name__=["stolo","ensys","components","TransformComponent"];Gd.__super__=j;Gd.prototype=k(j.prototype,{get_name:function(){return"TransformComponent_32"},onAdded:function(){j.prototype.onAdded.call(this);null==this.position&&(this.position={x:0,y:0})},setXY:function(a,b){this.position.x=a;this.position.y=b},flip:function(){this.direction*=
-1;var a=this.owner._compMap.Sprite_5;null!=a&&(a.forceUpdate=!0)},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.position.x-a.position.x,a=this.position.y-a.position.y;return b*b+a*a},__class__:Gd});var gj=function(){this.y=new Q(0);this.x=new Q(0);j.call(this)};g["stolo.ensys.components.MoveTransformComponent"]=gj;gj.__name__=["stolo","ensys","components","MoveTransformComponent"];gj.__super__=j;gj.prototype=k(j.prototype,{get_name:function(){return"MoveTransformComponent_41"},
dispose:function(){j.prototype.dispose.call(this);this.y=this.x=this._callback=this._transform=null},onActorAdded:function(){this._transform=this.owner._compMap.TransformComponent_32;if(null==this._transform)throw"This component depends on a transform component";this.x.set__(this._transform.position.x);this.y.set__(this._transform.position.y)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.isComplete()||(this.x.update(a),this.y.update(a),this._transform.setXY(this.x._value,this.y._value),
this.isComplete()&&this.complete())},complete:function(){if(null!=this._callback){var a=this._callback;this._callback=null;a(this.owner)}},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()?!1:!0},__class__:gj});var em=function(){};g["stolo.ensys.components.IActivable"]=em;em.__name__=["stolo","ensys","components","IActivable"];var ug=function(){this.speed=1;this.isToggle=this.repeat=!1;this.isActive=!0;j.call(this)};
g["stolo.ensys.components.MoveSequenceComponent"]=ug;ug.__name__=["stolo","ensys","components","MoveSequenceComponent"];ug.__interfaces__=[em];ug.__super__=j;ug.prototype=k(j.prototype,{get_name:function(){return"MoveSequenceComponent_42"},dispose:function(){j.prototype.dispose.call(this);null!=this._sequence&&this._sequence.dispose();this.initPosition=this.position=this._sequence=this._script=this._physics=this._transform=null},onStart:function(){this._transform=this.owner._compMap.TransformComponent_32;
this._transform.fixed=!1;this.initPosition=new La(this._transform.position.x,this._transform.position.y);this._physics=this.owner._compMap.PhysicsComponent_25;null!=this._physics&&this._physics.setKinematic(!0);!E.inEditor(this.owner)&&this.isActive&&(this.isActive=!1,this.activate())},onUpdate:function(a){null!=this.position&&(this.position.update(a),this._transform.setXY(this.position.x._value,this.position.y._value))},startSequence:function(){if(!(null==this.sequence||null!=this._sequence)){var a=
this.sequence.actions;this.position=new Ib(this.initPosition.x,this.initPosition.y);var b={x:this.position.x,y:this.position.y,offsetX:this.initPosition.x,offsetY:this.initPosition.y};null==this.sequence.loop&&(this.sequence.loop=!0);this.repeat=this.sequence.yoyo||this.sequence.loop;this._sequence=new Zb;this._sequence.init(a,b,this.sequence.loop,this.sequence.yoyo,this.sequence.delay);this._sequence.add(new ab(l(this,this.onSequenceComplete)));this._script=new Sb;this.owner.add(this._script);this._script.run(this._sequence)}},
onSequenceComplete:function(){this.repeat&&this._script.run(this._sequence)},activate:function(){this.isActive||(this.isActive=!0,null!=this.sequence&&this.startSequence())},__class__:ug});var vf=function(){this.padding=0;this.color2=16777215;this.color1=0;this.dotLength=5;this.thickness=1;j.call(this)};g["stolo.ensys.editor.component.EditorSelectionComponent"]=vf;vf.__name__=["stolo","ensys","editor","component","EditorSelectionComponent"];vf.__super__=j;vf.prototype=k(j.prototype,{get_name:function(){return"EditorSelectionComponent_12"},
onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._display=this.owner._compMap.Sprite_5;if(null!=this._display)if(this._display.initialized)this.build();else this._display.onInitComplete.connect(l(this,this.build)).once()},onRemoved:function(){j.prototype.onRemoved.call(this);null!=this._container&&(this._container.parent.removeChild(this._container),this._container=null);this._display=this._transform=this._sprite=null},onUpdate:function(a){j.prototype.onUpdate.call(this,
a);this.updateTransform()},updateTransform:function(){null!=this._sprite&&(this._sprite.setXY(this._transform.position.x,this._transform.position.y),this._sprite.setRotation(this._transform.rotation))},build:function(){null!=this._container&&this._container.dispose();var a;a=this.owner._internal_getFromParents("RendererSystem_7");var b=a.getActorLayer(this.owner);a=a.addLayer({name:b.getName()+"_selection\u00a0",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});a.set_pointerEnabled(!1);var b=
this._display.getNaturalWidth()+2*this.padding,c=this._display.getNaturalHeight()+2*this.padding;if(X.__instanceof(this._display,mb)&&null!=this.owner._compMap.PhysicsComponent_25){var d=this.owner._compMap.PhysicsComponent_25.shape;null!=d.width&&null!=d.height&&(b=d.width+2*this.padding,c=d.height+2*this.padding)}var d=u._platform.getRenderer().createTexture(b,c),e=d.get_graphics();this.drawDottedLine(e,!0,0,0,b,this.dotLength,this.thickness);this.drawDottedLine(e,!1,0,0,c,this.dotLength,this.thickness);
this.drawDottedLine(e,!0,0,c-this.thickness,b,this.dotLength,this.thickness);this.drawDottedLine(e,!1,b-this.thickness,0,c,this.dotLength,this.thickness);this._sprite=new Y(d);this._sprite.setAnchor(this._display.anchorX._value,this._display.anchorY._value);this._container=new o;this._container.add(this._sprite);a.owner.addChild(this._container)},drawDottedLine:function(a,b,c,d,e,h,n){for(var f=0,g=!1;f<e;){var i;i=g?this.color1:this.color2;b?a.fillRect(i,c+f,d,Math.min(h,e-f),n):a.fillRect(i,c,d+
f,n,Math.min(h,e-f));g=!g;f+=h}},__class__:vf});var lf=function(){this._startingSymbol=null;H.call(this)};g["stolo.ensys.components.ImageComponent"]=lf;lf.__name__=["stolo","ensys","components","ImageComponent"];lf.__super__=H;lf.prototype=k(H.prototype,{dispose:function(){H.prototype.dispose.call(this);this._startingSymbol=this._texture=this.bitmapSprite=this.sprite=null},initStart:function(){null!=this.spritesheet?this.loadSpritesheet(this.spritesheet,this.asset):(this.set_texture(this.getTexture(this.pack,
this.asset)),this.width=this.get_texture().get_width(),this.height=this.get_texture().get_height(),this.useSprite&&this.createSprite(),H.prototype.initStart.call(this))},initEnd:function(){null!=this._startingSymbol&&(this.setSymbol(this._startingSymbol),this._startingSymbol=null);H.prototype.initEnd.call(this)},createSprite:function(){null==this.sprite&&(this.sprite=new Y(this._texture),this.sprite.set_pointerEnabled(!1),this.owner.addChild((new o).add(this.sprite)),this._texture=null)},draw:function(a){null!=
this._texture&&a.drawTexture(this._texture,0,0)},get_texture:function(){return null!=this.sprite?this.sprite.texture:this._texture},set_texture:function(a){this.width=a.get_width();this.height=a.get_height();return null!=this.sprite?this.sprite.texture=a:this._texture=a},set_pointerEnabled:function(a){null!=this.sprite&&this.sprite.set_pointerEnabled(a);null!=this.bitmapSprite&&this.bitmapSprite.set_pointerEnabled(a);return H.prototype.set_pointerEnabled.call(this,a)},getNaturalWidth:function(){return this.width},
getNaturalHeight:function(){return this.height},loadSpritesheet:function(a,b){var c=new o;this.owner.addChild(c);this.bitmapSprite=new Vc(a,b,this.pack,l(this,this.onBitmapSpriteInit),!1);c.add(this.bitmapSprite)},onBitmapSpriteInit:function(){this.updateBitmapSprite();this.initEnd()},setSymbol:function(a){if(!this.initialized)return this._startingSymbol=a,null;if(null==this.bitmapSprite)throw"Not spritesheet loaded!";a=this.bitmapSprite.setSymbol(a);this.updateBitmapSprite();return a},updateBitmapSprite:function(){this.width=
Math.round(this.bitmapSprite.getNaturalWidth());this.height=Math.round(this.bitmapSprite.getNaturalHeight())},__class__:lf,__properties__:k(H.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})});var vg=function(){H.call(this)};g["stolo.ensys.components.FillComponent"]=vg;vg.__name__=["stolo","ensys","components","FillComponent"];vg.__super__=H;vg.prototype=k(H.prototype,{initStart:function(){this.setAlpha(1-this.transparency);this.initEnd()},draw:function(a){a.fillRect(this.color,
0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:vg});var wg=function(){this.labelLayer="Time";mb.call(this)};g["stolo.ensys.components.FlumpAnimationComponent"]=wg;wg.__name__=["stolo","ensys","components","FlumpAnimationComponent"];wg.__super__=mb;wg.prototype=k(mb.prototype,{onStart:function(){mb.prototype.onStart.call(this)},onStop:function(){this.flump=null;mb.prototype.onStop.call(this)},createAnim:function(){this.animation=
this.flump=new hj(this.prefix,this.asset,this.pack,null,!1);this.owner.addChild((new o).add(this.animation));this.setReplacementAnim()},setReplacementAnim:function(){null!=this.textureReplace&&(this.flump.setDecorator(l(this,this.replaceAnims)),null!=this.flump.movie&&this.replaceAnims(this.flump.movie))},replaceAnims:function(a){if(this.textureReplace instanceof Array&&null==this.textureReplace.__enum__)for(var b=this.textureReplace,c=0;c<b.length;){var d=b[c];++c;this.replaceAnim(a,d)}else this.replaceAnim(a,
this.textureReplace)},replaceAnim:function(a,b){var c=null;null!=b.asset&&null!=b.sprite&&(c=A.getPack(b.sprite).getTexture(b.asset));var d=a.getLayer(b.layer,!1);null!=d&&(d=d._internal_getFromChildren("Sprite_5",Y),null!=d&&(d.texture=c))},__class__:wg});var Wc=function(){H.call(this)};g["stolo.ensys.components.PatternComponent"]=Wc;Wc.__name__=["stolo","ensys","components","PatternComponent"];Wc.__super__=H;Wc.prototype=k(H.prototype,{initStart:function(){this._texture=this.getTexture(this.pack,
this.asset);null!=this._texture&&(0<this.width||(this.width=this._texture.get_width()),0<this.height||(this.height=this._texture.get_height()));this.initEnd()},draw:function(a){null!=this._texture&&a.drawPattern(this._texture,0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:Wc});var $b=function(){this._px=this._py=this._tx=this._ty=0;H.call(this)};g["stolo.ensys.components.TilerComponent"]=$b;$b.__name__=["stolo",
"ensys","components","TilerComponent"];$b.__super__=H;$b.prototype=k(H.prototype,{draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},enableCulling:function(a){H.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},onStart:function(){this._transform=this.owner._compMap.TransformComponent_32;this._image=this.getTexture(this.pack,this.asset);this.updatePosition();
this.width=this.xsize*this.tileWidth|0;this.height=this.ysize*this.tileHeight|0;0!=this.xsize%2&&(this._px+=0.5*this.tileWidth|0);0!=this.ysize%2&&(this._py+=0.5*this.tileHeight|0);this._tx=(this._px-0.5*this.width)/this.tileWidth|0;this._ty=(this._py-0.5*this.height)/this.tileHeight|0;null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.setPosition(this._transform.position.x,this._transform.position.y);this._grid=$b.tileCache.get(this.grid);null==this._grid&&(this._grid=
new C,$b.tileCache.set(this.grid,this._grid));for(var a=0,b=this.xsize;a<b;)for(var c=a++,d=0,e=this.ysize;d<e;){var h=d++;this.setTile(this._tx+c,this._ty+h)}this.cullTexture||this.buildTexture();H.prototype.onStart.call(this)},updatePosition:function(){this._px=q["int"](Math.floor(this._transform.position.x/this.tileWidth)*this.tileWidth);this._py=q["int"](Math.floor(this._transform.position.y/this.tileHeight)*this.tileHeight);this._transform.position.x=this._px;this._transform.position.y=this._py;
this.forceUpdate=!0},onUpdate:function(a){H.prototype.onUpdate.call(this,a);null!=this.owner._internal_getFromParents("BaseGameSystem_8",kc)&&this.updatePosition()},getTileId:function(a,b){return a+"_"+b},getTile:function(a,b){return this._grid.get(this.getTileId(a,b))},setTile:function(a,b,c){null==c&&(c=!0);this._grid.set(this.getTileId(a,b),c)},getTextureCacheId:function(){return"tiler_"+this.pack+"_"+this.asset+"_"+this.width+"x"+this.height},buildTexture:function(){this.isBuilt=!0;var a=null,
b=null;if(this.drawTexture){a=this.getTextureCacheId();this._texture=$b.cache.get(a);if(null!=this._texture)return this.endBuild();this._texture=u._platform.getRenderer().createTexture(this.width,this.height);b=this._texture.get_graphics()}for(var c=Math.floor(this._image.get_width()/this.tileWidth),d=0,e=this.xsize;d<e;)for(var h=d++,n=0,f=this.ysize;n<f;){var g=n++,i=this._tx+h,j=this._ty+g,k=0;this.cornerMode?(this.getTile(i+1,j-1)&&(k+=1),this.getTile(i+1,j+1)&&(k+=2),this.getTile(i-1,j+1)&&(k+=
4),this.getTile(i-1,j-1)&&(k+=8),7==k&&!this.getTile(i,j-1)&&(k=6),7==k&&!this.getTile(i-1,j)&&(k=3),14==k&&!this.getTile(i,j-1)&&(k=6),14==k&&!this.getTile(i+1,j)&&(k=12),11==k&&!this.getTile(i,j+1)&&(k=9),11==k&&!this.getTile(i-1,j)&&(k=3),13==k&&!this.getTile(i,j+1)&&(k=9),13==k&&!this.getTile(i+1,j)&&(k=12)):(this.getTile(i,j-1)&&(k+=1),this.getTile(i+1,j)&&(k+=2),this.getTile(i,j+1)&&(k+=4),this.getTile(i-1,j)&&(k+=8));var i=this.mapping[k],l=i[Math.floor(Math.random()*i.length)],i=l%c,j=Math.floor(l/
c);this.drawTexture?b.drawSubTexture(this._image,h*this.tileWidth,g*this.tileHeight,i*this.tileWidth,j*this.tileHeight,this.tileWidth,this.tileHeight):(a="tiler_"+this.pack+"_"+this.asset+"_"+k+"_"+l,k=null,$b.cache.exists(a)?k=$b.cache.get(a):(k=this._image.subTexture(i*this.tileWidth,j*this.tileHeight,this.tileWidth,this.tileHeight),$b.cache.set(a,k)),k=new Y(k),k.set_pointerEnabled(0!=(this._flags&4)),this.owner.addChild((new o).add(k)),k.setXY(h*this.tileWidth,g*this.tileHeight))}this.drawTexture&&
$b.cache.set(a,this._texture);this.endBuild()},endBuild:function(){this.initEnd();this.isBuilt=!0},dispose:function(){this._texture=this._grid=this._image=null;H.prototype.dispose.call(this)},__class__:$b});var qc=function(){H.call(this)};g["stolo.ensys.components.SlicerComponent"]=qc;qc.__name__=["stolo","ensys","components","SlicerComponent"];qc.ValidateActorExport=function(a,b){a.width=b.dataWidth;a.height=b.dataHeight;return a};qc.__super__=H;qc.prototype=k(H.prototype,{draw:function(a){null!=
this._texture&&a.drawTexture(this._texture,0,0)},onAdded:function(){this.dataWidth=this.width;this.dataHeight=this.height;H.prototype.onAdded.call(this)},enableCulling:function(a){H.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},initStart:function(){this._image=this.getTexture(this.pack,this.asset);var a=this.slices[0],b=this.slices[1];this.slicesData=new Fb;
for(var c=0,d=0,e,h,n=0,f=0,g=b.length-1;f<g;){c=f++;d=b[c];h=b[c+1]-d;for(var i=0,j=a.length-1;i<j;)e=i++,c=a[e],e=a[e+1]-c,this.slicesData.set(++n,{id:n,x:c,y:d,width:e,height:h})}this.slicesData.set(-1,{id:-1,x:0,y:0,width:0,height:0});b=this.slicesData.get(this.template[0][0][0]);n=this.slicesData.get(this.template[0][2][0]);a=this.slicesData.get(this.template[1][1][0]);this.slicesData.get(this.template[2][0][0]);d=this.slicesData.get(this.template[2][2][0]);n=b.width+n.width;this.widthVar=this.width-
n;this.widthRepeat=Math.ceil(this.widthVar/a.width);this.widthVar=this.widthRepeat*a.width|0;b=b.height+d.height;this.heightVar=this.height-b;this.heightRepeat=Math.ceil(this.heightVar/a.height);this.heightVar=this.heightRepeat*a.height|0;this.width=this.widthVar+n;this.height=this.heightVar+b;this.cullTexture||this.buildTexture()},getTextureCacheId:function(){return"slicer_"+this.pack+"_"+this.asset+"_"+this.slices[0].toString()+"_"+this.slices[1].toString()+"_"+this.dataWidth+"x"+this.dataHeight},
buildTexture:function(){var a=0,b=0,c,d,e=null,h=null,n=null;if(this.drawTexture){n=this.getTextureCacheId();this._texture=qc.cache.get(n);if(null!=this._texture)return this.endBuild();this._texture=u._platform.getRenderer().createTexture(this.width,this.height);h=this._texture.get_graphics()}for(var f=0;3>f;){for(var g=f++,i=this.template[g],j=0;3>j;){var k=j++,l=i[k];d=1==g?this.heightRepeat:1;c=1==k?this.widthRepeat:1;for(var m=0,t=0,r=0;r<d;){r++;for(var s=0;s<c;){s++;e=this.slicesData.get(l[Math.floor(Math.random()*
l.length)]);if(-1!=e.id&&0<e.width&&0<e.height)if(this.drawTexture)h.drawSubTexture(this._image,a+m,b+t,e.x,e.y,e.width,e.height);else{var n="slicer_"+this.pack+"_"+this.asset+"_"+q.string(e.x)+"x"+q.string(e.y)+"_"+q.string(e.width)+"x"+q.string(e.height),p=null;qc.cache.exists(n)?p=qc.cache.get(n):(p=this._image.subTexture(e.x,e.y,e.width,e.height),qc.cache.set(n,p));p=new Y(p);p.set_pointerEnabled(0!=(this._flags&4));this.owner.addChild((new o).add(p));p.setXY(a+m,b+t)}m+=e.width}t+=e.height;m=
0}a=1==k?a+this.widthVar:a+e.width}a=0;b=1==g?b+this.heightVar:b+e.height}this.drawTexture&&qc.cache.set(n,this._texture);this.endBuild()},endBuild:function(){this.initEnd();this.isBuilt=!0},dispose:function(){this.slicesData=this._texture=this.template=this.slices=this._image=null;H.prototype.dispose.call(this)},__class__:qc});var ij=function(){this.textvars={};this.localized=!0;this.font="debug_font";this.text="notext";H.call(this)};g["stolo.ensys.components.TextComponent"]=ij;ij.__name__=["stolo",
"ensys","components","TextComponent"];ij.__super__=H;ij.prototype=k(H.prototype,{initStart:function(){this.localized?this.textfield=new Ea(this.text,this.font,this.textvars):(this.textfield=K.getTextSprite(this.font),this.textfield.set_text(this.text));this.owner.addChild((new o).add(this.textfield));this.initEnd()},getNaturalWidth:function(){return this.textfield.getNaturalWidth()},getNaturalHeight:function(){return this.textfield.getNaturalWidth()},__class__:ij});var jj=function(){this.lockX=this.lockY=
!1;j.call(this)};g["stolo.ensys.components.PositionLockComponent"]=jj;jj.__name__=["stolo","ensys","components","PositionLockComponent"];jj.__super__=j;jj.prototype=k(j.prototype,{get_name:function(){return"PositionLockComponent_44"},onStart:function(){j.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_32;this._targetX=this._transform.position.x;this._targetY=this._transform.position.y},onStop:function(){j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,
a);this.lockX&&(this._transform.position.x=this._targetX);this.lockY&&(this._transform.position.y=this._targetY)},__class__:jj});var Ec=function(){this.color=0;this.thickness=1;this.dotLength=5;this.length=100;H.call(this)};g["stolo.ensys.components.LineComponent"]=Ec;Ec.__name__=["stolo","ensys","components","LineComponent"];Ec.__super__=H;Ec.prototype=k(H.prototype,{dispose:function(){H.prototype.dispose.call(this);null!=this._texture&&!Ec.USE_CACHE&&this._texture.dispose()},onStart:function(){H.prototype.onStart.call(this);
this._texture=this.createDottedLine(this.length,this.dotLength,this.thickness,this.color)},draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},createDottedLine:function(a,b,c,d){null==d&&(d=0);var e=a+"@"+b+"@"+c+"@"+d;if(Ec.USE_CACHE&&Ec.CACHE.exists(e))return Ec.CACHE.get(e);var h=u._platform.getRenderer().createTexture(a,c),n=h.get_graphics();if(0<b)for(var f=0,g=!1;f<a;)g&&n.fillRect(d,f,0,Math.min(b,a-f),c),g=!g,f+=b;else n.fillRect(d,0,0,a,c);Ec.USE_CACHE&&Ec.CACHE.set(e,
h);return h},getNaturalWidth:function(){return this.length},getNaturalHeight:function(){return this.thickness},__class__:Ec});var kj=function(){this.spread=200;this.maxScale=1;this.minScale=0.1;this.maxAlpha=0.3;this.minAlpha=0.1;this.pack="sprites";this.asset="shadow";this.enabled=!0;j.call(this)};g["stolo.ensys.components.GroundShadowComponent"]=kj;kj.__name__=["stolo","ensys","components","GroundShadowComponent"];kj.__super__=j;kj.prototype=k(j.prototype,{get_name:function(){return"GroundShadowComponent_45"},
dispose:function(){j.prototype.dispose.call(this);this.reference=this._shadow=null},onStart:function(){j.prototype.onStart.call(this);this._shadow=new Y(O.getTextureFromPack(this.asset,this.pack));this._shadow.centerAnchor();null!=this.offset&&this._shadow.setXY(this.offset.x,this.offset.y);(new o).add(this._shadow);this.sendToBack()},sendToBack:function(){null!=this._shadow&&this.owner.addChild(this._shadow.owner,!1)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.enabled&&null!=this.reference&&
this.set(this.reference.y._value)},set:function(a){var b=1-a/-this.spread,a=this.minAlpha+b*(this.maxAlpha-this.minAlpha),b=this.minScale+b*(this.maxScale-this.minScale);0<a?(this._shadow.set_visible(!0),this._shadow.setScale(b),this._shadow.setAlpha(a)):this._shadow.set_visible(!1)},__class__:kj});var Xc=function(){this._typesToRemove=[];this._typesToAdd=[];this._complexShape=!1;this.onShapeCreated=new gb;this.onShapesCreated=new pa;this.onInitialize=new pa;this.forceUpdate=this.initialized=!1;this.setTransform=
!0;this.damping=Xc.defaultDamping;j.call(this)};g["stolo.ensys.components.PhysicsComponent"]=Xc;Xc.__name__=["stolo","ensys","components","PhysicsComponent"];Xc.__interfaces__=[qi];Xc.__super__=j;Xc.prototype=k(j.prototype,{get_name:function(){return"PhysicsComponent_25"},onAdded:function(){j.prototype.onAdded.call(this);this.cleanShapes()},onActorAdded:function(){E.getSystemEntity(this.owner);this._cullingSystem=E.getSystemEntity(this.owner).getComponent("CullingSystem_6");E.getSystemEntity(this.owner);
this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");E.getSystemEntity(this.owner);this._physicDebugSystem=E.getSystemEntity(this.owner).getComponent("PhysicDebugSystem_23");this._transform=this.owner._compMap.TransformComponent_32;this._display=this.owner._compMap.Sprite_5;this.createBody();if(null!=this._display&&!this._display.initialized&&null!=this._display.onInitComplete)this._display.onInitComplete.connect(l(this,this.initBody)).once();else this.initBody()},onStart:function(){},
onStop:function(){this.enable(!1);this._cullingSystem.removeComponent(this,this.owner);j.prototype.onRemoved.call(this);this._physicDebugSystem=this._display=this._cullingSystem=this._physicSystem=null;null!=this._body&&(this._body.get_userData().component=null,this._body.get_userData().actor=null);this._transform=this._rayResultList=this._ray=null},onUpdate:function(a){if(this.enabled){if(!this._transform.fixed||this.forceUpdate)this.setTransform?0<this.damping?(this._transform.position.x=xe.lerp(this._transform.position.x,
this._body.get_position().get_x(),a*this.damping),this._transform.position.y=xe.lerp(this._transform.position.y,this._body.get_position().get_y(),a*this.damping)):(this._transform.position.x=this._body.get_position().get_x(),this._transform.position.y=this._body.get_position().get_y()):this.setPosition(this._transform.position.x,this._transform.position.y);if(!this._transform.fixedRotation||this.forceUpdate)this.setTransform?this._transform.rotation=180*this._body.zpp_inner.rot/3.141592653589793:
this.setRotation(3.141592653589793*this._transform.rotation/180);this.forceUpdate=!1}},enableCulling:function(a){a?this._physicSystem.removeBody(this._body):this.enabled&&this._physicSystem.addBody(this._body)},enable:function(a){null==a&&(a=!0);null!=this._physicSystem&&(a?(!this.enabled&&null!=this._transform&&this.setPosition(this._transform.position.x,this._transform.position.y),this._physicSystem.addBody(this._body)):this._physicSystem.removeBody(this._body),this.enabled=a)},disable:function(){this.enable(!1)},
createBody:function(){this._body=new og;this.resetType();0!=this.mass&&this._body.set_mass(this.mass);-1!=this.massScale&&this._body.set_gravMassScale(this.massScale);this._body.set_allowRotation(!this._transform.fixedRotation);this._body.set_isBullet(this.bullet);this._body.get_userData().component=this;this._body.get_userData().actor=this.owner;this._body.get_position().set_x(this._transform.position.x);this._body.get_position().set_y(this._transform.position.y);this._body.set_rotation(3.141592653589793*
this._transform.rotation/180)},initBody:function(){this.createShapes();this.initContacts();for(var a=0,b=this._typesToAdd;a<b.length;){var c=b[a];++a;this.addContactType(c)}a=0;for(b=this._typesToRemove;a<b.length;)c=b[a],++a,this.removeContactType(c);this.setVelocity(this.velocity.x,this.velocity.y);this.applyImpulse(this.impulse.x,this.impulse.y);this._cullingSystem.addComponent(this,this.owner);this.onInitialize.emit();this.initialized=!0},cleanShapes:function(){if(U.is(this.shape,N.TObject))this.shape=
U.merge(Xc.DEFAULT_SHAPE,this.shape,!0);else if(U.is(this.shape,N.TClass(Array))){var a;a=X.__cast(this.shape,Array);for(var b=0,c=a.length;b<c;){var d=b++;a[d]=U.merge(Xc.DEFAULT_SHAPE,a[d],!0)}this.shape=a}},createShapes:function(){this._body.zpp_inner.wrap_shapes.clear();if(U.is(this.shape,N.TObject))this._complexShape=!1,this.createShape(this.shape);else if(U.is(this.shape,N.TClass(Array))){this._complexShape=!0;var a=0,b;for(b=X.__cast(this.shape,Array);a<b.length;){var c=b[a];++a;this.createShape(c)}}this.onShapesCreated.emit()},
createShape:function(a){this._complexShape||(this._complexShape=!("box"==a.type||null==a.type));var b=Nl.createShape(a,this._display,this.offset);this.addShape(b);this.onShapeCreated.emit(a,b);return b},addShape:function(a){a=this._body.zpp_inner.wrap_shapes.add(a);1<this._body.zpp_inner.wrap_shapes.get_length()&&(this._complexShape=!0);return a},getBody:function(){return this._body},initContacts:function(){if(U.is(this.contacts,N.TClass(String)))this.addContactType(this.contacts.toUpperCase());else if(U.is(this.contacts,
N.TClass(Array))){var a=0,b;for(b=X.__cast(this.contacts,Array);a<b.length;){var c=b[a];++a;this.addContactType(c.toUpperCase())}}},getCbType:function(a){return this._physicSystem.getCbType(a)},hasContactType:function(a){return this._body.get_cbTypes().has(this.getCbType(a))},removeContactType:function(a){null==this._body?this._typesToRemove.push(a):this._body.get_cbTypes().remove(this.getCbType(a))},addContactType:function(a){null==this._body?this._typesToAdd.push(a):this._body.get_cbTypes().add(this.getCbType(a))},
getSize:function(){return this._complexShape?{width:this._body.zpp_inner.aabb.wrapper().get_width(),height:this._body.zpp_inner.aabb.wrapper().get_height()}:{width:this.shape.width,height:this.shape.height}},setSize:function(a,b){this._complexShape||(this.shape.width=a,this.shape.height=b,null!=this._body&&this.createShapes())},setRadius:function(a){this.shape.radius=a;null!=this._body&&this.createShapes()},getVelocity:function(){return null==this._body?ra.get(0,0,!0):this._body.get_velocity()},getSpeed:function(){return null==
this._body?Math.sqrt(Math.pow(this.velocity.y,2)+Math.pow(this.velocity.x,2)):Math.sqrt(Math.pow(this._body.get_velocity().get_y(),2)+Math.pow(this._body.get_velocity().get_x(),2))},setVelocity:function(a,b){null!=this._body&&(this._body.get_velocity().set_x(a),this._body.get_velocity().set_y(b))},applyImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(ra.get(a,b,!0))},applyAngularImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(ra.weak(Math.cos(a)*b,Math.sin(a)*b))},setPosition:function(a,
b,c){null==c&&(c=0);null!=this._body&&(0<c?this._body.setVelocityFromTarget(ra.get(a,b,!0),this._body.zpp_inner.rot,c):(this._body.set_position(ra.get(a,b,!0)),this.setTransform&&(this._transform.position.x=a,this._transform.position.y=b)))},enableRotation:function(a){this._transform.fixedRotation=!a;this._body.set_allowRotation(a);a||(this._body.set_angularVel(0),this._transform.rotation=0,a=this.owner._compMap.Sprite_5,null!=a&&a.setRotation(0))},rotate:function(a){var b=this._body;b.set_rotation(b.zpp_inner.rot+
a)},setRotation:function(a){null!=this._body&&(this._body.set_rotation(a),this.setTransform&&(this._transform.rotation=180*this._body.zpp_inner.rot/3.141592653589793))},getRotation:function(){return this._body.zpp_inner.rot},getAngle:function(a){var b=a._compMap.PhysicsComponent_25.getBody().get_position();return Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this)-this._body.get_position().get_y(),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)-this._body.get_position().get_x())},
setKinematic:function(a){null==a&&(a=!1);this.kinematic=!0;null!=this._body&&this._body.set_type(function(){null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Bb,f.internal=!1);return f.BodyType_KINEMATIC}(this));a&&(this.setTransform=!1)},resetType:function(){if(null!=this._transform){var a;this._transform.fixed?(null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Bb,f.internal=!1),a=f.BodyType_STATIC):(null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Bb,
f.internal=!1),a=f.BodyType_DYNAMIC);this.kinematic&&(null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Bb,f.internal=!1),a=f.BodyType_KINEMATIC,this._transform.fixed=!1);null!=this._body&&this._body.set_type(a)}},__class__:Xc});var xg=function(){this.color=16776960;this.debug=!0;j.call(this)};g["stolo.ensys.components.PhysicsDebugComponent"]=xg;xg.__name__=["stolo","ensys","components","PhysicsDebugComponent"];xg.__super__=j;xg.prototype=k(j.prototype,{get_name:function(){return"PhysicsDebugComponent_24"},
onActorAdded:function(){this._transform=this.owner._compMap.TransformComponent_32;this._physics=this.owner._compMap.PhysicsComponent_25;if(null!=this._physics){var a=this._physics.getBody();if(null!=a&&!a.zpp_inner.wrap_shapes.empty())this.onShapesCreated();this._physics.onShapesCreated.connect(l(this,this.onShapesCreated));this._physics.onShapeCreated.connect(l(this,this.onNewShape))}},onStop:function(){null!=this.container&&(this.container.parent.removeChild(this.container),this.container=null);
this.sprite=null;j.prototype.onStop.call(this)},onUpdate:function(a){j.prototype.onUpdate.call(this,a);this.updateTransform()},updateTransform:function(){null!=this.sprite&&(this.sprite.setXY(this._transform.position.x,this._transform.position.y),this.sprite.setRotation(this._transform.rotation))},init:function(){if(null==this.container){var a;E.getSystemEntity(this.owner);a=E.getSystemEntity(this.owner).getComponent("RendererSystem_7");var b=a.getActorLayer(this.owner);this.layer=a.addLayer({name:b.getName()+
"_physics",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});this.layer.set_pointerEnabled(!1);this.createContainer()}},createContainer:function(){this.container=new o;this.sprite=new s;this.sprite.setAnchor(-this._physics.offset.x,-this._physics.offset.y);this.container.add(this.sprite);this.layer.owner.addChild(this.container)},onShapesCreated:function(){null!=this.container&&(this.container.remove(this.sprite),this.container.dispose(),this.container=null,this.createContainer());this.onNewShape(this._physics.shape,
null)},onNewShape:function(a){if(U.is(a,N.TObject))this.createShape(a);else if(U.is(a,N.TClass(Array)))for(var b=0,a=X.__cast(a,Array);b<a.length;){var c=a[b];++b;this.createShape(c)}},createShape:function(a){this.init();a=new Fc(a,this.color);null!=a.texture&&(a.actor=this.owner,this.container.addChild((new o).add(a)));this.firstSprite=q.instance(this.container.firstChild._compMap.Sprite_5,Fc)},__class__:xg});var yg=function(){this.left=this.right=this.top=this.bottom=this.acceptOnce=!1;j.call(this)};
g["stolo.ensys.components.PassthroughComponent"]=yg;yg.__name__=["stolo","ensys","components","PassthroughComponent"];yg.__super__=j;yg.prototype=k(j.prototype,{get_name:function(){return"PassthroughComponent_46"},onStart:function(){j.prototype.onStart.call(this);null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("PASSTHROUGH");E.getSystemEntity(this.owner);this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");this._physicSystem.addContactListener(Ba.PRELISTENER,
Ia.COLLISION,"PASSTHROUGH","PASSTHROUGHABLE",this.owner,l(this,this.onPreContact),this.acceptOnce)},onStop:function(){this._physicSystem.removeContactListener(Ba.PRELISTENER,Ia.COLLISION,"PASSTHROUGH","PASSTHROUGHABLE",this.owner);j.prototype.onStop.call(this);this._physicSystem=null},onPreContact:function(a,b){var c=a._compMap.PassthroughableComponent_47,d=null!=a._compMap.TransformComponent_32&&1==a._compMap.TransformComponent_32.direction;return this.left||c.left&&180*b.angle/3.141592653589793==
(d?180:0)||this.right||c.right&&180*b.angle/3.141592653589793==(d?0:180)||this.top||c.top&&90==180*b.angle/3.141592653589793||this.bottom||c.bottom&&-90==180*b.angle/3.141592653589793?!1:!0},__class__:yg});var zg=function(){j.call(this)};g["stolo.ensys.components.PassthroughableComponent"]=zg;zg.__name__=["stolo","ensys","components","PassthroughableComponent"];zg.__super__=j;zg.prototype=k(j.prototype,{get_name:function(){return"PassthroughableComponent_47"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_25&&
this.owner._compMap.PhysicsComponent_25.addContactType("PASSTHROUGHABLE")},__class__:zg});var Ag=function(){j.call(this)};g["stolo.ensys.components.FrictionerComponent"]=Ag;Ag.__name__=["stolo","ensys","components","FrictionerComponent"];Ag.__super__=j;Ag.prototype=k(j.prototype,{get_name:function(){return"FrictionerComponent_48"},onStart:function(){j.prototype.onStart.call(this);null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("FRICTIONER");E.getSystemEntity(this.owner);
this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");this._physicSystem.addContactListener(Ba.PRELISTENER,Ia.COLLISION,"FRICTIONER","ANY_BODY",this.owner,l(this,this.onPreContact))},onStop:function(){this._physicSystem.removeContactListener(Ba.PRELISTENER,Ia.COLLISION,"FRICTIONER","ANY_BODY",this.owner);j.prototype.onStop.call(this)},onPreContact:function(a,b){90!=180*b.angle/3.141592653589793&&b.disableFriction();return!0},__class__:Ag});var ye=function(){this._contacts=
new bb;this.listenFrom=this.listenTo="ANY_BODY";this.enabled=!0;j.call(this)};g["stolo.ensys.physics.components.BaseContactHandler"]=ye;ye.__name__=["stolo","ensys","physics","components","BaseContactHandler"];ye.__super__=j;ye.prototype=k(j.prototype,{get_name:function(){return"BaseContactHandler_49"},dispose:function(){null!=this._contacts&&this._contacts.dispose();this._system=this._contacts=this._interactionType=null;j.prototype.dispose.call(this)},onActorAdded:function(){this._system=this.owner._internal_getFromParents("PhysicSystem_26")},
onStart:function(){j.prototype.onStart.call(this);this.listenFrom=this.validateContactType(this.listenFrom);this.listenTo=this.validateContactType(this.listenTo);if(null==this._interactionType){if(null!=this.contactMode&&""!=this.contactMode)throw"TODO: handle contactMode string";this._interactionType=Ia.ANY}},addLocalListeners:function(a,b,c,d){return this.addListeners(this.listenFrom,this.listenTo,this._interactionType,a,b,c,d)},addListeners:function(a,b,c,d,e,h,n){null==c&&(c=Ia.ANY);if(null==
a||null==b)throw"Need both listenFrom and listenTo";null!=d&&this.addContactListener(Ba.BEGIN,c,a,b,this.owner,d);null!=e&&this.addContactListener(Ba.END,c,a,b,this.owner,e);null!=h&&this.addContactListener(Ba.PRELISTENER,c,a,b,this.owner,h);null!=n&&this.addContactListener(Ba.ONGOING,c,a,b,this.owner,n)},addContactListener:function(a,b,c,d,e,h,n){null==n&&(n=!1);this._contacts.add(new lj(this._system,a,b,c,d,e,h,n))},validateContactType:function(a){return null==a||""==a?"ANY_BODY":a},onStop:function(){null!=
this._contacts&&this._contacts.dispose();j.prototype.onStop.call(this)},__class__:ye});var mj=function(){this.adaptive=this.ongoing=this._fixedAngle=!1;this.unidirectional=!0;this.angle=-1;this.center=!1;this.force=3E3;ye.call(this)};g["stolo.ensys.physics.components.ForceField"]=mj;mj.__name__=["stolo","ensys","physics","components","ForceField"];mj.__super__=ye;mj.prototype=k(ye.prototype,{get_name:function(){return"ForceField_50"},dispose:function(){ye.prototype.dispose.call(this)},onStart:function(){ye.prototype.onStart.call(this);
this.addLocalListeners(l(this,this.onContactBegin),null,null,this.ongoing?l(this,this.onContactOnGoing):null);this.setAngle(this.angle)},onContactBegin:function(a,b){if(!this.enabled||!this.isValidContact(a,b))return!1;this.applyForce(a,this.getContactAngle(a,b));return!0},onContactOnGoing:function(a,b){if(!this.enabled||!this.isValidContact(a,b))return!1;this.applyForce(a,this.getContactAngle(a,b));return!0},isValidContact:function(a){return this._fixedAngle&&this.unidirectional&&0>a._compMap.PhysicsComponent_25.getVelocity().get_x()*
this.owner._compMap.TransformComponent_32.direction?!1:!0},getContactAngle:function(a,b){return this._fixedAngle?this.adaptive&&-1==this.owner._compMap.TransformComponent_32.direction?this._radians+Math.PI:this._radians:this.center||null==b?this.owner._compMap.PhysicsComponent_25.getAngle(a):b.angle},applyForce:function(a,b){a._compMap.PhysicsComponent_25.applyAngularImpulse(b,this.force)},setAngle:function(a){this.angle=a;-1==a?this._fixedAngle=!1:(this._fixedAngle=!0,this._radians=xe.radians(a+
-90))},__class__:mj});var wf=function(){this.resistanceX=this.resistanceY=-1;this.resistance=wf.defaultResistance;this.enabled=!0;j.call(this)};g["stolo.ensys.physics.components.AirFriction"]=wf;wf.__name__=["stolo","ensys","physics","components","AirFriction"];wf.__super__=j;wf.prototype=k(j.prototype,{get_name:function(){return"AirFriction_51"},dispose:function(){j.prototype.dispose.call(this);this._physics=null},onStart:function(){j.prototype.onStart.call(this);-1==this.resistanceX&&(this.resistanceX=
this.resistance);-1==this.resistanceY&&(this.resistanceY=this.resistance);this._physics=this.owner._compMap.PhysicsComponent_25},onUpdate:function(a){j.prototype.onUpdate.call(this,a);if(this.enabled){var b=this._physics.getBody();if(null!=b){var c;null==b.zpp_inner.wrap_vel&&b.zpp_inner.setupVelocity();c=b.zpp_inner.wrap_vel;0<this.resistanceX&&c.set_x(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this)-function(){c.zpp_inner.validate();return c.zpp_inner.x}(this)*this.resistanceX*a);0<
this.resistanceY&&c.set_y(function(){c.zpp_inner.validate();return c.zpp_inner.y}(this)-function(){c.zpp_inner.validate();return c.zpp_inner.y}(this)*this.resistanceY*a)}}},__class__:wf});var nj=function(){j.call(this)};g["stolo.ensys.components.SpawnPointComponent"]=nj;nj.__name__=["stolo","ensys","components","SpawnPointComponent"];nj.__super__=j;nj.prototype=k(j.prototype,{get_name:function(){return"SpawnPointComponent_52"},__class__:nj});var qb=function(){this._cooldown=0;this.onDeath=new T;this.onDamageCancelled=
new T;this.onDamage=new T;this.health=new Na(0);j.call(this)};g["stolo.ensys.components.HealthComponent"]=qb;qb.__name__=["stolo","ensys","components","HealthComponent"];qb.__super__=j;qb.prototype=k(j.prototype,{get_name:function(){return"HealthComponent_54"},dispose:function(){j.prototype.dispose.call(this);this._soundSystem=null},onAdded:function(){0<this.hits&&(this.maximum=this.hits);this.set(0<this.start?this.start:this.maximum)},onStart:function(){j.prototype.onStart.call(this);this._soundSystem=
E.getSystemEntity(this.owner)._compMap.SoundSystem_27;null!=this.owner._compMap.PhysicsComponent_25&&this.owner._compMap.PhysicsComponent_25.addContactType("DAMAGEABLE")},onUpdate:function(a){0<this._cooldown&&(this._cooldown-=a);j.prototype.onUpdate.call(this,a)},onStop:function(){j.prototype.onStop.call(this);this.onDeath=this.onDamage=this.onDamageCancelled=null},modify:function(a){this.health.set__(Math.min(Math.max(0,this.health._value+a),this.maximum));return this.health._value},set:function(a){this.health.set__(Math.min(Math.max(0,
a),this.maximum));return this.health._value},value:function(){return this.health._value/this.maximum},isDead:function(){return 0>=this.health._value},canDamage:function(){return this.invincible||0>=this.health._value?!1:!0},damage:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);if(0<this._cooldown)return!1;if(!this.canDamage())return this.invincible&&null!=this.invincibleSound&&!this.isDead()&&this._soundSystem.play(this.invincibleSound,this.owner,qb.SOUND_CHANNEL),this.onDamageCancelled.emit(b),
!1;0<this.hits?(this.modify(-1),this.lastDamage=1):(this.modify(-a),this.lastDamage=a);0<this.cooldown&&(this._cooldown=this.cooldown);null!=this.damageSound&&!this.isDead()&&this._soundSystem.play(this.damageSound,this.owner,qb.SOUND_CHANNEL);(0!=this.knock&&0!=c||0!=d)&&this.knockPhysics(b,c,d,this.knock);this.onDamage.emit(b);this.isDead()&&this.die(b);return!0},die:function(a){this.health.set__(0);""!=this.deathSound&&this._soundSystem.play(this.deathSound,this.owner,qb.SOUND_CHANNEL_DEATH);if(this.disposeOwner)E.getSystemEntity(this.owner),
E.getSystemEntity(this.owner).getComponent("ActorSystem_4").removeActor(this.owner);else if(this.removePhysics){var b=this.owner._compMap.PhysicsComponent_25;null!=b&&b.enable(!1)}this.onDeath.emit(a)},knockPhysics:function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);if(0!=d){var e=this.owner._compMap.PhysicsComponent_25,h=this.owner._compMap.TransformComponent_32;null!=e&&!e.kinematic&&e.setVelocity(b*d*(a._compMap.TransformComponent_32.position.x>h.position.x?-1:1),-c*d)}},__class__:qb});
var ze=function(){this._timer=0;this.ignoreActors=[];this.assetDisplayType="image";this.assetBase=1;this.assetIndex=0;j.call(this)};g["stolo.ensys.components.LauncherComponent"]=ze;ze.__name__=["stolo","ensys","components","LauncherComponent"];ze.__super__=j;ze.prototype=k(j.prototype,{get_name:function(){return"LauncherComponent_57"},onStart:function(){this._timer=this.shotDelay;E.getSystemEntity(this.owner);this._actors=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");E.getSystemEntity(this.owner);
this._sounds=E.getSystemEntity(this.owner).getComponent("SoundSystem_27");this._transform=this.owner._compMap.TransformComponent_32},onStop:function(){j.prototype.onStop.call(this);this._sounds=this._actors=this._transform=null},onUpdate:function(a){0<this._timer&&(this._timer-=a)},launch:function(a){if(null==this._transform||0<this._timer)return null;var b=this.projectile,c=this.offset,d=this.force,e=this.angle;null!=a&&(null!=a.projectile&&(b=a.projectile),null!=a.offset&&(c=a.offset),null!=a.force&&
(d=a.force),null!=a.angle&&(e=a.angle));this._timer=null!=a&&null!=a.shotDelay?a.shotDelay:this.shotDelay;a=3.141592653589793*this._transform.rotation/180;e=a+3.141592653589793*e/180;""!=this.launchSound&&this._sounds.play(this.launchSound,this.owner,"LAUNCHER");b={template:{key:b},transform:{position:{x:this._transform.position.x+this._transform.direction*c.x*Math.cos(a)-c.y*Math.sin(a),y:this._transform.position.y+c.y*Math.cos(a)+c.x*Math.sin(a)},rotation:180*e/3.141592653589793*this._transform.direction,
direction:this._transform.direction},physics:{impulse:{x:Math.cos(e)*d*this._transform.direction,y:Math.sin(e)*d}}};null!=this.asset&&0<this.assetMax&&(c=this.getNextAsset(),b[this.assetDisplayType]={asset:c});b=this._actors.spawn(b);c=b._compMap.ProjectileComponent_58;null!=c&&(d=this.ignoreActors.slice(),d.push(this.owner),c.ignoreActors=d);return b},getNextAsset:function(){var a=this.assetBase;"linear"==this.assetProgression?(a+=this.assetIndex,this.assetIndex++,this.assetIndex>=this.assetMax&&
(this.assetIndex=0)):a+=Math.round(Math.random()*(this.assetMax-this.assetBase));return this.asset+a},__class__:ze});var mf=function(){this.angleSpread=50;this.projectiles=0;ze.call(this)};g["stolo.ensys.components.ExploderComponent"]=mf;mf.__name__=["stolo","ensys","components","ExploderComponent"];mf.__super__=ze;mf.prototype=k(ze.prototype,{explode:function(){for(var a=0,b=this.projectiles;a<b;)this.launch({angle:this.getNextAngle(a++),shotDelay:0})},getNextAngle:function(){return this.getRandomAngle()},
getRandomAngle:function(){return this.angle+Math.random()*this.angleSpread-0.5*this.angleSpread},__class__:mf});var Bg=function(){this._removeIn=0;this.onExploded=new T;this.onExplode=new T;this.ignoreActors=[];this.exploded=!1;j.call(this)};g["stolo.ensys.components.ProjectileComponent"]=Bg;Bg.__name__=["stolo","ensys","components","ProjectileComponent"];Bg.__super__=j;Bg.prototype=k(j.prototype,{get_name:function(){return"ProjectileComponent_58"},onStart:function(){j.prototype.onStart.call(this);
E.getSystemEntity(this.owner);this._actorSystem=E.getSystemEntity(this.owner).getComponent("ActorSystem_4");E.getSystemEntity(this.owner);this._physicSystem=E.getSystemEntity(this.owner).getComponent("PhysicSystem_26");E.getSystemEntity(this.owner);this._soundSystem=E.getSystemEntity(this.owner).getComponent("SoundSystem_27");this._sprite=this.owner._compMap.Sprite_5;this._animation=null!=q.instance(this.owner._compMap.Sprite_5,mb)?this._sprite:null;this._physics=this.owner._compMap.PhysicsComponent_25;
this._transform=this.owner._compMap.TransformComponent_32;null!=this._physics&&(this._physics.addContactType("PROJECTILE"),this._physicSystem.addContactListener(Ba.PRELISTENER,Ia.COLLISION,"PROJECTILE",this.target,this.owner,l(this,this.onContactBegin)));this._removeIn=this.expire;if(null!=this._animation){this.velocityRotation&&this._animation.rotation.set__(0);var a=this._animation.animation;null!=a&&a.hasAnim("shoot")&&a.hasAnim("idle")&&(a.gotoAndPlay(["shoot","idle"]).loop=!1)}},onStop:function(){this._physicSystem.removeContactListener(Ba.PRELISTENER,
Ia.COLLISION,"PROJECTILE",this.target,this.owner);j.prototype.onStop.call(this);this._soundSystem=this._physicSystem=this._actorSystem=this._transform=this._animation=this._physics=this._sprite=this.onExploded=this.onExplode=this.ignoreActors=null},onUpdate:function(a){if(this.exploded||0<this.expire)0<this._removeIn?this._removeIn-=a:this._actorSystem.removeActor(this.owner);!this.exploded&&this.velocityRotation&&(a=this._physics.getVelocity(),null!=this._animation&&(a.zpp_inner.validate(),0>a.zpp_inner.y?
this._animation.rotation.set__(0):this._animation.rotation.set__(180)))},onContactBegin:function(a){var b=a._compMap.PhysicsComponent_25;if(null==b||b.hasContactType("PROJECTILE")&&this.ignoreProjectiles)return!1;for(var b=0,c=this.ignoreActors;b<c.length;){var d=c[b];++b;if(d==a)return!1}this.exploded||this.explode();return!0},explode:function(){if(!this.exploded){this.onExplode.emit(this.owner);this.exploded=!0;this._removeIn=this.removeAfter;if(null!=this._animation){var a=this._animation.animation;
null!=a&&a.hasAnim("explode")&&(a.gotoAndPlay("explode",{onComplete:l(this,this.onExplodeComplete)}),this._removeIn=999,""!=this.explodeSound&&this._soundSystem.play(this.explodeSound,this.owner,"PROJECTILE"),this._animation.rotation.set__(0),this._transform.rotation=0,this._transform.fixedRotation=!0)}else this.onExploded.emit(this.owner);null!=this._physics&&this.stopPhysicOnExplode&&(this._physics.enable(!1),""!=this.hitSound&&this._soundSystem.play(this.hitSound,this.owner,"PROJECTILE"))}},onExplodeComplete:function(){this._removeIn=
-1;null!=this._animation&&this._animation.animation.stop();this.onExploded.emit(this.owner)},__class__:Bg});var Cg=function(){this._activated=!1;j.call(this)};g["stolo.ensys.components.PlatformComponent"]=Cg;Cg.__name__=["stolo","ensys","components","PlatformComponent"];Cg.__super__=j;Cg.prototype=k(j.prototype,{get_name:function(){return"PlatformComponent_61"},onStart:function(){this._physics=this.owner._compMap.PhysicsComponent_25;this._initPosition=new La(this.owner._compMap.TransformComponent_32.position.x,
this.owner._compMap.TransformComponent_32.position.y);this._script=this.owner._compMap.Script_28;null==this._script&&(this._script=new Sb,this.owner.add(this._script));this._activated&&(this._activated=!1);this.activate()},onStop:function(){j.prototype.onStop.call(this);this._position=this._sequence=this._physics=this._script=null},onUpdate:function(a){null!=this._position&&(this._position.update(a),this._physics.setPosition(this._position.x._value,this._position.y._value,0.6))},startSequence:function(){if(!this.repeat&&
null!=this._sequence)this._script.run(this._sequence);else if(!(null==this.sequence||null!=this._sequence)){var a=this.sequence.actions;this._position=new Ib(this._initPosition.x,this._initPosition.y);var b={x:this._position.x,y:this._position.y,offsetX:this._initPosition.x,offsetY:this._initPosition.y};null==this.sequence.loop&&(this.sequence.loop=!0);this.repeat=this.sequence.yoyo||this.sequence.loop;this._sequence=Fa.getMovementSequence(a,b,this.sequence.loop,this.sequence.yoyo,this.sequence.delay);
this._sequence.add(new ab(l(this,this.onSequenceComplete)));this._script.run(this._sequence)}},onSequenceComplete:function(){null!=this._script&&(this.repeat?this._script.run(this._sequence):this._activated=!1)},activate:function(){this._activated||(this._activated=!0,null!=this.sequence&&this.startSequence())},__class__:Cg});var Ue=function(){j.call(this)};g["stolo.mods.components.ModsComponent"]=Ue;Ue.__name__=["stolo","mods","components","ModsComponent"];Ue.__super__=j;Ue.prototype=k(j.prototype,
{get_name:function(){return"ModsComponent_39"},onStart:function(){j.prototype.onStart.call(this);null!=this.mods&&this.applyMods(this.mods)},applyMods:function(a){for(var b=this.owner.firstComponent;null!=b;){var c=J.getComponentName(b),c=y.field(a,c);null!=c&&this.applyComponentMods(b,c);b=b.next}},applyComponentMods:function(a,b){U.applyMods(a,b)},__class__:Ue});var Dg=function(){j.call(this)};g["stolo.mods.components.StatsModsComponent"]=Dg;Dg.__name__=["stolo","mods","components","StatsModsComponent"];
Dg.__super__=Ue;Dg.prototype=k(Ue.prototype,{onStart:function(){Ue.prototype.onStart.call(this);null!=this.stats&&this.applyStats(this.stats,this.source)},applyStats:function(a,b){null==b&&(b=this.source);null==b&&(b=Dg.defaultSource);if(null==b)throw"No statistic source to apply!";for(var c=0,d=y.fields(a);c<d.length;){var e=d[c];++c;var h=0;Object.prototype.hasOwnProperty.call(a,e)&&(h=y.field(a,e));e=y.field(b,e);null!=e&&(h=e[h],null!=h&&this.applyMods(h))}},__class__:Dg});var Ol=function(){};
g["stolo.ensys.components.DefaultComponents"]=Ol;Ol.__name__=["stolo","ensys","components","DefaultComponents"];var Ve=function(a){this.parallax={x:1,y:1};Dc.call(this);this.data=a;this._name=a.name;null!=a.parallax&&(this.parallax.x=q.parseFloat(a.parallax.x),this.parallax.y=q.parseFloat(a.parallax.y));a.alpha&&this.setAlpha(a.alpha)};g["stolo.ensys.display.LayerSprite"]=Ve;Ve.__name__=["stolo","ensys","display","LayerSprite"];Ve.__super__=Dc;Ve.prototype=k(Dc.prototype,{getName:function(){return this._name},
move:function(a,b){null!=this.offset&&(a+=this.offset.x,b+=this.offset.y);this.setXY(a*this.parallax.x,b*this.parallax.y)},__class__:Ve});var oj=function(a,b,c,d){null==d&&(d=100);this._width=this._height=1E3;this._size=100;Ve.call(this,a);this._width=b;this._height=c;this._size=d;this.setAlpha(0.4);this.construct()};g["stolo.ensys.display.LayerGridSprite"]=oj;oj.__name__=["stolo","ensys","display","LayerGridSprite"];oj.__super__=Ve;oj.prototype=k(Ve.prototype,{draw:function(a){a.drawTexture(this._texture,
(-Math.floor(this.x._value/this._size)-1)*this._size,(-Math.floor(this.y._value/this._size)-1)*this._size)},construct:function(){var a=Math.ceil(this._width/this._size)+1,b=Math.ceil(this._height/this._size)+1;this._gridTexture=A.getPack("debug").getTexture("grid");this._texture=u._platform.getRenderer().createTexture(a*this._size,b*this._size);for(var c=this._texture.get_graphics(),d=0;d<a;)for(var e=d++,h=0;h<b;){var n=h++;c.drawTexture(this._gridTexture,e*this._size,n*this._size)}},__class__:oj});
var kc=function(a){this.storagePrefix="editor";this.roundValues=!0;this.preventReload=!1;this.onEditorLoaded=new pa;this.onEditorReady=new pa;Vb.call(this);pj.init();this.levelData=a};g["stolo.ensys.editor.EditorSystem"]=kc;kc.__name__=["stolo","ensys","editor","EditorSystem"];kc.__super__=Vb;kc.prototype=k(Vb.prototype,{buildSubSystems:function(){Vb.prototype.buildSubSystems.call(this);this.level.onLevelLoaded.connect(l(this,this.onLevelLoaded));this.camera.enabled=!1;this.clipboard=new qj;this.owner.add(this.clipboard);
this.tool=new rj;this.owner.add(this.tool);this.shortcut=new sj;this.owner.add(this.shortcut);this.history=new tj;this.history.onCommand.connect(l(this,this.onCommand));this.owner.add(this.history);this.selection=new uj;this.owner.add(this.selection);this.document=new vj;this.owner.add(this.document);this.rendererState=new wj(this);this.owner.add(this.rendererState);this.dialog=new xj;this.owner.add(this.dialog);this.logic=new yj;this.logic.onComplete.connect(l(this,this.onLogicComplete));this.owner.add(this.logic);
window.onbeforeunload=l(this,this.onWindowBeforeUnload);Mb.focusOnCanvas();this.onEditorReady.emit()},onLevelLoaded:function(){fa.main.load()},onCommand:function(){this.document.isDirty=!0},onWindowBeforeUnload:function(){if(this.document.isDirty||this.preventReload){if(this.document.isDirty)this.document["export"]();return"Dude, are you sure you want to leave? Think of the kittens!"}return null},buildLevel:function(){this.level=new zj;this.owner.add(this.level)},onLogicComplete:function(){this.onEditorLoaded.emit()},
__class__:kc});var Va=function(a){this._system=a};g["stolo.ensys.editor.actions.Action"]=Va;Va.__name__=["stolo","ensys","editor","actions","Action"];Va.prototype={execute:function(){throw"action execute not implemented";},__class__:Va};var Aj=function(a){this._system=a};g["stolo.ensys.editor.actions.BringToFrontAction"]=Aj;Aj.__name__=["stolo","ensys","editor","actions","BringToFrontAction"];Aj.__super__=Va;Aj.prototype=k(Va.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=
a.length)if(1==a.length)this._system.history.add(new We(a[0],!0));else{for(var b=new Xe,c=0;c<a.length;){var d=a[c];++c;b.add(new We(d,!0))}this._system.history.add(b)}},__class__:Aj});var Eg=function(a){this._system=a};g["stolo.ensys.editor.actions.CopyAction"]=Eg;Eg.__name__=["stolo","ensys","editor","actions","CopyAction"];Eg.__super__=Va;Eg.prototype=k(Va.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length){for(var b=[],c=0;c<a.length;){var d=a[c];++c;d=d._compMap.EditorMetaComponent_13;
null!=d&&b.push(U.clone(d.getTemplate()))}this._system.clipboard.set(b)}},__class__:Eg});var Bj=function(a){this._system=a};g["stolo.ensys.editor.actions.DuplicateAction"]=Bj;Bj.__name__=["stolo","ensys","editor","actions","DuplicateAction"];Bj.__super__=Va;Bj.prototype=k(Va.prototype,{execute:function(){(new Eg(this._system)).execute();(new Fg(this._system)).execute()},__class__:Bj});var Fg=function(a){this.offset=new La(10,10);this._system=a};g["stolo.ensys.editor.actions.PasteAction"]=Fg;Fg.__name__=
["stolo","ensys","editor","actions","PasteAction"];Fg.__super__=Va;Fg.prototype=k(Va.prototype,{execute:function(){var a=U.clone(this._system.clipboard.get());if(0!=a.length){for(var b=new Xe,c=0;c<a.length;){var d=a[c];++c;b.add(this.createSpawnCommand(d))}this._system.history.add(b);this._system.selection.clear();a=0;for(b=b.get_commands();a<b.length;)c=b[a],++a,this._system.selection.add(X.__cast(c,xf).actor)}},createSpawnCommand:function(a){a=U.clone(a);null==a.transform&&(a.transform={});var b=
a.transform.position;null==b&&(b=a.transform.position={x:0,y:0});b.x+=this.offset.x;b.y+=this.offset.y;return new xf(this._system,a.template.key,b,a)},__class__:Fg});var Cj=function(a){this._system=a};g["stolo.ensys.editor.actions.RedoAction"]=Cj;Cj.__name__=["stolo","ensys","editor","actions","RedoAction"];Cj.__super__=Va;Cj.prototype=k(Va.prototype,{execute:function(){this._system.history.redo()},__class__:Cj});var Dj=function(a){this._system=a};g["stolo.ensys.editor.actions.SendToBackAction"]=
Dj;Dj.__name__=["stolo","ensys","editor","actions","SendToBackAction"];Dj.__super__=Va;Dj.prototype=k(Va.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length)if(1==a.length)this._system.history.add(new We(a[0],!1));else{for(var b=new Xe,c=0;c<a.length;){var d=a[c];++c;b.add(new We(d,!1))}this._system.history.add(b)}},__class__:Dj});var Ej=function(a){this._system=a};g["stolo.ensys.editor.actions.TestAction"]=Ej;Ej.__name__=["stolo","ensys","editor","actions","TestAction"];
Ej.__super__=Va;Ej.prototype=k(Va.prototype,{execute:function(){this._system.history.add(new Fj(this._system))},__class__:Ej});var Gj=function(a){this._system=a};g["stolo.ensys.editor.actions.UndoAction"]=Gj;Gj.__name__=["stolo","ensys","editor","actions","UndoAction"];Gj.__super__=Va;Gj.prototype=k(Va.prototype,{execute:function(){this._system.history.undo()},__class__:Gj});var Ga=function(a){null==a&&(a=ca.getClassName(ca.getClass(this)));this.label=this.name=a};g["stolo.ensys.editor.commands.Command"]=
Ga;Ga.__name__=["stolo","ensys","editor","commands","Command"];Ga.prototype={redo:function(){throw"redo not implemented";},undo:function(){throw"undo not implemented";},__class__:Ga};var Xe=function(){this._commands=[];Ga.call(this,"Compound")};g["stolo.ensys.editor.commands.CompoundCommand"]=Xe;Xe.__name__=["stolo","ensys","editor","commands","CompoundCommand"];Xe.__super__=Ga;Xe.prototype=k(Ga.prototype,{get_commands:function(){return this._commands},add:function(a){this._commands.push(a)},redo:function(){for(var a=
0,b=this._commands;a<b.length;){var c=b[a];++a;c.redo()}},undo:function(){for(var a=0,b=this._commands;a<b.length;){var c=b[a];++a;c.undo()}},__class__:Xe,__properties__:{get_commands:"get_commands"}});var We=function(a,b){null==b&&(b=!1);Ga.call(this,b?"Bring actor to front":"Send actor to back");this._actor=a;this._container=a.parent._compMap.Sprite_5;this._index=this._container.getChildIndex(a);this._bringToFront=b};g["stolo.ensys.editor.commands.DepthCommand"]=We;We.__name__=["stolo","ensys",
"editor","commands","DepthCommand"];We.__super__=Ga;We.prototype=k(Ga.prototype,{redo:function(){this._bringToFront?this._container.bringToFront(this._actor):this._container.sendToBack(this._actor)},undo:function(){this._container.setChildIndex(this._actor,this._index)},__class__:We});var Hj=function(a,b,c,d){var e=b._compMap.TemplateComponent_3;Ga.call(this,"Move actor '"+(null!=e?e.key:"unknown")+"' from "+q.string(c)+" to "+q.string(d));this.system=a;this.actor=b;this.from=c;this.to=d};g["stolo.ensys.editor.commands.MoveCommand"]=
Hj;Hj.__name__=["stolo","ensys","editor","commands","MoveCommand"];Hj.__super__=Ga;Hj.prototype=k(Ga.prototype,{redo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().moveActor(this.to.x,this.to.y,this.actor,!1,!1)},undo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().moveActor(this.from.x,this.from.y,this.actor,!1,!1)},__class__:Hj});var Ij=function(a,b,c,d,e){Ga.call(this,"Rotate actor '"+b._compMap.TemplateComponent_3.key+"' from "+c+" to "+
d);this.system=a;this.actor=b;this.from=c;this.to=d;this.snap=e};g["stolo.ensys.editor.commands.RotateCommand"]=Ij;Ij.__name__=["stolo","ensys","editor","commands","RotateCommand"];Ij.__super__=Ga;Ij.prototype=k(Ga.prototype,{redo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().rotateActor(this.to,this.actor,!1,this.snap)},undo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().rotateActor(this.from,this.actor,!1,this.snap)},__class__:Ij});var xf=
function(a,b,c,d){Ga.call(this,"Spawn actor '"+b+"'");this.system=a;this.templateName=b;this.position=c;this.data=d};g["stolo.ensys.editor.commands.SpawnCommand"]=xf;xf.__name__=["stolo","ensys","editor","commands","SpawnCommand"];xf.__super__=Ga;xf.prototype=k(Ga.prototype,{redo:function(){var a={template:{key:this.templateName},transform:{position:this.position}};null!=this.data&&(a=U.merge(this.data,a,!0));this.actor=this.system.level.spawnActor(a);this.system.selection.set(this.actor)},undo:function(){this.system.actors.removeActor(this.actor)},
__class__:xf});var Fj=function(a,b){null==b&&(b="trace command");Ga.call(this,"Trace");this.label=b;this._editor=a;this._text=b};g["stolo.ensys.editor.commands.TraceCommand"]=Fj;Fj.__name__=["stolo","ensys","editor","commands","TraceCommand"];Fj.__super__=Ga;Fj.prototype=k(Ga.prototype,{redo:function(){null},undo:function(){null},__class__:Fj});var ne=function(){this._disposer=new bb;this.smallStepX=this.smallStepY=-1;this.smallStep=10;this.stepX=this.stepY=-1;this.step=100;this.buttonSize=new La(30,
30);this.isActive=!1;this.fontStyle=kc.DEFAULT_FONT;j.call(this)};g["stolo.ensys.editor.component.BaseEditorResizer"]=ne;ne.__name__=["stolo","ensys","editor","component","BaseEditorResizer"];ne.__super__=j;ne.prototype=k(j.prototype,{get_name:function(){return"BaseEditorResizer_36"},onStart:function(){j.prototype.onStart.call(this);0>this.stepX&&(this.stepX=this.step);0>this.stepY&&(this.stepY=this.step);0>this.smallStepX&&(this.smallStepX=this.smallStep);0>this.smallStepY&&(this.smallStepY=this.smallStep);
this._buttonsX=this.addButtons(l(this,this.onIncreaseX),l(this,this.onDecreaseX));this._buttonsX._compMap.Sprite_5.setXY(0,-this.buttonSize.y);this._buttonsY=this.addButtons(l(this,this.onIncreaseY),l(this,this.onDecreaseY));this._buttonsY._compMap.Sprite_5.setXY(0,0);this._buttonsY._compMap.Sprite_5.setRotation(90);this.owner._compMap.EditorMetaComponent_13.onSelect.connect(l(this,this.onSelect));this.owner._compMap.EditorMetaComponent_13.onDeselect.connect(l(this,this.onDeselect));this.onDeselect(null)},
onSelect:function(){this.isActive=!0;this._buttonsX._compMap.Sprite_5.set_visible(!0);this._buttonsY._compMap.Sprite_5.set_visible(!0);this._disposer.add(u._platform.getKeyboard().up.connect(l(this,this.onKeyUp)))},onKeyUp:function(a){switch(a.key[1]){case 89:this.onIncreaseY(null);break;case 88:this.onDecreaseY(null);break;case 82:this.onIncreaseX(null);break;case 87:this.onDecreaseX(null)}},smallSteps:function(){return u._platform.getKeyboard().isDown(ne.SMALL_STEP_MODIFIER)},onDeselect:function(){this.isActive=
!1;this._buttonsX._compMap.Sprite_5.set_visible(!1);this._buttonsY._compMap.Sprite_5.set_visible(!1);this._disposer.dispose()},addButtons:function(a,b){var c=new o;c.add(new s);this.owner.addChild(c);var d=this.addButton("-",b);c.addChild(d.owner);d=this.addButton("+",a);d.setXY(this.buttonSize.x,0);c.addChild(d.owner);return c},addButton:function(a,b){var c=new o,d=new Da(10053375,this.buttonSize.x,this.buttonSize.y);d.alpha.set__(0.3);c.add(d);c=O.createTextSprite(a,this.fontStyle,c);c.set_pointerEnabled(!1);
c.set_align(Z.Center);c.centerAnchor();c.setXY(this.buttonSize.x/2,this.buttonSize.y/2);d.get_pointerDown().connect(b);return d},onIncreaseX:function(){this.smallSteps()},onDecreaseX:function(){this.smallSteps()},onIncreaseY:function(){this.smallSteps()},onDecreaseY:function(){this.smallSteps()},updateSelection:function(){var a=this.owner._compMap.EditorSelectionComponent_12;null!=a&&(a.dispose(),this.owner.add(new vf))},__class__:ne});var yf=function(){ne.call(this)};g["stolo.ensys.editor.component.EditorPatternResizer"]=
yf;yf.__name__=["stolo","ensys","editor","component","EditorPatternResizer"];yf.__super__=ne;yf.prototype=k(ne.prototype,{onStart:function(){ne.prototype.onStart.call(this);this._display=q.instance(this.owner._compMap.Sprite_5,Wc)},onIncreaseX:function(){this._display.width+=this.smallSteps()?this.smallStepX:this.stepX;this.owner._compMap.EditorMetaComponent_13.updateProperty(Wc.COMPONENT_NAME,"width",this._display.width);this.updateSelection()},onDecreaseX:function(){var a;a=this.smallSteps()?this.smallStepX:
this.stepX;this._display.width=q["int"](Math.max(this.stepX,this._display.width-a));this.owner._compMap.EditorMetaComponent_13.updateProperty(Wc.COMPONENT_NAME,"width",this._display.width);this.updateSelection()},onIncreaseY:function(){this._display.height+=this.smallSteps()?this.smallStepY:this.stepY;this.owner._compMap.EditorMetaComponent_13.updateProperty(Wc.COMPONENT_NAME,"height",this._display.height);this.updateSelection()},onDecreaseY:function(){var a;a=this.smallSteps()?this.smallStepY:this.stepY;
this._display.height=q["int"](Math.max(a,this._display.height-a));this.owner._compMap.EditorMetaComponent_13.updateProperty(Wc.COMPONENT_NAME,"height",this._display.height);this.updateSelection()},__class__:yf});var zf=function(){this._disposer=new bb;this.isActive=!1;this.fontStyle=kc.DEFAULT_FONT;this.lineSize=2;this.lineColor=-1;this.vertexSize=10;this.vertexColor=-1;this.color=16711680;this.drawLines=!1;this.targetProperty="shape";this.targetComponent="physics";this.buttonSize=new La(30,30);j.call(this)};
g["stolo.ensys.editor.component.EditorPolygons"]=zf;zf.__name__=["stolo","ensys","editor","component","EditorPolygons"];zf.__super__=j;zf.prototype=k(j.prototype,{get_name:function(){return"EditorPolygons_37"},onStart:function(){j.prototype.onStart.call(this);this.owner._compMap.EditorMetaComponent_13.onSelect.connect(l(this,this.onSelect));this.owner._compMap.EditorMetaComponent_13.onDeselect.connect(l(this,this.onDeselect));-1<this.color&&0>this.lineColor&&(this.lineColor=this.color);-1<this.color&&
0>this.vertexColor&&(this.vertexColor=this.color);this._buttons=this.addButtons();this._buttons.setXY(-30,-30);var a=this.owner._compMap.Sprite_5;a.set_pointerEnabled(!0);null!=a&&"sprite"==a.asset&&"debug"==a.pack&&(a.createSprite(),a.setAnchor(0,0),a.sprite.alpha.set__(0.2),this.drawLines&&a.sprite.alpha.set__(0));this.drawLines&&(this._lines=[],this.onSelect(null));this.onDeselect(null)},onSelect:function(){this.isActive=!0;this._buttons.set_visible(!0);if(null==this._container)if(this._container=
new s,this._container.set_pointerEnabled(!0),this.owner.addChild((new o).add(this._container)),this._physics=this.owner._compMap.PhysicsComponent_25,null!=this._physics)if(null!=this._physics.shape&&null!=this._physics.shape.points)this.setPoints(this._physics.shape.points),this._physics.onShapesCreated.connect(l(this,this.onPhysicsShapes)),this.onPhysicsShapes();else throw"No polygon on "+this.owner._compMap.TemplateComponent_3.key;else throw"Need physics component on "+this.owner._compMap.TemplateComponent_3.key;
this._container.set_visible(!0)},onPhysicsShapes:function(){if(this.drawLines){null!=this._physics&&this._physics.owner._compMap.PhysicsDebugComponent_24.sprite.set_visible(!1);for(var a=this._points.length,b,c,d,e=0;e<a;)b=e++,d=this._points[b],c=b==a-1?this._points[0]:this._points[b+1],null==this._lines[b]&&this._lines.push(new Yi(this.lineColor,this.lineSize)),b=this._lines[b],null==b.owner&&this.owner.addChild((new o).add(b),!1),b.fromTo(d.x,d.y,c.x,c.y)}},setPoints:function(a){this._points=a;
for(var b=0;b<a.length;){var c=a[b];++b;this.addPoint(c)}this.updateContainer()},updateContainer:function(){},addPoint:function(a){var b=new Jj;b.data=a;b.context=this.owner;b.color=this.vertexColor;b.size=this.vertexSize;b.disposer.add(b.onChange.connect(l(this,this.onVertexChanged)));b.disposer.add(b.onSelect.connect(l(this,this.onVertexSelect)));b.disposer.add(b.onDeselect.connect(l(this,this.onVertexDeselect)));this._container.owner.addChild((new o).add(b))},onVertexChanged:function(){null!=this._physics&&
(this._physics.createShapes(),this.updateContainer());this.owner._compMap.EditorMetaComponent_13.updateProperty(this.targetComponent,this.targetProperty,{points:this._points});this.owner._compMap.EditorMetaComponent_13.updateProperty(this.targetComponent,"offset",this.getCenter())},onVertexSelect:function(a){null!=this.currentVertex&&this.currentVertex!=a&&this.currentVertex.cancel();this.currentVertex=a;null!=this.currentVertex&&(a=this.owner._compMap.EditorMetaComponent_13,null!=a&&(a.moveEnabled=
!1))},onVertexDeselect:function(a){a==this.currentVertex&&(a=this.owner._compMap.EditorMetaComponent_13,null!=a&&(a.moveEnabled=!0))},onDeselect:function(){this.isActive=!1;this._buttons.set_visible(!1);null!=this._container&&this._container.set_visible(!1);this._disposer.dispose()},addButtons:function(){var a=new o;a.add(new s);this.owner.addChild(a);var b=this.addButton("-",l(this,this.onBtnRemove));a.addChild(b.owner);b=this.addButton("+",l(this,this.onBtnAdd));b.setXY(this.buttonSize.x,0);a.addChild(b.owner);
return a._compMap.Sprite_5},addButton:function(a,b){var c=new o,d=new Da(10053375,this.buttonSize.x,this.buttonSize.y);d.alpha.set__(0.3);c.add(d);c=O.createTextSprite(a,this.fontStyle,c);c.set_pointerEnabled(!1);c.set_align(Z.Center);c.centerAnchor();c.setXY(this.buttonSize.x/2,this.buttonSize.y/2);d.get_pointerDown().connect(b);return d},onBtnRemove:function(){if(null!=this.currentVertex)for(var a=0,b=0,c=this._points;b<c.length;){var d=c[b];++b;if(d==this.currentVertex.data){M.remove(this._points,
d);this.currentVertex.cancel();this.currentVertex.owner.dispose();this.onVertexChanged(this.currentVertex);break}a++}},onBtnAdd:function(){if(null!=this.currentVertex)for(var a=0,b=0,c=this._points;b<c.length;){var d=c[b];++b;if(d==this.currentVertex.data){this._points.splice(a+1,0,{x:d.x+10,y:d.y+10});this.addPoint(this._points[a+1]);this.onVertexChanged(null);break}a++}else this._points.push({x:0,y:0}),this.addPoint(this._points[this._points.length-1]),this.onVertexChanged(null)},getCenter:function(){for(var a=
this._points[0].x,b=this._points[0].x,c=this._points[0].y,d=this._points[0].y,e=1,h=this._points.length;e<h;){var n=e++;this._points[n].x<a?a=this._points[n].x:this._points[n].x>b&&(b=this._points[n].x);this._points[n].y<c?c=this._points[n].y:this._points[n].y>d&&(d=this._points[n].y)}return{x:(b-a)/2+a,y:(d-c)/2+c}},__class__:zf});var Ye=function(){j.call(this)};g["stolo.ensys.editor.component.EditorRemover"]=Ye;Ye.__name__=["stolo","ensys","editor","component","EditorRemover"];Ye.__super__=j;Ye.prototype=
k(j.prototype,{get_name:function(){return"EditorRemover_19"},onStart:function(){j.prototype.onStart.call(this);this.owner._internal_getFromParents("ActorSystem_4").removeActor(this.owner)},__class__:Ye});var pj=function(){};g["stolo.ensys.editor.component.EditorComponents"]=pj;pj.__name__=["stolo","ensys","editor","component","EditorComponents"];pj.init=function(){Ta.registerComponents(pj.map,!1)};var Kj=function(a){this.moveEnabled=!0;this.onDeselect=new T;this.onSelect=new T;j.call(this);this._template=
null==a?{}:a};g["stolo.ensys.editor.component.EditorMetaComponent"]=Kj;Kj.__name__=["stolo","ensys","editor","component","EditorMetaComponent"];Kj.__super__=j;Kj.prototype=k(j.prototype,{get_name:function(){return"EditorMetaComponent_13"},onAdded:function(){j.prototype.onAdded.call(this)},onRemoved:function(){j.prototype.onRemoved.call(this)},updateProperty:function(a,b,c){Object.prototype.hasOwnProperty.call(this._template,a)||y.setProperty(this._template,a,{});a=y.getProperty(this._template,a);
y.setProperty(a,b,c)},getTemplate:function(){return this._template},__class__:Kj});var Lj=function(){this.selection="";s.call(this)};g["stolo.ensys.editor.component.EditorSelectionInfo"]=Lj;Lj.__name__=["stolo","ensys","editor","component","EditorSelectionInfo"];Lj.__super__=s;Lj.prototype=k(s.prototype,{onStart:function(){s.prototype.onStart.call(this);this._text=K.getTextSprite("debug_font");this.owner.addChild((new o).add(this._text))},onUpdate:function(a){s.prototype.onUpdate.call(this,a);null!=
this.thumbnail?this._text.set_text(this.thumbnail):null!=this.current&&this.updateInfo()},show:function(a){this.current=a;this.updateInfo()},updateInfo:function(){if(!(null==this.current||null==this.current.firstComponent)){var a=this.current._compMap.TransformComponent_32;this.selection=this.current._compMap.TemplateComponent_3.key+": "+q.string(a.position.x)+","+q.string(a.position.y);this._text.set_text(this.selection)}},hide:function(){this.current=null;this._text.set_text(this.selection="")},
__class__:Lj});var Jj=function(){this.round=this.liveUpdate=!0;this.isSelected=this.isDragging=this.hasMoved=!1;this.lastPointerPosition=new La;this.disposer=new bb;this.size=10;this.color=16711680;this.onDeselect=new T;this.onSelect=new T;this.onChange=new T;j.call(this)};g["stolo.ensys.editor.component.EditorVertex"]=Jj;Jj.__name__=["stolo","ensys","editor","component","EditorVertex"];Jj.__super__=j;Jj.prototype=k(j.prototype,{get_name:function(){return"EditorVertex_38"},dispose:function(){j.prototype.dispose.call(this);
null!=this.disposer&&this.disposer.dispose();this.disposer=null},onStart:function(){this._display=new Da(this.color,this.size,this.size);this._display.centerAnchor();this._display.setAlpha(0.5);this._display.set_pointerEnabled(!0);this.owner.add(this._display);this._display.setXY(this.data.x,this.data.y);this.disposer.add(this._display.get_pointerDown().connect(l(this,this.onPointerDown)));this.disposer.add(u._platform.getPointer().up.connect(l(this,this.onPointerUp)));this.disposer.add(u._platform.getKeyboard().up.connect(l(this,
this.onKeyUp)))},onKeyUp:function(a){if(this.isSelected)switch(a.key[1]){case 83:this.deselect()}},onPointerDown:function(){this.isDragging=!0;this.select()},onPointerUp:function(){this.isDragging=!1;this.isSelected&&this.hasMoved&&this.deselect()},select:function(){this.isSelected||(this.isSelected=!0,this.hasMoved=!1,this.lastPointerPosition.set(u._platform.getPointer().get_x(),u._platform.getPointer().get_y()),this._display.setAlpha(1),this.onSelect.emit(this))},onUpdate:function(){this.isSelected&&
this.isDragging&&this.lastPointerPosition.x!=u._platform.getPointer().get_x()&&this.lastPointerPosition.y!=u._platform.getPointer().get_y()&&(this.hasMoved=!0,this._display.setXY(this._display.x._value+u._platform.getPointer().get_x()-this.lastPointerPosition.x,this._display.y._value+u._platform.getPointer().get_y()-this.lastPointerPosition.y),this.round&&this._display.setXY(Math.round(this._display.x._value),Math.round(this._display.y._value)),this.lastPointerPosition.set(u._platform.getPointer().get_x(),
u._platform.getPointer().get_y()),this.liveUpdate&&this.updateData())},deselect:function(){this.isSelected&&(this.isSelected=!1,this._display.setAlpha(0.5),this.onDeselect.emit(this),this.hasMoved&&this.updateData())},updateData:function(){this.data.x=this._display.x._value;this.data.y=this._display.y._value;this.onChange.emit(this)},cancel:function(){this.isDragging=this.hasMoved=!1;this.deselect()},__class__:Jj});var fa=function(a,b,c,d){this.folders=new C;s.call(this);this._system=b;null==c&&(null==
fa.main&&(fa.main=new Gg(b)),c=fa.main.gui);this.id=a;this.gui=c;null!=d&&U.configure(this,d)};g["stolo.ensys.editor.dialog.Dialog"]=fa;fa.__name__=["stolo","ensys","editor","dialog","Dialog"];fa.createGui=function(a){return new dat.GUI(a)};fa.__super__=s;fa.prototype=k(s.prototype,{onAdded:function(){s.prototype.onAdded.call(this)},getFolder:function(a){var b=this.folders.get(a);if(null==b){var c=b=this.gui.addFolder(a);this.folders.set(a,c);c}return b},getRangeController:function(a,b,c,d,e){null==
e&&(e=-1);var h=null;if(c instanceof Array&&null==c.__enum__)h=d.add(a,b,c[0],c[1]).listen();else if(0<c){var n=null;0>=e&&(e=1,10>c&&(e=0.25),5>c&&(e=0.1),1>=c&&(e=0.05),500<c&&(e=10));1>e&&(n=y.field(a,b),a[b]=0.1);h=d.add(a,b,0,c).listen().step(e);1>e&&(a[b]=n,h[b]=n)}return h},__class__:fa});var Mj=function(a){fa.call(this,"editor",a)};g["stolo.ensys.editor.dialog.EditorDialog"]=Mj;Mj.__name__=["stolo","ensys","editor","dialog","EditorDialog"];Mj.__super__=fa;Mj.prototype=k(fa.prototype,{onStart:function(){var a=
this;fa.prototype.onStart.call(this);this._folder=this.getFolder("Editor");this._data={snapX:this._system.logic.snapX,snapY:this._system.logic.snapY,snapRotation:this._system.logic.snapRotation,enablePhysics:this._system.logic.get_enablePhysics(),launch:function(){var b=a._system.document["export"](!1),c=a._system.document.getName();ea.set(c,b);ac.getURL("./?level="+c+"&levels_pack=storage")},"export":function(){a._system.document["export"]()}};this.gui.remember(this._data);this._folder.add(this._system.selection.info,
"selection").listen();this._folder.add(this._data,"snapX",0,100).step(10).listen().onChange(function(b){a._system.logic.snapX=b});this._folder.add(this._data,"snapY",0,100).step(10).listen().onChange(function(b){a._system.logic.snapY=b});this._folder.add(this._data,"snapRotation",0,180).step(5).listen().onChange(function(b){a._system.logic.snapRotation=b});this._folder.add(this._data,"enablePhysics").onChange(function(b){a._system.logic.set_enablePhysics(b)});this._folder.add(this._data,"export");
this._folder.add(this._data,"launch");var b=ac.getUrlParams();if(0!=b.width&&0!=b.height){var c=b.width,d=b.height;if(!(1E4<c||1E4<d)){var b=this._system.renderer.addLayer({name:"borders",parallax:{x:1,y:1},editor:{locked:!0}}),e=u._platform.getRenderer().createTexture(c,d),h=e.get_graphics();h.fillRect(16777215,0,0,c,2);h.fillRect(16777215,0,d-2,c,2);h.fillRect(16777215,0,0,2,d);h.fillRect(16777215,c-2,0,2,d);h.translate(0.5*c,0.5*d);h.fillRect(16777215,-10,-1,20,2);h.fillRect(16777215,-1,-10,2,
20);c=new Y(e);c.set_pointerEnabled(!1);b.owner.addChild((new o).add(c))}}},onUpdate:function(a){fa.prototype.onUpdate.call(this,a);this._data.snapX=this._system.logic.snapX;this._data.snapY=this._system.logic.snapY;this._data.snapRotation=this._system.logic.snapRotation;this._data.enablePhysics=this._system.logic.get_enablePhysics()},__class__:Mj});var Nj=function(a){this._opened=!0;this._folders=[];this.skipTemplates=["disposer","editorSelection"];fa.call(this,"entity",a,fa.createGui());this._selection=
a.selection};g["stolo.ensys.editor.dialog.EntityDialog"]=Nj;Nj.__name__=["stolo","ensys","editor","dialog","EntityDialog"];Nj.__super__=fa;Nj.prototype=k(fa.prototype,{onStart:function(){fa.prototype.onStart.call(this);this._selection.onSelect.connect(l(this,this.onSelect));this._selection.onDeselect.connect(l(this,this.onDeselect))},addComponent:function(a){var b=J.getComponentName(a);!(null!=this.skipTemplates&&-1<this.skipTemplates.indexOf(b))&&null!=b&&(b=this.gui.addFolder(b),this._folders.push(b),
this.expose(a,b,["_flags"]))},onSelect:function(a){if(null!=this._currentEntity)this.onDeselect();this._currentEntity=a;null==this.gui&&(this.gui=fa.createGui({closed:!this._opened}));this.template=a._compMap.TemplateComponent_3.key;this.titleController=this.gui.add(this,"template");for(a=a.firstComponent;null!=a;)this.addComponent(a),a=a.next},onDeselect:function(){this._currentEntity=null;null!=this.gui&&(this._opened=!this.gui.closed,this.gui.destroy(),this.gui=null)},expose:function(a,b,c,d,e,
h){for(var f=this,g=[],i=null,i=null,j=[],k=this.getExcludes(a),l=0,m=y.fields(a);l<m.length;){var o=m[l];++l;!(null!=c&&-1<c.indexOf(o))&&!(null!=k&&-1<k.indexOf(o))&&(i=y.field(a,o),"boolean"!=typeof i&&"string"!=typeof i&&"number"!=typeof i&&(i|0)!==i?0<y.fields(i).length&&ca["typeof"](i)==N.TObject&&this.expose(i,b.addFolder(o),c,a,o):j.push(o))}if(0==j.length)return null;for(c=0;c<j.length;)i=[j[c]],++c,null!=h&&h.exists(i[0])?(k=h.get(i[0]),i=this.getRangeController(a,i[0],k,b)):i=b.add(a,i[0]).listen().onChange(function(b){return function(c){var h=
!1;d?(h=X.__instanceof(d,Gd),f.updateComponentMeta(d,e)):(h=X.__instanceof(a,Gd),f.updateProperty(a,b[0],c));h&&f.updateTransform()}}(i)),null!=i&&g.push(g);this.addMethods(a,b);return g},getExcludes:function(a){a=ca.getClass(a);if(null==a)return null;a=y.getProperty(a,"EDITOR_EXCLUDE");return null==a?null:a},addMethods:function(a,b){var c=ca.getClass(a);if(null!=c&&(c=y.getProperty(c,"EDITOR_METHODS"),null!=c))for(var d=0;d<c.length;){var e=c[d];++d;b.add(a,e)}},updateProperty:function(a,b,c){var d=
this._currentEntity._compMap.EditorMetaComponent_13,a=J.getComponentName(a);d.updateProperty(a,b,c)},updateComponentMeta:function(a,b){var c=this._currentEntity._compMap.EditorMetaComponent_13,d=J.getComponentName(a),e=y.field(a,b);c.updateProperty(d,b,e)},updateTransform:function(){var a=this._currentEntity._compMap.TransformComponent_32;this._system.tool.getCurrent().moveActor(a.position.x,a.position.y,this._currentEntity,!1,!1)},__class__:Nj});var Oj=function(a){fa.call(this,"history",a)};g["stolo.ensys.editor.dialog.HistoryDialog"]=
Oj;Oj.__name__=["stolo","ensys","editor","dialog","HistoryDialog"];Oj.__super__=fa;Oj.prototype=k(fa.prototype,{onStart:function(){var a=this;fa.prototype.onStart.call(this);this._folder=this.getFolder("History");this._data={undo:function(){a._system.history.undo()},redo:function(){a._system.history.redo()}};this._folder.add(this._data,"redo");this._folder.add(this._data,"undo")},__class__:Oj});var Gg=function(a){fa.call(this,"main",a,fa.createGui())};g["stolo.ensys.editor.dialog.MainDialog"]=Gg;
Gg.__name__=["stolo","ensys","editor","dialog","MainDialog"];Gg.__super__=fa;Gg.prototype=k(fa.prototype,{onAdded:function(){var a=this;fa.prototype.onAdded.call(this);this._rendererState=this._system.rendererState;this.gui._save=this.gui.save;this.gui.save=function(){var b=a.gui.preset;a.gui._save();null!=a._rendererState&&(a._rendererState.preset=b,a._rendererState.save())};this.gui._revert=this.gui.revert;this.gui.revert=function(){var b=a.gui.preset;null!=a._rendererState&&(a._rendererState.preset=
b,a._rendererState.load());a.gui._revert()}},load:function(){var a=this,b=this.gui.preset;this._rendererState.preset=b;this._rendererState.load();yd.delay(function(){a.gui.preset=b},50)},__class__:Gg});var Pj=function(a){this._layersLock=new C;fa.call(this,"renderer",a);this._renderer=a.renderer};g["stolo.ensys.editor.dialog.RendererDialog"]=Pj;Pj.__name__=["stolo","ensys","editor","dialog","RendererDialog"];Pj.__super__=fa;Pj.prototype=k(fa.prototype,{onStart:function(){var a=this;fa.prototype.onStart.call(this);
this._layers=this._renderer.getLayers();this._folder=this.getFolder("Renderer");this._data={x:this._renderer.displacement.x,y:this._renderer.displacement.y,scale:this._renderer.scale};this._folder.add(this._data,"x").listen().onChange(function(b){a._renderer.move(b,a._data.y)});this._folder.add(this._data,"y").listen().onChange(function(b){a._renderer.move(a._data.x,b)});this._folder.add(this._data,"scale",0.2,1).listen().onChange(function(b){a._renderer.setScale(b)});for(var b=this._system.rendererState.layersAlphaData,
c=this._system.rendererState.layersLockedData,d=this._folder.addFolder("Layers lock"),e=this._folder.addFolder("Layers alpha"),h=0,f=this._layers;h<f.length;){var g=[f[h]];++h;var i=g[0].getName(),j=g[0].data.editor;if(null==j||!0!=j.unlockable)y.setProperty(c,i,0==(g[0]._flags&4)),j=d.add(c,i).listen().onChange(function(a){return function(b){a[0].set_pointerEnabled(!b)}}(g)),this._layersLock.set(i,j),j;y.setProperty(b,i,g[0].alpha._value);e.add(b,i,0,1).listen().onChange(function(a){return function(b){a[0].setAlpha(b)}}(g))}this._system.rendererState.onLoad.connect(l(this,
this.onRenderStateLoaded))},onRenderStateLoaded:function(){for(var a,b=this._layersLock.keys();b.hasNext();){var c=b.next();a=this._layersLock.get(c);a.setValue(y.field(this._system.rendererState.layersLockedData,c))}},onUpdate:function(a){fa.prototype.onUpdate.call(this,a);this._data.scale=this._renderer.scale;this._data.x=this._renderer.displacement.x;this._data.y=this._renderer.displacement.y},__class__:Pj});var Yc=function(a){this._hasDisplay=!1;this.padding=2;s.call(this);this._template=a;this.templateKey=
this._template.template.key};g["stolo.ensys.editor.dialog.TemplateThumbnail"]=Yc;Yc.__name__=["stolo","ensys","editor","dialog","TemplateThumbnail"];Yc.getDisplayComponent=function(a){for(var b=0,a=y.fields(a);b<a.length;){var c=a[b];++b;if(-1!=Yc.spriteComponents.indexOf(c))return c}return null};Yc.__super__=s;Yc.prototype=k(s.prototype,{onAdded:function(){s.prototype.onAdded.call(this);this._background=new Da(16777215,50,50);this.owner.addChild((new o).add(this._background));try{this.createSimplifiedActor(Yc.getDisplayComponent(this._template))}catch(a){if(X.__instanceof(a,
String))this.createSimplifiedActor();else throw a;}this._textSprite=K.getTextSprite("debug_font");this._textSprite.set_text(this.templateKey);this.owner.addChild((new o).add(this._textSprite))},createSimplifiedActor:function(a){null!=this._displaySprite&&null!=this._displaySprite.owner&&(this._displaySprite.owner.parent.removeChild(this._displaySprite.owner),this._displaySprite=null);var b={transform:{}};null!=this._template.transform&&(U.configure(b.transform,this._template.transform),b.transform.fixed=
!0);null!=a?(this._hasDisplay=!0,y.setField(b,a,U.clone(y.field(this._template,a)))):(this._hasDisplay=!1,b.image={pack:"debug",asset:"sprite"});null!=this._template.customization&&(b.customization=U.clone(this._template.customization));a=J.create(b);this._displaySprite=a._compMap.Sprite_5;X.__cast(this._displaySprite,H).offset=null;X.__cast(this._displaySprite,H).applyOffset();this._displaySprite.centerAnchor();this.owner.addChild(a)},onStart:function(){s.prototype.onStart.call(this)},setSize:function(a,
b){var c=a-2*this.padding,d=b-2*this.padding;this._background.setSize(a,b);this._displaySprite.setScaleXY(1,1);var e=s.getBounds(this._displaySprite.owner),h=e.width,e=e.height,f=h/c,g=e/d;this._displaySprite.centerAnchor();var i=1;if(1<f||1<g)i=f>g?c/h:d/e,this._displaySprite.setScaleXY(i*(0<this._displaySprite.scaleX._value?1:-1),i);this._displaySprite.setXY(0.5*a,0.5*b);this._textSprite.setXY(this.padding,this.padding);this._textSprite.setWrapWidth(c)},setTextVisible:function(a){this._textSprite.set_visible(this._hasDisplay?
a:!0)},filter:function(a){if(""==a)return!0;a=a.toLowerCase();if(-1!=this.templateKey.toLowerCase().indexOf(a))return!0;var b=this._template.template.tags;if(null!=b&&-1!=b.toString().toLowerCase().indexOf(a))return!0;for(var b=0,c=y.fields(this._template);b<c.length;){var d=c[b];++b;if(-1!=d.toLowerCase().indexOf(a))return!0}return!1},__class__:Yc});var Qj=function(a){this._lastPointerUpTime=0;this._filter="";this._sprite=new s;this._container=new o;this._thumbnails=[];this._showLabel=!1;this._thumbnailMargin=
5;this._thumbnailSize=40;this._width=200;this._height=u._platform.getStage().get_height();fa.call(this,"editor",a);this._backgroundSprite=new Da(0,this._width,this._height);this._backgroundSprite.setAlpha(0.5)};g["stolo.ensys.editor.dialog.TemplatesDialog"]=Qj;Qj.__name__=["stolo","ensys","editor","dialog","TemplatesDialog"];Qj.__super__=fa;Qj.prototype=k(fa.prototype,{onStart:function(){var a=this;fa.prototype.onStart.call(this);this.owner.addChild((new o).add(this._backgroundSprite));this.owner.addChild(this._container.add(this._sprite));
this._sprite.set_visible(!1);this.createThumbnails();this._folder=this.getFolder("Templates");this._data={visible:0!=(this._flags&2),width:this._width,size:this._thumbnailSize,margin:this._thumbnailMargin,filter:this._filter,text:!1};this._folder.add(this._data,"visible").onChange(function(b){a.set_visible(b)});this._folder.add(this._data,"width",0,u._platform.getStage().get_width()).onChange(function(b){a._width=b;a.refresh()});this._folder.add(this._data,"size",20,200).step(10).onChange(function(b){a._thumbnailSize=
b;a.refresh()});this._folder.add(this._data,"margin",0,100).step(10).onChange(function(b){a._thumbnailMargin=b;a.refresh()});this._folder.add(this._data,"text").onChange(function(b){a._showLabel=b;a.refresh()});this._folder.add(this._data,"filter").onChange(function(b){a._filter=b;a.refresh()})},createThumbnails:function(){for(var a,b=0,c=J.getTemplateIds();b<c.length;)a=c[b],++b,a=J.getTemplate(a),Object.prototype.hasOwnProperty.call(a,Ye.COMPONENT_NAME)||(a=new Yc(a),this._container.addChild((new o).add(a)),
this._thumbnails.push(a),a.get_pointerUp().connect(l(this,this.onThumbnailPointerUp)));this.refresh();F.delayCallTo(l(this,this.refresh),0.1)},refresh:function(){this._sprite.set_visible(!0);for(var a=[],b=0,c=this._thumbnails;b<c.length;){var d=c[b];++b;d.filter(this._filter)?(d.set_visible(!0),d.setTextVisible(this._showLabel),a.push(d)):d.set_visible(!1)}b=Math.floor(this._width/(this._thumbnailSize+this._thumbnailMargin));c=0;for(d=a.length;c<d;){var e=c++,h=a[e];h.setSize(this._thumbnailSize,
this._thumbnailSize);h.setXY(this._thumbnailMargin+e%b*(this._thumbnailSize+this._thumbnailMargin),this._thumbnailMargin+Math.floor(e/b)*(this._thumbnailSize+this._thumbnailMargin))}this._backgroundSprite.setSize(this._width,this._thumbnailMargin+Math.floor(a.length/b)*(this._thumbnailSize+this._thumbnailMargin))},onUpdate:function(a){fa.prototype.onUpdate.call(this,a);var b=null;if(u._platform.getPointer().get_x()<this._backgroundSprite.getNaturalWidth()){if(50>u._platform.getPointer().get_y()&&
0>this._sprite.y._value){var c=this._sprite.y;c.set__(c._value+600*a)}else u._platform.getPointer().get_y()>this._height-50&&this._sprite.y._value>-this._backgroundSprite.getNaturalHeight()+this._height&&(c=this._sprite.y,c.set__(c._value-600*a));a=s.hitTest(this._container,u._platform.getPointer().get_x(),u._platform.getPointer().get_y());if(null!=a){if(null==a.owner._internal_getFromParents("Sprite_5",Yc))return;b=a.owner._internal_getFromParents("Sprite_5",Yc).templateKey}}this._system.selection.info.thumbnail=
b},onThumbnailPointerUp:function(a){if(0.3>u._platform.getTime()-this._lastPointerUpTime){for(var b=this._system.renderer.displacement,a=a.hit,c=null;null!=a&&null==c;)X.__instanceof(a,Yc)&&(c=a),a=null==a.owner?null:null==a.owner.parent?null:a.owner.parent._compMap.Sprite_5;if(null==c)return;this._system.history.add(new xf(this._system,c.templateKey,{x:0.5*this._system.renderer.dimensionsScaled.width-b.x,y:0.5*this._system.renderer.dimensionsScaled.height-b.y}))}this._lastPointerUpTime=u._platform.getTime()},
__class__:Qj});var Ae=function(a){this.preset="Default";this.isLoading=this.isSaving=!1;this.onSave=new T;this.onLoad=new T;j.call(this);this._system=a};g["stolo.ensys.editor.states.BaseEditorState"]=Ae;Ae.__name__=["stolo","ensys","editor","states","BaseEditorState"];Ae.__super__=j;Ae.prototype=k(j.prototype,{get_name:function(){return"BaseEditorState_30"},isBusy:function(){return this.isLoading||this.isSaving},save:function(a){if(!this.isBusy()&&(null==a&&(a=this.get()),null!=a)){this.isSaving=
!0;var b=JSON.stringify(a),c=this.getStorageprefix();ea.setWithPrefix(c,"renderer",b);this.onSave.emit(a);this.isSaving=!1}},get:function(){return{}},getStorageprefix:function(){return this._system.storagePrefix+this.preset+"_"},load:function(){if(!this.isBusy()){var a=this.getStorageprefix(),a=ea.getWithPrefix(a,"renderer");null!=a&&(this.isLoading=!0,a=JSON.parse(a),null!=a&&this.apply(a),this.onLoad.emit(a),this.isLoading=!1)}},apply:function(a){U.configure(this,a,!0)},__class__:Ae});var wj=function(a){this.layersLockedData=
{};this.layersAlphaData={};this.zoomMin=0.2;this.zoomMax=1;Ae.call(this,a)};g["stolo.ensys.editor.states.EditorRendererState"]=wj;wj.__name__=["stolo","ensys","editor","states","EditorRendererState"];wj.__super__=Ae;wj.prototype=k(Ae.prototype,{setRendererScale:function(a,b){null==b&&(b=!0);b&&(a+=this._system.renderer.scale);this._system.renderer.setScale(Math.max(this.zoomMin,Math.min(this.zoomMax,a)))},setRendererPosition:function(a,b,c){null==c&&(c=!1);c&&(a+=this._system.renderer.displacement.x,
b+=this._system.renderer.displacement.y);this._system.renderer.move(a,b)},load:function(){for(var a=0,b=this._system.renderer.getLayers();a<b.length;){var c=b[a];++a;c.getName();var d=c.data.editor;null!=d&&!0==d.locked&&c.set_pointerEnabled(!1)}Ae.prototype.load.call(this)},get:function(){if(null==this._system.renderer)return null;for(var a={renderer:{x:this._system.renderer.displacement.x,y:this._system.renderer.displacement.y,scale:this._system.renderer.scale},alpha:this.layersAlphaData,locked:this.layersLockedData},
b=0,c=this._system.renderer.getLayers();b<c.length;){var d=c[b];++b;var e=d.getName();this.layersAlphaData[e]=d.alpha._value;this.layersLockedData[e]=0==(d._flags&4)}return a},apply:function(a){null!=a.renderer&&(this.setRendererPosition(a.renderer.x,a.renderer.y),this.setRendererScale(a.renderer.scale,!1),y.deleteField(a,"renderer"));this.layersAlphaData={};this.layersLockedData={};var b;if(null!=a.locked){for(var c=0,d=y.fields(a.locked);c<d.length;){var e=d[c];++c;b=this._system.renderer.getLayer(e);
if(null!=b){var h=y.field(a.locked,e);b.set_pointerEnabled(!h);this.layersLockedData[e]=h}}y.deleteField(a,"locked")}if(null!=a.alpha){c=0;for(d=y.fields(a.alpha);c<d.length;)e=d[c],++c,b=this._system.renderer.getLayer(e),null!=b&&(h=y.field(a.alpha,e),0<=h&&(b.setAlpha(h),this.layersAlphaData[e]=h));y.deleteField(a,"alpha")}Ae.prototype.apply.call(this,a)},__class__:wj});var qj=function(){this._templates=[];j.call(this)};g["stolo.ensys.editor.system.ClipboardSystem"]=qj;qj.__name__=["stolo","ensys",
"editor","system","ClipboardSystem"];qj.__super__=j;qj.prototype=k(j.prototype,{get_name:function(){return"ClipboardSystem_9"},set:function(a){this._templates=a},get:function(){return this._templates},__class__:qj});var xj=function(){this._map=new C;j.call(this)};g["stolo.ensys.editor.system.DialogSystem"]=xj;xj.__name__=["stolo","ensys","editor","system","DialogSystem"];xj.__super__=j;xj.prototype=k(j.prototype,{get_name:function(){return"DialogSystem_18"},onAdded:function(){this._system=q.instance(this.owner._compMap.BaseGameSystem_8,
kc);this.container=new o;this.container.add(new s);this._disposer=this.owner._compMap.Disposer_34;this.build()},onStart:function(){j.prototype.onStart.call(this);null==this.container.parent&&this.owner.addChild(this.container)},onStop:function(){j.prototype.onStop.call(this);this._disposer=this.container=null},build:function(){this.createMainDialog();this.editor=this.add(new Mj(this._system),this.main.owner);this.renderer=this.add(new Pj(this._system),this.main.owner);this.history=this.add(new Oj(this._system),
this.main.owner);this.templates=this.add(new Qj(this._system),this.container);this.entity=this.add(new Nj(this._system))},createMainDialog:function(){this.main=fa.main=new Gg(this._system);this.main.setXY(u._platform.getStage().get_width(),u._platform.getStage().get_height());this.add(this.main)},add:function(a,b){null==b&&(b=this.container);this._map.set(a.id,a);a;b.addChild((new o).add(a));return a},onUpdate:function(a){j.prototype.onUpdate.call(this,a)},__class__:xj});var vj=function(){this.isDirty=
!1;j.call(this)};g["stolo.ensys.editor.system.DocumentSystem"]=vj;vj.__name__=["stolo","ensys","editor","system","DocumentSystem"];vj.__super__=j;vj.prototype=k(j.prototype,{get_name:function(){return"DocumentSystem_16"},onStart:function(){j.prototype.onStart.call(this);this._system=q.instance(this.owner._compMap.BaseGameSystem_8,kc);this.show()},onStop:function(){j.prototype.onStop.call(this)},getName:function(){var a=this._system.levelData.filename.split("/");return a[a.length-1]},"export":function(a){null==
a&&(a=!0);var b=this._system.actors.getAll();nb.sort(b,l(this,this.sortActors));for(var c=[],d,e=0;e<b.length;)d=b[e],++e,d=d._compMap.EditorMetaComponent_13,null!=d&&c.push(d.getTemplate());this._system.levelData.data.actors=c;b=this.getName();c=eg.print(this._system.levelData.data,null,"\t");ea.setWithPrefix(this._system.storagePrefix,b,c);this.isDirty=!1;a&&ac.getURL("./editor.html?json=true&level="+b+"&r="+Math.random());return c},show:function(){var a=ac.getUrlParams();if(null!=a.json&&null!=
a.level){var b=this.getName(),b=ea.getWithPrefix(this._system.storagePrefix,b),c=eval("document");c.title=a.level+".json';";c.body.innerHTML="<pre>"+q.string(b.toString())+"</pre>";null!=fa.main&&fa.main.gui.getRoot().destroy()}},sortActors:function(a,b){var c=a.parent._compMap.Sprite_5,d=b.parent._compMap.Sprite_5,e=this._system.renderer.getSprite().getChildIndex(c.owner),h=this._system.renderer.getSprite().getChildIndex(d.owner);return c==d?c.getChildIndex(a)>d.getChildIndex(b)?1:-1:e>h?1:-1},__class__:vj});
var je=function(){this.onLevelLoaded=new T;j.call(this)};g["stolo.ensys.system.LevelSystem"]=je;je.__name__=["stolo","ensys","system","LevelSystem"];je.__super__=j;je.prototype=k(j.prototype,{get_name:function(){return"LevelSystem_20"},onAdded:function(){this._actors=this.owner._compMap.ActorSystem_4;this._renderer=this.owner._compMap.RendererSystem_7},onRemoved:function(){j.prototype.onRemoved.call(this);this._renderer=this._actors=null},load:function(a){this.build(a.layers,a.actors);this.onLevelLoaded.emit(a)},
build:function(a,b){if(null==a)throw"No layers in level!";for(var c=0;c<a.length;){var d=a[c];++c;this._renderer.addLayer(d)}if(null!=b)for(c=0;c<b.length;)d=b[c],++c,null!=d.template&&(d.template.spawner=1),this.spawnActor(d)},spawnActor:function(a){return this._actors.spawn(a)},__class__:je});var zj=function(){je.call(this)};g["stolo.ensys.editor.system.EditorLevelSystem"]=zj;zj.__name__=["stolo","ensys","editor","system","EditorLevelSystem"];zj.__super__=je;zj.prototype=k(je.prototype,{onAdded:function(){je.prototype.onAdded.call(this);
this._system=q.instance(this.owner._compMap.BaseGameSystem_8,kc)},spawnActor:function(a){if(this._system.roundValues&&null!=a.transform&&(a.transform.position.x=Math.round(a.transform.position.x),a.transform.position.y=Math.round(a.transform.position.y),0<a.transform.rotation||0>a.transform.rotation))a.transform.rotation=Math.round(a.transform.rotation);var b=this._actors.spawn(a);b.add(new Kj(a));if(null==b._compMap.Sprite_5){a=new Wc;a.asset="sprite";a.pack="debug";a.width=a.height=10;var c=b._compMap.PhysicsComponent_25;
null!=c&&(c=c.getSize(),a.width=c.width,a.height=c.height);b.add(a)}return b},__class__:zj});var tj=function(){this.onCommand=new T;this.limit=50;j.call(this)};g["stolo.ensys.editor.system.HistorySystem"]=tj;tj.__name__=["stolo","ensys","editor","system","HistorySystem"];tj.__super__=j;tj.prototype=k(j.prototype,{get_name:function(){return"HistorySystem_15"},onStart:function(){j.prototype.onStart.call(this);this._redos=[];this._undos=[]},onStop:function(){j.prototype.onStop.call(this);this._redos=
this._undos=null},add:function(a,b){null==b&&(b=!0);b&&a.redo();this._redos.push(a);this._undos.splice(0,this._undos.length);this._undos.length>this.limit&&this._undos.splice(0,1);this.onCommand.emit(a)},redo:function(){var a=this._undos.pop();null!=a&&(a.redo(),this._redos.push(a),this.onCommand.emit(a))},undo:function(){var a=this._redos.pop();null!=a&&(a.undo(),this._undos.push(a),this.onCommand.emit(a))},__class__:tj});var yj=function(){this._enablePhysics=!1;this.snapRotation=45;this.snapX=this.snapY=
30;this.onComplete=new pa;j.call(this);H.ENABLE_POINTER=!0;Af.enabled=!0};g["stolo.ensys.editor.system.LogicSystem"]=yj;yj.__name__=["stolo","ensys","editor","system","LogicSystem"];yj.__super__=j;yj.prototype=k(j.prototype,{get_name:function(){return"LogicSystem_10"},onStart:function(){j.prototype.onStart.call(this);this._system=q.instance(this.owner._compMap.BaseGameSystem_8,kc);this._disposer=this.owner._compMap.Disposer_34;this._system.physics.enable(this.get_enablePhysics());this._disposer.add(this._system.shortcut.onAction.connect(l(this,
this.onAction)));this._disposer.add(u._platform.getKeyboard().down.connect(l(this,this.onKeyDown)));this._disposer.add(u._platform.getKeyboard().up.connect(l(this,this.onKeyUp)));this._system.shortcut.add(new Ej(this._system),[i.Shift,i.T]);this._system.shortcut.add(new Gj(this._system),[i.Control,i.Z]);this._system.shortcut.add(new Cj(this._system),[i.Control,i.Y]);this._system.shortcut.add(new Eg(this._system),[i.Control,i.C]);this._system.shortcut.add(new Bj(this._system),[i.Control,i.D]);this._system.shortcut.add(new Fg(this._system),
[i.Control,i.V]);this._system.shortcut.add(new Aj(this._system),[i.Control,i.F]);this._system.shortcut.add(new Dj(this._system),[i.Control,i.B]);this.setDefaultTool();this._system.level.load(this._system.levelData);this.onComplete.emit()},onStop:function(){j.prototype.onStop.call(this);this._disposer=this._system=null},setDefaultTool:function(){this._system.tool.set(new Rj(this._system))},onAction:function(a){a.execute()},onKeyUp:function(a){a.key==i.Space&&this.setDefaultTool()},onKeyDown:function(a){a.key==
i.Space&&this._system.tool.set(new Sj(this._system))},get_enablePhysics:function(){return this._enablePhysics},set_enablePhysics:function(a){null!=this._system&&this._system.physics.enable(a);return this._enablePhysics=a},__class__:yj,__properties__:k(j.prototype.__properties__,{set_enablePhysics:"set_enablePhysics",get_enablePhysics:"get_enablePhysics"})});var uj=function(){this.onDeselect=new pa;this.onSelect=new T;j.call(this)};g["stolo.ensys.editor.system.SelectionSystem"]=uj;uj.__name__=["stolo",
"ensys","editor","system","SelectionSystem"];uj.__super__=j;uj.prototype=k(j.prototype,{get_name:function(){return"SelectionSystem_11"},onStart:function(){j.prototype.onStart.call(this);this._actors=[];this.info=new Lj;this.info.setXY(210,10);this.owner.addChild((new o).add(this.info))},onStop:function(){this._actors=null;j.prototype.onStop.call(this)},contains:function(a){return-1!=this._actors.indexOf(a)},set:function(a){this.clear();this.add(a)},add:function(a){if(!(this.contains(a)||null==a)){this._actors.push(a);
a.add(new vf);var b=a._compMap.EditorMetaComponent_13;null!=b&&(b.isSelected=!0,b.onSelect.emit(a));this.onSelect.emit(a);this.info.show(a)}},remove:function(a){if(this.contains(a)&&null!=a){M.remove(this._actors,a);a.remove(a._compMap.EditorSelectionComponent_12);var b=a._compMap.EditorMetaComponent_13;null!=b&&(b.isSelected=!1,b.onDeselect.emit(a));this.onDeselect.emit();this.info.hide()}},toggle:function(a){null!=a&&(this.contains(a)?this.remove(a):this.add(a))},getAll:function(){for(var a=[],
b=0,c=this._actors;b<c.length;){var d=c[b];++b;a.push(d)}return a},clear:function(){for(var a=this.getAll(),b=0;b<a.length;){var c=a[b];++b;this.remove(c)}this.onDeselect.emit()},__class__:uj});var sj=function(){this.onAction=new T;j.call(this)};g["stolo.ensys.editor.system.ShortcutSystem"]=sj;sj.__name__=["stolo","ensys","editor","system","ShortcutSystem"];sj.__super__=j;sj.prototype=k(j.prototype,{get_name:function(){return"ShortcutSystem_17"},onStart:function(){j.prototype.onStart.call(this);this._disposer=
this.owner._compMap.Disposer_34;this._disposer.add(u._platform.getKeyboard().down.connect(l(this,this.onKeyDown)));this._actions=new db},onStop:function(){j.prototype.onStop.call(this);this._disposer=this._actions=null},add:function(a,b){this._actions.set(a,b)},onKeyDown:function(a){for(var b=this._actions.keys();b.hasNext();){for(var c=b.next(),d=this._actions.h[c.__id__],e=!0,h=0;h<d.length;){var f=d[h];++h;if(!u._platform.getKeyboard().isDown(f)&&a.key!=f){e=!1;break}}e&&this.onAction.emit(c)}},
__class__:sj});var rj=function(){j.call(this)};g["stolo.ensys.editor.system.ToolSystem"]=rj;rj.__name__=["stolo","ensys","editor","system","ToolSystem"];rj.__super__=j;rj.prototype=k(j.prototype,{get_name:function(){return"ToolSystem_14"},onStart:function(){j.prototype.onStart.call(this)},onStop:function(){j.prototype.onStop.call(this);this._tool=null},onUpdate:function(a){if(null!=this._tool)this._tool.onUpdate(a)},set:function(a){null!=this._tool&&this._tool.stop();this._tool=a;null!=this._tool&&
this._tool.start();return this._tool},getCurrent:function(){return this._tool},__class__:rj});var bc=function(a){this._started=!1;this._disposer=new bb;this._system=a};g["stolo.ensys.editor.tools.Tool"]=bc;bc.__name__=["stolo","ensys","editor","tools","Tool"];bc.prototype={onKeyRelease:function(){},onKeyPress:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){},onTap:function(){},onWheel:function(){},onUpdate:function(){},start:function(){this._disposer.add(u._platform.getPointer().down.connect(l(this,
this.onPointerDown)));this._disposer.add(u._platform.getPointer().move.connect(l(this,this.onPointerMove)));this._disposer.add(u._platform.getPointer().up.connect(l(this,this.onPointerUp)));this._disposer.add(u._platform.getKeyboard().down.connect(l(this,this.onKeyDown)));this._disposer.add(u._platform.getKeyboard().up.connect(l(this,this.onKeyUp)));this._disposer.add(u._platform.getMouse().scroll.connect(l(this,this.onMouseWheel)));this._started=!0},stop:function(){this._disposer.dispose();this._system=
null;this._started=!1},onKeyDown:function(a){if(this._started)this.onKeyPress(a.key)},onKeyUp:function(a){if(this._started)this.onKeyRelease(a.key)},onMouseWheel:function(a){if(this._started)this.onWheel(a)},onPointerDown:function(a){if(this._started){var b=this.findActor(a.viewX,a.viewY);this._pointer={drag:!1,x:0,y:0,xo:a.viewX,yo:a.viewY,xl:0,yl:0,distance:0,actor:b}}},onPointerMove:function(a){if(this._started&&null!=this._pointer)if(this._pointer.xl=this._pointer.x,this._pointer.yl=this._pointer.y,
this._pointer.x=a.viewX,this._pointer.y=a.viewY,this._pointer.distance=Math.sqrt(Math.pow(this._pointer.xo-this._pointer.x,2)+Math.pow(this._pointer.yo-this._pointer.y,2)),this._pointer.drag)this.onDrag(this._pointer);else 10<this._pointer.distance&&(this._pointer.drag=!0,this.onDragStart(this._pointer))},onPointerUp:function(){if(this._started&&null!=this._pointer){if(this._pointer.drag)this.onDragStop(this._pointer);else this.onTap(this._pointer);this._pointer=null}},findActor:function(a,b){var c=
s.hitTest(this._system.renderer.getContainer(),a,b);if(null==c)return null;for(c=c.owner;null!=c&&null==c._compMap.TransformComponent_32;)c=c.parent;return c},getRendererInverseScale:function(){return 1/this._system.renderer.scale},__class__:bc};var Rj=function(a){this._actorStartRotations=new db;this._actorStartPositions=new db;this._rotate=!1;this.selectorAlpha=0.5;this.selectorColor=65280;bc.call(this,a)};g["stolo.ensys.editor.tools.ActorTransformTool"]=Rj;Rj.__name__=["stolo","ensys","editor",
"tools","ActorTransformTool"];Rj.__super__=bc;Rj.prototype=k(bc.prototype,{start:function(){bc.prototype.start.call(this);u._platform.getMouse().set_cursor(wc.Default)},stop:function(){this._rotate=!1;this._positions=null;this.removeSelector();bc.prototype.stop.call(this)},onTap:function(a){a=a.actor;(null==a||!u._platform.getKeyboard().isDown(i.Shift))&&this._system.selection.clear();this._system.selection.toggle(a)},onDragStart:function(a){var b=a.actor;if(null!=b)if(u._platform.getKeyboard().isDown(i.Control))this._rotate=
!0;else{a=this._system.selection.contains(b)?this._system.selection.getAll():[b];this._positions=[];for(b=0;b<a.length;){var c=a[b];++b;var d=c._compMap.TransformComponent_32.position;this._positions.push(new La(d.x,d.y));d={x:d.x,y:d.y};this._actorStartPositions.set(c,d);d;d=c._compMap.TransformComponent_32.rotation;this._actorStartRotations.set(c,d);d}}else b=this._system.renderer.getLayers(),b=b[b.length-1],this._selector=(new o).add((new Da(this.selectorColor,1,1)).setAlpha(this.selectorAlpha).setXY(-this._system.renderer.displacement.x+
a.x*this.getRendererInverseScale(),-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale())),b.owner.addChild(this._selector)},getSelectedActors:function(){return this._system.selection.contains(this._selectedActor)?this._system.selection.getAll():[this._selectedActor]},onDrag:function(a){this._selectedActor=a.actor;if(null!=this._selector)q.instance(this._selector._compMap.Sprite_5,Da).setSize(this.getRendererInverseScale()*(a.x-a.xo),this.getRendererInverseScale()*(a.y-a.yo));else if(this._rotate){var b=
this._selectedActor._compMap.TransformComponent_32.position;this.rotateActor(zb.toDegrees(Math.atan2(-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale()-b.y,-this._system.renderer.displacement.x+a.x*this.getRendererInverseScale()-b.x)),this._selectedActor)}else if(null!=this._positions){this._system.selection.contains(this._selectedActor);for(var b=this.getSelectedActors(),c=0,d=0;d<b.length;){var e=b[d];++d;var h=this._positions[c],f=h.x+this.getRendererInverseScale()*(a.x-a.xo),
h=h.y+this.getRendererInverseScale()*(a.y-a.yo);this.moveActor(f,h,e,!1,!0);c++}}},onDragStop:function(a){if(null!=this._selector){var b=q.instance(this._selector._compMap.Sprite_5,Da),c=this._system.actors.getAll(),d=a.xo*this.getRendererInverseScale()-this._system.renderer.displacement.x,e;0>b.width._value?(e=d,d=e+b.width._value):e=d+b.width._value;var a=a.yo*this.getRendererInverseScale()-this._system.renderer.displacement.y,h;0>b.height._value?(h=a,a=h+b.height._value):h=a+b.height._value;for(b=
0;b<c.length;){var f=c[b];++b;if(!(null==f||null==f.parent)){var g=f.parent._compMap.Sprite_5;null==g||0==(g._flags&4)||(g=f._compMap.TransformComponent_32.position,d>g.x||e<g.x||a>g.y||h<g.y||this._system.selection.add(f))}}}else if(null!=this._positions||this._rotate){c=this._system.selection.contains(this._selectedActor);d=this.getSelectedActors();e=new Xe;for(a=0;a<d.length;)h=d[a],++a,this._rotate?e.add(new Ij(this._system,h,this._actorStartRotations.h[h.__id__],h._compMap.TransformComponent_32.rotation,
c?!1:!0)):(b=h._compMap.TransformComponent_32.position,e.add(new Hj(this._system,h,this._actorStartPositions.h[h.__id__],{x:b.x,y:b.y})));this._system.history.add(e,!1)}this._rotate=!1;this._positions=null;this.removeSelector()},onKeyRelease:function(a){var b=this._system.selection.getAll(),c;c=u._platform.getKeyboard().isDown(i.Shift)?1:this._system.logic.snapX;if(a==i.Backspace||a==i.Delete){for(var d=0;d<b.length;){var e=b[d];++d;this._system.actors.removeActor(e)}this._system.selection.clear()}if(a==
i.I)for(d=0;d<b.length;)++d,null;if(a==i.Left)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(-c,0,d,!0,!1);else if(a==i.Right)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(c,0,d,!0,!1);else if(a==i.Up)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(0,-c,d,!0,!1);else if(a==i.Down)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(0,c,d,!0,!1)},removeSelector:function(){null!=this._selector&&(this._selector.parent.removeChild(this._selector),this._selector=null)},moveActor:function(a,b,c,d,e){null==e&&(e=
!0);null==d&&(d=!1);var h=c._compMap.PhysicsComponent_25,f=c._compMap.Sprite_5,g=c._compMap.TransformComponent_32,c=c._compMap.EditorMetaComponent_13;c.moveEnabled&&(d&&(a+=g.position.x,b+=g.position.y),!u._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapX&&0!=this._system.logic.snapY&&e&&(a=Math.round(a/this._system.logic.snapX)*this._system.logic.snapX,b=Math.round(b/this._system.logic.snapY)*this._system.logic.snapY),null!=g&&(g.position.x=a,g.position.y=b),null!=h&&(h.forceUpdate=
!0,h.setPosition(a,b)),null!=f&&(f.forceUpdate=!0),null!=c&&c.updateProperty("transform","position",{x:this._system.roundValues?Math.round(a):a,y:this._system.roundValues?Math.round(b):b}))},rotateActor:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);var e=b._compMap.PhysicsComponent_25,h=b._compMap.Sprite_5,f=b._compMap.TransformComponent_32,b=b._compMap.EditorMetaComponent_13;c&&(a+=f.rotation);!u._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapRotation&&d&&(a=Math.round(a/
this._system.logic.snapRotation)*this._system.logic.snapRotation);null!=f&&(f.rotation=a);null!=e&&(e.forceUpdate=!0,e.setRotation(3.141592653589793*a/180));null!=h&&(h.forceUpdate=!0);null!=b&&b.updateProperty("transform","rotation",this._system.roundValues?Math.round(a):a)},__class__:Rj});var Sj=function(a){this.zoomSpeed=0.1;this.moveSpeedMultiplicator=5;this.moveSpeed=50;bc.call(this,a)};g["stolo.ensys.editor.tools.RendererTransformTool"]=Sj;Sj.__name__=["stolo","ensys","editor","tools","RendererTransformTool"];
Sj.__super__=bc;Sj.prototype=k(bc.prototype,{start:function(){bc.prototype.start.call(this);this._state=this._system.rendererState;u._platform.getMouse().set_cursor(wc.Button)},stop:function(){this._state.save();this._start=null;u._platform.getMouse().set_cursor(wc.Default);bc.prototype.stop.call(this)},onDragStart:function(){this._start=new La(this._system.renderer.displacement.x,this._system.renderer.displacement.y)},onDrag:function(a){null!=this._start&&this._state.setRendererPosition(this._start.x+
this.getRendererInverseScale()*(a.x-a.xo),this._start.y+this.getRendererInverseScale()*(a.y-a.yo))},onDragStop:function(){this._start=null;this._state.save()},onKeyRelease:function(a){var b=this.moveSpeed*this.getRendererInverseScale();u._platform.getKeyboard().isDown(i.Shift)&&(b*=this.moveSpeedMultiplicator);a==i.PageUp&&this._state.setRendererScale(this.zoomSpeed);a==i.PageDown&&this._state.setRendererScale(-this.zoomSpeed);a==i.Left?this._state.setRendererPosition(b,0,!0):a==i.Right?this._state.setRendererPosition(-b,
0,!0):a==i.Up?this._state.setRendererPosition(0,b,!0):a==i.Down&&this._state.setRendererPosition(0,-b,!0)},onWheel:function(a){var b=this._system.renderer.displacement.x,c=this._system.renderer.displacement.y,d=u._platform.getMouse().get_x()*this.getRendererInverseScale(),e=u._platform.getMouse().get_y()*this.getRendererInverseScale();this._state.setRendererScale(a/100);var a=u._platform.getMouse().get_x()*this.getRendererInverseScale(),h=u._platform.getMouse().get_y()*this.getRendererInverseScale();
this._state.setRendererPosition(b+(a-d),c+(h-e))},__class__:Sj});var E=function(){};g["stolo.ensys.helpers.ComponentHelper"]=E;E.__name__=["stolo","ensys","helpers","ComponentHelper"];E.getSystemEntity=function(a){return a.parent.parent.parent};E.inEditor=function(){if(-1!=E.isInEditor)return 1==E.isInEditor;E.isInEditor=null!=u.root._internal_getFromChildren("BaseGameSystem_8",kc)?1:0;return E.inEditor()};var Ta=function(){};g["stolo.ensys.helpers.SystemHelper"]=Ta;Ta.__name__=["stolo","ensys","helpers",
"SystemHelper"];Ta.init=function(a,b,c){null==c&&(c=!0);J.reset();Ta.registerComponents(b,c);Ta.loadTemplates(a)};Ta.registerComponents=function(a,b){null==b&&(b=!0);if(!Ta.defaultComponentsRegistered&&b){for(var c=Ol.ComponentMap,d=c.keys();d.hasNext();){var e=d.next();J.registerComponent(e,c.get(e))}Ta.defaultComponentsRegistered=!0}if(null!=a)for(c=a.keys();c.hasNext();)d=c.next(),J.registerComponent(d,a.get(d))};Ta.loadTemplates=function(a){for(var b=A.getPack(a).get_manifest().iterator();b.hasNext();){var c=
b.next();if(-1<c.name.indexOf(".json")){var d=A.getJSON(c.name,a,!0,!1);if(null==d)throw"Invalid actors file '"+c.name+"'";Ta.addTemplates(d)}}};Ta.addTemplates=function(a){for(var b=0;b<a.length;){var c=a[b];++b;Ta.addTemplate(c)}};Ta.addTemplate=function(a){J.addTemplate(a)};var lj=function(a,b,c,d,e,h,f,g){null==g&&(g=!1);if(null==a)throw"No physics system received";this._system=a;this._event=b;this._mode=c;this._type1=d;this._type2=e;this._entity=h;a.addContactListener(b,c,d,e,h,f,g)};g["stolo.ensys.physics.Contact"]=
lj;lj.__name__=["stolo","ensys","physics","Contact"];lj.__interfaces__=[gc];lj.prototype={dispose:function(){null!=this._system&&(this._system.removeContactListener(this._event,this._mode,this._type1,this._type2,this._entity),this._entity=this._type2=this._type1=this._mode=this._event=this._system=null)},__class__:lj};var Tj=function(){};g["stolo.ensys.physics.ContactArbiter"]=Tj;Tj.__name__=["stolo","ensys","physics","ContactArbiter"];Tj.__interfaces__=[gc];Tj.prototype={init:function(a,b){this._arbiter=
a;var c;b.zpp_inner.validate();c=b.zpp_inner.x;b.zpp_inner.validate();if(c=c==b.zpp_inner.y)b.zpp_inner.validate(),c=0==b.zpp_inner.x;this.angle=c?0:Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this));b.zpp_inner.validate();this.normaly=b.zpp_inner.y},dispose:function(){this._arbiter=null},disableFriction:function(){this._arbiter.set_dynamicFriction(0);this._arbiter.set_rollingFriction(0);this._arbiter.set_staticFriction(0)},
__class__:Tj};var f=function(){};g["zpp_nape.util.ZPP_Flags"]=f;f.__name__=["zpp_nape","util","ZPP_Flags"];var Ba=function(){};g["stolo.ensys.physics.ContactEvent"]=Ba;Ba.__name__=["stolo","ensys","physics","ContactEvent"];var Uj=function(a,b){null==b&&(b=!1);this._alwaysInverseNormal=this._acceptOnce=!1;this._contactArbiter=new Tj;this._entities=new db;this._alwaysInverseNormal=a;this._acceptOnce=b};g["stolo.ensys.physics.ContactListenerHandler"]=Uj;Uj.__name__=["stolo","ensys","physics","ContactListenerHandler"];
Uj.__interfaces__=[gc];Uj.prototype={dispose:function(){this._entities=null;this._contactArbiter.dispose();this._contactArbiter=null},addEntity:function(a,b){this._entities.set(a,b)},removeEntity:function(a){this._entities.remove(a)},onPreContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=null,e=a.zpp_inner.pre_arbiter.wrapper().get_collisionArbiter(),h=!0;if(null!=e&&(d=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),a.zpp_inner.int2.outer_i.get_castBody(),
function(){null==e.zpp_inner.colarb.wrap_normal&&e.zpp_inner.colarb.getnormal();return e.zpp_inner.colarb.wrap_normal}(this)),this._contactArbiter.init(e,d),d=this._contactArbiter,h=e.get_state(),null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1),!(h=h==f.PreFlag_ACCEPT)))h=e.get_state(),null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1),h=h==f.PreFlag_ACCEPT_ONCE;var a=this.getCallback(b),n=this.getCallback(c),g=!0,i=!0;null!=a&&null!=
c&&(g=a(c,d));null!=n&&null!=b&&(i=n(b,d));if(h&&g&&i){if(this._acceptOnce)return null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1),f.PreFlag_ACCEPT_ONCE;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1);return f.PreFlag_ACCEPT}if(this._acceptOnce)return null==f.PreFlag_IGNORE_ONCE&&(f.internal=!0,f.PreFlag_IGNORE_ONCE=new Ua,f.internal=!1),f.PreFlag_IGNORE_ONCE;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=
!1);return f.PreFlag_IGNORE},onOngoingContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},onContactBegin:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=this.getCallback(b),e=this.getCallback(c),h=null,n=a.zpp_inner.wrap_arbiters.at(0).get_collisionArbiter();if(null!=
n){h=n.get_state();null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1);if(h==f.PreFlag_IGNORE)return;a=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),a.zpp_inner.int2.outer_i.get_castBody(),function(){null==n.zpp_inner.colarb.wrap_normal&&n.zpp_inner.colarb.getnormal();return n.zpp_inner.colarb.wrap_normal}(this));this._contactArbiter.init(n,a);h=this._contactArbiter}null!=d&&null!=c&&d(c,h);null!=e&&null!=b&&e(b,h)},onContactEnd:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,
a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},getCallback:function(a){return null==a?null:this._entities.h[a.__id__]},fixNormal:function(a,b,c){var d=ra.get(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this),function(){c.zpp_inner.validate();return c.zpp_inner.y}(this),!0);if(this._alwaysInverseNormal||a.zpp_inner_i.id>b.zpp_inner_i.id)d.set_x(-1*function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)),
d.set_y(-1*function(){d.zpp_inner.validate();return d.zpp_inner.y}(this));return d},__class__:Uj};var Ia=function(){};g["stolo.ensys.physics.ContactMode"]=Ia;Ia.__name__=["stolo","ensys","physics","ContactMode"];var Aa=function(){};g["stolo.ensys.physics.ContactType"]=Aa;Aa.__name__=["stolo","ensys","physics","ContactType"];var Tc=function(){};g["stolo.ensys.physics.Materials"]=Tc;Tc.__name__=["stolo","ensys","physics","Materials"];Tc.get=function(a){return Tc._materialMap.exists(a)?Tc._materialMap.get(a):
y.getProperty(Tc,a)};Tc.add=function(a,b){Tc._materialMap.set(a,b);return!0};var Nl=function(){};g["stolo.ensys.physics.PhysicsFactory"]=Nl;Nl.__name__=["stolo","ensys","physics","PhysicsFactory"];Nl.createShape=function(a,b,c){var d=null,e;e=0<a.x||0>a.x?a.x:0;var h;h=0<a.y||0>a.y?a.y:0;if("box"==a.type||null==a.type){null==a.width&&(a.width=0);null==a.height&&(a.height=0);0>=a.width&&null!=b&&(a.width=b.getNaturalWidth());0>=a.height&&null!=b&&(a.height=b.getNaturalHeight());var d=a.width,f=a.height,
g=a.padding,i=a.docking;if(null!=b&&null!=i){var j=0.5*b.getNaturalWidth(),k=0.5*b.getNaturalHeight();0!=i.left&&0!=i.right?d=(i.left+i.right)*j:0!=i.left?e=-j+0.5*d:0!=i.right&&(e=j-0.5*d);0!=i.top&&0!=i.bottom?f=(i.top+i.bottom)*k:0!=i.top?h=-k+0.5*f:0!=i.bottom&&(h=k-0.5*f);null!=b.align&&(-1<b.align.indexOf("left")&&(e-=-j),-1<b.align.indexOf("top")&&(h-=-k))}null!=g&&(0!=g.left&&(d-=g.left,e+=0.5*g.left),0!=g.right&&(d-=g.right,e-=0.5*g.right),0!=g.top&&(f-=g.top,h+=0.5*g.top),0!=g.bottom&&(f-=
g.bottom,h-=0.5*g.bottom));0>=d&&(d=100);0>=f&&(f=100);a.finalw=d;a.finalh=f;d=new Cc(Cc.box(d,f,!0))}else if("circle"==a.type)d=new Vi(a.radius);else if("regular"==a.type)d=new Cc(Cc.regular(a.xRadius,a.yRadius,a.edge));else if("polygon"==a.type){b=[];d=a.points;for(f=0;f<d.length;)g=d[f],++f,b.push(ra.weak(g.x,g.y));d=new Cc(b)}a.finalx=e;a.finaly=h;if(null==d)return null;(0<a.rotation||0>a.rotation)&&d.rotate(xe.radians(a.rotation));b=null!=a.filter?a.filter:Xc.defaultShapeFilter;if(null!=b){f=
0;for(g=y.fields(b);f<g.length;)switch(i=g[f],++f,i){case "collisionMask":d.zpp_inner.filter.wrapper().set_collisionMask(y.field(b,i));break;case "collisionGroup":d.zpp_inner.filter.wrapper().set_collisionGroup(y.field(b,i));break;case "sensorGroup":d.zpp_inner.filter.wrapper().set_sensorGroup(y.field(b,i));break;case "sensorMask":d.zpp_inner.filter.wrapper().set_sensorMask(y.field(b,i));break;case "fluidGroup":d.zpp_inner.filter.wrapper().set_fluidGroup(y.field(b,i));break;case "fluidMask":d.zpp_inner.filter.wrapper().set_fluidMask(y.field(b,
i));break;default:null}}null!=a.material&&(b=Tc.get(a.material),null!=b?(d.zpp_inner.immutable_midstep("Shape::material"),d.zpp_inner.setMaterial(b.zpp_inner),d.zpp_inner.material.wrapper()):null);null!=a.fluid&&(d.zpp_inner.immutable_midstep("Shape::fluidEnabled"),d.zpp_inner.fluidEnabled=!0,null==d.zpp_inner.fluidProperties&&d.set_fluidProperties(new Te),d.zpp_inner.wake(),d.zpp_inner.fluidEnabled,null!=a.fluid.density&&(d.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==d.zpp_inner.fluidProperties&&
d.zpp_inner.setFluid((new Te).zpp_inner),d.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)),null!=a.fluid.viscosity&&(d.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==d.zpp_inner.fluidProperties&&d.zpp_inner.setFluid((new Te).zpp_inner),d.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));null!=c?d.set_localCOM(ra.weak(c.x+e,c.y+h)):d.set_localCOM(ra.get(e,h,!0));d.set_sensorEnabled(a.sensor);return d};var Fc=function(a,b){null==b&&(b=-1);this.color=
16776960;this.size=1;s.call(this);-1!=b&&(this.color=b);null!=a&&this.drawShape(a)};g["stolo.ensys.physics.debug.PhysicsDebugSprite"]=Fc;Fc.__name__=["stolo","ensys","physics","debug","PhysicsDebugSprite"];Fc.__super__=s;Fc.prototype=k(s.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},drawShape:function(a){if("box"==a.type||null==a.type){var b=Math.round(a.finalw),c=Math.round(a.finalh);if(b>Fc.maxSize||c>Fc.maxSize)b=Math.min(Fc.maxSize,a.finalw),c=Math.min(Fc.maxSize,
a.finalh);this.texture=u._platform.getRenderer().createTexture(b,c);var d=this.texture.get_graphics();d.fillRect(this.color,0,0,b,this.size);d.fillRect(this.color,0,c-this.size,b,this.size);d.fillRect(this.color,0,0,this.size,c);d.fillRect(this.color,b-this.size,0,this.size,c);d.translate(0.5*b,0.5*c);d.fillRect(this.color,-10,0.5*-this.size,20,this.size);d.fillRect(this.color,0.5*-this.size,-10,this.size,20);this.setAnchor(0.5*b,0.5*c)}else if("circle"==a.type){b=a.radius;this.texture=u._platform.getRenderer().createTexture(Math.ceil(2*
b+2*this.size),Math.ceil(2*b+2*this.size));c=this.texture.get_graphics();for(d=0;360>d;){var e=d++;c.fillRect(this.color,this.size+b+Math.cos(e)*b,this.size+b+Math.sin(e)*b,this.size,this.size)}c.translate(this.size+b,this.size+b);c.fillRect(this.color,0,0,b,this.size);this.setAnchor(b,b)}else if("polygon"==a.type){var c=b=9999999,d=e=-9999999,h=0,f;for(f=X.__cast(a.points,Array);h<f.length;){var g=f[h];++h;b=Math.min(b,g.x);c=Math.min(c,g.y);e=Math.max(e,g.x);d=Math.max(d,g.y)}b=e-b;c=d-c;this.texture=
u._platform.getRenderer().createTexture(b,c);d=this.texture.get_graphics();e=a.points[0];d.translate(-e.x,-e.y);h=0;for(f=a.points.length;h<f;){var i=h++,g=a.points[i],j;j=i==a.points.length-1?e:a.points[i+1];var i=j.x-g.x,k=j.y-g.y;j=Math.sqrt(Math.pow(i,2)+Math.pow(k,2));i=180*Math.atan2(k,i)/Math.PI;d.save();d.translate(g.x,g.y);d.rotate(i);d.fillRect(this.color,0,0,j,this.size);d.restore()}this.setAnchor(0.5*b,0.5*c)}this.setXY(a.finalx,a.finaly);(0<a.rotation||0>a.rotation)&&this.setRotation(a.rotation)},
getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:Fc});var Re=function(){this._actorsToRemove=[];this._actorsById=new C;this._actorsByTags=new C;this._actorsByTemplate=new C;this._actorsByComponents=new C;this._actors=[];this.onActorRemoved=new T;this.onActorAdded=new T;this.onActorSpawn=new gb;j.call(this)};g["stolo.ensys.system.ActorSystem"]=Re;Re.__name__=["stolo","ensys",
"system","ActorSystem"];Re.__super__=j;Re.prototype=k(j.prototype,{get_name:function(){return"ActorSystem_4"},onAdded:function(){this._renderer=this.owner._compMap.RendererSystem_7;for(var a=J.getComponentsIds(),b=0;b<a.length;){var c=a[b];++b;this._actorsByComponents.set(c,[])}a=J.getTemplateIds();for(b=0;b<a.length;)c=a[b],++b,this._actorsByTemplate.set(c,[])},onRemoved:function(){j.prototype.onRemoved.call(this);this._actorsToRemove=this._actorsById=this._actorsByTags=this._actorsByTemplate=this._actorsByComponents=
this._renderer=null},onUpdate:function(){for(;0<this._actorsToRemove.length;)this._removeActor(this._actorsToRemove.pop())},spawn:function(a,b){var c=J.create(a);if(null==c)return null;this.onActorSpawn.emit(c,a);this.addActor(c);if(null!=b){var d=c._compMap.Sprite_5;if(null!=d)d.onInitComplete.connect(b).once();else b()}return c},addActor:function(a){this.registerActor(a);this._renderer.addActor(a);null!=Re.addedMethod&&this.callMethodOn(a,Re.addedMethod);this.onActorAdded.emit(a);return a},callMethodOn:function(a,
b){for(var c=a.firstComponent,d;null!=c;)d=y.getProperty(c,b),null!=d&&d.apply(c,null),c=c.next;return a},removeActor:function(a){if(null==this._actorsToRemove)return null;this._actorsToRemove.push(a);return a},_removeActor:function(a){this.unregisterActor(a);this.onActorRemoved.emit(a);this._renderer.removeActor(a);a.dispose();return a},getAll:function(){return this._actors},getActorsByComponent:function(a){return this._actorsByComponents.get(ca.getClassName(a))},getActorsByTemplate:function(a){return this._actorsByTemplate.get(a)},
registerActor:function(a){this._actors.push(a);for(var b=a.firstComponent;null!=b;){var c=ca.getClassName(ca.getClass(b)),d=this._actorsByComponents.get(c);null==d&&(d=[],this._actorsByComponents.set(c,d));d.push(a);b=b.next}b=a._compMap.TemplateComponent_3;if(null!=b){c=this._actorsByTemplate.get(b.key);null==c&&(c=[],this._actorsByTemplate.set(b.key,c));c.push(a);c=0;for(d=b.tags;c<d.length;){var e=d[c];++c;var h=this._actorsByTags.get(e);null==h&&(h=[],this._actorsByTags.set(e,h));h.push(a)}""!=
b.uuid&&null!=b.uuid&&this._actorsById.set(b.uuid,a)}},unregisterActor:function(a){M.remove(this._actors,a);for(var b=[this._actorsByComponents,this._actorsByTemplate,this._actorsByTags],c=0;c<b.length;){var d=b[c];++c;for(d=d.iterator();d.hasNext();){var e=d.next();M.remove(e,a)}}a=a._compMap.TemplateComponent_3;null!=a&&this._actorsById.remove(a.uuid)},__class__:Re});var ie=function(){this._saveLimits={};this._camera=new Hg;this._targets=[];this.currentTargetIndex=-1;this.selfUpdate=!0;this.autoSwitch=
!1;this.enabled=this.autoCenterZoom=!0;j.call(this)};g["stolo.ensys.system.CameraSystem"]=ie;ie.__name__=["stolo","ensys","system","CameraSystem"];ie.__super__=j;ie.prototype=k(j.prototype,{get_name:function(){return"CameraSystem_21"},dispose:function(){j.prototype.dispose.call(this);this._saveLimits=this._renderer=this._camera=this._target=this._targets=this.rendererOffset=null},onAdded:function(){this.sharedBase=new o;this.owner.addChild(this.sharedBase)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_7},
onUpdate:function(a){this.selfUpdate&&this.update(a)},update:function(a){if(this.enabled){this.autoSwitch&&null==this._camera.target&&this.nextTarget();this._camera.update(a);var b=0,c=0;null!=this.rendererOffset&&(this.rendererOffset.update(a),b+=this.rendererOffset.x._value,c+=this.rendererOffset.y._value);null!=this._camera.zoom&&(this.autoCenterZoom&&(a=this._renderer.dimensions,b+=0.5*(a.width-a.width*this._camera.zoom._value),c+=0.5*(a.height-a.height*this._camera.zoom._value)),this._renderer.setScale(this._camera.zoom._value));
this._renderer.move(-this._camera.x+b,-this._camera.y+c)}},addTarget:function(a){this._targets.push(a);null==this._target&&this.autoSwitch&&this.nextTarget()},removeTarget:function(a){null!=this._targets&&M.remove(this._targets,a)&&this._target==a&&this.previousTarget()},setTarget:function(a,b){null==b&&(b={time:0});if(null==a){if(0==this._targets.length)return this._target=null;a=this._targets[0]}this._target=a;if(null==this._target||null==this._target.owner)return null;if(0<b.time){var c=this._target.owner._compMap.TransformComponent_32.position,
d=this._target.owner._compMap.Sprite_5;null!=d&&(c={x:d.x._value,y:d.y._value});this._wasSpringX=this.get_camera().springX;this._wasSpringY=this.get_camera().springY;this.get_camera().springX=this.get_camera().springY=!1;this.offsetTarget(a,0,0,b.time,b.ease);this.get_camera().animateTo(c.x+a.offsetX,c.y+a.offsetY,b.time,b.ease);F.delayCallTo(l(this,this.onCameraAnimationComplete),b.time,this.owner)}else this.syncTarget(!1),this.offsetTarget(a,a.offsetX,a.offsetY,b.offsetTime,b.offsetEase,b.offsetTimeY,
b.offsetEaseY);return a},onCameraAnimationComplete:function(){this.offsetTarget(this.get_target(),this.get_target().offsetX,this.get_target().offsetY,0.3);this.syncTarget(!1);this.get_camera().springX=this._wasSpringX;this.get_camera().springY=this._wasSpringY},syncTarget:function(a){null==a&&(a=!1);if(!(null==this._target||null==this._target.owner)){var b=this._target.owner._compMap.Sprite_5;null!=b&&this._camera.followSprite(b);a&&this._camera.moveToTarget()}},get_target:function(){return this._target},
offsetTarget:function(a,b,c,d,e,h,f){null==h&&(h=-1);null==d&&(d=-1);a.offsetX=b;a.offsetY=c;0>d&&(d=ie.DEFAULT_OFFET_TIME);null==e&&(e=ie.DEFAULT_OFFET_EASING);this._camera.setOffset(b*a.offsetDirectionX,c*a.offsetDirectionY,d,e,h,f)},offsetTargetDirectionX:function(a,b,c,d){null==c&&(c=0);this._camera.setOffsetX(a.offsetX*a.offsetDirectionX,c,d)},get_camera:function(){return this._camera},nextTarget:function(){this.currentTargetIndex++;this.currentTargetIndex>this._targets.length-1&&(this.currentTargetIndex=
0);return this.setTarget(this._targets[this.currentTargetIndex])},previousTarget:function(){this.currentTargetIndex--;0>this.currentTargetIndex&&(this.currentTargetIndex=this._targets.length-1);return this.setTarget(this._targets[this.currentTargetIndex])},__class__:ie,__properties__:k(j.prototype.__properties__,{get_camera:"get_camera",get_target:"get_target"})});var Hi=function(a,b){this._actorMap=new db;this.enable=!1;j.call(this);this._dimensions=b;this._renderer=a};g["stolo.ensys.system.CullingSystem"]=
Hi;Hi.__name__=["stolo","ensys","system","CullingSystem"];Hi.__super__=j;Hi.prototype=k(j.prototype,{get_name:function(){return"CullingSystem_6"},onAdded:function(){null==this._dimensions&&(this._dimensions=this._renderer.dimensions)},addComponent:function(a,b){if(this.enable){var c=this._actorMap.h[b.__id__];if(null==c){var c=b._compMap.Sprite_5,d=this._renderer.getLayer(null==c?"default":c.layer);null==d&&(d=this._renderer.getLayer("default"));c={actor:b,position:b._compMap.TransformComponent_32.position,
display:c,layer:d,components:[],culling:!0,start:!0};this._actorMap.set(b,c)}c.components.push(a)}else a.enableCulling(!1)},removeComponent:function(a,b){var c=this._actorMap.h[b.__id__];if(null!=c){for(var c=c.components,d=0,e=c.length;d<e;){var h=d++;if(a==c[h]){c.splice(h,1);break}}0==c.length&&this._actorMap.remove(b)}},onUpdate:function(){if(this.enable){var a;a=null==this._camera?this._dimensions.width/2-100:this._camera.x-100;for(var b=a+this._dimensions.width+100,c=0,d=0,c=!1,e=this._actorMap.iterator();e.hasNext();){var h=
e.next(),d=null==h.display?0:0.5*h.display.getNaturalWidth(),c=h.position.x+h.layer.x._value+(null==this._camera?this._dimensions.width/2:this._camera.x),c=c+d<a||c-d>b;if(h.start||c!=h.culling){h.start=!1;h.culling=c;h=h.components;for(d=0;d<h.length;){var f=h[d];++d;f.enableCulling(c)}}}}},__class__:Hi});var Af=function(){this.onComplete=new pa};g["stolo.ensys.system.PhysicDebugSystem"]=Af;Af.__name__=["stolo","ensys","system","PhysicDebugSystem"];Af.__super__=j;Af.prototype=k(j.prototype,{get_name:function(){return"PhysicDebugSystem_23"},
onAdded:function(){this.initActors(this.owner._compMap.ActorSystem_4)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_7;this._space=this.owner._compMap.PhysicSystem_26.getSpace();null==this.dimensions&&(this.dimensions=this._renderer.dimensions);j.prototype.onStart.call(this);this.onComplete.emit()},onUpdate:function(){},dispose:function(){j.prototype.dispose.call(this)},initActors:function(a){a.onActorSpawn.connect(l(this,this.onActorSpawn))},onActorSpawn:function(a){null!=
a&&Af.enabled&&null!=a._compMap.PhysicsComponent_25&&null==a._compMap.PhysicsDebugComponent_24&&a.add(new xg)},__class__:Af});var jd=function(){this._bodiesToRemove=[];this._bodiesToAdd=[];this._contactsListenerHandler=new C;this._contactsListener=new C;this._contactTypes=new C;this._speed=1;this._fixedDt=0.025;this._currentDt=0;this._enabled=!0;this.alwaysInverseNormal=!1;this.stepMode=1;this.onPhysicUpdate=new T;j.call(this);this._contactTypes.set("ANY_BODY",mc.ANY_BODY)};g["stolo.ensys.system.PhysicSystem"]=
jd;jd.__name__=["stolo","ensys","system","PhysicSystem"];jd.getListenerId=function(a,b,c,d){return q.string(a)+"-"+q.string(b)+"-"+jd.getOptionId(c)+"-"+jd.getOptionId(d)};jd.getOptionId=function(a){return U.is(a,N.TClass(Array))?a.join(","):a};jd.__super__=j;jd.prototype=k(j.prototype,{get_name:function(){return"PhysicSystem_26"},getSpace:function(){return this._space},setGravity:function(a,b){this._space.set_gravity(ra.get(a,b,!0));return this._space.get_gravity()},setFixedDt:function(a){this._fixedDt=
a},onAdded:function(){this._space=new bl(ra.get(0,900,!0));this._speedAdjuster=this.owner._compMap.SpeedAdjuster_29},onRemoved:function(){this._space.clear();if(null!=this._contactsListenerHandler)for(var a=this._contactsListenerHandler.iterator();a.hasNext();)a.next().dispose();this._speedAdjuster=this._contactTypes=this._contactsListener=this._bodiesToRemove=this._bodiesToAdd=this._space=null;j.prototype.onRemoved.call(this)},onUpdate:function(a){if(this._enabled){null!=this._speedAdjuster&&(this._speed=
this._speedAdjuster.scale._value);if(0>=this._speed)return;switch(this.stepMode){case 1:this._fixedDiff=a/(this._fixedDt*this._speed);this._step=1.1<this._fixedDiff?(this._fixedDt*this._fixedDiff+0.008)*this._speed:this._fixedDt*this._speed;0.009>=this._step&&(this._step=0.009);0.06<this._step&&(this._step=0.06);this._space.step(this._step);break;case 2:for(this._currentDt+=a;this._currentDt>=this._fixedDt;)this.onPhysicUpdate.emit(this._fixedDt),this._space.step(this._fixedDt),this._currentDt-=this._fixedDt;
break;case 0:this._space.step(this._fixedDt)}this.onPhysicUpdate.emit(a)}for(;0<this._bodiesToAdd.length;)this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());for(;0<this._bodiesToRemove.length;)this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())},enable:function(a){this._enabled=a},addBody:function(a){null!=this._space&&null!=a&&this._bodiesToAdd.push(a)},removeBody:function(a){null!=this._space&&null!=a&&this._bodiesToRemove.push(a)},addContactListener:function(a,b,c,
d,e,h,f){null==f&&(f=!1);if(null!=this._space){var g=this.getCbType(c),i=this.getCbType(d),c=jd.getListenerId(a,b,c,d);if(null==this._contactsListener.get(c)){f=new Uj(this.alwaysInverseNormal,f);if(a==Ba.PRELISTENER)a=new Pi(b,g,i,l(f,f.onPreContact));else if(a==Ba.ONGOING)a=new pf(a,b,g,i,l(f,f.onOngoingContact));else if(a==Ba.END)a=new pf(a,b,g,i,l(f,f.onContactEnd));else if(a==Ba.BEGIN)a=new pf(a,b,g,i,l(f,f.onContactBegin));else throw"PhysicSystem: Contact listener unsupported: "+q.string(a);
this._space.zpp_inner.wrap_listeners.add(a);this._contactsListener.set(c,a);this._contactsListenerHandler.set(c,f)}this._contactsListenerHandler.get(c).addEntity(e,h)}},removeContactListener:function(a,b,c,d,e){null!=this._space&&(this.getCbType(c),this.getCbType(d),a=this._contactsListenerHandler.get(jd.getListenerId(a,b,c,d)),null!=a&&a.removeEntity(e))},getCbType:function(a){if(null==this._space)return null;if(U.is(a,N.TClass(Array))){if(1==a.length)return this.getCbType(a[0]);var b=a.join(","),
c=this._contactTypes.get(b);if(null==c){for(var c=new rf,d=0;d<a.length;){var e=a[d];++d;e=this.getCbType(e);c.including(e)}this._contactTypes.set(b,c)}return c}if(U.is(a,N.TClass(String)))return a=a.toUpperCase(),b=this._contactTypes.get(a),null==b&&(b=new ue,this._contactTypes.set(a,b)),b;throw"Unknown kind of contact type "+q.string(a);},__class__:jd});var Gi=function(a,b){null==b&&(b=!1);this._layers=new C;this._container=new o;this.onLayerAdded=new T;this.scale=1;this.displacement=new La;this.dimensions=
null!=a?a:new yb(0,0,u._platform.getStage().get_width(),u._platform.getStage().get_height());this.dimensionsScaled=this.dimensions.clone();this._useScissor=b;j.call(this)};g["stolo.ensys.system.RendererSystem"]=Gi;Gi.__name__=["stolo","ensys","system","RendererSystem"];Gi.__super__=j;Gi.prototype=k(j.prototype,{get_name:function(){return"RendererSystem_7"},onAdded:function(){this._sprite=new Dc;this._useScissor&&(this._sprite.scissor=new yb(0,0,this.dimensions.width,this.dimensions.height));this._sprite.setXY(this.dimensions.x,
this.dimensions.y);this._container.add(this._sprite);this.owner.addChild(this._container)},getContainer:function(){return this._container},getSprite:function(){return this._sprite},addLayer:function(a){var b=a.name,c=this.getLayer(b);null==c&&(c=ja.startsWith(b,"grid")&&4<b.length?new oj(a,Math.round(this.dimensions.width),Math.round(this.dimensions.height),q.parseInt(M.substr(b,4,null))):new Ve(a),this._layers.set(b,c),this._sprite.addChild((new o).add(c)),this.onLayerAdded.emit(c),this.move(this.displacement.x,
this.displacement.y));return c},getLayer:function(a){return this._layers.get(a)},getLayers:function(){for(var a=[],b=this._layers.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},addActor:function(a){this.getActorLayer(a).addChild(a)},removeActor:function(a){this.getActorLayer(a).removeChild(a)},getActorLayer:function(a,b){null==b&&(b=!0);var c=a._compMap.Sprite_5,c=null!=c&&null!=c.layer?c.layer:"default",d=this.getLayer(c);if(null==d&&b)throw"Layer not found:"+c;return d},move:function(a,
b){this.displacement.set(a,b);for(var c=this._layers.iterator();c.hasNext();)c.next().move(a,b)},setScale:function(a){this.scale=a;this.dimensionsScaled.width=this.dimensions.width/a;this.dimensionsScaled.height=this.dimensions.height/a;this._sprite.setScale(a)},__class__:Gi});var Ii=function(){j.call(this)};g["stolo.ensys.system.SoundSystem"]=Ii;Ii.__name__=["stolo","ensys","system","SoundSystem"];Ii.__super__=j;Ii.prototype=k(j.prototype,{get_name:function(){return"SoundSystem_27"},init:function(a){this._targetTransform=
a._compMap.TransformComponent_32},play:function(a,b,c,d,e,h,f){null==h&&(h=!1);null==e&&(e=!1);null==d&&(d=1);if(null==a||""==a)return null;if(null!=b){if(null==this._targetTransform)return null;b=b._compMap.TransformComponent_32;if(null==b||64E4<Math.pow(b.position.x-this._targetTransform.position.x,2)+Math.pow(b.position.y-this._targetTransform.position.y,2))return null}return v.play(a,c,d,e,h,f)},__class__:Ii});var A=function(){};g["stolo.managers.AssetManager"]=A;A.__name__=["stolo","managers",
"AssetManager"];A.loadPacks=function(a,b,c){null==c&&(c=!0);for(var d=[],e=0;e<a.length;){var h=a[e];++e;var f=null;U.is(h,N.TObject)?null!=h.files&&(f=A.createDynamicPack(h.name,h.files,function(){},null!=h.useFileAsEntryName?h.useFileAsEntryName:!1)):U.is(h,N.TClass(String))&&(f=A.loadPack(h,function(){},c));null!=f&&d.push(f)}if(0==d.length)return null!=b&&b(),null;a=new uh(d);if(null!=b)a.success.connect(function(){null!=b&&b()}).once();return a};A.getPack=function(a,b){null==b&&(b=!0);a=A.validatePackName(a);
if(!A._cachedPacks.exists(a)){if(b)throw"Assetpack "+a+" is not loaded: use AssetManager.loadPack";return null}return A._cachedPacks.get(a)};A.validatePackName=function(a){A._replacedPacks.exists(a)&&(a=A._replacedPacks.get(a));return a};A.loadPack=function(a,b,c,d,e){null==c&&(c=!0);null==d&&(d=A.locale);a=A.validatePackName(a);if(A._cachedPacks.exists(a))return b(A._cachedPacks.get(a)),null;if(A._loadingPacks.exists(a))return A._loadingPacks.get(a).callbacks.push(b),A._loadingPacks.get(a).loader;
if(null==e){if(!Qa.exists(a)){if(-1<a.indexOf("/"))return A.createSubPack(a,b);if(c)throw"Pack not found: '"+a+"'";return null}e=null==d?Qa.fromAssets(a):Qa.fromAssetsLocalized(a,d)}A.onManifestInit.emit(a,e);c=u._platform.loadAssetPack(e);d=[];d.push(b);b={name:a,manifest:e,loader:c,callbacks:d};A._loadingPacks.set(a,b);A._loadingPacksDict.set(e,b);c.get(A.onAssetsLoaded);return c};A.createDynamicPack=function(a,b,c,d){null==d&&(d=!1);var e=new Qa;e.set_localBase("assets");for(var h,f=0,g=0;g<b.length;){var i=
b[g];++g;h=i.split("/");h=Qa.fromAssets(h[0]);if(null==h)throw"Unable to create the Manifest for the file "+i;for(var j=M.iter(h._entries);j.hasNext();)if(h=j.next(),-1!=h.url.indexOf(i)){f++;i=d?i:h.name.substring(h.name.lastIndexOf("/")+1,h.name.length);e.add(i,h.url,h.bytes,h.format);break}}if(0==f)throw"The dynamic pack "+a+" is empty";return A.loadPack(a,c,!1,null,e)};A.createSubPack=function(a,b){if(Qa.exists(a))throw"Manifest"+a+" already exist";var c=a.split("/"),d=a.substring(a.indexOf("/")+
1,a.length),e=Qa.fromAssets(c[0]);if(null==e)throw"Unable to create the Manifest for the path "+a;c=new Qa;c.set_localBase("assets");for(var h=0,f=M.iter(e._entries);f.hasNext();){var g=f.next();-1!=g.name.indexOf(d)&&(h++,e=g.name.substring(g.name.lastIndexOf("/")+1,g.name.length),c.add(e,g.url,g.bytes,g.format))}if(0==h)throw"The sub pack "+a+" is empty";return A.loadPack(a,b,!1,null,c)};A.onAssetsLoaded=function(a){var b,c=a.get_manifest();b=A._loadingPacksDict.h[c.__id__];A._loadingPacks.remove(b.name);
c=a.get_manifest();A._loadingPacksDict.remove(c);A._cachedPacks.set(b.name,a);c=0;for(b=b.callbacks;c<b.length;){var d=b[c];++c;d(a)}};A.disposePack=function(a){if(A._protectedPacks.exists(a))throw"AssetPack "+a+" was protected using AssetManager.protectPack(), Please make sure you do not attempt to dispose of it!";if(A._loadingPacks.exists(a))throw"Pack '"+a+"' is loading";if(!A._cachedPacks.exists(a))return null;var b=A._cachedPacks.get(a);b.dispose();A._cachedPacks.remove(a);return b};A.getJSON=
function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=a&&0>a.indexOf(".")&&(a+=".json");var e=A.getPack(b),h=null;if(d&&(h=b+"_"+a,A._jsonCache.exists(h)))return A._jsonCache.get(h);e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find JSON file '"+a+"' in pack "+b;return null}try{var f=JSON.parse(e.toString());d&&(A._jsonCache.set(h,f),f);e.dispose();return f}catch(g){throw"Error loading JSON '"+a+"', pack:"+b+"\n\t"+q.string(g);}};A.getXML=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=
a&&0>a.indexOf(".")&&(a+=".xml");var e=A.getPack(b),h=null;if(d&&(h=b+"_"+a,A._xmlCache.exists(h)))return A._xmlCache.get(h);e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find XML file '"+a+"' in pack "+b;return null}try{var f=S.parse(e.toString());d&&(A._xmlCache.set(h,f),f);e.dispose();return f}catch(g){throw"Error loading XML '"+a+"', pack:"+b+"\n\t"+q.string(g);}};var Sa=function(){};g["stolo.managers.LocalizationManager"]=Sa;Sa.__name__=["stolo","managers","LocalizationManager"];Sa.getLocale=
function(a){return Sa.localesMap.get(a)};Sa.localize=function(a,b){var c=Sa.getLocale(a);null!=c?(c.text=Sa.applyTemplate(c._text,b),c.localized=!0):c={text:Sa.NOT_FOUND_PREFIX+a+Sa.NOT_FOUND_SUFFIX,localized:!1};return c};Sa.localizeTextField=function(a,b,c,d){c=Sa.localize(b,c);null!=c?(a.set_text(c.text),null!=c.fontStyle?K.applyFontStyle(a,c.fontStyle):a.set_font(d)):a.set_text(b);return c};Sa.applyTemplate=function(a,b){if(null==b)return a;for(var c=0,d=y.fields(b);c<d.length;){var e=d[c];++c;
a=ja.replace(a,"{{"+e+"}}",y.field(b,e))}return a};Sa.loadXML=function(a,b,c){null==c&&(c=!0);null==b&&(b="text");null==a&&(a="localization.xml");var d=A.getPack(b).getFile(a,!1);if(null==d)throw"Cannot find '"+a+"' in pack "+b;a=d.toString();a=Sa.processCharacters(a);a=S.parse(a);a=new fg(a.firstElement());a.hasNode.resolve("fonts")&&(b=a.node.resolve("fonts"),K.configureFromXML(b));if(a.hasNode.resolve("strings")){a.node.resolve("strings");for(a=a.node.resolve("strings").nodes.resolve("string").iterator();a.hasNext();)b=
a.next(),Sa.addLocaleFormatFromXML(b)}c&&d.dispose()};Sa.addLocaleFormatFromXML=function(a){var b=a.att.resolve("id"),c={_text:a.get_innerData()},d=null;a.has.resolve("fontStyle")&&(d=K.getFontStyle(a.att.resolve("fontStyle")));a.has.resolve("fontScale")&&(d=K.extendFontStyle(d,"fontScale",q.parseFloat(a.att.resolve("fontScale"))));a.has.resolve("offsetX")&&(d=K.extendFontStyle(d,"offsetX",q.parseFloat(a.att.resolve("offsetX"))));a.has.resolve("offsetY")&&(d=K.extendFontStyle(d,"offsetY",q.parseFloat(a.att.resolve("offsetY"))));
a.has.resolve("align")&&""!=a.att.resolve("align")&&(d=K.extendFontStyle(d,"align",a.att.resolve("align")));if(a.has.resolve("fontName")){var e=K.getFont(a.att.resolve("fontName"));null==e?null:(d=K.extendFontStyle(d,"fontName",a.att.resolve("fontName")),d=K.extendFontStyle(d,"fontName",e))}null!=d&&(!0==d.generated&&(d.name=b+"_style"),c.fontStyle=d);Sa.localesMap.set(b,c)};Sa.processCharacters=function(a){a=(new Pb("\r\n","g")).replace(a,"\n");return a=(new Pb("\r","g")).replace(a,"\n")};var G=
function(){};g["stolo.managers.SceneManager"]=G;G.__name__=["stolo","managers","SceneManager"];G.createInstantTransition=function(){return new oh(0,D.quintOut)};G.change=function(a,b){null==b&&(b=G.createInstantTransition());if(null==G._director)throw"Director not set, was SceneManager.setScenes called?";G.onChange.emit();if(G.SkipChange)return G.SkipChange=!1,null;var c=G.getScene(a);G._director.unwindToScene((new o).add(c),b);return c};G.push=function(a,b){null==b&&(b=G.createInstantTransition());
if(null==G._director)throw"Director not set, was SceneManager.setScenes called?";G.onPush.emit();var c=G.getScene(a);G._director.pushScene((new o).add(c),b);return c};G.pop=function(a){if(1==G._director.scenes.length)throw"Scene will not be removed (last in stack!)";var b=G._director.scenes[G._director.scenes.length-1]._compMap.Scene_2;G.onPop.emit();G._director.popScene(a);return b};G.setScenes=function(a,b){null==b&&(b=!0);null==G._director&&(G._director=new nh,b?u.root.addChild((new o).add(G._director)):
u.root.add(G._director));G.addScenes(a)};G.addScenes=function(a){for(var b=a.keys();b.hasNext();){var c=b.next();G.addScene(c,a.get(c))}};G.addScene=function(a,b){G.CaseSensitive||(a=a.toLowerCase());if(G._sceneMap.exists(a))throw"Illegal operation: scene '"+a+"' is already registered";G._sceneMap.set(a,b)};G.getScene=function(a){G.CaseSensitive||(a=a.toLowerCase());if(!G._sceneMap.exists(a))throw"Scene '"+a+"' is not registered or does not exists.";a=G._sceneMap.get(a);return ca.createInstance(a,
[])};var v=function(){};g["stolo.managers.SoundManager"]=v;v.__name__=["stolo","managers","SoundManager"];v.__properties__={get_isMuted:"get_isMuted"};v.playMusic=function(a,b,c){null==c&&(c=-1);null==b&&(b=!1);if(v._musicDisabled||null==v._soundPack)return null;v._unmuteMusic=a;if(0==v._volume)return null;0>c&&(c=v.defaultMusicVolume);if(v._currentMusic==a&&!b)return null;b=v.play(a,"MUSIC",c,!0,!1);if(null==b)return b;v._currentMusic=a;return v._currentMusicPlayback=b};v.isLoaded=function(){return null!=
v._soundPack};v.play=function(a,b,c,d,e,h){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=1);if(v._soundsDisabled||null==v._soundPack||0==v._volume||null==a)return null;0<=a.indexOf("{")&&(a=v.getIdFromTemplate(a,h));h=yd.stamp();if(v.soundPollingMap.exists(a)){var f=v.soundPollingMap.get(a);if(h-f<v.soundPollingSeconds)return null}v.soundPollingMap.set(a,h);h=null;a=v._soundPack.getSound(a,!1);if(null==a||0>=a.get_duration())return null;null==b&&(b="OTHER");if(v.channels.exists(b)){h=v.channels.get(b);
if(!(null==h||h.get_complete().get__())&&e)return null;h=v.__playSoundInChannel(a,c,d,b,h)}else h=v.__playSoundInChannel(a,c,d,b);b=h;null!=b._clonedElement&&(b._clonedElement.autoplay=!0);return h};v.getIdFromTemplate=function(a,b){var c=a;if(0<=c.indexOf("{random("))var d=c.split("{random(")[1],d=q.parseInt(d.split(")}")[0]),e=Math.floor(Math.random()*d+1),c=ja.replace(c,"{random("+d+")}",""+e);if(null!=b){d=0;for(e=y.fields(b);d<e.length;){var h=e[d];++d;c=ja.replace(c,"{{"+h+"}}",y.field(b,h))}}return c};
v.__playSoundInChannel=function(a,b,c,d,e){null!=e&&(e.set_paused(!0),e.dispose(),v.channels.set(d,null));e=c?a.loop(b):a.play(b);v.channels.set(d,e);return e};v.mute=function(){v.setVolume(0)};v.unmute=function(){v.setVolume(v._unmuteVolume);null!=v._unmuteMusic&&v.playMusic(v._unmuteMusic)};v.setVolume=function(a,b,c){null==b&&(b=0.2);null==c&&(c=D.quadInOut);0==a?(v._unmuteVolume=0<v._volume?v._volume:v.defaultVolume,v._volume=0,ea.set("soundMuted",!0)):(v._volume=a,0>v._volume&&(v._volume=v.defaultVolume),
ea.set("soundMuted",!1));u.volume.animateTo(v._volume,b,c);return u.volume};v.get_isMuted=function(){return-1<v._volume?0==v._volume:!1};v.loadSounds=function(a,b){A.loadPack(a,v.onAssetsLoaded);!0==ea.get("soundMuted",!1)?v.mute():v.setVolume(v.defaultVolume);v._callback=b};v.setSounds=function(a){v._soundPack=a};v.onAssetsLoaded=function(a){v.setSounds(a);null!=v._callback&&v._callback()};var Wa=g["stolo.managers.SpritesheetType"]={__ename__:["stolo","managers","SpritesheetType"],__constructs__:["Auto",
"JsonArray","Grid","Flump","Zoe"]};Wa.Auto=["Auto",0];Wa.Auto.toString=p;Wa.Auto.__enum__=Wa;Wa.JsonArray=["JsonArray",1];Wa.JsonArray.toString=p;Wa.JsonArray.__enum__=Wa;Wa.Grid=["Grid",2];Wa.Grid.toString=p;Wa.Grid.__enum__=Wa;Wa.Flump=["Flump",3];Wa.Flump.toString=p;Wa.Flump.__enum__=Wa;Wa.Zoe=["Zoe",4];Wa.Zoe.toString=p;Wa.Zoe.__enum__=Wa;var Ja=function(){};g["stolo.managers.SpritesheetManager"]=Ja;Ja.__name__=["stolo","managers","SpritesheetManager"];Ja.getSpritesheet=function(a,b,c,d){null==
b&&(b=Ja.DefaultManifest);null==d&&(d=Wa.Auto);var e=b+"_"+a;if(Ja._cachedSpritesheets.exists(e))c(Ja._cachedSpritesheets.get(e));else if(Ja._loadingSpritesheets.exists(e))Ja._loadingSpritesheets.get(e).callbacks.push(c);else{var h=Ja.createRequest(e,a,b,c,d);Ja._loadingSpritesheets.set(e,h);h.loader=A.loadPack(b,function(a){Ja.onRequestComplete(h,a)})}};Ja.createRequest=function(a,b,c,d,e){for(var h=b.split(","),f=[],g=0;g<h.length;){var i=h[g];++g;switch(e[1]){case 3:i=dl.getFileInfo(i,null);break;
default:i=dl.getFileInfo(i,Ja.DefaultFileName)}f.push(i)}h=[];h.push(d);return{id:a,pack:c,name:b,type:e,jsonFiles:f,callbacks:h}};Ja.onRequestComplete=function(a,b){var c=null,d=a.jsonFiles[0],e;if(a.type==Wa.Flump)c=new Vj(a.name,b),c.set_name(a.id);else for(var h=0,f=a.jsonFiles;h<f.length;){var g=f[h];++h;e=b.getFile(g.url,!1);if(null==e)for(var i=!1,j=0;!i;){e=ja.replace(g.url,".json",j+".json");e=b.getFile(e,!1);if(null==e){if(0==j)throw"Spritesheet not found: '"+g.url+"' on pack '"+a.pack+
"'";i=!0}else e=JSON.parse(e.toString()),c=Ja.appendToSpriteSheet(c,e,b,g);j++}else e=JSON.parse(e.toString()),c=Ja.appendToSpriteSheet(c,e,b,g);c.set_name(a.id)}c.finalize();d=ja.replace(d.url,".json","_meta.json");e=b.getFile(d,!1);null!=e&&(d=JSON.parse(e.toString()),c.applyOverrides(d));Ja._loadingSpritesheets.remove(a.id);Ja._cachedSpritesheets.set(a.id,c);if(null!=c){d=0;for(h=a.callbacks;d<h.length;)f=h[d],++d,f(c)}};Ja.appendToSpriteSheet=function(a,b,c,d){if(null!=b.frames&&b.frames.length)null==
a&&(a=new cc),a.parseData(c,b,d.path);else if(0<b.frameWidth)null==a&&(a=new Bf),a.parseData(c,b,d.path);else throw"Unsupported JSON data: "+q.string(b);return a};var ea=function(){};g["stolo.managers.StorageManager"]=ea;ea.__name__=["stolo","managers","StorageManager"];ea.get=function(a,b,c){null==c&&(c=!0);null==b&&null!=ea.Defaults&&(b=ea.getDefaultValue(a));c&&(a=ea.Prefix+a);return u._platform.getStorage().get(a,b)};ea.getDefaultValue=function(a){return!Object.prototype.hasOwnProperty.call(ea.Defaults,
a)?null:y.field(ea.Defaults,a)};ea.set=function(a,b,c){null==c&&(c=!0);if(c){if(null==ea.Prefix)throw"StorageManager.Prefix was not set";a=ea.Prefix+a}return u._platform.getStorage().set(a,b)};ea.getWithPrefix=function(a,b,c){null==c&&null!=ea.Defaults&&(c=ea.getDefaultValue(b));return null==a?ea.get(b,c):u._platform.getStorage().get(a+b,c)};ea.setWithPrefix=function(a,b,c){return null==a?ea.set(b,c):u._platform.getStorage().set(a+b,c)};var K=function(){};g["stolo.managers.TextManager"]=K;K.__name__=
["stolo","managers","TextManager"];K.addFontPack=function(a){for(var b,c,d=a.get_manifest().iterator();d.hasNext();)b=d.next(),c=b.name.indexOf(".fnt"),-1<c&&(c=b.name.substring(0,c),b=new Ke(a,c),null==K.defaultFont&&(K.defaultFont=b),K._fontMap.set(c,b))};K.getFont=function(a,b){null==b&&(b=!0);if(b&&!K._fontMap.exists(a))throw"Font not found: '"+a+"'";return K._fontMap.get(a)};K.setDefaultFont=function(a){K.defaultFont=a;K._fontMap.set(K.defaultFontName,a)};K.getFontStyle=function(a,b){null==b&&
(b=!0);if(b&&!K._fontStylesMap.exists(a))throw"Font style not found: '"+a+"'";return K._fontStylesMap.get(a)};K.addFontStyle=function(a){if(null==a.font&&(a.font=K.getFont(a.fontName),null==a.font))throw"Font '"+a.fontName+"' not found to create font style '"+a.name+"'";K._fontStylesMap.set(a.name,a);return a};K.applyFontStyle=function(a,b){null!=b.font&&a.set_font(b.font);0<b.fontScale&&(a.setScale(b.fontScale),K.ChangePixelSnapping&&1!=b.fontScale&&a.set_pixelSnapping(!1));if((0<b.offsetX||0>b.offsetX||
0<b.offsetY||0>b.offsetY)&&!X.__instanceof(a,Ea)){if(0<b.offsetX||0>b.offsetX){var c=a.anchorX;c.set__(c._value-b.offsetX)}if(0<b.offsetY||0>b.offsetY)c=a.anchorY,c.set__(c._value-b.offsetY)}null!=b.align&&a.set_align(b.align);null!=b.letterSpacing&&a.letterSpacing.set__(b.letterSpacing);return a};K.getLocalizedTextSprite=function(a,b,c,d,e){a=new Ea(a,b,e);null!=c&&null!=d&&a.setXY(c,d);return a};K.getTextSprite=function(a,b,c,d){null==b&&(b="");null==a&&(a=K.defaultFontName);var e=K.getFontStyle(a,
!1),a=null!=e?e.font:K.getFont(a),b=new Ya(a,b);null!=c&&b.x.set__(c);null!=d&&b.y.set__(d);null!=e&&(K.applyFontStyle(b,e),null!=e.transform&&b.set_text(K.applyTransform(b._text,e.transform)));return b};K.applyTransform=function(a,b){return"uppercase"==b?a.toUpperCase():"lowercase"==b?a.toLowerCase():a};K.extendFontStyle=function(a,b,c){if(null==a||!0!=a.generated){var d={generated:!0};if(null!=a){d.parent=a;for(var e=0,h=y.fields(a);e<h.length;){var f=h[e];++e;y.setProperty(d,f,y.field(a,f))}}a=
d}y.setProperty(a,b,c);return a};K.configureFromXML=function(a){var b=null;if(a.has.resolve("defaultFont")&&(b=K.getFont(a.att.resolve("defaultFont")),null==b))throw"Default font '"+a.att.resolve("defaultFont")+"' not found";for(a=a.nodes.resolve("style").iterator();a.hasNext();){var c=a.next(),d=K.createFontStyle(c.att.resolve("name"));c.has.resolve("fontName")&&(d.fontName=c.att.resolve("fontName"));c.has.resolve("fontScale")&&(d.fontScale=q.parseFloat(c.att.resolve("fontScale")));c.has.resolve("offsetX")&&
(d.offsetX=q.parseFloat(c.att.resolve("offsetX")));c.has.resolve("offsetY")&&(d.offsetY=q.parseFloat(c.att.resolve("offsetY")));c.has.resolve("letterSpacing")&&(d.letterSpacing=q.parseFloat(c.att.resolve("letterSpacing")));c.has.resolve("align")&&("center"==c.att.resolve("align")&&(d.align=Z.Center),"left"==c.att.resolve("align")&&(d.align=Z.Left),"right"==c.att.resolve("align")&&(d.align=Z.Right));c.has.resolve("transform")&&(d.transform=c.att.resolve("transform"));null==b&&(b=d.font);K.addFontStyle(d)}null!=
b?K.setDefaultFont(b):null};K.createFontStyle=function(a){return{name:a,fontName:K.defaultFontName,transform:K.defaultTransform}};var Cf=function(a,b,c,d,e,h,f){null==f&&(f=!0);this.fps=-1;this.frames=[];this.name=b;this.prefix=c;this.spriteSheet=a;this.fps=d;this.width=e;this.height=h;this.loop=f};g["stolo.sprites.AnimationSymbol"]=Cf;Cf.__name__=["stolo","sprites","AnimationSymbol"];Cf.prototype={getReversedFrames:function(){return null!=this._reversedFrames?this._reversedFrames:this._reversedFrames=
this.frames.slice().reverse()},addCuePoint:function(a){null==this.cues&&(this.cues=[]);this.cues.push(a)},addFrame:function(a){this.frames.push(a)},orderFramesByName:function(){this.frames.sort(function(a,b){return a.name==b.name?0:a.name>b.name?1:-1})},setFrames:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;var h=b[e-cc.BaseIndex];if(null==h)throw"Frame "+e+" not found";c.push(h)}0<c.length&&(this.frames=c);return this.frames},setFrameData:function(a,b){null!=this.frames[a]&&(this.frames[a].data=
b)},__class__:Cf};var Vc=function(a,b,c,d,e){null==e&&(e=!0);this.onInit=new pa;this.autoCenter=!0;Y.call(this,null);this.autoCenter=e;this.currentSymbolName=b;if(null!=d)this.onInit.connect(d).once();null!=a&&Ja.getSpritesheet(a,c,function(a){return function(b){return a(b)}}(l(this,this.onSpritesheetReady)))};g["stolo.sprites.BitmapSprite"]=Vc;Vc.__name__=["stolo","sprites","BitmapSprite"];Vc.__super__=Y;Vc.prototype=k(Y.prototype,{get_currentSymbol:function(){return this._currentSymbol},set_currentSymbol:function(a){this._currentSymbol=
a;null!=this._currentSymbol&&(this.currentSymbolName=this._currentSymbol.name);return this._currentSymbol},onStop:function(){Y.prototype.onStop.call(this);this.onInit=this.currentSymbolName=this._currentSymbol=this._spritesheet=null},onAdded:function(){Y.prototype.onAdded.call(this);null!=this._spritesheet&&this.onInit.emit()},onSpritesheetReady:function(a){this.initialize(a)},setSymbol:function(a,b){null==b&&(b=!0);var c=this._spritesheet.getBitmapSymbol(a);if(null==c){if(b)throw"Symbol not found: '"+
a+"' for spritesheet '"+this._spritesheet.get_name()+"'";return null}this.set_currentSymbol(c);return this._currentSymbol},initialize:function(a){this._spritesheet=a;null!=this.currentSymbolName&&this.setSymbol(this.currentSymbolName);this.autoCenter&&null!=this._currentSymbol&&0>=this._currentSymbol.width&&this.centerAnchor();null!=this.owner&&this.onInit.emit()},draw:function(a){null!=this._currentSymbol?0<this._currentSymbol.width&&0<this._currentSymbol.height&&a.drawSubTexture(this._currentSymbol.texture,
this._currentSymbol.offsetX,this._currentSymbol.offsetY,this._currentSymbol.x,this._currentSymbol.y,this._currentSymbol.width,this._currentSymbol.height):Y.prototype.draw.call(this,a)},getNaturalWidth:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceWidth},getNaturalHeight:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceHeight},__class__:Vc,__properties__:k(Y.prototype.__properties__,{set_currentSymbol:"set_currentSymbol",get_currentSymbol:"get_currentSymbol"})});
var vb=function(a,b,c,d,e){null==d&&(d=!0);this._isPlaying=!1;this._currentFrame=0;this.nextCuePointFrame=this._cuepointIndex=-1;this.isReady=!1;this.onCuePoint=new gb;this.onReady=new T;this.onPlaylistComplete=new pa;this.animComplete=new gb;this.isReady=this.autoRestart=!1;this._position=this._currentFrame=0;this.speed=new Q(1);this._overrides=e;Vc.call(this,a,null,b,c,d)};g["stolo.sprites.BitmapAnimation"]=vb;vb.__name__=["stolo","sprites","BitmapAnimation"];vb.__super__=Vc;vb.prototype=k(Vc.prototype,
{onSpritesheetReady:function(a){this.initialize(a)},dispose:function(){Vc.prototype.dispose.call(this);this.onReady=this.animComplete=null;this._isPlaying=!1;this._completeCallback=this._animation=this._currentSprite=this._spritesheet=this._frames=null},initialize:function(a){this._spritesheet=a;null!=this._overrides&&a.applyOverrides(this._overrides);null==this.animName&&(this.animName=this._spritesheet.defaultAnim);this.start();this.onInit.emit()},onAdded:function(){Vc.prototype.onAdded.call(this);
null!=this._spritesheet&&(this.isReady?this.onReady.emit(this):this.start())},start:function(){this.isReady||(this.isReady=!0,this.gotoAndPlay(this.animName,this.animParams),this.autoCenter&&null!=this._animation&&0<this._animation.width&&this.centerAnchor(),null==this._animation&&(this._isPlaying=!1,this.animName=null),null!=this.owner&&this.onReady.emit(this))},onUpdate:function(a){this.isReady&&(this.updateAnim(a),Vc.prototype.onUpdate.call(this,a))},updateAnim:function(a){0!=(this._flags&2)&&
this._isPlaying&&(this.speed.update(a),this._newPos=this._position+a*this._currentFPS*this.speed._value,this._newPos>this._frames.length?this.handleAnimComplete():(this._position=this._newPos,this.gotoFrame(Math.floor(this._position)+1)))},handleAnimComplete:function(){!this._animation.loop||null!=this._frames&&1>=this._frames.length?(this.stop(),this.gotoFrame(this._frames.length)):this._position=0;if(null!=this._completeCallback){var a=this._completeCallback;this._completeCallback=null;a()}null!=
this.animComplete&&(this.animComplete.emit(this._animation.name,this),this.nextAnim())},nextAnim:function(a){null!=this._playlist&&(0>=this._playlist.length?(this._animCompletePlaylistCallback=this._playlist=null,this.onPlaylistComplete.emit()):(this.gotoAnim(this._playlist.shift(),a),null==a&&null!=this._animCompletePlaylistCallback&&(this._completeCallback=this._animCompletePlaylistCallback)))},hasAnim:function(a){return null==this._spritesheet?!1:null!=this._spritesheet.getAnimation(a,this.prefix)},
stop:function(){this._isPlaying=!1},gotoAndStop:function(a,b){this.gotoAndPlay(a,b);this._isPlaying=!1;return this._animation},gotoAndPlay:function(a,b){this.isReady&&(this._playlist=null);if("string"==typeof a){if(!this.autoRestart&&null!=this._animation&&a==this._animation.name&&this._isPlaying)return this.gotoAnim(a,b),this._animation;this.gotoAnim(a,b)}else if((a|0)===a)this.gotoFrame(a,!0),this._position=this._currentFrame-1;else if(a instanceof Array&&null==a.__enum__){this._playlist=a;if(0>=
this._playlist.length)throw"Received empty playlist!";this.nextAnim(b)}this._isPlaying=!0;return this._animation},gotoAnim:function(a,b){if(null==this._spritesheet)this.animName=a,this.animParams=b;else{var c=this._spritesheet.getAnimation(a,this.prefix);if(null==c)vb.verbose&&null;else if(this.animName=a,this.animParams=b,this._completeCallback=null,null==b)this.setAnim(c);else if((b|0)===b&&0<b)this.setAnim(c),this.gotoAndPlay(b);else{null!=b.onComplete&&(this._completeCallback=b.onComplete);Object.prototype.hasOwnProperty.call(b,
"next")&&(null==this._playlist&&(this._playlist=[]),this._playlist.push(b.next));null!=this._playlist&&(null!=b.onPlaylistComplete?(this.onPlaylistComplete.connect(b.onPlaylistComplete).once(),this._animCompletePlaylistCallback=b.onComplete):null!=this._completeCallback&&(this.onPlaylistComplete.connect(this._completeCallback).once(),this._completeCallback=null));this.setAnim(c,b.reverse);if(Object.prototype.hasOwnProperty.call(b,"loop")&&null!=this.get_animation()&&(!0==b.loop||!1==b.loop))this.get_animation().loop=
b.loop;0<b.frame&&this.gotoAndPlay(b.frame)}}},setAnim:function(a,b){null==b&&(b=!1);this._animation=a;this._frames=b?a.getReversedFrames():a.frames;this._currentFPS=0<this._animation.fps?this._animation.fps:this.get_spritesheet().fps;this.nextCuePointFrame=this._cuepointIndex=-1;this.gotoFrame(1,!0);this.getNextCuePoint();this._position=0;if(null==this._frames)throw"Animation '"+this._defaultAnimName+"' does not have frames!";this.autoCenter&&this.centerAnchor()},gotoFrame:function(a,b){null==b&&
(b=!1);1>a&&(a=1);a>this._frames.length&&(a=this._frames.length);if(this._currentFrame!=a||b)-1<this.nextCuePointFrame&&a>=this.nextCuePointFrame&&this._currentFrame!=a&&(this.onCuePoint.emit(this._animation.cues[this._cuepointIndex].name,this),this.nextCuePointFrame=-1,this.getNextCuePoint()),a<this._currentFrame&&(this._cuepointIndex=-1,this.getNextCuePoint()),this._currentFrame=a,this._currentSymbol=this._frames[a-1]},getNextCuePoint:function(){null==this._animation.cues?this.nextCuePointFrame=
-1:(this._cuepointIndex++,null==this._animation.cues[this._cuepointIndex]?this._cuepointIndex--:this.nextCuePointFrame=this._animation.cues[this._cuepointIndex].frame)},get_spritesheet:function(){return this._spritesheet},set_isPlaying:function(a){return this._isPlaying=a},get_animation:function(){return this._animation},__class__:vb,__properties__:k(Vc.prototype.__properties__,{get_animation:"get_animation",set_isPlaying:"set_isPlaying",get_spritesheet:"get_spritesheet"})});var Wj=function(){};g["stolo.sprites.BitmapFrameSymbol"]=
Wj;Wj.__name__=["stolo","sprites","BitmapFrameSymbol"];Wj.prototype={get_subTexture:function(){null==this._subTexture&&null!=this.texture&&(this._subTexture=this.texture.subTexture(this.x,this.y,this.width,this.height));return this._subTexture},__class__:Wj,__properties__:{get_subTexture:"get_subTexture"}};var hj=function(a,b,c,d,e){null==e&&(e=!0);this._root=new o;this._cache=new C;this.onUpdateSignal=new T;""==a&&(a=null);this.prefix=a;vb.call(this,null,null,d,e);null!=b&&Ja.getSpritesheet(b,c,
function(a){return function(b){return a(b)}}(l(this,this.onSpritesheetReady)),Wa.Flump)};g["stolo.sprites.FlumpAnimation"]=hj;hj.__name__=["stolo","sprites","FlumpAnimation"];hj.__super__=vb;hj.prototype=k(vb.prototype,{onAdded:function(){this.owner.addChild(this._root);vb.prototype.onAdded.call(this)},onUpdate:function(a){this.onUpdateSignal.emit(a);vb.prototype.onUpdate.call(this,a)},initialize:function(a){this.flump=a;if(null==this.flump)throw"Missing or incompatible spritesheet: "+q.string(a);
this._lib=this.flump.lib;vb.prototype.initialize.call(this,a)},setDecorator:function(a){this._decorator=a;return this},start:function(){this.isReady||(this.onReady.emit(this),this.isReady=!0,this.gotoAndPlay(this.animName,this.animParams))},updateAnim:function(a){0!=(this._flags&2)&&this._isPlaying&&this.speed.update(a)},setAnim:function(a){this._animation=a;this._currentFPS=0<this._animation.fps?this._animation.fps:this.get_spritesheet().fps;this.playFromCache(a.name)},gotoFrame:function(a){null!=
this.movie&&this.movie.set_position((a-1)/this.movie.symbol.frameRate)},playFromCache:function(a){var b;if(null!=this._cache)if(b=this._cache.get(a),null!=b)b.set_position(0);else{if(null==this._lib._symbols.get(a))return vb.verbose&&null,null;b=this.createMovie(a);this._cache.set(a,b)}else b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);this.movie=a;
null!=this._animCompleteConnection&&this._animCompleteConnection.dispose();this._animCompleteConnection=a.get_looped().connect(l(this,this.handleAnimComplete));return a},__class__:hj});var cc=function(){this._animations=new C;this.nameSeparator="/";this.prefixSeparator="_";this.defaultAnim="idle";this.fps=cc.DefaultFPS;this.type=Wa.JsonArray};g["stolo.sprites.Spritesheet"]=cc;cc.__name__=["stolo","sprites","Spritesheet"];cc.prototype={getAnimation:function(a,b,c){null==c&&(c=!1);null!=b&&(a=b+this.prefixSeparator+
a);if(!this._animations.exists(a)){if(c)throw"Animation not found: '"+a+"' in spritesheet "+this._name;return null}return this._animations.get(a)},getTexture:function(a,b,c){null==c&&(c=!0);a=this.getBitmapSymbol(a,b,c);return null==a?null:a.get_subTexture()},getBitmapSymbol:function(a,b,c){null==c&&(c=!1);if(c&&!this._bitmapSymbols.exists(a))throw"Symbol '"+a+"' not found in spritesheet "+this._name;return this._bitmapSymbols.get(a)},finalize:function(){this.orderFramesByName();null!=this._overrides&&
this.applyOverrides(this._overrides)},parseData:function(a,b,c){for(var a=a.getTexture(c+ka.removeFileExtension(b.meta.image)),d,e=c=0,h=b.frames;e<h.length;){var f=h[e];++e;d=null!=this.nameSeparator?f.filename.lastIndexOf(this.nameSeparator):-1;d=0>=d?null:M.substr(f.filename,0,d);f=this.createFrameSymbol(f,a,c);null!=d&&this.addToAnim(d,f,a,c);this.addBitmapSymbol(f);null==this._frames&&(this._frames=[]);this._frames.push(f);c++}null==this._animations.get(this.defaultAnim)&&null!=this._firstSymbol&&
(this.defaultAnim=this._firstSymbol.name);if(null==this._animations.get(this.defaultAnim)){c=0;for(e=this._frames;c<e.length;)h=e[c],++c,this.addToAnim(this.defaultAnim,h,a)}null!=b.spritesheet&&(this._overrides=b.spritesheet)},orderFramesByName:function(){for(var a=this._animations.iterator();a.hasNext();)a.next().orderFramesByName();null!=this._frames&&this._frames.sort(function(a,c){return a.name==c.name?0:a.name>c.name?1:-1})},addToAnim:function(a,b){var c=this._animations.get(a);null==c&&(c=
new Cf(this,a,null,-1,b.sourceWidth,b.sourceHeight),this._animations.set(a,c),null==this._firstSymbol&&(this._firstSymbol=c));c.addFrame(b);return c},addBitmapSymbol:function(a,b){null==this._bitmapSymbols&&(this._bitmapSymbols=new C);null==b&&(b=a.name);this._bitmapSymbols.set(b,a)},createFrameSymbol:function(a,b,c){var d=new Wj;d.index=c;d.name=a.filename;d.name.lastIndexOf(".")==d.name.length-4&&(c=d.name.lastIndexOf("."),d.name=M.substr(d.name,0,c));d.texture=b;d.x=a.frame.x;d.y=a.frame.y;d.width=
a.frame.w;d.height=a.frame.h;d.offsetX=a.spriteSourceSize.x;d.offsetY=a.spriteSourceSize.y;d.sourceWidth=a.sourceSize.w;d.sourceHeight=a.sourceSize.h;return d},applyOverrides:function(a){for(var b,c=0,d=y.fields(a);c<d.length;){var e=d[c];++c;b=y.field(a,e);if("animations"==e||"anims"==e)for(var e=0,h=y.fields(b);e<h.length;){var f=h[e];++e;this.modAnim(f,y.field(b,f),!0)}else this.applyOverride(e,b)}},applyOverride:function(a,b){Object.prototype.hasOwnProperty.call(this,a)&&y.setProperty(this,a,
b)},modAnim:function(a,b,c,d){null==c&&(c=!0);var e=this.getAnimation(a,d);if(null==e)if(c&&null!=b.frames)e=new Cf(this,a,d,-1,0,0),this._animations.set(a,e);else throw"Anim '"+a+"' not found";a=0;for(c=y.fields(b);a<c.length;){var h=c[a];++a;d=y.field(b,h);if("frames"==h)if(0<d.length&&0<=d[0]&&e.setFrames(d,this._frames),0<d.length)for(var h=0,f=d.length;h<f;){var g=h++;e.setFrameData(g,d[g])}else throw"Unknown frames format: "+q.string(d);else"cues"==h||"cuepoints"==h?(d=y.field(b,h),this.addCuePoints(e.name,
d,null,e)):y.setProperty(e,h,d)}return e},addCuePoints:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));for(var e=0;e<b.length;){var h=b[e];++e;this.addCuePoint(a,h,c,d)}},addCuePoint:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));d.addCuePoint(b);return d},get_name:function(){return this._name},set_name:function(a){return this._name=a},__class__:cc,__properties__:{set_name:"set_name",get_name:"get_name"}};var Vj=function(a,b){cc.call(this);this.type=Wa.Flump;this.loadLibrary(a,
b)};g["stolo.sprites.FlumpSpritesheet"]=Vj;Vj.__name__=["stolo","sprites","FlumpSpritesheet"];Vj.__super__=cc;Vj.prototype=k(cc.prototype,{getAnimation:function(a,b){null!=b&&(a=b+this.prefixSeparator+a);return!this._animations.exists(a)?this.createAnimation(a,b):this._animations.get(a)},loadLibrary:function(a,b){this.lib=new Ck(b,a)},createAnimation:function(a,b){if(null==this.lib._symbols.get(a))return null;var c=new Cf(this,a,b,-1,0,0);this._animations.set(a,c);return c},finalize:function(){},
__class__:Vj});var Bf=function(){this._framesMap=new Fb;cc.call(this);this.type=Wa.Grid};g["stolo.sprites.GridSpritesheet"]=Bf;Bf.__name__=["stolo","sprites","GridSpritesheet"];Bf.__super__=cc;Bf.prototype=k(cc.prototype,{finalize:function(){},parseData:function(a,b,c){a=a.getTexture(c+ka.removeFileExtension(b.image));null!=b.defaultAnim&&(this.defaultAnim=b.defaultAnim);for(var d=0,e=y.fields(b.animations);d<e.length;){var h=e[d];++d;var f=y.field(b.animations,h),c=new Cf(this,h,null,0<f.fps?f.fps:
-1,b.frameWidth,b.frameHeight,f.loop),f=f.frames;if(null!=f)for(var g=0;g<f.length;){var i=f[g];++g;var i=i-Bf.BaseIndex,j;if(this._framesMap.exists(i))j=this._framesMap.get(i);else{j=new Wj;this._framesMap.set(i,j);for(var k=0,l=0,m=c.width*i;m>=a.get_width();)m-=a.get_width(),l+=c.height;k+=m;j.index=i;j.name=h+"_"+i;j.texture=a;j.x=k;j.y=l;j.width=b.frameWidth;j.height=b.frameHeight;j.offsetX=0;j.offsetY=0;j.sourceWidth=b.frameWidth;j.sourceHeight=b.frameHeight}c.addFrame(j)}this._animations.set(h,
c)}},__class__:Bf});var la=g["stolo.ui.ButtonState"]={__ename__:["stolo","ui","ButtonState"],__constructs__:["up","pressed","selected","over","disabled"]};la.up=["up",0];la.up.toString=p;la.up.__enum__=la;la.pressed=["pressed",1];la.pressed.toString=p;la.pressed.__enum__=la;la.selected=["selected",2];la.selected.toString=p;la.selected.__enum__=la;la.over=["over",3];la.over.toString=p;la.over.__enum__=la;la.disabled=["disabled",4];la.disabled.toString=p;la.disabled.__enum__=la;var Ea=function(a,b,
c){this._x=this._y=this._offsetX=this._offsetY=0;this.localized=!1;null!=b&&(this.fontStyle=K.getFontStyle(b),this._defaultFont=null!=this.fontStyle?this.fontStyle.font:K.getFont(b));null==this._defaultFont&&(this._defaultFont=K.defaultFont);Ya.call(this,this._defaultFont);null!=a&&this.setText(a,c)};g["stolo.ui.LocalizedTextSprite"]=Ea;Ea.__name__=["stolo","ui","LocalizedTextSprite"];Ea.__super__=Ya;Ea.prototype=k(Ya.prototype,{applyFontStyle:function(a,b){null==b&&(b=!0);null==a&&(a=this.fontStyle);
null!=a&&(b&&K.applyFontStyle(this,a),null!=a.offsetX&&(this._offsetX=a.offsetX),null!=a.offsetY&&(this._offsetY=a.offsetY),null!=a.transform&&Ya.prototype.set_text.call(this,K.applyTransform(this._text,a.transform)),this.setXY(this._x,this._y))},onAdded:function(){Ya.prototype.onAdded.call(this)},setText:function(a,b,c){null==c&&(c=!0);this._id=a;this.localized=!1;a=Sa.localizeTextField(this,a,b,this._defaultFont);this.localized=a.localized;c&&(null!=this.fontStyle&&this.applyFontStyle(this.fontStyle),
null!=a.fontStyle&&this.applyFontStyle(a.fontStyle))},set_text:function(a){if(this.localized)throw"Attempting to set text directly with '"+a+"', please use setText() send null as constructor id or use a TextSprite instead";this.localized=!1;return Ya.prototype.set_text.call(this,a)},setXY:function(a,b){this._x=a;this._y=b;return Ya.prototype.setXY.call(this,this._x+this._offsetX,this._y+this._offsetY)},__class__:Ea});var Xj=function(a){this.onUpdateSound=new T;Dc.call(this);this._pack=a;this._downOnTexture=
O.getTexture("btn_sound_on_pressed",this._pack);this._downOffTexture=O.getTexture("btn_sound_off_pressed",this._pack)};g["stolo.ui.SoundButton"]=Xj;Xj.__name__=["stolo","ui","SoundButton"];Xj.__super__=Dc;Xj.prototype=k(Dc.prototype,{dispose:function(){this.onUpdateSound=this._pack=null;Dc.prototype.dispose.call(this)},onAdded:function(){Dc.prototype.onAdded.call(this);this._soundButton=new wb(this._pack,"btn_sound_off");this._soundButton.setXY(0,0);this._soundButton.get_pointerUp().connect(l(this,
this.onUp));this._soundButton.get_pointerDown().connect(l(this,this.onDown));this.owner.addChild((new o).add(this._soundButton));this.updateSoundState()},onUp:function(a){a._stopped=!0;v.get_isMuted()?v.unmute():v.mute();this.onUpdateSound.emit(v.get_isMuted());this.updateSoundState()},onDown:function(a){a._stopped=!0;v.get_isMuted()?null!=this._downOnTexture&&(this._soundButton.display.texture=this._downOnTexture):null!=this._downOffTexture&&(this._soundButton.display.texture=this._downOffTexture)},
updateSoundState:function(){this._soundButton.display.texture=v.get_isMuted()?O.getTexture("btn_sound_off",this._pack):O.getTexture("btn_sound_on",this._pack);this._soundButton.updateUpTexture(this._soundButton.display.texture)},__class__:Xj});var Ig=function(){this.shortLived=this.isDisposed=!1;this.maxY=580;this.spreadX=30;this.startX=0;j.call(this)};g["stolo.ui.fx.Confetti"]=Ig;Ig.__name__=["stolo","ui","fx","Confetti"];Ig.__super__=j;Ig.prototype=k(j.prototype,{get_name:function(){return"Confetti_97"},
dispose:function(){this.isDisposed=!0;this.allWaveProps=this.flipHolderSprite=this.rotHolderSprite=this.confettiSprite=null;j.prototype.dispose.call(this)},onAdded:function(){this.build();j.prototype.onAdded.call(this)},build:function(){var a=Math.round(10+5*Math.random());this.flipHolderSprite=new s;this.owner.add(this.flipHolderSprite);this.flipHolderSprite.disablePointer();var b=new o;this.owner.addChild(b);this.rotHolderSprite=new s;b.add(this.rotHolderSprite);this.rotHolderSprite.disablePointer();
var c=new o;b.addChild(c);this.confettiSprite=new Da(this.color,a,a);c.add(this.confettiSprite);this.confettiSprite.x.set__(-a/2);this.confettiSprite.y.set__(-a/2);this.confettiSprite.disablePointer();this.xProp=new Ze(0.25,1);this.yProp=new Ze(2,4);this.flipProp=new Ze(4,8);this.rotProp=new Ze(1,4);this.flipRotProp=new Ze(0.25,1);this.allWaveProps=[this.xProp,this.yProp,this.flipProp,this.rotProp,this.flipRotProp];this.reset()},reset:function(){for(var a=0,b=this.allWaveProps.length;a<b;)this.allWaveProps[a++].randomizeSpeed();
this.yProp.value=0},update:function(a){if(!this.isDisposed){for(var b=0,c=this.allWaveProps.length;b<c;)this.allWaveProps[b++].update(a);this.yProp.value>2*Math.PI&&(this.shortLived?this.dispose():this.reset());this.flipHolderSprite.x.set__(this.startX+Math.sin(this.xProp.value)*this.spreadX);this.flipHolderSprite.y.set__(this.yProp.value/(2*Math.PI)*this.maxY);null!=this.flipRotProp&&this.flipHolderSprite.rotation.set__(360*this.flipRotProp.value);null!=this.flipProp&&this.flipHolderSprite.scaleX.set__(Math.cos(this.flipProp.value));
null!=this.rotProp&&this.rotHolderSprite.rotation.set__(360*this.rotProp.value)}},__class__:Ig});var Ze=function(a,b){this.min=a;this.max=b;this.value=2*Math.random()*Math.PI};g["stolo.ui.fx.WaveProp"]=Ze;Ze.__name__=["stolo","ui","fx","WaveProp"];Ze.prototype={randomizeSpeed:function(){this.speed=this.min+Math.random()*(this.min-this.max)},update:function(a){this.value+=a*this.speed},__class__:Ze};var Wf=function(a,b){this.confettiColors=[16711680,16746496,16776960,8978176,65280,65416,65535,35071,
255,8913151,16711935];this.startSpreadY=1;this.shortLived=!1;this.maxCount=50;this.spreadX=30;this.centerX=0;this.autoStart=!0;this.speed=new Q(0.3);j.call(this);this.width=a;this.height=b};g["stolo.ui.fx.Confettis"]=Wf;Wf.__name__=["stolo","ui","fx","Confettis"];Wf.__super__=j;Wf.prototype=k(j.prototype,{get_name:function(){return"Confettis_96"},dispose:function(){j.prototype.dispose.call(this)},onAdded:function(){0==this.centerX&&(this.centerX=0.5*this.width);this.autoStart&&this.start()},onRemoved:function(){},
onUpdate:function(a){this.speed.update(a);if(!(0==this.speed._value||null==this.items))for(var b=0,c=this.items.length;b<c;)this.items[b++].update(a*this.speed._value)},start:function(){this._container=new s;this.owner.addChild((new o).add(this._container));this._container.disablePointer();this.items=[];for(var a=0,b=this.maxCount;a<b;){var c=a++,d=this.getConfetti();this.setupConfetti(d,c);this.addConfetti(d,c)}},getConfetti:function(){return new Ig},setupConfetti:function(a,b){a.startX=this.centerX+
(b/(this.maxCount-1)-0.5)*this.width;a.color=this.confettiColors[Math.floor(0.999*b/(this.maxCount-1)*this.confettiColors.length)];a.spreadX=this.spreadX;a.maxY=this.height;a.shortLived=this.shortLived;return new Ig},addConfetti:function(a){this._container.owner.addChild((new o).add(a));a.yProp.value=2*Math.random()*Math.PI*this.startSpreadY;this.items.push(a);return a},__class__:Wf});var dl=function(){};g["stolo.utils.AssetUtils"]=dl;dl.__name__=["stolo","utils","AssetUtils"];dl.getFileInfo=function(a,
b){var c,d=ka.getFileExtension(a),e;null==d&&null!=b?(a.lastIndexOf("/")==a.length-1&&(e=a.lastIndexOf("/"),a=M.substr(a,0,e)),e=a,c=a.substring(a.lastIndexOf("/")+1,a.length),b=ja.replace(b,"{{name}}",c),-1<c.indexOf(".")&&a.substring(0,a.lastIndexOf(".")),e.lastIndexOf("/")<e.length-1&&(e+="/"),a=b,d=ka.getFileExtension(a)):(e=a.substring(0,a.lastIndexOf("/")+1),c=-1<a.indexOf("/")?a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")):a.substring(0,a.lastIndexOf(".")));return{name:c,path:e,url:a,
ext:d}};var ac=function(){};g["stolo.utils.BrowserUtils"]=ac;ac.__name__=["stolo","utils","BrowserUtils"];ac.getCurrentURL=function(a){null==a&&(a=!1);var b=u._platform.getExternal().call("window.location.href.toString");a&&null!=b&&(b=b.split("?")[0]);return b};ac.getUrlParams=function(){if(null!=ac.urlParams)return ac.urlParams;var a=ac.getCurrentURL().split("?");if(1==a.length)return{};for(var b={},a=a[1].split("&"),c=0;c<a.length;){var d=a[c];++c;d=d.split("=");2==d.length&&(d[1]=ja.replace(d[1],
"#",""),y.setProperty(b,d[0],d[1]))}ac.urlParams=b;return ac.urlParams};ac.getURL=function(a,b){null==b&&(b="_blank");window.open(a,b)};ac.execute=function(a){return eval(a)};var ag=function(){};g["stolo.utils.DataUtils"]=ag;ag.__name__=["stolo","utils","DataUtils"];ag.isUnlocked=function(a,b){return!b.exists(a)?!1:b.get(a)};ag.unlock=function(a,b){if(ag.isUnlocked(a,b))return!1;b.set(a,!0);return!0};var r=function(){};g["stolo.utils.DeviceUtils"]=r;r.__name__=["stolo","utils","DeviceUtils"];r.init=
function(a,b){null==r.UA&&(0<a&&0<b?r.setSize(a,b):r.setSize(u._platform.getStage().get_width(),u._platform.getStage().get_height()),r.touch=u._platform.getTouch().get_supported(),r.mobile=r.touch,r.power=30,r.UA=r.getUA(),null!=r.UA&&(r.ua=r.UA.toLowerCase(),r.getScreenSize(),r.iphone=r.phone=-1<r.ua.indexOf("iphone")||-1<r.ua.indexOf("ipod"),r.ipad=r.tablet=-1<r.ua.indexOf("ipad"),r.ios=r.iphone||r.ipad,r.ie=-1<r.ua.indexOf("msie")||-1<=r.ua.indexOf("trident"),r.android=r.touch&&(-1<r.ua.indexOf("linux")||
-1<r.ua.indexOf("android")),r.ios?r.setupIos():r.android&&r.setupAndroid()),r.slow=0>=r.power)};r.setupIos=function(){r.mobile=!0;var a=q.parseInt(u._platform.getExternal().call("window.devicePixelRatio.toString"));0<a&&(r.ipadVersion=1+a);var b=eval("window"),c=b.ondevicemotion;b.ondevicemotion=function(a){null==a.acceleration&&(r.ipadVersion-=1);b.ondevicemotion=c};if(-1<r.ua.indexOf("ipod")||3>r.ipadVersion)r.power=0,r.lowPerformance=!0,r.lowMemory=!0};r.setupAndroid=function(){r.mobile=!0;if(-1<
r.ua.indexOf("mobile")){if(r.phone=!0,r.tablet=r.detectTablet(),r.lowPerformance=r.detectLowPerformance(),r.lowMemory=r.detectLowMemory(),r.lowPerformance||r.lowMemory)r.power=0}else r.tablet=!0,-1<r.ua.indexOf("sgh-t")&&(r.tablet=!1,r.phone=!0)};r.detectTablet=function(){return-1<r.ua.indexOf("nexus 5")||-1<r.ua.indexOf("tablet")||700<r.landscapeScreenWidth?!0:!1};r.detectLowPerformance=function(){for(var a=0,b=r.lowPerformanceDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];
++d;if(-1<r.UA.indexOf(e))return!0}}return!1};r.detectLowMemory=function(){for(var a=0,b=r.lowMemoryDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];++d;if(-1<r.UA.indexOf(e))return!0}}return!1};r.getScreenSize=function(){r.screenWidth=q.parseFloat(u._platform.getExternal().call("window.screen.width.toString"));r.screenHeight=q.parseFloat(u._platform.getExternal().call("window.screen.height.toString"));r.screenWidth>r.screenHeight?(r.landscapeScreenWidth=r.screenWidth,r.landscapeScreenHeight=
r.screenHeight):(r.landscapeScreenWidth=r.screenHeight,r.landscapeScreenHeight=r.screenWidth)};r.setSize=function(a,b){r.gameWidth=Math.round(a);r.gameHeight=Math.round(b);r.stageWidth=a*r.scale;r.stageHeight=b*r.scale};r.setScale=function(a){a!=r.scale&&(r.scale=a,r.stageWidth=r.gameWidth*a,r.stageHeight=r.gameHeight*a,r.onScaleChange.emit())};r.getUA=function(){if(null!=r.UA)return r.UA;r.UA=eval("navigator.userAgent");return r.UA};var O=function(){};g["stolo.utils.DisplayUtils"]=O;O.__name__=["stolo",
"utils","DisplayUtils"];O.__properties__={get_sharedAssets:"get_sharedAssets"};O.setSharedAssets=function(a){O._sharedPack=a;O._sharedAssets=A.getPack(a);return O._sharedAssets};O.get_sharedAssets=function(){return O._sharedAssets};O.createButton=function(a,b,c,d,e){null==d&&(d="buttons");null==e&&(e=O._sharedAssets);return new wb(e,b,a,c,d)};O.createImage=function(a,b){null==b&&(b=O._sharedAssets);return new Y(O.getTexture(a,b))};O.createTextSprite=function(a,b,c){b=K.getTextSprite(b,null,0,0);b.set_text(a);
O.addSprite(b,c);return b};O.getTexture=function(a,b,c){null==c&&(c=!0);var d=null;null==b&&(b=O._sharedAssets);if(null==b)throw"Asset pack must be provided";d=b.getTexture(a,null==O._sharedAssets);null==d&&null!=O._spritesheets.h.__keys__[b.__id__]&&(d=O._spritesheets.h[b.__id__].getTexture(a,null,!1));null==d&&null!=O._sharedAssets&&(null!=O._spritesheets.h.__keys__[O._sharedAssets.__id__]&&(d=O._spritesheets.h[O._sharedAssets.__id__].getTexture(a,null,!1)),null==d&&(d=O._sharedAssets.getTexture(a,
c)));return d};O.getTextureFromPack=function(a,b,c){null==c&&(c=!0);return O.getTexture(a,A.getPack(b,c),c)};O.addSprite=function(a,b){null!=a.owner?b.addChild(a.owner):b.addChild((new o).add(a));return a};O.createSoundButton=function(a){null==a&&(a=O._sharedAssets);return new Xj(a)};O.gap=function(a,b,c,d,e){null==e&&(e={});var c=a-c,h=b-d,d=Math.sqrt(c*c+h*h),c=xe.degrees(Math.atan2(h,c))+180;X.__instanceof(e,s)?(h=e,h.setXY(a,b),h.scaleX.set__(d/h.getNaturalWidth()),h.rotation.set__(c)):(e.x=a,
e.y=b,e.width=d,e.rotation=c);return e};var U=function(){};g["stolo.utils.DynamicUtils"]=U;U.__name__=["stolo","utils","DynamicUtils"];U.is=function(a,b){var c=ca["typeof"](a);return ca.enumEq(c,b)};U.configure=function(a,b,c){null==c&&(c=!0);for(var d=0,e=y.fields(b);d<e.length;){var h=e[d];++d;var f=y.field(b,h);"string"==typeof f&&("false"==f&&(f=!1),"true"==f&&(f=!0));(c||!(null==f||""==f))&&y.setProperty(a,h,f)}};U.applyMods=function(a,b){for(var c=0,d=y.fields(b);c<d.length;){var e=d[c];++c;
var h=y.field(b,e);null==h||""==h||y.setProperty(a,e,U.mod(y.getProperty(a,e),h))}};U.mod=function(a,b){if("string"==typeof b){var c=b.split("="),d;if(2<=c.length)switch(d=q.parseFloat(c[c.length-1]),c[0]){case "+":a+=d;break;case "-":a-=d;break;case "/":a/=d;break;case "*":a*=d;break;default:a=d}else a=q.parseFloat(b)}else return b;return a};U.merge=function(a,b,c){null==c&&(c=!1);if(U.is(b,N.TNull)||U.is(b,N.TInt)||U.is(b,N.TFloat)||U.is(b,N.TBool)||U.is(b,N.TClass(String))||U.is(b,N.TFunction))return b;
if(U.is(b,N.TClass(Array)))return c?U.clone(b):b;if(U.is(b,N.TObject)){if(U.is(a,N.TObject)){var d;d=c?U.clone(a):a;for(var e=0,h=y.fields(b);e<h.length;){var f=h[e];++e;var g=y.field(a,f),i=y.field(b,f);y.setField(d,f,U.merge(g,i,c))}return d}return c?U.clone(b):b}throw"Type not supported in the merge :"+q.string(b);};U.clone=function(a){if(U.is(a,N.TNull)||U.is(a,N.TInt)||U.is(a,N.TFloat)||U.is(a,N.TBool)||U.is(a,N.TClass(String))||U.is(a,N.TFunction))return a;if(U.is(a,N.TClass(Array))){for(var b=
[],c=0,d=a.length;c<d;){var e=c++;b[e]=U.clone(a[e])}return b}if(U.is(a,N.TObject)){b={};c=0;for(d=y.fields(a);c<d.length;)e=d[c],++c,y.setField(b,e,U.clone(y.field(a,e)));return b}return null};var xe=function(){};g["stolo.utils.MathUtils"]=xe;xe.__name__=["stolo","utils","MathUtils"];xe.degrees=function(a){return a*(180/Math.PI)};xe.radians=function(a){return a*Math.PI/180};xe.lerp=function(a,b,c){return 0>c?a:1<c?b:a*(1-c)+b*c};var Fa=function(){};g["stolo.utils.SequenceUtils"]=Fa;Fa.__name__=["stolo",
"utils","SequenceUtils"];Fa.getMovementSequence=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=!0);var h=new Ra;Fa.lastDest=null;Fa.appendMovementActions(a,h,b);d&&(a=a.reverse(),a.shift(),Fa.appendMovementActions(a,h,b),Fa.appendMovementActions([{x:0,y:0}],h,b));(c||d)&&Fa.appendMovementActions([{x:0,y:0}],h,b);0<e&&h.add(new Oa(e));return h};Fa.appendMovementActions=function(a,b,c){null==b&&(b=new Ra);for(var d=0;d<a.length;){var e=a[d];++d;Object.prototype.hasOwnProperty.call(e,
"delay")&&b.add(new Oa(e.delay));var h=Object.prototype.hasOwnProperty.call(e,"x"),f=Object.prototype.hasOwnProperty.call(e,"y"),g;if(h||f)g=new La,h&&(g.x=e.x+c.offsetX),f&&(g.y=e.y+c.offsetY),b.add(Fa.getMovementAction(e,h?c.x:null,f?c.y:null,g,Fa.lastDest,c)),Fa.lastDest=g}return b};Fa.getMovementAction=function(a,b,c,d,e,h){var f=Fa.DefaultMoveSpeed,g=Fa.DefaultMovePPS,i=Fa.DefaultMoveEase,j=Fa.DefaultMoveTime,k=!1;0<a.time?j=a.time:k=!0;0<a.pps&&(g=a.pps);0<a.speed&&(f=a.speed);k&&(j=0,null!=
e?(null!=b&&(j+=Math.abs(e.x-d.x)),null!=c&&(j+=Math.abs(e.y-d.y))):(null!=b&&(j+=Math.abs(b._value-d.x)),null!=c&&(j+=Math.abs(c._value-d.y))),j=j/g-0.1*(j/g)*f,0>=j&&(j=Fa.DefaultMoveTime));null!=h&&null!=h.ease&&(i=h.ease);e=new fb;null!=b&&e.add(new hc(b,d.x,j,i));null!=c&&e.add(new hc(c,d.y,j,i));return e};Fa.__super__=j;Fa.prototype=k(j.prototype,{get_name:function(){return"SequenceUtils_62"},__class__:Fa});var Mb=function(){};g["stolo.web.BrowserTools"]=Mb;Mb.__name__=["stolo","web","BrowserTools"];
Mb.init=function(a,b){null==a&&(a=!1);if(!Mb.hasInit){Mb.hasInit=!0;ac.execute("/**\n* Those utilities are added to the browser window by BrowserTools.hx\n*/\nvar stolo = stolo || { };\nwindow.stolo = stolo;\n\nstolo.version = \"v0.1\";\nstolo.loadingScripts = {};\nstolo.loadedScripts = {};\n\nstolo.url_jquery = 'http://code.jquery.com/jquery-1.11.3.min.js';\n\nstolo.getJquery = function(success)\n{\n\treturn stolo.loadScriptIf(window.jQuery==null, stolo.url_jquery, function()\n\t{\n\t\tsuccess(window.jQuery);\n\t})\n};\n\nstolo.loadScriptIf = function(condition, url, success)\n{\n\tif(condition) {\n\t\tstolo.loadScript(url, success);\n\t} else {\n\t\tsuccess();\n\t}\n};\n\nstolo.loadScript = function(url, success)\n{\n\tvar id = encodeURIComponent(url);\n\t\n\t// Already loaded\n\tif(stolo.loadedScripts[id]) success();\n\t\n\t// Already loading\n\tif(stolo.loadingScripts[id]) return;\n\t\n\tvar head = document.getElementsByTagName('head')[0];\n\tvar script = document.createElement('script');\n\tscript.src = url;\n\t\n\tstolo.loadingScripts[id] = script;\n\n\t// Attach handlers for all browsers\n\tscript.onload = script.onreadystatechange = function()\n\t{\n\t\tif (stolo.loadingScripts[id] && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete'))\n\t\t{\n\t\t\tstolo.loadingScripts[id] = null;\n\t\t\tdelete stolo.loadedScripts[id];\n\n\t\t\t// callback function provided as param\n\t\t\tsuccess();\n\t\t\t\n\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\thead.removeChild(script);\n\t\t};\n\t};\n\n\thead.appendChild(script);\n};");
var c=u;Mb.canvas=c._platform._canvas;Mb.container=c._platform._container;Mb.stolo=y.field(window,"stolo");a?Mb.LoadJquery(b):null!=b&&b()}};Mb.focusOnCanvas=function(){Mb.init();Mb.canvas.focus()};Mb.LoadJquery=function(a){Mb.stolo.getJquery(function(b){Mb.jQuery=b;null!=a&&a()})};var w=function(){};g["stolo.web.DeltaDNA"]=w;w.__name__=["stolo","web","DeltaDNA"];w.init=function(a,b,c,d,e){if(null==a)throw"Missing gameURL";a=ja.replace(a,"http://","");a=ja.replace(a,"https://","");w.gameURL=a;w.collectURL=
d;w.engageURL=e;w.setLiveStatus();w.getPlatform();w.getDeviceType();w.key=w.isLive?c:b;a=ea.get("UserId",null);w.isValidUserID(a)?w.setUserID(a):w.getNewUserID()};w.setLiveStatus=function(){if(w.allowLiveKey){w.isLive=!0;var a=w.getCurrentURL();if(null!=a&&null!=w.staging)for(var a=a.toLowerCase(),b=0,c=w.staging;b<c.length;){var d=c[b];++b;if(-1<a.indexOf(d)){w.isLive=!1;break}}w.isLive&&w.debug&&null}};w.setReady=function(){if(!w.isReady&&(w.isReady=!0,w.onReady.emit(),null!=w._trackRequestsQueue)){for(var a=
0,b=w._trackRequestsQueue;a<b.length;){var c=b[a];++a;w.track(c.eventName,c.eventParams)}w._trackRequestsQueue=null}};w.setUserID=function(a){w.userID=a;ea.set(w.userIDStorageField,a);null==w.sessionID?w.createSession():w.setReady()};w.getNewUserID=function(){w.isNewPlayer=!0;var a=new dg(w.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);w.isValidUserID(c.userID)?w.setUserID(c.userID):(w.logError("Invalid or missing userID:"),w.logError(a))};a.request()};w.isValidUserID=function(a){return null==
a||""==a||"NULL"==a.toUpperCase()?!1:!0};w.createSession=function(){var a=new dg(w.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);w.isValidUserID(c.userID)?(w.sessionID=c.userID,w.setReady()):(w.logError("Invalid or missing uuid for sessionID:"),w.logError(a))};a.request()};w.track=function(a,b){w.isReady?w.collectRequest(a,b):(null==w._trackRequestsQueue&&(w._trackRequestsQueue=[]),w._trackRequestsQueue.push({eventName:a,eventParams:b}))};w.collectRequest=function(a,b,c,d,e){null==
e&&(e=w.collectURL+"/"+w.key);e=new dg(e);b||(b={});b.sdkVersion=w.sdkVersion;b.platform=w.getPlatform();w.useTimezoneOffset&&(b.timezoneOffset=w.getTimeZoneOffset());null!=w.clientVersion&&(b.clientVersion=w.clientVersion);a={eventName:a,userID:w.userID,sessionID:w.sessionID,eventParams:b};e.addHeader("Content-Type","application/json");e.setPostData(JSON.stringify(a));e.onData=function(a){w.debug&&null;a=null!=a&&""!=a&&" "!=a?JSON.parse(a):null;null!=c&&c(a)};e.onStatus=function(a){204!=a&&w.logError("status: "+
a)};e.onError=function(a){w.logError(a);null!=d&&d(a)};w.debug&&null;e.request(!0);return e};w.getPlatform=function(){if(null!=w.platform)return w.platform;w.platform="PIRACY_UNKNOWN";var a=w.getCurrentURL(),b=r.UA.toLowerCase(),c=w.getReferrer();if(null==a)return w.platform;a=a.toLowerCase();null!=c&&(c=c.toLowerCase());if(!(-1<a.indexOf(".nick")||-1<a.indexOf("nick.com/games/data/")))return w.platform;var d=!1,e=window;if(r.android||r.ios){if(null!=c&&(-1<c.indexOf("apikey")||-1<c.indexOf("www.ludei.com")))d=
!0;null!=e.cocoonjsCheckArgs&&(d=!0);r.ios&&-1==b.indexOf("safari")&&-1==b.indexOf("chrome")&&(d=!0)}if(d)w.platform=r.ios?w.platforms.app.ios:w.platforms.app.android;else{w.platform=w.platforms.web.desktop;if(-1<a.indexOf("m.nick")||r.mobile)w.platform=w.platforms.web.mobile;if(-1<a.indexOf("t.nick")||r.tablet)w.platform=w.platforms.web.tablet}return w.platform};w.getCurrentURL=function(){if(null!=w._currentURL)return w._currentURL;w._currentURL=eval("window.location.href");return null==w._currentURL?
"invalid URL":w._currentURL};w.getReferrer=function(){if(null!=w._currentReferrer)return w._currentReferrer;w._currentReferrer=window.document.referrer;return null==w._currentReferrer?"invalid Referrer":w._currentReferrer};w.setPlatforms=function(a){for(var b=0,c=y.fields(a);b<c.length;){var d=c[b];++b;for(var e=y.field(a,d),h=0,f=y.fields(e);h<f.length;){var g=f[h];++h;var i=y.field(e,g),j=y.field(w.platforms,d);if(null==j)throw"Invalid platform type '"+d+"'";j[g]=i}}};w.getDeviceType=function(){if(null!=
w.deviceType)return w.deviceType;w.deviceType=r.tablet?"TABLET":r.phone?"MOBILE_PHONE":"DESKTOP";return w.deviceType};w.trackClientDevice=function(){var a="DESKTOP";r.ipad&&(a="IPAD");r.iphone&&(a="IPHONE");r.android&&(a=r.tablet?"ANDROID_TABLET":"ANDROID_PHONE");var b="PC";r.mobile&&(b="MOBILE_PHONE");r.tablet&&(b="TABLET");var c="UNKNOWN",d="UNKNOWN",e=r.ua;if(null!=e){-1<e.indexOf("webkit")&&(c="UNKNOWN_WEBKIT");-1<e.indexOf("safari")&&(c="SAFARI");-1<e.indexOf("chrome")&&(c="CHROME");-1<e.indexOf("firefox")&&
(c="FIREFOX");-1<e.indexOf("opera")&&(c="Opera");-1<e.indexOf("tizen")&&(c="TIZEN");if(-1<e.indexOf("msie")||-1<e.indexOf("trident"))c="IE";if(-1<e.indexOf("iemobile")||-1<e.indexOf("msiemobile"))c="IE_MOBILE";-1<e.indexOf("windows")&&(d="WINDOWS");if(-1<e.indexOf("macos")||-1<e.indexOf("macintosh")||-1<e.indexOf("os x"))d="OSX";-1<e.indexOf("linux")&&(d="LINUX");r.ios&&(d="IOS");r.android&&(d="ANDROID");if(-1<e.indexOf("kindle")||-1<e.indexOf("silk"))d="FIREOS";-1<e.indexOf("blackberry")&&(d="BLACKBERRY")}e=
r.UA;null==e&&(e="UNKNOWN");w.track("clientDevice",{deviceName:a,deviceType:b,browserName:c,operatingSystem:d,operatingSystemVersion:e})};w.getTimeZoneOffset=function(){var a=w.getTimeZoneOffsetSeconds(),a=Math.round(-1*(a/60)),b=a+":00";0>a&&-10<a&&(b=ja.replace(b,"-","-0"));0<a&&(b="+"+b,10>a&&(b=ja.replace(b,"+","+0")));return b};w.getTimeZoneOffsetSeconds=function(){return M.strDate("1970-01-01").getTime()/1E3/60};w.logError=function(a){u._platform.getExternal().call("window.console.error",[a])};
var Hg=function(){this._zoom=1;this._minX=this._maxX=this._minY=this._maxY=-1;this.limitTarget=this._limitX=this._limitY=!1;this.checkLimit=!0;this.x=this.y=this._x=this._y=0;this.followTarget=!0;this.velocityY=0;this.massY=40;this.dampingY=20;this.stiffnessY=0.7;this.springY=!1;this.velocityX=0;this.massX=40;this.dampingX=10;this.stiffnessX=0.8;this.springX=!1;this.linearDampingX=this.linearDampingY=0.2};g["stolo.world.Camera"]=Hg;Hg.__name__=["stolo","world","Camera"];Hg.prototype={update:function(a){null!=
this.zoom&&(this.zoom.update(a),this._zoom=this.zoom._value);this.followTarget&&(null!=this.target?(this.target.update(a),this._targetX=this.target.x._value,this._targetY=this.target.y._value):(this._targetX=this._x,this._targetY=this._y),this._targetX!=this._x&&(this._diff=this._targetX-this._x,this.springX?(this.velocityX+=(this.stiffnessX*this._diff-this.dampingX*this.velocityX)/this.massX,this._x+=this.velocityX):this._x+=this._diff*this.linearDampingX,0.5>Math.abs(this._diff)&&(this._x=this._targetX)),
this._targetY!=this._y&&(this._diff=this._targetY-this._y,this.springY?(this.velocityY+=(this.stiffnessY*this._diff-this.dampingY*this.velocityY)/this.massY,this._y+=this.velocityY):this._y+=this._diff*this.linearDampingY,0.5>Math.abs(this._diff)&&(this._y=this._targetY)),this.x=this._x,this.y=this._y,null!=this.offset&&(this.offset.update(a),this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&(this.fx.update(a),this.x+=this.fx.x._value,this.y+=this.fx.y._value));this.checkLimit&&
(this._limitX&&(-1!=this._minX&&(this.x=Math.max(this._minX,this.x)),-1!=this._maxX&&(this.x=Math.min(this.x,this._maxX))),this._limitY&&(-1!=this._minY&&(this.y=Math.max(this._minY,this.y)),-1!=this._maxY&&(this.y=Math.min(this.y,this._maxY))),this.limitTarget&&null!=this.target&&(this.target.x.set__(this.x),this.target.y.set__(this.y),null!=this.offset&&(a=this.target.y,a.set__(a._value-this.offset.x._value),a=this.target.y,a.set__(a._value-this.offset.y._value)),null!=this.fx&&(a=this.target.y,
a.set__(a._value-this.fx.x._value),a=this.target.y,a.set__(a._value-this.fx.y._value))))},setXY:function(a,b,c){null==c&&(c=!0);this.x=a;this.y=b;c&&(this._x=this.x,this._y=this.y,this.velocityY=this.velocityX=0,null!=this.offset&&(this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&(this.x+=this.fx.x._value,this.y+=this.fx.y._value))},moveToTarget:function(){var a=this._x,b=this._y;null!=this.target&&(a=this.target.x._value,b=this.target.y._value);this.setXY(a,b,!0)},setTarget:function(a,
b,c){null==c&&(c=!1);null!=this.target&&this.target.dispose();this.target=new Ib(a,b);c&&this.moveToTarget();return this.target},animateTo:function(a,b,c,d){null==d&&(d=Hg.DEFAULT_EASING);this.setTarget(this._x,this._y,!1);this.target.x.animateTo(a,c,d);this.target.y.animateTo(b,c,d)},setAnimatedTarget:function(a,b,c){null==c&&(c=!1);null!=this.target&&this.target.dispose();this.setTarget(a._value,b._value,c);this.target.x=a;this.target.y=b;return this.target},followSprite:function(a,b){null==b&&
(b=!1);return this.setAnimatedTarget(a.x,a.y,b)},setOffset:function(a,b,c,d,e,h){null==e&&(e=-1);null==c&&(c=0);null==this.offset&&(this.offset=new Ib(a,b));this.setOffsetX(a,c,d);this.setOffsetY(b,0<=e?e:c,null!=h?h:d)},setOffsetX:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=D.quintInOut),this.offset.x.animateTo(a,b,c)):(this.offset.x.set_behavior(null),this.offset.x.set__(a))},setOffsetY:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=D.quintInOut),this.offset.y.animateTo(a,b,c)):(this.offset.y.set_behavior(null),
this.offset.y.set__(a))},__class__:Hg};var Nb=function(){};g["zpp_nape.ZPP_ID"]=Nb;Nb.__name__=["zpp_nape","ZPP_ID"];Nb.Interactor=function(){return Nb._Interactor++};Nb.CbType=function(){return Nb._CbType++};Nb.CbSet=function(){return Nb._CbSet++};Nb.Listener=function(){return Nb._Listener++};var Cb=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=
this.outer_con=this.outer_int=null;this.length=0};g["zpp_nape.callbacks.ZPP_Callback"]=Cb;Cb.__name__=["zpp_nape","callbacks","ZPP_Callback"];Cb.prototype={wrapper_body:function(){null==this.outer_body&&(this.outer_body=new Ki,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new Mi,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new Ni,this.outer_int.zpp_inner=this);
null==this.wrap_arbiters?this.wrap_arbiters=Bd.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==
this.next},__class__:Cb};var ya=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Db;this.listeners=new Df;this.zip_listeners=!0;this.bodylisteners=new Yj;this.zip_bodylisteners=!0;this.conlisteners=new Zj;this.zip_conlisteners=!0;this.constraints=new Be;this.interactors=
new Ce;this.id=Nb.CbSet();this.cbpairs=new el};g["zpp_nape.callbacks.ZPP_CbSet"]=ya;ya.__name__=["zpp_nape","callbacks","ZPP_CbSet"];ya.setlt=function(a,b){for(var c=a.cbTypes.head,d=b.cbTypes.head;null!=c&&null!=d;){var e=c.elt,h=d.elt;if(e.id<h.id)return!0;if(h.id<e.id)return!1;c=c.next;d=d.next}return null!=d&&null==c};ya.get=function(a){var b;null==ya.zpp_pool?b=new ya:(b=ya.zpp_pool,ya.zpp_pool=b.next,b.next=null);null;for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);
a=a.next}return b};ya.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};ya.find_all=function(a,b,c,d){a.manager.pair(a,b).forall(c,d)};ya.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):
null==c||Zc.setlt(e,c.elt)?(e.space==this.manager.space&&(b=this.listeners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||Zc.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,e)),
d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||Zc.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());
this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:ya};var dc=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=
null;this.listeners=new Df};g["zpp_nape.callbacks.ZPP_CbSetPair"]=dc;dc.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];dc.get=function(a,b){var c;null==dc.zpp_pool?c=new dc:(c=dc.zpp_pool,dc.zpp_pool=c.next,c.next=null);c.zip_listeners=!0;ya.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};dc.setlt=function(a,b){return ya.setlt(a.a,b.a)||a.a==b.a&&ya.setlt(a.b,b.b)};dc.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=
b;){var c=a.elt,d=b.elt;c==d?((c.options1.compatible(this.a.cbTypes)&&c.options2.compatible(this.b.cbTypes)||c.options2.compatible(this.a.cbTypes)&&c.options1.compatible(this.b.cbTypes))&&this.listeners.add(c),a=a.next,b=b.next):c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var c=
this.listeners.head;null!=c;){var d=c.elt;d.event==a&&b(d);c=c.next}},__class__:dc};var Df=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=Df;Df.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];Df.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Ob.zpp_pool?b=new Ob:(b=Ob.zpp_pool,Ob.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},inlined_insert:function(a,b){var c;null==Ob.zpp_pool?c=new Ob:(c=Ob.zpp_pool,Ob.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ob.zpp_pool;Ob.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ob.zpp_pool;Ob.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();
this.pushmod=!0},__class__:Df};var Yj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_BodyListener"]=Yj;Yj.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];Yj.prototype={inlined_insert:function(a,b){var c;null==$c.zpp_pool?c=new $c:(c=$c.zpp_pool,$c.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;
this.head=a.next;a.elt=null;a.next=$c.zpp_pool;$c.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
$c.zpp_pool;$c.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Yj};var Zj=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=Zj;Zj.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];Zj.prototype={inlined_insert:function(a,b){var c;null==Gc.zpp_pool?c=new Gc:(c=Gc.zpp_pool,Gc.zpp_pool=c.next,c.next=null);null;c.elt=
b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Gc.zpp_pool;Gc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Gc.zpp_pool;Gc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Zj};var Be=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Constraint"]=Be;Be.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];
Be.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Yd.zpp_pool?b=new Yd:(b=Yd.zpp_pool,Yd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yd.zpp_pool;Yd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yd.zpp_pool;
Yd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Be};var Ce=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Interactor"]=Ce;Ce.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];Ce.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==Hc.zpp_pool?b=new Hc:(b=Hc.zpp_pool,Hc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Hc.zpp_pool;Hc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Hc.zpp_pool;Hc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Ce};var Ef=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CbSet"]=Ef;Ef.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];Ef.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Zd.zpp_pool?b=new Zd:(b=Zd.zpp_pool,Zd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;
this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Ef};var mc=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Nb.CbType();this.listeners=new Df;this.bodylisteners=
new Yj;this.conlisteners=new Zj;this.constraints=new Be;this.interactors=new Ce;this.cbsets=new Ef};g["zpp_nape.callbacks.ZPP_CbType"]=mc;mc.__name__=["zpp_nape","callbacks","ZPP_CbType"];mc.prototype={addint:function(a){for(var b=null,c=this.listeners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=
!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,c=this.bodylisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,c=this.conlisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&
a.id>d.id)break;b=c;c=c.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:mc};var Zc=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Nb.Listener()};g["zpp_nape.callbacks.ZPP_Listener"]=Zc;Zc.__name__=["zpp_nape","callbacks","ZPP_Listener"];Zc.setlt=function(a,b){return a.precedence>
b.precedence||a.precedence==b.precedence&&a.id>b.id};Zc.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:Zc};var fl=function(){this.outer_zn=this.options=this.handler=null};g["zpp_nape.callbacks.ZPP_BodyListener"]=fl;fl.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];fl.__super__=Zc;fl.prototype=k(Zc.prototype,{addedToSpace:function(){this.options.handler=l(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=
this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:fl});var gl=function(){this.outer_zn=this.options=this.handler=null};g["zpp_nape.callbacks.ZPP_ConstraintListener"]=gl;gl.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];gl.__super__=Zc;gl.prototype=k(Zc.prototype,{addedToSpace:function(){this.options.handler=
l(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:gl});var Db=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CbType"]=
Db;Db.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];Db.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ec.zpp_pool?b=new ec:(b=ec.zpp_pool,ec.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==ec.zpp_pool?c=new ec:(c=ec.zpp_pool,ec.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,
this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ec.zpp_pool;ec.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ec.zpp_pool;ec.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;
b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Db};var Kb=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;Zc.call(this);this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};g["zpp_nape.callbacks.ZPP_InteractionListener"]=
Kb;Kb.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];Kb.__super__=Zc;Kb.prototype=k(Zc.prototype,{CbSetset:function(a,b,c){for(var d=Kb.UCbSet,e=Kb.VCbSet,h=Kb.WCbSet,a=a.head,f=b.head;null!=a&&null!=f;){var g=a.elt,i=f.elt;g==i?(h.inlined_add(g),a=a.next,f=f.next):ya.setlt(g,i)?(d.inlined_add(g),a=a.next):(e.inlined_add(i),f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;for(;null!=d.head;){a=d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),
f=f.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},CbTypeset:function(a,b,c){for(var d=Kb.UCbType,e=Kb.VCbType,h=Kb.WCbType,a=a.head,f=b.head;null!=a&&null!=f;){var g=a.elt,i=f.elt;g==i?(h.inlined_add(g),a=a.next,f=f.next):g.id<i.id?(d.inlined_add(g),a=a.next):(e.inlined_add(i),f=f.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=f;)e.inlined_add(f.elt),f=f.next;
for(;null!=d.head;){a=d.pop_unsafe();for(f=b.head;null!=f;)c(a,f.elt),f=f.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,c;null==Ka.zpp_pool?c=new Ka:(c=Ka.zpp_pool,Ka.zpp_pool=c.next,c.next=null);null;c.lt=dc.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();
d.validate();ya.single_intersection(a,d,b)&&c.try_insert(dc.get(a,d))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,c.b):b.space.nullListenerType(c.a,c.b);c.a=c.b=null;c.listeners.clear();c.next=dc.zpp_pool;dc.zpp_pool=c});var d=c;d.data=null;d.lt=null;d.swapped=null;d.next=Ka.zpp_pool;Ka.zpp_pool=d},with_union:function(a){for(var b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,e=c.elt;d==e?(a(d),b=b.next,c=c.next):d.id<e.id?(a(d),b=b.next):
(a(e),c=c.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=c;)a(c.elt),c=c.next},addedToSpace:function(){var a=this,b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=l(this,this.cbtype_change1);this.options2.handler=l(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==f.id_ListenerType_PRE;this.with_union(function(c){c.listeners.remove(a);
c.invalidateint();if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();a.effect_change(b,c,d);this.addedToSpace();null},__class__:Kb});var ke=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=
null;this.includes=new Db;this.excludes=new Db};g["zpp_nape.callbacks.ZPP_OptionType"]=ke;ke.__name__=["zpp_nape","callbacks","ZPP_OptionType"];ke.argument=function(a){return null==a?new rf:X.__instanceof(a,rf)?a:(new rf).including(a)};ke.prototype={setup_includes:function(){this.wrap_includes=ld.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=ld.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,
this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,b){for(var c=!1,d=a.head,e=b.head;null!=e&&null!=d;){var h=e.elt,f=d.elt;if(h==f){c=!0;break}else h.id<f.id?e=e.next:d=d.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.excludes.inlined_insert(b,
a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(X.__instanceof(b,ue))this.append_type(a,
b.zpp_inner);else if(X.__instanceof(b,Li)){var c;b.zpp_inner.valmod();for(c=pb.get(b);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);this.append_type(a,d.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;)d=b[c],++c,this.append_type(a,d.zpp_inner)},__class__:ke};var Pl=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};g["zpp_nape.constraint.ZPP_Constraint"]=
Pl;Pl.__name__=["zpp_nape","constraint","ZPP_Constraint"];Pl.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=ya.zpp_pool;ya.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();
for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==Ic.zpp_pool?this.component=new Ic:(this.component=Ic.zpp_pool,Ic.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();
var a=this.component;a.body=null;a.constraint=null;null;a.next=Ic.zpp_pool;Ic.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:Pl};var ma=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=
0;this.b1=this.b2=this.ws1=this.ws2=this.pair=null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};g["zpp_nape.dynamics.ZPP_Arbiter"]=ma;ma.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];ma.prototype={wrapper:function(){null==this.outer&&(ma.internal=!0,this.type==ma.COL?(this.colarb.outer_zn=new Qi,
this.outer=this.colarb.outer_zn):this.type==ma.FLUID?(this.fluidarb.outer_zn=new Ri,this.outer=this.fluidarb.outer_zn):this.outer=new Pd,this.outer.zpp_inner=this,ma.internal=!1);return this.outer},__class__:ma};var rc=function(){this.next=null;ma.call(this);this.type=ma.SENSOR;this.sensorarb=this};g["zpp_nape.dynamics.ZPP_SensorArbiter"]=rc;rc.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];rc.__super__=ma;rc.prototype=k(ma.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),
this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=rc.zpp_pool;rc.zpp_pool=this},__class__:rc});var Ma=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;ma.call(this);
this.type=ma.FLUID;this.fluidarb=this;this.buoyy=this.buoyx=0;this.pre_dt=-1};g["zpp_nape.dynamics.ZPP_FluidArbiter"]=Ma;Ma.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];Ma.__super__=ma;Ma.prototype=k(ma.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=Ma.zpp_pool;Ma.zpp_pool=this;this.pre_dt=-1},preStep:function(a,
b){-1==this.pre_dt&&(this.pre_dt=b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var d=0,e=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(d=this.ws1.fluidProperties.gravityx,e=this.ws1.fluidProperties.gravityy):(d=a.gravityx,e=a.gravityy);var h=0,g=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(h=this.ws2.fluidProperties.gravityx,
g=this.ws2.fluidProperties.gravityy):(h=a.gravityx,g=a.gravityy);var i=0,j=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var k=this.overlap*this.ws1.fluidProperties.density,l=this.overlap*this.ws2.fluidProperties.density;if(k>l)h=k+l,i-=d*h,j-=e*h;else if(k<l)d=k+l,i+=h*d,j+=g*d;else{var m=0,o=0,m=0.5*(d+h),o=0.5*(e+g);this.ws1.worldCOMx*m+this.ws1.worldCOMy*o>this.ws2.worldCOMx*m+this.ws2.worldCOMy*o?(d=k+l,i-=m*d,j-=o*d):(d=k+l,i+=m*d,j+=o*d)}}else this.ws1.fluidEnabled?(h=this.overlap*this.ws1.fluidProperties.density,
i-=d*h,j-=e*h):this.ws2.fluidEnabled&&(d=this.overlap*this.ws2.fluidProperties.density,i+=h*d,j+=g*d);i*=b;j*=b;this.buoyx=i;this.buoyy=j;this.b1.type==f.id_BodyType_DYNAMIC&&(d=this.b1.imass,this.b1.velx-=i*d,this.b1.vely-=j*d,this.b1.angvel-=(j*this.r1x-i*this.r1y)*this.b1.iinertia);this.b2.type==f.id_BodyType_DYNAMIC&&(d=this.b2.imass,this.b2.velx+=i*d,this.b2.vely+=j*d,this.b2.angvel+=(j*this.r2x-i*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&
(!this.ws2.fluidEnabled||0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;i=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),i+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),i+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=i?(j=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=j?1/j:0,i=2*Math.PI*4.0E-4*i,this.agamma=
1/(b*i*(2+i*b)),i=1/(1+this.agamma),this.agamma*=i,this.wMass*=i):this.agamma=this.wMass=0;i=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));j=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));i*i+j*j<t.epsilon*t.epsilon||(d=1/Math.sqrt(i*i+j*j),this.nx=i*d,this.ny=j*d);i=0;if(this.ws1.fluidEnabled)if(j=
-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area,this.ws2.type==f.id_ShapeType_CIRCLE)i-=j*this.ws2.circle.radius*t.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{e=d=0;for(h=this.ws2.polygon.edges.head;null!=h;)g=h.elt,d+=g.length,g=j*g.length*(g.gnormx*this.nx+g.gnormy*this.ny),0<g&&(g=g*=-t.fluidVacuumDrag),e-=0.5*g*t.fluidLinearDrag,h=h.next;i+=e/d}if(this.ws2.fluidEnabled)if(j=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==f.id_ShapeType_CIRCLE)i-=
j*this.ws1.circle.radius*t.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{e=d=0;for(h=this.ws1.polygon.edges.head;null!=h;)g=h.elt,d+=g.length,g=j*g.length*(g.gnormx*this.nx+g.gnormy*this.ny),0<g&&(g=g*=-t.fluidVacuumDrag),e-=0.5*g*t.fluidLinearDrag,h=h.next;i+=e/d}0!=i?(h=this.b1.smass+this.b2.smass,e=d=j=0,j=h,d=0,e=h,0!=this.b1.sinertia&&(h=this.r1x*this.b1.sinertia,g=this.r1y*this.b1.sinertia,j+=g*this.r1y,d+=-g*this.r1x,e+=h*this.r1x),0!=this.b2.sinertia&&(h=this.r2x*this.b2.sinertia,
g=this.r2y*this.b2.sinertia,j+=g*this.r2y,d+=-g*this.r2x,e+=h*this.r2x),h=j*e-d*d,h!=h?(j=d=e=0,3):0==h?(h=0,0!=j?j=1/j:(j=0,h|=1),0!=e?e=1/e:(e=0,h|=2),d=0,h):(h=1/h,g=e*h,e=j*h,j=g,d*=-h,0),this.vMassa=j,this.vMassb=d,this.vMassc=e,i*=2*Math.PI,this.lgamma=1/(b*i*(2+i*b)),i=1/(1+this.lgamma),this.lgamma*=i,this.vMassa*=i,this.vMassb*=i,this.vMassc*=i):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=c;this.dampy*=c;this.adamp*=c},warmStart:function(){var a=this.b1.imass;this.b1.velx-=
this.dampx*a;this.b1.vely-=this.dampy*a;a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*
a-(this.b2.velx+this.b2.kinvelx-this.r2y*b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),e=this.vMassa*c+this.vMassb*d,d=this.vMassb*c+this.vMassc*d,h=this.lgamma,c=e-this.dampx*h,d=d-this.dampy*h;this.dampx+=1*c;this.dampy+=1*d;e=this.b1.imass;this.b1.velx-=c*e;this.b1.vely-=d*e;e=this.b2.imass;this.b2.velx+=c*e;this.b2.vely+=d*e;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-
this.adamp*this.agamma;this.adamp+=a;this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:Ma});var jb=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=
this.k1y=this.k2x=this.k2y=this.surfacex=this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.wrap_normal=null;this.nx=this.ny=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;ma.call(this);this.pre_dt=-1;this.contacts=new fc;this.innards=new $j;this.type=ma.COL;this.colarb=this};g["zpp_nape.dynamics.ZPP_ColArbiter"]=
jb;jb.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"];jb.__super__=ma;jb.prototype=k(ma.prototype,{normal_validate:function(){if(this.cleared)throw"Error: Arbiter not currently in use";this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},getnormal:function(){this.wrap_normal=ra.get(0,0,null);this.wrap_normal.zpp_inner._immutable=!0;
this.wrap_normal.zpp_inner._inuse=!0;this.wrap_normal.zpp_inner._validate=l(this,this.normal_validate)},injectContact:function(a,b,c,d,e,h,f){null==f&&(f=!1);for(var g=null,i=this.contacts.next;null!=i;){var j=i;if(h==j.hash){g=j;break}i=i.next}null==g?(null==fc.zpp_pool?g=new fc:(g=fc.zpp_pool,fc.zpp_pool=g.next,g.next=null),null,i=g.inner,i.jnAcc=i.jtAcc=0,g.hash=h,g.fresh=!0,g.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(g),this.innards.add(i)):g.fresh=!1;g.px=a;g.py=b;this.nx=c;this.ny=
d;g.dist=e;g.stamp=this.stamp;g.posOnly=f;return g},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=fc.zpp_pool;fc.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=
!1;this.__ref_edge1=this.__ref_edge2=null;this.next=jb.zpp_pool;jb.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.next;this.hc2=!1;for(var e=this.contacts.next;null!=e;){var h=e;h.stamp+t.arbiterExpirationDelay<this.stamp?(e=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),h.arbiter=null,h.next=fc.zpp_pool,fc.zpp_pool=h):(b=h.inner,c=h.active,h.active=h.stamp==this.stamp,h.active&&(a?(a=!1,this.c1=b,this.oc1=h):(this.hc2=!0,this.c2=b,this.oc2=
h)),c!=h.active&&(this.contacts.modified=!0),b=e,c=d,d=d.next,e=e.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:this.s1.material.elasticity>=
Math.POSITIVE_INFINITY||this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*
this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=f.id_BodyType_DYNAMIC||this.b2.type!=f.id_BodyType_DYNAMIC?this.continuous?t.contactContinuousStaticBiasCoef:t.contactStaticBiasCoef:this.continuous?t.contactContinuousBiasCoef:t.contactBiasCoef;this.continuous=!1;for(var d=null,e=null,h=this.innards.next,g=this.contacts.next;null!=g;){var i=g;if(i.stamp+t.arbiterExpirationDelay<
this.stamp)g=this.contacts.inlined_erase(d),h=this.innards.inlined_erase(e),i.arbiter=null,i.next=fc.zpp_pool,fc.zpp_pool=i;else{d=i.inner;e=i.active;i.active=i.stamp==this.stamp;if(i.active){a?(a=!1,this.c1=d,this.oc1=i):(this.hc2=!0,this.c2=d,this.oc2=i);d.r2x=i.px-this.b2.posx;d.r2y=i.py-this.b2.posy;d.r1x=i.px-this.b1.posx;d.r1y=i.py-this.b1.posy;var j=c+this.b2.sinertia*Jg.sqr(d.r2x*this.nx+d.r2y*this.ny),j=j+this.b1.sinertia*Jg.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=j<t.epsilon*t.epsilon?
0:1/j;j=c+this.b2.sinertia*Jg.sqr(this.ny*d.r2x-this.nx*d.r2y);j+=this.b1.sinertia*Jg.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=j<t.epsilon*t.epsilon?0:1/j;var k=j=0,l=this.b2.angvel+this.b2.kinangvel,j=this.b2.velx+this.b2.kinvelx-d.r2y*l,k=this.b2.vely+this.b2.kinvely+d.r2x*l,l=this.b1.angvel+this.b1.kinangvel,j=j-(this.b1.velx+this.b1.kinvelx-d.r1y*l),k=k-(this.b1.vely+this.b1.kinvely+d.r1x*l),l=this.nx*j+this.ny*k;i.elasticity=this.restitution;d.bounce=l*i.elasticity;d.bounce>-t.elasticThreshold&&
(d.bounce=0);l=k*this.nx-j*this.ny;j=t.staticFrictionThreshold;d.friction=l*l>j*j?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}e!=i.active&&(this.contacts.modified=!0);d=g;e=h;h=h.next;g=g.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(h=this.c1,this.c1=this.c2,this.c2=h,h=this.oc1,this.oc1=this.oc2,this.oc2=h,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*
this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+
this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*
this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<t.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=
c,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*
this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=
a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,c,d,e;d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);c=(h*this.nx-d*this.ny+this.surfacex)*this.c1.tMass;d=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;
e=a-c;e>d?e=d:e<-d&&(e=-d);c=e-a;this.c1.jtAcc=e;a=-this.ny*c;b=this.nx*c;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(b*this.nx-e*this.ny+
this.surfacex)*this.c2.tMass,d=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,e=a-c,e>d?e=d:e<-d&&(e=-d),c=e-a,this.c2.jtAcc=e,a=-this.ny*c,b=this.nx*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*c*this.b1.iinertia,d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-
(this.b1.vely+this.c1.r1x*this.b1.angvel),e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,a=this.c2.jnAcc,d=d*this.nx+h*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*a),e=e*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*a),b=-(this.kMassa*d+this.kMassb*e),h=-(this.kMassb*d+this.kMassc*e),0<=b&&0<=h?(d=b-c,e=h-a,this.c1.jnAcc=
b,this.c2.jnAcc=h):(b=-this.c1.nMass*d,0<=b&&0<=this.Kb*b+e?(d=b-c,e=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(h=-this.c2.nMass*e,0<=h&&0<=this.Kb*h+d?(d=-c,e=h-a,this.c1.jnAcc=0,this.c2.jnAcc=h):0<=d&&0<=e?(d=-c,e=-a,this.c1.jnAcc=this.c2.jnAcc=0):e=d=0)),c=d+e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*e)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*e)*
this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,d=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=c,this.jrAcc>d?this.jrAcc=d:this.jrAcc<-d&&(this.jrAcc=-d),c=this.jrAcc-a,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*d+this.ny*
h)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,e=a-c,0>e&&(e=0),c=e-a,this.c1.jnAcc=e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,c=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,c=c+
1*this.b2.posy,d=0,e=0,d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,e=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,d=d+1*this.b1.posx,e=e+1*this.b1.posy,h=a=0,a=b-d,h=c-e,f=Math.sqrt(a*a+h*h),g=this.radius-t.collisionSlop,i=f-g;0>a*this.nx+h*this.ny&&(a=-a,h=-h,i-=this.radius);0>i&&(f<t.epsilon?0!=this.b1.smass?this.b1.posx+=10*t.epsilon:this.b2.posx+=10*t.epsilon:(i=1/f,a*=i,h*=i,b=0.5*(d+b),c=0.5*(e+c),d=b-this.b1.posx,e=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=h*d-a*e,b=h*b-a*c,c=this.b2.smass+
b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(f=-this.biasCoef*(f-g)/c,c=g=0,g=a*f,c=h*f,a=this.b1.imass,this.b1.posx-=g*a,this.b1.posy-=c*a,this.b1.delta_rot(-d*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=g*a,this.b2.posy+=c*a,this.b2.delta_rot(b*this.b2.iinertia*f))))}else{var j=i=h=a=0,e=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,h=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,g=this.lproj+(a*this.b1.posx+h*this.b1.posy),i=this.b2.axisy*
this.c1.lr1x-this.b2.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,i+=1*this.b2.posx,j+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,e+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,h=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,g=this.lproj+(a*this.b2.posx+h*this.b2.posy),i=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,
j=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,i+=1*this.b1.posx,j+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,e+=1*this.b1.posy));f=i*a+j*h-g-this.radius;f+=t.collisionSlop;c=0;this.hpc2&&(c=b*a+e*h-g-this.radius,c+=t.collisionSlop);if(0>f||0>c){this.rev&&(a=-a,h=-h);var k=0,l=0,k=i-this.b1.posx,l=j-this.b1.posy,d=g=0,g=i-this.b2.posx,d=j-this.b2.posy,m=0,o=0,j=i=0;if(this.hpc2){m=
b-this.b1.posx;o=e-this.b1.posy;i=b-this.b2.posx;j=e-this.b2.posy;b=h*k-a*l;g=h*g-a*d;e=h*m-a*o;d=h*i-a*j;i=this.b1.smass+this.b2.smass;this.kMassa=i+this.b1.sinertia*b*b+this.b2.sinertia*g*g;this.kMassb=i+this.b1.sinertia*b*e+this.b2.sinertia*g*d;this.kMassc=i+this.b1.sinertia*e*e+this.b2.sinertia*d*d;k=j=i=0;i=this.kMassa;j=this.kMassb;k=this.kMassc;l=f*this.biasCoef;m=c*this.biasCoef;c=f=0;f=-l;c=-m;o=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(o!=o)f=c=0;else if(0==o)f=0!=this.kMassa?f/
this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else var o=1/o,p=o*(this.kMassc*f-this.kMassb*c),c=o*(this.kMassa*c-this.kMassb*f),f=p;0<=f&&0<=c?(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c))):(f=-l/i,c=0,0<=f&&0<=j*f+m?(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,
this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c))):(f=0,c=-m/k,0<=c&&0<=j*c+l&&(i=(f+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*f+e*c)),b=(f+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(g*f+d*c)))))}else b=h*k-a*l,g=h*g-a*d,c=this.b2.smass+g*g*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=c&&(f=-this.biasCoef*f/c,d=c=0,c=a*f,d=h*f,a=this.b1.imass,this.b1.posx-=c*a,
this.b1.posy-=d*a,this.b1.delta_rot(-b*this.b1.iinertia*f),a=this.b2.imass,this.b2.posx+=c*a,this.b2.posy+=d*a,this.b2.delta_rot(g*this.b2.iinertia*f))}}},__class__:jb});var fc=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new $j};g["zpp_nape.dynamics.ZPP_Contact"]=fc;fc.__name__=["zpp_nape","dynamics",
"ZPP_Contact"];fc.prototype={wrapper:function(){null==this.outer&&(fc.internal=!0,this.outer=new Sk,fc.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},
inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:fc};var $j=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};g["zpp_nape.dynamics.ZPP_IContact"]=
$j;$j.__name__=["zpp_nape","dynamics","ZPP_IContact"];$j.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:$j};var ib=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new Pe;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};g["zpp_nape.dynamics.ZPP_InteractionFilter"]=ib;ib.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];ib.prototype={wrapper:function(){if(null==
this.outer){this.outer=new Tk;var a=this.outer.zpp_inner;a.outer=null;a.next=ib.zpp_pool;ib.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=
a;)a.elt.invalidate_filter(),a=a.next},__class__:ib};var Ql=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};g["zpp_nape.dynamics.ZPP_InteractionGroup"]=Ql;Ql.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];Ql.prototype={__class__:Ql};var Pa=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};g["zpp_nape.geom.ZPP_AABB"]=Pa;Pa.__name__=
["zpp_nape","geom","ZPP_AABB"];Pa.get=function(a,b,c,d){var e;null==Pa.zpp_pool?e=new Pa:(e=Pa.zpp_pool,Pa.zpp_pool=e.next,e.next=null);null;e.minx=a;e.miny=b;e.maxx=c;e.maxy=d;return e};Pa.prototype={validate:function(){null!=this._validate&&this._validate()},wrapper:function(){if(null==this.outer){this.outer=new Uk;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=Pa.zpp_pool;Pa.zpp_pool=a;this.outer.zpp_inner=
this}return this.outer},width:function(){return this.maxx-this.minx},height:function(){return this.maxy-this.miny},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>
this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+
" h: "+(this.maxy-this.miny)+" }"},__class__:Pa};var Kg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Vec2"]=Kg;Kg.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];Kg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Jc.zpp_pool?b=new Jc:(b=Jc.zpp_pool,Jc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var c;null==Jc.zpp_pool?c=new Jc:(c=Jc.zpp_pool,Jc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Jc.zpp_pool;Jc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Jc.zpp_pool;Jc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<
a--&&null!=b;)b=b.next;return b},__class__:Kg};var R=function(){};g["zpp_nape.geom.ZPP_Collide"]=R;R.__name__=["zpp_nape","geom","ZPP_Collide"];R.contactCollide=function(a,b,c,d){if(b.type==f.id_ShapeType_POLYGON)if(a.type==f.id_ShapeType_POLYGON){for(var e=!0,h=-1.0E100,g=-1,i=null,j=null,k=a.polygon.edges.head;null!=k;){for(var l=k.elt,m=1.0E100,o=b.polygon.gverts.next;null!=o;){var p=o,p=l.gnormx*p.x+l.gnormy*p.y;p<m&&(m=p);if(m-l.gprojection<=h)break;o=o.next}m-=l.gprojection;if(0<=m){e=!1;break}m>
h&&(h=m,i=l,g=1);k=k.next}if(e){for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=1.0E100;for(o=a.polygon.gverts.next;null!=o;){p=o;p=l.gnormx*p.x+l.gnormy*p.y;p<m&&(m=p);if(m-l.gprojection<=h)break;o=o.next}m-=l.gprojection;if(0<=m){e=!1;break}m>h&&(h=m,j=l,g=2);k=k.next}if(e){1==g?(a=b.polygon,b=i,j=1):(a=a.polygon,b=j,j=-1);i=null;e=1.0E100;for(h=a.edges.head;null!=h;)k=h.elt,l=b.gnormx*k.gnormx+b.gnormy*k.gnormy,l<e&&(e=l,i=k),h=h.next;var h=e=0,e=i.gp0.x,h=i.gp0.y,l=k=0,k=i.gp1.x,l=i.gp1.y,o=m=
0,m=k-e,o=l-h,r=b.gnormy*e-b.gnormx*h,p=b.gnormy*k-b.gnormx*l,s=1/(p-r),r=(-b.tp1-r)*s;r>t.epsilon&&(e+=m*r,h+=o*r);p=(-b.tp0-p)*s;p<-t.epsilon&&(k+=m*p,l+=o*p);o=m=0;o=j;m=b.gnormx*o;o*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==j);c.ptype=c.rev?1:0;p=e*b.gnormx+h*b.gnormy-b.gprojection;j=k*b.gnormx+l*b.gnormy-b.gprojection;if(0<p&&0<j)return!1;d&&(m=-m,o=-o);d=c.injectContact(e-0.5*b.gnormx*p,h-0.5*b.gnormy*p,m,o,p,c.rev?1:0,0<p);e-=1*a.body.posx;
h-=1*a.body.posy;d.inner.lr1x=e*a.body.axisy+h*a.body.axisx;d.inner.lr1y=h*a.body.axisy-e*a.body.axisx;d=c.injectContact(k-0.5*b.gnormx*j,l-0.5*b.gnormy*j,m,o,j,c.rev?0:1,0<j);k-=1*a.body.posx;l-=1*a.body.posy;d.inner.lr1x=k*a.body.axisy+l*a.body.axisx;d.inner.lr1y=l*a.body.axisy-k*a.body.axisx;1==g?(c.__ref_edge1=b,c.__ref_edge2=i):(c.__ref_edge2=b,c.__ref_edge1=i);return!0}}}else{j=-1.0E100;i=!0;e=g=null;h=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=l.gnormx*a.circle.worldCOMx+
l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<m){i=!1;break}m>j&&(j=m,g=l,e=h);h=h.next;k=k.next}if(i){i=e;e=null==e.next?b.polygon.gverts.next:e.next;h=a.circle.worldCOMy*g.gnormx-a.circle.worldCOMx*g.gnormy;if(h<=i.y*g.gnormx-i.x*g.gnormy)return j=a.circle.radius,h=e=0,e=i.x-a.circle.worldCOMx,h=i.y-a.circle.worldCOMy,k=e*e+h*h,k>j*j?j=null:k<t.epsilon*t.epsilon?j=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,m=
0.5+(a.circle.radius-0.5*j)*k,j=d?c.injectContact(a.circle.worldCOMx+e*m,a.circle.worldCOMy+h*m,-e*k,-h*k,l-j,0,null):c.injectContact(a.circle.worldCOMx+e*m,a.circle.worldCOMy+h*m,e*k,h*k,l-j,0,null)),null!=j&&(e=j.inner,c.ptype=2,k=h=0,h=i.x-b.polygon.body.posx,k=i.y-b.polygon.body.posy,c.__ref_edge1=g,c.__ref_vertex=-1,d?(e.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr1y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr2x=h*b.polygon.body.axisy+
k*b.polygon.body.axisx,e.lr2y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=j;if(h>=e.y*g.gnormx-e.x*g.gnormy)return i=a.circle.radius,h=j=0,j=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,k=j*j+h*h,k>i*i?i=null:k<t.epsilon*t.epsilon?i=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-i,0,null):(k=1/Math.sqrt(k),l=k<t.epsilon?1.0E100:1/k,m=0.5+(a.circle.radius-0.5*i)*k,i=d?c.injectContact(a.circle.worldCOMx+
j*m,a.circle.worldCOMy+h*m,-j*k,-h*k,l-i,0,null):c.injectContact(a.circle.worldCOMx+j*m,a.circle.worldCOMy+h*m,j*k,h*k,l-i,0,null)),null!=i&&(j=i.inner,c.ptype=2,k=h=0,h=e.x-b.polygon.body.posx,k=e.y-b.polygon.body.posy,c.__ref_edge1=g,c.__ref_vertex=1,d?(j.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,j.lr2x=a.circle.localCOMx,j.lr2y=a.circle.localCOMy):(j.lr2x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-h*
b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=i;i=b=0;i=a.circle.radius+0.5*j;b=g.gnormx*i;i*=g.gnormy;h=e=0;e=a.circle.worldCOMx-b;h=a.circle.worldCOMy-i;b=d?c.injectContact(e,h,g.gnormx,g.gnormy,j,0,null):c.injectContact(e,h,-g.gnormx,-g.gnormy,j,0,null);c.ptype=d?0:1;c.lnormx=g.lnormx;c.lnormy=g.lnormy;c.rev=!d;c.lproj=g.lprojection;c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=
g;c.__ref_vertex=0;return!0}}else if(g=a.circle.radius+b.circle.radius,j=i=0,i=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-a.circle.worldCOMy,e=i*i+j*j,e>g*g?g=null:e<t.epsilon*t.epsilon?g=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-g,0,null):(e=1/Math.sqrt(e),h=e<t.epsilon?1.0E100:1/e,k=0.5+(a.circle.radius-0.5*g)*e,g=d?c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,-i*e,-j*e,h-g,0,null):c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,i*
e,j*e,h-g,0,null)),null!=g)return g=g.inner,d?(g.lr1x=b.circle.localCOMx,g.lr1y=b.circle.localCOMy,g.lr2x=a.circle.localCOMx,g.lr2y=a.circle.localCOMy):(g.lr1x=a.circle.localCOMx,g.lr1y=a.circle.localCOMy,g.lr2x=b.circle.localCOMx,g.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+b.circle.radius,c.ptype=2,!0;return!1};R.testCollide_safe=function(a,b){if(b.type==f.id_ShapeType_CIRCLE)var c=a,a=b,b=c;return R.testCollide(a,b)};R.testCollide=function(a,b){if(b.type==f.id_ShapeType_POLYGON){if(a.type==
f.id_ShapeType_POLYGON){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var e=d.elt,h=1.0E100,g=b.polygon.gverts.next;null!=g;){var i=g,i=e.gnormx*i.x+e.gnormy*i.y;i<h&&(h=i);g=g.next}h-=e.gprojection;if(0<h){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){e=d.elt;h=1.0E100;for(g=a.polygon.gverts.next;null!=g;)i=g,i=e.gnormx*i.x+e.gnormy*i.y,i<h&&(h=i),g=g.next;h-=e.gprojection;if(0<h){c=!1;break}d=d.next}return c}}else{d=c=null;e=!0;h=-1.0E100;g=b.polygon.gverts.next;for(i=b.polygon.edges.head;null!=
i;){var j=i.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-j.gprojection-a.circle.radius;if(0<k){e=!1;break}k>h&&(h=k,c=j,d=g);g=g.next;i=i.next}if(e){e=d;d=null==d.next?b.polygon.gverts.next:d.next;h=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(h<=e.y*c.gnormx-e.x*c.gnormy)return c=a.circle.radius,h=d=0,d=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,d*d+h*h<=c*c;return h>=d.y*c.gnormx-d.x*c.gnormy?(c=a.circle.radius,h=e=0,e=d.x-a.circle.worldCOMx,h=d.y-a.circle.worldCOMy,
e*e+h*h<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;e=d=0;d=b.circle.worldCOMx-a.circle.worldCOMx;e=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+e*e<=c*c};R.flowCollide=function(a,b,c){if(b.type==f.id_ShapeType_POLYGON){if(a.type==f.id_ShapeType_POLYGON){for(var d=[],e=[],h=!0,g=!0,i=a.polygon.edges.head;null!=i;){for(var j=i.elt,k=1.0E100,l=0,m=b.polygon.gverts.next;null!=m;){var o=m,p=j.gnormx*o.x+j.gnormy*o.y;p<k&&(k=p);p>=j.gprojection+t.epsilon&&(e[l]=!0,g=!1);l++;m=m.next}k-=j.gprojection;
if(0<k){h=!1;break}i=i.next}if(g)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;if(h){for(var g=!0,r=b.polygon.edges.head;null!=r;){for(var s=r.elt,u=1.0E100,w=0,v=a.polygon.gverts.next;null!=v;){var q=v,y=s.gnormx*q.x+s.gnormy*q.y;y<u&&(u=y);y>=s.gprojection+t.epsilon&&(d[w]=!0,g=!1);w++;v=v.next}u-=s.gprojection;if(0<u){h=!1;break}r=r.next}if(g)return a.polygon.validate_worldCOM(),c.overlap=a.polygon.area,c.centroidx=
a.polygon.worldCOMx,c.centroidy=a.polygon.worldCOMy,null,!0;if(h){for(;null!=R.flowpoly.head;){var B=R.flowpoly.pop_unsafe();if(!B._inuse){var D=B;null!=D.outer&&(D.outer.zpp_inner=null,D.outer=null);D._isimmutable=null;D._validate=null;D._invalidate=null;D.next=qa.zpp_pool;qa.zpp_pool=D}}for(var x=null,G=!1,A=a.polygon.gverts.next,F=0,E=b.polygon.gverts.next,C=0,L=0,N=b.polygon.edgeCnt;L<N;){var K=L++;if(e[K])E=E.next;else{C=K;break}}if(null==E){for(var E=b.polygon.gverts.next,G=!0,M=0,O=a.polygon.edgeCnt;M<
O;){var Q=M++;if(d[Q])A=A.next;else{F=Q;break}}null==A?A=a.polygon.gverts.next:(R.flowpoly.add(A),x=R.flowpoly.head.elt)}else R.flowpoly.add(E),x=R.flowpoly.head.elt;var I=1;if(null==R.flowpoly.head){for(var T=!0,S=a.polygon.gverts.next,H=S,J=S.next;null!=J;){for(var W=J,U=2,Y=b.polygon.gverts.next,X=Y,Z=Y.next;null!=Z;){var ca=Z,ba=0;(function(){var a=0,b=0,a=H.x-X.x,b=H.y-X.y,c=0,d=0,c=W.x-H.x,d=W.y-H.y,e=0,h=0,e=ca.x-X.x,h=ca.y-X.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&
e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(ba=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ba<U&&(U=ba,E=Y);Y=Z;X=ca;Z=Z.next}var ja=Z=b.polygon.gverts.next,ea=0;(function(){var a=0,b=0,a=H.x-X.x,b=H.y-X.y,c=0,d=0,c=W.x-H.x,d=W.y-H.y,e=0,h=0,e=ja.x-X.x,h=ja.y-X.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(ea=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ea<U&&(U=ea,E=Y);if(2!=U){var fa=0,oa=0,V=U,fa=H.x+(W.x-
H.x)*V,oa=H.y+(W.y-H.y)*V,x=qa.get(fa,oa,null);R.flowpoly.add(x);G=!0;A=S;T=!1;break}S=J;H=W;J=J.next}if(T){for(var ha=J=a.polygon.gverts.next,z=2,ma=b.polygon.gverts.next,ga=ma,pa=ma.next;null!=pa;){var za=pa,ra=0;(function(){var a=0,b=0,a=H.x-ga.x,b=H.y-ga.y,c=0,d=0,c=ha.x-H.x,d=ha.y-H.y,e=0,h=0,e=za.x-ga.x,h=za.y-ga.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(ra=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&ra<z&&(z=
ra,E=ma);ma=pa;ga=za;pa=pa.next}var Ba=pa=b.polygon.gverts.next,$=0;(function(){var a=0,b=0,a=H.x-ga.x,b=H.y-ga.y,c=0,d=0,c=ha.x-H.x,d=ha.y-H.y,e=0,h=0,e=Ba.x-ga.x,h=Ba.y-ga.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?($=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&$<z&&(z=$,E=ma);if(2!=z){var wa=0,ua=0,Oa=z,wa=H.x+(ha.x-H.x)*Oa,ua=H.y+(ha.y-H.y)*Oa,x=qa.get(wa,ua,null);R.flowpoly.add(x);G=!0;A=S}}I=2}for(;;)if(G)if(A=
A.next,F++,null==A&&(A=a.polygon.gverts.next,F=0),d[F]){var va=R.flowpoly.head.elt,ta=A,la=E,ya=E.next;null==ya&&(ya=b.polygon.gverts.next);var ia=-1,aa=null,Ia=0,Da=0,Ua=ya,na=ya;do{var ab=na,Ea=0;if(function(){var a=0,b=0,a=la.x-va.x,b=la.y-va.y,c=0,d=0,c=ab.x-la.x,d=ab.y-la.y,e=0,h=0,e=ta.x-va.x,h=ta.y-va.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Ea=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ea>=ia)if(aa=E,Ia=C,
++Da==I){ia=Ea;na=Ua;break}else ia=Ea;la=ab;E=na;C++;C>=b.polygon.edgeCnt&&(C=0);na=na.next;null==na&&(na=b.polygon.gverts.next)}while(0);for(;na!=Ua;){var Aa=na,Qa=0;if(function(){var a=0,b=0,a=la.x-va.x,b=la.y-va.y,c=0,d=0,c=Aa.x-la.x,d=Aa.y-la.y,e=0,h=0,e=ta.x-va.x,h=ta.y-va.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Qa=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Qa>=ia)if(aa=E,Ia=C,++Da==I){ia=Qa;na=Ua;break}else ia=
Qa;la=Aa;E=na;C++;C>=b.polygon.edgeCnt&&(C=0);na=na.next;null==na&&(na=b.polygon.gverts.next)}if(null==aa)break;var Ca=aa,Sa=aa.next;null==Sa&&(Sa=b.polygon.gverts.next);var $a=Sa,Fa=0,Wa=0,ka=ia,Fa=Ca.x+($a.x-Ca.x)*ka,Wa=Ca.y+($a.y-Ca.y)*ka;if(null!=x&&sc.vec_dsq(Fa,Wa,x.x,x.y)<t.epsilon)break;R.flowpoly.add(qa.get(Fa,Wa,null));null==x&&(x=R.flowpoly.head.elt);E=aa;C=Ia;G=!G;I=2}else{var Pa=A;if(null!=x&&sc.vec_dsq(Pa.x,Pa.y,x.x,x.y)<t.epsilon)break;R.flowpoly.add(Pa);null==x&&(x=R.flowpoly.head.elt);
I=1}else if(E=E.next,C++,null==E&&(E=b.polygon.gverts.next,C=0),e[C]){var Ja=R.flowpoly.head.elt,sa=E,P=A,bb=A.next;null==bb&&(bb=a.polygon.gverts.next);var Ka=-1,Ra=null,kb=0,nb=0,La=bb,xa=bb;do{var hb=xa,Ga=0;if(function(){var a=0,b=0,a=P.x-Ja.x,b=P.y-Ja.y,c=0,d=0,c=hb.x-P.x,d=hb.y-P.y,e=0,h=0,e=sa.x-Ja.x,h=sa.y-Ja.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Ga=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ga>=Ka)if(Ra=
A,kb=F,++nb==I){Ka=Ga;xa=La;break}else Ka=Ga;P=hb;A=xa;F++;F>=a.polygon.edgeCnt&&(F=0);xa=xa.next;null==xa&&(xa=a.polygon.gverts.next)}while(0);for(;xa!=La;){var fm=xa,Za=0;if(function(){var a=0,b=0,a=P.x-Ja.x,b=P.y-Ja.y,c=0,d=0,c=fm.x-P.x,d=fm.y-P.y,e=0,h=0,e=sa.x-Ja.x,h=sa.y-Ja.y,f=d*e-c*h;f*f>t.epsilon*t.epsilon?(f=1/f,e=(h*a-e*b)*f,e>t.epsilon&&e<1-t.epsilon?(a=(d*a-c*b)*f,a>t.epsilon&&a<1-t.epsilon?(Za=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Za>=Ka)if(Ra=A,kb=F,++nb==I){Ka=Za;xa=La;break}else Ka=
Za;P=fm;A=xa;F++;F>=a.polygon.edgeCnt&&(F=0);xa=xa.next;null==xa&&(xa=a.polygon.gverts.next)}if(null==Ra)break;var cb=Ra,mb=Ra.next;null==mb&&(mb=a.polygon.gverts.next);var xb=mb,lb=0,tb=0,zb=Ka,lb=cb.x+(xb.x-cb.x)*zb,tb=cb.y+(xb.y-cb.y)*zb;if(null!=x&&sc.vec_dsq(lb,tb,x.x,x.y)<t.epsilon)break;R.flowpoly.add(qa.get(lb,tb,null));null==x&&(x=R.flowpoly.head.elt);A=Ra;F=kb;G=!G;I=2}else{var vb=E;if(null!=x&&sc.vec_dsq(vb.x,vb.y,x.x,x.y)<t.epsilon)break;R.flowpoly.add(vb);null==x&&(x=R.flowpoly.head.elt);
I=1}if(null!=R.flowpoly.head&&null!=R.flowpoly.head.next&&null!=R.flowpoly.head.next.next){for(var Va=0,Xa=0,eb=0,Va=eb=Xa=0,$d=R.flowpoly.head,gb=$d.elt,$d=$d.next,rb=$d.elt,$d=$d.next;null!=$d;)var Na=$d.elt,Va=Va+rb.x*(Na.y-gb.y),Gb=Na.y*rb.x-Na.x*rb.y,Xa=Xa+(rb.x+Na.x)*Gb,eb=eb+(rb.y+Na.y)*Gb,gb=rb,rb=Na,$d=$d.next;var $d=R.flowpoly.head,db=$d.elt,Va=Va+rb.x*(db.y-gb.y),Kb=db.y*rb.x-db.x*rb.y,Xa=Xa+(rb.x+db.x)*Kb,eb=eb+(rb.y+db.y)*Kb,gb=rb,rb=db,$d=$d.next,sb=$d.elt,Va=Va+rb.x*(sb.y-gb.y),Qb=
sb.y*rb.x-sb.x*rb.y,Xa=Xa+(rb.x+sb.x)*Qb,eb=eb+(rb.y+sb.y)*Qb,Va=0.5*Va,Sb=1/(6*Va),Xa=Xa*Sb,eb=eb*Sb;c.overlap=-Va;c.centroidx=Xa;c.centroidy=eb;null;return!0}}}return!1}for(var Hb=[],Yb=!0,ib=null,Bb=null,Zb=-1.0E100,$b=!0,Nb=b.polygon.gverts.next,fc=0,Eb=b.polygon.edges.head;null!=Eb;){var ub=Eb.elt,wb=ub.gnormx*a.circle.worldCOMx+ub.gnormy*a.circle.worldCOMy;if(wb>ub.gprojection+a.circle.radius){$b=!1;break}else wb+a.circle.radius>ub.gprojection+t.epsilon&&(Yb=!1,Hb[fc]=!0);wb-=ub.gprojection+
a.circle.radius;wb>Zb&&(Zb=wb,ib=ub,Bb=Nb);Nb=Nb.next;fc++;Eb=Eb.next}if($b){if(Yb)return c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0;var Jb=Bb,Ab;Ab=null==Bb.next?b.polygon.gverts.next:Bb.next;var mc=a.circle.worldCOMy*ib.gnormx-a.circle.worldCOMx*ib.gnormy;if(mc<=Jb.y*ib.gnormx-Jb.x*ib.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=Jb.x-a.circle.worldCOMx,d=Jb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):mc>=Ab.y*ib.gnormx-Ab.x*ib.gnormy?function(){var b=
a.circle.radius,c=0,d=0,c=Ab.x-a.circle.worldCOMx,d=Ab.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):1){for(var Mb=[],dc=0,rc=!0,Ma=null,jb=0,Fb=b.polygon.gverts.next;null!=Fb;){var wc=Fb,Sc=sc.vec_dsq(wc.x,wc.y,a.circle.worldCOMx,a.circle.worldCOMy);(Mb[dc]=Sc<=a.circle.radius*a.circle.radius)?(jb=dc,Ma=Fb):rc=!1;dc++;Fb=Fb.next}if(rc)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=R.flowpoly.head;){var xc=
R.flowpoly.pop_unsafe();if(!xc._inuse){var fb=xc;null!=fb.outer&&(fb.outer.zpp_inner=null,fb.outer=null);fb._isimmutable=null;fb._validate=null;fb._invalidate=null;fb.next=qa.zpp_pool;qa.zpp_pool=fb}}R.flowsegs.clear();var Kc=null,Ta=1;null==Ma?(Ma=b.polygon.gverts.next,Ta=2):R.flowpoly.add(Kc=Ma);for(;0!=Ta;)if(1==Ta)if(Ma=Ma.next,null==Ma&&(Ma=b.polygon.gverts.next),jb++,jb>=b.polygon.edgeCnt&&(jb=0),Mb[jb]){if(sc.vec_dsq(Kc.x,Kc.y,Ma.x,Ma.y)<t.epsilon)break;R.flowpoly.add(Ma)}else{var ob=R.flowpoly.head.elt,
Ub=Ma,Vb=0,Xb=0,Vb=Ub.x-ob.x,Xb=Ub.y-ob.y,ac=0,cc=0,ac=ob.x-a.circle.worldCOMx,cc=ob.y-a.circle.worldCOMy,Ob=Vb*Vb+Xb*Xb,ec=2*(ac*Vb+cc*Xb),Ic=Math.sqrt(ec*ec-4*Ob*(ac*ac+cc*cc-a.circle.radius*a.circle.radius)),Ob=1/(2*Ob),Jc=(-ec-Ic)*Ob,uc=0,vc=0,Pc=Jc<t.epsilon?(-ec+Ic)*Ob:Jc,uc=ob.x+(Ub.x-ob.x)*Pc,vc=ob.y+(Ub.y-ob.y)*Pc;if(sc.vec_dsq(Kc.x,Kc.y,uc,vc)<t.epsilon)break;R.flowpoly.add(qa.get(uc,vc,null));Ta=2}else if(2==Ta){var gc=Ma.next;null==gc&&(gc=b.polygon.gverts.next);var Ha=Ma,Ta=0,yb=gc,Lc=
gc;do{var Ya=Lc,hc=jb+1;hc==b.polygon.edgeCnt&&(hc=0);if(Hb[jb])if(Mb[hc]){var ic=0,jc=0,ic=Ya.x-Ha.x,jc=Ya.y-Ha.y,kc=0,lc=0,kc=Ha.x-a.circle.worldCOMx,lc=Ha.y-a.circle.worldCOMy,Wb=ic*ic+jc*jc,qc=2*(kc*ic+lc*jc),Xc=Math.sqrt(qc*qc-4*Wb*(kc*kc+lc*lc-a.circle.radius*a.circle.radius)),Wb=1/(2*Wb),Zc=(-qc-Xc)*Wb,Oc=0,Rc=0,gd=Zc<t.epsilon?(-qc+Xc)*Wb:Zc,Oc=Ha.x+(Ya.x-Ha.x)*gd,Rc=Ha.y+(Ya.y-Ha.y)*gd;if(sc.vec_dsq(Kc.x,Kc.y,Oc,Rc)<t.epsilon){Ta=0;Lc=yb;break}var hd=qa.get(Oc,Rc,null);R.flowsegs.add(R.flowpoly.head.elt);
R.flowsegs.add(hd);R.flowpoly.add(hd);Ta=1;Lc=yb;break}else{var yc=0,zc=0,Tc,Ac=0,Cc=0,Ac=Ya.x-Ha.x,Cc=Ya.y-Ha.y,Dc=0,Ec=0,Dc=Ha.x-a.circle.worldCOMx,Ec=Ha.y-a.circle.worldCOMy,bc=Ac*Ac+Cc*Cc,tc=2*(Dc*Ac+Ec*Cc),Pb=tc*tc-4*bc*(Dc*Dc+Ec*Ec-a.circle.radius*a.circle.radius);Pb*Pb<t.epsilon?(yc=0>Pb?10:zc=-tc/(2*bc),Tc=!1):(Pb=Math.sqrt(Pb),bc=1/(2*bc),yc=(-tc-Pb)*bc,zc=(-tc+Pb)*bc,Tc=!0);if(yc<1-t.epsilon&&zc>t.epsilon){var dd=0,ed=0,td=yc,dd=Ha.x+(Ya.x-Ha.x)*td,ed=Ha.y+(Ya.y-Ha.y)*td;if(null!=Kc&&sc.vec_dsq(Kc.x,
Kc.y,dd,ed)<t.epsilon){Ta=0;Lc=yb;break}var wd=qa.get(dd,ed,null);null!=R.flowpoly.head&&(R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(wd));R.flowpoly.add(wd);null==Kc&&(Kc=R.flowpoly.head.elt);if(Tc){var xd=0,yd=0,zd=zc,xd=Ha.x+(Ya.x-Ha.x)*zd,yd=Ha.y+(Ya.y-Ha.y)*zd;R.flowpoly.add(qa.get(xd,yd,null))}}}Ha=Ya;Ma=Lc;jb=hc;Lc=Lc.next;null==Lc&&(Lc=b.polygon.gverts.next)}while(0);for(;Lc!=yb;){var pb=Lc,Vc=jb+1;Vc==b.polygon.edgeCnt&&(Vc=0);if(Hb[jb])if(Mb[Vc]){var Wc=0,Yc=0,Wc=pb.x-Ha.x,Yc=pb.y-
Ha.y,ad=0,cd=0,ad=Ha.x-a.circle.worldCOMx,cd=Ha.y-a.circle.worldCOMy,Qc=Wc*Wc+Yc*Yc,fd=2*(ad*Wc+cd*Yc),Kd=Math.sqrt(fd*fd-4*Qc*(ad*ad+cd*cd-a.circle.radius*a.circle.radius)),Qc=1/(2*Qc),Ld=(-fd-Kd)*Qc,ud=0,vd=0,Md=Ld<t.epsilon?(-fd+Kd)*Qc:Ld,ud=Ha.x+(pb.x-Ha.x)*Md,vd=Ha.y+(pb.y-Ha.y)*Md;if(sc.vec_dsq(Kc.x,Kc.y,ud,vd)<t.epsilon){Ta=0;Lc=yb;break}var Nd=qa.get(ud,vd,null);R.flowsegs.add(R.flowpoly.head.elt);R.flowsegs.add(Nd);R.flowpoly.add(Nd);Ta=1;Lc=yb;break}else{var id=0,jd=0,Ad,kd=0,ld=0,kd=pb.x-
Ha.x,ld=pb.y-Ha.y,md=0,nd=0,md=Ha.x-a.circle.worldCOMx,nd=Ha.y-a.circle.worldCOMy,Bc=kd*kd+ld*ld,Uc=2*(md*kd+nd*ld),nc=Uc*Uc-4*Bc*(md*md+nd*nd-a.circle.radius*a.circle.radius);nc*nc<t.epsilon?(id=0>nc?10:jd=-Uc/(2*Bc),Ad=!1):(nc=Math.sqrt(nc),Bc=1/(2*Bc),id=(-Uc-nc)*Bc,jd=(-Uc+nc)*Bc,Ad=!0);if(id<1-t.epsilon&&jd>t.epsilon){var Cd=0,Dd=0,Qd=id,Cd=Ha.x+(pb.x-Ha.x)*Qd,Dd=Ha.y+(pb.y-Ha.y)*Qd;if(null!=Kc&&sc.vec_dsq(Kc.x,Kc.y,Cd,Dd)<t.epsilon){Ta=0;Lc=yb;break}var Rd=qa.get(Cd,Dd,null);null!=R.flowpoly.head&&
(R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(Rd));R.flowpoly.add(Rd);null==Kc&&(Kc=R.flowpoly.head.elt);if(Ad){var Sd=0,Ud=0,Vd=jd,Sd=Ha.x+(pb.x-Ha.x)*Vd,Ud=Ha.y+(pb.y-Ha.y)*Vd;R.flowpoly.add(qa.get(Sd,Ud,null))}}}Ha=pb;Ma=Lc;jb=Vc;Lc=Lc.next;null==Lc&&(Lc=b.polygon.gverts.next)}}if(null==R.flowpoly.head)return!1;if(null==R.flowpoly.head.next){for(var Xd=!0,od=b.polygon.edges.head;null!=od;){var Ed=od.elt;if(Ed.gnormx*a.circle.worldCOMx+Ed.gnormy*a.circle.worldCOMy>Ed.gprojection){Xd=!1;break}od=
od.next}return Xd?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0):!1}var oc=0,pc=0,Fc=0;if(null!=R.flowpoly.head.next.next){for(var qb=0,Cb=0,Db=0,qb=Db=Cb=0,ae=R.flowpoly.head,$c=ae.elt,ae=ae.next,Mc=ae.elt,ae=ae.next;null!=ae;)var Gc=ae.elt,qb=qb+Mc.x*(Gc.y-$c.y),Yd=Gc.y*Mc.x-Gc.x*Mc.y,Cb=Cb+(Mc.x+Gc.x)*Yd,Db=Db+(Mc.y+Gc.y)*Yd,$c=Mc,Mc=Gc,ae=ae.next;var ae=R.flowpoly.head,Hc=ae.elt,qb=qb+Mc.x*(Hc.y-$c.y),Zd=Hc.y*Mc.x-Hc.x*Mc.y,Cb=Cb+(Mc.x+Hc.x)*Zd,
Db=Db+(Mc.y+Hc.y)*Zd,$c=Mc,Mc=Hc,ae=ae.next,bd=ae.elt,qb=qb+Mc.x*(bd.y-$c.y),be=bd.y*Mc.x-bd.x*Mc.y,Cb=Cb+(Mc.x+bd.x)*be,Db=Db+(Mc.y+bd.y)*be,qb=0.5*qb,ce=1/(6*qb),Cb=Cb*ce,Db=Db*ce,de=-qb,oc=oc+Cb*de,pc=pc+Db*de,Fc=Fc-qb}else R.flowsegs.add(R.flowpoly.head.elt),R.flowsegs.add(R.flowpoly.head.next.elt);for(;null!=R.flowsegs.head;)var rd=R.flowsegs.pop_unsafe(),sd=R.flowsegs.pop_unsafe(),ee=0,fe=0,ee=sd.x-rd.x,fe=sd.y-rd.y,Rb=0,Tb=0,Rb=ee,Tb=fe,he=1/Math.sqrt(Rb*Rb+Tb*Tb),Rb=Rb*he,Tb=Tb*he,te=Rb,Rb=
-Tb,Tb=te,Ib=0,Lb=0,Ib=rd.x+sd.x,Lb=rd.y+sd.y,Ib=0.5*Ib,Lb=0.5*Lb,Ib=Ib-1*a.circle.worldCOMx,Lb=Lb-1*a.circle.worldCOMy,Td=0,le=0,me=Rb*Ib+Tb*Lb,Gd=me/a.circle.radius,pd=Math.sqrt(1-Gd*Gd),ne=Math.acos(Gd),Td=a.circle.radius*(a.circle.radius*ne-me*pd),le=0.6666666666666666*a.circle.radius*pd*pd*pd/(ne-Gd*pd),Ib=a.circle.worldCOMx,Lb=a.circle.worldCOMy,oe=le,Ib=Ib+Rb*oe,Lb=Lb+Tb*oe,pe=Td,oc=oc+Ib*pe,pc=pc+Lb*pe,Fc=Fc+Td;var qe=1/Fc,oc=oc*qe,pc=pc*qe;c.overlap=Fc;c.centroidx=oc;c.centroidy=pc;null;
return!0}}return!1}var Nc=a.circle,qd=b.circle,Hd=0,Id=0,Hd=qd.worldCOMx-Nc.worldCOMx,Id=qd.worldCOMy-Nc.worldCOMy,re=Nc.radius+qd.radius,ge=Hd*Hd+Id*Id;if(ge>re*re)return!1;if(ge<t.epsilon*t.epsilon)Nc.radius<qd.radius?(c.overlap=Nc.area,c.centroidx=Nc.worldCOMx,c.centroidy=Nc.worldCOMy):(c.overlap=qd.area,c.centroidx=qd.worldCOMx,c.centroidy=qd.worldCOMy);else{var Jd=Math.sqrt(ge),se=1/Jd,Od=0.5*(Jd-(qd.radius*qd.radius-Nc.radius*Nc.radius)*se);if(Od<=-Nc.radius)c.overlap=Nc.area,c.centroidx=Nc.worldCOMx,
c.centroidy=Nc.worldCOMy;else{var ie=Jd-Od;if(ie<=-qd.radius)c.overlap=qd.area,c.centroidx=qd.worldCOMx,c.centroidy=qd.worldCOMy;else{var je=0,ue=0,ke=0,ve=0,Pd=Od/Nc.radius,Bd=Math.sqrt(1-Pd*Pd),we=Math.acos(Pd),je=Nc.radius*(Nc.radius*we-Od*Bd),ue=0.6666666666666666*Nc.radius*Bd*Bd*Bd/(we-Pd*Bd),Wd=ie/qd.radius,Fd=Math.sqrt(1-Wd*Wd),xe=Math.acos(Wd),ke=qd.radius*(qd.radius*xe-ie*Fd),ve=0.6666666666666666*qd.radius*Fd*Fd*Fd/(xe-Wd*Fd),ye=je+ke,ze=(ue*je+(Jd-ve)*ke)/ye*se;c.overlap=ye;c.centroidx=
Nc.worldCOMx+Hd*ze;c.centroidy=Nc.worldCOMy+Id*ze}}}null;return!0};var Rl=function(){this.toiDistance=0;this.inner=!1;this.shape=null};g["zpp_nape.geom.ZPP_ConvexRayResult"]=Rl;Rl.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];Rl.prototype={__class__:Rl};var Sl=function(){this.next=null;this.x=this.y=0};g["zpp_nape.geom.ZPP_GeomVert"]=Sl;Sl.__name__=["zpp_nape","geom","ZPP_GeomVert"];Sl.prototype={__class__:Sl};var Tl=function(){this.outer=this.vertices=null};g["zpp_nape.geom.ZPP_GeomPoly"]=Tl;
Tl.__name__=["zpp_nape","geom","ZPP_GeomPoly"];Tl.prototype={__class__:Tl};var Ul=function(){this.a=this.b=this.c=this.d=this.tx=this.ty=0};g["zpp_nape.geom.ZPP_Mat23"]=Ul;Ul.__name__=["zpp_nape","geom","ZPP_Mat23"];Ul.prototype={__class__:Ul};var Vl=function(){this.x=null;this.m=this.n=0};g["zpp_nape.geom.ZPP_MatMN"]=Vl;Vl.__name__=["zpp_nape","geom","ZPP_MatMN"];Vl.prototype={__class__:Vl};var Eb=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=
!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new qa;this.c2=new qa;this.axis=new qa};g["zpp_nape.geom.ZPP_ToiEvent"]=Eb;Eb.__name__=["zpp_nape","geom","ZPP_ToiEvent"];Eb.prototype={__class__:Eb};var ad=function(){};g["zpp_nape.geom.ZPP_SweepDistance"]=ad;ad.__name__=["zpp_nape","geom","ZPP_SweepDistance"];ad.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var h=a.s1,f=a.s2,g=h.body,i=f.body,j=0,k=0,j=i.velx-g.velx,k=i.vely-g.vely,l=g.angvel;0>l&&(l=-l);var m=i.angvel;0>
m&&(m=-m);var o=h.sweepCoef*l+f.sweepCoef*m;if(!e&&!a.kinematic&&j*j+k*k<t.dynamicSweepLinearThreshold*t.dynamicSweepLinearThreshold&&o<t.dynamicSweepAngularThreshold)a.toi=-1,a.failed=!0;else{for(var p=a.c1,l=a.c2,m=a.axis,r=0;;){g.sweepIntegrate(c*b);g.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(f);var s=ad.distance(h,f,p,l,m,null)+d,u=j*m.x+k*m.y;if(s<t.distanceThresholdCCD){if(e)break;var w=0,v=0,w=p.x-g.posx,v=p.y-g.posy,x=0,q=0,x=l.x-i.posx,q=l.y-i.posy,w=u-g.sweep_angvel*(m.y*w-
m.x*v)+i.sweep_angvel*(m.y*x-m.x*q);0<w&&(a.slipped=!0);if(0>=w||s<0.5*t.distanceThresholdCCD)break}u=(o-u)*b;if(0>=u){c=-1;break}u=s/u;1.0E-6>u&&(u=1.0E-6);c+=u;if(1<=c){c=1;g.sweepIntegrate(c*b);g.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(f);b=ad.distance(h,f,p,l,m,null)+d;j=j*m.x+k*m.y;if(b<t.distanceThresholdCCD){if(e)break;k=e=0;e=p.x-g.posx;k=p.y-g.posy;d=p=0;p=l.x-i.posx;d=l.y-i.posy;g=j-g.sweep_angvel*(m.y*e-m.x*k)+i.sweep_angvel*(m.y*p-m.x*d);0<g&&(a.slipped=!0);if(0>=g||b<0.5*
t.distanceThresholdCCD)break}c=-1;break}if(40<=++r){s>d&&(a.failed=!0);break}}a.toi=c}};ad.staticSweep=function(a,b,c,d){var e=a.s1,h=a.s2,f=e.body,g=0,i=0,g=-f.velx,i=-f.vely,j=f.sweep_angvel;0>j&&(j=-j);for(var k=e.sweepCoef*j,j=a.c1,l=a.c2,m=a.axis,o=0;;){f.sweepIntegrate(c*b);f.sweepValidate(e);var p=ad.distance(e,h,j,l,m,null)+d,r=g*m.x+i*m.y;if(p<t.distanceThresholdCCD){var s=0,u=0,s=j.x-f.posx,u=j.y-f.posy,s=r-f.sweep_angvel*(m.y*s-m.x*u);0<s&&(a.slipped=!0);if(0>=s||p<0.5*t.distanceThresholdCCD)break}r=
(k-r)*b;if(0>=r){c=-1;break}r=p/r;1.0E-6>r&&(r=1.0E-6);c+=r;if(1<=c){c=1;f.sweepIntegrate(c*b);f.sweepValidate(e);b=ad.distance(e,h,j,l,m,null)+d;g=g*m.x+i*m.y;if(b<t.distanceThresholdCCD&&(d=i=0,i=j.x-f.posx,d=j.y-f.posy,f=g-f.sweep_angvel*(m.y*i-m.x*d),0<f&&(a.slipped=!0),0>=f||b<0.5*t.distanceThresholdCCD))break;c=-1;break}if(40<=++o){p>d&&(a.failed=!0);break}}a.toi=c};ad.distance=function(a,b,c,d,e,h){null==h&&(h=1.0E100);if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_CIRCLE){var g=
a.circle,i=b.circle,j,k=0,l=0,k=i.worldCOMx-g.worldCOMx,l=i.worldCOMy-g.worldCOMy,m=Math.sqrt(k*k+l*l);j=m-(g.radius+i.radius);if(j<h){if(0==m)k=1,l=0;else var o=1/m,k=k*o,l=l*o;var p=g.radius;c.x=g.worldCOMx+k*p;c.y=g.worldCOMy+l*p;var r=-i.radius;d.x=i.worldCOMx+k*r;d.y=i.worldCOMy+l*r;e.x=k;e.y=l}return j}var s=!1;if(a.type==f.id_ShapeType_CIRCLE&&b.type==f.id_ShapeType_POLYGON)var u=a,a=b,b=u,w=c,c=d,d=w,s=!0;if(a.type==f.id_ShapeType_POLYGON&&b.type==f.id_ShapeType_CIRCLE){for(var v=b.circle,
x=-1.0E100,q=null,y=a.polygon.edges.head;null!=y;){var A=y.elt,B=A.gnormx*v.worldCOMx+A.gnormy*v.worldCOMy-A.gprojection-v.radius;if(B>h){x=B;break}0<B?B>x&&(x=B,q=A):0>x&&B>x&&(x=B,q=A);y=y.next}if(x<h){var D=q.gp0,E=q.gp1,G=v.worldCOMy*q.gnormx-v.worldCOMx*q.gnormy;if(G<=D.y*q.gnormx-D.x*q.gnormy){var F=0,C=0,F=v.worldCOMx-D.x,C=v.worldCOMy-D.y,H=Math.sqrt(F*F+C*C),x=H-v.radius;if(x<h){if(0==H)F=1,C=0;else var L=1/H,F=F*L,C=C*L;c.x=D.x+0*F;c.y=D.y+0*C;var N=-v.radius;d.x=v.worldCOMx+F*N;d.y=v.worldCOMy+
C*N;e.x=F;e.y=C}}else if(G>=E.y*q.gnormx-E.x*q.gnormy){var I=0,K=0,I=v.worldCOMx-E.x,K=v.worldCOMy-E.y,M=Math.sqrt(I*I+K*K),x=M-v.radius;if(x<h){if(0==M)I=1,K=0;else var O=1/M,I=I*O,K=K*O;c.x=E.x+0*I;c.y=E.y+0*K;var R=-v.radius;d.x=v.worldCOMx+I*R;d.y=v.worldCOMy+K*R;e.x=I;e.y=K}}else{var S=-v.radius;d.x=v.worldCOMx+q.gnormx*S;d.y=v.worldCOMy+q.gnormy*S;var Q=-x;c.x=d.x+q.gnormx*Q;c.y=d.y+q.gnormy*Q;e.x=q.gnormx;e.y=q.gnormy}}s&&(e.x=-e.x,e.y=-e.y);return x}for(var T=a.polygon,W=b.polygon,J=-1.0E100,
U=null,X=null,Y=0,Z=T.edges.head;null!=Z;){for(var ca=Z.elt,ba=1.0E100,ga=W.gverts.next;null!=ga;){var ea=ga,ja=ca.gnormx*ea.x+ca.gnormy*ea.y;ja<ba&&(ba=ja);ga=ga.next}ba-=ca.gprojection;if(ba>h){J=ba;break}0<ba?ba>J&&(J=ba,U=ca,Y=1):0>J&&ba>J&&(J=ba,U=ca,Y=1);Z=Z.next}if(J<h){for(var ha=W.edges.head;null!=ha;){for(var fa=ha.elt,z=1.0E100,oa=T.gverts.next;null!=oa;){var ma=oa,pa=fa.gnormx*ma.x+fa.gnormy*ma.y;pa<z&&(z=pa);oa=oa.next}z-=fa.gprojection;if(z>h){J=z;break}0<z?z>J&&(J=z,X=fa,Y=2):0>J&&
z>J&&(J=z,X=fa,Y=2);ha=ha.next}if(J<h){var na,V;if(1==Y)na=W,V=U;else{na=T;V=X;var za=c,c=d,d=za,s=!s}for(var la=null,va=1.0E100,ra=na.edges.head;null!=ra;){var xa=ra.elt,Ba=V.gnormx*xa.gnormx+V.gnormy*xa.gnormy;Ba<va&&(va=Ba,la=xa);ra=ra.next}s?(e.x=-V.gnormx,e.y=-V.gnormy):(e.x=V.gnormx,e.y=V.gnormy);if(0<=J){var $=V.gp0,qa=V.gp1,ia=la.gp0,wa=la.gp1,aa=0,ta=0,ua=0,ya=0,aa=qa.x-$.x,ta=qa.y-$.y,ua=wa.x-ia.x,ya=wa.y-ia.y,Oa=1/(aa*aa+ta*ta),Ja=1/(ua*ua+ya*ya),Ma=-(aa*($.x-ia.x)+ta*($.y-ia.y))*Oa,Ia=
-(aa*($.x-wa.x)+ta*($.y-wa.y))*Oa,Ea=-(ua*(ia.x-$.x)+ya*(ia.y-$.y))*Ja,Ua=-(ua*(ia.x-qa.x)+ya*(ia.y-qa.y))*Ja;0>Ma?Ma=0:1<Ma&&(Ma=1);0>Ia?Ia=0:1<Ia&&(Ia=1);0>Ea?Ea=0:1<Ea&&(Ea=1);0>Ua?Ua=0:1<Ua&&(Ua=1);var Va=0,Ka=0,Qa=Ma,Va=$.x+aa*Qa,Ka=$.y+ta*Qa,Ca=0,Da=0,ab=Ia,Ca=$.x+aa*ab,Da=$.y+ta*ab,Aa=0,Xa=0,P=Ea,Aa=ia.x+ua*P,Xa=ia.y+ya*P,eb=0,Ra=0,Sa=Ua,eb=ia.x+ua*Sa,Ra=ia.y+ya*Sa,Fa=sc.vec_dsq(Va,Ka,ia.x,ia.y),Wa=sc.vec_dsq(Ca,Da,wa.x,wa.y),sa=sc.vec_dsq(Aa,Xa,$.x,$.y),bb=sc.vec_dsq(eb,Ra,qa.x,qa.y),Ta=0,
$a=0,Pa=null;Fa<Wa?(Ta=Va,$a=Ka,Pa=ia):(Ta=Ca,$a=Da,Pa=wa,Fa=Wa);var jb=0,ka=0,Ya=null;sa<bb?(jb=Aa,ka=Xa,Ya=$):(jb=eb,ka=Ra,Ya=qa,sa=bb);Fa<sa?(c.x=Ta,c.y=$a,d.x=Pa.x,d.y=Pa.y,J=Math.sqrt(Fa)):(d.x=jb,d.y=ka,c.x=Ya.x,c.y=Ya.y,J=Math.sqrt(sa));if(0!=J){e.x=d.x-c.x;e.y=d.y-c.y;var kb=1/J;e.x*=kb;e.y*=kb;s&&(e.x=-e.x,e.y=-e.y)}return J}var Ga=0,Na=0,Ga=la.gp0.x,Na=la.gp0.y,La=0,Za=0,La=la.gp1.x,Za=la.gp1.y,cb=0,db=0,cb=La-Ga,db=Za-Na,nb=V.gnormy*Ga-V.gnormx*Na,hb=V.gnormy*La-V.gnormx*Za,ib=1/(hb-nb),
rb=(-V.tp1-nb)*ib;rb>t.epsilon&&(Ga+=cb*rb,Na+=db*rb);var gb=(-V.tp0-hb)*ib;gb<-t.epsilon&&(La+=cb*gb,Za+=db*gb);var fb=Ga*V.gnormx+Na*V.gnormy-V.gprojection,mb=La*V.gnormx+Za*V.gnormy-V.gprojection;if(fb<mb){d.x=Ga;d.y=Na;var ob=-fb;c.x=d.x+V.gnormx*ob;c.y=d.y+V.gnormy*ob;return fb}d.x=La;d.y=Za;var pb=-mb;c.x=d.x+V.gnormx*pb;c.y=d.y+V.gnormy*pb;return mb}}return h};var qa=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=
this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};g["zpp_nape.geom.ZPP_Vec2"]=qa;qa.__name__=["zpp_nape","geom","ZPP_Vec2"];qa.get=function(a,b,c){null==c&&(c=!1);var d;null==qa.zpp_pool?d=new qa:(d=qa.zpp_pool,qa.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=c;d.x=a;d.y=b;return d};qa.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=
new ra;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=qa.zpp_pool;qa.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=
b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=
this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:qa};var Wl=function(){this._validate=null;this.x=this.y=this.z=0};g["zpp_nape.geom.ZPP_Vec3"]=Wl;Wl.__name__=["zpp_nape","geom","ZPP_Vec3"];Wl.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:Wl};var sc=function(){};g["zpp_nape.geom.ZPP_VecMath"]=sc;sc.__name__=["zpp_nape","geom","ZPP_VecMath"];sc.vec_dsq=function(a,b,c,d){var e=0,h=0,e=a-c,h=b-d;return e*
e+h*h};var ia=function(){this.userData=this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=null;this.id=Nb.Interactor();this.cbsets=new hl;this.cbTypes=new Db};g["zpp_nape.phys.ZPP_Interactor"]=ia;ia.__name__=["zpp_nape","phys","ZPP_Interactor"];ia.get=function(a,b){var c;c=a.id<b.id?a.id:b.id;var d;d=a.id<b.id?b.id:a.id;for(var e=null,h=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=h;){var f=h.elt;if(f.id==
c&&f.di==d){e=f;break}h=h.next}return e};ia.int_callback=function(a,b,c){var d=a.int1,a=a.int2;b.options1.compatible(d.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=d,c.int2=a):(c.int1=a,c.int2=d)};ia.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=
a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=ld.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=l(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=
l(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;
b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=
a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=ya.zpp_pool,ya.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=
this.ibody?null:null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:ia};var Td=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=
!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.forcex=this.forcey=this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_vel=null;this.velx=this.vely=
0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;ia.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=
this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=Pa.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=l(this,this.aabb_validate);this.massMode=f.id_MassMode_DEFAULT;this.gravMassMode=f.id_GravMassMode_DEFAULT;this.gravMassScale=
1;this.inertiaMode=f.id_InertiaMode_DEFAULT;this.arbiters=new Lg;this.constraints=new Be;this.shapes=new Pe;this.wrap_shapes=Fd.get(this.shapes);this.wrap_shapes.zpp_inner.adder=l(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=l(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=l(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};g["zpp_nape.phys.ZPP_Body"]=Td;Td.__name__=["zpp_nape","phys","ZPP_Body"];Td.__static=function(){null==f.BodyType_STATIC&&(f.internal=!0,
f.BodyType_STATIC=new Bb,f.internal=!1);var a=new og(f.BodyType_STATIC),b=a.zpp_inner;b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};Td.__super__=ia;Td.prototype=k(ia.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},
atRest:function(a){if(this.type!=f.id_BodyType_DYNAMIC)return this.component.sleeping;var b=t.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(sc.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=t.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);
return this.component.waket+t.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==f.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+
a.localCOMy*this.axisy);else{for(var a=a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var d=c,e=b,b=b.next;d.x=this.posx+(this.axisy*e.x-this.axisx*e.y);d.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var e=d,h=c.elt,c=c.next;h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy;h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy;h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection;h.tp0=b.y*h.gnormx-b.x*h.gnormy;h.tp1=e.y*h.gnormx-
e.x*h.gnormy;b=e;d=d.next}a=a.gverts.next;c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},
pos_invalidate:function(a){this.immutable_midstep("Body::position");this.posx==a.x&&this.posy==a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){this.wrap_pos=ra.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=
!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=l(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=l(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=ra.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=l(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=l(this,this.vel_validate))},invalidate_rot:function(){this.zip_axis=
!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==f.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,c=1-0.5*b,b=1-b*b/8,d=(c*this.axisx+a*this.axisy)*
b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=d}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==f.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/
this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=f.id_GravMassMode_FIXED&&(this.zip_gravMass=!0);this.gravMassMode!=f.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==f.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==f.id_GravMassMode_SCALED&&(this.validate_mass(),
this.gravMass=this.cmass*this.gravMassScale))},invalidate_gravMassScale:function(){this.gravMassMode!=f.id_GravMassMode_SCALED?this.zip_gravMassScale=!0:this.invalidate_gravMass()},validate_gravMassScale:function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,this.gravMassMode==f.id_GravMassMode_DEFAULT?this.gravMassScale=1:this.gravMassMode==f.id_GravMassMode_FIXED&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},
validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==f.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==f.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=
!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==f.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=
!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var e=d.elt;e.zip_localCOM&&(e.zip_localCOM=!1,e.type==f.id_ShapeType_POLYGON&&e.polygon.__validate_localCOM(),null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy));e.validate_area_inertia();var h=e.area*e.material.density,a=a+e.localCOMx*h,b=b+e.localCOMy*h,c=c+e.area*e.material.density,d=d.next}0!=c&&(d=1/c,this.localCOMx=a*d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=
this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==f.id_MassMode_DEFAULT&&(this.zip_mass=!1,this.cmass=c,this.type==f.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=
this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,
null),a.zpp_inner.type==f.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==Ic.zpp_pool?this.component=new Ic:(this.component=Ic.zpp_pool,Ic.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=
!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=Ic.zpp_pool;Ic.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Td});var il=function(){this.compound=
this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};g["zpp_nape.phys.ZPP_Compound"]=il;il.__name__=["zpp_nape","phys","ZPP_Compound"];il.__super__=ia;il.prototype=k(ia.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:il});var Wd=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.next=this.outer=
this.shapes=null;this.shapes=new Pe;this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityy=this.gravityx=0};g["zpp_nape.phys.ZPP_FluidProperties"]=Wd;Wd.__name__=["zpp_nape","phys","ZPP_FluidProperties"];Wd.prototype={wrapper:function(){if(null==this.outer){this.outer=new Te;var a=this.outer.zpp_inner;a.outer=null;a.next=Wd.zpp_pool;Wd.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_fluidprops(),a=a.next},
__class__:Wd};var oe=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=
this.area=0;this.outer=this.body=null;ia.call(this);this.pairs=new jl;this.ishape=this;this.type=a;this.aabb=Pa.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=l(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new ga;this.sweepRadius=this.sweepCoef=0};g["zpp_nape.shape.ZPP_Shape"]=
oe;oe.__name__=["zpp_nape","shape","ZPP_Shape"];oe.__super__=ia;oe.prototype=k(ia.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||
this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=
this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},
invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==f.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&ga.WAKE)&&this.wake();0!=(a&ga.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&ga.PROPS)&&null!=
this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&ga.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){this.fluidEnabled&&this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==f.id_ShapeType_CIRCLE?this.circle.__validate_aabb():this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=
a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},setFluid:function(a){this.fluidProperties!=a&&(null!=
this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.fluidEnabled&&this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=
this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},__class__:oe});var Ui=function(){this.radius=0;this.outer_zn=null;oe.call(this,f.id_ShapeType_CIRCLE);this.circle=this;this.zip_localCOM=!1};g["zpp_nape.shape.ZPP_Circle"]=Ui;Ui.__name__=["zpp_nape","shape","ZPP_Circle"];Ui.__super__=oe;Ui.prototype=
k(oe.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(a){this.localCOMx=a.x;this.localCOMy=a.y;this.invalidate_localCOM();null!=this.body&&this.body.wake()},setupLocalCOM:function(){this.wrap_localCOM=ra.get(this.localCOMx,
this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=l(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=l(this,this.localCOM_invalidate)},__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=
this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*
this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;
this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;this.angDrag=(a+2*b)*this.material.dynamicFriction*t.fluidAngularDragFriction+0.5*t.fluidAngularDrag*(1+t.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__rotate:function(a,b){if(0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy){var c=0,d=0,c=b*this.localCOMx-a*this.localCOMy,
d=this.localCOMx*a+this.localCOMy*b;this.localCOMx=c;this.localCOMy=d;this.invalidate_localCOM()}},__class__:Ui});var sa=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=this.gprojection=0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};g["zpp_nape.shape.ZPP_Edge"]=sa;
sa.__name__=["zpp_nape","shape","ZPP_Edge"];sa.prototype={wrapper:function(){null==this.outer&&(sa.internal=!0,this.outer=new Zk,sa.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:sa};var Wi=function(){this.reverse_flag=this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;oe.call(this,f.id_ShapeType_POLYGON);this.polygon=
this;this.lverts=new qa;this.gverts=new qa;this.edges=new kl;this.edgeCnt=0};g["zpp_nape.shape.ZPP_Polygon"]=Wi;Wi.__name__=["zpp_nape","shape","ZPP_Polygon"];Wi.__super__=oe;Wi.prototype=k(oe.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=l(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:
b.next,c=null==c?this.edges.head:c.next;d=d.next}a=qa.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==sa.zpp_pool?c=new sa:(c=sa.zpp_pool,sa.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),null==sa.zpp_pool?c=new sa:(c=sa.zpp_pool,sa.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==sa.zpp_pool?b=new sa:(b=sa.zpp_pool,sa.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,
b),this.edgeCnt++));a._validate=l(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=Ff.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=l(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=l(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=l(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=
l(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=
!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,
a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=qa.zpp_pool;qa.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=sa.zpp_pool,sa.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=sa.zpp_pool,sa.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=sa.zpp_pool,sa.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,
this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next;sc.vec_dsq(c.x,c.y,d.x,d.y)<t.epsilon*t.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,e=b,d=c,h=null==c.next?this.lverts.next:
c.next,f=0,g=0,f=d.x-e.x,g=d.y-e.y,i=e=0,e=h.x-d.x,i=h.y-d.y,d=i*f-e*g;d*d>=t.epsilon*t.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=
this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.lp0=c;e.lp1=d;var h=0,f=0,h=c.x-d.x,f=c.y-d.y,g=Math.sqrt(h*h+f*f);e.length=g;g=1/g;h*=g;f*=g;g=h;h=-f;f=g;e.lprojection=h*c.x+f*c.y;e.lnormx=h;e.lnormy=f;null!=e.wrap_lnorm&&
(e.wrap_lnorm.zpp_inner.x=h,e.wrap_lnorm.zpp_inner.y=f);c=d;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;d=b=0;b=c.x-e.x;d=c.y-e.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;h=b*e;b=-(d*e);d=h;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=
b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.gp0=c;e.gp1=d;e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy;e.gnormy=e.lnormx*this.body.axisx+
e.lnormy*this.body.axisy;e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;c=d;b=b.next}b=this.gverts.next;a=a.elt;a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+
a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);
b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*
this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=c;){var d=c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-
b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,e=c=c.next,c=c.next;null!=c;){var h=c,f=e.y*d.x-e.x*d.y,a=a+f*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+f;this.area+=e.x*(h.y-d.y);d=e;e=h;c=c.next}f=c=this.lverts.next;h=e.y*d.x-e.x*d.y;a+=h*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(f.y-d.y);d=e;e=f;
c=c.next;f=e.y*d.x-e.x*d.y;a+=f*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(c.y-d.y);this.inertia=a/(6*(b+h+f));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,e=d,d=d.next;null!=d;){var h=d,f=b.elt,b=b.next,c=c+f.length,g=0,i=0,g=h.x-e.x,i=h.y-e.y,a=a+f.length*t.fluidAngularDragFriction*this.material.dynamicFriction*
f.lprojection*f.lprojection,j=-(e.y*f.lnormx-e.x*f.lnormy)/(i*f.lnormx-g*f.lnormy);if(0<j){var k;k=1<j?1:j;var l=0,m=0,l=e.x,m=e.y,o=k,l=l+g*o,m=m+i*o,o=f.lnormy*e.x-f.lnormx*e.y,l=f.lnormy*l-f.lnormx*m,a=a+(l*l*l-o*o*o)/(3*(l-o))*k*f.length*t.fluidAngularDrag}1>j&&(j=0>j?0:j,l=k=0,k=e.x,l=e.y,e=j,k+=g*e,l+=i*e,e=f.lnormy*k-f.lnormx*l,g=f.lnormy*h.x-f.lnormx*h.y,a+=(g*g*g-e*e*e)/(3*(g-e))*t.fluidVacuumDrag*(1-j)*f.length*t.fluidAngularDrag);e=h;d=d.next}d=this.lverts.next;b=b.elt;c+=b.length;f=h=
0;h=d.x-e.x;f=d.y-e.y;a+=b.length*t.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;g=-(e.y*b.lnormx-e.x*b.lnormy)/(f*b.lnormx-h*b.lnormy);0<g&&(i=1<g?1:g,l=k=0,k=e.x,l=e.y,j=b.lnormy*e.x-b.lnormx*e.y,k=b.lnormy*(k+h*i)-b.lnormx*(l+f*i),a+=(k*k*k-j*j*j)/(3*(k-j))*i*b.length*t.fluidAngularDrag);1>g&&(g=0>g?0:g,j=i=0,i=e.x,j=e.y,e=b.lnormy*(i+h*g)-b.lnormx*(j+f*g),d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*t.fluidVacuumDrag*(1-g)*b.length*t.fluidAngularDrag);
this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,d=b=b.next,b=b.next;null!=b;){var e=
b,a=a+d.x*(e.y-c.y),c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next}e=b=this.lverts.next;a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next;a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},localCOM_validate:function(){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),
null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy))},localCOM_invalidate:function(a){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==f.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy));for(var b=0,c=0,b=a.x-this.localCOMx,c=a.y-this.localCOMy,a=this.lverts.next;null!=a;){var d=a;d.x+=1*b;d.y+=1*c;a=
a.next}this.invalidate_lverts()},setupLocalCOM:function(){this.wrap_localCOM=ra.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=l(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=l(this,this.localCOM_invalidate)},__rotate:function(a,b){for(var c=this.lverts.next;null!=c;){var d=c,e=0,f=0,e=b*d.x-a*d.y,f=d.x*a+d.y*b;d.x=e;d.y=f;c=c.next}this.invalidate_lverts()},__class__:Wi});var De=function(){this.sweep=this.dynab=
null;this.is_sweep=!1;this.space=null};g["zpp_nape.space.ZPP_Broadphase"]=De;De.__name__=["zpp_nape","space","ZPP_Broadphase"];De.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()):this.dynab.__sync(a)},
broadphase:function(){},clear:function(){},__class__:De};var Xa=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=null;this.height=-1};g["zpp_nape.space.ZPP_AABBNode"]=Xa;Xa.__name__=["zpp_nape","space","ZPP_AABBNode"];Xa.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=
null;a._validate=null;a.next=Pa.zpp_pool;Pa.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:Xa};var na=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=null};g["zpp_nape.space.ZPP_AABBPair"]=na;na.__name__=["zpp_nape","space","ZPP_AABBPair"];na.prototype={__class__:na};var Oc=function(){this.root=null};g["zpp_nape.space.ZPP_AABBTree"]=Oc;Oc.__name__=["zpp_nape","space","ZPP_AABBTree"];Oc.prototype={clear:function(){if(null!=
this.root){var a;this.root.next=null;for(a=this.root;null!=a;){var b;b=a;a=b.next;b.next=null;null==b.child1?(b.shape.node=null,b.shape.removedFromSpace(),b.shape=null):(null!=b.child1&&(b.child1.next=a,a=b.child1),null!=b.child2&&(b.child2.next=a,a=b.child2));b.free();b.next=Xa.zpp_pool;Xa.zpp_pool=b}this.root=null}},inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var d=c.child1,e=c.child2,f=c.aabb.perimeter();
Oc.tmpaabb.setCombine(c.aabb,b);var g=Oc.tmpaabb.perimeter(),i=2*g,f=2*(g-f);Oc.tmpaabb.setCombine(b,d.aabb);null==d.child1?g=Oc.tmpaabb.perimeter()+f:(g=d.aabb.perimeter(),g=Oc.tmpaabb.perimeter()-g+f);Oc.tmpaabb.setCombine(b,e.aabb);if(null==e.child1)f=Oc.tmpaabb.perimeter()+f;else var j=e.aabb.perimeter(),f=Oc.tmpaabb.perimeter()-j+f;if(i<g&&i<f)break;else c=g<f?d:e}d=c.parent;null==Xa.zpp_pool?e=new Xa:(e=Xa.zpp_pool,Xa.zpp_pool=e.next,e.next=null);null==Pa.zpp_pool?e.aabb=new Pa:(e.aabb=Pa.zpp_pool,
Pa.zpp_pool=e.aabb.next,e.aabb.next=null);null;e.moved=!1;e.synced=!1;e.first_sync=!1;e.parent=d;e.aabb.setCombine(b,c.aabb);e.height=c.height+1;null!=d?(d.child1==c?d.child1=e:d.child2=e,e.child1=c,e.child2=a,c.parent=e,a.parent=e):(e.child1=c,e.child2=a,c.parent=e,this.root=a.parent=e);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,e=b.height,c.height=1+(d>e?d:e),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==
this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=Xa.zpp_pool;Xa.zpp_pool=b;for(b=c;null!=b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=a,a.parent=null,b.free(),b.next=Xa.zpp_pool,Xa.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-
b.height;if(1<d){var e=c.child1,f=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;e.height>f.height?(c.child2=e,a.child2=f,f.parent=a,a.aabb.setCombine(b.aabb,f.aabb),c.aabb.setCombine(a.aabb,e.aabb),a.height=1+function(){var a=b.height,c=f.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=e.height;return b>c?b:c}(this)):(c.child2=f,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,
f.aabb),a.height=1+function(){var a=b.height,c=e.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this));return c}if(-1>d){var g=b.child1,i=b.child2;b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;g.height>i.height?(b.child2=g,a.child1=i,i.parent=a,a.aabb.setCombine(c.aabb,i.aabb),b.aabb.setCombine(a.aabb,g.aabb),a.height=1+function(){var a=c.height,b=i.height;return a>b?a:b}(this),
b.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this)):(b.child2=i,a.child1=g,g.parent=a,a.aabb.setCombine(c.aabb,g.aabb),b.aabb.setCombine(a.aabb,i.aabb),a.height=1+function(){var a=c.height,b=g.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=i.height;return b>c?b:c}(this));return b}return a},__class__:Oc};var ak=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=null;De.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new Oc;
this.dtree=new Oc};g["zpp_nape.space.ZPP_DynAABBPhase"]=ak;ak.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];ak.__super__=De;ak.prototype=k(De.prototype,{__insert:function(a){var b;null==Xa.zpp_pool?b=new Xa:(b=Xa.zpp_pool,Xa.zpp_pool=b.next,b.next=null);null==Pa.zpp_pool?b.aabb=new Pa:(b.aabb=Pa.zpp_pool,Pa.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=
a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}for(var c=null,e=this.pairs;null!=e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,
e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.n1=e.n2=null,e.sleeping=!1,e.next=na.zpp_pool,na.zpp_pool=e):c=e,e=d;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=na.zpp_pool,na.zpp_pool=c;b.free();b.next=Xa.zpp_pool;Xa.zpp_pool=b},__sync:function(a){var b=a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==
f.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==f.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,this.syncs=b},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var e=c.aabb;!a.continuous&&d.zip_aabb&&null!=d.body&&(d.zip_aabb=!1,d.type==f.id_ShapeType_CIRCLE?d.circle.__validate_aabb():d.polygon.__validate_aabb());
e.setExpand(d.aabb,3);((d.body.type==f.id_BodyType_STATIC?c.dyn=!1:c.dyn=!d.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){var e=c.aabb,h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;){var g;g=h;h=g.next;g.next=null;if(g!=c)if(null==g.child1){var i=g.shape;if(i.body!=d.body&&!(i.body.type==
f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){var j,k;d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);for(var l=null,m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){var o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==na.zpp_pool?l=new na:(l=na.zpp_pool,na.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),
i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==g.child1){if(i=g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=
m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==na.zpp_pool?l=new na:(l=na.zpp_pool,na.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,
c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){e=c.aabb;h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==g.child1){if(i=g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?
l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==na.zpp_pool?l=new na:(l=na.zpp_pool,na.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2));null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=h;)if(g=h,h=g.next,g.next=null,g!=c)if(null==
g.child1){if(i=g.shape,i.body!=d.body&&!(i.body.type==f.id_BodyType_STATIC&&d.body.type==f.id_BodyType_STATIC)&&e.intersect(g.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==na.zpp_pool?l=new na:(l=na.zpp_pool,na.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=g,l.id=j,l.di=k,l.next=this.pairs,this.pairs=
l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(g.aabb)&&(null!=g.child1&&(g.child1.next=h,h=g.child1),null!=g.child2&&(g.child2.next=h,h=g.child2))}c=null;for(d=this.pairs;null!=d;)!d.first&&!d.n1.aabb.intersect(d.n2.aabb)?(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_try_remove(d),d.n2.shape.pairs.inlined_try_remove(d),e=d.next,null!=d.arb&&(d.arb.pair=null),d.arb=null,d.n1=d.n2=null,d.sleeping=!1,d.next=na.zpp_pool,na.zpp_pool=d,d=e):(e=d.n1.shape,
h=e.body,g=d.n2.shape,i=g.body,!d.first&&(h.component.sleeping||h.type==f.id_BodyType_STATIC)&&(i.component.sleeping||i.type==f.id_BodyType_STATIC)?(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next):(d.first=!1,e.aabb.intersect(g.aabb)&&(c=d.arb,d.arb=b?a.narrowPhase(e,g,h.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1):a.continuousEvent(e,g,h.type!=f.id_BodyType_DYNAMIC||i.type!=f.id_BodyType_DYNAMIC,d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d),d=d.next)},
clear:function(){for(;null!=this.syncs;){var a=this.syncs.snext;this.syncs.snext=null;this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null);this.syncs=a}for(;null!=this.moves;)a=this.moves.mnext,this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=a;for(;null!=this.pairs;){a=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null);this.pairs.arb=
null;this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);var b=this.pairs;b.n1=b.n2=null;b.sleeping=!1;b.next=na.zpp_pool;na.zpp_pool=b;this.pairs=a}this.dtree.clear();this.stree.clear()},__class__:ak});var lb=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new ll};g["zpp_nape.space.ZPP_Island"]=lb;lb.__name__=["zpp_nape","space","ZPP_Island"];lb.prototype=
{inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:lb};var Ic=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=
null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};g["zpp_nape.space.ZPP_Component"]=Ic;Ic.__name__=["zpp_nape","space","ZPP_Component"];Ic.prototype={__class__:Ic};var eb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new Lg};g["zpp_nape.space.ZPP_CallbackSet"]=eb;eb.__name__=["zpp_nape","space","ZPP_CallbackSet"];eb.get=function(a,b){var c;null==eb.zpp_pool?
c=new eb:(c=eb.zpp_pool,eb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=f.id_PreFlag_ACCEPT;c.COLLISIONstamp=0;c.SENSORstate=f.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=f.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};eb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},
empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:eb};var ml=function(a){this.cbsets=this.space=null;null==tc.zpp_pool?this.cbsets=new tc:(this.cbsets=tc.zpp_pool,tc.zpp_pool=this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=ya.setlt;this.space=a};g["zpp_nape.space.ZPP_CbSetManager"]=
ml;ml.__name__=["zpp_nape","space","ZPP_CbSetManager"];ml.prototype={get:function(a){if(null==a.head)return null;var b;null==ya.zpp_pool?b=new ya:(b=ya.zpp_pool,ya.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);null!=d?a=d.data:(a=ya.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=ya.zpp_pool;ya.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?
b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=dc.zpp_pool;dc.zpp_pool=b}a.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){for(var a=this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=d;){var e=
d.elt;if(e.a==a&&e.b==b||e.a==b&&e.b==a){c=e;break}d=d.next}null==c&&(c=dc.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:ml};var al=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=
this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.wrap_gravity=this.bodies=this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new nl;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=new Oi;this.precb.zpp_inner=new Cb;this.sortcontacts=
!0;this.pre_dt=0;var c;if(!(c=null==b))null==f.Broadphase_DYNAMIC_AABB_TREE&&(f.internal=!0,f.Broadphase_DYNAMIC_AABB_TREE=new uf,f.internal=!1),c=b==f.Broadphase_DYNAMIC_AABB_TREE;c?this.bphase=new ak(this):(null==f.Broadphase_SWEEP_AND_PRUNE&&(f.internal=!0,f.Broadphase_SWEEP_AND_PRUNE=new uf,f.internal=!1),b==f.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new bk(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new $e;this.wrap_bodies=le.get(this.bodies);
this.wrap_bodies.zpp_inner.adder=l(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=l(this,this.bodies_subber);this.compounds=new Gf;this.wrap_compounds=we.get(this.compounds);this.wrap_compounds.zpp_inner.adder=l(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=l(this,this.compounds_subber);this.kinematics=new $e;this.c_arbiters_true=new ck;this.c_arbiters_false=new ck;this.f_arbiters=new ol;this.s_arbiters=new pl;this.islands=new lb;this.live=new $e;this.wrap_live=le.get(this.live,
!0);this.staticsleep=new $e;this.constraints=new Be;this.wrap_constraints=Lb.get(this.constraints);this.wrap_constraints.zpp_inner.adder=l(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=l(this,this.constraints_subber);this.live_constraints=new Be;this.wrap_livecon=Lb.get(this.live_constraints,!0);this.__static=Td.__static();this.__static.zpp_inner.space=this;this.callbacks=new Cb;this.midstep=!1;this.listeners=new dk;this.wrap_listeners=ve.get(this.listeners);this.wrap_listeners.zpp_inner.adder=
l(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=l(this,this.listeners_subber);this.callbackset_list=new eb;this.mrca1=new Ce;this.mrca2=new Ce;this.prelisteners=new Df;this.cbsets=new ml(this)};g["zpp_nape.space.ZPP_Space"]=al;al.__name__=["zpp_nape","space","ZPP_Space"];al.prototype={getgravity:function(){this.wrap_gravity=ra.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=!0;this.wrap_gravity.zpp_inner._invalidate=l(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=
l(this,this.gravity_validate)},gravity_invalidate:function(a){this.gravityx=a.x;this.gravityy=a.y;for(var a=new Gf,b=this.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=this.compounds.head;null!=b;)a.add(b.elt),b=b.next;for(;null!=a.head;){b=a.pop_unsafe();for(c=b.bodies.head;null!=c;){var d=c.elt;d.world||(d.component.waket=this.stamp+
(this.midstep?0:1),d.type==f.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1));c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},clear:function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var a=this.callbackset_list.pop_unsafe();a.arbiters.clear();
a.int1=a.int2=null;a.id=a.di=-1;a.freed=!0;null;a.next=eb.zpp_pool;eb.zpp_pool=a}for(;null!=this.c_arbiters_true.head;)this.c_arbiters_true.pop_unsafe().retire();for(;null!=this.c_arbiters_false.head;)this.c_arbiters_false.pop_unsafe().retire();for(;null!=this.s_arbiters.head;)this.s_arbiters.pop_unsafe().retire();for(;null!=this.f_arbiters.head;)this.f_arbiters.pop_unsafe().retire();for(this.bphase.clear();null!=this.bodies.head;){a=this.bodies.pop_unsafe();if(null!=a.component){var b=a.component.island;
if(null!=b){for(;null!=b.comps.head;){var c=b.comps.pop_unsafe();c.sleeping=!1;c.island=null;c.parent=c;c.rank=0}b.next=lb.zpp_pool;lb.zpp_pool=b}}a.removedFromSpace();a.space=null}for(;null!=this.constraints.head;){a=this.constraints.pop_unsafe();if(null!=a.component&&(b=a.component.island,null!=b)){for(;null!=b.comps.head;)c=b.comps.pop_unsafe(),c.sleeping=!1,c.island=null,c.parent=c,c.rank=0;b.next=lb.zpp_pool;lb.zpp_pool=b}a.removedFromSpace();a.space=null}this.kinematics.clear();for(a=new Gf;null!=
this.compounds.head;)b=this.compounds.pop_unsafe(),a.add(b);for(;null!=a.head;){b=a.pop_unsafe();b.removedFromSpace();b.space=null;for(c=b.bodies.head;null!=c;){var d=c.elt;if(null!=d.component){var e=d.component.island;if(null!=e){for(;null!=e.comps.head;){var f=e.comps.pop_unsafe();f.sleeping=!1;f.island=null;f.parent=f;f.rank=0}e.next=lb.zpp_pool;lb.zpp_pool=e}}d.removedFromSpace();d.space=null;c=c.next}for(c=b.constraints.head;null!=c;){d=c.elt;if(null!=d.component&&(e=d.component.island,null!=
e)){for(;null!=e.comps.head;)f=e.comps.pop_unsafe(),f.sleeping=!1,f.island=null,f.parent=f,f.rank=0;e.next=lb.zpp_pool;lb.zpp_pool=e}d.removedFromSpace();d.space=null;c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}this.staticsleep.clear();this.live.clear();this.live_constraints.clear();this.time=this.stamp=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear();this.cbsets.clear()},bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),
this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},
constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);
a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==f.id_BodyType_DYNAMIC?this.live.remove(a):a.type==f.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):
a.type==f.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==f.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==f.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&
(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();for(var e=null,h=d.arbiters.head;null!=h;){var g=[h.elt];if(g[0].ws1==a||g[0].ws2==a){if(0!=g[0].present){this.MRCA_chains(g[0].ws1,g[0].ws2);for(h=this.mrca1.head;null!=h;){for(var i=h.elt,j=this.mrca2.head;null!=j;){var k=j.elt,l=i.cbSet,m=k.cbSet;l.validate();m.validate();l.manager.pair(l,m).empty_intersection()||
(k=[ia.get(i,k)],k[0].remove_arb(g[0]),g[0].present--,l.manager.pair(l,m).forall(f.id_CbEvent_END,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var e=c.push_callback(d);e.event=f.id_CbEvent_END;ia.int_callback(a[0],d,e);e.set=a[0]}}}(k,g)),null==k[0].arbiters.head&&this.remove_callbackset(k[0]));j=j.next}h=h.next}}g[0].b1!=d&&g[0].b1.type==f.id_BodyType_DYNAMIC&&(h=g[0].b1,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==f.id_BodyType_KINEMATIC&&
(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));g[0].b2!=d&&g[0].b2.type==f.id_BodyType_DYNAMIC&&(h=g[0].b2,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==f.id_BodyType_KINEMATIC&&(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));g[0].cleared=!0;(null==d||g[0].b2==d)&&g[0].b1.arbiters.inlined_try_remove(g[0]);(null==d||g[0].b1==d)&&g[0].b2.arbiters.inlined_try_remove(g[0]);null!=g[0].pair&&(g[0].pair.arb=null,g[0].pair=null);g[0].active=
!1;this.f_arbiters.modified=!0;h=d.arbiters.erase(e)}else e=h,h=h.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=
b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?
0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==f.id_BodyType_STATIC?this.static_validation(a):a.type!=f.id_BodyType_DYNAMIC&&b!=f.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==f.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),
a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==f.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.live.remove(a)):(b!=f.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,
!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},push_callback:function(a){var b;null==Cb.zpp_pool?b=new Cb:(b=Cb.zpp_pool,Cb.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var e=this.c_arbiters_false;if(null!=
e.head&&null!=e.head.next){var h=e.head,g=null,i=null,j=null,k=null,l=1,m,o,p;do{m=0;i=h;for(g=h=null;null!=i;){m++;j=i;o=0;for(p=l;null!=j&&o<l;)o++,j=j.next;for(;0<o||0<p&&null!=j;)0==o?(k=j,j=j.next,p--):0==p||null==j?(k=i,i=i.next,o--):(i.elt.active&&j.elt.active?i.elt.oc1.dist<j.elt.oc1.dist:1)?(k=i,i=i.next,o--):(k=j,j=j.next,p--),null!=g?g.next=k:h=k,g=k;i=j}g.next=null;l<<=1}while(1<m);e.head=h;e.modified=!0;e.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=
b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&
b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)e=b.elt,e.type!=f.id_BodyType_KINEMATIC||0==e.velx&&0==e.vely&&0==e.angvel?e.kinematicDelaySleep?(e.kinematicDelaySleep=!1,b=b.next):(e.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),
b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=eb.zpp_pool,eb.zpp_pool=b):(c=[b[0].sleeping()],ya.find_all(b[0].int1.cbSet,b[0].int2.cbSet,f.id_CbEvent_ONGOING,function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_ONGOING;ia.int_callback(b[0],c,e);e.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==f.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):
a.listener.type==f.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==f.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=Cb.zpp_pool,Cb.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,
c=2,e=!1,h=null,g=null,i=this.toiEvents.head;null!=i;){var j=i.elt,k=j.s1.body,l=j.s2.body;if(k.sweepFrozen&&l.sweepFrozen)if(0!=j.toi&&R.testCollide_safe(j.s1,j.s2))j.toi=0;else{i=this.toiEvents.erase(g);j.next=Eb.zpp_pool;Eb.zpp_pool=j;continue}if(j.frozen1!=k.sweepFrozen||j.frozen2!=l.sweepFrozen)if(j.kinematic){i=this.toiEvents.erase(g);j.next=Eb.zpp_pool;Eb.zpp_pool=j;continue}else if(j.frozen1=k.sweepFrozen,j.frozen2=l.sweepFrozen,j.frozen1&&(k=j.s1,j.s1=j.s2,j.s2=k,j.frozen1=!1,j.frozen2=!0),
ad.staticSweep(j,a,0,t.collisionSlopCCD),0>j.toi){i=this.toiEvents.erase(g);j.next=Eb.zpp_pool;Eb.zpp_pool=j;continue}if(0<=j.toi&&(j.toi<c||!e&&j.kinematic))d=j,c=j.toi,e=j.kinematic,h=g;g=i;i=i.next}if(null==d)break;this.toiEvents.erase(h);c=d.toi;e=d.s1.body;h=d.s2.body;e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s1));h.sweepFrozen||(h.sweepIntegrate(c*a),h.sweepValidate(d.s2));g=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==g?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=
null,d.arbiter.pair=null):!this.presteparb(g,a,!0)&&g.type==ma.COL&&g.active&&0!=(g.immState&f.id_ImmState_ACCEPT)&&(g.colarb.warmStart(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),g.colarb.applyImpulseVel(),e.sweep_angvel=e.angvel%b,h.sweep_angvel=h.angvel%b);null!=g&&g.active&&0!=(g.immState&f.id_ImmState_ACCEPT)&&g.type==ma.COL&&(!e.sweepFrozen&&e.type!=f.id_BodyType_KINEMATIC&&(e.sweepFrozen=!0,e.angvel=d.failed?e.sweep_angvel=0:d.slipped?e.sweep_angvel*=
t.angularCCDSlipScale:e.sweep_angvel),!h.sweepFrozen&&h.type!=f.id_BodyType_KINEMATIC&&(h.sweepFrozen=!0,h.angvel=d.failed?h.sweep_angvel=0:d.slipped?h.sweep_angvel*=t.angularCCDSlipScale:h.sweep_angvel))}for(;null!=this.toiEvents.head;)b=this.toiEvents.pop_unsafe(),b.next=Eb.zpp_pool,Eb.zpp_pool=b;for(b=this.kinematics.head;null!=b;)d=b.elt,d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,
b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var e=a.body,h=b.body;if(c||e.bullet||h.bullet){var g;null==Eb.zpp_pool?g=new Eb:(g=Eb.zpp_pool,Eb.zpp_pool=g.next,g.next=null);g.failed=!1;g.s1=g.s2=null;g.arbiter=null;e=e.type==f.id_BodyType_KINEMATIC||h.type==f.id_BodyType_KINEMATIC;c&&!e?(a.body.type!=f.id_BodyType_DYNAMIC?(g.s2=a,g.s1=b):(g.s1=a,g.s2=b),g.kinematic=!1,ad.staticSweep(g,
this.pre_dt,0,t.collisionSlopCCD)):(g.s1=a,g.s2=b,g.kinematic=e,g.s1.body.sweepFrozen||g.s2.body.sweepFrozen?(g.s1.body.sweepFrozen&&(a=g.s1,g.s1=g.s2,g.s2=a,g.frozen1=!1,g.frozen2=!0),ad.staticSweep(g,this.pre_dt,0,t.collisionSlopCCD)):ad.dynamicSweep(g,this.pre_dt,0,t.collisionSlopCCD));c&&0>g.toi||g.failed?(c=g,c.next=Eb.zpp_pool,Eb.zpp_pool=c):(this.toiEvents.add(g),g.frozen1=g.s1.body.sweepFrozen,g.frozen2=g.s2.body.sweepFrozen,g.arbiter=null!=d?d.colarb:null)}return d},bodyCbWake:function(a){if(a.type==
f.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=!0},bodyCbSleep:function(a){if(a.type==f.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=
a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=f.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==f.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=f.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=
b;){var c=b.elt;c.event==f.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=f.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new Ce,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;
d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(0!=f.present&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(f=this.mrca1.head;null!=f;){var g=f.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var i=this.mrca2.head;null!=i;){var j=i.elt;if(!(g.cbSet==a&&j.cbSet!=b||g.cbSet==b&&j.cbSet!=a))if(j=ia.get(g,j),null!=j){for(;null!=j.arbiters.head;)j.arbiters.pop_unsafe().present--;this.remove_callbackset(j)}i=i.next}f=f.next}}e=e.next}}},nullInteractorType:function(a,
b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(0!=e.present&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;g!=b&&j!=b||
(j=ia.get(g,j),null!=j&&(e.present--,j.remove_arb(e),null==j.arbiters.head&&this.remove_callbackset(j)));i=i.next}f=f.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new Ce,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?
d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var f=e.elt;if(f.presentable&&(null==d||f.ws1==d||f.ws2==d)){this.MRCA_chains(f.ws1,f.ws2);for(var g=this.mrca1.head;null!=g;){var i=g.elt;if(!(i.cbSet!=a&&i.cbSet!=b))for(var j=this.mrca2.head;null!=j;){var k=j.elt;if(!(i.cbSet==a&&k.cbSet!=b||i.cbSet==b&&k.cbSet!=a)){var l=ia.get(i,k);null==l&&(l=eb.get(i,k),this.add_callbackset(l));if(k=!l.arbiters.inlined_has(f))l.arbiters.inlined_add(f),k=!0;k&&f.present++}j=
j.next}g=g.next}}e=e.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(e.presentable&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var f=this.mrca1.head;null!=f;){for(var g=
f.elt,i=this.mrca2.head;null!=i;){var j=i.elt;if(!(g!=b&&j!=b)){var k=g.cbSet,l=j.cbSet;k.validate();l.validate();if(!k.manager.pair(k,l).empty_intersection()){k=ia.get(g,j);null==k&&(k=eb.get(g,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(e))k.arbiters.inlined_add(e),j=!0;j&&e.present++}}i=i.next}f=f.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==f.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=
!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var e=d.elt;e.sleeping&&(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==ma.COL?(e=e.colarb,e.stat?this.c_arbiters_true.inlined_add(e):
this.c_arbiters_false.inlined_add(e)):e.type==ma.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb));d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=f.id_BodyType_STATIC)for(b=c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=lb.zpp_pool;lb.zpp_pool=a},non_inlined_wake:function(a,
b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==f.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=!1;a.type==f.id_BodyType_KINEMATIC||a.type==f.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var d=c.elt;d.space==this&&this.wake_constraint(d);c=c.next}for(c=
a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==ma.COL){var e=d.colarb;e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)}else d.type==ma.FLUID?this.f_arbiters.inlined_add(d.fluidarb):this.s_arbiters.inlined_add(d.sensorarb);d.type!=ma.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&f.id_ImmState_ACCEPT)&&(d.b1.type==f.id_BodyType_DYNAMIC&&d.b1.component.sleeping&&(e=d.b1,e.world||
(e.component.waket=this.stamp+(this.midstep?0:1),e.type==f.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),d.b2.type==f.id_BodyType_DYNAMIC&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==f.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.type==f.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=f.id_BodyType_STATIC)for(c=
a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=
b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var h=d.parent;d.parent=e;e=d;d=h}for(;null!=e;)h=e.parent,e.parent=d,e=h}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=
c,e=h}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.b1.type==f.id_BodyType_DYNAMIC&&c.b2.type==f.id_BodyType_DYNAMIC){if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)h=d.parent,d.parent=e,e=d,d=h;for(;null!=e;)h=e.parent,e.parent=d,e=h}if(c.b2.component==c.b2.component.parent)c=
c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=c,e=h}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){d=this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=c,e=h}null==c.island&&(null==
lb.zpp_pool?c.island=new lb:(c.island=lb.zpp_pool,lb.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=
d.parent,d.parent=b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),
b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=lb.zpp_pool;lb.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elt;e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):
(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null);a=null;b=this.s_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==
c&&(d=!1,a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==f.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var d=c.elt;d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),
d.polygon.validate_gaxi());d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=f.id_CbEvent_WAKE,d.body=b),c=
c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)d=c.elt,d.type==f.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();
b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)d=c.elt,d.event==f.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=f.id_CbEvent_WAKE,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,
d=this.live.head;null!=d;){var e=d.elt;if(0!=e.smass){var f=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*f;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*f}if(0!=e.sinertia){var g=f=0,f=e.worldCOMx-e.posx,g=e.worldCOMy-e.posy;e.angvel=c*e.angvel+(e.torque+(this.gravityy*f-this.gravityx*g)*e.gravMass)*a*e.iinertia}d=d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=
d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var e=t.staticCCDLinearThreshold*d.sweepRadius,h=t.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);for(var h=1/e,g=d.shapes.head;null!=g;){var i=g.elt,j=i.aabb,k=j.minx,l=j.miny,m=j.maxx,o=j.maxy,p=0.008333333333333333*e*a*i.sweepCoef|0;8<p&&(p=8);var r=e*a/p;d.sweepIntegrate(a);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():
i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy;for(var s=1;s<p;){var u=s++;d.sweepIntegrate(r*u*h);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy}this.bphase.sync(i);g=g.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*
d.sweepRadius,h=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(e=t.staticCCDLinearThreshold*d.sweepRadius,h=t.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*
a*a>h*h||d.type==f.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);h=1/e;for(g=d.shapes.head;null!=g;){i=g.elt;j=i.aabb;k=j.minx;l=j.miny;m=j.maxx;o=j.maxy;p=0.008333333333333333*e*a*i.sweepCoef|0;8<p&&(p=8);r=e*a/p;d.sweepIntegrate(a);i.type==f.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy;for(s=1;s<p;)u=s++,d.sweepIntegrate(r*u*h),i.type==f.id_ShapeType_CIRCLE?
i.circle._force_validate_aabb():i.polygon._force_validate_aabb(),k<j.minx?j.minx=k:k=j.minx,l<j.miny?j.miny=l:l=j.miny,m>j.maxx?j.maxx=m:m=j.maxx,o>j.maxy?j.maxy=o:o=j.maxy;this.bphase.sync(i);g=g.next}d.sweepFrozen=!1;if(d.type==f.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=t.bulletCCDLinearThreshold*d.sweepRadius,h=t.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&
(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);if(c||e||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(e=this.mrca1.head;null!=e;){for(var g=e.elt,i=this.mrca2.head;null!=i;){var j=i.elt,k=g.cbSet,l=j.cbSet;if(!k.manager.pair(k,l).empty_intersection()){var m=
[ia.get(g,j)];if(c||a.intchange){null==m[0]&&(m[0]=eb.get(g,j),this.add_callbackset(m[0]));k.manager.pair(k,l).forall(f.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_BEGIN;ia.int_callback(b[0],c,e);e.set=b[0]}}}(m));if(j=!m[0].arbiters.inlined_has(a))m[0].arbiters.inlined_add(a),j=!0;j&&a.present++}else a.present--,m[0].remove_arb(a),k.manager.pair(k,l).forall(f.id_CbEvent_END,function(b){return function(c){if(0!=
(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=f.id_CbEvent_END;ia.int_callback(b[0],c,e);e.set=b[0]}}}(m)),null==m[0].arbiters.head&&this.remove_callbackset(m[0])}i=i.next}e=e.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==ma.COL?t.arbiterExpirationDelay:0)<this.stamp)return a.type==ma.SENSOR?a.sensorarb.retire():a.type==ma.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&f.id_ImmState_ACCEPT)?
a.active&&a.type!=ma.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),
this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,d=c.head,e=null!=this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=this.c_arbiters_false.head,
c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null);b=null;c=this.s_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&f.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==
a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&f.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var d=c.elt;d.active&&0!=(d.immState&f.id_ImmState_ACCEPT)&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.head;null!=d;){var e=d.elt;e.applyImpulseVel()?
(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,
d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,
d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&f.id_ImmState_ACCEPT)&&e.applyImpulsePos(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var d=b.lookup_group();if(null==d)return!1;for(var e=!1;null!=c&&null!=d;){if(c==d){e=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}return e},interactionType:function(a,b,c,d){var e;e=!1;for(var f=c.constraints.head;null!=f;){var g=f.elt;if(g.ignore&&g.pair_exists(c.id,d.id)){e=
!0;break}f=f.next}return!e&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?0:a.filter.shouldCollide(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,d,e){var g=this,i=null,j=a.body,k=b.body,l=this.interactionType(a,b,j,k);if(-1!=l){var m,o;a.type>b.type?(m=b,o=a):a.type==b.type?a.id<
b.id?(m=a,o=b):(o=a,m=b):(m=a,o=b);var p=m==b;if(0==l){var r;if(null==d){for(var s=null,t=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=t;){var u=t.elt;if(u.id==m.id&&u.di==o.id){s=u;break}t=t.next}r=s}else r=d;var v=null==r,q,w=!1;v?(null==Ma.zpp_pool?q=new Ma:(q=Ma.zpp_pool,Ma.zpp_pool=q.next,q.next=null),null):null==r.fluidarb?(r.cleared=!0,r.b1.arbiters.inlined_try_remove(r),r.b2.arbiters.inlined_try_remove(r),null!=r.pair&&(r.pair.arb=null,r.pair=null),r.active=!1,this.f_arbiters.modified=
!0,null==Ma.zpp_pool?q=new Ma:(q=Ma.zpp_pool,Ma.zpp_pool=q.next,q.next=null),null,w=v=q.intchange=!0):q=r.fluidarb;var x=f.id_InteractionType_FLUID;if(v||q.stamp!=this.stamp||e)if(q.stamp=this.stamp,R.flowCollide(m,o,q)){v?(q.b1=a.body,q.ws1=a,q.b2=b.body,q.ws2=b,q.id=m.id,q.di=o.id,q.b1.arbiters.inlined_add(q),q.b2.arbiters.inlined_add(q),q.active=!0,q.present=0,q.cleared=!1,q.sleeping=!1,q.fresh=!1,q.presentable=!1,q.nx=0,q.ny=1,q.dampx=0,q.dampy=0,q.adamp=0,this.f_arbiters.inlined_add(q),q.fresh=
!w):q.fresh=q.up_stamp<this.stamp-1||q.endGenerated==this.stamp&&e;q.up_stamp=q.stamp;if(q.fresh||0==(q.immState&f.id_ImmState_ALWAYS)){q.immState=f.id_ImmState_ACCEPT;var y=!1;this.inlined_MRCA_chains(q.ws1.id>q.ws2.id?q.ws2:q.ws1,q.ws1.id>q.ws2.id?q.ws1:q.ws2);for(var A=this.mrca1.head;null!=A;){for(var B=A.elt,D=this.mrca2.head;null!=D;){var E=D.elt,F=B.cbSet,G=E.cbSet;if(!F.manager.pair(F,G).empty_intersection()){var C=null,H=null;this.prelisteners.inlined_clear();F.manager.pair(F,G).forall(f.id_CbEvent_PRE,
function(a){return function(b){0!=(b.itype&x)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),y=y||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(C=ia.get(B,E),null==C&&(H=eb.get(B,E),this.add_callbackset(H)),null==C||(C.FLUIDstamp!=this.stamp||e)&&0==(C.FLUIDstate&f.id_ImmState_ALWAYS)){null!=H&&(C=H);if(null!=C)for(var I=this.prelisteners.head;null!=I;)I.elt.itype==f.id_InteractionType_ANY&&(C.COLLISIONstamp=this.stamp,C.SENSORstamp=this.stamp),C.FLUIDstamp=this.stamp,I=I.next;var K=q.active;
q.active=!0;this.precb.zpp_inner.pre_arbiter=q;this.precb.zpp_inner.set=C;for(var J=this.prelisteners.head;null!=J;){var L=J.elt;this.precb.zpp_inner.listener=L;ia.int_callback(C,L,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=B!=this.precb.zpp_inner.int1;var M=L.handlerp(this.precb);if(null!=M){var N=q,O,S=M;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1);if(S==f.PreFlag_ACCEPT)O=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var T=M,Q;null==f.PreFlag_ACCEPT_ONCE&&
(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1);if(T==f.PreFlag_ACCEPT_ONCE)Q=f.id_ImmState_ACCEPT;else{var W=M;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1);Q=W==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}O=Q}N.immState=O}J=J.next}q.active=K;if(null!=C)for(var U=this.prelisteners.head;null!=U;)U.elt.itype==f.id_InteractionType_ANY&&(C.COLLISIONstate=q.immState,C.SENSORstate=q.immState),C.FLUIDstate=q.immState,U=U.next}else null==
C?0==(q.immState&f.id_ImmState_ALWAYS)&&(q.immState=f.id_ImmState_ACCEPT):q.immState=C.FLUIDstate}D=D.next}A=A.next}if(y&&0==(q.immState&f.id_ImmState_ALWAYS)){if(q.b1.type==f.id_BodyType_DYNAMIC){var V=q.b1;V.world||(V.component.waket=this.stamp+(this.midstep?0:1),V.type==f.id_BodyType_KINEMATIC&&(V.kinematicDelaySleep=!0),V.component.sleeping&&this.really_wake(V,!1))}if(q.b1.type==f.id_BodyType_DYNAMIC){var X=q.b2;X.world||(X.component.waket=this.stamp+(this.midstep?0:1),X.type==f.id_BodyType_KINEMATIC&&
(X.kinematicDelaySleep=!0),X.component.sleeping&&this.really_wake(X,!1))}}}if(0!=(q.immState&f.id_ImmState_ACCEPT)){if(q.b1.type==f.id_BodyType_DYNAMIC&&q.b1.component.sleeping){var Y=q.b1;Y.world||(Y.component.waket=this.stamp+(this.midstep?0:1),Y.type==f.id_BodyType_KINEMATIC&&(Y.kinematicDelaySleep=!0),Y.component.sleeping&&this.really_wake(Y,!1))}if(q.b2.type==f.id_BodyType_DYNAMIC&&q.b2.component.sleeping){var Z=q.b2;Z.world||(Z.component.waket=this.stamp+(this.midstep?0:1),Z.type==f.id_BodyType_KINEMATIC&&
(Z.kinematicDelaySleep=!0),Z.component.sleeping&&this.really_wake(Z,!1))}}q.sleeping&&(q.sleeping=!1,this.f_arbiters.inlined_add(q));i=q}else if(v){var ba=q;ba.next=Ma.zpp_pool;Ma.zpp_pool=ba;i=null}else i=q;else i=q}else if(1==l){var ca;ca=c?this.c_arbiters_true:this.c_arbiters_false;var $;if(null==d){for(var ga=null,fa=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=fa;){var ha=fa.elt;if(ha.id==m.id&&ha.di==o.id){ga=ha;break}fa=fa.next}$=ga}else $=d;var ea=null==$,z,ja=!1;ea?(null==
jb.zpp_pool?z=new jb:(z=jb.zpp_pool,jb.zpp_pool=z.next,z.next=null),null,z.stat=c):null==$.colarb?($.cleared=!0,$.b1.arbiters.inlined_try_remove($),$.b2.arbiters.inlined_try_remove($),null!=$.pair&&($.pair.arb=null,$.pair=null),$.active=!1,this.f_arbiters.modified=!0,null==jb.zpp_pool?z=new jb:(z=jb.zpp_pool,jb.zpp_pool=z.next,z.next=null),null,z.intchange=!0,z.stat=c,ja=ea=!0):(z=$.colarb,p=m!=z.s1,z.stat!=c&&(z.stat=c,z.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(z),ca.add(z))));
var oa=f.id_InteractionType_COLLISION;if(ea||z.stamp!=this.stamp||e)if(z.stamp=this.stamp,R.contactCollide(m,o,z,p)){ea?(z.b1=a.body,z.ws1=a,z.b2=b.body,z.ws2=b,z.id=m.id,z.di=o.id,z.b1.arbiters.inlined_add(z),z.b2.arbiters.inlined_add(z),z.active=!0,z.present=0,z.cleared=!1,z.sleeping=!1,z.fresh=!1,z.presentable=!1,z.s1=a,z.s2=b,z.userdef_restitution||(z.restitution=z.s1.material.elasticity<=Math.NEGATIVE_INFINITY||z.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:z.s1.material.elasticity>=Math.POSITIVE_INFINITY||
z.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(z.s1.material.elasticity+z.s2.material.elasticity)/2,0>z.restitution&&(z.restitution=0),1<z.restitution&&(z.restitution=1)),z.userdef_dyn_fric||(z.dyn_fric=Math.sqrt(z.s1.material.dynamicFriction*z.s2.material.dynamicFriction)),z.userdef_stat_fric||(z.stat_fric=Math.sqrt(z.s1.material.staticFriction*z.s2.material.staticFriction)),z.userdef_rfric||(z.rfric=Math.sqrt(z.s1.material.rollingFriction*z.s2.material.rollingFriction)),ca.inlined_add(z),z.fresh=
!ja):z.fresh=z.up_stamp<this.stamp-1||z.endGenerated==this.stamp&&e;z.up_stamp=z.stamp;if(z.fresh||0==(z.immState&f.id_ImmState_ALWAYS)){z.immState=f.id_ImmState_ACCEPT;var la=!1;this.inlined_MRCA_chains(z.ws1.id>z.ws2.id?z.ws2:z.ws1,z.ws1.id>z.ws2.id?z.ws1:z.ws2);for(var ma=this.mrca1.head;null!=ma;){for(var na=ma.elt,pa=this.mrca2.head;null!=pa;){var qa=pa.elt,ra=na.cbSet,wa=qa.cbSet;if(!ra.manager.pair(ra,wa).empty_intersection()){var aa=null,ta=null;this.prelisteners.inlined_clear();ra.manager.pair(ra,
wa).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&oa)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),la=la||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(aa=ia.get(na,qa),null==aa&&(ta=eb.get(na,qa),this.add_callbackset(ta)),null==aa||(aa.COLLISIONstamp!=this.stamp||e)&&0==(aa.COLLISIONstate&f.id_ImmState_ALWAYS)){null!=ta&&(aa=ta);if(null!=aa)for(var ua=this.prelisteners.head;null!=ua;)ua.elt.itype==f.id_InteractionType_ANY?(aa.COLLISIONstamp=this.stamp,aa.SENSORstamp=
this.stamp,aa.FLUIDstamp=this.stamp):aa.COLLISIONstamp=this.stamp,ua=ua.next;var za=z.active;z.active=!0;z.cleanupContacts();this.precb.zpp_inner.pre_arbiter=z;this.precb.zpp_inner.set=aa;for(var va=this.prelisteners.head;null!=va;){var ya=va.elt;this.precb.zpp_inner.listener=ya;ia.int_callback(aa,ya,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=na!=this.precb.zpp_inner.int1;var xa=ya.handlerp(this.precb);if(null!=xa){var Ba=z,Ia=xa,Ea;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=
new Ua,f.internal=!1);if(Ia==f.PreFlag_ACCEPT)Ea=f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var Oa=xa,Ja;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1);if(Oa==f.PreFlag_ACCEPT_ONCE)Ja=f.id_ImmState_ACCEPT;else{var Va=xa;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1);Ja=Va==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}Ea=Ja}Ba.immState=Ea}va=va.next}z.active=za;if(null!=aa)for(var Ka=this.prelisteners.head;null!=
Ka;)Ka.elt.itype==f.id_InteractionType_ANY?(aa.COLLISIONstate=z.immState,aa.SENSORstate=z.immState,aa.FLUIDstate=z.immState):aa.COLLISIONstate=z.immState,Ka=Ka.next}else null==aa?0==(z.immState&f.id_ImmState_ALWAYS)&&(z.immState=f.id_ImmState_ACCEPT):z.immState=aa.COLLISIONstate}pa=pa.next}ma=ma.next}if(la&&0==(z.immState&f.id_ImmState_ALWAYS)){if(z.b1.type==f.id_BodyType_DYNAMIC){var Ca=z.b1;Ca.world||(Ca.component.waket=this.stamp+(this.midstep?0:1),Ca.type==f.id_BodyType_KINEMATIC&&(Ca.kinematicDelaySleep=
!0),Ca.component.sleeping&&this.really_wake(Ca,!1))}if(z.b1.type==f.id_BodyType_DYNAMIC){var Da=z.b2;Da.world||(Da.component.waket=this.stamp+(this.midstep?0:1),Da.type==f.id_BodyType_KINEMATIC&&(Da.kinematicDelaySleep=!0),Da.component.sleeping&&this.really_wake(Da,!1))}}}if(0!=(z.immState&f.id_ImmState_ACCEPT)){if(z.b1.type==f.id_BodyType_DYNAMIC&&z.b1.component.sleeping){var Fa=z.b1;Fa.world||(Fa.component.waket=this.stamp+(this.midstep?0:1),Fa.type==f.id_BodyType_KINEMATIC&&(Fa.kinematicDelaySleep=
!0),Fa.component.sleeping&&this.really_wake(Fa,!1))}if(z.b2.type==f.id_BodyType_DYNAMIC&&z.b2.component.sleeping){var Ga=z.b2;Ga.world||(Ga.component.waket=this.stamp+(this.midstep?0:1),Ga.type==f.id_BodyType_KINEMATIC&&(Ga.kinematicDelaySleep=!0),Ga.component.sleeping&&this.really_wake(Ga,!1))}}z.sleeping&&(z.sleeping=!1,ca.inlined_add(z));i=z}else if(ea){var Aa=z;Aa.userdef_dyn_fric=!1;Aa.userdef_stat_fric=!1;Aa.userdef_restitution=!1;Aa.userdef_rfric=!1;Aa.__ref_edge1=Aa.__ref_edge2=null;Aa.next=
jb.zpp_pool;jb.zpp_pool=Aa;i=null}else i=z;else i=z}else{var sa;if(null==d){for(var Xa=null,Na=(j.arbiters.length<k.arbiters.length?j:k).arbiters.head;null!=Na;){var Qa=Na.elt;if(Qa.id==m.id&&Qa.di==o.id){Xa=Qa;break}Na=Na.next}sa=Xa}else sa=d;var La=null==sa,P,Za=!1;La?(null==rc.zpp_pool?P=new rc:(P=rc.zpp_pool,rc.zpp_pool=P.next,P.next=null),null):null==sa.sensorarb?(sa.cleared=!0,sa.b1.arbiters.inlined_try_remove(sa),sa.b2.arbiters.inlined_try_remove(sa),null!=sa.pair&&(sa.pair.arb=null,sa.pair=
null),sa.active=!1,this.f_arbiters.modified=!0,null==rc.zpp_pool?P=new rc:(P=rc.zpp_pool,rc.zpp_pool=P.next,P.next=null),null,Za=La=P.intchange=!0):P=sa.sensorarb;var ab=f.id_InteractionType_SENSOR;if(La||P.stamp!=this.stamp||e)if(P.stamp=this.stamp,R.testCollide(m,o)){La?(P.b1=a.body,P.ws1=a,P.b2=b.body,P.ws2=b,P.id=m.id,P.di=o.id,P.b1.arbiters.inlined_add(P),P.b2.arbiters.inlined_add(P),P.active=!0,P.present=0,P.cleared=!1,P.sleeping=!1,P.fresh=!1,P.presentable=!1,this.s_arbiters.inlined_add(P),
P.fresh=!Za):P.fresh=P.up_stamp<this.stamp-1||P.endGenerated==this.stamp&&e;P.up_stamp=P.stamp;if(P.fresh||0==(P.immState&f.id_ImmState_ALWAYS)){P.immState=f.id_ImmState_ACCEPT;var Ra=!1;this.inlined_MRCA_chains(P.ws1.id>P.ws2.id?P.ws2:P.ws1,P.ws1.id>P.ws2.id?P.ws1:P.ws2);for(var Pa=this.mrca1.head;null!=Pa;){for(var Sa=Pa.elt,Ta=this.mrca2.head;null!=Ta;){var $a=Ta.elt,Wa=Sa.cbSet,bb=$a.cbSet;if(!Wa.manager.pair(Wa,bb).empty_intersection()){var ka=null,Ya=null;this.prelisteners.inlined_clear();Wa.manager.pair(Wa,
bb).forall(f.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&ab)&&(a[0]=g.prelisteners.inlined_insert(a[0],b),Ra=Ra||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(ka=ia.get(Sa,$a),null==ka&&(Ya=eb.get(Sa,$a),this.add_callbackset(Ya)),null==ka||(ka.SENSORstamp!=this.stamp||e)&&0==(ka.SENSORstate&f.id_ImmState_ALWAYS)){null!=Ya&&(ka=Ya);if(null!=ka)for(var cb=this.prelisteners.head;null!=cb;)cb.elt.itype==f.id_InteractionType_ANY?(ka.COLLISIONstamp=this.stamp,ka.SENSORstamp=this.stamp,
ka.FLUIDstamp=this.stamp):ka.SENSORstamp=this.stamp,cb=cb.next;var kb=P.active;P.active=!0;this.precb.zpp_inner.pre_arbiter=P;this.precb.zpp_inner.set=ka;for(var db=this.prelisteners.head;null!=db;){var gb=db.elt;this.precb.zpp_inner.listener=gb;ia.int_callback(ka,gb,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=Sa!=this.precb.zpp_inner.int1;var fb=gb.handlerp(this.precb);if(null!=fb){var mb=P,nb=fb,hb;null==f.PreFlag_ACCEPT&&(f.internal=!0,f.PreFlag_ACCEPT=new Ua,f.internal=!1);if(nb==f.PreFlag_ACCEPT)hb=
f.id_ImmState_ACCEPT|f.id_ImmState_ALWAYS;else{var ib,ob=fb;null==f.PreFlag_ACCEPT_ONCE&&(f.internal=!0,f.PreFlag_ACCEPT_ONCE=new Ua,f.internal=!1);if(ob==f.PreFlag_ACCEPT_ONCE)ib=f.id_ImmState_ACCEPT;else{var pb=fb;null==f.PreFlag_IGNORE&&(f.internal=!0,f.PreFlag_IGNORE=new Ua,f.internal=!1);ib=pb==f.PreFlag_IGNORE?f.id_ImmState_IGNORE|f.id_ImmState_ALWAYS:f.id_ImmState_IGNORE}hb=ib}mb.immState=hb}db=db.next}P.active=kb;if(null!=ka)for(var qb=this.prelisteners.head;null!=qb;)qb.elt.itype==f.id_InteractionType_ANY?
(ka.COLLISIONstate=P.immState,ka.SENSORstate=P.immState,ka.FLUIDstate=P.immState):ka.SENSORstate=P.immState,qb=qb.next}else null==ka?0==(P.immState&f.id_ImmState_ALWAYS)&&(P.immState=f.id_ImmState_ACCEPT):P.immState=ka.SENSORstate}Ta=Ta.next}Pa=Pa.next}if(Ra&&0==(P.immState&f.id_ImmState_ALWAYS)){if(P.b1.type!=f.id_BodyType_STATIC){var rb=P.b1;rb.world||(rb.component.waket=this.stamp+(this.midstep?0:1),rb.type==f.id_BodyType_KINEMATIC&&(rb.kinematicDelaySleep=!0),rb.component.sleeping&&this.really_wake(rb,
!1))}if(P.b2.type!=f.id_BodyType_STATIC){var lb=P.b2;lb.world||(lb.component.waket=this.stamp+(this.midstep?0:1),lb.type==f.id_BodyType_KINEMATIC&&(lb.kinematicDelaySleep=!0),lb.component.sleeping&&this.really_wake(lb,!1))}}}P.sleeping&&(P.sleeping=!1,this.s_arbiters.inlined_add(P));i=P}else if(La){var sb=P;sb.next=rc.zpp_pool;rc.zpp_pool=sb;i=null}else i=P;else i=P}}return i},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();
null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,d=b.body.compound;c!=d;)(null==c?0:c.depth)<(null==d?0:d.depth)?(null!=d.cbSet&&this.mrca2.inlined_add(d),d=d.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:al};var Ee=function(){this.next=this.prev=this.shape=this.aabb=null};g["zpp_nape.space.ZPP_SweepData"]=Ee;
Ee.__name__=["zpp_nape","space","ZPP_SweepData"];Ee.prototype={__class__:Ee};var bk=function(a){this.list=null;De.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};g["zpp_nape.space.ZPP_SweepPhase"]=bk;bk.__name__=["zpp_nape","space","ZPP_SweepPhase"];bk.__super__=De;bk.prototype=k(De.prototype,{__insert:function(a){var b;null==Ee.zpp_pool?b=new Ee:(b=Ee.zpp_pool,Ee.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=
b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=Ee.zpp_pool;Ee.zpp_pool=b},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=
c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=c.next,e=c.shape,g=e.body,i=c.aabb.maxx;null!=d&&!(d.aabb.minx>i);){var j=d.shape,k=j.body;if(k!=g&&!(g.type==f.id_BodyType_STATIC&&k.type==f.id_BodyType_STATIC)&&(!g.component.sleeping||!k.component.sleeping))e.aabb.intersectY(j.aabb)&&(b?a.narrowPhase(e,j,g.type!=f.id_BodyType_DYNAMIC||k.type!=f.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(e,
j,g.type!=f.id_BodyType_DYNAMIC||k.type!=f.id_BodyType_DYNAMIC,null,!1));d=d.next}c=c.next}}},clear:function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},__class__:bk});var hl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=hl;hl.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];hl.prototype={inlined_add:function(a){var b;null==Fe.zpp_pool?b=new Fe:(b=Fe.zpp_pool,Fe.zpp_pool=b.next,
b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Fe.zpp_pool;Fe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},
__class__:hl};var $e=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Body"]=$e;$e.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];$e.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==uc.zpp_pool?b=new uc:(b=uc.zpp_pool,uc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,
b){var c;null==uc.zpp_pool?c=new uc:(c=uc.zpp_pool,uc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=uc.zpp_pool;uc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=
this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=uc.zpp_pool;uc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=
this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:$e};var Gf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Compound"]=Gf;Gf.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];Gf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==bd.zpp_pool?b=new bd:(b=bd.zpp_pool,bd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;
this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=bd.zpp_pool;bd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=bd.zpp_pool;bd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Gf};var Lg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};
g["zpp_nape.util.ZNPList_ZPP_Arbiter"]=Lg;Lg.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];Lg.prototype={inlined_add:function(a){var b;null==be.zpp_pool?b=new be:(b=be.zpp_pool,be.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=be.zpp_pool;be.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=be.zpp_pool;be.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:Lg};var el=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=el;el.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];el.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ce.zpp_pool?
b=new ce:(b=ce.zpp_pool,ce.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=ce.zpp_pool;ce.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},
inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ce.zpp_pool;ce.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:el};var jl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};
g["zpp_nape.util.ZNPList_ZPP_AABBPair"]=jl;jl.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];jl.prototype={inlined_add:function(a){var b;null==de.zpp_pool?b=new de:(b=de.zpp_pool,de.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=de.zpp_pool;de.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},
pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=
de.zpp_pool;de.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:jl};var kl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Edge"]=kl;kl.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];kl.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==vc.zpp_pool?b=new vc:(b=vc.zpp_pool,vc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},
insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==vc.zpp_pool?c=new vc:(c=vc.zpp_pool,vc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=vc.zpp_pool;vc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=vc.zpp_pool;vc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=
!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:kl};var ll=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Component"]=ll;ll.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];ll.prototype={inlined_add:function(a){var b;null==Ge.zpp_pool?b=new Ge:(b=Ge.zpp_pool,Ge.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ge.zpp_pool;Ge.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},__class__:ll};var Xl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=Xl;Xl.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"];Xl.prototype=
{iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Xl};var ol=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=ol;ol.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];ol.prototype={inlined_add:function(a){var b;null==rd.zpp_pool?b=new rd:(b=rd.zpp_pool,rd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=rd.zpp_pool;rd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=rd.zpp_pool;rd.zpp_pool=
a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:ol};var pl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=pl;pl.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];pl.prototype={inlined_add:function(a){var b;null==sd.zpp_pool?b=new sd:(b=sd.zpp_pool,sd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=sd.zpp_pool;sd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=sd.zpp_pool;sd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},__class__:pl};var ck=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=ck;ck.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];ck.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ee.zpp_pool?b=new ee:(b=ee.zpp_pool,ee.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=ee.zpp_pool;ee.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,
this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ee.zpp_pool;ee.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:ck};var dk=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_Listener"]=dk;dk.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];dk.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Pc.zpp_pool?
b=new Pc:(b=Pc.zpp_pool,Pc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Pc.zpp_pool?c=new Pc:(c=Pc.zpp_pool,Pc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;
this.head=a.next;a.elt=null;a.next=Pc.zpp_pool;Pc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=
c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Pc.zpp_pool;Pc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:dk};var nl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=nl;nl.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];nl.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==fe.zpp_pool?b=new fe:(b=fe.zpp_pool,fe.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=fe.zpp_pool;fe.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();
return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=fe.zpp_pool;fe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:nl};var Yl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ConvexResult"]=Yl;Yl.__name__=["zpp_nape","util","ZNPList_ConvexResult"];
Yl.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Yl};var Zl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=Zl;Zl.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];Zl.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Zl};var $l=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};g["zpp_nape.util.ZNPList_RayResult"]=
$l;$l.__name__=["zpp_nape","util","ZNPList_RayResult"];$l.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:$l};var ec=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbType"]=ec;ec.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];ec.prototype={__class__:ec};var Fe=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=Fe;Fe.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];Fe.prototype={__class__:Fe};
var ob=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Shape"]=ob;ob.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];ob.prototype={__class__:ob};var uc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Body"]=uc;uc.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];uc.prototype={__class__:uc};var Yd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Constraint"]=Yd;Yd.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];Yd.prototype={__class__:Yd};var bd=
function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Compound"]=bd;bd.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];bd.prototype={__class__:bd};var Ob=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=Ob;Ob.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];Ob.prototype={__class__:Ob};var be=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=be;be.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];be.prototype=
{__class__:be};var Zd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbSet"]=Zd;Zd.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];Zd.prototype={__class__:Zd};var Hc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Interactor"]=Hc;Hc.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];Hc.prototype={__class__:Hc};var $c=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=$c;$c.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];$c.prototype=
{__class__:$c};var Gc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=Gc;Gc.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];Gc.prototype={__class__:Gc};var ce=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=ce;ce.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];ce.prototype={__class__:ce};var de=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=de;de.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];
de.prototype={__class__:de};var vc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Edge"]=vc;vc.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];vc.prototype={__class__:vc};var Jc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Vec2"]=Jc;Jc.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];Jc.prototype={__class__:Jc};var Ge=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Component"]=Ge;Ge.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"];Ge.prototype=
{__class__:Ge};var am=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=am;am.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];am.prototype={__class__:am};var rd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=rd;rd.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];rd.prototype={__class__:rd};var sd=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=sd;sd.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];
sd.prototype={__class__:sd};var ee=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=ee;ee.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];ee.prototype={__class__:ee};var Pc=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_Listener"]=Pc;Pc.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];Pc.prototype={__class__:Pc};var fe=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=fe;fe.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];
fe.prototype={__class__:fe};var bm=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ConvexResult"]=bm;bm.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];bm.prototype={__class__:bm};var cm=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=cm;cm.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];cm.prototype={__class__:cm};var dm=function(){this.next=this.elt=null};g["zpp_nape.util.ZNPNode_RayResult"]=dm;dm.__name__=["zpp_nape","util","ZNPNode_RayResult"];
dm.prototype={__class__:dm};var Ff=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Se.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};g["zpp_nape.util.ZPP_MixVec2List"]=Ff;Ff.__name__=["zpp_nape","util","ZPP_MixVec2List"];Ff.get=function(a,b){null==b&&(b=!1);var c=new Ff;c.inner=a;c.zpp_inner.immutable=b;return c};Ff.__super__=Se;Ff.prototype=k(Se.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=
0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},
push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:Ff});var Lb=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=
!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Be;this._invalidated=!0};g["zpp_nape.util.ZPP_ConstraintList"]=Lb;Lb.__name__=["zpp_nape","util","ZPP_ConstraintList"];Lb.get=function(a,b){null==b&&(b=!1);var c=new Qk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Lb.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=
null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Lb};var le=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=
this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new $e;this._invalidated=!0};g["zpp_nape.util.ZPP_BodyList"]=le;le.__name__=["zpp_nape","util","ZPP_BodyList"];le.get=function(a,b){null==b&&(b=!1);var c=new Wk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};le.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=
!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:le};var qg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_InteractorList"]=qg;
qg.__name__=["zpp_nape","util","ZPP_InteractorList"];qg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:qg};var we=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;
this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Gf;this._invalidated=!0};g["zpp_nape.util.ZPP_CompoundList"]=we;we.__name__=["zpp_nape","util","ZPP_CompoundList"];we.get=function(a,b){null==b&&(b=!1);var c=new Yk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};we.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=
null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:we};var ve=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new dk;this._invalidated=!0};g["zpp_nape.util.ZPP_ListenerList"]=ve;ve.__name__=["zpp_nape","util","ZPP_ListenerList"];ve.get=function(a,b){null==b&&(b=!1);var c=new Pk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};ve.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=
!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:ve};var ld=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=
!1;this.outer=this.inner=null;this.inner=new Db;this._invalidated=!0};g["zpp_nape.util.ZPP_CbTypeList"]=ld;ld.__name__=["zpp_nape","util","ZPP_CbTypeList"];ld.get=function(a,b){null==b&&(b=!1);var c=new Li;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};ld.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:ld};var sf=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Kg;this._invalidated=
!0};g["zpp_nape.util.ZPP_Vec2List"]=sf;sf.__name__=["zpp_nape","util","ZPP_Vec2List"];sf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:sf};
var kg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_GeomPolyList"]=kg;kg.__name__=["zpp_nape","util","ZPP_GeomPolyList"];kg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:kg};var lg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_RayResultList"]=lg;lg.__name__=["zpp_nape","util","ZPP_RayResultList"];lg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,
this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:lg};var jg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_ConvexResultList"]=jg;jg.__name__=["zpp_nape","util","ZPP_ConvexResultList"];jg.prototype={valmod:function(){this.validate();this.inner.modified&&
(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:jg};var rg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_EdgeList"]=rg;rg.__name__=["zpp_nape","util","ZPP_EdgeList"];
rg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:rg};var Fd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=
this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Pe;this._invalidated=!0};g["zpp_nape.util.ZPP_ShapeList"]=Fd;Fd.__name__=["zpp_nape","util","ZPP_ShapeList"];Fd.get=function(a,b){null==b&&(b=!1);var c=new $k;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Fd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=
!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Fd};var ig=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_InteractionGroupList"]=ig;ig.__name__=["zpp_nape",
"util","ZPP_InteractionGroupList"];ig.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:ig};var Bd=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=
this._invalidated=!1;this.outer=this.inner=null;this.inner=new Lg;this._invalidated=!0};g["zpp_nape.util.ZPP_ArbiterList"]=Bd;Bd.__name__=["zpp_nape","util","ZPP_ArbiterList"];Bd.get=function(a,b){null==b&&(b=!1);var c=new Rk;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Bd.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=
!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:Bd};var hg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};g["zpp_nape.util.ZPP_ContactList"]=hg;hg.__name__=["zpp_nape","util","ZPP_ContactList"];hg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),
this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:hg};var Jg=function(){};g["zpp_nape.util.ZPP_Math"]=Jg;Jg.__name__=["zpp_nape","util","ZPP_Math"];Jg.sqr=function(a){return a*a};var mg=function(){};g["zpp_nape.util.ZPP_PubPool"]=mg;mg.__name__=["zpp_nape","util","ZPP_PubPool"];var Ka=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=
this.parent=null};g["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=Ka;Ka.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];Ka.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=Ka.zpp_pool;Ka.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=
a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=
f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;
b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Ka};var tc=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};g["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=tc;tc.__name__=["zpp_nape",
"util","ZPP_Set_ZPP_CbSet"];tc.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=
c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==
d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=tc.zpp_pool;tc.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=
0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=
b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;
null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;null==tc.zpp_pool?b=new tc:(b=tc.zpp_pool,tc.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=
this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:tc};var cb,lm=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;g.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=
g.String=String;String.__name__=["String"];g.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=g.Date=Date;Date.__name__=["Date"];var mm=g.Int={__name__:["Int"]},nm=g.Dynamic={__name__:["Dynamic"]},gm=g.Float=Number;gm.__name__=["Float"];var hm=g.Bool=Boolean;hm.__ename__=["Bool"];var om=g.Class={__name__:["Class"]},pm={};S.Element="element";S.PCData="pcdata";S.CData="cdata";S.Comment="comment";S.DocType="doctype";S.ProcessingInstruction="processingInstruction";S.Document="document";cd.instance=
new cd;tb.DISPATCHING_SENTINEL=new df(null,null);u.root=new o;u.uncaughtError=new T;u.hidden=new Na(!1);u.volume=new Q(1);u._platform=cd.instance;u._calledInit=!1;Qa.__meta__={obj:{assets:[{ui_title:[{bytes:16913,md5:"7b9849457a623781908ac902f822426c",name:"ball.png"},{bytes:649729,md5:"c9ce9e60fb15d377e3871c8062acc572",name:"bg.jpg"},{bytes:43525,md5:"112cf98bb1480407065fe92216a1b6e7",name:"glow.png"},{bytes:13248,md5:"33e9616e2b54ec8dd85858c085b6c66f",name:"logo.png"},{bytes:177354,md5:"ce18fa31dc9606ad6d2e1459883de5cd",
name:"spongebob.png"}],mike_batter:[{bytes:12837,md5:"4401e94b8810f5e63d9e8a1207ca79be",name:"mike_batter0.json"},{bytes:558422,md5:"fd08d8193df0265c9a08127ab4737629",name:"mike_batter0.png"},{bytes:8575,md5:"3a69bc311804be746e34d7e20f6b10d3",name:"mike_batter1.json"},{bytes:433495,md5:"53d63969ad17af9f74234f50dca38c6f",name:"mike_batter1.png"},{bytes:9733,md5:"62bd3534984c1ef7d041432becf78de0",name:"mike_batter_meta.json"}],asami_batter:[{bytes:7929,md5:"47774b1df66b635ccc60f7be5244459d",name:"asami_batter0.json"},
{bytes:429236,md5:"b4c7305a5a8a4e37d35363eca230b962",name:"asami_batter0.png"},{bytes:8577,md5:"3df174535337e4d29fcf6faeb1c3837f",name:"asami_batter1.json"},{bytes:470152,md5:"255ecc4da1a8056cdd8a52db8f5de44e",name:"asami_batter1.png"},{bytes:11333,md5:"d6787c7fe7be17962d93549956f6b4b5",name:"asami_batter_meta.json"}],hud_anims:[{bytes:2316,md5:"e7cfe4c7f6387ad4e5968792d7c8812b",name:"hud_anims.json"},{bytes:52475,md5:"ca985f334d4ec31e433e9a4665a1e3c1",name:"hud_anims.png"}],ui_stats:[{bytes:90104,
md5:"07e7512d2ac3937470ca6f80884f9164",name:"bg.jpg"},{bytes:26482,md5:"3279cf333dc98302068add66bb92d9a7",name:"diamond.png"}],fee_batter:[{bytes:7708,md5:"c2c531aacce4a80874232922484f5877",name:"fee_batter0.json"},{bytes:279278,md5:"a72c3898ceca5d9a2958f389bb0bec68",name:"fee_batter0.png"},{bytes:6243,md5:"d7e2d454d0d36de07205b68eac5e24d5",name:"fee_batter1.json"},{bytes:240425,md5:"9285920f734db7180335657543e8f8be",name:"fee_batter1.png"},{bytes:8076,md5:"a2d3d7f4973db44b7eb6aace18384514",name:"fee_batter_meta.json"}],
patrick_pitcher:[{bytes:5207,md5:"18008f5a7cf9bd2def2823faa08e0ea4",name:"patrick_pitcher0.json"},{bytes:136742,md5:"edbe389f6f7c371a6fc527fd2d4ca795",name:"patrick_pitcher0.png"},{bytes:145,md5:"ac42386fc9265c7453856384b64e2b7b",name:"patrick_pitcher_meta.json"}],ui_loading:[{bytes:1838,md5:"53a5f5ef18fb130871abc2f94919c5f3",name:"bar_loading.png"},{bytes:75696,md5:"8c3892eed6d0db57a8af6ad783c12ed4",name:"bg.jpg"},{bytes:1175,md5:"1fa2ab9036cc916c8c240cb9dd9a9f2c",name:"loading/loading.json"},{bytes:24018,
md5:"d8d6b557d3bc3e89e92a30705f12c04b",name:"loading/loading.png"},{bytes:1357,md5:"68281056ea90e87e9b5cfa9a83c0c44b",name:"loading.fnt"},{bytes:4725,md5:"3bbe150c7647bd8fa65289362cd8aaf2",name:"loading.png"}],buhdeuce_batter:[{bytes:15086,md5:"fa4c6490490162e961f0a3e88b4dfaa7",name:"buhdeuce_batter0.json"},{bytes:371788,md5:"5e10f0d004958db753e7597e39a58bbd",name:"buhdeuce_batter0.png"},{bytes:10792,md5:"13ed11bb6d053bade586ae98e53c6438",name:"buhdeuce_batter_meta.json"}],team_tmnt_catcher:[{bytes:5566,
md5:"7fa46c74c1cae4e6cbe5400d1636888a",name:"tmnt_catcher.json"},{bytes:249191,md5:"871243b882223f3016188217f915b4d1",name:"tmnt_catcher.png"}],team_sc_catcher:[{bytes:7088,md5:"52b33b3e8c633fcdd79eca9db36ffacf",name:"sc_catcher0.json"},{bytes:572800,md5:"cef1a6055b96f4ba19210934db1e3c4d",name:"sc_catcher0.png"},{bytes:1179,md5:"f7f21acf88d6a0ca5d38674edbdd8a7c",name:"sc_catcher1.json"},{bytes:71375,md5:"b02a73859d14fb99727c13f446ac85c0",name:"sc_catcher1.png"}],foo_batter:[{bytes:12688,md5:"350e084f47ece76ea11af44199e432ac",
name:"foo_batter0.json"},{bytes:379597,md5:"32aa840535b13752d8e6e1c85656c3e2",name:"foo_batter0.png"},{bytes:11047,md5:"0c3b2c7d550747b9deae1cb671655d81",name:"foo_batter1.json"},{bytes:341283,md5:"345d44d3f325bc2311987ad2691b7328",name:"foo_batter1.png"},{bytes:16724,md5:"b8a8a30f3e1f6d45be6a82eaa3d6d24b",name:"foo_batter_meta.json"}],leo_pitcher:[{bytes:5886,md5:"f01aaa556706326378f55dad8b3d3b5f",name:"leo_pitcher0.json"},{bytes:245906,md5:"318e9151cefd8ddc3efbee1e3f207555",name:"leo_pitcher0.png"},
{bytes:154,md5:"3e0bfd1ef3618307775ca8588996e8d2",name:"leo_pitcher_meta.json"}],levels:[{bytes:63788,md5:"16cb3ab1abeff2e06c9d6f76402ded2a",name:"derby1.json"},{bytes:67402,md5:"36a2c76b3fa7624398e23b711083eae5",name:"derby2.json"},{bytes:66704,md5:"e258a99a51865e430cca38aba7406e9e",name:"derby3.json"},{bytes:64635,md5:"a2716da3289f97ffb6fccfdf2b1cb80f",name:"derby4.json"},{bytes:91957,md5:"fec0072b69f6a14a1f3716f391cff122",name:"derby5.json"},{bytes:7178,md5:"cf0c086c798f3d5c3f4ebc8b02564f7b",name:"level1.json"},
{bytes:10475,md5:"dcffe8d3d03d0492dd13d538bebc3ee9",name:"level2.json"},{bytes:12768,md5:"835d6f9c2af1318b0b50b6ff77b98121",name:"level3.json"},{bytes:10832,md5:"044a55a25634bde6134b0b6f63c39a91",name:"level4.json"},{bytes:12443,md5:"5cb95a4dcc9c52012bd859d7a5a00484",name:"level5.json"},{bytes:11279,md5:"fbe96e384c58868824bd368a3326a17e",name:"level6.json"},{bytes:9564,md5:"9cc9310c57c8225f203cd1e13d3174d4",name:"level7.json"},{bytes:12794,md5:"f79a4ff977574b1d490bf18cab44af60",name:"level8.json"},
{bytes:11824,md5:"3abd60c671f89e7acafacd05302488a6",name:"level9.json"}],asami_pitcher:[{bytes:5439,md5:"d674073742270c9a26e6e7be68f92ca4",name:"asami_pitcher0.json"},{bytes:251336,md5:"24ee3155e9cac87a88da2c7730eb697a",name:"asami_pitcher0.png"},{bytes:139,md5:"e9a03b758b7368c73fad700b5ff446b1",name:"asami_pitcher_meta.json"}],foo_pitcher:[{bytes:5415,md5:"a5964ae9d31fc662b446cb6b64dc0361",name:"foo_pitcher0.json"},{bytes:209838,md5:"ef9b1b08648da69c8ef05eea1f64ef5c",name:"foo_pitcher0.png"},{bytes:133,
md5:"7aad51e894e44a5ffa2990893cece641",name:"foo_pitcher_meta.json"}],spongebob_pitcher:[{bytes:4325,md5:"f2e9e1623e5f5012df36475df03b5f1e",name:"spongebob_pitcher0.json"},{bytes:123641,md5:"70e213566f1e2528f978fc0e5f1af519",name:"spongebob_pitcher0.png"},{bytes:121,md5:"894cb1087bb04b6fe0547f6312d52e6b",name:"spongebob_pitcher_meta.json"}],ui_level:[{bytes:2011,md5:"72914cf48ae6443d8362eb295b47c979",name:"back.png"},{bytes:1589,md5:"214d27c7e5cbabc664fed21ac9c89db4",name:"base_empty.png"},{bytes:2430,
md5:"a430b7289067dad7203ab2b36e45006b",name:"base_full.png"},{bytes:93175,md5:"352cd7428d2eb25621dce963da27ae1f",name:"bg.jpg"},{bytes:1734,md5:"f4882cd4f292cf2828cf15ae05293e3c",name:"home_empty.png"},{bytes:2724,md5:"a005ae5ebdf780ffd78ca7f16a772679",name:"home_full.png"},{bytes:10776,md5:"1c5a8a49f8f1fed9ee8c10530820abab",name:"level1.png"},{bytes:10611,md5:"7a03e3a12d1a97a68e3c0f14dad6b94a",name:"level1_disabled.png"},{bytes:11053,md5:"784712a82b3db68615752a4241e5d436",name:"level1_selected.png"},
{bytes:11608,md5:"fc5d96a6369813a60e7ef32ec1eee807",name:"level2.png"},{bytes:11069,md5:"7c50c8e4db470dd9cd7afda0d34b618d",name:"level2_disabled.png"},{bytes:10819,md5:"620dd777b2e2e59c44b400ac7fbbc182",name:"level2_selected.png"},{bytes:11382,md5:"7956954ed5379d6978e420958eda80f5",name:"level3.png"},{bytes:11258,md5:"aae82a329a58d9fc008af8742d65dd75",name:"level3_disabled.png"},{bytes:11214,md5:"8a2f6cbb70c2fe245de56a99cbd8cdce",name:"level3_selected.png"},{bytes:11565,md5:"0dcb57cf19731a51b7004f0b89f7884e",
name:"level4.png"},{bytes:11028,md5:"eb9cd3b224de96cdb39df8512fcac5b2",name:"level4_disabled.png"},{bytes:11219,md5:"3176b28ef4148bf529d218a8d6aa49df",name:"level4_selected.png"},{bytes:11225,md5:"8d3672dc0f86447a87bd0e9a371d78a7",name:"level5.png"},{bytes:11209,md5:"e38282a1f81dbede1b01504d79af40d3",name:"level5_disabled.png"},{bytes:11164,md5:"9ba9f6d873073ad83a5dfa805e0571ba",name:"level5_selected.png"},{bytes:11597,md5:"9cded19f6493f50b55955e29639930e4",name:"level6.png"},{bytes:10431,md5:"0e78985a98fc942219af74b45a760251",
name:"level6_disabled.png"},{bytes:11330,md5:"0373996b0650683bfca79cf47cfa6cc0",name:"level6_selected.png"},{bytes:11814,md5:"7b4d71dc40ace96c747e73dbbc105ff7",name:"level7.png"},{bytes:11360,md5:"e55e4442d571112da73410f3c0d3bc8d",name:"level7_disabled.png"},{bytes:11016,md5:"f3fb3d8a7d3b7e737ff48fef65f34b75",name:"level8.png"},{bytes:10622,md5:"edff947063f35f43311be7d5bf9ca05e",name:"level8_disabled.png"},{bytes:11012,md5:"730ef218b90c012df57740425166468d",name:"level9.png"},{bytes:10773,md5:"7cc67423d828bd4b71b281d6571965dd",
name:"level9_disabled.png"},{bytes:18686,md5:"85ba8d0d1c62f644b91a3873b30b15c5",name:"mask_left.png"},{bytes:21752,md5:"30418ea59d9905203be0611a17dd1001",name:"mask_right.png"},{bytes:2013,md5:"eba5524153a0f978cb6ffd09964c0e64",name:"next.png"}],donnie_batter:[{bytes:11741,md5:"06540538b1d0ac3a726b860a6492e115",name:"donnie_batter0.json"},{bytes:540297,md5:"a3a4619e67a2b08ac9a7f9b52e43caf2",name:"donnie_batter0.png"},{bytes:8806,md5:"1552b08eb218e41cc387140f50f244ef",name:"donnie_batter1.json"},{bytes:479410,
md5:"1f4bedb2cbe7625a17d8af82856aa639",name:"donnie_batter1.png"},{bytes:9813,md5:"1e5fd04df1c490519636c596ec201378",name:"donnie_batter_meta.json"}],actors:[{bytes:4538,md5:"8730d53d3b5d4aa2c97ec1cca383289d",name:"balls_batters.json"},{bytes:1152,md5:"aa8861ffebcd924ddd3e33ed0a67b9cb",name:"balls_pitchers.json"},{bytes:5157,md5:"7d134a6521a602f030f65da55a224ab5",name:"batters.json"},{bytes:2039,md5:"78f5bbf04a5ce644cd13ad845b8b8f63",name:"catchers.json"},{bytes:3089,md5:"06571feda4df372b0598bf86ff73e03f",
name:"decors.json"},{bytes:7032,md5:"f4991608955e220ebbd13ad04784d306",name:"decors_physic.json"},{bytes:1531,md5:"638864849ef3da52bf1dd93d75f0bdc8",name:"fx.json"},{bytes:1901,md5:"718cf23bc8f13533722174bf5938d7c2",name:"interactives.json"},{bytes:1576,md5:"1dcf723f2c0b93bc6dbc9fd3e85d83c2",name:"pickup.json"},{bytes:4137,md5:"8490a11cb8dfe2ea1dcd9aafb7b83579",name:"pitchers.json"},{bytes:769,md5:"e0bc1eecb02157dd854e580b268ca2f2",name:"utils.json"}],spongebob_batter:[{bytes:10423,md5:"efa1d043e5763e78318567f7e72a9691",
name:"spongebob_batter0.json"},{bytes:372792,md5:"7dcb8115ddc6d260462b3b6c355de78d",name:"spongebob_batter0.png"},{bytes:7087,md5:"becda60731003308c84517d25776a1a3",name:"spongebob_batter1.json"},{bytes:430777,md5:"a3d6e9e342916ea8861bfdd2163a19df",name:"spongebob_batter1.png"},{bytes:9738,md5:"65cce703bcc198b8df06f592eae98419",name:"spongebob_batter_meta.json"}],team_hb_catcher:[{bytes:4719,md5:"9d929907b8d2d8439355f67a0d89a8a1",name:"hb_catcher.json"},{bytes:184880,md5:"fffcfcd1dc4a652bee4d187d42234d0e",
name:"hb_catcher.png"}],korra_pitcher:[{bytes:7536,md5:"9280518cd637d4a0c7570841789e45cd",name:"korra_pitcher0.json"},{bytes:184762,md5:"3014a8d69365b8ffba459d0cf86c595d",name:"korra_pitcher0.png"},{bytes:154,md5:"99acedc72b2b9e9bb0a33bb3265f13cb",name:"korra_pitcher_meta.json"}],rocket_explosion:[{bytes:3815,md5:"7578e0e22995b3c97c781ea0b9b3e88f",name:"rocket_explosion.json"},{bytes:287225,md5:"46a4c2bb54e597e5916e76a9af21b777",name:"rocket_explosion.png"}],buhdeuce_pitcher:[{bytes:5162,md5:"aef2d0be3c58c9803f18d844d7863e7a",
name:"buhdeuce_pitcher0.json"},{bytes:102990,md5:"7f27ef2ff21aa1136ae7ab5e1d8c379d",name:"buhdeuce_pitcher0.png"},{bytes:136,md5:"5eda3c6c45efa1246b98ee9206a0903b",name:"buhdeuce_pitcher_meta.json"}],raph_batter:[{bytes:9896,md5:"b52076d82239c78ed303382541d88e4c",name:"raph_batter0.json"},{bytes:489197,md5:"b74d3c348118a306d882b01f44f0eddd",name:"raph_batter0.png"},{bytes:11538,md5:"fd6663106bbcf67e27dd37341970508b",name:"raph_batter1.json"},{bytes:534899,md5:"a0f660f6ad06ca1b304859b3b58a2e2f",name:"raph_batter1.png"},
{bytes:10600,md5:"3528a688977997ded2b05f0f390f4641",name:"raph_batter_meta.json"}],alvin_pitcher:[{bytes:6192,md5:"1b2ea3814ac9a82cae079db502711437",name:"alvin_pitcher0.json"},{bytes:215838,md5:"076895362bfd6408bf1edf04062d73f2",name:"alvin_pitcher0.png"},{bytes:145,md5:"ac42386fc9265c7453856384b64e2b7b",name:"alvin_pitcher_meta.json"}],ui_derby:[{bytes:101592,md5:"8d7d05a4acba9d542d0bcb73ede609e0",name:"bg.jpg"}],ui_character:[{bytes:336141,md5:"814af2f42ffd3d3797bf5fba33c6c533",name:"bg.jpg"},
{bytes:456,md5:"d96053a8a270e622e9bd69b3cf24005e",name:"stat_empty.png"},{bytes:669,md5:"5ae92f6d76bdb355c2afa6e596111cc0",name:"stat_filled.png"}],fonts:[{bytes:16497,md5:"e1e5f8025619e3700072f23e8d2236be",name:"callout.fnt"},{bytes:182236,md5:"5a725474702595a0e72c8ae31ae2f790",name:"callout.png"},{bytes:16077,md5:"0e315aa52c4fa7712bac13ce617fd31d",name:"lobster_black.fnt"},{bytes:41230,md5:"1d7ddf1d36e17f5cfe4c11d425fe5ae6",name:"lobster_black.png"},{bytes:22939,md5:"f6f610d045efd4df818fe5d000491a71",
name:"lobster_blue.fnt"},{bytes:34378,md5:"dae056e390e975c458c41ee521568dbd",name:"lobster_blue.png"},{bytes:27828,md5:"cc22edea28dbe9ddf3b685f0052bf5ea",name:"lobster_small_black.fnt"},{bytes:27686,md5:"c1634d8cc9cb22bd3ad1bdf3e36c3392",name:"lobster_small_black.png"},{bytes:16190,md5:"45f3471948be38662d1a9ddc30565ce5",name:"lobster_white.fnt"},{bytes:29598,md5:"0dd9aac028a04bf331673063a58c44bf",name:"lobster_white.png"},{bytes:28062,md5:"32a9401867a2c56d28ca66636752d522",name:"lobster_white_shadow.fnt"},
{bytes:79122,md5:"027b2fa48eda605bb8d189924e452b79",name:"lobster_white_shadow.png"},{bytes:1189,md5:"0119b02e50652d16e66b8dc992aee4b2",name:"number_blue.fnt"},{bytes:1368,md5:"2f4eea8c2304038ba32c582846ca6949",name:"number_blue.png"},{bytes:3373,md5:"0bb03100037e87f8732a9d9da624e83e",name:"score.fnt"},{bytes:1380,md5:"0562e6cc16e8b2c19986cbb1f0fc9abb",name:"score.png"},{bytes:3485,md5:"5efab13f62d0f4c6a9d03556bd12b6a9",name:"score_blue.fnt"},{bytes:5331,md5:"79cf0dcef14ad5f5bdc2503334b46c28",name:"score_blue.png"},
{bytes:3489,md5:"72d74d5cbf48b5ba47ea87b726b2d507",name:"score_orange.fnt"},{bytes:5332,md5:"eb61c95258db74b7279aad2d1c5f561a",name:"score_orange.png"},{bytes:3489,md5:"b3982698c861982678b09978614c965e",name:"score_purple.fnt"},{bytes:5332,md5:"c45334f61228a84ce60c559101b7e2c6",name:"score_purple.png"},{bytes:31082,md5:"aea8b071263486955d1328f1a1678fcc",name:"small_grey.fnt"},{bytes:5432,md5:"fded83c55a8023862daa89861239607c",name:"small_grey.png"},{bytes:31170,md5:"4eb30531046b753a29173cb7183a807a",
name:"small_purple.fnt"},{bytes:6955,md5:"ffd56311699b713808258ced1cb8c39a",name:"small_purple.png"},{bytes:31230,md5:"e03e135e9ff8eddd871daf41718ef19f",name:"small_white.fnt"},{bytes:13809,md5:"26bbd7e3d2658b5acd296b8549b1df26",name:"small_white.png"},{bytes:30211,md5:"e7434e016ea6e5c4497ee81033b7a0d0",name:"xxl_white.fnt"},{bytes:77344,md5:"8adb8db9d20e6fb9b6b6d43f45a06262",name:"xxl_white.png"}],sanjay_pitcher:[{bytes:6101,md5:"c1a2550d512c285416d43a3b72a68872",name:"sanjay_pitcher0.json"},{bytes:163098,
md5:"834a08ea655e02a2d6c714ec5d6bb9ec",name:"sanjay_pitcher0.png"},{bytes:145,md5:"97f560b0f0273db64403ebd03b647ce8",name:"sanjay_pitcher_meta.json"}],sound:[{bytes:7412,md5:"a2d20650458642f6165b44a24335af34",name:"alvin_supermove.mp3"},{bytes:10047,md5:"c53408cc5867505ea08f92c15eed31fe",name:"alvin_supermove.ogg"},{bytes:13247,md5:"dbd09b8d962abe042cc2256f70a05b67",name:"asami_supermove.mp3"},{bytes:16549,md5:"71b2573dec8634eb6b003cec771d45e8",name:"asami_supermove.ogg"},{bytes:8343,md5:"211412aa20d552c74c848b8b37726585",
name:"ball_explosion.mp3"},{bytes:9488,md5:"07a7d0adca5ba05e4c5ab8c7fec96871",name:"ball_explosion.ogg"},{bytes:3426,md5:"5ea3d09d204df3fa699b979f71f5de24",name:"bounce.mp3"},{bytes:6068,md5:"9a1a5b3407c20613fdb82bc8a1e8ebdb",name:"bounce.ogg"},{bytes:4035,md5:"1adca7509a4a88fc66b11d3d55ba2ec9",name:"bounce_slime.mp3"},{bytes:7399,md5:"b4f439b62504dc1509d61e49d0e50d77",name:"bounce_slime.ogg"},{bytes:4262,md5:"05677a971d2f1ee73561ac7bb2f17df3",name:"break_wood.mp3"},{bytes:7347,md5:"4da28cbb21e41248e0b889c0589d0c5e",
name:"break_wood.ogg"},{bytes:12196,md5:"39f62f49a01a3717b11abf04bede6532",name:"buhdeuce_supermove.mp3"},{bytes:16726,md5:"3540816906164f921ae56adbfaa175cf",name:"buhdeuce_supermove.ogg"},{bytes:3998,md5:"43e849985fe03c9a7524ccf9c6db573a",name:"bump_metal.mp3"},{bytes:6371,md5:"7a15e95d858868d2e2af71a2ba110dcf",name:"bump_metal.ogg"},{bytes:1710,md5:"408f5f72a53c06255e72f7b991db6418",name:"bump_wood.mp3"},{bytes:4823,md5:"540b1e6c7d35d8d3a4f4066cf4762412",name:"bump_wood.ogg"},{bytes:3759,md5:"c18501ac21a8acce21515044ac59774d",
name:"catch.mp3"},{bytes:5954,md5:"bba985a014883bce54d459113a3972dd",name:"catch.ogg"},{bytes:10148,md5:"a3a0f00ba05239e768b054fe12e49dad",name:"craig_supermove.mp3"},{bytes:13618,md5:"41109942330ce6a4b237238d0dff11f6",name:"craig_supermove.ogg"},{bytes:103632,md5:"13c508dec113d21dc60ace0ac48e42ac",name:"crowd_bkgd.mp3"},{bytes:123298,md5:"da236978d8c1f7df8479a776b36edcbc",name:"crowd_bkgd.ogg"},{bytes:11226,md5:"52c1762b35bbb68530b611143561b84a",name:"crowd_boo.mp3"},{bytes:15247,md5:"f8986d0642bf35757a89a9f84768e18b",
name:"crowd_boo.ogg"},{bytes:12137,md5:"0a975439c96ae18f835245e5aa460a88",name:"crowd_cheer.mp3"},{bytes:16679,md5:"6dc4c30a516b817ca22398a37590219b",name:"crowd_cheer.ogg"},{bytes:12774,md5:"f48c57bc9a2097506811d35b0d5a803e",name:"donnie_supermove.mp3"},{bytes:16101,md5:"ee5b1031cbf4c84221d3451874f9e9c1",name:"donnie_supermove.ogg"},{bytes:10368,md5:"51260d18056edf25f88759a19cdff60f",name:"fee_supermove.mp3"},{bytes:13716,md5:"8ad8bcc77695a3a9c1a2676cb6afacf7",name:"fee_supermove.ogg"},{bytes:16418,
md5:"ce960dd44172a3e917ce3e431f178e7b",name:"foo_supermove.mp3"},{bytes:20057,md5:"6f10756d55d1cae8e318832aac8092e5",name:"foo_supermove.ogg"},{bytes:594183,md5:"af2456138b046e6d58105f23e0c49c60",name:"gameplay.mp3"},{bytes:699648,md5:"726186d504bebfc4d4d801fc58d77488",name:"gameplay.ogg"},{bytes:2257,md5:"a2bf76a93bfe07678d7e9dd5253545ef",name:"hit_1.mp3"},{bytes:5507,md5:"dd38a63e48c47704574e2956ba952e1a",name:"hit_1.ogg"},{bytes:2413,md5:"daa7a8feabdb655aa3378791b613e926",name:"hit_2.mp3"},{bytes:5750,
md5:"50aebf9028d32e540005c820209ef103",name:"hit_2.ogg"},{bytes:10628,md5:"4a44d45e90a37690f062779857acc013",name:"hit_3.mp3"},{bytes:11614,md5:"6942acbb5601501e250eb391bb6532e6",name:"hit_3.ogg"},{bytes:15801,md5:"015d9d3f26ee8b36596a6b876d4e7e8e",name:"homerun.mp3"},{bytes:22516,md5:"ff76cb9c11592c811369b252692c7c97",name:"homerun.ogg"},{bytes:22069,md5:"b64f19d92b6c95bf445dd3bdde1d6dff",name:"idle_crowd_1.mp3"},{bytes:22234,md5:"01d1902d58525e6584ca91a16c6b33f6",name:"idle_crowd_1.ogg"},{bytes:16088,
md5:"a63411a4b6eb5c24450b643d5277b9a0",name:"idle_crowd_2.mp3"},{bytes:22037,md5:"2cdb31209da772d49b97fa503302d7d8",name:"idle_crowd_2.ogg"},{bytes:47213,md5:"00418895d4a7acde599adc20a634f143",name:"idle_crowd_3.mp3"},{bytes:55383,md5:"bf3d1e9d901c90db96bf99673ac38fc0",name:"idle_crowd_3.ogg"},{bytes:10857,md5:"0e7336a2dba6020ddc4badaa9ff0c4e0",name:"korra_supermove.mp3"},{bytes:14889,md5:"2ab4a5f37b785b9a3b90f6fae5f03097",name:"korra_supermove.ogg"},{bytes:7724,md5:"c45f681a840f97fe67cd099bd5954209",
name:"leo_supermove.mp3"},{bytes:11193,md5:"7a8119a42ac7b2e9e28accb5e1c4160b",name:"leo_supermove.ogg"},{bytes:3010,md5:"5f6a41ff948e0cac9a6bcdd4d4cb3e30",name:"lose_out.mp3"},{bytes:6165,md5:"5acf6d8386dc79600ddc6aea81935c63",name:"lose_out.ogg"},{bytes:12892,md5:"5fd4a379cf17e24c459854c99ccd6e66",name:"magnet.mp3"},{bytes:16065,md5:"ef6b44d6a1b66d88b4b78b4c589c8ec2",name:"magnet.ogg"},{bytes:258161,md5:"4e9765a038b589225ef2b623c2ef65ca",name:"menu.mp3"},{bytes:291455,md5:"dcd7504e7177e2cf1353ede1aa20e13e",
name:"menu.ogg"},{bytes:10816,md5:"d056f9930af027a8f5aeeb1c99216422",name:"mike_supermove.mp3"},{bytes:14048,md5:"41529ce7186520fbabb1f01b3bccb780",name:"mike_supermove.ogg"},{bytes:11542,md5:"7a8eaf23d0dfcb037e6b7648713e5951",name:"moon_explosion.mp3"},{bytes:17100,md5:"c0a183e7825078834b57a4244bf7083c",name:"moon_explosion.ogg"},{bytes:5663,md5:"46b35d82a900595334612557c5a0a205",name:"moon_fall.mp3"},{bytes:5749,md5:"85783185840cc7a17f90b3ed2ba63182",name:"moon_fall.ogg"},{bytes:25069,md5:"179f5fe3816fae2c32fe84e85ab3db67",
name:"patrick_supermove.mp3"},{bytes:28152,md5:"6f5d7636235221bbf72a9ab877964c65",name:"patrick_supermove.ogg"},{bytes:2438,md5:"ffea3d3ad2e5eaea419f04b4100c8113",name:"pickup_1.mp3"},{bytes:5411,md5:"45884c9a49701b05607369a034d3ceff",name:"pickup_1.ogg"},{bytes:2490,md5:"cdddc8a0d3c46f8e64675db51d48b892",name:"pickup_2.mp3"},{bytes:5457,md5:"cce8f0986fecc6af0cc19ea74213a602",name:"pickup_2.ogg"},{bytes:2724,md5:"57a316e29a4075f75c3ecb9f8a48e6b3",name:"pickup_3.mp3"},{bytes:5614,md5:"35137a45708956e0f59fea548732082c",
name:"pickup_3.ogg"},{bytes:1372,md5:"15ebf3f1e311bf0862034ec532c8516c",name:"pickup_ball.mp3"},{bytes:4310,md5:"82c1940810f195ba982e66739b1a104b",name:"pickup_ball.ogg"},{bytes:8288,md5:"41b0ff5b5aa84947a6053d527bf2e67b",name:"pickup_big.mp3"},{bytes:9606,md5:"16e6f63e808133f901efe78b8a6764a6",name:"pickup_big.ogg"},{bytes:4361,md5:"9cbb27c626b9b951e2fb5bc5687c60b6",name:"pickup_strength.mp3"},{bytes:7877,md5:"94e2ce1c45d1589307a3d2ca0a251c31",name:"pickup_strength.ogg"},{bytes:3139,md5:"07ae654a082f6c57e77e843a36b12819",
name:"pitch.mp3"},{bytes:6736,md5:"3a5703b21d365cd8927764563cf415c7",name:"pitch.ogg"},{bytes:5663,md5:"f8b6b0508f80c4b1be25928c07d15498",name:"play_ball.mp3"},{bytes:8282,md5:"52d014175a2e64e9e351a9e0be94a7e4",name:"play_ball.ogg"},{bytes:8509,md5:"3d96bff077b16ad10cc9526befdac209",name:"raph_supermove.mp3"},{bytes:12165,md5:"701e60a93585cac0bea98807e7f51e4e",name:"raph_supermove.ogg"},{bytes:133,md5:"5cd49cddadedf7331f18954ea459ca13",name:"README.md"},{bytes:15109,md5:"a310a951ecf1cb22dd1341e7b7e40398",
name:"rocket_explosion.mp3"},{bytes:22791,md5:"901434248fc0c595e15892f8e8db0c5a",name:"rocket_explosion.ogg"},{bytes:9223,md5:"939910325310691183f5ccc2ed1accaf",name:"rocket_launch.mp3"},{bytes:12040,md5:"c4045fc60b082206a13dbf04a2356087",name:"rocket_launch.ogg"},{bytes:9277,md5:"a78842ddee258561a4b2fffa61293664",name:"sanjay_supermove.mp3"},{bytes:12768,md5:"beb301ad39adbdab1b9db3810f8dc491",name:"sanjay_supermove.ogg"},{bytes:6859,md5:"83593c8c22059e36db6b70aed4211099",name:"score_loop.mp3"},{bytes:9945,
md5:"ed35dc7174b9c141db98f370f5982545",name:"score_loop.ogg"},{bytes:780,md5:"0b619d91a6ca103ad3f790fc26fffe48",name:"silence.mp3"},{bytes:3585,md5:"aeae3fe8ffe85b5799d8b1dad7244e30",name:"silence.ogg"},{bytes:3790,md5:"d28407afc756424b7a21bfd2fc4dcf9e",name:"split_ball.mp3"},{bytes:7140,md5:"62c5aef2ff2c97c4b2227b16036ebf55",name:"split_ball.ogg"},{bytes:9988,md5:"1c4fb4b2d38166082b14ac56463990fb",name:"spongebob_supermove.mp3"},{bytes:13101,md5:"84f68ce0341d5e34dbfe6c2df2173d3e",name:"spongebob_supermove.ogg"},
{bytes:19001,md5:"cbe7176c72b80659c293323ffd9890e0",name:"sting_fail.mp3"},{bytes:19161,md5:"51a4b51acfc832c259ff52d4fc6766c8",name:"sting_fail.ogg"},{bytes:27090,md5:"9bca3d22c0e77e99a10ba7e30a28eeb9",name:"sting_win.mp3"},{bytes:33136,md5:"77c4310e1b5f4e9b8cf401e3c4a95452",name:"sting_win.ogg"},{bytes:6546,md5:"bcd288a3a196c60795c3582450085e10",name:"strike.mp3"},{bytes:9675,md5:"8a989921e4086ecc55ec43f6f54e40b0",name:"strike.ogg"},{bytes:15898,md5:"af55429afbb29318a985b8c3d0d36644",name:"super_activation.mp3"},
{bytes:16887,md5:"75f29fcc7c509b74bd80bd80d95ecc2e",name:"super_activation.ogg"},{bytes:7192,md5:"110da73d82e4574e18fad0402958a9d6",name:"swaysway_supermove.mp3"},{bytes:9601,md5:"9d2f76f5ce5d152ad1766697ae369320",name:"swaysway_supermove.ogg"},{bytes:1659,md5:"977e9a68aa56cc18541fca83167566fc",name:"swoosh_0.mp3"},{bytes:4787,md5:"8cda74187c2eacd845dfbeaaa0fcfa5e",name:"swoosh_0.ogg"},{bytes:1892,md5:"c87c12d6243d088dc2ec5ca361f312ef",name:"swoosh_1.mp3"},{bytes:5237,md5:"e2337ce7653d3eda8f2428b39d6fcbea",
name:"swoosh_1.ogg"},{bytes:3297,md5:"7bbc1635335beb998ee13623fc6fc3bd",name:"swoosh_2.mp3"},{bytes:6583,md5:"43bc1e6f6f363f40ed7f15e32497e62d",name:"swoosh_2.ogg"},{bytes:3193,md5:"ce600adb4730ba3d9bf607d4673d8a3d",name:"swoosh_3.mp3"},{bytes:6812,md5:"86fd035a45d67029bd7a86eec6f3d06e",name:"swoosh_3.ogg"},{bytes:10447,md5:"fc6da060e157e6059bae993842a9c130",name:"toilet.mp3"},{bytes:15172,md5:"29db8ab2df7e7bc44fb92652b8bcc8b2",name:"toilet.ogg"},{bytes:4622,md5:"70b7406c67779acf9d27b680455c6746",
name:"win_star.mp3"},{bytes:6013,md5:"78bbf2c39bab0ae0f1d0f11b23e68f53",name:"win_star.ogg"}],ui_nickpopup:[{bytes:274643,md5:"31756936cb3276a3cde859d048cccab6",name:"bg.png"},{bytes:1999,md5:"fc304d2e056989b3372bcb21beb53007",name:"btn_apple.png"},{bytes:2236,md5:"873cc5a0dd4d605251ed5cc371b8cfc6",name:"btn_close.png"},{bytes:2292,md5:"2e09d2c37d76603af961318df084dcba",name:"btn_close_pressed.png"},{bytes:2383,md5:"62a9083747ad78d42c5a0efc48ce71c3",name:"btn_google.png"},{bytes:2038,md5:"9b227c08581537f761c8d64e18a1c0ae",
name:"btn_kindle.png"}],ui:[{bytes:2507,md5:"4db4ac5e5c6a269704ebbe3d2147e0a4",name:"btn_character.png"},{bytes:2522,md5:"2584ff3bb4ca6d6beda9749760ff2360",name:"btn_character_pressed.png"},{bytes:2628,md5:"b7a5cad5aa289773e8216e205695bdd5",name:"btn_help.png"},{bytes:2609,md5:"1f09a7dba8df9d090551e6e701cbc033",name:"btn_help_pressed.png"},{bytes:1705,md5:"937a38a954ed445e9e9bdb338d123f08",name:"btn_large.png"},{bytes:1599,md5:"42757a2f0610a596e5d83381f1a6dd6f",name:"btn_large_pressed.png"},{bytes:1572,
md5:"e94fc505aa4e228831d4f3743b58ef49",name:"btn_pause.png"},{bytes:1464,md5:"773b59f6f3b851a3d507a1d673382a27",name:"btn_pause_pressed.png"},{bytes:2976,md5:"92f54a1923aa419c4f41c56ef38fa11e",name:"btn_play.png"},{bytes:3121,md5:"3891755aaad42ca68367a917b0f4d0f8",name:"btn_play_pressed.png"},{bytes:2202,md5:"00f83d8695d986ec2ec12d0b58327b59",name:"btn_prev.png"},{bytes:2162,md5:"9fd33cd4b435e949de4d67b2c6c97888",name:"btn_prev_pressed.png"},{bytes:2567,md5:"dd1d7f4d8c7f86291f23bc107ecd1a0e",name:"btn_quit.png"},
{bytes:2499,md5:"16cb4ee77990c9b0cdcdf8965258b8ea",name:"btn_quit_pressed.png"},{bytes:2896,md5:"a3de5b9235ee8c8587c6fe72c923a547",name:"btn_restart.png"},{bytes:2919,md5:"825048ea511060e6aab45a62d5e06427",name:"btn_restart_pressed.png"},{bytes:2582,md5:"4e4da8bc23361ec479b058cc670ea378",name:"btn_resume.png"},{bytes:2659,md5:"627767b6b6ea1db7e963d8b14a89e701",name:"btn_resume_pressed.png"},{bytes:2620,md5:"b70a6085e14b266287aaaa759e5db671",name:"btn_return.png"},{bytes:2627,md5:"e0607da5324aadb441e955fd5a9a20f3",
name:"btn_return_pressed.png"},{bytes:1806,md5:"95affae47968b00f93d1fc77b4566586",name:"btn_small.png"},{bytes:1832,md5:"d3f8699b44a5b47d1992eda90d8df678",name:"btn_small_pressed.png"},{bytes:2546,md5:"391108947cf230634c66ecfcbf27a6c1",name:"btn_sound_off.png"},{bytes:2511,md5:"78c33062dc3f988ff25a0a1d0b586c5e",name:"btn_sound_off_pressed.png"},{bytes:2405,md5:"164cf5cf6e96ed4371569f7838a0bd4d",name:"btn_sound_on.png"},{bytes:2357,md5:"cf561fa362ecd33c350fc31d78f251d8",name:"btn_sound_on_pressed.png"},
{bytes:48173,md5:"122eb9245545dae890aa9d6cd5b57511",name:"characters/avatar_alvin.png"},{bytes:58770,md5:"4663fe6b0f255e33d2bcc16cef0a1bf6",name:"characters/avatar_asami.png"},{bytes:53063,md5:"aecf6fbd68b50d725d6d69498e0f0a32",name:"characters/avatar_brittany.png"},{bytes:38116,md5:"76edf7fdae420ca8cf93865a2652c56a",name:"characters/avatar_buhdeuce.png"},{bytes:39992,md5:"efb41c693da9f4b67a4c3f0dbcf847aa",name:"characters/avatar_craig.png"},{bytes:57987,md5:"341c1d15f73655540028d7bb3a706a0e",name:"characters/avatar_donnie.png"},
{bytes:10920,md5:"f9fbca7dfa040769dc88ee3932710e0b",name:"characters/avatar_fee.png"},{bytes:41763,md5:"affbb2b0323cfc26c23bac5dbc9b0011",name:"characters/avatar_foo.png"},{bytes:13234,md5:"f604ad4178fa882b8a20d29580deb6f8",name:"characters/avatar_korra.png"},{bytes:56540,md5:"d6a8b520d900dde3fab1eea37974893a",name:"characters/avatar_leo.png"},{bytes:56723,md5:"359376b77f7e27fe9396cb98920ca680",name:"characters/avatar_mike.png"},{bytes:37331,md5:"3940644667555d7cc3d624351e3c99ab",name:"characters/avatar_patrick.png"},
{bytes:63393,md5:"79bba91a4d9a32c0577b5a311dfc7f1a",name:"characters/avatar_raph.png"},{bytes:10527,md5:"853de6e6de6a7e52af3ac6425663d7f0",name:"characters/avatar_sanjay.png"},{bytes:40986,md5:"3dede5f4d1e383d5d3b9555db4faf146",name:"characters/avatar_spongebob.png"},{bytes:42985,md5:"9c1041bd1df7be6a19ca04a5a096b434",name:"characters/avatar_swaysway.png"},{bytes:7024,md5:"86a16279957d09f25cf0aa7c4d07df39",name:"characters/btn_team_alvin.png"},{bytes:6690,md5:"a0d677e57f0e10348ae8099874529be0",name:"characters/btn_team_alvin_locked.png"},
{bytes:6109,md5:"b2ba0206032cdbd4626f05f73c82bdf8",name:"characters/btn_team_alvin_locked_selected.png"},{bytes:5960,md5:"b0d6b8642b8062ef5de5fd419b299a60",name:"characters/btn_team_alvin_selected.png"},{bytes:7576,md5:"34ce8e3bfa9a10d019d372c17be965d2",name:"characters/btn_team_bw.png"},{bytes:6585,md5:"3b66d0be2157b4d754e0d1bc4e9fc63c",name:"characters/btn_team_bw_locked.png"},{bytes:6006,md5:"6c943a5811959f311127f0af2290facb",name:"characters/btn_team_bw_locked_selected.png"},{bytes:6538,md5:"87a9a5959d642208e7a631ad0faea10f",
name:"characters/btn_team_bw_selected.png"},{bytes:7306,md5:"dcaaef7a256312da7073896cea2b594e",name:"characters/btn_team_hb.png"},{bytes:6865,md5:"e2605814e77a407795db769ae75c8e09",name:"characters/btn_team_hb_locked.png"},{bytes:6246,md5:"0ad3e638e991bea5f52286e7ef91fd6b",name:"characters/btn_team_hb_locked_selected.png"},{bytes:6346,md5:"4fb729b0d4964cc98ec5cd8755feaf6f",name:"characters/btn_team_hb_selected.png"},{bytes:7326,md5:"973ee07c5dc55a2fe2b6485bb9deb8cc",name:"characters/btn_team_korra.png"},
{bytes:6690,md5:"a0d677e57f0e10348ae8099874529be0",name:"characters/btn_team_korra_locked.png"},{bytes:6109,md5:"b2ba0206032cdbd4626f05f73c82bdf8",name:"characters/btn_team_korra_locked_selected.png"},{bytes:6294,md5:"bf6aa61e56c9250b99b25e64f11586a6",name:"characters/btn_team_korra_selected.png"},{bytes:7457,md5:"3ed0e34294d474a8e541cee1a5788c4b",name:"characters/btn_team_sb.png"},{bytes:6520,md5:"8d5167ec1d3e9abee147c4871bc9564f",name:"characters/btn_team_sb_locked.png"},{bytes:5896,md5:"59238e464fcc3e836bbfd6dda42242e4",
name:"characters/btn_team_sb_locked_selected.png"},{bytes:6454,md5:"aecb4d5d007d4b0c44214b321e5b0aa0",name:"characters/btn_team_sb_selected.png"},{bytes:7572,md5:"43e9f774b814f5969f308fb7076fcd79",name:"characters/btn_team_sc.png"},{bytes:6985,md5:"643ce2a25043ccfa1da7cf7c4f1e9860",name:"characters/btn_team_sc_locked.png"},{bytes:6068,md5:"9f98461a7a817d5a17f5bfa2bd10453f",name:"characters/btn_team_sc_locked_selected.png"},{bytes:6252,md5:"b7563a53767ba3a9afafc63f3907c898",name:"characters/btn_team_sc_selected.png"},
{bytes:7442,md5:"6301d6148d82a29f33f918a08d9c0180",name:"characters/btn_team_tmnt.png"},{bytes:6633,md5:"3030565500b6f15539e62ccd3d379609",name:"characters/btn_team_tmnt_locked.png"},{bytes:5927,md5:"b851bb1366279daa55ab00f2eac51bb2",name:"characters/btn_team_tmnt_locked_selected.png"},{bytes:6252,md5:"6e0737210564beacf338e416974c48d7",name:"characters/btn_team_tmnt_selected.png"},{bytes:11425,md5:"fd9162830300769fa2ecde9ec022f740",name:"characters/catcher_team_alvin.png"},{bytes:17793,md5:"f83b5b30cce26fa89b52bca2cb5f771d",
name:"characters/catcher_team_bw.png"},{bytes:10067,md5:"68a8b3192caed162aee60d66b914de26",name:"characters/catcher_team_hb.png"},{bytes:26843,md5:"cb4aec8bc87507f1020cfc924c499451",name:"characters/catcher_team_korra.png"},{bytes:9258,md5:"4b9af7ed202ae2576d3a68f289aea75f",name:"characters/catcher_team_sb.png"},{bytes:74371,md5:"ef0a2e4be8ba117f5382a6794777e367",name:"characters/catcher_team_sc.png"},{bytes:18439,md5:"5e13caa357c79adf50765a1acfddfabd",name:"characters/catcher_team_tmnt.png"},{bytes:5003,
md5:"42cc2d92a5d2ce161b2845e98afb5284",name:"characters/face_alvin.png"},{bytes:5292,md5:"f01d0715ba663690b98473d17aa51c2e",name:"characters/face_alvin_locked.png"},{bytes:22664,md5:"22f692409fc9916b613ecec20f06bc5e",name:"characters/face_asami.png"},{bytes:7503,md5:"8b7719eff5a838548ab0560d0f47e55e",name:"characters/face_asami_locked.png"},{bytes:19455,md5:"4ecb3119444b108ad1331f277d8b493b",name:"characters/face_brittany.png"},{bytes:6414,md5:"2c15949789a01d59cdd71d0a1a1d4e3a",name:"characters/face_brittany_locked.png"},
{bytes:14936,md5:"136b102eac4a0feaed1603b1eca3b743",name:"characters/face_buhdeuce.png"},{bytes:4940,md5:"b2c8d3fcf3f0f98103f8432c7287b748",name:"characters/face_buhdeuce_locked.png"},{bytes:18102,md5:"698a2af547b92058b12da0081f740e98",name:"characters/face_craig.png"},{bytes:5520,md5:"03badf4d607b80abe1b8c90cf5f15374",name:"characters/face_craig_locked.png"},{bytes:6388,md5:"9d3c77037d5e0ec927bc8a8002da7aa9",name:"characters/face_donnie.png"},{bytes:6621,md5:"74adc4abe89843243d3454ea2ccd975e",name:"characters/face_donnie_locked.png"},
{bytes:36067,md5:"d28cd05a30d462c8c153a7f0ef03f53f",name:"characters/face_fee.png"},{bytes:6495,md5:"9f8a8d468a43ffc7c1504c6738b68044",name:"characters/face_fee_locked.png"},{bytes:16137,md5:"5b3b73570150964b07746cd0914393bc",name:"characters/face_foo.png"},{bytes:5293,md5:"592a049bb5196953642b7f7b030870c0",name:"characters/face_foo_locked.png"},{bytes:6418,md5:"31f173f1b980e4a408099398e093d94e",name:"characters/face_korra.png"},{bytes:6639,md5:"a3d7231647d81598c7267926884b726a",name:"characters/face_korra_locked.png"},
{bytes:5869,md5:"f3822c749c89f84281fd65e0d1d3b5c2",name:"characters/face_leo.png"},{bytes:6129,md5:"10f78570b94799e54df9ae746d7e6640",name:"characters/face_leo_locked.png"},{bytes:5810,md5:"a57704121a70f8ce379a911cd9cab1ad",name:"characters/face_mike.png"},{bytes:6183,md5:"8d6ffd5857ebffa2e58f62259b7b7fed",name:"characters/face_mike_locked.png"},{bytes:5119,md5:"5d7be6fea1722a4941a27a2aeca69270",name:"characters/face_patrick.png"},{bytes:5297,md5:"e54e7083d92035994a5d266db7d56ac2",name:"characters/face_patrick_locked.png"},
{bytes:5734,md5:"3486b8f4df221c834e76d1f8b37d1dc4",name:"characters/face_raph.png"},{bytes:6017,md5:"ed2e5b28a2bee48c6b61d1114eb7b4a1",name:"characters/face_raph_locked.png"},{bytes:4632,md5:"3a48742998d8b57f30043e6cdc648f78",name:"characters/face_sanjay.png"},{bytes:4703,md5:"4410545732de3b0408e6a8fbc4ab03f9",name:"characters/face_sanjay_locked.png"},{bytes:20786,md5:"1c065536ec1298cef5334cbc2bc353ce",name:"characters/face_spongebob.png"},{bytes:6541,md5:"10e1381c1dac9192d16364e1b5732fc8",name:"characters/face_spongebob_locked.png"},
{bytes:16990,md5:"5d688af9a268f83140379920af9ccbf6",name:"characters/face_swaysway.png"},{bytes:5631,md5:"1ec27cbc8771a45d49eb93776d097ae9",name:"characters/face_swaysway_locked.png"},{bytes:1614,md5:"1fb577ffac9c14b3f961c081dd80b8a9",name:"characters/lockIcon.png"},{bytes:45751,md5:"329e12b59dbb2fa46017977066337972",name:"characters/pitch_alvin.png"},{bytes:62821,md5:"e2e8c22b8d0320d0b569a4836e20a665",name:"characters/pitch_asami.png"},{bytes:54862,md5:"d14d69660b4d1e55de8db0fa8c7f470b",name:"characters/pitch_brittany.png"},
{bytes:42619,md5:"150f2687103646feee885a390b5ad8c3",name:"characters/pitch_buhdeuce.png"},{bytes:13228,md5:"6bbb2b0f5ef659c24814db59df67beb2",name:"characters/pitch_craig.png"},{bytes:77597,md5:"0b7b3dd180c9cce8dc217c0b5ddb87d8",name:"characters/pitch_donnie.png"},{bytes:10911,md5:"683d21d930d78147bc53a093f4742287",name:"characters/pitch_fee.png"},{bytes:10307,md5:"f4553c8ad0dcd7305e36195b94598fb3",name:"characters/pitch_foo.png"},{bytes:14291,md5:"4c61ee2b67453e1f949b499dd4b17c1b",name:"characters/pitch_korra.png"},
{bytes:67922,md5:"feaa8c0a8027227ebd4a662b4394d3cf",name:"characters/pitch_leo.png"},{bytes:15964,md5:"e3ef33c6b063ac587963dcc8a4e99c41",name:"characters/pitch_mike.png"},{bytes:14227,md5:"7905f98b307fb1b75437361b9ef41fb7",name:"characters/pitch_patrick.png"},{bytes:17575,md5:"60a4e9f552d68ec5fe40707d2079c6df",name:"characters/pitch_raph.png"},{bytes:64574,md5:"4288dababc982e53119ff11421bb8042",name:"characters/pitch_sanjay.png"},{bytes:49354,md5:"ad95fcea6739ca8de93c0c961334e47a",name:"characters/pitch_spongebob.png"},
{bytes:40418,md5:"370ae71b00a10b1ee254825acc19f81f",name:"characters/pitch_swaysway.png"},{bytes:3543,md5:"e93bb2f6ea5bf6890b3dc1954d85a406",name:"characters/team_alvin.png"},{bytes:3048,md5:"12f2f4fc2b06a2350459fb7ca2858b79",name:"characters/team_bw.png"},{bytes:3190,md5:"c9ed0e4be7c14043d4fdde8fe53c9fda",name:"characters/team_hb.png"},{bytes:2743,md5:"45b9ae714946c1311a4ccfc95ba9bbca",name:"characters/team_korra.png"},{bytes:4156,md5:"fc4a85fa273b2b1c8d6c39653d4c3725",name:"characters/team_sb.png"},
{bytes:2893,md5:"5da2c8670d84daf7d84615b7b9ed0a5c",name:"characters/team_sc.png"},{bytes:3947,md5:"07afca29fb516b1274249d0b86b23797",name:"characters/team_tmnt.png"},{bytes:3556,md5:"cdb69e2f9f1107487a849af10f067c88",name:"enter_code.png"},{bytes:16536,md5:"6dd3035e5071e35cfb31322ce7a12a47",name:"popup_bg.png"},{bytes:24190,md5:"c63c85824064969881f5a4ad2a278e79",name:"popup_keyboard.jpg"},{bytes:1140,md5:"7d10894a3e8c7476c0c45d46c6743eb8",name:"star/star.json"},{bytes:5180,md5:"4fd638b5f850799fe94d9a39f5bb9b48",
name:"star/star.png"},{bytes:1412,md5:"619503d8629dd55aaf5a3b2732a24dae",name:"true_code.png"},{bytes:1499,md5:"d60d70dc397cd51e4d6aa238cc1af0e6",name:"unlocked_icon.png"},{bytes:1781,md5:"24e83e06ec0e2bb9f590172dc0016708",name:"win_dots/win_dots.json"},{bytes:1079,md5:"57cecc2800d05fb84d3ddf3ff1d770f0",name:"win_dots/win_dots.png"},{bytes:1463,md5:"fab989363307fac941cd0e4400ddf702",name:"wrong_code.png"}],ui_win:[{bytes:110874,md5:"1c65f99a8f131d4b30b3b4cc9472b6b2",name:"bg.jpg"},{bytes:4883,md5:"34c6dddc23326ae3f0bbe2fa0c047af8",
name:"star.png"},{bytes:5867,md5:"3c3ff0fb88c66c6b4d1448317b0e0dd6",name:"star_home.png"}],ui_tut:[{bytes:3094,md5:"13c058b8ca59b25cc3b2f1bf39f560a8",name:"aim.png"},{bytes:1431,md5:"559d4b8e46f083bae7cdb9cce0e1ab07",name:"aim_ball.png"},{bytes:19516,md5:"29f7f8191c76ec3350a8b47dc8a19d9c",name:"aiming.png"},{bytes:1631,md5:"39b4c4e6e91f2e67d409f5e69414d86c",name:"arrow.png"},{bytes:18112,md5:"05e6ba060fd6b8b7a10c1b6297bd7b74",name:"breakables.png"},{bytes:2583,md5:"3bf92278f2525c5f1eaa109ae0a25411",
name:"btn_nextpage.png"},{bytes:2594,md5:"6d24d32bfc56db940900e1900972f4a3",name:"btn_nextpage_pressed.png"},{bytes:2605,md5:"601421661cb617f696d3e38d768971e0",name:"btn_prevpage.png"},{bytes:2701,md5:"e0f8c70d401916025222849d07b48d16",name:"btn_prevpage_pressed.png"},{bytes:2022,md5:"c85370e7bd7a3c6668e1bab22c217f7b",name:"hand.png"},{bytes:100298,md5:"a2ddca3c9103df53267bc5d46d992293",name:"homerun.png"},{bytes:5593,md5:"3df122f91364af22faad47987243011b",name:"square.png"},{bytes:17502,md5:"e69139a7a838c5658ddb55eead084af3",
name:"stars.png"},{bytes:79725,md5:"b51cbe6243aa9c6b7977b04166f16249",name:"strength.png"},{bytes:24204,md5:"8abbeff300c2024e89c63b1924df135e",name:"swing.png"},{bytes:5335,md5:"ca84fe661b7577bfa86335c87840bc86",name:"wide_box.png"}],ui_hud:[{bytes:2659,md5:"f977b76560f7249f1c754033814de152",name:"ball_count_bg.png"},{bytes:2396,md5:"7217755c433ddf18ee0f1387c68cd044",name:"ball_count_icon.png"},{bytes:5138,md5:"7a1b19170cf064c6af51dfe087354c9b",name:"btn_explosion.png"},{bytes:28435,md5:"f7ca5de1f07506fe57cb846d843f30e7",
name:"btn_explosion_pressed.png"},{bytes:2727,md5:"5056ad49d671ead6cb83b8dec383fa64",name:"helper_circle1.png"},{bytes:6258,md5:"b66d28b0d466eed009c05e78e2be9fa9",name:"helper_circle2.png"},{bytes:6228,md5:"3979ef1396f86e753f39eb0aca0d18b3",name:"helper_circle3.png"},{bytes:2461,md5:"d2e4d229a4a2d1b706289923b9d2cefa",name:"launcher_arrow.png"},{bytes:1695,md5:"620c390175e89d9247c8e9a3bc3c17d9",name:"launcher_arrow_1.png"},{bytes:1778,md5:"8da18f7b3f2d82557dcef40f2215aa6b",name:"launcher_arrow_2.png"},
{bytes:2095,md5:"f764617c0215f4dc3911558d69e18dcf",name:"launcher_arrow_3.png"},{bytes:1889,md5:"ea9fda5d094eb1553a06104eb97a2012",name:"launcher_dragger.png"},{bytes:863,md5:"8c641165fb3e6935317d0321a8ab3a62",name:"launcher_pivot.png"},{bytes:4568,md5:"1f3dacf33760740751118b79ae20e1c9",name:"power_bg.png"},{bytes:543,md5:"51c53a4b24c55be20b8a15499e9be055",name:"power_dot.png"},{bytes:3221,md5:"eae71e3d732e04386376e2dcfeac5750",name:"power_fill.png"},{bytes:1236,md5:"912b5a2fdf7451220bd0b17205c3c8d0",
name:"score_bg.png"},{bytes:1688,md5:"f08ecb3c273e6a5f0e150279de86b513",name:"score_target_bg.png"},{bytes:1580,md5:"cc2efeb4892705b7a6d2819f4badde1d",name:"skip.png"},{bytes:3677,md5:"34c6a050ef98e129469cca6be3daaeaa",name:"special_bg.png"},{bytes:3615,md5:"96ac1e027b957218024db414492bfc2d",name:"special_fill.png"},{bytes:2425,md5:"e1ed1a7d9da0a726818852b63efdcb68",name:"special_fx_bottom.png"},{bytes:3738,md5:"398316d42b14b8f8c85bc95d8ec30883",name:"special_fx_top.png"},{bytes:2963,md5:"b0e3d018ea7f6679025140d52e0d1065",
name:"special_particles.png"},{bytes:3142,md5:"ef2fa3677747f931bcde69beab76958b",name:"strike1.png"},{bytes:3330,md5:"69868006cf1da17e8cd3bf2fa410672b",name:"strike1_red.png"},{bytes:3135,md5:"cafc68888dd63cabc35b7434e5d19b61",name:"strike2.png"},{bytes:3466,md5:"0fa31c0131d51f9e050c3f0beeee8b14",name:"strike2_red.png"},{bytes:3153,md5:"2a6fe664cc74357e1b2314ecd9d616ae",name:"strike3.png"},{bytes:3420,md5:"2dc9d4c2ba74b966694f3ca98a978ed8",name:"strike3_red.png"},{bytes:1444,md5:"382b9ed5f3beb62d6924c73d0026d03b",
name:"time_count_icon.png"},{bytes:2273,md5:"100b829bf4412bb00bc76822759c88d7",name:"timer.png"},{bytes:2592,md5:"a836938c478151636847f70773c467b0",name:"travelling_on.png"}],ui_end:[{bytes:137514,md5:"ead2fcf66674daeb048ea2b2d0ec94df",name:"bg.jpg"},{bytes:76373,md5:"6c9fe30216756abafa372a33b766f04b",name:"end_team_alvin_l.png"},{bytes:70075,md5:"eedba7fd094872c288d8d85401f239fa",name:"end_team_alvin_r.png"},{bytes:57384,md5:"86e55dccf9ab5fc95bafe9eccaee8af0",name:"end_team_bw_l.png"},{bytes:57975,
md5:"10cc1e15e48fae60000185534ba4b9dc",name:"end_team_bw_r.png"},{bytes:12058,md5:"eef411ca73d5ddc4c207c8fafa73f28d",name:"end_team_hb_l.png"},{bytes:47880,md5:"174cb180a8abf9f8d6a655032b65f675",name:"end_team_hb_r.png"},{bytes:14476,md5:"824e1970b61d381f43b87693526ec1e0",name:"end_team_korra_l.png"},{bytes:70611,md5:"3d677dff816f9a91d1bbbcf3686f3ad8",name:"end_team_korra_r.png"},{bytes:73499,md5:"5098557dbd2c482d0dce1220b1ed0c91",name:"end_team_sb_l.png"},{bytes:13947,md5:"a5f5b8ba9caba29a110d94e3b952652a",
name:"end_team_sb_r.png"},{bytes:12815,md5:"113468bbd697bc38bfd3c5107557cda0",name:"end_team_sc_l.png"},{bytes:16337,md5:"81bd814dd90835de4705b9d15182a6a3",name:"end_team_sc_r.png"},{bytes:138195,md5:"53fe17966b17151463b1ab949ba253c4",name:"end_team_tmnt_l.png"},{bytes:135633,md5:"c10e39d694735476e2765847ed682423",name:"end_team_tmnt_r.png"}],craig_batter:[{bytes:14692,md5:"01aac810f71529e335ebe26b6ecf9e65",name:"craig_batter0.json"},{bytes:416103,md5:"f256f69042541a1ec0e37c05563dc25e",name:"craig_batter0.png"},
{bytes:7932,md5:"4451735b25bfe536478ca9baa0b213e5",name:"craig_batter_meta.json"}],ui_mode:[{bytes:79529,md5:"6060132efe462c2ccf76e0cffa4e3f44",name:"bg.jpg"},{bytes:113894,md5:"e3eb2d1a8a7abc9075b156e66611b62c",name:"btn_random.png"},{bytes:30053,md5:"6ddeebffc446c3f4288c69be52c67994",name:"btn_random_pressed.png"},{bytes:37942,md5:"6356f0b3996e52b70d9cacc10017d8cb",name:"btn_stats.png"},{bytes:32706,md5:"0a77287dae884d705a69ee66f81574e9",name:"btn_stats_pressed.png"},{bytes:32236,md5:"f0bdd2df98452fa1a7f8cc862b33ce14",
name:"btn_tournament.png"},{bytes:28507,md5:"c00153cc0d76e443b00671256048350c",name:"btn_tournament_pressed.png"},{bytes:6872,md5:"8d270dba35a794f267f22a6194b72a82",name:"white_1.png"},{bytes:7398,md5:"db8b17d9585bfa0b52b156c036f058f3",name:"white_2.png"},{bytes:5991,md5:"ea5a8ac472b21e32e2819fee6a54cc60",name:"white_3.png"}],sanjay_batter:[{bytes:12827,md5:"82872bb46971e4a8d92f76258084ce36",name:"sanjay_batter0.json"},{bytes:368161,md5:"d276387ce833f664b0f31488119579bc",name:"sanjay_batter0.png"},
{bytes:8763,md5:"3f638d8b7239e3066b39a64f24c03bdd",name:"sanjay_batter_meta.json"}],sound_mobile:[{bytes:8186,md5:"3911c15e7fe57644305de3bbc2bcb325",name:"ball_explosion.mp3"},{bytes:9304,md5:"6c1fd4457b2efa7b2041b4a874704af9",name:"ball_explosion.ogg"},{bytes:3348,md5:"1cfe66299b43cf90a92169268609babc",name:"bounce.mp3"},{bytes:5896,md5:"4307663c996c7b738c58d1e16fb5ed8e",name:"bounce.ogg"},{bytes:4183,md5:"ae376472fb24d247ffc3eba5ab5a9118",name:"break_wood.mp3"},{bytes:7347,md5:"f3dcaeae705843155e1d8e123a628182",
name:"break_wood.ogg"},{bytes:3946,md5:"4609f030e86558668d51134d6af72df3",name:"bump_metal.mp3"},{bytes:6154,md5:"4b38c87865b136a27e58d7699b2d79de",name:"bump_metal.ogg"},{bytes:1684,md5:"12ad1c4dd395aba61729d36375501aef",name:"bump_wood.mp3"},{bytes:4762,md5:"51608e7e1457290065ea57ef517b7e48",name:"bump_wood.ogg"},{bytes:3811,md5:"e4ed7b9dc6a97e8c0af8ba901d8bcd58",name:"catch.mp3"},{bytes:5954,md5:"b867513152ff016a14edd5cedee35cda",name:"catch.ogg"},{bytes:11304,md5:"fa37c041400d741429be707dad3d3893",
name:"crowd_boo.mp3"},{bytes:15247,md5:"2cabc5a7690875e40124661364fe9398",name:"crowd_boo.ogg"},{bytes:12163,md5:"e906cdaad84361cc0b826ebc8973b37d",name:"crowd_cheer.mp3"},{bytes:16679,md5:"c80656c7e464ab041075024233aa55aa",name:"crowd_cheer.ogg"},{bytes:2283,md5:"a14038eb741c7a19c079cd09ba37a04f",name:"hit_1.mp3"},{bytes:5479,md5:"695f51f38246935b820ffa141aba7767",name:"hit_1.ogg"},{bytes:2517,md5:"c68b30738d0629ab4399bb060a1bea78",name:"hit_2.mp3"},{bytes:5753,md5:"e5598f762f944342b21c5cf22feb72ef",
name:"hit_2.ogg"},{bytes:10367,md5:"8c2764bd6e48a903218012bcf04da2a7",name:"hit_3.mp3"},{bytes:10877,md5:"422a91c2b678ad0a3c5d92458632e136",name:"hit_3.ogg"},{bytes:3010,md5:"a4b8edb660ab6ca0a317beada1049a60",name:"lose_out.mp3"},{bytes:6055,md5:"14264f607682cace452e31b139555706",name:"lose_out.ogg"},{bytes:13412,md5:"710266dfa4f577d35a463c55252f0339",name:"magnet.mp3"},{bytes:16177,md5:"b9cefdc13484f025553eacace45f0eb2",name:"magnet.ogg"},{bytes:11124,md5:"f5cc99ec6a9632edd0f2d6b452850221",name:"moon_explosion.mp3"},
{bytes:17027,md5:"4bb23d63ccd13333689cb374c3cc5b64",name:"moon_explosion.ogg"},{bytes:5740,md5:"331d8b9ed191e7f42f7736064b1f9908",name:"moon_fall.mp3"},{bytes:5749,md5:"b7f6c4f109faaf79a1bc5307e3f9f47b",name:"moon_fall.ogg"},{bytes:2438,md5:"f51a8a8a9fb273768ed3846d5d0d1694",name:"pickup_1.mp3"},{bytes:5412,md5:"c0370812b81dd1d7351c638f58d79e3b",name:"pickup_1.ogg"},{bytes:2490,md5:"a19e6c37eb12e966e8e058e094387ce7",name:"pickup_2.mp3"},{bytes:5444,md5:"5a33eafabb2a7992f0bd219f03a337c4",name:"pickup_2.ogg"},
{bytes:2698,md5:"f74fccc90c29eb66dc1ae0588655b4f5",name:"pickup_3.mp3"},{bytes:5597,md5:"d1c8e0593233250020d5dee90c707a53",name:"pickup_3.ogg"},{bytes:1476,md5:"0cc44f989a207b27836f3e692eaf50e7",name:"pickup_ball.mp3"},{bytes:4309,md5:"e1dfbb512978ea882aa87e08323e493d",name:"pickup_ball.ogg"},{bytes:8262,md5:"e5be8247501c3a2879361be364134444",name:"pickup_big.mp3"},{bytes:9616,md5:"6897c964aead01f2bc83cf2a7fff46a0",name:"pickup_big.ogg"},{bytes:4387,md5:"d41306f168755fff9958ff8f5abc22b3",name:"pickup_strength.mp3"},
{bytes:7858,md5:"9386d9af9b35edfa8592e86fa6bc898b",name:"pickup_strength.ogg"},{bytes:3087,md5:"6df595ec7726df2126387ed8f341b1c5",name:"pitch.mp3"},{bytes:6736,md5:"7287f5eb9a12d365e32c69cfabf3ba05",name:"pitch.ogg"},{bytes:5690,md5:"03b3cdab998c78749e64e48dc6318453",name:"play_ball.mp3"},{bytes:8210,md5:"6ee211a158c66e326f47f17abede962c",name:"play_ball.ogg"},{bytes:15161,md5:"39a554f34bd3be8a0a7a67163ac7e246",name:"rocket_explosion.mp3"},{bytes:20304,md5:"b935c9c4a2e17b82c08842510e3d5b50",name:"rocket_explosion.ogg"},
{bytes:8677,md5:"8c66f9c1519027e5e79f7918ff72aff0",name:"rocket_launch.mp3"},{bytes:11674,md5:"9f302fae89b26e805b4b1148a5460c0e",name:"rocket_launch.ogg"},{bytes:6754,md5:"c05421b1fa5a9b1fb71b251cc37019ed",name:"score_loop.mp3"},{bytes:9936,md5:"5a39a2e86cad3a0f8fe65ced3b6081cd",name:"score_loop.ogg"},{bytes:780,md5:"0b619d91a6ca103ad3f790fc26fffe48",name:"silence.mp3"},{bytes:3585,md5:"e8d618c3639eda40261273411b5af44a",name:"silence.ogg"},{bytes:3712,md5:"7d8963a33850dbf34ce8d7e16b1f5364",name:"split_ball.mp3"},
{bytes:7140,md5:"5718871fbfdbdd6266114e52cb9086db",name:"split_ball.ogg"},{bytes:18897,md5:"727a0f9d6787956ec5768fb328d72f63",name:"sting_lose.mp3"},{bytes:18993,md5:"cf9069fa9bf55569a14545ea18e0c86b",name:"sting_lose.ogg"},{bytes:27376,md5:"5fe105e05133ced53d69489384fbc37f",name:"sting_win.mp3"},{bytes:32802,md5:"033c0301fc84551ed09dd43c90eb3357",name:"sting_win.ogg"},{bytes:6546,md5:"c4176f013f05aace365b366211cbba0a",name:"strike.mp3"},{bytes:9622,md5:"c6e4702a2a6ec0f370df8d701365649a",name:"strike.ogg"},
{bytes:15872,md5:"281381ed4281a7a73ea3e0a4f7b468b8",name:"super_activation.mp3"},{bytes:16975,md5:"c177fcc620745d227da4ecb63036bd54",name:"super_activation.ogg"},{bytes:1658,md5:"bf6c6604c7b49d9fd6524a30c9c03700",name:"swoosh_0.mp3"},{bytes:4787,md5:"01ef5db01a7cbd733295b254554dad53",name:"swoosh_0.ogg"},{bytes:1892,md5:"92e5edb0da92881c152580ff2512cefe",name:"swoosh_1.mp3"},{bytes:5237,md5:"10e699338b834f4a9164248984d9e8e1",name:"swoosh_1.ogg"},{bytes:3271,md5:"2016175fe47ddc36d20c93641e1746a5",
name:"swoosh_2.mp3"},{bytes:6583,md5:"d244360d909626a9061ca51fc209972f",name:"swoosh_2.ogg"},{bytes:3167,md5:"4dad2a5832f109fed51536ab3b1b8350",name:"swoosh_3.mp3"},{bytes:6812,md5:"b24cda4e0d5b9458502911c7553f1967",name:"swoosh_3.ogg"},{bytes:10604,md5:"256ac63300b71d6fbd975081cb4f104e",name:"toilet.mp3"},{bytes:15091,md5:"22174249a586f9e04213a3bf95568ec1",name:"toilet.ogg"},{bytes:4674,md5:"eba2c09dab4744571c844657e128f791",name:"win_star.mp3"},{bytes:5980,md5:"fd8e08c5c0f45c0918d88da0a07011a8",
name:"win_star.ogg"}],donnie_pitcher:[{bytes:7170,md5:"58cf1ef73c430eb3fe8e4ca88592ee8d",name:"donnie_pitcher0.json"},{bytes:341307,md5:"d488002b24c92d5bfeeceb85625da329",name:"donnie_pitcher0.png"},{bytes:172,md5:"cf3cd7bb860549add57c80420505c458",name:"donnie_pitcher_meta.json"}],ui_fail:[{bytes:104149,md5:"e653f46aa060b393e8dcb02ec6461152",name:"bg.jpg"}],brittany_pitcher:[{bytes:6004,md5:"a800dad48e0612dc0efc370a247a37bb",name:"brittany_pitcher0.json"},{bytes:229222,md5:"551ad48bbce0156bd9a3db8690c26342",
name:"brittany_pitcher0.png"},{bytes:148,md5:"35e2b63601422313cc020de8ecd2a2a4",name:"brittany_pitcher_meta.json"}],swaysway_batter:[{bytes:15085,md5:"733d286029e34dc0dac16d12b532d78c",name:"swaysway_batter0.json"},{bytes:452035,md5:"85474849c40d9f7ba484731f9ae19cc7",name:"swaysway_batter0.png"},{bytes:7131,md5:"b68ae2867a390a80716d6dfff543643a",name:"swaysway_batter_meta.json"}],ui_pause:[{bytes:31341,md5:"086b0abfebca298efb4e158bd8492c41",name:"bg.png"},{bytes:81845,md5:"2b1e5d97533c2c442d7e720594e0d337",
name:"quit_bg.png"}],swaysway_pitcher:[{bytes:6508,md5:"21d4a7a708cc90b744d13a3bbb66a2f3",name:"swaysway_pitcher0.json"},{bytes:177939,md5:"e893bb22ea076be49783347fd5eee68f",name:"swaysway_pitcher0.png"},{bytes:148,md5:"00f224fd089d4f22d58c327511beb4c6",name:"swaysway_pitcher_meta.json"}],leo_batter:[{bytes:7977,md5:"ebe75e2243800a2c980e5622bea6445b",name:"leo_batter0.json"},{bytes:476814,md5:"58288568d991c470be440e21100c8584",name:"leo_batter0.png"},{bytes:9595,md5:"b94f4261a58b4b5c55ffa44880acf963",
name:"leo_batter1.json"},{bytes:319662,md5:"445f1a0f6edbf1c28fe9c8392bf6db00",name:"leo_batter1.png"},{bytes:9925,md5:"773663fb387568887ffa63fd6959c438",name:"leo_batter_meta.json"}],patrick_batter:[{bytes:8103,md5:"7092e1c8f309fa75a41a2f02a5a711f7",name:"patrick_batter0.json"},{bytes:261748,md5:"21d9d4c66ca312fa722cd71720f15259",name:"patrick_batter0.png"},{bytes:7322,md5:"c030b00397cd0ffb45a13fcf65c005a3",name:"patrick_batter1.json"},{bytes:299573,md5:"7c6397dfac279ae6efb63cc42be21f63",name:"patrick_batter1.png"},
{bytes:10729,md5:"231b1ffbb7ccc6d0ad0edbb05551d573",name:"patrick_batter_meta.json"}],mike_pitcher:[{bytes:5883,md5:"b6ad7fe2b26cb166164d4a3a69ca7e11",name:"mike_pitcher0.json"},{bytes:251302,md5:"9e2924d931eb6a79652a939a0ab394c9",name:"mike_pitcher0.png"},{bytes:154,md5:"3e0bfd1ef3618307775ca8588996e8d2",name:"mike_pitcher_meta.json"}],team_korra_catcher:[{bytes:6266,md5:"0801cd5c8669aed9910af6f32c32e800",name:"korra_catcher.json"},{bytes:547302,md5:"50bfb0efb995904b09c90df882f2a66a",name:"korra_catcher.png"}],
fee_pitcher:[{bytes:5232,md5:"17d14e3a7eb147a2a8fd064f274587da",name:"fee_pitcher0.json"},{bytes:168797,md5:"79f61f52e6389af749d09fe63e2ee167",name:"fee_pitcher0.png"},{bytes:136,md5:"634e921c7a2780e80eb2504c42f545c9",name:"fee_pitcher_meta.json"}],raph_pitcher:[{bytes:5020,md5:"8d5a72cc8c9a28824555f87dc87c49ec",name:"raph_pitcher0.json"},{bytes:185978,md5:"d64a0860d19256a0362b156ab7b267be",name:"raph_pitcher0.png"},{bytes:136,md5:"634e921c7a2780e80eb2504c42f545c9",name:"raph_pitcher_meta.json"}],
sprites:[{bytes:10061,md5:"98275ef9296f1f139501be8258ae01b6",name:"balls/balls.json"},{bytes:195589,md5:"25bbfa02e3a6289ec605d6a287a15a8c",name:"balls/balls.png"},{bytes:768,md5:"56385ee259bcef0343e13e46183b7fdb",name:"bounce_pad.png"},{bytes:2843,md5:"ea55654a1a773da5d9c4311933ac9276",name:"crate_metal.png"},{bytes:6638,md5:"989275f9179bde89baa75c0ada7a9e2a",name:"destructibles/destructibles.json"},{bytes:99939,md5:"5d2e5aa2569971d37aa4b1e4bec1c028",name:"destructibles/destructibles.png"},{bytes:277,
md5:"0045cc41061118ef1ed0f1b60d73a457",name:"dot.png"},{bytes:53107,md5:"b8aa9fd8949520905646c11c6b11583c",name:"env_1_end.png"},{bytes:82272,md5:"b8bf59be43346bcd1d673d9677d8e713",name:"env_1_ground_left.jpg"},{bytes:67042,md5:"166d9c92eb4d48faa0aeee4f47804297",name:"env_1_ground_repeat.jpg"},{bytes:74760,md5:"7196738574440741b534fc0c30bd732e",name:"env_1_ground_right.jpg"},{bytes:193502,md5:"86d4429654a07a8db0a5e5ce2223977e",name:"env_1_stands_1.png"},{bytes:2725,md5:"2ab832244fc171b306626c7c4f563380",
name:"fat_star/fat_star.json"},{bytes:751894,md5:"ddcc3cbc942ec4e95e9b5b80bf160752",name:"fat_star/fat_star.png"},{bytes:4190,md5:"2ba96e3584500c61733cdceb437d5b90",name:"fx/fx.json"},{bytes:91239,md5:"116a8a90c454317582cdc82804437921",name:"fx/fx.png"},{bytes:1657,md5:"ae20ccccb4adcc3bb43466613d36263c",name:"homeplate.png"},{bytes:11734,md5:"66ae3a9fce5a8b3e7e3c4fa86791e0e8",name:"obstacle_breadwinners.png"},{bytes:17408,md5:"9b71fd6a0d8fea280e584f72133fab5b",name:"obstacle_hb.png"},{bytes:23015,
md5:"aac204e77298c1cc3288050dc5bfdfce",name:"obstacle_korra.png"},{bytes:7026,md5:"5efd27c6a5d108cdc119903c3ac0237c",name:"obstacle_korra_bounce.png"},{bytes:6230,md5:"20e5759e0f495bc066e53d0f13f74319",name:"obstacle_sanjay_craig.png"},{bytes:19443,md5:"7f081e6e7e89dceb11a0ec255dc25bea",name:"obstacle_spongebob.png"},{bytes:16950,md5:"fafbb0a173d26f3b67394856a04d78b2",name:"obstacle_tmnt.png"},{bytes:1795,md5:"1908a7aafd3b230ac3e9936d6cd8a125",name:"pickups/pickups.json"},{bytes:62050,md5:"4684812c852fce1ca8065cb6cc519ba1",
name:"pickups/pickups.png"},{bytes:3030,md5:"eaac33c0a1ca8846958f769b84ff2ee3",name:"platform_metal_1.png"},{bytes:4542,md5:"515af99b7ab658fa6d39f36292f67c0b",name:"platform_metal_2.png"},{bytes:18103,md5:"02d84d600d382b96ed8ff6f6f4016d5f",name:"platform_metal_3.png"},{bytes:3182,md5:"4d02b314dfa05ce585a1ffc8a0e4408e",name:"struct_metal_1.jpg"},{bytes:4540,md5:"30d58d1e065668c7a97076a3154d2c51",name:"struct_metal_2.jpg"},{bytes:6182,md5:"3a7a6f7c4cc2d61277bd50acf0338aab",name:"struct_metal_3.jpg"}],
team_bw_catcher:[{bytes:4514,md5:"ee26d8ecc76a962ee4ac86d4e84776bc",name:"bw_catcher.json"},{bytes:229625,md5:"ef2a7ae1ad9ce887638cb63522c12390",name:"bw_catcher.png"}],team_alvin_catcher:[{bytes:4905,md5:"ab5e4a79eb9a36a3d4fb25b9d0852222",name:"alvin_catcher0.json"},{bytes:177629,md5:"fc7315c7af86bc66b07506f99b129e7d",name:"alvin_catcher0.png"}],ui_preview:[{bytes:108460,md5:"2deca0d1d39ebcdbb45247c1377a1e80",name:"bg.jpg"},{bytes:2121,md5:"749d1ba4e6f7130912e847108ac45709",name:"target_bg.png"}],
korra_batter:[{bytes:16491,md5:"0103850605b3ce58d607d258c75d43ba",name:"korra_batter0.json"},{bytes:531686,md5:"a938dea3e3e4ff6f978bb2fbadebc656",name:"korra_batter0.png"},{bytes:6190,md5:"b8e34d055d1c89978d0d7847b76636be",name:"korra_batter1.json"},{bytes:109310,md5:"6b2dc528fe20cbf95c018da376b432c9",name:"korra_batter1.png"},{bytes:12483,md5:"288800a4875291758ad16d5cb1fb3bfa",name:"korra_batter_meta.json"}],moonball:[{bytes:2053,md5:"61998c45a9f31647c273bef10503eeb1",name:"moonball0.json"},{bytes:193230,
md5:"ba50fa7dd72c9df5fe07df965eb8bf81",name:"moonball0.png"},{bytes:741,md5:"ec291ee04b7161ac9b2a2cc9fca8f934",name:"moonball1.json"},{bytes:40900,md5:"1d40a665a18a7e90ce3b9bcd0d98d34c",name:"moonball1.png"}],ui_derby_win:[{bytes:101719,md5:"5f553fdeb37f1634ac783ce421639ac2",name:"bg.jpg"}],debug:[{bytes:310,md5:"772652e826257b77dd8af8a24c392a2b",name:"debug_example.json"},{bytes:7992,md5:"a2d0330d20f20de8490e83806e1c7871",name:"debug_font.fnt"},{bytes:1780,md5:"3c6dc308b980589bc4580aa9446c5f48",
name:"debug_font.png"},{bytes:149,md5:"36a4e0254102bd4e87e0d65bf9bbc68e",name:"grid.png"},{bytes:2197,md5:"37d9558189dd4cbffe736595c840600d",name:"particles.pex"},{bytes:221,md5:"f1414380ccbb1cf9e58069cba28e904b",name:"sprite.png"}],team_sb_catcher:[{bytes:10124,md5:"4e9945c78eaeff93819876cd50836e19",name:"sbsp_catcher.json"},{bytes:160667,md5:"762305d8bcaeb17d28e13b8beed0f84f",name:"sbsp_catcher.png"}],sprites_env2:[{bytes:20744,md5:"81f5d4b35042e151642c5186be02106e",name:"city_back.png"},{bytes:18712,
md5:"52157b5de97c8f4230bddad59888c046",name:"city_front.png"},{bytes:12435,md5:"13b18a0037e914d2f75fdf26ab4b38d8",name:"clouds_1.png"},{bytes:11681,md5:"51e9b0692d98e296af99c3a3f2d7d2bc",name:"clouds_2.png"},{bytes:43789,md5:"ac991ee63cce7b5e4ae445db3e201dde",name:"sky.jpg"}],sprites_env1:[{bytes:11865,md5:"14445934a297d10842abd538a305f634",name:"city_back.png"},{bytes:60343,md5:"8944636bded348affe45e87f0d390bef",name:"city_front.png"},{bytes:14784,md5:"77750097f740defde0a1382d8e1fdc05",name:"clouds_1.png"},
{bytes:13554,md5:"f4243d178ba81e4b3510a6bfcafa09df",name:"clouds_2.png"},{bytes:7565,md5:"a1706925c8cc555cb004a61225e64dd4",name:"sky.jpg"}],brittany_batter:[{bytes:11660,md5:"252a8a5dae927aa69a0ba7191fe000e8",name:"brittany_batter0.json"},{bytes:421582,md5:"5197c78d1621fcfd692bfcaf88e088fd",name:"brittany_batter0.png"},{bytes:11474,md5:"53ef328307dcc5cacda0af21772c9a9c",name:"brittany_batter1.json"},{bytes:364128,md5:"591ed71788efe74af55411551b64566b",name:"brittany_batter1.png"},{bytes:15075,md5:"f5d8f885068fd314a5e7625bcee8af24",
name:"brittany_batter_meta.json"}],sprites_highend:[{bytes:6444,md5:"d2fa1ca9055ce2eb84e2889cfee0badd",name:"alien_saucer/alien_saucer.json"},{bytes:41316,md5:"d59de2857fe6389576c355b9ae131009",name:"alien_saucer/alien_saucer.png"},{bytes:4461,md5:"70e1a3d5bf6a2f8300414761c0ea86ac",name:"billboard/ad_down_1_1.jpg"},{bytes:5355,md5:"1757f84f82152a72b70a914e143722e8",name:"billboard/ad_down_1_2.jpg"},{bytes:10034,md5:"f4a8bd08b9de9452b731aa7a9dbf772b",name:"billboard/ad_down_2_alvin.jpg"},{bytes:10034,
md5:"f4a8bd08b9de9452b731aa7a9dbf772b",name:"billboard/ad_down_2_asami.jpg"},{bytes:10034,md5:"f4a8bd08b9de9452b731aa7a9dbf772b",name:"billboard/ad_down_2_brittany.jpg"},{bytes:9115,md5:"2f01a06e35d9db11269393c755b9bb03",name:"billboard/ad_down_2_buhdeuce.jpg"},{bytes:8923,md5:"c1832c89da8996d06ed1e68d35849f28",name:"billboard/ad_down_2_craig.jpg"},{bytes:9823,md5:"6944260588be2f475da85cce48203012",name:"billboard/ad_down_2_donnie.jpg"},{bytes:8434,md5:"165333e56545308613eee4a50d55acf8",name:"billboard/ad_down_2_fee.jpg"},
{bytes:9021,md5:"143660fd04e0f9de27753f7d876d1408",name:"billboard/ad_down_2_foo.jpg"},{bytes:9569,md5:"7db4c4744e8fb06bfaf96245c889af3e",name:"billboard/ad_down_2_korra.jpg"},{bytes:9579,md5:"2b6bcbe9d3d4b27a421bdf7851f8e8d7",name:"billboard/ad_down_2_leo.jpg"},{bytes:10135,md5:"a3c9a81570c8538f4fd372988c52e928",name:"billboard/ad_down_2_mike.jpg"},{bytes:9699,md5:"7076ae2e5f413a1ac04266a739cfc1d2",name:"billboard/ad_down_2_patrick.jpg"},{bytes:9922,md5:"cff7dc6ab30543e754f51550ed0af0f5",name:"billboard/ad_down_2_raph.jpg"},
{bytes:8134,md5:"c69243062d26996ed98e33b40568253f",name:"billboard/ad_down_2_sanjay.jpg"},{bytes:10529,md5:"81dc0dde8284ec61c06d0130e139c05a",name:"billboard/ad_down_2_spongebob.jpg"},{bytes:9237,md5:"7a0a2d9ac33625848cfec087c7a0e734",name:"billboard/ad_down_2_swaysway.jpg"},{bytes:3842,md5:"cd9d31e430d332bb6f67f7d4c27ef7a2",name:"billboard/ad_down_3_1.jpg"},{bytes:5643,md5:"806cde848fd1e11722ba81f034aaee08",name:"billboard/ad_down_3_2.jpg"},{bytes:6761,md5:"90f286d3c040e4f93a1dcd22c150ddba",name:"billboard/ad_down_3_3.jpg"},
{bytes:6773,md5:"4cd952cbf68567c3dcc4f707c891e864",name:"billboard/ad_down_4_1.jpg"},{bytes:4816,md5:"396a58f705a0eb153a56f0e11964aec8",name:"billboard/ad_down_4_2.jpg"},{bytes:3898,md5:"dc3274ea50bf73e4dfe80cf7f396de6a",name:"billboard/ad_up_1_1.jpg"},{bytes:4672,md5:"f9b9d61343e24263ddbe26d227dfbf63",name:"billboard/ad_up_1_2.jpg"},{bytes:4670,md5:"7327648fe6a9f7105892ebc5ce1dc6e3",name:"billboard/ad_up_2_1.jpg"},{bytes:4675,md5:"e0833b61f7e6e3a6258501715d563286",name:"billboard/ad_up_2_2.jpg"},
{bytes:5577,md5:"57659cf26b33fae7816db707a95fad59",name:"billboard/ad_up_3_1.jpg"},{bytes:5744,md5:"c144f6e149124a57d63ae9c61a98fef5",name:"billboard/ad_up_3_2.jpg"},{bytes:4776,md5:"0e7b923c1447fa3b0df1352dc02e2c7b",name:"billboard/ad_up_3_3.jpg"},{bytes:4178,md5:"8d155d1d4d01dc236facdf38cd108d0a",name:"billboard/ad_up_4_1.jpg"},{bytes:3290,md5:"8d75ae1cfec91781ea118a2c6afa6287",name:"billboard/ad_up_4_2.jpg"},{bytes:4038,md5:"54e87d5e58c70aba2a43f6135983887e",name:"billboard/ad_up_4_3.jpg"},{bytes:6280,
md5:"f40e9a220f9734b88f5381b8810393ce",name:"billboard/billboard.png"},{bytes:2666,md5:"d00ce7d9ef2b4479ac1dd5a8d093eb6c",name:"dino/dino0.json"},{bytes:45630,md5:"813c222ae6a120b3ac54086c49193823",name:"dino/dino0.png"},{bytes:2452,md5:"fc808c86701adc4b10f229c9ff99d753",name:"dino/dino1.json"},{bytes:41993,md5:"79a9ad2b117ee2e7002b1255af2f0571",name:"dino/dino1.png"},{bytes:22812,md5:"1c805db4738b2540caf8170b40a27547",name:"start_fence.png"}],text:[{bytes:14845,md5:"34ba5c1f422fcff09f0bacfcf9f896d3",
name:"localization.xml"}],temp:[],config:[{bytes:1158,md5:"c5c074342183d3a8056bc671580e1871",name:"config.json"}],alvin_batter:[{bytes:19326,md5:"be18f6ee291151c0bf78952ed7c60639",name:"alvin_batter0.json"},{bytes:558864,md5:"cd6f5dd13c8e0abdc8676bc9a777db38",name:"alvin_batter0.png"},{bytes:1996,md5:"c054fed5a827a75139b9e0689138883f",name:"alvin_batter1.json"},{bytes:62299,md5:"5e9c2a2b874600d5d121a74261ba1988",name:"alvin_batter1.png"},{bytes:9846,md5:"726b9c464c8e9a71b997d306c435f565",name:"alvin_batter_meta.json"}],
craig_pitcher:[{bytes:5398,md5:"48a2676b8529035b74337dacf0f22093",name:"craig_pitcher0.json"},{bytes:172017,md5:"0effeedcb6e527842d2b6f65a4c64c9f",name:"craig_pitcher0.png"},{bytes:142,md5:"7d5096b454b01c9a72bb46e92f76762e",name:"craig_pitcher_meta.json"}]}]}};Qa._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();s._scratchPoint=new La;Ke.NEWLINE=new Yg(10);dd._sharedEvent=new mk;Sc._sharedEvent=
new nk;sb._sharedEvent=new ok;cf.CANVAS_TEXTURES=(new Pb("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);ua._mediaRefCount=0;ua._detectBlobSupport=!0;oa.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];oa.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new Pb("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);wa._detectSupport=!0;hd._scratchMatrix=new ed;W.canadaTrackingEnabled=!1;W.isReady=!1;Tb.defaultPack="ui_loading";vd.Grid={offsetX:-5,offsetY:-75,leo:{x:490,y:235},mike:{x:419,
y:310},donnie:{x:428,y:154},raph:{x:567,y:159},sanjay:{x:610,y:406},craig:{x:681,y:332},buhdeuce:{x:466,y:403},swaysway:{x:539,y:332},spongebob:{x:609,y:258},patrick:{x:681,y:184},korra:{x:822,y:184},asami:{x:752,y:256},alvin:{x:753,y:408},brittany:{x:683,y:479},fee:{x:826,y:333},foo:{x:896,y:258}};Md.Grid={x:192,y:100,spacing:{x:235,y:132}};Nd.Grid={offsetX:-205,offsetY:25,leo:{x:408,y:155},mike:{x:330,y:240},donnie:{x:337,y:73},raph:{x:489,y:71},sanjay:{x:538,y:357},craig:{x:616,y:274},buhdeuce:{x:381,
y:349},swaysway:{x:460,y:267},spongebob:{x:540,y:187},patrick:{x:618,y:103},korra:{x:775,y:109},asami:{x:698,y:189},fee:{x:715,y:342},foo:{x:792,y:256},alvin:{x:798,y:426},brittany:{x:875,y:339}};V.availableCodes="FULLHOUSE,HOUSEKEYS,SUPERBALL,DREAMFIELD,MAXPOWER,BEEFCAKE,HARDCORE,MAKEITRAIN,THATSNOMOON,THATSNOMOON,MAGNIFY,JULYFOURTH,NIGHTLIFE,GOJIRA,MARSATTACK".split(",");V.codesUnlocked=[];wh.DefaultScene="title";wh.scenes=function(){var a=new C;a.set("Loading",jc);a.set("Gameplay",xh);a.set("GameplayLoading",
zh);a.set("DerbyLoading",Bh);a.set("Editor",Ch);a.set("EditorLoading",Dh);a.set("Win",Eh);a.set("DerbyWin",Fh);a.set("Fail",se);a.set("End",kf);a.set("Title",Gh);a.set("Test",Hh);a.set("SelectMode",Ih);a.set("SelectCharacter",vd);a.set("SelectLevel",Md);a.set("Stats",Nd);a.set("Pause",Jh);a.set("PromoScreen",V);a.set("Help",Kh);a.set("NewCharacter",Lh);a.set("NickSportPopup",Mh);return a}(this);yc.SOUND_CHANNEL="COLLECTABLE";wd.DEFAULTS={value:0.1,knockBackX:0,knockBackY:0,cooldown:0.3,charge:-1,
enabled:!0,target:"DAMAGEABLE"};Yf.DEFAULTS={value:0.1,knockBackX:0,knockBackY:0,cooldown:0.3,charge:-1,enabled:!0,target:"DAMAGEABLE",velocityDamageTheshold:500,velocityLoss:0.8};te.maxPower=100;$f.DEFAULTS={removeOnDeath:!0,hideOnLastState:!0,disablePhysicsOnLastState:!0,disableExplosionForSlowDevices:!0,asset:"example",states:3,lastStateType:"explode"};H.EDITOR_EXCLUDE=["forceUpdate","initialized","_parentViewMatrixUpdateCount","_viewMatrixUpdateCount"];H.ENABLE_POINTER=!1;H.mobilePackSuffix="_mobile";
H.lowEndPackSuffix="_low";ul.components=function(){var a=new C;a.set("character",Xh);a.set("ball",Nh);a.set("ballCollectable",Ph);a.set("calloutText",Uh);a.set("batterCamera",Rh);a.set("ballCamera",Oh);a.set("decorSpawner",Yh);a.set("dinosaur",Zh);a.set("saucer",$h);a.set("billboard",Sh);a.set("batter",te);a.set("batFx",Qh);a.set("pitcher",ai);a.set("catcherSpawner",Wh);a.set("catcher",Vh);a.set("ballDamage",Yf);a.set("destructible",$f);a.set("trajectory",bi);a.set("magnet",ci);a.set("pitchNormal",
di);a.set("pitchFire",ei);a.set("pitchRocket",fi);a.set("pitchSquirrel",gi);a.set("powerMagnet",hi);a.set("powerMulti",ii);a.set("powerRocket",ji);a.set("powerMoon",ki);a.set("moon",li);a.set("travellingCamera",mi);a.set("soundTrigger",ni);a.set("homerun",oi);a.set("toiletTeleport",pi);a.set("nightlifeImage",ri);a.set("star",si);return a}(this);x.$name="nick_baseball";x.width=960;x.height=560;x.slimeBall=!1;x.DERBY_DURATION=60;x.MAX_BALL_CAMERA_POS=4700;x.AUTO_SUPER_MOVE=!0;x.starRatings=[[950,1250,
1500,1900],[1050,1400,1750,2100],[1100,1450,1800,2200],[1200,1600,2E3,2450],[1300,1750,2200,2650],[1400,1450,1850,2850],[1700,2250,2700,3500],[1800,2400,3200,3750],[2150,2800,3600,4300]];x.starRatingsHardcore=[[1300,1750,2200,2650],[1500,2E3,2500,2950],[1600,2100,2600,3200],[1750,2300,3E3,3500],[1900,2550,3100,3800],[2E3,2650,3300,4100],[2500,3300,4100,5E3],[2700,3600,4700,5400],[3100,4050,5150,6200]];x.levelPitches=[["pitcher_ball_normal"],["pitcher_ball_normal"],["pitcher_ball_normal","pitcher_ball_normal",
"pitcher_ball_normal","pitcher_ball_fire"],["pitcher_ball_normal","pitcher_ball_normal","pitcher_ball_normal","pitcher_ball_fire"],"pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_fire,pitcher_ball_butterfly".split(","),"pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_fire,pitcher_ball_butterfly".split(","),"pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_fire,pitcher_ball_butterfly,pitcher_ball_rocket".split(","),
"pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_fire,pitcher_ball_butterfly,pitcher_ball_rocket".split(","),"pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_normal,pitcher_ball_fire,pitcher_ball_butterfly,pitcher_ball_rocket".split(",")];x.derbyPitches=["pitcher_ball_fire"];x.levelBallsQty=[5,7,6,6,7,6,5,6,6];ga.WAKE=1;ga.PROPS=2;ga.ANGDRAG=4;ga.ARBITERS=8;zc.gravity=600;zc.ballMaterial=new Oe(1.2,6,6,1,2);zc.slimeMaterial=new Oe(1.4,
6,6,1.1,2);zc.superballMaterial=new Oe(1.6,6,6,1,2);zc.colliderMaterial=new Oe(0,6,6,1,2);I.TEAM_TMNT="team_tmnt";I.TEAM_SANJAY_CRAIG="team_sc";I.TEAM_BREADWINNERS="team_bw";I.TEAM_SPONGE_BOB="team_sb";I.TEAM_KORRA="team_korra";I.TEAM_HARVEY_BEAKS="team_hb";I.TEAM_ALVINS="team_alvin";I.donnie={name:"donnie",team:I.TEAM_TMNT,locked:-1,unlocks:"raph",partners:["leo","mike","raph"],speed:2,endurance:2,power:2,sm_type:"rocket"};I.raph={name:"raph",team:I.TEAM_TMNT,locked:-1,unlocks:null,partners:["raph",
"leo","mike"],speed:2,endurance:2,power:2,sm_type:"moon"};I.leo={name:"leo",team:I.TEAM_TMNT,locked:-1,unlocks:"mike",partners:["mike","donnie","raph"],speed:2,endurance:2,power:2,sm_type:"multi"};I.mike={name:"mike",team:I.TEAM_TMNT,locked:-1,unlocks:null,partners:["leo","donnie","raph"],speed:2,endurance:2,power:2,sm_type:"magnet"};I.sanjay={name:"sanjay",team:I.TEAM_SANJAY_CRAIG,locked:-1,unlocks:"craig",partners:["sanjay"],speed:2,endurance:2,power:2,sm_type:"moon"};I.craig={name:"craig",team:I.TEAM_SANJAY_CRAIG,
locked:-1,unlocks:null,partners:["craig"],speed:2,endurance:2,power:2,sm_type:"magnet"};I.buhdeuce={name:"buhdeuce",team:I.TEAM_BREADWINNERS,locked:-1,unlocks:"swaysway",partners:["swaysway"],speed:2,endurance:2,power:2,sm_type:"rocket"};I.swaysway={name:"swaysway",team:I.TEAM_BREADWINNERS,locked:-1,unlocks:null,partners:["buhdeuce"],speed:2,endurance:2,power:2,sm_type:"multi"};I.spongebob={name:"spongebob",team:I.TEAM_SPONGE_BOB,locked:-1,unlocks:"patrick",partners:["patrick"],speed:3,endurance:2,
power:1,sm_type:"multi"};I.patrick={name:"patrick",team:I.TEAM_SPONGE_BOB,locked:-1,unlocks:null,partners:["spongebob"],speed:2,endurance:2,power:2,sm_type:"magnet"};I.korra={name:"korra",team:I.TEAM_KORRA,locked:-1,unlocks:"asami",partners:["asami"],speed:2,endurance:2,power:2,sm_type:"moon"};I.asami={name:"asami",team:I.TEAM_KORRA,locked:-1,unlocks:null,partners:["korra"],speed:2,endurance:2,power:2,sm_type:"magnet"};I.fee={name:"fee",team:I.TEAM_HARVEY_BEAKS,locked:-1,unlocks:"foo",partners:["foo"],
speed:2,endurance:2,power:2,sm_type:"rocket"};I.foo={name:"foo",team:I.TEAM_HARVEY_BEAKS,locked:-1,unlocks:null,partners:["fee"],speed:2,endurance:2,power:2,sm_type:"multi"};I.alvin={name:"alvin",team:I.TEAM_ALVINS,locked:-1,unlocks:"brittany",partners:["brittany"],speed:2,endurance:2,power:2,sm_type:"rocket"};I.brittany={name:"brittany",team:I.TEAM_ALVINS,locked:-1,unlocks:null,partners:["alvin"],speed:2,endurance:2,power:2,sm_type:"moon"};I.list=[I.donnie,I.raph,I.leo,I.mike,I.buhdeuce,I.swaysway,
I.spongebob,I.patrick,I.sanjay,I.craig,I.korra,I.asami,I.fee,I.foo,I.alvin,I.brittany];m.inTournament=!0;m.hasWon=!1;m.score=0;m.oks=0;m.goods=0;m.perfects=0;m.starsCollected=0;m.superAbilityActivated=0;m.timeInRound=0;m.slimeBall=!1;Jb._levelCache=new C;ha.LIST="level1,level2,level3,level4,level5,level6,level7,level8,level9".split(",");ha.DERBY_LIST=["derby1","derby2","derby3","derby4","derby5"];Rb.USE_CACHE=!1;Rb.USE_ENUM_INDEX=!1;Rb.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
ub.DEFAULT_RESOLVER=ca;ub.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";of.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";of.BYTES=zd.ofString(of.CHARS);db.count=0;Hd.escapes=function(){var a=new C;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);hb.SCALE=1;Xb.BASE_URL="";xa.SCALE=1;xa.hasInit=!1;xa._tmp=1;ta.enabled=!1;t.epsilon=1.0E-8;t.fluidAngularDragFriction=
2.5;t.fluidAngularDrag=100;t.fluidVacuumDrag=0.5;t.fluidLinearDrag=0.5;t.collisionSlop=0.2;t.collisionSlopCCD=0.5;t.distanceThresholdCCD=0.05;t.staticCCDLinearThreshold=0.05;t.staticCCDAngularThreshold=0.005;t.bulletCCDLinearThreshold=0.125;t.bulletCCDAngularThreshold=0.0125;t.dynamicSweepLinearThreshold=17;t.dynamicSweepAngularThreshold=0.6;t.angularCCDSlipScale=0.75;t.arbiterExpirationDelay=6;t.staticFrictionThreshold=2;t.elasticThreshold=20;t.sleepDelay=60;t.linearSleepThreshold=0.2;t.angularSleepThreshold=
0.4;t.contactBiasCoef=0.3;t.contactStaticBiasCoef=0.6;t.contactContinuousBiasCoef=0.4;t.contactContinuousStaticBiasCoef=0.5;t.illConditionedThreshold=2E8;aa.staging="localhost,stolo.com,192.168,hudson.mtvi.com,stash.mtvi.com,nick-q".split(",");aa.onMute=new T;aa.onPause=new pa;aa.onResume=new pa;va.REDIRECT_URL="";va.DOMAIN_LIST=[];va.REDIRECT_DELAY=3E4;va.GET_DOMAINS_DELAY=3E3;ic.output_event_array=[];F.tweens=new db;F.DefaultTime=0.4;F.DefaultEase=D.quintOut;vl.bounceDownTemplate=[{to:{y:"+=10"},
time:0.05,ease:D.quintOut},{then:{y:"+=0"},time:0.3,ease:D.backOut}];Zb.DefaultMovePPS=100;Zb.DefaultMoveSpeed=1;Zb.DefaultMoveTime=1;Zb.DefaultMoveEase=D.quadInOut;J.onTemplateAdded=new T;J.onActorData=new T;J._registeredComponents=new C;J._componentMap=new C;J._templateMap=new C;mb.EDITOR_DEFAULTS={};pd.DefaultFont="debug_font";pd.DEFAULTS={center:!0,shape:{},text:""};tg.EDITOR_EXCLUDE=["key","spawner"];Gd.EDITOR_EXCLUDE=["direction"];Gd.EDITOR_METHODS=["flip"];lf.EDITOR_EXCLUDE=["forceUpdate",
"initialized","_parentViewMatrixUpdateCount","_viewMatrixUpdateCount"];vg.DEFAULTS={layer:"default",offset:{x:0,y:0},color:16711680,width:100,height:100,transparency:0};wg.DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},overrides:{},start:null,autoRemove:!1,delay:0,loop:!0,fps:-1};Wc.COMPONENT_NAME="pattern";$b.DEFAULTS={cullTexture:!0,drawTexture:!1};$b.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",grid:"default",offset:{x:0,y:0},xsize:2,ysize:2,tileWidth:100,tileHeight:100,mapping:[[4],
[7],[1],[6],[1],[4],[0],[3],[1],[8],[4],[7],[2],[5],[1],[4]],cornerMode:!1,cullTexture:!0,cache:!0};$b.tileCache=new C;$b.cache=new C;qc.DEFAULTS=$b.DEFAULTS;qc.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},width:200,height:200,slices:[],template:[]};qc.cache=new C;Ec.USE_CACHE=!0;Ec.CACHE=new C;Xc.EDITOR_EXCLUDE="_complexShape,initialized,forceUpdate,setTransform,enabled,velocity,impulse".split(",");Xc.defaultDamping=0;Xc.DEFAULT_SHAPE={x:0,y:0,width:0,height:0,padding:{left:0,
top:0,right:0,bottom:0},docking:{left:0,top:0,right:0,bottom:0},sensor:!1,material:null,fluid:null,points:[]};Xc.DEFAULTS={shape:{},offset:{x:0,y:0},contacts:!0,mass:0,massScale:-1,bullet:!1,velocity:{x:0,y:0},impulse:{x:0,y:0},kinematic:!1,enabled:!0};yg.DEFAULTS={};zg.DEFAULTS={left:!0,right:!0,top:!1,bottom:!0};Ag.DEFAULTS={};wf.defaultResistance=2;qb.SOUND_CHANNEL="DAMAGE";qb.SOUND_CHANNEL_DEATH="DEATH";qb.DEFAULTS={maximum:1,knock:1,cooldown:0,invincible:!1,disposeOwner:!1,removePhysics:!0,damageSound:"",
invincibleSound:"",deathSound:""};ze.DEFAULTS={projectile:"",offset:{x:0,y:0},force:100,angle:0,launchSound:"",shotDelay:1};mf.DEFAULTS={projectile:"",projectiles:5,offset:{x:0,y:0},force:400,angle:-90,angleSpread:50,launchSound:"",shotDelay:0};Bg.DEFAULTS={removeAfter:0,stopPhysicOnExplode:!1,velocityRotation:!1,explodeSound:"",hitSound:"",expire:0,ignoreProjectiles:!0,target:"ANY_BODY"};Cg.DEFAULTS={sequence:null,repeat:!1,speed:1};Ol.ComponentMap=function(){var a=new C;a.set("debug",pd);a.set("template",
tg);a.set("transform",Gd);a.set("moveTransform",gj);a.set("moveSequence",ug);a.set("cameraTarget",bj);a.set("cameraTargetDirection",cj);a.set("editorSelection",vf);a.set("display",H);a.set("image",lf);a.set("fill",vg);a.set("animation",mb);a.set("flump",wg);a.set("pattern",Wc);a.set("tiler",$b);a.set("slicer",qc);a.set("text",ij);a.set("scroller",xd);a.set("layerScroller",Od);a.set("positionLock",jj);a.set("skew",Zi);a.set("line",Ec);a.set("shadow",kj);a.set("physics",Xc);a.set("physicsDebug",xg);
a.set("passthrough",yg);a.set("passthroughable",zg);a.set("frictioner",Ag);a.set("forceField",mj);a.set("airFriction",wf);a.set("spawnPoint",nj);a.set("damage",wd);a.set("health",qb);a.set("collector",fj);a.set("collectable",yc);a.set("launcher",ze);a.set("exploder",mf);a.set("projectile",Bg);a.set("checkpoint",dj);a.set("checkpointer",ej);a.set("platform",Cg);a.set("bouncer",aj);a.set("mods",Ue);a.set("stats",Dg);a.set("speedAdjuster",ef);a.set("disposer",bb);return a}(this);kc.DEFAULT_FONT="debug_font";
ne.SMALL_STEP_MODIFIER=i.Shift;yf.COMPONENT_NAME="editor_pattern_resizer";zf.COMPONENT_NAME="editor_polygons";Ye.COMPONENT_NAME="editor_remover";pj.map=function(){var a=new C;a.set(yf.COMPONENT_NAME,yf);a.set(zf.COMPONENT_NAME,zf);a.set(Ye.COMPONENT_NAME,Ye);return a}(this);Yc.spriteComponents="image,fill,animation,flump,pattern,tiler,slicer,text,scroller,layerScroller,line,spine,tile_pattern".split(",");E.isInEditor=-1;Ta.defaultComponentsRegistered=!1;f.internal=!1;f.id_ImmState_ACCEPT=1;f.id_ImmState_IGNORE=
2;f.id_ImmState_ALWAYS=4;f.id_GravMassMode_DEFAULT=0;f.id_GravMassMode_FIXED=1;f.id_GravMassMode_SCALED=2;f.id_InertiaMode_DEFAULT=0;f.id_MassMode_DEFAULT=0;f.id_MassMode_FIXED=1;f.id_BodyType_STATIC=1;f.id_BodyType_DYNAMIC=2;f.id_BodyType_KINEMATIC=3;f.id_ListenerType_BODY=0;f.id_ListenerType_CONSTRAINT=1;f.id_ListenerType_INTERACTION=2;f.id_PreFlag_ACCEPT=1;f.id_ListenerType_PRE=3;f.id_CbEvent_BEGIN=0;f.id_CbEvent_ONGOING=6;f.id_CbEvent_END=1;f.id_InteractionType_COLLISION=1;f.id_CbEvent_WAKE=2;
f.id_InteractionType_SENSOR=2;f.id_CbEvent_SLEEP=3;f.id_InteractionType_FLUID=4;f.id_CbEvent_BREAK=4;f.id_InteractionType_ANY=7;f.id_CbEvent_PRE=5;f.id_ShapeType_CIRCLE=0;f.id_ShapeType_POLYGON=1;null==f.CbEvent_PRE&&(f.internal=!0,f.CbEvent_PRE=new Yb,f.internal=!1);Ba.PRELISTENER=f.CbEvent_PRE;null==f.CbEvent_BEGIN&&(f.internal=!0,f.CbEvent_BEGIN=new Yb,f.internal=!1);Ba.BEGIN=f.CbEvent_BEGIN;null==f.CbEvent_END&&(f.internal=!0,f.CbEvent_END=new Yb,f.internal=!1);Ba.END=f.CbEvent_END;null==f.CbEvent_ONGOING&&
(f.internal=!0,f.CbEvent_ONGOING=new Yb,f.internal=!1);Ba.ONGOING=f.CbEvent_ONGOING;null==f.InteractionType_COLLISION&&(f.internal=!0,f.InteractionType_COLLISION=new $a,f.internal=!1);Ia.COLLISION=f.InteractionType_COLLISION;null==f.InteractionType_SENSOR&&(f.internal=!0,f.InteractionType_SENSOR=new $a,f.internal=!1);Ia.SENSOR=f.InteractionType_SENSOR;null==f.InteractionType_FLUID&&(f.internal=!0,f.InteractionType_FLUID=new $a,f.internal=!1);Ia.FLUID=f.InteractionType_FLUID;null==f.InteractionType_ANY&&
(f.internal=!0,f.InteractionType_ANY=new $a,f.internal=!1);Ia.ANY=f.InteractionType_ANY;Aa.ANY_BODY="ANY_BODY";Aa.DEFAULT="DEFAULT";Aa.PLAYER="PLAYER";Aa.FRICTIONER="FRICTIONER";Aa.FLUID="FLUID";Aa.LAUNCHER="LAUNCHER";Aa.PROJECTILE="PROJECTILE";Aa.COLLECTABLE="COLLECTABLE";Aa.COLLECTOR="COLLECTOR";Aa.ACTIVABLE="ACTIVABLE";Aa.ACTIVATOR="ACTIVATOR";Aa.PASSTHROUGH="PASSTHROUGH";Aa.PASSTHROUGHABLE="PASSTHROUGHABLE";Aa.CHECKPOINT="CHECKPOINT";Aa.CHECKPOINTER="CHECKPOINTER";Aa.TELEPORTER="TELEPORTER";Aa.TELEPORTABLE=
"TELEPORTABLE";Aa.DAMAGEABLE="DAMAGEABLE";Aa.DAMAGER="DAMAGER";Aa.DAMAGEABLE_MOB="DAMAGEABLE_MOB";Aa.MOB="MOB";Aa.OBSTACLE="OBSTACLE";Aa.GROUND="GROUND";Aa.WALL="WALL";Aa.BOUNCER="BOUNCER";Tc._materialMap=new C;Fc.maxSize=5184;Re.addedMethod="onActorAdded";ie.DEFAULT_OFFET_TIME=1;ie.DEFAULT_OFFET_EASING=D.quadInOut;Af.enabled=!1;A.onManifestInit=new gb;A._cachedPacks=new C;A._replacedPacks=new C;A._protectedPacks=new C;A._loadingPacks=new C;A._loadingPacksDict=new db;A._jsonCache=new C;A._xmlCache=
new C;Sa.localesMap=new C;Sa.NOT_FOUND_PREFIX="[(";Sa.NOT_FOUND_SUFFIX=")]";G.CaseSensitive=!1;G.SkipChange=!1;G.onChange=new pa;G.onPop=new pa;G.onPush=new pa;G._sceneMap=new C;v.channels=new C;v.soundPollingMap=new C;v.soundPollingSeconds=0.1;v.defaultVolume=1;v.defaultMusicVolume=1;v._volume=v.defaultVolume;v._unmuteVolume=v.defaultVolume;Ja.DefaultFileName="{{name}}/{{name}}.json";Ja.DefaultManifest="sprites";Ja._cachedSpritesheets=new C;Ja._loadingSpritesheets=new C;K.defaultFontName="default";
K.ChangePixelSnapping=!0;K._fontMap=new C;K._fontStylesMap=new C;vb.verbose=!1;cc.DefaultFPS=12;cc.BaseIndex=1;Bf.BaseIndex=cc.BaseIndex;r.galaxyS2=["GT-I9100","SCH-i929","GT-I9105"];r.galaxyS3="GT-I9300,GT-I9300I,GT-I9305,GT-I8190,GT-I8200,SGH-I747".split(",");r.galaxyS4="GT-I9500,GT-I9502,GT-I9505,GT-I9190,GT-I9195,SCH-I545,SPH-L720,SGH-M919,SGH-I337,SM-C101".split(",");r.galaxyTab2=["GT-P5110","GT-P3110","GT-P5100"];r.ie9=["MSIE 9"];r.ie10=["MSIE 10"];r.lowPerformanceDevices=[r.galaxyS2,r.galaxyS3,
r.galaxyS4,r.galaxyTab2,r.ie9,r.ie10];r.lowMemoryDevices=[r.galaxyS2,r.galaxyS3,r.galaxyS4,r.galaxyTab2];r.lowPerformance=!1;r.lowMemory=!1;r.power=80;r.ipadVersion=4;r.scale=1;r.onScaleChange=new pa;O._spritesheets=new db;Fa.DefaultMovePPS=100;Fa.DefaultMoveSpeed=1;Fa.DefaultMoveTime=1;Fa.DefaultMoveEase=D.quadInOut;Mb.hasInit=!1;w.sdkVersion="Stolo Haxe v1.1.4";w.platforms={web:{desktop:"NICKWEB_DESKTOP",desktop_flash:"NICKWEB_DESKTOP",mobile:"NICKWEB_MOBILE",tablet:"NICKWEB_TABLET"},app:{android:"ANDROID_MOBILEAPP",
ios:"IOS_MOBILEAPP"}};w.debug=!1;w.allowLiveKey=!0;w.useTimezoneOffset=!1;w.isLive=!1;w.isReady=!1;w.isNewPlayer=!1;w.userIDStorageField="UserId";w.onReady=new pa;Hg.DEFAULT_EASING=D.quadInOut;Nb._Interactor=0;Nb._CbType=0;Nb._CbSet=0;Nb._Listener=0;mc.ANY_SHAPE=new ue;mc.ANY_BODY=new ue;mc.ANY_COMPOUND=new ue;mc.ANY_CONSTRAINT=new ue;Kb.UCbSet=new Ef;Kb.VCbSet=new Ef;Kb.WCbSet=new Ef;Kb.UCbType=new Db;Kb.VCbType=new Db;Kb.WCbType=new Db;ma.internal=!1;ma.COL=1;ma.FLUID=4;ma.SENSOR=2;fc.internal=
!1;R.flowpoly=new Kg;R.flowsegs=new Kg;var jm;null==f.BodyType_STATIC&&(f.internal=!0,f.BodyType_STATIC=new Bb,f.internal=!1);jm=f.BodyType_STATIC;var km;null==f.BodyType_DYNAMIC&&(f.internal=!0,f.BodyType_DYNAMIC=new Bb,f.internal=!1);km=f.BodyType_DYNAMIC;null==f.BodyType_KINEMATIC&&(f.internal=!0,f.BodyType_KINEMATIC=new Bb,f.internal=!1);Td.types=[null,jm,km,f.BodyType_KINEMATIC];sa.internal=!1;Oc.tmpaabb=new Pa;Lb.internal=!1;le.internal=!1;qg.internal=!1;we.internal=!1;ve.internal=!1;ld.internal=
!1;sf.internal=!1;kg.internal=!1;lg.internal=!1;jg.internal=!1;rg.internal=!1;Fd.internal=!1;ig.internal=!1;Bd.internal=!1;hg.internal=!1;ud.main()})();
