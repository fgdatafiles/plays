!function(e){function t(t){for(var i,n,o=t[0],h=t[1],c=t[2],r=0,d=[];r<o.length;r++)n=o[r],a[n]&&d.push(a[n][0]),a[n]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(e[i]=h[i]);for(l&&l(t);d.length;)d.shift()();return _.push.apply(_,c||[]),s()}function s(){for(var e,t=0;t<_.length;t++){for(var s=_[t],i=!0,o=1;o<s.length;o++){var h=s[o];0!==a[h]&&(i=!1)}i&&(_.splice(t--,1),e=n(n.s=s[0]))}return e}var i={},a={0:0},_=[];function n(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=i,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window.webpackJsonp=window.webpackJsonp||[],h=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=h;_.push([651,1]),s()}({1748:function(e,t,s){"use strict";s.r(t);s(818);var i=s(1),a=s.n(i),_=s(17),n=s(647);const o=Object.freeze({NONE:"NONE",BANANA:"BANANA",CINNAMON:"CINNAMON",PINEAPPLE:"PINEAPPLE",CORN:"CORN",PEANUTS:"PEANUTS",TOMATO_SAUCE:"TOMATO_SAUCE",WHEAT:"WHEAT",OATS:"OATS",APPLES:"APPLES",BERRIES:"BERRIES",RAW_CORN:"RAW_CORN",EGGS:"EGGS",HONEY:"HONEY",MUSHROOM:"MUSHROOM",ONIONS:"ONIONS",TOMATOES:"TOMATOES"}),h=Object.freeze({NONE:0,APPLEPIE:1,TACOS:2,OATMEAL:3,PIZZA:4,SANDWICH:5,CORNBREAD:6}),c=Object.freeze({BOOT:"boot",PRELOAD:"preload",TRANSITION:"transition",TITLE:"Title Screen",GAME:"game",CUTSCENE_INTRO:"Intro Animation Screen",RECIPE_SELECT:"Recipe Selection Screen",CUTSCENE_MISSING_ING:"Ingredient List Screen",CUTSCENE_ING_EXPLANATION:"Ingredient Source Screen",CUTSCENE_LAUNCH:"Gong Screen",WORLD_COLLECTION:"WORLD_COLLECTION",WORLD_DRIVING:"Driving Screen",WORLD_ASSEMBLY:"Cooking Screen",DEBUG:"debug"}),l=Object.freeze({APPLICATION:"ApplicationPlugin",CAPTIONS:"captions-plugin",FACTORY:"FactoryPlugin",SCALE_MANAGER:"ScaleManagerPlugin"}),r=Object.freeze({INITIAL_SCENE:c.BOOT,WIDTH:1320,HEIGHT:780,CENTER_X:660,CENTER_Y:390,SAFE_WIDTH:1024,SAFE_HEIGHT:660,GRAVITY:.098,VO_REMINDER_TIMER:10,MUSIC_VOL:.4,GAME_NAME:"Cookie Monster's Foodie Truck",IS_SESAME:!1,DEBUG_CAPTION:!1}),d=Object.freeze({SPEED:-300}),p=Object.freeze({default:"en",locales:{en:{path:"assets/en/"},es:{path:"assets/es/"}}}),E=Object.freeze({ENGLISH:"en",SPANISH:"es"});let u=new Map;const T=[[0,1,2],[0,1,2],[0,1,2],[0,1,2],[0,1,2],[0,1,2]];const y=[[o.CINNAMON,o.WHEAT,o.APPLES],[o.CORN,o.ONIONS,o.TOMATOES],[o.CINNAMON,o.OATS,o.BERRIES],[o.PINEAPPLE,o.TOMATO_SAUCE,o.MUSHROOM],[o.BANANA,o.PEANUTS,o.HONEY],[o.WHEAT,o.RAW_CORN,o.EGGS]];let g=0;let C={x:0,y:0};let m=!1;let M=Date.now();let b=[{roundNumber:0,startTime:0},{roundNumber:0,startTime:0},{roundNumber:0,startTime:0},{roundNumber:0,startTime:0},{roundNumber:0,startTime:0},{roundNumber:0,startTime:0}];var R={velMod:0,isMobile:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))},getValue:function(e){return u.get(e)},setValue:function(e,t){u.set(e,t)},getMissingList:function(){return T},getRecipeIngList:function(){return y},getMyScore:function(){return g},setMyScore:function(e){g=e},offsetPos:function(){return C},getIsPaused:function(){return m},setIsPaused:function(e){m=e},getStartTime:function(){return M},getRoundData:function(){return b},playthroughComplete:function(){return b[0].roundNumber>0&&b[1].roundNumber>0&&b[2].roundNumber>0&&b[3].roundNumber>0&&b[4].roundNumber>0&&b[5].roundNumber>0}};const N=Object.freeze({ENUM_RECIPE:"ENUM_RECIPE",ENUM_INGREDIENT:"ENUM_INGREDIENT",BOOL_FIRST_PLAY:"BOOL_FIRST_PLAY",BOOL_CRANK_HAS_TURNED:"BOOL_CRANK_HAS_TURNED",BOOL_FARM_HAS_TAPPED:"BOOL_FARM_HAS_TAPPED",ENUM_TRANSITION_TO:"ENUM_TRANSITION_TO",ENUM_CURRENT_SCREEN:"ENUM_CURRENT_SCREEN",ENUM_CURRENT_ROUND:"ENUM_CURRENT_ROUND",ENUM_COMPONENT_NAME:"ENUM_COMPONENT_NAME",ENUM_COMPONENT_TYPE:"ENUM_COMPONENT_TYPE",BOOL_PLAYTHROUGH_COMPLETE:"BOOL_PLAYTHROUGH_COMPLETE",FLOAT_VO_DELAY:"FLOAT_VO_DELAY"}),O=Object.freeze({CURSOR_ACTIVATE:"CURSOR_ACTIVATE",CURSOR_DEACTIVATE:"CURSOR_DEACTIVATE",SPAWN_CINNAMON_STICK:"SPAWN_CINNAMON_STICK",DO_HIT:"DO_HIT",SPAWN_PARTICLE:"SPAWN_PARTICLE",ON_RESIZE:"ON_RESIZE",ON_SR_PAUSE:"ON_SR_PAUSE",ON_SR_RESUME:"ON_SR_RESUME"}),I=Object.freeze({BG:0,MAIN:1,FG:9998,UI:9999}),k=Object.freeze({DOWN:0,UP:1,MOVE:2}),w=Object.freeze({PRELOAD:"preload",CUTSCENE_INTRO:"cutscene-intro",CUTSCENE_MISING_ING:"cutscene-missing_ingredient",CUTSCENE_ING_EXPL:"cutscene-ingredient_explanation",CUTSCENE_OUTRO:"cutscene-outro",DRIVING:"driving",BUILD_RECIPE_APPLEPIE:"build_recipe-applepie",BUILD_RECIPE_SANDWICH:"build_recipe-sandwich",BUILD_RECIPE_PIZZA:"build_recipe-pizza",BUILD_RECIPE_CORNBREAD:"build_recipe-cornbread",BUILD_RECIPE_OATMEAL:"build_recipe-oatmeal",BUILD_RECIPE_TACOS:"build_recipe-tacos",ING_COL_FACTORY:"ingredient_collection-factory",ING_COL_CINNAMON:"ingredient_collection-cinnamon",ING_COL_EGG:"ingredient_collection-egg",ING_COL_HONEY:"ingredient_collection-honey",ING_COL_FARM:"ingredient_collection-farm",ING_COL_VO:"ingredient_collection-vo"}),S={preload:[{key:"CMFT_1.0_1",type:"audio"},{key:"CMFT_1.0_2",type:"audio"},{key:"CMFT_2.0_9",type:"audio"},{key:"CMFT_2.0_10",type:"audio"},{key:"CMFT_2.0_11",type:"audio"},{key:"CMFT_2.0_12",type:"audio"},{key:"CMFT_2.0_17",type:"audio"},{key:"CMFT_2.0_18",type:"audio"},{key:"CMFT_7.0_190",type:"audio"},{key:"CMFT_7.0_191",type:"audio"},{key:"CMFT_7.0_192",type:"audio"},{key:"CMFT_7.0_193",type:"audio"},{key:"CMFT_7.0_194",type:"audio"},{key:"CMFT_7.0_195_alt",type:"audio"},{key:"CMFT_2.0_14",type:"audio"},{key:"CMFT_2.0_15",type:"audio"},{key:"CMFT_2.0_16",type:"audio"},{key:"main_theme",type:"audio",path:"./assets/preload/audio/"},{key:"driving_music",type:"audio",path:"./assets/preload/audio/"},{key:"transition_sfx",type:"audio",path:"./assets/preload/audio/"},{key:"button_click",type:"audio",path:"./assets/preload/audio/"},{key:"preload",type:"atlas",path:"./assets/preload/",filename:"preload"},{key:"splash",type:"image",path:"./assets/preload/",filename:"splash",ext:".jpg"},{key:"recipe_selection_bg",type:"image",path:"./assets/preload/recipe_selection/",filename:"recipe_selection_bg",ext:".jpg"},{key:"loading_transition",type:"spine",path:"./assets/preload/",filename:"loading_transition"}],"cutscene-intro":[{key:"CMFT_1.1_3",type:"audio"},{key:"CMFT_1.1_4",type:"audio"},{key:"CMFT_1.1_5",type:"audio"},{key:"CMFT_1.1_6",type:"audio"},{key:"CMFT_1.1_7",type:"audio"},{key:"CMFT_1.1_8",type:"audio"},{key:"cutscene_bg",type:"image",path:"./assets/cutscenes/",filename:"cutscene_bg",ext:".jpg"},{key:"intro_countertop",type:"image",path:"./assets/cutscenes/",filename:"intro_countertop",ext:".jpg"},{key:"Cookie",type:"spine",path:"./assets/cutscenes/",filename:"Cookie"},{key:"Gonger",type:"spine",path:"./assets/cutscenes/",filename:"Gonger"}],"cutscene-missing_ingredient":[{key:"CMFT_2.1_19",type:"audio"},{key:"CMFT_2.1_20",type:"audio"},{key:"CMFT_2.1_21",type:"audio"},{key:"CMFT_2.1_22",type:"audio"},{key:"CMFT_2.1_23",type:"audio"},{key:"CMFT_2.1_24",type:"audio"},{key:"CMFT_7.0_196",type:"audio"},{key:"CMFT_7.0_197",type:"audio"},{key:"CMFT_7.0_198",type:"audio"},{key:"CMFT_7.0_199",type:"audio"},{key:"CMFT_7.0_200",type:"audio"},{key:"CMFT_7.0_201",type:"audio"},{key:"CMFT_7.0_202",type:"audio"},{key:"CMFT_7.0_203",type:"audio"},{key:"CMFT_7.0_204_alt",type:"audio"},{key:"CMFT_7.0_205_alt",type:"audio"},{key:"CMFT_7.0_206",type:"audio"},{key:"CMFT_7.0_207",type:"audio"},{key:"CMFT_7.0_208",type:"audio"},{key:"CMFT_7.0_209",type:"audio"},{key:"CMFT_7.0_210",type:"audio"},{key:"CMFT_7.0_211",type:"audio"},{key:"CMFT_7.0_212",type:"audio"},{key:"CMFT_7.0_213",type:"audio"},{key:"CMFT_7.0_214",type:"audio"},{key:"CMFT_7.0_215",type:"audio"},{key:"CMFT_7.0_216",type:"audio"},{key:"CMFT_7.0_217",type:"audio"},{key:"CMFT_7.0_218",type:"audio"},{key:"CMFT_7.0_219",type:"audio"},{key:"CMFT_7.0_220",type:"audio"},{key:"CMFT_7.0_221",type:"audio"},{key:"CMFT_7.0_222",type:"audio"},{key:"CMFT_7.0_223",type:"audio"},{key:"CMFT_7.0_224",type:"audio"},{key:"CMFT_7.0_225",type:"audio"},{key:"CMFT_7.0_226",type:"audio"},{key:"CMFT_7.0_227",type:"audio"},{key:"CMFT_7.0_228",type:"audio"},{key:"CMFT_7.0_229",type:"audio"},{key:"CMFT_7.0_230",type:"audio"},{key:"CMFT_7.0_231",type:"audio"},{key:"CMFT_7.0_232",type:"audio"},{key:"CMFT_7.0_233",type:"audio"},{key:"CMFT_7.0_234",type:"audio"},{key:"CMFT_7.0_235",type:"audio"},{key:"CMFT_7.0_236",type:"audio"},{key:"CMFT_7.0_237",type:"audio"},{key:"CMFT_7.0_238",type:"audio"},{key:"CMFT_7.0_239",type:"audio"},{key:"CMFT_7.0_240",type:"audio"},{key:"CMFT_7.0_241",type:"audio"},{key:"CMFT_7.0_242",type:"audio"},{key:"CMFT_7.0_243",type:"audio"},{key:"CMFT_7.0_244",type:"audio"},{key:"CMFT_7.0_245",type:"audio"},{key:"CMFT_7.0_246",type:"audio"},{key:"CMFT_7.0_247",type:"audio"},{key:"CMFT_7.0_248",type:"audio"},{key:"CMFT_7.0_249",type:"audio"},{key:"CMFT_7.0_250",type:"audio"},{key:"CMFT_7.0_251",type:"audio"},{key:"CMFT_7.0_252",type:"audio"},{key:"CMFT_7.0_253",type:"audio"},{key:"CMFT_7.0_254",type:"audio"},{key:"CMFT_7.0_255",type:"audio"},{key:"CMFT_7.0_256",type:"audio"},{key:"CMFT_7.0_257",type:"audio"},{key:"CMFT_7.0_258",type:"audio"},{key:"CMFT_7.0_259",type:"audio"},{key:"CMFT_7.0_260",type:"audio"},{key:"CMFT_7.0_261",type:"audio"},{key:"CMFT_7.0_262",type:"audio"},{key:"CMFT_7.0_263",type:"audio"},{key:"CMFT_7.0_264",type:"audio"},{key:"CMFT_7.0_265",type:"audio"},{key:"CMFT_7.0_266",type:"audio"},{key:"CMFT_7.0_267_alt",type:"audio"},{key:"CMFT_7.0_268",type:"audio"},{key:"CMFT_7.0_269",type:"audio"},{key:"CMFT_7.0_270",type:"audio"},{key:"CMFT_7.0_271",type:"audio"},{key:"CMFT_7.0_272",type:"audio"},{key:"CMFT_7.0_273_alt",type:"audio"},{key:"CMFT_7.0_274",type:"audio"},{key:"CMFT_7.0_275",type:"audio"},{key:"ingredient_list_bg",type:"image",path:"./assets/preload/missing_ing/",filename:"ingredient_list_bg",ext:".jpg"}],"cutscene-ingredient_explanation":[{key:"CMFT_4.0_38",type:"audio"},{key:"CMFT_4.0_39",type:"audio"},{key:"CMFT_4.0_40",type:"audio"},{key:"CMFT_4.0_41",type:"audio"},{key:"CMFT_4.0_42",type:"audio"},{key:"ingredient_source_flour",type:"image",path:"./assets/preload/ingredient_source/",filename:"ingredient_source_flour",ext:".jpg"},{key:"ingredient_source_oats",type:"image",path:"./assets/preload/ingredient_source/",filename:"ingredient_source_oats",ext:".jpg"},{key:"ingredient_source_peanutbutter",type:"image",path:"./assets/preload/ingredient_source/",filename:"ingredient_source_peanutbutter",ext:".jpg"},{key:"ingredient_source_tomatosauce",type:"image",path:"./assets/preload/ingredient_source/",filename:"ingredient_source_tomatosauce",ext:".jpg"},{key:"ingredient_source_tortilla",type:"image",path:"./assets/preload/ingredient_source/",filename:"ingredient_source_tortilla",ext:".jpg"}],"cutscene-outro":[{key:"CMFT_6.0_163",type:"audio"},{key:"CMFT_6.0_164",type:"audio"},{key:"CMFT_6.0_165",type:"audio"},{key:"CMFT_6.0_166",type:"audio"},{key:"CMFT_6.0_178",type:"audio"},{key:"CMFT_6.0_179",type:"audio"},{key:"CMFT_6.0_180",type:"audio"},{key:"CMFT_6.0_181",type:"audio"},{key:"CMFT_6.0_167",type:"audio"},{key:"CMFT_6.0_168",type:"audio"},{key:"CMFT_6.0_169",type:"audio"},{key:"CMFT_6.0_170",type:"audio"},{key:"CMFT_6.0_171",type:"audio"},{key:"CMFT_6.0_172",type:"audio"},{key:"CMFT_6.0_173_alt",type:"audio"},{key:"CMFT_6.0_174",type:"audio"},{key:"CMFT_6.0_175_alt",type:"audio"},{key:"CMFT_6.0_176_alt",type:"audio"},{key:"CMFT_6.0_177",type:"audio"},{key:"CMFT_7.0_276",type:"audio"},{key:"CMFT_7.0_277",type:"audio"},{key:"CMFT_7.0_278",type:"audio"},{key:"CMFT_7.0_279",type:"audio"},{key:"CMFT_7.0_280",type:"audio"},{key:"CMFT_7.0_281",type:"audio"},{key:"CMFT_5.6_153",type:"audio"},{key:"CMFT_5.6_154",type:"audio"},{key:"CMFT_5.6_155",type:"audio"},{key:"CMFT_5.6_156",type:"audio"},{key:"CMFT_5.6_157",type:"audio"},{key:"CMFT_5.6_158",type:"audio"},{key:"CMFT_5.6_159",type:"audio"},{key:"CMFT_5.6_160",type:"audio"},{key:"CMFT_5.6_161",type:"audio"},{key:"CMFT_5.6_162",type:"audio"},{key:"pie_cooking",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"food_chop",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"shucking_corn",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"ingredients_pour",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"egg_crack",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"cooking",type:"audio",path:"./assets/preload/audio/"},{key:"pour_liquid",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"poof_drop",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"food_mixing",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"spread_item",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"pour_blub",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"banana_peel",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"cheese_sprinkle",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"bread_drop",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"honey_spread",type:"audio",path:"./assets/gameplay/build_recipe/audio/"},{key:"gong",type:"audio",path:"./assets/cutscenes/"},{key:"catapult",type:"audio",path:"./assets/cutscenes/"},{key:"cutscene_bg",type:"image",path:"./assets/cutscenes/",filename:"cutscene_bg",ext:".jpg"},{key:"outro_gong_bg",type:"image",path:"./assets/cutscenes/",filename:"outro_gong_bg",ext:".jpg"},{key:"outro_delivery_bg",type:"image",path:"./assets/cutscenes/",filename:"outro_delivery_bg",ext:".jpg"},{key:"outro_delivery_bag",type:"image",path:"./assets/cutscenes/",filename:"outro_delivery_bag",ext:".png"},{key:"Cookie",type:"spine",path:"./assets/cutscenes/",filename:"Cookie"},{key:"Gonger",type:"spine",path:"./assets/cutscenes/",filename:"Gonger"}],driving:[{key:"CMFT_7.0_182",type:"audio"},{key:"CMFT_7.0_183",type:"audio"},{key:"CMFT_7.0_184",type:"audio"},{key:"CMFT_3.0_25",type:"audio"},{key:"CMFT_3.0_26",type:"audio"},{key:"CMFT_3.0_27",type:"audio"},{key:"CMFT_3.0_28",type:"audio"},{key:"CMFT_3.0_29_alt",type:"audio"},{key:"CMFT_3.0_30",type:"audio"},{key:"CMFT_3.0_31",type:"audio"},{key:"CMFT_3.0_32",type:"audio"},{key:"CMFT_3.0_33",type:"audio"},{key:"CMFT_3.0_33b",type:"audio"},{key:"CMFT_3.0_34",type:"audio"},{key:"CMFT_3.0_35_alt",type:"audio"},{key:"CMFT_3.0_36",type:"audio"},{key:"CMFT_3.0_37",type:"audio"},{key:"truck_honk",type:"audio",path:"./assets/gameplay/driving/"},{key:"truck_vroom",type:"audio",path:"./assets/gameplay/driving/"},{key:"truck_rev_loop",type:"audio",path:"./assets/gameplay/driving/"},{key:"car_horn_crash",type:"audio",path:"./assets/gameplay/driving/"},{key:"cone_crash",type:"audio",path:"./assets/gameplay/driving/"},{key:"rock_crash",type:"audio",path:"./assets/gameplay/driving/"},{key:"splash",type:"audio",path:"./assets/gameplay/driving/"},{key:"driving",type:"atlas",path:"./assets/gameplay/driving/",filename:"driving"},{key:"cloud_1",type:"image",path:"./assets/gameplay/shared_bg_elements/",filename:"cloud_1",ext:".png"},{key:"cloud_2",type:"image",path:"./assets/gameplay/shared_bg_elements/",filename:"cloud_2",ext:".png"},{key:"basket",type:"image",path:"./assets/gameplay/ingredient_collection/",filename:"basket",ext:".png"},{key:"driving_urban_bg",type:"image",path:"./assets/gameplay/driving/",filename:"driving_urban_bg",ext:".jpg"},{key:"driving_farm_bg",type:"image",path:"./assets/gameplay/driving/",filename:"driving_farm_bg",ext:".png"},{key:"driving_jungle_bg",type:"image",path:"./assets/gameplay/driving/",filename:"driving_jungle_bg",ext:".png"},{key:"foodtruck",type:"spine",path:"./assets/gameplay/driving/",filename:"foodtruck"}],"build_recipe-applepie":[{key:"CMFT_5.3_118",type:"audio"},{key:"CMFT_5.2_97",type:"audio"},{key:"CMFT_5.3_119",type:"audio"},{key:"CMFT_5.3_120",type:"audio"},{key:"CMFT_5.2_102",type:"audio"},{key:"CMFT_5.3_121",type:"audio"},{key:"CMFT_5.3_122",type:"audio"},{key:"CMFT_5.3_123",type:"audio"},{key:"CMFT_5.2_101",type:"audio"},{key:"CMFT_5.3_124",type:"audio"},{key:"CMFT_5.3_125",type:"audio"},{key:"CMFT_5.2_108",type:"audio"},{key:"CMFT_5.3_126",type:"audio"},{key:"CMFT_5.3_127",type:"audio"},{key:"CMFT_5.2_113",type:"audio"},{key:"CMFT_5.2_117",type:"audio"},{key:"CMFT_5.1_91",type:"audio"},{key:"CMFT_5.3_128",type:"audio"},{key:"CMFT_5.3_129",type:"audio"},{key:"CMFT_5.3_130",type:"audio"},{key:"CMFT_5.2_112",type:"audio"},{key:"CMFT_5.3_131",type:"audio"},{key:"br_pie",type:"atlas",path:"./assets/gameplay/build_recipe/pie/",filename:"br_pie"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"},{key:"build_recipe",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"build_recipe"},{key:"mixing",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"mixing"}],"build_recipe-sandwich":[{key:"CMFT_5.0_73",type:"audio"},{key:"CMFT_5.0_74",type:"audio"},{key:"CMFT_5.0_75",type:"audio"},{key:"CMFT_5.0_76",type:"audio"},{key:"CMFT_5.0_77",type:"audio"},{key:"CMFT_5.0_78",type:"audio"},{key:"CMFT_5.0_80",type:"audio"},{key:"CMFT_5.0_81",type:"audio"},{key:"CMFT_5.0_82",type:"audio"},{key:"CMFT_5.0_83",type:"audio"},{key:"br_sandwich",type:"atlas",path:"./assets/gameplay/build_recipe/sandwich/",filename:"br_sandwich"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"}],"build_recipe-pizza":[{key:"CMFT_5.1_84",type:"audio"},{key:"CMFT_5.1_85",type:"audio"},{key:"CMFT_5.1_86_alt",type:"audio"},{key:"CMFT_5.1_87",type:"audio"},{key:"CMFT_5.1_88",type:"audio"},{key:"CMFT_5.1_89",type:"audio"},{key:"CMFT_5.1_90",type:"audio"},{key:"CMFT_5.1_91",type:"audio"},{key:"CMFT_5.1_92",type:"audio"},{key:"CMFT_5.1_93",type:"audio"},{key:"CMFT_5.1_94",type:"audio"},{key:"CMFT_5.1_95",type:"audio"},{key:"br_pizza",type:"atlas",path:"./assets/gameplay/build_recipe/pizza/",filename:"br_pizza"},{key:"br_pie",type:"atlas",path:"./assets/gameplay/build_recipe/pie/",filename:"br_pie"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"},{key:"build_recipe",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"build_recipe"}],"build_recipe-cornbread":[{key:"CMFT_5.2_96",type:"audio"},{key:"CMFT_5.2_97",type:"audio"},{key:"CMFT_5.2_98",type:"audio"},{key:"CMFT_5.2_99",type:"audio"},{key:"CMFT_5.2_100",type:"audio"},{key:"CMFT_5.2_101",type:"audio"},{key:"CMFT_5.2_102",type:"audio"},{key:"CMFT_5.2_103",type:"audio"},{key:"CMFT_5.2_104",type:"audio"},{key:"CMFT_5.2_105",type:"audio"},{key:"CMFT_5.2_106",type:"audio"},{key:"CMFT_5.2_107",type:"audio"},{key:"CMFT_5.2_108",type:"audio"},{key:"CMFT_5.2_109",type:"audio"},{key:"CMFT_5.2_110",type:"audio"},{key:"CMFT_5.2_111",type:"audio"},{key:"CMFT_5.2_112",type:"audio"},{key:"CMFT_5.2_113",type:"audio"},{key:"CMFT_5.2_114",type:"audio"},{key:"CMFT_5.2_115",type:"audio"},{key:"CMFT_5.2_116",type:"audio"},{key:"CMFT_5.2_117",type:"audio"},{key:"br_cornbread",type:"atlas",path:"./assets/gameplay/build_recipe/cornbread/",filename:"br_cornbread"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"},{key:"build_recipe",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"build_recipe"},{key:"mixing",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"mixing"}],"build_recipe-oatmeal":[{key:"CMFT_5.4_132",type:"audio"},{key:"CMFT_5.4_133",type:"audio"},{key:"CMFT_5.4_134",type:"audio"},{key:"CMFT_5.4_135",type:"audio"},{key:"CMFT_5.4_136",type:"audio"},{key:"CMFT_5.4_137",type:"audio"},{key:"CMFT_5.4_138",type:"audio"},{key:"CMFT_5.4_139",type:"audio"},{key:"CMFT_5.4_140",type:"audio"},{key:"CMFT_5.4_141",type:"audio"},{key:"CMFT_5.2_117",type:"audio"},{key:"CMFT_5.0_83",type:"audio"},{key:"CMFT_5.4_142",type:"audio"},{key:"CMFT_5.3_131",type:"audio"},{key:"br_oatmeal",type:"atlas",path:"./assets/gameplay/build_recipe/oatmeal/",filename:"br_oatmeal"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"},{key:"build_recipe",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"build_recipe"},{key:"mixing",type:"spine",path:"./assets/gameplay/build_recipe/spine/",filename:"mixing"}],"build_recipe-tacos":[{key:"CMFT_5.5_143",type:"audio"},{key:"CMFT_5.5_144",type:"audio"},{key:"CMFT_5.5_145",type:"audio"},{key:"CMFT_5.5_146_alt",type:"audio"},{key:"CMFT_5.5_147",type:"audio"},{key:"CMFT_5.5_148_alt",type:"audio"},{key:"CMFT_5.5_149",type:"audio"},{key:"CMFT_5.5_150",type:"audio"},{key:"CMFT_5.5_151",type:"audio"},{key:"CMFT_5.1_95",type:"audio"},{key:"CMFT_5.5_152",type:"audio"},{key:"br_taco",type:"atlas",path:"./assets/gameplay/build_recipe/taco/",filename:"br_taco"},{key:"build_recipe_atlas",type:"atlas",path:"./assets/gameplay/build_recipe/",filename:"build_recipe"},{key:"build_recipe_bg",type:"image",path:"./assets/gameplay/build_recipe/",filename:"build_recipe_bg",ext:".jpg"}],"ingredient_collection-factory":[{key:"factory_bg",type:"image",path:"./assets/gameplay/ingredient_collection/factory/",filename:"factory_bg",ext:".jpg"},{key:"factory_handle",type:"image",path:"./assets/gameplay/ingredient_collection/factory/",filename:"handle",ext:".png"},{key:"factory_handle_glow",type:"image",path:"./assets/gameplay/ingredient_collection/factory/",filename:"handle_glow",ext:".png"},{key:"factory",type:"spine",path:"./assets/gameplay/ingredient_collection/factory/",filename:"factory"}],"ingredient_collection-cinnamon":[{key:"ingredient_collection_cinnamon_bg",type:"image",path:"./assets/gameplay/ingredient_collection/cinnamon/",filename:"ingredient_collection_cinnamon_bg",ext:".png"},{key:"cinnamon",type:"atlas",path:"./assets/gameplay/ingredient_collection/cinnamon/",filename:"cinnamon"}],"ingredient_collection-egg":[{key:"CMFT_4.1_49",type:"audio"},{key:"ingredient_collection_egg_bg",type:"image",path:"./assets/gameplay/ingredient_collection/egg/",filename:"ingredient_collection_egg_bg",ext:".jpg"},{key:"ic_egg",type:"atlas",path:"./assets/gameplay/ingredient_collection/egg/",filename:"ic_egg"},{key:"chicken",type:"spine",path:"./assets/gameplay/ingredient_collection/egg/",filename:"chicken"}],"ingredient_collection-honey":[{key:"CMFT_4.1_47",type:"audio"},{key:"CMFT_4.1_48",type:"audio"},{key:"CMFT_4.1_50",type:"audio"},{key:"ingredient_collection_honey_bg",type:"image",path:"./assets/gameplay/ingredient_collection/honey/",filename:"ingredient_collection_honey_bg",ext:".png"},{key:"ic_honey",type:"atlas",path:"./assets/gameplay/ingredient_collection/honey/",filename:"ic_honey"},{key:"honey_jar",type:"spine",path:"./assets/gameplay/ingredient_collection/honey/",filename:"honey_jar"}],"ingredient_collection-farm":[{key:"collect_food",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"collect_food_alt",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"peel_bark",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"factory_crank_turn",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"factory_conveyor",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"factory_grind_alt",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"factory_food_drop_jar",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"factory_seal",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"bee_buzzA",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"bee_buzzB",type:"audio",path:"./assets/gameplay/ingredient_collection/audio/"},{key:"ingredient_collection_corn_bg",type:"image",path:"./assets/gameplay/ingredient_collection/corn/",filename:"ingredient_collection_corn_bg",ext:".png"},{key:"ic_corn",type:"atlas",path:"./assets/gameplay/ingredient_collection/corn/",filename:"ic_corn"},{key:"ingredient_collection_apple_bg",type:"image",path:"./assets/gameplay/ingredient_collection/apple/",filename:"ingredient_collection_apple_bg",ext:".png"},{key:"ic_apple",type:"atlas",path:"./assets/gameplay/ingredient_collection/apple/",filename:"ic_apple"},{key:"ingredient_collection_berries_bg",type:"image",path:"./assets/gameplay/ingredient_collection/berries/",filename:"ingredient_collection_berries_bg",ext:".png"},{key:"ic_berries",type:"atlas",path:"./assets/gameplay/ingredient_collection/berries/",filename:"ic_berries"},{key:"ingredient_collection_mushroom_bg",type:"image",path:"./assets/gameplay/ingredient_collection/mushroom/",filename:"ingredient_collection_mushroom_bg",ext:".jpg"},{key:"ic_mushroom",type:"atlas",path:"./assets/gameplay/ingredient_collection/mushroom/",filename:"ic_mushroom"},{key:"ingredient_collection_onion_bg",type:"image",path:"./assets/gameplay/ingredient_collection/onion/",filename:"ingredient_collection_onion_bg",ext:".png"},{key:"ic_onion",type:"atlas",path:"./assets/gameplay/ingredient_collection/onion/",filename:"ic_onion"},{key:"ingredient_collection_tomato_bg",type:"image",path:"./assets/gameplay/ingredient_collection/tomato/",filename:"ingredient_collection_tomato_bg",ext:".png"},{key:"ic_tomato",type:"atlas",path:"./assets/gameplay/ingredient_collection/tomato/",filename:"ic_tomato"},{key:"ingredient_collection_banana_bg",type:"image",path:"./assets/gameplay/ingredient_collection/banana/",filename:"ingredient_collection_banana_bg",ext:".png"},{key:"ic_banana",type:"atlas",path:"./assets/gameplay/ingredient_collection/banana/",filename:"ic_banana"},{key:"ingredient_collection_pineapple_bg",type:"image",path:"./assets/gameplay/ingredient_collection/pineapple/",filename:"ingredient_collection_pineapple_bg",ext:".png"},{key:"ic_pineapple",type:"atlas",path:"./assets/gameplay/ingredient_collection/pineapple/",filename:"ic_pineapple"}],"ingredient_collection-vo":[{key:"CMFT_4.1_43",type:"audio"},{key:"CMFT_4.1_44",type:"audio"},{key:"CMFT_4.1_45",type:"audio"},{key:"CMFT_4.1_46",type:"audio"},{key:"CMFT_4.1_51",type:"audio"},{key:"CMFT_4.1_52",type:"audio"},{key:"CMFT_4.1_53",type:"audio"},{key:"CMFT_4.1_54",type:"audio"},{key:"CMFT_4.1_55",type:"audio"},{key:"CMFT_4.1_56",type:"audio"},{key:"CMFT_4.1_57",type:"audio"},{key:"CMFT_4.1_58",type:"audio"},{key:"CMFT_4.1_59",type:"audio"},{key:"CMFT_4.1_60",type:"audio"},{key:"CMFT_4.1_61",type:"audio"},{key:"CMFT_4.1_62",type:"audio"},{key:"CMFT_4.1_63",type:"audio"},{key:"CMFT_4.1_64",type:"audio"},{key:"CMFT_4.1_66",type:"audio"},{key:"CMFT_4.1_67",type:"audio"},{key:"CMFT_4.1_68",type:"audio"},{key:"CMFT_4.1_71",type:"audio"},{key:"CMFT_4.1_70",type:"audio"},{key:"CMFT_4.1_72",type:"audio"}]};var A={getList:function(){return S},getData:function(e){let t=null;return Object.entries(S).forEach(([s,i])=>{S[s].forEach(s=>{s.key==e&&(t=s)})}),t}},x=s(648);const P=new _.f(p);let F=[],D=[],f=null,V=[];function v(e,t,s=null,i=.7,_=!1,n=null){null==n&&(n=F);let o=A.getData(t),h=(null!=o.path?o.path:P.primaryLanguage,null!=o.filename?o.filename:o.key,U(t,n));if(null==h){let o=U(t,V);o.data.on("end",function(i){_||(console.log("Finished!",i,t),null!=s&&s(),function(e,t,s,i){let a=U(e,s);if(null!=a){let _=a.playID.length;for(;_>0;)_--,a.playID[_]==t&&a.playID.splice(_,1);!function(e,t,s){let i=t.length;for(;i>0;)if(t[--i].pID==e&&0==t[i].playID.length){t.splice(i,1),s();break}}(e,s,i)}}(t,i,n,()=>{o.data.off("end")}),null!=f&&function(e){if(D.length>0||null==e||null!=e&&null==e.tweens)return;B(),(j=e.tweens.add({targets:f,volume:r.MUSIC_VOL,duration:500,ease:a.a.Math.Easing.Quadratic.Out})).on("update",function(e,t,s){f.data.volume(s.volume)},this)}(e))}),o.data.loop(_),o.data.volume(i),o.playID.push(o.data.play()),n.push(o)}else h.playID.push(h.data.play())}function U(e,t){let s=t.length;for(;s>0;)if(t[--s].pID==e)return t[s];return null}let j=null;function B(){null!=j&&j.stop()}function G(){for(;D.length>0;){let e=D.pop();for(e.data.stop(),e.data.off("end");e.playID.length>0;)e.playID.pop();e=null}}let H=0,L=0,Y=0;var X={loadAudio:function(e,t){let s=A.getData(e),i=null!=s.path?s.path:"./assets/vo/"+P.primaryLanguage+"/",a=null!=s.filename?s.filename:s.key;if(null==U(e,V)){let s=new x.Howl({src:[i+a+".mp3",i+a+".ogg"]});s.once("load",function(){console.log("[WMAudio]",e,"is loaded!"),t()}),V.push({data:s,pID:e,playID:[],volume:1})}else console.log("[WMAudio]",e,"is already loaded!"),t()},playAudio:v,playVO:function(e,t,s=null,i=1,_=0,n=!1,o=!0,h={}){e.time.delayedCall(_,()=>{o&&G(),v(e,t,s,1,n,D),r.IS_SESAME||e.captions.playCaption(t,0,h),null!=f&&function(e){B(),(j=e.tweens.add({targets:f,volume:.1,duration:200,ease:a.a.Math.Easing.Quadratic.Out})).on("update",function(e,t,s){f.data.volume(s.volume)},this)}(e)})},stopAllVOs:G,playMusic:function(e,t="",s=.3){if(null!=f&&f.pID==t)return;if(null!=f){for(f.data.stop();f.playID.length>0;)f.playID.pop();f=null}let i=U(t,V);i.data.loop(!0),i.data.volume(s),i.playID.push(i.data.play()),f=i},setVolume:function(e,t){let s=U(e,F);null==s?console.log("[WMAudio] Sound doesn't exist"):(s.data.volume(t),s=null)},stopAudio:function(e){let t=F.length;for(;t>0;)if(F[--t].pID==e){let e=F.splice(t,1);for(e[0].data.stop(),e[0].data.off("end");e[0].playID.length>0;)e[0].playID.pop();e=null;break}},onFocus:function(){console.log("Music is Resumed"),f.data.play(),F.forEach(e=>{e.data.play()}),D.forEach(e=>{e.data.play()})},onBlur:function(){console.log("Music is Paused"),f.data.pause(),F.forEach(e=>{e.data.pause()}),D.forEach(e=>{e.data.pause()})},isPlaying:function(e){let t=F.length;for(;t>0;)if(F[--t].pID==e)return!0;return!1},getMusic:function(){return f.data},getMusicVol:function(){return H},getVOVol:function(){return L},getSFXVol:function(){return Y},setMusicVol:function(e){H=e},setVOVol:function(e){L=e},setSFXVol:function(e){Y=e}};let W=0;function z(e,t){if(e.cache.game.textures.exists(t.key))console.log(t.key,"atlas already existed!");else{let s=t.path,i=null!=t.filename?t.filename:t.key;e.load.multiatlas(t.key,s+i+".json",s)}}function Q(e,t){e.cache.game.textures.exists(t.key)?console.log(t.key,"image already existed!"):e.load.image(t.key,t.path+t.filename+t.ext)}function Z(e,t){let s=null!=t.filename?t.filename:t.key;e.load.setPath(t.path),e.load.spine(t.key,s+".json",[s+".atlas"],!0),e.load.setPath("")}var K={load:function(e,t){let s=A.getList()[t];for(let t of s)"audio"==t.type&&(W++,X.loadAudio(t.key,()=>{console.log("[AssetManager]",t.key,"loaded!"),W--})),"atlas"==t.type&&z(e,t),"image"==t.type&&Q(e,t),"spine"==t.type&&Z(e,t);console.log("totalAudio ",W)},totalAudio:function(){return W}};function $(e){return"gameInteraction"==e.event?"ObjectClick":"gameRecipeSelect"==e.event?"RecipeClick":e.event.substring(4,e.event.length)}function q(e){switch(e.event){case"gamePlay":return e.buttonName;case"gameTimeoutPlay":case"gameTOReEngage":return"ScreenName_"+e.screenName;case"gameComponentStart":case"gameComponentComplete":return e.componentType;case"gameRoundStart":case"gameRoundComplete":return"Round Number_"+e.roundNumber+"_Round Name_"+e.roundName+"_Screen Name_"+e.screenName;case"gamePlaythroughComplete":return"Playthrough Completed";case"gameQuit":return e.screenName;case"gameInteraction":return"Object_food_truck_Screen Name_"+e.screenName;case"gameRecipeSelect":return"Recipe_"+e.roundName;case"gameMenuClick":return"MenuButton_"+e.roundName;case"gameAchievement":return"Achievement_"+e.achievementType;case"gameSkip":return"ScreenName_"+e.screenName}}let J=0;window.onbeforeunload=function(){if(J>=1);else if(r.IS_SESAME)window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"gameQuit",gameName:r.GAME_NAME,screenName:R.getValue(N.ENUM_CURRENT_SCREEN),duration:Math.round((Date.now()-R.getStartTime())/1e3),language:"English",timestamp:Date.now()});else{let e="Game_"+r.GAME_NAME,t=$(pData),s=q(pData),i=null!=pData.duration?pData.duration:0;console.log("[ServiceAnalytics] googleAnalytics",ee,e,t,s,i),ee.event(e,t,s,i)}J+=1};let ee=null;var te={dataLayerTracking:function(e){if(e.gameName=r.GAME_NAME,e.screenName=R.getValue(N.ENUM_CURRENT_SCREEN),e.language="English",e.timestamp=Date.now(),r.IS_SESAME)window.dataLayer=window.dataLayer||[],window.dataLayer.push(e),console.log("[ServiceAnalytics] window.dataLayer ",window.dataLayer[window.dataLayer.length-1]);else{let t="Game_"+r.GAME_NAME,s=$(e),i=q(e),a=null!=e.duration?e.duration:0;console.log("[ServiceAnalytics] googleAnalytics",ee,t,s,i,a),ee.event(t,s,i,a)}},getGoogleAnalytics:function(){return ee},setGoogleAnalytics:function(e){ee=e}};var se=s(649);class ie extends se.a{constructor(e){super(),this.camera=e}onResize({scale:e,offset:t,gameSize:s}){this.camera.setViewport(-t.x,-t.y,s.x,s.y),this.camera.scene.events.emit(O.ON_RESIZE,{width:r.WIDTH/e.x,height:r.HEIGHT/e.y,scale:e})}}const ae=Object.freeze({NONE:0,STEP_1:1,STEP_2:2,STEP_3:3,STEP_4:4,STEP_5:5,STEP_6:6,STEP_7:7,STEP_8:8,STEP_9:9,STEP_10:10,END:11});class _e{constructor(e,t=0){this.scene=e,this.centerX=t,this.active=!1,this.voReminder=0,this.playGoodVO=!0,this.goodVODelay=0,this._firstGood=!0,this._prevSelection=-1,this.buildMinigame(),R.setValue(N.BOOL_FARM_HAS_TAPPED,!1),R.setValue(N.ENUM_CURRENT_SCREEN,"Collection "+this._getIng()+" Screen"),this._inactiveState=!1,this._timeStamp=0,this._startTime=Date.now(),this._introVOComplete=!1,this.setState(ae.NONE)}_getIng(){return"Apples"}dispose(){this.scene=null,this.state=null}buildMinigame(){}setState(e){switch(this.state=e,this.state){case ae.STEP_1:this.scene.time.delayedCall(500,()=>{this.active=!0,X.playVO(this.scene,this.getIntroVO(),()=>{R.getValue(N.ENUM_INGREDIENT)==o.CINNAMON||R.getValue(N.ENUM_INGREDIENT)==o.HONEY?this.continueVOIntro():(this._doBounce(),X.playVO(this.scene,this._getMissingIngVOs(),()=>{this.continueVOIntro()}))})});break;case ae.END:console.log("COLLECTION_STATE.END"),R.getValue(N.ENUM_INGREDIENT)==o.EGGS?X.playVO(this.scene,"CMFT_4.1_49",()=>{this.doWinVO()}):R.getValue(N.ENUM_INGREDIENT)==o.HONEY?X.playVO(this.scene,"CMFT_4.1_50",()=>{this.doWinVO()}):this.doWinVO()}}continueVOIntro(){switch(R.getValue(N.ENUM_INGREDIENT)){case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:this._doFactoryContVO();break;case o.CINNAMON:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{this._doBounce(),X.playVO(this.scene,"CMFT_4.1_46",()=>{this.active=!0,this._introVOComplete=!0,this.voReminder=r.VO_REMINDER_TIMER})});break;case o.HONEY:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{this._doBounce(),X.playVO(this.scene,"CMFT_4.1_48",()=>{this.active=!0,this._introVOComplete=!0,this.voReminder=r.VO_REMINDER_TIMER})});break;default:X.playVO(this.scene,R.isMobile()?"CMFT_4.1_63":"CMFT_4.1_64",()=>{this._doBounce(),X.playVO(this.scene,this._getMissingIngVOs(),()=>{this.active=!0,this.voReminder=r.VO_REMINDER_TIMER})})}}getIntroVO(){let e="CMFT_4.1_43";switch(R.getValue(N.ENUM_INGREDIENT)){case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:e="CMFT_4.1_44";break;case o.CINNAMON:e="CMFT_4.1_45";break;case o.HONEY:e="CMFT_4.1_47";break;case o.APPLES:case o.BERRIES:case o.RAW_CORN:case o.MUSHROOM:case o.ONIONS:case o.TOMATOES:e="CMFT_4.1_43"}return e}doGoodVO(){if(this.voReminder=r.VO_REMINDER_TIMER,(this._introVOComplete||R.getValue(N.ENUM_INGREDIENT)!=o.HONEY&&R.getValue(N.ENUM_INGREDIENT)!=o.CINNAMON)&&!(this.goodVODelay>0)){if(this.playGoodVO){this.voReminder=r.VO_REMINDER_TIMER,this.goodVODelay=3;let e=0;switch(R.getValue(N.ENUM_INGREDIENT)){case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:for(e=a.a.Math.Between(0,3);e==this._prevSelection;)e=a.a.Math.Between(0,3);switch(this._prevSelection=e,e){case 0:X.playVO(this.scene,"CMFT_4.1_55");break;case 1:X.playVO(this.scene,"CMFT_4.1_56",()=>{X.playVO(this.scene,this._getMissingIngVO())});break;case 2:X.playVO(this.scene,"CMFT_4.1_57");break;case 3:X.playVO(this.scene,"CMFT_4.1_58")}break;default:for(e=a.a.Math.Between(this._firstGood?1:0,3);e==this._prevSelection;)e=a.a.Math.Between(0,3);switch(this._prevSelection=e,this._firstGood=!1,e){case 0:X.playVO(this.scene,"CMFT_4.1_51",()=>{X.playVO(this.scene,this._getMissingIngVO())});break;case 1:X.playVO(this.scene,"CMFT_4.1_52");break;case 2:X.playVO(this.scene,"CMFT_4.1_53");break;case 3:X.playVO(this.scene,"CMFT_4.1_54",()=>{X.playVO(this.scene,this._getMissingIngVOs())})}}}this.playGoodVO=!this.playGoodVO}}doWinVO(){switch(a.a.Math.Between(0,3)){case 0:X.playVO(this.scene,"CMFT_4.1_59",()=>{X.playVO(this.scene,this._getMissingIngVOs(),()=>{this.doEnd()})});break;case 1:X.playVO(this.scene,"CMFT_4.1_60",()=>{this.doEnd()});break;case 2:X.playVO(this.scene,"CMFT_4.1_61",()=>{this.doEnd()});break;case 3:X.playVO(this.scene,"CMFT_4.1_62",()=>{this.doEnd()})}}doEnd(){this.scene.time.delayedCall(1e3,()=>{let e=Math.round((Date.now()-this._startTime)/1e3);te.dataLayerTracking({event:"gameComponentComplete",roundName:R.getValue(N.ENUM_CURRENT_ROUND),duration:e,componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),R.getValue(N.ENUM_TRANSITION_TO)==c.DEBUG?this.scene.scene.start(c.TITLE):(R.setValue(N.ENUM_TRANSITION_TO,c.WORLD_ASSEMBLY),this.scene.scene.start(c.TRANSITION))})}_doBounce(){}_getMissingIngVOs(){let e="CMFT_7.0_247";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:e="CMFT_7.0_247";break;case o.CINNAMON:e="CMFT_7.0_259";break;case o.PINEAPPLE:e="CMFT_7.0_248";break;case o.CORN:e="CMFT_7.0_262";break;case o.PEANUTS:e="CMFT_7.0_252";break;case o.TOMATO_SAUCE:e="CMFT_7.0_255";break;case o.WHEAT:e="CMFT_7.0_258";break;case o.OATS:e="CMFT_7.0_260";break;case o.APPLES:e="CMFT_7.0_249";break;case o.BERRIES:e="CMFT_7.0_261";break;case o.RAW_CORN:e="CMFT_7.0_256";break;case o.EGGS:e="CMFT_7.0_257";break;case o.HONEY:e="CMFT_7.0_253";break;case o.MUSHROOM:e="CMFT_7.0_254";break;case o.ONIONS:e="CMFT_7.0_251";break;case o.TOMATOES:e="CMFT_7.0_250"}return e}_getMissingIngVO(){let e="CMFT_7.0_203";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:e="CMFT_7.0_203";break;case o.CINNAMON:e="CMFT_7.0_212";break;case o.PINEAPPLE:e="CMFT_7.0_205_alt";break;case o.CORN:e="CMFT_7.0_217";break;case o.PEANUTS:e="CMFT_7.0_202";break;case o.TOMATO_SAUCE:e="CMFT_7.0_207";break;case o.WHEAT:e="CMFT_7.0_210";break;case o.OATS:e="CMFT_7.0_213";break;case o.APPLES:e="CMFT_7.0_211";break;case o.BERRIES:e="CMFT_7.0_214";break;case o.RAW_CORN:e="CMFT_7.0_208";break;case o.EGGS:e="CMFT_7.0_209";break;case o.HONEY:e="CMFT_7.0_204_alt";break;case o.MUSHROOM:e="CMFT_7.0_206";break;case o.ONIONS:e="CMFT_7.0_216";break;case o.TOMATOES:e="CMFT_7.0_215"}return e}update(e){const t=e/1e3;this.voReminder>0&&(this.voReminder-=t,this.voReminder<=0&&(this._inactiveState=!0,this._timeStamp=Date.now(),te.dataLayerTracking({event:"gameTimeoutPlay"}),this.voReminder=0,this.doVOReminder())),this.goodVODelay>0&&(this.goodVODelay-=t,this.goodVODelay<=0&&(this.goodVODelay=0))}doVOReminder(){let e;switch(this.state){case ae.STEP_1:switch(R.getValue(N.ENUM_INGREDIENT)){case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:this._doFactoryVO();break;case o.CINNAMON:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{this._doBounce(),X.playVO(this.scene,"CMFT_4.1_46",()=>{this.voReminder=r.VO_REMINDER_TIMER})});break;default:e=R.isMobile()?"CMFT_4.1_63":"CMFT_4.1_64",R.getValue(N.BOOL_FARM_HAS_TAPPED)&&(e=R.isMobile()?"CMFT_4.1_68":"CMFT_4.1_71"),X.playVO(this.scene,e,()=>{this._doBounce(),X.playVO(this.scene,this._getMissingIngVOs(),()=>{this.voReminder=r.VO_REMINDER_TIMER})})}}}_doFactoryContVO(){X.playVO(this.scene,R.isMobile()?"CMFT_4.1_66":"CMFT_4.1_67",()=>{this.voReminder=r.VO_REMINDER_TIMER})}_doFactoryVO(){let e;e=R.isMobile()?"CMFT_4.1_66":"CMFT_4.1_67",R.getValue(N.BOOL_CRANK_HAS_TURNED)&&(e=R.isMobile()?"CMFT_4.1_70":"CMFT_4.1_72"),X.playVO(this.scene,e,()=>{this.voReminder=r.VO_REMINDER_TIMER})}onInput(e,t){switch(this._checkAnalytic(),e){case k.DOWN:case k.MOVE:case k.UP:}}_checkAnalytic(){this._inactiveState&&(this._inactiveState=!1,te.dataLayerTracking({event:"gameTOReEngage",duration:Math.round((Date.now()-this._timeStamp)/1e3)}))}bounceElement(e,t=0){let s=this.scene.tweens.createTimeline();s.add({targets:e,scaleX:e.scaleX*this._getScaleBounce(),scaleY:e.scaleY*this._getScaleBounce(),duration:300,ease:a.a.Math.Easing.Quadratic.In,delay:1e3*t}),s.add({targets:e,scaleX:1*e.scaleX,scaleY:1*e.scaleY,duration:300,ease:a.a.Math.Easing.Quadratic.Out,delay:0}),s.add({targets:e,scaleX:e.scaleX*this._getScaleBounce(),scaleY:e.scaleY*this._getScaleBounce(),duration:300,ease:a.a.Math.Easing.Quadratic.In,delay:0}),s.add({targets:e,scaleX:1*e.scaleX,scaleY:1*e.scaleY,duration:300,ease:a.a.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),s.play()}_getScaleBounce(){return 1.4}}class ne extends a.a.GameObjects.Sprite{constructor(e,t){null==t.asset&&(t.asset=""),null==t.pack&&(t.pack="");let s=t.asset,i=t.pack;""!=i&&(i=t.asset,s=t.pack),null==t.x&&(t.x=0),null==t.y&&(t.y=0),super(e,t.x,t.y,s,i),this.parent=null,null!=t.alpha&&(this.alpha=t.alpha),null!=t.scale&&this.setScale(t.scale,t.scale),null!=t.rotation&&(this.rotation=a.a.Math.DegToRad(t.rotation)),null!=t.tint&&(this.tint=t.tint),null!=t.originX&&(this.originX=t.originX),null!=t.originY&&(this.originY=t.originY),this.updateDisplayOrigin(),this.velocity={x:0,y:0}}preUpdate(e,t){R.getIsPaused()||super.preUpdate(e,t)}updatePosFromVel(e){const t=e/1e3;this.x+=this.velocity.x*t,this.y+=this.velocity.y*t}destroy(){super.destroy()}}const oe=3;class he extends ne{constructor(e,t,s){t.asset="cinnamon_1",t.pack="cinnamon",super(e,t),this.alpha=0,this._peeled=!1,this.peeling=!1,this.barkIndex=0,this.ID=s;let i=this.scene.anims.generateFrameNames("cinnamon",{start:1,end:2,zeroPad:1,prefix:"cinnamon_",suffix:""});this.scene.anims.create({key:"cinn1",frames:i,frameRate:20,repeat:0}),i=this.scene.anims.generateFrameNames("cinnamon",{start:3,end:4,zeroPad:1,prefix:"cinnamon_",suffix:""}),this.scene.anims.create({key:"cinn2",frames:i,frameRate:20,repeat:0}),i=this.scene.anims.generateFrameNames("cinnamon",{start:5,end:5,zeroPad:1,prefix:"cinnamon_",suffix:""}),this.scene.anims.create({key:"cinn3",frames:i,frameRate:20,repeat:0})}get peeled(){return this._peeled}preUpdate(e,t){super.preUpdate(e,t)}destroy(){super.destroy()}onInput(e,t,s,i){if(this._peeled)return-1;switch(e){case k.DOWN:this.peeling=!1;break;case k.MOVE:return t.x>this.x-.5*this.width&&t.x<this.x+.5*this.width&&t.y>this.y-.5*this.height&&t.y<this.y+.5*this.height?(this.updateBark(t.x,t.y,!0,s,i),this.ID):-1;case k.UP:!this.peeling&&t.x>this.x-.5*this.width&&t.x<this.x+.5*this.width&&t.y>this.y-.5*this.height&&t.y<this.y+.5*this.height&&this.updateBark(t.x,t.y,!1,s,i)}}updateBark(e,t,s=!0,i,_){i(),(t>this.y-.5*this.height+this.height/oe*this.barkIndex&&t<this.y-.5*this.height+this.height/oe*(this.barkIndex+1)||!s)&&(this.peeling=!0,0==this.barkIndex&&(this.alpha=1),this.barkIndex++,this.anims.play("cinn"+this.barkIndex),X.playAudio(this.scene,"peel_bark"),this.barkIndex>=oe&&(_(),this._peeled=!0,this.scene.events.emit(O.SPAWN_CINNAMON_STICK,{x:this.x,y:this.y,ID:this.ID}),X.playAudio(this.scene,a.a.Math.FloatBetween(0,1)>.5?"collect_food":"collect_food_alt")))}}class ce extends ne{constructor(e,t,s,i=null,a=!1,_=!0){t.asset=t.assetUp,super(e,t),this.assetUp=t.assetUp,this.assetOver=null!=t.assetOver?t.assetOver:t.assetUp,this.pack=null!=t.pack?t.pack:"",this.onDown=s,this.onOver=i,this.setInteractive(),this.on("pointerover",()=>this.onPointerOver()),this.on("pointerout",()=>this.onPointerOut()),this.on("pointerdown",()=>this.onPointerDown()),this.btnData=new Map,this.ignoreCursor=a,this.active=_,this.onInitDown=null,this._initScale=this.scale}onPointerOver(){console.log("onPointerOver"),this.active&&(this.setTexture(this.pack,this.assetOver),this.ignoreCursor||this.scene.events.emit(O.CURSOR_ACTIVATE),this.scene.tweens.add({targets:this,scale:1.1*this._initScale,alpha:1,duration:150,ease:a.a.Math.Easing.Quadratic.In,delay:0}),null!=this.onOver&&this.onOver())}onPointerOut(){console.log("onPointerOut"),this.active&&(this.setTexture(this.pack,this.assetUp),this.ignoreCursor||this.scene.events.emit(O.CURSOR_DEACTIVATE),this.scene.tweens.add({targets:this,scale:1*this._initScale,alpha:1,duration:150,ease:a.a.Math.Easing.Quadratic.Out,delay:0}))}onPointerDown(){if(console.log("onPointerDown"),!this.active)return;this.active=!1,X.playAudio(this.scene,"button_click"),null!=this.onInitDown&&this.onInitDown(),this.ignoreCursor||this.scene.events.emit(O.CURSOR_DEACTIVATE);let e=this.scene.tweens.createTimeline();e.add({targets:this,scale:1.1*this._initScale,alpha:1,duration:100,ease:a.a.Math.Easing.Quadratic.In,delay:0}),e.add({targets:this,scale:1*this._initScale,duration:400,ease:a.a.Math.Easing.Elastic.Out,delay:0,onComplete:()=>{this.onDown()}}),e.play()}preUpdate(e,t){super.preUpdate(e,t)}destroy(){super.destroy()}setData(e,t){this.btnData.set(e,t)}getData(e){return this.btnData.get(e)}doBounceIn(){let e=this.scene.tweens.createTimeline();e.add({targets:this,scale:1.5,alpha:1,duration:300,ease:a.a.Math.Easing.Cubic.In,delay:0}),e.add({targets:this,scale:1,duration:300,ease:a.a.Math.Easing.Cubic.Out,delay:0,onComplete:()=>{this._initScale=this.scale,this.active=!0}}),e.play()}doBounce(e=1.5){this.setTexture(this.pack,this.assetOver);let t=this.scene.tweens.createTimeline();t.add({targets:this,scale:this.scale*e,alpha:1,duration:300,ease:a.a.Math.Easing.Cubic.In,delay:0}),t.add({targets:this,scale:1*this.scale,duration:300,ease:a.a.Math.Easing.Cubic.Out,delay:0,onComplete:()=>{this.setTexture(this.pack,this.assetUp)}}),t.play()}}var le=s(650),re=s.n(le);class de extends re.a{constructor(e,t,s,i){null==s.x&&(s.x=0),null==s.y&&(s.y=0),null==s.animationName&&(s.animationName=""),null==s.loop&&(s.loop=!0),super(e,t,s.x,s.y,s.key,s.animationName,s.loop),e.sys.displayList.add(this),e.sys.updateList.add(this),null!=s.alpha&&(this.alpha=s.alpha),null!=s.scale&&this.setScale(s.scale,s.scale),null!=s.rotation&&(this.rotation=a.a.Math.DegToRad(s.rotation)),this.velocity={x:0,y:0},this.setDepth(i),this.on("complete",this._onAnimationComplete)}_onAnimationComplete(e){}preUpdate(e,t){R.getIsPaused()||super.preUpdate(e,t)}destroy(){this.off("complete",this._onAnimationComplete),super.destroy()}}class pe extends _e{constructor(e){super(e),this.setState(ae.STEP_1)}dispose(){for(;this._objects.length>0;)this._objects.pop();this._objects=null,this._basket=null,super.dispose()}buildMinigame(){this._addBackground(),this._objects=[],this._objectWidth=0,this._objectHeight=0,this._createObjects(),this._basket=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+300,asset:"basket"}),I.FG),this._count=0,this._total=this._objects.length,this._end=!1}_addBackground(){let e=new Phaser.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.scene.add.graphics({fillStyle:{color:11328483}});t.fillRectShape(e),t.setDepth(I.BG);for(let e=0;e<3;e++)this.scene.addElement(new ve(this.scene,{x:Phaser.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG);(t=this.scene.add.image(r.CENTER_X,r.CENTER_Y,this._collectBG())).setDepth(I.BG),e=null,t=null}_collectBG(){return"ingredient_collection_apple_bg"}_createObjects(){this._addObject(-334,-81),this._addObject(-263,-156),this._addObject(-163,-108),this._addObject(-193,-13),this._addObject(-72,-128),this._addObject(29,-164),this._addObject(55,-73),this._addObject(193,-13),this._addObject(162,-111),this._addObject(263,-154),this._addObject(325,-79)}_addObject(e,t,s=!1,i=null){let a=null==i?this._getAssetData():i;this._objects.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:a.asset,pack:a.pack,rotation:Phaser.Math.FloatBetween(a.rotationMin,a.rotationMax),scale:null!=a.scale?a.scale:1}),I.BG)),s&&this._objects[this._objects.length-1].setScale(this._objects[this._objects.length-1].scaleX*=-1,this._objects[this._objects.length-1].scaleY),0==this._objectWidth&&(this._objectWidth=this._objects[this._objects.length-1].width,this._objectHeight=this._objects[this._objects.length-1].height),a=null}_getAssetData(){return{asset:"apple",pack:"ic_apple",rotationMin:-50,rotationMax:10}}_spawnObj(e,t,s=.1){let i=this._getSpawnAssetData(),a=this.scene.addElement(new ne(this.scene,{x:e,y:t,asset:i.asset,pack:i.pack,scale:s,rotation:Phaser.Math.FloatBetween(-45,45)}),I.MAIN);this.scene.tweens.timeline({targets:a,tweens:[{scale:1.1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{scale:1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{x:r.CENTER_X,y:r.CENTER_Y-200,ease:Phaser.Math.Easing.Quadratic.Out,duration:300,offset:0},{x:this._basket.x+10-.8*this._basket.width*.5+.5*this._objectWidth+(.8*this._basket.width-this._objectWidth)/this._total*this._count,y:this._basket.y-.5*this._basket.height+Phaser.Math.FloatBetween(.5*-this._objectHeight,.5*this._objectHeight),ease:Phaser.Math.Easing.Quadratic.In,duration:600}],onComplete:()=>{this._end&&this.state!=ae.END&&this.setState(ae.END)}});i=null,console.log("this._objectHeight",this._objectHeight,this._count,this._total)}_getSpawnAssetData(){return{asset:"basket_apple",pack:"ic_apple"}}_checkComplete(){this._count++,this._count>=this._total&&(this._end=!0)}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(super.onInput(e,t),this._end)return;const s=t.x+R.offsetPos().x,i=t.y+R.offsetPos().y;let a;switch(e){case k.DOWN:for(a=this._objects.length;a>0;)if(a--,s>this._objects[a].x-.5*this._objects[a].width&&s<this._objects[a].x+.5*this._objects[a].width&&i>this._objects[a].y-.5*this._objects[a].height&&i<this._objects[a].y+.5*this._objects[a].height){R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0);let e=this._objects.splice(a,1);this._spawnObj(e[0].x,e[0].y),e[0].destroy(),e=null,this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete()}break;case k.MOVE:for(a=this._objects.length;a>0;){if(a--,s>this._objects[a].x-.5*this._objects[a].width&&s<this._objects[a].x+.5*this._objects[a].width&&i>this._objects[a].y-.5*this._objects[a].height&&i<this._objects[a].y+.5*this._objects[a].height){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:}}_callback(){this.voReminder=_e.VO_REMINDER_TIMER,this.doGoodVO(),X.playAudio(this.scene,Phaser.Math.FloatBetween(0,1)>.5?"collect_food":"collect_food_alt")}_doBounce(){for(let e=0;e<this._objects.length;e++)this.bounceElement(this._objects[e])}}class Ee extends pe{constructor(e){super(e),this._total=10}_getIng(){return"Banana"}_collectBG(){return"ingredient_collection_banana_bg"}_createObjects(){this._addObject(-316,-34),this._addObject(-177,45),this._addObject(-25,-75),this._addObject(132,40),this._addObject(324,-34),this._swipeCoordX,this._swipeCoordY,this._swipeCoordX2,this._swipeCoordY2,this._swipeMinDistance=100,this._onDown=!1,this._isCollided=!1,this._collidedIndex=-1}_addObject(e,t,s=!1){let i=this._getAssetData();this._objects.push({obj:this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:i.asset,pack:i.pack,rotation:Phaser.Math.FloatBetween(i.rotationMin,i.rotationMax)}),I.BG),total:2}),s&&this._objects[this._objects.length-1].obj.setScale(this._objects[this._objects.length-1].obj.scaleX*=-1,this._objects[this._objects.length-1].obj.scaleY),0==this._objectWidth&&(this._objectWidth=this._objects[this._objects.length-1].obj.width,this._objectHeight=this._objects[this._objects.length-1].obj.height),i=null}_getAssetData(){return{asset:"banana_1",pack:"ic_banana",rotationMin:-15,rotationMax:15}}_getSpawnAssetData(){return{asset:"basket_banana",pack:"ic_banana"}}_checkComplete(){this._count++,this._count>=this._total&&(this._end=!0)}onInput(e,t){if(this._checkAnalytic(),this._end)return;const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};let i;switch(e){case k.DOWN:this._onDown=!0,this._isCollided=!1,this._swipeCoordX=s.x,this._swipeCoordY=s.y,this._checkCollision(s);break;case k.MOVE:for(this._onDown&&this._checkCollision(s),i=this._objects.length;i>0;){if(i--,s.x>this._objects[i].obj.x-.5*this._objects[i].obj.width&&s.x<this._objects[i].obj.x+.5*this._objects[i].obj.width&&s.y>this._objects[i].obj.y-.5*this._objects[i].obj.height&&s.y<this._objects[i].obj.y+.5*this._objects[i].obj.height){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:this._onDown=!1,this._swipeCoordX2=s.x,this._swipeCoordY2=s.y,this._checkCollision(s);let t=!1;this._swipeCoordX2<this._swipeCoordX-this._swipeMinDistance?(console.log("left"),t=!0):this._swipeCoordX2>this._swipeCoordX+this._swipeMinDistance?(console.log("right"),t=!0):this._swipeCoordY2<this._swipeCoordY-this._swipeMinDistance?(console.log("up"),t=!0):this._swipeCoordY2>this._swipeCoordY+this._swipeMinDistance&&(console.log("down"),t=!0),t&&this._isCollided?this._doCollided():!t&&this._isCollided?this._doCollided():this._collidedIndex=-1}}_checkCollision(e){let t=this._objects.length;for(;t>0;)if(t--,e.x>this._objects[t].obj.x-.5*this._objects[t].obj.width&&e.x<this._objects[t].obj.x+.5*this._objects[t].obj.width&&e.y>this._objects[t].obj.y-.5*this._objects[t].obj.height&&e.y<this._objects[t].obj.y+.5*this._objects[t].obj.height&&-1==this._collidedIndex){this._isCollided=!0,this._collidedIndex=t,console.log("this._collidedIndex ",this._collidedIndex);break}}_doCollided(){if(R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),this._objects[this._collidedIndex].total--,this._spawnObj(this._objects[this._collidedIndex].obj.x,this._objects[this._collidedIndex].obj.y),this._objects[this._collidedIndex].total>0)this._objects[this._collidedIndex].obj.setTexture(this._objects[this._collidedIndex].obj.texture.key,"banana_2");else{let e=this._objects.splice(this._collidedIndex,1);e[0].obj.destroy(),e=null}this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete(),this._collidedIndex=-1}_doBounce(){for(let e=0;e<this._objects.length;e++)this.bounceElement(this._objects[e].obj)}}class ue extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Cinnamon"}dispose(){this.scene.events.removeListener(O.SPAWN_CINNAMON_STICK,this.spawnCinnamonStick,this),super.dispose()}buildMinigame(){this.scene.events.addListener(O.SPAWN_CINNAMON_STICK,this.spawnCinnamonStick,this);let e=new Phaser.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.scene.add.graphics({fillStyle:{color:11328483}});t.fillRectShape(e),t.setDepth(I.BG);for(let e=0;e<3;e++)this.scene.addElement(new ve(this.scene,{x:Phaser.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG);(t=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"ingredient_collection_cinnamon_bg")).setDepth(I.BG),this.bark=[],this.bark.push(this.scene.addElement(new he(this.scene,{x:r.CENTER_X-308,y:r.CENTER_Y-40},0),I.BG)),this.bark.push(this.scene.addElement(new he(this.scene,{x:r.CENTER_X-158,y:r.CENTER_Y-65,scale:.94},1),I.BG)),this.bark.push(this.scene.addElement(new he(this.scene,{x:r.CENTER_X+7,y:r.CENTER_Y-75},2),I.BG)),this.bark.push(this.scene.addElement(new he(this.scene,{x:r.CENTER_X+174,y:r.CENTER_Y-65,scale:.92},3),I.BG)),this.bark.push(this.scene.addElement(new he(this.scene,{x:r.CENTER_X+320,y:r.CENTER_Y-50},4),I.BG)),this._basket=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+300,asset:"basket"}),I.FG),this.barkGlow=[],this.barkGlow.push({data:this.scene.add.image(r.CENTER_X-313,r.CENTER_Y-86,"cinnamon","cinnamon_glow_1"),active:!0}),this.barkGlow.push({data:this.scene.add.image(r.CENTER_X-162,r.CENTER_Y-120,"cinnamon","cinnamon_glow_2"),active:!0}),this.barkGlow.push({data:this.scene.add.image(r.CENTER_X+2,r.CENTER_Y-124,"cinnamon","cinnamon_glow_3"),active:!0}),this.barkGlow.push({data:this.scene.add.image(r.CENTER_X+170,r.CENTER_Y-122,"cinnamon","cinnamon_glow_4"),active:!0}),this.barkGlow.push({data:this.scene.add.image(r.CENTER_X+314,r.CENTER_Y-86,"cinnamon","cinnamon_glow_5"),active:!0}),this.barkGlow.forEach(function(e){e.data.alpha=0,e.data.setDepth(I.BG)},this),this._total=5,this._count=0,this._selection=-1}spawnCinnamonStick(e=null){let t=this.scene.addElement(new ne(this.scene,{x:e.x,y:e.y,asset:"basket_cinnamon",pack:"cinnamon",scale:.5,rotation:Phaser.Math.FloatBetween(-50,50)}),I.MAIN);this._objectWidth=t.width,this._objectHeight=.5*t.height,this.barkGlow[e.ID].active=!1;this.scene.tweens.timeline({targets:t,tweens:[{scale:1.1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{scale:1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{x:r.CENTER_X,y:r.CENTER_Y-100,ease:Phaser.Math.Easing.Quadratic.Out,duration:300,offset:0},{x:this._basket.x+20-.8*this._basket.width*.5+.5*this._objectWidth+(.8*this._basket.width-this._objectWidth)/this._total*this._count,y:this._basket.y-.5*this._basket.height+Phaser.Math.FloatBetween(.5*-this._objectHeight,.5*this._objectHeight),ease:Phaser.Math.Easing.Quadratic.In,duration:600}],onComplete:()=>{this.checkComplete()}});this._count++}checkComplete(){this._selection=-1;let e=1;for(let t of this.bark)e*=t.peeled?1:0;1==e&&this.state!=ae.END&&this.setState(ae.END)}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};let i=1;for(let t of this.bark){let a=t.onInput(e,s,()=>{this.callback()},()=>{this.doGoodVO()});i*=-1!=a?0:1,-1!=a&&(this._selection=a)}switch(0==i?this.scene.events.emit(O.CURSOR_ACTIVATE):(this._selection=-1,this.scene.events.emit(O.CURSOR_DEACTIVATE)),e){case k.DOWN:case k.MOVE:case k.UP:}}callback(){this.voReminder=r.VO_REMINDER_TIMER}_doBounce(){for(let e=0;e<this.barkGlow.length;e++)this.barkGlow[e].active&&this.bounceElement(this.barkGlow[e].data)}bounceElement(e,t=0){let s=this.scene.tweens.createTimeline();s.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),s.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),s.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),s.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),s.play()}}class Te extends pe{constructor(e){super(e),this._objectWidth=156,this._objectHeight=140}_getIng(){return"Pinapples"}_addBackground(){let e=new Phaser.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.scene.add.graphics({fillStyle:{color:11328483}});t.fillRectShape(e),t.setDepth(I.BG);for(let e=0;e<3;e++)this.scene.addElement(new ve(this.scene,{x:Phaser.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG);(t=this.scene.add.image(r.CENTER_X,r.CENTER_Y,this._collectBG())).setDepth(I.BG),t.setScale(1.25),e=null,t=null}_collectBG(){return"ingredient_collection_pineapple_bg"}_createObjects(){this._addObject(-406.25,6.25,!1,{asset:"pineapple_2",pack:"ic_pineapple",rotationMin:-40,rotationMax:-40,scale:1.25}),this._addObject(-287.5,0,!0,{asset:"pineapple_1",pack:"ic_pineapple",rotationMin:5,rotationMax:5,scale:1.25}),this._addObject(-130,-47.5,!1,{asset:"pineapple_1",pack:"ic_pineapple",rotationMin:-10,rotationMax:-10,scale:1.25}),this._addObject(132.5,-31.25,!0,{asset:"pineapple_1",pack:"ic_pineapple",rotationMin:10,rotationMax:10,scale:1.25}),this._addObject(425,12.5,!1,{asset:"pineapple_2",pack:"ic_pineapple",rotationMin:0,rotationMax:0,scale:1.25}),this._addObject(300,1.25,!1,{asset:"pineapple_1",pack:"ic_pineapple",rotationMin:0,rotationMax:0,scale:1.25}),this._swipeCoordX,this._swipeCoordY,this._swipeCoordX2,this._swipeCoordY2,this._swipeMinDistance=100,this._onDown=!1,this._isCollided=!1,this._collidedIndex=-1}_getAssetData(){}_getSpawnAssetData(){return{asset:"basket_pineapple",pack:"ic_pineapple"}}onInput(e,t){if(this._checkAnalytic(),this._end)return;const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};let i;switch(console.log(r.CENTER_X-s.x,r.CENTER_Y-s.y),e){case k.DOWN:this._onDown=!0,this._isCollided=!1,this._swipeCoordX=s.x,this._swipeCoordY=s.y,this._checkCollision(s);break;case k.MOVE:for(this._onDown&&this._checkCollision(s),i=this._objects.length;i>0;){if(i--,s.x>this._objects[i].x-1.25*this._objects[i].width*.5&&s.x<this._objects[i].x+1.25*this._objects[i].width*.5&&s.y>this._objects[i].y-1.25*this._objects[i].height*.5&&s.y<this._objects[i].y+1.25*this._objects[i].height*.5){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:this._onDown=!1,this._swipeCoordX2=s.x,this._swipeCoordY2=s.y,this._checkCollision(s);let t=!1;this._swipeCoordX2<this._swipeCoordX-this._swipeMinDistance?(console.log("left"),t=!0):this._swipeCoordX2>this._swipeCoordX+this._swipeMinDistance?(console.log("right"),t=!0):this._swipeCoordY2<this._swipeCoordY-this._swipeMinDistance?(console.log("up"),t=!0):this._swipeCoordY2>this._swipeCoordY+this._swipeMinDistance&&(console.log("down"),t=!0),t&&this._isCollided?this._doCollided():!t&&this._isCollided?this._doCollided():this._collidedIndex=-1}}_checkCollision(e){let t=this._objects.length;for(;t>0;)if(t--,e.x>this._objects[t].x-1.25*this._objects[t].width*.5&&e.x<this._objects[t].x+1.25*this._objects[t].width*.5&&e.y>this._objects[t].y-1.25*this._objects[t].height*.5&&e.y<this._objects[t].y+1.25*this._objects[t].height*.5&&-1==this._collidedIndex){this._isCollided=!0,this._collidedIndex=t;break}}_doCollided(){R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),this._objects[this._collidedIndex].total--,this._spawnObj(this._objects[this._collidedIndex].x,this._objects[this._collidedIndex].y);let e=this._objects.splice(this._collidedIndex,1);e[0].destroy(),e=null,this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete(),this._collidedIndex=-1}_getScaleBounce(){return 1.2}}const ye=5,ge=360,Ce=1,me=.5,Me=300,be=4;class Re extends ne{constructor(e,t,s,i,_){t.asset="factory_handle",super(e,t),this.setOrigin(.5,.5),this._factory=s,this._factory.addListener("complete",this._onAnimationComplete),this._factory.on("event",this.handleEvent),this._endCallback=i,this._goodVO=_,this._line=new a.a.Geom.Line(r.CENTER_X,r.CENTER_Y,r.CENTER_X,r.CENTER_Y),this._onDown=!1,this._deltaTime=0,this._targetAngle=0,this._currAngleInd=0,this._currentRotVel=0,this._factoryMul=0,this._currTotalItem=0,this._gameEnd=!1,X.playAudio(this.scene,"factory_crank_turn",null,0,!0),X.playAudio(this.scene,"factory_conveyor",null,0,!0),R.setValue(N.BOOL_CRANK_HAS_TURNED,!1)}handleEvent(e,t){const s=this.scene;switch(console.log("e.data.name",t.data.name),t.data.name){case"grind":X.playAudio(s,"factory_grind_alt");break;case"drop":X.playAudio(s,"factory_food_drop_jar",null,1);break;case"seal":X.playAudio(s,"factory_seal",null,.1)}}_onAnimationComplete(e){const t=this.scene;t.collection._crank._currTotalItem++,t.collection._crank._currTotalItem<ye?t.collection._crank._goodVO():t.collection._crank._gameEnd||(t.collection._crank._gameEnd=!0,t.collection._crank._endCallback())}preUpdate(e,t){super.preUpdate(e,t);const s=t/1e3;this._onDown&&(this._deltaTime+=s),this.rotation+=a.a.Math.DegToRad(this._currentRotVel*s),this._currentRotVel>0&&(this._currentRotVel-=ge*me*s,this._currentRotVel<=0&&(this._currentRotVel=0)),X.setVolume("factory_crank_turn",this._currentRotVel/ge*.7),X.setVolume("factory_conveyor",this._currentRotVel/ge*.7),this._factory.state.timeScale=1*this._factoryMul,this._factoryMul>0&&(this._factoryMul-=me*s,this._factoryMul<=0&&(this._factoryMul=0))}destroy(){this._factory.off("event",this.handleEvent),X.stopAudio("factory_crank_turn"),X.stopAudio("factory_conveyor"),super.destroy()}onInput(e,t,s){const i={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:i.x>r.CENTER_X-200&&i.x<r.CENTER_X+200&&i.y>r.CENTER_Y-200&&i.y<r.CENTER_Y+200&&(s(),this._onDown=!0,this._deltaTime=0);break;case k.MOVE:if(this._onDown&&1e3*this._deltaTime>Me){this._line.setTo(this._line.x1,this._line.y1,i.x,i.y);let e=a.a.Math.RadToDeg(a.a.Geom.Line.Angle(this._line))+180;s(),e>360/be*this._currAngleInd&&e<360/be*(this._currAngleInd+1)&&(this._doRotIncrement(),this._currAngleInd++,this._currAngleInd>=be&&(this._currAngleInd=0))}i.x>r.CENTER_X-200&&i.x<r.CENTER_X+200&&i.y>r.CENTER_Y-200&&i.y<r.CENTER_Y+200?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case k.UP:this._onDown&&1e3*this._deltaTime<=Me&&(s(),this._doRotIncrement()),this._onDown=!1,this._deltaTime=0}}_doRotIncrement(){R.getValue(N.BOOL_CRANK_HAS_TURNED)||R.setValue(N.BOOL_CRANK_HAS_TURNED,!0),this._currentRotVel=ge,this._factoryMul=Ce}}class Ne extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Tortillas"}dispose(){super.dispose(),console.log("destroy CollectionCorn")}buildMinigame(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"factory_bg");e.tint=6769832,e.setDepth(I.BG),this._factory=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"factory","conveyer_belt_tortilla",!0),this._factory.setScale(.5,.5),this._factory.setSkinByName("tortilla"),this._crank=this.scene.addElement(new Re(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1},this._factory,()=>this.setState(ae.END),()=>this.doGoodVO()),I.BG),this._crankGlow=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1,alpha:0,asset:"factory_handle_glow"}),I.FG),this._timeline=null}_doFactoryContVO(){super._doFactoryContVO(),this.scene.time.delayedCall(500,()=>{this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)})}_doFactoryVO(){super._doFactoryVO(),this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)}_glow(e,t=0){this._timeline=this.scene.tweens.createTimeline(),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),this._timeline.play()}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(this.active)switch(super.onInput(e,t),this._crank.onInput(e,t,()=>{null!=this._timeline&&(this._timeline.stop(),this._crankGlow.alpha=0),this.voReminder=r.VO_REMINDER_TIMER}),e){case k.DOWN:case k.MOVE:case k.UP:}}}class Oe extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Peanut Butter"}dispose(){super.dispose(),console.log("destroy CollectionPeanut")}buildMinigame(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"factory_bg");e.tint=36298,e.setDepth(I.BG),this._factory=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"factory","conveyer_belt",!0),this._factory.setScale(.5,.5),this._factory.setSkinByName("peanutbutter"),this._crank=this.scene.addElement(new Re(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1},this._factory,()=>this.setState(ae.END),()=>this.doGoodVO()),I.BG),this._crankGlow=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1,alpha:0,asset:"factory_handle_glow"}),I.FG),this._timeline=null}_doFactoryContVO(){super._doFactoryContVO(),this.scene.time.delayedCall(500,()=>{this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)})}_doFactoryVO(){super._doFactoryVO(),this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)}_glow(e,t=0){this._timeline=this.scene.tweens.createTimeline(),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),this._timeline.play()}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(this.active)switch(super.onInput(e,t),this._crank.onInput(e,t,()=>{null!=this._timeline&&(this._timeline.stop(),this._crankGlow.alpha=0),this.voReminder=r.VO_REMINDER_TIMER}),e){case k.DOWN:case k.MOVE:case k.UP:}}}class Ie extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Tomato Sauce"}dispose(){super.dispose(),console.log("destroy CollectionTomatoSauce")}buildMinigame(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"factory_bg");e.tint=5007784,e.setDepth(I.BG),this._factory=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"factory","conveyer_belt",!0),this._factory.setScale(.5,.5),this._factory.setSkinByName("tomatosauce"),this._crank=this.scene.addElement(new Re(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1},this._factory,()=>this.setState(ae.END),()=>this.doGoodVO()),I.BG),this._crankGlow=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1,alpha:0,asset:"factory_handle_glow"}),I.FG),this._timeline=null}_doFactoryContVO(){super._doFactoryContVO(),this.scene.time.delayedCall(500,()=>{this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)})}_doFactoryVO(){super._doFactoryVO(),this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)}_glow(e,t=0){this._timeline=this.scene.tweens.createTimeline(),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),this._timeline.play()}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(this.active)switch(super.onInput(e,t),this._crank.onInput(e,t,()=>{null!=this._timeline&&(this._timeline.stop(),this._crankGlow.alpha=0),this.voReminder=r.VO_REMINDER_TIMER}),e){case k.DOWN:case k.MOVE:case k.UP:}}}class ke extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Flour"}dispose(){super.dispose(),console.log("destroy CollectionWheat")}buildMinigame(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"factory_bg");e.tint=8209271,e.setDepth(I.BG),this._factory=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"factory","conveyer_belt_flour",!0),this._factory.setScale(.5,.5),this._factory.setSkinByName("flour"),this._crank=this.scene.addElement(new Re(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1},this._factory,()=>this.setState(ae.END),()=>this.doGoodVO()),I.BG),this._crankGlow=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1,alpha:0,asset:"factory_handle_glow"}),I.FG),this._timeline=null}_doFactoryContVO(){super._doFactoryContVO(),this.scene.time.delayedCall(500,()=>{this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)})}_doFactoryVO(){super._doFactoryVO(),this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)}_glow(e,t=0){this._timeline=this.scene.tweens.createTimeline(),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),this._timeline.play()}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(this.active)switch(super.onInput(e,t),this._crank.onInput(e,t,()=>{null!=this._timeline&&(this._timeline.stop(),this._crankGlow.alpha=0),this.voReminder=r.VO_REMINDER_TIMER}),e){case k.DOWN:case k.MOVE:case k.UP:}}}class we extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Oats"}dispose(){super.dispose(),console.log("destroy CollectionOats")}buildMinigame(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"factory_bg");e.tint=4628052,e.setDepth(I.BG),this._factory=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"factory","conveyer_belt_oats",!0),this._factory.setScale(.5,.5),this._factory.setSkinByName("oats"),this._crank=this.scene.addElement(new Re(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1},this._factory,()=>this.setState(ae.END),()=>this.doGoodVO()),I.BG),this._crankGlow=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+2,y:r.CENTER_Y-1,alpha:0,asset:"factory_handle_glow"}),I.FG),this._timeline=null}_doFactoryContVO(){super._doFactoryContVO(),this.scene.time.delayedCall(500,()=>{this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)})}_doFactoryVO(){super._doFactoryVO(),this._crankGlow.rotation=this._crank.rotation,0==this._crank._currentRotVel&&this._glow(this._crankGlow)}_glow(e,t=0){this._timeline=this.scene.tweens.createTimeline(),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),this._timeline.add({targets:e,alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),this._timeline.add({targets:e,alpha:0,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),this._timeline.play()}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){if(this.active)switch(super.onInput(e,t),this._crank.onInput(e,t,()=>{null!=this._timeline&&(this._timeline.stop(),this._crankGlow.alpha=0),this.voReminder=r.VO_REMINDER_TIMER}),e){case k.DOWN:case k.MOVE:case k.UP:}}}class Se extends pe{constructor(e){super(e)}_getIng(){return"Apples"}_collectBG(){return"ingredient_collection_apple_bg"}_createObjects(){this._addObject(-334,-81),this._addObject(-263,-156),this._addObject(-163,-108),this._addObject(-193,-13),this._addObject(-72,-128),this._addObject(29,-164),this._addObject(55,-73),this._addObject(193,-13),this._addObject(162,-111),this._addObject(263,-154),this._addObject(325,-79)}_getAssetData(){return{asset:"apple",pack:"ic_apple",rotationMin:-50,rotationMax:10}}_getSpawnAssetData(){return{asset:"basket_apple",pack:"ic_apple"}}}class Ae extends _e{constructor(e,t=0){super(e,t),this.setState(ae.STEP_1)}_getIng(){return"Corn"}dispose(){for(;this._corns.length>0;)this._corns.pop();this._corns=null,this._basket=null,super.dispose()}buildMinigame(){let e=new Phaser.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.scene.add.graphics({fillStyle:{color:11328483}});t.fillRectShape(e),t.setDepth(I.BG);for(let e=0;e<3;e++)this.scene.addElement(new ve(this.scene,{x:Phaser.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG);(t=this.scene.add.image(r.CENTER_X,r.CENTER_Y,"ingredient_collection_corn_bg")).setDepth(I.BG),e=null,t=null,this._corns=[],this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-400,y:r.CENTER_Y-38,asset:"corn_1",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-165,y:r.CENTER_Y+88,asset:"corn_1",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+65,y:r.CENTER_Y-4,asset:"corn_1",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+314,y:r.CENTER_Y+76,asset:"corn_1",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-315,y:r.CENTER_Y+110,asset:"corn_2",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-80,y:r.CENTER_Y-38,asset:"corn_2",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+154,y:r.CENTER_Y+110,asset:"corn_2",pack:"ic_corn"}),I.BG)),this._corns.push(this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+400,y:r.CENTER_Y-50,asset:"corn_2",pack:"ic_corn"}),I.BG)),this._basket=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+300,asset:"basket"}),I.FG),this._count=0,this._total=8}_spawnCorn(e,t){let s=this.scene.addElement(new ne(this.scene,{x:e,y:t,asset:"basket_corn",pack:"ic_corn",scale:.1,rotation:Phaser.Math.FloatBetween(-45,45)}),I.MAIN);this._objectWidth=s.width,this._objectHeight=.8*s.height;this.scene.tweens.timeline({targets:s,tweens:[{scale:1.1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{scale:1,ease:Phaser.Math.Easing.Quadratic.Out,duration:150},{x:r.CENTER_X,y:r.CENTER_Y-100,ease:Phaser.Math.Easing.Quadratic.Out,duration:300,offset:0},{x:this._basket.x+10-.8*this._basket.width*.5+.5*this._objectWidth+(.8*this._basket.width-this._objectWidth)/this._total*this._count,y:this._basket.y-.5*this._basket.height+Phaser.Math.FloatBetween(.5*-this._objectHeight,.5*this._objectHeight),ease:Phaser.Math.Easing.Quadratic.In,duration:600}],onComplete:()=>{this.checkComplete()}})}checkComplete(){this._count++,this._count>=this._total&&this.setState(ae.END)}setState(e){super.setState(e),this.active=!1,this.voReminder=0}onInput(e,t){super.onInput(e,t);const s=t.x+R.offsetPos().x,i=t.y+R.offsetPos().y;switch(e){case k.DOWN:let t=this._corns.length;for(;t>0;)if(t--,s>this._corns[t].x-.5*this._corns[t].width&&s<this._corns[t].x+.5*this._corns[t].width&&i>this._corns[t].y-this._corns[t].height&&i<this._corns[t].y+this._corns[t].height){R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),X.playAudio(this.scene,Phaser.Math.FloatBetween(0,1)>.5?"collect_food":"collect_food_alt");let e=this._corns.splice(t,1);this._spawnCorn(e[0].x,e[0].y),e[0].destroy(),e=null,this._callback()}break;case k.MOVE:case k.UP:}}_callback(){this.voReminder=_e.VO_REMINDER_TIMER,this.doGoodVO()}_doBounce(){for(let e=0;e<this._corns.length;e++)this.bounceElement(this._corns[e])}}class xe extends pe{constructor(e){super(e)}_getIng(){return"Eggs"}buildMinigame(){this._addBackground(),this._objects=[],this._createObjects(),this._basket=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+300,asset:"basket_eggs",pack:"ic_egg"}),I.FG),this._count=0,this._end=!1,this._objectWidth=70,this._objectHeight=50,this._total=5}_addBackground(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,this._collectBG());e.setDepth(I.BG),e=null,this._chick=this.scene.add.spine(r.CENTER_X+288,r.CENTER_Y+112,"chicken","idle",!1),this._chick.setScale(.4)}_collectBG(){return"ingredient_collection_egg_bg"}_createObjects(){this._addObject(-165,45)}_addObject(e,t,s=!1){let i=this._getAssetData();this._objects.push({obj:this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:i.asset,pack:i.pack,rotation:Phaser.Math.FloatBetween(i.rotationMin,i.rotationMax)}),I.BG),total:4}),i=null}_checkComplete(){this._count++,this._count>=this._total&&(this._end=!0)}_getAssetData(){return{asset:"eggs_1",pack:"ic_egg",rotationMin:0,rotationMax:0}}_getSpawnAssetData(){return{asset:"egg_"+(this._count+1),pack:"ic_egg"}}onInput(e,t){if(this._checkAnalytic(),this._end)return;const s=t.x+R.offsetPos().x,i=t.y+R.offsetPos().y;let a;switch(e){case k.DOWN:for(a=this._objects.length;a>0;)if(a--,s>this._objects[a].obj.x-.5*this._objects[a].obj.width&&s<this._objects[a].obj.x+.5*this._objects[a].obj.width&&i>this._objects[a].obj.y-.5*this._objects[a].obj.height&&i<this._objects[a].obj.y+.5*this._objects[a].obj.height){if(R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),this._spawnObj(this._objects[a].obj.x,this._objects[a].obj.y),this._objects[a].total>0)this._objects[a].total--,this._objects[a].obj.setTexture(this._objects[a].obj.texture.key,"eggs_"+(this._count+2));else{let e=this._objects.splice(a,1);e[0].obj.destroy(),e=null}this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete()}break;case k.MOVE:for(a=this._objects.length;a>0;){if(a--,s>this._objects[a].obj.x-.5*this._objects[a].obj.width&&s<this._objects[a].obj.x+.5*this._objects[a].obj.width&&i>this._objects[a].obj.y-.5*this._objects[a].obj.height&&i<this._objects[a].obj.y+.5*this._objects[a].obj.height){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:}}_doBounce(){for(let e=0;e<this._objects.length;e++)this.bounceElement(this._objects[e].obj)}}class Pe extends ne{constructor(e,t){t.asset="honey_hex_1",t.pack="ic_honey",super(e,t),this.once("animationcomplete",this._animComplete,this)}_animComplete(){this.destroy()}doCollect(){this.anims.play("collect")}preUpdate(e,t){super.preUpdate(e,t)}destroy(){super.destroy()}}class Fe extends pe{constructor(e){super(e)}dispose(){this._timedEvent.remove(!1),this._timedEvent=null,super.dispose()}_getIng(){return"Honey"}_collectBG(){return"ingredient_collection_honey_bg"}buildMinigame(){this._addBackground(),this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-180,y:r.CENTER_Y,asset:"grid_back",pack:"ic_honey"}),I.BG),this._objects=[],this._objectGlows=[],this._createObjects(),this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-180,y:r.CENTER_Y,asset:"grid_front",pack:"ic_honey"}),I.BG),this._honeyJar=this.scene.add.spine(r.CENTER_X+288,r.CENTER_Y+112,"honey_jar","0",!1),this._honeyJar.setScale(.5),this._addBee(240,-280),this._addBee(345,-170),this._addBee(445,-255,!0),this._count=0,this._total=this._objects.length,this._end=!1,this._spawnSFX()}_spawnSFX(){this._timedEvent=this.scene.time.addEvent({delay:Phaser.Math.FloatBetween(5e3,8e3),callback:()=>{X.playAudio(this.scene,Phaser.Math.FloatBetween(0,1)>.5?"bee_buzzA":"bee_buzzB",null,.3),this._spawnSFX()},callbackScope:this,loop:!1})}_addBee(e,t,s=!1){let i=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:"bee",pack:"ic_honey"}),I.BG);s&&i.setScale(i.scaleX*=-1,i.scaleY),this.scene.tweens.add({targets:i,y:{from:i.y,to:i.y+10*(Phaser.Math.FloatBetween(0,1)>.5?1:-1)},ease:Phaser.Math.Easing.Quadratic.InOut,duration:Phaser.Math.FloatBetween(1e3,2e3),repeat:-1,yoyo:!0}),i=null}_createObjects(){let e=this.scene.anims.generateFrameNames("ic_honey",{start:1,end:7,zeroPad:1,prefix:"honey_hex_",suffix:""});this.scene.anims.create({key:"collect",frames:e,frameRate:20,repeat:0}),this._addHoney(-380,-130),this._addHoney(-342,-66),this._addHoney(-380,-2),this._addHoney(-342,62),this._addHoney(-380,126),this._swipeCoordX,this._swipeCoordY,this._swipeCoordX2,this._swipeCoordY2,this._swipeMinDistance=100,this._onDown=!1,this._isCollided=!1,this._collidedIndex=-1}_addHoney(e,t){let s=Phaser.Math.Between(0,5),i=Phaser.Math.Between(0,5);for(;i==s;)i=Phaser.Math.Between(0,5);for(let a=0;a<6;a++)a!=s&&a!=i||this._addObject(e+73*a,t)}_addObject(e,t,s=!1,i=null){this._objects.push(this.scene.addElement(new Pe(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t}),I.BG)),this._objectGlows.push({data:this.scene.addElement(new ne(this.scene,{alpha:0,x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:"honey_glow",pack:"ic_honey"}),I.MAIN),active:!0})}_getSpawnAssetData(){return{asset:"honey_hex_1",pack:"ic_honey"}}_checkComplete(){this._count++,this._honeyJar.setAnimation(0,this._count-1+"_to_"+this._count,!1),this._count>=10&&(this._end=!0,this.state!=ae.END&&this.setState(ae.END))}onInput(e,t){if(this._checkAnalytic(),this._end)return;const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};let i;switch(e){case k.DOWN:this._onDown=!0,this._isCollided=!1,this._swipeCoordX=s.x,this._swipeCoordY=s.y,this._checkCollision(s);break;case k.MOVE:for(this._onDown&&this._checkCollision(s),i=this._objects.length;i>0;){if(i--,s.x>this._objects[i].x-.5*this._objects[i].width&&s.x<this._objects[i].x+.5*this._objects[i].width&&s.y>this._objects[i].y-.5*this._objects[i].height&&s.y<this._objects[i].y+.5*this._objects[i].height){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:this._onDown=!1,this._swipeCoordX2=s.x,this._swipeCoordY2=s.y,this._checkCollision(s);let t=!1;this._swipeCoordX2<this._swipeCoordX-this._swipeMinDistance?(console.log("left"),t=!0):this._swipeCoordX2>this._swipeCoordX+this._swipeMinDistance?(console.log("right"),t=!0):this._swipeCoordY2<this._swipeCoordY-this._swipeMinDistance?(console.log("up"),t=!0):this._swipeCoordY2>this._swipeCoordY+this._swipeMinDistance&&(console.log("down"),t=!0),t&&this._isCollided?this._doCollided():!t&&this._isCollided?this._doCollided():this._collidedIndex=-1}}_checkCollision(e){let t=this._objects.length;for(;t>0;)if(t--,e.x>this._objects[t].x-.5*this._objects[t].width&&e.x<this._objects[t].x+.5*this._objects[t].width&&e.y>this._objects[t].y-.5*this._objects[t].height&&e.y<this._objects[t].y+.5*this._objects[t].height&&-1==this._collidedIndex){this._isCollided=!0,this._collidedIndex=t;break}}_doCollided(){R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),this._objects[this._collidedIndex].total--;let e=this._objects.splice(this._collidedIndex,1);e[0].doCollect(),e=null,this._objectGlows[this._collidedIndex].active=!1,this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete(),this._collidedIndex=-1}_getScaleBounce(){return 1.2}_doBounce(){for(let e=0;e<this._objects.length;e++)this.bounceElement(this._objects[e]),this._objectGlows[e].active&&this.bounceElement(this._objectGlows[e].data,0,!0)}bounceElement(e,t=0,s=!1){let i=this.scene.tweens.createTimeline();i.add({targets:e,scaleX:e.scaleX*this._getScaleBounce(),scaleY:e.scaleY*this._getScaleBounce(),alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:1e3*t}),i.add({targets:e,scaleX:1*e.scaleX,scaleY:1*e.scaleY,alpha:s?0:1,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0}),i.add({targets:e,scaleX:e.scaleX*this._getScaleBounce(),scaleY:e.scaleY*this._getScaleBounce(),alpha:1,duration:300,ease:Phaser.Math.Easing.Quadratic.In,delay:0}),i.add({targets:e,scaleX:1*e.scaleX,scaleY:1*e.scaleY,alpha:s?0:1,duration:300,ease:Phaser.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),i.play()}}class De extends pe{constructor(e){super(e)}_getIng(){return"Mushrooms"}_addBackground(){let e=this.scene.add.image(r.CENTER_X,r.CENTER_Y,this._collectBG());e.setDepth(I.BG),e=null,this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y,asset:"mushroom_shelf",pack:"ic_mushroom"}),I.MAIN)}_collectBG(){return"ingredient_collection_mushroom_bg"}_createObjects(){this._addObject(-234,-154),this._addObject(-136,-175),this._addObject(0,-159),this._addObject(151,-154),this._addObject(221,-172),this._addObject(-211,32),this._addObject(-116,32),this._addObject(17,40),this._addObject(124,32),this._addObject(233,35)}_getAssetData(){return{asset:"mushroom",pack:"ic_mushroom",rotationMin:-10,rotationMax:10}}_getSpawnAssetData(){return{asset:"basket_mushroom",pack:"ic_mushroom"}}}class fe extends pe{constructor(e){super(e),this._objectWidth=80,this._objectHeight=80}_getIng(){return"Onions"}_addBackground(){let e=new Phaser.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.scene.add.graphics({fillStyle:{color:11328483}});t.fillRectShape(e),t.setDepth(I.BG);for(let e=0;e<3;e++)this.scene.addElement(new ve(this.scene,{x:Phaser.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG);(t=this.scene.add.image(r.CENTER_X,r.CENTER_Y,this._collectBG())).setDepth(I.BG),e=null,t=null,this.transitionState=!1,this.selected=-1,this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y,asset:"ingredient_collection_onion_coverup",pack:"ic_onion"}),I.MAIN)}_collectBG(){return"ingredient_collection_onion_bg"}_createObjects(){this._addObject(-298,147.8,!0),this._addObject(-204,72.8),this._addObject(-86,94.8),this._addObject(60,68.8,!0),this._addObject(172,101.8),this._addObject(296,156.8)}_addObject(e,t,s=!1){let i=this._getAssetData();this._objects.push({obj:this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+e,y:r.CENTER_Y+t,asset:i.asset,pack:i.pack,rotation:Phaser.Math.FloatBetween(i.rotationMin,i.rotationMax)}),I.BG),total:2}),s&&this._objects[this._objects.length-1].obj.setScale(this._objects[this._objects.length-1].obj.scaleX*=-1,this._objects[this._objects.length-1].obj.scaleY),this._objects[this._objects.length-1].obj.setOrigin(.5,.9),i=null}_getAssetData(){return{asset:"onion",pack:"ic_onion",rotationMin:-5,rotationMax:5}}_getSpawnAssetData(){return{asset:"basket_onion",pack:"ic_onion"}}onInput(e,t){if(this._checkAnalytic(),this._end)return;const s=t.x+R.offsetPos().x,i=t.y+R.offsetPos().y;let a;switch(e){case k.DOWN:for(a=this._objects.length;a>0;)if(a--,s>this._objects[a].obj.x-.5*this._objects[a].obj.width&&s<this._objects[a].obj.x+.5*this._objects[a].obj.width&&i>this._objects[a].obj.y-.9*this._objects[a].obj.height&&i<this._objects[a].obj.y+this._objects[a].obj.height*(1-.9))if(R.getValue(N.BOOL_FARM_HAS_TAPPED)||R.setValue(N.BOOL_FARM_HAS_TAPPED,!0),this._objects[a].total--,this._objects[a].total>0){X.playAudio(this.scene,"peel_bark"),this.transitionState=!0,this.selected=a;let e=this.scene.tweens.createTimeline();e.add({targets:this._objects[a].obj,scaleY:{from:1,to:1.2},y:{from:this._objects[a].obj.y,to:this._objects[a].obj.y-50},ease:"Back",duration:150}),e.add({targets:this._objects[a].obj,scaleY:{from:1.2,to:1},y:{from:this._objects[a].obj.y-50,to:this._objects[a].obj.y-20},ease:"Back",duration:150,onComplete:()=>{this.selected=-1,this.transitionState=!1}}),e.play()}else{let e=this._objects.splice(a,1);this._spawnObj(e[0].obj.x,e[0].obj.y-.4*e[0].obj.height,.3),e[0].obj.destroy(),e=null,this._callback(),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._checkComplete()}break;case k.MOVE:for(a=this._objects.length;a>0;){if(a--,s>this._objects[a].obj.x-.5*this._objects[a].obj.width&&s<this._objects[a].obj.x+.5*this._objects[a].obj.width&&i>this._objects[a].obj.y-.9*this._objects[a].obj.height&&i<this._objects[a].obj.y+this._objects[a].obj.height*(1-.9)){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:}}_doBounce(){let e=this._objects.length;for(;e>0;)--e!=this.selected&&this.bounceElement(this._objects[e].obj)}_getScaleBounce(){return 1.2}}class Ve extends pe{constructor(e){super(e)}_getIng(){return"Tomatoes"}_collectBG(){return"ingredient_collection_tomato_bg"}_createObjects(){this._addObject(-278,-30,!0),this._addObject(-211,-51),this._addObject(-218,54),this._addObject(-42,-79,!0),this._addObject(-26,34,!0),this._addObject(25,-52),this._addObject(197,-32,!0),this._addObject(266,-58),this._addObject(250,54)}_getAssetData(){return{asset:"tomato",pack:"ic_tomato",rotationMin:-5,rotationMax:5}}_getSpawnAssetData(){return{asset:"basket_tomato",pack:"ic_tomato"}}}class ve extends ne{constructor(e,t){t.asset=a.a.Math.FloatBetween(0,1)>.5?"cloud_1":"cloud_2",t.y=a.a.Math.FloatBetween(r.CENTER_Y-.5*r.HEIGHT+50,r.CENTER_Y-100),super(e,t),this.scale=1-a.a.Math.FloatBetween(-.05,.05),this.velocity.x=(20-a.a.Math.FloatBetween(-10,10))*this.scale}preUpdate(e,t){super.preUpdate(e,t),this.updatePosFromVel(t),this.x>=r.CENTER_X+.5*r.WIDTH+200&&(this.x=r.CENTER_X-.5*r.WIDTH-200)}destroy(){super.destroy()}}class Ue extends ce{constructor(e,t,s,i=null,a=!1){super(e,t,s,i,a),this._voTimeActive=!1,this._voTimer=0}preUpdate(e,t){super.preUpdate(e,t);const s=t/1e3;this._voTimeActive&&(this._voTimer+=s,this._voTimer>.5&&(this._voTimeActive=!1,this._voTimer=0,null!=this.onOver&&this.onOver()))}destroy(){super.destroy()}onPointerOver(){console.log("onPointerOver"),this.active&&(this.setTexture(this.pack,this.assetOver),this.ignoreCursor||this.scene.events.emit(O.CURSOR_ACTIVATE),this.scene.tweens.add({targets:this,scale:1.1,alpha:1,duration:150,ease:a.a.Math.Easing.Quadratic.In,delay:0}),this._voTimeActive=!0)}onPointerOut(){super.onPointerOut(),this._voTimeActive=!1,this._voTimer=0}}class je{constructor(e,t){this.scene=e,this._bgData=this._getBGData(),this._bgS=[],this._bgS.push(this.scene.addElement(new ne(this.scene,{asset:this._bgData.asset,x:r.CENTER_X-this._bgData.width,y:r.CENTER_Y}),t)),this._bgS.push(this.scene.addElement(new ne(this.scene,{asset:this._bgData.asset,x:r.CENTER_X,y:r.CENTER_Y}),t)),this._bgS.push(this.scene.addElement(new ne(this.scene,{asset:this._bgData.asset,x:r.CENTER_X+this._bgData.width,y:r.CENTER_Y}),t)),this.scene.events.on(O.DO_HIT,this._onHit,this),this._velMod=0,this.velocity={x:d.SPEED+R.velMod,y:0},this._active=!1}_getBGData(){let e={asset:"driving_urban_bg",width:1180};switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:case o.CINNAMON:case o.PINEAPPLE:e.asset="driving_jungle_bg",e.width=1178;break;case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:e.asset="driving_urban_bg",e.width=1180;break;case o.APPLES:case o.BERRIES:case o.RAW_CORN:case o.EGGS:case o.HONEY:case o.MUSHROOM:case o.ONIONS:case o.TOMATOES:e.asset="driving_farm_bg",e.width=1178}return e}_onHit(e=null){R.velMod=-d.SPEED}start(){this._active=!0}update(e){if(R.getIsPaused())return;if(!this._active)return;const t=e/1e3;R.velMod>0&&(R.velMod-=-d.SPEED*t,R.velMod<=0&&(R.velMod=0)),this.velocity.x=d.SPEED+R.velMod,this._bgS.forEach(function(e){e.x+=this.velocity.x*t,e.y+=this.velocity.y*t},this);let s=this._bgS.length;for(;s>0;)if(s--,this._bgS[s].x<=r.CENTER_X-r.WIDTH){let e=this._bgS.splice(s,1);e[0].x=this._bgS[this._bgS.length-1].x+this._bgData.width,this._bgS.push(e[0]),e=null}}destroy(){for(;this._bgS.length>0;)this._bgS.pop();_bgS=null,this.scene.events.off(O.DO_HIT,this._onHit,this),super.destroy()}}var Be={intersects:function(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}};const Ge=Object.freeze({IDLE:0,DRIVE:1,HIT:2,WIN:3});class He extends de{constructor(e,t,s){super(e,t,s),this._state=null,this._hitbox=new a.a.Geom.Rectangle(this.x,this.y,100,50),this._onDown=!1,this._onUp=!1,this._reminderTime=0,this.scene.input.keyboard.on("keydown",this._onKeyDown,this),this.scene.input.keyboard.on("keyup",this._onKeyUp,this),this._onArrowUp=!1,this._onArrowDown=!1,this._hitCount=0,this._analyticDelay=0,this._inactiveState=!1,this._timeStamp=0,this._setState(Ge.IDLE)}_onKeyDown(e){e.preventDefault(),"ArrowDown"!=e.key||this._onArrowDown?"ArrowUp"!=e.key||this._onArrowUp||(this._onArrowUp=!0,this._sendAnalytic()):(this._onArrowDown=!0,this._sendAnalytic())}_onKeyUp(e){this._onArrowUp=!1,this._onArrowDown=!1}get hitbox(){return this._hitbox}_setState(e){switch(this._state=e,this._state){case Ge.IDLE:X.playAudio(this.scene,"truck_rev_loop",null,.2,!0),this.setAnimation(0,"idle",!0);break;case Ge.DRIVE:this.setAnimation(0,"drive",!0);break;case Ge.HIT:if(0==this._hitCount){let e="CMFT_3.0_31",t="gonger";switch(a.a.Math.Between(0,3)){case 0:e="CMFT_3.0_31",t="cookie";break;case 1:e="CMFT_3.0_32";break;case 2:e="CMFT_3.0_33";break;case 3:e="CMFT_3.0_33b"}this.setAnimation(1,"lipflap_"+t,!0),X.playVO(this.scene,e,()=>{this.setAnimation(1,"mouths_closed",!0)})}this._hitCount++,this._hitCount>2&&(this._hitCount=0),this.setAnimation(0,"bounce",!1),this.scene.time.delayedCall(700,()=>{this._setState(Ge.DRIVE)});this.scene.tweens.timeline({targets:this,tweens:[{x:r.CENTER_X-200-25,ease:a.a.Math.Easing.Quadratic.Out,duration:200},{x:r.CENTER_X-200,ease:a.a.Math.Easing.Quadratic.In,duration:1e3},{alpha:0,ease:a.a.Math.Easing.Linear,duration:200,offset:0},{alpha:1,ease:a.a.Math.Easing.Linear,duration:200},{alpha:0,ease:a.a.Math.Easing.Linear,duration:200},{alpha:1,ease:a.a.Math.Easing.Linear,duration:200},{alpha:0,ease:a.a.Math.Easing.Linear,duration:200},{alpha:1,ease:a.a.Math.Easing.Linear,duration:200}],onComplete:()=>{}})}}_doReact(e=null){let t=a.a.Math.FloatBetween(0,1)>.5?"gonger":"cookie";this.setAnimation(1,"lipflap_"+t,!0),a.a.Math.FloatBetween(0,1)>.5?X.playVO(this.scene,"cookie"==t?"CMFT_3.0_28":"CMFT_3.0_27",()=>{X.playVO(this.scene,this._getLocationVO(t),()=>{this._reminderTime=r.VO_REMINDER_TIMER,this.setAnimation(1,"mouths_closed",!0),null!=e&&e()})}):X.playVO(this.scene,"cookie"==t?"CMFT_3.0_30":"CMFT_3.0_29_alt",()=>{X.playVO(this.scene,this._getIngVO(t),()=>{this._reminderTime=r.VO_REMINDER_TIMER,this.setAnimation(1,"mouths_closed",!0),null!=e&&e()})})}_onAnimationComplete(e){switch(this._state){case Ge.HIT:}}preUpdate(e,t){if(R.getIsPaused())return;this._hitbox.centerX=this.x,this._hitbox.centerY=this.y,this.setDepth(this.y),super.preUpdate(e,t);const s=t/1e3;switch(this._analyticDelay>0&&(this._analyticDelay-=s,this._analyticDelay<=0&&(this._analyticDelay=0)),this._state){case Ge.IDLE:this._reminderTime>0&&(this._reminderTime-=s,this._reminderTime<=0&&(this.reminderTime=0,this._inactiveState=!0,this._timeStamp=Date.now(),te.dataLayerTracking({event:"gameTimeoutPlay"}),this.setAnimation(1,"lipflap_cookie",!0),X.playVO(this.scene,R.isMobile()?"CMFT_3.0_36":"CMFT_3.0_37",()=>{X.playVO(this.scene,this._getLocationVO("cookie"),()=>{this.setAnimation(1,"mouths_closed",!0),this._reminderTime=r.VO_REMINDER_TIMER})})));break;case Ge.DRIVE:if(this._onArrowUp||this._onArrowDown){let e=0;this._onArrowUp?e=-1:this._onArrowDown&&(e=1),this.y+=500*e*s,this.y<r.CENTER_Y+80?this.y=r.CENTER_Y+80:this.y>r.CENTER_Y+290&&(this.y=r.CENTER_Y+290)}}}destroy(){X.stopAudio("truck_rev_loop"),super.destroy()}intro(e){this.scene.time.delayedCall(500,()=>{this.scene.events.emit(O.CURSOR_ACTIVATE),R.getValue(N.BOOL_FIRST_PLAY)?(this.setAnimation(1,"lipflap_cookie",!0),X.playVO(this.scene,"CMFT_3.0_25",()=>{X.playVO(this.scene,this._getLocationVO("cookie"),()=>{X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_3.0_26",()=>{this._reminderTime=r.VO_REMINDER_TIMER,this.setAnimation(1,"mouths_closed",!0),e(),R.getValue(N.BOOL_FIRST_PLAY)&&R.setValue(N.BOOL_FIRST_PLAY,!1)})})})})):this._doReact(e)})}_getLocationVO(e){let t="gonger"==e?"CMFT_7.0_270":"CMFT_7.0_241";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:t="gonger"==e?"CMFT_7.0_270":"CMFT_7.0_241";break;case o.CINNAMON:t="gonger"==e?"CMFT_7.0_268":"CMFT_7.0_239";break;case o.PINEAPPLE:t="gonger"==e?"CMFT_7.0_269":"CMFT_7.0_240";break;case o.CORN:t="gonger"==e?"CMFT_7.0_271":"CMFT_7.0_242";break;case o.PEANUTS:t="gonger"==e?"CMFT_7.0_274":"CMFT_7.0_245";break;case o.TOMATO_SAUCE:t="gonger"==e?"CMFT_7.0_275":"CMFT_7.0_246";break;case o.WHEAT:t="gonger"==e?"CMFT_7.0_273_alt":"CMFT_7.0_244";break;case o.OATS:t="gonger"==e?"CMFT_7.0_272":"CMFT_7.0_243";break;case o.APPLES:t="gonger"==e?"CMFT_7.0_267_alt":"CMFT_7.0_238";break;case o.BERRIES:t="gonger"==e?"CMFT_7.0_264":"CMFT_7.0_235";break;case o.RAW_CORN:case o.EGGS:t="gonger"==e?"CMFT_7.0_263":"CMFT_7.0_234";break;case o.HONEY:t="gonger"==e?"CMFT_7.0_266":"CMFT_7.0_237";break;case o.MUSHROOM:t="gonger"==e?"CMFT_7.0_265":"CMFT_7.0_236";break;case o.ONIONS:case o.TOMATOES:t="gonger"==e?"CMFT_7.0_263":"CMFT_7.0_234"}return t}_getIngVO(e){let t="gonger"==e?"CMFT_7.0_203":"CMFT_7.0_220";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:t="gonger"==e?"CMFT_7.0_203":"CMFT_7.0_220";break;case o.CINNAMON:t="gonger"==e?"CMFT_7.0_212":"CMFT_7.0_229";break;case o.PINEAPPLE:t="gonger"==e?"CMFT_7.0_205_alt":"CMFT_7.0_222";break;case o.CORN:t="gonger"==e?"CMFT_7.0_217":"CMFT_7.0_218";break;case o.PEANUTS:t="gonger"==e?"CMFT_7.0_202":"CMFT_7.0_219";break;case o.TOMATO_SAUCE:t="gonger"==e?"CMFT_7.0_207":"CMFT_7.0_224";break;case o.WHEAT:t="gonger"==e?"CMFT_7.0_210":"CMFT_7.0_227";break;case o.OATS:t="gonger"==e?"CMFT_7.0_213":"CMFT_7.0_230";break;case o.APPLES:t="gonger"==e?"CMFT_7.0_211":"CMFT_7.0_228";break;case o.BERRIES:t="gonger"==e?"CMFT_7.0_214":"CMFT_7.0_231";break;case o.RAW_CORN:t="gonger"==e?"CMFT_7.0_208":"CMFT_7.0_225";break;case o.EGGS:t="gonger"==e?"CMFT_7.0_209":"CMFT_7.0_226";break;case o.HONEY:t="gonger"==e?"CMFT_7.0_204_alt":"CMFT_7.0_221";break;case o.MUSHROOM:t="gonger"==e?"CMFT_7.0_206":"CMFT_7.0_223";break;case o.ONIONS:t="gonger"==e?"CMFT_7.0_216":"CMFT_7.0_233";break;case o.TOMATOES:t="gonger"==e?"CMFT_7.0_215":"CMFT_7.0_232"}return t}start(){this._setState(Ge.DRIVE)}end(e){this.scene.input.keyboard.off("keydown",this._onKeyDown),this.scene.input.keyboard.off("keyup",this._onKeyUp),this.scene.events.emit(O.CURSOR_DEACTIVATE),this._state=Ge.WIN,X.playAudio(this.scene,"truck_honk"),this.scene.tweens.add({targets:this,x:r.CENTER_X+r.WIDTH,duration:1e3,ease:a.a.Math.Easing.Quadratic.In,delay:0,onComplete:()=>{X.stopAllVOs();let t=a.a.Math.FloatBetween(0,1)>.5?"gonger":"cookie";X.playVO(this.scene,"cookie"==t?"CMFT_3.0_34":"CMFT_3.0_35_alt",()=>{X.playVO(this.scene,this._getLocationVO(t),()=>{e()})})}})}onInput(e,t){if(R.getIsPaused())return;if(this._state==Ge.WIN)return;t.x,R.offsetPos().x;const s=t.y+R.offsetPos().y;switch(this._inactiveState&&(this._inactiveState=!1,te.dataLayerTracking({event:"gameTOReEngage",duration:Math.round((Date.now()-this._timeStamp)/1e3)})),e){case k.DOWN:case k.MOVE:this.y=s+50,this.y<r.CENTER_Y+80?this.y=r.CENTER_Y+80:this.y>r.CENTER_Y+290&&(this.y=r.CENTER_Y+290),this._sendAnalytic();break;case k.UP:}}_sendAnalytic(){0==this._analyticDelay&&(this._analyticDelay=1,te.dataLayerTracking({event:"gameInteraction",roundName:R.getValue(N.ENUM_CURRENT_ROUND),objectName:"food_truck"}))}doHit(){this._state!=Ge.WIN&&this._setState(Ge.HIT)}}class Le extends ne{constructor(e,t,s){let i=function(){let e={a:"obstacle_rock",b:"obstacle_mud",alwaysBehindA:!1,isMovingA:!1,alwaysBehindB:!1,isMovingB:!1};switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:case o.CINNAMON:case o.PINEAPPLE:e.a="obstacle_rock",e.b="obstacle_mud",e.alwaysBehindB=!0;break;case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:e.a="obstacle_trafficcone",e.b="obstacle_car",e.isMovingB=!0;break;case o.APPLES:case o.BERRIES:case o.RAW_CORN:case o.EGGS:case o.HONEY:case o.MUSHROOM:case o.ONIONS:case o.TOMATOES:e.a="obstacle_tractor",e.b="obstacle_puddle",e.isMovingA=!0,e.alwaysBehindB=!0}return e}(),_=i.a,n=i.alwaysBehindA,h=i.isMovingA;if(a.a.Math.FloatBetween(0,1)>.5&&(_=i.b,n=i.alwaysBehindB,h=i.isMovingB),t.asset=_,t.pack="driving",t.originY=1,super(e,t),this._isMud=n,this._isMoving=h,this._player=s,this._selectedAsset=t.asset,this._splash=null,this._animID="","obstacle_mud"==_||"obstacle_puddle"==_){let e=null;"obstacle_mud"==_?(e=this.scene.anims.generateFrameNames("driving",{start:1,end:7,zeroPad:1,prefix:"mud_splash_",suffix:""}),this._animID="splashMud"):"obstacle_puddle"==_&&(e=this.scene.anims.generateFrameNames("driving",{start:1,end:7,zeroPad:1,prefix:"water_splash_",suffix:""}),this._animID="splashWater"),this.scene.anims.create({key:this._animID,frames:e,frameRate:20,repeat:0}),this._splash=this.scene.addElement(new ne(this.scene,{x:this.x-.25*this.width,y:this.y-.6*this.height,alpha:0,asset:"mud_splash_1",pack:"driving"}),I.MAIN)}let c=a.a.Math.Between(0,2);switch(this._hitbox=new a.a.Geom.Rectangle(this.x,this.y,this.width,50),c){case 0:this.y=r.CENTER_Y+90;break;case 1:this.y=r.CENTER_Y+180;break;case 2:this.y=r.CENTER_Y+270}this.velocity.x=d.SPEED+R.velMod,this._isHit=!1,this._isMoving&&this.scene.tweens.add({targets:this,scaleY:{from:1,to:1.05},ease:"Linear",duration:200,repeat:-1,yoyo:!0})}preUpdate(e,t){R.getIsPaused()||(this.setDepth(this.y+this._getDepthOffset()),this._hitbox.centerX=this.x,this._hitbox.centerY=this.y-25,super.preUpdate(e,t),this.velocity.x=d.SPEED*(this._isMoving,1)+R.velMod,this.updatePosFromVel(t),null!=this._splash&&(this._splash.x=this.x-.25*this.width,this._splash.y=this.y-.6*this.height),this.x<=r.CENTER_X-r.WIDTH&&this.destroy(),!this._isHit&&Be.intersects(this._hitbox,this._player.hitbox)&&this.doHit())}_getDepthOffset(){let e=this._isMud?-this.height:-10;return"obstacle_trafficcone"==this._selectedAsset&&(e=0),e}doHit(){this._isHit=!0,this._player.doHit();let e="rock_crash";if(this._isMud)this._splash.alpha=1,this._splash.anims.play(this._animID),e="splash";else if("obstacle_car"==this._selectedAsset||"obstacle_tractor"==this._selectedAsset)e="car_horn_crash",X.playAudio(this.scene,"rock_crash",null,.5);else if("obstacle_trafficcone"==this._selectedAsset){e="cone_crash";let t=this.scene.tweens.createTimeline();t.add({targets:this,x:this.x-160,rotation:a.a.Math.DegToRad(45),duration:500,ease:a.a.Math.Easing.Quadratic.Out}),t.add({targets:this,y:this.y-120,duration:250,ease:a.a.Math.Easing.Quadratic.Out,offset:0}),t.add({targets:this,y:this.y-60,alpha:0,duration:250,ease:a.a.Math.Easing.Quadratic.In,onComplete:()=>{}}),t.play()}X.playAudio(this.scene,e,null,.5),this.scene.events.emit(O.DO_HIT)}destroy(){super.destroy()}}const Ye=Object.freeze({LINEAR:0,IN:1,OUT:2,BOUNCE_IN:3,BOUNCE_OUT:4}),Xe=Object.freeze({NONE:0,STEP_1:1,STEP_2:2,STEP_3:3,STEP_4:4,STEP_5:5,STEP_6:6,STEP_7:7,STEP_8:8,STEP_9:9,STEP_10:10,STEP_11:11,END:12});class We{constructor(e,t=0){this.scene=e,this.centerX=t,this._active=!1,this._voReminder=0,this._timerDelay=0,this._buildMinigame(),this._inactiveState=!1,this._timeStamp=0,this._startTime=Date.now(),R.setValue(N.FLOAT_VO_DELAY,0),this._setState(Xe.NONE)}dispose(){this.scene=null,this.state=null}_buildMinigame(){}_setState(e){this._state=e,this._active=!1,this._voReminder=0,this.scene.events.emit(O.CURSOR_DEACTIVATE),this._state}update(e){const t=e/1e3;this._voReminder>0&&(this._voReminder-=t,this._voReminder<=0&&(this._inactiveState=!0,this._timeStamp=Date.now(),te.dataLayerTracking({event:"gameTimeoutPlay"}),this._voReminder=0,this._doVOReminder())),this._timerDelay>0&&(this._timerDelay-=t,this._timerDelay<=0&&(this._timerDelay=0)),R.getValue(N.FLOAT_VO_DELAY)>0&&(R.setValue(N.FLOAT_VO_DELAY,R.getValue(N.FLOAT_VO_DELAY)-t),R.getValue(N.FLOAT_VO_DELAY)<=0&&R.setValue(N.FLOAT_VO_DELAY,0))}_doVOReminder(){}_doEnd(){let e=Math.round((Date.now()-this._startTime)/1e3);te.dataLayerTracking({event:"gameComponentComplete",roundName:R.getValue(N.ENUM_CURRENT_ROUND),duration:e,componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)})}onInput(e,t){switch(this._inactiveState&&(this._inactiveState=!1,te.dataLayerTracking({event:"gameTOReEngage",duration:Math.round((Date.now()-this._timeStamp)/1e3)})),e){case k.DOWN:case k.MOVE:case k.UP:}}tween(e,t,s,i,a=0,_=null){this.scene.tweens.add({targets:e,x:null!=s.x?s.x:e.x,y:null!=s.y?s.y:e.y,alpha:null!=s.alpha?s.alpha:e.alpha,duration:1e3*t,ease:this._getEase(i),delay:1e3*a,onComplete:()=>{null!=_&&_()}})}_getEase(e){switch(e){case Ye.LINEAR:return a.a.Math.Easing.Linear;case Ye.IN:return a.a.Math.Easing.Quadratic.In;case Ye.OUT:return a.a.Math.Easing.Quadratic.Out;case Ye.BOUNCE_IN:return a.a.Math.Easing.Bounce.In;case Ye.BOUNCE_OUT:return a.a.Math.Easing.Bounce.Out}}doReact(){0==this._timerDelay&&(X.playVO(this.scene,a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_161":"CMFT_5.6_162"),this._timerDelay=5)}}const ze=4;class Qe extends ne{constructor(e,t,s,i,a=0,_=1,n=""){super(e,t),this._index=0+a,this._indexOffset=a,this._maxIndex=s,this._prefix=i,this._currMul=0,this._totalTime=0,this._callback=null,this._isRoll=!1,this._mod=_,this._playSFX=n}preUpdate(e,t){super.update(e,t);const s=t/1e3;this._currMul>0&&(this._currMul-=s,this._currMul<=0&&(this._currMul=0)),this._totalTime<ze*this._mod&&(this._totalTime+=this._currMul*s,this._totalTime>=ze*this._mod&&(this._totalTime=ze*this._mod),this._doOnMove(this._totalTime))}destroy(){super.destroy()}doSpread(e,t=!1,s=!1){t?this._doOnDown():this._currMul=1,this._callback=e,this._isRoll=s}_doOnDown(){this._totalTime=ze*this._mod/this._maxIndex*(this._index+1-this._indexOffset),this._updateSpread()}_doOnMove(e){e>=ze*this._mod/this._maxIndex*(this._index+1-this._indexOffset)&&this._updateSpread()}_updateSpread(){if(0==this._index?this.alpha=1:(0==this.alpha&&(this.alpha=1),this.setTexture(this.texture.key,this._prefix+this._index)),this._index++,""!=this._playSFX&&(X.isPlaying(this._playSFX)||X.playAudio(this.scene,this._playSFX,null,1)),0==R.getValue(N.FLOAT_VO_DELAY)){let e=a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_153":"CMFT_5.6_154";this._isRoll&&(e=a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_159":"CMFT_5.6_160"),X.playVO(this.scene,e),R.setValue(N.FLOAT_VO_DELAY,5)}this._index>this._maxIndex&&this._callback()}}class Ze extends ne{constructor(e,t,s,i,a=0){super(e,t),this._index=a,this._maxIndex=s+1,this._prefix=i,this._peeling=!1}preUpdate(e,t){super.update(e,t)}destroy(){super.destroy()}onInput(e,t,s=null,i=""){switch(e){case k.DOWN:this._peeling=!1;break;case k.MOVE:this._doPeel(t.x,t.y,!0,s,i);break;case k.UP:this._doPeel(t.x,t.y,!1,s,i)}}_doPeel(e,t,s=!0,i,a=""){(t>this.y-.5*this.height+this.height/this._maxIndex*this._index&&t<this.y-.5*this.height+this.height/this._maxIndex*(this._index+1)||!s)&&(this._peeling=!0,""==a||X.isPlaying(a)||X.playAudio(this.scene,a),this.setTexture(this.texture.key,this._prefix+this._index),this._index++,this._index==this._maxIndex&&i())}}class Ke extends ne{constructor(e,t,s,i,a=0){super(e,t),this._index=0+a,this._maxIndex=s,this._prefix=i,this.complete=!1}preUpdate(e,t){super.update(e,t)}destroy(){super.destroy()}onInput(e,t,s){if(!this.complete)switch(e){case k.DOWN:this._index++,X.playAudio(this.scene,"food_chop"),0==R.getValue(N.FLOAT_VO_DELAY)&&(X.playVO(this.scene,a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_157":"CMFT_5.6_158"),R.setValue(N.FLOAT_VO_DELAY,5)),this.setTexture(this.texture.key,this._prefix+this._index),this._index==this._maxIndex&&(this.complete=!0,s());break;case k.MOVE:case k.UP:}}}class $e extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING SANDWICH"),this._setState(Xe.STEP_2)}dispose(){super.dispose()}_buildMinigame(){this._plate=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+50,asset:"plate",pack:"build_recipe_atlas"}),I.BG),this._bread=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+50,asset:"bread",pack:"br_sandwich"}),I.BG),this._knife=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"knife_pb",pack:"br_sandwich",rotation:-45,originX:.5,originY:.1}),I.FG),this._jar=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-r.WIDTH,y:r.CENTER_Y-100,asset:"jar_pb",pack:"br_sandwich"}),I.BG),this._spread=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X-10,y:r.CENTER_Y+30,asset:"peanutbutter_spread_1",pack:"br_sandwich",alpha:0},6,"peanutbutter_spread_",1,1,"spread_item"),I.BG),this._banana=this.scene.addElement(new Ze(this.scene,{x:r.CENTER_X-r.WIDTH,y:r.CENTER_Y,asset:"banana_peel_0",pack:"br_sandwich"},6,"banana_peel_",1),I.BG),this._cuttingBoard=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+50,asset:"cuttingboard",pack:"build_recipe_atlas"}),I.BG),this._bananaCut=this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+10,asset:"banana_cut_0",pack:"br_sandwich"},9,"banana_cut_"),I.BG),this._honig=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"honeystick",pack:"build_recipe_atlas",rotation:-45,originX:.5,originY:.1}),I.FG),this._honigAufstrich=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X-10,y:r.CENTER_Y+40,asset:"honey_1",pack:"br_sandwich",alpha:0},6,"honey_",1,.5,"honey_spread"),I.BG),this._endeDesBrotes=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y-r.HEIGHT,asset:"bread",pack:"br_sandwich"}),I.BG)}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:this._active=!0;break;case Xe.STEP_2:this.scene.tweens.add({targets:this._plate,x:r.CENTER_X,duration:600,ease:a.a.Math.Easing.Quadratic.Out}),this.scene.tweens.timeline({targets:this._bread,tweens:[{y:r.CENTER_Y-50,ease:a.a.Math.Easing.Quadratic.Out,duration:300},{y:r.CENTER_Y+50,ease:a.a.Math.Easing.Quadratic.In,duration:300}],onComplete:()=>{this.tween(this._jar,.6,{x:r.CENTER_X-360},Ye.OUT),this.scene.tweens.add({targets:this._knife,x:r.CENTER_X+200,y:r.CENTER_Y,duration:600,ease:a.a.Math.Easing.Quadratic.Out,onComplete:()=>{this._active=!0}}),this._voReminder=0,X.playVO(this.scene,"CMFT_5.0_73",()=>{X.playVO(this.scene,"CMFT_5.0_74",()=>{this._voReminder=r.VO_REMINDER_TIMER})})}});break;case Xe.STEP_3:this.tween(this._jar,.6,{x:r.CENTER_X-r.WIDTH},Ye.IN),this.scene.tweens.add({targets:this._knife,x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,duration:1e3,ease:a.a.Math.Easing.Quadratic.Out,onComplete:()=>{this.tween(this._plate,1,{x:this._plate.x+r.WIDTH},Ye.OUT),this.tween(this._bread,1,{x:this._bread.x+r.WIDTH},Ye.OUT),this.tween(this._spread,1,{x:this._spread.x+r.WIDTH},Ye.OUT),this.tween(this._banana,1,{x:r.CENTER_X},Ye.IN,0,()=>{this._active=!0}),this._voReminder=0,X.playVO(this.scene,"CMFT_5.0_75",()=>{this._voReminder=r.VO_REMINDER_TIMER})}});break;case Xe.STEP_4:this.tween(this._banana,1,{y:r.CENTER_Y+r.HEIGHT},Ye.OUT,0,()=>{this.tween(this._cuttingBoard,1,{x:r.CENTER_X},Ye.OUT),this.tween(this._bananaCut,1,{x:r.CENTER_X},Ye.OUT,0,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.0_76",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_5:this._banana.x=r.CENTER_X+r.WIDTH,this._banana.y=r.CENTER_Y+30,this._banana.setTexture(this._banana.texture.key,"banana_slices"),this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x-r.WIDTH},Ye.OUT,1),this.tween(this._bananaCut,1,{x:this._bananaCut.x-r.WIDTH},Ye.OUT,1,()=>{this._voReminder=0,X.playVO(this.scene,"CMFT_5.0_77",()=>{this._voReminder=r.VO_REMINDER_TIMER})}),this.tween(this._plate,1,{x:this._plate.x-r.WIDTH},Ye.OUT,1.5),this.tween(this._bread,1,{x:this._bread.x-r.WIDTH},Ye.OUT,1.5),this.tween(this._spread,1,{x:this._spread.x-r.WIDTH},Ye.OUT,1.5),this.tween(this._banana,1,{x:this._banana.x-r.WIDTH},Ye.OUT,1.5,()=>{this.tween(this._honig,.6,{x:r.CENTER_X+200,y:r.CENTERY},Ye.OUT,0,()=>{this._active=!0})});break;case Xe.STEP_6:this.tween(this._honig,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT,0,()=>{this._voReminder=0,X.playVO(this.scene,"CMFT_5.0_78",()=>{this._setState(Xe.END)})});break;case Xe.END:this.scene.time.delayedCall(300,()=>{X.playAudio(this.scene,"bread_drop")}),this.tween(this._endeDesBrotes,1,{y:r.CENTER_Y-20},Ye.BOUNCE_OUT,0,()=>{this.scene.time.delayedCall(1e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})})}}update(e){super.update(e)}_doVOReminder(){switch(this._state){case Xe.STEP_1:break;case Xe.STEP_2:X.playVO(this.scene,"CMFT_5.0_80",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_3:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.0_81",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_4:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.0_82",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_5:X.playVO(this.scene,"CMFT_5.0_83",()=>{this._voReminder=r.VO_REMINDER_TIMER})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:switch(this._state){case Xe.STEP_1:s.x>this._bread.x-.5*this._bread.width&&s.x<this._bread.x+.5*this._bread.width&&s.y>this._bread.y-.5*this._bread.height&&s.y<this._bread.y+.5*this._bread.height&&this._setState(Xe.STEP_2);break;case Xe.STEP_3:this._banana.onInput(k.DOWN,s);break;case Xe.STEP_4:s.x>this._bananaCut.x-.5*this._bananaCut.width&&s.x<this._bananaCut.x+.5*this._bananaCut.width&&s.y>this._bananaCut.y-.5*this._bananaCut.height&&s.y<this._bananaCut.y+.5*this._bananaCut.height&&(this._bananaCut.onInput(k.DOWN,s,()=>{this._setState(Xe.STEP_5)}),this._voReminder=r.VO_REMINDER_TIMER)}break;case k.MOVE:switch(this._state){case Xe.STEP_1:s.x>this._bread.x-.5*this._bread.width&&s.x<this._bread.x+.5*this._bread.width&&s.y>this._bread.y-.5*this._bread.height&&s.y<this._bread.y+.5*this._bread.height?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_2:this._knife.x=s.x,this._knife.y=s.y,s.x>this._bread.x-.5*this._bread.width&&s.x<this._bread.x+.5*this._bread.width&&s.y>this._bread.y-.5*this._bread.height&&s.y<this._bread.y+.5*this._bread.height?(this._spread.doSpread(()=>{this._setState(Xe.STEP_3)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_3:s.x>this._banana.x-.5*this._banana.width&&s.x<this._banana.x+.5*this._banana.width&&s.y>this._banana.y-.5*this._banana.height&&s.y<this._banana.y+.5*this._banana.height?(this._banana.onInput(k.MOVE,s,()=>{this._setState(Xe.STEP_4)},"banana_peel"),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_4:s.x>this._bananaCut.x-.5*this._bananaCut.width&&s.x<this._bananaCut.x+.5*this._bananaCut.width&&s.y>this._bananaCut.y-.5*this._bananaCut.height&&s.y<this._bananaCut.y+.5*this._bananaCut.height?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_5:this._honig.x=s.x,this._honig.y=s.y,s.x>this._bread.x-.5*this._bread.width&&s.x<this._bread.x+.5*this._bread.width&&s.y>this._bread.y-.5*this._bread.height&&s.y<this._bread.y+.5*this._bread.height?(this._honigAufstrich.doSpread(()=>{this._setState(Xe.STEP_6)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:switch(this._state){case Xe.STEP_3:s.x>this._banana.x-.5*this._banana.width&&s.x<this._banana.x+.5*this._banana.width&&s.y>this._banana.y-.5*this._banana.height&&s.y<this._banana.y+.5*this._banana.height&&this._banana.onInput(k.UP,s,()=>{this._setState(Xe.STEP_4)},"banana_peel")}}}}const qe=Object.freeze({IN:0,IDLE:1,OUT:2}),Je=420,et=500,tt=.4,st=3;class it extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING APPLEPIE"),this._setState(Xe.STEP_1)}dispose(){this._bowl.off("complete",this._onAnimationComplete),this._poof.off("complete",this._onPoofAnimationComplete),super.dispose()}_buildMinigame(){this._bowl=this.scene.add.spine(r.CENTER_X+20,r.CENTER_Y,"build_recipe"),this._bowl.setScale(.5,.5),this._bowl.on("complete",this._onAnimationComplete),this._spoon=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y-r.HEIGHT,asset:"mixing_spoon_1",pack:"build_recipe_atlas",originX:.5,originY:.8}),I.FG),this._currMul=0,this._totalTime=0,this._dough=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+r.HEIGHT,asset:"dough_1",pack:"br_pie"},6,"dough_",1),I.BG),this._rollingPin=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+r.HEIGHT,asset:"rollingpin",pack:"br_pie"}),I.FG),this._cuttingBoard=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+50,asset:"cuttingboard",pack:"build_recipe_atlas"}),I.BG),this._apples=[],this._apples.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X-105+r.WIDTH,y:r.CENTER_Y+20,alpha:0,asset:"apple_cut_1",pack:"br_pie"},8,"apple_cut_",1),I.BG)),this._apples.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+105+r.WIDTH,y:r.CENTER_Y+20,alpha:0,asset:"apple_cut_1",pack:"br_pie"},8,"apple_cut_",1),I.BG)),this._poof=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"mixing"),this._poof.setScale(.5,.5),this._poof.setDepth(I.FG),this._poof.alpha=0,this._poof.on("complete",this._onPoofAnimationComplete),this._poofState=null,this._hasChopped=!1}_onAnimationComplete(e){const t=this.scene._assembly;switch(t._state){case Xe.STEP_1:t._active=!0;break;case Xe.STEP_2:t._step2Init?(t._step2Init=!1,t._bowl.setAnimation(0,"pie_step_2a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.3_119",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.STEP_3:t._step3Init?(t._step3Init=!1,t._bowl.setAnimation(0,"pie_step_3a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.3_120",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.STEP_4:t._step4Init?(t._step4Init=!1,t._bowl.setAnimation(0,"pie_step_4a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.2_102",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.STEP_5:t._step5Init&&(t._step5Init=!1,t._bowl.setAnimation(0,"pie_step_5",!1),t.tween(t._spoon,.5,{y:r.CENTER_Y+75},Ye.OUT,0,()=>{t._active=!0,t._setPoofAnimState(qe.IN),X.playAudio(t.scene,"food_mixing",null,0,!0)}),t._voReminder=0,X.playVO(this.scene,"CMFT_5.3_121",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_8:t._step8Init?t._step8Init=!1:t._active=!0;break;case Xe.STEP_9:t._step9Init?(t._step9Init=!1,t._bowl.setAnimation(0,"pie_step_9a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.3_124",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.STEP_10:t._step10Init?(t._step10Init=!1,t._voReminder=0,t._bowl.setAnimation(0,"pie_step_10",!1),X.playVO(this.scene,"CMFT_5.3_125")):(X.playAudio(this.scene,"pie_cooking"),this.scene.time.delayedCall(3e3,()=>{t._setState(Xe.END)}))}}_setPoofAnimState(e){switch(this._poofState=e,this._poofState){case qe.IN:this._currMul=1,this._poof.alpha=1,this._poof.setAnimation(0,"mix_in",!1);break;case qe.IDLE:this._poof.setAnimation(0,"mix_loop",!0);break;case qe.OUT:this._poof.setAnimation(0,"mix_out",!1)}}_onPoofAnimationComplete(e){const t=this.scene._assembly;switch(t._poofState){case qe.IN:t._setPoofAnimState(qe.IDLE);break;case qe.IDLE:break;case qe.OUT:t._poof.alpha=0}}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:this._bowl.setAnimation(0,"pie_step_1a",!1),X.playVO(this.scene,"CMFT_5.3_118",()=>{X.playVO(this.scene,"CMFT_5.2_97",()=>{this._voReminder=r.VO_REMINDER_TIMER})},1,1);break;case Xe.STEP_2:this._step2Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this._bowl.setAnimation(0,"pie_step_1b",!1);break;case Xe.STEP_3:this._step3Init=!0,this.doReact(),this.scene.time.delayedCall(600,()=>{X.playAudio(this.scene,"pour_liquid")}),this._bowl.setAnimation(0,"pie_step_2b",!1);break;case Xe.STEP_4:this._step4Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"poof_drop")}),this._bowl.setAnimation(0,"pie_step_3b",!1);break;case Xe.STEP_5:this._step5Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour")}),this._bowl.setAnimation(0,"pie_step_4b",!1);break;case Xe.STEP_6:this._setPoofAnimState(qe.OUT),this._bowl.state.timeScale=1,this._currMul=0,this._totalTime=0,this.tween(this._spoon,.5,{y:r.CENTER_Y-r.HEIGHT},Ye.IN,0,()=>{this.tween(this._bowl,1,{y:r.CENTER_Y+r.HEIGHT},Ye.OUT),this.tween(this._dough,1,{y:r.CENTER_Y+75},Ye.OUT),this.tween(this._rollingPin,1,{y:r.CENTER_Y+75},Ye.OUT,0,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.3_122",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_7:this.tween(this._rollingPin,1,{y:r.CENTER_Y+r.HEIGHT},Ye.BUMP_OUT,.5,()=>{this.tween(this._dough,.5,{y:r.CENTER_Y+r.HEIGHT},Ye.IN,0,()=>{for(let e of this._apples)e.alpha=1,this.tween(e,1,{x:e.x-r.WIDTH},Ye.OUT);this.tween(this._cuttingBoard,1,{x:r.CENTER_X},Ye.OUT,0,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.3_123",()=>{this._voReminder=r.VO_REMINDER_TIMER})})})});break;case Xe.STEP_8:this._step8Init=!0,this._bowl.setAnimation(0,"pie_unbaked_idle",!1),this.tween(this._cuttingBoard,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT,1);for(let e of this._apples)this.tween(e,1,{x:e.x+r.WIDTH},Ye.OUT,1);this.tween(this._bowl,1,{y:r.CENTER_Y},Ye.OUT,1.5,()=>{this._bowl.setAnimation(0,"pie_step_8a",!1),this._voReminder=0,X.playVO(this.scene,"CMFT_5.2_101",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_9:this._step9Init=!0,this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this.doReact(),this._bowl.setAnimation(0,"pie_step_8b",!1);break;case Xe.STEP_10:this._step10Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour")}),this._bowl.setAnimation(0,"pie_step_9b",!1);break;case Xe.END:this._bowl.setAnimation(0,"pie_step_11",!1),this.scene.time.delayedCall(3e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})}}update(e){super.update(e);const t=e/1e3;this._state!=Xe.STEP_5||this._step5Init||(this._bowl.state.timeScale=1*this._currMul,this._poof.alpha=1*this._currMul,this._currMul>0&&(this._currMul-=t,this._currMul<=0&&(this._currMul=0)),this._totalTime<st&&(this._totalTime+=this._currMul*t,this._totalTime>=st&&(this._totalTime=st,this._totalTime==st&&(X.stopAudio("food_mixing"),this._setState(Xe.STEP_6)))),this._totalTime>.5*st&&(this._currMul=1),X.setVolume("food_mixing",.7*this._currMul))}_doVOReminder(){switch(this._state){case Xe.STEP_1:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_108",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_2:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.3_126",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_3:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.3_127",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_4:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_113",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_5:X.playVO(this.scene,"CMFT_5.2_117",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_6:X.playVO(this.scene,"CMFT_5.1_91",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_7:this._hasChopped?X.playVO(this.scene,R.isMobile()?"CMFT_5.3_129":"CMFT_5.3_130",()=>{this._voReminder=r.VO_REMINDER_TIMER}):X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.3_128",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_8:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_112",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_9:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.3_131",()=>{this._voReminder=r.VO_REMINDER_TIMER})})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:switch(this._state){case Xe.STEP_1:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_2);break;case Xe.STEP_2:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_3);break;case Xe.STEP_3:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_4);break;case Xe.STEP_4:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_5);break;case Xe.STEP_7:this._voReminder=r.VO_REMINDER_TIMER;let e=1;for(let t of this._apples)s.x>t.x-.5*t.width&&s.x<t.x+.5*t.width&&s.y>t.y-.5*t.height&&s.y<t.y+.5*t.height&&(t.onInput(k.DOWN,s,()=>{}),this._hasChopped||(this._hasChopped=!0)),e*=t.complete?1:0;1==e&&this._setState(Xe.STEP_8);break;case Xe.STEP_8:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_9);break;case Xe.STEP_9:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)&&this._setState(Xe.STEP_10)}break;case k.MOVE:switch(this._state){case Xe.STEP_1:case Xe.STEP_2:case Xe.STEP_3:case Xe.STEP_4:case Xe.STEP_8:case Xe.STEP_9:s.x>this._bowl.x-.5*Je&&s.x<this._bowl.x+.5*Je&&s.y>this._bowl.y-et*tt&&s.y<this._bowl.y+et*(1-tt)?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_5:this._spoon.x=s.x,this._spoon.y=s.y,s.x>r.CENTER_X-150&&s.x<r.CENTER_X+110?(this._currMul=1,this._voReminder=r.VO_REMINDER_TIMER,0==this._timerDelay&&(X.playVO(this.scene,a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_155":"CMFT_5.6_156"),this._timerDelay=5),this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_6:s.x>r.CENTER_X-250&&s.x<r.CENTER_X+250&&s.y>r.CENTER_Y+60-175&&s.y<r.CENTER_Y+.5*r.HEIGHT?(this._rollingPin.y=s.y,this._dough.doSpread(()=>{this._setState(Xe.STEP_7)},!1,!0),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_7:for(let e of this._apples){if(s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&!e.complete){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}}break;case k.UP:}}}const at=80;class _t extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING PIZZA"),this._setState(Xe.STEP_1)}dispose(){super.dispose()}_buildMinigame(){this._dough=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+r.HEIGHT,asset:"dough_1",pack:"br_pie"},6,"dough_",1),I.BG),this._rollingPin=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+r.HEIGHT,asset:"rollingpin",pack:"br_pie"}),I.FG),this._spoon=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"sauce_spoon",pack:"br_pizza",rotation:45,originX:.5,originY:.85}),I.FG),this._sauce=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+at,asset:"sauce_1",pack:"br_pizza",alpha:0},6,"sauce_",1,1,"spread_item"),I.BG),this._jar=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X-r.WIDTH,y:r.CENTER_Y-100,asset:"jar_tomatosauce",pack:"br_pizza"}),I.BG),this._cup=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"pizza_cheese_cup",pack:"br_pizza",rotation:-10,originX:.3,originY:.25}),I.FG),this._cheese=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+at,asset:"cheese_1",pack:"br_pizza",alpha:0},6,"cheese_",1,1,"cheese_sprinkle"),I.BG),this._cuttingBoard=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+50,asset:"cuttingboard",pack:"build_recipe_atlas"}),I.BG),this._pineapple=this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+20,asset:"pineapple_1",pack:"br_pizza"},8,"pineapple_",1),I.BG),this._mushrooms=[],this._mushrooms.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X-105+r.WIDTH,y:r.CENTER_Y+20,asset:"mushroom_1",pack:"br_pizza"},3,"mushroom_",1),I.BG)),this._mushrooms.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+105+r.WIDTH,y:r.CENTER_Y+20,asset:"mushroom_1",pack:"br_pizza"},3,"mushroom_",1),I.BG)),this._pizza=this.scene.add.spine(r.CENTER_X+20,r.CENTER_Y+r.HEIGHT,"build_recipe","pizza_unbaked_idle"),this._pizza.setScale(.5,.5),this._pizza.alpha=0,this._pizza.on("complete",this._onAnimationComplete)}_onAnimationComplete(e){const t=this.scene._assembly;switch(t._state){case Xe.STEP_6:t._step6Init&&(t._step6Init=!1,t._voReminder=0,X.playAudio(this.scene,"pie_cooking"),this.scene.time.delayedCall(3e3,()=>{t._setState(Xe.END)}))}}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:X.playVO(this.scene,"CMFT_5.1_84",()=>{X.playVO(this.scene,"CMFT_5.1_85",()=>{}),this.tween(this._dough,1,{y:r.CENTER_Y+at},Ye.OUT),this.tween(this._rollingPin,1,{y:r.CENTER_Y+at},Ye.OUT,0,()=>{this._active=!0,this._voReminder=r.VO_REMINDER_TIMER})},1,1);break;case Xe.STEP_2:this.tween(this._rollingPin,1,{y:r.CENTER_Y+r.HEIGHT},Ye.IN,.5,()=>{this.tween(this._jar,.6,{x:r.CENTER_X-360},Ye.OUT),this.tween(this._spoon,1,{x:r.CENTER_X+200},Ye.OUT,0,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.1_86_alt",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_3:this.tween(this._jar,.6,{x:r.CENTER_X-r.WIDTH},Ye.IN),this.tween(this._spoon,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT),this.tween(this._cup,1,{x:r.CENTER_X+200},Ye.OUT,.5,()=>{this._active=!0,X.playVO(this.scene,"CMFT_5.1_87",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_4:this.tween(this._dough,1,{x:this._dough.x+r.WIDTH},Ye.OUT),this.tween(this._sauce,1,{x:this._sauce.x+r.WIDTH},Ye.OUT),this.tween(this._cheese,1,{x:this._cheese.x+r.WIDTH},Ye.OUT),this.tween(this._cup,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT,0,()=>{this.tween(this._pineapple,1,{x:this._pineapple.x-r.WIDTH},Ye.OUT),this.tween(this._cuttingBoard,1,{x:r.CENTER_X},Ye.OUT,0,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.1_88",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_5:this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x+r.WIDTH},Ye.IN),this.tween(this._pineapple,1,{x:this._pineapple.x+r.WIDTH},Ye.IN,0,()=>{this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x-r.WIDTH},Ye.OUT);for(let e of this._mushrooms)e.alpha=1,this.tween(e,1,{x:e.x-r.WIDTH},Ye.OUT);this.scene.time.delayedCall(1e3,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.1_89",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_6:for(let e of this._mushrooms)e.alpha=1,this.tween(e,1,{x:e.x+r.WIDTH},Ye.IN);this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x+r.WIDTH},Ye.IN,0,()=>{this._step6Init=!0,this._pizza.alpha=1,this.tween(this._pizza,1,{y:r.CENTER_Y},Ye.OUT,0,()=>{this._pizza.setAnimation(0,"pizza_step_6",!1),X.playVO(this.scene,"CMFT_5.1_90",()=>{})})});break;case Xe.END:this._pizza.setAnimation(0,"pizza_step_7",!1),this.scene.time.delayedCall(3e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})}}update(e){super.update(e)}_doVOReminder(){switch(this._state){case Xe.STEP_1:X.playVO(this.scene,"CMFT_5.1_91",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_2:X.playVO(this.scene,"CMFT_5.1_92",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_3:X.playVO(this.scene,"CMFT_5.1_95",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_4:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.1_93",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_5:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.1_94",()=>{this._voReminder=r.VO_REMINDER_TIMER})})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:switch(this._state){case Xe.STEP_3:this._cup.x=s.x,this._cup.y=s.y,this._voReminder=r.VO_REMINDER_TIMER,s.x>this._dough.x-.5*this._dough.width&&s.x<this._dough.x+.5*this._dough.width&&s.y>this._dough.y-.5*this._dough.height&&s.y<this._dough.y+.5*this._dough.height&&this._cheese.doSpread(()=>{this._setState(Xe.STEP_4)},!0);break;case Xe.STEP_4:s.x>this._pineapple.x-.5*this._pineapple.width&&s.x<this._pineapple.x+.5*this._pineapple.width&&s.y>this._pineapple.y-.5*this._pineapple.height&&s.y<this._pineapple.y+.5*this._pineapple.height&&(this._pineapple.onInput(k.DOWN,s,()=>{this._setState(Xe.STEP_5)}),this._voReminder=r.VO_REMINDER_TIMER);break;case Xe.STEP_5:let e=1;for(let t of this._mushrooms)s.x>t.x-.5*t.width&&s.x<t.x+.5*t.width&&s.y>t.y-.5*t.height&&s.y<t.y+.5*t.height&&(t.onInput(k.DOWN,s,()=>{}),this._voReminder=r.VO_REMINDER_TIMER),e*=t.complete?1:0;1==e&&this._setState(Xe.STEP_6)}break;case k.MOVE:switch(this._state){case Xe.STEP_1:s.x>r.CENTER_X-250&&s.x<r.CENTER_X+250&&s.y>r.CENTER_Y+at-175&&s.y<r.CENTER_Y+.5*r.HEIGHT?(this._rollingPin.y=s.y,this._dough.doSpread(()=>{this._setState(Xe.STEP_2)},!1,!0),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_2:this._spoon.x=s.x,this._spoon.y=s.y,s.x>this._dough.x-.5*this._dough.width&&s.x<this._dough.x+.5*this._dough.width&&s.y>this._dough.y-.5*this._dough.height&&s.y<this._dough.y+.5*this._dough.height?(this._sauce.doSpread(()=>{this._setState(Xe.STEP_3)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_3:this._cup.x=s.x,this._cup.y=s.y,s.x>this._dough.x-.5*this._dough.width&&s.x<this._dough.x+.5*this._dough.width&&s.y>this._dough.y-.5*this._dough.height&&s.y<this._dough.y+.5*this._dough.height?(this._cheese.doSpread(()=>{this._setState(Xe.STEP_4)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_4:s.x>this._pineapple.x-.5*this._pineapple.width&&s.x<this._pineapple.x+.5*this._pineapple.width&&s.y>this._pineapple.y-.5*this._pineapple.height&&s.y<this._pineapple.y+.5*this._pineapple.height?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_5:for(let e of this._mushrooms){if(s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&!e.complete){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}}break;case k.UP:}}}class nt extends ne{constructor(e,t,s,i,a=0){super(e,t),this._index=0+a,this._maxIndex=s,this._prefix=i,this.complete=!1,this._swipeCoordX,this._swipeCoordY,this._swipeCoordX2,this._swipeCoordY2,this._swipeMinDistance=100,this._isCollided=!1}preUpdate(e,t){super.update(e,t)}destroy(){super.destroy()}onInput(e,t,s,i){if(!this.complete)switch(e){case k.DOWN:this._isCollided=!1,this._swipeCoordX=t.x,this._swipeCoordY=t.y,this._checkCollision(t);break;case k.MOVE:this._checkCollision(t);break;case k.UP:this._swipeCoordX2=t.x,this._swipeCoordY2=t.y,this._checkCollision(t);let a=!1;this._swipeCoordX2<this._swipeCoordX-this._swipeMinDistance?(console.log("left"),a=!0):this._swipeCoordX2>this._swipeCoordX+this._swipeMinDistance?(console.log("right"),a=!0):this._swipeCoordY2<this._swipeCoordY-this._swipeMinDistance?(console.log("up"),a=!0):this._swipeCoordY2>this._swipeCoordY+this._swipeMinDistance&&(console.log("down"),a=!0),a&&this._isCollided?this._updateCorn(s,i):!a&&this._isCollided&&this._updateCorn(s,i)}}_checkCollision(e){e.x>this.x-.5*this.width&&e.x<this.x+.5*this.width&&e.y>this.y-.5*this.height&&e.y<this.y+.5*this.height&&(this._isCollided=!0)}_updateCorn(e,t){this._index++,this.setTexture(this.texture.key,this._prefix+this._index);let s=this._getPos(this._index);this.scene.events.emit(O.SPAWN_PARTICLE,{x:this.x+s.x,y:this.y+s.y}),t(),this._index==this._maxIndex&&(this.complete=!0,e())}_getPos(e){let t={x:0,y:0};switch(e){case 1:t.x=-20,t.y=-70;break;case 2:t.x=-25,t.y=0;break;case 3:t.x=-24,t.y=80;break;case 4:t.x=20,t.y=-70;break;case 5:t.x=25,t.y=0;break;case 6:t.x=24,t.y=80;break;case 7:t.x=0,t.y=-70;break;case 8:t.x=0,t.y=0;break;case 9:t.x=0,t.y=80}return t}}class ot extends ne{constructor(e,t){t.pack="br_cornbread",t.asset="corn_particle_"+a.a.Math.Between(1,3),super(e,t),this.velocity.x=(a.a.Math.FloatBetween(0,1)>.5?1:-1)*a.a.Math.FloatBetween(50,10),this.velocity.y=-200,this.gravity=1e3}preUpdate(e,t){super.update(e,t),this.updatePosFromVel(t);const s=t/1e3;this.velocity.y<this.gravity&&(this.velocity.y+=this.gravity*s,this.velocity.y>=this.gravity&&(this.velocity.y=this.gravity)),this.y>=r.CENTER_Y+250&&this.destroy()}destroy(){super.destroy()}}const ht=Object.freeze({IN:0,IDLE:1,OUT:2}),ct=420,lt=500,rt=.4,dt=3,pt=9;class Et extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING CORNBREAD"),this._setState(Xe.STEP_1)}dispose(){this._bowl.off("complete",this._onAnimationComplete),this.scene.events.removeListener(O.SPAWN_PARTICLE,this._spawnParticle,this),this._poof.off("complete",this._onPoofAnimationComplete),super.dispose()}_buildMinigame(){this._bowl=this.scene.add.spine(r.CENTER_X+20,r.CENTER_Y,"build_recipe"),this._bowl.setScale(.5,.5),this._bowl.on("complete",this._onAnimationComplete),this._cornHusk=this.scene.addElement(new Ze(this.scene,{x:r.CENTER_X-r.WIDTH,y:r.CENTER_Y,asset:"corn_shuck_0",pack:"br_cornbread"},6,"corn_shuck_",1),I.BG),this._corn=this.scene.addElement(new nt(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y-80,asset:"corn_kernels_0",pack:"br_cornbread"},pt,"corn_kernels_"),I.BG),this._currIndex=0,this._currMaxTime=2*this._currIndex,this._totalTime=0,this._bowlFG=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+20,y:r.CENTER_Y-2,alpha:0,asset:"bowl_front",pack:"br_cornbread",originX:.54,originY:0}),I.FG),this.scene.events.addListener(O.SPAWN_PARTICLE,this._spawnParticle,this),this._spoon=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y-r.HEIGHT,asset:"mixing_spoon_1",pack:"build_recipe_atlas",originX:.5,originY:.8}),I.FG),this._currMul=0,this._poof=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"mixing"),this._poof.setScale(.5,.5),this._poof.setDepth(I.FG),this._poof.alpha=0,this._poof.on("complete",this._onPoofAnimationComplete),this._poofState=null}_spawnParticle(e=null){for(let t=0;t<3;t++)this.scene.time.delayedCall(100*t,()=>{this.scene.addElement(new ot(this.scene,{x:e.x+a.a.Math.FloatBetween(-10,10),y:e.y+a.a.Math.FloatBetween(-10,10)}),I.MAIN)});X.isPlaying("pour_blub")||X.playAudio(this.scene,"pour_blub",null,1)}_onAnimationComplete(e){const t=this.scene._assembly;switch(t._state){case Xe.STEP_1:t._active=!0;break;case Xe.STEP_2:t._step2Init&&(t._step2Init=!1,t._voReminder=0,t.tween(t._bowl,1,{x:t._bowl.x+r.WIDTH},Ye.IN,0,()=>{t.tween(t._cornHusk,1,{x:r.CENTER_X},Ye.OUT,0,()=>{t._active=!0}),X.playVO(this.scene,"CMFT_5.2_98",()=>{t._voReminder=r.VO_REMINDER_TIMER})}));break;case Xe.STEP_3:break;case Xe.STEP_4:t._active=!0;break;case Xe.STEP_5:t._step5Init?(t._step5Init=!1,t._bowl.setAnimation(0,"cornbread_step_5a",!1)):(t._active=!0,X.playVO(this.scene,"CMFT_5.2_101",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_6:t._step6Init?(t._step6Init=!1,t._bowl.setAnimation(0,"cornbread_step_6a",!1)):(t._active=!0,X.playVO(this.scene,"CMFT_5.2_102",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_7:t._step7Init?(t._step7Init=!1,t._bowl.setAnimation(0,"cornbread_step_7a",!1)):(t._active=!0,X.playVO(this.scene,"CMFT_5.2_103",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_8:t._step8Init?(t._step8Init=!1,t._bowl.setAnimation(0,"cornbread_step_8a",!1)):(t._active=!0,X.playVO(this.scene,"CMFT_5.2_104",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_9:t._step9Init?(t._step9Init=!1,t._bowl.setAnimation(0,"cornbread_step_9a",!1)):(t._active=!0,X.playVO(this.scene,"CMFT_5.2_105",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_10:t._step10Init&&(t._step10Init=!1,t._bowl.setAnimation(0,"cornbread_step_10",!1),t.tween(t._spoon,.5,{y:r.CENTER_Y+75},Ye.OUT,0,()=>{t._active=!0,t._setPoofAnimState(ht.IN),X.playAudio(t.scene,"food_mixing",null,0,!0)}),t._voReminder=0,X.playVO(this.scene,"CMFT_5.2_106",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_11:t._step11Init&&(t._step11Init=!1,t._voReminder=0,X.playAudio(this.scene,"pie_cooking"),this.scene.time.delayedCall(3e3,()=>{t._setState(Xe.END)}))}}_setPoofAnimState(e){switch(this._poofState=e,this._poofState){case ht.IN:this._currMul=1,this._poof.alpha=1,this._poof.setAnimation(0,"mix_in",!1);break;case ht.IDLE:this._poof.setAnimation(0,"mix_loop",!0);break;case ht.OUT:this._poof.setAnimation(0,"mix_out",!1)}}_onPoofAnimationComplete(e){const t=this.scene._assembly;switch(t._poofState){case ht.IN:t._setPoofAnimState(ht.IDLE);break;case ht.IDLE:break;case ht.OUT:t._poof.alpha=0}}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:this._bowl.setAnimation(0,"cornbread_step_1a",!1),X.playVO(this.scene,"CMFT_5.2_96",()=>{X.playVO(this.scene,"CMFT_5.2_97",()=>{this._voReminder=r.VO_REMINDER_TIMER})},1,1);break;case Xe.STEP_2:this._step2Init=!0,this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this.doReact(),this._bowl.setAnimation(0,"cornbread_step_1b",!1);break;case Xe.STEP_3:this.tween(this._cornHusk,.6,{y:r.CENTER_Y+r.HEIGHT},Ye.IN,.5,()=>{this.tween(this._corn,1,{x:r.CENTER_X},Ye.OUT),this.tween(this._bowl,1,{x:this._bowl.x-r.WIDTH},Ye.OUT,0,()=>{this._bowlFG.alpha=1,this._active=!0,this._bowl.setAnimation(0,"cornbread_step_3",!1),X.playVO(this.scene,"CMFT_5.2_99",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_4:this._bowl.state.timeScale=1,this.scene.time.delayedCall(1e3,()=>{this._bowlFG.alpha=0}),this.tween(this._corn,1,{x:r.CENTER_X+r.WIDTH},Ye.IN,1,()=>{X.playVO(this.scene,"CMFT_5.2_100",()=>{this._voReminder=r.VO_REMINDER_TIMER}),this._bowl.setAnimation(0,"cornbread_step_4a",!1)});break;case Xe.STEP_5:this._step5Init=!0,this.scene.time.delayedCall(100,()=>{X.playAudio(this.scene,"egg_crack")}),this.doReact(),this._bowl.setAnimation(0,"cornbread_step_4b",!1);break;case Xe.STEP_6:this._step6Init=!0,this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this.doReact(),this._bowl.setAnimation(0,"cornbread_step_5b",!1);break;case Xe.STEP_7:this._step7Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour")}),this._bowl.setAnimation(0,"cornbread_step_6b",!1);break;case Xe.STEP_8:this._step8Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour")}),this._bowl.setAnimation(0,"cornbread_step_7b",!1);break;case Xe.STEP_9:this._step9Init=!0,this.doReact(),this.scene.time.delayedCall(600,()=>{X.playAudio(this.scene,"pour_liquid")}),this._bowl.setAnimation(0,"cornbread_step_8b",!1);break;case Xe.STEP_10:this._totalTime=0,this._currMul=0,this._step10Init=!0,this.doReact(),this.scene.time.delayedCall(600,()=>{X.playAudio(this.scene,"pour_liquid")}),this._bowl.setAnimation(0,"cornbread_step_9b",!1);break;case Xe.STEP_11:this._setPoofAnimState(ht.OUT),this._bowl.state.timeScale=1,this._currMul=0,this._totalTime=0,this.tween(this._spoon,.5,{y:r.CENTER_Y-r.HEIGHT},Ye.IN,0,()=>{this._step11Init=!0,X.playVO(this.scene,"CMFT_5.2_107"),this._bowl.setAnimation(0,"cornbread_step_11",!1)});break;case Xe.END:this._bowl.setAnimation(0,"cornbread_step_12",!1),this.scene.time.delayedCall(3e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})}}update(e){super.update(e);const t=e/1e3;this._state==Xe.STEP_3&&this._active&&(this._totalTime<this._currMaxTime?(this._bowl.state.timeScale=1,this._totalTime+=t,this._totalTime>=this._currMaxTime&&(this._totalTime=this._currMaxTime)):this._bowl.state.timeScale=0),this._state!=Xe.STEP_10||this._step10Init||(this._bowl.state.timeScale=1*this._currMul,this._poof.alpha=1*this._currMul,this._currMul>0&&(this._currMul-=t,this._currMul<=0&&(this._currMul=0)),this._totalTime<dt&&(this._totalTime+=this._currMul*t,this._totalTime>=dt&&(this._totalTime=dt,this._totalTime==dt&&(X.stopAudio("food_mixing"),this._setState(Xe.STEP_11)))),this._totalTime>.5*dt&&(this._currMul=1),X.setVolume("food_mixing",.7*this._currMul))}_doVOReminder(){switch(this._state){case Xe.STEP_1:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_108",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_2:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_109",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_3:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_110",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_4:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_111",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_5:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_112",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_6:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_113",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_7:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_114",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_8:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_115",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_9:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.2_116",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_10:X.playVO(this.scene,"CMFT_5.2_117",()=>{this._voReminder=r.VO_REMINDER_TIMER})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:switch(this._state){case Xe.STEP_1:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_2);break;case Xe.STEP_2:this._cornHusk.onInput(k.DOWN,s);break;case Xe.STEP_3:this._corn.onInput(k.DOWN,s),this._voReminder=r.VO_REMINDER_TIMER;break;case Xe.STEP_4:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_5);break;case Xe.STEP_5:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_6);break;case Xe.STEP_6:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_7);break;case Xe.STEP_7:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_8);break;case Xe.STEP_8:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_9);break;case Xe.STEP_9:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)&&this._setState(Xe.STEP_10)}break;case k.MOVE:switch(this._state){case Xe.STEP_2:s.x>this._cornHusk.x-.5*this._cornHusk.width&&s.x<this._cornHusk.x+.5*this._cornHusk.width&&s.y>this._cornHusk.y-.5*this._cornHusk.height&&s.y<this._cornHusk.y+.5*this._cornHusk.height?(this._cornHusk.onInput(k.MOVE,s,()=>{this._setState(Xe.STEP_3)},"shucking_corn"),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_3:this._corn.onInput(k.MOVE,s),s.x>this._corn.x-.5*this._corn.width&&s.x<this._corn.x+.5*this._corn.width&&s.y>this._corn.y-.5*this._corn.height&&s.y<this._corn.y+.5*this._corn.height?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_1:case Xe.STEP_4:case Xe.STEP_5:case Xe.STEP_6:case Xe.STEP_7:case Xe.STEP_8:case Xe.STEP_9:s.x>this._bowl.x-.5*ct&&s.x<this._bowl.x+.5*ct&&s.y>this._bowl.y-lt*rt&&s.y<this._bowl.y+lt*(1-rt)?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_10:this._spoon.x=s.x,this._spoon.y=s.y,s.x>r.CENTER_X-150&&s.x<r.CENTER_X+110?(this._currMul=1,this._voReminder=r.VO_REMINDER_TIMER,0==this._timerDelay&&(X.playVO(this.scene,a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_155":"CMFT_5.6_156"),this._timerDelay=5),this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:switch(this._state){case Xe.STEP_2:s.x>this._cornHusk.x-.5*this._cornHusk.width&&s.x<this._cornHusk.x+.5*this._cornHusk.width&&s.y>this._cornHusk.y-.5*this._cornHusk.height&&s.y<this._cornHusk.y+.5*this._cornHusk.height&&this._cornHusk.onInput(k.UP,s,()=>{this._setState(Xe.STEP_3)},"shucking_corn");break;case Xe.STEP_3:this._corn.onInput(k.UP,s,()=>{this._active=!1,this._totalTime=2,this._bowl.state.timeScale=1,this.scene.time.delayedCall(1e3,()=>{this._setState(Xe.STEP_4)})},()=>{this._currIndex++,this._currMaxTime=(this._currIndex+1)/pt*2})}}}}const ut=Object.freeze({IN:0,IDLE:1,OUT:2}),Tt=420,yt=520,gt=.6,Ct=3;class mt extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING OATMEAL"),this._setState(Xe.STEP_1)}dispose(){this._bowl.off("complete",this._onAnimationComplete),this._poof.off("complete",this._onPoofAnimationComplete),super.dispose()}_buildMinigame(){this._bowl=this.scene.add.spine(r.CENTER_X+20,r.CENTER_Y,"build_recipe"),this._bowl.setScale(.5,.5),this._bowl.on("complete",this._onAnimationComplete),this._spoon=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y-r.HEIGHT,asset:"mixing_spoon_1",pack:"build_recipe_atlas",originX:.5,originY:.8}),I.FG),this._currMul=0,this._totalTime=0,this._honig=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"honeystick",pack:"build_recipe_atlas",rotation:-45,originX:.5,originY:.1}),I.FG),this._honigAufstrich=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X-2,y:r.CENTER_Y+74,asset:"oatmeal_honey_1",pack:"br_oatmeal",alpha:0},6,"oatmeal_honey_",1,.5,"honey_spread"),I.BG),this._poof=this.scene.add.spine(r.CENTER_X,r.CENTER_Y,"mixing"),this._poof.setScale(.5,.5),this._poof.setDepth(I.FG),this._poof.alpha=0,this._poof.on("complete",this._onPoofAnimationComplete),this._poofState=null}_onAnimationComplete(e){const t=this.scene._assembly;switch(t._state){case Xe.STEP_1:t._active=!0;break;case Xe.STEP_2:t._step2Init?(t._step2Init=!1,t._bowl.setAnimation(0,"oatmeal_step_2a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.4_134",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.STEP_3:t._step3Init&&(t._step3Init=!1,t.tween(t._spoon,.5,{y:r.CENTER_Y+75},Ye.OUT,0,()=>{t._active=!0,t._setPoofAnimState(ut.IN),X.playAudio(t.scene,"food_mixing",null,0,!0)}),t._voReminder=0,X.playVO(this.scene,"CMFT_5.4_135",()=>{t._voReminder=r.VO_REMINDER_TIMER}));break;case Xe.STEP_4:t._step4Init&&(t._step4Init=!1,X.playAudio(this.scene,"pie_cooking"),this.scene.time.delayedCall(3e3,()=>{t._setState(Xe.STEP_5)}));break;case Xe.STEP_5:t._step5Init?(t._step5Init=!1,t._bowl.setAnimation(0,"oatmeal_step_6a",!1),t.tween(t._honig,.6,{x:r.CENTER_X+200,y:r.CENTERY},Ye.OUT,0,()=>{t._active=!0,X.playVO(this.scene,"CMFT_5.4_137",()=>{t._voReminder=r.VO_REMINDER_TIMER})})):t._active=!0;break;case Xe.STEP_6:t._step6Init&&(t._step6Init=!1,t._active=!0);break;case Xe.STEP_7:t._step7Init?(t._step7Init=!1,t._bowl.setAnimation(0,"oatmeal_step_8a",!1),t._voReminder=0,X.playVO(this.scene,"CMFT_5.4_139",()=>{t._voReminder=r.VO_REMINDER_TIMER})):t._active=!0;break;case Xe.END:t._stepEnd&&(t._stepEnd=!1,t._bowl.setAnimation(0,"oatmeal_step_9",!1))}}_setPoofAnimState(e){switch(this._poofState=e,this._poofState){case ut.IN:this._currMul=1,this._poof.alpha=1,this._poof.setAnimation(0,"mix_in",!1);break;case ut.IDLE:this._poof.setAnimation(0,"mix_loop",!0);break;case ut.OUT:this._poof.setAnimation(0,"mix_out",!1)}}_onPoofAnimationComplete(e){const t=this.scene._assembly;switch(t._poofState){case ut.IN:t._setPoofAnimState(ut.IDLE);break;case ut.IDLE:break;case ut.OUT:t._poof.alpha=0}}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:this._bowl.setAnimation(0,"oatmeal_step_1a",!1),X.playVO(this.scene,"CMFT_5.4_132",()=>{X.playVO(this.scene,"CMFT_5.4_133",()=>{this._voReminder=r.VO_REMINDER_TIMER})},1,1);break;case Xe.STEP_2:this._step2Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this._bowl.setAnimation(0,"oatmeal_step_1b",!1);break;case Xe.STEP_3:this._step3Init=!0,this.doReact(),this.scene.time.delayedCall(600,()=>{X.playAudio(this.scene,"pour_liquid")}),this._bowl.setAnimation(0,"oatmeal_step_2b",!1);break;case Xe.STEP_4:this._step4Init=!0,this._setPoofAnimState(ut.OUT),this._bowl.state.timeScale=1,this._currMul=0,this._totalTime=0,this.tween(this._spoon,.5,{y:r.CENTER_Y-r.HEIGHT},Ye.IN,0,()=>{this._bowl.setAnimation(0,"oatmeal_step_4",!1),X.playVO(this.scene,"CMFT_5.4_136",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_5:this._step5Init=!0,this._bowl.setAnimation(0,"oatmeal_step_5",!1);break;case Xe.STEP_6:this._step6Init=!0,this.tween(this._honig,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT,0,()=>{this._voReminder=0,this.scene.time.delayedCall(10,()=>{this._honigAufstrich.alpha=0}),this._bowl.setAnimation(0,"oatmeal_step_7a",!1),X.playVO(this.scene,"CMFT_5.4_138",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_7:this._step7Init=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"pour_blub",null,1)}),this._bowl.setAnimation(0,"oatmeal_step_7b",!1);break;case Xe.END:this._stepEnd=!0,this.doReact(),this.scene.time.delayedCall(500,()=>{X.playAudio(this.scene,"ingredients_pour",null,1)}),this._bowl.setAnimation(0,"oatmeal_step_8b",!1),this.scene.time.delayedCall(5e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})}}update(e){super.update(e);const t=e/1e3;this._state!=Xe.STEP_3||this._step3Init||(this._bowl.state.timeScale=1*this._currMul,this._poof.alpha=1*this._currMul,this._currMul>0&&(this._currMul-=t,this._currMul<=0&&(this._currMul=0)),this._totalTime<Ct&&(this._totalTime+=this._currMul*t,this._totalTime>=Ct&&(this._totalTime=Ct,this._totalTime==Ct&&(X.stopAudio("food_mixing"),this._setState(Xe.STEP_4)))),this._totalTime>.5*Ct&&(this._currMul=1),X.setVolume("food_mixing",.7*this._currMul))}_doVOReminder(){switch(this._state){case Xe.STEP_1:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.4_140",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_2:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.4_141",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_3:X.playVO(this.scene,"CMFT_5.2_117",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_5:X.playVO(this.scene,"CMFT_5.0_83",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_6:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.4_142",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_7:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.3_131",()=>{this._voReminder=r.VO_REMINDER_TIMER})})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};switch(e){case k.DOWN:switch(this._state){case Xe.STEP_1:s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)&&this._setState(Xe.STEP_2);break;case Xe.STEP_2:s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)&&this._setState(Xe.STEP_3);break;case Xe.STEP_6:s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)&&this._setState(Xe.STEP_7);break;case Xe.STEP_7:s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)&&this._setState(Xe.END)}break;case k.MOVE:switch(this._state){case Xe.STEP_1:case Xe.STEP_2:case Xe.STEP_6:case Xe.STEP_7:s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_3:this._spoon.x=s.x,this._spoon.y=s.y,s.x>r.CENTER_X-150&&s.x<r.CENTER_X+110?(this._currMul=1,this._voReminder=r.VO_REMINDER_TIMER,0==this._timerDelay&&(X.playVO(this.scene,a.a.Math.FloatBetween(0,1)>.5?"CMFT_5.6_155":"CMFT_5.6_156"),this._timerDelay=5),this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_5:this._honig.x=s.x,this._honig.y=s.y,s.x>this._bowl.x-.5*Tt&&s.x<this._bowl.x+.5*Tt&&s.y>this._bowl.y-yt*gt&&s.y<this._bowl.y+yt*(1-gt)?(this._honigAufstrich.doSpread(()=>{this._setState(Xe.STEP_6)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:}}}const Mt=90;class bt extends We{constructor(e,t=0){super(e,t),console.log("WE ARE MAKING TACO"),this._setState(Xe.STEP_1)}dispose(){super.dispose()}_buildMinigame(){this._tortilla=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+Mt,asset:"tortilla",pack:"br_taco"}),I.BG),this._spoon=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"beans_spoon",pack:"br_taco",rotation:45,originX:.5,originY:.85}),I.FG),this._beans=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+Mt+7,asset:"beans_1",pack:"br_taco",alpha:0},6,"beans_",1,1,"spread_item"),I.BG),this._toppings=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH+3,y:r.CENTER_Y+Mt+3,alpha:0,asset:"chopped_tomatoes_onions",pack:"br_taco"}),I.BG),this._cuttingBoard=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y+Mt,asset:"cuttingboard",pack:"build_recipe_atlas"}),I.BG),this._tomatoes=[],this._tomatoes.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X-110+r.WIDTH,y:r.CENTER_Y+50,alpha:0,asset:"tomato_cut_0",pack:"br_taco"},2,"tomato_cut_",0),I.BG)),this._tomatoes.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+105+r.WIDTH,y:r.CENTER_Y+50,alpha:0,asset:"tomato_cut_0",pack:"br_taco"},2,"tomato_cut_",0),I.BG)),this._onions=[],this._onions.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X-110+r.WIDTH,y:r.CENTER_Y+50,alpha:0,asset:"onion_cut_0",pack:"br_taco"},2,"onion_cut_",0),I.BG)),this._onions.push(this.scene.addElement(new Ke(this.scene,{x:r.CENTER_X+105+r.WIDTH,y:r.CENTER_Y+50,alpha:0,asset:"onion_cut_0",pack:"br_taco"},2,"onion_cut_",0),I.BG)),this._cup=this.scene.addElement(new ne(this.scene,{x:r.CENTER_X+r.WIDTH,y:r.CENTER_Y,asset:"taco_cheese_cup",pack:"br_taco",rotation:-10,originX:.3,originY:.25}),I.FG),this._cheese=this.scene.addElement(new Qe(this.scene,{x:r.CENTER_X,y:r.CENTER_Y+Mt,asset:"tacocheese_1",pack:"br_taco",alpha:0},6,"tacocheese_",1,1,"cheese_sprinkle"),I.BG);let e=this.scene.anims.generateFrameNames("br_taco",{start:0,end:6,zeroPad:1,prefix:"fold_",suffix:""});this.scene.anims.create({key:"fold",frames:e,frameRate:20,repeat:0}),this._swipeCoordX,this._swipeCoordY,this._swipeCoordX2,this._swipeCoordY2,this._swipeMinDistance=100,this._isCollided=!1}_setState(e){switch(super._setState(e),this._state){case Xe.STEP_1:X.playVO(this.scene,"CMFT_5.5_143",()=>{X.playVO(this.scene,"CMFT_5.5_144",()=>{this._voReminder=r.VO_REMINDER_TIMER}),this.tween(this._spoon,1,{x:r.CENTER_X+200},Ye.OUT,0,()=>{this._active=!0})});break;case Xe.STEP_2:this.tween(this._spoon,1,{x:r.CENTER_X+r.WIDTH},Ye.IN,0,()=>{this.tween(this._tortilla,1,{x:r.CENTER_X+r.WIDTH},Ye.IN),this.tween(this._beans,1,{x:r.CENTER_X+r.WIDTH},Ye.IN);for(let e of this._tomatoes)e.alpha=1,this.tween(e,1,{x:e.x-r.WIDTH},Ye.OUT,.5);this.tween(this._cuttingBoard,1,{x:r.CENTER_X},Ye.OUT,.5,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.5_145",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_3:for(let e of this._tomatoes)e.alpha=1,this.tween(e,1,{x:e.x+r.WIDTH},Ye.IN);this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x+r.WIDTH},Ye.IN,0,()=>{this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x-r.WIDTH},Ye.OUT);for(let e of this._onions)e.alpha=1,this.tween(e,1,{x:e.x-r.WIDTH},Ye.OUT);this.scene.time.delayedCall(1e3,()=>{this._active=!0,this._voReminder=0,X.playVO(this.scene,"CMFT_5.5_146_alt",()=>{this._voReminder=r.VO_REMINDER_TIMER})})});break;case Xe.STEP_4:for(let e of this._onions)e.alpha=1,this.tween(e,1,{x:e.x+r.WIDTH},Ye.IN);this.tween(this._cuttingBoard,1,{x:this._cuttingBoard.x+r.WIDTH},Ye.IN,0,()=>{this.tween(this._tortilla,1,{x:r.CENTER_X},Ye.OUT),this._toppings.alpha=1,this.tween(this._toppings,1,{x:this._toppings.x-r.WIDTH},Ye.OUT),this.tween(this._beans,1,{x:r.CENTER_X},Ye.OUT,0,()=>{this.tween(this._cup,1,{x:r.CENTER_X+200},Ye.OUT,0,()=>{this._active=!0,X.playVO(this.scene,"CMFT_5.5_147",()=>{this._voReminder=r.VO_REMINDER_TIMER})})})});break;case Xe.STEP_5:this._toppings.alpha=0,this._beans.alpha=0,this._cheese.alpha=0,this._tortilla.setTexture("br_taco","fold_0"),this.tween(this._cup,1,{x:r.CENTER_X+r.WIDTH},Ye.OUT,0,()=>{this._active=!0,X.playVO(this.scene,"CMFT_5.5_148_alt",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.END:this._tortilla.anims.play("fold"),this._tortilla.once("animationcomplete",()=>{this.scene.time.delayedCall(3e3,()=>{this._doEnd(),this.scene.scene.start(c.CUTSCENE_LAUNCH)})},this)}}update(e){super.update(e)}_doVOReminder(){switch(this._state){case Xe.STEP_1:X.playVO(this.scene,"CMFT_5.5_149",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_2:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.5_150",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_3:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_182":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.5_151",()=>{this._voReminder=r.VO_REMINDER_TIMER})});break;case Xe.STEP_4:X.playVO(this.scene,"CMFT_5.1_95",()=>{this._voReminder=r.VO_REMINDER_TIMER});break;case Xe.STEP_5:X.playVO(this.scene,R.isMobile()?"CMFT_7.0_184":"CMFT_7.0_183",()=>{X.playVO(this.scene,"CMFT_5.5_152",()=>{this._voReminder=r.VO_REMINDER_TIMER})})}}onInput(e,t){if(!this._active)return;super.onInput(e,t);const s={x:t.x+R.offsetPos().x,y:t.y+R.offsetPos().y};let i=1;switch(e){case k.DOWN:switch(this._isCollided=!1,this._swipeCoordX=s.x,this._swipeCoordY=s.y,this._checkCollision(s,this._tortilla),this._state){case Xe.STEP_2:this._voReminder=r.VO_REMINDER_TIMER;for(let e of this._tomatoes)s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&e.onInput(k.DOWN,s,()=>{}),i*=e.complete?1:0;1==i&&this._setState(Xe.STEP_3);break;case Xe.STEP_3:this._voReminder=r.VO_REMINDER_TIMER;for(let e of this._onions)s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&e.onInput(k.DOWN,s,()=>{}),i*=e.complete?1:0;1==i&&this._setState(Xe.STEP_4);break;case Xe.STEP_4:this._cup.x=s.x,this._cup.y=s.y,this._voReminder=r.VO_REMINDER_TIMER,s.x>this._tortilla.x-.5*this._tortilla.width&&s.x<this._tortilla.x+.5*this._tortilla.width&&s.y>this._tortilla.y-.5*this._tortilla.height&&s.y<this._tortilla.y+.5*this._tortilla.height&&this._cheese.doSpread(()=>{this._setState(Xe.STEP_5)},!0)}break;case k.MOVE:switch(this._checkCollision(s,this._tortilla),this._state){case Xe.STEP_1:this._spoon.x=s.x,this._spoon.y=s.y,s.x>this._tortilla.x-.5*this._tortilla.width&&s.x<this._tortilla.x+.5*this._tortilla.width&&s.y>this._tortilla.y-.5*this._tortilla.height&&s.y<this._tortilla.y+.5*this._tortilla.height?(this._beans.doSpread(()=>{this._setState(Xe.STEP_2)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_2:for(let e of this._tomatoes){if(s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&!e.complete){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case Xe.STEP_3:for(let e of this._onions){if(s.x>e.x-.5*e.width&&s.x<e.x+.5*e.width&&s.y>e.y-.5*e.height&&s.y<e.y+.5*e.height&&!e.complete){this.scene.events.emit(O.CURSOR_ACTIVATE);break}this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case Xe.STEP_4:this._cup.x=s.x,this._cup.y=s.y,s.x>this._tortilla.x-.5*this._tortilla.width&&s.x<this._tortilla.x+.5*this._tortilla.width&&s.y>this._tortilla.y-.5*this._tortilla.height&&s.y<this._tortilla.y+.5*this._tortilla.height?(this._cheese.doSpread(()=>{this._setState(Xe.STEP_5)}),this._voReminder=r.VO_REMINDER_TIMER,this.scene.events.emit(O.CURSOR_ACTIVATE)):this.scene.events.emit(O.CURSOR_DEACTIVATE);break;case Xe.STEP_5:s.x>this._tortilla.x-.5*this._tortilla.width&&s.x<this._tortilla.x+.5*this._tortilla.width&&s.y>this._tortilla.y-.5*this._tortilla.height&&s.y<this._tortilla.y+.5*this._tortilla.height?this.scene.events.emit(O.CURSOR_ACTIVATE):this.scene.events.emit(O.CURSOR_DEACTIVATE)}break;case k.UP:this._swipeCoordX2=s.x,this._swipeCoordY2=s.y,this._checkCollision(s,this._tortilla);let t=!1;switch(this._swipeCoordX2<this._swipeCoordX-this._swipeMinDistance?(console.log("left"),t=!0):this._swipeCoordX2>this._swipeCoordX+this._swipeMinDistance?(console.log("right"),t=!0):this._swipeCoordY2<this._swipeCoordY-this._swipeMinDistance?(console.log("up"),t=!0):this._swipeCoordY2>this._swipeCoordY+this._swipeMinDistance&&(console.log("down"),t=!0),this._state){case Xe.STEP_5:t&&this._isCollided?this._setState(Xe.END):!t&&this._isCollided&&this._setState(Xe.END)}}}_checkCollision(e,t){e.x>t.x-.5*t.width&&e.x<t.x+.5*t.width&&e.y>t.y-.5*t.height&&e.y<t.y+.5*t.height&&(this._isCollided=!0)}}class Rt extends a.a.Scene{constructor({key:e,active:t=!1}){super({key:e,active:t}),this.key=e,this.app,this.scaleManager,this.captions}cursorActivate(){this.cursor.setTexture("bootstrap","starcursor_rolloverstate_final")}cursorDeactivate(){this.cursor.setTexture("bootstrap","starcursor_default")}create(){this.captions.stopCaption(),this.input.on("pointermove",this.onPointerMove,this),this.events.addListener("shutdown",this.shutdown,this),this.events.addListener(O.ON_RESIZE,this._onResize,this),r.IS_SESAME?(this.game.events.addListener(a.a.Core.Events.BLUR,this._onBlur,this),this.game.events.addListener(a.a.Core.Events.FOCUS,this._onFocus,this)):(this.game.events.addListener(O.ON_SR_PAUSE,this._onBlur,this),this.game.events.addListener(O.ON_SR_RESUME,this._onFocus,this)),this.input.keyboard.on("keydown",this._onKeyDown,this),this.events.on(O.CURSOR_ACTIVATE,this.cursorActivate,this),this.events.on(O.CURSOR_DEACTIVATE,this.cursorDeactivate,this),this.cameraPositioner=new ie(this.cameras.main),this.scaleManager.addEntity(this.cameraPositioner),this.input.setDefaultCursor("none"),this.cursor=this.addElement(new ne(this,{alpha:R.isMobile()?0:1,x:9999,y:r.CENTER_Y,asset:"starcursor_default",pack:"bootstrap"}),I.UI),this._reminderTime=r.VO_REMINDER_TIMER,this._inactiveState=!1,this._timeStamp=0,this._startTime=Date.now(),this._sendAnaly=!0}_onKeyDown(e){e.preventDefault()}onPointerMove(e){this.cursor.x=e.x+R.offsetPos().x,this.cursor.y=e.y+R.offsetPos().y,this._checkAnalytic()}_checkAnalytic(){this._inactiveState&&this._sendAnaly&&(this._inactiveState=!1,te.dataLayerTracking({event:"gameTOReEngage",duration:Math.round((Date.now()-this._timeStamp)/1e3)}))}shutdown(){this.input.off("pointermove",this.onPointerMove,this),this.events.off(O.CURSOR_ACTIVATE,this.cursorActivate,this),this.events.off(O.CURSOR_DEACTIVATE,this.cursorDeactivate,this),this.events.removeListener("shutdown",this.shutdown,this),this.events.removeListener(O.ON_RESIZE,this._onResize,this),r.IS_SESAME?(this.game.events.removeListener(a.a.Core.Events.BLUR,this._onBlur,this),this.game.events.removeListener(a.a.Core.Events.FOCUS,this._onFocus,this)):(this.game.events.removeListener(O.ON_SR_PAUSE,this._onBlur,this),this.game.events.removeListener(O.ON_SR_RESUME,this._onFocus,this)),this.input.keyboard.off("keydown",this._onKeyDown),this.scaleManager.removeEntity(this.cameraPositioner)}_onResize(e){}_onFocus(e){R.getIsPaused()&&(console.log("base _onFocus"),R.setIsPaused(!1),X.onFocus(),this.scene.resume())}_onBlur(e){R.getIsPaused()||(console.log("base _onBlur"),X.onBlur(),R.setIsPaused(!0),this.scene.pause())}addElement(e,t=I.BG){return this.add.element(e),e.setDepth(t),e}update(e,t){if(R.getIsPaused())return;const s=t/1e3;this._reminderTime>0&&(this._reminderTime-=s,this._reminderTime<=0&&(this._sendAnaly&&(this._inactiveState=!0,this._timeStamp=Date.now(),te.dataLayerTracking({event:"gameTimeoutPlay"})),this.reminderTime=0,this._doRemind()))}_doRemind(){this._reminderTime=r.VO_REMINDER_TIMER}tween(e,t,s,i,a=0,_=null){this.tweens.add({targets:e,x:null!=s.x?s.x:e.x,y:null!=s.y?s.y:e.y,alpha:null!=s.alpha?s.alpha:e.alpha,duration:1e3*t,ease:this._getEase(i),delay:1e3*a,onComplete:()=>{null!=_&&_()}})}_getEase(e){switch(e){case Ye.LINEAR:return a.a.Math.Easing.Linear;case Ye.IN:return a.a.Math.Easing.Quadratic.In;case Ye.OUT:return a.a.Math.Easing.Quadratic.Out;case Ye.BOUNCE_IN:return a.a.Math.Easing.Bounce.In;case Ye.BOUNCE_OUT:return a.a.Math.Easing.Bounce.Out}}}const Nt=.5;let Ot=null;function It(){const e=window.innerWidth,t=window.innerHeight,s=Math.min(e/r.SAFE_WIDTH,t/r.SAFE_HEIGHT),i=Math.max(0,Math.min(r.WIDTH*s,e)),a=Math.max(0,Math.min(r.HEIGHT*s,t)),_={x:r.WIDTH/i*s,y:r.HEIGHT/a*s};Ot=function(e){const t=r.WIDTH/r.SAFE_WIDTH,s=r.HEIGHT/r.SAFE_HEIGHT;let i=(e.x-1)/(t-1),a=(e.y-1)/(s-1);i=Number.isFinite(i)?i:0,a=Number.isFinite(a)?a:0;const _=(r.WIDTH-r.SAFE_WIDTH)*i*.5,n=(r.HEIGHT-r.SAFE_HEIGHT)*a*.5;return{x:_,y:n}}(_)}const kt=Object.freeze({STATE_IN:0,IDLE:1,STATE_OUT:2}),wt=.5;let St=null;function At(){const e=window.innerWidth,t=window.innerHeight,s=Math.min(e/r.SAFE_WIDTH,t/r.SAFE_HEIGHT),i=Math.max(0,Math.min(r.WIDTH*s,e)),a=Math.max(0,Math.min(r.HEIGHT*s,t)),_={x:r.WIDTH/i*s,y:r.HEIGHT/a*s};St=function(e){const t=r.WIDTH/r.SAFE_WIDTH,s=r.HEIGHT/r.SAFE_HEIGHT;let i=(e.x-1)/(t-1),a=(e.y-1)/(s-1);i=Number.isFinite(i)?i:0,a=Number.isFinite(a)?a:0;const _=(r.WIDTH-r.SAFE_WIDTH)*i*.5,n=(r.HEIGHT-r.SAFE_HEIGHT)*a*.5;return{x:_,y:n}}(_)}const xt=Object.freeze({INTRO:0,LAUNCH:1,END:2});class Pt extends pe{constructor(e){super(e)}_getIng(){return"BlueBerries"}_collectBG(){return"ingredient_collection_berries_bg"}_createObjects(){this._addObject(-328,75),this._addObject(-239,-62),this._addObject(-152,96),this._addObject(-105,-31),this._addObject(-40,102),this._addObject(110,-103),this._addObject(113,103),this._addObject(169,-14),this._addObject(177,74),this._addObject(252,-87)}_getAssetData(){return{asset:"berry",pack:"ic_berries",rotationMin:-45,rotationMax:45}}_getSpawnAssetData(){return{asset:"basket_berry",pack:"ic_berries"}}}const Ft=Object.freeze({INTRO:0,PLAY:1,END:2});s(1747);new Phaser.Game({audio:{noAudio:!0},type:Phaser.AUTO,width:r.WIDTH,height:r.HEIGHT,backgroundColor:"#000000",parent:"gameContent",plugins:{global:[{key:l.CAPTIONS,plugin:class extends Phaser.Plugins.BasePlugin{constructor(e){super(e);const t=document.getElementById("captions");this.captionPlayer=new _.c({},new _.e(t)),this.isMuted=!r.DEBUG_CAPTION}start(){this.game.events.on("step",this.update,this)}stop(){this.game.events.off("step",this.update,this),this.stopCaption()}setData(e){this.captionPlayer.captions=_.b.createCaptionMap(e)}setMute(e){1==e&&this.captionPlayer.stop(),this.isMuted=e}playCaption(e,t=0,s={}){this.isMuted||this.captionPlayer.start(e,t,s)}stopCaption(){this.captionPlayer.stop()}update(e,t){R.getIsPaused()||this.captionPlayer.update(t/1e3)}},start:!0,mapping:"captions"},{key:l.APPLICATION,plugin:class extends _.a{constructor(e){super({features:{captions:!0,vo:!0,music:!0,sfx:!0}}),this.pluginManager=e,this.game=e.game,_.a.uses(new n.a),te.setGoogleAnalytics(this.getPlugin("GoogleAnalytics"))}init(){this.captionsPlugin=this.pluginManager.get(l.CAPTIONS),this.state.ready.subscribe(()=>{console.log("ready"),this.game.scene.start(r.INITIAL_SCENE)}),this.state.pause.subscribe(e=>{console.log("current",e),e?(console.log("ON_SR_PAUSE"),this.game.events.emit(O.ON_SR_PAUSE)):(console.log("ON_SR_RESUME"),this.game.events.emit(O.ON_SR_RESUME))}),this.state.soundVolume.subscribe(()=>{}),this.state.musicVolume.subscribe(e=>{X.setMusicVol(e)}),this.state.voVolume.subscribe(e=>{X.setVOVol(e)}),this.state.sfxVolume.subscribe(e=>{X.setSFXVol(e)}),this.state.captionsMuted.subscribe(e=>{this.captionsPlugin.setMute(e)})}start(){}stop(){}destroy(){this.pluginManager=null,this.game=null}},start:!0,mapping:"app"},{key:l.FACTORY,plugin:class extends a.a.Plugins.BasePlugin{constructor(e){super(e),this.pluginManager.registerGameObject("element",this.element)}element(e,t){return this.displayList.add(e),this.updateList.add(e),e}},start:!0},{key:l.SCALE_MANAGER,plugin:class extends a.a.Plugins.BasePlugin{constructor(e){super(e),this.onResize=this.onResize.bind(this),this.gameContainer=document.getElementById("gameContent")}init({width:e,height:t,safeWidth:s,safeHeight:i}){this.scaleManager=new _.g({width:e,height:t,safeWidth:s,safeHeight:i})}start(){this.scaleManager.enable(this.onResize)}stop(){this.scaleManager.disable()}onResize({width:e,height:t,scale:s}){const i=this.game;setTimeout(function(){i.scale.resize(r.WIDTH/s.x,r.HEIGHT/s.y),i.canvas.style.width=`${e}px`,i.canvas.style.height=`${t}px`,i.canvas.style.position="absolute",i.canvas.style.left="50%",i.canvas.style.top="50%",i.canvas.style.transform="translate(-50%, -50%)"},100,this);const{x:a,y:_}=this.scaleManager.calcOffset(s);R.offsetPos().x=a,R.offsetPos().y=_}addEntity(e){this.scaleManager.addEntity(e)}removeEntity(e){this.scaleManager.removeEntity(e)}forceRecheck(){window.dispatchEvent(new Event("resize"))}},start:!0,mapping:"scaleManager",data:{width:r.WIDTH,height:r.HEIGHT,safeWidth:r.SAFE_WIDTH,safeHeight:r.SAFE_HEIGHT}}],scene:[{key:"SpinePlugin",plugin:window.SpinePlugin,mapping:"spine"}]},scene:[class extends Rt{constructor(){super({key:c.BOOT})}preload(){console.log(c.BOOT),R.setValue(N.ENUM_CURRENT_SCREEN,c.BOOT),this.load.image("loading_bg","./assets/bootstrap/loading_bg.jpg"),this.load.multiatlas("bootstrap","./assets/bootstrap/bootstrap.json","./assets/bootstrap/")}create(){this.scene.start(c.PRELOAD)}},class extends Rt{constructor(){super({key:c.PRELOAD}),this.localizer=new _.f(p),this._count=0}_doResize(){setTimeout(()=>{void 0!=this.cameras.main&&null!=this.cameras.main?(It(),this.cameras.main.setViewport(-Ot.x,-Ot.y,r.WIDTH,r.HEIGHT)):(this._count++,this._count<3&&this._doResize())},100,this)}preload(){R.setValue(N.ENUM_CURRENT_SCREEN,c.PRELOAD),this._count=0,this.cameras.main.width,this.cameras.main.height,this.add.image(r.CENTER_X,r.CENTER_Y,"loading_bg"),It(),this.cameras.main.setViewport(-Ot.x,-Ot.y,r.WIDTH,r.HEIGHT),this._doResize();let e=this.add.image(r.CENTER_X+-10,r.CENTER_Y,"bootstrap",this.localizer.primaryLanguage==E.ENGLISH?"splash_loading":"splash_loading_espanol");e.tint=16708569,this.dots=[],this.dots.push(this.addElement(new ne(this,{alpha:0,tint:16708569,x:r.CENTER_X+-10+.5*e.width+10,y:r.CENTER_Y+6,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dots.push(this.addElement(new ne(this,{alpha:0,tint:16708569,x:r.CENTER_X+-10+.5*e.width+10+20,y:r.CENTER_Y+6,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dots.push(this.addElement(new ne(this,{alpha:0,tint:16708569,x:r.CENTER_X+-10+.5*e.width+10+40,y:r.CENTER_Y+6,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dotIndex=0,this.lastTime=0,this.load.on("progress",e=>{if(100*e-this.lastTime>=10)if(this.lastTime=100*e,this.dotIndex==this.dots.length){for(let e of this.dots)e.alpha=0;this.dotIndex=0}else this.dots[this.dotIndex].alpha=1,this.dotIndex++}),this.load.on("fileprogress",e=>{_.d.log("info",`${e.type} ${e.key}`)}),this.load.on("complete",()=>{this.onLoadComplete()});const t=this.localizer.resolve("captions.json");this.load.json("captions",t.path),console.log("captionsResult ",t),this.app.container.send("localizerResolve",t);const s=this.localizer.resolve("strings.json");this.load.json("strings",s.path),console.log("stringsResult ",s),this.app.container.send("localizerResolve",s),K.load(this,w.PRELOAD),K.load(this,w.CUTSCENE_INTRO),K.load(this,w.CUTSCENE_MISING_ING)}onLoadComplete(){this._timeDelay=Nt;const e=this.cache.json.get("captions");this.captions.setData(e),console.log("captionData ",e),console.log("AssetManager.totalAudio ",K.totalAudio()),K.totalAudio()>0?this._tryAgain():this.scene.start(c.TITLE)}_tryAgain(){this.time.delayedCall(500,()=>{console.log("AssetManager.totalAudio _tryAgain",K.totalAudio()),K.totalAudio()>0?this._tryAgain():this.scene.start(c.TITLE)})}update(e,t){const s=t/1e3;if(this._timeDelay>0&&(this._timeDelay-=s,this._timeDelay<=0))if(this._timeDelay=Nt,this.dotIndex==this.dots.length){for(let e of this.dots)e.alpha=0;this.dotIndex=0}else this.dots[this.dotIndex].alpha=1,this.dotIndex++}},class extends Rt{constructor(){super({key:c.TRANSITION}),this.localizer=new _.f(p),this._count=0}_doResize(){setTimeout(()=>{void 0!=this.cameras.main&&null!=this.cameras.main?(At(),this.cameras.main.setViewport(-St.x,-St.y,r.WIDTH,r.HEIGHT)):(this._count++,this._count<3&&this._doResize())},100,this)}preload(){switch(console.log(c.TRANSITION),R.setValue(N.ENUM_CURRENT_SCREEN,c.TRANSITION),this._count=0,this.cameras.main.width,this.cameras.main.height,this.add.image(r.CENTER_X,r.CENTER_Y,"loading_bg"),At(),this.cameras.main.setViewport(-St.x,-St.y,r.WIDTH,r.HEIGHT),this._doResize(),this.add.image(r.CENTER_X,r.CENTER_Y,"loading_bg"),this._onBlurBind=this._onBlur.bind(this),this._onFocusBind=this._onFocus.bind(this),window.addEventListener("blur",this._onBlurBind),window.addEventListener("focus",this._onFocusBind),this.loaderSpine=new de(this,this.spine,{x:r.CENTER_X,y:r.CENTER_Y,key:"loading_transition",scale:.5},I.BG),this.loaderSpine.on("complete",this.onAnimationComplete),this.loaderSpine.alpha=0,this._selection=a.a.Math.FloatBetween(0,1)>.5?"":"_alt",this._setTransitionState(kt.STATE_IN),this.loadText=this.add.image(r.CENTER_X+-14,r.CENTER_Y+308,"bootstrap",this.localizer.primaryLanguage==E.ENGLISH?"splash_loading":"splash_loading_espanol"),this.loadText.tint=16708569,this.loadText.setScale(.7),this.dots=[],this.dots.push(this.addElement(new ne(this,{scale:.7,alpha:0,tint:16708569,x:r.CENTER_X+-14+.5*this.loadText.width*.7+7,y:r.CENTER_Y+314,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dots.push(this.addElement(new ne(this,{scale:.7,alpha:0,tint:16708569,x:r.CENTER_X+-14+.5*this.loadText.width*.7+7+14,y:r.CENTER_Y+314,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dots.push(this.addElement(new ne(this,{scale:.7,alpha:0,tint:16708569,x:r.CENTER_X+-14+.5*this.loadText.width*.7+7+28,y:r.CENTER_Y+314,asset:"splash_loading_dot",pack:"bootstrap"}),I.BG)),this.dotIndex=0,this.DELAY=.5,this.timeDelay=this.DELAY,this.lastTime=0,this.load.on("progress",e=>{if(100*e-this.lastTime>=10)if(this.lastTime=100*e,this.dotIndex==this.dots.length){for(let e of this.dots)e.alpha=0;this.dotIndex=0}else this.dots[this.dotIndex].alpha=1,this.dotIndex++}),this.load.on("fileprogress",e=>{_.d.log("info",`${e.type} ${e.key}`)}),this.load.on("complete",()=>{this.onLoadComplete()}),R.getValue(N.ENUM_TRANSITION_TO)){case c.WORLD_DRIVING:K.load(this,w.DRIVING),K.load(this,w.CUTSCENE_ING_EXPL);let e=a.a.Math.FloatBetween(0,1)>.5?"gonger":"cookie";X.playVO(this,"gonger"==e?"CMFT_2.1_23":"CMFT_2.1_24",()=>{X.playVO(this,this.getLocationVO(e),()=>{this._setTransitionState(kt.IDLE)},1,0,!1,!1)},1,0,!1,!1);break;case c.WORLD_COLLECTION:K.load(this,w.ING_COL_CINNAMON),K.load(this,w.ING_COL_FARM),K.load(this,w.ING_COL_EGG),K.load(this,w.ING_COL_HONEY),K.load(this,w.ING_COL_FACTORY),K.load(this,w.ING_COL_VO);break;case c.WORLD_ASSEMBLY:switch(R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:K.load(this,w.BUILD_RECIPE_APPLEPIE);break;case h.TACOS:K.load(this,w.BUILD_RECIPE_TACOS);break;case h.OATMEAL:K.load(this,w.BUILD_RECIPE_OATMEAL);break;case h.PIZZA:K.load(this,w.BUILD_RECIPE_PIZZA);break;case h.SANDWICH:K.load(this,w.BUILD_RECIPE_SANDWICH);break;case h.CORNBREAD:K.load(this,w.BUILD_RECIPE_CORNBREAD)}K.load(this,w.CUTSCENE_OUTRO);break;case c.DEBUG:K.load(this,w.DRIVING),K.load(this,w.CUTSCENE_ING_EXPL),K.load(this,w.ING_COL_FACTORY),K.load(this,w.ING_COL_VO),K.load(this,w.ING_COL_CINNAMON),K.load(this,w.ING_COL_FARM),K.load(this,w.ING_COL_HONEY),K.load(this,w.ING_COL_EGG)}}getLocationVO(e){let t="gonger"==e?"CMFT_7.0_270":"CMFT_7.0_241";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:t="gonger"==e?"CMFT_7.0_270":"CMFT_7.0_241";break;case o.CINNAMON:t="gonger"==e?"CMFT_7.0_268":"CMFT_7.0_239";break;case o.PINEAPPLE:t="gonger"==e?"CMFT_7.0_269":"CMFT_7.0_240";break;case o.CORN:t="gonger"==e?"CMFT_7.0_271":"CMFT_7.0_242";break;case o.PEANUTS:t="gonger"==e?"CMFT_7.0_274":"CMFT_7.0_245";break;case o.TOMATO_SAUCE:t="gonger"==e?"CMFT_7.0_275":"CMFT_7.0_246";break;case o.WHEAT:t="gonger"==e?"CMFT_7.0_273_alt":"CMFT_7.0_244";break;case o.OATS:t="gonger"==e?"CMFT_7.0_272":"CMFT_7.0_243";break;case o.APPLES:t="gonger"==e?"CMFT_7.0_267_alt":"CMFT_7.0_238";break;case o.BERRIES:t="gonger"==e?"CMFT_7.0_264":"CMFT_7.0_235";break;case o.RAW_CORN:case o.EGGS:t="gonger"==e?"CMFT_7.0_263":"CMFT_7.0_234";break;case o.HONEY:t="gonger"==e?"CMFT_7.0_266":"CMFT_7.0_237";break;case o.MUSHROOM:t="gonger"==e?"CMFT_7.0_265":"CMFT_7.0_236";break;case o.ONIONS:case o.TOMATOES:t="gonger"==e?"CMFT_7.0_263":"CMFT_7.0_234"}return t}_setTransitionState(e){switch(this._state=e,this._state){case kt.STATE_IN:X.playAudio(this,"transition_sfx",null,R.getValue(N.ENUM_TRANSITION_TO)==c.WORLD_DRIVING?.3:.7),this.loaderSpine.alpha=1,this.loaderSpine.setAnimation(0,"loading_in"+this._selection,!1);break;case kt.IDLE:this.loaderSpine.setAnimation(0,"idle",!0);break;case kt.STATE_OUT:this.loaderSpine.setAnimation(0,"loading_out"+this._selection,!1)}}onAnimationComplete(e){const t=this.scene;switch(t._state){case kt.STATE_IN:switch(R.getValue(N.ENUM_TRANSITION_TO)){case c.WORLD_DRIVING:break;default:t._setTransitionState(kt.IDLE)}break;case kt.IDLE:R.getValue(N.ENUM_TRANSITION_TO)==c.RECIPE_SELECT&&t.onLoadComplete();break;case kt.STATE_OUT:t.loadText.destroy();for(let e of t.dots)e.destroy();t.loaderSpine.destroy(),window.removeEventListener("blur",t._onBlurBind),window.removeEventListener("focus",t._onFocusBind),t.scene.start(R.getValue(N.ENUM_TRANSITION_TO))}}onLoadComplete(){console.log("onLoadComplete"),this._timeDelay=wt,this._state!=kt.IDLE||K.totalAudio()>0?this._tryAgain():this._setTransitionState(kt.STATE_OUT)}_tryAgain(){this.time.delayedCall(500,()=>{this._state!=kt.IDLE||K.totalAudio()>0?this._tryAgain():this._setTransitionState(kt.STATE_OUT)})}update(e,t){const s=t/1e3;if(this._timeDelay>0&&(this._timeDelay-=s,this._timeDelay<=0))if(this._timeDelay=wt,this.dotIndex==this.dots.length){for(let e of this.dots)e.alpha=0;this.dotIndex=0}else this.dots[this.dotIndex].alpha=1,this.dotIndex++}},class extends Rt{constructor(){super({key:c.TITLE}),console.log("farhan TITLE")}preload(){}create(){console.log(c.TITLE),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.TITLE),R.setValue(N.ENUM_RECIPE,h.NONE),R.setValue(N.ENUM_INGREDIENT,o.NONE),R.setValue(N.BOOL_FIRST_PLAY,!0),R.setValue(N.BOOL_PLAYTHROUGH_COMPLETE,!1),this.cameras.main.width,this.cameras.main.height,this.add.image(r.CENTER_X,r.CENTER_Y,"splash").setDepth(I.BG),X.playMusic(this,"driving_music",r.MUSIC_VOL),this.playButton=this.addElement(new ce(this,{alpha:0,scale:.1,x:r.CENTER_X+189,y:r.CENTER_Y+232,assetUp:"btn_play",assetOver:"btn_play_highlight",pack:"preload"},this._onStartDown,null,!0,!1),I.BG),this._reminderTime=0,X.playVO(this,"CMFT_1.0_1",()=>{this.time.delayedCall(1100,()=>{this.playButton.doBounce()},[],this),X.playVO(this,"CMFT_1.0_2",()=>{this._reminderTime=r.VO_REMINDER_TIMER})},1,0,!1,!0,{key_id:""}),this.playButton.doBounceIn(),this.scaleManager.forceRecheck(),this.input.on("pointerdown",this._onPointerDown,this),this.events.emit(O.CURSOR_ACTIVATE),this._sendAnaly=!1}_onPointerDown(e){const t=e.x+R.offsetPos().x,s=e.y+R.offsetPos().y;console.log("_onPointerDown"),t>=this.playButton.x-.5*this.playButton.width&&t<=this.playButton.x+.5*this.playButton.width&&s>=this.playButton.y-.5*this.playButton.height&&s<=this.playButton.y+.5*this.playButton.height||(te.dataLayerTracking({event:"gamePlay",buttonName:"NotPlayButton"}),this.scene.start(c.CUTSCENE_INTRO))}_onStartDown(){console.log("_onStartDown"),te.dataLayerTracking({event:"gamePlay",buttonName:"PlayButton"}),this.scene.scene.start(c.CUTSCENE_INTRO)}shutdown(){X.stopAllVOs(),this.scaleManager.removeEntity(this.textAnchor),this.input.off("pointerdown",this._onPointerDown,this),super.shutdown()}update(e,t){super.update(e,t)}_doRemind(){this.playButton.doBounce(),this._reminderTime=r.VO_REMINDER_TIMER}},class extends Rt{constructor(){super({key:c.CUTSCENE_INTRO})}preload(){}create(){console.log(c.CUTSCENE_INTRO),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.CUTSCENE_INTRO),this.add.image(r.CENTER_X,r.CENTER_Y,"cutscene_bg").setDepth(I.BG);let e=this.add.image(r.CENTER_X,r.CENTER_Y+.5*r.HEIGHT,"intro_countertop");e.setDepth(I.FG),e.setOrigin(.5,1),this.gonger=this.add.spine(r.CENTER_X,r.CENTER_Y+175,"Gonger","intro",!1),this.gonger.setScale(.4),this.gonger.on("event",this.handleEvent),this.cookie=this.add.spine(r.CENTER_X,r.CENTER_Y+175,"Cookie","intro",!1),this.cookie.setScale(.4),X.playMusic(this,"main_theme",r.MUSIC_VOL),X.playVO(this,"CMFT_1.1_3"),this.skipButton=this.addElement(new ce(this,{alpha:0,scale:.1,x:r.CENTER_X+.5*r.SAFE_WIDTH-100,y:r.CENTER_Y,assetUp:"btn_skip",assetOver:"btn_skip_highlight",pack:"preload"},()=>{let e=Math.round((Date.now()-this._startTime)/1e3);te.dataLayerTracking({event:"gameSkip",duration:e}),this.onPointerDown()},null,!1,!1),I.BG),this.skipButton.doBounceIn(),this.scaleManager.forceRecheck()}_onResize(e){null!=this.skipButton&&(this.skipButton.x=r.CENTER_X+.5*e.width-100)}handleEvent(e,t){const s=this.scene;switch(t.data.name){case"CMFT_1.1_4":X.playVO(s,"CMFT_1.1_4");break;case"CMFT_1.1_6":X.playVO(s,"CMFT_1.1_5"),X.playVO(s,"CMFT_1.1_6",null,1,0,!1,!1);break;case"CMFT_1.1_7":X.playVO(s,"CMFT_1.1_7",null,1,0,!1,!1);break;case"CMFT_1.1_8":X.playVO(s,"CMFT_1.1_8",()=>{s.onPointerDown()})}}onAnimationComplete(e){}onPointerDown(){X.stopAllVOs(),this.scene.start(c.RECIPE_SELECT)}shutdown(){this.skipButton=null,this.gonger.off("event",this.handleEvent),this.gonger=null,this.cookie=null,this.scaleManager.removeEntity(this.textAnchor),super.shutdown()}update(e,t){}},class extends Rt{constructor(){super({key:c.RECIPE_SELECT})}preload(){}create(){console.log(c.RECIPE_SELECT),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.RECIPE_SELECT),this.bg=this.add.image(r.CENTER_X,r.CENTER_Y,"recipe_selection_bg"),this.bg.setDepth(I.BG),this._buttons=[],this.addRecipeButton(-330,-150,h.SANDWICH),this.addRecipeButton(0,-150,h.TACOS),this.addRecipeButton(330,-150,h.OATMEAL),this.addRecipeButton(-330,150,h.PIZZA),this.addRecipeButton(0,150,h.APPLEPIE),this.addRecipeButton(330,150,h.CORNBREAD),this.active=!0,this._reminderTime=0;let e=a.a.Math.FloatBetween(0,1)>.5?"CMFT_2.0_9":"CMFT_2.0_10";R.getValue(N.BOOL_FIRST_PLAY)||(e=a.a.Math.FloatBetween(0,1)>.5?"CMFT_2.0_11":"CMFT_2.0_12"),X.playMusic(this,"main_theme",r.MUSIC_VOL),X.playVO(this,e,()=>{this._doVOInst()},1,.5)}addRecipeButton(e,t,s){let i=this.addElement(new Ue(this,{alpha:1,scale:1,x:r.CENTER_X+e,y:r.CENTER_Y+t,assetUp:this.getAsset(s),assetOver:this.getAsset(s)+"_highlight",pack:"preload"},this.onRecipeBtnDown,this.onRecipeBtnOver),I.BG);i.setData("recipeID",s),i.onInitDown=this._onInitDown,this._buttons.push(i)}getAsset(e){let t="recipe_pie";switch(e){case h.APPLEPIE:t="recipe_pie";break;case h.TACOS:t="recipe_taco";break;case h.OATMEAL:t="recipe_oatmeal";break;case h.PIZZA:t="recipe_pizza";break;case h.SANDWICH:t="recipe_sandwich";break;case h.CORNBREAD:t="recipe_cornbread"}return t}_onInitDown(){this.scene._buttons.forEach(function(e){e.active=!1})}onRecipeBtnDown(){if(console.log("this.scene.active ",this.scene.active),!this.scene.active)return;this.scene.active=!1;let e="",t="";switch(this.getData("recipeID")){case h.APPLEPIE:e="Apple Pie",t="Abby Cadabby";break;case h.TACOS:e="Tacos",t="Rosita";break;case h.OATMEAL:e="Oatmeal",t="Bert";break;case h.PIZZA:e="Pizza",t="Oscar";break;case h.SANDWICH:e="Peanut Butter, Banana & Honey Sandwich",t="Elmo";break;case h.CORNBREAD:e="Corn Bread",t="Big Bird"}R.setValue(N.ENUM_CURRENT_ROUND,e),R.getRoundData()[0].roundNumber+=1,R.getRoundData()[0].startTime=Date.now(),te.dataLayerTracking({event:"gameMenuClick",buttonName:e}),te.dataLayerTracking({event:"gameRoundStart",roundName:e,roundNumber:R.getRoundData()[0].roundNumber}),this.setTexture(this.pack,this.assetOver),R.setValue(N.ENUM_RECIPE,this.getData("recipeID")),R.isMobile()?(this.scene._reminderTime=0,X.playVO(this.scene,this.scene.getVORecipe(this.getData("recipeID")),()=>{this.scene._doExit(this.scene)})):this.scene._doExit(this.scene)}_doExit(e){let t="CMFT_2.0_14";switch(a.a.Math.Between(0,2)){case 0:t="CMFT_2.0_14";break;case 1:t="CMFT_2.0_15";break;case 2:t="CMFT_2.0_16"}X.playVO(e,t,()=>{e.scene.start(c.CUTSCENE_MISSING_ING)})}getVORecipe(e){let t="CMFT_7.0_193";switch(e){case h.APPLEPIE:t="CMFT_7.0_193";break;case h.TACOS:t="CMFT_7.0_190";break;case h.OATMEAL:t="CMFT_7.0_192";break;case h.PIZZA:t="CMFT_7.0_195_alt";break;case h.SANDWICH:t="CMFT_7.0_194";break;case h.CORNBREAD:t="CMFT_7.0_191"}return t}onRecipeBtnOver(){this.scene.active&&(console.log("this.scene.active ",this.scene.active),R.isMobile()||(this.scene._reminderTime=0,X.playVO(this.scene,this.scene.getVORecipe(this.getData("recipeID")),()=>{this.scene._reminderTime=r.VO_REMINDER_TIMER})))}shutdown(){this.skipButton=null,this.scaleManager.removeEntity(this.textAnchor),super.shutdown()}update(e,t){super.update(e,t)}_doRemind(){this._reminderTime=0,this._doVOInst()}_doVOInst(){let e=R.isMobile()?"CMFT_2.0_17":"CMFT_2.0_18";X.playVO(this,e,()=>{this._reminderTime=r.VO_REMINDER_TIMER}),this.time.delayedCall(1500,()=>{this._buttons.forEach(function(e){e.doBounce(1.1)},this)},[],this)}},class extends Rt{constructor(){super({key:c.CUTSCENE_MISSING_ING})}preload(){}create(){console.log(c.CUTSCENE_MISSING_ING),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.CUTSCENE_MISSING_ING);let e=this.add.image(r.CENTER_X,r.CENTER_Y,"ingredient_list_bg");e.setScale(1.25),e.setDepth(I.BG);let t=o.NONE,s=R.getValue(N.ENUM_RECIPE);if(0==R.getMissingList()[s-1].length){let e=a.a.Math.Between(0,2);t=R.getRecipeIngList()[s-1][e]}else{let e=a.a.Math.Between(0,R.getMissingList()[s-1].length-1),i=R.getMissingList()[s-1][e];R.getMissingList()[s-1].splice(e,1),t=R.getRecipeIngList()[s-1][i]}switch(R.setValue(N.ENUM_INGREDIENT,t),this._ings=[],this._ingMissing=null,this._glows=[],this._glowMissing=null,s){case h.APPLEPIE:this.addIng(.75,-185,-60,o.WHEAT,"",t),this.addIng(.75,-65,-46,null,"ingredient_list_water",t),this.addIng(.75,65,-36,null,"ingredient_list_butter",t),this.addIng(.75,185,-52,null,"ingredient_list_salt",t),this.addIng(.75,-110,68,o.APPLES,"",t),this.addIng(.75,0,56,null,"ingredient_list_sugar",t),this.addIng(.75,110,66,o.CINNAMON,"",t);break;case h.TACOS:this.addIng(.75,-150,-54,o.CORN,"",t),this.addIng(.75,0,-54,null,"ingredient_list_beans",t),this.addIng(.75,145,-50,o.TOMATOES,"",t),this.addIng(.75,-62,64,o.ONIONS,"",t),this.addIng(.75,75,64,null,"ingredient_list_cheese",t);break;case h.OATMEAL:this.addIng(.75,-150,-54,o.OATS,"",t),this.addIng(.75,8,-50,null,"ingredient_list_water",t),this.addIng(.75,145,-48,o.BERRIES,"",t),this.addIng(.75,-60,64,null,"ingredient_list_honey",t),this.addIng(.75,75,64,o.CINNAMON,"",t);break;case h.PIZZA:this.addIng(.75,-160,-65,null,"ingredient_list_dough",t),this.addIng(.75,0,-65,o.TOMATO_SAUCE,"",t),this.addIng(.75,160,-58,null,"ingredient_list_cheese_white",t),this.addIng(.75,-75,50,o.PINEAPPLE,"",t),this.addIng(.75,75,74,o.MUSHROOM,"",t);break;case h.SANDWICH:this.addIng(1,-190,-10,null,"ingredient_list_bread",t),this.addIng(1,-55,-10,o.PEANUTS,"",t),this.addIng(1,75,-10,o.BANANA,"",t),this.addIng(1,185,-10,o.HONEY,"",t);break;case h.CORNBREAD:this.addIng(.75,-185,-60,o.WHEAT,"",t),this.addIng(.75,-65,-60,o.RAW_CORN,"",t),this.addIng(.75,65,-72,o.EGGS,"",t),this.addIng(.75,185,-70,null,"ingredient_list_sugar",t),this.addIng(.75,-185,65,null,"ingredient_list_salt",t),this.addIng(.75,-60,65,null,"ingredient_list_bakingpowder",t),this.addIng(.75,65,58,null,"ingredient_list_milk",t),this.addIng(.75,185,58,null,"ingredient_list_oil",t)}this.charSelect="gonger",this.start()}start(){this.time.delayedCall(500,()=>{X.playVO(this,"CMFT_2.1_19",()=>{X.playVO(this,this.getRecipeVO(),()=>{this.charSelect=a.a.Math.FloatBetween(0,1)>.5?"gonger":"cookie",X.playVO(this,"gonger"==this.charSelect?"CMFT_2.1_21":"CMFT_2.1_20",()=>{X.playVO(this,this.getMissingIngVO(),()=>{X.playVO(this,"CMFT_2.1_22",()=>{this.time.delayedCall(100,()=>{R.setValue(N.ENUM_TRANSITION_TO,c.WORLD_DRIVING),this.scene.start(c.TRANSITION)})})})})})})},[],this)}getRecipeVO(){let e="CMFT_7.0_199",t=1.7,s=0;switch(R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:e="CMFT_7.0_199";for(let e=0;e<this._ings.length;e++)this.bounceElement(this._ings[e],e*t),this.glowElement(this._glows[e],e*t);break;case h.TACOS:t=1.8,e="CMFT_7.0_201";for(let e=0;e<this._ings.length;e++)s=0,e==this._ings.length-1&&(s=.5),this.bounceElement(this._ings[e],e*t+s),this.glowElement(this._glows[e],e*t+s);break;case h.OATMEAL:e="CMFT_7.0_200";for(let e=0;e<this._ings.length;e++)s=0,e==this._ings.length-1&&(s=.5),this.bounceElement(this._ings[e],e*t+s),this.glowElement(this._glows[e],e*t+s);break;case h.PIZZA:e="CMFT_7.0_197";for(let e=0;e<this._ings.length;e++)s=0,e>1&&(t+=.2),this.bounceElement(this._ings[e],e*t+s),this.glowElement(this._glows[e],e*t+s);break;case h.SANDWICH:e="CMFT_7.0_196";for(let e=0;e<this._ings.length;e++)s=0,e==this._ings.length-1&&(s=1),this.bounceElement(this._ings[e],e*t+s),this.glowElement(this._glows[e],e*t+s);break;case h.CORNBREAD:t=1.6,e="CMFT_7.0_198";for(let e=0;e<this._ings.length;e++)s=0,e>1&&(s=-.5),e==this._ings.length-1&&(s=.2),this.bounceElement(this._ings[e],e*t+s),this.glowElement(this._glows[e],e*t+s)}return e}getMissingIngVO(){this.bounceElement(this._ingMissing),this.glowElement(this._glowMissing);let e="gonger"==this.charSelect?"CMFT_7.0_203":"CMFT_7.0_220";switch(R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:e="gonger"==this.charSelect?"CMFT_7.0_203":"CMFT_7.0_220";break;case o.CINNAMON:e="gonger"==this.charSelect?"CMFT_7.0_212":"CMFT_7.0_229";break;case o.PINEAPPLE:e="gonger"==this.charSelect?"CMFT_7.0_205_alt":"CMFT_7.0_222";break;case o.CORN:e="gonger"==this.charSelect?"CMFT_7.0_217":"CMFT_7.0_218";break;case o.PEANUTS:e="gonger"==this.charSelect?"CMFT_7.0_202":"CMFT_7.0_219";break;case o.TOMATO_SAUCE:e="gonger"==this.charSelect?"CMFT_7.0_207":"CMFT_7.0_224";break;case o.WHEAT:e="gonger"==this.charSelect?"CMFT_7.0_210":"CMFT_7.0_227";break;case o.OATS:e="gonger"==this.charSelect?"CMFT_7.0_213":"CMFT_7.0_230";break;case o.APPLES:e="gonger"==this.charSelect?"CMFT_7.0_211":"CMFT_7.0_228";break;case o.BERRIES:e="gonger"==this.charSelect?"CMFT_7.0_214":"CMFT_7.0_231";break;case o.RAW_CORN:e="gonger"==this.charSelect?"CMFT_7.0_208":"CMFT_7.0_225";break;case o.EGGS:e="gonger"==this.charSelect?"CMFT_7.0_209":"CMFT_7.0_226";break;case o.HONEY:e="gonger"==this.charSelect?"CMFT_7.0_204_alt":"CMFT_7.0_221";break;case o.MUSHROOM:e="gonger"==this.charSelect?"CMFT_7.0_206":"CMFT_7.0_223";break;case o.ONIONS:e="gonger"==this.charSelect?"CMFT_7.0_216":"CMFT_7.0_233";break;case o.TOMATOES:e="gonger"==this.charSelect?"CMFT_7.0_215":"CMFT_7.0_232"}return e}addIng(e,t,s,i,a=null,_){let n=this.add.image(0,0,"preload","ingredient_glow");n.alpha=0,n.setDepth(I.BG),this._glows.push(n);let o=null!=i?this.getAsset(i):a,h=this.add.image(r.CENTER_X+1.25*t,r.CENTER_Y+1.25*s,"preload",o);h.setDepth(I.BG),null!=i&&i==_&&(h.setTexture("preload",o+"_missing"),this._ingMissing=h,this._glowMissing=n),h.setScale(1.25*e,1.25*e),this._ings.push(h),n.x=h.x,n.y=h.y}getAsset(e){let t="ingredient_list_apple";switch(e){case o.BANANA:t="ingredient_list_banana";break;case o.CINNAMON:t="ingredient_list_cinnamon";break;case o.PINEAPPLE:t="ingredient_list_pineapple";break;case o.CORN:t="ingredient_list_tortilla";break;case o.PEANUTS:t="ingredient_list_peanutbutter";break;case o.TOMATO_SAUCE:t="ingredient_list_tomatosauce";break;case o.WHEAT:t="ingredient_list_flour";break;case o.OATS:t="ingredient_list_oats";break;case o.APPLES:t="ingredient_list_apple";break;case o.BERRIES:t="ingredient_list_berries";break;case o.RAW_CORN:t="ingredient_list_corn";break;case o.EGGS:t="ingredient_list_eggs";break;case o.HONEY:t="ingredient_list_honey";break;case o.MUSHROOM:t="ingredient_list_mushroom";break;case o.ONIONS:t="ingredient_list_onion";break;case o.TOMATOES:t="ingredient_list_tomato"}return t}shutdown(){for(;this._ings.length>0;)this._ings.pop();this._ings=null,this._ingMissing=null,super.shutdown()}update(e,t){}bounceElement(e,t=0){let s=this.tweens.createTimeline();s.add({targets:e,scale:1.2*e.scale,duration:500,ease:a.a.Math.Easing.Quadratic.In,delay:1e3*t}),s.add({targets:e,scale:1*e.scale,duration:500,ease:a.a.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),s.play()}glowElement(e,t=0){let s=this.tweens.createTimeline();s.add({targets:e,scale:1.2*e.scale,alpha:1,duration:500,ease:a.a.Math.Easing.Quadratic.In,delay:1e3*t}),s.add({targets:e,scale:1*e.scale,alpha:0,duration:500,ease:a.a.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}}),s.play()}},class extends Rt{constructor(){super({key:c.CUTSCENE_ING_EXPLANATION})}preload(){}create(){console.log(c.CUTSCENE_ING_EXPLANATION),super.create(),this.add.image(r.CENTER_X,r.CENTER_Y,this.getAsset(R.getValue(N.ENUM_INGREDIENT))).setDepth(I.BG),this.start()}start(){this.time.delayedCall(500,()=>{let e="CMFT_4.0_42";switch(R.getValue(N.ENUM_INGREDIENT)){case o.CORN:e="CMFT_4.0_42";break;case o.PEANUTS:e="CMFT_4.0_39";break;case o.TOMATO_SAUCE:e="CMFT_4.0_40";break;case o.WHEAT:e="CMFT_4.0_38";break;case o.OATS:e="CMFT_4.0_41"}X.playVO(this,e,()=>{R.setValue(N.ENUM_TRANSITION_TO,c.WORLD_COLLECTION),this.scene.start(c.TRANSITION)})})}getAsset(e){let t="ingredient_source_tortilla";switch(e){case o.CORN:t="ingredient_source_tortilla";break;case o.PEANUTS:t="ingredient_source_peanutbutter";break;case o.TOMATO_SAUCE:t="ingredient_source_tomatosauce";break;case o.WHEAT:t="ingredient_source_flour";break;case o.OATS:t="ingredient_source_oats"}return t}shutdown(){super.shutdown()}update(e,t){}},class extends Rt{constructor(){super({key:c.CUTSCENE_LAUNCH})}preload(){}create(){console.log(c.CUTSCENE_LAUNCH),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.CUTSCENE_LAUNCH),R.setValue(N.ENUM_COMPONENT_NAME,"Gong"),R.setValue(N.ENUM_COMPONENT_TYPE,"simulation"),this.bg=this.add.image(r.CENTER_X,r.CENTER_Y,"outro_gong_bg"),this.bg.setDepth(I.BG),this.launchState=xt.INTRO,this.gonger=this.add.spine(r.CENTER_X+100,r.CENTER_Y-7,"Gonger","gong_in",!1),this.gonger.setScale(.6),this.gonger.on("complete",this.onAnimationComplete),this.cookie=this.add.spine(r.CENTER_X,r.CENTER_Y,"Cookie"),this.cookie.alpha=0,this.cookie.setScale(.5),this.cookie.on("complete",this.onAnimationComplete),this.active=!1,this._reminderTime=0,this.delivery=this.add.image(r.CENTER_X-.5*r.WIDTH-210,r.CENTER_Y,"outro_delivery_bag"),this.delivery.alpha=0,this.delivery.setDepth(I.BG),this.initLaunch=!1,this.input.on("pointerdown",this.onPointerdown,this),this.input.on("pointerup",this.onPointerup,this),this.start()}onPointerdown(e){}onPointerup(e){if(!this.active)return;const t=e.x+R.offsetPos().x,s=e.y+R.offsetPos().y;switch(this.launchState){case xt.INTRO:t>=r.CENTER_X-455&&t<=r.CENTER_X+170&&s>=r.CENTER_Y-300&&s<=r.CENTER_Y+315&&(this.events.emit(O.CURSOR_DEACTIVATE),this._checkAnalytic(),this.setLaunchState(xt.LAUNCH));break;case xt.LAUNCH:t>=r.CENTER_X-318&&t<=r.CENTER_X+460&&s>=r.CENTER_Y-2&&s<=r.CENTER_Y+300&&(this.events.emit(O.CURSOR_DEACTIVATE),this._checkAnalytic(),this.setLaunchState(xt.END));break;case xt.END:}}onPointerMove(e){const t={x:e.x+R.offsetPos().x,y:e.y+R.offsetPos().y};switch(this.cursor.x=t.x,this.cursor.y=t.y,this._checkAnalytic(),this.launchState){case xt.INTRO:t.x>=r.CENTER_X-455&&t.x<=r.CENTER_X+170&&t.y>=r.CENTER_Y-300&&t.y<=r.CENTER_Y+315?this.events.emit(O.CURSOR_ACTIVATE):this.events.emit(O.CURSOR_DEACTIVATE);break;case xt.LAUNCH:t.x>=r.CENTER_X-318&&t.x<=r.CENTER_X+460&&t.y>=r.CENTER_Y-2&&t.y<=r.CENTER_Y+300?this.events.emit(O.CURSOR_ACTIVATE):this.events.emit(O.CURSOR_DEACTIVATE);break;case xt.END:}}onAnimationComplete(e){switch(this.scene.launchState){case xt.INTRO:case xt.LAUNCH:break;case xt.END:}}getFriendVO(){let e="CMFT_7.0_279";switch(R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:e="CMFT_7.0_279";break;case h.TACOS:e="CMFT_7.0_281";break;case h.OATMEAL:e="CMFT_7.0_278";break;case h.PIZZA:e="CMFT_7.0_277";break;case h.SANDWICH:e="CMFT_7.0_276";break;case h.CORNBREAD:e="CMFT_7.0_280"}return e}setLaunchState(e){switch(this.launchState=e,this._reminderTime=0,this.launchState){case xt.INTRO:te.dataLayerTracking({event:"gameComponentStart",roundName:R.getValue(N.ENUM_CURRENT_ROUND),componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),this.gonger.setAnimation(1,"gong_lipflap",!0),this.time.delayedCall(1200,()=>{this.events.emit(O.CURSOR_ACTIVATE),this.active=!0}),X.playVO(this,this.getALTGongVO(),()=>{this.gonger.setAnimation(0,"gong_glow",!0),X.playVO(this,R.isMobile()?"CMFT_6.0_178":"CMFT_6.0_179",()=>{this.gonger.setAnimation(1,"mouth_closed",!0),this._reminderTime=r.VO_REMINDER_TIMER})});break;case xt.LAUNCH:te.dataLayerTracking({event:"gameAchievement",roundName:R.getValue(N.ENUM_CURRENT_ROUND),achievementType:"Gong the gong!"}),this.time.delayedCall(300,()=>{X.playAudio(this,"gong",null,.6)}),this.active=!1,this.initLaunch=!0,this.gonger.setAnimation(0,"gong_tap",!1),this.gonger.setAnimation(1,"gong_lipflap",!0),X.playVO(this,"CMFT_6.0_163",()=>{this.gonger.setAnimation(1,"mouth_closed",!0),this.time.delayedCall(500,()=>{let e=Math.round((Date.now()-this._startTime)/1e3);te.dataLayerTracking({event:"gameComponentComplete",roundName:R.getValue(N.ENUM_CURRENT_ROUND),duration:e,componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),R.setValue(N.ENUM_CURRENT_SCREEN,"Launch Screen"),R.setValue(N.ENUM_COMPONENT_NAME,"Launch"),R.setValue(N.ENUM_COMPONENT_TYPE,"simulation"),this._startTime=Date.now(),te.dataLayerTracking({event:"gameComponentStart",roundName:R.getValue(N.ENUM_CURRENT_ROUND),componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),this.bg.setTexture("cutscene_bg"),this.gonger.alpha=0,this.cookie.alpha=1,this.cookie.setAnimation(0,"catapult_glow",!0),this.cookie.setAnimation(1,"catapult_lipflap",!0),X.playVO(this,"CMFT_6.0_167",()=>{X.playVO(this,this.getFriendVO(),()=>{this.cookie.setAnimation(1,"mouth_closed",!0),this._reminderTime=r.VO_REMINDER_TIMER})},1,0,!1,!0),this.time.delayedCall(500,()=>{this.events.emit(O.CURSOR_ACTIVATE),this.active=!0})})});break;case xt.END:this.time.delayedCall(700,()=>{X.playAudio(this,"catapult",null,.8)}),this.cookie.setAnimation(0,"catapult_tap",!1);let t=a.a.Math.FloatBetween(0,1)>.5?"cookie":"gonger";"cookie"!=t&&this.cookie.setAnimation(1,"mouth_closed",!0),X.playVO(this,"cookie"==t?"CMFT_6.0_168":"CMFT_6.0_169",()=>{this.bg.setTexture("outro_delivery_bg"),this.cookie.alpha=0,this.delivery.alpha=1,this.delivery.scale=.5,this.delivery.rotation=-90,this.delivery.y=r.CENTER_Y+200,X.playVO(this,this._finalVO(),()=>{this.time.delayedCall(1e3,()=>{let e=Math.round((Date.now()-this._startTime)/1e3);te.dataLayerTracking({event:"gameComponentComplete",roundName:R.getValue(N.ENUM_CURRENT_ROUND),duration:e,componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)});let t="";switch(R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:t="Apple Pie";break;case h.TACOS:t="Tacos";break;case h.OATMEAL:t="Oatmeal";break;case h.PIZZA:t="Pizza";break;case h.SANDWICH:t="Peanut Butter, Banana & Honey Sandwich";break;case h.CORNBREAD:t="Corn Bread"}let s=Math.round((Date.now()-R.getRoundData()[0].startTime)/1e3);te.dataLayerTracking({event:"gameRoundComplete",roundName:t,roundNumber:R.getRoundData()[0].roundNumber,duration:s}),te.dataLayerTracking({event:"gamePlaythroughComplete",roundName:t,playthroughNumber:R.getRoundData()[0].roundNumber,duration:s}),R.setValue(N.ENUM_TRANSITION_TO,c.RECIPE_SELECT),this.scene.start(c.TRANSITION)})}),this.tweens.add({targets:this.delivery,x:r.WIDTH+210,y:r.CENTER_Y-300,scale:1,rotation:a.a.Math.DegToRad(45),alpha:1,duration:3e3,ease:a.a.Math.Easing.Quadratic.Out,delay:0,onComplete:()=>{}})})}}_finalVO(){let e="CMFT_6.0_175_alt";switch(R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:e="CMFT_6.0_175_alt";break;case h.TACOS:e="CMFT_6.0_176_alt";break;case h.OATMEAL:e="CMFT_6.0_177";break;case h.PIZZA:e="CMFT_6.0_173_alt";break;case h.SANDWICH:e="CMFT_6.0_172";break;case h.CORNBREAD:e="CMFT_6.0_174"}return e}getALTGongVO(){let e="CMFT_6.0_164";switch(a.a.Math.Between(0,2)){case 0:e="CMFT_6.0_164";break;case 1:e="CMFT_6.0_165";break;default:e="CMFT_6.0_166"}return e}start(){this.setLaunchState(xt.INTRO)}shutdown(){this.bg=null,this.gonger=null,this.cookie=null,this.delivery=null,this.input.off("pointerdown",this.onPointerdown,this),this.input.off("pointerup",this.onPointerup,this),this.scaleManager.removeEntity(this.textAnchor),super.shutdown()}update(e,t){super.update(e,t)}_doRemind(){switch(this.launchState){case xt.INTRO:this.gonger.setAnimation(1,"gong_lipflap",!0),X.playVO(this,R.isMobile()?"CMFT_6.0_178":"CMFT_6.0_179",()=>{this.gonger.setAnimation(1,"mouth_closed",!0),this._reminderTime=r.VO_REMINDER_TIMER});break;case xt.LAUNCH:this.cookie.setAnimation(1,"catapult_lipflap",!0),X.playVO(this,R.isMobile()?"CMFT_6.0_180":"CMFT_6.0_181",()=>{this.cookie.setAnimation(1,"mouth_closed",!0),this._reminderTime=r.VO_REMINDER_TIMER});break;case END:}}},class extends Rt{constructor(){super({key:c.WORLD_COLLECTION})}preload(){console.log(c.WORLD_COLLECTION),R.setValue(N.ENUM_COMPONENT_NAME,"Ingredient Collection"),R.setValue(N.ENUM_COMPONENT_TYPE,"simulation")}create(){switch(super.create(),this.input.on("pointerdown",this.onPointerdown,this),this.input.on("pointerup",this.onPointerup,this),X.playMusic(this,"main_theme",r.MUSIC_VOL),te.dataLayerTracking({event:"gameComponentStart",roundName:R.getValue(N.ENUM_CURRENT_ROUND),componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),this.collection=null,R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:this.collection=new Ee(this);break;case o.CINNAMON:this.collection=new ue(this);break;case o.PINEAPPLE:this.collection=new Te(this);break;case o.CORN:this.collection=new Ne(this);break;case o.PEANUTS:this.collection=new Oe(this);break;case o.TOMATO_SAUCE:this.collection=new Ie(this);break;case o.WHEAT:this.collection=new ke(this);break;case o.OATS:this.collection=new we(this);break;case o.APPLES:this.collection=new Se(this);break;case o.BERRIES:this.collection=new Pt(this);break;case o.RAW_CORN:this.collection=new Ae(this);break;case o.EGGS:this.collection=new xe(this);break;case o.HONEY:this.collection=new Fe(this);break;case o.MUSHROOM:this.collection=new De(this);break;case o.ONIONS:this.collection=new fe(this);break;case o.TOMATOES:this.collection=new Ve(this);break;default:this.collection=new Oe(this)}}shutdown(){null!=this.collection&&this.collection.dispose(),this.collection=null,this.input.off("pointerdown",this.onPointerdown,this),this.input.off("pointerup",this.onPointerup,this),super.shutdown()}onPointerMove(e){super.onPointerMove(e),this.collection.onInput(k.MOVE,e)}onPointerdown(e){this.collection.onInput(k.DOWN,e)}onPointerup(e){this.collection.onInput(k.UP,e)}update(e,t){this.collection.update(t)}},class extends Rt{constructor(){super({key:c.WORLD_DRIVING})}preload(){console.log(c.WORLD_DRIVING),R.setValue(N.ENUM_CURRENT_SCREEN,c.WORLD_DRIVING),R.setValue(N.ENUM_COMPONENT_NAME,"Driving"),R.setValue(N.ENUM_COMPONENT_TYPE,"steering")}create(){super.create(),this.input.on("pointerdown",this.onPointerdown,this),this.input.on("pointerup",this.onPointerup,this);let e=new a.a.Geom.Rectangle(0,0,r.WIDTH,r.HEIGHT),t=this.add.graphics({fillStyle:{color:11328483}});switch(t.fillRectShape(e),t.setDepth(I.BG),R.getValue(N.ENUM_INGREDIENT)){case o.BANANA:case o.CINNAMON:case o.PINEAPPLE:case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:for(let e=0;e<3;e++)this.addElement(new ve(this,{x:a.a.Math.FloatBetween(r.CENTER_X-.5*r.WIDTH+e*r.WIDTH/3,r.CENTER_X-.5*r.WIDTH+(e+1)*r.WIDTH/3)}),I.BG)}this._bg=new je(this,I.BG),this._player=new He(this,this.spine,{x:r.CENTER_X-200,y:r.CENTER_Y+250,key:"foodtruck",scale:.5},I.BG),this._dState=null,this._active=!1,this._timedEvent=null,te.dataLayerTracking({event:"gameComponentStart",roundName:R.getValue(N.ENUM_CURRENT_ROUND),componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),this._setDriveState(Ft.INTRO)}_setDriveState(e){switch(this._dState=e,this._dState){case Ft.INTRO:this._active=!0,X.playMusic(this,"driving_music",r.MUSIC_VOL),this._player.intro(()=>{});break;case Ft.PLAY:this._bg.start(),this._player.start(),this._spawnObstacle(),this.time.delayedCall(22e3,()=>{this._setDriveState(Ft.END)}),this.time.delayedCall(11e3,()=>{this._player._doReact()});break;case Ft.END:this._timedEvent.remove(!1),this.time.delayedCall(4800,()=>{X.playAudio(this.scene,"truck_vroom",null,.5)}),this.time.delayedCall(5e3,()=>{this._player.end(()=>{let e=Math.round((Date.now()-this._startTime)/1e3);switch(te.dataLayerTracking({event:"gameComponentComplete",roundName:R.getValue(N.ENUM_CURRENT_ROUND),duration:e,componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),R.getValue(N.ENUM_INGREDIENT)){case o.CORN:case o.PEANUTS:case o.TOMATO_SAUCE:case o.WHEAT:case o.OATS:this.scene.start(c.CUTSCENE_ING_EXPLANATION);break;default:R.setValue(N.ENUM_TRANSITION_TO,c.WORLD_COLLECTION),this.scene.start(c.TRANSITION)}})})}}_spawnObstacle(){this.addElement(new Le(this,{x:r.CENTER_X+r.WIDTH,y:0},this._player),I.MAIN),this._timedEvent=this.time.addEvent({delay:3e3,callback:()=>{this._spawnObstacle()},callbackScope:this,loop:!1})}_spawnEffect(){}shutdown(){this.input.off("pointerdown",this.onPointerdown,this),this.input.off("pointerup",this.onPointerup,this),super.shutdown()}onPointerMove(e){super.onPointerMove(e),this._dState!=Ft.PLAY&&this._dState!=Ft.END||this._player.onInput(k.MOVE,e)}onPointerdown(e){this._dState==Ft.INTRO&&this._active&&(this._active=!1,this._setDriveState(Ft.PLAY)),this._dState!=Ft.PLAY&&this._dState!=Ft.END||this._player.onInput(k.DOWN,e)}onPointerup(e){this._dState!=Ft.PLAY&&this._dState!=Ft.END||this._player.onInput(k.UP,e)}update(e,t){this._bg.update(t)}},class extends Rt{constructor(){super({key:c.WORLD_ASSEMBLY})}preload(){console.log(c.WORLD_ASSEMBLY),R.setValue(N.ENUM_CURRENT_SCREEN,c.WORLD_ASSEMBLY),R.setValue(N.ENUM_COMPONENT_NAME,"Recipe Assembly"),R.setValue(N.ENUM_COMPONENT_TYPE,"simulation")}create(){switch(super.create(),this.input.on("pointerdown",this.onPointerdown,this),this.input.on("pointerup",this.onPointerup,this),this.add.image(r.CENTER_X,r.CENTER_Y,"build_recipe_bg").setDepth(I.BG),X.playMusic(this,"cooking",r.MUSIC_VOL),te.dataLayerTracking({event:"gameComponentStart",roundName:R.getValue(N.ENUM_CURRENT_ROUND),componentName:R.getValue(N.ENUM_COMPONENT_NAME),componentType:R.getValue(N.ENUM_COMPONENT_TYPE)}),this._assembly=null,R.getValue(N.ENUM_RECIPE)){case h.APPLEPIE:this._assembly=new it(this);break;case h.TACOS:this._assembly=new bt(this);break;case h.OATMEAL:this._assembly=new mt(this);break;case h.PIZZA:this._assembly=new _t(this);break;case h.SANDWICH:this._assembly=new $e(this);break;case h.CORNBREAD:this._assembly=new Et(this);break;default:this._assembly=new We(this)}}shutdown(){null!=this._assembly&&this._assembly.dispose(),this._assembly=null,this.input.off("pointerdown",this.onPointerdown,this),this.input.off("pointerup",this.onPointerup,this),super.shutdown()}onPointerMove(e){super.onPointerMove(e),this._assembly.onInput(k.MOVE,e)}onPointerdown(e){this._assembly.onInput(k.DOWN,e)}onPointerup(e){this._assembly.onInput(k.UP,e)}update(e,t){this._assembly.update(t)}},class extends Rt{constructor(){super({key:c.DEBUG})}preload(){}create(){console.log(c.DEBUG),super.create(),R.setValue(N.ENUM_CURRENT_SCREEN,c.DEBUG),this.add.image(r.CENTER_X,r.CENTER_Y,"loading_bg");let e=-240,t=0,s=0;for(let e=0;e<16;e++)++t>=4&&(t=0,s++);t=0,s=0,e=-176;for(const e in o){if(console.log(`${e}: ${o[e]}`),o[e]==o.NONE)continue;this.addElement(new ce(this,{x:r.CENTER_X+-240+160*t,y:r.CENTER_Y+-176+140*s,assetUp:"btn_play",assetOver:"btn_play_highlight",pack:"preload",scale:.6},this._onDebugDown),I.BG).setData("ingID",o[e]);let i=this.add.text(r.CENTER_X+-240+160*t,r.CENTER_Y+-176-64+140*s,o[e],{font:"20px Arial Black",fill:"#fff"});i.setOrigin(.5,.5),i.setStroke("#000",1),++t>=4&&(t=0,s++)}}_onDebugDown(){console.log("_onDebugDown"),R.setValue(N.ENUM_INGREDIENT,this.getData("ingID")),this.scene.scene.start(c.WORLD_COLLECTION)}shutdown(){super.shutdown()}update(e,t){super.update(e,t)}}]})},651:function(e,t,s){s(652),e.exports=s(1748)},818:function(e,t,s){}});