function PxLoaderSound(id,url,tags,priority){var self=this,loader=null;this.tags=tags;this.priority=priority;this.sound=soundManager?soundManager['createSound']({'id':id,'url':url,'autoLoad':false,'onload':function(){loader.onLoad(self);},'onsuspend':function(){loader.onTimeout(self);},'whileloading':function(){var bytesLoaded=this['bytesLoaded'],bytesTotal=this['bytesTotal'];if(bytesLoaded>0&&(bytesLoaded===bytesTotal)){loader.onLoad(self);}}}):null;this.start=function(pxLoader){loader=pxLoader;var iDevice=navigator.userAgent.match(/(ipad|iphone|ipod)/i);var smUsingHTML5=soundManager&&soundManager.hasHTML5&&!soundManager.preferFlash;if(iDevice||!this.sound||!soundManager||smUsingHTML5){loader.onTimeout(self);}else{this.sound['load']();}};this.checkStatus=function(){switch(self.sound['readyState']){case 0:break;case 1:break;case 2:loader.onError(self);break;case 3:loader.onLoad(self);break;}};this.onTimeout=function(){loader.onTimeout(self);};this.getName=function(){return url;}}
PxLoader.prototype.addSound=function(id,url,tags,priority){var soundLoader=new PxLoaderSound(id,url,tags,priority);this.add(soundLoader);return soundLoader.sound;};