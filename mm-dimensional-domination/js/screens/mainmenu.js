var game=game||{};game.screens=game.screens||{};(function(){'use strict';function MainMenu(){WONBATS.Screen.call(this);}
MainMenu.prototype=Object.create(WONBATS.Screen.prototype);MainMenu.prototype.constructor=MainMenu;MainMenu.prototype.enter=function(name){WONBATS.Screen.prototype.enter.call(this,name);this.view=new WONBATS.MovieClip(mainmenu,"mainmenu");this.asset.addChild(this.view);this.view.update(0);this.addButton("play",this.view.getChildByName("btnPlay"),this.onAccept.bind(this));this.addButton("soundOnButton",this.view.getChildByName("btnSound").getChildByName("soundOn"),this.onSound.bind(this));this.addButton("soundOffButton",this.view.getChildByName("btnSound").getChildByName("soundOff"),this.onSound.bind(this));globalsignal.add(this.onGlobalSignal.bind(this));this.enableKeyboard(true);this.enableInput(false);this.updateSoundButton();var title=this.view.getChildByName("title");title.gotoAndStop(game.config.LANGUAGE);};MainMenu.prototype.onSound=function(e){game.soundManager.switchMute();this.updateSoundButton();};MainMenu.prototype.updateSoundButton=function(){var soundOn=this.view.getChildByName("btnSound").getChildByName("soundOn");var soundOff=this.view.getChildByName("btnSound").getChildByName("soundOff");if(game.soundManager.isMuted()){soundOff.attribs.visible=true;soundOff.interactive=true;soundOn.interactive=false;soundOn.attribs.visible=false;}else{soundOff.interactive=false;soundOff.attribs.visible=false;soundOn.attribs.visible=true;soundOn.interactive=true;}};MainMenu.prototype.onKeyDown=function(e){WONBATS.Screen.prototype.onKeyDown.call(this,e);if(e.keyCode===13){game.soundManager.playSfx("btn_click");this.onAccept();}};MainMenu.prototype.onAccept=function(){this.enableInput(false);this.view.gotoAndPlay("out");};MainMenu.prototype.onGlobalSignal=function(message){console.log(message);if(message==="out"){this.transitionSignal.emit(this.name,"exit");}
if(message==="in"){this.enableInput(true);}
if(message==="intro_ended"){var music_foreground=game.soundManager.getSound("music_foreground");var music_background=game.soundManager.getSound("music_background");if(!music_background){game.soundManager.play("music_background");music_background=game.soundManager.getSound("music_background");music_background.volume=0;}else{game.soundManager.fadeVolume("music_background",1000,0);}
if(!music_foreground){game.soundManager.play("music_foreground");}
game.soundManager.fadeVolume("music_foreground",1000,0,true);}};MainMenu.prototype.update=function(dt){this.view.update(dt);};MainMenu.prototype.exit=function(name){globalsignal.remove(this.onGlobalSignal);WONBATS.Screen.prototype.exit.call(this,name);};game.screens.MainMenu=MainMenu;}());