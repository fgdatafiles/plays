
(function(){
    'use strict';
    var t;

    var Player=function()
    {
        this.initialize();
    };
    var player=Player.prototype=new createjs.Container();
    player.Container_initialize=player.initialize;
    player.initialize=function()
    {


        this.Container_initialize();
        var data={
            "framerate":24,
            "images":["img/anim.png"],
            "frames":[
                [264, 127, 91, 117, 0, -18, -2],
                [451, 127, 92, 117, 0, -17, -2],
                [543, 127, 93, 117, 0, -17, -2],
                [1881, 0, 94, 118, 0, -16, -2],
                [0, 127, 95, 118, 0, -16, -2],
                [1273, 127, 96, 117, 0, -15, -3],
                [1561, 127, 97, 117, 0, -15, -3],
                [1176, 127, 97, 117, 0, -15, -3],
                [1756, 127, 98, 117, 0, -14, -3],
                [1658, 127, 98, 117, 0, -14, -3],
                [97, 245, 98, 116, 0, -14, -4],
                [1854, 127, 98, 116, 0, -14, -4],
                [195, 245, 98, 116, 0, -14, -4],
                [0, 245, 97, 116, 0, -15, -4],
                [1369, 127, 97, 117, 0, -15, -3],
                [355, 127, 96, 117, 0, -15, -3],
                [1466, 127, 95, 117, 0, -16, -3],
                [1082, 127, 94, 117, 0, -16, -3],
                [989, 127, 93, 117, 0, -17, -2],
                [897, 127, 92, 117, 0, -17, -2],
                [806, 127, 91, 117, 0, -18, -2],
                [417, 0, 74, 123, 0, -22, -2],
                [858, 0, 74, 120, 0, -22, -5],
                [293, 245, 91, 113, 0, -5, -12],
                [471, 245, 96, 108, 0, 0, -17],
                [384, 245, 87, 110, 0, -9, -14],
                [1786, 0, 95, 118, 0, -22, -7],
                [219, 0, 108, 125, 0, -22, -3],
                [0, 0, 110, 127, 0, -22, -3],
                [110, 0, 109, 126, 0, -22, -2],
                [576, 0, 108, 121, 0, -22, -2],
                [567, 245, 108, 107, 0, -22, -1],
                [675, 245, 88, 103, 0, -22, 0],
                [1952, 127, 86, 115, 0, -10, -3],
                [764, 0, 94, 120, 0, -2, -5],
                [491, 0, 85, 122, 0, -11, -3],
                [327, 0, 90, 123, 0, -14, -2],
                [1324, 0, 74, 118, 0, -23, -7],
                [1250, 0, 74, 118, 0, -23, -7],
                [1472, 0, 74, 118, 0, -23, -7],
                [1398, 0, 74, 118, 0, -23, -6],
                [1712, 0, 74, 118, 0, -23, -6],
                [1172, 0, 78, 119, 0, -22, -5],
                [1092, 0, 80, 119, 0, -21, -5],
                [1546, 0, 82, 118, 0, -20, -6],
                [95, 127, 84, 117, 0, -19, -8],
                [179, 127, 85, 117, 0, -18, -8],
                [636, 127, 85, 117, 0, -18, -8],
                [721, 127, 85, 117, 0, -18, -8],
                [1628, 0, 84, 118, 0, -19, -7],
                [932, 0, 82, 120, 0, -20, -5],
                [684, 0, 80, 120, 0, -21, -5],
                [1014, 0, 78, 120, 0, -22, -4]
            ],
            "animations":{
                "walk": {
                    "frames": [
                        37,
                        38,
                        39,
                        40,
                        41,
                        42,
                        43,
                        44,
                        45,
                        46,
                        47,
                        48,
                        49,
                        50,
                        51,
                        52
                    ],
                    "speed": 1
                },
                "jump": {"frames": [21,  23, 25, 26], "speed": 1, "next": "fly"},
                "idle": {
                    "frames": [
                        0,
                        1,
                        2,
                        3,
                        4,
                        5,
                        6,
                        7,
                        8,
                        9,
                        10,
                        11,
                        12,
                        13,
                        14,
                        15,
                        16,
                        17,
                        18,
                        19,
                        20
                    ],
                    "speed": 1
                },
                "fly": {"frames": [27], "speed": 1},
                "fall": {"frames": [32], "speed": 1},
                "falling": {"frames": [28, 29, 30, 31], "speed": 1,"next": "fall"}
            }
        };
        var spriteSheet = new createjs.SpriteSheet(data);


        this.player = new createjs.Sprite(spriteSheet,'idle');
        this.player.regX = 50;
        this.isWalking =false;
        this.isJumping =false;
        this.addChild(this.player);
        this.hz = new c.Bitmap(main.loadedData.getResult('hz'))
        this.hz.x = -32;
        this.hz.y = 85;
        this.hz.visible=false;
        this.hz.alpha=0.5;
        this.addChild(this.hz);
    };
    player.playAnim = function(s,scale){

        if(this.player.currentAnimation!=s){
            this.player.gotoAndPlay(s);
        }
        if(scale)this.scaleX =scale;
    }
    player.revert=function(scale){
        this.scaleX =scale;
    }
    window.Player=Player;
}());
