pc.script.attribute("mass","number",1),pc.script.attribute("type","enumeration",0,{enumerations:[{name:"STATIC",value:0},{name:"DYNAMIC",value:1},{name:"KINEMATIC",value:2}]}),pc.script.attribute("pivotPoint","enumeration",0,{enumerations:[{name:"TopCenter",value:-1},{name:"MiddleCenter",value:0},{name:"BottomCenter",value:1}]}),pc.script.attribute("BodyName","string"),pc.script.attribute("Trigger","boolean"),pc.script.attribute("autoCollision","boolean",!1),pc.script.attribute("offset","vector",[0,0,0]),pc.script.create("BodyWrapper",function(a){var b=function(a){this.entity=a,this.count=1};return b.prototype={initialize:function(){this.body=new nick.Physics.Body(this,this.type),this.body.name=this.BodyName,this.body.isTrigger=this.Trigger,this.body.mass=this.mass,this.body.position.copy(this.entity.getPosition()),this.updateCollision()},postInitialize:function(){var a=this.pivotPoint*this.body.collision.halfExtents.y;this.offset.y+=a,this.body.position.add(this.offset),nick.engine.insertBody(this.body)},update:function(a){if(0!==this.type){var b=this.body.position.x-this.offset.x,c=this.body.position.y-this.offset.y,d=this.body.position.z-this.offset.z;this.entity.setPosition(b,c,d)}},onEnable:function(){this.body&&(this.body.activated=!0)},onDisable:function(){this.body&&(this.body.activated=!1)},postUpdate:function(a){if(this.body&&!PAUSE&&"Building"!==this.BodyName){var b=this.body.allCollisions,c=b.keys();if(!(c.length<=0)){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=b.get(f);0===g?this.body.onCollisionEnter(f):1===g?this.body.onCollisionStay(f):2===g&&(d.push(f),this.body.onCollisionExit(f)),b.set(f,2)}for(var h=0;h<d.length;h++)b["delete"](d[h])}}},updateCollision:function(){if(this.entity.collision){if(this.body.collision=this.entity.collision,this.autoCollision){var a=this.entity.model.model,b=a.meshInstances[0],c=b.aabb;this.body.collision.halfExtents.x=c.halfExtents.x,this.body.collision.halfExtents.y=c.halfExtents.y,this.body.collision.halfExtents.z=c.halfExtents.z}for(var d=this.entity.getParent(),e=this.entity.getLocalEulerAngles().y,f=this.entity.getLocalScale().clone();d;){var g=d.getRotation();e+=1===g.y||-1===g.y?180:d.getLocalEulerAngles().y,f.mul(d.getLocalScale()),d=d.getParent()}if(e%180!==0){var h=this.body.collision.halfExtents.x;this.body.collision.halfExtents.x=this.body.collision.halfExtents.z,this.body.collision.halfExtents.z=h}}}},b});