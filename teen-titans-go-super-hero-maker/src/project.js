window.__require=function t(e,o,i){function n(a,s){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}}var h=o[a]={exports:{}};e[a][0].call(h.exports,function(t){return n(e[a][1][t]||t)},h,h.exports,t,e,o,i)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<i.length;a++)n(i[a]);return n}({AudioButton:[function(t,e,o){"use strict";cc._RF.push(e,"df945jlVMZKH54zfvtXafpl","AudioButton");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./AudioScene"),a=t("../manager/Singleton"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameOn=null,e.frameOff=null,e}return i(e,t),e.prototype.onLoad=function(){this.instance=a.default.GetInstance(),this.button=this.node.getComponent(cc.Sprite)},e.prototype.start=function(){this.checkState()},e.prototype.checkState=function(){var t=this.instance.audioManager.enableAudio;this.button.spriteFrame=t?this.frameOn:this.frameOff},e.prototype.switchState=function(){this.instance.switchAudioState(),this.instance.audioManager.playSfx(r.SFXKey.button_menu),this.checkState()},n([l(cc.SpriteFrame)],e.prototype,"frameOn",void 0),n([l(cc.SpriteFrame)],e.prototype,"frameOff",void 0),e=n([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manager/Singleton":"Singleton","./AudioScene":"AudioScene"}],AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"01118l5Xb9PppppJJX96tol","AudioManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=t("./AudioScene"),r=function(t){function e(){var e=t.call(this)||this;return e.lockSfxPlayback=!1,e.currentMusic=null,e.singleSFXPlayingList={},e.musicId=null,e._musicVolume=1,e.music=[],e.audioSprite=null,e.enableAudio=!0,e.isChain=!1,e}return i(e,t),Object.defineProperty(e.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(t){this._musicVolume=t,this.currentMusic&&this.currentMusic.volume(t,this.musicId)},enumerable:!0,configurable:!0}),e.prototype.loadMusic=function(t,e){this.music[t]=new Howl({src:e,onload:this.onEndLoad.bind(this)})},e.prototype.loadAudioSprite=function(t,e){this.audioSprite=new Howl({src:t,onload:this.onEndLoad.bind(this),sprite:e})},e.prototype.onEndLoad=function(){this.emit("loaded")},e.prototype.enableAll=function(){this.enableAudio=!0,this.currentMusic&&(this.isChain?(this.currentMusic=null,this.playMusicChain(this.currentChain[0],this.currentChain[1])):this.currentMusic.play())},e.prototype.disableAll=function(){this.enableAudio=!1,this.currentMusic&&this.currentMusic.stop(),this.audioSprite&&this.audioSprite.stop()},e.prototype.pause=function(){this.currentMusic&&this.currentMusic.pause(),this.audioSprite&&this.audioSprite.pause()},e.prototype.resume=function(){!Howler.ctx||"suspended"!==Howler.ctx.state&&"interrupted"!==Howler.ctx.state||Howler.ctx.resume(),this.currentMusic&&this.unpause(this.currentMusic),this.audioSprite&&this.unpause(this.audioSprite)},e.prototype.playMusic=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=!0),this.isChain=!1,this._playMusic(t,e,o)},e.prototype.playMusicChain=function(t,e){this.isChain=!0,this.currentChain=[t,e];var o=this.music[t],i=this.music[e];o&&i&&o!==this.currentMusic&&i!==this.currentMusic&&(this._playMusic(t,0,!1),this.currentMusic.on("end",this._playMusic.bind(this,e,0,!0)))},e.prototype._playMusic=function(t,e,o){void 0===e&&(e=0),void 0===o&&(o=!0);var i=this.music[t];if(i&&i!==this.currentMusic&&(this.currentMusic&&this.currentMusic.stop(),this.currentMusic=i,this.enableAudio)){var n=this.currentMusic.play();this.musicId=n,this.currentMusic.loop(!!o,n),e>0&&this.currentMusic.fade(0,this.musicVolume,e,n)}},e.prototype.stopMusic=function(){this.currentMusic&&this.currentMusic.stop(),this.currentMusic=null},e.prototype.playSfx=function(t){if(this.audioSprite&&!this.lockSfxPlayback&&this.enableAudio){var e=this.audioSprite.play(n.SFXKey[t]);return null===e&&console.warn("El audiosprite no tiene: "+n.SFXKey[t]),e}},e.prototype.playSingleSfx=function(t){var e=this;if(this.audioSprite&&!this.singleSFXPlayingList[n.SFXKey[t]]){var o=this.playSfx(t);null!==o&&(this.singleSFXPlayingList[n.SFXKey[t]]=!0,this.audioSprite.once("end",function(){e.singleSFXPlayingList[n.SFXKey[t]]=!1},o))}},e.prototype.stopSfx=function(t){this.audioSprite&&null!==t&&this.enableAudio&&this.audioSprite.stop(t)},e.prototype.doOnceSfxFinish=function(t,e){this.audioSprite&&this.audioSprite.once("end",e,t)},e.prototype.mute=function(t){Howler.mute(t)},e.prototype.unpause=function(t){for(var e,o=0;o<t._sounds.length;o++)t._sounds[o]._paused&&!t._sounds[o]._ended&&(e=t._sounds[o]._id,t.play(e))},e}(cc.Node);o.default=r,cc._RF.pop()},{"./AudioScene":"AudioScene"}],AudioScene:[function(t,e,o){"use strict";cc._RF.push(e,"b6df5dvxUZO85Wrndib1wBN","AudioScene");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../manager/Singleton"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.audiosprite=0]="audiosprite",t[t.musicGp2=1]="musicGp2",t[t.musicMenu=2]="musicMenu"})(r=o.HowlsKey||(o.HowlsKey={})),function(t){t[t.button_menu=0]="button_menu",t[t.final_photo=1]="final_photo",t[t.selection_item=2]="selection_item",t[t.selection_clothes=3]="selection_clothes",t[t.selection_color=4]="selection_color",t[t.button_arrow=5]="button_arrow",t[t.button_download=6]="button_download",t[t.popup_confirmation=7]="popup_confirmation"}(o.SFXKey||(o.SFXKey={}));var h=function(){function t(){this.id=r.audiosprite,this.nameFile="",this.isAudioSprite=!1,this.jsonAudioSprite=null}return n([l({type:cc.Enum(r)})],t.prototype,"id",void 0),n([l(cc.String)],t.prototype,"nameFile",void 0),n([l(cc.Boolean)],t.prototype,"isAudioSprite",void 0),n([l(cc.JsonAsset)],t.prototype,"jsonAudioSprite",void 0),t=n([c("AudioResource")],t)}(),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playInPreview=!0,e.formats=["m4a","mp3","ogg"],e.audioResources=[],e.isAllLoaded=!1,e.fileLoaded=0,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){this.instance=a.default.GetInstance(),this.isAllLoaded=!1,this.playInPreview,this.initLoadAudio()},e.prototype.initLoadAudio=function(){this.fileLoaded=0,this.totalFiles=this.audioResources.length,this.loadHowl()},e.prototype.loadHowl=function(){var t;this.instance.audioManager.on("loaded",this.onLoadedHowl,this);for(var e=0,i=this.audioResources.length;e<i;e++){t=[];for(var n=0,r=this.formats.length;n<r;n++)t.push(o.pathAudio+this.audioResources[e].nameFile+"."+this.formats[n]);this.audioResources[e].isAudioSprite?this.instance.audioManager.loadAudioSprite(t,this.audioResources[e].jsonAudioSprite.json.sprite):this.instance.audioManager.loadMusic(this.audioResources[e].id,t)}},e.prototype.onLoadedHowl=function(){this.fileLoaded++,this.checkOnCompletedLoad()},e.prototype.checkOnCompletedLoad=function(){this.fileLoaded>=this.totalFiles&&(this.node.emit("loadAudio"),this.isAllLoaded=!0)},e.pathAudio="audios/",n([l(cc.Boolean)],e.prototype,"playInPreview",void 0),n([l([cc.String])],e.prototype,"formats",void 0),n([l([h])],e.prototype,"audioResources",void 0),e=o=n([c],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manager/Singleton":"Singleton"}],AvatarManager:[function(t,e,o){"use strict";cc._RF.push(e,"dfbc2mptxRJpYjUUjVUKn2O","AvatarManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../data/ColorList"),s=t("../data/EnumCategory"),c=cc._decorator,l=c.ccclass,h=c.property;o.numberElements=18,function(t){t[t.ARMRIGHT=0]="ARMRIGHT",t[t.BODY=1]="BODY",t[t.HEAD=2]="HEAD",t[t.ARMLEFT=3]="ARMLEFT",t[t._numberBodyParts=4]="_numberBodyParts"}(r||(r={}));var p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.partValue=new Array(o.numberElements+1),e.characterPrefab=[],e.characterSelected=0,e.character=[],e.preview=null,e.colorizeMaterial=null,e.defaultMaterial=null,e.lineaNegra=cc.Color.WHITE,e.colorListJSON=null,e.paletteJSON=null,e.scaleSelect=1.05,e.skinColors=null,e.allLayers=new Array(o.numberElements+1),e.colors=new Array(o.numberElements+1),e.paletteItems=[],e}return i(e,t),e.prototype.reset=function(){this.characterSelected=0;for(var t=0;t<this.partValue.length;t++)this.partValue[t]=0;this.changeBodyParts(),this.chargePreviewV2()},e.prototype.onLoad=function(){this.tweenScale=[],this.tweenOriginalScale=[],this.categoryNeedTween=-1,this.fillColorSkin(),this.lineaNegra.fromHEX(this.colorListJSON.json.colors[this.paletteJSON.json.lines]);for(var t=0;t<4;t++)this.character.push(cc.instantiate(this.characterPrefab[t])),this.character[t].active=!1;this.readDepths(),console.log(this.allLayers),this.fillPrevArr(),this.changeBodyParts(),this.chargePreviewV2()},e.prototype.fillColorSkin=function(){var t=this;this.skinColors=new a.default,this.skinColors.name="skins";var e=0;this.paletteJSON.json.body.split(";").forEach(function(o){t.skinColors.palettes.push(new a.Palette),t.skinColors.palettes[e].r.fromHEX(t.colorListJSON.json.colors[o.split(",")[0]]),e++})},e.prototype.readDepths=function(){var t=this;this.preview.children.forEach(function(e){var o=e.name.split(" ");s.Category[o[0]]&&(o[1]?t.allLayers[s.Category[o[0]]]?t.allLayers[s.Category[o[0]]].layers.push({layerName:o[1],node:e}):t.allLayers[s.Category[o[0]]]={category:o[0],layers:[{layerName:o[1],node:e}]}:t.allLayers[s.Category[o[0]]]?t.allLayers[s.Category[o[0]]].layers.push({layerName:"default",node:e}):t.allLayers[s.Category[o[0]]]={category:o[0],layers:[{layerName:"default",node:e}]})})},e.prototype.fillPrevArr=function(){for(var t=0;t<o.numberElements;t++)this.partValue[t]=0;this.partValue[o.numberElements]=0},e.prototype.getVal=function(t){return this.partValue[s.Category[t]]},e.prototype.change=function(t,e){this.categoryNeedTween=t;for(var o=0,i=this.tweenScale.length;o<i;o++)this.tweenScale[o].stop(),this.tweenScale[o]._target.scaleX=this.tweenOriginalScale[o].x,this.tweenScale[o]._target.scaleY=this.tweenOriginalScale[o].y;if(this.tweenScale=[],this.tweenOriginalScale=[],this.partValue[t]=e,this.chargePreviewV2(),this.changeBodyParts(),this.categoryNeedTween=-1,t===s.Category.mask){this.preview.getChildByName("eyes").active=0===e,this.preview.getChildByName("eyes front").active=0===e}},e.prototype.changeBodyParts=function(){for(var t=0;t<r._numberBodyParts;t++)this.preview.getChildByName(r[t]).position=this.character[this.characterSelected].getChildByName(r[t]).position,this.preview.getChildByName(r[t]).getComponent(cc.Sprite).spriteFrame=this.character[this.characterSelected].getChildByName(r[t]).getComponent(cc.Sprite).spriteFrame,this.colorize(this.preview.getChildByName(r[t]),this.skinColors.palettes[this.skinColors.index])},e.prototype.getColorList=function(t){if(this.paletteJSON.json[t]){if(this.paletteItems[t])return this.paletteItems[t];for(var e=new a.default,o=this.paletteJSON.json[t].split(";"),i=0;i<o.length;i++){var n=o[i].split(",");e.palettes.push(new a.Palette),n[0]&&e.palettes[i].r.fromHEX(this.colorListJSON.json.colors[Number(n[0])]),n[1]&&e.palettes[i].g.fromHEX(this.colorListJSON.json.colors[Number(n[1])]),n[2]&&e.palettes[i].b.fromHEX(this.colorListJSON.json.colors[Number(n[2])])}return console.log("this worked kind of fine"+e),this.paletteItems[t]=e,e}return null},e.prototype.chargePreviewV2=function(){for(var t,e=this,o=function(o){var n=i.character[i.characterSelected].getChildByName(s.Category[o]).children[i.partValue[o]];if(!n)return"continue";var r=n.name.split(" "),a=o;if(i.colors[o]=i.getColorList(r[0]),null===i.colors[o]&&(i.colors[o]=i.getColorList(s.Category[o])),n.getComponent(cc.Sprite))if(r.length>1){var c=!1,l="skin"===r[1]?"default":r[1];"default"===l&&(c=!0),r.length>2&&"skin"===r[2]&&(c=!0),i.allLayers[a].layers.forEach(function(i){i.layerName===l?(i.node.getComponent(cc.Sprite).spriteFrame=n.getComponent(cc.Sprite).spriteFrame,i.node.position=n.position.add(n.parent.position),i.node.angle=n.angle,i.node.scaleX=n.scaleX,i.node.scaleY=n.scaleY,o===e.categoryNeedTween&&(e.tweenOriginalScale.push({x:i.node.scaleX,y:i.node.scaleY}),t=cc.tween(i.node).to(.1,{scaleX:i.node.scaleX*e.scaleSelect,scaleY:i.node.scaleY*e.scaleSelect}).to(.1,{scaleX:i.node.scaleX,scaleY:i.node.scaleY}).start(),e.tweenScale.push(t)),c?e.colorize(i.node,e.skinColors.palettes[e.skinColors.index]):e.colors[o]?e.colorize(i.node,e.colors[o].palettes[e.colors[o].index]):i.node.getComponent(cc.Sprite).setMaterial(0,e.defaultMaterial)):(o===e.categoryNeedTween&&(e.tweenOriginalScale.push({x:i.node.scaleX,y:i.node.scaleY}),t=cc.tween(i.node).to(.1,{scaleX:i.node.scaleX*e.scaleSelect,scaleY:i.node.scaleY*e.scaleSelect}).to(.1,{scaleX:i.node.scaleX,scaleY:i.node.scaleY}).start(),e.tweenScale.push(t)),i.node.getComponent(cc.Sprite).spriteFrame=null)})}else i.allLayers[a].layers.forEach(function(i){"default"===i.layerName?(i.node.getComponent(cc.Sprite).spriteFrame=n.getComponent(cc.Sprite).spriteFrame,i.node.position=n.position.add(n.parent.position),i.node.angle=n.angle,i.node.scaleX=n.scaleX,i.node.scaleY=n.scaleY,o===e.categoryNeedTween&&(e.tweenOriginalScale.push({x:i.node.scaleX,y:i.node.scaleY}),t=cc.tween(i.node).to(.1,{scaleX:i.node.scaleX*e.scaleSelect,scaleY:i.node.scaleY*e.scaleSelect}).to(.1,{scaleX:i.node.scaleX,scaleY:i.node.scaleY}).start(),e.tweenScale.push(t)),e.colors[o]?e.colorize(i.node,e.colors[o].palettes[e.colors[o].index]):i.node.getComponent(cc.Sprite).setMaterial(0,e.defaultMaterial)):(o===e.categoryNeedTween&&(e.tweenOriginalScale.push({x:i.node.scaleX,y:i.node.scaleY}),t=cc.tween(i.node).to(.1,{scaleX:i.node.scaleX*e.scaleSelect,scaleY:i.node.scaleY*e.scaleSelect}).to(.1,{scaleX:i.node.scaleX,scaleY:i.node.scaleY}).start(),e.tweenScale.push(t)),i.node.getComponent(cc.Sprite).spriteFrame=null)});else{var h=[];i.allLayers[a].layers.forEach(function(i){i.node.getComponent(cc.Sprite).spriteFrame=null,n.children.forEach(function(r){var a=r.name.split(" ");i.layerName===a[0]&&(o===e.categoryNeedTween&&(e.tweenOriginalScale.push({x:i.node.scaleX,y:i.node.scaleY}),t=cc.tween(i.node).to(.1,{scaleX:i.node.scaleX*e.scaleSelect,scaleY:i.node.scaleY*e.scaleSelect}).to(.1,{scaleX:i.node.scaleX,scaleY:i.node.scaleY}).start(),e.tweenScale.push(t)),h.push(r.name),i.node.getComponent(cc.Sprite).spriteFrame=r.getComponent(cc.Sprite).spriteFrame,i.node.position=r.position.add(n.position).add(n.parent.position),i.node.angle=r.angle,i.node.scaleX=r.scaleX,i.node.scaleY=r.scaleY,a[1]?e.colorize(i.node,e.skinColors.palettes[e.skinColors.index]):e.colors[o]?e.colorize(i.node,e.colors[o].palettes[e.colors[o].index]):i.node.getComponent(cc.Sprite).setMaterial(0,e.defaultMaterial))})})}},i=this,n=1;n<this.partValue.length;n++)o(n)},e.prototype.colorize=function(t,e){t.getComponent(cc.Sprite).setMaterial(0,this.colorizeMaterial),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color1",e.r),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color2",e.g),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color3",e.b),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color0",this.lineaNegra)},e.prototype.colorizeBodyPart=function(t,e){t.getComponent(cc.Sprite).getMaterial(0).setProperty("color1",e.r),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color2",e.g),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color3",e.b),t.getComponent(cc.Sprite).getMaterial(0).setProperty("color0",this.lineaNegra)},n([h([cc.Prefab])],e.prototype,"characterPrefab",void 0),n([h(cc.Node)],e.prototype,"preview",void 0),n([h(cc.Material)],e.prototype,"colorizeMaterial",void 0),n([h(cc.Material)],e.prototype,"defaultMaterial",void 0),n([h(cc.JsonAsset)],e.prototype,"colorListJSON",void 0),n([h(cc.JsonAsset)],e.prototype,"paletteJSON",void 0),n([h(cc.Float)],e.prototype,"scaleSelect",void 0),e=n([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../data/ColorList":"ColorList","../data/EnumCategory":"EnumCategory"}],BootController:[function(t,e,o){"use strict";cc._RF.push(e,"4e5ecPD4xxHiYu7CKvEfevI","BootController");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../audio/AudioScene"),a=t("../localization/LocalizationManager"),s=t("../manager/Singleton"),c=t("./TransitionController"),l=cc._decorator,h=l.ccclass,p=l.property,u=0,d=1,g=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.progressBar=null,e.startButton=null,e.prefabTransition=null,e.frames=[],e.TargetLevel="",e.LevelsToLoad=[],e.currentLoadingLevel=u,e.loaded=!1,e.loadedLocalization=!1,e.maxLoadPerLevel=d,e}return i(e,t),e.prototype.onLoad=function(){cc.view.resizeWithBrowserSize(!0),cc.screen.fullScreen()&&cc.screen.exitFullScreen(),cc.view.enableAutoFullScreen(!1),this.audioScene=this.node.getComponent(r.default),this.node.on("loadAudio",this.checkLoadedCompleted,this),this.instance=s.default.GetInstance();c.default.init(this.prefabTransition,this.frames),this.loadLevel(this.LevelsToLoad[this.currentLoadingLevel]),this.maxLoadPerLevel=1/this.LevelsToLoad.length,a.default.instance.loadLocalizationJson(),a.default.instance.on(a.default.KEY_ON_DATA_LOADED,this.loadLocalization,this)},e.prototype.loadLocalization=function(){this.loadedLocalization=!0,this.checkLoadedCompleted()},e.prototype.loadLevel=function(t){var e=this;cc.director.preloadScene(t,function(t,o){e.levelLoading(t,o)},function(t,o){e.levelLoaded(t,o)})},e.prototype.levelLoaded=function(t,e){t&&(console.error("Error "+t.name+" while loading: "+e.name),this.loaded=!1);this.currentLoadingLevel===this.LevelsToLoad.length-1?(this.loaded=!0,this.checkLoadedCompleted()):(this.currentLoadingLevel++,this.loadLevel(this.LevelsToLoad[this.currentLoadingLevel]))},e.prototype.levelLoading=function(t,e){var o=t/e*this.maxLoadPerLevel+this.maxLoadPerLevel*this.currentLoadingLevel;this.progressBar&&(this.progressBar.progress=o)},e.prototype.checkLoadedCompleted=function(){var t=!this.audioScene||this.audioScene.isAllLoaded;this.loaded&&t&&this.loadedLocalization&&(this.startButton.active=!0,this.progressBar.node.active=!1)},e.prototype.boot=function(){this.loaded&&cc.director.loadScene(this.TargetLevel)},n([p(cc.ProgressBar)],e.prototype,"progressBar",void 0),n([p(cc.Node)],e.prototype,"startButton",void 0),n([p(cc.Prefab)],e.prototype,"prefabTransition",void 0),n([p([cc.SpriteFrame])],e.prototype,"frames",void 0),n([p],e.prototype,"TargetLevel",void 0),n([p([cc.String])],e.prototype,"LevelsToLoad",void 0),e=n([h],e)}(cc.Component);o.default=g,cc._RF.pop()},{"../audio/AudioScene":"AudioScene","../localization/LocalizationManager":"LocalizationManager","../manager/Singleton":"Singleton","./TransitionController":"TransitionController"}],ButtonHoverScale:[function(t,e,o){"use strict";cc._RF.push(e,"581abTnZeJE+K8nspWbrzj0","ButtonHoverScale");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=cc._decorator.ccclass;(function(t){t[t.NORMAL=0]="NORMAL",t[t.HOVER=1]="HOVER",t[t.PRESSED=2]="PRESSED",t[t.DISABLED=3]="DISABLED"})(r||(r={}));var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tweenScale=null,e}return i(e,t),e.prototype.start=function(){this.button=this.node.getComponent(cc.Button),this.isOver=!1},e.prototype.onHoverIn=function(){this.tweenScale&&this.tweenScale.stop(),this.tweenScale=cc.tween(this.node).to(.1,{scale:1.2}).start()},e.prototype.onHoverOut=function(){this.tweenScale&&this.tweenScale.stop(),this.tweenScale=cc.tween(this.node).to(.1,{scale:1}).start()},e.prototype.update=function(){var t=this.button._getButtonState();t!==r.HOVER||this.isOver?t!==r.HOVER&&t!==r.PRESSED&&this.isOver&&(this.isOver=!1,this.onHoverOut(),console.log("hoverOut")):(this.isOver=!0,this.onHoverIn(),console.log("hoverIn"))},e=n([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],CanvasResolutionManager:[function(t,e,o){"use strict";cc._RF.push(e,"a310dHZfLdFOKtrbJ+koEy1","CanvasResolutionManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Singleton"),a=t("./ResizeScreenManager"),s=cc._decorator.ccclass,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.canvas=this.node.getComponent(cc.Canvas),r.default.GetInstance().resizeScreenManager.on(a.default.KEY_SIGNAL_RESIZE_PRIORITY,this.onResized,this),this.onResized()},e.prototype.onResized=function(){var t=cc.game.frame;t.clientWidth>t.clientHeight?(this.canvas.designResolution.height=640,this.canvas.designResolution.width=960,this.canvas.fitHeight=!0,this.canvas.fitWidth=!1,console.log("canvas landscape")):(console.log("canvas portrait"),this.canvas.designResolution.height=640,this.canvas.designResolution.width=640,this.canvas.fitHeight=!1,this.canvas.fitWidth=!0)},e.prototype.onDestroy=function(){r.default.GetInstance().resizeScreenManager.off(a.default.KEY_SIGNAL_RESIZE_PRIORITY,this.onResized,this)},e=n([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./ResizeScreenManager":"ResizeScreenManager","./Singleton":"Singleton"}],ChristmasItems:[function(t,e,o){"use strict";cc._RF.push(e,"ed74fZ+W7RKBK0B2Drpm1QK","ChristmasItems");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),Object.defineProperty(e.prototype,"isCristmas",{get:function(){return window.isChristmas},enumerable:!0,configurable:!0}),e.prototype.start=function(){var t=window.isChristmas;this.node.active=t},e=n([r],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],ColorList:[function(t,e,o){"use strict";cc._RF.push(e,"718e4+nynpPAaHk2A2FsAq9","ColorList");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator.ccclass,a=function(){function t(){this.r=cc.Color.WHITE,this.g=cc.Color.WHITE,this.b=cc.Color.WHITE}return t=n([r("Palette")],t)}();o.Palette=a;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name=null,e.palettes=[],e.index=0,e}return i(e,t),e=n([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],EnumCategory:[function(t,e,o){"use strict";cc._RF.push(e,"72e69ikscFKRrRZJv69m8i9","EnumCategory"),Object.defineProperty(o,"__esModule",{value:!0}),o.Category=cc.Enum({bodyType:0,bottom:1,belt:2,cape:3,jacket:4,eyes:5,hat:6,mask:7,mouth:8,nose:9,object:10,gloves:11,chin:12,shoes:13,powers:14,hairTop:15,hairBottom:16,top:17,suit:18,background:19,sticker:20,gif:21}),cc._RF.pop()},{}],ExportManager:[function(t,e,o){"use strict";cc._RF.push(e,"9b354AKoMJHmJNEmbAl6u3K","ExportManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../localization/LocalizationManager"),s=cc._decorator,c=s.ccclass,l=s.property;(function(t){t[t.landscape=0]="landscape",t[t.square=1]="square",t[t.squareAlpha=2]="squareAlpha"})(r=o.TypeMask||(o.TypeMask={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.screenHidder=null,e.camera=null,e.previewCharacter=null,e.previewSticker=null,e.previewBackground=null,e.groupLandscape=null,e.groupSquare=null,e.character=null,e.background=null,e.description=null,e.url=null,e.sticker=null,e.animation=null,e.animationClip=null,e.cullingMask=[-8,-12,-16,-30],e.filename="",e}var o;return i(e,t),o=e,e.prototype.start=function(){this.screenHidder.active=!1,this.textureLandscape=new cc.RenderTexture,this.textureLandscape.initWithSize(640,960,cc.gfx.RB_FMT_S8),this.textureSquare=new cc.RenderTexture,this.textureSquare.initWithSize(590,557,cc.gfx.RB_FMT_S8),this.camera.alignWithScreen=!1,this.camera.ortho=!0,this.camera.targetTexture=this.textureSquare,this.canvasGame=cc.find("Canvas")},e.prototype.exportSquareGIF=function(){this.filename=o.FILE_NAME_PHOTO_ANIMATED,this.groupSquare.active=!0,this.groupLandscape.active=!1,this.character=this.groupSquare.getChildByName("character"),this.sticker=this.groupSquare.getChildByName("sticker"),this.background=this.groupSquare.getChildByName("mask"),this.description=this.groupSquare.getChildByName("description").getComponent(cc.Label),this.url=this.groupSquare.getChildByName("web").getComponent(cc.Label),this.camera.targetTexture=this.textureSquare,this.camera.zoomRatio=this.canvasGame.height/557,this.camera.cullingMask=this.cullingMask[r.square],this.currentMask=r.square,this.exportGIF()},e.prototype.exportGIF=function(){this.initExport(),this.animation=this.background.children[0].getComponent(cc.Animation),this.animationClip=this.animation.getClips()[0],this.gif=new GIF({workerScript:"gif/gif.worker.js",workers:2,quality:1}),this.frames=0,this.totalFrames=this.animationClip.duration*this.animationClip.sample,this.timeFrame=1/this.animationClip.sample,this.captureNextFrame()},e.prototype.captureNextFrame=function(){this.animation.resume(),this.animation.play(this.animationClip.name,this.frames*this.timeFrame),setTimeout(this.captureImage.bind(this),100),this.frames++,this.frames<this.totalFrames&&setTimeout(this.captureNextFrame.bind(this),150)},e.prototype.captureImage=function(){if(this.isSticker=!1,this.animation.pause(),this.createCanvas(),this.gif.addFrame(this.canvas,{delay:1e3/this.animationClip.sample}),this.frames===this.totalFrames){this.animation.stop();var t=this;this.gif.on("finished",function(e){var o=document.createElement("a");o.href=URL.createObjectURL(e),o.setAttribute("target","_blank"),o.download=t.filename,document.body.appendChild(o),o.click(),document.body.removeChild(o),this.scheduleOnce(function(){this.screenHidder.active=!1,this.screenHidder.getComponent(cc.Animation).stop()},1)}.bind(this)),this.gif.render()}},e.prototype.initExport=function(){this.screenHidder.active=!0,this.screenHidder.getComponent(cc.Animation).play("loading Gif"),this.updateMessage(),this.clearSticker(),this.clearCharacter(),this.clearBackground(),this.updateCharacter(),this.updateBackground(),this.updateSticker()},e.prototype.updateMessage=function(){var t=window.message;""===t?this.description.string="":("ar"===a.default.instance.currentLanguage&&(this.description.fontSize=18),this.description.font=a.default.instance.getFont(),this.description.string=a.default.instance.getLocalizationString(t)),this.url.string=window.url},e.prototype.exportSquare=function(){this.filename=o.FILE_NAME_PHOTO,this.groupSquare.active=!0,this.groupLandscape.active=!1,this.character=this.groupSquare.getChildByName("character"),this.sticker=this.groupSquare.getChildByName("sticker"),this.background=this.groupSquare.getChildByName("mask"),this.description=this.groupSquare.getChildByName("description").getComponent(cc.Label),this.url=this.groupSquare.getChildByName("web").getComponent(cc.Label),this.camera.targetTexture=this.textureSquare,this.camera.zoomRatio=this.canvasGame.height/557,this.camera.cullingMask=this.cullingMask[r.square],this.currentMask=r.square,this.isSticker=!1,this.exportPNG()},e.prototype.exportSquareAlpha=function(){this.filename=o.FILE_NAME_STICKER,this.groupSquare.active=!0,this.groupLandscape.active=!1,this.character=this.groupSquare.getChildByName("character"),this.sticker=this.groupSquare.getChildByName("sticker"),this.background=this.groupSquare.getChildByName("mask"),this.description=this.groupSquare.getChildByName("description").getComponent(cc.Label),this.url=this.groupSquare.getChildByName("web").getComponent(cc.Label),this.camera.targetTexture=this.textureSquare,this.camera.zoomRatio=this.canvasGame.height/557,this.camera.cullingMask=this.cullingMask[r.squareAlpha],this.currentMask=r.squareAlpha,this.isSticker=!0,this.exportPNG()},e.prototype.exportLandscape=function(){this.filename=o.FILE_NAME_STORY,this.groupSquare.active=!1,this.groupLandscape.active=!0,this.character=this.groupLandscape.getChildByName("character"),this.sticker=this.groupLandscape.getChildByName("sticker"),this.background=this.groupLandscape.getChildByName("mask"),this.description=this.groupLandscape.getChildByName("description").getComponent(cc.Label),this.url=this.groupSquare.getChildByName("web").getComponent(cc.Label),this.camera.targetTexture=this.textureLandscape,this.camera.zoomRatio=this.canvasGame.height/960,this.camera.cullingMask=this.cullingMask[r.landscape],this.currentMask=r.landscape,this.isSticker=!1,this.exportPNG()},e.prototype.exportPNG=function(){var t=this;if(this.initExport(),this.createCanvas(),window.ENABLE_GAMEBOX)window.parent.saveImageToDevice(this.canvas.toDataURL(),function(){console.log("save sucessfully"),t.scheduleOnce(function(){this.screenHidder.active=!1,this.screenHidder.getComponent(cc.Animation).stop()},2)},function(){console.log("error saving"),t.scheduleOnce(function(){this.screenHidder.active=!1,this.screenHidder.getComponent(cc.Animation).stop()},2)},"PNG");else{var e=document.createElement("a");e.href=this.canvas.toDataURL(),e.setAttribute("target","_blank"),e.download=this.filename,document.body.appendChild(e),e.click(),document.body.removeChild(e),this.scheduleOnce(function(){this.screenHidder.active=!1,this.screenHidder.getComponent(cc.Animation).stop()},2)}},e.prototype.createCanvas=function(){var t=this.camera.targetTexture.width,e=this.camera.targetTexture.height;this.canvas=document.createElement("canvas"),this.canvas.width=t,this.canvas.height=e;var o=this.canvas.getContext("2d");this.camera.render();for(var i=this.camera.targetTexture.readPixels(),n=4*t,r=0;r<e;r++){for(var a=e-1-r,s=o.createImageData(t,1),c=a*t*4,l=0;l<n;l++)0!==i[c+l]&&(0!==l&&l%4==3&&(this.isSticker?r>88&&r<411&&l-4>0&&l+4<n&&i[c+l-4]>100&&i[c+l+4]>100&&(i[c+l]=255):i[c+l]=255),s.data[l]=i[c+l]);o.putImageData(s,0,r)}return this.canvas},e.prototype.updateCharacter=function(){for(var t,e=0,o=this.previewCharacter.children.length;e<o;e++)(t=cc.instantiate(this.previewCharacter.children[e])).group=this.character.group,this.character.addChild(t)},e.prototype.clearCharacter=function(){this.character.destroyAllChildren(),this.character.removeAllChildren()},e.prototype.setPrefabBackground=function(t){this.prefabBackGround=t},e.prototype.updateBackground=function(){var t;(t=cc.instantiate(this.prefabBackGround)).group=this.background.group,this.background.addChild(t),this.background.children[0].getComponent(cc.Animation).stop(),this.background.children[0].scale=.9},e.prototype.clearBackground=function(){this.background.destroyAllChildren(),this.background.removeAllChildren()},e.prototype.updateSticker=function(){for(var t,e=0,o=this.previewSticker.children.length;e<o;e++)this.previewSticker.children[e].active&&((t=cc.instantiate(this.previewSticker.children[e])).group=this.sticker.group,this.sticker.addChild(t))},e.prototype.clearSticker=function(){this.sticker.destroyAllChildren(),this.sticker.removeAllChildren()},e.FILE_NAME_PHOTO=window.FILE_NAME_PHOTO,e.FILE_NAME_PHOTO_ANIMATED=window.FILE_NAME_PHOTO_ANIMATED,e.FILE_NAME_STORY=window.FILE_NAME_STORY,e.FILE_NAME_STICKER=window.FILE_NAME_STICKER,n([l(cc.Node)],e.prototype,"screenHidder",void 0),n([l(cc.Camera)],e.prototype,"camera",void 0),n([l(cc.Node)],e.prototype,"previewCharacter",void 0),n([l(cc.Node)],e.prototype,"previewSticker",void 0),n([l(cc.Node)],e.prototype,"previewBackground",void 0),n([l(cc.Node)],e.prototype,"groupLandscape",void 0),n([l(cc.Node)],e.prototype,"groupSquare",void 0),e=o=n([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../localization/LocalizationManager":"LocalizationManager"}],FixShader:[function(t,e,o){"use strict";cc._RF.push(e,"c921czDsNlBJYd1SOL3foAv","FixShader");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.preview=null,e.frameAlpha=null,e}return i(e,t),e.prototype.start=function(){var t,e=this,o=0;this.preview.children.slice().forEach(function(i){t=new cc.Node("ignore me"),t.addComponent(cc.Sprite).spriteFrame=e.frameAlpha,i.parent.addChild(t),i.zIndex=o,o++,t.zIndex=o,o++})},n([s(cc.Node)],e.prototype,"preview",void 0),n([s(cc.SpriteFrame)],e.prototype,"frameAlpha",void 0),e=n([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FocusScreenManager:[function(t,e,o){"use strict";cc._RF.push(e,"259f63rZFhIdaMSIhF7yDGn","FocusScreenManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){var e=t.call(this)||this;return e.isFocus=!0,cc.game.on(cc.game.EVENT_HIDE,e.onBlur,e),cc.game.on(cc.game.EVENT_SHOW,e.onFocus,e),window.onfocus=e.onFocus.bind(e),window.onclick=e.onFocus.bind(e),window.onblur=e.onBlur.bind(e),e}return i(e,t),e.prototype.onBlur=function(){this.isFocus&&(this.isFocus=!1,this.emit(e.KEY_SIGNAL_BLUR))},e.prototype.onFocus=function(){this.isFocus||(this.isFocus=!0,this.emit(e.KEY_SIGNAL_FOCUS))},e.KEY_SIGNAL_FOCUS="onFocus",e.KEY_SIGNAL_BLUR="onBlur",e}(cc.Node);o.default=n,cc._RF.pop()},{}],LoaderCSS:[function(t,e,o){"use strict";cc._RF.push(e,"c20b0RsdTlNb7LjCCXEgBHS","LoaderCSS"),Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){this.gameDiv=document.body,this.addCSS(),this.addDiv(),this.hide()}return t.prototype.addCSS=function(){var t=document.createElement("style");t.innerHTML="\n        .lds-facebook {\n          display: inline-block;\n          position: absolute;\n          width: 0px;\n          height: 0px;\n        }\n        .lds-facebook div {\n          display: inline-block;\n          position: absolute;\n          left: 0px;\n          width: 16px;\n          background: #fff;\n          animation: lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;\n        }\n        .lds-facebook div:nth-child(1) {\n          left: -8px;\n          animation-delay: -0.24s;\n        }\n        .lds-facebook div:nth-child(2) {\n          left: -35px;\n          animation-delay: -0.12s;\n        }\n        .lds-facebook div:nth-child(3) {\n          left: 19px;\n          animation-delay: 0;\n        }\n        @keyframes lds-facebook {\n          0% {\n            top: 8px;\n            height: 64px;\n          }\n          50%, 100% {\n            top: 24px;\n            height: 32px;\n          }\n        }       \n        ",document.head.appendChild(t)},t.prototype.addDiv=function(){this.divLoading=document.createElement("Div"),this.divLoading.style.position="absolute",this.divLoading.style.right="50vw",this.divLoading.style.bottom="20vh",this.divLoading.innerHTML='<div class="lds-facebook"><div></div><div></div><div></div></div>',this.gameDiv.appendChild(this.divLoading)},t.prototype.show=function(){this.divLoading.style.display="block"},t.prototype.hide=function(){this.divLoading.style.display="none"},t}();o.default=i,cc._RF.pop()},{}],LocalizationConfig:[function(t,e,o){"use strict";cc._RF.push(e,"2c14864kfJLbJXNuELygFXE","LocalizationConfig");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LocalizationManager"),a=t("./LocalizationManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.localesFonts=[],e}return i(e,t),e.prototype.onLoad=function(){r.default.instance.setFontLanguage(this.localesFonts)},n([l([a.FontLanguage])],e.prototype,"localesFonts",void 0),e=n([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"./LocalizationManager":"LocalizationManager"}],LocalizationImageComponent:[function(t,e,o){"use strict";cc._RF.push(e,"7c3f5Hgf95AUbBfjSV59/Hv","LocalizationImageComponent");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LocalizationManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spriteComponent=null,e.key="",e}return i(e,t),e.prototype.onLoad=function(){this.spriteComponent||(this.spriteComponent=this.node.getComponent(cc.Sprite)),this.localizationManager=r.default.instance,this.localizationItem={key:this.key,target:this.spriteComponent}},e.prototype.onEnable=function(){this.localizationManager.subscribeItem(this.localizationItem)},e.prototype.onDisable=function(){this.localizationManager.unsubscribeItem(this.localizationItem)},n([c(cc.Sprite)],e.prototype,"spriteComponent",void 0),n([c(cc.String)],e.prototype,"key",void 0),e=n([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./LocalizationManager":"LocalizationManager"}],LocalizationLabelComponent:[function(t,e,o){"use strict";cc._RF.push(e,"c9d2djzoGZC3IpuuA2U916H","LocalizationLabelComponent");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LocalizationManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelComponent=null,e.key="",e.checkSwapFont=!0,e}return i(e,t),e.prototype.onLoad=function(){this.labelComponent||(this.labelComponent=this.node.getComponent(cc.Label)),this.originalFont=this.labelComponent.font,this.localizationManager=r.default.instance,this.localizationItem={key:this.key,target:this.labelComponent},this.swapFont()},e.prototype.onEnable=function(){this.localizationManager.subscribeItem(this.localizationItem),this.localizationManager.on(r.default.KEY_ON_CHANGE_LANGUAGE,this.swapFont,this)},e.prototype.onDisable=function(){this.localizationManager.unsubscribeItem(this.localizationItem),this.localizationManager.off(r.default.KEY_ON_CHANGE_LANGUAGE,this.swapFont,this)},e.prototype.swapFont=function(){var t;(t=this.localizationManager.getFont())&&this.checkSwapFont?this.labelComponent.font=t:this.labelComponent.font=this.originalFont},n([c(cc.Label)],e.prototype,"labelComponent",void 0),n([c(cc.String)],e.prototype,"key",void 0),n([c(cc.Boolean)],e.prototype,"checkSwapFont",void 0),e=n([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./LocalizationManager":"LocalizationManager"}],LocalizationManager:[function(t,e,o){"use strict";cc._RF.push(e,"d5b4bzN1u1HAIxKnK+uyMMZ","LocalizationManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=function(){function t(){this.font=null,this.languages=[]}return n([s(cc.Font)],t.prototype,"font",void 0),n([s([cc.String])],t.prototype,"languages",void 0),t=n([a("FontLanguage")],t)}();o.FontLanguage=c;var l=function(t){function e(){var e=t.call(this)||this;return e.defaultLanguage="en",e.path="localization/",e.fontLanguages=[],e.localeAssetCache={},e.localizationItems=[],e.currentLanguage="en",e.localizationData=null,e.localizationImageData=null,o._instance=e,cc.game.addPersistRootNode(e),window.localizationCode?e.currentLanguage=window.localizationCode:e.currentLanguage=e.defaultLanguage,e}var o;return i(e,t),o=e,Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new o),this._instance},enumerable:!0,configurable:!0}),e.init=function(){return o.instance},e.prototype.setFontLanguage=function(t){void 0===t&&(t=[]),this.fontLanguages=t},e.prototype.loadLocalizationJson=function(){this.emit(o.KEY_ON_INIT),cc.loader.load(this.path+"localization.json",this.onCompletedLoadLocalization.bind(this)),cc.loader.load(this.path+"localizationImage.json",this.onCompletedLoadLocalizationImage.bind(this))},e.prototype.onCompletedLoadLocalization=function(t,e){t?console.error(t):(e instanceof cc.JsonAsset?this.localizationData=e.json:this.localizationData=e,this.checkCompletedLoad())},e.prototype.onCompletedLoadLocalizationImage=function(t,e){t?console.error(t):(e instanceof cc.JsonAsset?this.localizationImageData=e.json:this.localizationImageData=e,this.checkCompletedLoad())},e.prototype.checkCompletedLoad=function(){null!==this.localizationData&&null!==this.localizationImageData&&(this.emit(o.KEY_ON_DATA_LOADED),this.changeLocale())},e.prototype.changeLanguage=function(t){this.currentLanguage=t,null!==this.localizationData&&null!==this.localizationImageData&&this.changeLocale()},e.prototype.changeLocale=function(){this.localeAssetCache={},this.imagesLoaded=0,this.localizationImageData.keys.length>0?this.preloadAssets():this.checkCompletedLoadAssets()},e.prototype.preloadAssets=function(){if(this.localizationImageData)for(var t=0;t<this.localizationImageData.keys.length;t++)this.loadLocalizationImage(this.localizationImageData.keys[t])},e.prototype.loadLocalizationImage=function(t){this.localeAssetCache[t]||cc.loader.load(this.path+"images/"+this.currentLanguage+"/"+t+".png",this.onLoadedLocalizationImage.bind(this,t))},e.prototype.onLoadedLocalizationImage=function(t,e,o){if(e)console.error(e);else{var i=this.transformSpriteFrame(o);this.localeAssetCache[t]=i,this.imagesLoaded++,this.checkCompletedLoadAssets()}},e.prototype.checkCompletedLoadAssets=function(){this.imagesLoaded>=this.localizationImageData.keys.length&&(this.updateAllItems(),this.emit(o.KEY_ON_CHANGE_LANGUAGE))},e.prototype.transformSpriteFrame=function(t){return t?(t instanceof HTMLImageElement?(e=new cc.Texture2D).initWithElement(t):e=t,new cc.SpriteFrame(e)):null;var e},e.prototype.updateAllItems=function(){this.localizationItems.forEach(this.updateItem.bind(this))},e.prototype.updateItem=function(t){if(t.target instanceof cc.Sprite){var e=this.localeAssetCache[t.key];t.target.spriteFrame=e}else if(this.localizationData){var o=this.localizationData[t.key][this.currentLanguage];t.target.string=o}else t.target.string=t.key},e.prototype.subscribeItem=function(t){-1===this.localizationItems.indexOf(t)&&(this.localizationItems.push(t),this.updateItem(t))},e.prototype.unsubscribeItem=function(t){var e=this.localizationItems.indexOf(t);e>=0&&this.localizationItems.splice(e,1)},e.prototype.getFont=function(){for(var t=0;t<this.fontLanguages.length;++t){var e=this.fontLanguages[t];if(-1!==e.languages.indexOf(this.currentLanguage))return e.font}return null},e.prototype.getLocalizationString=function(t){return this.localizationData?this.localizationData[t][this.currentLanguage]:t},e.KEY_ON_INIT="LocalizationManager_init",e.KEY_ON_DATA_LOADED="LocalizationManager_loaded",e.KEY_ON_CHANGE_LANGUAGE="LocalizationManager_change",e._instance=null,e=o=n([a],e)}(cc.Node);o.default=l,cc._RF.pop()},{}],MainmenuController:[function(t,e,o){"use strict";cc._RF.push(e,"825c1V/vmFARKuz9unN+MZV","MainmenuController");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../audio/AudioScene"),a=t("../localization/LocalizationManager"),s=t("../manager/Singleton"),c=t("./TransitionController"),l=cc._decorator,h=l.ccclass,p=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.playButton=null,e.textInfo=null,e.audioManager=null,e}return i(e,t),e.prototype.start=function(){this.audioManager=s.default.GetInstance().audioManager,this.audioManager.playMusic(r.HowlsKey.musicMenu,0,!0);var t=window.message;""===t?this.textInfo.string="":("ar"===a.default.instance.currentLanguage&&(this.textInfo.fontSize=18),this.textInfo.font=a.default.instance.getFont(),this.textInfo.string=a.default.instance.getLocalizationString(t))},e.prototype.goToMain=function(){this.audioManager.playSfx(r.SFXKey.button_menu),this.playButton.interactable=!1,c.default.instance.showTransition(this.onCompletedTransition.bind(this))},e.prototype.onCompletedTransition=function(){cc.director.loadScene("main")},n([p(cc.Button)],e.prototype,"playButton",void 0),n([p(cc.Label)],e.prototype,"textInfo",void 0),e=n([h],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../audio/AudioScene":"AudioScene","../localization/LocalizationManager":"LocalizationManager","../manager/Singleton":"Singleton","./TransitionController":"TransitionController"}],ModifyWidget:[function(t,e,o){"use strict";cc._RF.push(e,"d3ec0J3csNCw4HuwSC7zO9Y","ModifyWidget");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,c=r.executeInEditMode,l=function(){function t(){this.bottom=0,this.top=0,this.left=0,this.right=0,this.isAlignBottom=!1,this.isAlignLeft=!1,this.isAlignRight=!1,this.isAlignTop=!1,this.isAlignHorizontalCenter=!1,this.isAlignVerticalCenter=!1,this.horizontalCenter=0,this.verticalCenter=0}return n([s(cc.Float)],t.prototype,"bottom",void 0),n([s(cc.Float)],t.prototype,"top",void 0),n([s(cc.Float)],t.prototype,"left",void 0),n([s(cc.Float)],t.prototype,"right",void 0),n([s(cc.Float)],t.prototype,"isAlignBottom",void 0),n([s(cc.Float)],t.prototype,"isAlignLeft",void 0),n([s(cc.Float)],t.prototype,"isAlignRight",void 0),n([s(cc.Float)],t.prototype,"isAlignTop",void 0),n([s(cc.Float)],t.prototype,"isAlignHorizontalCenter",void 0),n([s(cc.Float)],t.prototype,"isAlignVerticalCenter",void 0),n([s(cc.Float)],t.prototype,"horizontalCenter",void 0),n([s(cc.Float)],t.prototype,"verticalCenter",void 0),t=n([a("widgetInfo")],t)}();o.WidgetInfo=l;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._landscape=!0,e._save=!1,e.widget=null,e.landscapeWidget=new l,e.portraitWidget=new l,e}return i(e,t),Object.defineProperty(e.prototype,"landscape",{get:function(){return this._landscape},set:function(t){cc.log("change"),this._landscape=t,this.fixPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"save",{get:function(){return this._save},set:function(t){cc.log("save"),this.saveWidget(!this._landscape)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.widget=this.getComponent(cc.Widget)},e.prototype.start=function(){this.fixPositionOnPlay()},e.prototype.fixPositionOnPlay=function(){cc.view.getVisibleSize().width>cc.view.getVisibleSize().height?this.loadWidget(this.landscapeWidget):this.loadWidget(this.portraitWidget)},e.prototype.saveWidget=function(t){t?(this.portraitWidget.bottom=this.widget.bottom,this.portraitWidget.top=this.widget.top,this.portraitWidget.left=this.widget.left,this.portraitWidget.right=this.widget.right,this.portraitWidget.isAlignBottom=this.widget.isAlignBottom,this.portraitWidget.isAlignLeft=this.widget.isAlignLeft,this.portraitWidget.isAlignRight=this.widget.isAlignRight,this.portraitWidget.isAlignTop=this.widget.isAlignTop,this.portraitWidget.isAlignHorizontalCenter=this.widget.isAlignHorizontalCenter,this.portraitWidget.isAlignVerticalCenter=this.widget.isAlignVerticalCenter,this.portraitWidget.verticalCenter=this.widget.verticalCenter,this.portraitWidget.horizontalCenter=this.widget.horizontalCenter):(this.landscapeWidget.bottom=this.widget.bottom,this.landscapeWidget.top=this.widget.top,this.landscapeWidget.left=this.widget.left,this.landscapeWidget.right=this.widget.right,this.landscapeWidget.isAlignBottom=this.widget.isAlignBottom,this.landscapeWidget.isAlignLeft=this.widget.isAlignLeft,this.landscapeWidget.isAlignRight=this.widget.isAlignRight,this.landscapeWidget.isAlignTop=this.widget.isAlignTop,this.landscapeWidget.isAlignHorizontalCenter=this.widget.isAlignHorizontalCenter,this.landscapeWidget.isAlignVerticalCenter=this.widget.isAlignVerticalCenter,this.landscapeWidget.verticalCenter=this.widget.verticalCenter,this.landscapeWidget.horizontalCenter=this.widget.horizontalCenter)},e.prototype.loadWidget=function(t){console.log("widget"),this.widget.isAlignBottom=t.isAlignBottom,this.widget.isAlignLeft=t.isAlignLeft,this.widget.isAlignRight=t.isAlignRight,this.widget.isAlignTop=t.isAlignTop,this.widget.isAlignHorizontalCenter=t.isAlignHorizontalCenter,this.widget.isAlignVerticalCenter=t.isAlignVerticalCenter,this.widget.verticalCenter=t.verticalCenter,this.widget.horizontalCenter=t.horizontalCenter,this.widget.top=t.top,this.widget.left=t.left,this.widget.right=t.right,this.widget.bottom=t.bottom},e.prototype.fixPosition=function(){this._landscape?this.loadWidget(this.landscapeWidget):this.loadWidget(this.portraitWidget)},n([s],e.prototype,"_landscape",void 0),n([s],e.prototype,"landscape",null),n([s],e.prototype,"_save",void 0),n([s],e.prototype,"save",null),n([s(cc.Widget)],e.prototype,"widget",void 0),n([s(l)],e.prototype,"landscapeWidget",void 0),n([s(l)],e.prototype,"portraitWidget",void 0),e=n([a,c],e)}(cc.Component);o.default=h,cc._RF.pop()},{}],Orientation:[function(t,e,o){"use strict";cc._RF.push(e,"700d4geMjdKI7YCK9GL7Ljp","Orientation");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../manager/Singleton"),a=t("../manager/ResizeScreenManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=s.executeInEditMode,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canvas=null,e._landscape=!0,e}return i(e,t),Object.defineProperty(e.prototype,"landscape",{get:function(){return this._landscape},set:function(t){cc.log("change"),this._landscape=t,this.setCanvas()},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){cc.log("load"),this.canvas=this.node.getComponent(cc.Canvas),r.default.GetInstance().resizeScreenManager.on(a.default.KEY_SIGNAL_RESIZE_PRIORITY,this.snapBorders,this)},e.prototype.start=function(){this.snapBorders()},e.prototype.snapBorders=function(){cc.view.getVisibleSize().width<=640&&this.canvas.fitHeight&&(this.canvas.fitWidth=!0,this.canvas.fitHeight=!1,this.canvas.designResolution={width:640,height:960},console.log(this.canvas.designResolution.width+"  and  "+this.canvas.designResolution.height)),cc.view.getVisibleSize().height<=640&&this.canvas.fitWidth&&(this.canvas.fitWidth=!1,this.canvas.fitHeight=!0,this.canvas.designResolution={width:960,height:640},console.log(this.canvas.designResolution.width+"  and  "+this.canvas.designResolution.height))},e.prototype.setCanvas=function(){cc.log("set canvas"),this._landscape?(this.canvas.designResolution={width:960,height:640},this.canvas.fitHeight=!0,this.canvas.fitWidth=!1):(this.canvas.designResolution={width:640,height:960},this.canvas.fitHeight=!1,this.canvas.fitWidth=!0)},e.prototype.onDestroy=function(){r.default.GetInstance().resizeScreenManager.off(a.default.KEY_SIGNAL_RESIZE_PRIORITY,this.snapBorders,this)},n([l(cc.Canvas)],e.prototype,"canvas",void 0),n([l],e.prototype,"_landscape",void 0),n([l],e.prototype,"landscape",null),e=n([c,h],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../manager/ResizeScreenManager":"ResizeScreenManager","../manager/Singleton":"Singleton"}],ResizeScreenManager:[function(t,e,o){"use strict";cc._RF.push(e,"b09cehEQURADZc+8YPGzD+w","ResizeScreenManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=t("../utils/Utils"),r=function(t){function e(){var e=t.call(this)||this;return e.initListener(),e}return i(e,t),e.prototype.initListener=function(){n.isMobile()?window.addEventListener("resize",this.onResized.bind(this)):cc.view.on("canvas-resize",this.onResized,this)},e.prototype.onResized=function(){this.emit(e.KEY_SIGNAL_RESIZE_PRIORITY),setTimeout(this.sendSignal.bind(this),1)},e.prototype.sendSignal=function(){this.emit(e.KEY_SIGNAL_RESIZE)},e.KEY_SIGNAL_RESIZE="resize",e.KEY_SIGNAL_RESIZE_PRIORITY="resizePriority",e}(cc.Node);o.default=r,cc._RF.pop()},{"../utils/Utils":"Utils"}],RotateScreenManager:[function(t,e,o){"use strict";cc._RF.push(e,"a7531td6blA6rNige5gv8Re","RotateScreenManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n,r=t("../utils/Utils");(function(t){t[t.css=0]="css",t[t.scene=1]="scene"})(n||(n={}));var a=function(t){function e(){var e=t.call(this)||this;return e.percentSizeImage=60,e.landscapeLocked=!1,e.portraitLocked=!0,e.idContainerRotation="orientation-screen",e.type=n.css,e.correctOrientation=!0,r.isMobile()&&(e.addCSS(),e.addDiv(),e.initListener()),e}return i(e,t),e.prototype.addCSS=function(){var t=document.createElement("style");t.innerHTML="#orientation-screen {\n            margin: 0 auto;\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-image: url(rotate.png);\n            background-repeat: no-repeat;\n            background-position: center;\n            background-color: rgb(0, 0, 0);\n            z-index: 999;\n            display: none;\n        }",document.head.appendChild(t)},e.prototype.addDiv=function(){this.divRotate=document.createElement("Div"),this.divRotate.id=this.idContainerRotation,this.divRotate.style.display="none",this.landscapeLocked&&(this.divRotate.style.backgroundSize=this.percentSizeImage+"vw"),this.portraitLocked&&(this.divRotate.style.backgroundSize=this.percentSizeImage+"vh"),document.body.appendChild(this.divRotate)},e.prototype.initListener=function(){window.addEventListener("resize",this.checkOrientation.bind(this)),this.checkOrientation()},e.prototype.checkOrientation=function(){var t=cc.game.frame,e=t.clientWidth,o=t.clientHeight;this.landscapeLocked?e>o?this.handleCorrect():this.handleIncorrect():this.portraitLocked&&(e<o?this.handleCorrect():this.handleIncorrect())},e.prototype.handleCorrect=function(){this.divRotate&&this.type===n.css&&(this.divRotate.style.display="none",this.correctOrientation||(this.correctOrientation=!0,this.emit(e.KEY_SIGNAL_CORRECT)))},e.prototype.handleIncorrect=function(){this.divRotate&&this.type===n.css&&(this.divRotate.style.display="block",this.correctOrientation&&(this.correctOrientation=!1,this.emit(e.KEY_SIGNAL_INCORRECT)))},e.KEY_SIGNAL_CORRECT="handleCorrect",e.KEY_SIGNAL_INCORRECT="handleIncorrect",e}(cc.Node);o.default=a,cc._RF.pop()},{"../utils/Utils":"Utils"}],Scalable:[function(t,e,o){"use strict";cc._RF.push(e,"3771beDGCNHqbnP2NjoZnAY","Scalable");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../manager/Singleton"),a=t("../manager/ResizeScreenManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fitHeight=!1,e.fitWidth=!1,e.heightResolution=640,e.widthResolution=960,e.maxScale=1.2,e.minScale=.8,e}return i(e,t),e.prototype.start=function(){r.default.GetInstance().resizeScreenManager.on(a.default.KEY_SIGNAL_RESIZE_PRIORITY,this.updateScale,this),this.updateScale()},e.prototype.updateScale=function(){var t;this.fitHeight&&(t=(t=(t=cc.view.getVisibleSize().height/this.heightResolution)>this.maxScale?this.maxScale:t)<this.minScale?this.minScale:t,this.node.scaleX=t,this.node.scaleY=t);this.fitWidth&&(t=(t=(t=cc.view.getVisibleSize().width/this.widthResolution)>this.maxScale?this.maxScale:t)<this.minScale?this.minScale:t,this.node.scaleX=t,this.node.scaleY=t)},n([l],e.prototype,"fitHeight",void 0),n([l],e.prototype,"fitWidth",void 0),n([l],e.prototype,"heightResolution",void 0),n([l],e.prototype,"widthResolution",void 0),n([l],e.prototype,"maxScale",void 0),n([l],e.prototype,"minScale",void 0),e=n([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manager/ResizeScreenManager":"ResizeScreenManager","../manager/Singleton":"Singleton"}],ShownHide:[function(t,e,o){"use strict";cc._RF.push(e,"0898dJtIM9Kr79t4b2b9BzF","ShownHide");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../manager/Singleton"),a=t("../manager/ResizeScreenManager"),s=cc._decorator,c=s.ccclass,l=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.landscape=null,e.portrait=null,e}return i(e,t),e.prototype.start=function(){r.default.GetInstance().resizeScreenManager.on(a.default.KEY_SIGNAL_RESIZE,this.doYourThing,this),this.doYourThing()},e.prototype.doYourThing=function(){cc.view.getVisibleSize().width>cc.view.getVisibleSize().height?(this.landscape.active=!0,this.portrait.active=!1):(this.landscape.active=!1,this.portrait.active=!0)},n([l(cc.Node)],e.prototype,"landscape",void 0),n([l(cc.Node)],e.prototype,"portrait",void 0),e=n([c],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../manager/ResizeScreenManager":"ResizeScreenManager","../manager/Singleton":"Singleton"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"23daa9dfWhB4KvaivFXJjsx","Singleton");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./ResizeScreenManager"),a=t("./RotateScreenManager"),s=t("../audio/AudioManager"),c=t("./FocusScreenManager"),l=cc._decorator.ccclass,h=function(t){function e(){var e=t.call(this)||this;return e.isPause=!1,e.resizeScreenManager=new r.default,e.resizeScreenManager.on(r.default.KEY_SIGNAL_RESIZE,e.onResized,e),e.rotateScreen=new a.default,e.rotateScreen.on(a.default.KEY_SIGNAL_CORRECT,e.onChangeScreen,e),e.rotateScreen.on(a.default.KEY_SIGNAL_INCORRECT,e.onChangeScreen,e),e.focusManager=new c.default,e.focusManager.on(c.default.KEY_SIGNAL_BLUR,e.onChangeScreen,e),e.focusManager.on(c.default.KEY_SIGNAL_FOCUS,e.onChangeScreen,e),e.audioManager=new s.default,e}var o;return i(e,t),o=e,e.GetInstance=function(){return this.instance||(this.instance=new o),this.instance},e.prototype.onResized=function(){this.emit(r.default.KEY_SIGNAL_RESIZE)},e.prototype.onChangeScreen=function(){this.rotateScreen.correctOrientation&&this.focusManager.isFocus?this.resumeGame():this.pauseGame()},e.prototype.pauseGame=function(){this.isPause||(cc.game.pause(),this.audioManager.pause(),this.isPause=!0)},e.prototype.resumeGame=function(){this.isPause&&(this.rotateScreen.correctOrientation&&cc.game.resume(),this.audioManager.resume(),this.isPause=!1)},e.prototype.switchAudioState=function(){this.audioManager.enableAudio?this.audioManager.disableAll():this.audioManager.enableAll()},e.instance=null,e=o=n([l],e)}(cc.Node);o.default=h,cc._RF.pop()},{"../audio/AudioManager":"AudioManager","./FocusScreenManager":"FocusScreenManager","./ResizeScreenManager":"ResizeScreenManager","./RotateScreenManager":"RotateScreenManager"}],StickerManager:[function(t,e,o){"use strict";cc._RF.push(e,"6c2f8M6vlFN4ZNsvqhpbuXL","StickerManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LocalizationManager"),a=cc._decorator,s=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.key="",e.labelUp=null,e.labelDown=null,e.leftDecoration=null,e.rightDecoration=null,e.usedTexture=!1,e.sizeTexture=0,e.addExtra=!0,e.extraWidth=10,e.extraHeight=5,e.background=null,e.extraWidthBackground=0,e.fontLanguages=[],e}return i(e,t),e.prototype.start=function(){this.setSticker(),this.scheduleOnce(this.updateFont.bind(this),.01)},e.prototype.setSticker=function(){var t=r.default.instance.getLocalizationString(this.key);"sticker_text06"===this.key&&"ar"===r.default.instance.currentLanguage&&(t=t.replace(/!/g,"")),"sticker_text09"===this.key&&"ar"===r.default.instance.currentLanguage&&(t=t.replace(/\./g,""));var e=t.split("\n"),o=this.getFont();console.log("font: "+o),this.labelUp.string=e[0],null!==o&&(this.labelUp.font=o,this.labelDown&&(this.labelDown.font=o)),e[1]?this.labelDown.string=e[1]:this.labelDown&&(this.labelDown.node.active=!1)},e.prototype.updateFont=function(){if(this.usedTexture){var t;t=[this.labelUp.node.width/this.sizeTexture,this.labelUp.node.height/this.sizeTexture],this.labelUp.getMaterial(0).setProperty("overlayTexture0Tiling",t),this.labelDown&&this.labelDown.node.active&&this.labelDown.getMaterial(0).setProperty("overlayTexture0Tiling",t)}if(this.labelDown&&this.labelDown.node.active){var e=void 0;e=this.labelUp.node.width>this.labelDown.node.width?this.labelUp.node.width:this.labelDown.node.width,this.node.width=e,this.addExtra&&(this.labelUp.overflow=cc.Label.Overflow.CLAMP,this.labelUp.node.width+=this.extraWidth,this.labelUp.node.height+=this.extraHeight,this.labelDown.overflow=cc.Label.Overflow.CLAMP,this.labelDown.node.height+=this.extraHeight,this.labelDown.node.width+=this.extraWidth),this.background&&(this.background.node.width=e+this.extraWidthBackground)}else{e=this.labelUp.node.width;this.node.width=e,this.labelUp.overflow=cc.Label.Overflow.CLAMP,this.labelUp.node.width+=this.extraWidth,this.labelUp.node.height+=this.extraHeight,this.background&&(this.background.node.width=e+this.extraWidthBackground)}this.customFix(),this.leftDecoration&&this.leftDecoration.updateAlignment(),this.rightDecoration&&this.rightDecoration.updateAlignment()},e.prototype.customFix=function(){"sticker_text08"===this.key&&"ar"===r.default.instance.currentLanguage?(this.labelUp.node.width=200,this.labelDown.node.width=90):"xmas_text00"===this.key&&"ar"===r.default.instance.currentLanguage?(this.labelUp.fontSize=22,this.labelDown.fontSize=22,this.labelUp.node.parent.y=1.5,this.labelUp.node.width=75.69,this.labelDown.node.width=111.02,this.labelUp.node.height=29.72,this.labelDown.node.height=32):"sticker_text03"===this.key&&-1!==["cs","es","fr","nl","pl","pt","ro"].indexOf(r.default.instance.currentLanguage)&&(this.labelUp.fontSize=25,this.node.width=400,this.leftDecoration.updateAlignment(),this.rightDecoration.updateAlignment())},e.prototype.getFont=function(){for(var t=0;t<this.fontLanguages.length;++t){var e=this.fontLanguages[t];if(-1!==e.languages.indexOf(r.default.instance.currentLanguage))return e.font}return null},n([c],e.prototype,"key",void 0),n([c(cc.Label)],e.prototype,"labelUp",void 0),n([c(cc.Label)],e.prototype,"labelDown",void 0),n([c(cc.Widget)],e.prototype,"leftDecoration",void 0),n([c(cc.Widget)],e.prototype,"rightDecoration",void 0),n([c],e.prototype,"usedTexture",void 0),n([c],e.prototype,"sizeTexture",void 0),n([c],e.prototype,"addExtra",void 0),n([c],e.prototype,"extraWidth",void 0),n([c],e.prototype,"extraHeight",void 0),n([c(cc.Sprite)],e.prototype,"background",void 0),n([c],e.prototype,"extraWidthBackground",void 0),n([c([r.FontLanguage])],e.prototype,"fontLanguages",void 0),e=n([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./LocalizationManager":"LocalizationManager"}],TransitionController:[function(t,e,o){"use strict";cc._RF.push(e,"e7c09aiKuFDS4FYi/FrOXHP","TransitionController");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}();Object.defineProperty(o,"__esModule",{value:!0});var n=t("../utils/Utils"),r=t("./LoaderCSS"),a=function(t){function e(){var o=t.call(this)||this;return o.timeExtra=4e3,o.currentFrames=[],e._instance=o,cc.game.addPersistRootNode(o),o.initTransition(),o}return i(e,t),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!0,configurable:!0}),e.init=function(t,o){return this.prefab=t,this.spritesFrame=o,e.instance},e.prototype.initTransition=function(){var t=this.addComponent(cc.Widget);t.left=0,t.right=0,t.top=0,t.bottom=0,t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignTop=!0,t.isAlignBottom=!0,this.nodeTransition=cc.instantiate(e.prefab),this.addChild(this.nodeTransition),this.loaderCSS=new r.default,this.loaderCSS.hide(),this.nodeTransition.active=!1,this.animation=this.nodeTransition.getComponent(cc.Animation),this.sprite=this.nodeTransition.getChildByName("character").children[0].getComponent(cc.Sprite)},e.prototype.showTransition=function(t){var o=this;console.log("tra in"),this.nodeTransition.children[0].getComponent(cc.Widget).updateAlignment(),this.currentFrames=n.shuffleArray(e.spritesFrame).slice(),this.indexFrame=0,this.sprite.spriteFrame=this.currentFrames[this.indexFrame],this.nodeTransition.active=!0,this.animation.play("IN_transition"),this.animation.once("finished",function(){o.initLoop(),o.loaderCSS.show(),setTimeout(function(){t&&t()}.bind(o),o.timeExtra)},this)},e.prototype.initLoop=function(){this.loopInterval=setInterval(this.loopChange.bind(this),200)},e.prototype.loopChange=function(){this.indexFrame++,this.indexFrame>=this.currentFrames.length&&(this.indexFrame=0),this.sprite.spriteFrame=this.currentFrames[this.indexFrame]},e.prototype.endLoop=function(){clearInterval(this.loopInterval)},e.prototype.hideTransition=function(t){var e=this;console.log("tra out"),this.endLoop(),this.animation.play("OUT_transition"),this.loaderCSS.hide(),this.animation.once("finished",function(){t&&t(),e.nodeTransition.active=!1})},e.prototype.showLoader=function(){this.nodeTransition.active=!0,this.loaderCSS.show()},e.prototype.hideLoader=function(){this.nodeTransition.active=!1,this.loaderCSS.hide()},e._instance=null,e.prefab=null,e.spritesFrame=[],e}(cc.Node);o.default=a,cc._RF.pop()},{"../utils/Utils":"Utils","./LoaderCSS":"LoaderCSS"}],UIElementsManager:[function(t,e,o){"use strict";cc._RF.push(e,"30831qJcKNHIZMKUnmU1a/y","UIElementsManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../resize/ModifyWidget"),s=t("./Singleton"),c=t("./ResizeScreenManager"),l=t("../utils/Utils"),h=t("../data/EnumCategory"),p=cc._decorator.ccclass;(function(t){t[t.SelectBody=0]="SelectBody",t[t.SelectItems=1]="SelectItems",t[t.SelectDecoration=2]="SelectDecoration",t[t.SelectExport=3]="SelectExport"})(r=o.SectionType||(o.SectionType={}));var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){this.canvas=cc.find("Canvas"),this.preview=cc.find("Canvas/preview"),this.background=cc.find("Canvas/background canvas"),this.stickers=cc.find("Canvas/Stickers"),this.colorBar=cc.find("Canvas/node_colors/node_colors portrait/colors"),this.nextButtom=cc.find("Canvas/bottom_r"),this.backButtom=cc.find("Canvas/bottom_l back"),this.previewModifyWidget=cc.instantiate(this.preview.getComponent(a.default)),this.buttomModifyWidget=cc.instantiate(this.nextButtom.getComponent(a.default)),s.default.GetInstance().resizeScreenManager.on(c.default.KEY_SIGNAL_RESIZE,this.resize,this)},e.prototype.setCurrentSection=function(t){this.currentSection=t,this.resize()},e.prototype.setCurrentCategory=function(t){this.currentCategory=t,this.resize()},e.prototype.resize=function(){this.ratio=this.canvas.width/this.canvas.height;var t=cc.game.frame,e=t.clientWidth,o=t.clientHeight;this.landscape=e>o,console.log("ratio: "+this.ratio);var i="";if(!l.isMobile()&&this.landscape?i="landscape":l.isMobile()&&!this.landscape&&(i="portrait"),console.log(i),""!==i)switch(this.currentSection){case r.SelectBody:"landscape"===i?this.setSectionBodyLandscape():this.setSectionBodyPortrait();break;case r.SelectItems:"landscape"===i?this.setSectionItemsLandscape():this.setSectionItemsPortrait();break;case r.SelectDecoration:"landscape"===i?this.setSectionDecorationLandscape():this.setSectionDecorationPortrait();break;case r.SelectExport:"landscape"===i?this.setSectionExportLandscape():this.setSectionExportPortrait()}},e.prototype.setSectionBodyLandscape=function(){this.setOffsetPreview(0,0),this.preview.scale=.9},e.prototype.setSectionItemsLandscape=function(){this.setOffsetPreview(0,0),this.preview.scale=.9},e.prototype.setSectionDecorationLandscape=function(){this.setOffsetButtoms(0),this.background.scale=1,this.stickers.scale=1,this.background.y=21,this.setOffsetSticker(0),this.setOffsetPreview(0,-10),this.preview.scale=.82},e.prototype.setSectionExportLandscape=function(){this.background.scale=.85,this.stickers.scale=.85,this.preview.scale=.697,this.background.y=61,this.setOffsetSticker(42),this.setOffsetPreview(0,37)},e.prototype.setSectionBodyPortrait=function(){this.setOffsetButtoms(30),this.colorBar.position=cc.v2(0,220);var t=this.colorBar.parent.getComponent(cc.Widget);t.isAlignBottom=!0,t.isAlignTop=!1,this.ratio>.67&&(t.isAlignBottom=!1,t.isAlignTop=!0,this.colorBar.position=cc.v2(0,-140)),t.updateAlignment(),console.log(this.colorBar.position.y)},e.prototype.setSectionItemsPortrait=function(){this.setOffsetButtoms(30);var t=this.colorBar.parent.getComponent(cc.Widget);t.isAlignBottom=!0,t.isAlignTop=!1,this.colorBar.position=cc.v2(0,275),this.setOffsetPreview(0,0),this.preview.scale=1,this.ratio>.67&&this.currentCategory!==h.Category.hairBottom&&this.currentCategory!==h.Category.hairTop&&(t.isAlignBottom=!1,t.isAlignTop=!0,this.colorBar.position=cc.v2(0,-140)),t.updateAlignment()},e.prototype.setSectionDecorationPortrait=function(){this.setOffsetButtoms(30),this.background.scale=.85,this.stickers.scale=.85,this.preview.scale=.697,this.background.y=54,this.setOffsetSticker(38),this.setOffsetPreview(0,32)},e.prototype.setSectionExportPortrait=function(){this.setOffsetButtoms(30),this.background.scale=.85,this.stickers.scale=.85,this.preview.scale=.697,this.background.y=54,this.setOffsetSticker(38),this.setOffsetPreview(0,32)},e.prototype.setOffsetSticker=function(t){var e=this.stickers.getComponent(cc.Widget);e.verticalCenter=t,e.updateAlignment()},e.prototype.setOffsetPreview=function(t,e){var o=this.preview.getComponent(a.default);o.landscapeWidget.horizontalCenter=this.previewModifyWidget.landscapeWidget.horizontalCenter+t,o.landscapeWidget.verticalCenter=this.previewModifyWidget.landscapeWidget.verticalCenter+e,o.portraitWidget.horizontalCenter=this.previewModifyWidget.portraitWidget.horizontalCenter+t,o.portraitWidget.verticalCenter=this.previewModifyWidget.portraitWidget.verticalCenter+e,o.fixPositionOnPlay(),this.preview.getComponent(cc.Widget).updateAlignment()},e.prototype.setOffsetButtoms=function(t){var e=this.backButtom.getComponent(a.default),o=this.nextButtom.getComponent(a.default);e.landscapeWidget.verticalCenter=this.buttomModifyWidget.landscapeWidget.verticalCenter+t,e.portraitWidget.verticalCenter=this.buttomModifyWidget.portraitWidget.verticalCenter+t,o.landscapeWidget.verticalCenter=this.buttomModifyWidget.landscapeWidget.verticalCenter+t,o.portraitWidget.verticalCenter=this.buttomModifyWidget.portraitWidget.verticalCenter+t,e.fixPositionOnPlay(),o.fixPositionOnPlay(),this.backButtom.getComponent(cc.Widget).updateAlignment(),this.nextButtom.getComponent(cc.Widget).updateAlignment()},e.prototype.onDestroy=function(){s.default.GetInstance().resizeScreenManager.off(c.default.KEY_SIGNAL_RESIZE,this.resize,this)},e=n([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../data/EnumCategory":"EnumCategory","../resize/ModifyWidget":"ModifyWidget","../utils/Utils":"Utils","./ResizeScreenManager":"ResizeScreenManager","./Singleton":"Singleton"}],UIManager:[function(t,e,o){"use strict";cc._RF.push(e,"d4386Ygzx1Lb4+BWNd77G17","UIManager");var i=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function i(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(i.prototype=o.prototype,new i)}}(),n=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r,a=t("../data/EnumCategory"),s=t("../utils/Utils"),c=t("./Singleton"),l=t("./AvatarManager"),h=t("../audio/AudioScene"),p=t("./ExportManager"),u=t("./UIElementsManager"),d=t("../localization/LocalizationManager"),g=t("../utils/ChristmasItems"),f=t("../controller/TransitionController"),y=cc._decorator,m=y.ccclass,v=y.property;(function(t){t[t.none=0]="none",t[t.items=1]="items",t[t.sticker=2]="sticker",t[t.background=3]="background"})(r||(r={}));var C=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollViewElements=null,e.scrollViewCategories=null,e.scrollViewElements2=null,e.scrollViewCategories2=null,e.avatarManager=null,e.icons=null,e.icons2=null,e.nextButtom=null,e.backButtom=null,e.bodyContainer=null,e.categoriesContainer=null,e.messageNode=null,e.colorBar=null,e.colorBar2=null,e.background=null,e.extrasContainers=null,e.backContainer=null,e.backContainer2=null,e.extrasSelection=null,e.extrasSelection2=null,e.stickerContainer=null,e.stickerContainer2=null,e.stickers=null,e.photoDownload=null,e.buttonGifAnimation=null,e.backgroundPrefab=[],e.exportManager=null,e.preview=null,e.trashButtom=null,e.frameNextLandscape=null,e.frameRetryLandscape=null,e.frameContainer=null,e.frameContainerMiddle=null,e.frameContainerSmall=null,e.frameContainerBig=null,e.bigContainerArrows=null,e.bg=null,e.bgBlur=null,e.photoContainer=null,e.arrowNextCategory=null,e.arrowNextCategory2=null,e.decorColor=null,e.delayAnimationHint=6,e.delayArrows=5.5,e.delayInit=.1,e.categorySelected=0,e.character=null,e.sticker1ButtomRight=null,e.sticker1ButtomLeft=null,e.sticker2ButtomRight=null,e.sticker2ButtomLeft=null,e.background2ButtomRight=null,e.background2ButtomLeft=null,e.instance=null,e.selectColor=cc.Color.WHITE,e.photoIndex=0,e.buttomRightContent=null,e.buttomLeftContent=null,e.buttomRightContent2=null,e.buttomLeftContent2=null,e.buttomRightElement=null,e.buttomLeftElement=null,e.contentElements=null,e.contentElements2=null,e.colors=[],e.stickerSelecter=0,e.landscapeStickerSize=75,e.currentBackGroundSelect=0,e.audioManager=null,e.bottomContianerItems=null,e.arrowsLoopLeft=[],e.arrowsLoopRight=[],e.bigContainerMask=null,e.bigContainerScroll=null,e.lastPosC1=cc.v2(-1,0),e.lastPosC2=cc.v2(-1,0),e.lastPosBE1=cc.v2(-1,0),e.lastPosE2=cc.v2(-1,0),e.lastPosS1=cc.v2(-1,0),e.lastPosS2=cc.v2(-1,0),e.lastPosB2=cc.v2(-1,0),e}return i(e,t),e.prototype.start=function(){this.bigContainerMask=cc.find("Canvas/customise_select/customise_select landscape/bottom/container/container_options").getComponent(cc.Mask),this.bigContainerScroll=cc.find("Canvas/customise_select/customise_select landscape/bottom/container").getComponent(cc.ScrollView),this.uielementsManager=this.node.getComponent(u.default),this.confirmation=this.node.getChildByName("confirmation"),this.backgroundUI=this.node.getChildByName("bgGameplay"),this.spriteBackgroundUI=this.backgroundUI.getComponent(cc.Sprite),this.audioManager=c.default.GetInstance().audioManager,this.audioManager.playMusic(h.HowlsKey.musicGp2),this.instance=c.default.GetInstance(),this.contentElements=this.scrollViewElements.getChildByName("custom"),this.contentElements2=this.scrollViewElements2.node.getChildByName("custom"),this.bottomContianerItems=this.contentElements.parent.parent,this.scrollViewCategories.node.off(cc.Node.EventType.MOUSE_WHEEL),this.landscapeTileSize=90,this.portraitTileSize=90,this.landscapeElementTileSize=75,this.portraitElementTileSize=80,this.currentBackGroundSelect=-1,this.isShowMessage=!1,this.sticker1ButtomRight=this.stickerContainer.parent.parent.getChildByName("arrow_r"),this.sticker1ButtomLeft=this.stickerContainer.parent.parent.getChildByName("arrow_l"),this.sticker2ButtomRight=this.stickerContainer2.parent.parent.getChildByName("arrow_r"),this.sticker2ButtomLeft=this.stickerContainer2.parent.parent.getChildByName("arrow_l"),this.buttomRightContent=this.scrollViewCategories.node.getChildByName("arrow_r"),this.buttomLeftContent=this.scrollViewCategories.node.getChildByName("arrow_l"),this.buttomRightContent2=this.scrollViewCategories2.node.getChildByName("arrow_r"),this.buttomLeftContent2=this.scrollViewCategories2.node.getChildByName("arrow_l"),this.buttomRightElement=this.scrollViewElements2.node.parent.parent.getChildByName("arrow_r"),this.buttomLeftElement=this.scrollViewElements2.node.parent.parent.getChildByName("arrow_l"),this.background2ButtomRight=this.backContainer2.parent.parent.getChildByName("arrow_r"),this.background2ButtomLeft=this.backContainer2.parent.parent.getChildByName("arrow_l"),this.gifButton=this.background.getChildByName("gif_button"),this.containerLogo=this.background.getChildByName("photo"),this.descriptionPhoto=this.containerLogo.getChildByName("description"),this.urlPhoto=this.containerLogo.getChildByName("web"),this.updateMessage(),this.loadCategoryElements(),this.checkElement(0),this.fillBodyColors(),this.updateColors(),this.showMessage(0),this.setSectionBody(),this.selectBackground(0),this.setSelectPhoto(0),this.selectSticker(0),this.isGifEnabled=!1,this.localizeConfirmation(),this.setBody(0),f.default.instance.hideTransition()},e.prototype.localizeConfirmation=function(){this.confirmation.getComponentInChildren(cc.Label).font=d.default.instance.getFont(),this.confirmation.getComponentInChildren(cc.Label).string=d.default.instance.getLocalizationString("confirmation")},e.prototype.updateMessage=function(){var t=window.message;""===t?this.descriptionPhoto.getComponent(cc.Label).string="":("ar"===d.default.instance.currentLanguage&&(this.descriptionPhoto.getComponent(cc.Label).fontSize=18),this.descriptionPhoto.getComponent(cc.Label).font=d.default.instance.getFont(),this.descriptionPhoto.getComponent(cc.Label).string=d.default.instance.getLocalizationString(t)),this.urlPhoto.getComponent(cc.Label).string=window.url},e.prototype.clearButtom=function(){c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_menu),this.confirmation.active||c.default.GetInstance().audioManager.playSfx(h.SFXKey.popup_confirmation),this.confirmation.active=!this.confirmation.active},e.prototype.reset=function(){c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_menu),this.avatarManager.colors.forEach(function(t){null!==t&&(t.index=0)}),this.avatarManager.paletteItems.forEach(function(t){null!==t&&(t.index=0)}),this.avatarManager.reset(),this.categorySelected=a.Category.mouth,this.uielementsManager.setCurrentCategory(this.categorySelected),this.checkCategory(a.Category.mouth),this.loadCategoryElements(),this.checkElement(0),this.scrollViewCategories.scrollToBottomLeft(0),this.scrollViewCategories2.scrollToBottomLeft(0);this.avatarManager.skinColors.index=0,this.setBody(0),this.eventScrollView(),this.updateColors(),this.confirmation.active=!1,this.avatarManager.chargePreviewV2(),this.avatarManager.changeBodyParts(),this.setSectionSelectDecoration(),this.setSectionItems(),this.setSectionBody(),this.setSelectPhoto(0)},e.prototype.changeBody=function(t){c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item);var e=Number(t.target.name.split("_")[1])-1;this.setBody(e)},e.prototype.setBody=function(t){this.avatarManager.characterSelected=t,this.avatarManager.chargePreviewV2(),this.avatarManager.changeBodyParts();var e=0;this.bodyContainer.children[0].children[0].children.forEach(function(o){t===e?o.getComponent(cc.Animation).play("btn_body_select"):o.getComponent(cc.Animation).play("btn_body_unselect"),e+=1}),e=0,this.bodyContainer.children[1].children[0].children.forEach(function(o){t===e?o.getComponent(cc.Animation).play("btn_body_select"):o.getComponent(cc.Animation).play("btn_body_unselect"),e+=1})},e.prototype.fillBodyColors=function(){var t=this;this.colorBar.active=!0,this.colorBar2.active=!0;var e=0;this.avatarManager.skinColors.palettes.forEach(function(o){t.colorBar.children[e].active=!0,t.colorBar.children[e].children[0].color=o.r,t.colorBar2.children[e].active=!0,t.colorBar2.children[e].children[0].color=o.r,e+=1}),this.colorBar.children[this.avatarManager.skinColors.index].children[0].getChildByName("check").active=!0,this.colorBar2.children[this.avatarManager.skinColors.index].children[0].getChildByName("check").active=!0},e.prototype.buttomNext=function(){c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_menu),this.categorySelected===a.Category.bodyType?(this.hideMessage(),this.setSectionItems(),this.eventScrollView()):this.categorySelected>=a.Category.bottom&&this.categorySelected<=a.Category.suit?(this.hideMessage(),this.setSectionSelectDecoration()):this.categorySelected>=a.Category.background&&this.categorySelected<=a.Category.sticker?(this.hideMessage(),c.default.GetInstance().audioManager.playSfx(h.SFXKey.final_photo),this.setSectionExport()):this.clearButtom()},e.prototype.buttomBack=function(){this.hideMessage(),c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_menu),this.categorySelected>=a.Category.bottom&&this.categorySelected<=a.Category.suit?this.setSectionBody():this.categorySelected>=a.Category.background&&this.categorySelected<=a.Category.sticker?(this.setSectionItems(),this.trashButtom.active=!0):this.setSectionSelectDecoration()},e.prototype.arrowLoop=function(t){if(this.stopArrowTutorial(),s.isMobile())switch(t){case r.items:this.arrowsLoopLeft.push(this.buttomLeftContent2),this.arrowsLoopRight.push(this.buttomRightContent2),this.arrowsLoopLeft.push(this.buttomLeftElement),this.arrowsLoopRight.push(this.buttomRightElement);break;case r.background:this.arrowsLoopRight.push(this.background2ButtomRight),this.arrowsLoopLeft.push(this.background2ButtomLeft);break;case r.sticker:this.arrowsLoopLeft.push(this.sticker2ButtomLeft),this.arrowsLoopRight.push(this.sticker2ButtomRight)}else switch(t){case r.items:this.arrowsLoopLeft.push(this.buttomLeftContent),this.arrowsLoopRight.push(this.buttomRightContent);break;case r.sticker:this.arrowsLoopLeft.push(this.sticker1ButtomLeft),this.arrowsLoopRight.push(this.sticker1ButtomRight)}this.arrowsLoopLeft.length>0&&this.initArrowTutorial()},e.prototype.stopArrowTutorial=function(){this.unscheduleAllCallbacks();for(var t=0,e=this.arrowsLoopLeft.length;t<e;t++)this.arrowsLoopLeft[t].getComponent(cc.Animation).stop("LOOP_arrow_l"),this.arrowsLoopLeft[t].scale=1;for(t=0,e=this.arrowsLoopRight.length;t<e;t++)this.arrowsLoopRight[t].getComponent(cc.Animation).stop("LOOP_arrow_r"),this.arrowsLoopRight[t].scaleY=1,this.arrowsLoopRight[t].scaleX=-1;this.arrowsLoopLeft=[],this.arrowsLoopRight=[]},e.prototype.initArrowTutorial=function(){for(var t,e=this.delayAnimationHint,o=this.delayArrows,i=this.delayInit,n=0,r=function(t,e){var r=t;a.scheduleOnce(function(){this.arrowsLoopLeft[r].getComponent(cc.Animation).play("LOOP_arrow_l"),console.log("k: "+r+" left")}.bind(a),i+n*o),n++,a.scheduleOnce(function(){this.arrowsLoopRight[r].getComponent(cc.Animation).play("LOOP_arrow_r"),console.log("k: "+r+" right")}.bind(a),i+n*o),n++},a=this,s=0,c=this.arrowsLoopLeft.length;s<c;s++)r(s);t=i+(n-1)*o,this.scheduleOnce(function(){console.log("init"),this.initArrowTutorial()}.bind(this),t+e)},e.prototype.setSectionBody=function(){this.nextButtom.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.frameNextLandscape,this.backButtom.active=!1,this.nextButtom.active=!0,this.bodyContainer.active=!0,this.categoriesContainer.active=!1,this.extrasContainers.active=!1,this.trashButtom.active=!0,this.categorySelected=0,this.uielementsManager.setCurrentCategory(this.categorySelected),this.fillBodyColors(),this.updateColors(),this.showMessage(0),this.uielementsManager.setCurrentSection(u.SectionType.SelectBody),this.arrowLoop(r.none)},e.prototype.setSectionItems=function(){this.nextButtom.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.frameNextLandscape,this.trashButtom.active=!0,this.backButtom.active=!0,this.nextButtom.active=!0,this.bodyContainer.active=!1,this.nextButtom.active=!0,this.background.active=!1,this.extrasContainers.active=!1,this.categoriesContainer.active=!0,this.categorySelected=a.Category.mouth,this.updateColors(),this.loadCategoryElements(),this.checkElement(this.avatarManager.getVal(a.Category[this.categorySelected])),this.checkCategory(this.categorySelected),this.uielementsManager.setCurrentCategory(this.categorySelected),this.setContainerBar(),this.scrollViewCategories.scrollToBottomLeft(0),this.scrollViewCategories2.scrollToBottomLeft(0),this.stickers.active=!1,this.showMessage(1),this.uielementsManager.setCurrentSection(u.SectionType.SelectItems),this.arrowLoop(r.items)},e.prototype.setSectionSelectDecoration=function(){this.setSelectPhoto(0),this.hideMessage(),this.background.children[1].active=!0,this.trashButtom.active=!1,this.nextButtom.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.frameNextLandscape,this.backButtom.active=!0,this.nextButtom.active=!0,this.categoriesContainer.active=!1,this.background.active=!0,this.extrasContainers.active=!0,this.categorySelected=a.Category.background,this.backContainer.parent.parent.active=!0,this.backContainer2.parent.parent.parent.active=!0,this.stickerContainer.parent.parent.active=!1,this.stickerContainer2.parent.parent.parent.active=!1,this.stickers.active=!0,this.updateColors(),this.extrasSelection.children[0].getComponent(cc.Animation).play("btn_top_select"),this.extrasSelection.children[1].getComponent(cc.Animation).play("btn_top_unselect"),this.extrasSelection2.children[0].getComponent(cc.Animation).play("btn_top_select"),this.extrasSelection2.children[1].getComponent(cc.Animation).play("btn_top_unselect"),this.nextButtom.active=!0,this.photoDownload.active=!1,this.gifButton.active=!window.ENABLE_GAMEBOX,this.containerLogo.active=!1,this.uielementsManager.setCurrentSection(u.SectionType.SelectDecoration),this.arrowLoop(r.background),this.uielementsManager.setCurrentCategory(this.categorySelected)},e.prototype.setSectionExport=function(){this.nextButtom.children[0].children[0].getComponent(cc.Sprite).spriteFrame=this.frameRetryLandscape,this.showMessage(2),this.backButtom.active=!0,this.nextButtom.active=!0,this.containerLogo.active=!0,this.gifButton.active=!1,this.categorySelected=a.Category.gif,this.photoDownload.active=!0,this.extrasContainers.active=!1,this.uielementsManager.setCurrentSection(u.SectionType.SelectExport),this.arrowLoop(r.none),this.uielementsManager.setCurrentCategory(this.categorySelected)},e.prototype.loadCategoryElements=function(){var t=this;if(0===this.categorySelected);else{this.contentElements.children.forEach(function(t){t.getComponent(cc.Animation).play("btn_btm_unselect"),t.active=!1}),this.contentElements2.children.forEach(function(t){t.getComponent(cc.Animation).play("btn_btm_unselect"),t.active=!1});var e=0;this.avatarManager.character[this.avatarManager.characterSelected].getChildByName(a.Category[this.categorySelected]).children.forEach(function(o){var i=o.getComponent(g.default);if(!i||i.isCristmas){t.contentElements.children[e].active=!0,t.contentElements2.children[e].active=!0;var n=o.name.split(" ")[0];t.contentElements.children[e].children[0].children[1].getComponent(cc.Sprite).spriteFrame=t.icons.getSpriteFrame(n),t.contentElements2.children[e].children[0].children[1].getComponent(cc.Sprite).spriteFrame=t.icons.getSpriteFrame(n),e+=1}}),this.countItemsCategory=e,this.countItemsCategory<=5?(this.scrollViewElements2.scrollToBottomLeft(0),this.buttomRightElement.active=!1,this.buttomLeftElement.active=!1,this.scrollViewElements2.enabled=!1):(this.scrollViewElements2.enabled=!0,this.buttomRightElement.active=!0,this.buttomLeftElement.active=!1,this.scrollViewElements2.scrollToBottomLeft(0))}},e.prototype.selectElement=function(t){if(this.hideMessage(),this.categorySelected===a.Category.background){c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item);var e=Number(t.target.name.split(" ")[1]);this.selectBackground(e)}else if(this.categorySelected===a.Category.sticker){c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item),this.stickers.active=!0;var o=Number(t.target.name.split(" ")[1]);this.selectSticker(o)}else{var i=[a.Category.bottom,a.Category.belt,a.Category.cape,a.Category.jacket,a.Category.hat,a.Category.mask,a.Category.top,a.Category.object,a.Category.gloves,a.Category.shoes,a.Category.powers,a.Category.suit,a.Category.background,a.Category.sticker,a.Category.gif],n=Number(t.target.name.split(" ")[1]);c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item),-1!==i.indexOf(this.categorySelected)&&c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_clothes);var r=0;this.contentElements.children.forEach(function(t){r===n?t.getComponent(cc.Animation).play("btn_btm_select"):t.getComponent(cc.Animation).play("btn_btm_unselect"),r+=1}),r=0,this.contentElements2.children.forEach(function(t){r===n?t.getComponent(cc.Animation).play("btn_btm_select"):t.getComponent(cc.Animation).play("btn_btm_unselect"),r+=1}),this.avatarManager.change(this.categorySelected,n),this.updateColors()}},e.prototype.switchGifEnabled=function(){this.isGifEnabled=!this.isGifEnabled,this.buttonGifAnimation.stop(),c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_menu),this.isGifEnabled?(this.currentBackgroundAnimation.play(this.currentBackgroundAnimation.getClips()[0].name),this.buttonGifAnimation.play("ON_gif")):(this.currentBackgroundAnimation.stop(),this.buttonGifAnimation.play("OFF_gif"))},e.prototype.selectBackground=function(t){if(this.currentBackGroundSelect!==t){var e=0;this.backContainer.children.forEach(function(o){t===e?o.getComponent(cc.Animation).play("btn_btm_select"):o.getComponent(cc.Animation).play("btn_btm_unselect"),e+=1}),e=0,this.backContainer2.children.forEach(function(o){t===e?o.getComponent(cc.Animation).play("btn_btm_select"):o.getComponent(cc.Animation).play("btn_btm_unselect"),e+=1}),this.currentBackGroundSelect=t;var o=cc.instantiate(this.backgroundPrefab[t]);o.scale=.9,this.currentBackgroundAnimation=o.getComponent(cc.Animation),this.background.getChildByName("mask").removeAllChildren(),this.background.getChildByName("mask").addChild(o),this.isGifEnabled?this.currentBackgroundAnimation.play(this.currentBackgroundAnimation.getClips()[0].name):this.currentBackgroundAnimation.stop()}},e.prototype.selectSticker=function(t){this.stickers.children.forEach(function(t){t.active=!1}),this.stickers.children[t].active=!0;var e=0;this.stickerContainer.children.forEach(function(o){e===t?o.getComponent(cc.Animation).play("btn_btm_select"):o.getComponent(cc.Animation).play("btn_btm_unselect"),e+=1}),e=0,this.stickerContainer2.children.forEach(function(o){e===t?o.getComponent(cc.Animation).play("btn_btm_select"):o.getComponent(cc.Animation).play("btn_btm_unselect"),e+=1})},e.prototype.checkElement=function(t){this.contentElements.children[t].getComponent(cc.Animation).play("btn_btm_select"),this.contentElements2.children[t].getComponent(cc.Animation).play("btn_btm_select")},e.prototype.checkCategory=function(t){this.scrollViewCategories.node.getChildByName("mask").getChildByName("content").children.forEach(function(e){e.name===a.Category[t]?e.getComponent(cc.Animation).play("btn_top_select"):e.getComponent(cc.Animation).play("btn_top_unselect")}),this.scrollViewCategories2.node.getChildByName("mask").getChildByName("content").children.forEach(function(e){e.name===a.Category[t]?e.getComponent(cc.Animation).play("btn_top_select"):e.getComponent(cc.Animation).play("btn_top_unselect")}),this.scrollViewElements2.scrollToBottomLeft(0),this.eventScrollView()},e.prototype.showMessage=function(t){var e;this.isShowMessage=!0,this.messageNode.getComponent(cc.Animation).stop("message_Show'nDisapear"),this.messageNode.active=!0,this.messageNode.children[0].opacity=255,0===t?(e="choose_instruction",this.messageNode.getComponent(cc.Animation).play("messege_up")):1===t?(e="custom_instruction",this.messageNode.getComponent(cc.Animation).play("messege_up")):2===t?(e="share_00",this.messageNode.getComponent(cc.Animation).play("messege_down_photo")):3===t?(e="share_01",this.messageNode.getComponent(cc.Animation).play("messege_down_photo")):4===t&&(e="share_02",this.messageNode.getComponent(cc.Animation).play("messege_down_photo")),s.isMobile()&&(t>=2&&t<=4?this.setOffsetMessage(-146):this.setOffsetMessage(-126)),this.messageNode.children[0].children[0].getComponent(cc.Label).string=d.default.instance.getLocalizationString(e),this.messageNode.children[0].children[0].getComponent(cc.Label).font=d.default.instance.getFont()},e.prototype.setOffsetMessage=function(t){var e=this.messageNode.getComponent(cc.Widget);e.verticalCenter=t,e.updateAlignment()},e.prototype.hideMessage=function(t){void 0===t&&(t=!0),this.isShowMessage&&(this.isShowMessage=!1,t?this.messageNode.getComponent(cc.Animation).play("message_Show'nDisapear"):this.messageNode.active=!1)},e.prototype.selectCategory=function(t,e){var o=this;if(this.categorySelected=a.Category[e],this.uielementsManager.setCurrentCategory(this.categorySelected),c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item),this.hideMessage(),this.categorySelected>=a.Category.background){var i=0;this.extrasSelection.children.forEach(function(t){i===o.categorySelected-a.Category.background?t.getComponent(cc.Animation).play("btn_top_select"):t.getComponent(cc.Animation).play("btn_top_unselect"),i+=1}),i=0,this.extrasSelection2.children.forEach(function(t){i===o.categorySelected-a.Category.background?t.getComponent(cc.Animation).play("btn_top_select"):t.getComponent(cc.Animation).play("btn_top_unselect"),i+=1}),this.categorySelected===a.Category.background&&(this.arrowLoop(r.background),this.backContainer.parent.parent.active=!0,this.backContainer2.parent.parent.parent.active=!0,this.stickerContainer.parent.parent.active=!1,this.stickerContainer2.parent.parent.parent.active=!1),this.categorySelected===a.Category.sticker&&(this.arrowLoop(r.sticker),this.backContainer.parent.parent.active=!1,this.backContainer2.parent.parent.parent.active=!1,this.stickerContainer.parent.parent.active=!0,this.stickerContainer2.parent.parent.parent.active=!0)}else this.checkCategory(this.categorySelected),this.loadCategoryElements(),this.checkElement(this.avatarManager.getVal(e)),this.setContainerBar(),this.updateColors()},e.prototype.setContainerBar=function(){var t=this.bigContainerMask.getComponentInChildren(cc.Layout);this.bigContainerMask.enabled=!1,this.bigContainerArrows.active=!1,this.bigContainerScroll.enabled=!1,this.bigContainerMask.node.x=-234,console.log("hii"),t.paddingLeft=0,t.paddingRight=0,t.spacingX=-8,this.contentElements.parent.scale=.9,this.contentElements.parent.x=-70*(this.countItemsCategory/2-1+.5)*.9,this.countItemsCategory>10||6===this.countItemsCategory&&(t.spacingX=5,this.contentElements.parent.x-=40.5)},e.prototype.selectColorButtom=function(t){var e=Number(t.target.name.split(" ")[1]);c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_color),0===this.categorySelected?(this.avatarManager.skinColors.index=e,this.avatarManager.changeBodyParts(),this.updateColors(),this.avatarManager.chargePreviewV2()):(this.avatarManager.colors[this.categorySelected].index=e,this.updateColors(),this.avatarManager.chargePreviewV2())},e.prototype.updateColors=function(){this.updateColorBar(this.colorBar),this.updateColorBar(this.colorBar2)},e.prototype.updateColorBar=function(t){if(t.children.forEach(function(t){t.active=!1,t.children[0].getChildByName("check").active=!1}),0===this.categorySelected)this.fillBodyColors(),this.colorBar===t&&setTimeout(function(){this.decorColor.active=!0,this.decorColor.y=t.y+.5*t.height}.bind(this),100);else if(this.avatarManager.colors[this.categorySelected]){t.active=!0;var e=0;this.avatarManager.colors[this.categorySelected].palettes.forEach(function(o){t.children[e].active=!0,t.children[e].children[0].color=o.r,e+=1}),t.children[this.avatarManager.colors[this.categorySelected].index].children[0].getChildByName("check").active=!0,this.colorBar===t&&setTimeout(function(){this.decorColor.active=!0,this.decorColor.y=t.y+.5*t.height}.bind(this),100)}else this.colorBar===t&&(this.decorColor.active=!1),t.active=!1},e.prototype.buttomRight=function(t,e){var o;if(c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_arrow),"elements"===e){this.scrollViewElements2.stopAutoScroll();var i=this.scrollViewElements2.getScrollOffset();o=Math.round(-i.x)+this.getOffsetX(this.portraitElementTileSize,i.x),this.scrollViewElements2.scrollToOffset(cc.v2(o,0),.1),this.bigContainerScroll.stopAutoScroll(),i=this.bigContainerScroll.getScrollOffset(),o=Math.round(-i.x)+this.getOffsetX(this.landscapeElementTileSize,i.x,!1),this.bigContainerScroll.scrollToOffset(cc.v2(o,0),.1)}else if("sticker"===e){(n=this.stickerContainer.parent.getComponent(cc.ScrollView)).stopAutoScroll();i=n.getScrollOffset();o=Math.round(-i.x)+this.getOffsetX(this.landscapeStickerSize,i.x),n.scrollToOffset(cc.v2(o,0),.1),(n=this.stickerContainer2.parent.getComponent(cc.ScrollView)).stopAutoScroll(),i=n.getScrollOffset(),o=Math.round(-i.x)+this.getOffsetX(this.portraitElementTileSize,i.x),n.scrollToOffset(cc.v2(o,0),.1)}else if("background"===e){var n;(n=this.backContainer2.parent.getComponent(cc.ScrollView)).stopAutoScroll();i=n.getScrollOffset();o=Math.round(-i.x)+this.getOffsetX(this.landscapeStickerSize,i.x),n.scrollToOffset(cc.v2(o,0),.1)}else{this.scrollViewCategories.stopAutoScroll();i=this.scrollViewCategories.getScrollOffset();o=Math.round(-i.x)+this.getOffsetX(this.landscapeTileSize,i.x),this.scrollViewCategories.scrollToOffset(cc.v2(o,0),.1),i=this.scrollViewCategories2.getScrollOffset(),o=Math.round(-i.x)+this.getOffsetX(this.portraitTileSize,i.x),this.scrollViewCategories2.scrollToOffset(cc.v2(o,0),.1)}},e.prototype.buttomLeft=function(t,e){var o;if(c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_arrow),"elements"===e){this.scrollViewElements2.stopAutoScroll();var i=this.scrollViewElements2.getScrollOffset();o=Math.round(-i.x)-this.getOffsetX(this.portraitElementTileSize,i.x,!1),this.scrollViewElements2.scrollToOffset(cc.v2(o,0),.1),this.bigContainerScroll.stopAutoScroll(),i=this.bigContainerScroll.getScrollOffset(),o=Math.round(-i.x)-this.getOffsetX(this.landscapeElementTileSize,i.x,!1),this.bigContainerScroll.scrollToOffset(cc.v2(o,0),.1)}else if("sticker"===e){(n=this.stickerContainer.parent.getComponent(cc.ScrollView)).stopAutoScroll();i=n.getScrollOffset();o=Math.round(-i.x)-this.getOffsetX(this.landscapeStickerSize,i.x,!1),n.scrollToOffset(cc.v2(o,0),.1)}else if("background"===e){var n;(n=this.backContainer2.parent.getComponent(cc.ScrollView)).stopAutoScroll();i=n.getScrollOffset();o=Math.round(-i.x)-this.getOffsetX(this.landscapeStickerSize,i.x),n.scrollToOffset(cc.v2(o,0),.1)}else{this.scrollViewCategories.stopAutoScroll();i=this.scrollViewCategories.getScrollOffset();o=Math.round(-i.x)-this.getOffsetX(this.landscapeTileSize,i.x,!1),this.scrollViewCategories.scrollToOffset(cc.v2(o,0),.1),i=this.scrollViewCategories2.getScrollOffset(),o=Math.round(-i.x)-this.getOffsetX(this.portraitTileSize,i.x,!1),this.scrollViewCategories2.scrollToOffset(cc.v2(o,0),.1)}},e.prototype.getOffsetX=function(t,e,o){var i;return void 0===o&&(o=!0),i=Math.round(-e),console.log("offset current: "+i),i=o?t-i%t:i%t==0?t:i%t,console.log("offset  move: "+i),i},e.prototype.exportImageSquare=function(){this.isGifEnabled?(this.currentBackgroundAnimation.resume(),this.exportManager.exportSquareGIF()):this.exportManager.exportSquare()},e.prototype.exportImageAlpha=function(){this.currentBackgroundAnimation.pause(),this.exportManager.exportSquareAlpha()},e.prototype.exportImageLandscape=function(){this.currentBackgroundAnimation.pause(),this.exportManager.exportLandscape()},e.prototype.eventScrollView=function(){if(this.lastPosC1.y=this.lastPosC1.x,this.lastPosC1.x=this.scrollViewCategories.getScrollOffset().x,this.lastPosC2.y=this.lastPosC2.x,this.lastPosC2.x=this.scrollViewCategories2.getScrollOffset().x,this.lastPosE2.y=this.lastPosE2.x,this.lastPosE2.x=this.scrollViewElements2.getScrollOffset().x,this.lastPosBE1.y=this.lastPosBE1.x,this.lastPosBE1.x=this.bigContainerScroll.getScrollOffset().x,this.lastPosS1.y=this.lastPosS1.x,this.lastPosS1.x=this.stickerContainer.parent.getComponent(cc.ScrollView).getScrollOffset().x,this.lastPosS2.y=this.lastPosS2.x,this.lastPosS2.x=this.stickerContainer2.parent.getComponent(cc.ScrollView).getScrollOffset().x,this.lastPosB2.y=this.lastPosB2.x,this.lastPosB2.x=this.backContainer2.parent.getComponent(cc.ScrollView).getScrollOffset().x,this.buttomRightContent.active=!(-this.lastPosC1.x>=this.scrollViewCategories.getMaxScrollOffset().x-1),this.buttomLeftContent.active=-this.lastPosC1.x>1,this.buttomLeftContent2.active=-this.lastPosC2.x>1,this.buttomRightContent2.active=!(-this.lastPosC2.x>=this.scrollViewCategories2.getMaxScrollOffset().x-1),this.countItemsCategory>5&&(this.buttomRightElement.active=!(Math.round(-this.lastPosE2.x)>=this.scrollViewElements2.getMaxScrollOffset().x),this.buttomLeftElement.active=-this.lastPosE2.x>1),this.sticker1ButtomRight.active=-this.lastPosS1.x<=this.stickerContainer.parent.getComponent(cc.ScrollView).getMaxScrollOffset().x-1,this.sticker1ButtomLeft.active=-this.lastPosS1.x>1,this.sticker2ButtomRight.active=-this.lastPosS2.x<=this.stickerContainer2.parent.getComponent(cc.ScrollView).getMaxScrollOffset().x-1,this.sticker2ButtomLeft.active=-this.lastPosS2.x>1,this.background2ButtomRight.active=-this.lastPosB2.x<=this.backContainer2.parent.getComponent(cc.ScrollView).getMaxScrollOffset().x-1,this.background2ButtomLeft.active=-this.lastPosB2.x>1,this.countItemsCategory>10&&(this.bigContainerArrows.children[1].active=!(-this.lastPosBE1.x>=this.bigContainerScroll.getMaxScrollOffset().x-1),this.bigContainerArrows.children[0].active=-this.lastPosBE1.x>1,Math.abs(Math.abs(this.lastPosBE1.x)-Math.abs(this.lastPosBE1.y))<1&&!this.bigContainerScroll.isScrolling())){var t=void 0,e=this.bigContainerScroll.getScrollOffset();Math.round(e.x)%this.landscapeElementTileSize!=0&&((t=this.getOffsetX(this.landscapeElementTileSize,e.x))>this.landscapeElementTileSize/2&&(t=-this.getOffsetX(this.landscapeElementTileSize,e.x,!1)),this.bigContainerScroll.scrollToOffset(cc.v2(-e.x+t,0),.1))}if(Math.abs(Math.abs(this.lastPosC1.x)-Math.abs(this.lastPosC1.y))<1&&!this.scrollViewCategories.isScrolling()){t=void 0,e=this.scrollViewCategories.getScrollOffset();Math.round(e.x)%this.landscapeTileSize!=0&&((t=this.getOffsetX(this.landscapeTileSize,e.x))>this.landscapeTileSize/2&&(t=-this.getOffsetX(this.landscapeTileSize,e.x,!1)),this.scrollViewCategories.scrollToOffset(cc.v2(-e.x+t,0),.1))}if(Math.abs(Math.abs(this.lastPosC2.x)-Math.abs(this.lastPosC2.y))<1&&!this.scrollViewCategories2.isScrolling()){t=void 0,e=this.scrollViewCategories2.getScrollOffset();Math.round(e.x)%this.portraitTileSize!=0&&((t=this.getOffsetX(this.portraitTileSize,e.x))>this.portraitTileSize/2&&(t=-this.getOffsetX(this.portraitTileSize,e.x,!1)),this.scrollViewCategories2.scrollToOffset(cc.v2(-e.x+t,0),.1))}if(Math.abs(Math.abs(this.lastPosE2.x)-Math.abs(this.lastPosE2.y))<1&&!this.scrollViewElements2.isScrolling()){t=void 0,e=this.scrollViewElements2.getScrollOffset();Math.round(e.x)%this.portraitElementTileSize!=0&&((t=this.getOffsetX(this.portraitElementTileSize,e.x))>this.portraitElementTileSize/2&&(t=-this.getOffsetX(this.portraitElementTileSize,e.x,!1)),this.scrollViewElements2.scrollToOffset(cc.v2(-e.x+t,0),.1))}if(Math.abs(Math.abs(this.lastPosS1.x)-Math.abs(this.lastPosS1.y))<1&&!this.stickerContainer.parent.getComponent(cc.ScrollView).isScrolling()){t=void 0,e=this.stickerContainer.parent.getComponent(cc.ScrollView).getScrollOffset();Math.round(e.x)%this.landscapeStickerSize!=0&&((t=this.getOffsetX(this.landscapeStickerSize,e.x))>this.landscapeStickerSize/2&&(t=-this.getOffsetX(this.landscapeStickerSize,e.x,!1)),this.stickerContainer.parent.getComponent(cc.ScrollView).scrollToOffset(cc.v2(-e.x+t,0),.1))}},e.prototype.selectPhotoMode=function(t){c.default.GetInstance().audioManager.playSfx(h.SFXKey.selection_item),this.setSelectPhoto(Number(t.target.name.split(" ")[1])),0===this.photoIndex&&this.showMessage(2),1===this.photoIndex&&this.showMessage(3),2===this.photoIndex&&this.showMessage(4)},e.prototype.setSelectPhoto=function(t){var e=this;this.photoIndex=t;var o=0;this.photoContainer.getChildByName("photo_download_portrait").getChildByName("container").children.forEach(function(t){o===e.photoIndex?t.getComponent(cc.Animation).play("btn_body_select"):t.getComponent(cc.Animation).play("btn_body_unselect"),o+=1}),o=0,this.photoContainer.getChildByName("photo_download_landscape").getChildByName("container").children.forEach(function(t){o===e.photoIndex?t.getComponent(cc.Animation).play("btn_body_select"):t.getComponent(cc.Animation).play("btn_body_unselect"),o+=1}),0===this.photoIndex&&(this.currentBackgroundAnimation.resume(),this.background.children[1].active=!0,this.spriteBackgroundUI.spriteFrame=this.bg),1===this.photoIndex&&(this.currentBackgroundAnimation.pause(),this.background.children[1].active=!0,this.spriteBackgroundUI.spriteFrame=this.bgBlur),2===this.photoIndex&&(this.background.children[1].active=!1,this.spriteBackgroundUI.spriteFrame=this.bg)},e.prototype.download=function(){switch(c.default.GetInstance().audioManager.playSfx(h.SFXKey.button_download),this.exportManager.setPrefabBackground(this.backgroundPrefab[this.currentBackGroundSelect]),this.photoIndex){case 0:this.exportImageSquare();break;case 1:this.exportImageLandscape();break;case 2:this.exportImageAlpha()}},n([v(cc.Node)],e.prototype,"scrollViewElements",void 0),n([v(cc.ScrollView)],e.prototype,"scrollViewCategories",void 0),n([v(cc.ScrollView)],e.prototype,"scrollViewElements2",void 0),n([v(cc.ScrollView)],e.prototype,"scrollViewCategories2",void 0),n([v(l.default)],e.prototype,"avatarManager",void 0),n([v(cc.SpriteAtlas)],e.prototype,"icons",void 0),n([v(cc.SpriteAtlas)],e.prototype,"icons2",void 0),n([v(cc.Node)],e.prototype,"nextButtom",void 0),n([v(cc.Node)],e.prototype,"backButtom",void 0),n([v(cc.Node)],e.prototype,"bodyContainer",void 0),n([v(cc.Node)],e.prototype,"categoriesContainer",void 0),n([v(cc.Node)],e.prototype,"messageNode",void 0),n([v(cc.Node)],e.prototype,"colorBar",void 0),n([v(cc.Node)],e.prototype,"colorBar2",void 0),n([v(cc.Node)],e.prototype,"background",void 0),n([v(cc.Node)],e.prototype,"extrasContainers",void 0),n([v(cc.Node)],e.prototype,"backContainer",void 0),n([v(cc.Node)],e.prototype,"backContainer2",void 0),n([v(cc.Node)],e.prototype,"extrasSelection",void 0),n([v(cc.Node)],e.prototype,"extrasSelection2",void 0),n([v(cc.Node)],e.prototype,"stickerContainer",void 0),n([v(cc.Node)],e.prototype,"stickerContainer2",void 0),n([v(cc.Node)],e.prototype,"stickers",void 0),n([v(cc.Node)],e.prototype,"photoDownload",void 0),n([v(cc.Animation)],e.prototype,"buttonGifAnimation",void 0),n([v([cc.Prefab])],e.prototype,"backgroundPrefab",void 0),n([v(p.default)],e.prototype,"exportManager",void 0),n([v(cc.Node)],e.prototype,"preview",void 0),n([v(cc.Node)],e.prototype,"trashButtom",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameNextLandscape",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameRetryLandscape",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameContainer",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameContainerMiddle",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameContainerSmall",void 0),n([v(cc.SpriteFrame)],e.prototype,"frameContainerBig",void 0),n([v(cc.Node)],e.prototype,"bigContainerArrows",void 0),n([v(cc.SpriteFrame)],e.prototype,"bg",void 0),n([v(cc.SpriteFrame)],e.prototype,"bgBlur",void 0),n([v(cc.Node)],e.prototype,"photoContainer",void 0),n([v(cc.Node)],e.prototype,"arrowNextCategory",void 0),n([v(cc.Node)],e.prototype,"arrowNextCategory2",void 0),n([v(cc.Node)],e.prototype,"decorColor",void 0),n([v(cc.Float)],e.prototype,"delayAnimationHint",void 0),n([v(cc.Float)],e.prototype,"delayArrows",void 0),n([v(cc.Float)],e.prototype,"delayInit",void 0),e=n([m],e)}(cc.Component);o.default=C,cc._RF.pop()},{"../audio/AudioScene":"AudioScene","../controller/TransitionController":"TransitionController","../data/EnumCategory":"EnumCategory","../localization/LocalizationManager":"LocalizationManager","../utils/ChristmasItems":"ChristmasItems","../utils/Utils":"Utils","./AvatarManager":"AvatarManager","./ExportManager":"ExportManager","./Singleton":"Singleton","./UIElementsManager":"UIElementsManager"}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"fcf29pmuD1DoaqynyV30Ofd","Utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.isMobile=function(){return(cc.sys.isMobile||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1)&&!window.MSStream},o.shuffleArray=function(t){for(var e,o=t.slice(),i=o.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1));e=[o[n],o[i]],o[i]=e[0],o[n]=e[1]}return o},cc._RF.pop()},{}]},{},["ButtonHoverScale","AudioButton","AudioManager","AudioScene","BootController","LoaderCSS","MainmenuController","TransitionController","ColorList","EnumCategory","FixShader","LocalizationConfig","LocalizationImageComponent","LocalizationLabelComponent","LocalizationManager","StickerManager","AvatarManager","CanvasResolutionManager","ExportManager","FocusScreenManager","ResizeScreenManager","RotateScreenManager","Singleton","UIElementsManager","UIManager","ModifyWidget","Orientation","Scalable","ShownHide","ChristmasItems","Utils"]);