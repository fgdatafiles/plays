/** Built with 2DKit, http://2dkit.com */
'use strict';(function(tf){function s(a,b){function c(){}c.prototype=a;var d=new c,f;for(f in b)d[f]=b[f];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function jf(a){return a instanceof Array?function(){return z.iter(a)}:"function"==typeof a.iterator?I(a,a.iterator):a.iterator}function I(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=uf++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var l={},p=function(){return U.__string_rec(this,"")},$a=function(a,b){this.r=RegExp(a,b.split("u").join(""))};l.EReg=$a;$a.__name__=["EReg"];$a.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw new A("EReg::matched");},matchedPos:function(){if(null==this.r.m)throw new A("No string matched");
return{pos:this.r.m.index,len:this.r.m[0].length}},__class__:$a};var z=function(){};l.HxOverrides=z;z.__name__=["HxOverrides"];z.strDate=function(a){switch(a.length){case 8:a=a.split(":");var b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw new A("Invalid date format : "+
a);}};z.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};z.substr=function(a,b,c){if(null==c)c=a.length;else if(0>c)if(0==b)c=a.length+c;else return"";return a.substr(b,c)};z.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};z.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ab=function(){};l.Lambda=Ab;Ab.__name__=["Lambda"];Ab.array=function(a){var b=[];for(a=jf(a)();a.hasNext();){var c=
a.next();b.push(c)}return b};Ab.count=function(a,b){var c=0;if(null==b)for(var d=jf(a)();d.hasNext();)d.next(),++c;else for(d=jf(a)();d.hasNext();){var f=d.next();b(f)&&++c}return c};var Rd=function(){this.length=0};l.List=Rd;Rd.__name__=["List"];Rd.prototype={add:function(a){a=new Sd(a,null);null==this.h?this.h=a:this.q.next=a;this.q=a;this.length++},iterator:function(){return new Td(this.h)},__class__:Rd};var Sd=function(a,b){this.item=a;this.next=b};l["_List.ListNode"]=Sd;Sd.__name__=["_List",
"ListNode"];Sd.prototype={__class__:Sd};var Td=function(a){this.head=a};l["_List.ListIterator"]=Td;Td.__name__=["_List","ListIterator"];Td.prototype={hasNext:function(){return null!=this.head},next:function(){var a=this.head.item;this.head=this.head.next;return a},__class__:Td};Math.__name__=["Math"];var X=function(){};l.Reflect=X;X.__name__=["Reflect"];X.field=function(a,b){try{return a[b]}catch(c){return null}};X.setProperty=function(a,b,c){var d,f;f=a.__properties__?d=a.__properties__["set_"+b]:
!1;if(f)a[d](c);else a[b]=c};X.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};X.isFunction=function(a){return"function"==typeof a?!(a.__name__||a.__ename__):!1};X.compare=function(a,b){return a==b?0:a>b?1:-1};var N=function(){};l.Std=N;N.__name__=["Std"];N.string=function(a){return U.__string_rec(a,"")};N.parseInt=function(a){var b=parseInt(a,10);0!=b||120!=z.cca(a,1)&&88!=z.cca(a,1)||(b=
parseInt(a));return isNaN(b)?null:b};N.random=function(a){return 0>=a?0:Math.floor(Math.random()*a)};var ab=function(){this.b=""};l.StringBuf=ab;ab.__name__=["StringBuf"];ab.prototype={__class__:ab};var ba=function(){};l.StringTools=ba;ba.__name__=["StringTools"];ba.startsWith=function(a,b){return a.length>=b.length?z.substr(a,0,b.length)==b:!1};ba.endsWith=function(a,b){var c=b.length,d=a.length;return d>=c?z.substr(a,d-c,c)==b:!1};ba.isSpace=function(a,b){var c=z.cca(a,b);return 8<c&&14>c?!0:32==
c};ba.ltrim=function(a){for(var b=a.length,c=0;c<b&&ba.isSpace(a,c);)++c;return 0<c?z.substr(a,c,b-c):a};ba.rtrim=function(a){for(var b=a.length,c=0;c<b&&ba.isSpace(a,b-c-1);)++c;return 0<c?z.substr(a,0,b-c):a};ba.trim=function(a){return ba.ltrim(ba.rtrim(a))};ba.replace=function(a,b,c){return a.split(b).join(c)};var ca=function(){};l.Type=ca;ca.__name__=["Type"];ca.getSuperClass=function(a){return a.__super__};ca.getClassName=function(a){a=a.__name__;return null==a?null:a.join(".")};ca.resolveClass=
function(a){a=l[a];return null!=a&&a.__name__?a:null};ca.resolveEnum=function(a){a=l[a];return null!=a&&a.__ename__?a:null};ca.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],
b[1],b[2],b[3],b[4],b[5],b[6],b[7]);case 9:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8]);case 10:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9]);case 11:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);case 12:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11]);case 13:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12]);case 14:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],
b[11],b[12],b[13]);default:throw new A("Too many arguments");}};ca.createEmptyInstance=function(a){function b(){}b.prototype=a.prototype;return new b};ca.createEnum=function(a,b,c){var d=X.field(a,b);if(null==d)throw new A("No such constructor "+b);if(X.isFunction(d)){if(null==c)throw new A("Constructor "+b+" need parameters");return d.apply(a,c)}if(null!=c&&0!=c.length)throw new A("Constructor "+b+" does not need parameters");return d};var x=function(a){this.nodeType=a;this.children=[];this.attributeMap=
new P};l.Xml=x;x.__name__=["Xml"];x.parse=function(a){return Ta.parse(a)};x.createElement=function(a){var b=new x(x.Element);if(b.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+b.nodeType);b.nodeName=a;return b};x.createPCData=function(a){var b=new x(x.PCData);if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};x.createCData=function(a){var b=new x(x.CData);if(b.nodeType==x.Document||b.nodeType==
x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};x.createComment=function(a){var b=new x(x.Comment);if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};x.createDocType=function(a){var b=new x(x.DocType);if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};x.createProcessingInstruction=function(a){var b=new x(x.ProcessingInstruction);
if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b.nodeValue=a;return b};x.createDocument=function(){return new x(x.Document)};x.prototype={get:function(a){if(this.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;return null!=E[a]?b.getReserved(a):b.h[a]},set:function(a,b){if(this.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+this.nodeType);var c=this.attributeMap;
null!=E[a]?c.setReserved(a,b):c.h[a]=b},exists:function(a){if(this.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+this.nodeType);var b=this.attributeMap;return null!=E[a]?b.existsReserved(a):b.h.hasOwnProperty(a)},elementsNamed:function(a){if(this.nodeType!=x.Document&&this.nodeType!=x.Element)throw new A("Bad node type, expected Element or Document but found "+this.nodeType);for(var b=[],c=0,d=this.children;c<d.length;){var f=d[c];++c;var h;if(f.nodeType==x.Element){if(f.nodeType!=
x.Element)throw new A("Bad node type, expected Element but found "+f.nodeType);h=f.nodeName==a}else h=!1;h&&b.push(f)}return z.iter(b)},firstElement:function(){if(this.nodeType!=x.Document&&this.nodeType!=x.Element)throw new A("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=0,b=this.children;a<b.length;){var c=b[a];++a;if(c.nodeType==x.Element)return c}return null},addChild:function(a){if(this.nodeType!=x.Document&&this.nodeType!=x.Element)throw new A("Bad node type, expected Element or Document but found "+
this.nodeType);null!=a.parent&&a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=x.Document&&this.nodeType!=x.Element)throw new A("Bad node type, expected Element or Document but found "+this.nodeType);return z.remove(this.children,a)?(a.parent=null,!0):!1},__class__:x};var M=function(){};l["aop.Anims"]=M;M.__name__=["aop","Anims"];M.spawn=function(a,b,c,d,f,h){null==h&&(h=!0);null==f&&(f=!0);a.$BF[1].setScale(c);f&&a.$BF[1].alpha.set__(0);c=new C;
c.run(new D([new u(b),new t(function(){f&&a.$BF[1].alpha.animateTo(1,0.75*d);h?(a.$BF[1].scaleX.animateTo(1,d,H.bounceOut),a.$BF[1].scaleY.animateTo(1,d,H.bounceOut)):(a.$BF[1].scaleX.animateTo(1,d),a.$BF[1].scaleY.animateTo(1,d))})]));a.add(c)};M.unspawn=function(a,b,c,d,f){null==f&&(f=!1);null==d&&(d=!0);var h=new C;h.run(new D([new u(b),new t(function(){a.$BF[1].alpha.animateTo(0,c);d?(a.$BF[1].scaleX.animateTo(0.5,c,H.bounceIn),a.$BF[1].scaleY.animateTo(0.5,c,H.bounceIn)):(a.$BF[1].scaleX.animateTo(0.5,
c),a.$BF[1].scaleY.animateTo(0.5,c))}),new u(b),new t(function(){f&&a.dispose()})]));a.add(h)};M.pulse=function(a,b,c){var d=[];d.push(new ua(a.$BF[1].scaleX,b,c));d.push(new ua(a.$BF[1].scaleY,b,c));b=[];b.push(new ua(a.$BF[1].scaleX,1,c));b.push(new ua(a.$BF[1].scaleY,1,c));c=new C;c.run(new Ha(new D([new bb(d),new bb(b)])));a.add(c)};M.pulseUpDown=function(a,b,c){var d=a.$BF[1].y.$hF,f=new C;f.run(new Ha(new D([new ua(a.$BF[1].y,d+b,c,H.sineInOut),new ua(a.$BF[1].y,d,c,H.sineInOut)])));a.add(f)};
var Bb=function(){};l["haxe.IMap"]=Bb;Bb.__name__=["haxe","IMap"];Bb.prototype={__class__:Bb};var Wb=function(){};l["haxe._Unserializer.DefaultResolver"]=Wb;Wb.__name__=["haxe","_Unserializer","DefaultResolver"];Wb.prototype={resolveClass:function(a){return ca.resolveClass(a)},resolveEnum:function(a){return ca.resolveEnum(a)},__class__:Wb};var va=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=va.DEFAULT_RESOLVER;null==a&&(a=new Wb,va.DEFAULT_RESOLVER=a);this.resolver=
a};l["haxe.Unserializer"]=va;va.__name__=["haxe","Unserializer"];va.initCodes=function(){for(var a=[],b=0,c=va.BASE64.length;b<c;){var d=b++;a[va.BASE64.charCodeAt(d)]=d}return a};va.run=function(a){return(new va(a)).unserialize()};va.prototype={readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},readFloat:function(){for(var a=this.pos;;){var b=
this.buf.charCodeAt(this.pos);if(b!=b)break;if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return parseFloat(z.substr(this.buf,a,this.pos-a))},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw new A("Invalid object");if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw new A("Invalid object key");var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw new A("Invalid enum format");
var c=this.readDigits();if(0==c)return ca.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ca.createEnum(a,b,d)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var a=this.unserialize(),b=this.resolver.resolveClass(a);if(null==b)throw new A("Class not found "+a);return b;case 66:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new A("Enum not found "+a);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new A("Class not found "+
a);a=ca.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw new A("Invalid custom data");return a;case 77:a=new Aa;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw new A("Invalid string reference");return this.scache[a];case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;
break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 98:a=new P;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);){var b=this.unserialize(),c=this.unserialize();null!=E[b]?a.setReserved(b,c):a.h[b]=c}this.pos++;return a;case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw new A("Class not found "+a);a=ca.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 100:return this.readFloat();
case 102:return!1;case 105:return this.readDigits();case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new A("Enum not found "+a);this.pos++;var c=this.readDigits(),d=b.__constructs__.slice()[c];if(null==d)throw new A("Unknown enum index "+a+"@"+c);a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 107:return NaN;case 108:a=new Rd;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());this.pos++;return a;case 109:return-Infinity;case 110:return null;
case 111:return a={},this.cache.push(a),this.unserializeObject(a),a;case 112:return Infinity;case 113:a=new Ba;this.cache.push(a);for(b=this.buf.charCodeAt(this.pos++);58==b;)b=this.readDigits(),c=this.unserialize(),a.h[b]=c,b=this.buf.charCodeAt(this.pos++);if(104!=b)throw new A("Invalid IntMap format");return a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw new A("Invalid reference");return this.cache[a];case 115:a=this.readDigits();d=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||
this.length-this.pos<a)throw new A("Invalid bytes length");var f=va.CODES;null==f&&(f=va.initCodes(),va.CODES=f);for(var h=this.pos,w=a&3,g=h+(a-w),b=new La(new ArrayBuffer(3*(a>>2)+(2<=w?w-1:0))),c=0;h<g;){var e=f[d.charCodeAt(h++)],k=f[d.charCodeAt(h++)];b.b[c++]=(e<<2|k>>4)&255;e=f[d.charCodeAt(h++)];b.b[c++]=(k<<4|e>>2)&255;k=f[d.charCodeAt(h++)];b.b[c++]=(e<<6|k)&255}2<=w&&(k=f[d.charCodeAt(h++)],g=f[d.charCodeAt(h++)],b.b[c++]=(k<<2|g>>4)&255,3==w&&(d=f[d.charCodeAt(h++)],b.b[c++]=(g<<4|d>>
2)&255));this.pos+=a;this.cache.push(b);return b;case 116:return!0;case 118:return 48<=this.buf.charCodeAt(this.pos)&&57>=this.buf.charCodeAt(this.pos)&&48<=this.buf.charCodeAt(this.pos+1)&&57>=this.buf.charCodeAt(this.pos+1)&&48<=this.buf.charCodeAt(this.pos+2)&&57>=this.buf.charCodeAt(this.pos+2)&&48<=this.buf.charCodeAt(this.pos+3)&&57>=this.buf.charCodeAt(this.pos+3)&&45==this.buf.charCodeAt(this.pos+4)?(a=z.strDate(z.substr(this.buf,this.pos,19)),this.pos+=19):(a=this.readFloat(),a=new Date(a)),
this.cache.push(a),a;case 119:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw new A("Enum not found "+a);a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 120:throw A.wrap(this.unserialize());case 121:a=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<a)throw new A("Invalid string length");b=z.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 122:return 0}this.pos--;
throw new A("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos);},__class__:va};var Ba=function(){this.h={}};l["haxe.ds.IntMap"]=Ba;Ba.__name__=["haxe","ds","IntMap"];Ba.__interfaces__=[Bb];Ba.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},__class__:Ba};var Aa=function(){this.h={__keys__:{}}};l["haxe.ds.ObjectMap"]=Aa;
Aa.__name__=["haxe","ds","ObjectMap"];Aa.__interfaces__=[Bb];Aa.assignId=function(a){return a.__id__=++Aa.count};Aa.getId=function(a){return a.__id__};Aa.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Aa.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;
for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return z.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:Aa};var Ia=function(a,b){this.map=a;this.keys=b;this.index=0;this.count=b.length};l["haxe.ds._StringMap.StringMapIterator"]=Ia;Ia.__name__=["haxe","ds","_StringMap","StringMapIterator"];Ia.prototype={hasNext:function(){return this.index<
this.count},next:function(){var a=this.map,b=this.keys[this.index++];return null!=E[b]?a.getReserved(b):a.h[b]},__class__:Ia};var P=function(){this.h={}};l["haxe.ds.StringMap"]=P;P.__name__=["haxe","ds","StringMap"];P.__interfaces__=[Bb];P.prototype={set:function(a,b){null!=E[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=E[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=E[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&
(this.rh={});this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},keys:function(){return z.iter(this.arrayKeys())},arrayKeys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a},iterator:function(){return new Ia(this,this.arrayKeys())},__class__:P};var La=function(a){this.length=a.byteLength;
this.b=new Uint8Array(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};l["haxe.io.Bytes"]=La;La.__name__=["haxe","io","Bytes"];La.alloc=function(a){return new La(new ArrayBuffer(a))};La.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=a.charCodeAt(c++);55296<=d&&56319>=d&&(d=d-55232<<10|a.charCodeAt(c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new La((new Uint8Array(b)).buffer)};
La.ofData=function(a){var b=a.hxBytes;return null!=b?b:new La(a)};La.fastGet=function(a,b){return a.bytes[b]};La.prototype={__class__:La};var Oe=function(){};l["haxe.io.FPHelper"]=Oe;Oe.__name__=["haxe","io","FPHelper"];Oe.i32ToFloat=function(a){var b=a>>>23&255,c=a&8388607;return 0==c&&0==b?0:(1-(a>>>31<<1))*(1+Math.pow(2,-23)*c)*Math.pow(2,b-127)};Oe.floatToI32=function(a){if(0==a)return 0;var b=0>a?-a:a,c=Math.floor(Math.log(b)/0.6931471805599453);-127>c?c=-127:128<c&&(c=128);b=Math.round(8388608*
(b/Math.pow(2,c)-1));8388608==b&&128>c&&(b=0,++c);return(0>a?-2147483648:0)|c+127<<23|b};var Xb=function(){};l["haxe.rtti.Meta"]=Xb;Xb.__name__=["haxe","rtti","Meta"];Xb.getType=function(a){a=Xb.getMeta(a);return null==a||null==a.obj?{}:a.obj};Xb.getMeta=function(a){return a.__meta__};var Ud=function(a){this.__x=a};l["haxe.xml._Fast.NodeAccess"]=Ud;Ud.__name__=["haxe","xml","_Fast","NodeAccess"];Ud.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b){if(this.__x.nodeType==
x.Document)b="Document";else{b=this.__x;if(b.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+b.nodeType);b=b.nodeName}throw new A(b+" is missing element "+a);}return new lb(b)},__class__:Ud};var Vd=function(a){this.__x=a};l["haxe.xml._Fast.AttribAccess"]=Vd;Vd.__name__=["haxe","xml","_Fast","AttribAccess"];Vd.prototype={resolve:function(a){if(this.__x.nodeType==x.Document)throw new A("Cannot access document attribute "+a);var b=this.__x.get(a);if(null==b){b=this.__x;if(b.nodeType!=
x.Element)throw new A("Bad node type, expected Element but found "+b.nodeType);throw new A(b.nodeName+" is missing attribute "+a);}return b},__class__:Vd};var Wd=function(a){this.__x=a};l["haxe.xml._Fast.HasAttribAccess"]=Wd;Wd.__name__=["haxe","xml","_Fast","HasAttribAccess"];Wd.prototype={__class__:Wd};var Xd=function(a){this.__x=a};l["haxe.xml._Fast.HasNodeAccess"]=Xd;Xd.__name__=["haxe","xml","_Fast","HasNodeAccess"];Xd.prototype={__class__:Xd};var Yd=function(a){this.__x=a};l["haxe.xml._Fast.NodeListAccess"]=
Yd;Yd.__name__=["haxe","xml","_Fast","NodeListAccess"];Yd.prototype={__class__:Yd};var lb=function(a){if(a.nodeType!=x.Document&&a.nodeType!=x.Element)throw new A("Invalid nodeType "+a.nodeType);this.x=a;this.node=new Ud(a);this.nodes=new Yd(a);this.att=new Vd(a);this.has=new Wd(a);this.hasNode=new Xd(a)};l["haxe.xml.Fast"]=lb;lb.__name__=["haxe","xml","Fast"];lb.prototype={get_name:function(){if(this.x.nodeType==x.Document)return"Document";var a=this.x;if(a.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+
a.nodeType);return a.nodeName},get_innerData:function(){var a=this.x;if(a.nodeType!=x.Document&&a.nodeType!=x.Element)throw new A("Bad node type, expected Element or Document but found "+a.nodeType);a=z.iter(a.children);if(!a.hasNext())throw new A(this.get_name()+" does not have data");var b=a.next();if(a.hasNext()){var c=a.next();if(b.nodeType==x.PCData&&c.nodeType==x.CData){if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b=""==ba.trim(b.nodeValue)}else b=
!1;if(b){if(!a.hasNext()){if(c.nodeType==x.Document||c.nodeType==x.Element)throw new A("Bad node type, unexpected "+c.nodeType);return c.nodeValue}b=a.next();if(b.nodeType==x.PCData){if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);b=""==ba.trim(b.nodeValue)}else b=!1;if(b&&!a.hasNext()){if(c.nodeType==x.Document||c.nodeType==x.Element)throw new A("Bad node type, unexpected "+c.nodeType);return c.nodeValue}}throw new A(this.get_name()+" does not only have data");
}if(b.nodeType!=x.PCData&&b.nodeType!=x.CData)throw new A(this.get_name()+" does not have data");if(b.nodeType==x.Document||b.nodeType==x.Element)throw new A("Bad node type, unexpected "+b.nodeType);return b.nodeValue},__class__:lb,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var ja=function(a,b,c){this.xml=b;this.message=a;this.position=c;this.lineNumber=1;for(a=this.positionAtLine=0;a<c;){var d=a++,d=b.charCodeAt(d);10==d?(this.lineNumber++,this.positionAtLine=0):13!=d&&this.positionAtLine++}};
l["haxe.xml.XmlParserException"]=ja;ja.__name__=["haxe","xml","XmlParserException"];ja.prototype={toString:function(){return ca.getClassName(U.getClass(this))+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:ja};var Ta=function(){};l["haxe.xml.Parser"]=Ta;Ta.__name__=["haxe","xml","Parser"];Ta.parse=function(a,b){null==b&&(b=!1);var c=x.createDocument();Ta.doParse(a,b,0,c);return c};Ta.doParse=function(a,b,c,d){null==c&&(c=0);for(var f=null,h=1,w=1,g=null,e=0,
k=0,m=0,l=a.charCodeAt(c),n=new ab,p=1,q=-1;l==l;){switch(h){case 0:switch(l){case 9:case 10:case 13:case 32:break;default:h=w;continue}break;case 1:if(60==l)h=0,w=2;else{e=c;h=13;continue}break;case 2:switch(l){case 33:if(91==a.charCodeAt(c+1)){c+=2;if("CDATA["!=z.substr(a,c,6).toUpperCase())throw new A(new ja("Expected <![CDATA[",a,c));c+=5;h=17}else if(68==a.charCodeAt(c+1)||100==a.charCodeAt(c+1)){if("OCTYPE"!=z.substr(a,c+2,6).toUpperCase())throw new A(new ja("Expected <!DOCTYPE",a,c));c+=8;
h=16}else{if(45!=a.charCodeAt(c+1)||45!=a.charCodeAt(c+2))throw new A(new ja("Expected \x3c!--",a,c));c+=2;h=15}e=c+1;break;case 47:if(null==d)throw new A(new ja("Expected node name",a,c));e=c+1;h=0;w=10;break;case 63:h=14;e=c;break;default:h=3;e=c;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(c==e)throw new A(new ja("Expected node name",a,c));f=x.createElement(z.substr(a,e,c-e));d.addChild(f);++k;h=0;w=4;continue}break;case 4:switch(l){case 47:h=
11;break;case 62:h=9;break;default:h=5;e=c;continue}break;case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(e==c)throw new A(new ja("Expected attribute name",a,c));g=z.substr(a,e,c-e);if(f.exists(g))throw new A(new ja("Duplicate attribute ["+g+"]",a,c));h=0;w=6;continue}break;case 6:if(61==l)h=0,w=7;else throw new A(new ja("Expected =",a,c));break;case 7:switch(l){case 34:case 39:n=new ab;h=8;e=c+1;q=l;break;default:throw new A(new ja('Expected "',a,c));}break;
case 8:switch(l){case 38:p=c-e;n.b+=null==p?z.substr(a,e,null):z.substr(a,e,p);h=18;p=8;e=c+1;break;case 60:case 62:if(b)throw new A(new ja("Invalid unescaped "+String.fromCharCode(l)+" in attribute value",a,c));l==q&&(w=c-e,n.b+=null==w?z.substr(a,e,null):z.substr(a,e,w),w=n.b,n=new ab,f.set(g,w),h=0,w=4);break;default:l==q&&(w=c-e,n.b+=null==w?z.substr(a,e,null):z.substr(a,e,w),w=n.b,n=new ab,f.set(g,w),h=0,w=4)}break;case 9:e=c=Ta.doParse(a,b,c,f);h=1;break;case 10:if(!(97<=l&&122>=l||65<=l&&90>=
l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(e==c)throw new A(new ja("Expected node name",a,c));w=z.substr(a,e,c-e);if(d.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+d.nodeType);if(w!=d.nodeName){if(d.nodeType!=x.Element)throw new A("Bad node type, expected Element but found "+d.nodeType);throw new A(new ja("Expected </"+d.nodeName+">",a,c));}h=0;w=12;continue}break;case 11:if(62==l)h=1;else throw new A(new ja("Expected >",a,c));break;case 12:if(62==l)return 0==
k&&d.addChild(x.createPCData("")),c;throw new A(new ja("Expected >",a,c));case 13:60==l?(w=c-e,n.b+=null==w?z.substr(a,e,null):z.substr(a,e,w),w=x.createPCData(n.b),n=new ab,d.addChild(w),++k,h=0,w=2):38==l&&(p=c-e,n.b+=null==p?z.substr(a,e,null):z.substr(a,e,p),h=18,p=13,e=c+1);break;case 14:63==l&&62==a.charCodeAt(c+1)&&(++c,l=z.substr(a,e+1,c-e-2),d.addChild(x.createProcessingInstruction(l)),++k,h=1);break;case 15:45==l&&45==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(d.addChild(x.createComment(z.substr(a,
e,c-e))),++k,c+=2,h=1);break;case 16:91==l?++m:93==l?--m:62==l&&0==m&&(d.addChild(x.createDocType(z.substr(a,e,c-e))),++k,h=1);break;case 17:93==l&&93==a.charCodeAt(c+1)&&62==a.charCodeAt(c+2)&&(l=x.createCData(z.substr(a,e,c-e)),d.addChild(l),++k,c+=2,h=1);break;case 18:if(59==l){e=z.substr(a,e,c-e);if(35==e.charCodeAt(0))e=120==e.charCodeAt(1)?N.parseInt("0"+z.substr(e,1,e.length-1)):N.parseInt(z.substr(e,1,e.length-1)),n.b+=String.fromCharCode(e);else if(l=Ta.escapes,null!=E[e]?l.existsReserved(e):
l.h.hasOwnProperty(e))l=Ta.escapes,e=null!=E[e]?l.getReserved(e):l.h[e],n.b+=N.string(e);else{if(b)throw new A(new ja("Undefined entity: "+e,a,c));n.b+=N.string("&"+e+";")}e=c+1;h=p}else if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)&&35!=l){if(b)throw new A(new ja("Invalid character in entity: "+String.fromCharCode(l),a,c));n.b+="&";l=c-e;n.b+=null==l?z.substr(a,e,null):z.substr(a,e,l);e=c--;h=p}}l=a.charCodeAt(++c)}1==h&&(e=c,h=13);if(13==h){if(c!=e||0==k)b=c-e,n.b+=
null==b?z.substr(a,e,null):z.substr(a,e,b),d.addChild(x.createPCData(n.b));return c}if(!b&&18==h&&13==p)return n.b+="&",b=c-e,n.b+=null==b?z.substr(a,e,null):z.substr(a,e,b),d.addChild(x.createPCData(n.b)),c;throw new A(new ja("Unexpected end",a,c));};var A=function(a){Error.call(this);this.val=a;this.message=String(a);Error.captureStackTrace&&Error.captureStackTrace(this,A)};l["js._Boot.HaxeError"]=A;A.__name__=["js","_Boot","HaxeError"];A.wrap=function(a){return a instanceof Error?a:new A(a)};A.__super__=
Error;A.prototype=s(Error.prototype,{__class__:A});var U=function(){};l["js.Boot"]=U;U.__name__=["js","Boot"];U.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;a=U.__nativeClassName(a);return null!=a?U.__resolveNativeClass(a):null};U.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;"function"==c&&(a.__name__||a.__ename__)&&(c="object");switch(c){case "function":return"<function>";case "object":if(a instanceof
Array){if(a.__enum__){if(2==a.length)return a[0];c=a[0]+"(";b+="\t";for(var d=2,f=a.length;d<f;)var h=d++,c=2!=h?c+(","+U.__string_rec(a[h],b)):c+U.__string_rec(a[h],b);return c+")"}c=a.length;d="[";b+="\t";for(f=0;f<c;)h=f++,d+=(0<h?",":"")+U.__string_rec(a[h],b);return d+"]"}try{d=a.toString}catch(w){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";f=null!=a.hasOwnProperty;for(c in a)f&&!a.hasOwnProperty(c)||
"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+U.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "string":return a;default:return String(a)}};U.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,f=c.length;d<f;){var h=d++,h=c[h];if(h==b||U.__interfLoop(h,b))return!0}return U.__interfLoop(a.__super__,b)};U.__instanceof=function(a,b){if(null==
b)return!1;switch(b){case Array:return a instanceof Array?null==a.__enum__:!1;case mf:return"boolean"==typeof a;case vf:return!0;case nf:return"number"==typeof a;case wf:return"number"==typeof a?(a|0)===a:!1;case String:return"string"==typeof a;default:if(null!=a)if("function"==typeof b){if(a instanceof b||U.__interfLoop(U.getClass(a),b))return!0}else{if("object"==typeof b&&U.__isNativeObj(b)&&a instanceof b)return!0}else return!1;return b==xf&&null!=a.__name__||b==yf&&null!=a.__ename__?!0:a.__enum__==
b}};U.__nativeClassName=function(a){a=U.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};U.__isNativeObj=function(a){return null!=U.__nativeClassName(a)};U.__resolveNativeClass=function(a){return tf[a]};var Pe=function(){};l["js.Browser"]=Pe;Pe.__name__=["js","Browser"];Pe.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};var Qe=function(){};l["js.html._CanvasElement.CanvasUtil"]=Qe;Qe.__name__=["js","html",
"_CanvasElement","CanvasUtil"];Qe.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var f=d[c];++c;f=a.getContext(f,b);if(null!=f)return f}return null};var Ca=function(){};l["kit.util.Disposable"]=Ca;Ca.__name__=["kit","util","Disposable"];Ca.prototype={__class__:Ca};var r=function(){this.$oE=null;this.$nE=0;this.owner=this.next=null};l["kit.Component"]=r;r.__name__=["kit","Component"];r.__interfaces__=[Ca];r.prototype={onAdded:function(){},onRemoved:function(){null!=
this.$oE&&this.$oE.$5E()},onStart:function(){},onStop:function(){},onUpdate:function(a){},onMessage:function(a,b){if(null!=this.$oE){var c=this.$oE.$3E;if(null!=c&&(c=null!=E[a]?c.getReserved(a):c.h[a],null!=c&&null!=c.$uF))return c.emit(b),!0}return!1},connect0:function(a,b){var c=a.connect(b);this.registerDisposable(c);return this},connect1:function(a,b){var c=a.connect(b);this.registerDisposable(c);return this},registerDisposable:function(a){null==this.$oE&&(this.$oE=new Zd);null==this.$oE.$4E&&
(this.$oE.$4E=[]);this.$oE.$4E.push(a)},dispose:function(){null!=this.owner?this.owner.remove(this):null!=this.$oE&&this.$oE.$5E()},get_entitySlot:function(){return-1},$mE:function(){},__class__:r,__properties__:{get_entitySlot:"get_entitySlot"}};var Cb=function(){};l["kit.asset.AssetPack"]=Cb;Cb.__name__=["kit","asset","AssetPack"];Cb.__interfaces__=[Ca];Cb.prototype={__class__:Cb};var Yb=function(){this.$tE=new P;this.$sE=[]};l["kit.Assets"]=Yb;Yb.__name__=["kit","Assets"];Yb.__interfaces__=[Cb];
Yb.__super__=r;Yb.prototype=s(r.prototype,{get_entitySlot:function(){return 0},getTexture:function(a,b){null==b&&(b=!0);for(var c=0,d=this.$sE;c<d.length;){var f=d[c];++c;f=f.$uE.getTexture(a,!1);if(null!=f)return f}c=this.$rE();return null!=c?c.getTexture(a,b):null},getSound:function(a,b){null==b&&(b=!0);for(var c=0,d=this.$sE;c<d.length;){var f=d[c];++c;f=f.$uE.getSound(a,!1);if(null!=f)return f}c=this.$rE();return null!=c?c.getSound(a,b):null},getFile:function(a,b){null==b&&(b=!0);for(var c=0,
d=this.$sE;c<d.length;){var f=d[c];++c;f=f.$uE.getFile(a,!1);if(null!=f)return f}c=this.$rE();return null!=c?c.getFile(a,b):null},getVideo:function(a,b){null==b&&(b=!0);for(var c=0,d=this.$sE;c<d.length;){var f=d[c];++c;f=f.$uE.getVideo(a,!1);if(null!=f)return f}c=this.$rE();return null!=c?c.getVideo(a,b):null},getSceneSymbol:function(a,b){null==b&&(b=!0);for(var c=0,d=this.$sE;c<d.length;){var f=d[c];++c;var h=f.$zE,h=null!=E[a]?h.getReserved(a):h.h[a];if(null!=h)return h;if(null!=f.$uE.getFile(a+
".symbol",!1))return c=new ka(this,a,!0),f=f.$zE,null!=E[a]?f.setReserved(a,c):f.h[a]=c,c.disposeFiles()}f=this.$rE();return null!=f?f.getSceneSymbol(a,b):null},$rE:function(){return null==this.owner||null==this.owner.parent?null:this.owner.parent._internal_getFromParents(0)},dispose:function(){r.prototype.dispose.call(this);var a=this.$sE;this.$sE=[];this.$tE=new P;for(var b=0;b<a.length;){var c=a[b];++b;c.$uE.dispose()}},__class__:Yb});var Re=function(){this.$zE=new P};l.$CG=Re;Re.__name__=["$CG"];
Re.prototype={__class__:Re};var of=function(){};l.$CH=of;of.__name__=["$CH"];var Zd=function(){this.$3E=this.$4E=null};l.$CJ=Zd;Zd.__name__=["$CJ"];Zd.prototype={$5E:function(){var a=this.$4E;if(null!=a){this.$4E=null;for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}}this.$3E=null},__class__:Zd};var $d=function(){};l["kit.MessageResult"]=$d;$d.__name__=["kit","MessageResult"];$d.prototype={__class__:$d};var m=function(){this.active=!0;this.parent=this.firstChild=this.next=this.firstComponent=null;
this.$BF={}};l["kit.Entity"]=m;m.__name__=["kit","Entity"];m.__interfaces__=[Ca];m.$CF=function(a){for(var b=null;null!=a;)b=a,a=a.next;return b};m.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_entitySlot(),c=this.$BF[b];null!=c&&this.remove(c);this.$BF[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=
c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),a=c.get_entitySlot(),delete this.$BF[a],0!=(c.$nE&1)&&(c.onStop(),c.$nE&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;b?this.$9E(m.$CF(this.firstChild),a):this.$$E(a);return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){if(c==a){this.$8E(b);c.parent=null;c.next=null;break}b=c;c=c.next}},
emitMessage:function(a,b){for(var c=!1,d=this.firstComponent;null!=d;){var f=d.next;d.onMessage(a,b)&&(c=!0);d=f}m.$DF.handled=c;return m.$DF},emitMessageToParents:function(a,b){for(var c=!1,d=this;;){var f=d.parent;d.emitMessage(a,b).handled&&(c=!0);d=f;if(null==d)break}m.$DF.handled=c;return m.$DF},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();
this.disposeChildren()},yieldForStart:function(){for(var a=this.firstComponent;null!=a;){var b=a.next;0==(a.$nE&1)&&(a.$nE|=1,a.$mE(),a.onStart());a=b}for(a=this.firstChild;null!=a;)b=a.next,a.yieldForStart(),a=b},_internal_getFromParents:function(a,b){for(var c=this;;){var d=c.$BF[a];null!=b&&(d=d instanceof b?d:null);if(null!=d)return d;c=c.parent;if(null==c)break}return null},$8E:function(a){null!=a?a.next=a.next.next:this.$_E()},$9E:function(a,b){null!=a?(b.next=a.next,a.next=b):this.$$E(b)},
$$E:function(a){a.next=this.firstChild;this.firstChild=a},$_E:function(){this.firstChild=this.firstChild.next},__class__:m};var Se=function(){};l["kit.util.PackageLog"]=Se;Se.__name__=["kit","util","PackageLog"];var ae=function(){};l.$CK=ae;ae.__name__=["$CK"];ae.prototype={__class__:ae};var Ja=function(){this.$dF=!0};l.$CL=Ja;Ja.__name__=["$CL"];Ja.__interfaces__=[ae];Ja.$gF=function(a){var b=Pe.getLocalStorage();return null!=b?new Zb(b,a):new $b};Ja.prototype={init:function(){var a=this,b=null;
try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex","0");b.style.outlineStyle="none";B.$4P(b,"tap-highlight-color","transparent");b.setAttribute("moz-opaque","");this.$MF=new ac(b);this.$KF=new qa;this.$JF=new bc(this.$KF,b);this.$LF=this.$IF(b);this.$EF=new cb;this.$ZF=b;this.$aF=b.parentElement;this.$aF.style.overflow="hidden";this.$aF.style.position="relative";B.$4P(this.$aF,"touch-action","none");var d=0,f=function(c){if(!(1E3>c.timeStamp-d)){var f=b.getBoundingClientRect(),h=a.$GF(c,
f),f=a.$HF(c,f);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a.$JF.$JL(h,f,c.button),b.focus());break;case "mousemove":a.$JF.$NL(h,f);break;case "mouseup":a.$JF.$KL(h,f,c.button);break;case "DOMMouseScroll":case "mousewheel":a.$JF.$OL(h,f,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",f,!1);window.addEventListener("mousemove",f,!1);window.addEventListener("mouseup",f,!1);b.addEventListener("mousewheel",f,!1);b.addEventListener("DOMMouseScroll",
f,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h="undefined"!=typeof window.ontouchstart,f=B.$1P("maxTouchPoints",window.navigator).value|0;if(h||1<f){var w=new cc(this.$KF,h?4:f);this.$NF=w;f=function(b){var c=h?b.changedTouches:[b],f=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "MSPointerMove":case "pointermove":case "touchmove":b.preventDefault();for(b=0;b<c.length;){var e=c[b];++b;var g=a.$GF(e,f),k=a.$HF(e,f);w.$NL((h?e.identifier:e.pointerId)|
0,g,k)}break;case "MSPointerUp":case "pointerup":case "touchcancel":case "touchend":for(b=0;b<c.length;)e=c[b],++b,g=a.$GF(e,f),k=a.$HF(e,f),w.$KL((h?e.identifier:e.pointerId)|0,g,k);break;case "MSPointerDown":case "pointerdown":case "touchstart":for(b.preventDefault(),b=0;b<c.length;)e=c[b],++b,g=a.$GF(e,f),k=a.$HF(e,f),w.$JL((h?e.identifier:e.pointerId)|0,g,k)}};h?(b.addEventListener("touchstart",f,!1),b.addEventListener("touchmove",f,!1),b.addEventListener("touchend",f,!1),b.addEventListener("touchcancel",
f,!1)):(b.addEventListener("MSPointerDown",f,!1),b.addEventListener("MSPointerMove",f,!1),b.addEventListener("MSPointerUp",f,!1))}else this.$NF=new dc;var e=window.onerror;window.onerror=function(a,b,c){n.uncaughtError.emit(a);return null!=e?e(a,b,c):!1};var g=B.$1P("hidden",window.document);null!=g.value?(f=function(a){n.hidden.set__(X.field(window.document,g.field))},f(null),window.document.addEventListener(g.prefix+"visibilitychange",f,!1)):(f=function(a){n.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",
f,!1),window.addEventListener("pagehide",f,!1));n.hidden.get_changed().connect(function(b,c){b||(a.$cF=!0)});this.$cF=!1;this.$bF=Date.now();var k=B.$1P("requestAnimationFrame").value;if(null!=k){var l=window.performance,m=null!=l&&B.$3P("now",l);m&&(this.$bF=l.now());var p=null,p=function(c){k(p,b);c=m?l.now():c;a.$FF(c)};k(p,b)}else window.setInterval(function(){var b=Date.now();a.$FF(b)},16);fa.$fL("fullscreen")&&this.$NF.get_supported()&&this.$MF.get_fullscreenSupported()&&this.$NF.up.connect(function(b){a.$MF.fullscreen.$hF||
a.$MF.requestFullscreen()});var q=fa.$gL();null!=q&&(this.$MF.fullscreen.get_changed().connect(function(b,c){b&&a.$MF.lockOrientation(q)}),this.$MF.lockOrientation(q));this.$EF.$2N.add(new ec);this.$EF.$$I();return(new ga).$MT(null)},loadAssetPack:function(a){return(new T(this,a)).$2E},getLocalStorage:function(){if(null==this.$UF){var a="2DKit.local."+N.string(fa.$fL("id"));this.$UF=Ja.$gF(a)}return this.$UF},createLogHandler:function(a){return null},$FF:function(a){var b=(a-this.$bF)/1E3;this.$bF=
a;n.hidden.$hF||(this.$cF?this.$cF=!1:(this.$dF&&(this.$dF=!1,this.$MF.$oP(null)),this.$EF.$FF(b),this.$EF.$iH(this.$LF)))},getKeyboard:function(){var a=this;if(null==this.$TF){this.$TF=new Ka;var b=function(b){switch(b.type){case "keydown":a.$TF.$JL(b.keyCode)&&b.preventDefault();break;case "keyup":a.$TF.$KL(b.keyCode)}};this.$ZF.addEventListener("keydown",b,!1);this.$ZF.addEventListener("keyup",b,!1);if(null!=window.history&&null!=(kf=window.history,I(kf,kf.pushState))){var c=!1,d=function(){window.history.pushState("2DKitBack",
null);c=!0};window.addEventListener("popstate",function(b){c&&(null!=a.$TF.backButton.$uF?(d(),a.$TF.backButton.emit()):window.history.back())});if(B.$wP)this.$KF.down.connect(function(a){d()}).once();else d()}}return this.$TF},getExternal:function(){null==this.$RF&&(this.$RF=new fc);return this.$RF},getRenderer:function(){return this.$LF},$GF:function(a,b){return(a.clientX-b.left)*this.$MF.get_width()/b.width},$HF:function(a,b){return(a.clientY-b.top)*this.$MF.get_height()/b.height},$IF:function(a){try{var b=
Qe.getContextWebGL(a,{alpha:!1,depth:!1,stencil:!0,failIfMajorPerformanceCaveat:!0});if(null!=b){var c=new gc(this.$MF,b);if(c.$6R)return c}}catch(d){}return new hc(a)},__class__:Ja};var ea=function(a,b){this.$hF=a;this.$iF=null!=b?new Db(b):null};l["kit.util.Value"]=ea;ea.__name__=["kit","util","Value"];ea.prototype={watch:function(a){a(this.$hF,this.$hF);return this.get_changed().connect(a)},set__:function(a){var b=this.$hF;a!=b&&(this.$hF=a,null!=this.$iF&&this.$iF.emit(a,b));return a},get_changed:function(){null==
this.$iF&&(this.$iF=new Db);return this.$iF},__class__:ea,__properties__:{get_changed:"get_changed",set__:"set__"}};var mb=function(a,b){this.$jF=null;this.$lF=a;this.$kF=b;this.stayInList=!0};l["kit.util.SignalConnection"]=mb;mb.__name__=["kit","util","SignalConnection"];mb.__interfaces__=[Ca];mb.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this.$lF&&(this.$lF.$nF(this),this.$lF=null)},__class__:mb};var ma=function(a){this.$uF=null!=a?new mb(this,a):null;this.$vF=
null};l["kit.util.SignalBase"]=ma;ma.__name__=["kit","util","SignalBase"];ma.prototype={$mF:function(a,b){var c=this,d=new mb(this,a);this.$uF==ma.$wF?this.$oF(function(){c.$rF(d,b)}):this.$rF(d,b);return d},$nF:function(a){var b=this;this.$uF==ma.$wF?this.$oF(function(){b.$sF(a)}):this.$sF(a)},$oF:function(a){for(var b=null,c=this.$vF;null!=c;)b=c,c=c.next;a=new be(a);null!=b?b.next=a:this.$vF=a},$pF:function(){var a=this.$uF;this.$uF=ma.$wF;return a},$qF:function(a){this.$uF=a;a=this.$vF;for(this.$vF=
null;null!=a;)a.$YT(),a=a.next},$rF:function(a,b){if(b)a.$jF=this.$uF,this.$uF=a;else{for(var c=null,d=this.$uF;null!=d;)c=d,d=d.$jF;null!=c?c.$jF=a:this.$uF=a}},$sF:function(a){for(var b=null,c=this.$uF;null!=c;){if(c==a){a=c.$jF;null==b?this.$uF=a:b.$jF=a;break}b=c;c=c.$jF}},__class__:ma};var Db=function(a){ma.call(this,a)};l["kit.util.Signal2"]=Db;Db.__name__=["kit","util","Signal2"];Db.__super__=ma;Db.prototype=s(ma.prototype,{connect:function(a,b){null==b&&(b=!1);return this.$mF(a,b)},emit:function(a,
b){var c=this;this.$uF==ma.$wF?this.$oF(function(){c.$xF(a,b)}):this.$xF(a,b)},$xF:function(a,b){for(var c=this.$pF(),d=c;null!=d;)d.$kF(a,b),d.stayInList||d.dispose(),d=d.$jF;this.$qF(c)},__class__:Db});var db=function(a){ma.call(this,a)};l["kit.util.Signal0"]=db;db.__name__=["kit","util","Signal0"];db.__super__=ma;db.prototype=s(ma.prototype,{connect:function(a,b){null==b&&(b=!1);return this.$mF(a,b)},emit:function(){var a=this;this.$uF==ma.$wF?this.$oF(function(){a.$xF()}):this.$xF()},$xF:function(){for(var a=
this.$pF(),b=a;null!=b;)b.$kF(),b.stayInList||b.dispose(),b=b.$jF;this.$qF(a)},__class__:db});var Y=function(a){ma.call(this,a)};l["kit.util.Signal1"]=Y;Y.__name__=["kit","util","Signal1"];Y.__super__=ma;Y.prototype=s(ma.prototype,{connect:function(a,b){null==b&&(b=!1);return this.$mF(a,b)},emit:function(a){var b=this;this.$uF==ma.$wF?this.$oF(function(){b.$xF(a)}):this.$xF(a)},$xF:function(a){for(var b=this.$pF(),c=b;null!=c;)c.$kF(a),c.stayInList||c.dispose(),c=c.$jF;this.$qF(b)},__class__:Y});
var L=function(a,b){this.$yF=null;ea.call(this,a,b)};l["kit.animation.AnimatedFloat"]=L;L.__name__=["kit","animation","AnimatedFloat"];L.__super__=ea;L.prototype=s(ea.prototype,{set__:function(a){this.$yF=null;return ea.prototype.set__.call(this,a)},update:function(a){null!=this.$yF&&(ea.prototype.set__.call(this,this.$yF.update(a)),this.$yF.isComplete()&&(this.$yF=null))},animate:function(a,b,c,d){this.set__(a);this.animateTo(b,c,d)},animateTo:function(a,b,c){this.set_behavior(new nb(this.$hF,a,
b,c))},animateBy:function(a,b,c){this.set_behavior(new nb(this.$hF,this.$hF+a,b,c))},set_behavior:function(a){this.$yF=a;this.update(0);return a},__class__:L,__properties__:s(ea.prototype.__properties__,{set_behavior:"set_behavior"})});var n=function(){};l["kit.System"]=n;n.__name__=["kit","System"];n.$zF=function(){null==n.$3F&&(n.$3F=n.$2F.init(),n.$3F=n.$3F.then(function(a){return eb.init()}));return n.$3F};var ce=function(a){this.$5F=a};l["kit.util.Logger"]=ce;ce.__name__=["kit","util","Logger"];
ce.prototype={__class__:ce};var ic=function(){};l["kit.Log"]=ic;ic.__name__=["kit","Log"];ic.__super__=Se;ic.prototype=s(Se.prototype,{__class__:ic});var fb=function(a){null==a&&(a=1);this.$6F=0;r.call(this);this.scale=new L(a)};l["kit.SpeedAdjuster"]=fb;fb.__name__=["kit","SpeedAdjuster"];fb.__super__=r;fb.prototype=s(r.prototype,{get_entitySlot:function(){return 9},onUpdate:function(a){0<this.$6F&&(a=this.$6F,this.$6F=0);this.scale.update(a)},__class__:fb});var eb=function(a){this.$8F=a};l["kit.LegacyStorage"]=
eb;eb.__name__=["kit","LegacyStorage"];eb.init=function(){return n.$2F.getLocalStorage().get("LegacyStorage",{}).then(function(a){null==eb.$9F&&(eb.$9F=new eb(a))})};eb.prototype={__class__:eb};var de=function(){};l["kit.animation.Behavior"]=de;de.__name__=["kit","animation","Behavior"];de.prototype={__class__:de};var H=function(){};l["kit.animation.Ease"]=H;H.__name__=["kit","animation","Ease"];H.linear=function(a){return a};H.sineIn=function(a){return 1-Math.cos(1.5707963267948966*a)};H.sineOut=
function(a){return Math.sin(1.5707963267948966*a)};H.sineInOut=function(a){return 0.5-Math.cos(3.141592653589793*a)/2};H.bounceIn=function(a){a=1-a;return 0.36363636363636365>a?1-7.5625*a*a:0.7272727272727273>a?1-(7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75):0.9090909090909091>a?1-(7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375):1-(7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375)};H.bounceOut=function(a){return 0.36363636363636365>a?7.5625*a*a:0.7272727272727273>
a?7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75:0.9090909090909091>a?7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375:7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375};var nb=function(a,b,c,d){this.$KG=a;this.$LG=b;this.$MG=c;this.elapsed=0;this.$NG=null!=d?d:H.linear};l["kit.animation.Tween"]=nb;nb.__name__=["kit","animation","Tween"];nb.__interfaces__=[de];nb.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this.$MG?this.$LG:this.$KG+(this.$LG-
this.$KG)*this.$NG(this.elapsed/this.$MG)},isComplete:function(){return this.elapsed>=this.$MG},__class__:nb};var Qa=function(){};l["kit.asset.Asset"]=Qa;Qa.__name__=["kit","asset","Asset"];Qa.__interfaces__=[Ca];Qa.prototype={__class__:Qa};var q=l["kit.asset.AssetFormat"]={__ename__:!0,__constructs__:"WEBP PNG JPG GIF _2DKD _2DKP _2DKE MP3 M4A OPUS OGG WAV WOFF TTF OTF SWF MP4 WEBM Data".split(" ")};q.WEBP=["WEBP",0];q.WEBP.toString=p;q.WEBP.__enum__=q;q.PNG=["PNG",1];q.PNG.toString=p;q.PNG.__enum__=
q;q.JPG=["JPG",2];q.JPG.toString=p;q.JPG.__enum__=q;q.GIF=["GIF",3];q.GIF.toString=p;q.GIF.__enum__=q;q._2DKD=["_2DKD",4];q._2DKD.toString=p;q._2DKD.__enum__=q;q._2DKP=["_2DKP",5];q._2DKP.toString=p;q._2DKP.__enum__=q;q._2DKE=["_2DKE",6];q._2DKE.toString=p;q._2DKE.__enum__=q;q.MP3=["MP3",7];q.MP3.toString=p;q.MP3.__enum__=q;q.M4A=["M4A",8];q.M4A.toString=p;q.M4A.__enum__=q;q.OPUS=["OPUS",9];q.OPUS.toString=p;q.OPUS.__enum__=q;q.OGG=["OGG",10];q.OGG.toString=p;q.OGG.__enum__=q;q.WAV=["WAV",11];q.WAV.toString=
p;q.WAV.__enum__=q;q.WOFF=["WOFF",12];q.WOFF.toString=p;q.WOFF.__enum__=q;q.TTF=["TTF",13];q.TTF.toString=p;q.TTF.__enum__=q;q.OTF=["OTF",14];q.OTF.toString=p;q.OTF.__enum__=q;q.SWF=["SWF",15];q.SWF.toString=p;q.SWF.__enum__=q;q.MP4=["MP4",16];q.MP4.toString=p;q.MP4.__enum__=q;q.WEBM=["WEBM",17];q.WEBM.toString=p;q.WEBM.__enum__=q;q.Data=["Data",18];q.Data.toString=p;q.Data.__enum__=q;var ee=function(a,b,c,d){this.cacheKey=null;this.name=a;this.url=b;this.format=c;this.bytes=d};l["kit.asset.AssetEntry"]=
ee;ee.__name__=["kit","asset","AssetEntry"];ee.prototype={__class__:ee};var jc=function(){};l["kit.asset.File"]=jc;jc.__name__=["kit","asset","File"];jc.__interfaces__=[Qa];jc.prototype={__class__:jc};var wa=function(){this.$OG=this.$PG=null;this.pixelScale=1;this.$sE=[]};l["kit.asset.Manifest"]=wa;wa.__name__=["kit","asset","Manifest"];wa.fromAssets=function(a,b,c){null==c&&(c=!0);null==b&&(b=-1);b=1;c=[];for(var d=fa.$fL("assets"),f=0,h=X.fields(d);f<h.length;){var w=h[f];++f;if(ba.startsWith(w,
a)){var e=z.substr(w,a.length,null);if(0<e.length){var g=new $a("^-([\\d\\.]+)%$","");g.match(e)&&(e=parseFloat(g.matched(1)),c.push(new kc(w,e/100)))}else c.push(new kc(w,1))}}if(0==c.length)return null;c.sort(function(a,b){return X.compare(a.$UG,b.$UG)});a=null;for(f=0;f<c.length&&!(h=c[f],++f,a=h,h.$UG>=b););b=X.field(d,a.$TG);c=new wa;c.$OG="assets";c.pixelScale=a.$UG;try{var k=jsembed.baseUrl();c.$OG=k+c.$OG}catch(l){}k=encodeURIComponent(a.$TG);for(d=0;d<b.length;){a=b[d];++d;f=a.name;h=k;w=
0;for(e=f.split("/");w<e.length;)g=e[w],++w,h+="/"+encodeURIComponent(g);ba.endsWith(f,".__gz.txt")&&(f=z.substr(f,0,f.length-9));w=wa.$QG(f);w!=q.Data&&(f=ra.removeFileExtension(f));f=c.add(f,h,a.bytes,w);null!=a.md5&&(f.cacheKey="assets:"+N.string(a.md5))}return c};wa.$QG=function(a){a=ra.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "2dkd":return q._2DKD;case "2dke":return q._2DKE;case "2dkp":return q._2DKP;case "gif":return q.GIF;case "jpeg":case "jpg":return q.JPG;case "m4a":return q.M4A;
case "mp3":return q.MP3;case "mp4":return q.MP4;case "ogg":return q.OGG;case "opus":return q.OPUS;case "otf":return q.OTF;case "png":return q.PNG;case "swf":return q.SWF;case "ttf":return q.TTF;case "wav":return q.WAV;case "webm":return q.WEBM;case "webp":return q.WEBP;case "woff":return q.WOFF}return q.Data};wa.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=wa.$QG(b));a=new ee(a,b,d,c);this.$sE.push(a);return a},iterator:function(){return z.iter(this.$sE)},getFullURL:function(a){var b=
null!=this.$PG&&wa.$SG?this.$PG:this.$OG;return null!=b?ra.joinPath(b,a.url):a.url},__class__:wa};var kc=function(a,b){this.$TG=a;this.$UG=b};l.$CM=kc;kc.__name__=["$CM"];kc.prototype={__class__:kc};var Q=l.$CN={__ename__:!0,__constructs__:"CString CBool CFloat CInt CArray CEnum CClass".split(" ")};Q.CString=["CString",0];Q.CString.toString=p;Q.CString.__enum__=Q;Q.CBool=["CBool",1];Q.CBool.toString=p;Q.CBool.__enum__=Q;Q.CFloat=["CFloat",2];Q.CFloat.toString=p;Q.CFloat.__enum__=Q;Q.CInt=["CInt",
3];Q.CInt.toString=p;Q.CInt.__enum__=Q;Q.CArray=function(a){a=["CArray",4,a];a.__enum__=Q;a.toString=p;return a};Q.CEnum=function(a){a=["CEnum",5,a];a.__enum__=Q;a.toString=p;return a};Q.CClass=function(a){a=["CClass",6,a];a.__enum__=Q;a.toString=p;return a};var Ua=function(){this.onStarted=this.onUpdated=this.onStopped=null;this.spawned=!0};l["kit.creator.CreatorObject"]=Ua;Ua.__name__=["kit","creator","CreatorObject"];Ua.__super__=r;Ua.prototype=s(r.prototype,{get_entitySlot:function(){return 2},
onStart:function(){this.$nE|=2},onUpdate:function(a){0!=(this.$nE&2)&&(this.$nE&=-3,null!=this.onStarted&&(this.owner.yieldForStart(),this.owner.emitMessageToParents(this.onStarted,this.owner)));null!=this.onUpdated&&this.owner.emitMessageToParents(this.onUpdated,this.owner)},onStop:function(){this.$nE&=-3;null!=this.onStopped&&this.owner.emitMessageToParents(this.onStopped,this.owner)},__class__:Ua});var lc=function(){this.offsetX=this.offsetY=0;this.active=!0;this.following=null};l["kit.creator.Camera"]=
lc;lc.__name__=["kit","creator","Camera"];lc.__super__=Ua;lc.prototype=s(Ua.prototype,{onStart:function(){Ua.prototype.onStart.call(this);var a=this.owner.$BF[1];if(null==a){var b=this.owner,a=new v;b.add(a);this.info.transformSprite(a);a.set_visible(!1)}this.active&&(this.owner._internal_getFromParents(1,xa).camera=this)},onUpdate:function(a){Ua.prototype.onUpdate.call(this,a);this.zoom.update(a)},$WG:function(a){var b=this.owner.$BF[1];if(null!=this.following){var c=this.following.$BF[1];null!=
c&&b.setXY(c.x.$hF+this.offsetX,c.y.$hF+this.offsetY)}for(var c=this.zoom.$hF,d=b.y.$hF-0.5*a.cameraHeight.$hF/c,b=-Ra.clamp(b.x.$hF-0.5*a.cameraWidth.$hF/c,0,a.info.width*a.info.tileWidth-a.cameraWidth.$hF/c),d=-Ra.clamp(d,0,a.info.height*a.info.tileHeight-a.cameraHeight.$hF/c),f=0,h=a.info.layers;f<h.length;){var w=h[f];++f;var e=w.name,g=a.layers,e=(null!=E[e]?g.getReserved(e):g.h[e]).$BF[1],g=w.parallaxX,k=w.parallaxY,g=(g>k?g:k)*(c-1)+1;e.setScale(g);e.x.set__(w.parallaxX*b*g);e.y.set__(w.parallaxY*
d*g)}},__class__:lc});var Va=function(a,b){this.states=new P;this.properties=new P;this.tile=this.points=null;this.layer=a;this.name=ka.$UH(b.name);this.type=ka.$UH(b.type);this.x=b.x;this.y=b.y;this.anchorX=ka.$VH(b.anchorX,0);this.anchorY=ka.$VH(b.anchorY,0);this.rotation=b.rotation;this.width=b.width;this.height=b.height;this.visible=b.visible;this.tint=null!=b.tintcolor?N.parseInt(ba.replace(b.tintcolor,"#","0x")):16777215;b.ellipse?this.shape=Z.Ellipse:null!=b.polygon?(this.shape=Z.Polygon,this.points=
b.polygon.map(function(a){return new Da(a.x,a.y)})):null!=b.polyline?(this.shape=Z.Polyline,this.points=b.polyline.map(function(a){return new Da(a.x,a.y)})):null!=b.gid?(this.shape=Z.Tile,this.tile=a.scene.tiles.h[b.gid]):this.shape=Z.Rectangle;var c=null!=this.tile?-this.height:0;if(0==this.rotation)this.x+=this.anchorX,this.y+=this.anchorY+c;else{var d=new ya;d.compose(this.x,this.y,1,1,3.141592653589793*this.rotation/180);d.translate(this.anchorX,this.anchorY+c);this.x=d.m02;this.y=d.m12}null!=
this.tile&&(this.anchorX*=this.tile.get_width()/this.width,this.anchorY*=this.tile.get_height()/this.height);c=ka.$TH(b.properties);for(d=c.keys();d.hasNext();){var f=d.next(),h=null!=E[f]?c.getReserved(f):c.h[f];if(ba.startsWith(f,"@State:"))var w=this.states,f=z.substr(f,7,null);else w=this.properties;null!=E[f]?w.setReserved(f,h):w.h[f]=h}};l["kit.creator.ObjectInfo"]=Va;Va.__name__=["kit","creator","ObjectInfo"];Va.prototype={createSprite:function(){var a;null!=this.tile?(a=this.tile.texture,
a=null!=a&&2>Ab.count(this.states)?new G(a):new mc(this)):a=new v;this.transformSprite(a);return a},transformSprite:function(a){null!=this.tile?(a.setXY(this.x+this.tile.tileset.offsetX,this.y+this.tile.tileset.offsetY),a.setScaleXY(this.width/this.tile.get_width(),this.height/this.tile.get_height())):a.setXY(this.x,this.y);a.setAnchor(this.anchorX,this.anchorY);a.rotation.set__(this.rotation);a.set_visible(this.visible);a.setTint(this.tint)},__class__:Va};var Wa=function(){this.target=this.script=
null};l["kit.creator.CreatorAction"]=Wa;Wa.__name__=["kit","creator","CreatorAction"];Wa.runSequence=function(a,b){if(0>=a.length)return(new ga).$MT(null);for(var c=null,d=0;d<a.length;){var f=[a[d]];++d;c=null!=c?c.then(function(a){return function(c){return a[0].$aG(b)}}(f)):f[0].$aG(b)}return c};Wa.prototype={$YG:function(a){},$ZG:function(a){return null},$aG:function(a){if(null==this.script||null==this.script.owner)return(new ga).failure();if(null!=this.target){var b=this.script.owner._internal_getFromParents(1,
xa);a=null;for(var c=b.objects.keys();c.hasNext();){var d=c.next();if(this.target.name==d.name){a=b.objects.h[d.__id__];break}}if(null==a)return(new ga).failure()}this.$YG(a);a=this.$ZG(a);null==a&&(a=(new ga).$MT(null));return a},__class__:Wa};var nc=function(a){this.$gG=new P;r.call(this);this.scene=a;this.$cG()};l["kit.creator.CreatorScript"]=nc;nc.__name__=["kit","creator","CreatorScript"];nc.__super__=r;nc.prototype=s(r.prototype,{get_entitySlot:function(){return 5},onMessage:function(a,b){var c=
!1,d=this.$gG,d=null!=E[a]?d.getReserved(a):d.h[a];if(null!=d){var f=b instanceof m?b:null;if(null!=f)for(var h=this.owner;null!=h;)h==n.root&&(Wa.runSequence(d.actions,f),c=!0),h=h.parent}return r.prototype.onMessage.call(this,a,b)?!0:c},$cG:function(){this.groups=[];for(var a=0,b=this.scene.script.groups;a<b.length;){var c=b[a];++a;var d=c.actions.map(I(this,this.$dG)).filter(function(a){return null!=a}),d=new fe(c,d);this.groups.push(d);var c=c.name,f=this.$gG;null!=E[c]?f.setReserved(c,d):f.h[c]=
d}},$dG:function(a){var b=ca.resolveClass(a.type);if(null==b)return null;var c=ca.createInstance(b,[]);c.script=this;for(var d=a.properties.keys();d.hasNext();){var f=d.next(),h=gb.$7L(b,f);if(null!=h){var w=a.properties,w=null!=E[f]?w.getReserved(f):w.h[f],h=this.$eG(h,w,a.type+"."+f);null!=h&&X.setProperty(c,f,h)}}b=c instanceof oc?c:null;null!=b&&(b.subActions=a.subActions.map(I(this,this.$dG)).filter(function(a){return null!=a}));return c},$eG:function(a,b,c){var d=gb.$eG(a,b);if(null!=d)return d;
switch(a[1]){case 4:a=a[2];var d=[],f=0;for(b=b.split(",");f<b.length;){var h=b[f];++f;d.push(this.$eG(a,ba.trim(h),c))}return d;case 6:switch(a[2]){case Eb:return this.scene.getLayer(b,!1);case Va:return this.scene.getObject(b,!1)}}return null},__class__:nc});var fe=function(a,b){this.info=a;this.actions=b};l["kit.creator.Group"]=fe;fe.__name__=["kit","creator","Group"];fe.prototype={__class__:fe};var oc=function(){this.subActions=[]};l["kit.creator.GroupAction"]=oc;oc.__name__=["kit","creator",
"GroupAction"];oc.__super__=Wa;oc.prototype=s(Wa.prototype,{$ZG:function(a){return Wa.runSequence(this.subActions,a)},__class__:oc});var ge=function(){};l["kit.filter.FilterContext"]=ge;ge.__name__=["kit","filter","FilterContext"];ge.prototype={__class__:ge};var pc=function(){this.$lG=[];this.$kG=[]};l.$CO=pc;pc.__name__=["$CO"];pc.__interfaces__=[ge];pc.prototype={$iG:function(a,b,c,d){var f=this.$kG.pop();null!=f?f.$JM(c,d):f=new he(c,d);f.$FM=a;f.$GM=b;this.$lG.unshift(f);return f.$HM},apply:function(a){a.active&&
a.apply(this)},render:function(a){this.$lG[0].$KM(a)},$jG:function(){var a=this.$lG.shift();this.$kG.push(a);return a.$HM},__class__:pc};var ya=function(){this.identity()};l["kit.math.Matrix"]=ya;ya.__name__=["kit","math","Matrix"];ya.multiply=function(a,b,c){null==c&&(c=new ya);var d=a.m00,f=a.m01,h=a.m02,w=a.m10,e=a.m11;a=a.m12;var g=b.m00,k=b.m01,l=b.m02,m=b.m10,n=b.m11;b=b.m12;c.m00=d*g+f*m;c.m01=d*k+f*n;c.m02=d*l+f*b+h;c.m10=w*g+e*m;c.m11=w*k+e*n;c.m12=w*l+e*b+a;return c};ya.prototype={set:function(a,
b,c,d,f,h){this.m00=a;this.m01=c;this.m02=f;this.m10=b;this.m11=d;this.m12=h},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,f){var h=Math.sin(f);f=Math.cos(f);this.set(f*c,h*c,-h*d,f*d,a,b)},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m10/a,-this.m01/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},
transform:function(a,b,c){null==c&&(c=new Da);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},transformArray:function(a,b,c){for(var d=0;d<b;){var f=a[d],h=a[d+1];c[d++]=f*this.m00+h*this.m01+this.m02;c[d++]=f*this.m10+h*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},
clone:function(a){null==a&&(a=new ya);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:ya};var Da=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};l["kit.math.Point"]=Da;Da.__name__=["kit","math","Point"];Da.prototype={add:function(a,b){this.x+=a;this.y+=b},normalize:function(){var a=this.magnitude();this.x/=a;this.y/=a},dot:function(a,b){return this.x*a+this.y*b},multiply:function(a){this.x*=a;this.y*=a},magnitude:function(){return Math.sqrt(this.x*this.x+
this.y*this.y)},__class__:Da};var v=function(){this.$5G=null;this.$xG=this.$yG=0;this.$wG=null;var a=this;r.call(this);this.$nE|=150;this.$vG=new ya;var b=function(b,d){a.$nE|=24};this.x=new L(0,b);this.y=new L(0,b);this.rotation=new L(0,b);this.scaleX=new L(1,b);this.scaleY=new L(1,b);this.anchorX=new L(0,b);this.anchorY=new L(0,b);this.alpha=new L(1)};l["kit.display.Sprite"]=v;v.__name__=["kit","display","Sprite"];v.hitTest=function(a,b,c){if(!a.active)return null;var d=a.$BF[1];if(null!=d){if(6!=
(d.$nE&6)||null!=d.$5G&&null!=d.$5G.$iI||!d.getLocalMatrix().inverseTransform(b,c,v.$AH))return null;b=v.$AH.x;c=v.$AH.y;var f=d.get_scissor();if(null!=f&&!f.contains(b,c))return null}a=v.$9G(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};v.getBounds=function(a,b){null==b&&(b=new sa);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);v.$$G(a,null,b);b.width-=b.x;b.height-=b.y;return b};v.render=function(a,b){v.$6G(a,b,!0)};v.$6G=
function(a,b,c){if(a.active){var d=null,f=null,h=a.$BF[1];if(null!=h){var w=h.alpha.$hF;if(0==(h.$nE&2)||0>=w)return;var e=h.$5G;if(c&&null!=e&&null!=e.$iI)return;b.save();null!=e&&null!=e.$hI&&0!=(h.$nE&128)&&(c=e.$hI.owner,null!=c&&(b.beginMask(),v.$6G(c,b,!1),b.endMask()));if(null!=e){var g=!1;c=!1;for(var k=0,l=0,m=0,p=0,q=0,s=e.$jI;q<s.length;){var r=s[q];++q;r.active&&(g=!0,c=c?!0:!r.outputOnly,k=Math.max(k,r.paddingTop),l=Math.max(l,r.paddingRight),m=Math.max(m,r.paddingBottom),p=Math.max(p,
r.paddingLeft))}if(g&&n.$2F.$LF.get_filterSupported()){f=h.$pG();g=null!=f?f.getViewMatrix():null;q=h.getViewMatrix();f=new sa;f.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308);var t=e.$kI;if(null!=t){var s=t.x,r=t.y,u=s+t.width,t=r+t.height;u>s&&t>r&&(v.$_G(q,s,r,f),v.$_G(q,u,r,f),v.$_G(q,u,t,f),v.$_G(q,s,t,f))}else v.$$G(a,g,f);f.width-=f.x;f.height-=f.y;if(!f.get_empty()){f.x-=p;f.y-=k;f.width+=p+l;f.height+=k+m;d=v.$CH.$iG(f.x,f.y,Math.ceil(f.width),
Math.ceil(f.height));c&&(d=d.get_graphics(),d.save(),d.translate(-f.x,-f.y),d.transform(q.m00,q.m10,q.m01,q.m11,q.m02,q.m12),v.$8G(h,d),v.$7G(a,d),d.restore());d=0;for(c=e.$jI;d<c.length;)k=c[d],++d,v.$CH.apply(k);d=v.$CH.$jG();null!=g&&(c=g.clone(v.$BH),c.invert(),b.transform(c.m00,c.m10,c.m01,c.m11,c.m02,c.m12))}}}1>w&&b.multiplyAlpha(w);null==d&&(w=h.getLocalMatrix(),b.transform(w.m00,w.m10,w.m01,w.m11,w.m02,w.m12));null!=e&&(1==e.$dI.$hF&&1==e.$eI.$hF&&1==e.$fI.$hF||b.tint(e.$dI.$hF,e.$eI.$hF,
e.$fI.$hF),null!=e.$bI&&b.setBlendMode(e.$bI),e=e.$cI,null!=e&&null==d&&b.applyScissor(e.x,e.y,e.width,e.height));null==d?v.$8G(h,b):b.drawSubTexture(d,f.x,f.y,0,0,f.width,f.height)}null==d&&v.$7G(a,b);null!=h&&b.restore()}};v.$7G=function(a,b){var c=a.$BF[7];if(null!=c)for(var c=c.occludedScenes,d=0;d<c.length;){var f=c[d];++d;v.render(f,b)}for(c=a.firstChild;null!=c;)d=c.next,v.render(c,b),c=d};v.$8G=function(a,b){a.draw(b);var c=a.$5G;null!=c&&null!=c.$gI&&c.$gI.render(b)};v.$9G=function(a,b,c){if(null!=
a){var d=v.$9G(a.next,b,c);return null!=d?d:v.hitTest(a,b,c)}return null};v.$$G=function(a,b,c){if(a.active){var d=a.$BF[1];if(null!=d){if(0==(d.$nE&2)||null!=d.$5G&&null!=d.$5G.$iI)return;b=null!=b?ya.multiply(b,d.getLocalMatrix()):d.getLocalMatrix();var f=d.getNaturalWidth(),d=d.getNaturalHeight();0<f&&0<d&&(v.$_G(b,0,0,c),v.$_G(b,f,0,c),v.$_G(b,f,d,c),v.$_G(b,0,d,c))}f=a.$BF[7];if(null!=f)for(var f=f.occludedScenes,d=0,h=f.length;d<h;)v.$$G(f[d],b,c),++d;for(a=a.firstChild;null!=a;)f=a.next,v.$$G(a,
b,c),a=f}};v.$_G=function(a,b,c,d){a=a.transform(b,c,v.$AH);b=a.x;c=a.y;b<d.x&&(d.x=b);c<d.y&&(d.y=c);b>d.width&&(d.width=b);c>d.height&&(d.height=c)};v.__super__=r;v.prototype=s(r.prototype,{get_entitySlot:function(){return 1},getNaturalWidth:function(){return 0},getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b?b<this.getNaturalHeight():!1},getLocalMatrix:function(){0!=(this.$nE&8)&&(this.$nE&=-9,this.$vG.compose(this.x.$hF,this.y.$hF,
this.scaleX.$hF,this.scaleY.$hF,3.141592653589793*this.rotation.$hF/180),this.$vG.translate(-this.anchorX.$hF,-this.anchorY.$hF));return this.$vG},getViewMatrix:function(){if(this.$oG()){var a=this.$pG();this.$wG=null!=a?ya.multiply(a.getViewMatrix(),this.getLocalMatrix(),this.$wG):this.getLocalMatrix().clone(this.$wG);this.$nE&=-17;null!=a&&(this.$yG=a.$xG);++this.$xG}return this.$wG},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/
2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,b){this.x.set__(a);this.y.set__(b);return this},setTint:function(a){if(null!=this.$5G||16777215!=a)this.get_tintR().set__((a&16711680)/16711680),this.get_tintG().set__((a&65280)/65280),this.get_tintB().set__((a&255)/255);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},onAdded:function(){0!=(this.$nE&
64)&&this.$qG()},onRemoved:function(){null!=this.$4G&&(this.$4G.dispose(),this.$4G=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a);var b=this.$5G;if(null!=b){b.$dI.update(a);b.$eI.update(a);b.$fI.update(a);for(var c=0,b=b.$jI;c<b.length;){var d=b[c];++c;d.active&&d.update(a)}}},draw:function(a){},$oG:function(){if(0!=(this.$nE&16))return!0;var a=this.$pG();
return null==a?!1:this.$yG==a.$xG?a.$oG():!0},$pG:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=a;){var b=a.$BF[1];if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this.$zG&&(this.$zG=new Y);return this.$zG},get_pointerIn:function(){null==this.$2G&&(this.$2G=new Y);return this.$2G},get_pointerOut:function(){null==this.$3G&&(this.$3G=new Y);return this.$3G},$qG:function(){var a=this;null==this.$4G&&n.$2F.$EF.$5N(function(){a.$4G=n.$2F.$KF.move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.$pG()}null!=a.$3G&&0!=(a.$nE&64)&&a.$3G.emit(b);a.$nE&=-65;null!=a.$4G&&(a.$4G.dispose(),a.$4G=null)})})},get_blendMode:function(){return null!=this.$5G?this.$5G.$bI:null},set_blendMode:function(a){if(null==this.$5G){if(null==a)return null;this.$5G=new Sa}return this.$5G.$bI=a},get_scissor:function(){return null!=this.$5G?this.$5G.$cI:null},set_scissor:function(a){if(null==this.$5G){if(null==a)return null;this.$5G=new Sa}return this.$5G.$cI=a},get_tintR:function(){null==
this.$5G&&(this.$5G=new Sa);return this.$5G.$dI},get_tintG:function(){null==this.$5G&&(this.$5G=new Sa);return this.$5G.$eI},get_tintB:function(){null==this.$5G&&(this.$5G=new Sa);return this.$5G.$fI},set_mask:function(a){if(null==this.$5G){if(null==a)return null;this.$5G=new Sa}var b=this.$5G.$hI;if(null!=b&&(b=b.$5G,null!=b&&null!=b.$iI)){var c=b.$iI;b.$iI=null;c.set_mask(null)}null!=a&&(b=a.$5G,null==b&&(b=a.$5G=new Sa),null!=b.$iI&&b.$iI.set_mask(null),b.$iI=this);return this.$5G.$hI=a},set_maskEnabled:function(a){this.$nE=
Fb.set(this.$nE,128,a);return a},set_visible:function(a){this.$nE=Fb.set(this.$nE,2,a);return a},set_pointerEnabled:function(a){this.$nE=Fb.set(this.$nE,4,a);return a},$rG:function(a){this.$tG(a);null!=this.$zG&&this.$zG.emit(a)},$sG:function(a){this.$tG(a);null!=this.$0G&&this.$0G.emit(a)},$tG:function(a){0==(this.$nE&64)&&(this.$nE|=64,null!=this.$2G||null!=this.$3G)&&(null!=this.$2G&&this.$2G.emit(a),this.$qG())},$uG:function(a){1==a.source[1]&&(null!=this.$3G&&0!=(this.$nE&64)&&this.$3G.emit(a),
this.$nE&=-65,null!=this.$4G&&(this.$4G.dispose(),this.$4G=null));null!=this.$1G&&this.$1G.emit(a)},__class__:v,__properties__:s(r.prototype.__properties__,{get_tintB:"get_tintB",get_tintG:"get_tintG",get_tintR:"get_tintR",get_pointerOut:"get_pointerOut",get_pointerIn:"get_pointerIn",get_pointerDown:"get_pointerDown",set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible",set_maskEnabled:"set_maskEnabled",set_mask:"set_mask",set_scissor:"set_scissor",get_scissor:"get_scissor",set_blendMode:"set_blendMode",
get_blendMode:"get_blendMode"})});var mc=function(a){this.$NH=new m;this.state=new ea(null);v.call(this);this.$MH=a};l["kit.creator.ObjectSprite"]=mc;mc.__name__=["kit","creator","ObjectSprite"];mc.__super__=v;mc.prototype=s(v.prototype,{$LH:function(a,b){var c=this.$MH.tile;if(null==c.texture){var d=c.properties;a.x.set__(-parseFloat(null!=E.boundsX?d.getReserved("boundsX"):d.h.boundsX));c=c.properties;a.y.set__(-parseFloat(null!=E.boundsY?c.getReserved("boundsY"):c.h.boundsY))}this.$NH.add(a);this.state.set__(b)},
onStart:function(){v.prototype.onStart.call(this);if(null!=this.owner&&(this.owner.addChild(this.$NH),null==this.state.$hF)){var a,b=this.$MH.tile,c=!1;if(null!=b.texture)a=new G(b.texture);else{a=this.owner._internal_getFromParents(0);var d=b.properties,d=null!=E.symbol?d.getReserved("symbol"):d.h.symbol,f=b.properties;null!=(null!=E.scene?f.getReserved("scene"):f.h.scene)?(d=a.getSceneSymbol(d),a=d.createSprite(),this.$NH.add(d.createScript()),b=b.properties,2<=parseFloat(null!=E.version?b.getReserved("version"):
b.h.version)&&(c=!0)):(a=b.tileset.properties,null==(null!=E.library?a.getReserved("library"):a.h.library)&&(b=b.tileset.properties,null!=E.texturepacker&&b.getReserved("texturepacker")),a=null)}this.$LH(a,null);c&&(this.$NH.yieldForStart(),a.setXY(0,0),c=v.getBounds(this.$NH),c.get_empty()||a.setXY(-c.x+0,-c.y+(this.$MH.height-c.height)),this.setScale(1))}},__class__:mc});var ka=function(a,b,c){null==c&&(c=!1);this.$QH=a;this.$fG=a.getFile(b+(c?".symbol":".scene"));this.symbol=c;a=b.lastIndexOf("/");
this.$RH=0<=a?z.substr(b,0,a+1):"";this.$cG();this.reloadCount=new ea(0)};l["kit.creator.SceneInfo"]=ka;ka.__name__=["kit","creator","SceneInfo"];ka.$TH=function(a){var b=new P;if(null!=a)for(var c=0,d=X.fields(a);c<d.length;){var f=d[c];++c;if(!ba.startsWith(f,"//")){var h=ka.$UH(X.field(a,f));null!=h&&(null!=E[f]?b.setReserved(f,h):b.h[f]=h)}}return b};ka.$UH=function(a){null!=a&&(a=ba.trim(a),0==a.length&&(a=null));return a};ka.$VH=function(a,b){return null!=a?a:b};ka.prototype={disposeFiles:function(){this.$fG.dispose();
return this},createSprite:function(){return new xa(this)},createScript:function(){return new nc(this)},getLayer:function(a,b){for(var c=0,d=this.layers;c<d.length;){var f=d[c];++c;if(f.name==a)return f}return null},getObject:function(a,b){var c=this.$SH;return null!=E[a]?c.getReserved(a):c.h[a]},$OH:function(a){return this.$QH.getTexture(this.$RH+ra.removeFileExtension(a),!1)},$PH:function(a){return this.$QH.getTexture(a)},$cG:function(){var a=this,b=this.$fG.toJson();this.width=b.width;this.height=
b.height;this.tileWidth=b.tilewidth;this.tileHeight=b.tileheight;this.tilesets=b.tilesets.map(function(b){return new ie(a,b)});this.backgroundColor=null!=b.backgroundcolor?N.parseInt(ba.replace(b.backgroundcolor,"#","0x")):8421504;this.tiles=new Ba;for(var c=0,d=this.tilesets;c<d.length;){var f=d[c];++c;for(var h=0,f=f.tiles;h<f.length;){var w=f[h];++h;this.tiles.h[w.id]=w}}this.layers=b.layers.map(function(b){return new Eb(a,b)});this.properties=ka.$TH(b.properties);this.script=new je(b.script);
this.$SH=new P;b=0;for(c=this.layers;b<c.length;)if(h=c[b],++b,null!=h.objects)for(d=0,h=h.objects;d<h.length;)if(f=h[d],++d,null!=f.name){var w=f.name,e=this.$SH;null!=E[w]?e.setReserved(w,f):e.h[w]=f}},__class__:ka};var Xa=l["kit.creator.LayerType"]={__ename__:!0,__constructs__:["Tile","Object"]};Xa.Tile=["Tile",0];Xa.Tile.toString=p;Xa.Tile.__enum__=Xa;Xa.Object=["Object",1];Xa.Object.toString=p;Xa.Object.__enum__=Xa;var Eb=function(a,b){this.parallaxX=this.parallaxY=1;this.tiles=this.objects=
null;var c=this;this.scene=a;this.name=ka.$UH(b.name);var d;switch(b.type){case "objectgroup":d=Xa.Object;break;case "tilelayer":d=Xa.Tile;break;default:d=null}this.type=d;this.width=b.width;this.height=b.height;this.opacity=b.opacity;this.visible=b.visible;null!=b.data&&(this.tiles=b.data.map(function(b){return 0!=b?a.tiles.h[b]:null}));null!=b.objects&&(this.objects=b.objects.map(function(a){return new Va(c,a)}),"index"!=b.draworder&&this.objects.sort(function(a,b){return X.compare(a.y+a.height,
b.y+b.height)}));null!=b.parallaxX&&(this.parallaxX=b.parallaxX,this.parallaxY=b.parallaxY);this.tileCollisions=b.collisions;this.properties=ka.$TH(b.properties)};l["kit.creator.LayerInfo"]=Eb;Eb.__name__=["kit","creator","LayerInfo"];Eb.prototype={__class__:Eb};var Z=l["kit.creator.ObjectShape"]={__ename__:!0,__constructs__:["Rectangle","Ellipse","Polygon","Polyline","Tile"]};Z.Rectangle=["Rectangle",0];Z.Rectangle.toString=p;Z.Rectangle.__enum__=Z;Z.Ellipse=["Ellipse",1];Z.Ellipse.toString=p;Z.Ellipse.__enum__=
Z;Z.Polygon=["Polygon",2];Z.Polygon.toString=p;Z.Polygon.__enum__=Z;Z.Polyline=["Polyline",3];Z.Polyline.toString=p;Z.Polyline.__enum__=Z;Z.Tile=["Tile",4];Z.Tile.toString=p;Z.Tile.__enum__=Z;var ie=function(a,b){this.offsetX=this.offsetY=0;this.atlas=null;this.scene=a;this.name=ka.$UH(b.name);this.spacing=b.spacing;this.margin=b.margin;var c=b.tileoffset;null!=c&&(this.offsetX=c.x,this.offsetY=c.y);this.tileWidth=b.tilewidth;this.tileHeight=b.tileheight;if(null!=b.image){this.atlas=a.$OH(b.image);
null==this.atlas&&(this.atlas=a.$PH(this.name));var c=this.atlas.get_width()-2*this.margin,d=this.atlas.get_height()-2*this.margin,c=(c+this.spacing)/(this.tileWidth+this.spacing)|0,d=(d+this.spacing)/(this.tileHeight+this.spacing)|0;this.tiles=Array(c*d);for(var f=0,h=0;h<d;)for(var w=h++,e=0,g=c;e<g;){var k=e++,l=new qc(this,b,f);l.texture=this.atlas.subTexture(k*(this.tileWidth+this.spacing)+this.margin,w*(this.tileHeight+this.spacing)+this.margin,this.tileWidth,this.tileHeight);this.tiles[f]=
l;++f}}else this.tiles=[];if(null!=b.tiles)for(c=0,d=X.fields(b.tiles);c<d.length;)if(f=d[c],++c,h=X.field(b.tiles,f),w=N.parseInt(f),f=this.tiles[w],null==f&&(f=this.tiles[w]=new qc(this,b,w)),null!=h.image&&(w=f.properties,"true"!=(null!=E.previewImage?w.getReserved("previewImage"):w.h.previewImage)&&(f.texture=a.$OH(h.image),null==f.texture&&(f.texture=a.$PH(this.name)))),null!=h.objectgroup)for(w=0,h=h.objectgroup.objects;w<h.length;)e=h[w],++w,f.collision.push(new Va(null,e));this.properties=
ka.$TH(b.properties)};l["kit.creator.TilesetInfo"]=ie;ie.__name__=["kit","creator","TilesetInfo"];ie.prototype={__class__:ie};var qc=function(a,b,c){this.collision=[];this.texture=null;this.id=b.firstgid+c;this.tileset=a;this.properties=ka.$TH(null!=b.tileproperties?X.field(b.tileproperties,""+c):null)};l["kit.creator.TileInfo"]=qc;qc.__name__=["kit","creator","TileInfo"];qc.prototype={get_width:function(){if(null!=this.texture)return this.texture.get_width();var a=this.properties;return N.parseInt(null!=
E.boundsWidth?a.getReserved("boundsWidth"):a.h.boundsWidth)},get_height:function(){if(null!=this.texture)return this.texture.get_height();var a=this.properties;return N.parseInt(null!=E.boundsHeight?a.getReserved("boundsHeight"):a.h.boundsHeight)},__class__:qc,__properties__:{get_height:"get_height",get_width:"get_width"}};var je=function(a){this.groups=null!=a?a.groups.map(function(a){return new ke(a)}):[]};l["kit.creator.ScriptInfo"]=je;je.__name__=["kit","creator","ScriptInfo"];je.prototype={__class__:je};
var ke=function(a){this.actions=[];this.name=a.name;this.actions=a.actions.map(function(a){return new rc(a)})};l["kit.creator.GroupInfo"]=ke;ke.__name__=["kit","creator","GroupInfo"];ke.prototype={__class__:ke};var rc=function(a){this.type=a.type;this.subActions=null!=a.subActions?a.subActions.map(function(a){return new rc(a)}):[];this.properties=ka.$TH(a.properties)};l["kit.creator.ActionInfo"]=rc;rc.__name__=["kit","creator","ActionInfo"];rc.prototype={__class__:rc};var sa=function(a,b,c,d){null==
d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};l["kit.math.Rectangle"]=sa;sa.__name__=["kit","math","Rectangle"];sa.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new sa);a.set(this.x,this.y,
this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width?this.height==a.height:!1},get_empty:function(){return 0>=this.width?!0:0>=this.height},__class__:sa,__properties__:{get_empty:"get_empty"}};var xa=function(a){this.drawBackgroundColor=!1;this.objects=new Aa;this.layers=new P;this.camera=null;v.call(this);this.info=a;var b=new v;this.cameraX=new L(0,function(a,d){b.x.set__(-a)});this.cameraY=new L(0,function(a,d){b.y.set__(-a)});this.cameraWidth=
new L(a.tileWidth*a.width);this.cameraHeight=new L(a.tileHeight*a.height);this.content=(new m).add(b)};l["kit.creator.SceneSprite"]=xa;xa.__name__=["kit","creator","SceneSprite"];xa.$ZH=function(a){null==a&&(a=new sa);var b=fa.$fL("width"),c=fa.$fL("height"),d=Math.min(n.$2F.$MF.get_width()/b,n.$2F.$MF.get_height()/c);if(1==fa.$fL("scaleMode")){var f=Math.max(b,fa.$fL("maxWidth")|0),h=Math.max(c,fa.$fL("maxHeight")|0);a.width=Math.min(n.$2F.$MF.get_width()/d,f);a.height=Math.min(n.$2F.$MF.get_height()/
d,h)}else a.width=n.$2F.$MF.get_width()/d,a.height=n.$2F.$MF.get_height()/d;a.x=-(a.width/2-b/2);a.y=-(a.height/2-c/2);return a};xa.__super__=v;xa.prototype=s(v.prototype,{onStart:function(){v.prototype.onStart.call(this);for(var a=0,b=this.info.layers;a<b.length;){var c=b[a];++a;var d=new m;this.$WH(c,d);this.content.addChild(d)}},onAdded:function(){v.prototype.onAdded.call(this);this.owner.addChild(this.content)},draw:function(a){null!=this.camera&&this.camera.$WG(this);if(this.drawBackgroundColor){var b=
xa.$ZH(xa.$aH);a.fillRect(this.info.backgroundColor,b.x,b.y,b.width,b.height)}},onUpdate:function(a){v.prototype.onUpdate.call(this,a);this.cameraX.update(a);this.cameraY.update(a);this.cameraWidth.update(a);this.cameraHeight.update(a)},$WH:function(a,b){var c;switch(a.type[1]){case 0:c=new sc(this,this.info,a);break;case 1:c=new v}c.alpha.set__(a.opacity);c.set_visible(a.visible);b.add(c);switch(a.type[1]){case 1:c=0;for(var d=a.objects;c<d.length;){var f=d[c];++c;var h=this.$XH(f,!0);if(null==h||
h.spawned){var e=this.objects.get(f);if(f.shape==Z.Tile){if(null==e){var g=this.objects,e=new m;g.set(f,e)}e.add(f.createSprite());null!=h&&e.add(h)}null!=e&&b.addChild(e)}}}c=a.name;d=this.layers;null!=E[c]?d.setReserved(c,b):d.h[c]=b},getNaturalWidth:function(){return this.info.symbol?0:this.cameraWidth.$hF},getNaturalHeight:function(){return this.info.symbol?0:this.cameraHeight.$hF},$XH:function(a,b){if(null==a.type)return null;if(b){var c=this.objects.h[a.__id__];if(null!=c&&(c=c.$BF[2],null!=
c))return c}c=ca.resolveClass(a.type);if(null==c)return null;var d=ca.createInstance(c,[]);b&&this.objects.set(a,(new m).add(d));this.$YH(a,d,c);return d},$YH:function(a,b,c){for(var d=a.properties.keys();d.hasNext();){var f=d.next(),h=a.properties,h=null!=E[f]?h.getReserved(f):h.h[f],e=gb.$7L(c,f);null!=e&&(h=this.$eG(e,h,a.type+"."+f),null!=h&&X.setProperty(b,f,h))}b.info=a},$eG:function(a,b,c){var d=gb.$eG(a,b);if(null!=d)return d;switch(a[1]){case 4:a=a[2];var d=[],f=0;for(b=b.split(",");f<b.length;){var h=
b[f];++f;d.push(this.$eG(a,ba.trim(h),c))}return d;case 6:switch(a[2]){case m:c=this.info.getObject(b,!1);if(null==c)break;c=this.$XH(c,!0);return null!=c?c.owner:null;case Eb:return this.info.getLayer(b,!1);case Va:return this.info.getObject(b,!1);default:c=a[2];b=this.info.getObject(b,!1);if(null==b)break;b=this.$XH(b,!0);if(null!=b){if(U.__instanceof(b,c))return b;ca.getClassName(c)}}}return null},__class__:xa});var sc=function(a,b,c){v.call(this);this.$bH=a;this.$cH=b;this.$dH=c};l.$CP=sc;sc.__name__=
["$CP"];sc.__super__=v;sc.prototype=s(v.prototype,{getNaturalWidth:function(){return this.$cH.tileWidth*this.$dH.width},getNaturalHeight:function(){return this.$cH.tileHeight*this.$dH.height},containsLocal:function(a,b){var c=a/this.$cH.tileWidth|0;if(0>c||c>=this.$dH.width)return!1;var d=b/this.$cH.tileHeight|0;return 0>d||d>=this.$dH.height?!1:null!=this.$dH.tiles[d*this.$dH.width+c]},draw:function(a){var b=this.$cH.tileWidth,c=this.$cH.tileHeight,d=this.$dH.width,f=this.$dH.height,h=xa.$ZH(xa.$aH);
h.x=(h.x-this.x.$hF)/this.scaleX.$hF;h.y=(h.y-this.y.$hF)/this.scaleY.$hF;h.width/=this.scaleX.$hF;h.height/=this.scaleY.$hF;for(var e=Ra.clamp(h.x/b|0,0,d),g=Ra.clamp(h.y/c|0,0,f),k=Ra.clamp(e+Math.ceil(h.width/b)+1,0,d),f=Ra.clamp(g+Math.ceil(h.height/c)+1,0,f);g<f;)for(var h=g++,l=e,m=k;l<m;){var n=l++,p=this.$dH.tiles[h*d+n];if(null!=p){var q=p.tileset;a.drawTexture(p.texture,n*b+q.offsetX,h*c+q.offsetY-q.tileHeight+c)}}},__class__:sc});var tc=function(){r.call(this);this.$1C()};l["kit.debug.FpsDisplay"]=
tc;tc.__name__=["kit","debug","FpsDisplay"];tc.__super__=r;tc.prototype=s(r.prototype,{get_entitySlot:function(){return 15},onUpdate:function(a){++this.$eH;this.$fH+=a;if(1<this.$fH){a="FPS: "+Math.round(100*this.$eH/this.$fH)/100;var b=this.owner.$BF[1],b=b instanceof K?b:null;null!=b&&b.set_text(a);this.$1C()}},$1C:function(){this.$fH=this.$eH=0},__class__:tc});var R=l["kit.display.BlendMode"]={__ename__:!0,__constructs__:"Normal Add Multiply Screen Mask Copy".split(" ")};R.Normal=["Normal",0];
R.Normal.toString=p;R.Normal.__enum__=R;R.Add=["Add",1];R.Add.toString=p;R.Add.__enum__=R;R.Multiply=["Multiply",2];R.Multiply.toString=p;R.Multiply.__enum__=R;R.Screen=["Screen",3];R.Screen.toString=p;R.Screen.__enum__=R;R.Mask=["Mask",4];R.Mask.toString=p;R.Mask.__enum__=R;R.Copy=["Copy",5];R.Copy.toString=p;R.Copy.__enum__=R;var uc=function(){};l["kit.display.Graphics"]=uc;uc.__name__=["kit","display","Graphics"];uc.prototype={__class__:uc};var le=function(){this.$hH=[]};l["kit.display.BufferedGraphics"]=
le;le.__name__=["kit","display","BufferedGraphics"];le.__interfaces__=[uc];le.prototype={save:function(){this.$gH(new vc)},translate:function(a,b){this.$gH(new wc(a,b))},scale:function(a,b){this.$gH(new xc(a,b))},rotate:function(a){this.$gH(new yc(a))},transform:function(a,b,c,d,f,h){this.$gH(new zc(a,b,c,d,f,h))},multiplyAlpha:function(a){this.$gH(new Ac(a))},setAlpha:function(a){this.$gH(new Bc(a))},tint:function(a,b,c){this.$gH(new Cc(a,b,c))},setBlendMode:function(a){this.$gH(new Dc(a))},beginMask:function(){this.$gH(new Ec)},
endMask:function(){this.$gH(new Fc)},applyScissor:function(a,b,c,d){this.$gH(new Gc(a,b,c,d))},restore:function(){this.$gH(new Hc)},drawTexture:function(a,b,c){this.$gH(new Ic(a,b,c))},drawSubTexture:function(a,b,c,d,f,h,e){this.$gH(new Jc(a,b,c,d,f,h,e))},drawPattern:function(a,b,c,d,f){this.$gH(new Kc(a,b,c,d,f))},fillRect:function(a,b,c,d,f){this.$gH(new Lc(a,b,c,d,f))},fillTriangles:function(a,b,c){this.$gH(new Mc(a,b.slice(),c.slice()))},drawTriangles:function(a,b,c,d){this.$gH(new Nc(a,b.slice(),
c.slice(),null!=d?d.slice():null))},fillPolygon:function(a,b){this.$gH(new Oc(a,b.slice()))},drawPolygon:function(a,b){this.$gH(new Pc(a,b.slice()))},drawCircle:function(a,b,c,d,f){null==f&&(f=50);this.$gH(new Qc(a,b,c,d,f))},fillCircle:function(a,b,c,d,f){null==f&&(f=50);this.$gH(new Rc(a,b,c,d,f))},strokeCircle:function(a,b,c,d,f,h){null==h&&(h=50);this.$gH(new Sc(a,b,c,d,f,h))},drawEllipse:function(a,b,c,d,f,h){null==h&&(h=50);this.$gH(new Tc(a,b,c,d,f,h))},fillEllipse:function(a,b,c,d,f,h){null==
h&&(h=50);this.$gH(new Uc(a,b,c,d,f,h))},strokeEllipse:function(a,b,c,d,f,h,e){null==e&&(e=50);this.$gH(new Vc(a,b,c,d,f,h,e))},fillArc:function(a,b,c,d,f,h,e){null==e&&(e=50);this.$gH(new Wc(a,b,c,d,f,h,e))},strokeArc:function(a,b,c,d,f,h,e,g){null==g&&(g=50);this.$gH(new Xc(a,b,c,d,f,h,e,g))},strokeLines:function(a,b,c){this.$gH(new Yc(a,b.slice(),c))},drawLines:function(a,b,c){this.$gH(new Zc(a,b.slice(),c))},render:function(a){for(var b=0,c=this.$hH.length;b<c;){var d=b++;this.$hH[d].$iH(a)}},
$gH:function(a){this.$hH.push(a)},__class__:le};var F=function(){};l.$CQ=F;F.__name__=["$CQ"];F.prototype={$iH:function(a){},__class__:F};var vc=function(){};l.$CR=vc;vc.__name__=["$CR"];vc.__super__=F;vc.prototype=s(F.prototype,{$iH:function(a){a.save()},__class__:vc});var wc=function(a,b){this.$jH=a;this.$kH=b};l.$CS=wc;wc.__name__=["$CS"];wc.__super__=F;wc.prototype=s(F.prototype,{$iH:function(a){a.translate(this.$jH,this.$kH)},__class__:wc});var xc=function(a,b){this.$jH=a;this.$kH=b};l.$CT=xc;
xc.__name__=["$CT"];xc.__super__=F;xc.prototype=s(F.prototype,{$iH:function(a){a.scale(this.$jH,this.$kH)},__class__:xc});var yc=function(a){this.$lH=a};l.$CU=yc;yc.__name__=["$CU"];yc.__super__=F;yc.prototype=s(F.prototype,{$iH:function(a){a.rotate(this.$lH)},__class__:yc});var zc=function(a,b,c,d,f,h){this.$mH=a;this.$nH=b;this.$oH=c;this.$pH=d;this.$qH=f;this.$rH=h};l.$CV=zc;zc.__name__=["$CV"];zc.__super__=F;zc.prototype=s(F.prototype,{$iH:function(a){a.transform(this.$mH,this.$nH,this.$oH,this.$pH,
this.$qH,this.$rH)},__class__:zc});var Ac=function(a){this.$sH=a};l.$CW=Ac;Ac.__name__=["$CW"];Ac.__super__=F;Ac.prototype=s(F.prototype,{$iH:function(a){a.multiplyAlpha(this.$sH)},__class__:Ac});var Bc=function(a){this.$tH=a};l.$CX=Bc;Bc.__name__=["$CX"];Bc.__super__=F;Bc.prototype=s(F.prototype,{$iH:function(a){a.setAlpha(this.$tH)},__class__:Bc});var Cc=function(a,b,c){this.$uH=a;this.$vH=b;this.$wH=c};l.$CY=Cc;Cc.__name__=["$CY"];Cc.__super__=F;Cc.prototype=s(F.prototype,{$iH:function(a){a.tint(this.$uH,
this.$vH,this.$wH)},__class__:Cc});var Dc=function(a){this.$xH=a};l.$CZ=Dc;Dc.__name__=["$CZ"];Dc.__super__=F;Dc.prototype=s(F.prototype,{$iH:function(a){a.setBlendMode(this.$xH)},__class__:Dc});var Gc=function(a,b,c,d){this.$jH=a;this.$kH=b;this.$yH=c;this.$zH=d};l.$Ca=Gc;Gc.__name__=["$Ca"];Gc.__super__=F;Gc.prototype=s(F.prototype,{$iH:function(a){a.applyScissor(this.$jH,this.$kH,this.$yH,this.$zH)},__class__:Gc});var Ec=function(){};l.$Cb=Ec;Ec.__name__=["$Cb"];Ec.__super__=F;Ec.prototype=s(F.prototype,
{$iH:function(a){a.beginMask()},__class__:Ec});var Fc=function(){};l.$Cc=Fc;Fc.__name__=["$Cc"];Fc.__super__=F;Fc.prototype=s(F.prototype,{$iH:function(a){a.endMask()},__class__:Fc});var Hc=function(){};l.$Cd=Hc;Hc.__name__=["$Cd"];Hc.__super__=F;Hc.prototype=s(F.prototype,{$iH:function(a){a.restore()},__class__:Hc});var Ic=function(a,b,c){this.$0H=a;this.$1H=b;this.$2H=c};l.$Ce=Ic;Ic.__name__=["$Ce"];Ic.__super__=F;Ic.prototype=s(F.prototype,{$iH:function(a){a.drawTexture(this.$0H,this.$1H,this.$2H)},
__class__:Ic});var Jc=function(a,b,c,d,f,h,e){this.$0H=a;this.$1H=b;this.$2H=c;this.$3H=d;this.$4H=f;this.$5H=h;this.$6H=e};l.$Cf=Jc;Jc.__name__=["$Cf"];Jc.__super__=F;Jc.prototype=s(F.prototype,{$iH:function(a){a.drawSubTexture(this.$0H,this.$1H,this.$2H,this.$3H,this.$4H,this.$5H,this.$6H)},__class__:Jc});var Kc=function(a,b,c,d,f){this.$0H=a;this.$1H=b;this.$2H=c;this.$yH=d;this.$zH=f};l.$Cg=Kc;Kc.__name__=["$Cg"];Kc.__super__=F;Kc.prototype=s(F.prototype,{$iH:function(a){a.drawPattern(this.$0H,
this.$1H,this.$2H,this.$yH,this.$zH)},__class__:Kc});var Mc=function(a,b,c){this.$7H=a;this.$8H=b;this.$9H=c};l.$Ch=Mc;Mc.__name__=["$Ch"];Mc.__super__=F;Mc.prototype=s(F.prototype,{$iH:function(a){a.fillTriangles(this.$7H,this.$8H,this.$9H)},__class__:Mc});var Nc=function(a,b,c,d){this.$0H=a;this.$8H=b;this.$9H=c;this.$$H=d};l.$Ci=Nc;Nc.__name__=["$Ci"];Nc.__super__=F;Nc.prototype=s(F.prototype,{$iH:function(a){a.drawTriangles(this.$0H,this.$8H,this.$9H,this.$$H)},__class__:Nc});var Oc=function(a,
b){this.$7H=a;this.$8H=b};l.$Cj=Oc;Oc.__name__=["$Cj"];Oc.__super__=F;Oc.prototype=s(F.prototype,{$iH:function(a){a.fillPolygon(this.$7H,this.$8H)},__class__:Oc});var Pc=function(a,b){this.$0H=a;this.$8H=b};l.$Ck=Pc;Pc.__name__=["$Ck"];Pc.__super__=F;Pc.prototype=s(F.prototype,{$iH:function(a){a.drawPolygon(this.$0H,this.$8H)},__class__:Pc});var Qc=function(a,b,c,d,f){this.$0H=a;this.$_H=b;this.$AI=c;this.$BI=d;this.$CI=f};l.$Cl=Qc;Qc.__name__=["$Cl"];Qc.__super__=F;Qc.prototype=s(F.prototype,{$iH:function(a){a.drawCircle(this.$0H,
this.$_H,this.$AI,this.$BI,this.$CI)},__class__:Qc});var Rc=function(a,b,c,d,f){this.$7H=a;this.$_H=b;this.$AI=c;this.$BI=d;this.$CI=f};l.$Cm=Rc;Rc.__name__=["$Cm"];Rc.__super__=F;Rc.prototype=s(F.prototype,{$iH:function(a){a.fillCircle(this.$7H,this.$_H,this.$AI,this.$BI,this.$CI)},__class__:Rc});var Sc=function(a,b,c,d,f,h){this.$7H=a;this.$_H=b;this.$AI=c;this.$BI=d;this.$DI=f;this.$CI=h};l.$Cn=Sc;Sc.__name__=["$Cn"];Sc.__super__=F;Sc.prototype=s(F.prototype,{$iH:function(a){a.strokeCircle(this.$7H,
this.$_H,this.$AI,this.$BI,this.$DI,this.$CI)},__class__:Sc});var Uc=function(a,b,c,d,f,h){this.$7H=a;this.$_H=b;this.$AI=c;this.$EI=d;this.$FI=f;this.$CI=h};l.$Co=Uc;Uc.__name__=["$Co"];Uc.__super__=F;Uc.prototype=s(F.prototype,{$iH:function(a){a.fillEllipse(this.$7H,this.$_H,this.$AI,this.$EI,this.$FI,this.$CI)},__class__:Uc});var Tc=function(a,b,c,d,f,h){this.$0H=a;this.$_H=b;this.$AI=c;this.$EI=d;this.$FI=f;this.$CI=h};l.$Cp=Tc;Tc.__name__=["$Cp"];Tc.__super__=F;Tc.prototype=s(F.prototype,{$iH:function(a){a.drawEllipse(this.$0H,
this.$_H,this.$AI,this.$EI,this.$FI,this.$CI)},__class__:Tc});var Vc=function(a,b,c,d,f,h,e){this.$7H=a;this.$_H=b;this.$AI=c;this.$EI=d;this.$FI=f;this.$DI=h;this.$CI=e};l.$Cq=Vc;Vc.__name__=["$Cq"];Vc.__super__=F;Vc.prototype=s(F.prototype,{$iH:function(a){a.strokeEllipse(this.$7H,this.$_H,this.$AI,this.$EI,this.$FI,this.$DI,this.$CI)},__class__:Vc});var Wc=function(a,b,c,d,f,h,e){this.$7H=a;this.$_H=b;this.$AI=c;this.$BI=d;this.$GI=f;this.$HI=h;this.$CI=e};l.$Cr=Wc;Wc.__name__=["$Cr"];Wc.__super__=
F;Wc.prototype=s(F.prototype,{$iH:function(a){a.fillArc(this.$7H,this.$_H,this.$AI,this.$BI,this.$GI,this.$HI,this.$CI)},__class__:Wc});var Xc=function(a,b,c,d,f,h,e,g){this.$7H=a;this.$_H=b;this.$AI=c;this.$BI=d;this.$GI=f;this.$HI=h;this.$DI=e;this.$CI=g};l.$Cs=Xc;Xc.__name__=["$Cs"];Xc.__super__=F;Xc.prototype=s(F.prototype,{$iH:function(a){a.strokeArc(this.$7H,this.$_H,this.$AI,this.$BI,this.$GI,this.$HI,this.$DI,this.$CI)},__class__:Xc});var Yc=function(a,b,c){this.$7H=a;this.$8H=b;this.$II=
c};l.$Ct=Yc;Yc.__name__=["$Ct"];Yc.__super__=F;Yc.prototype=s(F.prototype,{$iH:function(a){a.strokeLines(this.$7H,this.$8H,this.$II)},__class__:Yc});var Zc=function(a,b,c){this.$0H=a;this.$8H=b;this.$II=c};l.$Cu=Zc;Zc.__name__=["$Cu"];Zc.__super__=F;Zc.prototype=s(F.prototype,{$iH:function(a){a.drawLines(this.$0H,this.$8H,this.$II)},__class__:Zc});var Lc=function(a,b,c,d,f){this.$7H=a;this.$jH=b;this.$kH=c;this.$yH=d;this.$zH=f};l.$Cv=Lc;Lc.__name__=["$Cv"];Lc.__super__=F;Lc.prototype=s(F.prototype,
{$iH:function(a){a.fillRect(this.$7H,this.$jH,this.$kH,this.$yH,this.$zH)},__class__:Lc});var S=function(a,b,c){v.call(this);this.color=a;this.width=new L(b);this.height=new L(c)};l["kit.display.FillSprite"]=S;S.__name__=["kit","display","FillSprite"];S.__super__=v;S.prototype=s(v.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width.$hF,this.height.$hF)},getNaturalWidth:function(){return this.width.$hF},getNaturalHeight:function(){return this.height.$hF},setSize:function(a,b){this.width.set__(a);
this.height.set__(b);return this},onUpdate:function(a){v.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:S});var $c=function(a){this.$KI=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=this.width=this.height=0;this.charCode=a};l["kit.display.Glyph"]=$c;$c.__name__=["kit","display","Glyph"];$c.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},
getKerning:function(a){return null!=this.$KI?this.$KI.h[a]|0:0},$JI:function(a,b){null==this.$KI&&(this.$KI=new Ba);this.$KI.h[a]=b},__class__:$c};var ha=function(a,b){this.name=b;this.$QH=a;this.$fG=a.getFile(b+".fnt");this.$cG()};l["kit.display.Font"]=ha;ha.__name__=["kit","display","Font"];ha.prototype={layoutText:function(a,b,c,d,f){null==f&&(f=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=ia.Left);return new hb(this,a,b,c,d,f)},$cG:function(){this.$LI=new Ba;this.$LI.h[ha.$MI.charCode]=ha.$MI;
for(var a=new ob(this.$fG.toString()),b=new Ba,c=this.name.lastIndexOf("/"),c=0<=c?z.substr(this.name,0,c+1):"",d=a.$RI();d.hasNext();)switch(d.next()){case "char":for(var f=null,h=a.$SI();h.hasNext();){var e=h.next();switch(e.$YI){case "height":f.height=e.$ZI();break;case "id":f=new $c(e.$ZI());break;case "page":e=e.$ZI();f.page=b.h[e];break;case "width":f.width=e.$ZI();break;case "x":f.x=e.$ZI();break;case "xadvance":f.xAdvance=e.$ZI();break;case "xoffset":f.xOffset=e.$ZI();break;case "y":f.y=e.$ZI();
break;case "yoffset":f.yOffset=e.$ZI()}}this.$LI.set(f.charCode,f);break;case "common":for(f=a.$SI();f.hasNext();)h=f.next(),"lineHeight"==h.$YI&&(this.lineHeight=h.$ZI());break;case "info":for(f=a.$SI();f.hasNext();)switch(h=f.next(),h.$YI){case "face":this.typeface=h.$aI();break;case "size":this.size=h.$ZI()}break;case "kerning":for(var f=null,e=h=0,g=a.$SI();g.hasNext();){var k=g.next();switch(k.$YI){case "amount":e=k.$ZI();break;case "first":f=this.$LI.get(k.$ZI());break;case "second":h=k.$ZI()}}null!=
f&&0!=e&&f.$JI(h,e);break;case "page":f=0;h=null;for(e=a.$SI();e.hasNext();)switch(g=e.next(),g.$YI){case "file":h=g.$aI();break;case "id":f=g.$ZI()}h=this.$QH.getTexture(c+ra.removeFileExtension(h));b.h[f]=h}},__class__:ha};var ia=l["kit.display.TextAlign"]={__ename__:!0,__constructs__:["Left","Center","Right"]};ia.Left=["Left",0];ia.Left.toString=p;ia.Left.__enum__=ia;ia.Center=["Center",1];ia.Center.toString=p;ia.Center.__enum__=ia;ia.Right=["Right",2];ia.Right.toString=p;ia.Right.__enum__=ia;
var hb=function(a,b,c,d,f,h){this.lines=0;var e=this;this.$NI=a;this.$LI=[];this.$OI=[];this.$PI=Math.round(a.lineHeight+h);this.bounds=new sa;var g=[];h=0;for(var k=b.length;h<k;){var l=h++,l=b.charCodeAt(l),l=a.$LI.get(l);null!=l&&this.$LI.push(l)}b=-1;var m=0,n=0;a=a.$LI.get(10);h=function(){var a=e.bounds.width;e.bounds.width=a>m?a:m;e.bounds.height+=n;g[e.lines]=m;n=m=0;++e.lines};for(k=0;k<this.$LI.length;){l=this.$LI[k];this.$OI[k]=Math.round(m);var p=0<d&&m+l.width>d;p||l==a?(p&&(0<=b?(this.$LI[b]=
a,m=this.$OI[b],k=b):this.$LI.splice(k,0,a)),b=-1,n=this.$PI,h()):(32==l.charCode&&(b=k),m+=l.xAdvance+f,p=l.height+l.yOffset,n>p||(n=p),k+1<this.$LI.length&&(m+=l.getKerning(this.$LI[k+1].charCode)));++k}h();f=0;a=hb.$QI(c,g[0],d);b=1.79769313486231E308;h=-1.79769313486231E308;l=k=0;for(p=this.$LI.length;l<p;){var q=this.$LI[l];10==q.charCode&&(f+=this.$PI,++k,a=hb.$QI(c,g[k],d));this.$OI[l]+=a;var r=f+q.yOffset;b=b<r?b:r;q=r+q.height;h>q||(h=q);++l}this.bounds.x=hb.$QI(c,this.bounds.width,d);this.bounds.y=
b;this.bounds.height=h-b};l["kit.display.TextLayout"]=hb;hb.__name__=["kit","display","TextLayout"];hb.$QI=function(a,b,c){switch(a[1]){case 0:return 0;case 1:return Math.round((c-b)/2);case 2:return c-b}};hb.prototype={draw:function(a){for(var b=0,c=0,d=this.$LI.length;c<d;){var f=this.$LI[c];10==f.charCode?b+=this.$PI:f.draw(a,this.$OI[c],b);++c}},__class__:hb};var ob=function(a){this.$TI=a;this.$VI=new $a("([A-Za-z]+)(.*)","");this.$WI=new $a('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};l.$Cw=ob;ob.__name__=
["$Cw"];ob.$XI=function(a,b){var c=b.matchedPos();return z.substr(a,c.pos+c.len,a.length)};ob.prototype={$RI:function(){var a=this,b=this.$TI;return{next:function(){b=ob.$XI(b,a.$VI);a.$UI=a.$VI.matched(2);return a.$VI.matched(1)},hasNext:function(){return a.$VI.match(b)}}},$SI:function(){var a=this,b=this.$UI;return{next:function(){b=ob.$XI(b,a.$WI);return new me(a.$WI.matched(1),a.$WI.matched(2))},hasNext:function(){return a.$WI.match(b)}}},__class__:ob};var me=function(a,b){this.$YI=a;this.$hF=
b};l.$Cx=me;me.__name__=["$Cx"];me.prototype={$ZI:function(){return N.parseInt(this.$hF)},$aI:function(){return 34!=this.$hF.charCodeAt(0)?null:z.substr(this.$hF,1,this.$hF.length-2)},__class__:me};var G=function(a){v.call(this);this.texture=a};l["kit.display.ImageSprite"]=G;G.__name__=["kit","display","ImageSprite"];G.__super__=v;G.prototype=s(v.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():
0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:G});var Ma=l["kit.display.Orientation"]={__ename__:!0,__constructs__:["Portrait","Landscape"]};Ma.Portrait=["Portrait",0];Ma.Portrait.toString=p;Ma.Portrait.__enum__=Ma;Ma.Landscape=["Landscape",1];Ma.Landscape.toString=p;Ma.Landscape.__enum__=Ma;var Sa=function(){this.$kI=null;this.$jI=[];this.$gI=this.$hI=this.$iI=null;this.$fI=new L(1);this.$eI=new L(1);this.$dI=new L(1);this.$bI=this.$cI=null};l.$Cy=
Sa;Sa.__name__=["$Cy"];Sa.prototype={__class__:Sa};var ad=function(){};l["kit.display.Texture"]=ad;ad.__name__=["kit","display","Texture"];ad.__interfaces__=[Qa];ad.prototype={__class__:ad,__properties__:{get_graphics:"get_graphics",get_height:"get_height",get_width:"get_width"}};var Te=function(){};l["kit.display.SubTexture"]=Te;Te.__name__=["kit","display","SubTexture"];Te.__interfaces__=[ad];var K=function(a,b){null==b&&(b="");this.$qI=null;var c=this;v.call(this);this.$NI=a;this.$oI=b;this.$pI=
ia.Left;this.$nE|=256;var d=function(a,b){c.$nE|=256};this.wrapWidth=new L(0,d);this.letterSpacing=new L(0,d);this.lineSpacing=new L(0,d)};l["kit.display.TextSprite"]=K;K.__name__=["kit","display","TextSprite"];K.__super__=v;K.prototype=s(v.prototype,{draw:function(a){this.$nI();this.$qI.draw(a)},getNaturalWidth:function(){this.$nI();return 0<this.wrapWidth.$hF?this.wrapWidth.$hF:this.$qI.bounds.width},getNaturalHeight:function(){this.$nI();var a=this.$qI.lines*(this.$NI.lineHeight+this.lineSpacing.$hF),
b=this.$qI.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.$nI();return this.$qI.bounds.contains(a,b)},set_text:function(a){a!=this.$oI&&(this.$oI=a,this.$nE|=256);return a},set_align:function(a){a!=this.$pI&&(this.$pI=a,this.$nE|=256);return a},$nI:function(){0!=(this.$nE&256)&&(this.$nE&=-257,this.$qI=this.$NI.layoutText(this.$oI,this.$pI,this.wrapWidth.$hF,this.letterSpacing.$hF,this.lineSpacing.$hF))},onUpdate:function(a){v.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);
this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:K,__properties__:s(v.prototype.__properties__,{set_align:"set_align",set_text:"set_text"})});var da=l["kit.display.TextureFormat"]={__ename__:!0,__constructs__:["RGBA","RGBA_4444","RGB","RGB_565","COMPRESSED"]};da.RGBA=["RGBA",0];da.RGBA.toString=p;da.RGBA.__enum__=da;da.RGBA_4444=["RGBA_4444",1];da.RGBA_4444.toString=p;da.RGBA_4444.__enum__=da;da.RGB=["RGB",2];da.RGB.toString=p;da.RGB.__enum__=da;da.RGB_565=["RGB_565",3];da.RGB_565.toString=
p;da.RGB_565.__enum__=da;da.COMPRESSED=["COMPRESSED",4];da.COMPRESSED.toString=p;da.COMPRESSED.__enum__=da;var Ue=function(){};l["kit.display.VectorFont"]=Ue;Ue.__name__=["kit","display","VectorFont"];Ue.__interfaces__=[Qa];var Ve=function(){this.$4I=this.$5I=this.$6I=null;this.$3I=new P;this.paddingTop=this.paddingRight=this.paddingBottom=this.paddingLeft=0;this.outputOnly=!1;this.active=!0};l["kit.filter.Filter"]=Ve;Ve.__name__=["kit","filter","Filter"];Ve.prototype={apply:function(a){a.render(this)},
setUniformVec2:function(a,b,c){this.$1I(a,1,[b,c])},setUniformSampler2D:function(a,b){this.$1I(a,11,b)},update:function(a){},$1I:function(a,b,c){var d=this.$3I,d=null!=E[a]?d.getReserved(a):d.h[a];if(null==d){var f=this.$3I,h=d=new ne(a);null!=E[a]?f.setReserved(a,h):f.h[a]=h}d.$9I=b;d.$8I=c},$2I:function(){null==this.$6I&&(this.$6I=null!=this.$5I?this.$5I+"@"+this.$4I:this.$4I);return this.$6I},__class__:Ve};var ne=function(a){this.$9I=0;this.$8I=null;this.$7I=a};l.$C0=ne;ne.__name__=["$C0"];ne.prototype=
{__class__:ne};var e=l["kit.input.Key"]={__ename__:!0,__constructs__:"A B C D E F G H I J K L M N O P Q R S T U V W X Y Z Number0 Number1 Number2 Number3 Number4 Number5 Number6 Number7 Number8 Number9 Numpad0 Numpad1 Numpad2 Numpad3 Numpad4 Numpad5 Numpad6 Numpad7 Numpad8 Numpad9 NumpadAdd NumpadDecimal NumpadDivide NumpadEnter NumpadMultiply NumpadSubtract F1 F2 F3 F4 F5 F6 F7 F8 F9 F10 F11 F12 F13 F14 F15 Left Up Right Down Alt Backquote Backslash Backspace CapsLock Comma Command Control Delete End Enter Equals Escape Home Insert LeftBracket Minus PageDown PageUp Period Quote RightBracket Semicolon Shift Slash Space Tab Menu Search Unknown".split(" ")};
e.A=["A",0];e.A.toString=p;e.A.__enum__=e;e.B=["B",1];e.B.toString=p;e.B.__enum__=e;e.C=["C",2];e.C.toString=p;e.C.__enum__=e;e.D=["D",3];e.D.toString=p;e.D.__enum__=e;e.E=["E",4];e.E.toString=p;e.E.__enum__=e;e.F=["F",5];e.F.toString=p;e.F.__enum__=e;e.G=["G",6];e.G.toString=p;e.G.__enum__=e;e.H=["H",7];e.H.toString=p;e.H.__enum__=e;e.I=["I",8];e.I.toString=p;e.I.__enum__=e;e.J=["J",9];e.J.toString=p;e.J.__enum__=e;e.K=["K",10];e.K.toString=p;e.K.__enum__=e;e.L=["L",11];e.L.toString=p;e.L.__enum__=
e;e.M=["M",12];e.M.toString=p;e.M.__enum__=e;e.N=["N",13];e.N.toString=p;e.N.__enum__=e;e.O=["O",14];e.O.toString=p;e.O.__enum__=e;e.P=["P",15];e.P.toString=p;e.P.__enum__=e;e.Q=["Q",16];e.Q.toString=p;e.Q.__enum__=e;e.R=["R",17];e.R.toString=p;e.R.__enum__=e;e.S=["S",18];e.S.toString=p;e.S.__enum__=e;e.T=["T",19];e.T.toString=p;e.T.__enum__=e;e.U=["U",20];e.U.toString=p;e.U.__enum__=e;e.V=["V",21];e.V.toString=p;e.V.__enum__=e;e.W=["W",22];e.W.toString=p;e.W.__enum__=e;e.X=["X",23];e.X.toString=
p;e.X.__enum__=e;e.Y=["Y",24];e.Y.toString=p;e.Y.__enum__=e;e.Z=["Z",25];e.Z.toString=p;e.Z.__enum__=e;e.Number0=["Number0",26];e.Number0.toString=p;e.Number0.__enum__=e;e.Number1=["Number1",27];e.Number1.toString=p;e.Number1.__enum__=e;e.Number2=["Number2",28];e.Number2.toString=p;e.Number2.__enum__=e;e.Number3=["Number3",29];e.Number3.toString=p;e.Number3.__enum__=e;e.Number4=["Number4",30];e.Number4.toString=p;e.Number4.__enum__=e;e.Number5=["Number5",31];e.Number5.toString=p;e.Number5.__enum__=
e;e.Number6=["Number6",32];e.Number6.toString=p;e.Number6.__enum__=e;e.Number7=["Number7",33];e.Number7.toString=p;e.Number7.__enum__=e;e.Number8=["Number8",34];e.Number8.toString=p;e.Number8.__enum__=e;e.Number9=["Number9",35];e.Number9.toString=p;e.Number9.__enum__=e;e.Numpad0=["Numpad0",36];e.Numpad0.toString=p;e.Numpad0.__enum__=e;e.Numpad1=["Numpad1",37];e.Numpad1.toString=p;e.Numpad1.__enum__=e;e.Numpad2=["Numpad2",38];e.Numpad2.toString=p;e.Numpad2.__enum__=e;e.Numpad3=["Numpad3",39];e.Numpad3.toString=
p;e.Numpad3.__enum__=e;e.Numpad4=["Numpad4",40];e.Numpad4.toString=p;e.Numpad4.__enum__=e;e.Numpad5=["Numpad5",41];e.Numpad5.toString=p;e.Numpad5.__enum__=e;e.Numpad6=["Numpad6",42];e.Numpad6.toString=p;e.Numpad6.__enum__=e;e.Numpad7=["Numpad7",43];e.Numpad7.toString=p;e.Numpad7.__enum__=e;e.Numpad8=["Numpad8",44];e.Numpad8.toString=p;e.Numpad8.__enum__=e;e.Numpad9=["Numpad9",45];e.Numpad9.toString=p;e.Numpad9.__enum__=e;e.NumpadAdd=["NumpadAdd",46];e.NumpadAdd.toString=p;e.NumpadAdd.__enum__=e;e.NumpadDecimal=
["NumpadDecimal",47];e.NumpadDecimal.toString=p;e.NumpadDecimal.__enum__=e;e.NumpadDivide=["NumpadDivide",48];e.NumpadDivide.toString=p;e.NumpadDivide.__enum__=e;e.NumpadEnter=["NumpadEnter",49];e.NumpadEnter.toString=p;e.NumpadEnter.__enum__=e;e.NumpadMultiply=["NumpadMultiply",50];e.NumpadMultiply.toString=p;e.NumpadMultiply.__enum__=e;e.NumpadSubtract=["NumpadSubtract",51];e.NumpadSubtract.toString=p;e.NumpadSubtract.__enum__=e;e.F1=["F1",52];e.F1.toString=p;e.F1.__enum__=e;e.F2=["F2",53];e.F2.toString=
p;e.F2.__enum__=e;e.F3=["F3",54];e.F3.toString=p;e.F3.__enum__=e;e.F4=["F4",55];e.F4.toString=p;e.F4.__enum__=e;e.F5=["F5",56];e.F5.toString=p;e.F5.__enum__=e;e.F6=["F6",57];e.F6.toString=p;e.F6.__enum__=e;e.F7=["F7",58];e.F7.toString=p;e.F7.__enum__=e;e.F8=["F8",59];e.F8.toString=p;e.F8.__enum__=e;e.F9=["F9",60];e.F9.toString=p;e.F9.__enum__=e;e.F10=["F10",61];e.F10.toString=p;e.F10.__enum__=e;e.F11=["F11",62];e.F11.toString=p;e.F11.__enum__=e;e.F12=["F12",63];e.F12.toString=p;e.F12.__enum__=e;e.F13=
["F13",64];e.F13.toString=p;e.F13.__enum__=e;e.F14=["F14",65];e.F14.toString=p;e.F14.__enum__=e;e.F15=["F15",66];e.F15.toString=p;e.F15.__enum__=e;e.Left=["Left",67];e.Left.toString=p;e.Left.__enum__=e;e.Up=["Up",68];e.Up.toString=p;e.Up.__enum__=e;e.Right=["Right",69];e.Right.toString=p;e.Right.__enum__=e;e.Down=["Down",70];e.Down.toString=p;e.Down.__enum__=e;e.Alt=["Alt",71];e.Alt.toString=p;e.Alt.__enum__=e;e.Backquote=["Backquote",72];e.Backquote.toString=p;e.Backquote.__enum__=e;e.Backslash=
["Backslash",73];e.Backslash.toString=p;e.Backslash.__enum__=e;e.Backspace=["Backspace",74];e.Backspace.toString=p;e.Backspace.__enum__=e;e.CapsLock=["CapsLock",75];e.CapsLock.toString=p;e.CapsLock.__enum__=e;e.Comma=["Comma",76];e.Comma.toString=p;e.Comma.__enum__=e;e.Command=["Command",77];e.Command.toString=p;e.Command.__enum__=e;e.Control=["Control",78];e.Control.toString=p;e.Control.__enum__=e;e.Delete=["Delete",79];e.Delete.toString=p;e.Delete.__enum__=e;e.End=["End",80];e.End.toString=p;e.End.__enum__=
e;e.Enter=["Enter",81];e.Enter.toString=p;e.Enter.__enum__=e;e.Equals=["Equals",82];e.Equals.toString=p;e.Equals.__enum__=e;e.Escape=["Escape",83];e.Escape.toString=p;e.Escape.__enum__=e;e.Home=["Home",84];e.Home.toString=p;e.Home.__enum__=e;e.Insert=["Insert",85];e.Insert.toString=p;e.Insert.__enum__=e;e.LeftBracket=["LeftBracket",86];e.LeftBracket.toString=p;e.LeftBracket.__enum__=e;e.Minus=["Minus",87];e.Minus.toString=p;e.Minus.__enum__=e;e.PageDown=["PageDown",88];e.PageDown.toString=p;e.PageDown.__enum__=
e;e.PageUp=["PageUp",89];e.PageUp.toString=p;e.PageUp.__enum__=e;e.Period=["Period",90];e.Period.toString=p;e.Period.__enum__=e;e.Quote=["Quote",91];e.Quote.toString=p;e.Quote.__enum__=e;e.RightBracket=["RightBracket",92];e.RightBracket.toString=p;e.RightBracket.__enum__=e;e.Semicolon=["Semicolon",93];e.Semicolon.toString=p;e.Semicolon.__enum__=e;e.Shift=["Shift",94];e.Shift.toString=p;e.Shift.__enum__=e;e.Slash=["Slash",95];e.Slash.toString=p;e.Slash.__enum__=e;e.Space=["Space",96];e.Space.toString=
p;e.Space.__enum__=e;e.Tab=["Tab",97];e.Tab.toString=p;e.Tab.__enum__=e;e.Menu=["Menu",98];e.Menu.toString=p;e.Menu.__enum__=e;e.Search=["Search",99];e.Search.toString=p;e.Search.__enum__=e;e.Unknown=function(a){a=["Unknown",100,a];a.__enum__=e;a.toString=p;return a};var oe=function(){this.$$I(0,null)};l["kit.input.KeyboardEvent"]=oe;oe.__name__=["kit","input","KeyboardEvent"];oe.prototype={$$I:function(a,b){this.id=a;this.key=b},__class__:oe};var ta=l["kit.input.MouseButton"]={__ename__:!0,__constructs__:["Left",
"Middle","Right","Unknown"]};ta.Left=["Left",0];ta.Left.toString=p;ta.Left.__enum__=ta;ta.Middle=["Middle",1];ta.Middle.toString=p;ta.Middle.__enum__=ta;ta.Right=["Right",2];ta.Right.toString=p;ta.Right.__enum__=ta;ta.Unknown=function(a){a=["Unknown",3,a];a.__enum__=ta;a.toString=p;return a};var la=l["kit.input.MouseCursor"]={__ename__:!0,__constructs__:["Default","Button","None"]};la.Default=["Default",0];la.Default.toString=p;la.Default.__enum__=la;la.Button=["Button",1];la.Button.toString=p;la.Button.__enum__=
la;la.None=["None",2];la.None.toString=p;la.None.__enum__=la;var pe=function(){this.$$I(0,0,0,null)};l["kit.input.MouseEvent"]=pe;pe.__name__=["kit","input","MouseEvent"];pe.prototype={$$I:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:pe};var bd=l["kit.input.EventSource"]={__ename__:!0,__constructs__:["Mouse","Touch"]};bd.Mouse=function(a){a=["Mouse",0,a];a.__enum__=bd;a.toString=p;return a};bd.Touch=function(a){a=["Touch",1,a];a.__enum__=bd;a.toString=p;return a};
var qe=function(){this.$$I(0,0,0,null,null)};l["kit.input.PointerEvent"]=qe;qe.__name__=["kit","input","PointerEvent"];qe.prototype={$$I:function(a,b,c,d,f){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=f;this.$_I=!1},__class__:qe};var re=function(a){this.id=a;this.$AJ=bd.Touch(this)};l["kit.input.TouchPoint"]=re;re.__name__=["kit","input","TouchPoint"];re.prototype={$$I:function(a,b){this.viewX=a;this.viewY=b},__class__:re};var Ra=function(){};l["kit.math.FMath"]=Ra;Ra.__name__=["kit",
"math","FMath"];Ra.clamp=function(a,b,c){return a<b?b:a>c?c:a};var pb=function(){};l["kit.movie.Symbol"]=pb;pb.__name__=["kit","movie","Symbol"];pb.prototype={__class__:pb};var Gb=function(a,b){this.$BJ=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0;c=a.scale;null!=c?(this.scaleX=c[0],this.scaleY=c[1]):this.scaleY=this.scaleX=1};l["kit.movie.BitmapSymbol"]=Gb;Gb.__name__=["kit","movie","BitmapSymbol"];
Gb.__interfaces__=[pb];Gb.prototype={createSprite:function(){var a=new G(this.texture);a.setAnchor(this.anchorX,this.anchorY);a.setScaleXY(this.scaleX,this.scaleY);return a},__class__:Gb};var We=function(){};l["kit.movie.Flipbook"]=We;We.__name__=["kit","movie","Flipbook"];We.prototype={__class__:We};var Xe=function(){this.label=null;this.anchorX=this.anchorY=0};l["kit.movie.FlipbookFrame"]=Xe;Xe.__name__=["kit","movie","FlipbookFrame"];Xe.prototype={$CJ:function(){return new cd(this)},__class__:Xe};
var cd=function(a){this.$0H=a.texture;this.$DJ=a.anchorX;this.$EJ=a.anchorY};l.$C2=cd;cd.__name__=["$C2"];cd.__interfaces__=[pb];cd.prototype={createSprite:function(){var a=new G(this.$0H);a.setAnchor(this.$DJ,this.$EJ);return a},__class__:cd};var Hb=function(a,b){this.sounds=new P;this.scenes=[];var c=this;this.$fG=a.getFile(b+"/library.json");var d=this.$fG.toJson();this.$FJ=new P;this.frameRate=d.frameRate;this.backgroundColor=null!=d.backgroundColor?d.backgroundColor:0;this.backgroundAlpha=null!=
d.backgroundAlpha?d.backgroundAlpha:1;this.width=null!=d.width?d.width:0;this.height=null!=d.height?d.height:0;this.pixelSnapping=null!=d.pixelSnapping?d.pixelSnapping:!0;if(null!=d.sounds)for(var f=0,h=d.sounds;f<h.length;){var e=h[f];++f;var g=a.getSound(b+"/"+ra.removeFileExtension(e.file),!1),e=e.id,k=this.sounds,g=new se(e,g);null!=E[e]?k.setReserved(e,g):k.h[e]=g}if(null!=d.videos)for(f=0,h=d.videos;f<h.length;)e=h[f],++f,g=a.getVideo(b+"/"+ra.removeFileExtension(e.file),!1),e=e.id,k=this.$FJ,
g=new dd(e,g),null!=E[e]?k.setReserved(e,g):k.h[e]=g;f=[];h=0;for(e=d.movies;h<e.length;){g=e[h];++h;g=new qb(this,g);f.push(g);var k=g.$BJ,l=this.$FJ;null!=E[k]?l.setReserved(k,g):l.h[k]=g}if(null!=d.scenes)for(h=0,e=d.scenes;h<e.length;)g=e[h],++h,g=new qb(this,g),f.push(g),this.scenes.push(g);d=d.textureGroups[0].atlases;for(h=0;h<d.length;){k=d[h];++h;e=b+"/"+ra.removeFileExtension(k.file);e=a.getTexture(e);if(null!=k.mask){var g=a.getTexture(b+"/"+ra.removeFileExtension(k.mask)),l=n.$2F.$LF.createTexture(e.get_width(),
e.get_height()),m=l.get_graphics();m.save();m.setBlendMode(R.Copy);m.drawTexture(e,0,0);m.setBlendMode(R.Mask);m.drawTexture(g,0,0);m.restore();e.dispose();g.dispose();e=l}g=0;for(k=k.textures;g<k.length;){l=k[g];++g;var l=new Gb(l,e),m=l.$BJ,p=this.$FJ;null!=E[m]?p.setReserved(m,l):p.h[m]=l}}for(var q=null,d=q=function(a){for(var b=a.keyframes,d=b.length,f=0;f<d;){var h=f++,e=b[h];if(null!=e.$zJ){var g=e.$zJ,w=c.$FJ,g=null!=E[g]?w.getReserved(g):w.h[g];e.symbol=g}e.tweened&&1==e.duration&&h+1<d&&
(h=b[h+1],h.visible&&null!=h.$zJ||(e.visible=!1))}b=0;for(a=a.childLayers;b<a.length;)d=a[b],++b,q(d)},h=0;h<f.length;)for(g=f[h],++h,e=0,g=g.layers;e<g.length;)k=g[e],++e,d(k)};l["kit.movie.Library"]=Hb;Hb.__name__=["kit","movie","Library"];Hb.fromFlipbooks=function(a){var b=ca.createEmptyInstance(Hb);b.$FJ=new P;b.frameRate=60;b.$fG=null;for(var c=0;c<a.length;){var d=a[c];++c;for(var f=[],h=0,e=d.frames;h<e.length;){var g=e[h];++h;f.push({duration:g.duration*b.frameRate,label:g.label,pivot:[g.anchorX,
g.anchorY],ref:""})}f=new qb(b,{id:d.name,layers:[{name:"flipbook",flipbook:!0,keyframes:f}]});h=d.name;e=b.$FJ;null!=E[h]?e.setReserved(h,f):e.h[h]=f;f=f.layers[0].keyframes;h=0;for(e=d.frames.length;h<e;){var g=h++,k=d.frames[g].$CJ();f[g].symbol=k}}return b};Hb.prototype={createSprite:function(a,b){var c=this.$FJ,c=null!=E[a]?c.getReserved(a):c.h[a];return null==c?null:c.createSprite()},__class__:Hb};var ed=function(a){this.$KJ=this.$LJ=null;r.call(this);this.$sI=a;this.$JJ=new m;this.movie=new ea(null);
this.setCache(!0)};l["kit.movie.MoviePlayer"]=ed;ed.__name__=["kit","movie","MoviePlayer"];ed.__super__=r;ed.prototype=s(r.prototype,{get_entitySlot:function(){return 6},setCache:function(a){this.$NJ=a?new P:null;return this},play:function(a,b){null==b&&(b=!0);if(b||null==this.$KJ||this.$KJ.symbol.$BJ!=a)this.$KJ=this.$GJ(a);return this},loop:function(a,b){null==b&&(b=!0);if(b||null==this.$LJ||this.$LJ.symbol.$BJ!=a)this.$KJ=null,this.$LJ=this.$GJ(a);return this},onAdded:function(){this.owner.addChild(this.$JJ)},
onRemoved:function(){this.$JJ.dispose();this.$KJ=this.$LJ=null;this.movie.set__(null)},onUpdate:function(a){null!=this.$KJ&&this.$KJ.$TJ+a>this.$KJ.symbol.duration&&(this.$KJ=null,this.$IJ(this.$LJ))},$GJ:function(a){var b;if(null!=this.$NJ)if(b=this.$NJ,b=null!=E[a]?b.getReserved(a):b.h[a],null!=b)b.set_position(0);else{b=this.$HJ(a);var c=this.$NJ;null!=E[a]?c.setReserved(a,b):c.h[a]=b}else b=this.$HJ(a);return this.$IJ(b)},$HJ:function(a){a=this.$sI.createSprite(a,!0);null!=this.$MJ&&this.$MJ(a);
return a},$IJ:function(a){this.$JJ.add(a);return this.movie.set__(a)},__class__:ed});var Na=function(a){this.$WJ=this.$XJ=this.$YJ=null;this.$VJ=0;var b=this;v.call(this);this.symbol=a;this.speed=new L(1);this.$SJ=Array(a.layers.length);for(var c=0,d=this.$SJ.length;c<d;){var f=c++;this.$SJ[f]=new rb(a.layers[f])}this.$TJ=0;this.$UJ=-1;this.$PJ(0);if(a.button){var h=0/a.frameRate,e=1/a.frameRate,g=2/a.frameRate,k=!1,l=!1,c=new sa(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,-1.79769313486231E308),
d=0;for(a=a.layers;d<a.length;)f=a[d],++d,Na.$ZJ(f,c);c.x<c.width&&c.y<c.height&&(this.$YJ=c);this.$nE|=4096;this.get_pointerDown().connect(function(a){k=!0;b.set_position(g);n.$2F.$KF.up.connect(function(a){k=!1;b.set_position(l?e:h)}).once()});var m=null;this.get_pointerIn().connect(function(a){l=!0;b.set_position(k?g:e);n.$2F.$JF.get_cursor()==la.Default&&n.$2F.$JF.set_cursor(la.Button);null!=m&&m.dispose();m=n.$2F.$KF.move.connect(function(a){null==b.owner&&(m.dispose(),n.$2F.$JF.get_cursor()==
la.Button&&n.$2F.$JF.set_cursor(la.Default))})});this.get_pointerOut().connect(function(a){l=!1;b.set_position(h);n.$2F.$JF.get_cursor()==la.Button&&n.$2F.$JF.set_cursor(la.Default)})}};l["kit.movie.MovieSprite"]=Na;Na.__name__=["kit","movie","MovieSprite"];Na.$ZJ=function(a,b){for(var c=0,d=a.keyframes;c<d.length;){var f=d[c];++c;if(3==f.index&&null!=f.symbol){var h=f.symbol.createSprite(),e=h.getNaturalWidth(),g=h.getNaturalHeight();if(0<e&&0<g){var k=h.scaleX.$hF*f.scaleX,l=h.scaleY.$hF*f.scaleY,
h=h.getLocalMatrix(),m=Math.sin(f.skewX),n=Math.cos(f.skewX),p=Math.sin(f.skewY),q=Math.cos(f.skewY);h.set(q*k,p*k,-m*l,n*l,f.x,f.y);h.translate(-f.pivotX,-f.pivotY);v.$_G(h,0,0,b);v.$_G(h,e,0,b);v.$_G(h,e,g,b);v.$_G(h,0,g,b)}}}c=0;for(d=a.childLayers;c<d.length;)f=d[c],++c,Na.$ZJ(f,b)};Na.__super__=v;Na.prototype=s(v.prototype,{containsLocal:function(a,b){return null!=this.$YJ&&a>=this.$YJ.x&&a<this.$YJ.width&&b>=this.$YJ.y?b<this.$YJ.height:!1},onAdded:function(){v.prototype.onAdded.call(this);
for(var a=0,b=this.$SJ;a<b.length;){var c=b[a];++a;this.owner.addChild(c.$fJ)}},onRemoved:function(){v.prototype.onRemoved.call(this);for(var a=0,b=this.$SJ;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.$fJ)}},onUpdate:function(a){v.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this.$nE&6912){case 0:0<=this.speed.$hF&&(this.$TJ+=this.speed.$hF*a,this.$TJ>this.symbol.duration&&(0!=(this.$nE&1024)?(this.$TJ=this.symbol.duration,this.$nE|=2048):(this.$TJ%=this.symbol.duration,null!=
this.$WJ&&this.$WJ.emit())));break;case 512:this.$nE&=-513}this.$PJ(this.$TJ*this.symbol.frameRate)},$PJ:function(a){if(this.$UJ!=a){if(a<this.$UJ)for(var b=0,c=this.$SJ;b<c.length;){var d=c[b];++b;if(d.$pJ(this.$XJ))return}b=0;for(c=this.$SJ;b<c.length;)if(d=c[b],++b,d.$rJ(a,this.$XJ,this.$VJ))return;switch(this.$VJ){case 0:this.$VJ=1;break;case 1:case 2:this.$VJ=3}this.$UJ=a}},set_position:function(a){this.setPosition(a,!0);return a},setPosition:function(a,b){var c=Ra.clamp(a,0,this.symbol.duration);
this.$TJ=c;this.$VJ=3;for(var d=c*this.symbol.frameRate,f=b?2:0,h=0,e=this.$SJ;h<e.length;){var g=e[h];++h;if(g.$qJ(d,this.$XJ,f))return c}this.$UJ=d;return c},set_paused:function(a){this.$nE=Fb.set(this.$nE,256,a);return a},$QJ:function(a){this.$TJ=a.firstFrame/this.symbol.frameRate;this.set_paused(a.playMode==na.SingleFrame);this.$nE=(this.$nE|512)&-2049;a=0;for(var b=this.$SJ;a<b.length;){var c=b[a];++a;c.$QJ()}},__class__:Na,__properties__:s(v.prototype.__properties__,{set_paused:"set_paused",
set_position:"set_position"})});var rb=function(a){this.$wJ=[];this.$lJ=null;this.$kJ=!0;this.$iJ=-1;this.$hJ=0;this.$gJ=!1;this.$jJ=a;this.$fJ=new m;if(a.empty)this.$vJ=null;else{this.$vJ=Array(a.keyframes.length);for(var b=null,c=null,d=0,f=this.$vJ.length;d<f;){var h=d++,e=a.keyframes[h];if(null!=b&&rb.$xJ(b,e))this.$vJ[h]=c;else if(null!=e.symbol){c=e.symbol.createSprite();this.$vJ[h]=c;if(0<e.firstFrame||e.playMode!=na.Loop)if(b=c instanceof Na?c:null,null!=b){switch(e.playMode[1]){case 1:b.$nE|=
1024;break;case 2:b.set_paused(!0)}b.$TJ=e.firstFrame/b.symbol.frameRate}b=e}else this.$vJ[h]=new v}this.$fJ.add(this.$vJ[0])}this.$uJ=this.$fJ;if(0<a.childLayers.length)for(f=new v,e=(new m).add(f),e.addChild(this.$fJ),this.$fJ=b=new m,d=new m,a.mask&&(this.$lJ=new v,this.$lJ.set_mask(f),d.add(this.$lJ)),b.addChild(d),b.addChild(e),f=0,a=a.childLayers;f<a.length;)e=a[f],++f,e=new rb(e),this.$wJ.push(e),d.addChild(e.$fJ)};l.$C3=rb;rb.__name__=["$C3"];rb.$xJ=function(a,b){return a.symbol!=b.symbol||
a.playMode!=b.playMode?!1:2==a.playMode[1]?a.firstFrame==b.firstFrame:a.firstFrame!=b.firstFrame?a.firstFrame+a.duration==b.firstFrame:!0};rb.prototype={$oJ:function(a,b){null!=a.sound&&null!=a.sound.sound&&(this.$fJ.emitMessageToParents("MovieSprite.FRAME_SOUND",new fd(this.$fJ,a)).handled||a.sound.sound.play());if(null!=b){var c=a.label;null!=c&&b.emit(c)}null!=a.actions&&this.$fJ.emitMessageToParents("MovieSprite.FRAME_ACTION",new fd(this.$fJ,a))},$pJ:function(a){for(var b=0,c=this.$wJ;b<c.length;){var d=
c[b];++b;if(d.$pJ(a))return!0}if(0<=this.$iJ){for(var b=this.$jJ.keyframes,c=this.$hJ,d=this.$iJ+1,f=b.length;d<f;){var h=d++;this.$oJ(b[h],a);if(c!=this.$hJ)return!0}this.$iJ=-1}this.$gJ=!0;return!1},$qJ:function(a,b,c){for(var d=0,f=this.$wJ;d<f.length;){var h=f[d];++d;if(h.$qJ(a,b,c))return!0}++this.$hJ;d=this.$jJ.keyframes;f=d.length-1;h=this.$iJ;for(this.$iJ=-1;this.$iJ<f&&d[this.$iJ+1].index<=a;)++this.$iJ;this.$iJ!=h&&(this.$gJ=!0);return this.$rJ(a,b,c)},$rJ:function(a,b,c){for(var d=0,f=
this.$wJ;d<f.length;){var h=f[d];++d;if(h.$rJ(a,b,c))return!0}var d=this.$jJ.keyframes,e=d.length-1,f=this.$iJ;if(a>this.$jJ.frames)this.$iJ=e,this.$gJ=!0;else for(;this.$iJ<e&&d[this.$iJ+1].index<=a;)++this.$iJ,this.$gJ=!0;if(null!=this.$vJ){var h=d[this.$iJ],g;if(this.$gJ){if(this.$gJ=!1,g=this.$vJ[this.$iJ],g!=this.$uJ.$BF[1]){var k=g instanceof Na?g:null;null!=k&&k.$QJ(h);this.$uJ.add(g)}}else g=this.$uJ.$BF[1];if(this.$kJ&&(k=h.visible&&null!=h.symbol&&a<=this.$jJ.frames,g.set_visible(k),null!=
this.$lJ&&this.$lJ.set_maskEnabled(k),k)){var k=h.x,l=h.y,m=h.scaleX,n=h.scaleY,p=h.skewX,q=h.skewY,r=h.alpha,s=h.tint;if(h.tweened&&this.$iJ<e){var e=(a-h.index)/h.duration,t=h.ease;if(0!=t){var u;0>t?(u=1-e,u=1-u*u,t=-t):u=e*e;e=t*u+(1-t)*e}t=d[this.$iJ+1];k+=(t.x-k)*e;l+=(t.y-l)*e;m+=(t.scaleX-m)*e;n+=(t.scaleY-n)*e;p+=(t.skewX-p)*e;q+=(t.skewY-q)*e;r+=(t.alpha-r)*e;t=t.tint;if(16777215!=t||16777215!=s){u=(s&16711680)>>16;var v=(s&65280)>>8,s=s&255,v=v+((((t&65280)>>8)-v)*e|0),s=s+(((t&255)-s)*
e|0),s=u+((((t&16711680)>>16)-u)*e|0)<<16|v<<8|s}}e=h.symbol;e=e instanceof Gb?e:null;null!=e&&(m*=e.scaleX,n*=e.scaleY);e=g.getLocalMatrix();t=Math.sin(p);p=Math.cos(p);u=Math.sin(q);q=Math.cos(q);e.set(q*m,u*m,-t*n,p*n,k,l);e.translate(-h.pivotX,-h.pivotY);g.$nE|=16;g.alpha.set__(r);g.setTint(s);null==h.blendMode&&null==g.get_blendMode()||g.set_blendMode(h.blendMode)}}if(0!=c)for(1==c?f=-1:2==c&&0<=this.$iJ&&d[this.$iJ].index==a&&(f=this.$iJ-1),a=this.$hJ,c=f,f=this.$iJ;c<f;)if(h=c++,this.$oJ(d[h+
1],b),this.$hJ!=a)return!0;return!1},$QJ:function(){for(var a=0,b=this.$wJ;a<b.length;){var c=b[a];++a;c.$QJ()}this.$gJ=!0;this.$iJ=-1;if(null!=this.$vJ)for(a=0,b=this.$vJ.length;a<b;){var c=a++,d=this.$vJ[c],d=d instanceof Na?d:null;null!=d&&d.$QJ(this.$jJ.keyframes[c])}},__class__:rb};var fd=function(a,b){this.layer=a;this.keyframe=b};l["kit.movie.FrameEvent"]=fd;fd.__name__=["kit","movie","FrameEvent"];fd.prototype={__class__:fd};var qb=function(a,b){this.$BJ=b.id;this.frameRate=a.frameRate;this.frames=
0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var f=c++,h=new gd(a,b.layers[f]);this.frames=Math.max(h.frames,this.frames);this.layers[f]=h}this.duration=this.frames/this.frameRate;this.button=!0==b.button};l["kit.movie.MovieSymbol"]=qb;qb.__name__=["kit","movie","MovieSymbol"];qb.__interfaces__=[pb];qb.prototype={createSprite:function(){return new Na(this)},__class__:qb};var gd=function(a,b){this.mask=!1;this.childLayers=[];this.empty=!0;this.name=b.name;var c=null;
this.keyframes=Array(b.keyframes.length);for(var d=0,f=this.keyframes.length;d<f;){var h=d++,c=new te(a,b.keyframes[h],c);this.keyframes[h]=c;this.empty=this.empty&&null==c.$zJ}this.frames=null!=c?c.index+c.duration:0;null!=b.mask&&(this.mask=b.mask);if(null!=b.childLayers)for(c=0,d=b.childLayers;c<d.length;)f=d[c],++c,f=new gd(a,f),f.frames>this.frames&&(this.frames=f.frames),this.childLayers.push(f)};l["kit.movie.MovieLayer"]=gd;gd.__name__=["kit","movie","MovieLayer"];gd.prototype={__class__:gd};
var na=l["kit.movie.PlayMode"]={__ename__:!0,__constructs__:["Loop","PlayOnce","SingleFrame"]};na.Loop=["Loop",0];na.Loop.toString=p;na.Loop.__enum__=na;na.PlayOnce=["PlayOnce",1];na.PlayOnce.toString=p;na.PlayOnce.__enum__=na;na.SingleFrame=["SingleFrame",2];na.SingleFrame.toString=p;na.SingleFrame.__enum__=na;var te=function(a,b,c){this.actions=this.sound=null;this.firstFrame=0;this.playMode=na.Loop;this.blendMode=null;this.ease=0;this.visible=this.tweened=!0;this.tint=16777215;this.alpha=1;this.skewX=
this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=this.instanceName=null;this.index=null!=c?c.index+c.duration:0;this.duration=b.duration;this.label=b.label;this.$zJ=b.ref;c=b.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=b.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=b.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=b.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=b.alpha&&(this.alpha=b.alpha);null!=b.tint&&(this.tint=b.tint);null!=b.visible&&
(this.visible=b.visible);null!=b.tweened&&(this.tweened=b.tweened);null!=b.ease&&(this.ease=b.ease);if(null!=b.blendMode){c=b.blendMode;if(null==c)c=null;else switch(c){case "add":c=R.Add;break;case "layer":c=R.Mask;break;case "multiply":c=R.Multiply;break;case "screen":c=R.Screen;break;default:c=null}this.blendMode=c}null!=b.firstFrame&&(this.firstFrame=b.firstFrame);if(null!=b.playMode){c=b.playMode;if(null==c)c=na.Loop;else switch(c){case "once":c=na.PlayOnce;break;case "stop":c=na.SingleFrame;
break;default:c=na.Loop}this.playMode=c}null!=b.actions&&(this.actions=b.actions);null!=b.sound&&(c=b.sound,a=a.sounds,this.sound=null!=E[c]?a.getReserved(c):a.h[c]);null!=b.refName&&(this.instanceName=b.refName)};l["kit.movie.MovieKeyframe"]=te;te.__name__=["kit","movie","MovieKeyframe"];te.prototype={__class__:te};var se=function(a,b){this.name=a;this.sound=b};l["kit.movie.SoundSymbol"]=se;se.__name__=["kit","movie","SoundSymbol"];se.prototype={__class__:se};var dd=function(a,b){this.$BJ=a;this.video=
b};l["kit.movie.VideoSymbol"]=dd;dd.__name__=["kit","movie","VideoSymbol"];dd.__interfaces__=[pb];dd.prototype={createSprite:function(){return new hd(this)},__class__:dd};var Ya=function(a){v.call(this);this.$2J=a};l["kit.video.VideoSprite"]=Ya;Ya.__name__=["kit","video","VideoSprite"];Ya.__super__=v;Ya.prototype=s(v.prototype,{draw:function(a){null!=this.$2J&&a.drawTexture(this.$2J.get_texture(),0,0)},getNaturalWidth:function(){return null!=this.$2J?this.$2J.get_video().get_width():0},getNaturalHeight:function(){return null!=
this.$2J?this.$2J.get_video().get_height():0},dispose:function(){v.prototype.dispose.call(this);this.set_playback(null)},set_playback:function(a){null!=this.$2J&&this.$2J.dispose();return this.$2J=a},__class__:Ya,__properties__:s(v.prototype.__properties__,{set_playback:"set_playback"})});var hd=function(a){Ya.call(this,null);this.$3J=a};l.$C5=hd;hd.__name__=["$C5"];hd.__super__=Ya;hd.prototype=s(Ya.prototype,{onAdded:function(){Ya.prototype.onAdded.call(this);this.set_playback(this.$3J.video.play())},
onRemoved:function(){Ya.prototype.onRemoved.call(this);this.set_playback(null)},__class__:hd});var $=function(){this.$wK=!1};l.$C8=$;$.__name__=["$C8"];$.__interfaces__=[Qa];$.prototype={dispose:function(){this.$wK||(this.$wK=!0,this.$uK())},$uK:function(){},__class__:$};var Ib=function(a,b){this.$_K=0;var c=this;this.$zK=b;this.$2F=a;this.$2E=new ga;this.$QH=new id(b,this);this.$$K=new P;var d=Ab.array(b);if(0==d.length)this.$6K();else{for(var f=new P,h=0;h<d.length;){var e=d[h];++h;var g=e.name,
g=null!=E[g]?f.getReserved(g):f.h[g];if(null==g){var g=[],k=e.name;null!=E[k]?f.setReserved(k,g):f.h[k]=g}g.push(e)}this.$9K=Ab.count(f);for(d=new Ia(f,f.arrayKeys());d.hasNext();)f=[d.next()],this.$1K(f[0],function(a){return function(d){if(null!=d){var f=c.$$K,h=d.name,e=new jd(0,d.bytes);null!=E[h]?f.setReserved(h,e):f.h[h]=e;f=b.getFullURL(d);try{c.$2K(f,d)}catch(g){g instanceof A&&(g=g.val),c.$7K(d,"Unexpected error: "+N.string(g))}}else switch(d=a[0][0],f=c.$$K,h=d.name,e=new jd(0,0),null!=E[h]?
f.setReserved(h,e):f.h[h]=e,d.format[1]){case 7:case 8:case 9:case 10:case 11:f=Ea.$8L();c.$4K(d,f);break;case 16:case 17:f=Oa.$8L();c.$4K(d,f);break;default:c.$7K(d,"Could not find a supported format to load")}}}(f))}};l.$C9=Ib;Ib.__name__=["$C9"];Ib.prototype={$1K:function(a,b){this.$3K(function(c){for(var d=0;d<c.length;){var f=c[d];++d;for(var h=0;h<a.length;){var e=a[h];++h;if(e.format==f){b(e);return}}}b(null)})},$2K:function(a,b){},$3K:function(a){},$4K:function(a,b){if(this.$QH.$DL)b.dispose();
else{var c=a.name,d=this.$$K,c=null!=E[c]?d.getReserved(c):d.h[c];c.$GL=c.$HL;var f;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:f=this.$QH.textures;break;case 7:case 8:case 9:case 10:case 11:f=this.$QH.sounds;break;case 12:case 13:case 14:case 15:f=this.$QH.$BL;break;case 16:case 17:f=this.$QH.$CL;break;case 18:f=this.$QH.files}c=a.name;null!=E[c]?f.setReserved(c,b):f.h[c]=b;this.$9K-=1;0==this.$9K&&this.$6K()}},$5K:function(a,b,c){a=a.name;var d=this.$$K;a=null!=E[a]?d.getReserved(a):
d.h[a];0<c&&(a.$HL=c);c=a.$HL;a.$GL=b<c?b:c;c=b=0;a=this.$$K;for(a=new Ia(a,a.arrayKeys());a.hasNext();){d=a.next();if(0==d.$HL)return;b+=d.$GL;c+=d.$HL}a=0<c?b/c:0;a!=this.$_K&&(this.$_K=a,this.$2E.emitProgress(a),this.$2E.set_total(c),this.$2E.set_progress(b))},$6K:function(){this.$2E.$MT(this.$QH)},$7K:function(a,b){this.$QH.dispose();this.$2E.failure(ra.withFields(b,["url",a.url]))},$8K:function(a){this.$7K(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:Ib};var id=function(a,
b){this.$DL=!1;this.$CL=new P;this.$BL=new P;this.files=new P;this.sounds=new P;this.textures=new P;this.$EL=a};l.$C$=id;id.__name__=["$C$"];id.__interfaces__=[Cb];id.prototype={getTexture:function(a,b){var c=this.textures;return null!=E[a]?c.getReserved(a):c.h[a]},getSound:function(a,b){var c=this.sounds;return null!=E[a]?c.getReserved(a):c.h[a]},getFile:function(a,b){var c=this.files;return null!=E[a]?c.getReserved(a):c.h[a]},getVideo:function(a,b){var c=this.$CL;return null!=E[a]?c.getReserved(a):
c.h[a]},dispose:function(){if(!this.$DL){this.$DL=!0;for(var a=this.textures,a=new Ia(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.textures=null;a=this.sounds;for(a=new Ia(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.sounds=null;a=this.files;for(a=new Ia(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.files=null;a=this.$BL;for(a=new Ia(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.$BL=null;a=this.$CL;for(a=new Ia(a,a.arrayKeys());a.hasNext();)a.next().dispose();this.$CL=
null}},__class__:id};var jd=function(a,b){this.$GL=a;this.$HL=b};l.$C_=jd;jd.__name__=["$C_"];jd.prototype={__class__:jd};var Jb=function(a){this.$wK=!1;this.$NH=a};l.$CAB=Jb;Jb.__name__=["$CAB"];Jb.__interfaces__=[jc];Jb.__super__=$;Jb.prototype=s($.prototype,{toString:function(){return this.$NH},toJson:function(){return JSON.parse(this.toString())},$uK:function(){this.$NH=null},__class__:Jb});var ue=function(){};l["kit.subsystem.KeyboardSystem"]=ue;ue.__name__=["kit","subsystem","KeyboardSystem"];
ue.prototype={__class__:ue};var Ka=function(){this.down=new Y;this.up=new Y;this.backButton=new db;this.$LL=new Ba};l.$CBB=Ka;Ka.__name__=["$CBB"];Ka.__interfaces__=[ue];Ka.prototype={$JL:function(a){if(16777238==a)return null!=this.backButton.$uF?(this.backButton.emit(),!0):!1;this.$LL.exists(a)||(this.$LL.h[a]=!0,Ka.$ML.$$I(Ka.$ML.id+1,ve.$0N(a)),this.down.emit(Ka.$ML));return!0},$KL:function(a){this.$LL.exists(a)&&(this.$LL.remove(a),Ka.$ML.$$I(Ka.$ML.id+1,ve.$0N(a)),this.up.emit(Ka.$ML))},__class__:Ka};
var we=function(){};l["kit.subsystem.MouseSystem"]=we;we.__name__=["kit","subsystem","MouseSystem"];we.prototype={__class__:we,__properties__:{set_cursor:"set_cursor",get_cursor:"get_cursor"}};var za=function(a){this.$KF=a;this.$AJ=bd.Mouse(za.$ML);this.down=new Y;this.move=new Y;this.up=new Y;this.scroll=new Y;this.$kH=this.$jH=0;this.$PL=la.Default;this.$QL=new Ba};l.$CCB=za;za.__name__=["$CCB"];za.__interfaces__=[we];za.prototype={get_cursor:function(){return this.$PL},set_cursor:function(a){return this.$PL=
a},$JL:function(a,b,c){this.$QL.exists(c)||(this.$QL.h[c]=!0,this.$lI(a,b,xe.$HO(c)),this.$KF.$JL(a,b,this.$AJ),this.down.emit(za.$ML))},$NL:function(a,b){this.$lI(a,b,null);this.$KF.$NL(a,b,this.$AJ);this.move.emit(za.$ML)},$KL:function(a,b,c){this.$QL.exists(c)&&(this.$QL.remove(c),this.$lI(a,b,xe.$HO(c)),this.$KF.$KL(a,b,this.$AJ),this.up.emit(za.$ML))},$OL:function(a,b,c){this.$jH=a;this.$kH=b;if(null==this.scroll.$uF)return!1;this.scroll.emit(c);return!0},$lI:function(a,b,c){this.$jH=a;this.$kH=
b;za.$ML.$$I(za.$ML.id+1,a,b,c)},__class__:za,__properties__:{set_cursor:"set_cursor",get_cursor:"get_cursor"}};var ye=function(){};l["kit.subsystem.PointerSystem"]=ye;ye.__name__=["kit","subsystem","PointerSystem"];ye.prototype={__class__:ye};var qa=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new Y;this.move=new Y;this.up=new Y;this.$jH=a;this.$kH=b;this.$RL=c};l.$CDB=qa;qa.__name__=["$CDB"];qa.__interfaces__=[ye];qa.prototype={$JL:function(a,b,c){if(!this.$RL){this.$NL(a,
b,c);this.$RL=!0;var d=[],f=v.hitTest(n.root,a,b);if(null!=f)for(var h=f.owner;;){var e=h.$BF[1];null!=e&&d.push(e);h=h.parent;if(null==h)break}this.$lI(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.$rG(qa.$ML),qa.$ML.$_I)return;this.down.emit(qa.$ML)}},$NL:function(a,b,c){if(a!=this.$jH||b!=this.$kH){var d=[],f=v.hitTest(n.root,a,b);if(null!=f)for(var h=f.owner;;){var e=h.$BF[1];null!=e&&d.push(e);h=h.parent;if(null==h)break}this.$lI(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.$sG(qa.$ML),qa.$ML.$_I)return;
this.move.emit(qa.$ML)}},$KL:function(a,b,c){if(this.$RL){this.$NL(a,b,c);this.$RL=!1;var d=[],f=v.hitTest(n.root,a,b);if(null!=f)for(var h=f.owner;;){var e=h.$BF[1];null!=e&&d.push(e);h=h.parent;if(null==h)break}this.$lI(a,b,f,c);for(a=0;a<d.length;)if(b=d[a],++a,b.$uG(qa.$ML),qa.$ML.$_I)return;this.up.emit(qa.$ML)}},$lI:function(a,b,c,d){this.$jH=a;this.$kH=b;qa.$ML.$$I(qa.$ML.id+1,a,b,c,d)},__class__:qa};var kd=function(){};l.$CEB=kd;kd.__name__=["$CEB"];kd.__interfaces__=[Te];kd.prototype={__class__:kd};
var Pa=function(a,b,c){this.$jH=this.$kH=0;this.$VL=null;this.$TL=this.$UL=0;this.$wK=!1;this.$SL=a;this.$yH=b;this.$zH=c};l.$CFB=Pa;Pa.__name__=["$CFB"];Pa.__interfaces__=[kd];Pa.__super__=$;Pa.prototype=s($.prototype,{subTexture:function(a,b,c,d){c=this.$SL.createTexture(c,d);c.$VL=this;c.$jH=a;c.$kH=b;c.$TL=this.$TL+a;c.$UL=this.$UL+b;return c},clear:function(){this.$SL.clear()},renderFilter:function(a,b,c){this.$SL.renderFilter(a,b,c)},get_graphics:function(){return this.$SL.getGraphics()},$uK:function(){null==
this.$VL&&this.$SL.dispose()},get_width:function(){return this.$yH},get_height:function(){return this.$zH},__class__:Pa,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var ld=function(){};l["kit.subsystem.TouchSystem"]=ld;ld.__name__=["kit","subsystem","TouchSystem"];ld.prototype={__class__:ld,__properties__:{get_supported:"get_supported"}};var cc=function(a,b){null==b&&(b=4);this.$KF=a;this.$XL=b;this.$YL=new Ba;this.$8H=[];this.down=new Y;this.move=new Y;
this.up=new Y};l.$CGB=cc;cc.__name__=["$CGB"];cc.__interfaces__=[ld];cc.prototype={get_supported:function(){return!0},$JL:function(a,b,c){if(!this.$YL.h.hasOwnProperty(a)){var d=new re(a);d.$$I(b,c);this.$YL.h[a]=d;this.$8H.push(d);null==this.$WL&&(this.$WL=d,this.$KF.$JL(b,c,d.$AJ));this.down.emit(d)}},$NL:function(a,b,c){a=this.$YL.h[a];null!=a&&(a.$$I(b,c),this.$WL==a&&this.$KF.$NL(b,c,a.$AJ),this.move.emit(a))},$KL:function(a,b,c){var d=this.$YL.h[a];null!=d&&(d.$$I(b,c),this.$YL.remove(a),z.remove(this.$8H,
d),this.$WL==d&&(this.$WL=null,this.$KF.$KL(b,c,d.$AJ)),this.up.emit(d))},__class__:cc,__properties__:{get_supported:"get_supported"}};var Ye=function(){};l.$CHB=Ye;Ye.__name__=["$CHB"];Ye.$ZL=function(){n.$zF().then(function(a){try{n.$2F.getExternal().call("console.info",["Built with 2DKit, http://2dkit.com"])}catch(b){}Ze.main()})};var fa=function(){};l.$CIB=fa;fa.__name__=["$CIB"];fa.$fL=function(a){var b=Xb.getType(fa).injected[0];return X.field(b,a)};fa.$gL=function(){switch(fa.$fL("orientation")){case "landscape":return Ma.Landscape;
case "portrait":return Ma.Portrait}return null};var md=function(){this.$0L=new Aa;this.$zL=0;this.$xL=this.$yL=null;this.$wL=Infinity;this.$vL=0};l.$CJB=md;md.__name__=["$CJB"];md.__interfaces__=[Ca];md.prototype={$lL:function(a){this.$wL=a;this.$uL(!0);return this},$mL:function(a){this.$xL=a;return this},$nL:function(a){this.$yL=a;return this},$oL:function(a,b,c){null==c&&(c=!0);this.$sL(a);var d=null!=this.$yL?this.$yL(a,b):1;this.$vL+=d;this.$uL(c);b=new ze(a,b);b.$1L=++this.$zL;b.$jL=d;this.$0L.set(a,
b)},$fL:function(a){a=this.$0L.h[a.__id__];if(null==a)return null;a.$1L=++this.$zL;return a.$8I},$pL:function(){var a=this.$rL(!0);return null!=a?a.$YI:null},$rL:function(a){for(var b=null,c=this.$0L.iterator();c.hasNext();){var d=c.next();if(null==b||d.$1L<b.$1L==a)b=d}return b},$sL:function(a,b){null==b&&(b=!0);var c=this.$0L.h[a.__id__];if(null==c)return null;null!=this.$xL&&b&&this.$xL(a,c.$8I);this.$0L.remove(a);this.$vL-=c.$jL;return c.$8I},$tL:function(a){null==a&&(a=!0);var b=this.$0L;this.$0L=
new Aa;this.$vL=0;if(null!=this.$xL&&a)for(a=b.iterator();a.hasNext();)b=a.next(),this.$xL(b.$YI,b.$8I)},dispose:function(){this.$tL()},$uL:function(a){for(;this.$vL>this.$wL;){var b=this.$rL(a);if(null!=b)null!=this.$xL&&this.$xL(b.$YI,b.$8I),this.$0L.remove(b.$YI),this.$vL-=b.$jL;else break}},__class__:md};var ze=function(a,b){this.$jL=1;this.$1L=0;this.$YI=a;this.$8I=b};l.$CKB=ze;ze.__name__=["$CKB"];ze.prototype={__class__:ze};var gb=function(){};l.$CMB=gb;gb.__name__=["$CMB"];gb.$7L=function(a,
b){var c=a.__creator;if(null!=c&&(c=X.field(c,b),null!=c))return c;c=ca.getSuperClass(a);return null!=c?gb.$7L(c,b):null};gb.$eG=function(a,b){switch(a[1]){case 0:return b;case 1:return"0"!=b?"false"!=b:!1;case 2:var c=parseFloat(b);return isNaN(c)?0:c;case 3:return 35==z.cca(b,0)&&(b="0x"+z.substr(b,1,null)),c=N.parseInt(b),null!=c?c:0;case 5:c=a[2];try{return ca.createEnum(c,b)}catch(d){break}case 6:switch(a[2]){case Date:return c=parseFloat(b),new Date(c);case L:return c=parseFloat(b),new L(isNaN(c)?
0:c);case Da:var c=new Da,f=b.split(",");2<=f.length&&(c.x=parseFloat(f[0]),c.y=parseFloat(f[1]));return c;case sa:return c=new sa,f=b.split(","),4<=f.length&&(c.x=parseFloat(f[0]),c.y=parseFloat(f[1]),c.width=parseFloat(f[2]),c.height=parseFloat(f[3])),c}}return null};var sb=function(){};l["kit.sound.Sound"]=sb;sb.__name__=["kit","sound","Sound"];sb.__interfaces__=[Qa];sb.prototype={__class__:sb};var Ea=function(){this.$wK=!1;this.$2J=new nd(this)};l.$CPB=Ea;Ea.__name__=["$CPB"];Ea.__interfaces__=
[sb];Ea.$8L=function(){null==Ea.$9F&&(Ea.$9F=new Ea);return Ea.$9F};Ea.__super__=$;Ea.prototype=s($.prototype,{play:function(a){return this.$2J},loop:function(a){return this.$2J},$uK:function(){},__class__:Ea});var tb=function(){};l["kit.sound.Playback"]=tb;tb.__name__=["kit","sound","Playback"];tb.__interfaces__=[Ca];tb.prototype={__class__:tb};var nd=function(a){this.$9L=a;this.volume=new L(0);this.$$L=new ea(!0)};l.$CQB=nd;nd.__name__=["$CQB"];nd.__interfaces__=[tb];nd.prototype={dispose:function(){},
__class__:nd};var od=function(){};l["kit.subsystem.StorageSystem"]=od;od.__name__=["kit","subsystem","StorageSystem"];od.prototype={__class__:od};var $b=function(){this.$cH=new P};l.$CRB=$b;$b.__name__=["$CRB"];$b.__interfaces__=[od];$b.prototype={get:function(a,b){var c=new ga,d;d=this.$cH;(null!=E[a]?d.existsReserved(a):d.h.hasOwnProperty(a))?(d=this.$cH,d=null!=E[a]?d.getReserved(a):d.h[a]):d=b;return c.$MT(d)},__class__:$b};var dc=function(){this.down=new Y;this.move=new Y;this.up=new Y};l.$CSB=
dc;dc.__name__=["$CSB"];dc.__interfaces__=[ld];dc.prototype={get_supported:function(){return!1},__class__:dc,__properties__:{get_supported:"get_supported"}};var Kb=function(){};l["kit.video.Video"]=Kb;Kb.__name__=["kit","video","Video"];Kb.__interfaces__=[Qa];Kb.prototype={__class__:Kb,__properties__:{get_height:"get_height",get_width:"get_width"}};var Oa=function(){this.$wK=!1;this.$2J=new pd(this)};l.$CTB=Oa;Oa.__name__=["$CTB"];Oa.__interfaces__=[Kb];Oa.$8L=function(){null==Oa.$9F&&(Oa.$9F=new Oa);
return Oa.$9F};Oa.__super__=$;Oa.prototype=s($.prototype,{play:function(a){return this.$2J},get_width:function(){return 1},get_height:function(){return 1},$uK:function(){},__class__:Oa,__properties__:{get_height:"get_height",get_width:"get_width"}});var Lb=function(){};l["kit.video.VideoPlayback"]=Lb;Lb.__name__=["kit","video","VideoPlayback"];Lb.__interfaces__=[Ca];Lb.prototype={__class__:Lb,__properties__:{get_texture:"get_texture",get_video:"get_video"}};var pd=function(a){this.$_L=a;this.volume=
new L(0);this.$$L=new ea(!0);this.$0H=n.$2F.$LF.createTexture(1,1)};l.$CUB=pd;pd.__name__=["$CUB"];pd.__interfaces__=[Lb];pd.prototype={get_video:function(){return this.$_L},get_texture:function(){return this.$0H},dispose:function(){},__class__:pd,__properties__:{get_texture:"get_texture",get_video:"get_video"}};var ub=function(){this.$sE=[]};l.$CWB=ub;ub.__name__=["$CWB"];ub.__interfaces__=[Ca];ub.prototype={$AM:function(a,b,c){a.addEventListener(b,c,!1);this.$sE.push(new Ae(a,b,c))},$BM:function(a,
b,c){var d=this;this.$AM(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this.$sE;a<b.length;){var c=b[a];++a;c.$CM.removeEventListener(c.$9I,c.$DM,!1)}this.$sE=[]},__class__:ub};var Ae=function(a,b,c){this.$CM=a;this.$9I=b;this.$DM=c};l.$CXB=Ae;Ae.__name__=["$CXB"];Ae.prototype={__class__:Ae};var he=function(a,b){this.$FM=this.$GM=0;var c=a+150,d=b+150;this.$HM=n.$2F.$LF.createTexture(c,d);this.$IM=n.$2F.$LF.createTexture(c,d);this.$yH=a;this.$zH=b};l.$CZB=he;he.__name__=["$CZB"];
he.prototype={$JM:function(a,b){if(a>this.$HM.get_width()||b>this.$HM.get_height()){var c=Math.max(this.$HM.get_width(),a+150)|0,d=Math.max(this.$HM.get_height(),b+150)|0;this.$HM.dispose();this.$IM.dispose();this.$HM=n.$2F.$LF.createTexture(c,d);this.$IM=n.$2F.$LF.createTexture(c,d)}else this.$HM.clear(),this.$IM.clear();this.$yH=a;this.$zH=b},$KM:function(a){null!=a.$4I&&(a.outputOnly||a.setUniformSampler2D("uTexture",this.$HM),a.setUniformVec2("uFilterPosition",this.$FM,this.$GM),this.$IM.renderFilter(a,
this.$yH,this.$zH),a=this.$HM,this.$HM=this.$IM,this.$IM=a)},__class__:he};var Mb=function(){};l.$CcB=Mb;Mb.__name__=["$CcB"];Mb.__interfaces__=[uc];Mb.prototype={__class__:Mb};var Be=function(){};l["kit.subsystem.RendererSystem"]=Be;Be.__name__=["kit","subsystem","RendererSystem"];Be.prototype={__class__:Be,__properties__:{get_filterSupported:"get_filterSupported",get_type:"get_type"}};var Nb=function(){};l.$CdB=Nb;Nb.__name__=["$CdB"];Nb.__interfaces__=[Be];Nb.prototype={__class__:Nb};var ve=function(){};
l.$CeB=ve;ve.__name__=["$CeB"];ve.$0N=function(a){switch(a){case 8:return e.Backspace;case 9:return e.Tab;case 13:return e.Enter;case 15:return e.Command;case 16:return e.Shift;case 17:return e.Control;case 18:return e.Alt;case 20:return e.CapsLock;case 27:return e.Escape;case 32:return e.Space;case 33:return e.PageUp;case 34:return e.PageDown;case 35:return e.End;case 36:return e.Home;case 37:return e.Left;case 38:return e.Up;case 39:return e.Right;case 40:return e.Down;case 45:return e.Insert;case 46:return e.Delete;
case 48:return e.Number0;case 49:return e.Number1;case 50:return e.Number2;case 51:return e.Number3;case 52:return e.Number4;case 53:return e.Number5;case 54:return e.Number6;case 55:return e.Number7;case 56:return e.Number8;case 57:return e.Number9;case 65:return e.A;case 66:return e.B;case 67:return e.C;case 68:return e.D;case 69:return e.E;case 70:return e.F;case 71:return e.G;case 72:return e.H;case 73:return e.I;case 74:return e.J;case 75:return e.K;case 76:return e.L;case 77:return e.M;case 78:return e.N;
case 79:return e.O;case 80:return e.P;case 81:return e.Q;case 82:return e.R;case 83:return e.S;case 84:return e.T;case 85:return e.U;case 86:return e.V;case 87:return e.W;case 88:return e.X;case 89:return e.Y;case 90:return e.Z;case 96:return e.Numpad0;case 97:return e.Numpad1;case 98:return e.Numpad2;case 99:return e.Numpad3;case 100:return e.Numpad4;case 101:return e.Numpad5;case 102:return e.Numpad6;case 103:return e.Numpad7;case 104:return e.Numpad8;case 105:return e.Numpad9;case 106:return e.NumpadMultiply;
case 107:return e.NumpadAdd;case 108:return e.NumpadEnter;case 109:return e.NumpadSubtract;case 110:return e.NumpadDecimal;case 111:return e.NumpadDivide;case 112:return e.F1;case 113:return e.F2;case 114:return e.F3;case 115:return e.F4;case 116:return e.F5;case 117:return e.F6;case 118:return e.F7;case 119:return e.F8;case 120:return e.F9;case 121:return e.F10;case 122:return e.F11;case 123:return e.F12;case 186:return e.Semicolon;case 187:return e.Equals;case 188:return e.Comma;case 189:return e.Minus;
case 190:return e.Period;case 191:return e.Slash;case 192:return e.Backquote;case 219:return e.LeftBracket;case 220:return e.Backslash;case 221:return e.RightBracket;case 222:return e.Quote;case 16777234:return e.Menu;case 16777247:return e.Search}return e.Unknown(a)};var cb=function(){this.$8N=0;this.$6N=null;this.$2N=new m;this.$7N=[]};l.$CfB=cb;cb.__name__=["$CfB"];cb.$9N=function(a,b){if(a.active){var c=a.$BF[9];if(null!=c&&(c.$6F=b,b*=c.scale.$hF,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=
c;){var d=c.next;0==(c.$nE&1)&&(c.$nE|=1,c.$mE(),c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,cb.$9N(c,b),c=d}};cb.prototype={$$I:function(){if(1==fa.$fL("scaleMode")){var a=new v;n.root.add(a);var b=fa.$fL("width"),c=fa.$fL("height"),d=fa.$fL("maxWidth"),f=fa.$fL("maxHeight"),h=function(){var h=Math.min(n.$2F.$MF.get_width()/b,n.$2F.$MF.get_height()/c),e=n.$2F.$MF.get_width()/2-h*b/2,g=n.$2F.$MF.get_height()/2;a.setXY(e,g-h*c/2);a.setScale(h);d*h<n.$2F.$MF.get_width()||f*h<
n.$2F.$MF.get_height()?(null==a.get_scissor()&&a.set_scissor(new sa),a.get_scissor().set(b/2-d/2,c/2-f/2,d,f)):a.set_scissor(null)};h();n.$2F.$MF.resize.connect(h)}},$FF:function(a){if(!(0>=a)){0.5<a?3>=this.$8N&&(++this.$8N,a=0.016666666666666666):this.$8N=0;if(null!=this.$6N){var b=this.$6N;this.$6N=null;for(var c=0;c<b.length;){var d=b[c];++c;d()}}for(b=0;b<this.$7N.length;)c=this.$7N[b],null==c||c.update(a)?this.$7N.splice(b,1):++b;n.volume.update(a);cb.$9N(n.root,a);cb.$9N(this.$2N,a)}},$iH:function(a){var b=
a.graphics;null!=b&&(a.willRender(),v.$6G(n.root,b,!0),v.$6G(this.$2N,b,!0),a.didRender())},$3N:function(a){this.$7N.push(a)},$5N:function(a){null==this.$6N?this.$6N=[a]:this.$6N.push(a)},__class__:cb};var aa=function(){};l.$CgB=aa;aa.__name__=["$CgB"];aa.$_N=function(a,b,c,d,f,h,e){if(3>e)return!1;for(var g=0,k=2*Math.PI/e,l=0;l<e;){var m=l++,n=Math.cos(g),p=Math.sin(g),g=g+k;a.push(f*n+c);a.push(h*p+d);m<e-1&&(b.push(0),b.push(m),b.push(m+1))}return!0};aa.$AO=function(a,b,c,d,f,h,e,g){if(3>g)return!1;
a.push(c);a.push(d);e/=g;var k=0;for(g+=1;k<g;){var l=k++,m=Math.cos(h),n=Math.sin(h);h+=e;a.push(f*m+c);a.push(f*n+d);b.push(0);b.push(l);b.push(l+1)}return!0};aa.$BO=function(a,b,c,d,f,h,e,g,k){e/=k;var l=[],m=0;for(k+=1;m<k;){m++;var n=Math.cos(h),p=Math.sin(h);h+=e;l.push(f*n+c);l.push(f*p+d)}return aa.$DO(a,b,l,g)};aa.$CO=function(a,b,c,d,f,h,e,g){for(var k=0,l=2*Math.PI/g,m=[],n=0;n<g;){n++;var p=Math.cos(k),q=Math.sin(k),k=k+l;m.push(f*p+c);m.push(h*q+d)}m.push(f+c);m.push(d);return aa.$DO(a,
b,m,e)};aa.$DO=function(a,b,c,d){var f=c.length;if(4>f)return!1;d/=2;var h=c[0],e=c[1],g=c[f-2],k=c[f-1],l=new Da(-(c[3]-e),c[2]-h);l.normalize();var m=l.x,l=l.y;a.push(h-d*m);a.push(e-d*l);a.push(h+d*m);a.push(e+d*l);h=f/2|0;for(e=2;e<f-2;){var n=c[e++],p=c[e++],q=c[e],t=c[e+1],s=new Da(-(t-p),q-n);s.normalize();var r=new Da(s.x,s.y);r.add(m,l);r.normalize();var u=s.dot(r.x,r.y);r.multiply(d/u);if(0.15>u){var u=c[e-4],v=c[e-3];0>(n-u)*(t-v)-(p-v)*(q-u)?(a.push(n-r.x),a.push(p-r.y),a.push(n+m*d),
a.push(p+l*d),a.push(n-r.x),a.push(p-r.y),a.push(n+s.x*d),a.push(p+s.y*d)):(a.push(n-m*d),a.push(p-l*d),a.push(n+r.x),a.push(p+r.y),a.push(n-s.x*d),a.push(p-s.y*d),a.push(n+r.x),a.push(p+r.y));++h}else a.push(n-r.x),a.push(p-r.y),a.push(n+r.x),a.push(p+r.y);m=s.x;l=s.y}a.push(g-d*m);a.push(k-d*l);a.push(g+d*m);a.push(k+d*l);a=0;for(c=h-1;a<c;)f=2*a++,b.push(f),b.push(f+1),b.push(f+2),b.push(f+2),b.push(f+3),b.push(f+1);return!0};aa.$EO=function(a){if(6>a.length)return null;null==aa.$FO&&(aa.$FO=new Ce);
return aa.$FO.triangulate(a)};var xe=function(){};l.$ChB=xe;xe.__name__=["$ChB"];xe.$HO=function(a){switch(a){case 0:return ta.Left;case 1:return ta.Middle;case 2:return ta.Right}return ta.Unknown(a)};var ec=function(){this.$NH=null;r.call(this)};l.$CiB=ec;ec.__name__=["$CiB"];ec.__super__=r;ec.prototype=s(r.prototype,{get_entitySlot:function(){return 10},onStart:function(){var a=this,b=fa.$gL();null!=b&&n.$2F.$MF.orientation.watch(function(c,d){null==c||c==b?a.$KO():a.$JO(c!=d)})},$JO:function(a){var b=
this;if(null==this.$NH){this.owner.addChild(this.$NH=new m);var c=this.$NH,d=wa.fromAssets("_2DKitOrientation");n.$2F.loadAssetPack(d).then(function(d){b.registerDisposable(d);var h=new S(0,0,0);a&&h.alpha.animate(0,1,0.3);c.add(h);var e=(new G(d.getTexture("RotateDevice"))).centerAnchor();d=(new m).add(e);c.addChild(d);d=function(){var a=n.$2F.$MF.get_width(),b=n.$2F.$MF.get_height();h.setSize(a,b);a=n.$2F.$MF.get_width()/2;b=n.$2F.$MF.get_height()/2;e.setXY(a,b)};d();b.connect0(n.$2F.$MF.resize,
d)})}},$KO:function(){null!=this.$NH&&(this.$NH.dispose(),this.$NH=null)},__class__:ec});var qd=function(){};l.$CjB=qd;qd.__name__=["$CjB"];qd.$QO=function(a){return va.run(qd.$RO(a,!0))};qd.$RO=function(a,b){for(var c="",d=new De(a.length),f=0,h=a.length;f<h;){var e=f++,g=d.nextInt()%30;b&&(g=-g);e=a.charCodeAt(e)+g;c+=String.fromCharCode(e)}return c};var rd=function(){};l.$CmB=rd;rd.__name__=["$CmB"];rd.prototype={__class__:rd};var Ob=function(){};l.$CnB=Ob;Ob.__name__=["$CnB"];Ob.prototype={__class__:Ob};
var W=function(a,b){this.$gO=new sd;this.$fO=!1;this.$eO=a.getContext("2d",{alpha:b})};l.$CoB=W;W.__name__=["$CoB"];W.__interfaces__=[Mb];W.prototype={save:function(){var a=this.$gO,b=this.$gO.next;null==b&&(b=new sd,b.$kO=a,a.next=b);b.$PK=a.$PK;b.$RK=a.$RK;b.$TK=a.$TK;b.$iO=a.$iO;b.$jO=a.$jO;this.$gO=b;this.$eO.save()},translate:function(a,b){this.$eO.translate(a|0,b|0)},scale:function(a,b){this.$eO.scale(a,b)},rotate:function(a){this.$eO.rotate(3.141592653589793*a/180)},transform:function(a,b,
c,d,f,h){this.$eO.transform(a,b,c,d,f,h)},restore:function(){this.$gO=this.$gO.$kO;this.$eO.restore()},$SO:function(a,b,c,d,f){var h=this.$gO,h=(255*h.$PK&255)<<16|(255*h.$RK&255)<<8|255*h.$TK&255;null==W.$hO&&(W.$hO=B.$9P(d,f));W.$hO.width=d;W.$hO.height=f;var e=W.$hO.getContext("2d",null);e.globalCompositeOperation="copy";e.fillStyle=B.$DQ(h);e.fillRect(0,0,d,f);e.globalCompositeOperation="multiply";e.drawImage(a,b,c,d,f,0,0,d,f);e.globalCompositeOperation="destination-atop";e.drawImage(a,b,c,d,
f,0,0,d,f);return W.$hO},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,f,h,e){if(this.$fO)this.$fO=!1,this.$eO.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,f,h,e),this.$eO.globalCompositeOperation="source-over";else{var g=a.$SL;d=a.$TL+d|0;a=a.$UL+f|0;h|=0;e|=0;b|=0;c|=0;f=g.$UG;this.$gO.$iO?(g=this.$SO(g.$uO,d,a,h,e),this.$eO.drawImage(g,b*f,c*f,h*f,e*f)):this.$eO.drawImage(g.$uO,d*f,a*f,h*f,e*f,b,c,h,e)}},
drawPattern:function(a,b,c,d,f){if(this.$fO)this.$fO=!1,this.$eO.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,f),this.$eO.globalCompositeOperation="source-over";else{var h=this.$gO,e=a.$SL.$UG;1!=e&&(this.$eO.save(),this.$eO.scale(1/e,1/e));b|=0;c|=0;d|=0;f|=0;h.$jO?this.$eO.rect(b,c,d,f):(this.$eO.fillStyle=this.$aO(a),this.$eO.fillRect(b,c,d*e,f*e));1!=e&&this.$eO.restore()}},fillRect:function(a,b,c,d,f){this.$fO?(this.$fO=!1,this.$eO.globalCompositeOperation="copy",this.fillRect(a,
b,c,d,f),this.$eO.globalCompositeOperation="source-over"):(b|=0,c|=0,d|=0,f|=0,this.$gO.$jO?this.$eO.rect(b,c,d,f):(this.$eO.fillStyle=this.$ZO(a),this.$eO.fillRect(b,c,d,f)))},fillTriangles:function(a,b,c){this.$fO=!1;this.$TO(b,c);this.$bO(a)},drawTriangles:function(a,b,c,d){this.$fO=!1;this.$TO(b,c);this.$cO(a)},$TO:function(a,b){this.$eO.beginPath();for(var c=0,d=b.length;c<d;){var f=2*b[c],h=2*b[c+1],e=2*b[c+2],c=c+3;this.$eO.moveTo(a[f],a[f+1]);this.$eO.lineTo(a[h],a[h+1]);this.$eO.lineTo(a[e],
a[e+1])}this.$eO.closePath()},fillPolygon:function(a,b){this.$fO=!1;this.$UO(b);this.$bO(a)},drawPolygon:function(a,b){this.$fO=!1;this.$UO(b);this.$cO(a)},$UO:function(a){this.$eO.beginPath();for(var b=0,c=a.length;b<c;){var d=a[b++],f=a[b++];this.$eO.lineTo(d,f)}this.$eO.closePath()},drawCircle:function(a,b,c,d,f){this.$fO=!1;this.$VO(b,c,d);this.$cO(a)},fillCircle:function(a,b,c,d,f){this.$fO=!1;this.$VO(b,c,d);this.$bO(a)},strokeCircle:function(a,b,c,d,f,h){this.$fO=!1;this.$VO(b,c,d);this.$dO(a,
f)},$VO:function(a,b,c){this.$eO.beginPath();this.$eO.arc(a,b,c,0,6.283185307179586);this.$eO.closePath()},drawEllipse:function(a,b,c,d,f,h){this.$fO=!1;this.$WO(b,c,d,f);this.$cO(a)},fillEllipse:function(a,b,c,d,f,h){this.$fO=!1;this.$WO(b,c,d,f);this.$bO(a)},strokeEllipse:function(a,b,c,d,f,h,e){this.$fO=!1;this.$WO(b,c,d,f);this.$dO(a,h)},$WO:function(a,b,c,d){var f=0.5522848*c,h=0.5522848*d,e=a-c,g=b-d;c=a+c;d=b+d;this.$eO.beginPath();this.$eO.moveTo(e,b);this.$eO.bezierCurveTo(e,b-h,a-f,g,a,
g);this.$eO.bezierCurveTo(a+f,g,c,b-h,c,b);this.$eO.bezierCurveTo(c,b+h,a+f,d,a,d);this.$eO.bezierCurveTo(a-f,d,e,b+h,e,b);this.$eO.closePath()},fillArc:function(a,b,c,d,f,h,e){this.$fO=!1;h=f+h;this.$eO.beginPath();this.$eO.moveTo(b,c);this.$eO.arc(0,0,d,3.141592653589793*f/180,3.141592653589793*h/180);this.$bO(a)},strokeArc:function(a,b,c,d,f,h,e,g){this.$fO=!1;c=f+h;this.$eO.beginPath();this.$eO.arc(b,b,d,3.141592653589793*f/180,3.141592653589793*c/180);this.$dO(a,e)},strokeLines:function(a,b,
c){this.$fO=!1;this.$XO(b);this.$eO.lineWidth=c;this.$eO.strokeStyle=this.$ZO(a);this.$eO.stroke()},drawLines:function(a,b,c){this.$fO=!1;this.$XO(b);this.$eO.lineWidth=c;this.$eO.strokeStyle=this.$aO(a);this.$eO.stroke()},$XO:function(a){this.$eO.beginPath();if(2<=a.length){this.$eO.moveTo(a[0],a[1]);for(var b=2,c=a.length;b<c;){var d=a[b++],f=a[b++];this.$eO.lineTo(d,f)}}},multiplyAlpha:function(a){this.$eO.globalAlpha*=a},setAlpha:function(a){this.$eO.globalAlpha=a},tint:function(a,b,c){var d=
this.$gO;d.$PK*=a;d.$RK*=b;d.$TK*=c;d.$iO=!0},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this.$eO.globalCompositeOperation=b},beginMask:function(){var a=this.$gO;a.$jO&&this.endMask();a.$jO=!0;this.$eO.beginPath()},endMask:function(){var a=this.$gO;a.$jO&&(a.$jO=!1,this.$eO.clip())},applyScissor:function(a,b,c,d){this.$eO.beginPath();this.$eO.rect(a|
0,b|0,c|0,d|0);this.$eO.clip()},willRender:function(){this.$fO=!0},didRender:function(){},onResize:function(a,b){},$ZO:function(a){var b=this.$gO;b.$iO&&(a=(b.$PK*(a&16711680)/16711680*255&255)<<16|(b.$RK*(a&65280)/65280*255&255)<<8|b.$TK*(a&255)/255*255&255);return B.$DQ(a)},$aO:function(a){return this.$gO.$iO?(a=this.$SO(a.$SL.$uO,a.$TL,a.$UL,a.$yH,a.$zH),this.$eO.createPattern(a,"repeat")):a.$nO()},$bO:function(a){this.$gO.$jO||(this.$eO.fillStyle=this.$ZO(a),this.$eO.fill())},$cO:function(a){this.$gO.$jO||
(this.$eO.fillStyle=this.$aO(a),this.$eO.fill())},$dO:function(a,b){this.$gO.$jO||(this.$eO.strokeStyle=this.$ZO(a),this.$eO.lineWidth=b,this.$eO.stroke())},__class__:W};var sd=function(){this.$kO=this.next=null;this.$iO=this.$jO=!1;this.$PK=this.$RK=this.$TK=1};l.$CpB=sd;sd.__name__=["$CpB"];sd.prototype={__class__:sd};var hc=function(a){this.graphics=new W(a,!1);this.$mO=new ea(!0)};l.$CqB=hc;hc.__name__=["$CqB"];hc.__interfaces__=[Nb];hc.prototype={get_type:function(){return Fa.Canvas},get_filterSupported:function(){return!1},
createTextureFromImage:function(a,b,c){null==c&&(c=1);a=new Pb(a,c);return a.createTexture(a.$qO/c,a.$rO/c)},createTexture:function(a,b,c,d){null==d&&(d=1);a=B.$9P(a,b);return this.createTextureFromImage(a,null,d)},getTextureAssetFormats:function(){return[]},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:hc,__properties__:{get_filterSupported:"get_filterSupported",get_type:"get_type"}};var td=function(a,b,c){this.$pO=0;this.$oO=null;Pa.call(this,
a,b,c)};l.$CrB=td;td.__name__=["$CrB"];td.__super__=Pa;td.prototype=s(Pa.prototype,{$nO:function(){if(this.$pO!=this.$SL.$vO||null==this.$oO)this.$pO=this.$SL.$vO,this.$oO=this.$SL.$xO(this.$TL,this.$UL,this.$yH,this.$zH);return this.$oO},__class__:td});var Pb=function(a,b){this.$zO=null;this.$vO=0;this.$wK=!1;this.$uO=a;this.$qO=a.width;this.$rO=a.height;this.$UG=b;this.$sO=this.$qO/b;this.$tO=this.$rO/b};l.$CsB=Pb;Pb.__name__=["$CsB"];Pb.__interfaces__=[rd];Pb.__super__=$;Pb.prototype=s($.prototype,
{createTexture:function(a,b){return new td(this,Math.ceil(a),Math.ceil(b))},getGraphics:function(){null==this.$zO&&(this.$yO(),this.$zO=new ud(this));return this.$zO},clear:function(){var a=this.$yO();a.save();a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.$uO.width,this.$uO.height);a.restore()},renderFilter:function(a,b,c){},$xO:function(a,b,c,d){var f=this.$yO(),h=this.$uO;if(0!=a||0!=b||c!=this.$sO||d!=this.$tO)h=B.$9P(c,d),c=h.getContext("2d",null),c.globalCompositeOperation="copy",c.drawImage(this.$uO,
-a,-b);return f.createPattern(h,"repeat")},$yO:function(){U.__instanceof(this.$uO,HTMLCanvasElement)||(this.$uO=B.$$P(this.$uO));return this.$uO.getContext("2d",null)},$uK:function(){B.$IQ(this.$uO.src);this.$zO=this.$uO=null},__class__:Pb});var ud=function(a){W.call(this,a.$uO,!0);this.$0O=a};l.$CtB=ud;ud.__name__=["$CtB"];ud.__super__=W;ud.prototype=s(W.prototype,{drawTexture:function(a,b,c){W.prototype.drawTexture.call(this,a,b,c);++this.$0O.$vO},drawSubTexture:function(a,b,c,d,f,h,e){W.prototype.drawSubTexture.call(this,
a,b,c,d,f,h,e);++this.$0O.$vO},drawPattern:function(a,b,c,d,f){W.prototype.drawPattern.call(this,a,b,c,d,f);++this.$0O.$vO},fillRect:function(a,b,c,d,f){W.prototype.fillRect.call(this,a,b,c,d,f);++this.$0O.$vO},fillTriangles:function(a,b,c){W.prototype.fillTriangles.call(this,a,b,c);++this.$0O.$vO},drawTriangles:function(a,b,c,d){W.prototype.drawTriangles.call(this,a,b,c);++this.$0O.$vO},drawCircle:function(a,b,c,d,f){null==f&&(f=50);W.prototype.drawCircle.call(this,a,b,c,d,f);++this.$0O.$vO},fillCircle:function(a,
b,c,d,f){null==f&&(f=50);W.prototype.fillCircle.call(this,a,b,c,d,f);++this.$0O.$vO},drawEllipse:function(a,b,c,d,f,h){null==h&&(h=50);W.prototype.drawEllipse.call(this,a,b,c,d,f,h);++this.$0O.$vO},fillEllipse:function(a,b,c,d,f,h){null==h&&(h=50);W.prototype.fillEllipse.call(this,a,b,c,d,f,h);++this.$0O.$vO},strokeLines:function(a,b,c){W.prototype.strokeLines.call(this,a,b,c);++this.$0O.$vO},drawLines:function(a,b,c){W.prototype.drawLines.call(this,a,b,c);++this.$0O.$vO},__class__:ud});var T=function(a,
b){Ib.call(this,a,b)};l.$CvB=T;T.__name__=["$CvB"];T.$6O=function(a){var b=[q.PNG,q.JPG,q.GIF],c=1,d=window.document.createElement("img");d.onload=d.onerror=function(f){1==d.width&&b.unshift(q.WEBP);c-=1;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA=="};T.$7O=function(){var a=window.document.createElement("audio");if(null==a||null==I(a,a.canPlayType))return[];var b=new $a("\\b(iPhone|iPod|iPad|Android)\\b",""),c=window.navigator.userAgent;if(!J.get_supported()&&
b.match(c))return[];b=[];b.push({format:q.MP3,mimeType:"audio/mpeg"});b.push({format:q.MP4,mimeType:"video/mp4"});for(var c=[{format:q.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:q.WAV,mimeType:"audio/wav"},{format:q.WEBM,mimeType:"video/webm"}],b=0<=window.navigator.userAgent.indexOf("2DKSim")?c:b.concat(c),c=[],d=0;d<b.length;){var f=b[d];++d;var h="";try{h=a.canPlayType(f.mimeType)}catch(e){}""!=h&&c.push(f.format)}return c};T.$8O=function(a){var b=++T.$EP;null==T.$DP&&(T.$DP=new Ba);T.$DP.h[b]=
a;return b};T.$9O=function(a){T.$DP.remove(a)};T.__super__=Ib;T.prototype=s(Ib.prototype,{$2K:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:var d=window.document.createElement("img"),f=new ub;f.$BM(d,"load",function(a){a=c.$2F.getRenderer().createTextureFromImage(d,null,1);null!=a?c.$4K(b,a):c.$8K(b)});f.$BM(d,"error",function(a){B.$IQ(d.src);c.$7K(b,"Failed to load image")});f="data:"==z.substr(a,0,5);!f&&B.$JQ()?this.$4O(a,b,"blob",function(a){d.src=B.$HQ(a)}):(f||(d.crossOrigin=
""),d.src=a);break;case 7:case 8:case 9:case 10:case 11:if(J.get_supported())this.$4O(a,b,"arraybuffer",function(a){J.$dQ.decodeAudioData(a,function(a){c.$4K(b,new J(a))},function(){var a=Ea.$8L();c.$4K(b,a)})});else{var h=window.document.createElement("audio");h.preload="auto";var e=T.$8O(h),f=new ub;f.$BM(h,"canplaythrough",function(a){T.$9O(e);c.$4K(b,new Qb(h))});f.$BM(h,"error",function(a){T.$9O(e);a=h.error.code;3==a||4==a?(a=Ea.$8L(),c.$4K(b,a)):c.$7K(b,"Failed to load audio: "+h.error.code)});
f.$AM(h,"progress",function(a){0<h.buffered.length&&0<h.duration&&(a=h.buffered.end(0)/h.duration,c.$5K(b,a*b.bytes|0,b.bytes))});h.src=a;h.load()}break;case 12:case 13:case 14:(function(a){var d="_kit_font_"+T.$FP;++T.$FP;if("undefined"!=typeof FontFace)(new FontFace(d,"url("+a+")",{})).load().then(function(f){window.document.fonts.add(f);c.$4K(b,new vb(d,f,null,a))},function(d){B.$IQ(a);c.$7K(b,d.message)});else{var f=window.document.createElement("style");f.innerHTML="@font-face{font-family:"+
d+";src:url("+a+");}";window.document.head.appendChild(f);var h=window.document.createElement("canvas").getContext("2d",null);h.font="300px sans";var e=h.measureText("BESbswy").width;h.font='300px "'+d+'"';var g=Date.now()/1E3,k=null,k=function(){var l=Date.now()/1E3-g,m=h.measureText("BESbswy").width;5<=l||e!=m?c.$4K(b,new vb(d,null,f,a)):n.$2F.$EF.$5N(k)};n.$2F.$EF.$5N(k)}})(a);break;case 16:case 17:var g=window.document.createElement("video");g.preload="metadata";var k=T.$8O(g),f=new ub;f.$BM(g,
"loadedmetadata",function(a){T.$9O(k);c.$4K(b,new Rb(g))});f.$BM(g,"error",function(a){T.$9O(k);c.$7K(b,"Failed to load video: "+g.error.code)});g.src=a;g.load();break;case 18:this.$4O(a,b,"text",function(a){c.$4K(b,new Jb(a))})}},$3K:function(a){var b=this;null==T.$CP&&(T.$CP=new ga,T.$6O(function(a){var d=window.navigator.isCocoonJS?[q.TTF,q.WOFF]:[q.WOFF,q.OTF,q.TTF];a=b.$2F.getRenderer().getTextureAssetFormats().concat(a).concat(T.$7O()).concat(d).concat([q.Data]);T.$CP.$MT(a)}));T.$CP.then(a)},
$4O:function(a,b,c,d){this.$5O(a,b,c,d)},$5O:function(a,b,c,d){var f=this,h=null,e=null,g=0,k=!1,l=function(){k&&(k=!1,window.clearInterval(g))},m=3,n=function(){m-=1;return 0<=m?(e(),!0):!1},e=function(){l();null!=h&&h.abort();h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType=c;var e=0;h.onprogress=function(a){k||(k=!0,g=window.setInterval(function(){4!=h.readyState&&5E3<Date.now()-e&&!n()&&(l(),f.$7K(b,"Download stalled"))},1E3));e=Date.now();f.$5K(b,a.loaded,a.total)};h.onerror=function(a){0==
h.status&&n()||(l(),f.$7K(b,"HTTP error "+h.status))};h.onload=function(a){a=h.response;null==a&&(a=h.responseText);l();d(a)};h.send()};e()},__class__:T});var Ee=function(){};l["kit.subsystem.ExternalSystem"]=Ee;Ee.__name__=["kit","subsystem","ExternalSystem"];Ee.prototype={__class__:Ee};var fc=function(){};l.$CyB=fc;fc.__name__=["$CyB"];fc.__interfaces__=[Ee];fc.prototype={call:function(a,b){null==b&&(b=[]);for(var c=window,d=c,f=0,h=a.split(".");f<h.length;){var e=h[f];++f;c=d;d=X.field(c,e)}return d.apply(c,
b)},__class__:fc};var bc=function(a,b){za.call(this,a);this.$ZF=b};l.$C2B=bc;bc.__name__=["$C2B"];bc.__super__=za;bc.prototype=s(za.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this.$ZF.style.cursor=b;return za.prototype.set_cursor.call(this,a)},__class__:bc});var Qb=function(a){this.$wK=!1;this.$gP=a};l.$C3B=Qb;Qb.__name__=["$C3B"];Qb.__interfaces__=[sb];Qb.__super__=$;Qb.prototype=s($.prototype,{play:function(a){null==a&&(a=1);return new Sb(this,
a,!1)},loop:function(a){null==a&&(a=1);return new Sb(this,a,!0)},$uK:function(){this.$gP=null},__class__:Qb});var Sb=function(a,b,c){this.$nP=!1;var d=this;this.$9L=a;this.$VP=!1;this.$jP=window.document.createElement("audio");this.$jP.loop=c;this.$jP.src=a.$gP.src;this.volume=new L(b,function(a,b){d.$iP()});this.$iP();this.$$L=new ea(!1);this.$hP();n.hidden.$hF&&this.set_paused(!0)};l.$C4B=Sb;Sb.__name__=["$C4B"];Sb.__interfaces__=[Ob,tb];Sb.prototype={set_paused:function(a){a!=this.$nP&&((this.$nP=
a)?this.$jP.pause():this.$hP());return a},update:function(a){this.volume.update(a);this.$$L.set__(this.$jP.ended);return this.$$L.$hF||this.$nP?(this.$VP=!1,this.$kP.dispose(),this.$lP.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this.$$L.set__(!0)},$hP:function(){var a=this;this.$jP.play();this.$VP||(Ja.$fF.$EF.$3N(this),this.$VP=!0,this.$kP=n.volume.get_changed().connect(function(b,c){a.$iP()}),this.$lP=n.hidden.get_changed().connect(function(b,c){b?(a.$mP=a.$nP,a.set_paused(!0)):a.set_paused(a.$mP)}))},
$iP:function(){this.$jP.volume=Ra.clamp(n.volume.$hF*this.volume.$hF,0,1)},__class__:Sb,__properties__:{set_paused:"set_paused"}};var Fe=function(){};l["kit.subsystem.StageSystem"]=Fe;Fe.__name__=["kit","subsystem","StageSystem"];Fe.prototype={__class__:Fe,__properties__:{get_scaleFactor:"get_scaleFactor",get_height:"get_height",get_width:"get_width"}};var ac=function(a){this.orientation=new ea(null);var b=this;this.$ZF=a;this.resize=new db;window.addEventListener("resize",I(this,this.$oP),!1);this.$oP(null);
this.fullscreen=new ea(!1);B.$5P(window.document,"fullscreenchange",function(a){b.$rP()},!1);this.$rP()};l.$C5B=ac;ac.__name__=["$C5B"];ac.__interfaces__=[Fe];ac.prototype={get_width:function(){return this.$ZF.width},get_height:function(){return this.$ZF.height},get_scaleFactor:function(){return B.$EQ()},get_fullscreenSupported:function(){return!0==B.$2P(["fullscreenEnabled","fullScreenEnabled"],window.document).value},lockOrientation:function(a){var b=B.$1P("lockOrientation",window.screen).value;
if(null!=b){var c;switch(a[1]){case 0:c="portrait";break;case 1:c="landscape"}b.apply(window.screen,[c])}},requestFullscreen:function(a){null==a&&(a=!0);var b=B.$2P(["fullscreenElement","fullScreenElement"],window.document).value;if(a){a=window.document.documentElement;var c=B.$2P(["requestFullscreen","requestFullScreen"],a).value;null==b&&null!=c&&c.apply(a,[{navigationUI:"hide"}])}else a=B.$2P(["exitFullscreen","cancelFullscreen","cancelFullScreen"],window.document).value,null!=b&&null!=a&&a.apply(window.document,
[])},$oP:function(a){var b=this.$ZF.parentElement.getBoundingClientRect();!B.$wP||90!=window.orientation&&-90!=window.orientation?this.$pP(b.width,b.height):(a=Math.min(window.innerWidth,b.width),b=Math.min(window.innerHeight,b.height),this.$pP(a,b)&&window.scrollTo(window.scrollX,window.scrollY));this.$qP()},$pP:function(a,b){var c=B.$EQ(),d=c*a,c=c*b;if(this.$ZF.width==d&&this.$ZF.height==c)return!1;this.$ZF.width=d|0;this.$ZF.height=c|0;this.$ZF.style.width=a+"px";this.$ZF.style.height=b+"px";
this.resize.emit();return!0},$qP:function(){null==window.orientation?this.orientation.set__(null):this.orientation.set__(window.innerWidth>window.innerHeight?Ma.Landscape:Ma.Portrait)},$rP:function(){var a=B.$2P(["fullscreen","fullScreen","isFullScreen"],window.document).value;this.fullscreen.set__(!0==a)},__class__:ac,__properties__:{get_fullscreenSupported:"get_fullscreenSupported",get_scaleFactor:"get_scaleFactor",get_height:"get_height",get_width:"get_width"}};var Zb=function(a,b){this.$sP=a;
this.$tP=b+":"};l.$C6B=Zb;Zb.__name__=["$C6B"];Zb.__interfaces__=[od];Zb.prototype={get:function(a,b){var c=null;try{c=this.$sP.getItem(this.$tP+a)}catch(d){d instanceof A&&(d=d.val)}var f=b;if(null!=c)try{f=qd.$QO(c)}catch(h){}return(new ga).$MT(f)},__class__:Zb};var B=function(){};l.$C9B=B;B.__name__=["$C9B"];B.$0P=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};B.$1P=function(a,b){null==b&&(b=window);var c=X.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+
z.substr(a,1,null),d=0,f=B.$vP;d<f.length;){var h=f[d];++d;var e=h+c,g=X.field(b,e);if(null!=g)return{prefix:h,field:e,value:g}}return{prefix:null,field:null,value:null}};B.$2P=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=B.$1P(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};B.$3P=function(a,b){null==b&&(b=window);var c=B.$1P(a,b).value;if(null==c)return!1;b[a]=c;return!0};B.$4P=function(a,b,c){a=a.style;for(var d=0,f=B.$vP;d<f.length;){var h=f[d];++d;a.setProperty("-"+
h+"-"+b,c)}a.setProperty(b,c)};B.$5P=function(a,b,c,d){for(var f=0,h=B.$vP;f<h.length;){var e=h[f];++f;a.addEventListener(e+b,c,d)}a.addEventListener(b,c,d)};B.$9P=function(a,b){var c=window.document.createElement("canvas");c.width=a;c.height=b;return c};B.$$P=function(a){var b=B.$9P(a.width,a.height),c=b.getContext("2d",null);c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};B.$CQ=function(a,b,c){var d=a.getContext("2d",null);d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,
0,c-1,b,1,0,c,b,1)};B.$DQ=function(a){for(a=(16777215&a).toString(16);6>a.length;)a="0"+N.string(a);return"#"+N.string(a)};B.$EQ=function(){var a=window.devicePixelRatio;null==a&&(a=1);return a};B.$FQ=function(a){return 157286400};B.$HQ=function(a){return B.$JQ()?B.$MQ.createObjectURL(a):null};B.$IQ=function(a){B.$JQ()&&B.$MQ.revokeObjectURL(a)};B.$JQ=function(){if(B.$LQ){B.$LQ=!1;if(null==window.Blob)return!1;var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType=
"blob";if("blob"!=a.responseType)return!1;B.$MQ=B.$1P("URL").value}return null!=B.$MQ?null!=B.$MQ.createObjectURL:!1};var vb=function(a,b,c,d){this.$wK=!1;this.$BJ=a;this.$PQ=b;this.$QQ=c;this.$RQ=d};l.$C$B=vb;vb.__name__=["$C$B"];vb.__interfaces__=[Ue];vb.__super__=$;vb.prototype=s($.prototype,{$uK:function(){null!=this.$PQ&&(window.document.fonts["delete"](this.$PQ),this.$PQ=null);B.$IQ(this.$RQ);null!=this.$QQ&&(null!=this.$QQ.parentNode&&this.$QQ.parentNode.removeChild(this.$QQ),this.$QQ=null)},
__class__:vb});var Rb=function(a){this.$wK=!1;this.$WQ=a};l.$CBC=Rb;Rb.__name__=["$CBC"];Rb.__interfaces__=[Kb];Rb.__super__=$;Rb.prototype=s($.prototype,{play:function(a){null==a&&(a=1);return new vd(this,a,!1)},get_width:function(){return this.$WQ.videoWidth},get_height:function(){return this.$WQ.videoHeight},$uK:function(){this.$WQ=null},__class__:Rb,__properties__:{get_height:"get_height",get_width:"get_width"}});var vd=function(a,b,c){this.$0H=null;this.$nP=!1;var d=this;this.$_L=a;this.$jP=
window.document.createElement("video");this.$jP.loop=c;null!=a.$WQ.srcObject?this.$jP.srcObject=a.$WQ.srcObject:(this.$jP.src=a.$WQ.src,0<=window.navigator.userAgent.indexOf("2DKSim")&&(this.$jP.src+="?"+Math.random()));this.$jP.width=a.$WQ.videoWidth;this.$jP.height=a.$WQ.videoHeight;this.$jP.muted=a.$WQ.muted;this.$jP.setAttribute("playsinline","");this.$jP.setAttribute("webkit-playsinline","");this.volume=new L(b,function(a,b){d.$iP()});this.$iP();this.$$L=new ea(!1);this.$YQ();n.hidden.$hF&&this.set_paused(!0)};
l.$CCC=vd;vd.__name__=["$CCC"];vd.__interfaces__=[Ob,Lb];vd.prototype={get_texture:function(){null==this.$0H&&(this.$0H=n.$2F.$LF.createTextureFromImage(this.$jP,da.RGB));return this.$0H},get_video:function(){return this.$_L},set_paused:function(a){a!=this.$nP&&((this.$nP=a)?this.$jP.pause():this.$YQ());return a},update:function(a){this.volume.update(a);this.$$L.set__(this.$jP.ended);return this.$$L.$hF||this.$nP?(this.$VP=!1,this.$kP.dispose(),this.$lP.dispose(),!0):!1},dispose:function(){this.set_paused(!0);
this.$$L.set__(!0);null!=this.$0H&&this.$0H.dispose();var a=this.$jP.srcObject,b=a instanceof MediaStream?a:null;if(null!=b)for(a=0,b=b.getVideoTracks();a<b.length;){var c=b[a];++a;c.stop()}},$YQ:function(){var a=this;this.$jP.play();this.$VP||(Ja.$fF.$EF.$3N(this),this.$VP=!0,this.$kP=n.volume.get_changed().connect(function(b,c){a.$iP()}),this.$lP=n.hidden.get_changed().connect(function(b,c){b?(a.$mP=a.$nP,a.set_paused(!0)):a.set_paused(a.$mP)}))},$iP:function(){this.$jP.volume=n.volume.$hF*this.volume.$hF},
__class__:vd,__properties__:{get_video:"get_video",get_texture:"get_texture",set_paused:"set_paused"}};var J=function(a){this.$wK=!1;this.$cQ=a};l.$CFC=J;J.__name__=["$CFC"];J.__interfaces__=[sb];J.__properties__={get_supported:"get_supported"};J.get_supported=function(){if(J.$jQ){J.$jQ=!1;var a=B.$1P("AudioContext").value;if(null!=a&&(J.$dQ=new a,J.$eQ=J.$fQ(),J.$eQ.connect(J.$dQ.destination),n.volume.watch(function(a,b){J.$eQ.gain.value=a}),n.$2F.$NF.down.connect(function(a){(new J(J.$iQ())).play()}).once(),
a=function(a){"suspended"==J.$dQ.state&&J.$dQ.resume()},n.$2F.$NF.down.connect(a),n.$2F.$NF.up.connect(a),n.$2F.$JF.down.connect(a),n.$2F.$JF.up.connect(a),B.$wP))var b=null,b=n.$2F.$NF.up.connect(function(a){var d=(new J(J.$iQ())).play();B.$0P(function(){var a=d.$oQ();(null==a||2<=a)&&b.dispose()})})}return null!=J.$dQ};J.$fQ=function(){return null!=J.$dQ.createGain?J.$dQ.createGain():J.$dQ.createGainNode()};J.$gQ=function(a,b){null!=a.start?a.start(0,b):a.noteOn(0,b)};J.$hQ=function(a){null!=a.stop?
a.stop(0):a.noteOff(0)};J.$iQ=function(){null==J.$kQ&&(J.$kQ=J.$dQ.createBuffer(1,1,22050));return J.$kQ};J.__super__=$;J.prototype=s($.prototype,{play:function(a){null==a&&(a=1);return new Tb(this,a,!1)},loop:function(a){null==a&&(a=1);return new Tb(this,a,!0)},get_duration:function(){return this.$cQ.duration},$uK:function(){this.$cQ=null},__class__:J,__properties__:{get_duration:"get_duration"}});var Tb=function(a,b,c){this.$uQ=0;this.$pQ=-1;var d=this;this.$9L=a;this.$uF=J.$eQ;this.$$L=new ea(!1);
this.$tQ=c;this.$MG=a.get_duration();this.volume=new L(b,function(a,b){null!=d.$rQ&&d.$mQ(a)});this.$hP(0);n.hidden.$hF&&this.set_paused(!0)};l.$CGC=Tb;Tb.__name__=["$CGC"];Tb.__interfaces__=[Ob,tb];Tb.prototype={set_paused:function(a){a!=0<=this.$pQ&&(a?(this.$lQ(),this.$pQ=this.get_position()):(this.$$L.$hF||this.$hP(this.$pQ),this.$pQ=-1));return a},get_position:function(){return this.$$L.$hF?this.$MG:0<=this.$pQ?this.$pQ:(J.$dQ.currentTime-this.$qQ+this.$uQ)%this.$MG},update:function(a){this.volume.update(a);
null!=this.$rQ&&3==this.$rQ.playbackState&&this.$$L.set__(!0);return this.$$L.$hF||0<=this.$pQ?(this.$VP=!1,this.$lP.dispose(),this.$lQ(),!0):!1},$lQ:function(){if(null!=this.$rQ){J.$hQ(this.$rQ);this.$rQ.disconnect();this.$rQ.onended=null;if(B.$wP){var a=J.$iQ();try{this.$rQ.buffer=a}catch(b){}}this.$rQ=null}},dispose:function(){this.set_paused(!0);this.$$L.set__(!0)},$mQ:function(a){null==this.$sQ&&(this.$sQ=J.$fQ(),this.$nQ(this.$sQ));this.$sQ.gain.value=a},$nQ:function(a){0<=this.$pQ||(this.$rQ.disconnect(),
this.$rQ.connect(a));a.connect(this.$uF);this.$uF=a},$hP:function(a){var b=this;this.$rQ=J.$dQ.createBufferSource();this.$rQ.buffer=this.$9L.$cQ;this.$rQ.loop=this.$tQ;this.$rQ.onended=function(){b.$$L.set__(!0)};J.$gQ(this.$rQ,0>a?0:a);this.$rQ.connect(this.$uF);this.$uQ=0<=this.$pQ?this.$pQ:0;this.$qQ=J.$dQ.currentTime;1==this.volume.$hF&&null==this.$sQ||this.$mQ(this.volume.$hF);this.$VP||(Ja.$fF.$EF.$3N(this),this.$VP=!0,this.$lP=n.hidden.get_changed().connect(function(a,d){a?(b.$mP=0<=b.$pQ,
b.set_paused(!0)):b.set_paused(b.$mP)}))},$oQ:function(){return null!=this.$rQ?this.$rQ.playbackState:3},__class__:Tb,__properties__:{get_position:"get_position",set_paused:"set_paused"}};var Ge=function(a){this.$tR=new P;this.$sR=(new md).$lL(157286400).$nL(function(a,b){return a.$DS()});this.$mR=this.$nR=this.$oR=this.$pR=this.$qR=this.$rR=0;this.$eR=[];this.$bR=!0;this.$ZR=!1;this.$XR=this.$YR=null;this.$WR=!1;this.$VR=null;this.$UR=0;this.$QR=this.$RR=this.$mI=this.$SR=this.$TR=null;this.$PR=
!1;this.$OR=null;this.$NR=new sa;this.$MR=0;this.$KR=this.$LR=null;this.$wQ=[];this.$vQ=null;var b=this;this.$JR=a;this.$sR.$mL(function(a,d){b.$8Q(a,d)});this.$sR.$lL(B.$FQ(a));n.lowMemoryWarning.connect(function(){b.$sR.dispose()});a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);a.pixelStorei(3317,1);this.$aR=a.createBuffer();a.bindBuffer(34962,this.$aR);this.$cR=a.createBuffer();this.$dR=a.createBuffer();this.$LR=this.$cR;this.$fR=new wb(a,0);this.$gR=new wb(a,1);this.$hR=new wb(a,
2);this.$iR=new xb(a,0);this.$jR=new xb(a,1);this.$kR=new xb(a,2);this.$lR=new wd(a);this.$IR(16)};l.$CHC=Ge;Ge.__name__=["$CHC"];Ge.prototype={$xQ:function(a,b){this.$JR.viewport(0,0,a,b);this.$pR=a;this.$qR=b},$yQ:function(){this.$rR=this.$rR+1|0;this.$4Q(null)},$zQ:function(){this.$7F();this.$JR.flush()},$1Q:function(a){a==this.$mI&&(this.$7F(),this.$mI=null);this.$$Q(a);null!=a.$CS?this.$8Q(a,a.$CS):this.$sR.$sL(a)},$2Q:function(a){if(a.$BS){a.$BS=!1;var b=this.$sR.$sL(a,!1);null!=b?a.$CS=b:this.$5Q(a);
a.$9R=null;a.$$R=null}},$3Q:function(){var a=this.$JR.createTexture();this.$6Q(a);this.$JR.texParameteri(3553,10242,33071);this.$JR.texParameteri(3553,10243,33071);this.$JR.texParameteri(3553,10240,9729);this.$JR.texParameteri(3553,10241,9729);return a},$4Q:function(a){this.$7F();this.$OR=null;null!=this.$QR&&(this.$QR=null,this.$JR.disable(3089));this.$9Q(a);this.$JR.clear(16384)},$5Q:function(a){var b=a.$BS?this.$sR.$fL(a):a.$CS;if(null==b){b=this.$3Q();b=new He(b);if(a.$BS){var c=!0;if(this.$sR.$vL+
a.$DS()>this.$sR.$wL){var d=this.$sR.$pL();2>this.$rR-d.$AS&&(c=!1)}this.$sR.$oL(a,b,c)}else a.$CS=b;switch(a.$ES[1]){case 2:case 3:c=6407;break;default:c=6408}switch(a.$ES[1]){case 1:d=32819;break;case 3:d=33635;break;default:d=5121}var f=a.$9R,h;null!=f?(h=a.$9R,h=null==(h instanceof HTMLVideoElement?h:null)):h=!1;if(h){if(a.$qO!=f.width||a.$rO!=f.height)h=B.$9P(a.$qO,a.$rO),h.getContext("2d",null).drawImage(f,0,0),B.$CQ(h,f.width,f.height),f=h;this.$JR.texImage2D(3553,0,c,c,d,f)}else this.$JR.texImage2D(3553,
0,c,a.$qO,a.$rO,0,c,d,null)}a.$AS!=this.$rR&&(c=a.$9R,c=c instanceof HTMLVideoElement?c:null,null!=c&&2<=c.readyState&&(this.$6Q(b.$8R),this.$JR.texImage2D(3553,0,6407,6407,5121,c)));a.$AS=this.$rR;return b},$6Q:function(a){this.$YR!=a&&(this.$YR=a,this.$JR.bindTexture(3553,a))},$7Q:function(a){this.$XR!=a&&(a.$LS(this.$XR),this.$XR=a)},$8Q:function(a,b){a==this.$mI&&(this.$7F(),this.$mI=null);this.$JR.deleteTexture(b.$8R);null!=b.$NK&&this.$JR.deleteTexture(b.$NK)},$9Q:function(a){if(this.$VR!=a)if(this.$VR=
a,null!=a){var b=a.$_R,c=null;null==b&&(b=this.$JR.createFramebuffer(),a.$_R=b,this.$2Q(a),c=a.$CS.$8R);this.$JR.bindFramebuffer(36160,a.$_R);this.$JR.viewport(0,0,a.$qO,a.$rO);null!=c&&this.$JR.framebufferTexture2D(36160,36064,3553,c,0)}else this.$JR.bindFramebuffer(36160,null),this.$JR.viewport(0,0,this.$pR,this.$qR)},$$Q:function(a){a==this.$OR&&(this.$7F(),this.$OR=null);null!=a.$_R&&(this.$JR.deleteFramebuffer(a.$_R),a.$_R=null)},$_Q:function(a,b,c,d,f,h){h.$SL!=this.$mI&&(this.$7F(),this.$mI=
h.$SL);return this.$HR(a,b,c,d,f,this.$AR(h.$SL,f))},$AR:function(a,b){return b?this.$gR:null!=a.$$R&&a.$$R.separateAlpha?this.$hR:this.$fR},$BR:function(a,b,c,d,f,h){h.$SL!=this.$mI&&(this.$7F(),this.$mI=h.$SL);if(h.$TL!=this.$NR.x||h.$UL!=this.$NR.y||h.$yH!=this.$NR.width||h.$zH!=this.$NR.height)this.$7F(),this.$NR.set(h.$TL,h.$UL,h.$yH,h.$zH);return this.$HR(a,b,c,d,f,this.$CR(h.$SL,f))},$CR:function(a,b){return b?this.$jR:null!=a.$$R&&a.$$R.separateAlpha?this.$kR:this.$iR},$DR:function(a,b,c,
d,f){return this.$HR(a,b,c,d,f,this.$lR)},$ER:function(a,b,c,d,f,h){return this.$GR(a,b,c,d,f,this.$lR,h)},$FR:function(a,b,c,d,f,h,e){h.$SL!=this.$mI&&(this.$7F(),this.$mI=h.$SL);if(h.$TL!=this.$NR.x||h.$UL!=this.$NR.y||h.$yH!=this.$NR.width||h.$zH!=this.$NR.height)this.$7F(),this.$NR.set(h.$TL,h.$UL,h.$yH,h.$zH);return this.$GR(a,b,c,d,f,this.$CR(h.$SL,f),e)},$lI:function(a,b,c,d,f,h,e){a!=this.$OR&&(this.$7F(),this.$OR=a);b!=this.$KR&&(this.$7F(),this.$KR=b);d!=this.$MR&&(this.$7F(),this.$MR=d);
f!=this.$PR&&(this.$7F(),this.$PR=f);h!=this.$RR&&(this.$7F(),h.$lI(),this.$RR=h);e!=this.$LR&&(this.$7F(),this.$LR=e);if(null!=c||null!=this.$QR)null!=c&&null!=this.$QR&&this.$QR.equals(c)||(this.$7F(),this.$QR=null!=c?c.clone(this.$QR):null,this.$ZR=!0)},$GR:function(a,b,c,d,f,h,e){this.$lI(a,b,c,d,f,h,this.$dR);a=this.$wQ.length;h=a/h.$JS|0;for(b=0;b<e.length;)c=e[b],++b,this.$eR.push(c+h);return a},$HR:function(a,b,c,d,f,h){this.$lI(a,b,c,d,f,h,this.$cR);this.$mR>=this.$nR&&this.$IR(2*this.$nR);
++this.$mR;a=this.$oR;this.$oR+=4*h.$JS;return a},$KM:function(a,b,c,d){var f=b.$2I(),h=this.$tR,h=null!=E[f]?h.getReserved(f):h.h[f];if(null==h){var h=new xd(this.$JR,this,b.$5I,b.$4I),e=this.$tR;null!=E[f]?e.setReserved(f,h):e.h[f]=h}f=this.$HR(a,R.Copy,null,0,!1,h);e=this.$vQ;this.$mI=null;var g=c/a.$sO,k=d/a.$tO,l=2*g-1,m=2*k-1;e[f]=-1;e[++f]=-1;e[++f]=0;e[++f]=0;e[++f]=l;e[++f]=-1;e[++f]=g;e[++f]=0;e[++f]=l;e[++f]=m;e[++f]=g;e[++f]=k;e[++f]=-1;e[++f]=m;e[++f]=0;e[++f]=k;this.$9Q(a);this.$7Q(h);
h.$fS(b,a,c,d);this.$7F()},$7F:function(){if(this.$LR==this.$cR){if(1>this.$mR)return}else if(1>this.$eR.length)return;this.$9Q(this.$OR);if(this.$KR!=this.$SR){switch(this.$KR[1]){case 0:this.$JR.blendFunc(1,771);break;case 1:this.$JR.blendFunc(1,1);break;case 2:this.$JR.blendFunc(774,771);break;case 3:this.$JR.blendFunc(1,769);break;case 4:this.$JR.blendFunc(0,770);break;case 5:this.$JR.blendFunc(1,0)}this.$SR=this.$KR}if(this.$MR!=this.$UR){if(0<this.$MR)if(0==this.$UR&&this.$JR.enable(2960),this.$PR){var a=
1<<this.$MR-1;this.$JR.stencilMask(a);this.$UR<this.$MR&&this.$JR.clear(1024);this.$JR.stencilFunc(514,a-1,255)}else a=(1<<this.$MR)-1,this.$JR.stencilFunc(514,a,a);else this.$JR.disable(2960);this.$UR=this.$MR}this.$PR!=this.$WR&&(this.$PR?(this.$JR.stencilMask(1<<this.$MR-1),this.$JR.clear(1024),this.$JR.colorMask(!1,!1,!1,!1),this.$JR.stencilFunc(514,(1<<this.$MR-1)-1,255),this.$JR.stencilOp(7680,7680,7682)):(this.$JR.colorMask(!0,!0,!0,!0),a=(1<<this.$MR)-1,this.$JR.stencilFunc(514,a,a),this.$JR.stencilOp(7680,
7680,7680)),this.$WR=this.$PR);this.$ZR&&(null!=this.$QR?(this.$JR.enable(3089),this.$JR.scissor(this.$QR.x|0,this.$QR.y|0,this.$QR.width|0,this.$QR.height|0)):this.$JR.disable(3089),this.$ZR=!1);null!=this.$mI&&(a=this.$5Q(this.$mI),null!=a.$NK?(this.$JR.activeTexture(33985),this.$6Q(a.$8R),this.$JR.activeTexture(33984),this.$6Q(a.$NK)):this.$6Q(a.$8R));this.$7Q(this.$RR);this.$RR!=this.$iR&&this.$RR!=this.$jR&&this.$RR!=this.$kR||this.$RR.$WS(this.$NR.x/this.$mI.$sO,this.$NR.y/this.$mI.$tO,this.$NR.width/
this.$mI.$sO,this.$NR.height/this.$mI.$tO);this.$LR!=this.$TR&&(this.$JR.bindBuffer(34963,this.$LR),this.$TR=this.$LR);if(this.$TR==this.$cR){if(this.$bR){this.$bR=!1;for(var a=new Uint16Array(6*this.$nR),b=0,c=this.$nR;b<c;){var d=b++,f=6*d,d=4*d;a[f]=d;a[f+1]=d+1;a[f+2]=d+2;a[f+3]=d+2;a[f+4]=d+3;a[f+5]=d}this.$JR.bufferData(34963,a,35044)}this.$JR.bufferData(34962,this.$vQ.subarray(0,this.$oR),35048);this.$JR.drawElements(4,6*this.$mR,5123,0);this.$oR=this.$mR=0}else a=new Uint16Array(this.$eR),
this.$JR.bufferData(34963,a,35048),this.$eR.length=0,this.$JR.bufferData(34962,new Float32Array(this.$wQ),35048),this.$wQ.length=0,this.$JR.drawElements(4,a.length,5123,0)},$IR:function(a){1024<a?this.$7F():(this.$nR=a,a=new Float32Array(32*a),null!=this.$vQ&&a.set(this.$vQ,0),this.$vQ=a,this.$bR=!0)},__class__:Ge};var Ga=function(a,b){this.$yR=this.$gO=null;null==Ga.$zR&&(Ga.$zR=new Float32Array(8));this.$xR=a;this.$0O=b};l.$CIC=Ga;Ga.__name__=["$CIC"];Ga.__interfaces__=[Mb];Ga.prototype={save:function(){var a=
this.$gO,b=this.$gO.next;null==b&&(b=new yd,b.$kO=a,a.next=b);a.$0R.clone(b.$0R);b.$PK=a.$PK;b.$RK=a.$RK;b.$TK=a.$TK;b.$NK=a.$NK;b.$bI=a.$bI;b.$cI=null!=a.$cI?a.$cI.clone(b.$cI):null;b.$1R=a.$1R;b.$2R=a.$2R;this.$gO=b},translate:function(a,b){var c=this.$gO.$0R;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},scale:function(a,b){var c=this.$gO.$0R;c.m00*=a;c.m10*=a;c.m01*=b;c.m11*=b},rotate:function(a){var b=this.$gO.$0R;a=3.141592653589793*a/180;var c=Math.sin(a);a=Math.cos(a);var d=b.m00,f=b.m10,
h=b.m01,e=b.m11;b.m00=d*a+h*c;b.m10=f*a+e*c;b.m01=h*a-d*c;b.m11=e*a-f*c},transform:function(a,b,c,d,f,h){var e=this.$gO;Ga.$BH.set(a,b,c,d,f,h);ya.multiply(e.$0R,Ga.$BH,e.$0R)},restore:function(){this.$gO=this.$gO.$kO},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,f,h,e){var g=this.$gO,k=a.$SL;b=this.$wR(b,c,h,e);c=k.$sO;k=k.$tO;d=(a.$TL+d)/c;f=(a.$UL+f)/k;h=d+h/c;e=f+e/k;c=g.$PK;var k=g.$RK,l=g.$TK,m=g.$NK;a=this.$xR.$_Q(this.$0O,
g.$bI,g.$cI,g.$1R,g.$2R,a);g=this.$xR.$vQ;g[a]=b[0];g[++a]=b[1];g[++a]=d;g[++a]=f;g[++a]=c;g[++a]=k;g[++a]=l;g[++a]=m;g[++a]=b[2];g[++a]=b[3];g[++a]=h;g[++a]=f;g[++a]=c;g[++a]=k;g[++a]=l;g[++a]=m;g[++a]=b[4];g[++a]=b[5];g[++a]=h;g[++a]=e;g[++a]=c;g[++a]=k;g[++a]=l;g[++a]=m;g[++a]=b[6];g[++a]=b[7];g[++a]=d;g[++a]=e;g[++a]=c;g[++a]=k;g[++a]=l;g[++a]=m},drawPattern:function(a,b,c,d,f){var h=this.$gO,e=a.$SL;b=this.$wR(b,c,d,f);d/=e.$sO;f/=e.$tO;e=h.$PK;c=h.$RK;var g=h.$TK,k=h.$NK;a=this.$xR.$BR(this.$0O,
h.$bI,h.$cI,h.$1R,h.$2R,a);h=this.$xR.$vQ;h[a]=b[0];h[++a]=b[1];h[++a]=0;h[++a]=0;h[++a]=e;h[++a]=c;h[++a]=g;h[++a]=k;h[++a]=b[2];h[++a]=b[3];h[++a]=d;h[++a]=0;h[++a]=e;h[++a]=c;h[++a]=g;h[++a]=k;h[++a]=b[4];h[++a]=b[5];h[++a]=d;h[++a]=f;h[++a]=e;h[++a]=c;h[++a]=g;h[++a]=k;h[++a]=b[6];h[++a]=b[7];h[++a]=0;h[++a]=f;h[++a]=e;h[++a]=c;h[++a]=g;h[++a]=k},fillRect:function(a,b,c,d,f){var h=this.$gO;b=this.$wR(b,c,d,f);c=h.$PK*(a&16711680)/16711680;d=h.$RK*(a&65280)/65280;a=h.$TK*(a&255)/255;f=h.$NK;var h=
this.$xR.$DR(this.$0O,h.$bI,h.$cI,h.$1R,h.$2R),e=this.$xR.$vQ;e[h]=b[0];e[++h]=b[1];e[++h]=c;e[++h]=d;e[++h]=a;e[++h]=f;e[++h]=b[2];e[++h]=b[3];e[++h]=c;e[++h]=d;e[++h]=a;e[++h]=f;e[++h]=b[4];e[++h]=b[5];e[++h]=c;e[++h]=d;e[++h]=a;e[++h]=f;e[++h]=b[6];e[++h]=b[7];e[++h]=c;e[++h]=d;e[++h]=a;e[++h]=f},fillTriangles:function(a,b,c){var d=this.$gO,f=d.$0R,h=f.m00,e=f.m01,g=f.m02,k=f.m10,l=f.m11,f=f.m12,m=d.$PK*(a&16711680)/16711680,n=d.$RK*(a&65280)/65280;a=d.$TK*(a&255)/255;var p=d.$NK;c=this.$xR.$ER(this.$0O,
d.$bI,d.$cI,d.$1R,d.$2R,c);for(var d=this.$xR.$wQ,q=0,r=b.length;q<r;){var t=b[q++],s=b[q++];d[c++]=t*h+s*e+g;d[c++]=t*k+s*l+f;d[c++]=m;d[c++]=n;d[c++]=a;d[c++]=p}},drawTriangles:function(a,b,c,d){var f=this.$gO,h=a.$SL,e=f.$0R,g=e.m00,k=e.m01,l=e.m02,m=e.m10,n=e.m11,e=e.m12,p=f.$PK,q=f.$RK,r=f.$TK,t=f.$NK;a=this.$xR.$FR(this.$0O,f.$bI,f.$cI,f.$1R,f.$2R,a,c);c=this.$xR.$wQ;for(var s=f=0,u=b.length;s<u;){var v=b[s++],x=b[s++];c[a++]=v*g+x*k+l;c[a++]=v*m+x*n+e;null!=d?(c[a++]=d[f++],c[a++]=d[f++]):
(c[a++]=v/h.$sO,c[a++]=x/h.$tO);c[a++]=p;c[a++]=q;c[a++]=r;c[a++]=t}},fillPolygon:function(a,b){var c=aa.$EO(b);null!=c&&this.fillTriangles(a,b,c)},drawPolygon:function(a,b){var c=aa.$EO(b);null!=c&&this.drawTriangles(a,b,c)},drawCircle:function(a,b,c,d,f){null==f&&(f=50);var h=[],e=[];aa.$_N(h,e,b,c,d,d,f)&&this.drawTriangles(a,h,e)},fillCircle:function(a,b,c,d,f){null==f&&(f=50);var h=[],e=[];aa.$_N(h,e,b,c,d,d,f)&&this.fillTriangles(a,h,e)},strokeCircle:function(a,b,c,d,f,h){null==h&&(h=50);var e=
[],g=[];aa.$CO(e,g,b,c,d,d,f,h)&&this.fillTriangles(a,e,g)},drawEllipse:function(a,b,c,d,f,h){null==h&&(h=50);var e=[],g=[];aa.$_N(e,g,b,c,d,f,h)&&this.drawTriangles(a,e,g)},fillEllipse:function(a,b,c,d,f,h){null==h&&(h=50);var e=[],g=[];aa.$_N(e,g,b,c,d,f,h)&&this.fillTriangles(a,e,g)},strokeEllipse:function(a,b,c,d,f,h,e){null==e&&(e=50);var g=[],k=[];aa.$CO(g,k,b,c,d,f,h,e)&&this.fillTriangles(a,g,k)},fillArc:function(a,b,c,d,f,h,e){null==e&&(e=50);var g=[],k=[];aa.$AO(g,k,b,c,d,3.141592653589793*
f/180,3.141592653589793*h/180,e)&&this.fillTriangles(a,g,k)},strokeArc:function(a,b,c,d,f,e,g,k){null==k&&(k=50);var l=[],m=[];aa.$BO(l,m,b,c,d,3.141592653589793*f/180,3.141592653589793*e/180,g,k)&&this.fillTriangles(a,l,m)},strokeLines:function(a,b,c){var d=[],f=[];aa.$DO(d,f,b,c)&&this.fillTriangles(a,d,f)},drawLines:function(a,b,c){var d=[],f=[];aa.$DO(d,f,b,c)&&this.drawTriangles(a,d,f)},multiplyAlpha:function(a){this.$gO.$NK*=a},setAlpha:function(a){this.$gO.$NK=a},tint:function(a,b,c){var d=
this.$gO;d.$PK*=a;d.$RK*=b;d.$TK*=c},setBlendMode:function(a){this.$gO.$bI=a},beginMask:function(){var a=this.$gO;++a.$1R;a.$2R=!0},endMask:function(){this.$gO.$2R=!1},applyScissor:function(a,b,c,d){var f=this.$gO,e=Ga.$zR;e[0]=a;e[1]=b;e[2]=a+c;e[3]=b+d;f.$0R.transformArray(e,4,e);this.$yR.transformArray(e,4,e);a=e[0];b=e[1];c=e[2]-a;d=e[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);f.$3R(a,b,c,d)},willRender:function(){this.$xR.$yQ()},didRender:function(){this.$xR.$zQ()},onResize:function(a,b){this.$gO=
new yd;var c=null!=this.$0O?-1:1;this.$gO.$0R.set(2/a,0,0,-2*c/b,-1,c);this.$yR=new ya;this.$yR.set(2/a,0,0,2/b,-1,-1);this.$yR.invert()},$wR:function(a,b,c,d){c=a+c;d=b+d;var f=Ga.$zR;f[0]=a;f[1]=b;f[2]=c;f[3]=b;f[4]=c;f[5]=d;f[6]=a;f[7]=d;this.$gO.$0R.transformArray(f,8,f);return f},__class__:Ga};var yd=function(){this.$kO=this.next=null;this.$2R=!1;this.$1R=0;this.$PK=this.$RK=this.$TK=this.$NK=1;this.$cI=null;this.$bI=R.Normal;this.$0R=new ya};l.$CJC=yd;yd.__name__=["$CJC"];yd.prototype={$3R:function(a,
b,c,d){if(null!=this.$cI){var f=this.$cI.x,f=f>a?f:a,e=this.$cI.y,e=e>b?e:b,g=this.$cI.x+this.$cI.width;c=a+c;var k=this.$cI.y+this.$cI.height;d=b+d;a=f;b=e;c=(g<c?g:c)-f;c=0>c?0:c;d=(k<d?k:d)-e;d=0>d?0:d}else this.$cI=new sa;this.$cI.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:yd};var gc=function(a,b){this.$6R=!1;var c=this;this.$mO=new ea(!0);this.$4R=b;this.$$I();if(0==b.getError()){this.$6R=!0;var d=b.canvas;d.addEventListener("webglcontextlost",function(a){a.preventDefault();
c.graphics=null;c.$mO.set__(!1)},!1);d.addEventListener("webglcontextrestored",function(a){c.$$I();c.$mO.set__(!0)},!1);a.resize.connect(I(this,this.$7R))}};l.$CKC=gc;gc.__name__=["$CKC"];gc.__interfaces__=[Nb];gc.prototype={get_type:function(){return Fa.WebGL},get_filterSupported:function(){return!0},createTextureFromImage:function(a,b,c){null==c&&(c=1);var d=a.width,f=a.height,e=new yb(this,d,f,c);null!=b&&b!=da.COMPRESSED&&(e.$ES=b);e.$9R=a;return e.createTexture(d/c,f/c)},createTexture:function(a,
b,c,d){null==d&&(d=1);var f=new yb(this,a,b,d);null!=c&&c!=da.COMPRESSED&&(f.$ES=c);return f.createTexture(a/d,b/d)},getTextureAssetFormats:function(){return[]},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},$7R:function(){if(null!=this.graphics){var a=this.$4R.canvas,b=a.width,a=a.height;this.$5R.$xQ(b,a);this.graphics.onResize(b,a)}},$$I:function(){this.$5R=new Ge(this.$4R);this.graphics=new Ga(this.$5R,null);this.$7R()},__class__:gc,__properties__:{get_filterSupported:"get_filterSupported",
get_type:"get_type"}};var He=function(a){this.$NK=null;this.$8R=a};l.$CLC=He;He.__name__=["$CLC"];He.prototype={__class__:He};var zd=function(a,b,c){Pa.call(this,a,b,c)};l.$CMC=zd;zd.__name__=["$CMC"];zd.__super__=Pa;zd.prototype=s(Pa.prototype,{__class__:zd});var yb=function(a,b,c,d){this.$zO=null;this.$ES=da.RGBA;this.$CS=null;this.$BS=!0;this.$AS=-1;this.$9R=this.$$R=this.$_R=null;this.$wK=!1;this.$LF=a;b=2>b?2:b;c=2>c?2:c;this.$qO=b;this.$rO=c;this.$UG=d;this.$sO=b/d;this.$tO=c/d};l.$CNC=yb;yb.__name__=
["$CNC"];yb.__interfaces__=[rd];yb.__super__=$;yb.prototype=s($.prototype,{createTexture:function(a,b){return new zd(this,Math.ceil(a),Math.ceil(b))},getGraphics:function(){null==this.$zO&&(this.$zO=new Ga(this.$LF.$5R,this),this.$zO.onResize(this.$qO,this.$rO));return this.$zO},clear:function(){this.$LF.$5R.$4Q(this)},renderFilter:function(a,b,c){this.$LF.$5R.$KM(this,a,b,c)},$DS:function(){var a;switch(this.$ES[1]){case 1:a=2;break;case 2:a=3;break;case 3:a=2;break;default:a=4}return a*this.$qO*
this.$rO},$uK:function(){this.$LF.$5R.$1Q(this);null!=this.$9R&&B.$IQ(this.$9R.src);this.$zO=this.$CS=this.$_R=this.$$R=this.$9R=null},__class__:yb});var oa=function(a){this.$US=!0;this.$TS=-1;this.$SS=[];this.$PS=this.$QS=this.$RS=null;this.$JS=0;this.$JR=a};l.$CRC=oa;oa.__name__=["$CRC"];oa.$VS=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};oa.prototype={$KS:function(){},$lI:function(){null==this.$PS&&(this.$PS=this.$JR.createProgram(),this.$KS(),this.$US&&
(this.$JR.detachShader(this.$PS,this.$QS),this.$JR.deleteShader(this.$QS),this.$QS=null,this.$JR.detachShader(this.$PS,this.$RS),this.$JR.deleteShader(this.$RS),this.$RS=null))},$LS:function(a){this.$JR.useProgram(this.$PS);if(0>this.$TS){for(var b=this.$TS=0,c=this.$SS;b<c.length;){var d=c[b];++b;var f=d.$rS();d.$qS=this.$TS;this.$TS+=f}this.$SS=this.$SS.filter(function(a){return 0<=a.$pS});this.$SS.sort(function(a,b){return a.$pS-b.$pS})}if(null!=a){b=a.$SS.length;for(c=this.$SS.length;b<c;)d=b++,
this.$JR.enableVertexAttribArray(d);b=this.$SS.length;for(c=a.$SS.length;b<c;)d=b++,this.$JR.disableVertexAttribArray(d)}else for(b=0,c=this.$SS.length;b<c;)d=b++,this.$JR.enableVertexAttribArray(d);b=0;for(c=this.$SS.length;b<c;){var d=b++,f=this.$SS[d],e=null!=a?a.$SS[d]:null;null!=e&&e.$jL==f.$jL&&e.$9I==f.$9I&&a.$TS==this.$TS&&e.$qS==f.$qS||this.$JR.vertexAttribPointer(d,f.$jL,f.$9I,!1,this.$TS,f.$qS)}},$MS:function(a,b){b="precision mediump float;\n"+b;this.$QS=oa.$VS(this.$JR,35633,a);this.$RS=
oa.$VS(this.$JR,35632,b);this.$JR.attachShader(this.$PS,this.$QS);this.$JR.attachShader(this.$PS,this.$RS);this.$JR.linkProgram(this.$PS);this.$JR.useProgram(this.$PS)},$NS:function(a,b,c){a=this.$JR.getAttribLocation(this.$PS,a);this.$SS.push(new Ie(a,b,c));this.$JS+=b},$OS:function(a){return this.$JR.getUniformLocation(this.$PS,a)},__class__:oa};var xb=function(a,b){this.$XS=this.$YS=this.$ZS=this.$aS=-1;oa.call(this,a);this.$eS=b};l.$CSC=xb;xb.__name__=["$CSC"];xb.__super__=oa;xb.prototype=s(oa.prototype,
{$KS:function(){var a;switch(this.$eS){case 0:case 1:a="texture2D(u_texture, pos);";break;case 2:a="vec4(texture2D(u_textureRGB, pos).rgb, texture2D(u_texture, pos).r);"}a=["varying mediump vec2 v_uv;\nvarying lowp vec4 v_color;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;",2==this.$eS?"uniform lowp sampler2D u_textureRGB;":"","void main (void) {\nmediump vec2 pos = u_region.xy + mod(v_uv, u_region.zw);","lowp vec4 color = "+a,1==this.$eS?"if (color.a == 0.0) discard;":"","gl_FragColor = color * v_color;\n}"].join("\n");
this.$MS("attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp vec4 a_color;\nvarying mediump vec2 v_uv;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_uv = a_uv;\nv_color = vec4(a_color.rgb * a_color.a, a_color.a);\ngl_Position = vec4(a_pos, 0, 1);\n}",a);this.$NS("a_pos",2,5126);this.$NS("a_uv",2,5126);this.$NS("a_color",4,5126);this.$bS=this.$OS("u_texture");this.$dS=this.$OS("u_region");this.$JR.uniform1i(this.$bS,0);2==this.$eS&&(this.$cS=this.$OS("u_textureRGB"),this.$JR.uniform1i(this.$cS,
1))},$WS:function(a,b,c,d){if(a!=this.$XS||b!=this.$YS||c!=this.$ZS||d!=this.$aS)this.$XS=a,this.$YS=b,this.$ZS=c,this.$aS=d,this.$JR.uniform4f(this.$dS,a,b,c,d)},__class__:xb});var wb=function(a,b){oa.call(this,a);this.$eS=b};l.$CUC=wb;wb.__name__=["$CUC"];wb.__super__=oa;wb.prototype=s(oa.prototype,{$KS:function(){var a;switch(this.$eS){case 0:case 1:a="texture2D(u_texture, v_uv);";break;case 2:a="vec4(texture2D(u_textureRGB, v_uv).rgb, texture2D(u_texture, v_uv).r);"}a=["varying mediump vec2 v_uv;\nvarying lowp vec4 v_color;\nuniform lowp sampler2D u_texture;",
2==this.$eS?"uniform lowp sampler2D u_textureRGB;":"","void main (void) {","lowp vec4 color = "+a,1==this.$eS?"if (color.a == 0.0) discard;":"","gl_FragColor = color * v_color;\n}"].join("\n");this.$MS("attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp vec4 a_color;\nvarying mediump vec2 v_uv;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_uv = a_uv;\nv_color = vec4(a_color.rgb * a_color.a, a_color.a);\ngl_Position = vec4(a_pos, 0, 1);\n}",a);this.$NS("a_pos",2,5126);this.$NS("a_uv",
2,5126);this.$NS("a_color",4,5126);this.$bS=this.$OS("u_texture");this.$gS(0);2==this.$eS&&(this.$cS=this.$OS("u_textureRGB"),this.$JR.uniform1i(this.$cS,1))},$gS:function(a){this.$JR.uniform1i(this.$bS,a)},__class__:wb});var wd=function(a){oa.call(this,a)};l.$CVC=wd;wd.__name__=["$CVC"];wd.__super__=oa;wd.prototype=s(oa.prototype,{$KS:function(){this.$MS("attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");this.$NS("a_pos",2,5126);this.$NS("a_rgb",3,5126);this.$NS("a_alpha",1,5126)},__class__:wd});var xd=function(a,b,c,d){this.$nS=new P;this.$lS=this.$mS=null;oa.call(this,a);this.$xR=b;null==c&&(c="void main () {\nvTextureCoord = aTextureCoord;\nvFilterCoord = aTextureCoord * uTextureSize/uFilterSize;\ngl_Position = vec4(aVertexPosition, 0, 1);\n}");this.$5I=c;this.$4I=d;this.$US=!1};l.$CWC=xd;xd.__name__=["$CWC"];xd.__super__=
oa;xd.prototype=s(oa.prototype,{$KS:function(){var a=["precision mediump float;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uTexture;\nuniform vec2 uTextureSize;\nuniform vec2 uFilterSize;\nuniform vec2 uFilterPosition;\nattribute highp vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n#line 0",this.$5I].join("\n"),b=["varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uTexture;\nuniform vec2 uTextureSize;\nuniform vec2 uFilterSize;\nuniform vec2 uFilterPosition;\n#line 0",
this.$4I].join("\n");this.$MS(a,b);this.$NS("aVertexPosition",2,5126);this.$NS("aTextureCoord",2,5126);this.$mS=this.$JR.getUniformLocation(this.$PS,"uTextureSize");this.$lS=this.$JR.getUniformLocation(this.$PS,"uFilterSize");this.$5I=this.$4I=null},$fS:function(a,b,c,d){null!=this.$mS&&this.$JR.uniform2f(this.$mS,b.$qO,b.$rO);null!=this.$lS&&this.$JR.uniform2f(this.$lS,c,d);b=0;a=a.$3I;for(a=new Ia(a,a.arrayKeys());a.hasNext();){c=a.next();d=c.$7I;var f=this.$nS;d=null!=E[d]?f.getReserved(d):f.h[d];
if(null==d){d=new Je(this.$JR.getUniformLocation(this.$PS,c.$7I));var f=c.$7I,e=this.$nS;null!=E[f]?e.setReserved(f,d):e.h[f]=d}d=d.$oS;if(null!=d)switch(c.$9I){case 0:this.$JR.uniform1f(d,c.$8I);break;case 1:this.$JR.uniform2fv(d,c.$8I);break;case 2:this.$JR.uniform3fv(d,c.$8I);break;case 3:this.$JR.uniform4fv(d,c.$8I);break;case 4:this.$JR.uniform1i(d,c.$8I);break;case 5:this.$JR.uniform2iv(d,c.$8I);break;case 6:this.$JR.uniform3iv(d,c.$8I);break;case 7:this.$JR.uniform4iv(d,c.$8I);break;case 8:this.$JR.uniformMatrix2fv(d,
!1,c.$8I);break;case 9:this.$JR.uniformMatrix3fv(d,!1,c.$8I);break;case 10:this.$JR.uniformMatrix4fv(d,!1,c.$8I);break;case 11:this.$JR.uniform1i(d,b),0!=b&&this.$JR.activeTexture(33984+b),++b,c=this.$xR.$5Q(c.$8I.$SL),this.$xR.$6Q(c.$8R)}}1<b&&this.$JR.activeTexture(33984)},__class__:xd});var Je=function(a){this.$oS=a};l.$CXC=Je;Je.__name__=["$CXC"];Je.prototype={__class__:Je};var Ie=function(a,b,c){this.$qS=0;this.$pS=a;this.$jL=b;this.$9I=c};l.$CYC=Ie;Ie.__name__=["$CYC"];Ie.prototype={$rS:function(){return this.$jL*
(5126==this.$9I?4:1)},__class__:Ie};var Ke=function(){this.$yS=null};l["kit.scene.Director"]=Ke;Ke.__name__=["kit","scene","Director"];Ke.__super__=r;Ke.prototype=s(r.prototype,{get_entitySlot:function(){return 7},onAdded:function(){this.owner.addChild(this.$JJ)},onRemoved:function(){this.$wS();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this.$JJ.dispose()},onUpdate:function(a){null!=this.$yS&&this.$yS.$FF(a)&&this.$wS()},get_topScene:function(){var a=
this.scenes.length;return 0<a?this.scenes[a-1]:null},$JO:function(a){a=a.$BF[8];null!=a&&a.shown.emit()},$vS:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a].$BF[8];if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.$JO(a)},$wS:function(){null!=this.$yS&&(this.$yS.$zS(),this.$yS=null,this.$vS())},__class__:Ke,__properties__:s(r.prototype.__properties__,{get_topScene:"get_topScene"})});
var $e=function(){};l.$CZC=$e;$e.__name__=["$CZC"];$e.prototype={$FF:function(a){return this.$0S.update(a)},$zS:function(){this.$0S.complete();this.$1S()},__class__:$e};var Le=function(){};l["kit.scene.Scene"]=Le;Le.__name__=["kit","scene","Scene"];Le.__super__=r;Le.prototype=s(r.prototype,{get_entitySlot:function(){return 8},__class__:Le});var af=function(){};l["kit.scene.Transition"]=af;af.__name__=["kit","scene","Transition"];af.prototype={update:function(a){return!0},complete:function(){},__class__:af};
var Za=function(){};l["kit.script.Action"]=Za;Za.__name__=["kit","script","Action"];Za.prototype={__class__:Za};var ua=function(a,b,c,d){this.$hF=a;this.$LG=b;this.$5S=c;this.$NG=d};l["kit.script.AnimateTo"]=ua;ua.__name__=["kit","script","AnimateTo"];ua.__interfaces__=[Za];ua.prototype={update:function(a,b){null==this.$3S&&(this.$3S=new nb(this.$hF.$hF,this.$LG,this.$5S,this.$NG),this.$hF.set_behavior(this.$3S),this.$hF.update(a));if(this.$hF.$yF!=this.$3S){var c=this.$3S.elapsed-this.$5S;this.$3S=
null;return 0<c?a-c:0}return-1},__class__:ua};var t=function(a){this.$_F=a};l["kit.script.CallFunction"]=t;t.__name__=["kit","script","CallFunction"];t.__interfaces__=[Za];t.prototype={update:function(a,b){this.$_F();return 0},__class__:t};var u=function(a){this.$MG=a;this.$6S=0};l["kit.script.Delay"]=u;u.__name__=["kit","script","Delay"];u.__interfaces__=[Za];u.prototype={update:function(a,b){this.$6S+=a;if(this.$6S>=this.$MG){var c=this.$6S-this.$MG;this.$6S=0;return a-c}return-1},__class__:u};
var bb=function(a){this.$8S=[];this.$7S=null!=a?a.slice():[]};l["kit.script.Parallel"]=bb;bb.__name__=["kit","script","Parallel"];bb.__interfaces__=[Za];bb.prototype={update:function(a,b){for(var c=!0,d=0,f=0,e=this.$7S.length;f<e;){var g=f++,k=this.$7S[g];if(null!=k){var l=k.update(a,b);0<=l?(this.$7S[g]=null,this.$8S.push(k),l>d&&(d=l)):c=!1}}return c?(this.$7S=this.$8S,this.$8S=[],d):-1},__class__:bb};var Ha=function(a,b){null==b&&(b=-1);this.$9S=a;this.$_S=this.$$S=b};l["kit.script.Repeat"]=Ha;
Ha.__name__=["kit","script","Repeat"];Ha.__interfaces__=[Za];Ha.prototype={update:function(a,b){if(0==this.$$S)return 0;var c=this.$9S.update(a,b);return 0<this.$$S&&0<=c&&0==--this.$_S?(this.$_S=this.$$S,c):-1},__class__:Ha};var C=function(){r.call(this);this.stopAll()};l["kit.script.Script"]=C;C.__name__=["kit","script","Script"];C.__super__=r;C.prototype=s(r.prototype,{get_entitySlot:function(){return 11},run:function(a){a=new Ad(a);this.$AT.push(a);return a},stopAll:function(){this.$AT=[]},onUpdate:function(a){for(var b=
0;b<this.$AT.length;){var c=this.$AT[b];c.$BT||0<=c.$CT.update(a,this.owner)?this.$AT.splice(b,1):++b}},__class__:C});var Ad=function(a){this.$BT=!1;this.$CT=a};l.$CaC=Ad;Ad.__name__=["$CaC"];Ad.__interfaces__=[Ca];Ad.prototype={dispose:function(){this.$BT=!0;this.$CT=null},__class__:Ad};var D=function(a){this.$DT=0;this.$7S=null!=a?a.slice():[]};l["kit.script.Sequence"]=D;D.__name__=["kit","script","Sequence"];D.__interfaces__=[Za];D.prototype={update:function(a,b){for(var c=0;;){var d=this.$7S[this.$DT];
if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this.$DT;if(this.$DT>=this.$7S.length){this.$DT=0;break}else if(c>a)return-1}return c},__class__:D};var Fa=l["kit.subsystem.RendererType"]={__ename__:!0,__constructs__:["Stage3D","WebGL","Canvas"]};Fa.Stage3D=["Stage3D",0];Fa.Stage3D.toString=p;Fa.Stage3D.__enum__=Fa;Fa.WebGL=["WebGL",1];Fa.WebGL.toString=p;Fa.WebGL.__enum__=Fa;Fa.Canvas=["Canvas",2];Fa.Canvas.toString=p;Fa.Canvas.__enum__=Fa;var Fb=function(){};l["kit.util.BitSets"]=Fb;Fb.__name__=
["kit","util","BitSets"];Fb.set=function(a,b,c){return c?a|b:a&~b};var pf=function(){};l["kit.util.LogHandler"]=pf;pf.__name__=["kit","util","LogHandler"];var ga=function(){this.$TT=this.$UT=null;this.$ST=0;this.$RT=null;this.$PT=this.$QT=0;this.progressChanged=new db;this.error=new Y;this.success=new Y};l["kit.util.Promise"]=ga;ga.__name__=["kit","util","Promise"];ga.all=function(a){if(1>a.length)return(new ga).$MT([]);for(var b=a.length,c=new ga,d=function(a){c.failure(a)},f=Array(b),e=Array(b),
g=0,k=0;k<b;){var l=[k++];f[l[0]]=0;var m=l[0],l=function(a){return function(d){g+=1;e[a[0]]=d;if(1>f[a[0]]){f[a[0]]=1;for(var k=d=0;k<f.length;){var l=f[k];++k;d+=l}c.emitProgress(d/b)}g==b&&c.$MT(e)}}(l);a[m].then(l).catchError(d)}return c};ga.prototype={then:function(a){var b=this;if(2==this.$ST)return this;var c=new ga;this.$oF(c,function(){if(1==b.$ST){var d=a(b.$RT);c.$NT(d)}else c.failure(b.$RT)});return c},catchError:function(a){var b=this;if(1==this.$ST)return this;var c=new ga;this.$oF(c,
function(){if(2==b.$ST){var d=a(b.$RT);c.$NT(d)}else c.$MT(b.$RT)});return c},failure:function(a){this.error.emit(a);return this.$OT(2,a)},$MT:function(a){var b=this.$OT(1,a);this.success.emit(a);return b},emitProgress:function(a){0==this.$ST&&(null!=this.$UT&&this.$UT.emit(a),this.progressChanged.emit())},$oF:function(a,b){0==this.$ST?null==this.$TT?this.$TT=[b]:this.$TT.push(b):n.$2F.$EF.$5N(b)},$NT:function(a){var b=this;U.__instanceof(a,ga)?a.then(function(a){b.$MT(a)}).catchError(function(a){b.failure(a)}):
this.$MT(a)},$OT:function(a,b){if(0==this.$ST&&(this.$RT=b,this.$ST=a,null!=this.$TT)){for(var c=0,d=this.$TT;c<d.length;){var f=d[c];++c;f()}this.$TT=null}return this},set_progress:function(a){this.$PT!=a&&(this.$PT=a,this.progressChanged.emit());return a},set_total:function(a){this.$QT!=a&&(this.$QT=a,this.progressChanged.emit());return a},__class__:ga,__properties__:{set_total:"set_total",set_progress:"set_progress"}};var De=function(a){this.$ST=null!=a?a:Math.floor(2147483647*Math.random())};
l["kit.util.Random"]=De;De.__name__=["kit","util","Random"];De.prototype={nextInt:function(){return this.$ST=(1103515245*this.$ST+12345)%2147483647},__class__:De};var be=function(a){this.next=null;this.$YT=a};l.$CcC=be;be.__name__=["$CcC"];be.prototype={__class__:be};var ra=function(){};l["kit.util.Strings"]=ra;ra.__name__=["kit","util","Strings"];ra.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?z.substr(a,b+1,null):null};ra.removeFileExtension=function(a){var b=a.lastIndexOf(".");
return 0<b?z.substr(a,0,b):a};ra.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=z.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=z.substr(a,b+1,null));return ra.getFileExtension(a)};ra.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};ra.withFields=function(a,b){var c=b.length;if(0<c){a+=0<a.length?" [":"[";for(var d=0;d<c;){0<d&&(a+=", ");var f=b[d],e=b[d+1];if(U.__instanceof(e,Error)){var g=e.stack;null!=g&&(e=g)}a+=f+"="+N.string(e);d+=2}a+="]"}return a};
var ib=function(){};l.$CdC=ib;ib.__name__=["$CdC"];ib.prototype={__class__:ib};var Ce=function(){};l["kit.util.Triangulator"]=Ce;Ce.__name__=["kit","util","Triangulator"];Ce.prototype={triangulate:function(a){var b=a.length;if(6>b)return[];var c=this.$gT;null==c?(c=new ib,c.$bT=this.$hT,this.$hT=c):this.$gT=c.next;c.$cT=-1;c.$dT=-1;c.$_J=0;c.$BK=0;c.next=null;c.$kO=null;c.$eT=!1;c.$aT=null;c.$ZT=null;for(var d=c,f=0,e=0,g=b-2;e<b;)f+=(a[g]-a[e])*(a[e+1]+a[g+1]),g=e,e+=2;if(0<f)for(f=e=0;e<b;){var g=
a[e],k=a[e+1],l=f++,m=this.$gT;null==m?(m=new ib,m.$bT=this.$hT,this.$hT=m):this.$gT=m.next;m.$cT=l;m.$dT=-1;m.$_J=g;m.$BK=k;m.next=null;m.$kO=c;m.$eT=!1;m.$aT=null;m.$ZT=null;null!=c&&(c.next=m);c=m;e+=2}else for(e=b-2,f=e/2|0;0<=e;)g=a[e],k=a[e+1],l=f--,m=this.$gT,null==m?(m=new ib,m.$bT=this.$hT,this.$hT=m):this.$gT=m.next,m.$cT=l,m.$dT=-1,m.$_J=g,m.$BK=k,m.next=null,m.$kO=c,m.$eT=!1,m.$aT=null,m.$ZT=null,null!=c&&(c.next=m),c=m,e-=2;c.next=d.next;c.next.$kO=c;return this.$lT(c,160<b)},$lT:function(a,
b){this.$fT=[];a=this.$qT(a);if(b&&null!=a){var c,d;this.$iT=c=a.$_J;this.$jT=d=a.$BK;for(var f=a.next;f!=a;){var e=f.$_J,g=f.$BK;e<this.$iT&&(this.$iT=e);g<this.$jT&&(this.$jT=g);e>c&&(c=e);g>d&&(d=g);f=f.next}this.$jL=Math.max(c-this.$iT,d-this.$jT);this.$kT=!0}else this.$kT=!1;this.$tT(a);c=this.$fT;this.$fT=null;d=this.$hT;if(null!=this.$gT){for(;d!=this.$gT;)d=d.$bT;d=d.$bT}for(;null!=d;)d.next=this.$gT,this.$gT=d,d=d.$bT;return c},$qT:function(a,b){if(null==a)return a;null==b&&(b=a);for(var c=
a,d;;){d=!1;var f;if(c.$eT)f=!1;else if(f=c.next,c.$_J!=f.$_J||c.$BK!=f.$BK){f=c.$kO;var e=c.next;f=0==(c.$BK-f.$BK)*(e.$_J-c.$_J)-(c.$_J-f.$_J)*(e.$BK-c.$BK)}else f=!0;if(f){c.next.$kO=c.$kO;c.$kO.next=c.next;null!=c.$aT&&(c.$aT.$ZT=c.$ZT);null!=c.$ZT&&(c.$ZT.$aT=c.$aT);c=b=c.$kO;if(c==c.next)return null;d=!0}else c=c.next;if(!d&&c==b)break}return b},$tT:function(a,b){null==b&&(b=0);if(null!=a){0==b&&this.$kT&&this.$4T(a);for(var c=a,d,f;a.$kO!=a.next;)if(d=a.$kO,f=a.next,this.$kT?this.$vT(a):this.$uT(a))this.$fT.push(d.$cT),
this.$fT.push(a.$cT),this.$fT.push(f.$cT),a.next.$kO=a.$kO,a.$kO.next=a.next,null!=a.$aT&&(a.$aT.$ZT=a.$ZT),null!=a.$ZT&&(a.$ZT.$aT=a.$aT),c=a=f.next;else if(a=f,a==c){switch(b){case 0:this.$tT(this.$qT(a),1);break;case 1:a=this.$wT(a);this.$tT(a,2);break;case 2:this.$xT(a)}break}}},$uT:function(a){var b=a.$kO,c=a.next;if(0<=(a.$BK-b.$BK)*(c.$_J-a.$_J)-(a.$_J-b.$_J)*(c.$BK-a.$BK))return!1;for(var d=a.next.next;d!=a.$kO;){var f;f=b.$_J;var e=b.$BK,g=a.$_J,k=a.$BK,l=c.$_J,m=c.$BK,n=d.$_J,p=d.$BK;0<=
(l-n)*(e-p)-(f-n)*(m-p)&&0<=(f-n)*(k-p)-(g-n)*(e-p)&&0<=(g-n)*(m-p)-(l-n)*(k-p)?(f=d.$kO,e=d.next,f=0<=(d.$BK-f.$BK)*(e.$_J-d.$_J)-(d.$_J-f.$_J)*(e.$BK-d.$BK)):f=!1;if(f)return!1;d=d.next}return!0},$vT:function(a){var b=a.$kO,c=a.next;if(0<=(a.$BK-b.$BK)*(c.$_J-a.$_J)-(a.$_J-b.$_J)*(c.$BK-a.$BK))return!1;for(var d=b.$_J>a.$_J?b.$_J>c.$_J?b.$_J:c.$_J:a.$_J>c.$_J?a.$_J:c.$_J,f=b.$BK>a.$BK?b.$BK>c.$BK?b.$BK:c.$BK:a.$BK>c.$BK?a.$BK:c.$BK,e=32767*((b.$_J<a.$_J?b.$_J<c.$_J?b.$_J:c.$_J:a.$_J<c.$_J?a.$_J:
c.$_J)-this.$iT)/this.$jL|0,g=32767*((b.$BK<a.$BK?b.$BK<c.$BK?b.$BK:c.$BK:a.$BK<c.$BK?a.$BK:c.$BK)-this.$jT)/this.$jL|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,g=(g|g<<8)&16711935,g=(g|g<<4)&252645135,g=(g|g<<2)&858993459,e=(e|e<<1)&1431655765|((g|g<<1)&1431655765)<<1,d=32767*(d-this.$iT)/this.$jL|0,f=32767*(f-this.$jT)/this.$jL|0,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,f=(f|f<<8)&16711935,f=(f|f<<4)&252645135,f=(f|f<<2)&858993459,d=(d|d<<1)&1431655765|
((f|f<<1)&1431655765)<<1,f=a.$ZT;null!=f&&f.$dT<=d;){if(f!=a.$kO&&f!=a.next)var g=b.$_J,k=b.$BK,l=a.$_J,m=a.$BK,n=c.$_J,p=c.$BK,q=f.$_J,r=f.$BK,g=0<=(n-q)*(k-r)-(g-q)*(p-r)&&0<=(g-q)*(m-r)-(l-q)*(k-r)?0<=(l-q)*(p-r)-(n-q)*(m-r):!1;else g=!1;g?(g=f.$kO,k=f.next,g=0<=(f.$BK-g.$BK)*(k.$_J-f.$_J)-(f.$_J-g.$_J)*(k.$BK-f.$BK)):g=!1;if(g)return!1;f=f.$ZT}for(f=a.$aT;null!=f&&f.$dT>=e;){f!=a.$kO&&f!=a.next?(d=b.$_J,g=b.$BK,k=a.$_J,l=a.$BK,m=c.$_J,n=c.$BK,p=f.$_J,q=f.$BK,d=0<=(m-p)*(g-q)-(d-p)*(n-q)&&0<=(d-
p)*(l-q)-(k-p)*(g-q)?0<=(k-p)*(n-q)-(m-p)*(l-q):!1):d=!1;d?(d=f.$kO,g=f.next,d=0<=(f.$BK-d.$BK)*(g.$_J-f.$_J)-(f.$_J-d.$_J)*(g.$BK-f.$BK)):d=!1;if(d)return!1;f=f.$aT}return!0},$wT:function(a){for(var b=a;;){var c=b.$kO,d=b.next.next,f;f=b.next;if(0<(b.$BK-c.$BK)*(f.$_J-b.$_J)-(b.$_J-c.$_J)*(f.$BK-b.$BK)!=0<(b.$BK-c.$BK)*(d.$_J-b.$_J)-(b.$_J-c.$_J)*(d.$BK-b.$BK)&&0<(d.$BK-f.$BK)*(c.$_J-d.$_J)-(d.$_J-f.$_J)*(c.$BK-d.$BK)!=0<(d.$BK-f.$BK)*(b.$_J-d.$_J)-(d.$_J-f.$_J)*(b.$BK-d.$BK)){f=c.$kO;var e=c.next;
0>(c.$BK-f.$BK)*(e.$_J-c.$_J)-(c.$_J-f.$_J)*(e.$BK-c.$BK)?(f=c.next,0<=(d.$BK-c.$BK)*(f.$_J-d.$_J)-(d.$_J-c.$_J)*(f.$BK-d.$BK)?(f=c.$kO,f=0<=(f.$BK-c.$BK)*(d.$_J-f.$_J)-(f.$_J-c.$_J)*(d.$BK-f.$BK)):f=!1):(f=c.$kO,0>(d.$BK-c.$BK)*(f.$_J-d.$_J)-(d.$_J-c.$_J)*(f.$BK-d.$BK)?f=!0:(f=c.next,f=0>(f.$BK-c.$BK)*(d.$_J-f.$_J)-(f.$_J-c.$_J)*(d.$BK-f.$BK)))}else f=!1;f?(f=d.$kO,e=d.next,0>(d.$BK-f.$BK)*(e.$_J-d.$_J)-(d.$_J-f.$_J)*(e.$BK-d.$BK)?(f=d.next,0<=(c.$BK-d.$BK)*(f.$_J-c.$_J)-(c.$_J-d.$_J)*(f.$BK-c.$BK)?
(f=d.$kO,f=0<=(f.$BK-d.$BK)*(c.$_J-f.$_J)-(f.$_J-d.$_J)*(c.$BK-f.$BK)):f=!1):(f=d.$kO,0>(c.$BK-d.$BK)*(f.$_J-c.$_J)-(c.$_J-d.$_J)*(f.$BK-c.$BK)?f=!0:(f=d.next,f=0>(f.$BK-d.$BK)*(c.$_J-f.$_J)-(f.$_J-d.$_J)*(c.$BK-f.$BK)))):f=!1;f&&(this.$fT.push(c.$cT),this.$fT.push(b.$cT),this.$fT.push(d.$cT),b.next.$kO=b.$kO,b.$kO.next=b.next,null!=b.$aT&&(b.$aT.$ZT=b.$ZT),null!=b.$ZT&&(b.$ZT.$aT=b.$aT),a=b.next,a.next.$kO=a.$kO,a.$kO.next=a.next,null!=a.$aT&&(a.$aT.$ZT=a.$ZT),null!=a.$ZT&&(a.$ZT.$aT=a.$aT),b=a=
d);b=b.next;if(b==a)break}return b},$xT:function(a){for(var b=a;;){for(var c=b.next.next;c!=b.$kO;){if(b.$cT!=c.$cT&&this.$0T(b,c)){a=this.$yT(b,c);b=this.$qT(b,b.next);a=this.$qT(a,a.next);this.$tT(b);this.$tT(a);return}c=c.next}b=b.next;if(b==a)break}},$yT:function(a,b){var c=a.$cT,d=a.$_J,f=a.$BK,e=this.$gT;null==e?(e=new ib,e.$bT=this.$hT,this.$hT=e):this.$gT=e.next;e.$cT=c;e.$dT=-1;e.$_J=d;e.$BK=f;e.next=null;e.$kO=null;e.$eT=!1;e.$aT=null;e.$ZT=null;var c=e,d=b.$cT,f=b.$_J,e=b.$BK,g=this.$gT;
null==g?(g=new ib,g.$bT=this.$hT,this.$hT=g):this.$gT=g.next;g.$cT=d;g.$dT=-1;g.$_J=f;g.$BK=e;g.next=null;g.$kO=null;g.$eT=!1;g.$aT=null;g.$ZT=null;d=g;f=a.next;e=b.$kO;a.next=b;b.$kO=a;c.next=f;f.$kO=c;d.next=c;c.$kO=d;e.next=d;d.$kO=e;return d},$0T:function(a,b){if(a.$_J!=b.$_J||a.$BK!=b.$BK){var c;if(a.next.$cT==b.$cT||a.$kO.$cT==b.$cT||this.$2T(a,b))c=!1;else{c=a.$kO;var d=a.next;0>(a.$BK-c.$BK)*(d.$_J-a.$_J)-(a.$_J-c.$_J)*(d.$BK-a.$BK)?(c=a.next,0<=(b.$BK-a.$BK)*(c.$_J-b.$_J)-(b.$_J-a.$_J)*(c.$BK-
b.$BK)?(c=a.$kO,c=0<=(c.$BK-a.$BK)*(b.$_J-c.$_J)-(c.$_J-a.$_J)*(b.$BK-c.$BK)):c=!1):(c=a.$kO,0>(b.$BK-a.$BK)*(c.$_J-b.$_J)-(b.$_J-a.$_J)*(c.$BK-b.$BK)?c=!0:(c=a.next,c=0>(c.$BK-a.$BK)*(b.$_J-c.$_J)-(c.$_J-a.$_J)*(b.$BK-c.$BK)))}c?(c=b.$kO,d=b.next,0>(b.$BK-c.$BK)*(d.$_J-b.$_J)-(b.$_J-c.$_J)*(d.$BK-b.$BK)?(c=b.next,0<=(a.$BK-b.$BK)*(c.$_J-a.$_J)-(a.$_J-b.$_J)*(c.$BK-a.$BK)?(c=b.$kO,c=0<=(c.$BK-b.$BK)*(a.$_J-c.$_J)-(c.$_J-b.$_J)*(a.$BK-c.$BK)):c=!1):(c=b.$kO,0>(a.$BK-b.$BK)*(c.$_J-a.$_J)-(a.$_J-b.$_J)*
(c.$BK-a.$BK)?c=!0:(c=b.next,c=0>(c.$BK-b.$BK)*(a.$_J-c.$_J)-(c.$_J-b.$_J)*(a.$BK-c.$BK)))):c=!1;return c?this.$1T(a,b):!1}return!0},$1T:function(a,b){for(var c=a,d=!1,f=(a.$_J+b.$_J)/2,e=(a.$BK+b.$BK)/2;c.$BK>e!=c.next.$BK>e&&f<(c.next.$_J-c.$_J)*(e-c.$BK)/(c.next.$BK-c.$BK)+c.$_J&&(d=!d),c=c.next,c!=a;);return d},$2T:function(a,b){for(var c=a;;){var d;c.$cT!=a.$cT&&c.next.$cT!=a.$cT&&c.$cT!=b.$cT&&c.next.$cT!=b.$cT?(d=c.next,d=0<(d.$BK-c.$BK)*(a.$_J-d.$_J)-(d.$_J-c.$_J)*(a.$BK-d.$BK)!=0<(d.$BK-
c.$BK)*(b.$_J-d.$_J)-(d.$_J-c.$_J)*(b.$BK-d.$BK)?0<(b.$BK-a.$BK)*(c.$_J-b.$_J)-(b.$_J-a.$_J)*(c.$BK-b.$BK)!=0<(b.$BK-a.$BK)*(d.$_J-b.$_J)-(b.$_J-a.$_J)*(d.$BK-b.$BK):!1):d=!1;if(d)return!0;c=c.next;if(c==a)break}return!1},$4T:function(a){for(var b=a;;){if(0>b.$dT){var c=32767*(b.$_J-this.$iT)/this.$jL|0,d=32767*(b.$BK-this.$jT)/this.$jL|0,c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,d=(d|d<<8)&16711935,d=(d|d<<4)&252645135,d=(d|d<<2)&858993459,d=(d|d<<1)&1431655765;
b.$dT=c|d<<1}b.$aT=b.$kO;b=b.$ZT=b.next;if(b==a)break}b.$aT.$ZT=null;b.$aT=null;this.$5T(b)},$5T:function(a){for(var b,c,d,f,e,g,k,l=1;;){b=a;f=a=null;for(e=0;null!=b;){++e;c=b;d=g=0;for(k=l;d<k&&(d++,++g,c=c.$ZT,null!=c););for(k=l;0<g||0<k&&null!=c;)0==g?(d=c,c=c.$ZT,--k):0==k||null==c?(d=b,b=b.$ZT,--g):b.$dT<=c.$dT?(d=b,b=b.$ZT,--g):(d=c,c=c.$ZT,--k),null!=f?f.$ZT=d:a=d,d.$aT=f,f=d;b=c}f.$ZT=null;l*=2;if(!(1<e))break}return a},__class__:Ce};var jb=function(a,b,c,d,f,e){this.footstepsVolume=1;this.facingRight=
!0;this.walking=this.walkingOff=!1;this.maxDogPaths=8;this.shooTimer=this.minHappy=this.goalIndex=0;this.restockTime=1.2;this.walkOffSpeed=150;this.standardWalkSpeed=this.walkSpeed=0.3;this.customerReady=!1;this.carrying="";this.mode="IDLE";this.facingLeftEnds=[127,131,155,159,295,300,323,328,463,468,491,496,0,28,56,84,112,140,168,196,224,252,280,308,336,364,392,420,448,476,504,532,560];this.facingRightEnds=[113,128,141,157,281,296,309,324,449,464,477,493,27,55,83,111,139,167,195,223,251,279,307,
335,363,391,419,447,475,503,531,559,587];this.spend=100;this.happyThreshold=40;r.call(this);this.x=d;this.y=f;this.offScreenX=d-75;this.charName=a;this.listLength=b;this.spend=30*this.listLength;null!=c&&(this.meter=c);switch(this.charName){case "customer0":this.charName="customer1";this.minHappy=20;this.happiness=60;this.grumpiness=0.2;this.meter.$BF[33].init(this.happiness);break;case "customer1":this.happiness=80;this.grumpiness=0.2;this.meter.$BF[33].init(this.happiness);break;case "customer2":this.happiness=
60;this.grumpiness=0.3;this.walkSpeed=0.65;this.meter.$BF[33].init(this.happiness);break;case "customer3":this.happiness=60;this.grumpiness=0.3;this.walkSpeed=0.4;this.meter.$BF[33].init(this.happiness);break;case "customer4":this.happiness=80;this.grumpiness=0.2;this.walkSpeed=0.4;this.meter.$BF[33].init(this.happiness);break;case "customer5":this.happiness=60;this.grumpiness=0.3;this.walkSpeed=0.4;this.meter.$BF[33].init(this.happiness);break;case "customer6":this.happiness=60,this.grumpiness=0.2,
this.walkSpeed=0.4,this.meter.$BF[33].init(this.happiness)}4<g.wave&&(this.grumpiness+=0.1);6<g.wave&&(this.grumpiness+=0.1,k.coinFlip()&&(this.happiness-=10));8<g.wave&&(this.grumpiness+=0.1,k.coinFlip()&&(this.happiness-=10));10<g.wave&&(this.grumpiness+=0.1,k.coinFlip()&&(this.happiness-=10));this.walkOnSpeed=g.walkOnSpeed/this.standardWalkSpeed*this.walkSpeed;this.callback=e};l["project.Character"]=jb;jb.__name__=["project","Character"];jb.__super__=r;jb.prototype=s(r.prototype,{get_entitySlot:function(){return 19},
stop:function(){null!=this.footsteps&&this.footsteps.dispose()},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];switch(this.charName){case "bobby":this.shadow=(new m).add(new V("game/bobby","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/bobby","idle",0,0));this.owner.addChild(this.player);this.walkSpeed=0.18;this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.footsteps=
g.pack.getSound("audio/footstep2").loop();this.footsteps.volume.set__(0);break;case "customer1":this.shadow=(new m).add(new V("game/customer1","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/customer1","walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "customer2":this.shadow=(new m).add(new V("game/customer2","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/customer2",
"walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "customer3":this.shadow=(new m).add(new V("game/customer3","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/customer3","walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "customer4":this.shadow=(new m).add(new V("game/customer4","shadow",0,0));this.owner.addChild(this.shadow);
this.player=(new m).add(new V("game/customer4","walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "customer5":this.shadow=(new m).add(new V("game/customer5","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/customer5","walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "customer6":this.shadow=(new m).add(new V("game/customer6",
"shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/customer6","walk_happy",0,0));this.owner.addChild(this.player);this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.generateList();break;case "dog":this.shadow=(new m).add(new V("game/dog","shadow",0,0));this.owner.addChild(this.shadow);this.player=(new m).add(new V("game/dog","walk",0,0));this.owner.addChild(this.player);this.walkSpeed=0.5;this.facingRight=!1;this.thisSprite.scaleX.set__(-1);this.player.$BF[1].scaleX.set__(-1);
this.happiness=this.dogPaths=0;this.walkOn();break;case "ronnie":this.shadow=(new m).add(new V("game/ronnie","shadow",0,0)),this.owner.addChild(this.shadow),this.player=(new m).add(new V("game/ronnie","idle",0,0)),this.owner.addChild(this.player),this.basket_shadow=(new m).add(new V("game/ronnie","basket_shadow",65,10)),this.owner.addChild(this.basket_shadow),this.basket=(new m).add(new V("game/ronnie","basket",65,10)),this.owner.addChild(this.basket),this.walkSpeed=0.2,this.facingRight=!1,this.thisSprite.scaleX.set__(-1),
this.footsteps=g.pack.getSound("audio/footstep1").loop(),this.footsteps.volume.set__(0)}-1!=this.charName.indexOf("cust")&&this.walkOn()},faceRight:function(a){a?(this.facingRight=!0,this.thisSprite.scaleX.set__(1)):(this.facingRight=!1,this.thisSprite.scaleX.set__(-1))},idle:function(){-1!=this.charName.indexOf("cust")?this.happiness>this.happyThreshold?this.player.$BF[23].loop("idle_happy"):this.player.$BF[23].loop("idle"):this.player.$BF[23].loop("idle");this.mode="IDLE";null!=this.footsteps&&
this.footsteps.volume.set__(0)},walkOn:function(){var a=this;this.thisSprite.alpha.animate(0,1,0.5);"dog"==this.charName&&(this.walkOnSpeed=g.walkOnSpeedDog);var b=new C;b.run(new D([new u(this.walkOnSpeed),new t(function(){"dog"==a.charName?a.callback(a.owner,"ENTER_STORE_DOG"):a.callback(a.owner,"ENTER_STORE")})]));this.owner.add(b)},walkedOn:function(){"dog"==this.charName?this.player.$BF[23].loop("idle"):(this.hud.$BF[34].activate(),this.meter.$BF[33].activate(),this.meter.$BF[1].setXY(this.thisSprite.x.$hF,
this.thisSprite.y.$hF),-1!=this.charName.indexOf("cust")?this.happiness>this.happyThreshold?this.player.$BF[23].loop("idle_happy"):this.player.$BF[23].loop("idle"):this.player.$BF[23].loop("idle"),this.mode="IDLE",this.customerReady=!0)},walkOff:function(){this.faceRight(!0);this.walkOffAngle=k.randomNumberFloat(-0.5,0.5);this.walkingOff=!0;"dog"==this.charName?this.player.$BF[23].loop("walk"+this.carrying):(this.customerReady=!1,0<this.happiness?this.player.$BF[23].loop("walk_basket"):this.player.$BF[23].loop("walk"),
this.meter=null)},leave:function(){this.mode="LEAVING";1<this.happiness?this.player.$BF[23].loop("walk_basket"):"dog"==this.charName?this.player.$BF[23].loop("walk"+this.carrying):this.player.$BF[23].loop("walk");this.customerReady=!1;"dog"!=this.charName&&this.releaseProductsToPool()},checkOut:function(){this.mode="REGISTER";this.customerReady=!1;this.meter=null;this.player.$BF[23].loop("walk_basket");this.releaseProductsToPool()},standStill:function(){this.mode="STANDSTILL";this.walking=!1;-1!=
this.charName.indexOf("cust")?this.happiness>this.happyThreshold?this.player.$BF[23].loop("idle_happy"):this.player.$BF[23].loop("idle"):this.player.$BF[23].loop("idle");this.path=[];null!=this.footsteps&&this.footsteps.volume.set__(0)},follow:function(){"STANDSTILL"!=this.mode&&(-1!=this.charName.indexOf("cust")?this.happiness>this.happyThreshold?this.player.$BF[23].loop("walk_happy"):this.player.$BF[23].loop("walk"):this.player.$BF[23].loop("walk"),this.mode="FOLLOW")},endFollow:function(){-1!=
this.charName.indexOf("cust")?this.happiness>this.happyThreshold?this.player.$BF[23].loop("idle_happy"):this.player.$BF[23].loop("idle"):this.player.$BF[23].loop("idle");this.mode="IDLE"},releaseProductsToPool:function(){for(var a=0,b=this.shoppingList;a<b.length;){var c=b[a];++a;g.addToPool(c.name)}this.shoppingList=[]},setHud:function(a){this.hud=a},setPath:function(a,b){this.goalIndex=b;this.path=a;this.walking=!0;null!=this.basket&&"ronnie"==this.charName?(this.basket_shadow.$BF[1].set_visible(!1),
this.basket.$BF[1].set_visible(!1),this.player.$BF[23].loop("run_basket")):"bobby"==this.charName?this.player.$BF[23].loop("run"):"dog"==this.charName?this.player.$BF[23].loop("walk"+this.carrying):this.charName.indexOf("cust");this.path=this.smoothPath(this.path);-1==this.charName.indexOf("cust")&&"STANDSTILL"==this.mode||this.followPath();null!=this.footsteps&&this.footsteps.volume.set__(this.footstepsVolume)},smoothPath:function(a){for(var b=1,c=a.length-1;b<c;){var d=b++;a[d-1].x==a[d+1].x&&(a[d].x=
a[d-1].x);a[d-1].y==a[d+1].y&&(a[d].y=a[d-1].y)}return a},followPath:function(){var a=this;if(1>this.path.length){this.walking=!1;if(null!=this.basket&&"ronnie"==this.charName){if(this.basket_shadow.$BF[1].set_visible(!0),this.basket.$BF[1].set_visible(!0),this.player.$BF[23].loop("idle"),this.basket_shadow.$BF[1].x.set__(65),this.basket.$BF[1].x.set__(65),this.facingRight&&-1!=this.facingRightEnds.indexOf(this.goalIndex)||!this.facingRight&&-1!=this.facingLeftEnds.indexOf(this.goalIndex))this.basket_shadow.$BF[1].x.set__(-65),
this.basket.$BF[1].x.set__(-65)}else"dog"==this.charName?this.player.$BF[23].loop("idle"+this.carrying):"bobby"==this.charName&&this.player.$BF[23].loop("idle");this.callback(this.owner,"END_WALK");null!=this.footsteps&&this.footsteps.volume.set__(0);var b=0.4*Math.round(this.spend/20);if("REGISTER"==this.mode){this.player.$BF[23].loop("idle_basket");var c=new C;c.run(new D([new u(0.5),new t(function(){a.callback(a.owner,"REGISTER")}),new u(b),new t(function(){a.callback(a.owner,"PAID")})]));this.player.add(c)}else this.callback(this.owner,
this.mode)}else c=this.path.pop(),b=k.vectorDistance(this.thisSprite.x.$hF,c.x,this.thisSprite.y.$hF,c.y)/g.tileSize,this.thisSprite.x.animateTo(c.x,this.walkSpeed*b),this.thisSprite.y.animateTo(c.y,this.walkSpeed*b),this.facingRight&&c.x<this.thisSprite.x.$hF?(this.facingRight=!1,this.thisSprite.scaleX.set__(-1)):!this.facingRight&&c.x>this.thisSprite.x.$hF&&(this.facingRight=!0,this.thisSprite.scaleX.set__(1)),c=new C,c.run(new D([new u(this.walkSpeed*b),new t(function(){a.followPath()})])),this.player.add(c)},
makeHappy:function(a){-99==a&&(a=(100-this.happiness)/2|0);0>this.happiness&&(this.happiness=0);var b=!1;this.happiness<=this.happyThreshold&&this.happiness+a>this.happyThreshold&&(b=!0);b&&(this.walking?this.player.$BF[23].loop("walk_happy"):this.player.$BF[23].loop("idle_happy"));this.happiness+=a;100<this.happiness&&(this.happiness=100);this.meter.$BF[33].update(this.happiness)},onUpdate:function(a){this.shooTimer-=a;null!=this.meter&&null!=this.meter.$BF[1]&&(this.meter.$BF[1].x.set__(this.thisSprite.x.$hF),
this.meter.$BF[1].y.set__(this.thisSprite.y.$hF));if(null!=this.meter&&this.customerReady&&"LEAVING"!=this.mode&&!g.hectorTalking){var b=!1;this.happiness>this.happyThreshold&&this.happiness-this.grumpiness*a<=this.happyThreshold&&(b=!0);b&&(this.walking?this.player.$BF[23].loop("walk"):this.player.$BF[23].loop("idle"));this.happiness-=this.grumpiness*a;this.happiness<this.minHappy&&(this.happiness=this.minHappy);this.meter.$BF[33].update(this.happiness);this.hud.$BF[34].update(this.happiness);0>=
this.happiness&&(this.happiness=0,this.callback(this.owner,"UNHAPPY_CUSTOMER"))}this.walkingOff&&(b=this.thisSprite.x,b.set__(b.$hF+this.walkOffSpeed*a),this.thisSprite.x.$hF>this.offScreenX&&(b=this.thisSprite.y,b.set__(b.$hF+this.walkOffSpeed*a*this.walkOffAngle)),this.thisSprite.x.$hF>this.offScreenX+800&&(b=this.thisSprite.alpha,b.set__(b.$hF-1.5*a),0>=this.thisSprite.alpha.$hF&&(this.walkingOff=!1,"dog"==this.charName?this.callback(this.owner,"REMOVE_DOG"):this.callback(this.owner,"REMOVE"))))},
generateList:function(){this.shoppingList=[];for(var a=0,b=this.listLength;a<b;)a++,this.shoppingList.push(this.randomItem())},randomItem:function(){return g.getItemFromPool()},getList:function(){return this.shoppingList},crossItems:function(a){a=0;for(var b=this.shoppingList;a<b.length;){var c=b[a];++a;if(!c.fulfilled)for(var d=0,f=this.shoppingList;d<f.length;){var e=f[d];++d;e.fulfilled&&c.productType==e.productType&&(c.fulfilled=!0,this.makeHappy(35))}}},isFulfilled:function(){for(var a=0,b=this.shoppingList;a<
b.length;){var c=b[a];++a;if(!c.fulfilled)return!1}return!0},fulfillOrder:function(){for(var a=0,b=this.shoppingList;a<b.length;){var c=b[a];++a;c.fulfilled=!0}},restock:function(a){null==a&&(a=!0);var b=this;"bobby"==this.charName&&(a?(this.player.$BF[23].loop("restock"),a=new C,a.run(new D([new u(this.restockTime),new t(function(){b.callback(b.owner,b.mode+"_END");b.restock(!1)}),new u(1),new t(function(){b.callback(b.owner,"BOBBY_TASKEND")})])),this.player.add(a),this.playSound("stock_shelf")):
(this.player.$BF[23].loop("idle"),this.mode="IDLE"))},clean:function(a){null==a&&(a=!0);var b=this;"bobby"==this.charName&&(a?(this.mode="CLEAN",this.player.$BF[23].loop("clean"),this.playSound("mop_floor_loop"),a=new C,a.run(new D([new u(this.restockTime),new t(function(){b.callback(b.owner,b.mode+"_END");b.clean(!1)}),new u(0.5),new t(function(){b.callback(b.owner,"BOBBY_TASKEND")})])),this.player.add(a)):(this.player.$BF[23].loop("idle"),this.mode="IDLE"))},win:function(){var a=this;if("ronnie"==
this.charName){this.basket_shadow.$BF[1].set_visible(!0);this.basket.$BF[1].set_visible(!0);this.player.$BF[23].loop("win");this.mode="WIN";var b=new C;b.run(new D([new u(2.5),new t(function(){a.player.$BF[23].loop("idle");a.mode="IDLE"})]));this.player.add(b)}},lose:function(){"ronnie"==this.charName&&(this.basket_shadow.$BF[1].set_visible(!0),this.basket.$BF[1].set_visible(!0),this.player.$BF[23].loop("lose"))},dogPickup:function(a){a=2;this.carrying=null==a?"null":""+a;this.player.$BF[23].loop("walk"+
this.carrying)},ugh:function(){var a=this;switch(this.charName){case "customer1":this.playSound("female_customer_UGH");break;case "customer2":this.playSound("male_customer_UGH");break;case "customer3":this.playSound("male_customer_UGH");break;case "customer4":this.playSound("male_customer_UGH");break;case "customer5":this.playSound("female_customer_UGH");break;case "customer6":this.playSound("female_customer_UGH")}var b=new C;b.run(new D([new u(0.5),new t(function(){a.playSound("customer_lose")})]));
this.shadow.add(b)},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},makeUnhappy:function(){this.happiness=2},__class__:jb});var g=function(){};l["project.Ctx"]=g;g.__name__=["project","Ctx"];g.initFonts=function(){g.translations=new lb(x.parse(g.configPack.getFile("translation.xml").toString()).firstElement());g.tipFont=new ha(g.pack,"fonts/vts_32");g.helpFont=new ha(g.pack,"fonts/vts28");g.headerFont=new ha(g.pack,"fonts/vts_32");g.scoreFont=new ha(g.pack,"fonts/asphalt_36");g.goFont=
new ha(g.pack,"fonts/goFont");g.chunkyFont=new ha(g.pack,"fonts/asphalt_36");g.vo||(g.helpFont=new ha(g.pack,"fonts/int20"),g.tipFont=new ha(g.pack,"fonts/int24"),g.headerFont=new ha(g.pack,"fonts/int28"),g.titleFont=new ha(g.pack,"fonts/intTitle"),g.chunkyFont=new ha(g.pack,"fonts/intTitle"),g.goFont=new ha(g.pack,"fonts/goFontInt"))};g.addToPool=function(a){g.productPool.push(a)};g.getItemFromPool=function(){if(1==g.inTutorial){if(1==g.inTutorial){var a={productType:y.CHIPS,name:"chips",fulfilled:!1};
g.inTutorial=2;return a}}else if(0<g.inTutorial)switch(g.inTutorial){case 2:return a={productType:y.CARROT,name:"carrot",fulfilled:!1},g.inTutorial=3,a;case 3:return a={productType:y.TOMATO,name:"tomato",fulfilled:!1},g.inTutorial=0,a}else switch(g.productPool=k.shuffle(g.productPool),g.productPool.shift()){case "can":return{productType:y.CAN,name:"can",fulfilled:!1};case "carrot":return{productType:y.CARROT,name:"carrot",fulfilled:!1};case "chips":return{productType:y.CHIPS,name:"chips",fulfilled:!1};
case "cookies":return{productType:y.COOKIES,name:"cookies",fulfilled:!1};case "crackers":return{productType:y.CRACKERS,name:"crackers",fulfilled:!1};case "dogfood":return{productType:y.DOGFOOD,name:"dogfood",fulfilled:!1};case "mango":return{productType:y.MANGO,name:"mango",fulfilled:!1};case "pancakes":return{productType:y.PANCAKES,name:"pancakes",fulfilled:!1};case "popcorn":return{productType:y.POPCORN,name:"popcorn",fulfilled:!1};case "rice":return{productType:y.RICE,name:"rice",fulfilled:!1};
case "sauce":return{productType:y.SAUCE,name:"sauce",fulfilled:!1};case "tomato":return{productType:y.TOMATO,name:"tomato",fulfilled:!1}}return null};var Bd=function(a,b,c,d){this.selected=!1;this.active=!0;this.happiness=0;r.call(this);this.x=b;this.y=c;this.customer=a;this.clicked=d};l["project.CustomerHud"]=Bd;Bd.__name__=["project","CustomerHud"];Bd.__super__=r;Bd.prototype=s(r.prototype,{get_entitySlot:function(){return 34},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));
this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.frame=new m;k.createImageSprite(this.owner,this.frame,"hud/BTN_client_inactive",!0,0,0);var a=new m;k.createImageSprite(this.owner,a,"hud/"+this.customer.$BF[19].charName+"_head",!0,0,0);a.$BF[1].set_pointerEnabled(!1);this.owner.$BF[1].alpha.set__(0);this.connect1(n.$2F.$KF.down,I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove))},activate:function(){M.spawn(this.owner,0.2,0.3,0.3)},setBad:function(){this.happiness=
-999;var a=this.frame.$BF[1];(a instanceof G?a:null).texture=g.pack.getTexture("hud/BTN_client_inactive");this.frame.$BF[1].alpha.animateTo(0.6,0.5);a=new m;k.createImageSprite(this.owner,a,"hud/cross",!0,0,0);M.spawn(a,0,0.3,0.3)},setGood:function(){this.happiness=999;this.frame.$BF[1].alpha.animateTo(0.6,0.5);var a=new m;k.createImageSprite(this.owner,a,"hud/tick",!0,0,0);M.spawn(a,0,0.3,0.3)},remove:function(a){null==a&&(a=!1);var b=this;this.thisSprite.alpha.animateTo(0,0.5);a&&(a=new C,a.run(new D([new u(0.5),
new t(function(){b.owner.dispose()})])),this.owner.add(a))},update:function(a){this.happiness=a|0},select:function(){var a=this.frame.$BF[1];(a instanceof G?a:null).texture=g.pack.getTexture("hud/BTN_client_active")},deselect:function(){var a=this.frame.$BF[1];(a instanceof G?a:null).texture=g.pack.getTexture("hud/BTN_client_inactive")},onPointerDown:function(a){a.hit==this.frame.$BF[1]&&this.active&&0<=this.happiness&&(this.clicked(this.customer),this.selected=!0)},onPointerMove:function(a){!this.selected&&
0<=this.happiness&&!this.active&&k.rolloverImage(this.frame,"hud/BTN_client_inactive","hud/BTN_client_inactive_rollover",a)},__class__:Bd});var Cd=function(a,b,c,d,f,e){r.call(this);this.x=a;this.y=b;this.score=c;this.happyCustomers=d;this.unhappyCustomers=f;this.callback=e};l["project.Debrief"]=Cd;Cd.__name__=["project","Debrief"];Cd.__super__=r;Cd.prototype=s(r.prototype,{get_entitySlot:function(){return 29},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,
this.y);this.thisSprite=this.owner.$BF[1];this.frame=new m;k.createImageSprite(this.owner,this.frame,"game/update_frame",!0,0,0);var a=new m;k.createImageSprite(this.owner,a,"game/update_header",!0,0,-195);a=new m;k.createXMLSprite(this.owner,a,g.headerFont,"Center",0,-220,g.translations.node.resolve("debrief"));a=new m;k.createImageSprite(this.owner,a,"hud/icon_register",!0,-80,-70);a=new m;k.createTextSprite(this.owner,a,g.scoreFont,"Left",-30,-85,"+"+this.score);for(var a=[],b=0,c=this.happyCustomers;b<
c.length;){var d=c[b];++b;a.push(d)}b=0;for(c=this.unhappyCustomers;b<c.length;)d=c[b],++b,a.push(d);this.bonus=10*a.length;0==this.unhappyCustomers.length&&(this.bonus+=25);b=-(a.length-1)/2*110-10;for(d=c=0;d<a.length;){var f=a[d];++d;var e=new m;k.createImageSprite(this.owner,e,"screens/cust"+f,!0,b+110*c,25);var l=new m;-1!=this.happyCustomers.indexOf(f)?k.createImageSprite(this.owner,l,"hud/tick",!0,b+110*c+30,30):k.createImageSprite(this.owner,l,"hud/cross",!0,b+110*c+30,30);M.spawn(e,0.5+0.3*
c,0.3,0.3);M.spawn(l,0.7+0.3*a.length+0.3*c,0.3,0.3);++c}a=new m;g.vo?k.createXMLSprite(this.owner,a,g.scoreFont,"Center",0,80,g.translations.node.resolve("bonus")):k.createXMLSprite(this.owner,a,g.headerFont,"Center",0,80,g.translations.node.resolve("bonus"));b=a.$BF[1];b=b instanceof K?b:null;b.set_text(b.$oI+N.string(this.bonus));M.spawn(a,2.5,0.3,0.3);this.closeBtn=new m;k.createImageSprite(this.owner,this.closeBtn,"buttons/BTN_continue",!0,0,190);M.spawn(this.closeBtn,3,0.3,0.3);this.connect1(n.$2F.$KF.down,
I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove))},close:function(){this.callback(this.bonus)},onPointerDown:function(a){a.hit==this.closeBtn.$BF[1]&&this.close()},onPointerMove:function(a){k.rolloverImage(this.closeBtn,"buttons/BTN_continue","buttons/BTN_continue_rollover",a)},__class__:Cd});var O=function(a,b,c){this.gravity=900;r.call(this);this.x=b;this.y=c;this.product=a};l["project.Debris"]=O;O.__name__=["project","Debris"];O.__super__=r;O.prototype=s(r.prototype,
{get_entitySlot:function(){return 32},onAdded:function(){var a=this;this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.item=new m;k.createImageSprite(this.owner,this.item,"game/"+this.product,!0,0,-50);k.coinFlip()?this.dx=k.randomNumber(-300,-50):this.dx=k.randomNumber(50,300);this.dy=0;k.coinFlip()&&(this.dy=k.randomNumber(-50,10));k.coinFlip()?this.dr=
k.randomNumber(100,300):this.dr=k.randomNumber(-300,-100);var b=new C;b.run(new D([new u(0.5),new t(function(){a.thisSprite.alpha.animateTo(0,0.5)}),new u(1),new t(function(){a.owner.dispose()})]));this.item.add(b)},onUpdate:function(a){var b=this.item.$BF[1].x;b.set__(b.$hF+this.dx*a);b=this.item.$BF[1].y;b.set__(b.$hF+this.dy*a);b=this.item.$BF[1].rotation;b.set__(b.$hF+this.dr*a);this.dy+=this.gravity*a},__class__:O});var Dd=function(a,b,c,d){r.call(this);this.x=b;this.y=c;this.item=a;this.callback=
d};l["project.DroppedItem"]=Dd;Dd.__name__=["project","DroppedItem"];Dd.__super__=r;Dd.prototype=s(r.prototype,{get_entitySlot:function(){return 37},onAdded:function(){var a=this;this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);var b=new m;k.createImageSprite(this.owner,b,"game/products/"+this.item,!0,0,-50);b.$BF[1].y.animateTo(0,0.3,H.sineIn);this.thisSprite.alpha.animate(0,
1,0.3);var c=new C;c.run(new D([new u(3),new t(function(){a.thisSprite.alpha.animateTo(0,1)}),new u(1),new t(function(){a.callback(a.owner);a.owner.dispose()})]));b.add(c)},__class__:Dd});var zb=function(a,b,c){this.full=!0;r.call(this);this.x=b;this.y=c;this.aisle=a};l["project.EndStack"]=zb;zb.__name__=["project","EndStack"];zb.__super__=r;zb.prototype=s(r.prototype,{get_entitySlot:function(){return 31},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();
this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.stack=new m;k.createImageSprite(this.owner,this.stack,"game/aisle_end"+this.aisle+"_full",!1,0,0)},smash:function(a){if(this.full){this.full=!1;this.playSound("dog_bark");this.playSound("aisle_impact");var b=this.stack.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/aisle_end"+this.aisle+"_smashed");switch(this.aisle){case 1:b=(new m).add(new O("debris1",55,90));this.owner.addChild(b);
b=(new m).add(new O("debris1",95,90));this.owner.addChild(b);b=(new m).add(new O("debris1",140,90));this.owner.addChild(b);b=(new m).add(new O("debris1",110,90));this.owner.addChild(b);b=(new m).add(new O("debris1",65,90));this.owner.addChild(b);b=(new m).add(new O("debris1",95,90));this.owner.addChild(b);b=(new m).add(new O("debris1",125,90));this.owner.addChild(b);b=(new m).add(new O("debris1",100,120));this.owner.addChild(b);b=(new m).add(new O("debris1",130,120));this.owner.addChild(b);b=(new m).add(new O("debris1",
139,150));this.owner.addChild(b);break;case 2:b=(new m).add(new O("debris2",55,90));this.owner.addChild(b);b=(new m).add(new O("debris2",95,90));this.owner.addChild(b);b=(new m).add(new O("debris2",140,90));this.owner.addChild(b);b=(new m).add(new O("debris2",110,90));this.owner.addChild(b);b=(new m).add(new O("debris2",65,90));this.owner.addChild(b);b=(new m).add(new O("debris2",95,90));this.owner.addChild(b);b=(new m).add(new O("debris2",125,90));this.owner.addChild(b);b=(new m).add(new O("debris2",
100,120));this.owner.addChild(b);b=(new m).add(new O("debris2",130,120));this.owner.addChild(b);b=(new m).add(new O("debris2",139,150));this.owner.addChild(b);break;case 3:b=(new m).add(new O("debris3",55,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",95,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",140,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",110,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",65,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",
95,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",125,90)),this.owner.addChild(b),b=(new m).add(new O("debris3",100,120)),this.owner.addChild(b),b=(new m).add(new O("debris3",130,120)),this.owner.addChild(b),b=(new m).add(new O("debris3",139,150)),this.owner.addChild(b)}var c=new m;a?k.createImageSprite(this.owner,c,"game/stack_burst",!0,35,190):k.createImageSprite(this.owner,c,"game/stack_burst",!0,160,190);c.$BF[1].setScale(0.3);c.$BF[1].scaleX.animateTo(1,0.15,H.sineOut);c.$BF[1].scaleY.animateTo(1,
0.15,H.sineOut);c.$BF[1].rotation.animate(-10,10,0.6,H.sineOut);a=new C;a.run(new D([new u(0.15),new t(function(){c.$BF[1].scaleX.animateTo(0.2,0.15*3,H.sineIn);c.$BF[1].scaleY.animateTo(0.2,0.15*3,H.sineIn);c.$BF[1].alpha.animateTo(0,0.15*3)}),new u(0.15*3),new t(function(){c.dispose()})]));c.add(a)}},fix:function(){if(!this.full){this.full=!0;var a=this.stack.$BF[1];(a instanceof G?a:null).texture=g.pack.getTexture("game/aisle_end"+this.aisle+"_full");return!0}return!1},playSound:function(a){this.sfx=
g.pack.getSound("audio/"+a).play()},__class__:zb});var Ed=function(a,b){r.call(this);this.x=a;this.y=b};l["project.Footprints"]=Ed;Ed.__name__=["project","Footprints"];Ed.__super__=r;Ed.prototype=s(r.prototype,{get_entitySlot:function(){return 36},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);var a=new m;k.createImageSprite(this.owner,
a,"game/footprints1",!0,2,0);var b=new m;k.createImageSprite(this.owner,b,"game/footprints2",!0,0,0);var c=new m;k.createImageSprite(this.owner,c,"game/footprints3",!0,0,0);var d=new m;k.createImageSprite(this.owner,d,"game/footprints3",!0,-65,0);a.$BF[1].alpha.set__(0);b.$BF[1].alpha.set__(0);c.$BF[1].alpha.set__(0);d.$BF[1].alpha.set__(0);var f=new C;f.run(new D([new u(0.05),new t(function(){a.$BF[1].alpha.animateTo(1,0.5)}),new u(0.5),new t(function(){b.$BF[1].alpha.animateTo(0.8,0.5)}),new u(0.5),
new t(function(){c.$BF[1].alpha.animateTo(0.5,0.5)}),new u(0.5),new t(function(){d.$BF[1].alpha.animateTo(0.2,0.5)})]));a.add(f)},__class__:Ed});var Fd=function(){this.debugText="";this.audioEnabled=!1;this.musicVolume=0.75;this.transitionTime=0.4;this.transitionColour=16777215;r.call(this)};l["project.Game"]=Fd;Fd.__name__=["project","Game"];Fd.__super__=r;Fd.prototype=s(r.prototype,{get_entitySlot:function(){return 16},onAdded:function(){n.$2F.$KF.down.connect(I(this,this.onPointerDown));n.$2F.$KF.up.connect(I(this,
this.onPointerUp));n.$2F.$KF.move.connect(I(this,this.onPointerMove));n.$2F.$MF.resize.connect(I(this,this.onResize));g.isMobile&&(n.$2F.$NF.up.connect(I(this,this.handleTouchUp)),n.$2F.$NF.down.connect(I(this,this.handleTouchDown)),n.$2F.$NF.move.connect(I(this,this.handleTouchMove)));n.$2F.getKeyboard().down.connect(I(this,this.keyDownHandler));n.$2F.getKeyboard().up.connect(I(this,this.keyUpHandler));this.myXML=new lb(x.parse(g.configPack.getFile("config.xml").toString()).firstElement());"YES"==
this.myXML.node.resolve("showFPS").get_innerData()?g.showFPS=!0:g.showFPS=!1;"YES"==this.myXML.node.resolve("testMode").get_innerData()?g.testMode=!0:g.testMode=!1;"YES"==this.myXML.node.resolve("showDebugInfo").get_innerData()?g.showDebugInfo=!0:g.showDebugInfo=!1;"YES"==this.myXML.node.resolve("english").get_innerData()?g.vo=!0:g.vo=!1;"YES"==this.myXML.node.resolve("alvin").get_innerData()?g.alvin=!0:g.alvin=!1;"YES"==this.myXML.node.resolve("powerRangers").get_innerData()?g.powerRangers=!0:g.powerRangers=
!1;"YES"==this.myXML.node.resolve("minimiseShoppingList").get_innerData()?g.minimiseShoppingList=!0:g.minimiseShoppingList=!1;g.minScaleSize=N.parseInt(this.myXML.node.resolve("scaleBelow").get_innerData());this.status_font=new ha(g.pack,"fonts/tinyfont");g.initFonts();this.screen=(new m).add(new S(16777215,g.staticWidth,g.staticHeight));n.root.addChild(this.screen);this.onResize();this.screen.dispose();this.homeScreen()},onPointerDown:function(a){switch(this.gameState){case "GAME":a.hit==this.pauseBtn.$BF[1]?
(this.pauseGame(!0,a),this.playSound("click")):a.hit==this.saleBtn.$BF[1]?(this.screen.$BF[17].skipSale(),this.playSound("click")):a.hit==this.tutorialBtn.$BF[1]&&(this.screen.$BF[17].skipTutorial(),this.playSound("click"));break;case "GAMEOVER":a.hit==this.homeBtn.$BF[1]?(null!=this.screen.$BF[11]&&this.screen.$BF[11].stopAll(),this.fadeOut(I(this,this.homeScreen)),this.playSound("click")):a.hit==this.startBtn.$BF[1]&&(null!=this.screen.$BF[11]&&this.screen.$BF[11].stopAll(),this.menuLoop.volume.animateTo(0,
0.3),this.fadeOut(I(this,this.startGame)),this.playSound("click"));break;case "HOME":null==this.menuLoop&&(this.menuLoop=g.pack.getSound("audio/CG_MercadoMayhem_Menu_v1").loop(),this.menuLoop.volume.set__(0)),this.menuLoop.volume.animateTo(this.musicVolume,0.5),a.hit==this.muteBtn.$BF[1]?(g.muted?(this.muteBtn.dispose(),this.muteBtn=new m,k.createImageSprite(this.screen,this.muteBtn,"buttons/BTN_sound_ON",!0,this.screenWidth-48,45),k.mute(!1)):(this.muteBtn.dispose(),this.muteBtn=new m,k.createImageSprite(this.screen,
this.muteBtn,"buttons/BTN_sound_OFF",!0,this.screenWidth-48,45),k.mute(!0)),k.alignRight(this.muteBtn)):(this.menuLoop.volume.animateTo(0,0.3),this.fadeOut(I(this,this.startGame))),this.playSound("click")}},onPointerUp:function(a){},onPointerMove:function(a){switch(this.gameState){case "GAME":k.rolloverImage(this.pauseBtn,"buttons/BTN_pause","buttons/BTN_pause_rollover",a);break;case "GAMEOVER":k.rolloverImage(this.startBtn,"buttons/BTN_replay","buttons/BTN_replay_rollover",a);k.rolloverImage(this.homeBtn,
"buttons/BTN_home","buttons/BTN_home_rollover",a);break;case "HOME":g.muted?k.rolloverImage(this.muteBtn,"buttons/BTN_sound_OFF","buttons/BTN_sound_OFF_rollover",a):k.rolloverImage(this.muteBtn,"buttons/BTN_sound_ON","buttons/BTN_sound_ON_rollover",a)}},homeScreen:function(){this.inPlay=!1;this.screen=(new m).add(new S(394758,960,560));n.root.addChild(this.screen);this.getScreenSize();var a=new m;k.createImageSprite(this.screen,a,"screens/bg",!1,-((1430-this.screenWidth)/2),this.screenHeight-768);
a=new m;k.createImageSprite(this.screen,a,"screens/title",!1,80,15);a=new m;k.createImageSprite(this.screen,a,"screens/ronnie",!0,this.screenWidth/2-50,this.screenHeight-150);a=new m;if(g.vo)k.createImageSprite(this.screen,a,"screens/click_tap_text",!0,this.screenWidth-225,this.screenHeight-25),k.alignRight(a);else{k.createImageSprite(this.screen,a,"blank",!0,this.screenWidth/2,this.screenHeight-20);var b=new m;g.isMobile?k.createXMLSprite(a,b,g.titleFont,"Center",0,-50,g.translations.node.resolve("tapPlay")):
k.createXMLSprite(a,b,g.titleFont,"Center",0,-50,g.translations.node.resolve("clickPlay"));k.pulseBtn(a,1.05,0.7)}k.pulseBtn(a,1.05,0.7);this.muteBtn=new m;g.muted?k.createImageSprite(this.screen,this.muteBtn,"buttons/BTN_sound_OFF",!0,this.screenWidth-48,45):k.createImageSprite(this.screen,this.muteBtn,"buttons/BTN_sound_ON",!0,this.screenWidth-48,45);k.alignRight(this.muteBtn);this.gameState="HOME";null==this.menuLoop&&(this.menuLoop=g.pack.getSound("audio/CG_MercadoMayhem_Menu_v1").loop(),this.menuLoop.volume.set__(0));
this.menuLoop.volume.animateTo(this.musicVolume,0.5);this.onResize();this.displayDebugInfo();this.fadeIn()},gameOverScreen:function(){this.inPlay=!1;this.screen=(new m).add(new S(394758,960,560));n.root.addChild(this.screen);this.getScreenSize();var a=new m;k.createImageSprite(this.screen,a,"screens/background",!1,-((1480-this.screenWidth)/2),this.screenHeight-768);a=new m;g.vo?k.createImageSprite(this.screen,a,"screens/go_header",!0,this.screenWidth/2,75):k.createXMLSprite(this.screen,a,g.goFont,
"Center",this.screenWidth/2-40,40,g.translations.node.resolve("gameover"));a=new m;this.goodScore()?k.createImageSprite(this.screen,a,"screens/picture_frame_full",!0,this.screenWidth/2-50,this.screenHeight/2+45):k.createImageSprite(this.screen,a,"screens/picture_frame_empty",!0,this.screenWidth/2-50,this.screenHeight/2+45);a=new m;g.score>=g.star5?k.createImageSprite(this.screen,a,"screens/5_star",!0,this.screenWidth/2-300,this.screenHeight/2+60):g.score>=g.star4?k.createImageSprite(this.screen,a,
"screens/4_star",!0,this.screenWidth/2-300,this.screenHeight/2+60):g.score>=g.star3?k.createImageSprite(this.screen,a,"screens/3_star",!0,this.screenWidth/2-300,this.screenHeight/2+60):g.score>=g.star2?k.createImageSprite(this.screen,a,"screens/2_star",!0,this.screenWidth/2-300,this.screenHeight/2+60):k.createImageSprite(this.screen,a,"screens/1_star",!0,this.screenWidth/2-300,this.screenHeight/2+60);this.addCoins();this.startBtn=new m;k.createImageSprite(this.screen,this.startBtn,"buttons/BTN_replay",
!0,this.screenWidth-60,this.screenHeight-60);k.alignRight(this.startBtn);this.homeBtn=new m;k.createImageSprite(this.screen,this.homeBtn,"buttons/BTN_home",!0,this.screenWidth-60,this.screenHeight-160);k.alignRight(this.homeBtn);this.gameState="GAMEOVER";this.fadeIn()},goodScore:function(){return g.score>=g.scoreWin?!0:!1},numCoins:function(){var a;a=5+(g.score/20|0);35<a&&(a=35);return a},addCoins:function(){var a=this,b=this.screenWidth/2+270,c=this.screenHeight-30,d=this.numCoins(),f=0,e=0,l=g.score/
d|0,n=new m;k.createTextSprite(this.owner,n,g.goFont,"Center",b,c-70,null==e?"null":""+e);M.spawn(n,1,0.3,0.3);var p=new C;p.run(new D([new u(1),new t(function(){var p=new C;p.run(new Ha(new D([new u(0.12),new t(function(){var p=new m,q=a.screen,r=k.randomNumber(-5,5);k.createImageSprite(q,p,"screens/coin",!0,b+r,c-10*f);10==f&&(p=new m,k.createImageSprite(a.screen,p,"screens/coin_angle",!0,b-40,c-10));e+=l;p=n.$BF[1];(p instanceof K?p:null).set_text(null==e?"null":""+e);n.$BF[1].y.animateBy(-10,
0.12);f+=1;f>=d&&(p=n.$BF[1],(p instanceof K?p:null).set_text(N.string(g.score)),a.screen.$BF[11].stopAll())})])));a.screen.add(p)})]));this.screen.add(p)},gameOver:function(a){var b=this;"TUT_SKIPINACTIVE"==a?(this.tutorialBtn.$BF[1].alpha.set__(0.5),a=new C,a.run(new D([new u(1),new t(function(){b.tutorialBtn.$BF[1].alpha.animateTo(1,0.2)})])),this.pauseBtn.add(a)):"ENDTUTORIAL"==a?this.tutorialBtn.$BF[1].set_visible(!1):"TUTORIALSTART"==a?(this.tutorialBtn.$BF[1].set_visible(!0),M.spawn(this.tutorialBtn,
1,0.3,0.3)):"HIDEPAUSE"==a?this.pauseBtn.$BF[1].set_visible(!1):"SALESTART"==a?(this.pauseBtn.$BF[1].set_visible(!1),this.saleBtn.$BF[1].set_visible(!0)):"SALEEND"==a?(this.pauseBtn.$BF[1].set_visible(!0),this.saleBtn.$BF[1].set_visible(!1)):(this.screen.$BF[17].stopGame(),this.screen.$BF[17].dispose(),this.fadeOut(I(this,this.gameOverScreen)),this.playSound("CG_MercadoMayhem_Stinger_v1"),a=new C,a.run(new D([new u(2),new t(function(){null!=b.menuLoop&&"GAME"!=b.gameState&&b.menuLoop.volume.animateTo(b.musicVolume,
0.5)})])),this.owner.add(a))},startGame:function(){var a=this;this.score=0;this.screen=(new m).add(new S(16777215,g.staticWidth,g.staticHeight));n.root.addChild(this.screen);this.getScreenSize();this.screen.add(new Gd(this.screenWidth,this.screenHeight,I(this,this.gameOver)));this.pauseBtn=new m;k.createImageSprite(this.screen,this.pauseBtn,"buttons/BTN_pause",!0,this.screenWidth-45,45);k.alignRight(this.pauseBtn);this.saleBtn=new m;k.createImageSprite(this.screen,this.saleBtn,"buttons/BTN_skip",
!0,this.screenWidth-45,45);k.alignRight(this.saleBtn);this.saleBtn.$BF[1].set_visible(!1);this.tutorialBtn=new m;k.createImageSprite(this.screen,this.tutorialBtn,"buttons/BTN_skip",!0,this.screenWidth-45,this.screenHeight-45+999);k.alignRight(this.tutorialBtn);this.tutorialBtn.$BF[1].set_visible(!1);this.screen2=new m;k.createImageSprite(n.root,this.screen2,"blankScreen",!1,0,0);this.screen2.$BF[1].set_pointerEnabled(!1);this.gameState="GAME";this.inPlay=!0;this.fadeIn();var b=new C;b.run(new D([new u(0.8),
new t(function(){a.pauseGame(!0,null);a.pauseMenu.$BF[20].showHelpIntro()})]));this.pauseBtn.add(b);g.showFPS&&n.root.addChild((new m).add(new K(this.status_font)).add(new tc));g.testMode&&k.addDebugSpeedAdjuster(n.root)},onUpdate:function(a){n.hidden.$hF?(k.mute(!0),g.active=!1):g.active||(k.mute(!1),g.active=!0)},handleTouchDown:function(a){},handleTouchMove:function(a){},handleTouchUp:function(a){this.audioEnabled||(g.pack.getSound("audio/blank").play(),this.audioEnabled=!0)},keyDownHandler:function(a){g.testMode&&
"GAME"==this.gameState&&a.key==e.Q&&this.gameOver("GAMEOVER")},keyUpHandler:function(a){},pauseGame:function(a,b){if(a){this.gameState="PAUSED";this.screen.add(new fb(0));this.pausedFade=(new m).add(new S(0,this.screenWidth+600,this.screenHeight));this.screen.addChild(this.pausedFade);this.pausedFade.$BF[1].alpha.set__(0.6);var c=this.pausedFade.$BF[1].x;c.set__(c.$hF-300);this.pauseMenu=(new m).add(new Hd(this.screenWidth/2,this.screenHeight/2,I(this,this.closePauseMenu)));this.screen2.addChild(this.pauseMenu);
this.pauseBtn.$BF[1].alpha.set__(0.5);this.screen2.$BF[1].set_pointerEnabled(!0);this.onResize()}},closePauseMenu:function(a){a?(this.fadeOut(I(this,this.homeScreen)),this.screen.add(new fb(1)),this.screen.$BF[17].stopGame(),this.screen2.dispose()):(this.gameState="GAME",this.screen.add(new fb(1)),this.pausedFade.dispose(),this.pauseMenu.dispose(),this.screen2.$BF[1].set_pointerEnabled(!1),this.pauseBtn.$BF[1].alpha.set__(1),this.pauseBtn.$BF[1].scaleX.set__(1),this.pauseBtn.$BF[1].scaleY.set__(1))},
fadeIn:function(){var a=(new m).add(new S(this.transitionColour,2E3,2E3));this.screen.addChild(a);a.$BF[1].alpha.set__(1);a.$BF[1].set_pointerEnabled(!1);var b=a.$BF[1].x;b.set__(b.$hF-300);b=new C;b.run(new D([new ua(a.$BF[1].alpha,0,this.transitionTime),new t(function(){a.dispose()})]));a.add(b);this.onResize()},fadeOut:function(a){var b=this,c=(new m).add(new S(this.transitionColour,2E3,2E3));this.screen.addChild(c);c.$BF[1].alpha.set__(0);var d=c.$BF[1].x;d.set__(d.$hF-300);d=new C;d.run(new D([new ua(c.$BF[1].alpha,
1,this.transitionTime),new t(function(){b.screen.dispose();a()})]));c.add(d)},onResize:function(){if(null!=this.screen){g.resizeScreen=!0;!g.isMobile&&667!=n.$2F.$MF.get_width()&&900<n.$2F.$MF.get_width()&&(g.resizeScreen=!1);939<n.$2F.$MF.get_width()&&1140>n.$2F.$MF.get_width()&&(g.resizeScreen=!1);939<n.$2F.$MF.get_height()&&1140>n.$2F.$MF.get_height()&&(g.resizeScreen=!1);if(1336<n.$2F.$MF.get_width()||960>n.$2F.$MF.get_width())g.resizeScreen=!0;2<n.$2F.$MF.get_width()/n.$2F.$MF.get_height()&&
(g.resizeScreen=!1);if(g.alwaysResize||2048<n.$2F.$MF.get_width()||768<n.$2F.$MF.get_height())g.resizeScreen=!0;var a=!1;812==n.$2F.$MF.get_width()&&375==n.$2F.$MF.get_height()?(a=g.resizeScreen=!0,this.debugText="iPhone X"):375==n.$2F.$MF.get_width()&&812==n.$2F.$MF.get_height()?(a=g.resizeScreen=!0,this.debugText="iPhone X"):975==n.$2F.$MF.get_width()&&2172==n.$2F.$MF.get_height()?(a=g.resizeScreen=!0,this.debugText="iPhone X with address bar"):2172==n.$2F.$MF.get_width()&&975==n.$2F.$MF.get_height()&&
(a=g.resizeScreen=!0,this.debugText="iPhone X with address bar");2048==n.$2F.$MF.get_width()&&1536>=n.$2F.$MF.get_height()&&(g.staticWidth=n.$2F.$MF.get_width()/2|0,g.staticHeight=n.$2F.$MF.get_height()/2|0);if(g.resizeScreen){1920==(n.$2F.$MF.get_width()|0)&&1120==(n.$2F.$MF.get_height()|0)&&(g.staticHeight=560);var b=g.staticWidth,c=g.staticHeight,d=n.$2F.$MF.get_width()/b,f=n.$2F.$MF.get_height()/c;g.scale=d<f?d:f;this.screen.$BF[1].setScale(g.scale).setXY((n.$2F.$MF.get_width()-b*g.scale)/2,(n.$2F.$MF.get_height()-
c*g.scale)/2);a&&(d=this.screen.$BF[1].scaleX,d.set__(1.05*d.$hF),d=this.screen.$BF[1].x,d.set__(d.$hF-19.2));null!=this.screen2&&null!=this.screen2.$BF[1]&&(this.screen2.$BF[1].setScale(g.scale).setXY((n.$2F.$MF.get_width()-b*g.scale)/2,(n.$2F.$MF.get_height()-c*g.scale)/2),a&&(d=this.screen2.$BF[1].scaleX,d.set__(1.05*d.$hF),d=this.screen2.$BF[1].x,d.set__(d.$hF-19.2)));n.$2F.$MF.get_width()>n.$2F.$MF.get_height()?(g.offsetX=n.$2F.$MF.get_width()/g.scale-b|0,g.offsetY=n.$2F.$MF.get_height()/g.scale-
c|0,a&&(g.offsetX=n.$2F.$MF.get_width()/(1.05*g.scale)-b|0)):(g.offsetX=n.$2F.$MF.get_height()/g.scale-c|0,g.offsetY=n.$2F.$MF.get_width()/g.scale-b|0,a&&(g.offsetX=n.$2F.$MF.get_height()/(1.05*g.scale)-c|0))}else g.scale=1,g.offsetX=0,g.offsetY=0}},getScreenSize:function(){if(g.resizeScreen)this.screenWidth=g.staticWidth,this.screenHeight=g.staticHeight;else if(this.screenWidth=n.$2F.$MF.get_width(),this.screenHeight=n.$2F.$MF.get_height(),this.screenHeight>this.screenWidth){var a=this.screenWidth;
this.screenWidth=this.screenHeight;this.screenHeight=a}},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},displayDebugInfo:function(){if(g.showDebugInfo){var a=new m;k.createFillSprite(this.screen,a,0,!0,this.screenWidth/2,this.screenHeight/2,2E3,1E3,0.75);a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,100,"Screen width  : "+this.screenWidth);a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,150,"Screen height : "+
this.screenHeight);a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,200,"Actual screen width  : "+n.$2F.$MF.get_width());a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,250,"Actual screen height : "+n.$2F.$MF.get_height());a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,300,"Resizing : "+N.string(g.resizeScreen));a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,350,
"Always resize : "+N.string(g.alwaysResize));a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,400,"Scale : "+g.scale);a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,450,"Scale factor : "+n.$2F.$MF.get_scaleFactor());a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,500,"Render type  : "+N.string(n.$2F.$LF.get_type()));a=new m;k.createTextSprite(this.screen,a,g.bodyFont,"Left",this.screenWidth/2-150,
550,this.debugText)}},__class__:Fd});var Id=function(a,b){r.call(this);this.x=a;this.y=b};l["project.HandOffBurst"]=Id;Id.__name__=["project","HandOffBurst"];Id.__super__=r;Id.prototype=s(r.prototype,{get_entitySlot:function(){return 35},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.burst=new m;k.createImageSprite(this.owner,this.burst,
"hud/HUD_handover_burst",!0,0,0);this.tick=new m;k.createImageSprite(this.owner,this.tick,"hud/HUD_handover_tick",!0,0,0);this.thisSprite.set_visible(!1)},show:function(){var a=this;M.spawn(this.burst,0,0.5,0.5);M.spawn(this.tick,0.3,0.5,0.5);this.thisSprite.set_visible(!0);this.thisSprite.alpha.set__(1);var b=new C;b.run(new D([new u(1.5),new t(function(){a.thisSprite.alpha.animateTo(0,0.5)}),new u(2.5),new t(function(){a.thisSprite.set_visible(!1)})]));this.owner.add(b)},__class__:Id});var Jd=function(a,
b){r.call(this);this.x=a;this.y=b};l["project.HudHighlight"]=Jd;Jd.__name__=["project","HudHighlight"];Jd.__super__=r;Jd.prototype=s(r.prototype,{get_entitySlot:function(){return 28},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.arrow=new m;g.isMobile?k.createImageSprite(this.owner,this.arrow,"hud/HUD_hand_tap",!0,0,0):k.createImageSprite(this.owner,
this.arrow,"hud/HUD_mouse_arrow",!0,0,0);this.thisSprite.setScale(0.7);this.hide()},show:function(){var a=this;this.thisSprite.set_visible(!0);g.isMobile?this.arrow.$BF[1].setXY(0,15):this.arrow.$BF[1].setXY(15,15);var b=new C;b.run(new Ha(new D([new t(function(){g.isMobile||a.arrow.$BF[1].x.animateTo(0,0.5,H.sineInOut);a.arrow.$BF[1].y.animateTo(0,0.5,H.sineInOut)}),new u(0.5),new t(function(){g.isMobile||a.arrow.$BF[1].x.animateTo(15,0.5,H.sineInOut);a.arrow.$BF[1].y.animateTo(15,0.5,H.sineInOut)}),
new u(0.5)])));this.arrow.add(b)},hide:function(){this.thisSprite.set_visible(!1)},__class__:Jd});var Kd=function(a,b,c,d){this.item3X=335;this.item2X=240;this.item1X=145;this.singleHandOff="";this.tweenSpeed=0.3;r.call(this);this.x=b;this.y=c;this.character=a;this.callback=d};l["project.Inventory"]=Kd;Kd.__name__=["project","Inventory"];Kd.__super__=r;Kd.prototype=s(r.prototype,{get_entitySlot:function(){return 26},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,
this.y);this.thisSprite=this.owner.$BF[1];this.frame=new m;k.createImageSprite(this.owner,this.frame,"hud/HUD_"+this.character,!1,0,0);this.items=[];this.cancel1=new m;k.createImageSprite(this.owner,this.cancel1,"buttons/BTN_close",!0,this.item1X+27,31);this.cancel1.$BF[1].set_visible(!1);this.cancel1.$BF[1].setScale(0.5);this.cancel2=new m;k.createImageSprite(this.owner,this.cancel2,"buttons/BTN_close",!0,this.item2X+27,31);this.cancel2.$BF[1].set_visible(!1);this.cancel2.$BF[1].setScale(0.5);this.cancel3=
new m;k.createImageSprite(this.owner,this.cancel3,"buttons/BTN_close",!0,this.item3X+27,31);this.cancel3.$BF[1].set_visible(!1);this.cancel3.$BF[1].setScale(0.5);this.connect1(n.$2F.$KF.down,I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove))},onPointerMove:function(a){k.rolloverImage(this.cancel1,"buttons/BTN_close","buttons/BTN_close_rollover",a);k.rolloverImage(this.cancel2,"buttons/BTN_close","buttons/BTN_close_rollover",a);k.rolloverImage(this.cancel3,"buttons/BTN_close",
"buttons/BTN_close_rollover",a)},onPointerDown:function(a){a.hit==this.cancel1.$BF[1]&&0!=(this.cancel1.$BF[1].$nE&2)?this.cancelItem(1):a.hit==this.cancel2.$BF[1]&&0!=(this.cancel2.$BF[1].$nE&2)?this.cancelItem(2):a.hit==this.cancel3.$BF[1]&&0!=(this.cancel3.$BF[1].$nE&2)&&this.cancelItem(3)},hideCloseBtns:function(){for(var a=0,b=0,c=this.items;b<c.length;){var d=c[b];++b;d.fulfilled&&++a}3>a&&(this.cancel1.$BF[1].set_visible(!1),this.cancel2.$BF[1].set_visible(!1),this.cancel3.$BF[1].set_visible(!1))},
showCloseBtns:function(){null!=this.item1&&(null!=this.item1.$BF[1]?(this.cancel1.$BF[1].set_visible(!0),this.owner.addChild(this.cancel1)):this.cancel1.$BF[1].set_visible(!1));null!=this.item2&&(null!=this.item2.$BF[1]?(this.cancel2.$BF[1].set_visible(!0),this.owner.addChild(this.cancel2)):this.cancel2.$BF[1].set_visible(!1));null!=this.item3&&(null!=this.item3.$BF[1]?(this.cancel3.$BF[1].set_visible(!0),this.owner.addChild(this.cancel3)):this.cancel3.$BF[1].set_visible(!1))},cancelItem:function(a){var b=
"";switch(a){case 1:b=this.items[0].name;z.remove(this.items,this.items[0]);this.item1.dispose();this.item1=null;null!=this.item2&&this.item2.$BF[1].x.animateTo(this.item1X,this.tweenSpeed,H.sineInOut);null!=this.item3&&this.item3.$BF[1].x.animateTo(this.item2X,this.tweenSpeed,H.sineInOut);break;case 2:b=this.items[1].name;z.remove(this.items,this.items[1]);this.item2.dispose();this.item2=null;null!=this.item3&&this.item3.$BF[1].x.animateTo(this.item2X,this.tweenSpeed,H.sineInOut);break;case 3:b=
this.items[2].name,z.remove(this.items,this.items[2]),this.item3.dispose(),this.item3=null}this.reorderItems(this.tweenSpeed);this.callback(b)},reorderItems:function(a,b){null==b&&(b=0);var c=this;this.hideCloseBtns();var d=new C;d.run(new D([new u(b),new t(function(){0<b&&(c.removed1?c.removed2?null==c.item3||c.removed3||c.item3.$BF[1].x.animateTo(c.item1X,a,H.sineInOut):null==c.item2||c.removed2||(c.item2.$BF[1].x.animateTo(c.item1X,a,H.sineInOut),null==c.item3||c.removed3||c.item3.$BF[1].x.animateTo(c.item2X,
a,H.sineInOut)):c.removed2&&null!=c.item3&&!c.removed3&&c.item3.$BF[1].x.animateTo(c.item2X,a,H.sineInOut))}),new u(a),new t(function(){null!=c.item1&&(c.item1.dispose(),c.item1=null);null!=c.item2&&(c.item2.dispose(),c.item2=null);null!=c.item3&&(c.item3.dispose(),c.item3=null);var a=c.items;c.items=[];for(var b=0;b<a.length;){var d=a[b];++b;c.addItem(d)}c.showCloseBtns()})]));this.frame.add(d)},nextItemToCollect:function(a){null==a&&(a="");for(var b=0,c=this.items;b<c.length;){var d=c[b];++b;if(!d.fulfilled&&
d.name!=a)return d.name}return null},addItem:function(a,b){null==b&&(b=!0);if(3>this.items.length)switch(b&&this.items.push(a),this.items.length){case 1:this.item1=new m;k.createImageSprite(this.owner,this.item1,"game/products/"+a.name,!0,this.item1X,43);a.fulfilled||this.item1.$BF[1].alpha.set__(0.5);break;case 2:this.item2=new m;k.createImageSprite(this.owner,this.item2,"game/products/"+a.name,!0,this.item2X,43);a.fulfilled||this.item2.$BF[1].alpha.set__(0.5);break;case 3:this.item3=new m,k.createImageSprite(this.owner,
this.item3,"game/products/"+a.name,!0,this.item3X,43),a.fulfilled||this.item3.$BF[1].alpha.set__(0.5)}this.hideCloseBtns()},collectItem:function(a){for(var b=1,c=0,d=this.items;c<d.length;){var f=d[c];++c;if(f.name==a.name&&!f.fulfilled){f.fulfilled=!0;switch(b){case 1:this.item1.$BF[1].alpha.animateTo(1,0.3);break;case 2:this.item2.$BF[1].alpha.animateTo(1,0.3);break;case 3:this.item3.$BF[1].alpha.animateTo(1,0.3)}this.showCloseBtns();break}++b}},cancelRequest:function(a){for(var b=1,c=0,d=this.items;c<
d.length;){var f=d[c];++c;if(f.name==a&&!f.fulfilled){this.cancelItem(b);break}++b}},hasAllItems:function(a){for(var b=0,c=this.items;b<c.length;)++b;b=0;if(null!=a)for(c=0;c<a.length;){var d=a[c];++c;d.fulfilled||++b}for(var c=!1,d=0,f=[],e=0,g=this.items;e<g.length;){var k=g[e];++e;if(k.fulfilled&&-1==f.indexOf(k.name))for(var l=0;l<a.length;){var m=a[l];++l;m.fulfilled||k.productType!=m.productType||(++d,k.fulfilled=!0,f.push(k.name))}}d==b&&(c=!0);return c},hasItems:function(a){if(""!=this.singleHandOff)return this.hasItemByName(this.singleHandOff);
for(var b=0,c=this.items;b<c.length;)++b;if(null!=a)for(b=0,c=this.items;b<c.length;)++b;for(var b=!1,c=0,d=this.items;c<d.length;){var f=d[c];++c;if(f.fulfilled)for(var e=0;e<a.length;){var g=a[e];++e;g.fulfilled||f.productType==g.productType&&(b=!0)}}return b},hasItemByName:function(a){for(var b=0,c=this.items;b<c.length;){var d=c[b];++b;if(d.fulfilled&&d.name==a)return!0}return!1},hasItem:function(a){for(var b=0,c=this.items;b<c.length;){var d=c[b];++b;if(d.name==a)return!0}return!1},handOffItems:function(a){this.removed3=
this.removed2=this.removed1=!1;var b=[];if(""!=this.singleHandOff)for(var c=0;c<a.length;){var d=a[c];++c;if(d.name==this.singleHandOff){this.singleHandOff="";b.push(d);b[0].fulfilled=!0;c=a=0;for(d=this.items;c<d.length;){var f=d[c];++c;++a;if(f.fulfilled&&f.name==b[0].name)switch(f.fulfilled=!0,a){case 1:this.removeItem(this.item1);this.removed1=!0;z.remove(this.items,this.items[0]);break;case 2:this.removeItem(this.item2);this.removed2=!0;z.remove(this.items,this.items[1]);break;case 3:this.removeItem(this.item3),
this.removed3=!0,z.remove(this.items,this.items[2])}}this.showCloseBtns();this.reorderItems(this.tweenSpeed,0.5);return b}}d=c=0;for(f=this.items;d<f.length;){var e=f[d];++d;++c;if(e.fulfilled)for(var g=0;g<a.length;){var k=a[g];++g;if(!k.fulfilled&&e.productType==k.productType){switch(c){case 1:this.removeItem(this.item1);this.removed1=!0;break;case 2:this.removeItem(this.item2);this.removed2=!0;break;case 3:this.removeItem(this.item3),this.removed3=!0}k.fulfilled=!0;b.push(e)}}}for(a=0;a<b.length;)c=
b[a],++a,z.remove(this.items,c);this.reorderItems(this.tweenSpeed,0.5);return b},removeItem:function(a){var b=this;a.$BF[1].alpha.animateTo(0,0.3);var c=new C;c.run(new D([new u(0.3),new t(function(){a.dispose();b.showCloseBtns()})]));a.add(c)},requesting:function(a){for(var b=0,c=this.items;b<c.length;){var d=c[b];++b;if(d.name==a&&!d.fulfilled)return!0}return!1},__class__:Kd});var Gd=function(a,b,c){this.scrolling=this.closedShoppingList=!1;this.panY=-150;this.panX=0;this.pathTargetFadeSpeed=1.2;
this.rows=21;this.cols=28;this.customerHudTimer=this.nodesSet=0;this.customerHudGap=75;this.customerHudY=140;this.customersLeft=0;this.startStock=3;this.listOpen=this.tipOpen=this.saleOn=!1;this.bobbyTimer=0;this.depthSortFrames=6;this.tomatoClickNodes=[588];this.mangoClickNodes=[589];this.carrotClickNodes=[590];this.sauceClickNodes=[151,152,153,154,123,124,125,126,95,96,97,98];this.riceClickNodes=[482,483,484,485,454,455,456,457,426,427,428,429];this.popcornClickNodes=[142,143,144,145,114,115,116,
117,86,87,88,89];this.pancakesClickNodes=[478,479,480,481,450,451,452,453,422,423,424,425];this.dogfoodClickNodes=[310,311,312,313,282,283,284,285,254,255,256,257];this.crackersClickNodes=[487,488,489,490,459,460,461,462,431,432,433,434];this.cookiesClickNodes=[314,315,316,317,286,287,288,290,258,259,260,261];this.chipsClickNodes=[319,320,321,322,291,292,293,294,263,264,265,266];this.canClickNodes=[147,148,149,150,118,119,120,121,90,91,92,93];this.customerBottomNodes=[547,553];this.customerMiddleNodes=
[380,385];this.customerTopNodes=[213,216];this.customerFruitNodes=[216,218];this.stack3Nodes=[465,466,467,493,494,495];this.stack2Nodes=[297,298,299,325,326,327];this.stack1Nodes=[129,130,131,157,158,159];this.stack3Node=522;this.stack2Node=354;this.stack1Node=186;this.customerNodes=[137,219,331,501];this.dogInStore=this.dogSpawned=!1;this.dirtNodes=[304,305,306,307];this.dogStackNodes3=[520,524];this.dogStackNodes2=[352,356];this.dogStackNodes1=[184,188];this.dogIdleNodes=[50,165,445,585,546,183,
44,307,72,354];this.sauceNode=180;this.riceNode=512;this.popcornNode=172;this.pancakesNode=508;this.dogfoodNode=340;this.crackersNode=516;this.cookiesNode=344;this.chipsNode=348;this.tomatoNode=3;this.mangoNode=5;this.carrotNode=7;this.canNode=176;this.inFromDoorNode=303;this.doorNode=307;this.registerNode=21;this.bobbyNodeBottom=586;this.bobbyNodeTop=18;this.spawningCustomers=!1;this.customersInWave=this.customersExited=0;this.maxCustomers=1;this.customersSpawned=0;this.lowStockTrigger=25;this.endTutorial=
this.hadCleanTip=this.hadStackTip=this.hadLowStockTip=!1;this.waveEarned=this.wave=0;this.hintTimer=15;this.availableTips=["DROP2","PARTIAL","TIDY"];this.productNames="can chips cookies crackers dogfood pancakes popcorn rice sauce carrot mango tomato".split(" ");this.customerPool=[1,2,3,4,5,6];this.musicVolume=0.75;this.waveActive=!1;this.controlsActive=!0;r.call(this);this.screenWidth=a;this.screenHeight=b;this.gameOverCallback=c};l["project.Level"]=Gd;Gd.__name__=["project","Level"];Gd.__super__=
r;Gd.prototype=s(r.prototype,{get_entitySlot:function(){return 17},onAdded:function(){g.isMobile&&this.connect1(n.$2F.$NF.down,I(this,this.handleTouchDown));this.connect1(n.$2F.getKeyboard().down,I(this,this.keyDownHandler));this.connect1(n.$2F.getKeyboard().up,I(this,this.keyUpHandler));this.connect1(n.$2F.$KF.down,I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove));this.startGame();this.musicLoop=g.pack.getSound("audio/CG_MercadoMayhem_Gameplay1").loop();this.musicLoop.volume.set__(0);
this.musicLoop.volume.animateTo(this.musicVolume,0.5)},stopGame:function(){this.inPlay=!1;this.ronnie.$BF[19].stop();this.bobby.$BF[19].stop();for(var a=0,b=this.customers;a<b.length;){var c=b[a];++a;c.dispose()}null!=this.dog&&null!=this.dog.$BF[1]&&this.dog.dispose();g.score=this.score;this.musicLoop.dispose()},setScollLimits:function(){this.bottomLimit=-(1680-this.screenHeight);this.rightLimit=-(1710-this.screenWidth)},startGame:function(){var a=this;this.tutorialStage=g.inTutorial;0!=this.tutorialStage&&
(this.bobbyTimer=-9999,this.controlsActive=!1);for(this.customerPool=k.shuffle(this.customerPool);5==this.customerPool[0]||2==this.customerPool[0];)this.customerPool=k.shuffle(this.customerPool);this.setScollLimits();this.setStockLevels();this.depthSortLastFrame=this.depthSortFrames;this.score=0;g.grumpFactor=1;this.screen=(new m).add(new S(16777215,g.staticWidth,g.staticHeight));this.owner.addChild(this.screen);var b=(new m).add(new S(0,2*this.screenWidth,2*this.screenHeight));b.$BF[1].centerAnchor();
b.$BF[1].setXY(this.screenWidth/2,this.screenHeight/2);this.screen.addChild(b);this.game=new m;k.createImageSprite(this.screen,this.game,"blank",!1,this.panX,this.panY);k.alignLeft(this.game);this.zoomAmt=new L(1);this.zoomAmt.set__(0.55);640<this.screenHeight&&this.zoomAmt.set__(0.7);this.game.$BF[1].setScale(this.zoomAmt.$hF);this.game.$BF[1].setXY(this.panX,this.panY);b=new m;k.createImageSprite(this.game,b,"game/street",!1,2090,-122);this.floor=new m;k.createImageSprite(this.game,this.floor,"game/background_extended",
!1,0,-122);this.doorMask=new m;k.createImageSprite(this.game,this.doorMask,"game/doorMask",!1,1619,264);this.zsort=[];this.customers=[];this.dirt=[];this.hudHeads=[];this.grid=[];this.startX=(g.tileSize/2|0)+10;this.startY=485;for(var c=b=0,d=this.rows;c<d;)for(var f=c++,e=0,l=this.cols;e<l;){var n=e++,p="floor",q="";if(null==g.mapData)0==k.randomNumber(0,4)&&(p="block");else switch(q=g.mapData.charAt(b++),q){case "0":p="floor";break;case "1":p="block"}n=(new m).add(new kb(p,n,f,this.startX+n*g.tileSize,
this.startY+f*g.tileSize));this.game.addChild(n);this.grid.push(n)}c=b=0;for(d=this.grid;c<d.length;)f=d[c],++c,f.$BF[18].setNodeCode(g.mapData.charAt(b++));b=(new m).add(new kb("block",0,0,this.startX,this.startY));this.game.addChild(b);this.grid.push(b);c=b.$BF[1].x;c.set__(c.$hF+140);c=b.$BF[1].y;c.set__(c.$hF-160);b.$BF[1].setScale(2.5);b=(new m).add(new kb("block",0,0,this.startX,this.startY));this.game.addChild(b);this.grid.push(b);c=b.$BF[1].x;c.set__(c.$hF+285);c=b.$BF[1].y;c.set__(c.$hF-
160);b.$BF[1].setScale(2.5);b=(new m).add(new kb("block",0,0,this.startX,this.startY));this.game.addChild(b);this.grid.push(b);c=b.$BF[1].x;c.set__(c.$hF+425);c=b.$BF[1].y;c.set__(c.$hF-160);b.$BF[1].setScale(2.5);b=0;c=[];d=0;for(f=this.rows;d<f;){d++;e=[];l=0;for(n=this.cols;l<n;)l++,e.push(this.grid[b++]);c.push(e)}this.grid2D=c;this.pathTarget=new m;k.createImageSprite(this.game,this.pathTarget,"hud/target_floor_yellow",!0,0,0);this.pathTarget.$BF[1].alpha.set__(0);this.pathTarget.$BF[1].set_pointerEnabled(!1);
this.addStock(this.floor,"fruit");this.warnIcecream=(new m).add(new pa(1355,350));this.floor.addChild(this.warnIcecream);b=120;c=500;d=300;f=new m;k.createImageSprite(this.game,f,"blank",!1,b,c+d);e=new m;k.createImageSprite(f,e,"game/aisle",!1,0,-d);this.zsort.push(f);f=new m;k.createImageSprite(this.game,f,"blank",!1,b,c+d+338);e=new m;k.createImageSprite(f,e,"game/aisle",!1,0,-d);this.zsort.push(f);f=new m;k.createImageSprite(this.game,f,"blank",!1,b,c+d+676);e=new m;k.createImageSprite(f,e,"game/aisle",
!1,0,-d);this.zsort.push(f);b+=830;c+=65;d=250;f=new m;k.createImageSprite(this.game,f,"blank",!1,b,c+d);this.endStack1=(new m).add(new zb(1,0,-d));f.addChild(this.endStack1);this.zsort.push(f);this.decorateShelves(this.endStack1);this.addStock(this.endStack1,"top");f=new m;k.createImageSprite(this.game,f,"blank",!1,b,c+d+338);this.endStack2=(new m).add(new zb(2,0,-d));f.addChild(this.endStack2);this.zsort.push(f);this.decorateShelves(this.endStack2);this.addStock(this.endStack2,"mid");f=new m;k.createImageSprite(this.game,
f,"blank",!1,b,c+d+676);this.endStack3=(new m).add(new zb(3,0,-d));f.addChild(this.endStack3);this.zsort.push(f);this.decorateShelves(this.endStack3);this.addStock(this.endStack3,"bottom");this.bobby=(new m).add(new jb("bobby",0,null,1046,530,I(this,this.characterCallback)));this.game.addChild(this.bobby);this.zsort.push(this.bobby);this.ronnie=(new m).add(new jb("ronnie",0,null,1158,1213,I(this,this.characterCallback)));this.game.addChild(this.ronnie);this.zsort.push(this.ronnie);this.ronnie.$BF[19].faceRight(!0);
this.handoffBurst=(new m).add(new Id(0,0));this.game.addChild(this.handoffBurst);this.zsort.push(this.handoffBurst);this.hudFrame=new m;k.createImageSprite(this.screen,this.hudFrame,"hud/coin_frame",!1,0,0);k.alignLeft(this.hudFrame);this.coin=new m;k.createImageSprite(this.hudFrame,this.coin,"hud/icon_register",!0,45,45);this.x1=new m;k.createImageSprite(this.hudFrame,this.x1,"hud/cross_small",!0,100,78);this.x2=new m;k.createImageSprite(this.hudFrame,this.x2,"hud/cross_small",!0,140,78);this.x3=
new m;k.createImageSprite(this.hudFrame,this.x3,"hud/cross_small",!0,180,78);this.x1.$BF[1].set_visible(!1);this.x2.$BF[1].set_visible(!1);this.x3.$BF[1].set_visible(!1);this.scoreText=new m;k.createTextSprite(this.screen,this.scoreText,g.scoreFont,"Center",140,20,N.string(this.score));k.alignLeft(this.scoreText);this.inventoryRonnie=(new m).add(new Kd("ronnie",190,0,I(this,this.inventoryCallback)));this.screen.addChild(this.inventoryRonnie);k.alignLeft(this.inventoryRonnie);this.ronnieHud=new m;
k.createImageSprite(this.screen,this.ronnieHud,"hud/BTN_char_ronnie_inactive",!0,655,47);k.alignLeft(this.ronnieHud);this.bobbyHud=new m;k.createImageSprite(this.screen,this.bobbyHud,"hud/BTN_char_bobby_active",!0,740,47);k.alignLeft(this.bobbyHud);g.isMobile&&(this.zoomBtn=new m,k.createImageSprite(this.screen,this.zoomBtn,"buttons/BTN_zoom",!0,this.screenWidth-130,45),k.alignRight(this.zoomBtn));this.hectorHud=new m;k.createImageSprite(this.screen,this.hectorHud,"hud/BTN_hector",!0,this.screenWidth-
55,this.screenHeight-50);k.alignRight(this.hectorHud);this.hectorHud.$BF[1].set_visible(!1);0!=this.tutorialStage&&this.bobbyHud.$BF[1].alpha.set__(0.5);this.hudHighlight=(new m).add(new Jd(this.bobbyHud.$BF[1].x.$hF,this.bobbyHud.$BF[1].y.$hF));this.bobbyHud.parent.addChild(this.hudHighlight);this.shelfHighlight=(new m).add(new Ld(this.warnPopcorn.$BF[1].x.$hF,this.warnPopcorn.$BF[1].y.$hF));this.warnPopcorn.parent.addChild(this.shelfHighlight);this.tips=(new m).add(new Md(this.screenWidth/2,this.screenHeight,
I(this,this.tipsCallback)));this.screen.addChild(this.tips);0!=this.tutorialStage&&this.takeStock("chips");this.inPlay=!0;this.setActiveCharacter(this.ronnie,!0);b=new C;b.run(new D([new u(1),new t(function(){a.showTip("TUTORIAL0")})]));this.owner.add(b)},tipsCallback:function(a){switch(a){case "CLOSED":this.tipOpen=!1;this.nextTutorial(3);break;case "NEXTWAVE":this.nextWave();if(1<this.tutorialStage||0==this.tutorialStage)this.controlsActive=!0;break;case "OPENED":this.tipOpen=!0;break;case "READY":this.controlsActive=
!0}},gameOver:function(){var a=this;this.hectorHud.$BF[1].alpha.animateTo(0,0.3);this.controlsActive=!1;this.tipOpen&&this.closeTip();this.listOpen&&null!=this.list.$BF[25].character&&this.list.$BF[25].close();var b=new C;b.run(new D([new u(0.5),new t(function(){a.ronnie.$BF[19].lose()}),new u(0.5),new t(function(){a.inPlay=!1}),new u(2),new t(function(){a.showTip("LOSE")}),new u(5),new t(function(){a.gameOverCallback("GAMEOVER")})]));this.warnIcecream.add(b)},characterCallback:function(a,b){a==this.ronnie&&
this.inventoryRonnie.$BF[26].showCloseBtns();switch(b){case "BOBBY_TASKEND":this.goalNode=1110>this.bobby.$BF[1].y.$hF?this.grid[this.bobbyNodeTop]:this.grid[this.bobbyNodeBottom];this.goalNode.$BF[18].setEnd();a.$BF[19].mode="IDLE";this.findPath(a.$BF[19]);this.bobbyTimer=0;this.bobby.$BF[19].shooTimer=0;break;case "CLEAN_END":var c=this.dirt[0];c.dispose();z.remove(this.dirt,c);this.bobbyTimer=0;this.bobby.$BF[19].shooTimer=0;break;case "DOG_IDLE":this.dogIdle();break;case "END_WALK":if("bobby"==
a.$BF[19].charName&&0<this.dirt.length)for(var c=0,d=this.dirtNodes;c<d.length;){var f=d[c];++c;this.nearestNode(this.bobby)==this.grid[f]&&(this.bobby.$BF[19].clean(),this.dirt[0].$BF[1].alpha.animateTo(0,0.5),g.grumpFactor-=0.1)}break;case "ENTER_STORE":c=[];d=0;for(f=this.customerNodes;d<f.length;){var e=f[d];++d;c.push(e)}d=0;for(f=this.customers;d<f.length;)e=f[d],++d,-1!=c.indexOf(e.$BF[19].standNode)&&z.remove(c,e.$BF[19].standNode);1!=this.tutorialStage&&(c=k.shuffle(c));d=c[0];1==this.tutorialStage&&
(d=c[2]);a.$BF[19].standNode=d;this.goalNode=this.grid[d];this.goalNode.$BF[18].setEnd();a.$BF[19].mode="WALKED_ON";this.findPath(a.$BF[19]);this.playSound("customer_enter");break;case "ENTER_STORE_DOG":this.dogInStore=!0;this.spawnDirt();this.dogIdle();this.playSound("dog_pant");break;case "FOLLOW":a.$BF[19].endFollow();break;case "GET_CAN":this.getStock(y.CAN,"can");break;case "GET_CARROT":this.getStock(y.CARROT,"carrot");break;case "GET_CHIPS":this.getStock(y.CHIPS,"chips");break;case "GET_COOKIES":this.getStock(y.COOKIES,
"cookies");break;case "GET_CRACKERS":this.getStock(y.CRACKERS,"crackers");break;case "GET_DOGFOOD":this.getStock(y.DOGFOOD,"dogfood");break;case "GET_MANGO":this.getStock(y.MANGO,"mango");break;case "GET_PANCAKES":this.getStock(y.PANCAKES,"pancakes");break;case "GET_POPCORN":this.getStock(y.POPCORN,"popcorn");break;case "GET_RICE":this.getStock(y.RICE,"rice");break;case "GET_SAUCE":this.getStock(y.SAUCE,"sauce");break;case "GET_TOMATO":this.getStock(y.TOMATO,"tomato");break;case "HAND_OFF":this.activeCustomer==
this.handoffCustomer?this.handToCustomer():(this.ronnie.$BF[19].idle(),this.setActiveCharacter(this.ronnie,!0));break;case "LEAVING":a.$BF[19].walkOff();break;case "PAID":this.customerWalkOff(a,!0);this.customersExited++;this.spawnNextCustomer();9>this.tutorialStage?this.nextTutorial(7):this.nextTutorial(10);break;case "REGISTER":this.addScore(a.$BF[19].spend,a);z.remove(this.hudHeads,a.$BF[19].hud);a.$BF[19].hud.$BF[34].remove();this.customersHappy.push(a.$BF[19].customerType);break;case "REMOVE":-1!=
this.zsort.indexOf(a)&&z.remove(this.zsort,a);-1!=this.customers.indexOf(a)&&(this.customerPool.push(a.$BF[19].customerType),z.remove(this.customers,a));z.remove(this.hudHeads,a.$BF[19].hud);a.$BF[19].hud.$BF[34].remove(!0);a.dispose();break;case "REMOVE_DOG":this.dogSpawned=this.dogInStore=!1;-1!=this.zsort.indexOf(a)&&z.remove(this.zsort,a);a.dispose();g.grumpFactor-=0.1;break;case "RESTACK1":this.bobby.$BF[19].restock();this.bobby.$BF[19].shooTimer=0;break;case "RESTACK1_END":this.endStack1.$BF[31].fix()&&
(g.grumpFactor+=0.1);break;case "RESTACK2":this.bobby.$BF[19].restock();this.bobby.$BF[19].shooTimer=0;break;case "RESTACK2_END":this.endStack2.$BF[31].fix()&&(g.grumpFactor+=0.1);break;case "RESTACK3":this.bobby.$BF[19].restock();this.bobby.$BF[19].shooTimer=0;break;case "RESTACK3_END":this.endStack3.$BF[31].fix()&&(g.grumpFactor+=0.1);break;case "RESTOCK_CAN":this.bobby.$BF[19].restock();break;case "RESTOCK_CAN_END":this.restock("can");break;case "RESTOCK_CARROT":this.bobby.$BF[19].restock();break;
case "RESTOCK_CARROT_END":this.restock("carrot");break;case "RESTOCK_CHIPS":this.bobby.$BF[19].restock();break;case "RESTOCK_CHIPS_END":this.restock("chips");break;case "RESTOCK_COOKIES":this.bobby.$BF[19].restock();break;case "RESTOCK_COOKIES_END":this.restock("cookies");break;case "RESTOCK_CRACKERS":this.bobby.$BF[19].restock();break;case "RESTOCK_CRACKERS_END":this.restock("crackers");break;case "RESTOCK_DOGFOOD":this.bobby.$BF[19].restock();break;case "RESTOCK_DOGFOOD_END":this.restock("dogfood");
break;case "RESTOCK_MANGO":this.bobby.$BF[19].restock();break;case "RESTOCK_MANGO_END":this.restock("mango");break;case "RESTOCK_PANCAKES":this.bobby.$BF[19].restock();break;case "RESTOCK_PANCAKES_END":this.restock("pancakes");break;case "RESTOCK_POPCORN":this.bobby.$BF[19].restock();break;case "RESTOCK_POPCORN_END":this.restock("popcorn");break;case "RESTOCK_RICE":this.bobby.$BF[19].restock();break;case "RESTOCK_RICE_END":this.restock("rice");break;case "RESTOCK_SAUCE":this.bobby.$BF[19].restock();
break;case "RESTOCK_SAUCE_END":this.restock("sauce");break;case "RESTOCK_TOMATO":this.bobby.$BF[19].restock();break;case "RESTOCK_TOMATO_END":this.restock("tomato");break;case "UNHAPPY_CUSTOMER":this.customerWalkOff(a);this.activeCustomer==a&&(this.activeCustomer=null,this.stopPulsing());this.customersUnhappy.push(a.$BF[19].customerType);this.customersLeft++;switch(this.customersLeft){case 1:this.x1.$BF[1].set_visible(!0);M.spawn(this.x1,0,0.5,0.5);break;case 2:this.x2.$BF[1].set_visible(!0);M.spawn(this.x2,
0,0.5,0.5);break;case 3:this.x3.$BF[1].set_visible(!0),M.spawn(this.x3,0,0.5,0.5)}a.$BF[19].ugh();1>a.$BF[19].happiness&&2<this.customersLeft&&this.inPlay?this.gameOver():(this.customersSpawned--,this.spawnNextCustomer());break;case "WALKED_ON":a.$BF[19].walkedOn(),1==this.tutorialStage?this.nextTutorial(1):this.nextTutorial(8)}},nextTutorial:function(a){var b=this;this.tutorialAction="";if(a==this.tutorialStage){switch(this.tutorialStage){case 1:this.showTip("TUTORIAL1");this.highlight(this.hudHeads[0]);
this.tutorialAction="CUSTOMER";this.gameOverCallback("TUTORIALSTART");this.controlsActive=!0;this.customersInWave=2;break;case 2:this.showTip("RONNIE");a=this.ronnieHud.$BF[1];(a instanceof G?a:null).texture=g.pack.getTexture("hud/BTN_char_ronnie_inactive");this.highlight(this.ronnieHud);this.tutorialAction="RONNIE";break;case 3:this.highlight(this.warnChips);break;case 4:this.showTip("CARROTS");this.highlight(this.warnCarrots);break;case 5:this.showTip("TOMATO");this.highlight(this.warnTomatoes);
break;case 6:this.showTip("TUTORIAL4",0.3);break;case 7:this.showTip("TUTORIAL5");this.tutorialAction="WAIT";a=new C;a.run(new D([new u(2),new t(function(){}),new u(2),new t(function(){b.highlight(b.bobbyHud);b.tutorialAction="BOBBY";b.bobbyHud.$BF[1].alpha.animateTo(1,0.3)})]));this.warnChips.add(a);break;case 8:this.showTip("ANOTHER");this.highlight(this.hudHeads[0]);this.tutorialAction="CUSTOMER";this.gameOverCallback("TUTORIALSTART");break;case 9:this.showTip("CHAIN");break;case 10:this.showTip("METER"),
this.endTutorial=!0,this.gameOverCallback("ENDTUTORIAL")}this.tutorialStage++;4==this.tutorialStage&&(this.tutorialStage=6)}},showTip:function(a,b){null==b&&(b=0);var c=this;if(!this.saleOn){"PARTIAL"==a&&(this.tutorialAction="WAIT");var d=new C;d.run(new D([new u(b),new t(function(){c.tipOpen||(c.controlsActive=!1,0!=c.tutorialStage&&c.gameOverCallback("TUT_SKIPINACTIVE"));c.tips.$BF[21].showTip(a,c.tipOpen);c.screen.addChild(c.tips);c.tipOpen=!0})]));this.tips.add(d)}},closeTip:function(){this.tipOpen=
!1;this.tips.$BF[21].close();this.hintTimer=15;this.endTutorial&&(this.endWave(),this.endTutorial=!1)},getStock:function(a,b){0<this.checkStock(b)&&this.inventoryRonnie.$BF[26].requesting(b)?(this.inventoryRonnie.$BF[26].collectItem({productType:a,name:b,fulfilled:!1}),this.collectedStockItem(),this.takeStock(b),this.playSound("pickup_shelf_item")):(1>this.checkStock(b)&&this.inventoryRonnie.$BF[26].requesting(b)&&this.inventoryRonnie.$BF[26].cancelRequest(b),this.collectedStockItem(b));this.autoDeliver();
0!=this.tutorialStage&&"chips"!=b&&"carrot"!=b&&"tomato"!=b&&this.showTip("DROP")},collectedStockItem:function(a){null==a&&(a="");var b=this,c=this.inventoryRonnie.$BF[26].nextItemToCollect(a);null==c?this.ronnie.$BF[19].mode="IDLE":(this.inventoryRonnie.$BF[26].hideCloseBtns(),a=new C,a.run(new D([new u(0.3),new t(function(){switch(c){case "can":b.goalNode=b.grid[b.canNode];b.ronnie.$BF[19].mode="GET_CAN";break;case "carrot":b.goalNode=b.grid[b.carrotNode];b.ronnie.$BF[19].mode="GET_CARROT";break;
case "chips":b.goalNode=b.grid[b.chipsNode];b.ronnie.$BF[19].mode="GET_CHIPS";break;case "cookies":b.goalNode=b.grid[b.cookiesNode];b.ronnie.$BF[19].mode="GET_COOKIES";break;case "crackers":b.goalNode=b.grid[b.crackersNode];b.ronnie.$BF[19].mode="GET_CRACKERS";break;case "dogfood":b.goalNode=b.grid[b.dogfoodNode];b.ronnie.$BF[19].mode="GET_DOGFOOD";break;case "mango":b.goalNode=b.grid[b.mangoNode];b.ronnie.$BF[19].mode="GET_MANGO";break;case "pancakes":b.goalNode=b.grid[b.pancakesNode];b.ronnie.$BF[19].mode=
"GET_PANCAKES";break;case "popcorn":b.goalNode=b.grid[b.popcornNode];b.ronnie.$BF[19].mode="GET_POPCORN";break;case "rice":b.goalNode=b.grid[b.riceNode];b.ronnie.$BF[19].mode="GET_RICE";break;case "sauce":b.goalNode=b.grid[b.sauceNode];b.ronnie.$BF[19].mode="GET_SAUCE";break;case "tomato":b.goalNode=b.grid[b.tomatoNode],b.ronnie.$BF[19].mode="GET_TOMATO"}b.setFollowCustomer(c);b.goalNode.$BF[18].setEnd();b.findPath(b.ronnie.$BF[19])})])),this.ronnie.add(a))},inventoryCallback:function(a){a=(new m).add(new Dd(a,
this.ronnie.$BF[1].x.$hF,this.ronnie.$BF[1].y.$hF+1,I(this,this.droppedItemCallback)));this.game.addChild(a);this.zsort.push(a);this.collectedStockItem();this.playSound("drop_item")},droppedItemCallback:function(a){z.remove(this.zsort,a)},decorateShelves:function(a){if(k.coinFlip())var b=k.randomNumber(50,150)-800,c=k.randomNumber(200,350)-800,d=k.randomNumber(400,650)-800,f=new m;else{var f=k.randomNumber(30,150)-800,b=k.randomNumber(180,300)-800,c=k.randomNumber(350,470)-800,d=k.randomNumber(500,
650)-800,e=new m;k.createImageSprite(a,e,"game/aisle_top_"+k.randomNumber(1,3),!0,f,k.randomNumber(-20,-5));f=new m}k.createImageSprite(a,f,"game/aisle_top_"+k.randomNumber(1,3),!0,b,k.randomNumber(-20,-5));b=new m;k.createImageSprite(a,b,"game/aisle_top_"+k.randomNumber(1,3),!0,c,k.randomNumber(-20,-5));c=new m;k.createImageSprite(a,c,"game/aisle_top_"+k.randomNumber(1,3),!0,d,k.randomNumber(-20,-5))},addStock:function(a,b){switch(b){case "bottom":this.shelfPancakes=new m;k.createImageSprite(a,this.shelfPancakes,
"game/products/pancakes3",!0,-699,134.5);this.shelfRice=new m;k.createImageSprite(a,this.shelfRice,"game/products/rice3",!0,-469,134.5);this.shelfCrackers=new m;k.createImageSprite(a,this.shelfCrackers,"game/products/crackers3",!0,-244,134.5);this.warnPancakes=(new m).add(new pa(-810,45));a.addChild(this.warnPancakes);this.warnRice=(new m).add(new pa(-580,45));a.addChild(this.warnRice);this.warnCrackers=(new m).add(new pa(-355,45));a.addChild(this.warnCrackers);break;case "fruit":this.shelfTomatoes=
new m;k.createImageSprite(a,this.shelfTomatoes,"game/products/tomato3",!0,178.5,417);this.shelfMangos=new m;k.createImageSprite(a,this.shelfMangos,"game/products/mango3",!0,321.5,416);this.shelfCarrots=new m;k.createImageSprite(a,this.shelfCarrots,"game/products/carrot3",!0,451.5,424);this.warnTomatoes=(new m).add(new pa(69,351));a.addChild(this.warnTomatoes);this.warnMangos=(new m).add(new pa(214,351));a.addChild(this.warnMangos);this.warnCarrots=(new m).add(new pa(351,351));a.addChild(this.warnCarrots);
break;case "mid":this.shelfDogfood=new m;k.createImageSprite(a,this.shelfDogfood,"game/products/dogfood3",!0,-699,134.5);this.shelfCookies=new m;k.createImageSprite(a,this.shelfCookies,"game/products/cookies3",!0,-469,134.5);this.shelfChips=new m;k.createImageSprite(a,this.shelfChips,"game/products/chips3",!0,-244,134.5);this.warnDogfood=(new m).add(new pa(-810,45));a.addChild(this.warnDogfood);this.warnCookies=(new m).add(new pa(-580,45));a.addChild(this.warnCookies);this.warnChips=(new m).add(new pa(-355,
45));a.addChild(this.warnChips);break;case "top":this.shelfPopcorn=new m,k.createImageSprite(a,this.shelfPopcorn,"game/products/popcorn3",!0,-699,134.5),this.shelfCans=new m,k.createImageSprite(a,this.shelfCans,"game/products/can3",!0,-469,134.5),this.shelfSauce=new m,k.createImageSprite(a,this.shelfSauce,"game/products/sauce3",!0,-244,134.5),this.warnPopcorn=(new m).add(new pa(-810,45)),a.addChild(this.warnPopcorn),this.warnCans=(new m).add(new pa(-580,45)),a.addChild(this.warnCans),this.warnSauce=
(new m).add(new pa(-355,45)),a.addChild(this.warnSauce)}},spawnNextCustomer:function(){if(this.customersSpawned<this.customersInWave&&this.customersSpawned<this.maxCustomers){var a=this.customerPool.shift();1==this.tutorialStage?this.spawnCustomer(1,1):0<this.tutorialStage?(g.inTutorial=2,this.spawnCustomer(4,2)):3>this.wave?this.spawnCustomer(a,k.randomNumber(1,2)):6>this.wave?this.spawnCustomer(a,k.randomNumber(1,3)):9>this.wave?this.spawnCustomer(a,k.randomNumber(2,3)):this.spawnCustomer(a,3)}else 0<
this.customersSpawned&&this.customersSpawned==this.customersExited&&0==this.tutorialStage&&this.endWave()},spawnCustomer:function(a,b){var c=k.randomNumber(750,1350),d=(new m).add(new Nd(0,0));this.game.addChild(d);c=(new m).add(new jb("customer"+a,b,d,2500,c,I(this,this.characterCallback)));this.game.addChild(c);this.zsort.push(c);this.customers.push(c);c.$BF[1].x.animateTo(1550,c.$BF[19].walkOnSpeed);c.$BF[1].y.animateTo(1045,k.randomNumberFloat(1,2.5));c.$BF[19].customerType=a;d=(new m).add(new Bd(c,
45,this.customerHudY+this.customerHudGap*(this.customers.length-1),I(this,this.customerHudCallback)));this.screen.addChild(d);c.$BF[19].setHud(d);this.hudHeads.push(d);k.alignLeft(d);this.customersSpawned++;3==this.customersSpawned&&this.spawnDog(1)},customerWalkOff:function(a,b){null==b&&(b=!1);if("LEAVING"!=a.$BF[19].mode){if(!b){var c=a.$BF[19],c=a.$BF[19];c.meter.$BF[33].unspawn();c=a.$BF[19];c=a.$BF[19];c.hud.$BF[34].setBad()}this.goalNode=this.grid[this.doorNode];this.goalNode.$BF[18].setEnd();
a.$BF[19].leave();this.findPath(a.$BF[19]);this.listOpen&&this.list.$BF[25].character==a&&this.list.$BF[25].close()}},customerHudCallback:function(a){if(!this.tipOpen||this.tipOpen&&"CUSTOMER"==this.tutorialAction){this.tipOpen&&this.closeTip();this.setActiveCharacter(a,!0);for(var b=0,c=this.customers;b<c.length;){var d=c[b];++b;var f=d.$BF[19],f=d.$BF[19];f.hud.$BF[34].deselect()}b=a.$BF[19];b=a.$BF[19];b.hud.$BF[34].select();this.autoDeliver();(2==this.tutorialStage||5<this.tutorialStage)&&this.highlight(a.$BF[19].hud,
!0);5<this.tutorialStage&&(this.goalNode=this.grid[9],this.goalNode.$BF[18].setEnd(),this.ronnie.$BF[19].mode="IDLE",this.findPath(this.ronnie.$BF[19]))}},setFollowCustomer:function(a){var b=this;if(null!=this.activeCustomer){var c=0;switch(a){case "can":c=k.randomNumber(this.customerTopNodes[0],this.customerTopNodes[this.customerTopNodes.length-1]);break;case "carrot":c=k.randomNumber(this.customerFruitNodes[0],this.customerFruitNodes[this.customerFruitNodes.length-1]);break;case "chips":c=k.randomNumber(this.customerMiddleNodes[0],
this.customerMiddleNodes[this.customerMiddleNodes.length-1]);break;case "cookies":c=k.randomNumber(this.customerMiddleNodes[0],this.customerMiddleNodes[this.customerMiddleNodes.length-1]);break;case "crackers":c=k.randomNumber(this.customerBottomNodes[0],this.customerBottomNodes[this.customerBottomNodes.length-1]);break;case "dogfood":c=k.randomNumber(this.customerMiddleNodes[0],this.customerMiddleNodes[this.customerMiddleNodes.length-1]);break;case "mango":c=k.randomNumber(this.customerFruitNodes[0],
this.customerFruitNodes[this.customerFruitNodes.length-1]);break;case "pancakes":c=k.randomNumber(this.customerBottomNodes[0],this.customerBottomNodes[this.customerBottomNodes.length-1]);break;case "popcorn":c=k.randomNumber(this.customerTopNodes[0],this.customerTopNodes[this.customerTopNodes.length-1]);break;case "rice":c=k.randomNumber(this.customerBottomNodes[0],this.customerBottomNodes[this.customerBottomNodes.length-1]);break;case "sauce":c=k.randomNumber(this.customerTopNodes[0],this.customerTopNodes[this.customerTopNodes.length-
1]);break;case "tomato":c=k.randomNumber(this.customerFruitNodes[0],this.customerFruitNodes[this.customerFruitNodes.length-1])}a=new C;a.run(new D([new u(k.randomNumberFloat(0.3,1)),new t(function(){b.customerFollow(c)})]));this.activeCustomer.$BF[19].hud.add(a)}},customerFollow:function(a){this.goalNode=this.grid[a];this.goalNode.$BF[18].setEnd();this.activeCustomer.$BF[19].follow();this.findPath(this.activeCustomer.$BF[19])},findPath:function(a){null==a.owner&&(a=this.ronnie.$BF[19]);this.open=
[];this.closed=[];var b=[],c=this.nearestNode(a.owner);if(null!=c){c.$BF[18].setStart();this.startNode=c;this.open.push(this.startNode);for(var c=0,d=this.grid;c<d.length;){var f=d[c];++c;f.$BF[18].reset()}c=0;for(d=this.grid;c<d.length;)f=d[c],++c,b.push(f);for(;0<this.open.length;){c=this.getLowestFromOpen();this.removeLowestFromOpen(c);this.closed.push(c);if(c.$BF[18].isGoal)break;d=this.getNeighbors(c.$BF[18],b);for(f=0;f<d.length;){var e=d[f];++f;if(0>this.getNodeIndexInList(!1,e)){e.$BF[18].g=
c.$BF[18].g+1;e.$BF[18].h=e.$BF[18].calcHeuristic(this.goalNode);e.$BF[18].f=e.$BF[18].g+e.$BF[18].h;var g=this.getNodeIndexInList(!0,e),k=!0;0<=g&&e.$BF[18].g>this.open[g].$BF[18].g&&(k=!1);k&&this.open.push(e)}}}c=[];b=this.goalNode;for(d=!0;d;)c.push(b),null!=b.$BF[18].parentNode?b=b.$BF[18].parentNode:d=!1;for(b=0;b<c.length;)d=c[b],++b,d.$BF[18].highlight();if(null!=a){b=[];for(d=0;d<c.length;)f=c[d],++d,f=new Da(f.$BF[1].x.$hF,f.$BF[1].y.$hF),b.push(f);f=d=c=0;for(e=this.grid;f<e.length;)g=
e[f],++f,g==this.goalNode&&(c=d),++d;a.setPath(b,c)}}},getLowestFromOpen:function(){for(var a=this.open[0],b=0,c=this.open;b<c.length;){var d=c[b];++b;d.$BF[18].f<a.$BF[18].f&&(a=d)}return a},removeLowestFromOpen:function(a){z.remove(this.open,a)},getNeighbors:function(a,b){for(var c=[],d=0;d<b.length;){var f=b[d];++d;if(-1==this.open.indexOf(f)&&-1==this.closed.indexOf(f)){var e=f.$BF[18];if(e.isWalkable&&(e.col==a.col?e.row==a.row+1?c.push(f):e.row==a.row-1&&c.push(f):e.row==a.row&&(e.col==a.col+
1?c.push(f):e.col==a.col-1&&c.push(f)),g.diagonals)){var k=!1;e.col==a.col-1?e.row==a.row+1?(0<=e.row-1&&(this.grid2D[e.row-1][e.col].$BF[18].isWalkable||(k=!0)),e.col+1<=this.cols&&(this.grid2D[e.row][e.col+1].$BF[18].isWalkable||(k=!0)),k||c.push(f)):e.row==a.row-1&&(e.row+1<=this.rows&&(this.grid2D[e.row+1][e.col].$BF[18].isWalkable||(k=!0)),e.col+1<=this.cols&&(this.grid2D[e.row][e.col+1].$BF[18].isWalkable||(k=!0)),k||c.push(f)):e.col==a.col+1&&(e.row==a.row+1?(0<=e.row-1&&(this.grid2D[e.row-
1][e.col].$BF[18].isWalkable||(k=!0)),0<=e.col-1&&(this.grid2D[e.row][e.col-1].$BF[18].isWalkable||(k=!0)),k||c.push(f)):e.row==a.row-1&&(e.row+1<=this.rows&&(this.grid2D[e.row+1][e.col].$BF[18].isWalkable||(k=!0)),0<=e.col-1&&(this.grid2D[e.row][e.col-1].$BF[18].isWalkable||(k=!0)),k||c.push(f)))}}}for(d=0;d<c.length;)f=c[d],++d,f.$BF[18].parentNode=a.owner;return c},getNodeIndexInList:function(a,b){var c=-1;return c=a?this.open.indexOf(b):this.closed.indexOf(b)},shoppingListCallback:function(a){if(-1!=
this.productNames.indexOf(a))return this.inventoryRonnie.$BF[26].hasItemByName(a)?!0:!1;if(-1!=a.indexOf("_")){var b=z.substr(a,a.indexOf("_")+1,null);this.deliverItemToCustomer(b,this.activeCustomer)}g.minimiseShoppingList||"CLOSE"!=a&&"MINIMISE"!=a?"CHECKOUT"==a?(this.listOpen=!1,this.closedShoppingList=!0):"CLOSE"==a?(this.listOpen=!1,this.closedShoppingList=!0,this.setActiveCharacter(this.ronnie,!0)):"MINIMISE"==a&&this.minimiseList():(this.list.dispose(),this.listOpen=!1,this.closedShoppingList=
!0,this.setActiveCharacter(this.ronnie,!0));5<this.tutorialStage?this.nextTutorial(9):this.nextTutorial(2);return!1},setActiveCharacter:function(a,b){var c=this;this.listOpen&&this.list.$BF[25].close(!0);this.tipOpen&&this.tips.$BF[21].close();if(this.activeCharacter!=a&&(this.followCharacter=null,-1!=this.customers.indexOf(a))){var d=new m,f=a.$BF[19].getList();this.list=d.add(new Ub(a,f,a.$BF[19].charName,this.screenWidth/2-240|0,this.screenHeight/2|0,I(this,this.shoppingListCallback)));this.screen.addChild(this.list);
M.spawn(this.list,0.5,0.3,0.3);this.listOpen=!0;this.stopPulsing();d=0;for(f=a.$BF[19].getList();d<f.length;){var e=f[d];++d;e.fulfilled||this.pulseItem(e.name,!0)}2==this.tutorialStage&&this.listOpen&&(this.list.$BF[25].hideClose(),d=new C,d.run(new D([new u(1.5),new t(function(){c.list.$BF[25].promptClose();c.showTip("LIST")})])),this.owner.add(d));null!=this.listMinimised&&(this.listMinimised.dispose(),this.listMinimised=null)}-1==this.customers.indexOf(a)?this.activeCharacter=a:this.activeCustomer=
a;d=0;for(f=this.grid;d<f.length;)e=f[d],++d,e.$BF[18].reset();this.nodesSet=0;for(var d=this.activeCharacter.$BF[1].x.$hF,f=this.activeCharacter.$BF[1].y.$hF,e=0,k=this.grid;e<k.length;){var l=k[e];++e;l.$BF[18].clickable()&&d<l.$BF[1].x.$hF+g.tileSize/2&&d>=l.$BF[1].x.$hF-g.tileSize/2&&f<l.$BF[1].y.$hF+g.tileSize/2&&f>=l.$BF[1].y.$hF-g.tileSize/2&&0==this.nodesSet&&(l.$BF[18].setStart(),this.startNode=l,this.nodesSet=1)}-1!=this.customers.indexOf(a)?(d=this.ronnieHud.$BF[1],(d instanceof G?d:null).texture=
g.pack.getTexture("hud/BTN_char_ronnie_inactive"),d=this.bobbyHud.$BF[1],(d instanceof G?d:null).texture=g.pack.getTexture("hud/BTN_char_bobby_inactive"),this.rolloverHud=null):a==this.bobby?(d=this.bobbyHud.$BF[1],(d instanceof G?d:null).texture=g.pack.getTexture("hud/BTN_char_bobby_active"),d=this.ronnieHud.$BF[1],(d instanceof G?d:null).texture=g.pack.getTexture("hud/BTN_char_ronnie_inactive"),this.rolloverHud=this.ronnieHud,this.bobbyTimer=0,this.highlight(this.bobbyHud,!0)):(d=this.bobbyHud.$BF[1],
(d instanceof G?d:null).texture=g.pack.getTexture("hud/BTN_char_bobby_inactive"),d=this.ronnieHud.$BF[1],(d instanceof G?d:null).texture=g.pack.getTexture("hud/BTN_char_ronnie_active"),this.rolloverHud=this.bobbyHud);b&&(this.activeCustomer==a?this.moveCamera(a.$BF[1].x.$hF-80,a.$BF[1].y.$hF-170,0.5):this.moveCamera(a.$BF[1].x.$hF,a.$BF[1].y.$hF,0.5),this.scrolling=!0,d=new C,d.run(new D([new u(0.5),new t(function(){c.scrolling=!1;-1==c.customers.indexOf(a)&&(c.followCharacter=c.activeCharacter)})])),
this.game.add(d));this.closedShoppingList=!1},moveCamera:function(a,b,c){this.scrollTargetX=a+this.game.$BF[1].x.$hF>0.75*this.screenWidth?0.5*this.screenWidth:a+this.game.$BF[1].x.$hF<0.25*this.screenWidth?0.5*this.screenWidth:this.screenWidth/2;this.scrollTargetY=b+this.game.$BF[1].y.$hF>0.75*this.screenHeight?0.5*this.screenHeight:b+this.game.$BF[1].y.$hF<0.25*this.screenHeight?0.5*this.screenHeight:this.screenHeight/2;this.scrollPosX=-a+this.scrollTargetX;this.scrollPosY=-b+this.scrollTargetY;
b=this.scrollPosX*this.game.$BF[1].scaleX.$hF+300*(1-this.game.$BF[1].scaleX.$hF);a=this.scrollPosY*this.game.$BF[1].scaleX.$hF+300*(1-this.game.$BF[1].scaleX.$hF);this.panX=this.panX+b-this.game.$BF[1].x.$hF;this.panY=this.panY+a-this.game.$BF[1].y.$hF;80<b&&(b=80);b<this.rightLimit+(500-500*this.zoomAmt.$hF)&&(b=this.rightLimit+(500-500*this.zoomAmt.$hF));a<this.bottomLimit+(1680-1680*this.zoomAmt.$hF)&&(a=this.bottomLimit+(1680-1680*this.zoomAmt.$hF));this.game.$BF[1].x.animateTo(b,c,H.sineInOut);
this.game.$BF[1].y.animateTo(a,c,H.sineInOut)},onUpdate:function(a){this.inPlay&&(this.followChar(a),this.updateHudHeads(a),this.checkStacks(),this.sortDepths(),"IDLE"==this.bobby.$BF[19].mode&&(this.bobbyTimer+=a,18<this.bobbyTimer&&(this.bobbyTimer=0,this.goalNode=1110>this.bobby.$BF[1].y.$hF?this.grid[this.bobbyNodeBottom]:this.grid[this.bobbyNodeTop],this.goalNode.$BF[18].setEnd(),this.bobby.$BF[19].mode="IDLE",this.findPath(this.bobby.$BF[19]))),0==this.tutorialStage&&(this.hintTimer-=a),0>this.hintTimer&&
this.tipAvailable(),this.spawningCustomers&&(this.spawnTimer-=a,0>=this.spawnTimer&&(this.spawnNextCustomer(),this.spawnTimer=k.randomNumberFloat(2,6))));this.zoomAmt.update(a);this.game.$BF[1].setScale(this.zoomAmt.$hF)},checkStacks:function(){var a=this;if(this.dogInStore&&(0==this.dirt.length||this.hadStackTip)){var b=!1;this.nearestNode(this.dog)==this.grid[this.dogStackNodes1[0]]?(this.endStack1.$BF[31].smash(!0),this.dog.$BF[19].dogPickup(1),b=!0):this.nearestNode(this.dog)==this.grid[this.dogStackNodes1[1]]&&
(this.endStack1.$BF[31].smash(!1),this.dog.$BF[19].dogPickup(1),b=!0);this.nearestNode(this.dog)==this.grid[this.dogStackNodes2[0]]?(this.endStack2.$BF[31].smash(!0),this.dog.$BF[19].dogPickup(2),b=!0):this.nearestNode(this.dog)==this.grid[this.dogStackNodes2[1]]&&(this.endStack2.$BF[31].smash(!1),this.dog.$BF[19].dogPickup(2),b=!0);this.nearestNode(this.dog)==this.grid[this.dogStackNodes3[0]]?(this.endStack3.$BF[31].smash(!0),this.dog.$BF[19].dogPickup(3),b=!0):this.nearestNode(this.dog)==this.grid[this.dogStackNodes3[1]]&&
(this.endStack3.$BF[31].smash(!1),this.dog.$BF[19].dogPickup(3),b=!0);b&&(b=new C,b.run(new D([new u(2),new t(function(){a.hadStackTip||(a.hadStackTip=!0,a.tutorialAction="",a.showTip("STACK"))})])),this.endStack1.add(b),g.grumpFactor+=0.1)}},followChar:function(a){null!=this.followCharacter&&this.moveCamera(this.followCharacter.$BF[1].x.$hF,this.followCharacter.$BF[1].y.$hF,a)},checkoutCustomer:function(a){var b=this;a.$BF[19].makeHappy(-99);var c=new C;c.run(new D([new u(0.5),new t(function(){a.$BF[19].makeHappy(100)}),
new u(1),new t(function(){b.listOpen&&b.list.$BF[25].character==a&&b.list.$BF[25].close(!1,!0);var c=a.$BF[19],c=a.$BF[19];c.meter.$BF[33].unspawn();c=a.$BF[19];c=a.$BF[19];c.hud.$BF[34].setGood();a.$BF[19].checkOut();b.goalNode=b.grid[b.registerNode];b.goalNode.$BF[18].setEnd();b.findPath(a.$BF[19])})]));a.add(c)},autoDeliver:function(){var a=!1;if(null!=this.activeCustomer&&null!=this.activeCustomer.$BF[19]){var b=this.activeCustomer;if(b.$BF[19].customerReady){var c=b.$BF[19].getList();this.inventoryRonnie.$BF[26].hasAllItems(c)&&
(this.deliverToCustomerAfterDelay(b,0.25),a=!0)}}return a},deliverToCustomerAfterDelay:function(a,b){var c=this,d=new C;d.run(new D([new u(b),new t(function(){c.deliverToCustomer(a)})]));a.add(d)},deliverToCustomer:function(a){if(null!=a&&"IDLE"==this.ronnie.$BF[19].mode&&a.$BF[19].customerReady){a.$BF[19].standStill();this.handoffCustomer=a;this.ronnie.$BF[1].x.$hF<this.handoffCustomer.$BF[1].x.$hF?this.ronnie.$BF[19].faceRight(!0):this.ronnie.$BF[19].faceRight(!1);var b=120;a.$BF[19].facingRight||
(b=-120);this.goalNode=this.nearestFreeNode(this.handoffCustomer,b);this.goalNode.$BF[18].setEnd();this.ronnie.$BF[19].mode="HAND_OFF";this.findPath(this.ronnie.$BF[19])}},deliverItemToCustomer:function(a,b){if(null!=b&&"IDLE"==this.ronnie.$BF[19].mode&&b.$BF[19].customerReady){this.handoffCustomer=b;this.ronnie.$BF[1].x.$hF<this.handoffCustomer.$BF[1].x.$hF?this.ronnie.$BF[19].faceRight(!0):this.ronnie.$BF[19].faceRight(!1);var c=120;b.$BF[19].facingRight||(c=-120);this.goalNode=this.nearestNode(this.handoffCustomer,
c);this.goalNode.$BF[18].setEnd();this.ronnie.$BF[19].mode="HAND_OFF";this.inventoryRonnie.$BF[26].singleHandOff=a;this.findPath(this.ronnie.$BF[19])}},handToCustomer:function(){var a=this.handoffCustomer;if(null!=a&&a.$BF[19].customerReady){if(!this.listOpen){var b=new m,c=this.handoffCustomer,d=this.handoffCustomer.$BF[19].getList();this.list=b.add(new Ub(c,d,this.handoffCustomer.$BF[19].charName,this.screenWidth/2-240|0,this.screenHeight/2|0,I(this,this.shoppingListCallback)));this.screen.addChild(this.list);
this.list.$BF[25].noCloseBtn();M.spawn(this.list,0.5,0.3,0.3);this.listOpen=!0;null!=this.listMinimised&&(this.listMinimised.dispose(),this.listMinimised=null)}this.ronnie.$BF[1].x.$hF<this.activeCustomer.$BF[1].x.$hF?(this.ronnie.$BF[19].faceRight(!0),this.activeCustomer.$BF[19].faceRight(!1)):(this.ronnie.$BF[19].faceRight(!1),this.activeCustomer.$BF[19].faceRight(!0));b=a.$BF[19].getList();this.inventoryRonnie.$BF[26].hasItems(b)&&(a.$BF[19].crossItems(this.inventoryRonnie.$BF[26].handOffItems(b)),
a.$BF[19].isFulfilled()&&(this.checkoutCustomer(this.activeCustomer),this.activeCustomer=null));this.listOpen&&this.list.$BF[25].character==a&&this.list.$BF[25].updateList(a.$BF[19].getList());this.handoffBurst.$BF[35].show();this.handoffBurst.$BF[1].setXY((this.ronnie.$BF[1].x.$hF+a.$BF[1].x.$hF)/2,this.ronnie.$BF[1].y.$hF-60)}this.ronnie.$BF[19].idle()},updateHudHeads:function(a){this.customerHudTimer-=a;if(0>this.customerHudTimer){this.customerHudTimer=0.3;this.hudHeads.sort(function(a,b){return a.$BF[34].happiness==
b.$BF[34].happiness?0:a.$BF[34].happiness<b.$BF[34].happiness?-1:1});for(var b=a=0,c=this.hudHeads;b<c.length;){var d=c[b];++b;d.$BF[1].y.animateTo(this.customerHudY+this.customerHudGap*a,0.3);++a}}},sortDepths:function(){if(0<this.depthSortLastFrame)this.depthSortLastFrame--;else{this.depthSortLastFrame=this.depthSortFrames;this.zsort.sort(function(a,b){return a.$BF[1].y.$hF==b.$BF[1].y.$hF?0:a.$BF[1].y.$hF<b.$BF[1].y.$hF?-1:1});for(var a=0,b=this.zsort;a<b.length;){var c=b[a];++a;this.game.addChild(c,
!0)}this.game.addChild(this.doorMask,!0);a=0;for(b=this.customers;a<b.length;)c=b[a],++a,null!=c.$BF[19].meter&&this.game.addChild(c.$BF[19].meter,!0);this.game.addChild(this.handoffBurst,!0);this.dogInStore&&0<this.bobby.$BF[19].shooTimer&&120>k.vectorDistance(this.dog.$BF[1].x.$hF,this.bobby.$BF[1].x.$hF,this.dog.$BF[1].y.$hF,this.bobby.$BF[1].y.$hF)&&this.dogWalkOff()}},characterIsIdle:function(){return"IDLE"==this.activeCharacter.$BF[19].mode?!0:!1},minimiseList:function(){this.listOpen&&(this.list.$BF[25].minimise(this.screenWidth,
this.screenHeight),this.listMinimised=this.list,this.listOpen=!1);this.setActiveCharacter(this.ronnie,!0)},highlight:function(a,b){null==b&&(b=!1);null!=a&&(null!=a.$BF[22]?b?this.shelfHighlight.$BF[27].hide():(this.shelfHighlight.$BF[1].setXY(a.$BF[1].x.$hF,a.$BF[1].y.$hF),a.parent.addChild(this.shelfHighlight),this.shelfHighlight.$BF[27].show()):b?this.hudHighlight.$BF[28].hide():(this.hudHighlight.$BF[1].setXY(a.$BF[1].x.$hF,a.$BF[1].y.$hF),a.parent.addChild(this.hudHighlight),this.hudHighlight.$BF[28].show()))},
handleTouchDown:function(a){},keyDownHandler:function(a){if(g.testMode)if(a.key==e.R){a=0;for(var b=this.grid;a<b.length;){var c=b[a];++a;c.$BF[18].reset()}this.nodesSet=0}else if(a.key==e.N){a=0;for(b=this.grid;a<b.length;)c=b[a],++a,c.$BF[18].restart();this.nodesSet=0}else if(a.key==e.Number1)a=this.zoomAmt,a.set__(a.$hF-0.1),this.game.$BF[1].setScale(this.zoomAmt.$hF),this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.Number2)a=this.zoomAmt,a.set__(a.$hF+0.1),this.game.$BF[1].setScale(this.zoomAmt.$hF),
this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.Number3)1==this.zoomAmt.$hF?this.zoomAmt.animateTo(0.4,1):this.zoomAmt.animateTo(1,1);else if(a.key==e.Right)this.panX-=50,this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.Left)this.panX+=50,this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.Down)this.panY-=50,this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.Up)this.panY+=50,this.game.$BF[1].setXY(this.panX,this.panY);else if(a.key==e.T)this.showTip("TUTORIAL5"),
this.tutorialAction="WAIT";else if(a.key==e.O)this.ronnie.$BF[19].win();else if(a.key==e.P)this.ronnie.$BF[19].lose();else if(a.key==e.Number0){a=0;for(b=this.grid;a<b.length;)c=b[a],++a,c.$BF[18].reset();this.nodesSet=0;g.editMode=!g.editMode;a=0;for(b=this.grid;a<b.length;)++a}else if(a.key==e.F)this.followCharacter=null==this.followCharacter?this.activeCharacter:null;else if(a.key!=e.M)if(a.key==e.H)this.endStack1.$BF[31].smash(!0),this.endStack2.$BF[31].smash(!0),this.endStack3.$BF[31].smash(!0);
else if(a.key==e.J)this.endStack1.$BF[31].fix(),this.endStack2.$BF[31].fix(),this.endStack3.$BF[31].fix();else if(a.key==e.Number8)null!=this.activeCustomer&&this.customerWalkOff(this.activeCustomer);else if(a.key==e.Number9)this.checkoutCustomer(this.activeCustomer);else if(a.key==e.Number7)this.activeCustomer.$BF[19].makeUnhappy();else if(a.key==e.D)this.spawnDog();else if(a.key==e.Numpad1)this.showDebrief();else if(a.key!=e.Numpad2)if(a.key==e.Numpad3)this.spawnCustomer(1,1);else if(a.key==e.Number4)for(a=
0,b=this.customers;a<b.length;)c=b[a],++a,c.$BF[19].fulfillOrder(),this.checkoutCustomer(c);else a.key==e.Numpad6?this.debugCustomers():a.key==e.L&&this.superSale()},keyUpHandler:function(a){},onPointerMove:function(a){this.rolloverHud==this.bobbyHud?0.75<this.bobbyHud.$BF[1].alpha.$hF&&k.rolloverImage(this.bobbyHud,"hud/BTN_char_bobby_inactive","hud/BTN_char_bobby_inactive_rollover",a):this.rolloverHud==this.ronnieHud&&k.rolloverImage(this.ronnieHud,"hud/BTN_char_ronnie_inactive","hud/BTN_char_ronnie_inactive_rollover",
a);k.rolloverImage(this.hectorHud,"hud/BTN_hector","hud/BTN_hector_rollover",a)},onPointerDown:function(a){if(this.controlsActive)if(null!=this.zoomBtn&&a.hit==this.zoomBtn.$BF[1]&&(1==this.zoomAmt.$hF?this.zoomAmt.animateTo(0.4,1):this.zoomAmt.animateTo(1,1),this.playSound("Click2")),a.hit==this.bobbyHud.$BF[1]&&0.75<this.bobbyHud.$BF[1].alpha.$hF){if(!this.tipOpen||this.tipOpen&&"BOBBY"==this.tutorialAction)this.tipOpen&&(this.closeTip(),this.highlight(this.bobbyHud,!0)),this.setActiveCharacter(this.bobby,
!0),this.listOpen&&(M.unspawn(this.list,0,0.4,!0,!0),this.listOpen=!1),this.playSound("Click1"),8==this.tutorialStage&&(this.warnChips.$BF[22].show(this.stock_chips),this.highlight(this.warnChips))}else if(a.hit==this.ronnieHud.$BF[1]){if(!this.tipOpen||this.tipOpen&&"RONNIE"==this.tutorialAction)this.tipOpen&&(this.closeTip(),this.highlight(this.ronnieHud,!0)),this.setActiveCharacter(this.ronnie,!0),this.listOpen&&(M.unspawn(this.list,0,0.4,!0,!0),this.listOpen=!1),this.playSound("Click1")}else if(a.hit==
this.hectorHud.$BF[1]){if(!this.tipOpen||this.tipOpen&&"RONNIE"==this.tutorialAction)this.showTip(this.availableTips.shift()),this.hectorHud.$BF[1].set_visible(!1);this.playSound("Click1")}else if(this.tipOpen)""==this.tutorialAction?this.closeTip():"WAIT"==this.tutorialAction&&(this.tips.$BF[21].skip()||(this.closeTip(),this.playSound("Click2")),this.tutorialAction="");else{var b=a.viewX/g.scale-g.offsetX/2;a=a.viewY/g.scale-g.offsetY/2;var c=!1;80>=a&&(c=!0);for(var d=0,e=this.hudHeads;d<e.length;){var h=
e[d];++d;b<h.$BF[1].x.$hF+36&&b>=h.$BF[1].x.$hF-36&&a<h.$BF[1].y.$hF+30&&a>=h.$BF[1].y.$hF-30&&(c=!0)}b/=this.zoomAmt.$hF;a/=this.zoomAmt.$hF;b-=this.game.$BF[1].x.$hF/this.zoomAmt.$hF;a-=this.game.$BF[1].y.$hF/this.zoomAmt.$hF;d=!1;this.activeCharacter!=this.bobby&&!this.listOpen&&!this.tipOpen&&b<this.bobby.$BF[1].x.$hF+g.tileSize/2&&b>=this.bobby.$BF[1].x.$hF-g.tileSize/2&&(a<this.bobby.$BF[1].y.$hF+g.tileSize/2&&a>=this.bobby.$BF[1].y.$hF-g.tileSize/2-125&&(this.setActiveCharacter(this.bobby,
!0),d=!0,this.listOpen&&(M.unspawn(this.list,0,0.4,!0,!0),this.listOpen=!1)),this.playSound("Click1"));this.activeCharacter!=this.ronnie&&!this.listOpen&&!this.tipOpen&&b<this.ronnie.$BF[1].x.$hF+g.tileSize/2&&b>=this.ronnie.$BF[1].x.$hF-g.tileSize/2&&a<this.ronnie.$BF[1].y.$hF+g.tileSize/2&&a>=this.ronnie.$BF[1].y.$hF-g.tileSize/2-125&&(this.setActiveCharacter(this.ronnie,!0),d=!0,this.listOpen&&(M.unspawn(this.list,0,0.4,!0,!0),this.listOpen=!1),this.playSound("Click1"));e=0;for(h=this.customers;e<
h.length;){var k=h[e];++e;k.$BF[19].customerReady&&!this.listOpen&&!this.tipOpen&&b<k.$BF[1].x.$hF+g.tileSize/2&&b>=k.$BF[1].x.$hF-g.tileSize/2&&a<k.$BF[1].y.$hF+g.tileSize/2&&a>=k.$BF[1].y.$hF-g.tileSize/2-125&&(this.customerHudCallback(k),d=!0,this.autoDeliver(),this.playSound("Click1"))}if(!(d||this.scrolling||this.listOpen||this.tipOpen||this.closedShoppingList||c))for(c=0,d=this.grid;c<d.length;)if(e=d[c],++c,e.$BF[18].clickable()||g.editMode)b<e.$BF[1].x.$hF+g.tileSize/2&&b>=e.$BF[1].x.$hF-
g.tileSize/2&&a<e.$BF[1].y.$hF+g.tileSize/2&&a>=e.$BF[1].y.$hF-g.tileSize/2&&(g.editMode?e.$BF[18].flip():this.characterIsIdle()&&(0==this.nodesSet?(e.$BF[18].setStart(),this.startNode=e,this.nodesSet=1):1==this.nodesSet?(this.setActiveCharacter(this.activeCharacter),e.$BF[18].setEnd(),this.goalNode=e,this.nodesSet=2,this.findPath(this.activeCharacter.$BF[19]),this.playSound("Click5")):2==this.nodesSet&&(this.setActiveCharacter(this.activeCharacter),this.goalNode=e,this.goalNode.$BF[18].setEnd(),
this.findPath(this.activeCharacter.$BF[19]),this.playSound("Click5"))),this.pathTarget.$BF[1].alpha.animate(1,0,this.pathTargetFadeSpeed),this.pathTarget.$BF[1].setXY(e.$BF[1].x.$hF,e.$BF[1].y.$hF),this.activeCharacter==this.bobby&&(this.bobby.$BF[19].shooTimer=5));else if(!this.tipOpen&&b<e.$BF[1].x.$hF+g.tileSize*e.$BF[1].scaleX.$hF/2&&b>=e.$BF[1].x.$hF-g.tileSize*e.$BF[1].scaleX.$hF/2&&a<e.$BF[1].y.$hF+g.tileSize*e.$BF[1].scaleX.$hF/2&&a>=e.$BF[1].y.$hF-g.tileSize*e.$BF[1].scaleX.$hF/2){h=0;this.playSound("Click5");
for(var k=0,l=this.grid;k<l.length;){var m=l[k];++k;m==e&&(-1!=this.canClickNodes.indexOf(h)?this.clickShelf(this.canNode,y.CAN,"can"):-1!=this.popcornClickNodes.indexOf(h)?this.clickShelf(this.popcornNode,y.POPCORN,"popcorn"):-1!=this.sauceClickNodes.indexOf(h)?this.clickShelf(this.sauceNode,y.SAUCE,"sauce"):-1!=this.dogfoodClickNodes.indexOf(h)?this.clickShelf(this.dogfoodNode,y.DOGFOOD,"dogfood"):-1!=this.cookiesClickNodes.indexOf(h)?this.clickShelf(this.cookiesNode,y.COOKIES,"cookies"):-1!=this.chipsClickNodes.indexOf(h)?
this.clickShelf(this.chipsNode,y.CHIPS,"chips"):-1!=this.pancakesClickNodes.indexOf(h)?this.clickShelf(this.pancakesNode,y.PANCAKES,"pancakes"):-1!=this.riceClickNodes.indexOf(h)?this.clickShelf(this.riceNode,y.RICE,"rice"):-1!=this.crackersClickNodes.indexOf(h)?this.clickShelf(this.crackersNode,y.CRACKERS,"crackers"):-1!=this.tomatoClickNodes.indexOf(h)?this.clickShelf(this.tomatoNode,y.TOMATO,"tomato"):-1!=this.mangoClickNodes.indexOf(h)?this.clickShelf(this.mangoNode,y.MANGO,"mango"):-1!=this.carrotClickNodes.indexOf(h)?
this.clickShelf(this.carrotNode,y.CARROT,"carrot"):-1!=this.stack1Nodes.indexOf(h)?this.clickStack(1):-1!=this.stack2Nodes.indexOf(h)?this.clickStack(2):-1!=this.stack3Nodes.indexOf(h)&&this.clickStack(3));++h}}this.closedShoppingList=!1}},clickShelf:function(a,b,c){var d=!0,e=!0;switch(this.tutorialStage){case 4:"chips"!=c&&(d=!1);break;case 5:"carrot"!=c&&(d=!1);break;case 8:"chips"!=c&&(d=!1);break;case 10:"tomato"!=c&&"carrot"!=c&&(d=!1),"tomato"==c&&this.inventoryRonnie.$BF[26].hasItemByName(c)&&
(d=!1),"carrot"==c&&this.inventoryRonnie.$BF[26].hasItemByName(c)&&(d=!1),"tomato"==c&&!this.inventoryRonnie.$BF[26].hasItem("carrot")&&(e=!1),"carrot"==c&&!this.inventoryRonnie.$BF[26].hasItem("tomato")&&(e=!1)}this.activeCharacter==this.ronnie&&d?(this.setActiveCharacter(this.activeCharacter),"IDLE"==this.ronnie.$BF[19].mode&&e&&(this.goalNode=this.grid[a],this.goalNode.$BF[18].setEnd(),this.ronnie.$BF[19].mode="GET_"+c.toUpperCase(),this.findPath(this.ronnie.$BF[19]),this.setFollowCustomer(c)),
this.inventoryRonnie.$BF[26].addItem({productType:b,name:c,fulfilled:!1})):this.activeCharacter==this.bobby&&(this.setActiveCharacter(this.activeCharacter),"IDLE"==this.bobby.$BF[19].mode&&(this.goalNode=this.grid[a],this.goalNode.$BF[18].setEnd(),this.bobby.$BF[19].mode="RESTOCK_"+c.toUpperCase(),this.findPath(this.bobby.$BF[19]),"chips"==c&&8==this.tutorialStage&&(g.productPool=g.productPoolFull.slice(),this.customersSpawned--,this.spawnNextCustomer())))},clickStack:function(a){var b=0;switch(a){case 1:b=
this.stack1Node;break;case 2:b=this.stack2Node;break;case 3:b=this.stack3Node}this.activeCharacter==this.bobby&&(this.setActiveCharacter(this.activeCharacter),"IDLE"==this.bobby.$BF[19].mode&&(this.goalNode=this.grid[b],this.goalNode.$BF[18].setEnd(),this.bobby.$BF[19].mode="RESTACK"+a,this.findPath(this.bobby.$BF[19])))},nearestNode:function(a,b){null==b&&(b=0);for(var c=a.$BF[1].x.$hF+b,d=a.$BF[1].y.$hF,e=0,h=this.grid;e<h.length;){var k=h[e];++e;if(c<k.$BF[1].x.$hF+g.tileSize/2&&c>=k.$BF[1].x.$hF-
g.tileSize/2&&d<k.$BF[1].y.$hF+g.tileSize/2&&d>=k.$BF[1].y.$hF-g.tileSize/2)return k}return null},nearestFreeNode:function(a,b){null==b&&(b=0);for(var c=a.$BF[1].x.$hF+b,d=a.$BF[1].y.$hF,e=null,c=this.ronnie.$BF[1].x.$hF<a.$BF[1].x.$hF?a.$BF[1].x.$hF-b:a.$BF[1].x.$hF+b,h=0,k=this.grid;h<k.length;){var l=k[h];++h;if(c<l.$BF[1].x.$hF+g.tileSize/2&&c>=l.$BF[1].x.$hF-g.tileSize/2&&d<l.$BF[1].y.$hF+g.tileSize/2&&d>=l.$BF[1].y.$hF-g.tileSize/2&&(e=l,l.$BF[18].isWalkable))return l}c=this.ronnie.$BF[1].x.$hF>
a.$BF[1].x.$hF?a.$BF[1].x.$hF+b:a.$BF[1].x.$hF-b;h=0;for(k=this.grid;h<k.length;)if(l=k[h],++h,c<l.$BF[1].x.$hF+g.tileSize/2&&c>=l.$BF[1].x.$hF-g.tileSize/2&&d<l.$BF[1].y.$hF+g.tileSize/2&&d>=l.$BF[1].y.$hF-g.tileSize/2&&l.$BF[18].isWalkable)return l;c=a.$BF[1].x.$hF;d=this.ronnie.$BF[1].y.$hF<a.$BF[1].y.$hF?a.$BF[1].y.$hF-60:a.$BF[1].y.$hF+60;h=0;for(k=this.grid;h<k.length;)if(l=k[h],++h,c<l.$BF[1].x.$hF+g.tileSize/2&&c>=l.$BF[1].x.$hF-g.tileSize/2&&d<l.$BF[1].y.$hF+g.tileSize/2&&d>=l.$BF[1].y.$hF-
g.tileSize/2&&l.$BF[18].isWalkable)return l;d=this.ronnie.$BF[1].y.$hF>a.$BF[1].y.$hF?a.$BF[1].y.$hF+60:a.$BF[1].y.$hF-60;h=0;for(k=this.grid;h<k.length;)if(l=k[h],++h,c<l.$BF[1].x.$hF+g.tileSize/2&&c>=l.$BF[1].x.$hF-g.tileSize/2&&d<l.$BF[1].y.$hF+g.tileSize/2&&d>=l.$BF[1].y.$hF-g.tileSize/2&&l.$BF[18].isWalkable)return l;return e},setStockLevels:function(){this.stock_sauce=this.stock_rice=this.stock_popcorn=this.stock_pancakes=this.stock_dogfood=this.stock_crackers=this.stock_cookies=this.stock_chips=
this.stock_tomato=this.stock_mango=this.stock_carrot=this.stock_can=this.startStock},stockLevel:function(){for(var a=0,b=0,c=this.productNames;b<c.length;){var d=c[b];++b;switch(d){case "can":a+=this.stock_can;break;case "carrot":a+=this.stock_carrot;break;case "chips":a+=this.stock_chips;break;case "cookies":a+=this.stock_cookies;break;case "crackers":a+=this.stock_crackers;break;case "dogfood":a+=this.stock_dogfood;break;case "mango":a+=this.stock_mango;break;case "pancakes":a+=this.stock_pancakes;
break;case "popcorn":a+=this.stock_popcorn;break;case "rice":a+=this.stock_rice;break;case "sauce":a+=this.stock_sauce;break;case "tomato":a+=this.stock_tomato}}return a},checkStock:function(a){!this.hadLowStockTip&&this.stockLevel()<this.lowStockTrigger&&(this.showTip("LOWSTOCK"),this.hadLowStockTip=!0);switch(a){case "can":return this.stock_can;case "carrot":return this.stock_carrot;case "chips":return this.stock_chips;case "cookies":return this.stock_cookies;case "crackers":return this.stock_crackers;
case "dogfood":return this.stock_dogfood;case "mango":return this.stock_mango;case "pancakes":return this.stock_pancakes;case "popcorn":return this.stock_popcorn;case "rice":return this.stock_rice;case "sauce":return this.stock_sauce;case "tomato":return this.stock_tomato}return 0},takeStock:function(a){this.pulseItem(a,!1);switch(a){case "can":return 0<this.stock_can&&this.stock_can--,this.debugStock(),this.updateStockGraphic(a),!0;case "carrot":return 0<this.stock_carrot&&this.stock_carrot--,this.debugStock(),
this.updateStockGraphic(a),!0;case "chips":return 0<this.stock_chips&&this.stock_chips--,this.debugStock(),this.updateStockGraphic(a),!0;case "cookies":return 0<this.stock_cookies&&this.stock_cookies--,this.debugStock(),this.updateStockGraphic(a),!0;case "crackers":return 0<this.stock_crackers&&this.stock_crackers--,this.debugStock(),this.updateStockGraphic(a),!0;case "dogfood":return 0<this.stock_dogfood&&this.stock_dogfood--,this.debugStock(),this.updateStockGraphic(a),!0;case "mango":return 0<
this.stock_mango&&this.stock_mango--,this.debugStock(),this.updateStockGraphic(a),!0;case "pancakes":return 0<this.stock_pancakes&&this.stock_pancakes--,this.debugStock(),this.updateStockGraphic(a),!0;case "popcorn":return 0<this.stock_popcorn&&this.stock_popcorn--,this.debugStock(),this.updateStockGraphic(a),!0;case "rice":return 0<this.stock_rice&&this.stock_rice--,this.debugStock(),this.updateStockGraphic(a),!0;case "sauce":return 0<this.stock_sauce&&this.stock_sauce--,this.debugStock(),this.updateStockGraphic(a),
!0;case "tomato":return 0<this.stock_tomato&&this.stock_tomato--,this.debugStock(),this.updateStockGraphic(a),!0}return!1},restock:function(a){this.bobbyTimer=0;this.bobby.$BF[19].shooTimer=0;switch(a){case "can":this.stock_can=this.startStock;break;case "carrot":this.stock_carrot=this.startStock;break;case "chips":this.stock_chips=this.startStock;break;case "cookies":this.stock_cookies=this.startStock;break;case "crackers":this.stock_crackers=this.startStock;break;case "dogfood":this.stock_dogfood=
this.startStock;break;case "mango":this.stock_mango=this.startStock;break;case "pancakes":this.stock_pancakes=this.startStock;break;case "popcorn":this.stock_popcorn=this.startStock;break;case "rice":this.stock_rice=this.startStock;break;case "sauce":this.stock_sauce=this.startStock;break;case "tomato":this.stock_tomato=this.startStock}this.updateStockGraphic(a);this.debugStock()},updateStockGraphic:function(a){switch(a){case "can":var b=this.shelfCans.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+
a+this.stock_can);this.warnCans.$BF[22].show(this.stock_can);break;case "carrot":b=this.shelfCarrots.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_carrot);this.warnCarrots.$BF[22].show(this.stock_carrot);this.shelfHighlight.$BF[1].x.$hF==this.warnCarrots.$BF[1].x.$hF&&this.shelfHighlight.$BF[1].x.$hF==this.warnCarrots.$BF[1].x.$hF&&(this.highlight(this.warnCarrots,!0),this.nextTutorial(5));break;case "chips":b=this.shelfChips.$BF[1];(b instanceof G?b:null).texture=
g.pack.getTexture("game/products/"+a+this.stock_chips);(0==this.tutorialStage||5<this.tutorialStage)&&this.warnChips.$BF[22].show(this.stock_chips);this.shelfHighlight.$BF[1].x.$hF==this.warnChips.$BF[1].x.$hF&&this.shelfHighlight.$BF[1].x.$hF==this.warnChips.$BF[1].x.$hF&&(this.highlight(this.warnChips,!0),this.nextTutorial(6));break;case "cookies":b=this.shelfCookies.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_cookies);this.warnCookies.$BF[22].show(this.stock_cookies);
break;case "crackers":b=this.shelfCrackers.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_crackers);this.warnCrackers.$BF[22].show(this.stock_crackers);break;case "dogfood":b=this.shelfDogfood.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_dogfood);this.warnDogfood.$BF[22].show(this.stock_dogfood);break;case "mango":b=this.shelfMangos.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_mango);
this.warnMangos.$BF[22].show(this.stock_mango);break;case "pancakes":b=this.shelfPancakes.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_pancakes);this.warnPancakes.$BF[22].show(this.stock_pancakes);break;case "popcorn":b=this.shelfPopcorn.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_popcorn);this.warnPopcorn.$BF[22].show(this.stock_popcorn);break;case "rice":b=this.shelfRice.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+
a+this.stock_rice);this.warnRice.$BF[22].show(this.stock_rice);break;case "sauce":b=this.shelfSauce.$BF[1];(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_sauce);this.warnSauce.$BF[22].show(this.stock_sauce);break;case "tomato":b=this.shelfTomatoes.$BF[1],(b instanceof G?b:null).texture=g.pack.getTexture("game/products/"+a+this.stock_tomato),this.warnTomatoes.$BF[22].show(this.stock_tomato),this.shelfHighlight.$BF[1].x.$hF==this.warnTomatoes.$BF[1].x.$hF&&this.shelfHighlight.$BF[1].x.$hF==
this.warnTomatoes.$BF[1].x.$hF&&(this.highlight(this.warnTomatoes,!0),this.nextTutorial(6))}},stopPulsing:function(){this.pulseItem("can",!1);this.pulseItem("carrot",!1);this.pulseItem("mango",!1);this.pulseItem("tomato",!1);this.pulseItem("chips",!1);this.pulseItem("cookies",!1);this.pulseItem("crackers",!1);this.pulseItem("dogfood",!1);this.pulseItem("pancakes",!1);this.pulseItem("popcorn",!1);this.pulseItem("rice",!1);this.pulseItem("sauce",!1)},pulseItem:function(a,b){if(b)switch(a){case "can":k.pulseBtn(this.shelfCans,
1.05,0.4);break;case "carrot":k.pulseBtn(this.shelfCarrots,1.05,0.4);break;case "chips":k.pulseBtn(this.shelfChips,1.05,0.4);break;case "cookies":k.pulseBtn(this.shelfCookies,1.05,0.4);break;case "crackers":k.pulseBtn(this.shelfCrackers,1.05,0.4);break;case "dogfood":k.pulseBtn(this.shelfDogfood,1.05,0.4);break;case "mango":k.pulseBtn(this.shelfMangos,1.05,0.4);break;case "pancakes":k.pulseBtn(this.shelfPancakes,1.05,0.4);break;case "popcorn":k.pulseBtn(this.shelfPopcorn,1.05,0.4);break;case "rice":k.pulseBtn(this.shelfRice,
1.05,0.4);break;case "sauce":k.pulseBtn(this.shelfSauce,1.05,0.4);break;case "tomato":k.pulseBtn(this.shelfTomatoes,1.05,0.4)}else{var c=this.shelfCans;switch(a){case "can":c=this.shelfCans;break;case "carrot":c=this.shelfCarrots;break;case "chips":c=this.shelfChips;break;case "cookies":c=this.shelfCookies;break;case "crackers":c=this.shelfCrackers;break;case "dogfood":c=this.shelfDogfood;break;case "mango":c=this.shelfMangos;break;case "pancakes":c=this.shelfPancakes;break;case "popcorn":c=this.shelfPopcorn;
break;case "rice":c=this.shelfRice;break;case "sauce":c=this.shelfSauce;break;case "tomato":c=this.shelfTomatoes}null!=c.$BF[11]&&(c.$BF[11].stopAll(),c.$BF[1].setScale(1))}},dogIdle:function(){var a=this,b=k.randomNumberFloat(0.5,2.5);0==this.dog.$BF[19].dogPaths&&(b=0);if(this.dog.$BF[19].dogPaths>=this.dog.$BF[19].maxDogPaths)this.dogWalkOff();else{var c=new C;c.run(new D([new u(b),new t(function(){a.dogIdleNodes=k.shuffle(a.dogIdleNodes);var b=a.dogIdleNodes[0];0==a.dog.$BF[19].dogPaths&&(b=a.inFromDoorNode);
a.goalNode=a.grid[b];a.goalNode.$BF[18].setEnd();a.dog.$BF[19].mode="DOG_IDLE";a.findPath(a.dog.$BF[19]);a.dog.$BF[19].dogPaths++})]));this.dog.add(c)}},spawnDog:function(a){null==a&&(a=0);var b=this;this.dogSpawned||(this.dogSpawned=!0,a=new C,a.run(new D([new u(2),new t(function(){var a=k.randomNumber(750,1350),d=new m;b.dog=d.add(new jb("dog",null,null,2500,a,I(b,b.characterCallback)));b.game.addChild(b.dog);b.zsort.push(b.dog);b.dog.$BF[1].x.animateTo(1550,g.walkOnSpeedDog);b.dog.$BF[1].y.animateTo(1045,
k.randomNumberFloat(2.5,3.5));b.playSound("dog_bark")})])),this.warnPopcorn.add(a),g.grumpFactor+=0.1)},dogWalkOff:function(){"LEAVING"!=this.dog.$BF[19].mode&&(this.goalNode=this.grid[this.doorNode],this.goalNode.$BF[18].setEnd(),this.dog.$BF[19].leave(),this.findPath(this.dog.$BF[19]),this.playSound("dog_bark"))},spawnDirt:function(){var a=this;if(0==this.dirt.length){var b=(new m).add(new Ed(1480,1032));this.game.addChild(b);this.dirt.push(b);this.sortDepths();var c=new C;c.run(new D([new u(2),
new t(function(){a.hadCleanTip||(a.hadCleanTip=!0,a.tutorialAction="",a.showTip("PAWPRINTS"))})]));b.add(c);g.grumpFactor+=0.1}},debugStock:function(){},addScore:function(a,b){var c=this,d=0;this.playSound("cash_register");var e=new C;e.run(new Ha(new D([new t(function(){0==a?(d=0,c.hudFrame.$BF[11].stopAll()):20>=a?(d=a,a=0):(d=20,a-=20);if(0<d){c.score+=d;c.waveEarned+=d;var e=c.scoreText.$BF[1];(e instanceof K?e:null).set_text(null==c.score?"null":""+c.score);999<c.score&&(c.scoreText.$BF[1].x.set__(155),
k.alignLeft(c.scoreText));c.coin.$BF[1].y.animateBy(-10,0.1)}null!=b&&(e=(new m).add(new Od("coin",b.$BF[1].x.$hF,b.$BF[1].y.$hF+5,I(c,c.scoreBurstCallback))),c.game.addChild(e),c.zsort.push(e))}),new u(0.1),new t(function(){c.coin.$BF[1].y.animateTo(45,0.3);c.playSound("coin")}),new u(0.2),new t(function(){c.playSound("coin")}),new u(0.1)])));this.hudFrame.add(e)},scoreBurstCallback:function(a){z.remove(this.zsort,a);a.dispose()},tipAvailable:function(){var a=this;if(0<this.availableTips.length){this.hectorHud.$BF[1].set_visible(!0);
this.hectorHud.$BF[1].setScale(0.3);this.hectorHud.$BF[1].alpha.set__(0);this.hectorHud.$BF[1].alpha.animateTo(1,0.22499999999999998);this.hectorHud.$BF[1].scaleX.animateTo(1,0.3,H.bounceOut);this.hectorHud.$BF[1].scaleY.animateTo(1,0.3,H.bounceOut);var b=new C;b.run(new D([new u(0.3),new t(function(){M.pulse(a.hectorHud,1.1,0.5)})]));this.hectorHud.add(b);this.hintTimer=9999}},showDebrief:function(){this.controlsActive=this.inPlay=!1;this.debrief=(new m).add(new Cd(this.screenWidth/2,this.screenHeight/
2,this.waveEarned,this.customersHappy,this.customersUnhappy,I(this,this.debriefCallback)));this.screen.addChild(this.debrief);this.tips.$BF[21].showDebrief();this.screen.addChild(this.tips)},debriefCallback:function(a){var b=this;this.controlsActive=this.inPlay=!0;this.debrief.dispose();this.tips.$BF[21].close();this.addScore(a);2==this.wave?(a=new C,a.run(new D([new u(0.5),new t(function(){b.showTip("TIDYCLEAN")}),new u(8),new t(function(){b.nextWave()})])),this.screen.add(a)):3==this.wave||8==this.wave||
12==this.wave||16==this.wave||20==this.wave?this.superSale():this.nextWave()},endWave:function(){var a=this;if(this.waveActive){this.waveActive=!1;this.setActiveCharacter(this.ronnie,!1);this.ronnie.$BF[19].win();var b=new m;k.createImageSprite(this.screen,b,"hud/coin_frame2",!0,this.screenWidth/2,this.screenHeight-80);var c=new m,d=g.chunkyFont,e=g.translations.node.resolve("endWave");k.createXMLSprite(b,c,d,"Center",175,22,e);M.spawn(b,0,0.3,0.5);d=1;this.tutorialStage=0;2==this.wave&&(d=6);e=new C;
e.run(new D([new u(2.5),new t(function(){b.$BF[1].scaleX.animateTo(0.5,0.5);b.$BF[1].scaleY.animateTo(0.5,0.5);b.$BF[1].alpha.animateTo(0,0.5)}),new u(d),new t(function(){a.showDebrief();b.dispose()})]));c.add(e)}},nextWave:function(){var a=this;this.waveActive=!0;g.productPool=g.productPoolFull.slice();this.wave++;g.wave=this.wave;this.waveEarned=this.customersExited=this.customersSpawned=0;this.customersHappy=[];this.customersUnhappy=[];var b=3.5;1==this.wave&&(b=2);3==this.wave&&this.musicLoop.volume.animateTo(0,
0.5);var c=new C;c.run(new D([new u(0.5),new t(function(){3==a.wave&&(a.musicLoop.dispose(),a.musicLoop=g.pack.getSound("audio/CG_MercadoMayhem_Gameplay2").loop(),a.musicLoop.volume.set__(0),a.musicLoop.volume.animateTo(a.musicVolume,0.5))}),new u(b-0.5),new t(function(){var b=new m;k.createImageSprite(a.screen,b,"hud/coin_frame",!0,a.screenWidth/2,a.screenHeight-80);var c=new m;if(g.vo){var e=g.scoreFont,l=g.translations.node.resolve("wave");k.createXMLSprite(b,c,e,"Center",125,22,l)}else e=g.headerFont,
l=g.translations.node.resolve("wave"),k.createXMLSprite(b,c,e,"Center",125,30,l);e=c.$BF[1];e=e instanceof K?e:null;e.set_text(e.$oI+" ");c=c.$BF[1];c=c instanceof K?c:null;c.set_text(c.$oI+(null==a.wave?"null":""+a.wave));M.spawn(b,0,0.3,0.5);c=new C;c.run(new D([new u(2.5),new t(function(){b.$BF[1].scaleX.animateTo(0.5,0.5);b.$BF[1].scaleY.animateTo(0.5,0.5);b.$BF[1].alpha.animateTo(0,0.5)}),new u(0.5),new t(function(){b.dispose()})]));a.hectorHud.add(c);switch(a.wave){case 1:a.maxCustomers=1;a.customersInWave=
1;break;case 2:a.customersInWave=2;break;case 3:a.maxCustomers=2;a.customersInWave=3;break;case 4:a.maxCustomers=3;a.customersInWave=4;break;case 5:a.maxCustomers=3;a.customersInWave=5;break;case 6:a.maxCustomers=4;a.customersInWave=6;break;default:a.maxCustomers=4,a.customersInWave=6}g.isMobile&&(a.maxCustomers=3);0!=g.inTutorial&&(a.customersInWave=2);a.spawningCustomers=!0;a.spawnTimer=0})]));this.screen.add(c)},superSale:function(){var a=this;this.saleOn=!0;this.controlsActive=!1;this.gameOverCallback("HIDEPAUSE");
this.fade=new m;k.createFillSprite(this.screen,this.fade,0,!0,this.screenWidth/2,this.screenHeight/2,2E3,1500,0);this.fade.$BF[1].alpha.animateTo(0.4,0.4);this.banner=new m;k.createImageSprite(this.screen,this.banner,"blank",!0,this.screenWidth/2,0);this.hector=(new m).add(new V("tips/hector","idle",this.screenWidth/2+285,this.screenHeight+300));this.screen.addChild(this.hector);this.hector.$BF[1].y.animateTo(this.screenHeight+50,0.4,H.sineOut);this.saleText=new m;g.vo?k.createImageSprite(this.screen,
this.saleText,"sale/super_sale",!0,this.screenWidth/2,this.screenHeight/2):k.createXMLSprite(this.screen,this.saleText,g.goFont,"Center",this.screenWidth/2,this.screenHeight/2-150,g.translations.node.resolve("sale"));M.spawn(this.saleText,0.7,0.3,0.3);this.playSound("swoosh");var b=new C;b.run(new D([new u(0.3),new t(function(){var b=new m;k.createImageSprite(a.banner,b,"sale/flags",!0,0,-400);b=new m;k.createImageSprite(a.banner,b,"sale/pinata",!0,0,-290);a.playSound("customer_enter");a.banner.$BF[1].y.animateTo(470,
0.6,H.sineOut)}),new u(1.5),new t(function(){var b=new m;a.sale=b.add(new Pd(0,a.screenHeight-768,a.screenWidth,I(a,a.superSaleCallback)));a.screen.addChild(a.sale);a.saleText.dispose();a.gameOverCallback("SALESTART");b=new C;b.run(new D([new u(0.3),new t(function(){a.musicLoop.volume.animateTo(0,0.3)}),new u(4),new t(function(){a.musicLoop.volume.animateTo(0.5,1)}),new u(0.5),new t(function(){a.playSound("cash_register")})]));a.owner.add(b)}),new u(1),new t(function(){a.fade.dispose();a.banner.dispose();
a.hector.dispose();k.coinFlip()&&a.endStack1.$BF[31].smash(!0);a.endStack2.$BF[31].smash(!0);k.coinFlip()&&a.endStack3.$BF[31].smash(!0);for(var b=0,d=a.productNames;b<d.length;){var e=d[b];++b;a.takeStock(e);k.coinFlip()&&a.takeStock(e);k.coinFlip()&&a.takeStock(e)}})]));this.hector.add(b)},superSaleCallback:function(){var a=this;this.saleOn=!1;this.controlsActive=!0;this.showTip("SALE");this.gameOverCallback("SALEEND");this.addScore(100,null);var b=new m;k.createImageSprite(this.screen,b,"blank",
!0,0,0);var c=20;9<this.wave&&(c-=5);14<this.wave&&(c-=5);var d=new C;d.run(new D([new u(c),new t(function(){a.nextWave();a.hector.dispose()})]));b.add(d)},skipSale:function(){var a=this;this.sale.dispose();this.gameOverCallback("SALEEND");this.saleOn=!1;this.controlsActive=!0;this.showTip("SALE");this.addScore(100,null);new C;this.hector=new m;k.createImageSprite(this.screen,this.hector,"blank",!0,0,0);var b=new C;b.run(new D([new u(3),new t(function(){a.nextWave();a.hector.dispose()})]));this.hector.add(b)},
skipTutorial:function(){this.controlsActive&&(this.tipOpen&&(this.closeTip(),this.highlight(this.bobbyHud,!0)),this.tutorialStage=0,g.inTutorial=0,this.gameOverCallback("ENDTUTORIAL"))},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},debugCustomers:function(){for(var a=0,b=this.customers;a<b.length;)++a},__class__:Gd});var pa=function(a,b){r.call(this);this.x=a+111;this.y=b+80};l["project.LowStock"]=pa;pa.__name__=["project","LowStock"];pa.__super__=r;pa.prototype=s(r.prototype,
{get_entitySlot:function(){return 22},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);var a=new m;k.createImageSprite(this.owner,a,"hud/frame",!0,0,0);a=new m;k.createImageSprite(this.owner,a,"hud/exclaim",!0,1,0);M.pulseUpDown(a,10,0.5);this.hide()},show:function(a){1<a?this.hide():(this.thisSprite.set_visible(!0),1==a&&M.spawn(this.owner,
0,0.5,0.5))},hide:function(){this.thisSprite.set_visible(!1)},__class__:pa});var Ze=function(){};l["project.Main"]=Ze;Ze.__name__=["project","Main"];Ze.main=function(){var a,b=(new m).add(new S(16777215,960,560)),c=(new m).add(new S(16777215,2E3,2E3));b.addChild(c);var c=n.$2F.$MF.get_width(),d=n.$2F.$MF.get_height();if(d>c)var e=c,c=d,d=e;n.root.addChild(b);k.detectLowEndDevice();n.$2F.$NF.get_supported()&&(g.isMobile=!0);c=window.navigator.userAgent;-1!=c.indexOf("Win")&&(g.isMobile=!1);-1!=c.indexOf("Mac")&&
(g.isMobile=!1);-1!=c.indexOf("Mobile")&&(g.isMobile=!0);c=wa.fromAssets("config");a=n.$2F.loadAssetPack(c);a.success.connect(function(c){g.configPack=c;c=wa.fromAssets("preloader");a=n.$2F.loadAssetPack(c);a.success.connect(function(a){g.loaderPack=a;b.dispose();n.root.add(new Qd)});a.catchError(function(a){});a.progressChanged.connect(function(){})});a.catchError(function(a){});a.progressChanged.connect(function(){})};var Nd=function(a,b){this.charHeight=195;this.charWidth=55;r.call(this);this.x=
a;this.y=b};l["project.Meter"]=Nd;Nd.__name__=["project","Meter"];Nd.__super__=r;Nd.prototype=s(r.prototype,{get_entitySlot:function(){return 33},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];var a=new m;k.createImageSprite(this.owner,a,"game/customer_gauge_frame",!1,this.charWidth,-this.charHeight);this.bar=new m;k.createImageSprite(a,this.bar,"game/gauge5",!1,20,7);this.owner.$BF[1].alpha.set__(0)},activate:function(){M.spawn(this.owner,
0.2,0.3,0.3)},unspawn:function(){var a=this;this.thisSprite.alpha.animateTo(0,0.2);var b=new C;b.run(new D([new u(0.5),new t(function(){a.owner.dispose()})]));this.owner.add(b)},init:function(a){this.happiness=a;this.setGuage(!0)},update:function(a){this.happiness=a;this.setGuage()},setGuage:function(a){null==a&&(a=!1);var b=0,b=80<this.happiness?5:60<this.happiness?4:40<this.happiness?3:20<this.happiness?2:2<this.happiness?1:0;if(a||this.happinessLevel!=b)this.happinessLevel=b,a=this.bar.$BF[1],
(a instanceof G?a:null).texture=g.pack.getTexture("game/gauge"+this.happinessLevel)},__class__:Nd});var V=function(a,b,c,d,e,h){null==h&&(h=1);r.call(this);this.movie=a;this.animation=b;this.x=c|0;this.y=d|0;this.pack=null!=e?e:g.pack;this.liteScale=h};l["project.MovieClip"]=V;V.__name__=["project","MovieClip"];V.__super__=r;V.prototype=s(r.prototype,{get_entitySlot:function(){return 23},onAdded:function(){var a=new Hb(this.pack,this.movie);this.moviePlayer=new ed(a);this.moviePlayer.loop(this.animation);
this.owner.add(this.moviePlayer).add(new v);this.thisSprite=this.owner.$BF[1];this.thisSprite.x.set__(this.x);this.thisSprite.y.set__(this.y);g.lite&&(80==this.liteScale?this.thisSprite.setScale(1.25):50==this.liteScale&&this.thisSprite.setScale(2))},play:function(a,b){this.moviePlayer.loop(b);this.moviePlayer.play(a)},loop:function(a){this.moviePlayer.loop(a)},__class__:V});var kb=function(a,b,c,d,e){this.parentNode=null;this.isGoal=!1;this.debugAlpha=0.5;this.pathColour=16777215;this.goalColour=
255;this.startColour=65280;this.blockColour=16711680;this.floorColour=0;r.call(this);this.type=a;this.col=b;this.row=c;this.x=d;this.y=e;"block"==this.type?(this.isWalkable=!1,this.nodeCode="1"):(this.isWalkable=!0,this.nodeCode="0")};l["project.Node"]=kb;kb.__name__=["project","Node"];kb.__super__=r;kb.prototype=s(r.prototype,{get_entitySlot:function(){return 18},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);
this.thisSprite=this.owner.$BF[1];if(g.viewGrid)switch(this.node=new m,this.type){case "block":k.createFillSprite(this.owner,this.node,this.blockColour,!0,0,0,g.tileSize,g.tileSize,this.debugAlpha);break;case "floor":k.createFillSprite(this.owner,this.node,this.floorColour,!0,0,0,g.tileSize,g.tileSize,this.debugAlpha)}},calcHeuristic:function(a){return g.diagonals?this.EuclideanDistance(a):this.ManhattanDistance(a)},ManhattanDistance:function(a){return Math.abs(this.col-a.$BF[18].col)+Math.abs(this.row-
a.$BF[18].row)},EuclideanDistance:function(a){return Math.sqrt(Math.pow(this.col-a.$BF[18].col,2)+Math.pow(this.row-a.$BF[18].row,2))},highlight:function(){if("floor"==this.type&&(this.type="path",g.viewGrid)){var a=this.node.$BF[1];(a instanceof S?a:null).color=this.pathColour}},setStart:function(){this.type="start";if(g.viewGrid){var a=this.node.$BF[1];(a instanceof S?a:null).color=this.startColour}},setEnd:function(){this.type="goal";if(g.viewGrid){var a=this.node.$BF[1];(a instanceof S?a:null).color=
this.goalColour}this.isGoal=!0},reset:function(){if("block"!=this.type&&(this.type="floor",g.viewGrid)){var a=this.node.$BF[1];(a instanceof S?a:null).color=this.floorColour}this.isGoal=!1;this.parentNode=null;this.f=this.h=this.g=0},restart:function(){this.type="floor";0==k.randomNumber(0,4)&&(this.type="block");if(g.viewGrid)switch(this.type){case "block":var a=this.node.$BF[1];(a instanceof S?a:null).color=this.blockColour;break;case "floor":a=this.node.$BF[1],(a instanceof S?a:null).color=this.floorColour}this.isGoal=
!1;this.isWalkable="red"==this.type?!1:!0},clickable:function(){return"floor"==this.type||"path"==this.type?!0:!1},flip:function(){if("block"==this.type){this.type="floor";if(g.viewGrid){var a=this.node.$BF[1];(a instanceof S?a:null).color=this.floorColour}this.nodeCode="0"}else"floor"==this.type&&(this.type="block",g.viewGrid&&(a=this.node.$BF[1],(a instanceof S?a:null).color=this.blockColour),this.nodeCode="1")},setNodeCode:function(a){switch(a){case "0":this.type="floor";g.viewGrid&&(a=this.node.$BF[1],
(a instanceof S?a:null).color=this.floorColour);break;case "1":this.type="block",g.viewGrid&&(a=this.node.$BF[1],(a instanceof S?a:null).color=this.blockColour)}},__class__:kb});var Hd=function(a,b,c){this.showExit=!0;r.call(this);this.x=a|0;this.y=b|0;this.callback=c};l["project.PauseMenu"]=Hd;Hd.__name__=["project","PauseMenu"];Hd.__super__=r;Hd.prototype=s(r.prototype,{get_entitySlot:function(){return 20},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();
this.thisSprite=this.owner.$BF[1];this.thisSprite.setXY(this.x,this.y);var a=new m;k.createImageSprite(this.owner,a,"blank",!0,0,0);a=new m;k.createImageSprite(this.owner,a,"pause/pause_screen",!0,0,0);a=new m;k.createImageSprite(this.owner,a,"pause/header",!0,0,-200);this.connect1(n.$2F.$KF.down,I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove));this.screen=new m;k.createImageSprite(this.owner,this.screen,"blank",!0,0,0);this.showMenu()},showMenu:function(){this.screen.dispose();
this.screen=new m;k.createImageSprite(this.owner,this.screen,"blank",!0,0,0);this.btnPlay=new m;k.createImageSprite(this.screen,this.btnPlay,"buttons/BTN_play",!0,-210,15);this.btnHelp=new m;k.createImageSprite(this.screen,this.btnHelp,"buttons/BTN_help",!0,-70,15);this.btnMute=new m;g.muted?k.createImageSprite(this.screen,this.btnMute,"buttons/BTN_audio_off",!0,70,15):k.createImageSprite(this.screen,this.btnMute,"buttons/BTN_audio_on",!0,70,15);this.btnExit=new m;k.createImageSprite(this.screen,
this.btnExit,"buttons/BTN_quit",!0,210,15);var a=new m;k.createXMLSprite(this.screen,a,g.headerFont,"Center",0,-225,g.translations.node.resolve("paused"));this.tab="MENU"},showHelp:function(){this.screen.dispose();this.screen=new m;k.createImageSprite(this.owner,this.screen,"blank",!0,0,0);var a=new m;k.createXMLSprite(this.screen,a,g.headerFont,"Center",0,-225,g.translations.node.resolve("help"));a=new m;k.createImageSprite(this.screen,a,"screens/help",!0,0,25);var b=new m;g.isMobile?k.createImageSprite(a,
b,"screens/help_mobile",!0,70,155):k.createImageSprite(a,b,"screens/help_desktop",!0,70,155);b=new m;k.createXMLSprite(a,b,g.helpFont,"Left",105,17,g.translations.node.resolve("useRonnie"));g.vo||(b=b.$BF[1].x,b.set__(b.$hF-10));b=new m;k.createXMLSprite(a,b,g.helpFont,"Left",365,17,g.translations.node.resolve("useBobby"));g.vo||(b=b.$BF[1].x,b.set__(b.$hF-10));b=new m;k.createXMLSprite(a,b,g.helpFont,"Left",150,130,g.translations.node.resolve("clickMove"));g.vo||(b=b.$BF[1].x,b.set__(b.$hF-10));
b=new m;k.createXMLSprite(a,b,g.helpFont,"Left",385,215,g.translations.node.resolve("keepHappy"));g.vo||(a=b.$BF[1].x,a.set__(a.$hF-10));this.btnExit=new m;this.showExit&&k.createImageSprite(this.screen,this.btnExit,"buttons/BTN_close",!0,290,-210);this.showExit=!0;this.tab="HELP"},showHelpIntro:function(){this.showExit=!0;this.showHelp();this.tab="HELPINTRO"},showQuit:function(){this.screen.dispose();this.screen=new m;k.createImageSprite(this.owner,this.screen,"blank",!0,0,0);this.btnExit=new m;
k.createImageSprite(this.screen,this.btnExit,"buttons/BTN_tick",!0,-80,30);this.btnPlay=new m;k.createImageSprite(this.screen,this.btnPlay,"buttons/BTN_quit",!0,80,30);var a=new m;k.createXMLSprite(this.screen,a,g.headerFont,"Center",0,-225,g.translations.node.resolve("quit"));a=new m;k.createXMLSprite(this.screen,a,g.headerFont,"Center",0,-100,g.translations.node.resolve("sure"));this.tab="QUIT"},onPointerDown:function(a){switch(this.tab){case "HELP":a.hit==this.btnExit.$BF[1]&&(this.showMenu(),
this.playSound("click"));break;case "HELPINTRO":a.hit==this.btnExit.$BF[1]&&(this.callback(!1),this.playSound("click"));break;case "MENU":a.hit==this.btnPlay.$BF[1]?(this.callback(!1),this.playSound("click")):a.hit==this.btnHelp.$BF[1]?(this.showHelp(),this.playSound("click")):a.hit==this.btnExit.$BF[1]?(this.showQuit(),this.playSound("click")):a.hit==this.btnMute.$BF[1]&&(g.muted?(this.btnMute.dispose(),this.btnMute=new m,k.createImageSprite(this.screen,this.btnMute,"buttons/BTN_audio_on",!0,70,
15),k.mute(!1)):(this.btnMute.dispose(),this.btnMute=new m,k.createImageSprite(this.screen,this.btnMute,"buttons/BTN_audio_off",!0,70,15),k.mute(!0)),this.playSound("click"));break;case "QUIT":a.hit==this.btnExit.$BF[1]?(this.callback(!0),this.playSound("click")):a.hit==this.btnPlay.$BF[1]&&(this.showMenu(),this.playSound("click"))}},onPointerMove:function(a){switch(this.tab){case "HELP":k.rolloverImage(this.btnExit,"buttons/BTN_close","buttons/BTN_close_rollover",a);break;case "MENU":k.rolloverImage(this.btnPlay,
"buttons/BTN_play","buttons/BTN_play_rollover",a);k.rolloverImage(this.btnHelp,"buttons/BTN_help","buttons/BTN_help_rollover",a);k.rolloverImage(this.btnExit,"buttons/BTN_quit","buttons/BTN_quit_rollover",a);g.muted?k.rolloverImage(this.btnMute,"buttons/BTN_audio_off","buttons/BTN_audio_off_rollover",a):k.rolloverImage(this.btnMute,"buttons/BTN_audio_on","buttons/BTN_audio_on_rollover",a);break;case "QUIT":k.rolloverImage(this.btnExit,"buttons/BTN_tick","buttons/BTN_tick_rollover",a),k.rolloverImage(this.btnPlay,
"buttons/BTN_quit","buttons/BTN_quit_rollover",a)}},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},__class__:Hd});var Qd=function(){this.fading=!1;this.progressHeight=31;this.progressWidth=299;this.backgroundColour=16777215;this.staticHeight=640;this.staticWidth=960;this.version="0.3";r.call(this)};l["project.Preloader"]=Qd;Qd.__name__=["project","Preloader"];Qd.__super__=r;Qd.prototype=s(r.prototype,{get_entitySlot:function(){return 13},onAdded:function(){var a=(new m).add(new S(this.backgroundColour,
2E3,1500));n.root.addChild(a);a.$BF[1].x.set__(-300);this.screen=(new m).add(new S(this.backgroundColour,this.staticWidth,this.staticHeight));n.root.addChild(this.screen);this.onResize();this.screen.dispose();this.loadGame()},loadGame:function(){var a=this;this.screen=(new m).add(new S(this.backgroundColour,960,560));n.root.addChild(this.screen);this.getScreenSize();var b=new m;b.add(new G(g.loaderPack.getTexture("background")));this.screen.addChild(b);b.$BF[1].setXY(-((1430-this.screenWidth)/2),
this.screenHeight-768);var c=new m,b=g.loaderPack.getTexture("logo");c.add(new G(b));this.screen.addChild(c);c.$BF[1].centerAnchor();c.$BF[1].setXY(this.screenWidth/2,this.screenHeight/2-60);var d=(new m).add(new G(g.loaderPack.getTexture("loaderbar_background")));d.$BF[1].setXY(this.screenWidth/2-150,this.screenHeight/2+40);this.screen.addChild(d);var e=(new m).add(new G(g.loaderPack.getTexture("loaderbar_full")));e.$BF[1].setXY(this.screenWidth/2-150,this.screenHeight/2+40);this.screen.addChild(e);
e.$BF[1].set_scissor(new sa(0,0,0,this.progressHeight));b=(new m).add(new G(g.loaderPack.getTexture("loaderbar_frame")));b.$BF[1].setXY(this.screenWidth/2,this.screenHeight/2+60);b.$BF[1].centerAnchor();this.screen.addChild(b);var h=new m,b=new ha(g.loaderPack,"vts28");h.add(new K(b));this.screen.addChild(h);b=h.$BF[1];(b instanceof K?b:null).set_align(ia.Center);b=h.$BF[1];(b instanceof K?b:null).setXY(this.screenWidth/2,this.screenHeight/2+40);b=h.$BF[1];(b instanceof K?b:null).set_text("0%");var b=
new lb(x.parse(g.configPack.getFile("config.xml").toString()).firstElement()),l=new m;if("YES"==b.node.resolve("showVersionNumber").get_innerData()){var p=new ha(g.loaderPack,"tinyfont");l.add(new K(p));this.screen.addChild(l);p=l.$BF[1];(p instanceof K?p:null).set_align(ia.Center);p=l.$BF[1];(p instanceof K?p:null).setXY(this.screenWidth/2,this.screenHeight-135);l.$BF[1].alpha.set__(0.5);b.node.resolve("versionNumber").get_innerData()==this.version?(p=l.$BF[1],(p instanceof K?p:null).set_text("v"+
b.node.resolve("versionNumber").get_innerData())):(p=l.$BF[1],(p instanceof K?p:null).set_text("version error"))}this.onResize();"YES"==b.node.resolve("testLite").get_innerData()&&(g.lite=!0);"YES"==b.node.resolve("testMobile").get_innerData()&&(g.isMobile=!0);b="mainassets";g.lite&&(b+="-lite");g.v2?(b=wa.fromAssets(b),b.$PG=N.string(n.$2F.getExternal().call("jsembed.baseUrl"))+"assets/"):b=wa.fromAssets(b);this.loader2=n.$2F.loadAssetPack(b);this.loader2.success.connect(function(b){g.pack=b;if(g.preloaderClick){c.dispose();
d.dispose();e.dispose();l.dispose();b=new m;k.createImageSprite(a.screen,b,"blank",!0,a.screenWidth/2,a.screenHeight/2);var h=new m;g.isMobile?k.createXMLSprite(b,h,g.titleFont,"Center",0,0,g.translations.node.resolve("tapStart")):k.createXMLSprite(b,h,g.titleFont,"Center",0,0,g.translations.node.resolve("clickStart"));k.pulseBtn(b,1.05,0.7);a.connect1(n.$2F.$KF.down,I(a,a.handlePointerDown))}else a.startGame()});this.loader2.catchError(function(a){});this.loader2.progressChanged.connect(function(){var b=
a.loader2.$PT/a.loader2.$QT;1<b&&(b=1);e.$BF[1].set_scissor(new sa(0,0,b*a.progressWidth,a.progressHeight));var b=100*b|0,c=h.$BF[1];(c instanceof K?c:null).set_text((null==b?"null":""+b)+"%")})},startGame:function(){var a=this;if(!this.fading){this.fading=!0;var b=(new m).add(new S(this.backgroundColour,2E3,2E3));this.screen.addChild(b);b.$BF[1].x.set__(-200);b.$BF[1].alpha.set__(0);b.$BF[1].alpha.animateTo(0.5,0.3);b=new C;b.run(new D([new u(0.3),new t(function(){a.screen.dispose();g.loaderPack.dispose();
n.root.add(new Fd)})]));this.screen.add(b)}},handlePointerDown:function(a){this.startGame()},onResize:function(){if(null!=this.screen){g.resizeScreen=!0;!g.isMobile&&667!=n.$2F.$MF.get_width()&&900<n.$2F.$MF.get_width()&&(g.resizeScreen=!1);939<n.$2F.$MF.get_width()&&1140>n.$2F.$MF.get_width()&&(g.resizeScreen=!1);939<n.$2F.$MF.get_height()&&1140>n.$2F.$MF.get_height()&&(g.resizeScreen=!1);if(1336<n.$2F.$MF.get_width()||960>n.$2F.$MF.get_width())g.resizeScreen=!0;2<n.$2F.$MF.get_width()/n.$2F.$MF.get_height()&&
(g.resizeScreen=!1);if(g.alwaysResize||2048<n.$2F.$MF.get_width()||768<n.$2F.$MF.get_height())g.resizeScreen=!0;2048==n.$2F.$MF.get_width()&&1536>=n.$2F.$MF.get_height()&&(g.staticWidth=n.$2F.$MF.get_width()/2|0,g.staticHeight=n.$2F.$MF.get_height()/2|0);if(g.resizeScreen){1920==(n.$2F.$MF.get_width()|0)&&1120==(n.$2F.$MF.get_height()|0)&&(g.staticHeight=560);var a=g.staticWidth,b=g.staticHeight,c=n.$2F.$MF.get_width()/a,d=n.$2F.$MF.get_height()/b;g.scale=c<d?c:d;this.screen.$BF[1].setScale(g.scale).setXY((n.$2F.$MF.get_width()-
a*g.scale)/2,(n.$2F.$MF.get_height()-b*g.scale)/2);n.$2F.$MF.get_width()>n.$2F.$MF.get_height()?(g.offsetX=n.$2F.$MF.get_width()/g.scale-a|0,g.offsetY=n.$2F.$MF.get_height()/g.scale-b|0):(g.offsetX=n.$2F.$MF.get_height()/g.scale-b|0,g.offsetY=n.$2F.$MF.get_width()/g.scale-a|0)}else g.scale=1,g.offsetX=0,g.offsetY=0}},getScreenSize:function(){if(g.resizeScreen)this.screenWidth=g.staticWidth,this.screenHeight=g.staticHeight;else if(this.screenWidth=n.$2F.$MF.get_width(),this.screenHeight=n.$2F.$MF.get_height(),
this.screenHeight>this.screenWidth){var a=this.screenWidth;this.screenWidth=this.screenHeight;this.screenHeight=a}},__class__:Qd});var y=l["project.ProductType"]={__ename__:!0,__constructs__:"CAN CHIPS COOKIES CRACKERS DOGFOOD PANCAKES POPCORN RICE SAUCE CARROT MANGO TOMATO ICECREAM".split(" ")};y.CAN=["CAN",0];y.CAN.toString=p;y.CAN.__enum__=y;y.CHIPS=["CHIPS",1];y.CHIPS.toString=p;y.CHIPS.__enum__=y;y.COOKIES=["COOKIES",2];y.COOKIES.toString=p;y.COOKIES.__enum__=y;y.CRACKERS=["CRACKERS",3];y.CRACKERS.toString=
p;y.CRACKERS.__enum__=y;y.DOGFOOD=["DOGFOOD",4];y.DOGFOOD.toString=p;y.DOGFOOD.__enum__=y;y.PANCAKES=["PANCAKES",5];y.PANCAKES.toString=p;y.PANCAKES.__enum__=y;y.POPCORN=["POPCORN",6];y.POPCORN.toString=p;y.POPCORN.__enum__=y;y.RICE=["RICE",7];y.RICE.toString=p;y.RICE.__enum__=y;y.SAUCE=["SAUCE",8];y.SAUCE.toString=p;y.SAUCE.__enum__=y;y.CARROT=["CARROT",9];y.CARROT.toString=p;y.CARROT.__enum__=y;y.MANGO=["MANGO",10];y.MANGO.toString=p;y.MANGO.__enum__=y;y.TOMATO=["TOMATO",11];y.TOMATO.toString=p;
y.TOMATO.__enum__=y;y.ICECREAM=["ICECREAM",12];y.ICECREAM.toString=p;y.ICECREAM.__enum__=y;var Od=function(a,b,c,d){r.call(this);this.x=b;this.y=c;this.type=a;this.callback=d};l["project.ScoreBurst"]=Od;Od.__name__=["project","ScoreBurst"];Od.__super__=r;Od.prototype=s(r.prototype,{get_entitySlot:function(){return 24},onAdded:function(){var a=this;this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];
this.thisSprite.set_pointerEnabled(!1);var b=new m;k.createImageSprite(this.owner,b,"game/bursts/"+this.type,!0,0,-120);M.spawn(b,0,0.3,0.3);var c=new C;c.run(new D([new u(0.3),new t(function(){b.$BF[1].alpha.animateTo(0,1);b.$BF[1].y.animateBy(-150,1,H.sineIn)}),new u(1),new t(function(){a.callback(a.owner)})]));this.owner.add(c)},__class__:Od});var Ld=function(a,b){r.call(this);this.x=a;this.y=b};l["project.ShelfHighlight"]=Ld;Ld.__name__=["project","ShelfHighlight"];Ld.__super__=r;Ld.prototype=
s(r.prototype,{get_entitySlot:function(){return 27},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].centerAnchor();this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.highlight=new m;k.createImageSprite(this.owner,this.highlight,"hud/shelf_burst",!0,0,0);this.dot=new m;k.createImageSprite(this.owner,this.dot,"hud/HUD_press_indicator",!0,0,0);this.arrow=new m;g.isMobile?k.createImageSprite(this.owner,
this.arrow,"hud/HUD_hand_tap",!0,0,0):k.createImageSprite(this.owner,this.arrow,"hud/HUD_mouse_arrow",!0,0,0);this.hide()},show:function(){var a=this;this.thisSprite.set_visible(!0);M.pulse(this.highlight,1.1,0.5);g.isMobile?this.arrow.$BF[1].setXY(0,15):this.arrow.$BF[1].setXY(15,15);var b=new C;b.run(new Ha(new D([new t(function(){g.isMobile||a.arrow.$BF[1].x.animateTo(0,0.5,H.sineInOut);a.arrow.$BF[1].y.animateTo(0,0.5,H.sineInOut)}),new u(0.5),new t(function(){g.isMobile||a.arrow.$BF[1].x.animateTo(15,
0.5,H.sineInOut);a.arrow.$BF[1].y.animateTo(15,0.5,H.sineInOut)}),new u(0.5)])));this.arrow.add(b)},hide:function(){this.thisSprite.set_visible(!1)},__class__:Ld});var Ub=function(a,b,c,d,e,g){this.minimised=!1;r.call(this);this.x=d;this.y=e;this.products=b;b=0;for(d=this.products;b<d.length;)++b;this.character=a;this.customer=c;this.callback=g};l["project.ShoppingList"]=Ub;Ub.__name__=["project","ShoppingList"];Ub.__super__=r;Ub.prototype=s(r.prototype,{get_entitySlot:function(){return 25},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));
this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];var a=new m;k.createImageSprite(this.owner,a,"hud/shopping_list",!0,0,0);a=new m;k.createImageSprite(this.owner,a,"hud/"+this.customer+"_head",!0,-114,-100);a=new m;g.vo?k.createXMLSprite(this.owner,a,g.headerFont,"Center",5,-110,g.translations.node.resolve("shoppingList")):k.createXMLSprite(this.owner,a,g.helpFont,"Center",3,-107,g.translations.node.resolve("shoppingList"));a.$BF[1].rotation.set__(-1);this.showList();this.closeBtn=
new m;k.createImageSprite(this.owner,this.closeBtn,"buttons/BTN_close",!0,125,-125);this.connect1(n.$2F.$KF.down,I(this,this.onPointerDown));this.connect1(n.$2F.$KF.move,I(this,this.onPointerMove))},showList:function(){this.content=[];var a=-106;1==this.products.length?a+=55:1==this.products.length&&(a+=25);for(var b=1,c=0,d=this.products;c<d.length;){var e=d[c];++c;var g=new m;k.createImageSprite(this.owner,g,"game/products/"+e.name,!0,-40,a+67*b);this.content.push(g);g=new m;k.createImageSprite(this.owner,
g,"hud/check_box",!0,40,a+67*b);this.content.push(g);if(e.fulfilled)e=new m,k.createImageSprite(this.owner,e,"hud/tick",!0,40,a+67*b),this.content.push(e);else switch(b){case 1:this.callback(e.name)&&(this.btn1=new m,k.createImageSprite(this.owner,this.btn1,"hud/BTN_tick",!0,40,a+67*b),g.$BF[1].set_visible(!1),this.content.push(this.btn1));break;case 2:this.callback(e.name)&&(this.btn2=new m,k.createImageSprite(this.owner,this.btn2,"hud/BTN_tick",!0,40,a+67*b),g.$BF[1].set_visible(!1),this.content.push(this.btn2));
break;case 3:this.callback(e.name)&&(this.btn3=new m,k.createImageSprite(this.owner,this.btn3,"hud/BTN_tick",!0,40,a+67*b),g.$BF[1].set_visible(!1),this.content.push(this.btn3))}++b}},updateList:function(a){a=0;for(var b=this.content;a<b.length;){var c=b[a];++a;c.dispose()}this.btn3=this.btn2=this.btn1=null;this.showList()},close:function(a,b){null==b&&(b=!1);null==a&&(a=!1);a&&this.minimised||(this.owner.dispose(),b?this.callback("CHECKOUT"):this.callback("CLOSE"))},minimise:function(a,b){this.minimised=
!0;a+=g.offsetX/2;this.thisSprite.x.animateTo(a-110,0.4,H.sineOut);this.thisSprite.y.animateTo(b-120,0.4,H.sineOut);this.thisSprite.scaleX.animateTo(0.6,0.4,H.sineOut);this.thisSprite.scaleY.animateTo(0.6,0.4,H.sineOut)},onPointerDown:function(a){a.hit==this.closeBtn.$BF[1]&&(this.minimised?this.close():this.callback("MINIMISE"),this.playSound("Click2"));null!=this.btn1&&a.hit==this.btn1.$BF[1]&&this.callback("DELIVER_"+this.products[0].name);null!=this.btn2&&a.hit==this.btn2.$BF[1]&&this.callback("DELIVER_"+
this.products[1].name);null!=this.btn3&&a.hit==this.btn3.$BF[1]&&this.callback("DELIVER_"+this.products[2].name)},onPointerMove:function(a){k.rolloverImage(this.closeBtn,"buttons/BTN_close","buttons/BTN_close_rollover",a);null!=this.btn1&&k.rolloverImage(this.btn1,"hud/BTN_tick","hud/BTN_tick_rollover",a);null!=this.btn2&&k.rolloverImage(this.btn2,"hud/BTN_tick","hud/BTN_tick_rollover",a);null!=this.btn3&&k.rolloverImage(this.btn3,"hud/BTN_tick","hud/BTN_tick_rollover",a)},hideClose:function(){this.closeBtn.$BF[1].set_visible(!1)},
promptClose:function(){this.closeBtn.$BF[1].set_visible(!0);this.closeBtn.$BF[1].alpha.animate(0,1,0.3);var a=new m;g.isMobile?k.createImageSprite(this.owner,a,"hud/HUD_hand_tap",!0,125,-125):k.createImageSprite(this.owner,a,"hud/HUD_mouse_arrow",!0,125,-125);a.$BF[1].set_pointerEnabled(!1);g.isMobile?a.$BF[1].setXY(125,-110):a.$BF[1].setXY(140,-110);var b=new C;b.run(new Ha(new D([new t(function(){g.isMobile||a.$BF[1].x.animateTo(125,0.5,H.sineInOut);a.$BF[1].y.animateTo(-125,0.5,H.sineInOut)}),
new u(0.5),new t(function(){g.isMobile||a.$BF[1].x.animateTo(140,0.5,H.sineInOut);a.$BF[1].y.animateTo(-110,0.5,H.sineInOut)}),new u(0.5)])));a.add(b)},noCloseBtn:function(){this.closeBtn.$BF[1].set_visible(!1)},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},__class__:Ub});var Pd=function(a,b,c,d){this.panSpeed=4.5;this.fadeSpeed=0.3;r.call(this);this.x=a;this.y=b;this.screenWidth=c;this.callback=d};l["project.SuperSale"]=Pd;Pd.__name__=["project","SuperSale"];Pd.__super__=r;Pd.prototype=
s(r.prototype,{get_entitySlot:function(){return 30},onAdded:function(){var a=this;this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);this.fade=new m;k.createFillSprite(this.owner,this.fade,0,!0,0,0,3E3,3E3,0);this.fade.$BF[1].alpha.animateTo(1,this.fadeSpeed);var b=new C;b.run(new D([new u(this.fadeSpeed),new t(function(){a.bg=new m;k.createImageSprite(a.owner,a.bg,"sale/background_full",
!1,a.screenWidth+g.offsetX/2-1920,0);a.owner.addChild(a.fade);a.fade.$BF[1].alpha.animateTo(0,a.fadeSpeed)}),new u(this.fadeSpeed),new t(function(){a.bg2=new m;k.createImageSprite(a.bg,a.bg2,"sale/background_empty",!1,0,0);var b=new m;k.createImageSprite(a.bg,b,"sale/background_empty",!1,2E3,0);b.$BF[1].scaleX.set__(2);b.$BF[1].x.animateBy(-(a.screenWidth+1150),a.panSpeed);a.bg2.$BF[1].set_mask(b.$BF[1]);b=new m;a.cloud=b.add(new V("sale/cloud","cloud",a.screenWidth+450,424));a.owner.addChild(a.cloud);
a.cloud.$BF[1].setScale(2);a.bg.$BF[1].x.animateTo(-g.offsetX/2,a.panSpeed);a.cloud.$BF[1].x.animateBy(-(a.screenWidth+900),a.panSpeed);a.playSound("CG_MercadoMayhem_SuperSaleStinger")}),new u(this.panSpeed-this.fadeSpeed+1),new t(function(){a.fade.$BF[1].alpha.animateTo(1,a.fadeSpeed)}),new u(this.fadeSpeed),new t(function(){a.bg.dispose();a.bg2.dispose();a.cloud.dispose();a.fade.$BF[1].alpha.animateTo(0,a.fadeSpeed)}),new u(this.fadeSpeed),new t(function(){a.callback();a.owner.dispose()})]));this.owner.add(b)},
playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},__class__:Pd});var Md=function(a,b,c){this.hectorDown=300;this.hectorUp=50;this.multiPart=!1;r.call(this);this.x=a;this.y=b;this.callback=c};l["project.Tip"]=Md;Md.__name__=["project","Tip"];Md.__super__=r;Md.prototype=s(r.prototype,{get_entitySlot:function(){return 21},onAdded:function(){this.owner.add(new G(g.pack.getTexture("blank")));this.owner.$BF[1].setXY(this.x,this.y);this.thisSprite=this.owner.$BF[1];this.thisSprite.set_pointerEnabled(!1);
this.gradient=new m;k.createImageSprite(this.owner,this.gradient,"tips/gradient_overlay",!0,0,-220);this.bubble=new m;k.createImageSprite(this.owner,this.bubble,"tips/speech_bubble",!0,-15,-275);this.hector=(new m).add(new V("tips/hector","idle",285,this.hectorDown));this.owner.addChild(this.hector);this.bubble.$BF[1].alpha.set__(0);this.gradient.$BF[1].alpha.set__(0);this.thisSprite.set_pointerEnabled(!1)},showTip:function(a,b){null==b&&(b=!1);this.callback("OPENED");this.ready=!1;null!=this.content&&
this.content.dispose();this.content=new m;k.createImageSprite(this.bubble,this.content,"blank",!0,0,0);this.nextContent="NONE";switch(a){case "ANOTHER":var c=new m;k.createImageSprite(this.content,c,"hud/customer4_head",!0,243,60);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("another"));break;case "CARROTS":c=new m;k.createImageSprite(this.content,c,"tips/fruit",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipTutorial2"));
break;case "CHAIN":c=new m;k.createImageSprite(this.content,c,"tips/hud2",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipChain"));this.nextContent="CHAIN2";break;case "CHAIN2":c=new m;k.createImageSprite(this.content,c,"game/products/carrot",!0,203,50);c.$BF[1].setScale(0.7);c=new m;k.createImageSprite(this.content,c,"game/products/tomato",!0,283,50);c.$BF[1].setScale(0.7);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,
100,g.translations.node.resolve("tipChain2"));break;case "CHIPS":c=(new m).add(new pa(243,55));this.content.addChild(c);c.$BF[22].show(1);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipChips"));break;case "CLEAN":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_bobby_inactive",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipClean"));break;case "DROP":c=new m;k.createImageSprite(this.content,
c,"tips/hud",!0,223,55);c.$BF[1].setScale(0.6);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipDrop"));break;case "DROP2":c=new m;k.createImageSprite(this.content,c,"tips/hud",!0,223,55);c.$BF[1].setScale(0.6);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipDrop2"));break;case "HAPPY":c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipHappy"));break;
case "HELP":c=new m;k.createImageSprite(this.content,c,"hud/BTN_hector",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipHints"));break;case "LIST":c=new m;k.createImageSprite(this.content,c,"game/products/chips",!0,243,50);c.$BF[1].setScale(0.7);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,90,g.translations.node.resolve("tipList"));break;case "LOSE":c=new m;k.createImageSprite(this.content,c,"hud/cross_small",!0,243,
55);c=new m;k.createImageSprite(this.content,c,"hud/cross_small",!0,193,55);c=new m;k.createImageSprite(this.content,c,"hud/cross_small",!0,293,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,90,g.translations.node.resolve("tipLose"));break;case "LOWSTOCK":c=new m;k.createImageSprite(this.content,c,"tips/warning_icon",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipLowStock"));break;case "METER":c=new m;k.createImageSprite(this.content,
c,"game/meter",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipMeter"));this.nextContent="METER2";break;case "METER2":c=new m;k.createImageSprite(this.content,c,"game/meter2",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipMeter2"));this.nextContent="METER3";break;case "METER3":c=new m;k.createImageSprite(this.content,c,"game/meter3",!0,243,55);c=new m;k.createXMLSprite(this.content,
c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipMeter3"));this.nextContent="HELP";break;case "PARTIAL":c=new m;k.createImageSprite(this.content,c,"hud/customer1_head",!0,168,65);c=new m;k.createImageSprite(this.content,c,"game/meter",!0,303,60);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipSingleItem"));this.nextContent="PARTIAL2";break;case "PARTIAL2":c=new m;k.createImageSprite(this.content,c,"tips/partial",!0,243,55);c=new m;k.createXMLSprite(this.content,
c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipSingleItem2"));break;case "PAWPRINTS":c=new m;k.createImageSprite(this.content,c,"game/footprints",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipClean"));break;case "RESTOCK":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_bobby_inactive",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipRestock"));break;
case "RONNIE":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_ronnie_inactive",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipRonnie"));break;case "SALE":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_bobby_inactive",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipSale"));break;case "STACK":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_bobby_inactive",
!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipStack"));break;case "TIDY":c=new m;k.createImageSprite(this.content,c,"hud/customer1_head",!0,239,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,88,g.translations.node.resolve("tipTidy"));break;case "TIDYCLEAN":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_bobby_inactive",!0,239,50);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,88,g.translations.node.resolve("tipTidyClean"));
break;case "TOMATO":c=new m;k.createImageSprite(this.content,c,"tips/icecream",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipTutorial3"));break;case "TUTORIAL0":c=new m;k.createImageSprite(this.content,c,"hud/exclaim",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipTutorial0"));this.nextContent="AUTOCLOSE";break;case "TUTORIAL1":c=new m;k.createImageSprite(this.content,c,
"hud/customer1_head",!0,243,60);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipTutorial1"));break;case "TUTORIAL4":c=new m;k.createImageSprite(this.content,c,"hud/BTN_char_ronnie_inactive",!0,243,55);c=new m;k.createXMLSprite(this.content,c,g.tipFont,"Center",243,100,g.translations.node.resolve("tipTutorial4"));break;case "TUTORIAL5":c=new m,k.createImageSprite(this.content,c,"tips/like_icon",!0,243,65),c=new m,k.createXMLSprite(this.content,c,
g.tipFont,"Center",243,120,g.translations.node.resolve("tipHappy")),c=c.$BF[1],c=c instanceof K?c:null,c.set_text(c.$oI+"..."),this.nextContent="RESTOCK"}this.multiPart||b?this.show2():this.show()},skip:function(){return"NONE"!=this.nextContent?(this.multiPart=!0,this.showTip(this.nextContent),!0):!1},show:function(){var a=this;this.gradient.$BF[1].alpha.animate(0,1,0.25);g.hectorTalking=!0;var b=new C;b.run(new D([new u(0.1),new t(function(){a.hector.$BF[23].loop("idle");a.hector.$BF[1].y.animate(a.hectorDown,
a.hectorUp,0.4,H.sineOut);a.playSound("hector_appear")}),new u(0.4),new t(function(){a.hector.$BF[23].play("point","talk")}),new u(0.4),new t(function(){M.spawn(a.bubble,0,0.5,0.5)}),new u(0.25),new t(function(){a.ready=!0;if("AUTOCLOSE"==a.nextContent){var b=new C;b.run(new D([new u(2.5),new t(function(){a.callback("NEXTWAVE");a.close()})]));a.hector.add(b)}else a.callback("READY"),"NONE"==a.nextContent?a.multiPart=!1:(b=new C,b.run(new D([new u(4.5),new t(function(){a.multiPart=!0;a.showTip(a.nextContent)})])),
a.hector.add(b))})]));this.hector.add(b)},show2:function(){var a=this;this.ready=!1;var b=new C;b.run(new D([new u(0.5),new t(function(){a.ready=!0;a.callback("READY");if("NONE"==a.nextContent)a.multiPart=!1;else{var b=new C;b.run(new D([new u(4),new t(function(){a.multiPart=!0;a.showTip(a.nextContent)})]));a.hector.add(b)}})]));this.hector.add(b)},close:function(){var a=this;this.bubble.$BF[1].alpha.animateTo(0,0.2);this.hector.$BF[1].y.animate(this.hectorUp,this.hectorDown,0.5,H.sineIn);this.gradient.$BF[1].alpha.animateTo(0,
0.5);this.hector.$BF[23].play("unpoint","idle");this.thisSprite.set_pointerEnabled(!1);var b=new C;b.run(new D([new u(0.1),new t(function(){g.hectorTalking=!1;a.callback("CLOSED")})]));this.hector.add(b)},showDebrief:function(){var a=this;g.hectorTalking=!0;var b=new C;b.run(new D([new u(0.1),new t(function(){a.hector.$BF[23].loop("idle");a.hector.$BF[1].y.animate(a.hectorDown,a.hectorUp,0.4,H.sineOut);a.playSound("hector_appear")}),new u(0.4),new t(function(){a.hector.$BF[23].play("point","talk")})]));
this.hector.add(b)},playSound:function(a){this.sfx=g.pack.getSound("audio/"+a).play()},__class__:Md});var k=function(){};l["project.Utils"]=k;k.__name__=["project","Utils"];k.randomNumber=function(a,b){return Math.round(Math.random()*(b-a)+a)};k.randomNumberFloat=function(a,b){return Math.random()*(b-a)+a};k.coinFlip=function(){return 51>k.randomNumber(1,100)?!0:!1};k.shuffle=function(a){for(var b=a.length;1<b;){var c=N.random(b);--b;var d=a[b];a[b]=a[c];a[c]=d}return a};k.vectorDistance=function(a,
b,c,d){return Math.sqrt(Math.pow(a-b,2)+Math.pow(c-d,2))};k.addDebugSpeedAdjuster=function(a){null==a.$BF[9]&&a.add(new fb(1));return n.$2F.getKeyboard().down.connect(function(b){var c=a.$BF[9];b.key==e.LeftBracket?(b=c.scale,b.set__(b.$hF/1.61803398875)):b.key==e.RightBracket&&(b=c.scale,b.set__(1.61803398875*b.$hF))})};k.createImageSprite=function(a,b,c,d,e,h,k,l){null==l&&(l=1);null==k&&(k="MAIN");if(null==k)b.add(new G(g.pack.getTexture(c)));else switch(k){case "GAME":b.add(new G(g.gamePack.getTexture(c)));
break;case "LOADER":b.add(new G(g.loaderPack.getTexture(c)));break;default:b.add(new G(g.pack.getTexture(c)))}a.addChild(b);d&&b.$BF[1].centerAnchor();b.$BF[1].x.set__(e);b.$BF[1].y.set__(h);g.lite&&(80==l?b.$BF[1].setScale(1.25):50==l&&b.$BF[1].setScale(2))};k.createFillSprite=function(a,b,c,d,e,g,k,l,m){b.add(new S(c,k,l));a.addChild(b);d&&b.$BF[1].centerAnchor();b.$BF[1].x.set__(e);b.$BF[1].y.set__(g);b.$BF[1].alpha.set__(m)};k.createTextSprite=function(a,b,c,d,e,g,k,l){b.add(new K(c));a.addChild(b);
"Left"==d?(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Left)):"Right"==d?(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Right)):(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Center));a=b.$BF[1];(a instanceof K?a:null).x.set__(e);e=b.$BF[1];(e instanceof K?e:null).y.set__(g);g=b.$BF[1];(g instanceof K?g:null).set_text(k);null!=l&&(k=b.$BF[1],k=(k instanceof K?k:null).x,k.set__(k.$hF+N.parseInt(l.att.resolve("offsetX"))),k=b.$BF[1],k=(k instanceof K?k:null).y,k.set__(k.$hF+N.parseInt(l.att.resolve("offsetY"))),
b=b.$BF[1],(b instanceof K?b:null).setScale(parseFloat(l.att.resolve("fontScale"))))};k.createXMLSprite=function(a,b,c,d,e,g,k){b.add(new K(c));a.addChild(b);"Left"==d?(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Left)):"Right"==d?(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Right)):(a=b.$BF[1],(a instanceof K?a:null).set_align(ia.Center));a=b.$BF[1];(a instanceof K?a:null).x.set__(e);e=b.$BF[1];(e instanceof K?e:null).y.set__(g);g=b.$BF[1];(g instanceof K?g:null).set_text(k.get_innerData());
g=b.$BF[1];g=(g instanceof K?g:null).x;g.set__(g.$hF+N.parseInt(k.att.resolve("offsetX")));g=b.$BF[1];g=(g instanceof K?g:null).y;g.set__(g.$hF+N.parseInt(k.att.resolve("offsetY")));b=b.$BF[1];(b instanceof K?b:null).setScale(parseFloat(k.att.resolve("fontScale")))};k.rolloverImage=function(a,b,c,d){g.isMobile||(d.hit==a.$BF[1]?(b=a.$BF[1],(b instanceof G?b:null).texture=g.pack.getTexture(c),n.$2F.$JF.set_cursor(la.Button)):(c=a.$BF[1],(c instanceof G?c:null).texture=g.pack.getTexture(b),n.$2F.$JF.set_cursor(la.Default)))};
k.pulseBtn=function(a,b,c){var d=[];d.push(new ua(a.$BF[1].scaleX,b,c));d.push(new ua(a.$BF[1].scaleY,b,c));b=[];b.push(new ua(a.$BF[1].scaleX,1,c));b.push(new ua(a.$BF[1].scaleY,1,c));c=new C;c.run(new Ha(new D([new bb(d),new bb(b)])));a.add(c)};k.mute=function(a){a?(g.muted=!0,n.volume.set__(0)):(g.muted=!1,n.volume.set__(1))};k.alignLeft=function(a){g.resizeScreen&&(a=a.$BF[1].x,a.set__(a.$hF-g.offsetX/2))};k.alignRight=function(a){g.resizeScreen&&(a=a.$BF[1].x,a.set__(a.$hF+g.offsetX/2))};k.detectLowEndDevice=
function(){var a=window.navigator.userAgent.toLowerCase();if(-1!=a.indexOf("ipod")||-1!=a.indexOf("iphone")||-1!=a.indexOf("ipad")){var a=window.screen.width*window.devicePixelRatio,b=window.screen.height*window.devicePixelRatio;if(1024==a&&768==b||768==a&&1024==b)g.lite=!0}navigator.isCocoonJS&&(g.nickApp=!0,g.liteAssetsInApp&&(g.lite=!0))};k.__super__=r;k.prototype=s(r.prototype,{get_entitySlot:function(){return 12},__class__:k});var lf=function(){};l["spine.Updatable"]=lf;lf.__name__=["spine",
"Updatable"];var Me=function(){};l["spine.Bone"]=Me;Me.__name__=["spine","Bone"];Me.__interfaces__=[lf];Me.prototype={__class__:Me};var bf=function(){};l["spine.BoneData"]=bf;bf.__name__=["spine","BoneData"];bf.prototype={__class__:bf};var qf=function(){};l["spine.EventData"]=qf;qf.__name__=["spine","EventData"];var cf=function(){};l["spine.IkConstraintData"]=cf;cf.__name__=["spine","IkConstraintData"];cf.prototype={__class__:cf};var df=function(){};l["spine.PathConstraintData"]=df;df.__name__=["spine",
"PathConstraintData"];df.prototype={__class__:df};var ef=function(){};l["spine.Skeleton"]=ef;ef.__name__=["spine","Skeleton"];ef.prototype={__class__:ef};var rf=function(){};l["spine.SkeletonData"]=rf;rf.__name__=["spine","SkeletonData"];var sf=function(){};l["spine.Skin"]=sf;sf.__name__=["spine","Skin"];var ff=function(){};l["spine.SlotData"]=ff;ff.__name__=["spine","SlotData"];ff.prototype={__class__:ff};var gf=function(){};l["spine.TransformConstraintData"]=gf;gf.__name__=["spine","TransformConstraintData"];
gf.prototype={__class__:gf};var hf=function(){};l["spine.attachments.Attachment"]=hf;hf.__name__=["spine","attachments","Attachment"];var Vb=function(){};l["spine.attachments.VertexAttachment"]=Vb;Vb.__name__=["spine","attachments","VertexAttachment"];Vb.__super__=hf;Vb.prototype=s(hf.prototype,{__class__:Vb});var Ne=function(){};l["spine.attachments.MeshAttachment"]=Ne;Ne.__name__=["spine","attachments","MeshAttachment"];Ne.__super__=Vb;Ne.prototype=s(Vb.prototype,{__class__:Ne});var kf,uf=0;l.Math=
Math;String.prototype.__class__=l.String=String;String.__name__=["String"];l.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=l.Date=Date;Date.__name__=["Date"];var wf=l.Int={__name__:["Int"]},vf=l.Dynamic={__name__:["Dynamic"]},nf=l.Float=Number;nf.__name__=["Float"];var mf=l.Bool=Boolean;mf.__ename__=["Bool"];var xf=l.Class={__name__:["Class"]},yf={},E={};x.Element=0;x.PCData=1;x.CData=2;x.Comment=3;x.DocType=4;x.ProcessingInstruction=5;x.Document=6;va.DEFAULT_RESOLVER=new Wb;va.BASE64=
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";Aa.count=0;Ta.escapes=function(a){a=new P;null!=E.lt?a.setReserved("lt","<"):a.h.lt="<";null!=E.gt?a.setReserved("gt",">"):a.h.gt=">";null!=E.amp?a.setReserved("amp","&"):a.h.amp="&";null!=E.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=E.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);U.__toStr={}.toString;m.$DF=new $d;Ja.$fF=new Ja;ma.$wF=new mb(null,null);n.root=new m;n.uncaughtError=new Y;n.lowMemoryWarning=new db;
n.hidden=new ea(!1);n.volume=new L(1);n.$2F=Ja.$fF;ic.logger=new ce(n.$2F.createLogHandler("2DKit"));wa.$SG=null!=(new XMLHttpRequest).withCredentials;Ua.__creator={spawned:Q.CBool,onStarted:Q.CString,onUpdated:Q.CString,onStopped:Q.CString};lc.__creator={following:Q.CClass(m),zoom:Q.CClass(L),active:Q.CBool,offsetX:Q.CFloat,offsetY:Q.CFloat};Va.$XG="@State:";Wa.__creator={target:Q.CClass(Va)};v.$AH=new Da;v.$BH=new ya;v.$CH=new pc;xa.ENTITY_SLOT=1;xa.NAME="1";xa.$aH=new sa;ha.$MI=new $c(10);Ka.$ML=
new oe;za.$ML=new pe;qa.$ML=new qe;fa.__meta__={obj:{injected:[{scenes:{},height:720,id:"com.artofplaygames.casagrandes",orientation:"landscape",fullscreen:!0,assets:{preloader:[{bytes:540,name:"loaderbar_background.png"},{bytes:442,name:"loaderbar_background.webp"},{bytes:788,name:"loaderbar_frame.png"},{bytes:119,name:"loaderbar_full.png"},{bytes:18766,name:"tinyfont.webp"},{bytes:23901,name:"vts28.fnt.__gz.txt"},{bytes:11487,name:"tinyfont.png"},{bytes:10814,name:"logo.png"},{bytes:5056,name:"vts28.png"},
{bytes:158372,name:"background.webp"},{bytes:990,name:"loaderbar_frame.webp"},{bytes:92,name:"loaderbar_full.webp"},{bytes:3630,name:"vts28.webp"},{bytes:22695,name:"tinyfont.fnt.__gz.txt"},{bytes:14500,name:"logo.webp"},{bytes:640858,name:"background.png"}],mainassets:[{bytes:124,name:"blank.png"},{bytes:82,name:"blank.webp"},{bytes:212,name:"blankScreen.png"},{bytes:1224,name:"blankScreen.webp"},{bytes:4598,name:"audio/blank.ogg"},{bytes:1251,name:"audio/blank.mp3"},{bytes:21542,name:"audio/cash_register.ogg"},
{bytes:52511,name:"audio/aisle_impact.ogg"},{bytes:20080,name:"audio/cash_register.mp3"},{bytes:5649,name:"audio/click.ogg"},{bytes:3963,name:"audio/Click1.mp3"},{bytes:33282,name:"audio/aisle_impact.mp3"},{bytes:120001,name:"audio/CG_MercadoMayhem_Menu_v1.ogg"},{bytes:3760,name:"audio/click.mp3"},{bytes:63319,name:"audio/CG_MercadoMayhem_Stinger_v1.mp3"},{bytes:31881,name:"audio/CG_MercadoMayhem_SuperSaleStinger.ogg"},{bytes:20734,name:"audio/CG_MercadoMayhem_Stinger_v1.ogg"},{bytes:215678,name:"audio/CG_MercadoMayhem_Gameplay2.ogg"},
{bytes:103444,name:"audio/CG_MercadoMayhem_SuperSaleStinger.mp3"},{bytes:7187,name:"audio/Click4.ogg"},{bytes:4798,name:"audio/Click5.mp3"},{bytes:6942,name:"audio/Click1.ogg"},{bytes:7078,name:"audio/Click2.ogg"},{bytes:7978,name:"audio/Click3.mp3"},{bytes:4192,name:"audio/coin.mp3"},{bytes:9590,name:"audio/Click3.ogg"},{bytes:242419,name:"audio/CG_MercadoMayhem_Gameplay1.ogg"},{bytes:4589,name:"audio/Click4.mp3"},{bytes:4146,name:"audio/Click2.mp3"},{bytes:8011,name:"audio/Click5.ogg"},{bytes:373654,
name:"audio/CG_MercadoMayhem_Menu_v1.mp3"},{bytes:722232,name:"audio/CG_MercadoMayhem_Gameplay1.mp3"},{bytes:651388,name:"audio/CG_MercadoMayhem_Gameplay2.mp3"},{bytes:50332,name:"audio/customer_enter.ogg"},{bytes:32088,name:"audio/customer_lose.mp3"},{bytes:35230,name:"audio/customer_enter.mp3"},{bytes:15035,name:"audio/dog_bark.mp3"},{bytes:43359,name:"audio/customer_lose2.mp3"},{bytes:61340,name:"audio/customer_lose2.ogg"},{bytes:21357,name:"audio/dog_bark.ogg"},{bytes:47429,name:"audio/customer_lose.ogg"},
{bytes:7212,name:"audio/coin.ogg"},{bytes:58255,name:"audio/dog_pant.ogg"},{bytes:4698,name:"audio/drop_item.mp3"},{bytes:4907,name:"audio/hector_appear.mp3"},{bytes:10105,name:"audio/female_customer_UGH.ogg"},{bytes:4921,name:"audio/female_customer_UGH.mp3"},{bytes:9924,name:"audio/drop_item.ogg"},{bytes:108857,name:"audio/dog_pant.mp3"},{bytes:14068,name:"audio/footstep1.ogg"},{bytes:2403,name:"audio/pickup_shelf_item.mp3"},{bytes:12512,name:"audio/footstep2.mp3"},{bytes:9794,name:"audio/hector_appear.ogg"},
{bytes:13507,name:"audio/footstep1.mp3"},{bytes:21644,name:"fonts/asphalt_36.png"},{bytes:6363,name:"audio/swoosh.mp3"},{bytes:13103,name:"audio/footstep2.ogg"},{bytes:9104,name:"fonts/goFont.png"},{bytes:33163,name:"audio/stock_shelf.ogg"},{bytes:16575,name:"audio/male_customer_UGH.ogg"},{bytes:6221,name:"audio/pickup_shelf_item.ogg"},{bytes:21123,name:"audio/mop_floor_loop.ogg"},{bytes:11376,name:"audio/male_customer_UGH.mp3"},{bytes:22673,name:"audio/mop_floor_loop.mp3"},{bytes:23037,name:"fonts/int20.png"},
{bytes:8678,name:"audio/swoosh.ogg"},{bytes:41897,name:"audio/stock_shelf.mp3"},{bytes:12019,name:"fonts/asphalt_36.fnt.__gz.txt"},{bytes:16106,name:"fonts/asphalt_36.webp"},{bytes:1971,name:"fonts/goFont.fnt.__gz.txt"},{bytes:24303,name:"fonts/int24.png"},{bytes:8294,name:"fonts/goFont.webp"},{bytes:47790,name:"fonts/int20.fnt.__gz.txt"},{bytes:19176,name:"fonts/int24.webp"},{bytes:50961,name:"fonts/goFontInt.fnt.__gz.txt"},{bytes:17970,name:"fonts/int20.webp"},{bytes:23177,name:"fonts/vts28.png"},
{bytes:210021,name:"fonts/goFontInt.png"},{bytes:29037,name:"fonts/int28.png"},{bytes:47795,name:"fonts/int24.fnt.__gz.txt"},{bytes:13876,name:"fonts/vts_32.png"},{bytes:49190,name:"fonts/intTitle.fnt.__gz.txt"},{bytes:68195,name:"fonts/intTitle.png"},{bytes:234748,name:"fonts/goFontInt.webp"},{bytes:11487,name:"fonts/tinyfont.png"},{bytes:18766,name:"fonts/tinyfont.webp"},{bytes:2964,name:"pause/header.webp"},{bytes:18422,name:"fonts/vts28.webp"},{bytes:23612,name:"fonts/int28.webp"},{bytes:49187,
name:"fonts/int28.fnt.__gz.txt"},{bytes:8793,name:"pause/pause_screen.png"},{bytes:2572,name:"pause/header.png"},{bytes:12026,name:"fonts/vts_32.fnt.__gz.txt"},{bytes:11096,name:"fonts/vts_32.webp"},{bytes:81360,name:"fonts/intTitle.webp"},{bytes:12278,name:"pause/pause_screen.webp"},{bytes:7476,name:"sale/super_sale.png"},{bytes:8260,name:"sale/super_sale.webp"},{bytes:39575,name:"sale/customer_cloud.png"},{bytes:22695,name:"fonts/tinyfont.fnt.__gz.txt"},{bytes:22251,name:"sale/pinata.png"},{bytes:23901,
name:"fonts/vts28.fnt.__gz.txt"},{bytes:16100,name:"sale/pinata.webp"},{bytes:54566,name:"sale/flags.webp"},{bytes:36302,name:"sale/customer_cloud.webp"},{bytes:4372,name:"screens/1_star.png"},{bytes:112680,name:"sale/background_empty.webp"},{bytes:65599,name:"sale/flags.png"},{bytes:4423,name:"screens/2_star.png"},{bytes:160832,name:"sale/background_full.webp"},{bytes:4395,name:"screens/3_star.png"},{bytes:5788,name:"screens/3_star.webp"},{bytes:5620,name:"screens/2_star.webp"},{bytes:4206,name:"screens/5_star.png"},
{bytes:52386,name:"screens/background.png"},{bytes:5386,name:"screens/1_star.webp"},{bytes:4346,name:"screens/4_star.png"},{bytes:4053,name:"screens/click_tap_text.png"},{bytes:1356,name:"screens/coin.png"},{bytes:5972,name:"screens/4_star.webp"},{bytes:1493,name:"screens/coin_angle.png"},{bytes:1036,name:"screens/coin.webp"},{bytes:6156,name:"screens/5_star.webp"},{bytes:3058,name:"screens/cust1.png"},{bytes:5532,name:"screens/click_tap_text.webp"},{bytes:2998,name:"screens/cust2.png"},{bytes:43360,
name:"screens/background.webp"},{bytes:2680,name:"screens/cust4.png"},{bytes:933943,name:"sale/background_empty.png"},{bytes:159212,name:"screens/bg.webp"},{bytes:2658,name:"screens/cust5.png"},{bytes:1198,name:"screens/coin_angle.webp"},{bytes:2609,name:"screens/cust3.png"},{bytes:3187,name:"screens/cust6.png"},{bytes:885223,name:"sale/background_full.png"},{bytes:7253,name:"screens/go_header.png"},{bytes:637691,name:"screens/bg.png"},{bytes:1614,name:"screens/cust3.webp"},{bytes:18213,name:"screens/help.png"},
{bytes:1978,name:"screens/cust1.webp"},{bytes:1928,name:"screens/cust6.webp"},{bytes:1995,name:"screens/help_desktop.png"},{bytes:2304,name:"screens/help_desktop.webp"},{bytes:2030,name:"screens/cust2.webp"},{bytes:1608,name:"screens/cust4.webp"},{bytes:7866,name:"screens/picture_frame_empty.png"},{bytes:1686,name:"screens/cust5.webp"},{bytes:3014,name:"screens/hud2.png"},{bytes:2666,name:"screens/help_mobile.png"},{bytes:8710,name:"screens/go_header.webp"},{bytes:16542,name:"screens/help.webp"},
{bytes:16399,name:"screens/title.png"},{bytes:2964,name:"tips/fruit.webp"},{bytes:4906,name:"tips/fruit.png"},{bytes:1770,name:"screens/hud2.webp"},{bytes:38158,name:"screens/picture_frame_full.png"},{bytes:3861,name:"tips/hector_icon.png"},{bytes:2840,name:"tips/hud.png"},{bytes:18749,name:"screens/ronnie.png"},{bytes:7222,name:"screens/picture_frame_empty.webp"},{bytes:1730,name:"tips/hud2.webp"},{bytes:3542,name:"tips/gradient_overlay.png"},{bytes:1398,name:"tips/like_icon.webp"},{bytes:2765,name:"tips/hud2.png"},
{bytes:2816,name:"screens/help_mobile.webp"},{bytes:3811,name:"tips/icecream.png"},{bytes:1224,name:"tips/like_icon.png"},{bytes:2960,name:"tips/partial.png"},{bytes:19934,name:"screens/title.webp"},{bytes:3762,name:"tips/speech_bubble.webp"},{bytes:1714,name:"tips/warning_icon.webp"},{bytes:2074,name:"tips/hector_icon.webp"},{bytes:3362,name:"tips/speech_bubble.png"},{bytes:2240,name:"tips/gradient_overlay.webp"},{bytes:1714,name:"tips/partial.webp"},{bytes:1478,name:"tips/warning_icon.png"},{bytes:6594,
name:"game/aisle.webp"},{bytes:4152,name:"game/aisle.png"},{bytes:16858,name:"screens/ronnie.webp"},{bytes:1640,name:"tips/hud.webp"},{bytes:7230,name:"game/aisle_end1_full.png"},{bytes:4062,name:"game/aisle_end1_smashed.webp"},{bytes:22140,name:"screens/picture_frame_full.webp"},{bytes:2100,name:"tips/icecream.webp"},{bytes:3982,name:"game/aisle_end1_smashed.png"},{bytes:8508,name:"game/aisle_end2_full.png"},{bytes:6052,name:"game/aisle_end2_smashed.png"},{bytes:6390,name:"game/aisle_end2_smashed.webp"},
{bytes:4955,name:"game/aisle_end3_full.png"},{bytes:5842,name:"game/aisle_end3_full.webp"},{bytes:4286,name:"game/aisle_end3_smashed.png"},{bytes:4916,name:"game/aisle_end3_smashed.webp"},{bytes:322,name:"game/aisle_number1.png"},{bytes:7674,name:"game/aisle_end1_full.webp"},{bytes:476,name:"game/aisle_number1.webp"},{bytes:402,name:"game/aisle_number2.png"},{bytes:708,name:"game/aisle_number2.webp"},{bytes:404,name:"game/aisle_number3.png"},{bytes:9032,name:"game/aisle_end2_full.webp"},{bytes:891,
name:"game/aisle_top_1.png"},{bytes:1576,name:"game/aisle_top_2.png"},{bytes:1738,name:"game/aisle_top_2.webp"},{bytes:2028,name:"game/aisle_top_3.png"},{bytes:2264,name:"game/aisle_top_3.webp"},{bytes:742,name:"game/aisle_number3.webp"},{bytes:1248,name:"game/apple.png"},{bytes:547,name:"game/bobby_shadow.png"},{bytes:1098,name:"game/aisle_top_1.webp"},{bytes:1142,name:"game/can.png"},{bytes:618,name:"game/customer1_shadow.png"},{bytes:676,name:"game/customer1_shadow.webp"},{bytes:674,name:"game/customer_gauge_frame.png"},
{bytes:141505,name:"game/background_extended.png"},{bytes:1016,name:"game/debris1.png"},{bytes:1166,name:"game/apple.webp"},{bytes:1068,name:"game/debris1.webp"},{bytes:1510,name:"game/debris2.png"},{bytes:469,name:"game/debris3.png"},{bytes:616,name:"game/bobby_shadow.webp"},{bytes:7314,name:"game/doorMask.png"},{bytes:1094,name:"game/can.webp"},{bytes:688,name:"game/customer_gauge_frame.webp"},{bytes:708,name:"game/face0.png"},{bytes:708,name:"game/face1.png"},{bytes:1602,name:"game/debris2.webp"},
{bytes:664,name:"game/face2.png"},{bytes:484,name:"game/debris3.webp"},{bytes:685,name:"game/face3.png"},{bytes:514,name:"game/face3.webp"},{bytes:778,name:"game/face5.png"},{bytes:685,name:"game/face4.png"},{bytes:1531,name:"game/flour.png"},{bytes:514,name:"game/face4.webp"},{bytes:926,name:"game/footprints.png"},{bytes:1828,name:"game/footprints.webp"},{bytes:498,name:"game/face0.webp"},{bytes:520,name:"game/face2.webp"},{bytes:498,name:"game/face1.webp"},{bytes:774,name:"game/footprints1.png"},
{bytes:764,name:"game/footprints1.webp"},{bytes:8028,name:"game/doorMask.webp"},{bytes:820,name:"game/footprints2.png"},{bytes:805,name:"game/footprints3.png"},{bytes:778,name:"game/footprints3.webp"},{bytes:482,name:"game/face5.webp"},{bytes:1656,name:"game/flour.webp"},{bytes:533,name:"game/gauge0.png"},{bytes:582,name:"game/gauge1.webp"},{bytes:540,name:"game/gauge1.png"},{bytes:124726,name:"game/background_extended.webp"},{bytes:556,name:"game/gauge2.png"},{bytes:844,name:"game/footprints2.webp"},
{bytes:557,name:"game/gauge3.png"},{bytes:648,name:"game/gauge3.webp"},{bytes:546,name:"game/gauge0.webp"},{bytes:510,name:"game/gauge5.png"},{bytes:543,name:"game/gauge4.png"},{bytes:716,name:"game/gauge4.webp"},{bytes:1521,name:"game/meter2.png"},{bytes:1290,name:"game/meter.png"},{bytes:644,name:"game/gauge2.webp"},{bytes:1404,name:"game/meter2.webp"},{bytes:1413,name:"game/meter3.png"},{bytes:514,name:"game/ronnie_shadow.png"},{bytes:2878,name:"game/stack_burst.webp"},{bytes:2294,name:"game/stack_burst.png"},
{bytes:9776,name:"game/street.png"},{bytes:654,name:"game/gauge5.webp"},{bytes:560,name:"game/ronnie_shadow.webp"},{bytes:1318,name:"game/meter3.webp"},{bytes:1300,name:"game/meter.webp"},{bytes:8621,name:"game/update_frame.png"},{bytes:2847,name:"game/update_header.png"},{bytes:1574,name:"buttons/BTN_audio_off_rollover.webp"},{bytes:1478,name:"buttons/BTN_audio_off_rollover.png"},{bytes:3276,name:"game/update_header.webp"},{bytes:1478,name:"buttons/BTN_audio_off.png"},{bytes:1576,name:"buttons/BTN_audio_on.png"},
{bytes:1576,name:"buttons/BTN_audio_on_rollover.png"},{bytes:9096,name:"game/street.webp"},{bytes:12042,name:"game/update_frame.webp"},{bytes:1490,name:"buttons/BTN_back.webp"},{bytes:1215,name:"buttons/BTN_back_rollover.png"},{bytes:1215,name:"buttons/BTN_back.png"},{bytes:1488,name:"buttons/BTN_back_rollover.webp"},{bytes:1143,name:"buttons/BTN_close.png"},{bytes:1143,name:"buttons/BTN_close_rollover.png"},{bytes:1229,name:"buttons/BTN_continue.png"},{bytes:1588,name:"buttons/BTN_audio_off.webp"},
{bytes:1738,name:"buttons/BTN_audio_on.webp"},{bytes:1436,name:"buttons/BTN_continue.webp"},{bytes:1229,name:"buttons/BTN_continue_rollover.png"},{bytes:1742,name:"buttons/BTN_audio_on_rollover.webp"},{bytes:1240,name:"buttons/BTN_help.png"},{bytes:1122,name:"buttons/BTN_close.webp"},{bytes:1438,name:"buttons/BTN_help.webp"},{bytes:1240,name:"buttons/BTN_help_rollover.png"},{bytes:1096,name:"buttons/BTN_close_rollover.webp"},{bytes:1389,name:"buttons/BTN_home.png"},{bytes:1389,name:"buttons/BTN_home_rollover.png"},
{bytes:1484,name:"buttons/BTN_home_rollover.webp"},{bytes:803,name:"buttons/BTN_pause.png"},{bytes:844,name:"buttons/BTN_pause.webp"},{bytes:1420,name:"buttons/BTN_continue_rollover.webp"},{bytes:802,name:"buttons/BTN_pause_rollover.png"},{bytes:1166,name:"buttons/BTN_play.png"},{bytes:1494,name:"buttons/BTN_home.webp"},{bytes:1436,name:"buttons/BTN_help_rollover.webp"},{bytes:1165,name:"buttons/BTN_play_rollover.png"},{bytes:1533,name:"buttons/BTN_quit.png"},{bytes:1532,name:"buttons/BTN_quit_rollover.png"},
{bytes:1359,name:"buttons/BTN_replay.png"},{bytes:1360,name:"buttons/BTN_replay_rollover.png"},{bytes:860,name:"buttons/BTN_pause_rollover.webp"},{bytes:1222,name:"buttons/BTN_skip.png"},{bytes:1224,name:"buttons/BTN_skip_rollover.webp"},{bytes:1284,name:"buttons/BTN_play.webp"},{bytes:1300,name:"buttons/BTN_play_rollover.webp"},{bytes:1634,name:"buttons/BTN_quit.webp"},{bytes:1618,name:"buttons/BTN_quit_rollover.webp"},{bytes:1134,name:"buttons/BTN_sound_OFF.png"},{bytes:1223,name:"buttons/BTN_skip_rollover.png"},
{bytes:1476,name:"buttons/BTN_replay.webp"},{bytes:1440,name:"buttons/BTN_replay_rollover.webp"},{bytes:1134,name:"buttons/BTN_sound_OFF_rollover.png"},{bytes:1098,name:"buttons/BTN_sound_OFF_rollover.webp"},{bytes:1150,name:"buttons/BTN_sound_ON.png"},{bytes:1149,name:"buttons/BTN_sound_ON_rollover.png"},{bytes:1232,name:"buttons/BTN_skip.webp"},{bytes:1312,name:"buttons/BTN_tick.png"},{bytes:1313,name:"buttons/BTN_tick_rollover.png"},{bytes:1094,name:"buttons/BTN_sound_OFF.webp"},{bytes:1239,name:"buttons/BTN_zoom.png"},
{bytes:1154,name:"buttons/BTN_sound_ON_rollover.webp"},{bytes:1154,name:"buttons/BTN_sound_ON.webp"},{bytes:1302,name:"buttons/BTN_zoomIn.png"},{bytes:1278,name:"buttons/BTN_zoomOut.png"},{bytes:2265,name:"hud/BTN_char_bobby_active.png"},{bytes:1422,name:"buttons/BTN_tick.webp"},{bytes:2105,name:"hud/BTN_char_bobby_inactive_rollover.png"},{bytes:1830,name:"hud/BTN_char_bobby_inactive_rollover.webp"},{bytes:1390,name:"buttons/BTN_tick_rollover.webp"},{bytes:2104,name:"hud/BTN_char_bobby_inactive.png"},
{bytes:2754,name:"hud/BTN_char_ronnie_active.png"},{bytes:1880,name:"hud/BTN_char_ronnie_active.webp"},{bytes:2602,name:"hud/BTN_char_ronnie_inactive.png"},{bytes:2603,name:"hud/BTN_char_ronnie_inactive_rollover.png"},{bytes:1890,name:"hud/BTN_char_ronnie_inactive_rollover.webp"},{bytes:557,name:"hud/BTN_client_active.png"},{bytes:1182,name:"buttons/BTN_zoom.webp"},{bytes:555,name:"hud/BTN_client_inactive.png"},{bytes:1226,name:"buttons/BTN_zoomOut.webp"},{bytes:555,name:"hud/BTN_client_inactive_rollover.png"},
{bytes:1290,name:"buttons/BTN_zoomIn.webp"},{bytes:1688,name:"hud/BTN_char_bobby_inactive.webp"},{bytes:1818,name:"hud/BTN_char_bobby_active.webp"},{bytes:3588,name:"hud/BTN_hector.png"},{bytes:3595,name:"hud/BTN_hector_rollover.png"},{bytes:1742,name:"hud/BTN_char_ronnie_inactive.webp"},{bytes:1743,name:"hud/BTN_tick.png"},{bytes:1740,name:"hud/BTN_tick_rollover.png"},{bytes:530,name:"hud/BTN_client_active.webp"},{bytes:570,name:"hud/BTN_client_inactive_rollover.webp"},{bytes:550,name:"hud/BTN_client_inactive.webp"},
{bytes:336,name:"hud/check_box.webp"},{bytes:1071,name:"hud/coin_frame.png"},{bytes:854,name:"hud/cross.png"},{bytes:409,name:"hud/check_box.png"},{bytes:2010,name:"hud/BTN_hector.webp"},{bytes:1192,name:"hud/coin_frame2.webp"},{bytes:1392,name:"hud/coin_frame2.png"},{bytes:690,name:"hud/cross_small.png"},{bytes:2014,name:"hud/BTN_hector_rollover.webp"},{bytes:834,name:"hud/BTN_tick.webp"},{bytes:880,name:"hud/BTN_tick_rollover.webp"},{bytes:3066,name:"hud/customer1_head.png"},{bytes:1936,name:"hud/customer1_head.webp"},
{bytes:3097,name:"hud/customer2_head.png"},{bytes:1014,name:"hud/coin_frame.webp"},{bytes:1024,name:"hud/cross.webp"},{bytes:2613,name:"hud/customer3_head.png"},{bytes:754,name:"hud/cross_small.webp"},{bytes:2700,name:"hud/customer4_head.png"},{bytes:1610,name:"hud/customer4_head.webp"},{bytes:2659,name:"hud/customer5_head.png"},{bytes:3186,name:"hud/customer6_head.png"},{bytes:1926,name:"hud/customer6_head.webp"},{bytes:2227,name:"hud/dogItem1.png"},{bytes:1009,name:"hud/dogItem2.png"},{bytes:1896,
name:"hud/customer2_head.webp"},{bytes:535,name:"hud/dogItem3.png"},{bytes:498,name:"hud/exclaim.png"},{bytes:1614,name:"hud/customer3_head.webp"},{bytes:1535,name:"hud/frame.png"},{bytes:1198,name:"hud/dogItem1.webp"},{bytes:3329,name:"hud/HUD_bobby.png"},{bytes:1688,name:"hud/customer5_head.webp"},{bytes:3093,name:"hud/HUD_handover_burst.png"},{bytes:1635,name:"hud/HUD_handover_emoji_icon.png"},{bytes:1130,name:"hud/dogItem2.webp"},{bytes:1364,name:"hud/HUD_handover_emoji_icon.webp"},{bytes:750,
name:"hud/HUD_handover_tick.png"},{bytes:1040,name:"hud/HUD_handover_tick.webp"},{bytes:518,name:"hud/dogItem3.webp"},{bytes:2169,name:"hud/HUD_hand_tap.png"},{bytes:2280,name:"hud/HUD_hand_tap.webp"},{bytes:1256,name:"hud/HUD_mouse_arrow.png"},{bytes:548,name:"hud/exclaim.webp"},{bytes:1352,name:"hud/HUD_mouse_arrow.webp"},{bytes:2956,name:"hud/HUD_bobby.webp"},{bytes:1928,name:"hud/frame.webp"},{bytes:1289,name:"hud/HUD_press_indicator.png"},{bytes:4496,name:"hud/HUD_register.png"},{bytes:1427,
name:"hud/HUD_ronnie.png"},{bytes:4794,name:"hud/HUD_handover_burst.webp"},{bytes:1620,name:"hud/HUD_ronnie.webp"},{bytes:1482,name:"hud/icon_coin.png"},{bytes:2458,name:"hud/icon_register.png"},{bytes:3544,name:"hud/reg_frame.png"},{bytes:2610,name:"hud/reg_frame.webp"},{bytes:1624,name:"hud/HUD_press_indicator.webp"},{bytes:6351,name:"hud/shelf_burst.png"},{bytes:3115,name:"hud/shopping_list.png"},{bytes:1217,name:"hud/target_floor_red.png"},{bytes:1217,name:"hud/target_floor_yellow.png"},{bytes:608,
name:"hud/tick.png"},{bytes:1664,name:"hud/icon_register.webp"},{bytes:1134,name:"hud/icon_coin.webp"},{bytes:3358,name:"hud/HUD_register.webp"},{bytes:1773,name:"sale/cloud/library.json"},{bytes:3086,name:"hud/shopping_list.webp"},{bytes:10382,name:"hud/shelf_burst.webp"},{bytes:1732,name:"hud/target_floor_yellow.webp"},{bytes:1504,name:"hud/target_floor_red.webp"},{bytes:678,name:"hud/tick.webp"},{bytes:86820,name:"sale/cloud/atlas0.webp"},{bytes:131696,name:"sale/cloud/atlas0.png"},{bytes:1482,
name:"game/bursts/coin.png"},{bytes:1134,name:"game/bursts/coin.webp"},{bytes:245584,name:"tips/hector/atlas1.png"},{bytes:298058,name:"tips/hector/atlas0.png"},{bytes:17587,name:"tips/hector/library.json"},{bytes:81648,name:"game/customer2/atlas1.png"},{bytes:14135,name:"game/bobby/library.json"},{bytes:507370,name:"tips/hector/atlas0.webp"},{bytes:310698,name:"tips/hector/atlas1.webp"},{bytes:463059,name:"game/bobby/atlas0.png"},{bytes:33281,name:"game/customer1/library.json"},{bytes:72886,name:"game/customer2/atlas1.webp"},
{bytes:40652,name:"game/customer2/library.json"},{bytes:399136,name:"game/bobby/atlas0.webp"},{bytes:32089,name:"game/customer3/library.json"},{bytes:634772,name:"game/customer3/atlas0.png"},{bytes:817905,name:"game/customer1/atlas0.png"},{bytes:33876,name:"game/customer5/library.json"},{bytes:32706,name:"game/customer4/library.json"},{bytes:32988,name:"game/customer6/library.json"},{bytes:747156,name:"game/customer5/atlas0.png"},{bytes:643215,name:"game/customer4/atlas0.png"},{bytes:824276,name:"game/customer1/atlas0.webp"},
{bytes:614769,name:"game/customer6/atlas0.png"},{bytes:1181293,name:"game/customer2/atlas0.png"},{bytes:433951,name:"game/dog/atlas0.png"},{bytes:24188,name:"game/dog/library.json"},{bytes:1842,name:"game/products/can.png"},{bytes:82,name:"game/products/can0.webp"},{bytes:418522,name:"game/ronnie/atlas0.png"},{bytes:124,name:"game/products/can0.png"},{bytes:3665,name:"game/products/can1.png"},{bytes:4116,name:"game/products/can2.png"},{bytes:2372,name:"game/products/can3.png"},{bytes:18180,name:"game/ronnie/library.json"},
{bytes:777628,name:"game/customer5/atlas0.webp"},{bytes:1142,name:"game/products/can.webp"},{bytes:2544,name:"game/products/carrot.png"},{bytes:1068836,name:"game/customer2/atlas0.webp"},{bytes:654484,name:"game/customer6/atlas0.webp"},{bytes:363658,name:"game/dog/atlas0.webp"},{bytes:124,name:"game/products/carrot0.png"},{bytes:82,name:"game/products/carrot0.webp"},{bytes:1963,name:"game/products/carrot1.png"},{bytes:3947,name:"game/products/carrot2.png"},{bytes:5612,name:"game/products/can2.webp"},
{bytes:3002,name:"game/products/can1.webp"},{bytes:4656,name:"game/products/carrot2.webp"},{bytes:8296,name:"game/products/can3.webp"},{bytes:5371,name:"game/products/carrot3.png"},{bytes:332064,name:"game/ronnie/atlas0.webp"},{bytes:124,name:"game/products/chips0.png"},{bytes:82,name:"game/products/chips0.webp"},{bytes:1504,name:"game/products/carrot.webp"},{bytes:4025,name:"game/products/chips.png"},{bytes:3679,name:"game/products/chips1.png"},{bytes:3650,name:"game/products/chips2.png"},{bytes:2326,
name:"game/products/carrot1.webp"},{bytes:7762,name:"game/products/chips2.webp"},{bytes:612096,name:"game/customer3/atlas0.webp"},{bytes:3476,name:"game/products/chips3.png"},{bytes:599506,name:"game/customer4/atlas0.webp"},{bytes:6752,name:"game/products/carrot3.webp"},{bytes:2501,name:"game/products/cookies.png"},{bytes:82,name:"game/products/cookies0.webp"},{bytes:2048,name:"game/products/chips.webp"},{bytes:124,name:"game/products/cookies0.png"},{bytes:3746,name:"game/products/chips1.webp"},{bytes:6237,
name:"game/products/cookies2.png"},{bytes:5148,name:"game/products/cookies1.png"},{bytes:2427,name:"game/products/cookies3.png"},{bytes:1978,name:"game/products/crackers.png"},{bytes:124,name:"game/products/crackers0.png"},{bytes:82,name:"game/products/crackers0.webp"},{bytes:2358,name:"game/products/crackers2.png"},{bytes:4353,name:"game/products/crackers1.png"},{bytes:10254,name:"game/products/chips3.webp"},{bytes:1274,name:"game/products/cookies.webp"},{bytes:3654,name:"game/products/cookies1.webp"},
{bytes:5102,name:"game/products/crackers2.webp"},{bytes:9066,name:"game/products/cookies2.webp"},{bytes:11726,name:"game/products/cookies3.webp"},{bytes:3134,name:"game/products/dogfood.png"},{bytes:1925,name:"game/products/crackers3.png"},{bytes:124,name:"game/products/dogfood0.png"},{bytes:82,name:"game/products/dogfood0.webp"},{bytes:5032,name:"game/products/dogfood1.png"},{bytes:4538,name:"game/products/dogfood1.webp"},{bytes:912,name:"game/products/crackers.webp"},{bytes:3920,name:"game/products/crackers1.webp"},
{bytes:1886,name:"game/products/icecream.png"},{bytes:2559,name:"game/products/dogfood3.png"},{bytes:5506,name:"game/products/dogfood2.png"},{bytes:10024,name:"game/products/crackers3.webp"},{bytes:1744,name:"game/products/dogfood.webp"},{bytes:124,name:"game/products/mango0.png"},{bytes:1411,name:"game/products/mango.png"},{bytes:82,name:"game/products/mango0.webp"},{bytes:7238,name:"game/products/dogfood2.webp"},{bytes:2306,name:"game/products/mango1.png"},{bytes:3642,name:"game/products/mango2.png"},
{bytes:4144,name:"game/products/mango2.webp"},{bytes:4343,name:"game/products/mango3.png"},{bytes:124,name:"game/products/pancakes0.png"},{bytes:1240,name:"game/products/icecream.webp"},{bytes:1334,name:"game/products/mango.webp"},{bytes:82,name:"game/products/pancakes0.webp"},{bytes:3677,name:"game/products/pancakes1.png"},{bytes:2697,name:"game/products/pancakes.png"},{bytes:2550,name:"game/products/pancakes1.webp"},{bytes:9610,name:"game/products/dogfood3.webp"},{bytes:5289,name:"game/products/pancakes2.png"},
{bytes:2761,name:"game/products/pancakes3.png"},{bytes:1942,name:"game/products/popcorn.webp"},{bytes:3190,name:"game/products/popcorn.png"},{bytes:5828,name:"game/products/mango3.webp"},{bytes:2330,name:"game/products/mango1.webp"},{bytes:82,name:"game/products/popcorn0.webp"},{bytes:124,name:"game/products/popcorn0.png"},{bytes:5502,name:"game/products/popcorn1.webp"},{bytes:6878,name:"game/products/pancakes2.webp"},{bytes:6328,name:"game/products/popcorn1.png"},{bytes:4834,name:"game/products/popcorn2.png"},
{bytes:1662,name:"game/products/rice.webp"},{bytes:1172,name:"game/products/pancakes.webp"},{bytes:124,name:"game/products/rice0.png"},{bytes:2982,name:"game/products/popcorn3.png"},{bytes:9080,name:"game/products/pancakes3.webp"},{bytes:3105,name:"game/products/rice.png"},{bytes:3290,name:"game/products/rice1.png"},{bytes:4231,name:"game/products/rice2.png"},{bytes:2688,name:"game/products/rice3.png"},{bytes:3118,name:"game/products/rice1.webp"},{bytes:82,name:"game/products/rice0.webp"},{bytes:2772,
name:"game/products/sauce.png"},{bytes:124,name:"game/products/sauce0.png"},{bytes:8820,name:"game/products/popcorn2.webp"},{bytes:4139,name:"game/products/sauce2.png"},{bytes:2667,name:"game/products/sauce3.png"},{bytes:82,name:"game/products/sauce0.webp"},{bytes:13388,name:"game/products/popcorn3.webp"},{bytes:6850,name:"game/products/rice2.webp"},{bytes:944,name:"game/products/tomato.png"},{bytes:3387,name:"game/products/sauce1.png"},{bytes:9218,name:"game/products/rice3.webp"},{bytes:2844,name:"game/products/tomato1.png"},
{bytes:4397,name:"game/products/tomato2.png"},{bytes:1766,name:"game/products/sauce.webp"},{bytes:4828,name:"game/products/sauce2.webp"},{bytes:4400,name:"game/products/tomato2.webp"},{bytes:4640,name:"game/products/tomato3.png"},{bytes:124,name:"game/products/tomato0.png"},{bytes:6516,name:"game/products/sauce3.webp"},{bytes:82,name:"game/products/tomato0.webp"},{bytes:2288,name:"game/products/tomato1.webp"},{bytes:930,name:"game/products/tomato.webp"},{bytes:3086,name:"game/products/sauce1.webp"},
{bytes:5218,name:"game/products/tomato3.webp"}],_2DKitOrientation:[{bytes:3720,name:"RotateDevice.png"},{bytes:2190,name:"RotateDevice.webp"}],config:[{bytes:1536,name:"config.xml"},{bytes:6358,name:"translation.xml"}]},width:480}]}};T.$EP=0;T.$FP=0;B.$vP=["webkit","moz","ms"];B.$wP=(new $a("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);B.$LQ=!0;J.$jQ=!0;Ga.$BH=new ya;ga.$VT=0;ga.$WT=1;ga.$XT=2;g.v2=!1;g.nickApp=!1;g.liteAssetsInApp=!1;g.lite=!1;g.minScaleSize=960;g.scale=1;g.offsetX=
0;g.offsetY=0;g.alwaysResize=!1;g.staticWidth=960;g.staticHeight=640;g.isMobile=!1;g.active=!0;g.muted=!1;g.preloaderClick=!1;g.diagonals=!0;g.tileSize=56;g.viewGrid=!1;g.editMode=!1;g.hectorTalking=!1;g.walkOnSpeed=5;g.walkOnSpeedDog=7;g.grumpFactor=1;g.mapData="000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111000000000000000111111111111100111000000000011111111111110011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111000000000000000111111111111100111000000000011111111111110011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001111111111111000000000000000111111111111100111000000000011111111111110011100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000";
g.inTutorial=1;g.productPoolFull="can popcorn sauce dogfood cookies chips pancakes rice crackers tomato mango carrot".split(" ");g.scoreWin=500;g.star2=100;g.star3=350;g.star4=750;g.star5=1500;g.showFPS=!1;g.testMode=!1;g.showDebugInfo=!1;Ye.$ZL()})("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);
