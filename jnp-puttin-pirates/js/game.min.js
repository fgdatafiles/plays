/*! Built with IMPACT - impactjs.com */

(function(window){"use strict";if(!window.createjs){throw(" window.createjs not found, please load createjs");}
Math.lerp=function(current,target,time){return current+time*(target-current)};Math.map=function(x,istart,istop,ostart,ostop){return ostart+(ostop-ostart)*((x-istart)/(istop-istart));};Math.limit=function(x,min,max){return Math.min(max,Math.max(min,x));};Math.roundAt=function(x,precision){if(!precision)return Math.round(x);precision=Math.pow(10,precision||0);return Math.round(x*precision)/precision;};Math.toInt=function(x){return(x|0);};Math.toRad=function(x){return((x*Math.PI)/180);};Math.toDeg=function(x){return((x*180)/Math.PI);};Math.getRandomArbitrary=function(min,max){return Math.random()*(max-min)+min;};Math.range=function(min,max){return Math.floor(Math.random()*(max-min+1))+min;};Object.defineProperty(Array.prototype,'erase',{value:function(item){var i=this.indexOf(item);if(i>=0)this.splice(i,1);return this;},configurable:true});Object.defineProperty(Array.prototype,'random',{value:function(){return this[0|(Math.random()*this.length)];},configurable:true});Object.defineProperty(Array.prototype,'shuffle',{value:function(){var i=this.length,j,temp;if(i===0)return this;while(--i){j=Math.floor(Math.random()*(i+1));temp=this[i];this[i]=this[j];this[j]=temp;}
return this;},configurable:true});Object.defineProperty(Array.prototype,'clone',{value:function(){return this.slice(0);},configurable:true});Object.defineProperty(Array.prototype,'total',{value:function(){var total=0;for(var i=0,l=this.length;i<l;i++){if(typeof this[i]!=="number"){throw(" Method 'total' should not be used on arrays with members that are not of the type 'string'.");}
total+=this[i];}
return total;},configurable:true});Function.prototype.bind=Function.prototype.bind||function(object){var t=this;return function(){return t.apply(object,arguments);};};window.ig={game:null,debug:null,version:'1.23',global:window,modules:{},resources:[],ready:false,baked:false,nocache:'',ua:{},isAudioLimited:false,webGLenabled:false,resized:false,prefix:(window.ImpactPrefix||''),lib:'js/',_current:null,_loadQueue:[],_waitForOnload:0,$:function(selector){return selector.charAt(0)=='#'?document.getElementById(selector.substr(1)):document.getElementsByTagName(selector);},$new:function(name){return document.createElement(name);},copy:function(object){if(!object||typeof(object)!='object'||object instanceof HTMLElement||object instanceof ig.Class){return object;}
else if(object instanceof Array){var c=[];for(var i=0,l=object.length;i<l;i++){c[i]=ig.copy(object[i]);}
return c;}
else{var c={};for(var i in object){c[i]=ig.copy(object[i]);}
return c;}},merge:function(original,extended){for(var key in extended){var ext=extended[key];if(typeof(ext)!='object'||ext instanceof HTMLElement||ext instanceof ig.Class||ext===null){original[key]=ext;}
else{if(!original[key]||typeof(original[key])!='object'){original[key]=(ext instanceof Array)?[]:{};}
ig.merge(original[key],ext);}}
return original;},ksort:function(obj){if(!obj||typeof(obj)!='object'){return[];}
var keys=[],values=[];for(var i in obj){keys.push(i);}
keys.sort();for(var i=0;i<keys.length;i++){values.push(obj[keys[i]]);}
return values;},setVendorAttribute:function(el,attr,val){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);el[attr]=el['ms'+uc]=el['moz'+uc]=el['webkit'+uc]=el['o'+uc]=val;},getVendorAttribute:function(el,attr){var uc=attr.charAt(0).toUpperCase()+attr.substr(1);return el[attr]||el['ms'+uc]||el['moz'+uc]||el['webkit'+uc]||el['o'+uc];},normalizeVendorAttribute:function(el,attr){var prefixedVal=ig.getVendorAttribute(el,attr);if(!el[attr]&&prefixedVal){el[attr]=prefixedVal;}},getImagePixels:function(image,x,y,width,height){var canvas=ig.$new('canvas');canvas.width=image.width;canvas.height=image.height;var ctx=canvas.getContext('2d');ig.System.SCALE.CRISP(canvas,ctx);var ratio=ig.getVendorAttribute(ctx,'backingStorePixelRatio')||1;ig.normalizeVendorAttribute(ctx,'getImageDataHD');var realWidth=image.width/ratio,realHeight=image.height/ratio;canvas.width=Math.ceil(realWidth);canvas.height=Math.ceil(realHeight);ctx.drawImage(image,0,0,realWidth,realHeight);return(ratio===1)?ctx.getImageData(x,y,width,height):ctx.getImageDataHD(x,y,width,height);},module:function(name){if(ig._current){throw("Module '"+ig._current.name+"' defines nothing");}
if(ig.modules[name]&&ig.modules[name].body){throw("Module '"+name+"' is already defined");}
ig._current={name:name,requires:[],loaded:false,body:null};ig.modules[name]=ig._current;ig._loadQueue.push(ig._current);return ig;},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig;},defines:function(body){ig._current.body=body;ig._current=null;ig._initDOMReady();},addResource:function(resource){ig.resources.push(resource);},setNocache:function(set){ig.nocache=set?'?'+Date.now():'';},log:function(){},assert:function(condition,msg){},show:function(name,number){},mark:function(msg,color){},_loadScript:function(name,requiredFrom){ig.modules[name]={name:name,requires:[],loaded:false,body:null};ig._waitForOnload++;var path=ig.prefix+ig.lib+name.replace(/\./g,'/')+'.js'+ig.nocache;var script=ig.$new('script');script.type='text/javascript';script.src=path;script.onload=function(){ig._waitForOnload--;ig._execModules();};script.onerror=function(){throw('Failed to load module '+name+' at '+path+' '+'required from '+requiredFrom);};ig.$('head')[0].appendChild(script);},_execModules:function(){var modulesLoaded=false;for(var i=0;i<ig._loadQueue.length;i++){var m=ig._loadQueue[i];var dependenciesLoaded=true;for(var j=0;j<m.requires.length;j++){var name=m.requires[j];if(!ig.modules[name]){dependenciesLoaded=false;ig._loadScript(name,m.name);}
else if(!ig.modules[name].loaded){dependenciesLoaded=false;}}
if(dependenciesLoaded&&m.body){ig._loadQueue.splice(i,1);m.loaded=true;m.body();modulesLoaded=true;i--;}}
if(modulesLoaded){ig._execModules();}
else if(!ig.baked&&ig._waitForOnload==0&&ig._loadQueue.length!=0){var unresolved=[];for(var i=0;i<ig._loadQueue.length;i++){var unloaded=[];var requires=ig._loadQueue[i].requires;for(var j=0;j<requires.length;j++){var m=ig.modules[requires[j]];if(!m||!m.loaded){unloaded.push(requires[j]);}}
unresolved.push(ig._loadQueue[i].name+' (requires: '+unloaded.join(', ')+')');}
throw("Unresolved (or circular?) dependencies. "+"Most likely there's a name/path mismatch for one of the listed modules "+"or a previous syntax error prevents a module from loading:\n"+
unresolved.join('\n'));}},_DOMReady:function(){if(!ig.modules['dom.ready'].loaded){if(!document.body){return setTimeout(ig._DOMReady,13);}
ig.modules['dom.ready'].loaded=true;ig._waitForOnload--;ig._execModules();}
return 0;},_boot:function(){var useragent=navigator.userAgent;if(document.location.href.match(/\?nocache/)){ig.setNocache(true);}
ig.ua.pixelRatio=window.devicePixelRatio||1;ig.ua.viewport={width:window.innerWidth,height:window.innerHeight};ig.ua.screen={width:window.screen.availWidth*ig.ua.pixelRatio,height:window.screen.availHeight*ig.ua.pixelRatio};ig.ua.IE=/MSIE/i.test(useragent)||/Trident/i.test(useragent);ig.ua.iPhone=/iPhone/i.test(useragent);ig.ua.iPhone4=(ig.ua.iPhone&&ig.ua.pixelRatio==2&&window.screen.height===480);ig.ua.iPad=/iPad/i.test(useragent);if(ig.ua.iPad){window.ondevicemotion=function(e){if(e.acceleration&&window.devicePixelRatio===1){ig.ua.iPad2=true;}
window.ondevicemotion=null;};}
ig.ua.android=/android/i.test(useragent);ig.ua.winPhone=/Windows Phone/i.test(useragent);ig.ua.kindle=/Silk/i.test(useragent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(useragent);ig.ua.touchDevice=(('ontouchstart'in window)||(window.navigator.msMaxTouchPoints));ig.isAudioLimited=ig.ua.mobile&&!createjs.WebAudioPlugin.isSupported();},_initDOMReady:function(){if(ig.modules['dom.ready']){ig._execModules();return;}
ig._boot();ig.modules['dom.ready']={requires:[],loaded:false,body:null};ig._waitForOnload++;if(document.readyState==='complete'){ig._DOMReady();}
else{document.addEventListener('DOMContentLoaded',ig._DOMReady,false);window.addEventListener('load',ig._DOMReady,false);}},};var initializing=false,fnTest=/xyz/.test(function(){xyz;})?/\bparent\b/:/.*/;var lastClassId=0;window.ig.Class=function(){};var inject=function(prop){var proto=this.prototype;var parent={};for(var name in prop){if(typeof(prop[name])=="function"&&typeof(proto[name])=="function"&&fnTest.test(prop[name])){parent[name]=proto[name];proto[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{proto[name]=prop[name];}}};window.ig.Class.extend=function(prop){var parent=this.prototype;initializing=true;var prototype=new this();initializing=false;for(var name in prop){if(typeof(prop[name])=="function"&&typeof(parent[name])=="function"&&fnTest.test(prop[name])){prototype[name]=(function(name,fn){return function(){var tmp=this.parent;this.parent=parent[name];var ret=fn.apply(this,arguments);this.parent=tmp;return ret;};})(name,prop[name]);}
else{prototype[name]=prop[name];}}
function Class(){if(!initializing){if(this.staticInstantiate){var obj=this.staticInstantiate.apply(this,arguments);if(obj){return obj;}}
for(var p in this){if(typeof(this[p])=='object'){this[p]=ig.copy(this[p]);}}
if(this.init){this.init.apply(this,arguments);}}
return this;}
Class.prototype=prototype;Class.prototype.constructor=Class;Class.extend=window.ig.Class.extend;Class.inject=inject;Class.classId=prototype.classId=++lastClassId;return Class;};if(window.ImpactMixin){ig.merge(ig,window.ImpactMixin);}})(window);

// impact/timer.js
ig.baked=true;ig.module('impact.timer').defines(function(){"use strict";ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(seconds){this.base=ig.Timer.time;this.last=ig.Timer.time;this.target=seconds||0;},set:function(seconds){this.target=seconds||0;this.base=ig.Timer.time;this.pausedAt=0;},reset:function(){this.base=ig.Timer.time;this.pausedAt=0;},tick:function(){var delta=ig.Timer.time-this.last;this.last=ig.Timer.time;return(this.pausedAt?0:delta);},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target;},pause:function(){if(!this.pausedAt){this.pausedAt=ig.Timer.time;}},unpause:function(){if(this.pausedAt){this.base+=ig.Timer.time-this.pausedAt;this.pausedAt=0;}}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var current=Date.now();var delta=(current-ig.Timer._last)/1000;ig.Timer.time+=Math.min(delta,ig.Timer.maxStep)*ig.system.timeScale;ig.Timer._last=current;};});

// impact/system.js
ig.baked=true;ig.module('impact.system').requires('impact.timer').defines(function(){"use strict";ig.System=ig.Class.extend({fps:30,width:320,height:240,lastWidth:0,lastHeight:0,scale:1,tick:0,timeScale:1,animationId:0,newGameClass:null,running:false,delegate:null,clock:null,canvas:null,context:null,stages:[],numStages:0,init:function(fps,width,height,scale){if(!window.createjs){throw("This modification of impact requires createjs");}
this.renderTheGam=false;this.fps=fps;this.resize(width,height,scale);createjs.Ticker.timingMode=createjs.Ticker.RAF;createjs.Ticker.addEventListener("tick",this.run.bind(this));},resize:function(width,height){this.width=width;this.height=height;for(var i=0;i<this.numStages;i++){this.stages[i].canvas.width=this.width;this.stages[i].canvas.height=this.height;if(this.stages[i].isWebGL){this.stages[i].updateViewport(this.width,this.height);}
this.stages[i].update();}},setGame:function(gameClass){if(this.running){this.newGameClass=gameClass;}
else{this.setGameNow(gameClass);}},setGameNow:function(gameClass){ig.game=new(gameClass)();ig.system.setDelegate(ig.game);},setDelegate:function(object){if(typeof(object.run)=='function'){this.delegate=object;}else{throw('System.setDelegate: No run() function in object');}},addStage:function(stage,name){stage.canvas.width=this.width;stage.canvas.height=this.height;if(stage.isWebGL){ig.webGLenabled=true;stage.updateViewport(this.width,this.height);}
this.stages.push(stage);this.numStages=this.stages.length;return stage;},run:function(event){this.tick=event.delta/1000;this.tick*=this.timeScale;ig.Timer.step();var sh=this.height;if(sh!==this.lastHeight){ig.resizedH=true;this.lastHeight=sh;}else{ig.resizedH=false;}
var sw=this.width;if(sw!==this.lastWidth){ig.resizedW=true;this.lastWidth=sw;}else{ig.resizedW=false;}
ig.resized=ig.resizedW||ig.resizedH;if(this.delegate){this.delegate.run(event);ig.input.clearPressed();}
for(var i=0;i<this.numStages;i++){this.stages[i].update(event);}
if(this.newGameClass){this.setGameNow(this.newGameClass);this.newGameClass=null;}
if(ig.game&&ig.game.debug){ig.game.debugDraw();}
if(GameStartup&&GameStartup.wrongOrientation)
{var imgOrientation=ig.game.preQueue.getResult('Orientation');if(imgOrientation){var ctx=this.stages[0].canvas.getContext('2d');ctx.save();ctx.fillStyle='#000';ctx.fillRect(-2,-2,this.width+4,this.height+4);ctx.drawImage(imgOrientation,this.width*0.5-imgOrientation.width*0.5,this.height*0.5-imgOrientation.height*0.5);ctx.restore();}}},getDrawPos:null});});

// impact/input.js
ig.baked=true;ig.module('impact.input').defines(function(){"use strict";ig.KEY={'MOUSE1':-1,'MOUSE2':-3,'MWHEEL_UP':-4,'MWHEEL_DOWN':-5,'BACKSPACE':8,'TAB':9,'ENTER':13,'PAUSE':19,'CAPS':20,'ESC':27,'SPACE':32,'PAGE_UP':33,'PAGE_DOWN':34,'END':35,'HOME':36,'LEFT_ARROW':37,'UP_ARROW':38,'RIGHT_ARROW':39,'DOWN_ARROW':40,'INSERT':45,'DELETE':46,'_0':48,'_1':49,'_2':50,'_3':51,'_4':52,'_5':53,'_6':54,'_7':55,'_8':56,'_9':57,'A':65,'B':66,'C':67,'D':68,'E':69,'F':70,'G':71,'H':72,'I':73,'J':74,'K':75,'L':76,'M':77,'N':78,'O':79,'P':80,'Q':81,'R':82,'S':83,'T':84,'U':85,'V':86,'W':87,'X':88,'Y':89,'Z':90,'NUMPAD_0':96,'NUMPAD_1':97,'NUMPAD_2':98,'NUMPAD_3':99,'NUMPAD_4':100,'NUMPAD_5':101,'NUMPAD_6':102,'NUMPAD_7':103,'NUMPAD_8':104,'NUMPAD_9':105,'MULTIPLY':106,'ADD':107,'SUBSTRACT':109,'DECIMAL':110,'DIVIDE':111,'F1':112,'F2':113,'F3':114,'F4':115,'F5':116,'F6':117,'F7':118,'F8':119,'F9':120,'F10':121,'F11':122,'F12':123,'SHIFT':16,'CTRL':17,'ALT':18,'PLUS':187,'COMMA':188,'MINUS':189,'PERIOD':190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:false,isUsingKeyboard:false,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},numTouches:0,initMouse:function(stage){if(this.isUsingMouse){return;}
this.isUsingMouse=true;stage.on("stagemousedown",this.keydown.bind(this));stage.on("stagemouseup",this.keyup.bind(this));stage.on("stagemousemove",this.mousemove.bind(this));cjs.Touch.enable(stage);},initKeyboard:function(){if(this.isUsingKeyboard){return;}
this.isUsingKeyboard=true;window.addEventListener('keydown',this.keydown.bind(this),false);window.addEventListener('keyup',this.keyup.bind(this),false);},mousemove:function(event){if(!event.primary){return;}
this.mouse.x=event.stageX;this.mouse.y=event.stageY;},keydown:function(event){var nativeEvent=event.nativeEvent||event;var tag=nativeEvent.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=nativeEvent.type=='keydown'?nativeEvent.keyCode:(nativeEvent.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(event.target.name){code=event.target.name;}
if(event.type=='stagemousedown'){if(nativeEvent.touches){this.numTouches=nativeEvent.touches.length;}}
var action=this.bindings[code];if(action){this.actions[action]=true;if(!this.locks[action]){this.presses[action]=true;this.locks[action]=true;if(code!==ig.KEY.MOUSE1&&code!==ig.KEY.MOUSE2){event.stopPropagation();event.preventDefault();}}}},keyup:function(event){var nativeEvent=event.nativeEvent||event;var tag=nativeEvent.target.tagName;if(tag=='INPUT'||tag=='TEXTAREA'){return;}
var code=nativeEvent.type=='keyup'?nativeEvent.keyCode:(nativeEvent.button==2?ig.KEY.MOUSE2:ig.KEY.MOUSE1);if(event.target.name){code=event.target.name;}
if(nativeEvent.touches){this.numTouches=nativeEvent.touches.length;}
var action=this.bindings[code];if(action){this.delayedKeyup[action]=true;if(code!==ig.KEY.MOUSE1&&code!==ig.KEY.MOUSE2){event.stopPropagation();event.preventDefault();}}},bind:function(key,action){if(typeof key==="number"){if(key<0){this.initMouse();}
else if(key>0){this.initKeyboard();}}
this.bindings[key]=action;},unbind:function(key){var action=this.bindings[key];this.delayedKeyup[action]=true;this.bindings[key]=null;},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={};},state:function(action){return this.actions[action];},pressed:function(action){return this.presses[action];},released:function(action){return!!this.delayedKeyup[action];},clearPressed:function(){for(var action in this.delayedKeyup){this.actions[action]=false;this.locks[action]=false;}
this.delayedKeyup={};this.presses={};}});});

// impact/impact.js
ig.baked=true;ig.module('impact.impact').requires('dom.ready','impact.system','impact.input').defines(function(){"use strict";ig.main=function(gameClass,fps,width,height,scale,loaderClass){ig.system=new ig.System(fps,width,height,scale||1);ig.input=new ig.Input();ig.ready=true;ig.system.setGameNow(gameClass);};});

// impact/visibility.js
ig.baked=true;ig.module('impact.visibility').defines(function(){ig.VisibilityController=ig.Class.extend({_bindedHandler:null,hidden:null,visibilitychange:null,i:0,docHidden:false,init:function(){if(ig.Visibility!==null){console.error("You do not instantiate this class!");return;}
ig.Visibility=this;},addListeners:function(){ig.log("Visibility Listeners Active");this._bindedHandler=this.onPageVisibilityChange.bind(this);window.addEventListener("pagehide",this._bindedHandler);window.addEventListener("pageshow",this._bindedHandler);window.addEventListener('focus',this._bindedHandler);window.addEventListener('blur',this._bindedHandler);if(typeof document.hidden!=="undefined"){this.hidden="hidden";this.visibilityChange="visibilitychange";this.docHidden=true;}else if(typeof document.mozHidden!=="undefined"){this.hidden="mozHidden";this.visibilityChange="mozvisibilitychange";this.docHidden=true;}else if(typeof document.msHidden!=="undefined"){this.hidden="msHidden";this.visibilityChange="msvisibilitychange";this.docHidden=true;}else if(typeof document.webkitHidden!=="undefined"){this.hidden="webkitHidden";this.visibilityChange="webkitvisibilitychange";this.docHidden=true;}
if(this.visibilityChange&&this.hidden){document.addEventListener(this.visibilityChange,this._bindedHandler);window.addEventListener(this.visibilityChange,this._bindedHandler);}},removeListeners:function(){if(!this._bindedHandler)
return;window.removeEventListener("pagehide",this._bindedHandler);window.removeEventListener("pageshow",this._bindedHandler);window.removeEventListener('focus',this._bindedHandler);window.removeEventListener('blur',this._bindedHandler);if(this.visibilityChange&&this.hidden){document.removeEventListener(this.visibilityChange,this._bindedHandler);}},onPageVisibilityChange:function(event){if(!event)
return;switch(event.type){case this.visibilityChange:case"visibilitychange":cjs.Sound.setMute(document[this.hidden]);if(document[this.hidden]&&ig.game.currentScreen){ig.game.currentScreen.paused=true;}else if(ig.game.currentScreen){ig.game.currentScreen.paused=false;}
break;case"pagehide":case"blur":cjs.Sound.setMute(true);if(ig.game.currentScreen){ig.game.currentScreen.paused=true;}
break;case"pageshow":case"focus":cjs.Sound.setMute(false);if(ig.game.currentScreen){ig.game.currentScreen.paused=false;}
break;}}});ig.Visibility=null;new ig.VisibilityController();});

// impact/entity.js
ig.baked=true;ig.module('impact.entity').requires('impact.impact').defines(function(){"use strict";ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16,dx:0,dy:0},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:1000,y:1000},collider:{offx:0,offy:0,radius:0},zIndex:0,gravityFactor:0,standing:false,bounciness:0,minBounceVelocity:40,health:10,type:0,checkAgainst:0,collides:0,_killed:false,world:null,debug:false,_debugShape:null,_displayobject:null,_layer:"world",slopeStanding:{min:Math.toRad(44),max:Math.toRad(136)},init:function(x,y,world,settings){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=x;this.pos.y=this.last.y=y;this.world=world;ig.merge(this,settings);this.relativePos=this.world.fromOldOrigin(x,y);this.size.dx=this.size.dx||this.size.x;this.size.dy=this.size.dy||this.size.y;if(ig.game.debug&&this.debug&&this._debugShape){if(this.collider.radius>0){var g=new cjs.Graphics().beginStroke("blue").drawCircle(0,0,this.collider.radius);this._debugShape=new cjs.Shape(g).set({x:this.pos.x,y:this.pos.y});}else{var g=new cjs.Graphics().beginStroke("red").drawRect(0,0,this.size.x,this.size.y);this._debugShape=new cjs.Shape(g).set({x:this.pos.x-(this.size.x-this._displayobject.regX),y:this.pos.y-this._displayobject.regY});}
var d=new cjs.Graphics().beginFill("red").drawCircle(0,0,3);this._debugDot=new cjs.Shape(d).set({x:this.pos.x,y:this.pos.y});ig.LAYERS.DEBUG.addChild(this._debugShape,this._debugDot);}},reset:function(x,y,settings){var proto=this.constructor.prototype;this.pos.x=x;this.pos.y=y;this.last.x=x;this.last.y=y;this.vel.x=proto.vel.x;this.vel.y=proto.vel.y;this.accel.x=proto.accel.x;this.accel.y=proto.accel.y;this.health=proto.health;this._killed=proto._killed;this.standing=proto.standing;this.type=proto.type;this.checkAgainst=proto.checkAgainst;this.collides=proto.collides;ig.merge(this,settings);},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=this.world.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;this.pos.x+=mx;this.pos.y+=my;},draw:function(){if(this._displayobject){this._displayobject.x=this.pos.x;this._displayobject.y=this.pos.y;this.checkVisibility();}},setB2Position:function(x,y){this.pos.x=x;this.pos.y=y;},debugDraw:function(){if(this.collider.radius>0){this._debugShape.set({x:this.pos.x,y:this.pos.y});}else{this._debugShape.set({x:this.pos.x-(this.size.x-this._displayobject.regX),y:this.pos.y-this._displayobject.regY});}
this._debugDot.set({x:this.pos.x,y:this.pos.y});},checkVisibility:function(){if(ig.World.isObjOffScreen(this._displayobject.x,this._displayobject.y,this._displayobject.regX,this._displayobject.regY,this.size.x,this.size.y,0,0,ig.system.width,ig.system.height)){this._displayobject.visible=false;}else{this._displayobject.visible=true;}},getNewVelocity:function(vel,accel,friction,max){if(accel){return Math.limit(vel+accel*ig.system.tick,-max,max);}
else if(friction){var delta=friction*ig.system.tick;if(vel-delta>0){return vel-delta;}
else if(vel+delta<0){return vel+delta;}
else{return 0;}}
return Math.limit(vel,-max,max);},kill:function(){this.world.removeEntity(this);},check:function(other){},collideWith:function(other,axis){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};});

// impact/world.js
ig.baked=true;ig.module('impact.world').requires('impact.impact','impact.entity').defines(function(){"use strict";ig.World=ig.Class.extend({worldContainer:null,paused:false,gravity:0,player:null,groundY:9999,entities:[],namedEntities:{},_deferredKill:[],screen:{x:0,y:0},init:function(originRegX,originRegY){this.origin={};this.origin.regX=originRegX;this.origin.regY=originRegY;this.origin.oldX=this.origin.x=this.origin.regX*ig.system.width;this.origin.oldY=this.origin.y=this.origin.regY*ig.system.height;this.worldContainer=ig.LAYERS.SCREENS.addChild(new cjs.Container());if(this._debugDraw){}},spawnEntity:function(type,x,y,settings){var EntityClass=typeof(type)==='string'?ig[type]:type;if(!EntityClass){throw("Can't spawn entity of type "+type);}
settings=settings||{};settings.relX=x;settings.relY=y;x=this.origin.x+x;y=this.origin.y+y;var ent=new(EntityClass)(x,y,this,settings||{});this.entities.push(ent);if(ent.name){this.namedEntities[ent.name]=ent;}
if(ent._displayobject){this.worldContainer.addChild(ent._displayobject);}
return ent;},removeEntity:function(ent){if(ent.name){delete this.namedEntities[ent.name];}
this.worldContainer.removeChild(ent._displayobject);if(this._debugDraw){}
ent._killed=true;ent.type=ig.Entity.TYPE.NONE;ent.checkAgainst=ig.Entity.TYPE.NONE;ent.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(ent);},update:function(){this.origin.x=this.origin.regX*ig.system.width;this.origin.y=this.origin.regY*ig.system.height;this.updateEntities();this.drawEntities();if(ig.resized===true){this.origin.oldX=this.origin.x;this.origin.oldY=this.origin.y;}},updateEntities:function(){var l=this.entities.length;for(var i=0;i<l;i++){var ent=this.entities[i];if(!ent._killed){ent.update();}}},drawEntities:function(){var l=this.entities.length;for(var i=0;i<l;i++){var ent=this.entities[i];ent.draw();}},fromOldOrigin:function(x,y){var og=this.origin;return[x-og.oldX,y-og.oldY];},trace:function(x,y,vx,vy){return{collision:{x:false,y:false,slope:false},pos:{x:x+vx,y:y+vy},tile:{x:0,y:0}};},kill:function(){var l=this.entities.length;for(var i=0;i<l;i++){this.entities[i].kill();}
ig.Entities=0;this.entities=null;this.worldContainer.removeAllChildren();this.worldContainer=null;}});ig.World.sortL=function(l1,l2){if(l1.layer>l2.layer){return 1;}
if(l1.layer<l2.layer){return-1;}
return 0;}
ig.World.setGameObjectVisibility=function(dO,sX,sY,mar){var b=dO.getBounds();if(dO instanceof createjs.DisplayObject&&b!==null){var w=b.width,h=b.height,rx=dO.regX,ry=dO.regY,x=dO.x,y=dO.y,sw=ig.system.width,sh=ig.system.height;if(ig.World.isObjOffScreen(x,y,rx,ry,w,h,sX,sY,sw,sh,mar)){dO.visible=false;}else{dO.visible=true;}}};ig.World.isObjOffScreen=function(dOx,dOy,dOrx,dOry,dOw,dOh,sX,sY,sW,sH,mar,obj){if(!mar){mar=0;}
if(obj){return{left:(dOx+(dOw-dOrx)<sX-mar),right:(dOx-dOrx>sX+sW+mar),top:(dOy+(dOh-dOry)<sY-mar),bottom:(dOy-dOry>sY+sH+mar)}}else{return(dOx+(dOw-dOrx)<sX-mar)||(dOx-dOrx>sX+sW+mar)||(dOy+(dOh-dOry)<sY-mar)||(dOy-dOry>sY+sH+mar);}};});

// utilities/ig-extensions.js
ig.baked=true;ig.module('utilities.ig-extensions').requires('impact.impact').defines(function(){ig.get=function(url,success,failure){var request=new XMLHttpRequest();request.open('GET',url,true);request.onload=function(){if(request.status>=200&&request.status<400){success(request.responseText);}else{if(failure){failure(request.responseText);}}};request.onerror=function(){};request.send();};ig.addClass=function(el,className){if(el instanceof Array){var l=el.length;for(var i=0;i<l;i++){if(el[i].classList){el[i].classList.add(className);}else{el[i].className+=' '+className;}}}else{if(el.classList){el.classList.add(className);}else{el.className+=' '+className;}}};ig.removeClass=function(el,className){if(el instanceof Array){var l=el.length;for(var i=0;i<l;i++){if(el[i].classList){el[i].classList.remove(className);}else{el[i].className=el[i].className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}}}else{if(el.classList){el.classList.remove(className);}else{el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ');}}};ig.forEach=function(list,handlerFunction,that){var l=list.length;for(var i=0;i<l;i++){handlerFunction.call(that||list[i],i,list[i]);}};ig.findWhere=function(list,properties){var len=list.length;var obj;var isMatch;for(var i=0;i<len;i++){obj=list[i];isMatch=true;for(thing in properties){if(typeof obj[thing]==="undefined"||obj[thing]!==properties[thing]){isMatch=false;break;}}
if(isMatch){return obj;}}
if(!isMatch){return undefined;}};ig.where=function(list,properties){var len=list.length,obj,results=[];for(var i=0;i<len;i++){obj=list[i];isMatch=true;for(thing in properties){if(typeof obj[thing]==="undefined"||obj[thing]!==properties[thing]){isMatch=false;break;}}
if(isMatch){results.push(obj);}}
if(results.length>0){return results;}else{return undefined;}};ig.getObjectWithHighestValue=function(list,property){var len=list.length,highest=list[0];for(var i=0;i<len;i++){if(list[i][property]>highest[property]){highest=list[i];}}
return highest;};ig.getObjectWithLowestValue=function(list,property){var len=list.length,highest=list[0];for(var i=0;i<len;i++){if(list[i][property]<highest[property]){highest=list[i];}}
return highest;};ig.polynomial=function(coefficients,xZeroOffset){if(!xZeroOffset){xZeroOffset=0;}
return function(x){var y=0,c;var l=coefficients.length;for(var i=0;i<l;i++){c=coefficients[i];y+=(c*Math.pow((x-xZeroOffset),i));}
return y;}};ig.setHitArea=function(displayObject,increase){var p=displayObject.globalToLocal(displayObject.x,displayObject.y);var hzx=p.x;var hzy=p.y;var w=displayObject.getBounds().width;var h=displayObject.getBounds().height;var hzWidth=w+increase;var hzHeight=h+increase;var s=new cjs.Shape();s.graphics.beginFill("#000").drawRect(0,0,hzWidth,hzHeight);displayObject.hitArea=s;};ig.scaleDO=function(displayObj,scale){displayObj.set({scaleX:scale,scaleY:scale});};ig.setRegs=function(displayObj,rX,rY,absolute){var b=displayObj.getBounds();if(b!==null){var pctX,pctY;if(arguments.length===2){if(typeof arguments[1]==="string"){switch(arguments[1]){case"center":pctX=pctY=0.5;break;default:break;}}else{pctX=pctY=arguments[1];}}else{if(typeof rX==="string"){switch(rX){case"center":pctX=0.5;break;case"left":pctX=0;break;case"right":pctX=1;break;default:break;}}else{pctX=rX;}
if(typeof rY==="string"){switch(rY){case"center":pctY=0.5;break;case"top":pctY=0;break;case"bottom":pctY=1;break;default:break;}}else{pctY=rY;}
if(absolute&&absolute===true){var regX,regY;regX=((typeof rX!=="string"&&rX>1)?rX:b.width*pctX);regY=((typeof rY!=="string"&&rY>1)?rY:b.height*pctY);displayObj.set({regX:regX,regY:regY});return;}}
displayObj.set({regX:b.width*pctX,regY:b.height*pctY});}else{throw("Could not center displayObject, rectangular bounds are not set");}};ig.setAnimRegs=function(data,first,last,regX,regY){var w,h,f=data.frames,rX=regX===undefined?0.5:regX,rY=regY===undefined?0.5:regY;for(var i=first;i<=last;i++){w=f[i][2];h=f[i][3];f[i].push(0);f[i].push(w*rX);f[i].push(h*rY);}
return data;};ig.sortByZ=function(obj1,obj2){if(obj1.z===undefined||obj2.z===undefined){}
if(obj1.z>obj2.z){return 1;}
if(obj1.z<obj2.z){return-1;}
return 0;};ig.rangeOp=function(start,end,increment,operation){var range=end-start;var steps=(range/increment)+1;var val=start;var arr=[];var i=0;do{arr.push(operation(val,i,steps,arr));val+=increment;i++;}while(val<=end)
return arr;};});

// utilities/math-extensions.js
ig.baked=true;ig.module('utilities.math-extensions').requires('impact.impact').defines(function(){Math.distance=function(point1,point2){return Math.sqrt(Math.pow((point1[0]-point2[0]),2)+Math.pow((point1[1]-point2[1]),2));};Math.thresFloor=function(number,precision){if(!precision){var precision=0.0001;}
if(Math.abs(number)<precision){return Math.floor(number);}else{return number;}};Math.clamp=function(a,low,high){return a<low?low:a>high?high:a};});

// game/screens/screens.js
ig.baked=true;ig.module('game.screens.screens').requires('impact.impact','utilities.ig-extensions').defines(function(){ig.Screens=ig.Class.extend({debug:false,components:[],cachedComponents:[],init:function(components){this.container=new cjs.Container();if(components){this.injectComponents(components);}
ig.LAYERS.SCREENS.addChild(this.container);if(this.debug){}},update:function(){if(ig.resizedW){this.refreshComponents();}},setButtonReady:function(ready,btn){btn.ready=ready;},refreshComponents:function(refreshRegistrationPoints){var c=this.components,y,x,pctX,pctY,b;var l=c.length;if(l>0){var i=l-1;do{b=c[i];x=b.relativeX||0,y=b.relativeY||0;pctX=b.pctX||0,pctY=b.pctY||0;c[i].set({x:Math.floor(x+ig.system.width*pctX),y:Math.floor(y+ig.system.height*pctY)});if(refreshRegistrationPoints){if(typeof b.regPoint==="string"){ig.setRegs(b,b.regPoint);}else if(typeof b.regPoint==="object"){ig.setRegs(b,b.regPoint.x||0,b.regPoint.y||0,b.absolute||false);}}
if(this.cachedComponents[i]!==undefined){this.cachedComponents[i].updateCache();}}while(i--);}},addActionCallback:function(type,callback){this.actionCallbacks[type]=callback;},injectComponents:function(components,secondaryContainer,cacheSecondary){var c=components;var l=c.length;var i=l;var b,x,y,pctX,pctY;do{b=c[l-i];x=b.relativeX||0,y=b.relativeY||0;pctX=b.pctX||0,pctY=b.pctY||0;b.set({x:Math.floor(x+ig.system.width*pctX),y:Math.floor(y+ig.system.height*pctY)});if(b.name!==null&&this[b.name]===undefined){this[b.name]=b;}
if(b.scale){ig.scaleDO(b,b.scale);}
if(typeof b.regPoint==="string"){ig.setRegs(b,b.regPoint);}else if(typeof b.regPoint==="object"){ig.setRegs(b,b.regPoint.x||0,b.regPoint.y||0,b.absolute||false);}
if(b.type==="button"){if(!ig.ua.mobile){b.on("mouseover",function(e,data){ig.changeCursorToPointer();data.that.btnHandler.call(this,e,data);},null,false,{that:this});b.on("mouseout",function(e,data){ig.changeCursorToDefault();data.that.btnHandler.call(this,e,data);},null,false,{that:this});}
b.on("mousedown",this.btnHandler,null,false,{that:this});b.on("pressup",this.btnHandler,null,false,{that:this});b.on("click",this.btnHandler,this,false,{},false);}
this.components.push(b);if(b.cache===true){if(this.cacheContainer===undefined){throw("This screen doesn't have a cacheContainer defined");}
this.cacheContainer.addChild(b);}else{if(secondaryContainer){secondaryContainer.addChild(b);}else{this.container.addChild(b);}}}while(0<--i);if(this.cacheContainer){this.cacheContainer.cache(0,0,ig.system.width,300);}
if(secondaryContainer){if(cacheSecondary){secondaryContainer.cache(0,0,ig.system.width,ig.system.height);this.cachedComponents.push(secondaryContainer);}
this.container.addChild(secondaryContainer);return secondaryContainer;}},kill:function(){ig.LAYERS.SCREENS.removeAllChildren();if(this.components&&this.components.length){for(var i=this.components.length-1;i>=0;i--){this.components[i].removeAllEventListeners();}}},btnHandler:function(){if(ig.game.overlayEnabled){return false;}return true;},setActive:function(active){if(this.container){this.container.set({mouseChildren:active,mouseEnabled:active});}}});});

// game/screens/start.js
ig.baked=true;ig.module('game.screens.start').requires('game.screens.screens','impact.timer').defines(function(){ig.Screens.Start=ig.Screens.extend({_idleTriggerTime:10,init:function(screen){if(ig.game.gamificationReady===true&&ig.game.gamificationEnabled===true){ig.game.showGamification();}
this.audio=ig.audio.tracks.title_screen;ig.audio.stopAllMusic();if(ig.game.muted===false){ig.audio.playMusic(this.audio.music,{volume:0.15,delay:1000});}
if(!gameProps.disableVO){cjs.Sound.play(this.audio.titleVO);}
ig.subtitles.playSubtitles("TITLE");var can=document.getElementById('bgs');can.style.backgroundImage='url('+ig.mq("StartBG").src+')';var c=[(new cjs.Bitmap(ig.mq("title_gametitle"))).set({name:"ppp_title",pctX:0.49,pctY:0.4,regPoint:"center",relativeY:-500}),(new cjs.Sprite(ig.SHEETS.MAIN,"title_play_btn")).set({type:"button",name:"play_btn",pctX:0.49,pctY:0.5,regPoint:"center",relativeY:190,scaleX:gameProps.enableRTL?-1:1}),(new cjs.Bitmap(ig.mq("title_jakelogo"))).set({relativeX:-150,relativeY:90,regPoint:"center",pctX:1,scaleX:0.9,scaleY:0.9,rotation:5})];this.parent(c);ig.scaleDO(this.play_btn,gameProps.enableRTL?-0.3:0.3);cjs.Tween.get(this.ppp_title).wait(100).to({relativeY:-50},900,cjs.Ease.bounceOut);cjs.Tween.get(this.play_btn).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},900,cjs.Ease.elasticOut);this._idleTimer=new ig.Timer();},kill:function(){this.parent();},update:function(e){this.parent();if(this._idleTimer.delta()>this._idleTriggerTime){this._idleTimer.reset();}
this.refreshComponents();},btnHandler:function(e,data){var name=e.target.name;switch(e.type){case"mouseover":ig.audio.playVO(data.that.audio.play_btn_hover,1000);ig.subtitles.playSubtitles("TITLE_PLAY_ROLLOVER",1000);cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},600,cjs.Ease.backOut);break;case"mousedown":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}
break;case"mouseout":cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},600,cjs.Ease.backOut);break;case"pressup":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},100,cjs.Ease.quadInOut);}
break;case"click":if(!this.play_btn.clicked){if(ig.ua.mobile){ig.game.goFullScreen();ig.game.titleScreenBtnClick();}
this.play_btn.clicked=true;cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);ig.audio.playVO(ig.audio.tracks.title_screen.play_btn_click,400);ig.subtitles.playSubtitles("TITLE_PLAY_CLICK",400);if(ig.game.hasSeenTheCutscene===false){cjs.Tween.get(this).wait(1600).call(ig.ScreenControl.goto,[ig.SCREENS.CUT_SCENE,700],ig.ScreenControl);ig.game.hasSeenTheCutscene=true;}else{cjs.Tween.get(this).wait(1600).call(ig.ScreenControl.goto,[ig.SCREENS.PLAYER_SELECT,500],ig.ScreenControl);}}
break;}}});});

// game/screens/cut-scene.js
ig.baked=true;ig.module('game.screens.cut-scene').requires('game.screens.screens').defines(function(){ig.Screens.CutScene=ig.Screens.extend({_idleTriggerTime:10,init:function(screen){if(ig.game.gamificationEnabled){ig.game.hideGamification();}
ig.audio.stopAllMusic();var c=[(new cjs.Bitmap(ig.mq("HookSpying"))).set({name:"hook_spying",scaleX:1.1,scaleY:1.1,relativeY:-40}),(new cjs.Bitmap(ig.mq("Poppinjays"))).set({name:"poppinjays",relativeX:-200,visible:false,alpha:0}),(new cjs.Bitmap(ig.mq("Telescope"))).set({name:"telescope",visible:false,alpha:0}),(new cjs.Bitmap(ig.mq("HookAndSmee"))).set({name:"hooksmee",scaleX:1.1,scaleY:1.1,visible:false,alpha:0,relativeX:50})];ig.forEach(c,function(i,e){e.set({pctX:0.5,pctY:0.5,regPoint:"center"});});c.push((new cjs.Sprite(ig.SHEETS.MAIN,"select_play_btn")).set({type:"button",name:"skip",pctX:1,pctY:1,relativeX:-110,relativeY:-90,regPoint:"center",scaleX:gameProps.enableRTL?-1:1}));this.parent(c);this._playCutscene();},btnHandler:function(e){switch(e.type){case"click":if(!this.skip.clicked){this.skip.clicked=true;cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);this.dialog.stop();ig.subtitles.stop();ig.ScreenControl.goto(ig.SCREENS.PLAYER_SELECT);}
break;case"mouseover":cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},250,cjs.Ease.quadIn);break;case"mouseout":cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},200,cjs.Ease.backOut);break;case"mousedown":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}
break;case"pressup":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},100,cjs.Ease.quadInOut);}
break;default:break;}},_playCutscene:function(){if(gameProps.disableVO){this.dialog=cjs.Sound.play("cutscene-music");}else{this.dialog=cjs.Sound.play(ig.audio.tracks.cutscene);}
ig.subtitles.playSubtitles("CUTSCENE");cjs.Tween.get(this.hook_spying).to({relativeY:30},6000);cjs.Tween.get(this.poppinjays).wait(6000).set({visible:true}).to({alpha:1},400,cjs.Ease.quadInOut).to({relativeX:200},10500,cjs.Ease.quadInOut).call(this._lastFrame,null,this);cjs.Tween.get(this.telescope).wait(6000).set({visible:true}).to({alpha:1},400,cjs.Ease.quadInOut);},_lastFrame:function(){cjs.Tween.get(this.hooksmee).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut).to({relativeX:-50},7000).call(ig.ScreenControl.goto,[ig.SCREENS.PLAYER_SELECT],ig.ScreenControl);},kill:function(){this.parent();ig.game.mainQueue._disposeItem(ig.game.mainQueue._loadItemsById["HookSpying"]);ig.game.mainQueue._disposeItem(ig.game.mainQueue._loadItemsById["Poppinjays"]);ig.game.mainQueue._disposeItem(ig.game.mainQueue._loadItemsById["Telescope"]);ig.game.mainQueue._disposeItem(ig.game.mainQueue._loadItemsById["HookAndSmee"]);cjs.Tween.removeTweens(this.hook_spying);cjs.Tween.removeTweens(this.poppinjays);cjs.Tween.removeTweens(this.telescope);cjs.Tween.removeTweens(this.hooksmee);},update:function(e){this.refreshComponents();}});});

// game/screens/player-select.js
ig.baked=true;ig.module('game.screens.player-select').requires('game.screens.screens').defines(function(){ig.Screens.PlayerSelect=ig.Screens.extend({modes:{NUM_PLAYERS:0,CHARACTER:1},selectBallBottomSpreadX:125,selectBallBottomStartX:0,selectBallBottomXrange:500,selectBallAnchors:[],playerIconAnchors:[135,90,45,135,45],charactersSelected:false,multiplayerCharSelectCounter:0,_allPlayersHaveCharacters:false,init:function(screen){var i=0,id=0,spreadX=300,spreadY=100,that=this,sh=ig.SHEETS.MAIN,can=document.getElementById('bgs'),musicBtnSprite,point,c;can.style.backgroundImage='url('+ig.mq("SandyBG").src+')';this.numPlayersAudio=ig.audio.tracks.num_players;this.charSelectAudio=ig.audio.tracks.character_select;this.modeSelectAudio=ig.audio.tracks.mode_select;ig.audio.playVO(this.numPlayersAudio.how_many,0);ig.subtitles.playSubtitles("NUM_PLAYERS_HOW_MANY");this.bgMusic=ig.audio.playMusic(ig.audio.tracks.music.bgloop1,{volume:0.3,loop:-1});if(ig.game.muted===true){ig.audio.muteAllMusic(ig.game.muted);}
if(ig.game.gamificationEnabled){ig.game.hideGamification();}
if(gameProps.localizedTextEnabled===true){if(ig.game.localizedTextSpritesheetsEnabled){c=[(new cjs.Sprite(ig.SHEETS.UI_TEXT,"HOW_MANY_PLAYERS")).set({name:"how_many",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:true}),(new cjs.Sprite(ig.SHEETS.UI_TEXT,"CHOOSE_CHARACTER")).set({name:"choose_char",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:false,alpha:0}),(new cjs.Sprite(ig.SHEETS.UI_TEXT,"CHOOSE_PLAY_MODE")).set({name:"game_type",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:false,alpha:0})];}else{c=[(ig.createLocalizedText(PPstrings.UI_TEXT.HOW_MANY_PLAYERS,true)).set({name:"how_many",pctX:0.5,regPoint:"center",visible:true}),(ig.createLocalizedText(PPstrings.UI_TEXT.CHOOSE_CHARACTER,true)).set({name:"choose_char",pctX:0.5,regPoint:"center",visible:false,alpha:0}),(ig.createLocalizedText(PPstrings.UI_TEXT.CHOOSE_PLAY_MODE,true)).set({name:"game_type",pctX:0.5,regPoint:"center",visible:false,alpha:0})];}}else{c=[(new cjs.Bitmap(ig.mq("text_howmanyplayers"))).set({name:"how_many",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:true}),(new cjs.Bitmap(ig.mq("text_choosechar"))).set({name:"choose_char",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:false,alpha:0}),(new cjs.Bitmap(ig.mq("text_gametype"))).set({name:"game_type",pctX:0.5,relativeY:50,regPoint:{x:"center",y:"top"},visible:false,alpha:0})];}
c=c.concat([(new cjs.Bitmap(ig.mq("PlayerSelectPlants"))).set({name:"shrubberies",pctY:1,pctX:0.5,regPoint:{x:"center",y:"bottom"},relativeY:200}),(new cjs.Sprite(sh,"select_woodbase")).set({name:"woodbase",pctX:0.5,pctY:1,regPoint:{x:"center",y:"bottom"},relativeY:83}),(new cjs.Sprite(sh,"select_play_btn")).set({name:"play_btn",type:"button",pctX:0.5,pctY:1,relativeY:-82,regPoint:"center",visible:false,alpha:0,ready:false,scaleX:gameProps.enableRTL?-1:1}),(new cjs.Sprite(sh,"btn_home")).set({name:"home_btn",type:"button",relativeX:80,relativeY:80,regPoint:"center"}),(new cjs.Sprite(sh,ig.game.muted===true?"select_music_btn_off":"select_music_btn")).set({name:"music_btn",type:"button",pctX:1,relativeX:-80,relativeY:80,regPoint:"center"})]);this.parent(c);c=this.characterIcons=[(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+ig.game_config.CHARACTERS.JAKE)).set({chosen:false,char_id:ig.game_config.CHARACTERS.JAKE,relativeX:-300+(i++*spreadX),relativeY:-spreadY}),(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+ig.game_config.CHARACTERS.CUBBY)).set({chosen:false,char_id:ig.game_config.CHARACTERS.CUBBY,relativeX:-300+(i++*spreadX),relativeY:-spreadY}),(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+ig.game_config.CHARACTERS.IZZY)).set({chosen:false,char_id:ig.game_config.CHARACTERS.IZZY,relativeX:-300+(i++*spreadX),relativeY:-spreadY}),(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+ig.game_config.CHARACTERS.HOOK)).set({chosen:false,char_id:ig.game_config.CHARACTERS.HOOK,relativeX:-150,relativeY:spreadY}),(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+ig.game_config.CHARACTERS.SMEE)).set({chosen:false,char_id:ig.game_config.CHARACTERS.SMEE,relativeX:150,relativeY:spreadY})];ig.forEach(c,function(i,icon){icon.set({scaleX:0.5,scaleY:0.5,alpha:0,visible:false,radius:100,pctX:0.5,pctY:0.5,regPoint:"center",ready:false});if(!ig.ua.mobile){icon.on("mouseover",this.characterIconHandler,null,false,{that:this});icon.on("mouseout",this.characterIconHandler,null,false,{that:this});}
icon.on("click",this.characterIconHandler,null,false,{that:this});icon.on("mousedown",this.characterIconHandler,null,false,{that:this});icon.on("pressup",this.characterIconHandler,null,false,{that:this});point=curious.Vector2.pointFromPoint(this.playerIconAnchors[i],icon.radius,icon.relativeX,icon.relativeY);this.playerIconAnchors[i]=[point[0]+icon.relativeX,point[1]+icon.relativeY];},this);this.injectComponents(c);i=0;id=0;if(gameProps.enableRTL===true){c=this.selectBalls=[(new cjs.Sprite(sh,"select_ball0")).set({player_id:0,relativeX:-300+(2*spreadX),relativeY:-spreadY,currentColor:0,ready:false}),(new cjs.Sprite(sh,"select_ball1")).set({player_id:1,relativeX:-300+(1*spreadX),relativeY:-spreadY,currentColor:1,ready:false}),(new cjs.Sprite(sh,"select_ball2")).set({player_id:2,relativeX:-300+(0*spreadX),relativeY:-spreadY,currentColor:2,ready:false}),(new cjs.Sprite(sh,"select_ball3")).set({player_id:3,relativeX:150,relativeY:spreadY,currentColor:3,ready:false}),(new cjs.Sprite(sh,"select_ball4")).set({player_id:4,relativeX:-150,relativeY:spreadY,currentColor:4,ready:false})];}else{c=this.selectBalls=[(new cjs.Sprite(sh,"select_ball"+i)).set({player_id:id,relativeX:-300+(i++*spreadX),relativeY:-spreadY,currentColor:id++,ready:false}),(new cjs.Sprite(sh,"select_ball"+i)).set({player_id:id,relativeX:-300+(i++*spreadX),relativeY:-spreadY,currentColor:id++,ready:false}),(new cjs.Sprite(sh,"select_ball"+i)).set({player_id:id,relativeX:-300+(i++*spreadX),relativeY:-spreadY,currentColor:id++,ready:false}),(new cjs.Sprite(sh,"select_ball3")).set({player_id:id,relativeX:-150,relativeY:spreadY,currentColor:id++,ready:false}),(new cjs.Sprite(sh,"select_ball4")).set({player_id:id,relativeX:150,relativeY:spreadY,currentColor:id++,ready:false})];}
ig.forEach(c,function(i,ball){if(!ig.ua.mobile){ball.on("mouseover",this.selectionHandler,null,false,{that:this});ball.on("mouseout",this.selectionHandler,null,false,{that:this});}
ball.on("mousedown",this.selectionHandler,null,false,{that:this});ball.on("pressup",this.selectionHandler,null,false,{that:this});ball.on("click",this.selectionHandler,null,false,{that:this});ball.set({pctX:0.5,pctY:0.5,regPoint:"center",alpha:0,visible:false,scaleX:0.45,scaleY:0.45});},this);this.injectComponents(c);var practiceX=-220;var matchX=220;c=[(new cjs.Sprite(sh,"btn_mode_practice")).set({ready:false,type:"button",name:"practice_btn",mode_id:ig.Session.MODES.PRACTICE,relativeX:practiceX}),(new cjs.Sprite(sh,"btn_mode_match")).set({type:"button",name:"match_btn",mode_id:ig.Session.MODES.MATCH,relativeX:matchX})];if(gameProps.localizedTextEnabled){c=c.concat([ig.createLocalizedText(PPstrings.UI_TEXT.MODE_PRACTICE).set({name:"practice_text"}),ig.createLocalizedText(PPstrings.UI_TEXT.MODE_MATCH).set({name:"match_text"})]);}else{c=c.concat([(new cjs.Sprite(sh,"text_mode_practice")).set({name:"practice_text",relativeX:practiceX,relativeY:150}),(new cjs.Sprite(sh,"text_mode_match")).set({name:"match_text",relativeX:matchX,relativeY:150})]);}
ig.forEach(c,function(i,item){item.set({pctX:0.5,pctY:0.45,regPoint:"center",alpha:0,visible:false});},this);this.injectComponents(c);this.play_btn.on("mousedown",this.btnHandler,null,false,{that:this});this.play_btn.on("pressup",this.btnHandler,null,false,{that:this});this.practice_btn.on("mousedown",this.btnHandler,null,false,{that:this});this.practice_btn.on("pressup",this.btnHandler,null,false,{that:this});this.match_btn.on("mousedown",this.btnHandler,null,false,{that:this});this.match_btn.on("pressup",this.btnHandler,null,false,{that:this});this.woodBaseCurve=ig.polynomial([302,0,0.0005]);this.mode=this.modes.NUM_PLAYERS;this.showSelectBalls();cjs.Tween.get(this.shrubberies).to({relativeY:0,scaleX:1,scaleY:1},1000,cjs.Ease.quadInOut);},kill:function(){this.parent();ig.game.stage.removeAllEventListeners();},update:function(e){this.refreshComponents();this.parent();},_afterIntroAudioPlay:function(){for(var i=0,l=this.selectBalls.length;i<l;i++){this.selectBalls[i].ready=true;}},btnHandler:function(e,data){if(this.ready===false){return;}
var n=e.target.name,that;data&&(that=data.that);switch(e.type){case"click":if(n==="home_btn"){cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);ig.Session.refresh();cjs.Tween.removeTweens(this);ig.ScreenControl.goto(ig.SCREENS.START);}else if(n==="play_btn"){if(!this.play_btn.clicked){cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);for(var i=0,l=this.selectBalls.length,pickedHook=false;i<l;i++){if(this.selectBalls[i].chosen_char_id===ig.game_config.CHARACTERS.HOOK){pickedHook=true;break;}}
var rand;if(pickedHook){rand=Math.range(0,this.charSelectAudio.pickedHook.length-1);ig.subtitles.playSubtitles("PICKED_HOOK"+(rand+1));}else{rand=Math.range(0,this.charSelectAudio.not_hook.length-1);ig.subtitles.playSubtitles("NOT_HOOK"+(rand+1));}
if(gameProps.disableVO){console.log(ig.audio.checkSoundDuration(pickedHook===true?this.charSelectAudio.pickedHook[rand]:this.charSelectAudio.not_hook[rand]));cjs.Tween.get(this).wait(ig.audio.checkSoundDuration(pickedHook===true?this.charSelectAudio.pickedHook[rand]:this.charSelectAudio.not_hook[rand])).call(this.changeToModeSelect);}else{ig.audio.playVO(pickedHook===true?this.charSelectAudio.pickedHook[rand]:this.charSelectAudio.not_hook[rand],0,this.changeToModeSelect.bind(this));}
this.play_btn.clicked=true;}}else if((n==="practice_btn"||n==="match_btn")&&!this.practice_btn.clicked&&!this.match_btn.clicked){ig.Session.mode=e.target.mode_id;cjs.Tween.removeTweens(this);if(n==="practice_btn"){this.practice_btn.clicked=true;ig.audio.playVO([this.modeSelectAudio.prac_hole,this.modeSelectAudio.practice]);ig.subtitles.playSubtitles(["HOVER_PRACTICE","CHOSE_PRACTICE"]);cjs.Tween.get(this).wait(2000).call(ig.ScreenControl.goto,[ig.SCREENS.HOLE_SELECT],ig.ScreenControl);}else{this.match_btn.clicked=true;ig.audio.playVO([this.modeSelectAudio.entire,this.modeSelectAudio.match]);ig.subtitles.playSubtitles(["HOVER_MATCH","CHOSE_MATCH"]);cjs.Tween.get(this).wait(3500).call(ig.ScreenControl.loadLevel,[0],ig.ScreenControl);}}else if(n==="music_btn"){cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);if(ig.game.muted===false){this.music_btn.gotoAndStop("select_music_btn_off");ig.game.muted=true;}else if(ig.game.muted===true){this.music_btn.gotoAndStop("select_music_btn");ig.game.muted=false;}
ig.audio.muteAllMusic(ig.game.muted);}
break;case"mousedown":if(this.ready===true||(n!=="match_btn"&&n!=="practice_btn")){if(ig.ua.mobile){if(n==="play_btn"){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},100,cjs.Ease.backOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}}}
break;case"pressup":if(this.ready===true||(n!=="match_btn"&&n!=="practice_btn")){if(ig.ua.mobile){if(n==="play_btn"){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},100,cjs.Ease.backOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}}}
break;case"mouseover":if(n==="music_btn"){if(ig.game.muted===true){ig.audio.playVO(ig.audio.tracks.uiVO.unmute,1000);ig.subtitles.playSubtitles("HOOK_UI_UNMUTE",1000);}else{ig.audio.playVO(ig.audio.tracks.uiVO.mute,1000);ig.subtitles.playSubtitles("HOOK_UI_MUTE",1000);}
cjs.Tween.get(this,{override:true}).to({rotation:6,scaleX:1.05,scaleY:1.05},300,cjs.Ease.quadIn);}else if(n==="home_btn"){cjs.Tween.get(this,{override:true}).to({rotation:-6,scaleX:1.05,scaleY:1.05},300,cjs.Ease.quadIn);if(!gameProps.disableVO){cjs.Sound.play(ig.audio.tracks.uiVO.back,{delay:1000});}
ig.subtitles.playSubtitles("HOOK_UI_BACK",1000);}else if(n==="match_btn"&&this.ready===true){ig.subtitles.playSubtitles("HOVER_MATCH",1000);ig.audio.playVO(that.modeSelectAudio.entire,1000);cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},700,cjs.Ease.backOut);}else if(n==="practice_btn"&&this.ready===true){ig.subtitles.playSubtitles("HOVER_PRACTICE",1000);ig.audio.playVO(that.modeSelectAudio.prac_hole,1000);cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},700,cjs.Ease.backOut);}else if(n==="play_btn"&&this.ready===true){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},700,cjs.Ease.backOut);}
break;case"mouseout":if(this.ready===true||(n!=="play_btn"&&n!=="match_btn"&&n!=="practice_btn")){if(n==="play_btn"){cjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.backOut);}else{cjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:1,scaleY:1},300,cjs.Ease.backOut);}}
break;default:break;}},selectionHandler:function(e,data){var that;data&&(that=data.that);switch(e.type){case"pressup":if(that.mode===that.modes.CHARACTER&&that.multiplayerCharSelectCounter>=ig.Session.numberPlayers){var res=that.selectorOnCharacter(this);var i,pos;if(res.onCharacter===true){i=res.i;pos=that.playerIconAnchors;selectPos=that.selectBallAnchors;if(that.characterIcons[res.i].chosen===true){if(this.chosen_char_id===undefined||this.chosen_char_id===null){cjs.Tween.get(this).to({relativeX:selectPos[this.player_id][0],relativeY:selectPos[this.player_id][1]},200,cjs.Ease.quadInOut);}else{cjs.Tween.get(this).to({relativeX:pos[this.chosen_char_id][0],relativeY:pos[this.chosen_char_id][1]},200,cjs.Ease.quadInOut);}}else{if(this.chosen_char_id!==undefined&&this.chosen_char_id!==null&&this.chosen_char_id!==i){that.charactersSelected=false;that.unSetPlayer(this);}
ig.Session.setPlayerCharacter(this.player_id,i);cjs.Tween.get(this).to({relativeX:pos[i][0],relativeY:pos[i][1]},200,cjs.Ease.quadInOut).call(that.setPlayer,[i,this],that);}}else{if(this.chosen_char_id!==undefined&&this.chosen_char_id!==null){that.unSetPlayer(this);}
pos=that.selectBallAnchors;i=this.player_id;cjs.Tween.get(this).to({relativeX:pos[i][0],relativeY:pos[i][1]},300,cjs.Ease.cubicOut);}
if(!ig.ua.mobile){document.body.style.cursor="-webkit-grab";}}else if(that.mode===that.modes.NUM_PLAYERS&&this.ready===true){if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},100,cjs.Ease.quadInOut);}}
break;case"mousedown":if(that.mode===that.modes.NUM_PLAYERS&&this.ready===true){if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}}else if(that.mode===that.modes.CHARACTER&&!ig.ua.mobile){document.body.style.cursor="-webkit-grabbing";}
break;case"click":if(that.mode===that.modes.NUM_PLAYERS){that.changeToCharacterSelect(e.target.player_id);if(this.player_id===0){ig.audio.playVO([that.numPlayersAudio.single,that.charSelectAudio.single],[0,50]);ig.subtitles.playSubtitles("CHARACTER_SELECT_SINGLE_WHO");}else{ig.audio.playVO([that.numPlayersAudio.multi,that.charSelectAudio.multi[0]],[0,50]);ig.subtitles.playSubtitles("CHARACTER_SELECT_MULTI_FIRST");}}
break;case"pressmove":if(that.multiplayerCharSelectCounter>=ig.Session.numberPlayers){this.relativeX=e.stageX-this.pctX*ig.system.width;this.relativeY=e.stageY-this.pctY*ig.system.height;}
break;case"mouseover":if(that.mode===that.modes.NUM_PLAYERS){ig.changeCursorToPointer();if(this.ready===true){if(this.player_id===0){ig.audio.playVO(that.numPlayersAudio.single,1000);ig.subtitles.playSubtitles("NUM_PLAYERS_ONE_HOVER",1000);}else{ig.audio.playVO(that.numPlayersAudio.multi,1000);ig.subtitles.playSubtitles("NUM_PLAYERS_MANY_HOVER",1000);}
cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},700,cjs.Ease.backOut);}}else if(that.mode===that.modes.CHARACTER&&that._allPlayersHaveCharacters===true){document.body.style.cursor="-webkit-grab";}
break;case"mouseout":ig.changeCursorToDefault();if(that.mode===that.modes.NUM_PLAYERS&&this.ready===true){cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},300,cjs.Ease.backOut);}else if(that.mode===that.modes.CHARACTER){ig.changeCursorToDefault();}
break;default:break;}},characterIconHandler:function(e,data){var that=data.that;switch(e.type){case"click":var pa=that.playerIconAnchors;if(ig.Session.numberPlayers===1){var chosenStatus=this.chosen;var ball=that.singleplayer_ball;if(this.chosen===true){ball.currentColor++;if((ig.game.skullBallAllowed===true&&ball.currentColor>=ig.Session.COLORS.length)||(ig.game.skullBallAllowed===false&&ball.currentColor>=ig.Session.COLORS.length-1)){ball.currentColor=0;}
ig.Session.setPlayerColor(0,ball.currentColor);that.singleplayer_ball.gotoAndStop("select_singleplayer_ball"+ball.currentColor);}else{that.unSetPlayer(that.singleplayer_ball);that.setPlayer(this.char_id,that.singleplayer_ball);if(ball.visible===false){cjs.Tween.get(ball).set({relativeX:pa[this.char_id][0],relativeY:pa[this.char_id][1],visible:true}).to({scaleX:1,scaleY:1},400,cjs.Ease.backOut);}else{cjs.Tween.get(ball).to({relativeX:pa[this.char_id][0],relativeY:pa[this.char_id][1]},250,cjs.Ease.quadInOut);}
if(that.play_btn.visible===false){cjs.Tween.get(that.play_btn,{override:true}).set({visible:true}).wait(200).to({alpha:1},200,cjs.Ease.quadInOut).call(that.setButtonReady,[true,that.play_btn],that);}
var a=that.charSelectAudio;var pickedHook=this.char_id===ig.game_config.CHARACTERS.HOOK;var rand=pickedHook===true?Math.range(0,a.pickedHook.length-1):Math.range(0,a.not_hook.length-1);var pickSubtitle=pickedHook===true?ig.game_config.subtitles.character_select.pickedHook[rand]:ig.game_config.subtitles.character_select.not_hook[rand];var seq=[a.character_pick[this.char_id],(pickedHook===true?a.pickedHook[rand]:a.not_hook[rand])];ig.audio.playVO(seq,[0,50,50]);ig.subtitles.playSubtitles([ig.game_config.subtitles.character_select.character_pick[this.char_id],pickSubtitle]);}}else if(ig.Session.numberPlayers>1){if(this.chosen===true){var ball=this.selectBall;ball.currentColor++;if((ig.game.skullBallAllowed===true&&ball.currentColor>=ig.Session.COLORS.length)||(ig.game.skullBallAllowed===false&&ball.currentColor>=ig.Session.COLORS.length-1)){ball.currentColor=0;}
ig.Session.setPlayerColor(ball.player_id,ball.currentColor);if(ball.currentColor===5){ball.gotoAndStop("select_singleplayer_ball5");}else{ball.gotoAndStop("player"+(ball.player_id+1)+ig.Session.COLORS[ball.currentColor]);}
ig.scaleDO(ball,1);ig.setRegs(ball,"center");}else if(that.multiplayerCharSelectCounter<ig.Session.numberPlayers){var currentCharId=that.multiplayerCharSelectCounter++;that.unSetPlayer(that.selectBalls[currentCharId]);that.setPlayer(this.char_id,that.selectBalls[currentCharId]);cjs.Tween.get(that.selectBalls[currentCharId]).to({relativeX:pa[this.char_id][0],relativeY:pa[this.char_id][1]},300,cjs.Ease.quadInOut);}}
break;case"mousedown":if(this.ready===true){if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}}
break;case"mouseover":if(that._allPlayersHaveCharacters===false){ig.changeCursorToPointer();if(this.ready===true&&this.chosen===false){cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},700,cjs.Ease.backOut);}}
break;case"pressup":if(this.ready===true){if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},100,cjs.Ease.quadInOut);}}
break;case"mouseout":if(this.ready===true){ig.changeCursorToDefault();cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},300,cjs.Ease.backOut);}
break;default:break;}},setPlayer:function(i,selector){this.characterIcons[i].selectBall=selector;this.characterIcons[i].chosen=true;selector.chosen_char_id=i;ig.Session.setPlayerCharacter(selector.player_id,i);if(ig.Session.allPlayersHaveCharacters()===true){this._allPlayersHaveCharacters=true;this.charactersSelected=true;cjs.Tween.get(this.play_btn,{override:true}).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut).call(this.setButtonReady,[true,this.play_btn],this);cjs.Tween.get(this.woodbase,{override:true}).to({relativeY:82},300,cjs.Ease.quadInOut);}
if(ig.Session.numberPlayers>1){var a=this.charSelectAudio,seq;if(this.multiplayerCharSelectCounter===ig.Session.numberPlayers){seq=[a.character_pick[i]];ig.subtitles.playSubtitles([ig.game_config.subtitles.character_select.character_pick[i]]);}else if(this.multiplayerCharSelectCounter===ig.Session.numberPlayers-1){seq=[a.character_pick[i],a.multi[4]];ig.subtitles.playSubtitles([ig.game_config.subtitles.character_select.character_pick[i],ig.game_config.subtitles.character_select.multi[4]]);}else{seq=[a.character_pick[i],a.multi[this.multiplayerCharSelectCounter]];ig.subtitles.playSubtitles([ig.game_config.subtitles.character_select.character_pick[i],ig.game_config.subtitles.character_select.multi[this.multiplayerCharSelectCounter]]);}
ig.audio.playVO(seq,[0,50,50]);}},unSetPlayer:function(selector){if(selector.chosen_char_id!==undefined&&selector.chosen_char_id!==null){this.characterIcons[selector.chosen_char_id].chosen=false;selector.chosen_char_id=null;ig.Session.setPlayerCharacter(selector.player_id,null);if(this.charactersSelected===true){this.charactersSelected=false;this.play_btn.ready=false;cjs.Tween.get(this.play_btn,{override:true}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.woodbase,{override:true}).to({relativeY:0},300,cjs.Ease.quadInOut);}}},selectorOnCharacter:function(selector){var result={};var l=this.characterIcons.length;var icon;var onCharacter=false;for(var i=0;i<l;i++){icon=this.characterIcons[i];if(Math.distance([icon.x,icon.y],[selector.x,selector.y])<icon.radius){onCharacter=true;break;}}
result.onCharacter=onCharacter;result.i=i;return result;},showSelectBalls:function(){var ballDelay=100;var ballStartWait=100;for(var i=0,y,relX,relY;i<5;i++){cjs.Tween.get(this.selectBalls[i]).wait(ballStartWait).set({visible:true}).wait(i*ballDelay).to({alpha:1},200,cjs.Ease.quadInOut);cjs.Tween.get(this.selectBalls[i]).wait(ballStartWait).set({visible:true}).wait(i*ballDelay).to({scaleX:1,scaleY:1},1000,cjs.Ease.elasticOut).set({ready:true});}},enableCharacterSelector:function(ball){ball.ready=true;ball.on("pressmove",this.selectionHandler,null,false,{that:this});ig.Session.setPlayerColor(ball.player_id,ball.currentColor);ball.gotoAndStop("player"+(ball.player_id+1)+ig.Session.COLORS[ball.currentColor]);ig.scaleDO(ball,1);ig.setRegs(ball,"center");},changeToCharacterSelect:function(id){var characterDelay=100;var characterStartWait=ig.Session.multiplayer===true?300:100;ig.Session.setNumberOfPlayers(id+1);this.mode=this.modes.CHARACTER;if(ig.Session.multiplayer===true){this.selectBallBottomStartX=-(id*this.selectBallBottomSpreadX)/2;cjs.Tween.get(this.woodbase).to({relativeY:0},200,cjs.Ease.quadInOut);}else{this.injectComponents([(new cjs.Sprite(ig.SHEETS.MAIN,"select_singleplayer_ball0")).set({player_id:0,name:"singleplayer_ball",pctX:0.5,pctY:0.5,relativeY:ig.system.height/2+50,relativeX:0,regPoint:"center",scaleX:0.4,scaleY:0.4,visible:false,currentColor:0})]);}
cjs.Tween.get(this.how_many).to({alpha:0},200,cjs.Ease.quadInOut).play(cjs.Tween.get(this.choose_char,{paused:true}).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut));for(var i=0,y,relX,relY;i<5;i++){this.selectBalls[i].ready=false;if(ig.Session.multiplayer===true){if(i<=id){relX=this.selectBallBottomStartX+((gameProps.enableRTL?(id-i):i)*this.selectBallBottomSpreadX);relY=this.woodBaseCurve(relX);this.selectBallAnchors[i]=[relX,relY];cjs.Tween.get(this.selectBalls[i]).to({relativeX:relX,relativeY:relY,scaleX:0.45,scaleY:0.45},500,cjs.Ease.quadInOut).call(this.enableCharacterSelector,[this.selectBalls[i]],this);}else{cjs.Tween.get(this.selectBalls[i]).to({alpha:0},300,cjs.Ease.quadInOut).set({visible:false});}}else{cjs.Tween.get(this.selectBalls[i]).to({alpha:0},300,cjs.Ease.quadInOut).set({visible:false});}
cjs.Tween.get(this.characterIcons[i]).wait(characterStartWait).set({visible:true}).wait(i*characterDelay).to({alpha:1},200,cjs.Ease.quadInOut);cjs.Tween.get(this.characterIcons[i]).wait(characterStartWait).set({visible:true}).wait(i*characterDelay).to({scaleX:1,scaleY:1},800,cjs.Ease.backOut).set({ready:true});}},changeToModeSelect:function(){ig.audio.playVO(this.modeSelectAudio.prompt);ig.subtitles.playSubtitles("PRACTICE_OR_MATCH");for(var i=0;i<5;i++){cjs.Tween.get(this.characterIcons[i],{override:true}).set({ready:false}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.selectBalls[i],{override:true}).set({ready:false}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});}
this.setButtonReady(false,this.play_btn);cjs.Tween.get(this.play_btn,{override:true}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.practice_btn,{override:true}).wait(200).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut).call(this.setButtonReady,[true,this.practice_btn],this);cjs.Tween.get(this.match_btn,{override:true}).wait(200).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut).call(this.setButtonReady,[true,this.match_btn],this);cjs.Tween.get(this.practice_text).wait(200).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut);cjs.Tween.get(this.match_text).wait(200).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut);cjs.Tween.get(this.choose_char).to({alpha:0},200,cjs.Ease.quadInOut).play(cjs.Tween.get(this.game_type,{paused:true}).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut));if(ig.Session.numberPlayers===1){cjs.Tween.get(this.singleplayer_ball,{override:true}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});}}});});

// game/screens/hole-select.js
ig.baked=true;ig.module('game.screens.hole-select').requires('game.screens.screens').defines(function(){ig.Screens.HoleSelect=ig.Screens.extend({bestScoreBallsPos:[-59,57],levelIsChosen:false,init:function(screen){var can=document.getElementById('bgs'),sh=ig.SHEETS.MAIN,c,headerText;can.style.backgroundImage='url('+ig.mq("HoleSelectBG").src+')';this._audio=ig.audio.tracks.hole_select;ig.audio.playMusic(ig.audio.tracks.music.bgloop1,{volume:0.5,loop:-1});if(ig.game.muted===true){ig.audio.muteAllMusic(ig.game.muted);}
if(gameProps.localizedTextEnabled===true){headerText=ig.createLocalizedText(PPstrings.UI_TEXT.CHOOSE_HOLE);headerText.set({name:"title_field",pctX:0.5,regPoint:"center"});}else{headerText=new cjs.Bitmap(ig.mq("text_choosehole"));headerText.set({name:"title_field",pctX:0.5,relativeY:50,relativeX:-40,regPoint:{x:"center",y:"top"}});}
c=[headerText,(new cjs.Sprite(sh,"btn_home")).set({name:"home_btn",type:"button",relativeX:80,relativeY:80,regPoint:"center"}),(new cjs.Sprite(sh,ig.game.muted===true?"select_music_btn_off":"select_music_btn")).set({name:"music_btn",type:"button",pctX:1,relativeX:-80,relativeY:80,regPoint:"center"}),(new cjs.Sprite(sh,"flag_glow")).set({name:"flag_glow",regPoint:"center",pctX:0.5,pctY:0.5,visible:false,scaleX:0.8,scaleY:0.8})];this.parent(c);cjs.Tween.get(this.flag_glow,{loop:true}).to({rotation:360},1500);var i=0;this.holeFlags=c=[(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:-388,relativeY:-127}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:-248,relativeY:3}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:-148,relativeY:194}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:2,relativeY:43}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:-38,relativeY:-158}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:153,relativeY:-108}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:283,relativeY:123}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:354,relativeY:-38}),(new cjs.Sprite(sh,"holechoose_flag"+i)).set({flag_id:i++,relativeX:314,relativeY:-226})];ig.forEach(c,function(i,s){s.set({regPoint:"center",pctX:0.5,pctY:0.5});if(ig.ua.mobile){s.on("mousedown",this.flagHandler,null,false,{that:this});}
s.on("pressup",this.flagHandler,null,false,{that:this});s.on("mouseover",this.flagHandler,null,false,{that:this});s.on("mouseout",this.flagHandler,null,false,{that:this});},this);for(var i=0,bestScore,flag,skulls;i<9;i++){bestScore=localStorage.getItem(ig.Session.highscore_ls_prefix+ig.game_config.LEVELS[i]);if(bestScore){bestScore=parseInt(bestScore);flag=this.holeFlags[i];skulls="holechoose_"+ig.Session.calculatePlayerReward(bestScore,ig.PAR[i])+"skulls";c.push((new cjs.Sprite(sh,skulls)).set({pctX:0.5,pctY:0.5,relativeX:flag.relativeX+this.bestScoreBallsPos[0],relativeY:flag.relativeY+this.bestScoreBallsPos[1]}));}}
this.injectComponents(c);},kill:function(){ig.forEach(this.holeFlags,function(i,s){if(ig.ua.mobile){s.off("mousedown",this.flagHandler);}
s.off("pressup",this.flagHandler);s.off("mouseover",this.flagHandler);s.off("mouseout",this.flagHandler);},this);this.parent();},update:function(e){this.refreshComponents();},btnHandler:function(e){var n=e.target.name;switch(e.type){case"click":cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);if(n==="home_btn"){ig.Session.refresh();cjs.Tween.removeTweens(this);ig.ScreenControl.goto(ig.SCREENS.START);}else if(n==="music_btn"){if(ig.game.muted===false){this.music_btn.gotoAndStop("select_music_btn_off");ig.game.muted=true;}else if(ig.game.muted===true){this.music_btn.gotoAndStop("select_music_btn");ig.game.muted=false;}
ig.audio.muteAllMusic(ig.game.muted);}
break;case"mousedown":case"mouseover":if(n==="music_btn"){if(ig.game.muted===true){ig.audio.playVO(ig.audio.tracks.uiVO.unmute,1000);ig.subtitles.playSubtitles("HOOK_UI_UNMUTE",1000);}else{ig.audio.playVO(ig.audio.tracks.uiVO.mute,1000);ig.subtitles.playSubtitles("HOOK_UI_MUTE",1000);}
cjs.Tween.get(this,{override:true}).to({rotation:6,scaleX:1.05,scaleY:1.05},300,cjs.Ease.quadIn);}else if(n==="home_btn"){ig.subtitles.playSubtitles("HOOK_UI_BACK",1000);cjs.Tween.get(this,{override:true}).to({rotation:-6,scaleX:1.05,scaleY:1.05},300,cjs.Ease.quadIn);if(!gameProps.disableVO){cjs.Sound.play(ig.audio.tracks.uiVO.back,{delay:1000});}}
break;case"pressup":case"mouseout":cjs.Tween.get(this,{override:true}).to({rotation:0,scaleX:1,scaleY:1},200,cjs.Ease.backOut);break;default:break;}},flagHandler:function(e,data){var that=data.that;switch(e.type){case"mousedown":case"mouseover":if(!that.levelIsChosen){ig.changeCursorToPointer();cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},300,cjs.Ease.quadOut);that.flag_glow.set({visible:true,relativeX:this.relativeX-5,relativeY:this.relativeY-5});}
break;case"pressup":if(!that.levelIsChosen){that.levelIsChosen=true;var rand=Math.range(0,that._audio.length-1);ig.audio.playVO(that._audio[rand]);ig.subtitles.playSubtitles("CHOOSE_HOLE"+(rand+1));cjs.Tween.removeTweens(that);cjs.Tween.get(that).wait(2000).call(ig.ScreenControl.loadLevel,[this.flag_id],ig.ScreenControl);this._holeIsSelected=true;}
break;case"mouseout":ig.changeCursorToDefault();cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},300,cjs.Ease.quadOut);if(!this._holeIsSelected){that.flag_glow.visible=false;}
break;default:break;}}});});

// utilities/tween-curve.js
ig.baked=true;ig.module('utilities.tween-curve').requires('impact.impact').defines(function(){window.curious=window.curious||{};window.curious.TweenCurve=ig.Class.extend({_xParamIsTweened:false,killFlag:false,tcid:0,initialProps:{},init:function(object,objProps,duration,xFunction,yFunction,settings){this._settings={xRange:[],yRange:[],tEnd:1};ig.merge(this._settings,settings);if(objProps instanceof Array){var p1=object[objProps[0]];var p2=object[objProps[1]];if(p1===undefined||p1===null){throw(": the property '"+objProps[0]+"' of the target object is undefined or null");}else if(p2===undefined||p2===null){throw(": the property '"+objProps[1]+"' of the target object is undefined or null");}else if(typeof p1!=="number"||typeof p2!=="number"){throw(": Only object properties with the type Number can be influenced by TweenCurves");}
this._influencedObject=object;this._influencedProps=objProps;this._duration=duration;this._x=p1;this._y=p2;this._influencedObjKeys=objProps;}else{throw(": The x and y object properties to be influenced must be specified by an array");}
if(typeof xFunction==="string"&&(typeof cjs!=="undefined"||typeof createjs!=="undefined")){if(typeof createjs.Ease[xFunction]==="function"||typeof cjs.Ease[xFunction]==="function"){this._xFunction=createjs.Ease[xFunction];this._xParamIsTweened=true;this.tween=cjs.Tween.get(this).to({_x:this._settings.xRange[1]},this._duration,this._xFunction).call(ig.TweenCurveControl.killTweenCurve,[this],ig.TweenCurveControl);}else{}}else if(typeof xFunction==="function"){this._xFunction=xFunction;this._yFunction=yFunction;this.tween=cjs.Tween.get(this).to({_t:this._settings.tEnd},this._duration).call(ig.TweenCurveControl.killTweenCurve,[this],ig.TweenCurveControl);}else if(typeof cjs==="undefined"||typeof createjs==="undefined"){throw(": This utility requires createjs.");}
ig.TweenCurveControl.playTweenCurve(this);return this.tween;},update:function(){var prop;var ip=this._influencedProps;var arr;if(this._xParamIsTweened){arr=this._yFunction(this._x);}else{arr[0]=this._xFunction(this._t);arr[1]=this._yFunction(this._t);}
this._influencedObject[this._influencedObjKeys[0]]=arr[0];this._influencedObject[this._influencedObjKeys[1]]=arr[1];}});window.curious.TweenCurveController=ig.Class.extend({activeTweenCurves:[],tweenCurveId:0,init:function(){if(curious.TweenCurveControl!==null){throw(": you do not manually instantiate this class!");}
window.curious.TweenCurveControl=this;},update:function(){for(var i=0;i<this.numActive;i++){this.activeTweenCurves[i].update();}},playTweenCurve:function(tweenCurve){tweenCurve.tcid=this.tweenCurveId++;this.activeTweenCurves.push(tweenCurve);this.numActive=this.activeTweenCurves.length;},killTweenCurve:function(tweenCurve){this.activeTweenCurves.shift();this.numActive=this.activeTweenCurves.length;}});window.curious.TweenCurveControl=null;new window.curious.TweenCurveController();});

// utilities/vector-utils.js
ig.baked=true;ig.module('utilities.vector-utils').requires('impact.impact').defines(function(){window.curious=window.curious||{};window.curious.Vector2=ig.Class.extend({init:function(x,y){this.x=Math.thresFloor(x);this.y=Math.thresFloor(y);this.refresh();},refresh:function(){this.mag=curious.Vector2.mag(this.x,this.y);this.unit_x=this.x/this.mag;this.unit_y=this.y/this.mag;var th=Math.toDeg(Math.atan2(this.y,this.x));this.theta=th<0?th+360:th;},add:function(other){if(other instanceof Array){this.x+=other[0];this.y+=other[1];}else{this.x+=other.x;this.y+=other.y;}},cloneAsArray:function(){return[this.x,this.y];},scale:function(scaler){this.x*=scaler;this.y*=scaler;this.refresh();},perpendicular:function(){return new curious.Vector2(-this.y,this.x);},pointOn:function(fraction){return[this.unit_x*fraction*this.mag,this.unit_y*fraction*this.mag];},allPointsOn:function(fixed_spacing,segments){var fraction;var points=[];if(fixed_spacing===true){fraction=Math.floor(this.mag/segments);}else{fraction=segments;}
for(var i=0;i<=fraction;i++){points.push(this.pointOn(i/fraction));}
return points;},createB2:function(){return new b2Vec2(this.x,this.y);},vectorRenderer:function(settings){var segments=settings.segments;var fixed_incr=settings.fixed_incr||false;var markerCjsContainer=settings.markerCjsContainer;var markerCjsDisplayObj=settings.markerCjsDisplayObj;var td=settings.markerCollection;return function(startX,startY,CMVector2){var point;var marker;var fraction=segments;if(fixed_incr===true){fraction=Math.floor(CMVector2.mag/segments);}
for(var i=0;i<=fraction;i++){point=CMVector2.pointOn(i/fraction);if(td[i]){marker=td[i];}else{marker=markerCjsDisplayObj.clone();td.push(markerCjsContainer.addChild(marker));}
marker.set({x:point[0]+startX,y:point[1]+startY,visible:true});ig.setRegs(marker,"center");}}},dot:function(other){},cross:function(other){}});window.curious.Vector2.createUnitVec=function(theta){theta=Math.toRad(theta);var x=Math.cos(theta);var y=Math.sin(theta);return new curious.Vector2(x,y);};window.curious.Vector2.mag=function(x,y){if(arguments[0]instanceof Array){return Math.sqrt(Math.pow(arguments[0][0],2)+Math.pow(arguments[0][1],2));}else{return Math.sqrt(Math.pow(x,2)+Math.pow(y,2));}};window.curious.Vector2.pointFromPoint=function(angle,magnitude,x,y){var xcomp=Math.cos(Math.toRad(angle))*magnitude;var ycomp=Math.sin(Math.toRad(angle))*magnitude;return[xcomp,ycomp];};window.curious.Vector2.unitVector=function(x,y){var m=curious.Vector2.mag(x,y);return[x/m,y/m];};window.curious.Vector2.scale=function(arrayVector,scale){return[arrayVector[0]*scale,arrayVector[1]*scale];};window.curious.Vector2.add=function(vec1,vec2){return[vec1[0]+vec2[0],vec1[1]+vec2[1]];};window.curious.Vector2.angleFromPoints=function(point1,point2){return Math.atan2((point1[1]-point2[1]),(point1[0]-point2[0]));};window.cu=window.curious;window.cu.v2=window.curious.Vector2;});

// utilities/polar-shape.js
ig.baked=true;ig.module('utilities.polar-shape').requires('impact.impact','utilities.vector-utils','utilities.ig-extensions').defines(function(){window.curious=window.curious||{};window.curious.PolarShape=ig.Class.extend({init:function(x,y,equation){this.update(x,y);this.equation=equation;},radius:function(theta){return this.equation(theta);},pointOnRadius:function(theta){var vec=curious.Vector2.createUnitVec(theta);vec.scale(this.radius(theta));return[this.x+vec.x,this.y+vec.y];},pointIn:function(x,y){var theta=Math.toDeg(curious.Vector2.angleFromPoints([this.x,this.y],[x,y])),mag=curious.Vector2.mag((x-this.x),(y-this.y));return this.radius(theta)>mag;},update:function(x,y){this.x=x;this.y=y;},setDebug:function(debug,container){this.debug=debug;if(debug===true){this.shape=new cjs.Shape();var g=this.shape.graphics;var r;var operation=function(val,i,steps,arr){r=this.pointOnRadius(val);if(i===steps){g.beginFill("#ff0000");g.drawCircle(arr[0][0],arr[0][1],2);}else{g.beginFill("#ff0000");g.drawCircle(r[0],r[1],2);}
return r;};container.addChild(this.shape);ig.rangeOp(0,360,30,operation.bind(this));}else if(this.shape){container.removeChild(this.shape);this.shape=null;}}});window.curious.PolarShape.createOval=function(x,y,width,height){var nwidth=width/2;var nheight=height/2;var equation=function(theta){var ntheta=Math.toRad(theta);return Math.sqrt(1/((1/(nwidth*nwidth))*Math.pow(Math.cos(ntheta),2)+(1/(nheight*nheight))*Math.pow(Math.sin(ntheta),2)));};return new window.curious.PolarShape(x,y,equation);};});

// game/components/game-hud.js
ig.baked=true;ig.module('game.components.game-hud').requires('game.screens.screens','utilities.tween-curve','utilities.polar-shape').defines(function(){ig.GameUI=ig.Screens.extend({displayScore:0,ballIconPositioning:{spacing:63,ballRelXStart:160,ballRelY:-34},_ballIconDEqueue:[],_activePlayerFinished:false,_playerIconRegularScale:0.75,ballLocationRingsOn:false,init:function(screen){this.container=new cjs.Container();this.screen=screen;var sc=ig.SHEETS.HUD,np,pl,c,tapringTweenDuration=1500,tapringTweenStartPosition=0;c=[(new cjs.Sprite(sc,"btn_pause")).set({name:"pause_btn",type:"button",relativeX:80,relativeY:80,regPoint:"center"}),(new cjs.BitmapText("0/0",sc)).set({name:"strokes_field",pctX:1,regPoint:"center",relativeX:-100,relativeY:70,letterSpacing:-10}),(new cjs.Sprite(sc,"placement_arrow")).set({name:"leftBallPlacementArrow",regPoint:{x:0,y:0.5},scaleX:-1,pctX:0.5,pctY:0.5,visible:false}),(new cjs.Sprite(sc,"placement_arrow")).set({name:"rightBallPlacementArrow",regPoint:{x:0,y:0.5},pctX:0.5,pctY:0.5,visible:false}),(new cjs.Sprite(sc,"btn_help")).set({type:"button",name:"help_btn",regPoint:"center",pctX:1,pctY:1,relativeX:-63,relativeY:-63})];this.injectComponents(c);this._taprings=c=[(new cjs.Sprite(sc,"taprings")).set({regPoint:"center",visible:false}),(new cjs.Sprite(sc,"taprings")).set({regPoint:"center",visible:false}),(new cjs.Sprite(sc,"taprings")).set({regPoint:"center",visible:false}),(new cjs.Sprite(sc,"taprings")).set({regPoint:"center",visible:false})];ig.forEach(c,function(i,t){t.set({scaleX:0.13,scaleY:0.13});cjs.Tween.get(t,{loop:true,position:tapringTweenStartPosition}).to({scaleX:1,scaleY:1,alpha:0},tapringTweenDuration,cjs.Ease.quadInOut);tapringTweenStartPosition+=tapringTweenDuration/3;},this);this.injectComponents(c);pl=ig.Session.playerList;np=this.numActivePlayers=ig.Session.numberPlayers;c=this.characterIcons=[];this.characterIds=[];for(var i=0,character;i<np;i++){this.characterIds[i]=pl[i].character;character=ig.game.debugLoad===true?0:pl[i].character;c[i]=(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,"btn_character"+character)).set({pctY:1,relativeY:-115,relativeX:88,regPoint:{x:0.45,y:0.45},visible:false,alpha:0});ig.scaleDO(c[i],this._playerIconRegularScale);if(i===0){c[i].set({visible:true,alpha:1});this._lastActivePlayerId=i;}}
this._setBallIconPoints();this._ballIconContainer=new cjs.Container();var bip=this.ballIconPositioning;var ballRelX=bip.ballRelXStart;var ballRelY=bip.ballRelY;var spacing=bip.spacing;c=this.ballIcons=[];for(var i=0,spritename;i<np;i++){spritename=pl[i].color==="black"?"select_singleplayer_ball5":("player"+(i+1)+pl[i].color);c[i]=(new cjs.Sprite(ig.SHEETS.MAIN,spritename)).set({pctY:1,relativeY:ballRelY,relativeX:ballRelX,regPoint:{x:0.45,y:0.45},playerActive:false});ig.scaleDO(c[i],0.6);ballRelX+=spacing;if(i===0){this.currentActivePlayerBallIcon=c[i];}else{this._ballIconDEqueue.push(c[i]);}}
c=this.characterIcons.concat(this.ballIcons);c.unshift((new cjs.Sprite(sc,"character_glow")).set({name:"char_glow",regPoint:{x:0.5,y:0.5},relativeX:100,relativeY:-100,pctY:1,alpha:0.8}))
this.injectComponents(c,this._ballIconContainer);ig.scaleDO(this.char_glow,this._playerIconRegularScale);if(ig.ua.mobile){ig.setHitArea(this.pause_btn,50);}
ig.LAYERS.GAME_UI.addChild(this.container);},update:function(){this.refreshComponents();},btnHandler:function(e,data){var n=e.target.name;if(ig.game.overlayEnabled===true||ig.game.hasSeenTutorial===false||(data.that&&data.that.screen.level.roundOver===true)){cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintOut);return;}
switch(e.type){case"click":if(this.screen.level.roundOver===true){return;}
cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);if(n==="pause_btn"){ig.ScreenControl.pause(true);}else if(n==="help_btn"){ig.audio.stopVO();this.screen.showTutorial(this.screen.hideTutorial.bind(this.screen));}
break;case"mouseover":if(n==="pause_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.halt,1000);ig.subtitles.playSubtitles("HOOK_UI_PAUSE",1000);}else if(n==="help_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.needhelp);ig.subtitles.playSubtitles("HOOK_UI_HELP");}
cjs.Tween.get(this).to({scaleX:1.1,scaleY:1.1},300,cjs.Ease.quintOut);break;case"mouseout":cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintOut);ig.audio.stopVO();break;case"mousedown":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}
break;case"pressup":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:1,scaleY:1},100,cjs.Ease.quadInOut);}else{cjs.Tween.get(this,{override:true}).to({scaleX:1.1,scaleY:1.1},100,cjs.Ease.quadInOut);}
break;default:break;}},flashBallLocationRings:function(ball){if(this.ballLocationRingsOn===false){ig.forEach(this._taprings,function(i,t){t.set({relativeX:ball.pos.x+1,relativeY:ball.pos.y-1,visible:true});});}else{return;}
this.ballLocationRingsOn=true;},hideBallLocationRings:function(){ig.forEach(this._taprings,function(i,t){t.set({visible:false});});this.ballLocationRingsOn=false;},flashPlacementArrows:function(x,y,vecL,vecR){var v2=curious.Vector2;var angle=vecR.theta;var movement=40;var farL=v2.add(vecL.cloneAsArray(),v2.pointFromPoint(angle+180,movement,0,0));var farR=v2.add(vecR.cloneAsArray(),v2.pointFromPoint(angle,movement,0,0));this.leftBallPlacementArrow.set({relativeX:vecL.x+x,relativeY:vecL.y+y,visible:true,rotation:angle,alpha:1,scaleX:-0.7});this.rightBallPlacementArrow.set({relativeX:vecR.x+x,relativeY:vecR.y+y,visible:true,rotation:angle,alpha:1,scaleX:0.7});cjs.Tween.get(this.leftBallPlacementArrow,{loop:true}).to({scaleX:-1.3,relativeX:farL[0]+x,relativeY:farL[1]+y},300,cjs.Ease.sineInOut).to({scaleX:-0.7,relativeX:vecL.x+x,relativeY:vecL.y+y},300,cjs.Ease.sineInOut);cjs.Tween.get(this.rightBallPlacementArrow,{loop:true}).to({scaleX:1.3,relativeX:farR[0]+x,relativeY:farR[1]+y},300,cjs.Ease.sineInOut).to({scaleX:0.7,relativeX:vecR.x+x,relativeY:vecR.y+y},300,cjs.Ease.sineInOut);},removePlacementArrows:function(){cjs.Tween.get(this.leftBallPlacementArrow,{override:true}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.rightBallPlacementArrow,{override:true}).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});},kill:function(){var i=this.components.length-1;do{this.components[i].removeAllEventListeners();}while(i--)
ig.LAYERS.GAME_UI.removeAllChildren();},updateScore:function(scoreValue,par){this.strokes_field.text=scoreValue+"/"+par;ig.setRegs(this.strokes_field,"center");},playerFinish:function(playerId){var bip=this.ballIconPositioning;this.numActivePlayers--;this._setBallIconPoints();this._activePlayerFinished=true;this._lastActivePlayerId=playerId;},rotatePlayers:function(playerId){if(this.numActivePlayers===1&&this._activePlayerFinished===false){return;}
var bip=this.ballIconPositioning;cjs.Tween.get(this.currentActivePlayerBallIcon).to({scaleX:0.2,scaleY:0.2},300,cjs.Ease.backIn).set({relativeX:bip.ballEndRelX,visible:false}).call(this._shiftBallIcons,[playerId],this);cjs.Tween.get(this.characterIcons[this._lastActivePlayerId]).to({alpha:0},300,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.char_glow).to({alpha:0},300,cjs.Ease.quadInOut)},feelings:function(feel){var c=ig.Session.currentPlayer.character,icon=this.characterIcons[this._lastActivePlayerId];cjs.Tween.get(icon).call(icon.gotoAndStop,[feel+"_btn_character"+c]).to({scaleX:0.8,scaleY:0.8},500,cjs.Ease.quadIn).wait(1000).to({scaleX:this._playerIconRegularScale,scaleY:this._playerIconRegularScale},500,cjs.Ease.quadIn).call(icon.gotoAndStop,["btn_character"+c]);},_shiftBallIcons:function(playerId){var delay=0;var delayRamp=100;var bip=this.ballIconPositioning;for(var i=0,relX,l=this._ballIconDEqueue.length;i<l;i++){relX=this._ballIconDEqueue[i].relativeX;cjs.Tween.get(this._ballIconDEqueue[i]).wait(delay).to({relativeX:relX-bip.spacing},200,cjs.Ease.backOut);delay+=delayRamp;}
this.lastActivePlayerBallIcon=this.currentActivePlayerBallIcon;if(this._activePlayerFinished!==true){this._ballIconDEqueue.push(this.lastActivePlayerBallIcon);cjs.Tween.get(this).wait(delay+200).call(this._fadeInlastActivePlayerBallIcon,null,this);}else{this._activePlayerFinished=false;}
cjs.Tween.get(this.characterIcons[playerId]).set({visible:true}).to({alpha:1},300,cjs.Ease.quadInOut);cjs.Tween.get(this.char_glow).to({alpha:0.8},300,cjs.Ease.quadInOut)
this.currentActivePlayerBallIcon=this._ballIconDEqueue.shift();this._lastActivePlayerId=playerId;},_fadeInlastActivePlayerBallIcon:function(){cjs.Tween.get(this.lastActivePlayerBallIcon).set({visible:true}).to({scaleX:0.6,scaleY:0.6},300,cjs.Ease.backOut);},_setBallIconPoints:function(){var bip=this.ballIconPositioning;var np=this.numActivePlayers;bip.ballEndRelX=bip.ballRelXStart+(np-1)*bip.spacing;}});});

// game/components/ppp-game-ui.js
ig.baked=true;ig.module('game.components.ppp-game-ui').requires('game.screens.screens').defines(function(){ig.Screens.PPPGameUI=ig.Screens.extend({changeOrRestartLevel:function(level){ig.game.fadeOutOverlay(200);ig.game.overlayEnabled=false;if(ig.Session.levelUnlocked(level)){ig.Session.resetPlayerStrokes();cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false}).call(ig.ScreenControl.loadLevel,[level],ig.ScreenControl);}else{cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false}).wait(400).call(ig.ScreenControl.goto,[ig.SCREENS.START],ig.ScreenControl);}},show:function(){ig.game.overlayEnabled=true;ig.game.fadeInOverlay(300,0.7).play(cjs.Tween.get(this.container,{paused:true}).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut));},hide:function(){ig.game.overlayEnabled=false;ig.game.fadeOutOverlay(300).play(cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false}));},showReplayAndNextButtons:function(){if(this.replay&&this.next){var mode=ig.Session.mode;this.replay.set({visible:false,ready:false,alpha:0,scaleX:0.3,scaleY:0.3});this.next.set({visible:false,ready:false,alpha:0,scaleX:gameProps.enableRTL===true?-0.3:0.3,scaleY:0.3});cjs.Tween.get(this.replay).wait(mode===ig.Session.MODES.MATCH?2500:1050).set({visible:true}).to({alpha:1,scaleX:1,scaleY:1},400,cjs.Ease.backOut).set({ready:true});cjs.Tween.get(this.next).wait(mode===ig.Session.MODES.MATCH?2650:1200).set({visible:true}).to({alpha:1,scaleX:gameProps.enableRTL===true?-1:1,scaleY:1},400,cjs.Ease.backOut).set({ready:true});}}});});

// game/components/pause-overlay.js
ig.baked=true;ig.module('game.components.pause-overlay').requires('game.components.ppp-game-ui').defines(function(){ig.Screens.PauseOverlay=ig.Screens.PPPGameUI.extend({_transitioningOut:false,init:function(){this.container=new cjs.Container();this.pauseContainer=new cjs.Container();this.confirmContainer=new cjs.Container();var sh=ig.SHEETS.HUD;var c=[(new cjs.Sprite(sh,"pause_confirm_bg")).set({pctX:0.5,pctY:0.5,regPoint:"center"}),(new cjs.Sprite(sh,"popup_replay_btn")).set({pctX:0.5,pctY:0.5,relativeX:-270,relativeY:60,regPoint:"center",type:"button",name:"restart_btn"}),(new cjs.Sprite(sh,"popup_resume_btn")).set({pctX:0.5,pctY:0.5,relativeX:-90-(gameProps.enableRTL?7:0),relativeY:60,regPoint:"center",type:"button",name:"play_btn",scaleX:gameProps.enableRTL?-1:1}),(new cjs.Sprite(sh,"popup_quit_btn")).set({pctX:0.5,pctY:0.5,relativeX:90,relativeY:60,regPoint:"center",type:"button",name:"quit_btn"}),(new cjs.Sprite(sh,ig.game.muted===true?"popup_muted_btn":"popup_music_btn")).set({pctX:0.5,pctY:0.5,relativeX:270,relativeY:60,regPoint:"center",type:"button",name:"mute_btn"})];if(gameProps.localizedTextEnabled){c=c.concat([ig.createLocalizedText(PPstrings.UI_TEXT.PAUSED).set({pctX:0.5,pctY:0.5,regPoint:"center"})]);}else{c=c.concat([(new cjs.Sprite(sh,"text_paused")).set({pctX:0.5,pctY:0.5,relativeY:-100,regPoint:"center"}),(new cjs.Sprite(sh,"pause_skull")).set({pctX:0.5,pctY:0.5,relativeY:-100,relativeX:-290,regPoint:"center"}),(new cjs.Sprite(sh,"pause_skull")).set({pctX:0.5,pctY:0.5,relativeY:-100,relativeX:290,regPoint:"center"})]);}
this.injectComponents(c,this.pauseContainer);c=[(new cjs.Sprite(sh,"pause_confirm_bg")).set({pctX:0.5,pctY:0.5,regPoint:"center"}),(new cjs.Sprite(sh,"popup_confirm_btn")).set({pctX:0.5,pctY:0.5,relativeX:-120,relativeY:60,regPoint:"center",type:"button",name:"yes_quit_btn"}),(new cjs.Sprite(sh,"popup_quit_btn")).set({pctX:0.5,pctY:0.5,relativeX:120,relativeY:60,regPoint:"center",type:"button",name:"dont_quit_btn"})];if(gameProps.localizedTextEnabled){c=c.concat([ig.createLocalizedText(PPstrings.UI_TEXT.QUIT_CONFIRM).set({pctX:0.5,pctY:0.5,regPoint:"center"})]);}else{c=c.concat([(new cjs.Sprite(sh,"text_areyousure")).set({pctX:0.5,pctY:0.5,relativeY:-100,regPoint:"center"}),]);}
this.confirmContainer.visible=false;this.injectComponents(c,this.confirmContainer);if(ig.ua.mobile){ig.setHitArea(this.play_btn,100);}
ig.LAYERS.OVERLAY.addChild(this.container);this.container.set({visible:false,y:-ig.system.height});},update:function(){this.parent();},kill:function(){ig.LAYERS.OVERLAY.removeChild(this.container);if(this.components&&this.components.length){for(var i=this.components.length-1;i>=0;i--){this.components[i].removeAllEventListeners();}}},show:function(){ig.game.overlayEnabled=true;this.confirmContainer.set({visible:false,alpha:0});this.pauseContainer.set({visible:true,alpha:1});ig.game.fadeInOverlay(300,0.7).play(cjs.Tween.get(this.container,{override:true}).set({visible:true,y:-ig.system.height}).to({y:0},500,cjs.Ease.backOut));},hide:function(){ig.game.overlayEnabled=false;cjs.Tween.get(this.container,{override:true}).to({y:ig.system.height},500,cjs.Ease.backIn).set({visible:false}).call(ig.game.fadeOutOverlay,[300],ig.game);},returnToHoleSelectScreen:function(){ig.game.overlayEnabled=false;ig.game.fadeInOverlay(500,1).play(cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false}).call(ig.ScreenControl.goto,[ig.SCREENS.HOLE_SELECT],ig.ScreenControl));},returnToStartScreen:function(){ig.game.overlayEnabled=false;ig.game.fadeInOverlay(500,1).play(cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false}).call(ig.ScreenControl.goto,[ig.SCREENS.START],ig.ScreenControl));},showConfirm:function(){if(!gameProps.disableVO){cjs.Sound.play(ig.audio.tracks.uiVO.sure,{volume:2});}
ig.subtitles.playSubtitles("HOOK_UI_QUITCONFIRM");cjs.Tween.get(this.pauseContainer).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false});cjs.Tween.get(this.confirmContainer).set({visible:true}).to({alpha:1},200,cjs.Ease.quadInOut);},btnHandler:function(e){var n=e.target.name;switch(e.type){case"click":ig.audio.stopVO();cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);if(n==="play_btn"||n==="dont_quit_btn"){ig.ScreenControl.pause(false);}else if(n==="quit_btn"){this.showConfirm();}else if(n==="mute_btn"){if(ig.game.muted===true){ig.game.muted=false;this.mute_btn.gotoAndStop("popup_music_btn");}else{ig.game.muted=true;this.mute_btn.gotoAndStop("popup_muted_btn");}
ig.audio.muteAllMusic(ig.game.muted);}else if(n==="restart_btn"){if(!this._transitioningOut){this.changeOrRestartLevel(ig.Session.currentLevel);this._transitioningOut=true;}}else if(n==="yes_quit_btn"){if(!this._transitioningOut){if(ig.Session.mode===ig.Session.MODES.PRACTICE){this.returnToHoleSelectScreen();}else{this.returnToStartScreen();}
this._transitioningOut=true;}}
break;case"mouseover":if(n==="mute_btn"){if(ig.game.muted===true){ig.audio.playVO(ig.audio.tracks.uiVO.unmute,1000);ig.subtitles.playSubtitles("HOOK_UI_UNMUTE",1000);}else{ig.audio.playVO(ig.audio.tracks.uiVO.mute,1000);ig.subtitles.playSubtitles("HOOK_UI_MUTE",1000);}}else if(n==="restart_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.replay,1000);ig.subtitles.playSubtitles("HOOK_UI_REPLAYHOLE",1000);}else if(n==="quit_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.quit,1000);ig.subtitles.playSubtitles("HOOK_UI_QUIT",1000);}else if(n==="play_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.play,1000);ig.subtitles.playSubtitles("HOOK_UI_PLAY",1000);}else if(n==="yes_quit_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.aye,1000);ig.subtitles.playSubtitles("HOOK_UI_QUITYES",1000);}else if(n==="dont_quit_btn"){ig.audio.playVO(ig.audio.tracks.uiVO.nay,1000);ig.subtitles.playSubtitles("HOOK_UI_QUITNO",1000);}
if(n==="play_btn"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}else{cjs.Tween.get(this).to({scaleX:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}
break;case"mouseout":if(n==="play_btn"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else{cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}
break;case"mousedown":if(ig.ua.mobile){if(n==="play_btn"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}else{cjs.Tween.get(this).to({scaleX:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}}
break;case"pressup":if(ig.ua.mobile){if(n==="play_btn"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else{cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}}
break;}}});});

// game/components/endgame-multi-overlay.js
ig.baked=true;ig.module('game.components.endgame-multi-overlay').requires('game.components.ppp-game-ui').defines(function(){ig.Screens.EndgameMultiOverlay=ig.Screens.PPPGameUI.extend({init:function(screen){this.screen=screen;this.container=new cjs.Container();var sh=ig.SHEETS.HUD,egf=ig.SHEETS.EG_FONT,spacingMultiplier=ig.Session.numberPlayers-1,spacing=150,relX=-(spacingMultiplier*spacing)/2-5,dubloons,characterFace,c;c=[(new cjs.Sprite(sh,"endgame_multi_bg")).set({regPoint:"center"}),(new cjs.Sprite(sh,"popup_replay_btn")).set({type:"button",name:"replay",regPoint:"center",relativeY:300,relativeX:-110}),(new cjs.Sprite(sh,"popup_next_btn")).set({type:"button",name:"next",regPoint:"center",relativeY:300,relativeX:110})];if(gameProps.localizedTextEnabled){c=c.concat([ig.createLocalizedText(PPstrings.UI_TEXT.MULTIPLAYER_HOLE,(ig.Session.currentLevel+1).toString()).set({regPoint:"center"}),ig.createLocalizedText(PPstrings.UI_TEXT.MULTIPLAYER_HOLE_PAR,ig.Session.currentPar.toString()).set({regPoint:"center"}),ig.createLocalizedText(PPstrings.UI_TEXT.MULTIPLAYER_BEST_SCORE,localStorage.getItem(ig.Session.highscore_lh_key)).set({regPoint:"center"})]);}else{c=c.concat([(new cjs.Sprite(sh,"text_best")).set({regPoint:"center",relativeX:235,relativeY:-227}),(new cjs.Sprite(sh,"text_par")).set({regPoint:"center",relativeX:-20,relativeY:-227}),(new cjs.Sprite(sh,"text_hole")).set({regPoint:"center",relativeX:-260,relativeY:-227}),(new cjs.BitmapText((ig.Session.currentLevel+1).toString(),egf)).set({scale:0.47,relativeX:-208,relativeY:-245}),(new cjs.BitmapText(ig.Session.currentPar.toString(),egf)).set({scale:0.47,relativeX:27,relativeY:-245}),(new cjs.BitmapText(localStorage.getItem(ig.Session.highscore_lh_key),egf)).set({scale:0.47,relativeX:288,relativeY:-245})]);}
ig.forEach(c,function(i,e){e.set({pctX:0.5,pctY:0.47});});for(var i=0,player,reward,playerScore;i<ig.Session.numberPlayers;i++){player=ig.Session.playerList[i];reward=ig.Session.calculatePlayerReward(player.strokes);if(ig.Session.mode===ig.Session.MODES.MATCH){dubloons="endgame_multi_"+reward+"dubloons";playerScore=ig.Session.currentLevel!==8?player.strokes.toString():player.points.toString();}else{dubloons="endgame_multi_"+reward+"skulls";playerScore=player.strokes.toString();}
characterFace="btn_character"+player.character;c=c.concat([(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,characterFace)).set({relativeX:relX,regPoint:"center",pctX:0.5,pctY:0.5,relativeY:-60,scaleX:0.56,scaleY:0.56}),(new cjs.Sprite(sh,"endgame_playerscoreframe")).set({relativeX:relX,relativeY:115,regPoint:"center",pctX:0.5,pctY:0.5}),(new cjs.Sprite(sh,dubloons)).set({relativeX:relX,relativeY:40,pctX:0.5,pctY:0.5,regPoint:"center"}),(new cjs.BitmapText(playerScore,egf)).set({regPoint:"center",pctX:0.5,pctY:0.5,relativeX:relX,relativeY:115,scale:0.55})]);relX+=spacing;}
this.injectComponents(c);this.showReplayAndNextButtons();ig.LAYERS.OVERLAY.addChild(this.container);this.container.set({visible:false,y:-ig.system.height});},update:function(){this.parent();},show:function(){ig.game.overlayEnabled=true;ig.game.fadeInOverlay(300,0.7).play(cjs.Tween.get(this.container).set({visible:true}).to({y:0},750,cjs.Ease.backOut));},hide:function(){ig.game.overlayEnabled=false;cjs.Tween.get(this.container).to({y:-ig.system.height},750,cjs.Ease.backIn).set({visible:false}).call(ig.game.fadeOutOverlay,[300],ig.game);},btnHandler:function(e){if(e.target.ready===false){return;}
var n=e.target.name;switch(e.type){case"click":if(ig.game.gamificationEnabled){ig.game.hideGamification();}
if(n==="next"){var rand=Math.range(0,ig.audio.tracks.uiVO.confirm.length-1);ig.audio.playVO(ig.audio.tracks.uiVO.confirm[rand]);ig.subtitles.playSubtitles("HOOK_UI_NEXTHOLE_CONFIRM"+(rand+1));if(ig.Session.mode===ig.Session.MODES.MATCH){this.hide();cjs.Tween.get(this).wait(750).call(this.changeOrRestartLevel,[++ig.Session.currentLevel],this);}else if(ig.Session.mode===ig.Session.MODES.PRACTICE){this.hide();ig.Session.setPlayerPointsToZero();cjs.Tween.get(this).wait(750).call(ig.ScreenControl.goto,[ig.SCREENS.HOLE_SELECT],ig.ScreenControl);}}else if(n==="replay"){this.changeOrRestartLevel(ig.Session.currentLevel);}
break;case"mouseover":if(n==="next"){ig.audio.playVO(ig.audio.tracks.uiVO.next,1000);ig.subtitles.playSubtitles("HOOK_UI_NEXTHOLE",1000);cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}else if(n==="replay"){ig.audio.playVO(ig.audio.tracks.uiVO.replay,1000);ig.subtitles.playSubtitles("HOOK_UI_REPLAYHOLE",1000);cjs.Tween.get(this).to({scaleX:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}
break;case"mouseout":if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}
break;case"mousedown":if(ig.ua.mobile){if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}}
break;case"pressup":if(ig.ua.mobile){if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}}
break;}}});});

// game/components/endgame-single-overlay.js
ig.baked=true;ig.module('game.components.endgame-single-overlay').requires('game.components.ppp-game-ui').defines(function(){ig.Screens.EndgameSingleOverlay=ig.Screens.PPPGameUI.extend({init:function(screen){this.screen=screen;this.container=new cjs.Container();var sh=ig.SHEETS.HUD,egf=ig.SHEETS.EG_FONT,player=ig.Session.playerList[0],characterFace="btn_character"+player.character,reward=ig.Session.calculatePlayerReward(player.strokes),dubloons,playerScore,c;if(ig.Session.mode===ig.Session.MODES.MATCH){dubloons="endgame_single_"+reward+"dubloons";playerScore=ig.Session.currentLevel!==8?player.strokes.toString():player.points.toString();}else{dubloons="endgame_single_"+reward+"skulls";playerScore=player.strokes.toString();}
c=[(new cjs.Sprite(sh,"endgame_single_bg")).set({regPoint:"center"}),(new cjs.BitmapText(playerScore,egf)).set({relativeX:-230,relativeY:60,regPoint:"center"}),(new cjs.Sprite(ig.SHEETS.HUD_CHARACTERS,characterFace)).set({relativeY:25,regPoint:"center"}),(new cjs.Sprite(sh,"popup_replay_btn")).set({type:"button",name:"replay",regPoint:"center",relativeY:250,relativeX:-110}),(new cjs.Sprite(sh,"popup_next_btn")).set({type:"button",name:"next",regPoint:"center",relativeY:250,relativeX:110}),];if(gameProps.localizedTextEnabled){c=c.concat([ig.createLocalizedText(PPstrings.UI_TEXT.SINGLEPLAYER_HOLE,(ig.Session.currentLevel+1).toString()).set({regPoint:"center"}),ig.createLocalizedText(PPstrings.UI_TEXT.SINGLEPLAYER_HOLE_PAR,ig.Session.currentPar.toString()).set({regPoint:"center"}),ig.createLocalizedText(PPstrings.UI_TEXT.SINGLEPLAYER_BEST_SCORE,localStorage.getItem(ig.Session.highscore_lh_key)).set({regPoint:"center"}),ig.createLocalizedText(PPstrings.UI_TEXT.SINGLEPLAYER_SCORE).set({regPoint:"center"})]);}else{c=c.concat([(new cjs.BitmapText((ig.Session.currentLevel+1).toString(),egf)).set({scale:0.47,relativeX:261,relativeY:-66}),(new cjs.BitmapText(ig.Session.currentPar.toString(),egf)).set({scale:0.47,relativeX:261,relativeY:5}),(new cjs.BitmapText(localStorage.getItem(ig.Session.highscore_lh_key),egf)).set({scale:0.47,relativeX:261,relativeY:75}),(new cjs.Sprite(sh,"text_hole")).set({regPoint:"center",relativeX:200,relativeY:-48}),(new cjs.Sprite(sh,"text_par")).set({regPoint:"center",relativeX:200,relativeY:22}),(new cjs.Sprite(sh,"text_best")).set({regPoint:"center",relativeX:200,relativeY:93}),(new cjs.Sprite(sh,"text_score")).set({regPoint:"center",relativeX:-225,relativeY:-40})]);}
ig.forEach(c,function(i,e){e.set({pctX:0.5,pctY:0.47});});c.push((new cjs.Sprite(sh,dubloons)).set({relativeX:-155,relativeY:-124,pctX:0.5,pctY:0.5,regPoint:{x:0,y:1}}));this.injectComponents(c);this.showReplayAndNextButtons();ig.LAYERS.OVERLAY.addChild(this.container);this.container.set({visible:false,y:-ig.system.height});},update:function(){this.parent();},show:function(){ig.game.overlayEnabled=true;ig.game.fadeInOverlay(300,0.7).play(cjs.Tween.get(this.container).set({visible:true}).to({y:0},750,cjs.Ease.backOut));},hide:function(){ig.game.overlayEnabled=false;cjs.Tween.get(this.container).to({y:-ig.system.height},750,cjs.Ease.backIn).set({visible:false}).call(ig.game.fadeOutOverlay,[300],ig.game);},btnHandler:function(e){if(e.target.ready===false){return;}
var n=e.target.name;switch(e.type){case"click":if(ig.game.gamificationEnabled){ig.game.hideGamification();}
if(n==="next"){var rand=Math.range(0,ig.audio.tracks.uiVO.confirm.length-1);ig.subtitles.playSubtitles("HOOK_UI_NEXTHOLE_CONFIRM"+(rand+1));ig.audio.playVO(ig.audio.tracks.uiVO.confirm[rand]);if(ig.Session.mode===ig.Session.MODES.MATCH){this.hide();cjs.Tween.get(this).wait(750).call(this.changeOrRestartLevel,[++ig.Session.currentLevel],this);}else if(ig.Session.mode===ig.Session.MODES.PRACTICE){this.hide();ig.Session.setPlayerPointsToZero();cjs.Tween.get(this).wait(750).call(ig.ScreenControl.goto,[ig.SCREENS.HOLE_SELECT],ig.ScreenControl);}}else if(n==="replay"){this.changeOrRestartLevel(ig.Session.currentLevel);}
break;case"mouseover":if(n==="next"){ig.audio.playVO(ig.audio.tracks.uiVO.next,1000);ig.subtitles.playSubtitles("HOOK_UI_NEXTHOLE",1000);cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}else if(n==="replay"){ig.audio.playVO(ig.audio.tracks.uiVO.replay,1000);ig.subtitles.playSubtitles("HOOK_UI_REPLAYHOLE",1000);cjs.Tween.get(this).to({scaleX:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);}
break;case"mouseout":if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}
break;case"mousedown":if(ig.ua.mobile){if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:0.9,scaleY:0.9},300,cjs.Ease.quintInOut);}}
break;case"pressup":if(ig.ua.mobile){if(n==="next"){cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);}else if(n==="replay"){cjs.Tween.get(this).to({scaleX:1,scaleY:1},300,cjs.Ease.quintInOut);}}
break;}}});});

// game/controllers/audio.js
ig.baked=true;ig.module('game.controllers.audio').requires('impact.impact').defines(function(){ig.VOSequence=ig.Class.extend({_sequence:[],_index:0,_callback:null,_current:null,init:function(){},play:function(callback){this._index=-1;this._callback=callback;this._next();},add:function(id,delay){this._sequence.push({id:id,delay:delay||0});return this;},_next:function(){this._index++;if(this._current){this._current.removeAllEventListeners();}
var seq=this._sequence[this._index];if(seq){this._current=cjs.Sound.play(seq.id,{delay:seq.delay});if(this._current){this._current.on("complete",this._onSoundComplete,this);}else{this._next();}}else if(this._callback){this._callback();}},clear:function(){this._sequence=[];this._index=0;this._callback=null;this._current&&this._current.removeAllEventListeners();this._current=null;},stop:function(){this._current&&this._current.stop();},_onSoundComplete:function(){this._next();}});ig.AudioControl=ig.Class.extend({music:{},soundDurations:{},init:function(){if(ig.audio!==null){throw("you don't instantiate this class.")}
ig.audio=this;if(ig.isAudioLimited){this.currentAudio=new ig.VOSequence();}else{this.currentVO=new ig.VOSequence();this.currentSFX=[];}},playMusic:function(musicId,settings){var options=settings||{},instance;this.musicId=musicId;this.music[musicId]&&this.music[musicId].stop();instance=this.music[musicId]=cjs.Sound.play(musicId,{loop:options.loop||0,volume:options.volume||1,delay:options.delay||0});if(this.music[musicId])
{this.music[musicId].savedVolume=options.volume||1;}
return instance;},muteAllMusic:function(mute){if(mute===true){this.musicMuted=true;for(var m in this.music){this.music[m]&&this.music[m].setVolume(0);}}else{this.musicMuted=false;for(var m in this.music){this.music[m]&&this.music[m].setVolume(this.music[m].savedVolume);}}},_setupAndPlaySequence:function(seq,idList,delay,callback,opt){var options=opt||{};seq.stop();seq.clear();if(idList instanceof Array){if(!delay){var delay=[];}
for(var i=0,l=idList.length;i<l;i++){if(idList[i]!==undefined){seq.add(idList[i],(delay[i]||0));}}}else{seq.add(idList,delay);}
seq.play(callback||null);this.sequence=seq;},playCurrentAudio:function(voIdlist,delay,callback){if(!ig.isAudioLimited){return;}
this._setupAndPlaySequence(this.currentAudio,voIdlist,delay||0,callback||null,{clear:true});},playVO:function(voIdlist,delay,callback){if(gameProps.disableVO){return;}
this._setupAndPlaySequence(this.currentVO,voIdlist,delay||0,callback||null,{clear:true});},playSFX:function(sfxIdSequence,delay,callback){this._setupAndPlaySequence(this.currentSFX,voIdlist,delay||0,callback||null);},stopSFX:function(){},stopMusic:function(musicId){this.music[musicId].stop();},stopAllMusic:function(){for(var m in this.music){this.music[m]&&this.music[m].stop();this.music[m]=null;}
this.music={};},stopVO:function(){this.currentVO.stop();this.currentVO.clear();},saveSoundSpriteDurations:function(audioSpriteList){for(var i=0,l=audioSpriteList.length;i<l;i++){this.soundDurations[audioSpriteList[i].id]=Math.ceil(audioSpriteList.duration);}},saveSoundDuration:function(soundId){var sound=cjs.Sound.play(soundId);if(sound.playState!==cjs.Sound.PLAY_FAILED){this.soundDurations[soundId]=sound.duration;sound.stop();}},checkSoundDuration:function(soundIds){var duration=0;if(arguments.length>1){for(var i=0,l=arguments.length;i<l;i++){if(!this.soundDurations[arguments[i]]){this.saveSoundDuration(arguments[i]);}
duration+=this.soundDurations[arguments[i]];}}else{if(!this.soundDurations[soundIds]){this.saveSoundDuration(soundIds);}
duration=this.soundDurations[soundIds];}
return duration;}});ig.audio=null;new ig.AudioControl();});

// game/components/tutorial-overlay.js
ig.baked=true;ig.module('game.components.tutorial-overlay').requires('game.components.ppp-game-ui','game.controllers.audio').defines(function(){ig.Screens.TutorialOverlay=ig.Screens.PPPGameUI.extend({_handTapAngle:26,init:function(screen){this.screen=screen;this.container=new cjs.Container();var sh=ig.SHEETS.TUTORIAL;var player=ig.Session.playerList[0];var characterFace="btn_character"+player.character;var tpos=this._handFromTapringsPos={x:-90,y:-76};this._componentDefaults={taprings:{relativeX:203,relativeY:154,alpha:0},hand:{relativeX:203+tpos.x,relativeY:154+tpos.y,alpha:0,rotation:0},ball:{relativeX:249,relativeY:135},backwards_hand:{alpha:0,rotation:0,relativeX:250-tpos.x,relativeY:-141+tpos.y},hole_mask:{visible:false}};var c=[(new cjs.Sprite(sh,"tutorial_bg")).set({regPoint:"center",relativeX:50}),(new cjs.Sprite(sh,"flag")).set({scaleX:0.8,scaleY:0.8,relativeX:-277,relativeY:-140,regPoint:{x:0.5,y:1}}),(new cjs.Sprite(sh,"tutorial_ball")).set({name:"ball",relativeX:239,relativeY:135}),(new cjs.Sprite(sh,"tutorial_holemask")).set({name:"hole_mask",regPoint:[0.5,0],relativeY:-150,relativeX:-309,visible:false}),(new cjs.Sprite(sh,"tutorial_taprings")).set({name:"taprings",regPoint:"center",relativeX:203,relativeY:154,alpha:0}),(new cjs.Sprite(sh,"tutorial_hand")).set({name:"hand",relativeX:this._componentDefaults.hand.relativeX,relativeY:this._componentDefaults.hand.relativeY,alpha:0}),(new cjs.Sprite(sh,"tutorial_hand")).set({name:"backwards_hand",scaleX:-1,relativeX:250-tpos.x,relativeY:-141+tpos.y,alpha:0}),(new cjs.Sprite(sh,"tutorial_dots")).set({name:"dots",regPoint:{x:1,y:0.5},relativeX:250-40,relativeY:-141,alpha:0,rotation:-0.5}),(new cjs.Sprite(sh,"tutorial_resume")).set({type:"button",name:"resume",regPoint:"center",relativeY:285,scaleX:gameProps.enableRTL?-1:1})];ig.forEach(c,function(i,e){e.set({pctX:0.5,pctY:0.5});});this.injectComponents(c);ig.LAYERS.OVERLAY.addChild(this.container);this.container.set({visible:false,alpha:0});},show:function(callback){this.parent();this._playInstructions(callback);},hide:function(){ig.game.overlayEnabled=false;ig.game.fadeOutOverlay(300).play(cjs.Tween.get(this.container).to({alpha:0},200,cjs.Ease.quadInOut).set({visible:false})).call(this.reset,null,this);},_playSingleVO:function(id){if(!gameProps.disableVO){this._currentVO=cjs.Sound.play(id);}},_playInstructions:function(callback){ig.subtitles.playSubtitles("TUTORIAL");this._playSingleVO(ig.audio.tracks.tutorial.explain);cjs.Tween.get(this.hand).wait(5000).to({alpha:1},300,cjs.Ease.quadInOut);this._tutorialEndCallback=callback||null;this.mainTween=cjs.Tween.get(this).wait(4000).call(this._playSingleVO,[ig.audio.tracks.tutorial.placement]).wait(2500).call(this._explainBallPlacement,[178,109]).wait(2200).call(this._playSingleVO,[ig.audio.tracks.tutorial.ballinhole]).wait(3500).call(this._explainTapHit,[229,-152]).wait(2200).call(this._explainTouchAndDragHit,[251,-143]).wait(13000).call(this._tutorialEndCallback===null?(function(){}):this._runTutorialEndCallback,null,this);},_runTutorialEndCallback:function(){this._tutorialEndCallback();},_explainBallPlacement:function(toX,toY){var tpos=this._handFromTapringsPos;cjs.Tween.get(this.hand).to({relativeX:toX+tpos.x,relativeY:toY+tpos.y},500,cjs.Ease.quadInOut).to({rotation:this._handTapAngle},500,cjs.Ease.quadInOut).wait(100).to({rotation:0},500,cjs.Ease.quadInOut)
cjs.Tween.get(this.taprings).to({relativeX:toX,relativeY:toY},500,cjs.Ease.quadInOut).wait(300).to({alpha:1},200,cjs.Ease.quadInOut).wait(100).to({alpha:0},200,cjs.Ease.quadInOut);cjs.Tween.get(this.ball).wait(1200).to({relativeX:toX,relativeY:toY},200,cjs.Ease.quadInOut);},_explainTapHit:function(toX,toY){var tpos=this._handFromTapringsPos;if(!gameProps.disableVO){this._currentVO=cjs.Sound.play(ig.audio.tracks.tutorial.howhit);}
cjs.Tween.get(this.hand).to({relativeX:toX+tpos.x,relativeY:toY+tpos.y},500,cjs.Ease.quadInOut).to({rotation:this._handTapAngle},500,cjs.Ease.quadInOut).wait(100).to({rotation:0},500,cjs.Ease.quadInOut).to({alpha:0},400,cjs.Ease.quadInOut);cjs.Tween.get(this.taprings).to({relativeX:toX,relativeY:toY},500,cjs.Ease.quadInOut).wait(300).to({alpha:1},200,cjs.Ease.quadInOut).wait(100).to({alpha:0},200,cjs.Ease.quadInOut);cjs.Tween.get(this.ball).wait(1100).to({relativeX:toX,relativeY:toY},1000,cjs.Ease.quadOut);},_explainTouchAndDragHit:function(toX,toY){var tpos=this._handFromTapringsPos,handTravelX=90,holeX=-285,holeY=-161;if(!gameProps.disableVO){this._endVOSequence=new ig.VOSequence();this._endVOSequence.add(ig.audio.tracks.tutorial.aimhit,50);this._endVOSequence.add(ig.audio.tracks.tutorial.harder,100);this._endVOSequence.add(ig.audio.tracks.tutorial.steplively,100);this._endVOSequence.play();}
cjs.Tween.get(this.backwards_hand).set({relativeX:toX-tpos.x,relativeY:toY+tpos.y}).to({alpha:1},200,cjs.Ease.quadInOut).to({rotation:-this._handTapAngle},400,cjs.Ease.quadInOut).to({relativeX:toX-tpos.x+handTravelX},600,cjs.Ease.quadInOut).to({rotation:0},400,cjs.Ease.quadInOut).to({alpha:0},200,cjs.Ease.quadInOut);cjs.Tween.get(this.dots).wait(800).to({alpha:1},100,cjs.Ease.quadInOut).wait(600).to({alpha:0},100,cjs.Ease.quadInOut);cjs.Tween.get(this.ball).wait(1400).to({relativeX:holeX,relativeY:holeY},1300,cjs.Ease.quadOut).to({relativeY:holeY+25},100,cjs.Ease.quadInOut);cjs.Tween.get(this.hole_mask).wait(2700).set({visible:true});},update:function(){this.refreshComponents();},btnHandler:function(e){var n=e.target.name;switch(e.type){case"click":cjs.Sound.play(ig.audio.tracks.general_sfx.button_click);if(n==="resume"){ig.subtitles.stop();if(this._tutorialEndCallback){this._tutorialEndCallback();this._tutorialEndCallback=null;}else{this.screen.hideTutorial();}}
break;case"mouseover":if(!gameProps.disableVO){cjs.Sound.play(ig.audio.tracks.uiVO.play);}
cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1.1:1.1,scaleY:1.1},300,cjs.Ease.quintInOut);break;case"mouseout":cjs.Tween.get(this).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},300,cjs.Ease.quintInOut);break;case"mousedown":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-0.9:0.9,scaleY:0.9},100,cjs.Ease.quadInOut);}
break;case"pressup":if(ig.ua.mobile){cjs.Tween.get(this,{override:true}).to({scaleX:gameProps.enableRTL?-1:1,scaleY:1},100,cjs.Ease.quadInOut);}
break;}},reset:function(){for(var i=0,c,l=this.components.length;i<l;i++){c=this.components[i];cjs.Tween.removeTweens(c);if(this._componentDefaults[c.name]){c.set(this._componentDefaults[c.name]);}}
this._endVOSequence&&this._endVOSequence.stop();this._currentVO&&this._currentVO.stop();cjs.Tween.removeTweens(this);}});});

// game/entities/ball.js
ig.baked=true;ig.module('game.entities.ball').requires('impact.entity').defines(function(){ig.BallEntity=ig.Entity.extend({debug:false,launchVectorComps:[0,0],launchDirectionStart:[0,0],launchVector:null,maxLaunchForceMag:42,maxTrajectoryDrawMag:500,minTrajectoryDrawMag:40,trajectoryLengthMultiplier:2,easyLaunch:true,held:false,inForceField:false,trajectoryDots:[],updateQueue:[],teleporting:false,b2Type:"circle",inHole:false,savedState:{vel:{},pos:{}},enteredLighthouse:false,startedCloseToHole:false,trajectoryNeedsErase:false,trajectoryNeedsUpdate:false,beingShotFromCannon:false,_mousePresses:0,init:function(x,y,world,settings){this.parent(x,y,world,settings);var f,s,canvas;this.player=ig.Session.playerList[this.playerId];this._displayobject=new cjs.Sprite(ig.SHEETS.BALLS,"ball"+this.player.colorId);this._displayobject.set({x:x+this.world.origin.x,y:y+this.world.origin.y,z:this.world.zLayers.BALL,name:"ball"});this.radius=this._displayobject.getBounds().width/2;this.size.x=this.size.y=this.radius*2;ig.setRegs(this._displayobject,0.5,0.47);this.BB=new curious.BB(x,y,this.size.x,this.size.y,0.5,0.5);this.groundContactPoint=[this.pos.x,this.pos.y+this.radius];this.initB2Body();s=new cjs.Shape();s.graphics.beginFill("#fff").drawCircle(0,0,this.radius+40);this._displayobject.hitArea=s;this.splashSprite=new cjs.Sprite(ig.SHEETS.ALL_COURSES,"Splash");this.splashSprite.set({visible:false,regX:39,regY:34,z:this.world.zLayers.BALL});this.splashSprite.on("animationend",function(){this.visible=false;});this.world.worldContainer.addChild(this.splashSprite);canvas=document.getElementById("canvas");canvas.addEventListener("mouseenter",function(e){}.bind(this));canvas.addEventListener("mouseleave",function(e){this.eraseTrajectory();this.resetPutt();}.bind(this));this._launchTimer=new ig.Timer();},endPlacement:function(){},initB2Body:function(){var b2UserData={type:"player_ball",playerId:this.playerId};this.b2Body=this.world.b2CreateCircle(this.pos.x,this.pos.y,this.radius,2,true);this.b2Body.SetLinearDamping(0.6);this.b2Body.SetAngularDamping(0.5);this.b2Body.SetBullet(true);this.b2Body.SetUserData(b2UserData);var f=this.b2Body.GetFixtureList();f.SetRestitution(0.9);},update:function(){var rel=this.world.fromOldOrigin(this.pos.x,this.pos.y);this.relX=rel[0];this.relY=rel[1];if(this.inWater){this._ballInTheWater();}
if(this.launchStarted&&this._launchTimer.delta()>1){this.onPressUp();}
if(this.updateQueue.length>0){var update=this.updateQueue.pop();if(update.destroyMe){this.world.b2World.DestroyBody(this.b2Body);this.b2Body=null;}else if(this.b2Body){this.b2Body.SetPosition(new b2Vec2(update.x,update.y));this.b2Body.SetLinearVelocity(update.vel);}else{this.resetB2BodyFromState(update);}
if(update.callback){callback();}
if(this.teleporting===true){if(this._displayobject.z!==this.world.zLayers.BALL){this._displayobject.z=this.world.zLayers.BALL;this.world.worldContainer.sortChildren(ig.sortByZ);}
cjs.Tween.get(this).wait(20).set({teleporting:false});}}
if(this.placed&&this.b2Body){var pos=this.b2Body.GetWorldCenter();var v=this.b2Body.GetLinearVelocity();var vmag=v.Length();this.pos.x=pos.x*b2Scale;this.pos.y=pos.y*b2Scale;this.groundContactPoint=[this.pos.x,this.pos.y+this.radius];if(vmag<1&&this.inForceField!==true){v=new b2Vec2(0,0);this.b2Body.SetLinearVelocity(v);}
if(this.launched){this.eraseTrajectory();if(vmag===0){this.launchSound&&this.launchSound.stop();this.launchSound=null;this.launched=false;this.world.endStroke();}}}
this._displayobject.x=this.pos.x;this._displayobject.y=this.pos.y;if(this.trajectoryNeedsErase===true){this.eraseTrajectory();}
if(this.trajectoryNeedsUpdate===true){this.updateTrajectory(this.trajStartX,this.trajStartY,this.trajVectorComps);}
if(this.beingShotFromCannon===true&&this.relY>-210){this.beingShotFromCannon=false;}
this.BB.update(this.pos.x,this.pos.y);},_ballInTheWater:function(){var current;this.inWater=false;this.world.screen.updateScore(++ig.Session.currentPlayer.strokes,ig.Session.currentLevelData.par||3);this.world.b2World.DestroyBody(this.b2Body);this.b2Body=null;current=this.pos;cjs.Tween.get(this.pos).to({y:current.y+20},150,cjs.Ease.quadInOut).wait(200).call(this._returnBallToLastPos,null,this);cjs.Tween.get(this._displayobject).to({alpha:0},150,cjs.Ease.quadInOut);cjs.Tween.get(this.splashSprite).set({visible:true,x:this.pos.x,y:this.pos.y,scaleX:0.5,scaleY:0.5}).call(cjs.Sound.play,[this.world.audio.ball.splash],cjs.Sound).call(this.splashSprite.gotoAndPlay,[ig.Session.currentLevelData.name==="swamp"?"SplashMud":"Splash"]);},_returnBallToLastPos:function(){var disappoint=this.world.audio.disappoint[ig.Session.currentPlayer.character],rand=Math.range(0,disappoint.length-1);ig.audio.playVO(disappoint[rand]);ig.subtitles.playSubtitles(ig.game_config.CHARACTER_NAMES[ig.Session.currentPlayer.character].toUpperCase()+"_MISS"+(rand+1));this.b2Body=null;var pos=this.savedState.pos;this._displayobject.alpha=0;this.pos.x=pos.x;this.pos.y=pos.y;cjs.Tween.get(this._displayobject).to({alpha:1},400,cjs.Ease.quadInOut).call(this.pushToUpdateQueue,[this.savedState],this);},draw:function(){},kill:function(){this.parent();this.launchSound&&this.launchSound.stop();this.launchSound=null;},resetPutt:function(){this.launchVectorComps=[0,0];this.easyLaunch=true;this.launchStarted=false;if(this._cursorMoveCallback){ig.game.stage.off("stagemousemove",this._cursorMoveCallback);this._cursorMoveCallback=null;}},onPressDown:function(e){if(!e.primary||(!ig.ua.mobile&&e.nativeEvent.button!==0)){return;}
if(!this.launched&&this.inPlay===true&&this.world.paused===false&&this.inHole===false&&this.world._playerFourOverPar===false){this.world.screen.ui.hideBallLocationRings();this._cursorMoveCallback=ig.game.stage.on("stagemousemove",this.cursorPuttMove,this);this.launchDirectionStart[0]=e.stageX;this.launchDirectionStart[1]=e.stageY;this._launchTimer.reset();this.launchStarted=true;}},onPressUp:function(e){if(e&&!e.primary){return;}
this.trajectoryNeedsErase=true;if(!this.launched&&this.inPlay===true&&this.world.paused===false&&this.inHole===false&&this.launchStarted===true&&this.world._playerFourOverPar===false){this.saveState();var pos=this.b2Body.GetPosition();var lvc=this.launchVectorComps;var lv;var direction=1;if(this.easyLaunch===true){lvc[0]=e!==undefined?pos.x*b2Scale-e.stageX:pos.x*b2Scale-ig.game.stage.mouseX;lvc[1]=e!==undefined?pos.y*b2Scale-e.stageY:pos.y*b2Scale-ig.game.stage.mouseY;direction=-1;}
this.pctOfMaxLaunchTrajectory=Math.clamp(curious.Vector2.mag(lvc[0],lvc[1])/this.maxTrajectoryDrawMag,0,1);lvc=curious.Vector2.unitVector(lvc[0],lvc[1]);lv=curious.Vector2.scale(lvc,direction*this.pctOfMaxLaunchTrajectory*this.maxLaunchForceMag);this.b2Body.ApplyImpulse(new b2Vec2(lv[0],lv[1]),new b2Vec2(pos.x,pos.y));this.launched=true;this.resetPutt();this.world.startStroke();cjs.Sound.play(this.world.audio.ball.putt);this.launchSound=cjs.Sound.play(this.world.audio.ball.rolling,{loop:-1});}},cursorPuttMove:function(e){if(!e.primary||(!ig.ua.mobile&&e.nativeEvent.button!==0)){return;}
this.trajectoryNeedsErase=true;var v2=curious.Vector2;var pos=this.b2Body.GetWorldCenter();var td=this.trajectoryDots;var tdl=td.length;var lvc;var lvcScale;var xdist=this.launchDirectionStart[0]-e.stageX;var ydist=this.launchDirectionStart[1]-e.stageY;var trajectoryLength=v2.mag(xdist,ydist);lvc=v2.unitVector(xdist,ydist);lvcScale=Math.clamp(this.trajectoryLengthMultiplier*trajectoryLength,0,this.maxTrajectoryDrawMag);lvc=this.launchVectorComps=v2.scale(lvc,lvcScale);if(v2.mag(lvc)>this.minTrajectoryDrawMag){this.easyLaunch=false;this.setTrajectory(pos.x*b2Scale,pos.y*b2Scale,lvc);this._launchTimer.pause();}},setTrajectory:function(startX,startY,lvcComponents){this.trajStartX=startX;this.trajStartY=startY;this.trajVectorComps=lvcComponents;this.trajectoryNeedsUpdate=true;},updateTrajectory:function(startX,startY,lvcComponents){var vector=new curious.Vector2(lvcComponents[0],lvcComponents[1]);var points=vector.allPointsOn(true,30);var td=this.trajectoryDots;var l=points.length;var alpha=0.65;var bubble;for(var i=0;i<l;i++){if(td[i]){bubble=td[i];}else{bubble=new cjs.Sprite(ig.SHEETS.MAIN,"trajectory_dot");td.push(ig.LAYERS.GAME_UI.addChild(bubble));}
bubble.set({x:points[i][0]+startX,y:points[i][1]+startY,visible:true});ig.setRegs(bubble,"center");if(i>=l-3){bubble.alpha=alpha;alpha-=0.20;}}
this.trajectoryNeedsUpdate=false;},eraseTrajectory:function(){var td=this.trajectoryDots;var l=td.length;for(var i=0;i<l;i++){td[i].visible=false;td[i].alpha=1;}
this.trajectoryNeedsErase=false;},saveState:function(){var vel=this.b2Body.GetLinearVelocity();var pos=this.b2Body.GetPosition();this.savedState.b2vel=new b2Vec2(vel.x,vel.y);this.savedState.b2pos=new b2Vec2(pos.x,pos.y);this.savedState.pos={x:pos.x*b2Scale,y:pos.y*b2Scale};},pushToUpdateQueue:function(state){this.updateQueue.push(state);},resetB2BodyFromState:function(state){var b2UserData={type:"player_ball",playerId:this.playerId};if(this.b2Body!==null){this.world.b2World.DestroyBody(this.b2Body);this.b2Body=null;}
this.b2Body=this.world.b2CreateCircle(state.pos.x,state.pos.y,this.radius,2,true);this.b2Body.SetLinearDamping(0.6);this.b2Body.SetAngularDamping(0.5);this.b2Body.SetBullet(true);this.b2Body.SetUserData(b2UserData);var f=this.b2Body.GetFixtureList();f.SetRestitution(0.9);if(state.b2vel){this.b2Body.SetLinearVelocity(new b2Vec2(state.b2vel.x,state.b2vel.y));}},reset:function(){this.inHole=false;}});});

// game/entities/multi-displayobject-entity.js
ig.baked=true;ig.module('game.entities.multi-displayobject-entity').requires('impact.entity').defines(function(){ig.MDOEntity=ig.Entity.extend({debug:true,numDisplayObjects:0,displayObjects:[],components:[],activeTweens:[],init:function(x,y,world,settings){this.parent(x,y,world,settings);if(this.spritename){this._displayobject=new cjs.Sprite(ig.SHEETS.GAME,this.spritename);ig.setRegs(this._displayobject,this.regs[0],this.regs[1],this.regs[2]||false);this._displayobject.set({z:this.z});}else{this._initDisplayObjects();}},update:function(){this.parent();this._refreshComponents();},draw:function(){this.parent();},destroyActiveTweens:function(){var l=this.components.length
for(var i=0;i<l;i++){if(cjs.Tween.hasActiveTweens(this.components[i])){cjs.Tween.removeTweens(this.components[i]);}}
for(i=0,l=this.activeTweens.length;i<l;i++){this.activeTweens[i].setPaused(true);this.activeTweens[i]=null;}
this.activeTweens=[];},kill:function(){this.destroyActiveTweens();},_injectComponents:function(components,container){var c=components;var l=c.length;var i=l;var b,x,y,pctX,pctY;do{b=c[l-i];x=b.relativeX||0,y=b.relativeY||0;b.set({x:this.pos.x+x,y:this.pos.y+y});if(b.name!==null&&this[b.name]===undefined){this[b.name]=b;}
if(typeof b.regPoint==="string"){ig.setRegs(b,b.regPoint);}else if(b.regPoint instanceof Array){ig.setRegs(b,b.regPoint[0]||0,b.regPoint[1]||0,b.regPoint[2]||false);}else if(typeof b.regPoint==="object"){ig.setRegs(b,b.regPoint.x||0,b.regPoint.y||0);}
this.components.push(b);container.addChild(b);}while(0<--i);},_refreshComponents:function(){var c=this.components,y,x,pctX,pctY,b;var l=c.length;if(l>0){var i=l-1;do{b=c[i];x=b.relativeX||0,y=b.relativeY||0;b.set({x:this.pos.x+x,y:this.pos.y+y});}while(i--);}},_initDisplayObjects:function(){}});});

// game/entities/course-barrier.js
ig.baked=true;ig.module('game.entities.course-barrier').requires('impact.entity','game.entities.multi-displayobject-entity').defines(function(){ig.BarrierEntity=ig.MDOEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);if(this.vertices){this.b2Body=this.world.b2CreateCustom(x,y,this.vertices,0);this.b2Body.SetAngle(Math.toRad(180));}else if(this.fixtures){this.b2Body=this.world.b2CreateMultiFixtureCustom(x,y,this.fixtures,0,false);this.b2Body.SetAngle(Math.toRad(180));}
if(this.b2Body){var udata=this.b2UserData||{type:"barrier"};this.b2Body.SetUserData(udata);}
if(GameStartup.debug){curious.debug.addAsEditable(this);}},update:function(){this.parent();},draw:function(){this.parent();},kill:function(){this.parent();}});});

// game/entities/hole.js
ig.baked=true;ig.module('game.entities.hole').requires('impact.entity','game.entities.multi-displayobject-entity','utilities.polar-shape').defines(function(){ig.HoleEntity=ig.MDOEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);var b2UserData={type:"hole"};var sensorRadius=30;var hl=this.location;this.b2Body=this.world.b2CreateCircle(x,y,sensorRadius,0,false);this.b2Body.SetUserData(b2UserData);f=this.b2Body.GetFixtureList();f.SetSensor(true);this.oval=curious.PolarShape.createOval(this.pos.x,this.pos.y,42,26);if(GameStartup.debug){this.oval.setDebug(true,ig.LAYERS.DEBUG);curious.debug.addAsEditable(this);}},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"hole")).set({regPoint:"center",z:-1}),(new cjs.Sprite(ig.SHEETS.GAME,"hole_mask")).set({z:1,name:"mask",regPoint:this.maskRegs}),(new cjs.Sprite(ig.SHEETS.ALL_COURSES,"HoleBurst")).set({name:"sparkles",z:6,regX:70,regY:127,relativeY:-70,relativeX:-15,visible:false,tickEnabled:false}),(new cjs.Sprite(ig.SHEETS.ALL_COURSES,"Flag")).set({z:5,name:"flag",relativeX:-5,relativeY:12,regX:53,regY:223})];this._injectComponents(c,this.world.worldContainer);if(ig.Session.currentLevelData.name==="croc"){this.flag.visible=false;}else{this.flag.gotoAndPlay("flagwave");}},putBallInHole:function(ball,duration){var vmag=ball.b2Body.GetLinearVelocity().Length();var tweenVScaler=1000;var tweenDuration=tweenVScaler/vmag>150?150:tweenVScaler/vmag;this.world.b2World.DestroyBody(ball.b2Body);ball.b2Body=null;ball.inHole=true;ball.launched=false;ball.launchSound&&ball.launchSound.stop();cjs.Tween.get(ball.pos).to({x:this.pos.x,y:this.pos.y},duration||tweenDuration,cjs.Ease.quadInOut).to({y:this.pos.y+30},tweenDuration);this.sparkles.gotoAndStop("HoleBurst");this.sparkles.on("animationend",function(e){e.remove();e.target.gotoAndStop("HoleBurst");e.target.visible=false;e.target.tickEnabled=false;});cjs.Tween.get(this.sparkles).wait((duration||tweenDuration)+tweenDuration).call(cjs.Sound.play,[this.world.audio.ball.in_hole],cjs.Sound).set({visible:true,tickEnabled:true}).call(this.sparkles.gotoAndPlay,["HoleBurst"],this.sparkles).call(cjs.Sound.play,[this.world.audio.ball.sparkle],cjs.Sound);cjs.Tween.get(ball._displayobject).set({z:0}).wait(duration||tweenDuration).call(this.world.worldContainer.sortChildren,[ig.sortByZ],this.world.worldContainer);cjs.Tween.get(this.mask).wait(duration||tweenDuration).set({visible:true});cjs.Tween.get(this).wait((duration||tweenDuration)+500).call(this.world.endStroke,null,this.world);},update:function(){this.parent();if(ig.resizedW&&GameStartup.debug){this.oval.setDebug(false,ig.LAYERS.DEBUG);this.oval.update(this.pos.x,this.pos.y);this.oval.setDebug(true,ig.LAYERS.DEBUG);}},draw:function(){this.parent();},kill:function(){}});});

// game/entities/volcano.js
ig.baked=true;ig.module('game.entities.volcano').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.VolcanoEntity=ig.BarrierEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"holetop")).set({name:"hole_top",regPoint:"center",relativeY:-65,relativeX:-23,z:1}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"Smolder")).set({relativeX:-20,relativeY:-78,z:2,regX:61,regY:171}),(new cjs.Sprite(ig.SHEETS.GAME,"holepath")).set({regPoint:"center",relativeY:120,relativeX:40,z:3}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"Erupt")).set({name:"eruption",relativeX:-25,relativeY:-75,z:0,visible:false,regX:123,regY:238})];this._injectComponents(c,this.world.worldContainer);},erupt:function(){this.eruption.visible=true;this.eruption.alpha=1;this.eruption.gotoAndPlay("Erupt");cjs.Sound.play(this.world.levelAudio.erupt);this._eruptCallback=this.eruption.on("animationend",function(){this.eruption.off("animationend",this._eruptCallback);cjs.Tween.get(this.eruption).to({alpha:0},250,cjs.Ease.quadInOut).set({visible:false});},this);},update:function(){this.parent();},draw:function(){this.parent();},kill:function(){},});});

// game/entities/tiki-dude1.js
ig.baked=true;ig.module('game.entities.tiki-dude1').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.TikiDude1Entity=ig.BarrierEntity.extend({debug:false,goingRight:false,speed:1.5,pathLength:140,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.b2Body.SetType(1);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"dude1shadow")).set({regPoint:{x:0.5,y:0.5},z:-1,relativeX:10,relativeY:10}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude1")).set({name:"hole_top",regPoint:{x:0.5,y:1},z:3,relativeX:-1}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude1_bot")).set({regPoint:{x:0.5,y:0},z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(this.goingRight===false&&this.relX<=this.startRelX-this.pathLength){this.goingRight=true;this.speed*=-1;}else if(this.goingRight===true&&this.relX>=this.startRelX){this.goingRight=false;this.speed*=-1;}
this.relX-=this.speed;this.pos.x=this.relX+this.world.origin.x;this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));},draw:function(){this.parent();}});});

// game/entities/tiki-dude2.js
ig.baked=true;ig.module('game.entities.tiki-dude2').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.TikiDude2Entity=ig.BarrierEntity.extend({debug:false,goingRight:true,speed:1.5,pathLength:140,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.b2Body.SetType(1);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"dude2shadow")).set({regPoint:{x:0.5,y:0.5},z:-1,relativeX:10,relativeY:10}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude2")).set({name:"hole_top",regPoint:{x:0.5,y:1},z:3,relativeX:-1,relativeY:12}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude2_bot")).set({regPoint:{x:0.5,y:0},z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(this.goingRight===true&&this.relX>=this.startRelX+this.pathLength){this.goingRight=false;this.speed*=-1;}else if(this.goingRight===false&&this.relX<=this.startRelX){this.goingRight=true;this.speed*=-1;}
this.relX+=this.speed;this.pos.x=this.relX+this.world.origin.x;this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));},draw:function(){this.parent();},kill:function(){},});});

// game/entities/tiki-dude3.js
ig.baked=true;ig.module('game.entities.tiki-dude3').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.TikiDude3Entity=ig.BarrierEntity.extend({debug:false,goingRight:false,speed:1.5,pathLength:140,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.b2Body.SetType(1);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"dude3shadow")).set({regPoint:{x:0.5,y:0.5},z:-1,relativeX:10,relativeY:10}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude3")).set({name:"hole_top",regPoint:{x:0.5,y:1},z:3,relativeX:-1}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude3_bot")).set({regPoint:{x:0.5,y:0},z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(this.goingRight===false&&this.relX<=this.startRelX-this.pathLength){this.goingRight=true;this.speed*=-1;}else if(this.goingRight===true&&this.relX>=this.startRelX){this.goingRight=false;this.speed*=-1;}
this.relX-=this.speed;this.pos.x=this.relX+this.world.origin.x;this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));},draw:function(){this.parent();},kill:function(){},});});

// game/entities/tiki-dude4.js
ig.baked=true;ig.module('game.entities.tiki-dude4').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.TikiDude4Entity=ig.BarrierEntity.extend({debug:false,goingRight:false,speed:1.5,pathLength:85,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.b2Body.SetType(1);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"dude1shadow")).set({regPoint:{x:0.5,y:0.5},z:-1,relativeX:10,relativeY:10,scaleX:0.7,scaleY:0.7}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude4")).set({name:"hole_top",regPoint:{x:0.5,y:1},z:3,relativeX:-1}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude4_bot")).set({regPoint:{x:0.5,y:0},z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(this.goingRight===false&&this.relX<=this.startRelX-this.pathLength){this.goingRight=true;this.speed*=-1;}else if(this.goingRight===true&&this.relX>=this.startRelX){this.goingRight=false;this.speed*=-1;}
this.relX-=this.speed;this.pos.x=this.relX+this.world.origin.x;this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));},draw:function(){this.parent();}});});

// game/entities/tiki-dude5.js
ig.baked=true;ig.module('game.entities.tiki-dude5').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.TikiDude5Entity=ig.BarrierEntity.extend({debug:false,goingDown:false,speed:1.2,pathLength:80,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.b2Body.SetType(1);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"dude3shadow")).set({regPoint:{x:0.5,y:0.5},z:-1,relativeX:10,relativeY:10,scaleX:0.7,scaleY:0.7}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude5")).set({name:"hole_top",regPoint:{x:0.5,y:1},z:3,relativeX:-1}),(new cjs.Sprite(ig.SHEETS.GAME,"tikidude5_bot")).set({regPoint:{x:0.5,y:0},z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(this.goingDown===false&&this.relY<=this.startRelY-this.pathLength){this.goingDown=true;this.speed*=-1;}else if(this.goingDown===true&&this.relY>=this.startRelY){this.goingDown=false;this.speed*=-1;}
this.relY-=this.speed;this.pos.y=this.relY+this.world.origin.y;this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));},draw:function(){this.parent();}});});

// game/entities/bridge.js
ig.baked=true;ig.module('game.entities.bridge').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.BridgeEntity=ig.BarrierEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"bridge_mid")).set({regPoint:"center",relativeY:31,relativeX:55,z:0}),(new cjs.Sprite(ig.SHEETS.GAME,"bridge_top_cattail")).set({regPoint:[0.5,1],relativeY:-83,relativeX:70,z:3}),];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();},draw:function(){this.parent();},kill:function(){},});});

// game/entities/cannon.js
ig.baked=true;ig.module('game.entities.cannon').requires('game.entities.course-barrier').defines(function(){ig.CannonEntity=ig.BarrierEntity.extend({debug:false,numDisplayObjects:0,displayObjects:[],components:[],init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.endRelX=282;this.moveSound=cjs.Sound.play(this.world.levelAudio.move,{loop:-1});this.moveCannon();},moveCannon:function(){cjs.Tween.get(this,{loop:true}).to({relX:this.endRelX},1500).to({relX:this.startRelX},1500);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"cannon_top")).set({name:"hole_top",regPoint:[108,100,true],z:3}),(new cjs.Sprite(ig.SHEETS.GAME,"cannon_bot")).set({regPoint:[108,100,true],z:1}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"CannonBlast")).set({name:"smoky_poof",z:4,regX:133,regY:89,visible:false,relativeY:70})];this._injectComponents(c,this.world.worldContainer);this._cannonBlastSpriteEndCallback=this.smoky_poof.on("animationend",function(){this.smoky_poof.visible=false;},this);},update:function(){this.parent();this.pos.x=this.relX+this.world.origin.x;this.pos.y=this.relY+this.world.origin.y;if(this.portalOutlet){this.portalOutlet.pos.x=this.pos.x;}else if(this.world.cannon_portal_outlet){this.portalOutlet=this.world.cannon_portal_outlet;}},makeThePoof:function(){this.smoky_poof.visible=true;this.smoky_poof.gotoAndPlay("CannonBlast");},kill:function(){this.moveSound.stop();this.moveSound=null;this.smoky_poof.off("animationend",this._cannonBlastSpriteEndCallback);}});});

// game/entities/coconut.js
ig.baked=true;ig.module('game.entities.coconut').requires('game.entities.multi-displayobject-entity').defines(function(){ig.CoconutEntity=ig.MDOEntity.extend({debug:true,omega:3,rotation:0,goingRight:true,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.startRelX=this.relX;this.startRelY=this.relY;this.radius=this._displayobject.getBounds().height/2;this.b2Body=this.world.b2CreateCircle(x,y,this.radius,1,false);this.b2Body.SetUserData({type:"coconut"});this.oval=new curious.PolarShape.createOval(0,0,90,69);this.minimumRadius=34;},update:function(){this.parent();if(this.goingRight===true&&this.relX>=this.startRelX+this.pathLength){this.goingRight=false;this.omega*=-1;}else if(this.goingRight===false&&this.relX<=this.startRelX){this.goingRight=true;this.omega*=-1;}
this.rotation+=this.omega;var r=this.oval.radius(this.rotation);this.relX+=Math.toRad(this.omega)*r;this.pos.x=this.relX+this.world.origin.x;if(isNaN(this.pos.x/b2Scale)||isNaN(this.pos.y/b2Scale)){var error={omega:""+this.omega,b2Scale:""+b2Scale,rotation:"coconut.rotation = "+this.rotation,r:""+r,posX:"coconut.pos.x = "+this.pos.x,relX:"coconut.relX = "+this.relX,posY:"coconut.pos.y = "+this.pos.y,relY:"coconut.relY = "+this.relY,worldOriginX:""+this.world.origin.x,worldOriginY:""+this.world.origin.y};localStorage.setItem("coconut-update-error",JSON.stringify(error));}else{this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));}
this._displayobject.rotation=this.rotation;this.pos.y=this.world.origin.y+this.relY+r;}});});

// game/entities/crocodile.js
ig.baked=true;ig.module('game.entities.crocodile').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.CrocodileEntity=ig.BarrierEntity.extend({debug:false,snoutColliderRelX:-150,snoutColliderRelY:140,snoutTravelTime:2000,topSnoutAngle:4,bottomSnoutAngle:28,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.snoutCollider=this.world.b2CreateCircle(this.pos.x+this.snoutColliderRelX,this.pos.y+this.snoutColliderRelY,60,0,false);var f=this.snoutCollider.GetFixtureList();f.SetSensor(true);this.moveSnout();},_initDisplayObjects:function(){var snoutX=-345;var snoutY=38;var c=[(new cjs.Sprite(ig.SHEETS.GAME,"croc_bod")).set({regPoint:"center",relativeY:99,relativeX:-394,z:1}),(new cjs.Sprite(ig.SHEETS.GAME,"croc_teeth")).set({regPoint:"center",relativeY:152,relativeX:-256,z:3}),(new cjs.Sprite(ig.SHEETS.GAME,"rocks_foliage1")).set({regPoint:"center",relativeY:-64,relativeX:-61,z:3}),(new cjs.Sprite(ig.SHEETS.GAME,"croc_snout")).set({name:"snout",relativeY:snoutY,relativeX:snoutX,z:4,rotation:this.topSnoutAngle}),(new cjs.Sprite(ig.SHEETS.GAME,"croc_face")).set({regPoint:"center",relativeY:90,relativeX:-331,z:5})];this._injectComponents(c,this.world.worldContainer);ig.setRegs(this.snout,-0.05,0.55);},moveSnout:function(){var liftTime=1000;var chompTime=300;var postChompWaitTime=300;var totalChompTime=liftTime+chompTime+postChompWaitTime;this.activeTweens.push(cjs.Tween.get(this.snout,{loop:true}).to({rotation:this.bottomSnoutAngle},chompTime,cjs.Ease.quadInOut).wait(postChompWaitTime).call(cjs.Sound.play,[this.world.levelAudio.chomp,{volume:0.35}],cjs.Sound).to({rotation:this.topSnoutAngle},liftTime,cjs.Ease.quadInOut));var onTime=chompTime;var toOffWaitTime=300;var postOffWaitTime=totalChompTime-(onTime+toOffWaitTime);this.activeTweens.push(cjs.Tween.get(this,{loop:true}).wait(onTime).call(this.toggleSensor,["on"]).wait(toOffWaitTime).call(this.toggleSensor,["off"]).wait(postOffWaitTime));},toggleSensor:function(state){var f=this.snoutCollider.GetFixtureList();if(state==="on"){f.SetSensor(false);}else{f.SetSensor(true);}},update:function(){this.parent();},draw:function(){this.parent();},kill:function(){this.parent();},});});

// game/entities/lighthouse.js
ig.baked=true;ig.module('game.entities.lighthouse').requires('impact.entity','game.entities.course-barrier','utilities.vector-utils').defines(function(){ig.LighthouseEntity=ig.BarrierEntity.extend({debug:false,actualDoorWidth:89,actualRadius:183,ovalWRadius:183,ovalHRadius:117,numberDoors:8,doorEdgeOffsetAngle:null,doorEdgePositionAngles:[],doorEdgePositions:[],doorEdgeMarkers:[],lighthouseAngle:152,rotationIncrements:10,lhFrame:0,lhEndFrame:9,column1Locations:[[-116,26],[-102,35],[-92,40],[-79,45],[-64,51],[-54,57],[-40,51],[-26,56],[-16,63],[-4,65]],column2Locations:[[14,64],[28,60],[44,59],[58,59],[71,56],[84,50],[98,45],[109,40],[121,30],[132,21]],init:function(x,y,world,settings){this.parent(x,y,world,settings);this.doorEdgeOffsetAngle=Math.toDeg(Math.asin((this.actualDoorWidth/2)/this.actualRadius));if(ig.ua.iPad2||ig.ua.iPhone4){this.column1Locations=[this.column1Locations[0],this.column1Locations[4],this.column1Locations[7],];this.column2Locations=[this.column2Locations[0],this.column2Locations[4],this.column2Locations[7],];}
this.column1=this.world.b2CreateBox(this.column1Locations[0][0]+this.pos.x,this.column1Locations[0][1]+this.pos.y,58,145,1);this.column2=this.world.b2CreateBox(this.column2Locations[0][0]+this.pos.x,this.column2Locations[0][1]+this.pos.y,58,145,1);this.column1.SetUserData({type:"lh_column"});this.column2.SetUserData({type:"lh_column"});this.ballSensorOval=curious.PolarShape.createOval(this.pos.x,this.pos.y+20,366,234);},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"spin")).set({name:"theLighthouse",regX:200,regY:102,z:3,relativeY:5,relativeX:-2})];this._injectComponents(c,this.world.worldContainer);this._onLighthouseFrameChange=this.theLighthouse.on("change",this._changeColumnPositions,this);},_changeColumnPositions:function(){var c1=this.column1Locations,c2=this.column2Locations,c3=this.column3Locations,f=this.theLighthouse.currentFrame;this.column1.SetPosition(new b2Vec2((c1[f][0]+this.pos.x)/b2Scale,(c1[f][1]+this.pos.y)/b2Scale));this.column2.SetPosition(new b2Vec2((c2[f][0]+this.pos.x)/b2Scale,(c2[f][1]+this.pos.y)/b2Scale));},update:function(){this.parent();this._checkBalls();},draw:function(){this.parent();},_checkBalls:function(){var bs=this.world.playerBalls,l=bs.length;for(var i=0,b;i<l;i++){b=bs[i];b.enteredLighthouse=this.ballSensorOval.pointIn(b.pos.x,b.pos.y);if(b.enteredLighthouse===true){}}},kill:function(){this.theLighthouse.off("change",this._onLighthouseFrameChange);}});});

// game/entities/wheel.js
ig.baked=true;ig.module('game.entities.wheel').requires('impact.entity','game.entities.course-barrier').defines(function(){ig.ShipwheelEntity=ig.BarrierEntity.extend({debug:false,relativeWheelPegPoints:[193-190,184-190,175-190,168-190,161-190,153-190,145-190,136-190,1000,243-190,234-190,228-190,219-190,212-190,204-190,197-190],pegsRelY:90,pegRadius:15,currentContactPoint:-10000,currentAnimFrame:0,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.numContactPoints=this.relativeWheelPegPoints.length;if(ig.ua.iPad2||ig.ua.iPhone4){this.relativeWheelPegPoints=[this.relativeWheelPegPoints[0],this.relativeWheelPegPoints[5],this.relativeWheelPegPoints[10]];}
this.b2peg=this.world.b2CreateCircle((this.relativeWheelPegPoints[0]+this.pos.x),this.pegsRelY+this.pos.y,this.pegRadius,1,false);this.b2peg.SetUserData({type:"shipwheel"});},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"wheel_spin")).set({name:"shipwheel",regX:190,regY:104,z:4}),(new cjs.Sprite(ig.SHEETS.GAME,"wheelbase")).set({z:3,regPoint:[155,25,true]})];this._injectComponents(c,this.world.worldContainer);this._onLighthouseFrameChange=this.shipwheel.on("change",this._changePegPositions,this);},_changePegPositions:function(){var wpp=this.relativeWheelPegPoints,f=this.shipwheel.currentFrame;this.b2peg.SetPosition(new b2Vec2((wpp[f]+this.pos.x)/b2Scale,(this.pegsRelY+this.pos.y)/b2Scale));},update:function(){this.parent();},draw:function(){this.parent();},kill:function(){this.shipwheel.removeAllEventListeners();},});});

// game/entities/crab.js
ig.baked=true;ig.module('game.entities.crab').requires('game.entities.course-barrier').defines(function(){ig.CrabEntity=ig.BarrierEntity.extend({debug:false,numDisplayObjects:0,displayObjects:[],components:[],init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"crab"});},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"crab_idle")).set({name:"crab_sprite",regX:85,regY:83,z:3})];this._injectComponents(c,this.world.worldContainer);},swipeDaBall:function(ball){cjs.Sound.play(this.world.levelAudio.chop);this.crab_sprite.gotoAndPlay("crab_swipe");var b2=ball.b2Body,p=b2.GetPosition();b2.ApplyImpulse(new b2Vec2(Math.range(-1,-3),Math.range(-2,5)/2),p);},update:function(){this.parent();},kill:function(){}});});

// game/entities/bog-bubbles.js
ig.baked=true;ig.module('game.entities.bog-bubbles').requires('game.entities.multi-displayobject-entity').defines(function(){ig.BogBubblesEntity=ig.MDOEntity.extend({init:function(x,y,world,settings){this.parent(x,y,world,settings);if(!ig.ua.iPad2&&!ig.ua.iPhone4){this._startThatBubbling();}
if(GameStartup.debug){curious.debug.addAsEditable(this);}},_initDisplayObjects:function(){if(!ig.ua.iPad2&&!ig.ua.iPhone4){var c=[(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"BogBubble")).set({regX:47,regY:33,relativeX:237,relativeY:34,scaleX:0.9,scaleY:0.9,z:2}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"BogBubble")).set({regX:47,regY:33,relativeX:573,relativeY:208,z:2}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"BogBubble")).set({regX:47,regY:33,relativeX:-118,relativeY:-169,scaleX:0.7,scaleY:0.7,z:2}),(new cjs.Sprite(ig.SHEETS.SPEC_ANIMS,"BogBubble")).set({regX:47,regY:33,relativeX:-193,relativeY:-278,scaleX:0.55,scaleY:0.55,z:2})];ig.forEach(c,function(i,s){s.visible=false;});this._injectComponents(c,this.world.worldContainer);}},_startThatBubbling:function(){var waitSpacing=1000,waitMaxSpread=1000,wait=0;for(var i=0,c,l=this.components.length;i<l;i++){c=this.components[i];cjs.Tween.get(c).wait(wait+Math.random()*waitMaxSpread).set({visible:true}).call(c.gotoAndPlay,["BogBubble"],c);wait+=waitSpacing;}},kill:function(){this.parent();for(var i=0,l=this.components.length;i<l;i++){cjs.Tween.removeTweens(this.components[i]);this.components[i].removeAllEventListeners();}}});});

// game/entities/outlets/portal-outlet.js
ig.baked=true;ig.module('game.entities.outlets.portal-outlet').requires('impact.entity').defines(function(){ig.PortalOutletEntity=ig.Entity.extend({debug:false,exitThresholdVelocity:3,exitBoostMultiplier:2.5,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.direction=curious.Vector2.createUnitVec(this.direction);if(GameStartup.debug){curious.debug.addAsEditable(this);}},launchEntity:function(entity){var vel=entity.b2Body.GetLinearVelocity();var magnitude=vel.Length();entity.teleporting=true;if(magnitude<this.exitThresholdVelocity){magnitude*=this.exitBoostMultiplier;}
vel=new b2Vec2(this.direction.x,this.direction.y);vel.Multiply(magnitude);if(entity.updateQueue){entity.updateQueue.push({vel:vel,x:this.pos.x/b2Scale,y:this.pos.y/b2Scale});}else{throw(": entity doesn't have a updateQueue!");}},contains:function(){}});});

// game/entities/outlets/hole-portal-outlet.js
ig.baked=true;ig.module('game.entities.outlets.hole-portal-outlet').requires('impact.entity','game.entities.outlets.portal-outlet').defines(function(){ig.HolePortalOutletEntity=ig.PortalOutletEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);},launchEntity:function(entity){var dir=this.direction;var magnitude=entity.savedState.b2vel.Length();if(magnitude<this.exitThresholdVelocity){magnitude*=this.exitBoostMultiplier;}
if(entity._displayobject.visible===false){entity._displayobject.visible=true;}
dir=new b2Vec2(dir.x,dir.y);dir.Multiply(magnitude);var state={pos:this.pos,b2vel:dir};if(entity.updateQueue!==undefined&&entity.updateQueue instanceof Array){entity.pushToUpdateQueue(state);if(entity._displayobject.z!==this.world.zLayers.BALL){entity._displayobject.z=this.world.zLayers.BALL;this.world.worldContainer.sortChildren(ig.sortByZ);}}else{throw(": entity doesn't have a updateQueue!");}},contains:function(){}});});

// game/entities/outlets/cannon-portal-outlet.js
ig.baked=true;ig.module('game.entities.outlets.cannon-portal-outlet').requires('impact.entity','game.entities.outlets.hole-portal-outlet').defines(function(){ig.CannonPortalOutletEntity=ig.HolePortalOutletEntity.extend({debug:false,exitThresholdVelocity:15,init:function(x,y,world,settings){this.parent(x,y,world,settings);},launchEntity:function(entity){var dir=this.direction;var magnitude=16*(Math.range(80,100)/100);dir=new b2Vec2(dir.x,dir.y);dir.Multiply(magnitude);var state={pos:{x:this.pos.x,y:this.pos.y+100},b2vel:dir};cjs.Sound.play(this.world.levelAudio.shot);this.world.cannon.makeThePoof();if(entity.updateQueue!==undefined&&entity.updateQueue instanceof Array){entity.pushToUpdateQueue(state);entity.inWhirlpool=false;}else{throw(": entity doesn't have a updateQueue!");}
entity.beingShotFromCannon=true;},update:function(){this.parent();},contains:function(){}});});

// game/entities/sensors/b2d-sensor.js
ig.baked=true;ig.module('game.entities.sensors.b2d-sensor').requires('impact.entity').defines(function(){ig.B2DSensorEntity=ig.Entity.extend({debug:false,containsBall:false,_minimumSlopeVelocity:5,init:function(x,y,world,settings){this.parent(x,y,world,settings);if(this.vertices){if(this.b2Type&&this.b2Type==="rectangle"){this.b2Body=this.world.b2CreateBox(x,y,this.vertices[0],this.vertices[1],0);this.b2Body.SetAngle(Math.toRad(180));}else{this.b2Body=this.world.b2CreateCustom(x,y,this.vertices,0);this.b2Body.SetAngle(Math.toRad(180));}}else if(this.fixtures){this.b2Body=this.world.b2CreateMultiFixtureCustom(x,y,this.fixtures,0);this.b2Body.SetAngle(Math.toRad(180));}else{throw("vertices are not specified");}
var f=this.b2Body.GetFixtureList();if(f instanceof Array){for(var i=0,l=f.length;i<l;i++){f[i].SetSensor(true);}}else{f.SetSensor(true);}
this.isSensor=true;if(this.sensorData){this.b2Body.SetUserData(this.sensorData);}
if(GameStartup.debug){curious.debug.addAsEditable(this);}},applyForce:function(ball){if(!this.force){throw("force is unspecified for this sensor!");}
var bpos=ball.b2Body.GetPosition();var bvel=ball.b2Body.GetLinearVelocity();var scale=bvel.Length()>this._minimumSlopeVelocity?this._minimumSlopeVelocity:bvel.Length();var force=new b2Vec2(this.force[0],this.force[1]);force.Multiply(this._minimumSlopeVelocity/scale);ball.b2Body.ApplyForce(force,bpos);},update:function(){if(this.force&&this.containsBall){this.applyForce(this.world.currentPlayerBall);}},contains:function(){}});});

// game/entities/sensors/volcano-bottom-sensor.js
ig.baked=true;ig.module('game.entities.sensors.volcano-bottom-sensor').requires('impact.entity','game.entities.sensors.b2d-sensor').defines(function(){ig.VolcanoBottomSensorEntity=ig.B2DSensorEntity.extend({debug:false,firstSlopeX:-0.70710678,firstSlopeY:0.70710678,firstSlopeForce:0.4,secondSlopeX:-0.3387379,secondSlopeY:0.9408808,secondSlopeForce:0.9,secondSlopeStartRelX:-99,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"volcano_bottom_sensor"});},update:function(){var pb=this.world.playerBalls;for(var i=0,l=pb.length;i<l;i++){if(pb[i].inForceField===true&&pb[i].inHole===false&&pb[i].teleporting===false){var bpos=pb[i].b2Body.GetPosition();if(pb[i].relX<this.secondSlopeStartRelX){pb[i].b2Body.ApplyImpulse(new b2Vec2(this.firstSlopeX*this.firstSlopeForce,this.firstSlopeY*this.firstSlopeForce),bpos);}else if(pb[i].relX>this.secondSlopeStartRelX){pb[i].b2Body.ApplyImpulse(new b2Vec2(this.secondSlopeX*this.secondSlopeForce,this.secondSlopeY*this.secondSlopeForce),bpos);}}}}});});

// game/entities/sensors/b2d-portal.js
ig.baked=true;ig.module('game.entities.sensors.b2d-portal').requires('impact.entity','game.entities.outlets.portal-outlet','game.entities.sensors.b2d-sensor').defines(function(){ig.B2DPortalEntity=ig.B2DSensorEntity.extend({debug:false,outlets:[],init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"portal",portal_id:this.portal_id});for(var i=0,outlet,l=this.outlets.length;i<l;i++){outlet=this.outlets[i];this.outlets[i]=this.world.spawnEntity(outlet.entity,outlet.location[0],outlet.location[1],outlet.settings);}},teleportEntity:function(entity){var outlet;if(this.outlets.length>1){outlet=this.outlets.random();}else{outlet=this.outlets[0];}
outlet.launchEntity(entity);}});});

// game/entities/sensors/volcano-top-sensor.js
ig.baked=true;ig.module('game.entities.sensors.volcano-top-sensor').requires('impact.entity','game.entities.sensors.b2d-portal').defines(function(){ig.VolcanoTopSensorEntity=ig.B2DPortalEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);},teleportEntity:function(entity){if(entity.teleporting===true){return;}
this.world.theVolcano.erupt();entity.inForceField=false;var vmag=entity.b2Body.GetLinearVelocity().Length();var tweenVScaler=1000;var tweenDuration=tweenVScaler/vmag>150?150:tweenVScaler/vmag;entity.teleporting=true;entity.saveState();entity.pushToUpdateQueue({destroyMe:true});cjs.Tween.get(entity.pos).to({x:this.pos.x,y:this.pos.y},tweenDuration,cjs.Ease.quadInOut).to({y:this.pos.y+30},tweenDuration);cjs.Tween.get(entity._displayobject).wait(tweenDuration).set({visible:false});cjs.Tween.get(entity._displayobject).set({z:0}).wait(tweenDuration).call(this.world.worldContainer.sortChildren,[ig.sortByZ],this.world.worldContainer);cjs.Tween.get(this).wait(2*tweenDuration+500).call(this.parent,[entity],this);}});});

// game/entities/sensors/b2d-start-pad.js
ig.baked=true;ig.module('game.entities.sensors.b2d-start-pad').requires('impact.entity','game.entities.sensors.b2d-sensor').defines(function(){ig.B2DStartPadEntity=ig.B2DSensorEntity.extend({debug:false,containsBall:true,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"start_pad",jive:"turkey"});},contains:function(other){var f=this.b2Body.GetFixtureList();return f.TestPoint(new b2Vec2(other[0]/b2Scale,other[1]/b2Scale));}});});

// utilities/bounding-box.js
ig.baked=true;ig.module('utilities.bounding-box').requires('impact.impact').defines(function(){window.curious=window.curious||{};window.curious.BB=ig.Class.extend({init:function(x,y,width,height,regX,regY){this.regX=regX||0;this.regY=regY||0;this.width=width;this.height=height;this.update(x,y);},update:function(x,y){this.x=x;this.y=y;this.rightBound=this.x+(1-this.regX)*this.width;this.leftBound=this.x-this.regX*this.width;this.topBound=this.y-this.regY*this.height;this.bottomBound=this.y+(1-this.regY)*this.height;this.debug===true&&this.shape.set({x:x,y:y});},contains:function(other){if(other instanceof curious.BB){return(other.rightBound<=this.rightBound&&other.leftBound>=this.leftBound&&other.topBound>=this.topBound&&other.bottomBound<=this.bottomBound);}else if(other instanceof Array){return(other[0]>this.leftBound&&other[0]<this.rightBound&&other[1]>this.topBound&&other[1]<this.bottomBound);}},setDebug:function(debug,container){this.debug=debug;if(debug===true){this.shape=new cjs.Shape();this.shape.graphics.beginStroke("#ff0000").drawRect(-this.regX*this.width,-this.regY*this.height,this.width,this.height);this.shape.set({x:this.x,y:this.y});container.addChild(this.shape);}else{container.removeChild(this.shape);this.shape=null;}}});});

// game/entities/sensors/nonb2d-sensor.js
ig.baked=true;ig.module('game.entities.sensors.nonb2d-sensor').requires('impact.entity','utilities.bounding-box').defines(function(){ig.NonB2DSensorEntity=ig.Entity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.size.x=this.dimensions[0];this.size.y=this.dimensions[1];this.BB=new curious.BB(x,y,this.size.x,this.size.y,0.5,0.5);if(GameStartup.debug){curious.debug.addAsEditable(this);}},update:function(){this.parent();this.BB.update(this.pos.x,this.pos.y);},draw:function(){this.parent();},kill:function(){},contains:function(other){if(other instanceof Array){return this.BB.contains(other);}else{if(other.BB===undefined){throw("the other entity needs a bounding box!");return;}
return this.BB.contains(other.BB);}}});});

// game/entities/sensors/nonb2d-start-pad.js
ig.baked=true;ig.module('game.entities.sensors.nonb2d-start-pad').requires('impact.entity','game.entities.sensors.nonb2d-sensor').defines(function(){ig.NonB2DStartPadEntity=ig.NonB2DSensorEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);}});});

// game/entities/sensors/hole-portal.js
ig.baked=true;ig.module('game.entities.sensors.hole-portal').requires('impact.entity','game.entities.multi-displayobject-entity').defines(function(){ig.HolePortalEntity=ig.MDOEntity.extend({debug:false,outlets:[],init:function(x,y,world,settings){this.parent(x,y,world,settings);this.size.y=this.hole.getBounds().height;this.oval=curious.PolarShape.createOval(this.pos.x,this.pos.y,42,this.size.y);if(GameStartup.debug){this.oval.setDebug(true,ig.LAYERS.DEBUG);curious.debug.addAsEditable(this);}},_initDisplayObjects:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,this.hole_spritename||"hole")).set({name:"hole",regPoint:"center",z:-1}),(new cjs.Sprite(ig.SHEETS.GAME,this.hole_mask_spritename)).set({name:"mask",regPoint:[0.5,0],visible:false,z:1})];this._injectComponents(c,this.world.worldContainer);},update:function(){this.parent();if(ig.resizedW){this.oval.setDebug(false,ig.LAYERS.DEBUG);this.oval.update(this.pos.x,this.pos.y);if(GameStartup.debug){this.oval.setDebug(true,ig.LAYERS.DEBUG)}}
this._checkForPlayerBall();},_checkForPlayerBall:function(){var l=this.world.playerBalls.length;var minVel=this.world.minimumBallVelocityForHole;var ball,vec;for(var i=0;i<l;i++){ball=this.world.playerBalls[i];if(ball.inHole===false&&ball.teleporting===false){vec=new curious.Vector2((ball.groundContactPoint[0]-this.pos.x),(ball.groundContactPoint[1]-this.pos.y));if(vec.mag<this.oval.radius(vec.theta)){if(ball.b2Body.GetLinearVelocity().Length()<minVel||ig.Session.currentLevelData.name==="wheel"){this._putBallInHole(ball);}}}}},_putBallInHole:function(ball){if(ball.teleporting===true){return;}
var vmag=ball.b2Body.GetLinearVelocity().Length();var tweenVScaler=1000;var tweenDuration=tweenVScaler/vmag>150?150:tweenVScaler/vmag;ball.teleporting=true;ball.saveState();this.world.b2World.DestroyBody(ball.b2Body);ball.b2Body=null;cjs.Tween.get(ball.pos).to({x:this.pos.x,y:this.pos.y},tweenDuration,cjs.Ease.quadInOut).to({y:this.pos.y+30},tweenDuration);cjs.Tween.get(this.mask).wait(tweenDuration).set({visible:true});cjs.Sound.play(this.world.audio.ball.in_hole)
cjs.Tween.get(ball._displayobject).set({z:0}).wait(tweenDuration).call(this.world.worldContainer.sortChildren,[ig.sortByZ],this.world.worldContainer);cjs.Tween.get(this).wait(2*tweenDuration).call(this.teleportEntity,[ball],this);},teleportEntity:function(entity){var outlet;if(this.outlets.length>1){outlet=this.outlets.random();}else{outlet=this.outlets[0];}
if(outlet instanceof ig.HolePortalOutletEntity){outlet.launchEntity(entity);}else{throw("this portal needs to have a HolePortalOutletEntity instance attached as an output!");}},draw:function(){this.parent();},kill:function(){},contains:function(other){}});});

// game/entities/sensors/basin-hole-portal.js
ig.baked=true;ig.module('game.entities.sensors.basin-hole-portal').requires('game.entities.sensors.hole-portal').defines(function(){ig.BasinHolePortalEntity=ig.HolePortalEntity.extend({debug:false,outlets:[],_maxTimeBallCanOrbit:10,_eventHorizon:50,init:function(x,y,world,settings){this.parent(x,y,world,settings);if(!this.world.basinHoles){this.world.basinHoles=[];}
this.world.basinHoles[ig.BasinHolePortalEntity.instanceId]=this;if(this.vertices){this.b2Body=this.world.b2CreateCustom(x,y,this.vertices,0);this.b2Body.SetAngle(Math.toRad(180));var f=this.b2Body.GetFixtureList();f.SetSensor(true);this.isSensor=true;this.b2Body.SetUserData({type:"basin",id:ig.BasinHolePortalEntity.instanceId++});}else{throw("vertices are not specified");}
this._ballTimer=new ig.Timer();},update:function(){this.parent();if(ig.resizedW){this.oval.setDebug(false,ig.LAYERS.DEBUG);this.oval.update(this.pos.x,this.pos.y);if(GameStartup.debug){this.oval.setDebug(true,ig.LAYERS.DEBUG)}}
this._checkForPlayerBall();},startBallTimer:function(){this._ballTimer.reset();},_checkForPlayerBall:function(){var l=this.world.playerBalls.length;var minVel=this.world.minimumBallVelocityForHole;var ball,vec,dist;for(var i=0;i<l;i++){ball=this.world.playerBalls[i];if(ball.inHole===false&&ball.teleporting===false){vec=new curious.Vector2((ball.groundContactPoint[0]-this.pos.x),(ball.groundContactPoint[1]-this.pos.y));dist=Math.distance([ball.pos.x,ball.pos.y],[this.pos.x,this.pos.y]);if((vec.mag<this.oval.radius(vec.theta)&&ball.b2Body.GetLinearVelocity().Length()<minVel&&ball.inBasin===true)||(ball.inBasin===true&&this._ballTimer.delta()>this._maxTimeBallCanOrbit&&dist<this._eventHorizon)){this._putBallInHole(ball);}else if(ball.inBasin===true&&this.ballInRange===true){this._forceOnBall(ball);}}}},_forceOnBall:function(ball){var bvel=ball.b2Body.GetLinearVelocity();var normal=curious.Vector2.unitVector((this.pos.x-ball.pos.x),(this.pos.y-ball.pos.y));var dist=Math.distance([this.pos.x,this.pos.y],[ball.pos.x,ball.pos.y]);var bpos=ball.b2Body.GetPosition();var normalMagnitude=20;ball.b2Body.ApplyForce(new b2Vec2(normalMagnitude*normal[0],normalMagnitude*normal[1]),bpos);}});ig.BasinHolePortalEntity.instanceId=0;});

// game/entities/sensors/whirlpool-portal.js
ig.baked=true;ig.module('game.entities.sensors.whirlpool-portal').requires('impact.entity','game.entities.sensors.hole-portal').defines(function(){ig.WhirlpoolPortalEntity=ig.HolePortalEntity.extend({debug:false,outlets:[],_maxTimeBallCanOrbitWhirlpool:10,_eventHorizon:100,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.wpradius=125;this.b2Body=this.world.b2CreateCircle(x,y,this.wpradius,0,false);this.b2Body.SetUserData({type:"whirlpool"});var f=this.b2Body.GetFixtureList();f.SetSensor(true);this._ballTimer=new ig.Timer();this._initSwirl();},update:function(){this.parent();},_initSwirl:function(){var c=[(new cjs.Sprite(ig.SHEETS.GAME,"swirl")).set({name:"swirl",regPoint:"center",z:1,relativeY:-3})];this._injectComponents(c,this.world.worldContainer);cjs.Tween.get(this.swirl,{loop:true}).to({rotation:360},3000);},_checkForPlayerBall:function(){var l=this.world.playerBalls.length;var minVel=this.world.minimumBallVelocityForHole;var ball,vec,dist;for(var i=0;i<l;i++){ball=this.world.playerBalls[i];if(ball.inHole===false&&ball.teleporting===false){vec=new curious.Vector2((ball.groundContactPoint[0]-this.pos.x),(ball.groundContactPoint[1]-this.pos.y));dist=Math.distance([ball.pos.x,ball.pos.y],[this.pos.x,this.pos.y]);if((vec.mag<this.oval.radius(vec.theta)&&ball.b2Body.GetLinearVelocity().Length()<minVel&&ball.inWhirlpool===true)||(ball.inWhirlpool===true&&this._ballTimer.delta()>this._maxTimeBallCanOrbitWhirlpool&&dist<this._eventHorizon)){this._putBallInHole(ball);}else if(ball.inWhirlpool===true){this._forceOnBall(ball);}}}},startBallTimer:function(){this._ballTimer.reset();},_forceOnBall:function(ball){var bvel=ball.b2Body.GetLinearVelocity();var normal=curious.Vector2.unitVector((this.pos.x-ball.pos.x),(this.pos.y-ball.pos.y));var dist=Math.distance([this.pos.x,this.pos.y],[ball.pos.x,ball.pos.y]);var bpos=ball.b2Body.GetPosition();var normalMagnitude=30;ball.b2Body.ApplyForce(new b2Vec2(normalMagnitude*normal[0],normalMagnitude*normal[1]),bpos);}});});

// game/entities/sensors/nonb2d-water-sensor.js
ig.baked=true;ig.module('game.entities.sensors.nonb2d-water-sensor').requires('game.entities.sensors.nonb2d-sensor').defines(function(){ig.NonB2DWaterSensorEntity=ig.NonB2DSensorEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);},update:function(){this.parent();for(var i=0;i<this.world.playerBalls.length;i++){var b=this.world.playerBalls[i];if(this.contains(b)&&!b.inWater){b.inWater=true;}}},_ballInTheWater:function(ball){ball.inWater=true;this.world.screen.updateScore(++ig.Session.currentPlayer.strokes,ig.Session.currentLevelData.par||3);this.world.b2World.DestroyBody(ball.b2Body);ball.b2Body=null;var current=ball.pos;cjs.Tween.get(ball.pos).to({y:current.y+10},100,cjs.Ease.quadInOut).wait(200).call(this._returnBallToLastPos,[ball],this);},_returnBallToLastPos:function(ball){ball.b2Body=null;var pos=ball.savedState.pos;ball._displayobject.alpha=0;ball.pos.x=pos.x;ball.pos.y=pos.y;cjs.Tween.get(ball).wait(600).set({inWater:false});cjs.Tween.get(ball._displayobject).to({alpha:1},400,cjs.Ease.quadInOut).call(ball.pushToUpdateQueue,[ball.savedState],ball);}});});

// game/entities/sensors/b2d-water-sensor.js
ig.baked=true;ig.module('game.entities.sensors.b2d-water-sensor').requires('impact.entity','game.entities.sensors.b2d-sensor').defines(function(){ig.B2DWaterSensorEntity=ig.B2DSensorEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"water_sensor"});}});});

// game/entities/sensors/wheel-sensor.js
ig.baked=true;ig.module('game.entities.sensors.wheel-sensor').requires('impact.entity','game.entities.sensors.b2d-sensor').defines(function(){ig.WheelSensorEntity=ig.B2DSensorEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"wheel_sensor"});}});});

// game/entities/sensors/croc-mouth-sensor.js
ig.baked=true;ig.module('game.entities.sensors.croc-mouth-sensor').requires('impact.entity','game.entities.sensors.b2d-sensor').defines(function(){ig.CrocMouthSensorEntity=ig.B2DSensorEntity.extend({debug:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);this.b2Body.SetUserData({type:"croc-mouth"});}});});

// game/entities/sensors/ship-slope-sensor.js
ig.baked=true;ig.module('game.entities.sensors.ship-slope-sensor').requires('game.entities.sensors.b2d-sensor').defines(function(){ig.ShipSlopeSensorEntity=ig.B2DSensorEntity.extend({debug:false,containsBall:false,init:function(x,y,world,settings){this.parent(x,y,world,settings);if(!this.world.slopeSensors){this.world.slopeSensors=[];}
this.sensorData.id=ig.ShipSlopeSensorEntity.instanceId;this.b2Body.SetUserData(this.sensorData);this.world.slopeSensors[ig.ShipSlopeSensorEntity.instanceId++]=this;}});ig.ShipSlopeSensorEntity.instanceId=0;});

// game/ppp-level.js
ig.baked=true;ig.module('game.ppp-level').requires('game.entities.ball','game.entities.course-barrier','game.entities.hole','game.entities.volcano','game.entities.tiki-dude1','game.entities.tiki-dude2','game.entities.tiki-dude3','game.entities.tiki-dude4','game.entities.tiki-dude5','game.entities.bridge','game.entities.cannon','game.entities.coconut','game.entities.crocodile','game.entities.lighthouse','game.entities.wheel','game.entities.crab','game.entities.bog-bubbles','game.entities.outlets.hole-portal-outlet','game.entities.outlets.cannon-portal-outlet','game.entities.sensors.volcano-bottom-sensor','game.entities.sensors.volcano-top-sensor','game.entities.sensors.b2d-start-pad','game.entities.sensors.nonb2d-start-pad','game.entities.sensors.b2d-portal','game.entities.sensors.hole-portal','game.entities.sensors.basin-hole-portal','game.entities.sensors.whirlpool-portal','game.entities.sensors.nonb2d-water-sensor','game.entities.sensors.b2d-water-sensor','game.entities.sensors.wheel-sensor','game.entities.sensors.croc-mouth-sensor','game.entities.sensors.ship-slope-sensor','utilities.vector-utils','utilities.bounding-box','impact.timer').defines(function(){"use strict";ig.PPPLevel=ig.World.extend({worldContainer:null,sceneryLayers:[],paused:false,roundOver:false,strokes:0,par:0,num_players:1,playerTurn:0,players:[],ballNearHole:false,ballPlaced:false,zLayers:{BALL:2,BG:-2},ballPlacementConstraints:{NONE:0,X:1,Y:2},ballPlacementConstraintState:0,playerBalls:[],minimumBallVelocityForHole:16,sceneryComponents:[],portalObjects:[],_currentPlayerId:0,_idleHintAudioTime:20,_idleLocationHintTime:10,_playerFourOverPar:false,_gravWellRadius:70,_numBallsNotInHole:0,_fadingMusic:false,init:function(screen,originRegX,originRegY){ig.system.timeScale=1;this.parent(originRegX,originRegY);this.screen=screen;this.audio=ig.audio.tracks.gameplay_audio;this.levelAudio=this.audio[ig.Session.currentLevelData.name]||null;this.levelAudio&&this.levelAudio.background&&(this.backgroundSound=cjs.Sound.play(this.levelAudio.background,{loop:-1,volume:0.6}));this.worldContainer.mouseChildren=true;this._numBallsNotInHole=ig.Session.numberPlayers;this._initGameWorld();this.screen.updateScore(0,ig.Session.currentLevelData.par||3);if(ig.game.hasSeenTutorial===false&&ig.game.debugLoad===false){ig.subtitles.playSubtitles("FIRST_HOLE");if(gameProps.disableVO){cjs.Tween.get(this).wait(7000+this.audio.vo_sequences.firsthole.delays.total()).call(this.screen.showTutorial,[this._onInitialTutorialEnd.bind(this)],this.screen);}else{ig.audio.playVO(this.audio.vo_sequences.firsthole.idList,this.audio.vo_sequences.firsthole.delays,(function(){this.screen.showTutorial(this._onInitialTutorialEnd.bind(this));}).bind(this));}}else{this._startUpGameplay();}},_startUpGameplay:function(){ig.game.hasSeenTutorial=true;var num,waitForBgMusic;if(!Boolean((ig.Session.currentLevel+1)%2)){num="2";}else if(!Boolean((ig.Session.currentLevel+1)%3)){num="3";}else if(!Boolean((ig.Session.currentLevel+1)%4)){num="4";}else{num="1";}
ig.audio.stopAllMusic();if(ig.game.muted===false){ig.audio.playMusic(ig.audio.tracks.music["intro"+num],{volume:1});}
ig.audio.playVO(ig.Session.currentLevelData.instruction_audio,50);ig.subtitles.playSubtitles("HOLE_INSTRUCTIONS_"+ig.Session.currentLevelData.name.toUpperCase());if(ig.audio.sequence&&ig.audio.sequence._current){waitForBgMusic=ig.audio.sequence._current.duration;}else{waitForBgMusic=5000;}
cjs.Tween.get(this).wait(waitForBgMusic).call(this._startBgMusic);this._idleTimer=new ig.Timer();this._startNewTurn();},_startBgMusic:function(){var mus;if(!Boolean((ig.Session.currentLevel+1)%2)){mus="bgloop2";}else if(!Boolean((ig.Session.currentLevel+1)%3)){mus="bgloop3";}else{mus="bgloop1";}
this.bgMusic=ig.audio.playMusic(ig.audio.tracks.music[mus],{volume:0.4,loop:-1});if(ig.game.muted===true){ig.audio.muteAllMusic(ig.game.muted);}},_onInitialTutorialEnd:function(){this.screen.hideTutorial();cjs.Tween.get(this).wait(500).call(this._startUpGameplay);},update:function(){this.parent();if(this._idleTimer&&this._idleTimer.delta()>this._idleHintAudioTime&&this.roundOver===false&&ig.game.debugLoad===false){ig.audio.playVO(this.audio.idle[ig.Session.currentPlayer.character]);ig.subtitles.playSubtitles(ig.Session.currentPlayer.characterName.toUpperCase()+"_IDLE");this._idleTimer.reset();}
if(this.paused){return;}
this._checkBallAgainstHole();if(this.ballNearHole){if(Math.distance([this.currentPlayerBall.pos.x,this.currentPlayerBall.pos.y],[this.holeX,this.holeY])<this.hole_radius){}}
if(ig.resizedW){var l=this.sceneryComponents.length;var sc=this.sceneryComponents;for(var i=0;i<l;i++){sc[i].set({x:ig.system.width/2+sc[i].location[0]});}}},pause:function(pause,hide){this.paused=pause;if(this.paused===true){if(this.currentPlayerBall&&this.currentPlayerBall.launchSound){this.currentPlayerBall.launchSound.setVolume(0);}
ig.system.timeScale=0;}else if(this.paused===false){if(this.currentPlayerBall&&this.currentPlayerBall.launchSound){this.currentPlayerBall.launchSound.setVolume(1);}
ig.system.timeScale=1;}},killBGSound:function(){if(this.backgroundSound){this.backgroundSound.stop();this.backgroundSound=null;}
if(this.crocodile){this.crocodile.destroyActiveTweens();}},kill:function(){ig.system.timeScale=1;this.b2World.SetDestructionListener();this.b2World=null;ig.audio.stopAllMusic();this.killBGSound();this.parent();},startTurn:function(turn){this.resetGame();this.playerTurn=turn;},resetGame:function(){this.ballNearHole=false;this.ballPlaced=false;this._currentPlayerId=0;},startStroke:function(){this._idleTimer.reset();this.screen.updateScore(++ig.Session.currentPlayer.strokes,ig.Session.currentLevelData.par||3);},endStroke:function(){var cp=ig.Session.currentPlayer,ball=this.currentPlayerBall,ballDistToHole=Math.distance([ball.pos.x,ball.pos.y],[this.hole.pos.x,this.hole.pos.y]),endMusic,emotion,endMusicDur,rand;if(this._numBallsNotInHole>1){cjs.Tween.get(this.currentPlayerBall._displayobject).to({alpha:0.6},200,cjs.Ease.quadInOut);}
if(ball.inHole){this.screen.trackHoleComplete(cp.strokes);rand=Math.range(0,this.audio.happy[cp.character].length-1);ig.audio.playVO(this.audio.happy[cp.character][rand]);ig.subtitles.playSubtitles(cp.characterName.toUpperCase()+"_HIT"+(rand+1));if(cp.strokes>=ig.Session.currentLevelData.par+3){endMusic=ig.audio.tracks.music.holeBad;endMusicDur=3000;}else if(cp.strokes>1){endMusic=ig.audio.tracks.music.win;endMusicDur=5500;}else{endMusic=ig.audio.tracks.music.holeIn1;endMusicDur=5500;}
if(ig.game.muted===false){ig.audio.playMusic(endMusic,{delay:500});this.bgMusic&&cjs.Tween.get(this.bgMusic).to({volume:0},500).wait(endMusicDur).to({volume:0.4},1000);}
emotion="happy";ball.startedCloseToHole=true;}else if(ball.startedCloseToHole===true||ballDistToHole<300){rand=Math.range(0,this.audio.disappoint[cp.character].length-1);ig.audio.playVO(this.audio.disappoint[cp.character][rand]);ig.subtitles.playSubtitles(cp.characterName.toUpperCase()+"_MISS"+(rand+1));emotion="sad";ball.startedCloseToHole=true;}
this._playerFourOverPar=cp.strokes>=ig.Session.currentLevelData.par+4;if(cp.strokes>=ig.Session.currentLevelData.par+3&&ig.game.muted===false){ig.audio.playMusic(ig.audio.tracks.music.holeBad,{delay:500});this.bgMusic&&cjs.Tween.get(this.bgMusic).to({volume:0},500).wait(4000).to({volume:0.4},1000);}
ball.inPlay=false;if(ball.startedCloseToHole===true){this.screen.ui.feelings(emotion);cjs.Tween.get(this).wait(2000).call(this._rotatePlayers).call(this._startNewTurn);}else{this._rotatePlayers();this._startNewTurn();}
if(ball.startedCloseToHole===true&&ballDistToHole>300||ball.inHole){ball.startedCloseToHole=false;}},_checkBallAgainstHole:function(){var l=this.playerBalls.length;var ball,vec,ballVel,cv,bpos;for(var i=0;i<l;i++){ball=this.playerBalls[i];if(ball.inHole===false&&ball.b2Body){if(Math.distance([ball.pos.x,ball.pos.y],[this.hole.pos.x,this.hole.pos.y])<this._gravWellRadius&&ig.game.gravWellAllowed===true){bpos=ball.b2Body.GetPosition();cv=curious.Vector2.unitVector((this.hole.pos.x-ball.pos.x),(this.hole.pos.y-ball.pos.y));cv=curious.Vector2.scale(cv,30);ball.b2Body.ApplyForce(new b2Vec2(cv[0],cv[1]),bpos);}
vec=new curious.Vector2((ball.groundContactPoint[0]-this.hole.pos.x),(ball.groundContactPoint[1]-this.hole.pos.y));ballVel=ball.b2Body.GetLinearVelocity().Length();if(vec.mag<this.hole.oval.radius(vec.theta)){if(ballVel<this.minimumBallVelocityForHole){this._putBallInHole(ball);}else{cv=ball.b2Body.GetLinearVelocity();bpos=ball.b2Body.GetPosition();cv.Multiply(0.5);ball.b2Body.ApplyImpulse(new b2Vec2(cv.y,-cv.x),bpos);cjs.Sound.play(this.audio.ball.bounce[1]);}}else if(ball.canGoIntoCrocHole){this._putBallInHole(ball,600);}}}},_putBallInHole:function(ball,duration){this._numBallsNotInHole--;this.hole.putBallInHole(ball,duration);if(ig.Session.numberPlayers>1){this.screen.ui.playerFinish(this._currentPlayerId);}},_rotatePlayers:function(){this._currentPlayerId++
if(this._currentPlayerId>=ig.Session.numberPlayers){this._currentPlayerId=0;}
return this._currentPlayerId;},_startNewTurn:function(){var pid=this._currentPlayerId;var rotate=true;ig.Session.setCurrentPlayer(pid);if(this.playerBalls[pid]===undefined){var pos=ig.Session.currentLevelData.ballStartPos||[290,220];this.playerBalls.push(this.spawnEntity(ig.BallEntity,pos[0],pos[1],{playerId:pid}));this.currentPlayerBall=this.playerBalls[pid];this._beginBallPlacement();if(pid===0){rotate=false;}}else{this.currentPlayerBall=this.playerBalls[pid];this.currentPlayerBall.inPlay=true;}
var allInHole=true;var l=this.playerBalls.length;for(var i=0;i<l;i++){if(this.playerBalls[i].inHole===false){allInHole=false;break;}}
if(allInHole===true||this._playerFourOverPar){this._endRound();return;}else if(this.currentPlayerBall.inHole===true){this._rotatePlayers();this._startNewTurn();return;}
if(this._numBallsNotInHole>1||this.currentPlayerBall._displayobject.alpha!==1){cjs.Tween.get(this.currentPlayerBall._displayobject).to({alpha:1},200,cjs.Ease.quadInOut).to({scaleX:1.1,scaleY:1.1},100,cjs.Ease.sineInOut).to({scaleX:1,scaleY:1},100,cjs.Ease.sineInOut);}
if(rotate===true&&ig.Session.numberPlayers>1){this.screen.ui.rotatePlayers(pid);}
this.screen.ui.flashBallLocationRings(this.currentPlayerBall);this.screen.updateScore(ig.Session.currentPlayer.strokes,ig.Session.currentLevelData.par||3);},_endRound:function(){this.roundOver=true;this.screen.endRound();},_flashPlacementArrows:function(){var dim=this.startPad.dimensions;var loc=this.startPad.location;var vecL,vecR;var bPC=this.ballPlacementConstraints;if(dim[0]>dim[1]){vecL=new curious.Vector2(-dim[0]/6,0);vecR=new curious.Vector2(dim[0]/6,0);this.ballPlacementConstraintState=bPC.Y;}else if(dim[0]<dim[1]){vecL=new curious.Vector2(0,-dim[1]/6);vecR=new curious.Vector2(0,dim[1]/6);this.ballPlacementConstraintState=bPC.X;}else if(dim===undefined){}
this.placementArrowsOn=true;this.screen.ui.flashPlacementArrows(loc[0],loc[1],vecL,vecR);},_beginBallPlacement:function(){this._showStartpadGlow();this._ballPlacementCallback=this._placementMove.bind(this.currentPlayerBall);this.worldContainer.addEventListener("mousedown",this._ballPlacementCallback);},_endBallPlacement:function(){this.currentPlayerBall.endPlacement();this.currentPlayerBall.placed=this.ballPlaced=true;this.screen.ui.flashBallLocationRings(this.currentPlayerBall);this._hideStartpadGlow();this.worldContainer.removeEventListener("mousedown",this._ballPlacementCallback);this._ballPlacementCallback=null;this.worldContainer.on("mousedown",this.currentPlayerBall.onPressDown,this.currentPlayerBall);this.worldContainer.on("pressup",this.currentPlayerBall.onPressUp,this.currentPlayerBall);this.worldContainer.sortChildren(ig.sortByZ);this.currentPlayerBall.inPlay=true;},_placementMove:function(e){switch(e.type){case"mousedown":if(this.world.placementArrowsOn===true){this.world.screen.ui.removePlacementArrows();}
if(this.world.startPad.contains([e.stageX,e.stageY])&&Math.distance([e.stageX,e.stageY],[this.pos.x,this.pos.y])>30){this.world.b2World.DestroyBody(this.b2Body);this.world.screen.ui.hideBallLocationRings();this.b2Body=null;var state={pos:{x:e.stageX,y:e.stageY}};cjs.Tween.get(this).wait(250).call(this.pushToUpdateQueue,[state],this);cjs.Tween.get(this.pos).to({x:e.stageX,y:e.stageY},250,cjs.Ease.quadInOut).call(this.world._endBallPlacement,null,this.world);}else{this.world._endBallPlacement();this.onPressDown(e);}
break;case"pressup":break;case"stagemousemove":if(this.held){var bPC=this.world.ballPlacementConstraints;var bPCSt=this.world.ballPlacementConstraintState;if(bPCSt===bPC.X){this.pos.y=e.stageY;}else if(bPCSt===bPC.Y){this.pos.x=e.stageX;}else if(bPCSt===bPC.NONE){}
var vec=new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale);this.b2Body.SetPosition(vec);}
break;}},_showStartpadGlow:function(){cjs.Tween.get(this._startPadGlow).set({visible:true}).to({alpha:1},1500,cjs.Ease.sineInOut).call(this._loopStartpadGlow,null,this);},_loopStartpadGlow:function(){cjs.Tween.get(this._startPadGlow,{loop:true}).set({visible:true}).to({alpha:0.5},750,cjs.Ease.sineInOut).to({alpha:1},750,cjs.Ease.sineInOut)},_hideStartpadGlow:function(){cjs.Tween.get(this._startPadGlow,{override:true}).to({alpha:0},250,cjs.Ease.quadInOut).set({visible:false});},isBallFallingIn:function(hole,ball){},_initGameWorld:function(){var f,hl,barrier,course_object,aShrubbery,loc,glowAdj;var barriers=ig.Session.currentLevelData.barriers||[];var course_objects=ig.Session.currentLevelData.course_objects||[];var portal_objects=ig.Session.currentLevelData.portal_objects||[];var outlet_objects=ig.Session.currentLevelData.outlet_objects||[];var shrubberies=ig.Session.currentLevelData.scenery||[];var l;var can=document.getElementById('bgs');can.style.backgroundImage='url('+ig.game.currentLevelBackground.src+')';var hitarea=new cjs.Shape();hitarea.graphics.beginFill("#000000").rect(0,0,ig.system.width,ig.system.height);this.worldContainer.hitArea=hitarea;this.b2World=new b2World(new b2Vec2(0,0),true);this.b2World.SetContinuousPhysics(false);l=barriers.length;for(var i=0,ent;i<l;i++){barrier=barriers[i];if(barrier.entity){ent=this.spawnEntity(barrier.entity,barrier.location[0],barrier.location[1],barrier);}else{ent=this.spawnEntity(ig.BarrierEntity,barrier.location[0],barrier.location[1],barrier);}
if(barrier.name){this[barrier.name]=ent;}}
if(portal_objects.length>0){l=portal_objects.length;for(var i=0,portal,group;i<l;i++){portal=portal_objects[i];portal.portal_id=i;this.portalObjects[i]=this.spawnEntity(portal.entity,portal.location[0],portal.location[1],portal);group=ig.where(outlet_objects,{portal_group:this.portalObjects[i].portal_group});if(portal.name){this[portal.name]=this.portalObjects[i];}
ig.forEach(group,function(j,outlet){this.portalObjects[i].outlets[j]=this.spawnEntity(outlet.entity,outlet.location[0],outlet.location[1],outlet);if(outlet.name){this[outlet.name]=this.portalObjects[i].outlets[j];}},this);}}
l=course_objects.length;for(i=0;i<l;i++){course_object=course_objects[i];this[course_object.name]=this.spawnEntity(course_object.entity,course_object.location[0],course_object.location[1],course_object);}
l=shrubberies.length;for(var i=0,dO;i<l;i++){aShrubbery=shrubberies[i];if(aShrubbery.spritename==="TikiTorch"&&(ig.ua.iPad2||ig.ua.iPhone4)){this.sceneryComponents[i]=dO=this.worldContainer.addChild((new cjs.Sprite(ig.SHEETS.GAME,"torchtop")).set({x:ig.system.width/2+aShrubbery.location[0],y:ig.system.height/2+aShrubbery.location[1],z:aShrubbery.location[2],rotation:aShrubbery.rotation||0}));}else{this.sceneryComponents[i]=dO=this.worldContainer.addChild((new cjs.Sprite(ig.SHEETS[aShrubbery.sheet]||ig.SHEETS.GAME,aShrubbery.spritename)).set({x:ig.system.width/2+aShrubbery.location[0],y:ig.system.height/2+aShrubbery.location[1],z:aShrubbery.location[2],rotation:aShrubbery.rotation||0}));}
ig.setRegs(dO,aShrubbery.regPoint[0],aShrubbery.regPoint[1]);ig.scaleDO(dO,aShrubbery.scale||1);dO.set(aShrubbery);}
if(GameStartup.debug){this.b2Debug=new ig.Box2DDebug(this.b2World,ig.game.stage);}
loc=this.startPad.location;glowAdj=ig.Session.currentLevelData.startGlowAdjust;this._startPadGlow=new cjs.Sprite(ig.SHEETS.GAME,ig.Session.currentLevelData.name+"_holeglow");this._startPadGlow.set({x:this.origin.x+loc[0]+glowAdj[0],y:this.origin.y+loc[1]+glowAdj[1],z:1,scaleX:glowAdj[2]||1,scaleY:glowAdj[3]||1,visible:false,alpha:0});this.worldContainer.addChild(this._startPadGlow);ig.setRegs(this._startPadGlow,"center");this.worldContainer.sortChildren(ig.sortByZ);this._initContactListener();},_initContactListener:function(){this.contactLisn=new b2ContactListener();this.contactLisn.PreSolve=(function(contact,manifold){var userData1=contact.GetFixtureA().GetBody().GetUserData();var userData2=contact.GetFixtureB().GetBody().GetUserData();var ball,other,ballEnt;if(userData1!==null&&userData2!==null){if(userData1.type==="player_ball"){ball=userData1;other=userData2;}else if(userData2.type==="player_ball"){ball=userData2;other=userData1;}
ballEnt=this.playerBalls[ball.playerId];if(other.type==="player_ball"){contact.SetEnabled(false);}else if(other.type==="barrier"){}else if(other.type==="lh_column"){if(ballEnt.enteredLighthouse===true){contact.SetEnabled(false);}}}}).bind(this);this.contactLisn.BeginContact=(function(contact){var userData1=contact.GetFixtureA().GetBody().GetUserData();var userData2=contact.GetFixtureB().GetBody().GetUserData();var ball,other,ballEnt;if(userData1!==null&&userData2!==null){if(userData1.type==="player_ball"){ball=userData1;other=userData2;}else if(userData2.type==="player_ball"){ball=userData2;other=userData1;}
ballEnt=this.playerBalls[ball.playerId];if(other.type==="hole"){this.ballNearHole=true;}else if(other.type==="start_pad"){this.startPad.containsBall=true;}else if(other.type==="volcano_bottom_sensor"){var b=ballEnt;b.inForceField=true;b.lastPathEntrancePos=this.fromOldOrigin(b.pos.x,b.pos.y);}else if(other.type==="portal"){this.portalObjects[userData1.portal_id].teleportEntity(this.currentPlayerBall);}else if(other.type==="whirlpool"){ballEnt.inWhirlpool=true;this.whirlpool.startBallTimer();}else if(other.type==="water_sensor"){ballEnt.inWater=true;}else if((other.type==="barrier"||other.type==="lh_column"||other.type==="coconut"||other.type==="shipwheel")&&ballEnt.inPlay===true){cjs.Sound.play(this.audio.ball.bounce[0]);if((other.type==="lh_column"&&ballEnt.enteredLighthouse===false)||other.type==="coconut"||other.type==="shipwheel"){var disappoint=this.audio.disappoint[ig.Session.currentPlayer.character];var rand=Math.range(0,disappoint.length-1);ig.audio.playVO(disappoint[rand],500);ig.subtitles.playSubtitles(ig.game_config.CHARACTER_NAMES[ig.Session.currentPlayer.character].toUpperCase()+"_MISS"+(rand+1),500);}}else if(other.type==="crab"){if(ballEnt.pos.x<this.crab.pos.x&&ballEnt.pos.y>this.crab.pos.y){this.crab.swipeDaBall(ballEnt);}}else if(other.type==="croc-mouth"){ballEnt.canGoIntoCrocHole=true;}else if(other.type==="basin"){this.basinHoles[other.id].startBallTimer();this.basinHoles[other.id].ballInRange=true;ballEnt.inBasin=true;}else if(other.type==="shipslope"){this.slopeSensors[other.id].containsBall=true;}}}).bind(this);this.contactLisn.EndContact=(function(contact){var userData1=contact.GetFixtureA().GetBody().GetUserData();var userData2=contact.GetFixtureB().GetBody().GetUserData();var ball,other,ballEnt;if(userData1!==null&&userData2!==null){if(userData1.type==="player_ball"){ball=userData1;other=userData2;}else if(userData2.type==="player_ball"){ball=userData2;other=userData1;}
ballEnt=this.playerBalls[ball.playerId];if(other.type==="hole"){this.ballNearHole=false;}else if(other.type==="start_pad"){this.startPad.containsBall=false;}else if(other.type==="volcano_bottom_sensor"){if(ballEnt.relY>this.volcanoBottomSensor.relY&&ballEnt.relX<this.volcanoBottomSensor.relX){ballEnt.inForceField=false;}}else if(other.type==="whirlpool"){ballEnt.inWhirlpool=false;}else if(other.type==="basin"){ballEnt.inBasin=false;this.basinHoles[other.id].ballInRange=false;}else if(other.type==="shipslope"){this.slopeSensors[other.id].containsBall=false;}}}).bind(this);this.b2World.SetContactListener(this.contactLisn);},updateScore:function(scoreValue){this.strokes+=scoreValue;this.screen.ui.updateScore(scoreValue);},gameOver:function(){ig.game.score=this.score;ig.ScreenControl.goto(ig.SCREENS.HIGH_SCORES);}});});

// game/screens/level.js
ig.baked=true;ig.module('game.screens.level').requires('game.screens.screens','game.components.game-hud','game.components.pause-overlay','game.components.endgame-multi-overlay','game.components.endgame-single-overlay','game.components.tutorial-overlay','game.ppp-level').defines(function(){ig.Screens.Level=ig.Screens.extend({init:function(){this.ui=new ig.GameUI(this);this.pauseOverlay=new ig.Screens.PauseOverlay();this.tutorialOverlay=new ig.Screens.TutorialOverlay(this);this.level=new ig.PPPLevel(this,0.5,0.5);this.ui.container.alpha=0;this.transitionIn();if(ig.game.debugLoadedEndgameMulti){this.endRoundOverlay=new ig.Screens.EndgameMultiOverlay();this._showEndRoundOverlay();}else if(ig.game.debugLoadedEndgameSingle){this.endRoundOverlay=new ig.Screens.EndgameSingleOverlay();this._showEndRoundOverlay();}else if(ig.game.debugLoadedPauseOverlay){this.pauseOverlay.show();}},update:function(){if(this.level!==null){this.level.update();}
this.endRoundOverlay&&this.endRoundOverlay.update();this.tutorialOverlay&&this.tutorialOverlay.update();this.ui.update();},kill:function(){this.level.kill();this.level=null;this.ui.kill();this.ui=null;this.pauseOverlay.kill();this.pauseOverlay=null;},transitionIn:function(){ig.game.fadeOutOverlay(400);cjs.Tween.get(this.ui.container).wait(500).to({alpha:1},200,cjs.Ease.quadInOut);},pause:function(pause){this.level.pause(pause);if(pause===true){this.pauseOverlay.show();}else if(pause===false){this.pauseOverlay.hide();}},showTutorial:function(callback){this.level.pause(true);this.tutorialOverlay.show(callback);},hideTutorial:function(){this.level.pause(false);this.tutorialOverlay.hide();},debugDraw:function(){this.level.b2Debug.draw();},updateScore:function(score,par){this.ui.updateScore(score,par);},calculatePendingScore:function(){for(var i=0,strokes,player,prevScore,scoreForRound;i<ig.Session.numberPlayers;i++){prevScore=ig.Session.playerList[i].points;scoreForRound=ig.Session.playerList[i].strokes;ig.Session.playerList[i].points=scoreForRound+prevScore;ig.Session.playerList[i].currentRoundScore=scoreForRound;}},endRound:function(){if(ig.game.gamificationEnabled===true&&ig.Session.mode===ig.Session.MODES.MATCH){var s=ig.Session.playerList[0].strokes;ig.game.showGamification();ig.game.gamification.addCurrency(ig.Session.calculatePlayerReward(s));ig.game.gamification.applyCurrency();}
this.calculatePendingScore();ig.Session.saveHighScore();if(ig.Session.numberPlayers>1){this.endRoundOverlay=new ig.Screens.EndgameMultiOverlay(this);}else{this.endRoundOverlay=new ig.Screens.EndgameSingleOverlay(this);}
ig.Session.resetPlayerStrokes();if(ig.Session.currentLevel>=ig.Session.maxLevels-1&&ig.Session.mode===ig.Session.MODES.MATCH){this.level.killBGSound();var a=ig.audio.tracks;if(this.level.bgMusic){cjs.Tween.get(this.level.bgMusic).wait(2000).to({volume:0},500).wait(9000).to({volume:0.4},1000);}
ig.audio.playMusic(a.title_screen.music,{volume:0.2,delay:2500});ig.audio.playVO([a.end.fun,a.end.another],[0,50]);ig.subtitles.playSubtitles("END_OF_COURSE");cjs.Tween.get(this).wait(2500).call(this._showEndRoundOverlay);}else{this._showEndRoundOverlay();}},trackHoleComplete:function(strokes){var data={"action":"hole_"+(ig.Session.currentLevel+1)+"_complete","action_detail":"strokes "+strokes};window.trackGameEvent(data);},_showEndRoundOverlay:function(){this.endRoundOverlay.show();}});});

// game/controllers/screen-control.js
ig.baked=true;ig.module('game.controllers.screen-control').requires('game.screens.start','game.screens.cut-scene','game.screens.player-select','game.screens.hole-select','game.screens.level').defines(function(){ig.ScreenController=ig.Class.extend({current:null,init:function(){if(ig.ScreenControl!==null){console.error("You do not instantiate this class!");return;}
ig.ScreenControl=this;},update:function(){if(this.current)
this.current.update();},debugDraw:function(){if(this.current){this.current.debugDraw();}},pause:function(pause){if(this.current&&this.current.pause){this.current.pause(pause);}},goto:function(screen,inDuration){if(this.current){this.current.setActive(false);if(this.current.transitionOut){}else{ig.game.fadeInOverlay(inDuration||300,1).call(this.current.kill,null,this.current).call(this.goto,[screen],this);}
this.current=null;return;}
if(GameStartup.debug===true){ig.LAYERS.DEBUG.removeAllChildren();}
switch(screen){case ig.SCREENS.START:this.current=new ig.Screens.Start();break;case ig.SCREENS.CUT_SCENE:this.current=new ig.Screens.CutScene();break;case ig.SCREENS.PLAYER_SELECT:this.current=new ig.Screens.PlayerSelect();break;case ig.SCREENS.HOLE_SELECT:this.current=new ig.Screens.HoleSelect();break;case ig.SCREENS.LEVEL:this.current=new ig.Screens.Level();default:break;}
ig.game.fadeOutOverlay(500);},removeCurrent:function(t){if(typeof t==="undefined")t=500;var tween;if(this.current&&this.current.container){this.current.setActive(false);tween=cjs.Tween.get(this.current.container).to({alpha:0},t,cjs.Ease.quadInOut).call(this.current.kill,null,this.current);this.current=null;return tween;}},loadLevel:function(level){if(ig.Session.levelUnlocked(level)===false){return false;}
ig.game.fadeInOverlay(300,1).to({alpha:0},300,cjs.Ease.quadInOut);var can=document.getElementById('bgs');can.style.backgroundImage='url('+ig.mq("SandyBG").src+')';if(this.current&&this.current.container){this.current.setActive(false);tween=cjs.Tween.get(this.current.container).to({alpha:0},300,cjs.Ease.quadInOut).call(this.current.kill,null,this.current).call(ig.game.loadLevel,[level],ig.game);this.current=null;}else if(this.current){this.current.kill();this.current=null;cjs.Tween.get(this).wait(300).call(ig.game.loadLevel,[level],ig.game);}else{ig.game.loadLevel(level);}}});ig.ScreenControl=null;new ig.ScreenController();});

// game/controllers/session.js
ig.baked=true;ig.module('game.controllers.session').requires('impact.impact').defines(function(){ig.SessionController=ig.Class.extend({completedLevels:[],playerList:[{character:null,name:null,strokes:0,currentRoundScore:0,points:0,color:"pink",colorId:0}],currentPlayer:null,currentLevel:null,currentLevelData:null,maxLevels:9,mode:0,numberPlayers:1,MODES:{PRACTICE:0,MATCH:1},COLORS:["pink","green","blue","yellow","orange","black"],highscore_ls_prefix:"pp_hs_lh1_",highscore_lh_key:"pp_hs_lh1_",init:function(){if(ig.Session!==null){throw("ig.Session already exists as an instance of ig.SessionController");}
ig.Session=this;this.refresh();},levelUnlocked:function(level){var data=ig.findWhere(ig.LEVEL_DATA,{name:ig.game_config.LEVELS[level]});if(data===undefined){return false;}else{return data.unlocked;}},setLevel:function(level){this.currentLevel=level;this.currentLevelData=ig.findWhere(ig.LEVEL_DATA,{name:ig.game_config.LEVELS[level]});this.highscore_lh_key=this.highscore_ls_prefix+""+this.currentLevelData.name;this.currentPar=this.currentLevelData.par;return level;},saveConfigToLocalStorage:function(){localStorage.setItem(ig.config_ls_key,JSON.stringify(ig.LEVEL_DATA));},refresh:function(){this.currentLevel=null;this.currentLevelData=null;this.currentPlayer=null;this.multiplayer=false;this.mode=this.MODES.PRACTICE;this.setNumberOfPlayers(1);},setNumberOfPlayers:function(numPlayers){this.numberPlayers=numPlayers;if(this.numberPlayers>1){this.multiplayer=true;}else{this.multiplayer=false;}
for(var i=0;i<numPlayers;i++){this.playerList[i]={character:null,characterName:null,strokes:0,currentRoundScore:0,points:0,color:this.COLORS[i],colorId:0};}},setPlayerPointsToZero:function(){for(var i=0;i<this.numberPlayers;i++){this.playerList[i].points=0;}},resetPlayerStrokes:function(){for(var i=0;i<this.numberPlayers;i++){this.playerList[i].strokes=0;this.playerList[i].currentRoundScore=0;}},setPlayerColor:function(playerId,colorId){this.playerList[playerId].color=this.COLORS[colorId];this.playerList[playerId].colorId=colorId;},setCurrentPlayer:function(playerId){this.currentPlayer=this.playerList[playerId];},setPlayerCharacter:function(playerId,characterId){this.playerList[playerId].character=characterId;this.playerList[playerId].characterName=ig.game_config.CHARACTER_NAMES[characterId];},allPlayersHaveCharacters:function(){var l=this.numberPlayers;var pl=this.playerList;var p,other;var all=true;for(var i=0;i<l;i++){p=pl[i];if(p.character===null){all=false;break;}
if(all===false){break;}}
return all;},calculatePlayerReward:function(strokes,par){var difference=(par||this.currentLevelData.par)-strokes,rewardQuantity=1;if(difference>=2){rewardQuantity=3;}else if(difference===1){rewardQuantity=2;}else if(difference<1){rewardQuantity=1;}
return rewardQuantity;},saveHighScore:function(){var highscore=ig.getObjectWithLowestValue(this.playerList,"currentRoundScore"),current=localStorage.getItem(this.highscore_lh_key);if(current===null||parseInt(localStorage.getItem(this.highscore_lh_key))>highscore.currentRoundScore){localStorage.setItem(this.highscore_lh_key,highscore.currentRoundScore.toString());}}});ig.Session=null;new ig.SessionController();});

// game/controllers/subtitles.js
ig.baked=true;ig.module('game.controllers.subtitles').requires('game.screens.screens').defines(function(){ig.SubtitleController=ig.Screens.extend({_currentSubtitleIsSequence:false,_sequenceIndex:0,_sequence:[],_playing:false,_onlyUseDOMsubtitles:false,_sequences:{"GAMIFICATION_FIRST_OPEN":true,"CUTSCENE":true,"CHARACTER_SELECT_SINGLE_WHO":true,"CHARACTER_SELECT_MULTI_FIRST":true,"PRACTICE_OR_MATCH":true,"FIRST_HOLE":true,"TUTORIAL":true,"HOOK_IDLE":true,"JAKE_IDLE":true,"END_OF_COURSE":true,"HOLE_INSTRUCTIONS_WHEEL":true,"HOLE_INSTRUCTIONS_VOLCANO":true,"HOLE_INSTRUCTIONS_COCONUTS":true,"HOLE_INSTRUCTIONS_CANNON":true,"HOLE_INSTRUCTIONS_TIKI":true},init:function(){if(ig.subtitles!==null){throw("ig.subtitles already exists as an instance of ig.SubtitleController");}
ig.subtitles=this;this._subtitlesDiv=document.getElementById("subtitles");this._subtitlesParagraph=document.getElementById("subtitleText");this._subtitle=new cjs.Text();},playSubtitles:function(subtitleKey,delay,useDOM){if(!gameProps.subtitlesEnabled){return;}
var dom=useDOM||this._onlyUseDOMsubtitles;if(!ig.LAYERS.SUBTITLES&&!dom){this.container=ig.LAYERS.SUBTITLES=ig.game.stage.addChild(new cjs.Container());this._overlay=new cjs.Sprite(ig.SHEETS.MAIN,"overlay");this._overlay.set({scaleX:(ig.system.width+50/this._overlay.getBounds().width),scaleY:3,regPoint:"center",pctX:0.5,pctY:0.5,relativeY:PPstrings.SUBTITLE_DEFAULT_Y,alpha:0.5});this.injectComponents([this._overlay]);}
this._end();this._playing=true;if(delay&&delay>0){cjs.Tween.get(this).wait(delay).call(this._startPlay,[subtitleKey,dom]);}else{this._startPlay(subtitleKey,dom);}},stop:function(){if(this._playing===true){this._end();}},update:function(){this.refreshComponents();},_startPlay:function(subtitleKey,useDOM){var current;if(subtitleKey instanceof Array){current=[];for(var i=0,l=subtitleKey.length;i<l;i++){current[i]=PPstrings.SUBTITLES[subtitleKey[i]];}}else if(this._sequences[subtitleKey]){var i=0;current=[];while(PPstrings.SUBTITLES[subtitleKey+''+i]){current[i]=PPstrings.SUBTITLES[subtitleKey+''+i];i++;}}else{current=PPstrings.SUBTITLES[subtitleKey];}
if(current instanceof Array){this._sequence=current;}else{this._sequence=[current];}
this._playNext(useDOM);},_playNext:function(useDOM){var current=this._sequence[this._sequenceIndex],duration;cjs.Tween.removeTweens(this);if(useDOM){this._subtitlesDiv.style.display="block";this._subtitlesParagraph.innerText=current.text;}else{this._setSubtitle(current);if(this.container.visible===false){if(current.properties){this._subtitle.set({relativeX:current.properties.x||PPstrings.SUBTITLE_DEFAULT_X,relativeY:current.properties.y||PPstrings.SUBTITLE_DEFAULT_Y,pctX:0.5,pctY:0.5,regPoint:{x:0,y:0.5}});}else{this._subtitle.set({relativeX:PPstrings.SUBTITLE_DEFAULT_X,relativeY:PPstrings.SUBTITLE_DEFAULT_Y,pctX:0.5,pctY:0.5,regPoint:{x:0,y:0.5}});}
this.injectComponents([this._subtitle]);this.container.visible=true;}else{this.refreshComponents(true);}}
duration=(this._sequence[this._sequenceIndex].duration||PPstrings.SUBTITLE_DEFAULT_DURATION)*1000;if(this._sequence[this._sequenceIndex+1]){this._sequenceIndex++;cjs.Tween.get(this).wait(duration).call(this._playNext,[useDOM]);}else{cjs.Tween.get(this).wait(duration).call(this._end,[useDOM]);}},_end:function(useDOM){cjs.Tween.removeTweens(this);this._playing=false;this._sequenceIndex=0;this._sequence=[];if(!this._onlyUseDOMsubtitles){this.container.visible=false;this.container.removeChildAt(1);if(this.components.length>1){this.components.pop();}}
this._subtitlesDiv.style.display="none";this._subtitlesParagraph.innerText="";},_setSubtitle:function(stringObject){var text=this._subtitle,props=stringObject.properties,outline;if(props){text.set({font:props.font||PPstrings.SUBTITLE_DEFAULT_FONT,color:props.fillColor||PPstrings.SUBTITLE_DEFAULT_FILL,maxWidth:props.maxWidth||PPstrings.SUBTITLE_DEFAULT_MAXWIDTH,lineHeight:props.lineHeight||PPstrings.SUBTITLE_DEFAULT_LINEHEIGHT,lineWidth:props.lineWidth||null});}else{text.set({font:PPstrings.SUBTITLE_DEFAULT_FONT,color:PPstrings.SUBTITLE_DEFAULT_FILL,maxWidth:PPstrings.SUBTITLE_DEFAULT_MAXWIDTH,lineHeight:PPstrings.SUBTITLE_DEFAULT_LINEHEIGHT});}
text.text=stringObject.text;text.textAlign="center";}});ig.subtitles=null;new ig.SubtitleController();});

// game/loader.js
ig.baked=true;ig.module('game.loader').requires('impact.impact','game.screens.screens').defines(function(){ig.Loader=ig.Screens.extend({ballY:45,ballStartX:-190,ballEndX:220,_lastProgress:0,init:function(){this.container=ig.LAYERS.LOADER;var data=ig.pq("LoaderData");data.images=[ig.pq("LoaderSheet")];var sh=this.sheet=new cjs.SpriteSheet(data);this.maskX=this.ballEndX+8;this.maskY=this.ballY+1;var c=[(new cjs.Sprite(sh,"loader_course")).set({pctX:0.5,pctY:0.45,regPoint:"center"}),(new cjs.Sprite(sh,"Flag0001")).set({pctX:0.5,pctY:0.45,regPoint:"center",relativeX:220,relativeY:-53}),(new cjs.Sprite(sh,"loader_ball")).set({name:"ball",pctX:0.5,pctY:0.45,regPoint:"center",relativeX:this.ballStartX,relativeY:this.ballY}),(new cjs.Sprite(sh,"mask")).set({name:"mask",pctX:0.5,pctY:0.45,regPoint:{x:0.5,y:0},relativeX:this.maskX,relativeY:this.maskY,visible:false})];this.injectComponents(c);},update:function(){this.refreshComponents();if(this._currentQueue){this._lastProgress=Math.lerp(this._lastProgress,this._currentQueue.progress,0.07);this.ball.relativeX=this.ballStartX+(this.ballEndX-this.ballStartX)*this._lastProgress;}},start:function(queue){ig.LAYERS.LOADER.visible=true;this.ball.set({relativeX:this.ballStartX});this._currentQueue=queue;this.refreshComponents();},hide:function(){ig.LAYERS.LOADER.visible=false;this._lastProgress=0;this.mask.visible=false;this.ball.set({relativeX:this.ballStartX,relativeY:this.ballY});},animateOut:function(callback){this._currentQueue=null;var t=(1-this._lastProgress)*700;cjs.Tween.get(this.ball).to({relativeX:this.maskX+5,relativeY:this.maskY},t,cjs.Ease.sineOut).set({visible:true},this.mask).to({relativeY:this.maskY+30},150,cjs.Ease.quadInOut).call(this.hide,null,this).call(callback);}});});

// impact/b2d_plugin.js
ig.baked=true;ig.module('impact.b2d_plugin').requires('impact.world','impact.entity','impact.impact').defines(function()
{ig.World.inject({b2World:null,b2Listener:null,_b2EntityListeners:[],update:function(){if(this.b2World){this.b2World.Step(ig.system.tick,7,7);this.b2World.ClearForces();}
this.origin.x=this.origin.regX*ig.system.width;this.origin.y=this.origin.regY*ig.system.height;this.updateEntities();this.drawEntities();if(ig.resized===true){this.origin.oldX=this.origin.x;this.origin.oldY=this.origin.y;}},b2SetupListener:function()
{this.b2Listener=new b2ContactListener;this.b2Listener.BeginContact=function(contact)
{for(var i=0,ent;ent=ig.scene._b2EntityListeners[i++];)
ent.b2BeginContact(contact);};this.b2Listener.EndContact=function(contact)
{for(var i=0,ent;ent=ig.scene._b2EntityListeners[i++];)
ent.b2EndContact(contact);};this.b2Listener.PostSolve=function(contact,impulse)
{for(var i=0,ent;ent=ig.scene._b2EntityListeners[i++];)
ent.b2PostSolve(contact,impulse);};this.b2Listener.PreSolve=function(contact,oldManifold)
{for(var i=0,ent;ent=ig.scene._b2EntityListeners[i++];)
ent.b2PreSolve(contact,oldManifold);};if(this.b2World)
this.b2World.SetContactListener(this.b2Listener);},b2CreateCustom:function(x,y,polygons,type){var bodyDef=new b2BodyDef;bodyDef.position.Set(x/b2Scale,y/b2Scale);var body=this.b2World.CreateBody(bodyDef);for(var i=0,polygon;polygon=polygons[i++];){var vert=[];for(var j=0;j<polygon.length;j+=2){vert.push(new b2Vec2(polygon[j]/b2Scale,polygon[j+1]/b2Scale));}
var polyShape=new b2PolygonShape;polyShape.SetAsArray(vert,vert.length);body.CreateFixture2(polyShape,1);}
var fixture=body.GetFixtureList();fixture.SetFriction(0.5);fixture.SetRestitution(0);body.SetType(type);return body;},b2CreateMultiFixtureCustom:function(x,y,fixtures,type,isSensor){var bodyDef=new b2BodyDef;bodyDef.position.Set(x/b2Scale,y/b2Scale);var body=this.b2World.CreateBody(bodyDef);var l=fixtures.length;for(var k=0,fixture,polygons;k<l;k++){polygons=fixtures[k];for(var i=0,polygon;polygon=polygons[i++];){var vert=[];for(var j=0;j<polygon.length;j+=2){vert.push(new b2Vec2(polygon[j]/b2Scale,polygon[j+1]/b2Scale));}
var polyShape=new b2PolygonShape;polyShape.SetAsArray(vert,vert.length);body.CreateFixture2(polyShape,1);}}
var fixture=body.GetFixtureList();fixture.SetFriction(0.5);fixture.SetRestitution(0);body.SetType(type);return body;},b2CreateEdge:function(vertices){},b2CreateBox:function(x,y,w,h,type,angle)
{var fixture=new b2FixtureDef;fixture.shape=new b2PolygonShape;fixture.shape.SetAsBox((w*0.5)/b2Scale,(h*0.5)/b2Scale);fixture.density=1;fixture.friction=0.5;fixture.restitution=0;var bodyDef=new b2BodyDef;bodyDef.position.Set(x/b2Scale,y/b2Scale);var body=this.b2World.CreateBody(bodyDef);body.CreateFixture(fixture);body.SetAngle(Math.toRad(angle||0));body.SetType(type);return body},b2CreateCircle:function(x,y,r,type,rotation)
{var fixture=new b2FixtureDef;fixture.shape=new b2CircleShape(r/b2Scale);fixture.density=3;fixture.friction=0;fixture.restitution=0;var bodyDef=new b2BodyDef;bodyDef.position.Set(x/b2Scale,y/b2Scale);bodyDef.fixedRotation=!rotation;var body=this.b2World.CreateBody(bodyDef);body.CreateFixture(fixture);body.SetType(type);return body}});ig.Entity.inject({b2Body:null,b2Listen:function(flag)
{if(flag&&ig.scene._b2EntityListeners.indexOf(this)==-1)
ig.scene._b2EntityListeners.push(this);else if(flag===false)
ig.scene._b2EntityListeners.erase(this);},update:function(){if(!this.b2Body){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=this.world.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var mx=this.vel.x*ig.system.tick;var my=this.vel.y*ig.system.tick;this.pos.x+=mx;this.pos.y+=my;}
if(ig.resizedW){this.pos.x=this.relX+this.world.origin.x;this.pos.y=this.relY+this.world.origin.y;this.b2Body&&this.b2Body.SetPosition(new b2Vec2(this.pos.x/b2Scale,this.pos.y/b2Scale));}},b2BeginContact:function(){},b2EndContact:function(){},b2PostSolve:function(){},b2PreSolve:function(){}})});

// impact/b2d_debug.js
ig.baked=true;ig.module('impact.b2d_debug').requires('impact.impact').defines(function()
{ig.Box2DDebug=ig.Class.extend({alpha:0.5,thickness:1,init:function(world,stage)
{this.world=world;this.stage=stage;this.context=stage.canvas.getContext('2d');this.drawer=new b2DebugDraw;this.drawer.SetSprite(this.context);this.drawer.SetDrawScale(b2Scale);this.drawer.SetFillAlpha(this.alpha);this.drawer.SetLineThickness(this.thickness);this.drawer.SetFlags(b2DebugDraw.e_shapeBit|b2DebugDraw.e_jointBit|b2DebugDraw.e_centerOfMassBit);this.world.SetDebugDraw(this.drawer);},draw:function()
{this.context.save();this.context.translate(this.stage.x*ig.system.scale,this.stage.y*ig.system.scale);this.context.scale(1*ig.system.scale,1*ig.system.scale);this.world.DrawDebugData();this.context.restore();},clearRect:function(){},beginPath:function()
{this.context.lineWidth=this.strokeWidth;this.context.fillStyle='rgba(120, 120, 120, '+this.alpha+')';this.context.strokeStyle='rgba(190, 190, 190, '+(this.alpha+this.alpha)+')';this.context.beginPath();},arc:function(x,y,radius,startAngle,endAngle,counterClockwise)
{this.context.arc(x*b2Scale,y*b2Scale,radius*b2Scale,startAngle,endAngle,counterClockwise)},closePath:function()
{this.context.closePath()},fill:function()
{this.context.fillStyle='rgba(120, 120, 120, '+this.alpha+')';this.context.fill();},stroke:function()
{this.context.stroke()},moveTo:function(x,y)
{this.context.moveTo(x*b2Scale,y*b2Scale)},lineTo:function(x,y)
{this.context.lineTo(x*b2Scale,y*b2Scale);this.context.stroke();}})});

// game/main.js
ig.baked=true;ig.module('game.main').requires('impact.impact','impact.input','impact.system','impact.visibility','impact.world','utilities.ig-extensions','utilities.math-extensions','game.controllers.screen-control','game.controllers.session','game.controllers.audio','game.controllers.subtitles','game.loader','impact.b2d_plugin','impact.b2d_debug').defines(function(){ig.SHEETS={};ig.DATA={};ig.LAYERS={};ig.PAR=[];ig.SCREENS={START:0,CUT_SCENE:1,PLAYER_SELECT:2,HOLE_SELECT:3,LEVEL:4};ig.resizedH=true;ig.resizedW=true;ig.resized=true;ig.lastHeight=null;ig.lastWidth=null;ig.PiratePuttPutt=ig.Class.extend({isMainQueueComplete:false,visitedLevels:[],debug:false,debugLoad:false,overlayEnabled:false,overlay:null,flashOverlay:null,loader:null,reusedAssetsLoaded:false,levelResourcesAreLoaded:[],muted:false,gamificationEnabled:false,hasSeenTheCutscene:false,hasSeenTutorial:false,skullBallAllowed:false,gravWellAllowed:false,buildSpriteSheetsAsync:false,localizedTextSpritesheetsEnabled:false,init:function(){this.gamificationEnabled=document.getElementById("gamvas")===null?false:true;this.stage=ig.system.addStage(new cjs.Stage("canvas"));this.stage.autoClear=true;this.stage.snapToPixelEnabled=true;if(this.gamificationEnabled){this.gamStage=ig.system.addStage(new cjs.Stage("gamvas"));this.gamStage.nextStage=this.stage;this.gamStage.autoClear=false;this.gamification=window.gamificationInterface;cjs.Touch.enable(this.gamStage);}
if(ig.ua.mobile){if(cjs.Touch.isSupported()){this.stage.enableDOMEvents(false);}}else{this.stage.enableMouseOver();if(this.gamificationEnabled){this.gamStage.enableMouseOver();}}
ig.input.initMouse(this.stage);for(var i=0;i<10;i++){this.levelResourcesAreLoaded[i]=false;}
if(curious.debug&&GameStartup.debug===true){curious.debug.saveVar=ig.LEVEL_DATA;}
this.loadPreloads();},loadPreloads:function(){cjs.LoadQueue.loadTimeout=60000;this.preQueue=new createjs.LoadQueue(true,ig.prefix);this.preQueue.setMaxConnections(4);this.preQueue.loadManifest([{id:'Orientation',src:'media/images/orientation_tablet.jpg'},{id:"LoaderSheet",src:"media/images/loader/loader_assets.png"},{id:"LoaderData",src:"media/images/loader/loader_assets.json"},{id:"GameConfigData",src:"js/config/game_config.json"},{id:"StringsData",src:"media/strings/strings.js"}]);if(this.isAudioLimited){this.preQueue.loadManifest([{id:"LimitedAudio",src:"media/audio/limited/limited_track.json"}]);}else{this.preQueue.loadManifest([{id:"SelVOAudioData",src:"media/audio/selection_vo/selection_vo_track.json"},{id:"TitleVOAudioData",src:"media/audio/title_vo/title_vo_track.json"},{id:"TutVOAudioData",src:"media/audio/tutorial_vo/tutorial_vo_track.json"},{id:"SfxAudioData",src:"media/audio/sfx/sfx_track.json"},{id:"MusicAudioData",src:"media/audio/music/music_track.json"},{id:"GameMusicAudioData",src:"media/audio/gameplay_music/gameplay_music_track.json"},{id:"GameHoleIntroVOAudioData",src:"media/audio/gameplay_holeintro_vo/gameplay_holeintro_vo_track.json"},{id:"GameGeneralVOAudioData",src:"media/audio/gameplay_general_vo/gameplay_general_vo_track.json"},{id:"GameCharacterVOAudioData",src:"media/audio/gameplay_character_vo/gameplay_character_vo_track.json"},{id:"UIvoiceAudioData",src:"media/audio/ui_vo/ui_vo_track.json"}]);}
this.preQueueComplete=this.onPreQueueComplete.bind(this);this.preQueue.addEventListener("complete",this.preQueueComplete);},onPreQueueComplete:function(){this.preQueue.removeEventListener("complete",this.preQueueComplete);this.preQueueComplete=null;ig.game_config=ig.pq("GameConfigData");this.initLayers();this.loader=new ig.Loader();if(ig.ua.mobile&&this.gamificationEnabled===true){var x=setInterval(function(){if(GameStartup.wrongOrientation===false){this.startLoad();clearInterval(x);}}.bind(this),250);}else{this.startLoad();}},mobileTouch:function(){},startLoad:function(){this.initSound();this.loadStartUpAssets();if(this.gamificationEnabled){this._setupGamification();}},titleScreenBtnClick:function(){if(ig.ua.mobile&&cjs.WebAudioPlugin.isSupported()&&cjs.WebAudioPlugin.isSupported()){cjs.WebAudioPlugin.playEmptySound();}},goFullScreen:function(){var element=document.documentElement;if(element.requestFullscreen){element.requestFullscreen();}else if(element.mozRequestFullScreen){element.mozRequestFullScreen();}else if(element.webkitRequestFullscreen){element.webkitRequestFullscreen();}else if(element.msRequestFullscreen){element.msRequestFullscreen();}},initSound:function(){if(!cjs.Sound.initializeDefaultPlugins()){alert("Sound problem!");return;}
cjs.Sound.alternateExtensions=["ogg","mp3"];cjs.Sound.defaultInterruptBehavior=cjs.Sound.INTERRUPT_EARLY;},initLayers:function(){ig.LAYERS.SCREENS=this.stage.addChild(new cjs.Container());ig.LAYERS.GAME_UI=this.stage.addChild(new cjs.Container());ig.LAYERS.LOADER=this.stage.addChild(new cjs.Container());ig.LAYERS.OVERLAY=this.stage.addChild(new cjs.Container());if(GameStartup.debug){ig.LAYERS.DEBUG=this.stage.addChild(new cjs.Container());}},_buildUITextSpritesheet:function(){var that=this;this.localizedTextSpritesheetsEnabled=true;if(this.buildSpriteSheetsAsync){this._buildTextSpritesheet(PPstrings.UI_TEXT,function(builder){ig.SHEETS.UI_TEXT=builder.spriteSheet;if(gameProps.subtitlesEnabled){that._buildSubtitlesTextSpritesheet();}else{that._localizedTextSpritesheetsReady=true;}});}else{ig.SHEETS.UI_TEXT=this._buildTextSpritesheet(PPstrings.UI_TEXT);}},_buildSubtitlesTextSpritesheet:function(){var that=this;this.localizedTextSpritesheetsEnabled=true;this._buildTextSpritesheet(PPstrings.SUBTITLES,function(builder){ig.SHEETS.SUBTITLES=builder.spriteSheet;that._localizedTextSpritesheetsReady=true;});},_buildTextSpritesheet:function(strings,callback){var builder=new cjs.SpriteSheetBuilder(),i=0;for(var string in strings){builder.addFrame(ig.createLocalizedText(strings[string]));builder.addAnimation(string,i);}
if(this.buildSpriteSheetsAsync){builder.buildAsync();builder.on("complete",function(e){e.remove();callback(builder);});}else{return builder.build();}},loadStartUpAssets:function(){this.mainLoadHandler=this.onStartUpAssetsComplete.bind(this);this.mainQueue=new createjs.LoadQueue(true,ig.prefix);this.mainQueue.stopOnError=true;this.mainQueue.setMaxConnections(4);this.mainQueue.installPlugin(cjs.Sound);this.mainQueue.addEventListener("error",function(e){ig.log(e);});this.loader.start(this.mainQueue);var soundData;if(ig.isAudioLimited){}else{soundData=ig.pq("SelVOAudioData");this.mainQueue.loadManifest([{id:"SelVOAudio",src:"media/audio/selection_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:3}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("TitleVOAudioData");this.mainQueue.loadManifest([{id:"TitleVOAudio",src:"media/audio/title_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:3}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("TutVOAudioData");this.mainQueue.loadManifest([{id:"TutVOAudio",src:"media/audio/tutorial_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:3}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("UIvoiceAudioData");this.mainQueue.loadManifest([{id:"UIvoiceAudio",src:"media/audio/ui_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:3}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("SfxAudioData");this.mainQueue.loadManifest([{id:"SfxAudio",src:"media/audio/sfx/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:6}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("MusicAudioData");this.mainQueue.loadManifest([{id:"MusicAudio",src:"media/audio/music/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:4}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);}
this.mainQueue.loadManifest([{id:"Box2d",src:"js/lib/b2d.min.js"},{id:"MainData",src:"media/images/main/main_assets.json"},{id:"MainSheet",src:"media/images/main/main_assets.png"},{id:"SandyBG",src:"media/images/bgs/sandy_bg.jpg"},{id:"StartBG",src:"media/images/bgs/title_bg.jpg"},{id:"HoleSelectBG",src:"media/images/bgs/hole_select.jpg"},{id:"PlayerSelectPlants",src:"media/images/bgs/player_select_plants.png"},{id:"EndGameFontSheet",src:"media/images/endgame_scorefont/endgame_scorefont_assets.png"},{id:"EndGameFontData",src:"media/images/endgame_scorefont/endgame_scorefont_assets.json"},{id:"TutorialData",src:"media/images/tutorial/tutorial_assets.json"},{id:"TutorialSheet",src:"media/images/tutorial/tutorial_assets.png"},{id:"LevelData",src:"js/config/level_data.json"},{id:"HookSpying",src:"media/images/cutscene/hook_spying.jpg"},{id:"Telescope",src:"media/images/cutscene/telescope.png"},{id:"Poppinjays",src:"media/images/cutscene/crew.jpg"},{id:"HookAndSmee",src:"media/images/cutscene/hook_onpoint.jpg"},{id:"text_choosehole",src:"media/images/localized/choosehole.png"},{id:"text_choosechar",src:"media/images/localized/text_choosechar.png"},{id:"text_gametype",src:"media/images/localized/text_gametype.png"},{id:"text_howmanyplayers",src:"media/images/localized/text_howmanyplayers.png"},{id:"title_gametitle",src:"media/images/localized/title_gametitle.png"},{id:"title_jakelogo",src:"media/images/localized/title_jakelogo.png"},{id:"HUDCharactersSheet",src:"media/images/hud_characters/hud_characters_assets.png"},{id:"HUDCharactersData",src:"media/images/hud_characters/hud_characters_assets.json"}]);this.mainQueue.addEventListener("complete",this.mainLoadHandler);},_debugLoad:function(loadPoint){switch(loadPoint){case"pause":this._debugLoadPauseOverlay();break;case"endgame-singleplayer":this._debugLoadEndgameSingle();break;case"endgame-multiplayer":this._debugLoadEndgameMulti();break;case"hole-select":this._debugLoadHoleSelect();break;case"player-select":this._debugLoadPlayerSelect();break;default:break;}},_debugLoadEndgameMulti:function(){ig.game.debugLoadedEndgameMulti=true;ig.game.hasSeenTutorial=true;ig.Session.setNumberOfPlayers(5);ig.Session.playerList=[{character:0,characterName:"jake",strokes:1,currentRoundScore:0,points:0,color:"pink",colorId:0},{character:1,characterName:"izzy",strokes:2,currentRoundScore:0,points:0,color:"pink",colorId:0},{character:2,characterName:"cubby",strokes:3,currentRoundScore:0,points:0,color:"pink",colorId:0},{character:3,characterName:"hook",strokes:1,currentRoundScore:0,points:0,color:"pink",colorId:0},{character:4,characterName:"smee",strokes:4,currentRoundScore:0,points:0,color:"pink",colorId:0}];ig.ScreenControl.loadLevel(0);},_debugLoadEndgameSingle:function(){ig.game.debugLoadedEndgameSingle=true;ig.game.hasSeenTutorial=true;ig.Session.setNumberOfPlayers(1);ig.Session.playerList=[{character:0,characterName:"jake",strokes:1,currentRoundScore:0,points:0,color:"pink",colorId:0}];ig.ScreenControl.loadLevel(0);},_debugLoadHoleSelect:function(){ig.game.debugLoad=true;ig.ScreenControl.goto(ig.SCREENS.HOLE_SELECT);},_debugLoadPlayerSelect:function(){ig.game.debugLoad=true;ig.ScreenControl.goto(ig.SCREENS.PLAYER_SELECT);},_debugLoadPauseOverlay:function(){ig.game.debugLoadedPauseOverlay=true;ig.game.hasSeenTutorial=true;ig.ScreenControl.loadLevel(0);},onStartUpAssetsComplete:function(){this.mainQueue.removeEventListener("complete",this.mainLoadHandler);this.mainLoadHandler=null;var data=ig.mq("MainData");data.images=[ig.mq("MainSheet")];ig.SHEETS.MAIN=new cjs.SpriteSheet(data);data=ig.mq("EndGameFontData");data.images=[ig.mq("EndGameFontSheet")];ig.SHEETS.EG_FONT=new cjs.SpriteSheet(data);data=ig.mq("TutorialData");data.images=[ig.mq("TutorialSheet")];ig.SHEETS.TUTORIAL=new cjs.SpriteSheet(data);data=ig.mq("HUDCharactersData");data.images=[ig.mq("HUDCharactersSheet")];ig.SHEETS.HUD_CHARACTERS=new cjs.SpriteSheet(data);ig.LEVEL_DATA=ig.mq("LevelData");ig.Session.maxLevels=ig.LEVEL_DATA.length;ig.audio.tracks=ig.game_config.audio;for(var i=0,l=ig.game_config.LEVELS.length,level;i<l;i++){level=ig.findWhere(ig.LEVEL_DATA,{name:ig.game_config.LEVELS[i]});ig.PAR[i]=level.par;}
this.black_overlay=ig.LAYERS.OVERLAY.addChild(new cjs.Sprite(ig.SHEETS.MAIN,"overlay").set({x:ig.system.width/2,y:ig.system.height/2,scaleX:ig.system.width/45,scaleY:ig.system.height/45,visible:false,alpha:0}));ig.setRegs(this.black_overlay,"center");this.flash_overlay=ig.LAYERS.OVERLAY.addChild(new cjs.Sprite(ig.SHEETS.MAIN,"white_overlay")).set({x:ig.system.width/2,y:ig.system.height/2,scaleX:ig.system.width/45,scaleY:ig.system.height/45,visible:false,alpha:0});ig.setRegs(this.flash_overlay,"center");this.isMainQueueComplete=true;this.doLoadCheck();},_setupGamification:function(){var gamcanvas=document.getElementById("gamvas");var wrapper=document.getElementById("wrapper");var setupCallback=this._onGamificationSetup.bind(this);if(ig.ua.mobile){this.gamification.setup(ig.game_config.game_code,setupCallback,wrapper,gamcanvas,null,ig.system.width,ig.system.height);}else{this.gamification.setup(ig.game_config.game_code,setupCallback,wrapper,gamcanvas,null,wrapper.offsetWidth,wrapper.offsetHeight);}},doLoadCheck:function(){if(this.isMainQueueComplete&&(!this.gamificationEnabled||this.gamificationReady)&&(!this.localizedTextSpritesheetsEnabled||this._localizedTextSpritesheetsReady)){this.loader.animateOut(this._onLoaderFinish.bind(this));}},_onLoaderFinish:function(){if(gameProps.debugLoad){this._debugLoad(gameProps.debugLoadArg);}else{ig.ScreenControl.goto(ig.SCREENS.START);}},_debugLoadLevel:function(level){ig.game.debugLoad=true;ig.Session.setPlayerCharacter(0,0);ig.ScreenControl.loadLevel(level);},showGamification:function(){this.gamification.showUiButton();if(!ig.ua.mobile){this.gamification._canvas.style.visibility="visible";}},hideGamification:function(){this.gamification.hideUiButton();if(!ig.ua.mobile){this.gamification._canvas.style.visibility="hidden";}},_onGamificationSetup:function(){var canvas=document.getElementById('canvas');this.gamification._canvas.style.width=canvas.offsetWidth+"px";this.gamification._canvas.style.height=canvas.offsetHeight+"px";this.gamification._canvas.width=canvas.offsetWidth;this.gamification._canvas.height=canvas.offsetHeight;this.skullBallAllowed=this.gamification.isRewardActive("reward2");this.gravWellAllowed=this.gamification.isRewardActive("reward3");this.gamification.setOnRewardActivate("reward2",this._allowSkullBall.bind(this));this.gamification.setOnRewardActivate("reward3",this._allowGravWell.bind(this));this.gamification.setOnRewardDeactivate("reward2",this._disallowSkullBall.bind(this));this.gamification.setOnRewardDeactivate("reward3",this._disallowGravWell.bind(this));this.gamification.setOnUiHide(ig.subtitles.stop.bind(ig.subtitles));this.gamification.setOnRewardClick("reward1",function(){window.open("media/images/coloring_book.pdf",'_blank');});this.gamification.doUpdate();this.gamification.setStrings("REWARDS");this.gamification.setHeadingTextFillStyle("#FFFFFF");this.gamification.setUiButtonTextOffset(-5,0);this.gamification.setUiButtonPosition(110,90);this.gamification.setUiButtonLarge();this.gamification.setManualUpdate(false);this.gamificationReady=true;this.doLoadCheck();},_allowSkullBall:function(){this.skullBallAllowed=true;},_disallowSkullBall:function(){this.skullBallAllowed=false;},_allowGravWell:function(){this.gravWellAllowed=true;},_disallowGravWell:function(){this.gravWellAllowed=false;},fadeInOverlay:function(duration,pct){return cjs.Tween.get(this.black_overlay).set({visible:true}).to({alpha:pct},duration,cjs.Ease.quartInOut);},fadeOutOverlay:function(duration){return cjs.Tween.get(this.black_overlay).to({alpha:0},duration||300,cjs.Ease.quartInOut).set({visible:false});},loadLevel:function(levelNum){ig.SHEETS.GAME=null;ig.SHEETS.SPEC_ANIMS=null;ig.Session.setLevel(levelNum);var lvData=ig.Session.currentLevelData;var lvName=lvData.name;var q=new cjs.LoadQueue(true,ig.prefix);q.stopOnError=true;q.setMaxConnections(4);q.installPlugin(cjs.Sound);q.on("complete",this.onLevelLoadComplete,this);if(!this.reusedAssetsLoaded){q.loadManifest([{id:"CoursesData",src:"media/images/all_courses_assets.json"},{id:"CoursesSheet",src:"media/images/all_courses_assets.png"},{id:"BallsData",src:"media/images/balls.json"},{id:"BallsSheet",src:"media/images/balls.png"},{id:"HUDSheet",src:"media/images/hud/hud_assets.png"},{id:"HUDData",src:"media/images/hud/hud_assets.json"}]);soundData=ig.pq("GameMusicAudioData");this.mainQueue.loadManifest([{id:"GameMusicAudio",src:"media/audio/gameplay_music/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:1}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("GameHoleIntroVOAudioData");this.mainQueue.loadManifest([{id:"GameHoleIntroVOAudio",src:"media/audio/gameplay_holeintro_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:1}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("GameGeneralVOAudioData");this.mainQueue.loadManifest([{id:"GameGeneralVOAudio",src:"media/audio/gameplay_general_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:1}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);soundData=ig.pq("GameCharacterVOAudioData");this.mainQueue.loadManifest([{id:"GameCharacterVOAudio",src:"media/audio/gameplay_character_vo/"+soundData.urls[0],data:{audioSprite:soundData.audioSprite,channels:1}}]);ig.audio.saveSoundSpriteDurations(soundData.audioSprite);}
var lvlManifest=[{id:"LevelSheet",src:"assets.png"},{id:"LevelSheetData",src:"assets.json"},{id:"LevelBg",src:"bg.jpg"}];if(lvData.animation_sheet){if((ig.ua.iPad2||ig.ua.iPhone4)&&lvData.hasLimitedAnims){lvlManifest=lvlManifest.concat([{id:"LevelAnimSheet",src:"anims_limited.png"},{id:"LevelAnimData",src:"anims_limited.json"}]);}else if(((ig.ua.iPad2||ig.ua.iPhone4)&&lvData.name!=="swamp")||(!ig.ua.iPad2&&!ig.ua.iPhone4)){lvlManifest=lvlManifest.concat([{id:"LevelAnimSheet",src:"anims.png"},{id:"LevelAnimData",src:"anims.json"}]);}}
this.loader.start(q);q.loadManifest({path:"media/images/hole_"+lvName+"/",manifest:lvlManifest});},onLevelLoadComplete:function(e){var queue=e.target;queue.removeAllEventListeners();var data;if(this.reusedAssetsLoaded===false){data=queue.getResult("HUDData");data.images=[queue.getResult("HUDSheet")];ig.SHEETS.HUD=new cjs.SpriteSheet(data);data=queue.getResult("CoursesData");data.images=[queue.getResult("CoursesSheet")];ig.SHEETS.ALL_COURSES=new cjs.SpriteSheet(data);data=queue.getResult("BallsData");data.images=[queue.getResult("BallsSheet")];ig.SHEETS.BALLS=new cjs.SpriteSheet(data);this.reusedAssetsLoaded=true;}
data=queue.getResult("LevelSheetData");data.images=[queue.getResult("LevelSheet")];ig.SHEETS.GAME=new cjs.SpriteSheet(data);var lvData=ig.Session.currentLevelData;if(lvData.animation_sheet){data=queue.getResult("LevelAnimData");if(data!==null){if(ig.ua.iPad2||ig.ua.iPhone4){for(anim in data.animations){}}
data.images=[queue.getResult("LevelAnimSheet")];ig.SHEETS.SPEC_ANIMS=new cjs.SpriteSheet(data);}}
this.currentLevelBackground=queue.getResult("LevelBg");this.loader.animateOut(this._levelLoaderComplete.bind(this));},_levelLoaderComplete:function(){ig.game.fadeInOverlay(600,1).call(ig.ScreenControl.goto,[ig.SCREENS.LEVEL],ig.ScreenControl);},run:function(){if(ig.resizedW&&this.black_overlay){this.black_overlay.set({scaleX:ig.system.width+1,scaleY:ig.system.height+1});}
if(this.loader&&ig.LAYERS.LOADER.visible===true){this.loader.update();}
ig.ScreenControl.update();if(gameProps.subtitlesEnabled){ig.subtitles.update();}},debugDraw:function(){ig.ScreenControl.debugDraw();}});ig.createLocalizedText=function(stringObject,number){var text=new cjs.Text(),textContainer=new cjs.Container(),props=stringObject.properties,outline,textString;if(number){textString=stringObject.text.replace(/\{number\}/,number);}else{textString=stringObject.text;}
if(props){if(props.outline>0){outline=new cjs.Text();outline.set({font:props.font||PPstrings.DEFAULT_FONT,color:props.strokeColor||PPstrings.DEFAULT_STROKE,outline:props.outline,text:textString,maxWidth:props.maxWidth||null,textAlign:"center",lineWidth:props.lineWidth||null,lineHeight:props.lineHeight||null});textContainer.addChild(outline);outline.set({x:outline.getBounds().width/2});}
textContainer.set({relativeX:props.x||0,relativeY:props.y||0});text.set({font:props.font||PPstrings.DEFAULT_FONT,color:props.fillColor||PPstrings.DEFAULT_FILL,maxWidth:props.maxWidth||null,textAlign:"center",lineWidth:props.lineWidth||null,lineHeight:props.lineHeight||null});}else{text.set({font:PPstrings.DEFAULT_FONT,color:PPstrings.DEFAULT_FILL,outline:0,textAlign:"center"});}
text.text=textString;textContainer.addChild(text);text.set({x:text.getBounds().width/2});return textContainer;};ig.changeCursorToPointer=function(){document.body.style.cursor="pointer";};ig.changeCursorToDefault=function(){document.body.style.cursor="default";};ig.deploy=function(path){ig.prefix=path||"";ig.main(ig.PiratePuttPutt,60,1024,768);};ig.pq=function(thing){return ig.game.preQueue.getResult(thing);};ig.mq=function(thing){return ig.game.mainQueue.getResult(thing);};});