(function($hx_exports,$global){"use strict";var $hx_script=function(exports,global){(function($hx_exports,$global){"use strict";$hx_exports["lime"]=$hx_exports["lime"]||{};$hx_exports["engine"]=$hx_exports["engine"]||{};$hx_exports["engine"]["scenemanager"]=$hx_exports["engine"]["scenemanager"]||{};$hx_exports["engine"]["scenemanager"]["Manager"]=$hx_exports["engine"]["scenemanager"]["Manager"]||{};var $hxClasses={},$estr=function(){return js_Boot.__string_rec(this,"")},$hxEnums=$hxEnums||{},$_;function $extend(from,fields){var proto=Object.create(from);for(var name in fields)proto[name]=fields[name];if(fields.toString!==Object.prototype.toString)proto.toString=fields.toString;return proto}var lime_app_IModule=function(){};$hxClasses["lime.app.IModule"]=lime_app_IModule;lime_app_IModule.__name__="lime.app.IModule";lime_app_IModule.__isInterface__=true;lime_app_IModule.prototype={__registerLimeModule:null,__class__:lime_app_IModule};var lime_app_Module=function(){this.onExit=new lime_app__$Event_$Int_$Void};$hxClasses["lime.app.Module"]=lime_app_Module;lime_app_Module.__name__="lime.app.Module";lime_app_Module.__interfaces__=[lime_app_IModule];lime_app_Module.prototype={onExit:null,__registerLimeModule:function(application){},__class__:lime_app_Module};var lime__$internal_backend_html5_HTML5Application=function(parent){this.gameDeviceCache=new haxe_ds_IntMap;this.parent=parent;this.currentUpdate=0;this.lastUpdate=0;this.nextUpdate=0;this.framePeriod=-1;lime_media_AudioManager.init();this.accelerometer=lime_system_Sensor.registerSensor(lime_system_SensorType.ACCELEROMETER,0)};$hxClasses["lime._internal.backend.html5.HTML5Application"]=lime__$internal_backend_html5_HTML5Application;lime__$internal_backend_html5_HTML5Application.__name__="lime._internal.backend.html5.HTML5Application";lime__$internal_backend_html5_HTML5Application.prototype={gameDeviceCache:null,accelerometer:null,currentUpdate:null,deltaTime:null,framePeriod:null,lastUpdate:null,nextUpdate:null,parent:null,convertKeyCode:function(keyCode){if(keyCode>=65&&keyCode<=90){return keyCode+32}switch(keyCode){case 12:return 1073741980;case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 19:return 1073741896;case 20:return 1073741881;case 33:return 1073741899;case 34:return 1073741902;case 35:return 1073741901;case 36:return 1073741898;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 41:return 1073741943;case 43:return 1073741940;case 44:return 1073741894;case 45:return 1073741897;case 46:return 127;case 91:return 1073742051;case 92:return 1073742055;case 93:return 1073742055;case 95:return 1073742106;case 96:return 1073741922;case 97:return 1073741913;case 98:return 1073741914;case 99:return 1073741915;case 100:return 1073741916;case 101:return 1073741917;case 102:return 1073741918;case 103:return 1073741919;case 104:return 1073741920;case 105:return 1073741921;case 106:return 1073741909;case 107:return 1073741911;case 108:return 1073741923;case 109:return 1073741910;case 110:return 1073741923;case 111:return 1073741908;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 127:return 1073741931;case 128:return 1073741932;case 129:return 1073741933;case 130:return 1073741934;case 131:return 1073741935;case 132:return 1073741936;case 133:return 1073741937;case 134:return 1073741938;case 135:return 1073741939;case 144:return 1073741907;case 145:return 1073741895;case 160:return 94;case 161:return 33;case 163:return 35;case 164:return 36;case 166:return 1073742094;case 167:return 1073742095;case 168:return 1073742097;case 169:return 41;case 170:return 42;case 171:return 96;case 172:return 1073741898;case 173:return 45;case 174:return 1073741953;case 175:return 1073741952;case 176:return 1073742082;case 177:return 1073742083;case 178:return 1073742084;case 179:return 1073742085;case 180:return 1073742089;case 181:return 1073742086;case 182:return 1073741953;case 183:return 1073741952;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 193:return 63;case 194:return 1073741923;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39;case 223:return 96;case 224:return 1073742051;case 226:return 92}return keyCode},exec:function(){window.addEventListener("keydown",$bind(this,this.handleKeyEvent),false);window.addEventListener("keyup",$bind(this,this.handleKeyEvent),false);window.addEventListener("focus",$bind(this,this.handleWindowEvent),false);window.addEventListener("blur",$bind(this,this.handleWindowEvent),false);window.addEventListener("resize",$bind(this,this.handleWindowEvent),false);window.addEventListener("beforeunload",$bind(this,this.handleWindowEvent),false);window.addEventListener("devicemotion",$bind(this,this.handleSensorEvent),false);if(!CanvasRenderingContext2D.prototype.isPointInStroke){CanvasRenderingContext2D.prototype.isPointInStroke=function(path,x,y){return false}}if(!CanvasRenderingContext2D.prototype.isPointInPath){CanvasRenderingContext2D.prototype.isPointInPath=function(path,x,y){return false}}if("performance"in window==false){window.performance={}}if("now"in window.performance==false){var offset=Date.now();if(performance.timing&&performance.timing.navigationStart){offset=performance.timing.navigationStart}window.performance.now=function now(){return Date.now()-offset}}var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=(new Date).getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)};window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},handleApplicationEvent:function(__){var _g=0;var _g1=this.parent.__windows;while(_g<_g1.length)_g1[_g++].__backend.updateSize();this.updateGameDevices();this.currentUpdate=(new Date).getTime();if(this.currentUpdate>=this.nextUpdate){this.deltaTime=this.currentUpdate-this.lastUpdate;var _g2=0;var _g3=this.parent.__windows;while(_g2<_g3.length){var $window=_g3[_g2];++_g2;this.parent.onUpdate.dispatch(this.deltaTime|0);if($window.context!=null){$window.onRender.dispatch($window.context)}}if(this.framePeriod<0){this.nextUpdate=this.currentUpdate}else{this.nextUpdate=this.currentUpdate-this.currentUpdate%this.framePeriod+this.framePeriod}this.lastUpdate=this.currentUpdate}window.requestAnimationFrame($bind(this,this.handleApplicationEvent))},handleKeyEvent:function(event){if(this.parent.__window!=null){var keyCode=this.convertKeyCode(event.keyCode!=null?event.keyCode:event.which);var modifier=(event.shiftKey?3:0)|(event.ctrlKey?192:0)|(event.altKey?768:0)|(event.metaKey?3072:0);if(event.type=="keydown"){this.parent.__window.onKeyDown.dispatch(keyCode,modifier);if(this.parent.__window.onKeyDown.canceled&&event.cancelable){event.preventDefault()}}else{this.parent.__window.onKeyUp.dispatch(keyCode,modifier);if(this.parent.__window.onKeyUp.canceled&&event.cancelable){event.preventDefault()}}}},handleSensorEvent:function(event){this.accelerometer.onUpdate.dispatch(event.accelerationIncludingGravity.x,event.accelerationIncludingGravity.y,event.accelerationIncludingGravity.z)},handleWindowEvent:function(event){if(this.parent.__window!=null){switch(event.type){case"beforeunload":break;case"blur":this.parent.__window.onFocusOut.dispatch();this.parent.__window.onDeactivate.dispatch();break;case"focus":this.parent.__window.onFocusIn.dispatch();this.parent.__window.onActivate.dispatch();break;case"resize":this.parent.__window.__backend.handleResizeEvent(event);break}}},updateGameDevices:function(){var devices=lime_ui_Joystick.__getDeviceData();if(devices==null){return}var gamepad;var joystick;var data;var cache;var _g=0;var _g1=devices.length;while(_g<_g1){var i=_g++;data=devices[i];if(data==null){continue}if(!this.gameDeviceCache.h.hasOwnProperty(i)){cache=new lime__$internal_backend_html5_GameDeviceData;cache.id=i;cache.connected=data.connected;var _g2=0;var _g11=data.buttons.length;while(_g2<_g11)cache.buttons.push(data.buttons[_g2++].value);var _g21=0;var _g3=data.axes.length;while(_g21<_g3)cache.axes.push(data.axes[_g21++]);if(data.mapping=="standard"){cache.isGamepad=true}this.gameDeviceCache.h[i]=cache;if(data.connected){lime_ui_Joystick.__connect(i);if(cache.isGamepad){lime_ui_Gamepad.__connect(i)}}}cache=this.gameDeviceCache.h[i];joystick=lime_ui_Joystick.devices.h[i];gamepad=lime_ui_Gamepad.devices.h[i];if(data.connected){var button;var value;var _g4=0;var _g12=data.buttons.length;while(_g4<_g12){var i1=_g4++;value=data.buttons[i1].value;if(value!=cache.buttons[i1]){if(i1==6){joystick.onAxisMove.dispatch(data.axes.length,value);if(gamepad!=null){gamepad.onAxisMove.dispatch(4,value)}}else if(i1==7){joystick.onAxisMove.dispatch(data.axes.length+1,value);if(gamepad!=null){gamepad.onAxisMove.dispatch(5,value)}}else{if(value>0){joystick.onButtonDown.dispatch(i1)}else{joystick.onButtonUp.dispatch(i1)}if(gamepad!=null){switch(i1){case 0:button=0;break;case 1:button=1;break;case 2:button=2;break;case 3:button=3;break;case 4:button=9;break;case 5:button=10;break;case 8:button=4;break;case 9:button=6;break;case 10:button=7;break;case 11:button=8;break;case 12:button=11;break;case 13:button=12;break;case 14:button=13;break;case 15:button=14;break;case 16:button=5;break;default:continue}if(value>0){gamepad.onButtonDown.dispatch(button)}else{gamepad.onButtonUp.dispatch(button)}}}cache.buttons[i1]=value}}var _g22=0;var _g31=data.axes.length;while(_g22<_g31){var i2=_g22++;if(data.axes[i2]!=cache.axes[i2]){joystick.onAxisMove.dispatch(i2,data.axes[i2]);if(gamepad!=null){gamepad.onAxisMove.dispatch(i2,data.axes[i2])}cache.axes[i2]=data.axes[i2]}}}else if(cache.connected){cache.connected=false;lime_ui_Joystick.__disconnect(i);lime_ui_Gamepad.__disconnect(i)}}},__class__:lime__$internal_backend_html5_HTML5Application};var lime_app_Application=function(){this.onCreateWindow=new lime_app__$Event_$lime_$ui_$Window_$Void;this.onUpdate=new lime_app__$Event_$Int_$Void;lime_app_Module.call(this);if(lime_app_Application.current==null){lime_app_Application.current=this}this.meta=new haxe_ds_StringMap;this.modules=[];this.__windowByID=new haxe_ds_IntMap;this.__windows=[];this.__backend=new lime__$internal_backend_html5_HTML5Application(this);this.__registerLimeModule(this);this.__preloader=new lime_utils_Preloader;this.__preloader.onProgress.add($bind(this,this.onPreloadProgress));this.__preloader.onComplete.add($bind(this,this.onPreloadComplete))};$hxClasses["lime.app.Application"]=lime_app_Application;lime_app_Application.__name__="lime.app.Application";lime_app_Application.__super__=lime_app_Module;lime_app_Application.prototype=$extend(lime_app_Module.prototype,{meta:null,modules:null,onUpdate:null,onCreateWindow:null,__backend:null,__preloader:null,__window:null,__windowByID:null,__windows:null,addModule:function(module){module.__registerLimeModule(this);this.modules.push(module)},exec:function(){lime_app_Application.current=this;return this.__backend.exec()},onGamepadAxisMove:function(gamepad,axis,value){},onGamepadButtonDown:function(gamepad,button){},onGamepadButtonUp:function(gamepad,button){},onGamepadDisconnect:function(gamepad){},onJoystickAxisMove:function(joystick,axis,value){},onJoystickButtonDown:function(joystick,button){},onJoystickButtonUp:function(joystick,button){},onJoystickDisconnect:function(joystick){},onJoystickHatMove:function(joystick,hat,position){},onJoystickTrackballMove:function(joystick,trackball,x,y){},onKeyDown:function(keyCode,modifier){},onKeyUp:function(keyCode,modifier){},onModuleExit:function(code){},onMouseDown:function(x,y,button){},onMouseMove:function(x,y){},onMouseMoveRelative:function(x,y){},onMouseUp:function(x,y,button){},onMouseWheel:function(deltaX,deltaY,deltaMode){},onPreloadComplete:function(){},onPreloadProgress:function(loaded,total){},onRenderContextLost:function(){},onRenderContextRestored:function(context){},onTextEdit:function(text,start,length){},onTextInput:function(text){},onTouchCancel:function(touch){},onTouchEnd:function(touch){},onTouchMove:function(touch){},onTouchStart:function(touch){},onWindowActivate:function(){},onWindowDeactivate:function(){},onWindowDropFile:function(file){},onWindowEnter:function(){},onWindowExpose:function(){},onWindowFocusIn:function(){},onWindowFocusOut:function(){},onWindowFullscreen:function(){},onWindowLeave:function(){},onWindowMove:function(x,y){},onWindowMinimize:function(){},onWindowResize:function(width,height){},onWindowRestore:function(){},render:function(context){},update:function(deltaTime){},__registerLimeModule:function(application){application.onUpdate.add($bind(this,this.update));application.onExit.add($bind(this,this.onModuleExit),false,0);application.onExit.add($bind(this,this.__onModuleExit),false,0);var gamepad=lime_ui_Gamepad.devices.iterator();while(gamepad.hasNext())this.__onGamepadConnect(gamepad.next());lime_ui_Gamepad.onConnect.add($bind(this,this.__onGamepadConnect));var joystick=lime_ui_Joystick.devices.iterator();while(joystick.hasNext())this.__onJoystickConnect(joystick.next());lime_ui_Joystick.onConnect.add($bind(this,this.__onJoystickConnect));lime_ui_Touch.onCancel.add($bind(this,this.onTouchCancel));lime_ui_Touch.onStart.add($bind(this,this.onTouchStart));lime_ui_Touch.onMove.add($bind(this,this.onTouchMove));lime_ui_Touch.onEnd.add($bind(this,this.onTouchEnd))},__removeWindow:function($window){if($window!=null&&this.__windowByID.h.hasOwnProperty($window.id)){if(this.__window==$window){this.__window=null}HxOverrides.remove(this.__windows,$window);this.__windowByID.remove($window.id);$window.close()}},__onGamepadConnect:function(gamepad){var f=$bind(this,this.onGamepadAxisMove);var gamepad1=gamepad;var tmp=function(axis,value){f(gamepad1,axis,value)};gamepad.onAxisMove.add(tmp);var f1=$bind(this,this.onGamepadButtonDown);var gamepad2=gamepad;var tmp1=function(button){f1(gamepad2,button)};gamepad.onButtonDown.add(tmp1);var f2=$bind(this,this.onGamepadButtonUp);var gamepad3=gamepad;var tmp2=function(button1){f2(gamepad3,button1)};gamepad.onButtonUp.add(tmp2);var f3=$bind(this,this.onGamepadDisconnect);var gamepad4=gamepad;var tmp3=function(){f3(gamepad4)};gamepad.onDisconnect.add(tmp3)},__onJoystickConnect:function(joystick){var f=$bind(this,this.onJoystickAxisMove);var joystick1=joystick;var tmp=function(axis,value){f(joystick1,axis,value)};joystick.onAxisMove.add(tmp);var f1=$bind(this,this.onJoystickButtonDown);var joystick2=joystick;var tmp1=function(button){f1(joystick2,button)};joystick.onButtonDown.add(tmp1);var f2=$bind(this,this.onJoystickButtonUp);var joystick3=joystick;var tmp2=function(button1){f2(joystick3,button1)};joystick.onButtonUp.add(tmp2);var f3=$bind(this,this.onJoystickDisconnect);var joystick4=joystick;var tmp3=function(){f3(joystick4)};joystick.onDisconnect.add(tmp3);var f4=$bind(this,this.onJoystickHatMove);var joystick5=joystick;var tmp4=function(hat,position){f4(joystick5,hat,position)};joystick.onHatMove.add(tmp4);var f5=$bind(this,this.onJoystickTrackballMove);var joystick6=joystick;var tmp5=function(trackball,x,y){f5(joystick6,trackball,x,y)};joystick.onTrackballMove.add(tmp5)},__onModuleExit:function(code){},__onWindowClose:function($window){this.__removeWindow($window)},__class__:lime_app_Application});var ApplicationMain=function(){};$hxClasses["ApplicationMain"]=ApplicationMain;ApplicationMain.__name__="ApplicationMain";ApplicationMain.main=function(){lime_system_System.__registerEntryPoint("Bouncy Cubs",ApplicationMain.create)};ApplicationMain.create=function(config){var app=new openfl_display_Application;ManifestResources.init(config);var _this=app.meta;if(__map_reserved["build"]!=null){_this.setReserved("build","705")}else{_this.h["build"]="705"}var _this1=app.meta;if(__map_reserved["company"]!=null){_this1.setReserved("company","Killabunnies")}else{_this1.h["company"]="Killabunnies"}var _this2=app.meta;if(__map_reserved["file"]!=null){_this2.setReserved("file","Bouncy Cubs")}else{_this2.h["file"]="Bouncy Cubs"}var _this3=app.meta;if(__map_reserved["name"]!=null){_this3.setReserved("name","Bouncy Cubs")}else{_this3.h["name"]="Bouncy Cubs"}var _this4=app.meta;if(__map_reserved["packageName"]!=null){_this4.setReserved("packageName","com.Killabunnies.bouncycubs")}else{_this4.h["packageName"]="com.Killabunnies.bouncycubs"}var _this5=app.meta;if(__map_reserved["version"]!=null){_this5.setReserved("version","pre-dev")}else{_this5.h["version"]="pre-dev"}var attributes={allowHighDPI:false,alwaysOnTop:false,borderless:false,element:null,frameRate:60,height:600,hidden:false,maximized:false,minimized:false,parameters:{},resizable:true,title:"Bouncy Cubs",width:800,x:null,y:null};attributes.context={antialiasing:0,background:6710886,colorDepth:32,depth:true,hardware:true,stencil:true,type:null,vsync:false};if(app.__window==null){if(config!=null){var _g=0;var _g1=Reflect.fields(config);while(_g<_g1.length){var field=_g1[_g];++_g;if(Object.prototype.hasOwnProperty.call(attributes,field)){attributes[field]=Reflect.field(config,field)}else if(Object.prototype.hasOwnProperty.call(attributes.context,field)){attributes.context[field]=Reflect.field(config,field)}}}}app.createWindow(attributes);var preloader=new CustomPreloader;app.__preloader.onProgress.add(function(loaded,total){preloader.update(loaded,total)});app.__preloader.onComplete.add(function(){preloader.start()});var stage=js_Boot.__cast(app.__window,openfl_display_Window).stage;var tmp=function(){ApplicationMain.start(stage)};preloader.onComplete.add(tmp);var _g2=0;var _g11=ManifestResources.preloadLibraries;while(_g2<_g11.length)app.__preloader.addLibrary(_g11[_g2++]);var _g21=0;var _g3=ManifestResources.preloadLibraryNames;while(_g21<_g3.length)app.__preloader.addLibraryName(_g3[_g21++]);app.__preloader.load();app.exec()};ApplicationMain.start=function(stage){try{var current=stage.getChildAt(0);if(current==null||!(current instanceof openfl_display_DisplayObjectContainer)){current=new openfl_display_MovieClip;stage.addChild(current)}new DocumentClass(current);stage.dispatchEvent(new openfl_events_Event("resize",false,false));if(stage.window.__fullscreen){stage.dispatchEvent(new openfl_events_FullScreenEvent("fullScreen",false,false,true,true))}}catch(e){haxe_CallStack.lastException=e;stage.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}};var openfl_events_IEventDispatcher=function(){};$hxClasses["openfl.events.IEventDispatcher"]=openfl_events_IEventDispatcher;openfl_events_IEventDispatcher.__name__="openfl.events.IEventDispatcher";openfl_events_IEventDispatcher.__isInterface__=true;var openfl_events_EventDispatcher=function(target){if(target!=null){this.__targetDispatcher=target}};$hxClasses["openfl.events.EventDispatcher"]=openfl_events_EventDispatcher;openfl_events_EventDispatcher.__name__="openfl.events.EventDispatcher";openfl_events_EventDispatcher.__interfaces__=[openfl_events_IEventDispatcher];openfl_events_EventDispatcher.prototype={__eventMap:null,__iterators:null,__targetDispatcher:null,addEventListener:function(type,listener,useCapture,priority,useWeakReference){if(useWeakReference==null){useWeakReference=false}if(priority==null){priority=0}if(useCapture==null){useCapture=false}if(listener==null){return}if(this.__eventMap==null){this.__eventMap=new haxe_ds_StringMap;this.__iterators=new haxe_ds_StringMap}var _this=this.__eventMap;if(!(__map_reserved[type]!=null?_this.existsReserved(type):_this.h.hasOwnProperty(type))){var list=[];list.push(new openfl_events__$EventDispatcher_Listener(listener,useCapture,priority));var iterator=new openfl_events__$EventDispatcher_DispatchIterator(list);var _this1=this.__eventMap;if(__map_reserved[type]!=null){_this1.setReserved(type,list)}else{_this1.h[type]=list}var _this2=this.__iterators;var value=[iterator];if(__map_reserved[type]!=null){_this2.setReserved(type,value)}else{_this2.h[type]=value}}else{var _this3=this.__eventMap;var list1=__map_reserved[type]!=null?_this3.getReserved(type):_this3.h[type];var _g=0;var _g1=list1.length;while(_g<_g1)if(list1[_g++].match(listener,useCapture)){return}var _this4=this.__iterators;var iterators=__map_reserved[type]!=null?_this4.getReserved(type):_this4.h[type];var _g2=0;while(_g2<iterators.length){var iterator1=iterators[_g2];++_g2;if(iterator1.active){iterator1.copy()}}this.__addListenerByPriority(list1,new openfl_events__$EventDispatcher_Listener(listener,useCapture,priority))}},dispatchEvent:function(event){if(this.__targetDispatcher!=null){event.target=this.__targetDispatcher}else{event.target=this}return this.__dispatchEvent(event)},hasEventListener:function(type){if(this.__eventMap==null){return false}var _this=this.__eventMap;if(__map_reserved[type]!=null){return _this.existsReserved(type)}else{return _this.h.hasOwnProperty(type)}},removeEventListener:function(type,listener,useCapture){if(useCapture==null){useCapture=false}if(this.__eventMap==null||listener==null){return}var _this=this.__eventMap;var list=__map_reserved[type]!=null?_this.getReserved(type):_this.h[type];if(list==null){return}var _this1=this.__iterators;var iterators=__map_reserved[type]!=null?_this1.getReserved(type):_this1.h[type];var _g=0;var _g1=list.length;while(_g<_g1){var i=_g++;if(list[i].match(listener,useCapture)){var _g2=0;while(_g2<iterators.length)iterators[_g2++].remove(list[i],i);list.splice(i,1);break}}if(list.length==0){this.__eventMap.remove(type);this.__iterators.remove(type)}var _this2=this.__eventMap;if(!new haxe_ds__$StringMap_StringMapIterator(_this2,_this2.arrayKeys()).hasNext()){this.__eventMap=null;this.__iterators=null}},__dispatchEvent:function(event){if(this.__eventMap==null||event==null){return true}var type=event.type;var _this=this.__eventMap;var list=__map_reserved[type]!=null?_this.getReserved(type):_this.h[type];if(list==null){return true}if(event.target==null){if(this.__targetDispatcher!=null){event.target=this.__targetDispatcher}else{event.target=this}}event.currentTarget=this;var capture=event.eventPhase==1;var _this1=this.__iterators;var iterators=__map_reserved[type]!=null?_this1.getReserved(type):_this1.h[type];var iterator=iterators[0];if(iterator.active){iterator=new openfl_events__$EventDispatcher_DispatchIterator(list);iterators.push(iterator)}iterator.start();var listener=iterator;while(listener.hasNext()){var listener1=listener.next();if(listener1==null){continue}if(listener1.useCapture==capture){listener1.callback(event);if(event.__isCanceledNow){break}}}iterator.stop();if(iterator!=iterators[0]){HxOverrides.remove(iterators,iterator)}else{iterator.reset(list)}return!event.isDefaultPrevented()},__removeAllListeners:function(){this.__eventMap=null;this.__iterators=null},__addListenerByPriority:function(list,listener){var numElements=list.length;var addAtPosition=numElements;var _g=0;while(_g<numElements){var i=_g++;if(list[i].priority<listener.priority){addAtPosition=i;break}}list.splice(addAtPosition,0,listener)},__class__:openfl_events_EventDispatcher};var openfl_display_IBitmapDrawable=function(){};$hxClasses["openfl.display.IBitmapDrawable"]=openfl_display_IBitmapDrawable;openfl_display_IBitmapDrawable.__name__="openfl.display.IBitmapDrawable";openfl_display_IBitmapDrawable.__isInterface__=true;openfl_display_IBitmapDrawable.prototype={__mask:null,__renderTransform:null,__scrollRect:null,__type:null,__worldAlpha:null,__worldColorTransform:null,__getBounds:null,__update:null,__class__:openfl_display_IBitmapDrawable};var openfl__$Vector_Vector_$Impl_$={};$hxClasses["openfl._Vector.Vector_Impl_"]=openfl__$Vector_Vector_$Impl_$;openfl__$Vector_Vector_$Impl_$.__name__="openfl._Vector.Vector_Impl_";openfl__$Vector_Vector_$Impl_$.toIntVector=function(t,length,fixed,array){return new openfl__$Vector_IntVector(length,fixed,array)};openfl__$Vector_Vector_$Impl_$.toFloatVector=function(t,length,fixed,array){return new openfl__$Vector_FloatVector(length,fixed,array,true)};openfl__$Vector_Vector_$Impl_$.toObjectVector=function(t,length,fixed,array){return new openfl__$Vector_ObjectVector(length,fixed,array,true)};var lime_utils_ObjectPool=function(create,clean,size){this.__pool=new haxe_ds_ObjectMap;this.activeObjects=0;this.inactiveObjects=0;this.__inactiveObject0=null;this.__inactiveObject1=null;this.__inactiveObjectList=new haxe_ds_List;if(create!=null){this.create=create}if(clean!=null){this.clean=clean}if(size!=null){this.set_size(size)}};$hxClasses["lime.utils.ObjectPool"]=lime_utils_ObjectPool;lime_utils_ObjectPool.__name__="lime.utils.ObjectPool";lime_utils_ObjectPool.prototype={activeObjects:null,inactiveObjects:null,__inactiveObject0:null,__inactiveObject1:null,__inactiveObjectList:null,__pool:null,__size:null,clean:function(object){},create:function(){return null},get:function(){var object=null;if(this.inactiveObjects>0){var object1=null;if(this.__inactiveObject0!=null){object1=this.__inactiveObject0;this.__inactiveObject0=null}else if(this.__inactiveObject1!=null){object1=this.__inactiveObject1;this.__inactiveObject1=null}else{object1=this.__inactiveObjectList.pop();if(this.__inactiveObjectList.length>0){this.__inactiveObject0=this.__inactiveObjectList.pop()}if(this.__inactiveObjectList.length>0){this.__inactiveObject1=this.__inactiveObjectList.pop()}}this.inactiveObjects--;this.activeObjects++;object=object1}else if(this.__size==null||this.activeObjects<this.__size){object=this.create();if(object!=null){this.__pool.set(object,true);this.activeObjects++}}return object},release:function(object){this.activeObjects--;if(this.__size==null||this.activeObjects+this.inactiveObjects<this.__size){this.clean(object);if(this.__inactiveObject0==null){this.__inactiveObject0=object}else if(this.__inactiveObject1==null){this.__inactiveObject1=object}else{this.__inactiveObjectList.add(object)}this.inactiveObjects++}else{this.__pool.remove(object)}},remove:function(object){if(this.__pool.exists(object)){this.__pool.remove(object);if(this.__inactiveObject0==object){this.__inactiveObject0=null;this.inactiveObjects--}else if(this.__inactiveObject1==object){this.__inactiveObject1=null;this.inactiveObjects--}else if(this.__inactiveObjectList.remove(object)){this.inactiveObjects--}else{this.activeObjects--}}},__removeInactive:function(count){if(count<=0||this.inactiveObjects==0){return}if(this.__inactiveObject0!=null){this.__pool.remove(this.__inactiveObject0);this.__inactiveObject0=null;this.inactiveObjects--;--count}if(count==0||this.inactiveObjects==0){return}if(this.__inactiveObject1!=null){this.__pool.remove(this.__inactiveObject1);this.__inactiveObject1=null;this.inactiveObjects--;--count}if(count==0||this.inactiveObjects==0){return}var _g_head=this.__inactiveObjectList.h;while(_g_head!=null){var val=_g_head.item;_g_head=_g_head.next;this.__pool.remove(val);this.__inactiveObjectList.remove(val);this.inactiveObjects--;--count;if(count==0||this.inactiveObjects==0){return}}},set_size:function(value){if(value==null){this.__size=null}else{var current=this.inactiveObjects+this.activeObjects;this.__size=value;if(current>value){this.__removeInactive(current-value)}else if(value>current){var object;var _g=0;var _g1=value-current;while(_g<_g1){++_g;object=this.create();if(object!=null){this.__pool.set(object,false);this.__inactiveObjectList.add(object);this.inactiveObjects++}else{break}}}}return value},__class__:lime_utils_ObjectPool,__properties__:{set_size:"set_size"}};var haxe_IMap=function(){};$hxClasses["haxe.IMap"]=haxe_IMap;haxe_IMap.__name__="haxe.IMap";haxe_IMap.__isInterface__=true;haxe_IMap.prototype={set:null,exists:null,remove:null,__class__:haxe_IMap};var haxe_ds_ObjectMap=function(){this.h={__keys__:{}}};$hxClasses["haxe.ds.ObjectMap"]=haxe_ds_ObjectMap;haxe_ds_ObjectMap.__name__="haxe.ds.ObjectMap";haxe_ds_ObjectMap.__interfaces__=[haxe_IMap];haxe_ds_ObjectMap.prototype={h:null,set:function(key,value){var id=key.__id__||(key.__id__=$global.$haxeUID++);this.h[id]=value;this.h.__keys__[id]=key},exists:function(key){return this.h.__keys__[key.__id__]!=null},remove:function(key){var id=key.__id__;if(this.h.__keys__[id]==null){return false}delete this.h[id];delete this.h.__keys__[id];return true},keys:function(){var a=[];for(var key in this.h.__keys__){if(this.h.hasOwnProperty(key)){a.push(this.h.__keys__[key])}}return HxOverrides.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var i=this.it.next();return this.ref[i.__id__]}}},__class__:haxe_ds_ObjectMap};var haxe_ds_List=function(){this.length=0};$hxClasses["haxe.ds.List"]=haxe_ds_List;haxe_ds_List.__name__="haxe.ds.List";haxe_ds_List.prototype={h:null,q:null,length:null,add:function(item){var x=new haxe_ds__$List_ListNode(item,null);if(this.h==null){this.h=x}else{this.q.next=x}this.q=x;this.length++},push:function(item){var x=new haxe_ds__$List_ListNode(item,this.h);this.h=x;if(this.q==null){this.q=x}this.length++},pop:function(){if(this.h==null){return null}var x=this.h.item;this.h=this.h.next;if(this.h==null){this.q=null}this.length--;return x},clear:function(){this.h=null;this.q=null;this.length=0},remove:function(v){var prev=null;var l=this.h;while(l!=null){if(l.item==v){if(prev==null){this.h=l.next}else{prev.next=l.next}if(this.q==l){this.q=prev}this.length--;return true}prev=l;l=l.next}return false},iterator:function(){return new haxe_ds__$List_ListIterator(this.h)},__class__:haxe_ds_List};var openfl_display_DisplayObject=function(){openfl_events_EventDispatcher.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.DISPLAY_OBJECT;this.__alpha=1;this.__blendMode=10;this.__cacheAsBitmap=false;this.__transform=new openfl_geom_Matrix;this.__visible=true;this.__rotation=0;this.__rotationSine=0;this.__rotationCosine=1;this.__scaleX=1;this.__scaleY=1;this.__worldAlpha=1;this.__worldBlendMode=10;this.__worldTransform=new openfl_geom_Matrix;this.__worldColorTransform=new openfl_geom_ColorTransform;this.__renderTransform=new openfl_geom_Matrix;this.__worldVisible=true;this.set_name("instance"+ ++openfl_display_DisplayObject.__instanceCount);if(openfl_display_DisplayObject.__initStage!=null){this.stage=openfl_display_DisplayObject.__initStage;openfl_display_DisplayObject.__initStage=null;this.stage.addChild(this)}};$hxClasses["openfl.display.DisplayObject"]=openfl_display_DisplayObject;openfl_display_DisplayObject.__name__="openfl.display.DisplayObject";openfl_display_DisplayObject.__interfaces__=[openfl_display_IBitmapDrawable];openfl_display_DisplayObject.__super__=openfl_events_EventDispatcher;openfl_display_DisplayObject.prototype=$extend(openfl_events_EventDispatcher.prototype,{opaqueBackground:null,parent:null,stage:null,__alpha:null,__blendMode:null,__cacheAsBitmap:null,__cacheAsBitmapMatrix:null,__cacheBitmap:null,__cacheBitmapBackground:null,__cacheBitmapColorTransform:null,__cacheBitmapData:null,__cacheBitmapData2:null,__cacheBitmapData3:null,__cacheBitmapDataTexture:null,__cacheBitmapMatrix:null,__cacheBitmapRendererSW:null,__cairo:null,__children:null,__customRenderClear:null,__customRenderEvent:null,__filters:null,__graphics:null,__isCacheBitmapRender:null,__isMask:null,__loaderInfo:null,__mask:null,__maskTarget:null,__name:null,__objectTransform:null,__renderable:null,__renderDirty:null,__renderParent:null,__renderTransform:null,__renderTransformCache:null,__renderTransformChanged:null,__rotation:null,__rotationCosine:null,__rotationSine:null,__scale9Grid:null,__scaleX:null,__scaleY:null,__scrollRect:null,__shader:null,__tempPoint:null,__transform:null,__transformDirty:null,__type:null,__visible:null,__worldAlpha:null,__worldAlphaChanged:null,__worldBlendMode:null,__worldClip:null,__worldClipChanged:null,__worldColorTransform:null,__worldShader:null,__worldScale9Grid:null,__worldTransform:null,__worldVisible:null,__worldVisibleChanged:null,__worldTransformInvalid:null,__worldZ:null,__canvas:null,__context:null,__style:null,addEventListener:function(type,listener,useCapture,priority,useWeakReference){if(useWeakReference==null){useWeakReference=false}if(priority==null){priority=0}if(useCapture==null){useCapture=false}switch(type){case"activate":case"deactivate":case"enterFrame":case"exitFrame":case"frameConstructed":case"render":var _this=openfl_display_DisplayObject.__broadcastEvents;if(!(__map_reserved[type]!=null?_this.existsReserved(type):_this.h.hasOwnProperty(type))){var _this1=openfl_display_DisplayObject.__broadcastEvents;var value=[];if(__map_reserved[type]!=null){_this1.setReserved(type,value)}else{_this1.h[type]=value}}var _this2=openfl_display_DisplayObject.__broadcastEvents;var dispatchers=__map_reserved[type]!=null?_this2.getReserved(type):_this2.h[type];if(dispatchers.indexOf(this)==-1){dispatchers.push(this)}break;case"clearDOM":case"renderCairo":case"renderCanvas":case"renderDOM":case"renderOpenGL":if(this.__customRenderEvent==null){this.__customRenderEvent=new openfl_events_RenderEvent(null);this.__customRenderEvent.objectColorTransform=new openfl_geom_ColorTransform;this.__customRenderEvent.objectMatrix=new openfl_geom_Matrix;this.__customRenderClear=true}break;default:}openfl_events_EventDispatcher.prototype.addEventListener.call(this,type,listener,useCapture,priority,useWeakReference)},dispatchEvent:function(event){if(event instanceof openfl_events_MouseEvent){var mouseEvent=event;var _this=this.__getRenderTransform();mouseEvent.stageX=mouseEvent.localX*_this.a+mouseEvent.localY*_this.c+_this.tx;var _this1=this.__getRenderTransform();mouseEvent.stageY=mouseEvent.localX*_this1.b+mouseEvent.localY*_this1.d+_this1.ty}else if(event instanceof openfl_events_TouchEvent){var touchEvent=event;var _this2=this.__getRenderTransform();touchEvent.stageX=touchEvent.localX*_this2.a+touchEvent.localY*_this2.c+_this2.tx;var _this3=this.__getRenderTransform();touchEvent.stageY=touchEvent.localX*_this3.b+touchEvent.localY*_this3.d+_this3.ty}event.target=this;return this.__dispatchWithCapture(event)},getBounds:function(targetCoordinateSpace){var matrix=openfl_geom_Matrix.__pool.get();if(targetCoordinateSpace!=null&&targetCoordinateSpace!=this){matrix.copyFrom(this.__getWorldTransform());var targetMatrix=openfl_geom_Matrix.__pool.get();targetMatrix.copyFrom(targetCoordinateSpace.__getWorldTransform());targetMatrix.invert();matrix.concat(targetMatrix);openfl_geom_Matrix.__pool.release(targetMatrix)}else{matrix.identity()}var bounds=new openfl_geom_Rectangle;this.__getBounds(bounds,matrix);openfl_geom_Matrix.__pool.release(matrix);return bounds},globalToLocal:function(pos){return this.__globalToLocal(pos,new openfl_geom_Point)},localToGlobal:function(point){return this.__getRenderTransform().transformPoint(point)},removeEventListener:function(type,listener,useCapture){if(useCapture==null){useCapture=false}openfl_events_EventDispatcher.prototype.removeEventListener.call(this,type,listener,useCapture);switch(type){case"activate":case"deactivate":case"enterFrame":case"exitFrame":case"frameConstructed":case"render":if(!this.hasEventListener(type)){var _this=openfl_display_DisplayObject.__broadcastEvents;if(__map_reserved[type]!=null?_this.existsReserved(type):_this.h.hasOwnProperty(type)){var _this1=openfl_display_DisplayObject.__broadcastEvents;HxOverrides.remove(__map_reserved[type]!=null?_this1.getReserved(type):_this1.h[type],this)}}break;case"clearDOM":case"renderCairo":case"renderCanvas":case"renderDOM":case"renderOpenGL":if(!this.hasEventListener("clearDOM")&&!this.hasEventListener("renderCairo")&&!this.hasEventListener("renderCanvas")&&!this.hasEventListener("renderDOM")&&!this.hasEventListener("renderOpenGL")){this.__customRenderEvent=null}break;default:}},__cleanup:function(){this.__cairo=null;this.__canvas=null;this.__context=null;if(this.__graphics!=null){this.__graphics.__cleanup()}if(this.__cacheBitmap!=null){this.__cacheBitmap.__cleanup();this.__cacheBitmap=null}if(this.__cacheBitmapDataTexture!=null){this.__cacheBitmapDataTexture.dispose();this.__cacheBitmapDataTexture=null}if(this.__cacheBitmapData!=null){this.__cacheBitmapData.dispose();this.__cacheBitmapData=null}if(this.__cacheBitmapData2!=null){this.__cacheBitmapData2.dispose();this.__cacheBitmapData2=null}if(this.__cacheBitmapData3!=null){this.__cacheBitmapData3.dispose();this.__cacheBitmapData3=null}},__dispatch:function(event){if(this.__eventMap!=null&&this.hasEventListener(event.type)){var result=openfl_events_EventDispatcher.prototype.__dispatchEvent.call(this,event);if(event.__isCanceled){return true}return result}return true},__dispatchChildren:function(event){},__dispatchEvent:function(event){var parent=event.bubbles?this.parent:null;var result=openfl_events_EventDispatcher.prototype.__dispatchEvent.call(this,event);if(event.__isCanceled){return true}if(parent!=null&&parent!=this){event.eventPhase=3;if(event.target==null){event.target=this}parent.__dispatchEvent(event)}return result},__dispatchWithCapture:function(event){if(event.target==null){event.target=this}if(this.parent!=null){event.eventPhase=1;if(this.parent==this.stage){this.parent.__dispatch(event)}else{var stack=openfl_display_DisplayObject.__tempStack.get();var parent=this.parent;var i=0;while(parent!=null){stack.set(i,parent);parent=parent.parent;++i}var _g=0;var _g1=i;while(_g<_g1)stack.get(i-_g++-1).__dispatch(event);openfl_display_DisplayObject.__tempStack.release(stack)}}event.eventPhase=2;return this.__dispatchEvent(event)},__enterFrame:function(deltaTime){},__getBounds:function(rect,matrix){if(this.__graphics!=null){this.__graphics.__getBounds(rect,matrix)}},__getCursor:function(){return null},__getFilterBounds:function(rect,matrix){this.__getRenderBounds(rect,matrix);if(this.__filters!=null){var extension=openfl_geom_Rectangle.__pool.get();var _g=0;var _g1=this.__filters;while(_g<_g1.length){var filter=_g1[_g];++_g;extension.__expand(-filter.__leftExtension,-filter.__topExtension,filter.__leftExtension+filter.__rightExtension,filter.__topExtension+filter.__bottomExtension)}rect.width+=extension.width;rect.height+=extension.height;rect.x+=extension.x;rect.y+=extension.y;openfl_geom_Rectangle.__pool.release(extension)}},__getInteractive:function(stack){return false},__getLocalBounds:function(rect){this.__getBounds(rect,this.__transform);rect.x-=this.__transform.tx;rect.y-=this.__transform.ty},__getRenderBounds:function(rect,matrix){if(this.__scrollRect==null){this.__getBounds(rect,matrix)}else{var r=openfl_geom_Rectangle.__pool.get();r.copyFrom(this.__scrollRect);r.__transform(r,matrix);rect.__expand(r.x,r.y,r.width,r.height);openfl_geom_Rectangle.__pool.release(r)}},__getRenderTransform:function(){this.__getWorldTransform();return this.__renderTransform},__getWorldTransform:function(){if(this.__transformDirty||this.__worldTransformInvalid){var list=[];var current=this;if(this.parent==null){this.__update(true,false)}else{while(current!=this.stage){list.push(current);current=current.parent;if(current==null){break}}}var i=list.length;while(--i>=0){current=list[i];current.__update(true,false)}}return this.__worldTransform},__globalToLocal:function(global,local){this.__getRenderTransform();if(global==local){var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){global.x=-_this.tx;global.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-global.y)+_this.d*(global.x-_this.tx));global.y=1/norm*(_this.a*(global.y-_this.ty)+_this.b*(_this.tx-global.x));global.x=px}}else{var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;local.x=norm1==0?-_this1.tx:1/norm1*(_this1.c*(_this1.ty-global.y)+_this1.d*(global.x-_this1.tx));var _this2=this.__renderTransform;var norm2=_this2.a*_this2.d-_this2.b*_this2.c;local.y=norm2==0?-_this2.ty:1/norm2*(_this2.a*(global.y-_this2.ty)+_this2.b*(_this2.tx-global.x))}return local},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(this.__graphics!=null){if(!hitObject.__visible||this.__isMask){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}if(this.__graphics.__hitTest(x,y,shapeFlag,this.__getRenderTransform())){if(stack!=null&&!interactiveOnly){stack.push(hitObject)}return true}}return false},__hitTestMask:function(x,y){if(this.__graphics!=null){if(this.__graphics.__hitTest(x,y,true,this.__getRenderTransform())){return true}}return false},__setParentRenderDirty:function(){var renderParent=this.__renderParent!=null?this.__renderParent:this.parent;if(renderParent!=null&&!renderParent.__renderDirty){renderParent.__renderDirty=true;renderParent.__setParentRenderDirty()}},__setStageReference:function(stage){this.stage=stage},__setTransformDirty:function(){if(!this.__transformDirty){this.__transformDirty=true;this.__setWorldTransformInvalid();this.__setParentRenderDirty()}},__setWorldTransformInvalid:function(){this.__worldTransformInvalid=true},__update:function(transformOnly,updateChildren){var renderParent=this.__renderParent!=null?this.__renderParent:this.parent;if(this.__isMask&&renderParent==null){renderParent=this.__maskTarget}this.__renderable=this.__visible&&this.__scaleX!=0&&this.__scaleY!=0&&!this.__isMask&&(renderParent==null||!renderParent.__isMask);this.__updateTransforms();this.__transformDirty=false;this.__worldTransformInvalid=false;if(!transformOnly){if(openfl_display_DisplayObject.__supportDOM){this.__renderTransformChanged=!this.__renderTransform.equals(this.__renderTransformCache);if(this.__renderTransformCache==null){this.__renderTransformCache=this.__renderTransform.clone()}else{this.__renderTransformCache.copyFrom(this.__renderTransform)}}if(renderParent!=null){if(openfl_display_DisplayObject.__supportDOM){var worldVisible=renderParent.__worldVisible&&this.__visible;this.__worldVisibleChanged=this.__worldVisible!=worldVisible;this.__worldVisible=worldVisible;var worldAlpha=this.get_alpha()*renderParent.__worldAlpha;this.__worldAlphaChanged=this.__worldAlpha!=worldAlpha;this.__worldAlpha=worldAlpha}else{this.__worldAlpha=this.get_alpha()*renderParent.__worldAlpha}if(this.__objectTransform!=null){this.__worldColorTransform.__copyFrom(this.__objectTransform.get_colorTransform());this.__worldColorTransform.__combine(renderParent.__worldColorTransform)}else{this.__worldColorTransform.__copyFrom(renderParent.__worldColorTransform)}if(this.__blendMode==null||this.__blendMode==10){this.__worldBlendMode=renderParent.__worldBlendMode}else{this.__worldBlendMode=this.__blendMode}if(this.__shader==null){this.__worldShader=renderParent.__shader}else{this.__worldShader=this.__shader}if(this.__scale9Grid==null){this.__worldScale9Grid=renderParent.__scale9Grid}else{this.__worldScale9Grid=this.__scale9Grid}}else{this.__worldAlpha=this.get_alpha();if(openfl_display_DisplayObject.__supportDOM){this.__worldVisibleChanged=this.__worldVisible!=this.__visible;this.__worldVisible=this.__visible;this.__worldAlphaChanged=this.__worldAlpha!=this.get_alpha()}if(this.__objectTransform!=null){this.__worldColorTransform.__copyFrom(this.__objectTransform.get_colorTransform())}else{this.__worldColorTransform.__identity()}this.__worldBlendMode=this.__blendMode;this.__worldShader=this.__shader;this.__worldScale9Grid=this.__scale9Grid}}if(updateChildren&&this.get_mask()!=null){this.get_mask().__update(transformOnly,true)}},__updateTransforms:function(overrideTransform){var overrided=overrideTransform!=null;var local=overrided?overrideTransform:this.__transform;if(this.__worldTransform==null){this.__worldTransform=new openfl_geom_Matrix}if(this.__renderTransform==null){this.__renderTransform=new openfl_geom_Matrix}var renderParent=this.__renderParent!=null?this.__renderParent:this.parent;if(!overrided&&this.parent!=null){var parentTransform=this.parent.__worldTransform;var target=this.__worldTransform;target.a=local.a*parentTransform.a+local.b*parentTransform.c;target.b=local.a*parentTransform.b+local.b*parentTransform.d;target.c=local.c*parentTransform.a+local.d*parentTransform.c;target.d=local.c*parentTransform.b+local.d*parentTransform.d;target.tx=local.tx*parentTransform.a+local.ty*parentTransform.c+parentTransform.tx;target.ty=local.tx*parentTransform.b+local.ty*parentTransform.d+parentTransform.ty}else{this.__worldTransform.copyFrom(local)}if(!overrided&&renderParent!=null){var parentTransform1=renderParent.__renderTransform;var target1=this.__renderTransform;target1.a=local.a*parentTransform1.a+local.b*parentTransform1.c;target1.b=local.a*parentTransform1.b+local.b*parentTransform1.d;target1.c=local.c*parentTransform1.a+local.d*parentTransform1.c;target1.d=local.c*parentTransform1.b+local.d*parentTransform1.d;target1.tx=local.tx*parentTransform1.a+local.ty*parentTransform1.c+parentTransform1.tx;target1.ty=local.tx*parentTransform1.b+local.ty*parentTransform1.d+parentTransform1.ty}else{this.__renderTransform.copyFrom(local)}if(this.__scrollRect!=null){var _this=this.__renderTransform;var px=-this.__scrollRect.x;var py=-this.__scrollRect.y;_this.tx=px*_this.a+py*_this.c+_this.tx;_this.ty=px*_this.b+py*_this.d+_this.ty}},get_alpha:function(){return this.__alpha},set_alpha:function(value){if(value>1){value=1}if(value<0){value=0}if(value!=this.__alpha&&!this.get_cacheAsBitmap()){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__alpha=value},set_blendMode:function(value){if(value==null){value=10}if(value!=this.__blendMode){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__blendMode=value},get_cacheAsBitmap:function(){if(this.__filters==null){return this.__cacheAsBitmap}else{return true}},set_cacheAsBitmap:function(value){if(value!=this.__cacheAsBitmap){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__cacheAsBitmap=value},get_filters:function(){if(this.__filters==null){return[]}else{return this.__filters.slice()}},set_filters:function(value){if(value!=null&&value.length>0){this.__filters=value;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}else if(this.__filters!=null){this.__filters=null;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return value},get_height:function(){var rect=openfl_geom_Rectangle.__pool.get();this.__getLocalBounds(rect);var height=rect.height;openfl_geom_Rectangle.__pool.release(rect);return height},set_height:function(value){var rect=openfl_geom_Rectangle.__pool.get();var matrix=openfl_geom_Matrix.__pool.get();matrix.identity();this.__getBounds(rect,matrix);if(value!=rect.height){this.set_scaleY(value/rect.height)}else{this.set_scaleY(1)}openfl_geom_Rectangle.__pool.release(rect);openfl_geom_Matrix.__pool.release(matrix);return value},get_loaderInfo:function(){if(this.stage!=null){return openfl__$internal_Lib.current.__loaderInfo}return null},get_mask:function(){return this.__mask},set_mask:function(value){if(value==this.__mask){return value}if(value!=this.__mask){this.__setTransformDirty();if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}if(this.__mask!=null){this.__mask.__isMask=false;this.__mask.__maskTarget=null;this.__mask.__setTransformDirty();var _this=this.__mask;if(!_this.__renderDirty){_this.__renderDirty=true;_this.__setParentRenderDirty()}}if(value!=null){value.__isMask=true;value.__maskTarget=this;value.__setWorldTransformInvalid()}if(this.__cacheBitmap!=null&&this.__cacheBitmap.get_mask()!=value){this.__cacheBitmap.set_mask(value)}return this.__mask=value},get_mouseX:function(){var mouseX=this.stage!=null?this.stage.__mouseX:openfl__$internal_Lib.current.stage.__mouseX;var mouseY=this.stage!=null?this.stage.__mouseY:openfl__$internal_Lib.current.stage.__mouseY;var _this=this.__getRenderTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){return-_this.tx}else{return 1/norm*(_this.c*(_this.ty-mouseY)+_this.d*(mouseX-_this.tx))}},get_mouseY:function(){var mouseX=this.stage!=null?this.stage.__mouseX:openfl__$internal_Lib.current.stage.__mouseX;var mouseY=this.stage!=null?this.stage.__mouseY:openfl__$internal_Lib.current.stage.__mouseY;var _this=this.__getRenderTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){return-_this.ty}else{return 1/norm*(_this.a*(mouseY-_this.ty)+_this.b*(_this.tx-mouseX))}},get_name:function(){return this.__name},set_name:function(value){return this.__name=value},get_rotation:function(){return this.__rotation},set_rotation:function(value){if(value!=this.__rotation){this.__rotation=value;var radians=this.__rotation*(Math.PI/180);this.__rotationSine=Math.sin(radians);this.__rotationCosine=Math.cos(radians);this.__transform.a=this.__rotationCosine*this.__scaleX;this.__transform.b=this.__rotationSine*this.__scaleX;this.__transform.c=-this.__rotationSine*this.__scaleY;this.__transform.d=this.__rotationCosine*this.__scaleY;this.__setTransformDirty()}return value},set_scale9Grid:function(value){if(value==null&&this.__scale9Grid==null){return value}if(value!=null&&this.__scale9Grid!=null&&this.__scale9Grid.equals(value)){return value}if(value!=null){if(this.__scale9Grid==null){this.__scale9Grid=new openfl_geom_Rectangle}this.__scale9Grid.copyFrom(value)}else{this.__scale9Grid=null}if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}return value},get_scaleX:function(){return this.__scaleX},set_scaleX:function(value){if(value!=this.__scaleX){this.__scaleX=value;if(this.__transform.b==0){if(value!=this.__transform.a){this.__setTransformDirty()}this.__transform.a=value}else{var a=this.__rotationCosine*value;var b=this.__rotationSine*value;if(this.__transform.a!=a||this.__transform.b!=b){this.__setTransformDirty()}this.__transform.a=a;this.__transform.b=b}}return value},get_scaleY:function(){return this.__scaleY},set_scaleY:function(value){if(value!=this.__scaleY){this.__scaleY=value;if(this.__transform.c==0){if(value!=this.__transform.d){this.__setTransformDirty()}this.__transform.d=value}else{var c=-this.__rotationSine*value;var d=this.__rotationCosine*value;if(this.__transform.d!=d||this.__transform.c!=c){this.__setTransformDirty()}this.__transform.c=c;this.__transform.d=d}}return value},get_transform:function(){if(this.__objectTransform==null){this.__objectTransform=new openfl_geom_Transform(this)}return this.__objectTransform},set_transform:function(value){if(value==null){throw new js__$Boot_HaxeError(new openfl_errors_TypeError("Parameter transform must be non-null."))}if(this.__objectTransform==null){this.__objectTransform=new openfl_geom_Transform(this)}this.__setTransformDirty();this.__objectTransform.set_matrix(value.get_matrix());if(!this.__objectTransform.get_colorTransform().__equals(value.get_colorTransform(),true)||!this.get_cacheAsBitmap()&&this.__objectTransform.get_colorTransform().alphaMultiplier!=value.get_colorTransform().alphaMultiplier){this.__objectTransform.get_colorTransform().__copyFrom(value.get_colorTransform());if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__objectTransform},get_visible:function(){return this.__visible},set_visible:function(value){if(value!=this.__visible){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__visible=value},get_width:function(){var rect=openfl_geom_Rectangle.__pool.get();this.__getLocalBounds(rect);var width=rect.width;openfl_geom_Rectangle.__pool.release(rect);return width},set_width:function(value){var rect=openfl_geom_Rectangle.__pool.get();var matrix=openfl_geom_Matrix.__pool.get();matrix.identity();this.__getBounds(rect,matrix);if(value!=rect.width){this.set_scaleX(value/rect.width)}else{this.set_scaleX(1)}openfl_geom_Rectangle.__pool.release(rect);openfl_geom_Matrix.__pool.release(matrix);return value},get_x:function(){return this.__transform.tx},set_x:function(value){if(value!=this.__transform.tx){this.__setTransformDirty()}return this.__transform.tx=value},get_y:function(){return this.__transform.ty},set_y:function(value){if(value!=this.__transform.ty){this.__setTransformDirty()}return this.__transform.ty=value},__class__:openfl_display_DisplayObject,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_width:"get_width",set_visible:"set_visible",get_visible:"get_visible",set_transform:"set_transform",get_transform:"get_transform",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_scale9Grid:"set_scale9Grid",set_rotation:"set_rotation",get_rotation:"get_rotation",set_name:"set_name",get_name:"get_name",get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",set_mask:"set_mask",get_mask:"get_mask",get_loaderInfo:"get_loaderInfo",set_height:"set_height",get_height:"get_height",set_filters:"set_filters",get_filters:"get_filters",set_cacheAsBitmap:"set_cacheAsBitmap",get_cacheAsBitmap:"get_cacheAsBitmap",set_blendMode:"set_blendMode",set_alpha:"set_alpha",get_alpha:"get_alpha"}});var openfl_display_InteractiveObject=function(){openfl_display_DisplayObject.call(this);this.doubleClickEnabled=false;this.mouseEnabled=true;this.needsSoftKeyboard=false;this.__tabEnabled=null;this.__tabIndex=-1};$hxClasses["openfl.display.InteractiveObject"]=openfl_display_InteractiveObject;openfl_display_InteractiveObject.__name__="openfl.display.InteractiveObject";openfl_display_InteractiveObject.__super__=openfl_display_DisplayObject;openfl_display_InteractiveObject.prototype=$extend(openfl_display_DisplayObject.prototype,{doubleClickEnabled:null,mouseEnabled:null,needsSoftKeyboard:null,__tabEnabled:null,__tabIndex:null,__allowMouseFocus:function(){return this.get_tabEnabled()},__getInteractive:function(stack){if(stack!=null){stack.push(this);if(this.parent!=null){this.parent.__getInteractive(stack)}}return true},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask||interactiveOnly&&!this.mouseEnabled){return false}return openfl_display_DisplayObject.prototype.__hitTest.call(this,x,y,shapeFlag,stack,interactiveOnly,hitObject)},__tabTest:function(stack){if(this.get_tabEnabled()){stack.push(this)}},get_tabEnabled:function(){if(this.__tabEnabled==true){return true}else{return false}},get_tabIndex:function(){return this.__tabIndex},__class__:openfl_display_InteractiveObject,__properties__:$extend(openfl_display_DisplayObject.prototype.__properties__,{get_tabIndex:"get_tabIndex",get_tabEnabled:"get_tabEnabled"})});var openfl_display_DisplayObjectContainer=function(){openfl_display_InteractiveObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.DISPLAY_OBJECT_CONTAINER;this.mouseChildren=true;this.__tabChildren=true;this.__children=[];this.__removedChildren=openfl__$Vector_Vector_$Impl_$.toObjectVector(null)};$hxClasses["openfl.display.DisplayObjectContainer"]=openfl_display_DisplayObjectContainer;openfl_display_DisplayObjectContainer.__name__="openfl.display.DisplayObjectContainer";openfl_display_DisplayObjectContainer.__super__=openfl_display_InteractiveObject;openfl_display_DisplayObjectContainer.prototype=$extend(openfl_display_InteractiveObject.prototype,{mouseChildren:null,__removedChildren:null,__tabChildren:null,addChild:function(child){return this.addChildAt(child,this.get_numChildren())},addChildAt:function(child,index){if(child==null){var error=new openfl_errors_TypeError("Error #2007: Parameter child must be non-null.");error.errorID=2007;throw new js__$Boot_HaxeError(error)}else if(child.stage==child){var error1=new openfl_errors_ArgumentError("Error #3783: A Stage object cannot be added as the child of another object.");error1.errorID=3783;throw new js__$Boot_HaxeError(error1)}if(index>this.__children.length||index<0){throw new js__$Boot_HaxeError("Invalid index position "+index)}if(child.parent==this){if(this.__children[index]!=child){HxOverrides.remove(this.__children,child);this.__children.splice(index,0,child);if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}}else{if(child.parent!=null){child.parent.removeChild(child)}this.__children.splice(index,0,child);child.parent=this;var addedToStage=this.stage!=null&&child.stage==null;if(addedToStage){this.__setStageReference(this.stage)}child.__setTransformDirty();if(!child.__renderDirty){child.__renderDirty=true;child.__setParentRenderDirty()}if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}var event=openfl_events_Event.__pool.get();event.type="added";event.bubbles=true;event.target=child;child.__dispatchWithCapture(event);openfl_events_Event.__pool.release(event);if(addedToStage){event=new openfl_events_Event("addedToStage",false,false);child.__dispatchWithCapture(event);child.__dispatchChildren(event)}}return child},getChildAt:function(index){if(index>=0&&index<this.__children.length){return this.__children[index]}return null},removeChild:function(child){if(child!=null&&child.parent==this){child.__setTransformDirty();if(!child.__renderDirty){child.__renderDirty=true;child.__setParentRenderDirty()}if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}child.__dispatchWithCapture(new openfl_events_Event("removed",true));if(this.stage!=null){if(child.stage!=null&&this.stage.get_focus()==child){this.stage.set_focus(null)}var event=new openfl_events_Event("removedFromStage",false,false);child.__dispatchWithCapture(event);child.__dispatchChildren(event);child.__setStageReference(null)}child.parent=null;HxOverrides.remove(this.__children,child);this.__removedChildren.push(child);child.__setTransformDirty()}return child},__cleanup:function(){openfl_display_InteractiveObject.prototype.__cleanup.call(this);var _g=0;var _g1=this.__children;while(_g<_g1.length)_g1[_g++].__cleanup();var orphan=this.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}this.__removedChildren.set_length(0)},__dispatchChildren:function(event){if(this.__children!=null){var _g=0;var _g1=this.__children;while(_g<_g1.length){var child=_g1[_g];++_g;event.target=child;if(!child.__dispatchWithCapture(event)){break}child.__dispatchChildren(event)}}},__enterFrame:function(deltaTime){var _g=0;var _g1=this.__children;while(_g<_g1.length)_g1[_g++].__enterFrame(deltaTime)},__getBounds:function(rect,matrix){openfl_display_InteractiveObject.prototype.__getBounds.call(this,rect,matrix);if(this.__children.length==0){return}var childWorldTransform=openfl_geom_Matrix.__pool.get();var _g=0;var _g1=this.__children;while(_g<_g1.length){var child=_g1[_g];++_g;if(child.__scaleX==0||child.__scaleY==0){continue}var local=child.__transform;childWorldTransform.a=local.a*matrix.a+local.b*matrix.c;childWorldTransform.b=local.a*matrix.b+local.b*matrix.d;childWorldTransform.c=local.c*matrix.a+local.d*matrix.c;childWorldTransform.d=local.c*matrix.b+local.d*matrix.d;childWorldTransform.tx=local.tx*matrix.a+local.ty*matrix.c+matrix.tx;childWorldTransform.ty=local.tx*matrix.b+local.ty*matrix.d+matrix.ty;child.__getBounds(rect,childWorldTransform)}openfl_geom_Matrix.__pool.release(childWorldTransform)},__getFilterBounds:function(rect,matrix){openfl_display_InteractiveObject.prototype.__getFilterBounds.call(this,rect,matrix);if(this.__scrollRect!=null){return}if(this.__children.length==0){return}var childWorldTransform=openfl_geom_Matrix.__pool.get();var _g=0;var _g1=this.__children;while(_g<_g1.length){var child=_g1[_g];++_g;if(child.__scaleX==0||child.__scaleY==0||child.__isMask){continue}var local=child.__transform;childWorldTransform.a=local.a*matrix.a+local.b*matrix.c;childWorldTransform.b=local.a*matrix.b+local.b*matrix.d;childWorldTransform.c=local.c*matrix.a+local.d*matrix.c;childWorldTransform.d=local.c*matrix.b+local.d*matrix.d;childWorldTransform.tx=local.tx*matrix.a+local.ty*matrix.c+matrix.tx;childWorldTransform.ty=local.tx*matrix.b+local.ty*matrix.d+matrix.ty;child.__getFilterBounds(rect,childWorldTransform)}openfl_geom_Matrix.__pool.release(childWorldTransform)},__getRenderBounds:function(rect,matrix){if(this.__scrollRect!=null){openfl_display_InteractiveObject.prototype.__getRenderBounds.call(this,rect,matrix);return}else{openfl_display_InteractiveObject.prototype.__getBounds.call(this,rect,matrix)}if(this.__children.length==0){return}var childWorldTransform=openfl_geom_Matrix.__pool.get();var _g=0;var _g1=this.__children;while(_g<_g1.length){var child=_g1[_g];++_g;if(child.__scaleX==0||child.__scaleY==0||child.__isMask){continue}var local=child.__transform;childWorldTransform.a=local.a*matrix.a+local.b*matrix.c;childWorldTransform.b=local.a*matrix.b+local.b*matrix.d;childWorldTransform.c=local.c*matrix.a+local.d*matrix.c;childWorldTransform.d=local.c*matrix.b+local.d*matrix.d;childWorldTransform.tx=local.tx*matrix.a+local.ty*matrix.c+matrix.tx;childWorldTransform.ty=local.tx*matrix.b+local.ty*matrix.d+matrix.ty;child.__getRenderBounds(rect,childWorldTransform)}openfl_geom_Matrix.__pool.release(childWorldTransform)},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask||interactiveOnly&&!this.mouseEnabled&&!this.mouseChildren){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}if(this.__scrollRect!=null){var point=openfl_geom_Point.__pool.get();point.setTo(x,y);var _this=this.__getRenderTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){point.x=-_this.tx;point.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-point.y)+_this.d*(point.x-_this.tx));point.y=1/norm*(_this.a*(point.y-_this.ty)+_this.b*(_this.tx-point.x));point.x=px}if(!this.__scrollRect.containsPoint(point)){openfl_geom_Point.__pool.release(point);return false}openfl_geom_Point.__pool.release(point)}var i=this.__children.length;if(interactiveOnly){if(stack==null||!this.mouseChildren){while(--i>=0)if(this.__children[i].__hitTest(x,y,shapeFlag,null,true,this.__children[i])){if(stack!=null){stack.push(hitObject)}return true}}else if(stack!=null){var length=stack.length;var interactive=false;var hitTest=false;while(--i>=0){interactive=this.__children[i].__getInteractive(null);if(interactive||this.mouseEnabled&&!hitTest){if(this.__children[i].__hitTest(x,y,shapeFlag,stack,true,this.__children[i])){hitTest=true;if(interactive&&stack.length>length){break}}}}if(hitTest){stack.splice(length,0,hitObject);return true}}}else{var hitTest1=false;while(--i>=0)if(this.__children[i].__hitTest(x,y,shapeFlag,stack,false,this.__children[i])){hitTest1=true;if(stack==null){break}}return hitTest1}return false},__hitTestMask:function(x,y){var i=this.__children.length;while(--i>=0)if(this.__children[i].__hitTestMask(x,y)){return true}return false},__setStageReference:function(stage){openfl_display_InteractiveObject.prototype.__setStageReference.call(this,stage);if(this.__children!=null){var _g=0;var _g1=this.__children;while(_g<_g1.length)_g1[_g++].__setStageReference(stage)}},__setWorldTransformInvalid:function(){if(!this.__worldTransformInvalid){this.__worldTransformInvalid=true;if(this.__children!=null){var _g=0;var _g1=this.__children;while(_g<_g1.length)_g1[_g++].__setWorldTransformInvalid()}}},__tabTest:function(stack){openfl_display_InteractiveObject.prototype.__tabTest.call(this,stack);if(!this.get_tabChildren()){return}var interactive=false;var interactiveObject=null;var _g=0;var _g1=this.__children;while(_g<_g1.length){var child=_g1[_g];++_g;interactive=child.__getInteractive(null);if(interactive){interactiveObject=child;interactiveObject.__tabTest(stack)}}},__update:function(transformOnly,updateChildren){openfl_display_InteractiveObject.prototype.__update.call(this,transformOnly,updateChildren);if(updateChildren){var _g=0;var _g1=this.__children;while(_g<_g1.length)_g1[_g++].__update(transformOnly,true)}},get_numChildren:function(){return this.__children.length},get_tabChildren:function(){return this.__tabChildren},__class__:openfl_display_DisplayObjectContainer,__properties__:$extend(openfl_display_InteractiveObject.prototype.__properties__,{get_tabChildren:"get_tabChildren",get_numChildren:"get_numChildren"})});var openfl_display_Sprite=function(){openfl_display_DisplayObjectContainer.call(this);this.__buttonMode=false;this.useHandCursor=true};$hxClasses["openfl.display.Sprite"]=openfl_display_Sprite;openfl_display_Sprite.__name__="openfl.display.Sprite";openfl_display_Sprite.__super__=openfl_display_DisplayObjectContainer;openfl_display_Sprite.prototype=$extend(openfl_display_DisplayObjectContainer.prototype,{dropTarget:null,hitArea:null,useHandCursor:null,__buttonMode:null,startDrag:function(lockCenter,bounds){if(lockCenter==null){lockCenter=false}if(this.stage!=null){this.stage.__startDrag(this,lockCenter,bounds)}},stopDrag:function(){if(this.stage!=null){this.stage.__stopDrag(this)}},__getCursor:function(){if(this.__buttonMode&&this.useHandCursor){return"button"}else{return null}},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(interactiveOnly&&!this.mouseEnabled&&!this.mouseChildren){return false}if(!hitObject.get_visible()||this.__isMask){return this.__hitTestHitArea(x,y,shapeFlag,stack,interactiveOnly,hitObject)}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return this.__hitTestHitArea(x,y,shapeFlag,stack,interactiveOnly,hitObject)}if(this.__scrollRect!=null){var point=openfl_geom_Point.__pool.get();point.setTo(x,y);var _this=this.__getRenderTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){point.x=-_this.tx;point.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-point.y)+_this.d*(point.x-_this.tx));point.y=1/norm*(_this.a*(point.y-_this.ty)+_this.b*(_this.tx-point.x));point.x=px}if(!this.__scrollRect.containsPoint(point)){openfl_geom_Point.__pool.release(point);return this.__hitTestHitArea(x,y,shapeFlag,stack,true,hitObject)}openfl_geom_Point.__pool.release(point)}if(openfl_display_DisplayObjectContainer.prototype.__hitTest.call(this,x,y,shapeFlag,stack,interactiveOnly,hitObject)){if(stack!=null){return interactiveOnly}else{return true}}else if(this.hitArea==null&&this.__graphics!=null&&this.__graphics.__hitTest(x,y,shapeFlag,this.__getRenderTransform())){if(stack!=null&&(!interactiveOnly||this.mouseEnabled)){stack.push(hitObject)}return true}return this.__hitTestHitArea(x,y,shapeFlag,stack,interactiveOnly,hitObject)},__hitTestHitArea:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(this.hitArea!=null){if(!this.hitArea.mouseEnabled){this.hitArea.mouseEnabled=true;var hitTest=this.hitArea.__hitTest(x,y,shapeFlag,null,true,hitObject);this.hitArea.mouseEnabled=false;if(stack!=null&&hitTest){stack[stack.length]=hitObject}return hitTest}}return false},__hitTestMask:function(x,y){if(openfl_display_DisplayObjectContainer.prototype.__hitTestMask.call(this,x,y)){return true}else if(this.__graphics!=null&&this.__graphics.__hitTest(x,y,true,this.__getRenderTransform())){return true}return false},get_graphics:function(){if(this.__graphics==null){this.__graphics=new openfl_display_Graphics(this)}return this.__graphics},get_tabEnabled:function(){if(this.__tabEnabled==null){return this.__buttonMode}else{return this.__tabEnabled}},get_buttonMode:function(){return this.__buttonMode},set_buttonMode:function(value){return this.__buttonMode=value},__class__:openfl_display_Sprite,__properties__:$extend(openfl_display_DisplayObjectContainer.prototype.__properties__,{get_graphics:"get_graphics",set_buttonMode:"set_buttonMode",get_buttonMode:"get_buttonMode"})});var Main=function(){openfl_display_Sprite.call(this);this.checkMobile();window.addEventListener("keydown",function(e){if([32,37,38,39,40,73].indexOf(e.keyCode)>-1){e.preventDefault()}},false);this.managerCanvas=new openfl_display_Sprite;this.addChild(this.managerCanvas);engine_scenemanager_Manager.init(this.managerCanvas,0,0);project_data_UserData.setUp();engine_scenemanager_Manager.defaultTransition=engine_scenemanager_bases_TransitionBase;project_game_util_GameTiles.Initialize();engine_scenemanager_Manager.changeScene(project_scenes_DisclaimerScene);this.addEventListener("click",$bind(this,this.enableSounds))};$hxClasses["Main"]=Main;Main.__name__="Main";Main.__super__=openfl_display_Sprite;Main.prototype=$extend(openfl_display_Sprite.prototype,{managerCanvas:null,enableSounds:function(e){openfl_utils_Assets.getSound("audio/silence.mp3").play();this.removeEventListener("click",$bind(this,this.enableSounds))},checkMobile:function(){Main.isMobile=openfl_ui_Multitouch.get_supportsTouchEvents();openfl_ui_Multitouch.inputMode=2},__class__:Main});var DocumentClass=function(current){current.addChild(this);Main.call(this);this.dispatchEvent(new openfl_events_Event("addedToStage",false,false))};$hxClasses["DocumentClass"]=DocumentClass;DocumentClass.__name__="DocumentClass";DocumentClass.__super__=Main;DocumentClass.prototype=$extend(Main.prototype,{__class__:DocumentClass});var openfl__$internal_renderer_BitmapDataPool=function(lifetime,context3D){if(lifetime==null){lifetime=2}this.__lifetime=lifetime;this.__context=context3D;this.__bitmapData=new haxe_ds_IntMap;this.__bitmapDataAge=new haxe_ds_ObjectMap;this.__bitmapDataList=[]};$hxClasses["openfl._internal.renderer.BitmapDataPool"]=openfl__$internal_renderer_BitmapDataPool;openfl__$internal_renderer_BitmapDataPool.__name__="openfl._internal.renderer.BitmapDataPool";openfl__$internal_renderer_BitmapDataPool.prototype={__bitmapData:null,__bitmapDataAge:null,__bitmapDataList:null,__context:null,__lifetime:null,cleanup:function(){var _g=0;var _g1=this.__bitmapDataList;while(_g<_g1.length){var bitmapData=_g1[_g];++_g;var age=this.__bitmapDataAge.h[bitmapData.__id__];if(age>=this.__lifetime){this.__bitmapData.h[bitmapData.width].h[bitmapData.height].remove(bitmapData);bitmapData.dispose();this.__bitmapDataAge.remove(bitmapData);HxOverrides.remove(this.__bitmapDataList,bitmapData)}else if(age>-1){this.__bitmapDataAge.set(bitmapData,age+1)}}},get:function(width,height){var heightMap=this.__bitmapData.h[width];if(heightMap==null){var v=new haxe_ds_IntMap;this.__bitmapData.h[width]=v;heightMap=v}var pool=heightMap.h[height];if(pool==null){var f=$bind(this,this.__createBitmapData);var width1=width;var height1=height;var v1=new lime_utils_ObjectPool(function(){return f(width1,height1)},$bind(this,this.__cleanBitmapData));heightMap.h[height]=v1;pool=v1}var bitmapData=pool.get();if(bitmapData==null){return null}if(this.__bitmapDataAge.h.__keys__[bitmapData.__id__]==null){this.__bitmapDataList.push(bitmapData)}this.__bitmapDataAge.set(bitmapData,-1);return bitmapData},release:function(bitmapData){if(this.__bitmapDataAge.h.__keys__[bitmapData.__id__]!=null){this.__bitmapData.h[bitmapData.width].h[bitmapData.height].release(bitmapData);this.__bitmapDataAge.set(bitmapData,0)}},__cleanBitmapData:function(bitmapData){bitmapData.fillRect(bitmapData.rect,0)},__createBitmapData:function(width,height){if(this.__context!=null){return openfl_display_BitmapData.fromTexture(this.__context.createRectangleTexture(width,height,1,true))}else{return new openfl_display_BitmapData(width,height,true,0)}},__class__:openfl__$internal_renderer_BitmapDataPool};var lime_math_Vector2=function(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y};$hxClasses["lime.math.Vector2"]=lime_math_Vector2;lime_math_Vector2.__name__="lime.math.Vector2";lime_math_Vector2.prototype={x:null,y:null,offset:function(dx,dy){this.x+=dx;this.y+=dy},__toFlashPoint:function(){return null},__class__:lime_math_Vector2};var openfl_display_BitmapData=function(width,height,transparent,fillColor){if(fillColor==null){fillColor=-1}if(transparent==null){transparent=true}this.transparent=transparent;width=width==null?0:width;height=height==null?0:height;width=width<0?0:width;height=height<0?0:height;this.width=width;this.height=height;this.rect=new openfl_geom_Rectangle(0,0,width,height);this.__textureWidth=width;this.__textureHeight=height;if(width>0&&height>0){if(transparent){if((fillColor&-16777216)==0){fillColor=0}}else{fillColor=-16777216|fillColor&16777215}fillColor=fillColor<<8|fillColor>>>24&255;this.image=new lime_graphics_Image(null,0,0,width,height,fillColor);this.image.set_transparent(transparent);this.__isValid=true;this.readable=true}this.__renderTransform=new openfl_geom_Matrix;this.__worldAlpha=1;this.__worldTransform=new openfl_geom_Matrix;this.__worldColorTransform=new openfl_geom_ColorTransform;this.__renderable=true};$hxClasses["openfl.display.BitmapData"]=openfl_display_BitmapData;openfl_display_BitmapData.__name__="openfl.display.BitmapData";openfl_display_BitmapData.__interfaces__=[openfl_display_IBitmapDrawable];openfl_display_BitmapData.fromCanvas=function(canvas,transparent){if(transparent==null){transparent=true}if(canvas==null){return null}var bitmapData=new openfl_display_BitmapData(0,0,transparent,0);bitmapData.__fromImage(lime_graphics_Image.fromCanvas(canvas));bitmapData.image.set_transparent(transparent);return bitmapData};openfl_display_BitmapData.fromImage=function(image,transparent){if(transparent==null){transparent=true}if(image==null||image.buffer==null){return null}var bitmapData=new openfl_display_BitmapData(0,0,transparent,0);bitmapData.__fromImage(image);bitmapData.image.set_transparent(transparent);if(bitmapData.image!=null){return bitmapData}else{return null}};openfl_display_BitmapData.fromTexture=function(texture){if(texture==null){return null}var bitmapData=new openfl_display_BitmapData(texture.__width,texture.__height,true,0);bitmapData.readable=false;bitmapData.__texture=texture;bitmapData.__textureContext=texture.__textureContext;bitmapData.image=null;return bitmapData};openfl_display_BitmapData.prototype={height:null,image:null,readable:null,rect:null,transparent:null,width:null,__framebuffer:null,__framebufferContext:null,__indexBuffer:null,__indexBufferContext:null,__indexBufferData:null,__indexBufferGrid:null,__isValid:null,__mask:null,__renderable:null,__renderTransform:null,__scrollRect:null,__surface:null,__texture:null,__textureContext:null,__textureHeight:null,__textureVersion:null,__textureWidth:null,__type:null,__uvRect:null,__vertexBuffer:null,__vertexBufferContext:null,__vertexBufferData:null,__vertexBufferGrid:null,__vertexBufferHeight:null,__vertexBufferScaleX:null,__vertexBufferScaleY:null,__vertexBufferWidth:null,__worldAlpha:null,__worldColorTransform:null,__worldTransform:null,clone:function(){var bitmapData;if(!this.__isValid){bitmapData=new openfl_display_BitmapData(this.width,this.height,this.transparent,0)}else if(!this.readable&&this.image==null){bitmapData=new openfl_display_BitmapData(0,0,this.transparent,0);bitmapData.width=this.width;bitmapData.height=this.height;bitmapData.__textureWidth=this.__textureWidth;bitmapData.__textureHeight=this.__textureHeight;bitmapData.rect.copyFrom(this.rect);bitmapData.__framebuffer=this.__framebuffer;bitmapData.__framebufferContext=this.__framebufferContext;bitmapData.__texture=this.__texture;bitmapData.__textureContext=this.__textureContext;bitmapData.__isValid=true}else{bitmapData=openfl_display_BitmapData.fromImage(this.image.clone(),this.transparent)}bitmapData.__worldTransform.copyFrom(this.__worldTransform);bitmapData.__renderTransform.copyFrom(this.__renderTransform);return bitmapData},colorTransform:function(rect,colorTransform){if(!this.readable){return}this.image.colorTransform(rect.__toLimeRectangle(),colorTransform.__toLimeColorMatrix())},copyChannel:function(sourceBitmapData,sourceRect,destPoint,sourceChannel,destChannel){if(!this.readable){return}var sourceChannel1;switch(sourceChannel){case 1:sourceChannel1=lime_graphics_ImageChannel.RED;break;case 2:sourceChannel1=lime_graphics_ImageChannel.GREEN;break;case 4:sourceChannel1=lime_graphics_ImageChannel.BLUE;break;case 8:sourceChannel1=lime_graphics_ImageChannel.ALPHA;break;default:return}var destChannel1;switch(destChannel){case 1:destChannel1=lime_graphics_ImageChannel.RED;break;case 2:destChannel1=lime_graphics_ImageChannel.GREEN;break;case 4:destChannel1=lime_graphics_ImageChannel.BLUE;break;case 8:destChannel1=lime_graphics_ImageChannel.ALPHA;break;default:return}this.image.copyChannel(sourceBitmapData.image,sourceRect.__toLimeRectangle(),destPoint.__toLimeVector2(),sourceChannel1,destChannel1)},copyPixels:function(sourceBitmapData,sourceRect,destPoint,alphaBitmapData,alphaPoint,mergeAlpha){if(mergeAlpha==null){mergeAlpha=false}if(!this.readable||sourceBitmapData==null){return}if(alphaBitmapData!=null&&alphaBitmapData.transparent&&(alphaBitmapData!=sourceBitmapData||alphaPoint!=null&&(alphaPoint.x!=0||alphaPoint.y!=0))){var point=openfl_geom_Point.__pool.get();var rect=openfl_geom_Rectangle.__pool.get();rect.copyFrom(sourceBitmapData.rect);rect.__contract(sourceRect.x,sourceRect.y,sourceRect.width,sourceRect.height);var copy=openfl_display_BitmapData.__pool.get(rect.width|0,rect.height|0);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(copy.image);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(sourceBitmapData.image);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(alphaBitmapData.image);if(alphaPoint!=null){rect.x+=alphaPoint.x;rect.y+=alphaPoint.y}copy.image.buffer.__srcContext.globalCompositeOperation="source-over";copy.image.buffer.__srcContext.drawImage(alphaBitmapData.image.buffer.get_src(),rect.x+sourceBitmapData.image.offsetX|0,rect.y+sourceBitmapData.image.offsetY|0,rect.width|0,rect.height|0,point.x+this.image.offsetX|0,point.y+this.image.offsetY|0,rect.width|0,rect.height|0);if(alphaPoint!=null){rect.x-=alphaPoint.x;rect.y-=alphaPoint.y}copy.image.buffer.__srcContext.globalCompositeOperation="source-in";copy.image.buffer.__srcContext.drawImage(sourceBitmapData.image.buffer.get_src(),rect.x+sourceBitmapData.image.offsetX|0,rect.y+sourceBitmapData.image.offsetY|0,rect.width|0,rect.height|0,point.x+this.image.offsetX|0,point.y+this.image.offsetY|0,rect.width|0,rect.height|0);this.image.copyPixels(copy.image,copy.rect.__toLimeRectangle(),destPoint.__toLimeVector2(),null,null,mergeAlpha);openfl_display_BitmapData.__pool.release(copy);openfl_geom_Rectangle.__pool.release(rect);openfl_geom_Point.__pool.release(point);return}if(alphaPoint!=null){openfl_display_BitmapData.__tempVector.x=alphaPoint.x;openfl_display_BitmapData.__tempVector.y=alphaPoint.y}this.image.copyPixels(sourceBitmapData.image,sourceRect.__toLimeRectangle(),destPoint.__toLimeVector2(),alphaBitmapData!=null?alphaBitmapData.image:null,alphaPoint!=null?openfl_display_BitmapData.__tempVector:null,mergeAlpha)},dispose:function(){this.image=null;this.width=0;this.height=0;this.rect=null;this.__isValid=false;this.readable=false;this.__surface=null;this.__vertexBuffer=null;this.__framebuffer=null;this.__framebufferContext=null;this.__texture=null;this.__textureContext=null},draw:function(source,matrix,colorTransform,blendMode,clipRect,smoothing){if(smoothing==null){smoothing=false}if(source==null){return}source.__update(false,true);var transform=openfl_geom_Matrix.__pool.get();transform.copyFrom(source.__renderTransform);transform.invert();if(matrix!=null){transform.concat(matrix)}var _colorTransform=new openfl_geom_ColorTransform;_colorTransform.__copyFrom(source.__worldColorTransform);_colorTransform.__invert();if(!this.readable&&this.__texture!=null&&openfl_display_BitmapData.__hardwareRenderer!=null){if(this.__textureContext==null){this.__textureContext=lime_app_Application.current.__window.context}if(colorTransform!=null){_colorTransform.__combine(colorTransform)}openfl_display_BitmapData.__hardwareRenderer.__allowSmoothing=smoothing;openfl_display_BitmapData.__hardwareRenderer.__overrideBlendMode=blendMode;openfl_display_BitmapData.__hardwareRenderer.__worldTransform=transform;openfl_display_BitmapData.__hardwareRenderer.__worldAlpha=1/source.__worldAlpha;openfl_display_BitmapData.__hardwareRenderer.__worldColorTransform=_colorTransform;openfl_display_BitmapData.__hardwareRenderer.__resize(this.width,this.height);openfl_display_BitmapData.__hardwareRenderer.__drawBitmapData(this,source,clipRect)}else{if(colorTransform!=null){var bounds=openfl_geom_Rectangle.__pool.get();var boundsMatrix=openfl_geom_Matrix.__pool.get();source.__getBounds(bounds,boundsMatrix);var width=Math.ceil(bounds.width);var height=Math.ceil(bounds.height);boundsMatrix.tx=-bounds.x;boundsMatrix.ty=-bounds.y;var copy=new openfl_display_BitmapData(width,height,true,0);copy.draw(source,boundsMatrix);copy.colorTransform(copy.rect,colorTransform);copy.__renderTransform.identity();copy.__renderTransform.tx=bounds.x;copy.__renderTransform.ty=bounds.y;copy.__renderTransform.concat(source.__renderTransform);copy.__worldAlpha=source.__worldAlpha;copy.__worldColorTransform.__copyFrom(source.__worldColorTransform);source=copy;openfl_geom_Rectangle.__pool.release(bounds);openfl_geom_Matrix.__pool.release(boundsMatrix)}if(openfl_display_BitmapData.__softwareRenderer==null){openfl_display_BitmapData.__softwareRenderer=new openfl__$internal_renderer_canvas_CanvasRenderer(null)}lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(this.image);var renderer=openfl_display_BitmapData.__softwareRenderer;renderer.context=this.image.buffer.__srcContext;renderer.__allowSmoothing=smoothing;renderer.__overrideBlendMode=blendMode;renderer.__worldTransform=transform;renderer.__worldAlpha=1/source.__worldAlpha;renderer.__worldColorTransform=_colorTransform;renderer.__drawBitmapData(this,source,clipRect)}openfl_geom_Matrix.__pool.release(transform)},fillRect:function(rect,color){if(rect==null){return}if(this.transparent&&(color&-16777216)==0){color=0}if(!this.readable&&this.__texture!=null&&openfl_display_BitmapData.__hardwareRenderer!=null){openfl_display_BitmapData.__hardwareRenderer.__fillRect(this,rect,color)}else if(this.readable){this.image.fillRect(rect.__toLimeRectangle(),color,1)}},getIndexBuffer:function(context,scale9Grid){if(this.__indexBuffer==null||this.__indexBufferContext!=context.__context||scale9Grid!=null&&this.__indexBufferGrid==null||this.__indexBufferGrid!=null&&!this.__indexBufferGrid.equals(scale9Grid)){this.__indexBufferContext=context.__context;this.__indexBuffer=null;if(scale9Grid!=null){if(this.__indexBufferGrid==null){this.__indexBufferGrid=new openfl_geom_Rectangle}this.__indexBufferGrid.copyFrom(scale9Grid);var centerX=scale9Grid.width;var centerY=scale9Grid.height;if(centerX!=0&&centerY!=0){this.__indexBufferData=new Uint16Array(54);this.__indexBufferData[0]=0;this.__indexBufferData[1]=1;this.__indexBufferData[2]=2;this.__indexBufferData[3]=2;this.__indexBufferData[4]=1;this.__indexBufferData[5]=3;this.__indexBufferData[6]=4;this.__indexBufferData[7]=5;this.__indexBufferData[8]=6;this.__indexBufferData[9]=6;this.__indexBufferData[10]=5;this.__indexBufferData[11]=7;this.__indexBufferData[12]=8;this.__indexBufferData[13]=9;this.__indexBufferData[14]=10;this.__indexBufferData[15]=10;this.__indexBufferData[16]=9;this.__indexBufferData[17]=11;this.__indexBufferData[18]=12;this.__indexBufferData[19]=13;this.__indexBufferData[20]=14;this.__indexBufferData[21]=14;this.__indexBufferData[22]=13;this.__indexBufferData[23]=15;this.__indexBufferData[24]=16;this.__indexBufferData[25]=18;this.__indexBufferData[26]=17;this.__indexBufferData[27]=17;this.__indexBufferData[28]=18;this.__indexBufferData[29]=19;this.__indexBufferData[30]=20;this.__indexBufferData[31]=21;this.__indexBufferData[32]=22;this.__indexBufferData[33]=22;this.__indexBufferData[34]=21;this.__indexBufferData[35]=23;this.__indexBufferData[36]=24;this.__indexBufferData[37]=25;this.__indexBufferData[38]=26;this.__indexBufferData[39]=26;this.__indexBufferData[40]=25;this.__indexBufferData[41]=27;this.__indexBufferData[42]=28;this.__indexBufferData[43]=29;this.__indexBufferData[44]=30;this.__indexBufferData[45]=30;this.__indexBufferData[46]=29;this.__indexBufferData[47]=31;this.__indexBufferData[48]=32;this.__indexBufferData[49]=33;this.__indexBufferData[50]=34;this.__indexBufferData[51]=34;this.__indexBufferData[52]=33;this.__indexBufferData[53]=35;this.__indexBuffer=context.createIndexBuffer(54)}else if(centerX==0&&centerY!=0){this.__indexBufferData=new Uint16Array(18);this.__indexBufferData[0]=0;this.__indexBufferData[1]=1;this.__indexBufferData[2]=2;this.__indexBufferData[3]=2;this.__indexBufferData[4]=1;this.__indexBufferData[5]=3;this.__indexBufferData[6]=4;this.__indexBufferData[7]=5;this.__indexBufferData[8]=0;this.__indexBufferData[9]=0;this.__indexBufferData[10]=5;this.__indexBufferData[11]=1;this.__indexBufferData[12]=6;this.__indexBufferData[13]=7;this.__indexBufferData[14]=4;this.__indexBufferData[15]=4;this.__indexBufferData[16]=7;this.__indexBufferData[17]=5;this.__indexBuffer=context.createIndexBuffer(18)}else if(centerX!=0&&centerY==0){this.__indexBufferData=new Uint16Array(18);this.__indexBufferData[0]=0;this.__indexBufferData[1]=1;this.__indexBufferData[2]=2;this.__indexBufferData[3]=2;this.__indexBufferData[4]=1;this.__indexBufferData[5]=3;this.__indexBufferData[6]=4;this.__indexBufferData[7]=0;this.__indexBufferData[8]=5;this.__indexBufferData[9]=5;this.__indexBufferData[10]=0;this.__indexBufferData[11]=2;this.__indexBufferData[12]=6;this.__indexBufferData[13]=4;this.__indexBufferData[14]=7;this.__indexBufferData[15]=7;this.__indexBufferData[16]=4;this.__indexBufferData[17]=5;this.__indexBuffer=context.createIndexBuffer(18)}}else{this.__indexBufferGrid=null}if(this.__indexBuffer==null){this.__indexBufferData=new Uint16Array(6);this.__indexBufferData[0]=0;this.__indexBufferData[1]=1;this.__indexBufferData[2]=2;this.__indexBufferData[3]=2;this.__indexBufferData[4]=1;this.__indexBufferData[5]=3;this.__indexBuffer=context.createIndexBuffer(6)}this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)}return this.__indexBuffer},getVertexBuffer:function(context,scale9Grid,targetObject){if(this.__vertexBuffer==null||this.__vertexBufferContext!=context.__context||scale9Grid!=null&&this.__vertexBufferGrid==null||this.__vertexBufferGrid!=null&&!this.__vertexBufferGrid.equals(scale9Grid)||targetObject!=null&&(this.__vertexBufferWidth!=targetObject.get_width()||this.__vertexBufferHeight!=targetObject.get_height()||this.__vertexBufferScaleX!=targetObject.get_scaleX()||this.__vertexBufferScaleY!=targetObject.get_scaleY())){this.__uvRect=new openfl_geom_Rectangle(0,0,this.width,this.height);this.__vertexBufferContext=context.__context;this.__vertexBuffer=null;if(scale9Grid!=null&&targetObject!=null){if(this.__vertexBufferGrid==null){this.__vertexBufferGrid=new openfl_geom_Rectangle}this.__vertexBufferGrid.copyFrom(scale9Grid);this.__vertexBufferWidth=targetObject.get_width();this.__vertexBufferHeight=targetObject.get_height();this.__vertexBufferScaleX=targetObject.get_scaleX();this.__vertexBufferScaleY=targetObject.get_scaleY();var centerX=scale9Grid.width;var centerY=scale9Grid.height;if(centerX!=0&&centerY!=0){this.__vertexBufferData=new Float32Array(504);var left=scale9Grid.x;var top=scale9Grid.y;var uvLeft=left/this.__vertexBufferWidth;var uvTop=top/this.__vertexBufferHeight;var uvCenterX=scale9Grid.width/this.__vertexBufferWidth;var uvCenterY=scale9Grid.height/this.__vertexBufferHeight;var uvOffsetU=.5/this.__vertexBufferWidth;var uvOffsetV=.5/this.__vertexBufferHeight;var renderedLeft=left/targetObject.get_scaleX();var renderedTop=top/targetObject.get_scaleY();var renderedCenterX=this.width-renderedLeft-(this.__vertexBufferWidth-centerX-left)/targetObject.get_scaleX();var renderedCenterY=this.height-renderedTop-(this.__vertexBufferHeight-centerY-top)/targetObject.get_scaleY();this.__setVertex(0,0,0,0,0);this.__setVertices([3,6,13,16],renderedLeft,renderedTop,uvLeft,uvTop);this.__setVertices([2,12],0,renderedTop,0,uvTop);this.__setVertices([1,4],renderedLeft,0,uvLeft,0);this.__setVertices([7,10,18,20],renderedLeft+renderedCenterX,renderedTop,uvLeft+uvCenterX,uvTop);this.__setVertices([5,8],renderedLeft+renderedCenterX,0,uvLeft+uvCenterX,0);this.__setVertices([11,21],this.width,renderedTop,1,uvTop);this.__setVertex(9,this.width,0,1,0);this.__setVertices([15,17,25,28],renderedLeft,renderedTop+renderedCenterY,uvLeft,uvTop+uvCenterY);this.__setVertices([14,24],0,renderedTop+renderedCenterY,0,uvTop+uvCenterY);this.__setVertices([19,22,29,32],renderedLeft+renderedCenterX,renderedTop+renderedCenterY,uvLeft+uvCenterX,uvTop+uvCenterY);this.__setVertices([23,33],this.width,renderedTop+renderedCenterY,1,uvTop+uvCenterY);this.__setVertices([27,30],renderedLeft,this.height,uvLeft,1);this.__setVertex(26,0,this.height,0,1);this.__setVertices([31,34],renderedLeft+renderedCenterX,this.height,uvLeft+uvCenterX,1);this.__setVertex(35,this.width,this.height,1,1);this.__setUOffsets([1,3,5,7,13,15,18,19,25,27,29,31],-uvOffsetU);this.__setUOffsets([4,6,8,10,16,17,20,22,28,30,32,34],uvOffsetU);this.__setVOffsets([2,3,6,7,10,11,14,15,17,19,22,23],-uvOffsetV);this.__setVOffsets([12,13,16,18,20,21,24,25,28,29,32,33],uvOffsetV);this.__vertexBuffer=context.createVertexBuffer(16,14)}else if(centerX==0&&centerY!=0){this.__vertexBufferData=new Float32Array(112);var top1=scale9Grid.y;var uvTop1=top1/this.height;var uvCenterY1=centerY/this.height;var renderedTop1=top1/targetObject.get_scaleY();var renderedBottom=(this.height-centerY-top1)/targetObject.get_scaleY();var renderedCenterY1=targetObject.get_height()/targetObject.get_scaleY()-renderedTop1-renderedBottom;var renderedWidth=targetObject.get_width()/targetObject.get_scaleX();this.__vertexBufferData[0]=renderedWidth;this.__vertexBufferData[1]=renderedTop1;this.__vertexBufferData[3]=1;this.__vertexBufferData[4]=uvTop1;this.__vertexBufferData[15]=renderedTop1;this.__vertexBufferData[18]=uvTop1;this.__vertexBufferData[28]=renderedWidth;this.__vertexBufferData[31]=1;this.__vertexBufferData[56]=renderedWidth;this.__vertexBufferData[57]=renderedTop1+renderedCenterY1;this.__vertexBufferData[59]=1;this.__vertexBufferData[60]=uvTop1+uvCenterY1;this.__vertexBufferData[71]=renderedTop1+renderedCenterY1;this.__vertexBufferData[74]=uvTop1+uvCenterY1;this.__vertexBufferData[84]=renderedWidth;this.__vertexBufferData[85]=this.height;this.__vertexBufferData[87]=1;this.__vertexBufferData[88]=1;this.__vertexBufferData[99]=this.height;this.__vertexBufferData[102]=1;this.__vertexBuffer=context.createVertexBuffer(8,14)}else if(centerY==0&&centerX!=0){this.__vertexBufferData=new Float32Array(112);var left1=scale9Grid.x;var uvLeft1=left1/this.width;var uvCenterX1=centerX/this.width;var renderedLeft1=left1/targetObject.get_scaleX();var renderedRight=(this.width-centerX-left1)/targetObject.get_scaleX();var renderedCenterX1=targetObject.get_width()/targetObject.get_scaleX()-renderedLeft1-renderedRight;var renderedHeight=targetObject.get_height()/targetObject.get_scaleY();this.__vertexBufferData[0]=renderedLeft1;this.__vertexBufferData[1]=renderedHeight;this.__vertexBufferData[3]=uvLeft1;this.__vertexBufferData[4]=1;this.__vertexBufferData[15]=renderedHeight;this.__vertexBufferData[18]=1;this.__vertexBufferData[28]=renderedLeft1;this.__vertexBufferData[31]=uvLeft1;this.__vertexBufferData[56]=renderedLeft1+renderedCenterX1;this.__vertexBufferData[57]=renderedHeight;this.__vertexBufferData[59]=uvLeft1+uvCenterX1;this.__vertexBufferData[60]=1;this.__vertexBufferData[70]=renderedLeft1+renderedCenterX1;this.__vertexBufferData[73]=uvLeft1+uvCenterX1;this.__vertexBufferData[84]=this.width;this.__vertexBufferData[85]=renderedHeight;this.__vertexBufferData[87]=1;this.__vertexBufferData[88]=1;this.__vertexBufferData[98]=this.width;this.__vertexBufferData[101]=1;this.__vertexBuffer=context.createVertexBuffer(8,14)}}else{this.__vertexBufferGrid=null}if(this.__vertexBuffer==null){this.__vertexBufferData=new Float32Array(56);this.__vertexBufferData[0]=this.width;this.__vertexBufferData[1]=this.height;this.__vertexBufferData[3]=1;this.__vertexBufferData[4]=1;this.__vertexBufferData[15]=this.height;this.__vertexBufferData[18]=1;this.__vertexBufferData[28]=this.width;this.__vertexBufferData[31]=1;this.__vertexBuffer=context.createVertexBuffer(3,14)}this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData)}return this.__vertexBuffer},getPixel32:function(x,y){if(!this.readable){return 0}return this.image.getPixel32(x,y,1)},getPixels:function(rect){if(!this.readable){return null}if(rect==null){rect=this.rect}var byteArray=openfl_utils__$ByteArray_ByteArray_$Impl_$.fromBytes(this.image.getPixels(rect.__toLimeRectangle(),1));byteArray.__endian=0;return byteArray},getSurface:function(){if(!this.readable){return null}if(this.__surface==null){this.__surface=lime_graphics_cairo__$CairoImageSurface_CairoImageSurface_$Impl_$.fromImage(this.image)}return this.__surface},getTexture:function(context){if(!this.__isValid){return null}if(this.__texture==null||this.__textureContext!=context.__context){this.__textureContext=context.__context;this.__texture=context.createRectangleTexture(this.width,this.height,1,false);this.__textureVersion=-1}lime__$internal_graphics_ImageCanvasUtil.sync(this.image,false);if(this.image!=null&&this.image.version>this.__textureVersion){var textureImage=this.image;if(!openfl_display3D_textures_TextureBase.__supportsBGRA&&textureImage.get_format()!=0){textureImage=textureImage.clone();textureImage.set_format(0)}this.__texture.__uploadFromImage(textureImage);this.__textureVersion=this.image.version;this.__textureWidth=textureImage.buffer.width;this.__textureHeight=textureImage.buffer.height}if(!this.readable&&this.image!=null){this.__surface=null;this.image=null}return this.__texture},hitTest:function(firstPoint,firstAlphaThreshold,secondObject,secondBitmapDataPoint,secondAlphaThreshold){if(secondAlphaThreshold==null){secondAlphaThreshold=1}if(!this.readable){return false}if(secondObject instanceof openfl_display_Bitmap){secondObject=js_Boot.__cast(secondObject,openfl_display_Bitmap).__bitmapData}if(secondObject instanceof openfl_geom_Point){var secondPoint=secondObject;var x=secondPoint.x-firstPoint.x|0;var y=secondPoint.y-firstPoint.y|0;if(this.rect.contains(x,y)){if((this.getPixel32(x,y)>>24&255)>firstAlphaThreshold){return true}}}else if(secondObject instanceof openfl_display_BitmapData){var secondBitmapData=secondObject;var x1;var y1;if(secondBitmapDataPoint==null){x1=0;y1=0}else{x1=Math.round(secondBitmapDataPoint.x-firstPoint.x);y1=Math.round(secondBitmapDataPoint.y-firstPoint.y)}var hitRect=openfl_geom_Rectangle.__pool.get();hitRect.setTo(x1,y1,secondBitmapData.width,secondBitmapData.height);if(this.rect.intersects(hitRect)){if(x1<0){hitRect.x=0;hitRect.width=Math.min(secondBitmapData.width+x1,this.width)}else{hitRect.width=Math.min(secondBitmapData.width,this.width-x1)}if(y1<0){hitRect.y=0;hitRect.height=Math.min(secondBitmapData.height+y1,this.height)}else{hitRect.height=Math.min(secondBitmapData.height,this.height-y1)}var pixels=this.getPixels(hitRect);hitRect.x=x1<0?-x1:0;hitRect.y=y1<0?-y1:0;var testPixels=secondBitmapData.getPixels(hitRect);var length=hitRect.width*hitRect.height|0;var pixel;var testPixel;var _g=0;while(_g<length){++_g;pixel=pixels.readUnsignedInt();testPixel=testPixels.readUnsignedInt();if(_$UInt_UInt_$Impl_$.gt(pixel>>>24&255,firstAlphaThreshold)&&_$UInt_UInt_$Impl_$.gt(testPixel>>>24&255,secondAlphaThreshold)){openfl_geom_Rectangle.__pool.release(hitRect);return true}}}openfl_geom_Rectangle.__pool.release(hitRect)}else if(secondObject instanceof openfl_geom_Rectangle){var secondRectangle=openfl_geom_Rectangle.__pool.get();secondRectangle.copyFrom(secondObject);secondRectangle.offset(-firstPoint.x,-firstPoint.y);secondRectangle.__contract(0,0,this.width,this.height);if(secondRectangle.width>0&&secondRectangle.height>0){var pixels1=this.getPixels(secondRectangle);var length1=_$UInt_UInt_$Impl_$.toFloat(openfl_utils__$ByteArray_ByteArray_$Impl_$.get_length(pixels1))/_$UInt_UInt_$Impl_$.toFloat(4)|0;var pixel1;var _g1=0;while(_g1<length1){++_g1;pixel1=pixels1.readUnsignedInt();if(_$UInt_UInt_$Impl_$.gt(pixel1>>>24&255,firstAlphaThreshold)){openfl_geom_Rectangle.__pool.release(secondRectangle);return true}}}openfl_geom_Rectangle.__pool.release(secondRectangle)}return false},setPixel32:function(x,y,color){if(!this.readable){return}this.image.setPixel32(x,y,color,1)},__fromImage:function(image){if(image!=null&&image.buffer!=null){this.image=image;this.width=image.width;this.height=image.height;this.rect=new openfl_geom_Rectangle(0,0,image.width,image.height);this.__textureWidth=this.width;this.__textureHeight=this.height;this.readable=true;this.__isValid=true}},__getBounds:function(rect,matrix){var bounds=openfl_geom_Rectangle.__pool.get();this.rect.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)},__setUVRect:function(context,x,y,width,height){if(this.getVertexBuffer(context)!=null&&(width!=this.__uvRect.width||height!=this.__uvRect.height||x!=this.__uvRect.x||y!=this.__uvRect.y)){if(this.__uvRect==null){this.__uvRect=new openfl_geom_Rectangle}this.__uvRect.setTo(x,y,width,height);var uvX=this.__textureWidth>0?x/this.__textureWidth:0;var uvY=this.__textureHeight>0?y/this.__textureHeight:0;var uvWidth=this.__textureWidth>0?width/this.__textureWidth:0;var uvHeight=this.__textureHeight>0?height/this.__textureHeight:0;this.__vertexBufferData[0]=width;this.__vertexBufferData[1]=height;this.__vertexBufferData[3]=uvX+uvWidth;this.__vertexBufferData[4]=uvY+uvHeight;this.__vertexBufferData[15]=height;this.__vertexBufferData[17]=uvX;this.__vertexBufferData[18]=uvY+uvHeight;this.__vertexBufferData[28]=width;this.__vertexBufferData[31]=uvX+uvWidth;this.__vertexBufferData[32]=uvY;this.__vertexBufferData[45]=uvX;this.__vertexBufferData[46]=uvY;this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData)}},__setVertex:function(index,x,y,u,v){var i=index*14;this.__vertexBufferData[i]=x;this.__vertexBufferData[i+1]=y;this.__vertexBufferData[i+3]=u;this.__vertexBufferData[i+4]=v},__setVertices:function(indices,x,y,u,v){var _g=0;while(_g<indices.length)this.__setVertex(indices[_g++],x,y,u,v)},__setUOffsets:function(indices,offset){var _g=0;while(_g<indices.length)this.__vertexBufferData[indices[_g++]*14+3]+=offset},__setVOffsets:function(indices,offset){var _g=0;while(_g<indices.length)this.__vertexBufferData[indices[_g++]*14+4]+=offset},__update:function(transformOnly,updateChildren){this.__updateTransforms()},__updateTransforms:function(overrideTransform){if(overrideTransform==null){this.__worldTransform.identity()}else{this.__worldTransform.copyFrom(overrideTransform)}this.__renderTransform.copyFrom(this.__worldTransform)},__class__:openfl_display_BitmapData};var SplashEN=function(width,height,transparent,fillRGBA,onload){if(fillRGBA==null){fillRGBA=-1}if(transparent==null){transparent=true}openfl_display_BitmapData.call(this,0,0,transparent,fillRGBA);if(SplashEN.preload!=null){this.__fromImage(SplashEN.preload)}else{var _gthis=this;lime_graphics_Image.loadFromBase64(haxe_Resource.getString(SplashEN.resourceName),SplashEN.resourceType).then(function(image){_gthis.__fromImage(image);return lime_app_Future.withValue(_gthis)}).onComplete(function(b){if(SplashEN.preload==null){SplashEN.preload=b.image}if(onload!=null&&Reflect.isFunction(onload)){onload(b)}})}};$hxClasses["SplashEN"]=SplashEN;SplashEN.__name__="SplashEN";SplashEN.__super__=openfl_display_BitmapData;SplashEN.prototype=$extend(openfl_display_BitmapData.prototype,{__class__:SplashEN});var Bar=function(width,height,transparent,fillRGBA,onload){if(fillRGBA==null){fillRGBA=-1}if(transparent==null){transparent=true}openfl_display_BitmapData.call(this,0,0,transparent,fillRGBA);if(Bar.preload!=null){this.__fromImage(Bar.preload)}else{var _gthis=this;lime_graphics_Image.loadFromBase64(haxe_Resource.getString(Bar.resourceName),Bar.resourceType).then(function(image){_gthis.__fromImage(image);return lime_app_Future.withValue(_gthis)}).onComplete(function(b){if(Bar.preload==null){Bar.preload=b.image}if(onload!=null&&Reflect.isFunction(onload)){onload(b)}})}};$hxClasses["Bar"]=Bar;Bar.__name__="Bar";Bar.__super__=openfl_display_BitmapData;Bar.prototype=$extend(openfl_display_BitmapData.prototype,{__class__:Bar});var openfl_display_Preloader=function(display){this.onComplete=new lime_app__$Event_$Void_$Void;this.display=display;if(display!=null){display.addEventListener("unload",$bind(this,this.display_onUnload));openfl_Lib.get_current().addChild(display)}};$hxClasses["openfl.display.Preloader"]=openfl_display_Preloader;openfl_display_Preloader.__name__="openfl.display.Preloader";openfl_display_Preloader.prototype={onComplete:null,complete:null,display:null,ready:null,start:function(){this.ready=true;openfl_Lib.get_current().get_loaderInfo().__complete();if(this.display!=null){var complete=new openfl_events_Event("complete",true,true);this.display.dispatchEvent(complete);if(!complete.isDefaultPrevented()){this.display.dispatchEvent(new openfl_events_Event("unload"))}}else if(!this.complete){this.complete=true;this.onComplete.dispatch()}},update:function(loaded,total){openfl_Lib.get_current().get_loaderInfo().__update(loaded,total);if(this.display!=null){this.display.dispatchEvent(new openfl_events_ProgressEvent("progress",true,true,loaded,total))}},display_onUnload:function(event){if(this.display!=null){this.display.removeEventListener("unload",$bind(this,this.display_onUnload));if(this.display.parent==openfl_Lib.get_current()){openfl_Lib.get_current().removeChild(this.display)}openfl_Lib.get_current().stage.set_focus(null);this.display=null}if(this.ready){if(!this.complete){this.complete=true;this.onComplete.dispatch()}}},__class__:openfl_display_Preloader};var CustomPreloader=function(){this.LOGO_HEIGHT=480;this.LOGO_WIDTH=640;this.display=new openfl_display_Sprite;openfl_display_Preloader.call(this,this.display);this.display.addEventListener("complete",$bind(this,this.onCompleted));this.display.addEventListener("progress",$bind(this,this.progress));this.init()};$hxClasses["CustomPreloader"]=CustomPreloader;CustomPreloader.__name__="CustomPreloader";CustomPreloader.__super__=openfl_display_Preloader;CustomPreloader.prototype=$extend(openfl_display_Preloader.prototype,{LOGO_WIDTH:null,LOGO_HEIGHT:null,splash:null,bar:null,rectangle:null,onCompleted:function(event){this.display.removeEventListener("enterFrame",$bind(this,this.onFrame));this.display.removeEventListener("complete",$bind(this,this.onCompleted));this.display.removeEventListener("progress",$bind(this,this.progress))},init:function(){this.resize();this.display.stage.set_color(CustomPreloader.backgroundColor);this.rectangle=new openfl_display_Sprite;this.bar=new openfl_display_Bitmap(new Bar(0,0));var container=new openfl_display_Sprite;this.bar.smoothing=true;this.bar.set_x(100);this.bar.set_y(210);this.rectangle.set_x(160);this.rectangle.set_y(250);this.display.addChild(container);container.addChild(this.bar);container.addChild(this.rectangle);project_locale_L10N_$CN.set_langSelected(project_locale_L10N_$CN.getQueryVariable("lang"));this.splash=new openfl_display_Bitmap(new SplashEN(0,0));this.splash.smoothing=true;container.addChild(this.splash);this.display.set_x((this.display.stage.stageWidth-this.LOGO_WIDTH)/(2*this.display.get_scaleX()));this.display.set_y((this.display.stage.stageHeight-this.LOGO_HEIGHT)/(2*this.display.get_scaleY()));openfl_Lib.get_current().stage.addEventListener("enterFrame",$bind(this,this.onFrame))},progress:function(e){if(e.bytesTotal<=0){return}var percentLoaded=e.bytesLoaded/e.bytesTotal;if(percentLoaded>1){percentLoaded=1}this.rectangle.get_graphics().clear();this.rectangle.get_graphics().beginFill(CustomPreloader.color);this.rectangle.get_graphics().drawRect(percentLoaded*320,0,(1-percentLoaded)*320,36);this.rectangle.get_graphics().endFill()},onFrame:function(e){if(this.bar.get_x()>=152){this.bar.set_x(100)}var _g=this.bar;_g.set_x(_g.get_x()+1)},resize:function(e){if(this.display!=null&&this.display.stage!=null){this.display.set_scaleX(this.display.set_scaleY(1));this.display.set_scaleX(this.display.set_scaleY(Math.max(this.display.stage.stageWidth/800,this.display.stage.stageHeight/600)));this.display.set_x((this.display.stage.stageWidth-800*this.display.get_scaleX())/2);this.display.set_y((this.display.stage.stageHeight-600*this.display.get_scaleY())/2)}},__class__:CustomPreloader});var EReg=function(r,opt){this.r=new RegExp(r,opt.split("u").join(""))};$hxClasses["EReg"]=EReg;EReg.__name__="EReg";EReg.prototype={r:null,match:function(s){if(this.r.global){this.r.lastIndex=0}this.r.m=this.r.exec(s);this.r.s=s;return this.r.m!=null},matched:function(n){if(this.r.m!=null&&n>=0&&n<this.r.m.length){return this.r.m[n]}else{throw new js__$Boot_HaxeError("EReg::matched")}},matchedRight:function(){if(this.r.m==null){throw new js__$Boot_HaxeError("No string matched")}var sz=this.r.m.index+this.r.m[0].length;return HxOverrides.substr(this.r.s,sz,this.r.s.length-sz)},matchedPos:function(){if(this.r.m==null){throw new js__$Boot_HaxeError("No string matched")}return{pos:this.r.m.index,len:this.r.m[0].length}},matchSub:function(s,pos,len){if(len==null){len=-1}if(this.r.global){this.r.lastIndex=pos;this.r.m=this.r.exec(len<0?s:HxOverrides.substr(s,0,pos+len));var b=this.r.m!=null;if(b){this.r.s=s}return b}else{var b1=this.match(len<0?HxOverrides.substr(s,pos,null):HxOverrides.substr(s,pos,len));if(b1){this.r.s=s;this.r.m.index+=pos}return b1}},split:function(s){return s.replace(this.r,"#__delim__#").split("#__delim__#")},__class__:EReg};var HxOverrides=function(){};$hxClasses["HxOverrides"]=HxOverrides;HxOverrides.__name__="HxOverrides";HxOverrides.strDate=function(s){switch(s.length){case 8:var k=s.split(":");var d=new Date;d["setTime"](0);d["setUTCHours"](k[0]);d["setUTCMinutes"](k[1]);d["setUTCSeconds"](k[2]);return d;case 10:var k1=s.split("-");return new Date(k1[0],k1[1]-1,k1[2],0,0,0);case 19:var k2=s.split(" ");var y=k2[0].split("-");var t=k2[1].split(":");return new Date(y[0],y[1]-1,y[2],t[0],t[1],t[2]);default:throw new js__$Boot_HaxeError("Invalid date format : "+s)}};HxOverrides.cca=function(s,index){var x=s.charCodeAt(index);if(x!=x){return undefined}return x};HxOverrides.substr=function(s,pos,len){if(len==null){len=s.length}else if(len<0){if(pos==0){len=s.length+len}else{return""}}return s.substr(pos,len)};HxOverrides.remove=function(a,obj){var i=a.indexOf(obj);if(i==-1){return false}a.splice(i,1);return true};HxOverrides.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Lambda=function(){};$hxClasses["Lambda"]=Lambda;Lambda.__name__="Lambda";Lambda.array=function(it){var a=[];var i=$getIterator(it);while(i.hasNext())a.push(i.next());return a};var ManifestResources=function(){};$hxClasses["ManifestResources"]=ManifestResources;ManifestResources.__name__="ManifestResources";ManifestResources.init=function(config){ManifestResources.preloadLibraries=[];ManifestResources.preloadLibraryNames=[];ManifestResources.rootPath=null;if(config!=null&&Object.prototype.hasOwnProperty.call(config,"rootPath")){ManifestResources.rootPath=Reflect.field(config,"rootPath")}if(ManifestResources.rootPath==null){ManifestResources.rootPath="./"}lime_utils_Assets.defaultRootPath=ManifestResources.rootPath;openfl_text_Font.registerFont(_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf);var manifest=lime_utils_AssetManifest.parse('{"name":"Preloader2015","assets":"aoy4:pathy17:Preloader2015.biny4:sizei121575y4:typey4:TEXTy2:idR1y7:preloadtgh","rootPath":"lib/Preloader2015","version":2,"libraryArgs":["Preloader2015.bin","W4WYoPRUL8Z88DlQhjcT"],"libraryType":"openfl._internal.formats.swf.SWFLiteLibrary"}',ManifestResources.rootPath);var library=lime_utils_AssetLibrary.fromManifest(manifest);lime_utils_Assets.registerLibrary("Preloader2015",library);manifest=lime_utils_AssetManifest.parse('{"name":null,"assets":"aoy4:pathy40:img%2Fgame%2Feffects%2Fdust_particle.pngy4:sizei229y4:typey5:IMAGEy2:idR1y7:preloadtgoR0y33:img%2Fgame%2Flevel%2Fbanister.pngR2i7212R3R4R5R7R6tgoR0y30:img%2Fgame%2Flevel%2Ffloor.pngR2i3801R3R4R5R8R6tgoR0y32:img%2Fgame%2Flevel%2Ffloor02.pngR2i12115R3R4R5R9R6tgoR0y32:img%2Fgame%2Flevel%2Ffloor03.pngR2i3841R3R4R5R10R6tgoR0y31:img%2Fgame%2Flevel%2Fwall01.pngR2i13354R3R4R5R11R6tgoR0y31:img%2Fgame%2Flevel%2Fwall02.pngR2i8649R3R4R5R12R6tgoR0y31:img%2Fgame%2Flevel%2Fwall03.pngR2i11271R3R4R5R13R6tgoR0y32:img%2Fgame%2Flevel%2Fwallbox.pngR2i4711R3R4R5R14R6tgoR0y46:img%2Fgame%2Fobjects%2Fatlas%2Fgameobjects.pngR2i20152R3R4R5R15R6tgoR0y46:img%2Fgame%2Fobjects%2Fatlas%2Fgameobjects.xmlR2i1652R3y4:TEXTR5R16R6tgoR0y38:img%2Fgame%2Fobjects%2Fbeargrizzly.pngR2i13789R3R4R5R18R6tgoR0y34:img%2Fgame%2Fobjects%2Fbearice.pngR2i12260R3R4R5R19R6tgoR0y36:img%2Fgame%2Fobjects%2Fbearpanda.pngR2i14892R3R4R5R20R6tgoR0y39:img%2Fgame%2Fobjects%2FbeltDown-end.pngR2i4589R3R4R5R21R6tgoR0y42:img%2Fgame%2Fobjects%2FbeltDown-middle.pngR2i4355R3R4R5R22R6tgoR0y41:img%2Fgame%2Fobjects%2FbeltDown-start.pngR2i4650R3R4R5R23R6tgoR0y39:img%2Fgame%2Fobjects%2FbeltLeft-end.pngR2i4853R3R4R5R24R6tgoR0y42:img%2Fgame%2Fobjects%2FbeltLeft-middle.pngR2i4519R3R4R5R25R6tgoR0y41:img%2Fgame%2Fobjects%2FbeltLeft-start.pngR2i4970R3R4R5R26R6tgoR0y40:img%2Fgame%2Fobjects%2FbeltRight-end.pngR2i4969R3R4R5R27R6tgoR0y43:img%2Fgame%2Fobjects%2FbeltRight-middle.pngR2i4552R3R4R5R28R6tgoR0y42:img%2Fgame%2Fobjects%2FbeltRight-start.pngR2i4926R3R4R5R29R6tgoR0y37:img%2Fgame%2Fobjects%2FbeltUp-end.pngR2i4636R3R4R5R30R6tgoR0y40:img%2Fgame%2Fobjects%2FbeltUp-middle.pngR2i4525R3R4R5R31R6tgoR0y39:img%2Fgame%2Fobjects%2FbeltUp-start.pngR2i4665R3R4R5R32R6tgoR0y32:img%2Fgame%2Fobjects%2Fboxes.pngR2i5618R3R4R5R33R6tgoR0y44:img%2Fgame%2Fobjects%2FdoorButton-bottom.pngR2i6343R3R4R5R34R6tgoR0y44:img%2Fgame%2Fobjects%2FdoorButton-button.pngR2i8205R3R4R5R35R6tgoR0y42:img%2Fgame%2Fobjects%2FdoorButton-left.pngR2i7990R3R4R5R36R6tgoR0y43:img%2Fgame%2Fobjects%2FdoorButton-right.pngR2i8019R3R4R5R37R6tgoR0y41:img%2Fgame%2Fobjects%2FdoorButton-top.pngR2i7578R3R4R5R38R6tgoR0y43:img%2Fgame%2Fobjects%2FdoorOneSide-down.pngR2i6653R3R4R5R39R6tgoR0y43:img%2Fgame%2Fobjects%2FdoorOneSide-left.pngR2i8259R3R4R5R40R6tgoR0y44:img%2Fgame%2Fobjects%2FdoorOneSide-right.pngR2i7920R3R4R5R41R6tgoR0y41:img%2Fgame%2Fobjects%2FdoorOneSide-up.pngR2i6002R3R4R5R42R6tgoR0y37:img%2Fgame%2Fobjects%2FdoorTimedH.pngR2i11024R3R4R5R43R6tgoR0y37:img%2Fgame%2Fobjects%2FdoorTimedV.pngR2i11255R3R4R5R44R6tgoR0y32:img%2Fgame%2Fobjects%2Fgoal1.pngR2i6406R3R4R5R45R6tgoR0y32:img%2Fgame%2Fobjects%2Fgoal2.pngR2i9422R3R4R5R46R6tgoR0y32:img%2Fgame%2Fobjects%2Fgoal3.pngR2i10859R3R4R5R47R6tgoR0y35:img%2Fgame%2Fobjects%2FgoalFlag.pngR2i7753R3R4R5R48R6tgoR0y31:img%2Fgame%2Fobjects%2Fhole.pngR2i38192R3R4R5R49R6tgoR0y35:img%2Fgame%2Fobjects%2Fteleport.pngR2i10130R3R4R5R50R6tgoR0y45:img%2Fgame%2Fobjects%2FwallBouncerBottom2.pngR2i4567R3R4R5R51R6tgoR0y45:img%2Fgame%2Fobjects%2FwallBouncerBottom3.pngR2i4644R3R4R5R52R6tgoR0y43:img%2Fgame%2Fobjects%2FwallBouncerLeft2.pngR2i4164R3R4R5R53R6tgoR0y43:img%2Fgame%2Fobjects%2FwallBouncerLeft3.pngR2i4343R3R4R5R54R6tgoR0y44:img%2Fgame%2Fobjects%2FwallBouncerRight2.pngR2i4119R3R4R5R55R6tgoR0y44:img%2Fgame%2Fobjects%2FwallBouncerRight3.pngR2i4294R3R4R5R56R6tgoR0y42:img%2Fgame%2Fobjects%2FwallBouncerTop2.pngR2i5101R3R4R5R57R6tgoR0y42:img%2Fgame%2Fobjects%2FwallBouncerTop3.pngR2i5208R3R4R5R58R6tgoR0y35:img%2Fgame%2Fpopups%2Fgame-exit.pngR2i4549R3R4R5R59R6tgoR0y49:img%2Fgame%2Fpopups%2Fgame-popup-lose-restart.pngR2i11020R3R4R5R60R6tgoR0y41:img%2Fgame%2Fpopups%2Fgame-popup-lose.pngR2i40420R3R4R5R61R6tgoR0y42:img%2Fgame%2Fpopups%2Fgame-popup-pause.pngR2i17058R3R4R5R62R6tgoR0y48:img%2Fgame%2Fpopups%2Fgame-popup-win-restart.pngR2i6388R3R4R5R63R6tgoR0y49:img%2Fgame%2Fpopups%2Fgame-popup-win-selector.pngR2i6375R3R4R5R64R6tgoR0y46:img%2Fgame%2Fpopups%2Fgame-popup-win-star1.pngR2i9078R3R4R5R65R6tgoR0y46:img%2Fgame%2Fpopups%2Fgame-popup-win-star2.pngR2i10004R3R4R5R66R6tgoR0y46:img%2Fgame%2Fpopups%2Fgame-popup-win-star3.pngR2i9046R3R4R5R67R6tgoR0y40:img%2Fgame%2Fpopups%2Fgame-popup-win.pngR2i45848R3R4R5R68R6tgoR0y38:img%2Fgame%2Fpopups%2Fgame-restart.pngR2i4582R3R4R5R69R6tgoR0y31:img%2Fgame%2Fprops%2Fbeacon.pngR2i23417R3R4R5R70R6tgoR0y30:img%2Fgame%2Fprops%2Fbox30.pngR2i35403R3R4R5R71R6tgoR0y30:img%2Fgame%2Fprops%2Fbox45.pngR2i24112R3R4R5R72R6tgoR0y30:img%2Fgame%2Fprops%2Fbox90.pngR2i7191R3R4R5R73R6tgoR0y30:img%2Fgame%2Fprops%2Ftrash.pngR2i162R3R4R5R74R6tgoR0y32:img%2Fgame%2FUI%2Fgame-pause.pngR2i4074R3R4R5R75R6tgoR0y31:img%2Fgame%2FUI%2Fgameframe.pngR2i8804R3R4R5R76R6tgoR0y42:img%2Fgame%2FUI%2Fobjectindicator-item.pngR2i9598R3R4R5R77R6tgoR0y37:img%2Fgame%2FUI%2Fobjectindicator.pngR2i419R3R4R5R78R6tgoR0y44:img%2Fgame%2FUI%2Fobjectinidicator-arrow.pngR2i4787R3R4R5R79R6tgoR0y46:img%2Fgame%2FUI%2Fselectionindicator-floor.pngR2i8025R3R4R5R80R6tgoR0y40:img%2Fgame%2FUI%2Fselectionindicator.pngR2i13121R3R4R5R81R6tgoR0y36:img%2Fgame%2FUI%2Fselectionspot1.pngR2i3056R3R4R5R82R6tgoR0y36:img%2Fgame%2FUI%2Fselectionspot2.pngR2i3008R3R4R5R83R6tgoR0y36:img%2Fgame%2FUI%2Fselectionspot3.pngR2i2975R3R4R5R84R6tgoR0y36:img%2Fgame%2FUI%2Fselectionspot4.pngR2i2919R3R4R5R85R6tgoR0y36:img%2Fgame%2FUI%2Fselectionspot5.pngR2i2865R3R4R5R86R6tgoR0y51:img%2Fgame%2FUI%2Ftopbar-shotcounter-background.pngR2i8249R3R4R5R87R6tgoR0y53:img%2Fgame%2FUI%2Ftopbar-shotcounter-progress-bkg.pngR2i3251R3R4R5R88R6tgoR0y49:img%2Fgame%2FUI%2Ftopbar-shotcounter-progress.pngR2i3266R3R4R5R89R6tgoR0y46:img%2Fgame%2FUI%2Ftopbar-shotcounter-stars.pngR2i4665R3R4R5R90R6tgoR0y32:img%2Fmenu%2Fbackground_home.pngR2i243934R3R4R5R91R6tgoR0y38:img%2Fmenu%2Fbackground_home_shine.pngR2i99450R3R4R5R92R6tgoR0y32:img%2Fmenu%2FbackStartButton.pngR2i6357R3R4R5R93R6tgoR0y35:img%2Fmenu%2Fbuttons%2Fbtn_back.pngR2i4313R3R4R5R94R6tgoR0y38:img%2Fmenu%2Fbuttons%2Fbtn_credits.pngR2i4418R3R4R5R95R6tgoR0y36:img%2Fmenu%2Fbuttons%2Fbtn_level.pngR2i18219R3R4R5R96R6tgoR0y35:img%2Fmenu%2Fbuttons%2Fbtn_play.pngR2i10127R3R4R5R97R6tgoR0y38:img%2Fmenu%2Fbuttons%2Fbtn_play_bg.pngR2i10190R3R4R5R98R6tgoR0y39:img%2Fmenu%2Fbuttons%2Fbtn_small_bg.pngR2i4786R3R4R5R99R6tgoR0y40:img%2Fmenu%2Fbuttons%2Fbtn_sound_off.pngR2i4305R3R4R5R100R6tgoR0y39:img%2Fmenu%2Fbuttons%2Fbtn_sound_on.pngR2i4579R3R4R5R101R6tgoR0y24:img%2Fmenu%2Fcredits.pngR2i11360R3R4R5R102R6tgoR0y26:img%2Fmenu%2Fend_board.pngR2i3858R3R4R5R103R6tgoR0y28:img%2Fmenu%2Fend_grizzly.pngR2i29282R3R4R5R104R6tgoR0y28:img%2Fmenu%2Fend_iceberg.pngR2i23855R3R4R5R105R6tgoR0y26:img%2Fmenu%2Fend_panda.pngR2i30062R3R4R5R106R6tgoR0y26:img%2Fmenu%2Fend_tire1.pngR2i17057R3R4R5R107R6tgoR0y26:img%2Fmenu%2Fend_tire2.pngR2i14821R3R4R5R108R6tgoR0y26:img%2Fmenu%2Fend_tire3.pngR2i15722R3R4R5R109R6tgoR0y27:img%2Fmenu%2Fintro_box1.pngR2i11772R3R4R5R110R6tgoR0y27:img%2Fmenu%2Fintro_box2.pngR2i10406R3R4R5R111R6tgoR0y27:img%2Fmenu%2Fintro_box3.pngR2i12196R3R4R5R112R6tgoR0y27:img%2Fmenu%2Fintro_flag.pngR2i38882R3R4R5R113R6tgoR0y31:img%2Fmenu%2Fintro_logo_WBB.pngR2i24859R3R4R5R114R6tgoR0y40:img%2Fmenu%2Flevelselect_buttonsback.pngR2i36701R3R4R5R115R6tgoR0y21:img%2Fmenu%2Flogo.pngR2i28637R3R4R5R116R6tgoR0y34:img%2Fmenu%2Fmain_menu_grizzly.pngR2i34445R3R4R5R117R6tgoR0y32:img%2Fmenu%2Fmain_menu_panda.pngR2i26989R3R4R5R118R6tgoR0y32:img%2Fmenu%2Fmain_menu_polar.pngR2i21667R3R4R5R119R6tgoR0y31:img%2Fmenu%2Fpreintro_bears.pngR2i33073R3R4R5R120R6tgoR0y32:img%2Fmenu%2Fpreintro_faces1.pngR2i3678R3R4R5R121R6tgoR0y32:img%2Fmenu%2Fpreintro_faces2.pngR2i6137R3R4R5R122R6tgoR0y40:img%2Fmenu%2Fpreintro_faces2_grizzly.pngR2i2932R3R4R5R123R6tgoR0y38:img%2Fmenu%2Fpreintro_faces2_panda.pngR2i2944R3R4R5R124R6tgoR0y32:img%2Fmenu%2Fpreintro_faces3.pngR2i5019R3R4R5R125R6tgoR0y30:img%2Fmenu%2Fpreintro_tire.pngR2i45538R3R4R5R126R6tgoR0y31:img%2Fmenu%2Fselector_bears.pngR2i25199R3R4R5R127R6tgoR0y34:img%2Ftextures%2Frotate_device.jpgR2i330198R3R4R5R128R6tgoR0y37:img%2Ftransitions%2Ftransition-d1.pngR2i34113R3R4R5R129R6tgoR0y37:img%2Ftransitions%2Ftransition-d2.pngR2i14804R3R4R5R130R6tgoR2i80388R3y4:FONTy9:classNamey25:__ASSET__fonts_coopbl_ttfR5y18:fonts%2FCOOPBL.TTFR6tgoR2i12121R3y5:MUSICR5y21:audio%2Ffx%2Fbeep.mp3y9:pathGroupaR136hR6tgoR2i17780R3R135R5y22:audio%2Ffx%2Fbeep2.mp3R137aR138hR6tgoR2i9968R3R135R5y21:audio%2Ffx%2Fbell.mp3R137aR139hR6tgoR2i30295R3R135R5y26:audio%2Ffx%2Fbiribiri2.mp3R137aR140hR6tgoR2i15692R3R135R5y26:audio%2Ffx%2Fbiribiri3.mp3R137aR141hR6tgoR2i21643R3R135R5y24:audio%2Ffx%2Fbounce2.mp3R137aR142hR6tgoR2i9491R3R135R5y22:audio%2Ffx%2Fclick.mp3R137aR143hR6tgoR2i12560R3R135R5y26:audio%2Ffx%2FclickBack.mp3R137aR144hR6tgoR2i9428R3R135R5y24:audio%2Ffx%2FclickOn.mp3R137aR145hR6tgoR2i22859R3R135R5y25:audio%2Ffx%2Fconveyor.mp3R137aR146hR6tgoR2i32203R3R135R5y22:audio%2Ffx%2Fdash1.mp3R137aR147hR6tgoR2i32203R3R135R5y22:audio%2Ffx%2Fdash2.mp3R137aR148hR6tgoR2i32203R3R135R5y22:audio%2Ffx%2Fdash3.mp3R137aR149hR6tgoR2i35528R3R135R5y26:audio%2Ffx%2FdoorClose.mp3R137aR150hR6tgoR2i35528R3R135R5y25:audio%2Ffx%2FdoorOpen.mp3R137aR151hR6tgoR2i23656R3R135R5y26:audio%2Ffx%2FdoorTimed.mp3R137aR152hR6tgoR2i22859R3R135R5y27:audio%2Ffx%2FdoorTimed2.mp3R137aR153hR6tgoR2i34592R3R135R5y22:audio%2Ffx%2Ffall1.mp3R137aR154hR6tgoR2i43232R3R135R5y22:audio%2Ffx%2Ffall2.mp3R137aR155hR6tgoR2i72992R3R135R5y22:audio%2Ffx%2Ffall3.mp3R137aR156hR6tgoR2i24508R3R135R5y22:audio%2Ffx%2Ffloor.mp3R137aR157hR6tgoR2i27872R3R135R5y25:audio%2Ffx%2Fgameover.mp3R137aR158hR6tgoR2i9206R3R135R5y21:audio%2Ffx%2Fgoo3.mp3R137aR159hR6tgoR2i12299R3R135R5y21:audio%2Ffx%2Fgoo4.mp3R137aR160hR6tgoR2i18503R3R135R5y22:audio%2Ffx%2Fjush1.mp3R137aR161hR6tgoR2i12512R3R135R5y26:audio%2Ffx%2Fmetallic1.mp3R137aR162hR6tgoR2i38432R3R135R5y21:audio%2Ffx%2Foil1.mp3R137aR163hR6tgoR2i20765R3R135R5y22:audio%2Ffx%2Fpause.mp3R137aR164hR6tgoR2i36512R3R135R5y24:audio%2Ffx%2FpauseIn.mp3R137aR165hR6tgoR2i29063R3R135R5y29:audio%2Ffx%2Fpiano_tone1b.mp3R137aR166hR6tgoR2i28235R3R135R5y29:audio%2Ffx%2Fpiano_tone2b.mp3R137aR167hR6tgoR2i28235R3R135R5y29:audio%2Ffx%2Fpiano_tone3b.mp3R137aR168hR6tgoR2i28235R3R135R5y29:audio%2Ffx%2Fpiano_tone4b.mp3R137aR169hR6tgoR2i29063R3R135R5y29:audio%2Ffx%2Fpiano_tone5b.mp3R137aR170hR6tgoR2i29063R3R135R5y29:audio%2Ffx%2Fpiano_tone6b.mp3R137aR171hR6tgoR2i3968R3R135R5y20:audio%2Ffx%2Fpop.mp3R137aR172hR6tgoR2i15392R3R135R5y24:audio%2Ffx%2Frubber1.mp3R137aR173hR6tgoR2i99275R3R135R5y28:audio%2Ffx%2Fsneakywalk3.mp3R137aR174hR6tgoR2i59455R3R135R5y28:audio%2Ffx%2Fsneakywalk4.mp3R137aR175hR6tgoR2i24992R3R135R5y29:audio%2Ffx%2Fsplash_paper.mp3R137aR176hR6tgoR2i12560R3R135R5y21:audio%2Ffx%2Ftic0.mp3R137aR177hR6tgoR2i18811R3R135R5y21:audio%2Ffx%2Ftic1.mp3R137aR178hR6tgoR2i18811R3R135R5y21:audio%2Ffx%2Ftic2.mp3R137aR179hR6tgoR2i12560R3R135R5y21:audio%2Ffx%2Ftic3.mp3R137aR180hR6tgoR2i18811R3R135R5y21:audio%2Ffx%2Ftic4.mp3R137aR181hR6tgoR2i12560R3R135R5y21:audio%2Ffx%2Ftic5.mp3R137aR182hR6tgoR2i42272R3R135R5y27:audio%2Ffx%2Ftransition.mp3R137aR183hR6tgoR2i53348R3R135R5y24:audio%2Ffx%2Fvo_all1.mp3R137aR184hR6tgoR2i99284R3R135R5y24:audio%2Ffx%2Fvo_all2.mp3R137aR185hR6tgoR2i33995R3R135R5y28:audio%2Ffx%2Fvo_grizzly1.mp3R137aR186hR6tgoR2i31712R3R135R5y28:audio%2Ffx%2Fvo_grizzly2.mp3R137aR187hR6tgoR2i14059R3R135R5y28:audio%2Ffx%2Fvo_grizzly3.mp3R137aR188hR6tgoR2i22112R3R135R5y28:audio%2Ffx%2Fvo_grizzly4.mp3R137aR189hR6tgoR2i32672R3R135R5y28:audio%2Ffx%2Fvo_grizzly5.mp3R137aR190hR6tgoR2i20683R3R135R5y26:audio%2Ffx%2Fvo_panda1.mp3R137aR191hR6tgoR2i42635R3R135R5y26:audio%2Ffx%2Fvo_panda2.mp3R137aR192hR6tgoR2i25483R3R135R5y26:audio%2Ffx%2Fvo_panda3.mp3R137aR193hR6tgoR2i28235R3R135R5y26:audio%2Ffx%2Fvo_panda4.mp3R137aR194hR6tgoR2i39883R3R135R5y26:audio%2Ffx%2Fvo_panda5.mp3R137aR195hR6tgoR2i28832R3R135R5y28:audio%2Ffx%2Fwallbounce1.mp3R137aR196hR6tgoR2i34592R3R135R5y28:audio%2Ffx%2Fwallbounce2.mp3R137aR197hR6tgoR2i18824R3R135R5y25:audio%2Ffx%2Fwhistler.mp3R137aR198hR6tgoR2i18824R3R135R5y33:audio%2Ffx%2Fwhistler_reverse.mp3R137aR199hR6tgoR2i4974752R3R135R5y30:audio%2Fmusic%2FBouncyCubs.mp3R137aR200hR6tgoR2i152456R3R135R5y27:audio%2Fmusic%2FCNintro.mp3R137aR201hR6tgoR2i936R3R135R5y19:audio%2Fsilence.mp3R137aR202hR6tgoR0y21:levels%2FaObjects.tsxR2i3774R3R17R5R203R6tgoR0y19:levels%2FaProps.tsxR2i2832R3R17R5R204R6tgoR0y21:levels%2Fbanister.tsxR2i248R3R17R5R205R6tgoR0y18:levels%2Ffloor.tsxR2i241R3R17R5R206R6tgoR0y20:levels%2Ffloor02.tsxR2i245R3R17R5R207R6tgoR0y20:levels%2Ffloor03.tsxR2i245R3R17R5R208R6tgoR0y21:levels%2Flevel01.jsonR2i16007R3R17R5R209R6tgoR0y21:levels%2Flevel02.jsonR2i16403R3R17R5R210R6tgoR0y21:levels%2Flevel03.jsonR2i34270R3R17R5R211R6tgoR0y21:levels%2Flevel04.jsonR2i21473R3R17R5R212R6tgoR0y21:levels%2Flevel05.jsonR2i31211R3R17R5R213R6tgoR0y21:levels%2Flevel06.jsonR2i27521R3R17R5R214R6tgoR0y21:levels%2Flevel07.jsonR2i15905R3R17R5R215R6tgoR0y21:levels%2Flevel08.jsonR2i30342R3R17R5R216R6tgoR0y21:levels%2Flevel09.jsonR2i25335R3R17R5R217R6tgoR0y21:levels%2Flevel10.jsonR2i26332R3R17R5R218R6tgoR0y21:levels%2Flevel11.jsonR2i53451R3R17R5R219R6tgoR0y21:levels%2Flevel12.jsonR2i39241R3R17R5R220R6tgoR0y21:levels%2Flevel13.jsonR2i38471R3R17R5R221R6tgoR0y21:levels%2Flevel14.jsonR2i26932R3R17R5R222R6tgoR0y21:levels%2Flevel15.jsonR2i21433R3R17R5R223R6tgoR0y21:levels%2Flevel16.jsonR2i17972R3R17R5R224R6tgoR0y21:levels%2Flevel17.jsonR2i52141R3R17R5R225R6tgoR0y21:levels%2Flevel18.jsonR2i38697R3R17R5R226R6tgoR0y34:levels%2Ftiledobjects%2Fbeacon.pngR2i14025R3R17R5R227R6tgoR0y39:levels%2Ftiledobjects%2Fbeargrizzly.pngR2i18820R3R17R5R228R6tgoR0y35:levels%2Ftiledobjects%2Fbearice.pngR2i18831R3R17R5R229R6tgoR0y37:levels%2Ftiledobjects%2Fbearpanda.pngR2i19815R3R17R5R230R6tgoR0y35:levels%2Ftiledobjects%2Fbouncer.pngR2i20641R3R17R5R231R6tgoR0y35:levels%2Ftiledobjects%2Fbox30-1.pngR2i9407R3R17R5R232R6tgoR0y35:levels%2Ftiledobjects%2Fbox30-2.pngR2i8983R3R17R5R233R6tgoR0y35:levels%2Ftiledobjects%2Fbox30-3.pngR2i9346R3R17R5R234R6tgoR0y35:levels%2Ftiledobjects%2Fbox30-4.pngR2i9150R3R17R5R235R6tgoR0y33:levels%2Ftiledobjects%2Fbox30.pngR2i35403R3R17R5R236R6tgoR0y35:levels%2Ftiledobjects%2Fbox45-1.pngR2i8948R3R17R5R237R6tgoR0y35:levels%2Ftiledobjects%2Fbox45-2.pngR2i8916R3R17R5R238R6tgoR0y35:levels%2Ftiledobjects%2Fbox45-3.pngR2i8772R3R17R5R239R6tgoR0y35:levels%2Ftiledobjects%2Fbox45-4.pngR2i8026R3R17R5R240R6tgoR0y33:levels%2Ftiledobjects%2Fbox45.pngR2i24112R3R17R5R241R6tgoR0y35:levels%2Ftiledobjects%2Fbox90-1.pngR2i6446R3R17R5R242R6tgoR0y35:levels%2Ftiledobjects%2Fbox90-2.pngR2i6274R3R17R5R243R6tgoR0y35:levels%2Ftiledobjects%2Fbox90-3.pngR2i6232R3R17R5R244R6tgoR0y35:levels%2Ftiledobjects%2Fbox90-4.pngR2i6279R3R17R5R245R6tgoR0y33:levels%2Ftiledobjects%2Fbox90.pngR2i7191R3R17R5R246R6tgoR0y34:levels%2Ftiledobjects%2Fbutton.pngR2i15717R3R17R5R247R6tgoR0y34:levels%2Ftiledobjects%2Fcamera.pngR2i17694R3R17R5R248R6tgoR0y40:levels%2Ftiledobjects%2Fconveyorbelt.pngR2i7306R3R17R5R249R6tgoR0y38:levels%2Ftiledobjects%2FdoorTimedH.pngR2i14690R3R17R5R250R6tgoR0y38:levels%2Ftiledobjects%2FdoorTimedV.pngR2i13999R3R17R5R251R6tgoR0y32:levels%2Ftiledobjects%2Fgoal.pngR2i3830R3R17R5R252R6tgoR0y32:levels%2Ftiledobjects%2Fhole.pngR2i12577R3R17R5R253R6tgoR0y43:levels%2Ftiledobjects%2Finflatable-lone.pngR2i6892R3R17R5R254R6tgoR0y35:levels%2Ftiledobjects%2Foneside.pngR2i7222R3R17R5R255R6tgoR0y36:levels%2Ftiledobjects%2FsplatGoo.pngR2i9115R3R17R5R256R6tgoR0y36:levels%2Ftiledobjects%2FsplatOil.pngR2i7832R3R17R5R257R6tgoR0y38:levels%2Ftiledobjects%2Fswitchdoor.pngR2i12374R3R17R5R258R6tgoR0y36:levels%2Ftiledobjects%2Fteleport.pngR2i12847R3R17R5R259R6tgoR0y33:levels%2Ftiledobjects%2Ftrash.pngR2i4905R3R17R5R260R6tgoR0y46:levels%2Ftiledobjects%2FwallBouncerBottom2.pngR2i7117R3R17R5R261R6tgoR0y46:levels%2Ftiledobjects%2FwallBouncerBottom3.pngR2i7028R3R17R5R262R6tgoR0y17:levels%2Fwall.tsxR2i900R3R17R5R263R6tgoR0y19:levels%2Fwall01.tsxR2i244R3R17R5R264R6tgoR0y19:levels%2Fwall02.tsxR2i244R3R17R5R265R6tgoR0y19:levels%2Fwall03.tsxR2i244R3R17R5R266R6tgoR0y20:levels%2Fwallbox.tsxR2i245R3R17R5R267R6tgoR0y28:assets%2Fpreloader%2Fbar.pngR2i434R3R4R5R268R6tgoR0y37:assets%2Fpreloader%2Ffully_loaded.pngR2i3979R3R4R5R269R6tgoR0y34:assets%2Fpreloader%2FloadingAR.pngR2i3358R3R4R5R270R6tgoR0y34:assets%2Fpreloader%2FloadingBR.pngR2i3564R3R4R5R271R6tgoR0y37:assets%2Fpreloader%2FloadingEmpty.pngR2i17752R3R4R5R272R6tgoR0y34:assets%2Fpreloader%2FloadingUS.pngR2i17752R3R4R5R273R6tgoR0y29:assets%2Fpreloader%2Flogo.pngR2i20867R3R4R5R274R6tgh","rootPath":null,"version":2,"libraryArgs":[],"libraryType":null}',ManifestResources.rootPath);library=lime_utils_AssetLibrary.fromManifest(manifest);lime_utils_Assets.registerLibrary("default",library);var v=ManifestResources.rootPath+"manifest/locale.json";var _this=lime_utils_Assets.libraryPaths;if(__map_reserved["locale"]!=null){_this.setReserved("locale",v)}else{_this.h["locale"]=v}library=lime_utils_Assets.getLibrary("default");if(library!=null){ManifestResources.preloadLibraries.push(library)}else{ManifestResources.preloadLibraryNames.push("default")}library=lime_utils_Assets.getLibrary("locale");if(library!=null){ManifestResources.preloadLibraries.push(library)}else{ManifestResources.preloadLibraryNames.push("locale")}library=lime_utils_Assets.getLibrary("Preloader2015");if(library!=null){ManifestResources.preloadLibraries.push(library)}else{ManifestResources.preloadLibraryNames.push("Preloader2015")}};var lime_text_Font=function(name){if(name!=null){this.name=name}if(!this.__init){if(this.ascender==undefined){this.ascender=0}if(this.descender==undefined){this.descender=0}if(this.height==undefined){this.height=0}if(this.numGlyphs==undefined){this.numGlyphs=0}if(this.underlinePosition==undefined){this.underlinePosition=0}if(this.underlineThickness==undefined){this.underlineThickness=0}if(this.unitsPerEM==undefined){this.unitsPerEM=0}if(this.__fontID!=null){if(lime_utils_Assets.isLocal(this.__fontID)){this.__fromBytes(lime_utils_Assets.getBytes(this.__fontID))}}else if(this.__fontPath!=null){this.__fromFile(this.__fontPath)}}};$hxClasses["lime.text.Font"]=lime_text_Font;lime_text_Font.__name__="lime.text.Font";lime_text_Font.fromFile=function(path){if(path==null){return null}var font=new lime_text_Font;font.__fromFile(path);return font};lime_text_Font.loadFromName=function(path){return(new lime_text_Font).__loadFromName(path)};lime_text_Font.__measureFontNode=function(fontFamily){var node=window.document.createElement("span");node.setAttribute("aria-hidden","true");node.appendChild(window.document.createTextNode("BESbswy"));var style=node.style;style.display="block";style.position="absolute";style.top="-9999px";style.left="-9999px";style.fontSize="300px";style.width="auto";style.height="auto";style.lineHeight="normal";style.margin="0";style.padding="0";style.fontVariant="normal";style.whiteSpace="nowrap";style.fontFamily=fontFamily;window.document.body.appendChild(node);return node};lime_text_Font.prototype={ascender:null,descender:null,height:null,name:null,numGlyphs:null,src:null,underlinePosition:null,underlineThickness:null,unitsPerEM:null,__fontID:null,__fontPath:null,__init:null,__copyFrom:function(other){if(other!=null){this.ascender=other.ascender;this.descender=other.descender;this.height=other.height;this.name=other.name;this.numGlyphs=other.numGlyphs;this.src=other.src;this.underlinePosition=other.underlinePosition;this.underlineThickness=other.underlineThickness;this.unitsPerEM=other.unitsPerEM;this.__fontID=other.__fontID;this.__fontPath=other.__fontPath;this.__init=true}},__fromBytes:function(bytes){this.__fontPath=null},__fromFile:function(path){this.__fontPath=path},__loadFromName:function(name){var _gthis=this;var promise=new lime_app_Promise;this.name=name;var userAgent=window.navigator.userAgent.toLowerCase();var isSafari=userAgent.indexOf(" safari/")>=0&&userAgent.indexOf(" chrome/")<0;var isUIWebView=new EReg("(iPhone|iPod|iPad).*AppleWebKit(?!.*Version)","i").match(userAgent);if(!isSafari&&!isUIWebView&&(window.document.fonts&&($_=window.document.fonts,$bind($_,$_.load)))){window.document.fonts.load("1em '"+name+"'").then(function(_){promise.complete(_gthis)},function(_1){lime_utils_Log.warn('Could not load web font "'+name+'"',{fileName:"lime/text/Font.hx",lineNumber:513,className:"lime.text.Font",methodName:"__loadFromName"});promise.complete(_gthis)})}else{var node1=lime_text_Font.__measureFontNode("'"+name+"', sans-serif");var node2=lime_text_Font.__measureFontNode("'"+name+"', serif");var width1=node1.offsetWidth;var width2=node2.offsetWidth;var interval=-1;var timeout=3e3;var intervalLength=50;var intervalCount=0;var loaded;var timeExpired;var checkFont=function(){intervalCount+=1;loaded=node1.offsetWidth!=width1||node2.offsetWidth!=width2;timeExpired=intervalCount*intervalLength>=timeout;if(loaded||timeExpired){window.clearInterval(interval);node1.parentNode.removeChild(node1);node2.parentNode.removeChild(node2);node1=null;node2=null;if(timeExpired){lime_utils_Log.warn('Could not load web font "'+name+'"',{fileName:"lime/text/Font.hx",lineNumber:548,className:"lime.text.Font",methodName:"__loadFromName"})}promise.complete(_gthis)}};interval=window.setInterval(checkFont,intervalLength)}return promise.future},__class__:lime_text_Font};var _$_$ASSET_$_$fonts_$coopbl_$ttf=$hx_exports["__ASSET__fonts_coopbl_ttf"]=function(){this.ascender=1880;this.descender=-469;this.height=2349;this.numGlyphs=252;this.underlinePosition=-366;this.underlineThickness=257;this.unitsPerEM=2048;this.name="Cooper Black";lime_text_Font.call(this)};$hxClasses["__ASSET__fonts_coopbl_ttf"]=_$_$ASSET_$_$fonts_$coopbl_$ttf;_$_$ASSET_$_$fonts_$coopbl_$ttf.__name__="__ASSET__fonts_coopbl_ttf";_$_$ASSET_$_$fonts_$coopbl_$ttf.__super__=lime_text_Font;_$_$ASSET_$_$fonts_$coopbl_$ttf.prototype=$extend(lime_text_Font.prototype,{__class__:_$_$ASSET_$_$fonts_$coopbl_$ttf});var openfl_text_Font=function(name){lime_text_Font.call(this,name)};$hxClasses["openfl.text.Font"]=openfl_text_Font;openfl_text_Font.__name__="openfl.text.Font";openfl_text_Font.enumerateFonts=function(enumerateDeviceFonts){if(enumerateDeviceFonts==null){enumerateDeviceFonts=false}return openfl_text_Font.__registeredFonts};openfl_text_Font.fromFile=function(path){var font=new openfl_text_Font;font.__fromFile(path);return font};openfl_text_Font.loadFromName=function(path){return lime_text_Font.loadFromName(path).then(function(limeFont){var font=new openfl_text_Font;font.__fromLimeFont(limeFont);return lime_app_Future.withValue(font)})};openfl_text_Font.registerFont=function(font){var instance=null;if(js_Boot.getClass(font)==null){instance=js_Boot.__cast(Type.createInstance(font,[]),openfl_text_Font)}else{instance=js_Boot.__cast(font,openfl_text_Font)}if(instance!=null){openfl_text_Font.__registeredFonts.push(instance);var k=instance.name;var _this=openfl_text_Font.__fontByName;if(__map_reserved[k]!=null){_this.setReserved(k,instance)}else{_this.h[k]=instance}}};openfl_text_Font.__super__=lime_text_Font;openfl_text_Font.prototype=$extend(lime_text_Font.prototype,{__fromLimeFont:function(font){this.__copyFrom(font)},__class__:openfl_text_Font});var _$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf=$hx_exports["__ASSET__OPENFL__fonts_coopbl_ttf"]=function(){this.__fromLimeFont(new _$_$ASSET_$_$fonts_$coopbl_$ttf);openfl_text_Font.call(this)};$hxClasses["__ASSET__OPENFL__fonts_coopbl_ttf"]=_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf;_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf.__name__="__ASSET__OPENFL__fonts_coopbl_ttf";_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf.__super__=openfl_text_Font;_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf.prototype=$extend(openfl_text_Font.prototype,{__class__:_$_$ASSET_$_$OPENFL_$_$fonts_$coopbl_$ttf});Math.__name__="Math";var Reflect=function(){};$hxClasses["Reflect"]=Reflect;Reflect.__name__="Reflect";Reflect.field=function(o,field){try{return o[field]}catch(e){haxe_CallStack.lastException=e;return null}};Reflect.getProperty=function(o,field){var tmp;if(o==null){return null}else{var tmp1;if(o.__properties__){tmp=o.__properties__["get_"+field];tmp1=tmp}else{tmp1=false}if(tmp1){return o[tmp]()}else{return o[field]}}};Reflect.setProperty=function(o,field,value){var tmp;var tmp1;if(o.__properties__){tmp=o.__properties__["set_"+field];tmp1=tmp}else{tmp1=false}if(tmp1){o[tmp](value)}else{o[field]=value}};Reflect.fields=function(o){var a=[];if(o!=null){var hasOwnProperty=Object.prototype.hasOwnProperty;for(var f in o){if(f!="__id__"&&f!="hx__closures__"&&hasOwnProperty.call(o,f)){a.push(f)}}}return a};Reflect.isFunction=function(f){if(typeof f=="function"){return!(f.__name__||f.__ename__)}else{return false}};Reflect.compare=function(a,b){if(a==b){return 0}else if(a>b){return 1}else{return-1}};Reflect.compareMethods=function(f1,f2){if(f1==f2){return true}if(!Reflect.isFunction(f1)||!Reflect.isFunction(f2)){return false}if(f1.scope==f2.scope&&f1.method==f2.method){return f1.method!=null}else{return false}};Reflect.deleteField=function(o,field){if(!Object.prototype.hasOwnProperty.call(o,field)){return false}delete o[field];return true};Reflect.copy=function(o){if(o==null){return null}var o2={};var _g=0;var _g1=Reflect.fields(o);while(_g<_g1.length){var f=_g1[_g];++_g;o2[f]=Reflect.field(o,f)}return o2};var Std=function(){};$hxClasses["Std"]=Std;Std.__name__="Std";Std.string=function(s){return js_Boot.__string_rec(s,"")};Std.parseInt=function(x){if(x!=null){var _g=0;var _g1=x.length;while(_g<_g1){var i=_g++;var c=x.charCodeAt(i);if(c<=8||c>=14&&c!=32&&c!=45){var v=parseInt(x,x[i+1]=="x"||x[i+1]=="X"?16:10);if(isNaN(v)){return null}else{return v}}}}return null};Std.random=function(x){if(x<=0){return 0}else{return Math.floor(Math.random()*x)}};var _$String_String_$Impl_$=function(){};$hxClasses["_String.String_Impl_"]=_$String_String_$Impl_$;_$String_String_$Impl_$.__name__="_String.String_Impl_";_$String_String_$Impl_$.fromCharCode=function(code){return String.fromCodePoint(code)};var StringBuf=function(){this.b=""};$hxClasses["StringBuf"]=StringBuf;StringBuf.__name__="StringBuf";StringBuf.prototype={b:null,__class__:StringBuf};var StringTools=function(){};$hxClasses["StringTools"]=StringTools;StringTools.__name__="StringTools";StringTools.htmlEscape=function(s,quotes){var buf_b="";var _g_offset=0;var _g_s=s;while(_g_offset<_g_s.length){var s1=_g_s;var index=_g_offset++;var c=s1.charCodeAt(index);if(c>=55296&&c<=56319){c=c-55232<<10|s1.charCodeAt(index+1)&1023}var c1=c;if(c1>=65536){++_g_offset}var code=c1;switch(code){case 34:if(quotes){buf_b+="&quot;"}else{buf_b+=String.fromCodePoint(code)}break;case 38:buf_b+="&amp;";break;case 39:if(quotes){buf_b+="&#039;"}else{buf_b+=String.fromCodePoint(code)}break;case 60:buf_b+="&lt;";break;case 62:buf_b+="&gt;";break;default:buf_b+=String.fromCodePoint(code)}}return buf_b};StringTools.startsWith=function(s,start){if(s.length>=start.length){return s.lastIndexOf(start,0)==0}else{return false}};StringTools.endsWith=function(s,end){var elen=end.length;var slen=s.length;if(slen>=elen){return s.indexOf(end,slen-elen)==slen-elen}else{return false}};StringTools.isSpace=function(s,pos){var c=HxOverrides.cca(s,pos);if(!(c>8&&c<14)){return c==32}else{return true}};StringTools.ltrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,r))++r;if(r>0){return HxOverrides.substr(s,r,l-r)}else{return s}};StringTools.rtrim=function(s){var l=s.length;var r=0;while(r<l&&StringTools.isSpace(s,l-r-1))++r;if(r>0){return HxOverrides.substr(s,0,l-r)}else{return s}};StringTools.trim=function(s){return StringTools.ltrim(StringTools.rtrim(s))};StringTools.replace=function(s,sub,by){return s.split(sub).join(by)};StringTools.hex=function(n,digits){var s="";while(true){s="0123456789ABCDEF".charAt(n&15)+s;n>>>=4;if(!(n>0)){break}}if(digits!=null){while(s.length<digits)s="0"+s}return s};var ValueType=$hxEnums["ValueType"]={__ename__:"ValueType",__constructs__:["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"],TNull:{_hx_index:0,__enum__:"ValueType",toString:$estr},TInt:{_hx_index:1,__enum__:"ValueType",toString:$estr},TFloat:{_hx_index:2,__enum__:"ValueType",toString:$estr},TBool:{_hx_index:3,__enum__:"ValueType",toString:$estr},TObject:{_hx_index:4,__enum__:"ValueType",toString:$estr},TFunction:{_hx_index:5,__enum__:"ValueType",toString:$estr},TClass:($_=function(c){return{_hx_index:6,c:c,__enum__:"ValueType",toString:$estr}},$_.__params__=["c"],$_),TEnum:($_=function(e){return{_hx_index:7,e:e,__enum__:"ValueType",toString:$estr}},$_.__params__=["e"],$_),TUnknown:{_hx_index:8,__enum__:"ValueType",toString:$estr}};var Type=function(){};$hxClasses["Type"]=Type;Type.__name__="Type";Type.resolveEnum=function(name){return $hxEnums[name]};Type.createInstance=function(cl,args){return new(Function.prototype.bind.apply(cl,[null].concat(args)))};Type.createEnum=function(e,constr,params){var f=Reflect.field(e,constr);if(f==null){throw new js__$Boot_HaxeError("No such constructor "+constr)}if(Reflect.isFunction(f)){if(params==null){throw new js__$Boot_HaxeError("Constructor "+constr+" need parameters")}return f.apply(e,params)}if(params!=null&&params.length!=0){throw new js__$Boot_HaxeError("Constructor "+constr+" does not need parameters")}return f};Type.getInstanceFields=function(c){var a=[];for(var i in c.prototype)a.push(i);HxOverrides.remove(a,"__class__");HxOverrides.remove(a,"__properties__");return a};Type.typeof=function(v){switch(typeof v){case"boolean":return ValueType.TBool;case"function":if(v.__name__||v.__ename__){return ValueType.TObject}return ValueType.TFunction;case"number":if(Math.ceil(v)==v%2147483648){return ValueType.TInt}return ValueType.TFloat;case"object":if(v==null){return ValueType.TNull}var e=v.__enum__;if(e!=null){return ValueType.TEnum($hxEnums[e])}var c=js_Boot.getClass(v);if(c!=null){return ValueType.TClass(c)}return ValueType.TObject;case"string":return ValueType.TClass(String);case"undefined":return ValueType.TNull;default:return ValueType.TUnknown}};Type.enumParameters=function(e){var enm=$hxEnums[e.__enum__];var ctorName=enm.__constructs__[e._hx_index];var params=enm[ctorName].__params__;if(params!=null){var _g=[];var _g1=0;while(_g1<params.length){var p=params[_g1];++_g1;_g.push(e[p])}return _g}else{return[]}};var _$UInt_UInt_$Impl_$={};$hxClasses["_UInt.UInt_Impl_"]=_$UInt_UInt_$Impl_$;_$UInt_UInt_$Impl_$.__name__="_UInt.UInt_Impl_";_$UInt_UInt_$Impl_$.gt=function(a,b){var aNeg=a<0;if(aNeg!=b<0){return aNeg}else{return a>b}};_$UInt_UInt_$Impl_$.toFloat=function(this1){if(this1<0){return 4294967296+this1}else{return this1+0}};var _$Xml_XmlType_$Impl_$={};$hxClasses["_Xml.XmlType_Impl_"]=_$Xml_XmlType_$Impl_$;_$Xml_XmlType_$Impl_$.__name__="_Xml.XmlType_Impl_";_$Xml_XmlType_$Impl_$.toString=function(this1){switch(this1){case 0:return"Element";case 1:return"PCData";case 2:return"CData";case 3:return"Comment";case 4:return"DocType";case 5:return"ProcessingInstruction";case 6:return"Document"}};var Xml=function(nodeType){this.nodeType=nodeType;this.children=[];this.attributeMap=new haxe_ds_StringMap};$hxClasses["Xml"]=Xml;Xml.__name__="Xml";Xml.parse=function(str){return haxe_xml_Parser.parse(str)};Xml.createElement=function(name){var xml=new Xml(Xml.Element);if(xml.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeName=name;return xml};Xml.createPCData=function(data){var xml=new Xml(Xml.PCData);if(xml.nodeType==Xml.Document||xml.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeValue=data;return xml};Xml.createCData=function(data){var xml=new Xml(Xml.CData);if(xml.nodeType==Xml.Document||xml.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeValue=data;return xml};Xml.createComment=function(data){var xml=new Xml(Xml.Comment);if(xml.nodeType==Xml.Document||xml.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeValue=data;return xml};Xml.createDocType=function(data){var xml=new Xml(Xml.DocType);if(xml.nodeType==Xml.Document||xml.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeValue=data;return xml};Xml.createProcessingInstruction=function(data){var xml=new Xml(Xml.ProcessingInstruction);if(xml.nodeType==Xml.Document||xml.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(xml.nodeType))}xml.nodeValue=data;return xml};Xml.createDocument=function(){return new Xml(Xml.Document)};Xml.prototype={nodeType:null,nodeName:null,nodeValue:null,parent:null,children:null,attributeMap:null,get:function(att){if(this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}var _this=this.attributeMap;if(__map_reserved[att]!=null){return _this.getReserved(att)}else{return _this.h[att]}},set:function(att,value){if(this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}var _this=this.attributeMap;if(__map_reserved[att]!=null){_this.setReserved(att,value)}else{_this.h[att]=value}},exists:function(att){if(this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}var _this=this.attributeMap;if(__map_reserved[att]!=null){return _this.existsReserved(att)}else{return _this.h.hasOwnProperty(att)}},attributes:function(){if(this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}return this.attributeMap.keys()},elementsNamed:function(name){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}var _g=[];var _g1=0;var _g2=this.children;while(_g1<_g2.length){var child=_g2[_g1];++_g1;var tmp;if(child.nodeType==Xml.Element){if(child.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(child.nodeType))}tmp=child.nodeName==name}else{tmp=false}if(tmp){_g.push(child)}}return HxOverrides.iter(_g)},firstElement:function(){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}var _g=0;var _g1=this.children;while(_g<_g1.length){var child=_g1[_g];++_g;if(child.nodeType==Xml.Element){return child}}return null},addChild:function(x){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}if(x.parent!=null){x.parent.removeChild(x)}this.children.push(x);x.parent=this},removeChild:function(x){if(this.nodeType!=Xml.Document&&this.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(this.nodeType))}if(HxOverrides.remove(this.children,x)){x.parent=null;return true}return false},toString:function(){return haxe_xml_Printer.print(this)},__class__:Xml};var engine_Performance=function(full){if(full==null){full=true}this.fullHeight=50;this.memPeak=0;this.barHeight=30;this.graphBarPadding=1;this.graphBarTickness=2;this.paddingY=3;this.padding=5;this.skip=10;this.skipped=0;openfl_display_Sprite.call(this);this.mouseEnabled=false;this.mouseChildren=false;this.performanceText=new openfl_text_TextField;this.performanceText.set_y(this.paddingY);this.performanceText.set_selectable(false);this.performanceText.set_defaultTextFormat(new openfl_text_TextFormat("_sans",12,15592941));this.performanceText.set_text("FPS: 0\nMEM: 0 MB\nMPK: 0 MB\nCANVAS\nDATE");this.performanceText.set_autoSize(1);this.performanceText.set_embedFonts(true);this.addChild(this.performanceText);if(!full){this.performanceText.set_text("Build: "+"20191211");return}this.fpsHistory=[];this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.fpsHistory.push(0);this.times=[];this.fullHeight=this.performanceText.get_textHeight()+this.paddingY*3|0;this.barHeight=(this.performanceText.get_textHeight()|0)-this.paddingY;var nextX=this.padding;this.graph=new openfl_display_Shape;this.graph.set_x(nextX);this.graph.set_y(this.paddingY*2);this.addChild(this.graph);nextX=this.graph.get_x()+(this.graphBarTickness+this.graphBarPadding)*28+this.graphBarTickness+this.padding;this.performanceText.set_x(nextX);this.defines="";var _g=new haxe_ds_StringMap;if(__map_reserved["zame_particles"]!=null){_g.setReserved("zame_particles","1.2.1")}else{_g.h["zame_particles"]="1.2.1"}if(__map_reserved["zame-particles"]!=null){_g.setReserved("zame-particles","1.2.1")}else{_g.h["zame-particles"]="1.2.1"}if(__map_reserved["web"]!=null){_g.setReserved("web","1")}else{_g.h["web"]="1"}if(__map_reserved["utf16"]!=null){_g.setReserved("utf16","1")}else{_g.h["utf16"]="1"}if(__map_reserved["true"]!=null){_g.setReserved("true","1")}else{_g.h["true"]="1"}if(__map_reserved["tools"]!=null){_g.setReserved("tools","7.6.3")}else{_g.h["tools"]="7.6.3"}if(__map_reserved["target.utf16"]!=null){_g.setReserved("target.utf16","true")}else{_g.h["target.utf16"]="true"}if(__map_reserved["target.unicode"]!=null){_g.setReserved("target.unicode","true")}else{_g.h["target.unicode"]="true"}if(__map_reserved["target.name"]!=null){_g.setReserved("target.name","js")}else{_g.h["target.name"]="js"}if(__map_reserved["swf"]!=null){_g.setReserved("swf","1")}else{_g.h["swf"]="1"}if(__map_reserved["source-header"]!=null){_g.setReserved("source-header","Generated by Haxe 4.0.3")}else{_g.h["source-header"]="Generated by Haxe 4.0.3"}if(__map_reserved["openfl_html5"]!=null){_g.setReserved("openfl_html5","1")}else{_g.h["openfl_html5"]="1"}if(__map_reserved["openfl-html5"]!=null){_g.setReserved("openfl-html5","1")}else{_g.h["openfl-html5"]="1"}if(__map_reserved["openfl"]!=null){_g.setReserved("openfl","8.9.5")}else{_g.h["openfl"]="8.9.5"}if(__map_reserved["no_traces"]!=null){_g.setReserved("no_traces","1")}else{_g.h["no_traces"]="1"}if(__map_reserved["no_compilation"]!=null){_g.setReserved("no_compilation","1")}else{_g.h["no_compilation"]="1"}if(__map_reserved["no-compilation"]!=null){_g.setReserved("no-compilation","1")}else{_g.h["no-compilation"]="1"}if(__map_reserved["nape_haxe4"]!=null){_g.setReserved("nape_haxe4","2.0.21")}else{_g.h["nape_haxe4"]="2.0.21"}if(__map_reserved["nape-haxe4"]!=null){_g.setReserved("nape-haxe4","2.0.21")}else{_g.h["nape-haxe4"]="2.0.21"}if(__map_reserved["lime_webgl"]!=null){_g.setReserved("lime_webgl","1")}else{_g.h["lime_webgl"]="1"}if(__map_reserved["lime_html5"]!=null){_g.setReserved("lime_html5","1")}else{_g.h["lime_html5"]="1"}if(__map_reserved["lime_howlerjs"]!=null){_g.setReserved("lime_howlerjs","1")}else{_g.h["lime_howlerjs"]="1"}if(__map_reserved["lime_dom"]!=null){_g.setReserved("lime_dom","1")}else{_g.h["lime_dom"]="1"}if(__map_reserved["lime_canvas"]!=null){_g.setReserved("lime_canvas","1")}else{_g.h["lime_canvas"]="1"}if(__map_reserved["lime-webgl"]!=null){_g.setReserved("lime-webgl","1")}else{_g.h["lime-webgl"]="1"}if(__map_reserved["lime-html5"]!=null){_g.setReserved("lime-html5","1")}else{_g.h["lime-html5"]="1"}if(__map_reserved["lime-howlerjs"]!=null){_g.setReserved("lime-howlerjs","1")}else{_g.h["lime-howlerjs"]="1"}if(__map_reserved["lime-dom"]!=null){_g.setReserved("lime-dom","1")}else{_g.h["lime-dom"]="1"}if(__map_reserved["lime-canvas"]!=null){_g.setReserved("lime-canvas","1")}else{_g.h["lime-canvas"]="1"}if(__map_reserved["lime"]!=null){_g.setReserved("lime","7.6.3")}else{_g.h["lime"]="7.6.3"}if(__map_reserved["js_es5"]!=null){_g.setReserved("js_es5","1")}else{_g.h["js_es5"]="1"}if(__map_reserved["js_es"]!=null){_g.setReserved("js_es","5")}else{_g.h["js_es"]="5"}if(__map_reserved["js-es5"]!=null){_g.setReserved("js-es5","1")}else{_g.h["js-es5"]="1"}if(__map_reserved["js"]!=null){_g.setReserved("js","1")}else{_g.h["js"]="1"}if(__map_reserved["html5"]!=null){_g.setReserved("html5","1")}else{_g.h["html5"]="1"}if(__map_reserved["howlerjs"]!=null){_g.setReserved("howlerjs","1")}else{_g.h["howlerjs"]="1"}if(__map_reserved["haxe_ver"]!=null){_g.setReserved("haxe_ver","4.003")}else{_g.h["haxe_ver"]="4.003"}if(__map_reserved["haxe4"]!=null){_g.setReserved("haxe4","1")}else{_g.h["haxe4"]="1"}if(__map_reserved["haxe3"]!=null){_g.setReserved("haxe3","1")}else{_g.h["haxe3"]="1"}if(__map_reserved["haxe"]!=null){_g.setReserved("haxe","4.0.3")}else{_g.h["haxe"]="4.0.3"}if(__map_reserved["format"]!=null){_g.setReserved("format","3.4.2")}else{_g.h["format"]="3.4.2"}if(__map_reserved["dce"]!=null){_g.setReserved("dce","full")}else{_g.h["dce"]="full"}if(__map_reserved["analyzer_optimize"]!=null){_g.setReserved("analyzer_optimize","1")}else{_g.h["analyzer_optimize"]="1"}if(__map_reserved["analyzer-optimize"]!=null){_g.setReserved("analyzer-optimize","1")}else{_g.h["analyzer-optimize"]="1"}if(__map_reserved["actuate"]!=null){_g.setReserved("actuate","1.8.9")}else{_g.h["actuate"]="1.8.9"}if(__map_reserved["NAPE_RELEASE_BUILD"]!=null){_g.setReserved("NAPE_RELEASE_BUILD","1")}else{_g.h["NAPE_RELEASE_BUILD"]="1"}var j=_g.keys();while(j.hasNext()){var j1=j.next();if((__map_reserved[j1]!=null?_g.getReserved(j1):_g.h[j1]).charAt(1)==(__map_reserved[j1]!=null?_g.getReserved(j1):_g.h[j1]).charAt(3)&&(__map_reserved[j1]!=null?_g.getReserved(j1):_g.h[j1]).charAt(1)=="."){this.defines+=j1+": "+(__map_reserved[j1]!=null?_g.getReserved(j1):_g.h[j1])+"\n"}}this.defineText=new openfl_text_TextField;this.defineText.set_y(this.paddingY);this.defineText.set_x(this.performanceText.get_x()+this.performanceText.get_textWidth());this.defineText.set_selectable(false);this.defineText.set_defaultTextFormat(new openfl_text_TextFormat("_sans",12,15592941));this.defineText.set_text(this.defines);this.defineText.set_autoSize(1);this.defineText.set_embedFonts(true);this.addChild(this.defineText);openfl_Lib.get_current().stage.addEventListener("enterFrame",$bind(this,this.onEnter))};$hxClasses["engine.Performance"]=engine_Performance;engine_Performance.__name__="engine.Performance";engine_Performance.__super__=openfl_display_Sprite;engine_Performance.prototype=$extend(openfl_display_Sprite.prototype,{performanceText:null,fpsHistory:null,skipped:null,skip:null,times:null,padding:null,paddingY:null,graphBarTickness:null,graphBarPadding:null,barHeight:null,memPeak:null,graph:null,fullHeight:null,defines:null,defineText:null,onEnter:function(_){var now=(new Date).getTime()/1e3;this.times.push(now);while(this.times[0]<now-1)this.times.shift();if(this.skipped==this.skip){this.skipped=0;var mem=Math.round(openfl_system_System.get_totalMemory()/1024/1024*100)/100;if(mem>this.memPeak){this.memPeak=mem}if(this.get_visible()){this.drawGraph(this.times.length);var _this=lime_app_Application.current.meta;this.performanceText.set_text("FPS: "+this.times.length+"\nMEM: "+mem+" MB\nMEM peak: "+this.memPeak+" MB\nRender: "+this.stage.window.context.type+"\nBuild: "+(__map_reserved["version"]!=null?_this.getReserved("version"):_this.h["version"])+" ("+"20191211"+")"+"\nview: "+this.stage.stageWidth+"x"+this.stage.stageHeight);this.defineText.set_x(this.performanceText.get_x()+this.performanceText.get_textWidth()+this.paddingY)}}this.skipped++},drawGraph:function(fps){var color;this.fpsHistory.push(fps);this.fpsHistory.shift();this.graph.get_graphics().clear();var _g=0;while(_g<30){var i=_g++;this.graph.get_graphics().moveTo(this.graphBarTickness*i+i*this.graphBarPadding,this.barHeight);if(this.fpsHistory[i]>55){color=10477976}else if(this.fpsHistory[i]>40){color=15720098}else if(this.fpsHistory[i]>30){color=15711650}else{color=15573156}this.graph.get_graphics().lineStyle(this.graphBarTickness,color,.5);this.graph.get_graphics().lineTo(this.graphBarTickness*i+i*this.graphBarPadding,this.barHeight-this.barHeight*this.fpsHistory[i]/60)}},__class__:engine_Performance});var openfl_display_Tileset=function(bitmapData,rects){this.__bitmapData=bitmapData;this.rectData=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.__data=[];if(rects!=null){var _g=0;while(_g<rects.length)this.addRect(rects[_g++])}};$hxClasses["openfl.display.Tileset"]=openfl_display_Tileset;openfl_display_Tileset.__name__="openfl.display.Tileset";openfl_display_Tileset.prototype={rectData:null,__bitmapData:null,__data:null,addRect:function(rect){if(rect==null){return-1}this.rectData.push(rect.x);this.rectData.push(rect.y);this.rectData.push(rect.width);this.rectData.push(rect.height);var tileData=new openfl_display__$Tileset_TileData(rect);tileData.__update(this.__bitmapData);this.__data.push(tileData);return this.__data.length-1},getRect:function(id){if(id<this.__data.length&&id>=0){return new openfl_geom_Rectangle(this.__data[id].x,this.__data[id].y,this.__data[id].width,this.__data[id].height)}return null},get_bitmapData:function(){return this.__bitmapData},__class__:openfl_display_Tileset,__properties__:{get_bitmapData:"get_bitmapData"}};var engine_atlas_NamedTileset=function(bdata){this.originalRect=[];this.names=new haxe_ds_StringMap;openfl_display_Tileset.call(this,bdata,null)};$hxClasses["engine.atlas.NamedTileset"]=engine_atlas_NamedTileset;engine_atlas_NamedTileset.__name__="engine.atlas.NamedTileset";engine_atlas_NamedTileset.__super__=openfl_display_Tileset;engine_atlas_NamedTileset.prototype=$extend(openfl_display_Tileset.prototype,{names:null,originalRect:null,getTile:function(name,originX,originY){if(originY==null){originY=0}if(originX==null){originX=0}var tmp;var _this=this.names;if(__map_reserved[name]!=null?_this.existsReserved(name):_this.h.hasOwnProperty(name)){var _this1=this.names;tmp=this.originalRect[__map_reserved[name]!=null?_this1.getReserved(name):_this1.h[name]]!=null}else{tmp=false}if(tmp){var _this2=this.names;var _this3=this.names;var _this4=this.names;var _this5=this.names;var _this6=this.names;return new openfl_display_Tile(__map_reserved[name]!=null?_this2.getReserved(name):_this2.h[name],0,0,1,1,0,this.originalRect[__map_reserved[name]!=null?_this3.getReserved(name):_this3.h[name]].x+this.originalRect[__map_reserved[name]!=null?_this4.getReserved(name):_this4.h[name]].width*originX,this.originalRect[__map_reserved[name]!=null?_this5.getReserved(name):_this5.h[name]].y+this.originalRect[__map_reserved[name]!=null?_this6.getReserved(name):_this6.h[name]].height*originY)}else{return new openfl_display_Tile(-1)}},__class__:engine_atlas_NamedTileset});var engine_atlas_StarlingTileset=function(img,xml){engine_atlas_NamedTileset.call(this,img);var x=Xml.parse(xml).firstElement();if(x.nodeType!=Xml.Document&&x.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Invalid nodeType "+_$Xml_XmlType_$Impl_$.toString(x.nodeType))}var _g=0;var _g1=haxe_xml__$Access_NodeListAccess_$Impl_$.resolve(x,"SubTexture");while(_g<_g1.length){var texture=_g1[_g];++_g;var name=haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"name");var rect=new openfl_geom_Rectangle(parseFloat(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"x")),parseFloat(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"y")),parseFloat(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"width")),parseFloat(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"height")));var size=new openfl_geom_Rectangle(0,0,rect.width,rect.height);if(haxe_xml__$Access_HasAttribAccess_$Impl_$.resolve(texture,"frameX")){size.setTo(Std.parseInt(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"frameX")),Std.parseInt(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"frameY")),Std.parseInt(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"frameWidth")),Std.parseInt(haxe_xml__$Access_AttribAccess_$Impl_$.resolve(texture,"frameHeight")))}var id=this.addRect(rect);var _this=this.names;if(__map_reserved[name]!=null){_this.setReserved(name,id)}else{_this.h[name]=id}this.originalRect[id]=size}};$hxClasses["engine.atlas.StarlingTileset"]=engine_atlas_StarlingTileset;engine_atlas_StarlingTileset.__name__="engine.atlas.StarlingTileset";engine_atlas_StarlingTileset.__super__=engine_atlas_NamedTileset;engine_atlas_StarlingTileset.prototype=$extend(engine_atlas_NamedTileset.prototype,{__class__:engine_atlas_StarlingTileset});var engine_button_Button=function(_x,_y,_callback,_clickOnce,hitRadius){if(hitRadius==null){hitRadius=-1}if(_clickOnce==null){_clickOnce=true}this.pixelPerfectBitmap=null;this.pixelPerfect=false;openfl_display_Sprite.call(this);this.downPosition=new openfl_geom_Point;this.set_x(_x);this.set_y(_y);this.callback=_callback;this.clickOnce=_clickOnce;this.clicked=false;this._enabled=true;if(hitRadius==-1){this.addEventListener("click",$bind(this,this.click),false,0,true);this.addEventListener("mouseDown",$bind(this,this.down),false,0,true);this.addEventListener("mouseOver",$bind(this,this.over),false,0,true);this.addEventListener("mouseOut",$bind(this,this.out),false,0,true);this.addEventListener("mouseMove",$bind(this,this.rollover),false,0,true)}else{this.s=new openfl_display_Sprite;this.s.get_graphics().beginFill(16711935,0);if(openfl_ui_Multitouch.get_supportsTouchEvents()){if(hitRadius<40){hitRadius=40}}this.s.get_graphics().drawCircle(0,0,hitRadius);this.s.get_graphics().endFill();this.addChild(this.s);this.s.addEventListener("click",$bind(this,this.click),false,0,true);this.s.addEventListener("mouseDown",$bind(this,this.down),false,0,true);this.s.addEventListener("mouseMove",$bind(this,this.rollover),false,0,true);this.s.addEventListener("mouseOver",$bind(this,this.over),false,0,true);this.s.addEventListener("mouseOut",$bind(this,this.out),false,0,true)}};$hxClasses["engine.button.Button"]=engine_button_Button;engine_button_Button.__name__="engine.button.Button";engine_button_Button.__super__=openfl_display_Sprite;engine_button_Button.prototype=$extend(openfl_display_Sprite.prototype,{downPosition:null,callback:null,clicked:null,_enabled:null,clickOnce:null,s:null,pixelPerfect:null,pixelPerfectBitmap:null,updateGraphics:function(state){if(state==null){state=0}},click:function(e){if(this._enabled&&this.clicked==false){if(this.pixelPerfect&&!this.pixelPerfectBitmap.hitTest(new openfl_geom_Point(0,0),0,new openfl_geom_Point(e.localX+this.get_width()/2,e.localY+this.get_height()/2))){return}this.updateGraphics(1);if(e!=null&&(Math.abs(this.downPosition.y-e.stageY)>200||Math.abs(this.downPosition.x-e.stageX)>200)){return}if(this.clickOnce){this.clicked=true}lime_ui_Haptic.vibrate(0,20);this.callback()}},rollover:function(e){if(!this._enabled){return}if(this.pixelPerfect){if(!this.pixelPerfectBitmap.hitTest(new openfl_geom_Point(0,0),0,new openfl_geom_Point(e.localX+this.get_width()/2,e.localY+this.get_height()/2))){this.updateGraphics(0)}else{this.updateGraphics(1)}}},out:function(e){if(!this._enabled){return}this.updateGraphics(0)},over:function(e){if(!this._enabled){return}if(this.pixelPerfect){return}this.updateGraphics(1)},down:function(e){this.downPosition.x=e.stageX;this.downPosition.y=e.stageY;if(!this._enabled){return}if(this.pixelPerfect&&!this.pixelPerfectBitmap.hitTest(new openfl_geom_Point(0,0),0,new openfl_geom_Point(e.localX+this.get_width()/2,e.localY+this.get_height()/2))){return}this.updateGraphics(2)},setEnabled:function(enabled){if(!enabled){this.updateGraphics(3)}if(enabled){this.updateGraphics(0)}this._enabled=enabled;this.clicked=!enabled},__class__:engine_button_Button});var engine_button_DisplayObjectButton=function(displayObject,_x,_y,_callback,_clickOnce,hitRadius){if(hitRadius==null){hitRadius=-1}if(_clickOnce==null){_clickOnce=true}engine_button_Button.call(this,_x,_y,_callback,_clickOnce,hitRadius);this.displayObject=displayObject;displayObject.set_x(-displayObject.get_width()/2);displayObject.set_y(-displayObject.get_height()/2);this.addChild(displayObject)};$hxClasses["engine.button.DisplayObjectButton"]=engine_button_DisplayObjectButton;engine_button_DisplayObjectButton.__name__="engine.button.DisplayObjectButton";engine_button_DisplayObjectButton.__super__=engine_button_Button;engine_button_DisplayObjectButton.prototype=$extend(engine_button_Button.prototype,{displayObject:null,updateGraphics:function(state){if(state==null){state=0}switch(state){case 0:this.set_scaleX(this.set_scaleY(1));break;case 1:this.set_scaleX(this.set_scaleY(1.03));break;case 2:this.set_scaleX(this.set_scaleY(.97));break;case 3:break}},__class__:engine_button_DisplayObjectButton});var engine_button_ImageButton=function(bitmapFile,smooth,_x,_y,_callback,_clickOnce,hitRadius){if(hitRadius==null){hitRadius=-1}if(_clickOnce==null){_clickOnce=true}if(smooth==null){smooth=true}engine_button_DisplayObjectButton.call(this,new openfl_display_Bitmap(openfl_utils_Assets.getBitmapData(bitmapFile),null,smooth),_x,_y,_callback,_clickOnce,hitRadius)};$hxClasses["engine.button.ImageButton"]=engine_button_ImageButton;engine_button_ImageButton.__name__="engine.button.ImageButton";engine_button_ImageButton.__super__=engine_button_DisplayObjectButton;engine_button_ImageButton.prototype=$extend(engine_button_DisplayObjectButton.prototype,{__class__:engine_button_ImageButton});var engine_updateable_IUpdateable=function(){};$hxClasses["engine.updateable.IUpdateable"]=engine_updateable_IUpdateable;engine_updateable_IUpdateable.__name__="engine.updateable.IUpdateable";engine_updateable_IUpdateable.__isInterface__=true;engine_updateable_IUpdateable.prototype={update:null,__class__:engine_updateable_IUpdateable};var engine_button_MuteButton=function(sfx){if(sfx==null){sfx=false}this.sfx=false;openfl_display_Sprite.call(this);this.sfx=sfx;this.btnMute=new engine_button_ImageButton("img/menu/buttons/btn_sound_on.png",true,0,0,$bind(this,this.mute),false);this.btnUnmute=new engine_button_ImageButton("img/menu/buttons/btn_sound_off.png",true,0,0,$bind(this,this.unmute),false);this.addChild(this.btnMute);this.addChild(this.btnUnmute);this.update(0)};$hxClasses["engine.button.MuteButton"]=engine_button_MuteButton;engine_button_MuteButton.__name__="engine.button.MuteButton";engine_button_MuteButton.__interfaces__=[engine_updateable_IUpdateable];engine_button_MuteButton.__super__=openfl_display_Sprite;engine_button_MuteButton.prototype=$extend(openfl_display_Sprite.prototype,{btnMute:null,btnUnmute:null,sfx:null,mute:function(){engine_soundlib_SoundLib.toggleMute();this.update(0);return},unmute:function(){engine_soundlib_SoundLib.toggleMute();engine_soundlib_SoundList.FX(1);this.update(0);return},update:function(dt){if(engine_soundlib_SoundLib.muted){this.btnMute.set_visible(false);this.btnUnmute.set_visible(true)}else{this.btnMute.set_visible(true);this.btnUnmute.set_visible(false)}},__class__:engine_button_MuteButton});var engine_datamanager_DataManager=function(){};$hxClasses["engine.datamanager.DataManager"]=engine_datamanager_DataManager;engine_datamanager_DataManager.__name__="engine.datamanager.DataManager";engine_datamanager_DataManager.load=function(){var _this=lime_app_Application.current.meta;engine_datamanager_DataManager.LOCAL_STORAGE_STRING=__map_reserved["packageName"]!=null?_this.getReserved("packageName"):_this.h["packageName"];var sharedObject=openfl_net_SharedObject.getLocal(engine_datamanager_DataManager.LOCAL_STORAGE_STRING,"/");if(Reflect.fields(sharedObject.data).length==0){engine_datamanager_DataManager.storageMap=new haxe_ds_StringMap}else if(engine_datamanager_DataManager.checkHash(sharedObject.data)){engine_datamanager_DataManager.storageMap=sharedObject.data.MapTest}else{engine_datamanager_DataManager.clear();engine_datamanager_DataManager.load()}};engine_datamanager_DataManager.save=function(){var sharedObject=openfl_net_SharedObject.getLocal(engine_datamanager_DataManager.LOCAL_STORAGE_STRING,"/");sharedObject.data.MapTest=engine_datamanager_DataManager.storageMap;sharedObject.flush();engine_datamanager_DataManager.saveHash(sharedObject.data)};engine_datamanager_DataManager.hash=function(data){return haxe_crypto_Md5.encode(haxe_Serializer.run(data))};engine_datamanager_DataManager.checkHash=function(data){var sharedObject=openfl_net_SharedObject.getLocal(engine_datamanager_DataManager.LOCAL_STORAGE_STRING+"_hash","/");return engine_datamanager_DataManager.hash(data)==sharedObject.data.hash};engine_datamanager_DataManager.saveHash=function(data){var sharedObject=openfl_net_SharedObject.getLocal(engine_datamanager_DataManager.LOCAL_STORAGE_STRING+"_hash","/");sharedObject.data.hash=engine_datamanager_DataManager.hash(data);sharedObject.flush()};engine_datamanager_DataManager.clear=function(){var sharedObject=openfl_net_SharedObject.getLocal(engine_datamanager_DataManager.LOCAL_STORAGE_STRING,"/");sharedObject.clear();sharedObject.flush()};engine_datamanager_DataManager.getData=function(key){var _this=engine_datamanager_DataManager.storageMap;if(__map_reserved[key]!=null){return _this.getReserved(key)}else{return _this.h[key]}};engine_datamanager_DataManager.setData=function(key,value){var _this=engine_datamanager_DataManager.storageMap;if(__map_reserved[key]!=null){_this.setReserved(key,value)}else{_this.h[key]=value}return};engine_datamanager_DataManager.existData=function(key){var _this=engine_datamanager_DataManager.storageMap;if(__map_reserved[key]!=null){return _this.existsReserved(key)}else{return _this.h.hasOwnProperty(key)}};var engine_image_Image=function(bitmapData,align,centerAt,smoothing){if(smoothing==null){smoothing=true}if(align==null){align=7}this.smooth=smoothing;this.bitmap=new openfl_display_Bitmap(bitmapData,null,smoothing);if(centerAt==null){this.setAlign(align)}else{this.bitmap.set_x(-this.bitmap.get_width()*centerAt.x);this.bitmap.set_y(-this.bitmap.get_height()*centerAt.y)}openfl_display_Sprite.call(this);this.addChild(this.bitmap)};$hxClasses["engine.image.Image"]=engine_image_Image;engine_image_Image.__name__="engine.image.Image";engine_image_Image.__super__=openfl_display_Sprite;engine_image_Image.prototype=$extend(openfl_display_Sprite.prototype,{bitmap:null,smooth:null,setAlign:function(align){switch(align){case 1:this.bitmap.set_x(0);this.bitmap.set_y(-this.bitmap.get_height());break;case 2:this.bitmap.set_x(-this.bitmap.get_width()/2);this.bitmap.set_y(-this.bitmap.get_height());break;case 3:this.bitmap.set_x(-this.bitmap.get_width());this.bitmap.set_y(-this.bitmap.get_height());break;case 4:this.bitmap.set_x(0);this.bitmap.set_y(-this.bitmap.get_height()/2);break;case 5:this.bitmap.set_x(-this.bitmap.get_width()/2);this.bitmap.set_y(-this.bitmap.get_height()/2);break;case 6:this.bitmap.set_x(-this.bitmap.get_width());this.bitmap.set_y(-this.bitmap.get_height()/2);break;case 7:this.bitmap.set_x(this.bitmap.set_y(0));break;case 8:this.bitmap.set_x(-this.bitmap.get_width()/2);this.bitmap.set_y(0);break;case 9:this.bitmap.set_x(-this.bitmap.get_width());this.bitmap.set_y(0);break;default:}},__class__:engine_image_Image});var engine_input_KeyboardMap=function(){};$hxClasses["engine.input.KeyboardMap"]=engine_input_KeyboardMap;engine_input_KeyboardMap.__name__="engine.input.KeyboardMap";engine_input_KeyboardMap.init=function(){engine_input_KeyboardMap.dirty=false;engine_input_KeyboardMap.isPressed=new Array(engine_input_KeyboardMap.KEY_CODES_LENGHT);engine_input_KeyboardMap.justReleased=new Array(engine_input_KeyboardMap.KEY_CODES_LENGHT);engine_input_KeyboardMap.keyBuffer=new Array(engine_input_KeyboardMap.KEY_CODES_LENGHT);engine_input_KeyboardMap.justPressed=new Array(engine_input_KeyboardMap.KEY_CODES_LENGHT);var _g=0;var _g1=engine_input_KeyboardMap.KEY_CODES_LENGHT;while(_g<_g1){var i=_g++;engine_input_KeyboardMap.isPressed[i]=false;engine_input_KeyboardMap.keyBuffer[i]=false;engine_input_KeyboardMap.justReleased[i]=false;engine_input_KeyboardMap.justPressed[i]=false}openfl_Lib.get_current().stage.addEventListener("keyDown",engine_input_KeyboardMap.keyDown,false,99999999);openfl_Lib.get_current().stage.addEventListener("keyUp",engine_input_KeyboardMap.keyUp,false,99999999)};engine_input_KeyboardMap.keyUp=function(e){engine_input_KeyboardMap.keyBuffer[e.keyCode]=false;engine_input_KeyboardMap.dirty=true};engine_input_KeyboardMap.keyDown=function(e){engine_input_KeyboardMap.keyBuffer[e.keyCode]=true;engine_input_KeyboardMap.dirty=true};engine_input_KeyboardMap.update=function(){if(engine_input_KeyboardMap.dirty){var _g=0;var _g1=engine_input_KeyboardMap.KEY_CODES_LENGHT;while(_g<_g1){var i=_g++;if(engine_input_KeyboardMap.isPressed[i]&&!engine_input_KeyboardMap.keyBuffer[i]){engine_input_KeyboardMap.justReleased[i]=true}else{engine_input_KeyboardMap.justReleased[i]=false}if(!engine_input_KeyboardMap.isPressed[i]&&engine_input_KeyboardMap.keyBuffer[i]){engine_input_KeyboardMap.justPressed[i]=true}else{engine_input_KeyboardMap.justPressed[i]=false}engine_input_KeyboardMap.isPressed[i]=engine_input_KeyboardMap.keyBuffer[i]}}};var engine_input_SwipeData=function(){this.duration=0;this.maxSpeedY=0;this.maxSpeedX=0;this.lenghtSquared=0;this.endY=0;this.endX=0;this.startY=0;this.startX=0};$hxClasses["engine.input.SwipeData"]=engine_input_SwipeData;engine_input_SwipeData.__name__="engine.input.SwipeData";engine_input_SwipeData.prototype={startX:null,startY:null,endX:null,endY:null,lenghtSquared:null,finalSpeed:null,finalAngle:null,maxSpeedX:null,maxSpeedY:null,duration:null,lastPoint:null,startDrag:function(x,y){this.lastPoint=new openfl_geom_Point;this.startX=x;this.startY=y;this.endX=x;this.endY=y;this.finalSpeed=0;this.finalAngle=0;this.duration=0;this.draggin(x,y,0)},draggin:function(x,y,dt){var spdX=(x-this.endX)/dt;var spdY=(y-this.endY)/dt;this.endX=x;this.endY=y;this.lenghtSquared=Math.pow(this.startX-this.endX,2)+Math.pow(this.startY-this.endY,2);this.duration+=dt;if(Math.abs(spdX)>Math.abs(this.maxSpeedX)){this.maxSpeedX=spdX}if(Math.abs(spdY)>Math.abs(this.maxSpeedY)){this.maxSpeedY=spdY}this.lastPoint.x=x;this.lastPoint.y=y},endDrag:function(x,y,dt){var fp=new openfl_geom_Point(x,y);var ip=this.lastPoint.clone();this.draggin(x,y,dt);if(fp==null||ip==null){throw new js__$Boot_HaxeError("DRAG END ERROR: Maybe you finished a drag before starting it?")}var dx=fp.x-ip.x;var dy=fp.y-ip.y;this.finalSpeed=Math.sqrt(Math.pow(dx,2)+Math.pow(dy,2))/dt;this.finalAngle=Math.atan2(dy,dx)},__class__:engine_input_SwipeData};var engine_input_TouchLib=function(){};$hxClasses["engine.input.TouchLib"]=engine_input_TouchLib;engine_input_TouchLib.__name__="engine.input.TouchLib";engine_input_TouchLib.init=function(displayObject){engine_input_TouchLib._start=new haxe_ds_IntMap;engine_input_TouchLib._end=new haxe_ds_IntMap;engine_input_TouchLib._current=new haxe_ds_IntMap;engine_input_TouchLib._touching=new haxe_ds_IntMap;engine_input_TouchLib._swiping=new haxe_ds_IntMap;engine_input_TouchLib._swipes=new haxe_ds_IntMap;engine_input_TouchLib.start=new haxe_ds_IntMap;engine_input_TouchLib.end=new haxe_ds_IntMap;engine_input_TouchLib.current=new haxe_ds_IntMap;engine_input_TouchLib.touching=new haxe_ds_IntMap;engine_input_TouchLib.swipes=new haxe_ds_IntMap;displayObject.stage.addEventListener("mouseDown",engine_input_TouchLib.touchDown,false,99999999);displayObject.stage.addEventListener("mouseUp",engine_input_TouchLib.touchUp,false,99999999);displayObject.stage.addEventListener("mouseMove",engine_input_TouchLib.touchMove,false,99999999)};engine_input_TouchLib.touchMove=function(e){if(!engine_input_TouchLib._touching.h[0]){return}e.touchPointID=0;engine_input_TouchLib.dirty=true;if(engine_input_TouchLib._current.h[e.touchPointID]!=null){engine_input_TouchLib._current.h[e.touchPointID].x=e.stageX;engine_input_TouchLib._current.h[e.touchPointID].y=e.stageY}else{engine_input_TouchLib._current.h[e.touchPointID]={x:e.stageX,y:e.stageY}}};engine_input_TouchLib.touchUp=function(e){e.touchPointID=0;engine_input_TouchLib.dirty=true;engine_input_TouchLib._touching.h[e.touchPointID]=false;engine_input_TouchLib._swiping.h[e.touchPointID]=false;if(engine_input_TouchLib._current.h[e.touchPointID]!=null){engine_input_TouchLib._current.h[e.touchPointID].x=e.stageX;engine_input_TouchLib._current.h[e.touchPointID].y=e.stageY}else{engine_input_TouchLib._current.h[e.touchPointID]={x:e.stageX,y:e.stageY}}if(engine_input_TouchLib._end.h[e.touchPointID]!=null){engine_input_TouchLib._end.h[e.touchPointID].x=e.stageX;engine_input_TouchLib._end.h[e.touchPointID].y=e.stageY}else{engine_input_TouchLib._end.h[e.touchPointID]={x:e.stageX,y:e.stageY}}};engine_input_TouchLib.touchDown=function(e){e.touchPointID=0;engine_input_TouchLib.dirty=true;engine_input_TouchLib._swiping.h[e.touchPointID]=true;engine_input_TouchLib._touching.h[e.touchPointID]=true;engine_input_TouchLib._swipes.h[e.touchPointID]=new engine_input_SwipeData;engine_input_TouchLib._swipes.h[e.touchPointID].startDrag(e.stageX,e.stageY);if(engine_input_TouchLib._current.h[e.touchPointID]!=null){engine_input_TouchLib._current.h[e.touchPointID].x=e.stageX;engine_input_TouchLib._current.h[e.touchPointID].y=e.stageY}else{engine_input_TouchLib._current.h[e.touchPointID]={x:e.stageX,y:e.stageY}}if(engine_input_TouchLib._start.h[e.touchPointID]!=null){engine_input_TouchLib._start.h[e.touchPointID].x=e.stageX;engine_input_TouchLib._start.h[e.touchPointID].y=e.stageY}else{engine_input_TouchLib._start.h[e.touchPointID]={x:e.stageX,y:e.stageY}}};engine_input_TouchLib.update=function(dt){engine_input_TouchLib.justSwiped=false;var i=engine_input_TouchLib._swiping.keys();while(i.hasNext()){var i1=i.next();if(engine_input_TouchLib._swiping.h[i1]==true){engine_input_TouchLib._swipes.h[i1].draggin(engine_input_TouchLib._current.h[i1].x,engine_input_TouchLib._current.h[i1].y,dt)}else if(engine_input_TouchLib._swipes.h[i1]!=null){engine_input_TouchLib._swipes.h[i1].endDrag(engine_input_TouchLib._end.h[i1].x,engine_input_TouchLib._end.h[i1].y,dt);engine_input_TouchLib._swiping.remove(i1);engine_input_TouchLib.swipes.h[i1]=engine_input_TouchLib._swipes.h[i1];engine_input_TouchLib.justSwiped=true}}if(engine_input_TouchLib.dirty){engine_input_TouchLib.dirty=false;engine_input_TouchLib.start=engine_input_TouchLib.cloneIntTouchPointMap(engine_input_TouchLib._start);engine_input_TouchLib.end=engine_input_TouchLib.cloneIntTouchPointMap(engine_input_TouchLib._end);engine_input_TouchLib.current=engine_input_TouchLib.cloneIntTouchPointMap(engine_input_TouchLib._current);engine_input_TouchLib.touching=engine_input_TouchLib.cloneIntBoolMap(engine_input_TouchLib._touching)}};engine_input_TouchLib.cloneIntTouchPointMap=function(m){var result=new haxe_ds_IntMap;var i=m.keys();while(i.hasNext()){var i1=i.next();var value=Reflect.copy(m.h[i1]);result.h[i1]=value}return result};engine_input_TouchLib.cloneIntBoolMap=function(m){var result=new haxe_ds_IntMap;var i=m.keys();while(i.hasNext()){var i1=i.next();result.h[i1]=m.h[i1]}return result};var openfl_display_Tile=function(id,x,y,scaleX,scaleY,rotation,originX,originY){if(originY==null){originY=0}if(originX==null){originX=0}if(rotation==null){rotation=0}if(scaleY==null){scaleY=1}if(scaleX==null){scaleX=1}if(y==null){y=0}if(x==null){x=0}if(id==null){id=0}this.__id=id;this.__matrix=new openfl_geom_Matrix;if(x!=0){this.set_x(x)}if(y!=0){this.set_y(y)}if(scaleX!=1){this.set_scaleX(scaleX)}if(scaleY!=1){this.set_scaleY(scaleY)}if(rotation!=0){this.set_rotation(rotation)}this.__dirty=true;this.__length=0;this.__originX=originX;this.__originY=originY;this.__alpha=1;this.__blendMode=null;this.__visible=true};$hxClasses["openfl.display.Tile"]=openfl_display_Tile;openfl_display_Tile.__name__="openfl.display.Tile";openfl_display_Tile.prototype={data:null,parent:null,__alpha:null,__blendMode:null,__colorTransform:null,__dirty:null,__id:null,__length:null,__matrix:null,__originX:null,__originY:null,__rect:null,__rotation:null,__rotationCosine:null,__rotationSine:null,__scaleX:null,__scaleY:null,__shader:null,__tileset:null,__visible:null,getBounds:function(targetCoordinateSpace){var result=new openfl_geom_Rectangle;this.__findTileRect(result);var matrix=openfl_geom_Matrix.__pool.get();if(targetCoordinateSpace!=null&&targetCoordinateSpace!=this){matrix.copyFrom(this.__getWorldTransform());var targetMatrix=openfl_geom_Matrix.__pool.get();targetMatrix.copyFrom(targetCoordinateSpace.__getWorldTransform());targetMatrix.invert();matrix.concat(targetMatrix);openfl_geom_Matrix.__pool.release(targetMatrix)}else{matrix.identity()}this.__getBounds(result,matrix);openfl_geom_Matrix.__pool.release(matrix);return result},__getBounds:function(result,matrix){result.__transform(result,matrix)},__findTileRect:function(result){if(this.get_tileset()==null){if(this.parent!=null){var parentTileset=this.parent.__findTileset();if(parentTileset==null){result.setTo(0,0,0,0)}else{var _g=parentTileset.getRect(this.get_id());if(_g==null){result.setTo(0,0,0,0)}else{result.copyFrom(_g)}}}else{result.setTo(0,0,0,0)}}else{result.copyFrom(this.get_tileset().getRect(this.get_id()))}result.x=0;result.y=0},__findTileset:function(){if(this.get_tileset()!=null){return this.get_tileset()}if(this.parent instanceof openfl_display_Tilemap){return this.parent.get_tileset()}if(this.parent==null){return null}return this.parent.__findTileset()},__getWorldTransform:function(){var retval=this.get_matrix().clone();if(this.parent!=null){retval.concat(this.parent.__getWorldTransform())}return retval},__setRenderDirty:function(){if(!this.__dirty){this.__dirty=true;if(this.parent!=null){this.parent.__setRenderDirty()}}},get_alpha:function(){return this.__alpha},set_alpha:function(value){if(value!=this.__alpha){this.__alpha=value;this.__setRenderDirty()}return value},get_colorTransform:function(){return this.__colorTransform},get_height:function(){var result=openfl_geom_Rectangle.__pool.get();this.__findTileRect(result);this.__getBounds(result,this.get_matrix());var h=result.height;openfl_geom_Rectangle.__pool.release(result);return h},set_height:function(value){var result=openfl_geom_Rectangle.__pool.get();this.__findTileRect(result);if(result.height!=0){this.set_scaleY(value/result.height)}openfl_geom_Rectangle.__pool.release(result);return value},get_id:function(){return this.__id},set_id:function(value){if(value!=this.__id){this.__id=value;this.__setRenderDirty()}return value},get_matrix:function(){return this.__matrix},get_originX:function(){return this.__originX},set_originX:function(value){if(value!=this.__originX){this.__originX=value;this.__setRenderDirty()}return value},get_originY:function(){return this.__originY},set_originY:function(value){if(value!=this.__originY){this.__originY=value;this.__setRenderDirty()}return value},get_rotation:function(){if(this.__rotation==null){if(this.__matrix.b==0&&this.__matrix.c==0){this.__rotation=0;this.__rotationSine=0;this.__rotationCosine=1}else{var radians=Math.atan2(this.__matrix.d,this.__matrix.c)-Math.PI/2;this.__rotation=radians*(180/Math.PI);this.__rotationSine=Math.sin(radians);this.__rotationCosine=Math.cos(radians)}}return this.__rotation},set_rotation:function(value){if(value!=this.__rotation){this.__rotation=value;var radians=value*(Math.PI/180);this.__rotationSine=Math.sin(radians);this.__rotationCosine=Math.cos(radians);var __scaleX=this.get_scaleX();var __scaleY=this.get_scaleY();this.__matrix.a=this.__rotationCosine*__scaleX;this.__matrix.b=this.__rotationSine*__scaleX;this.__matrix.c=-this.__rotationSine*__scaleY;this.__matrix.d=this.__rotationCosine*__scaleY;this.__setRenderDirty()}return value},get_scaleX:function(){if(this.__scaleX==null){if(this.get_matrix().b==0){this.__scaleX=this.__matrix.a}else{this.__scaleX=Math.sqrt(this.__matrix.a*this.__matrix.a+this.__matrix.b*this.__matrix.b)}}return this.__scaleX},set_scaleX:function(value){if(value!=this.__scaleX){this.__scaleX=value;if(this.__matrix.b==0){this.__matrix.a=value}else{this.get_rotation();this.__matrix.a=this.__rotationCosine*value;this.__matrix.b=this.__rotationSine*value}this.__setRenderDirty()}return value},get_scaleY:function(){if(this.__scaleY==null){if(this.__matrix.c==0){this.__scaleY=this.get_matrix().d}else{this.__scaleY=Math.sqrt(this.__matrix.c*this.__matrix.c+this.__matrix.d*this.__matrix.d)}}return this.__scaleY},set_scaleY:function(value){if(value!=this.__scaleY){this.__scaleY=value;if(this.__matrix.c==0){this.__matrix.d=value}else{this.get_rotation();this.__matrix.c=-this.__rotationSine*value;this.__matrix.d=this.__rotationCosine*value}this.__setRenderDirty()}return value},get_shader:function(){return this.__shader},get_tileset:function(){return this.__tileset},set_tileset:function(value){if(value!=this.__tileset){this.__tileset=value;this.__setRenderDirty()}return value},get_visible:function(){return this.__visible},set_visible:function(value){if(value!=this.__visible){this.__visible=value;this.__setRenderDirty()}return value},get_width:function(){var result=openfl_geom_Rectangle.__pool.get();this.__findTileRect(result);this.__getBounds(result,this.get_matrix());var w=result.width;openfl_geom_Rectangle.__pool.release(result);return w},set_width:function(value){var result=openfl_geom_Rectangle.__pool.get();this.__findTileRect(result);if(result.width!=0){this.set_scaleX(value/result.width)}openfl_geom_Rectangle.__pool.release(result);return value},get_x:function(){return this.__matrix.tx},set_x:function(value){if(value!=this.__matrix.tx){this.__matrix.tx=value;this.__setRenderDirty()}return value},get_y:function(){return this.__matrix.ty},set_y:function(value){if(value!=this.__matrix.ty){this.__matrix.ty=value;this.__setRenderDirty()}return value},__class__:openfl_display_Tile,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",set_width:"set_width",get_width:"get_width",set_visible:"set_visible",get_visible:"get_visible",set_tileset:"set_tileset",get_tileset:"get_tileset",get_shader:"get_shader",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_rotation:"set_rotation",get_rotation:"get_rotation",set_originY:"set_originY",get_originY:"get_originY",set_originX:"set_originX",get_originX:"get_originX",get_matrix:"get_matrix",set_id:"set_id",get_id:"get_id",set_height:"set_height",get_height:"get_height",get_colorTransform:"get_colorTransform",set_alpha:"set_alpha",get_alpha:"get_alpha"}};var engine_mapsheet_AnimatedTile=function(anchorX,anchorY,scaleX,scaleY){if(scaleY==null){scaleY=1}if(scaleX==null){scaleX=1}if(anchorY==null){anchorY=0}if(anchorX==null){anchorX=0}openfl_display_Tile.call(this,0,0,0,scaleX,scaleY,0,anchorX,anchorY);this.behaviors=new haxe_ds_StringMap;this.behaviorQueue=[]};$hxClasses["engine.mapsheet.AnimatedTile"]=engine_mapsheet_AnimatedTile;engine_mapsheet_AnimatedTile.__name__="engine.mapsheet.AnimatedTile";engine_mapsheet_AnimatedTile.__interfaces__=[engine_updateable_IUpdateable];engine_mapsheet_AnimatedTile.__super__=openfl_display_Tile;engine_mapsheet_AnimatedTile.prototype=$extend(openfl_display_Tile.prototype,{behaviors:null,currentBehavior:null,behaviorComplete:null,behaviorQueue:null,loopTime:null,timeElapsed:null,addBehavior:function(B){var key=B.name;var _this=this.behaviors;if(__map_reserved[key]!=null){_this.setReserved(key,B)}else{_this.h[key]=B}},resolveBehavior:function(behavior){if(behavior instanceof engine_mapsheet_data_Behavior){return behavior}else if(typeof behavior=="string"){var _this=this.behaviors;var key=behavior;if(__map_reserved[key]!=null){return _this.getReserved(key)}else{return _this.h[key]}}return null},showBehavior:function(behavior,restart){if(restart==null){restart=true}this.behaviorQueue=[];this.updateBehavior(this.resolveBehavior(behavior),restart)},update:function(deltaTime){if(!this.behaviorComplete){this.timeElapsed+=deltaTime;var ratio=this.timeElapsed/this.loopTime;if(ratio>=1){if(this.currentBehavior.loop){ratio-=Math.floor(ratio)}else{this.behaviorComplete=true;ratio=1}}this.set_id(this.currentBehavior.frames[Math.round(ratio*(this.currentBehavior.frames.length-1))]);if(this.behaviorComplete){if(this.behaviorQueue.length>0){this.updateBehavior(this.behaviorQueue.shift())}}}},updateBehavior:function(behavior,restart){if(restart==null){restart=true}if(behavior!=null){if(restart||behavior!=this.currentBehavior){this.currentBehavior=behavior;this.timeElapsed=0;this.behaviorComplete=false;this.loopTime=behavior.frames.length/behavior.frameRate*1e3|0;if(this.get_id()==-1){this.update(0)}}}else{this.set_id(-1);this.currentBehavior=null;this.behaviorComplete=true}},__class__:engine_mapsheet_AnimatedTile});var engine_mapsheet_Animation=function(sheet,smoothing){if(smoothing==null){smoothing=false}this.timeElapsed=0;openfl_display_Sprite.call(this);this.smoothing=smoothing;this.spritesheet=sheet;this.behaviorQueue=[];this.canvas=new openfl_display_Tilemap(sheet.tWidth,sheet.tHeight,sheet,smoothing);this.tile=new openfl_display_Tile(-1);this.canvas.addTile(this.tile);this.addChild(this.canvas)};$hxClasses["engine.mapsheet.Animation"]=engine_mapsheet_Animation;engine_mapsheet_Animation.__name__="engine.mapsheet.Animation";engine_mapsheet_Animation.__interfaces__=[engine_updateable_IUpdateable];engine_mapsheet_Animation.__super__=openfl_display_Sprite;engine_mapsheet_Animation.prototype=$extend(openfl_display_Sprite.prototype,{canvas:null,tile:null,currentBehavior:null,currentFrameIndex:null,smoothing:null,spritesheet:null,behaviorComplete:null,behaviorQueue:null,loopTime:null,timeElapsed:null,resolveBehavior:function(behavior){if(behavior instanceof engine_mapsheet_data_Behavior){return behavior}else if(typeof behavior=="string"){if(this.spritesheet!=null){var _this=this.spritesheet.behaviors;var key=behavior;if(__map_reserved[key]!=null){return _this.getReserved(key)}else{return _this.h[key]}}}return null},showBehavior:function(behavior,restart){if(restart==null){restart=true}this.behaviorQueue=[];this.updateBehavior(this.resolveBehavior(behavior),restart)},update:function(deltaTime){if(!this.behaviorComplete){this.timeElapsed+=deltaTime;var ratio=this.timeElapsed/this.loopTime;if(ratio>=1){if(this.currentBehavior.loop){ratio-=Math.floor(ratio)}else{this.behaviorComplete=true;ratio=1}}this.currentFrameIndex=Math.round(ratio*(this.currentBehavior.frames.length-1));var frame=this.spritesheet.getFrame(this.currentBehavior.frames[this.currentFrameIndex]);this.tile.set_id(frame.id);this.canvas.set_x(frame.x);this.canvas.set_y(frame.y);if(this.behaviorComplete){if(this.behaviorQueue.length>0){this.updateBehavior(this.behaviorQueue.shift())}else if(this.hasEventListener("complete")){this.dispatchEvent(new openfl_events_Event("complete"))}}}},updateBehavior:function(behavior,restart){if(restart==null){restart=true}if(behavior!=null){if(restart||behavior!=this.currentBehavior){this.currentBehavior=behavior;this.timeElapsed=0;this.behaviorComplete=false;this.loopTime=behavior.frames.length/behavior.frameRate*1e3|0;if(this.tile.get_id()==-1){this.update(0)}}}else{this.tile.set_id(-1);this.currentBehavior=null;this.currentFrameIndex=-1;this.behaviorComplete=true}},__class__:engine_mapsheet_Animation});var engine_mapsheet_Mapsheet=function(image){openfl_display_Tileset.call(this,image);this.behaviors=new haxe_ds_StringMap;this.frames=[];this.totalFrames=0};$hxClasses["engine.mapsheet.Mapsheet"]=engine_mapsheet_Mapsheet;engine_mapsheet_Mapsheet.__name__="engine.mapsheet.Mapsheet";engine_mapsheet_Mapsheet.__super__=openfl_display_Tileset;engine_mapsheet_Mapsheet.prototype=$extend(openfl_display_Tileset.prototype,{behaviors:null,totalFrames:null,tWidth:null,tHeight:null,frames:null,slice:function(columns,rows,tileWidth,tileHeight){this.frames=[];this.totalFrames=columns*rows;if(tileWidth==null){tileWidth=this.get_bitmapData().width/columns|0}this.tWidth=tileWidth;if(tileHeight==null){tileHeight=this.get_bitmapData().height/rows|0}this.tHeight=tileHeight;var _g=0;while(_g<rows){var i=_g++;var _g1=0;while(_g1<columns)this.frames.push(new engine_mapsheet_data_Frame(this.addRect(new openfl_geom_Rectangle(_g1++*tileWidth,i*tileHeight,tileWidth,tileHeight)),0,0,tileWidth,tileHeight))}},addBehavior:function(behavior){var key=behavior.name;var _this=this.behaviors;if(__map_reserved[key]!=null){_this.setReserved(key,behavior)}else{_this.h[key]=behavior}},getFrame:function(index){var frame=this.frames[index];if(frame==null){throw new js__$Boot_HaxeError("mapsheet error: '"+index+"' Frame out of range. (You probably have a behavior that references a wrong tile index)")}return frame},__class__:engine_mapsheet_Mapsheet});var engine_mapsheet_data_Behavior=function(name,frames,loop,frameRate){if(frameRate==null){frameRate=30}if(loop==null){loop=false}if(name==null){name=""}if(name==""){name="behavior"+engine_mapsheet_data_Behavior.uniqueID++}if(frames==null){frames=[]}this.name=name;this.frames=frames;this.loop=loop;this.frameRate=frameRate};$hxClasses["engine.mapsheet.data.Behavior"]=engine_mapsheet_data_Behavior;engine_mapsheet_data_Behavior.__name__="engine.mapsheet.data.Behavior";engine_mapsheet_data_Behavior.prototype={frameRate:null,frames:null,loop:null,name:null,__class__:engine_mapsheet_data_Behavior};var engine_mapsheet_data_Frame=function(id,x,y,width,height){if(height==null){height=0}if(width==null){width=0}if(y==null){y=0}if(x==null){x=0}this.id=id;this.x=x;this.y=y;this.width=width;this.height=height};$hxClasses["engine.mapsheet.data.Frame"]=engine_mapsheet_data_Frame;engine_mapsheet_data_Frame.__name__="engine.mapsheet.data.Frame";engine_mapsheet_data_Frame.prototype={id:null,height:null,width:null,x:null,y:null,__class__:engine_mapsheet_data_Frame};var engine_progressbar_Progressbar=function(myBitmap,min_value,max_value,horizontal){if(horizontal==null){horizontal=true}if(max_value==null){max_value=1}if(min_value==null){min_value=0}this.isHorizontal=true;this.maxValue=100;this.minValue=1;openfl_display_Sprite.call(this);if(max_value<min_value){throw new js__$Boot_HaxeError("Error: Your max was lower than the min. max value: "+max_value+". min value: "+min_value)}this.currentValue=max_value;this.gaugeBar=new openfl_display_Bitmap(myBitmap,null,true);this.addChild(this.gaugeBar);if(this.isHorizontal){this.gaugeBar.set_x(0);this.gaugeBar.set_y(-this.gaugeBar.get_height()/2)}else{this.gaugeBar.set_x(-this.gaugeBar.get_width()/2);this.gaugeBar.set_y(this.gaugeBar.get_height())}this.gaugeMask=new openfl_display_Shape;if(this.isHorizontal){this.gaugeMask.get_graphics().beginFill();this.gaugeMask.get_graphics().drawRect(0,0,this.gaugeBar.get_width(),this.gaugeBar.get_height());this.gaugeMask.get_graphics().endFill();this.gaugeMask.set_x(this.gaugeBar.get_x());this.gaugeMask.set_y(this.gaugeBar.get_y())}else{this.gaugeMask.get_graphics().beginFill();this.gaugeMask.get_graphics().drawRect(0,0,this.gaugeBar.get_width(),-this.gaugeBar.get_height());this.gaugeMask.get_graphics().endFill();this.gaugeMask.set_x(this.gaugeBar.get_x());this.gaugeMask.set_y(this.gaugeBar.get_y()+this.gaugeBar.get_height())}this.addChild(this.gaugeMask);this.gaugeBar.set_mask(this.gaugeMask);this.set_maxValue(max_value);this.isHorizontal=horizontal;this.set_minValue(min_value);this.currentValue=this.minValue};$hxClasses["engine.progressbar.Progressbar"]=engine_progressbar_Progressbar;engine_progressbar_Progressbar.__name__="engine.progressbar.Progressbar";engine_progressbar_Progressbar.__super__=openfl_display_Sprite;engine_progressbar_Progressbar.prototype=$extend(openfl_display_Sprite.prototype,{gaugeMask:null,gaugeBar:null,minValue:null,maxValue:null,currentValue:null,isHorizontal:null,changeValue:function(newValue,tweenTime){if(tweenTime==null){tweenTime=.2}if(newValue==null){newValue=1}if(newValue>this.maxValue){lime_utils_Log.warn("Warning: Value is grater than the max allowed value. Got "+newValue+". Expected less than "+this.maxValue,{fileName:"src/engine/progressbar/Progressbar.hx",lineNumber:84,className:"engine.progressbar.Progressbar",methodName:"changeValue"})}if(newValue<this.minValue){lime_utils_Log.warn("Warning: Value is less than the min allowed value. Got "+newValue+". Expected more than "+this.minValue,{fileName:"src/engine/progressbar/Progressbar.hx",lineNumber:86,className:"engine.progressbar.Progressbar",methodName:"changeValue"})}this.currentValue=newValue;var aux=(this.currentValue-this.minValue)/(this.maxValue-this.minValue);if(aux<=0){aux=-1e-5}if(aux>1){aux=1}if(this.isHorizontal){motion_Actuate.tween(this.gaugeMask,tweenTime,{scaleX:aux}).ease(motion_easing_Quad.easeIn)}else{motion_Actuate.tween(this.gaugeMask,tweenTime,{scaleY:aux}).ease(motion_easing_Quad.easeIn)}},get_value:function(){return this.currentValue},set_minValue:function(value){this.minValue=value;this.changeValue(this.get_value(),0);return value},set_maxValue:function(value){this.maxValue=value;this.changeValue(this.get_value(),0);return value},__class__:engine_progressbar_Progressbar,__properties__:$extend(openfl_display_Sprite.prototype.__properties__,{get_value:"get_value",set_maxValue:"set_maxValue",set_minValue:"set_minValue"})});var engine_responsive_IResizable=function(){};$hxClasses["engine.responsive.IResizable"]=engine_responsive_IResizable;engine_responsive_IResizable.__name__="engine.responsive.IResizable";engine_responsive_IResizable.__isInterface__=true;var engine_scenemanager_IMutex=function(){};$hxClasses["engine.scenemanager.IMutex"]=engine_scenemanager_IMutex;engine_scenemanager_IMutex.__name__="engine.scenemanager.IMutex";engine_scenemanager_IMutex.__isInterface__=true;engine_scenemanager_IMutex.prototype={MUTEX:null,__class__:engine_scenemanager_IMutex};var engine_scenemanager_IPopup=function(){};$hxClasses["engine.scenemanager.IPopup"]=engine_scenemanager_IPopup;engine_scenemanager_IPopup.__name__="engine.scenemanager.IPopup";engine_scenemanager_IPopup.__isInterface__=true;engine_scenemanager_IPopup.prototype={closeHandler:null,__class__:engine_scenemanager_IPopup};var engine_scenemanager_IScene=function(){};$hxClasses["engine.scenemanager.IScene"]=engine_scenemanager_IScene;engine_scenemanager_IScene.__name__="engine.scenemanager.IScene";engine_scenemanager_IScene.__isInterface__=true;engine_scenemanager_IScene.prototype={onPopupOpen:null,onPopupClose:null,onShow:null,onDestroy:null,onFocus:null,onFocusLost:null,onResize:null,pause:null,resume:null,update:null,__class__:engine_scenemanager_IScene};var engine_scenemanager_ITransition=function(){};$hxClasses["engine.scenemanager.ITransition"]=engine_scenemanager_ITransition;engine_scenemanager_ITransition.__name__="engine.scenemanager.ITransition";engine_scenemanager_ITransition.__isInterface__=true;engine_scenemanager_ITransition.prototype={startCovering:null,startResolving:null,startUncovering:null,__class__:engine_scenemanager_ITransition};var engine_scenemanager_transitions_FadeColorTransition=function(color,colorFadeInTime,colorFadeOutTime){if(colorFadeOutTime==null){colorFadeOutTime=.5}if(colorFadeInTime==null){colorFadeInTime=.5}if(color==null){color=17}openfl_display_Sprite.call(this);this.colorFadeOutTime=colorFadeOutTime;this.colorFadeInTime=colorFadeInTime;this.color=color;this.coverup=new openfl_display_Shape;this.coverup.set_alpha(0);this.coverup.get_graphics().beginFill(color,1);this.coverup.get_graphics().drawRect(0,0,engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT);this.coverup.get_graphics().endFill();this.addChild(this.coverup)};$hxClasses["engine.scenemanager.transitions.FadeColorTransition"]=engine_scenemanager_transitions_FadeColorTransition;engine_scenemanager_transitions_FadeColorTransition.__name__="engine.scenemanager.transitions.FadeColorTransition";engine_scenemanager_transitions_FadeColorTransition.__interfaces__=[engine_scenemanager_IScene,engine_scenemanager_ITransition];engine_scenemanager_transitions_FadeColorTransition.__super__=openfl_display_Sprite;engine_scenemanager_transitions_FadeColorTransition.prototype=$extend(openfl_display_Sprite.prototype,{coverup:null,colorFadeInTime:null,colorFadeOutTime:null,color:null,onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},onResize:function(newW,newH){this.coverup.get_graphics().clear();this.coverup.get_graphics().beginFill(this.color,1);this.coverup.get_graphics().drawRect(0,0,engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT);this.coverup.get_graphics().endFill()},update:function(dt){},pause:function(){},resume:function(){},startCovering:function(whenCovered){motion_Actuate.tween(this.coverup,this.colorFadeInTime,{alpha:1}).ease(motion_easing_Linear.get_easeNone()).onComplete(whenCovered)},startResolving:function(whenResolved){whenResolved()},startUncovering:function(whenUncovered){motion_Actuate.tween(this.coverup,this.colorFadeOutTime,{alpha:0}).ease(motion_easing_Linear.get_easeNone()).onComplete(whenUncovered)},__class__:engine_scenemanager_transitions_FadeColorTransition});var engine_scenemanager_Manager=function(canvas){this.colorPerTime=0;this.shiftValue=5;this.syncDraw=false;this.crtEnabled=false;var _gthis=this;engine_datamanager_DataManager.load();this.sceneContainer=new openfl_display_Sprite;this.popupContainer=new openfl_display_Sprite;this.transitionContainer=new openfl_display_Sprite;this.popupQueue=[];this.popupParamQueue=[];this.internalRenderingCanvas=new openfl_display_Sprite;this.realCanvas=canvas;canvas.addChild(this.internalRenderingCanvas);this.internalRenderingCanvas.addChild(this.sceneContainer);this.internalRenderingCanvas.addChild(this.popupContainer);this.internalRenderingCanvas.addChild(this.transitionContainer);engine_input_KeyboardMap.init();engine_input_TouchLib.init(canvas);engine_scenemanager_Manager.currentTime=engine_scenemanager_Manager.previousTime=openfl_Lib.getTimer();canvas.addEventListener("enterFrame",function(e){if(_gthis.crtEnabled){_gthis.crtLoop()}engine_scenemanager_Manager.currentTime=openfl_Lib.getTimer();engine_scenemanager_Manager.dt=engine_scenemanager_Manager.currentTime-engine_scenemanager_Manager.previousTime;engine_scenemanager_Manager.previousTime=engine_scenemanager_Manager.currentTime;engine_input_KeyboardMap.update();engine_input_TouchLib.update(engine_scenemanager_Manager.dt);var _g=0;var _g1=_gthis.sceneContainer.get_numChildren();while(_g<_g1)js_Boot.__cast(_gthis.sceneContainer.getChildAt(_g++),engine_scenemanager_IScene).update(engine_scenemanager_Manager.dt);var _g2=0;var _g3=_gthis.popupContainer.get_numChildren();while(_g2<_g3)js_Boot.__cast(_gthis.popupContainer.getChildAt(_g2++),engine_scenemanager_IScene).update(engine_scenemanager_Manager.dt);var _g4=0;var _g5=_gthis.transitionContainer.get_numChildren();while(_g4<_g5)js_Boot.__cast(_gthis.transitionContainer.getChildAt(_g4++),engine_scenemanager_IScene).update(engine_scenemanager_Manager.dt)},false,999999,false);canvas.addEventListener("activate",function(e1){engine_scenemanager_Manager.hasFocus=true;engine_scenemanager_Manager.currentTime=engine_scenemanager_Manager.previousTime=openfl_Lib.getTimer();var _g6=0;var _g11=_gthis.sceneContainer.get_numChildren();while(_g6<_g11)js_Boot.__cast(_gthis.sceneContainer.getChildAt(_g6++),engine_scenemanager_IScene).onFocus();var _g21=0;var _g31=_gthis.popupContainer.get_numChildren();while(_g21<_g31)js_Boot.__cast(_gthis.popupContainer.getChildAt(_g21++),engine_scenemanager_IScene).onFocus();var _g41=0;var _g51=_gthis.transitionContainer.get_numChildren();while(_g41<_g51)js_Boot.__cast(_gthis.transitionContainer.getChildAt(_g41++),engine_scenemanager_IScene).onFocus()},false,999999,false);canvas.addEventListener("deactivate",function(e2){engine_scenemanager_Manager.hasFocus=false;var _g7=0;var _g12=_gthis.sceneContainer.get_numChildren();while(_g7<_g12)js_Boot.__cast(_gthis.sceneContainer.getChildAt(_g7++),engine_scenemanager_IScene).onFocusLost();var _g22=0;var _g32=_gthis.popupContainer.get_numChildren();while(_g22<_g32)js_Boot.__cast(_gthis.popupContainer.getChildAt(_g22++),engine_scenemanager_IScene).onFocusLost();var _g42=0;var _g52=_gthis.transitionContainer.get_numChildren();while(_g42<_g52)js_Boot.__cast(_gthis.transitionContainer.getChildAt(_g42++),engine_scenemanager_IScene).onFocusLost()},false,999999,false);canvas.stage.addEventListener("resize",function(e3){if(engine_scenemanager_Manager.isResizable){engine_scenemanager_Manager.SCREEN_WIDTH=canvas.stage.stageWidth;engine_scenemanager_Manager.SCREEN_HEIGHT=canvas.stage.stageHeight;var _g8=0;var _g13=_gthis.sceneContainer.get_numChildren();while(_g8<_g13)js_Boot.__cast(_gthis.sceneContainer.getChildAt(_g8++),engine_scenemanager_IScene).onResize(canvas.stage.stageWidth,canvas.stage.stageHeight);var _g23=0;var _g33=_gthis.popupContainer.get_numChildren();while(_g23<_g33)js_Boot.__cast(_gthis.popupContainer.getChildAt(_g23++),engine_scenemanager_IScene).onResize(canvas.stage.stageWidth,canvas.stage.stageHeight);var _g43=0;var _g53=_gthis.transitionContainer.get_numChildren();while(_g43<_g53)js_Boot.__cast(_gthis.transitionContainer.getChildAt(_g43++),engine_scenemanager_IScene).onResize(canvas.stage.stageWidth,canvas.stage.stageHeight)}})};$hxClasses["engine.scenemanager.Manager"]=engine_scenemanager_Manager;engine_scenemanager_Manager.__name__="engine.scenemanager.Manager";engine_scenemanager_Manager.init=function(canvas,w,h){if(engine_scenemanager_Manager.self==null){engine_scenemanager_Manager.self=new engine_scenemanager_Manager(canvas);if(engine_scenemanager_Manager.earlyPause){engine_scenemanager_Manager.self.realCanvas.mouseEnabled=false;engine_scenemanager_Manager.self.realCanvas.mouseChildren=false}}else{throw new js__$Boot_HaxeError("ERROR! You can't init() this twice")}if(w!=0&&h!=0){engine_scenemanager_Manager.SCREEN_HEIGHT=h;engine_scenemanager_Manager.SCREEN_WIDTH=w}else{engine_scenemanager_Manager.isResizable=true;engine_scenemanager_Manager.SCREEN_HEIGHT=canvas.stage.stageHeight;engine_scenemanager_Manager.SCREEN_WIDTH=canvas.stage.stageWidth}};engine_scenemanager_Manager.pause=function(){engine_scenemanager_Manager.earlyPause=true;motion_Actuate.pauseAll();openfl_media_SoundMixer.set_soundTransform(new openfl_media_SoundTransform(0));if(engine_scenemanager_Manager.self!=null){engine_scenemanager_Manager.self.realCanvas.mouseEnabled=false;engine_scenemanager_Manager.self.realCanvas.mouseChildren=false;var _g=0;var _g1=engine_scenemanager_Manager.self.sceneContainer.get_numChildren();while(_g<_g1)js_Boot.__cast(engine_scenemanager_Manager.self.sceneContainer.getChildAt(_g++),engine_scenemanager_IScene).pause();var _g2=0;var _g3=engine_scenemanager_Manager.self.popupContainer.get_numChildren();while(_g2<_g3)js_Boot.__cast(engine_scenemanager_Manager.self.popupContainer.getChildAt(_g2++),engine_scenemanager_IScene).pause();var _g4=0;var _g5=engine_scenemanager_Manager.self.transitionContainer.get_numChildren();while(_g4<_g5)js_Boot.__cast(engine_scenemanager_Manager.self.transitionContainer.getChildAt(_g4++),engine_scenemanager_IScene).pause()}};engine_scenemanager_Manager.resume=function(){engine_scenemanager_Manager.earlyPause=false;motion_Actuate.resumeAll();openfl_media_SoundMixer.set_soundTransform(new openfl_media_SoundTransform(1));if(engine_scenemanager_Manager.self!=null){engine_scenemanager_Manager.self.realCanvas.mouseEnabled=true;engine_scenemanager_Manager.self.realCanvas.mouseChildren=true;var _g=0;var _g1=engine_scenemanager_Manager.self.sceneContainer.get_numChildren();while(_g<_g1)js_Boot.__cast(engine_scenemanager_Manager.self.sceneContainer.getChildAt(_g++),engine_scenemanager_IScene).resume();var _g2=0;var _g3=engine_scenemanager_Manager.self.popupContainer.get_numChildren();while(_g2<_g3)js_Boot.__cast(engine_scenemanager_Manager.self.popupContainer.getChildAt(_g2++),engine_scenemanager_IScene).resume();var _g4=0;var _g5=engine_scenemanager_Manager.self.transitionContainer.get_numChildren();while(_g4<_g5)js_Boot.__cast(engine_scenemanager_Manager.self.transitionContainer.getChildAt(_g4++),engine_scenemanager_IScene).resume()}};engine_scenemanager_Manager.changeScene=function(newSceneClass,sceneParams,transitionClass,transParams){if(transitionClass==null){transitionClass=engine_scenemanager_Manager.defaultTransition}if(sceneParams==null){sceneParams=[]}if(transParams==null){transParams=[]}engine_scenemanager_Manager.isTransitioning=true;var transition=Type.createInstance(transitionClass,transParams);if(!js_Boot.__implements(transition,engine_scenemanager_IScene)){throw new js__$Boot_HaxeError("The transition needs to be a scene! (Implement IScene and ITransition)")}if(!(transition instanceof openfl_display_DisplayObject)){throw new js__$Boot_HaxeError("The transition needs to be a DisplayObject! (Extend Sprite or something like that.)")}engine_scenemanager_Manager.self.transitionContainer.addChild(transition);js_Boot.__cast(transition,engine_scenemanager_IScene).onResize(openfl_Lib.get_current().stage.stageWidth,openfl_Lib.get_current().stage.stageHeight);transition.startCovering(function(){if(engine_scenemanager_Manager.self.activeScene!=null){engine_scenemanager_Manager.self.activeScene.onDestroy(newSceneClass);engine_scenemanager_Manager.self.sceneContainer.removeChild(engine_scenemanager_Manager.self.activeScene);engine_scenemanager_Manager.self.activeScene=null}transition.startResolving(function(overrideSceneClass,overrideSceneParams){if(overrideSceneParams==null){overrideSceneParams=[]}if(overrideSceneClass!=null){newSceneClass=overrideSceneClass;sceneParams=overrideSceneParams}var newScene=Type.createInstance(newSceneClass,sceneParams);newScene.onResize(openfl_Lib.get_current().stage.stageWidth,openfl_Lib.get_current().stage.stageHeight);if(!(newScene instanceof openfl_display_DisplayObject)){throw new js__$Boot_HaxeError("The new scene needs to be a DisplayObject! (Extend Sprite or something like that.)")}engine_scenemanager_Manager.self.activeScene=newScene;engine_scenemanager_Manager.self.sceneContainer.addChild(engine_scenemanager_Manager.self.activeScene);transition.startUncovering(function(){engine_scenemanager_Manager.self.activeScene.onShow();engine_scenemanager_Manager.isTransitioning=false})})})};engine_scenemanager_Manager.getCurrentScene=function(){return engine_scenemanager_Manager.self.activeScene};engine_scenemanager_Manager.getCurrentSceneName=function(){var c=js_Boot.getClass(engine_scenemanager_Manager.self.activeScene);return c.__name__};engine_scenemanager_Manager.getCurrentSceneClass=function(){return js_Boot.getClass(engine_scenemanager_Manager.self.activeScene)};engine_scenemanager_Manager.showPopup=function(popupClass,popupParams,ignorePrevious){if(ignorePrevious==null){ignorePrevious=false}if(popupParams==null){popupParams=[]}if(engine_scenemanager_Manager.self.popupContainer.get_numChildren()>0&&!ignorePrevious){return}var popup=Type.createInstance(popupClass,popupParams);if(!js_Boot.__implements(popup,engine_scenemanager_IScene)){throw new js__$Boot_HaxeError("A popup must be a scene and a popup! (IScene and IPopup)")}if(!(popup instanceof openfl_display_DisplayObject)){throw new js__$Boot_HaxeError("A popup must be a display object! (Extend Sprite or somthing like that)")}if(js_Boot.__implements(popup,engine_scenemanager_IMutex)){var _g=0;var _g1=engine_scenemanager_Manager.self.popupContainer.get_numChildren();while(_g<_g1){var i=_g++;if(js_Boot.__implements(engine_scenemanager_Manager.self.popupContainer.getChildAt(i),engine_scenemanager_IMutex)){if(js_Boot.__cast(engine_scenemanager_Manager.self.popupContainer.getChildAt(i),engine_scenemanager_IMutex).MUTEX==js_Boot.__cast(popup,engine_scenemanager_IMutex).MUTEX){return}}}}popup.closeHandler=function(){engine_scenemanager_Manager.closePopup(popup)};engine_scenemanager_Manager.self.popupContainer.addChild(popup);engine_scenemanager_Manager.self.activeScene.onPopupOpen(popup);js_Boot.__cast(popup,engine_scenemanager_IScene).onShow();js_Boot.__cast(popup,engine_scenemanager_IScene).onResize(openfl_Lib.get_current().stage.stageWidth,openfl_Lib.get_current().stage.stageHeight)};engine_scenemanager_Manager.closePopup=function(popup){js_Boot.__cast(popup,engine_scenemanager_IScene).onDestroy(null);engine_scenemanager_Manager.self.popupContainer.removeChild(popup);if(engine_scenemanager_Manager.self.activeScene!=null){engine_scenemanager_Manager.self.activeScene.onPopupClose(js_Boot.getClass(popup))}if(engine_scenemanager_Manager.self.popupQueue.length>0&&engine_scenemanager_Manager.self.popupContainer.get_numChildren()==0){engine_scenemanager_Manager.showPopup(engine_scenemanager_Manager.self.popupQueue.shift(),engine_scenemanager_Manager.self.popupParamQueue.shift(),false)}};engine_scenemanager_Manager.queuePopup=function(popupClass,popupParams){if(popupParams==null){popupParams=[]}engine_scenemanager_Manager.self.popupQueue.push(popupClass);engine_scenemanager_Manager.self.popupParamQueue.push(popupParams);if(engine_scenemanager_Manager.self.popupQueue.length>0&&engine_scenemanager_Manager.self.popupContainer.get_numChildren()==0){engine_scenemanager_Manager.showPopup(engine_scenemanager_Manager.self.popupQueue.shift(),engine_scenemanager_Manager.self.popupParamQueue.shift(),false)}};engine_scenemanager_Manager.numPopupsQueued=function(){return engine_scenemanager_Manager.self.popupQueue.length};engine_scenemanager_Manager.numPopupsOpen=function(){return engine_scenemanager_Manager.self.popupContainer.get_numChildren()};engine_scenemanager_Manager.CRT=$hx_exports["engine"]["scenemanager"]["Manager"]["CRT"]=function(syncDraw,shiftValue){if(shiftValue==null){shiftValue=3}if(syncDraw==null){syncDraw=false}engine_scenemanager_Manager.self._CRT();engine_scenemanager_Manager.self.syncDraw=syncDraw;engine_scenemanager_Manager.self.shiftValue=shiftValue};engine_scenemanager_Manager.setScale=function(displayObject,stageW,stageH,factorOfScreenSizeX,factorOfScreenSizeY,tieBreakerFunction){if(factorOfScreenSizeY==null){factorOfScreenSizeY=1}if(factorOfScreenSizeX==null){factorOfScreenSizeX=1}if(stageW==null){stageW=engine_scenemanager_Manager.SCREEN_WIDTH}if(stageH==null){stageH=engine_scenemanager_Manager.SCREEN_HEIGHT}if(tieBreakerFunction==null){tieBreakerFunction=Math.min}displayObject.set_scaleX(displayObject.set_scaleY(1));return displayObject.set_scaleX(displayObject.set_scaleY(tieBreakerFunction(stageW*factorOfScreenSizeX/displayObject.get_width(),stageH*factorOfScreenSizeY/displayObject.get_height())))};engine_scenemanager_Manager.prototype={sceneContainer:null,popupContainer:null,transitionContainer:null,popupQueue:null,popupParamQueue:null,internalRenderingCanvas:null,realCanvas:null,activeScene:null,scanlines:null,red:null,green:null,blue:null,crtEnabled:null,bmd:null,screenRect:null,zeroPoint:null,syncDraw:null,shiftValue:null,_CRT:function(){this.crtEnabled=true;var s=new openfl_display_BitmapData(engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT,true,-16777216);var _g=0;var _g1=engine_scenemanager_Manager.SCREEN_WIDTH;while(_g<_g1){var i=_g++;var _g2=0;var _g11=engine_scenemanager_Manager.SCREEN_HEIGHT;while(_g2<_g11){var j=_g2++;if(j%2==1){s.setPixel32(i,j,1140850688)}else{s.setPixel32(i,j,872415231)}}}this.scanlines=new openfl_display_Bitmap(s);this.blue=new openfl_display_Bitmap;this.green=new openfl_display_Bitmap;this.red=new openfl_display_Bitmap;var r=new openfl_display_BitmapData(engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT,true,-16777216);var g=new openfl_display_BitmapData(engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT,true,-16777216);var b=new openfl_display_BitmapData(engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT,true,-16777216);this.bmd=new openfl_display_BitmapData(engine_scenemanager_Manager.SCREEN_WIDTH|0,engine_scenemanager_Manager.SCREEN_HEIGHT|0,true,-16777216);this.screenRect=new openfl_geom_Rectangle(0,0,engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT);this.zeroPoint=new openfl_geom_Point;r.copyChannel(this.bmd,this.screenRect,this.zeroPoint,1,1);g.copyChannel(this.bmd,this.screenRect,this.zeroPoint,2,2);b.copyChannel(this.bmd,this.screenRect,this.zeroPoint,4,4);this.blue.set_bitmapData(b);this.red.set_bitmapData(r);this.green.set_bitmapData(g);this.green.set_blendMode(12);this.red.set_blendMode(12);this.realCanvas.addChild(this.blue);this.realCanvas.addChild(this.green);this.realCanvas.addChild(this.red);this.realCanvas.addChild(this.scanlines)},colorPerTime:null,crtLoop:function(){if(this.colorPerTime==0||!this.syncDraw){this.bmd.draw(this.internalRenderingCanvas)}if(this.colorPerTime==0){this.red.get_bitmapData().copyChannel(this.bmd,this.screenRect,this.zeroPoint,1,1)}if(this.colorPerTime==1){this.green.get_bitmapData().copyChannel(this.bmd,this.screenRect,this.zeroPoint,2,2)}if(this.colorPerTime==2){this.blue.get_bitmapData().copyChannel(this.bmd,this.screenRect,this.zeroPoint,4,4)}this.colorPerTime++;if(this.colorPerTime==3){this.colorPerTime=0;this.blue.set_x((Math.random()-.5)*this.shiftValue);this.red.set_x((Math.random()-.5)*this.shiftValue);this.green.set_x((Math.random()-.5)*this.shiftValue)}},__class__:engine_scenemanager_Manager};var engine_scenemanager_bases_PopupBase=function(){openfl_display_Sprite.call(this)};$hxClasses["engine.scenemanager.bases.PopupBase"]=engine_scenemanager_bases_PopupBase;engine_scenemanager_bases_PopupBase.__name__="engine.scenemanager.bases.PopupBase";engine_scenemanager_bases_PopupBase.__interfaces__=[engine_scenemanager_IPopup,engine_scenemanager_IScene];engine_scenemanager_bases_PopupBase.__super__=openfl_display_Sprite;engine_scenemanager_bases_PopupBase.prototype=$extend(openfl_display_Sprite.prototype,{closeHandler:null,onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},onResize:function(newW,newH){},pause:function(){},resume:function(){},update:function(dt){},__class__:engine_scenemanager_bases_PopupBase});var engine_scenemanager_bases_TransitionBase=function(){openfl_display_Sprite.call(this)};$hxClasses["engine.scenemanager.bases.TransitionBase"]=engine_scenemanager_bases_TransitionBase;engine_scenemanager_bases_TransitionBase.__name__="engine.scenemanager.bases.TransitionBase";engine_scenemanager_bases_TransitionBase.__interfaces__=[engine_scenemanager_IScene,engine_scenemanager_ITransition];engine_scenemanager_bases_TransitionBase.__super__=openfl_display_Sprite;engine_scenemanager_bases_TransitionBase.prototype=$extend(openfl_display_Sprite.prototype,{onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},onResize:function(newW,newH){},pause:function(){},resume:function(){},update:function(dt){},startCovering:function(whenCovered){whenCovered()},startResolving:function(whenResolved){whenResolved()},startUncovering:function(whenUncovered){whenUncovered()},__class__:engine_scenemanager_bases_TransitionBase});var engine_soundlib_SoundChannelEx=function(sc){this.paused=false;this.tag="";this.sc=sc};$hxClasses["engine.soundlib.SoundChannelEx"]=engine_soundlib_SoundChannelEx;engine_soundlib_SoundChannelEx.__name__="engine.soundlib.SoundChannelEx";engine_soundlib_SoundChannelEx.prototype={tag:null,paused:null,filename:null,sc:null,stop:function(){if(this.sc==null){return}if(!this.sc.__isValid){return}this.paused=true;this.sc.__source.stop()},__class__:engine_soundlib_SoundChannelEx};var engine_soundlib_SoundLib=function(){};$hxClasses["engine.soundlib.SoundLib"]=engine_soundlib_SoundLib;engine_soundlib_SoundLib.__name__="engine.soundlib.SoundLib";engine_soundlib_SoundLib.play=function(soundFile,startTime,loops,vol,pan,overlap,tag){if(tag==null){tag=""}if(overlap==null){overlap=true}if(pan==null){pan=0}if(vol==null){vol=1}if(loops==null){loops=0}if(startTime==null){startTime=0}if(!overlap&&engine_soundlib_SoundLib.overlaps.indexOf(soundFile)!=-1){return null}var retval=new engine_soundlib_SoundChannelEx(openfl_utils_Assets.getSound(soundFile).play(startTime,loops,new openfl_media_SoundTransform(vol,pan)));retval.filename=soundFile;retval.tag=tag;engine_soundlib_SoundLib.channels.push(retval);engine_soundlib_SoundLib.overlaps.push(soundFile);motion_Actuate.timer(.1).onComplete(function(){HxOverrides.remove(engine_soundlib_SoundLib.overlaps,soundFile)});return retval};engine_soundlib_SoundLib.playMusic=function(soundFile,startTime,loops,vol,pan,overlap,tag){if(tag==null){tag="music"}if(overlap==null){overlap=false}if(pan==null){pan=0}if(vol==null){vol=1}if(loops==null){loops=0}if(startTime==null){startTime=0}if(!overlap&&engine_soundlib_SoundLib.overlaps.indexOf(soundFile)!=-1){return null}var retval=new engine_soundlib_SoundChannelEx(openfl_utils_Assets.getSound(soundFile).play(startTime,loops,new openfl_media_SoundTransform(vol,pan)));retval.filename=soundFile;retval.tag=tag;engine_soundlib_SoundLib.channels.push(retval);engine_soundlib_SoundLib.overlaps.push(soundFile);return retval};engine_soundlib_SoundLib.muteGlobal=function(){engine_soundlib_SoundLib.muted=true;openfl_media_SoundMixer.set_soundTransform(new openfl_media_SoundTransform(0))};engine_soundlib_SoundLib.unmuteGlobal=function(){engine_soundlib_SoundLib.muted=false;openfl_media_SoundMixer.set_soundTransform(new openfl_media_SoundTransform(1))};engine_soundlib_SoundLib.toggleMute=function(){if(engine_soundlib_SoundLib.muted){engine_soundlib_SoundLib.unmuteGlobal()}else{engine_soundlib_SoundLib.muteGlobal()}};engine_soundlib_SoundLib.stop=function(tag){var _g=0;var _g1=engine_soundlib_SoundLib.channels;while(_g<_g1.length){var channel=_g1[_g];++_g;if(tag==null||channel.tag==tag){channel.stop()}}};var engine_soundlib_SoundList=function(){};$hxClasses["engine.soundlib.SoundList"]=engine_soundlib_SoundList;engine_soundlib_SoundList.__name__="engine.soundlib.SoundList";engine_soundlib_SoundList.FX=function(id,delay,overlape){if(overlape==null){overlape=true}if(delay==null){delay=0}var myFX="null";switch(id){case 0:myFX="silence";break;case 1:myFX="click";break;case 2:myFX="clickBack";break;case 3:myFX="clickOn";break;case 4:myFX="pause";break;case 5:myFX="pause";break;case 6:myFX="pop";break;case 7:myFX="dash1";break;case 8:myFX="dash2";break;case 9:myFX="dash3";break;case 10:myFX="tic0";break;case 11:myFX="tic1";break;case 12:myFX="tic2";break;case 13:myFX="tic3";break;case 14:myFX="tic4";break;case 15:myFX="tic5";break;case 16:myFX="rubber1";break;case 17:myFX="bounce2";break;case 18:myFX="silence";break;case 19:myFX="wallbounce1";break;case 20:myFX="wallbounce2";break;case 21:myFX="silence";break;case 22:myFX="splash_paper";break;case 23:myFX="floor";break;case 24:myFX="metallic1";break;case 25:myFX="fall1";break;case 26:myFX="fall3";break;case 27:myFX="doorOpen";break;case 28:myFX="doorClose";break;case 29:myFX="goo3";break;case 30:myFX="goo4";break;case 31:myFX="doorTimed";break;case 32:myFX="doorTimed2";break;case 33:myFX="conveyor";break;case 34:myFX="beep";break;case 35:myFX="beep2";break;case 36:myFX="jush1";break;case 37:myFX="biribiri3";break;case 38:myFX="beep2";break;case 39:myFX="biribiri2";break;case 40:myFX="beep_triple";break;case 42:myFX="gameover";break;case 43:myFX="transition";break;case 44:myFX="transition";break;case 45:myFX="bell";break;case 46:myFX="fall2";break;case 47:myFX="bounce2";break;case 48:myFX="whistler";break;case 49:myFX="whistler_reverse";break;case 50:myFX="piano_tone1b";break;case 51:myFX="piano_tone3b";break;case 52:myFX="piano_tone5b";break;case 53:myFX="piano_tone6b";break;case 54:myFX="piano_tone4b";break;case 55:myFX="piano_tone2b";break;case 75:myFX="sneakywalk3";break;case 76:myFX="sneakywalk4";break}if(myFX!="null"){myFX="audio/fx/"+myFX+".mp3"}else{myFX="audio/silence.mp3"}if(delay==0){engine_soundlib_SoundLib.play(myFX,0,0,1,0,overlape)}else{motion_Actuate.timer(delay).onComplete(function(){engine_soundlib_SoundLib.play(myFX,0,0,1,null,overlape)})}};engine_soundlib_SoundList.playVoice=function(id,delay,overlape,localization){if(localization==null){localization=false}if(overlape==null){overlape=true}if(delay==null){delay=0}var myFX="null";if(localization){switch(project_locale_L10N_$CN.get_langSelected()){case"es":case"es-419":break;case"pt":case"pt-br":break;default:}}switch(id){case 60:myFX="vo_grizzly1";break;case 61:myFX="vo_grizzly2";break;case 62:myFX="vo_grizzly3";break;case 63:myFX="vo_grizzly4";break;case 64:myFX="vo_grizzly5";break;case 65:myFX="vo_panda1";break;case 66:myFX="vo_panda2";break;case 67:myFX="vo_panda3";break;case 68:myFX="vo_panda4";break;case 69:myFX="vo_panda5";break;case 70:myFX="vo_all1";break;case 71:myFX="vo_all2";break}if(myFX!="null"){myFX="audio/fx/"+myFX+".mp3"}else{myFX="audio/silence.mp3"}if(delay==0){engine_soundlib_SoundLib.play(myFX,0,0,1,0,overlape)}else{motion_Actuate.timer(delay).onComplete(function(){engine_soundlib_SoundLib.play(myFX,0,0,1,null,overlape)})}};var engine_text_Label=function(text,textFormat,align,centerAt,arrEffects){if(align==null){align=7}this.align=-1;if(arrEffects==null){arrEffects=[]}this.arrEffects=arrEffects;this.txt=new openfl_text_TextField;this.txt.set_defaultTextFormat(textFormat);this.txt.set_autoSize(1);this.txt.set_text(text);this.txt.set_embedFonts(true);this.txt.set_type(0);this.txt.mouseEnabled=false;this.txt.set_selectable(false);this.txt.__removeAllListeners();this.arrTextsForEffects=[];var _g=0;while(_g<arrEffects.length){var i=arrEffects[_g++];var tmpTxt=new openfl_text_TextField;tmpTxt.set_defaultTextFormat(textFormat);tmpTxt.set_textColor(i.color);tmpTxt.set_autoSize(1);tmpTxt.set_text(text);tmpTxt.set_embedFonts(true);tmpTxt.set_type(0);tmpTxt.mouseEnabled=false;tmpTxt.set_selectable(false);tmpTxt.__removeAllListeners();this.arrTextsForEffects.push(tmpTxt)}this.centerAt=new openfl_geom_Point;if(centerAt==null){this.setAlign(align)}else{this.setCenter(centerAt.x,centerAt.y)}openfl_display_Sprite.call(this);var i1=this.arrTextsForEffects.length-1;while(i1>=0){this.addChild(this.arrTextsForEffects[i1]);--i1}this.addChild(this.txt);this.set_text(text)};$hxClasses["engine.text.Label"]=engine_text_Label;engine_text_Label.__name__="engine.text.Label";engine_text_Label.__super__=openfl_display_Sprite;engine_text_Label.prototype=$extend(openfl_display_Sprite.prototype,{text:null,txt:null,align:null,centerAt:null,arrEffects:null,arrTextsForEffects:null,setAlign:function(align){this.align=align;switch(align){case 1:this.txt.set_x(0);this.txt.set_y(-this.txt.get_height());break;case 2:this.txt.set_x(-this.txt.get_width()/2);this.txt.set_y(-this.txt.get_height());break;case 3:this.txt.set_x(-this.txt.get_width());this.txt.set_y(-this.txt.get_height());break;case 4:this.txt.set_x(0);this.txt.set_y(-this.txt.get_height()/2);break;case 5:this.txt.set_x(-this.txt.get_width()/2);this.txt.set_y(-this.txt.get_height()/2);break;case 6:this.txt.set_x(-this.txt.get_width());this.txt.set_y(-this.txt.get_height()/2);break;case 7:this.txt.set_x(this.txt.set_y(0));break;case 8:this.txt.set_x(-this.txt.get_width()/2);this.txt.set_y(0);break;case 9:this.txt.set_x(-this.txt.get_width());this.txt.set_y(0);break;default:}this.fixEffect()},fixEffect:function(){var _g=0;var _g1=this.arrTextsForEffects.length;while(_g<_g1){var i=_g++;this.arrTextsForEffects[i].set_text(this.txt.get_text());this.arrTextsForEffects[i].set_x(this.txt.get_x()+this.arrEffects[i].x);this.arrTextsForEffects[i].set_y(this.txt.get_y()+this.arrEffects[i].y)}},setCenter:function(centerX,centerY){this.centerAt.x=centerX;this.centerAt.y=centerY;this.txt.set_x(-centerX);this.txt.set_y(-centerY);var _g=0;var _g1=this.arrTextsForEffects.length;while(_g<_g1){var i=_g++;this.arrTextsForEffects[i].set_x(this.txt.get_x()+this.arrEffects[i].x);this.arrTextsForEffects[i].set_y(this.txt.get_y()+this.arrEffects[i].y)}},set_text:function(value){this.txt.set_text(value);this.fixPos();return this.text=value},fixPos:function(){if(this.align!=-1){this.setAlign(this.align)}else{this.setCenter(this.centerAt.x,this.centerAt.y)}},__class__:engine_text_Label,__properties__:$extend(openfl_display_Sprite.prototype.__properties__,{set_text:"set_text"})});var openfl_display_ITileContainer=function(){};$hxClasses["openfl.display.ITileContainer"]=openfl_display_ITileContainer;openfl_display_ITileContainer.__name__="openfl.display.ITileContainer";openfl_display_ITileContainer.__isInterface__=true;openfl_display_ITileContainer.prototype={__class__:openfl_display_ITileContainer};var openfl_display_TileContainer=function(x,y,scaleX,scaleY,rotation,originX,originY){if(originY==null){originY=0}if(originX==null){originX=0}if(rotation==null){rotation=0}if(scaleY==null){scaleY=1}if(scaleX==null){scaleX=1}if(y==null){y=0}if(x==null){x=0}openfl_display_Tile.call(this,-1,x,y,scaleX,scaleY,rotation,originX,originY);this.__tiles=[];this.__length=0};$hxClasses["openfl.display.TileContainer"]=openfl_display_TileContainer;openfl_display_TileContainer.__name__="openfl.display.TileContainer";openfl_display_TileContainer.__interfaces__=[openfl_display_ITileContainer];openfl_display_TileContainer.__super__=openfl_display_Tile;openfl_display_TileContainer.prototype=$extend(openfl_display_Tile.prototype,{__tiles:null,addTile:function(tile){if(tile==null){return null}if(tile.parent==this){HxOverrides.remove(this.__tiles,tile);this.__length--}this.__tiles[this.get_numTiles()]=tile;tile.parent=this;this.__length++;this.__setRenderDirty();return tile},getBounds:function(targetCoordinateSpace){var result=new openfl_geom_Rectangle;var rect=null;var _g=0;var _g1=this.__tiles;while(_g<_g1.length){rect=_g1[_g++].getBounds(targetCoordinateSpace);result.__expand(rect.x,rect.y,rect.width,rect.height)}return result},getTileAt:function(index){if(index>=0&&index<this.get_numTiles()){return this.__tiles[index]}return null},removeTile:function(tile){if(tile!=null&&tile.parent==this){tile.parent=null;HxOverrides.remove(this.__tiles,tile);this.__length--;this.__setRenderDirty()}return tile},get_numTiles:function(){return this.__length},get_height:function(){var result=openfl_geom_Rectangle.__pool.get();var rect=null;var _g=0;var _g1=this.__tiles;while(_g<_g1.length){rect=_g1[_g++].getBounds(this);result.__expand(rect.x,rect.y,rect.width,rect.height)}this.__getBounds(result,this.get_matrix());var h=result.height;openfl_geom_Rectangle.__pool.release(result);return h},set_height:function(value){var result=openfl_geom_Rectangle.__pool.get();var rect=null;var _g=0;var _g1=this.__tiles;while(_g<_g1.length){rect=_g1[_g++].getBounds(this);result.__expand(rect.x,rect.y,rect.width,rect.height)}if(result.height!=0){this.set_scaleY(value/result.height)}openfl_geom_Rectangle.__pool.release(result);return value},get_width:function(){var result=openfl_geom_Rectangle.__pool.get();var rect=null;var _g=0;var _g1=this.__tiles;while(_g<_g1.length){rect=_g1[_g++].getBounds(this);result.__expand(rect.x,rect.y,rect.width,rect.height)}this.__getBounds(result,this.get_matrix());var w=result.width;openfl_geom_Rectangle.__pool.release(result);return w},set_width:function(value){var result=openfl_geom_Rectangle.__pool.get();var rect=null;var _g=0;var _g1=this.__tiles;while(_g<_g1.length){rect=_g1[_g++].getBounds(this);result.__expand(rect.x,rect.y,rect.width,rect.height)}if(result.width!=0){this.set_scaleX(value/result.width)}openfl_geom_Rectangle.__pool.release(result);return value},__class__:openfl_display_TileContainer,__properties__:$extend(openfl_display_Tile.prototype.__properties__,{get_numTiles:"get_numTiles"})});var engine_tiles_SortableTileContainer=function(x,y,scaleX,scaleY,rotation,originX,originY){if(originY==null){originY=0}if(originX==null){originX=0}if(rotation==null){rotation=0}if(scaleY==null){scaleY=1}if(scaleX==null){scaleX=1}if(y==null){y=0}if(x==null){x=0}openfl_display_TileContainer.call(this,x,y,scaleX,scaleY,rotation,originX,originY)};$hxClasses["engine.tiles.SortableTileContainer"]=engine_tiles_SortableTileContainer;engine_tiles_SortableTileContainer.__name__="engine.tiles.SortableTileContainer";engine_tiles_SortableTileContainer.__super__=openfl_display_TileContainer;engine_tiles_SortableTileContainer.prototype=$extend(openfl_display_TileContainer.prototype,{layerName:null,sort:function(f){this.__tiles.sort(f)},__class__:engine_tiles_SortableTileContainer});var engine_tweens_Actuator=function(){};$hxClasses["engine.tweens.Actuator"]=engine_tweens_Actuator;engine_tweens_Actuator.__name__="engine.tweens.Actuator";engine_tweens_Actuator.unload=function(actuator){var _g=0;var _g1=actuator._tags;while(_g<_g1.length){var tag=_g1[_g];++_g;var _this=engine_tweens_Actuator.actuators;if((__map_reserved[tag]!=null?_this.getReserved(tag):_this.h[tag])!=null){var _this1=engine_tweens_Actuator.actuators;HxOverrides.remove(__map_reserved[tag]!=null?_this1.getReserved(tag):_this1.h[tag],actuator);var _this2=engine_tweens_Actuator.actuators;if((__map_reserved[tag]!=null?_this2.getReserved(tag):_this2.h[tag]).length==0){engine_tweens_Actuator.actuators.remove(tag)}}}};engine_tweens_Actuator.tween=function(target,duration,properties,overwrite,tags){if(overwrite==null){overwrite=true}if(target==null){lime_utils_Log.warn("You tried to tween a null object. If you didn't crash immediately after this you got lucky.\nTry making a safety check before tweening",{fileName:"src/engine/tweens/Actuator.hx",lineNumber:67,className:"engine.tweens.Actuator",methodName:"tween"})}if(tags==null||duration<=0){return motion_Actuate.tween(target,duration,properties,overwrite,engine_tweens_TaggedActuator)}var actuator=js_Boot.__cast(motion_Actuate.tween(target,duration,properties,overwrite,engine_tweens_TaggedActuator),engine_tweens_ITaggedActuator);if(actuator!=null){var _tags;switch(tags._hx_index){case 0:_tags=tags.v;break;case 1:_tags=[tags.v];break}actuator._tags=_tags;var _g2=0;while(_g2<_tags.length){var tag=_tags[_g2];++_g2;var _this=engine_tweens_Actuator.actuators;if((__map_reserved[tag]!=null?_this.getReserved(tag):_this.h[tag])==null){var _this1=engine_tweens_Actuator.actuators;var value=[];if(__map_reserved[tag]!=null){_this1.setReserved(tag,value)}else{_this1.h[tag]=value}}var _this2=engine_tweens_Actuator.actuators;(__map_reserved[tag]!=null?_this2.getReserved(tag):_this2.h[tag]).push(actuator)}}return actuator};engine_tweens_Actuator.timer=function(duration,tags){return engine_tweens_Actuator.tween(new engine_tweens__$Actuator_TweenTimer(0),duration,new engine_tweens__$Actuator_TweenTimer(1),false,tags)};engine_tweens_Actuator.stop=function(tags,properties,complete,sendEvent){if(sendEvent==null){sendEvent=true}if(complete==null){complete=false}var tobestopped=[];if(tags==null){var key=engine_tweens_Actuator.actuators.keys();while(key.hasNext()){var key1=key.next();var _this=engine_tweens_Actuator.actuators;if((__map_reserved[key1]!=null?_this.getReserved(key1):_this.h[key1])!=null){var _g=0;var _this1=engine_tweens_Actuator.actuators;var _g1=__map_reserved[key1]!=null?_this1.getReserved(key1):_this1.h[key1];while(_g<_g1.length)tobestopped.push(_g1[_g++])}}}else{switch(tags._hx_index){case 0:var _g11=tags.v;var _g2=0;while(_g2<_g11.length){var tag=_g11[_g2];++_g2;var _this2=engine_tweens_Actuator.actuators;if((__map_reserved[tag]!=null?_this2.getReserved(tag):_this2.h[tag])!=null){var _g3=0;var _this3=engine_tweens_Actuator.actuators;var _g12=__map_reserved[tag]!=null?_this3.getReserved(tag):_this3.h[tag];while(_g3<_g12.length)tobestopped.push(_g12[_g3++])}}break;case 1:var _g4=tags.v;var _this4=engine_tweens_Actuator.actuators;if((__map_reserved[_g4]!=null?_this4.getReserved(_g4):_this4.h[_g4])!=null){var _g5=0;var _this5=engine_tweens_Actuator.actuators;var _g13=__map_reserved[_g4]!=null?_this5.getReserved(_g4):_this5.h[_g4];while(_g5<_g13.length)tobestopped.push(_g13[_g5++])}break}}var _g6=0;while(_g6<tobestopped.length)motion_Actuate.stop(tobestopped[_g6++],properties,complete,sendEvent)};var engine_tweens__$Actuator_TweenTimer=function(progress){this.progress=progress};$hxClasses["engine.tweens._Actuator.TweenTimer"]=engine_tweens__$Actuator_TweenTimer;engine_tweens__$Actuator_TweenTimer.__name__="engine.tweens._Actuator.TweenTimer";engine_tweens__$Actuator_TweenTimer.prototype={progress:null,__class__:engine_tweens__$Actuator_TweenTimer};var motion_actuators_IGenericActuator=function(){};$hxClasses["motion.actuators.IGenericActuator"]=motion_actuators_IGenericActuator;motion_actuators_IGenericActuator.__name__="motion.actuators.IGenericActuator";motion_actuators_IGenericActuator.__isInterface__=true;motion_actuators_IGenericActuator.prototype={pause:null,resume:null,stop:null,__class__:motion_actuators_IGenericActuator};var engine_tweens_ITaggedActuator=function(){};$hxClasses["engine.tweens.ITaggedActuator"]=engine_tweens_ITaggedActuator;engine_tweens_ITaggedActuator.__name__="engine.tweens.ITaggedActuator";engine_tweens_ITaggedActuator.__isInterface__=true;engine_tweens_ITaggedActuator.__interfaces__=[motion_actuators_IGenericActuator];engine_tweens_ITaggedActuator.prototype={_tags:null,__class__:engine_tweens_ITaggedActuator};var motion_actuators_GenericActuator=function(target,duration,properties){this._autoVisible=true;this._delay=0;this._reflect=false;this._repeat=0;this._reverse=false;this._smartRotation=false;this._snapping=false;this.special=false;this.target=target;this.properties=properties;this.duration=duration;this._ease=motion_Actuate.defaultEase};$hxClasses["motion.actuators.GenericActuator"]=motion_actuators_GenericActuator;motion_actuators_GenericActuator.__name__="motion.actuators.GenericActuator";motion_actuators_GenericActuator.__interfaces__=[motion_actuators_IGenericActuator];motion_actuators_GenericActuator.prototype={duration:null,id:null,properties:null,target:null,_autoVisible:null,_delay:null,_ease:null,_onComplete:null,_onCompleteParams:null,_onRepeat:null,_onRepeatParams:null,_onUpdate:null,_onUpdateParams:null,_onResume:null,_onResumeParams:null,_onPause:null,_onPauseParams:null,_reflect:null,_repeat:null,_reverse:null,_smartRotation:null,_snapping:null,special:null,apply:function(){var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var i=_g1[_g];++_g;if(Object.prototype.hasOwnProperty.call(this.target,i)){this.target[i]=Reflect.field(this.properties,i)}else{Reflect.setProperty(this.target,i,Reflect.field(this.properties,i))}}},autoVisible:function(value){if(value==null){value=true}this._autoVisible=value;return this},callMethod:function(method,params){if(params==null){params=[]}return method.apply(method,params)},change:function(){if(this._onUpdate!=null){var method=this._onUpdate;var params=this._onUpdateParams;if(params==null){params=[]}method.apply(method,params)}},complete:function(sendEvent){if(sendEvent==null){sendEvent=true}if(sendEvent){this.change();if(this._onComplete!=null){var method=this._onComplete;var params=this._onCompleteParams;if(params==null){params=[]}method.apply(method,params)}}motion_Actuate.unload(this)},delay:function(duration){this._delay=duration;return this},ease:function(easing){this._ease=easing;return this},move:function(){},onComplete:function(handler,parameters){this._onComplete=handler;if(parameters==null){this._onCompleteParams=[]}else{this._onCompleteParams=parameters}if(this.duration==0){this.complete()}return this},onRepeat:function(handler,parameters){this._onRepeat=handler;if(parameters==null){this._onRepeatParams=[]}else{this._onRepeatParams=parameters}return this},onUpdate:function(handler,parameters){this._onUpdate=handler;if(parameters==null){this._onUpdateParams=[]}else{this._onUpdateParams=parameters}return this},onPause:function(handler,parameters){this._onPause=handler;if(parameters==null){this._onPauseParams=[]}else{this._onPauseParams=parameters}return this},onResume:function(handler,parameters){this._onResume=handler;if(parameters==null){this._onResumeParams=[]}else{this._onResumeParams=parameters}return this},pause:function(){if(this._onPause!=null){var method=this._onPause;var params=this._onPauseParams;if(params==null){params=[]}method.apply(method,params)}},reflect:function(value){if(value==null){value=true}this._reflect=value;this.special=true;return this},repeat:function(times){if(times==null){times=-1}this._repeat=times;return this},resume:function(){if(this._onResume!=null){var method=this._onResume;var params=this._onResumeParams;if(params==null){params=[]}method.apply(method,params)}},reverse:function(value){if(value==null){value=true}this._reverse=value;this.special=true;return this},smartRotation:function(value){if(value==null){value=true}this._smartRotation=value;this.special=true;return this},snapping:function(value){if(value==null){value=true}this._snapping=value;this.special=true;return this},stop:function(properties,complete,sendEvent){},__class__:motion_actuators_GenericActuator};var motion_actuators_SimpleActuator=function(target,duration,properties){this.active=true;this.propertyDetails=[];this.sendChange=false;this.paused=false;this.cacheVisible=false;this.initialized=false;this.setVisible=false;this.toggleVisible=false;this.startTime=openfl_Lib.getTimer()/1e3;motion_actuators_GenericActuator.call(this,target,duration,properties);if(!motion_actuators_SimpleActuator.addedEvent){motion_actuators_SimpleActuator.addedEvent=true;openfl_Lib.get_current().stage.addEventListener("enterFrame",motion_actuators_SimpleActuator.stage_onEnterFrame)}};$hxClasses["motion.actuators.SimpleActuator"]=motion_actuators_SimpleActuator;motion_actuators_SimpleActuator.__name__="motion.actuators.SimpleActuator";motion_actuators_SimpleActuator.stage_onEnterFrame=function(event){var currentTime=openfl_Lib.getTimer()/1e3;var actuator;var j=0;var _g=0;var _g1=motion_actuators_SimpleActuator.actuatorsLength;while(_g<_g1){++_g;actuator=motion_actuators_SimpleActuator.actuators[j];if(actuator!=null&&actuator.active){if(currentTime>=actuator.timeOffset){actuator.update(currentTime)}++j}else{motion_actuators_SimpleActuator.actuators.splice(j,1);--motion_actuators_SimpleActuator.actuatorsLength}}};motion_actuators_SimpleActuator.__super__=motion_actuators_GenericActuator;motion_actuators_SimpleActuator.prototype=$extend(motion_actuators_GenericActuator.prototype,{timeOffset:null,active:null,cacheVisible:null,detailsLength:null,initialized:null,paused:null,pauseTime:null,propertyDetails:null,sendChange:null,setVisible:null,startTime:null,toggleVisible:null,apply:function(){motion_actuators_GenericActuator.prototype.apply.call(this);if(this.toggleVisible&&Object.prototype.hasOwnProperty.call(this.properties,"alpha")){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"visible")){value=Reflect.field(target,"visible")}else{value=Reflect.getProperty(target,"visible")}if(value!=null){var target1=this.target;var value1=Reflect.field(this.properties,"alpha")>0;if(Object.prototype.hasOwnProperty.call(target1,"visible")&&!(target1.__properties__&&target1.__properties__["set_"+"visible"])){target1["visible"]=value1}else{Reflect.setProperty(target1,"visible",value1)}}}},autoVisible:function(value){if(value==null){value=true}this._autoVisible=value;if(!value){this.toggleVisible=false;if(this.setVisible){var target=this.target;var value1=this.cacheVisible;if(Object.prototype.hasOwnProperty.call(target,"visible")&&!(target.__properties__&&target.__properties__["set_"+"visible"])){target["visible"]=value1}else{Reflect.setProperty(target,"visible",value1)}}}return this},delay:function(duration){this._delay=duration;this.timeOffset=this.startTime+duration;return this},getField:function(target,propertyName){var value=null;if(Object.prototype.hasOwnProperty.call(target,propertyName)){value=Reflect.field(target,propertyName)}else{value=Reflect.getProperty(target,propertyName)}return value},initialize:function(){var details;var start;var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var i=_g1[_g];++_g;var isField=true;if(Object.prototype.hasOwnProperty.call(this.target,i)&&!(this.target.__properties__&&this.target.__properties__["set_"+i])){start=Reflect.field(this.target,i)}else{isField=false;start=Reflect.getProperty(this.target,i)}if(typeof start=="number"){var target=this.properties;var value=null;if(Object.prototype.hasOwnProperty.call(target,i)){value=Reflect.field(target,i)}else{value=Reflect.getProperty(target,i)}var value1=value;if(start==null){start=0}if(value1==null){value1=0}details=new motion_actuators_PropertyDetails(this.target,i,start,value1-start,isField);this.propertyDetails.push(details)}}this.detailsLength=this.propertyDetails.length;this.initialized=true},move:function(){this.toggleVisible=Object.prototype.hasOwnProperty.call(this.properties,"alpha")&&this.target instanceof openfl_display_DisplayObject;var tmp;if(this.toggleVisible&&this.properties.alpha!=0){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"visible")){value=Reflect.field(target,"visible")}else{value=Reflect.getProperty(target,"visible")}tmp=!value}else{tmp=false}if(tmp){this.setVisible=true;var target1=this.target;var value1=null;if(Object.prototype.hasOwnProperty.call(target1,"visible")){value1=Reflect.field(target1,"visible")}else{value1=Reflect.getProperty(target1,"visible")}this.cacheVisible=value1;var target2=this.target;var value2=true;if(Object.prototype.hasOwnProperty.call(target2,"visible")&&!(target2.__properties__&&target2.__properties__["set_"+"visible"])){target2["visible"]=value2}else{Reflect.setProperty(target2,"visible",value2)}}this.timeOffset=this.startTime;motion_actuators_SimpleActuator.actuators.push(this);++motion_actuators_SimpleActuator.actuatorsLength},onUpdate:function(handler,parameters){this._onUpdate=handler;if(parameters==null){this._onUpdateParams=[]}else{this._onUpdateParams=parameters}this.sendChange=true;return this},pause:function(){if(!this.paused){this.paused=true;motion_actuators_GenericActuator.prototype.pause.call(this);this.pauseTime=openfl_Lib.getTimer()}},resume:function(){if(this.paused){this.paused=false;this.timeOffset+=(openfl_Lib.getTimer()-this.pauseTime)/1e3;motion_actuators_GenericActuator.prototype.resume.call(this)}},setField:function(target,propertyName,value){if(Object.prototype.hasOwnProperty.call(target,propertyName)&&!(target.__properties__&&target.__properties__["set_"+propertyName])){target[propertyName]=value}else{Reflect.setProperty(target,propertyName,value)}},setProperty:function(details,value){if(details.isField){details.target[details.propertyName]=value}else{Reflect.setProperty(details.target,details.propertyName,value)}},stop:function(properties,complete,sendEvent){if(this.active){if(properties==null){this.active=false;if(complete){this.apply()}this.complete(sendEvent);return}var _g=0;var _g1=Reflect.fields(properties);while(_g<_g1.length)if(Object.prototype.hasOwnProperty.call(this.properties,_g1[_g++])){this.active=false;if(complete){this.apply()}this.complete(sendEvent);return}}},update:function(currentTime){if(!this.paused){var details;var easing;var tweenPosition=(currentTime-this.timeOffset)/this.duration;if(tweenPosition>1){tweenPosition=1}if(!this.initialized){this.initialize()}if(!this.special){easing=this._ease.calculate(tweenPosition);var _g=0;var _g1=this.detailsLength;while(_g<_g1){details=this.propertyDetails[_g++];var value=details.start+details.change*easing;if(details.isField){details.target[details.propertyName]=value}else{Reflect.setProperty(details.target,details.propertyName,value)}}}else{if(!this._reverse){easing=this._ease.calculate(tweenPosition)}else{easing=this._ease.calculate(1-tweenPosition)}var endValue;var _g2=0;var _g11=this.detailsLength;while(_g2<_g11){details=this.propertyDetails[_g2++];if(this._smartRotation&&(details.propertyName=="rotation"||details.propertyName=="rotationX"||details.propertyName=="rotationY"||details.propertyName=="rotationZ")){var rotation=details.change%360;if(rotation>180){rotation-=360}else if(rotation<-180){rotation+=360}endValue=details.start+rotation*easing}else{endValue=details.start+details.change*easing}if(!this._snapping){var value1=endValue;if(details.isField){details.target[details.propertyName]=value1}else{Reflect.setProperty(details.target,details.propertyName,value1)}}else{var value2=Math.round(endValue);if(details.isField){details.target[details.propertyName]=value2}else{Reflect.setProperty(details.target,details.propertyName,value2)}}}}if(tweenPosition==1){if(this._repeat==0){this.active=false;var tmp;if(this.toggleVisible){var target=this.target;var value3=null;if(Object.prototype.hasOwnProperty.call(target,"alpha")){value3=Reflect.field(target,"alpha")}else{value3=Reflect.getProperty(target,"alpha")}tmp=value3==0}else{tmp=false}if(tmp){var target1=this.target;var value4=false;if(Object.prototype.hasOwnProperty.call(target1,"visible")&&!(target1.__properties__&&target1.__properties__["set_"+"visible"])){target1["visible"]=value4}else{Reflect.setProperty(target1,"visible",value4)}}this.complete(true);return}else{if(this._onRepeat!=null){var method=this._onRepeat;var params=this._onRepeatParams;if(params==null){params=[]}method.apply(method,params)}if(this._reflect){this._reverse=!this._reverse}this.startTime=currentTime;this.timeOffset=this.startTime+this._delay;if(this._repeat>0){this._repeat--}}}if(this.sendChange){this.change()}}},__class__:motion_actuators_SimpleActuator});var engine_tweens_TaggedActuator=function(target,duration,properties){this._tags=[];motion_actuators_SimpleActuator.call(this,target,duration,properties)};$hxClasses["engine.tweens.TaggedActuator"]=engine_tweens_TaggedActuator;engine_tweens_TaggedActuator.__name__="engine.tweens.TaggedActuator";engine_tweens_TaggedActuator.__interfaces__=[engine_tweens_ITaggedActuator];engine_tweens_TaggedActuator.__super__=motion_actuators_SimpleActuator;engine_tweens_TaggedActuator.prototype=$extend(motion_actuators_SimpleActuator.prototype,{_tags:null,get_tags:function(){return this._tags.slice()},complete:function(sendEvent){if(sendEvent==null){sendEvent=true}motion_actuators_SimpleActuator.prototype.complete.call(this,sendEvent);engine_tweens_Actuator.unload(this)},__class__:engine_tweens_TaggedActuator,__properties__:{get_tags:"get_tags"}});var motion_actuators_TransformActuator=function(target,duration,properties){motion_actuators_SimpleActuator.call(this,target,duration,properties)};$hxClasses["motion.actuators.TransformActuator"]=motion_actuators_TransformActuator;motion_actuators_TransformActuator.__name__="motion.actuators.TransformActuator";motion_actuators_TransformActuator.__super__=motion_actuators_SimpleActuator;motion_actuators_TransformActuator.prototype=$extend(motion_actuators_SimpleActuator.prototype,{endColorTransform:null,endSoundTransform:null,tweenColorTransform:null,tweenSoundTransform:null,apply:function(){this.initialize();if(this.endColorTransform!=null){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"transform")){value=Reflect.field(target,"transform")}else{value=Reflect.getProperty(target,"transform")}var transform=value;var value1=this.endColorTransform;if(Object.prototype.hasOwnProperty.call(transform,"colorTransform")&&!(transform.__properties__&&transform.__properties__["set_"+"colorTransform"])){transform["colorTransform"]=value1}else{Reflect.setProperty(transform,"colorTransform",value1)}}if(this.endSoundTransform!=null){var target1=this.target;var value2=this.endSoundTransform;if(Object.prototype.hasOwnProperty.call(target1,"soundTransform")&&!(target1.__properties__&&target1.__properties__["set_"+"soundTransform"])){target1["soundTransform"]=value2}else{Reflect.setProperty(target1,"soundTransform",value2)}}},initialize:function(){if(Object.prototype.hasOwnProperty.call(this.properties,"colorValue")&&this.target instanceof openfl_display_DisplayObject){this.initializeColor()}if(Object.prototype.hasOwnProperty.call(this.properties,"soundVolume")||Object.prototype.hasOwnProperty.call(this.properties,"soundPan")){this.initializeSound()}this.detailsLength=this.propertyDetails.length;this.initialized=true},initializeColor:function(){this.endColorTransform=new openfl_geom_ColorTransform;var color=this.properties.colorValue;var strength=this.properties.colorStrength;if(strength<1){var multiplier;var offset;if(strength<.5){multiplier=1;offset=strength*2}else{multiplier=1-(strength-.5)*2;offset=1}this.endColorTransform.redMultiplier=multiplier;this.endColorTransform.greenMultiplier=multiplier;this.endColorTransform.blueMultiplier=multiplier;this.endColorTransform.redOffset=offset*(color>>16&255);this.endColorTransform.greenOffset=offset*(color>>8&255);this.endColorTransform.blueOffset=offset*(color&255)}else{this.endColorTransform.redMultiplier=0;this.endColorTransform.greenMultiplier=0;this.endColorTransform.blueMultiplier=0;this.endColorTransform.redOffset=color>>16&255;this.endColorTransform.greenOffset=color>>8&255;this.endColorTransform.blueOffset=color&255}var propertyNames=["redMultiplier","greenMultiplier","blueMultiplier","redOffset","greenOffset","blueOffset"];if(Object.prototype.hasOwnProperty.call(this.properties,"colorAlpha")){this.endColorTransform.alphaMultiplier=this.properties.colorAlpha;propertyNames.push("alphaMultiplier")}else{var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"alpha")){value=Reflect.field(target,"alpha")}else{value=Reflect.getProperty(target,"alpha")}this.endColorTransform.alphaMultiplier=value}var target1=this.target;var value1=null;if(Object.prototype.hasOwnProperty.call(target1,"transform")){value1=Reflect.field(target1,"transform")}else{value1=Reflect.getProperty(target1,"transform")}var transform=value1;var value2=null;if(Object.prototype.hasOwnProperty.call(transform,"colorTransform")){value2=Reflect.field(transform,"colorTransform")}else{value2=Reflect.getProperty(transform,"colorTransform")}var begin=value2;this.tweenColorTransform=new openfl_geom_ColorTransform;var details;var start;var _g=0;while(_g<propertyNames.length){var propertyName=propertyNames[_g];++_g;var value3=null;if(Object.prototype.hasOwnProperty.call(begin,propertyName)){value3=Reflect.field(begin,propertyName)}else{value3=Reflect.getProperty(begin,propertyName)}start=value3;var details1=this.tweenColorTransform;var target2=this.endColorTransform;var value4=null;if(Object.prototype.hasOwnProperty.call(target2,propertyName)){value4=Reflect.field(target2,propertyName)}else{value4=Reflect.getProperty(target2,propertyName)}details=new motion_actuators_PropertyDetails(details1,propertyName,start,value4-start);this.propertyDetails.push(details)}},initializeSound:function(){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"soundTransform")){value=Reflect.field(target,"soundTransform")}else{value=Reflect.getProperty(target,"soundTransform")}if(value==null){var target1=this.target;var value1=new openfl_media_SoundTransform;if(Object.prototype.hasOwnProperty.call(target1,"soundTransform")&&!(target1.__properties__&&target1.__properties__["set_"+"soundTransform"])){target1["soundTransform"]=value1}else{Reflect.setProperty(target1,"soundTransform",value1)}}var target2=this.target;var value2=null;if(Object.prototype.hasOwnProperty.call(target2,"soundTransform")){value2=Reflect.field(target2,"soundTransform")}else{value2=Reflect.getProperty(target2,"soundTransform")}var start=value2;var target3=this.target;var value3=null;if(Object.prototype.hasOwnProperty.call(target3,"soundTransform")){value3=Reflect.field(target3,"soundTransform")}else{value3=Reflect.getProperty(target3,"soundTransform")}this.endSoundTransform=value3;this.tweenSoundTransform=new openfl_media_SoundTransform;if(Object.prototype.hasOwnProperty.call(this.properties,"soundVolume")){this.endSoundTransform.volume=this.properties.soundVolume;this.propertyDetails.push(new motion_actuators_PropertyDetails(this.tweenSoundTransform,"volume",start.volume,this.endSoundTransform.volume-start.volume))}if(Object.prototype.hasOwnProperty.call(this.properties,"soundPan")){this.endSoundTransform.pan=this.properties.soundPan;this.propertyDetails.push(new motion_actuators_PropertyDetails(this.tweenSoundTransform,"pan",start.pan,this.endSoundTransform.pan-start.pan))}},update:function(currentTime){motion_actuators_SimpleActuator.prototype.update.call(this,currentTime);if(this.endColorTransform!=null){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"transform")){value=Reflect.field(target,"transform")}else{value=Reflect.getProperty(target,"transform")}var transform=value;var value1=this.tweenColorTransform;if(Object.prototype.hasOwnProperty.call(transform,"colorTransform")&&!(transform.__properties__&&transform.__properties__["set_"+"colorTransform"])){transform["colorTransform"]=value1}else{Reflect.setProperty(transform,"colorTransform",value1)}}if(this.endSoundTransform!=null){var target1=this.target;var value2=this.tweenSoundTransform;if(Object.prototype.hasOwnProperty.call(target1,"soundTransform")&&!(target1.__properties__&&target1.__properties__["set_"+"soundTransform"])){target1["soundTransform"]=value2}else{Reflect.setProperty(target1,"soundTransform",value2)}}},__class__:motion_actuators_TransformActuator});var engine_tweens_TaggedTransformActuator=function(target,duration,properties){this._tags=[];motion_actuators_TransformActuator.call(this,target,duration,properties)};$hxClasses["engine.tweens.TaggedTransformActuator"]=engine_tweens_TaggedTransformActuator;engine_tweens_TaggedTransformActuator.__name__="engine.tweens.TaggedTransformActuator";engine_tweens_TaggedTransformActuator.__interfaces__=[engine_tweens_ITaggedActuator];engine_tweens_TaggedTransformActuator.__super__=motion_actuators_TransformActuator;engine_tweens_TaggedTransformActuator.prototype=$extend(motion_actuators_TransformActuator.prototype,{_tags:null,get_tags:function(){return this._tags.slice()},complete:function(sendEvent){if(sendEvent==null){sendEvent=true}motion_actuators_TransformActuator.prototype.complete.call(this,sendEvent);engine_tweens_Actuator.unload(this)},__class__:engine_tweens_TaggedTransformActuator,__properties__:{get_tags:"get_tags"}});var engine_updateable_IVisibilityMutable=function(){};$hxClasses["engine.updateable.IVisibilityMutable"]=engine_updateable_IVisibilityMutable;engine_updateable_IVisibilityMutable.__name__="engine.updateable.IVisibilityMutable";engine_updateable_IVisibilityMutable.__isInterface__=true;engine_updateable_IVisibilityMutable.prototype={checkVisibility:null,__class__:engine_updateable_IVisibilityMutable};var engine_utils_MathUtils=function(){};$hxClasses["engine.utils.MathUtils"]=engine_utils_MathUtils;engine_utils_MathUtils.__name__="engine.utils.MathUtils";engine_utils_MathUtils.wrap=function(value,min,max){var range=max-min+1;if(value<min){value+=range*((min-value)/range+1|0)}return min+((value|0)-min)%range};var haxe_StackItem=$hxEnums["haxe.StackItem"]={__ename__:"haxe.StackItem",__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"],CFunction:{_hx_index:0,__enum__:"haxe.StackItem",toString:$estr},Module:($_=function(m){return{_hx_index:1,m:m,__enum__:"haxe.StackItem",toString:$estr}},$_.__params__=["m"],$_),FilePos:($_=function(s,file,line,column){return{_hx_index:2,s:s,file:file,line:line,column:column,__enum__:"haxe.StackItem",toString:$estr}},$_.__params__=["s","file","line","column"],$_),Method:($_=function(classname,method){return{_hx_index:3,classname:classname,method:method,__enum__:"haxe.StackItem",toString:$estr}},$_.__params__=["classname","method"],$_),LocalFunction:($_=function(v){return{_hx_index:4,v:v,__enum__:"haxe.StackItem",toString:$estr}},$_.__params__=["v"],$_)};var haxe_CallStack=function(){};$hxClasses["haxe.CallStack"]=haxe_CallStack;haxe_CallStack.__name__="haxe.CallStack";haxe_CallStack.getStack=function(e){if(e==null){return[]}var oldValue=Error.prepareStackTrace;Error.prepareStackTrace=function(error,callsites){var stack=[];var _g=0;while(_g<callsites.length){var site=callsites[_g];++_g;if(haxe_CallStack.wrapCallSite!=null){site=haxe_CallStack.wrapCallSite(site)}var method=null;var fullName=site.getFunctionName();if(fullName!=null){var idx=fullName.lastIndexOf(".");if(idx>=0){var className=HxOverrides.substr(fullName,0,idx);var methodName=HxOverrides.substr(fullName,idx+1,null);method=haxe_StackItem.Method(className,methodName)}}var fileName=site.getFileName();var fileAddr=fileName==null?-1:fileName.indexOf("file:");if(haxe_CallStack.wrapCallSite!=null&&fileAddr>0){fileName=HxOverrides.substr(fileName,fileAddr+6,null)}stack.push(haxe_StackItem.FilePos(method,fileName,site.getLineNumber(),site.getColumnNumber()))}return stack};var a=haxe_CallStack.makeStack(e.stack);Error.prepareStackTrace=oldValue;return a};haxe_CallStack.callStack=function(){try{throw new Error}catch(e){haxe_CallStack.lastException=e;var a=haxe_CallStack.getStack(e);a.shift();return a}};haxe_CallStack.exceptionStack=function(){return haxe_CallStack.getStack(haxe_CallStack.lastException)};haxe_CallStack.toString=function(stack){var b=new StringBuf;var _g=0;while(_g<stack.length){var s=stack[_g++];b.b+="\nCalled from ";haxe_CallStack.itemToString(b,s)}return b.b};haxe_CallStack.itemToString=function(b,s){switch(s._hx_index){case 0:b.b+="a C function";break;case 1:var _g=s.m;b.b=(b.b+="module ")+(_g==null?"null":""+_g);break;case 2:var _g4=s.column;var _g3=s.line;var _g2=s.file;var _g1=s.s;if(_g1!=null){haxe_CallStack.itemToString(b,_g1);b.b+=" ("}b.b=(b.b+=_g2==null?"null":""+_g2)+" line ";b.b+=_g3==null?"null":""+_g3;if(_g4!=null){b.b=(b.b+=" column ")+(_g4==null?"null":""+_g4)}if(_g1!=null){b.b+=")"}break;case 3:var _g7=s.method;var _g6=s.classname;b.b=(b.b+=Std.string(_g6==null?"<unknown>":_g6))+".";b.b+=_g7==null?"null":""+_g7;break;case 4:var _g5=s.v;b.b=(b.b+="local function #")+(_g5==null?"null":""+_g5);break}};haxe_CallStack.makeStack=function(s){if(s==null){return[]}else if(typeof s=="string"){var stack=s.split("\n");if(stack[0]=="Error"){stack.shift()}var m=[];var rie10=new EReg("^   at ([A-Za-z0-9_. ]+) \\(([^)]+):([0-9]+):([0-9]+)\\)$","");var _g=0;while(_g<stack.length){var line=stack[_g];++_g;if(rie10.match(line)){var path=rie10.matched(1).split(".");var meth=path.pop();var file=rie10.matched(2);var line1=Std.parseInt(rie10.matched(3));var column=Std.parseInt(rie10.matched(4));m.push(haxe_StackItem.FilePos(meth=="Anonymous function"?haxe_StackItem.LocalFunction():meth=="Global code"?null:haxe_StackItem.Method(path.join("."),meth),file,line1,column))}else{m.push(haxe_StackItem.Module(StringTools.trim(line)))}}return m}else{return s}};var haxe__$Int64__$_$_$Int64=function(high,low){this.high=high;this.low=low};$hxClasses["haxe._Int64.___Int64"]=haxe__$Int64__$_$_$Int64;haxe__$Int64__$_$_$Int64.__name__="haxe._Int64.___Int64";haxe__$Int64__$_$_$Int64.prototype={high:null,low:null,__class__:haxe__$Int64__$_$_$Int64};var haxe_Resource=function(){};$hxClasses["haxe.Resource"]=haxe_Resource;haxe_Resource.__name__="haxe.Resource";haxe_Resource.getString=function(name){var _g=0;var _g1=haxe_Resource.content;while(_g<_g1.length){var x=_g1[_g];++_g;if(x.name==name){if(x.str!=null){return x.str}return haxe_crypto_Base64.decode(x.data).toString()}}return null};var haxe_Serializer=function(){this.buf=new StringBuf;this.cache=[];this.useCache=haxe_Serializer.USE_CACHE;this.useEnumIndex=haxe_Serializer.USE_ENUM_INDEX;this.shash=new haxe_ds_StringMap;this.scount=0};$hxClasses["haxe.Serializer"]=haxe_Serializer;haxe_Serializer.__name__="haxe.Serializer";haxe_Serializer.run=function(v){var s=new haxe_Serializer;s.serialize(v);return s.toString()};haxe_Serializer.prototype={buf:null,cache:null,shash:null,scount:null,useCache:null,useEnumIndex:null,toString:function(){return this.buf.b},serializeString:function(s){var _this=this.shash;var x=__map_reserved[s]!=null?_this.getReserved(s):_this.h[s];if(x!=null){this.buf.b+="R";this.buf.b+=x==null?"null":""+x;return}var _this1=this.shash;var value=this.scount++;if(__map_reserved[s]!=null){_this1.setReserved(s,value)}else{_this1.h[s]=value}this.buf.b+="y";s=encodeURIComponent(s);this.buf.b+=Std.string(s.length);this.buf.b+=":";this.buf.b+=s==null?"null":""+s},serializeRef:function(v){var vt=typeof v;var _g=0;var _g1=this.cache.length;while(_g<_g1){var i=_g++;var ci=this.cache[i];if(typeof ci==vt&&ci==v){this.buf.b+="r";this.buf.b+=i==null?"null":""+i;return true}}this.cache.push(v);return false},serializeFields:function(v){var _g=0;var _g1=Reflect.fields(v);while(_g<_g1.length){var f=_g1[_g];++_g;this.serializeString(f);this.serialize(Reflect.field(v,f))}this.buf.b+="g"},serialize:function(v){var _g=Type.typeof(v);switch(_g._hx_index){case 0:this.buf.b+="n";break;case 1:var v1=v;if(v1==0){this.buf.b+="z";return}this.buf.b+="i";this.buf.b+=v1==null?"null":""+v1;break;case 2:var v2=v;if(isNaN(v2)){this.buf.b+="k"}else if(!isFinite(v2)){this.buf.b+=v2<0?"m":"p"}else{this.buf.b+="d";this.buf.b+=v2==null?"null":""+v2}break;case 3:this.buf.b+=v?"t":"f";break;case 4:if(js_Boot.__instanceof(v,Class)){var className=v.__name__;this.buf.b+="A";this.serializeString(className)}else if(js_Boot.__instanceof(v,Enum)){this.buf.b+="B";this.serializeString(v.__ename__)}else{if(this.useCache&&this.serializeRef(v)){return}this.buf.b+="o";this.serializeFields(v)}break;case 5:throw new js__$Boot_HaxeError("Cannot serialize function");case 6:var c=_g.c;if(c==String){this.serializeString(v);return}if(this.useCache&&this.serializeRef(v)){return}switch(c){case Array:var ucount=0;this.buf.b+="a";var _g1=0;var _g11=v["length"];while(_g1<_g11){var i=_g1++;if(v[i]==null){++ucount}else{if(ucount>0){if(ucount==1){this.buf.b+="n"}else{this.buf.b+="u";this.buf.b+=ucount==null?"null":""+ucount}ucount=0}this.serialize(v[i])}}if(ucount>0){if(ucount==1){this.buf.b+="n"}else{this.buf.b+="u";this.buf.b+=ucount==null?"null":""+ucount}}this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.b+=Std.string(v.getTime());break;case haxe_ds_IntMap:this.buf.b+="q";var v3=v;var k=v3.keys();while(k.hasNext()){var k1=k.next();this.buf.b+=":";this.buf.b+=k1==null?"null":""+k1;this.serialize(v3.h[k1])}this.buf.b+="h";break;case haxe_ds_List:this.buf.b+="l";var _g_head=v.h;while(_g_head!=null){var val=_g_head.item;_g_head=_g_head.next;this.serialize(val)}this.buf.b+="h";break;case haxe_ds_ObjectMap:this.buf.b+="M";var v4=v;var k2=v4.keys();while(k2.hasNext()){var k3=k2.next();var id=Reflect.field(k3,"__id__");Reflect.deleteField(k3,"__id__");this.serialize(k3);k3["__id__"]=id;this.serialize(v4.h[k3.__id__])}this.buf.b+="h";break;case haxe_ds_StringMap:this.buf.b+="b";var v5=v;var k4=v5.keys();while(k4.hasNext()){var k5=k4.next();this.serializeString(k5);this.serialize(__map_reserved[k5]!=null?v5.getReserved(k5):v5.h[k5])}this.buf.b+="h";break;case haxe_io_Bytes:var v6=v;this.buf.b+="s";this.buf.b+=Std.string(Math.ceil(v6.length*8/6));this.buf.b+=":";var i1=0;var max=v6.length-2;var b64=haxe_Serializer.BASE64_CODES;if(b64==null){b64=new Array(haxe_Serializer.BASE64.length);var _g2=0;var _g12=haxe_Serializer.BASE64.length;while(_g2<_g12){var i2=_g2++;b64[i2]=HxOverrides.cca(haxe_Serializer.BASE64,i2)}haxe_Serializer.BASE64_CODES=b64}while(i1<max){var b1=v6.b[i1++];var b2=v6.b[i1++];var b3=v6.b[i1++];this.buf.b+=String.fromCodePoint(b64[b1>>2]);this.buf.b+=String.fromCodePoint(b64[(b1<<4|b2>>4)&63]);this.buf.b+=String.fromCodePoint(b64[(b2<<2|b3>>6)&63]);this.buf.b+=String.fromCodePoint(b64[b3&63])}if(i1==max){var b11=v6.b[i1++];var b21=v6.b[i1++];this.buf.b+=String.fromCodePoint(b64[b11>>2]);this.buf.b+=String.fromCodePoint(b64[(b11<<4|b21>>4)&63]);this.buf.b+=String.fromCodePoint(b64[b21<<2&63])}else if(i1==max+1){var b12=v6.b[i1++];this.buf.b+=String.fromCodePoint(b64[b12>>2]);this.buf.b+=String.fromCodePoint(b64[b12<<4&63])}break;default:if(this.useCache){this.cache.pop()}if(v.hxSerialize!=null){this.buf.b+="C";this.serializeString(c.__name__);if(this.useCache){this.cache.push(v)}v.hxSerialize(this);this.buf.b+="g"}else{this.buf.b+="c";this.serializeString(c.__name__);if(this.useCache){this.cache.push(v)}this.serializeFields(v)}}break;case 7:var e=_g.e;if(this.useCache){if(this.serializeRef(v)){return}this.cache.pop()}this.buf.b+=Std.string(this.useEnumIndex?"j":"w");this.serializeString(e.__ename__);if(this.useEnumIndex){this.buf.b+=":";this.buf.b+=Std.string(v._hx_index)}else{var e1=v;this.serializeString($hxEnums[e1.__enum__].__constructs__[e1._hx_index])}this.buf.b+=":";var params=Type.enumParameters(v);this.buf.b+=Std.string(params.length);var _g3=0;while(_g3<params.length)this.serialize(params[_g3++]);if(this.useCache){this.cache.push(v)}break;default:throw new js__$Boot_HaxeError("Cannot serialize "+Std.string(v))}},__class__:haxe_Serializer};var haxe_Timer=function(time_ms){var me=this;this.id=setInterval(function(){me.run()},time_ms)};$hxClasses["haxe.Timer"]=haxe_Timer;haxe_Timer.__name__="haxe.Timer";haxe_Timer.delay=function(f,time_ms){var t=new haxe_Timer(time_ms);t.run=function(){t.stop();f()};return t};haxe_Timer.prototype={id:null,stop:function(){if(this.id==null){return}clearInterval(this.id);this.id=null},run:function(){},__class__:haxe_Timer};var haxe__$Unserializer_DefaultResolver=function(){};$hxClasses["haxe._Unserializer.DefaultResolver"]=haxe__$Unserializer_DefaultResolver;haxe__$Unserializer_DefaultResolver.__name__="haxe._Unserializer.DefaultResolver";haxe__$Unserializer_DefaultResolver.prototype={resolveClass:function(name){return $hxClasses[name]},resolveEnum:function(name){return $hxEnums[name]},__class__:haxe__$Unserializer_DefaultResolver};var haxe_Unserializer=function(buf){this.buf=buf;this.length=buf.length;this.pos=0;this.scache=[];this.cache=[];var r=haxe_Unserializer.DEFAULT_RESOLVER;if(r==null){r=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.DEFAULT_RESOLVER=r}this.resolver=r};$hxClasses["haxe.Unserializer"]=haxe_Unserializer;haxe_Unserializer.__name__="haxe.Unserializer";haxe_Unserializer.initCodes=function(){var codes=[];var _g=0;var _g1=haxe_Unserializer.BASE64.length;while(_g<_g1){var i=_g++;codes[haxe_Unserializer.BASE64.charCodeAt(i)]=i}return codes};haxe_Unserializer.run=function(v){return new haxe_Unserializer(v).unserialize()};haxe_Unserializer.prototype={buf:null,pos:null,length:null,cache:null,scache:null,resolver:null,setResolver:function(r){if(r==null){if(haxe__$Unserializer_NullResolver.instance==null){haxe__$Unserializer_NullResolver.instance=new haxe__$Unserializer_NullResolver}this.resolver=haxe__$Unserializer_NullResolver.instance}else{this.resolver=r}},readDigits:function(){var k=0;var s=false;var fpos=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c==45){if(this.pos!=fpos){break}s=true;this.pos++;continue}if(c<48||c>57){break}k=k*10+(c-48);this.pos++}if(s){k*=-1}return k},readFloat:function(){var p1=this.pos;while(true){var c=this.buf.charCodeAt(this.pos);if(c!=c){break}if(c>=43&&c<58||c==101||c==69){this.pos++}else{break}}return parseFloat(HxOverrides.substr(this.buf,p1,this.pos-p1))},unserializeObject:function(o){while(true){if(this.pos>=this.length){throw new js__$Boot_HaxeError("Invalid object")}if(this.buf.charCodeAt(this.pos)==103){break}var k=this.unserialize();if(typeof k!="string"){throw new js__$Boot_HaxeError("Invalid object key")}o[k]=this.unserialize()}this.pos++},unserializeEnum:function(edecl,tag){if(this.buf.charCodeAt(this.pos++)!=58){throw new js__$Boot_HaxeError("Invalid enum format")}var nargs=this.readDigits();if(nargs==0){return Type.createEnum(edecl,tag)}var args=[];while(nargs-- >0)args.push(this.unserialize());return Type.createEnum(edecl,tag,args)},unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 65:var name=this.unserialize();var cl=this.resolver.resolveClass(name);if(cl==null){throw new js__$Boot_HaxeError("Class not found "+name)}return cl;case 66:var name1=this.unserialize();var e=this.resolver.resolveEnum(name1);if(e==null){throw new js__$Boot_HaxeError("Enum not found "+name1)}return e;case 67:var name2=this.unserialize();var cl1=this.resolver.resolveClass(name2);if(cl1==null){throw new js__$Boot_HaxeError("Class not found "+name2)}var o=Object.create(cl1.prototype);this.cache.push(o);o.hxUnserialize(this);if(this.buf.charCodeAt(this.pos++)!=103){throw new js__$Boot_HaxeError("Invalid custom data")}return o;case 77:var h=new haxe_ds_ObjectMap;this.cache.push(h);while(this.buf.charCodeAt(this.pos)!=104)h.set(this.unserialize(),this.unserialize());this.pos++;return h;case 82:var n=this.readDigits();if(n<0||n>=this.scache.length){throw new js__$Boot_HaxeError("Invalid string reference")}return this.scache[n];case 97:var a=[];this.cache.push(a);while(true){var c=this.buf.charCodeAt(this.pos);if(c==104){this.pos++;break}if(c==117){this.pos++;var n1=this.readDigits();a[a.length+n1-1]=null}else{a.push(this.unserialize())}}return a;case 98:var h1=new haxe_ds_StringMap;this.cache.push(h1);while(this.buf.charCodeAt(this.pos)!=104){var s=this.unserialize();var value=this.unserialize();if(__map_reserved[s]!=null){h1.setReserved(s,value)}else{h1.h[s]=value}}this.pos++;return h1;case 99:var name3=this.unserialize();var cl2=this.resolver.resolveClass(name3);if(cl2==null){throw new js__$Boot_HaxeError("Class not found "+name3)}var o1=Object.create(cl2.prototype);this.cache.push(o1);this.unserializeObject(o1);return o1;case 100:return this.readFloat();case 102:return false;case 105:return this.readDigits();case 106:var name4=this.unserialize();var edecl=this.resolver.resolveEnum(name4);if(edecl==null){throw new js__$Boot_HaxeError("Enum not found "+name4)}this.pos++;var index=this.readDigits();var tag=edecl.__constructs__.slice()[index];if(tag==null){throw new js__$Boot_HaxeError("Unknown enum index "+name4+"@"+index)}var e1=this.unserializeEnum(edecl,tag);this.cache.push(e1);return e1;case 107:return NaN;case 108:var l=new haxe_ds_List;this.cache.push(l);while(this.buf.charCodeAt(this.pos)!=104)l.add(this.unserialize());this.pos++;return l;case 109:return-Infinity;case 110:return null;case 111:var o2={};this.cache.push(o2);this.unserializeObject(o2);return o2;case 112:return Infinity;case 113:var h2=new haxe_ds_IntMap;this.cache.push(h2);var c1=this.buf.charCodeAt(this.pos++);while(c1==58){var i=this.readDigits();var value1=this.unserialize();h2.h[i]=value1;c1=this.buf.charCodeAt(this.pos++)}if(c1!=104){throw new js__$Boot_HaxeError("Invalid IntMap format")}return h2;case 114:var n2=this.readDigits();if(n2<0||n2>=this.cache.length){throw new js__$Boot_HaxeError("Invalid reference")}return this.cache[n2];case 115:var len=this.readDigits();var buf=this.buf;if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len){throw new js__$Boot_HaxeError("Invalid bytes length")}var codes=haxe_Unserializer.CODES;if(codes==null){codes=haxe_Unserializer.initCodes();haxe_Unserializer.CODES=codes}var i1=this.pos;var rest=len&3;var max=i1+(len-rest);var bytes=new haxe_io_Bytes(new ArrayBuffer((len>>2)*3+(rest>=2?rest-1:0)));var bpos=0;while(i1<max){var c11=codes[buf.charCodeAt(i1++)];var c2=codes[buf.charCodeAt(i1++)];bytes.b[bpos++]=(c11<<2|c2>>4)&255;var c3=codes[buf.charCodeAt(i1++)];bytes.b[bpos++]=(c2<<4|c3>>2)&255;var c4=codes[buf.charCodeAt(i1++)];bytes.b[bpos++]=(c3<<6|c4)&255}if(rest>=2){var c12=codes[buf.charCodeAt(i1++)];var c21=codes[buf.charCodeAt(i1++)];bytes.b[bpos++]=(c12<<2|c21>>4)&255;if(rest==3){var c31=codes[buf.charCodeAt(i1++)];bytes.b[bpos++]=(c21<<4|c31>>2)&255}}this.pos+=len;this.cache.push(bytes);return bytes;case 116:return true;case 118:var d;if(this.buf.charCodeAt(this.pos)>=48&&this.buf.charCodeAt(this.pos)<=57&&this.buf.charCodeAt(this.pos+1)>=48&&this.buf.charCodeAt(this.pos+1)<=57&&this.buf.charCodeAt(this.pos+2)>=48&&this.buf.charCodeAt(this.pos+2)<=57&&this.buf.charCodeAt(this.pos+3)>=48&&this.buf.charCodeAt(this.pos+3)<=57&&this.buf.charCodeAt(this.pos+4)==45){d=HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));this.pos+=19}else{d=new Date(this.readFloat())}this.cache.push(d);return d;case 119:var name5=this.unserialize();var edecl1=this.resolver.resolveEnum(name5);if(edecl1==null){throw new js__$Boot_HaxeError("Enum not found "+name5)}var e2=this.unserializeEnum(edecl1,this.unserialize());this.cache.push(e2);return e2;case 120:throw js__$Boot_HaxeError.wrap(this.unserialize());case 121:var len1=this.readDigits();if(this.buf.charCodeAt(this.pos++)!=58||this.length-this.pos<len1){throw new js__$Boot_HaxeError("Invalid string length")}var s1=HxOverrides.substr(this.buf,this.pos,len1);this.pos+=len1;s1=decodeURIComponent(s1.split("+").join(" "));this.scache.push(s1);return s1;case 122:return 0;default:}this.pos--;throw new js__$Boot_HaxeError("Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos)},__class__:haxe_Unserializer};var haxe__$Unserializer_NullResolver=function(){};$hxClasses["haxe._Unserializer.NullResolver"]=haxe__$Unserializer_NullResolver;haxe__$Unserializer_NullResolver.__name__="haxe._Unserializer.NullResolver";haxe__$Unserializer_NullResolver.prototype={resolveClass:function(name){return null},resolveEnum:function(name){return null},__class__:haxe__$Unserializer_NullResolver};var haxe_crypto_Adler32=function(){this.a1=1;this.a2=0};$hxClasses["haxe.crypto.Adler32"]=haxe_crypto_Adler32;haxe_crypto_Adler32.__name__="haxe.crypto.Adler32";haxe_crypto_Adler32.read=function(i){var a=new haxe_crypto_Adler32;var a2a=i.readByte();var a2b=i.readByte();a.a1=i.readByte()<<8|i.readByte();a.a2=a2a<<8|a2b;return a};haxe_crypto_Adler32.prototype={a1:null,a2:null,update:function(b,pos,len){var a1=this.a1;var a2=this.a2;var _g=pos;var _g1=pos+len;while(_g<_g1){a1=(a1+b.b[_g++])%65521;a2=(a2+a1)%65521}this.a1=a1;this.a2=a2},equals:function(a){if(a.a1==this.a1){return a.a2==this.a2}else{return false}},__class__:haxe_crypto_Adler32};var haxe_io_Bytes=function(data){this.length=data.byteLength;this.b=new Uint8Array(data);this.b.bufferValue=data;data.hxBytes=this;data.bytes=this.b};$hxClasses["haxe.io.Bytes"]=haxe_io_Bytes;haxe_io_Bytes.__name__="haxe.io.Bytes";haxe_io_Bytes.ofString=function(s,encoding){var a=[];var i=0;while(i<s.length){var c=s.charCodeAt(i++);if(55296<=c&&c<=56319){c=c-55232<<10|s.charCodeAt(i++)&1023}if(c<=127){a.push(c)}else if(c<=2047){a.push(192|c>>6);a.push(128|c&63)}else if(c<=65535){a.push(224|c>>12);a.push(128|c>>6&63);a.push(128|c&63)}else{a.push(240|c>>18);a.push(128|c>>12&63);a.push(128|c>>6&63);a.push(128|c&63)}}return new haxe_io_Bytes(new Uint8Array(a).buffer)};haxe_io_Bytes.ofData=function(b){var hb=b.hxBytes;if(hb!=null){return hb}return new haxe_io_Bytes(b)};haxe_io_Bytes.prototype={length:null,b:null,data:null,blit:function(pos,src,srcpos,len){if(pos<0||srcpos<0||len<0||pos+len>this.length||srcpos+len>src.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}if(srcpos==0&&len==src.b.byteLength){this.b.set(src.b,pos)}else{this.b.set(src.b.subarray(srcpos,srcpos+len),pos)}},getString:function(pos,len,encoding){if(pos<0||len<0||pos+len>this.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}var s="";var b=this.b;var fcc=_$String_String_$Impl_$.fromCharCode;var i=pos;var max=pos+len;while(i<max){var c=b[i++];if(c<128){if(c==0){break}s+=fcc(c)}else if(c<224){s+=fcc((c&63)<<6|b[i++]&127)}else if(c<240){s+=fcc((c&31)<<12|(b[i++]&127)<<6|b[i++]&127)}else{var u=(c&15)<<18|(b[i++]&127)<<12|(b[i++]&127)<<6|b[i++]&127;s+=fcc((u>>10)+55232);s+=fcc(u&1023|56320)}}return s},toString:function(){return this.getString(0,this.length)},__class__:haxe_io_Bytes};var haxe_crypto_Base64=function(){};$hxClasses["haxe.crypto.Base64"]=haxe_crypto_Base64;haxe_crypto_Base64.__name__="haxe.crypto.Base64";haxe_crypto_Base64.decode=function(str,complement){if(complement==null){complement=true}if(complement){while(HxOverrides.cca(str,str.length-1)==61)str=HxOverrides.substr(str,0,-1)}return new haxe_crypto_BaseCode(haxe_crypto_Base64.BYTES).decodeBytes(haxe_io_Bytes.ofString(str))};var haxe_crypto_BaseCode=function(base){var len=base.length;var nbits=1;while(len>1<<nbits)++nbits;if(nbits>8||len!=1<<nbits){throw new js__$Boot_HaxeError("BaseCode : base length must be a power of two.")}this.base=base;this.nbits=nbits};$hxClasses["haxe.crypto.BaseCode"]=haxe_crypto_BaseCode;haxe_crypto_BaseCode.__name__="haxe.crypto.BaseCode";haxe_crypto_BaseCode.prototype={base:null,nbits:null,tbl:null,initTable:function(){var tbl=[];var _g=0;while(_g<256)tbl[_g++]=-1;var _g1=0;var _g2=this.base.length;while(_g1<_g2){var i=_g1++;tbl[this.base.b[i]]=i}this.tbl=tbl},decodeBytes:function(b){var nbits=this.nbits;if(this.tbl==null){this.initTable()}var tbl=this.tbl;var size=b.length*nbits>>3;var out=new haxe_io_Bytes(new ArrayBuffer(size));var buf=0;var curbits=0;var pin=0;var pout=0;while(pout<size){while(curbits<8){curbits+=nbits;buf<<=nbits;var i=tbl[b.b[pin++]];if(i==-1){throw new js__$Boot_HaxeError("BaseCode : invalid encoded char")}buf|=i}curbits-=8;out.b[pout++]=buf>>curbits&255&255}return out},__class__:haxe_crypto_BaseCode};var haxe_crypto_Md5=function(){};$hxClasses["haxe.crypto.Md5"]=haxe_crypto_Md5;haxe_crypto_Md5.__name__="haxe.crypto.Md5";haxe_crypto_Md5.encode=function(s){var m=new haxe_crypto_Md5;return m.hex(m.doEncode(haxe_crypto_Md5.str2blks(s)))};haxe_crypto_Md5.str2blks=function(str){var str1=haxe_io_Bytes.ofString(str);var nblk=(str1.length+8>>6)+1;var blks=[];var blksSize=nblk*16;var _g=0;while(_g<blksSize)blks[_g++]=0;var i=0;var max=str1.length;var l=max*8;while(i<max){blks[i>>2]|=str1.b[i]<<(l+i)%4*8;++i}blks[i>>2]|=128<<(l+i)%4*8;var k=nblk*16-2;blks[k]=l&255;blks[k]=(blks[k]|=(l>>>8&255)<<8)|(l>>>16&255)<<16;blks[k]|=(l>>>24&255)<<24;return blks};haxe_crypto_Md5.prototype={bitOR:function(a,b){return(a>>>1|b>>>1)<<1|(a&1|b&1)},bitXOR:function(a,b){return(a>>>1^b>>>1)<<1|a&1^b&1},bitAND:function(a,b){return(a>>>1&b>>>1)<<1|a&1&(b&1)},addme:function(x,y){var lsw=(x&65535)+(y&65535);return(x>>16)+(y>>16)+(lsw>>16)<<16|lsw&65535},hex:function(a){var str="";var _g=0;while(_g<a.length){var num=a[_g];++_g;str+="0123456789abcdef".charAt(num>>4&15)+"0123456789abcdef".charAt(num&15);str+="0123456789abcdef".charAt(num>>12&15)+"0123456789abcdef".charAt(num>>8&15);str+="0123456789abcdef".charAt(num>>20&15)+"0123456789abcdef".charAt(num>>16&15);str+="0123456789abcdef".charAt(num>>28&15)+"0123456789abcdef".charAt(num>>24&15)}return str},rol:function(num,cnt){return num<<cnt|num>>>32-cnt},cmn:function(q,a,b,x,s,t){return this.addme(this.rol(this.addme(this.addme(a,q),this.addme(x,t)),s),b)},ff:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,c),this.bitAND(~b,d)),a,b,x,s,t)},gg:function(a,b,c,d,x,s,t){return this.cmn(this.bitOR(this.bitAND(b,d),this.bitAND(c,~d)),a,b,x,s,t)},hh:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(this.bitXOR(b,c),d),a,b,x,s,t)},ii:function(a,b,c,d,x,s,t){return this.cmn(this.bitXOR(c,this.bitOR(b,~d)),a,b,x,s,t)},doEncode:function(x){var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;var i=0;while(i<x.length){var olda=a;var oldb=b;var oldc=c;var oldd=d;a=this.ff(a,b,c,d,x[i],7,-680876936);d=this.ff(d,a,b,c,x[i+1],12,-389564586);c=this.ff(c,d,a,b,x[i+2],17,606105819);b=this.ff(b,c,d,a,x[i+3],22,-1044525330);a=this.ff(a,b,c,d,x[i+4],7,-176418897);d=this.ff(d,a,b,c,x[i+5],12,1200080426);c=this.ff(c,d,a,b,x[i+6],17,-1473231341);b=this.ff(b,c,d,a,x[i+7],22,-45705983);a=this.ff(a,b,c,d,x[i+8],7,1770035416);d=this.ff(d,a,b,c,x[i+9],12,-1958414417);c=this.ff(c,d,a,b,x[i+10],17,-42063);b=this.ff(b,c,d,a,x[i+11],22,-1990404162);a=this.ff(a,b,c,d,x[i+12],7,1804603682);d=this.ff(d,a,b,c,x[i+13],12,-40341101);c=this.ff(c,d,a,b,x[i+14],17,-1502002290);b=this.ff(b,c,d,a,x[i+15],22,1236535329);a=this.gg(a,b,c,d,x[i+1],5,-165796510);d=this.gg(d,a,b,c,x[i+6],9,-1069501632);c=this.gg(c,d,a,b,x[i+11],14,643717713);b=this.gg(b,c,d,a,x[i],20,-373897302);a=this.gg(a,b,c,d,x[i+5],5,-701558691);d=this.gg(d,a,b,c,x[i+10],9,38016083);c=this.gg(c,d,a,b,x[i+15],14,-660478335);b=this.gg(b,c,d,a,x[i+4],20,-405537848);a=this.gg(a,b,c,d,x[i+9],5,568446438);d=this.gg(d,a,b,c,x[i+14],9,-1019803690);c=this.gg(c,d,a,b,x[i+3],14,-187363961);b=this.gg(b,c,d,a,x[i+8],20,1163531501);a=this.gg(a,b,c,d,x[i+13],5,-1444681467);d=this.gg(d,a,b,c,x[i+2],9,-51403784);c=this.gg(c,d,a,b,x[i+7],14,1735328473);b=this.gg(b,c,d,a,x[i+12],20,-1926607734);a=this.hh(a,b,c,d,x[i+5],4,-378558);d=this.hh(d,a,b,c,x[i+8],11,-2022574463);c=this.hh(c,d,a,b,x[i+11],16,1839030562);b=this.hh(b,c,d,a,x[i+14],23,-35309556);a=this.hh(a,b,c,d,x[i+1],4,-1530992060);d=this.hh(d,a,b,c,x[i+4],11,1272893353);c=this.hh(c,d,a,b,x[i+7],16,-155497632);b=this.hh(b,c,d,a,x[i+10],23,-1094730640);a=this.hh(a,b,c,d,x[i+13],4,681279174);d=this.hh(d,a,b,c,x[i],11,-358537222);c=this.hh(c,d,a,b,x[i+3],16,-722521979);b=this.hh(b,c,d,a,x[i+6],23,76029189);a=this.hh(a,b,c,d,x[i+9],4,-640364487);d=this.hh(d,a,b,c,x[i+12],11,-421815835);c=this.hh(c,d,a,b,x[i+15],16,530742520);b=this.hh(b,c,d,a,x[i+2],23,-995338651);a=this.ii(a,b,c,d,x[i],6,-198630844);d=this.ii(d,a,b,c,x[i+7],10,1126891415);c=this.ii(c,d,a,b,x[i+14],15,-1416354905);b=this.ii(b,c,d,a,x[i+5],21,-57434055);a=this.ii(a,b,c,d,x[i+12],6,1700485571);d=this.ii(d,a,b,c,x[i+3],10,-1894986606);c=this.ii(c,d,a,b,x[i+10],15,-1051523);b=this.ii(b,c,d,a,x[i+1],21,-2054922799);a=this.ii(a,b,c,d,x[i+8],6,1873313359);d=this.ii(d,a,b,c,x[i+15],10,-30611744);c=this.ii(c,d,a,b,x[i+6],15,-1560198380);b=this.ii(b,c,d,a,x[i+13],21,1309151649);a=this.ii(a,b,c,d,x[i+4],6,-145523070);d=this.ii(d,a,b,c,x[i+11],10,-1120210379);c=this.ii(c,d,a,b,x[i+2],15,718787259);b=this.ii(b,c,d,a,x[i+9],21,-343485551);a=this.addme(a,olda);b=this.addme(b,oldb);c=this.addme(c,oldc);d=this.addme(d,oldd);i+=16}return[a,b,c,d]},__class__:haxe_crypto_Md5};var haxe_ds_ArraySort=function(){};$hxClasses["haxe.ds.ArraySort"]=haxe_ds_ArraySort;haxe_ds_ArraySort.__name__="haxe.ds.ArraySort";haxe_ds_ArraySort.sort=function(a,cmp){haxe_ds_ArraySort.rec(a,cmp,0,a.length)};haxe_ds_ArraySort.rec=function(a,cmp,from,to){var middle=from+to>>1;if(to-from<12){if(to<=from){return}var _g=from+1;while(_g<to){var j=_g++;while(j>from){if(cmp(a[j],a[j-1])<0){haxe_ds_ArraySort.swap(a,j-1,j)}else{break}--j}}return}haxe_ds_ArraySort.rec(a,cmp,from,middle);haxe_ds_ArraySort.rec(a,cmp,middle,to);haxe_ds_ArraySort.doMerge(a,cmp,from,middle,to,middle-from,to-middle)};haxe_ds_ArraySort.doMerge=function(a,cmp,from,pivot,to,len1,len2){var first_cut;var second_cut;var len11;var len22;if(len1==0||len2==0){return}if(len1+len2==2){if(cmp(a[pivot],a[from])<0){haxe_ds_ArraySort.swap(a,pivot,from)}return}if(len1>len2){len11=len1>>1;first_cut=from+len11;second_cut=haxe_ds_ArraySort.lower(a,cmp,pivot,to,first_cut);len22=second_cut-pivot}else{len22=len2>>1;second_cut=pivot+len22;first_cut=haxe_ds_ArraySort.upper(a,cmp,from,pivot,second_cut);len11=first_cut-from}haxe_ds_ArraySort.rotate(a,cmp,first_cut,pivot,second_cut);var new_mid=first_cut+len22;haxe_ds_ArraySort.doMerge(a,cmp,from,first_cut,new_mid,len11,len22);haxe_ds_ArraySort.doMerge(a,cmp,new_mid,second_cut,to,len1-len11,len2-len22)};haxe_ds_ArraySort.rotate=function(a,cmp,from,mid,to){if(from==mid||mid==to){return}var n=haxe_ds_ArraySort.gcd(to-from,mid-from);while(n--!=0){var val=a[from+n];var shift=mid-from;var p1=from+n;var p2=from+n+shift;while(p2!=from+n){a[p1]=a[p2];p1=p2;if(to-p2>shift){p2+=shift}else{p2=from+(shift-(to-p2))}}a[p1]=val}};haxe_ds_ArraySort.gcd=function(m,n){while(n!=0){var t=m%n;m=n;n=t}return m};haxe_ds_ArraySort.upper=function(a,cmp,from,to,val){var len=to-from;var half;var mid;while(len>0){half=len>>1;mid=from+half;if(cmp(a[val],a[mid])<0){len=half}else{from=mid+1;len=len-half-1}}return from};haxe_ds_ArraySort.lower=function(a,cmp,from,to,val){var len=to-from;var half;var mid;while(len>0){half=len>>1;mid=from+half;if(cmp(a[mid],a[val])<0){from=mid+1;len=len-half-1}else{len=half}}return from};haxe_ds_ArraySort.swap=function(a,i,j){var tmp=a[i];a[i]=a[j];a[j]=tmp};var haxe_ds_Either=$hxEnums["haxe.ds.Either"]={__ename__:"haxe.ds.Either",__constructs__:["Left","Right"],Left:($_=function(v){return{_hx_index:0,v:v,__enum__:"haxe.ds.Either",toString:$estr}},$_.__params__=["v"],$_),Right:($_=function(v){return{_hx_index:1,v:v,__enum__:"haxe.ds.Either",toString:$estr}},$_.__params__=["v"],$_)};var haxe_ds_IntMap=function(){this.h={}};$hxClasses["haxe.ds.IntMap"]=haxe_ds_IntMap;haxe_ds_IntMap.__name__="haxe.ds.IntMap";haxe_ds_IntMap.__interfaces__=[haxe_IMap];haxe_ds_IntMap.prototype={h:null,set:function(key,value){this.h[key]=value},exists:function(key){return this.h.hasOwnProperty(key)},remove:function(key){if(!this.h.hasOwnProperty(key)){return false}delete this.h[key];return true},keys:function(){var a=[];for(var key in this.h)this.h.hasOwnProperty(key)?a.push(key|0):null;return HxOverrides.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var i=this.it.next();return this.ref[i]}}},__class__:haxe_ds_IntMap};var haxe_ds__$List_ListNode=function(item,next){this.item=item;this.next=next};$hxClasses["haxe.ds._List.ListNode"]=haxe_ds__$List_ListNode;haxe_ds__$List_ListNode.__name__="haxe.ds._List.ListNode";haxe_ds__$List_ListNode.prototype={item:null,next:null,__class__:haxe_ds__$List_ListNode};var haxe_ds__$List_ListIterator=function(head){this.head=head};$hxClasses["haxe.ds._List.ListIterator"]=haxe_ds__$List_ListIterator;haxe_ds__$List_ListIterator.__name__="haxe.ds._List.ListIterator";haxe_ds__$List_ListIterator.prototype={head:null,hasNext:function(){return this.head!=null},next:function(){var val=this.head.item;this.head=this.head.next;return val},__class__:haxe_ds__$List_ListIterator};var haxe_ds__$StringMap_StringMapIterator=function(map,keys){this.map=map;this.keys=keys;this.index=0;this.count=keys.length};$hxClasses["haxe.ds._StringMap.StringMapIterator"]=haxe_ds__$StringMap_StringMapIterator;haxe_ds__$StringMap_StringMapIterator.__name__="haxe.ds._StringMap.StringMapIterator";haxe_ds__$StringMap_StringMapIterator.prototype={map:null,keys:null,index:null,count:null,hasNext:function(){return this.index<this.count},next:function(){var _this=this.map;var key=this.keys[this.index++];if(__map_reserved[key]!=null){return _this.getReserved(key)}else{return _this.h[key]}},__class__:haxe_ds__$StringMap_StringMapIterator};var haxe_ds_StringMap=function(){this.h={}};$hxClasses["haxe.ds.StringMap"]=haxe_ds_StringMap;haxe_ds_StringMap.__name__="haxe.ds.StringMap";haxe_ds_StringMap.__interfaces__=[haxe_IMap];haxe_ds_StringMap.prototype={h:null,rh:null,set:function(key,value){if(__map_reserved[key]!=null){this.setReserved(key,value)}else{this.h[key]=value}},exists:function(key){if(__map_reserved[key]!=null){return this.existsReserved(key)}return this.h.hasOwnProperty(key)},setReserved:function(key,value){if(this.rh==null){this.rh={}}this.rh["$"+key]=value},getReserved:function(key){if(this.rh==null){return null}else{return this.rh["$"+key]}},existsReserved:function(key){if(this.rh==null){return false}return this.rh.hasOwnProperty("$"+key)},remove:function(key){if(__map_reserved[key]!=null){key="$"+key;if(this.rh==null||!this.rh.hasOwnProperty(key)){return false}delete this.rh[key];return true}else{if(!this.h.hasOwnProperty(key)){return false}delete this.h[key];return true}},keys:function(){return HxOverrides.iter(this.arrayKeys())},arrayKeys:function(){var out=[];for(var key in this.h){if(this.h.hasOwnProperty(key)){out.push(key)}}if(this.rh!=null){for(var key in this.rh){if(key.charCodeAt(0)==36){out.push(key.substr(1))}}}return out},__class__:haxe_ds_StringMap};var haxe_io_BytesBuffer=function(){this.pos=0;this.size=0};$hxClasses["haxe.io.BytesBuffer"]=haxe_io_BytesBuffer;haxe_io_BytesBuffer.__name__="haxe.io.BytesBuffer";haxe_io_BytesBuffer.prototype={buffer:null,view:null,u8:null,pos:null,size:null,addByte:function(byte){if(this.pos==this.size){this.grow(1)}this.view.setUint8(this.pos++,byte)},add:function(src){if(this.pos+src.length>this.size){this.grow(src.length)}if(this.size==0){return}this.u8.set(new Uint8Array(src.b.buffer,src.b.byteOffset,src.length),this.pos);this.pos+=src.length},addBytes:function(src,pos,len){if(pos<0||len<0||pos+len>src.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}if(this.pos+len>this.size){this.grow(len)}if(this.size==0){return}this.u8.set(new Uint8Array(src.b.buffer,src.b.byteOffset+pos,len),this.pos);this.pos+=len},grow:function(delta){var req=this.pos+delta;var nsize=this.size==0?16:this.size;while(nsize<req)nsize=nsize*3>>1;var nbuf=new ArrayBuffer(nsize);var nu8=new Uint8Array(nbuf);if(this.size>0){nu8.set(this.u8)}this.size=nsize;this.buffer=nbuf;this.u8=nu8;this.view=new DataView(this.buffer)},getBytes:function(){if(this.size==0){return new haxe_io_Bytes(new ArrayBuffer(0))}var b=new haxe_io_Bytes(this.buffer);b.length=this.pos;return b},__class__:haxe_io_BytesBuffer};var haxe_io_Input=function(){};$hxClasses["haxe.io.Input"]=haxe_io_Input;haxe_io_Input.__name__="haxe.io.Input";haxe_io_Input.prototype={bigEndian:null,readByte:function(){throw new js__$Boot_HaxeError("Not implemented")},readBytes:function(s,pos,len){var k=len;var b=s.b;if(pos<0||len<0||pos+len>s.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}try{while(k>0){b[pos]=this.readByte();++pos;--k}}catch(eof){haxe_CallStack.lastException=eof;if(!((eof instanceof js__$Boot_HaxeError?eof.val:eof)instanceof haxe_io_Eof)){throw eof}}return len-k},readFullBytes:function(s,pos,len){while(len>0){var k=this.readBytes(s,pos,len);if(k==0){throw new js__$Boot_HaxeError(haxe_io_Error.Blocked)}pos+=k;len-=k}},read:function(nbytes){var s=new haxe_io_Bytes(new ArrayBuffer(nbytes));var p=0;while(nbytes>0){var k=this.readBytes(s,p,nbytes);if(k==0){throw new js__$Boot_HaxeError(haxe_io_Error.Blocked)}p+=k;nbytes-=k}return s},readInt16:function(){var ch1=this.readByte();var ch2=this.readByte();var n=this.bigEndian?ch2|ch1<<8:ch1|ch2<<8;if((n&32768)!=0){return n-65536}return n},readUInt16:function(){var ch1=this.readByte();var ch2=this.readByte();if(this.bigEndian){return ch2|ch1<<8}else{return ch1|ch2<<8}},readInt32:function(){var ch1=this.readByte();var ch2=this.readByte();var ch3=this.readByte();var ch4=this.readByte();if(this.bigEndian){return ch4|ch3<<8|ch2<<16|ch1<<24}else{return ch1|ch2<<8|ch3<<16|ch4<<24}},readString:function(len,encoding){var b=new haxe_io_Bytes(new ArrayBuffer(len));this.readFullBytes(b,0,len);return b.getString(0,len,encoding)},__class__:haxe_io_Input};var haxe_io_BytesInput=function(b,pos,len){if(pos==null){pos=0}if(len==null){len=b.length-pos}if(pos<0||len<0||pos+len>b.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}this.b=b.b;this.pos=pos;this.len=len;this.totlen=len};$hxClasses["haxe.io.BytesInput"]=haxe_io_BytesInput;haxe_io_BytesInput.__name__="haxe.io.BytesInput";haxe_io_BytesInput.__super__=haxe_io_Input;haxe_io_BytesInput.prototype=$extend(haxe_io_Input.prototype,{b:null,pos:null,len:null,totlen:null,readByte:function(){if(this.len==0){throw new js__$Boot_HaxeError(new haxe_io_Eof)}this.len--;return this.b[this.pos++]},readBytes:function(buf,pos,len){if(pos<0||len<0||pos+len>buf.length){throw new js__$Boot_HaxeError(haxe_io_Error.OutsideBounds)}if(this.len==0&&len>0){throw new js__$Boot_HaxeError(new haxe_io_Eof)}if(this.len<len){len=this.len}var b1=this.b;var b2=buf.b;var _g=0;var _g1=len;while(_g<_g1){var i=_g++;b2[pos+i]=b1[this.pos+i]}this.pos+=len;this.len-=len;return len},__class__:haxe_io_BytesInput});var haxe_io_Encoding=$hxEnums["haxe.io.Encoding"]={__ename__:"haxe.io.Encoding",__constructs__:["UTF8","RawNative"],UTF8:{_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr},RawNative:{_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}};var haxe_io_Eof=function(){};$hxClasses["haxe.io.Eof"]=haxe_io_Eof;haxe_io_Eof.__name__="haxe.io.Eof";haxe_io_Eof.prototype={toString:function(){return"Eof"},__class__:haxe_io_Eof};var haxe_io_Error=$hxEnums["haxe.io.Error"]={__ename__:"haxe.io.Error",__constructs__:["Blocked","Overflow","OutsideBounds","Custom"],Blocked:{_hx_index:0,__enum__:"haxe.io.Error",toString:$estr},Overflow:{_hx_index:1,__enum__:"haxe.io.Error",toString:$estr},OutsideBounds:{_hx_index:2,__enum__:"haxe.io.Error",toString:$estr},Custom:($_=function(e){return{_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}},$_.__params__=["e"],$_)};var haxe_io_Path=function(path){switch(path){case".":case"..":this.dir=path;this.file="";return}var c1=path.lastIndexOf("/");var c2=path.lastIndexOf("\\");if(c1<c2){this.dir=HxOverrides.substr(path,0,c2);path=HxOverrides.substr(path,c2+1,null);this.backslash=true}else if(c2<c1){this.dir=HxOverrides.substr(path,0,c1);path=HxOverrides.substr(path,c1+1,null)}else{this.dir=null}var cp=path.lastIndexOf(".");if(cp!=-1){this.ext=HxOverrides.substr(path,cp+1,null);this.file=HxOverrides.substr(path,0,cp)}else{this.ext=null;this.file=path}};$hxClasses["haxe.io.Path"]=haxe_io_Path;haxe_io_Path.__name__="haxe.io.Path";haxe_io_Path.directory=function(path){var s=new haxe_io_Path(path);if(s.dir==null){return""}return s.dir};haxe_io_Path.prototype={dir:null,file:null,ext:null,backslash:null,__class__:haxe_io_Path};var haxe_xml__$Access_AttribAccess_$Impl_$={};$hxClasses["haxe.xml._Access.AttribAccess_Impl_"]=haxe_xml__$Access_AttribAccess_$Impl_$;haxe_xml__$Access_AttribAccess_$Impl_$.__name__="haxe.xml._Access.AttribAccess_Impl_";haxe_xml__$Access_AttribAccess_$Impl_$.resolve=function(this1,name){if(this1.nodeType==Xml.Document){throw new js__$Boot_HaxeError("Cannot access document attribute "+name)}var v=this1.get(name);if(v==null){if(this1.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(this1.nodeType))}throw new js__$Boot_HaxeError(this1.nodeName+" is missing attribute "+name)}return v};var haxe_xml__$Access_HasAttribAccess_$Impl_$={};$hxClasses["haxe.xml._Access.HasAttribAccess_Impl_"]=haxe_xml__$Access_HasAttribAccess_$Impl_$;haxe_xml__$Access_HasAttribAccess_$Impl_$.__name__="haxe.xml._Access.HasAttribAccess_Impl_";haxe_xml__$Access_HasAttribAccess_$Impl_$.resolve=function(this1,name){if(this1.nodeType==Xml.Document){throw new js__$Boot_HaxeError("Cannot access document attribute "+name)}return this1.exists(name)};var haxe_xml__$Access_NodeListAccess_$Impl_$={};$hxClasses["haxe.xml._Access.NodeListAccess_Impl_"]=haxe_xml__$Access_NodeListAccess_$Impl_$;haxe_xml__$Access_NodeListAccess_$Impl_$.__name__="haxe.xml._Access.NodeListAccess_Impl_";haxe_xml__$Access_NodeListAccess_$Impl_$.resolve=function(this1,name){var l=[];var x=this1.elementsNamed(name);while(x.hasNext()){var x1=x.next();if(x1.nodeType!=Xml.Document&&x1.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Invalid nodeType "+_$Xml_XmlType_$Impl_$.toString(x1.nodeType))}l.push(x1)}return l};var haxe_xml_XmlParserException=function(message,xml,position){this.xml=xml;this.message=message;this.position=position;this.lineNumber=1;this.positionAtLine=0;var _g=0;while(_g<position){var c=xml.charCodeAt(_g++);if(c==10){this.lineNumber++;this.positionAtLine=0}else if(c!=13){this.positionAtLine++}}};$hxClasses["haxe.xml.XmlParserException"]=haxe_xml_XmlParserException;haxe_xml_XmlParserException.__name__="haxe.xml.XmlParserException";haxe_xml_XmlParserException.prototype={message:null,lineNumber:null,positionAtLine:null,position:null,xml:null,toString:function(){var c=js_Boot.getClass(this);return c.__name__+": "+this.message+" at line "+this.lineNumber+" char "+this.positionAtLine},__class__:haxe_xml_XmlParserException};var haxe_xml_Parser=function(){};$hxClasses["haxe.xml.Parser"]=haxe_xml_Parser;haxe_xml_Parser.__name__="haxe.xml.Parser";haxe_xml_Parser.parse=function(str,strict){if(strict==null){strict=false}var doc=Xml.createDocument();haxe_xml_Parser.doParse(str,strict,0,doc);return doc};haxe_xml_Parser.doParse=function(str,strict,p,parent){if(p==null){p=0}var xml=null;var state=1;var next=1;var aname=null;var start=0;var nsubs=0;var nbrackets=0;var c=str.charCodeAt(p);var buf=new StringBuf;var escapeNext=1;var attrValQuote=-1;while(c==c){switch(state){case 0:switch(c){case 9:case 10:case 13:case 32:break;default:state=next;continue}break;case 1:if(c==60){state=0;next=2}else{start=p;state=13;continue}break;case 2:switch(c){case 33:if(str.charCodeAt(p+1)==91){p+=2;if(HxOverrides.substr(str,p,6).toUpperCase()!="CDATA["){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected <![CDATA[",str,p))}p+=5;state=17;start=p+1}else if(str.charCodeAt(p+1)==68||str.charCodeAt(p+1)==100){if(HxOverrides.substr(str,p+2,6).toUpperCase()!="OCTYPE"){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected <!DOCTYPE",str,p))}p+=8;state=16;start=p+1}else if(str.charCodeAt(p+1)!=45||str.charCodeAt(p+2)!=45){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected \x3c!--",str,p))}else{p+=2;state=15;start=p+1}break;case 47:if(parent==null){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected node name",str,p))}start=p+1;state=0;next=10;break;case 63:state=14;start=p;break;default:state=3;start=p;continue}break;case 3:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){if(p==start){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected node name",str,p))}xml=Xml.createElement(HxOverrides.substr(str,start,p-start));parent.addChild(xml);++nsubs;state=0;next=4;continue}break;case 4:switch(c){case 47:state=11;break;case 62:state=9;break;default:state=5;start=p;continue}break;case 5:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){if(start==p){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected attribute name",str,p))}aname=HxOverrides.substr(str,start,p-start);if(xml.exists(aname)){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Duplicate attribute ["+aname+"]",str,p))}state=0;next=6;continue}break;case 6:if(c==61){state=0;next=7}else{throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected =",str,p))}break;case 7:switch(c){case 34:case 39:buf=new StringBuf;state=8;start=p+1;attrValQuote=c;break;default:throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException('Expected "',str,p))}break;case 8:switch(c){case 38:var len=p-start;buf.b+=len==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len);state=18;escapeNext=8;start=p+1;break;case 60:case 62:if(strict){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Invalid unescaped "+String.fromCodePoint(c)+" in attribute value",str,p))}else if(c==attrValQuote){var len1=p-start;buf.b+=len1==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len1);var val=buf.b;buf=new StringBuf;xml.set(aname,val);state=0;next=4}break;default:if(c==attrValQuote){var len2=p-start;buf.b+=len2==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len2);var val1=buf.b;buf=new StringBuf;xml.set(aname,val1);state=0;next=4}}break;case 9:p=haxe_xml_Parser.doParse(str,strict,p,xml);start=p;state=1;break;case 10:if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)){if(start==p){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected node name",str,p))}var v=HxOverrides.substr(str,start,p-start);if(parent==null||parent.nodeType!=0){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Unexpected </"+v+">, tag is not open",str,p))}if(parent.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(parent.nodeType))}if(v!=parent.nodeName){if(parent.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(parent.nodeType))}throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected </"+parent.nodeName+">",str,p))}state=0;next=12;continue}break;case 11:if(c==62){state=1}else{throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected >",str,p))}break;case 12:if(c==62){if(nsubs==0){parent.addChild(Xml.createPCData(""))}return p}else{throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Expected >",str,p))}break;case 13:if(c==60){var len3=p-start;buf.b+=len3==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len3);var child=Xml.createPCData(buf.b);buf=new StringBuf;parent.addChild(child);++nsubs;state=0;next=2}else if(c==38){var len4=p-start;buf.b+=len4==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len4);state=18;escapeNext=13;start=p+1}break;case 14:if(c==63&&str.charCodeAt(p+1)==62){++p;parent.addChild(Xml.createProcessingInstruction(HxOverrides.substr(str,start+1,p-start-2)));++nsubs;state=1}break;case 15:if(c==45&&str.charCodeAt(p+1)==45&&str.charCodeAt(p+2)==62){parent.addChild(Xml.createComment(HxOverrides.substr(str,start,p-start)));++nsubs;p+=2;state=1}break;case 16:if(c==91){++nbrackets}else if(c==93){--nbrackets}else if(c==62&&nbrackets==0){parent.addChild(Xml.createDocType(HxOverrides.substr(str,start,p-start)));++nsubs;state=1}break;case 17:if(c==93&&str.charCodeAt(p+1)==93&&str.charCodeAt(p+2)==62){parent.addChild(Xml.createCData(HxOverrides.substr(str,start,p-start)));++nsubs;p+=2;state=1}break;case 18:if(c==59){var s=HxOverrides.substr(str,start,p-start);if(s.charCodeAt(0)==35){var c1=s.charCodeAt(1)==120?Std.parseInt("0"+HxOverrides.substr(s,1,s.length-1)):Std.parseInt(HxOverrides.substr(s,1,s.length-1));buf.b+=String.fromCodePoint(c1)}else{var _this=haxe_xml_Parser.escapes;if(!(__map_reserved[s]!=null?_this.existsReserved(s):_this.h.hasOwnProperty(s))){if(strict){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Undefined entity: "+s,str,p))}buf.b+=Std.string("&"+s+";")}else{var _this1=haxe_xml_Parser.escapes;buf.b+=Std.string(__map_reserved[s]!=null?_this1.getReserved(s):_this1.h[s])}}start=p+1;state=escapeNext}else if(!(c>=97&&c<=122||c>=65&&c<=90||c>=48&&c<=57||c==58||c==46||c==95||c==45)&&c!=35){if(strict){throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Invalid character in entity: "+String.fromCodePoint(c),str,p))}buf.b+=String.fromCodePoint(38);var len5=p-start;buf.b+=len5==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len5);--p;start=p+1;state=escapeNext}break}c=str.charCodeAt(++p)}if(state==1){start=p;state=13}if(state==13){if(parent.nodeType==0){if(parent.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(parent.nodeType))}throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Unclosed node <"+parent.nodeName+">",str,p))}if(p!=start||nsubs==0){var len6=p-start;buf.b+=len6==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len6);parent.addChild(Xml.createPCData(buf.b));++nsubs}return p}if(!strict&&state==18&&escapeNext==13){buf.b+=String.fromCodePoint(38);var len7=p-start;buf.b+=len7==null?HxOverrides.substr(str,start,null):HxOverrides.substr(str,start,len7);parent.addChild(Xml.createPCData(buf.b));++nsubs;return p}throw new js__$Boot_HaxeError(new haxe_xml_XmlParserException("Unexpected end",str,p))};var haxe_xml_Printer=function(pretty){this.output=new StringBuf;this.pretty=pretty};$hxClasses["haxe.xml.Printer"]=haxe_xml_Printer;haxe_xml_Printer.__name__="haxe.xml.Printer";haxe_xml_Printer.print=function(xml,pretty){if(pretty==null){pretty=false}var printer=new haxe_xml_Printer(pretty);printer.writeNode(xml,"");return printer.output.b};haxe_xml_Printer.prototype={output:null,pretty:null,writeNode:function(value,tabs){switch(value.nodeType){case 0:this.output.b+=Std.string(tabs+"<");if(value.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}this.output.b+=Std.string(value.nodeName);var attribute=value.attributes();while(attribute.hasNext()){var attribute1=attribute.next();this.output.b+=Std.string(" "+attribute1+'="');var input=StringTools.htmlEscape(value.get(attribute1),true);this.output.b+=Std.string(input);this.output.b+='"'}if(this.hasChildren(value)){this.output.b+=">";if(this.pretty){this.output.b+="\n"}if(value.nodeType!=Xml.Document&&value.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}var child=HxOverrides.iter(value.children);while(child.hasNext())this.writeNode(child.next(),this.pretty?tabs+"\t":tabs);this.output.b+=Std.string(tabs+"</");if(value.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element but found "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}this.output.b+=Std.string(value.nodeName);this.output.b+=">";if(this.pretty){this.output.b+="\n"}}else{this.output.b+="/>";if(this.pretty){this.output.b+="\n"}}break;case 1:if(value.nodeType==Xml.Document||value.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}var nodeValue=value.nodeValue;if(nodeValue.length!=0){var input1=tabs+StringTools.htmlEscape(nodeValue);this.output.b+=Std.string(input1);if(this.pretty){this.output.b+="\n"}}break;case 2:this.output.b+=Std.string(tabs+"<![CDATA[");if(value.nodeType==Xml.Document||value.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}this.output.b+=Std.string(value.nodeValue);this.output.b+="]]>";if(this.pretty){this.output.b+="\n"}break;case 3:if(value.nodeType==Xml.Document||value.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}var commentContent=value.nodeValue;var _this_r=new RegExp("[\n\r\t]+","g".split("u").join(""));commentContent=commentContent.replace(_this_r,"");commentContent="\x3c!--"+commentContent+"--\x3e";this.output.b+=tabs==null?"null":""+tabs;this.output.b+=Std.string(StringTools.trim(commentContent));if(this.pretty){this.output.b+="\n"}break;case 4:if(value.nodeType==Xml.Document||value.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}this.output.b+=Std.string("<!DOCTYPE "+value.nodeValue+">");if(this.pretty){this.output.b+="\n"}break;case 5:if(value.nodeType==Xml.Document||value.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}this.output.b+=Std.string("<?"+value.nodeValue+"?>");if(this.pretty){this.output.b+="\n"}break;case 6:if(value.nodeType!=Xml.Document&&value.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}var child1=HxOverrides.iter(value.children);while(child1.hasNext())this.writeNode(child1.next(),tabs);break}},hasChildren:function(value){if(value.nodeType!=Xml.Document&&value.nodeType!=Xml.Element){throw new js__$Boot_HaxeError("Bad node type, expected Element or Document but found "+_$Xml_XmlType_$Impl_$.toString(value.nodeType))}var child=HxOverrides.iter(value.children);while(child.hasNext()){var child1=child.next();switch(child1.nodeType){case 0:case 1:return true;case 2:case 3:if(child1.nodeType==Xml.Document||child1.nodeType==Xml.Element){throw new js__$Boot_HaxeError("Bad node type, unexpected "+_$Xml_XmlType_$Impl_$.toString(child1.nodeType))}if(StringTools.ltrim(child1.nodeValue).length!=0){return true}break;default:}}return false},__class__:haxe_xml_Printer};var haxe_zip_ExtraField=$hxEnums["haxe.zip.ExtraField"]={__ename__:"haxe.zip.ExtraField",__constructs__:["FUnknown","FInfoZipUnicodePath","FUtf8"],FUnknown:($_=function(tag,bytes){return{_hx_index:0,tag:tag,bytes:bytes,__enum__:"haxe.zip.ExtraField",toString:$estr}},$_.__params__=["tag","bytes"],$_),FInfoZipUnicodePath:($_=function(name,crc){return{_hx_index:1,name:name,crc:crc,__enum__:"haxe.zip.ExtraField",toString:$estr}},$_.__params__=["name","crc"],$_),FUtf8:{_hx_index:2,__enum__:"haxe.zip.ExtraField",toString:$estr}};var haxe_zip_Huffman=$hxEnums["haxe.zip.Huffman"]={__ename__:"haxe.zip.Huffman",__constructs__:["Found","NeedBit","NeedBits"],Found:($_=function(i){return{_hx_index:0,i:i,__enum__:"haxe.zip.Huffman",toString:$estr}},$_.__params__=["i"],$_),NeedBit:($_=function(left,right){return{_hx_index:1,left:left,right:right,__enum__:"haxe.zip.Huffman",toString:$estr}},$_.__params__=["left","right"],$_),NeedBits:($_=function(n,table){return{_hx_index:2,n:n,table:table,__enum__:"haxe.zip.Huffman",toString:$estr}},$_.__params__=["n","table"],$_)};var haxe_zip_HuffTools=function(){};$hxClasses["haxe.zip.HuffTools"]=haxe_zip_HuffTools;haxe_zip_HuffTools.__name__="haxe.zip.HuffTools";haxe_zip_HuffTools.prototype={treeDepth:function(t){switch(t._hx_index){case 0:return 0;case 1:var da=this.treeDepth(t.left);var db=this.treeDepth(t.right);return 1+(da<db?da:db);case 2:throw new js__$Boot_HaxeError("assert")}},treeCompress:function(t){var d=this.treeDepth(t);if(d==0){return t}if(d==1){if(t._hx_index==1){return haxe_zip_Huffman.NeedBit(this.treeCompress(t.left),this.treeCompress(t.right))}else{throw new js__$Boot_HaxeError("assert")}}var size=1<<d;var table=[];var _g=0;while(_g<size){++_g;table.push(haxe_zip_Huffman.Found(-1))}this.treeWalk(table,0,0,d,t);return haxe_zip_Huffman.NeedBits(d,table)},treeWalk:function(table,p,cd,d,t){if(t._hx_index==1){if(d>0){this.treeWalk(table,p,cd+1,d-1,t.left);this.treeWalk(table,p|1<<cd,cd+1,d-1,t.right)}else{table[p]=this.treeCompress(t)}}else{table[p]=this.treeCompress(t)}},treeMake:function(bits,maxbits,v,len){if(len>maxbits){throw new js__$Boot_HaxeError("Invalid huffman")}var idx=v<<5|len;if(bits.h.hasOwnProperty(idx)){return haxe_zip_Huffman.Found(bits.h[idx])}v<<=1;++len;return haxe_zip_Huffman.NeedBit(this.treeMake(bits,maxbits,v,len),this.treeMake(bits,maxbits,v|1,len))},make:function(lengths,pos,nlengths,maxbits){if(nlengths==1){return haxe_zip_Huffman.NeedBit(haxe_zip_Huffman.Found(0),haxe_zip_Huffman.Found(0))}var counts=[];var tmp=[];if(maxbits>32){throw new js__$Boot_HaxeError("Invalid huffman")}var _g=0;while(_g<maxbits){++_g;counts.push(0);tmp.push(0)}var _g2=0;while(_g2<nlengths){var p=lengths[_g2+++pos];if(p>=maxbits){throw new js__$Boot_HaxeError("Invalid huffman")}counts[p]++}var code=0;var _g4=1;var _g5=maxbits-1;while(_g4<_g5){var i=_g4++;code=code+counts[i]<<1;tmp[i]=code}var bits=new haxe_ds_IntMap;var _g6=0;while(_g6<nlengths){var i1=_g6++;var l=lengths[i1+pos];if(l!=0){var n=tmp[l-1];tmp[l-1]=n+1;bits.h[n<<5|l]=i1}}return this.treeCompress(haxe_zip_Huffman.NeedBit(this.treeMake(bits,maxbits,0,1),this.treeMake(bits,maxbits,1,1)))},__class__:haxe_zip_HuffTools};var haxe_zip__$InflateImpl_Window=function(hasCrc){this.buffer=new haxe_io_Bytes(new ArrayBuffer(65536));this.pos=0;if(hasCrc){this.crc=new haxe_crypto_Adler32}};$hxClasses["haxe.zip._InflateImpl.Window"]=haxe_zip__$InflateImpl_Window;haxe_zip__$InflateImpl_Window.__name__="haxe.zip._InflateImpl.Window";haxe_zip__$InflateImpl_Window.prototype={buffer:null,pos:null,crc:null,slide:function(){if(this.crc!=null){this.crc.update(this.buffer,0,32768)}var b=new haxe_io_Bytes(new ArrayBuffer(65536));this.pos-=32768;b.blit(0,this.buffer,32768,this.pos);this.buffer=b},addBytes:function(b,p,len){if(this.pos+len>65536){this.slide()}this.buffer.blit(this.pos,b,p,len);this.pos+=len},addByte:function(c){if(this.pos==65536){this.slide()}this.buffer.b[this.pos]=c&255;this.pos++},getLastChar:function(){return this.buffer.b[this.pos-1]},available:function(){return this.pos},checksum:function(){if(this.crc!=null){this.crc.update(this.buffer,0,this.pos)}return this.crc},__class__:haxe_zip__$InflateImpl_Window};var haxe_zip__$InflateImpl_State=$hxEnums["haxe.zip._InflateImpl.State"]={__ename__:"haxe.zip._InflateImpl.State",__constructs__:["Head","Block","CData","Flat","Crc","Dist","DistOne","Done"],Head:{_hx_index:0,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},Block:{_hx_index:1,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},CData:{_hx_index:2,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},Flat:{_hx_index:3,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},Crc:{_hx_index:4,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},Dist:{_hx_index:5,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},DistOne:{_hx_index:6,__enum__:"haxe.zip._InflateImpl.State",toString:$estr},Done:{_hx_index:7,__enum__:"haxe.zip._InflateImpl.State",toString:$estr}};var haxe_zip_InflateImpl=function(i,header,crc){if(crc==null){crc=true}if(header==null){header=true}this.isFinal=false;this.htools=new haxe_zip_HuffTools;this.huffman=this.buildFixedHuffman();this.huffdist=null;this.len=0;this.dist=0;this.state=header?haxe_zip__$InflateImpl_State.Head:haxe_zip__$InflateImpl_State.Block;this.input=i;this.bits=0;this.nbits=0;this.needed=0;this.output=null;this.outpos=0;this.lengths=[];this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.lengths.push(-1);this.window=new haxe_zip__$InflateImpl_Window(crc)};$hxClasses["haxe.zip.InflateImpl"]=haxe_zip_InflateImpl;haxe_zip_InflateImpl.__name__="haxe.zip.InflateImpl";haxe_zip_InflateImpl.prototype={nbits:null,bits:null,state:null,isFinal:null,huffman:null,huffdist:null,htools:null,len:null,dist:null,needed:null,output:null,outpos:null,input:null,lengths:null,window:null,buildFixedHuffman:function(){if(haxe_zip_InflateImpl.FIXED_HUFFMAN!=null){return haxe_zip_InflateImpl.FIXED_HUFFMAN}var a=[];var _g=0;while(_g<288){var n=_g++;a.push(n<=143?8:n<=255?9:n<=279?7:8)}haxe_zip_InflateImpl.FIXED_HUFFMAN=this.htools.make(a,0,288,10);return haxe_zip_InflateImpl.FIXED_HUFFMAN},readBytes:function(b,pos,len){this.needed=len;this.outpos=pos;this.output=b;if(len>0){while(this.inflateLoop()){}}return len-this.needed},getBits:function(n){while(this.nbits<n){this.bits|=this.input.readByte()<<this.nbits;this.nbits+=8}var b=this.bits&(1<<n)-1;this.nbits-=n;this.bits>>=n;return b},getBit:function(){if(this.nbits==0){this.nbits=8;this.bits=this.input.readByte()}var b=(this.bits&1)==1;this.nbits--;this.bits>>=1;return b},getRevBits:function(n){if(n==0){return 0}else if(this.getBit()){return 1<<n-1|this.getRevBits(n-1)}else{return this.getRevBits(n-1)}},resetBits:function(){this.bits=0;this.nbits=0},addBytes:function(b,p,len){this.window.addBytes(b,p,len);this.output.blit(this.outpos,b,p,len);this.needed-=len;this.outpos+=len},addByte:function(b){this.window.addByte(b);this.output.b[this.outpos]=b&255;this.needed--;this.outpos++},addDistOne:function(n){var c=this.window.getLastChar();var _g=0;while(_g<n){++_g;this.addByte(c)}},addDist:function(d,len){this.addBytes(this.window.buffer,this.window.pos-d,len)},applyHuffman:function(h){switch(h._hx_index){case 0:return h.i;case 1:return this.applyHuffman(this.getBit()?h.right:h.left);case 2:return this.applyHuffman(h.table[this.getBits(h.n)])}},inflateLengths:function(a,max){var i=0;var prev=0;while(i<max){var n=this.applyHuffman(this.huffman);switch(n){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:prev=n;a[i]=n;++i;break;case 16:var end=i+3+this.getBits(2);if(end>max){throw new js__$Boot_HaxeError("Invalid data")}while(i<end){a[i]=prev;++i}break;case 17:i+=3+this.getBits(3);if(i>max){throw new js__$Boot_HaxeError("Invalid data")}break;case 18:i+=11+this.getBits(7);if(i>max){throw new js__$Boot_HaxeError("Invalid data")}break;default:throw new js__$Boot_HaxeError("Invalid data")}}},inflateLoop:function(){switch(this.state._hx_index){case 0:var cmf=this.input.readByte();if((cmf&15)!=8){throw new js__$Boot_HaxeError("Invalid data")}var flg=this.input.readByte();if(((cmf<<8)+flg)%31!=0){throw new js__$Boot_HaxeError("Invalid data")}if((flg&32)!=0){throw new js__$Boot_HaxeError("Unsupported dictionary")}this.state=haxe_zip__$InflateImpl_State.Block;return true;case 1:this.isFinal=this.getBit();switch(this.getBits(2)){case 0:this.len=this.input.readUInt16();if(this.input.readUInt16()!=65535-this.len){throw new js__$Boot_HaxeError("Invalid data")}this.state=haxe_zip__$InflateImpl_State.Flat;var r=this.inflateLoop();this.resetBits();return r;case 1:this.huffman=this.buildFixedHuffman();this.huffdist=null;this.state=haxe_zip__$InflateImpl_State.CData;return true;case 2:var hlit=this.getBits(5)+257;var hdist=this.getBits(5)+1;var hclen=this.getBits(4)+4;var _g=0;while(_g<hclen)this.lengths[haxe_zip_InflateImpl.CODE_LENGTHS_POS[_g++]]=this.getBits(3);var _g2=hclen;while(_g2<19)this.lengths[haxe_zip_InflateImpl.CODE_LENGTHS_POS[_g2++]]=0;this.huffman=this.htools.make(this.lengths,0,19,8);var lengths=[];var _g4=0;var _g5=hlit+hdist;while(_g4<_g5){++_g4;lengths.push(0)}this.inflateLengths(lengths,hlit+hdist);this.huffdist=this.htools.make(lengths,hlit,hdist,16);this.huffman=this.htools.make(lengths,0,hlit,16);this.state=haxe_zip__$InflateImpl_State.CData;return true;default:throw new js__$Boot_HaxeError("Invalid data")}break;case 2:var n=this.applyHuffman(this.huffman);if(n<256){this.addByte(n);return this.needed>0}else if(n==256){this.state=this.isFinal?haxe_zip__$InflateImpl_State.Crc:haxe_zip__$InflateImpl_State.Block;return true}else{n-=257;var extra_bits=haxe_zip_InflateImpl.LEN_EXTRA_BITS_TBL[n];if(extra_bits==-1){throw new js__$Boot_HaxeError("Invalid data")}this.len=haxe_zip_InflateImpl.LEN_BASE_VAL_TBL[n]+this.getBits(extra_bits);var dist_code=this.huffdist==null?this.getRevBits(5):this.applyHuffman(this.huffdist);extra_bits=haxe_zip_InflateImpl.DIST_EXTRA_BITS_TBL[dist_code];if(extra_bits==-1){throw new js__$Boot_HaxeError("Invalid data")}this.dist=haxe_zip_InflateImpl.DIST_BASE_VAL_TBL[dist_code]+this.getBits(extra_bits);if(this.dist>this.window.available()){throw new js__$Boot_HaxeError("Invalid data")}this.state=this.dist==1?haxe_zip__$InflateImpl_State.DistOne:haxe_zip__$InflateImpl_State.Dist;return true}break;case 3:var rlen=this.len<this.needed?this.len:this.needed;var bytes=this.input.read(rlen);this.len-=rlen;this.addBytes(bytes,0,rlen);if(this.len==0){this.state=this.isFinal?haxe_zip__$InflateImpl_State.Crc:haxe_zip__$InflateImpl_State.Block}return this.needed>0;case 4:var calc=this.window.checksum();if(calc==null){this.state=haxe_zip__$InflateImpl_State.Done;return true}if(!calc.equals(haxe_crypto_Adler32.read(this.input))){throw new js__$Boot_HaxeError("Invalid CRC")}this.state=haxe_zip__$InflateImpl_State.Done;return true;case 5:while(this.len>0&&this.needed>0){var rdist=this.len<this.dist?this.len:this.dist;var rlen1=this.needed<rdist?this.needed:rdist;this.addDist(this.dist,rlen1);this.len-=rlen1}if(this.len==0){this.state=haxe_zip__$InflateImpl_State.CData}return this.needed>0;case 6:var rlen2=this.len<this.needed?this.len:this.needed;this.addDistOne(rlen2);this.len-=rlen2;if(this.len==0){this.state=haxe_zip__$InflateImpl_State.CData}return this.needed>0;case 7:return false}},__class__:haxe_zip_InflateImpl};var haxe_zip_Reader=function(i){this.i=i};$hxClasses["haxe.zip.Reader"]=haxe_zip_Reader;haxe_zip_Reader.__name__="haxe.zip.Reader";haxe_zip_Reader.readZip=function(i){return new haxe_zip_Reader(i).read()};haxe_zip_Reader.prototype={i:null,readZipDate:function(){var t=this.i.readUInt16();var d=this.i.readUInt16();return new Date((d>>9)+1980,(d>>5&15)-1,d&31,t>>11&31,t>>5&63,(t&31)<<1)},readExtraFields:function(length){var fields=new haxe_ds_List;while(length>0){if(length<4){throw new js__$Boot_HaxeError("Invalid extra fields data")}var tag=this.i.readUInt16();var len=this.i.readUInt16();if(length<len){throw new js__$Boot_HaxeError("Invalid extra fields data")}if(tag==28789){var version=this.i.readByte();if(version!=1){var data=new haxe_io_BytesBuffer;data.addByte(version);data.add(this.i.read(len-1));fields.add(haxe_zip_ExtraField.FUnknown(tag,data.getBytes()))}else{var crc=this.i.readInt32();fields.add(haxe_zip_ExtraField.FInfoZipUnicodePath(this.i.read(len-5).toString(),crc))}}else{fields.add(haxe_zip_ExtraField.FUnknown(tag,this.i.read(len)))}length-=4+len}return fields},readEntryHeader:function(){var i=this.i;var h=i.readInt32();if(h==33639248||h==101010256){return null}if(h!=67324752){throw new js__$Boot_HaxeError("Invalid Zip Data")}i.readUInt16();var flags=i.readUInt16();if((flags&63473)!=0){throw new js__$Boot_HaxeError("Unsupported flags "+flags)}var compression=i.readUInt16();var compressed=compression!=0;if(compressed&&compression!=8){throw new js__$Boot_HaxeError("Unsupported compression "+compression)}var mtime=this.readZipDate();var crc32=i.readInt32();var csize=i.readInt32();var usize=i.readInt32();var fnamelen=i.readInt16();var elen=i.readInt16();var fname=i.readString(fnamelen);var fields=this.readExtraFields(elen);if((flags&2048)!=0){fields.push(haxe_zip_ExtraField.FUtf8)}if((flags&8)!=0){crc32=null}return{fileName:fname,fileSize:usize,fileTime:mtime,compressed:compressed,dataSize:csize,data:null,crc32:crc32,extraFields:fields}},read:function(){var l=new haxe_ds_List;var tmp=null;while(true){var e=this.readEntryHeader();if(e==null){break}if(e.crc32==null){if(e.compressed){if(tmp==null){tmp=new haxe_io_Bytes(new ArrayBuffer(65536))}var out=new haxe_io_BytesBuffer;var z=new haxe_zip_InflateImpl(this.i,false,false);while(true){var n=z.readBytes(tmp,0,65536);out.addBytes(tmp,0,n);if(n<65536){break}}e.data=out.getBytes()}else{e.data=this.i.read(e.dataSize)}e.crc32=this.i.readInt32();if(e.crc32==134695760){e.crc32=this.i.readInt32()}e.dataSize=this.i.readInt32();e.fileSize=this.i.readInt32();e.dataSize=e.fileSize;e.compressed=false}else{e.data=this.i.read(e.dataSize)}l.add(e)}return l},__class__:haxe_zip_Reader};var js__$Boot_HaxeError=function(val){Error.call(this);this.val=val;if(Error.captureStackTrace){Error.captureStackTrace(this,js__$Boot_HaxeError)}};$hxClasses["js._Boot.HaxeError"]=js__$Boot_HaxeError;js__$Boot_HaxeError.__name__="js._Boot.HaxeError";js__$Boot_HaxeError.wrap=function(val){if(val instanceof Error){return val}else{return new js__$Boot_HaxeError(val)}};js__$Boot_HaxeError.__super__=Error;js__$Boot_HaxeError.prototype=$extend(Error.prototype,{val:null,__class__:js__$Boot_HaxeError});var js_Boot=function(){};$hxClasses["js.Boot"]=js_Boot;js_Boot.__name__="js.Boot";js_Boot.getClass=function(o){if(o==null){return null}else if(o instanceof Array){return Array}else{var cl=o.__class__;if(cl!=null){return cl}var name=js_Boot.__nativeClassName(o);if(name!=null){return js_Boot.__resolveNativeClass(name)}return null}};js_Boot.__string_rec=function(o,s){if(o==null){return"null"}if(s.length>=5){return"<...>"}var t=typeof o;if(t=="function"&&(o.__name__||o.__ename__)){t="object"}switch(t){case"function":return"<function>";case"object":if(o.__enum__){var e=$hxEnums[o.__enum__];var n=e.__constructs__[o._hx_index];var con=e[n];if(con.__params__){s=s+"\t";return n+"("+function($this){var $r;var _g=[];{var _g1=0;var _g2=con.__params__;while(true){if(!(_g1<_g2.length)){break}var p=_g2[_g1];_g1=_g1+1;_g.push(js_Boot.__string_rec(o[p],s))}}$r=_g;return $r}(this).join(",")+")"}else{return n}}if(o instanceof Array){var str="[";s+="\t";var _g3=0;var _g11=o.length;while(_g3<_g11){var i=_g3++;str+=(i>0?",":"")+js_Boot.__string_rec(o[i],s)}str+="]";return str}var tostr;try{tostr=o.toString}catch(e1){haxe_CallStack.lastException=e1;var e2=e1 instanceof js__$Boot_HaxeError?e1.val:e1;return"???"}if(tostr!=null&&tostr!=Object.toString&&typeof tostr=="function"){var s2=o.toString();if(s2!="[object Object]"){return s2}}var str1="{\n";s+="\t";var hasp=o.hasOwnProperty!=null;var k=null;for(k in o){if(hasp&&!o.hasOwnProperty(k)){continue}if(k=="prototype"||k=="__class__"||k=="__super__"||k=="__interfaces__"||k=="__properties__"){continue}if(str1.length!=2){str1+=", \n"}str1+=s+k+" : "+js_Boot.__string_rec(o[k],s)}s=s.substring(1);str1+="\n"+s+"}";return str1;case"string":return o;default:return String(o)}};js_Boot.__interfLoop=function(cc,cl){if(cc==null){return false}if(cc==cl){return true}if(Object.prototype.hasOwnProperty.call(cc,"__interfaces__")){var intf=cc.__interfaces__;var _g=0;var _g1=intf.length;while(_g<_g1){var i=intf[_g++];if(i==cl||js_Boot.__interfLoop(i,cl)){return true}}}return js_Boot.__interfLoop(cc.__super__,cl)};js_Boot.__instanceof=function(o,cl){if(cl==null){return false}switch(cl){case Array:return o instanceof Array;case Bool:return typeof o=="boolean";case Dynamic:return o!=null;case Float:return typeof o=="number";case Int:if(typeof o=="number"){return(o|0)===o}else{return false}break;case String:return typeof o=="string";default:if(o!=null){if(typeof cl=="function"){if(js_Boot.__downcastCheck(o,cl)){return true}}else if(typeof cl=="object"&&js_Boot.__isNativeObj(cl)){if(o instanceof cl){return true}}}else{return false}if(cl==Class?o.__name__!=null:false){return true}if(cl==Enum?o.__ename__!=null:false){return true}return o.__enum__!=null?$hxEnums[o.__enum__]==cl:false}};js_Boot.__downcastCheck=function(o,cl){if(!(o instanceof cl)){if(cl.__isInterface__){return js_Boot.__interfLoop(js_Boot.getClass(o),cl)}else{return false}}else{return true}};js_Boot.__implements=function(o,iface){return js_Boot.__interfLoop(js_Boot.getClass(o),iface)};js_Boot.__cast=function(o,t){if(o==null||js_Boot.__instanceof(o,t)){return o}else{throw new js__$Boot_HaxeError("Cannot cast "+Std.string(o)+" to "+Std.string(t))}};js_Boot.__nativeClassName=function(o){var name=js_Boot.__toStr.call(o).slice(8,-1);if(name=="Object"||name=="Function"||name=="Math"||name=="JSON"){return null}return name};js_Boot.__isNativeObj=function(o){return js_Boot.__nativeClassName(o)!=null};js_Boot.__resolveNativeClass=function(name){return $global[name]};var js_Browser=function(){};$hxClasses["js.Browser"]=js_Browser;js_Browser.__name__="js.Browser";js_Browser.getLocalStorage=function(){try{var s=window.localStorage;s.getItem("");if(s.length==0){var key="_hx_"+Math.random();s.setItem(key,key);s.removeItem(key)}return s}catch(e){haxe_CallStack.lastException=e;return null}};var lime__$internal_backend_html5_GameDeviceData=function(){this.connected=true;this.buttons=[];this.axes=[]};$hxClasses["lime._internal.backend.html5.GameDeviceData"]=lime__$internal_backend_html5_GameDeviceData;lime__$internal_backend_html5_GameDeviceData.__name__="lime._internal.backend.html5.GameDeviceData";lime__$internal_backend_html5_GameDeviceData.prototype={connected:null,id:null,isGamepad:null,buttons:null,axes:null,__class__:lime__$internal_backend_html5_GameDeviceData};var lime__$internal_backend_html5_HTML5AudioSource=function(parent){this.parent=parent;this.id=-1;this.gain=1;this.position=new lime_math_Vector4};$hxClasses["lime._internal.backend.html5.HTML5AudioSource"]=lime__$internal_backend_html5_HTML5AudioSource;lime__$internal_backend_html5_HTML5AudioSource.__name__="lime._internal.backend.html5.HTML5AudioSource";lime__$internal_backend_html5_HTML5AudioSource.prototype={completed:null,gain:null,id:null,length:null,loops:null,parent:null,playing:null,position:null,play:function(){if(this.playing||this.parent.buffer==null||this.parent.buffer.__srcHowl==null){return}this.playing=true;var time=this.getCurrentTime();this.completed=false;var cacheVolume=this.parent.buffer.__srcHowl._volume;this.parent.buffer.__srcHowl._volume=this.parent.get_gain();this.id=this.parent.buffer.__srcHowl.play();this.parent.buffer.__srcHowl._volume=cacheVolume;this.setPosition(this.parent.get_position());this.parent.buffer.__srcHowl.on("end",$bind(this,this.howl_onEnd),this.id);this.setCurrentTime(time)},stop:function(){this.playing=false;if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null){this.parent.buffer.__srcHowl.stop(this.id)}},howl_onEnd:function(){this.playing=false;if(this.loops>0){this.loops--;this.stop();this.play();return}else if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null){this.parent.buffer.__srcHowl.stop(this.id)}this.completed=true;this.parent.onComplete.dispatch()},getCurrentTime:function(){if(this.id==-1){return 0}if(this.completed){return this.getLength()}else if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null){var time=(this.parent.buffer.__srcHowl.seek(this.id)*1e3|0)-this.parent.offset;if(time<0){return 0}return time}return 0},setCurrentTime:function(value){if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null){var pos=(value+this.parent.offset)/1e3;if(pos<0){pos=0}this.parent.buffer.__srcHowl.seek(pos,this.id)}return value},getGain:function(){return this.gain},setGain:function(value){if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null&&this.id!=-1){this.parent.buffer.__srcHowl.volume(value,this.id)}return this.gain=value},getLength:function(){if(this.length!=0){return this.length}if(this.parent.buffer!=null&&this.parent.buffer.__srcHowl!=null){return this.parent.buffer.__srcHowl.duration()*1e3|0}return 0},setLength:function(value){return this.length=value},setLoops:function(value){return this.loops=value},getPosition:function(){return this.position},setPosition:function(value){this.position.x=value.x;this.position.y=value.y;this.position.z=value.z;this.position.w=value.w;if(this.parent.buffer.__srcHowl!=null&&this.parent.buffer.__srcHowl.pos!=null){this.parent.buffer.__srcHowl.pos(this.position.x,this.position.y,this.position.z,this.id)}return this.position},__class__:lime__$internal_backend_html5_HTML5AudioSource};var lime__$internal_backend_html5_HTML5HTTPRequest=function(){this.validStatus0=new EReg("Tizen","gi").match(window.navigator.userAgent)};$hxClasses["lime._internal.backend.html5.HTML5HTTPRequest"]=lime__$internal_backend_html5_HTML5HTTPRequest;lime__$internal_backend_html5_HTML5HTTPRequest.__name__="lime._internal.backend.html5.HTML5HTTPRequest";lime__$internal_backend_html5_HTML5HTTPRequest.loadImage=function(uri){var promise=new lime_app_Promise;if(lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests<lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests++;lime__$internal_backend_html5_HTML5HTTPRequest.__loadImage(uri,promise,0)}else{lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.add({instance:null,uri:uri,promise:promise,type:"IMAGE",options:0})}return promise.future};lime__$internal_backend_html5_HTML5HTTPRequest.loadImageFromBytes=function(bytes,type){var uri=URL.createObjectURL(new Blob([bytes.b.bufferValue],{type:type}));if(uri!=null){var promise=new lime_app_Promise;if(lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests<lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests++;lime__$internal_backend_html5_HTML5HTTPRequest.__loadImage(uri,promise,1)}else{lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.add({instance:null,uri:uri,promise:promise,type:"IMAGE",options:1})}return promise.future}else{return lime__$internal_backend_html5_HTML5HTTPRequest.loadImage("data:"+type+";base64,"+lime__$internal_format_Base64.encode(bytes))}};lime__$internal_backend_html5_HTML5HTTPRequest.processQueue=function(){if(lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests<lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit&&lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.length>0){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests++;var queueItem=lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.pop();switch(queueItem.type){case"BINARY":queueItem.instance.__loadData(queueItem.uri,queueItem.promise);break;case"IMAGE":lime__$internal_backend_html5_HTML5HTTPRequest.__loadImage(queueItem.uri,queueItem.promise,queueItem.options);break;case"TEXT":queueItem.instance.__loadText(queueItem.uri,queueItem.promise);break;default:lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--}}};lime__$internal_backend_html5_HTML5HTTPRequest.__fixHostname=function(hostname){if(hostname==null){return""}else{return hostname}};lime__$internal_backend_html5_HTML5HTTPRequest.__fixPort=function(port,protocol){if(port==null||port==""){switch(protocol){case"ftp:":return"21";case"gopher:":return"70";case"http:":return"80";case"https:":return"443";case"ws:":return"80";case"wss:":return"443";default:return""}}return port};lime__$internal_backend_html5_HTML5HTTPRequest.__fixProtocol=function(protocol){if(protocol==null||protocol==""){return"http:"}else{return protocol}};lime__$internal_backend_html5_HTML5HTTPRequest.__isInMemoryURI=function(uri){if(!StringTools.startsWith(uri,"data:")){return StringTools.startsWith(uri,"blob:")}else{return true}};lime__$internal_backend_html5_HTML5HTTPRequest.__isSameOrigin=function(path){if(path==null||path==""){return true}if(lime__$internal_backend_html5_HTML5HTTPRequest.__isInMemoryURI(path)){return true}if(lime__$internal_backend_html5_HTML5HTTPRequest.originElement==null){lime__$internal_backend_html5_HTML5HTTPRequest.originElement=window.document.createElement("a");lime__$internal_backend_html5_HTML5HTTPRequest.originHostname=lime__$internal_backend_html5_HTML5HTTPRequest.__fixHostname(window.location.hostname);lime__$internal_backend_html5_HTML5HTTPRequest.originProtocol=lime__$internal_backend_html5_HTML5HTTPRequest.__fixProtocol(window.location.protocol);lime__$internal_backend_html5_HTML5HTTPRequest.originPort=lime__$internal_backend_html5_HTML5HTTPRequest.__fixPort(window.location.port,lime__$internal_backend_html5_HTML5HTTPRequest.originProtocol)}var a=lime__$internal_backend_html5_HTML5HTTPRequest.originElement;a.href=path;if(a.hostname==""){a.href=a.href}var hostname=lime__$internal_backend_html5_HTML5HTTPRequest.__fixHostname(a.hostname);var protocol=lime__$internal_backend_html5_HTML5HTTPRequest.__fixProtocol(a.protocol);var port=lime__$internal_backend_html5_HTML5HTTPRequest.__fixPort(a.port,protocol);if(protocol!="file:"&&(hostname==""||hostname==lime__$internal_backend_html5_HTML5HTTPRequest.originHostname)){return port==""||port==lime__$internal_backend_html5_HTML5HTTPRequest.originPort}else{return false}};lime__$internal_backend_html5_HTML5HTTPRequest.__loadImage=function(uri,promise,options){var image=new Image;if(!lime__$internal_backend_html5_HTML5HTTPRequest.__isSameOrigin(uri)){image.crossOrigin="Anonymous"}if(lime__$internal_backend_html5_HTML5HTTPRequest.supportsImageProgress==null){lime__$internal_backend_html5_HTML5HTTPRequest.supportsImageProgress="onprogress"in image}if(lime__$internal_backend_html5_HTML5HTTPRequest.supportsImageProgress||lime__$internal_backend_html5_HTML5HTTPRequest.__isInMemoryURI(uri)){image.addEventListener("load",function(event){lime__$internal_backend_html5_HTML5HTTPRequest.__revokeBlobURI(uri,options);var buffer=new lime_graphics_ImageBuffer(null,image.width,image.height);buffer.__srcImage=image;lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--;lime__$internal_backend_html5_HTML5HTTPRequest.processQueue();promise.complete(new lime_graphics_Image(buffer))},false);image.addEventListener("progress",function(event1){promise.progress(event1.loaded,event1.total)},false);image.addEventListener("error",function(event2){lime__$internal_backend_html5_HTML5HTTPRequest.__revokeBlobURI(uri,options);lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--;lime__$internal_backend_html5_HTML5HTTPRequest.processQueue();promise.error(event2.detail)},false);image.src=uri}else{var request=new XMLHttpRequest;request.onload=function(_){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--;lime__$internal_backend_html5_HTML5HTTPRequest.processQueue();var img=new lime_graphics_Image;img.__fromBytes(haxe_io_Bytes.ofData(request.response),function(img1){promise.complete(img1)})};request.onerror=function(event3){promise.error(event3.message)};request.onprogress=function(event4){if(event4.lengthComputable){promise.progress(event4.loaded,event4.total)}};request.open("GET",uri,true);request.responseType="arraybuffer";request.overrideMimeType("text/plain; charset=x-user-defined");request.send(null)}};lime__$internal_backend_html5_HTML5HTTPRequest.__revokeBlobURI=function(uri,options){if((options&1)!=0){URL.revokeObjectURL(uri)}};lime__$internal_backend_html5_HTML5HTTPRequest.prototype={binary:null,parent:null,request:null,validStatus0:null,init:function(parent){this.parent=parent},load:function(uri,progress,readyStateChange){this.request=new XMLHttpRequest;if(this.parent.method=="POST"){this.request.upload.addEventListener("progress",progress,false)}else{this.request.addEventListener("progress",progress,false)}this.request.onreadystatechange=readyStateChange;var query="";if(this.parent.data==null){var key=this.parent.formData.keys();while(key.hasNext()){var key1=key.next();if(query.length>0){query+="&"}var _this=this.parent.formData;var value=__map_reserved[key1]!=null?_this.getReserved(key1):_this.h[key1];if(key1.indexOf("[]")>-1&&value instanceof Array){var _g=[];var x=$getIterator(value);while(x.hasNext()){var x1=x.next();_g.push(encodeURIComponent(x1))}var arrayValue=_g.join("&amp;"+key1+"=");query+=encodeURIComponent(key1)+"="+arrayValue}else{var query1=encodeURIComponent(key1)+"=";var s=Std.string(value);query+=query1+encodeURIComponent(s)}}if(this.parent.method=="GET"&&query!=""){if(uri.indexOf("?")>-1){uri+="&"+query}else{uri+="?"+query}query=""}}this.request.open(Std.string(this.parent.method),uri,true);if(this.parent.timeout>0){this.request.timeout=this.parent.timeout}if(this.binary){this.request.responseType="arraybuffer"}var contentType=null;var _g1=0;var _g11=this.parent.headers;while(_g1<_g11.length){var header=_g11[_g1];++_g1;if(header.name=="Content-Type"){contentType=header.value}else{this.request.setRequestHeader(header.name,header.value)}}if(this.parent.contentType!=null){contentType=this.parent.contentType}if(contentType==null){if(this.parent.data!=null){contentType="application/octet-stream"}else if(query!=""){contentType="application/x-www-form-urlencoded"}}if(contentType!=null){this.request.setRequestHeader("Content-Type",contentType)}if(this.parent.withCredentials){this.request.withCredentials=true}if(this.parent.data!=null){this.request.send(this.parent.data.b.bufferValue)}else{this.request.send(query)}},loadData:function(uri){var promise=new lime_app_Promise;if(lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests<lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests++;this.__loadData(uri,promise)}else{lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.add({instance:this,uri:uri,promise:promise,type:"BINARY",options:0})}return promise.future},loadText:function(uri){var promise=new lime_app_Promise;if(lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests<lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit){lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests++;this.__loadText(uri,promise)}else{lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue.add({instance:this,uri:uri,promise:promise,type:"TEXT",options:0})}return promise.future},processResponse:function(){if(this.parent.enableResponseHeaders){this.parent.responseHeaders=[];var name;var value;var _g=0;var _g1=this.request.getAllResponseHeaders().split("\n");while(_g<_g1.length){var line=_g1[_g];++_g;name=StringTools.trim(HxOverrides.substr(line,0,line.indexOf(":")));value=StringTools.trim(HxOverrides.substr(line,line.indexOf(":")+1,null));if(name!=""){this.parent.responseHeaders.push(new lime_net_HTTPRequestHeader(name,value))}}}this.parent.responseStatus=this.request.status},__loadData:function(uri,promise){var _gthis=this;var progress=function(event){promise.progress(event.loaded,event.total)};var readyStateChange=function(event1){if(_gthis.request.readyState!=4){return}if(_gthis.request.status!=null&&(_gthis.request.status>=200&&_gthis.request.status<400||_gthis.validStatus0&&_gthis.request.status==0)){var bytes=null;if(_gthis.request.responseType==""){if(_gthis.request.responseText!=null){bytes=haxe_io_Bytes.ofString(_gthis.request.responseText)}}else if(_gthis.request.response!=null){bytes=haxe_io_Bytes.ofData(_gthis.request.response)}_gthis.processResponse();promise.complete(bytes)}else{_gthis.processResponse();promise.error(_gthis.request.status)}_gthis.request=null;lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--;lime__$internal_backend_html5_HTML5HTTPRequest.processQueue()};this.binary=true;this.load(uri,progress,readyStateChange)},__loadText:function(uri,promise){var _gthis=this;var progress=function(event){promise.progress(event.loaded,event.total)};var readyStateChange=function(event1){if(_gthis.request.readyState!=4){return}if(_gthis.request.status!=null&&(_gthis.request.status>=200&&_gthis.request.status<=400||_gthis.validStatus0&&_gthis.request.status==0)){_gthis.processResponse();promise.complete(_gthis.request.responseText)}else{_gthis.processResponse();promise.error(_gthis.request.status)}_gthis.request=null;lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests--;lime__$internal_backend_html5_HTML5HTTPRequest.processQueue()};this.binary=false;this.load(uri,progress,readyStateChange)},__class__:lime__$internal_backend_html5_HTML5HTTPRequest};var lime__$internal_backend_html5_HTML5Window=function(parent){this.unusedTouchesPool=new haxe_ds_List;this.scale=1;this.currentTouches=new haxe_ds_IntMap;this.parent=parent;this.cursor=lime_ui_MouseCursor.DEFAULT;this.cacheMouseX=0;this.cacheMouseY=0;var attributes=parent.__attributes;if(!Object.prototype.hasOwnProperty.call(attributes,"context")){attributes.context={}}this.renderType=attributes.context.type;if(Object.prototype.hasOwnProperty.call(attributes,"element")){parent.element=attributes.element}var element=parent.element;if(Object.prototype.hasOwnProperty.call(attributes,"allowHighDPI")&&attributes.allowHighDPI&&this.renderType!="dom"){this.scale=window.devicePixelRatio}parent.__scale=this.scale;this.setWidth=Object.prototype.hasOwnProperty.call(attributes,"width")?attributes.width:0;this.setHeight=Object.prototype.hasOwnProperty.call(attributes,"height")?attributes.height:0;parent.__width=this.setWidth;parent.__height=this.setHeight;parent.id=lime__$internal_backend_html5_HTML5Window.windowID++;if(element instanceof HTMLCanvasElement){this.canvas=element}else if(this.renderType=="dom"){this.div=window.document.createElement("div")}else{this.canvas=window.document.createElement("canvas")}if(this.canvas!=null){var style=this.canvas.style;style.setProperty("-webkit-transform","translateZ(0)",null);style.setProperty("transform","translateZ(0)",null)}else if(this.div!=null){var style1=this.div.style;style1.setProperty("-webkit-transform","translate3D(0,0,0)",null);style1.setProperty("transform","translate3D(0,0,0)",null);style1.position="relative";style1.overflow="hidden";style1.setProperty("-webkit-user-select","none",null);style1.setProperty("-moz-user-select","none",null);style1.setProperty("-ms-user-select","none",null);style1.setProperty("-o-user-select","none",null)}if(parent.__width==0&&parent.__height==0){if(element!=null){parent.__width=element.clientWidth;parent.__height=element.clientHeight}else{parent.__width=window.innerWidth;parent.__height=window.innerHeight}this.cacheElementWidth=parent.__width;this.cacheElementHeight=parent.__height;this.resizeElement=true}if(this.canvas!=null){this.canvas.width=Math.round(parent.__width*this.scale);this.canvas.height=Math.round(parent.__height*this.scale);this.canvas.style.width=parent.__width+"px";this.canvas.style.height=parent.__height+"px"}else{this.div.style.width=parent.__width+"px";this.div.style.height=parent.__height+"px"}if(Object.prototype.hasOwnProperty.call(attributes,"resizable")&&attributes.resizable||!Object.prototype.hasOwnProperty.call(attributes,"width")&&this.setWidth==0&&this.setHeight==0){parent.__resizable=true}this.updateSize();if(element!=null){if(this.canvas!=null){if(element!=this.canvas){element.appendChild(this.canvas)}}else{element.appendChild(this.div)}var events=["mousedown","mouseenter","mouseleave","mousemove","mouseup","wheel"];var _g=0;while(_g<events.length)element.addEventListener(events[_g++],$bind(this,this.handleMouseEvent),true);element.addEventListener("contextmenu",$bind(this,this.handleContextMenuEvent),true);element.addEventListener("dragstart",$bind(this,this.handleDragEvent),true);element.addEventListener("dragover",$bind(this,this.handleDragEvent),true);element.addEventListener("drop",$bind(this,this.handleDragEvent),true);element.addEventListener("touchstart",$bind(this,this.handleTouchEvent),true);element.addEventListener("touchmove",$bind(this,this.handleTouchEvent),true);element.addEventListener("touchend",$bind(this,this.handleTouchEvent),true);element.addEventListener("touchcancel",$bind(this,this.handleTouchEvent),true);element.addEventListener("gamepadconnected",$bind(this,this.handleGamepadEvent),true);element.addEventListener("gamepaddisconnected",$bind(this,this.handleGamepadEvent),true)}this.createContext();if(parent.context.type=="webgl"){this.canvas.addEventListener("webglcontextlost",$bind(this,this.handleContextEvent),false);this.canvas.addEventListener("webglcontextrestored",$bind(this,this.handleContextEvent),false)}};$hxClasses["lime._internal.backend.html5.HTML5Window"]=lime__$internal_backend_html5_HTML5Window;lime__$internal_backend_html5_HTML5Window.__name__="lime._internal.backend.html5.HTML5Window";lime__$internal_backend_html5_HTML5Window.prototype={canvas:null,div:null,cacheElementHeight:null,cacheElementWidth:null,cacheMouseX:null,cacheMouseY:null,cursor:null,currentTouches:null,parent:null,primaryTouch:null,renderType:null,resizeElement:null,scale:null,setHeight:null,setWidth:null,textInputEnabled:null,unusedTouchesPool:null,close:function(){this.parent.application.__removeWindow(this.parent)},createContext:function(){var context=new lime_graphics_RenderContext;var contextAttributes=this.parent.__attributes.context;context.window=this.parent;context.attributes=contextAttributes;if(this.div!=null){context.dom=this.div;context.type="dom";context.version=""}else if(this.canvas!=null){var webgl=null;var forceCanvas=this.renderType=="canvas";var forceWebGL=this.renderType=="opengl"||this.renderType=="opengles"||this.renderType=="webgl";var allowWebGL2=!Object.prototype.hasOwnProperty.call(contextAttributes,"version")||contextAttributes.version!="1";var isWebGL2=false;if(forceWebGL||!forceCanvas&&(!Object.prototype.hasOwnProperty.call(contextAttributes,"hardware")||contextAttributes.hardware)){var transparentBackground=Object.prototype.hasOwnProperty.call(contextAttributes,"background")&&contextAttributes.background==null;var colorDepth=Object.prototype.hasOwnProperty.call(contextAttributes,"colorDepth")?contextAttributes.colorDepth:16;var options=Object.prototype.hasOwnProperty.call(contextAttributes,"antialiasing")&&contextAttributes.antialiasing>0;var options1=Object.prototype.hasOwnProperty.call(contextAttributes,"depth")?contextAttributes.depth:true;var options2=Object.prototype.hasOwnProperty.call(contextAttributes,"stencil")&&contextAttributes.stencil;var options3={alpha:transparentBackground||colorDepth>16,antialias:options,depth:options1,premultipliedAlpha:true,stencil:options2,preserveDrawingBuffer:false};var glContextType=["webgl","experimental-webgl"];if(allowWebGL2){glContextType.unshift("webgl2")}var _g=0;while(_g<glContextType.length){var name=glContextType[_g];++_g;webgl=this.canvas.getContext(name,options3);if(webgl!=null&&name=="webgl2"){isWebGL2=true}if(webgl!=null){break}}}if(webgl==null){context.canvas2D=this.canvas.getContext("2d");context.type="canvas";context.version=""}else{context.webgl=lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.fromWebGL2RenderContext(webgl);if(isWebGL2){context.webgl2=webgl}if(lime_graphics_opengl_GL.context==null){lime_graphics_opengl_GL.context=webgl;lime_graphics_opengl_GL.type="webgl";lime_graphics_opengl_GL.version=isWebGL2?2:1}context.type="webgl";context.version=isWebGL2?"2":"1"}}this.parent.context=context},handleContextEvent:function(event){switch(event.type){case"webglcontextlost":if(event.cancelable){event.preventDefault()}this.parent.context=null;this.parent.onRenderContextLost.dispatch();break;case"webglcontextrestored":this.createContext();this.parent.onRenderContextRestored.dispatch(this.parent.context);break;default:}},handleContextMenuEvent:function(event){if((this.parent.onMouseUp.canceled||this.parent.onMouseDown.canceled)&&event.cancelable){event.preventDefault()}},handleCutOrCopyEvent:function(event){event.clipboardData.setData("text/plain",lime_system_Clipboard.get_text());if(event.cancelable){event.preventDefault()}},handleDragEvent:function(event){switch(event.type){case"dragover":event.preventDefault();return false;case"dragstart":if(js_Boot.__cast(event.target,HTMLElement).nodeName.toLowerCase()=="img"&&event.cancelable){event.preventDefault();return false}break;case"drop":if(event.dataTransfer!=null&&event.dataTransfer.files.length>0){this.parent.onDropFile.dispatch(event.dataTransfer.files);event.preventDefault();return false}break}return true},handleFocusEvent:function(event){var _gthis=this;if(this.textInputEnabled){if(event.relatedTarget==null||this.isDescendent(event.relatedTarget)){haxe_Timer.delay(function(){if(_gthis.textInputEnabled){lime__$internal_backend_html5_HTML5Window.textInput.focus()}},20)}}},handleGamepadEvent:function(event){switch(event.type){case"gamepadconnected":lime_ui_Joystick.__connect(event.gamepad.index);if(event.gamepad.mapping=="standard"){lime_ui_Gamepad.__connect(event.gamepad.index)}break;case"gamepaddisconnected":lime_ui_Joystick.__disconnect(event.gamepad.index);lime_ui_Gamepad.__disconnect(event.gamepad.index);break;default:}},handleInputEvent:function(event){if(lime__$internal_backend_html5_HTML5Window.textInput.value!=lime__$internal_backend_html5_HTML5Window.dummyCharacter){var value=StringTools.replace(lime__$internal_backend_html5_HTML5Window.textInput.value,lime__$internal_backend_html5_HTML5Window.dummyCharacter,"");if(value.length>0){this.parent.onTextInput.dispatch(value)}lime__$internal_backend_html5_HTML5Window.textInput.value=lime__$internal_backend_html5_HTML5Window.dummyCharacter}},handleMouseEvent:function(event){var x=0;var y=0;if(event.type!="wheel"){if(this.parent.element!=null){if(this.canvas!=null){var rect=this.canvas.getBoundingClientRect();x=(event.clientX-rect.left)*(this.parent.__width/rect.width);y=(event.clientY-rect.top)*(this.parent.__height/rect.height)}else if(this.div!=null){var rect1=this.div.getBoundingClientRect();x=event.clientX-rect1.left;y=event.clientY-rect1.top}else{var rect2=this.parent.element.getBoundingClientRect();x=(event.clientX-rect2.left)*(this.parent.__width/rect2.width);y=(event.clientY-rect2.top)*(this.parent.__height/rect2.height)}}else{x=event.clientX;y=event.clientY}switch(event.type){case"mousedown":if(event.currentTarget==this.parent.element){window.addEventListener("mouseup",$bind(this,this.handleMouseEvent))}this.parent.onMouseDown.dispatch(x,y,event.button);if(this.parent.onMouseDown.canceled&&event.cancelable){event.preventDefault()}break;case"mouseenter":if(event.target==this.parent.element){this.parent.onEnter.dispatch();if(this.parent.onEnter.canceled&&event.cancelable){event.preventDefault()}}break;case"mouseleave":if(event.target==this.parent.element){this.parent.onLeave.dispatch();if(this.parent.onLeave.canceled&&event.cancelable){event.preventDefault()}}break;case"mousemove":if(x!=this.cacheMouseX||y!=this.cacheMouseY){this.parent.onMouseMove.dispatch(x,y);this.parent.onMouseMoveRelative.dispatch(x-this.cacheMouseX,y-this.cacheMouseY);if((this.parent.onMouseMove.canceled||this.parent.onMouseMoveRelative.canceled)&&event.cancelable){event.preventDefault()}}break;case"mouseup":window.removeEventListener("mouseup",$bind(this,this.handleMouseEvent));if(event.currentTarget==this.parent.element){event.stopPropagation()}this.parent.onMouseUp.dispatch(x,y,event.button);if(this.parent.onMouseUp.canceled&&event.cancelable){event.preventDefault()}break;default:}this.cacheMouseX=x;this.cacheMouseY=y}else{var deltaMode;switch(event.deltaMode){case 0:deltaMode=lime_ui_MouseWheelMode.PIXELS;break;case 1:deltaMode=lime_ui_MouseWheelMode.LINES;break;case 2:deltaMode=lime_ui_MouseWheelMode.PAGES;break;default:deltaMode=lime_ui_MouseWheelMode.UNKNOWN}this.parent.onMouseWheel.dispatch(event.deltaX,-event.deltaY,deltaMode);if(this.parent.onMouseWheel.canceled&&event.cancelable){event.preventDefault()}}},handlePasteEvent:function(event){if(event.clipboardData.types.indexOf("text/plain")>-1){var text=event.clipboardData.getData("text/plain");lime_system_Clipboard.set_text(text);if(this.textInputEnabled){this.parent.onTextInput.dispatch(text)}if(event.cancelable){event.preventDefault()}}},handleResizeEvent:function(event){this.primaryTouch=null;this.updateSize()},handleTouchEvent:function(event){if(event.cancelable){event.preventDefault()}var rect=null;if(this.parent.element!=null){if(this.canvas!=null){rect=this.canvas.getBoundingClientRect()}else if(this.div!=null){rect=this.div.getBoundingClientRect()}else{rect=this.parent.element.getBoundingClientRect()}}var windowWidth=this.setWidth;var windowHeight=this.setHeight;if(windowWidth==0||windowHeight==0){if(rect!=null){windowWidth=rect.width;windowHeight=rect.height}else{windowWidth=1;windowHeight=1}}var touch;var x;var y;var cacheX;var cacheY;var _g=0;var _g1=event.changedTouches;while(_g<_g1.length){var data=_g1[_g];++_g;x=0;y=0;if(rect!=null){x=(data.clientX-rect.left)*(windowWidth/rect.width);y=(data.clientY-rect.top)*(windowHeight/rect.height)}else{x=data.clientX;y=data.clientY}if(event.type=="touchstart"){touch=this.unusedTouchesPool.pop();if(touch==null){touch=new lime_ui_Touch(x/windowWidth,y/windowHeight,data.identifier,0,0,data.force,this.parent.id)}else{touch.x=x/windowWidth;touch.y=y/windowHeight;touch.id=data.identifier;touch.dx=0;touch.dy=0;touch.pressure=data.force;touch.device=this.parent.id}this.currentTouches.h[data.identifier]=touch;lime_ui_Touch.onStart.dispatch(touch);if(this.primaryTouch==null){this.primaryTouch=touch}if(touch==this.primaryTouch){this.parent.onMouseDown.dispatch(x,y,0)}}else{touch=this.currentTouches.h[data.identifier];if(touch!=null){cacheX=touch.x;cacheY=touch.y;touch.x=x/windowWidth;touch.y=y/windowHeight;touch.dx=touch.x-cacheX;touch.dy=touch.y-cacheY;touch.pressure=data.force;switch(event.type){case"touchcancel":lime_ui_Touch.onCancel.dispatch(touch);this.currentTouches.remove(data.identifier);this.unusedTouchesPool.add(touch);if(touch==this.primaryTouch){this.primaryTouch=null}break;case"touchend":lime_ui_Touch.onEnd.dispatch(touch);this.currentTouches.remove(data.identifier);this.unusedTouchesPool.add(touch);if(touch==this.primaryTouch){this.parent.onMouseUp.dispatch(x,y,0);this.primaryTouch=null}break;case"touchmove":lime_ui_Touch.onMove.dispatch(touch);if(touch==this.primaryTouch){this.parent.onMouseMove.dispatch(x,y)}break;default:}}}}},isDescendent:function(node){if(node==this.parent.element){return true}while(node!=null){if(node.parentNode==this.parent.element){return true}node=node.parentNode}return false},setClipboard:function(value){var inputEnabled=this.textInputEnabled;this.setTextInputEnabled(true);var cacheText=lime__$internal_backend_html5_HTML5Window.textInput.value;lime__$internal_backend_html5_HTML5Window.textInput.value=value;lime__$internal_backend_html5_HTML5Window.textInput.select();if(window.document.queryCommandEnabled("copy")){window.document.execCommand("copy")}lime__$internal_backend_html5_HTML5Window.textInput.value=cacheText;this.setTextInputEnabled(inputEnabled)},setCursor:function(value){if(this.cursor!=value){if(value==null){this.parent.element.style.cursor="none"}else{var tmp;switch(value._hx_index){case 0:tmp="default";break;case 1:tmp="crosshair";break;case 3:tmp="move";break;case 4:tmp="pointer";break;case 5:tmp="nesw-resize";break;case 6:tmp="ns-resize";break;case 7:tmp="nwse-resize";break;case 8:tmp="ew-resize";break;case 9:tmp="text";break;case 10:tmp="wait";break;case 11:tmp="wait";break;default:tmp="auto"}this.parent.element.style.cursor=tmp}this.cursor=value}return this.cursor},setTextInputEnabled:function(value){if(value){if(lime__$internal_backend_html5_HTML5Window.textInput==null){lime__$internal_backend_html5_HTML5Window.textInput=window.document.createElement("input");lime__$internal_backend_html5_HTML5Window.textInput.type="text";lime__$internal_backend_html5_HTML5Window.textInput.style.position="absolute";lime__$internal_backend_html5_HTML5Window.textInput.style.opacity="0";lime__$internal_backend_html5_HTML5Window.textInput.style.color="transparent";lime__$internal_backend_html5_HTML5Window.textInput.value=lime__$internal_backend_html5_HTML5Window.dummyCharacter;lime__$internal_backend_html5_HTML5Window.textInput.autocapitalize="off";lime__$internal_backend_html5_HTML5Window.textInput.autocorrect="off";lime__$internal_backend_html5_HTML5Window.textInput.autocomplete="off";lime__$internal_backend_html5_HTML5Window.textInput.style.left="0px";lime__$internal_backend_html5_HTML5Window.textInput.style.top="50%";if(new EReg("(iPad|iPhone|iPod).*OS 8_","gi").match(window.navigator.userAgent)){lime__$internal_backend_html5_HTML5Window.textInput.style.fontSize="0px";lime__$internal_backend_html5_HTML5Window.textInput.style.width="0px";lime__$internal_backend_html5_HTML5Window.textInput.style.height="0px"}else{lime__$internal_backend_html5_HTML5Window.textInput.style.width="1px";lime__$internal_backend_html5_HTML5Window.textInput.style.height="1px"}lime__$internal_backend_html5_HTML5Window.textInput.style.pointerEvents="none";lime__$internal_backend_html5_HTML5Window.textInput.style.zIndex="-10000000"}if(lime__$internal_backend_html5_HTML5Window.textInput.parentNode==null){this.parent.element.appendChild(lime__$internal_backend_html5_HTML5Window.textInput)}if(!this.textInputEnabled){lime__$internal_backend_html5_HTML5Window.textInput.addEventListener("input",$bind(this,this.handleInputEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.addEventListener("blur",$bind(this,this.handleFocusEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.addEventListener("cut",$bind(this,this.handleCutOrCopyEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.addEventListener("copy",$bind(this,this.handleCutOrCopyEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.addEventListener("paste",$bind(this,this.handlePasteEvent),true)}lime__$internal_backend_html5_HTML5Window.textInput.focus();lime__$internal_backend_html5_HTML5Window.textInput.select()}else if(lime__$internal_backend_html5_HTML5Window.textInput!=null){lime__$internal_backend_html5_HTML5Window.textInput.removeEventListener("input",$bind(this,this.handleInputEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.removeEventListener("blur",$bind(this,this.handleFocusEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.removeEventListener("cut",$bind(this,this.handleCutOrCopyEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.removeEventListener("copy",$bind(this,this.handleCutOrCopyEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.removeEventListener("paste",$bind(this,this.handlePasteEvent),true);lime__$internal_backend_html5_HTML5Window.textInput.blur()}return this.textInputEnabled=value},updateSize:function(){if(!this.parent.__resizable){return}var elementWidth;var elementHeight;if(this.parent.element!=null){elementWidth=this.parent.element.clientWidth;elementHeight=this.parent.element.clientHeight}else{elementWidth=window.innerWidth;elementHeight=window.innerHeight}if(elementWidth!=this.cacheElementWidth||elementHeight!=this.cacheElementHeight){this.cacheElementWidth=elementWidth;this.cacheElementHeight=elementHeight;var stretch=this.resizeElement||this.setWidth==0&&this.setHeight==0;if(this.parent.element!=null&&(this.div==null||this.div!=null&&stretch)){if(stretch){if(this.parent.__width!=elementWidth||this.parent.__height!=elementHeight){this.parent.__width=elementWidth;this.parent.__height=elementHeight;if(this.canvas!=null){if(this.parent.element!=this.canvas){this.canvas.width=Math.round(elementWidth*this.scale);this.canvas.height=Math.round(elementHeight*this.scale);this.canvas.style.width=elementWidth+"px";this.canvas.style.height=elementHeight+"px"}}else{this.div.style.width=elementWidth+"px";this.div.style.height=elementHeight+"px"}this.parent.onResize.dispatch(elementWidth,elementHeight)}}else{var scaleX=this.setWidth!=0?elementWidth/this.setWidth:1;var scaleY=this.setHeight!=0?elementHeight/this.setHeight:1;var targetWidth=elementWidth;var targetHeight=elementHeight;var marginLeft=0;var marginTop=0;if(scaleX<scaleY){targetHeight=Math.floor(this.setHeight*scaleX);marginTop=Math.floor((elementHeight-targetHeight)/2)}else{targetWidth=Math.floor(this.setWidth*scaleY);marginLeft=Math.floor((elementWidth-targetWidth)/2)}if(this.canvas!=null){if(this.parent.element!=this.canvas){this.canvas.style.width=targetWidth+"px";this.canvas.style.height=targetHeight+"px";this.canvas.style.marginLeft=marginLeft+"px";this.canvas.style.marginTop=marginTop+"px"}}else{this.div.style.width=targetWidth+"px";this.div.style.height=targetHeight+"px";this.div.style.marginLeft=marginLeft+"px";this.div.style.marginTop=marginTop+"px"}}}}},__class__:lime__$internal_backend_html5_HTML5Window};var lime__$internal_format_Base64=function(){};$hxClasses["lime._internal.format.Base64"]=lime__$internal_format_Base64;lime__$internal_format_Base64.__name__="lime._internal.format.Base64";lime__$internal_format_Base64.encode=function(source){var result=[];var dictionary=lime__$internal_format_Base64.DICTIONARY;var extendedDictionary=lime__$internal_format_Base64.EXTENDED_DICTIONARY;var numBytes=source.length;var numInputTriplets=Math.floor(numBytes/3);var numChunksToWrite=numInputTriplets*2;result.length=Math.ceil(numBytes/3)*2;var numBytesRead=0;var numChunksWritten=0;var inputTriplet;while(numChunksWritten<numChunksToWrite){inputTriplet=source.b[numBytesRead]<<16|source.b[numBytesRead+1]<<8|source.b[numBytesRead+2];result[numChunksWritten]=extendedDictionary[inputTriplet>>12&4095];result[numChunksWritten+1]=extendedDictionary[inputTriplet&4095];numBytesRead+=3;numChunksWritten+=2}switch(numBytes-numInputTriplets*3){case 1:inputTriplet=source.b[numBytesRead]<<16;result[numChunksWritten]=extendedDictionary[inputTriplet>>12&4095];result[numChunksWritten+1]="==";break;case 2:inputTriplet=source.b[numBytesRead]<<16|source.b[numBytesRead+1]<<8;result[numChunksWritten]=extendedDictionary[inputTriplet>>12&4095];result[numChunksWritten+1]=dictionary[inputTriplet>>6&63]+"=";break;default:}return result.join("")};var lime__$internal_format_Deflate=function(){};$hxClasses["lime._internal.format.Deflate"]=lime__$internal_format_Deflate;lime__$internal_format_Deflate.__name__="lime._internal.format.Deflate";lime__$internal_format_Deflate.decompress=function(bytes){var data=pako.inflateRaw(bytes.b.bufferValue);return haxe_io_Bytes.ofData(data)};var lime__$internal_format_GZip=function(){};$hxClasses["lime._internal.format.GZip"]=lime__$internal_format_GZip;lime__$internal_format_GZip.__name__="lime._internal.format.GZip";lime__$internal_format_GZip.decompress=function(bytes){var data=pako.ungzip(bytes.b.bufferValue);return haxe_io_Bytes.ofData(data)};var lime__$internal_format_LZMA=function(){};$hxClasses["lime._internal.format.LZMA"]=lime__$internal_format_LZMA;lime__$internal_format_LZMA.__name__="lime._internal.format.LZMA";lime__$internal_format_LZMA.decompress=function(bytes){return null};var lime__$internal_format_Zlib=function(){};$hxClasses["lime._internal.format.Zlib"]=lime__$internal_format_Zlib;lime__$internal_format_Zlib.__name__="lime._internal.format.Zlib";lime__$internal_format_Zlib.decompress=function(bytes){var data=pako.inflate(bytes.b.bufferValue);return haxe_io_Bytes.ofData(data)};var lime__$internal_graphics_ImageCanvasUtil=function(){};$hxClasses["lime._internal.graphics.ImageCanvasUtil"]=lime__$internal_graphics_ImageCanvasUtil;lime__$internal_graphics_ImageCanvasUtil.__name__="lime._internal.graphics.ImageCanvasUtil";lime__$internal_graphics_ImageCanvasUtil.colorTransform=function(image,rect,colorMatrix){lime__$internal_graphics_ImageCanvasUtil.convertToData(image);lime__$internal_graphics_ImageDataUtil.colorTransform(image,rect,colorMatrix)};lime__$internal_graphics_ImageCanvasUtil.convertToCanvas=function(image,clear){if(clear==null){clear=false}var buffer=image.buffer;if(buffer.__srcImage!=null){if(buffer.__srcCanvas==null){lime__$internal_graphics_ImageCanvasUtil.createCanvas(image,buffer.__srcImage.width,buffer.__srcImage.height);buffer.__srcContext.drawImage(buffer.__srcImage,0,0)}buffer.__srcImage=null}else if(buffer.__srcCanvas==null&&buffer.data!=null){image.set_transparent(true);lime__$internal_graphics_ImageCanvasUtil.createCanvas(image,buffer.width,buffer.height);lime__$internal_graphics_ImageCanvasUtil.createImageData(image);buffer.__srcContext.putImageData(buffer.__srcImageData,0,0)}else if(image.type==lime_graphics_ImageType.DATA&&buffer.__srcImageData!=null&&image.dirty){buffer.__srcContext.putImageData(buffer.__srcImageData,0,0);image.dirty=false}if(clear){buffer.data=null;buffer.__srcImageData=null}else if(buffer.data==null&&buffer.__srcImageData!=null){buffer.data=buffer.__srcImageData.data}image.type=lime_graphics_ImageType.CANVAS};lime__$internal_graphics_ImageCanvasUtil.convertToData=function(image,clear){if(clear==null){clear=false}var buffer=image.buffer;if(buffer.__srcImage!=null){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(image)}if(buffer.__srcCanvas!=null&&buffer.data==null){lime__$internal_graphics_ImageCanvasUtil.createImageData(image);if(image.type==lime_graphics_ImageType.CANVAS){image.dirty=false}}else if(image.type==lime_graphics_ImageType.CANVAS&&buffer.__srcCanvas!=null&&image.dirty){if(buffer.__srcImageData==null){lime__$internal_graphics_ImageCanvasUtil.createImageData(image)}else{buffer.__srcImageData=buffer.__srcContext.getImageData(0,0,buffer.width,buffer.height);var elements=buffer.__srcImageData.data.buffer;var this1;if(elements!=null){this1=new Uint8Array(elements)}else{this1=null}buffer.data=this1}image.dirty=false}if(clear){image.buffer.__srcCanvas=null;image.buffer.__srcContext=null}image.type=lime_graphics_ImageType.DATA};lime__$internal_graphics_ImageCanvasUtil.copyChannel=function(image,sourceImage,sourceRect,destPoint,sourceChannel,destChannel){lime__$internal_graphics_ImageCanvasUtil.convertToData(sourceImage);lime__$internal_graphics_ImageCanvasUtil.convertToData(image);lime__$internal_graphics_ImageDataUtil.copyChannel(image,sourceImage,sourceRect,destPoint,sourceChannel,destChannel)};lime__$internal_graphics_ImageCanvasUtil.copyPixels=function(image,sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha){if(mergeAlpha==null){mergeAlpha=false}if(destPoint==null||destPoint.x>=image.width||destPoint.y>=image.height||sourceRect==null||sourceRect.width<1||sourceRect.height<1){return}if(alphaImage!=null&&alphaImage.get_transparent()){if(alphaPoint==null){alphaPoint=new lime_math_Vector2}var tempData=sourceImage.clone();tempData.copyChannel(alphaImage,new lime_math_Rectangle(sourceRect.x+alphaPoint.x,sourceRect.y+alphaPoint.y,sourceRect.width,sourceRect.height),new lime_math_Vector2(sourceRect.x,sourceRect.y),lime_graphics_ImageChannel.ALPHA,lime_graphics_ImageChannel.ALPHA);sourceImage=tempData}lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(image,true);if(!mergeAlpha){if(image.get_transparent()&&sourceImage.get_transparent()){image.buffer.__srcContext.clearRect(destPoint.x+image.offsetX,destPoint.y+image.offsetY,sourceRect.width+image.offsetX,sourceRect.height+image.offsetY)}}lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(sourceImage);if(sourceImage.buffer.get_src()!=null){image.buffer.__srcContext.globalCompositeOperation="source-over";image.buffer.__srcContext.drawImage(sourceImage.buffer.get_src(),sourceRect.x+sourceImage.offsetX|0,sourceRect.y+sourceImage.offsetY|0,sourceRect.width|0,sourceRect.height|0,destPoint.x+image.offsetX|0,destPoint.y+image.offsetY|0,sourceRect.width|0,sourceRect.height|0)}image.dirty=true;image.version++};lime__$internal_graphics_ImageCanvasUtil.createCanvas=function(image,width,height){var buffer=image.buffer;if(buffer.__srcCanvas==null){buffer.__srcCanvas=window.document.createElement("canvas");buffer.__srcCanvas.width=width;buffer.__srcCanvas.height=height;if(!image.get_transparent()){if(!image.get_transparent()){buffer.__srcCanvas.setAttribute("moz-opaque","true")}buffer.__srcContext=buffer.__srcCanvas.getContext("2d",{alpha:false})}else{buffer.__srcContext=buffer.__srcCanvas.getContext("2d")}}};lime__$internal_graphics_ImageCanvasUtil.createImageData=function(image){var buffer=image.buffer;if(buffer.__srcImageData==null){if(buffer.data==null){buffer.__srcImageData=buffer.__srcContext.getImageData(0,0,buffer.width,buffer.height)}else{buffer.__srcImageData=buffer.__srcContext.createImageData(buffer.width,buffer.height);buffer.__srcImageData.data.set(buffer.data)}var elements=buffer.__srcImageData.data.buffer;var this1;if(elements!=null){this1=new Uint8Array(elements)}else{this1=null}buffer.data=this1}};lime__$internal_graphics_ImageCanvasUtil.fillRect=function(image,rect,color,format){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(image);var r;var g;var b;var a;if(format==1){r=color>>16&255;g=color>>8&255;b=color&255;a=image.get_transparent()?color>>24&255:255}else{r=color>>24&255;g=color>>16&255;b=color>>8&255;a=image.get_transparent()?color&255:255}if(rect.x==0&&rect.y==0&&rect.width==image.width&&rect.height==image.height){if(image.get_transparent()&&a==0){image.buffer.__srcCanvas.width=image.buffer.width;return}}if(a<255){image.buffer.__srcContext.clearRect(rect.x+image.offsetX,rect.y+image.offsetY,rect.width+image.offsetX,rect.height+image.offsetY)}if(a>0){image.buffer.__srcContext.fillStyle="rgba("+r+", "+g+", "+b+", "+a/255+")";image.buffer.__srcContext.fillRect(rect.x+image.offsetX,rect.y+image.offsetY,rect.width+image.offsetX,rect.height+image.offsetY)}image.dirty=true;image.version++};lime__$internal_graphics_ImageCanvasUtil.getPixel32=function(image,x,y,format){lime__$internal_graphics_ImageCanvasUtil.convertToData(image);return lime__$internal_graphics_ImageDataUtil.getPixel32(image,x,y,format)};lime__$internal_graphics_ImageCanvasUtil.getPixels=function(image,rect,format){lime__$internal_graphics_ImageCanvasUtil.convertToData(image);return lime__$internal_graphics_ImageDataUtil.getPixels(image,rect,format)};lime__$internal_graphics_ImageCanvasUtil.setPixel32=function(image,x,y,color,format){lime__$internal_graphics_ImageCanvasUtil.convertToData(image);lime__$internal_graphics_ImageDataUtil.setPixel32(image,x,y,color,format)};lime__$internal_graphics_ImageCanvasUtil.sync=function(image,clear){if(image==null){return}if(image.type==lime_graphics_ImageType.CANVAS&&(image.buffer.__srcCanvas!=null||image.buffer.data!=null)){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(image,clear)}else if(image.type==lime_graphics_ImageType.DATA){lime__$internal_graphics_ImageCanvasUtil.convertToData(image,clear)}};var lime__$internal_graphics_ImageDataUtil=function(){};$hxClasses["lime._internal.graphics.ImageDataUtil"]=lime__$internal_graphics_ImageDataUtil;lime__$internal_graphics_ImageDataUtil.__name__="lime._internal.graphics.ImageDataUtil";lime__$internal_graphics_ImageDataUtil.colorTransform=function(image,rect,colorMatrix){var data=image.buffer.data;if(data==null){return}var format=image.buffer.format;var premultiplied=image.buffer.premultiplied;var dataView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(image,rect);var alphaTable=lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getAlphaTable(colorMatrix);var redTable=lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getRedTable(colorMatrix);var greenTable=lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getGreenTable(colorMatrix);var blueTable=lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getBlueTable(colorMatrix);var row;var offset;var pixel;var _g=0;var _g1=dataView.height;while(_g<_g1){row=dataView.byteOffset+dataView.stride*_g++;var _g2=0;var _g11=dataView.width;while(_g2<_g11){offset=row+_g2++*4;var format1=format;var premultiplied1=premultiplied;if(premultiplied==null){premultiplied1=false}if(format==null){format1=0}switch(format1){case 0:pixel=(data[offset]&255)<<24|(data[offset+1]&255)<<16|(data[offset+2]&255)<<8|data[offset+3]&255;break;case 1:pixel=(data[offset+1]&255)<<24|(data[offset+2]&255)<<16|(data[offset+3]&255)<<8|data[offset]&255;break;case 2:pixel=(data[offset+2]&255)<<24|(data[offset+1]&255)<<16|(data[offset]&255)<<8|data[offset+3]&255;break}if(premultiplied1){if((pixel&255)!=0&&(pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(pixel&255);pixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|pixel&255&255}}pixel=(redTable[pixel>>>24&255]&255)<<24|(greenTable[pixel>>>16&255]&255)<<16|(blueTable[pixel>>>8&255]&255)<<8|alphaTable[pixel&255]&255;var format2=format;var premultiplied2=premultiplied;if(premultiplied==null){premultiplied2=false}if(format==null){format2=0}if(premultiplied2){if((pixel&255)==0){if(pixel!=0){pixel=0}}else if((pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[pixel&255];pixel=((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|pixel&255&255}}switch(format2){case 0:data[offset]=pixel>>>24&255;data[offset+1]=pixel>>>16&255;data[offset+2]=pixel>>>8&255;data[offset+3]=pixel&255;break;case 1:data[offset]=pixel&255;data[offset+1]=pixel>>>24&255;data[offset+2]=pixel>>>16&255;data[offset+3]=pixel>>>8&255;break;case 2:data[offset]=pixel>>>8&255;data[offset+1]=pixel>>>16&255;data[offset+2]=pixel>>>24&255;data[offset+3]=pixel&255;break}}}image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.copyChannel=function(image,sourceImage,sourceRect,destPoint,sourceChannel,destChannel){var destIdx;switch(destChannel._hx_index){case 0:destIdx=0;break;case 1:destIdx=1;break;case 2:destIdx=2;break;case 3:destIdx=3;break}var srcIdx;switch(sourceChannel._hx_index){case 0:srcIdx=0;break;case 1:srcIdx=1;break;case 2:srcIdx=2;break;case 3:srcIdx=3;break}var srcData=sourceImage.buffer.data;var destData=image.buffer.data;if(srcData==null||destData==null){return}var srcView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(sourceImage,sourceRect);var destView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(image,new lime_math_Rectangle(destPoint.x,destPoint.y,srcView.width,srcView.height));var srcFormat=sourceImage.buffer.format;var destFormat=image.buffer.format;var srcPremultiplied=sourceImage.buffer.premultiplied;var destPremultiplied=image.buffer.premultiplied;var srcPosition;var destPosition;var srcPixel;var destPixel;var value=0;var _g=0;var _g1=destView.height;while(_g<_g1){var y=_g++;srcPosition=srcView.byteOffset+srcView.stride*y;destPosition=destView.byteOffset+destView.stride*y;var _g2=0;var _g11=destView.width;while(_g2<_g11){++_g2;var format=srcFormat;var premultiplied=srcPremultiplied;if(srcPremultiplied==null){premultiplied=false}if(srcFormat==null){format=0}switch(format){case 0:srcPixel=(srcData[srcPosition]&255)<<24|(srcData[srcPosition+1]&255)<<16|(srcData[srcPosition+2]&255)<<8|srcData[srcPosition+3]&255;break;case 1:srcPixel=(srcData[srcPosition+1]&255)<<24|(srcData[srcPosition+2]&255)<<16|(srcData[srcPosition+3]&255)<<8|srcData[srcPosition]&255;break;case 2:srcPixel=(srcData[srcPosition+2]&255)<<24|(srcData[srcPosition+1]&255)<<16|(srcData[srcPosition]&255)<<8|srcData[srcPosition+3]&255;break}if(premultiplied){if((srcPixel&255)!=0&&(srcPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(srcPixel&255);srcPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((srcPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((srcPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((srcPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|srcPixel&255&255}}var format1=destFormat;var premultiplied1=destPremultiplied;if(destPremultiplied==null){premultiplied1=false}if(destFormat==null){format1=0}switch(format1){case 0:destPixel=(destData[destPosition]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition+2]&255)<<8|destData[destPosition+3]&255;break;case 1:destPixel=(destData[destPosition+1]&255)<<24|(destData[destPosition+2]&255)<<16|(destData[destPosition+3]&255)<<8|destData[destPosition]&255;break;case 2:destPixel=(destData[destPosition+2]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition]&255)<<8|destData[destPosition+3]&255;break}if(premultiplied1){if((destPixel&255)!=0&&(destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(destPixel&255);destPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|destPixel&255&255}}switch(srcIdx){case 0:value=srcPixel>>>24&255;break;case 1:value=srcPixel>>>16&255;break;case 2:value=srcPixel>>>8&255;break;case 3:value=srcPixel&255;break}switch(destIdx){case 0:destPixel=(value&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;break;case 1:destPixel=(destPixel>>>24&255&255)<<24|(value&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;break;case 2:destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(value&255)<<8|destPixel&255&255;break;case 3:destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|value&255;break}var format2=destFormat;var premultiplied2=destPremultiplied;if(destPremultiplied==null){premultiplied2=false}if(destFormat==null){format2=0}if(premultiplied2){if((destPixel&255)==0){if(destPixel!=0){destPixel=0}}else if((destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[destPixel&255];destPixel=((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|destPixel&255&255}}switch(format2){case 0:destData[destPosition]=destPixel>>>24&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>8&255;destData[destPosition+3]=destPixel&255;break;case 1:destData[destPosition]=destPixel&255;destData[destPosition+1]=destPixel>>>24&255;destData[destPosition+2]=destPixel>>>16&255;destData[destPosition+3]=destPixel>>>8&255;break;case 2:destData[destPosition]=destPixel>>>8&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>24&255;destData[destPosition+3]=destPixel&255;break}srcPosition+=4;destPosition+=4}}image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.copyPixels=function(image,sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha){if(mergeAlpha==null){mergeAlpha=false}if(image.width==sourceImage.width&&image.height==sourceImage.height&&sourceRect.width==sourceImage.width&&sourceRect.height==sourceImage.height&&sourceRect.x==0&&sourceRect.y==0&&destPoint.x==0&&destPoint.y==0&&alphaImage==null&&alphaPoint==null&&mergeAlpha==false&&image.get_format()==sourceImage.get_format()){image.buffer.data.set(sourceImage.buffer.data)}else{var sourceData=sourceImage.buffer.data;var destData=image.buffer.data;if(sourceData==null||destData==null){return}var sourceView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(sourceImage,sourceRect);var destView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(image,new lime_math_Rectangle(destPoint.x,destPoint.y,sourceView.width,sourceView.height));var sourceFormat=sourceImage.buffer.format;var destFormat=image.buffer.format;var sourcePosition;var destPosition;var sourceAlpha;var destAlpha;var oneMinusSourceAlpha;var blendAlpha;var sourcePixel;var destPixel;var sourcePremultiplied=sourceImage.buffer.premultiplied;var destPremultiplied=image.buffer.premultiplied;var sourceBytesPerPixel=sourceImage.buffer.bitsPerPixel/8|0;var destBytesPerPixel=image.buffer.bitsPerPixel/8|0;var useAlphaImage=alphaImage!=null&&alphaImage.get_transparent();var blend=mergeAlpha||useAlphaImage&&!image.get_transparent()||!mergeAlpha&&!image.get_transparent()&&sourceImage.get_transparent();if(!useAlphaImage){if(blend){var _g=0;var _g1=destView.height;while(_g<_g1){var y=_g++;sourcePosition=sourceView.byteOffset+sourceView.stride*y;destPosition=destView.byteOffset+destView.stride*y;var _g2=0;var _g11=destView.width;while(_g2<_g11){++_g2;var format=sourceFormat;var premultiplied=sourcePremultiplied;if(sourcePremultiplied==null){premultiplied=false}if(sourceFormat==null){format=0}switch(format){case 0:sourcePixel=(sourceData[sourcePosition]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition+2]&255)<<8|sourceData[sourcePosition+3]&255;break;case 1:sourcePixel=(sourceData[sourcePosition+1]&255)<<24|(sourceData[sourcePosition+2]&255)<<16|(sourceData[sourcePosition+3]&255)<<8|sourceData[sourcePosition]&255;break;case 2:sourcePixel=(sourceData[sourcePosition+2]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition]&255)<<8|sourceData[sourcePosition+3]&255;break}if(premultiplied){if((sourcePixel&255)!=0&&(sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(sourcePixel&255);sourcePixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|sourcePixel&255&255}}var format1=destFormat;var premultiplied1=destPremultiplied;if(destPremultiplied==null){premultiplied1=false}if(destFormat==null){format1=0}switch(format1){case 0:destPixel=(destData[destPosition]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition+2]&255)<<8|destData[destPosition+3]&255;break;case 1:destPixel=(destData[destPosition+1]&255)<<24|(destData[destPosition+2]&255)<<16|(destData[destPosition+3]&255)<<8|destData[destPosition]&255;break;case 2:destPixel=(destData[destPosition+2]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition]&255)<<8|destData[destPosition+3]&255;break}if(premultiplied1){if((destPixel&255)!=0&&(destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(destPixel&255);destPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|destPixel&255&255}}sourceAlpha=(sourcePixel&255)/255;destAlpha=(destPixel&255)/255;oneMinusSourceAlpha=1-sourceAlpha;blendAlpha=sourceAlpha+destAlpha*oneMinusSourceAlpha;if(blendAlpha==0){destPixel=0}else{destPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>24&255)*sourceAlpha+(destPixel>>>24&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>16&255)*sourceAlpha+(destPixel>>>16&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>8&255)*sourceAlpha+(destPixel>>>8&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(blendAlpha*255)]&255}var format2=destFormat;var premultiplied2=destPremultiplied;if(destPremultiplied==null){premultiplied2=false}if(destFormat==null){format2=0}if(premultiplied2){if((destPixel&255)==0){if(destPixel!=0){destPixel=0}}else if((destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[destPixel&255];destPixel=((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|destPixel&255&255}}switch(format2){case 0:destData[destPosition]=destPixel>>>24&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>8&255;destData[destPosition+3]=destPixel&255;break;case 1:destData[destPosition]=destPixel&255;destData[destPosition+1]=destPixel>>>24&255;destData[destPosition+2]=destPixel>>>16&255;destData[destPosition+3]=destPixel>>>8&255;break;case 2:destData[destPosition]=destPixel>>>8&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>24&255;destData[destPosition+3]=destPixel&255;break}sourcePosition+=4;destPosition+=4}}}else if(sourceFormat==destFormat&&sourcePremultiplied==destPremultiplied&&sourceBytesPerPixel==destBytesPerPixel){var _g3=0;var _g12=destView.height;while(_g3<_g12){var y1=_g3++;sourcePosition=sourceView.byteOffset+sourceView.stride*y1;destPosition=destView.byteOffset+destView.stride*y1;destData.set(sourceData.subarray(sourcePosition,sourcePosition+destView.width*destBytesPerPixel),destPosition)}}else{var _g4=0;var _g13=destView.height;while(_g4<_g13){var y2=_g4++;sourcePosition=sourceView.byteOffset+sourceView.stride*y2;destPosition=destView.byteOffset+destView.stride*y2;var _g5=0;var _g14=destView.width;while(_g5<_g14){++_g5;var format3=sourceFormat;var premultiplied3=sourcePremultiplied;if(sourcePremultiplied==null){premultiplied3=false}if(sourceFormat==null){format3=0}switch(format3){case 0:sourcePixel=(sourceData[sourcePosition]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition+2]&255)<<8|sourceData[sourcePosition+3]&255;break;case 1:sourcePixel=(sourceData[sourcePosition+1]&255)<<24|(sourceData[sourcePosition+2]&255)<<16|(sourceData[sourcePosition+3]&255)<<8|sourceData[sourcePosition]&255;break;case 2:sourcePixel=(sourceData[sourcePosition+2]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition]&255)<<8|sourceData[sourcePosition+3]&255;break}if(premultiplied3){if((sourcePixel&255)!=0&&(sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(sourcePixel&255);sourcePixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|sourcePixel&255&255}}var format4=destFormat;var premultiplied4=destPremultiplied;if(destPremultiplied==null){premultiplied4=false}if(destFormat==null){format4=0}if(premultiplied4){if((sourcePixel&255)==0){if(sourcePixel!=0){sourcePixel=0}}else if((sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[sourcePixel&255];sourcePixel=((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|sourcePixel&255&255}}switch(format4){case 0:destData[destPosition]=sourcePixel>>>24&255;destData[destPosition+1]=sourcePixel>>>16&255;destData[destPosition+2]=sourcePixel>>>8&255;destData[destPosition+3]=sourcePixel&255;break;case 1:destData[destPosition]=sourcePixel&255;destData[destPosition+1]=sourcePixel>>>24&255;destData[destPosition+2]=sourcePixel>>>16&255;destData[destPosition+3]=sourcePixel>>>8&255;break;case 2:destData[destPosition]=sourcePixel>>>8&255;destData[destPosition+1]=sourcePixel>>>16&255;destData[destPosition+2]=sourcePixel>>>24&255;destData[destPosition+3]=sourcePixel&255;break}sourcePosition+=4;destPosition+=4}}}}else{var alphaData=alphaImage.buffer.data;var alphaFormat=alphaImage.buffer.format;var alphaPosition;var alphaPixel;var alphaView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(alphaImage,new lime_math_Rectangle(sourceView.x+(alphaPoint==null?0:alphaPoint.x),sourceView.y+(alphaPoint==null?0:alphaPoint.y),sourceView.width,sourceView.height));destView.clip(destPoint.x|0,destPoint.y|0,alphaView.width,alphaView.height);if(blend){var _g6=0;var _g15=destView.height;while(_g6<_g15){var y3=_g6++;sourcePosition=sourceView.byteOffset+sourceView.stride*y3;destPosition=destView.byteOffset+destView.stride*y3;alphaPosition=alphaView.byteOffset+alphaView.stride*y3;var _g7=0;var _g16=destView.width;while(_g7<_g16){++_g7;var format5=sourceFormat;var premultiplied5=sourcePremultiplied;if(sourcePremultiplied==null){premultiplied5=false}if(sourceFormat==null){format5=0}switch(format5){case 0:sourcePixel=(sourceData[sourcePosition]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition+2]&255)<<8|sourceData[sourcePosition+3]&255;break;case 1:sourcePixel=(sourceData[sourcePosition+1]&255)<<24|(sourceData[sourcePosition+2]&255)<<16|(sourceData[sourcePosition+3]&255)<<8|sourceData[sourcePosition]&255;break;case 2:sourcePixel=(sourceData[sourcePosition+2]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition]&255)<<8|sourceData[sourcePosition+3]&255;break}if(premultiplied5){if((sourcePixel&255)!=0&&(sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(sourcePixel&255);sourcePixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|sourcePixel&255&255}}var format6=destFormat;var premultiplied6=destPremultiplied;if(destPremultiplied==null){premultiplied6=false}if(destFormat==null){format6=0}switch(format6){case 0:destPixel=(destData[destPosition]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition+2]&255)<<8|destData[destPosition+3]&255;break;case 1:destPixel=(destData[destPosition+1]&255)<<24|(destData[destPosition+2]&255)<<16|(destData[destPosition+3]&255)<<8|destData[destPosition]&255;break;case 2:destPixel=(destData[destPosition+2]&255)<<24|(destData[destPosition+1]&255)<<16|(destData[destPosition]&255)<<8|destData[destPosition+3]&255;break}if(premultiplied6){if((destPixel&255)!=0&&(destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(destPixel&255);destPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|destPixel&255&255}}var format7=alphaFormat;if(alphaFormat==null){format7=0}switch(format7){case 0:alphaPixel=(alphaData[alphaPosition]&255)<<24|(alphaData[alphaPosition+1]&255)<<16|(alphaData[alphaPosition+2]&255)<<8|alphaData[alphaPosition+3]&255;break;case 1:alphaPixel=(alphaData[alphaPosition+1]&255)<<24|(alphaData[alphaPosition+2]&255)<<16|(alphaData[alphaPosition+3]&255)<<8|alphaData[alphaPosition]&255;break;case 2:alphaPixel=(alphaData[alphaPosition+2]&255)<<24|(alphaData[alphaPosition+1]&255)<<16|(alphaData[alphaPosition]&255)<<8|alphaData[alphaPosition+3]&255;break}sourceAlpha=(alphaPixel&255)/255*((sourcePixel&255)/255);if(sourceAlpha>0){destAlpha=(destPixel&255)/255;oneMinusSourceAlpha=1-sourceAlpha;blendAlpha=sourceAlpha+destAlpha*oneMinusSourceAlpha;destPixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>24&255)*sourceAlpha+(destPixel>>>24&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>16&255)*sourceAlpha+(destPixel>>>16&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(((sourcePixel>>>8&255)*sourceAlpha+(destPixel>>>8&255)*destAlpha*oneMinusSourceAlpha)/blendAlpha)]&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round(blendAlpha*255)]&255;var format8=destFormat;var premultiplied7=destPremultiplied;if(destPremultiplied==null){premultiplied7=false}if(destFormat==null){format8=0}if(premultiplied7){if((destPixel&255)==0){if(destPixel!=0){destPixel=0}}else if((destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[destPixel&255];destPixel=((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|destPixel&255&255}}switch(format8){case 0:destData[destPosition]=destPixel>>>24&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>8&255;destData[destPosition+3]=destPixel&255;break;case 1:destData[destPosition]=destPixel&255;destData[destPosition+1]=destPixel>>>24&255;destData[destPosition+2]=destPixel>>>16&255;destData[destPosition+3]=destPixel>>>8&255;break;case 2:destData[destPosition]=destPixel>>>8&255;destData[destPosition+1]=destPixel>>>16&255;destData[destPosition+2]=destPixel>>>24&255;destData[destPosition+3]=destPixel&255;break}}sourcePosition+=4;destPosition+=4;alphaPosition+=4}}}else{var _g8=0;var _g17=destView.height;while(_g8<_g17){var y4=_g8++;sourcePosition=sourceView.byteOffset+sourceView.stride*y4;destPosition=destView.byteOffset+destView.stride*y4;alphaPosition=alphaView.byteOffset+alphaView.stride*y4;var _g9=0;var _g18=destView.width;while(_g9<_g18){++_g9;var format9=sourceFormat;var premultiplied8=sourcePremultiplied;if(sourcePremultiplied==null){premultiplied8=false}if(sourceFormat==null){format9=0}switch(format9){case 0:sourcePixel=(sourceData[sourcePosition]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition+2]&255)<<8|sourceData[sourcePosition+3]&255;break;case 1:sourcePixel=(sourceData[sourcePosition+1]&255)<<24|(sourceData[sourcePosition+2]&255)<<16|(sourceData[sourcePosition+3]&255)<<8|sourceData[sourcePosition]&255;break;case 2:sourcePixel=(sourceData[sourcePosition+2]&255)<<24|(sourceData[sourcePosition+1]&255)<<16|(sourceData[sourcePosition]&255)<<8|sourceData[sourcePosition+3]&255;break}if(premultiplied8){if((sourcePixel&255)!=0&&(sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(sourcePixel&255);sourcePixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|sourcePixel&255&255}}var format10=alphaFormat;if(alphaFormat==null){format10=0}switch(format10){case 0:alphaPixel=(alphaData[alphaPosition]&255)<<24|(alphaData[alphaPosition+1]&255)<<16|(alphaData[alphaPosition+2]&255)<<8|alphaData[alphaPosition+3]&255;break;case 1:alphaPixel=(alphaData[alphaPosition+1]&255)<<24|(alphaData[alphaPosition+2]&255)<<16|(alphaData[alphaPosition+3]&255)<<8|alphaData[alphaPosition]&255;break;case 2:alphaPixel=(alphaData[alphaPosition+2]&255)<<24|(alphaData[alphaPosition+1]&255)<<16|(alphaData[alphaPosition]&255)<<8|alphaData[alphaPosition+3]&255;break}sourcePixel=(sourcePixel>>>24&255&255)<<24|(sourcePixel>>>16&255&255)<<16|(sourcePixel>>>8&255&255)<<8|Math.round((sourcePixel&255)*((alphaPixel&255)/255))&255;var format11=destFormat;var premultiplied9=destPremultiplied;if(destPremultiplied==null){premultiplied9=false}if(destFormat==null){format11=0}if(premultiplied9){if((sourcePixel&255)==0){if(sourcePixel!=0){sourcePixel=0}}else if((sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[sourcePixel&255];sourcePixel=((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|sourcePixel&255&255}}switch(format11){case 0:destData[destPosition]=sourcePixel>>>24&255;destData[destPosition+1]=sourcePixel>>>16&255;destData[destPosition+2]=sourcePixel>>>8&255;destData[destPosition+3]=sourcePixel&255;break;case 1:destData[destPosition]=sourcePixel&255;destData[destPosition+1]=sourcePixel>>>24&255;destData[destPosition+2]=sourcePixel>>>16&255;destData[destPosition+3]=sourcePixel>>>8&255;break;case 2:destData[destPosition]=sourcePixel>>>8&255;destData[destPosition+1]=sourcePixel>>>16&255;destData[destPosition+2]=sourcePixel>>>24&255;destData[destPosition+3]=sourcePixel&255;break}sourcePosition+=4;destPosition+=4;alphaPosition+=4}}}}}image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.fillRect=function(image,rect,color,format){var fillColor;switch(format){case 1:var argb=color;var rgba=0;rgba=(argb>>>16&255&255)<<24|(argb>>>8&255&255)<<16|(argb&255&255)<<8|argb>>>24&255&255;fillColor=rgba;break;case 2:var bgra=color;var rgba1=0;rgba1=(bgra>>>8&255&255)<<24|(bgra>>>16&255&255)<<16|(bgra>>>24&255&255)<<8|bgra&255&255;fillColor=rgba1;break;default:fillColor=color}if(!image.get_transparent()){fillColor=(fillColor>>>24&255&255)<<24|(fillColor>>>16&255&255)<<16|(fillColor>>>8&255&255)<<8|255}var data=image.buffer.data;if(data==null){return}var format1=image.buffer.format;if(image.buffer.premultiplied){if((fillColor&255)==0){if(fillColor!=0){fillColor=0}}else if((fillColor&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[fillColor&255];fillColor=((fillColor>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((fillColor>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((fillColor>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|fillColor&255&255}}var dataView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(image,rect);var row;var _g=0;var _g1=dataView.height;while(_g<_g1){row=dataView.byteOffset+dataView.stride*_g++;var _g2=0;var _g11=dataView.width;while(_g2<_g11){var offset=row+_g2++*4;var format2=format1;if(format1==null){format2=0}switch(format2){case 0:data[offset]=fillColor>>>24&255;data[offset+1]=fillColor>>>16&255;data[offset+2]=fillColor>>>8&255;data[offset+3]=fillColor&255;break;case 1:data[offset]=fillColor&255;data[offset+1]=fillColor>>>24&255;data[offset+2]=fillColor>>>16&255;data[offset+3]=fillColor>>>8&255;break;case 2:data[offset]=fillColor>>>8&255;data[offset+1]=fillColor>>>16&255;data[offset+2]=fillColor>>>24&255;data[offset+3]=fillColor&255;break}}}image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.gaussianBlur=function(image,sourceImage,sourceRect,destPoint,blurX,blurY,quality,strength,color){if(strength==null){strength=1}if(quality==null){quality=1}if(blurY==null){blurY=4}if(blurX==null){blurX=4}var imagePremultiplied=image.get_premultiplied();if(imagePremultiplied){image.set_premultiplied(false)}lime__$internal_graphics_StackBlur.blur(image,sourceImage,sourceRect,destPoint,blurX,blurY,quality);image.dirty=true;image.version++;if(imagePremultiplied){image.set_premultiplied(true)}return image};lime__$internal_graphics_ImageDataUtil.getPixel32=function(image,x,y,format){var pixel;var data=image.buffer.data;var offset=4*(y+image.offsetY)*image.buffer.width+(x+image.offsetX)*4;var format1=image.buffer.format;var premultiplied=image.buffer.premultiplied;if(premultiplied==null){premultiplied=false}if(format1==null){format1=0}switch(format1){case 0:pixel=(data[offset]&255)<<24|(data[offset+1]&255)<<16|(data[offset+2]&255)<<8|data[offset+3]&255;break;case 1:pixel=(data[offset+1]&255)<<24|(data[offset+2]&255)<<16|(data[offset+3]&255)<<8|data[offset]&255;break;case 2:pixel=(data[offset+2]&255)<<24|(data[offset+1]&255)<<16|(data[offset]&255)<<8|data[offset+3]&255;break}if(premultiplied){if((pixel&255)!=0&&(pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(pixel&255);pixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|pixel&255&255}}switch(format){case 1:var argb=0;argb=(pixel&255&255)<<24|(pixel>>>24&255&255)<<16|(pixel>>>16&255&255)<<8|pixel>>>8&255&255;return argb;case 2:var bgra=0;bgra=(pixel>>>8&255&255)<<24|(pixel>>>16&255&255)<<16|(pixel>>>24&255&255)<<8|pixel&255&255;return bgra;default:return pixel}};lime__$internal_graphics_ImageDataUtil.getPixels=function(image,rect,format){if(image.buffer.data==null){return null}var bytes=new haxe_io_Bytes(new ArrayBuffer((rect.width*rect.height|0)*4));var data=image.buffer.data;var sourceFormat=image.buffer.format;var premultiplied=image.buffer.premultiplied;var dataView=new lime__$internal_graphics__$ImageDataUtil_ImageDataView(image,rect);var position;var argb;var bgra;var pixel;var destPosition=0;var _g=0;var _g1=dataView.height;while(_g<_g1){position=dataView.byteOffset+dataView.stride*_g++;var _g2=0;var _g11=dataView.width;while(_g2<_g11){++_g2;var format1=sourceFormat;var premultiplied1=premultiplied;if(premultiplied==null){premultiplied1=false}if(sourceFormat==null){format1=0}switch(format1){case 0:pixel=(data[position]&255)<<24|(data[position+1]&255)<<16|(data[position+2]&255)<<8|data[position+3]&255;break;case 1:pixel=(data[position+1]&255)<<24|(data[position+2]&255)<<16|(data[position+3]&255)<<8|data[position]&255;break;case 2:pixel=(data[position+2]&255)<<24|(data[position+1]&255)<<16|(data[position]&255)<<8|data[position+3]&255;break}if(premultiplied1){if((pixel&255)!=0&&(pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(pixel&255);pixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|pixel&255&255}}switch(format){case 1:var argb1=0;argb1=(pixel&255&255)<<24|(pixel>>>24&255&255)<<16|(pixel>>>16&255&255)<<8|pixel>>>8&255&255;argb=argb1;pixel=argb;break;case 2:var bgra1=0;bgra1=(pixel>>>8&255&255)<<24|(pixel>>>16&255&255)<<16|(pixel>>>24&255&255)<<8|pixel&255&255;bgra=bgra1;pixel=bgra;break;default:}bytes.b[destPosition++]=pixel>>>24&255&255;bytes.b[destPosition++]=pixel>>>16&255&255;bytes.b[destPosition++]=pixel>>>8&255&255;bytes.b[destPosition++]=pixel&255&255;position+=4}}return bytes};lime__$internal_graphics_ImageDataUtil.multiplyAlpha=function(image){var data=image.buffer.data;if(data==null||!image.buffer.transparent){return}var format=image.buffer.format;var length=data.length/4|0;var pixel;var _g=0;while(_g<length){var i=_g++;var offset=i*4;var format1=format;if(format==null){format1=0}switch(format1){case 0:pixel=(data[offset]&255)<<24|(data[offset+1]&255)<<16|(data[offset+2]&255)<<8|data[offset+3]&255;break;case 1:pixel=(data[offset+1]&255)<<24|(data[offset+2]&255)<<16|(data[offset+3]&255)<<8|data[offset]&255;break;case 2:pixel=(data[offset+2]&255)<<24|(data[offset+1]&255)<<16|(data[offset]&255)<<8|data[offset+3]&255;break}var offset1=i*4;var format2=format;if(format==null){format2=0}if((pixel&255)==0){if(pixel!=0){pixel=0}}else if((pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[pixel&255];pixel=((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|pixel&255&255}switch(format2){case 0:data[offset1]=pixel>>>24&255;data[offset1+1]=pixel>>>16&255;data[offset1+2]=pixel>>>8&255;data[offset1+3]=pixel&255;break;case 1:data[offset1]=pixel&255;data[offset1+1]=pixel>>>24&255;data[offset1+2]=pixel>>>16&255;data[offset1+3]=pixel>>>8&255;break;case 2:data[offset1]=pixel>>>8&255;data[offset1+1]=pixel>>>16&255;data[offset1+2]=pixel>>>24&255;data[offset1+3]=pixel&255;break}}image.buffer.premultiplied=true;image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.setFormat=function(image,format){var data=image.buffer.data;if(data==null){return}var index;var length=data.length/4|0;var r1;var g1;var b1;var a1;var r2;var g2;var b2;var a2;var r;var g;var b;var a;switch(image.get_format()){case 0:r1=0;g1=1;b1=2;a1=3;break;case 1:r1=1;g1=2;b1=3;a1=0;break;case 2:r1=2;g1=1;b1=0;a1=3;break}switch(format){case 0:r2=0;g2=1;b2=2;a2=3;break;case 1:r2=1;g2=2;b2=3;a2=0;break;case 2:r2=2;g2=1;b2=0;a2=3;break}var _g1=0;while(_g1<length){index=_g1++*4;r=data[index+r1];g=data[index+g1];b=data[index+b1];a=data[index+a1];data[index+r2]=r;data[index+g2]=g;data[index+b2]=b;data[index+a2]=a}image.buffer.format=format;image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.setPixel32=function(image,x,y,color,format){var pixel;switch(format){case 1:var argb=color;var rgba=0;rgba=(argb>>>16&255&255)<<24|(argb>>>8&255&255)<<16|(argb&255&255)<<8|argb>>>24&255&255;pixel=rgba;break;case 2:var bgra=color;var rgba1=0;rgba1=(bgra>>>8&255&255)<<24|(bgra>>>16&255&255)<<16|(bgra>>>24&255&255)<<8|bgra&255&255;pixel=rgba1;break;default:pixel=color}if(!image.get_transparent()){pixel=(pixel>>>24&255&255)<<24|(pixel>>>16&255&255)<<16|(pixel>>>8&255&255)<<8|255}var data=image.buffer.data;var offset=4*(y+image.offsetY)*image.buffer.width+(x+image.offsetX)*4;var format1=image.buffer.format;var premultiplied=image.buffer.premultiplied;if(premultiplied==null){premultiplied=false}if(format1==null){format1=0}if(premultiplied){if((pixel&255)==0){if(pixel!=0){pixel=0}}else if((pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[pixel&255];pixel=((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|pixel&255&255}}switch(format1){case 0:data[offset]=pixel>>>24&255;data[offset+1]=pixel>>>16&255;data[offset+2]=pixel>>>8&255;data[offset+3]=pixel&255;break;case 1:data[offset]=pixel&255;data[offset+1]=pixel>>>24&255;data[offset+2]=pixel>>>16&255;data[offset+3]=pixel>>>8&255;break;case 2:data[offset]=pixel>>>8&255;data[offset+1]=pixel>>>16&255;data[offset+2]=pixel>>>24&255;data[offset+3]=pixel&255;break}image.dirty=true;image.version++};lime__$internal_graphics_ImageDataUtil.unmultiplyAlpha=function(image){var data=image.buffer.data;if(data==null){return}var format=image.buffer.format;var length=data.length/4|0;var pixel;var _g=0;while(_g<length){var i=_g++;var offset=i*4;var format1=format;if(format==null){format1=0}switch(format1){case 0:pixel=(data[offset]&255)<<24|(data[offset+1]&255)<<16|(data[offset+2]&255)<<8|data[offset+3]&255;break;case 1:pixel=(data[offset+1]&255)<<24|(data[offset+2]&255)<<16|(data[offset+3]&255)<<8|data[offset]&255;break;case 2:pixel=(data[offset+2]&255)<<24|(data[offset+1]&255)<<16|(data[offset]&255)<<8|data[offset+3]&255;break}if((pixel&255)!=0&&(pixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(pixel&255);pixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((pixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|pixel&255&255}var offset1=i*4;var format2=format;if(format==null){format2=0}switch(format2){case 0:data[offset1]=pixel>>>24&255;data[offset1+1]=pixel>>>16&255;data[offset1+2]=pixel>>>8&255;data[offset1+3]=pixel&255;break;case 1:data[offset1]=pixel&255;data[offset1+1]=pixel>>>24&255;data[offset1+2]=pixel>>>16&255;data[offset1+3]=pixel>>>8&255;break;case 2:data[offset1]=pixel>>>8&255;data[offset1+1]=pixel>>>16&255;data[offset1+2]=pixel>>>24&255;data[offset1+3]=pixel&255;break}}image.buffer.premultiplied=false;image.dirty=true;image.version++};var lime__$internal_graphics__$ImageDataUtil_ImageDataView=function(image,rect){this.image=image;if(rect==null){this.rect=image.get_rect()}else{if(rect.x<0){rect.x=0}if(rect.y<0){rect.y=0}if(rect.x+rect.width>image.width){rect.width=image.width-rect.x}if(rect.y+rect.height>image.height){rect.height=image.height-rect.y}if(rect.width<0){rect.width=0}if(rect.height<0){rect.height=0}this.rect=rect}this.stride=image.buffer.get_stride();this.__update()};$hxClasses["lime._internal.graphics._ImageDataUtil.ImageDataView"]=lime__$internal_graphics__$ImageDataUtil_ImageDataView;lime__$internal_graphics__$ImageDataUtil_ImageDataView.__name__="lime._internal.graphics._ImageDataUtil.ImageDataView";lime__$internal_graphics__$ImageDataUtil_ImageDataView.prototype={x:null,y:null,height:null,width:null,byteOffset:null,image:null,rect:null,stride:null,tempRect:null,clip:function(x,y,width,height){if(this.tempRect==null){this.tempRect=new lime_math_Rectangle}this.tempRect.setTo(x,y,width,height);this.rect.intersection(this.tempRect,this.rect);this.__update()},__update:function(){this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.byteOffset=this.stride*(this.y+this.image.offsetY)+(this.x+this.image.offsetX)*4},__class__:lime__$internal_graphics__$ImageDataUtil_ImageDataView};var lime__$internal_graphics_StackBlur=function(){};$hxClasses["lime._internal.graphics.StackBlur"]=lime__$internal_graphics_StackBlur;lime__$internal_graphics_StackBlur.__name__="lime._internal.graphics.StackBlur";lime__$internal_graphics_StackBlur.blur=function(dest,source,sourceRect,destPoint,blurX,blurY,quality){dest.copyPixels(source,sourceRect,destPoint);lime__$internal_graphics_StackBlur.__stackBlurCanvasRGBA(dest,sourceRect.width|0,sourceRect.height|0,blurX,blurY,quality)};lime__$internal_graphics_StackBlur.__stackBlurCanvasRGBA=function(image,width,height,blurX,blurY,quality){var radiusX=Math.round(blurX)>>1;var radiusY=Math.round(blurY)>>1;if(lime__$internal_graphics_StackBlur.MUL_TABLE==null){return}if(radiusX>=lime__$internal_graphics_StackBlur.MUL_TABLE.length){radiusX=lime__$internal_graphics_StackBlur.MUL_TABLE.length-1}if(radiusY>=lime__$internal_graphics_StackBlur.MUL_TABLE.length){radiusY=lime__$internal_graphics_StackBlur.MUL_TABLE.length-1}if(radiusX<0||radiusY<0){return}var iterations=quality;if(quality<1){iterations=1}if(iterations>3){iterations=3}var px=image.get_data();var y;var i;var p;var yp;var yi;var yw;var r;var g;var b;var a;var pr;var pg;var pb;var pa;var f;var divx=radiusX+radiusX+1;var divy=radiusY+radiusY+1;var w1=width-1;var h1=height-1;var rxp1=radiusX+1;var ryp1=radiusY+1;var ssx=new lime__$internal_graphics_BlurStack;var sx=ssx;var _g=1;while(_g<divx){++_g;sx=sx.n=new lime__$internal_graphics_BlurStack}sx.n=ssx;var ssy=new lime__$internal_graphics_BlurStack;var sy=ssy;var _g2=1;while(_g2<divy){++_g2;sy=sy.n=new lime__$internal_graphics_BlurStack}sy.n=ssy;var si=null;var mtx=lime__$internal_graphics_StackBlur.MUL_TABLE[radiusX];var stx=lime__$internal_graphics_StackBlur.SHG_TABLE[radiusX];var mty=lime__$internal_graphics_StackBlur.MUL_TABLE[radiusY];var sty=lime__$internal_graphics_StackBlur.SHG_TABLE[radiusY];while(iterations>0){--iterations;yi=0;yw=0;y=height;while(true){pr=px[yi];r=rxp1*pr;pg=px[yi+1];g=rxp1*pg;pb=px[yi+2];b=rxp1*pb;pa=px[yi+3];a=rxp1*pa;sx=ssx;i=rxp1;while(true){sx.r=pr;sx.g=pg;sx.b=pb;sx.a=pa;sx=sx.n;if(!(--i>-1)){break}}var _g4=1;while(_g4<rxp1){var i1=_g4++;p=yi+((w1<i1?w1:i1)<<2);r+=sx.r=px[p];g+=sx.g=px[p+1];b+=sx.b=px[p+2];a+=sx.a=px[p+3];sx=sx.n}si=ssx;var _g6=0;while(_g6<width){px[yi++]=r*mtx>>>stx;px[yi++]=g*mtx>>>stx;px[yi++]=b*mtx>>>stx;px[yi++]=a*mtx>>>stx;p=_g6+++radiusX+1;p=yw+(p<w1?p:w1)<<2;r-=si.r-(si.r=px[p]);g-=si.g-(si.g=px[p+1]);b-=si.b-(si.b=px[p+2]);a-=si.a-(si.a=px[p+3]);si=si.n}yw+=width;if(!(--y>0)){break}}var _g41=0;while(_g41<width){var x=_g41++;yi=x<<2;pr=px[yi];r=ryp1*pr;pg=px[yi+1];g=ryp1*pg;pb=px[yi+2];b=ryp1*pb;pa=px[yi+3];a=ryp1*pa;sy=ssy;var _g42=0;while(_g42<ryp1){++_g42;sy.r=pr;sy.g=pg;sy.b=pb;sy.a=pa;sy=sy.n}yp=width;var _g61=1;var _g7=radiusY+1;while(_g61<_g7){yi=yp+x<<2;r+=sy.r=px[yi];g+=sy.g=px[yi+1];b+=sy.b=px[yi+2];a+=sy.a=px[yi+3];sy=sy.n;if(_g61++<h1){yp+=width}}yi=x;si=ssy;if(iterations>0){var _g8=0;while(_g8<height){var y1=_g8++;p=yi<<2;pa=a*mty>>>sty;px[p+3]=pa;if(pa>0){px[p]=r*mty>>>sty;px[p+1]=g*mty>>>sty;px[p+2]=b*mty>>>sty}else{px[p]=px[p+1]=px[p+2]=0}p=y1+ryp1;p=x+(p<h1?p:h1)*width<<2;r-=si.r-(si.r=px[p]);g-=si.g-(si.g=px[p+1]);b-=si.b-(si.b=px[p+2]);a-=si.a-(si.a=px[p+3]);si=si.n;yi+=width}}else{var _g81=0;while(_g81<height){var y2=_g81++;p=yi<<2;pa=a*mty>>>sty;px[p+3]=pa;if(pa>0){f=255/pa;pr=(r*mty>>>sty)*f|0;pg=(g*mty>>>sty)*f|0;pb=(b*mty>>>sty)*f|0;px[p]=pr>255?255:pr;px[p+1]=pg>255?255:pg;px[p+2]=pb>255?255:pb}else{px[p]=px[p+1]=px[p+2]=0}p=y2+ryp1;p=x+(p<h1?p:h1)*width<<2;r-=si.r-(si.r=px[p]);g-=si.g-(si.g=px[p+1]);b-=si.b-(si.b=px[p+2]);a-=si.a-(si.a=px[p+3]);si=si.n;yi+=width}}}}};var lime__$internal_graphics_BlurStack=function(){this.r=0;this.g=0;this.b=0;this.a=0;this.n=null};$hxClasses["lime._internal.graphics.BlurStack"]=lime__$internal_graphics_BlurStack;lime__$internal_graphics_BlurStack.__name__="lime._internal.graphics.BlurStack";lime__$internal_graphics_BlurStack.prototype={r:null,g:null,b:null,a:null,n:null,__class__:lime__$internal_graphics_BlurStack};var lime_app_Future=function(work,async){if(async==null){async=false}if(work!=null){if(async){var promise=new lime_app_Promise;promise.future=this;lime_app__$Future_FutureWork.queue({promise:promise,work:work})}else{try{this.value=work();this.isComplete=true}catch(e){haxe_CallStack.lastException=e;this.error=e instanceof js__$Boot_HaxeError?e.val:e;this.isError=true}}}};$hxClasses["lime.app.Future"]=lime_app_Future;lime_app_Future.__name__="lime.app.Future";lime_app_Future.withValue=function(value){var future=new lime_app_Future;future.isComplete=true;future.value=value;return future};lime_app_Future.prototype={error:null,isComplete:null,isError:null,value:null,__completeListeners:null,__errorListeners:null,__progressListeners:null,onComplete:function(listener){if(listener!=null){if(this.isComplete){listener(this.value)}else if(!this.isError){if(this.__completeListeners==null){this.__completeListeners=[]}this.__completeListeners.push(listener)}}return this},onError:function(listener){if(listener!=null){if(this.isError){listener(this.error)}else if(!this.isComplete){if(this.__errorListeners==null){this.__errorListeners=[]}this.__errorListeners.push(listener)}}return this},onProgress:function(listener){if(listener!=null){if(this.__progressListeners==null){this.__progressListeners=[]}this.__progressListeners.push(listener)}return this},then:function(next){if(this.isComplete){return next(this.value)}else if(this.isError){var future=new lime_app_Future;future.isError=true;future.error=this.error;return future}else{var promise=new lime_app_Promise;this.onError($bind(promise,promise.error));this.onProgress($bind(promise,promise.progress));this.onComplete(function(val){var future1=next(val);future1.onError($bind(promise,promise.error));future1.onComplete($bind(promise,promise.complete))});return promise.future}},__class__:lime_app_Future};var lime_app__$Future_FutureWork=function(){};$hxClasses["lime.app._Future.FutureWork"]=lime_app__$Future_FutureWork;lime_app__$Future_FutureWork.__name__="lime.app._Future.FutureWork";lime_app__$Future_FutureWork.queue=function(state){if(lime_app__$Future_FutureWork.threadPool==null){lime_app__$Future_FutureWork.threadPool=new lime_system_ThreadPool;lime_app__$Future_FutureWork.threadPool.doWork.add(lime_app__$Future_FutureWork.threadPool_doWork);lime_app__$Future_FutureWork.threadPool.onComplete.add(lime_app__$Future_FutureWork.threadPool_onComplete);lime_app__$Future_FutureWork.threadPool.onError.add(lime_app__$Future_FutureWork.threadPool_onError)}lime_app__$Future_FutureWork.threadPool.queue(state)};lime_app__$Future_FutureWork.threadPool_doWork=function(state){try{var result=state.work();lime_app__$Future_FutureWork.threadPool.sendComplete({promise:state.promise,result:result})}catch(e){haxe_CallStack.lastException=e;lime_app__$Future_FutureWork.threadPool.sendError({promise:state.promise,error:e instanceof js__$Boot_HaxeError?e.val:e})}};lime_app__$Future_FutureWork.threadPool_onComplete=function(state){state.promise.complete(state.result)};lime_app__$Future_FutureWork.threadPool_onError=function(state){state.promise.error(state.error)};var lime_app_Promise=function(){this.future=new lime_app_Future};$hxClasses["lime.app.Promise"]=lime_app_Promise;lime_app_Promise.__name__="lime.app.Promise";lime_app_Promise.prototype={future:null,complete:function(data){if(!this.future.isError){this.future.isComplete=true;this.future.value=data;if(this.future.__completeListeners!=null){var _g=0;var _g1=this.future.__completeListeners;while(_g<_g1.length)_g1[_g++](data);this.future.__completeListeners=null}}return this},completeWith:function(future){future.onComplete($bind(this,this.complete));future.onError($bind(this,this.error));future.onProgress($bind(this,this.progress));return this},error:function(msg){if(!this.future.isComplete){this.future.isError=true;this.future.error=msg;if(this.future.__errorListeners!=null){var _g=0;var _g1=this.future.__errorListeners;while(_g<_g1.length)_g1[_g++](msg);this.future.__errorListeners=null}}return this},progress:function(progress,total){if(!this.future.isError&&!this.future.isComplete){if(this.future.__progressListeners!=null){var _g=0;var _g1=this.future.__progressListeners;while(_g<_g1.length)_g1[_g++](progress,total)}}return this},__class__:lime_app_Promise};var lime_app__$Event_$Dynamic_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Dynamic_Void"]=lime_app__$Event_$Dynamic_$Void;lime_app__$Event_$Dynamic_$Void.__name__="lime.app._Event_Dynamic_Void";lime_app__$Event_$Dynamic_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Dynamic_$Void};var lime_app__$Event_$Float_$Float_$Float_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Float_Float_Float_Void"]=lime_app__$Event_$Float_$Float_$Float_$Void;lime_app__$Event_$Float_$Float_$Float_$Void.__name__="lime.app._Event_Float_Float_Float_Void";lime_app__$Event_$Float_$Float_$Float_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1,a2){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1,a2);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Float_$Float_$Float_$Void};var lime_app__$Event_$Float_$Float_$Int_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Float_Float_Int_Void"]=lime_app__$Event_$Float_$Float_$Int_$Void;lime_app__$Event_$Float_$Float_$Int_$Void.__name__="lime.app._Event_Float_Float_Int_Void";lime_app__$Event_$Float_$Float_$Int_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},cancel:function(){this.canceled=true},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1,a2){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1,a2);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Float_$Float_$Int_$Void};var lime_app__$Event_$Float_$Float_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Float_Float_Void"]=lime_app__$Event_$Float_$Float_$Void;lime_app__$Event_$Float_$Float_$Void.__name__="lime.app._Event_Float_Float_Void";lime_app__$Event_$Float_$Float_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Float_$Float_$Void};var lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Float_Float_lime_ui_MouseButton_Void"]=lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void;lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void.__name__="lime.app._Event_Float_Float_lime_ui_MouseButton_Void";lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},cancel:function(){this.canceled=true},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1,a2){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1,a2);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void};var lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void"]=lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void;lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void.__name__="lime.app._Event_Float_Float_lime_ui_MouseWheelMode_Void";lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1,a2){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1,a2);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void};var lime_app__$Event_$Int_$Float_$Float_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Int_Float_Float_Void"]=lime_app__$Event_$Int_$Float_$Float_$Void;lime_app__$Event_$Int_$Float_$Float_$Void.__name__="lime.app._Event_Int_Float_Float_Void";lime_app__$Event_$Int_$Float_$Float_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},__listeners:null,__class__:lime_app__$Event_$Int_$Float_$Float_$Void};var lime_app__$Event_$Int_$Float_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Int_Float_Void"]=lime_app__$Event_$Int_$Float_$Void;lime_app__$Event_$Int_$Float_$Void.__name__="lime.app._Event_Int_Float_Void";lime_app__$Event_$Int_$Float_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Int_$Float_$Void};var lime_app__$Event_$Int_$Int_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Int_Int_Void"]=lime_app__$Event_$Int_$Int_$Void;lime_app__$Event_$Int_$Int_$Void.__name__="lime.app._Event_Int_Int_Void";lime_app__$Event_$Int_$Int_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Int_$Int_$Void};var lime_app__$Event_$Int_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Int_Void"]=lime_app__$Event_$Int_$Void;lime_app__$Event_$Int_$Void.__name__="lime.app._Event_Int_Void";lime_app__$Event_$Int_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Int_$Void};var lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Int_lime_ui_JoystickHatPosition_Void"]=lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void;lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void.__name__="lime.app._Event_Int_lime_ui_JoystickHatPosition_Void";lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},__listeners:null,__class__:lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void};var lime_app__$Event_$String_$Int_$Int_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_String_Int_Int_Void"]=lime_app__$Event_$String_$Int_$Int_$Void;lime_app__$Event_$String_$Int_$Int_$Void.__name__="lime.app._Event_String_Int_Int_Void";lime_app__$Event_$String_$Int_$Int_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},__listeners:null,__class__:lime_app__$Event_$String_$Int_$Int_$Void};var lime_app__$Event_$String_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_String_Void"]=lime_app__$Event_$String_$Void;lime_app__$Event_$String_$Void.__name__="lime.app._Event_String_Void";lime_app__$Event_$String_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},cancel:function(){this.canceled=true},has:function(listener){var _g=0;var _g1=this.__listeners;while(_g<_g1.length)if(Reflect.compareMethods(_g1[_g++],listener)){return true}return false},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$String_$Void};var lime_app__$Event_$Void_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_Void_Void"]=lime_app__$Event_$Void_$Void;lime_app__$Event_$Void_$Void.__name__="lime.app._Event_Void_Void";lime_app__$Event_$Void_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i]();if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$Void_$Void};var lime_app__$Event_$lime_$graphics_$RenderContext_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_graphics_RenderContext_Void"]=lime_app__$Event_$lime_$graphics_$RenderContext_$Void;lime_app__$Event_$lime_$graphics_$RenderContext_$Void.__name__="lime.app._Event_lime_graphics_RenderContext_Void";lime_app__$Event_$lime_$graphics_$RenderContext_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},cancel:function(){this.canceled=true},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$graphics_$RenderContext_$Void};var lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_GamepadAxis_Float_Void"]=lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void;lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void.__name__="lime.app._Event_lime_ui_GamepadAxis_Float_Void";lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void};var lime_app__$Event_$lime_$ui_$GamepadButton_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_GamepadButton_Void"]=lime_app__$Event_$lime_$ui_$GamepadButton_$Void;lime_app__$Event_$lime_$ui_$GamepadButton_$Void.__name__="lime.app._Event_lime_ui_GamepadButton_Void";lime_app__$Event_$lime_$ui_$GamepadButton_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$GamepadButton_$Void};var lime_app__$Event_$lime_$ui_$Gamepad_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_Gamepad_Void"]=lime_app__$Event_$lime_$ui_$Gamepad_$Void;lime_app__$Event_$lime_$ui_$Gamepad_$Void.__name__="lime.app._Event_lime_ui_Gamepad_Void";lime_app__$Event_$lime_$ui_$Gamepad_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$Gamepad_$Void};var lime_app__$Event_$lime_$ui_$Joystick_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_Joystick_Void"]=lime_app__$Event_$lime_$ui_$Joystick_$Void;lime_app__$Event_$lime_$ui_$Joystick_$Void.__name__="lime.app._Event_lime_ui_Joystick_Void";lime_app__$Event_$lime_$ui_$Joystick_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$Joystick_$Void};var lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void;lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void.__name__="lime.app._Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void";lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},cancel:function(){this.canceled=true},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a,a1){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a,a1);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void};var lime_app__$Event_$lime_$ui_$Touch_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_Touch_Void"]=lime_app__$Event_$lime_$ui_$Touch_$Void;lime_app__$Event_$lime_$ui_$Touch_$Void.__name__="lime.app._Event_lime_ui_Touch_Void";lime_app__$Event_$lime_$ui_$Touch_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$Touch_$Void};var lime_app__$Event_$lime_$ui_$Window_$Void=function(){this.canceled=false;this.__listeners=[];this.__priorities=[];this.__repeat=[]};$hxClasses["lime.app._Event_lime_ui_Window_Void"]=lime_app__$Event_$lime_$ui_$Window_$Void;lime_app__$Event_$lime_$ui_$Window_$Void.__name__="lime.app._Event_lime_ui_Window_Void";lime_app__$Event_$lime_$ui_$Window_$Void.prototype={canceled:null,__repeat:null,__priorities:null,add:function(listener,once,priority){if(priority==null){priority=0}if(once==null){once=false}var _g=0;var _g1=this.__priorities.length;while(_g<_g1){var i=_g++;if(priority>this.__priorities[i]){this.__listeners.splice(i,0,listener);this.__priorities.splice(i,0,priority);this.__repeat.splice(i,0,!once);return}}this.__listeners.push(listener);this.__priorities.push(priority);this.__repeat.push(!once)},remove:function(listener){var i=this.__listeners.length;while(--i>=0)if(Reflect.compareMethods(this.__listeners[i],listener)){this.__listeners.splice(i,1);this.__priorities.splice(i,1);this.__repeat.splice(i,1)}},__listeners:null,dispatch:function(a){this.canceled=false;var listeners=this.__listeners;var repeat=this.__repeat;var i=0;while(i<listeners.length){listeners[i](a);if(!repeat[i]){this.remove(listeners[i])}else{++i}if(this.canceled){break}}},__class__:lime_app__$Event_$lime_$ui_$Window_$Void};var lime_graphics_Image=function(buffer,offsetX,offsetY,width,height,color,type){if(height==null){height=-1}if(width==null){width=-1}if(offsetY==null){offsetY=0}if(offsetX==null){offsetX=0}this.offsetX=offsetX;this.offsetY=offsetY;this.width=width;this.height=height;this.version=0;if(type==null){type=lime_graphics_ImageType.CANVAS}this.type=type;if(buffer==null){if(width>0&&height>0){switch(this.type._hx_index){case 0:this.buffer=new lime_graphics_ImageBuffer(null,width,height);lime__$internal_graphics_ImageCanvasUtil.createCanvas(this,width,height);if(color!=null&&color!=0){this.fillRect(new lime_math_Rectangle(0,0,width,height),color)}break;case 1:var elements=width*height*4;var this1;if(elements!=null){this1=new Uint8Array(elements)}else{this1=null}this.buffer=new lime_graphics_ImageBuffer(this1,width,height);if(color!=null&&color!=0){this.fillRect(new lime_math_Rectangle(0,0,width,height),color)}break;case 2:break;default:}}}else{this.__fromImageBuffer(buffer)}};$hxClasses["lime.graphics.Image"]=lime_graphics_Image;lime_graphics_Image.__name__="lime.graphics.Image";lime_graphics_Image.fromCanvas=function(canvas){if(canvas==null){return null}var buffer=new lime_graphics_ImageBuffer(null,canvas.width,canvas.height);buffer.set_src(canvas);var image=new lime_graphics_Image(buffer);image.type=lime_graphics_ImageType.CANVAS;return image};lime_graphics_Image.fromFile=function(path){if(path==null){return null}var image=new lime_graphics_Image;if(image.__fromFile(path)){return image}else{return null}};lime_graphics_Image.loadFromBase64=function(base64,type){if(base64==null||type==null){return lime_app_Future.withValue(null)}return lime__$internal_backend_html5_HTML5HTTPRequest.loadImage("data:"+type+";base64,"+base64)};lime_graphics_Image.loadFromBytes=function(bytes){if(bytes==null){return lime_app_Future.withValue(null)}var type="";if(lime_graphics_Image.__isPNG(bytes)){type="image/png"}else if(lime_graphics_Image.__isJPG(bytes)){type="image/jpeg"}else if(lime_graphics_Image.__isGIF(bytes)){type="image/gif"}else if(lime_graphics_Image.__isWebP(bytes)){type="image/webp"}else{return lime_app_Future.withValue(null)}return lime__$internal_backend_html5_HTML5HTTPRequest.loadImageFromBytes(bytes,type)};lime_graphics_Image.loadFromFile=function(path){if(path==null){return lime_app_Future.withValue(null)}return lime__$internal_backend_html5_HTML5HTTPRequest.loadImage(path)};lime_graphics_Image.__isGIF=function(bytes){if(bytes==null||bytes.length<6){return false}var header=bytes.getString(0,6);if(header!="GIF87a"){return header=="GIF89a"}else{return true}};lime_graphics_Image.__isJPG=function(bytes){if(bytes==null||bytes.length<4){return false}if(bytes.b[0]==255&&bytes.b[1]==216&&bytes.b[bytes.length-2]==255){return bytes.b[bytes.length-1]==217}else{return false}};lime_graphics_Image.__isPNG=function(bytes){if(bytes==null||bytes.length<8){return false}if(bytes.b[0]==137&&bytes.b[1]==80&&bytes.b[2]==78&&bytes.b[3]==71&&bytes.b[4]==13&&bytes.b[5]==10&&bytes.b[6]==26){return bytes.b[7]==10}else{return false}};lime_graphics_Image.__isWebP=function(bytes){if(bytes==null||bytes.length<16){return false}if(bytes.getString(0,4)=="RIFF"){return bytes.getString(8,4)=="WEBP"}else{return false}};lime_graphics_Image.prototype={buffer:null,dirty:null,height:null,offsetX:null,offsetY:null,rect:null,type:null,version:null,width:null,clone:function(){if(this.buffer!=null){if(this.type==lime_graphics_ImageType.CANVAS){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(this)}else{lime__$internal_graphics_ImageCanvasUtil.convertToData(this)}var image=new lime_graphics_Image(this.buffer.clone(),this.offsetX,this.offsetY,this.width,this.height,null,this.type);image.version=this.version;return image}else{return new lime_graphics_Image(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)}},colorTransform:function(rect,colorMatrix){rect=this.__clipRect(rect);if(this.buffer==null||rect==null){return}switch(this.type._hx_index){case 0:lime__$internal_graphics_ImageCanvasUtil.colorTransform(this,rect,colorMatrix);break;case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageDataUtil.colorTransform(this,rect,colorMatrix);break;case 2:rect.offset(this.offsetX,this.offsetY);this.buffer.__srcBitmapData.colorTransform(rect.__toFlashRectangle(),lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__toFlashColorTransform(colorMatrix));break;default:}},copyChannel:function(sourceImage,sourceRect,destPoint,sourceChannel,destChannel){sourceRect=this.__clipRect(sourceRect);if(this.buffer==null||sourceRect==null){return}if(destChannel==lime_graphics_ImageChannel.ALPHA&&!this.get_transparent()){return}if(sourceRect.width<=0||sourceRect.height<=0){return}if(sourceRect.x+sourceRect.width>sourceImage.width){sourceRect.width=sourceImage.width-sourceRect.x}if(sourceRect.y+sourceRect.height>sourceImage.height){sourceRect.height=sourceImage.height-sourceRect.y}switch(this.type._hx_index){case 0:lime__$internal_graphics_ImageCanvasUtil.copyChannel(this,sourceImage,sourceRect,destPoint,sourceChannel,destChannel);break;case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageCanvasUtil.convertToData(sourceImage);lime__$internal_graphics_ImageDataUtil.copyChannel(this,sourceImage,sourceRect,destPoint,sourceChannel,destChannel);break;case 2:var srcChannel;switch(sourceChannel._hx_index){case 0:srcChannel=1;break;case 1:srcChannel=2;break;case 2:srcChannel=4;break;case 3:srcChannel=8;break}var dstChannel;switch(destChannel._hx_index){case 0:dstChannel=1;break;case 1:dstChannel=2;break;case 2:dstChannel=4;break;case 3:dstChannel=8;break}sourceRect.offset(sourceImage.offsetX,sourceImage.offsetY);destPoint.offset(this.offsetX,this.offsetY);this.buffer.__srcBitmapData.copyChannel(sourceImage.buffer.get_src(),sourceRect.__toFlashRectangle(),destPoint.__toFlashPoint(),srcChannel,dstChannel);break;default:}},copyPixels:function(sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha){if(mergeAlpha==null){mergeAlpha=false}if(this.buffer==null||sourceImage==null){return}if(sourceRect.width<=0||sourceRect.height<=0){return}if(this.width<=0||this.height<=0){return}if(sourceRect.x+sourceRect.width>sourceImage.width){sourceRect.width=sourceImage.width-sourceRect.x}if(sourceRect.y+sourceRect.height>sourceImage.height){sourceRect.height=sourceImage.height-sourceRect.y}if(sourceRect.x<0){sourceRect.width+=sourceRect.x;sourceRect.x=0}if(sourceRect.y<0){sourceRect.height+=sourceRect.y;sourceRect.y=0}if(destPoint.x+sourceRect.width>this.width){sourceRect.width=this.width-destPoint.x}if(destPoint.y+sourceRect.height>this.height){sourceRect.height=this.height-destPoint.y}if(destPoint.x<0){sourceRect.width+=destPoint.x;sourceRect.x-=destPoint.x;destPoint.x=0}if(destPoint.y<0){sourceRect.height+=destPoint.y;sourceRect.y-=destPoint.y;destPoint.y=0}if(sourceImage==this&&destPoint.x<sourceRect.get_right()&&destPoint.y<sourceRect.get_bottom()){sourceImage=this.clone()}if(alphaImage==sourceImage&&(alphaPoint==null||alphaPoint.x==0&&alphaPoint.y==0)){alphaImage=null;alphaPoint=null}switch(this.type._hx_index){case 0:if(alphaImage!=null){lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageCanvasUtil.convertToData(sourceImage);if(alphaImage!=null){lime__$internal_graphics_ImageCanvasUtil.convertToData(alphaImage)}lime__$internal_graphics_ImageDataUtil.copyPixels(this,sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha)}else{lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(this);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(sourceImage);lime__$internal_graphics_ImageCanvasUtil.copyPixels(this,sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha)}break;case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageCanvasUtil.convertToData(sourceImage);if(alphaImage!=null){lime__$internal_graphics_ImageCanvasUtil.convertToData(alphaImage)}lime__$internal_graphics_ImageDataUtil.copyPixels(this,sourceImage,sourceRect,destPoint,alphaImage,alphaPoint,mergeAlpha);break;case 2:sourceRect.offset(sourceImage.offsetX,sourceImage.offsetY);destPoint.offset(this.offsetX,this.offsetY);if(alphaImage!=null&&alphaPoint!=null){alphaPoint.offset(alphaImage.offsetX,alphaImage.offsetY)}this.buffer.__srcBitmapData.copyPixels(sourceImage.buffer.__srcBitmapData,sourceRect.__toFlashRectangle(),destPoint.__toFlashPoint(),alphaImage!=null?alphaImage.buffer.get_src():null,alphaPoint!=null?alphaPoint.__toFlashPoint():null,mergeAlpha);break;default:}},fillRect:function(rect,color,format){rect=this.__clipRect(rect);if(this.buffer==null||rect==null){return}switch(this.type._hx_index){case 0:lime__$internal_graphics_ImageCanvasUtil.fillRect(this,rect,color,format);break;case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);if(this.buffer.data.length==0){return}lime__$internal_graphics_ImageDataUtil.fillRect(this,rect,color,format);break;case 2:rect.offset(this.offsetX,this.offsetY);var argb;if(format==null){var rgba=color;var argb1=0;argb1=(rgba&255&255)<<24|(rgba>>>24&255&255)<<16|(rgba>>>16&255&255)<<8|rgba>>>8&255&255;argb=argb1}else{switch(format){case 1:argb=color;break;case 2:var bgra=color;var argb2=0;argb2=(bgra&255&255)<<24|(bgra>>>8&255&255)<<16|(bgra>>>16&255&255)<<8|bgra>>>24&255&255;argb=argb2;break;default:var rgba1=color;var argb3=0;argb3=(rgba1&255&255)<<24|(rgba1>>>24&255&255)<<16|(rgba1>>>16&255&255)<<8|rgba1>>>8&255&255;argb=argb3}}this.buffer.__srcBitmapData.fillRect(rect.__toFlashRectangle(),argb);break;default:}},getPixel32:function(x,y,format){if(this.buffer==null||x<0||y<0||x>=this.width||y>=this.height){return 0}switch(this.type._hx_index){case 0:return lime__$internal_graphics_ImageCanvasUtil.getPixel32(this,x,y,format);case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);return lime__$internal_graphics_ImageDataUtil.getPixel32(this,x,y,format);case 2:var color=this.buffer.__srcBitmapData.getPixel32(x+this.offsetX,y+this.offsetY);if(format==null){var rgba=0;rgba=(color>>>16&255&255)<<24|(color>>>8&255&255)<<16|(color&255&255)<<8|color>>>24&255&255;return rgba}else{switch(format){case 1:return color;case 2:var bgra=0;bgra=(color&255&255)<<24|(color>>>8&255&255)<<16|(color>>>16&255&255)<<8|color>>>24&255&255;return bgra;default:var rgba1=0;rgba1=(color>>>16&255&255)<<24|(color>>>8&255&255)<<16|(color&255&255)<<8|color>>>24&255&255;return rgba1}}break;default:return 0}},getPixels:function(rect,format){if(this.buffer==null){return null}switch(this.type._hx_index){case 0:return lime__$internal_graphics_ImageCanvasUtil.getPixels(this,rect,format);case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);return lime__$internal_graphics_ImageDataUtil.getPixels(this,rect,format);case 2:return null;default:return null}},setPixel32:function(x,y,color,format){if(this.buffer==null||x<0||y<0||x>=this.width||y>=this.height){return}switch(this.type._hx_index){case 0:lime__$internal_graphics_ImageCanvasUtil.setPixel32(this,x,y,color,format);break;case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageDataUtil.setPixel32(this,x,y,color,format);break;case 2:var argb;if(format==null){var rgba=color;var argb1=0;argb1=(rgba&255&255)<<24|(rgba>>>24&255&255)<<16|(rgba>>>16&255&255)<<8|rgba>>>8&255&255;argb=argb1}else{switch(format){case 1:argb=color;break;case 2:var bgra=color;var argb2=0;argb2=(bgra&255&255)<<24|(bgra>>>8&255&255)<<16|(bgra>>>16&255&255)<<8|bgra>>>24&255&255;argb=argb2;break;default:var rgba1=color;var argb3=0;argb3=(rgba1&255&255)<<24|(rgba1>>>24&255&255)<<16|(rgba1>>>16&255&255)<<8|rgba1>>>8&255&255;argb=argb3}}this.buffer.__srcBitmapData.setPixel32(x+this.offsetX,y+this.offsetY,argb);break;default:}},__clipRect:function(r){if(r==null){return null}if(r.x<0){r.width-=-r.x;r.x=0;if(r.x+r.width<=0){return null}}if(r.y<0){r.height-=-r.y;r.y=0;if(r.y+r.height<=0){return null}}if(r.x+r.width>=this.width){r.width-=r.x+r.width-this.width;if(r.width<=0){return null}}if(r.y+r.height>=this.height){r.height-=r.y+r.height-this.height;if(r.height<=0){return null}}return r},__fromBase64:function(base64,type,onload){var _gthis=this;var image=new Image;var image_onLoaded=function(event){_gthis.buffer=new lime_graphics_ImageBuffer(null,image.width,image.height);_gthis.buffer.__srcImage=image;_gthis.offsetX=0;_gthis.offsetY=0;_gthis.width=_gthis.buffer.width;_gthis.height=_gthis.buffer.height;if(onload!=null){onload(_gthis)}};image.addEventListener("load",image_onLoaded,false);image.src="data:"+type+";base64,"+base64},__fromBytes:function(bytes,onload){var type="";if(lime_graphics_Image.__isPNG(bytes)){type="image/png"}else if(lime_graphics_Image.__isJPG(bytes)){type="image/jpeg"}else if(lime_graphics_Image.__isGIF(bytes)){type="image/gif"}else{return false}this.__fromBase64(lime__$internal_format_Base64.encode(bytes),type,onload);return true},__fromFile:function(path,onload,onerror){var _gthis=this;var image=new Image;if(!lime__$internal_backend_html5_HTML5HTTPRequest.__isSameOrigin(path)){image.crossOrigin="Anonymous"}image.onload=function(_){_gthis.buffer=new lime_graphics_ImageBuffer(null,image.width,image.height);_gthis.buffer.__srcImage=image;_gthis.width=image.width;_gthis.height=image.height;if(onload!=null){onload(_gthis)}};image.onerror=function(_1){if(onerror!=null){onerror()}};image.src=path;return true},__fromImageBuffer:function(buffer){this.buffer=buffer;if(buffer!=null){if(this.width==-1){this.width=buffer.width}if(this.height==-1){this.height=buffer.height}}},get_data:function(){if(this.buffer.data==null&&this.buffer.width>0&&this.buffer.height>0){lime__$internal_graphics_ImageCanvasUtil.convertToData(this)}return this.buffer.data},get_format:function(){return this.buffer.format},set_format:function(value){if(this.buffer.format!=value){if(this.type._hx_index==1){lime__$internal_graphics_ImageDataUtil.setFormat(this,value)}}return this.buffer.format=value},get_premultiplied:function(){return this.buffer.premultiplied},set_premultiplied:function(value){if(value&&!this.buffer.premultiplied){switch(this.type._hx_index){case 0:case 1:lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageDataUtil.multiplyAlpha(this);break;default:}}else if(!value&&this.buffer.premultiplied){if(this.type._hx_index==1){lime__$internal_graphics_ImageCanvasUtil.convertToData(this);lime__$internal_graphics_ImageDataUtil.unmultiplyAlpha(this)}}return value},get_rect:function(){return new lime_math_Rectangle(0,0,this.width,this.height)},get_src:function(){if(this.buffer.__srcCanvas==null&&(this.buffer.data!=null||this.type==lime_graphics_ImageType.DATA)){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(this)}return this.buffer.get_src()},get_transparent:function(){if(this.buffer==null){return false}return this.buffer.transparent},set_transparent:function(value){if(this.buffer==null){return false}return this.buffer.transparent=value},__class__:lime_graphics_Image,__properties__:{set_transparent:"set_transparent",get_transparent:"get_transparent",get_src:"get_src",get_rect:"get_rect",set_premultiplied:"set_premultiplied",get_premultiplied:"get_premultiplied",set_format:"set_format",get_format:"get_format",get_data:"get_data"}};var lime_graphics_ImageBuffer=function(data,width,height,bitsPerPixel,format){if(bitsPerPixel==null){bitsPerPixel=32}if(height==null){height=0}if(width==null){width=0}this.data=data;this.width=width;this.height=height;this.bitsPerPixel=bitsPerPixel;this.format=format==null?0:format;this.premultiplied=false;this.transparent=true};$hxClasses["lime.graphics.ImageBuffer"]=lime_graphics_ImageBuffer;lime_graphics_ImageBuffer.__name__="lime.graphics.ImageBuffer";lime_graphics_ImageBuffer.prototype={bitsPerPixel:null,data:null,format:null,height:null,premultiplied:null,transparent:null,width:null,__srcBitmapData:null,__srcCanvas:null,__srcContext:null,__srcImage:null,__srcImageData:null,clone:function(){var buffer=new lime_graphics_ImageBuffer(this.data,this.width,this.height,this.bitsPerPixel);if(this.data!=null){var elements=this.data.byteLength;var this1;if(elements!=null){this1=new Uint8Array(elements)}else{this1=null}buffer.data=this1;var view=this.data;var this2;if(view!=null){this2=new Uint8Array(view)}else{this2=null}buffer.data.set(this2)}else if(this.__srcImageData!=null){buffer.__srcCanvas=window.document.createElement("canvas");buffer.__srcContext=buffer.__srcCanvas.getContext("2d");buffer.__srcCanvas.width=this.__srcImageData.width;buffer.__srcCanvas.height=this.__srcImageData.height;buffer.__srcImageData=buffer.__srcContext.createImageData(this.__srcImageData.width,this.__srcImageData.height);buffer.__srcImageData.data.set(new Uint8ClampedArray(this.__srcImageData.data))}else if(this.__srcCanvas!=null){buffer.__srcCanvas=window.document.createElement("canvas");buffer.__srcContext=buffer.__srcCanvas.getContext("2d");buffer.__srcCanvas.width=this.__srcCanvas.width;buffer.__srcCanvas.height=this.__srcCanvas.height;buffer.__srcContext.drawImage(this.__srcCanvas,0,0)}else{buffer.__srcImage=this.__srcImage}buffer.bitsPerPixel=this.bitsPerPixel;buffer.format=this.format;buffer.premultiplied=this.premultiplied;buffer.transparent=this.transparent;return buffer},get_src:function(){if(this.__srcImage!=null){return this.__srcImage}return this.__srcCanvas},set_src:function(value){if(value instanceof Image){this.__srcImage=value}else if(value instanceof HTMLCanvasElement){this.__srcCanvas=value;this.__srcContext=this.__srcCanvas.getContext("2d")}return value},get_stride:function(){return this.width*(this.bitsPerPixel/8|0)},__class__:lime_graphics_ImageBuffer,__properties__:{get_stride:"get_stride",set_src:"set_src",get_src:"get_src"}};var lime_graphics_ImageChannel=$hxEnums["lime.graphics.ImageChannel"]={__ename__:"lime.graphics.ImageChannel",__constructs__:["RED","GREEN","BLUE","ALPHA"],RED:{_hx_index:0,__enum__:"lime.graphics.ImageChannel",toString:$estr},GREEN:{_hx_index:1,__enum__:"lime.graphics.ImageChannel",toString:$estr},BLUE:{_hx_index:2,__enum__:"lime.graphics.ImageChannel",toString:$estr},ALPHA:{_hx_index:3,__enum__:"lime.graphics.ImageChannel",toString:$estr}};var lime_graphics_ImageType=$hxEnums["lime.graphics.ImageType"]={__ename__:"lime.graphics.ImageType",__constructs__:["CANVAS","DATA","FLASH","CUSTOM"],CANVAS:{_hx_index:0,__enum__:"lime.graphics.ImageType",toString:$estr},DATA:{_hx_index:1,__enum__:"lime.graphics.ImageType",toString:$estr},FLASH:{_hx_index:2,__enum__:"lime.graphics.ImageType",toString:$estr},CUSTOM:{_hx_index:3,__enum__:"lime.graphics.ImageType",toString:$estr}};var lime_graphics_RenderContext=function(){};$hxClasses["lime.graphics.RenderContext"]=lime_graphics_RenderContext;lime_graphics_RenderContext.__name__="lime.graphics.RenderContext";lime_graphics_RenderContext.prototype={attributes:null,canvas2D:null,dom:null,type:null,version:null,webgl:null,webgl2:null,window:null,__class__:lime_graphics_RenderContext};var lime_graphics__$WebGL2RenderContext_WebGL2RenderContext_$Impl_$={};$hxClasses["lime.graphics._WebGL2RenderContext.WebGL2RenderContext_Impl_"]=lime_graphics__$WebGL2RenderContext_WebGL2RenderContext_$Impl_$;lime_graphics__$WebGL2RenderContext_WebGL2RenderContext_$Impl_$.__name__="lime.graphics._WebGL2RenderContext.WebGL2RenderContext_Impl_";lime_graphics__$WebGL2RenderContext_WebGL2RenderContext_$Impl_$.uniform2fv=function(this1,location,data,srcOffset,srcLength){if(srcOffset!=null){this1.uniform2fv(location,data,srcOffset,srcLength)}else{this1.uniform2fv(location,data)}};var lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$={};$hxClasses["lime.graphics._WebGLRenderContext.WebGLRenderContext_Impl_"]=lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$;lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.__name__="lime.graphics._WebGLRenderContext.WebGLRenderContext_Impl_";lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.bufferData=function(this1,target,srcData,usage){this1.bufferData(target,srcData,usage)};lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D=function(this1,target,level,internalformat,width,height,border,format,type,srcData){if(format!=null){this1.texImage2D(target,level,internalformat,width,height,border,format,type,srcData)}else{this1.texImage2D(target,level,internalformat,width,height,border)}};lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix2fv=function(this1,location,transpose,v){this1.uniformMatrix2fv(location,transpose,v)};lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix3fv=function(this1,location,transpose,v){this1.uniformMatrix3fv(location,transpose,v)};lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv=function(this1,location,transpose,v){this1.uniformMatrix4fv(location,transpose,v)};lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.fromWebGL2RenderContext=function(gl){return gl};var lime_graphics_cairo_Cairo=function(surface){};$hxClasses["lime.graphics.cairo.Cairo"]=lime_graphics_cairo_Cairo;lime_graphics_cairo_Cairo.__name__="lime.graphics.cairo.Cairo";lime_graphics_cairo_Cairo.prototype={__class__:lime_graphics_cairo_Cairo};var lime_graphics_cairo__$CairoImageSurface_CairoImageSurface_$Impl_$={};$hxClasses["lime.graphics.cairo._CairoImageSurface.CairoImageSurface_Impl_"]=lime_graphics_cairo__$CairoImageSurface_CairoImageSurface_$Impl_$;lime_graphics_cairo__$CairoImageSurface_CairoImageSurface_$Impl_$.__name__="lime.graphics.cairo._CairoImageSurface.CairoImageSurface_Impl_";lime_graphics_cairo__$CairoImageSurface_CairoImageSurface_$Impl_$.fromImage=function(image){return null};var lime_graphics_cairo__$CairoPattern_CairoPattern_$Impl_$={};$hxClasses["lime.graphics.cairo._CairoPattern.CairoPattern_Impl_"]=lime_graphics_cairo__$CairoPattern_CairoPattern_$Impl_$;lime_graphics_cairo__$CairoPattern_CairoPattern_$Impl_$.__name__="lime.graphics.cairo._CairoPattern.CairoPattern_Impl_";lime_graphics_cairo__$CairoPattern_CairoPattern_$Impl_$.createForSurface=function(surface){return 0};var lime_graphics_opengl_GL=function(){};$hxClasses["lime.graphics.opengl.GL"]=lime_graphics_opengl_GL;lime_graphics_opengl_GL.__name__="lime.graphics.opengl.GL";var lime_graphics_opengl_ext_KHR_$debug=function(){this.STACK_UNDERFLOW=1284;this.STACK_OVERFLOW=1283;this.CONTEXT_FLAG_DEBUG_BIT=2;this.DEBUG_OUTPUT=37600;this.DEBUG_SEVERITY_LOW=37192;this.DEBUG_SEVERITY_MEDIUM=37191;this.DEBUG_SEVERITY_HIGH=37190;this.DEBUG_LOGGED_MESSAGES=37189;this.MAX_DEBUG_LOGGED_MESSAGES=37188;this.MAX_DEBUG_MESSAGE_LENGTH=37187;this.MAX_LABEL_LENGTH=33512;this.SAMPLER=33510;this.QUERY=33507;this.PROGRAM=33506;this.SHADER=33505;this.BUFFER=33504;this.DEBUG_GROUP_STACK_DEPTH=33389;this.MAX_DEBUG_GROUP_STACK_DEPTH=33388;this.DEBUG_SEVERITY_NOTIFICATION=33387;this.DEBUG_TYPE_POP_GROUP=33386;this.DEBUG_TYPE_PUSH_GROUP=33385;this.DEBUG_TYPE_MARKER=33384;this.DEBUG_TYPE_OTHER=33361;this.DEBUG_TYPE_PERFORMANCE=33360;this.DEBUG_TYPE_PORTABILITY=33359;this.DEBUG_TYPE_UNDEFINED_BEHAVIOR=33358;this.DEBUG_TYPE_DEPRECATED_BEHAVIOR=33357;this.DEBUG_TYPE_ERROR=33356;this.DEBUG_SOURCE_OTHER=33355;this.DEBUG_SOURCE_APPLICATION=33354;this.DEBUG_SOURCE_THIRD_PARTY=33353;this.DEBUG_SOURCE_SHADER_COMPILER=33352;this.DEBUG_SOURCE_WINDOW_SYSTEM=33351;this.DEBUG_SOURCE_API=33350;this.DEBUG_CALLBACK_USER_PARAM=33349;this.DEBUG_CALLBACK_FUNCTION=33348;this.DEBUG_NEXT_LOGGED_MESSAGE_LENGTH=33347;this.DEBUG_OUTPUT_SYNCHRONOUS=33346};$hxClasses["lime.graphics.opengl.ext.KHR_debug"]=lime_graphics_opengl_ext_KHR_$debug;lime_graphics_opengl_ext_KHR_$debug.__name__="lime.graphics.opengl.ext.KHR_debug";lime_graphics_opengl_ext_KHR_$debug.prototype={DEBUG_OUTPUT_SYNCHRONOUS:null,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:null,DEBUG_CALLBACK_FUNCTION:null,DEBUG_CALLBACK_USER_PARAM:null,DEBUG_SOURCE_API:null,DEBUG_SOURCE_WINDOW_SYSTEM:null,DEBUG_SOURCE_SHADER_COMPILER:null,DEBUG_SOURCE_THIRD_PARTY:null,DEBUG_SOURCE_APPLICATION:null,DEBUG_SOURCE_OTHER:null,DEBUG_TYPE_ERROR:null,DEBUG_TYPE_DEPRECATED_BEHAVIOR:null,DEBUG_TYPE_UNDEFINED_BEHAVIOR:null,DEBUG_TYPE_PORTABILITY:null,DEBUG_TYPE_PERFORMANCE:null,DEBUG_TYPE_OTHER:null,DEBUG_TYPE_MARKER:null,DEBUG_TYPE_PUSH_GROUP:null,DEBUG_TYPE_POP_GROUP:null,DEBUG_SEVERITY_NOTIFICATION:null,MAX_DEBUG_GROUP_STACK_DEPTH:null,DEBUG_GROUP_STACK_DEPTH:null,BUFFER:null,SHADER:null,PROGRAM:null,QUERY:null,SAMPLER:null,MAX_LABEL_LENGTH:null,MAX_DEBUG_MESSAGE_LENGTH:null,MAX_DEBUG_LOGGED_MESSAGES:null,DEBUG_LOGGED_MESSAGES:null,DEBUG_SEVERITY_HIGH:null,DEBUG_SEVERITY_MEDIUM:null,DEBUG_SEVERITY_LOW:null,DEBUG_OUTPUT:null,CONTEXT_FLAG_DEBUG_BIT:null,STACK_OVERFLOW:null,STACK_UNDERFLOW:null,__class__:lime_graphics_opengl_ext_KHR_$debug};var lime_math__$ColorMatrix_ColorMatrix_$Impl_$={};$hxClasses["lime.math._ColorMatrix.ColorMatrix_Impl_"]=lime_math__$ColorMatrix_ColorMatrix_$Impl_$;lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__name__="lime.math._ColorMatrix.ColorMatrix_Impl_";lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getAlphaTable=function(this1){if(lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__alphaTable==null){lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__alphaTable=new Uint8Array(256)}var value;lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__alphaTable[0]=0;var _g=1;while(_g<256){var i=_g++;value=Math.floor(i*this1[18]+this1[19]*255);if(value>255){value=255}if(value<0){value=0}lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__alphaTable[i]=value}return lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__alphaTable};lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getBlueTable=function(this1){if(lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__blueTable==null){lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__blueTable=new Uint8Array(256)}var value;var _g=0;while(_g<256){var i=_g++;value=Math.floor(i*this1[12]+this1[14]*255);if(value>255){value=255}if(value<0){value=0}lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__blueTable[i]=value}return lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__blueTable};lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getGreenTable=function(this1){if(lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__greenTable==null){lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__greenTable=new Uint8Array(256)}var value;var _g=0;while(_g<256){var i=_g++;value=Math.floor(i*this1[6]+this1[9]*255);if(value>255){value=255}if(value<0){value=0}lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__greenTable[i]=value}return lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__greenTable};lime_math__$ColorMatrix_ColorMatrix_$Impl_$.getRedTable=function(this1){if(lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__redTable==null){lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__redTable=new Uint8Array(256)}var value;var _g=0;while(_g<256){var i=_g++;value=Math.floor(i*this1[0]+this1[4]*255);if(value>255){value=255}if(value<0){value=0}lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__redTable[i]=value}return lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__redTable};lime_math__$ColorMatrix_ColorMatrix_$Impl_$.__toFlashColorTransform=function(this1){return null};var lime_math_Matrix3=function(a,b,c,d,tx,ty){if(ty==null){ty=0}if(tx==null){tx=0}if(d==null){d=1}if(c==null){c=0}if(b==null){b=0}if(a==null){a=1}this.a=a;this.b=b;this.c=c;this.d=d;this.tx=tx;this.ty=ty};$hxClasses["lime.math.Matrix3"]=lime_math_Matrix3;lime_math_Matrix3.__name__="lime.math.Matrix3";lime_math_Matrix3.prototype={a:null,b:null,c:null,d:null,tx:null,ty:null,__class__:lime_math_Matrix3};var lime_math__$Matrix4_Matrix4_$Impl_$={};$hxClasses["lime.math._Matrix4.Matrix4_Impl_"]=lime_math__$Matrix4_Matrix4_$Impl_$;lime_math__$Matrix4_Matrix4_$Impl_$.__name__="lime.math._Matrix4.Matrix4_Impl_";lime_math__$Matrix4_Matrix4_$Impl_$._new=function(data){var this1;if(data!=null&&data.length==16){this1=data}else{var array=lime_math__$Matrix4_Matrix4_$Impl_$.__identity;var this2;if(array!=null){this2=new Float32Array(array)}else{this2=null}this1=this2}return this1};lime_math__$Matrix4_Matrix4_$Impl_$.append=function(this1,lhs){var m111=this1[0];var m121=this1[4];var m131=this1[8];var m141=this1[12];var m112=this1[1];var m122=this1[5];var m132=this1[9];var m142=this1[13];var m113=this1[2];var m123=this1[6];var m133=this1[10];var m143=this1[14];var m114=this1[3];var m124=this1[7];var m134=this1[11];var m144=this1[15];var m211=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,0);var m221=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,4);var m231=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,8);var m241=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,12);var m212=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,1);var m222=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,5);var m232=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,9);var m242=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,13);var m213=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,2);var m223=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,6);var m233=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,10);var m243=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,14);var m214=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,3);var m224=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,7);var m234=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,11);var m244=lime_math__$Matrix4_Matrix4_$Impl_$.get(lhs,15);this1[0]=m111*m211+m112*m221+m113*m231+m114*m241;this1[1]=m111*m212+m112*m222+m113*m232+m114*m242;this1[2]=m111*m213+m112*m223+m113*m233+m114*m243;this1[3]=m111*m214+m112*m224+m113*m234+m114*m244;this1[4]=m121*m211+m122*m221+m123*m231+m124*m241;this1[5]=m121*m212+m122*m222+m123*m232+m124*m242;this1[6]=m121*m213+m122*m223+m123*m233+m124*m243;this1[7]=m121*m214+m122*m224+m123*m234+m124*m244;this1[8]=m131*m211+m132*m221+m133*m231+m134*m241;this1[9]=m131*m212+m132*m222+m133*m232+m134*m242;this1[10]=m131*m213+m132*m223+m133*m233+m134*m243;this1[11]=m131*m214+m132*m224+m133*m234+m134*m244;this1[12]=m141*m211+m142*m221+m143*m231+m144*m241;this1[13]=m141*m212+m142*m222+m143*m232+m144*m242;this1[14]=m141*m213+m142*m223+m143*m233+m144*m243;this1[15]=m141*m214+m142*m224+m143*m234+m144*m244};lime_math__$Matrix4_Matrix4_$Impl_$.createOrtho=function(this1,left,right,bottom,top,zNear,zFar){var sx=1/(right-left);var sy=1/(top-bottom);var sz=1/(zFar-zNear);this1[0]=2*sx;this1[1]=0;this1[2]=0;this1[3]=0;this1[4]=0;this1[5]=2*sy;this1[6]=0;this1[7]=0;this1[8]=0;this1[9]=0;this1[10]=-2*sz;this1[11]=0;this1[12]=-(left+right)*sx;this1[13]=-(bottom+top)*sy;this1[14]=-(zNear+zFar)*sz;this1[15]=1};lime_math__$Matrix4_Matrix4_$Impl_$.identity=function(this1){this1[0]=1;this1[1]=0;this1[2]=0;this1[3]=0;this1[4]=0;this1[5]=1;this1[6]=0;this1[7]=0;this1[8]=0;this1[9]=0;this1[10]=1;this1[11]=0;this1[12]=0;this1[13]=0;this1[14]=0;this1[15]=1};lime_math__$Matrix4_Matrix4_$Impl_$.get=function(this1,index){return this1[index]};lime_math__$Matrix4_Matrix4_$Impl_$.set=function(this1,index,value){this1[index]=value;return value};var lime_math__$RGBA_RGBA_$Impl_$={};$hxClasses["lime.math._RGBA.RGBA_Impl_"]=lime_math__$RGBA_RGBA_$Impl_$;lime_math__$RGBA_RGBA_$Impl_$.__name__="lime.math._RGBA.RGBA_Impl_";var lime_math_Rectangle=function(x,y,width,height){if(height==null){height=0}if(width==null){width=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.width=width;this.height=height};$hxClasses["lime.math.Rectangle"]=lime_math_Rectangle;lime_math_Rectangle.__name__="lime.math.Rectangle";lime_math_Rectangle.prototype={height:null,width:null,x:null,y:null,intersection:function(toIntersect,result){if(result==null){result=new lime_math_Rectangle}var x0=this.x<toIntersect.x?toIntersect.x:this.x;var x1=this.get_right()>toIntersect.get_right()?toIntersect.get_right():this.get_right();if(x1<=x0){result.setEmpty();return result}var y0=this.y<toIntersect.y?toIntersect.y:this.y;var y1=this.get_bottom()>toIntersect.get_bottom()?toIntersect.get_bottom():this.get_bottom();if(y1<=y0){result.setEmpty();return result}result.x=x0;result.y=y0;result.width=x1-x0;result.height=y1-y0;return result},offset:function(dx,dy){this.x+=dx;this.y+=dy},setEmpty:function(){this.x=this.y=this.width=this.height=0},setTo:function(xa,ya,widtha,heighta){this.x=xa;this.y=ya;this.width=widtha;this.height=heighta},__toFlashRectangle:function(){return null},get_bottom:function(){return this.y+this.height},get_right:function(){return this.x+this.width},__class__:lime_math_Rectangle,__properties__:{get_right:"get_right",get_bottom:"get_bottom"}};var lime_math_Vector4=function(x,y,z,w){if(w==null){w=0}if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.w=w;this.x=x;this.y=y;this.z=z};$hxClasses["lime.math.Vector4"]=lime_math_Vector4;lime_math_Vector4.__name__="lime.math.Vector4";lime_math_Vector4.prototype={w:null,x:null,y:null,z:null,__class__:lime_math_Vector4};var lime_media_AudioBuffer=function(){};$hxClasses["lime.media.AudioBuffer"]=lime_media_AudioBuffer;lime_media_AudioBuffer.__name__="lime.media.AudioBuffer";lime_media_AudioBuffer.fromBytes=function(bytes){if(bytes==null){return null}var audioBuffer=new lime_media_AudioBuffer;audioBuffer.set_src(new Howl({src:["data:"+lime_media_AudioBuffer.__getCodec(bytes)+";base64,"+lime__$internal_format_Base64.encode(bytes)],html5:true,preload:false}));return audioBuffer};lime_media_AudioBuffer.fromFile=function(path){if(path==null){return null}var audioBuffer=new lime_media_AudioBuffer;audioBuffer.__srcHowl=new Howl({src:[path],preload:false});return audioBuffer};lime_media_AudioBuffer.fromFiles=function(paths){var audioBuffer=new lime_media_AudioBuffer;audioBuffer.__srcHowl=new Howl({src:paths,preload:false});return audioBuffer};lime_media_AudioBuffer.loadFromFile=function(path){var promise=new lime_app_Promise;var audioBuffer=lime_media_AudioBuffer.fromFile(path);if(audioBuffer!=null){if(audioBuffer!=null){audioBuffer.__srcHowl.on("load",function(){promise.complete(audioBuffer)});audioBuffer.__srcHowl.on("loaderror",function(id,msg){promise.error(msg)});audioBuffer.__srcHowl.load()}}else{promise.error(null)}return promise.future};lime_media_AudioBuffer.loadFromFiles=function(paths){var promise=new lime_app_Promise;var audioBuffer=lime_media_AudioBuffer.fromFiles(paths);if(audioBuffer!=null){audioBuffer.__srcHowl.on("load",function(){promise.complete(audioBuffer)});audioBuffer.__srcHowl.on("loaderror",function(){promise.error(null)});audioBuffer.__srcHowl.load()}else{promise.error(null)}return promise.future};lime_media_AudioBuffer.__getCodec=function(bytes){switch(bytes.getString(0,4)){case"OggS":return"audio/ogg";case"RIFF":if(bytes.getString(8,4)=="WAVE"){return"audio/wav"}else{var _g=bytes.b[2];var _g1=bytes.b[1];switch(bytes.b[0]){case 73:if(_g1==68){if(_g==51){return"audio/mp3"}}break;case 255:switch(_g1){case 243:case 250:case 251:return"audio/mp3";default:}break;default:}}break;case"fLaC":return"audio/flac";default:var _g2=bytes.b[2];var _g11=bytes.b[1];switch(bytes.b[0]){case 73:if(_g11==68){if(_g2==51){return"audio/mp3"}}break;case 255:switch(_g11){case 243:case 250:case 251:return"audio/mp3";default:}break;default:}}lime_utils_Log.error("Unsupported sound format",{fileName:"lime/media/AudioBuffer.hx",lineNumber:362,className:"lime.media.AudioBuffer",methodName:"__getCodec"});return null};lime_media_AudioBuffer.prototype={__srcHowl:null,set_src:function(value){return this.__srcHowl=value},__class__:lime_media_AudioBuffer,__properties__:{set_src:"set_src"}};var lime_media_AudioContext=function(type){if(type!="custom"){if(type==null||type=="web"){try{window.AudioContext=window.AudioContext||window.webkitAudioContext;this.web=new window.AudioContext;this.type="web"}catch(e){haxe_CallStack.lastException=e;var e1=e instanceof js__$Boot_HaxeError?e.val:e}}if(this.web==null&&type!="web"){this.html5=new lime_media_HTML5AudioContext;this.type="html5"}}else{this.type="custom"}};$hxClasses["lime.media.AudioContext"]=lime_media_AudioContext;lime_media_AudioContext.__name__="lime.media.AudioContext";lime_media_AudioContext.prototype={html5:null,type:null,web:null,__class__:lime_media_AudioContext};var lime_media_AudioManager=function(){};$hxClasses["lime.media.AudioManager"]=lime_media_AudioManager;lime_media_AudioManager.__name__="lime.media.AudioManager";lime_media_AudioManager.init=function(context){if(lime_media_AudioManager.context==null){if(context==null){lime_media_AudioManager.context=new lime_media_AudioContext;context=lime_media_AudioManager.context}lime_media_AudioManager.context=context}};var lime_media_AudioSource=function(buffer,offset,length,loops){if(loops==null){loops=0}if(offset==null){offset=0}this.onComplete=new lime_app__$Event_$Void_$Void;this.buffer=buffer;this.offset=offset;this.__backend=new lime__$internal_backend_html5_HTML5AudioSource(this);if(length!=null&&length!=0){this.set_length(length)}this.set_loops(loops);if(buffer!=null){this.init()}};$hxClasses["lime.media.AudioSource"]=lime_media_AudioSource;lime_media_AudioSource.__name__="lime.media.AudioSource";lime_media_AudioSource.prototype={onComplete:null,buffer:null,offset:null,__backend:null,dispose:function(){},init:function(){},play:function(){this.__backend.play()},stop:function(){this.__backend.stop()},get_currentTime:function(){return this.__backend.getCurrentTime()},set_currentTime:function(value){return this.__backend.setCurrentTime(value)},get_gain:function(){return this.__backend.getGain()},set_gain:function(value){return this.__backend.setGain(value)},set_length:function(value){return this.__backend.setLength(value)},set_loops:function(value){return this.__backend.setLoops(value)},get_position:function(){return this.__backend.getPosition()},set_position:function(value){return this.__backend.setPosition(value)},__class__:lime_media_AudioSource,__properties__:{set_position:"set_position",get_position:"get_position",set_loops:"set_loops",set_length:"set_length",set_gain:"set_gain",get_gain:"get_gain",set_currentTime:"set_currentTime",get_currentTime:"get_currentTime"}};var lime_media_HTML5AudioContext=function(){};$hxClasses["lime.media.HTML5AudioContext"]=lime_media_HTML5AudioContext;lime_media_HTML5AudioContext.__name__="lime.media.HTML5AudioContext";lime_media_HTML5AudioContext.prototype={__class__:lime_media_HTML5AudioContext};var lime_net__$IHTTPRequest=function(){};$hxClasses["lime.net._IHTTPRequest"]=lime_net__$IHTTPRequest;lime_net__$IHTTPRequest.__name__="lime.net._IHTTPRequest";lime_net__$IHTTPRequest.__isInterface__=true;lime_net__$IHTTPRequest.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,formData:null,headers:null,method:null,responseHeaders:null,responseStatus:null,timeout:null,uri:null,userAgent:null,withCredentials:null,__class__:lime_net__$IHTTPRequest};var lime_net__$HTTPRequest_AbstractHTTPRequest=function(uri){this.uri=uri;this.contentType="application/x-www-form-urlencoded";this.followRedirects=true;this.enableResponseHeaders=false;this.formData=new haxe_ds_StringMap;this.headers=[];this.method="GET";this.timeout=3e4;this.withCredentials=false;this.__backend=new lime__$internal_backend_html5_HTML5HTTPRequest;this.__backend.init(this)};$hxClasses["lime.net._HTTPRequest.AbstractHTTPRequest"]=lime_net__$HTTPRequest_AbstractHTTPRequest;lime_net__$HTTPRequest_AbstractHTTPRequest.__name__="lime.net._HTTPRequest.AbstractHTTPRequest";lime_net__$HTTPRequest_AbstractHTTPRequest.__interfaces__=[lime_net__$IHTTPRequest];lime_net__$HTTPRequest_AbstractHTTPRequest.prototype={contentType:null,data:null,enableResponseHeaders:null,followRedirects:null,formData:null,headers:null,method:null,responseData:null,responseHeaders:null,responseStatus:null,timeout:null,uri:null,userAgent:null,withCredentials:null,__backend:null,__class__:lime_net__$HTTPRequest_AbstractHTTPRequest};var lime_net__$HTTPRequest_$Bytes=function(uri){lime_net__$HTTPRequest_AbstractHTTPRequest.call(this,uri)};$hxClasses["lime.net._HTTPRequest_Bytes"]=lime_net__$HTTPRequest_$Bytes;lime_net__$HTTPRequest_$Bytes.__name__="lime.net._HTTPRequest_Bytes";lime_net__$HTTPRequest_$Bytes.__super__=lime_net__$HTTPRequest_AbstractHTTPRequest;lime_net__$HTTPRequest_$Bytes.prototype=$extend(lime_net__$HTTPRequest_AbstractHTTPRequest.prototype,{fromBytes:function(bytes){return bytes},load:function(uri){var _gthis=this;if(uri!=null){this.uri=uri}var promise=new lime_app_Promise;var future=this.__backend.loadData(this.uri);future.onProgress($bind(promise,promise.progress));future.onError($bind(promise,promise.error));future.onComplete(function(bytes){_gthis.responseData=_gthis.fromBytes(bytes);promise.complete(_gthis.responseData)});return promise.future},__class__:lime_net__$HTTPRequest_$Bytes});var lime_net__$HTTPRequest_$String=function(uri){lime_net__$HTTPRequest_AbstractHTTPRequest.call(this,uri)};$hxClasses["lime.net._HTTPRequest_String"]=lime_net__$HTTPRequest_$String;lime_net__$HTTPRequest_$String.__name__="lime.net._HTTPRequest_String";lime_net__$HTTPRequest_$String.__super__=lime_net__$HTTPRequest_AbstractHTTPRequest;lime_net__$HTTPRequest_$String.prototype=$extend(lime_net__$HTTPRequest_AbstractHTTPRequest.prototype,{load:function(uri){var _gthis=this;if(uri!=null){this.uri=uri}var promise=new lime_app_Promise;var future=this.__backend.loadText(this.uri);future.onProgress($bind(promise,promise.progress));future.onError($bind(promise,promise.error));future.onComplete(function(text){_gthis.responseData=text;promise.complete(_gthis.responseData)});return promise.future},__class__:lime_net__$HTTPRequest_$String});var lime_net_HTTPRequestHeader=function(name,value){if(value==null){value=""}this.name=name;this.value=value};$hxClasses["lime.net.HTTPRequestHeader"]=lime_net_HTTPRequestHeader;lime_net_HTTPRequestHeader.__name__="lime.net.HTTPRequestHeader";lime_net_HTTPRequestHeader.prototype={name:null,value:null,__class__:lime_net_HTTPRequestHeader};var lime_net__$HTTPRequest_$lime_$utils_$Bytes=function(uri){lime_net__$HTTPRequest_$Bytes.call(this,uri)};$hxClasses["lime.net._HTTPRequest_lime_utils_Bytes"]=lime_net__$HTTPRequest_$lime_$utils_$Bytes;lime_net__$HTTPRequest_$lime_$utils_$Bytes.__name__="lime.net._HTTPRequest_lime_utils_Bytes";lime_net__$HTTPRequest_$lime_$utils_$Bytes.__super__=lime_net__$HTTPRequest_$Bytes;lime_net__$HTTPRequest_$lime_$utils_$Bytes.prototype=$extend(lime_net__$HTTPRequest_$Bytes.prototype,{fromBytes:function(bytes){return lime_utils__$Bytes_Bytes_$Impl_$.fromBytes(bytes)},__class__:lime_net__$HTTPRequest_$lime_$utils_$Bytes});var lime_net__$HTTPRequest_$openfl_$utils_$ByteArray=function(uri){lime_net__$HTTPRequest_$Bytes.call(this,uri)};$hxClasses["lime.net._HTTPRequest_openfl_utils_ByteArray"]=lime_net__$HTTPRequest_$openfl_$utils_$ByteArray;lime_net__$HTTPRequest_$openfl_$utils_$ByteArray.__name__="lime.net._HTTPRequest_openfl_utils_ByteArray";lime_net__$HTTPRequest_$openfl_$utils_$ByteArray.__super__=lime_net__$HTTPRequest_$Bytes;lime_net__$HTTPRequest_$openfl_$utils_$ByteArray.prototype=$extend(lime_net__$HTTPRequest_$Bytes.prototype,{fromBytes:function(bytes){return openfl_utils__$ByteArray_ByteArray_$Impl_$.fromBytes(bytes)},__class__:lime_net__$HTTPRequest_$openfl_$utils_$ByteArray});var lime_system_Clipboard=function(){};$hxClasses["lime.system.Clipboard"]=lime_system_Clipboard;lime_system_Clipboard.__name__="lime.system.Clipboard";lime_system_Clipboard.__properties__={set_text:"set_text",get_text:"get_text"};lime_system_Clipboard.__update=function(){var cacheText=lime_system_Clipboard._text;lime_system_Clipboard._text=null;if(lime_system_Clipboard._text!=cacheText){lime_system_Clipboard.onUpdate.dispatch()}};lime_system_Clipboard.get_text=function(){lime_system_Clipboard.__update();return lime_system_Clipboard._text};lime_system_Clipboard.set_text=function(value){var cacheText=lime_system_Clipboard._text;lime_system_Clipboard._text=value;var $window=lime_app_Application.current.__window;if($window!=null){$window.__backend.setClipboard(value)}if(lime_system_Clipboard._text!=cacheText){lime_system_Clipboard.onUpdate.dispatch()}return value};var lime_system_DisplayMode=function(){};$hxClasses["lime.system.DisplayMode"]=lime_system_DisplayMode;lime_system_DisplayMode.__name__="lime.system.DisplayMode";var lime_system_Endian=$hxEnums["lime.system.Endian"]={__ename__:"lime.system.Endian",__constructs__:["LITTLE_ENDIAN","BIG_ENDIAN"],LITTLE_ENDIAN:{_hx_index:0,__enum__:"lime.system.Endian",toString:$estr},BIG_ENDIAN:{_hx_index:1,__enum__:"lime.system.Endian",toString:$estr}};var lime_system_Sensor=function(type,id){this.onUpdate=new lime_app__$Event_$Float_$Float_$Float_$Void;this.type=type;this.id=id};$hxClasses["lime.system.Sensor"]=lime_system_Sensor;lime_system_Sensor.__name__="lime.system.Sensor";lime_system_Sensor.getSensors=function(type){if(type==null){return lime_system_Sensor.sensors.slice()}else{var result=[];var _g=0;var _g1=lime_system_Sensor.sensors;while(_g<_g1.length){var sensor=_g1[_g];++_g;if(sensor.type==type){result.push(sensor)}}return result}};lime_system_Sensor.registerSensor=function(type,id){var sensor=new lime_system_Sensor(type,id);lime_system_Sensor.sensors.push(sensor);lime_system_Sensor.sensorByID.h[id]=sensor;return sensor};lime_system_Sensor.prototype={id:null,onUpdate:null,type:null,__class__:lime_system_Sensor};var lime_system_SensorType=$hxEnums["lime.system.SensorType"]={__ename__:"lime.system.SensorType",__constructs__:["ACCELEROMETER"],ACCELEROMETER:{_hx_index:0,__enum__:"lime.system.SensorType",toString:$estr}};var lime_system_System=function(){};$hxClasses["lime.system.System"]=lime_system_System;lime_system_System.__name__="lime.system.System";lime_system_System.__properties__={get_endianness:"get_endianness"};lime_system_System.embed=$hx_exports["lime"]["embed"]=function(projectName,element,width,height,config){if(lime_system_System.__applicationEntryPoint==null){return}var _this=lime_system_System.__applicationEntryPoint;if(__map_reserved[projectName]!=null?_this.existsReserved(projectName):_this.h.hasOwnProperty(projectName)){var htmlElement=null;if(typeof element=="string"){htmlElement=window.document.getElementById(element)}else if(element==null){htmlElement=window.document.createElement("div")}else{htmlElement=element}if(htmlElement==null){window.console.log("[lime.embed] ERROR: Cannot find target element: "+Std.string(element));return}if(width==null){width=0}if(height==null){height=0}if(config==null){config={}}if(Object.prototype.hasOwnProperty.call(config,"background")&&typeof config.background=="string"){var background=StringTools.replace(Std.string(config.background),"#","");if(background.indexOf("0x")>-1){config.background=Std.parseInt(background)}else{config.background=Std.parseInt("0x"+background)}}config.element=htmlElement;config.width=width;config.height=height;var _this1=lime_system_System.__applicationEntryPoint;(__map_reserved[projectName]!=null?_this1.getReserved(projectName):_this1.h[projectName])(config)}};lime_system_System.getTimer=function(){return window.performance.now()|0};lime_system_System.openURL=function(url,target){if(target==null){target="_blank"}if(url!=null){window.open(url,target)}};lime_system_System.__registerEntryPoint=function(projectName,entryPoint){if(lime_system_System.__applicationEntryPoint==null){lime_system_System.__applicationEntryPoint=new haxe_ds_StringMap}var _this=lime_system_System.__applicationEntryPoint;if(__map_reserved[projectName]!=null){_this.setReserved(projectName,entryPoint)}else{_this.h[projectName]=entryPoint}};lime_system_System.get_endianness=function(){if(lime_system_System.__endianness==null){var arrayBuffer=new ArrayBuffer(2);var this1;if(arrayBuffer!=null){this1=new Uint8Array(arrayBuffer,0)}else{this1=null}var uint8Array=this1;var this2;if(arrayBuffer!=null){this2=new Uint16Array(arrayBuffer,0)}else{this2=null}uint8Array[0]=170;uint8Array[1]=187;if(this2[0]==43707){lime_system_System.__endianness=lime_system_Endian.BIG_ENDIAN}else{lime_system_System.__endianness=lime_system_Endian.LITTLE_ENDIAN}}return lime_system_System.__endianness};var lime_system_ThreadPool=function(minThreads,maxThreads){if(maxThreads==null){maxThreads=1}if(minThreads==null){minThreads=0}this.onRun=new lime_app__$Event_$Dynamic_$Void;this.onError=new lime_app__$Event_$Dynamic_$Void;this.onComplete=new lime_app__$Event_$Dynamic_$Void;this.doWork=new lime_app__$Event_$Dynamic_$Void;this.minThreads=minThreads;this.maxThreads=maxThreads;this.currentThreads=0};$hxClasses["lime.system.ThreadPool"]=lime_system_ThreadPool;lime_system_ThreadPool.__name__="lime.system.ThreadPool";lime_system_ThreadPool.prototype={currentThreads:null,doWork:null,maxThreads:null,minThreads:null,onComplete:null,onError:null,onRun:null,queue:function(state){this.runWork(state)},sendComplete:function(state){this.onComplete.dispatch(state)},sendError:function(state){this.onError.dispatch(state)},runWork:function(state){this.onRun.dispatch(state);this.doWork.dispatch(state)},__class__:lime_system_ThreadPool};var lime_text_harfbuzz_HBSegmentProperties=function(){};$hxClasses["lime.text.harfbuzz.HBSegmentProperties"]=lime_text_harfbuzz_HBSegmentProperties;lime_text_harfbuzz_HBSegmentProperties.__name__="lime.text.harfbuzz.HBSegmentProperties";var lime_ui_Gamepad=function(id){this.onDisconnect=new lime_app__$Event_$Void_$Void;this.onButtonUp=new lime_app__$Event_$lime_$ui_$GamepadButton_$Void;this.onButtonDown=new lime_app__$Event_$lime_$ui_$GamepadButton_$Void;this.onAxisMove=new lime_app__$Event_$lime_$ui_$GamepadAxis_$Float_$Void;this.id=id;this.connected=true};$hxClasses["lime.ui.Gamepad"]=lime_ui_Gamepad;lime_ui_Gamepad.__name__="lime.ui.Gamepad";lime_ui_Gamepad.__connect=function(id){if(!lime_ui_Gamepad.devices.h.hasOwnProperty(id)){var gamepad=new lime_ui_Gamepad(id);lime_ui_Gamepad.devices.h[id]=gamepad;lime_ui_Gamepad.onConnect.dispatch(gamepad)}};lime_ui_Gamepad.__disconnect=function(id){var gamepad=lime_ui_Gamepad.devices.h[id];if(gamepad!=null){gamepad.connected=false}lime_ui_Gamepad.devices.remove(id);if(gamepad!=null){gamepad.onDisconnect.dispatch()}};lime_ui_Gamepad.prototype={connected:null,id:null,onAxisMove:null,onButtonDown:null,onButtonUp:null,onDisconnect:null,__class__:lime_ui_Gamepad};var lime_ui_Haptic=function(){};$hxClasses["lime.ui.Haptic"]=lime_ui_Haptic;lime_ui_Haptic.__name__="lime.ui.Haptic";lime_ui_Haptic.vibrate=function(period,duration){var pattern=[];if(period==0){pattern=[duration]}else{var periodMS=Math.ceil(period/2)|0;var count=Math.ceil(duration/period*2)|0;pattern=[0];var _g=0;while(_g<count){++_g;pattern.push(periodMS)}}try{if(!window.navigator.vibrate(pattern)){lime_utils_Log.verbose("Navigator.vibrate() returned false.",{fileName:"lime/ui/Haptic.hx",lineNumber:57,className:"lime.ui.Haptic",methodName:"vibrate"})}}catch(e){haxe_CallStack.lastException=e;lime_utils_Log.verbose("Navigator.vibrate() threw an error (it might be Internet Explorer or Edge not supporting the feature)",{fileName:"lime/ui/Haptic.hx",lineNumber:62,className:"lime.ui.Haptic",methodName:"vibrate"})}};var lime_ui_Joystick=function(id){this.onTrackballMove=new lime_app__$Event_$Int_$Float_$Float_$Void;this.onHatMove=new lime_app__$Event_$Int_$lime_$ui_$JoystickHatPosition_$Void;this.onDisconnect=new lime_app__$Event_$Void_$Void;this.onButtonUp=new lime_app__$Event_$Int_$Void;this.onButtonDown=new lime_app__$Event_$Int_$Void;this.onAxisMove=new lime_app__$Event_$Int_$Float_$Void;this.id=id;this.connected=true};$hxClasses["lime.ui.Joystick"]=lime_ui_Joystick;lime_ui_Joystick.__name__="lime.ui.Joystick";lime_ui_Joystick.__connect=function(id){if(!lime_ui_Joystick.devices.h.hasOwnProperty(id)){var joystick=new lime_ui_Joystick(id);lime_ui_Joystick.devices.h[id]=joystick;lime_ui_Joystick.onConnect.dispatch(joystick)}};lime_ui_Joystick.__disconnect=function(id){var joystick=lime_ui_Joystick.devices.h[id];if(joystick!=null){joystick.connected=false}lime_ui_Joystick.devices.remove(id);if(joystick!=null){joystick.onDisconnect.dispatch()}};lime_ui_Joystick.__getDeviceData=function(){if(navigator.getGamepads){return navigator.getGamepads()}else if(navigator.webkitGetGamepads){return navigator.webkitGetGamepads()}else{return null}};lime_ui_Joystick.prototype={connected:null,id:null,onAxisMove:null,onButtonDown:null,onButtonUp:null,onDisconnect:null,onHatMove:null,onTrackballMove:null,__class__:lime_ui_Joystick};var lime_ui__$KeyModifier_KeyModifier_$Impl_$={};$hxClasses["lime.ui._KeyModifier.KeyModifier_Impl_"]=lime_ui__$KeyModifier_KeyModifier_$Impl_$;lime_ui__$KeyModifier_KeyModifier_$Impl_$.__name__="lime.ui._KeyModifier.KeyModifier_Impl_";lime_ui__$KeyModifier_KeyModifier_$Impl_$.__properties__={get_shiftKey:"get_shiftKey",get_metaKey:"get_metaKey",get_ctrlKey:"get_ctrlKey",get_altKey:"get_altKey"};lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_altKey=function(this1){if((this1&256)<=0){return(this1&512)>0}else{return true}};lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey=function(this1){if((this1&64)<=0){return(this1&128)>0}else{return true}};lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey=function(this1){if((this1&1024)<=0){return(this1&2048)>0}else{return true}};lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey=function(this1){if((this1&1)<=0){return(this1&2)>0}else{return true}};var lime_ui_MouseCursor=$hxEnums["lime.ui.MouseCursor"]={__ename__:"lime.ui.MouseCursor",__constructs__:["ARROW","CROSSHAIR","DEFAULT","MOVE","POINTER","RESIZE_NESW","RESIZE_NS","RESIZE_NWSE","RESIZE_WE","TEXT","WAIT","WAIT_ARROW","CUSTOM"],ARROW:{_hx_index:0,__enum__:"lime.ui.MouseCursor",toString:$estr},CROSSHAIR:{_hx_index:1,__enum__:"lime.ui.MouseCursor",toString:$estr},DEFAULT:{_hx_index:2,__enum__:"lime.ui.MouseCursor",toString:$estr},MOVE:{_hx_index:3,__enum__:"lime.ui.MouseCursor",toString:$estr},POINTER:{_hx_index:4,__enum__:"lime.ui.MouseCursor",toString:$estr},RESIZE_NESW:{_hx_index:5,__enum__:"lime.ui.MouseCursor",toString:$estr},RESIZE_NS:{_hx_index:6,__enum__:"lime.ui.MouseCursor",toString:$estr},RESIZE_NWSE:{_hx_index:7,__enum__:"lime.ui.MouseCursor",toString:$estr},RESIZE_WE:{_hx_index:8,__enum__:"lime.ui.MouseCursor",toString:$estr},TEXT:{_hx_index:9,__enum__:"lime.ui.MouseCursor",toString:$estr},WAIT:{_hx_index:10,__enum__:"lime.ui.MouseCursor",toString:$estr},WAIT_ARROW:{_hx_index:11,__enum__:"lime.ui.MouseCursor",toString:$estr},CUSTOM:{_hx_index:12,__enum__:"lime.ui.MouseCursor",toString:$estr}};var lime_ui_MouseWheelMode=$hxEnums["lime.ui.MouseWheelMode"]={__ename__:"lime.ui.MouseWheelMode",__constructs__:["PIXELS","LINES","PAGES","UNKNOWN"],PIXELS:{_hx_index:0,__enum__:"lime.ui.MouseWheelMode",toString:$estr},LINES:{_hx_index:1,__enum__:"lime.ui.MouseWheelMode",toString:$estr},PAGES:{_hx_index:2,__enum__:"lime.ui.MouseWheelMode",toString:$estr},UNKNOWN:{_hx_index:3,__enum__:"lime.ui.MouseWheelMode",toString:$estr}};var lime_ui_Touch=function(x,y,id,dx,dy,pressure,device){this.x=x;this.y=y;this.id=id;this.dx=dx;this.dy=dy;this.pressure=pressure;this.device=device};$hxClasses["lime.ui.Touch"]=lime_ui_Touch;lime_ui_Touch.__name__="lime.ui.Touch";lime_ui_Touch.prototype={device:null,dx:null,dy:null,id:null,pressure:null,x:null,y:null,__class__:lime_ui_Touch};var lime_ui_Window=function(application,attributes){this.onTextInput=new lime_app__$Event_$String_$Void;this.onTextEdit=new lime_app__$Event_$String_$Int_$Int_$Void;this.onRestore=new lime_app__$Event_$Void_$Void;this.onResize=new lime_app__$Event_$Int_$Int_$Void;this.onRenderContextRestored=new lime_app__$Event_$lime_$graphics_$RenderContext_$Void;this.onRenderContextLost=new lime_app__$Event_$Void_$Void;this.onRender=new lime_app__$Event_$lime_$graphics_$RenderContext_$Void;this.onMove=new lime_app__$Event_$Float_$Float_$Void;this.onMouseWheel=new lime_app__$Event_$Float_$Float_$lime_$ui_$MouseWheelMode_$Void;this.onMouseUp=new lime_app__$Event_$Float_$Float_$Int_$Void;this.onMouseMoveRelative=new lime_app__$Event_$Float_$Float_$Void;this.onMouseMove=new lime_app__$Event_$Float_$Float_$Void;this.onMouseDown=new lime_app__$Event_$Float_$Float_$lime_$ui_$MouseButton_$Void;this.onMinimize=new lime_app__$Event_$Void_$Void;this.onLeave=new lime_app__$Event_$Void_$Void;this.onKeyUp=new lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void;this.onKeyDown=new lime_app__$Event_$lime_$ui_$KeyCode_$lime_$ui_$KeyModifier_$Void;this.onFullscreen=new lime_app__$Event_$Void_$Void;this.onFocusOut=new lime_app__$Event_$Void_$Void;this.onFocusIn=new lime_app__$Event_$Void_$Void;this.onExpose=new lime_app__$Event_$Void_$Void;this.onEnter=new lime_app__$Event_$Void_$Void;this.onDropFile=new lime_app__$Event_$String_$Void;this.onDeactivate=new lime_app__$Event_$Void_$Void;this.onClose=new lime_app__$Event_$Void_$Void;this.onActivate=new lime_app__$Event_$Void_$Void;this.application=application;this.__attributes=attributes!=null?attributes:{};if(Object.prototype.hasOwnProperty.call(this.__attributes,"parameters")){this.parameters=this.__attributes.parameters}this.__width=0;this.__height=0;this.__fullscreen=false;this.__scale=1;this.__x=0;this.__y=0;this.__title="";this.id=-1;this.__backend=new lime__$internal_backend_html5_HTML5Window(this)};$hxClasses["lime.ui.Window"]=lime_ui_Window;lime_ui_Window.__name__="lime.ui.Window";lime_ui_Window.prototype={application:null,context:null,element:null,id:null,onActivate:null,onClose:null,onDeactivate:null,onDropFile:null,onEnter:null,onExpose:null,onFocusIn:null,onFocusOut:null,onFullscreen:null,onKeyDown:null,onKeyUp:null,onLeave:null,onMinimize:null,onMouseDown:null,onMouseMove:null,onMouseMoveRelative:null,onMouseUp:null,onMouseWheel:null,onMove:null,onRender:null,onRenderContextLost:null,onRenderContextRestored:null,onResize:null,onRestore:null,onTextEdit:null,onTextInput:null,parameters:null,stage:null,__attributes:null,__backend:null,__fullscreen:null,__height:null,__resizable:null,__scale:null,__title:null,__width:null,__x:null,__y:null,close:function(){this.__backend.close()},set_cursor:function(value){return this.__backend.setCursor(value)},__class__:lime_ui_Window,__properties__:{set_cursor:"set_cursor"}};var lime_utils_AssetBundle=function(){this.data=new haxe_ds_StringMap;this.paths=[]};$hxClasses["lime.utils.AssetBundle"]=lime_utils_AssetBundle;lime_utils_AssetBundle.__name__="lime.utils.AssetBundle";lime_utils_AssetBundle.fromBytes=function(bytes){return lime_utils_AssetBundle.__extractBundle(new haxe_io_BytesInput(bytes))};lime_utils_AssetBundle.loadFromBytes=function(bytes){return lime_app_Future.withValue(lime_utils_AssetBundle.fromBytes(bytes))};lime_utils_AssetBundle.loadFromFile=function(path){return lime_utils__$Bytes_Bytes_$Impl_$.loadFromFile(path).then(lime_utils_AssetBundle.loadFromBytes)};lime_utils_AssetBundle.__extractBundle=function(input){var entries=haxe_zip_Reader.readZip(input);var bundle=new lime_utils_AssetBundle;var _g_head=entries.h;while(_g_head!=null){var val=_g_head.item;_g_head=_g_head.next;if(val.compressed){var this1=bundle.data;var key=val.fileName;var value=lime_utils__$Bytes_Bytes_$Impl_$.decompress(val.data,lime_utils_CompressionAlgorithm.DEFLATE);var _this=this1;if(__map_reserved[key]!=null){_this.setReserved(key,value)}else{_this.h[key]=value}}else{var key1=val.fileName;var value1=val.data;var _this1=bundle.data;if(__map_reserved[key1]!=null){_this1.setReserved(key1,value1)}else{_this1.h[key1]=value1}}bundle.paths.push(val.fileName)}return bundle};lime_utils_AssetBundle.prototype={data:null,paths:null,__class__:lime_utils_AssetBundle};var lime_utils_AssetCache=function(){this.enabled=true;this.audio=new haxe_ds_StringMap;this.font=new haxe_ds_StringMap;this.image=new haxe_ds_StringMap;this.version=776325};$hxClasses["lime.utils.AssetCache"]=lime_utils_AssetCache;lime_utils_AssetCache.__name__="lime.utils.AssetCache";lime_utils_AssetCache.prototype={audio:null,enabled:null,image:null,font:null,version:null,exists:function(id,type){if(type=="IMAGE"||type==null){var _this=this.image;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){return true}}if(type=="FONT"||type==null){var _this1=this.font;if(__map_reserved[id]!=null?_this1.existsReserved(id):_this1.h.hasOwnProperty(id)){return true}}if(type=="SOUND"||type=="MUSIC"||type==null){var _this2=this.audio;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){return true}}return false},set:function(id,type,asset){switch(type){case"FONT":var _this=this.font;if(__map_reserved[id]!=null){_this.setReserved(id,asset)}else{_this.h[id]=asset}break;case"IMAGE":if(!(asset instanceof lime_graphics_Image)){throw new js__$Boot_HaxeError("Cannot cache non-Image asset: "+Std.string(asset)+" as Image")}var _this1=this.image;var value=asset;if(__map_reserved[id]!=null){_this1.setReserved(id,value)}else{_this1.h[id]=value}break;case"MUSIC":case"SOUND":if(!(asset instanceof lime_media_AudioBuffer)){throw new js__$Boot_HaxeError("Cannot cache non-AudioBuffer asset: "+Std.string(asset)+" as AudioBuffer")}var _this2=this.audio;var value1=asset;if(__map_reserved[id]!=null){_this2.setReserved(id,value1)}else{_this2.h[id]=value1}break;default:throw new js__$Boot_HaxeError(type+" assets are not cachable")}},clear:function(prefix){if(prefix==null){this.audio=new haxe_ds_StringMap;this.font=new haxe_ds_StringMap;this.image=new haxe_ds_StringMap}else{var keys=this.audio.keys();while(keys.hasNext()){var key=keys.next();if(StringTools.startsWith(key,prefix)){this.audio.remove(key)}}var keys1=this.font.keys();while(keys1.hasNext()){var key1=keys1.next();if(StringTools.startsWith(key1,prefix)){this.font.remove(key1)}}var keys2=this.image.keys();while(keys2.hasNext()){var key2=keys2.next();if(StringTools.startsWith(key2,prefix)){this.image.remove(key2)}}}},__class__:lime_utils_AssetCache};var lime_utils_AssetLibrary=function(){this.types=new haxe_ds_StringMap;this.sizes=new haxe_ds_StringMap;this.preload=new haxe_ds_StringMap;this.paths=new haxe_ds_StringMap;this.pathGroups=new haxe_ds_StringMap;this.classTypes=new haxe_ds_StringMap;this.cachedText=new haxe_ds_StringMap;this.cachedImages=new haxe_ds_StringMap;this.cachedFonts=new haxe_ds_StringMap;this.cachedBytes=new haxe_ds_StringMap;this.cachedAudioBuffers=new haxe_ds_StringMap;this.onChange=new lime_app__$Event_$Void_$Void;this.bytesLoaded=0;this.bytesTotal=0};$hxClasses["lime.utils.AssetLibrary"]=lime_utils_AssetLibrary;lime_utils_AssetLibrary.__name__="lime.utils.AssetLibrary";lime_utils_AssetLibrary.fromBundle=function(bundle){var _this=bundle.data;if(__map_reserved["library.json"]!=null?_this.existsReserved("library.json"):_this.h.hasOwnProperty("library.json")){var _this1=bundle.data;var manifest=lime_utils_AssetManifest.fromBytes(__map_reserved["library.json"]!=null?_this1.getReserved("library.json"):_this1.h["library.json"]);if(manifest!=null){var library=null;if(manifest.libraryType==null){library=new lime_utils_AssetLibrary}else{var name=manifest.libraryType;var libraryClass=$hxClasses[name];if(libraryClass!=null){library=Type.createInstance(libraryClass,manifest.libraryArgs)}else{lime_utils_Log.warn("Could not find library type: "+manifest.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:122,className:"lime.utils.AssetLibrary",methodName:"fromBundle"});return null}}library.__fromBundle(bundle,manifest);return library}}else{var library1=new lime_utils_AssetLibrary;library1.__fromBundle(bundle);return library1}return null};lime_utils_AssetLibrary.fromManifest=function(manifest){if(manifest==null){return null}var library=null;if(manifest.libraryType==null){library=new lime_utils_AssetLibrary}else{var name=manifest.libraryType;var libraryClass=$hxClasses[name];if(libraryClass!=null){library=Type.createInstance(libraryClass,manifest.libraryArgs)}else{lime_utils_Log.warn("Could not find library type: "+manifest.libraryType,{fileName:"lime/utils/AssetLibrary.hx",lineNumber:160,className:"lime.utils.AssetLibrary",methodName:"fromManifest"});return null}}library.__fromManifest(manifest);return library};lime_utils_AssetLibrary.prototype={onChange:null,assetsLoaded:null,assetsTotal:null,bytesLoaded:null,bytesLoadedCache:null,bytesTotal:null,cachedAudioBuffers:null,cachedBytes:null,cachedFonts:null,cachedImages:null,cachedText:null,classTypes:null,loaded:null,pathGroups:null,paths:null,preload:null,promise:null,sizes:null,types:null,exists:function(id,type){var requestedType=type!=null?js_Boot.__cast(type,String):null;var _this=this.types;var assetType=__map_reserved[id]!=null?_this.getReserved(id):_this.h[id];if(assetType!=null){if(assetType==requestedType||(requestedType=="SOUND"||requestedType=="MUSIC")&&(assetType=="MUSIC"||assetType=="SOUND")){return true}if(requestedType=="BINARY"||requestedType==null||assetType=="BINARY"&&requestedType=="TEXT"){return true}}return false},getAsset:function(id,type){switch(type){case"BINARY":return this.getBytes(id);case"FONT":return this.getFont(id);case"IMAGE":return this.getImage(id);case"MUSIC":case"SOUND":return this.getAudioBuffer(id);case"TEMPLATE":throw new js__$Boot_HaxeError("Not sure how to get template: "+id);case"TEXT":return this.getText(id);default:throw new js__$Boot_HaxeError("Unknown asset type: "+type)}},getAudioBuffer:function(id){var _this=this.cachedAudioBuffers;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedAudioBuffers;if(__map_reserved[id]!=null){return _this1.getReserved(id)}else{return _this1.h[id]}}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return lime_media_AudioBuffer.fromBytes(js_Boot.__cast(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]),haxe_io_Bytes))}else{var _this4=this.paths;return lime_media_AudioBuffer.fromFile(__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id])}}},getBytes:function(id){var _this=this.cachedBytes;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedBytes;if(__map_reserved[id]!=null){return _this1.getReserved(id)}else{return _this1.h[id]}}else{var _this2=this.cachedText;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.cachedText;var bytes=lime_utils__$Bytes_Bytes_$Impl_$.ofString(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id]);var _this4=this.cachedBytes;if(__map_reserved[id]!=null){_this4.setReserved(id,bytes)}else{_this4.h[id]=bytes}return bytes}else{var _this5=this.classTypes;if(__map_reserved[id]!=null?_this5.existsReserved(id):_this5.h.hasOwnProperty(id)){var _this6=this.classTypes;return js_Boot.__cast(Type.createInstance(__map_reserved[id]!=null?_this6.getReserved(id):_this6.h[id],[]),haxe_io_Bytes)}else{var _this7=this.paths;return lime_utils__$Bytes_Bytes_$Impl_$.fromFile(__map_reserved[id]!=null?_this7.getReserved(id):_this7.h[id])}}}},getFont:function(id){var _this=this.cachedFonts;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedFonts;if(__map_reserved[id]!=null){return _this1.getReserved(id)}else{return _this1.h[id]}}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return js_Boot.__cast(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]),lime_text_Font)}else{var _this4=this.paths;return lime_text_Font.fromFile(__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id])}}},getImage:function(id){var _this=this.cachedImages;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedImages;if(__map_reserved[id]!=null){return _this1.getReserved(id)}else{return _this1.h[id]}}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return js_Boot.__cast(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]),lime_graphics_Image)}else{var _this4=this.paths;return lime_graphics_Image.fromFile(__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id])}}},getText:function(id){var _this=this.cachedText;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedText;if(__map_reserved[id]!=null){return _this1.getReserved(id)}else{return _this1.h[id]}}else{var bytes=this.getBytes(id);if(bytes==null){return null}else{return bytes.getString(0,bytes.length)}}},isLocal:function(id,type){var _this=this.classTypes;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){return true}var requestedType=type!=null?js_Boot.__cast(type,String):null;if(requestedType==null){var _this1=this.cachedBytes;if(!(__map_reserved[id]!=null?_this1.existsReserved(id):_this1.h.hasOwnProperty(id))){var _this2=this.cachedText;if(__map_reserved[id]!=null){return _this2.existsReserved(id)}else{return _this2.h.hasOwnProperty(id)}}else{return true}}else{switch(requestedType){case"FONT":var _this3=this.cachedFonts;if(__map_reserved[id]!=null){return _this3.existsReserved(id)}else{return _this3.h.hasOwnProperty(id)}break;case"IMAGE":var _this4=this.cachedImages;if(__map_reserved[id]!=null){return _this4.existsReserved(id)}else{return _this4.h.hasOwnProperty(id)}break;case"MUSIC":case"SOUND":var _this5=this.cachedAudioBuffers;if(__map_reserved[id]!=null){return _this5.existsReserved(id)}else{return _this5.h.hasOwnProperty(id)}break;default:var _this6=this.cachedBytes;if(!(__map_reserved[id]!=null?_this6.existsReserved(id):_this6.h.hasOwnProperty(id))){var _this7=this.cachedText;if(__map_reserved[id]!=null){return _this7.existsReserved(id)}else{return _this7.h.hasOwnProperty(id)}}else{return true}}}},load:function(){if(this.loaded){return lime_app_Future.withValue(this)}if(this.promise==null){this.promise=new lime_app_Promise;this.bytesLoadedCache=new haxe_ds_StringMap;this.assetsLoaded=0;this.assetsTotal=1;var id=this.preload.keys();while(id.hasNext()){var id1=id.next();var _this=this.preload;if(!(__map_reserved[id1]!=null?_this.getReserved(id1):_this.h[id1])){continue}var _this1=this.types;lime_utils_Log.verbose("Preloading asset: "+id1+" ["+(__map_reserved[id1]!=null?_this1.getReserved(id1):_this1.h[id1])+"]",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:405,className:"lime.utils.AssetLibrary",methodName:"load"});var _this2=this.types;var _g=__map_reserved[id1]!=null?_this2.getReserved(id1):_this2.h[id1];if(_g!=null){switch(_g){case"BINARY":this.assetsTotal++;var future=this.loadBytes(id1);future.onProgress(function(id2,f){return function(bytesLoaded,bytesTotal){f[0](id2[0],bytesLoaded,bytesTotal)}}([id1],[$bind(this,this.load_onProgress)]));future.onError(function(id3,f1){return function(message){f1[0](id3[0],message)}}([id1],[$bind(this,this.load_onError)]));future.onComplete(function(id4,f2){return function(bytes){f2[0](id4[0],bytes)}}([id1],[$bind(this,this.loadBytes_onComplete)]));break;case"FONT":this.assetsTotal++;var future1=this.loadFont(id1);future1.onProgress(function(id5,f3){return function(bytesLoaded1,bytesTotal1){f3[0](id5[0],bytesLoaded1,bytesTotal1)}}([id1],[$bind(this,this.load_onProgress)]));future1.onError(function(id6,f4){return function(message1){f4[0](id6[0],message1)}}([id1],[$bind(this,this.load_onError)]));future1.onComplete(function(id7,f5){return function(font){f5[0](id7[0],font)}}([id1],[$bind(this,this.loadFont_onComplete)]));break;case"IMAGE":this.assetsTotal++;var future2=this.loadImage(id1);future2.onProgress(function(id8,f6){return function(bytesLoaded2,bytesTotal2){f6[0](id8[0],bytesLoaded2,bytesTotal2)}}([id1],[$bind(this,this.load_onProgress)]));future2.onError(function(id9,f7){return function(message2){f7[0](id9[0],message2)}}([id1],[$bind(this,this.load_onError)]));future2.onComplete(function(id10,f8){return function(image){f8[0](id10[0],image)}}([id1],[$bind(this,this.loadImage_onComplete)]));break;case"MUSIC":case"SOUND":this.assetsTotal++;var future3=this.loadAudioBuffer(id1);future3.onProgress(function(id11,f9){return function(bytesLoaded3,bytesTotal3){f9[0](id11[0],bytesLoaded3,bytesTotal3)}}([id1],[$bind(this,this.load_onProgress)]));future3.onError(function(id12,f10){return function(message3){f10[0](id12[0],message3)}}([id1],[$bind(this,this.loadAudioBuffer_onError)]));future3.onComplete(function(id13,f11){return function(audioBuffer){f11[0](id13[0],audioBuffer)}}([id1],[$bind(this,this.loadAudioBuffer_onComplete)]));break;case"TEXT":this.assetsTotal++;var future4=this.loadText(id1);future4.onProgress(function(id14,f12){return function(bytesLoaded4,bytesTotal4){f12[0](id14[0],bytesLoaded4,bytesTotal4)}}([id1],[$bind(this,this.load_onProgress)]));future4.onError(function(id15,f13){return function(message4){f13[0](id15[0],message4)}}([id1],[$bind(this,this.load_onError)]));future4.onComplete(function(id16,f14){return function(text){f14[0](id16[0],text)}}([id1],[$bind(this,this.loadText_onComplete)]));break;default:}}}this.__assetLoaded(null)}return this.promise.future},loadAudioBuffer:function(id){var _this=this.cachedAudioBuffers;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedAudioBuffers;return lime_app_Future.withValue(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id])}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return lime_app_Future.withValue(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]))}else{var _this4=this.pathGroups;if(__map_reserved[id]!=null?_this4.existsReserved(id):_this4.h.hasOwnProperty(id)){var _this5=this.pathGroups;return lime_media_AudioBuffer.loadFromFiles(__map_reserved[id]!=null?_this5.getReserved(id):_this5.h[id])}else{var _this6=this.paths;return lime_media_AudioBuffer.loadFromFile(__map_reserved[id]!=null?_this6.getReserved(id):_this6.h[id])}}}},loadBytes:function(id){var _this=this.cachedBytes;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedBytes;return lime_app_Future.withValue(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id])}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return lime_app_Future.withValue(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]))}else{var _this4=this.paths;return lime_utils__$Bytes_Bytes_$Impl_$.loadFromFile(__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id])}}},loadFont:function(id){var _this=this.cachedFonts;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedFonts;return lime_app_Future.withValue(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id])}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;var font=Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]);return font.__loadFromName(font.name)}else{var _this4=this.paths;return lime_text_Font.loadFromName(__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id])}}},loadImage:function(id){var _gthis=this;var _this=this.cachedImages;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedImages;return lime_app_Future.withValue(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id])}else{var _this2=this.classTypes;if(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id)){var _this3=this.classTypes;return lime_app_Future.withValue(Type.createInstance(__map_reserved[id]!=null?_this3.getReserved(id):_this3.h[id],[]))}else{var _this4=this.cachedBytes;if(__map_reserved[id]!=null?_this4.existsReserved(id):_this4.h.hasOwnProperty(id)){var _this5=this.cachedBytes;return lime_graphics_Image.loadFromBytes(__map_reserved[id]!=null?_this5.getReserved(id):_this5.h[id]).then(function(image){_gthis.cachedBytes.remove(id);var _this6=_gthis.cachedImages;if(__map_reserved[id]!=null){_this6.setReserved(id,image)}else{_this6.h[id]=image}return lime_app_Future.withValue(image)})}else{var _this7=this.paths;return lime_graphics_Image.loadFromFile(__map_reserved[id]!=null?_this7.getReserved(id):_this7.h[id])}}}},loadText:function(id){var _this=this.cachedText;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.cachedText;return lime_app_Future.withValue(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id])}else{var tmp;var _this2=this.cachedBytes;if(!(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id))){var _this3=this.classTypes;tmp=__map_reserved[id]!=null?_this3.existsReserved(id):_this3.h.hasOwnProperty(id)}else{tmp=true}if(tmp){var bytes=this.getBytes(id);if(bytes==null){return lime_app_Future.withValue(null)}else{var text=bytes.getString(0,bytes.length);var _this4=this.cachedText;if(__map_reserved[id]!=null){_this4.setReserved(id,text)}else{_this4.h[id]=text}return lime_app_Future.withValue(text)}}else{var request=new lime_net__$HTTPRequest_$String;var _this5=this.paths;return request.load(__map_reserved[id]!=null?_this5.getReserved(id):_this5.h[id])}}},unload:function(){},__assetLoaded:function(id){this.assetsLoaded++;if(id!=null){var _this=this.types;lime_utils_Log.verbose("Loaded asset: "+id+" ["+(__map_reserved[id]!=null?_this.getReserved(id):_this.h[id])+"] ("+(this.assetsLoaded-1)+"/"+(this.assetsTotal-1)+")",{fileName:"lime/utils/AssetLibrary.hx",lineNumber:619,className:"lime.utils.AssetLibrary",methodName:"__assetLoaded"})}if(id!=null){var size;var _this1=this.sizes;if(__map_reserved[id]!=null?_this1.existsReserved(id):_this1.h.hasOwnProperty(id)){var _this2=this.sizes;size=__map_reserved[id]!=null?_this2.getReserved(id):_this2.h[id]}else{size=0}var _this3=this.bytesLoadedCache;if(!(__map_reserved[id]!=null?_this3.existsReserved(id):_this3.h.hasOwnProperty(id))){this.bytesLoaded+=size}else{var _this4=this.bytesLoadedCache;var cache=__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id];if(cache<size){this.bytesLoaded+=size-cache}}var _this5=this.bytesLoadedCache;if(__map_reserved[id]!=null){_this5.setReserved(id,size)}else{_this5.h[id]=size}}if(this.assetsLoaded<this.assetsTotal){this.promise.progress(this.bytesLoaded,this.bytesTotal)}else{this.loaded=true;this.promise.progress(this.bytesTotal,this.bytesTotal);this.promise.complete(this)}},__cacheBreak:function(path){return lime_utils_Assets.__cacheBreak(path)},__fromBundle:function(bundle,manifest){if(manifest!=null){var id;var data;var type;var _g=0;var _g1=manifest.assets;while(_g<_g1.length){var asset=_g1[_g];++_g;id=Object.prototype.hasOwnProperty.call(asset,"id")?asset.id:asset.path;var key=asset.path;var _this=bundle.data;data=__map_reserved[key]!=null?_this.getReserved(key):_this.h[key];if(Object.prototype.hasOwnProperty.call(asset,"type")){type=asset.type;if(type=="TEXT"){var value=data!=null?Std.string(data):null;var _this1=this.cachedText;if(__map_reserved[id]!=null){_this1.setReserved(id,value)}else{_this1.h[id]=value}}else{var _this2=this.cachedBytes;if(__map_reserved[id]!=null){_this2.setReserved(id,data)}else{_this2.h[id]=data}}var value1=asset.type;var _this3=this.types;if(__map_reserved[id]!=null){_this3.setReserved(id,value1)}else{_this3.h[id]=value1}}else{var _this4=this.cachedBytes;if(__map_reserved[id]!=null){_this4.setReserved(id,data)}else{_this4.h[id]=data}var _this5=this.types;var value2="BINARY";if(__map_reserved[id]!=null){_this5.setReserved(id,value2)}else{_this5.h[id]=value2}}}}else{var _g2=0;var _g11=bundle.paths;while(_g2<_g11.length){var path=_g11[_g2];++_g2;var _this6=bundle.data;var value3=__map_reserved[path]!=null?_this6.getReserved(path):_this6.h[path];var _this7=this.cachedBytes;if(__map_reserved[path]!=null){_this7.setReserved(path,value3)}else{_this7.h[path]=value3}var _this8=this.types;var value4="BINARY";if(__map_reserved[path]!=null){_this8.setReserved(path,value4)}else{_this8.h[path]=value4}}}},__fromManifest:function(manifest){var hasSize=manifest.version>=2;var size;var id;var pathGroup;var classRef;var basePath=manifest.rootPath;if(basePath==null){basePath=""}if(basePath!=""){basePath+="/"}var _g=0;var _g1=manifest.assets;while(_g<_g1.length){var asset=_g1[_g];++_g;size=hasSize&&Object.prototype.hasOwnProperty.call(asset,"size")?asset.size:100;id=Object.prototype.hasOwnProperty.call(asset,"id")?asset.id:asset.path;if(Object.prototype.hasOwnProperty.call(asset,"path")){var this1=this.paths;var value=this.__cacheBreak(this.__resolvePath(basePath+Std.string(Reflect.field(asset,"path"))));var _this=this1;if(__map_reserved[id]!=null){_this.setReserved(id,value)}else{_this.h[id]=value}}if(Object.prototype.hasOwnProperty.call(asset,"pathGroup")){pathGroup=Reflect.field(asset,"pathGroup");var _g2=0;var _g11=pathGroup.length;while(_g2<_g11){var i=_g2++;pathGroup[i]=this.__cacheBreak(this.__resolvePath(basePath+pathGroup[i]))}var _this1=this.pathGroups;if(__map_reserved[id]!=null){_this1.setReserved(id,pathGroup)}else{_this1.h[id]=pathGroup}}var _this2=this.sizes;if(__map_reserved[id]!=null){_this2.setReserved(id,size)}else{_this2.h[id]=size}var value1=asset.type;var _this3=this.types;if(__map_reserved[id]!=null){_this3.setReserved(id,value1)}else{_this3.h[id]=value1}if(Object.prototype.hasOwnProperty.call(asset,"preload")){var value2=Reflect.field(asset,"preload");var _this4=this.preload;if(__map_reserved[id]!=null){_this4.setReserved(id,value2)}else{_this4.h[id]=value2}}if(Object.prototype.hasOwnProperty.call(asset,"className")){var name=Reflect.field(asset,"className");classRef=$hxClasses[name];var _this5=this.classTypes;if(__map_reserved[id]!=null){_this5.setReserved(id,classRef)}else{_this5.h[id]=classRef}}}this.bytesTotal=0;var _g21=0;var _g3=manifest.assets;while(_g21<_g3.length){var asset1=_g3[_g21];++_g21;id=Object.prototype.hasOwnProperty.call(asset1,"id")?asset1.id:asset1.path;var tmp;var tmp1;var _this6=this.preload;if(__map_reserved[id]!=null?_this6.existsReserved(id):_this6.h.hasOwnProperty(id)){var _this7=this.preload;tmp1=__map_reserved[id]!=null?_this7.getReserved(id):_this7.h[id]}else{tmp1=false}if(tmp1){var _this8=this.sizes;tmp=__map_reserved[id]!=null?_this8.existsReserved(id):_this8.h.hasOwnProperty(id)}else{tmp=false}if(tmp){var _this9=this.sizes;this.bytesTotal+=__map_reserved[id]!=null?_this9.getReserved(id):_this9.h[id]}}},__resolvePath:function(path){path=StringTools.replace(path,"\\","/");var colonIdx=path.indexOf(":");if(StringTools.startsWith(path,"http")&&colonIdx>0){var lastSlashIdx=colonIdx+3;path=HxOverrides.substr(path,0,lastSlashIdx)+StringTools.replace(HxOverrides.substr(path,lastSlashIdx,null),"//","/")}else{path=StringTools.replace(path,"//","/")}if(path.indexOf("./")>-1){var split=path.split("/");var newPath=[];var _g=0;var _g1=split.length;while(_g<_g1){var i=_g++;if(split[i]==".."){if(i==0||newPath[i-1]==".."){newPath.push("..")}else{newPath.pop()}}else if(split[i]=="."){if(i==0){newPath.push(".")}}else{newPath.push(split[i])}}path=newPath.join("/")}return path},loadAudioBuffer_onComplete:function(id,audioBuffer){var _this=this.cachedAudioBuffers;if(__map_reserved[id]!=null){_this.setReserved(id,audioBuffer)}else{_this.h[id]=audioBuffer}var _this1=this.pathGroups;if(__map_reserved[id]!=null?_this1.existsReserved(id):_this1.h.hasOwnProperty(id)){var _this2=this.pathGroups;var pathGroup=__map_reserved[id]!=null?_this2.getReserved(id):_this2.h[id];var otherID=this.pathGroups.keys();while(otherID.hasNext()){var otherID1=otherID.next();if(otherID1==id){continue}var _g=0;while(_g<pathGroup.length){var path=pathGroup[_g++];var _this3=this.pathGroups;if((__map_reserved[otherID1]!=null?_this3.getReserved(otherID1):_this3.h[otherID1]).indexOf(path)>-1){var _this4=this.cachedAudioBuffers;if(__map_reserved[otherID1]!=null){_this4.setReserved(otherID1,audioBuffer)}else{_this4.h[otherID1]=audioBuffer}break}}}}this.__assetLoaded(id)},loadAudioBuffer_onError:function(id,message){if(message!=null&&message!=""){lime_utils_Log.warn('Could not load "'+id+'": '+Std.string(message),{fileName:"lime/utils/AssetLibrary.hx",lineNumber:865,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"})}else{lime_utils_Log.warn('Could not load "'+id+'"',{fileName:"lime/utils/AssetLibrary.hx",lineNumber:869,className:"lime.utils.AssetLibrary",methodName:"loadAudioBuffer_onError"})}this.loadAudioBuffer_onComplete(id,new lime_media_AudioBuffer)},loadBytes_onComplete:function(id,bytes){var _this=this.cachedBytes;if(__map_reserved[id]!=null){_this.setReserved(id,bytes)}else{_this.h[id]=bytes}this.__assetLoaded(id)},loadFont_onComplete:function(id,font){var _this=this.cachedFonts;if(__map_reserved[id]!=null){_this.setReserved(id,font)}else{_this.h[id]=font}this.__assetLoaded(id)},loadImage_onComplete:function(id,image){var _this=this.cachedImages;if(__map_reserved[id]!=null){_this.setReserved(id,image)}else{_this.h[id]=image}this.__assetLoaded(id)},loadText_onComplete:function(id,text){var _this=this.cachedText;if(__map_reserved[id]!=null){_this.setReserved(id,text)}else{_this.h[id]=text}this.__assetLoaded(id)},load_onError:function(id,message){if(message!=null&&message!=""){this.promise.error('Error loading asset "'+id+'": '+Std.string(message))}else{this.promise.error('Error loading asset "'+id+'"')}},load_onProgress:function(id,bytesLoaded,bytesTotal){if(bytesLoaded>0){var _this=this.sizes;var size=__map_reserved[id]!=null?_this.getReserved(id):_this.h[id];var percent;if(bytesTotal>0){percent=bytesLoaded/bytesTotal;if(percent>1){percent=1}bytesLoaded=Math.floor(percent*size)}else if(bytesLoaded>size){bytesLoaded=size}var _this1=this.bytesLoadedCache;if(__map_reserved[id]!=null?_this1.existsReserved(id):_this1.h.hasOwnProperty(id)){var _this2=this.bytesLoadedCache;var cache=__map_reserved[id]!=null?_this2.getReserved(id):_this2.h[id];if(bytesLoaded!=cache){this.bytesLoaded+=bytesLoaded-cache}}else{this.bytesLoaded+=bytesLoaded}var _this3=this.bytesLoadedCache;if(__map_reserved[id]!=null){_this3.setReserved(id,bytesLoaded)}else{_this3.h[id]=bytesLoaded}this.promise.progress(this.bytesLoaded,this.bytesTotal)}},__class__:lime_utils_AssetLibrary};var lime_utils_AssetManifest=function(){this.assets=[];this.libraryArgs=[];this.version=2};$hxClasses["lime.utils.AssetManifest"]=lime_utils_AssetManifest;lime_utils_AssetManifest.__name__="lime.utils.AssetManifest";lime_utils_AssetManifest.fromBytes=function(bytes,rootPath){if(bytes!=null){return lime_utils_AssetManifest.parse(bytes.getString(0,bytes.length),rootPath)}else{return null}};lime_utils_AssetManifest.loadFromFile=function(path,rootPath){path=lime_utils_AssetManifest.__resolvePath(path);rootPath=lime_utils_AssetManifest.__resolveRootPath(rootPath,path);if(path==null){return null}return lime_utils__$Bytes_Bytes_$Impl_$.loadFromFile(path).then(function(bytes){return lime_app_Future.withValue(lime_utils_AssetManifest.fromBytes(bytes,rootPath))})};lime_utils_AssetManifest.parse=function(data,rootPath){if(data==null||data==""){return null}var manifestData=JSON.parse(data);var manifest=new lime_utils_AssetManifest;if(Object.prototype.hasOwnProperty.call(manifestData,"name")){manifest.name=manifestData.name}if(Object.prototype.hasOwnProperty.call(manifestData,"libraryType")){manifest.libraryType=manifestData.libraryType}if(Object.prototype.hasOwnProperty.call(manifestData,"libraryArgs")){manifest.libraryArgs=manifestData.libraryArgs}if(Object.prototype.hasOwnProperty.call(manifestData,"assets")){var assets=manifestData.assets;if(Object.prototype.hasOwnProperty.call(manifestData,"version")&&manifestData.version<=2){manifest.assets=haxe_Unserializer.run(assets)}else{manifest.assets=assets}}if(Object.prototype.hasOwnProperty.call(manifestData,"rootPath")){manifest.rootPath=manifestData.rootPath}if(rootPath!=null&&rootPath!=""){if(manifest.rootPath==null||manifest.rootPath==""){manifest.rootPath=rootPath}else{manifest.rootPath=rootPath+"/"+manifest.rootPath}}return manifest};lime_utils_AssetManifest.__resolvePath=function(path){if(path==null){return null}var queryIndex=path.indexOf("?");var basePath;if(queryIndex>-1){basePath=HxOverrides.substr(path,0,queryIndex)}else{basePath=path}basePath=StringTools.replace(basePath,"\\","/");while(StringTools.endsWith(basePath,"/"))basePath=HxOverrides.substr(basePath,0,basePath.length-1);if(StringTools.endsWith(basePath,".bundle")){if(queryIndex>-1){return basePath+"/library.json"+HxOverrides.substr(path,queryIndex,null)}else{return basePath+"/library.json"}}else{return path}};lime_utils_AssetManifest.__resolveRootPath=function(rootPath,path){if(rootPath!=null){return rootPath}var queryIndex=path.indexOf("?");if(queryIndex>-1){rootPath=HxOverrides.substr(path,0,queryIndex)}else{rootPath=path}rootPath=StringTools.replace(rootPath,"\\","/");while(StringTools.endsWith(rootPath,"/")){if(rootPath=="/"){return rootPath}rootPath=HxOverrides.substr(rootPath,0,rootPath.length-1)}if(StringTools.endsWith(rootPath,".bundle")){return rootPath}else{return haxe_io_Path.directory(rootPath)}};lime_utils_AssetManifest.prototype={assets:null,libraryArgs:null,libraryType:null,name:null,rootPath:null,version:null,__class__:lime_utils_AssetManifest};var lime_utils_Assets=function(){};$hxClasses["lime.utils.Assets"]=lime_utils_Assets;lime_utils_Assets.__name__="lime.utils.Assets";lime_utils_Assets.exists=function(id,type){if(type==null){type="BINARY"}var colonIndex=id.indexOf(":");var symbol_symbolName=id.substring(colonIndex+1);var symbol_library=lime_utils_Assets.getLibrary(id.substring(0,colonIndex));if(symbol_library!=null){return symbol_library.exists(symbol_symbolName,type)}return false};lime_utils_Assets.getAsset=function(id,type,useCache){if(useCache&&lime_utils_Assets.cache.enabled){switch(type){case"BINARY":case"TEXT":useCache=false;break;case"FONT":var _this=lime_utils_Assets.cache.font;var font=__map_reserved[id]!=null?_this.getReserved(id):_this.h[id];if(font!=null){return font}break;case"IMAGE":var _this1=lime_utils_Assets.cache.image;var image=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id];if(lime_utils_Assets.isValidImage(image)){return image}break;case"MUSIC":case"SOUND":var _this2=lime_utils_Assets.cache.audio;var audio=__map_reserved[id]!=null?_this2.getReserved(id):_this2.h[id];if(lime_utils_Assets.isValidAudio(audio)){return audio}break;case"TEMPLATE":throw new js__$Boot_HaxeError("Not sure how to get template: "+id);default:return null}}var colonIndex=id.indexOf(":");var symbol_libraryName=id.substring(0,colonIndex);var symbol_symbolName=id.substring(colonIndex+1);var symbol_library=lime_utils_Assets.getLibrary(symbol_libraryName);if(symbol_library!=null){if(symbol_library.exists(symbol_symbolName,type)){if(symbol_library.isLocal(symbol_symbolName,type)){var asset=symbol_library.getAsset(symbol_symbolName,type);if(useCache&&lime_utils_Assets.cache.enabled){lime_utils_Assets.cache.set(id,type,asset)}return asset}else{lime_utils_Log.error(type+' asset "'+id+'" exists, but only asynchronously',{fileName:"lime/utils/Assets.hx",lineNumber:134,className:"lime.utils.Assets",methodName:"getAsset"})}}else{lime_utils_Log.error("There is no "+type+' asset with an ID of "'+id+'"',{fileName:"lime/utils/Assets.hx",lineNumber:139,className:"lime.utils.Assets",methodName:"getAsset"})}}else{lime_utils_Log.error(lime_utils_Assets.__libraryNotFound(symbol_libraryName),{fileName:"lime/utils/Assets.hx",lineNumber:144,className:"lime.utils.Assets",methodName:"getAsset"})}return null};lime_utils_Assets.getAudioBuffer=function(id,useCache){if(useCache==null){useCache=true}return lime_utils_Assets.getAsset(id,"SOUND",useCache)};lime_utils_Assets.getBytes=function(id){return lime_utils_Assets.getAsset(id,"BINARY",false)};lime_utils_Assets.getImage=function(id,useCache){if(useCache==null){useCache=true}return lime_utils_Assets.getAsset(id,"IMAGE",useCache)};lime_utils_Assets.getLibrary=function(name){if(name==null||name==""){name="default"}var _this=lime_utils_Assets.libraries;if(__map_reserved[name]!=null){return _this.getReserved(name)}else{return _this.h[name]}};lime_utils_Assets.getText=function(id){return lime_utils_Assets.getAsset(id,"TEXT",false)};lime_utils_Assets.isLocal=function(id,type,useCache){if(useCache==null){useCache=true}if(useCache&&lime_utils_Assets.cache.enabled){if(lime_utils_Assets.cache.exists(id,type)){return true}}var colonIndex=id.indexOf(":");var symbol_symbolName=id.substring(colonIndex+1);var symbol_library=lime_utils_Assets.getLibrary(id.substring(0,colonIndex));if(symbol_library!=null){return symbol_library.isLocal(symbol_symbolName,type)}else{return false}};lime_utils_Assets.isValidAudio=function(buffer){return buffer!=null};lime_utils_Assets.isValidImage=function(image){if(image!=null){return image.buffer!=null}else{return false}};lime_utils_Assets.loadLibrary=function(id){var promise=new lime_app_Promise;var library=lime_utils_Assets.getLibrary(id);if(library!=null){return library.load()}var path=id;var rootPath=null;var _this=lime_utils_Assets.bundlePaths;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=lime_utils_Assets.bundlePaths;lime_utils_AssetBundle.loadFromFile(__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]).onComplete(function(bundle){if(bundle==null){promise.error('Cannot load bundle for library "'+id+'"');return}var library1=lime_utils_AssetLibrary.fromBundle(bundle);if(library1==null){promise.error('Cannot open library "'+id+'"')}else{var _this2=lime_utils_Assets.libraries;if(__map_reserved[id]!=null){_this2.setReserved(id,library1)}else{_this2.h[id]=library1}library1.onChange.add(($_=lime_utils_Assets.onChange,$bind($_,$_.dispatch)));var tmp=library1.load();promise.completeWith(tmp)}}).onError(function(_){promise.error('There is no asset library with an ID of "'+id+'"')})}else{var _this3=lime_utils_Assets.libraryPaths;if(__map_reserved[id]!=null?_this3.existsReserved(id):_this3.h.hasOwnProperty(id)){var _this4=lime_utils_Assets.libraryPaths;path=__map_reserved[id]!=null?_this4.getReserved(id):_this4.h[id];rootPath=(lime_utils_Assets.defaultRootPath!=""?lime_utils_Assets.defaultRootPath+"/":"")+haxe_io_Path.directory(path)}else{if(StringTools.endsWith(path,".bundle")){rootPath=path;path+="/library.json"}rootPath=(lime_utils_Assets.defaultRootPath!=""?lime_utils_Assets.defaultRootPath+"/":"")+haxe_io_Path.directory(path);path=lime_utils_Assets.__cacheBreak(path)}lime_utils_AssetManifest.loadFromFile(path,rootPath).onComplete(function(manifest){if(manifest==null){promise.error('Cannot parse asset manifest for library "'+id+'"');return}var library2=lime_utils_AssetLibrary.fromManifest(manifest);if(library2==null){promise.error('Cannot open library "'+id+'"')}else{var _this5=lime_utils_Assets.libraries;if(__map_reserved[id]!=null){_this5.setReserved(id,library2)}else{_this5.h[id]=library2}library2.onChange.add(($_=lime_utils_Assets.onChange,$bind($_,$_.dispatch)));var tmp1=library2.load();promise.completeWith(tmp1)}}).onError(function(_1){promise.error('There is no asset library with an ID of "'+id+'"')})}return promise.future};lime_utils_Assets.registerLibrary=function(name,library){var _this=lime_utils_Assets.libraries;if(__map_reserved[name]!=null?_this.existsReserved(name):_this.h.hasOwnProperty(name)){var _this1=lime_utils_Assets.libraries;if((__map_reserved[name]!=null?_this1.getReserved(name):_this1.h[name])==library){return}else{lime_utils_Assets.unloadLibrary(name)}}if(library!=null){library.onChange.add(lime_utils_Assets.library_onChange)}var _this2=lime_utils_Assets.libraries;if(__map_reserved[name]!=null){_this2.setReserved(name,library)}else{_this2.h[name]=library}};lime_utils_Assets.unloadLibrary=function(name){var _this=lime_utils_Assets.libraries;var library=__map_reserved[name]!=null?_this.getReserved(name):_this.h[name];if(library!=null){lime_utils_Assets.cache.clear(name+":");library.onChange.remove(lime_utils_Assets.library_onChange);library.unload()}lime_utils_Assets.libraries.remove(name)};lime_utils_Assets.__cacheBreak=function(path){if(lime_utils_Assets.cache.version>0){if(path.indexOf("?")>-1){path+="&"+lime_utils_Assets.cache.version}else{path+="?"+lime_utils_Assets.cache.version}}return path};lime_utils_Assets.__libraryNotFound=function(name){if(name==null||name==""){name="default"}if(lime_app_Application.current!=null&&lime_app_Application.current.__preloader!=null&&!lime_app_Application.current.__preloader.complete){return'There is no asset library named "'+name+'", or it is not yet preloaded'}else{return'There is no asset library named "'+name+'"'}};lime_utils_Assets.library_onChange=function(){lime_utils_Assets.cache.clear();lime_utils_Assets.onChange.dispatch()};var lime_utils_BytePointerData=function(bytes,offset){this.bytes=bytes;this.offset=offset};$hxClasses["lime.utils.BytePointerData"]=lime_utils_BytePointerData;lime_utils_BytePointerData.__name__="lime.utils.BytePointerData";lime_utils_BytePointerData.prototype={bytes:null,offset:null,__class__:lime_utils_BytePointerData};var lime_utils__$Bytes_Bytes_$Impl_$={};$hxClasses["lime.utils._Bytes.Bytes_Impl_"]=lime_utils__$Bytes_Bytes_$Impl_$;lime_utils__$Bytes_Bytes_$Impl_$.__name__="lime.utils._Bytes.Bytes_Impl_";lime_utils__$Bytes_Bytes_$Impl_$._new=function(length,bytesData){return new haxe_io_Bytes(bytesData)};lime_utils__$Bytes_Bytes_$Impl_$.decompress=function(this1,algorithm){switch(algorithm._hx_index){case 0:return lime__$internal_format_Deflate.decompress(this1);case 1:return lime__$internal_format_GZip.decompress(this1);case 2:return lime__$internal_format_LZMA.decompress(this1);case 3:return lime__$internal_format_Zlib.decompress(this1)}};lime_utils__$Bytes_Bytes_$Impl_$.fromBytes=function(bytes){if(bytes==null){return null}return lime_utils__$Bytes_Bytes_$Impl_$._new(bytes.length,bytes.b.bufferValue)};lime_utils__$Bytes_Bytes_$Impl_$.fromFile=function(path){return null};lime_utils__$Bytes_Bytes_$Impl_$.loadFromFile=function(path){return(new lime_net__$HTTPRequest_$lime_$utils_$Bytes).load(path)};lime_utils__$Bytes_Bytes_$Impl_$.ofString=function(s){var bytes=haxe_io_Bytes.ofString(s);return lime_utils__$Bytes_Bytes_$Impl_$._new(bytes.length,bytes.b.bufferValue)};var lime_utils_CompressionAlgorithm=$hxEnums["lime.utils.CompressionAlgorithm"]={__ename__:"lime.utils.CompressionAlgorithm",__constructs__:["DEFLATE","GZIP","LZMA","ZLIB"],DEFLATE:{_hx_index:0,__enum__:"lime.utils.CompressionAlgorithm",toString:$estr},GZIP:{_hx_index:1,__enum__:"lime.utils.CompressionAlgorithm",toString:$estr},LZMA:{_hx_index:2,__enum__:"lime.utils.CompressionAlgorithm",toString:$estr},ZLIB:{_hx_index:3,__enum__:"lime.utils.CompressionAlgorithm",toString:$estr}};var lime_utils_Log=function(){};$hxClasses["lime.utils.Log"]=lime_utils_Log;lime_utils_Log.__name__="lime.utils.Log";lime_utils_Log.error=function(message,info){if(lime_utils_Log.level>=1){var message1="["+info.className+"] ERROR: "+Std.string(message);if(lime_utils_Log.throwErrors){throw new js__$Boot_HaxeError(message1)}else{console.error(message1)}}};lime_utils_Log.info=function(message,info){if(lime_utils_Log.level>=3){console.info("["+info.className+"] "+Std.string(message))}};lime_utils_Log.verbose=function(message,info){if(lime_utils_Log.level>=5){console.log("["+info.className+"] "+Std.string(message))}};lime_utils_Log.warn=function(message,info){if(lime_utils_Log.level>=2){console.warn("["+info.className+"] WARNING: "+Std.string(message))}};var lime_utils_Preloader=function(){this.bytesTotalCache=new haxe_ds_StringMap;this.bytesLoadedCache2=new haxe_ds_StringMap;this.bytesLoadedCache=new haxe_ds_ObjectMap;this.onProgress=new lime_app__$Event_$Int_$Int_$Void;this.onComplete=new lime_app__$Event_$Void_$Void;this.bytesLoaded=0;this.bytesTotal=0;this.libraries=[];this.libraryNames=[];this.onProgress.add($bind(this,this.update))};$hxClasses["lime.utils.Preloader"]=lime_utils_Preloader;lime_utils_Preloader.__name__="lime.utils.Preloader";lime_utils_Preloader.prototype={complete:null,onComplete:null,onProgress:null,bytesLoaded:null,bytesLoadedCache:null,bytesLoadedCache2:null,bytesTotal:null,bytesTotalCache:null,initLibraryNames:null,libraries:null,libraryNames:null,loadedLibraries:null,preloadComplete:null,preloadStarted:null,simulateProgress:null,addLibrary:function(library){this.libraries.push(library)},addLibraryName:function(name){if(this.libraryNames.indexOf(name)==-1){this.libraryNames.push(name)}},load:function(){var _gthis=this;var _g=0;var _g1=this.libraries;while(_g<_g1.length)this.bytesTotal+=_g1[_g++].bytesTotal;this.loadedLibraries=-1;this.preloadStarted=false;var _g2=0;var _g3=this.libraries;while(_g2<_g3.length){var library=[_g3[_g2]];++_g2;lime_utils_Log.verbose("Preloading asset library",{fileName:"lime/utils/Preloader.hx",lineNumber:132,className:"lime.utils.Preloader",methodName:"load"});library[0].load().onProgress(function(library1){return function(loaded,total){if(_gthis.bytesLoadedCache.h.__keys__[library1[0].__id__]==null){_gthis.bytesLoaded+=loaded}else{_gthis.bytesLoaded+=loaded-_gthis.bytesLoadedCache.h[library1[0].__id__]}_gthis.bytesLoadedCache.set(library1[0],loaded);if(!_gthis.simulateProgress){_gthis.onProgress.dispatch(_gthis.bytesLoaded,_gthis.bytesTotal)}}}(library)).onComplete(function(library2){return function(_){if(_gthis.bytesLoadedCache.h.__keys__[library2[0].__id__]==null){_gthis.bytesLoaded+=library2[0].bytesTotal}else{_gthis.bytesLoaded+=library2[0].bytesTotal-_gthis.bytesLoadedCache.h[library2[0].__id__]}_gthis.loadedAssetLibrary()}}(library)).onError(function(){return function(e){lime_utils_Log.error(e,{fileName:"lime/utils/Preloader.hx",lineNumber:168,className:"lime.utils.Preloader",methodName:"load"})}}())}var _g4=0;var _g5=this.libraryNames;while(_g4<_g5.length){++_g4;this.bytesTotal+=200}this.loadedLibraries++;this.preloadStarted=true;this.updateProgress()},loadedAssetLibrary:function(name){this.loadedLibraries++;var current=this.loadedLibraries;if(!this.preloadStarted){++current}var totalLibraries=this.libraries.length+this.libraryNames.length;if(name!=null){lime_utils_Log.verbose("Loaded asset library: "+name+" ["+current+"/"+totalLibraries+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:195,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"})}else{lime_utils_Log.verbose("Loaded asset library ["+current+"/"+totalLibraries+"]",{fileName:"lime/utils/Preloader.hx",lineNumber:199,className:"lime.utils.Preloader",methodName:"loadedAssetLibrary"})}this.updateProgress()},start:function(){if(this.complete||this.simulateProgress||!this.preloadComplete){return}this.complete=true;this.onComplete.dispatch()},update:function(loaded,total){},updateProgress:function(){var _gthis=this;if(!this.simulateProgress){this.onProgress.dispatch(this.bytesLoaded,this.bytesTotal)}if(this.loadedLibraries==this.libraries.length&&!this.initLibraryNames){this.initLibraryNames=true;var _g=0;var _g1=this.libraryNames;while(_g<_g1.length){var name=[_g1[_g]];++_g;lime_utils_Log.verbose("Preloading asset library: "+name[0],{fileName:"lime/utils/Preloader.hx",lineNumber:236,className:"lime.utils.Preloader",methodName:"updateProgress"});lime_utils_Assets.loadLibrary(name[0]).onProgress(function(name1){return function(loaded,total){if(total>0){var _this=_gthis.bytesTotalCache;if(!(__map_reserved[name1[0]]!=null?_this.existsReserved(name1[0]):_this.h.hasOwnProperty(name1[0]))){var _this1=_gthis.bytesTotalCache;if(__map_reserved[name1[0]]!=null){_this1.setReserved(name1[0],total)}else{_this1.h[name1[0]]=total}_gthis.bytesTotal+=total-200}if(loaded>total){loaded=total}var _this2=_gthis.bytesLoadedCache2;if(!(__map_reserved[name1[0]]!=null?_this2.existsReserved(name1[0]):_this2.h.hasOwnProperty(name1[0]))){_gthis.bytesLoaded+=loaded}else{var _this3=_gthis.bytesLoadedCache2;_gthis.bytesLoaded+=loaded-(__map_reserved[name1[0]]!=null?_this3.getReserved(name1[0]):_this3.h[name1[0]])}var _this4=_gthis.bytesLoadedCache2;if(__map_reserved[name1[0]]!=null){_this4.setReserved(name1[0],loaded)}else{_this4.h[name1[0]]=loaded}if(!_gthis.simulateProgress){_gthis.onProgress.dispatch(_gthis.bytesLoaded,_gthis.bytesTotal)}}}}(name)).onComplete(function(name2){return function(library){var total1=200;var _this5=_gthis.bytesTotalCache;if(__map_reserved[name2[0]]!=null?_this5.existsReserved(name2[0]):_this5.h.hasOwnProperty(name2[0])){var _this6=_gthis.bytesTotalCache;total1=__map_reserved[name2[0]]!=null?_this6.getReserved(name2[0]):_this6.h[name2[0]]}var _this7=_gthis.bytesLoadedCache2;if(!(__map_reserved[name2[0]]!=null?_this7.existsReserved(name2[0]):_this7.h.hasOwnProperty(name2[0]))){_gthis.bytesLoaded+=total1}else{var _this8=_gthis.bytesLoadedCache2;_gthis.bytesLoaded+=total1-(__map_reserved[name2[0]]!=null?_this8.getReserved(name2[0]):_this8.h[name2[0]])}_gthis.loadedAssetLibrary(name2[0])}}(name)).onError(function(){return function(e){lime_utils_Log.error(e,{fileName:"lime/utils/Preloader.hx",lineNumber:290,className:"lime.utils.Preloader",methodName:"updateProgress"})}}())}}if(!this.simulateProgress&&this.loadedLibraries==this.libraries.length+this.libraryNames.length){if(!this.preloadComplete){this.preloadComplete=true;lime_utils_Log.verbose("Preload complete",{fileName:"lime/utils/Preloader.hx",lineNumber:301,className:"lime.utils.Preloader",methodName:"updateProgress"})}this.start()}},__class__:lime_utils_Preloader};var motion_easing_IEasing=function(){};$hxClasses["motion.easing.IEasing"]=motion_easing_IEasing;motion_easing_IEasing.__name__="motion.easing.IEasing";motion_easing_IEasing.__isInterface__=true;motion_easing_IEasing.prototype={calculate:null,__class__:motion_easing_IEasing};var motion_easing__$Expo_ExpoEaseOut=function(){};$hxClasses["motion.easing._Expo.ExpoEaseOut"]=motion_easing__$Expo_ExpoEaseOut;motion_easing__$Expo_ExpoEaseOut.__name__="motion.easing._Expo.ExpoEaseOut";motion_easing__$Expo_ExpoEaseOut.__interfaces__=[motion_easing_IEasing];motion_easing__$Expo_ExpoEaseOut.prototype={calculate:function(k){if(k==1){return 1}else{return 1-Math.exp(-6.931471805599453*k)}},__class__:motion_easing__$Expo_ExpoEaseOut};var motion_easing_Expo=function(){};$hxClasses["motion.easing.Expo"]=motion_easing_Expo;motion_easing_Expo.__name__="motion.easing.Expo";var motion_Actuate=function(){};$hxClasses["motion.Actuate"]=motion_Actuate;motion_Actuate.__name__="motion.Actuate";motion_Actuate.apply=function(target,properties,customActuator){motion_Actuate.stop(target,properties);if(customActuator==null){customActuator=motion_Actuate.defaultActuator}var actuator=Type.createInstance(customActuator,[target,0,properties]);actuator.apply();return actuator};motion_Actuate.getLibrary=function(target,allowCreation){if(allowCreation==null){allowCreation=true}if(motion_Actuate.targetLibraries.h.__keys__[target.__id__]==null&&allowCreation){motion_Actuate.targetLibraries.set(target,[])}return motion_Actuate.targetLibraries.h[target.__id__]};motion_Actuate.pauseAll=function(){var library=motion_Actuate.targetLibraries.iterator();while(library.hasNext()){var library1=library.next();var _g=0;while(_g<library1.length)library1[_g++].pause()}};motion_Actuate.resumeAll=function(){var library=motion_Actuate.targetLibraries.iterator();while(library.hasNext()){var library1=library.next();var _g=0;while(_g<library1.length)library1[_g++].resume()}};motion_Actuate.stop=function(target,properties,complete,sendEvent){if(sendEvent==null){sendEvent=true}if(complete==null){complete=false}if(target!=null){if(js_Boot.__implements(target,motion_actuators_IGenericActuator)){target.stop(null,complete,sendEvent)}else{var library=motion_Actuate.getLibrary(target,false);if(library!=null){if(typeof properties=="string"){var temp={};temp[properties]=null;properties=temp}else if(properties instanceof Array){var temp1={};var _g=0;var _g1=js_Boot.__cast(properties,Array);while(_g<_g1.length)temp1[_g1[_g++]]=null;properties=temp1}var i=library.length-1;while(i>=0){library[i].stop(properties,complete,sendEvent);--i}}}}};motion_Actuate.timer=function(duration,customActuator){return motion_Actuate.tween(new motion__$Actuate_TweenTimer(0),duration,new motion__$Actuate_TweenTimer(1),false,customActuator)};motion_Actuate.tween=function(target,duration,properties,overwrite,customActuator){if(overwrite==null){overwrite=true}if(target!=null){if(duration>0){if(customActuator==null){customActuator=motion_Actuate.defaultActuator}var actuator=Type.createInstance(customActuator,[target,duration,properties]);var library=motion_Actuate.getLibrary(actuator.target);if(overwrite){var i=library.length-1;while(i>=0){library[i].stop(actuator.properties,false,false);--i}library=motion_Actuate.getLibrary(actuator.target)}library.push(actuator);actuator.move();return actuator}else{return motion_Actuate.apply(target,properties,customActuator)}}return null};motion_Actuate.unload=function(actuator){var target=actuator.target;if(motion_Actuate.targetLibraries.h.__keys__[target.__id__]!=null){HxOverrides.remove(motion_Actuate.targetLibraries.h[target.__id__],actuator);if(motion_Actuate.targetLibraries.h[target.__id__].length==0){motion_Actuate.targetLibraries.remove(target)}}};var motion__$Actuate_TweenTimer=function(progress){this.progress=progress};$hxClasses["motion._Actuate.TweenTimer"]=motion__$Actuate_TweenTimer;motion__$Actuate_TweenTimer.__name__="motion._Actuate.TweenTimer";motion__$Actuate_TweenTimer.prototype={progress:null,__class__:motion__$Actuate_TweenTimer};var motion_IComponentPath=function(){};$hxClasses["motion.IComponentPath"]=motion_IComponentPath;motion_IComponentPath.__name__="motion.IComponentPath";motion_IComponentPath.__isInterface__=true;motion_IComponentPath.prototype={get_start:null,set_start:null,get_end:null,end:null,strength:null,calculate:null,__class__:motion_IComponentPath,__properties__:{get_end:"get_end",set_start:"set_start",get_start:"get_start"}};var motion__$MotionPath_ComponentPath=function(){this.paths=[];this.strength=0};$hxClasses["motion._MotionPath.ComponentPath"]=motion__$MotionPath_ComponentPath;motion__$MotionPath_ComponentPath.__name__="motion._MotionPath.ComponentPath";motion__$MotionPath_ComponentPath.__interfaces__=[motion_IComponentPath];motion__$MotionPath_ComponentPath.prototype={strength:null,paths:null,calculate:function(k){if(this.paths.length==1){return this.paths[0].calculate(k)}else{var ratio=k*this.strength;var _g=0;var _g1=this.paths;while(_g<_g1.length){var path=_g1[_g];++_g;if(ratio>path.strength){ratio-=path.strength}else{return path.calculate(ratio/path.strength)}}}return 0},get_start:function(){if(this.paths.length>0){return this.paths[0].get_start()}else{return 0}},set_start:function(value){if(this.paths.length>0){return this.paths[0].set_start(value)}else{return 0}},get_end:function(){if(this.paths.length>0){return this.paths[this.paths.length-1].get_end()}else{return this.get_start()}},__class__:motion__$MotionPath_ComponentPath,__properties__:{get_end:"get_end",set_start:"set_start",get_start:"get_start"}};var motion__$MotionPath_RotationPath=function(x,y){this.step=.01;this._x=x;this._y=y;this.offset=0;this.calculate(0)};$hxClasses["motion._MotionPath.RotationPath"]=motion__$MotionPath_RotationPath;motion__$MotionPath_RotationPath.__name__="motion._MotionPath.RotationPath";motion__$MotionPath_RotationPath.__interfaces__=[motion_IComponentPath];motion__$MotionPath_RotationPath.prototype={offset:null,strength:null,_start:null,step:null,_x:null,_y:null,calculate:function(k){var dX=this._x.calculate(k)-this._x.calculate(k+this.step);var angle=Math.atan2(this._y.calculate(k)-this._y.calculate(k+this.step),dX)*(180/Math.PI);angle=(angle+this.offset)%360;return angle},get_start:function(){return this._start},set_start:function(value){return this._start},get_end:function(){return this.calculate(1)},__class__:motion__$MotionPath_RotationPath,__properties__:{set_start:"set_start",get_start:"get_start",get_end:"get_end"}};var motion_actuators_FilterActuator=function(target,duration,properties){this.filterIndex=-1;motion_actuators_SimpleActuator.call(this,target,duration,properties);if(js_Boot.__instanceof(properties.filter,Class)){this.filterClass=properties.filter;if(target.get_filters().length==0){target.set_filters([Type.createInstance(this.filterClass,[])])}var _g=0;var _g1=target.get_filters();while(_g<_g1.length){var filter=_g1[_g];++_g;if(js_Boot.__instanceof(filter,this.filterClass)){this.filter=filter}}}else{this.filterIndex=properties.filter;this.filter=target.get_filters()[this.filterIndex]}};$hxClasses["motion.actuators.FilterActuator"]=motion_actuators_FilterActuator;motion_actuators_FilterActuator.__name__="motion.actuators.FilterActuator";motion_actuators_FilterActuator.__super__=motion_actuators_SimpleActuator;motion_actuators_FilterActuator.prototype=$extend(motion_actuators_SimpleActuator.prototype,{filter:null,filterClass:null,filterIndex:null,apply:function(){var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var propertyName=_g1[_g];++_g;if(propertyName!="filter"){Reflect.setProperty(this.filter,propertyName,Reflect.field(this.properties,propertyName))}}this.setFilter()},initialize:function(){var details;var start;var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var propertyName=_g1[_g];++_g;if(propertyName!="filter"){var target=this.filter;var value=null;if(Object.prototype.hasOwnProperty.call(target,propertyName)){value=Reflect.field(target,propertyName)}else{value=Reflect.getProperty(target,propertyName)}start=value;details=new motion_actuators_PropertyDetails(this.filter,propertyName,start,Reflect.field(this.properties,propertyName)-start,Object.prototype.hasOwnProperty.call(this.filter,"set_"+propertyName));this.propertyDetails.push(details)}}this.detailsLength=this.propertyDetails.length;this.initialized=true},setFilter:function(){var filters=this.target.get_filters();if(this.filterIndex>-1){filters[this.filterIndex]=this.filter}else{var _g=0;var _g1=filters.length;while(_g<_g1){var i=_g++;if(js_Boot.__instanceof(filters[i],this.filterClass)){filters[i]=this.filter}}}var target=this.target;var value=filters;if(Object.prototype.hasOwnProperty.call(target,"filters")&&!(target.__properties__&&target.__properties__["set_"+"filters"])){target["filters"]=value}else{Reflect.setProperty(target,"filters",value)}},update:function(currentTime){motion_actuators_SimpleActuator.prototype.update.call(this,currentTime);this.setFilter()},__class__:motion_actuators_FilterActuator});var motion_actuators_MethodActuator=function(target,duration,properties){this.currentParameters=[];this.tweenProperties={};motion_actuators_SimpleActuator.call(this,target,duration,properties);if(!Object.prototype.hasOwnProperty.call(properties,"start")){this.properties.start=[]}if(!Object.prototype.hasOwnProperty.call(properties,"end")){this.properties.end=this.properties.start}var _g=0;var _g1=this.properties.start.length;while(_g<_g1)this.currentParameters.push(this.properties.start[_g++])};$hxClasses["motion.actuators.MethodActuator"]=motion_actuators_MethodActuator;motion_actuators_MethodActuator.__name__="motion.actuators.MethodActuator";motion_actuators_MethodActuator.__super__=motion_actuators_SimpleActuator;motion_actuators_MethodActuator.prototype=$extend(motion_actuators_SimpleActuator.prototype,{currentParameters:null,tweenProperties:null,apply:function(){var method=this.target;var params=this.properties.end;if(params==null){params=[]}method.apply(method,params)},complete:function(sendEvent){if(sendEvent==null){sendEvent=true}var _g=0;var _g1=this.properties.start.length;while(_g<_g1){var i=_g++;this.currentParameters[i]=Reflect.field(this.tweenProperties,"param"+i)}var method=this.target;var params=this.currentParameters;if(params==null){params=[]}method.apply(method,params);motion_actuators_SimpleActuator.prototype.complete.call(this,sendEvent)},initialize:function(){var details;var propertyName;var start;var _g=0;var _g1=this.properties.start.length;while(_g<_g1){var i=_g++;propertyName="param"+i;start=this.properties.start[i];this.tweenProperties[propertyName]=start;if(typeof start=="number"||typeof start=="number"&&(start|0)===start){details=new motion_actuators_PropertyDetails(this.tweenProperties,propertyName,start,this.properties.end[i]-start);this.propertyDetails.push(details)}}this.detailsLength=this.propertyDetails.length;this.initialized=true},update:function(currentTime){motion_actuators_SimpleActuator.prototype.update.call(this,currentTime);if(this.active&&!this.paused){var _g=0;var _g1=this.properties.start.length;while(_g<_g1){var i=_g++;this.currentParameters[i]=Reflect.field(this.tweenProperties,"param"+i)}var method=this.target;var params=this.currentParameters;if(params==null){params=[]}method.apply(method,params)}},__class__:motion_actuators_MethodActuator});var motion_actuators_MotionPathActuator=function(target,duration,properties){motion_actuators_SimpleActuator.call(this,target,duration,properties)};$hxClasses["motion.actuators.MotionPathActuator"]=motion_actuators_MotionPathActuator;motion_actuators_MotionPathActuator.__name__="motion.actuators.MotionPathActuator";motion_actuators_MotionPathActuator.__super__=motion_actuators_SimpleActuator;motion_actuators_MotionPathActuator.prototype=$extend(motion_actuators_SimpleActuator.prototype,{apply:function(){var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var propertyName=_g1[_g];++_g;if(Object.prototype.hasOwnProperty.call(this.target,propertyName)){this.target[propertyName]=js_Boot.__cast(Reflect.field(this.properties,propertyName),motion_IComponentPath).get_end()}else{Reflect.setProperty(this.target,propertyName,js_Boot.__cast(Reflect.field(this.properties,propertyName),motion_IComponentPath).get_end())}}},initialize:function(){var details;var path;var _g=0;var _g1=Reflect.fields(this.properties);while(_g<_g1.length){var propertyName=_g1[_g];++_g;path=js_Boot.__cast(Reflect.field(this.properties,propertyName),motion_IComponentPath);if(path!=null){var isField=true;if(Object.prototype.hasOwnProperty.call(this.target,propertyName)){path.set_start(Reflect.field(this.target,propertyName))}else{isField=false;path.set_start(Reflect.getProperty(this.target,propertyName))}details=new motion_actuators_PropertyPathDetails(this.target,propertyName,path,isField);this.propertyDetails.push(details)}}this.detailsLength=this.propertyDetails.length;this.initialized=true},update:function(currentTime){if(!this.paused){var easing;var tweenPosition=(currentTime-this.timeOffset)/this.duration;if(tweenPosition>1){tweenPosition=1}if(!this.initialized){this.initialize()}if(!this.special){easing=this._ease.calculate(tweenPosition);var _g=0;var _g1=this.propertyDetails;while(_g<_g1.length){var details=_g1[_g];++_g;if(details.isField){details.target[details.propertyName]=js_Boot.__cast(details,motion_actuators_PropertyPathDetails).path.calculate(easing)}else{Reflect.setProperty(details.target,details.propertyName,js_Boot.__cast(details,motion_actuators_PropertyPathDetails).path.calculate(easing))}}}else{if(!this._reverse){easing=this._ease.calculate(tweenPosition)}else{easing=this._ease.calculate(1-tweenPosition)}var _g2=0;var _g11=this.propertyDetails;while(_g2<_g11.length){var details1=_g11[_g2];++_g2;if(!this._snapping){if(details1.isField){details1.target[details1.propertyName]=js_Boot.__cast(details1,motion_actuators_PropertyPathDetails).path.calculate(easing)}else{Reflect.setProperty(details1.target,details1.propertyName,js_Boot.__cast(details1,motion_actuators_PropertyPathDetails).path.calculate(easing))}}else if(details1.isField){details1.target[details1.propertyName]=Math.round(js_Boot.__cast(details1,motion_actuators_PropertyPathDetails).path.calculate(easing))}else{Reflect.setProperty(details1.target,details1.propertyName,Math.round(js_Boot.__cast(details1,motion_actuators_PropertyPathDetails).path.calculate(easing)))}}}if(tweenPosition==1){if(this._repeat==0){this.active=false;var tmp;if(this.toggleVisible){var target=this.target;var value=null;if(Object.prototype.hasOwnProperty.call(target,"alpha")){value=Reflect.field(target,"alpha")}else{value=Reflect.getProperty(target,"alpha")}tmp=value==0}else{tmp=false}if(tmp){var target1=this.target;var value1=false;if(Object.prototype.hasOwnProperty.call(target1,"visible")&&!(target1.__properties__&&target1.__properties__["set_"+"visible"])){target1["visible"]=value1}else{Reflect.setProperty(target1,"visible",value1)}}this.complete(true);return}else{if(this._onRepeat!=null){var method=this._onRepeat;var params=this._onRepeatParams;if(params==null){params=[]}method.apply(method,params)}if(this._reflect){this._reverse=!this._reverse}this.startTime=currentTime;this.timeOffset=this.startTime+this._delay;if(this._repeat>0){this._repeat--}}}if(this.sendChange){this.change()}}},__class__:motion_actuators_MotionPathActuator});var motion_actuators_PropertyDetails=function(target,propertyName,start,change,isField){if(isField==null){isField=true}this.target=target;this.propertyName=propertyName;this.start=start;this.change=change;this.isField=isField};$hxClasses["motion.actuators.PropertyDetails"]=motion_actuators_PropertyDetails;motion_actuators_PropertyDetails.__name__="motion.actuators.PropertyDetails";motion_actuators_PropertyDetails.prototype={change:null,isField:null,propertyName:null,start:null,target:null,__class__:motion_actuators_PropertyDetails};var motion_actuators_PropertyPathDetails=function(target,propertyName,path,isField){if(isField==null){isField=true}motion_actuators_PropertyDetails.call(this,target,propertyName,0,0,isField);this.path=path};$hxClasses["motion.actuators.PropertyPathDetails"]=motion_actuators_PropertyPathDetails;motion_actuators_PropertyPathDetails.__name__="motion.actuators.PropertyPathDetails";motion_actuators_PropertyPathDetails.__super__=motion_actuators_PropertyDetails;motion_actuators_PropertyPathDetails.prototype=$extend(motion_actuators_PropertyDetails.prototype,{path:null,__class__:motion_actuators_PropertyPathDetails});var motion_easing__$Bounce_BounceEaseIn=function(){};$hxClasses["motion.easing._Bounce.BounceEaseIn"]=motion_easing__$Bounce_BounceEaseIn;motion_easing__$Bounce_BounceEaseIn.__name__="motion.easing._Bounce.BounceEaseIn";motion_easing__$Bounce_BounceEaseIn.__interfaces__=[motion_easing_IEasing];motion_easing__$Bounce_BounceEaseIn.prototype={calculate:function(k){var t=1-k;return 1-((t/=1)<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375)},__class__:motion_easing__$Bounce_BounceEaseIn};var motion_easing__$Bounce_BounceEaseInOut=function(){};$hxClasses["motion.easing._Bounce.BounceEaseInOut"]=motion_easing__$Bounce_BounceEaseInOut;motion_easing__$Bounce_BounceEaseInOut.__name__="motion.easing._Bounce.BounceEaseInOut";motion_easing__$Bounce_BounceEaseInOut.__interfaces__=[motion_easing_IEasing];motion_easing__$Bounce_BounceEaseInOut.prototype={calculate:function(k){if(k<.5){var t=1-k*2;return(1-((t/=1)<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375))*.5}else{var t1=k*2-1;return((t1/=1)<.36363636363636365?7.5625*t1*t1:t1<.7272727272727273?7.5625*(t1-=.5454545454545454)*t1+.75:t1<.9090909090909091?7.5625*(t1-=.8181818181818182)*t1+.9375:7.5625*(t1-=.9545454545454546)*t1+.984375)*.5+.5}},__class__:motion_easing__$Bounce_BounceEaseInOut};var motion_easing__$Bounce_BounceEaseOut=function(){};$hxClasses["motion.easing._Bounce.BounceEaseOut"]=motion_easing__$Bounce_BounceEaseOut;motion_easing__$Bounce_BounceEaseOut.__name__="motion.easing._Bounce.BounceEaseOut";motion_easing__$Bounce_BounceEaseOut.__interfaces__=[motion_easing_IEasing];motion_easing__$Bounce_BounceEaseOut.prototype={calculate:function(k){var t=k;t=k/1;if(t<.36363636363636365){return 7.5625*t*t}else if(t<.7272727272727273){return 7.5625*(t-=.5454545454545454)*t+.75}else if(t<.9090909090909091){return 7.5625*(t-=.8181818181818182)*t+.9375}else{return 7.5625*(t-=.9545454545454546)*t+.984375}},__class__:motion_easing__$Bounce_BounceEaseOut};var motion_easing_Bounce=function(){};$hxClasses["motion.easing.Bounce"]=motion_easing_Bounce;motion_easing_Bounce.__name__="motion.easing.Bounce";var motion_easing_Linear=function(){};$hxClasses["motion.easing.Linear"]=motion_easing_Linear;motion_easing_Linear.__name__="motion.easing.Linear";motion_easing_Linear.__properties__={get_easeNone:"get_easeNone"};motion_easing_Linear.get_easeNone=function(){return new motion_easing_LinearEaseNone};var motion_easing_LinearEaseNone=function(){};$hxClasses["motion.easing.LinearEaseNone"]=motion_easing_LinearEaseNone;motion_easing_LinearEaseNone.__name__="motion.easing.LinearEaseNone";motion_easing_LinearEaseNone.__interfaces__=[motion_easing_IEasing];motion_easing_LinearEaseNone.prototype={calculate:function(k){return k},__class__:motion_easing_LinearEaseNone};var motion_easing__$Quad_QuadEaseIn=function(){};$hxClasses["motion.easing._Quad.QuadEaseIn"]=motion_easing__$Quad_QuadEaseIn;motion_easing__$Quad_QuadEaseIn.__name__="motion.easing._Quad.QuadEaseIn";motion_easing__$Quad_QuadEaseIn.__interfaces__=[motion_easing_IEasing];motion_easing__$Quad_QuadEaseIn.prototype={calculate:function(k){return k*k},__class__:motion_easing__$Quad_QuadEaseIn};var motion_easing__$Quad_QuadEaseInOut=function(){};$hxClasses["motion.easing._Quad.QuadEaseInOut"]=motion_easing__$Quad_QuadEaseInOut;motion_easing__$Quad_QuadEaseInOut.__name__="motion.easing._Quad.QuadEaseInOut";motion_easing__$Quad_QuadEaseInOut.__interfaces__=[motion_easing_IEasing];motion_easing__$Quad_QuadEaseInOut.prototype={calculate:function(k){if((k*=2)<1){return.5*k*k}return-.5*((k-1)*(k-3)-1)},__class__:motion_easing__$Quad_QuadEaseInOut};var motion_easing__$Quad_QuadEaseOut=function(){};$hxClasses["motion.easing._Quad.QuadEaseOut"]=motion_easing__$Quad_QuadEaseOut;motion_easing__$Quad_QuadEaseOut.__name__="motion.easing._Quad.QuadEaseOut";motion_easing__$Quad_QuadEaseOut.__interfaces__=[motion_easing_IEasing];motion_easing__$Quad_QuadEaseOut.prototype={calculate:function(k){return-k*(k-2)},__class__:motion_easing__$Quad_QuadEaseOut};var motion_easing_Quad=function(){};$hxClasses["motion.easing.Quad"]=motion_easing_Quad;motion_easing_Quad.__name__="motion.easing.Quad";var nape_Config=function(){};$hxClasses["nape.Config"]=nape_Config;nape_Config.__name__="nape.Config";var nape_callbacks_Callback=function(){this.zpp_inner=null};$hxClasses["nape.callbacks.Callback"]=nape_callbacks_Callback;nape_callbacks_Callback.__name__="nape.callbacks.Callback";nape_callbacks_Callback.prototype={zpp_inner:null,toString:function(){return""},__class__:nape_callbacks_Callback};var nape_callbacks_BodyCallback=function(){nape_callbacks_Callback.call(this)};$hxClasses["nape.callbacks.BodyCallback"]=nape_callbacks_BodyCallback;nape_callbacks_BodyCallback.__name__="nape.callbacks.BodyCallback";nape_callbacks_BodyCallback.__super__=nape_callbacks_Callback;nape_callbacks_BodyCallback.prototype=$extend(nape_callbacks_Callback.prototype,{toString:function(){var ret="Cb:";ret="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2];ret+=":"+this.zpp_inner.body.outer.toString();ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer);return ret},__class__:nape_callbacks_BodyCallback});var nape_callbacks_Listener=function(){this.zpp_inner=null};$hxClasses["nape.callbacks.Listener"]=nape_callbacks_Listener;nape_callbacks_Listener.__name__="nape.callbacks.Listener";nape_callbacks_Listener.prototype={zpp_inner:null,toString:function(){var event=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(this.zpp_inner.type==0){return"BodyListener{"+event+"::"+Std.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}"}else if(this.zpp_inner.type==1){return"ConstraintListener{"+event+"::"+Std.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}"}else{var con=this.zpp_inner.interaction;var itype;switch(con.itype){case 1:itype="COLLISION";break;case 2:itype="SENSOR";break;case 4:itype="FLUID";break;default:itype="ALL"}return(this.zpp_inner.type==2?"InteractionListener{"+event+"#"+itype+"::"+Std.string(con.outer_zni.zpp_inner_zn.options1.outer)+":"+Std.string(con.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+itype+"::"+Std.string(con.outer_znp.zpp_inner_zn.options1.outer)+":"+Std.string(con.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence}},__class__:nape_callbacks_Listener};var nape_callbacks_BodyListener=function(event,options,handler,precedence){if(precedence==null){precedence=0}this.zpp_inner_zn=null;nape_callbacks_Listener.call(this);var xevent=-1;if(zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE){xevent=2}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP){xevent=3}}this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$BodyListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(options),xevent,handler);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=precedence};$hxClasses["nape.callbacks.BodyListener"]=nape_callbacks_BodyListener;nape_callbacks_BodyListener.__name__="nape.callbacks.BodyListener";nape_callbacks_BodyListener.__super__=nape_callbacks_Listener;nape_callbacks_BodyListener.prototype=$extend(nape_callbacks_Listener.prototype,{zpp_inner_zn:null,__class__:nape_callbacks_BodyListener});var nape_callbacks_CbEvent=function(){};$hxClasses["nape.callbacks.CbEvent"]=nape_callbacks_CbEvent;nape_callbacks_CbEvent.__name__="nape.callbacks.CbEvent";nape_callbacks_CbEvent.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN){return"BEGIN"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING){return"ONGOING"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_END){return"END"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE){return"WAKE"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP){return"SLEEP"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK){return"BREAK"}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_PRE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_PRE=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.CbEvent_PRE){return"PRE"}else{return""}}}}}}}},__class__:nape_callbacks_CbEvent};var nape_callbacks_CbType=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_callbacks_ZPP_$CbType;this.zpp_inner.outer=this};$hxClasses["nape.callbacks.CbType"]=nape_callbacks_CbType;nape_callbacks_CbType.__name__="nape.callbacks.CbType";nape_callbacks_CbType.prototype={zpp_inner:null,toString:function(){if(this==zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY){return"ANY_BODY"}else if(this==zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE){return"ANY_SHAPE"}else if(this==zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND){return"ANY_COMPOUND"}else if(this==zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT){return"ANY_CONSTRAINT"}else{return"CbType#"+this.zpp_inner.id}},__class__:nape_callbacks_CbType};var nape_callbacks_CbTypeIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.callbacks.CbTypeIterator"]=nape_callbacks_CbTypeIterator;nape_callbacks_CbTypeIterator.__name__="nape.callbacks.CbTypeIterator";nape_callbacks_CbTypeIterator.get=function(list){var ret;if(nape_callbacks_CbTypeIterator.zpp_pool==null){zpp_$nape_util_ZPP_$CbTypeList.internal=true;var ret1=new nape_callbacks_CbTypeIterator;zpp_$nape_util_ZPP_$CbTypeList.internal=false;ret=ret1}else{var r=nape_callbacks_CbTypeIterator.zpp_pool;nape_callbacks_CbTypeIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_callbacks_CbTypeIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool;nape_callbacks_CbTypeIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_callbacks_CbTypeIterator};var nape_callbacks_CbTypeList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$CbTypeList;this.zpp_inner.outer=this};$hxClasses["nape.callbacks.CbTypeList"]=nape_callbacks_CbTypeList;nape_callbacks_CbTypeList.__name__="nape.callbacks.CbTypeList";nape_callbacks_CbTypeList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},push:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.zpp_inner.inner.add(obj.zpp_inner)}else{if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},unshift:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else{this.zpp_inner.inner.add(obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},pop:function(){this.zpp_inner.valmod();var ret=null;if(this.zpp_inner.reverse_flag){ret=this.zpp_inner.inner.head.elt;if(this.zpp_inner.subber!=null){this.zpp_inner.subber(ret.outer)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.pop()}}else{if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null){this.zpp_inner.at_ite=null}var ite;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}if(this.zpp_inner.user_length==1){ite=null}else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}ite=ite1.iterator_at(this.zpp_inner.user_length-2)}ret=ite==null?this.zpp_inner.inner.head.elt:ite.next.elt;if(this.zpp_inner.subber!=null){this.zpp_inner.subber(ret.outer)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.erase(ite)}}this.zpp_inner.invalidate();return ret.outer},shift:function(){this.zpp_inner.valmod();var ret=null;if(this.zpp_inner.reverse_flag){if(this.zpp_inner.at_ite!=null&&this.zpp_inner.at_ite.next==null){this.zpp_inner.at_ite=null}var ite;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}if(this.zpp_inner.user_length==1){ite=null}else{var ite1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}ite=ite1.iterator_at(this.zpp_inner.user_length-2)}ret=ite==null?this.zpp_inner.inner.head.elt:ite.next.elt;if(this.zpp_inner.subber!=null){this.zpp_inner.subber(ret.outer)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.erase(ite)}}else{ret=this.zpp_inner.inner.head.elt;if(this.zpp_inner.subber!=null){this.zpp_inner.subber(ret.outer)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.pop()}}this.zpp_inner.invalidate();return ret.outer},clear:function(){if(this.zpp_inner.reverse_flag){while(this.zpp_inner.inner.head!=null)this.pop()}else{while(this.zpp_inner.inner.head!=null)this.shift()}},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_callbacks_CbTypeIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool;nape_callbacks_CbTypeIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_callbacks_CbTypeList};var nape_callbacks_ConstraintCallback=function(){nape_callbacks_Callback.call(this)};$hxClasses["nape.callbacks.ConstraintCallback"]=nape_callbacks_ConstraintCallback;nape_callbacks_ConstraintCallback.__name__="nape.callbacks.ConstraintCallback";nape_callbacks_ConstraintCallback.__super__=nape_callbacks_Callback;nape_callbacks_ConstraintCallback.prototype=$extend(nape_callbacks_Callback.prototype,{toString:function(){var ret="Cb:";ret="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2];ret+=":"+this.zpp_inner.constraint.outer.toString();ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer);return ret},__class__:nape_callbacks_ConstraintCallback});var nape_callbacks_ConstraintListener=function(event,options,handler,precedence){if(precedence==null){precedence=0}this.zpp_inner_zn=null;nape_callbacks_Listener.call(this);var xevent=-1;if(zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_WAKE){xevent=2}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_SLEEP){xevent=3}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_BREAK){xevent=4}}}this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$ConstraintListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(options),xevent,handler);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner.precedence=precedence};$hxClasses["nape.callbacks.ConstraintListener"]=nape_callbacks_ConstraintListener;nape_callbacks_ConstraintListener.__name__="nape.callbacks.ConstraintListener";nape_callbacks_ConstraintListener.__super__=nape_callbacks_Listener;nape_callbacks_ConstraintListener.prototype=$extend(nape_callbacks_Listener.prototype,{zpp_inner_zn:null,__class__:nape_callbacks_ConstraintListener});var nape_callbacks_InteractionCallback=function(){nape_callbacks_Callback.call(this)};$hxClasses["nape.callbacks.InteractionCallback"]=nape_callbacks_InteractionCallback;nape_callbacks_InteractionCallback.__name__="nape.callbacks.InteractionCallback";nape_callbacks_InteractionCallback.__super__=nape_callbacks_Callback;nape_callbacks_InteractionCallback.prototype=$extend(nape_callbacks_Callback.prototype,{toString:function(){var ret="Cb:";ret="Cb:"+["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event];ret+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString();ret+=" : "+this.zpp_inner.wrap_arbiters.toString();ret+=" : listener: "+Std.string(this.zpp_inner.listener.outer);return ret},__class__:nape_callbacks_InteractionCallback});var nape_callbacks_InteractionListener=function(event,interactionType,options1,options2,handler,precedence){if(precedence==null){precedence=0}this.zpp_inner_zn=null;nape_callbacks_Listener.call(this);var xevent=-1;if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN){xevent=0}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_END){xevent=1}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(event==zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING){xevent=6}}}this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$InteractionListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(options1),zpp_$nape_callbacks_ZPP_$OptionType.argument(options2),xevent,2);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=precedence;this.zpp_inner_zn.handleri=handler;var ret=this.zpp_inner_zn.itype;var tmp;if(ret==1){if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION}else if(ret==2){if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR}else if(ret==4){if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID}else if(ret==7){if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY}else{tmp=null}if(tmp!=interactionType){var xtype;if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION){xtype=1}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR){xtype=2}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}xtype=interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7}}this.zpp_inner_zn.itype=xtype}var ret1=this.zpp_inner_zn.itype;if(ret1==1){if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==2){if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==4){if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==7){if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}};$hxClasses["nape.callbacks.InteractionListener"]=nape_callbacks_InteractionListener;nape_callbacks_InteractionListener.__name__="nape.callbacks.InteractionListener";nape_callbacks_InteractionListener.__super__=nape_callbacks_Listener;nape_callbacks_InteractionListener.prototype=$extend(nape_callbacks_Listener.prototype,{zpp_inner_zn:null,__class__:nape_callbacks_InteractionListener});var nape_callbacks_InteractionType=function(){};$hxClasses["nape.callbacks.InteractionType"]=nape_callbacks_InteractionType;nape_callbacks_InteractionType.__name__="nape.callbacks.InteractionType";nape_callbacks_InteractionType.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION){return"COLLISION"}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR){return"SENSOR"}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID){return"FLUID"}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InteractionType_ANY){return"ANY"}else{return""}}}}},__class__:nape_callbacks_InteractionType};var nape_callbacks_ListenerIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.callbacks.ListenerIterator"]=nape_callbacks_ListenerIterator;nape_callbacks_ListenerIterator.__name__="nape.callbacks.ListenerIterator";nape_callbacks_ListenerIterator.get=function(list){var ret;if(nape_callbacks_ListenerIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ListenerList.internal=true;var ret1=new nape_callbacks_ListenerIterator;zpp_$nape_util_ZPP_$ListenerList.internal=false;ret=ret1}else{var r=nape_callbacks_ListenerIterator.zpp_pool;nape_callbacks_ListenerIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_callbacks_ListenerIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_callbacks_ListenerIterator.zpp_pool;nape_callbacks_ListenerIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_callbacks_ListenerIterator};var nape_callbacks_ListenerList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ListenerList;this.zpp_inner.outer=this};$hxClasses["nape.callbacks.ListenerList"]=nape_callbacks_ListenerList;nape_callbacks_ListenerList.__name__="nape.callbacks.ListenerList";nape_callbacks_ListenerList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},push:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.zpp_inner.inner.add(obj.zpp_inner)}else{if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},unshift:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else{this.zpp_inner.inner.add(obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},remove:function(obj){this.zpp_inner.valmod();var ret;ret=false;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt==obj.zpp_inner){ret=true;break}cx_ite=cx_ite.next}if(ret){if(this.zpp_inner.subber!=null){this.zpp_inner.subber(obj)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.remove(obj.zpp_inner)}this.zpp_inner.invalidate()}return ret},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_callbacks_ListenerIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_callbacks_ListenerIterator.zpp_pool;nape_callbacks_ListenerIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_callbacks_ListenerList};var nape_callbacks_ListenerType=function(){};$hxClasses["nape.callbacks.ListenerType"]=nape_callbacks_ListenerType;nape_callbacks_ListenerType.__name__="nape.callbacks.ListenerType";nape_callbacks_ListenerType.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.ListenerType_PRE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ListenerType_PRE=new nape_callbacks_ListenerType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ListenerType_PRE){return"PRE"}else{if(zpp_$nape_util_ZPP_$Flags.ListenerType_BODY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ListenerType_BODY=new nape_callbacks_ListenerType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ListenerType_BODY){return"BODY"}else{if(zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT=new nape_callbacks_ListenerType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ListenerType_CONSTRAINT){return"CONSTRAINT"}else{if(zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION=new nape_callbacks_ListenerType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ListenerType_INTERACTION){return"INTERACTION"}else{return""}}}}},__class__:nape_callbacks_ListenerType};var nape_callbacks_OptionType=function(includes,excludes){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_callbacks_ZPP_$OptionType;this.zpp_inner.outer=this;if(includes!=null){this.including(includes)}if(excludes!=null){this.excluding(excludes)}};$hxClasses["nape.callbacks.OptionType"]=nape_callbacks_OptionType;nape_callbacks_OptionType.__name__="nape.callbacks.OptionType";nape_callbacks_OptionType.prototype={zpp_inner:null,including:function(includes){this.zpp_inner.append(this.zpp_inner.includes,includes);return this},excluding:function(excludes){this.zpp_inner.append(this.zpp_inner.excludes,excludes);return this},toString:function(){if(this.zpp_inner.wrap_includes==null){this.zpp_inner.setup_includes()}var inc=this.zpp_inner.wrap_includes.toString();if(this.zpp_inner.wrap_excludes==null){this.zpp_inner.setup_excludes()}return"@{"+inc+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:nape_callbacks_OptionType};var nape_callbacks_PreCallback=function(){nape_callbacks_Callback.call(this)};$hxClasses["nape.callbacks.PreCallback"]=nape_callbacks_PreCallback;nape_callbacks_PreCallback.__name__="nape.callbacks.PreCallback";nape_callbacks_PreCallback.__super__=nape_callbacks_Callback;nape_callbacks_PreCallback.prototype=$extend(nape_callbacks_Callback.prototype,{toString:function(){var ret="Cb:PRE:";ret="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());ret+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();ret+=" : listnener: "+Std.string(this.zpp_inner.listener.outer);return ret},__class__:nape_callbacks_PreCallback});var nape_callbacks_PreFlag=function(){};$hxClasses["nape.callbacks.PreFlag"]=nape_callbacks_PreFlag;nape_callbacks_PreFlag.__name__="nape.callbacks.PreFlag";nape_callbacks_PreFlag.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT){return"ACCEPT"}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE){return"IGNORE"}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE){return"ACCEPT_ONCE"}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE){return"IGNORE_ONCE"}else{return""}}}}},__class__:nape_callbacks_PreFlag};var nape_callbacks_PreListener=function(interactionType,options1,options2,handler,precedence,pure){if(pure==null){pure=false}if(precedence==null){precedence=0}this.zpp_inner_zn=null;nape_callbacks_Listener.call(this);this.zpp_inner_zn=new zpp_$nape_callbacks_ZPP_$InteractionListener(zpp_$nape_callbacks_ZPP_$OptionType.argument(options1),zpp_$nape_callbacks_ZPP_$OptionType.argument(options2),5,3);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=precedence;this.zpp_inner_zn.pure=pure;this.zpp_inner_zn.handlerp=handler;var ret=this.zpp_inner_zn.itype;var tmp;if(ret==1){if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION}else if(ret==2){if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR}else if(ret==4){if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID}else if(ret==7){if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=zpp_$nape_util_ZPP_$Flags.InteractionType_ANY}else{tmp=null}if(tmp!=interactionType){var xtype;if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION){xtype=1}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR){xtype=2}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}xtype=interactionType==zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID?4:7}}this.zpp_inner_zn.itype=xtype}var ret1=this.zpp_inner_zn.itype;if(ret1==1){if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==2){if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==4){if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}else if(ret1==7){if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}}};$hxClasses["nape.callbacks.PreListener"]=nape_callbacks_PreListener;nape_callbacks_PreListener.__name__="nape.callbacks.PreListener";nape_callbacks_PreListener.__super__=nape_callbacks_Listener;nape_callbacks_PreListener.prototype=$extend(nape_callbacks_Listener.prototype,{zpp_inner_zn:null,__class__:nape_callbacks_PreListener});var nape_constraint_Constraint=function(){this.zpp_inner.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT.zpp_inner)};$hxClasses["nape.constraint.Constraint"]=nape_constraint_Constraint;nape_constraint_Constraint.__name__="nape.constraint.Constraint";nape_constraint_Constraint.prototype={zpp_inner:null,toString:function(){return"{Constraint}"},__class__:nape_constraint_Constraint};var nape_constraint_AngleJoint=function(body1,body2,jointMin,jointMax,ratio){if(ratio==null){ratio=1}this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$AngleJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.jointMin!=jointMin){this.zpp_inner_zn.jointMin=jointMin;this.zpp_inner.wake()}if(this.zpp_inner_zn.jointMax!=jointMax){this.zpp_inner_zn.jointMax=jointMax;this.zpp_inner.wake()}if(this.zpp_inner_zn.ratio!=ratio){this.zpp_inner_zn.ratio=ratio;this.zpp_inner.wake()}};$hxClasses["nape.constraint.AngleJoint"]=nape_constraint_AngleJoint;nape_constraint_AngleJoint.__name__="nape.constraint.AngleJoint";nape_constraint_AngleJoint.__super__=nape_constraint_Constraint;nape_constraint_AngleJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_AngleJoint});var nape_constraint_ConstraintIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.constraint.ConstraintIterator"]=nape_constraint_ConstraintIterator;nape_constraint_ConstraintIterator.__name__="nape.constraint.ConstraintIterator";nape_constraint_ConstraintIterator.get=function(list){var ret;if(nape_constraint_ConstraintIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ConstraintList.internal=true;var ret1=new nape_constraint_ConstraintIterator;zpp_$nape_util_ZPP_$ConstraintList.internal=false;ret=ret1}else{var r=nape_constraint_ConstraintIterator.zpp_pool;nape_constraint_ConstraintIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_constraint_ConstraintIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_constraint_ConstraintIterator.zpp_pool;nape_constraint_ConstraintIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_constraint_ConstraintIterator};var nape_constraint_ConstraintList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ConstraintList;this.zpp_inner.outer=this};$hxClasses["nape.constraint.ConstraintList"]=nape_constraint_ConstraintList;nape_constraint_ConstraintList.__name__="nape.constraint.ConstraintList";nape_constraint_ConstraintList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},remove:function(obj){this.zpp_inner.valmod();var ret;ret=false;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt==obj.zpp_inner){ret=true;break}cx_ite=cx_ite.next}if(ret){if(this.zpp_inner.subber!=null){this.zpp_inner.subber(obj)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.remove(obj.zpp_inner)}this.zpp_inner.invalidate()}return ret},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_constraint_ConstraintIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_constraint_ConstraintIterator.zpp_pool;nape_constraint_ConstraintIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_constraint_ConstraintList};var nape_constraint_DistanceJoint=function(body1,body2,anchor1,anchor2,jointMin,jointMax){this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$DistanceJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}var _this=this.zpp_inner_zn.wrap_a1;var _this1=anchor1.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x=anchor1.zpp_inner.x;var _this2=anchor1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=anchor1.zpp_inner.y;var tmp;var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(_this.zpp_inner.x==x){var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=_this.zpp_inner.y==y}else{tmp=false}if(!tmp){_this.zpp_inner.x=x;_this.zpp_inner.y=y;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}if(anchor1.zpp_inner.weak){var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null;anchor1.zpp_inner=null;anchor1.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor1;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}var _this6=this.zpp_inner_zn.wrap_a2;var _this7=anchor2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=anchor2.zpp_inner.x;var _this8=anchor2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=anchor2.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(anchor2.zpp_inner.weak){var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null;anchor2.zpp_inner=null;anchor2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor2;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}if(this.zpp_inner_zn.jointMin!=jointMin){this.zpp_inner_zn.jointMin=jointMin;this.zpp_inner.wake()}if(this.zpp_inner_zn.jointMax!=jointMax){this.zpp_inner_zn.jointMax=jointMax;this.zpp_inner.wake()}};$hxClasses["nape.constraint.DistanceJoint"]=nape_constraint_DistanceJoint;nape_constraint_DistanceJoint.__name__="nape.constraint.DistanceJoint";nape_constraint_DistanceJoint.__super__=nape_constraint_Constraint;nape_constraint_DistanceJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_DistanceJoint});var nape_constraint_LineJoint=function(body1,body2,anchor1,anchor2,direction,jointMin,jointMax){this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$LineJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}var _this=this.zpp_inner_zn.wrap_a1;var _this1=anchor1.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x=anchor1.zpp_inner.x;var _this2=anchor1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=anchor1.zpp_inner.y;var tmp;var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(_this.zpp_inner.x==x){var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=_this.zpp_inner.y==y}else{tmp=false}if(!tmp){_this.zpp_inner.x=x;_this.zpp_inner.y=y;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}if(anchor1.zpp_inner.weak){var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null;anchor1.zpp_inner=null;anchor1.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor1;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}var _this6=this.zpp_inner_zn.wrap_a2;var _this7=anchor2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=anchor2.zpp_inner.x;var _this8=anchor2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=anchor2.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(anchor2.zpp_inner.weak){var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null;anchor2.zpp_inner=null;anchor2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor2;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}if(this.zpp_inner_zn.wrap_n==null){this.zpp_inner_zn.setup_n()}var _this12=this.zpp_inner_zn.wrap_n;var _this13=direction.zpp_inner;if(_this13._validate!=null){_this13._validate()}var x2=direction.zpp_inner.x;var _this14=direction.zpp_inner;if(_this14._validate!=null){_this14._validate()}var y2=direction.zpp_inner.y;var tmp2;var _this15=_this12.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this12.zpp_inner.x==x2){var _this16=_this12.zpp_inner;if(_this16._validate!=null){_this16._validate()}tmp2=_this12.zpp_inner.y==y2}else{tmp2=false}if(!tmp2){_this12.zpp_inner.x=x2;_this12.zpp_inner.y=y2;var _this17=_this12.zpp_inner;if(_this17._invalidate!=null){_this17._invalidate(_this17)}}if(direction.zpp_inner.weak){var inner2=direction.zpp_inner;direction.zpp_inner.outer=null;direction.zpp_inner=null;direction.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=direction;if(inner2.outer!=null){inner2.outer.zpp_inner=null;inner2.outer=null}inner2._isimmutable=null;inner2._validate=null;inner2._invalidate=null;inner2.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner2}if(this.zpp_inner_zn.wrap_n==null){this.zpp_inner_zn.setup_n()}if(this.zpp_inner_zn.jointMin!=jointMin){this.zpp_inner_zn.jointMin=jointMin;this.zpp_inner.wake()}if(this.zpp_inner_zn.jointMax!=jointMax){this.zpp_inner_zn.jointMax=jointMax;this.zpp_inner.wake()}};$hxClasses["nape.constraint.LineJoint"]=nape_constraint_LineJoint;nape_constraint_LineJoint.__name__="nape.constraint.LineJoint";nape_constraint_LineJoint.__super__=nape_constraint_Constraint;nape_constraint_LineJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_LineJoint});var nape_constraint_MotorJoint=function(body1,body2,rate,ratio){if(ratio==null){ratio=1}if(rate==null){rate=0}this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$MotorJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.rate!=rate){this.zpp_inner_zn.rate=rate;this.zpp_inner.wake()}if(this.zpp_inner_zn.ratio!=ratio){this.zpp_inner_zn.ratio=ratio;this.zpp_inner.wake()}};$hxClasses["nape.constraint.MotorJoint"]=nape_constraint_MotorJoint;nape_constraint_MotorJoint.__name__="nape.constraint.MotorJoint";nape_constraint_MotorJoint.__super__=nape_constraint_Constraint;nape_constraint_MotorJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_MotorJoint});var nape_constraint_PivotJoint=function(body1,body2,anchor1,anchor2){this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$PivotJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}var _this=this.zpp_inner_zn.wrap_a1;var _this1=anchor1.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x=anchor1.zpp_inner.x;var _this2=anchor1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=anchor1.zpp_inner.y;var tmp;var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(_this.zpp_inner.x==x){var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=_this.zpp_inner.y==y}else{tmp=false}if(!tmp){_this.zpp_inner.x=x;_this.zpp_inner.y=y;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}if(anchor1.zpp_inner.weak){var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null;anchor1.zpp_inner=null;anchor1.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor1;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}var _this6=this.zpp_inner_zn.wrap_a2;var _this7=anchor2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=anchor2.zpp_inner.x;var _this8=anchor2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=anchor2.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(anchor2.zpp_inner.weak){var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null;anchor2.zpp_inner=null;anchor2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor2;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}};$hxClasses["nape.constraint.PivotJoint"]=nape_constraint_PivotJoint;nape_constraint_PivotJoint.__name__="nape.constraint.PivotJoint";nape_constraint_PivotJoint.__super__=nape_constraint_Constraint;nape_constraint_PivotJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_PivotJoint});var nape_constraint_PulleyJoint=function(body1,body2,body3,body4,anchor1,anchor2,anchor3,anchor4,jointMin,jointMax,ratio){if(ratio==null){ratio=1}this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$PulleyJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1&&this.zpp_inner_zn.b3!=inbody1&&this.zpp_inner_zn.b4!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2&&this.zpp_inner_zn.b3!=inbody2&&this.zpp_inner_zn.b4!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}var inbody3=body3==null?null:body3.zpp_inner;if(inbody3!=this.zpp_inner_zn.b3){if(this.zpp_inner_zn.b3!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3){if(this.zpp_inner_zn.b3!=null){this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b3.wake()}}this.zpp_inner_zn.b3=inbody3;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody3!=null&&this.zpp_inner_zn.b1!=inbody3&&this.zpp_inner_zn.b2!=inbody3&&this.zpp_inner_zn.b4!=inbody3){if(inbody3!=null){inbody3.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody3!=null){inbody3.wake()}}}var inbody4=body4==null?null:body4.zpp_inner;if(inbody4!=this.zpp_inner_zn.b4){if(this.zpp_inner_zn.b4!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4){if(this.zpp_inner_zn.b4!=null){this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b4.wake()}}this.zpp_inner_zn.b4=inbody4;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody4!=null&&this.zpp_inner_zn.b1!=inbody4&&this.zpp_inner_zn.b2!=inbody4&&this.zpp_inner_zn.b3!=inbody4){if(inbody4!=null){inbody4.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody4!=null){inbody4.wake()}}}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}var _this=this.zpp_inner_zn.wrap_a1;var _this1=anchor1.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x=anchor1.zpp_inner.x;var _this2=anchor1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=anchor1.zpp_inner.y;var tmp;var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(_this.zpp_inner.x==x){var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=_this.zpp_inner.y==y}else{tmp=false}if(!tmp){_this.zpp_inner.x=x;_this.zpp_inner.y=y;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}if(anchor1.zpp_inner.weak){var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null;anchor1.zpp_inner=null;anchor1.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor1;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}var _this6=this.zpp_inner_zn.wrap_a2;var _this7=anchor2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=anchor2.zpp_inner.x;var _this8=anchor2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=anchor2.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(anchor2.zpp_inner.weak){var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null;anchor2.zpp_inner=null;anchor2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor2;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}if(this.zpp_inner_zn.wrap_a3==null){this.zpp_inner_zn.setup_a3()}var _this12=this.zpp_inner_zn.wrap_a3;var _this13=anchor3.zpp_inner;if(_this13._validate!=null){_this13._validate()}var x2=anchor3.zpp_inner.x;var _this14=anchor3.zpp_inner;if(_this14._validate!=null){_this14._validate()}var y2=anchor3.zpp_inner.y;var tmp2;var _this15=_this12.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this12.zpp_inner.x==x2){var _this16=_this12.zpp_inner;if(_this16._validate!=null){_this16._validate()}tmp2=_this12.zpp_inner.y==y2}else{tmp2=false}if(!tmp2){_this12.zpp_inner.x=x2;_this12.zpp_inner.y=y2;var _this17=_this12.zpp_inner;if(_this17._invalidate!=null){_this17._invalidate(_this17)}}if(anchor3.zpp_inner.weak){var inner2=anchor3.zpp_inner;anchor3.zpp_inner.outer=null;anchor3.zpp_inner=null;anchor3.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor3;if(inner2.outer!=null){inner2.outer.zpp_inner=null;inner2.outer=null}inner2._isimmutable=null;inner2._validate=null;inner2._invalidate=null;inner2.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner2}if(this.zpp_inner_zn.wrap_a3==null){this.zpp_inner_zn.setup_a3()}if(this.zpp_inner_zn.wrap_a4==null){this.zpp_inner_zn.setup_a4()}var _this18=this.zpp_inner_zn.wrap_a4;var _this19=anchor4.zpp_inner;if(_this19._validate!=null){_this19._validate()}var x3=anchor4.zpp_inner.x;var _this20=anchor4.zpp_inner;if(_this20._validate!=null){_this20._validate()}var y3=anchor4.zpp_inner.y;var tmp3;var _this21=_this18.zpp_inner;if(_this21._validate!=null){_this21._validate()}if(_this18.zpp_inner.x==x3){var _this22=_this18.zpp_inner;if(_this22._validate!=null){_this22._validate()}tmp3=_this18.zpp_inner.y==y3}else{tmp3=false}if(!tmp3){_this18.zpp_inner.x=x3;_this18.zpp_inner.y=y3;var _this23=_this18.zpp_inner;if(_this23._invalidate!=null){_this23._invalidate(_this23)}}if(anchor4.zpp_inner.weak){var inner3=anchor4.zpp_inner;anchor4.zpp_inner.outer=null;anchor4.zpp_inner=null;anchor4.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor4;if(inner3.outer!=null){inner3.outer.zpp_inner=null;inner3.outer=null}inner3._isimmutable=null;inner3._validate=null;inner3._invalidate=null;inner3.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner3}if(this.zpp_inner_zn.wrap_a4==null){this.zpp_inner_zn.setup_a4()}if(this.zpp_inner_zn.ratio!=ratio){this.zpp_inner_zn.ratio=ratio;this.zpp_inner.wake()}if(this.zpp_inner_zn.jointMin!=jointMin){this.zpp_inner_zn.jointMin=jointMin;this.zpp_inner.wake()}if(this.zpp_inner_zn.jointMax!=jointMax){this.zpp_inner_zn.jointMax=jointMax;this.zpp_inner.wake()}};$hxClasses["nape.constraint.PulleyJoint"]=nape_constraint_PulleyJoint;nape_constraint_PulleyJoint.__name__="nape.constraint.PulleyJoint";nape_constraint_PulleyJoint.__super__=nape_constraint_Constraint;nape_constraint_PulleyJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_PulleyJoint});var nape_constraint_UserConstraint=function(dimensions,velocityOnly){if(velocityOnly==null){velocityOnly=false}this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$UserConstraint(dimensions,velocityOnly);this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this)};$hxClasses["nape.constraint.UserConstraint"]=nape_constraint_UserConstraint;nape_constraint_UserConstraint.__name__="nape.constraint.UserConstraint";nape_constraint_UserConstraint.__super__=nape_constraint_Constraint;nape_constraint_UserConstraint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_UserConstraint});var nape_constraint_WeldJoint=function(body1,body2,anchor1,anchor2,phase){if(phase==null){phase=0}this.zpp_inner_zn=null;this.zpp_inner_zn=new zpp_$nape_constraint_ZPP_$WeldJoint;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zn=this;nape_constraint_Constraint.call(this);var inbody1=body1==null?null:body1.zpp_inner;if(inbody1!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1){if(this.zpp_inner_zn.b1!=null){this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b1.wake()}}this.zpp_inner_zn.b1=inbody1;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody1!=null&&this.zpp_inner_zn.b2!=inbody1){if(inbody1!=null){inbody1.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody1!=null){inbody1.wake()}}}var inbody2=body2==null?null:body2.zpp_inner;if(inbody2!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2){if(this.zpp_inner_zn.b2!=null){this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner_zn.b2.wake()}}this.zpp_inner_zn.b2=inbody2;if((this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null&&inbody2!=null&&this.zpp_inner_zn.b1!=inbody2){if(inbody2!=null){inbody2.constraints.add(this.zpp_inner)}}if(this.zpp_inner.active&&(this.zpp_inner.space==null?null:this.zpp_inner.space.outer)!=null){this.zpp_inner.wake();if(inbody2!=null){inbody2.wake()}}}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}var _this=this.zpp_inner_zn.wrap_a1;var _this1=anchor1.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x=anchor1.zpp_inner.x;var _this2=anchor1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=anchor1.zpp_inner.y;var tmp;var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(_this.zpp_inner.x==x){var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=_this.zpp_inner.y==y}else{tmp=false}if(!tmp){_this.zpp_inner.x=x;_this.zpp_inner.y=y;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}if(anchor1.zpp_inner.weak){var inner=anchor1.zpp_inner;anchor1.zpp_inner.outer=null;anchor1.zpp_inner=null;anchor1.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor1;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(this.zpp_inner_zn.wrap_a1==null){this.zpp_inner_zn.setup_a1()}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}var _this6=this.zpp_inner_zn.wrap_a2;var _this7=anchor2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=anchor2.zpp_inner.x;var _this8=anchor2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=anchor2.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(anchor2.zpp_inner.weak){var inner1=anchor2.zpp_inner;anchor2.zpp_inner.outer=null;anchor2.zpp_inner=null;anchor2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=anchor2;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}if(this.zpp_inner_zn.wrap_a2==null){this.zpp_inner_zn.setup_a2()}if(this.zpp_inner_zn.phase!=phase){this.zpp_inner_zn.phase=phase;this.zpp_inner.wake()}};$hxClasses["nape.constraint.WeldJoint"]=nape_constraint_WeldJoint;nape_constraint_WeldJoint.__name__="nape.constraint.WeldJoint";nape_constraint_WeldJoint.__super__=nape_constraint_Constraint;nape_constraint_WeldJoint.prototype=$extend(nape_constraint_Constraint.prototype,{zpp_inner_zn:null,__class__:nape_constraint_WeldJoint});var nape_dynamics_Arbiter=function(){this.zpp_inner=null};$hxClasses["nape.dynamics.Arbiter"]=nape_dynamics_Arbiter;nape_dynamics_Arbiter.__name__="nape.dynamics.Arbiter";nape_dynamics_Arbiter.prototype={zpp_inner:null,toString:function(){var ret=this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?"CollisionArbiter":this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared){return ret+"(object-pooled)"}else{var tmp=ret+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-";var _g=this.zpp_inner.immState;var tmp1;if(_g==5){if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}tmp1=zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT}else if(_g==1){if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}tmp1=zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE}else if(_g==6){if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}tmp1=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}tmp1=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE_ONCE}return tmp+tmp1.toString()}},__class__:nape_dynamics_Arbiter};var nape_dynamics_ArbiterIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.dynamics.ArbiterIterator"]=nape_dynamics_ArbiterIterator;nape_dynamics_ArbiterIterator.__name__="nape.dynamics.ArbiterIterator";nape_dynamics_ArbiterIterator.get=function(list){var ret;if(nape_dynamics_ArbiterIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ArbiterList.internal=true;var ret1=new nape_dynamics_ArbiterIterator;zpp_$nape_util_ZPP_$ArbiterList.internal=false;ret=ret1}else{var r=nape_dynamics_ArbiterIterator.zpp_pool;nape_dynamics_ArbiterIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_dynamics_ArbiterIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var length=this.zpp_inner.zpp_gl();this.zpp_critical=true;if(this.zpp_i<length){return true}else{this.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool;nape_dynamics_ArbiterIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_ArbiterIterator};var nape_dynamics_ArbiterList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ArbiterList;this.zpp_inner.outer=this};$hxClasses["nape.dynamics.ArbiterList"]=nape_dynamics_ArbiterList;nape_dynamics_ArbiterList.__name__="nape.dynamics.ArbiterList";nape_dynamics_ArbiterList.prototype={zpp_inner:null,zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=0;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt.active){this.zpp_inner.user_length++}cx_ite=cx_ite.next}}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(index){this.zpp_vm();if(this.zpp_inner.reverse_flag){index=this.zpp_gl()-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=0;this.zpp_inner.at_ite=this.zpp_inner.inner.head;while(!this.zpp_inner.at_ite.elt.active)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;while(!this.zpp_inner.at_ite.elt.active)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return nape_dynamics_ArbiterIterator.get(this)},toString:function(){var ret="[";var fst=true;var _g=this.iterator();while(true){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl();_g.zpp_critical=true;var tmp;if(_g.zpp_i<length){tmp=true}else{_g.zpp_next=nape_dynamics_ArbiterIterator.zpp_pool;nape_dynamics_ArbiterIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_dynamics_ArbiterList};var nape_dynamics_ArbiterType=function(){};$hxClasses["nape.dynamics.ArbiterType"]=nape_dynamics_ArbiterType;nape_dynamics_ArbiterType.__name__="nape.dynamics.ArbiterType";nape_dynamics_ArbiterType.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION=new nape_dynamics_ArbiterType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ArbiterType_COLLISION){return"COLLISION"}else{if(zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR=new nape_dynamics_ArbiterType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ArbiterType_SENSOR){return"SENSOR"}else{if(zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID=new nape_dynamics_ArbiterType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ArbiterType_FLUID){return"FLUID"}else{return""}}}},__class__:nape_dynamics_ArbiterType};var nape_dynamics_CollisionArbiter=function(){nape_dynamics_Arbiter.call(this)};$hxClasses["nape.dynamics.CollisionArbiter"]=nape_dynamics_CollisionArbiter;nape_dynamics_CollisionArbiter.__name__="nape.dynamics.CollisionArbiter";nape_dynamics_CollisionArbiter.__super__=nape_dynamics_Arbiter;nape_dynamics_CollisionArbiter.prototype=$extend(nape_dynamics_Arbiter.prototype,{__class__:nape_dynamics_CollisionArbiter});var nape_dynamics_Contact=function(){this.zpp_inner=null};$hxClasses["nape.dynamics.Contact"]=nape_dynamics_Contact;nape_dynamics_Contact.__name__="nape.dynamics.Contact";nape_dynamics_Contact.prototype={zpp_inner:null,toString:function(){if(this.zpp_inner.arbiter==null||this.zpp_inner.arbiter.cleared){return"{object-pooled}"}else{return"{Contact}"}},__class__:nape_dynamics_Contact};var nape_dynamics_ContactIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.dynamics.ContactIterator"]=nape_dynamics_ContactIterator;nape_dynamics_ContactIterator.__name__="nape.dynamics.ContactIterator";nape_dynamics_ContactIterator.get=function(list){var ret;if(nape_dynamics_ContactIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ContactList.internal=true;var ret1=new nape_dynamics_ContactIterator;zpp_$nape_util_ZPP_$ContactList.internal=false;ret=ret1}else{var r=nape_dynamics_ContactIterator.zpp_pool;nape_dynamics_ContactIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_dynamics_ContactIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=0;var cx_ite=_this.zpp_inner.inner.next;while(cx_ite!=null){var i=cx_ite;if(i.active&&i.arbiter.active){_this.zpp_inner.user_length++}cx_ite=cx_ite.next}}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_dynamics_ContactIterator.zpp_pool;nape_dynamics_ContactIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_ContactIterator};var nape_dynamics_ContactList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ContactList;this.zpp_inner.outer=this};$hxClasses["nape.dynamics.ContactList"]=nape_dynamics_ContactList;nape_dynamics_ContactList.__name__="nape.dynamics.ContactList";nape_dynamics_ContactList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=0;var cx_ite=this.zpp_inner.inner.next;while(cx_ite!=null){var i=cx_ite;if(i.active&&i.arbiter.active){this.zpp_inner.user_length++}cx_ite=cx_ite.next}}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=0;this.zpp_inner.at_ite=this.zpp_inner.inner.next;while(true){var x=this.zpp_inner.at_ite;if(x.active&&x.arbiter.active){break}this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;while(true){var x1=this.zpp_inner.at_ite;if(x1.active&&x1.arbiter.active){break}this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_dynamics_ContactIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=0;var cx_ite=_this.zpp_inner.inner.next;while(cx_ite!=null){var i=cx_ite;if(i.active&&i.arbiter.active){_this.zpp_inner.user_length++}cx_ite=cx_ite.next}}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_dynamics_ContactIterator.zpp_pool;nape_dynamics_ContactIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i1=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i1==null?"NULL":i1.toString();fst=false}return ret+"]"},__class__:nape_dynamics_ContactList};var nape_dynamics_FluidArbiter=function(){nape_dynamics_Arbiter.call(this)};$hxClasses["nape.dynamics.FluidArbiter"]=nape_dynamics_FluidArbiter;nape_dynamics_FluidArbiter.__name__="nape.dynamics.FluidArbiter";nape_dynamics_FluidArbiter.__super__=nape_dynamics_Arbiter;nape_dynamics_FluidArbiter.prototype=$extend(nape_dynamics_Arbiter.prototype,{__class__:nape_dynamics_FluidArbiter});var nape_dynamics_InteractionFilter=function(collisionGroup,collisionMask,sensorGroup,sensorMask,fluidGroup,fluidMask){if(fluidMask==null){fluidMask=-1}if(fluidGroup==null){fluidGroup=1}if(sensorMask==null){sensorMask=-1}if(sensorGroup==null){sensorGroup=1}if(collisionMask==null){collisionMask=-1}if(collisionGroup==null){collisionGroup=1}this.zpp_inner=null;if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool==null){this.zpp_inner=new zpp_$nape_dynamics_ZPP_$InteractionFilter}else{this.zpp_inner=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}this.zpp_inner.outer=this;if(this.zpp_inner.collisionGroup!=collisionGroup){this.zpp_inner.collisionGroup=collisionGroup;this.zpp_inner.invalidate()}if(this.zpp_inner.collisionMask!=collisionMask){this.zpp_inner.collisionMask=collisionMask;this.zpp_inner.invalidate()}if(this.zpp_inner.sensorGroup!=sensorGroup){this.zpp_inner.sensorGroup=sensorGroup;this.zpp_inner.invalidate()}if(this.zpp_inner.sensorMask!=sensorMask){this.zpp_inner.sensorMask=sensorMask;this.zpp_inner.invalidate()}if(this.zpp_inner.fluidGroup!=fluidGroup){this.zpp_inner.fluidGroup=fluidGroup;this.zpp_inner.invalidate()}if(this.zpp_inner.fluidMask!=fluidMask){this.zpp_inner.fluidMask=fluidMask;this.zpp_inner.invalidate()}};$hxClasses["nape.dynamics.InteractionFilter"]=nape_dynamics_InteractionFilter;nape_dynamics_InteractionFilter.__name__="nape.dynamics.InteractionFilter";nape_dynamics_InteractionFilter.prototype={zpp_inner:null,__class__:nape_dynamics_InteractionFilter};var nape_dynamics_InteractionGroup=function(ignore){if(ignore==null){ignore=false}this.zpp_inner=null;this.zpp_inner=new zpp_$nape_dynamics_ZPP_$InteractionGroup;this.zpp_inner.outer=this;if(this.zpp_inner.ignore!=ignore){this.zpp_inner.invalidate(true);this.zpp_inner.ignore=ignore}};$hxClasses["nape.dynamics.InteractionGroup"]=nape_dynamics_InteractionGroup;nape_dynamics_InteractionGroup.__name__="nape.dynamics.InteractionGroup";nape_dynamics_InteractionGroup.prototype={zpp_inner:null,toString:function(){var ret="InteractionGroup";if(this.zpp_inner.ignore){ret="InteractionGroup"+":ignore"}return ret},__class__:nape_dynamics_InteractionGroup};var nape_dynamics_InteractionGroupIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.dynamics.InteractionGroupIterator"]=nape_dynamics_InteractionGroupIterator;nape_dynamics_InteractionGroupIterator.__name__="nape.dynamics.InteractionGroupIterator";nape_dynamics_InteractionGroupIterator.get=function(list){var ret;if(nape_dynamics_InteractionGroupIterator.zpp_pool==null){zpp_$nape_util_ZPP_$InteractionGroupList.internal=true;var ret1=new nape_dynamics_InteractionGroupIterator;zpp_$nape_util_ZPP_$InteractionGroupList.internal=false;ret=ret1}else{var r=nape_dynamics_InteractionGroupIterator.zpp_pool;nape_dynamics_InteractionGroupIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_dynamics_InteractionGroupIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool;nape_dynamics_InteractionGroupIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_dynamics_InteractionGroupIterator};var nape_dynamics_InteractionGroupList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$InteractionGroupList;this.zpp_inner.outer=this};$hxClasses["nape.dynamics.InteractionGroupList"]=nape_dynamics_InteractionGroupList;nape_dynamics_InteractionGroupList.__name__="nape.dynamics.InteractionGroupList";nape_dynamics_InteractionGroupList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_dynamics_InteractionGroupIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_dynamics_InteractionGroupIterator.zpp_pool;nape_dynamics_InteractionGroupIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_dynamics_InteractionGroupList};var nape_geom_AABB=function(x,y,width,height){if(height==null){height=0}if(width==null){width=0}if(y==null){y=0}if(x==null){x=0}this.zpp_inner=null;var ret;if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$AABB}else{ret=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=ret.next;ret.next=null}ret.minx=x;ret.miny=y;ret.maxx=x+width;ret.maxy=y+height;this.zpp_inner=ret;this.zpp_inner.outer=this};$hxClasses["nape.geom.AABB"]=nape_geom_AABB;nape_geom_AABB.__name__="nape.geom.AABB";nape_geom_AABB.prototype={zpp_inner:null,toString:function(){var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}return this.zpp_inner.toString()},__class__:nape_geom_AABB};var nape_geom_ConvexResult=function(){this.zpp_inner=null};$hxClasses["nape.geom.ConvexResult"]=nape_geom_ConvexResult;nape_geom_ConvexResult.__name__="nape.geom.ConvexResult";nape_geom_ConvexResult.prototype={zpp_inner:null,toString:function(){return"{ shape: "+Std.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},__class__:nape_geom_ConvexResult};var nape_geom_ConvexResultIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.geom.ConvexResultIterator"]=nape_geom_ConvexResultIterator;nape_geom_ConvexResultIterator.__name__="nape.geom.ConvexResultIterator";nape_geom_ConvexResultIterator.get=function(list){var ret;if(nape_geom_ConvexResultIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ConvexResultList.internal=true;var ret1=new nape_geom_ConvexResultIterator;zpp_$nape_util_ZPP_$ConvexResultList.internal=false;ret=ret1}else{var r=nape_geom_ConvexResultIterator.zpp_pool;nape_geom_ConvexResultIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_geom_ConvexResultIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_geom_ConvexResultIterator.zpp_pool;nape_geom_ConvexResultIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_ConvexResultIterator};var nape_geom_ConvexResultList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ConvexResultList;this.zpp_inner.outer=this};$hxClasses["nape.geom.ConvexResultList"]=nape_geom_ConvexResultList;nape_geom_ConvexResultList.__name__="nape.geom.ConvexResultList";nape_geom_ConvexResultList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_geom_ConvexResultIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_geom_ConvexResultIterator.zpp_pool;nape_geom_ConvexResultIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_geom_ConvexResultList};var nape_geom_GeomPoly=function(vertices){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_geom_ZPP_$GeomPoly(this);if(vertices!=null){if(vertices instanceof Array){var lv=vertices;var _g=0;while(_g<lv.length){var v=lv[_g++];var _this=v.zpp_inner;if(_this._validate!=null){_this._validate()}var x=v.zpp_inner.x;var _this1=v.zpp_inner;if(_this1._validate!=null){_this1._validate()}var ret;if(zpp_$nape_geom_ZPP_$GeomVert.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$GeomVert}else{ret=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool;zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ret.next;ret.next=null}ret.forced=false;ret.x=x;ret.y=v.zpp_inner.y;var obj=ret;if(this.zpp_inner.vertices==null){this.zpp_inner.vertices=obj.prev=obj.next=obj}else{obj.prev=this.zpp_inner.vertices;obj.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=obj;this.zpp_inner.vertices.next=obj}this.zpp_inner.vertices=obj}}else if(vertices instanceof nape_geom_Vec2List){var _g1=vertices.iterator();while(true){_g1.zpp_inner.zpp_inner.valmod();var length=_g1.zpp_inner.zpp_gl();_g1.zpp_critical=true;var tmp;if(_g1.zpp_i<length){tmp=true}else{_g1.zpp_next=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=_g1;_g1.zpp_inner=null;tmp=false}if(!tmp){break}_g1.zpp_critical=false;var v1=_g1.zpp_inner.at(_g1.zpp_i++);var _this2=v1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var x1=v1.zpp_inner.x;var _this3=v1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var ret1;if(zpp_$nape_geom_ZPP_$GeomVert.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$GeomVert}else{ret1=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool;zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ret1.next;ret1.next=null}ret1.forced=false;ret1.x=x1;ret1.y=v1.zpp_inner.y;var obj1=ret1;if(this.zpp_inner.vertices==null){this.zpp_inner.vertices=obj1.prev=obj1.next=obj1}else{obj1.prev=this.zpp_inner.vertices;obj1.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=obj1;this.zpp_inner.vertices.next=obj1}this.zpp_inner.vertices=obj1}}else if(vertices instanceof nape_geom_GeomPoly){var verts=vertices.zpp_inner.vertices;if(verts!=null){var vite=verts;while(true){var x2=vite.x;var y=vite.y;if(y==null){y=0}if(x2==null){x2=0}var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x2;ret3.y=y;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var tmp1;var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(ret2.zpp_inner.x==x2){var _this5=ret2.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp1=ret2.zpp_inner.y==y}else{tmp1=false}if(!tmp1){ret2.zpp_inner.x=x2;ret2.zpp_inner.y=y;var _this6=ret2.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}}ret2.zpp_inner.weak=false;var v2=ret2;vite=vite.next;var _this7=v2.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x3=v2.zpp_inner.x;var _this8=v2.zpp_inner;if(_this8._validate!=null){_this8._validate()}var ret4;if(zpp_$nape_geom_ZPP_$GeomVert.zpp_pool==null){ret4=new zpp_$nape_geom_ZPP_$GeomVert}else{ret4=zpp_$nape_geom_ZPP_$GeomVert.zpp_pool;zpp_$nape_geom_ZPP_$GeomVert.zpp_pool=ret4.next;ret4.next=null}ret4.forced=false;ret4.x=x3;ret4.y=v2.zpp_inner.y;var obj2=ret4;if(this.zpp_inner.vertices==null){this.zpp_inner.vertices=obj2.prev=obj2.next=obj2}else{obj2.prev=this.zpp_inner.vertices;obj2.next=this.zpp_inner.vertices.next;this.zpp_inner.vertices.next.prev=obj2;this.zpp_inner.vertices.next=obj2}this.zpp_inner.vertices=obj2;var inner=v2.zpp_inner;v2.zpp_inner.outer=null;v2.zpp_inner=null;v2.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=v2;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner;if(vite==verts){break}}}}this.skipForward(1);if(vertices instanceof Array){var lv1=vertices;var i=0;while(i<lv1.length){var cur=lv1[i];var tmp2;if(cur.zpp_inner.weak){var inner1=cur.zpp_inner;cur.zpp_inner.outer=null;cur.zpp_inner=null;cur.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=cur;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1;tmp2=true}else{tmp2=false}if(tmp2){lv1.splice(i,1);continue}++i}}else if(vertices instanceof nape_geom_Vec2List){var lv2=vertices;if(lv2.zpp_inner._validate!=null){lv2.zpp_inner._validate()}var ins=lv2.zpp_inner.inner;var pre=null;var cur1=ins.head;while(cur1!=null){var x4=cur1.elt;if(x4.outer.zpp_inner.weak){cur1=ins.erase(pre);if(x4.outer.zpp_inner.weak){var _this9=x4.outer;var inner2=_this9.zpp_inner;_this9.zpp_inner.outer=null;_this9.zpp_inner=null;_this9.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=_this9;if(inner2.outer!=null){inner2.outer.zpp_inner=null;inner2.outer=null}inner2._isimmutable=null;inner2._validate=null;inner2._invalidate=null;inner2.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner2}}else{pre=cur1;cur1=cur1.next}}}}};$hxClasses["nape.geom.GeomPoly"]=nape_geom_GeomPoly;nape_geom_GeomPoly.__name__="nape.geom.GeomPoly";nape_geom_GeomPoly.prototype={zpp_inner:null,skipForward:function(times){if(this.zpp_inner.vertices!=null){if(times>0){while(times-- >0)this.zpp_inner.vertices=this.zpp_inner.vertices.next}else if(times<0){while(times++<0)this.zpp_inner.vertices=this.zpp_inner.vertices.prev}}return this},toString:function(){var ret="GeomPoly[";var F=this.zpp_inner.vertices;var L=this.zpp_inner.vertices;if(F!=null){var nite=F;while(true){var v=nite;if(v!=this.zpp_inner.vertices){ret+=","}ret+="{"+v.x+","+v.y+"}";nite=nite.next;if(!(nite!=L)){break}}}return ret+"]"},__class__:nape_geom_GeomPoly};var nape_geom_GeomPolyIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.geom.GeomPolyIterator"]=nape_geom_GeomPolyIterator;nape_geom_GeomPolyIterator.__name__="nape.geom.GeomPolyIterator";nape_geom_GeomPolyIterator.get=function(list){var ret;if(nape_geom_GeomPolyIterator.zpp_pool==null){zpp_$nape_util_ZPP_$GeomPolyList.internal=true;var ret1=new nape_geom_GeomPolyIterator;zpp_$nape_util_ZPP_$GeomPolyList.internal=false;ret=ret1}else{var r=nape_geom_GeomPolyIterator.zpp_pool;nape_geom_GeomPolyIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_geom_GeomPolyIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_geom_GeomPolyIterator.zpp_pool;nape_geom_GeomPolyIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_GeomPolyIterator};var nape_geom_GeomPolyList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$GeomPolyList;this.zpp_inner.outer=this};$hxClasses["nape.geom.GeomPolyList"]=nape_geom_GeomPolyList;nape_geom_GeomPolyList.__name__="nape.geom.GeomPolyList";nape_geom_GeomPolyList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_geom_GeomPolyIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_geom_GeomPolyIterator.zpp_pool;nape_geom_GeomPolyIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_geom_GeomPolyList};var nape_geom_Mat23=function(a,b,c,d,tx,ty){if(ty==null){ty=0}if(tx==null){tx=0}if(d==null){d=1}if(c==null){c=0}if(b==null){b=0}if(a==null){a=1}this.zpp_inner=null;this.zpp_inner=zpp_$nape_geom_ZPP_$Mat23.get();this.zpp_inner.outer=this;this.zpp_inner.a=a;var _this=this.zpp_inner;if(_this._invalidate!=null){_this._invalidate()}this.zpp_inner.b=b;var _this1=this.zpp_inner;if(_this1._invalidate!=null){_this1._invalidate()}this.zpp_inner.tx=tx;var _this2=this.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate()}this.zpp_inner.c=c;var _this3=this.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate()}this.zpp_inner.d=d;var _this4=this.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate()}this.zpp_inner.ty=ty;var _this5=this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate()}};$hxClasses["nape.geom.Mat23"]=nape_geom_Mat23;nape_geom_Mat23.__name__="nape.geom.Mat23";nape_geom_Mat23.prototype={zpp_inner:null,toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:nape_geom_Mat23};var nape_geom_MatMN=function(rows,cols){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_geom_ZPP_$MatMN(rows,cols);this.zpp_inner.outer=this};$hxClasses["nape.geom.MatMN"]=nape_geom_MatMN;nape_geom_MatMN.__name__="nape.geom.MatMN";nape_geom_MatMN.prototype={zpp_inner:null,toString:function(){var ret="{ ";var fst=true;var _g=0;var _g1=this.zpp_inner.m;while(_g<_g1){var i=_g++;if(!fst){ret+="; "}fst=false;var _g2=0;var _g11=this.zpp_inner.n;while(_g2<_g11)ret+=this.zpp_inner.x[i*this.zpp_inner.n+_g2++]+" "}ret+="}";return ret},__class__:nape_geom_MatMN};var nape_geom_RayResult=function(){this.zpp_inner=null};$hxClasses["nape.geom.RayResult"]=nape_geom_RayResult;nape_geom_RayResult.__name__="nape.geom.RayResult";nape_geom_RayResult.prototype={zpp_inner:null,toString:function(){return"{ shape: "+Std.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+Std.string(this.zpp_inner.inner)+" }"},__class__:nape_geom_RayResult};var nape_geom_RayResultIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.geom.RayResultIterator"]=nape_geom_RayResultIterator;nape_geom_RayResultIterator.__name__="nape.geom.RayResultIterator";nape_geom_RayResultIterator.get=function(list){var ret;if(nape_geom_RayResultIterator.zpp_pool==null){zpp_$nape_util_ZPP_$RayResultList.internal=true;var ret1=new nape_geom_RayResultIterator;zpp_$nape_util_ZPP_$RayResultList.internal=false;ret=ret1}else{var r=nape_geom_RayResultIterator.zpp_pool;nape_geom_RayResultIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_geom_RayResultIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_geom_RayResultIterator.zpp_pool;nape_geom_RayResultIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_RayResultIterator};var nape_geom_RayResultList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$RayResultList;this.zpp_inner.outer=this};$hxClasses["nape.geom.RayResultList"]=nape_geom_RayResultList;nape_geom_RayResultList.__name__="nape.geom.RayResultList";nape_geom_RayResultList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_geom_RayResultIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_geom_RayResultIterator.zpp_pool;nape_geom_RayResultIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_geom_RayResultList};var nape_geom_Vec2=function(x,y){if(y==null){y=0}if(x==null){x=0}this.zpp_pool=null;this.zpp_inner=null;var ret;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Vec2}else{ret=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.weak=false;ret._immutable=false;ret.x=x;ret.y=y;this.zpp_inner=ret;this.zpp_inner.outer=this};$hxClasses["nape.geom.Vec2"]=nape_geom_Vec2;nape_geom_Vec2.__name__="nape.geom.Vec2";nape_geom_Vec2.prototype={zpp_inner:null,zpp_pool:null,normalise:function(){var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var d=this.zpp_inner.x;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var d1=d*this.zpp_inner.x;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}var d2=this.zpp_inner.y;var _this3=this.zpp_inner;if(_this3._validate!=null){_this3._validate()}var imag=1/Math.sqrt(d1+d2*this.zpp_inner.y);var _g=this;var _this4=_g.zpp_inner;if(_this4._validate!=null){_this4._validate()}var x=_g.zpp_inner.x*imag;var _this5=_g.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(_g.zpp_inner.x!=x){_g.zpp_inner.x=x;var _this6=_g.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}var _this7=_g.zpp_inner;if(_this7._validate!=null){_this7._validate()}var _g1=this;var _this8=_g1.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y=_g1.zpp_inner.y*imag;var _this9=_g1.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_g1.zpp_inner.y!=y){_g1.zpp_inner.y=y;var _this10=_g1.zpp_inner;if(_this10._invalidate!=null){_this10._invalidate(_this10)}}var _this11=_g1.zpp_inner;if(_this11._validate!=null){_this11._validate()}var _this12=this.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}return this},unit:function(weak){if(weak==null){weak=false}var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var x=this.zpp_inner.x;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x1=x*this.zpp_inner.x;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}var x2=this.zpp_inner.y;var _this3=this.zpp_inner;if(_this3._validate!=null){_this3._validate()}var scale=1/Math.sqrt(x1+x2*this.zpp_inner.y);var _this4=this.zpp_inner;if(_this4._validate!=null){_this4._validate()}var x3=this.zpp_inner.x*scale;var _this5=this.zpp_inner;if(_this5._validate!=null){_this5._validate()}var y=this.zpp_inner.y*scale;var weak1=weak;if(weak==null){weak1=false}if(y==null){y=0}if(x3==null){x3=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x3;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this6=ret.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(ret.zpp_inner.x==x3){var _this7=ret.zpp_inner;if(_this7._validate!=null){_this7._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x3;ret.zpp_inner.y=y;var _this8=ret.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}}ret.zpp_inner.weak=weak1;return ret},sub:function(vector,weak){if(weak==null){weak=false}var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var x=this.zpp_inner.x;var _this1=vector.zpp_inner;if(_this1._validate!=null){_this1._validate()}var x1=x-vector.zpp_inner.x;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}var y=this.zpp_inner.y;var _this3=vector.zpp_inner;if(_this3._validate!=null){_this3._validate()}var y1=y-vector.zpp_inner.y;var weak1=weak;if(weak==null){weak1=false}if(y1==null){y1=0}if(x1==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this4=ret.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(ret.zpp_inner.x==x1){var _this5=ret.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp=ret.zpp_inner.y==y1}else{tmp=false}if(!tmp){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this6=ret.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}}ret.zpp_inner.weak=weak1;if(vector.zpp_inner.weak){var inner=vector.zpp_inner;vector.zpp_inner.outer=null;vector.zpp_inner=null;vector.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=vector;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}return ret},mul:function(scalar,weak){if(weak==null){weak=false}var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var x=this.zpp_inner.x*scalar;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var y=this.zpp_inner.y*scalar;var weak1=weak;if(weak==null){weak1=false}if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this2=ret.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(ret.zpp_inner.x==x){var _this3=ret.zpp_inner;if(_this3._validate!=null){_this3._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this4=ret.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate(_this4)}}}ret.zpp_inner.weak=weak1;return ret},muleq:function(scalar){var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var x=this.zpp_inner.x*scalar;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var y=this.zpp_inner.y*scalar;var tmp;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(this.zpp_inner.x==x){var _this3=this.zpp_inner;if(_this3._validate!=null){_this3._validate()}tmp=this.zpp_inner.y==y}else{tmp=false}if(!tmp){this.zpp_inner.x=x;this.zpp_inner.y=y;var _this4=this.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate(_this4)}}return this},toString:function(){var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}return this.zpp_inner.toString()},__class__:nape_geom_Vec2};var nape_geom_Vec2Iterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.geom.Vec2Iterator"]=nape_geom_Vec2Iterator;nape_geom_Vec2Iterator.__name__="nape.geom.Vec2Iterator";nape_geom_Vec2Iterator.get=function(list){var ret;if(nape_geom_Vec2Iterator.zpp_pool==null){zpp_$nape_util_ZPP_$Vec2List.internal=true;var ret1=new nape_geom_Vec2Iterator;zpp_$nape_util_ZPP_$Vec2List.internal=false;ret=ret1}else{var r=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_geom_Vec2Iterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var length=this.zpp_inner.zpp_gl();this.zpp_critical=true;if(this.zpp_i<length){return true}else{this.zpp_next=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_geom_Vec2Iterator};var nape_geom_Vec2List=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$Vec2List;this.zpp_inner.outer=this};$hxClasses["nape.geom.Vec2List"]=nape_geom_Vec2List;nape_geom_Vec2List.__name__="nape.geom.Vec2List";nape_geom_Vec2List.prototype={zpp_inner:null,zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(index){this.zpp_vm();if(this.zpp_inner.reverse_flag){index=this.zpp_gl()-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}var _this=this.zpp_inner.at_ite.elt;if(_this.outer==null){_this.outer=new nape_geom_Vec2;var o=_this.outer.zpp_inner;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o._isimmutable=null;o._validate=null;o._invalidate=null;o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o;_this.outer.zpp_inner=_this}return _this.outer},push:function(obj){this.zpp_vm();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.zpp_inner.inner.add(obj.zpp_inner)}else{if(this.zpp_inner.push_ite==null){var tmp=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1);this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},empty:function(){return this.zpp_gl()==0},iterator:function(){this.zpp_vm();return nape_geom_Vec2Iterator.get(this)},toString:function(){var ret="[";var fst=true;var _g=this.iterator();while(true){_g.zpp_inner.zpp_inner.valmod();var length=_g.zpp_inner.zpp_gl();_g.zpp_critical=true;var tmp;if(_g.zpp_i<length){tmp=true}else{_g.zpp_next=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_geom_Vec2List};var nape_geom_Vec3=function(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}this.zpp_pool=null;this.zpp_inner=null;this.zpp_inner=new zpp_$nape_geom_ZPP_$Vec3;this.zpp_inner.outer=this;this.zpp_inner.x=x;var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}this.zpp_inner.y=y;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}this.zpp_inner.z=z;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}};$hxClasses["nape.geom.Vec3"]=nape_geom_Vec3;nape_geom_Vec3.__name__="nape.geom.Vec3";nape_geom_Vec3.get=function(x,y,z){if(z==null){z=0}if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec3==null){ret=new nape_geom_Vec3}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec3;zpp_$nape_util_ZPP_$PubPool.poolVec3=ret.zpp_pool;ret.zpp_pool=null}ret.setxyz(x,y,z);ret.zpp_inner.immutable=false;ret.zpp_inner._validate=null;return ret};nape_geom_Vec3.prototype={zpp_inner:null,zpp_pool:null,setxyz:function(x,y,z){this.zpp_inner.x=x;var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}this.zpp_inner.y=y;var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}this.zpp_inner.z=z;var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}return this},toString:function(){var _this=this.zpp_inner;if(_this._validate!=null){_this._validate()}var tmp="{ x: "+this.zpp_inner.x+" y: ";var _this1=this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var tmp1=tmp+this.zpp_inner.y+" z: ";var _this2=this.zpp_inner;if(_this2._validate!=null){_this2._validate()}return tmp1+this.zpp_inner.z+" }"},__class__:nape_geom_Vec3};var nape_geom_Winding=function(){};$hxClasses["nape.geom.Winding"]=nape_geom_Winding;nape_geom_Winding.__name__="nape.geom.Winding";nape_geom_Winding.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED=new nape_geom_Winding;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.Winding_UNDEFINED){return"UNDEFINED"}else{if(zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE=new nape_geom_Winding;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.Winding_CLOCKWISE){return"CLOCKWISE"}else{if(zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE=new nape_geom_Winding;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.Winding_ANTICLOCKWISE){return"ANTICLOCKWISE"}else{return""}}}},__class__:nape_geom_Winding};var nape_phys_Interactor=function(){this.zpp_inner_i=null};$hxClasses["nape.phys.Interactor"]=nape_phys_Interactor;nape_phys_Interactor.__name__="nape.phys.Interactor";nape_phys_Interactor.prototype={zpp_inner_i:null,toString:function(){return""},__class__:nape_phys_Interactor};var nape_phys_Body=function(type,position){this.zpp_inner=null;nape_phys_Interactor.call(this);this.zpp_inner=new zpp_$nape_phys_ZPP_$Body;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;if(position!=null){var _this=position.zpp_inner;if(_this._validate!=null){_this._validate()}this.zpp_inner.posx=position.zpp_inner.x;var _this1=position.zpp_inner;if(_this1._validate!=null){_this1._validate()}this.zpp_inner.posy=position.zpp_inner.y}else{this.zpp_inner.posx=0;this.zpp_inner.posy=0}var type1;if(type==null){if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}type1=zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC}else{type1=type}this.zpp_inner.immutable_midstep("Body::type");if(zpp_$nape_phys_ZPP_$Body.types[this.zpp_inner.type]!=type1){var ntype;if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(type1==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){ntype=2}else{if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}ntype=type1==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC?3:1}if(ntype==1&&this.zpp_inner.space!=null){this.zpp_inner.velx=0;this.zpp_inner.vely=0;this.zpp_inner.angvel=0}this.zpp_inner.invalidate_type();if(this.zpp_inner.space!=null){this.zpp_inner.space.transmitType(this.zpp_inner,ntype)}else{this.zpp_inner.type=ntype}}if(position!=null){if(position.zpp_inner.weak){var inner=position.zpp_inner;position.zpp_inner.outer=null;position.zpp_inner=null;position.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=position;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY.zpp_inner)};$hxClasses["nape.phys.Body"]=nape_phys_Body;nape_phys_Body.__name__="nape.phys.Body";nape_phys_Body.__super__=nape_phys_Interactor;nape_phys_Body.prototype=$extend(nape_phys_Interactor.prototype,{zpp_inner:null,interactingBodies:function(type,depth,output){if(depth==null){depth=-1}var arbiter_type;if(type==null){arbiter_type=zpp_$nape_dynamics_ZPP_$Arbiter.COL|zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR|zpp_$nape_dynamics_ZPP_$Arbiter.FLUID}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}if(type==zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION){arbiter_type=zpp_$nape_dynamics_ZPP_$Arbiter.COL}else{if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}arbiter_type=type==zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR?zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR:zpp_$nape_dynamics_ZPP_$Arbiter.FLUID}}return this.zpp_inner.interactingBodies(arbiter_type,depth,output)},applyImpulse:function(impulse,pos,sleepable){if(sleepable==null){sleepable=false}if(sleepable&&this.zpp_inner.component.sleeping){if(impulse.zpp_inner.weak){var inner=impulse.zpp_inner;impulse.zpp_inner.outer=null;impulse.zpp_inner=null;impulse.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=impulse;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(pos!=null){if(pos.zpp_inner.weak){var inner1=pos.zpp_inner;pos.zpp_inner.outer=null;pos.zpp_inner=null;pos.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=pos;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}}return this}this.zpp_inner.validate_mass();var t=this.zpp_inner.imass;var tmp=this.zpp_inner;var tmp1=tmp.velx;var _this=impulse.zpp_inner;if(_this._validate!=null){_this._validate()}tmp.velx=tmp1+impulse.zpp_inner.x*t;var tmp2=this.zpp_inner;var tmp3=tmp2.vely;var _this1=impulse.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp2.vely=tmp3+impulse.zpp_inner.y*t;if(pos!=null){var rx=0;var ry=0;var _this2=pos.zpp_inner;if(_this2._validate!=null){_this2._validate()}rx=pos.zpp_inner.x-this.zpp_inner.posx;var _this3=pos.zpp_inner;if(_this3._validate!=null){_this3._validate()}ry=pos.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();var tmp4=this.zpp_inner;var tmp5=tmp4.angvel;var _this4=impulse.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp6=impulse.zpp_inner.y*rx;var _this5=impulse.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp4.angvel=tmp5+(tmp6-impulse.zpp_inner.x*ry)*this.zpp_inner.iinertia;if(pos.zpp_inner.weak){var inner2=pos.zpp_inner;pos.zpp_inner.outer=null;pos.zpp_inner=null;pos.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=pos;if(inner2.outer!=null){inner2.outer.zpp_inner=null;inner2.outer=null}inner2._isimmutable=null;inner2._validate=null;inner2._invalidate=null;inner2.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner2}}if(!sleepable){if(this.zpp_inner.type==2){this.zpp_inner.wake()}}if(impulse.zpp_inner.weak){var inner3=impulse.zpp_inner;impulse.zpp_inner.outer=null;impulse.zpp_inner=null;impulse.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=impulse;if(inner3.outer!=null){inner3.outer.zpp_inner=null;inner3.outer=null}inner3._isimmutable=null;inner3._validate=null;inner3._invalidate=null;inner3.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner3}return this},setShapeMaterials:function(material){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");var cx_ite=this.zpp_inner.shapes.head;while(cx_ite!=null){var _this=cx_ite.elt.outer;_this.zpp_inner.immutable_midstep("Shape::material");_this.zpp_inner.setMaterial(material.zpp_inner);_this.zpp_inner.material.wrapper();cx_ite=cx_ite.next}return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==2?"dynamic":this.zpp_inner.type==1?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:nape_phys_Body});var nape_phys_BodyIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.phys.BodyIterator"]=nape_phys_BodyIterator;nape_phys_BodyIterator.__name__="nape.phys.BodyIterator";nape_phys_BodyIterator.get=function(list){var ret;if(nape_phys_BodyIterator.zpp_pool==null){zpp_$nape_util_ZPP_$BodyList.internal=true;var ret1=new nape_phys_BodyIterator;zpp_$nape_util_ZPP_$BodyList.internal=false;ret=ret1}else{var r=nape_phys_BodyIterator.zpp_pool;nape_phys_BodyIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_phys_BodyIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_phys_BodyIterator.zpp_pool;nape_phys_BodyIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_BodyIterator};var nape_phys_BodyList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$BodyList;this.zpp_inner.outer=this};$hxClasses["nape.phys.BodyList"]=nape_phys_BodyList;nape_phys_BodyList.__name__="nape.phys.BodyList";nape_phys_BodyList.prototype={zpp_inner:null,has:function(obj){this.zpp_inner.valmod();return this.zpp_inner.inner.has(obj.zpp_inner)},at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},push:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.zpp_inner.inner.add(obj.zpp_inner)}else{if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},unshift:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else{this.zpp_inner.inner.add(obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},remove:function(obj){this.zpp_inner.valmod();var ret;ret=false;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt==obj.zpp_inner){ret=true;break}cx_ite=cx_ite.next}if(ret){if(this.zpp_inner.subber!=null){this.zpp_inner.subber(obj)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.remove(obj.zpp_inner)}this.zpp_inner.invalidate()}return ret},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_phys_BodyIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_phys_BodyIterator.zpp_pool;nape_phys_BodyIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_phys_BodyList};var nape_phys_BodyType=function(){};$hxClasses["nape.phys.BodyType"]=nape_phys_BodyType;nape_phys_BodyType.__name__="nape.phys.BodyType";nape_phys_BodyType.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.BodyType_STATIC){return"STATIC"}else{if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){return"DYNAMIC"}else{if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC){return"KINEMATIC"}else{return""}}}},__class__:nape_phys_BodyType};var nape_phys_Compound=function(){this.zpp_inner=null;nape_phys_Interactor.call(this);this.zpp_inner=new zpp_$nape_phys_ZPP_$Compound;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;this.zpp_inner.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND.zpp_inner)};$hxClasses["nape.phys.Compound"]=nape_phys_Compound;nape_phys_Compound.__name__="nape.phys.Compound";nape_phys_Compound.__super__=nape_phys_Interactor;nape_phys_Compound.prototype=$extend(nape_phys_Interactor.prototype,{zpp_inner:null,toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:nape_phys_Compound});var nape_phys_CompoundIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.phys.CompoundIterator"]=nape_phys_CompoundIterator;nape_phys_CompoundIterator.__name__="nape.phys.CompoundIterator";nape_phys_CompoundIterator.get=function(list){var ret;if(nape_phys_CompoundIterator.zpp_pool==null){zpp_$nape_util_ZPP_$CompoundList.internal=true;var ret1=new nape_phys_CompoundIterator;zpp_$nape_util_ZPP_$CompoundList.internal=false;ret=ret1}else{var r=nape_phys_CompoundIterator.zpp_pool;nape_phys_CompoundIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_phys_CompoundIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_phys_CompoundIterator.zpp_pool;nape_phys_CompoundIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_CompoundIterator};var nape_phys_CompoundList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$CompoundList;this.zpp_inner.outer=this};$hxClasses["nape.phys.CompoundList"]=nape_phys_CompoundList;nape_phys_CompoundList.__name__="nape.phys.CompoundList";nape_phys_CompoundList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},remove:function(obj){this.zpp_inner.valmod();var ret;ret=false;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt==obj.zpp_inner){ret=true;break}cx_ite=cx_ite.next}if(ret){if(this.zpp_inner.subber!=null){this.zpp_inner.subber(obj)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.remove(obj.zpp_inner)}this.zpp_inner.invalidate()}return ret},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_phys_CompoundIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_phys_CompoundIterator.zpp_pool;nape_phys_CompoundIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_phys_CompoundList};var nape_phys_FluidProperties=function(density,viscosity){if(viscosity==null){viscosity=1}if(density==null){density=1}this.zpp_inner=null;if(zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool==null){this.zpp_inner=new zpp_$nape_phys_ZPP_$FluidProperties}else{this.zpp_inner=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool;zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}this.zpp_inner.outer=this;if(density!=this.zpp_inner.density*1e3){this.zpp_inner.density=density/1e3;this.zpp_inner.invalidate()}if(viscosity!=this.zpp_inner.viscosity){this.zpp_inner.viscosity=viscosity/1;this.zpp_inner.invalidate()}};$hxClasses["nape.phys.FluidProperties"]=nape_phys_FluidProperties;nape_phys_FluidProperties.__name__="nape.phys.FluidProperties";nape_phys_FluidProperties.prototype={zpp_inner:null,toString:function(){return"{ density: "+this.zpp_inner.density*1e3+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+Std.string(this.zpp_inner.wrap_gravity)+" }"},__class__:nape_phys_FluidProperties};var nape_phys_GravMassMode=function(){};$hxClasses["nape.phys.GravMassMode"]=nape_phys_GravMassMode;nape_phys_GravMassMode.__name__="nape.phys.GravMassMode";nape_phys_GravMassMode.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT=new nape_phys_GravMassMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.GravMassMode_DEFAULT){return"DEFAULT"}else{if(zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED=new nape_phys_GravMassMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.GravMassMode_FIXED){return"FIXED"}else{if(zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED=new nape_phys_GravMassMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.GravMassMode_SCALED){return"SCALED"}else{return""}}}},__class__:nape_phys_GravMassMode};var nape_phys_InertiaMode=function(){};$hxClasses["nape.phys.InertiaMode"]=nape_phys_InertiaMode;nape_phys_InertiaMode.__name__="nape.phys.InertiaMode";nape_phys_InertiaMode.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT=new nape_phys_InertiaMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InertiaMode_DEFAULT){return"DEFAULT"}else{if(zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED=new nape_phys_InertiaMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.InertiaMode_FIXED){return"FIXED"}else{return""}}},__class__:nape_phys_InertiaMode};var nape_phys_InteractorIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.phys.InteractorIterator"]=nape_phys_InteractorIterator;nape_phys_InteractorIterator.__name__="nape.phys.InteractorIterator";nape_phys_InteractorIterator.get=function(list){var ret;if(nape_phys_InteractorIterator.zpp_pool==null){zpp_$nape_util_ZPP_$InteractorList.internal=true;var ret1=new nape_phys_InteractorIterator;zpp_$nape_util_ZPP_$InteractorList.internal=false;ret=ret1}else{var r=nape_phys_InteractorIterator.zpp_pool;nape_phys_InteractorIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_phys_InteractorIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_phys_InteractorIterator.zpp_pool;nape_phys_InteractorIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_phys_InteractorIterator};var nape_phys_InteractorList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$InteractorList;this.zpp_inner.outer=this};$hxClasses["nape.phys.InteractorList"]=nape_phys_InteractorList;nape_phys_InteractorList.__name__="nape.phys.InteractorList";nape_phys_InteractorList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_phys_InteractorIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_phys_InteractorIterator.zpp_pool;nape_phys_InteractorIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_phys_InteractorList};var nape_phys_MassMode=function(){};$hxClasses["nape.phys.MassMode"]=nape_phys_MassMode;nape_phys_MassMode.__name__="nape.phys.MassMode";nape_phys_MassMode.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT=new nape_phys_MassMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.MassMode_DEFAULT){return"DEFAULT"}else{if(zpp_$nape_util_ZPP_$Flags.MassMode_FIXED==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.MassMode_FIXED=new nape_phys_MassMode;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.MassMode_FIXED){return"FIXED"}else{return""}}},__class__:nape_phys_MassMode};var nape_phys_Material=function(elasticity,dynamicFriction,staticFriction,density,rollingFriction){if(rollingFriction==null){rollingFriction=.001}if(density==null){density=1}if(staticFriction==null){staticFriction=2}if(dynamicFriction==null){dynamicFriction=1}if(elasticity==null){elasticity=0}this.zpp_inner=null;if(zpp_$nape_phys_ZPP_$Material.zpp_pool==null){this.zpp_inner=new zpp_$nape_phys_ZPP_$Material}else{this.zpp_inner=zpp_$nape_phys_ZPP_$Material.zpp_pool;zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.next;this.zpp_inner.next=null}this.zpp_inner.outer=this;if(elasticity!=this.zpp_inner.elasticity){this.zpp_inner.elasticity=elasticity/1;this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(dynamicFriction!=this.zpp_inner.dynamicFriction){this.zpp_inner.dynamicFriction=dynamicFriction/1;this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(staticFriction!=this.zpp_inner.staticFriction){this.zpp_inner.staticFriction=staticFriction/1;this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(density!=this.zpp_inner.density*1e3){this.zpp_inner.density=density/1e3;this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}if(rollingFriction!=this.zpp_inner.rollingFriction){this.zpp_inner.rollingFriction=rollingFriction/1;this.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}};$hxClasses["nape.phys.Material"]=nape_phys_Material;nape_phys_Material.__name__="nape.phys.Material";nape_phys_Material.wood=function(){return new nape_phys_Material(.4,.2,.38,.7,.005)};nape_phys_Material.steel=function(){return new nape_phys_Material(.2,.57,.74,7.8,.001)};nape_phys_Material.rubber=function(){return new nape_phys_Material(.8,1,1.4,1.5,.01)};nape_phys_Material.sand=function(){return new nape_phys_Material(-1,.45,.6,1.6,16)};nape_phys_Material.prototype={zpp_inner:null,toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+this.zpp_inner.density*1e3+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:nape_phys_Material};var nape_shape_Shape=function(){this.zpp_inner=null;nape_phys_Interactor.call(this)};$hxClasses["nape.shape.Shape"]=nape_shape_Shape;nape_shape_Shape.__name__="nape.shape.Shape";nape_shape_Shape.__super__=nape_phys_Interactor;nape_shape_Shape.prototype=$extend(nape_phys_Interactor.prototype,{zpp_inner:null,toString:function(){return(this.zpp_inner.type==0?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:nape_shape_Shape});var nape_shape_Circle=function(radius,localCOM,material,filter){this.zpp_inner_zn=null;nape_shape_Shape.call(this);this.zpp_inner_zn=new zpp_$nape_shape_ZPP_$Circle;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i=this.zpp_inner;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");if(radius!=this.zpp_inner_zn.radius){this.zpp_inner_zn.radius=radius;this.zpp_inner_zn.invalidate_radius()}if(localCOM==null){this.zpp_inner.localCOMx=0;this.zpp_inner.localCOMy=0}else{var _this=localCOM.zpp_inner;if(_this._validate!=null){_this._validate()}this.zpp_inner.localCOMx=localCOM.zpp_inner.x;var _this1=localCOM.zpp_inner;if(_this1._validate!=null){_this1._validate()}this.zpp_inner.localCOMy=localCOM.zpp_inner.y;if(localCOM.zpp_inner.weak){var inner=localCOM.zpp_inner;localCOM.zpp_inner.outer=null;localCOM.zpp_inner=null;localCOM.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=localCOM;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}}if(material==null){if(zpp_$nape_phys_ZPP_$Material.zpp_pool==null){this.zpp_inner.material=new zpp_$nape_phys_ZPP_$Material}else{this.zpp_inner.material=zpp_$nape_phys_ZPP_$Material.zpp_pool;zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.material.next;this.zpp_inner.material.next=null}}else{this.zpp_inner.immutable_midstep("Shape::material");this.zpp_inner.setMaterial(material.zpp_inner);this.zpp_inner.material.wrapper()}if(filter==null){if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool==null){this.zpp_inner.filter=new zpp_$nape_dynamics_ZPP_$InteractionFilter}else{this.zpp_inner.filter=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.filter.next;this.zpp_inner.filter.next=null}}else{this.zpp_inner.immutable_midstep("Shape::filter");this.zpp_inner.setFilter(filter.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE.zpp_inner)};$hxClasses["nape.shape.Circle"]=nape_shape_Circle;nape_shape_Circle.__name__="nape.shape.Circle";nape_shape_Circle.__super__=nape_shape_Shape;nape_shape_Circle.prototype=$extend(nape_shape_Shape.prototype,{zpp_inner_zn:null,__class__:nape_shape_Circle});var nape_shape_Edge=function(){this.zpp_inner=null};$hxClasses["nape.shape.Edge"]=nape_shape_Edge;nape_shape_Edge.__name__="nape.shape.Edge";nape_shape_Edge.prototype={zpp_inner:null,toString:function(){if(this.zpp_inner.polygon==null){return"Edge(object-pooled)"}else if(this.zpp_inner.polygon.body==null){this.zpp_inner.polygon.validate_laxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }"}else{var _this=this.zpp_inner.polygon;if(_this.zip_gaxi){if(_this.body!=null){_this.zip_gaxi=false;_this.validate_laxi();var _this1=_this.body;if(_this1.zip_axis){_this1.zip_axis=false;_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}if(_this.zip_gverts){if(_this.body!=null){_this.zip_gverts=false;_this.validate_lverts();var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}var li=_this.lverts.next;var cx_ite=_this.gverts.next;while(cx_ite!=null){var g=cx_ite;var l=li;li=li.next;g.x=_this.body.posx+(_this.body.axisy*l.x-_this.body.axisx*l.y);g.y=_this.body.posy+(l.x*_this.body.axisx+l.y*_this.body.axisy);cx_ite=cx_ite.next}}}var ite=_this.edges.head;var cx_ite1=_this.gverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var v=cx_ite1;var e=ite.elt;ite=ite.next;e.gp0=u;e.gp1=v;e.gnormx=_this.body.axisy*e.lnormx-_this.body.axisx*e.lnormy;e.gnormy=e.lnormx*_this.body.axisx+e.lnormy*_this.body.axisy;e.gprojection=_this.body.posx*e.gnormx+_this.body.posy*e.gnormy+e.lprojection;if(e.wrap_gnorm!=null){e.wrap_gnorm.zpp_inner.x=e.gnormx;e.wrap_gnorm.zpp_inner.y=e.gnormy}e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;u=v;cx_ite1=cx_ite1.next}var e1=ite.elt;e1.gp0=u;e1.gp1=_this.gverts.next;e1.gnormx=_this.body.axisy*e1.lnormx-_this.body.axisx*e1.lnormy;e1.gnormy=e1.lnormx*_this.body.axisx+e1.lnormy*_this.body.axisy;e1.gprojection=_this.body.posx*e1.gnormx+_this.body.posy*e1.gnormy+e1.lprojection;if(e1.wrap_gnorm!=null){e1.wrap_gnorm.zpp_inner.x=e1.gnormx;e1.wrap_gnorm.zpp_inner.y=e1.gnormy}e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy;e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"}},__class__:nape_shape_Edge};var nape_shape_EdgeIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.shape.EdgeIterator"]=nape_shape_EdgeIterator;nape_shape_EdgeIterator.__name__="nape.shape.EdgeIterator";nape_shape_EdgeIterator.get=function(list){var ret;if(nape_shape_EdgeIterator.zpp_pool==null){zpp_$nape_util_ZPP_$EdgeList.internal=true;var ret1=new nape_shape_EdgeIterator;zpp_$nape_util_ZPP_$EdgeList.internal=false;ret=ret1}else{var r=nape_shape_EdgeIterator.zpp_pool;nape_shape_EdgeIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_shape_EdgeIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_shape_EdgeIterator.zpp_pool;nape_shape_EdgeIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_shape_EdgeIterator};var nape_shape_EdgeList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$EdgeList;this.zpp_inner.outer=this};$hxClasses["nape.shape.EdgeList"]=nape_shape_EdgeList;nape_shape_EdgeList.__name__="nape.shape.EdgeList";nape_shape_EdgeList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}if(index==this.zpp_inner.user_length-1){index=index}else{this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-2-index}}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_shape_EdgeIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_shape_EdgeIterator.zpp_pool;nape_shape_EdgeIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_shape_EdgeList};var nape_shape_Polygon=function(localVerts,material,filter){this.zpp_inner_zn=null;nape_shape_Shape.call(this);this.zpp_inner_zn=new zpp_$nape_shape_ZPP_$Polygon;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i=this.zpp_inner;this.zpp_inner_i.outer_i=this;if(localVerts instanceof Array){var lv=localVerts;var _g=0;while(_g<lv.length){var x=lv[_g++];if(this.zpp_inner_zn.wrap_lverts==null){this.zpp_inner_zn.getlverts()}var tmp=this.zpp_inner_zn.wrap_lverts;var _this=x.zpp_inner;if(_this._validate!=null){_this._validate()}var x1=x.zpp_inner.x;var _this1=x.zpp_inner;if(_this1._validate!=null){_this1._validate()}var y=x.zpp_inner.y;if(y==null){y=0}if(x1==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp1;var _this2=ret.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(ret.zpp_inner.x==x1){var _this3=ret.zpp_inner;if(_this3._validate!=null){_this3._validate()}tmp1=ret.zpp_inner.y==y}else{tmp1=false}if(!tmp1){ret.zpp_inner.x=x1;ret.zpp_inner.y=y;var _this4=ret.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate(_this4)}}}ret.zpp_inner.weak=false;tmp.push(ret)}}else if(localVerts instanceof nape_geom_Vec2List){var _g1=localVerts.iterator();while(true){_g1.zpp_inner.zpp_inner.valmod();var length=_g1.zpp_inner.zpp_gl();_g1.zpp_critical=true;var tmp2;if(_g1.zpp_i<length){tmp2=true}else{_g1.zpp_next=nape_geom_Vec2Iterator.zpp_pool;nape_geom_Vec2Iterator.zpp_pool=_g1;_g1.zpp_inner=null;tmp2=false}if(!tmp2){break}_g1.zpp_critical=false;var x2=_g1.zpp_inner.at(_g1.zpp_i++);if(this.zpp_inner_zn.wrap_lverts==null){this.zpp_inner_zn.getlverts()}var tmp3=this.zpp_inner_zn.wrap_lverts;var _this5=x2.zpp_inner;if(_this5._validate!=null){_this5._validate()}var x3=x2.zpp_inner.x;var _this6=x2.zpp_inner;if(_this6._validate!=null){_this6._validate()}var y1=x2.zpp_inner.y;if(y1==null){y1=0}if(x3==null){x3=0}var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x3;ret3.y=y1;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var tmp4;var _this7=ret2.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(ret2.zpp_inner.x==x3){var _this8=ret2.zpp_inner;if(_this8._validate!=null){_this8._validate()}tmp4=ret2.zpp_inner.y==y1}else{tmp4=false}if(!tmp4){ret2.zpp_inner.x=x3;ret2.zpp_inner.y=y1;var _this9=ret2.zpp_inner;if(_this9._invalidate!=null){_this9._invalidate(_this9)}}}ret2.zpp_inner.weak=false;tmp3.push(ret2)}}else if(localVerts instanceof nape_geom_GeomPoly){var verts=localVerts.zpp_inner.vertices;if(verts!=null){var vite=verts;while(true){var x4=vite.x;var y2=vite.y;if(y2==null){y2=0}if(x4==null){x4=0}var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x4;ret5.y=y2;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var tmp5;var _this10=ret4.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(ret4.zpp_inner.x==x4){var _this11=ret4.zpp_inner;if(_this11._validate!=null){_this11._validate()}tmp5=ret4.zpp_inner.y==y2}else{tmp5=false}if(!tmp5){ret4.zpp_inner.x=x4;ret4.zpp_inner.y=y2;var _this12=ret4.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}}ret4.zpp_inner.weak=false;var x5=ret4;vite=vite.next;if(this.zpp_inner_zn.wrap_lverts==null){this.zpp_inner_zn.getlverts()}var tmp6=this.zpp_inner_zn.wrap_lverts;var _this13=x5.zpp_inner;if(_this13._validate!=null){_this13._validate()}var x6=x5.zpp_inner.x;var _this14=x5.zpp_inner;if(_this14._validate!=null){_this14._validate()}var y3=x5.zpp_inner.y;if(y3==null){y3=0}if(x6==null){x6=0}var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x6;ret7.y=y3;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var tmp7;var _this15=ret6.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(ret6.zpp_inner.x==x6){var _this16=ret6.zpp_inner;if(_this16._validate!=null){_this16._validate()}tmp7=ret6.zpp_inner.y==y3}else{tmp7=false}if(!tmp7){ret6.zpp_inner.x=x6;ret6.zpp_inner.y=y3;var _this17=ret6.zpp_inner;if(_this17._invalidate!=null){_this17._invalidate(_this17)}}}ret6.zpp_inner.weak=false;tmp6.push(ret6);var inner=x5.zpp_inner;x5.zpp_inner.outer=null;x5.zpp_inner=null;x5.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=x5;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner;if(vite==verts){break}}}}if(localVerts instanceof Array){var lv1=localVerts;var i=0;while(i<lv1.length){var cur=lv1[i];var tmp8;if(cur.zpp_inner.weak){var inner1=cur.zpp_inner;cur.zpp_inner.outer=null;cur.zpp_inner=null;cur.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=cur;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1;tmp8=true}else{tmp8=false}if(tmp8){lv1.splice(i,1);continue}++i}}else if(localVerts instanceof nape_geom_Vec2List){var lv2=localVerts;if(lv2.zpp_inner._validate!=null){lv2.zpp_inner._validate()}var ins=lv2.zpp_inner.inner;var pre=null;var cur1=ins.head;while(cur1!=null){var x7=cur1.elt;if(x7.outer.zpp_inner.weak){cur1=ins.erase(pre);if(x7.outer.zpp_inner.weak){var _this18=x7.outer;var inner2=_this18.zpp_inner;_this18.zpp_inner.outer=null;_this18.zpp_inner=null;_this18.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=_this18;if(inner2.outer!=null){inner2.outer.zpp_inner=null;inner2.outer=null}inner2._isimmutable=null;inner2._validate=null;inner2._invalidate=null;inner2.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner2}}else{pre=cur1;cur1=cur1.next}}}if(material==null){if(zpp_$nape_phys_ZPP_$Material.zpp_pool==null){this.zpp_inner.material=new zpp_$nape_phys_ZPP_$Material}else{this.zpp_inner.material=zpp_$nape_phys_ZPP_$Material.zpp_pool;zpp_$nape_phys_ZPP_$Material.zpp_pool=this.zpp_inner.material.next;this.zpp_inner.material.next=null}}else{this.zpp_inner.immutable_midstep("Shape::material");this.zpp_inner.setMaterial(material.zpp_inner);this.zpp_inner.material.wrapper()}if(filter==null){if(zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool==null){this.zpp_inner.filter=new zpp_$nape_dynamics_ZPP_$InteractionFilter}else{this.zpp_inner.filter=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=this.zpp_inner.filter.next;this.zpp_inner.filter.next=null}}else{this.zpp_inner.immutable_midstep("Shape::filter");this.zpp_inner.setFilter(filter.zpp_inner);this.zpp_inner.filter.wrapper()}this.zpp_inner_i.insert_cbtype(zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE.zpp_inner)};$hxClasses["nape.shape.Polygon"]=nape_shape_Polygon;nape_shape_Polygon.__name__="nape.shape.Polygon";nape_shape_Polygon.rect=function(x,y,width,height,weak){if(weak==null){weak=false}var x1=x;var y1=y;var weak1=weak;if(weak==null){weak1=false}if(y==null){y1=0}if(x==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x1){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y1}else{tmp=false}if(!tmp){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=weak1;var x2=x+width;var y2=y;var weak2=weak;if(weak==null){weak2=false}if(y==null){y2=0}if(x2==null){x2=0}var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x2;ret3.y=y2;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var tmp1;var _this3=ret2.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(ret2.zpp_inner.x==x2){var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp1=ret2.zpp_inner.y==y2}else{tmp1=false}if(!tmp1){ret2.zpp_inner.x=x2;ret2.zpp_inner.y=y2;var _this5=ret2.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}}ret2.zpp_inner.weak=weak2;var x3=x+width;var y3=y+height;var weak3=weak;if(weak==null){weak3=false}if(y3==null){y3=0}if(x3==null){x3=0}var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x3;ret5.y=y3;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var tmp2;var _this6=ret4.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(ret4.zpp_inner.x==x3){var _this7=ret4.zpp_inner;if(_this7._validate!=null){_this7._validate()}tmp2=ret4.zpp_inner.y==y3}else{tmp2=false}if(!tmp2){ret4.zpp_inner.x=x3;ret4.zpp_inner.y=y3;var _this8=ret4.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}}ret4.zpp_inner.weak=weak3;var x4=x;var y4=y+height;var weak4=weak;if(weak==null){weak4=false}if(y4==null){y4=0}if(x==null){x4=0}var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x4;ret7.y=y4;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var tmp3;var _this9=ret6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(ret6.zpp_inner.x==x4){var _this10=ret6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp3=ret6.zpp_inner.y==y4}else{tmp3=false}if(!tmp3){ret6.zpp_inner.x=x4;ret6.zpp_inner.y=y4;var _this11=ret6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}}ret6.zpp_inner.weak=weak4;return[ret,ret2,ret4,ret6]};nape_shape_Polygon.__super__=nape_shape_Shape;nape_shape_Polygon.prototype=$extend(nape_shape_Shape.prototype,{zpp_inner_zn:null,__class__:nape_shape_Polygon});var nape_shape_ShapeIterator=function(){this.zpp_next=null;this.zpp_critical=false;this.zpp_i=0;this.zpp_inner=null};$hxClasses["nape.shape.ShapeIterator"]=nape_shape_ShapeIterator;nape_shape_ShapeIterator.__name__="nape.shape.ShapeIterator";nape_shape_ShapeIterator.get=function(list){var ret;if(nape_shape_ShapeIterator.zpp_pool==null){zpp_$nape_util_ZPP_$ShapeList.internal=true;var ret1=new nape_shape_ShapeIterator;zpp_$nape_util_ZPP_$ShapeList.internal=false;ret=ret1}else{var r=nape_shape_ShapeIterator.zpp_pool;nape_shape_ShapeIterator.zpp_pool=r.zpp_next;ret=r}ret.zpp_i=0;ret.zpp_inner=list;ret.zpp_critical=false;return ret};nape_shape_ShapeIterator.prototype={zpp_inner:null,zpp_i:null,zpp_critical:null,zpp_next:null,hasNext:function(){this.zpp_inner.zpp_inner.valmod();var _this=this.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}this.zpp_critical=true;if(this.zpp_i<_this.zpp_inner.user_length){return true}else{this.zpp_next=nape_shape_ShapeIterator.zpp_pool;nape_shape_ShapeIterator.zpp_pool=this;this.zpp_inner=null;return false}},next:function(){this.zpp_critical=false;return this.zpp_inner.at(this.zpp_i++)},__class__:nape_shape_ShapeIterator};var nape_shape_ShapeList=function(){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_util_ZPP_$ShapeList;this.zpp_inner.outer=this};$hxClasses["nape.shape.ShapeList"]=nape_shape_ShapeList;nape_shape_ShapeList.__name__="nape.shape.ShapeList";nape_shape_ShapeList.prototype={zpp_inner:null,at:function(index){this.zpp_inner.valmod();if(this.zpp_inner.reverse_flag){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}index=this.zpp_inner.user_length-1-index}if(index<this.zpp_inner.at_index||this.zpp_inner.at_ite==null){this.zpp_inner.at_index=index;this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(index)}else{while(this.zpp_inner.at_index!=index){this.zpp_inner.at_index++;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.elt.outer},push:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.zpp_inner.inner.add(obj.zpp_inner)}else{if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},unshift:function(obj){this.zpp_inner.valmod();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){if(this.zpp_inner.push_ite==null){var tmp;if(this.zpp_inner.inner.head==null){tmp=null}else{var tmp1=this.zpp_inner.inner;this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=false;this.zpp_inner.user_length=this.zpp_inner.inner.length}tmp=tmp1.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=tmp}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,obj.zpp_inner)}else{this.zpp_inner.inner.add(obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},remove:function(obj){this.zpp_inner.valmod();var ret;ret=false;var cx_ite=this.zpp_inner.inner.head;while(cx_ite!=null){if(cx_ite.elt==obj.zpp_inner){ret=true;break}cx_ite=cx_ite.next}if(ret){if(this.zpp_inner.subber!=null){this.zpp_inner.subber(obj)}if(!this.zpp_inner.dontremove){this.zpp_inner.inner.remove(obj.zpp_inner)}this.zpp_inner.invalidate()}return ret},toString:function(){var ret="[";var fst=true;this.zpp_inner.valmod();var _g=nape_shape_ShapeIterator.get(this);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_shape_ShapeIterator.zpp_pool;nape_shape_ShapeIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var i=_g.zpp_inner.at(_g.zpp_i++);if(!fst){ret+=","}ret+=i==null?"NULL":i.toString();fst=false}return ret+"]"},__class__:nape_shape_ShapeList};var nape_shape_ShapeType=function(){};$hxClasses["nape.shape.ShapeType"]=nape_shape_ShapeType;nape_shape_ShapeType.__name__="nape.shape.ShapeType";nape_shape_ShapeType.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE=new nape_shape_ShapeType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ShapeType_CIRCLE){return"CIRCLE"}else{if(zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON=new nape_shape_ShapeType;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ShapeType_POLYGON){return"POLYGON"}else{return""}}},__class__:nape_shape_ShapeType};var nape_shape_ValidationResult=function(){};$hxClasses["nape.shape.ValidationResult"]=nape_shape_ValidationResult;nape_shape_ValidationResult.__name__="nape.shape.ValidationResult";nape_shape_ValidationResult.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID=new nape_shape_ValidationResult;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ValidationResult_VALID){return"VALID"}else{if(zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE=new nape_shape_ValidationResult;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ValidationResult_DEGENERATE){return"DEGENERATE"}else{if(zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE=new nape_shape_ValidationResult;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ValidationResult_CONCAVE){return"CONCAVE"}else{if(zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING=new nape_shape_ValidationResult;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.ValidationResult_SELF_INTERSECTING){return"SELF_INTERSECTING"}else{return""}}}}},__class__:nape_shape_ValidationResult};var nape_space_Broadphase=function(){};$hxClasses["nape.space.Broadphase"]=nape_space_Broadphase;nape_space_Broadphase.__name__="nape.space.Broadphase";nape_space_Broadphase.prototype={toString:function(){if(zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE){return"DYNAMIC_AABB_TREE"}else{if(zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase;zpp_$nape_util_ZPP_$Flags.internal=false}if(this==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE){return"SWEEP_AND_PRUNE"}else{return""}}},__class__:nape_space_Broadphase};var nape_space_Space=function(gravity,broadphase){this.zpp_inner=null;this.zpp_inner=new zpp_$nape_space_ZPP_$Space(gravity==null?null:gravity.zpp_inner,broadphase);this.zpp_inner.outer=this;if(gravity!=null){if(gravity.zpp_inner.weak){var inner=gravity.zpp_inner;gravity.zpp_inner.outer=null;gravity.zpp_inner=null;gravity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=gravity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}}};$hxClasses["nape.space.Space"]=nape_space_Space;nape_space_Space.__name__="nape.space.Space";nape_space_Space.prototype={zpp_inner:null,clear:function(){this.zpp_inner.clear()},step:function(deltaTime,velocityIterations,positionIterations){if(positionIterations==null){positionIterations=10}if(velocityIterations==null){velocityIterations=10}this.zpp_inner.step(deltaTime,velocityIterations,positionIterations)},bodiesUnderPoint:function(point,filter,output){var ret=this.zpp_inner;var _this=point.zpp_inner;if(_this._validate!=null){_this._validate()}var ret1=point.zpp_inner.x;var _this1=point.zpp_inner;if(_this1._validate!=null){_this1._validate()}var ret2=ret.bodiesUnderPoint(ret1,point.zpp_inner.y,filter==null?null:filter.zpp_inner,output);if(point.zpp_inner.weak){var inner=point.zpp_inner;point.zpp_inner.outer=null;point.zpp_inner=null;point.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=point;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}return ret2},__class__:nape_space_Space};var openfl_Lib=function(){};$hxClasses["openfl.Lib"]=openfl_Lib;openfl_Lib.__name__="openfl.Lib";openfl_Lib.__properties__={get_current:"get_current"};openfl_Lib.getTimer=function(){return lime_system_System.getTimer()};openfl_Lib.getURL=function(request,target){openfl_Lib.navigateToURL(request,target)};openfl_Lib.navigateToURL=function(request,$window){if($window==null){$window="_blank"}var uri=request.url;if(Type.typeof(request.data)==ValueType.TObject){var query="";var fields=Reflect.fields(request.data);var _g=0;while(_g<fields.length){var field=fields[_g];++_g;if(query.length>0){query+="&"}var query1=encodeURIComponent(field)+"=";var s=Std.string(Reflect.field(request.data,field));query+=query1+encodeURIComponent(s)}if(uri.indexOf("?")>-1){uri+="&"+query}else{uri+="?"+query}}lime_system_System.openURL(uri,$window)};openfl_Lib.get_current=function(){if(openfl__$internal_Lib.current==null){openfl__$internal_Lib.current=new openfl_display_MovieClip}return openfl__$internal_Lib.current};var openfl__$Vector_IVector=function(){};$hxClasses["openfl._Vector.IVector"]=openfl__$Vector_IVector;openfl__$Vector_IVector.__name__="openfl._Vector.IVector";openfl__$Vector_IVector.__isInterface__=true;openfl__$Vector_IVector.prototype={__class__:openfl__$Vector_IVector};var openfl__$Vector_BoolVector=function(length,fixed,array){if(fixed==null){fixed=false}if(length==null){length=0}if(array==null){array=[]}this.__array=array;if(length>0){this.set_length(length)}this.fixed=fixed};$hxClasses["openfl._Vector.BoolVector"]=openfl__$Vector_BoolVector;openfl__$Vector_BoolVector.__name__="openfl._Vector.BoolVector";openfl__$Vector_BoolVector.__interfaces__=[openfl__$Vector_IVector];openfl__$Vector_BoolVector.prototype={fixed:null,__array:null,toJSON:function(){return this.__array},set_length:function(value){if(!this.fixed){var currentLength=this.__array.length;if(value<0){value=0}if(value>currentLength){var _g=currentLength;var _g1=value;while(_g<_g1)this.__array[_g++]=false}else{while(this.__array.length>value)this.__array.pop()}}return this.__array.length},__class__:openfl__$Vector_BoolVector,__properties__:{set_length:"set_length"}};var openfl__$Vector_FloatVector=function(length,fixed,array,forceCopy){if(forceCopy==null){forceCopy=false}if(fixed==null){fixed=false}if(length==null){length=0}if(forceCopy){this.__array=[];if(array!=null){var _g=0;var _g1=array.length;while(_g<_g1){var i=_g++;this.__array[i]=array[i]}}}else{if(array==null){array=[]}this.__array=array}if(length>0){this.set_length(length)}this.fixed=fixed};$hxClasses["openfl._Vector.FloatVector"]=openfl__$Vector_FloatVector;openfl__$Vector_FloatVector.__name__="openfl._Vector.FloatVector";openfl__$Vector_FloatVector.__interfaces__=[openfl__$Vector_IVector];openfl__$Vector_FloatVector.prototype={fixed:null,__array:null,concat:function(a){if(a==null){return new openfl__$Vector_FloatVector(0,false,this.__array.slice())}else{var other=a;if(other.__array.length>0){return new openfl__$Vector_FloatVector(0,false,this.__array.concat(other.__array))}else{return new openfl__$Vector_FloatVector(0,false,this.__array.slice())}}},copy:function(){return new openfl__$Vector_FloatVector(0,this.fixed,this.__array.slice())},get:function(index){return this.__array[index]},push:function(x){if(!this.fixed){return this.__array.push(x)}else{return this.__array.length}},set:function(index,value){if(!this.fixed||index<this.__array.length){return this.__array[index]=value}else{return value}},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(value){if(value!=this.__array.length&&!this.fixed){var currentLength=this.__array.length;if(value<0){value=0}if(value>currentLength){var _g=currentLength;var _g1=value;while(_g<_g1)this.__array[_g++]=0}else{while(this.__array.length>value)this.__array.pop()}}return this.__array.length},__class__:openfl__$Vector_FloatVector,__properties__:{set_length:"set_length",get_length:"get_length"}};var openfl__$Vector_FunctionVector=function(length,fixed,array){if(fixed==null){fixed=false}if(length==null){length=0}if(array==null){array=[]}this.__array=array;if(length>0){this.set_length(length)}this.fixed=fixed};$hxClasses["openfl._Vector.FunctionVector"]=openfl__$Vector_FunctionVector;openfl__$Vector_FunctionVector.__name__="openfl._Vector.FunctionVector";openfl__$Vector_FunctionVector.__interfaces__=[openfl__$Vector_IVector];openfl__$Vector_FunctionVector.prototype={fixed:null,__array:null,toJSON:function(){return this.__array},set_length:function(value){if(!this.fixed){var currentLength=this.__array.length;if(value<0){value=0}if(value>currentLength){var _g=currentLength;var _g1=value;while(_g<_g1)this.__array[_g++]=null}else{while(this.__array.length>value)this.__array.pop()}}return this.__array.length},__class__:openfl__$Vector_FunctionVector,__properties__:{set_length:"set_length"}};var openfl__$Vector_IntVector=function(length,fixed,array){if(fixed==null){fixed=false}if(length==null){length=0}if(array==null){array=[]}this.__array=array;if(length>0){this.set_length(length)}this.fixed=fixed};$hxClasses["openfl._Vector.IntVector"]=openfl__$Vector_IntVector;openfl__$Vector_IntVector.__name__="openfl._Vector.IntVector";openfl__$Vector_IntVector.__interfaces__=[openfl__$Vector_IVector];openfl__$Vector_IntVector.prototype={fixed:null,__array:null,get:function(index){return this.__array[index]},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(value){if(!this.fixed){var currentLength=this.__array.length;if(value<0){value=0}if(value>currentLength){var _g=currentLength;var _g1=value;while(_g<_g1)this.__array[_g++]=0}else{while(this.__array.length>value)this.__array.pop()}}return this.__array.length},__class__:openfl__$Vector_IntVector,__properties__:{set_length:"set_length",get_length:"get_length"}};var openfl__$Vector_ObjectVector=function(length,fixed,array,forceCopy){if(forceCopy==null){forceCopy=false}if(fixed==null){fixed=false}if(length==null){length=0}if(forceCopy){this.__array=[];if(array!=null){var _g=0;var _g1=array.length;while(_g<_g1){var i=_g++;this.__array[i]=array[i]}}}else{if(array==null){array=[]}this.__array=array}if(length>0){this.set_length(length)}this.fixed=fixed};$hxClasses["openfl._Vector.ObjectVector"]=openfl__$Vector_ObjectVector;openfl__$Vector_ObjectVector.__name__="openfl._Vector.ObjectVector";openfl__$Vector_ObjectVector.__interfaces__=[openfl__$Vector_IVector];openfl__$Vector_ObjectVector.prototype={fixed:null,__array:null,get:function(index){return this.__array[index]},indexOf:function(x,from){if(from==null){from=0}var _g=from;var _g1=this.__array.length;while(_g<_g1){var i=_g++;if(this.__array[i]==x){return i}}return-1},iterator:function(){return HxOverrides.iter(this.__array)},push:function(x){if(!this.fixed){return this.__array.push(x)}else{return this.__array.length}},set:function(index,value){if(!this.fixed||index<this.__array.length){return this.__array[index]=value}else{return value}},splice:function(pos,len){return new openfl__$Vector_ObjectVector(0,false,this.__array.splice(pos,len))},toJSON:function(){return this.__array},get_length:function(){return this.__array.length},set_length:function(value){if(!this.fixed){var currentLength=this.__array.length;if(value<0){value=0}if(value>currentLength){var _g=currentLength;var _g1=value;while(_g<_g1){++_g;this.__array.push(null)}}else{while(this.__array.length>value)this.__array.pop()}}return this.__array.length},__class__:openfl__$Vector_ObjectVector,__properties__:{set_length:"set_length",get_length:"get_length"}};var openfl__$internal_Lib=function(){};$hxClasses["openfl._internal.Lib"]=openfl__$internal_Lib;openfl__$internal_Lib.__name__="openfl._internal.Lib";var openfl__$internal_formats_agal_AGALConverter=function(){};$hxClasses["openfl._internal.formats.agal.AGALConverter"]=openfl__$internal_formats_agal_AGALConverter;openfl__$internal_formats_agal_AGALConverter.__name__="openfl._internal.formats.agal.AGALConverter";openfl__$internal_formats_agal_AGALConverter.prefixFromType=function(regType,programType){switch(regType){case 0:return"va";case 1:if(programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX){return"vc"}else{return"fc"}break;case 2:if(programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX){return"vt"}else{return"ft"}break;case 3:return"output_";case 4:return"v";case 5:return"sampler";default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Invalid data!"))}};openfl__$internal_formats_agal_AGALConverter.readUInt64=function(byteArray){var low=byteArray.readInt();return new haxe__$Int64__$_$_$Int64(byteArray.readInt(),low)};openfl__$internal_formats_agal_AGALConverter.convertToGLSL=function(agal,samplerState){agal.position=0;agal.__endian=1;var magic=agal.readByte()&255;if(magic==176){return agal.readUTF()}if(magic!=160){throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Magic value must be 0xA0, may not be AGAL"))}if(agal.readInt()!=1){throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Version must be 1"))}if((agal.readByte()&255)!=161){throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Shader type ID must be 0xA1"))}var programType=(agal.readByte()&255)==0?openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX:openfl__$internal_formats_agal__$AGALConverter_ProgramType.FRAGMENT;var map=new openfl__$internal_formats_agal_RegisterMap;var sb_b="";while(_$UInt_UInt_$Impl_$.gt(openfl_utils__$ByteArray_ByteArray_$Impl_$.get_length(agal),agal.position)){var opcode=agal.readInt();var dest=agal.readUnsignedInt();var source1=openfl__$internal_formats_agal_AGALConverter.readUInt64(agal);var source2=openfl__$internal_formats_agal_AGALConverter.readUInt64(agal);var dr=openfl__$internal_formats_agal__$AGALConverter_DestRegister.parse(dest,programType);var sr1=openfl__$internal_formats_agal__$AGALConverter_SourceRegister.parse(source1,programType,dr.mask);var sr2=openfl__$internal_formats_agal__$AGALConverter_SourceRegister.parse(source2,programType,dr.mask);sb_b+="\t";switch(opcode){case 0:sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+"; // mov");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 1:sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" + "+sr2.toGLSL()+"; // add");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 2:sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" - "+sr2.toGLSL()+"; // sub");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 3:sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" * "+sr2.toGLSL()+"; // mul");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 4:sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" / "+sr2.toGLSL()+"; // div");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 5:if(sr1.toGLSL().indexOf(".")>-1){sb_b+=Std.string(dr.toGLSL()+" = 1.0 / "+sr1.toGLSL()+"; // rcp")}else{sb_b+=Std.string(dr.toGLSL()+" = vec4(1) / "+sr1.toGLSL()+"; // rcp")}map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 6:sb_b+=Std.string(dr.toGLSL()+" = min("+sr1.toGLSL()+", "+sr2.toGLSL()+"); // min");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 7:sb_b+=Std.string(dr.toGLSL()+" = max("+sr1.toGLSL()+", "+sr2.toGLSL()+"); // max");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 8:sb_b+=Std.string(dr.toGLSL()+" = fract("+sr1.toGLSL()+"); // frc");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 9:sb_b+=Std.string(dr.toGLSL()+" = sqrt("+sr1.toGLSL()+"); // sqrt");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 10:sb_b+=Std.string(dr.toGLSL()+" = inversesqrt("+sr1.toGLSL()+"); // rsq");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 11:sb_b+=Std.string(dr.toGLSL()+" = pow("+sr1.toGLSL()+", "+sr2.toGLSL()+"); // pow");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 12:sb_b+=Std.string(dr.toGLSL()+" = log2("+sr1.toGLSL()+"); // log");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 13:sb_b+=Std.string(dr.toGLSL()+" = exp2("+sr1.toGLSL()+"); // exp");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 14:sb_b+=Std.string(dr.toGLSL()+" = normalize("+sr1.toGLSL()+"); // normalize");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 15:sb_b+=Std.string(dr.toGLSL()+" = sin("+sr1.toGLSL()+"); // sin");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 16:sb_b+=Std.string(dr.toGLSL()+" = cos("+sr1.toGLSL()+"); // cos");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 17:sr1.sourceMask=sr2.sourceMask=7;sb_b+=Std.string(dr.toGLSL()+" = cross(vec3("+sr1.toGLSL()+"), vec3("+sr2.toGLSL()+")); // crs");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 18:sr1.sourceMask=sr2.sourceMask=7;sb_b+=Std.string(dr.toGLSL()+" = vec4(dot(vec3("+sr1.toGLSL()+"), vec3("+sr2.toGLSL()+")))"+dr.getWriteMask()+"; // dp3");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 19:sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4(dot(vec4("+sr1.toGLSL()+"), vec4("+sr2.toGLSL()+")))"+dr.getWriteMask()+"; // dp4");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 20:sb_b+=Std.string(dr.toGLSL()+" = abs("+sr1.toGLSL()+"); // abs");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 21:sb_b+=Std.string(dr.toGLSL()+" = -"+sr1.toGLSL()+"; // neg");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 22:sb_b+=Std.string(dr.toGLSL()+" = clamp("+sr1.toGLSL()+", 0.0, 1.0); // saturate");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 23:var existingUsage=map.getRegisterUsage(sr2);if(existingUsage!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4&&existingUsage!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY){sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" * mat3("+sr2.toGLSL(false)+"); // m33");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.MATRIX_4_4)}else{sr1.sourceMask=sr2.sourceMask=7;sb_b+=Std.string(dr.toGLSL()+" = vec3("+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,0)+"), "+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,1)+"),"+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,2)+")); // m33");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,0);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,1);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,2)}break;case 24:var existingUsage1=map.getRegisterUsage(sr2);if(existingUsage1!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4&&existingUsage1!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY){sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" * "+sr2.toGLSL(false)+"; // m44");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.MATRIX_4_4)}else{sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4("+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,0)+"), "+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,1)+"), "+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,2)+"), "+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,3)+")); // m44");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,0);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,1);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,2);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,3)}break;case 25:dr.mask&=7;var existingUsage2=map.getRegisterUsage(sr2);if(existingUsage2!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4&&existingUsage2!=openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY){sb_b+=Std.string(dr.toGLSL()+" = "+sr1.toGLSL()+" * "+sr2.toGLSL(false)+"; // m34");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.MATRIX_4_4)}else{sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec3("+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,0)+"), "+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,1)+"),"+"dot("+sr1.toGLSL(true)+","+sr2.toGLSL(true,2)+")); // m34");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,0);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,1);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4,2)}break;case 39:sr1.sourceMask=15;sb_b+=Std.string("if (any(lessThan("+sr1.toGLSL()+", vec4(0)))) discard;");map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 40:var sampler=openfl__$internal_formats_agal__$AGALConverter_SamplerRegister.parse(source2,programType);switch(sampler.d){case 0:if(sampler.t==2){sr1.sourceMask=3;map.addSaR(sampler,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_2D_ALPHA);sb_b+=Std.string("if ("+sampler.toGLSL()+"_alphaEnabled) {\n");sb_b+=Std.string("\t\t"+dr.toGLSL()+" = vec4(texture2D("+sampler.toGLSL()+", "+sr1.toGLSL()+").xyz, texture2D("+sampler.toGLSL()+"_alpha, "+sr1.toGLSL()+").x); // tex + alpha\n");sb_b+="\t} else {\n";sb_b+=Std.string("\t\t"+dr.toGLSL()+" = texture2D("+sampler.toGLSL()+", "+sr1.toGLSL()+"); // tex\n");sb_b+="\t}"}else{sr1.sourceMask=3;map.addSaR(sampler,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_2D);sb_b+=Std.string(dr.toGLSL()+" = texture2D("+sampler.toGLSL()+", "+sr1.toGLSL()+"); // tex")}break;case 1:if(sampler.t==2){sr1.sourceMask=7;map.addSaR(sampler,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_CUBE_ALPHA);sb_b+=Std.string("if ("+sampler.toGLSL()+"_alphaEnabled) {\n");sb_b+=Std.string("\t\t"+dr.toGLSL()+" = vec4(textureCube("+sampler.toGLSL()+", "+sr1.toGLSL()+").xyz, textureCube("+sampler.toGLSL()+"_alpha, "+sr1.toGLSL()+").x); // tex + alpha\n");sb_b+="\t} else {\n";sb_b+=Std.string("\t\t"+dr.toGLSL()+" = textureCube("+sampler.toGLSL()+", "+sr1.toGLSL()+"); // tex");sb_b+="\t}"}else{sr1.sourceMask=7;sb_b+=Std.string(dr.toGLSL()+" = textureCube("+sampler.toGLSL()+", "+sr1.toGLSL()+"); // tex");map.addSaR(sampler,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_CUBE)}break}map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);if(samplerState!=null){samplerState[sampler.n]=sampler.toSamplerState()}break;case 41:sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4(greaterThanEqual("+sr1.toGLSL()+", "+sr2.toGLSL()+"))"+dr.getWriteMask()+"; // ste");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 42:sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4(lessThan("+sr1.toGLSL()+", "+sr2.toGLSL()+"))"+dr.getWriteMask()+"; // slt");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 44:sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4(equal("+sr1.toGLSL()+", "+sr2.toGLSL()+"))"+dr.getWriteMask()+"; // seq");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;case 45:sr1.sourceMask=sr2.sourceMask=15;sb_b+=Std.string(dr.toGLSL()+" = vec4(notEqual("+sr1.toGLSL()+", "+sr2.toGLSL()+"))"+dr.getWriteMask()+"; // sne");map.addDR(dr,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr1,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);map.addSR(sr2,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Opcode "+opcode))}sb_b+="\n"}if(openfl__$internal_formats_agal_AGALConverter.limitedProfile==null){var version=lime_graphics_opengl_GL.context.getParameter(7938);openfl__$internal_formats_agal_AGALConverter.limitedProfile=version.indexOf("OpenGL ES")>-1||version.indexOf("WebGL")>-1}var glsl_b="";glsl_b=""+Std.string("// AGAL "+(programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX?"vertex":"fragment")+" shader\n");if(openfl__$internal_formats_agal_AGALConverter.limitedProfile){glsl_b+="#version 100\n";glsl_b+="precision highp float;\n"}else{glsl_b+="#version 120\n"}glsl_b+=Std.string(map.toGLSL(false));if(programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX){glsl_b+="uniform vec4 vcPositionScale;\n"}glsl_b+="void main() {\n";glsl_b+=Std.string(map.toGLSL(true));glsl_b+=Std.string(sb_b);if(programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX){glsl_b+="\tgl_Position *= vcPositionScale;\n"}glsl_b+="}\n";return glsl_b};var openfl__$internal_formats_agal__$AGALConverter_DestRegister=function(){};$hxClasses["openfl._internal.formats.agal._AGALConverter.DestRegister"]=openfl__$internal_formats_agal__$AGALConverter_DestRegister;openfl__$internal_formats_agal__$AGALConverter_DestRegister.__name__="openfl._internal.formats.agal._AGALConverter.DestRegister";openfl__$internal_formats_agal__$AGALConverter_DestRegister.parse=function(v,programType){var dr=new openfl__$internal_formats_agal__$AGALConverter_DestRegister;dr.programType=programType;dr.type=v>>>24&15;dr.mask=v>>>16&15;dr.n=v&65535;return dr};openfl__$internal_formats_agal__$AGALConverter_DestRegister.prototype={mask:null,n:null,programType:null,type:null,getWriteMask:function(){var str=".";if((this.mask&1)!=0){str="."+"x"}if((this.mask&2)!=0){str+="y"}if((this.mask&4)!=0){str+="z"}if((this.mask&8)!=0){str+="w"}return str},toGLSL:function(useMask){if(useMask==null){useMask=true}var str;if(this.type==3){str=this.programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX?"gl_Position":"gl_FragColor"}else{str=openfl__$internal_formats_agal_AGALConverter.prefixFromType(this.type,this.programType)+this.n}if(useMask&&this.mask!=15){str+=this.getWriteMask()}return str},__class__:openfl__$internal_formats_agal__$AGALConverter_DestRegister};var openfl__$internal_formats_agal__$AGALConverter_ProgramType=$hxEnums["openfl._internal.formats.agal._AGALConverter.ProgramType"]={__ename__:"openfl._internal.formats.agal._AGALConverter.ProgramType",__constructs__:["VERTEX","FRAGMENT"],VERTEX:{_hx_index:0,__enum__:"openfl._internal.formats.agal._AGALConverter.ProgramType",toString:$estr},FRAGMENT:{_hx_index:1,__enum__:"openfl._internal.formats.agal._AGALConverter.ProgramType",toString:$estr}};var openfl__$internal_formats_agal_RegisterMap=function(){this.mEntries=[]};$hxClasses["openfl._internal.formats.agal.RegisterMap"]=openfl__$internal_formats_agal_RegisterMap;openfl__$internal_formats_agal_RegisterMap.__name__="openfl._internal.formats.agal.RegisterMap";openfl__$internal_formats_agal_RegisterMap.prototype={mEntries:null,add:function(type,name,number,usage){var _g=0;var _g1=this.mEntries;while(_g<_g1.length){var entry=_g1[_g];++_g;if(entry.type==type&&entry.name==name&&entry.number==number){if(entry.usage!=usage){throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("Cannot use register in multiple ways yet (mat4/vec4)"))}return}}var entry1=new openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry;entry1.type=type;entry1.name=name;entry1.number=number;entry1.usage=usage;this.mEntries.push(entry1)},addDR:function(dr,usage){this.add(dr.type,dr.toGLSL(false),dr.n,usage)},addSaR:function(sr,usage){this.add(sr.type,sr.toGLSL(),sr.n,usage)},addSR:function(sr,usage,offset){if(offset==null){offset=0}if(sr.d!=0){this.add(sr.itype,openfl__$internal_formats_agal_AGALConverter.prefixFromType(sr.itype,sr.programType)+sr.n,sr.n,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4);this.add(sr.type,openfl__$internal_formats_agal_AGALConverter.prefixFromType(sr.type,sr.programType)+sr.o,sr.o,openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY);return}this.add(sr.type,sr.toGLSL(false,offset),sr.n+offset,usage)},getRegisterUsage:function(sr){if(sr.d!=0){return openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY}return this.getUsage(sr.type,sr.toGLSL(false),sr.n)},getUsage:function(type,name,number){var _g=0;var _g1=this.mEntries;while(_g<_g1.length){var entry=_g1[_g];++_g;if(entry.type==type&&entry.name==name&&entry.number==number){return entry.usage}}return openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.UNUSED},toGLSL:function(tempRegistersOnly){this.mEntries.sort(function(a,b){return a.number-b.number});var entry;this.mEntries.sort(function(a1,b1){return js_Boot.__cast(a1.type,Int)-js_Boot.__cast(b1.type,Int)});var sb_b="";var _g=0;var _g1=this.mEntries.length;while(_g<_g1){entry=this.mEntries[_g++];if(tempRegistersOnly&&entry.type!=2||!tempRegistersOnly&&entry.type==2){continue}if(entry.type==3){continue}switch(entry.type){case 0:sb_b+="attribute ";break;case 1:sb_b+="uniform ";break;case 2:sb_b+="\t";break;case 3:break;case 4:sb_b+="varying ";break;case 5:sb_b+="uniform ";break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}switch(entry.usage._hx_index){case 0:lime_utils_Log.info("Missing switch patten: RegisterUsage.UNUSED",{fileName:"openfl/_internal/formats/agal/AGALConverter.hx",lineNumber:746,className:"openfl._internal.formats.agal.RegisterMap",methodName:"toGLSL"});break;case 1:sb_b+="vec4 ";break;case 2:sb_b+="mat4 ";break;case 3:sb_b+="sampler2D ";break;case 4:break;case 5:sb_b+="samplerCube ";break;case 6:break;case 7:sb_b+="vec4 ";break}if(entry.usage==openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_2D_ALPHA){sb_b+="sampler2D ";sb_b+=Std.string(entry.name);sb_b+=";\n";sb_b+="uniform ";sb_b+="sampler2D ";sb_b+=Std.string(entry.name+"_alpha");sb_b+=";\n";sb_b+="uniform ";sb_b+="bool ";sb_b+=Std.string(entry.name+"_alphaEnabled");sb_b+=";\n"}else if(entry.usage==openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.SAMPLER_CUBE_ALPHA){sb_b+="samplerCube ";sb_b+=Std.string(entry.name);sb_b+=";\n";sb_b+="uniform ";sb_b+="samplerCube ";sb_b+=Std.string(entry.name+"_alpha");sb_b+=";\n";sb_b+="uniform ";sb_b+="bool ";sb_b+=Std.string(entry.name+"_alphaEnabled");sb_b+=";\n"}else if(entry.usage==openfl__$internal_formats_agal__$AGALConverter_RegisterUsage.VECTOR_4_ARRAY){sb_b+=Std.string(entry.name+"[32]");sb_b+=";\n"}else{sb_b+=Std.string(entry.name);sb_b+=";\n"}}return sb_b},__class__:openfl__$internal_formats_agal_RegisterMap};var openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry=function(){};$hxClasses["openfl._internal.formats.agal._AGALConverter.RegisterMapEntry"]=openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry;openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry.__name__="openfl._internal.formats.agal._AGALConverter.RegisterMapEntry";openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry.prototype={name:null,number:null,type:null,usage:null,__class__:openfl__$internal_formats_agal__$AGALConverter_RegisterMapEntry};var openfl__$internal_formats_agal__$AGALConverter_RegisterUsage=$hxEnums["openfl._internal.formats.agal._AGALConverter.RegisterUsage"]={__ename__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",__constructs__:["UNUSED","VECTOR_4","MATRIX_4_4","SAMPLER_2D","SAMPLER_2D_ALPHA","SAMPLER_CUBE","SAMPLER_CUBE_ALPHA","VECTOR_4_ARRAY"],UNUSED:{_hx_index:0,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},VECTOR_4:{_hx_index:1,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},MATRIX_4_4:{_hx_index:2,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},SAMPLER_2D:{_hx_index:3,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},SAMPLER_2D_ALPHA:{_hx_index:4,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},SAMPLER_CUBE:{_hx_index:5,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},SAMPLER_CUBE_ALPHA:{_hx_index:6,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr},VECTOR_4_ARRAY:{_hx_index:7,__enum__:"openfl._internal.formats.agal._AGALConverter.RegisterUsage",toString:$estr}};var openfl__$internal_formats_agal__$AGALConverter_SamplerRegister=function(){};$hxClasses["openfl._internal.formats.agal._AGALConverter.SamplerRegister"]=openfl__$internal_formats_agal__$AGALConverter_SamplerRegister;openfl__$internal_formats_agal__$AGALConverter_SamplerRegister.__name__="openfl._internal.formats.agal._AGALConverter.SamplerRegister";openfl__$internal_formats_agal__$AGALConverter_SamplerRegister.parse=function(v,programType){var sr=new openfl__$internal_formats_agal__$AGALConverter_SamplerRegister;sr.programType=programType;sr.f=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>28).low&15;sr.m=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>24).low&15;sr.w=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>20).low&15;sr.s=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>16).low&15;sr.d=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>12).low&15;sr.t=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>8).low&15;sr.type=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high).low&15;sr.b=new haxe__$Int64__$_$_$Int64(v.high>>16,v.high<<16|v.low>>>16).low&255;sr.n=v.low&65535;return sr};openfl__$internal_formats_agal__$AGALConverter_SamplerRegister.prototype={b:null,d:null,f:null,m:null,n:null,programType:null,s:null,t:null,type:null,w:null,toGLSL:function(){return openfl__$internal_formats_agal_AGALConverter.prefixFromType(this.type,this.programType)+this.n},toSamplerState:function(){var wrap;var filter;var mipfilter;switch(this.f){case 0:filter=5;break;case 1:filter=4;break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}switch(this.m){case 0:mipfilter=2;break;case 1:mipfilter=1;break;case 2:mipfilter=0;break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}switch(this.w){case 0:wrap=0;break;case 1:wrap=2;break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}return new openfl__$internal_renderer_SamplerState(wrap,filter,mipfilter,(this.b<<24>>24)/8,(this.s&4)==4,(this.s&1)==1,this.t==2)},__class__:openfl__$internal_formats_agal__$AGALConverter_SamplerRegister};var openfl__$internal_formats_agal__$AGALConverter_SourceRegister=function(){};$hxClasses["openfl._internal.formats.agal._AGALConverter.SourceRegister"]=openfl__$internal_formats_agal__$AGALConverter_SourceRegister;openfl__$internal_formats_agal__$AGALConverter_SourceRegister.__name__="openfl._internal.formats.agal._AGALConverter.SourceRegister";openfl__$internal_formats_agal__$AGALConverter_SourceRegister.parse=function(v,programType,sourceMask){var sr=new openfl__$internal_formats_agal__$AGALConverter_SourceRegister;sr.programType=programType;sr.d=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>31).low&1;sr.q=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>16).low&3;sr.itype=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high>>8).low&15;sr.type=new haxe__$Int64__$_$_$Int64(v.high>>31,v.high).low&15;sr.s=new haxe__$Int64__$_$_$Int64(v.high>>24,v.high<<8|v.low>>>24).low&255;sr.o=new haxe__$Int64__$_$_$Int64(v.high>>16,v.high<<16|v.low>>>16).low&255;sr.n=v.low&65535;sr.sourceMask=sourceMask;return sr};openfl__$internal_formats_agal__$AGALConverter_SourceRegister.prototype={d:null,itype:null,n:null,o:null,programType:null,q:null,s:null,sourceMask:null,type:null,toGLSL:function(emitSwizzle,offset){if(offset==null){offset=0}if(emitSwizzle==null){emitSwizzle=true}if(this.type==3){if(this.programType==openfl__$internal_formats_agal__$AGALConverter_ProgramType.VERTEX){return"gl_Position"}else{return"gl_FragColor"}}var swizzle="";if(this.type!=5&&!(this.s==228&&this.sourceMask==15)){if((this.sourceMask&1)!=0){switch(this.s&3){case 0:swizzle="x";break;case 1:swizzle="y";break;case 2:swizzle="z";break;case 3:swizzle="w";break}}if((this.sourceMask&2)!=0){switch(this.s>>2&3){case 0:swizzle+="x";break;case 1:swizzle+="y";break;case 2:swizzle+="z";break;case 3:swizzle+="w";break}}if((this.sourceMask&4)!=0){switch(this.s>>4&3){case 0:swizzle+="x";break;case 1:swizzle+="y";break;case 2:swizzle+="z";break;case 3:swizzle+="w";break}}if((this.sourceMask&8)!=0){switch(this.s>>6&3){case 0:swizzle+="x";break;case 1:swizzle+="y";break;case 2:swizzle+="z";break;case 3:swizzle+="w";break}}}var str=openfl__$internal_formats_agal_AGALConverter.prefixFromType(this.type,this.programType);if(this.d==0){str+=this.n+offset}else{str+=this.o;var indexComponent="";switch(this.q){case 0:indexComponent="x";break;case 1:indexComponent="y";break;case 2:indexComponent="z";break;case 3:indexComponent="w";break}str+="[ int("+(openfl__$internal_formats_agal_AGALConverter.prefixFromType(this.itype,this.programType)+this.n+"."+indexComponent)+") +"+offset+"]"}if(emitSwizzle&&swizzle!=""){str+="."+swizzle}return str},__class__:openfl__$internal_formats_agal__$AGALConverter_SourceRegister};var openfl__$internal_formats_animate_AnimateSymbol=function(){};$hxClasses["openfl._internal.formats.animate.AnimateSymbol"]=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateSymbol.__name__="openfl._internal.formats.animate.AnimateSymbol";openfl__$internal_formats_animate_AnimateSymbol.prototype={className:null,id:null,__createObject:function(library){return null},__initObject:function(library,instance){},__class__:openfl__$internal_formats_animate_AnimateSymbol};var openfl__$internal_formats_animate_AnimateBitmapSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateBitmapSymbol"]=openfl__$internal_formats_animate_AnimateBitmapSymbol;openfl__$internal_formats_animate_AnimateBitmapSymbol.__name__="openfl._internal.formats.animate.AnimateBitmapSymbol";openfl__$internal_formats_animate_AnimateBitmapSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateBitmapSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{alpha:null,path:null,smooth:null,__createObject:function(library){return new openfl_display_Bitmap(openfl_display_BitmapData.fromImage(library.getImage(this.path)),1,this.smooth!=false)},__class__:openfl__$internal_formats_animate_AnimateBitmapSymbol});var openfl__$internal_formats_animate_AnimateButtonSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateButtonSymbol"]=openfl__$internal_formats_animate_AnimateButtonSymbol;openfl__$internal_formats_animate_AnimateButtonSymbol.__name__="openfl._internal.formats.animate.AnimateButtonSymbol";openfl__$internal_formats_animate_AnimateButtonSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateButtonSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{downState:null,hitState:null,overState:null,upState:null,library:null,__constructor:function(simpleButton){if(this.downState!=null){simpleButton.set_downState(this.downState.__createObject(this.library))}if(this.hitState!=null){simpleButton.set_hitTestState(this.hitState.__createObject(this.library))}if(this.overState!=null){simpleButton.set_overState(this.overState.__createObject(this.library))}if(this.upState!=null){simpleButton.set_upState(this.upState.__createObject(this.library))}},__createObject:function(library){var simpleButton=null;openfl_display_SimpleButton.__constructor=$bind(this,this.__constructor);this.library=library;if(this.className!=null){var name=this.className;var symbolType=$hxClasses[name];if(symbolType!=null){simpleButton=Type.createInstance(symbolType,[])}}if(simpleButton==null){simpleButton=new openfl_display_SimpleButton}return simpleButton},__initObject:function(library,instance){this.library=library;this.__constructor(instance)},__class__:openfl__$internal_formats_animate_AnimateButtonSymbol});var openfl__$internal_formats_animate_AnimateDynamicTextSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateDynamicTextSymbol"]=openfl__$internal_formats_animate_AnimateDynamicTextSymbol;openfl__$internal_formats_animate_AnimateDynamicTextSymbol.__name__="openfl._internal.formats.animate.AnimateDynamicTextSymbol";openfl__$internal_formats_animate_AnimateDynamicTextSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateDynamicTextSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{align:null,border:null,color:null,fontHeight:null,fontID:null,fontName:null,height:null,html:null,indent:null,input:null,leading:null,leftMargin:null,multiline:null,password:null,rightMargin:null,selectable:null,text:null,width:null,wordWrap:null,x:null,y:null,__createObject:function(library){var textField=new openfl_text_TextField;textField.set_width(this.width);textField.set_height(this.height);textField.__offsetX=this.x;textField.__offsetY=this.y;textField.set_multiline(this.multiline);textField.set_wordWrap(this.wordWrap);textField.set_displayAsPassword(this.password);if(this.border){textField.set_border(true);textField.set_background(true)}textField.set_selectable(this.selectable);if(this.input){textField.set_type(1)}var format=new openfl_text_TextFormat;if(this.color!=null){format.color=this.color&16777215}format.size=Math.round(this.fontHeight/20);var font=library.symbols.h[this.fontID];if(font!=null){format.__ascent=font.ascent/20/1024;format.__descent=font.descent/20/1024}format.font=this.fontName;var found=false;var _g=format.font;if(_g==null){found=true}else{switch(_g){case"":case"_sans":case"_serif":case"_typewriter":found=true;break;default:var _g1=0;var _g11=openfl_text_Font.enumerateFonts();while(_g1<_g11.length)if(_g11[_g1++].name==format.font){found=true;break}}}if(!found){var alpha_r=new RegExp("[^a-zA-Z]+","g".split("u").join(""));var _g12=0;var _g2=openfl_text_Font.enumerateFonts();while(_g12<_g2.length){var font1=_g2[_g12];++_g12;if(HxOverrides.substr(font1.name.replace(alpha_r,""),0,this.fontName.length)==this.fontName){format.font=font1.name;found=true;break}}}if(found){textField.set_embedFonts(true)}else{var key=format.font;var _this=openfl_text_TextField.__missingFontWarning;if(!(__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key))){var k=format.font;var _this1=openfl_text_TextField.__missingFontWarning;if(__map_reserved[k]!=null){_this1.setReserved(k,true)}else{_this1.h[k]=true}lime_utils_Log.warn('Could not find required font "'+format.font+'", it has not been embedded',{fileName:"openfl/_internal/formats/animate/AnimateDynamicTextSymbol.hx",lineNumber:145,className:"openfl._internal.formats.animate.AnimateDynamicTextSymbol",methodName:"__createObject"})}}if(this.align!=null){if(this.align=="center"){format.align=0}else if(this.align=="right"){format.align=4}else if(this.align=="justify"){format.align=2}format.leftMargin=this.leftMargin/20|0;format.rightMargin=this.rightMargin/20|0;format.indent=this.indent/20|0;format.leading=this.leading/20|0}textField.set_defaultTextFormat(format);if(this.text!=null){if(this.html){textField.set_htmlText(this.text)}else{textField.set_text(this.text)}}return textField},__class__:openfl__$internal_formats_animate_AnimateDynamicTextSymbol});var openfl__$internal_formats_animate_AnimateFontSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateFontSymbol"]=openfl__$internal_formats_animate_AnimateFontSymbol;openfl__$internal_formats_animate_AnimateFontSymbol.__name__="openfl._internal.formats.animate.AnimateFontSymbol";openfl__$internal_formats_animate_AnimateFontSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateFontSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{advances:null,ascent:null,bold:null,codes:null,descent:null,glyphs:null,italic:null,leading:null,name:null,__class__:openfl__$internal_formats_animate_AnimateFontSymbol});var openfl__$internal_formats_animate_AnimateFrame=function(){};$hxClasses["openfl._internal.formats.animate.AnimateFrame"]=openfl__$internal_formats_animate_AnimateFrame;openfl__$internal_formats_animate_AnimateFrame.__name__="openfl._internal.formats.animate.AnimateFrame";openfl__$internal_formats_animate_AnimateFrame.prototype={label:null,objects:null,script:null,scriptSource:null,__class__:openfl__$internal_formats_animate_AnimateFrame};var openfl__$internal_formats_animate_AnimateFrameObject=function(){};$hxClasses["openfl._internal.formats.animate.AnimateFrameObject"]=openfl__$internal_formats_animate_AnimateFrameObject;openfl__$internal_formats_animate_AnimateFrameObject.__name__="openfl._internal.formats.animate.AnimateFrameObject";openfl__$internal_formats_animate_AnimateFrameObject.prototype={blendMode:null,cacheAsBitmap:null,clipDepth:null,colorTransform:null,depth:null,filters:null,id:null,matrix:null,name:null,symbol:null,type:null,visible:null,__class__:openfl__$internal_formats_animate_AnimateFrameObject};var openfl_utils_AssetLibrary=function(){lime_utils_AssetLibrary.call(this)};$hxClasses["openfl.utils.AssetLibrary"]=openfl_utils_AssetLibrary;openfl_utils_AssetLibrary.__name__="openfl.utils.AssetLibrary";openfl_utils_AssetLibrary.fromBundle=function(bundle){var library=lime_utils_AssetLibrary.fromBundle(bundle);if(library!=null){if(library instanceof openfl_utils_AssetLibrary){return library}else{var _library=new openfl_utils_AssetLibrary;_library.__proxy=library;return _library}}else{return null}};openfl_utils_AssetLibrary.fromManifest=function(manifest){var library=lime_utils_AssetLibrary.fromManifest(manifest);if(library!=null){if(library instanceof openfl_utils_AssetLibrary){return library}else{var _library=new openfl_utils_AssetLibrary;_library.__proxy=library;return _library}}else{return null}};openfl_utils_AssetLibrary.__super__=lime_utils_AssetLibrary;openfl_utils_AssetLibrary.prototype=$extend(lime_utils_AssetLibrary.prototype,{__proxy:null,exists:function(id,type){if(this.__proxy!=null){return this.__proxy.exists(id,type)}else{return lime_utils_AssetLibrary.prototype.exists.call(this,id,type)}},getAsset:function(id,type){if(this.__proxy!=null){return this.__proxy.getAsset(id,type)}else{return lime_utils_AssetLibrary.prototype.getAsset.call(this,id,type)}},getAudioBuffer:function(id){if(this.__proxy!=null){return this.__proxy.getAudioBuffer(id)}else{return lime_utils_AssetLibrary.prototype.getAudioBuffer.call(this,id)}},getBytes:function(id){if(this.__proxy!=null){return this.__proxy.getBytes(id)}else{return lime_utils_AssetLibrary.prototype.getBytes.call(this,id)}},getFont:function(id){if(this.__proxy!=null){return this.__proxy.getFont(id)}else{return lime_utils_AssetLibrary.prototype.getFont.call(this,id)}},getImage:function(id){if(this.__proxy!=null){return this.__proxy.getImage(id)}else{return lime_utils_AssetLibrary.prototype.getImage.call(this,id)}},getMovieClip:function(id){return null},getText:function(id){if(this.__proxy!=null){return this.__proxy.getText(id)}else{return lime_utils_AssetLibrary.prototype.getText.call(this,id)}},isLocal:function(id,type){if(this.__proxy!=null){return this.__proxy.isLocal(id,type)}else{return lime_utils_AssetLibrary.prototype.isLocal.call(this,id,type)}},load:function(){if(this.__proxy!=null){return this.__proxy.load()}else{return lime_utils_AssetLibrary.prototype.load.call(this)}},loadAudioBuffer:function(id){if(this.__proxy!=null){return this.__proxy.loadAudioBuffer(id)}else{return lime_utils_AssetLibrary.prototype.loadAudioBuffer.call(this,id)}},loadBytes:function(id){if(this.__proxy!=null){return this.__proxy.loadBytes(id)}else{return lime_utils_AssetLibrary.prototype.loadBytes.call(this,id)}},loadFont:function(id){if(this.__proxy!=null){return this.__proxy.loadFont(id)}else{return lime_utils_AssetLibrary.prototype.loadFont.call(this,id)}},loadImage:function(id){if(this.__proxy!=null){return this.__proxy.loadImage(id)}else{return lime_utils_AssetLibrary.prototype.loadImage.call(this,id)}},loadText:function(id){if(this.__proxy!=null){return this.__proxy.loadText(id)}else{return lime_utils_AssetLibrary.prototype.loadText.call(this,id)}},unload:function(){if(this.__proxy!=null){this.__proxy.unload();return}else{lime_utils_AssetLibrary.prototype.unload.call(this);return}},__class__:openfl_utils_AssetLibrary});var openfl__$internal_formats_animate_AnimateLibrary=function(id,uuid){openfl_utils_AssetLibrary.call(this);this.id=id;this.instanceID=uuid!=null?uuid:id;this.alphaCheck=new haxe_ds_StringMap;this.bitmapClassNames=new haxe_ds_StringMap;this.rootPath="";if(openfl__$internal_formats_animate_AnimateLibrary.instances==null){openfl__$internal_formats_animate_AnimateLibrary.instances=new haxe_ds_StringMap}var _this=openfl__$internal_formats_animate_AnimateLibrary.instances;if(__map_reserved[uuid]!=null){_this.setReserved(uuid,this)}else{_this.h[uuid]=this}};$hxClasses["openfl._internal.formats.animate.AnimateLibrary"]=openfl__$internal_formats_animate_AnimateLibrary;openfl__$internal_formats_animate_AnimateLibrary.__name__="openfl._internal.formats.animate.AnimateLibrary";openfl__$internal_formats_animate_AnimateLibrary.get=function(uuid){if(openfl__$internal_formats_animate_AnimateLibrary.instances==null){return null}var _this=openfl__$internal_formats_animate_AnimateLibrary.instances;if(__map_reserved[uuid]!=null){return _this.getReserved(uuid)}else{return _this.h[uuid]}};openfl__$internal_formats_animate_AnimateLibrary.__super__=openfl_utils_AssetLibrary;openfl__$internal_formats_animate_AnimateLibrary.prototype=$extend(openfl_utils_AssetLibrary.prototype,{alphaCheck:null,bitmapClassNames:null,bitmapSymbols:null,frameRate:null,id:null,instanceID:null,preloading:null,root:null,rootPath:null,symbols:null,symbolsByClassName:null,uuid:null,exists:function(id,type){if(this.symbols!=null){if(id==""&&type=="MOVIE_CLIP"){return true}if(type=="IMAGE"||type=="MOVIE_CLIP"){if(this.symbolsByClassName!=null){var _this=this.symbolsByClassName;if(__map_reserved[id]!=null){return _this.existsReserved(id)}else{return _this.h.hasOwnProperty(id)}}else{return false}}}return openfl_utils_AssetLibrary.prototype.exists.call(this,id,type)},getImage:function(id){var _this=this.bitmapClassNames;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.bitmapClassNames;id=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]}var _this2=this.alphaCheck;if(!(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id))){var _g=0;var _g1=this.bitmapSymbols;while(_g<_g1.length){var bitmapSymbol=_g1[_g];++_g;if(bitmapSymbol.path==id&&bitmapSymbol.alpha!=null){var image=openfl_utils_AssetLibrary.prototype.getImage.call(this,id);this.__copyChannel(image,openfl_utils_AssetLibrary.prototype.getImage.call(this,bitmapSymbol.alpha));var _this3=this.cachedImages;if(__map_reserved[id]!=null){_this3.setReserved(id,image)}else{_this3.h[id]=image}this.cachedImages.remove(bitmapSymbol.alpha);var _this4=this.alphaCheck;if(__map_reserved[id]!=null){_this4.setReserved(id,true)}else{_this4.h[id]=true}return image}}var _this5=this.alphaCheck;if(__map_reserved[id]!=null){_this5.setReserved(id,true)}else{_this5.h[id]=true}}return openfl_utils_AssetLibrary.prototype.getImage.call(this,id)},getMovieClip:function(id){if(this.symbols==null){return null}if(id==""){return this.root.__createObject(this)}else{var _this=this.symbolsByClassName;var symbol=__map_reserved[id]!=null?_this.getReserved(id):_this.h[id];if(symbol!=null){if(symbol instanceof openfl__$internal_formats_animate_AnimateSpriteSymbol){return js_Boot.__cast(symbol,openfl__$internal_formats_animate_AnimateSpriteSymbol).__createObject(this)}}}return null},isLocal:function(id,type){return true},load:function(){var _gthis=this;if(this.id!=null){var key=this.id;var _this=this.preload;if(__map_reserved[key]!=null){_this.setReserved(key,true)}else{_this.h[key]=true}}var promise=new lime_app_Promise;this.preloading=true;var onComplete=function(data){var key1=_gthis.id;var _this1=_gthis.cachedText;if(__map_reserved[key1]!=null){_this1.setReserved(key1,data)}else{_this1.h[key1]=data}var json=JSON.parse(data);_gthis.frameRate=json.frameRate;var rootIndex=json.root;var symbolData=json.symbols;var data1;var type;var symbol=null;var bitmapSymbol;var spriteSymbol;_gthis.symbols=new haxe_ds_IntMap;_gthis.symbolsByClassName=new haxe_ds_StringMap;_gthis.bitmapSymbols=[];var _g=0;var _g1=symbolData.length;while(_g<_g1){var i=_g++;data1=symbolData[i];if(data1==null){continue}type=data1.type;switch(type){case 0:bitmapSymbol=_gthis.__parseBitmap(data1);_gthis.bitmapSymbols.push(bitmapSymbol);if(bitmapSymbol.className!=null){var key2=bitmapSymbol.className;var value=bitmapSymbol.path;var _this2=_gthis.bitmapClassNames;if(__map_reserved[key2]!=null){_this2.setReserved(key2,value)}else{_this2.h[key2]=value}}symbol=bitmapSymbol;break;case 1:symbol=_gthis.__parseButton(data1);break;case 2:symbol=_gthis.__parseDynamicText(data1);break;case 3:symbol=_gthis.__parseFont(data1);break;case 4:symbol=_gthis.__parseShape(data1);break;case 5:spriteSymbol=_gthis.__parseSprite(data1);if(i==rootIndex){_gthis.root=spriteSymbol}symbol=spriteSymbol;break;case 6:symbol=_gthis.__parseStaticText(data1);break;default:}if(symbol==null){continue}_gthis.symbols.h[symbol.id]=symbol;if(symbol.className!=null){var key3=symbol.className;var _this3=_gthis.symbolsByClassName;if(__map_reserved[key3]!=null){_this3.setReserved(key3,symbol)}else{_this3.h[key3]=symbol}}}_gthis.__load().onProgress($bind(promise,promise.progress)).onError($bind(promise,promise.error)).onComplete(function(_){_gthis.preloading=false;promise.complete(_gthis)})};if(this.exists(this.id,"TEXT")||this.exists(this.id,"BINARY")){var id=this.paths.keys();while(id.hasNext()){var id1=id.next();var _this4=this.preload;if(__map_reserved[id1]!=null){_this4.setReserved(id1,true)}else{_this4.h[id1]=true}}var id2=this.types.keys();while(id2.hasNext()){var id3=id2.next();var _this5=this.types;if((__map_reserved[id3]!=null?_this5.getReserved(id3):_this5.h[id3])=="IMAGE"){var _this6=this.preload;if(__map_reserved[id3]!=null){_this6.setReserved(id3,true)}else{_this6.h[id3]=true}}}this.loadText(this.id).onError($bind(promise,promise.error)).onComplete(onComplete)}else{var id4=this.paths.keys();while(id4.hasNext()){var id5=id4.next();var _this7=this.preload;if(__map_reserved[id5]!=null){_this7.setReserved(id5,true)}else{_this7.h[id5]=true}}var path=null;var key4=this.id;var _this8=this.paths;if(__map_reserved[key4]!=null?_this8.existsReserved(key4):_this8.h.hasOwnProperty(key4)){var key5=this.id;var _this9=this.paths;path=__map_reserved[key5]!=null?_this9.getReserved(key5):_this9.h[key5]}else{path=this.rootPath!=null&&this.rootPath!=""?this.rootPath+"/"+this.id:this.id}var loader=new openfl_net_URLLoader;loader.addEventListener("complete",function(_1){onComplete(loader.data)});loader.addEventListener("ioError",function(e){promise.error(e)});loader.load(new openfl_net_URLRequest(path))}return promise.future},loadImage:function(id){var _gthis=this;var _this=this.bitmapClassNames;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.bitmapClassNames;id=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]}var tmp;if(!this.preloading){var _this2=this.alphaCheck;tmp=!(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id))}else{tmp=false}if(tmp){var _g=0;var _g1=this.bitmapSymbols;while(_g<_g1.length){var bitmapSymbol=[_g1[_g]];++_g;if(bitmapSymbol[0].path==id&&bitmapSymbol[0].alpha!=null){var promise=[new lime_app_Promise];this.__loadImage(id).onError(($_=promise[0],$bind($_,$_.error))).onComplete(function(promise1,bitmapSymbol1){return function(image){_gthis.__loadImage(bitmapSymbol1[0].alpha).onError(($_=promise1[0],$bind($_,$_.error))).onComplete(function(promise2,bitmapSymbol2){return function(alpha){_gthis.__copyChannel(image,alpha);var _this3=_gthis.cachedImages;if(__map_reserved[id]!=null){_this3.setReserved(id,image)}else{_this3.h[id]=image}_gthis.cachedImages.remove(bitmapSymbol2[0].alpha);var _this4=_gthis.alphaCheck;if(__map_reserved[id]!=null){_this4.setReserved(id,true)}else{_this4.h[id]=true}promise2[0].complete(image)}}(promise1,bitmapSymbol1))}}(promise,bitmapSymbol));return promise[0].future}else{var _this5=this.alphaCheck;if(__map_reserved[id]!=null){_this5.setReserved(id,true)}else{_this5.h[id]=true}}}}return openfl_utils_AssetLibrary.prototype.loadImage.call(this,id)},unload:function(){openfl__$internal_formats_animate_AnimateLibrary.instances.remove(this.uuid);if(this.symbols==null){return}var _g=0;var _g1=this.bitmapSymbols;while(_g<_g1.length)openfl_utils_Assets.cache.removeBitmapData(_g1[_g++].path)},__copyChannel:function(image,alpha){if(alpha!=null){image.copyChannel(alpha,alpha.get_rect(),new lime_math_Vector2,lime_graphics_ImageChannel.RED,lime_graphics_ImageChannel.ALPHA)}image.buffer.premultiplied=true;image.set_premultiplied(false)},__fromManifest:function(manifest){this.rootPath=manifest.rootPath;openfl_utils_AssetLibrary.prototype.__fromManifest.call(this,manifest);this.bytesTotal=0;var id=this.paths.keys();while(id.hasNext()){var id1=id.next();var _this=this.sizes;this.bytesTotal+=__map_reserved[id1]!=null?_this.getReserved(id1):_this.h[id1]}},__load:function(){return openfl_utils_AssetLibrary.prototype.load.call(this)},__loadImage:function(id){return openfl_utils_AssetLibrary.prototype.loadImage.call(this,id)},__parseBitmap:function(data){var symbol=new openfl__$internal_formats_animate_AnimateBitmapSymbol;symbol.id=data.id;symbol.className=data.className;symbol.alpha=data.alpha;symbol.path=data.path;symbol.smooth=data.smooth;return symbol},__parseButton:function(data){var symbol=new openfl__$internal_formats_animate_AnimateButtonSymbol;symbol.id=data.id;symbol.className=data.className;symbol.downState=this.__parseSprite(data.downState);symbol.hitState=this.__parseSprite(data.hitState);symbol.overState=this.__parseSprite(data.overState);symbol.upState=this.__parseSprite(data.upState);return symbol},__parseDynamicText:function(data){var symbol=new openfl__$internal_formats_animate_AnimateDynamicTextSymbol;symbol.id=data.id;symbol.align=data.align;symbol.border=data.border;symbol.color=data.color;symbol.fontHeight=data.fontHeight;symbol.fontID=data.fontID;symbol.fontName=data.fontName;symbol.html=data.html;symbol.indent=data.indent;symbol.input=data.input;symbol.leading=data.leading;symbol.leftMargin=data.leftMargin;symbol.multiline=data.multiline;symbol.password=data.password;symbol.rightMargin=data.rightMargin;symbol.selectable=data.selectable;symbol.text=data.text;symbol.wordWrap=data.wordWrap;symbol.x=data.rect[0]/20;symbol.y=data.rect[1]/20;symbol.width=data.rect[2]/20;symbol.height=data.rect[3]/20;return symbol},__parseFont:function(data){var symbol=new openfl__$internal_formats_animate_AnimateFontSymbol;symbol.id=data.id;symbol.advances=data.advances;symbol.ascent=data.ascent;symbol.bold=data.bold;symbol.codes=data.codes;symbol.descent=data.descent;symbol.italic=data.italic;symbol.leading=data.leading;symbol.name=data.name;if(Object.prototype.hasOwnProperty.call(data,"glyphs")){symbol.glyphs=[];var glyphs=data.glyphs;var _g=0;var _g1=glyphs.length;while(_g<_g1){var glyphIndex=_g++;var data1=glyphs[glyphIndex];if(data1!=null){var commands=[];symbol.glyphs[glyphIndex]=commands;var i=0;while(i<data1.length)switch(data1[i]){case 0:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginBitmapFill(data1[i+1],this.__parseMatrix(data1[i+2]),data1[i+3],data1[i+4]));i+=5;break;case 1:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginFill(data1[i+1],data1[i+2]));i+=3;break;case 2:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginGradientFill(data1[i+1],data1[i+2],data1[i+3],data1[i+4],this.__parseMatrix(data1[i+5]),data1[i+6],data1[i+7],data1[i+8]));i+=9;break;case 3:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineStyle(null,null,null,null,null,null,null,null));++i;break;case 4:commands.push(openfl__$internal_formats_swf_ShapeCommand.CurveTo(data1[i+1]/20,data1[i+2]/20,data1[i+3]/20,data1[i+4]/20));i+=5;break;case 5:commands.push(openfl__$internal_formats_swf_ShapeCommand.EndFill);++i;break;case 6:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineStyle(data1[i+1],data1[i+2],data1[i+3],data1[i+4],data1[i+5],data1[i+6],data1[i+7],data1[i+8]));i+=9;break;case 7:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineTo(data1[i+1]/20,data1[i+2]/20));i+=3;break;case 8:commands.push(openfl__$internal_formats_swf_ShapeCommand.MoveTo(data1[i+1]/20,data1[i+2]/20));i+=3;break;default:++i}}}}return symbol},__parseMatrix:function(values){if(values!=null){return new openfl_geom_Matrix(values[0],values[1],values[2],values[3],values[4]/20,values[5]/20)}else{return null}},__parseShape:function(data){var symbol=new openfl__$internal_formats_animate_AnimateShapeSymbol;symbol.id=data.id;symbol.commands=[];var data1=data.commands;var commands=symbol.commands;var i=0;while(i<data1.length)switch(data1[i]){case 0:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginBitmapFill(data1[i+1],this.__parseMatrix(data1[i+2]),data1[i+3],data1[i+4]));i+=5;break;case 1:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginFill(data1[i+1],data1[i+2]));i+=3;break;case 2:commands.push(openfl__$internal_formats_swf_ShapeCommand.BeginGradientFill(data1[i+1],data1[i+2],data1[i+3],data1[i+4],this.__parseMatrix(data1[i+5]),data1[i+6],data1[i+7],data1[i+8]));i+=9;break;case 3:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineStyle(null,null,null,null,null,null,null,null));++i;break;case 4:commands.push(openfl__$internal_formats_swf_ShapeCommand.CurveTo(data1[i+1]/20,data1[i+2]/20,data1[i+3]/20,data1[i+4]/20));i+=5;break;case 5:commands.push(openfl__$internal_formats_swf_ShapeCommand.EndFill);++i;break;case 6:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineStyle(data1[i+1],data1[i+2],data1[i+3],data1[i+4],data1[i+5],data1[i+6],data1[i+7],data1[i+8]));i+=9;break;case 7:commands.push(openfl__$internal_formats_swf_ShapeCommand.LineTo(data1[i+1]/20,data1[i+2]/20));i+=3;break;case 8:commands.push(openfl__$internal_formats_swf_ShapeCommand.MoveTo(data1[i+1]/20,data1[i+2]/20));i+=3;break;default:++i}return symbol},__parseSprite:function(data){var symbol=new openfl__$internal_formats_animate_AnimateSpriteSymbol;symbol.id=data.id;symbol.className=data.className;symbol.baseClassName=data.baseClassName;symbol.scale9Grid=data.scale9Grid!=null?new openfl_geom_Rectangle(data.scale9Grid[0]/20,data.scale9Grid[1]/20,data.scale9Grid[2]/20,data.scale9Grid[3]/20):null;var frames=data.frames;var frame;var objects;var object;var _g=0;while(_g<frames.length){var frameData=frames[_g];++_g;frame=new openfl__$internal_formats_animate_AnimateFrame;frame.label=frameData.label;objects=frameData.objects;if(objects!=null&&objects.length>0){frame.objects=[];var _g1=0;while(_g1<objects.length){var objectData=objects[_g1];++_g1;object=new openfl__$internal_formats_animate_AnimateFrameObject;object.blendMode=objectData.blendMode;object.cacheAsBitmap=objectData.cacheAsBitmap;object.clipDepth=objectData.clipDepth;object.colorTransform=objectData.colorTransform!=null?new openfl_geom_ColorTransform(objectData.colorTransform[0]/20,objectData.colorTransform[1]/20,objectData.colorTransform[2]/20,objectData.colorTransform[3]/20,objectData.colorTransform[4]/20,objectData.colorTransform[5]/20,objectData.colorTransform[6]/20,objectData.colorTransform[7]/20):null;object.depth=objectData.depth;object.filters=objectData.filters;object.id=objectData.id;object.matrix=this.__parseMatrix(objectData.matrix);object.name=objectData.name;object.symbol=objectData.symbol;object.type=objectData.type;object.visible=objectData.visible;frame.objects.push(object)}}symbol.frames.push(frame)}return symbol},__parseStaticText:function(data){var symbol=new openfl__$internal_formats_animate_AnimateStaticTextSymbol;symbol.id=data.id;symbol.matrix=this.__parseMatrix(data.matrix);symbol.records=data.records;return symbol},__pixel:function(value){return value/20},__class__:openfl__$internal_formats_animate_AnimateLibrary});var openfl__$internal_formats_animate_AnimateShapeSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateShapeSymbol"]=openfl__$internal_formats_animate_AnimateShapeSymbol;openfl__$internal_formats_animate_AnimateShapeSymbol.__name__="openfl._internal.formats.animate.AnimateShapeSymbol";openfl__$internal_formats_animate_AnimateShapeSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateShapeSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{commands:null,rendered:null,__createObject:function(library){var shape=new openfl_display_Shape;var graphics=shape.get_graphics();if(this.rendered!=null){graphics.copyFrom(this.rendered.get_graphics());return shape}var _g=0;var _g1=this.commands;while(_g<_g1.length){var command=_g1[_g];++_g;switch(command._hx_index){case 0:var bitmap=library.getImage(library.symbols.h[command.bitmap].path);if(bitmap!=null){graphics.beginBitmapFill(openfl_display_BitmapData.fromImage(bitmap),command.matrix,command.repeat,command.smooth)}break;case 1:graphics.beginFill(command.color,command.alpha);break;case 2:graphics.beginGradientFill(command.fillType,command.colors,command.alphas,command.ratios,command.matrix,command.spreadMethod,command.interpolationMethod,command.focalPointRatio);break;case 3:graphics.curveTo(command.controlX,command.controlY,command.anchorX,command.anchorY);break;case 4:graphics.endFill();break;case 5:var _g8=command.thickness;if(_g8!=null){graphics.lineStyle(_g8,command.color,command.alpha,command.pixelHinting,command.scaleMode,command.caps,command.joints,command.miterLimit)}else{graphics.lineStyle()}break;case 6:graphics.lineTo(command.x,command.y);break;case 7:graphics.moveTo(command.x,command.y);break}}this.commands=null;this.rendered=new openfl_display_Shape;this.rendered.get_graphics().copyFrom(shape.get_graphics());return shape},__class__:openfl__$internal_formats_animate_AnimateShapeSymbol});var openfl__$internal_formats_animate_AnimateSpriteSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this);this.frames=[]};$hxClasses["openfl._internal.formats.animate.AnimateSpriteSymbol"]=openfl__$internal_formats_animate_AnimateSpriteSymbol;openfl__$internal_formats_animate_AnimateSpriteSymbol.__name__="openfl._internal.formats.animate.AnimateSpriteSymbol";openfl__$internal_formats_animate_AnimateSpriteSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateSpriteSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{baseClassName:null,frames:null,scale9Grid:null,library:null,__constructor:function(movieClip){movieClip.__timeline=new openfl__$internal_formats_animate_AnimateTimeline(movieClip,this.library,this);movieClip.set_scale9Grid(this.scale9Grid)},__createObject:function(library){openfl_display_MovieClip.__constructor=$bind(this,this.__constructor);this.library=library;var symbolType=null;if(this.className!=null){var name=this.className;symbolType=$hxClasses[name]}if(symbolType==null&&this.baseClassName!=null){var name1=this.baseClassName;symbolType=$hxClasses[name1]}var movieClip=null;if(symbolType!=null){movieClip=Type.createInstance(symbolType,[])}else{movieClip=new openfl_display_MovieClip}return movieClip},__initObject:function(library,instance){this.library=library;this.__constructor(instance)},__class__:openfl__$internal_formats_animate_AnimateSpriteSymbol});var openfl__$internal_formats_animate_AnimateStaticTextSymbol=function(){openfl__$internal_formats_animate_AnimateSymbol.call(this)};$hxClasses["openfl._internal.formats.animate.AnimateStaticTextSymbol"]=openfl__$internal_formats_animate_AnimateStaticTextSymbol;openfl__$internal_formats_animate_AnimateStaticTextSymbol.__name__="openfl._internal.formats.animate.AnimateStaticTextSymbol";openfl__$internal_formats_animate_AnimateStaticTextSymbol.__super__=openfl__$internal_formats_animate_AnimateSymbol;openfl__$internal_formats_animate_AnimateStaticTextSymbol.prototype=$extend(openfl__$internal_formats_animate_AnimateSymbol.prototype,{matrix:null,records:null,rendered:null,__createObject:function(library){var staticText=new openfl_text_StaticText;var graphics=staticText.__graphics;if(this.rendered!=null){staticText.text=this.rendered.text;graphics.copyFrom(this.rendered.__graphics);return staticText}var text="";if(this.records!=null){var font=null;var color=16777215;var offsetX=this.matrix.tx;var offsetY=this.matrix.ty;var scale;var index;var _g=0;var _g1=this.records;while(_g<_g1.length){var record=_g1[_g];++_g;if(record.fontID!=null){font=library.symbols.h[record.fontID]}if(record.offset!=null){offsetX=this.matrix.tx+record.offset[0]*.05;offsetY=this.matrix.ty+record.offset[1]*.05}if(record.color!=null){color=record.color}if(font!=null){scale=record.fontHeight/1024*.05;var _g2=0;var _g11=record.glyphs.length;while(_g2<_g11){var i=_g2++;index=record.glyphs[i];var code=font.codes[index];text+=String.fromCodePoint(code);var _g3=0;var _g12=font.glyphs[index];while(_g3<_g12.length){var command=_g12[_g3];++_g3;switch(command._hx_index){case 1:graphics.beginFill(color&16777215,(color>>24&255)/255);break;case 3:graphics.curveTo(command.controlX*scale+offsetX,command.controlY*scale+offsetY,command.anchorX*scale+offsetX,command.anchorY*scale+offsetY);break;case 4:graphics.endFill();break;case 5:var thickness=command.thickness;if(thickness!=null){graphics.lineStyle(thickness,command.color,command.alpha,command.pixelHinting,command.scaleMode,command.caps,command.joints,command.miterLimit)}else{graphics.lineStyle()}break;case 6:graphics.lineTo(command.x*scale+offsetX,command.y*scale+offsetY);break;case 7:graphics.moveTo(command.x*scale+offsetX,command.y*scale+offsetY);break;default:}}offsetX+=record.advances[i]*.05}}}}staticText.text=text;this.records=null;this.rendered=new openfl_text_StaticText;this.rendered.text=text;this.rendered.__graphics.copyFrom(staticText.__graphics);return staticText},__class__:openfl__$internal_formats_animate_AnimateStaticTextSymbol});var openfl__$internal_utils_ITimeline=function(){};$hxClasses["openfl._internal.utils.ITimeline"]=openfl__$internal_utils_ITimeline;openfl__$internal_utils_ITimeline.__name__="openfl._internal.utils.ITimeline";openfl__$internal_utils_ITimeline.__isInterface__=true;openfl__$internal_utils_ITimeline.prototype={enterFrame:null,gotoAndPlay:null,gotoAndStop:null,play:null,stop:null,__class__:openfl__$internal_utils_ITimeline};var openfl__$internal_formats_animate_AnimateTimeline=function(movieClip,library,symbol){this.__movieClip=movieClip;this.__library=library;this.__symbol=symbol;this.__currentFrame=1;this.__currentLabels=[];this.__instanceFields=[];this.__totalFrames=0;this.__enabled=true;this.init()};$hxClasses["openfl._internal.formats.animate.AnimateTimeline"]=openfl__$internal_formats_animate_AnimateTimeline;openfl__$internal_formats_animate_AnimateTimeline.__name__="openfl._internal.formats.animate.AnimateTimeline";openfl__$internal_formats_animate_AnimateTimeline.__interfaces__=[openfl__$internal_utils_ITimeline];openfl__$internal_formats_animate_AnimateTimeline.prototype={__activeInstances:null,__activeInstancesByFrameObjectID:null,__currentFrame:null,__currentFrameLabel:null,__currentLabel:null,__currentLabels:null,__enabled:null,__frameScripts:null,__frameTime:null,__instanceFields:null,__lastFrameScriptEval:null,__lastFrameUpdate:null,__library:null,__movieClip:null,__playing:null,__symbol:null,__timeElapsed:null,__totalFrames:null,gotoAndPlay:function(frame,scene){this.play();this.__goto(this.__resolveFrameReference(frame))},gotoAndStop:function(frame,scene){this.stop();this.__goto(this.__resolveFrameReference(frame))},init:function(){var _gthis=this;if(this.__activeInstances!=null){return}this.__activeInstances=[];this.__activeInstancesByFrameObjectID=new haxe_ds_IntMap;this.__currentFrame=1;this.__lastFrameScriptEval=-1;this.__lastFrameUpdate=-1;this.__totalFrames=this.__symbol.frames.length;var frame;var frameData;var _g=0;var _g1=this.__symbol.frames.length;while(_g<_g1){var i=_g++;frame=i+1;frameData=this.__symbol.frames[i];if(frameData.label!=null){this.__currentLabels.push(new openfl_display_FrameLabel(frameData.label,i+1))}if(frameData.script!=null){if(this.__frameScripts==null){this.__frameScripts=new haxe_ds_IntMap}this.__frameScripts.h[frame]=frameData.script}else if(frameData.scriptSource!=null){if(this.__frameScripts==null){this.__frameScripts=new haxe_ds_IntMap}try{var script=[eval("(function(){"+frameData.scriptSource+"})")];var wrapper=function(script1){return function(){try{script1[0].call(_gthis)}catch(e){haxe_CallStack.lastException=e;var e1=e instanceof js__$Boot_HaxeError?e.val:e;var wrapper1="Error evaluating frame script\n "+Std.string(e1)+"\n";var _this=haxe_CallStack.exceptionStack();var result=new Array(_this.length);var _g2=0;var _g11=_this.length;while(_g2<_g11){var i1=_g2++;result[i1]=_this[i1][2]}lime_utils_Log.info(wrapper1+result.join("\n")+"\n"+Std.string(e1.stack)+"\n"+script1[0].toString(),{fileName:"openfl/_internal/formats/animate/AnimateTimeline.hx",lineNumber:246,className:"openfl._internal.formats.animate.AnimateTimeline",methodName:"init"})}}}(script);this.__frameScripts.h[frame]=wrapper}catch(e2){haxe_CallStack.lastException=e2;var e3=e2 instanceof js__$Boot_HaxeError?e2.val:e2;if(this.__symbol.className!=null){lime_utils_Log.warn('Unable to evaluate frame script source for symbol "'+this.__symbol.className+'" frame '+frame+"\n"+frameData.scriptSource,{fileName:"openfl/_internal/formats/animate/AnimateTimeline.hx",lineNumber:267,className:"openfl._internal.formats.animate.AnimateTimeline",methodName:"init"})}else{lime_utils_Log.warn("Unable to evaluate frame script source:\n"+frameData.scriptSource,{fileName:"openfl/_internal/formats/animate/AnimateTimeline.hx",lineNumber:272,className:"openfl._internal.formats.animate.AnimateTimeline",methodName:"init"})}}}}var frame1;var frameData1;var instance;var duplicate;var symbol;var displayObject;var _g21=0;var _g3=this.__totalFrames;while(_g21<_g3){var i2=_g21++;frame1=i2+1;frameData1=this.__symbol.frames[i2];if(frameData1.objects==null){continue}var _g22=0;var _g31=frameData1.objects;while(_g22<_g31.length){var frameObject=_g31[_g22];++_g22;if(frameObject.type==0){if(this.__activeInstancesByFrameObjectID.h.hasOwnProperty(frameObject.id)){continue}else{instance=null;duplicate=false;var _g23=0;var _g32=this.__activeInstances;while(_g23<_g32.length){var activeInstance=_g32[_g23];++_g23;if(activeInstance.displayObject!=null&&activeInstance.characterID==frameObject.symbol&&activeInstance.depth==frameObject.depth){instance=activeInstance;duplicate=true;break}}}if(instance==null){symbol=this.__library.symbols.h[frameObject.symbol];if(symbol!=null){displayObject=symbol.__createObject(this.__library);if(displayObject!=null){displayObject.parent=this.__movieClip;displayObject.stage=this.__movieClip.stage;if(this.__movieClip.stage!=null){displayObject.dispatchEvent(new openfl_events_Event("addedToStage",false,false))}instance=new openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance(frame1,frameObject.id,frameObject.symbol,frameObject.depth,displayObject,frameObject.clipDepth)}}}if(instance!=null){this.__activeInstancesByFrameObjectID.h[frameObject.id]=instance;if(!duplicate){this.__activeInstances.push(instance);this.__updateDisplayObject(instance.displayObject,frameObject)}}}}}if(this.__totalFrames>1){this.play()}this.enterFrame(0);this.__instanceFields=Type.getInstanceFields(js_Boot.getClass(this.__movieClip));this.__updateInstanceFields()},play:function(){if(this.__symbol==null||this.__playing||this.__totalFrames<2){return}this.__playing=true;this.__frameTime=1e3/this.__library.frameRate|0;this.__timeElapsed=0},stop:function(){this.__playing=false},enterFrame:function(deltaTime){this.__updateFrameScript(deltaTime);this.__updateSymbol(this.__currentFrame)},__updateFrameScript:function(deltaTime){if(this.__symbol!=null&&this.__playing){var nextFrame=this.__getNextFrame(deltaTime);if(this.__lastFrameScriptEval==nextFrame){return}if(this.__frameScripts!=null){if(nextFrame<this.__currentFrame){if(!this.__evaluateFrameScripts(this.__totalFrames)){return}this.__currentFrame=1}if(!this.__evaluateFrameScripts(nextFrame)){return}}else{this.__currentFrame=nextFrame}}},__updateSymbol:function(targetFrame){if(this.__symbol!=null&&this.__currentFrame!=this.__lastFrameUpdate){this.__updateFrameLabel();var currentInstancesByFrameObjectID=new haxe_ds_IntMap;var frameData;var instance;var _g=0;while(_g<targetFrame){frameData=this.__symbol.frames[_g++];if(frameData.objects==null){continue}var _g1=0;var _g11=frameData.objects;while(_g1<_g11.length){var frameObject=_g11[_g1];++_g1;switch(frameObject.type){case 0:instance=this.__activeInstancesByFrameObjectID.h[frameObject.id];if(instance!=null){currentInstancesByFrameObjectID.h[frameObject.id]=instance;this.__updateDisplayObject(instance.displayObject,frameObject,true)}break;case 1:instance=currentInstancesByFrameObjectID.h[frameObject.id];if(instance!=null&&instance.displayObject!=null){this.__updateDisplayObject(instance.displayObject,frameObject)}break;case 2:currentInstancesByFrameObjectID.remove(frameObject.id);break}}}var currentInstances=[];var currentMasks=[];var instance1=currentInstancesByFrameObjectID.iterator();while(instance1.hasNext()){var instance2=instance1.next();if(currentInstances.indexOf(instance2)==-1){currentInstances.push(instance2);if(instance2.clipDepth>0){currentMasks.push(instance2)}}}currentInstances.sort($bind(this,this.__sortDepths));var existingChild;var targetDepth;var targetChild;var child;var maskApplied;var _g2=0;var _g3=currentInstances.length;while(_g2<_g3){var i=_g2++;existingChild=this.__movieClip.__children[i];instance=currentInstances[i];targetDepth=instance.depth;targetChild=instance.displayObject;if(existingChild!=targetChild){child=targetChild;this.__movieClip.addChildAt(targetChild,i)}else{child=this.__movieClip.__children[i]}maskApplied=false;var _g21=0;while(_g21<currentMasks.length){var mask=currentMasks[_g21];++_g21;if(targetDepth>mask.depth&&targetDepth<=mask.clipDepth){child.set_mask(mask.displayObject);maskApplied=true;break}}if(currentMasks.length>0&&!maskApplied&&child.get_mask()!=null){child.set_mask(null)}}var child1;var i1=currentInstances.length;var length=this.__movieClip.__children.length;while(i1<length){child1=this.__movieClip.__children[i1];var _g4=0;var _g5=this.__activeInstances;while(_g4<_g5.length)if(_g5[_g4++].displayObject==child1){if(child1 instanceof openfl_display_MovieClip){child1.gotoAndPlay(1)}this.__movieClip.removeChild(child1);--i1;--length}++i1}this.__lastFrameUpdate=this.__currentFrame;this.__updateInstanceFields()}},__evaluateFrameScripts:function(advanceToFrame){var _g=this.__currentFrame;var _g1=advanceToFrame+1;while(_g<_g1){var frame=_g++;if(frame==this.__lastFrameScriptEval){continue}this.__lastFrameScriptEval=frame;this.__currentFrame=frame;if(this.__frameScripts.h.hasOwnProperty(frame)){this.__updateSymbol(frame);this.__frameScripts.h[frame]();if(this.__currentFrame!=frame){return false}}if(!this.__playing){return false}}return true},__getNextFrame:function(deltaTime){var nextFrame=0;this.__timeElapsed+=deltaTime;nextFrame=this.__currentFrame+Math.floor(this.__timeElapsed/this.__frameTime);if(nextFrame<1){nextFrame=1}if(nextFrame>this.__totalFrames){nextFrame=Math.floor((nextFrame-1)%this.__totalFrames)+1}this.__timeElapsed%=this.__frameTime;return nextFrame},__goto:function(frame){if(this.__symbol==null){return}if(frame<1){frame=1}else if(frame>this.__totalFrames){frame=this.__totalFrames}this.__currentFrame=frame;this.enterFrame(0)},__resolveFrameReference:function(frame){if(typeof frame=="number"&&(frame|0)===frame){return frame}else if(typeof frame=="string"){var label=frame;var _g=0;var _g1=this.__currentLabels;while(_g<_g1.length){var frameLabel=_g1[_g];++_g;if(frameLabel.get_name()==label){return frameLabel.get_frame()}}throw new js__$Boot_HaxeError(new openfl_errors_ArgumentError("Error #2109: Frame label "+label+" not found in scene."))}else{throw new js__$Boot_HaxeError("Invalid type for frame "+frame.__name__)}},__sortDepths:function(a,b){return a.depth-b.depth},__updateDisplayObject:function(displayObject,frameObject,reset){if(reset==null){reset=false}if(displayObject==null){return}if(frameObject.name!=null){displayObject.set_name(frameObject.name)}if(frameObject.matrix!=null){displayObject.get_transform().set_matrix(frameObject.matrix)}if(frameObject.colorTransform!=null){displayObject.get_transform().set_colorTransform(frameObject.colorTransform)}else if(reset&&!displayObject.get_transform().get_colorTransform().__isDefault(true)){displayObject.get_transform().set_colorTransform(new openfl_geom_ColorTransform)}displayObject.set_transform(displayObject.get_transform());if(frameObject.filters!=null){var filters=[];var _g=0;var _g1=frameObject.filters;while(_g<_g1.length){var filter=_g1[_g];++_g;switch(filter._hx_index){case 0:filters.push(new openfl_filters_BlurFilter(filter.blurX,filter.blurY,filter.quality));break;case 1:filters.push(new openfl_filters_ColorMatrixFilter(filter.matrix));break;case 2:filters.push(new openfl_filters_DropShadowFilter(filter.distance,filter.angle,filter.color,filter.alpha,filter.blurX,filter.blurY,filter.strength,filter.quality,filter.inner,filter.knockout,filter.hideObject));break;case 3:filters.push(new openfl_filters_GlowFilter(filter.color,filter.alpha,filter.blurX,filter.blurY,filter.strength,filter.quality,filter.inner,filter.knockout));break}}displayObject.set_filters(filters)}else{displayObject.set_filters(null)}if(frameObject.visible!=null){displayObject.set_visible(frameObject.visible)}if(frameObject.blendMode!=null){displayObject.set_blendMode(frameObject.blendMode)}if(frameObject.cacheAsBitmap!=null){displayObject.set_cacheAsBitmap(frameObject.cacheAsBitmap)}},__updateFrameLabel:function(){this.__currentFrameLabel=this.__symbol.frames[this.__currentFrame-1].label;if(this.__currentFrameLabel!=null){this.__currentLabel=this.__currentFrameLabel}else{this.__currentLabel=null;var _g=0;var _g1=this.__currentLabels;while(_g<_g1.length){var label=_g1[_g];++_g;if(label.get_frame()<this.__currentFrame){this.__currentLabel=label.get_name()}else{break}}}},__updateInstanceFields:function(){var _g=0;var _g1=this.__instanceFields;while(_g<_g1.length){var field=_g1[_g];++_g;var length=this.__movieClip.__children.length;var _g2=0;while(_g2<length){var child=this.__movieClip.__children[_g2++];if(child.get_name()==field){this.__movieClip[field]=child;break}}}},__class__:openfl__$internal_formats_animate_AnimateTimeline};var openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance=function(initFrame,initFrameObjectID,characterID,depth,displayObject,clipDepth){this.initFrame=initFrame;this.initFrameObjectID=initFrameObjectID;this.characterID=characterID;this.depth=depth;this.displayObject=displayObject;this.clipDepth=clipDepth};$hxClasses["openfl._internal.formats.animate._AnimateTimeline.FrameSymbolInstance"]=openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance;openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance.__name__="openfl._internal.formats.animate._AnimateTimeline.FrameSymbolInstance";openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance.prototype={characterID:null,clipDepth:null,depth:null,displayObject:null,initFrame:null,initFrameObjectID:null,__class__:openfl__$internal_formats_animate__$AnimateTimeline_FrameSymbolInstance};var openfl__$internal_formats_html_HTMLParser=function(){};$hxClasses["openfl._internal.formats.html.HTMLParser"]=openfl__$internal_formats_html_HTMLParser;openfl__$internal_formats_html_HTMLParser.__name__="openfl._internal.formats.html.HTMLParser";openfl__$internal_formats_html_HTMLParser.parse=function(value,textFormat,textFormatRanges){value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexBreakTag.r,"\n");value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[0].r,'"');value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[1].r,"'");value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[2].r,"&");value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[5].r," ");var segments=value.split("<");if(segments.length==1){value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexHTMLTag.r,"");if(textFormatRanges.get_length()>1){textFormatRanges.splice(1,textFormatRanges.get_length()-1)}value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[3].r,"<");value=value.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[4].r,">");var range=textFormatRanges.get(0);range.format=textFormat;range.start=0;range.end=value.length;return value}else{textFormatRanges.splice(0,textFormatRanges.get_length());value="";var segment;var _g=0;var _g1=segments.length;while(_g<_g1){var i=_g++;segment=segments[i];segment=segment.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[3].r,"<");segment=segment.replace(openfl__$internal_formats_html_HTMLParser.__regexEntities[4].r,">");segments[i]=segment}var formatStack=[textFormat.clone()];var tagStack=[];var sub;var noLineBreak=false;var _g2=0;while(_g2<segments.length){var segment1=segments[_g2];++_g2;if(segment1==""){continue}var isClosingTag=HxOverrides.substr(segment1,0,1)=="/";var tagEndIndex=segment1.indexOf(">");var start=tagEndIndex+1;var spaceIndex=segment1.indexOf(" ");var tagName=segment1.substring(isClosingTag?1:0,spaceIndex>-1&&spaceIndex<tagEndIndex?spaceIndex:tagEndIndex);var format;if(isClosingTag){if(tagStack.length==0||tagName.toLowerCase()!=tagStack[tagStack.length-1].toLowerCase()){lime_utils_Log.info("Invalid HTML, unexpected closing tag ignored: "+tagName,{fileName:"openfl/_internal/formats/html/HTMLParser.hx",lineNumber:97,className:"openfl._internal.formats.html.HTMLParser",methodName:"parse"});continue}tagStack.pop();formatStack.pop();format=formatStack[formatStack.length-1].clone();if(tagName.toLowerCase()=="p"&&textFormatRanges.get_length()>0){value+="\n";noLineBreak=true;var tmp=textFormatRanges.get(textFormatRanges.get_length()-1);tmp.end++}if(start<segment1.length){sub=HxOverrides.substr(segment1,start,null);textFormatRanges.push(new openfl__$internal_text_TextFormatRange(format,value.length,value.length+sub.length));value+=sub;noLineBreak=false}}else{format=formatStack[formatStack.length-1].clone();if(tagEndIndex>-1){switch(tagName.toLowerCase()){case"a":if(openfl__$internal_formats_html_HTMLParser.__regexHref.match(segment1)){format.url=openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexHref)}break;case"b":format.bold=true;break;case"em":case"i":format.italic=true;break;case"font":if(openfl__$internal_formats_html_HTMLParser.__regexFace.match(segment1)){format.font=openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexFace)}if(openfl__$internal_formats_html_HTMLParser.__regexColor.match(segment1)){format.color=Std.parseInt("0x"+openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexColor))}if(openfl__$internal_formats_html_HTMLParser.__regexSize.match(segment1)){var sizeAttr=openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexSize);var firstChar=HxOverrides.cca(sizeAttr,0);if(firstChar==43||firstChar==45){format.size=(formatStack.length>=2?formatStack[formatStack.length-2]:textFormat).size+Std.parseInt(sizeAttr)}else{format.size=Std.parseInt(sizeAttr)}}break;case"p":if(textFormatRanges.get_length()>0&&!noLineBreak){value+="\n"}if(openfl__$internal_formats_html_HTMLParser.__regexAlign.match(segment1)){format.align=openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.fromString(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexAlign).toLowerCase())}break;case"textformat":if(openfl__$internal_formats_html_HTMLParser.__regexBlockIndent.match(segment1)){format.blockIndent=Std.parseInt(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexBlockIndent))}if(openfl__$internal_formats_html_HTMLParser.__regexIndent.match(segment1)){format.indent=Std.parseInt(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexIndent))}if(openfl__$internal_formats_html_HTMLParser.__regexLeading.match(segment1)){format.leading=Std.parseInt(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexLeading))}if(openfl__$internal_formats_html_HTMLParser.__regexLeftMargin.match(segment1)){format.leftMargin=Std.parseInt(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexLeftMargin))}if(openfl__$internal_formats_html_HTMLParser.__regexRightMargin.match(segment1)){format.rightMargin=Std.parseInt(openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexRightMargin))}if(openfl__$internal_formats_html_HTMLParser.__regexTabStops.match(segment1)){var values=openfl__$internal_formats_html_HTMLParser.__getAttributeMatch(openfl__$internal_formats_html_HTMLParser.__regexTabStops).split(" ");var tabStops=[];var _g21=0;while(_g21<values.length)tabStops.push(Std.parseInt(values[_g21++]));format.tabStops=tabStops}break;case"u":format.underline=true;break}formatStack.push(format);tagStack.push(tagName);if(start<segment1.length){sub=segment1.substring(start);textFormatRanges.push(new openfl__$internal_text_TextFormatRange(format,value.length,value.length+sub.length));value+=sub;noLineBreak=false}}else{textFormatRanges.push(new openfl__$internal_text_TextFormatRange(format,value.length,value.length+segment1.length));value+=segment1;noLineBreak=false}}}if(textFormatRanges.get_length()==0){textFormatRanges.push(new openfl__$internal_text_TextFormatRange(formatStack[0],0,0))}}return value};openfl__$internal_formats_html_HTMLParser.__getAttributeMatch=function(regex){if(regex.matched(2)!=null){return regex.matched(2)}else{return regex.matched(3)}};var openfl__$internal_formats_swf_FilterType=$hxEnums["openfl._internal.formats.swf.FilterType"]={__ename__:"openfl._internal.formats.swf.FilterType",__constructs__:["BlurFilter","ColorMatrixFilter","DropShadowFilter","GlowFilter"],BlurFilter:($_=function(blurX,blurY,quality){return{_hx_index:0,blurX:blurX,blurY:blurY,quality:quality,__enum__:"openfl._internal.formats.swf.FilterType",toString:$estr}},$_.__params__=["blurX","blurY","quality"],$_),ColorMatrixFilter:($_=function(matrix){return{_hx_index:1,matrix:matrix,__enum__:"openfl._internal.formats.swf.FilterType",toString:$estr}},$_.__params__=["matrix"],$_),DropShadowFilter:($_=function(distance,angle,color,alpha,blurX,blurY,strength,quality,inner,knockout,hideObject){return{_hx_index:2,distance:distance,angle:angle,color:color,alpha:alpha,blurX:blurX,blurY:blurY,strength:strength,quality:quality,inner:inner,knockout:knockout,hideObject:hideObject,__enum__:"openfl._internal.formats.swf.FilterType",toString:$estr}},$_.__params__=["distance","angle","color","alpha","blurX","blurY","strength","quality","inner","knockout","hideObject"],$_),GlowFilter:($_=function(color,alpha,blurX,blurY,strength,quality,inner,knockout){return{_hx_index:3,color:color,alpha:alpha,blurX:blurX,blurY:blurY,strength:strength,quality:quality,inner:inner,knockout:knockout,__enum__:"openfl._internal.formats.swf.FilterType",toString:$estr}},$_.__params__=["color","alpha","blurX","blurY","strength","quality","inner","knockout"],$_)};var openfl__$internal_formats_swf_SWFLite=function(){this.symbols=new haxe_ds_IntMap;this.symbolsByClassName=new haxe_ds_StringMap};$hxClasses["openfl._internal.formats.swf.SWFLite"]=openfl__$internal_formats_swf_SWFLite;openfl__$internal_formats_swf_SWFLite.__name__="openfl._internal.formats.swf.SWFLite";openfl__$internal_formats_swf_SWFLite.resolveClass=function(name){var value=$hxClasses[name];if(value==null){var name1=StringTools.replace(name,"openfl._legacy","openfl");value=$hxClasses[name1]}if(value==null){var name2=StringTools.replace(name,"openfl._v2","openfl");value=$hxClasses[name2]}return value};openfl__$internal_formats_swf_SWFLite.resolveEnum=function(name){var value=$hxEnums[name];if(value==null){var name1=StringTools.replace(name,"openfl._legacy","openfl");value=$hxEnums[name1]}if(value==null){var name2=StringTools.replace(name,"openfl._v2","openfl");value=$hxEnums[name2]}return value};openfl__$internal_formats_swf_SWFLite.unserialize=function(data){if(data==null){return null}var unserializer=new haxe_Unserializer(data);unserializer.setResolver({resolveClass:openfl__$internal_formats_swf_SWFLite.resolveClass,resolveEnum:openfl__$internal_formats_swf_SWFLite.resolveEnum});var swfLite=unserializer.unserialize();if(swfLite!=null){swfLite.__init()}return swfLite};openfl__$internal_formats_swf_SWFLite.prototype={frameRate:null,library:null,root:null,symbols:null,symbolsByClassName:null,createButton:function(className){return null},createMovieClip:function(className){if(className==null){className=""}if(className==""){return this.root.__createObject(this)}else{var _this=this.symbolsByClassName;var symbol=__map_reserved[className]!=null?_this.getReserved(className):_this.h[className];if(symbol!=null){if(symbol instanceof openfl__$internal_symbols_SpriteSymbol){return js_Boot.__cast(symbol,openfl__$internal_symbols_SpriteSymbol).__createObject(this)}}}return null},getBitmapData:function(className){var _this=this.symbolsByClassName;var symbol=__map_reserved[className]!=null?_this.getReserved(className):_this.h[className];if(symbol!=null){if(symbol instanceof openfl__$internal_symbols_BitmapSymbol){return openfl_utils_Assets.getBitmapData(symbol.path)}}return null},hasSymbol:function(className){var _this=this.symbolsByClassName;if(__map_reserved[className]!=null){return _this.existsReserved(className)}else{return _this.h.hasOwnProperty(className)}},serialize:function(){var serializer=new haxe_Serializer;serializer.serialize(this);return serializer.toString()},__init:function(){if(this.symbols==null){return}if(this.symbolsByClassName==null){this.symbolsByClassName=new haxe_ds_StringMap}var symbol=this.symbols.iterator();while(symbol.hasNext()){var symbol1=symbol.next();if(symbol1==null||symbol1.className==null){continue}var key=symbol1.className;var _this=this.symbolsByClassName;if(__map_reserved[key]!=null){_this.setReserved(key,symbol1)}else{_this.h[key]=symbol1}}},__class__:openfl__$internal_formats_swf_SWFLite};var openfl__$internal_formats_swf_SWFLiteLibrary=function(id,uuid){openfl_utils_AssetLibrary.call(this);this.id=id;this.instanceID=uuid!=null?uuid:id;this.alphaCheck=new haxe_ds_StringMap;this.imageClassNames=new haxe_ds_StringMap;this.rootPath=""};$hxClasses["openfl._internal.formats.swf.SWFLiteLibrary"]=openfl__$internal_formats_swf_SWFLiteLibrary;openfl__$internal_formats_swf_SWFLiteLibrary.__name__="openfl._internal.formats.swf.SWFLiteLibrary";openfl__$internal_formats_swf_SWFLiteLibrary.__super__=openfl_utils_AssetLibrary;openfl__$internal_formats_swf_SWFLiteLibrary.prototype=$extend(openfl_utils_AssetLibrary.prototype,{alphaCheck:null,id:null,imageClassNames:null,instanceID:null,preloading:null,rootPath:null,swf:null,exists:function(id,type){if(this.swf==null){return false}if(id==""&&type=="MOVIE_CLIP"){return true}if(type=="IMAGE"||type=="MOVIE_CLIP"){if(this.swf!=null){return this.swf.hasSymbol(id)}else{return false}}return false},getImage:function(id){var _this=this.imageClassNames;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.imageClassNames;id=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]}var _this2=this.alphaCheck;if(!(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id))){var symbol=this.swf.symbols.iterator();while(symbol.hasNext()){var symbol1=symbol.next();if(symbol1 instanceof openfl__$internal_symbols_BitmapSymbol&&js_Boot.__cast(symbol1,openfl__$internal_symbols_BitmapSymbol).path==id){var bitmapSymbol=symbol1;if(bitmapSymbol.alpha!=null){var image=openfl_utils_AssetLibrary.prototype.getImage.call(this,id);this.__copyChannel(image,openfl_utils_AssetLibrary.prototype.getImage.call(this,bitmapSymbol.alpha));var _this3=this.cachedImages;if(__map_reserved[id]!=null){_this3.setReserved(id,image)}else{_this3.h[id]=image}this.cachedImages.remove(bitmapSymbol.alpha);var _this4=this.alphaCheck;if(__map_reserved[id]!=null){_this4.setReserved(id,true)}else{_this4.h[id]=true}return image}}}var _this5=this.alphaCheck;if(__map_reserved[id]!=null){_this5.setReserved(id,true)}else{_this5.h[id]=true}}return openfl_utils_AssetLibrary.prototype.getImage.call(this,id)},getMovieClip:function(id){if(this.swf!=null){return this.swf.createMovieClip(id)}else{return null}},isLocal:function(id,type){return true},load:function(){var _gthis=this;if(this.id!=null){var key=this.id;var _this=this.preload;if(__map_reserved[key]!=null){_this.setReserved(key,true)}else{_this.h[key]=true}}var promise=new lime_app_Promise;this.preloading=true;var onComplete=function(data){var key1=_gthis.id;var _this1=_gthis.cachedText;if(__map_reserved[key1]!=null){_this1.setReserved(key1,data)}else{_this1.h[key1]=data}_gthis.swf=openfl__$internal_formats_swf_SWFLite.unserialize(data);_gthis.swf.library=_gthis;var bitmapSymbol;var symbol=_gthis.swf.symbols.iterator();while(symbol.hasNext()){var symbol1=symbol.next();if(symbol1 instanceof openfl__$internal_symbols_BitmapSymbol){bitmapSymbol=symbol1;if(bitmapSymbol.className!=null){var key2=bitmapSymbol.className;var value=bitmapSymbol.path;var _this2=_gthis.imageClassNames;if(__map_reserved[key2]!=null){_this2.setReserved(key2,value)}else{_this2.h[key2]=value}}}}var key3=_gthis.instanceID;var value1=_gthis.swf;var _this3=openfl__$internal_formats_swf_SWFLite.instances;if(__map_reserved[key3]!=null){_this3.setReserved(key3,value1)}else{_this3.h[key3]=value1}_gthis.__load().onProgress($bind(promise,promise.progress)).onError($bind(promise,promise.error)).onComplete(function(_){_gthis.preloading=false;promise.complete(_gthis)})};if(openfl_utils_Assets.exists(this.id)){var id=this.paths.keys();while(id.hasNext()){var id1=id.next();var _this4=this.preload;if(__map_reserved[id1]!=null){_this4.setReserved(id1,true)}else{_this4.h[id1]=true}}this.loadText(this.id).onError($bind(promise,promise.error)).onComplete(onComplete)}else{var id2=this.paths.keys();while(id2.hasNext()){var id3=id2.next();var _this5=this.preload;if(__map_reserved[id3]!=null){_this5.setReserved(id3,true)}else{_this5.h[id3]=true}}var path=null;var key4=this.id;var _this6=this.paths;if(__map_reserved[key4]!=null?_this6.existsReserved(key4):_this6.h.hasOwnProperty(key4)){var key5=this.id;var _this7=this.paths;path=__map_reserved[key5]!=null?_this7.getReserved(key5):_this7.h[key5]}else{path=this.rootPath!=null&&this.rootPath!=""?this.rootPath+"/"+this.id:this.id}var loader=new openfl_net_URLLoader;loader.addEventListener("complete",function(_1){onComplete(loader.data)});loader.addEventListener("ioError",function(e){promise.error(e)});loader.load(new openfl_net_URLRequest(path))}return promise.future},loadImage:function(id){var _gthis=this;var _this=this.imageClassNames;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.imageClassNames;id=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]}var tmp;if(!this.preloading){var _this2=this.alphaCheck;tmp=!(__map_reserved[id]!=null?_this2.existsReserved(id):_this2.h.hasOwnProperty(id))}else{tmp=false}if(tmp){var symbol=this.swf.symbols.iterator();while(symbol.hasNext()){var symbol1=symbol.next();if(symbol1 instanceof openfl__$internal_symbols_BitmapSymbol&&js_Boot.__cast(symbol1,openfl__$internal_symbols_BitmapSymbol).path==id){var bitmapSymbol=[symbol1];if(bitmapSymbol[0].alpha!=null){var promise=[new lime_app_Promise];this.__loadImage(id).onError(($_=promise[0],$bind($_,$_.error))).onComplete(function(promise1,bitmapSymbol1){return function(image){_gthis.__loadImage(bitmapSymbol1[0].alpha).onError(($_=promise1[0],$bind($_,$_.error))).onComplete(function(promise2,bitmapSymbol2){return function(alpha){_gthis.__copyChannel(image,alpha);var _this3=_gthis.cachedImages;if(__map_reserved[id]!=null){_this3.setReserved(id,image)}else{_this3.h[id]=image}_gthis.cachedImages.remove(bitmapSymbol2[0].alpha);var _this4=_gthis.alphaCheck;if(__map_reserved[id]!=null){_this4.setReserved(id,true)}else{_this4.h[id]=true}promise2[0].complete(image)}}(promise1,bitmapSymbol1))}}(promise,bitmapSymbol));return promise[0].future}else{var _this5=this.alphaCheck;if(__map_reserved[id]!=null){_this5.setReserved(id,true)}else{_this5.h[id]=true}}}}}return openfl_utils_AssetLibrary.prototype.loadImage.call(this,id)},unload:function(){if(this.swf==null){return}var tmp;var key=this.instanceID;var _this=openfl__$internal_formats_swf_SWFLite.instances;if(__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key)){var key1=this.instanceID;var _this1=openfl__$internal_formats_swf_SWFLite.instances;tmp=(__map_reserved[key1]!=null?_this1.getReserved(key1):_this1.h[key1])==this.swf}else{tmp=false}if(tmp){openfl__$internal_formats_swf_SWFLite.instances.remove(this.instanceID)}var bitmap;var symbol=this.swf.symbols.iterator();while(symbol.hasNext()){var symbol1=symbol.next();if(symbol1 instanceof openfl__$internal_symbols_BitmapSymbol){bitmap=symbol1;openfl_utils_Assets.cache.removeBitmapData(bitmap.path)}}},__copyChannel:function(image,alpha){if(alpha!=null){image.copyChannel(alpha,alpha.get_rect(),new lime_math_Vector2,lime_graphics_ImageChannel.RED,lime_graphics_ImageChannel.ALPHA)}image.buffer.premultiplied=true;image.set_premultiplied(false)},__fromManifest:function(manifest){this.rootPath=manifest.rootPath;openfl_utils_AssetLibrary.prototype.__fromManifest.call(this,manifest);this.bytesTotal=0;var id=this.paths.keys();while(id.hasNext()){var id1=id.next();var _this=this.sizes;this.bytesTotal+=__map_reserved[id1]!=null?_this.getReserved(id1):_this.h[id1]}},__load:function(){return openfl_utils_AssetLibrary.prototype.load.call(this)},__loadImage:function(id){return openfl_utils_AssetLibrary.prototype.loadImage.call(this,id)},__class__:openfl__$internal_formats_swf_SWFLiteLibrary});var openfl__$internal_formats_swf_ShapeCommand=$hxEnums["openfl._internal.formats.swf.ShapeCommand"]={__ename__:"openfl._internal.formats.swf.ShapeCommand",__constructs__:["BeginBitmapFill","BeginFill","BeginGradientFill","CurveTo","EndFill","LineStyle","LineTo","MoveTo"],BeginBitmapFill:($_=function(bitmap,matrix,repeat,smooth){return{_hx_index:0,bitmap:bitmap,matrix:matrix,repeat:repeat,smooth:smooth,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["bitmap","matrix","repeat","smooth"],$_),BeginFill:($_=function(color,alpha){return{_hx_index:1,color:color,alpha:alpha,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["color","alpha"],$_),BeginGradientFill:($_=function(fillType,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){return{_hx_index:2,fillType:fillType,colors:colors,alphas:alphas,ratios:ratios,matrix:matrix,spreadMethod:spreadMethod,interpolationMethod:interpolationMethod,focalPointRatio:focalPointRatio,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["fillType","colors","alphas","ratios","matrix","spreadMethod","interpolationMethod","focalPointRatio"],$_),CurveTo:($_=function(controlX,controlY,anchorX,anchorY){return{_hx_index:3,controlX:controlX,controlY:controlY,anchorX:anchorX,anchorY:anchorY,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["controlX","controlY","anchorX","anchorY"],$_),EndFill:{_hx_index:4,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr},LineStyle:($_=function(thickness,color,alpha,pixelHinting,scaleMode,caps,joints,miterLimit){return{_hx_index:5,thickness:thickness,color:color,alpha:alpha,pixelHinting:pixelHinting,scaleMode:scaleMode,caps:caps,joints:joints,miterLimit:miterLimit,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["thickness","color","alpha","pixelHinting","scaleMode","caps","joints","miterLimit"],$_),LineTo:($_=function(x,y){return{_hx_index:6,x:x,y:y,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["x","y"],$_),MoveTo:($_=function(x,y){return{_hx_index:7,x:x,y:y,__enum__:"openfl._internal.formats.swf.ShapeCommand",toString:$estr}},$_.__params__=["x","y"],$_)};var openfl__$internal_renderer_DisplayObjectType=$hxEnums["openfl._internal.renderer.DisplayObjectType"]={__ename__:"openfl._internal.renderer.DisplayObjectType",__constructs__:["BITMAP","DISPLAY_OBJECT","DISPLAY_OBJECT_CONTAINER","DOM_ELEMENT","SHAPE","SIMPLE_BUTTON","TEXTFIELD","TILEMAP","VIDEO"],BITMAP:{_hx_index:0,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},DISPLAY_OBJECT:{_hx_index:1,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},DISPLAY_OBJECT_CONTAINER:{_hx_index:2,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},DOM_ELEMENT:{_hx_index:3,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},SHAPE:{_hx_index:4,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},SIMPLE_BUTTON:{_hx_index:5,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},TEXTFIELD:{_hx_index:6,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},TILEMAP:{_hx_index:7,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr},VIDEO:{_hx_index:8,__enum__:"openfl._internal.renderer.DisplayObjectType",toString:$estr}};var openfl__$internal_renderer_DrawCommandBuffer=function(){if(openfl__$internal_renderer_DrawCommandBuffer.empty==null){this.types=[];this.b=[];this.i=[];this.f=[];this.o=[];this.ff=[];this.ii=[];this.copyOnWrite=true}else{this.clear()}};$hxClasses["openfl._internal.renderer.DrawCommandBuffer"]=openfl__$internal_renderer_DrawCommandBuffer;openfl__$internal_renderer_DrawCommandBuffer.__name__="openfl._internal.renderer.DrawCommandBuffer";openfl__$internal_renderer_DrawCommandBuffer.prototype={types:null,b:null,copyOnWrite:null,f:null,ff:null,i:null,ii:null,o:null,append:function(other){if(this.get_length()==0){this.types=other.types;this.b=other.b;this.i=other.i;this.f=other.f;this.o=other.o;this.ff=other.ff;this.ii=other.ii;this.copyOnWrite=other.copyOnWrite=true;return other}var data=new openfl__$internal_renderer_DrawCommandReader(other);var _g=0;var _g1=other.types;while(_g<_g1.length)switch(_g1[_g++]._hx_index){case 0:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;this.beginBitmapFill(c.buffer.o[c.oPos],c.buffer.o[c.oPos+1],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1]);break;case 1:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_FILL;var c1=data;this.beginFill(c1.buffer.i[c1.iPos],c1.buffer.f[c1.fPos]);break;case 2:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL;var c2=data;this.beginGradientFill(c2.buffer.o[c2.oPos],c2.buffer.ii[c2.iiPos],c2.buffer.ff[c2.ffPos],c2.buffer.ii[c2.iiPos+1],c2.buffer.o[c2.oPos+1],c2.buffer.o[c2.oPos+2],c2.buffer.o[c2.oPos+3],c2.buffer.f[c2.fPos]);break;case 3:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c3=data;this.beginShaderFill(c3.buffer.o[c3.oPos]);break;case 4:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO;var c4=data;this.cubicCurveTo(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3],c4.buffer.f[c4.fPos+4],c4.buffer.f[c4.fPos+5]);break;case 5:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CURVE_TO;var c5=data;this.curveTo(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3]);break;case 6:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE;var c6=data;this.drawCircle(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1],c6.buffer.f[c6.fPos+2]);break;case 7:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE;var c7=data;this.drawEllipse(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1],c7.buffer.f[c7.fPos+2],c7.buffer.f[c7.fPos+3]);break;case 8:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_QUADS;var c8=data;this.drawQuads(c8.buffer.o[c8.oPos],c8.buffer.o[c8.oPos+1],c8.buffer.o[c8.oPos+2]);break;case 9:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c9=data;this.drawRect(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1],c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3]);break;case 10:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT;var c10=data;this.drawRoundRect(c10.buffer.f[c10.fPos],c10.buffer.f[c10.fPos+1],c10.buffer.f[c10.fPos+2],c10.buffer.f[c10.fPos+3],c10.buffer.f[c10.fPos+4],c10.buffer.o[c10.oPos]);break;case 12:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES;var c11=data;this.drawTriangles(c11.buffer.o[c11.oPos],c11.buffer.o[c11.oPos+1],c11.buffer.o[c11.oPos+2],c11.buffer.o[c11.oPos+3]);break;case 13:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.END_FILL;this.endFill();break;case 14:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_BITMAP_STYLE;var c12=data;this.lineBitmapStyle(c12.buffer.o[c12.oPos],c12.buffer.o[c12.oPos+1],c12.buffer.b[c12.bPos],c12.buffer.b[c12.bPos+1]);break;case 15:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_GRADIENT_STYLE;var c13=data;this.lineGradientStyle(c13.buffer.o[c13.oPos],c13.buffer.ii[c13.iiPos],c13.buffer.ff[c13.ffPos],c13.buffer.ii[c13.iiPos+1],c13.buffer.o[c13.oPos+1],c13.buffer.o[c13.oPos+2],c13.buffer.o[c13.oPos+3],c13.buffer.f[c13.fPos]);break;case 16:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_STYLE;var c14=data;this.lineStyle(c14.buffer.o[c14.oPos],c14.buffer.i[c14.iPos],c14.buffer.f[c14.fPos],c14.buffer.b[c14.bPos],c14.buffer.o[c14.oPos+1],c14.buffer.o[c14.oPos+2],c14.buffer.o[c14.oPos+3],c14.buffer.f[c14.fPos+1]);break;case 17:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_TO;var c15=data;this.lineTo(c15.buffer.f[c15.fPos],c15.buffer.f[c15.fPos+1]);break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;var c16=data;this.moveTo(c16.buffer.f[c16.fPos],c16.buffer.f[c16.fPos+1]);break;case 20:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.OVERRIDE_MATRIX;var c17=data;this.overrideMatrix(c17.buffer.o[c17.oPos]);break;case 21:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.WINDING_EVEN_ODD;this.windingEvenOdd();break;case 22:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.WINDING_NON_ZERO;this.windingNonZero();break;default:}data.destroy();return other},beginBitmapFill:function(bitmap,matrix,repeat,smooth){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL);this.o.push(bitmap);this.o.push(matrix);this.b.push(repeat);this.b.push(smooth)},beginFill:function(color,alpha){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.BEGIN_FILL);this.i.push(color);this.f.push(alpha)},beginGradientFill:function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL);this.o.push(type);this.ii.push(colors);this.ff.push(alphas);this.ii.push(ratios);this.o.push(matrix);this.o.push(spreadMethod);this.o.push(interpolationMethod);this.f.push(focalPointRatio)},beginShaderFill:function(shaderBuffer){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL);this.o.push(shaderBuffer)},clear:function(){this.types=openfl__$internal_renderer_DrawCommandBuffer.empty.types;this.b=openfl__$internal_renderer_DrawCommandBuffer.empty.b;this.i=openfl__$internal_renderer_DrawCommandBuffer.empty.i;this.f=openfl__$internal_renderer_DrawCommandBuffer.empty.f;this.o=openfl__$internal_renderer_DrawCommandBuffer.empty.o;this.ff=openfl__$internal_renderer_DrawCommandBuffer.empty.ff;this.ii=openfl__$internal_renderer_DrawCommandBuffer.empty.ii;this.copyOnWrite=true},copy:function(){var copy=new openfl__$internal_renderer_DrawCommandBuffer;copy.append(this);return copy},cubicCurveTo:function(controlX1,controlY1,controlX2,controlY2,anchorX,anchorY){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO);this.f.push(controlX1);this.f.push(controlY1);this.f.push(controlX2);this.f.push(controlY2);this.f.push(anchorX);this.f.push(anchorY)},curveTo:function(controlX,controlY,anchorX,anchorY){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.CURVE_TO);this.f.push(controlX);this.f.push(controlY);this.f.push(anchorX);this.f.push(anchorY)},drawCircle:function(x,y,radius){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE);this.f.push(x);this.f.push(y);this.f.push(radius)},drawEllipse:function(x,y,width,height){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE);this.f.push(x);this.f.push(y);this.f.push(width);this.f.push(height)},drawQuads:function(rects,indices,transforms){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_QUADS);this.o.push(rects);this.o.push(indices);this.o.push(transforms)},drawRect:function(x,y,width,height){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_RECT);this.f.push(x);this.f.push(y);this.f.push(width);this.f.push(height)},drawRoundRect:function(x,y,width,height,ellipseWidth,ellipseHeight){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT);this.f.push(x);this.f.push(y);this.f.push(width);this.f.push(height);this.f.push(ellipseWidth);this.o.push(ellipseHeight)},drawTriangles:function(vertices,indices,uvtData,culling){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES);this.o.push(vertices);this.o.push(indices);this.o.push(uvtData);this.o.push(culling)},endFill:function(){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.END_FILL)},lineBitmapStyle:function(bitmap,matrix,repeat,smooth){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.LINE_BITMAP_STYLE);this.o.push(bitmap);this.o.push(matrix);this.b.push(repeat);this.b.push(smooth)},lineGradientStyle:function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.LINE_GRADIENT_STYLE);this.o.push(type);this.ii.push(colors);this.ff.push(alphas);this.ii.push(ratios);this.o.push(matrix);this.o.push(spreadMethod);this.o.push(interpolationMethod);this.f.push(focalPointRatio)},lineStyle:function(thickness,color,alpha,pixelHinting,scaleMode,caps,joints,miterLimit){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.LINE_STYLE);this.o.push(thickness);this.i.push(color);this.f.push(alpha);this.b.push(pixelHinting);this.o.push(scaleMode);this.o.push(caps);this.o.push(joints);this.f.push(miterLimit)},lineTo:function(x,y){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.LINE_TO);this.f.push(x);this.f.push(y)},moveTo:function(x,y){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.MOVE_TO);this.f.push(x);this.f.push(y)},prepareWrite:function(){if(this.copyOnWrite){this.types=this.types.slice();this.b=this.b.slice();this.i=this.i.slice();this.f=this.f.slice();this.o=this.o.slice();this.ff=this.ff.slice();this.ii=this.ii.slice();this.copyOnWrite=false}},overrideMatrix:function(matrix){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.OVERRIDE_MATRIX);this.o.push(matrix)},windingEvenOdd:function(){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.WINDING_EVEN_ODD)},windingNonZero:function(){this.prepareWrite();this.types.push(openfl__$internal_renderer_DrawCommandType.WINDING_NON_ZERO)},get_length:function(){return this.types.length},__class__:openfl__$internal_renderer_DrawCommandBuffer,__properties__:{get_length:"get_length"}};var openfl__$internal_renderer_DrawCommandReader=function(buffer){this.buffer=buffer;this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0;this.prev=openfl__$internal_renderer_DrawCommandType.UNKNOWN};$hxClasses["openfl._internal.renderer.DrawCommandReader"]=openfl__$internal_renderer_DrawCommandReader;openfl__$internal_renderer_DrawCommandReader.__name__="openfl._internal.renderer.DrawCommandReader";openfl__$internal_renderer_DrawCommandReader.prototype={buffer:null,bPos:null,iiPos:null,iPos:null,ffPos:null,fPos:null,oPos:null,prev:null,tsPos:null,destroy:function(){this.buffer=null;this.reset()},reset:function(){this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0},__class__:openfl__$internal_renderer_DrawCommandReader};var openfl__$internal_renderer_DrawCommandType=$hxEnums["openfl._internal.renderer.DrawCommandType"]={__ename__:"openfl._internal.renderer.DrawCommandType",__constructs__:["BEGIN_BITMAP_FILL","BEGIN_FILL","BEGIN_GRADIENT_FILL","BEGIN_SHADER_FILL","CUBIC_CURVE_TO","CURVE_TO","DRAW_CIRCLE","DRAW_ELLIPSE","DRAW_QUADS","DRAW_RECT","DRAW_ROUND_RECT","DRAW_TILES","DRAW_TRIANGLES","END_FILL","LINE_BITMAP_STYLE","LINE_GRADIENT_STYLE","LINE_STYLE","LINE_TO","MOVE_TO","OVERRIDE_BLEND_MODE","OVERRIDE_MATRIX","WINDING_EVEN_ODD","WINDING_NON_ZERO","UNKNOWN"],BEGIN_BITMAP_FILL:{_hx_index:0,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},BEGIN_FILL:{_hx_index:1,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},BEGIN_GRADIENT_FILL:{_hx_index:2,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},BEGIN_SHADER_FILL:{_hx_index:3,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},CUBIC_CURVE_TO:{_hx_index:4,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},CURVE_TO:{_hx_index:5,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_CIRCLE:{_hx_index:6,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_ELLIPSE:{_hx_index:7,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_QUADS:{_hx_index:8,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_RECT:{_hx_index:9,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_ROUND_RECT:{_hx_index:10,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_TILES:{_hx_index:11,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},DRAW_TRIANGLES:{_hx_index:12,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},END_FILL:{_hx_index:13,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},LINE_BITMAP_STYLE:{_hx_index:14,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},LINE_GRADIENT_STYLE:{_hx_index:15,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},LINE_STYLE:{_hx_index:16,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},LINE_TO:{_hx_index:17,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},MOVE_TO:{_hx_index:18,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},OVERRIDE_BLEND_MODE:{_hx_index:19,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},OVERRIDE_MATRIX:{_hx_index:20,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},WINDING_EVEN_ODD:{_hx_index:21,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},WINDING_NON_ZERO:{_hx_index:22,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr},UNKNOWN:{_hx_index:23,__enum__:"openfl._internal.renderer.DrawCommandType",toString:$estr}};var openfl__$internal_renderer_SamplerState=function(wrap,filter,mipfilter,lodBias,ignoreSampler,centroid,textureAlpha){if(textureAlpha==null){textureAlpha=false}if(centroid==null){centroid=false}if(ignoreSampler==null){ignoreSampler=false}if(lodBias==null){lodBias=0}if(mipfilter==null){mipfilter=2}if(filter==null){filter=5}if(wrap==null){wrap=0}this.wrap=wrap;this.filter=filter;this.mipfilter=mipfilter;this.lodBias=lodBias;this.ignoreSampler=ignoreSampler;this.centroid=centroid;this.textureAlpha=textureAlpha};$hxClasses["openfl._internal.renderer.SamplerState"]=openfl__$internal_renderer_SamplerState;openfl__$internal_renderer_SamplerState.__name__="openfl._internal.renderer.SamplerState";openfl__$internal_renderer_SamplerState.prototype={centroid:null,filter:null,ignoreSampler:null,lodBias:null,mipfilter:null,mipmapGenerated:null,textureAlpha:null,wrap:null,clone:function(){var copy=new openfl__$internal_renderer_SamplerState(this.wrap,this.filter,this.mipfilter,this.lodBias,this.ignoreSampler,this.centroid,this.textureAlpha);copy.mipmapGenerated=this.mipmapGenerated;return copy},copyFrom:function(other){if(other==null||other.ignoreSampler){return}this.wrap=other.wrap;this.filter=other.filter;this.mipfilter=other.mipfilter;this.lodBias=other.lodBias;this.centroid=other.centroid;this.textureAlpha=other.textureAlpha},equals:function(other){if(other==null){return false}if(this.wrap==other.wrap&&this.filter==other.filter&&this.mipfilter==other.mipfilter&&this.lodBias==other.lodBias){return this.textureAlpha==other.textureAlpha}else{return false}},__class__:openfl__$internal_renderer_SamplerState};var openfl__$internal_renderer_ShaderBuffer=function(){this.inputRefs=[];this.inputFilter=[];this.inputMipFilter=[];this.inputs=[];this.inputWrap=[];this.overrideIntNames=[];this.overrideIntValues=[];this.overrideFloatNames=[];this.overrideFloatValues=[];this.overrideBoolNames=[];this.overrideBoolValues=[];this.paramLengths=[];this.paramPositions=[];this.paramRefs_Bool=[];this.paramRefs_Float=[];this.paramRefs_Int=[];this.paramTypes=[]};$hxClasses["openfl._internal.renderer.ShaderBuffer"]=openfl__$internal_renderer_ShaderBuffer;openfl__$internal_renderer_ShaderBuffer.__name__="openfl._internal.renderer.ShaderBuffer";openfl__$internal_renderer_ShaderBuffer.prototype={inputCount:null,inputRefs:null,inputFilter:null,inputMipFilter:null,inputs:null,inputWrap:null,overrideBoolCount:null,overrideBoolNames:null,overrideBoolValues:null,overrideFloatCount:null,overrideFloatNames:null,overrideFloatValues:null,overrideIntCount:null,overrideIntNames:null,overrideIntValues:null,paramBoolCount:null,paramCount:null,paramData:null,paramDataBuffer:null,paramDataLength:null,paramFloatCount:null,paramLengths:null,paramPositions:null,paramRefs_Bool:null,paramRefs_Float:null,paramRefs_Int:null,paramTypes:null,shader:null,addBoolOverride:function(name,values){this.overrideBoolNames[this.overrideBoolCount]=name;this.overrideBoolValues[this.overrideBoolCount]=values;this.overrideBoolCount++},addFloatOverride:function(name,values){this.overrideFloatNames[this.overrideFloatCount]=name;this.overrideFloatValues[this.overrideFloatCount]=values;this.overrideFloatCount++},clearOverride:function(){this.overrideIntCount=0;this.overrideFloatCount=0;this.overrideBoolCount=0},__class__:openfl__$internal_renderer_ShaderBuffer};var openfl_display_DisplayObjectRenderer=function(){openfl_events_EventDispatcher.call(this);this.__allowSmoothing=true;this.__worldAlpha=1};$hxClasses["openfl.display.DisplayObjectRenderer"]=openfl_display_DisplayObjectRenderer;openfl_display_DisplayObjectRenderer.__name__="openfl.display.DisplayObjectRenderer";openfl_display_DisplayObjectRenderer.__super__=openfl_events_EventDispatcher;openfl_display_DisplayObjectRenderer.prototype=$extend(openfl_events_EventDispatcher.prototype,{__allowSmoothing:null,__blendMode:null,__cleared:null,__overrideBlendMode:null,__roundPixels:null,__stage:null,__type:null,__worldAlpha:null,__worldColorTransform:null,__worldTransform:null,__clear:function(){},__drawBitmapData:function(bitmapData,source,clipRect){},__render:function(object){},__resize:function(width,height){},__class__:openfl_display_DisplayObjectRenderer});var openfl_display_CairoRenderer=function(cairo){openfl_display_DisplayObjectRenderer.call(this);this.cairo=cairo};$hxClasses["openfl.display.CairoRenderer"]=openfl_display_CairoRenderer;openfl_display_CairoRenderer.__name__="openfl.display.CairoRenderer";openfl_display_CairoRenderer.__super__=openfl_display_DisplayObjectRenderer;openfl_display_CairoRenderer.prototype=$extend(openfl_display_DisplayObjectRenderer.prototype,{cairo:null,__class__:openfl_display_CairoRenderer});var openfl__$internal_renderer_cairo_CairoRenderer=function(cairo){openfl_display_CairoRenderer.call(this,cairo);this.__colorTransform=new openfl_geom_ColorTransform;this.__matrix=new openfl_geom_Matrix;this.__matrix3=new lime_math_Matrix3;this.__type="cairo"};$hxClasses["openfl._internal.renderer.cairo.CairoRenderer"]=openfl__$internal_renderer_cairo_CairoRenderer;openfl__$internal_renderer_cairo_CairoRenderer.__name__="openfl._internal.renderer.cairo.CairoRenderer";openfl__$internal_renderer_cairo_CairoRenderer.__super__=openfl_display_CairoRenderer;openfl__$internal_renderer_cairo_CairoRenderer.prototype=$extend(openfl_display_CairoRenderer.prototype,{__matrix:null,__matrix3:null,__colorTransform:null,applyMatrix:function(transform,cairo){if(cairo==null){cairo=this.cairo}this.__matrix.copyFrom(transform);if(this.cairo==cairo&&this.__worldTransform!=null){this.__matrix.concat(this.__worldTransform)}this.__matrix3.a=this.__matrix.a;this.__matrix3.b=this.__matrix.b;this.__matrix3.c=this.__matrix.c;this.__matrix3.d=this.__matrix.d;if(this.__roundPixels){this.__matrix3.tx=Math.round(this.__matrix.tx);this.__matrix3.ty=Math.round(this.__matrix.ty)}else{this.__matrix3.tx=this.__matrix.tx;this.__matrix3.ty=this.__matrix.ty}},__clear:function(){if(this.cairo==null){return}if(this.__stage!=null&&this.__stage.__clearBeforeRender){var cacheBlendMode=this.__blendMode;this.__setBlendMode(10);this.__setBlendMode(cacheBlendMode)}},__drawBitmapData:function(bitmapData,source,clipRect){if(clipRect!=null){this.__pushMaskRect(clipRect,source.__renderTransform)}if(source==bitmapData){source=bitmapData.clone()}this.__render(source);bitmapData.image.dirty=true;bitmapData.image.version++;if(clipRect!=null){this.__popMaskRect()}},__getAlpha:function(value){return value*this.__worldAlpha},__popMask:function(){},__popMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(!object.__isCacheBitmapRender&&object.__mask!=null){this.__popMask()}if(handleScrollRect&&object.__scrollRect!=null){this.__popMaskRect()}},__popMaskRect:function(){},__pushMask:function(mask){this.applyMatrix(mask.__renderTransform,this.cairo);this.__renderMask(mask)},__pushMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(handleScrollRect&&object.__scrollRect!=null){this.__pushMaskRect(object.__scrollRect,object.__renderTransform)}if(!object.__isCacheBitmapRender&&object.__mask!=null){this.__pushMask(object.__mask)}},__pushMaskRect:function(rect,transform){this.applyMatrix(transform,this.cairo)},__render:function(object){if(this.cairo==null){return}if(object!=null){if(object.__type!=null){this.__renderDisplayObject(object)}else{this.__renderBitmapData(object)}}},__renderBitmap:function(bitmap){this.__updateCacheBitmap(bitmap,false);if(bitmap.__bitmapData!=null&&bitmap.__bitmapData.image!=null){bitmap.__imageVersion=bitmap.__bitmapData.image.version}if(bitmap.__cacheBitmap!=null&&!bitmap.__isCacheBitmapRender){var bitmap1=bitmap.__cacheBitmap;if(!!bitmap1.__renderable){if(this.__getAlpha(bitmap1.__worldAlpha)>0&&bitmap1.__bitmapData!=null&&bitmap1.__bitmapData.__isValid){var cairo=this.cairo;this.__setBlendMode(bitmap1.__worldBlendMode);this.__pushMaskObject(bitmap1);this.applyMatrix(bitmap1.__renderTransform,cairo);bitmap1.__bitmapData.getSurface();this.__popMaskObject(bitmap1);this.__setBlendMode(10)}}}else if(!!bitmap.__renderable){if(this.__getAlpha(bitmap.__worldAlpha)>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var cairo1=this.cairo;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);this.applyMatrix(bitmap.__renderTransform,cairo1);bitmap.__bitmapData.getSurface();this.__popMaskObject(bitmap);this.__setBlendMode(10)}}},__renderBitmapData:function(bitmapData){if(!bitmapData.readable){return}this.applyMatrix(bitmapData.__renderTransform,this.cairo);bitmapData.getSurface()},__renderDisplayObject:function(object){if(object!=null&&object.__type!=null){switch(object.__type._hx_index){case 0:this.__renderBitmap(object);break;case 2:this.__renderDisplayObjectContainer(object);break;case 1:case 4:this.__renderShape(object);break;case 5:this.__renderSimpleButton(object);break;case 6:this.__renderTextField(object);break;case 7:this.__renderTilemap(object);break;case 8:break;default:}if(object.__customRenderEvent!=null){var event=object.__customRenderEvent;event.allowSmoothing=this.__allowSmoothing;event.objectMatrix.copyFrom(object.__renderTransform);event.objectColorTransform.__copyFrom(object.__worldColorTransform);event.renderer=this;event.type="renderCairo";this.__setBlendMode(object.__worldBlendMode);this.__pushMaskObject(object);object.dispatchEvent(event);this.__popMaskObject(object)}}},__renderDisplayObjectContainer:function(container){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0);if(!container.__renderable||container.__worldAlpha<=0){return}this.__updateCacheBitmap(container,false);if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){var bitmap=container.__cacheBitmap;if(!!bitmap.__renderable){if(this.__getAlpha(bitmap.__worldAlpha)>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var cairo=this.cairo;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);this.applyMatrix(bitmap.__renderTransform,cairo);bitmap.__bitmapData.getSurface();this.__popMaskObject(bitmap);this.__setBlendMode(10)}}}if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){return}this.__pushMaskObject(container);if(this.__stage!=null){var _g=0;var _g1=container.__children;while(_g<_g1.length){var child=_g1[_g];++_g;this.__renderDisplayObject(child);child.__renderDirty=false}container.__renderDirty=false}else{var _g2=0;var _g11=container.__children;while(_g2<_g11.length)this.__renderDisplayObject(_g11[_g2++])}this.__popMaskObject(container)},__renderMask:function(mask){if(mask!=null){switch(mask.__type._hx_index){case 0:mask.get_width();mask.get_height();break;case 2:var container=mask;var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0);var _g=0;var _g1=container.__children;while(_g<_g1.length)this.__renderMask(_g1[_g++]);break;case 3:break;case 5:this.__renderMask(mask.__currentState);break;default:}}},__renderShape:function(shape){this.__updateCacheBitmap(shape,false);if(shape.__cacheBitmap!=null&&!shape.__isCacheBitmapRender){var bitmap=shape.__cacheBitmap;if(!!bitmap.__renderable){if(this.__getAlpha(bitmap.__worldAlpha)>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var cairo=this.cairo;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);this.applyMatrix(bitmap.__renderTransform,cairo);bitmap.__bitmapData.getSurface();this.__popMaskObject(bitmap);this.__setBlendMode(10)}}}},__renderSimpleButton:function(button){if(!button.__renderable||button.__worldAlpha<=0||button.__currentState==null){return}this.__pushMaskObject(button);this.__renderDisplayObject(button.__currentState);this.__popMaskObject(button)},__renderTextField:function(textField){this.__updateCacheBitmap(textField,false);if(textField.__cacheBitmap!=null&&!textField.__isCacheBitmapRender){var bitmap=textField.__cacheBitmap;if(!!bitmap.__renderable){if(this.__getAlpha(bitmap.__worldAlpha)>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var cairo=this.cairo;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);this.applyMatrix(bitmap.__renderTransform,cairo);bitmap.__bitmapData.getSurface();this.__popMaskObject(bitmap);this.__setBlendMode(10)}}}},__renderTilemap:function(tilemap){this.__updateCacheBitmap(tilemap,false);if(tilemap.__cacheBitmap!=null&&!tilemap.__isCacheBitmapRender){var bitmap=tilemap.__cacheBitmap;if(!!bitmap.__renderable){if(this.__getAlpha(bitmap.__worldAlpha)>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var cairo=this.cairo;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);this.applyMatrix(bitmap.__renderTransform,cairo);bitmap.__bitmapData.getSurface();this.__popMaskObject(bitmap);this.__setBlendMode(10)}}}else{openfl__$internal_renderer_cairo_CairoTilemap.render(tilemap,this)}},__setBlendMode:function(value){if(this.__overrideBlendMode!=null){value=this.__overrideBlendMode}if(this.__blendMode==value){return}this.__blendMode=value;this.__setBlendModeCairo(this.cairo,value)},__setBlendModeCairo:function(cairo,value){switch(value){case 0:break;case 2:break;case 3:break;case 5:break;case 7:break;case 8:break;case 9:break;case 11:break;case 12:break;default:}},__updateCacheBitmap:function(object,force){if(object.__isCacheBitmapRender){return false}var updated=false;if(object.get_cacheAsBitmap()||!object.__worldColorTransform.__isDefault(true)||this.__worldColorTransform!=null&&!this.__worldColorTransform.__isDefault(true)){if(object.__cacheBitmapMatrix==null){object.__cacheBitmapMatrix=new openfl_geom_Matrix}var hasFilters=object.__filters!=null;var bitmapMatrix=object.__cacheAsBitmapMatrix!=null?object.__cacheAsBitmapMatrix:object.__renderTransform;var rect=null;var colorTransform=openfl_geom_ColorTransform.__pool.get();colorTransform.__copyFrom(object.__worldColorTransform);if(this.__worldColorTransform!=null){colorTransform.__combine(this.__worldColorTransform)}var needRender=object.__cacheBitmap==null||object.__renderDirty&&(force||object.__children!=null&&object.__children.length>0)||object.opaqueBackground!=object.__cacheBitmapBackground||object.__graphics!=null&&object.__graphics.__softwareDirty||!object.__cacheBitmapColorTransform.__equals(colorTransform,true);if(!needRender&&(bitmapMatrix.a!=object.__cacheBitmapMatrix.a||bitmapMatrix.b!=object.__cacheBitmapMatrix.b||bitmapMatrix.c!=object.__cacheBitmapMatrix.c||bitmapMatrix.d!=object.__cacheBitmapMatrix.d)){needRender=true}if(hasFilters&&!needRender){var _g=0;var _g1=object.__filters;while(_g<_g1.length)if(_g1[_g++].__renderDirty){needRender=true;break}}if(!needRender&&object.__cacheBitmapData!=null&&object.__cacheBitmapData.image!=null&&object.__cacheBitmapData.image.version<object.__cacheBitmapData.__textureVersion){needRender=true}var updateTransform=needRender||!object.__cacheBitmap.__worldTransform.equals(object.__worldTransform);object.__cacheBitmapMatrix.copyFrom(bitmapMatrix);object.__cacheBitmapMatrix.tx=0;object.__cacheBitmapMatrix.ty=0;var bitmapWidth=0;var bitmapHeight=0;var filterWidth=0;var filterHeight=0;var offsetX=0;var offsetY=0;if(updateTransform){rect=openfl_geom_Rectangle.__pool.get();object.__getFilterBounds(rect,object.__cacheBitmapMatrix);filterWidth=Math.ceil(rect.width);filterHeight=Math.ceil(rect.height);offsetX=rect.x>0?Math.ceil(rect.x):Math.floor(rect.x);offsetY=rect.y>0?Math.ceil(rect.y):Math.floor(rect.y);if(object.__cacheBitmapData!=null){if(filterWidth>object.__cacheBitmapData.width||filterHeight>object.__cacheBitmapData.height){bitmapWidth=Math.ceil(Math.max(filterWidth*1.25,object.__cacheBitmapData.width));bitmapHeight=Math.ceil(Math.max(filterHeight*1.25,object.__cacheBitmapData.height));needRender=true}else{bitmapWidth=object.__cacheBitmapData.width;bitmapHeight=object.__cacheBitmapData.height}}else{bitmapWidth=filterWidth;bitmapHeight=filterHeight}}if(needRender){object.__cacheBitmapBackground=object.opaqueBackground;if(filterWidth>=.5&&filterHeight>=.5){var needsFill=object.opaqueBackground!=null&&(bitmapWidth!=filterWidth||bitmapHeight!=filterHeight);var fillColor=object.opaqueBackground!=null?-16777216|object.opaqueBackground:0;var bitmapColor=needsFill?0:fillColor;if(object.__cacheBitmapData==null||bitmapWidth>object.__cacheBitmapData.width||bitmapHeight>object.__cacheBitmapData.height){object.__cacheBitmapData=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,bitmapColor);if(object.__cacheBitmap==null){object.__cacheBitmap=new openfl_display_Bitmap}object.__cacheBitmap.__bitmapData=object.__cacheBitmapData;object.__cacheBitmapRendererSW=null}else{object.__cacheBitmapData.fillRect(object.__cacheBitmapData.rect,bitmapColor)}if(needsFill){rect.setTo(0,0,filterWidth,filterHeight);object.__cacheBitmapData.fillRect(rect,fillColor)}}else{openfl_geom_ColorTransform.__pool.release(colorTransform);object.__cacheBitmap=null;object.__cacheBitmapData=null;object.__cacheBitmapData2=null;object.__cacheBitmapData3=null;object.__cacheBitmapRendererSW=null;return true}}else{object.__cacheBitmapData=object.__cacheBitmap.get_bitmapData();object.__cacheBitmapData2=null;object.__cacheBitmapData3=null}if(updateTransform){object.__cacheBitmap.__worldTransform.copyFrom(object.__worldTransform);if(bitmapMatrix==object.__renderTransform){object.__cacheBitmap.__renderTransform.identity();object.__cacheBitmap.__renderTransform.tx=object.__renderTransform.tx+offsetX;object.__cacheBitmap.__renderTransform.ty=object.__renderTransform.ty+offsetY}else{object.__cacheBitmap.__renderTransform.copyFrom(object.__cacheBitmapMatrix);object.__cacheBitmap.__renderTransform.invert();object.__cacheBitmap.__renderTransform.concat(object.__renderTransform);object.__cacheBitmap.__renderTransform.tx+=offsetX;object.__cacheBitmap.__renderTransform.ty+=offsetY}}object.__cacheBitmap.smoothing=this.__allowSmoothing;object.__cacheBitmap.__renderable=object.__renderable;object.__cacheBitmap.__worldAlpha=object.__worldAlpha;object.__cacheBitmap.__worldBlendMode=object.__worldBlendMode;object.__cacheBitmap.__worldShader=object.__worldShader;object.__cacheBitmap.set_mask(object.__mask);if(needRender){if(object.__cacheBitmapRendererSW==null||object.__cacheBitmapRendererSW.__type!="cairo"){if(object.__cacheBitmapData.image==null){object.__cacheBitmapData=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,object.opaqueBackground!=null?-16777216|object.opaqueBackground:0);object.__cacheBitmap.__bitmapData=object.__cacheBitmapData}object.__cacheBitmapRendererSW=new openfl__$internal_renderer_cairo_CairoRenderer(new lime_graphics_cairo_Cairo(object.__cacheBitmapData.getSurface()));object.__cacheBitmapRendererSW.__worldTransform=new openfl_geom_Matrix;object.__cacheBitmapRendererSW.__worldColorTransform=new openfl_geom_ColorTransform}if(object.__cacheBitmapColorTransform==null){object.__cacheBitmapColorTransform=new openfl_geom_ColorTransform}object.__cacheBitmapRendererSW.__stage=object.stage;object.__cacheBitmapRendererSW.__allowSmoothing=this.__allowSmoothing;js_Boot.__cast(object.__cacheBitmapRendererSW,openfl__$internal_renderer_cairo_CairoRenderer).__setBlendMode(10);object.__cacheBitmapRendererSW.__worldAlpha=1/object.__worldAlpha;object.__cacheBitmapRendererSW.__worldTransform.copyFrom(object.__renderTransform);object.__cacheBitmapRendererSW.__worldTransform.invert();object.__cacheBitmapRendererSW.__worldTransform.concat(object.__cacheBitmapMatrix);object.__cacheBitmapRendererSW.__worldTransform.tx-=offsetX;object.__cacheBitmapRendererSW.__worldTransform.ty-=offsetY;object.__cacheBitmapRendererSW.__worldColorTransform.__copyFrom(colorTransform);object.__cacheBitmapRendererSW.__worldColorTransform.__invert();object.__isCacheBitmapRender=true;object.__cacheBitmapRendererSW.__drawBitmapData(object.__cacheBitmapData,object,null);if(hasFilters){var needSecondBitmapData=false;var needCopyOfOriginal=false;var _g2=0;var _g11=object.__filters;while(_g2<_g11.length){var filter=_g11[_g2];++_g2;if(filter.__needSecondBitmapData){needSecondBitmapData=true}if(filter.__preserveObject){needCopyOfOriginal=true}}var bitmap=object.__cacheBitmapData;var bitmap2=null;var bitmap3=null;if(needSecondBitmapData){if(object.__cacheBitmapData2==null||object.__cacheBitmapData2.image==null||bitmapWidth>object.__cacheBitmapData2.width||bitmapHeight>object.__cacheBitmapData2.height){object.__cacheBitmapData2=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,0)}else{object.__cacheBitmapData2.fillRect(object.__cacheBitmapData2.rect,0)}bitmap2=object.__cacheBitmapData2}else{bitmap2=bitmap}if(needCopyOfOriginal){if(object.__cacheBitmapData3==null||object.__cacheBitmapData3.image==null||bitmapWidth>object.__cacheBitmapData3.width||bitmapHeight>object.__cacheBitmapData3.height){object.__cacheBitmapData3=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,0)}else{object.__cacheBitmapData3.fillRect(object.__cacheBitmapData3.rect,0)}bitmap3=object.__cacheBitmapData3}if(object.__tempPoint==null){object.__tempPoint=new openfl_geom_Point}var destPoint=object.__tempPoint;var cacheBitmap;var lastBitmap;var _g21=0;var _g3=object.__filters;while(_g21<_g3.length){var filter1=_g3[_g21];++_g21;if(filter1.__preserveObject){bitmap3.copyPixels(bitmap,bitmap.rect,destPoint)}lastBitmap=filter1.__applyFilter(bitmap2,bitmap,bitmap.rect,destPoint);if(filter1.__preserveObject){lastBitmap.draw(bitmap3,null,object.__objectTransform!=null?object.__objectTransform.get_colorTransform():null)}filter1.__renderDirty=false;if(needSecondBitmapData&&lastBitmap==bitmap2){cacheBitmap=bitmap;bitmap=bitmap2;bitmap2=cacheBitmap}}if(object.__cacheBitmapData!=bitmap){cacheBitmap=object.__cacheBitmapData;object.__cacheBitmapData=bitmap;object.__cacheBitmapData2=cacheBitmap;object.__cacheBitmap.__bitmapData=object.__cacheBitmapData;object.__cacheBitmapRendererSW=null}object.__cacheBitmap.__imageVersion=object.__cacheBitmapData.__textureVersion}object.__cacheBitmapColorTransform.__copyFrom(colorTransform);if(!object.__cacheBitmapColorTransform.__isDefault(true)){object.__cacheBitmapColorTransform.alphaMultiplier=1;object.__cacheBitmapData.colorTransform(object.__cacheBitmapData.rect,object.__cacheBitmapColorTransform)}object.__isCacheBitmapRender=false}if(updateTransform){openfl_geom_Rectangle.__pool.release(rect)}updated=updateTransform;openfl_geom_ColorTransform.__pool.release(colorTransform)}else if(object.__cacheBitmap!=null){object.__cacheBitmap=null;object.__cacheBitmapData=null;object.__cacheBitmapData2=null;object.__cacheBitmapData3=null;object.__cacheBitmapColorTransform=null;object.__cacheBitmapRendererSW=null;updated=true}return updated},__class__:openfl__$internal_renderer_cairo_CairoRenderer});var openfl__$internal_renderer_cairo_CairoTilemap=function(){};$hxClasses["openfl._internal.renderer.cairo.CairoTilemap"]=openfl__$internal_renderer_cairo_CairoTilemap;openfl__$internal_renderer_cairo_CairoTilemap.__name__="openfl._internal.renderer.cairo.CairoTilemap";openfl__$internal_renderer_cairo_CairoTilemap.render=function(tilemap,renderer){if(!tilemap.__renderable||tilemap.__group.__tiles.length==0){return}var alpha=renderer.__getAlpha(tilemap.__worldAlpha);if(alpha<=0){return}renderer.__setBlendMode(tilemap.__worldBlendMode);renderer.__pushMaskObject(tilemap);var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,tilemap.__width,tilemap.__height);renderer.__pushMaskRect(rect,tilemap.__renderTransform);openfl__$internal_renderer_cairo_CairoTilemap.renderTileContainer(tilemap.__group,renderer,tilemap.__renderTransform,tilemap.__tileset,renderer.__allowSmoothing&&tilemap.smoothing,tilemap.tileAlphaEnabled,alpha,tilemap.tileBlendModeEnabled,tilemap.__worldBlendMode,null,null,null,rect,new lime_math_Matrix3);renderer.__popMaskRect();renderer.__popMaskObject(tilemap);openfl_geom_Rectangle.__pool.release(rect)};openfl__$internal_renderer_cairo_CairoTilemap.renderTileContainer=function(group,renderer,parentTransform,defaultTileset,smooth,alphaEnabled,worldAlpha,blendModeEnabled,defaultBlendMode,cacheBitmapData,surface,pattern,rect,matrix){var cairo=renderer.cairo;var tileTransform=openfl_geom_Matrix.__pool.get();var tiles=group.__tiles;var tileset;var alpha;var visible;var blendMode=null;var id;var tileData;var tileRect;var bitmapData;var _g=0;while(_g<tiles.length){var tile=tiles[_g];++_g;tileTransform.setTo(1,0,0,1,-tile.get_originX(),-tile.get_originY());tileTransform.concat(tile.get_matrix());tileTransform.concat(parentTransform);tileset=tile.get_tileset()!=null?tile.get_tileset():defaultTileset;alpha=tile.get_alpha()*worldAlpha;visible=tile.get_visible();if(!visible||alpha<=0){continue}if(!alphaEnabled){alpha=1}if(blendModeEnabled){blendMode=tile.__blendMode!=null?tile.__blendMode:defaultBlendMode}if(tile.__length>0){openfl__$internal_renderer_cairo_CairoTilemap.renderTileContainer(tile,renderer,tileTransform,tileset,smooth,alphaEnabled,alpha,blendModeEnabled,blendMode,cacheBitmapData,surface,pattern,rect,matrix)}else{if(tileset==null){continue}id=tile.get_id();if(id==-1){tileRect=tile.__rect;if(tileRect==null||tileRect.width<=0||tileRect.height<=0){continue}}else{tileData=tileset.__data[id];if(tileData==null){continue}rect.setTo(tileData.x,tileData.y,tileData.width,tileData.height);tileRect=rect}bitmapData=tileset.__bitmapData;if(bitmapData==null){continue}if(bitmapData!=cacheBitmapData){surface=bitmapData.getSurface();pattern=lime_graphics_cairo__$CairoPattern_CairoPattern_$Impl_$.createForSurface(surface);cacheBitmapData=bitmapData}if(blendModeEnabled){renderer.__setBlendMode(blendMode)}renderer.applyMatrix(tileTransform,cairo);matrix.tx=tileRect.x;matrix.ty=tileRect.y}}openfl_geom_Matrix.__pool.release(tileTransform)};var openfl__$internal_renderer_canvas_CanvasGraphics=function(){};$hxClasses["openfl._internal.renderer.canvas.CanvasGraphics"]=openfl__$internal_renderer_canvas_CanvasGraphics;openfl__$internal_renderer_canvas_CanvasGraphics.__name__="openfl._internal.renderer.canvas.CanvasGraphics";openfl__$internal_renderer_canvas_CanvasGraphics.closePath=function(strokeBefore){if(strokeBefore==null){strokeBefore=false}if(openfl__$internal_renderer_canvas_CanvasGraphics.context.strokeStyle==null){return}if(!strokeBefore){openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath()}openfl__$internal_renderer_canvas_CanvasGraphics.context.stroke();if(strokeBefore){openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath()}openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath()};openfl__$internal_renderer_canvas_CanvasGraphics.createBitmapFill=function(bitmap,bitmapRepeat,smooth){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.image);openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(smooth);return openfl__$internal_renderer_canvas_CanvasGraphics.context.createPattern(bitmap.image.get_src(),bitmapRepeat?"repeat":"no-repeat")};openfl__$internal_renderer_canvas_CanvasGraphics.createGradientPattern=function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){var gradientFill=null;var point=null;var point2=null;var releaseMatrix=false;if(matrix==null){matrix=openfl_geom_Matrix.__pool.get();releaseMatrix=true}switch(type){case 0:point=openfl_geom_Point.__pool.get();point.setTo(-819.2,0);var px=point.x;var py=point.y;point.x=px*matrix.a+py*matrix.c+matrix.tx;point.y=px*matrix.b+py*matrix.d+matrix.ty;point2=openfl_geom_Point.__pool.get();point2.setTo(819.2,0);var px1=point2.x;var py1=point2.y;point2.x=px1*matrix.a+py1*matrix.c+matrix.tx;point2.y=px1*matrix.b+py1*matrix.d+matrix.ty;gradientFill=openfl__$internal_renderer_canvas_CanvasGraphics.context.createLinearGradient(point.x,point.y,point2.x,point2.y);break;case 1:point=openfl_geom_Point.__pool.get();point.setTo(1638.4,0);var px2=point.x;var py2=point.y;point.x=px2*matrix.a+py2*matrix.c+matrix.tx;point.y=px2*matrix.b+py2*matrix.d+matrix.ty;gradientFill=openfl__$internal_renderer_canvas_CanvasGraphics.context.createRadialGradient(matrix.tx,matrix.ty,0,matrix.tx,matrix.ty,Math.abs((point.x-matrix.tx)/2));break}var rgb;var alpha;var r;var g;var b;var ratio;var _g=0;var _g1=colors.length;while(_g<_g1){var i=_g++;rgb=colors[i];alpha=alphas[i];r=(rgb&16711680)>>>16;g=(rgb&65280)>>>8;b=rgb&255;ratio=ratios[i]/255;if(ratio<0){ratio=0}if(ratio>1){ratio=1}gradientFill.addColorStop(ratio,"rgba("+r+", "+g+", "+b+", "+alpha+")")}if(point!=null){openfl_geom_Point.__pool.release(point)}if(point2!=null){openfl_geom_Point.__pool.release(point2)}if(releaseMatrix){openfl_geom_Matrix.__pool.release(matrix)}return gradientFill};openfl__$internal_renderer_canvas_CanvasGraphics.createTempPatternCanvas=function(bitmap,repeat,width,height){var canvas=window.document.createElement("canvas");var context=canvas.getContext("2d");canvas.width=width;canvas.height=height;var tmp=bitmap.image.get_src();context.fillStyle=context.createPattern(tmp,repeat?"repeat":"no-repeat");context.beginPath();context.moveTo(0,0);context.lineTo(0,height);context.lineTo(width,height);context.lineTo(width,0);context.lineTo(0,0);context.closePath();if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){context.fill(openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)}return canvas};openfl__$internal_renderer_canvas_CanvasGraphics.drawRoundRect=function(x,y,width,height,ellipseWidth,ellipseHeight){if(ellipseHeight==null){ellipseHeight=ellipseWidth}ellipseWidth*=.5;ellipseHeight*=.5;if(ellipseWidth>width/2){ellipseWidth=width/2}if(ellipseHeight>height/2){ellipseHeight=height/2}var xe=x+width;var ye=y+height;var cx1=-ellipseWidth+ellipseWidth*.7071067811865476;var cx2=-ellipseWidth+ellipseWidth*.41421356237309503;var cy1=-ellipseHeight+ellipseHeight*.7071067811865476;var cy2=-ellipseHeight+ellipseHeight*.41421356237309503;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(xe,ye-ellipseHeight);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(xe,ye+cy2,xe+cx1,ye+cy1);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(xe+cx2,ye,xe-ellipseWidth,ye);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x+ellipseWidth,ye);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(x-cx2,ye,x-cx1,ye+cy1);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(x,ye+cy2,x,ye-ellipseHeight);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x,y+ellipseHeight);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(x,y-cy2,x-cx1,y-cy1);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(x-cx2,y,x+ellipseWidth,y);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(xe-ellipseWidth,y);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(xe+cx2,y,xe+cx1,y-cy1);openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(xe,y-cy2,xe,y+ellipseHeight);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(xe,ye-ellipseHeight)};openfl__$internal_renderer_canvas_CanvasGraphics.endFill=function(){openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath();openfl__$internal_renderer_canvas_CanvasGraphics.playCommands(openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands,false);openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.clear()};openfl__$internal_renderer_canvas_CanvasGraphics.endStroke=function(){openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath();openfl__$internal_renderer_canvas_CanvasGraphics.playCommands(openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands,true);openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath();openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.clear()};openfl__$internal_renderer_canvas_CanvasGraphics.hitTest=function(graphics,x,y){openfl__$internal_renderer_canvas_CanvasGraphics.bounds=graphics.__bounds;openfl__$internal_renderer_canvas_CanvasGraphics.graphics=graphics;if(graphics.__commands.get_length()==0||openfl__$internal_renderer_canvas_CanvasGraphics.bounds==null||openfl__$internal_renderer_canvas_CanvasGraphics.bounds.width<=0||openfl__$internal_renderer_canvas_CanvasGraphics.bounds.height<=0){return false}else{openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting=true;var transform=graphics.__renderTransform;var px=x*transform.a+y*transform.c+transform.tx;var py=x*transform.b+y*transform.d+transform.ty;x=px;y=py;x=px-(openfl__$internal_renderer_canvas_CanvasGraphics.bounds.x*transform.a+openfl__$internal_renderer_canvas_CanvasGraphics.bounds.y*transform.c+transform.tx);y=py-(openfl__$internal_renderer_canvas_CanvasGraphics.bounds.x*transform.b+openfl__$internal_renderer_canvas_CanvasGraphics.bounds.y*transform.d+transform.ty);var cacheCanvas=graphics.__canvas;var cacheContext=graphics.__context;graphics.__canvas=openfl__$internal_renderer_canvas_CanvasGraphics.hitTestCanvas;graphics.__context=openfl__$internal_renderer_canvas_CanvasGraphics.hitTestContext;openfl__$internal_renderer_canvas_CanvasGraphics.context=graphics.__context;openfl__$internal_renderer_canvas_CanvasGraphics.context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty);openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.clear();openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.clear();openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=false;openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=false;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapRepeat=false;openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:case 1:case 2:case 3:openfl__$internal_renderer_canvas_CanvasGraphics.endFill();if(openfl__$internal_renderer_canvas_CanvasGraphics.hasFill&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInPath(x,y,openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)){data.destroy();graphics.__canvas=cacheCanvas;graphics.__context=cacheContext;return true}openfl__$internal_renderer_canvas_CanvasGraphics.endStroke();if(openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInStroke(x,y)){data.destroy();graphics.__canvas=cacheCanvas;graphics.__context=cacheContext;return true}if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginBitmapFill(c.buffer.o[c.oPos],c.buffer.o[c.oPos+1],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginBitmapFill(c.buffer.o[c.oPos],c.buffer.o[c.oPos+1],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1])}else if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL;var c1=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginGradientFill(c1.buffer.o[c1.oPos],c1.buffer.ii[c1.iiPos],c1.buffer.ff[c1.ffPos],c1.buffer.ii[c1.iiPos+1],c1.buffer.o[c1.oPos+1],c1.buffer.o[c1.oPos+2],c1.buffer.o[c1.oPos+3],c1.buffer.f[c1.fPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginGradientFill(c1.buffer.o[c1.oPos],c1.buffer.ii[c1.iiPos],c1.buffer.ff[c1.ffPos],c1.buffer.ii[c1.iiPos+1],c1.buffer.o[c1.oPos+1],c1.buffer.o[c1.oPos+2],c1.buffer.o[c1.oPos+3],c1.buffer.f[c1.fPos])}else if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c2=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginShaderFill(c2.buffer.o[c2.oPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginShaderFill(c2.buffer.o[c2.oPos])}else{switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_FILL;var c3=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginFill(c3.buffer.i[c3.iPos],1);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginFill(c3.buffer.i[c3.iPos],1)}break;case 4:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO;var c4=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.cubicCurveTo(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3],c4.buffer.f[c4.fPos+4],c4.buffer.f[c4.fPos+5]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.cubicCurveTo(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3],c4.buffer.f[c4.fPos+4],c4.buffer.f[c4.fPos+5]);break;case 5:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CURVE_TO;var c5=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.curveTo(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.curveTo(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3]);break;case 6:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE;var c6=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawCircle(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1],c6.buffer.f[c6.fPos+2]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawCircle(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1],c6.buffer.f[c6.fPos+2]);break;case 7:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE;var c7=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawEllipse(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1],c7.buffer.f[c7.fPos+2],c7.buffer.f[c7.fPos+3]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawEllipse(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1],c7.buffer.f[c7.fPos+2],c7.buffer.f[c7.fPos+3]);break;case 9:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c8=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawRect(c8.buffer.f[c8.fPos],c8.buffer.f[c8.fPos+1],c8.buffer.f[c8.fPos+2],c8.buffer.f[c8.fPos+3]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawRect(c8.buffer.f[c8.fPos],c8.buffer.f[c8.fPos+1],c8.buffer.f[c8.fPos+2],c8.buffer.f[c8.fPos+3]);break;case 10:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT;var c9=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawRoundRect(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1],c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3],c9.buffer.f[c9.fPos+4],c9.buffer.o[c9.oPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawRoundRect(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1],c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3],c9.buffer.f[c9.fPos+4],c9.buffer.o[c9.oPos]);break;case 13:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.END_FILL;openfl__$internal_renderer_canvas_CanvasGraphics.endFill();if(openfl__$internal_renderer_canvas_CanvasGraphics.hasFill&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInPath(x,y,openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)){data.destroy();graphics.__canvas=cacheCanvas;graphics.__context=cacheContext;return true}openfl__$internal_renderer_canvas_CanvasGraphics.endStroke();if(openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInStroke(x,y)){data.destroy();graphics.__canvas=cacheCanvas;graphics.__context=cacheContext;return true}openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=false;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;break;case 14:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_BITMAP_STYLE;var c10=data;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineBitmapStyle(c10.buffer.o[c10.oPos],c10.buffer.o[c10.oPos+1],c10.buffer.b[c10.bPos],c10.buffer.b[c10.bPos+1]);break;case 15:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_GRADIENT_STYLE;var c11=data;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineGradientStyle(c11.buffer.o[c11.oPos],c11.buffer.ii[c11.iiPos],c11.buffer.ff[c11.ffPos],c11.buffer.ii[c11.iiPos+1],c11.buffer.o[c11.oPos+1],c11.buffer.o[c11.oPos+2],c11.buffer.o[c11.oPos+3],c11.buffer.f[c11.fPos]);break;case 16:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_STYLE;var c12=data;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineStyle(c12.buffer.o[c12.oPos],c12.buffer.i[c12.iPos],1,c12.buffer.b[c12.bPos],c12.buffer.o[c12.oPos+1],c12.buffer.o[c12.oPos+2],c12.buffer.o[c12.oPos+3],c12.buffer.f[c12.fPos+1]);break;case 17:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_TO;var c13=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.lineTo(c13.buffer.f[c13.fPos],c13.buffer.f[c13.fPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineTo(c13.buffer.f[c13.fPos],c13.buffer.f[c13.fPos+1]);break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;var c14=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.moveTo(c14.buffer.f[c14.fPos],c14.buffer.f[c14.fPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.moveTo(c14.buffer.f[c14.fPos],c14.buffer.f[c14.fPos+1]);break;case 21:openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";break;case 22:openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="nonzero";break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}var hitTest=false;if(openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.get_length()>0){openfl__$internal_renderer_canvas_CanvasGraphics.endFill()}if(openfl__$internal_renderer_canvas_CanvasGraphics.hasFill&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInPath(x,y,openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)){hitTest=true}if(openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.get_length()>0){openfl__$internal_renderer_canvas_CanvasGraphics.endStroke()}if(openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke&&openfl__$internal_renderer_canvas_CanvasGraphics.context.isPointInStroke(x,y)){hitTest=true}data.destroy();graphics.__canvas=cacheCanvas;graphics.__context=cacheContext;return hitTest}};openfl__$internal_renderer_canvas_CanvasGraphics.normalizeUVT=function(uvt,skipT){if(skipT==null){skipT=false}var max=-Infinity;var tmp=-Infinity;var len=uvt.get_length();var _g=1;var _g1=len+1;while(_g<_g1){var t=_g++;if(skipT&&t%3==0){continue}tmp=uvt.get(t-1);if(max<tmp){max=tmp}}if(!skipT){return{max:max,uvt:uvt}}var result=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);var _g2=1;var _g3=len+1;while(_g2<_g3){var t1=_g2++;if(skipT&&t1%3==0){continue}result.push(uvt.get(t1-1))}return{max:max,uvt:result}};openfl__$internal_renderer_canvas_CanvasGraphics.playCommands=function(commands,stroke){if(stroke==null){stroke=false}openfl__$internal_renderer_canvas_CanvasGraphics.bounds=openfl__$internal_renderer_canvas_CanvasGraphics.graphics.__bounds;var offsetX=openfl__$internal_renderer_canvas_CanvasGraphics.bounds.x;var offsetY=openfl__$internal_renderer_canvas_CanvasGraphics.bounds.y;var positionX=0;var positionY=0;var closeGap=false;var startX=0;var startY=0;var setStart=false;openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(true);var hasPath=false;var data=new openfl__$internal_renderer_DrawCommandReader(commands);var x;var y;var width;var height;var ox;var oy;var xe;var ye;var xm;var ym;var r;var g;var b;var optimizationUsed;var canOptimizeMatrix;var st;var sr;var sb;var sl;var stl=null;var sbr=null;var _g=0;var _g1=commands.types;_hx_loop1:while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=c.buffer.o[c.oPos];openfl__$internal_renderer_canvas_CanvasGraphics.context.fillStyle=openfl__$internal_renderer_canvas_CanvasGraphics.createBitmapFill(c.buffer.o[c.oPos],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=true;if(c.buffer.o[c.oPos+1]!=null){openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix=c.buffer.o[c.oPos+1];openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix=c.buffer.o[c.oPos+1].clone();openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.invert()}else{openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix=null;openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix=null}break;case 1:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_FILL;var c1=data;if(c1.buffer.f[c1.fPos]<.005){openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=false}else{if(c1.buffer.f[c1.fPos]==1){var tmp=StringTools.hex(c1.buffer.i[c1.iPos]&16777215,6);openfl__$internal_renderer_canvas_CanvasGraphics.context.fillStyle="#"+tmp}else{r=(c1.buffer.i[c1.iPos]&16711680)>>>16;g=(c1.buffer.i[c1.iPos]&65280)>>>8;b=c1.buffer.i[c1.iPos]&255;openfl__$internal_renderer_canvas_CanvasGraphics.context.fillStyle="rgba("+r+", "+g+", "+b+", "+c1.buffer.f[c1.fPos]+")"}openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(true);openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=true}break;case 2:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL;var c2=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.fillStyle=openfl__$internal_renderer_canvas_CanvasGraphics.createGradientPattern(c2.buffer.o[c2.oPos],c2.buffer.ii[c2.iiPos],c2.buffer.ff[c2.ffPos],c2.buffer.ii[c2.iiPos+1],c2.buffer.o[c2.oPos+1],c2.buffer.o[c2.oPos+2],c2.buffer.o[c2.oPos+3],c2.buffer.f[c2.fPos]);openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(true);openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=true;break;case 3:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c3=data;var shaderBuffer=c3.buffer.o[c3.oPos];if(shaderBuffer.inputCount>0){openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=shaderBuffer.inputs[0];openfl__$internal_renderer_canvas_CanvasGraphics.context.fillStyle=openfl__$internal_renderer_canvas_CanvasGraphics.createBitmapFill(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill,shaderBuffer.inputWrap[0]!=0,shaderBuffer.inputFilter[0]!=5);openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=true;openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix=null;openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix=null}break;case 4:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO;var c4=data;hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(c4.buffer.f[c4.fPos]-offsetX,c4.buffer.f[c4.fPos+1]-offsetY,c4.buffer.f[c4.fPos+2]-offsetX,c4.buffer.f[c4.fPos+3]-offsetY,c4.buffer.f[c4.fPos+4]-offsetX,c4.buffer.f[c4.fPos+5]-offsetY);break;case 5:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CURVE_TO;var c5=data;hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(c5.buffer.f[c5.fPos]-offsetX,c5.buffer.f[c5.fPos+1]-offsetY,c5.buffer.f[c5.fPos+2]-offsetX,c5.buffer.f[c5.fPos+3]-offsetY);break;case 6:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE;var c6=data;hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(c6.buffer.f[c6.fPos]-offsetX+c6.buffer.f[c6.fPos+2],c6.buffer.f[c6.fPos+1]-offsetY);openfl__$internal_renderer_canvas_CanvasGraphics.context.arc(c6.buffer.f[c6.fPos]-offsetX,c6.buffer.f[c6.fPos+1]-offsetY,c6.buffer.f[c6.fPos+2],0,Math.PI*2,true);break;case 7:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE;var c7=data;hasPath=true;x=c7.buffer.f[c7.fPos];y=c7.buffer.f[c7.fPos+1];width=c7.buffer.f[c7.fPos+2];height=c7.buffer.f[c7.fPos+3];x-=offsetX;y-=offsetY;ox=width/2*.5522848;oy=height/2*.5522848;xe=x+width;ye=y+height;xm=x+width/2;ym=y+height/2;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(x,ym);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);break;case 8:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_QUADS;var c8=data;var rects=c8.buffer.o[c8.oPos];var indices=c8.buffer.o[c8.oPos+1];var transforms=c8.buffer.o[c8.oPos+2];var hasIndices=indices!=null;var transformABCD=false;var transformXY=false;var length=hasIndices?indices.get_length():Math.floor(rects.get_length()/4);if(length==0){return}if(transforms!=null){if(transforms.get_length()>=length*6){transformABCD=true;transformXY=true}else if(transforms.get_length()>=length*4){transformABCD=true}else if(transforms.get_length()>=length*2){transformXY=true}}var tileRect=openfl_geom_Rectangle.__pool.get();var tileTransform=openfl_geom_Matrix.__pool.get();var transform=openfl__$internal_renderer_canvas_CanvasGraphics.graphics.__renderTransform;var ri;var ti;openfl__$internal_renderer_canvas_CanvasGraphics.context.save();var _g2=0;var _g11=length;while(_g2<_g11){var i=_g2++;ri=hasIndices?indices.get(i)*4:i*4;if(ri<0){continue}tileRect.setTo(rects.get(ri),rects.get(ri+1),rects.get(ri+2),rects.get(ri+3));if(tileRect.width<=0||tileRect.height<=0){continue}if(transformABCD&&transformXY){ti=i*6;tileTransform.setTo(transforms.get(ti),transforms.get(ti+1),transforms.get(ti+2),transforms.get(ti+3),transforms.get(ti+4),transforms.get(ti+5))}else if(transformABCD){ti=i*4;tileTransform.setTo(transforms.get(ti),transforms.get(ti+1),transforms.get(ti+2),transforms.get(ti+3),tileRect.x,tileRect.y)}else if(transformXY){ti=i*2;tileTransform.tx=transforms.get(ti);tileTransform.ty=transforms.get(ti+1)}else{tileTransform.tx=tileRect.x;tileTransform.ty=tileRect.y}tileTransform.tx+=positionX-offsetX;tileTransform.ty+=positionY-offsetY;tileTransform.concat(transform);openfl__$internal_renderer_canvas_CanvasGraphics.context.setTransform(tileTransform.a,tileTransform.b,tileTransform.c,tileTransform.d,tileTransform.tx,tileTransform.ty);if(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill!=null){openfl__$internal_renderer_canvas_CanvasGraphics.context.drawImage(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.image.get_src(),tileRect.x,tileRect.y,tileRect.width,tileRect.height,0,0,tileRect.width,tileRect.height)}else{openfl__$internal_renderer_canvas_CanvasGraphics.context.fillRect(0,0,tileRect.width,tileRect.height)}}openfl_geom_Rectangle.__pool.release(tileRect);openfl_geom_Matrix.__pool.release(tileTransform);openfl__$internal_renderer_canvas_CanvasGraphics.context.restore();break;case 9:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c9=data;optimizationUsed=false;if(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill!=null&&!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){st=0;sr=0;sb=0;sl=0;canOptimizeMatrix=true;if(openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix!=null){if(openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.b!=0||openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.c!=0){canOptimizeMatrix=false}else{if(stl==null){stl=openfl_geom_Point.__pool.get()}if(sbr==null){sbr=openfl_geom_Point.__pool.get()}stl.setTo(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1]);var _this=openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix;var px=stl.x;var py=stl.y;stl.x=px*_this.a+py*_this.c+_this.tx;stl.y=px*_this.b+py*_this.d+_this.ty;sbr.setTo(c9.buffer.f[c9.fPos]+c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+1]+c9.buffer.f[c9.fPos+3]);var _this1=openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix;var px1=sbr.x;var py1=sbr.y;sbr.x=px1*_this1.a+py1*_this1.c+_this1.tx;sbr.y=px1*_this1.b+py1*_this1.d+_this1.ty;st=stl.y;sl=stl.x;sb=sbr.y;sr=sbr.x}}else{st=c9.buffer.f[c9.fPos+1];sl=c9.buffer.f[c9.fPos];sb=c9.buffer.f[c9.fPos+1]+c9.buffer.f[c9.fPos+3];sr=c9.buffer.f[c9.fPos]+c9.buffer.f[c9.fPos+2]}if(canOptimizeMatrix&&st>=0&&sl>=0&&sr<=openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.width&&sb<=openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.height){optimizationUsed=true;if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){openfl__$internal_renderer_canvas_CanvasGraphics.context.drawImage(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.image.get_src(),sl,st,sr-sl,sb-st,c9.buffer.f[c9.fPos]-offsetX,c9.buffer.f[c9.fPos+1]-offsetY,c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3])}}}if(!optimizationUsed){hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.context.rect(c9.buffer.f[c9.fPos]-offsetX,c9.buffer.f[c9.fPos+1]-offsetY,c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3])}break;case 10:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT;var c10=data;hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.drawRoundRect(c10.buffer.f[c10.fPos]-offsetX,c10.buffer.f[c10.fPos+1]-offsetY,c10.buffer.f[c10.fPos+2],c10.buffer.f[c10.fPos+3],c10.buffer.f[c10.fPos+4],c10.buffer.o[c10.oPos]);break;case 12:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES;var c11=data;var v=c11.buffer.o[c11.oPos];var ind=c11.buffer.o[c11.oPos+1];var uvt=c11.buffer.o[c11.oPos+2];var pattern=null;var colorFill=openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill==null;if(colorFill&&uvt!=null){break _hx_loop1}if(!colorFill){if(uvt==null){uvt=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);var _g3=0;var _g12=v.get_length()/2|0;while(_g3<_g12){var i1=_g3++;uvt.push(v.get(i1*2)-offsetX/openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.width);uvt.push(v.get(i1*2+1)-offsetY/openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.height)}}var normalizedUVT=openfl__$internal_renderer_canvas_CanvasGraphics.normalizeUVT(uvt,uvt.get_length()!=v.get_length());uvt=normalizedUVT.uvt;if(normalizedUVT.max>1){pattern=openfl__$internal_renderer_canvas_CanvasGraphics.createTempPatternCanvas(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill,openfl__$internal_renderer_canvas_CanvasGraphics.bitmapRepeat,openfl__$internal_renderer_canvas_CanvasGraphics.bounds.width|0,openfl__$internal_renderer_canvas_CanvasGraphics.bounds.height|0)}else{pattern=openfl__$internal_renderer_canvas_CanvasGraphics.createTempPatternCanvas(openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill,openfl__$internal_renderer_canvas_CanvasGraphics.bitmapRepeat,openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.width,openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill.height)}}var i2=0;var l=ind.get_length();var a_;var b_;var c_;var iax;var iay;var ibx;var iby;var icx;var icy;var x1;var y1;var x2;var y2;var x3;var y3;var uvx1;var uvy1;var uvx2;var uvy2;var uvx3;var uvy3;var denom;var t1;var t2;var t3;var t4;var dx;var dy;while(i2<l){a_=i2;b_=i2+1;c_=i2+2;iax=ind.get(a_)*2;iay=ind.get(a_)*2+1;ibx=ind.get(b_)*2;iby=ind.get(b_)*2+1;icx=ind.get(c_)*2;icy=ind.get(c_)*2+1;x1=v.get(iax)-offsetX;y1=v.get(iay)-offsetY;x2=v.get(ibx)-offsetX;y2=v.get(iby)-offsetY;x3=v.get(icx)-offsetX;y3=v.get(icy)-offsetY;switch(c11.buffer.o[c11.oPos+3]){case 0:if((x2-x1)*(y3-y1)-(y2-y1)*(x3-x1)<0){i2+=3;continue}break;case 2:if(!((x2-x1)*(y3-y1)-(y2-y1)*(x3-x1)<0)){i2+=3;continue}break;default:}if(colorFill){openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath();openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(x1,y1);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x2,y2);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x3,y3);openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath();if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){openfl__$internal_renderer_canvas_CanvasGraphics.context.fill(openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)}i2+=3;continue}uvx1=uvt.get(iax)*pattern.width;uvx2=uvt.get(ibx)*pattern.width;uvx3=uvt.get(icx)*pattern.width;uvy1=uvt.get(iay)*pattern.height;uvy2=uvt.get(iby)*pattern.height;uvy3=uvt.get(icy)*pattern.height;denom=uvx1*(uvy3-uvy2)-uvx2*uvy3+uvx3*uvy2+(uvx2-uvx3)*uvy1;if(denom==0){i2+=3;openfl__$internal_renderer_canvas_CanvasGraphics.context.restore();continue}openfl__$internal_renderer_canvas_CanvasGraphics.context.save();openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath();openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(x1,y1);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x2,y2);openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(x3,y3);openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath();openfl__$internal_renderer_canvas_CanvasGraphics.context.clip();t1=-(uvy1*(x3-x2)-uvy2*x3+uvy3*x2+(uvy2-uvy3)*x1)/denom;t2=(uvy2*y3+uvy1*(y2-y3)-uvy3*y2+(uvy3-uvy2)*y1)/denom;t3=(uvx1*(x3-x2)-uvx2*x3+uvx3*x2+(uvx2-uvx3)*x1)/denom;t4=-(uvx2*y3+uvx1*(y2-y3)-uvx3*y2+(uvx3-uvx2)*y1)/denom;dx=(uvx1*(uvy3*x2-uvy2*x3)+uvy1*(uvx2*x3-uvx3*x2)+(uvx3*uvy2-uvx2*uvy3)*x1)/denom;dy=(uvx1*(uvy3*y2-uvy2*y3)+uvy1*(uvx2*y3-uvx3*y2)+(uvx3*uvy2-uvx2*uvy3)*y1)/denom;openfl__$internal_renderer_canvas_CanvasGraphics.context.transform(t1,t2,t3,t4,dx,dy);openfl__$internal_renderer_canvas_CanvasGraphics.context.drawImage(pattern,0,0,pattern.width,pattern.height);openfl__$internal_renderer_canvas_CanvasGraphics.context.restore();i2+=3}break;case 14:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_BITMAP_STYLE;var c12=data;if(stroke&&openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke){openfl__$internal_renderer_canvas_CanvasGraphics.closePath()}openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(positionX-offsetX,positionY-offsetY);openfl__$internal_renderer_canvas_CanvasGraphics.context.strokeStyle=openfl__$internal_renderer_canvas_CanvasGraphics.createBitmapFill(c12.buffer.o[c12.oPos],c12.buffer.b[c12.bPos],c12.buffer.b[c12.bPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=true;break;case 15:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_GRADIENT_STYLE;var c13=data;if(stroke&&openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke){openfl__$internal_renderer_canvas_CanvasGraphics.closePath()}openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(positionX-offsetX,positionY-offsetY);openfl__$internal_renderer_canvas_CanvasGraphics.context.strokeStyle=openfl__$internal_renderer_canvas_CanvasGraphics.createGradientPattern(c13.buffer.o[c13.oPos],c13.buffer.ii[c13.iiPos],c13.buffer.ff[c13.ffPos],c13.buffer.ii[c13.iiPos+1],c13.buffer.o[c13.oPos+1],c13.buffer.o[c13.oPos+2],c13.buffer.o[c13.oPos+3],c13.buffer.f[c13.fPos]);openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(true);openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=true;break;case 16:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_STYLE;var c14=data;if(stroke&&openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke){openfl__$internal_renderer_canvas_CanvasGraphics.closePath(true)}openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(positionX-offsetX,positionY-offsetY);if(c14.buffer.o[c14.oPos]==null){openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=false}else{openfl__$internal_renderer_canvas_CanvasGraphics.context.lineWidth=c14.buffer.o[c14.oPos]>0?c14.buffer.o[c14.oPos]:1;openfl__$internal_renderer_canvas_CanvasGraphics.context.lineJoin=c14.buffer.o[c14.oPos+3]==null?"round":openfl_display__$JointStyle_JointStyle_$Impl_$.toString(c14.buffer.o[c14.oPos+3]).toLowerCase();openfl__$internal_renderer_canvas_CanvasGraphics.context.lineCap=c14.buffer.o[c14.oPos+2]==null?"round":c14.buffer.o[c14.oPos+2]==0?"butt":openfl_display__$CapsStyle_CapsStyle_$Impl_$.toString(c14.buffer.o[c14.oPos+2]).toLowerCase();openfl__$internal_renderer_canvas_CanvasGraphics.context.miterLimit=c14.buffer.f[c14.fPos+1];if(c14.buffer.f[c14.fPos]==1){var tmp1=StringTools.hex(c14.buffer.i[c14.iPos]&16777215,6);openfl__$internal_renderer_canvas_CanvasGraphics.context.strokeStyle="#"+tmp1}else{r=(c14.buffer.i[c14.iPos]&16711680)>>>16;g=(c14.buffer.i[c14.iPos]&65280)>>>8;b=c14.buffer.i[c14.iPos]&255;openfl__$internal_renderer_canvas_CanvasGraphics.context.strokeStyle="rgba("+r+", "+g+", "+b+", "+c14.buffer.f[c14.fPos]+")"}openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing(true);openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=true}break;case 17:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_TO;var c15=data;hasPath=true;openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(c15.buffer.f[c15.fPos]-offsetX,c15.buffer.f[c15.fPos+1]-offsetY);positionX=c15.buffer.f[c15.fPos];positionY=c15.buffer.f[c15.fPos+1];if(positionX==startX&&positionY==startY){closeGap=true}break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;var c16=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(c16.buffer.f[c16.fPos]-offsetX,c16.buffer.f[c16.fPos+1]-offsetY);positionX=c16.buffer.f[c16.fPos];positionY=c16.buffer.f[c16.fPos+1];if(setStart){closeGap=true}startX=c16.buffer.f[c16.fPos];startY=c16.buffer.f[c16.fPos+1];setStart=true;break;case 21:openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";break;case 22:openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="nonzero";break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}if(stl!=null){openfl_geom_Point.__pool.release(stl)}if(sbr!=null){openfl_geom_Point.__pool.release(sbr)}data.destroy();if(hasPath){if(stroke&&openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke){if(openfl__$internal_renderer_canvas_CanvasGraphics.hasFill&&closeGap){openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(startX-offsetX,startY-offsetY);openfl__$internal_renderer_canvas_CanvasGraphics.closePath(false)}else if(closeGap&&positionX==startX&&positionY==startY){openfl__$internal_renderer_canvas_CanvasGraphics.closePath(false)}if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){openfl__$internal_renderer_canvas_CanvasGraphics.context.stroke()}}if(!stroke){if(openfl__$internal_renderer_canvas_CanvasGraphics.hasFill||openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill!=null){openfl__$internal_renderer_canvas_CanvasGraphics.context.translate(-openfl__$internal_renderer_canvas_CanvasGraphics.bounds.x,-openfl__$internal_renderer_canvas_CanvasGraphics.bounds.y);if(openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix!=null){openfl__$internal_renderer_canvas_CanvasGraphics.context.transform(openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.a,openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.b,openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.c,openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.d,openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.tx,openfl__$internal_renderer_canvas_CanvasGraphics.pendingMatrix.ty);if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){openfl__$internal_renderer_canvas_CanvasGraphics.context.fill(openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)}openfl__$internal_renderer_canvas_CanvasGraphics.context.transform(openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.a,openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.b,openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.c,openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.d,openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.tx,openfl__$internal_renderer_canvas_CanvasGraphics.inversePendingMatrix.ty)}else if(!openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting){openfl__$internal_renderer_canvas_CanvasGraphics.context.fill(openfl__$internal_renderer_canvas_CanvasGraphics.windingRule)}openfl__$internal_renderer_canvas_CanvasGraphics.context.translate(openfl__$internal_renderer_canvas_CanvasGraphics.bounds.x,openfl__$internal_renderer_canvas_CanvasGraphics.bounds.y);openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath()}}}};openfl__$internal_renderer_canvas_CanvasGraphics.render=function(graphics,renderer){graphics.__update(renderer.__worldTransform);if(graphics.__softwareDirty){openfl__$internal_renderer_canvas_CanvasGraphics.hitTesting=false;openfl__$internal_renderer_canvas_CanvasGraphics.graphics=graphics;openfl__$internal_renderer_canvas_CanvasGraphics.allowSmoothing=renderer.__allowSmoothing;openfl__$internal_renderer_canvas_CanvasGraphics.worldAlpha=renderer.__getAlpha(graphics.__owner.__worldAlpha);openfl__$internal_renderer_canvas_CanvasGraphics.bounds=graphics.__bounds;var width=graphics.__width;var height=graphics.__height;if(!graphics.__visible||graphics.__commands.get_length()==0||openfl__$internal_renderer_canvas_CanvasGraphics.bounds==null||width<1||height<1){graphics.__canvas=null;graphics.__context=null;graphics.__bitmap=null}else{if(graphics.__canvas==null){graphics.__canvas=window.document.createElement("canvas");graphics.__context=graphics.__canvas.getContext("2d")}openfl__$internal_renderer_canvas_CanvasGraphics.context=graphics.__context;var transform=graphics.__renderTransform;var canvas=graphics.__canvas;var scale=renderer.pixelRatio;var scaledWidth=width*scale|0;var scaledHeight=height*scale|0;renderer.__setBlendModeContext(openfl__$internal_renderer_canvas_CanvasGraphics.context,10);if(renderer.__domRenderer!=null){if(canvas.width==scaledWidth&&canvas.height==scaledHeight){openfl__$internal_renderer_canvas_CanvasGraphics.context.clearRect(0,0,scaledWidth,scaledHeight)}else{canvas.width=scaledWidth;canvas.height=scaledHeight;canvas.style.width=width+"px";canvas.style.height=height+"px"}var transform1=graphics.__renderTransform;openfl__$internal_renderer_canvas_CanvasGraphics.context.setTransform(transform1.a*scale,transform1.b*scale,transform1.c*scale,transform1.d*scale,transform1.tx*scale,transform1.ty*scale)}else{if(canvas.width==scaledWidth&&canvas.height==scaledHeight){openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath();openfl__$internal_renderer_canvas_CanvasGraphics.context.setTransform(1,0,0,1,0,0);openfl__$internal_renderer_canvas_CanvasGraphics.context.clearRect(0,0,scaledWidth,scaledHeight)}else{canvas.width=width;canvas.height=height}openfl__$internal_renderer_canvas_CanvasGraphics.context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.clear();openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.clear();openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=false;openfl__$internal_renderer_canvas_CanvasGraphics.hasStroke=false;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapRepeat=false;var hasLineStyle=false;var initStrokeX=0;var initStrokeY=0;openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:case 1:case 2:case 3:openfl__$internal_renderer_canvas_CanvasGraphics.endFill();openfl__$internal_renderer_canvas_CanvasGraphics.endStroke();if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginBitmapFill(c.buffer.o[c.oPos],c.buffer.o[c.oPos+1],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginBitmapFill(c.buffer.o[c.oPos],c.buffer.o[c.oPos+1],c.buffer.b[c.bPos],c.buffer.b[c.bPos+1])}else if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_GRADIENT_FILL;var c1=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginGradientFill(c1.buffer.o[c1.oPos],c1.buffer.ii[c1.iiPos],c1.buffer.ff[c1.ffPos],c1.buffer.ii[c1.iiPos+1],c1.buffer.o[c1.oPos+1],c1.buffer.o[c1.oPos+2],c1.buffer.o[c1.oPos+3],c1.buffer.f[c1.fPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginGradientFill(c1.buffer.o[c1.oPos],c1.buffer.ii[c1.iiPos],c1.buffer.ff[c1.ffPos],c1.buffer.ii[c1.iiPos+1],c1.buffer.o[c1.oPos+1],c1.buffer.o[c1.oPos+2],c1.buffer.o[c1.oPos+3],c1.buffer.f[c1.fPos])}else if(type==openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c2=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginShaderFill(c2.buffer.o[c2.oPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginShaderFill(c2.buffer.o[c2.oPos])}else{switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_FILL;var c3=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.beginFill(c3.buffer.i[c3.iPos],c3.buffer.f[c3.fPos]);openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.beginFill(c3.buffer.i[c3.iPos],c3.buffer.f[c3.fPos])}break;case 4:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO;var c4=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.cubicCurveTo(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3],c4.buffer.f[c4.fPos+4],c4.buffer.f[c4.fPos+5]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.cubicCurveTo(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3],c4.buffer.f[c4.fPos+4],c4.buffer.f[c4.fPos+5])}else{initStrokeX=c4.buffer.f[c4.fPos+4];initStrokeY=c4.buffer.f[c4.fPos+5]}break;case 5:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CURVE_TO;var c5=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.curveTo(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.curveTo(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3])}else{initStrokeX=c5.buffer.f[c5.fPos+2];initStrokeY=c5.buffer.f[c5.fPos+3]}break;case 6:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE;var c6=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawCircle(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1],c6.buffer.f[c6.fPos+2]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawCircle(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1],c6.buffer.f[c6.fPos+2])}break;case 7:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE;var c7=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawEllipse(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1],c7.buffer.f[c7.fPos+2],c7.buffer.f[c7.fPos+3]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawEllipse(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1],c7.buffer.f[c7.fPos+2],c7.buffer.f[c7.fPos+3])}break;case 8:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_QUADS;var c8=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawQuads(c8.buffer.o[c8.oPos],c8.buffer.o[c8.oPos+1],c8.buffer.o[c8.oPos+2]);break;case 9:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c9=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawRect(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1],c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawRect(c9.buffer.f[c9.fPos],c9.buffer.f[c9.fPos+1],c9.buffer.f[c9.fPos+2],c9.buffer.f[c9.fPos+3])}break;case 10:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT;var c10=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawRoundRect(c10.buffer.f[c10.fPos],c10.buffer.f[c10.fPos+1],c10.buffer.f[c10.fPos+2],c10.buffer.f[c10.fPos+3],c10.buffer.f[c10.fPos+4],c10.buffer.o[c10.oPos]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.drawRoundRect(c10.buffer.f[c10.fPos],c10.buffer.f[c10.fPos+1],c10.buffer.f[c10.fPos+2],c10.buffer.f[c10.fPos+3],c10.buffer.f[c10.fPos+4],c10.buffer.o[c10.oPos])}break;case 12:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES;var c11=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.drawTriangles(c11.buffer.o[c11.oPos],c11.buffer.o[c11.oPos+1],c11.buffer.o[c11.oPos+2],c11.buffer.o[c11.oPos+3]);break;case 13:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.END_FILL;openfl__$internal_renderer_canvas_CanvasGraphics.endFill();openfl__$internal_renderer_canvas_CanvasGraphics.endStroke();openfl__$internal_renderer_canvas_CanvasGraphics.hasFill=false;hasLineStyle=false;openfl__$internal_renderer_canvas_CanvasGraphics.bitmapFill=null;initStrokeX=0;initStrokeY=0;break;case 14:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_BITMAP_STYLE;var c12=data;if(!hasLineStyle&&(initStrokeX!=0||initStrokeY!=0)){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.moveTo(initStrokeX,initStrokeY);initStrokeX=0;initStrokeY=0}hasLineStyle=true;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineBitmapStyle(c12.buffer.o[c12.oPos],c12.buffer.o[c12.oPos+1],c12.buffer.b[c12.bPos],c12.buffer.b[c12.bPos+1]);break;case 15:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_GRADIENT_STYLE;var c13=data;if(!hasLineStyle&&(initStrokeX!=0||initStrokeY!=0)){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.moveTo(initStrokeX,initStrokeY);initStrokeX=0;initStrokeY=0}hasLineStyle=true;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineGradientStyle(c13.buffer.o[c13.oPos],c13.buffer.ii[c13.iiPos],c13.buffer.ff[c13.ffPos],c13.buffer.ii[c13.iiPos+1],c13.buffer.o[c13.oPos+1],c13.buffer.o[c13.oPos+2],c13.buffer.o[c13.oPos+3],c13.buffer.f[c13.fPos]);break;case 16:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_STYLE;var c14=data;if(!hasLineStyle&&c14.buffer.o[c14.oPos]!=null){if(initStrokeX!=0||initStrokeY!=0){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.moveTo(initStrokeX,initStrokeY);initStrokeX=0;initStrokeY=0}}hasLineStyle=c14.buffer.o[c14.oPos]!=null;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineStyle(c14.buffer.o[c14.oPos],c14.buffer.i[c14.iPos],c14.buffer.f[c14.fPos],c14.buffer.b[c14.bPos],c14.buffer.o[c14.oPos+1],c14.buffer.o[c14.oPos+2],c14.buffer.o[c14.oPos+3],c14.buffer.f[c14.fPos+1]);break;case 17:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_TO;var c15=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.lineTo(c15.buffer.f[c15.fPos],c15.buffer.f[c15.fPos+1]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.lineTo(c15.buffer.f[c15.fPos],c15.buffer.f[c15.fPos+1])}else{initStrokeX=c15.buffer.f[c15.fPos];initStrokeY=c15.buffer.f[c15.fPos+1]}break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;var c16=data;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.moveTo(c16.buffer.f[c16.fPos],c16.buffer.f[c16.fPos+1]);if(hasLineStyle){openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.moveTo(c16.buffer.f[c16.fPos],c16.buffer.f[c16.fPos+1])}else{initStrokeX=c16.buffer.f[c16.fPos];initStrokeY=c16.buffer.f[c16.fPos+1]}break;case 19:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.OVERRIDE_BLEND_MODE;var c17=data;renderer.__setBlendModeContext(openfl__$internal_renderer_canvas_CanvasGraphics.context,c17.buffer.o[c17.oPos]);break;case 21:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.WINDING_EVEN_ODD;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.windingEvenOdd();openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="evenodd";break;case 22:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.WINDING_NON_ZERO;openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.windingNonZero();openfl__$internal_renderer_canvas_CanvasGraphics.windingRule="nonzero";break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}if(openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands.get_length()>0){openfl__$internal_renderer_canvas_CanvasGraphics.endFill()}if(openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands.get_length()>0){openfl__$internal_renderer_canvas_CanvasGraphics.endStroke()}data.destroy();graphics.__bitmap=openfl_display_BitmapData.fromCanvas(graphics.__canvas)}graphics.__softwareDirty=false;graphics.set___dirty(false)}};openfl__$internal_renderer_canvas_CanvasGraphics.renderMask=function(graphics,renderer){if(graphics.__commands.get_length()!=0){openfl__$internal_renderer_canvas_CanvasGraphics.context=renderer.context;var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var x;var y;var width;var height;var ox;var oy;var xe;var ye;var xm;var ym;var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 4:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CUBIC_CURVE_TO;var c=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(c.buffer.f[c.fPos],c.buffer.f[c.fPos+1],c.buffer.f[c.fPos+2],c.buffer.f[c.fPos+3],c.buffer.f[c.fPos+4],c.buffer.f[c.fPos+5]);break;case 5:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.CURVE_TO;var c1=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.quadraticCurveTo(c1.buffer.f[c1.fPos],c1.buffer.f[c1.fPos+1],c1.buffer.f[c1.fPos+2],c1.buffer.f[c1.fPos+3]);break;case 6:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_CIRCLE;var c2=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.arc(c2.buffer.f[c2.fPos],c2.buffer.f[c2.fPos+1],c2.buffer.f[c2.fPos+2],0,Math.PI*2,true);break;case 7:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ELLIPSE;var c3=data;x=c3.buffer.f[c3.fPos];y=c3.buffer.f[c3.fPos+1];width=c3.buffer.f[c3.fPos+2];height=c3.buffer.f[c3.fPos+3];x-=0;y-=0;ox=width/2*.5522848;oy=height/2*.5522848;xe=x+width;ye=y+height;xm=x+width/2;ym=y+height/2;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(x,ym);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(x,ym-oy,xm-ox,y,xm,y);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xm+ox,y,xe,ym-oy,xe,ym);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye);openfl__$internal_renderer_canvas_CanvasGraphics.context.bezierCurveTo(xm-ox,ye,x,ym+oy,x,ym);break;case 9:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c4=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.beginPath();openfl__$internal_renderer_canvas_CanvasGraphics.context.rect(c4.buffer.f[c4.fPos],c4.buffer.f[c4.fPos+1],c4.buffer.f[c4.fPos+2],c4.buffer.f[c4.fPos+3]);openfl__$internal_renderer_canvas_CanvasGraphics.context.closePath();break;case 10:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_ROUND_RECT;var c5=data;openfl__$internal_renderer_canvas_CanvasGraphics.drawRoundRect(c5.buffer.f[c5.fPos],c5.buffer.f[c5.fPos+1],c5.buffer.f[c5.fPos+2],c5.buffer.f[c5.fPos+3],c5.buffer.f[c5.fPos+4],c5.buffer.o[c5.oPos]);break;case 17:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.LINE_TO;var c6=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.lineTo(c6.buffer.f[c6.fPos],c6.buffer.f[c6.fPos+1]);break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;var c7=data;openfl__$internal_renderer_canvas_CanvasGraphics.context.moveTo(c7.buffer.f[c7.fPos],c7.buffer.f[c7.fPos+1]);break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}data.destroy()}};openfl__$internal_renderer_canvas_CanvasGraphics.setSmoothing=function(smooth){if(!openfl__$internal_renderer_canvas_CanvasGraphics.allowSmoothing){smooth=false}if(openfl__$internal_renderer_canvas_CanvasGraphics.context.imageSmoothingEnabled!=smooth){openfl__$internal_renderer_canvas_CanvasGraphics.context.imageSmoothingEnabled=smooth}};var openfl_display_CanvasRenderer=function(context){this.pixelRatio=1;openfl_display_DisplayObjectRenderer.call(this);this.context=context};$hxClasses["openfl.display.CanvasRenderer"]=openfl_display_CanvasRenderer;openfl_display_CanvasRenderer.__name__="openfl.display.CanvasRenderer";openfl_display_CanvasRenderer.__super__=openfl_display_DisplayObjectRenderer;openfl_display_CanvasRenderer.prototype=$extend(openfl_display_DisplayObjectRenderer.prototype,{context:null,pixelRatio:null,__class__:openfl_display_CanvasRenderer});var openfl__$internal_renderer_canvas_CanvasRenderer=function(context){openfl_display_CanvasRenderer.call(this,context);this.__colorTransform=new openfl_geom_ColorTransform;this.__transform=new openfl_geom_Matrix;this.__type="canvas"};$hxClasses["openfl._internal.renderer.canvas.CanvasRenderer"]=openfl__$internal_renderer_canvas_CanvasRenderer;openfl__$internal_renderer_canvas_CanvasRenderer.__name__="openfl._internal.renderer.canvas.CanvasRenderer";openfl__$internal_renderer_canvas_CanvasRenderer.__super__=openfl_display_CanvasRenderer;openfl__$internal_renderer_canvas_CanvasRenderer.prototype=$extend(openfl_display_CanvasRenderer.prototype,{__colorTransform:null,__domRenderer:null,__transform:null,applySmoothing:function(context,value){context.imageSmoothingEnabled=value},setTransform:function(transform,context){if(context==null){context=this.context}else if(this.context==context&&this.__worldTransform!=null){this.__transform.copyFrom(transform);this.__transform.concat(this.__worldTransform);transform=this.__transform}if(this.__roundPixels){context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx|0,transform.ty|0)}else{context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}},__clear:function(){if(this.__stage!=null){var cacheBlendMode=this.__blendMode;this.__blendMode=null;this.__setBlendMode(10);this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;if(!this.__stage.__transparent&&this.__stage.__clearBeforeRender){this.context.fillStyle=this.__stage.__colorString;this.context.fillRect(0,0,this.__stage.stageWidth*this.__stage.window.__scale,this.__stage.stageHeight*this.__stage.window.__scale)}else if(this.__stage.__transparent&&this.__stage.__clearBeforeRender){this.context.clearRect(0,0,this.__stage.stageWidth*this.__stage.window.__scale,this.__stage.stageHeight*this.__stage.window.__scale)}this.__setBlendMode(cacheBlendMode)}},__drawBitmapData:function(bitmapData,source,clipRect){if(clipRect!=null){this.__pushMaskRect(clipRect,source.__renderTransform)}var buffer=bitmapData.image.buffer;if(!this.__allowSmoothing){this.applySmoothing(buffer.__srcContext,false)}this.__render(source);if(!this.__allowSmoothing){this.applySmoothing(buffer.__srcContext,true)}buffer.__srcContext.setTransform(1,0,0,1,0,0);buffer.__srcImageData=null;buffer.data=null;bitmapData.image.dirty=true;bitmapData.image.version++;if(clipRect!=null){this.__popMaskRect()}},__getAlpha:function(value){return value*this.__worldAlpha},__popMask:function(){this.context.restore()},__popMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(!object.__isCacheBitmapRender&&object.__mask!=null){this.__popMask()}if(handleScrollRect&&object.__scrollRect!=null){this.__popMaskRect()}},__popMaskRect:function(){this.context.restore()},__pushMask:function(mask){this.context.save();this.setTransform(mask.__renderTransform,this.context);this.context.beginPath();this.__renderMask(mask);this.context.closePath();this.context.clip()},__pushMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(handleScrollRect&&object.__scrollRect!=null){this.__pushMaskRect(object.__scrollRect,object.__renderTransform)}if(!object.__isCacheBitmapRender&&object.__mask!=null){this.__pushMask(object.__mask)}},__pushMaskRect:function(rect,transform){this.context.save();this.setTransform(transform,this.context);this.context.beginPath();this.context.rect(rect.x,rect.y,rect.width,rect.height);this.context.clip()},__render:function(object){if(object!=null){if(object.__type!=null){this.__renderDisplayObject(object)}else{this.__renderBitmapData(object)}}},__renderBitmap:function(bitmap){this.__updateCacheBitmap(bitmap,false);if(bitmap.__bitmapData!=null&&bitmap.__bitmapData.image!=null){bitmap.__imageVersion=bitmap.__bitmapData.image.version}if(bitmap.__cacheBitmap!=null&&!bitmap.__isCacheBitmapRender){var bitmap1=bitmap.__cacheBitmap;if(!!bitmap1.__renderable){var alpha=this.__getAlpha(bitmap1.__worldAlpha);if(alpha>0&&bitmap1.__bitmapData!=null&&bitmap1.__bitmapData.__isValid&&bitmap1.__bitmapData.readable){var context=this.context;this.__setBlendMode(bitmap1.__worldBlendMode);this.__pushMaskObject(bitmap1,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap1.__bitmapData.image);context.globalAlpha=alpha;var scrollRect=bitmap1.__scrollRect;this.setTransform(bitmap1.__renderTransform,context);if(!this.__allowSmoothing||!bitmap1.smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(bitmap1.__bitmapData.image.get_src(),0,0,bitmap1.__bitmapData.image.width,bitmap1.__bitmapData.image.height)}else{context.drawImage(bitmap1.__bitmapData.image.get_src(),scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!this.__allowSmoothing||!bitmap1.smoothing){context.imageSmoothingEnabled=true}this.__popMaskObject(bitmap1,false)}}}else{if(!(bitmap.opaqueBackground==null&&bitmap.__graphics==null)){if(!!bitmap.__renderable){if(!(this.__getAlpha(bitmap.__worldAlpha)<=0)){if(bitmap.opaqueBackground!=null&&!bitmap.__isCacheBitmapRender&&bitmap.get_width()>0&&bitmap.get_height()>0){this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);var context1=this.context;this.setTransform(bitmap.__renderTransform,context1);var color=bitmap.opaqueBackground;context1.fillStyle="rgb("+(color>>>16&255)+","+(color>>>8&255)+","+(color&255)+")";context1.fillRect(0,0,bitmap.get_width(),bitmap.get_height());this.__popMaskObject(bitmap)}if(bitmap.__graphics!=null){if(!!bitmap.__renderable){var alpha1=this.__getAlpha(bitmap.__worldAlpha);if(!(alpha1<=0)){var graphics=bitmap.__graphics;if(graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this);var width=graphics.__width;var height=graphics.__height;var canvas=graphics.__canvas;if(canvas!=null&&graphics.__visible&&width>=1&&height>=1){var transform=graphics.__worldTransform;var context2=this.context;var scrollRect1=bitmap.__scrollRect;var scale9Grid=bitmap.__worldScale9Grid;if(scrollRect1==null||scrollRect1.width>0&&scrollRect1.height>0){this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);context2.globalAlpha=alpha1;if(scale9Grid!=null&&transform.b==0&&transform.c==0){context2.setTransform(1,0,0,1,transform.tx,transform.ty);var bounds=graphics.__bounds;var scaleX=graphics.__renderTransform.a;var scaleY=graphics.__renderTransform.d;var renderScaleX=transform.a;var renderScaleY=transform.d;var left=Math.max(1,Math.round(scale9Grid.x*scaleX));var top=Math.round(scale9Grid.y*scaleY);var right=Math.max(1,Math.round((bounds.get_right()-scale9Grid.get_right())*scaleX));var bottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*scaleY);var centerWidth=Math.round(scale9Grid.width*scaleX);var centerHeight=Math.round(scale9Grid.height*scaleY);var renderLeft=Math.round(scale9Grid.x*renderScaleX);var renderTop=Math.round(scale9Grid.y*renderScaleY);var renderRight=Math.round((bounds.get_right()-scale9Grid.get_right())*renderScaleX);var renderBottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*renderScaleY);var renderCenterWidth=Math.round(width*renderScaleX)-renderLeft-renderRight;var renderCenterHeight=Math.round(height*renderScaleY)-renderTop-renderBottom;this.applySmoothing(context2,false);if(centerWidth!=0&&centerHeight!=0){context2.drawImage(canvas,0,0,left,top,0,0,renderLeft,renderTop);context2.drawImage(canvas,left,0,centerWidth,top,renderLeft,0,renderCenterWidth,renderTop);context2.drawImage(canvas,left+centerWidth,0,right,top,renderLeft+renderCenterWidth,0,renderRight,renderTop);context2.drawImage(canvas,0,top,left,centerHeight,0,renderTop,renderLeft,renderCenterHeight);context2.drawImage(canvas,left,top,centerWidth,centerHeight,renderLeft,renderTop,renderCenterWidth,renderCenterHeight);context2.drawImage(canvas,left+centerWidth,top,right,centerHeight,renderLeft+renderCenterWidth,renderTop,renderRight,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,left,bottom,0,renderTop+renderCenterHeight,renderLeft,renderBottom);context2.drawImage(canvas,left,top+centerHeight,centerWidth,bottom,renderLeft,renderTop+renderCenterHeight,renderCenterWidth,renderBottom);context2.drawImage(canvas,left+centerWidth,top+centerHeight,right,bottom,renderLeft+renderCenterWidth,renderTop+renderCenterHeight,renderRight,renderBottom)}else if(centerWidth==0&&centerHeight!=0){var renderWidth=renderLeft+renderCenterWidth+renderRight;context2.drawImage(canvas,0,0,width,top,0,0,renderWidth,renderTop);context2.drawImage(canvas,0,top,width,centerHeight,0,renderTop,renderWidth,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,width,bottom,0,renderTop+renderCenterHeight,renderWidth,renderBottom)}else if(centerHeight==0&&centerWidth!=0){var renderHeight=renderTop+renderCenterHeight+renderBottom;context2.drawImage(canvas,0,0,left,height,0,0,renderLeft,renderHeight);context2.drawImage(canvas,left,0,centerWidth,height,renderLeft,0,renderCenterWidth,renderHeight);context2.drawImage(canvas,left+centerWidth,0,right,height,renderLeft+renderCenterWidth,0,renderRight,renderHeight)}}else{this.setTransform(transform,context2);if(this.__domRenderer!=null){var reverseScale=1/this.pixelRatio;context2.scale(reverseScale,reverseScale)}context2.drawImage(canvas,0,0,width,height)}this.__popMaskObject(bitmap)}}}}}}}}}if(!!bitmap.__renderable){var alpha2=this.__getAlpha(bitmap.__worldAlpha);if(alpha2>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){var context3=this.context;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);context3.globalAlpha=alpha2;var scrollRect2=bitmap.__scrollRect;this.setTransform(bitmap.__renderTransform,context3);if(!this.__allowSmoothing||!bitmap.smoothing){context3.imageSmoothingEnabled=false}if(scrollRect2==null){context3.drawImage(bitmap.__bitmapData.image.get_src(),0,0,bitmap.__bitmapData.image.width,bitmap.__bitmapData.image.height)}else{context3.drawImage(bitmap.__bitmapData.image.get_src(),scrollRect2.x,scrollRect2.y,scrollRect2.width,scrollRect2.height)}if(!this.__allowSmoothing||!bitmap.smoothing){context3.imageSmoothingEnabled=true}this.__popMaskObject(bitmap,false)}}}},__renderBitmapData:function(bitmapData){if(!bitmapData.readable){return}if(bitmapData.image.type==lime_graphics_ImageType.DATA){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmapData.image)}this.context.globalAlpha=1;this.setTransform(bitmapData.__renderTransform,this.context);this.context.drawImage(bitmapData.image.get_src(),0,0,bitmapData.image.width,bitmapData.image.height)},__renderDisplayObject:function(object){if(object!=null&&object.__type!=null){switch(object.__type._hx_index){case 0:this.__renderBitmap(object);break;case 2:this.__renderDisplayObjectContainer(object);break;case 1:case 4:this.__renderShape(object);break;case 5:this.__renderSimpleButton(object);break;case 6:this.__renderTextField(object);break;case 7:this.__renderTilemap(object);break;case 8:this.__renderVideo(object);break;default:}if(object.__customRenderEvent!=null){var event=object.__customRenderEvent;event.allowSmoothing=this.__allowSmoothing;event.objectMatrix.copyFrom(object.__renderTransform);event.objectColorTransform.__copyFrom(object.__worldColorTransform);event.renderer=this;event.type="renderCanvas";this.__setBlendMode(object.__worldBlendMode);this.__pushMaskObject(object);object.dispatchEvent(event);this.__popMaskObject(object)}}},__renderDisplayObjectContainer:function(container){if(this.__domRenderer==null){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0)}if(!container.__renderable||container.__worldAlpha<=0||container.get_mask()!=null&&(container.get_mask().get_width()<=0||container.get_mask().get_height()<=0)){return}this.__updateCacheBitmap(container,false);if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){var bitmap=container.__cacheBitmap;if(!!bitmap.__renderable){var alpha=this.__getAlpha(bitmap.__worldAlpha);if(alpha>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){var context=this.context;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);context.globalAlpha=alpha;var scrollRect=bitmap.__scrollRect;this.setTransform(bitmap.__renderTransform,context);if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(bitmap.__bitmapData.image.get_src(),0,0,bitmap.__bitmapData.image.width,bitmap.__bitmapData.image.height)}else{context.drawImage(bitmap.__bitmapData.image.get_src(),scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=true}this.__popMaskObject(bitmap,false)}}}else if(!(container.opaqueBackground==null&&container.__graphics==null)){if(!!container.__renderable){if(!(this.__getAlpha(container.__worldAlpha)<=0)){if(container.opaqueBackground!=null&&!container.__isCacheBitmapRender&&container.get_width()>0&&container.get_height()>0){this.__setBlendMode(container.__worldBlendMode);this.__pushMaskObject(container);var context1=this.context;this.setTransform(container.__renderTransform,context1);var color=container.opaqueBackground;context1.fillStyle="rgb("+(color>>>16&255)+","+(color>>>8&255)+","+(color&255)+")";context1.fillRect(0,0,container.get_width(),container.get_height());this.__popMaskObject(container)}if(container.__graphics!=null){if(!!container.__renderable){var alpha1=this.__getAlpha(container.__worldAlpha);if(!(alpha1<=0)){var graphics=container.__graphics;if(graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this);var width=graphics.__width;var height=graphics.__height;var canvas=graphics.__canvas;if(canvas!=null&&graphics.__visible&&width>=1&&height>=1){var transform=graphics.__worldTransform;var context2=this.context;var scrollRect1=container.__scrollRect;var scale9Grid=container.__worldScale9Grid;if(scrollRect1==null||scrollRect1.width>0&&scrollRect1.height>0){this.__setBlendMode(container.__worldBlendMode);this.__pushMaskObject(container);context2.globalAlpha=alpha1;if(scale9Grid!=null&&transform.b==0&&transform.c==0){context2.setTransform(1,0,0,1,transform.tx,transform.ty);var bounds=graphics.__bounds;var scaleX=graphics.__renderTransform.a;var scaleY=graphics.__renderTransform.d;var renderScaleX=transform.a;var renderScaleY=transform.d;var left=Math.max(1,Math.round(scale9Grid.x*scaleX));var top=Math.round(scale9Grid.y*scaleY);var right=Math.max(1,Math.round((bounds.get_right()-scale9Grid.get_right())*scaleX));var bottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*scaleY);var centerWidth=Math.round(scale9Grid.width*scaleX);var centerHeight=Math.round(scale9Grid.height*scaleY);var renderLeft=Math.round(scale9Grid.x*renderScaleX);var renderTop=Math.round(scale9Grid.y*renderScaleY);var renderRight=Math.round((bounds.get_right()-scale9Grid.get_right())*renderScaleX);var renderBottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*renderScaleY);var renderCenterWidth=Math.round(width*renderScaleX)-renderLeft-renderRight;var renderCenterHeight=Math.round(height*renderScaleY)-renderTop-renderBottom;this.applySmoothing(context2,false);if(centerWidth!=0&&centerHeight!=0){context2.drawImage(canvas,0,0,left,top,0,0,renderLeft,renderTop);context2.drawImage(canvas,left,0,centerWidth,top,renderLeft,0,renderCenterWidth,renderTop);context2.drawImage(canvas,left+centerWidth,0,right,top,renderLeft+renderCenterWidth,0,renderRight,renderTop);context2.drawImage(canvas,0,top,left,centerHeight,0,renderTop,renderLeft,renderCenterHeight);context2.drawImage(canvas,left,top,centerWidth,centerHeight,renderLeft,renderTop,renderCenterWidth,renderCenterHeight);context2.drawImage(canvas,left+centerWidth,top,right,centerHeight,renderLeft+renderCenterWidth,renderTop,renderRight,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,left,bottom,0,renderTop+renderCenterHeight,renderLeft,renderBottom);context2.drawImage(canvas,left,top+centerHeight,centerWidth,bottom,renderLeft,renderTop+renderCenterHeight,renderCenterWidth,renderBottom);context2.drawImage(canvas,left+centerWidth,top+centerHeight,right,bottom,renderLeft+renderCenterWidth,renderTop+renderCenterHeight,renderRight,renderBottom)}else if(centerWidth==0&&centerHeight!=0){var renderWidth=renderLeft+renderCenterWidth+renderRight;context2.drawImage(canvas,0,0,width,top,0,0,renderWidth,renderTop);context2.drawImage(canvas,0,top,width,centerHeight,0,renderTop,renderWidth,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,width,bottom,0,renderTop+renderCenterHeight,renderWidth,renderBottom)}else if(centerHeight==0&&centerWidth!=0){var renderHeight=renderTop+renderCenterHeight+renderBottom;context2.drawImage(canvas,0,0,left,height,0,0,renderLeft,renderHeight);context2.drawImage(canvas,left,0,centerWidth,height,renderLeft,0,renderCenterWidth,renderHeight);context2.drawImage(canvas,left+centerWidth,0,right,height,renderLeft+renderCenterWidth,0,renderRight,renderHeight)}}else{this.setTransform(transform,context2);if(this.__domRenderer!=null){var reverseScale=1/this.pixelRatio;context2.scale(reverseScale,reverseScale)}context2.drawImage(canvas,0,0,width,height)}this.__popMaskObject(container)}}}}}}}}}if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){return}this.__pushMaskObject(container);if(this.__stage!=null){var _g=0;var _g1=container.__children;while(_g<_g1.length){var child=_g1[_g];++_g;this.__renderDisplayObject(child);child.__renderDirty=false}container.__renderDirty=false}else{var _g2=0;var _g11=container.__children;while(_g2<_g11.length)this.__renderDisplayObject(_g11[_g2++])}this.__popMaskObject(container)},__renderMask:function(mask){if(mask!=null){switch(mask.__type._hx_index){case 0:this.context.rect(0,0,mask.get_width(),mask.get_height());break;case 2:var container=mask;if(this.__domRenderer==null){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0)}if(container.__graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.renderMask(container.__graphics,this)}var _g=0;var _g1=container.__children;while(_g<_g1.length)this.__renderMask(_g1[_g++]);break;case 3:break;case 5:this.__renderMask(mask.__currentState);break;default:if(mask.__graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.renderMask(mask.__graphics,this)}}}},__renderShape:function(shape){if(shape.get_mask()==null||shape.get_mask().get_width()>0&&shape.get_mask().get_height()>0){this.__updateCacheBitmap(shape,false);if(shape.__cacheBitmap!=null&&!shape.__isCacheBitmapRender){var bitmap=shape.__cacheBitmap;if(!!bitmap.__renderable){var alpha=this.__getAlpha(bitmap.__worldAlpha);if(alpha>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){var context=this.context;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);context.globalAlpha=alpha;var scrollRect=bitmap.__scrollRect;this.setTransform(bitmap.__renderTransform,context);if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(bitmap.__bitmapData.image.get_src(),0,0,bitmap.__bitmapData.image.width,bitmap.__bitmapData.image.height)}else{context.drawImage(bitmap.__bitmapData.image.get_src(),scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=true}this.__popMaskObject(bitmap,false)}}}else if(!(shape.opaqueBackground==null&&shape.__graphics==null)){if(!!shape.__renderable){if(!(this.__getAlpha(shape.__worldAlpha)<=0)){if(shape.opaqueBackground!=null&&!shape.__isCacheBitmapRender&&shape.get_width()>0&&shape.get_height()>0){this.__setBlendMode(shape.__worldBlendMode);this.__pushMaskObject(shape);var context1=this.context;this.setTransform(shape.__renderTransform,context1);var color=shape.opaqueBackground;context1.fillStyle="rgb("+(color>>>16&255)+","+(color>>>8&255)+","+(color&255)+")";context1.fillRect(0,0,shape.get_width(),shape.get_height());this.__popMaskObject(shape)}if(shape.__graphics!=null){if(!!shape.__renderable){var alpha1=this.__getAlpha(shape.__worldAlpha);if(!(alpha1<=0)){var graphics=shape.__graphics;if(graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this);var width=graphics.__width;var height=graphics.__height;var canvas=graphics.__canvas;if(canvas!=null&&graphics.__visible&&width>=1&&height>=1){var transform=graphics.__worldTransform;var context2=this.context;var scrollRect1=shape.__scrollRect;var scale9Grid=shape.__worldScale9Grid;if(scrollRect1==null||scrollRect1.width>0&&scrollRect1.height>0){this.__setBlendMode(shape.__worldBlendMode);this.__pushMaskObject(shape);context2.globalAlpha=alpha1;if(scale9Grid!=null&&transform.b==0&&transform.c==0){context2.setTransform(1,0,0,1,transform.tx,transform.ty);var bounds=graphics.__bounds;var scaleX=graphics.__renderTransform.a;var scaleY=graphics.__renderTransform.d;var renderScaleX=transform.a;var renderScaleY=transform.d;var left=Math.max(1,Math.round(scale9Grid.x*scaleX));var top=Math.round(scale9Grid.y*scaleY);var right=Math.max(1,Math.round((bounds.get_right()-scale9Grid.get_right())*scaleX));var bottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*scaleY);var centerWidth=Math.round(scale9Grid.width*scaleX);var centerHeight=Math.round(scale9Grid.height*scaleY);var renderLeft=Math.round(scale9Grid.x*renderScaleX);var renderTop=Math.round(scale9Grid.y*renderScaleY);var renderRight=Math.round((bounds.get_right()-scale9Grid.get_right())*renderScaleX);var renderBottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*renderScaleY);var renderCenterWidth=Math.round(width*renderScaleX)-renderLeft-renderRight;var renderCenterHeight=Math.round(height*renderScaleY)-renderTop-renderBottom;this.applySmoothing(context2,false);if(centerWidth!=0&&centerHeight!=0){context2.drawImage(canvas,0,0,left,top,0,0,renderLeft,renderTop);context2.drawImage(canvas,left,0,centerWidth,top,renderLeft,0,renderCenterWidth,renderTop);context2.drawImage(canvas,left+centerWidth,0,right,top,renderLeft+renderCenterWidth,0,renderRight,renderTop);context2.drawImage(canvas,0,top,left,centerHeight,0,renderTop,renderLeft,renderCenterHeight);context2.drawImage(canvas,left,top,centerWidth,centerHeight,renderLeft,renderTop,renderCenterWidth,renderCenterHeight);context2.drawImage(canvas,left+centerWidth,top,right,centerHeight,renderLeft+renderCenterWidth,renderTop,renderRight,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,left,bottom,0,renderTop+renderCenterHeight,renderLeft,renderBottom);context2.drawImage(canvas,left,top+centerHeight,centerWidth,bottom,renderLeft,renderTop+renderCenterHeight,renderCenterWidth,renderBottom);context2.drawImage(canvas,left+centerWidth,top+centerHeight,right,bottom,renderLeft+renderCenterWidth,renderTop+renderCenterHeight,renderRight,renderBottom)}else if(centerWidth==0&&centerHeight!=0){var renderWidth=renderLeft+renderCenterWidth+renderRight;context2.drawImage(canvas,0,0,width,top,0,0,renderWidth,renderTop);context2.drawImage(canvas,0,top,width,centerHeight,0,renderTop,renderWidth,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,width,bottom,0,renderTop+renderCenterHeight,renderWidth,renderBottom)}else if(centerHeight==0&&centerWidth!=0){var renderHeight=renderTop+renderCenterHeight+renderBottom;context2.drawImage(canvas,0,0,left,height,0,0,renderLeft,renderHeight);context2.drawImage(canvas,left,0,centerWidth,height,renderLeft,0,renderCenterWidth,renderHeight);context2.drawImage(canvas,left+centerWidth,0,right,height,renderLeft+renderCenterWidth,0,renderRight,renderHeight)}}else{this.setTransform(transform,context2);if(this.__domRenderer!=null){var reverseScale=1/this.pixelRatio;context2.scale(reverseScale,reverseScale)}context2.drawImage(canvas,0,0,width,height)}this.__popMaskObject(shape)}}}}}}}}}}},__renderSimpleButton:function(button){if(!button.__renderable||button.__worldAlpha<=0||button.__currentState==null){return}this.__pushMaskObject(button);this.__renderDisplayObject(button.__currentState);this.__popMaskObject(button)},__renderTextField:function(textField){if(this.__domRenderer!=null&&!textField.__renderedOnCanvasWhileOnDOM){textField.__renderedOnCanvasWhileOnDOM=true;if(textField.get_type()==1){textField.replaceText(0,textField.__text.length,textField.__text)}if(textField.__isHTML){textField.__updateText(openfl__$internal_formats_html_HTMLParser.parse(textField.__text,textField.__textFormat,textField.__textEngine.textFormatRanges))}textField.__dirty=true;textField.__layoutDirty=true;if(!textField.__renderDirty){textField.__renderDirty=true;textField.__setParentRenderDirty()}}if(textField.get_mask()==null||textField.get_mask().get_width()>0&&textField.get_mask().get_height()>0){this.__updateCacheBitmap(textField,false);if(textField.__cacheBitmap!=null&&!textField.__isCacheBitmapRender){var bitmap=textField.__cacheBitmap;if(!!bitmap.__renderable){var alpha=this.__getAlpha(bitmap.__worldAlpha);if(alpha>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){var context=this.context;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);context.globalAlpha=alpha;var scrollRect=bitmap.__scrollRect;this.setTransform(bitmap.__renderTransform,context);if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(bitmap.__bitmapData.image.get_src(),0,0,bitmap.__bitmapData.image.width,bitmap.__bitmapData.image.height)}else{context.drawImage(bitmap.__bitmapData.image.get_src(),scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=true}this.__popMaskObject(bitmap,false)}}}else{var textEngine=textField.__textEngine;var bounds=textEngine.background||textEngine.border?textEngine.bounds:textEngine.textBounds;var graphics=textField.__graphics;if(textField.__dirty){textField.__updateLayout();if(graphics.__bounds==null){graphics.__bounds=new openfl_geom_Rectangle}graphics.__bounds.copyFrom(bounds)}graphics.__update(this.__worldTransform);if(textField.__dirty||graphics.__softwareDirty){var width=graphics.__width;var height=graphics.__height;if((textEngine.text==null||textEngine.text=="")&&!textEngine.background&&!textEngine.border&&!textEngine.__hasFocus&&(textEngine.type!=1||!textEngine.selectable)||(textEngine.width<=0||textEngine.height<=0)&&textEngine.autoSize!=2){textField.__graphics.__canvas=null;textField.__graphics.__context=null;textField.__graphics.__bitmap=null;textField.__graphics.__softwareDirty=false;textField.__graphics.set___dirty(false);textField.__dirty=false}else{if(textField.__graphics.__canvas==null){textField.__graphics.__canvas=window.document.createElement("canvas");textField.__graphics.__context=textField.__graphics.__canvas.getContext("2d")}openfl__$internal_renderer_canvas_CanvasTextField.context=graphics.__context;var transform=graphics.__renderTransform;if(this.__domRenderer!=null){var scale=this.pixelRatio;graphics.__canvas.width=width*scale|0;graphics.__canvas.height=height*scale|0;graphics.__canvas.style.width=width+"px";graphics.__canvas.style.height=height+"px";var matrix=openfl_geom_Matrix.__pool.get();matrix.copyFrom(transform);matrix.scale(scale,scale);this.setTransform(matrix,openfl__$internal_renderer_canvas_CanvasTextField.context);openfl_geom_Matrix.__pool.release(matrix)}else{graphics.__canvas.width=width;graphics.__canvas.height=height;openfl__$internal_renderer_canvas_CanvasTextField.context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect==null){openfl__$internal_renderer_canvas_CanvasTextField.clearRect=typeof navigator!=="undefined"&&typeof navigator["isCocoonJS"]!=="undefined"}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect){openfl__$internal_renderer_canvas_CanvasTextField.context.clearRect(0,0,graphics.__canvas.width,graphics.__canvas.height)}if(textEngine.text!=null&&textEngine.text!=""||textEngine.__hasFocus){var text=textEngine.text;if(!this.__allowSmoothing||textEngine.antiAliasType==0&&textEngine.sharpness==400){graphics.__context.imageSmoothingEnabled=false}else{graphics.__context.imageSmoothingEnabled=true}if(textEngine.border||textEngine.background){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1);if(textEngine.background){var tmp=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var tmp1=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp1;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}openfl__$internal_renderer_canvas_CanvasTextField.context.textBaseline="alphabetic";openfl__$internal_renderer_canvas_CanvasTextField.context.textAlign="start";var scrollX=-textField.get_scrollH();var scrollY=0;var _g=0;var _g1=textField.get_scrollV()-1;while(_g<_g1)scrollY-=textEngine.lineHeights.get(_g++);var advance;var group=textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.lineIndex<textField.get_scrollV()-1){continue}if(group1.lineIndex>textEngine.get_bottomScrollV()-1){break}var color="#"+StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.font=openfl__$internal_text_TextEngine.getFont(group1.format);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(group1.startIndex,group1.endIndex),group1.offsetX+scrollX-bounds.x,group1.offsetY+group1.ascent+scrollY-bounds.y);if(textField.__caretIndex>-1&&textEngine.selectable){if(textField.__selectionIndex==textField.__caretIndex){if(textField.__showCursor&&group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex){advance=0;var _g3=0;var _g4=textField.__caretIndex-group1.startIndex;while(_g3<_g4){var i=_g3++;if(group1.positions.length<=i){break}advance+=group1.positions[i]}var scrollY1=0;var _g5=textField.get_scrollV();var _g6=group1.lineIndex+1;while(_g5<_g6)scrollY1+=textEngine.lineHeights.get(_g5++-1);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp2=StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp2;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+2-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}else if(group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex||group1.startIndex<=textField.__selectionIndex&&group1.endIndex>=textField.__selectionIndex||group1.startIndex>textField.__caretIndex&&group1.endIndex<textField.__selectionIndex||group1.startIndex>textField.__selectionIndex&&group1.endIndex<textField.__caretIndex){var selectionStart=Math.min(textField.__selectionIndex,textField.__caretIndex)|0;var selectionEnd=Math.max(textField.__selectionIndex,textField.__caretIndex)|0;if(group1.startIndex>selectionStart){selectionStart=group1.startIndex}if(group1.endIndex<selectionEnd){selectionEnd=group1.endIndex}var end;var start=textField.getCharBoundaries(selectionStart);if(selectionEnd>=group1.endIndex){end=textField.getCharBoundaries(group1.endIndex-1);end.x+=end.width+2}else{end=textField.getCharBoundaries(selectionEnd)}if(start!=null&&end!=null){openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#000000";openfl__$internal_renderer_canvas_CanvasTextField.context.fillRect(start.x+scrollX,start.y+scrollY,end.x-start.x,group1.height);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#FFFFFF";openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(selectionStart,selectionEnd),scrollX+start.x,group1.offsetY+group1.ascent+scrollY)}}}if(group1.format.underline){openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var x=group1.offsetX+scrollX-bounds.x;var y=Math.floor(group1.offsetY+scrollY+group1.ascent-bounds.y)+.5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(x,y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(x+group1.width,y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}}else{if(textEngine.border||textEngine.background){if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1)}else{openfl__$internal_renderer_canvas_CanvasTextField.context.rect(0,0,bounds.width,bounds.height)}if(textEngine.background){var tmp3=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp3;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineCap="square";var tmp4=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp4;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}if(textField.__caretIndex>-1&&textEngine.selectable&&textField.__showCursor){var scrollX1=-textField.get_scrollH();var scrollY2=0;var _g2=0;var _g11=textField.get_scrollV()-1;while(_g2<_g11)scrollY2+=textEngine.lineHeights.get(_g2++);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp5=StringTools.hex(textField.get_defaultTextFormat().color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(scrollX1+2.5,scrollY2+2.5);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(scrollX1+2.5,scrollY2+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}graphics.__bitmap=openfl_display_BitmapData.fromCanvas(textField.__graphics.__canvas);graphics.__visible=true;textField.__dirty=false;graphics.__softwareDirty=false;graphics.set___dirty(false)}}var smoothingEnabled=false;if(textField.__textEngine.antiAliasType==0&&textField.__textEngine.gridFitType==1){smoothingEnabled=this.context.imageSmoothingEnabled;if(smoothingEnabled){this.context.imageSmoothingEnabled=false}}if(!(textField.opaqueBackground==null&&textField.__graphics==null)){if(!!textField.__renderable){if(!(this.__getAlpha(textField.__worldAlpha)<=0)){if(textField.opaqueBackground!=null&&!textField.__isCacheBitmapRender&&textField.get_width()>0&&textField.get_height()>0){this.__setBlendMode(textField.__worldBlendMode);this.__pushMaskObject(textField);var context1=this.context;this.setTransform(textField.__renderTransform,context1);var color1=textField.opaqueBackground;context1.fillStyle="rgb("+(color1>>>16&255)+","+(color1>>>8&255)+","+(color1&255)+")";context1.fillRect(0,0,textField.get_width(),textField.get_height());this.__popMaskObject(textField)}if(textField.__graphics!=null){if(!!textField.__renderable){var alpha1=this.__getAlpha(textField.__worldAlpha);if(!(alpha1<=0)){var graphics1=textField.__graphics;if(graphics1!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics1,this);var width1=graphics1.__width;var height1=graphics1.__height;var canvas=graphics1.__canvas;if(canvas!=null&&graphics1.__visible&&width1>=1&&height1>=1){var transform1=graphics1.__worldTransform;var context2=this.context;var scrollRect1=textField.__scrollRect;var scale9Grid=textField.__worldScale9Grid;if(scrollRect1==null||scrollRect1.width>0&&scrollRect1.height>0){this.__setBlendMode(textField.__worldBlendMode);this.__pushMaskObject(textField);context2.globalAlpha=alpha1;if(scale9Grid!=null&&transform1.b==0&&transform1.c==0){context2.setTransform(1,0,0,1,transform1.tx,transform1.ty);var bounds1=graphics1.__bounds;var scaleX=graphics1.__renderTransform.a;var scaleY=graphics1.__renderTransform.d;var renderScaleX=transform1.a;var renderScaleY=transform1.d;var left=Math.max(1,Math.round(scale9Grid.x*scaleX));var top=Math.round(scale9Grid.y*scaleY);var right=Math.max(1,Math.round((bounds1.get_right()-scale9Grid.get_right())*scaleX));var bottom=Math.round((bounds1.get_bottom()-scale9Grid.get_bottom())*scaleY);var centerWidth=Math.round(scale9Grid.width*scaleX);var centerHeight=Math.round(scale9Grid.height*scaleY);var renderLeft=Math.round(scale9Grid.x*renderScaleX);var renderTop=Math.round(scale9Grid.y*renderScaleY);var renderRight=Math.round((bounds1.get_right()-scale9Grid.get_right())*renderScaleX);var renderBottom=Math.round((bounds1.get_bottom()-scale9Grid.get_bottom())*renderScaleY);var renderCenterWidth=Math.round(width1*renderScaleX)-renderLeft-renderRight;var renderCenterHeight=Math.round(height1*renderScaleY)-renderTop-renderBottom;this.applySmoothing(context2,false);if(centerWidth!=0&&centerHeight!=0){context2.drawImage(canvas,0,0,left,top,0,0,renderLeft,renderTop);context2.drawImage(canvas,left,0,centerWidth,top,renderLeft,0,renderCenterWidth,renderTop);context2.drawImage(canvas,left+centerWidth,0,right,top,renderLeft+renderCenterWidth,0,renderRight,renderTop);context2.drawImage(canvas,0,top,left,centerHeight,0,renderTop,renderLeft,renderCenterHeight);context2.drawImage(canvas,left,top,centerWidth,centerHeight,renderLeft,renderTop,renderCenterWidth,renderCenterHeight);context2.drawImage(canvas,left+centerWidth,top,right,centerHeight,renderLeft+renderCenterWidth,renderTop,renderRight,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,left,bottom,0,renderTop+renderCenterHeight,renderLeft,renderBottom);context2.drawImage(canvas,left,top+centerHeight,centerWidth,bottom,renderLeft,renderTop+renderCenterHeight,renderCenterWidth,renderBottom);context2.drawImage(canvas,left+centerWidth,top+centerHeight,right,bottom,renderLeft+renderCenterWidth,renderTop+renderCenterHeight,renderRight,renderBottom)}else if(centerWidth==0&&centerHeight!=0){var renderWidth=renderLeft+renderCenterWidth+renderRight;context2.drawImage(canvas,0,0,width1,top,0,0,renderWidth,renderTop);context2.drawImage(canvas,0,top,width1,centerHeight,0,renderTop,renderWidth,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,width1,bottom,0,renderTop+renderCenterHeight,renderWidth,renderBottom)}else if(centerHeight==0&&centerWidth!=0){var renderHeight=renderTop+renderCenterHeight+renderBottom;context2.drawImage(canvas,0,0,left,height1,0,0,renderLeft,renderHeight);context2.drawImage(canvas,left,0,centerWidth,height1,renderLeft,0,renderCenterWidth,renderHeight);context2.drawImage(canvas,left+centerWidth,0,right,height1,renderLeft+renderCenterWidth,0,renderRight,renderHeight)}}else{this.setTransform(transform1,context2);if(this.__domRenderer!=null){var reverseScale=1/this.pixelRatio;context2.scale(reverseScale,reverseScale)}context2.drawImage(canvas,0,0,width1,height1)}this.__popMaskObject(textField)}}}}}}}}}if(smoothingEnabled){this.context.imageSmoothingEnabled=true}}}},__renderTilemap:function(tilemap){this.__updateCacheBitmap(tilemap,false);if(tilemap.__cacheBitmap!=null&&!tilemap.__isCacheBitmapRender){var bitmap=tilemap.__cacheBitmap;if(!!bitmap.__renderable){var alpha=this.__getAlpha(bitmap.__worldAlpha);if(alpha>0&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){var context=this.context;this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap,false);lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);context.globalAlpha=alpha;var scrollRect=bitmap.__scrollRect;this.setTransform(bitmap.__renderTransform,context);if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(bitmap.__bitmapData.image.get_src(),0,0,bitmap.__bitmapData.image.width,bitmap.__bitmapData.image.height)}else{context.drawImage(bitmap.__bitmapData.image.get_src(),scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!this.__allowSmoothing||!bitmap.smoothing){context.imageSmoothingEnabled=true}this.__popMaskObject(bitmap,false)}}}else{if(!(tilemap.opaqueBackground==null&&tilemap.__graphics==null)){if(!!tilemap.__renderable){if(!(this.__getAlpha(tilemap.__worldAlpha)<=0)){if(tilemap.opaqueBackground!=null&&!tilemap.__isCacheBitmapRender&&tilemap.get_width()>0&&tilemap.get_height()>0){this.__setBlendMode(tilemap.__worldBlendMode);this.__pushMaskObject(tilemap);var context1=this.context;this.setTransform(tilemap.__renderTransform,context1);var color=tilemap.opaqueBackground;context1.fillStyle="rgb("+(color>>>16&255)+","+(color>>>8&255)+","+(color&255)+")";context1.fillRect(0,0,tilemap.get_width(),tilemap.get_height());this.__popMaskObject(tilemap)}if(tilemap.__graphics!=null){if(!!tilemap.__renderable){var alpha1=this.__getAlpha(tilemap.__worldAlpha);if(!(alpha1<=0)){var graphics=tilemap.__graphics;if(graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this);var width=graphics.__width;var height=graphics.__height;var canvas=graphics.__canvas;if(canvas!=null&&graphics.__visible&&width>=1&&height>=1){var transform=graphics.__worldTransform;var context2=this.context;var scrollRect1=tilemap.__scrollRect;var scale9Grid=tilemap.__worldScale9Grid;if(scrollRect1==null||scrollRect1.width>0&&scrollRect1.height>0){this.__setBlendMode(tilemap.__worldBlendMode);this.__pushMaskObject(tilemap);context2.globalAlpha=alpha1;if(scale9Grid!=null&&transform.b==0&&transform.c==0){context2.setTransform(1,0,0,1,transform.tx,transform.ty);var bounds=graphics.__bounds;var scaleX=graphics.__renderTransform.a;var scaleY=graphics.__renderTransform.d;var renderScaleX=transform.a;var renderScaleY=transform.d;var left=Math.max(1,Math.round(scale9Grid.x*scaleX));var top=Math.round(scale9Grid.y*scaleY);var right=Math.max(1,Math.round((bounds.get_right()-scale9Grid.get_right())*scaleX));var bottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*scaleY);var centerWidth=Math.round(scale9Grid.width*scaleX);var centerHeight=Math.round(scale9Grid.height*scaleY);var renderLeft=Math.round(scale9Grid.x*renderScaleX);var renderTop=Math.round(scale9Grid.y*renderScaleY);var renderRight=Math.round((bounds.get_right()-scale9Grid.get_right())*renderScaleX);var renderBottom=Math.round((bounds.get_bottom()-scale9Grid.get_bottom())*renderScaleY);var renderCenterWidth=Math.round(width*renderScaleX)-renderLeft-renderRight;var renderCenterHeight=Math.round(height*renderScaleY)-renderTop-renderBottom;this.applySmoothing(context2,false);if(centerWidth!=0&&centerHeight!=0){context2.drawImage(canvas,0,0,left,top,0,0,renderLeft,renderTop);context2.drawImage(canvas,left,0,centerWidth,top,renderLeft,0,renderCenterWidth,renderTop);context2.drawImage(canvas,left+centerWidth,0,right,top,renderLeft+renderCenterWidth,0,renderRight,renderTop);context2.drawImage(canvas,0,top,left,centerHeight,0,renderTop,renderLeft,renderCenterHeight);context2.drawImage(canvas,left,top,centerWidth,centerHeight,renderLeft,renderTop,renderCenterWidth,renderCenterHeight);context2.drawImage(canvas,left+centerWidth,top,right,centerHeight,renderLeft+renderCenterWidth,renderTop,renderRight,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,left,bottom,0,renderTop+renderCenterHeight,renderLeft,renderBottom);context2.drawImage(canvas,left,top+centerHeight,centerWidth,bottom,renderLeft,renderTop+renderCenterHeight,renderCenterWidth,renderBottom);context2.drawImage(canvas,left+centerWidth,top+centerHeight,right,bottom,renderLeft+renderCenterWidth,renderTop+renderCenterHeight,renderRight,renderBottom)}else if(centerWidth==0&&centerHeight!=0){var renderWidth=renderLeft+renderCenterWidth+renderRight;context2.drawImage(canvas,0,0,width,top,0,0,renderWidth,renderTop);context2.drawImage(canvas,0,top,width,centerHeight,0,renderTop,renderWidth,renderCenterHeight);context2.drawImage(canvas,0,top+centerHeight,width,bottom,0,renderTop+renderCenterHeight,renderWidth,renderBottom)}else if(centerHeight==0&&centerWidth!=0){var renderHeight=renderTop+renderCenterHeight+renderBottom;context2.drawImage(canvas,0,0,left,height,0,0,renderLeft,renderHeight);context2.drawImage(canvas,left,0,centerWidth,height,renderLeft,0,renderCenterWidth,renderHeight);context2.drawImage(canvas,left+centerWidth,0,right,height,renderLeft+renderCenterWidth,0,renderRight,renderHeight)}}else{this.setTransform(transform,context2);if(this.__domRenderer!=null){var reverseScale=1/this.pixelRatio;context2.scale(reverseScale,reverseScale)}context2.drawImage(canvas,0,0,width,height)}this.__popMaskObject(tilemap)}}}}}}}}}if(!(!tilemap.__renderable||tilemap.__group.__tiles.length==0)){var alpha2=this.__getAlpha(tilemap.__worldAlpha);if(!(alpha2<=0)){var context3=this.context;this.__setBlendMode(tilemap.__worldBlendMode);this.__pushMaskObject(tilemap);var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,tilemap.__width,tilemap.__height);this.__pushMaskRect(rect,tilemap.__renderTransform);if(!this.__allowSmoothing||!tilemap.smoothing){context3.imageSmoothingEnabled=false}openfl__$internal_renderer_canvas_CanvasTilemap.renderTileContainer(tilemap.__group,this,tilemap.__renderTransform,tilemap.__tileset,this.__allowSmoothing&&tilemap.smoothing,tilemap.tileAlphaEnabled,alpha2,tilemap.tileBlendModeEnabled,tilemap.__worldBlendMode,null,null,rect);if(!this.__allowSmoothing||!tilemap.smoothing){context3.imageSmoothingEnabled=true}this.__popMaskRect();this.__popMaskObject(tilemap);openfl_geom_Rectangle.__pool.release(rect)}}}},__renderVideo:function(video){openfl__$internal_renderer_canvas_CanvasVideo.render(video,this)},__setBlendMode:function(value){if(this.__overrideBlendMode!=null){value=this.__overrideBlendMode}if(this.__blendMode==value){return}this.__blendMode=value;this.__setBlendModeContext(this.context,value)},__setBlendModeContext:function(context,value){switch(value){case 0:context.globalCompositeOperation="lighter";break;case 2:context.globalCompositeOperation="darken";break;case 3:context.globalCompositeOperation="difference";break;case 5:context.globalCompositeOperation="hard-light";break;case 8:context.globalCompositeOperation="lighten";break;case 9:context.globalCompositeOperation="multiply";break;case 11:context.globalCompositeOperation="overlay";break;case 12:context.globalCompositeOperation="screen";break;default:context.globalCompositeOperation="source-over"}},__updateCacheBitmap:function(object,force){if(object.__isCacheBitmapRender){return false}var updated=false;if(object.get_cacheAsBitmap()||!object.__worldColorTransform.__isDefault(true)||this.__worldColorTransform!=null&&!this.__worldColorTransform.__isDefault(true)){if(object.__cacheBitmapMatrix==null){object.__cacheBitmapMatrix=new openfl_geom_Matrix}var hasFilters=object.__filters!=null;var bitmapMatrix=object.__cacheAsBitmapMatrix!=null?object.__cacheAsBitmapMatrix:object.__renderTransform;var rect=null;var colorTransform=openfl_geom_ColorTransform.__pool.get();colorTransform.__copyFrom(object.__worldColorTransform);if(this.__worldColorTransform!=null){colorTransform.__combine(this.__worldColorTransform)}var needRender=object.__cacheBitmap==null||object.__renderDirty&&(force||object.__children!=null&&object.__children.length>0)||object.opaqueBackground!=object.__cacheBitmapBackground||object.__graphics!=null&&object.__graphics.__softwareDirty||!object.__cacheBitmapColorTransform.__equals(colorTransform,true);if(!needRender&&(bitmapMatrix.a!=object.__cacheBitmapMatrix.a||bitmapMatrix.b!=object.__cacheBitmapMatrix.b||bitmapMatrix.c!=object.__cacheBitmapMatrix.c||bitmapMatrix.d!=object.__cacheBitmapMatrix.d)){needRender=true}if(hasFilters&&!needRender){var _g=0;var _g1=object.__filters;while(_g<_g1.length)if(_g1[_g++].__renderDirty){needRender=true;break}}if(!needRender&&object.__cacheBitmapData!=null&&object.__cacheBitmapData.image!=null&&object.__cacheBitmapData.image.version<object.__cacheBitmapData.__textureVersion){needRender=true}var updateTransform=needRender||!object.__cacheBitmap.__worldTransform.equals(object.__worldTransform);object.__cacheBitmapMatrix.copyFrom(bitmapMatrix);object.__cacheBitmapMatrix.tx=0;object.__cacheBitmapMatrix.ty=0;var bitmapWidth=0;var bitmapHeight=0;var filterWidth=0;var filterHeight=0;var offsetX=0;var offsetY=0;if(updateTransform){rect=openfl_geom_Rectangle.__pool.get();object.__getFilterBounds(rect,object.__cacheBitmapMatrix);filterWidth=Math.ceil(rect.width);filterHeight=Math.ceil(rect.height);offsetX=rect.x>0?Math.ceil(rect.x):Math.floor(rect.x);offsetY=rect.y>0?Math.ceil(rect.y):Math.floor(rect.y);if(object.__cacheBitmapData!=null){if(filterWidth>object.__cacheBitmapData.width||filterHeight>object.__cacheBitmapData.height){bitmapWidth=Math.ceil(Math.max(filterWidth*1.25,object.__cacheBitmapData.width));bitmapHeight=Math.ceil(Math.max(filterHeight*1.25,object.__cacheBitmapData.height));needRender=true}else{bitmapWidth=object.__cacheBitmapData.width;bitmapHeight=object.__cacheBitmapData.height}}else{bitmapWidth=filterWidth;bitmapHeight=filterHeight}}if(needRender){object.__cacheBitmapBackground=object.opaqueBackground;if(filterWidth>=.5&&filterHeight>=.5){var needsFill=object.opaqueBackground!=null&&(bitmapWidth!=filterWidth||bitmapHeight!=filterHeight);var fillColor=object.opaqueBackground!=null?-16777216|object.opaqueBackground:0;var bitmapColor=needsFill?0:fillColor;if(object.__cacheBitmapData==null||bitmapWidth>object.__cacheBitmapData.width||bitmapHeight>object.__cacheBitmapData.height){object.__cacheBitmapData=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,bitmapColor);if(object.__cacheBitmap==null){object.__cacheBitmap=new openfl_display_Bitmap}object.__cacheBitmap.__bitmapData=object.__cacheBitmapData;object.__cacheBitmapRendererSW=null}else{object.__cacheBitmapData.fillRect(object.__cacheBitmapData.rect,bitmapColor)}if(needsFill){rect.setTo(0,0,filterWidth,filterHeight);object.__cacheBitmapData.fillRect(rect,fillColor)}}else{openfl_geom_ColorTransform.__pool.release(colorTransform);if(this.__domRenderer!=null&&object.__cacheBitmap!=null){this.__domRenderer.__clearBitmap(object.__cacheBitmap)}object.__cacheBitmap=null;object.__cacheBitmapData=null;object.__cacheBitmapData2=null;object.__cacheBitmapData3=null;object.__cacheBitmapRendererSW=null;return true}}else{object.__cacheBitmapData=object.__cacheBitmap.get_bitmapData();object.__cacheBitmapData2=null;object.__cacheBitmapData3=null}if(updateTransform){object.__cacheBitmap.__worldTransform.copyFrom(object.__worldTransform);if(bitmapMatrix==object.__renderTransform){object.__cacheBitmap.__renderTransform.identity();object.__cacheBitmap.__renderTransform.tx=object.__renderTransform.tx+offsetX;object.__cacheBitmap.__renderTransform.ty=object.__renderTransform.ty+offsetY}else{object.__cacheBitmap.__renderTransform.copyFrom(object.__cacheBitmapMatrix);object.__cacheBitmap.__renderTransform.invert();object.__cacheBitmap.__renderTransform.concat(object.__renderTransform);object.__cacheBitmap.__renderTransform.tx+=offsetX;object.__cacheBitmap.__renderTransform.ty+=offsetY}}object.__cacheBitmap.smoothing=this.__allowSmoothing;object.__cacheBitmap.__renderable=object.__renderable;object.__cacheBitmap.__worldAlpha=object.__worldAlpha;object.__cacheBitmap.__worldBlendMode=object.__worldBlendMode;object.__cacheBitmap.__worldShader=object.__worldShader;object.__cacheBitmap.set_mask(object.__mask);if(needRender){if(object.__cacheBitmapRendererSW==null||object.__cacheBitmapRendererSW.__type!="canvas"){if(object.__cacheBitmapData.image==null){object.__cacheBitmapData=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,object.opaqueBackground!=null?-16777216|object.opaqueBackground:0);object.__cacheBitmap.__bitmapData=object.__cacheBitmapData}lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(object.__cacheBitmapData.image);object.__cacheBitmapRendererSW=new openfl__$internal_renderer_canvas_CanvasRenderer(object.__cacheBitmapData.image.buffer.__srcContext);object.__cacheBitmapRendererSW.__worldTransform=new openfl_geom_Matrix;object.__cacheBitmapRendererSW.__worldColorTransform=new openfl_geom_ColorTransform}if(object.__cacheBitmapColorTransform==null){object.__cacheBitmapColorTransform=new openfl_geom_ColorTransform}object.__cacheBitmapRendererSW.__stage=object.stage;object.__cacheBitmapRendererSW.__allowSmoothing=this.__allowSmoothing;js_Boot.__cast(object.__cacheBitmapRendererSW,openfl__$internal_renderer_canvas_CanvasRenderer).__setBlendMode(10);object.__cacheBitmapRendererSW.__worldAlpha=1/object.__worldAlpha;object.__cacheBitmapRendererSW.__worldTransform.copyFrom(object.__renderTransform);object.__cacheBitmapRendererSW.__worldTransform.invert();object.__cacheBitmapRendererSW.__worldTransform.concat(object.__cacheBitmapMatrix);object.__cacheBitmapRendererSW.__worldTransform.tx-=offsetX;object.__cacheBitmapRendererSW.__worldTransform.ty-=offsetY;object.__cacheBitmapRendererSW.__worldColorTransform.__copyFrom(colorTransform);object.__cacheBitmapRendererSW.__worldColorTransform.__invert();object.__isCacheBitmapRender=true;object.__cacheBitmapRendererSW.__drawBitmapData(object.__cacheBitmapData,object,null);if(hasFilters){var needSecondBitmapData=false;var needCopyOfOriginal=false;var _g2=0;var _g11=object.__filters;while(_g2<_g11.length){var filter=_g11[_g2];++_g2;if(filter.__needSecondBitmapData){needSecondBitmapData=true}if(filter.__preserveObject){needCopyOfOriginal=true}}var bitmap=object.__cacheBitmapData;var bitmap2=null;var bitmap3=null;if(needSecondBitmapData){if(object.__cacheBitmapData2==null||object.__cacheBitmapData2.image==null||bitmapWidth>object.__cacheBitmapData2.width||bitmapHeight>object.__cacheBitmapData2.height){object.__cacheBitmapData2=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,0)}else{object.__cacheBitmapData2.fillRect(object.__cacheBitmapData2.rect,0)}bitmap2=object.__cacheBitmapData2}else{bitmap2=bitmap}if(needCopyOfOriginal){if(object.__cacheBitmapData3==null||object.__cacheBitmapData3.image==null||bitmapWidth>object.__cacheBitmapData3.width||bitmapHeight>object.__cacheBitmapData3.height){object.__cacheBitmapData3=new openfl_display_BitmapData(bitmapWidth,bitmapHeight,true,0)}else{object.__cacheBitmapData3.fillRect(object.__cacheBitmapData3.rect,0)}bitmap3=object.__cacheBitmapData3}if(object.__tempPoint==null){object.__tempPoint=new openfl_geom_Point}var destPoint=object.__tempPoint;var cacheBitmap;var lastBitmap;var _g21=0;var _g3=object.__filters;while(_g21<_g3.length){var filter1=_g3[_g21];++_g21;if(filter1.__preserveObject){bitmap3.copyPixels(bitmap,bitmap.rect,destPoint)}lastBitmap=filter1.__applyFilter(bitmap2,bitmap,bitmap.rect,destPoint);if(filter1.__preserveObject){lastBitmap.draw(bitmap3,null,object.__objectTransform!=null?object.__objectTransform.get_colorTransform():null)}filter1.__renderDirty=false;if(needSecondBitmapData&&lastBitmap==bitmap2){cacheBitmap=bitmap;bitmap=bitmap2;bitmap2=cacheBitmap}}if(object.__cacheBitmapData!=bitmap){cacheBitmap=object.__cacheBitmapData;object.__cacheBitmapData=bitmap;object.__cacheBitmapData2=cacheBitmap;object.__cacheBitmap.__bitmapData=object.__cacheBitmapData;object.__cacheBitmapRendererSW=null}object.__cacheBitmap.__imageVersion=object.__cacheBitmapData.__textureVersion}object.__cacheBitmapColorTransform.__copyFrom(colorTransform);if(!object.__cacheBitmapColorTransform.__isDefault(true)){object.__cacheBitmapColorTransform.alphaMultiplier=1;object.__cacheBitmapData.colorTransform(object.__cacheBitmapData.rect,object.__cacheBitmapColorTransform)}object.__isCacheBitmapRender=false}if(updateTransform){openfl_geom_Rectangle.__pool.release(rect)}updated=updateTransform;openfl_geom_ColorTransform.__pool.release(colorTransform)}else if(object.__cacheBitmap!=null){if(this.__domRenderer!=null&&object.__cacheBitmap!=null){this.__domRenderer.__clearBitmap(object.__cacheBitmap)}object.__cacheBitmap=null;object.__cacheBitmapData=null;object.__cacheBitmapData2=null;object.__cacheBitmapData3=null;object.__cacheBitmapColorTransform=null;object.__cacheBitmapRendererSW=null;updated=true}return updated},__class__:openfl__$internal_renderer_canvas_CanvasRenderer});var openfl__$internal_renderer_canvas_CanvasTextField=function(){};$hxClasses["openfl._internal.renderer.canvas.CanvasTextField"]=openfl__$internal_renderer_canvas_CanvasTextField;openfl__$internal_renderer_canvas_CanvasTextField.__name__="openfl._internal.renderer.canvas.CanvasTextField";var openfl__$internal_renderer_canvas_CanvasTilemap=function(){};$hxClasses["openfl._internal.renderer.canvas.CanvasTilemap"]=openfl__$internal_renderer_canvas_CanvasTilemap;openfl__$internal_renderer_canvas_CanvasTilemap.__name__="openfl._internal.renderer.canvas.CanvasTilemap";openfl__$internal_renderer_canvas_CanvasTilemap.renderTileContainer=function(group,renderer,parentTransform,defaultTileset,smooth,alphaEnabled,worldAlpha,blendModeEnabled,defaultBlendMode,cacheBitmapData,source,rect){var context=renderer.context;var roundPixels=renderer.__roundPixels;var tileTransform=openfl_geom_Matrix.__pool.get();var tiles=group.__tiles;var length=group.__length;var tile;var tileset;var alpha;var visible;var blendMode=null;var id;var tileData;var tileRect;var bitmapData;var _g=0;while(_g<length){tile=tiles[_g++];tileTransform.setTo(1,0,0,1,-tile.get_originX(),-tile.get_originY());tileTransform.concat(tile.get_matrix());tileTransform.concat(parentTransform);if(roundPixels){tileTransform.tx=Math.round(tileTransform.tx);tileTransform.ty=Math.round(tileTransform.ty)}tileset=tile.get_tileset()!=null?tile.get_tileset():defaultTileset;alpha=tile.get_alpha()*worldAlpha;visible=tile.get_visible();if(!visible||alpha<=0){continue}if(!alphaEnabled){alpha=1}if(blendModeEnabled){blendMode=tile.__blendMode!=null?tile.__blendMode:defaultBlendMode}if(tile.__length>0){openfl__$internal_renderer_canvas_CanvasTilemap.renderTileContainer(tile,renderer,tileTransform,tileset,smooth,alphaEnabled,alpha,blendModeEnabled,blendMode,cacheBitmapData,source,rect)}else{if(tileset==null){continue}id=tile.get_id();if(id==-1){tileRect=tile.__rect;if(tileRect==null||tileRect.width<=0||tileRect.height<=0){continue}}else{tileData=tileset.__data[id];if(tileData==null){continue}rect.setTo(tileData.x,tileData.y,tileData.width,tileData.height);tileRect=rect}bitmapData=tileset.__bitmapData;if(bitmapData==null){continue}if(bitmapData!=cacheBitmapData){if(bitmapData.image.buffer.__srcImage==null){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmapData.image)}source=bitmapData.image.get_src();cacheBitmapData=bitmapData}context.globalAlpha=alpha;if(blendModeEnabled){renderer.__setBlendMode(blendMode)}renderer.setTransform(tileTransform,context);context.drawImage(source,tileRect.x,tileRect.y,tileRect.width,tileRect.height,0,0,tileRect.width,tileRect.height)}}openfl_geom_Matrix.__pool.release(tileTransform)};var openfl__$internal_renderer_canvas_CanvasVideo=function(){};$hxClasses["openfl._internal.renderer.canvas.CanvasVideo"]=openfl__$internal_renderer_canvas_CanvasVideo;openfl__$internal_renderer_canvas_CanvasVideo.__name__="openfl._internal.renderer.canvas.CanvasVideo";openfl__$internal_renderer_canvas_CanvasVideo.render=function(video,renderer){if(!video.__renderable||video.__stream==null){return}var alpha=renderer.__getAlpha(video.__worldAlpha);if(alpha<=0){return}var context=renderer.context;if(video.__stream.__video!=null){renderer.__setBlendMode(video.__worldBlendMode);renderer.__pushMaskObject(video);context.globalAlpha=alpha;var scrollRect=video.__scrollRect;var smoothing=video.smoothing;renderer.setTransform(video.__worldTransform,context);if(!smoothing){context.imageSmoothingEnabled=false}if(scrollRect==null){context.drawImage(video.__stream.__video,0,0,video.get_width(),video.get_height())}else{context.drawImage(video.__stream.__video,scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height,scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height)}if(!smoothing){context.imageSmoothingEnabled=true}renderer.__popMaskObject(video)}};var openfl_display_Shader=function(code){this.byteCode=code;this.precisionHint=1;this.__glSourceDirty=true;this.__numPasses=1;this.__data=openfl_display__$ShaderData_ShaderData_$Impl_$._new(code)};$hxClasses["openfl.display.Shader"]=openfl_display_Shader;openfl_display_Shader.__name__="openfl.display.Shader";openfl_display_Shader.prototype={byteCode:null,glProgram:null,precisionHint:null,program:null,__alpha:null,__alphaTexture:null,__alphaTextureMatrix:null,__bitmap:null,__colorMultiplier:null,__colorOffset:null,__context:null,__data:null,__glFragmentSource:null,__glSourceDirty:null,__glVertexSource:null,__hasColorTransform:null,__inputBitmapData:null,__isGenerated:null,__matrix:null,__numPasses:null,__paramBool:null,__paramFloat:null,__paramInt:null,__position:null,__textureCoord:null,__texture:null,__textureSize:null,__clearUseArray:function(){var _g=0;var _g1=this.__paramBool;while(_g<_g1.length)_g1[_g++].__useArray=false;var _g2=0;var _g3=this.__paramFloat;while(_g2<_g3.length)_g3[_g2++].__useArray=false;var _g4=0;var _g5=this.__paramInt;while(_g4<_g5.length)_g5[_g4++].__useArray=false},__createGLShader:function(source,type){var gl=this.__context.gl;var shader=gl.createShader(type);gl.shaderSource(shader,source);gl.compileShader(shader);if(gl.getShaderParameter(shader,gl.COMPILE_STATUS)==0){var message=type==gl.VERTEX_SHADER?"Error compiling vertex shader":"Error compiling fragment shader";message+="\n"+gl.getShaderInfoLog(shader);message+="\n"+source;lime_utils_Log.error(message,{fileName:"openfl/display/Shader.hx",lineNumber:330,className:"openfl.display.Shader",methodName:"__createGLShader"})}return shader},__createGLProgram:function(vertexSource,fragmentSource){var gl=this.__context.gl;var vertexShader=this.__createGLShader(vertexSource,gl.VERTEX_SHADER);var fragmentShader=this.__createGLShader(fragmentSource,gl.FRAGMENT_SHADER);var program=gl.createProgram();var _g=0;var _g1=this.__paramFloat;while(_g<_g1.length){var param=_g1[_g];++_g;if(param.name.indexOf("Position")>-1&&StringTools.startsWith(param.name,"openfl_")){gl.bindAttribLocation(program,0,param.name);break}}gl.attachShader(program,vertexShader);gl.attachShader(program,fragmentShader);gl.linkProgram(program);if(gl.getProgramParameter(program,gl.LINK_STATUS)==0){var message="Unable to initialize the shader program";message="Unable to initialize the shader program"+("\n"+gl.getProgramInfoLog(program));lime_utils_Log.error(message,{fileName:"openfl/display/Shader.hx",lineNumber:363,className:"openfl.display.Shader",methodName:"__createGLProgram"})}return program},__disable:function(){if(this.program!=null){this.__disableGL()}},__disableGL:function(){var gl=this.__context.gl;var textureCount=0;var _g=0;var _g1=this.__inputBitmapData;while(_g<_g1.length){_g1[_g++].__disableGL(this.__context,textureCount);++textureCount}var _g2=0;var _g3=this.__paramBool;while(_g2<_g3.length)_g3[_g2++].__disableGL(this.__context);var _g4=0;var _g5=this.__paramFloat;while(_g4<_g5.length)_g5[_g4++].__disableGL(this.__context);var _g6=0;var _g7=this.__paramInt;while(_g6<_g7.length)_g7[_g6++].__disableGL(this.__context);this.__context.__bindGLArrayBuffer(null);if(this.__context.__context.type=="opengl"){gl.disable(gl.TEXTURE_2D)}},__enable:function(){this.__init();if(this.program!=null){this.__enableGL()}},__enableGL:function(){var textureCount=0;var gl=this.__context.gl;var _g=0;var _g1=this.__inputBitmapData;while(_g<_g1.length){gl.uniform1i(_g1[_g++].index,textureCount);++textureCount}if(this.__context.__context.type=="opengl"&&textureCount>0){gl.enable(gl.TEXTURE_2D)}},__init:function(){if(this.__data==null){this.__data=openfl_display__$ShaderData_ShaderData_$Impl_$._new(null)}if(this.__glFragmentSource!=null&&this.__glVertexSource!=null&&(this.program==null||this.__glSourceDirty)){this.__initGL()}},__initGL:function(){if(this.__glSourceDirty||this.__paramBool==null){this.__glSourceDirty=false;this.program=null;this.__inputBitmapData=[];this.__paramBool=[];this.__paramFloat=[];this.__paramInt=[];this.__processGLData(this.get_glVertexSource(),"attribute");this.__processGLData(this.get_glVertexSource(),"uniform");this.__processGLData(this.get_glFragmentSource(),"uniform")}if(this.__context!=null&&this.program==null){var gl=this.__context.gl;var prefix="#ifdef GL_ES\n\t\t\t\t"+(this.precisionHint==1?"#ifdef GL_FRAGMENT_PRECISION_HIGH\n\t\t\t\tprecision highp float;\n\t\t\t\t#else\n\t\t\t\tprecision mediump float;\n\t\t\t\t#endif":"precision lowp float;")+"\n\t\t\t\t#endif\n\t\t\t\t";var vertex=prefix+this.get_glVertexSource();var fragment=prefix+this.get_glFragmentSource();var id=vertex+fragment;var _this=this.__context.__programs;if(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id)){var _this1=this.__context.__programs;this.program=__map_reserved[id]!=null?_this1.getReserved(id):_this1.h[id]}else{this.program=this.__context.createProgram(1);this.program.__glProgram=this.__createGLProgram(vertex,fragment);var value=this.program;var _this2=this.__context.__programs;if(__map_reserved[id]!=null){_this2.setReserved(id,value)}else{_this2.h[id]=value}}if(this.program!=null){this.glProgram=this.program.__glProgram;var _g=0;var _g1=this.__inputBitmapData;while(_g<_g1.length){var input=_g1[_g];++_g;if(input.__isUniform){input.index=gl.getUniformLocation(this.glProgram,input.name)}else{input.index=gl.getAttribLocation(this.glProgram,input.name)}}var _g2=0;var _g3=this.__paramBool;while(_g2<_g3.length){var parameter=_g3[_g2];++_g2;if(parameter.__isUniform){parameter.index=gl.getUniformLocation(this.glProgram,parameter.name)}else{parameter.index=gl.getAttribLocation(this.glProgram,parameter.name)}}var _g4=0;var _g5=this.__paramFloat;while(_g4<_g5.length){var parameter1=_g5[_g4];++_g4;if(parameter1.__isUniform){parameter1.index=gl.getUniformLocation(this.glProgram,parameter1.name)}else{parameter1.index=gl.getAttribLocation(this.glProgram,parameter1.name)}}var _g6=0;var _g7=this.__paramInt;while(_g6<_g7.length){var parameter2=_g7[_g6];++_g6;if(parameter2.__isUniform){parameter2.index=gl.getUniformLocation(this.glProgram,parameter2.name)}else{parameter2.index=gl.getAttribLocation(this.glProgram,parameter2.name)}}}}},__processGLData:function(source,storageType){var lastMatch=0;var position;var regex;var name;var type;if(storageType=="uniform"){regex=new EReg("uniform ([A-Za-z0-9]+) ([A-Za-z0-9_]+)","")}else{regex=new EReg("attribute ([A-Za-z0-9]+) ([A-Za-z0-9_]+)","")}while(regex.matchSub(source,lastMatch)){type=regex.matched(1);name=regex.matched(2);if(StringTools.startsWith(name,"gl_")){continue}var isUniform=storageType=="uniform";if(StringTools.startsWith(type,"sampler")){var input=new openfl_display_ShaderInput;input.name=name;input.__isUniform=isUniform;this.__inputBitmapData.push(input);switch(name){case"bitmap":this.__bitmap=input;break;case"openfl_AlphaTexture":this.__alphaTexture=input;break;case"openfl_Texture":this.__texture=input;break;default:}this.__data[name]=input;if(this.__isGenerated){this[name]=input}}else if(!Object.prototype.hasOwnProperty.call(this.__data,name)||Reflect.field(this.__data,name)==null){var parameterType;switch(type){case"bool":parameterType=0;break;case"bvec2":parameterType=1;break;case"bvec3":parameterType=2;break;case"bvec4":parameterType=3;break;case"dvec2":case"vec2":parameterType=5;break;case"dvec3":case"vec3":parameterType=6;break;case"double":case"float":parameterType=4;break;case"ivec3":case"uvec3":parameterType=10;break;case"ivec4":case"uvec4":parameterType=11;break;case"mat2":case"mat2x2":parameterType=12;break;case"mat2x3":parameterType=13;break;case"mat2x4":parameterType=14;break;case"mat3x2":parameterType=15;break;case"mat3":case"mat3x3":parameterType=16;break;case"mat3x4":parameterType=17;break;case"mat4":case"mat4x4":parameterType=20;break;case"mat4x2":parameterType=18;break;case"mat4x3":parameterType=19;break;case"int":case"uint":parameterType=8;break;case"ivec2":case"uvec2":parameterType=9;break;case"dvec4":case"vec4":parameterType=7;break;default:parameterType=null}var length;switch(parameterType){case 1:case 5:case 9:length=2;break;case 3:case 7:case 11:case 12:length=4;break;case 2:case 6:case 10:length=3;break;case 16:length=9;break;case 20:length=16;break;default:length=1}var arrayLength;switch(parameterType){case 12:arrayLength=2;break;case 16:arrayLength=3;break;case 20:arrayLength=4;break;default:arrayLength=1}switch(parameterType){case 0:case 1:case 2:case 3:var parameter=new openfl_display_ShaderParameter;parameter.set_name(name);parameter.type=parameterType;parameter.__arrayLength=arrayLength;parameter.__isBool=true;parameter.__isUniform=isUniform;parameter.__length=length;this.__paramBool.push(parameter);if(name=="openfl_HasColorTransform"){this.__hasColorTransform=parameter}this.__data[name]=parameter;if(this.__isGenerated){this[name]=parameter}break;case 8:case 9:case 10:case 11:var parameter1=new openfl_display_ShaderParameter;parameter1.set_name(name);parameter1.type=parameterType;parameter1.__arrayLength=arrayLength;parameter1.__isInt=true;parameter1.__isUniform=isUniform;parameter1.__length=length;this.__paramInt.push(parameter1);this.__data[name]=parameter1;if(this.__isGenerated){this[name]=parameter1}break;default:var parameter2=new openfl_display_ShaderParameter;parameter2.set_name(name);parameter2.type=parameterType;parameter2.__arrayLength=arrayLength;if(arrayLength>0){var elements=arrayLength*arrayLength;var this1;if(elements!=null){this1=new Float32Array(elements)}else{this1=null}parameter2.__uniformMatrix=this1}parameter2.__isFloat=true;parameter2.__isUniform=isUniform;parameter2.__length=length;this.__paramFloat.push(parameter2);if(StringTools.startsWith(name,"openfl_")){switch(name){case"openfl_Alpha":this.__alpha=parameter2;break;case"openfl_AlphaTextureMatrix":this.__alphaTextureMatrix=parameter2;break;case"openfl_ColorMultiplier":this.__colorMultiplier=parameter2;break;case"openfl_ColorOffset":this.__colorOffset=parameter2;break;case"openfl_Matrix":this.__matrix=parameter2;break;case"openfl_Position":this.__position=parameter2;break;case"openfl_TextureCoord":this.__textureCoord=parameter2;break;case"openfl_TextureSize":this.__textureSize=parameter2;break;default:}}this.__data[name]=parameter2;if(this.__isGenerated){this[name]=parameter2}}}position=regex.matchedPos();lastMatch=position.pos+position.len}},__update:function(){if(this.program!=null){this.__updateGL()}},__updateFromBuffer:function(shaderBuffer,bufferOffset){if(this.program!=null){this.__updateGLFromBuffer(shaderBuffer,bufferOffset)}},__updateGL:function(){var textureCount=0;var _g=0;var _g1=this.__inputBitmapData;while(_g<_g1.length){_g1[_g++].__updateGL(this.__context,textureCount);++textureCount}var _g2=0;var _g3=this.__paramBool;while(_g2<_g3.length)_g3[_g2++].__updateGL(this.__context);var _g4=0;var _g5=this.__paramFloat;while(_g4<_g5.length)_g5[_g4++].__updateGL(this.__context);var _g6=0;var _g7=this.__paramInt;while(_g6<_g7.length)_g7[_g6++].__updateGL(this.__context)},__updateGLFromBuffer:function(shaderBuffer,bufferOffset){var textureCount=0;var input;var inputData;var inputFilter;var inputMipFilter;var inputWrap;var _g=0;var _g1=shaderBuffer.inputCount;while(_g<_g1){var i=_g++;input=shaderBuffer.inputRefs[i];inputData=shaderBuffer.inputs[i];inputFilter=shaderBuffer.inputFilter[i];inputMipFilter=shaderBuffer.inputMipFilter[i];inputWrap=shaderBuffer.inputWrap[i];if(inputData!=null){input.__updateGL(this.__context,textureCount,inputData,inputFilter,inputMipFilter,inputWrap);++textureCount}}var gl=this.__context.gl;if(shaderBuffer.paramDataLength>0){if(shaderBuffer.paramDataBuffer==null){shaderBuffer.paramDataBuffer=gl.createBuffer()}this.__context.__bindGLArrayBuffer(shaderBuffer.paramDataBuffer);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.bufferData(gl,gl.ARRAY_BUFFER,shaderBuffer.paramData,gl.DYNAMIC_DRAW)}else{this.__context.__bindGLArrayBuffer(null)}var boolIndex=0;var floatIndex=0;var intIndex=0;var boolCount=shaderBuffer.paramBoolCount;var floatCount=shaderBuffer.paramFloatCount;var paramData=shaderBuffer.paramData;var boolRef;var floatRef;var intRef;var hasOverride;var overrideBoolValue=null;var overrideFloatValue=null;var overrideIntValue=null;var _g2=0;var _g3=shaderBuffer.paramCount;while(_g2<_g3){var i1=_g2++;hasOverride=false;if(i1<boolCount){boolRef=shaderBuffer.paramRefs_Bool[boolIndex];var _g21=0;var _g31=shaderBuffer.overrideBoolCount;while(_g21<_g31){var j=_g21++;if(boolRef.name==shaderBuffer.overrideBoolNames[j]){overrideBoolValue=shaderBuffer.overrideBoolValues[j];hasOverride=true;break}}if(hasOverride){boolRef.__updateGL(this.__context,overrideBoolValue)}else{boolRef.__updateGLFromBuffer(this.__context,paramData,shaderBuffer.paramPositions[i1],shaderBuffer.paramLengths[i1],bufferOffset)}++boolIndex}else if(i1<boolCount+floatCount){floatRef=shaderBuffer.paramRefs_Float[floatIndex];var _g22=0;var _g32=shaderBuffer.overrideFloatCount;while(_g22<_g32){var j1=_g22++;if(floatRef.name==shaderBuffer.overrideFloatNames[j1]){overrideFloatValue=shaderBuffer.overrideFloatValues[j1];hasOverride=true;break}}if(hasOverride){floatRef.__updateGL(this.__context,overrideFloatValue)}else{floatRef.__updateGLFromBuffer(this.__context,paramData,shaderBuffer.paramPositions[i1],shaderBuffer.paramLengths[i1],bufferOffset)}++floatIndex}else{intRef=shaderBuffer.paramRefs_Int[intIndex];var _g23=0;var _g33=shaderBuffer.overrideIntCount;while(_g23<_g33){var j2=_g23++;if(intRef.name==shaderBuffer.overrideIntNames[j2]){overrideIntValue=shaderBuffer.overrideIntValues[j2];hasOverride=true;break}}if(hasOverride){intRef.__updateGL(this.__context,overrideIntValue)}else{intRef.__updateGLFromBuffer(this.__context,paramData,shaderBuffer.paramPositions[i1],shaderBuffer.paramLengths[i1],bufferOffset)}++intIndex}}},get_glFragmentSource:function(){return this.__glFragmentSource},get_glVertexSource:function(){return this.__glVertexSource},__class__:openfl_display_Shader,__properties__:{get_glVertexSource:"get_glVertexSource",get_glFragmentSource:"get_glFragmentSource"}};var openfl__$internal_renderer_context3D_Context3DAlphaMaskShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="varying vec2 openfl_AlphaTextureCoordv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_AlphaTexture;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\tvec4 mask = texture2D (openfl_AlphaTexture, openfl_AlphaTextureCoordv);\n\n\t\t\tif (mask.a == 0.0)\n\t\t\t{\n\t\t\t\tgl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\tgl_FragColor = color * mask.a;\n\t\t\t}\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_AlphaTextureCoordv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_AlphaTextureMatrix;\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tvoid main(void)\n\t\t{\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\topenfl_AlphaTextureCoordv = vec2(vec4(openfl_TextureCoord, 0.0, 0.0) * openfl_AlphaTextureMatrix);\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t}"}openfl_display_Shader.call(this);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl._internal.renderer.context3D.Context3DAlphaMaskShader"]=openfl__$internal_renderer_context3D_Context3DAlphaMaskShader;openfl__$internal_renderer_context3D_Context3DAlphaMaskShader.__name__="openfl._internal.renderer.context3D.Context3DAlphaMaskShader";openfl__$internal_renderer_context3D_Context3DAlphaMaskShader.__super__=openfl_display_Shader;openfl__$internal_renderer_context3D_Context3DAlphaMaskShader.prototype=$extend(openfl_display_Shader.prototype,{openfl_Position:null,openfl_TextureCoord:null,openfl_AlphaTextureMatrix:null,openfl_Matrix:null,openfl_AlphaTexture:null,openfl_Texture:null,__class__:openfl__$internal_renderer_context3D_Context3DAlphaMaskShader});var openfl__$internal_renderer_context3D_Context3DBitmap=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DBitmap"]=openfl__$internal_renderer_context3D_Context3DBitmap;openfl__$internal_renderer_context3D_Context3DBitmap.__name__="openfl._internal.renderer.context3D.Context3DBitmap";openfl__$internal_renderer_context3D_Context3DBitmap.render=function(bitmap,renderer){if(!bitmap.__renderable||bitmap.__worldAlpha<=0){return}if(bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var context=renderer.context3D;var alphaMask=bitmap.get_mask()!=null&&bitmap.get_mask().get_cacheAsBitmap();if(alphaMask&&bitmap.get_mask().__type!=openfl__$internal_renderer_DisplayObjectType.BITMAP){alphaMask=false}renderer.__setBlendMode(bitmap.__worldBlendMode);if(!alphaMask){renderer.__pushMaskObject(bitmap)}var shader=renderer.__initDisplayShader(!alphaMask?bitmap.__worldShader:renderer.__alphaMaskShader);renderer.setShader(shader);renderer.applyBitmapData(bitmap.__bitmapData,renderer.__allowSmoothing&&(bitmap.smoothing||renderer.__upscaled));renderer.applyMatrix(renderer.__getMatrix(bitmap.__renderTransform,bitmap.pixelSnapping));renderer.applyAlpha(bitmap.__worldAlpha);renderer.applyColorTransform(bitmap.__worldColorTransform);if(alphaMask){var maskBitmap=bitmap.get_mask();renderer.__currentShader.__alphaTexture.input=maskBitmap.__bitmapData;if(renderer.__currentShader.__alphaTextureMatrix.value==null){renderer.__currentShader.__alphaTextureMatrix.value=[]}var matrix=renderer.__currentShader.__alphaTextureMatrix.value;var transform=openfl_geom_Matrix.__pool.get();transform.copyFrom(bitmap.__renderTransform);transform.invert();transform.concat(maskBitmap.__renderTransform);matrix[0]=transform.a*(bitmap.__bitmapData.width/maskBitmap.__bitmapData.width);matrix[1]=transform.b;matrix[4]=transform.c;matrix[5]=transform.d*(bitmap.__bitmapData.height/maskBitmap.__bitmapData.height);matrix[12]=transform.tx;matrix[13]=transform.ty;matrix[15]=0;openfl_geom_Matrix.__pool.release(transform)}renderer.updateShader();var vertexBuffer=bitmap.__bitmapData.getVertexBuffer(context);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(bitmap.__bitmapData.getIndexBuffer(context));renderer.__clearShader();if(!alphaMask){renderer.__popMaskObject(bitmap)}}};openfl__$internal_renderer_context3D_Context3DBitmap.renderMask=function(bitmap,renderer){if(bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid){var context=renderer.context3D;var shader=renderer.__maskShader;renderer.setShader(shader);renderer.applyBitmapData(openfl__$internal_renderer_context3D_Context3DMaskShader.opaqueBitmapData,true);renderer.applyMatrix(renderer.__getMatrix(bitmap.__renderTransform,bitmap.pixelSnapping));renderer.updateShader();var vertexBuffer=bitmap.__bitmapData.getVertexBuffer(context);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(bitmap.__bitmapData.getIndexBuffer(context));renderer.__clearShader()}};var openfl__$internal_renderer_context3D_Context3DBuffer=function(context3D,elementType,elementCount,dataPerVertex){this.context3D=context3D;this.elementType=elementType;this.dataPerVertex=dataPerVertex;this.indexCount=0;this.vertexCount=0;this.resize(elementCount)};$hxClasses["openfl._internal.renderer.context3D.Context3DBuffer"]=openfl__$internal_renderer_context3D_Context3DBuffer;openfl__$internal_renderer_context3D_Context3DBuffer.__name__="openfl._internal.renderer.context3D.Context3DBuffer";openfl__$internal_renderer_context3D_Context3DBuffer.prototype={dataPerVertex:null,elementCount:null,elementType:null,indexCount:null,vertexBuffer:null,vertexBufferData:null,vertexCount:null,context3D:null,flushVertexBufferData:function(){if(this.vertexBufferData.length>this.vertexCount){this.vertexCount=this.vertexBufferData.length;this.vertexBuffer=this.context3D.createVertexBuffer(this.vertexCount,this.dataPerVertex,0)}this.vertexBuffer.uploadFromTypedArray(this.vertexBufferData)},resize:function(elementCount,dataPerVertex){if(dataPerVertex==null){dataPerVertex=-1}this.elementCount=elementCount;if(dataPerVertex==-1){dataPerVertex=this.dataPerVertex}if(dataPerVertex!=this.dataPerVertex){this.vertexBuffer=null;this.vertexCount=0;this.dataPerVertex=dataPerVertex}var numVertices=0;switch(this.elementType._hx_index){case 0:numVertices=elementCount*4;break;case 1:numVertices=elementCount*3;break;case 2:numVertices=elementCount*3;break}var vertexLength=numVertices*dataPerVertex;if(this.vertexBufferData==null){var this1;if(vertexLength!=null){this1=new Float32Array(vertexLength)}else{this1=null}this.vertexBufferData=this1}else if(vertexLength>this.vertexBufferData.length){var cacheBufferData=this.vertexBufferData;var this2;if(vertexLength!=null){this2=new Float32Array(vertexLength)}else{this2=null}this.vertexBufferData=this2;this.vertexBufferData.set(cacheBufferData)}},__class__:openfl__$internal_renderer_context3D_Context3DBuffer};var openfl__$internal_renderer_context3D_Context3DElementType=$hxEnums["openfl._internal.renderer.context3D.Context3DElementType"]={__ename__:"openfl._internal.renderer.context3D.Context3DElementType",__constructs__:["QUADS","TRIANGLES","TRIANGLE_INDICES"],QUADS:{_hx_index:0,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:$estr},TRIANGLES:{_hx_index:1,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:$estr},TRIANGLE_INDICES:{_hx_index:2,__enum__:"openfl._internal.renderer.context3D.Context3DElementType",toString:$estr}};var openfl_geom_Rectangle=function(x,y,width,height){if(height==null){height=0}if(width==null){width=0}if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y;this.width=width;this.height=height};$hxClasses["openfl.geom.Rectangle"]=openfl_geom_Rectangle;openfl_geom_Rectangle.__name__="openfl.geom.Rectangle";openfl_geom_Rectangle.prototype={height:null,width:null,x:null,y:null,clone:function(){return new openfl_geom_Rectangle(this.x,this.y,this.width,this.height)},contains:function(x,y){if(x>=this.x&&y>=this.y&&x<this.get_right()){return y<this.get_bottom()}else{return false}},containsPoint:function(point){return this.contains(point.x,point.y)},copyFrom:function(sourceRect){this.x=sourceRect.x;this.y=sourceRect.y;this.width=sourceRect.width;this.height=sourceRect.height},equals:function(toCompare){if(toCompare==this){return true}else if(toCompare!=null&&this.x==toCompare.x&&this.y==toCompare.y&&this.width==toCompare.width){return this.height==toCompare.height}else{return false}},intersects:function(toIntersect){if((this.get_right()>toIntersect.get_right()?toIntersect.get_right():this.get_right())<=(this.x<toIntersect.x?toIntersect.x:this.x)){return false}return(this.get_bottom()>toIntersect.get_bottom()?toIntersect.get_bottom():this.get_bottom())>(this.y<toIntersect.y?toIntersect.y:this.y)},offset:function(dx,dy){this.x+=dx;this.y+=dy},setTo:function(xa,ya,widtha,heighta){this.x=xa;this.y=ya;this.width=widtha;this.height=heighta},__contract:function(x,y,width,height){if(this.width==0&&this.height==0){return}var offsetX=0;var offsetY=0;var offsetRight=0;var offsetBottom=0;if(this.x<x){offsetX=x-this.x}if(this.y<y){offsetY=y-this.y}if(this.get_right()>x+width){offsetRight=x+width-this.get_right()}if(this.get_bottom()>y+height){offsetBottom=y+height-this.get_bottom()}this.x+=offsetX;this.y+=offsetY;this.width+=offsetRight-offsetX;this.height+=offsetBottom-offsetY},__expand:function(x,y,width,height){if(this.width==0&&this.height==0){this.x=x;this.y=y;this.width=width;this.height=height;return}var cacheRight=this.get_right();var cacheBottom=this.get_bottom();if(this.x>x){this.x=x;this.width=cacheRight-x}if(this.y>y){this.y=y;this.height=cacheBottom-y}if(cacheRight<x+width){this.width=x+width-this.x}if(cacheBottom<y+height){this.height=y+height-this.y}},__toLimeRectangle:function(){if(openfl_geom_Rectangle.__limeRectangle==null){openfl_geom_Rectangle.__limeRectangle=new lime_math_Rectangle}openfl_geom_Rectangle.__limeRectangle.setTo(this.x,this.y,this.width,this.height);return openfl_geom_Rectangle.__limeRectangle},__transform:function(rect,m){var tx0=m.a*this.x+m.c*this.y;var tx1=tx0;var ty0=m.b*this.x+m.d*this.y;var ty1=ty0;var tx=m.a*(this.x+this.width)+m.c*this.y;var ty=m.b*(this.x+this.width)+m.d*this.y;if(tx<tx0){tx0=tx}if(ty<ty0){ty0=ty}if(tx>tx1){tx1=tx}if(ty>ty1){ty1=ty}tx=m.a*(this.x+this.width)+m.c*(this.y+this.height);ty=m.b*(this.x+this.width)+m.d*(this.y+this.height);if(tx<tx0){tx0=tx}if(ty<ty0){ty0=ty}if(tx>tx1){tx1=tx}if(ty>ty1){ty1=ty}tx=m.a*this.x+m.c*(this.y+this.height);ty=m.b*this.x+m.d*(this.y+this.height);if(tx<tx0){tx0=tx}if(ty<ty0){ty0=ty}if(tx>tx1){tx1=tx}if(ty>ty1){ty1=ty}rect.setTo(tx0+m.tx,ty0+m.ty,tx1-tx0,ty1-ty0)},get_bottom:function(){return this.y+this.height},get_left:function(){return this.x},get_right:function(){return this.x+this.width},get_top:function(){return this.y},__class__:openfl_geom_Rectangle,__properties__:{get_top:"get_top",get_right:"get_right",get_left:"get_left",get_bottom:"get_bottom"}};var openfl_geom_Matrix=function(a,b,c,d,tx,ty){if(ty==null){ty=0}if(tx==null){tx=0}if(d==null){d=1}if(c==null){c=0}if(b==null){b=0}if(a==null){a=1}this.a=a;this.b=b;this.c=c;this.d=d;this.tx=tx;this.ty=ty};$hxClasses["openfl.geom.Matrix"]=openfl_geom_Matrix;openfl_geom_Matrix.__name__="openfl.geom.Matrix";openfl_geom_Matrix.prototype={a:null,b:null,c:null,d:null,tx:null,ty:null,clone:function(){return new openfl_geom_Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(m){var a1=this.a*m.a+this.b*m.c;this.b=this.a*m.b+this.b*m.d;this.a=a1;var c1=this.c*m.a+this.d*m.c;this.d=this.c*m.b+this.d*m.d;this.c=c1;var tx1=this.tx*m.a+this.ty*m.c+m.tx;this.ty=this.tx*m.b+this.ty*m.d+m.ty;this.tx=tx1},copyFrom:function(sourceMatrix){this.a=sourceMatrix.a;this.b=sourceMatrix.b;this.c=sourceMatrix.c;this.d=sourceMatrix.d;this.tx=sourceMatrix.tx;this.ty=sourceMatrix.ty},equals:function(matrix){if(matrix!=null&&this.tx==matrix.tx&&this.ty==matrix.ty&&this.a==matrix.a&&this.b==matrix.b&&this.c==matrix.c){return this.d==matrix.d}else{return false}},identity:function(){this.a=1;this.b=0;this.c=0;this.d=1;this.tx=0;this.ty=0},invert:function(){var norm=this.a*this.d-this.b*this.c;if(norm==0){this.a=this.b=this.c=this.d=0;this.tx=-this.tx;this.ty=-this.ty}else{norm=1/norm;var a1=this.d*norm;this.d=this.a*norm;this.a=a1;this.b*=-norm;this.c*=-norm;var tx1=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=tx1}return this},scale:function(sx,sy){this.a*=sx;this.b*=sy;this.c*=sx;this.d*=sy;this.tx*=sx;this.ty*=sy},setTo:function(a,b,c,d,tx,ty){this.a=a;this.b=b;this.c=c;this.d=d;this.tx=tx;this.ty=ty},transformPoint:function(pos){return new openfl_geom_Point(pos.x*this.a+pos.y*this.c+this.tx,pos.x*this.b+pos.y*this.d+this.ty)},translate:function(dx,dy){this.tx+=dx;this.ty+=dy},__class__:openfl_geom_Matrix};var openfl_geom_ColorTransform=function(redMultiplier,greenMultiplier,blueMultiplier,alphaMultiplier,redOffset,greenOffset,blueOffset,alphaOffset){if(alphaOffset==null){alphaOffset=0}if(blueOffset==null){blueOffset=0}if(greenOffset==null){greenOffset=0}if(redOffset==null){redOffset=0}if(alphaMultiplier==null){alphaMultiplier=1}if(blueMultiplier==null){blueMultiplier=1}if(greenMultiplier==null){greenMultiplier=1}if(redMultiplier==null){redMultiplier=1}this.redMultiplier=redMultiplier;this.greenMultiplier=greenMultiplier;this.blueMultiplier=blueMultiplier;this.alphaMultiplier=alphaMultiplier;this.redOffset=redOffset;this.greenOffset=greenOffset;this.blueOffset=blueOffset;this.alphaOffset=alphaOffset};$hxClasses["openfl.geom.ColorTransform"]=openfl_geom_ColorTransform;openfl_geom_ColorTransform.__name__="openfl.geom.ColorTransform";openfl_geom_ColorTransform.prototype={alphaMultiplier:null,alphaOffset:null,blueMultiplier:null,blueOffset:null,greenMultiplier:null,greenOffset:null,redMultiplier:null,redOffset:null,__copyFrom:function(ct){this.redMultiplier=ct.redMultiplier;this.greenMultiplier=ct.greenMultiplier;this.blueMultiplier=ct.blueMultiplier;this.alphaMultiplier=ct.alphaMultiplier;this.redOffset=ct.redOffset;this.greenOffset=ct.greenOffset;this.blueOffset=ct.blueOffset;this.alphaOffset=ct.alphaOffset},__combine:function(ct){this.redMultiplier*=ct.redMultiplier;this.greenMultiplier*=ct.greenMultiplier;this.blueMultiplier*=ct.blueMultiplier;this.alphaMultiplier*=ct.alphaMultiplier;this.redOffset+=ct.redOffset;this.greenOffset+=ct.greenOffset;this.blueOffset+=ct.blueOffset;this.alphaOffset+=ct.alphaOffset},__identity:function(){this.redMultiplier=1;this.greenMultiplier=1;this.blueMultiplier=1;this.alphaMultiplier=1;this.redOffset=0;this.greenOffset=0;this.blueOffset=0;this.alphaOffset=0},__invert:function(){this.redMultiplier=this.redMultiplier!=0?1/this.redMultiplier:1;this.greenMultiplier=this.greenMultiplier!=0?1/this.greenMultiplier:1;this.blueMultiplier=this.blueMultiplier!=0?1/this.blueMultiplier:1;this.alphaMultiplier=this.alphaMultiplier!=0?1/this.alphaMultiplier:1;this.redOffset=-this.redOffset;this.greenOffset=-this.greenOffset;this.blueOffset=-this.blueOffset;this.alphaOffset=-this.alphaOffset},__equals:function(ct,ignoreAlphaMultiplier){if(ct!=null&&this.redMultiplier==ct.redMultiplier&&this.greenMultiplier==ct.greenMultiplier&&this.blueMultiplier==ct.blueMultiplier&&(ignoreAlphaMultiplier||this.alphaMultiplier==ct.alphaMultiplier)&&this.redOffset==ct.redOffset&&this.greenOffset==ct.greenOffset&&this.blueOffset==ct.blueOffset){return this.alphaOffset==ct.alphaOffset}else{return false}},__isDefault:function(ignoreAlphaMultiplier){if(ignoreAlphaMultiplier){if(this.redMultiplier==1&&this.greenMultiplier==1&&this.blueMultiplier==1&&this.redOffset==0&&this.greenOffset==0&&this.blueOffset==0){return this.alphaOffset==0}else{return false}}else if(this.redMultiplier==1&&this.greenMultiplier==1&&this.blueMultiplier==1&&this.alphaMultiplier==1&&this.redOffset==0&&this.greenOffset==0&&this.blueOffset==0){return this.alphaOffset==0}else{return false}},__setArrays:function(colorMultipliers,colorOffsets){colorMultipliers[0]=this.redMultiplier;colorMultipliers[1]=this.greenMultiplier;colorMultipliers[2]=this.blueMultiplier;colorMultipliers[3]=this.alphaMultiplier;colorOffsets[0]=this.redOffset;colorOffsets[1]=this.greenOffset;colorOffsets[2]=this.blueOffset;colorOffsets[3]=this.alphaOffset},__toLimeColorMatrix:function(){if(openfl_geom_ColorTransform.__limeColorMatrix==null){openfl_geom_ColorTransform.__limeColorMatrix=new Float32Array(20)}openfl_geom_ColorTransform.__limeColorMatrix[0]=this.redMultiplier;openfl_geom_ColorTransform.__limeColorMatrix[4]=this.redOffset/255;openfl_geom_ColorTransform.__limeColorMatrix[6]=this.greenMultiplier;openfl_geom_ColorTransform.__limeColorMatrix[9]=this.greenOffset/255;openfl_geom_ColorTransform.__limeColorMatrix[12]=this.blueMultiplier;openfl_geom_ColorTransform.__limeColorMatrix[14]=this.blueOffset/255;openfl_geom_ColorTransform.__limeColorMatrix[18]=this.alphaMultiplier;openfl_geom_ColorTransform.__limeColorMatrix[19]=this.alphaOffset/255;return openfl_geom_ColorTransform.__limeColorMatrix},__class__:openfl_geom_ColorTransform};var openfl__$internal_renderer_context3D_Context3DGraphics=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DGraphics"]=openfl__$internal_renderer_context3D_Context3DGraphics;openfl__$internal_renderer_context3D_Context3DGraphics.__name__="openfl._internal.renderer.context3D.Context3DGraphics";openfl__$internal_renderer_context3D_Context3DGraphics.buildBuffer=function(graphics,renderer){var quadBufferPosition=0;var vertexBufferPosition=0;var vertexBufferPositionUVT=0;var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var context=renderer.context3D;var tileRect=openfl_geom_Rectangle.__pool.get();var tileTransform=openfl_geom_Matrix.__pool.get();var bitmap=null;var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;bitmap=c.buffer.o[c.oPos];break;case 1:bitmap=null;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 3:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c1=data;var shaderBuffer=c1.buffer.o[c1.oPos];bitmap=null;if(shaderBuffer!=null){var _g2=0;var _g11=shaderBuffer.inputCount;while(_g2<_g11){var i=_g2++;if(shaderBuffer.inputRefs[i].name=="bitmap"){bitmap=shaderBuffer.inputs[i];break}}}break;case 8:if(bitmap!=null){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_QUADS;var c2=data;var rects=c2.buffer.o[c2.oPos];var indices=c2.buffer.o[c2.oPos+1];var transforms=c2.buffer.o[c2.oPos+2];var hasIndices=indices!=null;var transformABCD=false;var transformXY=false;var length=hasIndices?indices.get_length():Math.floor(rects.get_length()/4);if(length==0){return}if(transforms!=null){if(transforms.get_length()>=length*6){transformABCD=true;transformXY=true}else if(transforms.get_length()>=length*4){transformABCD=true}else if(transforms.get_length()>=length*2){transformXY=true}}if(graphics.__quadBuffer==null){graphics.__quadBuffer=new openfl__$internal_renderer_context3D_Context3DBuffer(context,openfl__$internal_renderer_context3D_Context3DElementType.QUADS,length,4)}else{graphics.__quadBuffer.resize(quadBufferPosition+length,4)}var vertexOffset;var tileWidth;var tileHeight;var uvX;var uvY;var uvWidth;var uvHeight;var x;var y;var x2;var y2;var x3;var y3;var x4;var y4;var ri;var ti;var vertexBufferData=graphics.__quadBuffer.vertexBufferData;var bitmapWidth=bitmap.width;var bitmapHeight=bitmap.height;var _g3=0;var _g12=length;while(_g3<_g12){var i1=_g3++;vertexOffset=(quadBufferPosition+i1)*16;ri=hasIndices?indices.get(i1)*4:i1*4;if(ri<0){continue}tileRect.setTo(rects.get(ri),rects.get(ri+1),rects.get(ri+2),rects.get(ri+3));tileWidth=tileRect.width;tileHeight=tileRect.height;if(tileWidth<=0||tileHeight<=0){continue}if(transformABCD&&transformXY){ti=i1*6;tileTransform.setTo(transforms.get(ti),transforms.get(ti+1),transforms.get(ti+2),transforms.get(ti+3),transforms.get(ti+4),transforms.get(ti+5))}else if(transformABCD){ti=i1*4;tileTransform.setTo(transforms.get(ti),transforms.get(ti+1),transforms.get(ti+2),transforms.get(ti+3),tileRect.x,tileRect.y)}else if(transformXY){ti=i1*2;tileTransform.tx=transforms.get(ti);tileTransform.ty=transforms.get(ti+1)}else{tileTransform.tx=tileRect.x;tileTransform.ty=tileRect.y}uvX=tileRect.x/bitmapWidth;uvY=tileRect.y/bitmapHeight;uvWidth=tileRect.get_right()/bitmapWidth;uvHeight=tileRect.get_bottom()/bitmapHeight;x=0*tileTransform.a+0*tileTransform.c+tileTransform.tx;y=0*tileTransform.b+0*tileTransform.d+tileTransform.ty;x2=tileWidth*tileTransform.a+0*tileTransform.c+tileTransform.tx;y2=tileWidth*tileTransform.b+0*tileTransform.d+tileTransform.ty;x3=0*tileTransform.a+tileHeight*tileTransform.c+tileTransform.tx;y3=0*tileTransform.b+tileHeight*tileTransform.d+tileTransform.ty;x4=tileWidth*tileTransform.a+tileHeight*tileTransform.c+tileTransform.tx;y4=tileWidth*tileTransform.b+tileHeight*tileTransform.d+tileTransform.ty;vertexBufferData[vertexOffset]=x;vertexBufferData[vertexOffset+1]=y;vertexBufferData[vertexOffset+2]=uvX;vertexBufferData[vertexOffset+3]=uvY;vertexBufferData[vertexOffset+4]=x2;vertexBufferData[vertexOffset+4+1]=y2;vertexBufferData[vertexOffset+4+2]=uvWidth;vertexBufferData[vertexOffset+4+3]=uvY;vertexBufferData[vertexOffset+8]=x3;vertexBufferData[vertexOffset+8+1]=y3;vertexBufferData[vertexOffset+8+2]=uvX;vertexBufferData[vertexOffset+8+3]=uvHeight;vertexBufferData[vertexOffset+12]=x4;vertexBufferData[vertexOffset+12+1]=y4;vertexBufferData[vertexOffset+12+2]=uvWidth;vertexBufferData[vertexOffset+12+3]=uvHeight}quadBufferPosition+=length}break;case 12:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES;var c3=data;var vertices=c3.buffer.o[c3.oPos];var indices1=c3.buffer.o[c3.oPos+1];var uvtData=c3.buffer.o[c3.oPos+2];var hasIndices1=indices1!=null;var numVertices=Math.floor(vertices.get_length()/2);var length1=hasIndices1?indices1.get_length():numVertices;var hasUVData=uvtData!=null;var hasUVTData=hasUVData&&uvtData.get_length()>=numVertices*3;var vertLength=hasUVTData?4:2;var uvStride=hasUVTData?3:2;var dataPerVertex=vertLength+2;var vertexOffset1=hasUVTData?vertexBufferPositionUVT:vertexBufferPosition;openfl__$internal_renderer_context3D_Context3DGraphics.resizeVertexBuffer(graphics,hasUVTData,vertexOffset1+length1*dataPerVertex);var vertexBufferData1=hasUVTData?graphics.__vertexBufferDataUVT:graphics.__vertexBufferData;var offset;var vertOffset;var uvOffset;var t;var _g4=0;var _g13=length1;while(_g4<_g13){var i2=_g4++;offset=vertexOffset1+i2*dataPerVertex;vertOffset=hasIndices1?indices1.get(i2)*2:i2*2;uvOffset=hasIndices1?indices1.get(i2)*uvStride:i2*uvStride;if(hasUVTData){t=uvtData.get(uvOffset+2);vertexBufferData1[offset]=vertices.get(vertOffset)/t;vertexBufferData1[offset+1]=vertices.get(vertOffset+1)/t;vertexBufferData1[offset+2]=0;vertexBufferData1[offset+3]=1/t}else{vertexBufferData1[offset]=vertices.get(vertOffset);vertexBufferData1[offset+1]=vertices.get(vertOffset+1)}vertexBufferData1[offset+vertLength]=hasUVData?uvtData.get(uvOffset):0;vertexBufferData1[offset+vertLength+1]=hasUVData?uvtData.get(uvOffset+1):0}if(hasUVTData){vertexBufferPositionUVT+=length1*dataPerVertex}else{vertexBufferPosition+=length1*dataPerVertex}break;case 13:bitmap=null;break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}if(quadBufferPosition>0){graphics.__quadBuffer.flushVertexBufferData()}if(vertexBufferPosition>0){var buffer=graphics.__vertexBuffer;if(buffer==null||vertexBufferPosition>graphics.__vertexBufferCount){buffer=context.createVertexBuffer(vertexBufferPosition,4,0);graphics.__vertexBuffer=buffer;graphics.__vertexBufferCount=vertexBufferPosition}buffer.uploadFromTypedArray(graphics.__vertexBufferData)}if(vertexBufferPositionUVT>0){var buffer1=graphics.__vertexBufferUVT;if(buffer1==null||vertexBufferPositionUVT>graphics.__vertexBufferCountUVT){buffer1=context.createVertexBuffer(vertexBufferPositionUVT,6,0);graphics.__vertexBufferUVT=buffer1;graphics.__vertexBufferCountUVT=vertexBufferPositionUVT}buffer1.uploadFromTypedArray(graphics.__vertexBufferDataUVT)}openfl_geom_Rectangle.__pool.release(tileRect);openfl_geom_Matrix.__pool.release(tileTransform)};openfl__$internal_renderer_context3D_Context3DGraphics.isCompatible=function(graphics){if(graphics.__owner.__worldScale9Grid!=null){return false}var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var hasColorFill=false;var hasBitmapFill=false;var hasShaderFill=false;var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:hasBitmapFill=true;hasColorFill=false;hasShaderFill=false;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 1:hasBitmapFill=false;hasColorFill=true;hasShaderFill=false;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 3:hasBitmapFill=false;hasColorFill=false;hasShaderFill=true;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 8:if(hasBitmapFill||hasShaderFill){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}else{data.destroy();return false}break;case 9:if(hasColorFill){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}else{data.destroy();return false}break;case 12:if(hasBitmapFill||hasShaderFill){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}else{data.destroy();return false}break;case 13:hasBitmapFill=false;hasColorFill=false;hasShaderFill=false;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 19:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;default:data.destroy();return false}}data.destroy();return true};openfl__$internal_renderer_context3D_Context3DGraphics.render=function(graphics,renderer){if(!graphics.__visible||graphics.__commands.get_length()==0){return}if(graphics.__bitmap!=null&&!graphics.__dirty||!openfl__$internal_renderer_context3D_Context3DGraphics.isCompatible(graphics)){var cacheTransform=renderer.__softwareRenderer.__worldTransform;renderer.__softwareRenderer.__worldTransform=renderer.__worldTransform;openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,renderer.__softwareRenderer);renderer.__softwareRenderer.__worldTransform=cacheTransform}else{graphics.__bitmap=null;graphics.__update(renderer.__worldTransform);if(graphics.__bounds!=null&&graphics.__width>=1&&graphics.__height>=1){if(graphics.__hardwareDirty||graphics.__quadBuffer==null&&graphics.__vertexBuffer==null&&graphics.__vertexBufferUVT==null){openfl__$internal_renderer_context3D_Context3DGraphics.buildBuffer(graphics,renderer)}var data=new openfl__$internal_renderer_DrawCommandReader(graphics.__commands);var context=renderer.context3D;var matrix=openfl_geom_Matrix.__pool.get();var shaderBuffer=null;var bitmap=null;var repeat=false;var smooth=false;var fill=null;var quadBufferPosition=0;var shaderBufferOffset=0;var vertexBufferPosition=0;var vertexBufferPositionUVT=0;var _g=0;var _g1=graphics.__commands.types;while(_g<_g1.length){var type=_g1[_g];++_g;switch(type._hx_index){case 0:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_BITMAP_FILL;var c=data;bitmap=c.buffer.o[c.oPos];repeat=c.buffer.b[c.bPos];smooth=c.buffer.b[c.bPos+1];shaderBuffer=null;fill=null;break;case 1:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_FILL;var c1=data;fill=(c1.buffer.i[c1.iPos]|0)&16777215|(c1.buffer.f[c1.fPos]*255|0)<<24;shaderBuffer=null;bitmap=null;break;case 3:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.BEGIN_SHADER_FILL;var c2=data;shaderBuffer=c2.buffer.o[c2.oPos];shaderBufferOffset=0;if(shaderBuffer==null||shaderBuffer.shader==null||shaderBuffer.shader.__bitmap==null){bitmap=null}else{bitmap=shaderBuffer.shader.__bitmap.input}fill=null;break;case 8:if(bitmap!=null){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_QUADS;var c3=data;var indices=c3.buffer.o[c3.oPos+1];var length=indices!=null?indices.get_length():Math.floor(c3.buffer.o[c3.oPos].get_length()/4);var uMatrix=renderer.__getMatrix(graphics.__owner.__renderTransform,1);var shader;if(shaderBuffer!=null&&!openfl__$internal_renderer_context3D_Context3DGraphics.maskRender){shader=renderer.__initShaderBuffer(shaderBuffer);renderer.__setShaderBuffer(shaderBuffer);renderer.applyMatrix(uMatrix);renderer.applyBitmapData(bitmap,false,repeat);renderer.applyAlpha(graphics.__owner.__worldAlpha);renderer.applyColorTransform(graphics.__owner.__worldColorTransform)}else{shader=openfl__$internal_renderer_context3D_Context3DGraphics.maskRender?renderer.__maskShader:renderer.__initGraphicsShader(null);renderer.setShader(shader);renderer.applyMatrix(uMatrix);renderer.applyBitmapData(bitmap,smooth,repeat);renderer.applyAlpha(graphics.__owner.__worldAlpha);renderer.applyColorTransform(graphics.__owner.__worldColorTransform);renderer.updateShader()}var end=quadBufferPosition+length;while(quadBufferPosition<end){length=Math.min(end-quadBufferPosition,context.__quadIndexBufferElements)|0;if(length<=0){break}if(shaderBuffer!=null&&!openfl__$internal_renderer_context3D_Context3DGraphics.maskRender){renderer.__updateShaderBuffer(shaderBufferOffset)}if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,graphics.__quadBuffer.vertexBuffer,quadBufferPosition*16,2)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,graphics.__quadBuffer.vertexBuffer,quadBufferPosition*16+2,2)}context.drawTriangles(context.__quadIndexBuffer,0,length*2);shaderBufferOffset+=length*4;quadBufferPosition+=length}renderer.__clearShader()}break;case 9:if(fill!=null){switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_RECT;var c4=data;var x=c4.buffer.f[c4.fPos];var y=c4.buffer.f[c4.fPos+1];var width=c4.buffer.f[c4.fPos+2];var height=c4.buffer.f[c4.fPos+3];var color=fill;openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform.redOffset=color>>>16&255;openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform.greenOffset=color>>>8&255;openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform.blueOffset=color&255;openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform.__combine(graphics.__owner.__worldColorTransform);matrix.identity();matrix.scale(width,height);matrix.tx=x;matrix.ty=y;matrix.concat(graphics.__owner.__renderTransform);var shader1=openfl__$internal_renderer_context3D_Context3DGraphics.maskRender?renderer.__maskShader:renderer.__initGraphicsShader(null);renderer.setShader(shader1);renderer.applyMatrix(renderer.__getMatrix(matrix,1));renderer.applyBitmapData(openfl__$internal_renderer_context3D_Context3DGraphics.blankBitmapData,true,repeat);renderer.applyAlpha((color>>>24&255)/255*graphics.__owner.__worldAlpha);renderer.applyColorTransform(openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform);renderer.updateShader();var vertexBuffer=openfl__$internal_renderer_context3D_Context3DGraphics.blankBitmapData.getVertexBuffer(context);if(shader1.__position!=null){context.setVertexBufferAt(shader1.__position.index,vertexBuffer,0,3)}if(shader1.__textureCoord!=null){context.setVertexBufferAt(shader1.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(openfl__$internal_renderer_context3D_Context3DGraphics.blankBitmapData.getIndexBuffer(context));shaderBufferOffset+=4;renderer.__clearShader()}break;case 12:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.DRAW_TRIANGLES;var c5=data;var indices1=c5.buffer.o[c5.oPos+1];var uvtData=c5.buffer.o[c5.oPos+2];var culling=c5.buffer.o[c5.oPos+3];var numVertices=Math.floor(c5.buffer.o[c5.oPos].get_length()/2);var length1=indices1!=null?indices1.get_length():numVertices;var hasUVTData=uvtData!=null&&uvtData.get_length()>=numVertices*3;var vertLength=hasUVTData?4:2;var dataPerVertex=vertLength+2;var vertexBuffer1=hasUVTData?graphics.__vertexBufferUVT:graphics.__vertexBuffer;var bufferPosition=hasUVTData?vertexBufferPositionUVT:vertexBufferPosition;var uMatrix1=renderer.__getMatrix(graphics.__owner.__renderTransform,1);var shader2;if(shaderBuffer!=null&&!openfl__$internal_renderer_context3D_Context3DGraphics.maskRender){shader2=renderer.__initShaderBuffer(shaderBuffer);renderer.__setShaderBuffer(shaderBuffer);renderer.applyMatrix(uMatrix1);renderer.applyBitmapData(bitmap,false,repeat);renderer.applyAlpha(1);renderer.applyColorTransform(null);renderer.__updateShaderBuffer(shaderBufferOffset)}else{shader2=openfl__$internal_renderer_context3D_Context3DGraphics.maskRender?renderer.__maskShader:renderer.__initGraphicsShader(null);renderer.setShader(shader2);renderer.applyMatrix(uMatrix1);renderer.applyBitmapData(bitmap,smooth,repeat);renderer.applyAlpha(graphics.__owner.__worldAlpha);renderer.applyColorTransform(graphics.__owner.__worldColorTransform);renderer.updateShader()}if(shader2.__position!=null){context.setVertexBufferAt(shader2.__position.index,vertexBuffer1,bufferPosition,hasUVTData?4:2)}if(shader2.__textureCoord!=null){context.setVertexBufferAt(shader2.__textureCoord.index,vertexBuffer1,bufferPosition+vertLength,2)}switch(culling){case 0:context.setCulling(0);break;case 1:context.setCulling(3);break;case 2:context.setCulling(1);break;default:}context.__drawTriangles(0,length1);shaderBufferOffset+=length1;if(hasUVTData){vertexBufferPositionUVT+=dataPerVertex*length1}else{vertexBufferPosition+=dataPerVertex*length1}switch(culling){case 1:case 2:context.setCulling(0);break;default:}renderer.__clearShader();break;case 13:bitmap=null;fill=null;shaderBuffer=null;switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type;break;case 18:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.MOVE_TO;break;case 19:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=openfl__$internal_renderer_DrawCommandType.OVERRIDE_BLEND_MODE;var c6=data;renderer.__setBlendMode(c6.buffer.o[c6.oPos]);break;default:switch(data.prev._hx_index){case 0:data.oPos+=2;data.bPos+=2;break;case 1:data.iPos+=1;data.fPos+=1;break;case 2:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 3:data.oPos+=1;break;case 4:data.fPos+=6;break;case 5:data.fPos+=4;break;case 6:data.fPos+=3;break;case 7:data.fPos+=4;break;case 8:data.oPos+=3;break;case 9:data.fPos+=4;break;case 10:data.fPos+=5;data.oPos+=1;break;case 12:data.oPos+=4;break;case 13:break;case 14:data.oPos+=2;data.bPos+=2;break;case 15:data.oPos+=4;data.iiPos+=2;data.ffPos+=1;data.fPos+=1;break;case 16:data.oPos+=4;data.iPos+=1;data.fPos+=2;data.bPos+=1;break;case 17:data.fPos+=2;break;case 18:data.fPos+=2;break;case 19:data.oPos+=1;break;case 20:data.oPos+=1;break;case 21:case 22:break;default:}data.prev=type}}openfl_geom_Matrix.__pool.release(matrix)}graphics.__hardwareDirty=false;graphics.set___dirty(false)}};openfl__$internal_renderer_context3D_Context3DGraphics.renderMask=function(graphics,renderer){openfl__$internal_renderer_context3D_Context3DGraphics.maskRender=true;openfl__$internal_renderer_context3D_Context3DGraphics.render(graphics,renderer);openfl__$internal_renderer_context3D_Context3DGraphics.maskRender=false};openfl__$internal_renderer_context3D_Context3DGraphics.resizeVertexBuffer=function(graphics,hasUVTData,length){var buffer=hasUVTData?graphics.__vertexBufferDataUVT:graphics.__vertexBufferData;var newBuffer=null;if(buffer==null){var this1;if(length!=null){this1=new Float32Array(length)}else{this1=null}newBuffer=this1}else if(length>buffer.length){var this2;if(length!=null){this2=new Float32Array(length)}else{this2=null}newBuffer=this2;newBuffer.set(buffer)}if(newBuffer!=null){if(hasUVTData){graphics.__vertexBufferDataUVT=newBuffer}else{graphics.__vertexBufferData=newBuffer}}};var openfl__$internal_renderer_context3D_Context3DMaskShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="varying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform sampler2D openfl_Texture;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\t\t\t\n\t\t\tif (color.a == 0.0) {\n\t\t\t\t\n\t\t\t\tdiscard;\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tgl_FragColor = color;\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tvarying vec2 openfl_TextureCoordv;\n\t\t\n\t\tuniform mat4 openfl_Matrix;\n\t\t\n\t\tvoid main(void) {\n\t\t\t\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\t\t\t\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\t\n\t\t}"}openfl_display_Shader.call(this);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl._internal.renderer.context3D.Context3DMaskShader"]=openfl__$internal_renderer_context3D_Context3DMaskShader;openfl__$internal_renderer_context3D_Context3DMaskShader.__name__="openfl._internal.renderer.context3D.Context3DMaskShader";openfl__$internal_renderer_context3D_Context3DMaskShader.__super__=openfl_display_Shader;openfl__$internal_renderer_context3D_Context3DMaskShader.prototype=$extend(openfl_display_Shader.prototype,{openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_Texture:null,__class__:openfl__$internal_renderer_context3D_Context3DMaskShader});var openfl_display_OpenGLRenderer=function(context,defaultRenderTarget){openfl_display_DisplayObjectRenderer.call(this)};$hxClasses["openfl.display.OpenGLRenderer"]=openfl_display_OpenGLRenderer;openfl_display_OpenGLRenderer.__name__="openfl.display.OpenGLRenderer";openfl_display_OpenGLRenderer.__super__=openfl_display_DisplayObjectRenderer;openfl_display_OpenGLRenderer.prototype=$extend(openfl_display_DisplayObjectRenderer.prototype,{gl:null,__class__:openfl_display_OpenGLRenderer});var openfl__$internal_renderer_context3D_Context3DRenderer=function(context,defaultRenderTarget){var _gthis=this;openfl_display_OpenGLRenderer.call(this,context);this.__init(context,defaultRenderTarget);if(openfl_display_Graphics.maxTextureWidth==null){openfl_display_Graphics.maxTextureWidth=openfl_display_Graphics.maxTextureHeight=this.__gl.getParameter(this.__gl.MAX_TEXTURE_SIZE)}this.__matrix=lime_math__$Matrix4_Matrix4_$Impl_$._new();this.__values=[];this.__softwareRenderer=new openfl__$internal_renderer_canvas_CanvasRenderer(null);this.__type="opengl";this.__setBlendMode(10);this.context3D.__setGLBlend(true);this.__clipRects=[];this.__maskObjects=[];this.__numClipRects=0;this.__projection=lime_math__$Matrix4_Matrix4_$Impl_$._new();this.__projectionFlipped=lime_math__$Matrix4_Matrix4_$Impl_$._new();this.__stencilReference=0;this.__tempRect=new openfl_geom_Rectangle;this.__defaultDisplayShader=new openfl_display_DisplayObjectShader;this.__defaultGraphicsShader=new openfl_display_GraphicsShader;this.__defaultShader=this.__defaultDisplayShader;this.__initShader(this.__defaultShader);this.__scrollRectMasks=new lime_utils_ObjectPool(function(){return new openfl_display_Shape});this.__alphaMaskShader=new openfl__$internal_renderer_context3D_Context3DAlphaMaskShader;this.__maskShader=new openfl__$internal_renderer_context3D_Context3DMaskShader;if(openfl__$internal_renderer_context3D_Context3DRenderer.__childRendererPool==null){openfl__$internal_renderer_context3D_Context3DRenderer.__childRendererPool=new lime_utils_ObjectPool(function(){var renderer=new openfl__$internal_renderer_context3D_Context3DRenderer(_gthis.context3D,null);renderer.__worldTransform=new openfl_geom_Matrix;renderer.__worldColorTransform=new openfl_geom_ColorTransform;return renderer})}};$hxClasses["openfl._internal.renderer.context3D.Context3DRenderer"]=openfl__$internal_renderer_context3D_Context3DRenderer;openfl__$internal_renderer_context3D_Context3DRenderer.__name__="openfl._internal.renderer.context3D.Context3DRenderer";openfl__$internal_renderer_context3D_Context3DRenderer.__super__=openfl_display_OpenGLRenderer;openfl__$internal_renderer_context3D_Context3DRenderer.prototype=$extend(openfl_display_OpenGLRenderer.prototype,{context3D:null,__alphaMaskShader:null,__clipRects:null,__context:null,__currentDisplayShader:null,__currentGraphicsShader:null,__currentShader:null,__currentShaderBuffer:null,__defaultDisplayShader:null,__defaultGraphicsShader:null,__defaultRenderTarget:null,__defaultShader:null,__displayHeight:null,__displayWidth:null,__flipped:null,__gl:null,__height:null,__maskShader:null,__matrix:null,__maskObjects:null,__numClipRects:null,__offsetX:null,__offsetY:null,__projection:null,__projectionFlipped:null,__scrollRectMasks:null,__softwareRenderer:null,__stencilReference:null,__tempRect:null,__updatedStencil:null,__upscaled:null,__values:null,__width:null,applyAlpha:function(alpha){openfl__$internal_renderer_context3D_Context3DRenderer.__alphaValue[0]=alpha;if(this.__currentShaderBuffer!=null){this.__currentShaderBuffer.addFloatOverride("openfl_Alpha",openfl__$internal_renderer_context3D_Context3DRenderer.__alphaValue)}else if(this.__currentShader!=null){if(this.__currentShader.__alpha!=null){this.__currentShader.__alpha.value=openfl__$internal_renderer_context3D_Context3DRenderer.__alphaValue}}},applyBitmapData:function(bitmapData,smooth,repeat){if(repeat==null){repeat=false}if(this.__currentShaderBuffer!=null){if(bitmapData!=null){openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue[0]=bitmapData.__textureWidth;openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue[1]=bitmapData.__textureHeight;this.__currentShaderBuffer.addFloatOverride("openfl_TextureSize",openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue)}}else if(this.__currentShader!=null){if(this.__currentShader.__bitmap!=null){this.__currentShader.__bitmap.input=bitmapData;this.__currentShader.__bitmap.filter=smooth&&this.__allowSmoothing?4:5;this.__currentShader.__bitmap.mipFilter=2;this.__currentShader.__bitmap.wrap=repeat?2:0}if(this.__currentShader.__texture!=null){this.__currentShader.__texture.input=bitmapData;this.__currentShader.__texture.filter=smooth&&this.__allowSmoothing?4:5;this.__currentShader.__texture.mipFilter=2;this.__currentShader.__texture.wrap=repeat?2:0}if(this.__currentShader.__textureSize!=null){if(bitmapData!=null){openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue[0]=bitmapData.__textureWidth;openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue[1]=bitmapData.__textureHeight;this.__currentShader.__textureSize.value=openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue}else{this.__currentShader.__textureSize.value=null}}}},applyColorTransform:function(colorTransform){var enabled=colorTransform!=null&&!colorTransform.__isDefault(true);this.applyHasColorTransform(enabled);if(enabled){colorTransform.__setArrays(openfl__$internal_renderer_context3D_Context3DRenderer.__colorMultipliersValue,openfl__$internal_renderer_context3D_Context3DRenderer.__colorOffsetsValue);if(this.__currentShaderBuffer!=null){this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier",openfl__$internal_renderer_context3D_Context3DRenderer.__colorMultipliersValue);this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset",openfl__$internal_renderer_context3D_Context3DRenderer.__colorOffsetsValue)}else if(this.__currentShader!=null){if(this.__currentShader.__colorMultiplier!=null){this.__currentShader.__colorMultiplier.value=openfl__$internal_renderer_context3D_Context3DRenderer.__colorMultipliersValue}if(this.__currentShader.__colorOffset!=null){this.__currentShader.__colorOffset.value=openfl__$internal_renderer_context3D_Context3DRenderer.__colorOffsetsValue}}}else if(this.__currentShaderBuffer!=null){this.__currentShaderBuffer.addFloatOverride("openfl_ColorMultiplier",openfl__$internal_renderer_context3D_Context3DRenderer.__emptyColorValue);this.__currentShaderBuffer.addFloatOverride("openfl_ColorOffset",openfl__$internal_renderer_context3D_Context3DRenderer.__emptyColorValue)}else if(this.__currentShader!=null){if(this.__currentShader.__colorMultiplier!=null){this.__currentShader.__colorMultiplier.value=openfl__$internal_renderer_context3D_Context3DRenderer.__emptyColorValue}if(this.__currentShader.__colorOffset!=null){this.__currentShader.__colorOffset.value=openfl__$internal_renderer_context3D_Context3DRenderer.__emptyColorValue}}},applyHasColorTransform:function(enabled){openfl__$internal_renderer_context3D_Context3DRenderer.__hasColorTransformValue[0]=enabled;if(this.__currentShaderBuffer!=null){this.__currentShaderBuffer.addBoolOverride("openfl_HasColorTransform",openfl__$internal_renderer_context3D_Context3DRenderer.__hasColorTransformValue)}else if(this.__currentShader!=null){if(this.__currentShader.__hasColorTransform!=null){this.__currentShader.__hasColorTransform.value=openfl__$internal_renderer_context3D_Context3DRenderer.__hasColorTransformValue}}},applyMatrix:function(matrix){if(this.__currentShaderBuffer!=null){this.__currentShaderBuffer.addFloatOverride("openfl_Matrix",matrix)}else if(this.__currentShader!=null){if(this.__currentShader.__matrix!=null){this.__currentShader.__matrix.value=matrix}}},setShader:function(shader){this.__currentShaderBuffer=null;if(this.__currentShader==shader){return}if(shader==null){this.__currentShader=null;this.context3D.setProgram(null);return}else{this.__currentShader=shader;this.__initShader(shader);this.context3D.setProgram(shader.program);this.context3D.__flushGLProgram();this.__currentShader.__enable();this.context3D.__state.shader=shader}},setViewport:function(){this.__gl.viewport(this.__offsetX,this.__offsetY,this.__displayWidth,this.__displayHeight)},updateShader:function(){if(this.__currentShader!=null){if(this.__currentShader.__position!=null){this.__currentShader.__position.__useArray=true}if(this.__currentShader.__textureCoord!=null){this.__currentShader.__textureCoord.__useArray=true}this.context3D.setProgram(this.__currentShader.program);this.context3D.__flushGLProgram();this.context3D.__flushGLTextures();this.__currentShader.__update()}},useAlphaArray:function(){if(this.__currentShader!=null){if(this.__currentShader.__alpha!=null){this.__currentShader.__alpha.__useArray=true}}},useColorTransformArray:function(){if(this.__currentShader!=null){if(this.__currentShader.__colorMultiplier!=null){this.__currentShader.__colorMultiplier.__useArray=true}if(this.__currentShader.__colorOffset!=null){this.__currentShader.__colorOffset.__useArray=true}}},__clear:function(){if(this.__stage==null||this.__stage.__transparent){this.context3D.clear(0,0,0,0,0,0,1)}else{this.context3D.clear(this.__stage.__colorSplit[0],this.__stage.__colorSplit[1],this.__stage.__colorSplit[2],1,0,0,1)}this.__cleared=true},__clearShader:function(){if(this.__currentShader!=null){if(this.__currentShaderBuffer==null){if(this.__currentShader.__bitmap!=null){this.__currentShader.__bitmap.input=null}}else{this.__currentShaderBuffer.clearOverride()}if(this.__currentShader.__texture!=null){this.__currentShader.__texture.input=null}if(this.__currentShader.__textureSize!=null){this.__currentShader.__textureSize.value=null}if(this.__currentShader.__hasColorTransform!=null){this.__currentShader.__hasColorTransform.value=null}if(this.__currentShader.__position!=null){this.__currentShader.__position.value=null}if(this.__currentShader.__matrix!=null){this.__currentShader.__matrix.value=null}this.__currentShader.__clearUseArray()}},__copyShader:function(other){this.__currentShader=other.__currentShader;this.__currentShaderBuffer=other.__currentShaderBuffer;this.__currentDisplayShader=other.__currentDisplayShader;this.__currentGraphicsShader=other.__currentGraphicsShader},__drawBitmapData:function(bitmapData,source,clipRect){if(clipRect!=null){this.__pushMaskRect(clipRect,source.__renderTransform)}var context=this.context3D;var cacheRTT=context.__state.renderToTexture;var cacheRTTDepthStencil=context.__state.renderToTextureDepthStencil;var cacheRTTAntiAlias=context.__state.renderToTextureAntiAlias;var cacheRTTSurfaceSelector=context.__state.renderToTextureSurfaceSelector;context.setRenderToTexture(bitmapData.getTexture(context),true);this.__render(source);if(cacheRTT!=null){context.setRenderToTexture(cacheRTT,cacheRTTDepthStencil,cacheRTTAntiAlias,cacheRTTSurfaceSelector)}else{context.setRenderToBackBuffer()}if(clipRect!=null){this.__popMaskRect()}},__fillRect:function(bitmapData,rect,color){if(bitmapData.__texture!=null){var context=bitmapData.__texture.__context;var color1=color;var useScissor=!bitmapData.rect.equals(rect);var cacheRTT=context.__state.renderToTexture;var cacheRTTDepthStencil=context.__state.renderToTextureDepthStencil;var cacheRTTAntiAlias=context.__state.renderToTextureAntiAlias;var cacheRTTSurfaceSelector=context.__state.renderToTextureSurfaceSelector;context.setRenderToTexture(bitmapData.__texture);if(useScissor){context.setScissorRectangle(rect)}context.clear((color1>>>16&255)/255,(color1>>>8&255)/255,(color1&255)/255,bitmapData.transparent?(color1>>>24&255)/255:1,0,0,1);if(useScissor){context.setScissorRectangle(null)}if(cacheRTT!=null){context.setRenderToTexture(cacheRTT,cacheRTTDepthStencil,cacheRTTAntiAlias,cacheRTTSurfaceSelector)}else{context.setRenderToBackBuffer()}}},__getMatrix:function(transform,pixelSnapping){var _matrix=openfl_geom_Matrix.__pool.get();_matrix.copyFrom(transform);_matrix.concat(this.__worldTransform);if(pixelSnapping==0||pixelSnapping==1&&_matrix.b==0&&_matrix.c==0&&(_matrix.a<1.001&&_matrix.a>.999)&&(_matrix.d<1.001&&_matrix.d>.999)){_matrix.tx=Math.round(_matrix.tx);_matrix.ty=Math.round(_matrix.ty)}lime_math__$Matrix4_Matrix4_$Impl_$.identity(this.__matrix);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,0,_matrix.a);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,1,_matrix.b);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,4,_matrix.c);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,5,_matrix.d);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,12,_matrix.tx);lime_math__$Matrix4_Matrix4_$Impl_$.set(this.__matrix,13,_matrix.ty);lime_math__$Matrix4_Matrix4_$Impl_$.append(this.__matrix,this.__flipped?this.__projectionFlipped:this.__projection);this.__values[0]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,0);this.__values[1]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,1);this.__values[2]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,2);this.__values[3]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,3);this.__values[4]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,4);this.__values[5]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,5);this.__values[6]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,6);this.__values[7]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,7);this.__values[8]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,8);this.__values[9]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,9);this.__values[10]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,10);this.__values[11]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,11);this.__values[12]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,12);this.__values[13]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,13);this.__values[14]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,14);this.__values[15]=lime_math__$Matrix4_Matrix4_$Impl_$.get(this.__matrix,15);openfl_geom_Matrix.__pool.release(_matrix);return this.__values},__init:function(context,defaultRenderTarget){this.context3D=context;this.__context=context.__context;this.__gl=context.__context.webgl;this.gl=this.__gl;this.__defaultRenderTarget=defaultRenderTarget;this.__flipped=this.__defaultRenderTarget==null},__initShader:function(shader){if(shader!=null){if(shader.__context==null){shader.__context=this.context3D;shader.__init()}return shader}return this.__defaultShader},__initDisplayShader:function(shader){if(shader!=null){if(shader.__context==null){shader.__context=this.context3D;shader.__init()}return shader}return this.__defaultDisplayShader},__initGraphicsShader:function(shader){if(shader!=null){if(shader.__context==null){shader.__context=this.context3D;shader.__init()}return shader}return this.__defaultGraphicsShader},__initShaderBuffer:function(shaderBuffer){if(shaderBuffer!=null){return this.__initGraphicsShader(shaderBuffer.shader)}return this.__defaultGraphicsShader},__popMask:function(){if(this.__stencilReference==0){return}var mask=this.__maskObjects.pop();if(this.__stencilReference>1){this.context3D.setStencilActions(2,1,0,0,5);this.context3D.setStencilReferenceValue(this.__stencilReference,255,255);this.context3D.setColorMask(false,false,false,false);this.__renderMask(mask);this.__stencilReference--;this.context3D.setStencilActions(2,1,5,5,5);this.context3D.setStencilReferenceValue(this.__stencilReference,255,0);this.context3D.setColorMask(true,true,true,true)}else{this.__stencilReference=0;this.context3D.setStencilActions();this.context3D.setStencilReferenceValue(0,0,0)}},__popMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(object.__mask!=null){this.__popMask()}if(handleScrollRect&&object.__scrollRect!=null){if(object.__renderTransform.b!=0||object.__renderTransform.c!=0){this.__scrollRectMasks.release(this.__maskObjects[this.__maskObjects.length-1]);this.__popMask()}else{this.__popMaskRect()}}},__popMaskRect:function(){if(this.__numClipRects>0){this.__numClipRects--;if(this.__numClipRects>0){this.__scissorRect(this.__clipRects[this.__numClipRects-1])}else{this.__scissorRect()}}},__pushMask:function(mask){if(this.__stencilReference==0){this.context3D.clear(0,0,0,0,0,0,4);this.__updatedStencil=true}this.context3D.setStencilActions(2,1,2,5,5);this.context3D.setStencilReferenceValue(this.__stencilReference,255,255);this.context3D.setColorMask(false,false,false,false);this.__renderMask(mask);this.__maskObjects.push(mask);this.__stencilReference++;this.context3D.setStencilActions(2,1,5,5,5);this.context3D.setStencilReferenceValue(this.__stencilReference,255,0);this.context3D.setColorMask(true,true,true,true)},__pushMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(handleScrollRect&&object.__scrollRect!=null){if(object.__renderTransform.b!=0||object.__renderTransform.c!=0){var shape=this.__scrollRectMasks.get();shape.get_graphics().clear();shape.get_graphics().beginFill(65280);shape.get_graphics().drawRect(object.__scrollRect.x,object.__scrollRect.y,object.__scrollRect.width,object.__scrollRect.height);shape.__renderTransform.copyFrom(object.__renderTransform);this.__pushMask(shape)}else{this.__pushMaskRect(object.__scrollRect,object.__renderTransform)}}if(object.__mask!=null){this.__pushMask(object.__mask)}},__pushMaskRect:function(rect,transform){if(this.__numClipRects==this.__clipRects.length){this.__clipRects[this.__numClipRects]=new openfl_geom_Rectangle}var _matrix=openfl_geom_Matrix.__pool.get();_matrix.copyFrom(transform);_matrix.concat(this.__worldTransform);var clipRect=this.__clipRects[this.__numClipRects];rect.__transform(clipRect,_matrix);if(this.__numClipRects>0){var parentClipRect=this.__clipRects[this.__numClipRects-1];clipRect.__contract(parentClipRect.x,parentClipRect.y,parentClipRect.width,parentClipRect.height)}if(clipRect.height<0){clipRect.height=0}if(clipRect.width<0){clipRect.width=0}openfl_geom_Matrix.__pool.release(_matrix);this.__scissorRect(clipRect);this.__numClipRects++},__render:function(object){this.context3D.setColorMask(true,true,true,true);this.context3D.setCulling(3);this.context3D.setDepthTest(false,0);this.context3D.setStencilActions();this.context3D.setStencilReferenceValue(0,0,0);this.context3D.setScissorRectangle(null);this.__blendMode=null;this.__setBlendMode(10);if(this.__defaultRenderTarget==null){openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(this.__offsetX,this.__offsetY,this.__displayWidth,this.__displayHeight);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);this.__upscaled=this.__worldTransform.a!=1||this.__worldTransform.d!=1;if(object!=null&&object.__type!=null){this.__renderDisplayObject(object)}if(this.__offsetX>0||this.__offsetY>0){if(this.__offsetX>0){openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(0,0,this.__offsetX,this.__height);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);this.context3D.__flushGL();this.__gl.clearColor(0,0,0,1);this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(this.__offsetX+this.__displayWidth,0,this.__width,this.__height);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);this.context3D.__flushGL();this.__gl.clearColor(0,0,0,1);this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)}if(this.__offsetY>0){openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(0,0,this.__width,this.__offsetY);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);this.context3D.__flushGL();this.__gl.clearColor(0,0,0,1);this.__gl.clear(this.__gl.COLOR_BUFFER_BIT);openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(0,this.__offsetY+this.__displayHeight,this.__width,this.__height);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);this.context3D.__flushGL();this.__gl.clearColor(0,0,0,1);this.__gl.clear(this.__gl.COLOR_BUFFER_BIT)}this.context3D.setScissorRectangle(null)}}else{openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(this.__offsetX,this.__offsetY,this.__displayWidth,this.__displayHeight);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle);var cacheMask=object.__mask;var cacheScrollRect=object.__scrollRect;object.__mask=null;object.__scrollRect=null;if(object!=null){if(object.__type!=null){this.__renderDisplayObject(object)}else{this.__renderBitmapData(object)}}object.__mask=cacheMask;object.__scrollRect=cacheScrollRect}this.context3D.present()},__renderBitmap:function(bitmap){this.__updateCacheBitmap(bitmap,false);if(bitmap.__bitmapData!=null&&bitmap.__bitmapData.image!=null){bitmap.__imageVersion=bitmap.__bitmapData.image.version}if(bitmap.__cacheBitmap!=null&&!bitmap.__isCacheBitmapRender){openfl__$internal_renderer_context3D_Context3DBitmap.render(bitmap.__cacheBitmap,this)}else{if(!(bitmap.opaqueBackground==null&&bitmap.__graphics==null)){if(!(!bitmap.__renderable||bitmap.__worldAlpha<=0)){if(bitmap.opaqueBackground!=null&&!bitmap.__isCacheBitmapRender&&bitmap.get_width()>0&&bitmap.get_height()>0){this.__setBlendMode(bitmap.__worldBlendMode);this.__pushMaskObject(bitmap);var context=this.context3D;var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,bitmap.get_width(),bitmap.get_height());this.__pushMaskRect(rect,bitmap.__renderTransform);var color=bitmap.opaqueBackground;context.clear((color>>>16&255)/255,(color>>>8&255)/255,(color&255)/255,1,0,0,1);this.__popMaskRect();this.__popMaskObject(bitmap);openfl_geom_Rectangle.__pool.release(rect)}if(bitmap.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.render(bitmap,this)}}}openfl__$internal_renderer_context3D_Context3DBitmap.render(bitmap,this)}},__renderBitmapData:function(bitmapData){this.__setBlendMode(10);var shader=this.__defaultDisplayShader;this.setShader(shader);this.applyBitmapData(bitmapData,this.__upscaled);this.applyMatrix(this.__getMatrix(bitmapData.__worldTransform,1));this.applyAlpha(bitmapData.__worldAlpha);this.applyColorTransform(bitmapData.__worldColorTransform);this.updateShader();var vertexBuffer=bitmapData.getVertexBuffer(this.context3D);if(shader.__position!=null){this.context3D.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){this.context3D.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}var indexBuffer=bitmapData.getIndexBuffer(this.context3D);this.context3D.drawTriangles(indexBuffer);this.__clearShader()},__renderDisplayObject:function(object){if(object!=null&&object.__type!=null){switch(object.__type._hx_index){case 0:this.__renderBitmap(object);break;case 2:this.__renderDisplayObjectContainer(object);break;case 1:case 4:this.__renderShape(object);break;case 5:this.__renderSimpleButton(object);break;case 6:this.__renderTextField(object);break;case 7:this.__renderTilemap(object);break;case 8:this.__renderVideo(object);break;default:}if(object.__customRenderEvent!=null){var event=object.__customRenderEvent;event.allowSmoothing=this.__allowSmoothing;event.objectMatrix.copyFrom(object.__renderTransform);event.objectColorTransform.__copyFrom(object.__worldColorTransform);event.renderer=this;if(!this.__cleared){this.__clear()}this.setShader(object.__worldShader);this.context3D.__flushGL();event.type="renderOpenGL";this.__setBlendMode(object.__worldBlendMode);this.__pushMaskObject(object);object.dispatchEvent(event);this.__popMaskObject(object);this.setViewport()}}},__renderDisplayObjectContainer:function(container){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0);if(!container.__renderable||container.__worldAlpha<=0){return}this.__updateCacheBitmap(container,false);if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){openfl__$internal_renderer_context3D_Context3DBitmap.render(container.__cacheBitmap,this)}else if(!(container.opaqueBackground==null&&container.__graphics==null)){if(!(!container.__renderable||container.__worldAlpha<=0)){if(container.opaqueBackground!=null&&!container.__isCacheBitmapRender&&container.get_width()>0&&container.get_height()>0){this.__setBlendMode(container.__worldBlendMode);this.__pushMaskObject(container);var context=this.context3D;var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,container.get_width(),container.get_height());this.__pushMaskRect(rect,container.__renderTransform);var color=container.opaqueBackground;context.clear((color>>>16&255)/255,(color>>>8&255)/255,(color&255)/255,1,0,0,1);this.__popMaskRect();this.__popMaskObject(container);openfl_geom_Rectangle.__pool.release(rect)}if(container.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.render(container,this)}}}if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){return}if(container.__children.length>0){this.__pushMaskObject(container);if(this.__stage!=null){var _g=0;var _g1=container.__children;while(_g<_g1.length){var child=_g1[_g];++_g;this.__renderDisplayObject(child);child.__renderDirty=false}container.__renderDirty=false}else{var _g2=0;var _g11=container.__children;while(_g2<_g11.length)this.__renderDisplayObject(_g11[_g2++])}}if(container.__children.length>0){this.__popMaskObject(container)}},__renderFilterPass:function(source,shader,smooth,clear){if(clear==null){clear=true}if(source==null||shader==null){return}if(this.__defaultRenderTarget==null){return}var cacheRTT=this.context3D.__state.renderToTexture;var cacheRTTDepthStencil=this.context3D.__state.renderToTextureDepthStencil;var cacheRTTAntiAlias=this.context3D.__state.renderToTextureAntiAlias;var cacheRTTSurfaceSelector=this.context3D.__state.renderToTextureSurfaceSelector;this.context3D.setRenderToTexture(this.__defaultRenderTarget.getTexture(this.context3D),false);if(clear){this.context3D.clear(0,0,0,0,0,0,1)}var shader1=this.__initShader(shader);this.setShader(shader1);this.applyAlpha(1);this.applyBitmapData(source,smooth);this.applyColorTransform(null);this.applyMatrix(this.__getMatrix(source.__renderTransform,1));this.updateShader();var vertexBuffer=source.getVertexBuffer(this.context3D);if(shader1.__position!=null){this.context3D.setVertexBufferAt(shader1.__position.index,vertexBuffer,0,3)}if(shader1.__textureCoord!=null){this.context3D.setVertexBufferAt(shader1.__textureCoord.index,vertexBuffer,3,2)}var indexBuffer=source.getIndexBuffer(this.context3D);this.context3D.drawTriangles(indexBuffer);if(cacheRTT!=null){this.context3D.setRenderToTexture(cacheRTT,cacheRTTDepthStencil,cacheRTTAntiAlias,cacheRTTSurfaceSelector)}else{this.context3D.setRenderToBackBuffer()}this.__clearShader()},__renderMask:function(mask){if(mask!=null){switch(mask.__type._hx_index){case 0:openfl__$internal_renderer_context3D_Context3DBitmap.renderMask(mask,this);break;case 2:var container=mask;var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){orphan1.__cleanup()}}container.__removedChildren.set_length(0);if(container.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.renderMask(container,this)}var _g=0;var _g1=container.__children;while(_g<_g1.length)this.__renderMask(_g1[_g++]);break;case 3:break;case 5:this.__renderMask(mask.__currentState);break;case 6:openfl__$internal_renderer_context3D_Context3DTextField.renderMask(mask,this);openfl__$internal_renderer_context3D_Context3DShape.renderMask(mask,this);break;case 7:if(!(mask.opaqueBackground==null&&mask.__graphics==null)){mask.opaqueBackground!=null&&!mask.__isCacheBitmapRender&&mask.get_width()>0&&mask.get_height()>0;if(mask.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.renderMask(mask,this)}}break;case 8:openfl__$internal_renderer_context3D_Context3DVideo.renderMask(mask,this);break;default:if(mask.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.renderMask(mask,this)}}}},__renderShape:function(shape){this.__updateCacheBitmap(shape,false);if(shape.__cacheBitmap!=null&&!shape.__isCacheBitmapRender){openfl__$internal_renderer_context3D_Context3DBitmap.render(shape.__cacheBitmap,this)}else if(!(shape.opaqueBackground==null&&shape.__graphics==null)){if(!(!shape.__renderable||shape.__worldAlpha<=0)){if(shape.opaqueBackground!=null&&!shape.__isCacheBitmapRender&&shape.get_width()>0&&shape.get_height()>0){this.__setBlendMode(shape.__worldBlendMode);this.__pushMaskObject(shape);var context=this.context3D;var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,shape.get_width(),shape.get_height());this.__pushMaskRect(rect,shape.__renderTransform);var color=shape.opaqueBackground;context.clear((color>>>16&255)/255,(color>>>8&255)/255,(color&255)/255,1,0,0,1);this.__popMaskRect();this.__popMaskObject(shape);openfl_geom_Rectangle.__pool.release(rect)}if(shape.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.render(shape,this)}}}},__renderSimpleButton:function(button){if(!button.__renderable||button.__worldAlpha<=0||button.__currentState==null){return}this.__pushMaskObject(button);this.__renderDisplayObject(button.__currentState);this.__popMaskObject(button)},__renderTextField:function(textField){this.__updateCacheBitmap(textField,textField.__dirty);if(textField.__cacheBitmap!=null&&!textField.__isCacheBitmapRender){openfl__$internal_renderer_context3D_Context3DBitmap.render(textField.__cacheBitmap,this)}else{openfl__$internal_renderer_context3D_Context3DTextField.render(textField,this);if(!(textField.opaqueBackground==null&&textField.__graphics==null)){if(!(!textField.__renderable||textField.__worldAlpha<=0)){if(textField.opaqueBackground!=null&&!textField.__isCacheBitmapRender&&textField.get_width()>0&&textField.get_height()>0){this.__setBlendMode(textField.__worldBlendMode);this.__pushMaskObject(textField);var context=this.context3D;var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,textField.get_width(),textField.get_height());this.__pushMaskRect(rect,textField.__renderTransform);var color=textField.opaqueBackground;context.clear((color>>>16&255)/255,(color>>>8&255)/255,(color&255)/255,1,0,0,1);this.__popMaskRect();this.__popMaskObject(textField);openfl_geom_Rectangle.__pool.release(rect)}if(textField.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.render(textField,this)}}}}},__renderTilemap:function(tilemap){this.__updateCacheBitmap(tilemap,false);if(tilemap.__cacheBitmap!=null&&!tilemap.__isCacheBitmapRender){openfl__$internal_renderer_context3D_Context3DBitmap.render(tilemap.__cacheBitmap,this)}else{if(!(tilemap.opaqueBackground==null&&tilemap.__graphics==null)){if(!(!tilemap.__renderable||tilemap.__worldAlpha<=0)){if(tilemap.opaqueBackground!=null&&!tilemap.__isCacheBitmapRender&&tilemap.get_width()>0&&tilemap.get_height()>0){this.__setBlendMode(tilemap.__worldBlendMode);this.__pushMaskObject(tilemap);var context=this.context3D;var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,tilemap.get_width(),tilemap.get_height());this.__pushMaskRect(rect,tilemap.__renderTransform);var color=tilemap.opaqueBackground;context.clear((color>>>16&255)/255,(color>>>8&255)/255,(color&255)/255,1,0,0,1);this.__popMaskRect();this.__popMaskObject(tilemap);openfl_geom_Rectangle.__pool.release(rect)}if(tilemap.__graphics!=null){openfl__$internal_renderer_context3D_Context3DShape.render(tilemap,this)}}}openfl__$internal_renderer_context3D_Context3DTilemap.render(tilemap,this)}},__renderVideo:function(video){openfl__$internal_renderer_context3D_Context3DVideo.render(video,this)},__resize:function(width,height){this.__width=width;this.__height=height;var w=this.__defaultRenderTarget==null?this.__stage.stageWidth:this.__defaultRenderTarget.width;var h=this.__defaultRenderTarget==null?this.__stage.stageHeight:this.__defaultRenderTarget.height;var tmp;if(this.__defaultRenderTarget==null){var _this=this.__worldTransform;tmp=Math.round(0*_this.a+0*_this.c+_this.tx)}else{tmp=0}this.__offsetX=tmp;var tmp1;if(this.__defaultRenderTarget==null){var _this1=this.__worldTransform;tmp1=Math.round(0*_this1.b+0*_this1.d+_this1.ty)}else{tmp1=0}this.__offsetY=tmp1;var tmp2;if(this.__defaultRenderTarget==null){var _this2=this.__worldTransform;tmp2=Math.round(w*_this2.a+0*_this2.c+_this2.tx-this.__offsetX)}else{tmp2=w}this.__displayWidth=tmp2;var tmp3;if(this.__defaultRenderTarget==null){var _this3=this.__worldTransform;tmp3=Math.round(0*_this3.b+h*_this3.d+_this3.ty-this.__offsetY)}else{tmp3=h}this.__displayHeight=tmp3;lime_math__$Matrix4_Matrix4_$Impl_$.createOrtho(this.__projection,0,this.__displayWidth+this.__offsetX*2,0,this.__displayHeight+this.__offsetY*2,-1e3,1e3);lime_math__$Matrix4_Matrix4_$Impl_$.createOrtho(this.__projectionFlipped,0,this.__displayWidth+this.__offsetX*2,this.__displayHeight+this.__offsetY*2,0,-1e3,1e3)},__resumeClipAndMask:function(childRenderer){if(this.__stencilReference>0){this.context3D.setStencilActions(2,1,5,5,5);this.context3D.setStencilReferenceValue(this.__stencilReference,255,0)}else{this.context3D.setStencilActions();this.context3D.setStencilReferenceValue(0,0,0)}if(this.__numClipRects>0){this.__scissorRect(this.__clipRects[this.__numClipRects-1])}else{this.__scissorRect()}},__scissorRect:function(clipRect){if(clipRect!=null){var x=Math.floor(clipRect.x);var y=Math.floor(clipRect.y);var width=clipRect.width>0?Math.ceil(clipRect.get_right())-x:0;var height=clipRect.height>0?Math.ceil(clipRect.get_bottom())-y:0;if(width<0){width=0}if(height<0){height=0}openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle.setTo(x,y,width,height);this.context3D.setScissorRectangle(openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle)}else{this.context3D.setScissorRectangle(null)}},__setBlendMode:function(value){if(this.__overrideBlendMode!=null){value=this.__overrideBlendMode}if(this.__blendMode==value){return}this.__blendMode=value;switch(value){case 0:this.context3D.setBlendFactors(2,2);break;case 9:this.context3D.setBlendFactors(1,5);break;case 12:this.context3D.setBlendFactors(2,6);break;case 14:this.context3D.setBlendFactors(2,2);this.context3D.__setGLBlendEquation(this.__gl.FUNC_REVERSE_SUBTRACT);break;default:this.context3D.setBlendFactors(2,5)}},__setRenderTarget:function(renderTarget){this.__defaultRenderTarget=renderTarget;this.__flipped=renderTarget==null;if(renderTarget!=null){this.__resize(renderTarget.width,renderTarget.height)}},__setShaderBuffer:function(shaderBuffer){this.setShader(shaderBuffer.shader);this.__currentShaderBuffer=shaderBuffer},__suspendClipAndMask:function(){if(this.__stencilReference>0){this.context3D.setStencilActions();this.context3D.setStencilReferenceValue(0,0,0)}if(this.__numClipRects>0){this.__scissorRect()}},__updateCacheBitmap:function(object,force){if(object.__isCacheBitmapRender){return false}var updated=false;if(object.get_cacheAsBitmap()){if(object.__cacheBitmapMatrix==null){object.__cacheBitmapMatrix=new openfl_geom_Matrix}var hasFilters=object.__filters!=null;var bitmapMatrix=object.__cacheAsBitmapMatrix!=null?object.__cacheAsBitmapMatrix:object.__renderTransform;var colorTransform=openfl_geom_ColorTransform.__pool.get();colorTransform.__copyFrom(object.__worldColorTransform);if(this.__worldColorTransform!=null){colorTransform.__combine(this.__worldColorTransform)}var needRender=object.__cacheBitmap==null||object.__renderDirty&&(force||object.__children!=null&&object.__children.length>0)||object.opaqueBackground!=object.__cacheBitmapBackground||object.__graphics!=null&&object.__graphics.__hardwareDirty;var rect=null;if(!needRender&&(bitmapMatrix.a!=object.__cacheBitmapMatrix.a||bitmapMatrix.b!=object.__cacheBitmapMatrix.b||bitmapMatrix.c!=object.__cacheBitmapMatrix.c||bitmapMatrix.d!=object.__cacheBitmapMatrix.d)){needRender=true}if(hasFilters&&!needRender){var _g=0;var _g1=object.__filters;while(_g<_g1.length)if(_g1[_g++].__renderDirty){needRender=true;break}}var updateTransform=needRender||!object.__cacheBitmap.__worldTransform.equals(object.__worldTransform);object.__cacheBitmapMatrix.copyFrom(bitmapMatrix);object.__cacheBitmapMatrix.tx=0;object.__cacheBitmapMatrix.ty=0;var bitmapWidth=0;var bitmapHeight=0;var filterWidth=0;var filterHeight=0;var offsetX=0;var offsetY=0;if(updateTransform){rect=openfl_geom_Rectangle.__pool.get();object.__getFilterBounds(rect,object.__cacheBitmapMatrix);filterWidth=Math.ceil(rect.width);filterHeight=Math.ceil(rect.height);offsetX=rect.x>0?Math.ceil(rect.x):Math.floor(rect.x);offsetY=rect.y>0?Math.ceil(rect.y):Math.floor(rect.y);if(object.__cacheBitmapDataTexture!=null){if(filterWidth>object.__cacheBitmapDataTexture.width||filterHeight>object.__cacheBitmapDataTexture.height){var newValue=1;while(newValue<filterWidth)newValue<<=1;bitmapWidth=newValue;var newValue1=1;while(newValue1<filterHeight)newValue1<<=1;bitmapHeight=newValue1;needRender=true}else{bitmapWidth=object.__cacheBitmapDataTexture.width;bitmapHeight=object.__cacheBitmapDataTexture.height}}else{var newValue2=1;while(newValue2<filterWidth)newValue2<<=1;bitmapWidth=newValue2;var newValue3=1;while(newValue3<filterHeight)newValue3<<=1;bitmapHeight=newValue3}}if(needRender){updateTransform=true;object.__cacheBitmapBackground=object.opaqueBackground;if(filterWidth>=.5&&filterHeight>=.5){var needsFill=object.opaqueBackground!=null&&(bitmapWidth!=filterWidth||bitmapHeight!=filterHeight);var fillColor=object.opaqueBackground!=null?-16777216|object.opaqueBackground:0;if(object.__cacheBitmapDataTexture==null||bitmapWidth>object.__cacheBitmapDataTexture.width||bitmapHeight>object.__cacheBitmapDataTexture.height){object.__cacheBitmapDataTexture=openfl_display_BitmapData.fromTexture(this.context3D.createRectangleTexture(bitmapWidth,bitmapHeight,1,true))}object.__cacheBitmapDataTexture.fillRect(rect,0);if(needsFill){rect.setTo(0,0,filterWidth,filterHeight);object.__cacheBitmapDataTexture.fillRect(rect,fillColor)}}else{openfl_geom_ColorTransform.__pool.release(colorTransform);object.__cacheBitmap=null;object.__cacheBitmapData=null;object.__cacheBitmapDataTexture=null;return true}}if(object.__cacheBitmap==null){object.__cacheBitmap=new openfl_display_Bitmap}object.__cacheBitmap.set_bitmapData(object.__cacheBitmapDataTexture);if(updateTransform){object.__cacheBitmap.__worldTransform.copyFrom(object.__worldTransform);if(bitmapMatrix==object.__renderTransform){object.__cacheBitmap.__renderTransform.identity();object.__cacheBitmap.__renderTransform.tx=object.__renderTransform.tx+offsetX;object.__cacheBitmap.__renderTransform.ty=object.__renderTransform.ty+offsetY}else{object.__cacheBitmap.__renderTransform.copyFrom(object.__cacheBitmapMatrix);object.__cacheBitmap.__renderTransform.invert();object.__cacheBitmap.__renderTransform.concat(object.__renderTransform);object.__cacheBitmap.__renderTransform.tx+=offsetX;object.__cacheBitmap.__renderTransform.ty+=offsetY}}object.__cacheBitmap.smoothing=this.__allowSmoothing;object.__cacheBitmap.__renderable=object.__renderable;object.__cacheBitmap.__worldAlpha=object.__worldAlpha;object.__cacheBitmap.__worldBlendMode=object.__worldBlendMode;object.__cacheBitmap.__worldShader=object.__worldShader;object.__cacheBitmap.set_mask(object.__mask);if(needRender){var childRenderer=openfl__$internal_renderer_context3D_Context3DRenderer.__childRendererPool.get();childRenderer.__init(this.context3D,object.__cacheBitmapDataTexture);childRenderer.__stage=object.stage;childRenderer.__allowSmoothing=this.__allowSmoothing;childRenderer.__setBlendMode(10);childRenderer.__worldAlpha=1/object.__worldAlpha;childRenderer.__worldTransform.copyFrom(object.__renderTransform);childRenderer.__worldTransform.invert();childRenderer.__worldTransform.concat(object.__cacheBitmapMatrix);childRenderer.__worldTransform.tx-=offsetX;childRenderer.__worldTransform.ty-=offsetY;childRenderer.__worldColorTransform.__copyFrom(colorTransform);childRenderer.__worldColorTransform.__invert();object.__isCacheBitmapRender=true;var cacheRTT=this.context3D.__state.renderToTexture;var cacheRTTDepthStencil=this.context3D.__state.renderToTextureDepthStencil;var cacheRTTAntiAlias=this.context3D.__state.renderToTextureAntiAlias;var cacheRTTSurfaceSelector=this.context3D.__state.renderToTextureSurfaceSelector;var cacheBlendMode=this.__blendMode;this.__suspendClipAndMask();childRenderer.__copyShader(this);object.__cacheBitmapDataTexture.__setUVRect(this.context3D,0,0,filterWidth,filterHeight);childRenderer.__setRenderTarget(object.__cacheBitmapDataTexture);childRenderer.__drawBitmapData(object.__cacheBitmapDataTexture,object,null);if(hasFilters){var needCopyOfOriginal=false;var _g2=0;var _g11=object.__filters;while(_g2<_g11.length)if(_g11[_g2++].__preserveObject){needCopyOfOriginal=true}var cacheRenderer=openfl_display_BitmapData.__hardwareRenderer;openfl_display_BitmapData.__hardwareRenderer=childRenderer;var bitmap=this.context3D.__bitmapDataPool.get(filterWidth,filterHeight);var bitmap2=this.context3D.__bitmapDataPool.get(filterWidth,filterHeight);var bitmap3=needCopyOfOriginal?this.context3D.__bitmapDataPool.get(filterWidth,filterHeight):null;bitmap.__setUVRect(this.context3D,0,0,filterWidth,filterHeight);bitmap2.__setUVRect(this.context3D,0,0,filterWidth,filterHeight);if(bitmap3!=null){bitmap3.__setUVRect(this.context3D,0,0,filterWidth,filterHeight)}childRenderer.__setBlendMode(10);childRenderer.__worldAlpha=1;childRenderer.__worldTransform.identity();childRenderer.__worldColorTransform.__identity();var shader;var cacheBitmap;var firstPass=true;var _g21=0;var _g3=object.__filters;while(_g21<_g3.length){var filter=_g3[_g21];++_g21;if(filter.__preserveObject){childRenderer.__setRenderTarget(bitmap3);childRenderer.__renderFilterPass(firstPass?object.__cacheBitmapDataTexture:bitmap,childRenderer.__defaultDisplayShader,filter.__smooth)}var _g22=0;var _g31=filter.__numShaderPasses;while(_g22<_g31){shader=filter.__initShader(childRenderer,_g22++,filter.__preserveObject?bitmap3:null);childRenderer.__setBlendMode(filter.__shaderBlendMode);childRenderer.__setRenderTarget(bitmap2);childRenderer.__renderFilterPass(firstPass?object.__cacheBitmapDataTexture:bitmap,shader,filter.__smooth);firstPass=false;cacheBitmap=bitmap;bitmap=bitmap2;bitmap2=cacheBitmap}filter.__renderDirty=false}if(bitmap!=null){object.__cacheBitmapDataTexture.fillRect(object.__cacheBitmapDataTexture.rect,0);childRenderer.__setRenderTarget(object.__cacheBitmapDataTexture);childRenderer.__renderFilterPass(bitmap,childRenderer.__defaultDisplayShader,true)}this.context3D.__bitmapDataPool.release(bitmap);this.context3D.__bitmapDataPool.release(bitmap2);if(bitmap3!=null){this.context3D.__bitmapDataPool.release(bitmap3)}openfl_display_BitmapData.__hardwareRenderer=cacheRenderer}this.__blendMode=10;this.__setBlendMode(cacheBlendMode);this.__copyShader(childRenderer);if(cacheRTT!=null){this.context3D.setRenderToTexture(cacheRTT,cacheRTTDepthStencil,cacheRTTAntiAlias,cacheRTTSurfaceSelector)}else{this.context3D.setRenderToBackBuffer()}this.__resumeClipAndMask(childRenderer);this.setViewport();object.__isCacheBitmapRender=false;openfl__$internal_renderer_context3D_Context3DRenderer.__childRendererPool.release(childRenderer)}if(updateTransform){openfl_geom_Rectangle.__pool.release(rect)}updated=updateTransform;openfl_geom_ColorTransform.__pool.release(colorTransform)}else if(object.__cacheBitmap!=null){object.__cacheBitmap=null;object.__cacheBitmapDataTexture=null;updated=true}return updated},__updateShaderBuffer:function(bufferOffset){if(this.__currentShader!=null&&this.__currentShaderBuffer!=null){this.__currentShader.__updateFromBuffer(this.__currentShaderBuffer,bufferOffset)}},__class__:openfl__$internal_renderer_context3D_Context3DRenderer});var openfl__$internal_renderer_context3D_Context3DShape=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DShape"]=openfl__$internal_renderer_context3D_Context3DShape;openfl__$internal_renderer_context3D_Context3DShape.__name__="openfl._internal.renderer.context3D.Context3DShape";openfl__$internal_renderer_context3D_Context3DShape.render=function(shape,renderer){if(!shape.__renderable||shape.__worldAlpha<=0){return}var graphics=shape.__graphics;if(graphics!=null){renderer.__setBlendMode(shape.__worldBlendMode);renderer.__pushMaskObject(shape);openfl__$internal_renderer_context3D_Context3DGraphics.render(graphics,renderer);if(graphics.__bitmap!=null&&graphics.__visible){var context=renderer.context3D;var scale9Grid=shape.__worldScale9Grid;var shader=renderer.__initDisplayShader(shape.__worldShader);renderer.setShader(shader);renderer.applyBitmapData(graphics.__bitmap,true);renderer.applyMatrix(renderer.__getMatrix(graphics.__worldTransform,1));renderer.applyAlpha(shape.__worldAlpha);renderer.applyColorTransform(shape.__worldColorTransform);renderer.updateShader();var vertexBuffer=graphics.__bitmap.getVertexBuffer(context,scale9Grid,shape);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(graphics.__bitmap.getIndexBuffer(context,scale9Grid));renderer.__clearShader()}renderer.__popMaskObject(shape)}};openfl__$internal_renderer_context3D_Context3DShape.renderMask=function(shape,renderer){var graphics=shape.__graphics;if(graphics!=null){openfl__$internal_renderer_context3D_Context3DGraphics.renderMask(graphics,renderer);if(graphics.__bitmap!=null){var context=renderer.context3D;var shader=renderer.__maskShader;renderer.setShader(shader);renderer.applyBitmapData(graphics.__bitmap,true);renderer.applyMatrix(renderer.__getMatrix(graphics.__worldTransform,1));renderer.updateShader();var vertexBuffer=graphics.__bitmap.getVertexBuffer(context);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(graphics.__bitmap.getIndexBuffer(context));renderer.__clearShader()}}};var openfl__$internal_renderer_context3D_Context3DState=function(){this.backBufferEnableDepthAndStencil=false;this.blendDestinationAlphaFactor=9;this.blendSourceAlphaFactor=2;this.blendDestinationRGBFactor=9;this.blendSourceRGBFactor=2;this.colorMaskRed=true;this.colorMaskGreen=true;this.colorMaskBlue=true;this.colorMaskAlpha=true;this.culling=3;this.depthCompareMode=4;this.depthMask=true;this.samplerStates=[];this.scissorRectangle=new openfl_geom_Rectangle;this.stencilCompareMode=0;this.stencilDepthFail=5;this.stencilFail=5;this.stencilPass=5;this.stencilReadMask=255;this.stencilReferenceValue=0;this.stencilTriangleFace=2;this.stencilWriteMask=255;this.textures=[];this.__frontFaceGLCCW=true;this.__glBlendEquation=32774};$hxClasses["openfl._internal.renderer.context3D.Context3DState"]=openfl__$internal_renderer_context3D_Context3DState;openfl__$internal_renderer_context3D_Context3DState.__name__="openfl._internal.renderer.context3D.Context3DState";openfl__$internal_renderer_context3D_Context3DState.prototype={backBufferEnableDepthAndStencil:null,blendDestinationAlphaFactor:null,blendSourceAlphaFactor:null,blendDestinationRGBFactor:null,blendSourceRGBFactor:null,colorMaskRed:null,colorMaskGreen:null,colorMaskBlue:null,colorMaskAlpha:null,culling:null,depthCompareMode:null,depthMask:null,program:null,renderToTexture:null,renderToTextureAntiAlias:null,renderToTextureDepthStencil:null,renderToTextureSurfaceSelector:null,samplerStates:null,scissorEnabled:null,scissorRectangle:null,stencilCompareMode:null,stencilDepthFail:null,stencilFail:null,stencilPass:null,stencilReadMask:null,stencilReferenceValue:null,stencilTriangleFace:null,stencilWriteMask:null,textures:null,shader:null,__currentGLArrayBuffer:null,__currentGLElementArrayBuffer:null,__currentGLFramebuffer:null,__currentGLTexture2D:null,__currentGLTextureCubeMap:null,__enableGLBlend:null,__enableGLCullFace:null,__enableGLDepthTest:null,__enableGLScissorTest:null,__enableGLStencilTest:null,__frontFaceGLCCW:null,__glBlendEquation:null,__primaryGLFramebuffer:null,__class__:openfl__$internal_renderer_context3D_Context3DState};var openfl__$internal_renderer_context3D_Context3DTextField=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DTextField"]=openfl__$internal_renderer_context3D_Context3DTextField;openfl__$internal_renderer_context3D_Context3DTextField.__name__="openfl._internal.renderer.context3D.Context3DTextField";openfl__$internal_renderer_context3D_Context3DTextField.render=function(textField,renderer){var renderer1=renderer.__softwareRenderer;var textEngine=textField.__textEngine;var bounds=textEngine.background||textEngine.border?textEngine.bounds:textEngine.textBounds;var graphics=textField.__graphics;if(textField.__dirty){textField.__updateLayout();if(graphics.__bounds==null){graphics.__bounds=new openfl_geom_Rectangle}graphics.__bounds.copyFrom(bounds)}graphics.__update(renderer1.__worldTransform);if(textField.__dirty||graphics.__softwareDirty){var width=graphics.__width;var height=graphics.__height;if((textEngine.text==null||textEngine.text=="")&&!textEngine.background&&!textEngine.border&&!textEngine.__hasFocus&&(textEngine.type!=1||!textEngine.selectable)||(textEngine.width<=0||textEngine.height<=0)&&textEngine.autoSize!=2){textField.__graphics.__canvas=null;textField.__graphics.__context=null;textField.__graphics.__bitmap=null;textField.__graphics.__softwareDirty=false;textField.__graphics.set___dirty(false);textField.__dirty=false}else{if(textField.__graphics.__canvas==null){textField.__graphics.__canvas=window.document.createElement("canvas");textField.__graphics.__context=textField.__graphics.__canvas.getContext("2d")}openfl__$internal_renderer_canvas_CanvasTextField.context=graphics.__context;var transform=graphics.__renderTransform;if(renderer1.__domRenderer!=null){var scale=renderer1.pixelRatio;graphics.__canvas.width=width*scale|0;graphics.__canvas.height=height*scale|0;graphics.__canvas.style.width=width+"px";graphics.__canvas.style.height=height+"px";var matrix=openfl_geom_Matrix.__pool.get();matrix.copyFrom(transform);matrix.scale(scale,scale);renderer1.setTransform(matrix,openfl__$internal_renderer_canvas_CanvasTextField.context);openfl_geom_Matrix.__pool.release(matrix)}else{graphics.__canvas.width=width;graphics.__canvas.height=height;openfl__$internal_renderer_canvas_CanvasTextField.context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect==null){openfl__$internal_renderer_canvas_CanvasTextField.clearRect=typeof navigator!=="undefined"&&typeof navigator["isCocoonJS"]!=="undefined"}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect){openfl__$internal_renderer_canvas_CanvasTextField.context.clearRect(0,0,graphics.__canvas.width,graphics.__canvas.height)}if(textEngine.text!=null&&textEngine.text!=""||textEngine.__hasFocus){var text=textEngine.text;if(!renderer1.__allowSmoothing||textEngine.antiAliasType==0&&textEngine.sharpness==400){graphics.__context.imageSmoothingEnabled=false}else{graphics.__context.imageSmoothingEnabled=true}if(textEngine.border||textEngine.background){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1);if(textEngine.background){var tmp=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var tmp1=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp1;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}openfl__$internal_renderer_canvas_CanvasTextField.context.textBaseline="alphabetic";openfl__$internal_renderer_canvas_CanvasTextField.context.textAlign="start";var scrollX=-textField.get_scrollH();var scrollY=0;var _g=0;var _g1=textField.get_scrollV()-1;while(_g<_g1)scrollY-=textEngine.lineHeights.get(_g++);var advance;var group=textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.lineIndex<textField.get_scrollV()-1){continue}if(group1.lineIndex>textEngine.get_bottomScrollV()-1){break}var color="#"+StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.font=openfl__$internal_text_TextEngine.getFont(group1.format);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(group1.startIndex,group1.endIndex),group1.offsetX+scrollX-bounds.x,group1.offsetY+group1.ascent+scrollY-bounds.y);if(textField.__caretIndex>-1&&textEngine.selectable){if(textField.__selectionIndex==textField.__caretIndex){if(textField.__showCursor&&group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex){advance=0;var _g3=0;var _g4=textField.__caretIndex-group1.startIndex;while(_g3<_g4){var i=_g3++;if(group1.positions.length<=i){break}advance+=group1.positions[i]}var scrollY1=0;var _g5=textField.get_scrollV();var _g6=group1.lineIndex+1;while(_g5<_g6)scrollY1+=textEngine.lineHeights.get(_g5++-1);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp2=StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp2;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+2-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}else if(group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex||group1.startIndex<=textField.__selectionIndex&&group1.endIndex>=textField.__selectionIndex||group1.startIndex>textField.__caretIndex&&group1.endIndex<textField.__selectionIndex||group1.startIndex>textField.__selectionIndex&&group1.endIndex<textField.__caretIndex){var selectionStart=Math.min(textField.__selectionIndex,textField.__caretIndex)|0;var selectionEnd=Math.max(textField.__selectionIndex,textField.__caretIndex)|0;if(group1.startIndex>selectionStart){selectionStart=group1.startIndex}if(group1.endIndex<selectionEnd){selectionEnd=group1.endIndex}var end;var start=textField.getCharBoundaries(selectionStart);if(selectionEnd>=group1.endIndex){end=textField.getCharBoundaries(group1.endIndex-1);end.x+=end.width+2}else{end=textField.getCharBoundaries(selectionEnd)}if(start!=null&&end!=null){openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#000000";openfl__$internal_renderer_canvas_CanvasTextField.context.fillRect(start.x+scrollX,start.y+scrollY,end.x-start.x,group1.height);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#FFFFFF";openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(selectionStart,selectionEnd),scrollX+start.x,group1.offsetY+group1.ascent+scrollY)}}}if(group1.format.underline){openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var x=group1.offsetX+scrollX-bounds.x;var y=Math.floor(group1.offsetY+scrollY+group1.ascent-bounds.y)+.5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(x,y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(x+group1.width,y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}}else{if(textEngine.border||textEngine.background){if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1)}else{openfl__$internal_renderer_canvas_CanvasTextField.context.rect(0,0,bounds.width,bounds.height)}if(textEngine.background){var tmp3=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp3;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineCap="square";var tmp4=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp4;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}if(textField.__caretIndex>-1&&textEngine.selectable&&textField.__showCursor){var scrollX1=-textField.get_scrollH();var scrollY2=0;var _g2=0;var _g11=textField.get_scrollV()-1;while(_g2<_g11)scrollY2+=textEngine.lineHeights.get(_g2++);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp5=StringTools.hex(textField.get_defaultTextFormat().color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(scrollX1+2.5,scrollY2+2.5);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(scrollX1+2.5,scrollY2+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}graphics.__bitmap=openfl_display_BitmapData.fromCanvas(textField.__graphics.__canvas);graphics.__visible=true;textField.__dirty=false;graphics.__softwareDirty=false;graphics.set___dirty(false)}}textField.__graphics.__hardwareDirty=false};openfl__$internal_renderer_context3D_Context3DTextField.renderMask=function(textField,renderer){var renderer1=renderer.__softwareRenderer;var textEngine=textField.__textEngine;var bounds=textEngine.background||textEngine.border?textEngine.bounds:textEngine.textBounds;var graphics=textField.__graphics;if(textField.__dirty){textField.__updateLayout();if(graphics.__bounds==null){graphics.__bounds=new openfl_geom_Rectangle}graphics.__bounds.copyFrom(bounds)}graphics.__update(renderer1.__worldTransform);if(textField.__dirty||graphics.__softwareDirty){var width=graphics.__width;var height=graphics.__height;if((textEngine.text==null||textEngine.text=="")&&!textEngine.background&&!textEngine.border&&!textEngine.__hasFocus&&(textEngine.type!=1||!textEngine.selectable)||(textEngine.width<=0||textEngine.height<=0)&&textEngine.autoSize!=2){textField.__graphics.__canvas=null;textField.__graphics.__context=null;textField.__graphics.__bitmap=null;textField.__graphics.__softwareDirty=false;textField.__graphics.set___dirty(false);textField.__dirty=false}else{if(textField.__graphics.__canvas==null){textField.__graphics.__canvas=window.document.createElement("canvas");textField.__graphics.__context=textField.__graphics.__canvas.getContext("2d")}openfl__$internal_renderer_canvas_CanvasTextField.context=graphics.__context;var transform=graphics.__renderTransform;if(renderer1.__domRenderer!=null){var scale=renderer1.pixelRatio;graphics.__canvas.width=width*scale|0;graphics.__canvas.height=height*scale|0;graphics.__canvas.style.width=width+"px";graphics.__canvas.style.height=height+"px";var matrix=openfl_geom_Matrix.__pool.get();matrix.copyFrom(transform);matrix.scale(scale,scale);renderer1.setTransform(matrix,openfl__$internal_renderer_canvas_CanvasTextField.context);openfl_geom_Matrix.__pool.release(matrix)}else{graphics.__canvas.width=width;graphics.__canvas.height=height;openfl__$internal_renderer_canvas_CanvasTextField.context.setTransform(transform.a,transform.b,transform.c,transform.d,transform.tx,transform.ty)}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect==null){openfl__$internal_renderer_canvas_CanvasTextField.clearRect=typeof navigator!=="undefined"&&typeof navigator["isCocoonJS"]!=="undefined"}if(openfl__$internal_renderer_canvas_CanvasTextField.clearRect){openfl__$internal_renderer_canvas_CanvasTextField.context.clearRect(0,0,graphics.__canvas.width,graphics.__canvas.height)}if(textEngine.text!=null&&textEngine.text!=""||textEngine.__hasFocus){var text=textEngine.text;if(!renderer1.__allowSmoothing||textEngine.antiAliasType==0&&textEngine.sharpness==400){graphics.__context.imageSmoothingEnabled=false}else{graphics.__context.imageSmoothingEnabled=true}if(textEngine.border||textEngine.background){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1);if(textEngine.background){var tmp=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var tmp1=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp1;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}openfl__$internal_renderer_canvas_CanvasTextField.context.textBaseline="alphabetic";openfl__$internal_renderer_canvas_CanvasTextField.context.textAlign="start";var scrollX=-textField.get_scrollH();var scrollY=0;var _g=0;var _g1=textField.get_scrollV()-1;while(_g<_g1)scrollY-=textEngine.lineHeights.get(_g++);var advance;var group=textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.lineIndex<textField.get_scrollV()-1){continue}if(group1.lineIndex>textEngine.get_bottomScrollV()-1){break}var color="#"+StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.font=openfl__$internal_text_TextEngine.getFont(group1.format);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(group1.startIndex,group1.endIndex),group1.offsetX+scrollX-bounds.x,group1.offsetY+group1.ascent+scrollY-bounds.y);if(textField.__caretIndex>-1&&textEngine.selectable){if(textField.__selectionIndex==textField.__caretIndex){if(textField.__showCursor&&group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex){advance=0;var _g3=0;var _g4=textField.__caretIndex-group1.startIndex;while(_g3<_g4){var i=_g3++;if(group1.positions.length<=i){break}advance+=group1.positions[i]}var scrollY1=0;var _g5=textField.get_scrollV();var _g6=group1.lineIndex+1;while(_g5<_g6)scrollY1+=textEngine.lineHeights.get(_g5++-1);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp2=StringTools.hex(group1.format.color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp2;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+2-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(group1.offsetX+advance-textField.get_scrollH()-bounds.x,scrollY1+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1-bounds.y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}else if(group1.startIndex<=textField.__caretIndex&&group1.endIndex>=textField.__caretIndex||group1.startIndex<=textField.__selectionIndex&&group1.endIndex>=textField.__selectionIndex||group1.startIndex>textField.__caretIndex&&group1.endIndex<textField.__selectionIndex||group1.startIndex>textField.__selectionIndex&&group1.endIndex<textField.__caretIndex){var selectionStart=Math.min(textField.__selectionIndex,textField.__caretIndex)|0;var selectionEnd=Math.max(textField.__selectionIndex,textField.__caretIndex)|0;if(group1.startIndex>selectionStart){selectionStart=group1.startIndex}if(group1.endIndex<selectionEnd){selectionEnd=group1.endIndex}var end;var start=textField.getCharBoundaries(selectionStart);if(selectionEnd>=group1.endIndex){end=textField.getCharBoundaries(group1.endIndex-1);end.x+=end.width+2}else{end=textField.getCharBoundaries(selectionEnd)}if(start!=null&&end!=null){openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#000000";openfl__$internal_renderer_canvas_CanvasTextField.context.fillRect(start.x+scrollX,start.y+scrollY,end.x-start.x,group1.height);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#FFFFFF";openfl__$internal_renderer_canvas_CanvasTextField.context.fillText(text.substring(selectionStart,selectionEnd),scrollX+start.x,group1.offsetY+group1.ascent+scrollY)}}}if(group1.format.underline){openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle=color;openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;var x=group1.offsetX+scrollX-bounds.x;var y=Math.floor(group1.offsetY+scrollY+group1.ascent-bounds.y)+.5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(x,y);openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(x+group1.width,y);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}}else{if(textEngine.border||textEngine.background){if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.rect(.5,.5,bounds.width-1,bounds.height-1)}else{openfl__$internal_renderer_canvas_CanvasTextField.context.rect(0,0,bounds.width,bounds.height)}if(textEngine.background){var tmp3=StringTools.hex(textEngine.backgroundColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.fillStyle="#"+tmp3;openfl__$internal_renderer_canvas_CanvasTextField.context.fill()}if(textEngine.border){openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineCap="square";var tmp4=StringTools.hex(textEngine.borderColor&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp4;openfl__$internal_renderer_canvas_CanvasTextField.context.stroke()}}if(textField.__caretIndex>-1&&textEngine.selectable&&textField.__showCursor){var scrollX1=-textField.get_scrollH();var scrollY2=0;var _g2=0;var _g11=textField.get_scrollV()-1;while(_g2<_g11)scrollY2+=textEngine.lineHeights.get(_g2++);openfl__$internal_renderer_canvas_CanvasTextField.context.beginPath();var tmp5=StringTools.hex(textField.get_defaultTextFormat().color&16777215,6);openfl__$internal_renderer_canvas_CanvasTextField.context.strokeStyle="#"+tmp5;openfl__$internal_renderer_canvas_CanvasTextField.context.moveTo(scrollX1+2.5,scrollY2+2.5);openfl__$internal_renderer_canvas_CanvasTextField.context.lineWidth=1;openfl__$internal_renderer_canvas_CanvasTextField.context.lineTo(scrollX1+2.5,scrollY2+openfl__$internal_text_TextEngine.getFormatHeight(textField.get_defaultTextFormat())-1);openfl__$internal_renderer_canvas_CanvasTextField.context.stroke();openfl__$internal_renderer_canvas_CanvasTextField.context.closePath()}}graphics.__bitmap=openfl_display_BitmapData.fromCanvas(textField.__graphics.__canvas);graphics.__visible=true;textField.__dirty=false;graphics.__softwareDirty=false;graphics.set___dirty(false)}}textField.__graphics.__hardwareDirty=false};var openfl__$internal_renderer_context3D_Context3DTilemap=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DTilemap"]=openfl__$internal_renderer_context3D_Context3DTilemap;openfl__$internal_renderer_context3D_Context3DTilemap.__name__="openfl._internal.renderer.context3D.Context3DTilemap";openfl__$internal_renderer_context3D_Context3DTilemap.buildBuffer=function(tilemap,renderer){if(!tilemap.__renderable||tilemap.__group.__tiles.length==0||tilemap.__worldAlpha<=0){return}openfl__$internal_renderer_context3D_Context3DTilemap.numTiles=0;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData=tilemap.__buffer!=null?tilemap.__buffer.vertexBufferData:null;openfl__$internal_renderer_context3D_Context3DTilemap.vertexDataPosition=0;var rect=openfl_geom_Rectangle.__pool.get();var matrix=openfl_geom_Matrix.__pool.get();var parentTransform=openfl_geom_Matrix.__pool.get();openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex=4;if(tilemap.tileAlphaEnabled){openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex++}if(tilemap.tileColorTransformEnabled){openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex+=8}openfl__$internal_renderer_context3D_Context3DTilemap.buildBufferTileContainer(tilemap,tilemap.__group,renderer,parentTransform,tilemap.__tileset,tilemap.tileAlphaEnabled,tilemap.__worldAlpha,tilemap.tileColorTransformEnabled,tilemap.__worldColorTransform,null,rect,matrix);tilemap.__buffer.flushVertexBufferData();openfl_geom_Rectangle.__pool.release(rect);openfl_geom_Matrix.__pool.release(matrix);openfl_geom_Matrix.__pool.release(parentTransform)};openfl__$internal_renderer_context3D_Context3DTilemap.buildBufferTileContainer=function(tilemap,group,renderer,parentTransform,defaultTileset,alphaEnabled,worldAlpha,colorTransformEnabled,defaultColorTransform,cacheBitmapData,rect,matrix){var tileTransform=openfl_geom_Matrix.__pool.get();var roundPixels=renderer.__roundPixels;var tiles=group.__tiles;openfl__$internal_renderer_context3D_Context3DTilemap.resizeBuffer(tilemap,openfl__$internal_renderer_context3D_Context3DTilemap.numTiles+group.__length);var tileset;var alpha;var visible;var colorTransform=null;var id;var tileData;var tileRect;var bitmapData;var tileWidth;var tileHeight;var uvX;var uvY;var uvHeight;var uvWidth;var vertexOffset;var x;var y;var x2;var y2;var x3;var y3;var x4;var y4;var ctPosition=alphaEnabled?5:4;var _g=0;while(_g<tiles.length){var tile=tiles[_g];++_g;tileTransform.setTo(1,0,0,1,-tile.get_originX(),-tile.get_originY());tileTransform.concat(tile.get_matrix());tileTransform.concat(parentTransform);if(roundPixels){tileTransform.tx=Math.round(tileTransform.tx);tileTransform.ty=Math.round(tileTransform.ty)}tileset=tile.get_tileset()!=null?tile.get_tileset():defaultTileset;alpha=tile.get_alpha()*worldAlpha;visible=tile.get_visible();tile.__dirty=false;if(!visible||alpha<=0){continue}if(colorTransformEnabled){if(tile.get_colorTransform()!=null){if(defaultColorTransform==null){colorTransform=tile.get_colorTransform()}else{if(openfl__$internal_renderer_context3D_Context3DTilemap.cacheColorTransform==null){openfl__$internal_renderer_context3D_Context3DTilemap.cacheColorTransform=new openfl_geom_ColorTransform}colorTransform=openfl__$internal_renderer_context3D_Context3DTilemap.cacheColorTransform;colorTransform.redMultiplier=defaultColorTransform.redMultiplier*tile.get_colorTransform().redMultiplier;colorTransform.greenMultiplier=defaultColorTransform.greenMultiplier*tile.get_colorTransform().greenMultiplier;colorTransform.blueMultiplier=defaultColorTransform.blueMultiplier*tile.get_colorTransform().blueMultiplier;colorTransform.alphaMultiplier=defaultColorTransform.alphaMultiplier*tile.get_colorTransform().alphaMultiplier;colorTransform.redOffset=defaultColorTransform.redOffset+tile.get_colorTransform().redOffset;colorTransform.greenOffset=defaultColorTransform.greenOffset+tile.get_colorTransform().greenOffset;colorTransform.blueOffset=defaultColorTransform.blueOffset+tile.get_colorTransform().blueOffset;colorTransform.alphaOffset=defaultColorTransform.alphaOffset+tile.get_colorTransform().alphaOffset}}else{colorTransform=defaultColorTransform}}if(!alphaEnabled){alpha=1}if(tile.__length>0){openfl__$internal_renderer_context3D_Context3DTilemap.buildBufferTileContainer(tilemap,tile,renderer,tileTransform,tileset,alphaEnabled,alpha,colorTransformEnabled,colorTransform,cacheBitmapData,rect,matrix)}else{if(tileset==null){continue}id=tile.get_id();bitmapData=tileset.__bitmapData;if(bitmapData==null){continue}if(id==-1){tileRect=tile.__rect;if(tileRect==null||tileRect.width<=0||tileRect.height<=0){continue}uvX=tileRect.x/bitmapData.width;uvY=tileRect.y/bitmapData.height;uvWidth=tileRect.get_right()/bitmapData.width;uvHeight=tileRect.get_bottom()/bitmapData.height}else{tileData=tileset.__data[id];if(tileData==null){continue}rect.setTo(tileData.x,tileData.y,tileData.width,tileData.height);tileRect=rect;uvX=tileData.__uvX;uvY=tileData.__uvY;uvWidth=tileData.__uvWidth;uvHeight=tileData.__uvHeight}tileWidth=tileRect.width;tileHeight=tileRect.height;x=0*tileTransform.a+0*tileTransform.c+tileTransform.tx;y=0*tileTransform.b+0*tileTransform.d+tileTransform.ty;x2=tileWidth*tileTransform.a+0*tileTransform.c+tileTransform.tx;y2=tileWidth*tileTransform.b+0*tileTransform.d+tileTransform.ty;x3=0*tileTransform.a+tileHeight*tileTransform.c+tileTransform.tx;y3=0*tileTransform.b+tileHeight*tileTransform.d+tileTransform.ty;x4=tileWidth*tileTransform.a+tileHeight*tileTransform.c+tileTransform.tx;y4=tileWidth*tileTransform.b+tileHeight*tileTransform.d+tileTransform.ty;vertexOffset=openfl__$internal_renderer_context3D_Context3DTilemap.vertexDataPosition;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset]=x;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+1]=y;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+2]=uvX;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+3]=uvY;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex]=x2;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex+1]=y2;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex+2]=uvWidth;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex+3]=uvY;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*2]=x3;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*2+1]=y3;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*2+2]=uvX;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*2+3]=uvHeight;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*3]=x4;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*3+1]=y4;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*3+2]=uvWidth;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*3+3]=uvHeight;if(alphaEnabled){openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*0+4]=alpha;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex+4]=alpha;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*2+4]=alpha;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*3+4]=alpha}if(colorTransformEnabled){if(colorTransform!=null){var _g1=0;while(_g1<4){var i=_g1++;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition]=colorTransform.redMultiplier;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+1]=colorTransform.greenMultiplier;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+2]=colorTransform.blueMultiplier;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+3]=colorTransform.alphaMultiplier;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+4]=colorTransform.redOffset;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+5]=colorTransform.greenOffset;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+6]=colorTransform.blueOffset;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i+ctPosition+7]=colorTransform.alphaOffset}}else{var _g2=0;while(_g2<4){var i1=_g2++;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition]=1;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+1]=1;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+2]=1;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+3]=1;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+4]=0;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+5]=0;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+6]=0;openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData[vertexOffset+openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*i1+ctPosition+7]=0}}}openfl__$internal_renderer_context3D_Context3DTilemap.vertexDataPosition+=openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*4}}group.__dirty=false;openfl_geom_Matrix.__pool.release(tileTransform)};openfl__$internal_renderer_context3D_Context3DTilemap.flush=function(tilemap,renderer,blendMode){if(openfl__$internal_renderer_context3D_Context3DTilemap.currentShader==null){openfl__$internal_renderer_context3D_Context3DTilemap.currentShader=renderer.__defaultDisplayShader}if(openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition>openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition&&openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData!=null&&openfl__$internal_renderer_context3D_Context3DTilemap.currentShader!=null){var shader=renderer.__initDisplayShader(openfl__$internal_renderer_context3D_Context3DTilemap.currentShader);renderer.setShader(shader);renderer.applyBitmapData(openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData,tilemap.smoothing);renderer.applyMatrix(renderer.__getMatrix(tilemap.__renderTransform,1));if(tilemap.tileAlphaEnabled){renderer.useAlphaArray()}else{renderer.applyAlpha(tilemap.__worldAlpha)}if(tilemap.tileBlendModeEnabled){renderer.__setBlendMode(blendMode)}if(tilemap.tileColorTransformEnabled){renderer.applyHasColorTransform(true);renderer.useColorTransformArray()}else{renderer.applyColorTransform(tilemap.__worldColorTransform)}renderer.updateShader();var vertexBuffer=tilemap.__buffer.vertexBuffer;var vertexBufferPosition=openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition*openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex*4;var length=openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition-openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition;while(openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition<openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition){length=Math.min(openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition-openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition,openfl__$internal_renderer_context3D_Context3DTilemap.context.__quadIndexBufferElements)|0;if(length<=0){break}if(shader.__position!=null){openfl__$internal_renderer_context3D_Context3DTilemap.context.setVertexBufferAt(shader.__position.index,vertexBuffer,vertexBufferPosition,2)}if(shader.__textureCoord!=null){openfl__$internal_renderer_context3D_Context3DTilemap.context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,vertexBufferPosition+2,2)}if(tilemap.tileAlphaEnabled){if(shader.__alpha!=null){openfl__$internal_renderer_context3D_Context3DTilemap.context.setVertexBufferAt(shader.__alpha.index,vertexBuffer,vertexBufferPosition+4,1)}}if(tilemap.tileColorTransformEnabled){var position=tilemap.tileAlphaEnabled?5:4;if(shader.__colorMultiplier!=null){openfl__$internal_renderer_context3D_Context3DTilemap.context.setVertexBufferAt(shader.__colorMultiplier.index,vertexBuffer,vertexBufferPosition+position,4)}if(shader.__colorOffset!=null){openfl__$internal_renderer_context3D_Context3DTilemap.context.setVertexBufferAt(shader.__colorOffset.index,vertexBuffer,vertexBufferPosition+position+4,4)}}openfl__$internal_renderer_context3D_Context3DTilemap.context.drawTriangles(openfl__$internal_renderer_context3D_Context3DTilemap.context.__quadIndexBuffer,0,length*2);openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition+=length}renderer.__clearShader()}openfl__$internal_renderer_context3D_Context3DTilemap.lastUsedBitmapData=openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData;openfl__$internal_renderer_context3D_Context3DTilemap.lastUsedShader=openfl__$internal_renderer_context3D_Context3DTilemap.currentShader};openfl__$internal_renderer_context3D_Context3DTilemap.render=function(tilemap,renderer){if(!tilemap.__renderable||tilemap.__worldAlpha<=0){return}openfl__$internal_renderer_context3D_Context3DTilemap.context=renderer.context3D;openfl__$internal_renderer_context3D_Context3DTilemap.buildBuffer(tilemap,renderer);if(openfl__$internal_renderer_context3D_Context3DTilemap.numTiles==0){return}openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition=0;openfl__$internal_renderer_context3D_Context3DTilemap.lastFlushedPosition=0;openfl__$internal_renderer_context3D_Context3DTilemap.lastUsedBitmapData=null;openfl__$internal_renderer_context3D_Context3DTilemap.lastUsedShader=null;openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData=null;openfl__$internal_renderer_context3D_Context3DTilemap.currentShader=null;openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode=tilemap.__worldBlendMode;if(!tilemap.tileBlendModeEnabled){renderer.__setBlendMode(openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode)}renderer.__pushMaskObject(tilemap);var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,tilemap.__width,tilemap.__height);renderer.__pushMaskRect(rect,tilemap.__renderTransform);openfl__$internal_renderer_context3D_Context3DTilemap.renderTileContainer(tilemap,renderer,tilemap.__group,tilemap.__worldShader,tilemap.__tileset,tilemap.__worldAlpha,tilemap.tileBlendModeEnabled,openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode,null);openfl__$internal_renderer_context3D_Context3DTilemap.flush(tilemap,renderer,openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode);renderer.__popMaskRect();renderer.__popMaskObject(tilemap);openfl_geom_Rectangle.__pool.release(rect)};openfl__$internal_renderer_context3D_Context3DTilemap.renderTileContainer=function(tilemap,renderer,group,defaultShader,defaultTileset,worldAlpha,blendModeEnabled,defaultBlendMode,cacheBitmapData){var tiles=group.__tiles;var tileset;var alpha;var visible;var blendMode=null;var id;var tileData;var tileRect;var shader;var bitmapData;var _g=0;while(_g<tiles.length){var tile=tiles[_g];++_g;tileset=tile.get_tileset()!=null?tile.get_tileset():defaultTileset;alpha=tile.get_alpha()*worldAlpha;visible=tile.get_visible();if(!visible||alpha<=0){continue}shader=tile.get_shader()!=null?tile.get_shader():defaultShader;if(blendModeEnabled){blendMode=tile.__blendMode!=null?tile.__blendMode:defaultBlendMode}if(tile.__length>0){openfl__$internal_renderer_context3D_Context3DTilemap.renderTileContainer(tilemap,renderer,tile,shader,tileset,alpha,blendModeEnabled,blendMode,cacheBitmapData)}else{if(tileset==null){continue}id=tile.get_id();bitmapData=tileset.__bitmapData;if(bitmapData==null){continue}if(id==-1){tileRect=tile.__rect;if(tileRect==null||tileRect.width<=0||tileRect.height<=0){continue}}else{tileData=tileset.__data[id];if(tileData==null){continue}}if(shader!=openfl__$internal_renderer_context3D_Context3DTilemap.currentShader||bitmapData!=openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData&&openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData!=null||openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode!=blendMode){openfl__$internal_renderer_context3D_Context3DTilemap.flush(tilemap,renderer,openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode)}openfl__$internal_renderer_context3D_Context3DTilemap.currentBitmapData=bitmapData;openfl__$internal_renderer_context3D_Context3DTilemap.currentShader=shader;openfl__$internal_renderer_context3D_Context3DTilemap.currentBlendMode=blendMode;openfl__$internal_renderer_context3D_Context3DTilemap.bufferPosition++}}};openfl__$internal_renderer_context3D_Context3DTilemap.resizeBuffer=function(tilemap,count){openfl__$internal_renderer_context3D_Context3DTilemap.numTiles=count;if(tilemap.__buffer==null){tilemap.__buffer=new openfl__$internal_renderer_context3D_Context3DBuffer(openfl__$internal_renderer_context3D_Context3DTilemap.context,openfl__$internal_renderer_context3D_Context3DElementType.QUADS,openfl__$internal_renderer_context3D_Context3DTilemap.numTiles,openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex)}else{tilemap.__buffer.resize(openfl__$internal_renderer_context3D_Context3DTilemap.numTiles,openfl__$internal_renderer_context3D_Context3DTilemap.dataPerVertex)}openfl__$internal_renderer_context3D_Context3DTilemap.vertexBufferData=tilemap.__buffer.vertexBufferData};var openfl__$internal_renderer_context3D_Context3DVideo=function(){};$hxClasses["openfl._internal.renderer.context3D.Context3DVideo"]=openfl__$internal_renderer_context3D_Context3DVideo;openfl__$internal_renderer_context3D_Context3DVideo.__name__="openfl._internal.renderer.context3D.Context3DVideo";openfl__$internal_renderer_context3D_Context3DVideo.render=function(video,renderer){if(!video.__renderable||video.__worldAlpha<=0||video.__stream==null){return}if(video.__stream.__video!=null){var context=renderer.context3D;var gl=context.gl;if(video.__getTexture(context)==null){return}renderer.__setBlendMode(video.__worldBlendMode);renderer.__pushMaskObject(video);var shader=renderer.__initDisplayShader(video.__worldShader);renderer.setShader(shader);renderer.applyBitmapData(null,true,false);renderer.applyMatrix(renderer.__getMatrix(video.__renderTransform,1));renderer.applyAlpha(video.__worldAlpha);renderer.applyColorTransform(video.__worldColorTransform);if(shader.__textureSize!=null){openfl__$internal_renderer_context3D_Context3DVideo.__textureSizeValue[0]=video.__stream!=null?video.__stream.__video.videoWidth:0;openfl__$internal_renderer_context3D_Context3DVideo.__textureSizeValue[1]=video.__stream!=null?video.__stream.__video.videoHeight:0;shader.__textureSize.value=openfl__$internal_renderer_context3D_Context3DVideo.__textureSizeValue}renderer.updateShader();context.setTextureAt(0,video.__getTexture(context));context.__flushGLTextures();gl.uniform1i(shader.__texture.index,0);if(video.smoothing){gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR)}else{gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST)}var vertexBuffer=video.__getVertexBuffer(context);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(video.__getIndexBuffer(context));renderer.__clearShader();renderer.__popMaskObject(video)}};openfl__$internal_renderer_context3D_Context3DVideo.renderMask=function(video,renderer){if(video.__stream==null){return}if(video.__stream.__video!=null){var context=renderer.context3D;var shader=renderer.__maskShader;renderer.setShader(shader);renderer.applyBitmapData(openfl__$internal_renderer_context3D_Context3DMaskShader.opaqueBitmapData,true);renderer.applyMatrix(renderer.__getMatrix(video.__renderTransform,1));renderer.updateShader();var vertexBuffer=video.__getVertexBuffer(context);if(shader.__position!=null){context.setVertexBufferAt(shader.__position.index,vertexBuffer,0,3)}if(shader.__textureCoord!=null){context.setVertexBufferAt(shader.__textureCoord.index,vertexBuffer,3,2)}context.drawTriangles(video.__getIndexBuffer(context));renderer.__clearShader()}};var openfl__$internal_renderer_dom_DOMBitmap=function(){};$hxClasses["openfl._internal.renderer.dom.DOMBitmap"]=openfl__$internal_renderer_dom_DOMBitmap;openfl__$internal_renderer_dom_DOMBitmap.__name__="openfl._internal.renderer.dom.DOMBitmap";openfl__$internal_renderer_dom_DOMBitmap.clear=function(bitmap,renderer){if(bitmap.__image!=null){renderer.element.removeChild(bitmap.__image);bitmap.__image=null;bitmap.__style=null}if(bitmap.__canvas!=null){renderer.element.removeChild(bitmap.__canvas);bitmap.__canvas=null;bitmap.__style=null}};openfl__$internal_renderer_dom_DOMBitmap.renderCanvas=function(bitmap,renderer){if(bitmap.__image!=null){renderer.element.removeChild(bitmap.__image);bitmap.__image=null}if(bitmap.__canvas==null){bitmap.__canvas=window.document.createElement("canvas");bitmap.__context=bitmap.__canvas.getContext("2d");bitmap.__imageVersion=-1;if(!renderer.__allowSmoothing||!bitmap.smoothing){bitmap.__context.imageSmoothingEnabled=false}renderer.__initializeElement(bitmap,bitmap.__canvas)}if(bitmap.__imageVersion!=bitmap.__bitmapData.image.version){lime__$internal_graphics_ImageCanvasUtil.convertToCanvas(bitmap.__bitmapData.image);bitmap.__canvas.width=bitmap.__bitmapData.width+1;bitmap.__canvas.width=bitmap.__bitmapData.width;bitmap.__canvas.height=bitmap.__bitmapData.height;bitmap.__context.drawImage(bitmap.__bitmapData.image.buffer.__srcCanvas,0,0);bitmap.__imageVersion=bitmap.__bitmapData.image.version}renderer.__updateClip(bitmap);renderer.__applyStyle(bitmap,true,true,true)};openfl__$internal_renderer_dom_DOMBitmap.renderImage=function(bitmap,renderer){if(bitmap.__canvas!=null){renderer.element.removeChild(bitmap.__canvas);bitmap.__canvas=null}if(bitmap.__image==null){bitmap.__image=window.document.createElement("img");bitmap.__image.crossOrigin="Anonymous";bitmap.__image.src=bitmap.__bitmapData.image.buffer.__srcImage.src;renderer.__initializeElement(bitmap,bitmap.__image)}renderer.__updateClip(bitmap);renderer.__applyStyle(bitmap,true,true,true)};var openfl__$internal_renderer_dom_DOMDisplayObject=function(){};$hxClasses["openfl._internal.renderer.dom.DOMDisplayObject"]=openfl__$internal_renderer_dom_DOMDisplayObject;openfl__$internal_renderer_dom_DOMDisplayObject.__name__="openfl._internal.renderer.dom.DOMDisplayObject";openfl__$internal_renderer_dom_DOMDisplayObject.clear=function(displayObject,renderer){if(displayObject.__cacheBitmap!=null){openfl__$internal_renderer_dom_DOMBitmap.clear(displayObject.__cacheBitmap,renderer)}openfl__$internal_renderer_dom_DOMShape.clear(displayObject,renderer)};var openfl_display_DOMRenderer=function(element){this.pixelRatio=1;openfl_display_DisplayObjectRenderer.call(this);this.element=element};$hxClasses["openfl.display.DOMRenderer"]=openfl_display_DOMRenderer;openfl_display_DOMRenderer.__name__="openfl.display.DOMRenderer";openfl_display_DOMRenderer.__super__=openfl_display_DisplayObjectRenderer;openfl_display_DOMRenderer.prototype=$extend(openfl_display_DisplayObjectRenderer.prototype,{element:null,pixelRatio:null,__clearBitmap:function(bitmap){},__class__:openfl_display_DOMRenderer});var openfl__$internal_renderer_dom_DOMRenderer=function(element){openfl_display_DOMRenderer.call(this,element);openfl_display_DisplayObject.__supportDOM=true;var prefix=function(){var styles=window.getComputedStyle(document.documentElement,""),pre=(Array.prototype.slice.call(styles).join("").match(/-(moz|webkit|ms)-/)||styles.OLink===""&&["","o"])[1],dom="WebKit|Moz|MS|O".match(new RegExp("("+pre+")","i"))[1];return{dom:dom,lowercase:pre,css:"-"+pre+"-",js:pre[0].toUpperCase()+pre.substr(1)}}();this.__vendorPrefix=prefix.lowercase;this.__transformProperty=prefix.lowercase=="webkit"?"-webkit-transform":"transform";this.__transformOriginProperty=prefix.lowercase=="webkit"?"-webkit-transform-origin":"transform-origin";this.__clipRects=[];this.__colorTransform=new openfl_geom_ColorTransform;this.__numClipRects=0;this.__z=0;this.__type="dom";this.__canvasRenderer=new openfl__$internal_renderer_canvas_CanvasRenderer(null);this.__canvasRenderer.__domRenderer=this};$hxClasses["openfl._internal.renderer.dom.DOMRenderer"]=openfl__$internal_renderer_dom_DOMRenderer;openfl__$internal_renderer_dom_DOMRenderer.__name__="openfl._internal.renderer.dom.DOMRenderer";openfl__$internal_renderer_dom_DOMRenderer.__super__=openfl_display_DOMRenderer;openfl__$internal_renderer_dom_DOMRenderer.prototype=$extend(openfl_display_DOMRenderer.prototype,{__canvasRenderer:null,__clipRects:null,__colorTransform:null,__currentClipRect:null,__numClipRects:null,__transformOriginProperty:null,__transformProperty:null,__vendorPrefix:null,__z:null,__applyStyle:function(displayObject,setTransform,setAlpha,setClip){var style=displayObject.__style;if(setTransform&&displayObject.__renderTransformChanged){var _this=displayObject.__renderTransform;var roundPixels=this.__roundPixels;if(roundPixels==null){roundPixels=false}style.setProperty(this.__transformProperty,roundPixels?"matrix3d("+_this.a+", "+_this.b+", 0, 0, "+_this.c+", "+_this.d+", 0, 0, 0, 0, 1, 0, "+(_this.tx|0)+", "+(_this.ty|0)+", 0, 1)":"matrix3d("+_this.a+", "+_this.b+", 0, 0, "+_this.c+", "+_this.d+", 0, 0, 0, 0, 1, 0, "+_this.tx+", "+_this.ty+", 0, 1)",null)}if(displayObject.__worldZ!=++this.__z){displayObject.__worldZ=this.__z;style.setProperty("z-index",displayObject.__worldZ==null?"null":""+displayObject.__worldZ,null)}if(setAlpha&&displayObject.__worldAlphaChanged){if(displayObject.__worldAlpha<1){style.setProperty("opacity",displayObject.__worldAlpha==null?"null":""+displayObject.__worldAlpha,null)}else{style.removeProperty("opacity")}}if(setClip&&displayObject.__worldClipChanged){if(displayObject.__worldClip==null){style.removeProperty("clip")}else{var clip=displayObject.__worldClip;style.setProperty("clip","rect("+clip.y+"px, "+clip.get_right()+"px, "+clip.get_bottom()+"px, "+clip.x+"px)",null)}}},__clearBitmap:function(bitmap){openfl__$internal_renderer_dom_DOMDisplayObject.clear(bitmap,this);openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)},__clearDisplayObject:function(object){if(object!=null&&object.__type!=null){switch(object.__type._hx_index){case 0:this.__clearBitmap(object);break;case 2:this.__clearDisplayObjectContainer(object);break;case 3:this.__clearDOMElement(object);break;case 1:case 4:this.__clearShape(object);break;case 5:this.__clearSimpleButton(object);break;case 6:this.__clearTextField(object);break;case 7:this.__clearTilemap(object);break;case 8:this.__clearVideo(object);break}}},__clearDisplayObjectContainer:function(container){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){this.__clearDisplayObject(orphan1)}}var orphan2=container.__removedChildren.iterator();while(orphan2.hasNext()){var orphan3=orphan2.next();if(orphan3.stage==null){orphan3.__cleanup()}}container.__removedChildren.set_length(0);this.__clearShape(container);var _g=0;var _g1=container.__children;while(_g<_g1.length)this.__clearDisplayObject(_g1[_g++])},__clearDOMElement:function(domElement){openfl__$internal_renderer_dom_DOMDisplayObject.clear(domElement,this)},__clearShape:function(shape){openfl__$internal_renderer_dom_DOMDisplayObject.clear(shape,this)},__clearSimpleButton:function(button){var previousState=button.__previousStates.iterator();while(previousState.hasNext())this.__clearDisplayObject(previousState.next());if(button.__currentState!=null){this.__clearDisplayObject(button.__currentState)}},__clearTextField:function(textField){openfl__$internal_renderer_dom_DOMDisplayObject.clear(textField,this);openfl__$internal_renderer_dom_DOMTextField.clear(textField,this)},__clearTilemap:function(tilemap){openfl__$internal_renderer_dom_DOMDisplayObject.clear(tilemap,this);openfl__$internal_renderer_dom_DOMTilemap.clear(tilemap,this)},__clearVideo:function(video){openfl__$internal_renderer_dom_DOMDisplayObject.clear(video,this);openfl__$internal_renderer_dom_DOMVideo.clear(video,this)},__initializeElement:function(displayObject,element){var style=displayObject.__style=element.style;style.setProperty("position","absolute",null);style.setProperty("top","0",null);style.setProperty("left","0",null);style.setProperty(this.__transformOriginProperty,"0 0 0",null);this.element.appendChild(element);displayObject.__worldAlphaChanged=true;displayObject.__renderTransformChanged=true;displayObject.__worldVisibleChanged=true;displayObject.__worldClipChanged=true;displayObject.__worldClip=null;displayObject.__worldZ=-1},__popMask:function(){this.__popMaskRect()},__popMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(object.__mask!=null){this.__popMask()}if(handleScrollRect&&object.__scrollRect!=null){this.__popMaskRect()}},__popMaskRect:function(){if(this.__numClipRects>0){this.__numClipRects--;if(this.__numClipRects>0){this.__currentClipRect=this.__clipRects[this.__numClipRects-1]}else{this.__currentClipRect=null}}},__pushMask:function(mask){this.__pushMaskRect(mask.getBounds(mask),mask.__renderTransform)},__pushMaskObject:function(object,handleScrollRect){if(handleScrollRect==null){handleScrollRect=true}if(handleScrollRect&&object.__scrollRect!=null){this.__pushMaskRect(object.__scrollRect,object.__renderTransform)}if(object.__mask!=null){this.__pushMask(object.__mask)}},__pushMaskRect:function(rect,transform){if(this.__numClipRects==this.__clipRects.length){this.__clipRects[this.__numClipRects]=new openfl_geom_Rectangle}var clipRect=this.__clipRects[this.__numClipRects];rect.__transform(clipRect,transform);if(this.__numClipRects>0){var parentClipRect=this.__clipRects[this.__numClipRects-1];clipRect.__contract(parentClipRect.x,parentClipRect.y,parentClipRect.width,parentClipRect.height)}if(clipRect.height<0){clipRect.height=0}if(clipRect.width<0){clipRect.width=0}this.__currentClipRect=clipRect;this.__numClipRects++},__render:function(object){if(!this.__stage.__transparent){this.element.style.background=this.__stage.__colorString}else{this.element.style.background="none"}this.__z=1;if(object!=null&&object.__type!=null){this.__renderDisplayObject(object)}},__renderBitmap:function(bitmap){this.__canvasRenderer.__updateCacheBitmap(bitmap,false);if(bitmap.__cacheBitmap!=null&&!bitmap.__isCacheBitmapRender){this.__clearBitmap(bitmap);bitmap.__cacheBitmap.stage=bitmap.stage;var bitmap1=bitmap.__cacheBitmap;if(bitmap1.stage!=null&&bitmap1.__worldVisible&&bitmap1.__renderable&&bitmap1.__bitmapData!=null&&bitmap1.__bitmapData.__isValid&&bitmap1.__bitmapData.readable){this.__pushMaskObject(bitmap1);if(bitmap1.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap1,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap1,this)}this.__popMaskObject(bitmap1)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap1,this)}}else{bitmap.opaqueBackground!=null&&!bitmap.__isCacheBitmapRender&&bitmap.get_width()>0&&bitmap.get_height()>0;var graphics=bitmap.__graphics;if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this.__canvasRenderer);if(graphics.__softwareDirty||bitmap.__worldAlphaChanged||bitmap.__canvas!=graphics.__canvas){if(graphics.__canvas!=null){if(bitmap.__canvas!=graphics.__canvas){if(bitmap.__canvas!=null){this.element.removeChild(bitmap.__canvas)}bitmap.__canvas=graphics.__canvas;bitmap.__context=graphics.__context;this.__initializeElement(bitmap,bitmap.__canvas)}}else{openfl__$internal_renderer_dom_DOMShape.clear(bitmap,this)}}if(bitmap.__canvas!=null){this.__pushMaskObject(bitmap);var cacheTransform=bitmap.__renderTransform;bitmap.__renderTransform=graphics.__worldTransform;if(graphics.__transformDirty){graphics.__transformDirty=false;bitmap.__renderTransformChanged=true}this.__updateClip(bitmap);this.__applyStyle(bitmap,true,true,true);bitmap.__renderTransform=cacheTransform;this.__popMaskObject(bitmap)}}else{openfl__$internal_renderer_dom_DOMShape.clear(bitmap,this)}if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){this.__pushMaskObject(bitmap);if(bitmap.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap,this)}this.__popMaskObject(bitmap)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)}}},__renderDisplayObject:function(object){if(object!=null&&object.__type!=null){switch(object.__type._hx_index){case 0:this.__renderBitmap(object);break;case 2:this.__renderDisplayObjectContainer(object);break;case 3:this.__renderDOMElement(object);break;case 1:case 4:this.__renderShape(object);break;case 5:this.__renderSimpleButton(object);break;case 6:this.__renderTextField(object);break;case 7:this.__renderTilemap(object);break;case 8:this.__renderVideo(object);break}if(object.__customRenderEvent!=null){var event=object.__customRenderEvent;event.allowSmoothing=this.__allowSmoothing;event.objectMatrix.copyFrom(object.__renderTransform);event.objectColorTransform.__copyFrom(object.__worldColorTransform);event.renderer=this;if(object.stage!=null&&object.__worldVisible){event.type="renderDOM"}else{event.type="clearDOM"}this.__setBlendMode(object.__worldBlendMode);this.__pushMaskObject(object);object.dispatchEvent(event);this.__popMaskObject(object)}}},__renderDisplayObjectContainer:function(container){var orphan=container.__removedChildren.iterator();while(orphan.hasNext()){var orphan1=orphan.next();if(orphan1.stage==null){this.__clearDisplayObject(orphan1)}}var orphan2=container.__removedChildren.iterator();while(orphan2.hasNext()){var orphan3=orphan2.next();if(orphan3.stage==null){orphan3.__cleanup()}}container.__removedChildren.set_length(0);this.__canvasRenderer.__updateCacheBitmap(container,false);if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){this.__clearDisplayObjectContainer(container);container.__cacheBitmap.stage=container.stage;var bitmap=container.__cacheBitmap;if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){this.__pushMaskObject(bitmap);if(bitmap.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap,this)}this.__popMaskObject(bitmap)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)}}else{container.opaqueBackground!=null&&!container.__isCacheBitmapRender&&container.get_width()>0&&container.get_height()>0;var graphics=container.__graphics;if(container.stage!=null&&container.__worldVisible&&container.__renderable&&graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this.__canvasRenderer);if(graphics.__softwareDirty||container.__worldAlphaChanged||container.__canvas!=graphics.__canvas){if(graphics.__canvas!=null){if(container.__canvas!=graphics.__canvas){if(container.__canvas!=null){this.element.removeChild(container.__canvas)}container.__canvas=graphics.__canvas;container.__context=graphics.__context;this.__initializeElement(container,container.__canvas)}}else{openfl__$internal_renderer_dom_DOMShape.clear(container,this)}}if(container.__canvas!=null){this.__pushMaskObject(container);var cacheTransform=container.__renderTransform;container.__renderTransform=graphics.__worldTransform;if(graphics.__transformDirty){graphics.__transformDirty=false;container.__renderTransformChanged=true}this.__updateClip(container);this.__applyStyle(container,true,true,true);container.__renderTransform=cacheTransform;this.__popMaskObject(container)}}else{openfl__$internal_renderer_dom_DOMShape.clear(container,this)}if(container.__cacheBitmap!=null&&!container.__isCacheBitmapRender){return}this.__pushMaskObject(container);if(this.__stage!=null){var _g=0;var _g1=container.__children;while(_g<_g1.length){var child=_g1[_g];++_g;this.__renderDisplayObject(child);child.__renderDirty=false}container.__renderDirty=false}else{var _g2=0;var _g11=container.__children;while(_g2<_g11.length)this.__renderDisplayObject(_g11[_g2++])}this.__popMaskObject(container)}},__renderDOMElement:function(domElement){if(domElement.stage!=null&&domElement.__worldVisible&&domElement.__renderable){if(!domElement.__active){this.__initializeElement(domElement,domElement.__element);domElement.__active=true}this.__updateClip(domElement);this.__applyStyle(domElement,true,true,true)}else if(domElement.__active){this.element.removeChild(domElement.__element);domElement.__active=false}domElement.opaqueBackground!=null&&!domElement.__isCacheBitmapRender&&domElement.get_width()>0&&domElement.get_height()>0;var graphics=domElement.__graphics;if(domElement.stage!=null&&domElement.__worldVisible&&domElement.__renderable&&graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this.__canvasRenderer);if(graphics.__softwareDirty||domElement.__worldAlphaChanged||domElement.__canvas!=graphics.__canvas){if(graphics.__canvas!=null){if(domElement.__canvas!=graphics.__canvas){if(domElement.__canvas!=null){this.element.removeChild(domElement.__canvas)}domElement.__canvas=graphics.__canvas;domElement.__context=graphics.__context;this.__initializeElement(domElement,domElement.__canvas)}}else{openfl__$internal_renderer_dom_DOMShape.clear(domElement,this)}}if(domElement.__canvas!=null){this.__pushMaskObject(domElement);var cacheTransform=domElement.__renderTransform;domElement.__renderTransform=graphics.__worldTransform;if(graphics.__transformDirty){graphics.__transformDirty=false;domElement.__renderTransformChanged=true}this.__updateClip(domElement);this.__applyStyle(domElement,true,true,true);domElement.__renderTransform=cacheTransform;this.__popMaskObject(domElement)}}else{openfl__$internal_renderer_dom_DOMShape.clear(domElement,this)}},__renderShape:function(shape){this.__canvasRenderer.__updateCacheBitmap(shape,false);if(shape.__cacheBitmap!=null&&!shape.__isCacheBitmapRender){this.__clearShape(shape);shape.__cacheBitmap.stage=shape.stage;var bitmap=shape.__cacheBitmap;if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){this.__pushMaskObject(bitmap);if(bitmap.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap,this)}this.__popMaskObject(bitmap)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)}}else{shape.opaqueBackground!=null&&!shape.__isCacheBitmapRender&&shape.get_width()>0&&shape.get_height()>0;var graphics=shape.__graphics;if(shape.stage!=null&&shape.__worldVisible&&shape.__renderable&&graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this.__canvasRenderer);if(graphics.__softwareDirty||shape.__worldAlphaChanged||shape.__canvas!=graphics.__canvas){if(graphics.__canvas!=null){if(shape.__canvas!=graphics.__canvas){if(shape.__canvas!=null){this.element.removeChild(shape.__canvas)}shape.__canvas=graphics.__canvas;shape.__context=graphics.__context;this.__initializeElement(shape,shape.__canvas)}}else{openfl__$internal_renderer_dom_DOMShape.clear(shape,this)}}if(shape.__canvas!=null){this.__pushMaskObject(shape);var cacheTransform=shape.__renderTransform;shape.__renderTransform=graphics.__worldTransform;if(graphics.__transformDirty){graphics.__transformDirty=false;shape.__renderTransformChanged=true}this.__updateClip(shape);this.__applyStyle(shape,true,true,true);shape.__renderTransform=cacheTransform;this.__popMaskObject(shape)}}else{openfl__$internal_renderer_dom_DOMShape.clear(shape,this)}}},__renderSimpleButton:function(button){this.__pushMaskObject(button);var previousState=button.__previousStates.iterator();while(previousState.hasNext())this.__clearDisplayObject(previousState.next());button.__previousStates.set_length(0);if(button.__currentState!=null){if(button.__currentState.stage!=button.stage){button.__currentState.__setStageReference(button.stage)}this.__renderDisplayObject(button.__currentState)}this.__popMaskObject(button)},__renderTextField:function(textField){textField.__domRender=true;this.__canvasRenderer.__updateCacheBitmap(textField,textField.__forceCachedBitmapUpdate);textField.__forceCachedBitmapUpdate=false;textField.__domRender=false;if(textField.__cacheBitmap!=null&&!textField.__isCacheBitmapRender){this.__clearTextField(textField);textField.__cacheBitmap.stage=textField.stage;var bitmap=textField.__cacheBitmap;if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){this.__pushMaskObject(bitmap);if(bitmap.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap,this)}this.__popMaskObject(bitmap)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)}}else{if(textField.__renderedOnCanvasWhileOnDOM){textField.__renderedOnCanvasWhileOnDOM=false;if(textField.__isHTML&&textField.__rawHtmlText!=null){textField.__updateText(textField.__rawHtmlText);textField.__dirty=true;textField.__layoutDirty=true;if(!textField.__renderDirty){textField.__renderDirty=true;textField.__setParentRenderDirty()}}}var textField1=textField;var textEngine=textField1.__textEngine;if(textField1.stage!=null&&textField1.__worldVisible&&textField1.__renderable){if(textField1.__dirty||textField1.__renderTransformChanged||textField1.__div==null){if(textEngine.text!=""||textEngine.background||textEngine.border||textEngine.type==1){if(textField1.__div==null){textField1.__div=window.document.createElement("div");this.__initializeElement(textField1,textField1.__div);textField1.__style.setProperty("outline","none",null);textField1.__div.addEventListener("input",function(event){event.preventDefault();if(textField1.get_htmlText()!=textField1.__div.innerHTML){textField1.set_htmlText(textField1.__div.innerHTML);textField1.__dirty=false}},true)}if(!textEngine.wordWrap){textField1.__style.setProperty("white-space","nowrap",null)}else{textField1.__style.setProperty("word-wrap","break-word",null)}textField1.__style.setProperty("overflow","hidden",null);if(textEngine.selectable){textField1.__style.setProperty("cursor","text",null);textField1.__style.setProperty("-webkit-user-select","text",null);textField1.__style.setProperty("-moz-user-select","text",null);textField1.__style.setProperty("-ms-user-select","text",null);textField1.__style.setProperty("-o-user-select","text",null)}else{textField1.__style.setProperty("cursor","inherit",null)}textField1.__div.contentEditable=textEngine.type==1;var style=textField1.__style;if(textEngine.background){style.setProperty("background-color","#"+StringTools.hex(textEngine.backgroundColor&16777215,6),null)}else{style.removeProperty("background-color")}var w=textEngine.width;var h=textEngine.height;var scale=1;var unscaledSize=textField1.__textFormat.size;var scaledSize=unscaledSize;var t=textField1.__renderTransform;if(t.a!=1||t.d!=1){if(t.a==t.d){scale=t.a;t.a=t.d=1}else if(t.a>t.d){scale=t.a;t.d/=t.a;t.a=1}else{scale=t.d;t.a/=t.d;t.d=1}scaledSize*=scale;w=Math.ceil(w*scale);h=Math.ceil(h*scale)}textField1.__textFormat.size=scaledSize;var text=textEngine.text;var adjustment=0;if(!textField1.__isHTML){text=StringTools.htmlEscape(text)}else{var matchText=text;while(openfl__$internal_renderer_dom_DOMTextField.__regexFont.match(matchText)){var fontText=openfl__$internal_renderer_dom_DOMTextField.__regexFont.matched(0);var style1="";if(openfl__$internal_renderer_dom_DOMTextField.__regexFace.match(fontText)){style1=""+("font-family:'"+openfl__$internal_renderer_dom_DOMTextField.__getAttributeMatch(openfl__$internal_renderer_dom_DOMTextField.__regexFace)+"';")}if(openfl__$internal_renderer_dom_DOMTextField.__regexColor.match(fontText)){style1+="color:#"+openfl__$internal_renderer_dom_DOMTextField.__getAttributeMatch(openfl__$internal_renderer_dom_DOMTextField.__regexColor)+";"}if(openfl__$internal_renderer_dom_DOMTextField.__regexSize.match(fontText)){var sizeAttr=openfl__$internal_renderer_dom_DOMTextField.__getAttributeMatch(openfl__$internal_renderer_dom_DOMTextField.__regexSize);var firstChar=HxOverrides.cca(sizeAttr,0);var size;adjustment=parseFloat(sizeAttr)*scale;if(firstChar==43||firstChar==45){size=scaledSize+adjustment}else{size=adjustment}style1+="font-size:"+size+"px;"}text=StringTools.replace(text,fontText,"<span style='"+style1+"'>");matchText=openfl__$internal_renderer_dom_DOMTextField.__regexFont.matchedRight()}text=text.replace(openfl__$internal_renderer_dom_DOMTextField.__regexCloseFont.r,"</span>")}text=StringTools.replace(text,"<p ","<p style='margin-top:0; margin-bottom:0;' ");var unscaledLeading=textField1.__textFormat.leading;textField1.__textFormat.leading+=adjustment|0;var _this_r=new RegExp("\r\n","g".split("u").join(""));var tmp=text.replace(_this_r,"<br>");textField1.__div.innerHTML=tmp;var _this_r1=new RegExp("\n","g".split("u").join(""));var tmp1=textField1.__div.innerHTML.replace(_this_r1,"<br>");textField1.__div.innerHTML=tmp1;var _this_r2=new RegExp("\r","g".split("u").join(""));var tmp2=textField1.__div.innerHTML.replace(_this_r2,"<br>");textField1.__div.innerHTML=tmp2;style.setProperty("font",openfl__$internal_text_TextEngine.getFont(textField1.__textFormat),null);textField1.__textFormat.size=unscaledSize;textField1.__textFormat.leading=unscaledLeading;style.setProperty("top","3px",null);if(textEngine.border){style.setProperty("border","solid 1px #"+StringTools.hex(textEngine.borderColor&16777215,6),null);textField1.__renderTransform.translate(-1,-1);textField1.__renderTransformChanged=true;textField1.__transformDirty=true}else if(style.border!=""){style.removeProperty("border");textField1.__renderTransformChanged=true}style.setProperty("color","#"+StringTools.hex(textField1.__textFormat.color&16777215,6),null);style.setProperty("width",w+"px",null);style.setProperty("height",h+"px",null);switch(textField1.__textFormat.align){case 0:style.setProperty("text-align","center",null);break;case 4:style.setProperty("text-align","right",null);break;default:style.setProperty("text-align","left",null)}textField1.__dirty=false}else if(textField1.__div!=null){this.element.removeChild(textField1.__div);textField1.__div=null}}if(textField1.__div!=null){var old=this.__roundPixels;this.__roundPixels=true;this.__updateClip(textField1);this.__applyStyle(textField1,true,true,true);this.__roundPixels=old}}else{openfl__$internal_renderer_dom_DOMTextField.clear(textField1,this)}}},__renderTilemap:function(tilemap){this.__canvasRenderer.__updateCacheBitmap(tilemap,false);if(tilemap.__cacheBitmap!=null&&!tilemap.__isCacheBitmapRender){this.__clearTilemap(tilemap);tilemap.__cacheBitmap.stage=tilemap.stage;var bitmap=tilemap.__cacheBitmap;if(bitmap.stage!=null&&bitmap.__worldVisible&&bitmap.__renderable&&bitmap.__bitmapData!=null&&bitmap.__bitmapData.__isValid&&bitmap.__bitmapData.readable){this.__pushMaskObject(bitmap);if(bitmap.__bitmapData.image.buffer.__srcImage!=null){openfl__$internal_renderer_dom_DOMBitmap.renderImage(bitmap,this)}else{openfl__$internal_renderer_dom_DOMBitmap.renderCanvas(bitmap,this)}this.__popMaskObject(bitmap)}else{openfl__$internal_renderer_dom_DOMBitmap.clear(bitmap,this)}}else{tilemap.opaqueBackground!=null&&!tilemap.__isCacheBitmapRender&&tilemap.get_width()>0&&tilemap.get_height()>0;var graphics=tilemap.__graphics;if(tilemap.stage!=null&&tilemap.__worldVisible&&tilemap.__renderable&&graphics!=null){openfl__$internal_renderer_canvas_CanvasGraphics.render(graphics,this.__canvasRenderer);if(graphics.__softwareDirty||tilemap.__worldAlphaChanged||tilemap.__canvas!=graphics.__canvas){if(graphics.__canvas!=null){if(tilemap.__canvas!=graphics.__canvas){if(tilemap.__canvas!=null){this.element.removeChild(tilemap.__canvas)}tilemap.__canvas=graphics.__canvas;tilemap.__context=graphics.__context;this.__initializeElement(tilemap,tilemap.__canvas)}}else{openfl__$internal_renderer_dom_DOMShape.clear(tilemap,this)}}if(tilemap.__canvas!=null){this.__pushMaskObject(tilemap);var cacheTransform=tilemap.__renderTransform;tilemap.__renderTransform=graphics.__worldTransform;if(graphics.__transformDirty){graphics.__transformDirty=false;tilemap.__renderTransformChanged=true}this.__updateClip(tilemap);this.__applyStyle(tilemap,true,true,true);tilemap.__renderTransform=cacheTransform;this.__popMaskObject(tilemap)}}else{openfl__$internal_renderer_dom_DOMShape.clear(tilemap,this)}if(tilemap.stage!=null&&tilemap.__worldVisible&&tilemap.__renderable&&tilemap.__group.__tiles.length>0){if(tilemap.__canvas==null){tilemap.__canvas=window.document.createElement("canvas");tilemap.__context=tilemap.__canvas.getContext("2d");this.__initializeElement(tilemap,tilemap.__canvas)}tilemap.__canvas.width=tilemap.__width;tilemap.__canvas.height=tilemap.__height;this.__canvasRenderer.context=tilemap.__context;var renderer=this.__canvasRenderer;if(!(!tilemap.__renderable||tilemap.__group.__tiles.length==0)){var alpha=renderer.__getAlpha(tilemap.__worldAlpha);if(!(alpha<=0)){var context=renderer.context;renderer.__setBlendMode(tilemap.__worldBlendMode);renderer.__pushMaskObject(tilemap);var rect=openfl_geom_Rectangle.__pool.get();rect.setTo(0,0,tilemap.__width,tilemap.__height);renderer.__pushMaskRect(rect,tilemap.__renderTransform);if(!renderer.__allowSmoothing||!tilemap.smoothing){context.imageSmoothingEnabled=false}openfl__$internal_renderer_canvas_CanvasTilemap.renderTileContainer(tilemap.__group,renderer,tilemap.__renderTransform,tilemap.__tileset,renderer.__allowSmoothing&&tilemap.smoothing,tilemap.tileAlphaEnabled,alpha,tilemap.tileBlendModeEnabled,tilemap.__worldBlendMode,null,null,rect);if(!renderer.__allowSmoothing||!tilemap.smoothing){context.imageSmoothingEnabled=true}renderer.__popMaskRect();renderer.__popMaskObject(tilemap);openfl_geom_Rectangle.__pool.release(rect)}}this.__canvasRenderer.context=null;this.__updateClip(tilemap);this.__applyStyle(tilemap,true,false,true)}else{openfl__$internal_renderer_dom_DOMTilemap.clear(tilemap,this)}}},__renderVideo:function(video){openfl__$internal_renderer_dom_DOMVideo.render(video,this)},__setBlendMode:function(value){if(this.__overrideBlendMode!=null){value=this.__overrideBlendMode}if(this.__blendMode==value){return}this.__blendMode=value},__updateClip:function(displayObject){if(this.__currentClipRect==null){displayObject.__worldClipChanged=displayObject.__worldClip!=null;displayObject.__worldClip=null}else{if(displayObject.__worldClip==null){displayObject.__worldClip=new openfl_geom_Rectangle}var clip=openfl_geom_Rectangle.__pool.get();var matrix=openfl_geom_Matrix.__pool.get();matrix.copyFrom(displayObject.__renderTransform);matrix.invert();this.__currentClipRect.__transform(clip,matrix);if(clip.equals(displayObject.__worldClip)){displayObject.__worldClipChanged=false}else{displayObject.__worldClip.copyFrom(clip);displayObject.__worldClipChanged=true}openfl_geom_Rectangle.__pool.release(clip);openfl_geom_Matrix.__pool.release(matrix)}},__class__:openfl__$internal_renderer_dom_DOMRenderer});var openfl__$internal_renderer_dom_DOMShape=function(){};$hxClasses["openfl._internal.renderer.dom.DOMShape"]=openfl__$internal_renderer_dom_DOMShape;openfl__$internal_renderer_dom_DOMShape.__name__="openfl._internal.renderer.dom.DOMShape";openfl__$internal_renderer_dom_DOMShape.clear=function(shape,renderer){if(shape.__canvas!=null){renderer.element.removeChild(shape.__canvas);shape.__canvas=null;shape.__style=null}};var openfl__$internal_renderer_dom_DOMTextField=function(){};$hxClasses["openfl._internal.renderer.dom.DOMTextField"]=openfl__$internal_renderer_dom_DOMTextField;openfl__$internal_renderer_dom_DOMTextField.__name__="openfl._internal.renderer.dom.DOMTextField";openfl__$internal_renderer_dom_DOMTextField.clear=function(textField,renderer){if(textField.__div!=null){renderer.element.removeChild(textField.__div);textField.__div=null;textField.__style=null}};openfl__$internal_renderer_dom_DOMTextField.__getAttributeMatch=function(regex){if(regex.matched(2)!=null){return regex.matched(2)}else{return regex.matched(3)}};var openfl__$internal_renderer_dom_DOMTilemap=function(){};$hxClasses["openfl._internal.renderer.dom.DOMTilemap"]=openfl__$internal_renderer_dom_DOMTilemap;openfl__$internal_renderer_dom_DOMTilemap.__name__="openfl._internal.renderer.dom.DOMTilemap";openfl__$internal_renderer_dom_DOMTilemap.clear=function(tilemap,renderer){if(tilemap.__canvas!=null){renderer.element.removeChild(tilemap.__canvas);tilemap.__canvas=null;tilemap.__style=null}};var openfl__$internal_renderer_dom_DOMVideo=function(){};$hxClasses["openfl._internal.renderer.dom.DOMVideo"]=openfl__$internal_renderer_dom_DOMVideo;openfl__$internal_renderer_dom_DOMVideo.__name__="openfl._internal.renderer.dom.DOMVideo";openfl__$internal_renderer_dom_DOMVideo.clear=function(video,renderer){if(video.__active){renderer.element.removeChild(video.__stream.__video);video.__active=false}};openfl__$internal_renderer_dom_DOMVideo.render=function(video,renderer){if(video.stage!=null&&video.__stream!=null&&video.__worldVisible&&video.__renderable){if(!video.__active){renderer.__initializeElement(video,video.__stream.__video);video.__active=true;video.__dirty=true}if(video.__dirty){video.__stream.__video.width=video.__width|0;video.__stream.__video.height=video.__height|0;video.__dirty=false}renderer.__updateClip(video);renderer.__applyStyle(video,true,true,true)}else{openfl__$internal_renderer_dom_DOMVideo.clear(video,renderer)}};var openfl_display_Bitmap=function(bitmapData,pixelSnapping,smoothing){if(smoothing==null){smoothing=false}openfl_display_DisplayObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.BITMAP;this.__bitmapData=bitmapData;this.pixelSnapping=pixelSnapping;this.smoothing=smoothing;if(pixelSnapping==null){this.pixelSnapping=1}};$hxClasses["openfl.display.Bitmap"]=openfl_display_Bitmap;openfl_display_Bitmap.__name__="openfl.display.Bitmap";openfl_display_Bitmap.__super__=openfl_display_DisplayObject;openfl_display_Bitmap.prototype=$extend(openfl_display_DisplayObject.prototype,{pixelSnapping:null,smoothing:null,__image:null,__bitmapData:null,__imageVersion:null,__enterFrame:function(deltaTime){if(this.__bitmapData!=null&&this.__bitmapData.image!=null&&this.__bitmapData.image.version!=this.__imageVersion){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}},__getBounds:function(rect,matrix){if(this.__bitmapData!=null){var bounds=openfl_geom_Rectangle.__pool.get();bounds.setTo(0,0,this.__bitmapData.width,this.__bitmapData.height);bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)}},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask||this.__bitmapData==null){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}this.__getRenderTransform();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var px=norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx));var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;var py=norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x));if(px>0&&py>0&&px<=this.__bitmapData.width&&py<=this.__bitmapData.height){if(this.__scrollRect!=null&&!this.__scrollRect.contains(px,py)){return false}if(stack!=null&&!interactiveOnly){stack.push(hitObject)}return true}return false},__hitTestMask:function(x,y){if(this.__bitmapData==null){return false}this.__getRenderTransform();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var px=norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx));var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;var py=norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x));if(px>0&&py>0&&px<=this.__bitmapData.width&&py<=this.__bitmapData.height){return true}return false},get_bitmapData:function(){return this.__bitmapData},set_bitmapData:function(value){this.__bitmapData=value;this.smoothing=false;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.__imageVersion=-1;return this.__bitmapData},get_height:function(){if(this.__bitmapData!=null){return this.__bitmapData.height*Math.abs(this.get_scaleY())}return 0},set_height:function(value){if(this.__bitmapData!=null){this.set_scaleY(value/this.__bitmapData.height)}else{this.set_scaleY(0)}return value},get_width:function(){if(this.__bitmapData!=null){return this.__bitmapData.width*Math.abs(this.__scaleX)}return 0},set_width:function(value){if(this.__bitmapData!=null){this.set_scaleX(value/this.__bitmapData.width)}else{this.set_scaleX(0)}return value},__class__:openfl_display_Bitmap,__properties__:$extend(openfl_display_DisplayObject.prototype.__properties__,{set_bitmapData:"set_bitmapData",get_bitmapData:"get_bitmapData"})});var openfl_geom_Point=function(x,y){if(y==null){y=0}if(x==null){x=0}this.x=x;this.y=y};$hxClasses["openfl.geom.Point"]=openfl_geom_Point;openfl_geom_Point.__name__="openfl.geom.Point";openfl_geom_Point.distance=function(pt1,pt2){var dx=pt1.x-pt2.x;var dy=pt1.y-pt2.y;return Math.sqrt(dx*dx+dy*dy)};openfl_geom_Point.prototype={x:null,y:null,clone:function(){return new openfl_geom_Point(this.x,this.y)},copyFrom:function(sourcePoint){this.x=sourcePoint.x;this.y=sourcePoint.y},normalize:function(thickness){if(this.x==0&&this.y==0){return}else{var norm=thickness/Math.sqrt(this.x*this.x+this.y*this.y);this.x*=norm;this.y*=norm}},setTo:function(xa,ya){this.x=xa;this.y=ya},subtract:function(v){return new openfl_geom_Point(this.x-v.x,this.y-v.y)},__toLimeVector2:function(){if(openfl_geom_Point.__limeVector2==null){openfl_geom_Point.__limeVector2=new lime_math_Vector2}var _this=openfl_geom_Point.__limeVector2;_this.x=this.x;_this.y=this.y;return openfl_geom_Point.__limeVector2},get_length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},__class__:openfl_geom_Point,__properties__:{get_length:"get_length"}};var openfl__$internal_symbols_SWFSymbol=function(){};$hxClasses["openfl._internal.symbols.SWFSymbol"]=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_SWFSymbol.__name__="openfl._internal.symbols.SWFSymbol";openfl__$internal_symbols_SWFSymbol.prototype={className:null,id:null,__createObject:function(swf){return null},__class__:openfl__$internal_symbols_SWFSymbol};var openfl__$internal_symbols_BitmapSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.BitmapSymbol"]=openfl__$internal_symbols_BitmapSymbol;openfl__$internal_symbols_BitmapSymbol.__name__="openfl._internal.symbols.BitmapSymbol";openfl__$internal_symbols_BitmapSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_BitmapSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{alpha:null,path:null,smooth:null,__createObject:function(swf){return new openfl_display_Bitmap(openfl_display_BitmapData.fromImage(swf.library.getImage(this.path)),1,this.smooth!=false)},__class__:openfl__$internal_symbols_BitmapSymbol});var openfl__$internal_symbols_ButtonSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.ButtonSymbol"]=openfl__$internal_symbols_ButtonSymbol;openfl__$internal_symbols_ButtonSymbol.__name__="openfl._internal.symbols.ButtonSymbol";openfl__$internal_symbols_ButtonSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_ButtonSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{downState:null,hitState:null,overState:null,upState:null,__createObject:function(swf){var simpleButton=null;openfl_display_SimpleButton.__initSWF=swf;openfl_display_SimpleButton.__initSymbol=this;if(this.className!=null){var name=this.className;var symbolType=$hxClasses[name];if(symbolType!=null){simpleButton=Type.createInstance(symbolType,[])}}if(simpleButton==null){simpleButton=new openfl_display_SimpleButton}return simpleButton},__class__:openfl__$internal_symbols_ButtonSymbol});var openfl__$internal_symbols_DynamicTextSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.DynamicTextSymbol"]=openfl__$internal_symbols_DynamicTextSymbol;openfl__$internal_symbols_DynamicTextSymbol.__name__="openfl._internal.symbols.DynamicTextSymbol";openfl__$internal_symbols_DynamicTextSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_DynamicTextSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{align:null,border:null,color:null,fontHeight:null,fontID:null,fontName:null,height:null,html:null,indent:null,input:null,leading:null,leftMargin:null,multiline:null,password:null,rightMargin:null,selectable:null,text:null,width:null,wordWrap:null,x:null,y:null,__createObject:function(swf){var textField=new openfl_text_TextField;textField.__symbol=this;textField.set_width(this.width);textField.set_height(this.height);textField.__offsetX=this.x;textField.__offsetY=this.y;textField.set_multiline(this.multiline);textField.set_wordWrap(this.wordWrap);textField.set_displayAsPassword(this.password);if(this.border){textField.set_border(true);textField.set_background(true)}textField.set_selectable(this.selectable);if(this.input){textField.set_type(1)}var format=new openfl_text_TextFormat;if(this.color!=null){format.color=this.color&16777215}format.size=Math.round(this.fontHeight/20);var font=swf.symbols.h[this.fontID];if(font!=null){format.__ascent=font.ascent/20/1024;format.__descent=font.descent/20/1024}format.font=this.fontName;var found=false;var _g=format.font;if(_g==null){found=true}else{switch(_g){case"":case"_sans":case"_serif":case"_typewriter":found=true;break;default:var _g1=0;var _g11=openfl_text_Font.enumerateFonts();while(_g1<_g11.length)if(_g11[_g1++].name==format.font){found=true;break}}}if(!found){var alpha_r=new RegExp("[^a-zA-Z]+","g".split("u").join(""));var _g12=0;var _g2=openfl_text_Font.enumerateFonts();while(_g12<_g2.length){var font1=_g2[_g12];++_g12;if(HxOverrides.substr(font1.name.replace(alpha_r,""),0,this.fontName.length)==this.fontName){format.font=font1.name;found=true;break}}}if(found){textField.set_embedFonts(true)}else{var key=format.font;var _this=openfl_text_TextField.__missingFontWarning;if(!(__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key))){var k=format.font;var _this1=openfl_text_TextField.__missingFontWarning;if(__map_reserved[k]!=null){_this1.setReserved(k,true)}else{_this1.h[k]=true}lime_utils_Log.warn('Could not find required font "'+format.font+'", it has not been embedded',{fileName:"openfl/_internal/symbols/DynamicTextSymbol.hx",lineNumber:145,className:"openfl._internal.symbols.DynamicTextSymbol",methodName:"__createObject"})}}if(this.align!=null){if(this.align=="center"){format.align=0}else if(this.align=="right"){format.align=4}else if(this.align=="justify"){format.align=2}format.leftMargin=this.leftMargin/20|0;format.rightMargin=this.rightMargin/20|0;format.indent=this.indent/20|0;format.leading=this.leading/20|0}textField.set_defaultTextFormat(format);if(this.text!=null){if(this.html){textField.set_htmlText(this.text)}else{textField.set_text(this.text)}}return textField},__class__:openfl__$internal_symbols_DynamicTextSymbol});var openfl__$internal_symbols_FontSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.FontSymbol"]=openfl__$internal_symbols_FontSymbol;openfl__$internal_symbols_FontSymbol.__name__="openfl._internal.symbols.FontSymbol";openfl__$internal_symbols_FontSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_FontSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{advances:null,ascent:null,bold:null,codes:null,descent:null,glyphs:null,italic:null,leading:null,name:null,__class__:openfl__$internal_symbols_FontSymbol});var openfl__$internal_symbols_ShapeSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.ShapeSymbol"]=openfl__$internal_symbols_ShapeSymbol;openfl__$internal_symbols_ShapeSymbol.__name__="openfl._internal.symbols.ShapeSymbol";openfl__$internal_symbols_ShapeSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_ShapeSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{commands:null,rendered:null,__createObject:function(swf){var shape=new openfl_display_Shape;var graphics=shape.get_graphics();if(this.rendered!=null){graphics.copyFrom(this.rendered.get_graphics());return shape}var _g=0;var _g1=this.commands;while(_g<_g1.length){var command=_g1[_g];++_g;switch(command._hx_index){case 0:var bitmap=swf.library.getImage(swf.symbols.h[command.bitmap].path);if(bitmap!=null){graphics.beginBitmapFill(openfl_display_BitmapData.fromImage(bitmap),command.matrix,command.repeat,command.smooth)}break;case 1:graphics.beginFill(command.color,command.alpha);break;case 2:graphics.beginGradientFill(command.fillType,command.colors,command.alphas,command.ratios,command.matrix,command.spreadMethod,command.interpolationMethod,command.focalPointRatio);break;case 3:graphics.curveTo(command.controlX,command.controlY,command.anchorX,command.anchorY);break;case 4:graphics.endFill();break;case 5:var _g8=command.thickness;if(_g8!=null){graphics.lineStyle(_g8,command.color,command.alpha,command.pixelHinting,command.scaleMode,command.caps,command.joints,command.miterLimit)}else{graphics.lineStyle()}break;case 6:graphics.lineTo(command.x,command.y);break;case 7:graphics.moveTo(command.x,command.y);break}}this.commands=null;this.rendered=new openfl_display_Shape;this.rendered.get_graphics().copyFrom(shape.get_graphics());return shape},__class__:openfl__$internal_symbols_ShapeSymbol});var openfl__$internal_symbols_SpriteSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this);this.frames=[]};$hxClasses["openfl._internal.symbols.SpriteSymbol"]=openfl__$internal_symbols_SpriteSymbol;openfl__$internal_symbols_SpriteSymbol.__name__="openfl._internal.symbols.SpriteSymbol";openfl__$internal_symbols_SpriteSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_SpriteSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{baseClassName:null,frames:null,scale9Grid:null,__createObject:function(swf){openfl_display_MovieClip.__initSWF=swf;openfl_display_MovieClip.__initSymbol=this;var symbolType=null;if(this.className!=null){var name=this.className;symbolType=$hxClasses[name]}if(symbolType==null&&this.baseClassName!=null){var name1=this.baseClassName;symbolType=$hxClasses[name1]}var movieClip=null;if(symbolType!=null){movieClip=Type.createInstance(symbolType,[])}else{movieClip=new openfl_display_MovieClip}movieClip.set_scale9Grid(this.scale9Grid);return movieClip},__class__:openfl__$internal_symbols_SpriteSymbol});var openfl__$internal_symbols_StaticTextSymbol=function(){openfl__$internal_symbols_SWFSymbol.call(this)};$hxClasses["openfl._internal.symbols.StaticTextSymbol"]=openfl__$internal_symbols_StaticTextSymbol;openfl__$internal_symbols_StaticTextSymbol.__name__="openfl._internal.symbols.StaticTextSymbol";openfl__$internal_symbols_StaticTextSymbol.__super__=openfl__$internal_symbols_SWFSymbol;openfl__$internal_symbols_StaticTextSymbol.prototype=$extend(openfl__$internal_symbols_SWFSymbol.prototype,{matrix:null,records:null,rendered:null,__createObject:function(swf){var staticText=new openfl_text_StaticText;var graphics=staticText.__graphics;if(this.rendered!=null){staticText.text=this.rendered.text;graphics.copyFrom(this.rendered.__graphics);return staticText}var text="";if(this.records!=null){var font=null;var color=16777215;var offsetX=this.matrix.tx;var offsetY=this.matrix.ty;var scale;var index;var _g=0;var _g1=this.records;while(_g<_g1.length){var record=_g1[_g];++_g;if(record.fontID!=null){font=swf.symbols.h[record.fontID]}if(record.offsetX!=null){offsetX=this.matrix.tx+record.offsetX*.05}if(record.offsetY!=null){offsetY=this.matrix.ty+record.offsetY*.05}if(record.color!=null){color=record.color}if(font!=null){scale=record.fontHeight/1024*.05;var _g2=0;var _g11=record.glyphs.length;while(_g2<_g11){var i=_g2++;index=record.glyphs[i];var code=font.codes[index];text+=String.fromCodePoint(code);var _g3=0;var _g12=font.glyphs[index];while(_g3<_g12.length){var command=_g12[_g3];++_g3;switch(command._hx_index){case 1:graphics.beginFill(color&16777215,(color>>24&255)/255);break;case 3:graphics.curveTo(command.controlX*scale+offsetX,command.controlY*scale+offsetY,command.anchorX*scale+offsetX,command.anchorY*scale+offsetY);break;case 4:graphics.endFill();break;case 5:var thickness=command.thickness;if(thickness!=null){graphics.lineStyle(thickness,command.color,command.alpha,command.pixelHinting,command.scaleMode,command.caps,command.joints,command.miterLimit)}else{graphics.lineStyle()}break;case 6:graphics.lineTo(command.x*scale+offsetX,command.y*scale+offsetY);break;case 7:graphics.moveTo(command.x*scale+offsetX,command.y*scale+offsetY);break;default:}}offsetX+=record.advances[i]*.05}}}}staticText.text=text;this.records=null;this.rendered=new openfl_text_StaticText;this.rendered.text=text;this.rendered.__graphics.copyFrom(staticText.__graphics);return staticText},__class__:openfl__$internal_symbols_StaticTextSymbol});var openfl__$internal_symbols_StaticTextRecord=function(){};$hxClasses["openfl._internal.symbols.StaticTextRecord"]=openfl__$internal_symbols_StaticTextRecord;openfl__$internal_symbols_StaticTextRecord.__name__="openfl._internal.symbols.StaticTextRecord";openfl__$internal_symbols_StaticTextRecord.prototype={advances:null,color:null,fontHeight:null,fontID:null,glyphs:null,offsetX:null,offsetY:null,__class__:openfl__$internal_symbols_StaticTextRecord};var openfl__$internal_symbols_timeline_Frame=function(){};$hxClasses["openfl._internal.symbols.timeline.Frame"]=openfl__$internal_symbols_timeline_Frame;openfl__$internal_symbols_timeline_Frame.__name__="openfl._internal.symbols.timeline.Frame";openfl__$internal_symbols_timeline_Frame.prototype={label:null,objects:null,script:null,scriptSource:null,__class__:openfl__$internal_symbols_timeline_Frame};var openfl__$internal_symbols_timeline_FrameObject=function(){};$hxClasses["openfl._internal.symbols.timeline.FrameObject"]=openfl__$internal_symbols_timeline_FrameObject;openfl__$internal_symbols_timeline_FrameObject.__name__="openfl._internal.symbols.timeline.FrameObject";openfl__$internal_symbols_timeline_FrameObject.prototype={blendMode:null,cacheAsBitmap:null,clipDepth:null,colorTransform:null,depth:null,filters:null,id:null,matrix:null,name:null,symbol:null,type:null,visible:null,__class__:openfl__$internal_symbols_timeline_FrameObject};var openfl__$internal_symbols_timeline_FrameObjectType=$hxEnums["openfl._internal.symbols.timeline.FrameObjectType"]={__ename__:"openfl._internal.symbols.timeline.FrameObjectType",__constructs__:["CREATE","UPDATE","DESTROY"],CREATE:{_hx_index:0,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:$estr},UPDATE:{_hx_index:1,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:$estr},DESTROY:{_hx_index:2,__enum__:"openfl._internal.symbols.timeline.FrameObjectType",toString:$estr}};var openfl__$internal_text_TextEngine=function(textField){this.textField=textField;this.width=100;this.height=100;this.set_text("");this.bounds=new openfl_geom_Rectangle(0,0,0,0);this.textBounds=new openfl_geom_Rectangle(0,0,0,0);this.type=0;this.autoSize=2;this.embedFonts=false;this.selectable=true;this.borderColor=0;this.border=false;this.backgroundColor=16777215;this.background=false;this.gridFitType=1;this.maxChars=0;this.multiline=false;this.numLines=1;this.sharpness=0;this.scrollH=0;this.set_scrollV(1);this.wordWrap=false;this.lineAscents=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.lineBreaks=openfl__$Vector_Vector_$Impl_$.toIntVector(null);this.lineDescents=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.lineLeadings=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.lineHeights=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.lineWidths=openfl__$Vector_Vector_$Impl_$.toFloatVector(null);this.layoutGroups=openfl__$Vector_Vector_$Impl_$.toObjectVector(null);this.textFormatRanges=openfl__$Vector_Vector_$Impl_$.toObjectVector(null);if(openfl__$internal_text_TextEngine.__context==null){openfl__$internal_text_TextEngine.__context=window.document.createElement("canvas").getContext("2d")}};$hxClasses["openfl._internal.text.TextEngine"]=openfl__$internal_text_TextEngine;openfl__$internal_text_TextEngine.__name__="openfl._internal.text.TextEngine";openfl__$internal_text_TextEngine.findFont=function(name){var _this=openfl_text_Font.__fontByName;if(__map_reserved[name]!=null){return _this.getReserved(name)}else{return _this.h[name]}};openfl__$internal_text_TextEngine.findFontVariant=function(format){var fontName=format.font;var bold=format.bold;var italic=format.italic;if(fontName==null){fontName="_serif"}var fontNamePrefix=StringTools.replace(StringTools.replace(fontName," Normal","")," Regular","");var tmp;if(bold&&italic){var _this=openfl_text_Font.__fontByName;var key=fontNamePrefix+" Bold Italic";tmp=__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key)}else{tmp=false}if(tmp){return openfl__$internal_text_TextEngine.findFont(fontNamePrefix+" Bold Italic")}else{var tmp1;if(bold){var _this1=openfl_text_Font.__fontByName;var key1=fontNamePrefix+" Bold";tmp1=__map_reserved[key1]!=null?_this1.existsReserved(key1):_this1.h.hasOwnProperty(key1)}else{tmp1=false}if(tmp1){return openfl__$internal_text_TextEngine.findFont(fontNamePrefix+" Bold")}else{var tmp2;if(italic){var _this2=openfl_text_Font.__fontByName;var key2=fontNamePrefix+" Italic";tmp2=__map_reserved[key2]!=null?_this2.existsReserved(key2):_this2.h.hasOwnProperty(key2)}else{tmp2=false}if(tmp2){return openfl__$internal_text_TextEngine.findFont(fontNamePrefix+" Italic")}}}return openfl__$internal_text_TextEngine.findFont(fontName)};openfl__$internal_text_TextEngine.getFormatHeight=function(format){var ascent;var descent;openfl__$internal_text_TextEngine.__context.font=openfl__$internal_text_TextEngine.getFont(format);var font=openfl__$internal_text_TextEngine.getFontInstance(format);if(format.__ascent!=null){ascent=format.size*format.__ascent;descent=format.size*format.__descent}else if(font!=null&&font.unitsPerEM!=0){ascent=font.ascender/font.unitsPerEM*format.size;descent=Math.abs(font.descender/font.unitsPerEM*format.size)}else{ascent=format.size;descent=format.size*.185}return ascent+descent+format.leading};openfl__$internal_text_TextEngine.getFont=function(format){var fontName=format.font;var bold=format.bold;var italic=format.italic;if(fontName==null){fontName="_serif"}var fontNamePrefix=StringTools.replace(StringTools.replace(fontName," Normal","")," Regular","");var tmp;if(bold&&italic){var _this=openfl_text_Font.__fontByName;var key=fontNamePrefix+" Bold Italic";tmp=__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key)}else{tmp=false}if(tmp){fontName=fontNamePrefix+" Bold Italic";bold=false;italic=false}else{var tmp1;if(bold){var _this1=openfl_text_Font.__fontByName;var key1=fontNamePrefix+" Bold";tmp1=__map_reserved[key1]!=null?_this1.existsReserved(key1):_this1.h.hasOwnProperty(key1)}else{tmp1=false}if(tmp1){fontName=fontNamePrefix+" Bold";bold=false}else{var tmp2;if(italic){var _this2=openfl_text_Font.__fontByName;var key2=fontNamePrefix+" Italic";tmp2=__map_reserved[key2]!=null?_this2.existsReserved(key2):_this2.h.hasOwnProperty(key2)}else{tmp2=false}if(tmp2){fontName=fontNamePrefix+" Italic";italic=false}else{if(bold&&(fontName.indexOf(" Bold ")>-1||StringTools.endsWith(fontName," Bold"))){bold=false}if(italic&&(fontName.indexOf(" Italic ")>-1||StringTools.endsWith(fontName," Italic"))){italic=false}}}}var font=italic?"italic ":"normal ";font+="normal ";font+=bold?"bold ":"normal ";font+=format.size+"px";font+="/"+(format.leading+format.size+3)+"px ";var font1;switch(fontName){case"_sans":font1="sans-serif";break;case"_serif":font1="serif";break;case"_typewriter":font1="monospace";break;default:var _this_r=new RegExp("^[\\s'\"]+(.*)[\\s'\"]+$","".split("u").join(""));font1="'"+fontName.replace(_this_r,"$1")+"'"}font+=""+font1;return font};openfl__$internal_text_TextEngine.getFontInstance=function(format){return openfl__$internal_text_TextEngine.findFontVariant(format)};openfl__$internal_text_TextEngine.prototype={antiAliasType:null,autoSize:null,background:null,backgroundColor:null,border:null,borderColor:null,bottomScrollV:null,bounds:null,embedFonts:null,gridFitType:null,height:null,layoutGroups:null,lineAscents:null,lineBreaks:null,lineDescents:null,lineLeadings:null,lineHeights:null,lineWidths:null,maxChars:null,maxScrollH:null,maxScrollV:null,multiline:null,numLines:null,scrollH:null,scrollV:null,selectable:null,sharpness:null,text:null,textBounds:null,textHeight:null,textFormatRanges:null,textWidth:null,type:null,width:null,wordWrap:null,textField:null,__hasFocus:null,__restrictRegexp:null,__useIntAdvances:null,getBounds:function(){var padding=this.border?1:0;this.bounds.width=this.width+padding;this.bounds.height=this.height+padding;var x=this.width;var y=this.width;var group=this.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.offsetX<x){x=group1.offsetX}if(group1.offsetY<y){y=group1.offsetY}}if(x>=this.width){x=2}if(y>=this.height){y=2}this.textBounds.setTo(Math.max(x-2,0),Math.max(y-2,0),Math.min(this.textWidth+4,this.bounds.width+4),Math.min(this.textHeight*1.185+4,this.bounds.height+4))},getLineBreakIndex:function(startIndex){if(startIndex==null){startIndex=0}var cr=this.text.indexOf("\n",startIndex);var lf=this.text.indexOf("\r",startIndex);if(cr==-1){return lf}if(lf==-1){return cr}if(cr<lf){return cr}else{return lf}},getLineMeasurements:function(){this.lineAscents.set_length(0);this.lineDescents.set_length(0);this.lineLeadings.set_length(0);this.lineHeights.set_length(0);this.lineWidths.set_length(0);var currentLineAscent=0;var currentLineDescent=0;var currentLineLeading=null;var currentLineHeight=0;var currentLineWidth=0;var currentTextHeight=0;this.textWidth=0;this.textHeight=0;this.numLines=1;this.maxScrollH=0;var group=this.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();while(group1.lineIndex>this.numLines-1){this.lineAscents.push(currentLineAscent);this.lineDescents.push(currentLineDescent);this.lineLeadings.push(currentLineLeading!=null?currentLineLeading:0);this.lineHeights.push(currentLineHeight);this.lineWidths.push(currentLineWidth);currentLineAscent=0;currentLineDescent=0;currentLineLeading=null;currentLineHeight=0;currentLineWidth=0;this.numLines++}currentLineAscent=Math.max(currentLineAscent,group1.ascent);currentLineDescent=Math.max(currentLineDescent,group1.descent);if(currentLineLeading==null){currentLineLeading=group1.leading}else{currentLineLeading=Math.max(currentLineLeading,group1.leading)|0}currentLineHeight=Math.max(currentLineHeight,group1.height);currentLineWidth=group1.offsetX-2+group1.width;if(currentLineWidth>this.textWidth){this.textWidth=currentLineWidth}currentTextHeight=group1.offsetY-2+group1.ascent+group1.descent;if(currentTextHeight>this.textHeight){this.textHeight=currentTextHeight}}if(this.textHeight==0&&this.textField!=null&&this.textField.get_type()==1){var currentFormat=this.textField.__textFormat;var ascent;var descent;var font=openfl__$internal_text_TextEngine.getFontInstance(currentFormat);if(currentFormat.__ascent!=null){ascent=currentFormat.size*currentFormat.__ascent;descent=currentFormat.size*currentFormat.__descent}else if(font!=null&&font.unitsPerEM!=0){ascent=font.ascender/font.unitsPerEM*currentFormat.size;descent=Math.abs(font.descender/font.unitsPerEM*currentFormat.size)}else{ascent=currentFormat.size;descent=currentFormat.size*.185}currentLineAscent=ascent;currentLineDescent=descent;currentLineLeading=currentFormat.leading;currentTextHeight=ascent+descent;this.textHeight=currentTextHeight}this.lineAscents.push(currentLineAscent);this.lineDescents.push(currentLineDescent);this.lineLeadings.push(currentLineLeading!=null?currentLineLeading:0);this.lineHeights.push(currentLineHeight);this.lineWidths.push(currentLineWidth);if(this.numLines==1){if(currentLineLeading>0){this.textHeight+=currentLineLeading}}if(this.layoutGroups.get_length()>0){var group2=this.layoutGroups.get(this.layoutGroups.get_length()-1);if(group2!=null&&group2.startIndex==group2.endIndex){this.textHeight-=currentLineHeight}}if(this.autoSize!=2){switch(this.autoSize){case 0:case 1:case 3:if(!this.wordWrap){this.width=this.textWidth+4}this.height=this.textHeight+4;this.bottomScrollV=this.numLines;break;default:}}if(this.textWidth>this.width-4){this.maxScrollH=this.textWidth-this.width+4|0}else{this.maxScrollH=0}if(this.scrollH>this.maxScrollH){this.scrollH=this.maxScrollH}},getLayoutGroups:function(){var _gthis=this;this.layoutGroups.set_length(0);if(this.text==null||this.text==""){return}var rangeIndex=-1;var formatRange=null;var font=null;var currentFormat=openfl_text_TextField.__defaultTextFormat.clone();var leading=0;var ascent=0;var maxAscent=0;var descent=0;var align=3;var blockIndent=0;var indent=0;var leftMargin=0;var rightMargin=0;var firstLineOfParagraph=true;var layoutGroup=null;var positions=null;var widthValue=0;var heightValue=0;var maxHeightValue=0;var previousSpaceIndex=-2;var previousBreakIndex=-1;var spaceIndex=this.text.indexOf(" ");var breakIndex=this.getLineBreakIndex();var offsetX=0;var offsetY=0;var textIndex=0;var lineIndex=0;var getPositions=function(text,startIndex,endIndex){var positions1=[];if(_gthis.__useIntAdvances==null){var getPositions1=new EReg("Trident/7.0","");_gthis.__useIntAdvances=getPositions1.match(window.navigator.userAgent)}if(_gthis.__useIntAdvances){var previousWidth=0;var width;var _g=startIndex;while(_g<endIndex){width=openfl__$internal_text_TextEngine.__context.measureText(text.substring(startIndex,_g+++1)).width;positions1.push(width-previousWidth);previousWidth=width}}else{var _g1=startIndex;while(_g1<endIndex){var i=_g1++;var advance;if(i<text.length-1){var nextWidth=openfl__$internal_text_TextEngine.__context.measureText(text.charAt(i+1)).width;advance=openfl__$internal_text_TextEngine.__context.measureText(HxOverrides.substr(text,i,2)).width-nextWidth}else{advance=openfl__$internal_text_TextEngine.__context.measureText(text.charAt(i)).width}positions1.push(advance)}}return positions1};var getPositionsWidth=function(positions2){var width1=0;var _g2=0;while(_g2<positions2.length)width1+=positions2[_g2++];return width1};var getBaseX=function(){return 2+leftMargin+blockIndent+(firstLineOfParagraph?indent:0)};var getWrapWidth=function(){return _gthis.width-2-rightMargin-getBaseX()};var nextLayoutGroup=function(startIndex1,endIndex1){if(layoutGroup==null||layoutGroup.startIndex!=layoutGroup.endIndex){layoutGroup=new openfl__$internal_text_TextLayoutGroup(formatRange.format,startIndex1,endIndex1);_gthis.layoutGroups.push(layoutGroup)}else{layoutGroup.format=formatRange.format;layoutGroup.startIndex=startIndex1;layoutGroup.endIndex=endIndex1}};var setLineMetrics=function(){if(currentFormat.__ascent!=null){ascent=currentFormat.size*currentFormat.__ascent;descent=currentFormat.size*currentFormat.__descent}else if(font!=null&&font.unitsPerEM!=0){ascent=font.ascender/font.unitsPerEM*currentFormat.size;descent=Math.abs(font.descender/font.unitsPerEM*currentFormat.size)}else{ascent=currentFormat.size;descent=currentFormat.size*.185}leading=currentFormat.leading;heightValue=Math.ceil(ascent+descent+leading);if(heightValue>maxHeightValue){maxHeightValue=heightValue}if(ascent>maxAscent){maxAscent=ascent}};var setParagraphMetrics=function(){firstLineOfParagraph=true;align=currentFormat.align!=null?currentFormat.align:3;blockIndent=currentFormat.blockIndent!=null?currentFormat.blockIndent:0;indent=currentFormat.indent!=null?currentFormat.indent:0;leftMargin=currentFormat.leftMargin!=null?currentFormat.leftMargin:0;rightMargin=currentFormat.rightMargin!=null?currentFormat.rightMargin:0};var nextFormatRange=function(){if(rangeIndex<_gthis.textFormatRanges.get_length()-1){rangeIndex+=1;formatRange=_gthis.textFormatRanges.get(rangeIndex);currentFormat.__merge(formatRange.format);openfl__$internal_text_TextEngine.__context.font=openfl__$internal_text_TextEngine.getFont(currentFormat);font=openfl__$internal_text_TextEngine.getFontInstance(currentFormat);return true}return false};var setFormattedPositions=function(startIndex2,endIndex2){if(startIndex2>=endIndex2){positions=[];widthValue=0}else if(endIndex2<=formatRange.end){positions=getPositions(_gthis.text,startIndex2,endIndex2);widthValue=getPositionsWidth(positions)}else{var tempIndex=startIndex2;var tempRangeEnd=formatRange.end;var countRanges=0;positions=[];widthValue=0;while(true){if(tempIndex!=tempRangeEnd){var tempPositions=getPositions(_gthis.text,tempIndex,tempRangeEnd);positions=positions.concat(tempPositions)}if(tempRangeEnd!=endIndex2){if(!nextFormatRange()){lime_utils_Log.warn("You found a bug in OpenFL's text code! Please save a copy of your project and contact Joshua Granick (@singmajesty) so we can fix this.",{fileName:"openfl/_internal/text/TextEngine.hx",lineNumber:1067,className:"openfl._internal.text.TextEngine",methodName:"getLayoutGroups"});break}tempIndex=tempRangeEnd;tempRangeEnd=endIndex2<formatRange.end?endIndex2:formatRange.end;++countRanges}else{widthValue=getPositionsWidth(positions);break}}rangeIndex-=countRanges+1;nextFormatRange()}};var placeFormattedText=function(endIndex3){if(endIndex3<=formatRange.end){positions=getPositions(_gthis.text,textIndex,endIndex3);widthValue=getPositionsWidth(positions);nextLayoutGroup(textIndex,endIndex3);layoutGroup.positions=positions;var placeFormattedText1=getBaseX();layoutGroup.offsetX=offsetX+placeFormattedText1;layoutGroup.ascent=ascent;layoutGroup.descent=descent;layoutGroup.leading=leading;layoutGroup.lineIndex=lineIndex;layoutGroup.offsetY=offsetY+2;layoutGroup.width=widthValue;layoutGroup.height=heightValue;offsetX+=widthValue;if(endIndex3==formatRange.end){layoutGroup=null;nextFormatRange();setLineMetrics()}}else{while(true){var tempRangeEnd1=endIndex3<formatRange.end?endIndex3:formatRange.end;if(textIndex!=tempRangeEnd1){positions=getPositions(_gthis.text,textIndex,tempRangeEnd1);widthValue=getPositionsWidth(positions);nextLayoutGroup(textIndex,tempRangeEnd1);layoutGroup.positions=positions;var placeFormattedText2=getBaseX();layoutGroup.offsetX=offsetX+placeFormattedText2;layoutGroup.ascent=ascent;layoutGroup.descent=descent;layoutGroup.leading=leading;layoutGroup.lineIndex=lineIndex;layoutGroup.offsetY=offsetY+2;layoutGroup.width=widthValue;layoutGroup.height=heightValue;offsetX+=widthValue;textIndex=tempRangeEnd1}if(tempRangeEnd1==formatRange.end){layoutGroup=null}if(tempRangeEnd1==endIndex3){break}if(!nextFormatRange()){lime_utils_Log.warn("You found a bug in OpenFL's text code! Please save a copy of your project and contact Joshua Granick (@singmajesty) so we can fix this.",{fileName:"openfl/_internal/text/TextEngine.hx",lineNumber:1155,className:"openfl._internal.text.TextEngine",methodName:"getLayoutGroups"});break}setLineMetrics()}}textIndex=endIndex3};var alignBaseline=function(){setLineMetrics();var i1=_gthis.layoutGroups.get_length();while(--i1>-1){var lg=_gthis.layoutGroups.get(i1);if(lg.lineIndex<lineIndex){break}if(lg.lineIndex>lineIndex){continue}lg.ascent=maxAscent;lg.height=maxHeightValue}offsetY+=maxHeightValue;maxAscent=0;maxHeightValue=0;lineIndex+=1;offsetX=0;firstLineOfParagraph=false};var breakLongWords=function(endIndex4){var remainingPositions=positions;var i2;var bufferCount;var placeIndex;var positionWidth;var currentPosition;var tempWidth=getPositionsWidth(remainingPositions);while(remainingPositions.length>0&&offsetX+tempWidth>getWrapWidth()){bufferCount=0;i2=0;positionWidth=0;while(offsetX+positionWidth<getWrapWidth()){currentPosition=remainingPositions[i2];if(currentPosition==0){++i2;++bufferCount}else{positionWidth+=currentPosition;++i2}}if(i2==bufferCount){i2=bufferCount+1}else{while(i2>1&&offsetX+positionWidth>getWrapWidth()){--i2;if(i2-bufferCount>0){setFormattedPositions(textIndex,textIndex+i2-bufferCount);positionWidth=widthValue}else{i2=1;bufferCount=0;setFormattedPositions(textIndex,textIndex+1);positionWidth=0}}}placeIndex=textIndex+i2-bufferCount;placeFormattedText(placeIndex);alignBaseline();setFormattedPositions(placeIndex,endIndex4);remainingPositions=positions;tempWidth=widthValue}};var placeText=function(endIndex5){if(_gthis.width>=4&&_gthis.wordWrap){breakLongWords(endIndex5)}placeFormattedText(endIndex5)};nextFormatRange();setParagraphMetrics();setLineMetrics();var wrap;var maxLoops=this.text.length+1;while(textIndex<maxLoops)if(breakIndex>-1&&(spaceIndex==-1||breakIndex<spaceIndex)){if(textIndex<=breakIndex){setFormattedPositions(textIndex,breakIndex);placeText(breakIndex);layoutGroup=null}else if(layoutGroup!=null&&layoutGroup.startIndex!=layoutGroup.endIndex){if(layoutGroup.endIndex==spaceIndex){layoutGroup.width-=layoutGroup.positions[layoutGroup.positions.length-1]}layoutGroup=null}alignBaseline();if(formatRange.end==breakIndex||formatRange.end==breakIndex+1){nextFormatRange();setLineMetrics()}textIndex=breakIndex+1;previousBreakIndex=breakIndex;breakIndex=this.getLineBreakIndex(textIndex);setParagraphMetrics()}else if(spaceIndex>-1){if(layoutGroup!=null&&layoutGroup.startIndex!=layoutGroup.endIndex){layoutGroup=null}wrap=false;while(textIndex<this.text.length){var endIndex6=-1;if(spaceIndex==-1){endIndex6=breakIndex}else{endIndex6=spaceIndex+1;if(breakIndex>-1&&breakIndex<endIndex6){endIndex6=breakIndex}}if(endIndex6==-1){endIndex6=this.text.length}setFormattedPositions(textIndex,endIndex6);if(align==2){if(positions.length>0&&textIndex==previousSpaceIndex){textIndex+=1;var spaceWidth=positions.shift();widthValue-=spaceWidth;offsetX+=spaceWidth}if(positions.length>0&&endIndex6==spaceIndex+1){--endIndex6;widthValue-=positions.pop()}}if(this.wordWrap){if(offsetX+widthValue>getWrapWidth()){wrap=true;if(positions.length>0&&endIndex6==spaceIndex+1){if(offsetX+widthValue-positions[positions.length-1]<=getWrapWidth()){wrap=false}}}}if(wrap){if(align!=2&&(layoutGroup!=null||this.layoutGroups.get_length()>0)){var previous=layoutGroup;if(previous==null){previous=this.layoutGroups.get(this.layoutGroups.get_length()-1)}previous.width-=previous.positions[previous.positions.length-1];previous.endIndex--}var i3=this.layoutGroups.get_length()-1;var offsetCount=0;while(true){layoutGroup=this.layoutGroups.get(i3);if(i3>0&&layoutGroup.startIndex>previousSpaceIndex){++offsetCount}else{break}--i3}if(textIndex==previousSpaceIndex+1){alignBaseline()}offsetX=0;if(offsetCount>0){var bumpX=this.layoutGroups.get(this.layoutGroups.get_length()-offsetCount).offsetX;var _g3=this.layoutGroups.get_length()-offsetCount;var _g11=this.layoutGroups.get_length();while(_g3<_g11){layoutGroup=this.layoutGroups.get(_g3++);layoutGroup.offsetX-=bumpX;layoutGroup.offsetY=offsetY+2;layoutGroup.lineIndex=lineIndex;offsetX+=layoutGroup.width}}placeText(endIndex6);wrap=false}else if(layoutGroup!=null&&textIndex==spaceIndex){if(align!=2){layoutGroup.endIndex=spaceIndex;layoutGroup.positions=layoutGroup.positions.concat(positions);layoutGroup.width+=widthValue}offsetX+=widthValue;textIndex=endIndex6}else if(layoutGroup==null||align==2){placeText(endIndex6)}else{var tempRangeEnd2=endIndex6<formatRange.end?endIndex6:formatRange.end;if(tempRangeEnd2<endIndex6){positions=getPositions(this.text,textIndex,tempRangeEnd2);widthValue=getPositionsWidth(positions)}layoutGroup.endIndex=tempRangeEnd2;layoutGroup.positions=layoutGroup.positions.concat(positions);layoutGroup.width+=widthValue;offsetX+=widthValue;if(tempRangeEnd2==formatRange.end){layoutGroup=null;nextFormatRange();setLineMetrics();textIndex=tempRangeEnd2;if(tempRangeEnd2!=endIndex6){placeFormattedText(endIndex6)}}if(breakIndex==endIndex6){++endIndex6}textIndex=endIndex6;if(endIndex6==this.text.length){alignBaseline()}}var nextSpaceIndex=this.text.indexOf(" ",textIndex);if(breakIndex==previousSpaceIndex){layoutGroup.endIndex=breakIndex;if(breakIndex-layoutGroup.startIndex-layoutGroup.positions.length<0){layoutGroup.positions.push(0)}textIndex=breakIndex+1}previousSpaceIndex=spaceIndex;spaceIndex=nextSpaceIndex;if(breakIndex>-1&&breakIndex<=textIndex&&(nextSpaceIndex>breakIndex||nextSpaceIndex==-1)||textIndex>this.text.length){break}}}else{if(textIndex<this.text.length){setFormattedPositions(textIndex,this.text.length);placeText(this.text.length);alignBaseline()}textIndex+=1}if(previousBreakIndex==textIndex-2&&previousBreakIndex>-1){nextLayoutGroup(textIndex,textIndex);layoutGroup.positions=[];layoutGroup.ascent=ascent;layoutGroup.descent=descent;layoutGroup.leading=leading;layoutGroup.lineIndex=lineIndex;layoutGroup.offsetX=getBaseX();layoutGroup.offsetY=offsetY+2;layoutGroup.width=0;layoutGroup.height=heightValue}},restrictText:function(value){if(value==null){return value}if(this.__restrictRegexp!=null){value=this.__restrictRegexp.split(value).join("")}return value},setTextAlignment:function(){var lineIndex=-1;var offsetX=0;var totalWidth=this.width-4;var group;var lineLength;var lineMeasurementsDirty=false;var _g=0;var _g1=this.layoutGroups.get_length();while(_g<_g1){var i=_g++;group=this.layoutGroups.get(i);if(group.lineIndex!=lineIndex){lineIndex=group.lineIndex;switch(group.format.align){case 0:if(this.lineWidths.get(lineIndex)<totalWidth){offsetX=Math.round((totalWidth-this.lineWidths.get(lineIndex))/2)}else{offsetX=0}break;case 2:if(this.lineWidths.get(lineIndex)<totalWidth){lineLength=1;var _g2=i+1;var _g11=this.layoutGroups.get_length();while(_g2<_g11){var j=_g2++;if(this.layoutGroups.get(j).lineIndex==lineIndex){if(j==0||HxOverrides.cca(this.text,this.layoutGroups.get(j).startIndex-1)==32){++lineLength}}else{break}}if(lineLength>1){group=this.layoutGroups.get(i+lineLength-1);var endChar=HxOverrides.cca(this.text,group.endIndex);if(group.endIndex<this.text.length&&endChar!=10&&endChar!=13){offsetX=(totalWidth-this.lineWidths.get(lineIndex))/(lineLength-1);lineMeasurementsDirty=true;var j1=1;while(true){this.layoutGroups.get(i+j1).offsetX+=offsetX*j1;if(!(++j1<lineLength)){break}}}}}offsetX=0;break;case 4:if(this.lineWidths.get(lineIndex)<totalWidth){offsetX=Math.round(totalWidth-this.lineWidths.get(lineIndex))}else{offsetX=0}break;default:offsetX=0}}if(offsetX>0){group.offsetX+=offsetX}}if(lineMeasurementsDirty){this.getLineMeasurements()}},update:function(){if(this.text==null||this.textFormatRanges.get_length()==0){this.lineAscents.set_length(0);this.lineBreaks.set_length(0);this.lineDescents.set_length(0);this.lineLeadings.set_length(0);this.lineHeights.set_length(0);this.lineWidths.set_length(0);this.layoutGroups.set_length(0);this.textWidth=0;this.textHeight=0;this.numLines=1;this.maxScrollH=0;this.maxScrollV=1;this.bottomScrollV=1}else{this.getLayoutGroups();this.getLineMeasurements();this.setTextAlignment()}this.getBounds()},get_bottomScrollV:function(){if(this.numLines==1||this.lineHeights==null){return 1}else{var tempHeight=0;var ret=this.lineHeights.get_length();var _g=ret-1;var _g1=this.lineHeights.get_length();while(_g<_g1){var i=_g++;if(tempHeight+this.lineHeights.get(i)<=this.height-4){tempHeight+=this.lineHeights.get(i)}else{ret=i;break}}if(ret<1){return 1}return ret}},get_maxScrollV:function(){if(this.numLines==1||this.lineHeights==null){return 1}else{var i=this.numLines-1;var tempHeight=0;if(HxOverrides.cca(this.text,this.text.length-1)==10){--i}var j=i;while(i>=0)if(tempHeight+this.lineHeights.get(i)<=this.height-4){tempHeight+=this.lineHeights.get(i);--i}else{break}if(i==j){i=this.numLines}else{i+=2}if(i<1){return 1}return i}},get_scrollV:function(){if(this.numLines==1||this.lineHeights==null){return 1}var max=this.get_maxScrollV();if(this.scrollV>max){return max}return this.scrollV},set_scrollV:function(value){if(value<1){value=1}return this.scrollV=value},set_text:function(value){return this.text=value},__class__:openfl__$internal_text_TextEngine,__properties__:{set_text:"set_text",set_scrollV:"set_scrollV",get_scrollV:"get_scrollV",get_maxScrollV:"get_maxScrollV",get_bottomScrollV:"get_bottomScrollV"}};var openfl__$internal_text_TextFormatRange=function(format,start,end){this.format=format;this.start=start;this.end=end};$hxClasses["openfl._internal.text.TextFormatRange"]=openfl__$internal_text_TextFormatRange;openfl__$internal_text_TextFormatRange.__name__="openfl._internal.text.TextFormatRange";openfl__$internal_text_TextFormatRange.prototype={end:null,format:null,start:null,__class__:openfl__$internal_text_TextFormatRange};var openfl__$internal_text_TextLayoutGroup=function(format,startIndex,endIndex){this.format=format;this.startIndex=startIndex;this.endIndex=endIndex};$hxClasses["openfl._internal.text.TextLayoutGroup"]=openfl__$internal_text_TextLayoutGroup;openfl__$internal_text_TextLayoutGroup.__name__="openfl._internal.text.TextLayoutGroup";openfl__$internal_text_TextLayoutGroup.prototype={ascent:null,descent:null,endIndex:null,format:null,height:null,leading:null,lineIndex:null,offsetX:null,offsetY:null,positions:null,startIndex:null,width:null,__class__:openfl__$internal_text_TextLayoutGroup};var openfl__$internal_utils_TouchData=function(){this.rollOutStack=[]};$hxClasses["openfl._internal.utils.TouchData"]=openfl__$internal_utils_TouchData;openfl__$internal_utils_TouchData.__name__="openfl._internal.utils.TouchData";openfl__$internal_utils_TouchData.prototype={rollOutStack:null,touch:null,touchDownTarget:null,touchOverTarget:null,reset:function(){this.touch=null;this.touchDownTarget=null;this.touchOverTarget=null;this.rollOutStack.splice(0,this.rollOutStack.length)},__class__:openfl__$internal_utils_TouchData};var openfl_display_Application=function(){lime_app_Application.call(this);if(openfl__$internal_Lib.application==null){openfl__$internal_Lib.application=this}if(openfl__$internal_Lib.current==null){openfl__$internal_Lib.current=new openfl_display_MovieClip}openfl__$internal_Lib.current.__loaderInfo=openfl_display_LoaderInfo.create(null);openfl__$internal_Lib.current.__loaderInfo.content=openfl__$internal_Lib.current};$hxClasses["openfl.display.Application"]=openfl_display_Application;openfl_display_Application.__name__="openfl.display.Application";openfl_display_Application.__super__=lime_app_Application;openfl_display_Application.prototype=$extend(lime_app_Application.prototype,{createWindow:function(attributes){var $window=new openfl_display_Window(this,attributes);this.__windows.push($window);this.__windowByID.h[$window.id]=$window;var f=$bind(this,this.__onWindowClose);var window1=$window;var tmp=function(){f(window1)};$window.onClose.add(tmp,false,-1e4);if(this.__window==null){this.__window=$window;$window.onActivate.add($bind(this,this.onWindowActivate));$window.onRenderContextLost.add($bind(this,this.onRenderContextLost));$window.onRenderContextRestored.add($bind(this,this.onRenderContextRestored));$window.onDeactivate.add($bind(this,this.onWindowDeactivate));$window.onDropFile.add($bind(this,this.onWindowDropFile));$window.onEnter.add($bind(this,this.onWindowEnter));$window.onExpose.add($bind(this,this.onWindowExpose));$window.onFocusIn.add($bind(this,this.onWindowFocusIn));$window.onFocusOut.add($bind(this,this.onWindowFocusOut));$window.onFullscreen.add($bind(this,this.onWindowFullscreen));$window.onKeyDown.add($bind(this,this.onKeyDown));$window.onKeyUp.add($bind(this,this.onKeyUp));$window.onLeave.add($bind(this,this.onWindowLeave));$window.onMinimize.add($bind(this,this.onWindowMinimize));$window.onMouseDown.add($bind(this,this.onMouseDown));$window.onMouseMove.add($bind(this,this.onMouseMove));$window.onMouseMoveRelative.add($bind(this,this.onMouseMoveRelative));$window.onMouseUp.add($bind(this,this.onMouseUp));$window.onMouseWheel.add($bind(this,this.onMouseWheel));$window.onMove.add($bind(this,this.onWindowMove));$window.onRender.add($bind(this,this.render));$window.onResize.add($bind(this,this.onWindowResize));$window.onRestore.add($bind(this,this.onWindowRestore));$window.onTextEdit.add($bind(this,this.onTextEdit));$window.onTextInput.add($bind(this,this.onTextInput))}this.onCreateWindow.dispatch($window);return $window},__class__:openfl_display_Application});var openfl_display__$CapsStyle_CapsStyle_$Impl_$={};$hxClasses["openfl.display._CapsStyle.CapsStyle_Impl_"]=openfl_display__$CapsStyle_CapsStyle_$Impl_$;openfl_display__$CapsStyle_CapsStyle_$Impl_$.__name__="openfl.display._CapsStyle.CapsStyle_Impl_";openfl_display__$CapsStyle_CapsStyle_$Impl_$.toString=function(this1){switch(this1){case 0:return"none";case 1:return"round";case 2:return"square";default:return null}};var openfl_display_DOMElement=function(element){openfl_display_DisplayObject.call(this);this.__element=element;this.__type=openfl__$internal_renderer_DisplayObjectType.DOM_ELEMENT};$hxClasses["openfl.display.DOMElement"]=openfl_display_DOMElement;openfl_display_DOMElement.__name__="openfl.display.DOMElement";openfl_display_DOMElement.__super__=openfl_display_DisplayObject;openfl_display_DOMElement.prototype=$extend(openfl_display_DisplayObject.prototype,{__active:null,__element:null,__class__:openfl_display_DOMElement});var openfl_display_DisplayObjectShader=function(code){if(this.__glFragmentSource==null){this.__glFragmentSource="varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}"}openfl_display_Shader.call(this,code);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.display.DisplayObjectShader"]=openfl_display_DisplayObjectShader;openfl_display_DisplayObjectShader.__name__="openfl.display.DisplayObjectShader";openfl_display_DisplayObjectShader.__super__=openfl_display_Shader;openfl_display_DisplayObjectShader.prototype=$extend(openfl_display_Shader.prototype,{openfl_Alpha:null,openfl_ColorMultiplier:null,openfl_ColorOffset:null,openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_HasColorTransform:null,openfl_TextureSize:null,openfl_Texture:null,__class__:openfl_display_DisplayObjectShader});var openfl_display_FrameLabel=function(name,frame){openfl_events_EventDispatcher.call(this);this.__name=name;this.__frame=frame};$hxClasses["openfl.display.FrameLabel"]=openfl_display_FrameLabel;openfl_display_FrameLabel.__name__="openfl.display.FrameLabel";openfl_display_FrameLabel.__super__=openfl_events_EventDispatcher;openfl_display_FrameLabel.prototype=$extend(openfl_events_EventDispatcher.prototype,{__frame:null,__name:null,get_frame:function(){return this.__frame},get_name:function(){return this.__name},__class__:openfl_display_FrameLabel,__properties__:{get_name:"get_name",get_frame:"get_frame"}});var openfl_display_Graphics=function(owner){this.__dirty=true;this.__owner=owner;this.__commands=new openfl__$internal_renderer_DrawCommandBuffer;this.__strokePadding=0;this.__positionX=0;this.__positionY=0;this.__renderTransform=new openfl_geom_Matrix;this.__usedShaderBuffers=new haxe_ds_List;this.__worldTransform=new openfl_geom_Matrix;this.__width=0;this.__height=0;this.__shaderBufferPool=new lime_utils_ObjectPool(function(){return new openfl__$internal_renderer_ShaderBuffer});this.moveTo(0,0)};$hxClasses["openfl.display.Graphics"]=openfl_display_Graphics;openfl_display_Graphics.__name__="openfl.display.Graphics";openfl_display_Graphics.prototype={__bounds:null,__commands:null,__dirty:null,__hardwareDirty:null,__height:null,__positionX:null,__positionY:null,__quadBuffer:null,__renderTransform:null,__shaderBufferPool:null,__softwareDirty:null,__strokePadding:null,__transformDirty:null,__usedShaderBuffers:null,__vertexBuffer:null,__vertexBufferCount:null,__vertexBufferCountUVT:null,__vertexBufferData:null,__vertexBufferDataUVT:null,__vertexBufferUVT:null,__visible:null,__owner:null,__width:null,__worldTransform:null,__canvas:null,__context:null,__bitmap:null,beginBitmapFill:function(bitmap,matrix,repeat,smooth){if(smooth==null){smooth=false}if(repeat==null){repeat=true}this.__commands.beginBitmapFill(bitmap,matrix!=null?matrix.clone():null,repeat,smooth);this.__visible=true},beginFill:function(color,alpha){if(alpha==null){alpha=1}if(color==null){color=0}this.__commands.beginFill(color&16777215,alpha);if(alpha>0){this.__visible=true}},beginGradientFill:function(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio){if(focalPointRatio==null){focalPointRatio=0}if(interpolationMethod==null){interpolationMethod=1}if(spreadMethod==null){spreadMethod=0}if(colors==null||colors.length==0){return}if(alphas==null){alphas=[];var _g=0;var _g1=colors.length;while(_g<_g1){++_g;alphas.push(1)}}if(ratios==null){ratios=[];var _g2=0;var _g11=colors.length;while(_g2<_g11)ratios.push(Math.ceil(_g2++/colors.length*255))}if(alphas.length<colors.length||ratios.length<colors.length){return}this.__commands.beginGradientFill(type,colors,alphas,ratios,matrix,spreadMethod,interpolationMethod,focalPointRatio);var _g3=0;while(_g3<alphas.length)if(alphas[_g3++]>0){this.__visible=true;break}},clear:function(){var _g_head=this.__usedShaderBuffers.h;while(_g_head!=null){var val=_g_head.item;_g_head=_g_head.next;this.__shaderBufferPool.release(val)}this.__usedShaderBuffers.clear();this.__commands.clear();this.__strokePadding=0;if(this.__bounds!=null){this.set___dirty(true);this.__transformDirty=true;this.__bounds=null}this.__visible=false;this.__positionX=0;this.__positionY=0;this.moveTo(0,0)},copyFrom:function(sourceGraphics){this.__bounds=sourceGraphics.__bounds!=null?sourceGraphics.__bounds.clone():null;this.__commands=sourceGraphics.__commands.copy();this.set___dirty(true);this.__strokePadding=sourceGraphics.__strokePadding;this.__positionX=sourceGraphics.__positionX;this.__positionY=sourceGraphics.__positionY;this.__transformDirty=true;this.__visible=sourceGraphics.__visible},curveTo:function(controlX,controlY,anchorX,anchorY){this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding);var ix;var iy;if(controlX<anchorX&&controlX>this.__positionX||controlX>anchorX&&controlX<this.__positionX){ix=anchorX}else{ix=this.__calculateBezierQuadPoint((this.__positionX-controlX)/(this.__positionX-2*controlX+anchorX),this.__positionX,controlX,anchorX)}if(controlY<anchorY&&controlY>this.__positionY||controlY>anchorY&&controlY<this.__positionY){iy=anchorY}else{iy=this.__calculateBezierQuadPoint((this.__positionY-controlY)/(this.__positionY-2*controlY+anchorY),this.__positionY,controlY,anchorY)}this.__inflateBounds(ix-this.__strokePadding,iy-this.__strokePadding);this.__inflateBounds(ix+this.__strokePadding,iy+this.__strokePadding);this.__positionX=anchorX;this.__positionY=anchorY;this.__commands.curveTo(controlX,controlY,anchorX,anchorY);this.set___dirty(true)},drawCircle:function(x,y,radius){if(radius<=0){return}this.__inflateBounds(x-radius-this.__strokePadding,y-radius-this.__strokePadding);this.__inflateBounds(x+radius+this.__strokePadding,y+radius+this.__strokePadding);this.__commands.drawCircle(x,y,radius);this.set___dirty(true)},drawRect:function(x,y,width,height){if(width==0&&height==0){return}var xSign=width<0?-1:1;var ySign=height<0?-1:1;this.__inflateBounds(x-this.__strokePadding*xSign,y-this.__strokePadding*ySign);this.__inflateBounds(x+width+this.__strokePadding*xSign,y+height+this.__strokePadding*ySign);this.__commands.drawRect(x,y,width,height);this.set___dirty(true)},endFill:function(){this.__commands.endFill()},lineStyle:function(thickness,color,alpha,pixelHinting,scaleMode,caps,joints,miterLimit){if(miterLimit==null){miterLimit=3}if(scaleMode==null){scaleMode=2}if(pixelHinting==null){pixelHinting=false}if(alpha==null){alpha=1}if(color==null){color=0}if(thickness!=null){if(joints==1){if(thickness>this.__strokePadding){this.__strokePadding=thickness}}else if(thickness/2>this.__strokePadding){this.__strokePadding=thickness/2}}this.__commands.lineStyle(thickness,color,alpha,pixelHinting,scaleMode,caps,joints,miterLimit);if(thickness!=null){this.__visible=true}},lineTo:function(x,y){if(!isFinite(x)||!isFinite(y)){return}this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding);this.__positionX=x;this.__positionY=y;this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding*2,this.__positionY+this.__strokePadding);this.__commands.lineTo(x,y);this.set___dirty(true)},moveTo:function(x,y){this.__positionX=x;this.__positionY=y;this.__commands.moveTo(x,y)},__calculateBezierQuadPoint:function(t,p1,p2,p3){var iT=1-t;return iT*iT*p1+2*iT*t*p2+t*t*p3},__cleanup:function(){if(this.__bounds!=null&&this.__canvas!=null){this.set___dirty(true);this.__transformDirty=true}this.__bitmap=null;this.__canvas=null;this.__context=null},__getBounds:function(rect,matrix){if(this.__bounds==null){return}var bounds=openfl_geom_Rectangle.__pool.get();this.__bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)},__hitTest:function(x,y,shapeFlag,matrix){if(this.__bounds==null){return false}var norm=matrix.a*matrix.d-matrix.b*matrix.c;var px=norm==0?-matrix.tx:1/norm*(matrix.c*(matrix.ty-y)+matrix.d*(x-matrix.tx));var norm1=matrix.a*matrix.d-matrix.b*matrix.c;var py=norm1==0?-matrix.ty:1/norm1*(matrix.a*(y-matrix.ty)+matrix.b*(matrix.tx-x));if(px>this.__bounds.x&&py>this.__bounds.y&&this.__bounds.contains(px,py)){if(shapeFlag){return openfl__$internal_renderer_canvas_CanvasGraphics.hitTest(this,px,py)}return true}return false},__inflateBounds:function(x,y){if(this.__bounds==null){this.__bounds=new openfl_geom_Rectangle(x,y,0,0);this.__transformDirty=true;return}if(x<this.__bounds.x){this.__bounds.width+=this.__bounds.x-x;this.__bounds.x=x;this.__transformDirty=true}if(y<this.__bounds.y){this.__bounds.height+=this.__bounds.y-y;this.__bounds.y=y;this.__transformDirty=true}if(x>this.__bounds.x+this.__bounds.width){this.__bounds.width=x-this.__bounds.x}if(y>this.__bounds.y+this.__bounds.height){this.__bounds.height=y-this.__bounds.y}},__update:function(displayMatrix){if(this.__bounds==null||this.__bounds.width<=0||this.__bounds.height<=0){return}var parentTransform=this.__owner.__renderTransform;var scaleX=1;var scaleY=1;if(parentTransform!=null){if(parentTransform.b==0){scaleX=Math.abs(parentTransform.a)}else{scaleX=Math.sqrt(parentTransform.a*parentTransform.a+parentTransform.b*parentTransform.b)}if(parentTransform.c==0){scaleY=Math.abs(parentTransform.d)}else{scaleY=Math.sqrt(parentTransform.c*parentTransform.c+parentTransform.d*parentTransform.d)}}else{return}if(displayMatrix!=null){if(displayMatrix.b==0){scaleX*=displayMatrix.a}else{scaleX*=Math.sqrt(displayMatrix.a*displayMatrix.a+displayMatrix.b*displayMatrix.b)}if(displayMatrix.c==0){scaleY*=displayMatrix.d}else{scaleY*=Math.sqrt(displayMatrix.c*displayMatrix.c+displayMatrix.d*displayMatrix.d)}}var width=this.__bounds.width*scaleX;var height=this.__bounds.height*scaleY;if(width<1||height<1){if(this.__width>=1||this.__height>=1){this.set___dirty(true)}this.__width=0;this.__height=0;return}if(openfl_display_Graphics.maxTextureWidth!=null&&width>openfl_display_Graphics.maxTextureWidth){width=openfl_display_Graphics.maxTextureWidth;scaleX=openfl_display_Graphics.maxTextureWidth/this.__bounds.width}if(openfl_display_Graphics.maxTextureWidth!=null&&height>openfl_display_Graphics.maxTextureHeight){height=openfl_display_Graphics.maxTextureHeight;scaleY=openfl_display_Graphics.maxTextureHeight/this.__bounds.height}this.__renderTransform.a=width/this.__bounds.width;this.__renderTransform.d=height/this.__bounds.height;var inverseA=1/this.__renderTransform.a;var inverseD=1/this.__renderTransform.d;this.__worldTransform.a=inverseA*parentTransform.a;this.__worldTransform.b=inverseA*parentTransform.b;this.__worldTransform.c=inverseD*parentTransform.c;this.__worldTransform.d=inverseD*parentTransform.d;var x=this.__bounds.x;var y=this.__bounds.y;var tx=x*parentTransform.a+y*parentTransform.c+parentTransform.tx;var ty=x*parentTransform.b+y*parentTransform.d+parentTransform.ty;this.__worldTransform.tx=Math.floor(tx);this.__worldTransform.ty=Math.floor(ty);var _this=this.__worldTransform;var norm=_this.a*_this.d-_this.b*_this.c;this.__renderTransform.tx=norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-ty)+_this.d*(tx-_this.tx));var _this1=this.__worldTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;this.__renderTransform.ty=norm1==0?-_this1.ty:1/norm1*(_this1.a*(ty-_this1.ty)+_this1.b*(_this1.tx-tx));var newWidth=Math.ceil(width+1);var newHeight=Math.ceil(height+1);if(newWidth!=this.__width||newHeight!=this.__height){this.set___dirty(true)}this.__width=newWidth;this.__height=newHeight},set___dirty:function(value){if(value&&this.__owner!=null){var _this=this.__owner;if(!_this.__renderDirty){_this.__renderDirty=true;_this.__setParentRenderDirty()}}if(value){this.__softwareDirty=true;this.__hardwareDirty=true}return this.__dirty=value},__class__:openfl_display_Graphics,__properties__:{set___dirty:"set___dirty"}};var openfl_display_GraphicsShader=function(code){if(this.__glFragmentSource==null){this.__glFragmentSource="varying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform sampler2D bitmap;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (bitmap, openfl_TextureCoordv);\n\n\t\tif (color.a == 0.0) {\n\n\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t} else if (openfl_HasColorTransform) {\n\n\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\n\t\t\tmat4 colorMultiplier = mat4 (0);\n\t\t\tcolorMultiplier[0][0] = openfl_ColorMultiplierv.x;\n\t\t\tcolorMultiplier[1][1] = openfl_ColorMultiplierv.y;\n\t\t\tcolorMultiplier[2][2] = openfl_ColorMultiplierv.z;\n\t\t\tcolorMultiplier[3][3] = 1.0; // openfl_ColorMultiplierv.w;\n\n\t\t\tcolor = clamp (openfl_ColorOffsetv + (color * colorMultiplier), 0.0, 1.0);\n\n\t\t\tif (color.a > 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a * openfl_Alphav, color.a * openfl_Alphav);\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl_FragColor = color * openfl_Alphav;\n\n\t\t}\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute float openfl_Alpha;\n\t\tattribute vec4 openfl_ColorMultiplier;\n\t\tattribute vec4 openfl_ColorOffset;\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying float openfl_Alphav;\n\t\tvarying vec4 openfl_ColorMultiplierv;\n\t\tvarying vec4 openfl_ColorOffsetv;\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform bool openfl_HasColorTransform;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_Alphav = openfl_Alpha;\n\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tif (openfl_HasColorTransform) {\n\n\t\t\topenfl_ColorMultiplierv = openfl_ColorMultiplier;\n\t\t\topenfl_ColorOffsetv = openfl_ColorOffset / 255.0;\n\n\t\t}\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}"}openfl_display_Shader.call(this,code);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.display.GraphicsShader"]=openfl_display_GraphicsShader;openfl_display_GraphicsShader.__name__="openfl.display.GraphicsShader";openfl_display_GraphicsShader.__super__=openfl_display_Shader;openfl_display_GraphicsShader.prototype=$extend(openfl_display_Shader.prototype,{openfl_Alpha:null,openfl_ColorMultiplier:null,openfl_ColorOffset:null,openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_HasColorTransform:null,openfl_TextureSize:null,bitmap:null,__class__:openfl_display_GraphicsShader});var openfl_display__$JointStyle_JointStyle_$Impl_$={};$hxClasses["openfl.display._JointStyle.JointStyle_Impl_"]=openfl_display__$JointStyle_JointStyle_$Impl_$;openfl_display__$JointStyle_JointStyle_$Impl_$.__name__="openfl.display._JointStyle.JointStyle_Impl_";openfl_display__$JointStyle_JointStyle_$Impl_$.toString=function(this1){switch(this1){case 0:return"bevel";case 1:return"miter";case 2:return"round";default:return null}};var openfl_display_Loader=function(){openfl_display_DisplayObjectContainer.call(this);this.contentLoaderInfo=openfl_display_LoaderInfo.create(this);this.uncaughtErrorEvents=this.contentLoaderInfo.uncaughtErrorEvents;this.__unloaded=true};$hxClasses["openfl.display.Loader"]=openfl_display_Loader;openfl_display_Loader.__name__="openfl.display.Loader";openfl_display_Loader.__super__=openfl_display_DisplayObjectContainer;openfl_display_Loader.prototype=$extend(openfl_display_DisplayObjectContainer.prototype,{contentLoaderInfo:null,uncaughtErrorEvents:null,__unloaded:null,addChild:function(child){throw new js__$Boot_HaxeError(new openfl_errors_Error("Error #2069: The Loader class does not implement this method.",2069))},addChildAt:function(child,index){throw new js__$Boot_HaxeError(new openfl_errors_Error("Error #2069: The Loader class does not implement this method.",2069))},removeChild:function(child){throw new js__$Boot_HaxeError(new openfl_errors_Error("Error #2069: The Loader class does not implement this method.",2069))},__class__:openfl_display_Loader});var openfl_display_LoaderInfo=function(){openfl_events_EventDispatcher.call(this);this.applicationDomain=openfl_system_ApplicationDomain.currentDomain;this.bytesLoaded=0;this.bytesTotal=0;this.childAllowsParent=true;this.parameters={}};$hxClasses["openfl.display.LoaderInfo"]=openfl_display_LoaderInfo;openfl_display_LoaderInfo.__name__="openfl.display.LoaderInfo";openfl_display_LoaderInfo.create=function(loader){var loaderInfo=new openfl_display_LoaderInfo;loaderInfo.uncaughtErrorEvents=new openfl_events_UncaughtErrorEvents;if(loader!=null){loaderInfo.loader=loader}else{loaderInfo.url=openfl_display_LoaderInfo.__rootURL}return loaderInfo};openfl_display_LoaderInfo.__super__=openfl_events_EventDispatcher;openfl_display_LoaderInfo.prototype=$extend(openfl_events_EventDispatcher.prototype,{applicationDomain:null,bytesLoaded:null,bytesTotal:null,childAllowsParent:null,content:null,loader:null,parameters:null,uncaughtErrorEvents:null,url:null,__completed:null,__complete:function(){if(!this.__completed){if(this.bytesLoaded<this.bytesTotal){this.bytesLoaded=this.bytesTotal}this.__update(this.bytesLoaded,this.bytesTotal);this.__completed=true;this.dispatchEvent(new openfl_events_Event("complete"))}},__update:function(bytesLoaded,bytesTotal){this.bytesLoaded=bytesLoaded;this.bytesTotal=bytesTotal;this.dispatchEvent(new openfl_events_ProgressEvent("progress",false,false,bytesLoaded,bytesTotal))},__class__:openfl_display_LoaderInfo});var openfl_display_MovieClip=function(){openfl_display_Sprite.call(this);this.__currentFrame=1;this.__currentLabels=[];this.__instanceFields=[];this.__totalFrames=0;this.__enabled=true;if(openfl_display_MovieClip.__constructor!=null){var method=openfl_display_MovieClip.__constructor;openfl_display_MovieClip.__constructor=null;method(this)}else if(openfl_display_MovieClip.__initSymbol!=null){this.__swf=openfl_display_MovieClip.__initSWF;this.__symbol=openfl_display_MovieClip.__initSymbol;openfl_display_MovieClip.__initSWF=null;openfl_display_MovieClip.__initSymbol=null;this.__fromSymbol(this.__swf,this.__symbol)}};$hxClasses["openfl.display.MovieClip"]=openfl_display_MovieClip;openfl_display_MovieClip.__name__="openfl.display.MovieClip";openfl_display_MovieClip.__super__=openfl_display_Sprite;openfl_display_MovieClip.prototype=$extend(openfl_display_Sprite.prototype,{__activeInstances:null,__activeInstancesByFrameObjectID:null,__currentFrame:null,__currentFrameLabel:null,__currentLabel:null,__currentLabels:null,__enabled:null,__frameScripts:null,__frameTime:null,__hasDown:null,__hasOver:null,__hasUp:null,__instanceFields:null,__lastFrameScriptEval:null,__lastFrameUpdate:null,__mouseIsDown:null,__playing:null,__swf:null,__symbol:null,__timeElapsed:null,__timeline:null,__totalFrames:null,gotoAndPlay:function(frame,scene){if(this.__timeline!=null){this.__timeline.gotoAndPlay(frame,scene)}else{this.play();this.__goto(this.__resolveFrameReference(frame))}},gotoAndStop:function(frame,scene){if(this.__timeline!=null){this.__timeline.gotoAndStop(frame,scene)}else{this.stop();this.__goto(this.__resolveFrameReference(frame))}},play:function(){if(this.__timeline!=null){this.__timeline.play()}else{if(this.__symbol==null||this.__playing||this.__totalFrames<2){return}this.__playing=true;this.__frameTime=1e3/this.__swf.frameRate|0;this.__timeElapsed=0}},stop:function(){if(this.__timeline!=null){this.__timeline.stop()}else{this.__playing=false}},__enterFrame:function(deltaTime){if(this.__timeline!=null){this.__timeline.enterFrame(deltaTime)}else{this.__updateFrameScript(deltaTime);this.__updateSymbol(this.__currentFrame);openfl_display_Sprite.prototype.__enterFrame.call(this,deltaTime)}},__updateFrameScript:function(deltaTime){if(this.__symbol!=null&&this.__playing){var nextFrame=this.__getNextFrame(deltaTime);if(this.__lastFrameScriptEval==nextFrame){openfl_display_Sprite.prototype.__enterFrame.call(this,deltaTime);return}if(this.__frameScripts!=null){if(nextFrame<this.__currentFrame){if(!this.__evaluateFrameScripts(this.__totalFrames)){openfl_display_Sprite.prototype.__enterFrame.call(this,deltaTime);return}this.__currentFrame=1}if(!this.__evaluateFrameScripts(nextFrame)){openfl_display_Sprite.prototype.__enterFrame.call(this,deltaTime);return}}else{this.__currentFrame=nextFrame}}},__updateSymbol:function(targetFrame){if(this.__symbol!=null&&this.__currentFrame!=this.__lastFrameUpdate){this.__updateFrameLabel();var currentInstancesByFrameObjectID=new haxe_ds_IntMap;var frameData;var instance;var _g=0;while(_g<targetFrame){frameData=this.__symbol.frames[_g++];if(frameData.objects==null){continue}var _g1=0;var _g11=frameData.objects;while(_g1<_g11.length){var frameObject=_g11[_g1];++_g1;switch(frameObject.type._hx_index){case 0:instance=this.__activeInstancesByFrameObjectID.h[frameObject.id];if(instance!=null){currentInstancesByFrameObjectID.h[frameObject.id]=instance;this.__updateDisplayObject(instance.displayObject,frameObject,true)}break;case 1:instance=currentInstancesByFrameObjectID.h[frameObject.id];if(instance!=null&&instance.displayObject!=null){this.__updateDisplayObject(instance.displayObject,frameObject)}break;case 2:currentInstancesByFrameObjectID.remove(frameObject.id);break}}}var currentInstances=[];var currentMasks=[];var instance1=currentInstancesByFrameObjectID.iterator();while(instance1.hasNext()){var instance2=instance1.next();if(currentInstances.indexOf(instance2)==-1){currentInstances.push(instance2);if(instance2.clipDepth>0){currentMasks.push(instance2)}}}currentInstances.sort($bind(this,this.__sortDepths));var existingChild;var targetDepth;var targetChild;var child;var maskApplied;var _g2=0;var _g3=currentInstances.length;while(_g2<_g3){var i=_g2++;existingChild=this.__children[i];instance=currentInstances[i];targetDepth=instance.depth;targetChild=instance.displayObject;if(existingChild!=targetChild){child=targetChild;this.addChildAt(targetChild,i)}else{child=this.__children[i]}maskApplied=false;var _g21=0;while(_g21<currentMasks.length){var mask=currentMasks[_g21];++_g21;if(targetDepth>mask.depth&&targetDepth<=mask.clipDepth){child.set_mask(mask.displayObject);maskApplied=true;break}}if(currentMasks.length>0&&!maskApplied&&child.get_mask()!=null){child.set_mask(null)}}var child1;var i1=currentInstances.length;var length=this.__children.length;while(i1<length){child1=this.__children[i1];var _g4=0;var _g5=this.__activeInstances;while(_g4<_g5.length)if(_g5[_g4++].displayObject==child1){if(child1 instanceof openfl_display_MovieClip){child1.gotoAndPlay(1)}this.removeChild(child1);--i1;--length}++i1}this.__lastFrameUpdate=this.__currentFrame;this.__updateInstanceFields()}},__evaluateFrameScripts:function(advanceToFrame){var _g=this.__currentFrame;var _g1=advanceToFrame+1;while(_g<_g1){var frame=_g++;if(frame==this.__lastFrameScriptEval){continue}this.__lastFrameScriptEval=frame;this.__currentFrame=frame;if(this.__frameScripts.h.hasOwnProperty(frame)){this.__updateSymbol(frame);this.__frameScripts.h[frame]();if(this.__currentFrame!=frame){return false}}if(!this.__playing){return false}}return true},__fromSymbol:function(swf,symbol){var _gthis=this;if(this.__activeInstances!=null){return}this.__swf=swf;this.__symbol=symbol;this.__activeInstances=[];this.__activeInstancesByFrameObjectID=new haxe_ds_IntMap;this.__currentFrame=1;this.__lastFrameScriptEval=-1;this.__lastFrameUpdate=-1;this.__totalFrames=this.__symbol.frames.length;var frame;var frameData;var _g=0;var _g1=this.__symbol.frames.length;while(_g<_g1){var i=_g++;frame=i+1;frameData=this.__symbol.frames[i];if(frameData.label!=null){this.__currentLabels.push(new openfl_display_FrameLabel(frameData.label,i+1))}if(frameData.script!=null){if(this.__frameScripts==null){this.__frameScripts=new haxe_ds_IntMap}this.__frameScripts.h[frame]=frameData.script}else if(frameData.scriptSource!=null){if(this.__frameScripts==null){this.__frameScripts=new haxe_ds_IntMap}try{var script=[eval("(function(){"+frameData.scriptSource+"})")];var wrapper=function(script1){return function(){try{script1[0].call(_gthis)}catch(e){haxe_CallStack.lastException=e;var e1=e instanceof js__$Boot_HaxeError?e.val:e;var wrapper1="Error evaluating frame script\n "+Std.string(e1)+"\n";var _this=haxe_CallStack.exceptionStack();var result=new Array(_this.length);var _g2=0;var _g11=_this.length;while(_g2<_g11){var i1=_g2++;result[i1]=_this[i1][2]}lime_utils_Log.info(wrapper1+result.join("\n")+"\n"+Std.string(e1.stack)+"\n"+script1[0].toString(),{fileName:"openfl/display/MovieClip.hx",lineNumber:723,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}}}(script);this.__frameScripts.h[frame]=wrapper}catch(e2){haxe_CallStack.lastException=e2;var e3=e2 instanceof js__$Boot_HaxeError?e2.val:e2;if(this.__symbol.className!=null){lime_utils_Log.warn('Unable to evaluate frame script source for symbol "'+this.__symbol.className+'" frame '+frame+"\n"+frameData.scriptSource,{fileName:"openfl/display/MovieClip.hx",lineNumber:744,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}else{lime_utils_Log.warn("Unable to evaluate frame script source:\n"+frameData.scriptSource,{fileName:"openfl/display/MovieClip.hx",lineNumber:749,className:"openfl.display.MovieClip",methodName:"__fromSymbol"})}}}}var frame1;var frameData1;var instance;var duplicate;var symbol1;var displayObject;var _g21=0;var _g3=this.__totalFrames;while(_g21<_g3){var i2=_g21++;frame1=i2+1;frameData1=this.__symbol.frames[i2];if(frameData1.objects==null){continue}var _g22=0;var _g31=frameData1.objects;while(_g22<_g31.length){var frameObject=_g31[_g22];++_g22;if(frameObject.type==openfl__$internal_symbols_timeline_FrameObjectType.CREATE){if(this.__activeInstancesByFrameObjectID.h.hasOwnProperty(frameObject.id)){continue}else{instance=null;duplicate=false;var _g23=0;var _g32=this.__activeInstances;while(_g23<_g32.length){var activeInstance=_g32[_g23];++_g23;if(activeInstance.displayObject!=null&&activeInstance.characterID==frameObject.symbol&&activeInstance.depth==frameObject.depth){instance=activeInstance;duplicate=true;break}}}if(instance==null){symbol1=this.__swf.symbols.h[frameObject.symbol];if(symbol1!=null){displayObject=symbol1.__createObject(this.__swf);if(displayObject!=null){displayObject.parent=this;displayObject.stage=this.stage;if(this.stage!=null){displayObject.dispatchEvent(new openfl_events_Event("addedToStage",false,false))}instance=new openfl_display__$MovieClip_FrameSymbolInstance(frame1,frameObject.id,frameObject.symbol,frameObject.depth,displayObject,frameObject.clipDepth)}}}if(instance!=null){this.__activeInstancesByFrameObjectID.h[frameObject.id]=instance;if(!duplicate){this.__activeInstances.push(instance);this.__updateDisplayObject(instance.displayObject,frameObject)}}}}}if(this.__totalFrames>1){this.play()}this.__enterFrame(0);this.__instanceFields=Type.getInstanceFields(js_Boot.getClass(this));this.__updateInstanceFields()},__getNextFrame:function(deltaTime){var nextFrame=0;this.__timeElapsed+=deltaTime;nextFrame=this.__currentFrame+Math.floor(this.__timeElapsed/this.__frameTime);if(nextFrame<1){nextFrame=1}if(nextFrame>this.__totalFrames){nextFrame=Math.floor((nextFrame-1)%this.__totalFrames)+1}this.__timeElapsed%=this.__frameTime;return nextFrame},__goto:function(frame){if(this.__timeline==null&&this.__symbol==null){return}if(frame<1){frame=1}else if(frame>this.__totalFrames){frame=this.__totalFrames}this.__currentFrame=frame;this.__enterFrame(0)},__resolveFrameReference:function(frame){if(typeof frame=="number"&&(frame|0)===frame){return frame}else if(typeof frame=="string"){var label=frame;var _g=0;var _g1=this.__currentLabels;while(_g<_g1.length){var frameLabel=_g1[_g];++_g;if(frameLabel.get_name()==label){return frameLabel.get_frame()}}throw new js__$Boot_HaxeError(new openfl_errors_ArgumentError("Error #2109: Frame label "+label+" not found in scene."))}else{throw new js__$Boot_HaxeError("Invalid type for frame "+frame.__name__)}},__sortDepths:function(a,b){return a.depth-b.depth},__tabTest:function(stack){if(!this.__enabled){return}openfl_display_Sprite.prototype.__tabTest.call(this,stack)},__updateDisplayObject:function(displayObject,frameObject,reset){if(reset==null){reset=false}if(displayObject==null){return}if(frameObject.name!=null){displayObject.set_name(frameObject.name)}if(frameObject.matrix!=null){displayObject.get_transform().set_matrix(frameObject.matrix)}if(frameObject.colorTransform!=null){displayObject.get_transform().set_colorTransform(frameObject.colorTransform)}else if(reset&&!displayObject.get_transform().get_colorTransform().__isDefault(true)){displayObject.get_transform().set_colorTransform(new openfl_geom_ColorTransform)}displayObject.set_transform(displayObject.get_transform());if(frameObject.filters!=null){var filters=[];var _g=0;var _g1=frameObject.filters;while(_g<_g1.length){var filter=_g1[_g];++_g;switch(filter._hx_index){case 0:filters.push(new openfl_filters_BlurFilter(filter.blurX,filter.blurY,filter.quality));break;case 1:filters.push(new openfl_filters_ColorMatrixFilter(filter.matrix));break;case 2:filters.push(new openfl_filters_DropShadowFilter(filter.distance,filter.angle,filter.color,filter.alpha,filter.blurX,filter.blurY,filter.strength,filter.quality,filter.inner,filter.knockout,filter.hideObject));break;case 3:filters.push(new openfl_filters_GlowFilter(filter.color,filter.alpha,filter.blurX,filter.blurY,filter.strength,filter.quality,filter.inner,filter.knockout));break}}displayObject.set_filters(filters)}else{displayObject.set_filters(null)}if(frameObject.visible!=null){displayObject.set_visible(frameObject.visible)}if(frameObject.blendMode!=null){displayObject.set_blendMode(frameObject.blendMode)}if(frameObject.cacheAsBitmap!=null){displayObject.set_cacheAsBitmap(frameObject.cacheAsBitmap)}},__updateFrameLabel:function(){this.__currentFrameLabel=this.__symbol.frames[this.__currentFrame-1].label;if(this.__currentFrameLabel!=null){this.__currentLabel=this.__currentFrameLabel}else{this.__currentLabel=null;var _g=0;var _g1=this.__currentLabels;while(_g<_g1.length){var label=_g1[_g];++_g;if(label.get_frame()<this.__currentFrame){this.__currentLabel=label.get_name()}else{break}}}},__updateInstanceFields:function(){var _g=0;var _g1=this.__instanceFields;while(_g<_g1.length){var field=_g1[_g];++_g;var _g2=0;var _g11=this.__children;while(_g2<_g11.length){var child=_g11[_g2];++_g2;if(child.get_name()==field){this[field]=child;break}}}},__onMouseDown:function(event){if(this.__enabled&&this.__hasDown){this.gotoAndStop("_down")}this.__mouseIsDown=true;this.stage.addEventListener("mouseUp",$bind(this,this.__onMouseUp),true)},__onMouseUp:function(event){this.__mouseIsDown=false;if(this.stage!=null){this.stage.removeEventListener("mouseUp",$bind(this,this.__onMouseUp))}if(event.target==this&&this.__enabled&&this.__hasOver){this.gotoAndStop("_over")}else if(this.__enabled&&this.__hasUp){this.gotoAndStop("_up")}},__onRollOut:function(event){if(!this.__enabled){return}if(this.__mouseIsDown&&this.__hasOver){this.gotoAndStop("_over")}else if(this.__hasUp){this.gotoAndStop("_up")}},__onRollOver:function(event){if(this.__enabled&&this.__hasOver){this.gotoAndStop("_over")}},set_buttonMode:function(value){if(this.__buttonMode!=value){if(value){this.__hasDown=false;this.__hasOver=false;this.__hasUp=false;var _g=0;var _g1=this.__currentLabels;while(_g<_g1.length)switch(_g1[_g++].get_name()){case"_down":this.__hasDown=true;break;case"_over":this.__hasOver=true;break;case"_up":this.__hasUp=true;break;default:}if(this.__hasDown||this.__hasOver||this.__hasUp){this.addEventListener("rollOver",$bind(this,this.__onRollOver));this.addEventListener("rollOut",$bind(this,this.__onRollOut));this.addEventListener("mouseDown",$bind(this,this.__onMouseDown))}}else{this.removeEventListener("rollOver",$bind(this,this.__onRollOver));this.removeEventListener("rollOut",$bind(this,this.__onRollOut));this.removeEventListener("mouseDown",$bind(this,this.__onMouseDown))}this.__buttonMode=value}return value},__class__:openfl_display_MovieClip});var openfl_display__$MovieClip_FrameSymbolInstance=function(initFrame,initFrameObjectID,characterID,depth,displayObject,clipDepth){this.initFrame=initFrame;this.initFrameObjectID=initFrameObjectID;this.characterID=characterID;this.depth=depth;this.displayObject=displayObject;this.clipDepth=clipDepth};$hxClasses["openfl.display._MovieClip.FrameSymbolInstance"]=openfl_display__$MovieClip_FrameSymbolInstance;openfl_display__$MovieClip_FrameSymbolInstance.__name__="openfl.display._MovieClip.FrameSymbolInstance";openfl_display__$MovieClip_FrameSymbolInstance.prototype={characterID:null,clipDepth:null,depth:null,displayObject:null,initFrame:null,initFrameObjectID:null,__class__:openfl_display__$MovieClip_FrameSymbolInstance};var openfl_display_DefaultPreloader=function(){openfl_display_Sprite.call(this);var backgroundColor=this.getBackgroundColor();var color=0;if(.299*(backgroundColor>>16&255)+.587*(backgroundColor>>8&255)+.114*(backgroundColor&255)<70){color=16777215}var y=this.getHeight()/2-3.5;var width=this.getWidth()-60;this.outline=new openfl_display_Sprite;this.outline.get_graphics().beginFill(color,.07);this.outline.get_graphics().drawRect(0,0,width,7);this.outline.set_x(30);this.outline.set_y(y);this.outline.set_alpha(0);this.addChild(this.outline);this.progress=new openfl_display_Sprite;this.progress.get_graphics().beginFill(color,.35);this.progress.get_graphics().drawRect(0,0,width-4,3);this.progress.set_x(32);this.progress.set_y(y+2);this.progress.set_scaleX(0);this.progress.set_alpha(0);this.addChild(this.progress);this.startAnimation=openfl_Lib.getTimer()+100;this.endAnimation=this.startAnimation+1e3;this.addEventListener("addedToStage",$bind(this,this.this_onAddedToStage))};$hxClasses["openfl.display.DefaultPreloader"]=openfl_display_DefaultPreloader;openfl_display_DefaultPreloader.__name__="openfl.display.DefaultPreloader";openfl_display_DefaultPreloader.__super__=openfl_display_Sprite;openfl_display_DefaultPreloader.prototype=$extend(openfl_display_Sprite.prototype,{endAnimation:null,outline:null,progress:null,startAnimation:null,getBackgroundColor:function(){var attributes=openfl_Lib.get_current().stage.window.context.attributes;if(Object.prototype.hasOwnProperty.call(attributes,"background")&&attributes.background!=null){return attributes.background}else{return 0}},getHeight:function(){var height=openfl_Lib.get_current().stage.window.__height;if(height>0){return height}else{return openfl_Lib.get_current().stage.stageHeight}},getWidth:function(){var width=openfl_Lib.get_current().stage.window.__width;if(width>0){return width}else{return openfl_Lib.get_current().stage.stageWidth}},onInit:function(){this.addEventListener("enterFrame",$bind(this,this.this_onEnterFrame))},onLoaded:function(){this.removeEventListener("enterFrame",$bind(this,this.this_onEnterFrame));this.dispatchEvent(new openfl_events_Event("unload"))},onUpdate:function(bytesLoaded,bytesTotal){var percentLoaded=0;if(bytesTotal>0){percentLoaded=bytesLoaded/bytesTotal;if(percentLoaded>1){percentLoaded=1}}this.progress.set_scaleX(percentLoaded)},this_onAddedToStage:function(event){this.removeEventListener("addedToStage",$bind(this,this.this_onAddedToStage));this.onInit();this.onUpdate(this.get_loaderInfo().bytesLoaded,this.get_loaderInfo().bytesTotal);this.addEventListener("progress",$bind(this,this.this_onProgress));this.addEventListener("complete",$bind(this,this.this_onComplete))},this_onComplete:function(event){event.preventDefault();this.removeEventListener("progress",$bind(this,this.this_onProgress));this.removeEventListener("complete",$bind(this,this.this_onComplete));this.onLoaded()},this_onEnterFrame:function(event){var percent=(openfl_Lib.getTimer()-this.startAnimation)/(this.endAnimation-this.startAnimation);if(percent<0){percent=0}if(percent>1){percent=1}this.outline.set_alpha(percent);this.progress.set_alpha(percent)},this_onProgress:function(event){this.onUpdate(event.bytesLoaded|0,event.bytesTotal|0)},__class__:openfl_display_DefaultPreloader});var openfl_display__$ShaderData_ShaderData_$Impl_$={};$hxClasses["openfl.display._ShaderData.ShaderData_Impl_"]=openfl_display__$ShaderData_ShaderData_$Impl_$;openfl_display__$ShaderData_ShaderData_$Impl_$.__name__="openfl.display._ShaderData.ShaderData_Impl_";openfl_display__$ShaderData_ShaderData_$Impl_$._new=function(byteArray){return{}};var openfl_display_ShaderInput=function(){this.channels=0;this.filter=5;this.height=0;this.index=0;this.mipFilter=2;this.width=0;this.wrap=0};$hxClasses["openfl.display.ShaderInput"]=openfl_display_ShaderInput;openfl_display_ShaderInput.__name__="openfl.display.ShaderInput";openfl_display_ShaderInput.prototype={channels:null,filter:null,height:null,index:null,input:null,mipFilter:null,name:null,width:null,wrap:null,__isUniform:null,__disableGL:function(context,id){context.setTextureAt(id,null)},__updateGL:function(context,id,overrideInput,overrideFilter,overrideMipFilter,overrideWrap){var input=overrideInput!=null?overrideInput:this.input;var filter=overrideFilter!=null?overrideFilter:this.filter;var mipFilter=overrideMipFilter!=null?overrideMipFilter:this.mipFilter;var wrap=overrideWrap!=null?overrideWrap:this.wrap;if(input!=null){context.setTextureAt(id,input.getTexture(context));context.setSamplerStateAt(id,wrap,filter,mipFilter)}else{context.setTextureAt(id,null)}},__class__:openfl_display_ShaderInput};var openfl_display_ShaderParameter=function(){this.index=0};$hxClasses["openfl.display.ShaderParameter"]=openfl_display_ShaderParameter;openfl_display_ShaderParameter.__name__="openfl.display.ShaderParameter";openfl_display_ShaderParameter.prototype={index:null,name:null,type:null,value:null,__arrayLength:null,__internal:null,__isBool:null,__isFloat:null,__isInt:null,__isUniform:null,__length:null,__uniformMatrix:null,__useArray:null,__disableGL:function(context){var gl=context.gl;if(!this.__isUniform){var _g=0;var _g1=this.__arrayLength;while(_g<_g1)gl.disableVertexAttribArray(this.index+_g++)}},__updateGL:function(context,overrideValue){var gl=context.gl;var value=overrideValue!=null?overrideValue:this.value;var boolValue=this.__isBool?value:null;var floatValue=this.__isFloat?value:null;var intValue=this.__isInt?value:null;if(this.__isUniform){if(value!=null&&value.length>=this.__length){switch(this.type){case 0:gl.uniform1i(this.index,boolValue[0]?1:0);break;case 1:gl.uniform2i(this.index,boolValue[0]?1:0,boolValue[1]?1:0);break;case 2:gl.uniform3i(this.index,boolValue[0]?1:0,boolValue[1]?1:0,boolValue[2]?1:0);break;case 3:gl.uniform4i(this.index,boolValue[0]?1:0,boolValue[1]?1:0,boolValue[2]?1:0,boolValue[3]?1:0);break;case 4:gl.uniform1f(this.index,floatValue[0]);break;case 5:gl.uniform2f(this.index,floatValue[0],floatValue[1]);break;case 6:gl.uniform3f(this.index,floatValue[0],floatValue[1],floatValue[2]);break;case 7:gl.uniform4f(this.index,floatValue[0],floatValue[1],floatValue[2],floatValue[3]);break;case 8:gl.uniform1i(this.index,intValue[0]);break;case 9:gl.uniform2i(this.index,intValue[0],intValue[1]);break;case 10:gl.uniform3i(this.index,intValue[0],intValue[1],intValue[2]);break;case 11:gl.uniform4i(this.index,intValue[0],intValue[1],intValue[2],intValue[3]);break;case 12:this.__uniformMatrix[0]=floatValue[0];this.__uniformMatrix[1]=floatValue[1];this.__uniformMatrix[2]=floatValue[2];this.__uniformMatrix[3]=floatValue[3];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix2fv(gl,this.index,false,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=floatValue[0];this.__uniformMatrix[1]=floatValue[1];this.__uniformMatrix[2]=floatValue[2];this.__uniformMatrix[3]=floatValue[3];this.__uniformMatrix[4]=floatValue[4];this.__uniformMatrix[5]=floatValue[5];this.__uniformMatrix[6]=floatValue[6];this.__uniformMatrix[7]=floatValue[7];this.__uniformMatrix[8]=floatValue[8];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix3fv(gl,this.index,false,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=floatValue[0];this.__uniformMatrix[1]=floatValue[1];this.__uniformMatrix[2]=floatValue[2];this.__uniformMatrix[3]=floatValue[3];this.__uniformMatrix[4]=floatValue[4];this.__uniformMatrix[5]=floatValue[5];this.__uniformMatrix[6]=floatValue[6];this.__uniformMatrix[7]=floatValue[7];this.__uniformMatrix[8]=floatValue[8];this.__uniformMatrix[9]=floatValue[9];this.__uniformMatrix[10]=floatValue[10];this.__uniformMatrix[11]=floatValue[11];this.__uniformMatrix[12]=floatValue[12];this.__uniformMatrix[13]=floatValue[13];this.__uniformMatrix[14]=floatValue[14];this.__uniformMatrix[15]=floatValue[15];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv(gl,this.index,false,this.__uniformMatrix);break;default:}}else{switch(this.type){case 1:case 9:gl.uniform2i(this.index,0,0);break;case 3:case 11:gl.uniform4i(this.index,0,0,0,0);break;case 4:gl.uniform1f(this.index,0);break;case 5:gl.uniform2f(this.index,0,0);break;case 6:gl.uniform3f(this.index,0,0,0);break;case 7:gl.uniform4f(this.index,0,0,0,0);break;case 0:case 8:gl.uniform1i(this.index,0);break;case 2:case 10:gl.uniform3i(this.index,0,0,0);break;case 12:this.__uniformMatrix[0]=0;this.__uniformMatrix[1]=0;this.__uniformMatrix[2]=0;this.__uniformMatrix[3]=0;lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix2fv(gl,this.index,false,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=0;this.__uniformMatrix[1]=0;this.__uniformMatrix[2]=0;this.__uniformMatrix[3]=0;this.__uniformMatrix[4]=0;this.__uniformMatrix[5]=0;this.__uniformMatrix[6]=0;this.__uniformMatrix[7]=0;this.__uniformMatrix[8]=0;lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix3fv(gl,this.index,false,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=0;this.__uniformMatrix[1]=0;this.__uniformMatrix[2]=0;this.__uniformMatrix[3]=0;this.__uniformMatrix[4]=0;this.__uniformMatrix[5]=0;this.__uniformMatrix[6]=0;this.__uniformMatrix[7]=0;this.__uniformMatrix[8]=0;this.__uniformMatrix[9]=0;this.__uniformMatrix[10]=0;this.__uniformMatrix[11]=0;this.__uniformMatrix[12]=0;this.__uniformMatrix[13]=0;this.__uniformMatrix[14]=0;this.__uniformMatrix[15]=0;lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv(gl,this.index,false,this.__uniformMatrix);break;default:}}}else if(!this.__useArray&&(value==null||value.length==this.__length)){var _g=0;var _g1=this.__arrayLength;while(_g<_g1)gl.disableVertexAttribArray(this.index+_g++);if(value!=null){switch(this.type){case 0:gl.vertexAttrib1f(this.index,boolValue[0]?1:0);break;case 1:gl.vertexAttrib2f(this.index,boolValue[0]?1:0,boolValue[1]?1:0);break;case 2:gl.vertexAttrib3f(this.index,boolValue[0]?1:0,boolValue[1]?1:0,boolValue[2]?1:0);break;case 3:gl.vertexAttrib4f(this.index,boolValue[0]?1:0,boolValue[1]?1:0,boolValue[2]?1:0,boolValue[3]?1:0);break;case 4:gl.vertexAttrib1f(this.index,floatValue[0]);break;case 5:gl.vertexAttrib2f(this.index,floatValue[0],floatValue[1]);break;case 6:gl.vertexAttrib3f(this.index,floatValue[0],floatValue[1],floatValue[2]);break;case 7:gl.vertexAttrib4f(this.index,floatValue[0],floatValue[1],floatValue[2],floatValue[3]);break;case 8:gl.vertexAttrib1f(this.index,intValue[0]);break;case 9:gl.vertexAttrib2f(this.index,intValue[0],intValue[1]);break;case 10:gl.vertexAttrib3f(this.index,intValue[0],intValue[1],intValue[2]);break;case 11:gl.vertexAttrib4f(this.index,intValue[0],intValue[1],intValue[2],intValue[3]);break;case 12:gl.vertexAttrib2f(this.index+0,floatValue[0],floatValue[1]);gl.vertexAttrib2f(this.index+1,floatValue[2],floatValue[3]);break;case 16:gl.vertexAttrib3f(this.index+0,floatValue[0],floatValue[1],floatValue[2]);gl.vertexAttrib3f(this.index+1,floatValue[3],floatValue[4],floatValue[5]);gl.vertexAttrib3f(this.index+2,floatValue[6],floatValue[7],floatValue[8]);break;case 20:gl.vertexAttrib4f(this.index+0,floatValue[0],floatValue[1],floatValue[2],floatValue[3]);gl.vertexAttrib4f(this.index+1,floatValue[4],floatValue[5],floatValue[6],floatValue[7]);gl.vertexAttrib4f(this.index+2,floatValue[8],floatValue[9],floatValue[10],floatValue[11]);gl.vertexAttrib4f(this.index+3,floatValue[12],floatValue[13],floatValue[14],floatValue[15]);break;default:}}else{switch(this.type){case 1:case 5:case 9:gl.vertexAttrib2f(this.index,0,0);break;case 3:case 7:case 11:gl.vertexAttrib4f(this.index,0,0,0,0);break;case 0:case 4:case 8:gl.vertexAttrib1f(this.index,0);break;case 2:case 6:case 10:gl.vertexAttrib3f(this.index,0,0,0);break;case 12:gl.vertexAttrib2f(this.index+0,0,0);gl.vertexAttrib2f(this.index+1,0,0);break;case 16:gl.vertexAttrib3f(this.index+0,0,0,0);gl.vertexAttrib3f(this.index+1,0,0,0);gl.vertexAttrib3f(this.index+2,0,0,0);break;case 20:gl.vertexAttrib4f(this.index+0,0,0,0,0);gl.vertexAttrib4f(this.index+1,0,0,0,0);gl.vertexAttrib4f(this.index+2,0,0,0,0);gl.vertexAttrib4f(this.index+3,0,0,0,0);break;default:}}}else{var _g2=0;var _g11=this.__arrayLength;while(_g2<_g11)gl.enableVertexAttribArray(this.index+_g2++)}},__updateGLFromBuffer:function(context,buffer,position,length,bufferOffset){var gl=context.gl;if(this.__isUniform){if(length>=this.__length){switch(this.type){case 1:case 9:gl.uniform2i(this.index,buffer[position]|0,buffer[position+1]|0);break;case 3:case 11:gl.uniform4i(this.index,buffer[position]|0,buffer[position+1]|0,buffer[position+2]|0,buffer[position+3]|0);break;case 4:gl.uniform1f(this.index,buffer[position]);break;case 5:gl.uniform2f(this.index,buffer[position],buffer[position+1]);break;case 6:gl.uniform3f(this.index,buffer[position],buffer[position+1],buffer[position+2]);break;case 7:gl.uniform4f(this.index,buffer[position],buffer[position+1],buffer[position+2],buffer[position+3]);break;case 0:case 8:gl.uniform1i(this.index,buffer[position]|0);break;case 2:case 10:gl.uniform3i(this.index,buffer[position]|0,buffer[position+1]|0,buffer[position+2]|0);break;case 12:this.__uniformMatrix[0]=buffer[position];this.__uniformMatrix[1]=buffer[position+1];this.__uniformMatrix[2]=buffer[position+2];this.__uniformMatrix[3]=buffer[position+3];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix2fv(gl,this.index,false,this.__uniformMatrix);break;case 16:this.__uniformMatrix[0]=buffer[position];this.__uniformMatrix[1]=buffer[position+1];this.__uniformMatrix[2]=buffer[position+2];this.__uniformMatrix[3]=buffer[position+3];this.__uniformMatrix[4]=buffer[position+4];this.__uniformMatrix[5]=buffer[position+5];this.__uniformMatrix[6]=buffer[position+6];this.__uniformMatrix[7]=buffer[position+7];this.__uniformMatrix[8]=buffer[position+8];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix3fv(gl,this.index,false,this.__uniformMatrix);break;case 20:this.__uniformMatrix[0]=buffer[position];this.__uniformMatrix[1]=buffer[position+1];this.__uniformMatrix[2]=buffer[position+2];this.__uniformMatrix[3]=buffer[position+3];this.__uniformMatrix[4]=buffer[position+4];this.__uniformMatrix[5]=buffer[position+5];this.__uniformMatrix[6]=buffer[position+6];this.__uniformMatrix[7]=buffer[position+7];this.__uniformMatrix[8]=buffer[position+8];this.__uniformMatrix[9]=buffer[position+9];this.__uniformMatrix[10]=buffer[position+10];this.__uniformMatrix[11]=buffer[position+11];this.__uniformMatrix[12]=buffer[position+12];this.__uniformMatrix[13]=buffer[position+13];this.__uniformMatrix[14]=buffer[position+14];this.__uniformMatrix[15]=buffer[position+15];lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv(gl,this.index,false,this.__uniformMatrix);break;default:}}}else if(!this.__internal&&(length==0||length==this.__length)){var _g=0;var _g1=this.__arrayLength;while(_g<_g1)gl.disableVertexAttribArray(this.index+_g++);if(length>0){switch(this.type){case 1:case 5:case 9:gl.vertexAttrib2f(this.index,buffer[position],buffer[position+1]);break;case 3:case 7:case 11:gl.vertexAttrib4f(this.index,buffer[position],buffer[position+1],buffer[position+2],buffer[position+3]);break;case 0:case 4:case 8:gl.vertexAttrib1f(this.index,buffer[position]);break;case 2:case 6:case 10:gl.vertexAttrib3f(this.index,buffer[position],buffer[position+1],buffer[position+2]);break;case 12:gl.vertexAttrib2f(this.index+0,buffer[position],buffer[position+1]);gl.vertexAttrib2f(this.index+1,buffer[position+2],buffer[position+2+1]);break;case 16:gl.vertexAttrib3f(this.index+0,buffer[position],buffer[position+1],buffer[position+2]);gl.vertexAttrib3f(this.index+1,buffer[position+3],buffer[position+3+1],buffer[position+3+2]);gl.vertexAttrib3f(this.index+2,buffer[position+6],buffer[position+6+1],buffer[position+6+2]);break;case 20:gl.vertexAttrib4f(this.index+0,buffer[position],buffer[position+1],buffer[position+2],buffer[position+3]);gl.vertexAttrib4f(this.index+1,buffer[position+4],buffer[position+4+1],buffer[position+4+2],buffer[position+4+3]);gl.vertexAttrib4f(this.index+2,buffer[position+8],buffer[position+8+1],buffer[position+8+2],buffer[position+8+3]);gl.vertexAttrib4f(this.index+3,buffer[position+12],buffer[position+12+1],buffer[position+12+2],buffer[position+12+3]);break;default:}}else{switch(this.type){case 1:case 5:case 9:gl.vertexAttrib2f(this.index,0,0);break;case 3:case 7:case 11:gl.vertexAttrib4f(this.index,0,0,0,0);break;case 0:case 4:case 8:gl.vertexAttrib1f(this.index,0);break;case 2:case 6:case 10:gl.vertexAttrib3f(this.index,0,0,0);break;case 12:gl.vertexAttrib2f(this.index+0,0,0);gl.vertexAttrib2f(this.index+1,0,0);break;case 16:gl.vertexAttrib3f(this.index+0,0,0,0);gl.vertexAttrib3f(this.index+1,0,0,0);gl.vertexAttrib3f(this.index+2,0,0,0);break;case 20:gl.vertexAttrib4f(this.index+0,0,0,0,0);gl.vertexAttrib4f(this.index+1,0,0,0,0);gl.vertexAttrib4f(this.index+2,0,0,0,0);gl.vertexAttrib4f(this.index+3,0,0,0,0);break;default:}}}else{var type=gl.FLOAT;if(this.__isBool){type=gl.INT}else if(this.__isInt){type=gl.INT}var _g2=0;var _g11=this.__arrayLength;while(_g2<_g11)gl.enableVertexAttribArray(this.index+_g2++);if(length>0){var _g21=0;var _g3=this.__arrayLength;while(_g21<_g3){var i=_g21++;gl.vertexAttribPointer(this.index+i,this.__length,type,false,this.__length*4,(position+bufferOffset*this.__length+i*this.__arrayLength)*4)}}}},set_name:function(value){this.__internal=StringTools.startsWith(value,"openfl_");return this.name=value},__class__:openfl_display_ShaderParameter,__properties__:{set_name:"set_name"}};var openfl_display_Shape=function(){openfl_display_DisplayObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.SHAPE};$hxClasses["openfl.display.Shape"]=openfl_display_Shape;openfl_display_Shape.__name__="openfl.display.Shape";openfl_display_Shape.__super__=openfl_display_DisplayObject;openfl_display_Shape.prototype=$extend(openfl_display_DisplayObject.prototype,{get_graphics:function(){if(this.__graphics==null){this.__graphics=new openfl_display_Graphics(this)}return this.__graphics},__class__:openfl_display_Shape,__properties__:$extend(openfl_display_DisplayObject.prototype.__properties__,{get_graphics:"get_graphics"})});var openfl_display_SimpleButton=function(upState,overState,downState,hitTestState){openfl_display_InteractiveObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.SIMPLE_BUTTON;this.enabled=true;this.trackAsMenu=false;this.useHandCursor=true;this.__upState=upState!=null?upState:new openfl_display_DisplayObject;this.__overState=overState;this.__downState=downState;this.set_hitTestState(hitTestState!=null?hitTestState:new openfl_display_DisplayObject);this.addEventListener("mouseDown",$bind(this,this.__this_onMouseDown));this.addEventListener("mouseOut",$bind(this,this.__this_onMouseOut));this.addEventListener("mouseOver",$bind(this,this.__this_onMouseOver));this.addEventListener("mouseUp",$bind(this,this.__this_onMouseUp));this.__tabEnabled=true;this.set___currentState(this.__upState);if(openfl_display_SimpleButton.__constructor!=null){var method=openfl_display_SimpleButton.__constructor;openfl_display_SimpleButton.__constructor=null;method(this)}else if(openfl_display_SimpleButton.__initSymbol!=null){var swf=openfl_display_SimpleButton.__initSWF;this.__symbol=openfl_display_SimpleButton.__initSymbol;openfl_display_SimpleButton.__initSWF=null;openfl_display_SimpleButton.__initSymbol=null;this.__fromSymbol(swf,this.__symbol)}};$hxClasses["openfl.display.SimpleButton"]=openfl_display_SimpleButton;openfl_display_SimpleButton.__name__="openfl.display.SimpleButton";openfl_display_SimpleButton.__super__=openfl_display_InteractiveObject;openfl_display_SimpleButton.prototype=$extend(openfl_display_InteractiveObject.prototype,{enabled:null,trackAsMenu:null,useHandCursor:null,__currentState:null,__downState:null,__hitTestState:null,__ignoreEvent:null,__overState:null,__previousStates:null,__symbol:null,__upState:null,__fromSymbol:function(swf,symbol){this.__symbol=symbol;if(symbol.downState!=null){this.set_downState(symbol.downState.__createObject(swf))}if(symbol.hitState!=null){this.set_hitTestState(symbol.hitState.__createObject(swf))}if(symbol.overState!=null){this.set_overState(symbol.overState.__createObject(swf))}if(symbol.upState!=null){this.set_upState(symbol.upState.__createObject(swf))}},__getBounds:function(rect,matrix){openfl_display_InteractiveObject.prototype.__getBounds.call(this,rect,matrix);var childWorldTransform=openfl_geom_Matrix.__pool.get();var local=this.__currentState.__transform;childWorldTransform.a=local.a*matrix.a+local.b*matrix.c;childWorldTransform.b=local.a*matrix.b+local.b*matrix.d;childWorldTransform.c=local.c*matrix.a+local.d*matrix.c;childWorldTransform.d=local.c*matrix.b+local.d*matrix.d;childWorldTransform.tx=local.tx*matrix.a+local.ty*matrix.c+matrix.tx;childWorldTransform.ty=local.tx*matrix.b+local.ty*matrix.d+matrix.ty;this.__currentState.__getBounds(rect,childWorldTransform);openfl_geom_Matrix.__pool.release(childWorldTransform)},__getRenderBounds:function(rect,matrix){if(this.__scrollRect!=null){openfl_display_InteractiveObject.prototype.__getRenderBounds.call(this,rect,matrix);return}else{openfl_display_InteractiveObject.prototype.__getBounds.call(this,rect,matrix)}var childWorldTransform=openfl_geom_Matrix.__pool.get();var local=this.__currentState.__transform;childWorldTransform.a=local.a*matrix.a+local.b*matrix.c;childWorldTransform.b=local.a*matrix.b+local.b*matrix.d;childWorldTransform.c=local.c*matrix.a+local.d*matrix.c;childWorldTransform.d=local.c*matrix.b+local.d*matrix.d;childWorldTransform.tx=local.tx*matrix.a+local.ty*matrix.c+matrix.tx;childWorldTransform.ty=local.tx*matrix.b+local.ty*matrix.d+matrix.ty;this.__currentState.__getRenderBounds(rect,childWorldTransform);openfl_geom_Matrix.__pool.release(childWorldTransform)},__getCursor:function(){if(this.useHandCursor&&!this.__ignoreEvent&&this.enabled){return"button"}else{return null}},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){var hitTest=false;if(this.get_hitTestState()!=null){if(this.get_hitTestState().__hitTest(x,y,shapeFlag,stack,interactiveOnly,hitObject)){if(stack!=null){if(stack.length==0){stack[0]=hitObject}else{stack[stack.length-1]=hitObject}}hitTest=!interactiveOnly||this.mouseEnabled}}else if(this.__currentState!=null){if(!hitObject.get_visible()||this.__isMask||interactiveOnly&&!this.mouseEnabled){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}if(this.__currentState.__hitTest(x,y,shapeFlag,stack,interactiveOnly,hitObject)){hitTest=interactiveOnly}}if(stack!=null){while(stack.length>1&&stack[stack.length-1]==stack[stack.length-2])stack.pop()}return hitTest},__hitTestMask:function(x,y){var hitTest=false;if(this.__currentState.__hitTestMask(x,y)){hitTest=true}return hitTest},__setStageReference:function(stage){openfl_display_InteractiveObject.prototype.__setStageReference.call(this,stage);if(this.__currentState!=null){this.__currentState.__setStageReference(stage)}if(this.get_hitTestState()!=null&&this.get_hitTestState()!=this.__currentState){this.get_hitTestState().__setStageReference(stage)}},__setTransformDirty:function(){openfl_display_InteractiveObject.prototype.__setTransformDirty.call(this);if(this.__currentState!=null){this.__currentState.__setTransformDirty()}if(this.get_hitTestState()!=null&&this.get_hitTestState()!=this.__currentState){this.get_hitTestState().__setTransformDirty()}},__update:function(transformOnly,updateChildren){openfl_display_InteractiveObject.prototype.__update.call(this,transformOnly,updateChildren);if(updateChildren){if(this.__currentState!=null){this.__currentState.__update(transformOnly,true)}if(this.get_hitTestState()!=null&&this.get_hitTestState()!=this.__currentState){this.get_hitTestState().__update(transformOnly,true)}}},__updateTransforms:function(overrideTransform){openfl_display_InteractiveObject.prototype.__updateTransforms.call(this,overrideTransform);if(this.__currentState!=null){this.__currentState.__updateTransforms()}if(this.get_hitTestState()!=null&&this.get_hitTestState()!=this.__currentState){this.get_hitTestState().__updateTransforms()}},get_downState:function(){return this.__downState},set_downState:function(downState){if(this.__downState!=null&&this.__currentState==this.__downState){this.set___currentState(this.__downState)}return this.__downState=downState},get_hitTestState:function(){return this.__hitTestState},set_hitTestState:function(hitTestState){if(this.__hitTestState!=null&&this.__hitTestState!=hitTestState){if(this.__hitTestState!=this.get_downState()&&this.__hitTestState!=this.get_upState()&&this.__hitTestState!=this.get_overState()){this.__hitTestState.__renderParent=null}}if(hitTestState!=null){hitTestState.__renderParent=this;if(!hitTestState.__renderDirty){hitTestState.__renderDirty=true;hitTestState.__setParentRenderDirty()}}return this.__hitTestState=hitTestState},get_overState:function(){return this.__overState},set_overState:function(overState){if(this.__overState!=null&&this.__currentState==this.__overState){this.set___currentState(overState)}return this.__overState=overState},get_upState:function(){return this.__upState},set_upState:function(upState){if(this.__upState!=null&&this.__currentState==this.__upState){this.set___currentState(upState)}return this.__upState=upState},set___currentState:function(value){if(this.__currentState!=null&&this.__currentState!=this.get_hitTestState()){this.__currentState.__renderParent=null}if(value!=null&&value.parent!=null){value.parent.removeChild(value)}if(openfl_display_DisplayObject.__supportDOM&&this.__previousStates==null){this.__previousStates=openfl__$Vector_Vector_$Impl_$.toObjectVector(null)}if(value!=this.__currentState){if(openfl_display_DisplayObject.__supportDOM){if(this.__currentState!=null){this.__currentState.__setStageReference(null);this.__previousStates.push(this.__currentState)}var index=this.__previousStates.indexOf(value,0);if(index>-1){this.__previousStates.splice(index,1)}}if(value!=null){value.__renderParent=this;if(!value.__renderDirty){value.__renderDirty=true;value.__setParentRenderDirty()}}if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}this.__currentState=value;return value},__this_onMouseDown:function(event){if(this.enabled){this.set___currentState(this.get_downState())}},__this_onMouseOut:function(event){this.__ignoreEvent=false;if(this.get_upState()!=this.__currentState){this.set___currentState(this.get_upState())}},__this_onMouseOver:function(event){if(event.buttonDown){this.__ignoreEvent=true}if(this.get_overState()!=this.__currentState&&this.get_overState()!=null&&!this.__ignoreEvent&&this.enabled){this.set___currentState(this.get_overState())}},__this_onMouseUp:function(event){this.__ignoreEvent=false;if(this.enabled&&this.get_overState()!=null){this.set___currentState(this.get_overState())}else{this.set___currentState(this.get_upState())}},__class__:openfl_display_SimpleButton,__properties__:$extend(openfl_display_InteractiveObject.prototype.__properties__,{set___currentState:"set___currentState",set_upState:"set_upState",get_upState:"get_upState",set_overState:"set_overState",get_overState:"get_overState",set_hitTestState:"set_hitTestState",get_hitTestState:"get_hitTestState",set_downState:"set_downState",get_downState:"get_downState"})});var openfl_display_Stage=function($window,color){openfl_display_DisplayObjectContainer.call(this);this.set_name(null);this.__color=-1;this.__colorSplit=[255,255,255];this.__colorString="#FFFFFF";this.__contentsScaleFactor=1;this.__currentTabOrderIndex=0;this.__deltaTime=0;this.__displayState=2;this.__mouseX=0;this.__mouseY=0;this.__lastClickTime=0;this.__logicalWidth=0;this.__logicalHeight=0;this.__displayMatrix=new openfl_geom_Matrix;this.__displayRect=new openfl_geom_Rectangle;this.__renderDirty=true;this.stage3Ds=openfl__$Vector_Vector_$Impl_$.toObjectVector(null);this.stage3Ds.push(new openfl_display_Stage3D(this));this.stage3Ds.push(new openfl_display_Stage3D(this));this.stage3Ds.push(new openfl_display_Stage3D(this));this.stage3Ds.push(new openfl_display_Stage3D(this));this.stage=this;this.align=6;this.allowsFullScreen=true;this.allowsFullScreenInteractive=true;this.__quality=1;this.__scaleMode=2;this.showDefaultContextMenu=true;this.softKeyboardRect=new openfl_geom_Rectangle;this.stageFocusRect=true;this.__macKeyboard=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)||/Mac/.test(navigator.platform);this.__clearBeforeRender=true;this.__forceRender=false;this.__stack=[];this.__rollOutStack=[];this.__mouseOutStack=[];this.__touchData=new haxe_ds_IntMap;this.application=$window.application;this.window=$window;this.set_color(color);this.__contentsScaleFactor=$window.__scale;this.__wasFullscreen=$window.__fullscreen;this.__resize();if(openfl_Lib.get_current().stage==null){this.stage.addChild(openfl_Lib.get_current())}};$hxClasses["openfl.display.Stage"]=openfl_display_Stage;openfl_display_Stage.__name__="openfl.display.Stage";openfl_display_Stage.__interfaces__=[lime_app_IModule];openfl_display_Stage.__super__=openfl_display_DisplayObjectContainer;openfl_display_Stage.prototype=$extend(openfl_display_DisplayObjectContainer.prototype,{align:null,allowsFullScreen:null,allowsFullScreenInteractive:null,application:null,context3D:null,showDefaultContextMenu:null,softKeyboardRect:null,stage3Ds:null,stageFocusRect:null,stageHeight:null,stageWidth:null,window:null,__cacheFocus:null,__clearBeforeRender:null,__color:null,__colorSplit:null,__colorString:null,__contentsScaleFactor:null,__currentTabOrderIndex:null,__deltaTime:null,__displayMatrix:null,__displayRect:null,__displayState:null,__dragBounds:null,__dragObject:null,__dragOffsetX:null,__dragOffsetY:null,__focus:null,__forceRender:null,__fullScreenSourceRect:null,__invalidated:null,__lastClickTime:null,__logicalWidth:null,__logicalHeight:null,__macKeyboard:null,__mouseDownLeft:null,__mouseDownMiddle:null,__mouseDownRight:null,__mouseOutStack:null,__mouseOverTarget:null,__mouseX:null,__mouseY:null,__pendingMouseEvent:null,__pendingMouseX:null,__pendingMouseY:null,__quality:null,__renderer:null,__rendering:null,__rollOutStack:null,__scaleMode:null,__stack:null,__touchData:null,__transparent:null,__wasDirty:null,__wasFullscreen:null,__primaryTouch:null,localToGlobal:function(pos){return pos.clone()},__broadcastEvent:function(event){var key=event.type;var _this=openfl_display_DisplayObject.__broadcastEvents;if(__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key)){var key1=event.type;var _this1=openfl_display_DisplayObject.__broadcastEvents;var dispatchers=__map_reserved[key1]!=null?_this1.getReserved(key1):_this1.h[key1];var _g=0;while(_g<dispatchers.length){var dispatcher=dispatchers[_g];++_g;if(dispatcher.stage==this||dispatcher.stage==null){try{dispatcher.__dispatch(event)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}}}}},__createRenderer:function(){var pixelRatio=1;if(this.window.__scale>1){pixelRatio=this.window.devicePixelRatio||1}var windowWidth=this.window.__width*this.window.__scale|0;var windowHeight=this.window.__height*this.window.__scale|0;switch(this.window.context.type){case"cairo":break;case"canvas":var renderer=new openfl__$internal_renderer_canvas_CanvasRenderer(this.window.context.canvas2D);renderer.pixelRatio=pixelRatio;this.__renderer=renderer;break;case"dom":var renderer1=new openfl__$internal_renderer_dom_DOMRenderer(this.window.context.dom);renderer1.pixelRatio=pixelRatio;this.__renderer=renderer1;break;case"opengl":case"opengles":case"webgl":this.context3D=new openfl_display3D_Context3D(this);this.context3D.configureBackBuffer(windowWidth,windowHeight,0,true,true,true);this.context3D.present();if(openfl_display_BitmapData.__hardwareRenderer==null){openfl_display_BitmapData.__hardwareRenderer=new openfl__$internal_renderer_context3D_Context3DRenderer(this.context3D)}this.__renderer=new openfl__$internal_renderer_context3D_Context3DRenderer(this.context3D);break;default:}if(this.__renderer!=null){this.__renderer.__allowSmoothing=this.get_quality()!=2;this.__renderer.__worldTransform=this.__displayMatrix;this.__renderer.__stage=this;this.__renderer.__resize(windowWidth,windowHeight)}},__dispatchEvent:function(event){try{return openfl_display_DisplayObjectContainer.prototype.__dispatchEvent.call(this,event)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e);return false}},__dispatchPendingMouseEvent:function(){if(this.__pendingMouseEvent){this.__onMouse("mouseMove",this.__pendingMouseX,this.__pendingMouseY,0);this.__pendingMouseEvent=false}},__dispatchStack:function(event,stack){try{var target;var length=stack.length;if(length==0){event.eventPhase=2;target=event.target;target.__dispatch(event)}else{event.eventPhase=1;event.target=stack[stack.length-1];var _g=0;var _g1=length-1;while(_g<_g1){stack[_g++].__dispatch(event);if(event.__isCanceled){return}}event.eventPhase=2;target=event.target;target.__dispatch(event);if(event.__isCanceled){return}if(event.bubbles){event.eventPhase=3;var i=length-2;while(i>=0){stack[i].__dispatch(event);if(event.__isCanceled){return}--i}}}}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}},__dispatchTarget:function(target,event){try{return target.__dispatchEvent(event)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e);return false}},__drag:function(mouse){var parent=this.__dragObject.parent;if(parent!=null){var _this=parent.__getWorldTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){mouse.x=-_this.tx;mouse.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-mouse.y)+_this.d*(mouse.x-_this.tx));mouse.y=1/norm*(_this.a*(mouse.y-_this.ty)+_this.b*(_this.tx-mouse.x));mouse.x=px}}var x=mouse.x+this.__dragOffsetX;var y=mouse.y+this.__dragOffsetY;if(this.__dragBounds!=null){if(x<this.__dragBounds.x){x=this.__dragBounds.x}else if(x>this.__dragBounds.get_right()){x=this.__dragBounds.get_right()}if(y<this.__dragBounds.y){y=this.__dragBounds.y}else if(y>this.__dragBounds.get_bottom()){y=this.__dragBounds.get_bottom()}}this.__dragObject.set_x(x);this.__dragObject.set_y(y)},__getInteractive:function(stack){if(stack!=null){stack.push(this)}return true},__globalToLocal:function(global,local){if(global!=local){local.copyFrom(global)}return local},__handleError:function(e){var event=new openfl_events_UncaughtErrorEvent("uncaughtError",true,true,e);try{openfl_Lib.get_current().__loaderInfo.uncaughtErrorEvents.dispatchEvent(event)}catch(e1){haxe_CallStack.lastException=e1;var e2=e1 instanceof js__$Boot_HaxeError?e1.val:e1}if(!event.__preventDefault){try{var exc=haxe_CallStack.lastException;if(exc!=null&&Object.prototype.hasOwnProperty.call(exc,"stack")&&exc.stack!=null&&exc.stack!=""){console.log(exc.stack);e.stack=exc.stack}else{var msg=haxe_CallStack.toString(haxe_CallStack.callStack());console.log(msg)}}catch(e21){haxe_CallStack.lastException=e21;var e22=e21 instanceof js__$Boot_HaxeError?e21.val:e21}throw e}},__onKey:function(type,keyCode,modifier){this.__dispatchPendingMouseEvent();openfl_events_MouseEvent.__altKey=lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_altKey(modifier);openfl_events_MouseEvent.__commandKey=lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier);openfl_events_MouseEvent.__ctrlKey=lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier);openfl_events_MouseEvent.__shiftKey=lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier);var stack=[];if(this.__focus==null){this.__getInteractive(stack)}else{this.__focus.__getInteractive(stack)}if(stack.length>0){var keyLocation;switch(keyCode){case 1073741908:case 1073741909:case 1073741910:case 1073741911:case 1073741912:case 1073741913:case 1073741914:case 1073741915:case 1073741916:case 1073741917:case 1073741918:case 1073741919:case 1073741920:case 1073741921:case 1073741922:case 1073741923:case 1073742044:keyLocation=3;break;case 1073742048:case 1073742049:case 1073742050:case 1073742051:keyLocation=1;break;case 1073742052:case 1073742053:case 1073742054:case 1073742055:keyLocation=2;break;default:keyLocation=0}var keyCode1;switch(keyCode){case 8:keyCode1=8;break;case 9:keyCode1=9;break;case 13:keyCode1=13;break;case 27:keyCode1=27;break;case 32:keyCode1=32;break;case 33:keyCode1=49;break;case 34:keyCode1=222;break;case 35:keyCode1=51;break;case 36:keyCode1=52;break;case 37:keyCode1=53;break;case 38:keyCode1=55;break;case 39:keyCode1=222;break;case 40:keyCode1=57;break;case 41:keyCode1=48;break;case 42:keyCode1=56;break;case 44:keyCode1=188;break;case 45:keyCode1=189;break;case 46:keyCode1=190;break;case 47:keyCode1=191;break;case 48:keyCode1=48;break;case 49:keyCode1=49;break;case 50:keyCode1=50;break;case 51:keyCode1=51;break;case 52:keyCode1=52;break;case 53:keyCode1=53;break;case 54:keyCode1=54;break;case 55:keyCode1=55;break;case 56:keyCode1=56;break;case 57:keyCode1=57;break;case 58:keyCode1=186;break;case 59:keyCode1=186;break;case 60:keyCode1=60;break;case 61:keyCode1=187;break;case 62:keyCode1=190;break;case 63:keyCode1=191;break;case 64:keyCode1=50;break;case 91:keyCode1=219;break;case 92:keyCode1=220;break;case 93:keyCode1=221;break;case 94:keyCode1=54;break;case 95:keyCode1=189;break;case 96:keyCode1=192;break;case 97:keyCode1=65;break;case 98:keyCode1=66;break;case 99:keyCode1=67;break;case 100:keyCode1=68;break;case 101:keyCode1=69;break;case 102:keyCode1=70;break;case 103:keyCode1=71;break;case 104:keyCode1=72;break;case 105:keyCode1=73;break;case 106:keyCode1=74;break;case 107:keyCode1=75;break;case 108:keyCode1=76;break;case 109:keyCode1=77;break;case 110:keyCode1=78;break;case 111:keyCode1=79;break;case 112:keyCode1=80;break;case 113:keyCode1=81;break;case 114:keyCode1=82;break;case 115:keyCode1=83;break;case 116:keyCode1=84;break;case 117:keyCode1=85;break;case 118:keyCode1=86;break;case 119:keyCode1=87;break;case 120:keyCode1=88;break;case 121:keyCode1=89;break;case 122:keyCode1=90;break;case 127:keyCode1=46;break;case 1073741881:keyCode1=20;break;case 1073741882:keyCode1=112;break;case 1073741883:keyCode1=113;break;case 1073741884:keyCode1=114;break;case 1073741885:keyCode1=115;break;case 1073741886:keyCode1=116;break;case 1073741887:keyCode1=117;break;case 1073741888:keyCode1=118;break;case 1073741889:keyCode1=119;break;case 1073741890:keyCode1=120;break;case 1073741891:keyCode1=121;break;case 1073741892:keyCode1=122;break;case 1073741893:keyCode1=123;break;case 1073741894:keyCode1=301;break;case 1073741895:keyCode1=145;break;case 1073741896:keyCode1=19;break;case 1073741897:keyCode1=45;break;case 1073741898:keyCode1=36;break;case 1073741899:keyCode1=33;break;case 1073741901:keyCode1=35;break;case 1073741902:keyCode1=34;break;case 1073741903:keyCode1=39;break;case 1073741904:keyCode1=37;break;case 1073741905:keyCode1=40;break;case 1073741906:keyCode1=38;break;case 1073741907:keyCode1=144;break;case 1073741908:keyCode1=111;break;case 1073741909:keyCode1=106;break;case 1073741910:keyCode1=109;break;case 1073741911:keyCode1=107;break;case 1073741912:keyCode1=13;break;case 1073741913:keyCode1=97;break;case 1073741914:keyCode1=98;break;case 1073741915:keyCode1=99;break;case 1073741916:keyCode1=100;break;case 1073741917:keyCode1=101;break;case 1073741918:keyCode1=102;break;case 1073741919:keyCode1=103;break;case 1073741920:keyCode1=104;break;case 1073741921:keyCode1=105;break;case 1073741922:keyCode1=96;break;case 1073741923:keyCode1=110;break;case 1073741925:keyCode1=302;break;case 1073741928:keyCode1=124;break;case 1073741929:keyCode1=125;break;case 1073741930:keyCode1=126;break;case 1073741982:keyCode1=13;break;case 1073742044:keyCode1=110;break;case 1073742048:keyCode1=17;break;case 1073742049:keyCode1=16;break;case 1073742050:keyCode1=18;break;case 1073742051:keyCode1=15;break;case 1073742052:keyCode1=17;break;case 1073742053:keyCode1=16;break;case 1073742054:keyCode1=18;break;case 1073742055:keyCode1=15;break;default:keyCode1=keyCode}var event=new openfl_events_KeyboardEvent(type,true,true,openfl_ui_Keyboard.__getCharCode(keyCode1,lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)),keyCode1,keyLocation,this.__macKeyboard?lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier)||lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier):lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier),lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_altKey(modifier),lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier),lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier),lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier));stack.reverse();this.__dispatchStack(event,stack);if(event.__preventDefault){if(type=="keyDown"){this.window.onKeyDown.cancel()}else{this.window.onKeyUp.cancel()}}else if(type=="keyDown"&&keyCode1==9){var tabStack=[];this.__tabTest(tabStack);var nextIndex=-1;var nextObject=null;var nextOffset=lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)?-1:1;if(tabStack.length>1){haxe_ds_ArraySort.sort(tabStack,function(a,b){return a.get_tabIndex()-b.get_tabIndex()});if(tabStack[tabStack.length-1].get_tabIndex()==-1){if(this.get_focus()!=null){nextIndex=0}else{nextIndex=this.__currentTabOrderIndex}}else{var i=0;while(i<tabStack.length){if(tabStack[i].get_tabIndex()>-1){if(i>0){tabStack.splice(0,i)}break}++i}if(this.get_focus()!=null){var index=tabStack.indexOf(this.get_focus());if(index<0){nextIndex=0}else{nextIndex=index+nextOffset}}else{nextIndex=this.__currentTabOrderIndex}}}else if(tabStack.length==1){nextObject=tabStack[0];if(this.get_focus()==nextObject){nextObject=null}}if(tabStack.length==1||tabStack.length==0&&this.get_focus()!=null){nextIndex=0}else if(tabStack.length>1){if(nextIndex<0){nextIndex+=tabStack.length}nextIndex%=tabStack.length;nextObject=tabStack[nextIndex];if(nextObject==this.get_focus()){nextIndex+=nextOffset;if(nextIndex<0){nextIndex+=tabStack.length}nextIndex%=tabStack.length;nextObject=tabStack[nextIndex]}}var focusEvent=null;if(this.get_focus()!=null){focusEvent=new openfl_events_FocusEvent("keyFocusChange",true,true,nextObject,lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier),0);stack=[];this.get_focus().__getInteractive(stack);stack.reverse();this.__dispatchStack(focusEvent,stack)}if(focusEvent==null||!focusEvent.isDefaultPrevented()){this.__currentTabOrderIndex=nextIndex;if(nextObject!=null){this.set_focus(nextObject)}}}}},__onLimeCreateWindow:function($window){if(this.window!=$window){return}var f=$bind(this,this.__onLimeWindowActivate);var window1=$window;var tmp=function(){f(window1)};$window.onActivate.add(tmp);var f1=$bind(this,this.__onLimeWindowClose);var window2=$window;var tmp1=function(){f1(window2)};$window.onClose.add(tmp1,false,-9e3);var f2=$bind(this,this.__onLimeWindowDeactivate);var window3=$window;var tmp2=function(){f2(window3)};$window.onDeactivate.add(tmp2);var f3=$bind(this,this.__onLimeWindowDropFile);var window4=$window;var tmp3=function(file){f3(window4,file)};$window.onDropFile.add(tmp3);var f4=$bind(this,this.__onLimeWindowEnter);var window5=$window;var tmp4=function(){f4(window5)};$window.onEnter.add(tmp4);var f5=$bind(this,this.__onLimeWindowExpose);var window6=$window;var tmp5=function(){f5(window6)};$window.onExpose.add(tmp5);var f6=$bind(this,this.__onLimeWindowFocusIn);var window7=$window;var tmp6=function(){f6(window7)};$window.onFocusIn.add(tmp6);var f7=$bind(this,this.__onLimeWindowFocusOut);var window8=$window;var tmp7=function(){f7(window8)};$window.onFocusOut.add(tmp7);var f8=$bind(this,this.__onLimeWindowFullscreen);var window9=$window;var tmp8=function(){f8(window9)};$window.onFullscreen.add(tmp8);var f9=$bind(this,this.__onLimeKeyDown);var window10=$window;var tmp9=function(keyCode,modifier){f9(window10,keyCode,modifier)};$window.onKeyDown.add(tmp9);var f10=$bind(this,this.__onLimeKeyUp);var window11=$window;var tmp10=function(keyCode1,modifier1){f10(window11,keyCode1,modifier1)};$window.onKeyUp.add(tmp10);var f11=$bind(this,this.__onLimeWindowLeave);var window12=$window;var tmp11=function(){f11(window12)};$window.onLeave.add(tmp11);var f12=$bind(this,this.__onLimeWindowMinimize);var window13=$window;var tmp12=function(){f12(window13)};$window.onMinimize.add(tmp12);var f13=$bind(this,this.__onLimeMouseDown);var window14=$window;var tmp13=function(x,y,button){f13(window14,x,y,button)};$window.onMouseDown.add(tmp13);var f14=$bind(this,this.__onLimeMouseMove);var window15=$window;var tmp14=function(x1,y1){f14(window15,x1,y1)};$window.onMouseMove.add(tmp14);var f15=$bind(this,this.__onLimeMouseMoveRelative);var window16=$window;var tmp15=function(x2,y2){f15(window16,x2,y2)};$window.onMouseMoveRelative.add(tmp15);var f16=$bind(this,this.__onLimeMouseUp);var window17=$window;var tmp16=function(x3,y3,button1){f16(window17,x3,y3,button1)};$window.onMouseUp.add(tmp16);var f17=$bind(this,this.__onLimeMouseWheel);var window18=$window;var tmp17=function(deltaX,deltaY,deltaMode){f17(window18,deltaX,deltaY,deltaMode)};$window.onMouseWheel.add(tmp17);var f18=$bind(this,this.__onLimeWindowMove);var window19=$window;var tmp18=function(x4,y4){f18(window19,x4,y4)};$window.onMove.add(tmp18);$window.onRender.add($bind(this,this.__onLimeRender));$window.onRenderContextLost.add($bind(this,this.__onLimeRenderContextLost));$window.onRenderContextRestored.add($bind(this,this.__onLimeRenderContextRestored));var f19=$bind(this,this.__onLimeWindowResize);var window20=$window;var tmp19=function(width,height){f19(window20,width,height)};$window.onResize.add(tmp19);var f20=$bind(this,this.__onLimeWindowRestore);var window21=$window;var tmp20=function(){f20(window21)};$window.onRestore.add(tmp20);var f21=$bind(this,this.__onLimeTextEdit);var window22=$window;var tmp21=function(text,start,length){f21(window22,text,start,length)};$window.onTextEdit.add(tmp21);var f22=$bind(this,this.__onLimeTextInput);var window23=$window;var tmp22=function(text1){f22(window23,text1)};$window.onTextInput.add(tmp22);this.__onLimeWindowCreate($window)},__onLimeGamepadAxisMove:function(gamepad,axis,value){try{openfl_ui_GameInput.__onGamepadAxisMove(gamepad,axis,value)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}},__onLimeGamepadButtonDown:function(gamepad,button){try{openfl_ui_GameInput.__onGamepadButtonDown(gamepad,button)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}},__onLimeGamepadButtonUp:function(gamepad,button){try{openfl_ui_GameInput.__onGamepadButtonUp(gamepad,button)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}},__onLimeGamepadConnect:function(gamepad){try{openfl_ui_GameInput.__onGamepadConnect(gamepad)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}var f=$bind(this,this.__onLimeGamepadAxisMove);var gamepad1=gamepad;var tmp=function(axis,value){f(gamepad1,axis,value)};gamepad.onAxisMove.add(tmp);var f1=$bind(this,this.__onLimeGamepadButtonDown);var gamepad2=gamepad;var tmp1=function(button){f1(gamepad2,button)};gamepad.onButtonDown.add(tmp1);var f2=$bind(this,this.__onLimeGamepadButtonUp);var gamepad3=gamepad;var tmp2=function(button1){f2(gamepad3,button1)};gamepad.onButtonUp.add(tmp2);var f3=$bind(this,this.__onLimeGamepadDisconnect);var gamepad4=gamepad;var tmp3=function(){f3(gamepad4)};gamepad.onDisconnect.add(tmp3)},__onLimeGamepadDisconnect:function(gamepad){try{openfl_ui_GameInput.__onGamepadDisconnect(gamepad)}catch(e){haxe_CallStack.lastException=e;this.__handleError(e instanceof js__$Boot_HaxeError?e.val:e)}},__onLimeKeyDown:function($window,keyCode,modifier){if(this.window==null||this.window!=$window){return}this.__onKey("keyDown",keyCode,modifier)},__onLimeKeyUp:function($window,keyCode,modifier){if(this.window==null||this.window!=$window){return}this.__onKey("keyUp",keyCode,modifier)},__onLimeModuleExit:function(code){if(this.window!=null){var event=null;event=new openfl_events_Event("deactivate");this.__broadcastEvent(event)}},__onLimeMouseDown:function($window,x,y,button){if(this.window==null||this.window!=$window){return}this.__dispatchPendingMouseEvent();var type;switch(button){case 1:type="middleMouseDown";break;case 2:type="rightMouseDown";break;default:type="mouseDown"}this.__onMouse(type,x*$window.__scale|0,y*$window.__scale|0,button);if(!this.showDefaultContextMenu&&button==2){$window.onMouseDown.cancel()}},__onLimeMouseMove:function($window,x,y){if(this.window==null||this.window!=$window){return}this.__pendingMouseEvent=true;this.__pendingMouseX=x*$window.__scale|0;this.__pendingMouseY=y*$window.__scale|0},__onLimeMouseMoveRelative:function($window,x,y){},__onLimeMouseUp:function($window,x,y,button){if(this.window==null||this.window!=$window){return}this.__dispatchPendingMouseEvent();var type;switch(button){case 1:type="middleMouseUp";break;case 2:type="rightMouseUp";break;default:type="mouseUp"}this.__onMouse(type,x*$window.__scale|0,y*$window.__scale|0,button);if(!this.showDefaultContextMenu&&button==2){$window.onMouseUp.cancel()}},__onLimeMouseWheel:function($window,deltaX,deltaY,deltaMode){if(this.window==null||this.window!=$window){return}this.__dispatchPendingMouseEvent();if(deltaMode==lime_ui_MouseWheelMode.PIXELS){this.__onMouseWheel(deltaX*$window.__scale|0,deltaY*$window.__scale|0,deltaMode)}else{this.__onMouseWheel(deltaX|0,deltaY|0,deltaMode)}},__onLimeRender:function(context){if(this.__rendering){return}this.__rendering=true;var event=null;this.__broadcastEvent(new openfl_events_Event("enterFrame"));this.__broadcastEvent(new openfl_events_Event("frameConstructed"));this.__broadcastEvent(new openfl_events_Event("exitFrame"));this.__renderable=true;this.__enterFrame(this.__deltaTime);this.__deltaTime=0;var shouldRender=this.__renderer!=null&&(this.__renderDirty||this.__forceRender);if(this.__invalidated&&shouldRender){this.__invalidated=false;event=new openfl_events_Event("render");this.__broadcastEvent(event)}this.__update(false,true);if(this.__renderer!=null){if(this.context3D!=null){var stage3D=this.stage3Ds.iterator();while(stage3D.hasNext()){var stage3D1=stage3D.next();this.context3D.__renderStage3D(stage3D1)}if(this.context3D.__present){shouldRender=true}}if(shouldRender){if(this.context3D==null){this.__renderer.__clear()}this.__renderer.__render(this)}else if(this.context3D==null){this.window.onRender.cancel()}if(this.context3D!=null){if(!this.context3D.__present){this.window.onRender.cancel()}else{if(!this.__renderer.__cleared){this.__renderer.__clear()}this.context3D.__present=false;this.context3D.__cleared=false}this.context3D.__bitmapDataPool.cleanup()}this.__renderer.__cleared=false;openfl_display_BitmapData.__pool.cleanup()}this.__rendering=false},__onLimeRenderContextLost:function(){this.__renderer=null;this.context3D=null;var stage3D=this.stage3Ds.iterator();while(stage3D.hasNext())stage3D.next().__lostContext()},__onLimeRenderContextRestored:function(context){this.__createRenderer();var stage3D=this.stage3Ds.iterator();while(stage3D.hasNext())stage3D.next().__restoreContext()},__onLimeTextEdit:function($window,text,start,length){},__onLimeTextInput:function($window,text){if(this.window==null||this.window!=$window){return}var stack=[];if(this.__focus==null){this.__getInteractive(stack)}else{this.__focus.__getInteractive(stack)}var event=new openfl_events_TextEvent("textInput",true,true,text);if(stack.length>0){stack.reverse();this.__dispatchStack(event,stack)}else{this.__dispatchEvent(event)}if(event.isDefaultPrevented()){$window.onTextInput.cancel()}},__onLimeTouchCancel:function(touch){if(this.__primaryTouch==touch){this.__primaryTouch=null}this.__onTouch("touchEnd",touch)},__onLimeTouchMove:function(touch){this.__onTouch("touchMove",touch)},__onLimeTouchEnd:function(touch){if(this.__primaryTouch==touch){this.__primaryTouch=null}this.__onTouch("touchEnd",touch)},__onLimeTouchStart:function(touch){if(this.__primaryTouch==null){this.__primaryTouch=touch}this.__onTouch("touchBegin",touch)},__onLimeUpdate:function(deltaTime){this.__deltaTime=deltaTime;this.__dispatchPendingMouseEvent()},__onLimeWindowActivate:function($window){if(this.window==null||this.window!=$window){return}},__onLimeWindowClose:function($window){if(this.window==$window){this.window=null}this.__primaryTouch=null;var event=null;event=new openfl_events_Event("deactivate");this.__broadcastEvent(event)},__onLimeWindowCreate:function($window){if(this.window==null||this.window!=$window){return}if($window.context!=null){this.__createRenderer()}},__onLimeWindowDeactivate:function($window){if(this.window==null||this.window!=$window){return}},__onLimeWindowDropFile:function($window,file){},__onLimeWindowEnter:function($window){},__onLimeWindowExpose:function($window){if(this.window==null||this.window!=$window){return}this.__renderDirty=true},__onLimeWindowFocusIn:function($window){if(this.window==null||this.window!=$window){return}this.__renderDirty=true;var event=null;event=new openfl_events_Event("activate");this.__broadcastEvent(event);this.set_focus(this.__cacheFocus)},__onLimeWindowFocusOut:function($window){if(this.window==null||this.window!=$window){return}this.__primaryTouch=null;var event=null;event=new openfl_events_Event("deactivate");this.__broadcastEvent(event);var currentFocus=this.get_focus();this.set_focus(null);this.__cacheFocus=currentFocus},__onLimeWindowFullscreen:function($window){if(this.window==null||this.window!=$window){return}this.__resize();if(!this.__wasFullscreen){this.__wasFullscreen=true;if(this.__displayState==2){this.__displayState=1}this.__dispatchEvent(new openfl_events_FullScreenEvent("fullScreen",false,false,true,true))}},__onLimeWindowLeave:function($window){if(this.window==null||this.window!=$window||openfl_events_MouseEvent.__buttonDown){return}this.__dispatchPendingMouseEvent();var event=null;event=new openfl_events_Event("mouseLeave");this.__dispatchEvent(event)},__onLimeWindowMinimize:function($window){if(this.window==null||this.window!=$window){return}},__onLimeWindowMove:function($window,x,y){},__onLimeWindowResize:function($window,width,height){if(this.window==null||this.window!=$window){return}this.__resize();if(this.__wasFullscreen&&!$window.__fullscreen){this.__wasFullscreen=false;this.__displayState=2;this.__dispatchEvent(new openfl_events_FullScreenEvent("fullScreen",false,false,false,true))}},__onLimeWindowRestore:function($window){if(this.window==null||this.window!=$window){return}if(this.__wasFullscreen&&!$window.__fullscreen){this.__wasFullscreen=false;this.__displayState=2;this.__dispatchEvent(new openfl_events_FullScreenEvent("fullScreen",false,false,false,true))}},__onMouse:function(type,x,y,button){if(button>2){return}var targetPoint=openfl_geom_Point.__pool.get();targetPoint.setTo(x,y);var _this=this.__displayMatrix;var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){targetPoint.x=-_this.tx;targetPoint.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-targetPoint.y)+_this.d*(targetPoint.x-_this.tx));targetPoint.y=1/norm*(_this.a*(targetPoint.y-_this.ty)+_this.b*(_this.tx-targetPoint.x));targetPoint.x=px}this.__mouseX=targetPoint.x;this.__mouseY=targetPoint.y;var stack=[];var target=null;if(this.__hitTest(this.__mouseX,this.__mouseY,true,stack,true,this)){target=stack[stack.length-1]}else{target=this;stack=[this]}if(target==null){target=this}var clickType=null;switch(type){case"middleMouseDown":this.__mouseDownMiddle=target;break;case"middleMouseUp":if(this.__mouseDownMiddle==target){clickType="middleClick"}this.__mouseDownMiddle=null;break;case"mouseDown":if(target.__allowMouseFocus()){if(this.get_focus()!=null){var focusEvent=new openfl_events_FocusEvent("mouseFocusChange",true,true,target,false,0);this.__dispatchStack(focusEvent,stack);if(!focusEvent.isDefaultPrevented()){this.set_focus(target)}}else{this.set_focus(target)}}else{this.set_focus(null)}this.__mouseDownLeft=target;openfl_events_MouseEvent.__buttonDown=true;break;case"mouseUp":if(this.__mouseDownLeft!=null){openfl_events_MouseEvent.__buttonDown=false;if(this.__mouseDownLeft==target){clickType="click"}else{var event=null;event=openfl_events_MouseEvent.__create("releaseOutside",1,this.__mouseX,this.__mouseY,new openfl_geom_Point(this.__mouseX,this.__mouseY),this);this.__mouseDownLeft.dispatchEvent(event)}this.__mouseDownLeft=null}break;case"rightMouseDown":this.__mouseDownRight=target;break;case"rightMouseUp":if(this.__mouseDownRight==target){clickType="rightClick"}this.__mouseDownRight=null;break;default:}var localPoint=openfl_geom_Point.__pool.get();var event1=null;event1=openfl_events_MouseEvent.__create(type,button,this.__mouseX,this.__mouseY,target.__globalToLocal(targetPoint,localPoint),target);this.__dispatchStack(event1,stack);if(clickType!=null){event1=openfl_events_MouseEvent.__create(clickType,button,this.__mouseX,this.__mouseY,target.__globalToLocal(targetPoint,localPoint),target);this.__dispatchStack(event1,stack);if(type=="mouseUp"&&js_Boot.__cast(target,openfl_display_InteractiveObject).doubleClickEnabled){var currentTime=openfl_Lib.getTimer();if(currentTime-this.__lastClickTime<500){event1=openfl_events_MouseEvent.__create("doubleClick",button,this.__mouseX,this.__mouseY,target.__globalToLocal(targetPoint,localPoint),target);this.__dispatchStack(event1,stack);this.__lastClickTime=0}else{this.__lastClickTime=currentTime}}}if(openfl_ui_Mouse.__cursor=="auto"&&!openfl_ui_Mouse.__hidden){var cursor=null;if(this.__mouseDownLeft!=null){cursor=this.__mouseDownLeft.__getCursor()}else{var _g=0;while(_g<stack.length){cursor=stack[_g++].__getCursor();if(cursor!=null){this.window.set_cursor(openfl_ui__$MouseCursor_MouseCursor_$Impl_$.toLimeCursor(cursor));break}}}if(cursor==null){this.window.set_cursor(lime_ui_MouseCursor.ARROW)}}var event2;if(target!=this.__mouseOverTarget){if(this.__mouseOverTarget!=null){event2=openfl_events_MouseEvent.__create("mouseOut",button,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(targetPoint,localPoint),this.__mouseOverTarget);this.__dispatchStack(event2,this.__mouseOutStack)}}var item;var i=0;while(i<this.__rollOutStack.length){item=this.__rollOutStack[i];if(stack.indexOf(item)==-1){HxOverrides.remove(this.__rollOutStack,item);event2=openfl_events_MouseEvent.__create("rollOut",button,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(targetPoint,localPoint),this.__mouseOverTarget);event2.bubbles=false;this.__dispatchTarget(item,event2)}else{++i}}var _g1=0;while(_g1<stack.length){var item1=stack[_g1];++_g1;if(this.__rollOutStack.indexOf(item1)==-1&&this.__mouseOverTarget!=null){if(item1.hasEventListener("rollOver")){event2=openfl_events_MouseEvent.__create("rollOver",button,this.__mouseX,this.__mouseY,this.__mouseOverTarget.__globalToLocal(targetPoint,localPoint),item1);event2.bubbles=false;this.__dispatchTarget(item1,event2)}if(item1.hasEventListener("rollOut")||item1.hasEventListener("rollOver")){this.__rollOutStack.push(item1)}}}if(target!=this.__mouseOverTarget){if(target!=null){event2=openfl_events_MouseEvent.__create("mouseOver",button,this.__mouseX,this.__mouseY,target.__globalToLocal(targetPoint,localPoint),target);this.__dispatchStack(event2,stack)}this.__mouseOverTarget=target;this.__mouseOutStack=stack}if(this.__dragObject!=null){this.__drag(targetPoint);var dropTarget=null;if(this.__mouseOverTarget==this.__dragObject){var cacheMouseEnabled=this.__dragObject.mouseEnabled;var cacheMouseChildren=this.__dragObject.mouseChildren;this.__dragObject.mouseEnabled=false;this.__dragObject.mouseChildren=false;var stack1=[];if(this.__hitTest(this.__mouseX,this.__mouseY,true,stack1,true,this)){dropTarget=stack1[stack1.length-1]}this.__dragObject.mouseEnabled=cacheMouseEnabled;this.__dragObject.mouseChildren=cacheMouseChildren}else if(this.__mouseOverTarget!=this){dropTarget=this.__mouseOverTarget}this.__dragObject.dropTarget=dropTarget}openfl_geom_Point.__pool.release(targetPoint);openfl_geom_Point.__pool.release(localPoint)},__onMouseWheel:function(deltaX,deltaY,deltaMode){var x=this.__mouseX;var y=this.__mouseY;var stack=[];var target=null;if(this.__hitTest(this.__mouseX,this.__mouseY,true,stack,true,this)){target=stack[stack.length-1]}else{target=this;stack=[this]}if(target==null){target=this}var targetPoint=openfl_geom_Point.__pool.get();targetPoint.setTo(x,y);var _this=this.__displayMatrix;var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){targetPoint.x=-_this.tx;targetPoint.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-targetPoint.y)+_this.d*(targetPoint.x-_this.tx));targetPoint.y=1/norm*(_this.a*(targetPoint.y-_this.ty)+_this.b*(_this.tx-targetPoint.x));targetPoint.x=px}this.__dispatchStack(openfl_events_MouseEvent.__create("mouseWheel",0,this.__mouseX,this.__mouseY,target.__globalToLocal(targetPoint,targetPoint),target,deltaY|0),stack);openfl_geom_Point.__pool.release(targetPoint)},__onTouch:function(type,touch){var targetPoint=openfl_geom_Point.__pool.get();targetPoint.setTo(Math.round(touch.x*this.window.__width*this.window.__scale),Math.round(touch.y*this.window.__height*this.window.__scale));var _this=this.__displayMatrix;var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){targetPoint.x=-_this.tx;targetPoint.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-targetPoint.y)+_this.d*(targetPoint.x-_this.tx));targetPoint.y=1/norm*(_this.a*(targetPoint.y-_this.ty)+_this.b*(_this.tx-targetPoint.x));targetPoint.x=px}var touchX=targetPoint.x;var touchY=targetPoint.y;var stack=[];var target=null;if(this.__hitTest(touchX,touchY,false,stack,true,this)){target=stack[stack.length-1]}else{target=this;stack=[this]}if(target==null){target=this}var touchId=touch.id;var touchData=null;if(this.__touchData.h.hasOwnProperty(touchId)){touchData=this.__touchData.h[touchId]}else{touchData=openfl__$internal_utils_TouchData.__pool.get();touchData.reset();touchData.touch=touch;this.__touchData.h[touchId]=touchData}var touchType=null;var releaseTouchData=false;switch(type){case"touchBegin":touchData.touchDownTarget=target;break;case"touchEnd":if(touchData.touchDownTarget==target){touchType="touchTap"}touchData.touchDownTarget=null;releaseTouchData=true;break;default:}var localPoint=openfl_geom_Point.__pool.get();var isPrimaryTouchPoint=this.__primaryTouch==touch;var touchEvent=openfl_events_TouchEvent.__create(type,null,touchX,touchY,target.__globalToLocal(targetPoint,localPoint),target);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.pressure=touch.pressure;this.__dispatchStack(touchEvent,stack);if(touchType!=null){touchEvent=openfl_events_TouchEvent.__create(touchType,null,touchX,touchY,target.__globalToLocal(targetPoint,localPoint),target);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.pressure=touch.pressure;this.__dispatchStack(touchEvent,stack)}var touchOverTarget=touchData.touchOverTarget;if(target!=touchOverTarget&&touchOverTarget!=null){touchEvent=openfl_events_TouchEvent.__create("touchOut",null,touchX,touchY,touchOverTarget.__globalToLocal(targetPoint,localPoint),touchOverTarget);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.pressure=touch.pressure;this.__dispatchTarget(touchOverTarget,touchEvent)}var touchOutStack=touchData.rollOutStack;var item;var i=0;while(i<touchOutStack.length){item=touchOutStack[i];if(stack.indexOf(item)==-1){HxOverrides.remove(touchOutStack,item);touchEvent=openfl_events_TouchEvent.__create("touchRollOut",null,touchX,touchY,touchOverTarget.__globalToLocal(targetPoint,localPoint),touchOverTarget);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.bubbles=false;touchEvent.pressure=touch.pressure;this.__dispatchTarget(item,touchEvent)}else{++i}}var _g=0;while(_g<stack.length){var item1=stack[_g];++_g;if(touchOutStack.indexOf(item1)==-1){if(item1.hasEventListener("touchRollOver")){touchEvent=openfl_events_TouchEvent.__create("touchRollOver",null,touchX,touchY,touchOverTarget.__globalToLocal(targetPoint,localPoint),item1);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.bubbles=false;touchEvent.pressure=touch.pressure;this.__dispatchTarget(item1,touchEvent)}if(item1.hasEventListener("touchRollOut")){touchOutStack.push(item1)}}}if(target!=touchOverTarget){if(target!=null){touchEvent=openfl_events_TouchEvent.__create("touchOver",null,touchX,touchY,target.__globalToLocal(targetPoint,localPoint),target);touchEvent.touchPointID=touchId;touchEvent.isPrimaryTouchPoint=isPrimaryTouchPoint;touchEvent.bubbles=true;touchEvent.pressure=touch.pressure;this.__dispatchTarget(target,touchEvent)}touchData.touchOverTarget=target}openfl_geom_Point.__pool.release(targetPoint);openfl_geom_Point.__pool.release(localPoint);if(releaseTouchData){this.__touchData.remove(touchId);touchData.reset();openfl__$internal_utils_TouchData.__pool.release(touchData)}},__registerLimeModule:function(application){application.onCreateWindow.add($bind(this,this.__onLimeCreateWindow));application.onUpdate.add($bind(this,this.__onLimeUpdate));application.onExit.add($bind(this,this.__onLimeModuleExit),false,0);var gamepad=lime_ui_Gamepad.devices.iterator();while(gamepad.hasNext())this.__onLimeGamepadConnect(gamepad.next());lime_ui_Gamepad.onConnect.add($bind(this,this.__onLimeGamepadConnect));lime_ui_Touch.onStart.add($bind(this,this.__onLimeTouchStart));lime_ui_Touch.onMove.add($bind(this,this.__onLimeTouchMove));lime_ui_Touch.onEnd.add($bind(this,this.__onLimeTouchEnd));lime_ui_Touch.onCancel.add($bind(this,this.__onLimeTouchCancel))},__resize:function(){var cacheWidth=this.stageWidth;var cacheHeight=this.stageHeight;var windowWidth=this.window.__width*this.window.__scale|0;var windowHeight=this.window.__height*this.window.__scale|0;this.__logicalWidth=windowWidth;this.__logicalHeight=windowHeight;this.__displayMatrix.identity();if(this.get_fullScreenSourceRect()!=null&&this.window.__fullscreen){this.stageWidth=this.get_fullScreenSourceRect().width|0;this.stageHeight=this.get_fullScreenSourceRect().height|0;var displayScaleX=windowWidth/this.stageWidth;var displayScaleY=windowHeight/this.stageHeight;this.__displayMatrix.translate(-this.get_fullScreenSourceRect().x,-this.get_fullScreenSourceRect().y);this.__displayMatrix.scale(displayScaleX,displayScaleY);this.__displayRect.setTo(this.get_fullScreenSourceRect().get_left(),this.get_fullScreenSourceRect().get_right(),this.get_fullScreenSourceRect().get_top(),this.get_fullScreenSourceRect().get_bottom())}else{if(this.__logicalWidth==0&&this.__logicalHeight==0){this.stageWidth=windowWidth;this.stageHeight=windowHeight}else{this.stageWidth=this.__logicalWidth;this.stageHeight=this.__logicalHeight;var targetScale=Math.min(windowWidth/this.stageWidth,windowHeight/this.stageHeight);var offsetX=Math.round((windowWidth-this.stageWidth*targetScale)/2);var offsetY=Math.round((windowHeight-this.stageHeight*targetScale)/2);this.__displayMatrix.scale(targetScale,targetScale);this.__displayMatrix.translate(offsetX,offsetY)}this.__displayRect.setTo(0,0,this.stageWidth,this.stageHeight)}if(this.context3D!=null){this.context3D.configureBackBuffer(windowWidth,windowHeight,0,true,true,true)}var stage3D=this.stage3Ds.iterator();while(stage3D.hasNext())stage3D.next().__resize(windowWidth,windowHeight);if(this.__renderer!=null){this.__renderer.__resize(windowWidth,windowHeight)}if(this.stageWidth!=cacheWidth||this.stageHeight!=cacheHeight){this.__renderDirty=true;this.__setTransformDirty();var event=null;event=new openfl_events_Event("resize");this.__dispatchEvent(event)}},__setLogicalSize:function(width,height){this.__logicalWidth=width;this.__logicalHeight=height;this.__resize()},__startDrag:function(sprite,lockCenter,bounds){if(bounds==null){this.__dragBounds=null}else{this.__dragBounds=new openfl_geom_Rectangle;var right=bounds.get_right();var bottom=bounds.get_bottom();this.__dragBounds.x=right<bounds.x?right:bounds.x;this.__dragBounds.y=bottom<bounds.y?bottom:bounds.y;this.__dragBounds.width=Math.abs(bounds.width);this.__dragBounds.height=Math.abs(bounds.height)}this.__dragObject=sprite;if(this.__dragObject!=null){if(lockCenter){this.__dragOffsetX=0;this.__dragOffsetY=0}else{var mouse=openfl_geom_Point.__pool.get();mouse.setTo(this.get_mouseX(),this.get_mouseY());var parent=this.__dragObject.parent;if(parent!=null){var _this=parent.__getWorldTransform();var norm=_this.a*_this.d-_this.b*_this.c;if(norm==0){mouse.x=-_this.tx;mouse.y=-_this.ty}else{var px=1/norm*(_this.c*(_this.ty-mouse.y)+_this.d*(mouse.x-_this.tx));mouse.y=1/norm*(_this.a*(mouse.y-_this.ty)+_this.b*(_this.tx-mouse.x));mouse.x=px}}this.__dragOffsetX=this.__dragObject.get_x()-mouse.x;this.__dragOffsetY=this.__dragObject.get_y()-mouse.y;openfl_geom_Point.__pool.release(mouse)}}},__stopDrag:function(sprite){this.__dragBounds=null;this.__dragObject=null},__update:function(transformOnly,updateChildren){if(transformOnly){if(this.__transformDirty){openfl_display_DisplayObjectContainer.prototype.__update.call(this,true,updateChildren);if(updateChildren){this.__transformDirty=false}}}else if(this.__transformDirty||this.__renderDirty){openfl_display_DisplayObjectContainer.prototype.__update.call(this,false,updateChildren);if(updateChildren){if(openfl_display_DisplayObject.__supportDOM){this.__wasDirty=true}}}else if(!this.__renderDirty&&this.__wasDirty){openfl_display_DisplayObjectContainer.prototype.__update.call(this,false,updateChildren);if(updateChildren){this.__wasDirty=false}}},set_color:function(value){if(value==null){this.__transparent=true;value=0}else{this.__transparent=false}if(this.__color!=value){this.__colorSplit[0]=((value&16711680)>>>16)/255;this.__colorSplit[1]=((value&65280)>>>8)/255;this.__colorSplit[2]=(value&255)/255;this.__colorString="#"+StringTools.hex(value&16777215,6);this.__renderDirty=true;this.__color=-16777216|value&16777215}return value},get_focus:function(){return this.__focus},set_focus:function(value){if(value!=this.__focus){var oldFocus=this.__focus;this.__focus=value;this.__cacheFocus=value;if(oldFocus!=null){var event=new openfl_events_FocusEvent("focusOut",true,false,value,false,0);var stack=[];oldFocus.__getInteractive(stack);stack.reverse();this.__dispatchStack(event,stack)}if(value!=null){var event1=new openfl_events_FocusEvent("focusIn",true,false,oldFocus,false,0);var stack1=[];value.__getInteractive(stack1);stack1.reverse();this.__dispatchStack(event1,stack1)}}return value},get_fullScreenSourceRect:function(){if(this.__fullScreenSourceRect==null){return null}else{return this.__fullScreenSourceRect.clone()}},set_height:function(value){return this.get_height()},get_mouseX:function(){return this.__mouseX},get_mouseY:function(){return this.__mouseY},get_quality:function(){return this.__quality},set_rotation:function(value){return 0},set_scaleX:function(value){return 0},set_scaleY:function(value){return 0},get_tabEnabled:function(){return false},get_tabIndex:function(){return-1},set_transform:function(value){return this.get_transform()},set_width:function(value){return this.get_width()},set_x:function(value){return 0},set_y:function(value){return 0},__class__:openfl_display_Stage,__properties__:$extend(openfl_display_DisplayObjectContainer.prototype.__properties__,{get_quality:"get_quality",get_fullScreenSourceRect:"get_fullScreenSourceRect",set_focus:"set_focus",get_focus:"get_focus",set_color:"set_color"})});var openfl_display_Stage3D=function(stage){openfl_events_EventDispatcher.call(this);this.__stage=stage;this.__height=0;this.__projectionTransform=new openfl_geom_Matrix3D;this.__renderTransform=new openfl_geom_Matrix3D;this.__width=0;this.__x=0;this.__y=0;this.visible=true;if(stage.stageWidth>0&&stage.stageHeight>0){this.__resize(stage.stageWidth,stage.stageHeight)}};$hxClasses["openfl.display.Stage3D"]=openfl_display_Stage3D;openfl_display_Stage3D.__name__="openfl.display.Stage3D";openfl_display_Stage3D.__super__=openfl_events_EventDispatcher;openfl_display_Stage3D.prototype=$extend(openfl_events_EventDispatcher.prototype,{context3D:null,visible:null,__contextLost:null,__contextRequested:null,__height:null,__indexBuffer:null,__projectionTransform:null,__renderTransform:null,__stage:null,__vertexBuffer:null,__width:null,__x:null,__y:null,__canvas:null,__createContext:function(){if(this.__stage.context3D!=null){this.context3D=new openfl_display3D_Context3D(this.__stage,this.__stage.context3D.__contextState,this);this.__dispatchCreate()}else{this.__dispatchError()}},__dispatchError:function(){this.__contextRequested=false;this.dispatchEvent(new openfl_events_ErrorEvent("error",false,false,"Context3D not available"))},__dispatchCreate:function(){if(this.__contextRequested){this.__contextRequested=false;this.dispatchEvent(new openfl_events_Event("context3DCreate"))}},__lostContext:function(){this.__contextLost=true;if(this.context3D!=null){this.context3D.__dispose();this.__contextRequested=true}},__resize:function(width,height){if(width!=this.__width||height!=this.__height){if(this.__canvas!=null){this.__canvas.width=width;this.__canvas.height=height}this.__projectionTransform.copyRawDataFrom(openfl__$Vector_Vector_$Impl_$.toFloatVector(null,null,null,[2/(width>0?width:1),0,0,0,0,-2/(height>0?height:1),0,0,0,0,-.001,0,-1,1,0,1]));this.__renderTransform.identity();this.__renderTransform.appendTranslation(this.__x,this.__y,0);this.__renderTransform.append(this.__projectionTransform);this.__width=width;this.__height=height}},__restoreContext:function(){this.__contextLost=false;this.__createContext()},get_x:function(){return this.__x},get_y:function(){return this.__y},__class__:openfl_display_Stage3D,__properties__:{get_y:"get_y",get_x:"get_x"}});var openfl_display_Tilemap=function(width,height,tileset,smoothing){if(smoothing==null){smoothing=true}openfl_display_DisplayObject.call(this);this.__tileset=tileset;this.smoothing=smoothing;this.tileAlphaEnabled=true;this.tileBlendModeEnabled=true;this.tileColorTransformEnabled=true;this.__group=new openfl_display_TileContainer;this.__group.set_tileset(tileset);this.__width=width;this.__height=height;this.__type=openfl__$internal_renderer_DisplayObjectType.TILEMAP};$hxClasses["openfl.display.Tilemap"]=openfl_display_Tilemap;openfl_display_Tilemap.__name__="openfl.display.Tilemap";openfl_display_Tilemap.__interfaces__=[openfl_display_ITileContainer];openfl_display_Tilemap.__super__=openfl_display_DisplayObject;openfl_display_Tilemap.prototype=$extend(openfl_display_DisplayObject.prototype,{tileAlphaEnabled:null,tileBlendModeEnabled:null,tileColorTransformEnabled:null,smoothing:null,__group:null,__tileset:null,__buffer:null,__height:null,__width:null,addTile:function(tile){return this.__group.addTile(tile)},__enterFrame:function(deltaTime){if(this.__group.__dirty){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}},__getBounds:function(rect,matrix){var bounds=openfl_geom_Rectangle.__pool.get();bounds.setTo(0,0,this.__width,this.__height);bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}this.__getRenderTransform();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var px=norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx));var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;var py=norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x));if(px>0&&py>0&&px<=this.__width&&py<=this.__height){if(stack!=null&&!interactiveOnly){stack.push(hitObject)}return true}return false},get_height:function(){return this.__height*Math.abs(this.get_scaleY())},set_height:function(value){this.__height=value|0;return this.__height*Math.abs(this.get_scaleY())},get_width:function(){return this.__width*Math.abs(this.__scaleX)},set_width:function(value){this.__width=value|0;return this.__width*Math.abs(this.__scaleX)},__class__:openfl_display_Tilemap});var openfl_display__$Tileset_TileData=function(rect){if(rect!=null){this.x=rect.x|0;this.y=rect.y|0;this.width=rect.width|0;this.height=rect.height|0}};$hxClasses["openfl.display._Tileset.TileData"]=openfl_display__$Tileset_TileData;openfl_display__$Tileset_TileData.__name__="openfl.display._Tileset.TileData";openfl_display__$Tileset_TileData.prototype={height:null,width:null,x:null,y:null,__uvHeight:null,__uvWidth:null,__uvX:null,__uvY:null,__update:function(bitmapData){if(bitmapData!=null){var bitmapWidth=bitmapData.width;var bitmapHeight=bitmapData.height;this.__uvX=this.x/bitmapWidth;this.__uvY=this.y/bitmapHeight;this.__uvWidth=(this.x+this.width)/bitmapWidth;this.__uvHeight=(this.y+this.height)/bitmapHeight}},__class__:openfl_display__$Tileset_TileData};var openfl_display_Window=function(application,attributes){lime_ui_Window.call(this,application,attributes);this.stage=new openfl_display_Stage(this,Object.prototype.hasOwnProperty.call(attributes.context,"background")?attributes.context.background:16777215);if(Object.prototype.hasOwnProperty.call(attributes,"parameters")){try{this.stage.get_loaderInfo().parameters=attributes.parameters}catch(e){haxe_CallStack.lastException=e}}if(Object.prototype.hasOwnProperty.call(attributes,"resizable")&&!attributes.resizable){this.stage.__setLogicalSize(attributes.width,attributes.height)}application.addModule(this.stage)};$hxClasses["openfl.display.Window"]=openfl_display_Window;openfl_display_Window.__name__="openfl.display.Window";openfl_display_Window.__super__=lime_ui_Window;openfl_display_Window.prototype=$extend(lime_ui_Window.prototype,{__class__:openfl_display_Window});var openfl_display3D_Context3D=function(stage,contextState,stage3D){this.driverInfo="OpenGL (Direct blitting)";this.backBufferWidth=0;this.backBufferHeight=0;openfl_events_EventDispatcher.call(this);this.__stage=stage;this.__contextState=contextState;this.__stage3D=stage3D;this.__context=stage.window.context;this.gl=this.__context.webgl;if(this.__contextState==null){this.__contextState=new openfl__$internal_renderer_context3D_Context3DState}this.__state=new openfl__$internal_renderer_context3D_Context3DState;this.__vertexConstants=new Float32Array(512);this.__fragmentConstants=new Float32Array(512);var array=[1,1,1,1];var this1;if(array!=null){this1=new Float32Array(array)}else{this1=null}this.__positionScale=this1;this.__programs=new haxe_ds_StringMap;if(openfl_display3D_Context3D.__glMaxViewportDims==-1){openfl_display3D_Context3D.__glMaxViewportDims=this.gl.getParameter(this.gl.MAX_VIEWPORT_DIMS)}this.maxBackBufferWidth=openfl_display3D_Context3D.__glMaxViewportDims;this.maxBackBufferHeight=openfl_display3D_Context3D.__glMaxViewportDims;if(openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy==-1){var extension=this.gl.getExtension("EXT_texture_filter_anisotropic");if(extension==null||extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT==null){extension=this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}if(extension==null||extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT==null){extension=this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")}if(extension!=null){openfl_display3D_Context3D.__glTextureMaxAnisotropy=extension.TEXTURE_MAX_ANISOTROPY_EXT;openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy=this.gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else{openfl_display3D_Context3D.__glTextureMaxAnisotropy=0;openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy=0}}if(openfl_display3D_Context3D.__glDepthStencil==-1){openfl_display3D_Context3D.__glDepthStencil=this.gl.DEPTH_STENCIL}if(openfl_display3D_Context3D.__driverInfo==null){openfl_display3D_Context3D.__driverInfo="OpenGL Vendor="+this.gl.getParameter(this.gl.VENDOR)+" Version="+this.gl.getParameter(this.gl.VERSION)+" Renderer="+this.gl.getParameter(this.gl.RENDERER)+" GLSL="+this.gl.getParameter(this.gl.SHADING_LANGUAGE_VERSION)}this.driverInfo=openfl_display3D_Context3D.__driverInfo;this.__quadIndexBufferElements=16383;this.__quadIndexBufferCount=this.__quadIndexBufferElements*6;var elements=this.__quadIndexBufferCount;var this2;if(elements!=null){this2=new Uint16Array(elements)}else{this2=null}var data=this2;var index=0;var vertex=0;var _g=0;var _g1=this.__quadIndexBufferElements;while(_g<_g1){++_g;data[index]=vertex;data[index+1]=vertex+1;data[index+2]=vertex+2;data[index+3]=vertex+2;data[index+4]=vertex+1;data[index+5]=vertex+3;index=index+6;vertex=vertex+4}this.__quadIndexBuffer=this.createIndexBuffer(this.__quadIndexBufferCount);this.__quadIndexBuffer.uploadFromTypedArray(data);this.__bitmapDataPool=new openfl__$internal_renderer_BitmapDataPool(30,this)};$hxClasses["openfl.display3D.Context3D"]=openfl_display3D_Context3D;openfl_display3D_Context3D.__name__="openfl.display3D.Context3D";openfl_display3D_Context3D.__super__=openfl_events_EventDispatcher;openfl_display3D_Context3D.prototype=$extend(openfl_events_EventDispatcher.prototype,{backBufferHeight:null,backBufferWidth:null,driverInfo:null,maxBackBufferHeight:null,maxBackBufferWidth:null,gl:null,__backBufferAntiAlias:null,__backBufferTexture:null,__backBufferWantsBestResolution:null,__backBufferWantsBestResolutionOnBrowserZoom:null,__bitmapDataPool:null,__cleared:null,__context:null,__contextState:null,__renderStage3DProgram:null,__enableErrorChecking:null,__fragmentConstants:null,__frontBufferTexture:null,__positionScale:null,__present:null,__programs:null,__quadIndexBuffer:null,__quadIndexBufferCount:null,__quadIndexBufferElements:null,__stage:null,__stage3D:null,__state:null,__vertexConstants:null,clear:function(red,green,blue,alpha,depth,stencil,mask){if(mask==null){mask=7}if(stencil==null){stencil=0}if(depth==null){depth=1}if(alpha==null){alpha=1}if(blue==null){blue=0}if(green==null){green=0}if(red==null){red=0}this.__flushGLFramebuffer();this.__flushGLViewport();var clearMask=0;if((mask&1)!=0){if(this.__state.renderToTexture==null){if(this.__stage.context3D==this&&!this.__stage.__renderer.__cleared){this.__stage.__renderer.__cleared=true}this.__cleared=true}clearMask=0|this.gl.COLOR_BUFFER_BIT;if(this.__contextState.colorMaskRed!=true||this.__contextState.colorMaskGreen!=true||this.__contextState.colorMaskBlue!=true||this.__contextState.colorMaskAlpha!=true){this.gl.colorMask(true,true,true,true);this.__contextState.colorMaskRed=true;this.__contextState.colorMaskGreen=true;this.__contextState.colorMaskBlue=true;this.__contextState.colorMaskAlpha=true}this.gl.clearColor(red,green,blue,alpha)}if((mask&2)!=0){clearMask|=this.gl.DEPTH_BUFFER_BIT;if(this.__contextState.depthMask!=true){this.gl.depthMask(true);this.__contextState.depthMask=true}this.gl.clearDepth(depth)}if((mask&4)!=0){clearMask|=this.gl.STENCIL_BUFFER_BIT;if(this.__contextState.stencilWriteMask!=255){this.gl.stencilMask(255);this.__contextState.stencilWriteMask=255}this.gl.clearStencil(stencil);this.__contextState.stencilWriteMask=255}if(clearMask==0){return}this.__setGLScissorTest(false);this.gl.clear(clearMask)},configureBackBuffer:function(width,height,antiAlias,enableDepthAndStencil,wantsBestResolution,wantsBestResolutionOnBrowserZoom){if(wantsBestResolutionOnBrowserZoom==null){wantsBestResolutionOnBrowserZoom=false}if(wantsBestResolution==null){wantsBestResolution=false}if(enableDepthAndStencil==null){enableDepthAndStencil=true}if(this.__stage3D==null){this.backBufferWidth=width;this.backBufferHeight=height;this.__backBufferAntiAlias=antiAlias;this.__state.backBufferEnableDepthAndStencil=enableDepthAndStencil;this.__backBufferWantsBestResolution=wantsBestResolution;this.__backBufferWantsBestResolutionOnBrowserZoom=wantsBestResolutionOnBrowserZoom}else{if(this.__backBufferTexture==null||this.backBufferWidth!=width||this.backBufferHeight!=height){if(this.__backBufferTexture!=null){this.__backBufferTexture.dispose()}if(this.__frontBufferTexture!=null){this.__frontBufferTexture.dispose()}this.__backBufferTexture=this.createRectangleTexture(width,height,1,true);this.__frontBufferTexture=this.createRectangleTexture(width,height,1,true);if(this.__stage3D.__vertexBuffer==null){this.__stage3D.__vertexBuffer=this.createVertexBuffer(4,5)}var vertexData=openfl__$Vector_Vector_$Impl_$.toFloatVector(null,null,null,[width,height,0,1,1,0,height,0,0,1,width,0,0,1,0,0,0,0,0,0]);this.__stage3D.__vertexBuffer.uploadFromVector(vertexData,0,20);if(this.__stage3D.__indexBuffer==null){this.__stage3D.__indexBuffer=this.createIndexBuffer(6);var indexData=openfl__$Vector_Vector_$Impl_$.toIntVector(null,null,null,[0,1,2,2,1,3]);this.__stage3D.__indexBuffer.uploadFromVector(indexData,0,6)}}this.backBufferWidth=width;this.backBufferHeight=height;this.__backBufferAntiAlias=antiAlias;this.__state.backBufferEnableDepthAndStencil=enableDepthAndStencil;this.__backBufferWantsBestResolution=wantsBestResolution;this.__backBufferWantsBestResolutionOnBrowserZoom=wantsBestResolutionOnBrowserZoom;this.__state.__primaryGLFramebuffer=this.__backBufferTexture.__getGLFramebuffer(enableDepthAndStencil,antiAlias,0);this.__frontBufferTexture.__getGLFramebuffer(enableDepthAndStencil,antiAlias,0)}},createIndexBuffer:function(numIndices,bufferUsage){if(bufferUsage==null){bufferUsage=1}return new openfl_display3D_IndexBuffer3D(this,numIndices,bufferUsage)},createProgram:function(format){if(format==null){format=0}return new openfl_display3D_Program3D(this,format)},createRectangleTexture:function(width,height,format,optimizeForRenderToTexture){return new openfl_display3D_textures_RectangleTexture(this,width,height,openfl_display3D__$Context3DTextureFormat_Context3DTextureFormat_$Impl_$.toString(format),optimizeForRenderToTexture)},createVertexBuffer:function(numVertices,data32PerVertex,bufferUsage){if(bufferUsage==null){bufferUsage=1}return new openfl_display3D_VertexBuffer3D(this,numVertices,data32PerVertex,openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$.toString(bufferUsage))},drawTriangles:function(indexBuffer,firstIndex,numTriangles){if(numTriangles==null){numTriangles=-1}if(firstIndex==null){firstIndex=0}if(this.__state.renderToTexture==null){if(this.__stage.context3D==this&&!this.__stage.__renderer.__cleared){this.__stage.__renderer.__clear()}else if(!this.__cleared){this.clear(0,0,0,0,1,0,1)}}this.__flushGL();if(this.__state.program!=null){this.__state.program.__flush()}var count=numTriangles==-1?indexBuffer.__numIndices:numTriangles*3;this.__bindGLElementArrayBuffer(indexBuffer.__id);this.gl.drawElements(this.gl.TRIANGLES,count,this.gl.UNSIGNED_SHORT,firstIndex*2)},present:function(){this.setRenderToBackBuffer();if(this.__stage3D!=null&&this.__backBufferTexture!=null){if(!this.__cleared){this.clear(0,0,0,0,1,0,1)}var cacheBuffer=this.__backBufferTexture;this.__backBufferTexture=this.__frontBufferTexture;this.__frontBufferTexture=cacheBuffer;this.__state.__primaryGLFramebuffer=this.__backBufferTexture.__getGLFramebuffer(this.__state.backBufferEnableDepthAndStencil,this.__backBufferAntiAlias,0);this.__cleared=false}this.__present=true},setBlendFactors:function(sourceFactor,destinationFactor){this.setBlendFactorsSeparate(sourceFactor,destinationFactor,sourceFactor,destinationFactor)},setBlendFactorsSeparate:function(sourceRGBFactor,destinationRGBFactor,sourceAlphaFactor,destinationAlphaFactor){this.__state.blendSourceRGBFactor=sourceRGBFactor;this.__state.blendDestinationRGBFactor=destinationRGBFactor;this.__state.blendSourceAlphaFactor=sourceAlphaFactor;this.__state.blendDestinationAlphaFactor=destinationAlphaFactor;this.__setGLBlendEquation(this.gl.FUNC_ADD)},setColorMask:function(red,green,blue,alpha){this.__state.colorMaskRed=red;this.__state.colorMaskGreen=green;this.__state.colorMaskBlue=blue;this.__state.colorMaskAlpha=alpha},setCulling:function(triangleFaceToCull){this.__state.culling=triangleFaceToCull},setDepthTest:function(depthMask,passCompareMode){this.__state.depthMask=depthMask;this.__state.depthCompareMode=passCompareMode},setProgram:function(program){this.__state.program=program;this.__state.shader=null;if(program!=null){var _g=0;var _g1=program.__samplerStates.length;while(_g<_g1){var i=_g++;if(this.__state.samplerStates[i]==null){this.__state.samplerStates[i]=program.__samplerStates[i].clone()}else{this.__state.samplerStates[i].copyFrom(program.__samplerStates[i])}}}},setProgramConstantsFromMatrix:function(programType,firstRegister,matrix,transposedMatrix){if(transposedMatrix==null){transposedMatrix=false}if(this.__state.program!=null&&this.__state.program.__format==1){this.__flushGLProgram();var data=new Float32Array(16);data[0]=matrix.rawData.get(0);data[1]=matrix.rawData.get(1);data[2]=matrix.rawData.get(2);data[3]=matrix.rawData.get(3);data[4]=matrix.rawData.get(4);data[5]=matrix.rawData.get(5);data[6]=matrix.rawData.get(6);data[7]=matrix.rawData.get(7);data[8]=matrix.rawData.get(8);data[9]=matrix.rawData.get(9);data[10]=matrix.rawData.get(10);data[11]=matrix.rawData.get(11);data[12]=matrix.rawData.get(12);data[13]=matrix.rawData.get(13);data[14]=matrix.rawData.get(14);data[15]=matrix.rawData.get(15);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv(this.gl,firstRegister,transposedMatrix,data)}else{var isVertex=programType==1;var dest=isVertex?this.__vertexConstants:this.__fragmentConstants;var source=matrix.rawData;var i=firstRegister*4;if(transposedMatrix){dest[i++]=source.get(0);dest[i++]=source.get(4);dest[i++]=source.get(8);dest[i++]=source.get(12);dest[i++]=source.get(1);dest[i++]=source.get(5);dest[i++]=source.get(9);dest[i++]=source.get(13);dest[i++]=source.get(2);dest[i++]=source.get(6);dest[i++]=source.get(10);dest[i++]=source.get(14);dest[i++]=source.get(3);dest[i++]=source.get(7);dest[i++]=source.get(11);dest[i++]=source.get(15)}else{dest[i++]=source.get(0);dest[i++]=source.get(1);dest[i++]=source.get(2);dest[i++]=source.get(3);dest[i++]=source.get(4);dest[i++]=source.get(5);dest[i++]=source.get(6);dest[i++]=source.get(7);dest[i++]=source.get(8);dest[i++]=source.get(9);dest[i++]=source.get(10);dest[i++]=source.get(11);dest[i++]=source.get(12);dest[i++]=source.get(13);dest[i++]=source.get(14);dest[i++]=source.get(15)}if(this.__state.program!=null){this.__state.program.__markDirty(isVertex,firstRegister,4)}}},setRenderToBackBuffer:function(){this.__state.renderToTexture=null},setRenderToTexture:function(texture,enableDepthAndStencil,antiAlias,surfaceSelector){if(surfaceSelector==null){surfaceSelector=0}if(antiAlias==null){antiAlias=0}if(enableDepthAndStencil==null){enableDepthAndStencil=false}this.__state.renderToTexture=texture;this.__state.renderToTextureDepthStencil=enableDepthAndStencil;this.__state.renderToTextureAntiAlias=antiAlias;this.__state.renderToTextureSurfaceSelector=surfaceSelector},setSamplerStateAt:function(sampler,wrap,filter,mipfilter){if(this.__state.samplerStates[sampler]==null){this.__state.samplerStates[sampler]=new openfl__$internal_renderer_SamplerState}var state=this.__state.samplerStates[sampler];state.wrap=wrap;state.filter=filter;state.mipfilter=mipfilter},setScissorRectangle:function(rectangle){if(rectangle!=null){this.__state.scissorEnabled=true;this.__state.scissorRectangle.copyFrom(rectangle)}else{this.__state.scissorEnabled=false}},setStencilActions:function(triangleFace,compareMode,actionOnBothPass,actionOnDepthFail,actionOnDepthPassStencilFail){if(actionOnDepthPassStencilFail==null){actionOnDepthPassStencilFail=5}if(actionOnDepthFail==null){actionOnDepthFail=5}if(actionOnBothPass==null){actionOnBothPass=5}if(compareMode==null){compareMode=0}if(triangleFace==null){triangleFace=2}this.__state.stencilTriangleFace=triangleFace;this.__state.stencilCompareMode=compareMode;this.__state.stencilPass=actionOnBothPass;this.__state.stencilDepthFail=actionOnDepthFail;this.__state.stencilFail=actionOnDepthPassStencilFail},setStencilReferenceValue:function(referenceValue,readMask,writeMask){if(writeMask==null){writeMask=255}if(readMask==null){readMask=255}this.__state.stencilReferenceValue=referenceValue;this.__state.stencilReadMask=readMask;this.__state.stencilWriteMask=writeMask},setTextureAt:function(sampler,texture){this.__state.textures[sampler]=texture},setVertexBufferAt:function(index,buffer,bufferOffset,format){if(format==null){format=4}if(bufferOffset==null){bufferOffset=0}if(buffer==null){this.gl.disableVertexAttribArray(index);this.__bindGLArrayBuffer(null);return}this.__bindGLArrayBuffer(buffer.__id);this.gl.enableVertexAttribArray(index);var byteOffset=bufferOffset*4;switch(format){case 0:this.gl.vertexAttribPointer(index,4,this.gl.UNSIGNED_BYTE,true,buffer.__stride,byteOffset);break;case 1:this.gl.vertexAttribPointer(index,1,this.gl.FLOAT,false,buffer.__stride,byteOffset);break;case 2:this.gl.vertexAttribPointer(index,2,this.gl.FLOAT,false,buffer.__stride,byteOffset);break;case 3:this.gl.vertexAttribPointer(index,3,this.gl.FLOAT,false,buffer.__stride,byteOffset);break;case 4:this.gl.vertexAttribPointer(index,4,this.gl.FLOAT,false,buffer.__stride,byteOffset);break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}},__bindGLArrayBuffer:function(buffer){if(this.__contextState.__currentGLArrayBuffer!=buffer){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,buffer);this.__contextState.__currentGLArrayBuffer=buffer}},__bindGLElementArrayBuffer:function(buffer){if(this.__contextState.__currentGLElementArrayBuffer!=buffer){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,buffer);this.__contextState.__currentGLElementArrayBuffer=buffer}},__bindGLFramebuffer:function(framebuffer){if(this.__contextState.__currentGLFramebuffer!=framebuffer){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,framebuffer);this.__contextState.__currentGLFramebuffer=framebuffer}},__bindGLTexture2D:function(texture){this.gl.bindTexture(this.gl.TEXTURE_2D,texture);this.__contextState.__currentGLTexture2D=texture},__bindGLTextureCubeMap:function(texture){this.gl.bindTexture(this.gl.TEXTURE_CUBE_MAP,texture);this.__contextState.__currentGLTextureCubeMap=texture},__dispose:function(){this.driverInfo+=" (Disposed)";if(this.__stage3D!=null){this.__stage3D.__indexBuffer=null;this.__stage3D.__vertexBuffer=null;this.__stage3D.context3D=null;this.__stage3D=null}this.__backBufferTexture=null;this.__context=null;this.__renderStage3DProgram=null;this.__fragmentConstants=null;this.__frontBufferTexture=null;this.__positionScale=null;this.__present=false;this.__quadIndexBuffer=null;this.__stage=null;this.__vertexConstants=null},__drawTriangles:function(firstIndex,count){if(firstIndex==null){firstIndex=0}if(this.__state.renderToTexture==null){if(this.__stage.context3D==this&&!this.__stage.__renderer.__cleared){this.__stage.__renderer.__clear()}else if(!this.__cleared){this.clear(0,0,0,0,1,0,1)}}this.__flushGL();if(this.__state.program!=null){this.__state.program.__flush()}this.gl.drawArrays(this.gl.TRIANGLES,firstIndex,count)},__flushGL:function(){this.__flushGLProgram();this.__flushGLFramebuffer();this.__flushGLViewport();this.__flushGLBlend();if(this.__contextState.colorMaskRed!=this.__state.colorMaskRed||this.__contextState.colorMaskGreen!=this.__state.colorMaskGreen||this.__contextState.colorMaskBlue!=this.__state.colorMaskBlue||this.__contextState.colorMaskAlpha!=this.__state.colorMaskAlpha){this.gl.colorMask(this.__state.colorMaskRed,this.__state.colorMaskGreen,this.__state.colorMaskBlue,this.__state.colorMaskAlpha);this.__contextState.colorMaskRed=this.__state.colorMaskRed;this.__contextState.colorMaskGreen=this.__state.colorMaskGreen;this.__contextState.colorMaskBlue=this.__state.colorMaskBlue;this.__contextState.colorMaskAlpha=this.__state.colorMaskAlpha}this.__flushGLCulling();this.__flushGLDepth();this.__flushGLScissor();this.__flushGLStencil();this.__flushGLTextures()},__flushGLBlend:function(){if(this.__contextState.blendDestinationRGBFactor!=this.__state.blendDestinationRGBFactor||this.__contextState.blendSourceRGBFactor!=this.__state.blendSourceRGBFactor||this.__contextState.blendDestinationAlphaFactor!=this.__state.blendDestinationAlphaFactor||this.__contextState.blendSourceAlphaFactor!=this.__state.blendSourceAlphaFactor){this.__setGLBlend(true);if(this.__state.blendDestinationRGBFactor==this.__state.blendDestinationAlphaFactor&&this.__state.blendSourceRGBFactor==this.__state.blendSourceAlphaFactor){this.gl.blendFunc(this.__getGLBlend(this.__state.blendSourceRGBFactor),this.__getGLBlend(this.__state.blendDestinationRGBFactor))}else{this.gl.blendFuncSeparate(this.__getGLBlend(this.__state.blendSourceRGBFactor),this.__getGLBlend(this.__state.blendDestinationRGBFactor),this.__getGLBlend(this.__state.blendSourceAlphaFactor),this.__getGLBlend(this.__state.blendDestinationAlphaFactor))}this.__contextState.blendDestinationRGBFactor=this.__state.blendDestinationRGBFactor;this.__contextState.blendSourceRGBFactor=this.__state.blendSourceRGBFactor;this.__contextState.blendDestinationAlphaFactor=this.__state.blendDestinationAlphaFactor;this.__contextState.blendSourceAlphaFactor=this.__state.blendSourceAlphaFactor}},__flushGLCulling:function(){if(this.__contextState.culling!=this.__state.culling){if(this.__state.culling==3){this.__setGLCullFace(false)}else{this.__setGLCullFace(true);switch(this.__state.culling){case 0:this.gl.cullFace(this.gl.BACK);break;case 1:this.gl.cullFace(this.gl.FRONT);break;case 2:this.gl.cullFace(this.gl.FRONT_AND_BACK);break;case 3:break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}}this.__contextState.culling=this.__state.culling}},__flushGLDepth:function(){var depthMask=this.__state.depthMask&&(this.__state.renderToTexture!=null?this.__state.renderToTextureDepthStencil:this.__state.backBufferEnableDepthAndStencil);if(this.__contextState.depthMask!=depthMask){this.gl.depthMask(depthMask);this.__contextState.depthMask=depthMask}if(this.__contextState.depthCompareMode!=this.__state.depthCompareMode){switch(this.__state.depthCompareMode){case 0:this.gl.depthFunc(this.gl.ALWAYS);break;case 1:this.gl.depthFunc(this.gl.EQUAL);break;case 2:this.gl.depthFunc(this.gl.GREATER);break;case 3:this.gl.depthFunc(this.gl.GEQUAL);break;case 4:this.gl.depthFunc(this.gl.LESS);break;case 5:this.gl.depthFunc(this.gl.LEQUAL);break;case 6:this.gl.depthFunc(this.gl.NEVER);break;case 7:this.gl.depthFunc(this.gl.NOTEQUAL);break;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}this.__contextState.depthCompareMode=this.__state.depthCompareMode}},__flushGLFramebuffer:function(){if(this.__state.renderToTexture!=null){if(this.__contextState.renderToTexture!=this.__state.renderToTexture||this.__contextState.renderToTextureSurfaceSelector!=this.__state.renderToTextureSurfaceSelector){this.__bindGLFramebuffer(this.__state.renderToTexture.__getGLFramebuffer(this.__state.renderToTextureDepthStencil,this.__state.renderToTextureAntiAlias,this.__state.renderToTextureSurfaceSelector));this.__contextState.renderToTexture=this.__state.renderToTexture;this.__contextState.renderToTextureAntiAlias=this.__state.renderToTextureAntiAlias;this.__contextState.renderToTextureDepthStencil=this.__state.renderToTextureDepthStencil;this.__contextState.renderToTextureSurfaceSelector=this.__state.renderToTextureSurfaceSelector}this.__setGLDepthTest(this.__state.renderToTextureDepthStencil);this.__setGLStencilTest(this.__state.renderToTextureDepthStencil);this.__setGLFrontFace(true)}else{if(this.__stage==null&&this.backBufferWidth==0&&this.backBufferHeight==0){throw new js__$Boot_HaxeError(new openfl_errors_Error("Context3D backbuffer has not been configured"))}if(this.__contextState.renderToTexture!=null||this.__contextState.__currentGLFramebuffer!=this.__state.__primaryGLFramebuffer||this.__contextState.backBufferEnableDepthAndStencil!=this.__state.backBufferEnableDepthAndStencil){this.__bindGLFramebuffer(this.__state.__primaryGLFramebuffer);this.__contextState.renderToTexture=null;this.__contextState.backBufferEnableDepthAndStencil=this.__state.backBufferEnableDepthAndStencil}this.__setGLDepthTest(this.__state.backBufferEnableDepthAndStencil);this.__setGLStencilTest(this.__state.backBufferEnableDepthAndStencil);this.__setGLFrontFace(this.__stage.context3D!=this)}},__flushGLProgram:function(){var shader=this.__state.shader;var program=this.__state.program;if(this.__contextState.shader!=shader){if(this.__contextState.shader!=null){this.__contextState.shader.__disable()}if(shader!=null){shader.__enable()}this.__contextState.shader=shader}if(this.__contextState.program!=program){if(program!=null){program.__enable()}this.__contextState.program=program}if(program!=null&&program.__format==0){this.__positionScale[1]=this.__stage.context3D==this&&this.__state.renderToTexture==null?1:-1;program.__setPositionScale(this.__positionScale)}},__flushGLScissor:function(){if(!this.__state.scissorEnabled){if(this.__contextState.scissorEnabled!=this.__state.scissorEnabled){this.__setGLScissorTest(false);this.__contextState.scissorEnabled=false}}else{this.__setGLScissorTest(true);this.__contextState.scissorEnabled=true;var scissorX=this.__state.scissorRectangle.x|0;var scissorY=this.__state.scissorRectangle.y|0;var scissorWidth=this.__state.scissorRectangle.width|0;var scissorHeight=this.__state.scissorRectangle.height|0;if(this.__state.renderToTexture==null&&this.__stage3D==null){scissorY=(this.__stage.window.__height*this.__stage.window.__scale|0)-(this.__state.scissorRectangle.height|0)-scissorY}if(this.__contextState.scissorRectangle.x!=scissorX||this.__contextState.scissorRectangle.y!=scissorY||this.__contextState.scissorRectangle.width!=scissorWidth||this.__contextState.scissorRectangle.height!=scissorHeight){this.gl.scissor(scissorX,scissorY,scissorWidth,scissorHeight);this.__contextState.scissorRectangle.setTo(scissorX,scissorY,scissorWidth,scissorHeight)}}},__flushGLStencil:function(){if(this.__contextState.stencilTriangleFace!=this.__state.stencilTriangleFace||this.__contextState.stencilPass!=this.__state.stencilPass||this.__contextState.stencilDepthFail!=this.__state.stencilDepthFail||this.__contextState.stencilFail!=this.__state.stencilFail){this.gl.stencilOpSeparate(this.__getGLTriangleFace(this.__state.stencilTriangleFace),this.__getGLStencilAction(this.__state.stencilFail),this.__getGLStencilAction(this.__state.stencilDepthFail),this.__getGLStencilAction(this.__state.stencilPass));this.__contextState.stencilTriangleFace=this.__state.stencilTriangleFace;this.__contextState.stencilPass=this.__state.stencilPass;this.__contextState.stencilDepthFail=this.__state.stencilDepthFail;this.__contextState.stencilFail=this.__state.stencilFail}if(this.__contextState.stencilWriteMask!=this.__state.stencilWriteMask){this.gl.stencilMask(this.__state.stencilWriteMask);this.__contextState.stencilWriteMask=this.__state.stencilWriteMask}if(this.__contextState.stencilCompareMode!=this.__state.stencilCompareMode||this.__contextState.stencilReferenceValue!=this.__state.stencilReferenceValue||this.__contextState.stencilReadMask!=this.__state.stencilReadMask){this.gl.stencilFunc(this.__getGLCompareMode(this.__state.stencilCompareMode),this.__state.stencilReferenceValue,this.__state.stencilReadMask);this.__contextState.stencilCompareMode=this.__state.stencilCompareMode;this.__contextState.stencilReferenceValue=this.__state.stencilReferenceValue;this.__contextState.stencilReadMask=this.__state.stencilReadMask}},__flushGLTextures:function(){var sampler=0;var texture;var samplerState;var _g=0;var _g1=this.__state.textures.length;while(_g<_g1){var i=_g++;texture=this.__state.textures[i];samplerState=this.__state.samplerStates[i];if(samplerState==null){this.__state.samplerStates[i]=new openfl__$internal_renderer_SamplerState;samplerState=this.__state.samplerStates[i]}this.gl.activeTexture(this.gl.TEXTURE0+sampler);if(texture!=null){if(texture.__textureTarget==this.gl.TEXTURE_2D){this.__bindGLTexture2D(texture.__getTexture())}else{this.__bindGLTextureCubeMap(texture.__getTexture())}this.__contextState.textures[i]=texture;texture.__setSamplerState(samplerState)}else{this.__bindGLTexture2D(null)}if(this.__state.program!=null&&this.__state.program.__format==0&&samplerState.textureAlpha){this.gl.activeTexture(this.gl.TEXTURE0+sampler+4);if(texture!=null&&texture.__alphaTexture!=null){if(texture.__alphaTexture.__textureTarget==this.gl.TEXTURE_2D){this.__bindGLTexture2D(texture.__alphaTexture.__getTexture())}else{this.__bindGLTextureCubeMap(texture.__alphaTexture.__getTexture())}texture.__alphaTexture.__setSamplerState(samplerState);this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[sampler].location,1)}else{this.__bindGLTexture2D(null);this.gl.uniform1i(this.__state.program.__agalAlphaSamplerEnabled[sampler].location,0)}}++sampler}},__flushGLViewport:function(){if(this.__state.renderToTexture==null){if(this.__stage.context3D==this){this.gl.viewport(this.__stage3D==null?0:this.__stage3D.get_x()|0,this.__stage.window.__height*this.__stage.window.__scale-this.backBufferHeight-(this.__stage3D==null?0:this.__stage3D.get_y())|0,this.backBufferWidth,this.backBufferHeight)}else{this.gl.viewport(0,0,this.backBufferWidth,this.backBufferHeight)}}else{var width=0;var height=0;if(this.__state.renderToTexture instanceof openfl_display3D_textures_Texture){var texture2D=this.__state.renderToTexture;width=texture2D.__width;height=texture2D.__height}else if(this.__state.renderToTexture instanceof openfl_display3D_textures_RectangleTexture){var rectTexture=this.__state.renderToTexture;width=rectTexture.__width;height=rectTexture.__height}else if(this.__state.renderToTexture instanceof openfl_display3D_textures_CubeTexture){var cubeTexture=this.__state.renderToTexture;width=cubeTexture.__size;height=cubeTexture.__size}this.gl.viewport(0,0,width,height)}},__getGLBlend:function(blendFactor){switch(blendFactor){case 0:return this.gl.DST_ALPHA;case 1:return this.gl.DST_COLOR;case 2:return this.gl.ONE;case 3:return this.gl.ONE_MINUS_DST_ALPHA;case 4:return this.gl.ONE_MINUS_DST_COLOR;case 5:return this.gl.ONE_MINUS_SRC_ALPHA;case 6:return this.gl.ONE_MINUS_SRC_COLOR;case 7:return this.gl.SRC_ALPHA;case 8:return this.gl.SRC_COLOR;case 9:return this.gl.ZERO;default:throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError)}},__getGLCompareMode:function(mode){switch(mode){case 0:return this.gl.ALWAYS;case 1:return this.gl.EQUAL;case 2:return this.gl.GREATER;case 3:return this.gl.GEQUAL;case 4:return this.gl.LESS;case 5:return this.gl.LEQUAL;case 6:return this.gl.NEVER;case 7:return this.gl.NOTEQUAL;default:return this.gl.EQUAL}},__getGLStencilAction:function(action){switch(action){case 0:return this.gl.DECR;case 1:return this.gl.DECR_WRAP;case 2:return this.gl.INCR;case 3:return this.gl.INCR_WRAP;case 4:return this.gl.INVERT;case 5:return this.gl.KEEP;case 6:return this.gl.REPLACE;case 7:return this.gl.ZERO;default:return this.gl.KEEP}},__getGLTriangleFace:function(face){switch(face){case 0:return this.gl.BACK;case 1:return this.gl.FRONT;case 2:return this.gl.FRONT_AND_BACK;case 3:return this.gl.NONE;default:return this.gl.FRONT_AND_BACK}},__renderStage3D:function(stage3D){var context=stage3D.context3D;if(context!=null&&context!=this&&context.__frontBufferTexture!=null&&stage3D.visible&&this.backBufferHeight>0&&this.backBufferWidth>0){if(this.__renderStage3DProgram==null){var vertexAssembler=new openfl_utils_AGALMiniAssembler;vertexAssembler.assemble(openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$.toString(1),"m44 op, va0, vc0\n"+"mov v0, va1");var fragmentAssembler=new openfl_utils_AGALMiniAssembler;fragmentAssembler.assemble(openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$.toString(0),"tex ft1, v0, fs0 <2d,nearest,nomip>\n"+"mov oc, ft1");this.__renderStage3DProgram=this.createProgram();this.__renderStage3DProgram.upload(vertexAssembler.agalcode,fragmentAssembler.agalcode)}this.setProgram(this.__renderStage3DProgram);this.setBlendFactors(2,9);this.setColorMask(true,true,true,true);this.setCulling(3);this.setDepthTest(false,0);this.setStencilActions();this.setStencilReferenceValue(0,0,0);this.setScissorRectangle(null);this.setTextureAt(0,context.__frontBufferTexture);this.setVertexBufferAt(0,stage3D.__vertexBuffer,0,3);this.setVertexBufferAt(1,stage3D.__vertexBuffer,3,2);this.setProgramConstantsFromMatrix(1,0,stage3D.__renderTransform,true);this.drawTriangles(stage3D.__indexBuffer);this.__present=true}},__setGLBlend:function(enable){if(this.__contextState.__enableGLBlend!=enable){if(enable){this.gl.enable(this.gl.BLEND)}else{this.gl.disable(this.gl.BLEND)}this.__contextState.__enableGLBlend=enable}},__setGLBlendEquation:function(value){if(this.__contextState.__glBlendEquation!=value){this.gl.blendEquation(value);this.__contextState.__glBlendEquation=value}},__setGLCullFace:function(enable){if(this.__contextState.__enableGLCullFace!=enable){if(enable){this.gl.enable(this.gl.CULL_FACE)}else{this.gl.disable(this.gl.CULL_FACE)}this.__contextState.__enableGLCullFace=enable}},__setGLDepthTest:function(enable){if(this.__contextState.__enableGLDepthTest!=enable){if(enable){this.gl.enable(this.gl.DEPTH_TEST)}else{this.gl.disable(this.gl.DEPTH_TEST)}this.__contextState.__enableGLDepthTest=enable}},__setGLFrontFace:function(counterClockWise){if(this.__contextState.__frontFaceGLCCW!=counterClockWise){this.gl.frontFace(counterClockWise?this.gl.CCW:this.gl.CW);this.__contextState.__frontFaceGLCCW=counterClockWise}},__setGLScissorTest:function(enable){if(this.__contextState.__enableGLScissorTest!=enable){if(enable){this.gl.enable(this.gl.SCISSOR_TEST)}else{this.gl.disable(this.gl.SCISSOR_TEST)}this.__contextState.__enableGLScissorTest=enable}},__setGLStencilTest:function(enable){if(this.__contextState.__enableGLStencilTest!=enable){if(enable){this.gl.enable(this.gl.STENCIL_TEST)}else{this.gl.disable(this.gl.STENCIL_TEST)}this.__contextState.__enableGLStencilTest=enable}},__class__:openfl_display3D_Context3D});var openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$={};$hxClasses["openfl.display3D._Context3DBufferUsage.Context3DBufferUsage_Impl_"]=openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$;openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$.__name__="openfl.display3D._Context3DBufferUsage.Context3DBufferUsage_Impl_";openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$.fromString=function(value){switch(value){case"dynamicDraw":return 0;case"staticDraw":return 1;default:return null}};openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$.toString=function(this1){switch(this1){case 0:return"dynamicDraw";case 1:return"staticDraw";default:return null}};var openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$={};$hxClasses["openfl.display3D._Context3DProgramType.Context3DProgramType_Impl_"]=openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$;openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$.__name__="openfl.display3D._Context3DProgramType.Context3DProgramType_Impl_";openfl_display3D__$Context3DProgramType_Context3DProgramType_$Impl_$.toString=function(this1){switch(this1){case 0:return"fragment";case 1:return"vertex";default:return null}};var openfl_display3D__$Context3DTextureFormat_Context3DTextureFormat_$Impl_$={};$hxClasses["openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_"]=openfl_display3D__$Context3DTextureFormat_Context3DTextureFormat_$Impl_$;openfl_display3D__$Context3DTextureFormat_Context3DTextureFormat_$Impl_$.__name__="openfl.display3D._Context3DTextureFormat.Context3DTextureFormat_Impl_";openfl_display3D__$Context3DTextureFormat_Context3DTextureFormat_$Impl_$.toString=function(this1){switch(this1){case 0:return"bgrPacked565";case 1:return"bgra";case 2:return"bgraPacked4444";case 3:return"compressed";case 4:return"compressedAlpha";case 5:return"rgbaHalfFloat";default:return null}};var openfl_display3D_IndexBuffer3D=function(context3D,numIndices,bufferUsage){this.__context=context3D;this.__numIndices=numIndices;var gl=this.__context.gl;this.__id=gl.createBuffer();this.__usage=bufferUsage==0?gl.DYNAMIC_DRAW:gl.STATIC_DRAW};$hxClasses["openfl.display3D.IndexBuffer3D"]=openfl_display3D_IndexBuffer3D;openfl_display3D_IndexBuffer3D.__name__="openfl.display3D.IndexBuffer3D";openfl_display3D_IndexBuffer3D.prototype={__context:null,__id:null,__numIndices:null,__tempUInt16Array:null,__usage:null,uploadFromTypedArray:function(data,byteLength){if(byteLength==null){byteLength=-1}if(data==null){return}var gl=this.__context.gl;this.__context.__bindGLElementArrayBuffer(this.__id);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.bufferData(gl,gl.ELEMENT_ARRAY_BUFFER,data,this.__usage)},uploadFromVector:function(data,startOffset,count){if(data==null){return}var length=startOffset+count;var existingUInt16Array=this.__tempUInt16Array;if(this.__tempUInt16Array==null||this.__tempUInt16Array.length<count){var this1;if(count!=null){this1=new Uint16Array(count)}else{this1=null}this.__tempUInt16Array=this1;if(existingUInt16Array!=null){this.__tempUInt16Array.set(existingUInt16Array)}}var _g=startOffset;while(_g<length){var i=_g++;this.__tempUInt16Array[i-startOffset]=data.get(i)}this.uploadFromTypedArray(this.__tempUInt16Array)},__class__:openfl_display3D_IndexBuffer3D};var openfl_display3D_Program3D=function(context3D,format){this.__context=context3D;this.__format=format;if(this.__format==0){this.__agalSamplerUsageMask=0;this.__agalUniforms=new haxe_ds_List;this.__agalSamplerUniforms=new haxe_ds_List;this.__agalAlphaSamplerUniforms=new haxe_ds_List;this.__agalAlphaSamplerEnabled=[]}else{this.__glslAttribNames=[];this.__glslAttribTypes=[];this.__glslSamplerNames=[];this.__glslUniformLocations=[];this.__glslUniformNames=[];this.__glslUniformTypes=[]}this.__samplerStates=[]};$hxClasses["openfl.display3D.Program3D"]=openfl_display3D_Program3D;openfl_display3D_Program3D.__name__="openfl.display3D.Program3D";openfl_display3D_Program3D.prototype={__agalAlphaSamplerEnabled:null,__agalAlphaSamplerUniforms:null,__agalFragmentUniformMap:null,__agalPositionScale:null,__agalSamplerUniforms:null,__agalSamplerUsageMask:null,__agalUniforms:null,__agalVertexUniformMap:null,__context:null,__format:null,__glFragmentShader:null,__glFragmentSource:null,__glProgram:null,__glslAttribNames:null,__glslAttribTypes:null,__glslSamplerNames:null,__glslUniformLocations:null,__glslUniformNames:null,__glslUniformTypes:null,__glVertexShader:null,__glVertexSource:null,__samplerStates:null,upload:function(vertexProgram,fragmentProgram){if(this.__format!=0){return}var samplerStates=[];var glslVertex=openfl__$internal_formats_agal_AGALConverter.convertToGLSL(vertexProgram,null);var glslFragment=openfl__$internal_formats_agal_AGALConverter.convertToGLSL(fragmentProgram,samplerStates);if(lime_utils_Log.level==5){lime_utils_Log.info(glslVertex,{fileName:"openfl/display3D/Program3D.hx",lineNumber:399,className:"openfl.display3D.Program3D",methodName:"upload"});lime_utils_Log.info(glslFragment,{fileName:"openfl/display3D/Program3D.hx",lineNumber:400,className:"openfl.display3D.Program3D",methodName:"upload"})}this.__deleteShaders();this.__uploadFromGLSL(glslVertex,glslFragment);this.__buildAGALUniformList();var _g=0;var _g1=samplerStates.length;while(_g<_g1){var i=_g++;this.__samplerStates[i]=samplerStates[i]}},__buildAGALUniformList:function(){if(this.__format==1){return}var gl=this.__context.gl;this.__agalUniforms.clear();this.__agalSamplerUniforms.clear();this.__agalAlphaSamplerUniforms.clear();this.__agalAlphaSamplerEnabled=[];this.__agalSamplerUsageMask=0;var numActive=0;numActive=gl.getProgramParameter(this.__glProgram,gl.ACTIVE_UNIFORMS);var vertexUniforms=new haxe_ds_List;var fragmentUniforms=new haxe_ds_List;var _g=0;var _g1=numActive;while(_g<_g1){var i=_g++;var info=gl.getActiveUniform(this.__glProgram,i);var uniform=new openfl_display3D_Uniform(this.__context);uniform.name=info.name;uniform.size=info.size;uniform.type=info.type;uniform.location=gl.getUniformLocation(this.__glProgram,uniform.name);var indexBracket=uniform.name.indexOf("[");if(indexBracket>=0){uniform.name=uniform.name.substring(0,indexBracket)}switch(uniform.type){case 35674:uniform.regCount=2;break;case 35675:uniform.regCount=3;break;case 35676:uniform.regCount=4;break;default:uniform.regCount=1}uniform.regCount*=uniform.size;this.__agalUniforms.add(uniform);if(uniform.name=="vcPositionScale"){this.__agalPositionScale=uniform}else if(StringTools.startsWith(uniform.name,"vc")){uniform.regIndex=Std.parseInt(uniform.name.substring(2));uniform.regData=this.__context.__vertexConstants;vertexUniforms.add(uniform)}else if(StringTools.startsWith(uniform.name,"fc")){uniform.regIndex=Std.parseInt(uniform.name.substring(2));uniform.regData=this.__context.__fragmentConstants;fragmentUniforms.add(uniform)}else if(StringTools.startsWith(uniform.name,"sampler")&&uniform.name.indexOf("alpha")==-1){uniform.regIndex=Std.parseInt(uniform.name.substring(7));this.__agalSamplerUniforms.add(uniform);var _g11=0;var _g2=uniform.regCount;while(_g11<_g2)this.__agalSamplerUsageMask|=1<<uniform.regIndex+_g11++}else if(StringTools.startsWith(uniform.name,"sampler")&&StringTools.endsWith(uniform.name,"_alpha")){uniform.regIndex=Std.parseInt(uniform.name.substring(7,7+(uniform.name.indexOf("_")-7)))+4;this.__agalAlphaSamplerUniforms.add(uniform)}else if(StringTools.startsWith(uniform.name,"sampler")&&StringTools.endsWith(uniform.name,"_alphaEnabled")){uniform.regIndex=Std.parseInt(uniform.name.substring(7));this.__agalAlphaSamplerEnabled[uniform.regIndex]=uniform}if(lime_utils_Log.level==5){lime_utils_Log.verbose(""+i+" name:"+uniform.name+" type:"+uniform.type+" size:"+uniform.size+" location:"+Std.string(uniform.location),{fileName:"openfl/display3D/Program3D.hx",lineNumber:577,className:"openfl.display3D.Program3D",methodName:"__buildAGALUniformList"})}}this.__agalVertexUniformMap=new openfl_display3D_UniformMap(Lambda.array(vertexUniforms));this.__agalFragmentUniformMap=new openfl_display3D_UniformMap(Lambda.array(fragmentUniforms))},__deleteShaders:function(){var gl=this.__context.gl;if(this.__glProgram!=null){this.__glProgram=null}if(this.__glVertexShader!=null){gl.deleteShader(this.__glVertexShader);this.__glVertexShader=null}if(this.__glFragmentShader!=null){gl.deleteShader(this.__glFragmentShader);this.__glFragmentShader=null}},__enable:function(){var gl=this.__context.gl;gl.useProgram(this.__glProgram);if(this.__format==0){this.__agalVertexUniformMap.markAllDirty();this.__agalFragmentUniformMap.markAllDirty();var _g_head=this.__agalSamplerUniforms.h;while(_g_head!=null){var val=_g_head.item;_g_head=_g_head.next;if(val.regCount==1){gl.uniform1i(val.location,val.regIndex)}else{throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("!!! TODO: uniform location on webgl"))}}var _g1_head=this.__agalAlphaSamplerUniforms.h;while(_g1_head!=null){var val1=_g1_head.item;_g1_head=_g1_head.next;if(val1.regCount==1){gl.uniform1i(val1.location,val1.regIndex)}else{throw new js__$Boot_HaxeError(new openfl_errors_IllegalOperationError("!!! TODO: uniform location on webgl"))}}}},__flush:function(){if(this.__format==0){this.__agalVertexUniformMap.flush();this.__agalFragmentUniformMap.flush()}else{return}},__markDirty:function(isVertex,index,count){if(this.__format==1){return}if(isVertex){this.__agalVertexUniformMap.markDirty(index,count)}else{this.__agalFragmentUniformMap.markDirty(index,count)}},__setPositionScale:function(positionScale){if(this.__format==1){return}if(this.__agalPositionScale!=null){this.__context.gl.uniform4fv(this.__agalPositionScale.location,positionScale)}},__uploadFromGLSL:function(vertexShaderSource,fragmentShaderSource){var gl=this.__context.gl;this.__glVertexSource=vertexShaderSource;this.__glFragmentSource=fragmentShaderSource;this.__glVertexShader=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(this.__glVertexShader,vertexShaderSource);gl.compileShader(this.__glVertexShader);if(gl.getShaderParameter(this.__glVertexShader,gl.COMPILE_STATUS)==0){var message="Error compiling vertex shader";message="Error compiling vertex shader"+("\n"+gl.getShaderInfoLog(this.__glVertexShader));message+="\n"+vertexShaderSource;lime_utils_Log.error(message,{fileName:"openfl/display3D/Program3D.hx",lineNumber:869,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"})}this.__glFragmentShader=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(this.__glFragmentShader,fragmentShaderSource);gl.compileShader(this.__glFragmentShader);if(gl.getShaderParameter(this.__glFragmentShader,gl.COMPILE_STATUS)==0){var message1="Error compiling fragment shader";message1="Error compiling fragment shader"+("\n"+gl.getShaderInfoLog(this.__glFragmentShader));message1+="\n"+fragmentShaderSource;lime_utils_Log.error(message1,{fileName:"openfl/display3D/Program3D.hx",lineNumber:881,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"})}this.__glProgram=gl.createProgram();if(this.__format==0){var _g=0;while(_g<16){var i=_g++;var name="va"+i;if(vertexShaderSource.indexOf(" "+name)!=-1){gl.bindAttribLocation(this.__glProgram,i,name)}}}else{var _g1=0;var _g11=this.__glslAttribNames;while(_g1<_g11.length){var name1=_g11[_g1];++_g1;if(name1.indexOf("Position")>-1&&StringTools.startsWith(name1,"openfl_")){gl.bindAttribLocation(this.__glProgram,0,name1);break}}}gl.attachShader(this.__glProgram,this.__glVertexShader);gl.attachShader(this.__glProgram,this.__glFragmentShader);gl.linkProgram(this.__glProgram);if(gl.getProgramParameter(this.__glProgram,gl.LINK_STATUS)==0){var message2="Unable to initialize the shader program";message2="Unable to initialize the shader program"+("\n"+gl.getProgramInfoLog(this.__glProgram));lime_utils_Log.error(message2,{fileName:"openfl/display3D/Program3D.hx",lineNumber:922,className:"openfl.display3D.Program3D",methodName:"__uploadFromGLSL"})}},__class__:openfl_display3D_Program3D};var openfl_display3D_Uniform=function(context){this.context=context;this.isDirty=true;this.regDataPointer=new lime_utils_BytePointerData(null,0)};$hxClasses["openfl.display3D.Uniform"]=openfl_display3D_Uniform;openfl_display3D_Uniform.__name__="openfl.display3D.Uniform";openfl_display3D_Uniform.prototype={name:null,location:null,type:null,size:null,regData:null,regIndex:null,regCount:null,isDirty:null,context:null,regDataPointer:null,flush:function(){var gl=this.context.gl;var index=this.regIndex*4;switch(this.type){case 35664:lime_graphics__$WebGL2RenderContext_WebGL2RenderContext_$Impl_$.uniform2fv(gl,this.location,this.regData.subarray(index,index+this.regCount*2));break;case 35665:gl.uniform3fv(this.location,this.regData.subarray(index,index+this.regCount*3));break;case 35666:gl.uniform4fv(this.location,this.regData.subarray(index,index+this.regCount*4));break;case 35674:lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix2fv(gl,this.location,false,this.regData.subarray(index,index+this.size*2*2));break;case 35675:lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix3fv(gl,this.location,false,this.regData.subarray(index,index+this.size*3*3));break;case 35676:lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.uniformMatrix4fv(gl,this.location,false,this.regData.subarray(index,index+this.size*4*4));break;default:gl.uniform4fv(this.location,this.regData.subarray(index,index+this.regCount*4))}},__class__:openfl_display3D_Uniform};var openfl_display3D_UniformMap=function(list){this.__uniforms=list;this.__uniforms.sort(function(a,b){return Reflect.compare(a.regIndex,b.regIndex)});var total=0;var _g=0;var _g1=this.__uniforms;while(_g<_g1.length){var uniform=_g1[_g];++_g;if(uniform.regIndex+uniform.regCount>total){total=uniform.regIndex+uniform.regCount}}this.__registerLookup=openfl__$Vector_Vector_$Impl_$.toObjectVector(null,total);var _g2=0;var _g3=this.__uniforms;while(_g2<_g3.length){var uniform1=_g3[_g2];++_g2;var _g21=0;var _g31=uniform1.regCount;while(_g21<_g31)this.__registerLookup.set(uniform1.regIndex+_g21++,uniform1)}this.__anyDirty=this.__allDirty=true};$hxClasses["openfl.display3D.UniformMap"]=openfl_display3D_UniformMap;openfl_display3D_UniformMap.__name__="openfl.display3D.UniformMap";openfl_display3D_UniformMap.prototype={__allDirty:null,__anyDirty:null,__registerLookup:null,__uniforms:null,flush:function(){if(this.__anyDirty){var _g=0;var _g1=this.__uniforms;while(_g<_g1.length){var uniform=_g1[_g];++_g;if(this.__allDirty||uniform.isDirty){uniform.flush();uniform.isDirty=false}}this.__anyDirty=this.__allDirty=false}},markAllDirty:function(){this.__allDirty=true;this.__anyDirty=true},markDirty:function(start,count){if(this.__allDirty){return}var end=start+count;if(end>this.__registerLookup.get_length()){end=this.__registerLookup.get_length()}var index=start;while(index<end){var uniform=this.__registerLookup.get(index);if(uniform!=null){uniform.isDirty=true;this.__anyDirty=true;index=uniform.regIndex+uniform.regCount}else{++index}}},__class__:openfl_display3D_UniformMap};var openfl_display3D_VertexBuffer3D=function(context3D,numVertices,dataPerVertex,bufferUsage){this.__context=context3D;this.__numVertices=numVertices;this.__vertexSize=dataPerVertex;var gl=this.__context.gl;this.__id=gl.createBuffer();this.__stride=this.__vertexSize*4;this.__usage=openfl_display3D__$Context3DBufferUsage_Context3DBufferUsage_$Impl_$.fromString(bufferUsage)==0?gl.DYNAMIC_DRAW:gl.STATIC_DRAW};$hxClasses["openfl.display3D.VertexBuffer3D"]=openfl_display3D_VertexBuffer3D;openfl_display3D_VertexBuffer3D.__name__="openfl.display3D.VertexBuffer3D";openfl_display3D_VertexBuffer3D.prototype={__context:null,__id:null,__numVertices:null,__stride:null,__tempFloat32Array:null,__usage:null,__vertexSize:null,uploadFromTypedArray:function(data,byteLength){if(byteLength==null){byteLength=-1}if(data==null){return}var gl=this.__context.gl;this.__context.__bindGLArrayBuffer(this.__id);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.bufferData(gl,gl.ARRAY_BUFFER,data,this.__usage)},uploadFromVector:function(data,startVertex,numVertices){if(data==null){return}var start=startVertex*this.__vertexSize;var count=numVertices*this.__vertexSize;var length=start+count;var existingFloat32Array=this.__tempFloat32Array;if(this.__tempFloat32Array==null||this.__tempFloat32Array.length<count){var this1;if(count!=null){this1=new Float32Array(count)}else{this1=null}this.__tempFloat32Array=this1;if(existingFloat32Array!=null){this.__tempFloat32Array.set(existingFloat32Array)}}var _g=start;while(_g<length){var i=_g++;this.__tempFloat32Array[i-start]=data.get(i)}this.uploadFromTypedArray(this.__tempFloat32Array)},__class__:openfl_display3D_VertexBuffer3D};var openfl_display3D_textures_TextureBase=function(context){openfl_events_EventDispatcher.call(this);this.__context=context;var gl=this.__context.gl;this.__textureID=gl.createTexture();this.__textureContext=this.__context.__context;if(openfl_display3D_textures_TextureBase.__supportsBGRA==null){openfl_display3D_textures_TextureBase.__textureInternalFormat=gl.RGBA;openfl_display3D_textures_TextureBase.__supportsBGRA=false;openfl_display3D_textures_TextureBase.__textureFormat=gl.RGBA;openfl_display3D_textures_TextureBase.__compressedFormats=new haxe_ds_IntMap;openfl_display3D_textures_TextureBase.__compressedFormatsAlpha=new haxe_ds_IntMap;var dxtExtension=gl.getExtension("WEBGL_compressed_texture_s3tc");var etc1Extension=gl.getExtension("WEBGL_compressed_texture_etc1");var pvrtcExtension=gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");if(dxtExtension!=null){openfl_display3D_textures_TextureBase.__compressedFormats.h[0]=dxtExtension.COMPRESSED_RGBA_S3TC_DXT1_EXT;openfl_display3D_textures_TextureBase.__compressedFormatsAlpha.h[0]=dxtExtension.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(etc1Extension!=null){openfl_display3D_textures_TextureBase.__compressedFormats.h[2]=etc1Extension.COMPRESSED_RGB_ETC1_WEBGL;openfl_display3D_textures_TextureBase.__compressedFormatsAlpha.h[2]=etc1Extension.COMPRESSED_RGB_ETC1_WEBGL}if(pvrtcExtension!=null){openfl_display3D_textures_TextureBase.__compressedFormats.h[1]=pvrtcExtension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;openfl_display3D_textures_TextureBase.__compressedFormatsAlpha.h[1]=pvrtcExtension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG}}this.__internalFormat=openfl_display3D_textures_TextureBase.__textureInternalFormat;this.__format=openfl_display3D_textures_TextureBase.__textureFormat};$hxClasses["openfl.display3D.textures.TextureBase"]=openfl_display3D_textures_TextureBase;openfl_display3D_textures_TextureBase.__name__="openfl.display3D.textures.TextureBase";openfl_display3D_textures_TextureBase.__super__=openfl_events_EventDispatcher;openfl_display3D_textures_TextureBase.prototype=$extend(openfl_events_EventDispatcher.prototype,{__alphaTexture:null,__context:null,__format:null,__glDepthRenderbuffer:null,__glFramebuffer:null,__glStencilRenderbuffer:null,__height:null,__internalFormat:null,__optimizeForRenderToTexture:null,__samplerState:null,__streamingLevels:null,__textureContext:null,__textureID:null,__textureTarget:null,__width:null,dispose:function(){var gl=this.__context.gl;if(this.__alphaTexture!=null){this.__alphaTexture.dispose()}gl.deleteTexture(this.__textureID);if(this.__glFramebuffer!=null){gl.deleteFramebuffer(this.__glFramebuffer)}if(this.__glDepthRenderbuffer!=null){gl.deleteRenderbuffer(this.__glDepthRenderbuffer)}if(this.__glStencilRenderbuffer!=null){gl.deleteRenderbuffer(this.__glStencilRenderbuffer)}},__getGLFramebuffer:function(enableDepthAndStencil,antiAlias,surfaceSelector){var gl=this.__context.gl;if(this.__glFramebuffer==null){this.__glFramebuffer=gl.createFramebuffer();this.__context.__bindGLFramebuffer(this.__glFramebuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_2D,this.__textureID,0);if(this.__context.__enableErrorChecking){var code=gl.checkFramebufferStatus(gl.FRAMEBUFFER);if(code!=gl.FRAMEBUFFER_COMPLETE){lime_utils_Log.warn("Error: Context3D.setRenderToTexture status:"+code+" width:"+this.__width+" height:"+this.__height,{fileName:"openfl/display3D/textures/TextureBase.hx",lineNumber:193,className:"openfl.display3D.textures.TextureBase",methodName:"__getGLFramebuffer"})}}}if(enableDepthAndStencil&&this.__glDepthRenderbuffer==null){this.__context.__bindGLFramebuffer(this.__glFramebuffer);if(openfl_display3D_Context3D.__glDepthStencil!=0){this.__glDepthRenderbuffer=gl.createRenderbuffer();this.__glStencilRenderbuffer=this.__glDepthRenderbuffer;gl.bindRenderbuffer(gl.RENDERBUFFER,this.__glDepthRenderbuffer);gl.renderbufferStorage(gl.RENDERBUFFER,openfl_display3D_Context3D.__glDepthStencil,this.__width,this.__height);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_STENCIL_ATTACHMENT,gl.RENDERBUFFER,this.__glDepthRenderbuffer)}else{this.__glDepthRenderbuffer=gl.createRenderbuffer();this.__glStencilRenderbuffer=gl.createRenderbuffer();gl.bindRenderbuffer(gl.RENDERBUFFER,this.__glDepthRenderbuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.DEPTH_COMPONENT16,this.__width,this.__height);gl.bindRenderbuffer(gl.RENDERBUFFER,this.__glStencilRenderbuffer);gl.renderbufferStorage(gl.RENDERBUFFER,gl.STENCIL_INDEX8,this.__width,this.__height);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.DEPTH_ATTACHMENT,gl.RENDERBUFFER,this.__glDepthRenderbuffer);gl.framebufferRenderbuffer(gl.FRAMEBUFFER,gl.STENCIL_ATTACHMENT,gl.RENDERBUFFER,this.__glStencilRenderbuffer)}if(this.__context.__enableErrorChecking){var code1=gl.checkFramebufferStatus(gl.FRAMEBUFFER);if(code1!=gl.FRAMEBUFFER_COMPLETE){lime_utils_Log.warn("Error: Context3D.setRenderToTexture status:"+code1+" width:"+this.__width+" height:"+this.__height,{fileName:"openfl/display3D/textures/TextureBase.hx",lineNumber:231,className:"openfl.display3D.textures.TextureBase",methodName:"__getGLFramebuffer"})}}gl.bindRenderbuffer(gl.RENDERBUFFER,null)}return this.__glFramebuffer},__getTexture:function(){return this.__textureID},__setSamplerState:function(state){if(!state.equals(this.__samplerState)){var gl=this.__context.gl;if(this.__textureTarget==this.__context.gl.TEXTURE_CUBE_MAP){this.__context.__bindGLTextureCubeMap(this.__textureID)}else{this.__context.__bindGLTexture2D(this.__textureID)}var wrapModeS=0;var wrapModeT=0;switch(state.wrap){case 0:wrapModeS=gl.CLAMP_TO_EDGE;wrapModeT=gl.CLAMP_TO_EDGE;break;case 1:wrapModeS=gl.CLAMP_TO_EDGE;wrapModeT=gl.REPEAT;break;case 2:wrapModeS=gl.REPEAT;wrapModeT=gl.REPEAT;break;case 3:wrapModeS=gl.REPEAT;wrapModeT=gl.CLAMP_TO_EDGE;break;default:throw new js__$Boot_HaxeError(new openfl_errors_Error("wrap bad enum"))}var magFilter=0;var minFilter=0;if(state.filter==5){magFilter=gl.NEAREST}else{magFilter=gl.LINEAR}switch(state.mipfilter){case 0:minFilter=state.filter==5?gl.NEAREST_MIPMAP_LINEAR:gl.LINEAR_MIPMAP_LINEAR;break;case 1:minFilter=state.filter==5?gl.NEAREST_MIPMAP_NEAREST:gl.LINEAR_MIPMAP_NEAREST;break;case 2:minFilter=state.filter==5?gl.NEAREST:gl.LINEAR;break;default:throw new js__$Boot_HaxeError(new openfl_errors_Error("mipfiter bad enum"))}gl.texParameteri(this.__textureTarget,gl.TEXTURE_MIN_FILTER,minFilter);gl.texParameteri(this.__textureTarget,gl.TEXTURE_MAG_FILTER,magFilter);gl.texParameteri(this.__textureTarget,gl.TEXTURE_WRAP_S,wrapModeS);gl.texParameteri(this.__textureTarget,gl.TEXTURE_WRAP_T,wrapModeT);if(this.__samplerState==null){this.__samplerState=state.clone()}this.__samplerState.copyFrom(state);return true}return false},__uploadFromImage:function(image){var gl=this.__context.gl;var internalFormat;var format;if(this.__textureTarget!=gl.TEXTURE_2D){return}if(image.buffer.bitsPerPixel==1){internalFormat=gl.ALPHA;format=gl.ALPHA}else{internalFormat=openfl_display3D_textures_TextureBase.__textureInternalFormat;format=openfl_display3D_textures_TextureBase.__textureFormat}this.__context.__bindGLTexture2D(this.__textureID);if(image.type!=lime_graphics_ImageType.DATA&&!image.get_premultiplied()){gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)}else if(!image.get_premultiplied()&&image.get_transparent()){gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1)}if(image.type==lime_graphics_ImageType.DATA){lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,gl.TEXTURE_2D,0,internalFormat,image.buffer.width,image.buffer.height,0,format,gl.UNSIGNED_BYTE,image.get_data())}else{lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,gl.TEXTURE_2D,0,internalFormat,format,gl.UNSIGNED_BYTE,image.get_src())}this.__context.__bindGLTexture2D(null)},__class__:openfl_display3D_textures_TextureBase});var openfl_display3D_textures_CubeTexture=function(context,size,format,optimizeForRenderToTexture,streamingLevels){openfl_display3D_textures_TextureBase.call(this,context);this.__size=size;this.__width=this.__height=this.__size;this.__optimizeForRenderToTexture=optimizeForRenderToTexture;this.__streamingLevels=streamingLevels;this.__textureTarget=this.__context.gl.TEXTURE_CUBE_MAP;this.__uploadedSides=0};$hxClasses["openfl.display3D.textures.CubeTexture"]=openfl_display3D_textures_CubeTexture;openfl_display3D_textures_CubeTexture.__name__="openfl.display3D.textures.CubeTexture";openfl_display3D_textures_CubeTexture.__super__=openfl_display3D_textures_TextureBase;openfl_display3D_textures_CubeTexture.prototype=$extend(openfl_display3D_textures_TextureBase.prototype,{__framebufferSurface:null,__size:null,__uploadedSides:null,__getGLFramebuffer:function(enableDepthAndStencil,antiAlias,surfaceSelector){var gl=this.__context.gl;if(this.__glFramebuffer==null){this.__glFramebuffer=gl.createFramebuffer();this.__framebufferSurface=-1}if(this.__framebufferSurface!=surfaceSelector){this.__framebufferSurface=surfaceSelector;this.__context.__bindGLFramebuffer(this.__glFramebuffer);gl.framebufferTexture2D(gl.FRAMEBUFFER,gl.COLOR_ATTACHMENT0,gl.TEXTURE_CUBE_MAP_POSITIVE_X+surfaceSelector,this.__textureID,0);if(this.__context.__enableErrorChecking){var code=gl.checkFramebufferStatus(gl.FRAMEBUFFER);if(code!=gl.FRAMEBUFFER_COMPLETE){lime_utils_Log.error("Error: Context3D.setRenderToTexture status:"+code+" width:"+this.__width+" height:"+this.__height,{fileName:"openfl/display3D/textures/CubeTexture.hx",lineNumber:278,className:"openfl.display3D.textures.CubeTexture",methodName:"__getGLFramebuffer"})}}}return openfl_display3D_textures_TextureBase.prototype.__getGLFramebuffer.call(this,enableDepthAndStencil,antiAlias,surfaceSelector)},__setSamplerState:function(state){if(openfl_display3D_textures_TextureBase.prototype.__setSamplerState.call(this,state)){var gl=this.__context.gl;if(state.mipfilter!=2&&!this.__samplerState.mipmapGenerated){gl.generateMipmap(gl.TEXTURE_CUBE_MAP);this.__samplerState.mipmapGenerated=true}if(openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy!=0){var aniso;switch(state.filter){case 0:aniso=16;break;case 1:aniso=2;break;case 2:aniso=4;break;case 3:aniso=8;break;default:aniso=1}if(aniso>openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy){aniso=openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy}gl.texParameterf(gl.TEXTURE_CUBE_MAP,openfl_display3D_Context3D.__glTextureMaxAnisotropy,aniso)}return true}return false},__class__:openfl_display3D_textures_CubeTexture});var openfl_display3D_textures_RectangleTexture=function(context,width,height,format,optimizeForRenderToTexture){openfl_display3D_textures_TextureBase.call(this,context);this.__width=width;this.__height=height;this.__optimizeForRenderToTexture=optimizeForRenderToTexture;this.__textureTarget=this.__context.gl.TEXTURE_2D;this.uploadFromTypedArray(null);if(optimizeForRenderToTexture){this.__getGLFramebuffer(true,0,0)}};$hxClasses["openfl.display3D.textures.RectangleTexture"]=openfl_display3D_textures_RectangleTexture;openfl_display3D_textures_RectangleTexture.__name__="openfl.display3D.textures.RectangleTexture";openfl_display3D_textures_RectangleTexture.__super__=openfl_display3D_textures_TextureBase;openfl_display3D_textures_RectangleTexture.prototype=$extend(openfl_display3D_textures_TextureBase.prototype,{uploadFromTypedArray:function(data){var gl=this.__context.gl;this.__context.__bindGLTexture2D(this.__textureID);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,this.__textureTarget,0,this.__internalFormat,this.__width,this.__height,0,this.__format,gl.UNSIGNED_BYTE,data);this.__context.__bindGLTexture2D(null)},__setSamplerState:function(state){if(openfl_display3D_textures_TextureBase.prototype.__setSamplerState.call(this,state)){var gl=this.__context.gl;if(openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy!=0){var aniso;switch(state.filter){case 0:aniso=16;break;case 1:aniso=2;break;case 2:aniso=4;break;case 3:aniso=8;break;default:aniso=1}if(aniso>openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy){aniso=openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy}gl.texParameterf(gl.TEXTURE_2D,openfl_display3D_Context3D.__glTextureMaxAnisotropy,aniso)}return true}return false},__class__:openfl_display3D_textures_RectangleTexture});var openfl_display3D_textures_Texture=function(context,width,height,format,optimizeForRenderToTexture,streamingLevels){openfl_display3D_textures_TextureBase.call(this,context);this.__width=width;this.__height=height;this.__optimizeForRenderToTexture=optimizeForRenderToTexture;this.__streamingLevels=streamingLevels;var gl=this.__context.gl;this.__textureTarget=gl.TEXTURE_2D;this.__context.__bindGLTexture2D(this.__textureID);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,this.__textureTarget,0,this.__internalFormat,this.__width,this.__height,0,this.__format,gl.UNSIGNED_BYTE,null);this.__context.__bindGLTexture2D(null);if(optimizeForRenderToTexture){this.__getGLFramebuffer(true,0,0)}};$hxClasses["openfl.display3D.textures.Texture"]=openfl_display3D_textures_Texture;openfl_display3D_textures_Texture.__name__="openfl.display3D.textures.Texture";openfl_display3D_textures_Texture.__super__=openfl_display3D_textures_TextureBase;openfl_display3D_textures_Texture.prototype=$extend(openfl_display3D_textures_TextureBase.prototype,{__setSamplerState:function(state){if(openfl_display3D_textures_TextureBase.prototype.__setSamplerState.call(this,state)){var gl=this.__context.gl;if(state.mipfilter!=2&&!this.__samplerState.mipmapGenerated){gl.generateMipmap(gl.TEXTURE_2D);this.__samplerState.mipmapGenerated=true}if(openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy!=0){var aniso;switch(state.filter){case 0:aniso=16;break;case 1:aniso=2;break;case 2:aniso=4;break;case 3:aniso=8;break;default:aniso=1}if(aniso>openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy){aniso=openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy}gl.texParameterf(gl.TEXTURE_2D,openfl_display3D_Context3D.__glTextureMaxAnisotropy,aniso)}return true}return false},__class__:openfl_display3D_textures_Texture});var openfl_display3D_textures_VideoTexture=function(context){openfl_display3D_textures_TextureBase.call(this,context);this.__textureTarget=this.__context.gl.TEXTURE_2D};$hxClasses["openfl.display3D.textures.VideoTexture"]=openfl_display3D_textures_VideoTexture;openfl_display3D_textures_VideoTexture.__name__="openfl.display3D.textures.VideoTexture";openfl_display3D_textures_VideoTexture.__super__=openfl_display3D_textures_TextureBase;openfl_display3D_textures_VideoTexture.prototype=$extend(openfl_display3D_textures_TextureBase.prototype,{__netStream:null,__getTexture:function(){if((!this.__netStream.__video.paused||this.__netStream.get___seeking())&&this.__netStream.__video.readyState>0){this.__netStream.set___seeking(false);var gl=this.__context.gl;this.__context.__bindGLTexture2D(this.__textureID);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,this.__netStream.__video)}return this.__textureID},__class__:openfl_display3D_textures_VideoTexture});var openfl_errors_Error=function(message,id){if(id==null){id=0}if(message==null){message=""}this.message=message;this.errorID=id;this.name="Error"};$hxClasses["openfl.errors.Error"]=openfl_errors_Error;openfl_errors_Error.__name__="openfl.errors.Error";openfl_errors_Error.prototype={errorID:null,message:null,name:null,toString:function(){if(this.message!=null){return this.message}else{return"Error"}},__class__:openfl_errors_Error};var openfl_errors_ArgumentError=function(message){if(message==null){message=""}openfl_errors_Error.call(this,message);this.name="ArgumentError"};$hxClasses["openfl.errors.ArgumentError"]=openfl_errors_ArgumentError;openfl_errors_ArgumentError.__name__="openfl.errors.ArgumentError";openfl_errors_ArgumentError.__super__=openfl_errors_Error;openfl_errors_ArgumentError.prototype=$extend(openfl_errors_Error.prototype,{__class__:openfl_errors_ArgumentError});var openfl_errors_IOError=function(message){if(message==null){message=""}openfl_errors_Error.call(this,message);this.name="IOError"};$hxClasses["openfl.errors.IOError"]=openfl_errors_IOError;openfl_errors_IOError.__name__="openfl.errors.IOError";openfl_errors_IOError.__super__=openfl_errors_Error;openfl_errors_IOError.prototype=$extend(openfl_errors_Error.prototype,{__class__:openfl_errors_IOError});var openfl_errors_EOFError=function(message,id){if(id==null){id=0}openfl_errors_IOError.call(this,"End of file was encountered");this.name="EOFError";this.errorID=2030};$hxClasses["openfl.errors.EOFError"]=openfl_errors_EOFError;openfl_errors_EOFError.__name__="openfl.errors.EOFError";openfl_errors_EOFError.__super__=openfl_errors_IOError;openfl_errors_EOFError.prototype=$extend(openfl_errors_IOError.prototype,{__class__:openfl_errors_EOFError});var openfl_errors_IllegalOperationError=function(message){if(message==null){message=""}openfl_errors_Error.call(this,message,0);this.name="IllegalOperationError"};$hxClasses["openfl.errors.IllegalOperationError"]=openfl_errors_IllegalOperationError;openfl_errors_IllegalOperationError.__name__="openfl.errors.IllegalOperationError";openfl_errors_IllegalOperationError.__super__=openfl_errors_Error;openfl_errors_IllegalOperationError.prototype=$extend(openfl_errors_Error.prototype,{__class__:openfl_errors_IllegalOperationError});var openfl_errors_TypeError=function(message){if(message==null){message=""}openfl_errors_Error.call(this,message,0);this.name="TypeError"};$hxClasses["openfl.errors.TypeError"]=openfl_errors_TypeError;openfl_errors_TypeError.__name__="openfl.errors.TypeError";openfl_errors_TypeError.__super__=openfl_errors_Error;openfl_errors_TypeError.prototype=$extend(openfl_errors_Error.prototype,{__class__:openfl_errors_TypeError});var openfl_events_Event=function(type,bubbles,cancelable){if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}this.type=type;this.bubbles=bubbles;this.cancelable=cancelable;this.eventPhase=2};$hxClasses["openfl.events.Event"]=openfl_events_Event;openfl_events_Event.__name__="openfl.events.Event";openfl_events_Event.prototype={bubbles:null,cancelable:null,currentTarget:null,eventPhase:null,target:null,type:null,__isCanceled:null,__isCanceledNow:null,__preventDefault:null,isDefaultPrevented:function(){return this.__preventDefault},preventDefault:function(){if(this.cancelable){this.__preventDefault=true}},__init:function(){this.target=null;this.currentTarget=null;this.bubbles=false;this.cancelable=false;this.eventPhase=2;this.__isCanceled=false;this.__isCanceledNow=false;this.__preventDefault=false},__class__:openfl_events_Event};var openfl_events_AccelerometerEvent=function(type,bubbles,cancelable,timestamp,accelerationX,accelerationY,accelerationZ){if(accelerationZ==null){accelerationZ=0}if(accelerationY==null){accelerationY=0}if(accelerationX==null){accelerationX=0}if(timestamp==null){timestamp=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.timestamp=timestamp;this.accelerationX=accelerationX;this.accelerationY=accelerationY;this.accelerationZ=accelerationZ};$hxClasses["openfl.events.AccelerometerEvent"]=openfl_events_AccelerometerEvent;openfl_events_AccelerometerEvent.__name__="openfl.events.AccelerometerEvent";openfl_events_AccelerometerEvent.__super__=openfl_events_Event;openfl_events_AccelerometerEvent.prototype=$extend(openfl_events_Event.prototype,{accelerationX:null,accelerationY:null,accelerationZ:null,timestamp:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.timestamp=0;this.accelerationX=0;this.accelerationY=0;this.accelerationZ=0},__class__:openfl_events_AccelerometerEvent});var openfl_events_ActivityEvent=function(type,bubbles,cancelable,activating){if(activating==null){activating=false}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.activating=activating};$hxClasses["openfl.events.ActivityEvent"]=openfl_events_ActivityEvent;openfl_events_ActivityEvent.__name__="openfl.events.ActivityEvent";openfl_events_ActivityEvent.__super__=openfl_events_Event;openfl_events_ActivityEvent.prototype=$extend(openfl_events_Event.prototype,{activating:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.activating=false},__class__:openfl_events_ActivityEvent});var openfl_events_TextEvent=function(type,bubbles,cancelable,text){if(text==null){text=""}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.text=text};$hxClasses["openfl.events.TextEvent"]=openfl_events_TextEvent;openfl_events_TextEvent.__name__="openfl.events.TextEvent";openfl_events_TextEvent.__super__=openfl_events_Event;openfl_events_TextEvent.prototype=$extend(openfl_events_Event.prototype,{text:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.text=""},__class__:openfl_events_TextEvent});var openfl_events_ErrorEvent=function(type,bubbles,cancelable,text,id){if(id==null){id=0}if(text==null){text=""}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_TextEvent.call(this,type,bubbles,cancelable,text);this.errorID=id};$hxClasses["openfl.events.ErrorEvent"]=openfl_events_ErrorEvent;openfl_events_ErrorEvent.__name__="openfl.events.ErrorEvent";openfl_events_ErrorEvent.__super__=openfl_events_TextEvent;openfl_events_ErrorEvent.prototype=$extend(openfl_events_TextEvent.prototype,{errorID:null,__init:function(){openfl_events_TextEvent.prototype.__init.call(this);this.errorID=0},__class__:openfl_events_ErrorEvent});var openfl_events__$EventDispatcher_DispatchIterator=function(list){this.active=false;this.reset(list)};$hxClasses["openfl.events._EventDispatcher.DispatchIterator"]=openfl_events__$EventDispatcher_DispatchIterator;openfl_events__$EventDispatcher_DispatchIterator.__name__="openfl.events._EventDispatcher.DispatchIterator";openfl_events__$EventDispatcher_DispatchIterator.prototype={active:null,index:null,isCopy:null,list:null,copy:function(){if(!this.isCopy){this.list=this.list.slice();this.isCopy=true}},hasNext:function(){return this.index<this.list.length},next:function(){return this.list[this.index++]},remove:function(listener,listIndex){if(this.active){if(!this.isCopy){if(listIndex<this.index){this.index--}}else{var _g=this.index;var _g1=this.list.length;while(_g<_g1){var i=_g++;if(this.list[i]==listener){this.list.splice(i,1);break}}}}},reset:function(list){this.list=list;this.isCopy=false;this.index=0},start:function(){this.active=true},stop:function(){this.active=false},__class__:openfl_events__$EventDispatcher_DispatchIterator};var openfl_events__$EventDispatcher_Listener=function(callback,useCapture,priority){this.callback=callback;this.useCapture=useCapture;this.priority=priority};$hxClasses["openfl.events._EventDispatcher.Listener"]=openfl_events__$EventDispatcher_Listener;openfl_events__$EventDispatcher_Listener.__name__="openfl.events._EventDispatcher.Listener";openfl_events__$EventDispatcher_Listener.prototype={callback:null,priority:null,useCapture:null,match:function(callback,useCapture){if(Reflect.compareMethods(this.callback,callback)){return this.useCapture==useCapture}else{return false}},__class__:openfl_events__$EventDispatcher_Listener};var openfl_events_FocusEvent=function(type,bubbles,cancelable,relatedObject,shiftKey,keyCode){if(keyCode==null){keyCode=0}if(shiftKey==null){shiftKey=false}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.keyCode=keyCode;this.shiftKey=shiftKey;this.relatedObject=relatedObject};$hxClasses["openfl.events.FocusEvent"]=openfl_events_FocusEvent;openfl_events_FocusEvent.__name__="openfl.events.FocusEvent";openfl_events_FocusEvent.__super__=openfl_events_Event;openfl_events_FocusEvent.prototype=$extend(openfl_events_Event.prototype,{keyCode:null,relatedObject:null,shiftKey:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.keyCode=0;this.shiftKey=false;this.relatedObject=null},__class__:openfl_events_FocusEvent});var openfl_events_FullScreenEvent=function(type,bubbles,cancelable,fullScreen,interactive){if(interactive==null){interactive=false}if(fullScreen==null){fullScreen=false}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_ActivityEvent.call(this,type,bubbles,cancelable);this.fullScreen=fullScreen;this.interactive=interactive};$hxClasses["openfl.events.FullScreenEvent"]=openfl_events_FullScreenEvent;openfl_events_FullScreenEvent.__name__="openfl.events.FullScreenEvent";openfl_events_FullScreenEvent.__super__=openfl_events_ActivityEvent;openfl_events_FullScreenEvent.prototype=$extend(openfl_events_ActivityEvent.prototype,{fullScreen:null,interactive:null,__init:function(){openfl_events_ActivityEvent.prototype.__init.call(this);this.fullScreen=false;this.interactive=false},__class__:openfl_events_FullScreenEvent});var openfl_events_GameInputEvent=function(type,bubbles,cancelable,device){if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=true}openfl_events_Event.call(this,type,bubbles,cancelable);this.device=device};$hxClasses["openfl.events.GameInputEvent"]=openfl_events_GameInputEvent;openfl_events_GameInputEvent.__name__="openfl.events.GameInputEvent";openfl_events_GameInputEvent.__super__=openfl_events_Event;openfl_events_GameInputEvent.prototype=$extend(openfl_events_Event.prototype,{device:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.device=null},__class__:openfl_events_GameInputEvent});var openfl_events_HTTPStatusEvent=function(type,bubbles,cancelable,status,redirected){if(redirected==null){redirected=false}if(status==null){status=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}this.status=status;this.redirected=redirected;openfl_events_Event.call(this,type,bubbles,cancelable)};$hxClasses["openfl.events.HTTPStatusEvent"]=openfl_events_HTTPStatusEvent;openfl_events_HTTPStatusEvent.__name__="openfl.events.HTTPStatusEvent";openfl_events_HTTPStatusEvent.__super__=openfl_events_Event;openfl_events_HTTPStatusEvent.prototype=$extend(openfl_events_Event.prototype,{redirected:null,responseHeaders:null,responseURL:null,status:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.status=0;this.redirected=false},__class__:openfl_events_HTTPStatusEvent});var openfl_events_IOErrorEvent=function(type,bubbles,cancelable,text,id){if(id==null){id=0}if(text==null){text=""}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=true}openfl_events_ErrorEvent.call(this,type,bubbles,cancelable,text,id)};$hxClasses["openfl.events.IOErrorEvent"]=openfl_events_IOErrorEvent;openfl_events_IOErrorEvent.__name__="openfl.events.IOErrorEvent";openfl_events_IOErrorEvent.__super__=openfl_events_ErrorEvent;openfl_events_IOErrorEvent.prototype=$extend(openfl_events_ErrorEvent.prototype,{__class__:openfl_events_IOErrorEvent});var openfl_events_KeyboardEvent=function(type,bubbles,cancelable,charCodeValue,keyCodeValue,keyLocationValue,ctrlKeyValue,altKeyValue,shiftKeyValue,controlKeyValue,commandKeyValue){if(commandKeyValue==null){commandKeyValue=false}if(controlKeyValue==null){controlKeyValue=false}if(shiftKeyValue==null){shiftKeyValue=false}if(altKeyValue==null){altKeyValue=false}if(ctrlKeyValue==null){ctrlKeyValue=false}if(keyCodeValue==null){keyCodeValue=0}if(charCodeValue==null){charCodeValue=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.charCode=charCodeValue;this.keyCode=keyCodeValue;this.keyLocation=keyLocationValue!=null?keyLocationValue:0;this.ctrlKey=ctrlKeyValue;this.altKey=altKeyValue;this.shiftKey=shiftKeyValue;this.controlKey=controlKeyValue;this.commandKey=commandKeyValue};$hxClasses["openfl.events.KeyboardEvent"]=openfl_events_KeyboardEvent;openfl_events_KeyboardEvent.__name__="openfl.events.KeyboardEvent";openfl_events_KeyboardEvent.__super__=openfl_events_Event;openfl_events_KeyboardEvent.prototype=$extend(openfl_events_Event.prototype,{altKey:null,charCode:null,commandKey:null,controlKey:null,ctrlKey:null,keyCode:null,keyLocation:null,shiftKey:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.charCode=0;this.keyCode=0;this.keyLocation=0;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.controlKey=false;this.commandKey=false},__class__:openfl_events_KeyboardEvent});var openfl_events_MouseEvent=function(type,bubbles,cancelable,localX,localY,relatedObject,ctrlKey,altKey,shiftKey,buttonDown,delta,commandKey,clickCount){if(clickCount==null){clickCount=0}if(commandKey==null){commandKey=false}if(delta==null){delta=0}if(buttonDown==null){buttonDown=false}if(shiftKey==null){shiftKey=false}if(altKey==null){altKey=false}if(ctrlKey==null){ctrlKey=false}if(localY==null){localY=0}if(localX==null){localX=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=true}openfl_events_Event.call(this,type,bubbles,cancelable);this.shiftKey=shiftKey;this.altKey=altKey;this.ctrlKey=ctrlKey;this.bubbles=bubbles;this.relatedObject=relatedObject;this.delta=delta;this.localX=localX;this.localY=localY;this.buttonDown=buttonDown;this.commandKey=commandKey;this.clickCount=clickCount;this.isRelatedObjectInaccessible=false;this.stageX=NaN;this.stageY=NaN};$hxClasses["openfl.events.MouseEvent"]=openfl_events_MouseEvent;openfl_events_MouseEvent.__name__="openfl.events.MouseEvent";openfl_events_MouseEvent.__create=function(type,button,stageX,stageY,local,target,delta){if(delta==null){delta=0}var event=new openfl_events_MouseEvent(type,true,false,local.x,local.y,null,openfl_events_MouseEvent.__ctrlKey,openfl_events_MouseEvent.__altKey,openfl_events_MouseEvent.__shiftKey,openfl_events_MouseEvent.__buttonDown,delta,openfl_events_MouseEvent.__commandKey);event.stageX=stageX;event.stageY=stageY;event.target=target;return event};openfl_events_MouseEvent.__super__=openfl_events_Event;openfl_events_MouseEvent.prototype=$extend(openfl_events_Event.prototype,{altKey:null,buttonDown:null,commandKey:null,clickCount:null,ctrlKey:null,delta:null,isRelatedObjectInaccessible:null,localX:null,localY:null,relatedObject:null,shiftKey:null,stageX:null,stageY:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.shiftKey=false;this.altKey=false;this.ctrlKey=false;this.bubbles=false;this.relatedObject=null;this.delta=0;this.localX=0;this.localY=0;this.buttonDown=false;this.commandKey=false;this.clickCount=0;this.isRelatedObjectInaccessible=false;this.stageX=NaN;this.stageY=NaN},__class__:openfl_events_MouseEvent});var openfl_events_NetStatusEvent=function(type,bubbles,cancelable,info){if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}this.info=info;openfl_events_Event.call(this,type,bubbles,cancelable)};$hxClasses["openfl.events.NetStatusEvent"]=openfl_events_NetStatusEvent;openfl_events_NetStatusEvent.__name__="openfl.events.NetStatusEvent";openfl_events_NetStatusEvent.__super__=openfl_events_Event;openfl_events_NetStatusEvent.prototype=$extend(openfl_events_Event.prototype,{info:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.info=null},__class__:openfl_events_NetStatusEvent});var openfl_events_ProgressEvent=function(type,bubbles,cancelable,bytesLoaded,bytesTotal){if(bytesTotal==null){bytesTotal=0}if(bytesLoaded==null){bytesLoaded=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.bytesLoaded=bytesLoaded;this.bytesTotal=bytesTotal};$hxClasses["openfl.events.ProgressEvent"]=openfl_events_ProgressEvent;openfl_events_ProgressEvent.__name__="openfl.events.ProgressEvent";openfl_events_ProgressEvent.__super__=openfl_events_Event;openfl_events_ProgressEvent.prototype=$extend(openfl_events_Event.prototype,{bytesLoaded:null,bytesTotal:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.bytesLoaded=0;this.bytesTotal=0},__class__:openfl_events_ProgressEvent});var openfl_events_RenderEvent=function(type,bubbles,cancelable,objectMatrix,objectColorTransform,allowSmoothing){if(allowSmoothing==null){allowSmoothing=true}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_Event.call(this,type,bubbles,cancelable);this.objectMatrix=objectMatrix;this.objectColorTransform=objectColorTransform;this.allowSmoothing=allowSmoothing};$hxClasses["openfl.events.RenderEvent"]=openfl_events_RenderEvent;openfl_events_RenderEvent.__name__="openfl.events.RenderEvent";openfl_events_RenderEvent.__super__=openfl_events_Event;openfl_events_RenderEvent.prototype=$extend(openfl_events_Event.prototype,{allowSmoothing:null,objectColorTransform:null,objectMatrix:null,renderer:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.objectMatrix=null;this.objectColorTransform=null;this.allowSmoothing=false;this.renderer=null},__class__:openfl_events_RenderEvent});var openfl_events_SecurityErrorEvent=function(type,bubbles,cancelable,text,id){if(id==null){id=0}if(text==null){text=""}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=false}openfl_events_ErrorEvent.call(this,type,bubbles,cancelable,text,id)};$hxClasses["openfl.events.SecurityErrorEvent"]=openfl_events_SecurityErrorEvent;openfl_events_SecurityErrorEvent.__name__="openfl.events.SecurityErrorEvent";openfl_events_SecurityErrorEvent.__super__=openfl_events_ErrorEvent;openfl_events_SecurityErrorEvent.prototype=$extend(openfl_events_ErrorEvent.prototype,{__class__:openfl_events_SecurityErrorEvent});var openfl_events_TouchEvent=function(type,bubbles,cancelable,touchPointID,isPrimaryTouchPoint,localX,localY,sizeX,sizeY,pressure,relatedObject,ctrlKey,altKey,shiftKey,commandKey,controlKey,timestamp,touchIntent,samples,isTouchPointCanceled){if(isTouchPointCanceled==null){isTouchPointCanceled=false}if(timestamp==null){timestamp=0}if(controlKey==null){controlKey=false}if(commandKey==null){commandKey=false}if(shiftKey==null){shiftKey=false}if(altKey==null){altKey=false}if(ctrlKey==null){ctrlKey=false}if(pressure==null){pressure=0}if(sizeY==null){sizeY=0}if(sizeX==null){sizeX=0}if(localY==null){localY=0}if(localX==null){localX=0}if(isPrimaryTouchPoint==null){isPrimaryTouchPoint=false}if(touchPointID==null){touchPointID=0}if(cancelable==null){cancelable=false}if(bubbles==null){bubbles=true}openfl_events_Event.call(this,type,bubbles,cancelable);this.touchPointID=touchPointID;this.isPrimaryTouchPoint=isPrimaryTouchPoint;this.localX=localX;this.localY=localY;this.sizeX=sizeX;this.sizeY=sizeY;this.pressure=pressure;this.relatedObject=relatedObject;this.ctrlKey=ctrlKey;this.altKey=altKey;this.shiftKey=shiftKey;this.commandKey=commandKey;this.controlKey=controlKey;this.stageX=NaN;this.stageY=NaN};$hxClasses["openfl.events.TouchEvent"]=openfl_events_TouchEvent;openfl_events_TouchEvent.__name__="openfl.events.TouchEvent";openfl_events_TouchEvent.__create=function(type,touch,stageX,stageY,local,target){var evt=new openfl_events_TouchEvent(type,true,false,0,true,local.x,local.y,1,1,1);evt.stageX=stageX;evt.stageY=stageY;evt.target=target;return evt};openfl_events_TouchEvent.__super__=openfl_events_Event;openfl_events_TouchEvent.prototype=$extend(openfl_events_Event.prototype,{altKey:null,commandKey:null,controlKey:null,ctrlKey:null,isPrimaryTouchPoint:null,localX:null,localY:null,pressure:null,relatedObject:null,shiftKey:null,sizeX:null,sizeY:null,stageX:null,stageY:null,touchPointID:null,__init:function(){openfl_events_Event.prototype.__init.call(this);this.touchPointID=0;this.isPrimaryTouchPoint=false;this.localX=0;this.localY=0;this.sizeX=0;this.sizeY=0;this.pressure=0;this.relatedObject=null;this.ctrlKey=false;this.altKey=false;this.shiftKey=false;this.commandKey=false;this.controlKey=false;this.stageX=NaN;this.stageY=NaN},__class__:openfl_events_TouchEvent});var openfl_events_UncaughtErrorEvent=function(type,bubbles,cancelable,error){if(cancelable==null){cancelable=true}if(bubbles==null){bubbles=true}openfl_events_ErrorEvent.call(this,type,bubbles,cancelable);this.error=error};$hxClasses["openfl.events.UncaughtErrorEvent"]=openfl_events_UncaughtErrorEvent;openfl_events_UncaughtErrorEvent.__name__="openfl.events.UncaughtErrorEvent";openfl_events_UncaughtErrorEvent.__super__=openfl_events_ErrorEvent;openfl_events_UncaughtErrorEvent.prototype=$extend(openfl_events_ErrorEvent.prototype,{error:null,__init:function(){openfl_events_ErrorEvent.prototype.__init.call(this);this.error=null},__class__:openfl_events_UncaughtErrorEvent});var openfl_events_UncaughtErrorEvents=function(){openfl_events_EventDispatcher.call(this)};$hxClasses["openfl.events.UncaughtErrorEvents"]=openfl_events_UncaughtErrorEvents;openfl_events_UncaughtErrorEvents.__name__="openfl.events.UncaughtErrorEvents";openfl_events_UncaughtErrorEvents.__super__=openfl_events_EventDispatcher;openfl_events_UncaughtErrorEvents.prototype=$extend(openfl_events_EventDispatcher.prototype,{__class__:openfl_events_UncaughtErrorEvents});var openfl_filters_BitmapFilter=function(){this.__bottomExtension=0;this.__leftExtension=0;this.__needSecondBitmapData=true;this.__numShaderPasses=0;this.__preserveObject=false;this.__rightExtension=0;this.__shaderBlendMode=10;this.__topExtension=0;this.__smooth=true};$hxClasses["openfl.filters.BitmapFilter"]=openfl_filters_BitmapFilter;openfl_filters_BitmapFilter.__name__="openfl.filters.BitmapFilter";openfl_filters_BitmapFilter.prototype={__bottomExtension:null,__leftExtension:null,__needSecondBitmapData:null,__numShaderPasses:null,__preserveObject:null,__renderDirty:null,__rightExtension:null,__shaderBlendMode:null,__smooth:null,__topExtension:null,__applyFilter:function(bitmapData,sourceBitmapData,sourceRect,destPoint){return sourceBitmapData},__initShader:function(renderer,pass,sourceBitmapData){return null},__class__:openfl_filters_BitmapFilter};var openfl_filters_BitmapFilterShader=function(code){if(this.__glFragmentSource==null){this.__glFragmentSource="varying vec2 openfl_TextureCoordv;\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_FragColor = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}"}openfl_display_Shader.call(this,code);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters.BitmapFilterShader"]=openfl_filters_BitmapFilterShader;openfl_filters_BitmapFilterShader.__name__="openfl.filters.BitmapFilterShader";openfl_filters_BitmapFilterShader.__super__=openfl_display_Shader;openfl_filters_BitmapFilterShader.prototype=$extend(openfl_display_Shader.prototype,{openfl_Position:null,openfl_TextureCoord:null,openfl_Matrix:null,openfl_TextureSize:null,openfl_Texture:null,__class__:openfl_filters_BitmapFilterShader});var openfl_filters__$BlurFilter_BlurShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="uniform sampler2D openfl_Texture;\n\n\t\tvarying vec2 vBlurCoords[7];\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 sum = vec4(0.0);\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[0]) * 0.00443;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[1]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[2]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[3]) * 0.39894;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[4]) * 0.24197;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[5]) * 0.05399;\n\t\t\tsum += texture2D(openfl_Texture, vBlurCoords[6]) * 0.00443;\n\n\t\t\tgl_FragColor = sum;\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vBlurCoords[7];\n\t\tuniform vec2 uTextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\tvec2 r = uRadius / uTextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * 0.75;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * 0.5;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * 0.5;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * 0.75;\n\t\t\tvBlurCoords[6] = openfl_TextureCoord + r;\n\n\t\t}"}openfl_filters_BitmapFilterShader.call(this);this.uRadius.value=[0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._BlurFilter.BlurShader"]=openfl_filters__$BlurFilter_BlurShader;openfl_filters__$BlurFilter_BlurShader.__name__="openfl.filters._BlurFilter.BlurShader";openfl_filters__$BlurFilter_BlurShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$BlurFilter_BlurShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{__update:function(){this.uTextureSize.value=[this.__texture.input.width,this.__texture.input.height];openfl_filters_BitmapFilterShader.prototype.__update.call(this)},uRadius:null,uTextureSize:null,__class__:openfl_filters__$BlurFilter_BlurShader});var openfl_filters_BlurFilter=function(blurX,blurY,quality){if(quality==null){quality=1}if(blurY==null){blurY=4}if(blurX==null){blurX=4}openfl_filters_BitmapFilter.call(this);this.set_blurX(blurX);this.set_blurY(blurY);this.set_quality(quality);this.__needSecondBitmapData=true;this.__preserveObject=false;this.__renderDirty=true};$hxClasses["openfl.filters.BlurFilter"]=openfl_filters_BlurFilter;openfl_filters_BlurFilter.__name__="openfl.filters.BlurFilter";openfl_filters_BlurFilter.__super__=openfl_filters_BitmapFilter;openfl_filters_BlurFilter.prototype=$extend(openfl_filters_BitmapFilter.prototype,{__blurX:null,__blurY:null,__horizontalPasses:null,__quality:null,__verticalPasses:null,__applyFilter:function(bitmapData,sourceBitmapData,sourceRect,destPoint){if(lime__$internal_graphics_ImageDataUtil.gaussianBlur(bitmapData.image,sourceBitmapData.image,sourceRect.__toLimeRectangle(),destPoint.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality)==bitmapData.image){return bitmapData}return sourceBitmapData},__initShader:function(renderer,pass,sourceBitmapData){if(pass<this.__horizontalPasses){openfl_filters_BlurFilter.__blurShader.uRadius.value[0]=this.get_blurX()*Math.pow(.5,pass>>1);openfl_filters_BlurFilter.__blurShader.uRadius.value[1]=0}else{var scale=Math.pow(.5,pass-this.__horizontalPasses>>1);openfl_filters_BlurFilter.__blurShader.uRadius.value[0]=0;openfl_filters_BlurFilter.__blurShader.uRadius.value[1]=this.get_blurY()*scale}return openfl_filters_BlurFilter.__blurShader},get_blurX:function(){return this.__blurX},set_blurX:function(value){if(value!=this.__blurX){this.__blurX=value;this.__renderDirty=true;this.__leftExtension=value>0?Math.ceil(value):0;this.__rightExtension=this.__leftExtension}return value},get_blurY:function(){return this.__blurY},set_blurY:function(value){if(value!=this.__blurY){this.__blurY=value;this.__renderDirty=true;this.__topExtension=value>0?Math.ceil(value):0;this.__bottomExtension=this.__topExtension}return value},set_quality:function(value){this.__horizontalPasses=this.__blurX<=0?0:Math.round(this.__blurX*(value/4))+1;this.__verticalPasses=this.__blurY<=0?0:Math.round(this.__blurY*(value/4))+1;this.__numShaderPasses=this.__horizontalPasses+this.__verticalPasses;if(value!=this.__quality){this.__renderDirty=true}return this.__quality=value},__class__:openfl_filters_BlurFilter,__properties__:{set_quality:"set_quality",set_blurY:"set_blurY",get_blurY:"get_blurY",set_blurX:"set_blurX",get_blurX:"get_blurX"}});var openfl_filters__$ColorMatrixFilter_ColorMatrixShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="varying vec2 openfl_TextureCoordv;\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform mat4 uMultipliers;\n\t\tuniform vec4 uOffsets;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 color = texture2D (openfl_Texture, openfl_TextureCoordv);\n\n\t\t\tif (color.a == 0.0) {\n\n\t\t\t\tgl_FragColor = vec4 (0.0, 0.0, 0.0, 0.0);\n\n\t\t\t} else {\n\n\t\t\t\tcolor = vec4 (color.rgb / color.a, color.a);\n\t\t\t\tcolor = uOffsets + color * uMultipliers;\n\n\t\t\t\tgl_FragColor = vec4 (color.rgb * color.a, color.a);\n\n\t\t\t}\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordv;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\n\t\tvoid main(void) {\n\n\t\t\topenfl_TextureCoordv = openfl_TextureCoord;\n\n\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\n\t\t}"}openfl_filters_BitmapFilterShader.call(this);this.uMultipliers.value=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];this.uOffsets.value=[0,0,0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._ColorMatrixFilter.ColorMatrixShader"]=openfl_filters__$ColorMatrixFilter_ColorMatrixShader;openfl_filters__$ColorMatrixFilter_ColorMatrixShader.__name__="openfl.filters._ColorMatrixFilter.ColorMatrixShader";openfl_filters__$ColorMatrixFilter_ColorMatrixShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$ColorMatrixFilter_ColorMatrixShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{init:function(matrix){var multipliers=this.uMultipliers.value;var offsets=this.uOffsets.value;multipliers[0]=matrix[0];multipliers[1]=matrix[1];multipliers[2]=matrix[2];multipliers[3]=matrix[3];multipliers[4]=matrix[5];multipliers[5]=matrix[6];multipliers[6]=matrix[7];multipliers[7]=matrix[8];multipliers[8]=matrix[10];multipliers[9]=matrix[11];multipliers[10]=matrix[12];multipliers[11]=matrix[13];multipliers[12]=matrix[15];multipliers[13]=matrix[16];multipliers[14]=matrix[17];multipliers[15]=matrix[18];offsets[0]=matrix[4]/255;offsets[1]=matrix[9]/255;offsets[2]=matrix[14]/255;offsets[3]=matrix[19]/255},uMultipliers:null,uOffsets:null,__class__:openfl_filters__$ColorMatrixFilter_ColorMatrixShader});var openfl_filters_ColorMatrixFilter=function(matrix){openfl_filters_BitmapFilter.call(this);this.set_matrix(matrix);this.__numShaderPasses=1;this.__needSecondBitmapData=false};$hxClasses["openfl.filters.ColorMatrixFilter"]=openfl_filters_ColorMatrixFilter;openfl_filters_ColorMatrixFilter.__name__="openfl.filters.ColorMatrixFilter";openfl_filters_ColorMatrixFilter.__super__=openfl_filters_BitmapFilter;openfl_filters_ColorMatrixFilter.prototype=$extend(openfl_filters_BitmapFilter.prototype,{__matrix:null,__applyFilter:function(destBitmapData,sourceBitmapData,sourceRect,destPoint){var sourceImage=sourceBitmapData.image;var image=destBitmapData.image;lime__$internal_graphics_ImageCanvasUtil.convertToData(sourceImage);lime__$internal_graphics_ImageCanvasUtil.convertToData(image);var sourceData=sourceImage.get_data();var destData=image.get_data();var offsetX=destPoint.x-sourceRect.x|0;var offsetY=destPoint.y-sourceRect.y|0;var sourceStride=sourceBitmapData.width*4;var destStride=destBitmapData.width*4;var sourceFormat=sourceImage.buffer.format;var destFormat=image.buffer.format;var sourcePremultiplied=sourceImage.buffer.premultiplied;var destPremultiplied=image.buffer.premultiplied;var sourcePixel;var destPixel=0;var sourceOffset;var destOffset;var _g=sourceRect.y|0;var _g1=sourceRect.height|0;while(_g<_g1){var row=_g++;var _g2=sourceRect.x|0;var _g11=sourceRect.width|0;while(_g2<_g11){var column=_g2++;sourceOffset=row*sourceStride+column*4;destOffset=(row+offsetX)*destStride+(column+offsetY)*4;var format=sourceFormat;var premultiplied=sourcePremultiplied;if(sourcePremultiplied==null){premultiplied=false}if(sourceFormat==null){format=0}switch(format){case 0:sourcePixel=(sourceData[sourceOffset]&255)<<24|(sourceData[sourceOffset+1]&255)<<16|(sourceData[sourceOffset+2]&255)<<8|sourceData[sourceOffset+3]&255;break;case 1:sourcePixel=(sourceData[sourceOffset+1]&255)<<24|(sourceData[sourceOffset+2]&255)<<16|(sourceData[sourceOffset+3]&255)<<8|sourceData[sourceOffset]&255;break;case 2:sourcePixel=(sourceData[sourceOffset+2]&255)<<24|(sourceData[sourceOffset+1]&255)<<16|(sourceData[sourceOffset]&255)<<8|sourceData[sourceOffset+3]&255;break}if(premultiplied){if((sourcePixel&255)!=0&&(sourcePixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.unmult=255/(sourcePixel&255);sourcePixel=(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<24|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<16|(lime_math__$RGBA_RGBA_$Impl_$.__clamp[Math.round((sourcePixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.unmult)]&255)<<8|sourcePixel&255&255}}if((sourcePixel&255)==0){destPixel=0}else{destPixel=((Math.max(0,Math.min(this.__matrix[0]*(sourcePixel>>>24&255)+this.__matrix[1]*(sourcePixel>>>16&255)+this.__matrix[2]*(sourcePixel>>>8&255)+this.__matrix[3]*(sourcePixel&255)+this.__matrix[4],255))|0)&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|((Math.max(0,Math.min(this.__matrix[5]*(sourcePixel>>>24&255)+this.__matrix[6]*(sourcePixel>>>16&255)+this.__matrix[7]*(sourcePixel>>>8&255)+this.__matrix[8]*(sourcePixel&255)+this.__matrix[9],255))|0)&255)<<16|(destPixel>>>8&255&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|((Math.max(0,Math.min(this.__matrix[10]*(sourcePixel>>>24&255)+this.__matrix[11]*(sourcePixel>>>16&255)+this.__matrix[12]*(sourcePixel>>>8&255)+this.__matrix[13]*(sourcePixel&255)+this.__matrix[14],255))|0)&255)<<8|destPixel&255&255;destPixel=(destPixel>>>24&255&255)<<24|(destPixel>>>16&255&255)<<16|(destPixel>>>8&255&255)<<8|(Math.max(0,Math.min(this.__matrix[15]*(sourcePixel>>>24&255)+this.__matrix[16]*(sourcePixel>>>16&255)+this.__matrix[17]*(sourcePixel>>>8&255)+this.__matrix[18]*(sourcePixel&255)+this.__matrix[19],255))|0)&255}var format1=destFormat;var premultiplied1=destPremultiplied;if(destPremultiplied==null){premultiplied1=false}if(destFormat==null){format1=0}if(premultiplied1){if((destPixel&255)==0){if(destPixel!=0){destPixel=0}}else if((destPixel&255)!=255){lime_math__$RGBA_RGBA_$Impl_$.a16=lime_math__$RGBA_RGBA_$Impl_$.__alpha16[destPixel&255];destPixel=((destPixel>>>24&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<24|((destPixel>>>16&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<16|((destPixel>>>8&255)*lime_math__$RGBA_RGBA_$Impl_$.a16>>16&255)<<8|destPixel&255&255}}switch(format1){case 0:destData[destOffset]=destPixel>>>24&255;destData[destOffset+1]=destPixel>>>16&255;destData[destOffset+2]=destPixel>>>8&255;destData[destOffset+3]=destPixel&255;break;case 1:destData[destOffset]=destPixel&255;destData[destOffset+1]=destPixel>>>24&255;destData[destOffset+2]=destPixel>>>16&255;destData[destOffset+3]=destPixel>>>8&255;break;case 2:destData[destOffset]=destPixel>>>8&255;destData[destOffset+1]=destPixel>>>16&255;destData[destOffset+2]=destPixel>>>24&255;destData[destOffset+3]=destPixel&255;break}}}destBitmapData.image.dirty=true;return destBitmapData},__initShader:function(renderer,pass,sourceBitmapData){openfl_filters_ColorMatrixFilter.__colorMatrixShader.init(this.get_matrix());return openfl_filters_ColorMatrixFilter.__colorMatrixShader},get_matrix:function(){return this.__matrix},set_matrix:function(value){if(value==null){value=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}return this.__matrix=value},__class__:openfl_filters_ColorMatrixFilter,__properties__:{set_matrix:"set_matrix",get_matrix:"get_matrix"}});var openfl_filters__$ConvolutionFilter_ConvolutionShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="varying vec2 vBlurCoords[9];\n\n\t\tuniform sampler2D openfl_Texture;\n\n\t\tuniform float uBias;\n\t\tuniform mat3 uConvoMatrix;\n\t\tuniform float uDivisor;\n\t\tuniform bool uPreserveAlpha;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 tc = texture2D (openfl_Texture, vBlurCoords[4]);\n\t\t\tvec4 c = vec4 (0.0);\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[0]) * uConvoMatrix[0][0];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[1]) * uConvoMatrix[0][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[2]) * uConvoMatrix[0][2];\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[3]) * uConvoMatrix[1][0];\n\t\t\tc += tc * uConvoMatrix[1][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[5]) * uConvoMatrix[1][2];\n\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[6]) * uConvoMatrix[2][0];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[7]) * uConvoMatrix[2][1];\n\t\t\tc += texture2D (openfl_Texture, vBlurCoords[8]) * uConvoMatrix[2][2];\n\n\t\t\tif (uDivisor > 0.0) {\n\n\t\t\t\tc /= vec4 (uDivisor, uDivisor, uDivisor, uDivisor);\n\n\t\t\t}\n\n\t\t\tc += vec4 (uBias, uBias, uBias, uBias);\n\n\t\t\tif (uPreserveAlpha) {\n\n\t\t\t\tc.a = tc.a;\n\n\t\t\t}\n\n\t\t\tgl_FragColor = c;\n\n\t\t}"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 vBlurCoords[9];\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tvoid main(void) {\n\n\t\t\tvec2 r = vec2 (1.0, 1.0) / openfl_TextureSize;\n\t\t\tvec2 t = openfl_TextureCoord;\n\n\t\t\tvBlurCoords[0] = t + r * vec2 (-1.0, -1.0);\n\t\t\tvBlurCoords[1] = t + r * vec2 (0.0, -1.0);\n\t\t\tvBlurCoords[2] = t + r * vec2 (1.0, -1.0);\n\n\t\t\tvBlurCoords[3] = t + r * vec2 (-1.0, 0.0);\n\t\t\tvBlurCoords[4] = t;\n\t\t\tvBlurCoords[5] = t + r * vec2 (1.0, 0.0);\n\n\t\t\tvBlurCoords[6] = t + r * vec2 (-1.0, 1.0);\n\t\t\tvBlurCoords[7] = t + r * vec2 (0.0, 1.0);\n\t\t\tvBlurCoords[8] = t + r * vec2 (1.0, 1.0);\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t}"}openfl_filters_BitmapFilterShader.call(this);this.uDivisor.value=[1];this.uBias.value=[0];this.uPreserveAlpha.value=[true];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._ConvolutionFilter.ConvolutionShader"]=openfl_filters__$ConvolutionFilter_ConvolutionShader;openfl_filters__$ConvolutionFilter_ConvolutionShader.__name__="openfl.filters._ConvolutionFilter.ConvolutionShader";openfl_filters__$ConvolutionFilter_ConvolutionShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$ConvolutionFilter_ConvolutionShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{uBias:null,uConvoMatrix:null,uDivisor:null,uPreserveAlpha:null,__class__:openfl_filters__$ConvolutionFilter_ConvolutionShader});var openfl_filters__$DisplacementMapFilter_DisplacementMapShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D mapTexture;\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec4 uOffsets;\n\t\tuniform mat4 uDisplacements;\n\n\t\tvarying vec2 openfl_TextureCoordV;\n\t\tvarying vec2 mapTextureCoords;\n\n\t\tvoid main(void) {\n\n\t\t\tvec4 map_color = texture2D(mapTexture, mapTextureCoords);\n\t\t\tvec4 map_color_mod = map_color - uOffsets;\n\n\t\t\tmap_color_mod = map_color_mod * vec4(map_color.w, map_color.w, 1.0, 1.0);\n\n\t\t\tvec4 displacements_multiplied = map_color_mod * uDisplacements;\n\t\t\tvec4 result = vec4(openfl_TextureCoordV.x, openfl_TextureCoordV.y, 0.0, 1.0) + displacements_multiplied;\n\n\t\t\tgl_FragColor = texture2D(openfl_Texture, vec2(result));\n\n\t\t}\n\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="\n\n\t\tuniform mat4 openfl_Matrix;\n\n\t\tuniform vec2 mapTextureCoordsOffset;\n\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tvarying vec2 openfl_TextureCoordV;\n\n\t\tvarying vec2 mapTextureCoords;\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\n\t\t\topenfl_TextureCoordV = openfl_TextureCoord;\n\t\t\tmapTextureCoords = openfl_TextureCoord - mapTextureCoordsOffset;\n\n\t\t}\n\n\t"}openfl_filters_BitmapFilterShader.call(this);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._DisplacementMapFilter.DisplacementMapShader"]=openfl_filters__$DisplacementMapFilter_DisplacementMapShader;openfl_filters__$DisplacementMapFilter_DisplacementMapShader.__name__="openfl.filters._DisplacementMapFilter.DisplacementMapShader";openfl_filters__$DisplacementMapFilter_DisplacementMapShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$DisplacementMapFilter_DisplacementMapShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{mapTextureCoordsOffset:null,mapTexture:null,uOffsets:null,uDisplacements:null,__class__:openfl_filters__$DisplacementMapFilter_DisplacementMapShader});var openfl_filters__$DropShadowFilter_HideShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tuniform float strength;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw) * strength;\n\n\t\t\tgl_FragColor = glow;\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.strength.value=[1];this.offset.value=[0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._DropShadowFilter.HideShader"]=openfl_filters__$DropShadowFilter_HideShader;openfl_filters__$DropShadowFilter_HideShader.__name__="openfl.filters._DropShadowFilter.HideShader";openfl_filters__$DropShadowFilter_HideShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$DropShadowFilter_HideShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{offset:null,sourceBitmap:null,strength:null,__class__:openfl_filters__$DropShadowFilter_HideShader});var openfl_filters_DropShadowFilter=function(distance,angle,color,alpha,blurX,blurY,strength,quality,inner,knockout,hideObject){if(hideObject==null){hideObject=false}if(knockout==null){knockout=false}if(inner==null){inner=false}if(quality==null){quality=1}if(strength==null){strength=1}if(blurY==null){blurY=4}if(blurX==null){blurX=4}if(alpha==null){alpha=1}if(color==null){color=0}if(angle==null){angle=45}if(distance==null){distance=4}openfl_filters_BitmapFilter.call(this);this.__offsetX=0;this.__offsetY=0;this.__distance=distance;this.__angle=angle;this.__color=color;this.__alpha=alpha;this.__blurX=blurX;this.__blurY=blurY;this.__strength=strength;this.__quality=quality;this.__inner=inner;this.__knockout=knockout;this.__hideObject=hideObject;this.__updateSize();this.__needSecondBitmapData=true;this.__preserveObject=true;this.__renderDirty=true};$hxClasses["openfl.filters.DropShadowFilter"]=openfl_filters_DropShadowFilter;openfl_filters_DropShadowFilter.__name__="openfl.filters.DropShadowFilter";openfl_filters_DropShadowFilter.__super__=openfl_filters_BitmapFilter;openfl_filters_DropShadowFilter.prototype=$extend(openfl_filters_BitmapFilter.prototype,{__alpha:null,__angle:null,__blurX:null,__blurY:null,__color:null,__distance:null,__hideObject:null,__horizontalPasses:null,__inner:null,__knockout:null,__offsetX:null,__offsetY:null,__quality:null,__strength:null,__verticalPasses:null,__applyFilter:function(bitmapData,sourceBitmapData,sourceRect,destPoint){var r=this.__color>>16&255;var g=this.__color>>8&255;var b=this.__color&255;var point=new openfl_geom_Point(destPoint.x+this.__offsetX,destPoint.y+this.__offsetY);var finalImage=lime__$internal_graphics_ImageDataUtil.gaussianBlur(bitmapData.image,sourceBitmapData.image,sourceRect.__toLimeRectangle(),point.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality,this.__strength);finalImage.colorTransform(finalImage.get_rect(),new openfl_geom_ColorTransform(0,0,0,this.__alpha,r,g,b,0).__toLimeColorMatrix());if(finalImage==bitmapData.image){return bitmapData}return sourceBitmapData},__initShader:function(renderer,pass,sourceBitmapData){if(this.__inner&&pass==0){return openfl_filters_GlowFilter.__invertAlphaShader}var blurPass=pass-(this.__inner?1:0);if(blurPass<this.__horizontalPasses+this.__verticalPasses){var shader=openfl_filters_GlowFilter.__blurAlphaShader;if(blurPass<this.__horizontalPasses){shader.uRadius.value[0]=this.get_blurX()*Math.pow(.5,blurPass>>1);shader.uRadius.value[1]=0}else{var scale=Math.pow(.5,blurPass-this.__horizontalPasses>>1);shader.uRadius.value[0]=0;shader.uRadius.value[1]=this.get_blurY()*scale}shader.uColor.value[0]=(this.get_color()>>16&255)/255;shader.uColor.value[1]=(this.get_color()>>8&255)/255;shader.uColor.value[2]=(this.get_color()&255)/255;shader.uColor.value[3]=this.get_alpha();return shader}if(this.__inner){if(this.__knockout||this.__hideObject){var shader1=openfl_filters_GlowFilter.__innerCombineKnockoutShader;shader1.sourceBitmap.input=sourceBitmapData;shader1.offset.value[0]=this.__offsetX;shader1.offset.value[1]=this.__offsetY;shader1.strength.value[0]=this.__strength;return shader1}var shader2=openfl_filters_GlowFilter.__innerCombineShader;shader2.sourceBitmap.input=sourceBitmapData;shader2.offset.value[0]=this.__offsetX;shader2.offset.value[1]=this.__offsetY;shader2.strength.value[0]=this.__strength;return shader2}else{if(this.__knockout){var shader3=openfl_filters_GlowFilter.__combineKnockoutShader;shader3.sourceBitmap.input=sourceBitmapData;shader3.offset.value[0]=this.__offsetX;shader3.offset.value[1]=this.__offsetY;shader3.strength.value[0]=this.__strength;return shader3}else if(this.__hideObject){var shader4=openfl_filters_DropShadowFilter.__hideShader;shader4.sourceBitmap.input=sourceBitmapData;shader4.offset.value[0]=this.__offsetX;shader4.offset.value[1]=this.__offsetY;shader4.strength.value[0]=this.__strength;return shader4}var shader5=openfl_filters_GlowFilter.__combineShader;shader5.sourceBitmap.input=sourceBitmapData;shader5.offset.value[0]=this.__offsetX;shader5.offset.value[1]=this.__offsetY;shader5.strength.value[0]=this.__strength;return shader5}},__updateSize:function(){this.__offsetX=this.__distance*Math.cos(this.__angle*Math.PI/180)|0;this.__offsetY=this.__distance*Math.sin(this.__angle*Math.PI/180)|0;this.__topExtension=Math.ceil((this.__offsetY<0?-this.__offsetY:0)+this.__blurY);this.__bottomExtension=Math.ceil((this.__offsetY>0?this.__offsetY:0)+this.__blurY);this.__leftExtension=Math.ceil((this.__offsetX<0?-this.__offsetX:0)+this.__blurX);this.__rightExtension=Math.ceil((this.__offsetX>0?this.__offsetX:0)+this.__blurX);this.__calculateNumShaderPasses()},__calculateNumShaderPasses:function(){this.__horizontalPasses=Math.round(this.__blurX*(this.__quality/4))+1;this.__verticalPasses=Math.round(this.__blurY*(this.__quality/4))+1;this.__numShaderPasses=this.__horizontalPasses+this.__verticalPasses+(this.__inner?2:1)},get_alpha:function(){return this.__alpha},get_blurX:function(){return this.__blurX},get_blurY:function(){return this.__blurY},get_color:function(){return this.__color},__class__:openfl_filters_DropShadowFilter,__properties__:{get_color:"get_color",get_blurY:"get_blurY",get_blurX:"get_blurX",get_alpha:"get_alpha"}});var openfl_filters__$GlowFilter_BlurAlphaShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform vec4 uColor;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void)\n\t\t{\n            vec4 texel = texture2D(openfl_Texture, vTexCoord);\n\n            vec3 contributions = vec3(0.00443, 0.05399, 0.24197);\n            vec3 top = vec3(\n                texture2D(openfl_Texture, vBlurCoords[0]).a,\n                texture2D(openfl_Texture, vBlurCoords[1]).a,\n                texture2D(openfl_Texture, vBlurCoords[2]).a\n            );\n            vec3 bottom = vec3(\n                texture2D(openfl_Texture, vBlurCoords[3]).a,\n                texture2D(openfl_Texture, vBlurCoords[4]).a,\n                texture2D(openfl_Texture, vBlurCoords[5]).a\n            );\n\n            float a = texel.a * 0.39894;\n\t\t\ta += dot(top, contributions.xyz);\n            a += dot(bottom, contributions.zyx);\n\n\t\t\tgl_FragColor = uColor * a;\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\n\t\tuniform vec2 uRadius;\n\t\tvarying vec2 vTexCoord;\n\t\tvarying vec2 vBlurCoords[6];\n\n\t\tvoid main(void) {\n\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\n\t\t\tvec3 offset = vec3(0.33, 0.66, 1.0);\n\t\t\tvec2 r = uRadius / openfl_TextureSize;\n\t\t\tvBlurCoords[0] = openfl_TextureCoord - r * offset.z;\n\t\t\tvBlurCoords[1] = openfl_TextureCoord - r * offset.y;\n\t\t\tvBlurCoords[2] = openfl_TextureCoord - r * offset.x;\n\t\t\tvBlurCoords[3] = openfl_TextureCoord + r * offset.x;\n\t\t\tvBlurCoords[4] = openfl_TextureCoord + r * offset.y;\n\t\t\tvBlurCoords[5] = openfl_TextureCoord + r * offset.z;\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.uRadius.value=[0,0];this.uColor.value=[0,0,0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.BlurAlphaShader"]=openfl_filters__$GlowFilter_BlurAlphaShader;openfl_filters__$GlowFilter_BlurAlphaShader.__name__="openfl.filters._GlowFilter.BlurAlphaShader";openfl_filters__$GlowFilter_BlurAlphaShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_BlurAlphaShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{uRadius:null,uColor:null,__class__:openfl_filters__$GlowFilter_BlurAlphaShader});var openfl_filters__$GlowFilter_CombineKnockoutShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tuniform float strength;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw) * strength;\n\n\t\t\tgl_FragColor = glow * (1.0 - src.a);\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.strength.value=[1];this.offset.value=[0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.CombineKnockoutShader"]=openfl_filters__$GlowFilter_CombineKnockoutShader;openfl_filters__$GlowFilter_CombineKnockoutShader.__name__="openfl.filters._GlowFilter.CombineKnockoutShader";openfl_filters__$GlowFilter_CombineKnockoutShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_CombineKnockoutShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{offset:null,sourceBitmap:null,strength:null,__class__:openfl_filters__$GlowFilter_CombineKnockoutShader});var openfl_filters__$GlowFilter_CombineShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tuniform float strength;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw) * strength;\n\n\t\t\tgl_FragColor = src * src.a + glow * (1.0 - src.a);\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.strength.value=[1];this.offset.value=[0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.CombineShader"]=openfl_filters__$GlowFilter_CombineShader;openfl_filters__$GlowFilter_CombineShader.__name__="openfl.filters._GlowFilter.CombineShader";openfl_filters__$GlowFilter_CombineShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_CombineShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{offset:null,sourceBitmap:null,strength:null,__class__:openfl_filters__$GlowFilter_CombineShader});var openfl_filters__$GlowFilter_InnerCombineKnockoutShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tuniform float strength;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw) * strength;\n\n\t\t\tgl_FragColor = glow * src.a;\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.offset.value=[0,0];this.strength.value=[1];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.InnerCombineKnockoutShader"]=openfl_filters__$GlowFilter_InnerCombineKnockoutShader;openfl_filters__$GlowFilter_InnerCombineKnockoutShader.__name__="openfl.filters._GlowFilter.InnerCombineKnockoutShader";openfl_filters__$GlowFilter_InnerCombineKnockoutShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_InnerCombineKnockoutShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{offset:null,sourceBitmap:null,strength:null,__class__:openfl_filters__$GlowFilter_InnerCombineKnockoutShader});var openfl_filters__$GlowFilter_InnerCombineShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tuniform sampler2D sourceBitmap;\n\t\tuniform float strength;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tvec4 src = texture2D(sourceBitmap, textureCoords.xy);\n\t\t\tvec4 glow = texture2D(openfl_Texture, textureCoords.zw) * strength;\n\n\t\t\tgl_FragColor = mix(src, glow, glow.a) * src.a;\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="attribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tuniform vec2 openfl_TextureSize;\n\t\tuniform vec2 offset;\n\t\tvarying vec4 textureCoords;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\ttextureCoords = vec4(openfl_TextureCoord, openfl_TextureCoord - offset / openfl_TextureSize);\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.strength.value=[1];this.offset.value=[0,0];this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.InnerCombineShader"]=openfl_filters__$GlowFilter_InnerCombineShader;openfl_filters__$GlowFilter_InnerCombineShader.__name__="openfl.filters._GlowFilter.InnerCombineShader";openfl_filters__$GlowFilter_InnerCombineShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_InnerCombineShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{offset:null,sourceBitmap:null,strength:null,__class__:openfl_filters__$GlowFilter_InnerCombineShader});var openfl_filters__$GlowFilter_InvertAlphaShader=function(){if(this.__glFragmentSource==null){this.__glFragmentSource="\n\t\tuniform sampler2D openfl_Texture;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tvec4 texel = texture2D(openfl_Texture, vTexCoord);\n\t\t\tgl_FragColor = vec4(texel.rgb, 1.0 - texel.a);\n\t\t}\n\t"}if(this.__glVertexSource==null){this.__glVertexSource="\n\t\tattribute vec4 openfl_Position;\n\t\tattribute vec2 openfl_TextureCoord;\n\t\tuniform mat4 openfl_Matrix;\n\t\tvarying vec2 vTexCoord;\n\n\t\tvoid main(void) {\n\t\t\tgl_Position = openfl_Matrix * openfl_Position;\n\t\t\tvTexCoord = openfl_TextureCoord;\n\t\t}\n\t"}openfl_filters_BitmapFilterShader.call(this);this.__isGenerated=true;this.__initGL()};$hxClasses["openfl.filters._GlowFilter.InvertAlphaShader"]=openfl_filters__$GlowFilter_InvertAlphaShader;openfl_filters__$GlowFilter_InvertAlphaShader.__name__="openfl.filters._GlowFilter.InvertAlphaShader";openfl_filters__$GlowFilter_InvertAlphaShader.__super__=openfl_filters_BitmapFilterShader;openfl_filters__$GlowFilter_InvertAlphaShader.prototype=$extend(openfl_filters_BitmapFilterShader.prototype,{__class__:openfl_filters__$GlowFilter_InvertAlphaShader});var openfl_filters_GlowFilter=function(color,alpha,blurX,blurY,strength,quality,inner,knockout){if(knockout==null){knockout=false}if(inner==null){inner=false}if(quality==null){quality=1}if(strength==null){strength=2}if(blurY==null){blurY=6}if(blurX==null){blurX=6}if(alpha==null){alpha=1}if(color==null){color=16711680}openfl_filters_BitmapFilter.call(this);this.__color=color;this.__alpha=alpha;this.__blurX=blurX;this.__blurY=blurY;this.__strength=strength;this.__inner=inner;this.__knockout=knockout;this.__quality=quality;this.__updateSize();this.__needSecondBitmapData=true;this.__preserveObject=true;this.__renderDirty=true};$hxClasses["openfl.filters.GlowFilter"]=openfl_filters_GlowFilter;openfl_filters_GlowFilter.__name__="openfl.filters.GlowFilter";openfl_filters_GlowFilter.__super__=openfl_filters_BitmapFilter;openfl_filters_GlowFilter.prototype=$extend(openfl_filters_BitmapFilter.prototype,{__alpha:null,__blurX:null,__blurY:null,__color:null,__horizontalPasses:null,__inner:null,__knockout:null,__quality:null,__strength:null,__verticalPasses:null,__applyFilter:function(bitmapData,sourceBitmapData,sourceRect,destPoint){var r=this.__color>>16&255;var g=this.__color>>8&255;var b=this.__color&255;if(this.__inner||this.__knockout){sourceBitmapData.image.colorTransform(sourceBitmapData.image.get_rect(),new openfl_geom_ColorTransform(1,1,1,0,0,0,0,-255).__toLimeColorMatrix());sourceBitmapData.image.dirty=true;sourceBitmapData.image.version++;bitmapData=sourceBitmapData.clone();return bitmapData}var finalImage=lime__$internal_graphics_ImageDataUtil.gaussianBlur(bitmapData.image,sourceBitmapData.image,sourceRect.__toLimeRectangle(),destPoint.__toLimeVector2(),this.__blurX,this.__blurY,this.__quality,this.__strength);finalImage.colorTransform(finalImage.get_rect(),new openfl_geom_ColorTransform(0,0,0,this.__alpha,r,g,b,0).__toLimeColorMatrix());if(finalImage==bitmapData.image){return bitmapData}return sourceBitmapData},__initShader:function(renderer,pass,sourceBitmapData){if(this.__inner&&pass==0){return openfl_filters_GlowFilter.__invertAlphaShader}var blurPass=pass-(this.__inner?1:0);if(blurPass<this.__horizontalPasses+this.__verticalPasses){var shader=openfl_filters_GlowFilter.__blurAlphaShader;if(blurPass<this.__horizontalPasses){shader.uRadius.value[0]=this.get_blurX()*Math.pow(.5,blurPass>>1);shader.uRadius.value[1]=0}else{var scale=Math.pow(.5,blurPass-this.__horizontalPasses>>1);shader.uRadius.value[0]=0;shader.uRadius.value[1]=this.get_blurY()*scale}shader.uColor.value[0]=(this.get_color()>>16&255)/255;shader.uColor.value[1]=(this.get_color()>>8&255)/255;shader.uColor.value[2]=(this.get_color()&255)/255;shader.uColor.value[3]=this.get_alpha();return shader}if(this.__inner){if(this.__knockout){var shader1=openfl_filters_GlowFilter.__innerCombineKnockoutShader;shader1.sourceBitmap.input=sourceBitmapData;shader1.strength.value[0]=this.__strength;return shader1}var shader2=openfl_filters_GlowFilter.__innerCombineShader;shader2.sourceBitmap.input=sourceBitmapData;shader2.strength.value[0]=this.__strength;return shader2}else{if(this.__knockout){var shader3=openfl_filters_GlowFilter.__combineKnockoutShader;shader3.sourceBitmap.input=sourceBitmapData;shader3.strength.value[0]=this.__strength;return shader3}var shader4=openfl_filters_GlowFilter.__combineShader;shader4.sourceBitmap.input=sourceBitmapData;shader4.strength.value[0]=this.__strength;return shader4}},__updateSize:function(){this.__leftExtension=this.__blurX>0?Math.ceil(this.__blurX*1.5):0;this.__rightExtension=this.__leftExtension;this.__topExtension=this.__blurY>0?Math.ceil(this.__blurY*1.5):0;this.__bottomExtension=this.__topExtension;this.__calculateNumShaderPasses()},__calculateNumShaderPasses:function(){this.__horizontalPasses=this.__blurX<=0?0:Math.round(this.__blurX*(this.__quality/4))+1;this.__verticalPasses=this.__blurY<=0?0:Math.round(this.__blurY*(this.__quality/4))+1;this.__numShaderPasses=this.__horizontalPasses+this.__verticalPasses+(this.__inner?2:1)},get_alpha:function(){return this.__alpha},get_blurX:function(){return this.__blurX},get_blurY:function(){return this.__blurY},get_color:function(){return this.__color},__class__:openfl_filters_GlowFilter,__properties__:{get_color:"get_color",get_blurY:"get_blurY",get_blurX:"get_blurX",get_alpha:"get_alpha"}});var openfl_geom_Matrix3D=function(v){if(v!=null&&v.get_length()==16){this.rawData=v.concat(null)}else{this.rawData=openfl__$Vector_Vector_$Impl_$.toFloatVector(null,null,null,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}};$hxClasses["openfl.geom.Matrix3D"]=openfl_geom_Matrix3D;openfl_geom_Matrix3D.__name__="openfl.geom.Matrix3D";openfl_geom_Matrix3D.prototype={rawData:null,append:function(lhs){var m111=this.rawData.get(0);var m121=this.rawData.get(4);var m131=this.rawData.get(8);var m141=this.rawData.get(12);var m112=this.rawData.get(1);var m122=this.rawData.get(5);var m132=this.rawData.get(9);var m142=this.rawData.get(13);var m113=this.rawData.get(2);var m123=this.rawData.get(6);var m133=this.rawData.get(10);var m143=this.rawData.get(14);var m114=this.rawData.get(3);var m124=this.rawData.get(7);var m134=this.rawData.get(11);var m144=this.rawData.get(15);var m211=lhs.rawData.get(0);var m221=lhs.rawData.get(4);var m231=lhs.rawData.get(8);var m241=lhs.rawData.get(12);var m212=lhs.rawData.get(1);var m222=lhs.rawData.get(5);var m232=lhs.rawData.get(9);var m242=lhs.rawData.get(13);var m213=lhs.rawData.get(2);var m223=lhs.rawData.get(6);var m233=lhs.rawData.get(10);var m243=lhs.rawData.get(14);var m214=lhs.rawData.get(3);var m224=lhs.rawData.get(7);var m234=lhs.rawData.get(11);var m244=lhs.rawData.get(15);this.rawData.set(0,m111*m211+m112*m221+m113*m231+m114*m241);this.rawData.set(1,m111*m212+m112*m222+m113*m232+m114*m242);this.rawData.set(2,m111*m213+m112*m223+m113*m233+m114*m243);this.rawData.set(3,m111*m214+m112*m224+m113*m234+m114*m244);this.rawData.set(4,m121*m211+m122*m221+m123*m231+m124*m241);this.rawData.set(5,m121*m212+m122*m222+m123*m232+m124*m242);this.rawData.set(6,m121*m213+m122*m223+m123*m233+m124*m243);this.rawData.set(7,m121*m214+m122*m224+m123*m234+m124*m244);this.rawData.set(8,m131*m211+m132*m221+m133*m231+m134*m241);this.rawData.set(9,m131*m212+m132*m222+m133*m232+m134*m242);this.rawData.set(10,m131*m213+m132*m223+m133*m233+m134*m243);this.rawData.set(11,m131*m214+m132*m224+m133*m234+m134*m244);this.rawData.set(12,m141*m211+m142*m221+m143*m231+m144*m241);this.rawData.set(13,m141*m212+m142*m222+m143*m232+m144*m242);this.rawData.set(14,m141*m213+m142*m223+m143*m233+m144*m243);this.rawData.set(15,m141*m214+m142*m224+m143*m234+m144*m244)},appendTranslation:function(x,y,z){var _g=this.rawData;_g.set(12,_g.get(12)+x);var _g1=this.rawData;_g1.set(13,_g1.get(13)+y);var _g2=this.rawData;_g2.set(14,_g2.get(14)+z)},copyRawDataFrom:function(vector,index,transpose){if(transpose==null){transpose=false}if(index==null){index=0}if(transpose){this.transpose()}var _g=0;var _g1=vector.get_length()-index;while(_g<_g1){var i=_g++;this.rawData.set(i,vector.get(i+index))}if(transpose){this.transpose()}},identity:function(){this.rawData=openfl__$Vector_Vector_$Impl_$.toFloatVector(null,null,null,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])},transpose:function(){var oRawData=this.rawData.copy();this.rawData.set(1,oRawData.get(4));this.rawData.set(2,oRawData.get(8));this.rawData.set(3,oRawData.get(12));this.rawData.set(4,oRawData.get(1));this.rawData.set(6,oRawData.get(9));this.rawData.set(7,oRawData.get(13));this.rawData.set(8,oRawData.get(2));this.rawData.set(9,oRawData.get(6));this.rawData.set(11,oRawData.get(14));this.rawData.set(12,oRawData.get(3));this.rawData.set(13,oRawData.get(7));this.rawData.set(14,oRawData.get(11))},__class__:openfl_geom_Matrix3D};var openfl_geom_Transform=function(displayObject){this.__colorTransform=new openfl_geom_ColorTransform;this.concatenatedColorTransform=new openfl_geom_ColorTransform;this.pixelBounds=new openfl_geom_Rectangle;this.__displayObject=displayObject;this.__hasMatrix=true};$hxClasses["openfl.geom.Transform"]=openfl_geom_Transform;openfl_geom_Transform.__name__="openfl.geom.Transform";openfl_geom_Transform.prototype={concatenatedColorTransform:null,pixelBounds:null,__colorTransform:null,__displayObject:null,__hasMatrix:null,__hasMatrix3D:null,get_colorTransform:function(){return this.__colorTransform},set_colorTransform:function(value){if(!this.__colorTransform.__equals(value,false)){this.__colorTransform.__copyFrom(value);if(value!=null){this.__displayObject.set_alpha(value.alphaMultiplier)}var _this=this.__displayObject;if(!_this.__renderDirty){_this.__renderDirty=true;_this.__setParentRenderDirty()}}return this.__colorTransform},get_matrix:function(){if(this.__hasMatrix){return this.__displayObject.__transform.clone()}return null},set_matrix:function(value){if(value==null){this.__hasMatrix=false;return null}this.__hasMatrix=true;this.__hasMatrix3D=false;if(this.__displayObject!=null){this.__setTransform(value.a,value.b,value.c,value.d,value.tx,value.ty)}return value},__setTransform:function(a,b,c,d,tx,ty){if(this.__displayObject!=null){var scaleX=0;var scaleY=0;if(b==0){scaleX=a}else{scaleX=Math.sqrt(a*a+b*b)}if(c==0){scaleY=d}else{scaleY=Math.sqrt(c*c+d*d)}this.__displayObject.__scaleX=scaleX;this.__displayObject.__scaleY=scaleY;var rotation=180/Math.PI*Math.atan2(d,c)-90;if(rotation!=this.__displayObject.__rotation){this.__displayObject.__rotation=rotation;var radians=rotation*(Math.PI/180);this.__displayObject.__rotationSine=Math.sin(radians);this.__displayObject.__rotationCosine=Math.cos(radians)}this.__displayObject.__transform.a=a;this.__displayObject.__transform.b=b;this.__displayObject.__transform.c=c;this.__displayObject.__transform.d=d;this.__displayObject.__transform.tx=tx;this.__displayObject.__transform.ty=ty;this.__displayObject.__setTransformDirty()}},__class__:openfl_geom_Transform,__properties__:{set_matrix:"set_matrix",get_matrix:"get_matrix",set_colorTransform:"set_colorTransform",get_colorTransform:"get_colorTransform"}};var openfl_geom_Vector3D=function(){};$hxClasses["openfl.geom.Vector3D"]=openfl_geom_Vector3D;openfl_geom_Vector3D.__name__="openfl.geom.Vector3D";openfl_geom_Vector3D.prototype={__class__:openfl_geom_Vector3D};var openfl_media_ID3Info=function(){};$hxClasses["openfl.media.ID3Info"]=openfl_media_ID3Info;openfl_media_ID3Info.__name__="openfl.media.ID3Info";var openfl_media_Sound=function(stream,context){openfl_events_EventDispatcher.call(this,this);this.bytesLoaded=0;this.bytesTotal=0;this.isBuffering=false;this.url=null;if(stream!=null){this.load(stream,context)}};$hxClasses["openfl.media.Sound"]=openfl_media_Sound;openfl_media_Sound.__name__="openfl.media.Sound";openfl_media_Sound.fromAudioBuffer=function(buffer){var sound=new openfl_media_Sound;sound.__buffer=buffer;return sound};openfl_media_Sound.__super__=openfl_events_EventDispatcher;openfl_media_Sound.prototype=$extend(openfl_events_EventDispatcher.prototype,{bytesLoaded:null,bytesTotal:null,isBuffering:null,url:null,__buffer:null,load:function(stream,context){var _gthis=this;this.url=stream.url;var defaultLibrary=lime_utils_Assets.getLibrary("default");var tmp;if(defaultLibrary!=null){var key=this.url;var _this=defaultLibrary.cachedAudioBuffers;tmp=__map_reserved[key]!=null?_this.existsReserved(key):_this.h.hasOwnProperty(key)}else{tmp=false}if(tmp){var key1=this.url;var _this1=defaultLibrary.cachedAudioBuffers;this.AudioBuffer_onURLLoad(__map_reserved[key1]!=null?_this1.getReserved(key1):_this1.h[key1])}else{lime_media_AudioBuffer.loadFromFile(this.url).onComplete($bind(this,this.AudioBuffer_onURLLoad)).onError(function(_){_gthis.AudioBuffer_onURLLoad(null)})}},play:function(startTime,loops,sndTransform){if(loops==null){loops=0}if(startTime==null){startTime=0}if(this.__buffer==null||openfl_media_SoundMixer.__soundChannels.length>=32){return null}if(sndTransform==null){sndTransform=new openfl_media_SoundTransform}else{sndTransform=sndTransform.clone()}var pan=openfl_media_SoundMixer.__soundTransform.pan+sndTransform.pan;if(pan>1){pan=1}if(pan<-1){pan=-1}var volume=openfl_media_SoundMixer.__soundTransform.volume*sndTransform.volume;var source=new lime_media_AudioSource(this.__buffer);source.offset=startTime|0;if(loops>1){source.set_loops(loops-1)}source.set_gain(volume);var position=source.get_position();position.x=pan;position.z=-1*Math.sqrt(1-Math.pow(pan,2));source.set_position(position);return new openfl_media_SoundChannel(source,sndTransform)},AudioBuffer_onURLLoad:function(buffer){if(buffer==null){this.dispatchEvent(new openfl_events_IOErrorEvent("ioError"))}else{this.__buffer=buffer;this.dispatchEvent(new openfl_events_Event("complete"))}},__class__:openfl_media_Sound});var openfl_media_SoundChannel=function(source,soundTransform){openfl_events_EventDispatcher.call(this,this);this.leftPeak=1;this.rightPeak=1;if(soundTransform!=null){this.__soundTransform=soundTransform}else{this.__soundTransform=new openfl_media_SoundTransform}if(source!=null){this.__source=source;this.__source.onComplete.add($bind(this,this.source_onComplete));this.__isValid=true;this.__source.play()}openfl_media_SoundMixer.__registerSoundChannel(this)};$hxClasses["openfl.media.SoundChannel"]=openfl_media_SoundChannel;openfl_media_SoundChannel.__name__="openfl.media.SoundChannel";openfl_media_SoundChannel.__super__=openfl_events_EventDispatcher;openfl_media_SoundChannel.prototype=$extend(openfl_events_EventDispatcher.prototype,{leftPeak:null,rightPeak:null,__isValid:null,__soundTransform:null,__source:null,stop:function(){openfl_media_SoundMixer.__unregisterSoundChannel(this);if(!this.__isValid){return}this.__source.stop();this.__dispose()},__dispose:function(){if(!this.__isValid){return}this.__source.onComplete.remove($bind(this,this.source_onComplete));this.__source.dispose();this.__source=null;this.__isValid=false},__updateTransform:function(){this.set_soundTransform(this.get_soundTransform())},get_position:function(){if(!this.__isValid){return 0}return this.__source.get_currentTime()+this.__source.offset},set_position:function(value){if(!this.__isValid){return 0}this.__source.set_currentTime((value|0)-this.__source.offset);return value},get_soundTransform:function(){return this.__soundTransform.clone()},set_soundTransform:function(value){if(value!=null){this.__soundTransform.pan=value.pan;this.__soundTransform.volume=value.volume;var pan=openfl_media_SoundMixer.__soundTransform.pan+this.__soundTransform.pan;if(pan<-1){pan=-1}if(pan>1){pan=1}if(this.__isValid){this.__source.set_gain(openfl_media_SoundMixer.__soundTransform.volume*this.__soundTransform.volume);var position=this.__source.get_position();position.x=pan;position.z=-1*Math.sqrt(1-Math.pow(pan,2));this.__source.set_position(position);return value}}return value},source_onComplete:function(){openfl_media_SoundMixer.__unregisterSoundChannel(this);this.__dispose();this.dispatchEvent(new openfl_events_Event("soundComplete"))},__class__:openfl_media_SoundChannel,__properties__:{set_soundTransform:"set_soundTransform",get_soundTransform:"get_soundTransform",set_position:"set_position",get_position:"get_position"}});var openfl_media_SoundLoaderContext=function(){};$hxClasses["openfl.media.SoundLoaderContext"]=openfl_media_SoundLoaderContext;openfl_media_SoundLoaderContext.__name__="openfl.media.SoundLoaderContext";var openfl_media_SoundTransform=function(vol,panning){if(panning==null){panning=0}if(vol==null){vol=1}this.volume=vol;this.pan=panning;this.leftToLeft=0;this.leftToRight=0;this.rightToLeft=0;this.rightToRight=0};$hxClasses["openfl.media.SoundTransform"]=openfl_media_SoundTransform;openfl_media_SoundTransform.__name__="openfl.media.SoundTransform";openfl_media_SoundTransform.prototype={leftToLeft:null,leftToRight:null,pan:null,rightToLeft:null,rightToRight:null,volume:null,clone:function(){return new openfl_media_SoundTransform(this.volume,this.pan)},__class__:openfl_media_SoundTransform};var openfl_media_SoundMixer=function(){};$hxClasses["openfl.media.SoundMixer"]=openfl_media_SoundMixer;openfl_media_SoundMixer.__name__="openfl.media.SoundMixer";openfl_media_SoundMixer.__properties__={set_soundTransform:"set_soundTransform"};openfl_media_SoundMixer.__registerSoundChannel=function(soundChannel){openfl_media_SoundMixer.__soundChannels.push(soundChannel)};openfl_media_SoundMixer.__unregisterSoundChannel=function(soundChannel){HxOverrides.remove(openfl_media_SoundMixer.__soundChannels,soundChannel)};openfl_media_SoundMixer.set_soundTransform=function(value){openfl_media_SoundMixer.__soundTransform=value.clone();var _g=0;var _g1=openfl_media_SoundMixer.__soundChannels;while(_g<_g1.length)_g1[_g++].__updateTransform();return value};var openfl_media_Video=function(width,height){if(height==null){height=240}if(width==null){width=320}openfl_display_DisplayObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.VIDEO;this.__width=width;this.__height=height;this.__textureTime=-1;this.smoothing=false;this.deblocking=0};$hxClasses["openfl.media.Video"]=openfl_media_Video;openfl_media_Video.__name__="openfl.media.Video";openfl_media_Video.__super__=openfl_display_DisplayObject;openfl_media_Video.prototype=$extend(openfl_display_DisplayObject.prototype,{deblocking:null,smoothing:null,__active:null,__dirty:null,__height:null,__indexBuffer:null,__indexBufferContext:null,__indexBufferData:null,__stream:null,__texture:null,__textureTime:null,__vertexBuffer:null,__vertexBufferContext:null,__vertexBufferData:null,__width:null,__enterFrame:function(deltaTime){if(this.__renderable&&this.__stream!=null){if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}},__getBounds:function(rect,matrix){var bounds=openfl_geom_Rectangle.__pool.get();bounds.setTo(0,0,this.__width,this.__height);bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)},__getIndexBuffer:function(context){if(this.__indexBuffer==null||this.__indexBufferContext!=context.__context){this.__indexBufferData=new Uint16Array(6);this.__indexBufferData[0]=0;this.__indexBufferData[1]=1;this.__indexBufferData[2]=2;this.__indexBufferData[3]=2;this.__indexBufferData[4]=1;this.__indexBufferData[5]=3;this.__indexBufferContext=context.__context;this.__indexBuffer=context.createIndexBuffer(6);this.__indexBuffer.uploadFromTypedArray(this.__indexBufferData)}return this.__indexBuffer},__getTexture:function(context){if(this.__stream==null||this.__stream.__video==null){return null}var gl=context.__context.webgl;var internalFormat=gl.RGBA;var format=gl.RGBA;if(!this.__stream.__closed&&this.__stream.__video.currentTime!=this.__textureTime){if(this.__texture==null){this.__texture=context.createRectangleTexture(this.__stream.__video.videoWidth,this.__stream.__video.videoHeight,1,false)}context.__bindGLTexture2D(this.__texture.__textureID);lime_graphics__$WebGLRenderContext_WebGLRenderContext_$Impl_$.texImage2D(gl,gl.TEXTURE_2D,0,internalFormat,format,gl.UNSIGNED_BYTE,this.__stream.__video);this.__textureTime=this.__stream.__video.currentTime}return this.__texture},__getVertexBuffer:function(context){if(this.__vertexBuffer==null||this.__vertexBufferContext!=context.__context){this.__vertexBufferData=new Float32Array(20);this.__vertexBufferData[0]=this.get_width();this.__vertexBufferData[1]=this.get_height();this.__vertexBufferData[3]=1;this.__vertexBufferData[4]=1;this.__vertexBufferData[6]=this.get_height();this.__vertexBufferData[9]=1;this.__vertexBufferData[10]=this.get_width();this.__vertexBufferData[13]=1;this.__vertexBufferContext=context.__context;this.__vertexBuffer=context.createVertexBuffer(3,5);this.__vertexBuffer.uploadFromTypedArray(this.__vertexBufferData)}return this.__vertexBuffer},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}this.__getRenderTransform();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var px=norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx));var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;var py=norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x));if(px>0&&py>0&&px<=this.__width&&py<=this.__height){if(stack!=null&&!interactiveOnly){stack.push(hitObject)}return true}return false},__hitTestMask:function(x,y){var point=openfl_geom_Point.__pool.get();point.setTo(x,y);this.__globalToLocal(point,point);var hit=point.x>0&&point.y>0&&point.x<=this.__width&&point.y<=this.__height;openfl_geom_Point.__pool.release(point);return hit},get_height:function(){return this.__height*this.get_scaleY()},set_height:function(value){if(this.get_scaleY()!=1||value!=this.__height){this.__setTransformDirty();this.__dirty=true}this.set_scaleY(1);return this.__height=value},get_width:function(){return this.__width*this.__scaleX},set_width:function(value){if(this.__scaleX!=1||this.__width!=value){this.__setTransformDirty();this.__dirty=true}this.set_scaleX(1);return this.__width=value},__class__:openfl_media_Video});var openfl_net_NetConnection=function(){openfl_events_EventDispatcher.call(this)};$hxClasses["openfl.net.NetConnection"]=openfl_net_NetConnection;openfl_net_NetConnection.__name__="openfl.net.NetConnection";openfl_net_NetConnection.__super__=openfl_events_EventDispatcher;openfl_net_NetConnection.prototype=$extend(openfl_events_EventDispatcher.prototype,{__class__:openfl_net_NetConnection});var openfl_net_NetStream=function(connection,peerID){openfl_events_EventDispatcher.call(this);this.__connection=connection;this.__video=window.document.createElement("video");this.__video.setAttribute("playsinline","");this.__video.setAttribute("webkit-playsinline","");this.__video.setAttribute("crossorigin","anonymous");this.__video.addEventListener("error",$bind(this,this.video_onError),false);this.__video.addEventListener("waiting",$bind(this,this.video_onWaiting),false);this.__video.addEventListener("ended",$bind(this,this.video_onEnd),false);this.__video.addEventListener("pause",$bind(this,this.video_onPause),false);this.__video.addEventListener("seeking",$bind(this,this.video_onSeeking),false);this.__video.addEventListener("playing",$bind(this,this.video_onPlaying),false);this.__video.addEventListener("timeupdate",$bind(this,this.video_onTimeUpdate),false);this.__video.addEventListener("loadstart",$bind(this,this.video_onLoadStart),false);this.__video.addEventListener("stalled",$bind(this,this.video_onStalled),false);this.__video.addEventListener("durationchanged",$bind(this,this.video_onDurationChanged),false);this.__video.addEventListener("canplay",$bind(this,this.video_onCanPlay),false);this.__video.addEventListener("canplaythrough",$bind(this,this.video_onCanPlayThrough),false);this.__video.addEventListener("loadedmetadata",$bind(this,this.video_onLoadMetaData),false)};$hxClasses["openfl.net.NetStream"]=openfl_net_NetStream;openfl_net_NetStream.__name__="openfl.net.NetStream";openfl_net_NetStream.__super__=openfl_events_EventDispatcher;openfl_net_NetStream.prototype=$extend(openfl_events_EventDispatcher.prototype,{client:null,time:null,__closed:null,__connection:null,__seeking:null,__video:null,__playStatus:function(code){if(this.__video==null){return}if(this.client!=null){try{var handler=this.client.onPlayStatus;handler({code:code,duration:this.__video.duration,position:this.__video.currentTime,speed:this.__video.playbackRate,start:this.__video.startTime})}catch(e){haxe_CallStack.lastException=e;var e1=e instanceof js__$Boot_HaxeError?e.val:e}}},video_onCanPlay:function(event){this.__playStatus("NetStream.Play.canplay")},video_onCanPlayThrough:function(event){this.__playStatus("NetStream.Play.canplaythrough")},video_onDurationChanged:function(event){this.__playStatus("NetStream.Play.durationchanged")},video_onEnd:function(event){this.__connection.dispatchEvent(new openfl_events_NetStatusEvent("netStatus",false,false,{code:"NetStream.Play.Stop"}));this.__connection.dispatchEvent(new openfl_events_NetStatusEvent("netStatus",false,false,{code:"NetStream.Play.Complete"}));this.__playStatus("NetStream.Play.Complete")},video_onError:function(event){this.__connection.dispatchEvent(new openfl_events_NetStatusEvent("netStatus",false,false,{code:"NetStream.Play.Stop"}));this.__playStatus("NetStream.Play.error")},video_onLoadMetaData:function(event){if(this.__video==null){return}if(this.client!=null){try{this.client.onMetaData({width:this.__video.videoWidth,height:this.__video.videoHeight,duration:this.__video.duration})}catch(e){haxe_CallStack.lastException=e}}},video_onLoadStart:function(event){this.__playStatus("NetStream.Play.loadstart")},video_onPause:function(event){this.__playStatus("NetStream.Play.pause")},video_onPlaying:function(event){this.__connection.dispatchEvent(new openfl_events_NetStatusEvent("netStatus",false,false,{code:"NetStream.Play.Start"}));this.__playStatus("NetStream.Play.playing")},video_onSeeking:function(event){this.__playStatus("NetStream.Play.seeking");this.__connection.dispatchEvent(new openfl_events_NetStatusEvent("netStatus",false,false,{code:"NetStream.Seek.Complete"}))},video_onStalled:function(event){this.__playStatus("NetStream.Play.stalled")},video_onTimeUpdate:function(event){if(this.__video==null){return}this.time=this.__video.currentTime;this.__playStatus("NetStream.Play.timeupdate")},video_onWaiting:function(event){this.__playStatus("NetStream.Play.waiting")},get___seeking:function(){if(!this.__seeking){return this.__video.seeking}else{return true}},set___seeking:function(value){return this.__seeking=value},__class__:openfl_net_NetStream,__properties__:{set___seeking:"set___seeking",get___seeking:"get___seeking"}});var openfl_net_SharedObject=function(){openfl_events_EventDispatcher.call(this);this.client=this;this.objectEncoding=openfl_net_SharedObject.defaultObjectEncoding};$hxClasses["openfl.net.SharedObject"]=openfl_net_SharedObject;openfl_net_SharedObject.__name__="openfl.net.SharedObject";openfl_net_SharedObject.getLocal=function(name,localPath,secure){if(secure==null){secure=false}var illegalValues=[" ","~","%","&","\\",";",":",'"',"'",",","<",">","?","#"];var allowed=true;if(name==null||name==""){allowed=false}else{var _g=0;while(_g<illegalValues.length)if(name.indexOf(illegalValues[_g++])>-1){allowed=false;break}}if(!allowed){throw new js__$Boot_HaxeError(new openfl_errors_Error("Error #2134: Cannot create SharedObject."))}if(openfl_net_SharedObject.__sharedObjects==null){openfl_net_SharedObject.__sharedObjects=new haxe_ds_StringMap;if(lime_app_Application.current!=null){lime_app_Application.current.onExit.add(openfl_net_SharedObject.application_onExit)}}var id=localPath+"/"+name;var _this=openfl_net_SharedObject.__sharedObjects;if(!(__map_reserved[id]!=null?_this.existsReserved(id):_this.h.hasOwnProperty(id))){var encodedData=null;try{var storage=js_Browser.getLocalStorage();if(localPath==null){if(storage!=null){encodedData=storage.getItem(window.location.href+":"+name);storage.removeItem(window.location.href+":"+name)}localPath=window.location.pathname}if(storage!=null&&encodedData==null){encodedData=storage.getItem(localPath+":"+name)}}catch(e){haxe_CallStack.lastException=e}var sharedObject=new openfl_net_SharedObject;sharedObject.data={};sharedObject.__localPath=localPath;sharedObject.__name=name;if(encodedData!=null&&encodedData!=""){try{var unserializer=new haxe_Unserializer(encodedData);unserializer.setResolver({resolveEnum:Type.resolveEnum,resolveClass:openfl_net_SharedObject.__resolveClass});sharedObject.data=unserializer.unserialize()}catch(e1){haxe_CallStack.lastException=e1}}var _this1=openfl_net_SharedObject.__sharedObjects;if(__map_reserved[id]!=null){_this1.setReserved(id,sharedObject)}else{_this1.h[id]=sharedObject}}var _this2=openfl_net_SharedObject.__sharedObjects;if(__map_reserved[id]!=null){return _this2.getReserved(id)}else{return _this2.h[id]}};openfl_net_SharedObject.__resolveClass=function(name){if(name!=null){if(StringTools.startsWith(name,"neash.")){name=StringTools.replace(name,"neash.","openfl.")}if(StringTools.startsWith(name,"native.")){name=StringTools.replace(name,"native.","openfl.")}if(StringTools.startsWith(name,"flash.")){name=StringTools.replace(name,"flash.","openfl.")}if(StringTools.startsWith(name,"openfl._v2.")){name=StringTools.replace(name,"openfl._v2.","openfl.")}if(StringTools.startsWith(name,"openfl._legacy.")){name=StringTools.replace(name,"openfl._legacy.","openfl.")}return $hxClasses[name]}return null};openfl_net_SharedObject.application_onExit=function(_){var _this=openfl_net_SharedObject.__sharedObjects;var sharedObject=new haxe_ds__$StringMap_StringMapIterator(_this,_this.arrayKeys());while(sharedObject.hasNext())sharedObject.next().flush()};openfl_net_SharedObject.__super__=openfl_events_EventDispatcher;openfl_net_SharedObject.prototype=$extend(openfl_events_EventDispatcher.prototype,{client:null,data:null,objectEncoding:null,__localPath:null,__name:null,clear:function(){this.data={};try{var storage=js_Browser.getLocalStorage();if(storage!=null){storage.removeItem(this.__localPath+":"+this.__name)}}catch(e){haxe_CallStack.lastException=e}},flush:function(minDiskSpace){if(minDiskSpace==null){minDiskSpace=0}if(Reflect.fields(this.data).length==0){return 0}var encodedData=haxe_Serializer.run(this.data);try{var storage=js_Browser.getLocalStorage();if(storage!=null){storage.removeItem(this.__localPath+":"+this.__name);storage.setItem(this.__localPath+":"+this.__name,encodedData)}}catch(e){haxe_CallStack.lastException=e;return 1}return 0},__class__:openfl_net_SharedObject});var openfl_net_URLLoader=function(request){openfl_events_EventDispatcher.call(this);this.bytesLoaded=0;this.bytesTotal=0;this.dataFormat=1;if(request!=null){this.load(request)}};$hxClasses["openfl.net.URLLoader"]=openfl_net_URLLoader;openfl_net_URLLoader.__name__="openfl.net.URLLoader";openfl_net_URLLoader.__super__=openfl_events_EventDispatcher;openfl_net_URLLoader.prototype=$extend(openfl_events_EventDispatcher.prototype,{bytesLoaded:null,bytesTotal:null,data:null,dataFormat:null,__httpRequest:null,load:function(request){var _gthis=this;if(this.dataFormat==0){var httpRequest=new lime_net__$HTTPRequest_$openfl_$utils_$ByteArray;this.__prepareRequest(httpRequest,request);httpRequest.load().onProgress($bind(this,this.httpRequest_onProgress)).onError($bind(this,this.httpRequest_onError)).onComplete(function(data){_gthis.__dispatchStatus();_gthis.data=data;_gthis.dispatchEvent(new openfl_events_Event("complete"))})}else{var httpRequest1=new lime_net__$HTTPRequest_$String;this.__prepareRequest(httpRequest1,request);httpRequest1.load().onProgress($bind(this,this.httpRequest_onProgress)).onError($bind(this,this.httpRequest_onError)).onComplete(function(data1){_gthis.__dispatchStatus();_gthis.data=data1;_gthis.dispatchEvent(new openfl_events_Event("complete"))})}},__dispatchStatus:function(){var event=new openfl_events_HTTPStatusEvent("httpStatus",false,false,this.__httpRequest.responseStatus);event.responseURL=this.__httpRequest.uri;var headers=[];if(this.__httpRequest.enableResponseHeaders&&this.__httpRequest.responseHeaders!=null){var _g=0;var _g1=this.__httpRequest.responseHeaders;while(_g<_g1.length){var header=_g1[_g];++_g;headers.push(new openfl_net_URLRequestHeader(header.name,header.value))}}event.responseHeaders=headers;this.dispatchEvent(event)},__prepareRequest:function(httpRequest,request){this.__httpRequest=httpRequest;this.__httpRequest.uri=request.url;this.__httpRequest.method=request.method;if(request.data!=null){if(Type.typeof(request.data)==ValueType.TObject){var fields=Reflect.fields(request.data);var _g=0;while(_g<fields.length){var field=fields[_g];++_g;var value=Reflect.field(request.data,field);var _this=this.__httpRequest.formData;if(__map_reserved[field]!=null){_this.setReserved(field,value)}else{_this.h[field]=value}}}else if(request.data instanceof haxe_io_Bytes){this.__httpRequest.data=request.data}else{this.__httpRequest.data=haxe_io_Bytes.ofString(Std.string(request.data))}}this.__httpRequest.contentType=request.contentType;if(request.requestHeaders!=null){var _g1=0;var _g11=request.requestHeaders;while(_g1<_g11.length){var header=_g11[_g1];++_g1;this.__httpRequest.headers.push(new lime_net_HTTPRequestHeader(header.name,header.value))}}this.__httpRequest.followRedirects=request.followRedirects;this.__httpRequest.timeout=request.idleTimeout|0;this.__httpRequest.withCredentials=request.manageCookies;var userAgent=request.userAgent;if(userAgent==null){userAgent="Mozilla/5.0 (Windows; U; en) AppleWebKit/420+ (KHTML, like Gecko) OpenFL/1.0"}this.__httpRequest.userAgent=request.userAgent;this.__httpRequest.enableResponseHeaders=true},httpRequest_onError:function(error){this.__dispatchStatus();if(error==403){var event=new openfl_events_SecurityErrorEvent("securityError");event.text=Std.string(error);this.dispatchEvent(event)}else{var event1=new openfl_events_IOErrorEvent("ioError");event1.text=Std.string(error);this.dispatchEvent(event1)}},httpRequest_onProgress:function(bytesLoaded,bytesTotal){var event=new openfl_events_ProgressEvent("progress");event.bytesLoaded=bytesLoaded;event.bytesTotal=bytesTotal;this.dispatchEvent(event)},__class__:openfl_net_URLLoader});var openfl_net_URLRequest=function(url){if(url!=null){this.url=url}this.contentType=null;this.followRedirects=openfl_net_URLRequestDefaults.followRedirects;if(openfl_net_URLRequestDefaults.idleTimeout>0){this.idleTimeout=openfl_net_URLRequestDefaults.idleTimeout}else{this.idleTimeout=3e4}this.manageCookies=openfl_net_URLRequestDefaults.manageCookies;this.method="GET";this.requestHeaders=[];this.userAgent=openfl_net_URLRequestDefaults.userAgent};$hxClasses["openfl.net.URLRequest"]=openfl_net_URLRequest;openfl_net_URLRequest.__name__="openfl.net.URLRequest";openfl_net_URLRequest.prototype={contentType:null,data:null,followRedirects:null,idleTimeout:null,manageCookies:null,method:null,requestHeaders:null,url:null,userAgent:null,__class__:openfl_net_URLRequest};var openfl_net_URLRequestDefaults=function(){};$hxClasses["openfl.net.URLRequestDefaults"]=openfl_net_URLRequestDefaults;openfl_net_URLRequestDefaults.__name__="openfl.net.URLRequestDefaults";var openfl_net_URLRequestHeader=function(name,value){if(value==null){value=""}if(name==null){name=""}this.name=name;this.value=value};$hxClasses["openfl.net.URLRequestHeader"]=openfl_net_URLRequestHeader;openfl_net_URLRequestHeader.__name__="openfl.net.URLRequestHeader";openfl_net_URLRequestHeader.prototype={name:null,value:null,__class__:openfl_net_URLRequestHeader};var openfl_sensors_Accelerometer=function(){openfl_events_EventDispatcher.call(this);openfl_sensors_Accelerometer.initialize();this.__interval=0;this.__muted=false;this.setRequestedUpdateInterval(openfl_sensors_Accelerometer.defaultInterval)};$hxClasses["openfl.sensors.Accelerometer"]=openfl_sensors_Accelerometer;openfl_sensors_Accelerometer.__name__="openfl.sensors.Accelerometer";openfl_sensors_Accelerometer.initialize=function(){if(!openfl_sensors_Accelerometer.initialized){var sensors=lime_system_Sensor.getSensors(lime_system_SensorType.ACCELEROMETER);if(sensors.length>0){sensors[0].onUpdate.add(openfl_sensors_Accelerometer.accelerometer_onUpdate);openfl_sensors_Accelerometer.supported=true}openfl_sensors_Accelerometer.initialized=true}};openfl_sensors_Accelerometer.accelerometer_onUpdate=function(x,y,z){openfl_sensors_Accelerometer.currentX=x;openfl_sensors_Accelerometer.currentY=y;openfl_sensors_Accelerometer.currentZ=z};openfl_sensors_Accelerometer.__super__=openfl_events_EventDispatcher;openfl_sensors_Accelerometer.prototype=$extend(openfl_events_EventDispatcher.prototype,{__interval:null,__muted:null,__timer:null,addEventListener:function(type,listener,useCapture,priority,useWeakReference){if(useWeakReference==null){useWeakReference=false}if(priority==null){priority=0}if(useCapture==null){useCapture=false}openfl_events_EventDispatcher.prototype.addEventListener.call(this,type,listener,useCapture,priority,useWeakReference);this.update()},setRequestedUpdateInterval:function(interval){this.__interval=interval;if(this.__interval<0){throw new js__$Boot_HaxeError(new openfl_errors_ArgumentError)}else if(this.__interval==0){this.__interval=openfl_sensors_Accelerometer.defaultInterval}if(this.__timer!=null){this.__timer.stop();this.__timer=null}if(openfl_sensors_Accelerometer.supported&&!this.get_muted()){this.__timer=new haxe_Timer(this.__interval);this.__timer.run=$bind(this,this.update)}},update:function(){var event=new openfl_events_AccelerometerEvent("update");event.timestamp=(new Date).getTime()/1e3;event.accelerationX=openfl_sensors_Accelerometer.currentX;event.accelerationY=openfl_sensors_Accelerometer.currentY;event.accelerationZ=openfl_sensors_Accelerometer.currentZ;this.dispatchEvent(event)},get_muted:function(){return this.__muted},__class__:openfl_sensors_Accelerometer,__properties__:{get_muted:"get_muted"}});var openfl_system_ApplicationDomain=function(parentDomain){if(parentDomain!=null){this.parentDomain=parentDomain}else{this.parentDomain=openfl_system_ApplicationDomain.currentDomain}};$hxClasses["openfl.system.ApplicationDomain"]=openfl_system_ApplicationDomain;openfl_system_ApplicationDomain.__name__="openfl.system.ApplicationDomain";openfl_system_ApplicationDomain.prototype={parentDomain:null,__class__:openfl_system_ApplicationDomain};var openfl_system_System=function(){};$hxClasses["openfl.system.System"]=openfl_system_System;openfl_system_System.__name__="openfl.system.System";openfl_system_System.__properties__={get_totalMemory:"get_totalMemory"};openfl_system_System.get_totalMemory=function(){return window.performance&&window.performance.memory?window.performance.memory.usedJSHeapSize:0};var openfl_text_StaticText=function(){openfl_display_DisplayObject.call(this);this.__graphics=new openfl_display_Graphics(this)};$hxClasses["openfl.text.StaticText"]=openfl_text_StaticText;openfl_text_StaticText.__name__="openfl.text.StaticText";openfl_text_StaticText.__super__=openfl_display_DisplayObject;openfl_text_StaticText.prototype=$extend(openfl_display_DisplayObject.prototype,{text:null,__class__:openfl_text_StaticText});var openfl_text_TextField=function(){this.__forceCachedBitmapUpdate=false;this.__renderedOnCanvasWhileOnDOM=false;openfl_display_InteractiveObject.call(this);this.__type=openfl__$internal_renderer_DisplayObjectType.TEXTFIELD;this.__caretIndex=-1;this.__displayAsPassword=false;this.__graphics=new openfl_display_Graphics(this);this.__textEngine=new openfl__$internal_text_TextEngine(this);this.__layoutDirty=true;this.__offsetX=0;this.__offsetY=0;this.__mouseWheelEnabled=true;this.__text="";if(openfl_text_TextField.__defaultTextFormat==null){openfl_text_TextField.__defaultTextFormat=new openfl_text_TextFormat("Times New Roman",12,0,false,false,false,"","",3,0,0,0,0);openfl_text_TextField.__defaultTextFormat.blockIndent=0;openfl_text_TextField.__defaultTextFormat.bullet=false;openfl_text_TextField.__defaultTextFormat.letterSpacing=0;openfl_text_TextField.__defaultTextFormat.kerning=false}this.__textFormat=openfl_text_TextField.__defaultTextFormat.clone();this.__textEngine.textFormatRanges.push(new openfl__$internal_text_TextFormatRange(this.__textFormat,0,0));this.addEventListener("mouseDown",$bind(this,this.this_onMouseDown));this.addEventListener("focusIn",$bind(this,this.this_onFocusIn));this.addEventListener("focusOut",$bind(this,this.this_onFocusOut));this.addEventListener("keyDown",$bind(this,this.this_onKeyDown));this.addEventListener("mouseWheel",$bind(this,this.this_onMouseWheel))};$hxClasses["openfl.text.TextField"]=openfl_text_TextField;openfl_text_TextField.__name__="openfl.text.TextField";openfl_text_TextField.__super__=openfl_display_InteractiveObject;openfl_text_TextField.prototype=$extend(openfl_display_InteractiveObject.prototype,{__caretIndex:null,__cursorTimer:null,__dirty:null,__displayAsPassword:null,__domRender:null,__inputEnabled:null,__isHTML:null,__layoutDirty:null,__mouseWheelEnabled:null,__offsetX:null,__offsetY:null,__selectionIndex:null,__showCursor:null,__symbol:null,__text:null,__textEngine:null,__textFormat:null,__div:null,__renderedOnCanvasWhileOnDOM:null,__rawHtmlText:null,__forceCachedBitmapUpdate:null,getCharBoundaries:function(charIndex){if(charIndex<0||charIndex>this.__text.length-1){return null}var rect=new openfl_geom_Rectangle;if(this.__getCharBoundaries(charIndex,rect)){return rect}else{return null}},getLineIndexOfChar:function(charIndex){if(charIndex<0||charIndex>this.__text.length){return-1}this.__updateLayout();var group=this.__textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.startIndex<=charIndex&&group1.endIndex>=charIndex){return group1.lineIndex}}return-1},getLineOffset:function(lineIndex){this.__updateLayout();if(lineIndex<0||lineIndex>this.__textEngine.numLines-1){return-1}var group=this.__textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(group1.lineIndex==lineIndex){return group1.startIndex}}return 0},replaceSelectedText:function(value){this.__replaceSelectedText(value,false)},replaceText:function(beginIndex,endIndex,newText){this.__replaceText(beginIndex,endIndex,newText,false)},setSelection:function(beginIndex,endIndex){this.__selectionIndex=beginIndex;this.__caretIndex=endIndex;this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()},__allowMouseFocus:function(){if(!(this.__textEngine.type==1||this.get_tabEnabled())){return this.get_selectable()}else{return true}},__caretBeginningOfLine:function(){if(this.__selectionIndex==this.__caretIndex||this.__caretIndex<this.__selectionIndex){this.__caretIndex=this.getLineOffset(this.getLineIndexOfChar(this.__caretIndex))}else{this.__selectionIndex=this.getLineOffset(this.getLineIndexOfChar(this.__selectionIndex))}},__caretEndOfLine:function(){var lineIndex;if(this.__selectionIndex==this.__caretIndex){lineIndex=this.getLineIndexOfChar(this.__caretIndex)}else{lineIndex=this.getLineIndexOfChar(Math.max(this.__caretIndex,this.__selectionIndex)|0)}if(lineIndex<this.__textEngine.numLines-1){this.__caretIndex=this.getLineOffset(lineIndex+1)-1}else{this.__caretIndex=this.__text.length}},__caretNextCharacter:function(){if(this.__caretIndex<this.__text.length){this.__caretIndex++}},__caretNextLine:function(lineIndex,caretIndex){if(lineIndex==null){lineIndex=this.getLineIndexOfChar(this.__caretIndex)}if(lineIndex<this.__textEngine.numLines-1){if(caretIndex==null){caretIndex=this.__caretIndex}this.__caretIndex=this.__getCharIndexOnDifferentLine(caretIndex,lineIndex+1)}else{this.__caretIndex=this.__text.length}},__caretPreviousCharacter:function(){if(this.__caretIndex>0){this.__caretIndex--}},__caretPreviousLine:function(lineIndex,caretIndex){if(lineIndex==null){lineIndex=this.getLineIndexOfChar(this.__caretIndex)}if(lineIndex>0){if(caretIndex==null){caretIndex=this.__caretIndex}this.__caretIndex=this.__getCharIndexOnDifferentLine(caretIndex,lineIndex-1)}else{this.__caretIndex=0}},__disableInput:function(){if(this.__inputEnabled&&this.stage!=null){this.stage.window.__backend.setTextInputEnabled(false);this.stage.window.onTextInput.remove($bind(this,this.window_onTextInput));this.stage.window.onKeyDown.remove($bind(this,this.window_onKeyDown));this.__inputEnabled=false;this.__stopCursorTimer()}},__dispatch:function(event){if(event.eventPhase==2&&event.type=="mouseUp"){var group=this.__getGroup(this.get_mouseX(),this.get_mouseY(),true);if(group!=null){var url=group.format.url;if(url!=null&&url!=""){if(StringTools.startsWith(url,"event:")){this.dispatchEvent(new openfl_events_TextEvent("link",false,false,HxOverrides.substr(url,6,null)))}else{openfl_Lib.getURL(new openfl_net_URLRequest(url))}}}}return openfl_display_InteractiveObject.prototype.__dispatch.call(this,event)},__enableInput:function(){if(this.stage!=null){this.stage.window.__backend.setTextInputEnabled(true);if(!this.__inputEnabled){this.stage.window.__backend.setTextInputEnabled(true);if(!this.stage.window.onTextInput.has($bind(this,this.window_onTextInput))){this.stage.window.onTextInput.add($bind(this,this.window_onTextInput));this.stage.window.onKeyDown.add($bind(this,this.window_onKeyDown))}this.__inputEnabled=true;this.__startCursorTimer()}}},__getBounds:function(rect,matrix){this.__updateLayout();var bounds=openfl_geom_Rectangle.__pool.get();bounds.copyFrom(this.__textEngine.bounds);matrix.tx+=this.__offsetX;matrix.ty+=this.__offsetY;bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)},__getCharBoundaries:function(charIndex,rect){if(charIndex<0||charIndex>this.__text.length-1){return false}this.__updateLayout();var group=this.__textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(charIndex>=group1.startIndex&&charIndex<group1.endIndex){try{var x=group1.offsetX;var _g1=0;var _g2=charIndex-group1.startIndex;while(_g1<_g2)x+=group1.positions[_g1++];rect.setTo(x,group1.offsetY,group1.positions[charIndex-group1.startIndex],group1.ascent+group1.descent);return true}catch(e){haxe_CallStack.lastException=e}}}return false},__getCharIndexOnDifferentLine:function(charIndex,lineIndex){if(charIndex<0||charIndex>this.__text.length){return-1}if(lineIndex<0||lineIndex>this.__textEngine.numLines-1){return-1}var x=null;var y=null;var group=this.__textEngine.layoutGroups.iterator();while(group.hasNext()){var group1=group.next();if(charIndex>=group1.startIndex&&charIndex<=group1.endIndex){x=group1.offsetX;var _g1=0;var _g2=charIndex-group1.startIndex;while(_g1<_g2)x+=group1.positions[_g1++];if(y!=null){return this.__getPosition(x,y)}}if(group1.lineIndex==lineIndex){y=group1.offsetY+group1.height/2;var _g11=0;var _g21=this.get_scrollV()-1;while(_g11<_g21)y-=this.__textEngine.lineHeights.get(_g11++);if(x!=null){return this.__getPosition(x,y)}}}return-1},__getCursor:function(){var group=this.__getGroup(this.get_mouseX(),this.get_mouseY(),true);if(group!=null&&group.format.url!=""){return"button"}else if(this.__textEngine.selectable){return"ibeam"}return null},__getGroup:function(x,y,precise){if(precise==null){precise=false}this.__updateLayout();x+=this.get_scrollH();var _g=0;var _g1=this.get_scrollV()-1;while(_g<_g1)y+=this.__textEngine.lineHeights.get(_g++);if(!precise&&y>this.__textEngine.textHeight){y=this.__textEngine.textHeight}var firstGroup=true;var group;var nextGroup;var _g2=0;var _g3=this.__textEngine.layoutGroups.get_length();while(_g2<_g3){var i=_g2++;group=this.__textEngine.layoutGroups.get(i);if(i<this.__textEngine.layoutGroups.get_length()-1){nextGroup=this.__textEngine.layoutGroups.get(i+1)}else{nextGroup=null}if(firstGroup){if(y<group.offsetY){y=group.offsetY}if(x<group.offsetX){x=group.offsetX}firstGroup=false}if(y>=group.offsetY&&y<=group.offsetY+group.height||!precise&&nextGroup==null){if(x>=group.offsetX&&x<=group.offsetX+group.width||!precise&&(nextGroup==null||nextGroup.lineIndex!=group.lineIndex)){return group}}}return null},__getPosition:function(x,y){var group=this.__getGroup(x,y);if(group==null){return this.__text.length}var advance=0;var _g=0;var _g1=group.positions.length;while(_g<_g1){var i=_g++;advance+=group.positions[i];if(x<=group.offsetX+advance){if(x<=group.offsetX+(advance-group.positions[i])+group.positions[i]/2){return group.startIndex+i}else if(group.startIndex+i<group.endIndex){return group.startIndex+i+1}else{return group.endIndex}}}return group.endIndex},__getRenderBounds:function(rect,matrix){if(this.__scrollRect==null){this.__updateLayout();var bounds=openfl_geom_Rectangle.__pool.get();bounds.copyFrom(this.__textEngine.bounds);bounds.__transform(bounds,matrix);rect.__expand(bounds.x,bounds.y,bounds.width,bounds.height);openfl_geom_Rectangle.__pool.release(bounds)}else{openfl_display_InteractiveObject.prototype.__getRenderBounds.call(this,rect,matrix)}},__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){if(!hitObject.get_visible()||this.__isMask||interactiveOnly&&!this.mouseEnabled){return false}if(this.get_mask()!=null&&!this.get_mask().__hitTestMask(x,y)){return false}this.__getRenderTransform();this.__updateLayout();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;if(this.__textEngine.bounds.contains(norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx)),norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x)))){if(stack!=null){stack.push(hitObject)}return true}return false},__hitTestMask:function(x,y){this.__getRenderTransform();this.__updateLayout();var _this=this.__renderTransform;var norm=_this.a*_this.d-_this.b*_this.c;var _this1=this.__renderTransform;var norm1=_this1.a*_this1.d-_this1.b*_this1.c;if(this.__textEngine.bounds.contains(norm==0?-_this.tx:1/norm*(_this.c*(_this.ty-y)+_this.d*(x-_this.tx)),norm1==0?-_this1.ty:1/norm1*(_this1.a*(y-_this1.ty)+_this1.b*(_this1.tx-x)))){return true}return false},__replaceSelectedText:function(value,restrict){if(restrict==null){restrict=true}if(value==null){value=""}if(value==""&&this.__selectionIndex==this.__caretIndex){return}var startIndex=this.__caretIndex<this.__selectionIndex?this.__caretIndex:this.__selectionIndex;var endIndex=this.__caretIndex>this.__selectionIndex?this.__caretIndex:this.__selectionIndex;if(startIndex==endIndex&&this.__textEngine.maxChars>0&&this.__text.length==this.__textEngine.maxChars){return}if(startIndex>this.__text.length){startIndex=this.__text.length}if(endIndex>this.__text.length){endIndex=this.__text.length}if(endIndex<startIndex){var cache=endIndex;endIndex=startIndex;startIndex=cache}if(startIndex<0){startIndex=0}this.__replaceText(startIndex,endIndex,value,restrict);var i=startIndex+js_Boot.__cast(value,String).length;if(i>this.__text.length){i=this.__text.length}this.setSelection(i,i);this.__updateScrollH()},__replaceText:function(beginIndex,endIndex,newText,restrict){if(endIndex<beginIndex||beginIndex<0||endIndex>this.__text.length||newText==null){return}if(restrict){newText=this.__textEngine.restrictText(newText);if(this.__textEngine.maxChars>0){var maxLength=this.__textEngine.maxChars-this.__text.length+(endIndex-beginIndex);if(maxLength<=0){newText=""}else if(maxLength<newText.length){newText=HxOverrides.substr(newText,0,maxLength)}}}this.__updateText(this.__text.substring(0,beginIndex)+newText+this.__text.substring(endIndex));if(endIndex>this.__text.length){endIndex=this.__text.length}var offset=newText.length-(endIndex-beginIndex);var i=0;var range;while(i<this.__textEngine.textFormatRanges.get_length()){range=this.__textEngine.textFormatRanges.get(i);if(beginIndex==endIndex){if(range.end>=beginIndex){if(range.start>endIndex){range.start+=offset;range.end+=offset}else if(!(range.start<range.end&&range.end==beginIndex&&i<this.__textEngine.textFormatRanges.get_length()-1)){range.end+=offset}}}else if(range.end>=beginIndex){if(range.start>=endIndex){range.start+=offset;range.end+=offset}else if(range.start>=beginIndex&&range.end<=endIndex){if(this.__textEngine.textFormatRanges.get_length()>1){this.__textEngine.textFormatRanges.splice(i,1)}else{range.start=0;range.end=newText.length}}else if(range.start<=beginIndex){if(range.end<endIndex){range.end=beginIndex}else{range.end+=offset}}else{range.start=beginIndex;range.end+=offset}}++i}this.__updateScrollV();this.__updateScrollH();this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}},__startCursorTimer:function(){this.__cursorTimer=haxe_Timer.delay($bind(this,this.__startCursorTimer),600);this.__showCursor=!this.__showCursor;this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}},__startTextInput:function(){if(this.__caretIndex<0){this.__caretIndex=this.__text.length;this.__selectionIndex=this.__caretIndex}if(openfl_display_DisplayObject.__supportDOM?this.__renderedOnCanvasWhileOnDOM:true){this.__enableInput()}},__stopCursorTimer:function(){if(this.__cursorTimer!=null){this.__cursorTimer.stop();this.__cursorTimer=null}if(this.__showCursor){this.__showCursor=false;this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}},__stopTextInput:function(){if(openfl_display_DisplayObject.__supportDOM?this.__renderedOnCanvasWhileOnDOM:true){this.__disableInput()}},__updateLayout:function(){if(this.__layoutDirty){var cacheWidth=this.__textEngine.width;this.__textEngine.update();if(this.__textEngine.autoSize!=2){if(this.__textEngine.width!=cacheWidth){switch(this.__textEngine.autoSize){case 0:var _g=this;_g.set_x(_g.get_x()+(cacheWidth-this.__textEngine.width)/2);break;case 3:var _g1=this;_g1.set_x(_g1.get_x()+(cacheWidth-this.__textEngine.width));break;default:}}this.__textEngine.getBounds()}this.__layoutDirty=false}},__updateScrollH:function(){if(!this.get_multiline()&&this.get_type()==1){this.__layoutDirty=true;this.__updateLayout();var offsetX=this.__textEngine.textWidth-this.__textEngine.width+4;if(offsetX>0){if(this.__caretIndex>=this.get_text().length){this.set_scrollH(Math.ceil(offsetX))}else{var caret=openfl_geom_Rectangle.__pool.get();this.__getCharBoundaries(this.__caretIndex,caret);if(caret.x<this.get_scrollH()){this.set_scrollH(Math.floor(caret.x-2))}else if(caret.x>this.get_scrollH()+this.__textEngine.width){this.set_scrollH(Math.ceil(caret.x-this.__textEngine.width-2))}openfl_geom_Rectangle.__pool.release(caret)}}else{this.set_scrollH(0)}}},__updateScrollV:function(){this.__layoutDirty=true;this.__updateLayout();var lineIndex=this.getLineIndexOfChar(this.__caretIndex);if(lineIndex==-1&&this.__caretIndex>0){lineIndex=this.getLineIndexOfChar(this.__caretIndex-1)+1}if(lineIndex+1<this.get_scrollV()){this.set_scrollV(lineIndex+1)}else if(lineIndex+1>this.get_bottomScrollV()){var i=lineIndex;var tempHeight=0;while(i>=0)if(tempHeight+this.__textEngine.lineHeights.get(i)<=this.get_height()-4){tempHeight+=this.__textEngine.lineHeights.get(i);--i}else{break}this.set_scrollV(i+2)}else{this.set_scrollV(this.get_scrollV())}},__updateText:function(value){if(openfl_display_DisplayObject.__supportDOM&&this.__renderedOnCanvasWhileOnDOM){this.__forceCachedBitmapUpdate=this.__text!=value}this.__textEngine.set_text(value);this.__text=this.__textEngine.text;if(this.__text.length<this.__caretIndex){this.__selectionIndex=this.__caretIndex=this.__text.length}if(!this.__displayAsPassword||openfl_display_DisplayObject.__supportDOM&&!this.__renderedOnCanvasWhileOnDOM){this.__textEngine.set_text(this.__text)}else{var length=this.get_text().length;var mask="";var _g=0;while(_g<length){++_g;mask+="*"}this.__textEngine.set_text(mask)}},__updateTransforms:function(overrideTransform){openfl_display_InteractiveObject.prototype.__updateTransforms.call(this,overrideTransform);var _this=this.__renderTransform;var px=this.__offsetX;var py=this.__offsetY;_this.tx=px*_this.a+py*_this.c+_this.tx;_this.ty=px*_this.b+py*_this.d+_this.ty},set_autoSize:function(value){if(value!=this.__textEngine.autoSize){this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.autoSize=value},set_background:function(value){if(value!=this.__textEngine.background){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.background=value},set_border:function(value){if(value!=this.__textEngine.border){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.border=value},get_bottomScrollV:function(){this.__updateLayout();return this.__textEngine.get_bottomScrollV()},get_defaultTextFormat:function(){return this.__textFormat.clone()},set_defaultTextFormat:function(value){this.__textFormat.__merge(value);this.__layoutDirty=true;this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}return value},set_displayAsPassword:function(value){if(value!=this.__displayAsPassword){this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.__displayAsPassword=value;this.__updateText(this.__text)}return value},set_embedFonts:function(value){return this.__textEngine.embedFonts=value},get_height:function(){this.__updateLayout();return this.__textEngine.height*Math.abs(this.get_scaleY())},set_height:function(value){if(value!=this.__textEngine.height){this.__setTransformDirty();this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.__textEngine.height=value}return this.__textEngine.height*Math.abs(this.get_scaleY())},get_htmlText:function(){if(this.__isHTML){return this.__rawHtmlText}else{return this.__text}},set_htmlText:function(value){if(!this.__isHTML||this.__text!=value){this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}this.__isHTML=true;this.__rawHtmlText=value;value=openfl__$internal_formats_html_HTMLParser.parse(value,this.__textFormat,this.__textEngine.textFormatRanges);if(openfl_display_DisplayObject.__supportDOM){if(this.__textEngine.textFormatRanges.get_length()>1){this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.get_length()-1)}var range=this.__textEngine.textFormatRanges.get(0);range.format=this.__textFormat;range.start=0;if(this.__renderedOnCanvasWhileOnDOM){range.end=value.length;this.__updateText(value)}else{range.end=this.__rawHtmlText.length;this.__updateText(this.__rawHtmlText)}}else{this.__updateText(value)}this.__updateScrollV();return value},get_multiline:function(){return this.__textEngine.multiline},set_multiline:function(value){if(value!=this.__textEngine.multiline){this.__dirty=true;this.__layoutDirty=true;this.__updateText(this.__text);this.__updateScrollH();if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.multiline=value},get_scrollH:function(){return this.__textEngine.scrollH},set_scrollH:function(value){this.__updateLayout();if(value>this.__textEngine.maxScrollH){value=this.__textEngine.maxScrollH}if(value<0){value=0}if(value!=this.__textEngine.scrollH){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.dispatchEvent(new openfl_events_Event("scroll"))}return this.__textEngine.scrollH=value},get_scrollV:function(){return this.__textEngine.get_scrollV()},set_scrollV:function(value){this.__updateLayout();if(value!=this.__textEngine.get_scrollV()){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.dispatchEvent(new openfl_events_Event("scroll"))}return this.__textEngine.set_scrollV(value)},get_selectable:function(){return this.__textEngine.selectable},set_selectable:function(value){if(value!=this.__textEngine.selectable&&this.get_type()==1){if(this.stage!=null&&this.stage.get_focus()==this){this.__startTextInput()}else if(!value){this.__stopTextInput()}}return this.__textEngine.selectable=value},get_tabEnabled:function(){if(this.__tabEnabled==null){return this.__textEngine.type==1}else{return this.__tabEnabled}},get_text:function(){return this.__text},set_text:function(value){if(this.__isHTML||this.__text!=value){this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}else{return value}if(this.__textEngine.textFormatRanges.get_length()>1){this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.get_length()-1)}var range=this.__textEngine.textFormatRanges.get(0);range.format=this.__textFormat;range.start=0;range.end=value.length;this.__isHTML=false;this.__updateText(value);this.__updateScrollV();return value},set_textColor:function(value){if(value!=this.__textFormat.color){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}var range=this.__textEngine.textFormatRanges.iterator();while(range.hasNext())range.next().format.color=value;return this.__textFormat.color=value},get_textWidth:function(){this.__updateLayout();return this.__textEngine.textWidth},get_textHeight:function(){this.__updateLayout();return this.__textEngine.textHeight},get_type:function(){return this.__textEngine.type},set_type:function(value){if(value!=this.__textEngine.type){if(value==1){this.addEventListener("addedToStage",$bind(this,this.this_onAddedToStage));this.this_onFocusIn(null);this.__textEngine.__useIntAdvances=true}else{this.removeEventListener("addedToStage",$bind(this,this.this_onAddedToStage));this.__stopTextInput();this.__textEngine.__useIntAdvances=null}this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.type=value},get_width:function(){this.__updateLayout();return this.__textEngine.width*Math.abs(this.__scaleX)},set_width:function(value){if(value!=this.__textEngine.width){this.__setTransformDirty();this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}this.__textEngine.width=value}return this.__textEngine.width*Math.abs(this.__scaleX)},set_wordWrap:function(value){if(value!=this.__textEngine.wordWrap){this.__dirty=true;this.__layoutDirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}return this.__textEngine.wordWrap=value},get_x:function(){return this.__transform.tx+this.__offsetX},set_x:function(value){if(value!=this.__transform.tx+this.__offsetX){this.__setTransformDirty()}return this.__transform.tx=value-this.__offsetX},get_y:function(){return this.__transform.ty+this.__offsetY},set_y:function(value){if(value!=this.__transform.ty+this.__offsetY){this.__setTransformDirty()}return this.__transform.ty=value-this.__offsetY},stage_onMouseMove:function(event){if(this.stage==null){return}if(this.__textEngine.selectable&&this.__selectionIndex>=0){this.__updateLayout();var position=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY());if(position!=this.__caretIndex){this.__caretIndex=position;if(openfl_display_DisplayObject.__supportDOM){if(this.__renderedOnCanvasWhileOnDOM){this.__forceCachedBitmapUpdate=true}}else{this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}}}},stage_onMouseUp:function(event){if(this.stage==null){return}this.stage.removeEventListener("mouseMove",$bind(this,this.stage_onMouseMove));this.stage.removeEventListener("mouseUp",$bind(this,this.stage_onMouseUp));if(this.stage.get_focus()==this){this.__getWorldTransform();this.__updateLayout();var upPos=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY());var rightPos=Math.max(this.__selectionIndex,upPos)|0;this.__selectionIndex=Math.min(this.__selectionIndex,upPos)|0;this.__caretIndex=rightPos;if(this.__inputEnabled){this.this_onFocusIn(null);this.__stopCursorTimer();this.__startCursorTimer();if(openfl_display_DisplayObject.__supportDOM&&this.__renderedOnCanvasWhileOnDOM){this.__forceCachedBitmapUpdate=true}}}},this_onAddedToStage:function(event){this.this_onFocusIn(null)},this_onFocusIn:function(event){if(this.get_type()==1&&this.stage!=null&&this.stage.get_focus()==this){this.__startTextInput()}},this_onFocusOut:function(event){this.__stopCursorTimer();if(event.relatedObject==null||!(event.relatedObject instanceof openfl_text_TextField)){this.__stopTextInput()}else{if(this.stage!=null){this.stage.window.onTextInput.remove($bind(this,this.window_onTextInput));this.stage.window.onKeyDown.remove($bind(this,this.window_onKeyDown))}this.__inputEnabled=false}if(this.__selectionIndex!=this.__caretIndex){this.__selectionIndex=this.__caretIndex;this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}},this_onKeyDown:function(event){if(this.get_selectable()&&this.get_type()!=1&&event.keyCode==67&&(event.commandKey||event.ctrlKey)){if(this.__caretIndex!=this.__selectionIndex){lime_system_Clipboard.set_text(this.__text.substring(this.__caretIndex,this.__selectionIndex))}}},this_onMouseDown:function(event){if(!this.get_selectable()&&this.get_type()!=1){return}this.__updateLayout();this.__caretIndex=this.__getPosition(this.get_mouseX()+this.get_scrollH(),this.get_mouseY());this.__selectionIndex=this.__caretIndex;if(!openfl_display_DisplayObject.__supportDOM){this.__dirty=true;if(!this.__renderDirty){this.__renderDirty=true;this.__setParentRenderDirty()}}this.stage.addEventListener("mouseMove",$bind(this,this.stage_onMouseMove));this.stage.addEventListener("mouseUp",$bind(this,this.stage_onMouseUp))},this_onMouseWheel:function(event){var _g=this;_g.set_scrollV(_g.get_scrollV()-event.delta)},window_onKeyDown:function(key,modifier){switch(key){case 8:if(this.__selectionIndex==this.__caretIndex&&this.__caretIndex>0){this.__selectionIndex=this.__caretIndex-1}if(this.__selectionIndex!=this.__caretIndex){this.replaceSelectedText("");this.__selectionIndex=this.__caretIndex;this.dispatchEvent(new openfl_events_Event("change",true))}break;case 97:if(this.get_selectable()){if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier)||lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier)){this.__caretIndex=this.__text.length;this.__selectionIndex=0}}break;case 99:if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier)||lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier)){if(this.__caretIndex!=this.__selectionIndex){lime_system_Clipboard.set_text(this.__text.substring(this.__caretIndex,this.__selectionIndex))}}break;case 120:if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier)||lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_ctrlKey(modifier)){if(this.__caretIndex!=this.__selectionIndex){lime_system_Clipboard.set_text(this.__text.substring(this.__caretIndex,this.__selectionIndex));this.replaceSelectedText("");this.dispatchEvent(new openfl_events_Event("change",true))}}break;case 127:if(this.__selectionIndex==this.__caretIndex&&this.__caretIndex<this.__text.length){this.__selectionIndex=this.__caretIndex+1}if(this.__selectionIndex!=this.__caretIndex){this.replaceSelectedText("");this.__selectionIndex=this.__caretIndex;this.dispatchEvent(new openfl_events_Event("change",true))}break;case 1073741898:if(this.get_selectable()){this.__caretBeginningOfLine();this.__stopCursorTimer();this.__startCursorTimer()}break;case 1073741901:if(this.get_selectable()){this.__caretEndOfLine();this.__stopCursorTimer();this.__startCursorTimer()}break;case 1073741903:if(this.get_selectable()){if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier)){this.__caretEndOfLine();if(!lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__selectionIndex=this.__caretIndex}}else if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__caretNextCharacter()}else{if(this.__selectionIndex==this.__caretIndex){this.__caretNextCharacter()}else{this.__caretIndex=Math.max(this.__caretIndex,this.__selectionIndex)|0}this.__selectionIndex=this.__caretIndex}this.__updateScrollH();this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()}break;case 1073741904:if(this.get_selectable()){if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_metaKey(modifier)){this.__caretBeginningOfLine();if(!lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__selectionIndex=this.__caretIndex}}else if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__caretPreviousCharacter()}else{if(this.__selectionIndex==this.__caretIndex){this.__caretPreviousCharacter()}else{this.__caretIndex=Math.min(this.__caretIndex,this.__selectionIndex)|0}this.__selectionIndex=this.__caretIndex}this.__updateScrollH();this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()}break;case 1073741905:if(this.get_selectable()){if(!this.__textEngine.multiline){return}if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__caretNextLine()}else{if(this.__selectionIndex==this.__caretIndex){this.__caretNextLine()}else{this.__caretNextLine(this.getLineIndexOfChar(Math.max(this.__caretIndex,this.__selectionIndex)|0),Math.min(this.__caretIndex,this.__selectionIndex)|0)}this.__selectionIndex=this.__caretIndex}this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()}break;case 1073741906:if(this.get_selectable()){if(!this.__textEngine.multiline){return}if(lime_ui__$KeyModifier_KeyModifier_$Impl_$.get_shiftKey(modifier)){this.__caretPreviousLine()}else{if(this.__selectionIndex==this.__caretIndex){this.__caretPreviousLine()}else{this.__caretPreviousLine(this.getLineIndexOfChar(Math.min(this.__caretIndex,this.__selectionIndex)|0),Math.min(this.__caretIndex,this.__selectionIndex)|0)}this.__selectionIndex=this.__caretIndex}this.__updateScrollV();this.__stopCursorTimer();this.__startCursorTimer()}break;case 13:case 1073741912:if(this.__textEngine.multiline){var te=new openfl_events_TextEvent("textInput",true,true,"\n");this.dispatchEvent(te);if(!te.isDefaultPrevented()){this.__replaceSelectedText("\n",true);this.dispatchEvent(new openfl_events_Event("change",true))}}break;default:}},window_onTextInput:function(value){this.__replaceSelectedText(value,true);this.dispatchEvent(new openfl_events_Event("change",true))},__class__:openfl_text_TextField,__properties__:$extend(openfl_display_InteractiveObject.prototype.__properties__,{set_wordWrap:"set_wordWrap",set_type:"set_type",get_type:"get_type",get_textWidth:"get_textWidth",get_textHeight:"get_textHeight",set_textColor:"set_textColor",set_text:"set_text",get_text:"get_text",set_selectable:"set_selectable",get_selectable:"get_selectable",set_scrollV:"set_scrollV",get_scrollV:"get_scrollV",set_scrollH:"set_scrollH",get_scrollH:"get_scrollH",set_multiline:"set_multiline",get_multiline:"get_multiline",set_htmlText:"set_htmlText",get_htmlText:"get_htmlText",set_embedFonts:"set_embedFonts",set_displayAsPassword:"set_displayAsPassword",set_defaultTextFormat:"set_defaultTextFormat",get_defaultTextFormat:"get_defaultTextFormat",get_bottomScrollV:"get_bottomScrollV",set_border:"set_border",set_background:"set_background",set_autoSize:"set_autoSize"})});var openfl_text_TextFormat=function(font,size,color,bold,italic,underline,url,target,align,leftMargin,rightMargin,indent,leading){this.font=font;this.size=size;this.color=color;this.bold=bold;this.italic=italic;this.underline=underline;this.url=url;this.target=target;this.align=align;this.leftMargin=leftMargin;this.rightMargin=rightMargin;this.indent=indent;this.leading=leading};$hxClasses["openfl.text.TextFormat"]=openfl_text_TextFormat;openfl_text_TextFormat.__name__="openfl.text.TextFormat";openfl_text_TextFormat.prototype={align:null,blockIndent:null,bold:null,bullet:null,color:null,font:null,indent:null,italic:null,kerning:null,leading:null,leftMargin:null,letterSpacing:null,rightMargin:null,size:null,tabStops:null,target:null,underline:null,url:null,__ascent:null,__descent:null,clone:function(){var newFormat=new openfl_text_TextFormat(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);newFormat.align=this.align;newFormat.leftMargin=this.leftMargin;newFormat.rightMargin=this.rightMargin;newFormat.indent=this.indent;newFormat.leading=this.leading;newFormat.blockIndent=this.blockIndent;newFormat.bullet=this.bullet;newFormat.kerning=this.kerning;newFormat.letterSpacing=this.letterSpacing;newFormat.tabStops=this.tabStops;newFormat.__ascent=this.__ascent;newFormat.__descent=this.__descent;return newFormat},__merge:function(format){if(format.font!=null){this.font=format.font}if(format.size!=null){this.size=format.size}if(format.color!=null){this.color=format.color}if(format.bold!=null){this.bold=format.bold}if(format.italic!=null){this.italic=format.italic}if(format.underline!=null){this.underline=format.underline}if(format.url!=null){this.url=format.url}if(format.target!=null){this.target=format.target}if(format.align!=null){this.align=format.align}if(format.leftMargin!=null){this.leftMargin=format.leftMargin}if(format.rightMargin!=null){this.rightMargin=format.rightMargin}if(format.indent!=null){this.indent=format.indent}if(format.leading!=null){this.leading=format.leading}if(format.blockIndent!=null){this.blockIndent=format.blockIndent}if(format.bullet!=null){this.bullet=format.bullet}if(format.kerning!=null){this.kerning=format.kerning}if(format.letterSpacing!=null){this.letterSpacing=format.letterSpacing}if(format.tabStops!=null){this.tabStops=format.tabStops}if(format.__ascent!=null){this.__ascent=format.__ascent}if(format.__descent!=null){this.__descent=format.__descent}},__class__:openfl_text_TextFormat};var openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$={};$hxClasses["openfl.text._TextFormatAlign.TextFormatAlign_Impl_"]=openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$;openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.__name__="openfl.text._TextFormatAlign.TextFormatAlign_Impl_";openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.fromString=function(value){switch(value){case"center":return 0;case"end":return 1;case"justify":return 2;case"left":return 3;case"right":return 4;case"start":return 5;default:return null}};openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString=function(this1){switch(this1){case 0:return"center";case 1:return"end";case 2:return"justify";case 3:return"left";case 4:return"right";case 5:return"start";default:return null}};var openfl_ui_GameInput=function(){openfl_events_EventDispatcher.call(this);openfl_ui_GameInput.__instances.push(this)};$hxClasses["openfl.ui.GameInput"]=openfl_ui_GameInput;openfl_ui_GameInput.__name__="openfl.ui.GameInput";openfl_ui_GameInput.__getDevice=function(gamepad){if(gamepad==null){return null}if(openfl_ui_GameInput.__devices.h.__keys__[gamepad.__id__]==null){var device=new openfl_ui_GameInputDevice(lime_ui_Joystick.__getDeviceData()[gamepad.id].id,lime_ui_Joystick.__getDeviceData()[gamepad.id].id);openfl_ui_GameInput.__deviceList.push(device);openfl_ui_GameInput.__devices.set(gamepad,device);openfl_ui_GameInput.numDevices=openfl_ui_GameInput.__deviceList.length}return openfl_ui_GameInput.__devices.h[gamepad.__id__]};openfl_ui_GameInput.__onGamepadAxisMove=function(gamepad,axis,value){var device=openfl_ui_GameInput.__getDevice(gamepad);if(device==null){return}if(device.enabled){if(!device.__axis.h.hasOwnProperty(axis)){var control;switch(axis){case 0:control="LEFT_X";break;case 1:control="LEFT_Y";break;case 2:control="RIGHT_X";break;case 3:control="RIGHT_Y";break;case 4:control="TRIGGER_LEFT";break;case 5:control="TRIGGER_RIGHT";break;default:control="UNKNOWN ("+axis+")"}var control1=new openfl_ui_GameInputControl(device,"AXIS_"+control,-1,1);device.__axis.h[axis]=control1;device.__controls.push(control1)}var control2=device.__axis.h[axis];control2.value=value;control2.dispatchEvent(new openfl_events_Event("change"))}};openfl_ui_GameInput.__onGamepadButtonDown=function(gamepad,button){var device=openfl_ui_GameInput.__getDevice(gamepad);if(device==null){return}if(device.enabled){if(!device.__button.h.hasOwnProperty(button)){var control;switch(button){case 0:control="A";break;case 1:control="B";break;case 2:control="X";break;case 3:control="Y";break;case 4:control="BACK";break;case 5:control="GUIDE";break;case 6:control="START";break;case 7:control="LEFT_STICK";break;case 8:control="RIGHT_STICK";break;case 9:control="LEFT_SHOULDER";break;case 10:control="RIGHT_SHOULDER";break;case 11:control="DPAD_UP";break;case 12:control="DPAD_DOWN";break;case 13:control="DPAD_LEFT";break;case 14:control="DPAD_RIGHT";break;default:control="UNKNOWN ("+button+")"}var control1=new openfl_ui_GameInputControl(device,"BUTTON_"+control,0,1);device.__button.h[button]=control1;device.__controls.push(control1)}var control2=device.__button.h[button];control2.value=1;control2.dispatchEvent(new openfl_events_Event("change"))}};openfl_ui_GameInput.__onGamepadButtonUp=function(gamepad,button){var device=openfl_ui_GameInput.__getDevice(gamepad);if(device==null){return}if(device.enabled){if(!device.__button.h.hasOwnProperty(button)){var control;switch(button){case 0:control="A";break;case 1:control="B";break;case 2:control="X";break;case 3:control="Y";break;case 4:control="BACK";break;case 5:control="GUIDE";break;case 6:control="START";break;case 7:control="LEFT_STICK";break;case 8:control="RIGHT_STICK";break;case 9:control="LEFT_SHOULDER";break;case 10:control="RIGHT_SHOULDER";break;case 11:control="DPAD_UP";break;case 12:control="DPAD_DOWN";break;case 13:control="DPAD_LEFT";break;case 14:control="DPAD_RIGHT";break;default:control="UNKNOWN ("+button+")"}var control1=new openfl_ui_GameInputControl(device,"BUTTON_"+control,0,1);device.__button.h[button]=control1;device.__controls.push(control1)}var control2=device.__button.h[button];control2.value=0;control2.dispatchEvent(new openfl_events_Event("change"))}};openfl_ui_GameInput.__onGamepadConnect=function(gamepad){var device=openfl_ui_GameInput.__getDevice(gamepad);if(device==null){return}var _g=0;var _g1=openfl_ui_GameInput.__instances;while(_g<_g1.length)_g1[_g++].dispatchEvent(new openfl_events_GameInputEvent("deviceAdded",true,false,device))};openfl_ui_GameInput.__onGamepadDisconnect=function(gamepad){var device=openfl_ui_GameInput.__devices.h[gamepad.__id__];if(device!=null){if(openfl_ui_GameInput.__devices.h.__keys__[gamepad.__id__]!=null){HxOverrides.remove(openfl_ui_GameInput.__deviceList,openfl_ui_GameInput.__devices.h[gamepad.__id__]);openfl_ui_GameInput.__devices.remove(gamepad)}openfl_ui_GameInput.numDevices=openfl_ui_GameInput.__deviceList.length;var _g=0;var _g1=openfl_ui_GameInput.__instances;while(_g<_g1.length)_g1[_g++].dispatchEvent(new openfl_events_GameInputEvent("deviceRemoved",true,false,device))}};openfl_ui_GameInput.__super__=openfl_events_EventDispatcher;openfl_ui_GameInput.prototype=$extend(openfl_events_EventDispatcher.prototype,{addEventListener:function(type,listener,useCapture,priority,useWeakReference){if(useWeakReference==null){useWeakReference=false}if(priority==null){priority=0}if(useCapture==null){useCapture=false}openfl_events_EventDispatcher.prototype.addEventListener.call(this,type,listener,useCapture,priority,useWeakReference);if(type=="deviceAdded"){var _g=0;var _g1=openfl_ui_GameInput.__deviceList;while(_g<_g1.length)this.dispatchEvent(new openfl_events_GameInputEvent("deviceAdded",true,false,_g1[_g++]))}},__class__:openfl_ui_GameInput});var openfl_ui_GameInputControl=function(device,id,minValue,maxValue,value){if(value==null){value=0}openfl_events_EventDispatcher.call(this);this.device=device;this.id=id;this.minValue=minValue;this.maxValue=maxValue;this.value=value};$hxClasses["openfl.ui.GameInputControl"]=openfl_ui_GameInputControl;openfl_ui_GameInputControl.__name__="openfl.ui.GameInputControl";openfl_ui_GameInputControl.__super__=openfl_events_EventDispatcher;openfl_ui_GameInputControl.prototype=$extend(openfl_events_EventDispatcher.prototype,{device:null,id:null,maxValue:null,minValue:null,value:null,__class__:openfl_ui_GameInputControl});var openfl_ui_GameInputDevice=function(id,name){this.__controls=[];this.__button=new haxe_ds_IntMap;this.__axis=new haxe_ds_IntMap;this.id=id;this.name=name;var control;control=new openfl_ui_GameInputControl(this,"AXIS_"+0,-1,1);this.__axis.h[0]=control;this.__controls.push(control);control=new openfl_ui_GameInputControl(this,"AXIS_"+1,-1,1);this.__axis.h[1]=control;this.__controls.push(control);control=new openfl_ui_GameInputControl(this,"AXIS_"+2,-1,1);this.__axis.h[2]=control;this.__controls.push(control);control=new openfl_ui_GameInputControl(this,"AXIS_"+3,-1,1);this.__axis.h[3]=control;this.__controls.push(control);control=new openfl_ui_GameInputControl(this,"AXIS_"+4,-1,1);this.__axis.h[4]=control;this.__controls.push(control);control=new openfl_ui_GameInputControl(this,"AXIS_"+5,-1,1);this.__axis.h[5]=control;this.__controls.push(control);var _g=0;while(_g<15){var i=_g++;control=new openfl_ui_GameInputControl(this,"BUTTON_"+i,0,1);this.__button.h[i]=control;this.__controls.push(control)}};$hxClasses["openfl.ui.GameInputDevice"]=openfl_ui_GameInputDevice;openfl_ui_GameInputDevice.__name__="openfl.ui.GameInputDevice";openfl_ui_GameInputDevice.prototype={enabled:null,id:null,name:null,__axis:null,__button:null,__controls:null,__class__:openfl_ui_GameInputDevice};var openfl_ui_Keyboard=function(){};$hxClasses["openfl.ui.Keyboard"]=openfl_ui_Keyboard;openfl_ui_Keyboard.__name__="openfl.ui.Keyboard";openfl_ui_Keyboard.__getCharCode=function(key,shift){if(shift==null){shift=false}if(!shift){switch(key){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}if(key>=48&&key<=57){return key-48+48}if(key>=65&&key<=90){return key-65+97}}else{switch(key){case 48:return 41;case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 186:return 58;case 187:return 43;case 188:return 60;case 189:return 95;case 190:return 62;case 191:return 63;case 192:return 126;case 219:return 123;case 220:return 124;case 221:return 125;case 222:return 34}if(key>=65&&key<=90){return key-65+65}}if(key>=96&&key<=105){return key-96+48}switch(key){case 8:return 8;case 13:return 13;case 46:return 127;case 106:return 42;case 107:return 43;case 108:return 44;case 110:return 45;case 111:return 46}return 0};var openfl_ui_Mouse=function(){};$hxClasses["openfl.ui.Mouse"]=openfl_ui_Mouse;openfl_ui_Mouse.__name__="openfl.ui.Mouse";var openfl_ui__$MouseCursor_MouseCursor_$Impl_$={};$hxClasses["openfl.ui._MouseCursor.MouseCursor_Impl_"]=openfl_ui__$MouseCursor_MouseCursor_$Impl_$;openfl_ui__$MouseCursor_MouseCursor_$Impl_$.__name__="openfl.ui._MouseCursor.MouseCursor_Impl_";openfl_ui__$MouseCursor_MouseCursor_$Impl_$.toLimeCursor=function(this1){switch(this1){case"arrow":return lime_ui_MouseCursor.ARROW;case"auto":return lime_ui_MouseCursor.DEFAULT;case"button":return lime_ui_MouseCursor.POINTER;case"crosshair":return lime_ui_MouseCursor.CROSSHAIR;case"custom":return lime_ui_MouseCursor.CUSTOM;case"hand":return lime_ui_MouseCursor.MOVE;case"ibeam":return lime_ui_MouseCursor.TEXT;case"resize_nesw":return lime_ui_MouseCursor.RESIZE_NESW;case"resize_ns":return lime_ui_MouseCursor.RESIZE_NS;case"resize_nwse":return lime_ui_MouseCursor.RESIZE_NWSE;case"resize_we":return lime_ui_MouseCursor.RESIZE_WE;case"wait":return lime_ui_MouseCursor.WAIT;case"waitarrow":return lime_ui_MouseCursor.WAIT_ARROW;default:return lime_ui_MouseCursor.DEFAULT}};var openfl_ui_Multitouch=function(){};$hxClasses["openfl.ui.Multitouch"]=openfl_ui_Multitouch;openfl_ui_Multitouch.__name__="openfl.ui.Multitouch";openfl_ui_Multitouch.__properties__={get_supportsTouchEvents:"get_supportsTouchEvents"};openfl_ui_Multitouch.get_supportsTouchEvents=function(){if("ontouchstart"in document.documentElement||window.DocumentTouch&&document instanceof DocumentTouch){return true}return false};var openfl_utils_AGALMiniAssembler=function(debugging){if(debugging==null){debugging=false}this.debugEnabled=false;this.debugEnabled=debugging;if(!openfl_utils_AGALMiniAssembler.initialized){openfl_utils_AGALMiniAssembler.init()}};$hxClasses["openfl.utils.AGALMiniAssembler"]=openfl_utils_AGALMiniAssembler;openfl_utils_AGALMiniAssembler.__name__="openfl.utils.AGALMiniAssembler";openfl_utils_AGALMiniAssembler.init=function(){openfl_utils_AGALMiniAssembler.initialized=true;var v=new openfl_utils__$AGALMiniAssembler_OpCode("mov",2,0,0);var _this=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["mov"]!=null){_this.setReserved("mov",v)}else{_this.h["mov"]=v}var v1=new openfl_utils__$AGALMiniAssembler_OpCode("add",3,1,0);var _this1=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["add"]!=null){_this1.setReserved("add",v1)}else{_this1.h["add"]=v1}var v2=new openfl_utils__$AGALMiniAssembler_OpCode("sub",3,2,0);var _this2=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sub"]!=null){_this2.setReserved("sub",v2)}else{_this2.h["sub"]=v2}var v3=new openfl_utils__$AGALMiniAssembler_OpCode("mul",3,3,0);var _this3=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["mul"]!=null){_this3.setReserved("mul",v3)}else{_this3.h["mul"]=v3}var v4=new openfl_utils__$AGALMiniAssembler_OpCode("div",3,4,0);var _this4=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["div"]!=null){_this4.setReserved("div",v4)}else{_this4.h["div"]=v4}var v5=new openfl_utils__$AGALMiniAssembler_OpCode("rcp",2,5,0);var _this5=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["rcp"]!=null){_this5.setReserved("rcp",v5)}else{_this5.h["rcp"]=v5}var v6=new openfl_utils__$AGALMiniAssembler_OpCode("min",3,6,0);var _this6=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["min"]!=null){_this6.setReserved("min",v6)}else{_this6.h["min"]=v6}var v7=new openfl_utils__$AGALMiniAssembler_OpCode("max",3,7,0);var _this7=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["max"]!=null){_this7.setReserved("max",v7)}else{_this7.h["max"]=v7}var v8=new openfl_utils__$AGALMiniAssembler_OpCode("frc",2,8,0);var _this8=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["frc"]!=null){_this8.setReserved("frc",v8)}else{_this8.h["frc"]=v8}var v9=new openfl_utils__$AGALMiniAssembler_OpCode("sqt",2,9,0);var _this9=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sqt"]!=null){_this9.setReserved("sqt",v9)}else{_this9.h["sqt"]=v9}var v10=new openfl_utils__$AGALMiniAssembler_OpCode("rsq",2,10,0);var _this10=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["rsq"]!=null){_this10.setReserved("rsq",v10)}else{_this10.h["rsq"]=v10}var v11=new openfl_utils__$AGALMiniAssembler_OpCode("pow",3,11,0);var _this11=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["pow"]!=null){_this11.setReserved("pow",v11)}else{_this11.h["pow"]=v11}var v12=new openfl_utils__$AGALMiniAssembler_OpCode("log",2,12,0);var _this12=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["log"]!=null){_this12.setReserved("log",v12)}else{_this12.h["log"]=v12}var v13=new openfl_utils__$AGALMiniAssembler_OpCode("exp",2,13,0);var _this13=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["exp"]!=null){_this13.setReserved("exp",v13)}else{_this13.h["exp"]=v13}var v14=new openfl_utils__$AGALMiniAssembler_OpCode("nrm",2,14,0);var _this14=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["nrm"]!=null){_this14.setReserved("nrm",v14)}else{_this14.h["nrm"]=v14}var v15=new openfl_utils__$AGALMiniAssembler_OpCode("sin",2,15,0);var _this15=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sin"]!=null){_this15.setReserved("sin",v15)}else{_this15.h["sin"]=v15}var v16=new openfl_utils__$AGALMiniAssembler_OpCode("cos",2,16,0);var _this16=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["cos"]!=null){_this16.setReserved("cos",v16)}else{_this16.h["cos"]=v16}var v17=new openfl_utils__$AGALMiniAssembler_OpCode("crs",3,17,0);var _this17=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["crs"]!=null){_this17.setReserved("crs",v17)}else{_this17.h["crs"]=v17}var v18=new openfl_utils__$AGALMiniAssembler_OpCode("dp3",3,18,0);var _this18=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["dp3"]!=null){_this18.setReserved("dp3",v18)}else{_this18.h["dp3"]=v18}var v19=new openfl_utils__$AGALMiniAssembler_OpCode("dp4",3,19,0);var _this19=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["dp4"]!=null){_this19.setReserved("dp4",v19)}else{_this19.h["dp4"]=v19}var v20=new openfl_utils__$AGALMiniAssembler_OpCode("abs",2,20,0);var _this20=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["abs"]!=null){_this20.setReserved("abs",v20)}else{_this20.h["abs"]=v20}var v21=new openfl_utils__$AGALMiniAssembler_OpCode("neg",2,21,0);var _this21=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["neg"]!=null){_this21.setReserved("neg",v21)}else{_this21.h["neg"]=v21}var v22=new openfl_utils__$AGALMiniAssembler_OpCode("sat",2,22,0);var _this22=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sat"]!=null){_this22.setReserved("sat",v22)}else{_this22.h["sat"]=v22}var v23=new openfl_utils__$AGALMiniAssembler_OpCode("m33",3,23,16);var _this23=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["m33"]!=null){_this23.setReserved("m33",v23)}else{_this23.h["m33"]=v23}var v24=new openfl_utils__$AGALMiniAssembler_OpCode("m44",3,24,16);var _this24=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["m44"]!=null){_this24.setReserved("m44",v24)}else{_this24.h["m44"]=v24}var v25=new openfl_utils__$AGALMiniAssembler_OpCode("m34",3,25,16);var _this25=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["m34"]!=null){_this25.setReserved("m34",v25)}else{_this25.h["m34"]=v25}var v26=new openfl_utils__$AGALMiniAssembler_OpCode("ddx",2,26,288);var _this26=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ddx"]!=null){_this26.setReserved("ddx",v26)}else{_this26.h["ddx"]=v26}var v27=new openfl_utils__$AGALMiniAssembler_OpCode("ddy",2,27,288);var _this27=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ddy"]!=null){_this27.setReserved("ddy",v27)}else{_this27.h["ddy"]=v27}var v28=new openfl_utils__$AGALMiniAssembler_OpCode("ife",2,28,897);var _this28=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ife"]!=null){_this28.setReserved("ife",v28)}else{_this28.h["ife"]=v28}var v29=new openfl_utils__$AGALMiniAssembler_OpCode("ine",2,29,897);var _this29=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ine"]!=null){_this29.setReserved("ine",v29)}else{_this29.h["ine"]=v29}var v30=new openfl_utils__$AGALMiniAssembler_OpCode("ifg",2,30,897);var _this30=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ifg"]!=null){_this30.setReserved("ifg",v30)}else{_this30.h["ifg"]=v30}var v31=new openfl_utils__$AGALMiniAssembler_OpCode("ifl",2,31,897);var _this31=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["ifl"]!=null){_this31.setReserved("ifl",v31)}else{_this31.h["ifl"]=v31}var v32=new openfl_utils__$AGALMiniAssembler_OpCode("els",0,32,1921);var _this32=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["els"]!=null){_this32.setReserved("els",v32)}else{_this32.h["els"]=v32}var v33=new openfl_utils__$AGALMiniAssembler_OpCode("eif",0,33,1409);var _this33=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["eif"]!=null){_this33.setReserved("eif",v33)}else{_this33.h["eif"]=v33}var v34=new openfl_utils__$AGALMiniAssembler_OpCode("kil",1,39,160);var _this34=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["kil"]!=null){_this34.setReserved("kil",v34)}else{_this34.h["kil"]=v34}var v35=new openfl_utils__$AGALMiniAssembler_OpCode("tex",3,40,40);var _this35=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["tex"]!=null){_this35.setReserved("tex",v35)}else{_this35.h["tex"]=v35}var v36=new openfl_utils__$AGALMiniAssembler_OpCode("sge",3,41,0);var _this36=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sge"]!=null){_this36.setReserved("sge",v36)}else{_this36.h["sge"]=v36}var v37=new openfl_utils__$AGALMiniAssembler_OpCode("slt",3,42,0);var _this37=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["slt"]!=null){_this37.setReserved("slt",v37)}else{_this37.h["slt"]=v37}var v38=new openfl_utils__$AGALMiniAssembler_OpCode("sgn",2,43,0);var _this38=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sgn"]!=null){_this38.setReserved("sgn",v38)}else{_this38.h["sgn"]=v38}var v39=new openfl_utils__$AGALMiniAssembler_OpCode("seq",3,44,0);var _this39=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["seq"]!=null){_this39.setReserved("seq",v39)}else{_this39.h["seq"]=v39}var v40=new openfl_utils__$AGALMiniAssembler_OpCode("sne",3,45,0);var _this40=openfl_utils_AGALMiniAssembler.OPMAP;if(__map_reserved["sne"]!=null){_this40.setReserved("sne",v40)}else{_this40.h["sne"]=v40}var v41=new openfl_utils__$AGALMiniAssembler_Sampler("rgba",8,0);var _this41=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["rgba"]!=null){_this41.setReserved("rgba",v41)}else{_this41.h["rgba"]=v41}var v42=new openfl_utils__$AGALMiniAssembler_Sampler("compressed",8,1);var _this42=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["compressed"]!=null){_this42.setReserved("compressed",v42)}else{_this42.h["compressed"]=v42}var v43=new openfl_utils__$AGALMiniAssembler_Sampler("compressedalpha",8,2);var _this43=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["compressedalpha"]!=null){_this43.setReserved("compressedalpha",v43)}else{_this43.h["compressedalpha"]=v43}var v44=new openfl_utils__$AGALMiniAssembler_Sampler("dxt1",8,1);var _this44=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["dxt1"]!=null){_this44.setReserved("dxt1",v44)}else{_this44.h["dxt1"]=v44}var v45=new openfl_utils__$AGALMiniAssembler_Sampler("dxt5",8,2);var _this45=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["dxt5"]!=null){_this45.setReserved("dxt5",v45)}else{_this45.h["dxt5"]=v45}var v46=new openfl_utils__$AGALMiniAssembler_Sampler("video",8,3);var _this46=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["video"]!=null){_this46.setReserved("video",v46)}else{_this46.h["video"]=v46}var v47=new openfl_utils__$AGALMiniAssembler_Sampler("2d",12,0);var _this47=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["2d"]!=null){_this47.setReserved("2d",v47)}else{_this47.h["2d"]=v47}var v48=new openfl_utils__$AGALMiniAssembler_Sampler("3d",12,2);var _this48=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["3d"]!=null){_this48.setReserved("3d",v48)}else{_this48.h["3d"]=v48}var v49=new openfl_utils__$AGALMiniAssembler_Sampler("cube",12,1);var _this49=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["cube"]!=null){_this49.setReserved("cube",v49)}else{_this49.h["cube"]=v49}var v50=new openfl_utils__$AGALMiniAssembler_Sampler("mipnearest",24,1);var _this50=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["mipnearest"]!=null){_this50.setReserved("mipnearest",v50)}else{_this50.h["mipnearest"]=v50}var v51=new openfl_utils__$AGALMiniAssembler_Sampler("miplinear",24,2);var _this51=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["miplinear"]!=null){_this51.setReserved("miplinear",v51)}else{_this51.h["miplinear"]=v51}var v52=new openfl_utils__$AGALMiniAssembler_Sampler("mipnone",24,0);var _this52=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["mipnone"]!=null){_this52.setReserved("mipnone",v52)}else{_this52.h["mipnone"]=v52}var v53=new openfl_utils__$AGALMiniAssembler_Sampler("nomip",24,0);var _this53=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["nomip"]!=null){_this53.setReserved("nomip",v53)}else{_this53.h["nomip"]=v53}var v54=new openfl_utils__$AGALMiniAssembler_Sampler("nearest",28,0);var _this54=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["nearest"]!=null){_this54.setReserved("nearest",v54)}else{_this54.h["nearest"]=v54}var v55=new openfl_utils__$AGALMiniAssembler_Sampler("linear",28,1);var _this55=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["linear"]!=null){_this55.setReserved("linear",v55)}else{_this55.h["linear"]=v55}var v56=new openfl_utils__$AGALMiniAssembler_Sampler("anisotropic2x",28,2);var _this56=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["anisotropic2x"]!=null){_this56.setReserved("anisotropic2x",v56)}else{_this56.h["anisotropic2x"]=v56}var v57=new openfl_utils__$AGALMiniAssembler_Sampler("anisotropic4x",28,3);var _this57=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["anisotropic4x"]!=null){_this57.setReserved("anisotropic4x",v57)}else{_this57.h["anisotropic4x"]=v57}var v58=new openfl_utils__$AGALMiniAssembler_Sampler("anisotropic8x",28,4);var _this58=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["anisotropic8x"]!=null){_this58.setReserved("anisotropic8x",v58)}else{_this58.h["anisotropic8x"]=v58}var v59=new openfl_utils__$AGALMiniAssembler_Sampler("anisotropic16x",28,5);var _this59=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["anisotropic16x"]!=null){_this59.setReserved("anisotropic16x",v59)}else{_this59.h["anisotropic16x"]=v59}var v60=new openfl_utils__$AGALMiniAssembler_Sampler("centroid",16,1);var _this60=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["centroid"]!=null){_this60.setReserved("centroid",v60)}else{_this60.h["centroid"]=v60}var v61=new openfl_utils__$AGALMiniAssembler_Sampler("single",16,2);var _this61=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["single"]!=null){_this61.setReserved("single",v61)}else{_this61.h["single"]=v61}var v62=new openfl_utils__$AGALMiniAssembler_Sampler("ignoresampler",16,4);var _this62=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["ignoresampler"]!=null){_this62.setReserved("ignoresampler",v62)}else{_this62.h["ignoresampler"]=v62}var v63=new openfl_utils__$AGALMiniAssembler_Sampler("repeat",20,1);var _this63=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["repeat"]!=null){_this63.setReserved("repeat",v63)}else{_this63.h["repeat"]=v63}var v64=new openfl_utils__$AGALMiniAssembler_Sampler("wrap",20,1);var _this64=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["wrap"]!=null){_this64.setReserved("wrap",v64)}else{_this64.h["wrap"]=v64}var v65=new openfl_utils__$AGALMiniAssembler_Sampler("clamp",20,0);var _this65=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["clamp"]!=null){_this65.setReserved("clamp",v65)}else{_this65.h["clamp"]=v65}var v66=new openfl_utils__$AGALMiniAssembler_Sampler("clamp_u_repeat_v",20,2);var _this66=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["clamp_u_repeat_v"]!=null){_this66.setReserved("clamp_u_repeat_v",v66)}else{_this66.h["clamp_u_repeat_v"]=v66}var v67=new openfl_utils__$AGALMiniAssembler_Sampler("repeat_u_clamp_v",20,3);var _this67=openfl_utils_AGALMiniAssembler.SAMPLEMAP;if(__map_reserved["repeat_u_clamp_v"]!=null){_this67.setReserved("repeat_u_clamp_v",v67)}else{_this67.h["repeat_u_clamp_v"]=v67}};openfl_utils_AGALMiniAssembler.prototype={agalcode:null,error:null,verbose:null,debugEnabled:null,assemble:function(mode,source,version,ignoreLimits){if(ignoreLimits==null){ignoreLimits=false}if(version==null){version=1}var start=openfl_Lib.getTimer();this.agalcode=new openfl_utils_ByteArrayData(0);this.error="";var isFrag=false;if(mode=="fragment"){isFrag=true}else if(mode!="vertex"){this.error='ERROR: mode needs to be "'+"fragment"+'" or "'+"vertex"+'" but is "'+mode+'".'}this.agalcode.__endian=1;this.agalcode.writeByte(160);this.agalcode.writeUnsignedInt(version);this.agalcode.writeByte(161);this.agalcode.writeByte(isFrag?1:0);this.initregmap(version,ignoreLimits);var lines=StringTools.replace(source,"\r","\n").split("\n");var nops=0;var lng=lines.length;var reg1=new EReg("<.*>","g");var reg2=new EReg("([\\w\\.\\-\\+]+)","gi");var reg3=new EReg("^\\w{3}","ig");var reg4=new EReg("vc\\[([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw](\\+\\d{1,3})?)?\\](\\.[xyzw]{1,4})?|([vofi][acostdip]?[d]?)(\\d*)?(\\.[xyzw]{1,4})?","gi");var reg5=new EReg("\\[.*\\]","ig");var reg6=new EReg("^\\b[A-Za-z]{1,3}","ig");var reg7=new EReg("\\d+","");var reg8=new EReg("(\\.[xyzw]{1,4})","");var reg9=new EReg("[A-Za-z]{1,3}","ig");var reg10=new EReg("(\\.[xyzw]{1,1})","");var reg11=new EReg("\\+\\d{1,3}","ig");var i=0;while(i<lng&&this.error==""){var line=StringTools.trim(lines[i]);var startcomment=line.indexOf("//");if(startcomment!=-1){line=HxOverrides.substr(line,0,startcomment)}var optsi=reg1.match(line)?reg1.matchedPos().pos:-1;var opts=null;if(optsi!=-1){opts=this.match(HxOverrides.substr(line,optsi,null),reg2);line=HxOverrides.substr(line,0,optsi)}var opCode=null;var opFound=null;if(reg3.match(line)){opCode=reg3.matched(0);var _this=openfl_utils_AGALMiniAssembler.OPMAP;opFound=__map_reserved[opCode]!=null?_this.getReserved(opCode):_this.h[opCode]}if(opFound==null){if(line.length>=3){lime_utils_Log.warn("warning: bad line "+i+": "+lines[i],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:262,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}++i;continue}if(this.debugEnabled){lime_utils_Log.info(opFound,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:272,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}if(opFound==null){if(line.length>=3){lime_utils_Log.warn("warning: bad line "+i+": "+lines[i],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:279,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}++i;continue}line=HxOverrides.substr(line,line.indexOf(opFound.name)+opFound.name.length,null);if((opFound.flags&256)!=0&&version<2){this.error="error: opcode requires version 2.";break}if((opFound.flags&64)!=0&&isFrag){this.error="error: opcode is only allowed in vertex programs.";break}if((opFound.flags&32)!=0&&!isFrag){this.error="error: opcode is only allowed in fragment programs.";break}if(this.verbose){lime_utils_Log.info("emit opcode="+Std.string(opFound),{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:308,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}this.agalcode.writeUnsignedInt(opFound.emitCode);++nops;if(nops>4096){this.error="error: too many opcodes. maximum is "+4096+".";break}var regs=this.match(line,reg4);if(regs.length!=opFound.numRegister){this.error="error: wrong number of operands. found "+regs.length+" but expected "+opFound.numRegister+".";break}var badreg=false;var pad=160;var regLength=regs.length;var _g=0;while(_g<regLength){var j=_g++;var isRelative=false;var relreg=this.match(regs[j],reg5);if(relreg.length>0){regs[j]=StringTools.replace(regs[j],relreg[0],"0");if(this.verbose){lime_utils_Log.info("IS REL",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:344,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}isRelative=true}var res=this.match(regs[j],reg6);if(res.length==0){this.error="error: could not parse operand "+j+" ("+regs[j]+").";badreg=true;break}var _this1=openfl_utils_AGALMiniAssembler.REGMAP;var key=res[0];var regFound=__map_reserved[key]!=null?_this1.getReserved(key):_this1.h[key];if(this.debugEnabled){lime_utils_Log.info(regFound,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:363,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}if(regFound==null){this.error="error: could not find register name for operand "+j+" ("+regs[j]+").";badreg=true;break}if(isFrag){if((regFound.flags&32)==0){this.error="error: register operand "+j+" ("+regs[j]+") only allowed in vertex programs.";badreg=true;break}if(isRelative){this.error="error: register operand "+j+" ("+regs[j]+") relative adressing not allowed in fragment programs.";badreg=true;break}}else if((regFound.flags&64)==0){this.error="error: register operand "+j+" ("+regs[j]+") only allowed in fragment programs.";badreg=true;break}regs[j]=HxOverrides.substr(regs[j],regs[j].indexOf(regFound.name)+regFound.name.length,null);var idxmatch=isRelative?this.match(relreg[0],reg7):this.match(regs[j],reg7);var regidx=0;if(idxmatch.length>0){regidx=Std.parseInt(idxmatch[0])}if(_$UInt_UInt_$Impl_$.gt(regidx,regFound.range)){var this1=regFound.range+1;this.error="error: register operand "+j+" ("+regs[j]+") index exceeds limit of "+Std.string(this1==null?null:_$UInt_UInt_$Impl_$.toFloat(this1))+".";badreg=true;break}var regmask=0;var maskmatch=this.match(regs[j],reg8);var isDest=j==0&&(opFound.flags&128)==0;var isSampler=j==2&&(opFound.flags&8)!=0;var reltype=0;var relsel=0;var reloffset=0;if(isDest&&isRelative){this.error="error: relative can not be destination";badreg=true;break}if(maskmatch.length>0){regmask=0;var cv=0;var maskLength=maskmatch[0].length;var k=1;while(k<maskLength){cv=HxOverrides.cca(maskmatch[0],k)-120;if(_$UInt_UInt_$Impl_$.gt(cv,2)){cv=3}if(isDest){regmask|=1<<cv}else{regmask=regmask|cv<<(k-1<<1)}++k}if(!isDest){while(k<=4){regmask=regmask|cv<<(k-1<<1);++k}}}else{regmask=isDest?15:228}if(isRelative){var relname=this.match(relreg[0],reg9);var _this2=openfl_utils_AGALMiniAssembler.REGMAP;var key1=relname[0];var regFoundRel=__map_reserved[key1]!=null?_this2.getReserved(key1):_this2.h[key1];if(regFoundRel==null){this.error="error: bad index register";badreg=true;break}reltype=regFoundRel.emitCode;var selmatch=this.match(relreg[0],reg10);if(selmatch.length==0){this.error="error: bad index register select";badreg=true;break}relsel=HxOverrides.cca(selmatch[0],1)-120;if(_$UInt_UInt_$Impl_$.gt(relsel,2)){relsel=3}var relofs=this.match(relreg[0],reg11);if(relofs.length>0){reloffset=Std.parseInt(relofs[0])}if(reloffset<0||reloffset>255){this.error="error: index offset "+reloffset+" out of bounds. [0..255]";badreg=true;break}if(this.verbose){lime_utils_Log.info("RELATIVE: type="+reltype+"=="+relname[0]+" sel="+Std.string(relsel==null?null:_$UInt_UInt_$Impl_$.toFloat(relsel))+"=="+selmatch[0]+" idx="+Std.string(regidx==null?null:_$UInt_UInt_$Impl_$.toFloat(regidx))+" offset="+reloffset,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:518,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}}if(this.verbose){lime_utils_Log.info("  emit argcode="+Std.string(regFound)+"["+Std.string(regidx==null?null:_$UInt_UInt_$Impl_$.toFloat(regidx))+"]["+regmask+"]",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:525,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}if(isDest){this.agalcode.writeShort(regidx);this.agalcode.writeByte(regmask);this.agalcode.writeByte(regFound.emitCode);pad-=32}else if(isSampler){if(this.verbose){lime_utils_Log.info("  emit sampler",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:541,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}var samplerbits=5;var bias=0;var _g1=0;var _g11=opts==null?0:opts.length;while(_g1<_g11){var k1=_g1++;if(this.verbose){lime_utils_Log.info("    opt: "+opts[k1],{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:552,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}var _this3=openfl_utils_AGALMiniAssembler.SAMPLEMAP;var key2=opts[k1];var optfound=__map_reserved[key2]!=null?_this3.getReserved(key2):_this3.h[key2];if(optfound==null){bias=parseFloat(opts[k1]);if(this.verbose){lime_utils_Log.info("    bias: "+bias,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:565,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}}else{if(optfound.flag!=16){samplerbits&=~(15<<optfound.flag)}samplerbits=samplerbits|optfound.mask<<optfound.flag}}this.agalcode.writeShort(regidx);this.agalcode.writeByte(bias*8|0);this.agalcode.writeByte(0);this.agalcode.writeUnsignedInt(samplerbits);if(this.verbose){lime_utils_Log.info("    bits: "+(samplerbits-5),{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:586,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}pad-=64}else{if(j==0){this.agalcode.writeUnsignedInt(0);pad-=32}this.agalcode.writeShort(regidx);this.agalcode.writeByte(reloffset);this.agalcode.writeByte(regmask);this.agalcode.writeByte(regFound.emitCode);this.agalcode.writeByte(reltype);this.agalcode.writeShort(isRelative?relsel|32768:0);pad-=64}}var j1=0;while(j1<pad){this.agalcode.writeByte(0);j1+=8}if(badreg){break}++i}if(this.error!=""){this.error+="\n  at line "+i+" "+lines[i];openfl_utils__$ByteArray_ByteArray_$Impl_$.set_length(this.agalcode,0);lime_utils_Log.info(this.error,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:631,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}if(this.debugEnabled){var dbgLine="generated bytecode:";var _g2=0;var _g12=openfl_utils__$ByteArray_ByteArray_$Impl_$.get_length(this.agalcode);while(_g2<_g12){var index=_g2++;if(index%16==0){dbgLine+="\n"}if(index%4==0){dbgLine+=" "}var byteStr=StringTools.hex(this.agalcode.b[index],2);if(byteStr.length<2){byteStr="0"+byteStr}dbgLine+=byteStr}lime_utils_Log.info(dbgLine,{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:662,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}if(this.verbose){lime_utils_Log.info("AGALMiniAssembler.assemble time: "+(openfl_Lib.getTimer()-start)/1e3+"s",{fileName:"openfl/utils/AGALMiniAssembler.hx",lineNumber:667,className:"openfl.utils.AGALMiniAssembler",methodName:"assemble"})}return this.agalcode},initregmap:function(version,ignorelimits){var v=new openfl_utils__$AGALMiniAssembler_Register("va","vertex attribute",0,ignorelimits?1024:version==1||version==2?7:15,66);var _this=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["va"]!=null){_this.setReserved("va",v)}else{_this.h["va"]=v}var v1=new openfl_utils__$AGALMiniAssembler_Register("vc","vertex constant",1,ignorelimits?1024:version==1?127:249,66);var _this1=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["vc"]!=null){_this1.setReserved("vc",v1)}else{_this1.h["vc"]=v1}var v2=new openfl_utils__$AGALMiniAssembler_Register("vt","vertex temporary",2,ignorelimits?1024:version==1?7:25,67);var _this2=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["vt"]!=null){_this2.setReserved("vt",v2)}else{_this2.h["vt"]=v2}var v3=new openfl_utils__$AGALMiniAssembler_Register("vo","vertex output",3,ignorelimits?1024:0,65);var _this3=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["vo"]!=null){_this3.setReserved("vo",v3)}else{_this3.h["vo"]=v3}var v4=new openfl_utils__$AGALMiniAssembler_Register("vi","varying",4,ignorelimits?1024:version==1?7:9,99);var _this4=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["vi"]!=null){_this4.setReserved("vi",v4)}else{_this4.h["vi"]=v4}var v5=new openfl_utils__$AGALMiniAssembler_Register("fc","fragment constant",1,ignorelimits?1024:version==1?27:version==2?63:199,34);var _this5=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["fc"]!=null){_this5.setReserved("fc",v5)}else{_this5.h["fc"]=v5}var v6=new openfl_utils__$AGALMiniAssembler_Register("ft","fragment temporary",2,ignorelimits?1024:version==1?7:25,35);var _this6=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["ft"]!=null){_this6.setReserved("ft",v6)}else{_this6.h["ft"]=v6}var v7=new openfl_utils__$AGALMiniAssembler_Register("fs","texture sampler",5,ignorelimits?1024:7,34);var _this7=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["fs"]!=null){_this7.setReserved("fs",v7)}else{_this7.h["fs"]=v7}var v8=new openfl_utils__$AGALMiniAssembler_Register("fo","fragment output",3,ignorelimits?1024:version==1?0:3,33);var _this8=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["fo"]!=null){_this8.setReserved("fo",v8)}else{_this8.h["fo"]=v8}var v9=new openfl_utils__$AGALMiniAssembler_Register("fd","fragment depth output",6,ignorelimits?1024:version==1?-1:0,33);var _this9=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["fd"]!=null){_this9.setReserved("fd",v9)}else{_this9.h["fd"]=v9}var v10=new openfl_utils__$AGALMiniAssembler_Register("iid","instance id",7,ignorelimits?1024:0,66);var _this10=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["iid"]!=null){_this10.setReserved("iid",v10)}else{_this10.h["iid"]=v10}var _this11=openfl_utils_AGALMiniAssembler.REGMAP;var v11=__map_reserved["vo"]!=null?_this11.getReserved("vo"):_this11.h["vo"];var _this12=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["op"]!=null){_this12.setReserved("op",v11)}else{_this12.h["op"]=v11}var _this13=openfl_utils_AGALMiniAssembler.REGMAP;var v12=__map_reserved["vi"]!=null?_this13.getReserved("vi"):_this13.h["vi"];var _this14=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["i"]!=null){_this14.setReserved("i",v12)}else{_this14.h["i"]=v12}var _this15=openfl_utils_AGALMiniAssembler.REGMAP;var v13=__map_reserved["vi"]!=null?_this15.getReserved("vi"):_this15.h["vi"];var _this16=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["v"]!=null){_this16.setReserved("v",v13)}else{_this16.h["v"]=v13}var _this17=openfl_utils_AGALMiniAssembler.REGMAP;var v14=__map_reserved["fo"]!=null?_this17.getReserved("fo"):_this17.h["fo"];var _this18=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["oc"]!=null){_this18.setReserved("oc",v14)}else{_this18.h["oc"]=v14}var _this19=openfl_utils_AGALMiniAssembler.REGMAP;var v15=__map_reserved["fd"]!=null?_this19.getReserved("fd"):_this19.h["fd"];var _this20=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["od"]!=null){_this20.setReserved("od",v15)}else{_this20.h["od"]=v15}var _this21=openfl_utils_AGALMiniAssembler.REGMAP;var v16=__map_reserved["vi"]!=null?_this21.getReserved("vi"):_this21.h["vi"];var _this22=openfl_utils_AGALMiniAssembler.REGMAP;if(__map_reserved["fi"]!=null){_this22.setReserved("fi",v16)}else{_this22.h["fi"]=v16}},match:function(value,reg){var matches=[];var index=0;var match;while(reg.matchSub(value,index)){match=reg.matched(0);matches.push(match);index=reg.matchedPos().pos+match.length}return matches},__class__:openfl_utils_AGALMiniAssembler};var openfl_utils__$AGALMiniAssembler_OpCode=function(name,numRegister,emitCode,flags){this.name=name;this.numRegister=numRegister;this.emitCode=emitCode;this.flags=flags};$hxClasses["openfl.utils._AGALMiniAssembler.OpCode"]=openfl_utils__$AGALMiniAssembler_OpCode;openfl_utils__$AGALMiniAssembler_OpCode.__name__="openfl.utils._AGALMiniAssembler.OpCode";openfl_utils__$AGALMiniAssembler_OpCode.prototype={emitCode:null,flags:null,name:null,numRegister:null,__class__:openfl_utils__$AGALMiniAssembler_OpCode};var openfl_utils__$AGALMiniAssembler_Register=function(name,longName,emitCode,range,flags){this.name=name;this.longName=longName;this.emitCode=emitCode;this.range=range;this.flags=flags};$hxClasses["openfl.utils._AGALMiniAssembler.Register"]=openfl_utils__$AGALMiniAssembler_Register;openfl_utils__$AGALMiniAssembler_Register.__name__="openfl.utils._AGALMiniAssembler.Register";openfl_utils__$AGALMiniAssembler_Register.prototype={emitCode:null,name:null,longName:null,flags:null,range:null,toString:function(){var this1=this.emitCode;var this2=this.range;var this3=this.flags;return'[Register name="'+this.name+'", longName="'+this.longName+'", emitCode='+Std.string(this1==null?null:_$UInt_UInt_$Impl_$.toFloat(this1))+", range="+Std.string(this2==null?null:_$UInt_UInt_$Impl_$.toFloat(this2))+", flags="+Std.string(this3==null?null:_$UInt_UInt_$Impl_$.toFloat(this3))+"]"},__class__:openfl_utils__$AGALMiniAssembler_Register};var openfl_utils__$AGALMiniAssembler_Sampler=function(name,flag,mask){this.name=name;this.flag=flag;this.mask=mask};$hxClasses["openfl.utils._AGALMiniAssembler.Sampler"]=openfl_utils__$AGALMiniAssembler_Sampler;openfl_utils__$AGALMiniAssembler_Sampler.__name__="openfl.utils._AGALMiniAssembler.Sampler";openfl_utils__$AGALMiniAssembler_Sampler.prototype={flag:null,mask:null,name:null,__class__:openfl_utils__$AGALMiniAssembler_Sampler};var openfl_utils_IAssetCache=function(){};$hxClasses["openfl.utils.IAssetCache"]=openfl_utils_IAssetCache;openfl_utils_IAssetCache.__name__="openfl.utils.IAssetCache";openfl_utils_IAssetCache.__isInterface__=true;openfl_utils_IAssetCache.prototype={get_enabled:null,getBitmapData:null,getSound:null,hasBitmapData:null,hasSound:null,removeBitmapData:null,setBitmapData:null,setSound:null,__class__:openfl_utils_IAssetCache,__properties__:{get_enabled:"get_enabled"}};var openfl_utils_AssetCache=function(){this.__enabled=true;this.bitmapData=new haxe_ds_StringMap;this.font=new haxe_ds_StringMap;this.sound=new haxe_ds_StringMap};$hxClasses["openfl.utils.AssetCache"]=openfl_utils_AssetCache;openfl_utils_AssetCache.__name__="openfl.utils.AssetCache";openfl_utils_AssetCache.__interfaces__=[openfl_utils_IAssetCache];openfl_utils_AssetCache.prototype={bitmapData:null,font:null,sound:null,__enabled:null,getBitmapData:function(id){var _this=this.bitmapData;if(__map_reserved[id]!=null){return _this.getReserved(id)}else{return _this.h[id]}},getSound:function(id){var _this=this.sound;if(__map_reserved[id]!=null){return _this.getReserved(id)}else{return _this.h[id]}},hasBitmapData:function(id){var _this=this.bitmapData;if(__map_reserved[id]!=null){return _this.existsReserved(id)}else{return _this.h.hasOwnProperty(id)}},hasSound:function(id){var _this=this.sound;if(__map_reserved[id]!=null){return _this.existsReserved(id)}else{return _this.h.hasOwnProperty(id)}},removeBitmapData:function(id){lime_utils_Assets.cache.image.remove(id);return this.bitmapData.remove(id)},setBitmapData:function(id,bitmapData){var _this=this.bitmapData;if(__map_reserved[id]!=null){_this.setReserved(id,bitmapData)}else{_this.h[id]=bitmapData}},setSound:function(id,sound){var _this=this.sound;if(__map_reserved[id]!=null){_this.setReserved(id,sound)}else{_this.h[id]=sound}},get_enabled:function(){return this.__enabled},__class__:openfl_utils_AssetCache,__properties__:{get_enabled:"get_enabled"}};var openfl_utils_Assets=function(){};$hxClasses["openfl.utils.Assets"]=openfl_utils_Assets;openfl_utils_Assets.__name__="openfl.utils.Assets";openfl_utils_Assets.exists=function(id,type){return lime_utils_Assets.exists(id,type)};openfl_utils_Assets.getBitmapData=function(id,useCache){if(useCache==null){useCache=true}if(useCache&&openfl_utils_Assets.cache.get_enabled()&&openfl_utils_Assets.cache.hasBitmapData(id)){var bitmapData=openfl_utils_Assets.cache.getBitmapData(id);if(openfl_utils_Assets.isValidBitmapData(bitmapData)){return bitmapData}}var image=lime_utils_Assets.getImage(id,false);if(image!=null){var bitmapData1=openfl_display_BitmapData.fromImage(image);if(useCache&&openfl_utils_Assets.cache.get_enabled()){openfl_utils_Assets.cache.setBitmapData(id,bitmapData1)}return bitmapData1}return null};openfl_utils_Assets.getLibrary=function(name){return lime_utils_Assets.getLibrary(name)};openfl_utils_Assets.getMovieClip=function(id){var libraryName=id.substring(0,id.indexOf(":"));var symbolName=HxOverrides.substr(id,id.indexOf(":")+1,null);var limeLibrary=openfl_utils_Assets.getLibrary(libraryName);if(limeLibrary!=null){if(limeLibrary instanceof openfl_utils_AssetLibrary){var library=limeLibrary;if(library.exists(symbolName,"MOVIE_CLIP")){if(library.isLocal(symbolName,"MOVIE_CLIP")){return library.getMovieClip(symbolName)}else{lime_utils_Log.error('MovieClip asset "'+id+'" exists, but only asynchronously',{fileName:"openfl/utils/Assets.hx",lineNumber:207,className:"openfl.utils.Assets",methodName:"getMovieClip"});return null}}}lime_utils_Log.error('There is no MovieClip asset with an ID of "'+id+'"',{fileName:"openfl/utils/Assets.hx",lineNumber:213,className:"openfl.utils.Assets",methodName:"getMovieClip"})}else{lime_utils_Log.error('There is no asset library named "'+libraryName+'"',{fileName:"openfl/utils/Assets.hx",lineNumber:217,className:"openfl.utils.Assets",methodName:"getMovieClip"})}return null};openfl_utils_Assets.getSound=function(id,useCache){if(useCache==null){useCache=true}if(useCache&&openfl_utils_Assets.cache.get_enabled()&&openfl_utils_Assets.cache.hasSound(id)){var sound=openfl_utils_Assets.cache.getSound(id);if(openfl_utils_Assets.isValidSound(sound)){return sound}}var buffer=lime_utils_Assets.getAudioBuffer(id,false);if(buffer!=null){var sound1=openfl_media_Sound.fromAudioBuffer(buffer);if(useCache&&openfl_utils_Assets.cache.get_enabled()){openfl_utils_Assets.cache.setSound(id,sound1)}return sound1}return null};openfl_utils_Assets.getText=function(id){return lime_utils_Assets.getText(id)};openfl_utils_Assets.isValidBitmapData=function(bitmapData){return bitmapData!=null&&bitmapData.image!=null};openfl_utils_Assets.isValidSound=function(sound){return true};var openfl_utils__$ByteArray_ByteArray_$Impl_$={};$hxClasses["openfl.utils._ByteArray.ByteArray_Impl_"]=openfl_utils__$ByteArray_ByteArray_$Impl_$;openfl_utils__$ByteArray_ByteArray_$Impl_$.__name__="openfl.utils._ByteArray.ByteArray_Impl_";openfl_utils__$ByteArray_ByteArray_$Impl_$.__properties__={set_length:"set_length",get_length:"get_length"};openfl_utils__$ByteArray_ByteArray_$Impl_$.fromBytes=function(bytes){if(bytes==null){return null}if(bytes instanceof openfl_utils_ByteArrayData){return bytes}else{return openfl_utils_ByteArrayData.fromBytes(bytes)}};openfl_utils__$ByteArray_ByteArray_$Impl_$.get_length=function(this1){if(this1==null){return 0}else{return this1.length}};openfl_utils__$ByteArray_ByteArray_$Impl_$.set_length=function(this1,value){if(value>0){this1.__resize(value);if(value<this1.position){this1.position=value}}this1.length=value;return value};var openfl_utils_IDataOutput=function(){};$hxClasses["openfl.utils.IDataOutput"]=openfl_utils_IDataOutput;openfl_utils_IDataOutput.__name__="openfl.utils.IDataOutput";openfl_utils_IDataOutput.__isInterface__=true;openfl_utils_IDataOutput.prototype={__class__:openfl_utils_IDataOutput};var openfl_utils_IDataInput=function(){};$hxClasses["openfl.utils.IDataInput"]=openfl_utils_IDataInput;openfl_utils_IDataInput.__name__="openfl.utils.IDataInput";openfl_utils_IDataInput.__isInterface__=true;openfl_utils_IDataInput.prototype={__class__:openfl_utils_IDataInput};var openfl_utils_ByteArrayData=function(length){if(length==null){length=0}haxe_io_Bytes.call(this,new haxe_io_Bytes(new ArrayBuffer(length)).b.buffer);this.__length=length;if(openfl_utils_ByteArrayData.__defaultEndian==null){if(lime_system_System.get_endianness()==lime_system_Endian.LITTLE_ENDIAN){openfl_utils_ByteArrayData.__defaultEndian=1}else{openfl_utils_ByteArrayData.__defaultEndian=0}}this.__endian=openfl_utils_ByteArrayData.__defaultEndian;this.objectEncoding=openfl_utils_ByteArrayData.defaultObjectEncoding;this.position=0};$hxClasses["openfl.utils.ByteArrayData"]=openfl_utils_ByteArrayData;openfl_utils_ByteArrayData.__name__="openfl.utils.ByteArrayData";openfl_utils_ByteArrayData.__interfaces__=[openfl_utils_IDataOutput,openfl_utils_IDataInput];openfl_utils_ByteArrayData.fromBytes=function(bytes){var result=new openfl_utils_ByteArrayData;result.__fromBytes(bytes);return result};openfl_utils_ByteArrayData.__super__=haxe_io_Bytes;openfl_utils_ByteArrayData.prototype=$extend(haxe_io_Bytes.prototype,{objectEncoding:null,position:null,__endian:null,__length:null,readByte:function(){var value=this.readUnsignedByte();if((value&128)!=0){return value-256}else{return value}},readInt:function(){var ch1=this.readUnsignedByte();var ch2=this.readUnsignedByte();var ch3=this.readUnsignedByte();var ch4=this.readUnsignedByte();if(this.__endian==1){return ch4<<24|ch3<<16|ch2<<8|ch1}else{return ch1<<24|ch2<<16|ch3<<8|ch4}},readUnsignedByte:function(){if(this.position<this.length){return this.b[this.position++]}else{throw new js__$Boot_HaxeError(new openfl_errors_EOFError)}},readUnsignedInt:function(){var ch1=this.readUnsignedByte();var ch2=this.readUnsignedByte();var ch3=this.readUnsignedByte();var ch4=this.readUnsignedByte();if(this.__endian==1){return ch4<<24|ch3<<16|ch2<<8|ch1}else{return ch1<<24|ch2<<16|ch3<<8|ch4}},readUnsignedShort:function(){var ch1=this.readUnsignedByte();var ch2=this.readUnsignedByte();if(this.__endian==1){return(ch2<<8)+ch1}else{return ch1<<8|ch2}},readUTF:function(){return this.readUTFBytes(this.readUnsignedShort())},readUTFBytes:function(length){if(this.position+length>this.length){throw new js__$Boot_HaxeError(new openfl_errors_EOFError)}this.position+=length;return this.getString(this.position-length,length)},writeByte:function(value){this.__resize(this.position+1);this.b[this.position++]=value&255&255},writeInt:function(value){this.__resize(this.position+4);if(this.__endian==1){this.b[this.position++]=value&255&255;this.b[this.position++]=value>>8&255&255;this.b[this.position++]=value>>16&255&255;this.b[this.position++]=value>>24&255&255}else{this.b[this.position++]=value>>24&255&255;this.b[this.position++]=value>>16&255&255;this.b[this.position++]=value>>8&255&255;this.b[this.position++]=value&255&255}},writeShort:function(value){this.__resize(this.position+2);if(this.__endian==1){this.b[this.position++]=value&255;this.b[this.position++]=value>>8&255}else{this.b[this.position++]=value>>8&255;this.b[this.position++]=value&255}},writeUnsignedInt:function(value){this.writeInt(value)},__fromBytes:function(bytes){this.b=bytes.b;this.__length=bytes.length;this.data=bytes.data;this.length=bytes.length},__resize:function(size){if(size>this.__length){var bytes=new haxe_io_Bytes(new ArrayBuffer((size+1)*3>>1));if(this.__length>0){var cacheLength=this.length;this.length=this.__length;bytes.blit(0,this,0,this.__length);this.length=cacheLength}this.b=bytes.b;this.__length=bytes.length;this.data=bytes.data}if(this.length<size){this.length=size}},__class__:openfl_utils_ByteArrayData});var haxe_lang_Iterator=function(){};$hxClasses["haxe.lang.Iterator"]=haxe_lang_Iterator;haxe_lang_Iterator.__name__="haxe.lang.Iterator";haxe_lang_Iterator.__isInterface__=true;haxe_lang_Iterator.prototype={hasNext:null,next:null,__class__:haxe_lang_Iterator};var haxe_lang_Iterable=function(){};$hxClasses["haxe.lang.Iterable"]=haxe_lang_Iterable;haxe_lang_Iterable.__name__="haxe.lang.Iterable";haxe_lang_Iterable.__isInterface__=true;haxe_lang_Iterable.prototype={iterator:null,__class__:haxe_lang_Iterable};var org_zamedev_particles_internal_TilemapExt=function(width,height,tileset,smoothing){openfl_display_Tilemap.call(this,width,height,tileset,smoothing)};$hxClasses["org.zamedev.particles.internal.TilemapExt"]=org_zamedev_particles_internal_TilemapExt;org_zamedev_particles_internal_TilemapExt.__name__="org.zamedev.particles.internal.TilemapExt";org_zamedev_particles_internal_TilemapExt.__super__=openfl_display_Tilemap;org_zamedev_particles_internal_TilemapExt.prototype=$extend(openfl_display_Tilemap.prototype,{__hitTest:function(x,y,shapeFlag,stack,interactiveOnly,hitObject){return false},__class__:org_zamedev_particles_internal_TilemapExt});var org_zamedev_particles_renderers_ParticleSystemRenderer=function(){};$hxClasses["org.zamedev.particles.renderers.ParticleSystemRenderer"]=org_zamedev_particles_renderers_ParticleSystemRenderer;org_zamedev_particles_renderers_ParticleSystemRenderer.__name__="org.zamedev.particles.renderers.ParticleSystemRenderer";org_zamedev_particles_renderers_ParticleSystemRenderer.__isInterface__=true;var org_zamedev_particles_renderers_TilemapParticleRenderer=function(manualUpdate){if(manualUpdate==null){manualUpdate=false}openfl_display_Sprite.call(this);this.manualUpdate=manualUpdate};$hxClasses["org.zamedev.particles.renderers.TilemapParticleRenderer"]=org_zamedev_particles_renderers_TilemapParticleRenderer;org_zamedev_particles_renderers_TilemapParticleRenderer.__name__="org.zamedev.particles.renderers.TilemapParticleRenderer";org_zamedev_particles_renderers_TilemapParticleRenderer.__interfaces__=[org_zamedev_particles_renderers_ParticleSystemRenderer];org_zamedev_particles_renderers_TilemapParticleRenderer.__super__=openfl_display_Sprite;org_zamedev_particles_renderers_TilemapParticleRenderer.prototype=$extend(openfl_display_Sprite.prototype,{manualUpdate:null,__class__:org_zamedev_particles_renderers_TilemapParticleRenderer});var project_data_MapReader=function(){};$hxClasses["project.data.MapReader"]=project_data_MapReader;project_data_MapReader.__name__="project.data.MapReader";project_data_MapReader.load=function(file){project_data_MapReader.loadedLevel=JSON.parse(openfl_utils_Assets.getText(file))};project_data_MapReader.unload=function(){project_data_MapReader.loadedLevel=null};project_data_MapReader.getLevelConditions=function(){var _g=new haxe_ds_StringMap;if(__map_reserved["maxShots"]!=null){_g.setReserved("maxShots",40)}else{_g.h["maxShots"]=40}if(__map_reserved["star1"]!=null){_g.setReserved("star1",30)}else{_g.h["star1"]=30}if(__map_reserved["star2"]!=null){_g.setReserved("star2",20)}else{_g.h["star2"]=20}if(__map_reserved["star3"]!=null){_g.setReserved("star3",10)}else{_g.h["star3"]=10}if(project_data_MapReader.loadedLevel.properties!=null){var p=project_data_MapReader.loadedLevel.properties;var _g1=0;var _g2=p.length;while(_g1<_g2){var i=_g1++;var key=p[i].name;var value=p[i].value;if(__map_reserved[key]!=null){_g.setReserved(key,value)}else{_g.h[key]=value}}}return _g};project_data_MapReader.getLayers=function(space,camera){var level=project_data_MapReader.loadedLevel;var retval=[];var specialFloor=new engine_tiles_SortableTileContainer(0,0);specialFloor.layerName="specialFloor";camera.boundsRight=level.width*64-32;camera.boundsBottom=level.height*64-32;var _g=0;var _g1=level.layers;while(_g<_g1.length){var layer=_g1[_g];++_g;if(layer.type=="tilelayer"){if(layer.offsety==null){layer.offsety=0}if(layer.offsetx==null){layer.offsetx=0}var tileLayer=new engine_tiles_SortableTileContainer(0,0);tileLayer.layerName=layer.name;var banisterSheet=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/banister.png"));banisterSheet.slice(4,4);var _g2=0;var _g11=level.width;while(_g2<_g11){var i=_g2++;var _g3=0;var _g12=level.height;while(_g3<_g12){var j=_g3++;var _g4=0;var _g13=level.tilesets.length;while(_g4<_g13){var t=_g4++;var graphicTileID=layer.data[i+j*layer.width]&project_data_MapReader.TILE_MASK;if(graphicTileID>=level.tilesets[t].firstgid&&(level.tilesets[t+1]==null||graphicTileID<level.tilesets[t+1].firstgid)){var tilesetName=level.tilesets[t].source.substring(level.tilesets[t].source.lastIndexOf("/")+1,level.tilesets[t].source.lastIndexOf("."));graphicTileID-=level.tilesets[t].firstgid;if(layer.name=="wall"){if(tilesetName=="banister"){var tile=new project_game_objects_Banister(graphicTileID,i*level.tilewidth+layer.offsetx,j*level.tileheight+layer.offsety,0,space);tile.set_tileset(banisterSheet);tile.set_x(i*level.tilewidth+layer.offsetx);tile.set_y(j*level.tileheight+layer.offsety);tileLayer.addTile(tile)}else{var tile1=new project_game_objects_WallTile(graphicTileID,i*level.tilewidth+layer.offsetx,j*level.tileheight+layer.offsety,0,space,tilesetName);tile1.set_x(i*level.tilewidth+layer.offsetx);tile1.set_y(j*level.tileheight+layer.offsety);tileLayer.addTile(tile1)}}else{var tile2=new project_game_objects_FloorTile(graphicTileID,i*level.tilewidth+layer.offsetx,j*level.tileheight+layer.offsety,1,1,0,level.tilewidth/2,level.tilewidth/2,tilesetName);tile2.set_x(i*level.tilewidth+layer.offsetx);tile2.set_y(j*level.tileheight+layer.offsety);tileLayer.addTile(tile2)}break}}}}switch(tileLayer.layerName){case"floor":tileLayer.set_tileset(project_game_util_GameTiles.FLOOR01);break;case"wall":tileLayer.set_tileset(project_game_util_GameTiles.WALL01);break}tileLayer.sort(function(a,b){return Math.round(a.get_y()-b.get_y())});retval.push(tileLayer)}}retval.push(specialFloor);return retval};project_data_MapReader.getObjects=function(space,offsetX,offsetY){var rv=new haxe_ds_StringMap;var _g=0;var _g1=project_data_MapReader.loadedLevel.layers;while(_g<_g1.length){var layer=_g1[_g];++_g;if(layer.type=="objectgroup"){var _g2=0;var _g11=layer.objects;while(_g2<_g11.length){var o=_g11[_g2];++_g2;var direction="right";switch(o.rotation){case-90:direction="up";break;case 90:direction="down";break;case 180:direction="left";break}var temp;var unique=false;switch(o.type){case"beacon":temp=new project_game_objects_props_Beacon(o.properties[0].value);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"bouncer":temp=new project_game_objects_Bouncer(space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"button":temp=new project_game_objects_DoorSwitch(space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);js_Boot.__cast(temp,project_game_objects_DoorSwitch).doorGroup=o.properties[0].value;break;case"camera":temp=new openfl_display_TileContainer;temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"conveyorbelt":temp=new project_game_objects_ConveyorBelt(space,direction,o.properties[0].value);switch(direction){case"down":temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-32);break;case"left":temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-32);break;case"up":temp.set_x(o.x+offsetX-32-64);temp.set_y(o.y+offsetY-64-32-64*(o.properties[0].value-1));break;default:temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-64-32)}break;case"door":temp=new project_game_objects_Door(space,direction);switch(direction){case"down":temp.set_x(o.x+offsetX-64+32);temp.set_y(o.y+offsetY-16);break;case"left":temp.set_x(o.x+offsetX-64-32);temp.set_y(o.y+offsetY-64-16+32);break;case"up":temp.set_x(o.x+offsetX-64-64-32);temp.set_y(o.y+offsetY-64-16);break;default:temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-64-64-32-16)}js_Boot.__cast(temp,project_game_objects_Door).doorGroup=o.properties[0].value;break;case"goal":temp=new project_game_objects_Goal(space);temp.set_x(o.x+offsetX+32);temp.set_y(o.y+offsetY-64-32);unique=true;break;case"grizzly":temp=new project_game_objects_Bear(3,space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);unique=true;break;case"hole":temp=new project_game_objects_Hole(space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"ice":temp=new project_game_objects_Bear(2,space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);unique=true;break;case"oneside":temp=new project_game_objects_OneSideWall(space,direction);switch(direction){case"down":temp.set_x(o.x+offsetX-64+32);temp.set_y(o.y+offsetY-32);break;case"left":temp.set_x(o.x+offsetX-64-32);temp.set_y(o.y+offsetY-64-16+32);break;case"up":temp.set_x(o.x+offsetX-64-64-32);temp.set_y(o.y+offsetY-64-32);break;default:temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-64-64-32-16)}break;case"panda":temp=new project_game_objects_Bear(1,space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);unique=true;break;case"propbox":temp=new project_game_objects_props_PropBox(space,o.properties[0].value);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"proptrash":temp=new project_game_objects_props_Trash(space);temp.set_x(o.x+offsetX-12);temp.set_y(o.y+offsetY-64+12);break;case"splat":var angleParam=0;var typeParam="goo";var _g12=0;var _g21=o.properties.length;while(_g12<_g21){var i=_g12++;switch(o.properties[i].name){case"angle":angleParam=o.properties[i].value;break;case"type":typeParam=o.properties[i].value;break}}temp=new project_game_objects_Splat(space,angleParam,typeParam);temp.set_x(o.x+offsetX+64-32);temp.set_y(o.y+offsetY-64-32);break;case"teleport":var eid=0;var tid=0;var _g13=0;var _g22=o.properties.length;while(_g13<_g22){var i1=_g13++;switch(o.properties[i1].name){case"exitid":eid=o.properties[i1].value;break;case"teleid":tid=o.properties[i1].value;break}}switch(direction){case"down":temp=new project_game_objects_Teleport(space,direction,tid,eid);temp.set_x(o.x+offsetX+32);temp.set_y(o.y+offsetY-16);break;case"left":temp=new project_game_objects_Teleport(space,direction,tid,eid);temp.set_x(o.x+offsetX-64-32);temp.set_y(o.y+offsetY-64-16+32);break;case"up":temp=new project_game_objects_Teleport(space,direction,tid,eid);temp.set_x(o.x+offsetX-64-32);temp.set_y(o.y+offsetY-64-16);break;default:temp=new project_game_objects_Teleport(space,direction,tid,eid);temp.set_x(o.x+offsetX-32);temp.set_y(o.y+offsetY-64-64-32-16)}break;case"timeddoor":var dirParam="";var downParam=5;var upParam=5;var delayParam=0;var doorUpParam=true;var _g14=0;var _g23=o.properties.length;while(_g14<_g23){var i2=_g14++;switch(o.properties[i2].name){case"delay":delayParam=o.properties[i2].value;break;case"direction":dirParam=o.properties[i2].value;break;case"isup":doorUpParam=o.properties[i2].value;break;case"timedown":downParam=o.properties[i2].value;break;case"timeup":upParam=o.properties[i2].value;break}}temp=new project_game_objects_TimedDoor(space,dirParam,downParam,upParam,delayParam,doorUpParam);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;case"wallbouncer":temp=new project_game_objects_WallBouncer(space,direction,o.properties[0].value);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64);break;default:temp=new project_game_objects_Inflatable(space);temp.set_x(o.x+offsetX);temp.set_y(o.y+offsetY-64)}var arr;if(unique){arr=[];var key=o.type;if(__map_reserved[key]!=null){rv.setReserved(key,arr)}else{rv.h[key]=arr}}else{var key1=o.type;if(__map_reserved[key1]!=null?rv.existsReserved(key1):rv.h.hasOwnProperty(key1)){var key2=o.type;arr=__map_reserved[key2]!=null?rv.getReserved(key2):rv.h[key2]}else{arr=[];var key3=o.type;if(__map_reserved[key3]!=null){rv.setReserved(key3,arr)}else{rv.h[key3]=arr}}}arr.push(temp)}}}return rv};var project_data_UserData=function(){};$hxClasses["project.data.UserData"]=project_data_UserData;project_data_UserData.__name__="project.data.UserData";project_data_UserData.setUp=function(){if(!engine_datamanager_DataManager.existData("bouncyData")){var lvls=[];var ld={maxScore:0,state:1};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);ld={maxScore:0,state:0};lvls.push(ld);engine_datamanager_DataManager.setData("bouncyData",{levels:lvls,audioOn:true})}};project_data_UserData.getData=function(){return engine_datamanager_DataManager.getData("bouncyData")};project_data_UserData.setScore=function(level,score,newState){var rv=false;var lvls=project_data_UserData.getData().levels;if(lvls[level].maxScore<score){lvls[level].maxScore=score;lvls[level].state=newState;if(level<lvls.length-1&&lvls[level+1].state==0){lvls[level+1].maxScore=-1;lvls[level+1].state=1}rv=true}return rv};project_data_UserData.store=function(){engine_datamanager_DataManager.save()};var project_debug_PhysicsDebugger=function(){this.solidColorSensor=new openfl_geom_ColorTransform(1,1,.1,.5);this.staticColorSolid=new openfl_geom_ColorTransform(1,0,0,1);this.staticColorFluid=new openfl_geom_ColorTransform(1,.1,.1,.5);this.kinematicColorSolid=new openfl_geom_ColorTransform(0,0,1,1);this.kinematicColorFluid=new openfl_geom_ColorTransform(.1,.1,1,.5);this.dynamicColorAwake=new openfl_geom_ColorTransform(0,1,0,1);this.dynamicColorSleep=new openfl_geom_ColorTransform(.1,1,.1,.5);this.debugStuff=[];this.bodies=[];openfl_display_Sprite.call(this)};$hxClasses["project.debug.PhysicsDebugger"]=project_debug_PhysicsDebugger;project_debug_PhysicsDebugger.__name__="project.debug.PhysicsDebugger";project_debug_PhysicsDebugger.__interfaces__=[engine_updateable_IUpdateable];project_debug_PhysicsDebugger.__super__=openfl_display_Sprite;project_debug_PhysicsDebugger.prototype=$extend(openfl_display_Sprite.prototype,{bodies:null,debugStuff:null,dynamicColorSleep:null,dynamicColorAwake:null,kinematicColorFluid:null,kinematicColorSolid:null,staticColorFluid:null,staticColorSolid:null,solidColorSensor:null,update:function(dt){var _g=0;var _g1=this.bodies.length;while(_g<_g1){var i=_g++;var tmp;if(this.bodies[i]!=null){var _this=this.bodies[i];tmp=(_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer)==null}else{tmp=true}if(!tmp){var b=this.bodies[i];var s=this.debugStuff[i];if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this1=b.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}s.set_x(_this1.zpp_inner.x);if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this3=b.zpp_inner.wrap_pos;var _this4=_this3.zpp_inner;if(_this4._validate!=null){_this4._validate()}s.set_y(_this3.zpp_inner.y);s.set_rotation(b.zpp_inner.rot*180/Math.PI);if(b.zpp_inner.type==2){if(b.zpp_inner.component.sleeping){s.get_transform().set_colorTransform(this.dynamicColorSleep)}else{s.get_transform().set_colorTransform(this.dynamicColorAwake);var _this5=b.zpp_inner.wrap_shapes;_this5.zpp_inner.valmod();if(_this5.zpp_inner.zip_length){_this5.zpp_inner.zip_length=false;_this5.zpp_inner.user_length=_this5.zpp_inner.inner.length}if(_this5.zpp_inner.user_length>0){if(b.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper().zpp_inner.collisionGroup==0){s.set_alpha(.15)}else{s.set_alpha(1)}}}}else if(b.zpp_inner.type==3){var _g2=0;var _this6=b.zpp_inner.wrap_shapes;_this6.zpp_inner.valmod();if(_this6.zpp_inner.zip_length){_this6.zpp_inner.zip_length=false;_this6.zpp_inner.user_length=_this6.zpp_inner.inner.length}var _g11=_this6.zpp_inner.user_length;while(_g2<_g11){var i1=_g2++;if(b.zpp_inner.wrap_shapes.at(i1).zpp_inner.sensorEnabled){s.get_transform().set_colorTransform(this.solidColorSensor)}else if(b.zpp_inner.wrap_shapes.at(i1).zpp_inner.fluidEnabled){s.get_transform().set_colorTransform(this.kinematicColorFluid)}else{s.get_transform().set_colorTransform(this.kinematicColorSolid)}if(b.zpp_inner.wrap_shapes.at(i1).zpp_inner.filter.wrapper().zpp_inner.collisionGroup==0){s.set_alpha(.15)}else{s.set_alpha(1)}var _this7=b.zpp_inner.wrap_shapes.at(i1);if(_this7.zpp_inner.wrap_worldCOM==null){var x=_this7.zpp_inner.worldCOMx;var y=_this7.zpp_inner.worldCOMy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp1;var _this8=ret.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(ret.zpp_inner.x==x){var _this9=ret.zpp_inner;if(_this9._validate!=null){_this9._validate()}tmp1=ret.zpp_inner.y==y}else{tmp1=false}if(!tmp1){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this10=ret.zpp_inner;if(_this10._invalidate!=null){_this10._invalidate(_this10)}}}ret.zpp_inner.weak=false;_this7.zpp_inner.wrap_worldCOM=ret;_this7.zpp_inner.wrap_worldCOM.zpp_inner._inuse=true;_this7.zpp_inner.wrap_worldCOM.zpp_inner._immutable=true;_this7.zpp_inner.wrap_worldCOM.zpp_inner._validate=($_=_this7.zpp_inner,$bind($_,$_.getworldCOM))}var _this11=_this7.zpp_inner.wrap_worldCOM;var _this12=_this11.zpp_inner;if(_this12._validate!=null){_this12._validate()}var tmp2=_this11.zpp_inner.x;var _this13=b.zpp_inner.wrap_shapes.at(i1);if(_this13.zpp_inner.wrap_localCOM==null){if(_this13.zpp_inner.type==0){_this13.zpp_inner.circle.setupLocalCOM()}else{_this13.zpp_inner.polygon.setupLocalCOM()}}var _this14=_this13.zpp_inner.wrap_localCOM;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}s.set_x(tmp2-_this14.zpp_inner.x);var _this16=b.zpp_inner.wrap_shapes.at(i1);if(_this16.zpp_inner.wrap_worldCOM==null){var x1=_this16.zpp_inner.worldCOMx;var y1=_this16.zpp_inner.worldCOMy;if(y1==null){y1=0}if(x1==null){x1=0}var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x1;ret3.y=y1;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var tmp3;var _this17=ret2.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(ret2.zpp_inner.x==x1){var _this18=ret2.zpp_inner;if(_this18._validate!=null){_this18._validate()}tmp3=ret2.zpp_inner.y==y1}else{tmp3=false}if(!tmp3){ret2.zpp_inner.x=x1;ret2.zpp_inner.y=y1;var _this19=ret2.zpp_inner;if(_this19._invalidate!=null){_this19._invalidate(_this19)}}}ret2.zpp_inner.weak=false;_this16.zpp_inner.wrap_worldCOM=ret2;_this16.zpp_inner.wrap_worldCOM.zpp_inner._inuse=true;_this16.zpp_inner.wrap_worldCOM.zpp_inner._immutable=true;_this16.zpp_inner.wrap_worldCOM.zpp_inner._validate=($_=_this16.zpp_inner,$bind($_,$_.getworldCOM))}var _this20=_this16.zpp_inner.wrap_worldCOM;var _this21=_this20.zpp_inner;if(_this21._validate!=null){_this21._validate()}var tmp4=_this20.zpp_inner.y;var _this22=b.zpp_inner.wrap_shapes.at(i1);if(_this22.zpp_inner.wrap_localCOM==null){if(_this22.zpp_inner.type==0){_this22.zpp_inner.circle.setupLocalCOM()}else{_this22.zpp_inner.polygon.setupLocalCOM()}}var _this23=_this22.zpp_inner.wrap_localCOM;var _this24=_this23.zpp_inner;if(_this24._validate!=null){_this24._validate()}s.set_y(tmp4-_this23.zpp_inner.y)}}else if(b.zpp_inner.type==1){var _this25=b.zpp_inner.wrap_shapes;_this25.zpp_inner.valmod();if(_this25.zpp_inner.zip_length){_this25.zpp_inner.zip_length=false;_this25.zpp_inner.user_length=_this25.zpp_inner.inner.length}if(_this25.zpp_inner.user_length>0){if(b.zpp_inner.wrap_shapes.at(0).zpp_inner.sensorEnabled){s.get_transform().set_colorTransform(this.solidColorSensor)}else if(b.zpp_inner.wrap_shapes.at(0).zpp_inner.fluidEnabled){s.get_transform().set_colorTransform(this.staticColorFluid)}else{s.get_transform().set_colorTransform(this.staticColorSolid)}}}}}},__class__:project_debug_PhysicsDebugger});var project_entities_PhysicalSprite=function(b,canRotate){if(canRotate==null){canRotate=false}openfl_display_Sprite.call(this);this.body=b;this.rotates=canRotate;var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}this.set_x(_this1.zpp_inner.x);var _this3=this.body;if(_this3.zpp_inner.wrap_pos==null){_this3.zpp_inner.setupPosition()}var _this4=_this3.zpp_inner.wrap_pos;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}this.set_y(_this4.zpp_inner.y);if(this.rotates){this.set_rotation(this.body.zpp_inner.rot*180/Math.PI)}};$hxClasses["project.entities.PhysicalSprite"]=project_entities_PhysicalSprite;project_entities_PhysicalSprite.__name__="project.entities.PhysicalSprite";project_entities_PhysicalSprite.__interfaces__=[engine_updateable_IUpdateable];project_entities_PhysicalSprite.__super__=openfl_display_Sprite;project_entities_PhysicalSprite.prototype=$extend(openfl_display_Sprite.prototype,{body:null,rotates:null,update:function(dt){if(this.body!=null){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}this.set_x(_this1.zpp_inner.x);var _this3=this.body;if(_this3.zpp_inner.wrap_pos==null){_this3.zpp_inner.setupPosition()}var _this4=_this3.zpp_inner.wrap_pos;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}this.set_y(_this4.zpp_inner.y);if(this.rotates){this.set_rotation(this.body.zpp_inner.rot*180/Math.PI)}}},__class__:project_entities_PhysicalSprite});var project_entities_PhysicalTile=function(tileid,x,y,sx,sy,r,ox,oy,b,canRotate){if(canRotate==null){canRotate=false}openfl_display_TileContainer.call(this,x,y,sx,sy,r,ox,oy);this.set_id(tileid);this.body=b;this.rotates=canRotate;var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}x=_this1.zpp_inner.x;var _this3=this.body;if(_this3.zpp_inner.wrap_pos==null){_this3.zpp_inner.setupPosition()}var _this4=_this3.zpp_inner.wrap_pos;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}y=_this4.zpp_inner.y;if(this.rotates){this.set_rotation(this.body.zpp_inner.rot*180/Math.PI)}this.data={sortCriteria:0};this.data.sortCriteria=y};$hxClasses["project.entities.PhysicalTile"]=project_entities_PhysicalTile;project_entities_PhysicalTile.__name__="project.entities.PhysicalTile";project_entities_PhysicalTile.__interfaces__=[engine_updateable_IVisibilityMutable,engine_updateable_IUpdateable];project_entities_PhysicalTile.__super__=openfl_display_TileContainer;project_entities_PhysicalTile.prototype=$extend(openfl_display_TileContainer.prototype,{body:null,rotates:null,update:function(dt){if(this.body!=null){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}this.set_x(_this1.zpp_inner.x);var _this3=this.body;if(_this3.zpp_inner.wrap_pos==null){_this3.zpp_inner.setupPosition()}var _this4=_this3.zpp_inner.wrap_pos;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}this.set_y(_this4.zpp_inner.y);if(this.rotates){this.set_rotation(this.body.zpp_inner.rot*180/Math.PI)}}},checkVisibility:function(s){this.set_visible(s.get_x()/s.get_scaleX()+this.get_x()+128>0&&s.get_x()/s.get_scaleX()+this.get_x()-128<800&&s.get_y()/s.get_scaleX()+this.get_y()+128>0&&s.get_y()/s.get_scaleX()+this.get_y()-128<600)},__class__:project_entities_PhysicalTile});var project_game_BackgroundTile=function(){openfl_display_Tile.call(this,0);this.randomizeWall();this.set_scaleX(this.set_scaleY(1.5625))};$hxClasses["project.game.BackgroundTile"]=project_game_BackgroundTile;project_game_BackgroundTile.__name__="project.game.BackgroundTile";project_game_BackgroundTile.__super__=openfl_display_Tile;project_game_BackgroundTile.prototype=$extend(openfl_display_Tile.prototype,{randomizeWall:function(){this.set_id(Std.random(7))},__class__:project_game_BackgroundTile});var zpp_$nape_callbacks_ZPP_$CbType=function(){this.conlisteners=null;this.bodylisteners=null;this.listeners=null;this.cbsets=null;this.id=0;this.outer=null;this.id=zpp_$nape_ZPP_$ID.CbType();this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener;this.bodylisteners=new zpp_$nape_util_ZNPList_$ZPP_$BodyListener;this.conlisteners=new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener;this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;this.cbsets=new zpp_$nape_util_ZNPList_$ZPP_$CbSet};$hxClasses["zpp_nape.callbacks.ZPP_CbType"]=zpp_$nape_callbacks_ZPP_$CbType;zpp_$nape_callbacks_ZPP_$CbType.__name__="zpp_nape.callbacks.ZPP_CbType";zpp_$nape_callbacks_ZPP_$CbType.prototype={outer:null,id:null,cbsets:null,interactors:null,constraints:null,listeners:null,bodylisteners:null,conlisteners:null,__class__:zpp_$nape_callbacks_ZPP_$CbType};var zpp_$nape_ZPP_$ID=function(){};$hxClasses["zpp_nape.ZPP_ID"]=zpp_$nape_ZPP_$ID;zpp_$nape_ZPP_$ID.__name__="zpp_nape.ZPP_ID";zpp_$nape_ZPP_$ID.Interactor=function(){return zpp_$nape_ZPP_$ID._Interactor++};zpp_$nape_ZPP_$ID.Constraint=function(){return zpp_$nape_ZPP_$ID._Constraint++};zpp_$nape_ZPP_$ID.CbType=function(){return zpp_$nape_ZPP_$ID._CbType++};zpp_$nape_ZPP_$ID.CbSet=function(){return zpp_$nape_ZPP_$ID._CbSet++};zpp_$nape_ZPP_$ID.Listener=function(){return zpp_$nape_ZPP_$ID._Listener++};var zpp_$nape_util_ZNPList_$ZPP_$InteractionListener=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=zpp_$nape_util_ZNPList_$ZPP_$InteractionListener;zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.__name__="zpp_nape.util.ZNPList_ZPP_InteractionListener";zpp_$nape_util_ZNPList_$ZPP_$InteractionListener.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},__class__:zpp_$nape_util_ZNPList_$ZPP_$InteractionListener};var zpp_$nape_util_ZNPList_$ZPP_$BodyListener=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_BodyListener"]=zpp_$nape_util_ZNPList_$ZPP_$BodyListener;zpp_$nape_util_ZNPList_$ZPP_$BodyListener.__name__="zpp_nape.util.ZNPList_ZPP_BodyListener";zpp_$nape_util_ZNPList_$ZPP_$BodyListener.prototype={head:null,modified:null,pushmod:null,length:null,remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},__class__:zpp_$nape_util_ZNPList_$ZPP_$BodyListener};var zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener;zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.__name__="zpp_nape.util.ZNPList_ZPP_ConstraintListener";zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener.prototype={head:null,modified:null,pushmod:null,length:null,remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},__class__:zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener};var zpp_$nape_util_ZNPList_$ZPP_$Constraint=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Constraint"]=zpp_$nape_util_ZNPList_$ZPP_$Constraint;zpp_$nape_util_ZNPList_$ZPP_$Constraint.__name__="zpp_nape.util.ZNPList_ZPP_Constraint";zpp_$nape_util_ZNPList_$ZPP_$Constraint.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Constraint};var zpp_$nape_util_ZNPList_$ZPP_$Interactor=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Interactor"]=zpp_$nape_util_ZNPList_$ZPP_$Interactor;zpp_$nape_util_ZNPList_$ZPP_$Interactor.__name__="zpp_nape.util.ZNPList_ZPP_Interactor";zpp_$nape_util_ZNPList_$ZPP_$Interactor.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Interactor};var zpp_$nape_util_ZNPList_$ZPP_$CbSet=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSet"]=zpp_$nape_util_ZNPList_$ZPP_$CbSet;zpp_$nape_util_ZNPList_$ZPP_$CbSet.__name__="zpp_nape.util.ZNPList_ZPP_CbSet";zpp_$nape_util_ZNPList_$ZPP_$CbSet.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbSet};var project_game_CallbackTypes=function(){};$hxClasses["project.game.CallbackTypes"]=project_game_CallbackTypes;project_game_CallbackTypes.__name__="project.game.CallbackTypes";var project_game_Camera=function(s){this.followTarget=null;this.following=false;this.target=new openfl_geom_Point;this.movingALot=false;this.movingTo=false;this.isShot=false;this.cameraBounds=new openfl_display_Sprite;this.motion=new openfl_geom_Point;this.motionSpeedY=0;this.motionSpeedX=0;this.motionSpeed=250;this.marginY=10;this.marginX=10;this.cameraSizeY=100;this.cameraSizeX=100;this.boundsRight=960;this.boundsBottom=1344;this.boundsLeft=0;this.boundsTop=0;this.downBegin=new openfl_geom_Point;this.tapStarted=0;this.touching=false;this.targetSprite=s;this.boundsTop=this.targetSprite.globalToLocal(new openfl_geom_Point(0,-32)).y;this.boundsLeft=this.targetSprite.globalToLocal(new openfl_geom_Point(-32,0)).x;this.boundsBottom=this.targetSprite.globalToLocal(new openfl_geom_Point(0,2e3)).y;this.boundsRight=this.targetSprite.globalToLocal(new openfl_geom_Point(2e3,0)).x;this.onMouseUp=$bind(this,this.mouseUp);this.onMouseDown=$bind(this,this.mouseDown);this.onMouseMove=$bind(this,this.mouseMove);this.targetSprite.addEventListener("addedToStage",$bind(this,this.targetAdded),false,0,true)};$hxClasses["project.game.Camera"]=project_game_Camera;project_game_Camera.__name__="project.game.Camera";project_game_Camera.__interfaces__=[engine_updateable_IUpdateable];project_game_Camera.prototype={targetSprite:null,touching:null,tapStarted:null,downBegin:null,onMouseUp:null,onMouseDown:null,onMouseMove:null,boundsTop:null,boundsLeft:null,boundsBottom:null,boundsRight:null,cameraSizeX:null,cameraSizeY:null,marginX:null,marginY:null,motionSpeed:null,motionSpeedX:null,motionSpeedY:null,motion:null,cameraBounds:null,targetAdded:function(e){this.cameraSizeX=this.targetSprite.stage.stageWidth;this.cameraSizeY=this.targetSprite.stage.stageHeight;var center=this.targetSprite.globalToLocal(new openfl_geom_Point(this.targetSprite.stage.stageWidth/2,this.targetSprite.stage.stageHeight/2));this.cameraBounds.set_x(center.x);this.cameraBounds.set_y(center.y);this.targetSprite.addChild(this.cameraBounds);this.targetSprite.removeEventListener("addedToStage",$bind(this,this.targetAdded));this.downBegin.x=400;this.downBegin.y=300},mouseDown:function(e){this.touching=true;this.tapStarted=openfl_Lib.getTimer();this.downBegin.x=e.stageX;this.downBegin.y=e.stageY},isShot:null,teleportTo:function(posX,posY){if(this.isShot){return}if(this.targetSprite.stage!=null){var _g=this.targetSprite;_g.set_x(_g.get_x()+(openfl_Lib.get_current().stage.stageWidth/2-posX));var _g1=this.targetSprite;_g1.set_y(_g1.get_y()+(openfl_Lib.get_current().stage.stageHeight/2-posY));this.targetSprite.set_x(Math.min(this.targetSprite.get_x(),-this.boundsLeft*this.targetSprite.get_scaleX()));this.targetSprite.set_y(Math.min(this.targetSprite.get_y(),-this.boundsTop*this.targetSprite.get_scaleY()));this.targetSprite.set_x(Math.max(this.targetSprite.get_x(),-this.boundsRight*this.targetSprite.get_scaleX()-800));this.targetSprite.set_y(Math.max(this.targetSprite.get_y(),-this.boundsBottom*this.targetSprite.get_scaleY()-600))}this.targetSprite.set_x(Math.round(this.targetSprite.get_x()));this.targetSprite.set_y(Math.round(this.targetSprite.get_y()))},moveTo:function(posX,posY){this.movingTo=true;this.target.x=this.targetSprite.get_x()+this.targetSprite.stage.stageWidth/2-posX;this.target.y=this.targetSprite.get_y()+this.targetSprite.stage.stageHeight/2-posY;var totalX=this.target.x;var totalY=this.target.y;totalX=Math.min(totalX,-this.boundsLeft+this.marginX);totalY=Math.min(totalY,-this.boundsTop+this.marginY);totalX=Math.max(totalX,-this.boundsRight+800-this.marginX);totalY=Math.max(totalY,-this.boundsBottom+600-this.marginY);this.target.x=totalX;this.target.y=totalY;var n=new openfl_geom_Point(this.target.x-this.targetSprite.get_x(),this.target.y-this.targetSprite.get_y());n.normalize(1);this.motionSpeedX=-this.motionSpeed*n.x*this.targetSprite.get_scaleX();this.motionSpeedY=-this.motionSpeed*n.y*this.targetSprite.get_scaleX()},movingTo:null,movingALot:null,target:null,update:function(dt){var _gthis=this;if(this.movingTo){this.motion.x=this.motion.y=0;var d=openfl_geom_Point.distance(new openfl_geom_Point(this.targetSprite.get_x(),this.targetSprite.get_y()),new openfl_geom_Point(this.target.x,this.target.y));if(Math.abs(this.targetSprite.get_x()-this.target.x)>10){this.motion.x=this.motionSpeedX*dt/1e3*d/100}if(Math.abs(this.targetSprite.get_y()-this.target.y)>10){this.motion.y=this.motionSpeedY*dt/1e3*d/100}this.movingALot=this.motion.get_length()>=.5;this.teleportTo(this.targetSprite.stage.stageWidth/2+this.motion.x,this.targetSprite.stage.stageHeight/2+this.motion.y);this.movingTo=this.movingTo&&Math.abs(this.targetSprite.get_x()-this.target.x)>=this.marginX||Math.abs(this.targetSprite.get_y()-this.target.y)>=this.marginY;if(this.following&&this.movingTo){this.follow(this.followTarget)}else if(!this.movingTo){engine_tweens_Actuator.timer(.5).onComplete(function(){_gthis.movingTo=_gthis.movingTo&&Math.abs(_gthis.targetSprite.get_x()-_gthis.target.x)>=_gthis.marginX||Math.abs(_gthis.targetSprite.get_y()-_gthis.target.y)>=_gthis.marginY;if(!_gthis.movingTo){_gthis.unfollow()}else{_gthis.follow(_gthis.followTarget)}})}}},mouseMove:function(e){if(this.touching&&!this.following){this.tapStarted=openfl_Lib.getTimer();var totalX=this.targetSprite.get_x()-(-e.stageX+this.downBegin.x);var totalY=this.targetSprite.get_y()-(-e.stageY+this.downBegin.y);totalX=Math.min(totalX,-this.boundsLeft);totalY=Math.min(totalY,-this.boundsTop);totalX=Math.max(totalX,-this.boundsRight+800);totalY=Math.max(totalY,-this.boundsBottom+600);this.targetSprite.set_x(totalX);this.targetSprite.set_y(totalY);this.downBegin.x=e.stageX;this.downBegin.y=e.stageY}else{this.touching=false}},mouseUp:function(e){this.touching=false},following:null,followTarget:null,follow:function(ft,shoot){if(shoot==null){shoot=false}if(this.movingTo){this.isShot=shoot;this.following=true;this.followTarget=ft;this.movingALot=this.movingALot||this.isShot;var globalPoint=ft.parent.localToGlobal(new openfl_geom_Point(ft.get_x(),ft.get_y()));this.moveTo(globalPoint.x,globalPoint.y)}},followNormal:function(ft,shoot){if(shoot==null){shoot=false}this.marginX=0;this.marginY=0;this.isShot=shoot;this.following=true;this.followTarget=ft;this.movingALot=this.movingALot||this.isShot;var globalPoint=ft.parent.localToGlobal(new openfl_geom_Point(ft.get_x(),ft.get_y()));this.moveTo(globalPoint.x,globalPoint.y)},followSpecial:function(ft){this.marginX=260;this.marginY=160;this.following=true;this.followTarget=ft;var globalPoint=ft.parent.localToGlobal(new openfl_geom_Point(ft.get_x(),ft.get_y()));var temptarget=new openfl_geom_Point(-192+this.targetSprite.get_x()+this.targetSprite.stage.stageWidth/2-globalPoint.x,0+this.targetSprite.get_y()+this.targetSprite.stage.stageHeight/2-globalPoint.y);if(Math.abs(this.targetSprite.get_x()-temptarget.x)>=this.marginX||Math.abs(this.targetSprite.get_y()-temptarget.y)>=this.marginY){this.movingTo=true}else{this.movingTo=false}if(this.movingTo){if(Math.abs(this.targetSprite.get_x()-temptarget.x)<=this.marginX){globalPoint.x=ft.parent.localToGlobal(new openfl_geom_Point(0,ft.get_y())).x}if(Math.abs(this.targetSprite.get_y()-temptarget.y)<=this.marginY){globalPoint.y=ft.parent.localToGlobal(new openfl_geom_Point(ft.get_x(),0)).y}this.moveTo(globalPoint.x,globalPoint.y)}},unfollow:function(){this.following=false;this.movingTo=false;this.movingALot=false},__class__:project_game_Camera};var project_game_GameState=$hxEnums["project.game.GameState"]={__ename__:"project.game.GameState",__constructs__:["STARTING","PLAYING","PAUSED","WAITING","NONE","SOLVINGSHOT"],STARTING:{_hx_index:0,__enum__:"project.game.GameState",toString:$estr},PLAYING:{_hx_index:1,__enum__:"project.game.GameState",toString:$estr},PAUSED:{_hx_index:2,__enum__:"project.game.GameState",toString:$estr},WAITING:{_hx_index:3,__enum__:"project.game.GameState",toString:$estr},NONE:{_hx_index:4,__enum__:"project.game.GameState",toString:$estr},SOLVINGSHOT:{_hx_index:5,__enum__:"project.game.GameState",toString:$estr}};var project_game_Game=function(lvl){this.dragRadiusMax=160;this.dragRadiusMin=11;this.bearWasShot=false;this.followedBear=0;this.follower=new openfl_display_Sprite;this.mayFocusOnBear=false;this.wasOnBear=false;this.endDragPosition=new openfl_geom_Point;this.canSelect=true;this.startDragPosition=new openfl_geom_Point;this.gameComplete=false;this.backgroundOverlay=new openfl_display_Sprite;this.currentDragPosition=new openfl_geom_Point;this.bodiesOnGoal=new nape_phys_BodyList;this.shotCount=0;this.stringLevel="0";this.level=0;this.foregroundFixed=new openfl_display_TileContainer;this.middleSortable=new engine_tiles_SortableTileContainer;this.backgroundFixed=new openfl_display_TileContainer;this.bearGrabbed=-1;this.culledObjects=[];this.updateableObjects=[];this.bears=[];this.state=project_game_GameState.NONE;openfl_display_Sprite.call(this);this.level=lvl;if(this.level<10){this.stringLevel="0"+(this.level+"")}else{this.stringLevel=this.level+""}this.addEventListener("mouseDown",$bind(this,this.mouseDown),false,0,true);this.addEventListener("mouseUp",$bind(this,this.mouseUp),false,0,true);this.addEventListener("mouseMove",$bind(this,this.mouseMove),false,0,true);var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;this.space=new nape_space_Space(ret);this.space.zpp_inner.global_lin_drag=2;this.space.zpp_inner.global_ang_drag=1;this.camera=new project_game_Camera(this);project_data_MapReader.load("levels/level"+this.stringLevel+".json");this.conditions=project_data_MapReader.getLevelConditions();var layers=project_data_MapReader.getLayers(this.space,this.camera);this.mainTilemap=new openfl_display_Tilemap(1e4,1e4);var backgroundTilemap=new openfl_display_Tilemap(1e4,1e4);var foregroundTilemap=new openfl_display_Tilemap(1e4,1e4);this.addChild(backgroundTilemap);backgroundTilemap.smoothing=true;this.addChild(this.backgroundOverlay);this.addChild(this.mainTilemap);this.mainTilemap.smoothing=true;this.addChild(foregroundTilemap);foregroundTilemap.smoothing=true;var specialLayer=null;var _g=0;while(_g<layers.length){var l=layers[_g];++_g;switch(l.layerName){case"floor":this.backgroundFixed=l;var _g1=0;var _g11=l.get_numTiles();while(_g1<_g11)this.culledObjects.push(js_Boot.__cast(l.getTileAt(_g1++),engine_updateable_IVisibilityMutable));break;case"specialFloor":specialLayer=l;break;case"wall":this.middleSortable=l;var _g2=0;var _g12=l.get_numTiles();while(_g2<_g12)this.culledObjects.push(js_Boot.__cast(l.getTileAt(_g2++),engine_updateable_IVisibilityMutable));break}}if(specialLayer!=null){this.backgroundFixed.addTile(specialLayer)}this.backgroundFixed.set_x(32);this.backgroundFixed.set_y(32);this.middleSortable.set_x(32);this.middleSortable.set_y(32);this.foregroundFixed.set_x(32);this.foregroundFixed.set_y(32);backgroundTilemap.addTile(this.backgroundFixed);this.mainTilemap.addTile(this.middleSortable);foregroundTilemap.addTile(this.foregroundFixed);backgroundTilemap.set_x(-32);backgroundTilemap.set_y(-32);this.mainTilemap.set_x(-32);this.mainTilemap.set_y(-32);foregroundTilemap.set_x(-32);foregroundTilemap.set_y(-32);this.addGameElements();this.updateableObjects.push(this.camera);this.inputController=new project_game_InputController(this);this.inputController.clickCallback=$bind(this,this.onClick);this.inputController.releaseCallback=$bind(this,this.onRelease);this.selection=new project_game_ui_SelectionDrag(this.backgroundOverlay);this.addChild(this.selection);this.updateableObjects.push(this.selection);this.createIndicators();this.addChild(this.follower);this.addEventListener("enterFrame",$bind(this,this.startCamera));this.sortLayer();new project_game_effects_PhysicsEffectsPlayer(this.space,this.middleSortable);project_data_MapReader.unload()};$hxClasses["project.game.Game"]=project_game_Game;project_game_Game.__name__="project.game.Game";project_game_Game.__interfaces__=[engine_responsive_IResizable,engine_updateable_IUpdateable];project_game_Game.__super__=openfl_display_Sprite;project_game_Game.prototype=$extend(openfl_display_Sprite.prototype,{state:null,conditions:null,somethingSelected:null,bears:null,updateableObjects:null,culledObjects:null,camera:null,bearGrabbed:null,selection:null,backgroundFixed:null,middleSortable:null,foregroundFixed:null,level:null,stringLevel:null,shotCB:null,shotCount:null,cameraStartingPosition:null,goal:null,space:null,bodiesOnGoal:null,mainTilemap:null,currentDragPosition:null,inputController:null,backgroundOverlay:null,startCamera:function(e){this.removeEventListener("enterFrame",$bind(this,this.startCamera));if(this.cameraStartingPosition==null){return}this.camera.teleportTo(this.localToGlobal(new openfl_geom_Point(this.cameraStartingPosition.x-32,this.cameraStartingPosition.y)).x,this.localToGlobal(new openfl_geom_Point(this.cameraStartingPosition.x-32,this.cameraStartingPosition.y)).y)},bearOnGoal:function(collision){if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bodiesOnGoal=this.goal.body.interactingBodies(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR)},sortLayer:function(){this.middleSortable.sort(function(a,b){if(a.data.sortCriteria<b.data.sortCriteria){return-1}else if(a.data.sortCriteria>b.data.sortCriteria){return 1}return 0})},update:function(dt){if(this.bearGrabbed!=-1){this.follower.set_x(new openfl_geom_Point(this.bears[this.bearGrabbed].get_x(),0).x);this.follower.set_y(new openfl_geom_Point(0,this.bears[this.bearGrabbed].get_y()).y)}else if(this.followedBear!=-1){this.follower.set_x(new openfl_geom_Point(this.bears[this.followedBear].get_x(),0).x);this.follower.set_y(new openfl_geom_Point(0,this.bears[this.followedBear].get_y()).y)}switch(this.state._hx_index){case 0:this.updateStart(dt);break;case 1:this.updatePlay(dt);break;case 2:break;case 5:this.updateShot(dt);break;default:}if(dt>0){this.sortLayer()}},updateStart:function(dt){var changeState=this.bears[0].canTouchThis();switch(this.bears.length){case 1:changeState=this.bears[0].canTouchThis();break;case 2:changeState=this.bears[0].canTouchThis()&&this.bears[1].canTouchThis();break;case 3:changeState=this.bears[0].canTouchThis()&&this.bears[1].canTouchThis()&&this.bears[2].canTouchThis();break}if(changeState){this.state=project_game_GameState.PLAYING;if(this.somethingSelected!=null){this.somethingSelected(false)}}},updatePlay:function(dt){var _gthis=this;if(this.gameComplete){return}if(dt>0){this.space.step(.016666666666666666,1,5);var _g=0;var _g1=this.updateableObjects;while(_g<_g1.length)_g1[_g++].update(dt);var _g2=0;var _g3=this.culledObjects;while(_g2<_g3.length)_g3[_g2++].checkVisibility(this)}this.canSelect=true;var _g4=0;var _g11=this.bears;while(_g4<_g11.length){var b=_g11[_g4++];this.canSelect=this.canSelect&&b.canTouchThis()}this.selection.update(dt);if(this.goal.bodiesOver==this.bears.length){switch(this.bears.length){case 1:var _this=this.bears[0].body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.sqrt(tmp1+tmp2*_this1.zpp_inner.y)<.01){this.gameComplete=true}break;case 2:var tmp3;var _this6=this.bears[0].body;if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}var _this7=_this6.zpp_inner.wrap_vel;var _this8=_this7.zpp_inner;if(_this8._validate!=null){_this8._validate()}var tmp4=_this7.zpp_inner.x;var _this9=_this7.zpp_inner;if(_this9._validate!=null){_this9._validate()}var tmp5=tmp4*_this7.zpp_inner.x;var _this10=_this7.zpp_inner;if(_this10._validate!=null){_this10._validate()}var tmp6=_this7.zpp_inner.y;var _this11=_this7.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(Math.sqrt(tmp5+tmp6*_this7.zpp_inner.y)<.01){var _this12=this.bears[1].body;if(_this12.zpp_inner.wrap_vel==null){_this12.zpp_inner.setupVelocity()}var _this13=_this12.zpp_inner.wrap_vel;var _this14=_this13.zpp_inner;if(_this14._validate!=null){_this14._validate()}var tmp7=_this13.zpp_inner.x;var _this15=_this13.zpp_inner;if(_this15._validate!=null){_this15._validate()}var tmp8=tmp7*_this13.zpp_inner.x;var _this16=_this13.zpp_inner;if(_this16._validate!=null){_this16._validate()}var tmp9=_this13.zpp_inner.y;var _this17=_this13.zpp_inner;if(_this17._validate!=null){_this17._validate()}tmp3=Math.sqrt(tmp8+tmp9*_this13.zpp_inner.y)<.01}else{tmp3=false}if(tmp3){this.gameComplete=true}break;case 3:var tmp10;var tmp11;var _this18=this.bears[0].body;if(_this18.zpp_inner.wrap_vel==null){_this18.zpp_inner.setupVelocity()}var _this19=_this18.zpp_inner.wrap_vel;var _this20=_this19.zpp_inner;if(_this20._validate!=null){_this20._validate()}var tmp12=_this19.zpp_inner.x;var _this21=_this19.zpp_inner;if(_this21._validate!=null){_this21._validate()}var tmp13=tmp12*_this19.zpp_inner.x;var _this22=_this19.zpp_inner;if(_this22._validate!=null){_this22._validate()}var tmp14=_this19.zpp_inner.y;var _this23=_this19.zpp_inner;if(_this23._validate!=null){_this23._validate()}if(Math.sqrt(tmp13+tmp14*_this19.zpp_inner.y)<.01){var _this24=this.bears[1].body;if(_this24.zpp_inner.wrap_vel==null){_this24.zpp_inner.setupVelocity()}var _this25=_this24.zpp_inner.wrap_vel;var _this26=_this25.zpp_inner;if(_this26._validate!=null){_this26._validate()}var tmp15=_this25.zpp_inner.x;var _this27=_this25.zpp_inner;if(_this27._validate!=null){_this27._validate()}var tmp16=tmp15*_this25.zpp_inner.x;var _this28=_this25.zpp_inner;if(_this28._validate!=null){_this28._validate()}var tmp17=_this25.zpp_inner.y;var _this29=_this25.zpp_inner;if(_this29._validate!=null){_this29._validate()}tmp11=Math.sqrt(tmp16+tmp17*_this25.zpp_inner.y)<.01}else{tmp11=false}if(tmp11){var _this30=this.bears[2].body;if(_this30.zpp_inner.wrap_vel==null){_this30.zpp_inner.setupVelocity()}var _this31=_this30.zpp_inner.wrap_vel;var _this32=_this31.zpp_inner;if(_this32._validate!=null){_this32._validate()}var tmp18=_this31.zpp_inner.x;var _this33=_this31.zpp_inner;if(_this33._validate!=null){_this33._validate()}var tmp19=tmp18*_this31.zpp_inner.x;var _this34=_this31.zpp_inner;if(_this34._validate!=null){_this34._validate()}var tmp20=_this31.zpp_inner.y;var _this35=_this31.zpp_inner;if(_this35._validate!=null){_this35._validate()}tmp10=Math.sqrt(tmp19+tmp20*_this31.zpp_inner.y)<.01}else{tmp10=false}if(tmp10){this.gameComplete=true}break}}if(this.gameComplete){var delay=(this.goal.timeMax-this.goal.time)/1e3;if(delay<.1){delay=.1}engine_tweens_Actuator.timer(delay+.25).onComplete(function(){var _this36=_gthis.conditions;engine_scenemanager_Manager.showPopup(project_game_popups_WinPopup,[_gthis.level,_gthis.conditions,(__map_reserved["maxShots"]!=null?_this36.getReserved("maxShots"):_this36.h["maxShots"])-_gthis.shotCount]);engine_soundlib_SoundList.FX(39)})}else{var _this37=this.conditions;if((__map_reserved["maxShots"]!=null?_this37.getReserved("maxShots"):_this37.h["maxShots"])==this.shotCount){engine_scenemanager_Manager.showPopup(project_game_popups_LosePopup,[this.level]);this.gameComplete=true}}this.indicatorTM.set_x(this.get_x());this.indicatorTM.set_y(this.get_y())},updateShot:function(dt){if(dt>0){this.space.step(.016666666666666666);var _g=0;var _g1=this.updateableObjects;while(_g<_g1.length)_g1[_g++].update(dt);var _g2=0;var _g3=this.culledObjects;while(_g2<_g3.length)_g3[_g2++].checkVisibility(this)}this.canSelect=true;var _g4=0;var _g11=this.bears;while(_g4<_g11.length){var b=_g11[_g4++];this.canSelect=this.canSelect&&b.canTouchThis()}if(this.bearGrabbed>=0&&this.canSelect){this.camera.unfollow()}if(this.canSelect){this.state=project_game_GameState.PLAYING;if(this.somethingSelected!=null){this.somethingSelected(false)}}this.indicatorTM.set_x(this.get_x());this.indicatorTM.set_y(this.get_y())},gameComplete:null,onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},destroy:function(){this.space.clear();engine_tweens_Actuator.stop(haxe_ds_Either.Right("menu"));this.removeEventListener("mouseDown",$bind(this,this.mouseDown));this.removeEventListener("mouseUp",$bind(this,this.mouseUp));this.removeEventListener("mouseMove",$bind(this,this.mouseMove));this.inputController.remove()},cancelAll:function(){this.inputController.cancelClick();this.selection.powerReset();this.selection.hideCircle();this.selection.hideArrow();this.wasOnBear=true;this.camera.unfollow();if(this.state!=project_game_GameState.PAUSED){this.state=project_game_GameState.SOLVINGSHOT}this.bearGrabbed=-1},mouseDown:function(e){if(this.gameComplete){return}if(this.state!=project_game_GameState.PLAYING){return}if(!this.wasOnBear&&!this.bearWasShot&&this.canSelect){this.camera.onMouseDown(e)}this.bearWasShot=false},pausePressed:function(){this.state=project_game_GameState.PAUSED;engine_scenemanager_Manager.showPopup(project_game_popups_PausePopup,[this.level,$bind(this,this.resumeGame)])},resumeGame:function(){this.state=project_game_GameState.PLAYING},mouseUp:function(e){if(this.gameComplete){return}this.camera.onMouseUp(e)},mouseMove:function(e){if(this.gameComplete){return}if(!this.wasOnBear&&this.canSelect){this.camera.onMouseMove(e)}else if(this.wasOnBear){e.stageX/=this.get_scaleX();e.stageY/=this.get_scaleY();this.doBearDrag(e.stageX,e.stageY)}},startDragPosition:null,canSelect:null,onClick:function(posX,posY){if(this.gameComplete){return}if(this.canSelect&&this.isOnBear(posX,posY)&&this.state!=project_game_GameState.NONE){this.focusBear();this.startDragPosition.x=this.bears[this.bearGrabbed].get_x()+this.get_x();this.startDragPosition.y=this.bears[this.bearGrabbed].get_y()-5+this.get_y();this.selection.set_x(this.bears[this.bearGrabbed].get_x());this.selection.set_y(this.bears[this.bearGrabbed].get_y()-5);this.follower.set_x(this.bears[this.bearGrabbed].get_x()+this.get_x());this.follower.set_y(this.bears[this.bearGrabbed].get_y()+this.get_y());this.selection.showCircle(this.camera,this.follower);this.camera.followSpecial(this.follower);if(this.somethingSelected!=null){this.somethingSelected(true)}}else{this.selection.hideCircle();this.selection.hideArrow()}},onRelease:function(posX,posY){if(this.wasOnBear){this.endDragPosition.x=posX;this.endDragPosition.y=posY;this.shotBear()}this.wasOnBear=false},endDragPosition:null,wasOnBear:null,mayFocusOnBear:null,isOnBear:function(posX,posY){this.wasOnBear=false;this.bearGrabbed=-1;if(!this.wasOnBear){var current=0;var bodiesinpoint=this.space;var x=posX-this.get_x()/this.get_scaleX();var y=posY-this.get_y()/this.get_scaleY();if(y==null){y=0}if(x==null){x=0}var x1=x;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var bodiesinpoint1;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x1){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}bodiesinpoint1=ret.zpp_inner.y==y1}else{bodiesinpoint1=false}if(!bodiesinpoint1){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var bodiesinpoint2=bodiesinpoint.bodiesUnderPoint(ret);while(!this.wasOnBear&&current<this.bears.length){this.wasOnBear=false;bodiesinpoint2.zpp_inner.valmod();var _g=nape_phys_BodyIterator.get(bodiesinpoint2);while(true){_g.zpp_inner.zpp_inner.valmod();var _this3=_g.zpp_inner;_this3.zpp_inner.valmod();if(_this3.zpp_inner.zip_length){_this3.zpp_inner.zip_length=false;_this3.zpp_inner.user_length=_this3.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this3.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_phys_BodyIterator.zpp_pool;nape_phys_BodyIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;var b=_g.zpp_inner.at(_g.zpp_i++);this.wasOnBear=this.wasOnBear||b==this.bears[current].body}if(this.wasOnBear){this.bearGrabbed=current}++current}}return this.wasOnBear},focusBear:function(){if(!this.mayFocusOnBear){this.mayFocusOnBear=true}else{this.mayFocusOnBear=false}},follower:null,followedBear:null,bearWasShot:null,dragRadiusMin:null,dragRadiusMax:null,doBearDrag:function(posX,posY){if(this.state==project_game_GameState.NONE){return}if(!this.wasOnBear){return}this.currentDragPosition.x=posX;this.currentDragPosition.y=posY;if(this.bearGrabbed>=0){this.startDragPosition.x=this.bears[this.bearGrabbed].get_x()+this.get_x();this.startDragPosition.y=this.bears[this.bearGrabbed].get_y()-5+this.get_y();var tempDist=this.currentDragPosition.subtract(this.startDragPosition);if(tempDist.get_length()>=this.dragRadiusMin&&tempDist.get_length()<this.dragRadiusMax){this.selection.distance=Math.abs(tempDist.get_length());var x=tempDist.x;var y=tempDist.y;if(y==null){y=0}if(x==null){x=0}var x1=x;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x1){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y1}else{tmp=false}if(!tmp){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var _this3=ret;var angle;var angle1;var _this4=_this3.zpp_inner;if(_this4._validate!=null){_this4._validate()}var angle2=_this3.zpp_inner.x;var _this5=_this3.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(angle2==_this3.zpp_inner.y){var _this6=_this3.zpp_inner;if(_this6._validate!=null){_this6._validate()}angle1=_this3.zpp_inner.x==0}else{angle1=false}if(angle1){angle=0}else{var _this7=_this3.zpp_inner;if(_this7._validate!=null){_this7._validate()}var angle3=_this3.zpp_inner.y;var _this8=_this3.zpp_inner;if(_this8._validate!=null){_this8._validate()}angle=Math.atan2(angle3,_this3.zpp_inner.x)}this.selection.angle=angle*180/Math.PI-90;this.selection.dragging=true;this.selection.update(1);this.bears[this.bearGrabbed].lookAt(this.selection.angle)}else if(tempDist.get_length()>this.dragRadiusMax){this.cancelAll()}else{this.selection.hideArrow()}}else{this.cancelAll()}},shotBear:function(){var _gthis=this;if(this.state==project_game_GameState.NONE){return}if(this.bearGrabbed>=0){var dif=this.startDragPosition.subtract(this.endDragPosition);var x=dif.x;var y=dif.y;if(y==null){y=0}if(x==null){x=0}var x1=x;var y1=y;if(y1==null){y1=0}if(x1==null){x1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x1){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y1}else{tmp=false}if(!tmp){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var v=ret;this.followedBear=this.bearGrabbed;this.follower.set_x(new openfl_geom_Point(this.bears[this.bearGrabbed].get_x(),0).x+this.get_x());this.follower.set_y(new openfl_geom_Point(0,this.bears[this.bearGrabbed].get_y()).y+this.get_y());var power=this.selection.power();this.selection.hideCircleAfterShot();this.selection.hideArrow();this.selection.dragging=false;if(power>0){this.state=project_game_GameState.NONE;engine_tweens_Actuator.timer(.01).onComplete(function(){var shotForce=power*400;v.normalise();_gthis.bears[_gthis.bearGrabbed].shot(v,shotForce);_gthis.camera.followNormal(_gthis.follower,true);if(_gthis.shotCB!=null){_gthis.shotCount+=1;_gthis.shotCB(_gthis.shotCount)}_gthis.state=project_game_GameState.SOLVINGSHOT;switch(_gthis.bears[_gthis.bearGrabbed].specie){case 0:break;case 1:switch(power){case 1:engine_soundlib_SoundList.FX(7);engine_soundlib_SoundList.playVoice(65);break;case 2:engine_soundlib_SoundList.FX(7);engine_soundlib_SoundList.playVoice(66);break;case 3:engine_soundlib_SoundList.FX(8);engine_soundlib_SoundList.playVoice(67);break;case 4:engine_soundlib_SoundList.FX(8);engine_soundlib_SoundList.playVoice(68);break;case 5:engine_soundlib_SoundList.FX(9);engine_soundlib_SoundList.playVoice(69);break}break;case 2:switch(power){case 1:engine_soundlib_SoundList.FX(7);break;case 2:engine_soundlib_SoundList.FX(7);break;case 3:engine_soundlib_SoundList.FX(8);break;case 4:engine_soundlib_SoundList.FX(8);break;case 5:engine_soundlib_SoundList.FX(9);break}break;case 3:switch(power){case 1:engine_soundlib_SoundList.FX(7);engine_soundlib_SoundList.playVoice(60);break;case 2:engine_soundlib_SoundList.FX(7);engine_soundlib_SoundList.playVoice(61);break;case 3:engine_soundlib_SoundList.FX(8);engine_soundlib_SoundList.playVoice(62);break;case 4:engine_soundlib_SoundList.FX(8);engine_soundlib_SoundList.playVoice(63);break;case 5:engine_soundlib_SoundList.FX(9);engine_soundlib_SoundList.playVoice(64);break}break}})}else{this.cancelAll();if(this.somethingSelected!=null){this.somethingSelected(false)}}}else{this.cancelAll()}},addGameElements:function(){var switches=[];var doors=[];var holes=[];var teleports=[];var objects=project_data_MapReader.getObjects(this.space,0,0);var k=objects.keys();while(k.hasNext()){var k1=k.next();switch(k1){case"beacon":var b;var _g=0;var _g1=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g<_g1.length){b=js_Boot.__cast(_g1[_g++],project_game_objects_props_Beacon);this.foregroundFixed.addTile(b);this.updateableObjects.push(b)}break;case"bouncer":var b1;var _g2=0;var _g11=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g2<_g11.length){b1=js_Boot.__cast(_g11[_g2++],project_game_objects_Bouncer);b1.initialize();this.middleSortable.addTile(b1);this.updateableObjects.push(b1);this.culledObjects.push(b1)}break;case"button":var s;var _g3=0;var _g12=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g3<_g12.length){s=js_Boot.__cast(_g12[_g3++],project_game_objects_DoorSwitch);s.detectionType=project_game_CallbackTypes.bearType;s.initialize();this.backgroundFixed.addTile(s);switches.push(s);this.culledObjects.push(s)}break;case"camera":var tc=js_Boot.__cast((__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1])[0],openfl_display_TileContainer);this.cameraStartingPosition=new openfl_geom_Point(tc.get_x(),tc.get_y());break;case"conveyorbelt":var c;var _g4=0;var _g13=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g4<_g13.length){c=js_Boot.__cast(_g13[_g4++],project_game_objects_ConveyorBelt);c.initialize();this.backgroundFixed.addTile(c);this.updateableObjects.push(c);this.culledObjects.push(c)}break;case"door":var d;var _g5=0;var _g14=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g5<_g14.length){d=js_Boot.__cast(_g14[_g5++],project_game_objects_Door);this.middleSortable.addTile(d);doors.push(d);this.updateableObjects.push(d);var df=new project_game_objects_DoorFloor(d.direction);df.set_x(d.get_x());df.set_y(d.get_y());this.backgroundFixed.addTile(df);this.culledObjects.push(d);this.culledObjects.push(df)}break;case"goal":var g=js_Boot.__cast((__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1])[0],project_game_objects_Goal);g.initialize();this.backgroundFixed.addTile(g);g.detectionCallback=$bind(this,this.bearOnGoal);this.goal=g;this.culledObjects.push(g);this.updateableObjects.push(g);var _this=this.goal.body;var gf=new project_game_objects_GoalFlag(_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer);gf.set_x(g.get_x());gf.set_y(g.get_y());gf.initialize();this.middleSortable.addTile(gf);this.culledObjects.push(gf);this.updateableObjects.push(gf);break;case"grizzly":var b2=js_Boot.__cast((__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1])[0],project_game_objects_Bear);var d1=new project_game_effects_DustParticle;this.backgroundFixed.addTile(d1);b2.particles=d1;b2.initialize();this.middleSortable.addTile(b2);this.bears.push(b2);this.updateableObjects.push(b2);this.culledObjects.push(b2);break;case"hole":var h;var _g6=0;var _g15=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g6<_g15.length){h=js_Boot.__cast(_g15[_g6++],project_game_objects_Hole);h.initialize();holes.push(h);this.updateableObjects.push(h)}break;case"ice":var b3=js_Boot.__cast((__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1])[0],project_game_objects_Bear);var d2=new project_game_effects_DustParticle;this.backgroundFixed.addTile(d2);b3.particles=d2;b3.initialize();this.middleSortable.addTile(b3);this.bears.push(b3);this.updateableObjects.push(b3);this.culledObjects.push(b3);break;case"inflatable":var inf;var _g7=0;var _g16=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g7<_g16.length){inf=js_Boot.__cast(_g16[_g7++],project_game_objects_Inflatable);inf.initialize();this.middleSortable.addTile(inf);this.updateableObjects.push(inf);this.culledObjects.push(inf)}break;case"oneside":var w;var _g8=0;var _g17=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g8<_g17.length){w=js_Boot.__cast(_g17[_g8++],project_game_objects_OneSideWall);w.detectionType=project_game_CallbackTypes.bearType;w.initialize();this.middleSortable.addTile(w);this.updateableObjects.push(w);this.culledObjects.push(w)}break;case"panda":var b4=js_Boot.__cast((__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1])[0],project_game_objects_Bear);var d3=new project_game_effects_DustParticle;this.backgroundFixed.addTile(d3);b4.particles=d3;b4.initialize();this.middleSortable.addTile(b4);this.bears.push(b4);this.updateableObjects.push(b4);this.culledObjects.push(b4);break;case"propbox":var pb;var _g9=0;var _g18=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g9<_g18.length){pb=js_Boot.__cast(_g18[_g9++],project_game_objects_props_PropBox);this.middleSortable.addTile(pb);pb.initialize();this.updateableObjects.push(pb)}break;case"proptrash":var pt;var _g10=0;var _g19=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g10<_g19.length){pt=js_Boot.__cast(_g19[_g10++],project_game_objects_props_Trash);this.middleSortable.addTile(pt);pt.initialize();this.updateableObjects.push(pt)}break;case"splat":var s1;var _g20=0;var _g110=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g20<_g110.length){s1=js_Boot.__cast(_g110[_g20++],project_game_objects_Splat);s1.initialize();this.backgroundFixed.addTile(s1);this.culledObjects.push(s1)}break;case"teleport":var d4;var _g21=0;var _g111=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g21<_g111.length){d4=js_Boot.__cast(_g111[_g21++],project_game_objects_Teleport);this.backgroundFixed.addTile(d4);teleports.push(d4);this.updateableObjects.push(d4)}break;case"timeddoor":var d5;var _g22=0;var _g112=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g22<_g112.length){d5=js_Boot.__cast(_g112[_g22++],project_game_objects_TimedDoor);d5.initialize();this.middleSortable.addTile(d5);this.updateableObjects.push(d5);this.culledObjects.push(d5)}break;case"wallbouncer":var b5;var _g23=0;var _g113=__map_reserved[k1]!=null?objects.getReserved(k1):objects.h[k1];while(_g23<_g113.length){b5=js_Boot.__cast(_g113[_g23++],project_game_objects_WallBouncer);b5.initialize();this.middleSortable.addTile(b5);this.updateableObjects.push(b5);this.culledObjects.push(b5)}break}}this.goal.fixGraph(this.bears.length);var _g24=0;while(_g24<holes.length)this.backgroundFixed.addTile(holes[_g24++]);var _g114=0;while(_g114<doors.length){var d6=doors[_g114];++_g114;if(d6.doorGroup>0){var _g115=0;while(_g115<switches.length){var s2=switches[_g115];++_g115;if(s2.doorGroup==d6.doorGroup){d6.detectionType=project_game_CallbackTypes.bearType;d6.switches.push(s2)}}}d6.initialize()}var _g25=0;while(_g25<teleports.length){var t=teleports[_g25];++_g25;if(t.teleID>0){var _g26=0;while(_g26<teleports.length){var e=teleports[_g26];++_g26;if(e.teleID==t.targetID){t.teleportExit=e}}}t.initialize()}},indicatorTM:null,createIndicators:function(){this.indicatorTM=new openfl_display_Tilemap(js_Boot.__cast(this.mainTilemap.get_width(),Int),js_Boot.__cast(this.mainTilemap.get_height(),Int),null,true);this.indicatorTM.set_x(-32);this.indicatorTM.set_y(-32);var indicators=[];var _g=0;var _g1=this.bears.length;while(_g<_g1){var i=_g++;if(this.bears[i].specie==3){indicators.push(new project_game_ui_ObjectIndicator("grizzly"))}else if(this.bears[i].specie==1){indicators.push(new project_game_ui_ObjectIndicator("panda"))}else if(this.bears[i].specie==2){indicators.push(new project_game_ui_ObjectIndicator("ice"))}}indicators.push(new project_game_ui_ObjectIndicator("goal"));var _g2=0;var _g3=indicators.length;while(_g2<_g3){var i1=_g2++;this.indicatorTM.addTile(indicators[i1]);indicators[i1].canvas=this;this.updateableObjects.push(indicators[i1]);if(i1<indicators.length-1){indicators[i1].target=this.bears[i1]}else{indicators[i1].target=this.goal}}},__class__:project_game_Game});var project_game_InputController=function(s){this.startDragPosition=new openfl_geom_Point;this.dragTolerance=5;this.isClicking=false;this.isDragging=false;this.target=s;this.target.addEventListener("mouseDown",$bind(this,this.startClick));this.target.addEventListener("mouseUp",$bind(this,this.endClick))};$hxClasses["project.game.InputController"]=project_game_InputController;project_game_InputController.__name__="project.game.InputController";project_game_InputController.prototype={isDragging:null,isClicking:null,dragTolerance:null,clickCallback:null,dragCallback:null,releaseCallback:null,target:null,startDragPosition:null,startClick:function(e){e.stageX/=this.target.get_scaleX();e.stageY/=this.target.get_scaleY();this.isClicking=true;this.target.addEventListener("mouseMove",$bind(this,this.mouseMoving));if(this.clickCallback!=null){this.startDragPosition.x=e.stageX;this.startDragPosition.y=e.stageY;this.clickCallback(e.stageX,e.stageY)}},mouseMoving:function(e){e.stageX/=this.target.get_scaleX();e.stageY/=this.target.get_scaleY();if(this.dragCallback!=null&&Math.abs(openfl_geom_Point.distance(this.startDragPosition,new openfl_geom_Point(e.stageX,e.stageY)))>this.dragTolerance){this.isDragging=true;this.dragCallback(e.stageX,e.stageY)}},endClick:function(e){e.stageX/=this.target.get_scaleX();e.stageY/=this.target.get_scaleY();this.target.removeEventListener("mouseMove",$bind(this,this.mouseMoving));if(this.releaseCallback!=null){this.releaseCallback(e.stageX,e.stageY)}this.isDragging=false},cancelClick:function(){this.target.removeEventListener("mouseMove",$bind(this,this.mouseMoving));this.isDragging=false},remove:function(){this.target.removeEventListener("mouseDown",$bind(this,this.startClick));this.target.removeEventListener("mouseUp",$bind(this,this.endClick));this.target.removeEventListener("mouseMove",$bind(this,this.mouseMoving))},__class__:project_game_InputController};var project_game_effects_DustParticle=function(){this.current=-1;this.lifetime=2;this.dust=[];openfl_display_TileContainer.call(this);this.particleSheet=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/effects/dust_particle.png"));this.particleSheet.slice(1,1)};$hxClasses["project.game.effects.DustParticle"]=project_game_effects_DustParticle;project_game_effects_DustParticle.__name__="project.game.effects.DustParticle";project_game_effects_DustParticle.__super__=openfl_display_TileContainer;project_game_effects_DustParticle.prototype=$extend(openfl_display_TileContainer.prototype,{dust:null,particleSheet:null,setup:function(originX,originY,angle,maxDust){this.set_x(originX);this.set_y(originY);this.set_rotation(angle);var _g=0;while(_g<maxDust){++_g;var t=new openfl_display_Tile(0,-8,Math.random()*16-8,0,0,0,8,8);this.dust.push(t);t.set_tileset(this.particleSheet)}},lifetime:null,current:null,reset:function(){this.current=-1},emit:function(posX,posY){if(this.current>=this.dust.length-1){return}this.current+=1;this.dust[this.current].set_x(posX);this.dust[this.current].set_y(posY);this.dust[this.current].set_scaleX(0);this.dust[this.current].set_scaleY(0);this.dust[this.current].set_alpha(1);this.parent.addTile(this.dust[this.current]);engine_tweens_Actuator.tween(this.dust[this.current],this.lifetime,{scaleX:3-2.9*this.current/this.dust.length,scaleY:3-2.9*this.current/this.dust.length,alpha:0})},__class__:project_game_effects_DustParticle});var project_game_effects_PhysicsEffectsPlayer=function(s,tc){this.space=s;this.effectsContainer=tc;if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}var banisterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,project_game_CallbackTypes.bearType,project_game_CallbackTypes.banisterType,$bind(this,this.bearOnBanister));var _this=this.space.zpp_inner.wrap_listeners;if(_this.zpp_inner.reverse_flag){_this.push(banisterListener)}else{_this.unshift(banisterListener)}};$hxClasses["project.game.effects.PhysicsEffectsPlayer"]=project_game_effects_PhysicsEffectsPlayer;project_game_effects_PhysicsEffectsPlayer.__name__="project.game.effects.PhysicsEffectsPlayer";project_game_effects_PhysicsEffectsPlayer.prototype={space:null,effectsContainer:null,bearOnBanister:function(collision){},__class__:project_game_effects_PhysicsEffectsPlayer};var zpp_$nape_util_ZPP_$PubPool=function(){};$hxClasses["zpp_nape.util.ZPP_PubPool"]=zpp_$nape_util_ZPP_$PubPool;zpp_$nape_util_ZPP_$PubPool.__name__="zpp_nape.util.ZPP_PubPool";var zpp_$nape_geom_ZPP_$Vec2=function(){this.y=0;this.x=0;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.weak=false;this.outer=null;this._isimmutable=null;this._immutable=false;this._validate=null;this._invalidate=null};$hxClasses["zpp_nape.geom.ZPP_Vec2"]=zpp_$nape_geom_ZPP_$Vec2;zpp_$nape_geom_ZPP_$Vec2.__name__="zpp_nape.geom.ZPP_Vec2";zpp_$nape_geom_ZPP_$Vec2.prototype={_invalidate:null,_validate:null,_immutable:null,_isimmutable:null,outer:null,weak:null,next:null,_inuse:null,modified:null,pushmod:null,length:null,add:function(o){o._inuse=true;o.next=this.next;this.next=o;this.modified=true;this.length++;return o},insert:function(cur,o){o._inuse=true;if(cur==null){o.next=this.next;this.next=o}else{o.next=cur.next;cur.next=o}this.pushmod=this.modified=true;this.length++;return o},erase:function(pre){var old;var ret;if(pre==null){old=this.next;ret=old.next;this.next=ret;if(this.next==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}old._inuse=false;this.modified=true;this.length--;this.pushmod=true;return ret},reverse:function(){var cur=this.next;var pre=null;while(cur!=null){var nx=cur.next;cur.next=pre;this.next=cur;pre=cur;cur=nx}this.modified=true;this.pushmod=true},iterator_at:function(ind){var ret=this.next;while(ind-- >0&&ret!=null)ret=ret.next;return ret},x:null,y:null,toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:zpp_$nape_geom_ZPP_$Vec2};var project_game_objects_Banister=function(id,x,y,wallType,spc){this.banisherCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var b=zpp_$nape_util_ZPP_$Flags.BodyType_STATIC;var x1=x;var y1=y;if(y==null){y1=0}if(x==null){x1=0}var x2=x1;var y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x2;ret1.y=y2;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var b1;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x2){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}b1=ret.zpp_inner.y==y2}else{b1=false}if(!b1){ret.zpp_inner.x=x2;ret.zpp_inner.y=y2;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var b2=new nape_phys_Body(b,ret);var s=b2.zpp_inner.wrap_shapes;if(b2.zpp_inner_i.wrap_cbTypes==null){b2.zpp_inner_i.setupcbTypes()}var _this3=b2.zpp_inner_i.wrap_cbTypes;var obj=this.banisherCbType;if(_this3.zpp_inner.reverse_flag){_this3.push(obj)}else{_this3.unshift(obj)}switch(id){case 0:var obj1=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj1)}else{s.unshift(obj1)}break;case 1:var obj2=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj2)}else{s.unshift(obj2)}break;case 2:var obj3=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj3)}else{s.unshift(obj3)}break;case 3:var obj4=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj4)}else{s.unshift(obj4)}break;case 4:var obj5=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj5)}else{s.unshift(obj5)}var obj6=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj6)}else{s.unshift(obj6)}break;case 5:var obj7=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj7)}else{s.unshift(obj7)}var obj8=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj8)}else{s.unshift(obj8)}break;case 6:var obj9=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj9)}else{s.unshift(obj9)}var obj10=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj10)}else{s.unshift(obj10)}break;case 7:var obj11=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj11)}else{s.unshift(obj11)}var obj12=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj12)}else{s.unshift(obj12)}break;case 8:var obj13=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj13)}else{s.unshift(obj13)}var obj14=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj14)}else{s.unshift(obj14)}var obj15=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj15)}else{s.unshift(obj15)}break;case 9:var obj16=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj16)}else{s.unshift(obj16)}var obj17=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj17)}else{s.unshift(obj17)}var obj18=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj18)}else{s.unshift(obj18)}break;case 10:var obj19=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj19)}else{s.unshift(obj19)}var obj20=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj20)}else{s.unshift(obj20)}var obj21=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj21)}else{s.unshift(obj21)}break;case 11:var obj22=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj22)}else{s.unshift(obj22)}var obj23=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj23)}else{s.unshift(obj23)}var obj24=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj24)}else{s.unshift(obj24)}break;case 12:var obj25=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj25)}else{s.unshift(obj25)}var obj26=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj26)}else{s.unshift(obj26)}var obj27=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj27)}else{s.unshift(obj27)}var obj28=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj28)}else{s.unshift(obj28)}break;case 13:var obj29=new nape_shape_Polygon(project_game_objects_Banister.leftrect);if(s.zpp_inner.reverse_flag){s.push(obj29)}else{s.unshift(obj29)}var obj30=new nape_shape_Polygon(project_game_objects_Banister.rightrect);if(s.zpp_inner.reverse_flag){s.push(obj30)}else{s.unshift(obj30)}break;case 14:var obj31=new nape_shape_Polygon(project_game_objects_Banister.uprect);if(s.zpp_inner.reverse_flag){s.push(obj31)}else{s.unshift(obj31)}var obj32=new nape_shape_Polygon(project_game_objects_Banister.downrect);if(s.zpp_inner.reverse_flag){s.push(obj32)}else{s.unshift(obj32)}break;default:var obj33=new nape_shape_Circle(2);if(s.zpp_inner.reverse_flag){s.push(obj33)}else{s.unshift(obj33)}}b2.setShapeMaterials(nape_phys_Material.steel());b2.zpp_inner.immutable_midstep("Body::space");if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=spc){if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=null){b2.zpp_inner.component.woken=false}if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=null){(b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b2)}if(spc!=null){var _this4=spc.zpp_inner.wrap_bodies;if(_this4.zpp_inner.reverse_flag){_this4.push(b2)}else{_this4.unshift(b2)}}}project_entities_PhysicalTile.call(this,id,x,y,1,1,0,32,48,b2,false);this.data.sortCriteria=y-12;if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,project_game_CallbackTypes.bearType,this.banisherCbType,$bind(this,this.bounceEffect));var _this5=this.body;var _this6=(_this5.zpp_inner.space==null?null:_this5.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj34=this.bounceListener;if(_this6.zpp_inner.reverse_flag){_this6.push(obj34)}else{_this6.unshift(obj34)}};$hxClasses["project.game.objects.Banister"]=project_game_objects_Banister;project_game_objects_Banister.__name__="project.game.objects.Banister";project_game_objects_Banister.__super__=project_entities_PhysicalTile;project_game_objects_Banister.prototype=$extend(project_entities_PhysicalTile.prototype,{bounceListener:null,banisherCbType:null,bounceEffect:function(collision){engine_soundlib_SoundList.FX(24,0,false)},__class__:project_game_objects_Banister});var project_game_objects_BearState=$hxEnums["project.game.objects.BearState"]={__ename__:"project.game.objects.BearState",__constructs__:["NORMAL","SPAWNING","SPECIAL","NONE","SHOOT"],NORMAL:{_hx_index:0,__enum__:"project.game.objects.BearState",toString:$estr},SPAWNING:{_hx_index:1,__enum__:"project.game.objects.BearState",toString:$estr},SPECIAL:{_hx_index:2,__enum__:"project.game.objects.BearState",toString:$estr},NONE:{_hx_index:3,__enum__:"project.game.objects.BearState",toString:$estr},SHOOT:{_hx_index:4,__enum__:"project.game.objects.BearState",toString:$estr}};var project_game_objects_Bear=function(sp,s){if(sp==null){sp=1}this.onGoal=false;this.rotationOffset=0;this.effectVelocityLimit=250;this.wasShot=false;this.lastPosition=new openfl_geom_Point;this.fallingFrom=-550;this.bearCbType=project_game_CallbackTypes.bearType;this.extraSpawnDelay=0;this.DEFAULTGROUP=3;this.state=project_game_objects_BearState.SPAWNING;this.specie=sp;if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var b=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC);var _this=b.zpp_inner.wrap_shapes;var obj=new nape_shape_Circle(29);if(_this.zpp_inner.reverse_flag){_this.push(obj)}else{_this.unshift(obj)}b.zpp_inner.immutable_midstep("Body::space");if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=s){if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){b.zpp_inner.component.woken=false}if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){(b.zpp_inner.space==null?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b)}if(s!=null){var _this1=s.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(b)}else{_this1.unshift(b)}}}b.zpp_inner.immutable_midstep("Body::"+"true");if(!b.zpp_inner.norotate!=true){b.zpp_inner.norotate=false;b.zpp_inner.invalidate_inertia()}if(b.zpp_inner.angvel!=0){b.zpp_inner.angvel=0;b.zpp_inner.wake()}b.zpp_inner.bulletEnabled=true;project_entities_PhysicalTile.call(this,0,0,0,1,1,0,32,45,b,false);var mat=nape_phys_Material.rubber();if(1!=mat.zpp_inner.density*1e3){mat.zpp_inner.density=.001;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}if(1!=mat.zpp_inner.dynamicFriction){mat.zpp_inner.dynamicFriction=1;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(1!=mat.zpp_inner.elasticity){mat.zpp_inner.elasticity=1;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(0!=mat.zpp_inner.rollingFriction){mat.zpp_inner.rollingFriction=0;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(1!=mat.zpp_inner.staticFriction){mat.zpp_inner.staticFriction=1;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}b.setShapeMaterials(mat);if(b.zpp_inner_i.wrap_cbTypes==null){b.zpp_inner_i.setupcbTypes()}var _this2=b.zpp_inner_i.wrap_cbTypes;var obj1=this.bearCbType;if(_this2.zpp_inner.reverse_flag){_this2.push(obj1)}else{_this2.unshift(obj1)}this.shadow=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_BEAR_SHADOW_ATLAS,.5,.5);this.shadow.set_x(32);this.shadow.set_y(43);this.shadow.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.bearBase=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_BEAR_BASE_ATLAS,.5,.5);this.bearBase.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.bearBase.set_x(32);this.bearBase.set_y(43);var bearSheet;switch(sp){case 2:bearSheet=project_game_util_GameTiles.OBJECT_BEAR_ICE;this.extraSpawnDelay=1;break;case 3:bearSheet=project_game_util_GameTiles.OBJECT_BEAR_GRIZZLY;this.extraSpawnDelay=0;break;default:bearSheet=project_game_util_GameTiles.OBJECT_BEAR_PANDA;this.extraSpawnDelay=.5}this.bearImg=new engine_mapsheet_AnimatedTile(0,0);this.bearImg.set_tileset(bearSheet);this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("2",[0],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("3",[1],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("6",[2],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("9",[3],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("8",[4],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("7",[3],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("4",[2],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("1",[1],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("happy",[5],true,10));this.bearImg.addBehavior(new engine_mapsheet_data_Behavior("fall",[5],true,10));this.bearImg.showBehavior("2");this.bearImg.update(1);this.shadowContainer=new openfl_display_TileContainer;this.shadowContainer.addTile(this.shadow);this.addTile(this.shadowContainer);this.bearContainer=new openfl_display_TileContainer;this.bearContainer.addTile(this.bearBase);this.bearContainer.addTile(this.bearImg);this.addTile(this.bearContainer);this.bearImg.set_originX(32);this.bearImg.set_x(32);this.bearImg.set_y(3);var _this3=this.body;if(_this3.zpp_inner_i.userData==null){_this3.zpp_inner_i.userData={}}_this3.zpp_inner_i.userData.object=this;var _this4=b.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this4.zpp_inner.sensorGroup!=3){_this4.zpp_inner.sensorGroup=3;_this4.zpp_inner.invalidate()}this.DEFAULTGROUP=3;this.data.sortCriteria=Infinity};$hxClasses["project.game.objects.Bear"]=project_game_objects_Bear;project_game_objects_Bear.__name__="project.game.objects.Bear";project_game_objects_Bear.__super__=project_entities_PhysicalTile;project_game_objects_Bear.prototype=$extend(project_entities_PhysicalTile.prototype,{bearImg:null,bearBase:null,shadow:null,state:null,specie:null,bearContainer:null,shadowContainer:null,DEFAULTGROUP:null,extraSpawnDelay:null,particles:null,bearCbType:null,fallingFrom:null,bounceListener:null,bounceCbType:null,enterGoalListener:null,exitGoalListener:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.shadow.set_visible(false);this.bearContainer.set_y(this.fallingFrom);this.bounceCbType=new nape_callbacks_CbType;var _this10=this.body;if(_this10.zpp_inner_i.wrap_cbTypes==null){_this10.zpp_inner_i.setupcbTypes()}var _this11=_this10.zpp_inner_i.wrap_cbTypes;var obj=this.bounceCbType;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.bounceCbType,$bind(this,this.bounceEffect));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.bounceListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}var happyCbType=new nape_callbacks_CbType;var _this14=this.body;if(_this14.zpp_inner_i.wrap_cbTypes==null){_this14.zpp_inner_i.setupcbTypes()}var _this15=_this14.zpp_inner_i.wrap_cbTypes;if(_this15.zpp_inner.reverse_flag){_this15.push(happyCbType)}else{_this15.unshift(happyCbType)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterGoalListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,happyCbType,project_game_CallbackTypes.goalType,$bind(this,this.bodyEnterGoal));if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitGoalListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,happyCbType,project_game_CallbackTypes.goalType,$bind(this,this.bodyExitGoal));var _this16=this.body;var _this17=(_this16.zpp_inner.space==null?null:_this16.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj2=this.enterGoalListener;if(_this17.zpp_inner.reverse_flag){_this17.push(obj2)}else{_this17.unshift(obj2)}var _this18=this.body;var _this19=(_this18.zpp_inner.space==null?null:_this18.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj3=this.exitGoalListener;if(_this19.zpp_inner.reverse_flag){_this19.push(obj3)}else{_this19.unshift(obj3)}this.particles.setup(this.get_x(),this.get_y(),this.get_rotation()+90,25)},update:function(dt){var _this=this.body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.sqrt(tmp1+tmp2*_this1.zpp_inner.y)<=.05){var _this6=this.body;var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp3;var _this7=ret.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(ret.zpp_inner.x==x){var _this8=ret.zpp_inner;if(_this8._validate!=null){_this8._validate()}tmp3=ret.zpp_inner.y==y}else{tmp3=false}if(!tmp3){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this9=ret.zpp_inner;if(_this9._invalidate!=null){_this9._invalidate(_this9)}}}ret.zpp_inner.weak=true;var velocity=ret;if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}var _this10=_this6.zpp_inner.wrap_vel;var _this11=velocity.zpp_inner;if(_this11._validate!=null){_this11._validate()}var x1=velocity.zpp_inner.x;var _this12=velocity.zpp_inner;if(_this12._validate!=null){_this12._validate()}var y1=velocity.zpp_inner.y;var tmp4;var _this13=_this10.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(_this10.zpp_inner.x==x1){var _this14=_this10.zpp_inner;if(_this14._validate!=null){_this14._validate()}tmp4=_this10.zpp_inner.y==y1}else{tmp4=false}if(!tmp4){_this10.zpp_inner.x=x1;_this10.zpp_inner.y=y1;var _this15=_this10.zpp_inner;if(_this15._invalidate!=null){_this15._invalidate(_this15)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}}switch(this.state._hx_index){case 0:this.normalUpdate(dt);break;case 1:this.spawnUpdate(dt);break;case 2:break;case 4:this.shotUpdate(dt);break;default:return}},spawnUpdate:function(dt){var _gthis=this;this.data.sortCriteria=Infinity;this.set_visible(true);this.bearContainer.set_y(this.fallingFrom);this.shadow.set_scaleX(0);this.shadow.set_scaleY(0);this.shadow.set_visible(true);this.bearImg.showBehavior("fall");this.bearImg.update(1);engine_tweens_Actuator.tween(this.bearContainer,1.5,{y:0}).ease(motion_easing_Bounce.easeOut).delay(this.extraSpawnDelay).onComplete(function(f){return _gthis.state=project_game_objects_BearState.NORMAL});engine_tweens_Actuator.tween(this.shadow,1.5,{scaleX:1,scaleY:1}).delay(this.extraSpawnDelay).ease(motion_easing_Bounce.easeOut);engine_soundlib_SoundList.FX(26,this.extraSpawnDelay,true);this.state=project_game_objects_BearState.NONE;this.extraSpawnDelay=0},shotUpdate:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);this.rotateBear();this.set_x(Math.round(this.get_x()));this.set_y(Math.round(this.get_y()));var _this=this.body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.abs(Math.sqrt(tmp1+tmp2*_this1.zpp_inner.y))<=1){this.state=project_game_objects_BearState.NORMAL;var _this6=this.body;var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp3;var _this7=ret.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(ret.zpp_inner.x==x){var _this8=ret.zpp_inner;if(_this8._validate!=null){_this8._validate()}tmp3=ret.zpp_inner.y==y}else{tmp3=false}if(!tmp3){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this9=ret.zpp_inner;if(_this9._invalidate!=null){_this9._invalidate(_this9)}}}ret.zpp_inner.weak=true;var velocity=ret;if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}var _this10=_this6.zpp_inner.wrap_vel;var _this11=velocity.zpp_inner;if(_this11._validate!=null){_this11._validate()}var x1=velocity.zpp_inner.x;var _this12=velocity.zpp_inner;if(_this12._validate!=null){_this12._validate()}var y1=velocity.zpp_inner.y;var tmp4;var _this13=_this10.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(_this10.zpp_inner.x==x1){var _this14=_this10.zpp_inner;if(_this14._validate!=null){_this14._validate()}tmp4=_this10.zpp_inner.y==y1}else{tmp4=false}if(!tmp4){_this10.zpp_inner.x=x1;_this10.zpp_inner.y=y1;var _this15=_this10.zpp_inner;if(_this15._invalidate!=null){_this15._invalidate(_this15)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}this.wasShot=false}else{this.state=project_game_objects_BearState.SHOOT}this.data.sortCriteria=this.get_y();if(this.wasShot){this.shotEffect()}},normalUpdate:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);this.rotateBear();this.set_x(Math.round(this.get_x()));this.set_y(Math.round(this.get_y()));this.data.sortCriteria=this.get_y();var _this=this.body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}this.state=Math.abs(Math.sqrt(tmp1+tmp2*_this1.zpp_inner.y))<=1?project_game_objects_BearState.NORMAL:project_game_objects_BearState.SHOOT;this.lastPosition.x=this.get_x();this.lastPosition.y=this.get_y()},canTouchThis:function(){return this.state==project_game_objects_BearState.NORMAL},lastPosition:null,wasShot:null,shot:function(direction,force){var _this=this.body;var velocity=direction.muleq(force);if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=velocity.zpp_inner;if(_this2._validate!=null){_this2._validate()}var x=velocity.zpp_inner.x;var _this3=velocity.zpp_inner;if(_this3._validate!=null){_this3._validate()}var y=velocity.zpp_inner.y;var tmp;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(_this1.zpp_inner.x==x){var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp=_this1.zpp_inner.y==y}else{tmp=false}if(!tmp){_this1.zpp_inner.x=x;_this1.zpp_inner.y=y;var _this6=_this1.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}this.state=project_game_objects_BearState.SHOOT;this.wasShot=true;this.particles.reset()},effectVelocityLimit:null,shotEffect:function(){if(this.shotEffect!=null){var _this=this.body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.sqrt(tmp1+tmp2*_this1.zpp_inner.y)>this.effectVelocityLimit){this.particles.emit(this.get_x(),this.get_y());this.particles.emit(this.get_x()+Std.random(16)-8,this.get_y()+Std.random(16)-8);this.particles.emit(this.get_x()+Std.random(16)-8,this.get_y()+Std.random(16)-8)}}},disableVisuals:function(){this.set_visible(false);this.bearImg.set_visible(false);this.bearBase.set_visible(false);this.shadow.set_visible(false)},disablePhysics:function(){var _this=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this.zpp_inner.collisionGroup!=0){_this.zpp_inner.collisionGroup=0;_this.zpp_inner.invalidate()}var _this1=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this1.zpp_inner.sensorGroup!=0){_this1.zpp_inner.sensorGroup=0;_this1.zpp_inner.invalidate()}},disableUpdate:function(){this.state=project_game_objects_BearState.NONE},respawn:function(){this.set_visible(true);this.bearImg.set_visible(true);this.bearBase.set_visible(true);var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.lastPosition.x;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.lastPosition.y;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.set_x(this.lastPosition.x);this.set_y(this.lastPosition.y);var _this10=this.body;var x1=0;var y1=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x1;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this11=ret.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(ret.zpp_inner.x==x1){var _this12=ret.zpp_inner;if(_this12._validate!=null){_this12._validate()}tmp=ret.zpp_inner.y==y1}else{tmp=false}if(!tmp){ret.zpp_inner.x=x1;ret.zpp_inner.y=y1;var _this13=ret.zpp_inner;if(_this13._invalidate!=null){_this13._invalidate(_this13)}}}ret.zpp_inner.weak=true;var velocity=ret;if(_this10.zpp_inner.wrap_vel==null){_this10.zpp_inner.setupVelocity()}var _this14=_this10.zpp_inner.wrap_vel;var _this15=velocity.zpp_inner;if(_this15._validate!=null){_this15._validate()}var x2=velocity.zpp_inner.x;var _this16=velocity.zpp_inner;if(_this16._validate!=null){_this16._validate()}var y2=velocity.zpp_inner.y;var tmp1;var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(_this14.zpp_inner.x==x2){var _this18=_this14.zpp_inner;if(_this18._validate!=null){_this18._validate()}tmp1=_this14.zpp_inner.y==y2}else{tmp1=false}if(!tmp1){_this14.zpp_inner.x=x2;_this14.zpp_inner.y=y2;var _this19=_this14.zpp_inner;if(_this19._invalidate!=null){_this19._invalidate(_this19)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this10.zpp_inner.wrap_vel==null){_this10.zpp_inner.setupVelocity()}this.state=project_game_objects_BearState.SPAWNING;var _this20=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();var collisionGroup=this.DEFAULTGROUP;if(_this20.zpp_inner.collisionGroup!=collisionGroup){_this20.zpp_inner.collisionGroup=collisionGroup;_this20.zpp_inner.invalidate()}var _this21=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();var sensorGroup=this.DEFAULTGROUP;if(_this21.zpp_inner.sensorGroup!=sensorGroup){_this21.zpp_inner.sensorGroup=sensorGroup;_this21.zpp_inner.invalidate()}},rotationOffset:null,lookAt:function(degrees){this.rotationOffset=-degrees+this.body.zpp_inner.rot*180/Math.PI-180;this.rotateBear()},rotateBear:function(){var wrappedrotation=engine_utils_MathUtils.wrap(-this.body.zpp_inner.rot*180/Math.PI+22.5+this.rotationOffset,0,360);var tmp;if(this.onGoal&&this.bearImg.currentBehavior.name!="happy"){var _this=this.body;if(_this.zpp_inner.wrap_vel==null){_this.zpp_inner.setupVelocity()}var _this1=_this.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp1=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp2=tmp1*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp3=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp=Math.sqrt(tmp2+tmp3*_this1.zpp_inner.y)<=.01}else{tmp=false}if(tmp){this.rotationOffset=-180+this.body.zpp_inner.rot*180/Math.PI-180;this.bearImg.showBehavior("happy");this.bearImg.update(1)}var tmp4;if(this.onGoal){var _this6=this.body;if(_this6.zpp_inner.wrap_vel==null){_this6.zpp_inner.setupVelocity()}var _this7=_this6.zpp_inner.wrap_vel;var _this8=_this7.zpp_inner;if(_this8._validate!=null){_this8._validate()}var tmp5=_this7.zpp_inner.x;var _this9=_this7.zpp_inner;if(_this9._validate!=null){_this9._validate()}var tmp6=tmp5*_this7.zpp_inner.x;var _this10=_this7.zpp_inner;if(_this10._validate!=null){_this10._validate()}var tmp7=_this7.zpp_inner.y;var _this11=_this7.zpp_inner;if(_this11._validate!=null){_this11._validate()}tmp4=Math.sqrt(tmp6+tmp7*_this7.zpp_inner.y)<=.01}else{tmp4=false}if(tmp4){return}if(wrappedrotation<45){this.bearImg.showBehavior("2");this.bearImg.set_scaleX(1)}else if(wrappedrotation<90){this.bearImg.showBehavior("3");this.bearImg.set_scaleX(1)}else if(wrappedrotation<135){this.bearImg.showBehavior("6");this.bearImg.set_scaleX(1)}else if(wrappedrotation<180){this.bearImg.showBehavior("9");this.bearImg.set_scaleX(1)}else if(wrappedrotation<225){this.bearImg.showBehavior("8");this.bearImg.set_scaleX(1)}else if(wrappedrotation<270){this.bearImg.showBehavior("7");this.bearImg.set_scaleX(-1)}else if(wrappedrotation<315){this.bearImg.showBehavior("4");this.bearImg.set_scaleX(-1)}else if(wrappedrotation<360){this.bearImg.showBehavior("1");this.bearImg.set_scaleX(-1)}this.bearImg.update(1)},bounceEffect:function(collision){var _gthis=this;engine_tweens_Actuator.tween(this.bearBase,.1,{scaleX:.9,scaleY:.9},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.bearBase,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_soundlib_SoundList.FX(16,0,false)},onGoal:null,bodyEnterGoal:function(collision){this.onGoal=true},bodyExitGoal:function(collision){this.onGoal=false},__class__:project_game_objects_Bear});var project_game_objects_Bouncer=function(s){this.somethingChanged=false;this.bouncerCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var bc=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var _this=bc.zpp_inner.wrap_shapes;var obj=new nape_shape_Circle(32);if(_this.zpp_inner.reverse_flag){_this.push(obj)}else{_this.unshift(obj)}bc.zpp_inner.immutable_midstep("Body::space");if((bc.zpp_inner.space==null?null:bc.zpp_inner.space.outer)!=s){if((bc.zpp_inner.space==null?null:bc.zpp_inner.space.outer)!=null){bc.zpp_inner.component.woken=false}if((bc.zpp_inner.space==null?null:bc.zpp_inner.space.outer)!=null){(bc.zpp_inner.space==null?null:bc.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(bc)}if(s!=null){var _this1=s.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(bc)}else{_this1.unshift(bc)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,32,40,bc,false);var mat=nape_phys_Material.rubber();if(1!=mat.zpp_inner.elasticity){mat.zpp_inner.elasticity=1;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(0!=mat.zpp_inner.staticFriction){mat.zpp_inner.staticFriction=0;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(10!=mat.zpp_inner.density*1e3){mat.zpp_inner.density=.01;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}bc.setShapeMaterials(mat);if(bc.zpp_inner_i.wrap_cbTypes==null){bc.zpp_inner_i.setupcbTypes()}var _this2=bc.zpp_inner_i.wrap_cbTypes;var obj1=this.bouncerCbType;if(_this2.zpp_inner.reverse_flag){_this2.push(obj1)}else{_this2.unshift(obj1)}this.baseTileContainer=new openfl_display_TileContainer(32,40);this.customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_BOUNCER_BASE_ATLAS);this.baseTileContainer.addTile(this.customTile);this.addTile(this.baseTileContainer);this.customTile.set_x(-32);this.customTile.set_y(-45);this.customTile.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_BOUNCER_TOP_ATLAS);this.addTile(this.customTile);this.customTile.set_y(-5);this.customTile.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);var _this3=this.body;if(_this3.zpp_inner_i.userData==null){_this3.zpp_inner_i.userData={}}_this3.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.Bouncer"]=project_game_objects_Bouncer;project_game_objects_Bouncer.__name__="project.game.objects.Bouncer";project_game_objects_Bouncer.__super__=project_entities_PhysicalTile;project_game_objects_Bouncer.prototype=$extend(project_entities_PhysicalTile.prototype,{bouncerCbType:null,bounceListener:null,somethingChanged:null,customTile:null,baseTileContainer:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.bouncerCbType,$bind(this,this.bodyOnEnter));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.bounceListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.bouncerCbType,$bind(this,this.bodyOnExit));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.bounceListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}this.data.sortCriteria=this.get_y()},bodyOnEnter:function(collision){if(collision.zpp_inner.int1.outer_i.zpp_inner_i.ibody!=null){var _this=collision.zpp_inner.int1.outer_i;var body=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(body!=null){var tmp=zpp_$nape_phys_ZPP_$Body.types[body.zpp_inner.type];if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(tmp==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this1=body.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var v=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var v1=v*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var v2=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}var force=Math.sqrt(v1+v2*_this1.zpp_inner.y)*15;if(force>1500){force=1500}if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var velocity=body.zpp_inner.wrap_vel.normalise().mul(force);if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this6=body.zpp_inner.wrap_vel;var _this7=velocity.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x=velocity.zpp_inner.x;var _this8=velocity.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y=velocity.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x;_this6.zpp_inner.y=y;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}this.bounceAnim()}}}},bodyOnExit:function(collision){if(collision.zpp_inner.int1.outer_i.zpp_inner_i.ibody!=null){var _this=collision.zpp_inner.int1.outer_i;if((_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null)!=null){if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}}}},bounceAnim:function(){var _gthis=this;engine_tweens_Actuator.tween(this.baseTileContainer,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.baseTileContainer,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_soundlib_SoundList.FX(20,0,false)},update:function(dt){if(this.somethingChanged){project_entities_PhysicalTile.prototype.update.call(this,dt)}},__class__:project_game_objects_Bouncer});var project_game_objects_ConveyorBelt=function(s,dir,size){this.timeMax=350;this.time=0;this.sound=false;this.beltAnimationContainer=[];this.endPos=new openfl_geom_Point;this.startPos=new openfl_geom_Point;this.beltSize=3;this.direction="left";this.force=100;this.conveyorBeltCbType=new nape_callbacks_CbType;this.direction=dir;this.beltSize=size;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var fluidBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var rect;var gravity;var animSheetStart;var animSheetMiddle;var animSheetEnd;switch(this.direction){case"down":rect=nape_shape_Polygon.rect(12,12,40,64*this.beltSize-24);var y=-this.force*100;if(y==null){y=0}var x=0;var y1=y;if(y1==null){y1=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y1;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var gravity1;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}gravity1=ret.zpp_inner.y==y1}else{gravity1=false}if(!gravity1){ret.zpp_inner.x=x;ret.zpp_inner.y=y1;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;gravity=ret;this.startPos.x=0;this.startPos.y=0;this.endPos.x=0;this.endPos.y=64*(this.beltSize-1);animSheetStart=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltDown-start.png"));animSheetMiddle=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltDown-middle.png"));animSheetEnd=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltDown-end.png"));break;case"right":rect=nape_shape_Polygon.rect(12,12,64*this.beltSize-24,40);var x1=-100*this.force;if(x1==null){x1=0}var x2=x1;var y2=0;if(x2==null){x2=0}var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x2;ret3.y=y2;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var gravity2;var _this3=ret2.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(ret2.zpp_inner.x==x2){var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}gravity2=ret2.zpp_inner.y==y2}else{gravity2=false}if(!gravity2){ret2.zpp_inner.x=x2;ret2.zpp_inner.y=y2;var _this5=ret2.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}}ret2.zpp_inner.weak=true;gravity=ret2;this.startPos.x=0;this.startPos.y=0;this.endPos.x=64*(this.beltSize-1);this.endPos.y=0;animSheetStart=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltRight-start.png"));animSheetMiddle=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltRight-middle.png"));animSheetEnd=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltRight-end.png"));break;case"up":rect=nape_shape_Polygon.rect(12,12,40,64*this.beltSize-24);var y3=100*this.force;if(y3==null){y3=0}var x3=0;var y4=y3;if(y4==null){y4=0}var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x3;ret5.y=y4;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var gravity3;var _this6=ret4.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(ret4.zpp_inner.x==x3){var _this7=ret4.zpp_inner;if(_this7._validate!=null){_this7._validate()}gravity3=ret4.zpp_inner.y==y4}else{gravity3=false}if(!gravity3){ret4.zpp_inner.x=x3;ret4.zpp_inner.y=y4;var _this8=ret4.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}}ret4.zpp_inner.weak=true;gravity=ret4;this.startPos.x=0;this.startPos.y=64*(this.beltSize-1);this.endPos.x=0;this.endPos.y=0;animSheetStart=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltUp-start.png"));animSheetMiddle=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltUp-middle.png"));animSheetEnd=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltUp-end.png"));break;default:rect=nape_shape_Polygon.rect(-64*this.beltSize+12,12,64*this.beltSize-24,40);var x4=100*this.force;if(x4==null){x4=0}var x5=x4;var y5=0;if(x5==null){x5=0}var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x5;ret7.y=y5;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var gravity4;var _this9=ret6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(ret6.zpp_inner.x==x5){var _this10=ret6.zpp_inner;if(_this10._validate!=null){_this10._validate()}gravity4=ret6.zpp_inner.y==y5}else{gravity4=false}if(!gravity4){ret6.zpp_inner.x=x5;ret6.zpp_inner.y=y5;var _this11=ret6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}}ret6.zpp_inner.weak=true;gravity=ret6;this.startPos.x=-64;this.startPos.y=0;this.endPos.x=-64*this.beltSize;this.endPos.y=0;animSheetStart=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltLeft-start.png"));animSheetMiddle=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltLeft-middle.png"));animSheetEnd=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beltLeft-end.png"))}var fluidShape=new nape_shape_Polygon(rect);var _this12=fluidShape.zpp_inner.filter.wrapper();if(_this12.zpp_inner.collisionMask!=0){_this12.zpp_inner.collisionMask=0;_this12.zpp_inner.invalidate()}fluidShape.zpp_inner.immutable_midstep("Shape::fluidEnabled");fluidShape.zpp_inner.fluidEnabled=true;if(fluidShape.zpp_inner.fluidProperties==null){var fluidProperties=new nape_phys_FluidProperties;fluidShape.zpp_inner.setFluid(fluidProperties.zpp_inner);fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}fluidShape.zpp_inner.fluidProperties.wrapper()}fluidShape.zpp_inner.wake();var _this13=fluidShape.zpp_inner.filter.wrapper();if(_this13.zpp_inner.fluidMask!=1){_this13.zpp_inner.fluidMask=1;_this13.zpp_inner.invalidate()}fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this14=fluidShape.zpp_inner.fluidProperties.wrapper();if(60!=_this14.zpp_inner.viscosity){_this14.zpp_inner.viscosity=60;_this14.zpp_inner.invalidate()}fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this15=fluidShape.zpp_inner.fluidProperties.wrapper();if(gravity==null){if(_this15.zpp_inner.wrap_gravity!=null){_this15.zpp_inner.wrap_gravity.zpp_inner._inuse=false;var _this16=_this15.zpp_inner.wrap_gravity;var inner=_this16.zpp_inner;_this16.zpp_inner.outer=null;_this16.zpp_inner=null;_this16.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=_this16;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner;_this15.zpp_inner.wrap_gravity=null}}else{if(_this15.zpp_inner.wrap_gravity==null){_this15.zpp_inner.getgravity()}var _this17=_this15.zpp_inner.wrap_gravity;var _this18=gravity.zpp_inner;if(_this18._validate!=null){_this18._validate()}var x6=gravity.zpp_inner.x;var _this19=gravity.zpp_inner;if(_this19._validate!=null){_this19._validate()}var y6=gravity.zpp_inner.y;var tmp;var _this20=_this17.zpp_inner;if(_this20._validate!=null){_this20._validate()}if(_this17.zpp_inner.x==x6){var _this21=_this17.zpp_inner;if(_this21._validate!=null){_this21._validate()}tmp=_this17.zpp_inner.y==y6}else{tmp=false}if(!tmp){_this17.zpp_inner.x=x6;_this17.zpp_inner.y=y6;var _this22=_this17.zpp_inner;if(_this22._invalidate!=null){_this22._invalidate(_this22)}}if(gravity.zpp_inner.weak){var inner1=gravity.zpp_inner;gravity.zpp_inner.outer=null;gravity.zpp_inner=null;var o=gravity;o.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=o;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}}fluidShape.zpp_inner.immutable_midstep("Shape::body");if((fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null)!=fluidBody){if(fluidShape.zpp_inner.body!=null){(fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(fluidShape)}if(fluidBody!=null){var _this23=fluidBody.zpp_inner.wrap_shapes;if(_this23.zpp_inner.reverse_flag){_this23.push(fluidShape)}else{_this23.unshift(fluidShape)}}}fluidBody.zpp_inner.immutable_midstep("Body::"+"false");if(!fluidBody.zpp_inner.norotate!=false){fluidBody.zpp_inner.norotate=true;fluidBody.zpp_inner.invalidate_inertia()}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this24=fluidBody.zpp_inner.wrap_pos;var _this25=_this24.zpp_inner;if(_this25._validate!=null){_this25._validate()}if(_this24.zpp_inner.x!=1200){_this24.zpp_inner.x=1200;var _this26=_this24.zpp_inner;if(_this26._invalidate!=null){_this26._invalidate(_this26)}}var _this27=_this24.zpp_inner;if(_this27._validate!=null){_this27._validate()}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this28=fluidBody.zpp_inner.wrap_pos;var _this29=_this28.zpp_inner;if(_this29._validate!=null){_this29._validate()}if(_this28.zpp_inner.y!=700){_this28.zpp_inner.y=700;var _this30=_this28.zpp_inner;if(_this30._invalidate!=null){_this30._invalidate(_this30)}}var _this31=_this28.zpp_inner;if(_this31._validate!=null){_this31._validate()}fluidBody.zpp_inner.immutable_midstep("Body::space");if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=s){if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){fluidBody.zpp_inner.component.woken=false}if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){(fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(fluidBody)}if(s!=null){var _this32=s.zpp_inner.wrap_bodies;if(_this32.zpp_inner.reverse_flag){_this32.push(fluidBody)}else{_this32.unshift(fluidBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,fluidBody,false);if(fluidBody.zpp_inner_i.wrap_cbTypes==null){fluidBody.zpp_inner_i.setupcbTypes()}var _this33=fluidBody.zpp_inner_i.wrap_cbTypes;var obj=this.conveyorBeltCbType;if(_this33.zpp_inner.reverse_flag){_this33.push(obj)}else{_this33.unshift(obj)}animSheetStart.slice(3,2);animSheetMiddle.slice(3,2);animSheetEnd.slice(3,2);var beltImg=new engine_mapsheet_AnimatedTile;beltImg.set_tileset(animSheetStart);beltImg.addBehavior(new engine_mapsheet_data_Behavior("normal",[0,1,2,3,4,5],true,this.force/5|0));beltImg.showBehavior("normal");beltImg.set_x(this.startPos.x);beltImg.set_y(this.startPos.y);this.beltAnimationContainer.push(beltImg);this.addTile(beltImg);beltImg=new engine_mapsheet_AnimatedTile;beltImg.set_tileset(animSheetEnd);beltImg.addBehavior(new engine_mapsheet_data_Behavior("normal",[0,1,2,3,4,5],true,this.force/5|0));beltImg.showBehavior("normal");beltImg.set_x(this.endPos.x);beltImg.set_y(this.endPos.y);this.beltAnimationContainer.push(beltImg);this.addTile(beltImg);var _g1=1;var _g2=this.beltSize-1;while(_g1<_g2){var i=_g1++;beltImg=new engine_mapsheet_AnimatedTile;beltImg.set_tileset(animSheetMiddle);beltImg.addBehavior(new engine_mapsheet_data_Behavior("normal",[0,1,2,3,4,5],true,this.force/5|0));beltImg.showBehavior("normal");switch(this.direction){case"down":beltImg.set_x(0);beltImg.set_y(i*64);break;case"right":beltImg.set_x(i*64);beltImg.set_y(0);break;case"up":beltImg.set_x(0);beltImg.set_y(i*64);break;default:beltImg.set_x(-(i+1)*64);beltImg.set_y(0)}this.beltAnimationContainer.push(beltImg);this.addTile(beltImg)}var _this34=this.body;if(_this34.zpp_inner_i.userData==null){_this34.zpp_inner_i.userData={}}_this34.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.ConveyorBelt"]=project_game_objects_ConveyorBelt;project_game_objects_ConveyorBelt.__name__="project.game.objects.ConveyorBelt";project_game_objects_ConveyorBelt.__super__=project_entities_PhysicalTile;project_game_objects_ConveyorBelt.prototype=$extend(project_entities_PhysicalTile.prototype,{conveyorBeltCbType:null,force:null,direction:null,beltSize:null,startPos:null,endPos:null,beltAnimationContainer:null,enterListener:null,exitListener:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.conveyorBeltCbType,$bind(this,this.bodyOnEnter));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.enterListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.conveyorBeltCbType,$bind(this,this.bodyOnExit));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.exitListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);var _g=0;var _g1=this.beltAnimationContainer;while(_g<_g1.length)_g1[_g++].update(dt);if(this.sound){this.time-=dt;if(this.time<=0){engine_soundlib_SoundList.FX(33);this.time+=this.timeMax}}},sound:null,time:null,timeMax:null,bodyOnEnter:function(collision){if(!this.sound){this.sound=true;this.time=0}},bodyOnExit:function(collision){if(this.sound){this.sound=false;this.time=this.timeMax}},checkVisibility:function(s){this.set_visible(s.get_x()/s.get_scaleX()+this.get_x()+128+64*this.beltSize>0&&s.get_x()/s.get_scaleX()+this.get_x()-128-64*this.beltSize<800&&s.get_y()/s.get_scaleX()+this.get_y()+128+64*this.beltSize>0&&s.get_y()/s.get_scaleX()+this.get_y()-128-64*this.beltSize<600)},__class__:project_game_objects_ConveyorBelt});var project_game_objects_Door=function(s,dir){this.switches=[];this.doorGroup=-1;this.direction="left";openfl_display_TileContainer.call(this);this.direction=dir;switch(this.direction){case"down":case"up":this.sheetOne=new project_game_objects_DoorSheet(s,"left");this.sheetTwo=new project_game_objects_DoorSheet(s,"right");break;default:this.sheetOne=new project_game_objects_DoorSheet(s,"top");this.sheetTwo=new project_game_objects_DoorSheet(s,"bottom")}this.addTile(this.sheetOne);this.addTile(this.sheetTwo);this.data={sortCriteria:0};this.data.sortCriteria=this.get_y()};$hxClasses["project.game.objects.Door"]=project_game_objects_Door;project_game_objects_Door.__name__="project.game.objects.Door";project_game_objects_Door.__interfaces__=[engine_updateable_IVisibilityMutable,engine_updateable_IUpdateable];project_game_objects_Door.__super__=openfl_display_TileContainer;project_game_objects_Door.prototype=$extend(openfl_display_TileContainer.prototype,{detectionType:null,direction:null,doorGroup:null,switches:null,sheetOne:null,sheetTwo:null,initialize:function(){switch(this.direction){case"down":case"up":this.sheetOne.set_x(0);this.sheetOne.set_y(-32);var _this=this.sheetOne.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x()-16;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.sheetOne.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y()-16;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.sheetTwo.set_x(64);this.sheetTwo.set_y(-32);var _this10=this.sheetTwo.body;if(_this10.zpp_inner.wrap_pos==null){_this10.zpp_inner.setupPosition()}var _this11=_this10.zpp_inner.wrap_pos;var x1=this.get_x()-16+64;var _this12=_this11.zpp_inner;if(_this12._validate!=null){_this12._validate()}if(_this11.zpp_inner.x!=x1){_this11.zpp_inner.x=x1;var _this13=_this11.zpp_inner;if(_this13._invalidate!=null){_this13._invalidate(_this13)}}var _this14=_this11.zpp_inner;if(_this14._validate!=null){_this14._validate()}var _this15=this.sheetTwo.body;if(_this15.zpp_inner.wrap_pos==null){_this15.zpp_inner.setupPosition()}var _this16=_this15.zpp_inner.wrap_pos;var y1=this.get_y()-16;var _this17=_this16.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(_this16.zpp_inner.y!=y1){_this16.zpp_inner.y=y1;var _this18=_this16.zpp_inner;if(_this18._invalidate!=null){_this18._invalidate(_this18)}}var _this19=_this16.zpp_inner;if(_this19._validate!=null){_this19._validate()}break;default:this.sheetOne.set_x(0);this.sheetOne.set_y(0);var _this20=this.sheetOne.body;if(_this20.zpp_inner.wrap_pos==null){_this20.zpp_inner.setupPosition()}var _this21=_this20.zpp_inner.wrap_pos;var x2=this.get_x();var _this22=_this21.zpp_inner;if(_this22._validate!=null){_this22._validate()}if(_this21.zpp_inner.x!=x2){_this21.zpp_inner.x=x2;var _this23=_this21.zpp_inner;if(_this23._invalidate!=null){_this23._invalidate(_this23)}}var _this24=_this21.zpp_inner;if(_this24._validate!=null){_this24._validate()}var _this25=this.sheetOne.body;if(_this25.zpp_inner.wrap_pos==null){_this25.zpp_inner.setupPosition()}var _this26=_this25.zpp_inner.wrap_pos;var y2=this.get_y();var _this27=_this26.zpp_inner;if(_this27._validate!=null){_this27._validate()}if(_this26.zpp_inner.y!=y2){_this26.zpp_inner.y=y2;var _this28=_this26.zpp_inner;if(_this28._invalidate!=null){_this28._invalidate(_this28)}}var _this29=_this26.zpp_inner;if(_this29._validate!=null){_this29._validate()}this.sheetTwo.set_x(0);this.sheetTwo.set_y(64);var _this30=this.sheetTwo.body;if(_this30.zpp_inner.wrap_pos==null){_this30.zpp_inner.setupPosition()}var _this31=_this30.zpp_inner.wrap_pos;var x3=this.get_x();var _this32=_this31.zpp_inner;if(_this32._validate!=null){_this32._validate()}if(_this31.zpp_inner.x!=x3){_this31.zpp_inner.x=x3;var _this33=_this31.zpp_inner;if(_this33._invalidate!=null){_this33._invalidate(_this33)}}var _this34=_this31.zpp_inner;if(_this34._validate!=null){_this34._validate()}var _this35=this.sheetTwo.body;if(_this35.zpp_inner.wrap_pos==null){_this35.zpp_inner.setupPosition()}var _this36=_this35.zpp_inner.wrap_pos;var y3=this.get_y()+64;var _this37=_this36.zpp_inner;if(_this37._validate!=null){_this37._validate()}if(_this36.zpp_inner.y!=y3){_this36.zpp_inner.y=y3;var _this38=_this36.zpp_inner;if(_this38._invalidate!=null){_this38._invalidate(_this38)}}var _this39=_this36.zpp_inner;if(_this39._validate!=null){_this39._validate()}}this.sheetOne.initialize();this.sheetTwo.initialize();var _g1=0;var _g2=this.switches;while(_g1<_g2.length){var s=_g2[_g1];++_g1;if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}var switchExitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,this.detectionType,s.switchCbType,$bind(this,this.switchReleased));var _this40=s.body;var _this41=(_this40.zpp_inner.space==null?null:_this40.zpp_inner.space.outer).zpp_inner.wrap_listeners;if(_this41.zpp_inner.reverse_flag){_this41.push(switchExitListener)}else{_this41.unshift(switchExitListener)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}var switchEnterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,this.detectionType,s.switchCbType,$bind(this,this.switchPressed));var _this42=s.body;var _this43=(_this42.zpp_inner.space==null?null:_this42.zpp_inner.space.outer).zpp_inner.wrap_listeners;if(_this43.zpp_inner.reverse_flag){_this43.push(switchEnterListener)}else{_this43.unshift(switchEnterListener)}}this.data.sortCriteria=this.get_y()},switchPressed:function(collision){this.sheetOne.open();this.sheetTwo.open()},switchReleased:function(collision){this.sheetOne.close();this.sheetTwo.close()},update:function(dt){this.sheetOne.update(dt);this.sheetTwo.update(dt)},checkVisibility:function(s){this.set_visible(s.get_x()/s.get_scaleX()+this.get_x()+128>0&&s.get_x()/s.get_scaleX()+this.get_x()-128<800&&s.get_y()/s.get_scaleX()+this.get_y()+128>0&&s.get_y()/s.get_scaleX()+this.get_y()-128<600)},__class__:project_game_objects_Door});var project_game_objects_DoorFloor=function(direction){openfl_display_TileContainer.call(this,0,0,1,1,0,0,0);var customTile;switch(direction){case"down":case"up":customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_DOOR_BUTTON_FLOOR_LR_ATLAS);break;default:customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_DOOR_BUTTON_FLOOR_TB_ATLAS)}this.sheetOne=new openfl_display_Tile(customTile.get_id());this.sheetTwo=new openfl_display_Tile(customTile.get_id());this.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.addTile(this.sheetOne);this.addTile(this.sheetTwo);switch(direction){case"down":case"up":this.sheetOne.set_x(0);this.sheetOne.set_y(10);this.sheetTwo.set_x(64);this.sheetTwo.set_y(10);break;default:this.sheetOne.set_x(25);this.sheetOne.set_y(0);this.sheetTwo.set_x(25);this.sheetTwo.set_y(64)}};$hxClasses["project.game.objects.DoorFloor"]=project_game_objects_DoorFloor;project_game_objects_DoorFloor.__name__="project.game.objects.DoorFloor";project_game_objects_DoorFloor.__interfaces__=[engine_updateable_IVisibilityMutable];project_game_objects_DoorFloor.__super__=openfl_display_TileContainer;project_game_objects_DoorFloor.prototype=$extend(openfl_display_TileContainer.prototype,{sheetOne:null,sheetTwo:null,checkVisibility:function(s){this.set_visible(s.get_x()+this.get_x()+128>0&&s.get_x()+this.get_x()-128<800&&s.get_y()+this.get_y()+128>0&&s.get_y()+this.get_y()-128<600)},__class__:project_game_objects_DoorFloor});var project_game_objects_DoorSheet=function(s,dir){this.currentY=0;this.currentX=0;this.startY=0;this.startX=0;this.direction="left";this.doorCbType=new nape_callbacks_CbType;this.direction=dir;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var body=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var rect;switch(this.direction){case"left":var x=16;var y=26;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var rect1;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}rect1=ret.zpp_inner.y==y}else{rect1=false}if(!rect1){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var x1=64;var y1=26;var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x1;ret3.y=y1;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var rect2;var _this3=ret2.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(ret2.zpp_inner.x==x1){var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}rect2=ret2.zpp_inner.y==y1}else{rect2=false}if(!rect2){ret2.zpp_inner.x=x1;ret2.zpp_inner.y=y1;var _this5=ret2.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}}ret2.zpp_inner.weak=true;var x2=80;var y2=34;var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x2;ret5.y=y2;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var rect3;var _this6=ret4.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(ret4.zpp_inner.x==x2){var _this7=ret4.zpp_inner;if(_this7._validate!=null){_this7._validate()}rect3=ret4.zpp_inner.y==y2}else{rect3=false}if(!rect3){ret4.zpp_inner.x=x2;ret4.zpp_inner.y=y2;var _this8=ret4.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}}ret4.zpp_inner.weak=true;var x3=64;var y3=42;var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x3;ret7.y=y3;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var rect4;var _this9=ret6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(ret6.zpp_inner.x==x3){var _this10=ret6.zpp_inner;if(_this10._validate!=null){_this10._validate()}rect4=ret6.zpp_inner.y==y3}else{rect4=false}if(!rect4){ret6.zpp_inner.x=x3;ret6.zpp_inner.y=y3;var _this11=ret6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}}ret6.zpp_inner.weak=true;var x4=16;var y4=42;var ret8;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret8=new nape_geom_Vec2}else{ret8=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret8.zpp_pool;ret8.zpp_pool=null}if(ret8.zpp_inner==null){var ret9;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret9=new zpp_$nape_geom_ZPP_$Vec2}else{ret9=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret9.next;ret9.next=null}ret9.weak=false;ret9._immutable=false;ret9.x=x4;ret9.y=y4;ret8.zpp_inner=ret9;ret8.zpp_inner.outer=ret8}else{var rect5;var _this12=ret8.zpp_inner;if(_this12._validate!=null){_this12._validate()}if(ret8.zpp_inner.x==x4){var _this13=ret8.zpp_inner;if(_this13._validate!=null){_this13._validate()}rect5=ret8.zpp_inner.y==y4}else{rect5=false}if(!rect5){ret8.zpp_inner.x=x4;ret8.zpp_inner.y=y4;var _this14=ret8.zpp_inner;if(_this14._invalidate!=null){_this14._invalidate(_this14)}}}ret8.zpp_inner.weak=true;rect=[ret,ret2,ret4,ret6,ret8];this.animSheet=project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_LEFT;break;case"right":var x5=16;var y5=34;var ret10;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret10=new nape_geom_Vec2}else{ret10=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret10.zpp_pool;ret10.zpp_pool=null}if(ret10.zpp_inner==null){var ret11;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret11=new zpp_$nape_geom_ZPP_$Vec2}else{ret11=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret11.next;ret11.next=null}ret11.weak=false;ret11._immutable=false;ret11.x=x5;ret11.y=y5;ret10.zpp_inner=ret11;ret10.zpp_inner.outer=ret10}else{var rect6;var _this15=ret10.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(ret10.zpp_inner.x==x5){var _this16=ret10.zpp_inner;if(_this16._validate!=null){_this16._validate()}rect6=ret10.zpp_inner.y==y5}else{rect6=false}if(!rect6){ret10.zpp_inner.x=x5;ret10.zpp_inner.y=y5;var _this17=ret10.zpp_inner;if(_this17._invalidate!=null){_this17._invalidate(_this17)}}}ret10.zpp_inner.weak=true;var x6=32;var y6=26;var ret12;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret12=new nape_geom_Vec2}else{ret12=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret12.zpp_pool;ret12.zpp_pool=null}if(ret12.zpp_inner==null){var ret13;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret13=new zpp_$nape_geom_ZPP_$Vec2}else{ret13=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret13.next;ret13.next=null}ret13.weak=false;ret13._immutable=false;ret13.x=x6;ret13.y=y6;ret12.zpp_inner=ret13;ret12.zpp_inner.outer=ret12}else{var rect7;var _this18=ret12.zpp_inner;if(_this18._validate!=null){_this18._validate()}if(ret12.zpp_inner.x==x6){var _this19=ret12.zpp_inner;if(_this19._validate!=null){_this19._validate()}rect7=ret12.zpp_inner.y==y6}else{rect7=false}if(!rect7){ret12.zpp_inner.x=x6;ret12.zpp_inner.y=y6;var _this20=ret12.zpp_inner;if(_this20._invalidate!=null){_this20._invalidate(_this20)}}}ret12.zpp_inner.weak=true;var x7=80;var y7=26;var ret14;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret14=new nape_geom_Vec2}else{ret14=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret14.zpp_pool;ret14.zpp_pool=null}if(ret14.zpp_inner==null){var ret15;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret15=new zpp_$nape_geom_ZPP_$Vec2}else{ret15=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret15.next;ret15.next=null}ret15.weak=false;ret15._immutable=false;ret15.x=x7;ret15.y=y7;ret14.zpp_inner=ret15;ret14.zpp_inner.outer=ret14}else{var rect8;var _this21=ret14.zpp_inner;if(_this21._validate!=null){_this21._validate()}if(ret14.zpp_inner.x==x7){var _this22=ret14.zpp_inner;if(_this22._validate!=null){_this22._validate()}rect8=ret14.zpp_inner.y==y7}else{rect8=false}if(!rect8){ret14.zpp_inner.x=x7;ret14.zpp_inner.y=y7;var _this23=ret14.zpp_inner;if(_this23._invalidate!=null){_this23._invalidate(_this23)}}}ret14.zpp_inner.weak=true;var x8=80;var y8=42;var ret16;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret16=new nape_geom_Vec2}else{ret16=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret16.zpp_pool;ret16.zpp_pool=null}if(ret16.zpp_inner==null){var ret17;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret17=new zpp_$nape_geom_ZPP_$Vec2}else{ret17=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret17.next;ret17.next=null}ret17.weak=false;ret17._immutable=false;ret17.x=x8;ret17.y=y8;ret16.zpp_inner=ret17;ret16.zpp_inner.outer=ret16}else{var rect9;var _this24=ret16.zpp_inner;if(_this24._validate!=null){_this24._validate()}if(ret16.zpp_inner.x==x8){var _this25=ret16.zpp_inner;if(_this25._validate!=null){_this25._validate()}rect9=ret16.zpp_inner.y==y8}else{rect9=false}if(!rect9){ret16.zpp_inner.x=x8;ret16.zpp_inner.y=y8;var _this26=ret16.zpp_inner;if(_this26._invalidate!=null){_this26._invalidate(_this26)}}}ret16.zpp_inner.weak=true;var x9=32;var y9=42;var ret18;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret18=new nape_geom_Vec2}else{ret18=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret18.zpp_pool;ret18.zpp_pool=null}if(ret18.zpp_inner==null){var ret19;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret19=new zpp_$nape_geom_ZPP_$Vec2}else{ret19=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret19.next;ret19.next=null}ret19.weak=false;ret19._immutable=false;ret19.x=x9;ret19.y=y9;ret18.zpp_inner=ret19;ret18.zpp_inner.outer=ret18}else{var rect10;var _this27=ret18.zpp_inner;if(_this27._validate!=null){_this27._validate()}if(ret18.zpp_inner.x==x9){var _this28=ret18.zpp_inner;if(_this28._validate!=null){_this28._validate()}rect10=ret18.zpp_inner.y==y9}else{rect10=false}if(!rect10){ret18.zpp_inner.x=x9;ret18.zpp_inner.y=y9;var _this29=ret18.zpp_inner;if(_this29._invalidate!=null){_this29._invalidate(_this29)}}}ret18.zpp_inner.weak=true;rect=[ret10,ret12,ret14,ret16,ret18];this.animSheet=project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_RIGHT;break;case"top":var x10=26;var y10=16;var ret20;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret20=new nape_geom_Vec2}else{ret20=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret20.zpp_pool;ret20.zpp_pool=null}if(ret20.zpp_inner==null){var ret21;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret21=new zpp_$nape_geom_ZPP_$Vec2}else{ret21=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret21.next;ret21.next=null}ret21.weak=false;ret21._immutable=false;ret21.x=x10;ret21.y=y10;ret20.zpp_inner=ret21;ret20.zpp_inner.outer=ret20}else{var rect11;var _this30=ret20.zpp_inner;if(_this30._validate!=null){_this30._validate()}if(ret20.zpp_inner.x==x10){var _this31=ret20.zpp_inner;if(_this31._validate!=null){_this31._validate()}rect11=ret20.zpp_inner.y==y10}else{rect11=false}if(!rect11){ret20.zpp_inner.x=x10;ret20.zpp_inner.y=y10;var _this32=ret20.zpp_inner;if(_this32._invalidate!=null){_this32._invalidate(_this32)}}}ret20.zpp_inner.weak=true;var x11=26;var y11=64;var ret22;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret22=new nape_geom_Vec2}else{ret22=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret22.zpp_pool;ret22.zpp_pool=null}if(ret22.zpp_inner==null){var ret23;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret23=new zpp_$nape_geom_ZPP_$Vec2}else{ret23=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret23.next;ret23.next=null}ret23.weak=false;ret23._immutable=false;ret23.x=x11;ret23.y=y11;ret22.zpp_inner=ret23;ret22.zpp_inner.outer=ret22}else{var rect12;var _this33=ret22.zpp_inner;if(_this33._validate!=null){_this33._validate()}if(ret22.zpp_inner.x==x11){var _this34=ret22.zpp_inner;if(_this34._validate!=null){_this34._validate()}rect12=ret22.zpp_inner.y==y11}else{rect12=false}if(!rect12){ret22.zpp_inner.x=x11;ret22.zpp_inner.y=y11;var _this35=ret22.zpp_inner;if(_this35._invalidate!=null){_this35._invalidate(_this35)}}}ret22.zpp_inner.weak=true;var x12=34;var y12=80;var ret24;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret24=new nape_geom_Vec2}else{ret24=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret24.zpp_pool;ret24.zpp_pool=null}if(ret24.zpp_inner==null){var ret25;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret25=new zpp_$nape_geom_ZPP_$Vec2}else{ret25=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret25.next;ret25.next=null}ret25.weak=false;ret25._immutable=false;ret25.x=x12;ret25.y=y12;ret24.zpp_inner=ret25;ret24.zpp_inner.outer=ret24}else{var rect13;var _this36=ret24.zpp_inner;if(_this36._validate!=null){_this36._validate()}if(ret24.zpp_inner.x==x12){var _this37=ret24.zpp_inner;if(_this37._validate!=null){_this37._validate()}rect13=ret24.zpp_inner.y==y12}else{rect13=false}if(!rect13){ret24.zpp_inner.x=x12;ret24.zpp_inner.y=y12;var _this38=ret24.zpp_inner;if(_this38._invalidate!=null){_this38._invalidate(_this38)}}}ret24.zpp_inner.weak=true;var x13=42;var y13=64;var ret26;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret26=new nape_geom_Vec2}else{ret26=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret26.zpp_pool;ret26.zpp_pool=null}if(ret26.zpp_inner==null){var ret27;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret27=new zpp_$nape_geom_ZPP_$Vec2}else{ret27=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret27.next;ret27.next=null}ret27.weak=false;ret27._immutable=false;ret27.x=x13;ret27.y=y13;ret26.zpp_inner=ret27;ret26.zpp_inner.outer=ret26}else{var rect14;var _this39=ret26.zpp_inner;if(_this39._validate!=null){_this39._validate()}if(ret26.zpp_inner.x==x13){var _this40=ret26.zpp_inner;if(_this40._validate!=null){_this40._validate()}rect14=ret26.zpp_inner.y==y13}else{rect14=false}if(!rect14){ret26.zpp_inner.x=x13;ret26.zpp_inner.y=y13;var _this41=ret26.zpp_inner;if(_this41._invalidate!=null){_this41._invalidate(_this41)}}}ret26.zpp_inner.weak=true;var x14=42;var y14=16;var ret28;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret28=new nape_geom_Vec2}else{ret28=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret28.zpp_pool;ret28.zpp_pool=null}if(ret28.zpp_inner==null){var ret29;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret29=new zpp_$nape_geom_ZPP_$Vec2}else{ret29=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret29.next;ret29.next=null}ret29.weak=false;ret29._immutable=false;ret29.x=x14;ret29.y=y14;ret28.zpp_inner=ret29;ret28.zpp_inner.outer=ret28}else{var rect15;var _this42=ret28.zpp_inner;if(_this42._validate!=null){_this42._validate()}if(ret28.zpp_inner.x==x14){var _this43=ret28.zpp_inner;if(_this43._validate!=null){_this43._validate()}rect15=ret28.zpp_inner.y==y14}else{rect15=false}if(!rect15){ret28.zpp_inner.x=x14;ret28.zpp_inner.y=y14;var _this44=ret28.zpp_inner;if(_this44._invalidate!=null){_this44._invalidate(_this44)}}}ret28.zpp_inner.weak=true;rect=[ret20,ret22,ret24,ret26,ret28];this.animSheet=project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_TOP;break;default:var x15=34;var y15=16;var ret30;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret30=new nape_geom_Vec2}else{ret30=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret30.zpp_pool;ret30.zpp_pool=null}if(ret30.zpp_inner==null){var ret31;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret31=new zpp_$nape_geom_ZPP_$Vec2}else{ret31=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret31.next;ret31.next=null}ret31.weak=false;ret31._immutable=false;ret31.x=x15;ret31.y=y15;ret30.zpp_inner=ret31;ret30.zpp_inner.outer=ret30}else{var rect16;var _this45=ret30.zpp_inner;if(_this45._validate!=null){_this45._validate()}if(ret30.zpp_inner.x==x15){var _this46=ret30.zpp_inner;if(_this46._validate!=null){_this46._validate()}rect16=ret30.zpp_inner.y==y15}else{rect16=false}if(!rect16){ret30.zpp_inner.x=x15;ret30.zpp_inner.y=y15;var _this47=ret30.zpp_inner;if(_this47._invalidate!=null){_this47._invalidate(_this47)}}}ret30.zpp_inner.weak=true;var x16=26;var y16=32;var ret32;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret32=new nape_geom_Vec2}else{ret32=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret32.zpp_pool;ret32.zpp_pool=null}if(ret32.zpp_inner==null){var ret33;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret33=new zpp_$nape_geom_ZPP_$Vec2}else{ret33=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret33.next;ret33.next=null}ret33.weak=false;ret33._immutable=false;ret33.x=x16;ret33.y=y16;ret32.zpp_inner=ret33;ret32.zpp_inner.outer=ret32}else{var rect17;var _this48=ret32.zpp_inner;if(_this48._validate!=null){_this48._validate()}if(ret32.zpp_inner.x==x16){var _this49=ret32.zpp_inner;if(_this49._validate!=null){_this49._validate()}rect17=ret32.zpp_inner.y==y16}else{rect17=false}if(!rect17){ret32.zpp_inner.x=x16;ret32.zpp_inner.y=y16;var _this50=ret32.zpp_inner;if(_this50._invalidate!=null){_this50._invalidate(_this50)}}}ret32.zpp_inner.weak=true;var x17=26;var y17=80;var ret34;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret34=new nape_geom_Vec2}else{ret34=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret34.zpp_pool;ret34.zpp_pool=null}if(ret34.zpp_inner==null){var ret35;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret35=new zpp_$nape_geom_ZPP_$Vec2}else{ret35=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret35.next;ret35.next=null}ret35.weak=false;ret35._immutable=false;ret35.x=x17;ret35.y=y17;ret34.zpp_inner=ret35;ret34.zpp_inner.outer=ret34}else{var rect18;var _this51=ret34.zpp_inner;if(_this51._validate!=null){_this51._validate()}if(ret34.zpp_inner.x==x17){var _this52=ret34.zpp_inner;if(_this52._validate!=null){_this52._validate()}rect18=ret34.zpp_inner.y==y17}else{rect18=false}if(!rect18){ret34.zpp_inner.x=x17;ret34.zpp_inner.y=y17;var _this53=ret34.zpp_inner;if(_this53._invalidate!=null){_this53._invalidate(_this53)}}}ret34.zpp_inner.weak=true;var x18=42;var y18=80;var ret36;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret36=new nape_geom_Vec2}else{ret36=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret36.zpp_pool;ret36.zpp_pool=null}if(ret36.zpp_inner==null){var ret37;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret37=new zpp_$nape_geom_ZPP_$Vec2}else{ret37=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret37.next;ret37.next=null}ret37.weak=false;ret37._immutable=false;ret37.x=x18;ret37.y=y18;ret36.zpp_inner=ret37;ret36.zpp_inner.outer=ret36}else{var rect19;var _this54=ret36.zpp_inner;if(_this54._validate!=null){_this54._validate()}if(ret36.zpp_inner.x==x18){var _this55=ret36.zpp_inner;if(_this55._validate!=null){_this55._validate()}rect19=ret36.zpp_inner.y==y18}else{rect19=false}if(!rect19){ret36.zpp_inner.x=x18;ret36.zpp_inner.y=y18;var _this56=ret36.zpp_inner;if(_this56._invalidate!=null){_this56._invalidate(_this56)}}}ret36.zpp_inner.weak=true;var x19=42;var y19=32;var ret38;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret38=new nape_geom_Vec2}else{ret38=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret38.zpp_pool;ret38.zpp_pool=null}if(ret38.zpp_inner==null){var ret39;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret39=new zpp_$nape_geom_ZPP_$Vec2}else{ret39=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret39.next;ret39.next=null}ret39.weak=false;ret39._immutable=false;ret39.x=x19;ret39.y=y19;ret38.zpp_inner=ret39;ret38.zpp_inner.outer=ret38}else{var rect20;var _this57=ret38.zpp_inner;if(_this57._validate!=null){_this57._validate()}if(ret38.zpp_inner.x==x19){var _this58=ret38.zpp_inner;if(_this58._validate!=null){_this58._validate()}rect20=ret38.zpp_inner.y==y19}else{rect20=false}if(!rect20){ret38.zpp_inner.x=x19;ret38.zpp_inner.y=y19;var _this59=ret38.zpp_inner;if(_this59._invalidate!=null){_this59._invalidate(_this59)}}}ret38.zpp_inner.weak=true;rect=[ret30,ret32,ret34,ret36,ret38];this.animSheet=project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_BOTTOM}var shape=new nape_shape_Polygon(rect);shape.zpp_inner.immutable_midstep("Shape::body");if((shape.zpp_inner.body!=null?shape.zpp_inner.body.outer:null)!=body){if(shape.zpp_inner.body!=null){(shape.zpp_inner.body!=null?shape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(shape)}if(body!=null){var _this60=body.zpp_inner.wrap_shapes;if(_this60.zpp_inner.reverse_flag){_this60.push(shape)}else{_this60.unshift(shape)}}}body.zpp_inner.immutable_midstep("Body::"+"false");if(!body.zpp_inner.norotate!=false){body.zpp_inner.norotate=true;body.zpp_inner.invalidate_inertia()}if(body.zpp_inner.wrap_pos==null){body.zpp_inner.setupPosition()}var _this61=body.zpp_inner.wrap_pos;var _this62=_this61.zpp_inner;if(_this62._validate!=null){_this62._validate()}if(_this61.zpp_inner.x!=1200){_this61.zpp_inner.x=1200;var _this63=_this61.zpp_inner;if(_this63._invalidate!=null){_this63._invalidate(_this63)}}var _this64=_this61.zpp_inner;if(_this64._validate!=null){_this64._validate()}if(body.zpp_inner.wrap_pos==null){body.zpp_inner.setupPosition()}var _this65=body.zpp_inner.wrap_pos;var _this66=_this65.zpp_inner;if(_this66._validate!=null){_this66._validate()}if(_this65.zpp_inner.y!=700){_this65.zpp_inner.y=700;var _this67=_this65.zpp_inner;if(_this67._invalidate!=null){_this67._invalidate(_this67)}}var _this68=_this65.zpp_inner;if(_this68._validate!=null){_this68._validate()}body.zpp_inner.immutable_midstep("Body::space");if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=s){if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){body.zpp_inner.component.woken=false}if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){(body.zpp_inner.space==null?null:body.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(body)}if(s!=null){var _this69=s.zpp_inner.wrap_bodies;if(_this69.zpp_inner.reverse_flag){_this69.push(body)}else{_this69.unshift(body)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,body,false);if(body.zpp_inner_i.wrap_cbTypes==null){body.zpp_inner_i.setupcbTypes()}var _this70=body.zpp_inner_i.wrap_cbTypes;var obj=this.doorCbType;if(_this70.zpp_inner.reverse_flag){_this70.push(obj)}else{_this70.unshift(obj)}this.doorImg=new engine_mapsheet_AnimatedTile;this.doorImg.set_tileset(this.animSheet);this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("default",[0],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("open",[0,1,2,3,4,5],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("close",[5,4,3,2,1,0],false,20));this.doorImg.showBehavior("default");this.doorImg.update(1);this.doorImg.set_x(0);this.doorImg.set_y(0);this.addTile(this.doorImg);if(body.zpp_inner_i.userData==null){body.zpp_inner_i.userData={}}body.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.DoorSheet"]=project_game_objects_DoorSheet;project_game_objects_DoorSheet.__name__="project.game.objects.DoorSheet";project_game_objects_DoorSheet.__super__=project_entities_PhysicalTile;project_game_objects_DoorSheet.prototype=$extend(project_entities_PhysicalTile.prototype,{doorCbType:null,direction:null,animSheet:null,doorImg:null,bounceListener:null,startX:null,startY:null,currentX:null,currentY:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}this.startX=_this1.zpp_inner.x;var _this3=this.body;if(_this3.zpp_inner.wrap_pos==null){_this3.zpp_inner.setupPosition()}var _this4=_this3.zpp_inner.wrap_pos;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}this.startY=_this4.zpp_inner.y;var _this6=this.body;if(_this6.zpp_inner.wrap_pos==null){_this6.zpp_inner.setupPosition()}var _this7=_this6.zpp_inner.wrap_pos;var _this8=_this7.zpp_inner;if(_this8._validate!=null){_this8._validate()}this.currentX=_this7.zpp_inner.x;var _this9=this.body;if(_this9.zpp_inner.wrap_pos==null){_this9.zpp_inner.setupPosition()}var _this10=_this9.zpp_inner.wrap_pos;var _this11=_this10.zpp_inner;if(_this11._validate!=null){_this11._validate()}this.currentY=_this10.zpp_inner.y;if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,project_game_CallbackTypes.bearType,this.doorCbType,$bind(this,this.bounceEffect));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.bounceListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj)}else{_this13.unshift(obj)}},update:function(dt){this.doorImg.update(dt)},open:function(){this.doorImg.showBehavior("open");motion_Actuate.stop(this,null,false,false);switch(this.direction){case"left":var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.startX-64;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}break;case"right":var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var x1=this.startX+64;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.x!=x1){_this6.zpp_inner.x=x1;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}break;case"top":var _this10=this.body;if(_this10.zpp_inner.wrap_pos==null){_this10.zpp_inner.setupPosition()}var _this11=_this10.zpp_inner.wrap_pos;var y=this.startY-64;var _this12=_this11.zpp_inner;if(_this12._validate!=null){_this12._validate()}if(_this11.zpp_inner.y!=y){_this11.zpp_inner.y=y;var _this13=_this11.zpp_inner;if(_this13._invalidate!=null){_this13._invalidate(_this13)}}var _this14=_this11.zpp_inner;if(_this14._validate!=null){_this14._validate()}break;default:var _this15=this.body;if(_this15.zpp_inner.wrap_pos==null){_this15.zpp_inner.setupPosition()}var _this16=_this15.zpp_inner.wrap_pos;var y1=this.startY+64;var _this17=_this16.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(_this16.zpp_inner.y!=y1){_this16.zpp_inner.y=y1;var _this18=_this16.zpp_inner;if(_this18._invalidate!=null){_this18._invalidate(_this18)}}var _this19=_this16.zpp_inner;if(_this19._validate!=null){_this19._validate()}}var _this20=this.body;if(_this20.zpp_inner.wrap_pos==null){_this20.zpp_inner.setupPosition()}var _this21=_this20.zpp_inner.wrap_pos;var _this22=_this21.zpp_inner;if(_this22._validate!=null){_this22._validate()}this.currentX=_this21.zpp_inner.x;var _this23=this.body;if(_this23.zpp_inner.wrap_pos==null){_this23.zpp_inner.setupPosition()}var _this24=_this23.zpp_inner.wrap_pos;var _this25=_this24.zpp_inner;if(_this25._validate!=null){_this25._validate()}this.currentY=_this24.zpp_inner.y;engine_soundlib_SoundList.FX(27,0,false)},close:function(){var _gthis=this;this.doorImg.showBehavior("close");engine_soundlib_SoundList.FX(28,0,false);engine_tweens_Actuator.tween(this,.5,{currentX:this.startX,currentY:this.startY},true).ease(motion_easing_Quad.easeInOut).onUpdate(function(){var _this=_gthis.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=_gthis.currentX;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=_gthis.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=_gthis.currentY;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}return _this6.zpp_inner.y})},bounceEffect:function(collision){engine_soundlib_SoundList.FX(24,0,false)},__class__:project_game_objects_DoorSheet});var project_game_objects_DoorSwitch=function(s){this.doorGroup=-1;this.switchCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var body=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);if(body.zpp_inner_i.wrap_cbTypes==null){body.zpp_inner_i.setupcbTypes()}var _this=body.zpp_inner_i.wrap_cbTypes;var obj=this.switchCbType;if(_this.zpp_inner.reverse_flag){_this.push(obj)}else{_this.unshift(obj)}var _this1=body.zpp_inner.wrap_shapes;var obj1=new nape_shape_Circle(16);if(_this1.zpp_inner.reverse_flag){_this1.push(obj1)}else{_this1.unshift(obj1)}body.zpp_inner.immutable_midstep("Body::space");if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=s){if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){body.zpp_inner.component.woken=false}if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){(body.zpp_inner.space==null?null:body.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(body)}if(s!=null){var _this2=s.zpp_inner.wrap_bodies;if(_this2.zpp_inner.reverse_flag){_this2.push(body)}else{_this2.unshift(body)}}}var _this3=body.zpp_inner.wrap_shapes.at(0);_this3.zpp_inner.immutable_midstep("Shape::sensorEnabled");_this3.zpp_inner.sensorEnabled=true;_this3.zpp_inner.wake();project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,body,false);this.animSheet=project_game_util_GameTiles.OBJECT_DOOR_SWITCH;this.buttonImg=new engine_mapsheet_AnimatedTile;this.buttonImg.set_tileset(this.animSheet);this.buttonImg.addBehavior(new engine_mapsheet_data_Behavior("pressed",[1],false,10));this.buttonImg.addBehavior(new engine_mapsheet_data_Behavior("released",[0],false,10));this.buttonImg.showBehavior("released");this.buttonImg.update(1);this.buttonImg.set_x(-32);this.buttonImg.set_y(-32);this.addTile(this.buttonImg);if(body.zpp_inner_i.userData==null){body.zpp_inner_i.userData={}}body.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.DoorSwitch"]=project_game_objects_DoorSwitch;project_game_objects_DoorSwitch.__name__="project.game.objects.DoorSwitch";project_game_objects_DoorSwitch.__super__=project_entities_PhysicalTile;project_game_objects_DoorSwitch.prototype=$extend(project_entities_PhysicalTile.prototype,{switchCbType:null,exitListener:null,enterListener:null,onGoingListener:null,detectionType:null,doorGroup:null,animSheet:null,buttonImg:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,this.detectionType,this.switchCbType,$bind(this,this.release));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.exitListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,this.detectionType,this.switchCbType,$bind(this,this.press));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.enterListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.onGoingListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,this.detectionType,this.switchCbType,$bind(this,this.onGoing));var _this14=this.body;var _this15=(_this14.zpp_inner.space==null?null:_this14.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj2=this.onGoingListener;if(_this15.zpp_inner.reverse_flag){_this15.push(obj2)}else{_this15.unshift(obj2)}},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt)},onGoing:function(collision){var _this=collision.zpp_inner.int1.outer_i;var _this1=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var v=_this1.zpp_inner.wrap_vel;var _this2=v.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp=v.zpp_inner.x;var _this3=v.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp1=tmp*v.zpp_inner.x;var _this4=v.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp2=v.zpp_inner.y;var _this5=v.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.sqrt(tmp1+tmp2*v.zpp_inner.y)>10){var _this6=v.zpp_inner;if(_this6._validate!=null){_this6._validate()}var x=v.zpp_inner.x*.975;var _this7=v.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(v.zpp_inner.x!=x){v.zpp_inner.x=x;var _this8=v.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=v.zpp_inner;if(_this9._validate!=null){_this9._validate()}var _this10=v.zpp_inner;if(_this10._validate!=null){_this10._validate()}var y=v.zpp_inner.y*.975;var _this11=v.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(v.zpp_inner.y!=y){v.zpp_inner.y=y;var _this12=v.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}var _this13=v.zpp_inner;if(_this13._validate!=null){_this13._validate()}}else{var tmp3;var _this14=v.zpp_inner;if(_this14._validate!=null){_this14._validate()}var tmp4=v.zpp_inner.x;var _this15=v.zpp_inner;if(_this15._validate!=null){_this15._validate()}var tmp5=tmp4*v.zpp_inner.x;var _this16=v.zpp_inner;if(_this16._validate!=null){_this16._validate()}var tmp6=v.zpp_inner.y;var _this17=v.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(Math.sqrt(tmp5+tmp6*v.zpp_inner.y)<1){var _this18=v.zpp_inner;if(_this18._validate!=null){_this18._validate()}var tmp7=v.zpp_inner.x;var _this19=v.zpp_inner;if(_this19._validate!=null){_this19._validate()}var tmp8=tmp7*v.zpp_inner.x;var _this20=v.zpp_inner;if(_this20._validate!=null){_this20._validate()}var tmp9=v.zpp_inner.y;var _this21=v.zpp_inner;if(_this21._validate!=null){_this21._validate()}tmp3=Math.sqrt(tmp8+tmp9*v.zpp_inner.y)>0}else{tmp3=false}if(tmp3){var _this22=v.zpp_inner;if(_this22._validate!=null){_this22._validate()}if(v.zpp_inner.x!=0){v.zpp_inner.x=0;var _this23=v.zpp_inner;if(_this23._invalidate!=null){_this23._invalidate(_this23)}}var _this24=v.zpp_inner;if(_this24._validate!=null){_this24._validate()}var _this25=v.zpp_inner;if(_this25._validate!=null){_this25._validate()}if(v.zpp_inner.y!=0){v.zpp_inner.y=0;var _this26=v.zpp_inner;if(_this26._invalidate!=null){_this26._invalidate(_this26)}}var _this27=v.zpp_inner;if(_this27._validate!=null){_this27._validate()}}}},press:function(collision){this.buttonImg.showBehavior("pressed");this.buttonImg.update(1);engine_soundlib_SoundList.FX(34)},release:function(collision){this.buttonImg.showBehavior("released");this.buttonImg.update(1);engine_soundlib_SoundList.FX(35)},__class__:project_game_objects_DoorSwitch});var project_game_objects_FloorTile=function(id,x,y,scaleX,scaleY,rotation,originX,originY,tilesetSource){if(tilesetSource==null){tilesetSource=""}openfl_display_Tile.call(this,id,x,y,scaleX,scaleY,rotation,originX,originY);switch(tilesetSource){case"floor02":this.set_tileset(project_game_util_GameTiles.FLOOR02);break;case"floor03":this.set_tileset(project_game_util_GameTiles.FLOOR03);break}};$hxClasses["project.game.objects.FloorTile"]=project_game_objects_FloorTile;project_game_objects_FloorTile.__name__="project.game.objects.FloorTile";project_game_objects_FloorTile.__interfaces__=[engine_updateable_IVisibilityMutable];project_game_objects_FloorTile.__super__=openfl_display_Tile;project_game_objects_FloorTile.prototype=$extend(openfl_display_Tile.prototype,{checkVisibility:function(s){this.set_visible(s.get_x()/s.get_scaleX()+this.get_x()+128>0&&s.get_x()/s.get_scaleX()+this.get_x()-128<800&&s.get_y()/s.get_scaleX()+this.get_y()+128>0&&s.get_y()/s.get_scaleX()+this.get_y()-128<600)},__class__:project_game_objects_FloorTile});var project_game_objects_Goal=function(s){this.checkTimer=false;this.timeMax=1e3;this.time=0;this.bears=0;this.bodiesOver=0;this.goalCbType=project_game_CallbackTypes.goalType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var b=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var _this=b.zpp_inner.wrap_shapes;var obj=new nape_shape_Polygon(nape_shape_Polygon.rect(-56,-56,112,112));if(_this.zpp_inner.reverse_flag){_this.push(obj)}else{_this.unshift(obj)}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this1=b.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=1100){_this1.zpp_inner.x=1100;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this5=b.zpp_inner.wrap_pos;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(_this5.zpp_inner.y!=800){_this5.zpp_inner.y=800;var _this7=_this5.zpp_inner;if(_this7._invalidate!=null){_this7._invalidate(_this7)}}var _this8=_this5.zpp_inner;if(_this8._validate!=null){_this8._validate()}b.zpp_inner.immutable_midstep("Body::space");if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=s){if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){b.zpp_inner.component.woken=false}if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){(b.zpp_inner.space==null?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b)}if(s!=null){var _this9=s.zpp_inner.wrap_bodies;if(_this9.zpp_inner.reverse_flag){_this9.push(b)}else{_this9.unshift(b)}}}var _this10=b.zpp_inner.wrap_shapes.at(0);_this10.zpp_inner.immutable_midstep("Shape::sensorEnabled");_this10.zpp_inner.sensorEnabled=true;_this10.zpp_inner.wake();var _this11=b.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this11.zpp_inner.sensorMask!=2){_this11.zpp_inner.sensorMask=2;_this11.zpp_inner.invalidate()}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,64,64,b,false);if(b.zpp_inner_i.wrap_cbTypes==null){b.zpp_inner_i.setupcbTypes()}var _this12=b.zpp_inner_i.wrap_cbTypes;var obj1=this.goalCbType;if(_this12.zpp_inner.reverse_flag){_this12.push(obj1)}else{_this12.unshift(obj1)}var _this13=this.body;if(_this13.zpp_inner_i.userData==null){_this13.zpp_inner_i.userData={}}_this13.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.Goal"]=project_game_objects_Goal;project_game_objects_Goal.__name__="project.game.objects.Goal";project_game_objects_Goal.__super__=project_entities_PhysicalTile;project_game_objects_Goal.prototype=$extend(project_entities_PhysicalTile.prototype,{goalCbType:null,enterListener:null,ongoingListener:null,exitListener:null,detectionCallback:null,goalImg:null,bodiesOver:null,bears:null,fixGraph:function(b){if(b==null){b=1}this.bears=b;switch(this.bears){case 1:var goalSheet=project_game_util_GameTiles.OBJECT_GOAL1;this.goalImg=new engine_mapsheet_AnimatedTile(0,0);this.goalImg.set_tileset(goalSheet);this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("0",[0],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("1",[1],true,10));this.goalImg.showBehavior("0");this.addTile(this.goalImg);this.goalImg.set_tileset(project_game_util_GameTiles.OBJECT_GOAL1);break;case 2:var goalSheet1=project_game_util_GameTiles.OBJECT_GOAL2;this.goalImg=new engine_mapsheet_AnimatedTile(0,0);this.goalImg.set_tileset(goalSheet1);this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("0",[0],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("1",[1],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("2",[2],true,10));this.goalImg.showBehavior("0");this.addTile(this.goalImg);this.goalImg.set_tileset(project_game_util_GameTiles.OBJECT_GOAL2);break;case 3:var goalSheet2=project_game_util_GameTiles.OBJECT_GOAL3;this.goalImg=new engine_mapsheet_AnimatedTile(0,0);this.goalImg.set_tileset(goalSheet2);this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("0",[0],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("1",[1],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("2",[2],true,10));this.goalImg.addBehavior(new engine_mapsheet_data_Behavior("3",[3],true,10));this.goalImg.showBehavior("0");this.addTile(this.goalImg);this.goalImg.set_tileset(project_game_util_GameTiles.OBJECT_GOAL3);break}},initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.goalCbType,$bind(this,this.bodyEnterGoal));if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.ongoingListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.goalCbType,$bind(this,this.bodyOnGoal));if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.goalCbType,$bind(this,this.bodyExitGoal));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.enterListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.ongoingListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}var _this14=this.body;var _this15=(_this14.zpp_inner.space==null?null:_this14.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj2=this.exitListener;if(_this15.zpp_inner.reverse_flag){_this15.push(obj2)}else{_this15.unshift(obj2)}},time:null,timeMax:null,checkTimer:null,update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);if(this.checkTimer){this.time+=dt;if(this.time>=this.timeMax){this.time=this.timeMax;this.checkTimer=false}}},bodyOnGoal:function(collision){if(this.detectionCallback!=null){var tmp=this.detectionCallback;var _this=collision.zpp_inner.wrap_arbiters.at(0);var _this1=_this.zpp_inner.ws1.id>_this.zpp_inner.ws2.id?_this.zpp_inner.b2.outer:_this.zpp_inner.b1.outer;if(_this1.zpp_inner_i.userData==null){_this1.zpp_inner_i.userData={}}tmp(_this1.zpp_inner_i.userData.object);var tmp1=this.goalImg;if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}var _this2=this.body.interactingBodies(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR);_this2.zpp_inner.valmod();if(_this2.zpp_inner.zip_length){_this2.zpp_inner.zip_length=false;_this2.zpp_inner.user_length=_this2.zpp_inner.inner.length}tmp1.showBehavior(""+_this2.zpp_inner.user_length);this.goalImg.update(1)}var _this3=collision.zpp_inner.int1.outer_i;var _this4=_this3.zpp_inner_i.ibody!=null?_this3.zpp_inner_i.ibody.outer:null;if(_this4.zpp_inner.wrap_vel==null){_this4.zpp_inner.setupVelocity()}var v=_this4.zpp_inner.wrap_vel;var _this5=v.zpp_inner;if(_this5._validate!=null){_this5._validate()}var tmp2=v.zpp_inner.x;var _this6=v.zpp_inner;if(_this6._validate!=null){_this6._validate()}var tmp3=tmp2*v.zpp_inner.x;var _this7=v.zpp_inner;if(_this7._validate!=null){_this7._validate()}var tmp4=v.zpp_inner.y;var _this8=v.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(Math.sqrt(tmp3+tmp4*v.zpp_inner.y)>10){var _this9=v.zpp_inner;if(_this9._validate!=null){_this9._validate()}var x=v.zpp_inner.x*.975;var _this10=v.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(v.zpp_inner.x!=x){v.zpp_inner.x=x;var _this11=v.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}var _this12=v.zpp_inner;if(_this12._validate!=null){_this12._validate()}var _this13=v.zpp_inner;if(_this13._validate!=null){_this13._validate()}var y=v.zpp_inner.y*.975;var _this14=v.zpp_inner;if(_this14._validate!=null){_this14._validate()}if(v.zpp_inner.y!=y){v.zpp_inner.y=y;var _this15=v.zpp_inner;if(_this15._invalidate!=null){_this15._invalidate(_this15)}}var _this16=v.zpp_inner;if(_this16._validate!=null){_this16._validate()}}},bodyEnterGoal:function(collision){this.bodiesOver+=1;this.goalImg.showBehavior(""+this.bodiesOver);this.goalImg.update(1);engine_soundlib_SoundList.FX(37);if(this.bodiesOver>=this.bears){this.checkTimer=true}},bodyExitGoal:function(collision){this.bodiesOver-=1;this.goalImg.showBehavior(""+this.bodiesOver);this.goalImg.update(1);engine_soundlib_SoundList.FX(38);this.checkTimer=false;this.time=0},__class__:project_game_objects_Goal});var project_game_objects_GoalFlag=function(s){this.flagCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var fluidBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var fluidShape=new nape_shape_Circle(5);var material=nape_phys_Material.sand();fluidShape.zpp_inner.immutable_midstep("Shape::material");fluidShape.zpp_inner.setMaterial(material.zpp_inner);fluidShape.zpp_inner.material.wrapper();fluidShape.zpp_inner.immutable_midstep("Shape::body");if((fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null)!=fluidBody){if(fluidShape.zpp_inner.body!=null){(fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(fluidShape)}if(fluidBody!=null){var _this=fluidBody.zpp_inner.wrap_shapes;if(_this.zpp_inner.reverse_flag){_this.push(fluidShape)}else{_this.unshift(fluidShape)}}}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this1=fluidBody.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=1200){_this1.zpp_inner.x=1200;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this5=fluidBody.zpp_inner.wrap_pos;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(_this5.zpp_inner.y!=700){_this5.zpp_inner.y=700;var _this7=_this5.zpp_inner;if(_this7._invalidate!=null){_this7._invalidate(_this7)}}var _this8=_this5.zpp_inner;if(_this8._validate!=null){_this8._validate()}fluidBody.zpp_inner.immutable_midstep("Body::space");if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=s){if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){fluidBody.zpp_inner.component.woken=false}if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){(fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(fluidBody)}if(s!=null){var _this9=s.zpp_inner.wrap_bodies;if(_this9.zpp_inner.reverse_flag){_this9.push(fluidBody)}else{_this9.unshift(fluidBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,64,128,fluidBody,false);if(fluidBody.zpp_inner_i.wrap_cbTypes==null){fluidBody.zpp_inner_i.setupcbTypes()}var _this10=fluidBody.zpp_inner_i.wrap_cbTypes;var obj=this.flagCbType;if(_this10.zpp_inner.reverse_flag){_this10.push(obj)}else{_this10.unshift(obj)}this.flagSheet=project_game_util_GameTiles.OBJECT_GOALFLAG;this.flagImg=new engine_mapsheet_AnimatedTile(0,0);this.flagImg.set_tileset(this.flagSheet);this.flagImg.addBehavior(new engine_mapsheet_data_Behavior("idle",[0,1,2,3],true,12));this.flagImg.showBehavior("idle");this.flagImg.update(1);this.addTile(this.flagImg);var _this11=this.body;if(_this11.zpp_inner_i.userData==null){_this11.zpp_inner_i.userData={}}_this11.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.GoalFlag"]=project_game_objects_GoalFlag;project_game_objects_GoalFlag.__name__="project.game.objects.GoalFlag";project_game_objects_GoalFlag.__interfaces__=[engine_updateable_IUpdateable];project_game_objects_GoalFlag.__super__=project_entities_PhysicalTile;project_game_objects_GoalFlag.prototype=$extend(project_entities_PhysicalTile.prototype,{flagCbType:null,flagImg:null,flagSheet:null,bounceListener:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.data.sortCriteria=this.get_y()-28;if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,project_game_CallbackTypes.bearType,this.flagCbType,$bind(this,this.bounceEffect));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.bounceListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}},bounceEffect:function(collision){engine_soundlib_SoundList.FX(24,0,false)},update:function(dt){this.flagImg.update(dt)},__class__:project_game_objects_GoalFlag});var project_game_objects_Hole=function(s,angle,type){if(type==null){type="default"}if(angle==null){angle=0}this.holeType="default";this.holeCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var holeBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);this.holeType=type;var holeShape=new nape_shape_Circle(6);holeShape.zpp_inner.immutable_midstep("Shape::fluidEnabled");holeShape.zpp_inner.fluidEnabled=false;holeShape.zpp_inner.wake();holeShape.zpp_inner.immutable_midstep("Shape::sensorEnabled");holeShape.zpp_inner.sensorEnabled=true;holeShape.zpp_inner.wake();holeShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(holeShape.zpp_inner.fluidProperties==null){holeShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this=holeShape.zpp_inner.fluidProperties.wrapper();if(0!=_this.zpp_inner.viscosity){_this.zpp_inner.viscosity=0;_this.zpp_inner.invalidate()}this.set_tileset(project_game_util_GameTiles.OBJECT_HOLE);this.holeAnim=new engine_mapsheet_AnimatedTile;this.holeAnim.set_tileset(this.get_tileset());this.holeAnim.addBehavior(new engine_mapsheet_data_Behavior("0",[0],false,20));this.holeAnim.addBehavior(new engine_mapsheet_data_Behavior("grizzly",[1,2,3,0],false,20));this.holeAnim.addBehavior(new engine_mapsheet_data_Behavior("panda",[4,5,6,0],false,20));this.holeAnim.addBehavior(new engine_mapsheet_data_Behavior("ice",[7,8,9,0],false,20));holeShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(holeShape.zpp_inner.fluidProperties==null){holeShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this1=holeShape.zpp_inner.fluidProperties.wrapper();var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this2=ret.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(ret.zpp_inner.x==x){var _this3=ret.zpp_inner;if(_this3._validate!=null){_this3._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this4=ret.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate(_this4)}}}ret.zpp_inner.weak=true;var gravity=ret;if(gravity==null){if(_this1.zpp_inner.wrap_gravity!=null){_this1.zpp_inner.wrap_gravity.zpp_inner._inuse=false;var _this5=_this1.zpp_inner.wrap_gravity;var inner=_this5.zpp_inner;_this5.zpp_inner.outer=null;_this5.zpp_inner=null;_this5.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=_this5;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner;_this1.zpp_inner.wrap_gravity=null}}else{if(_this1.zpp_inner.wrap_gravity==null){_this1.zpp_inner.getgravity()}var _this6=_this1.zpp_inner.wrap_gravity;var _this7=gravity.zpp_inner;if(_this7._validate!=null){_this7._validate()}var x1=gravity.zpp_inner.x;var _this8=gravity.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y1=gravity.zpp_inner.y;var tmp1;var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this6.zpp_inner.x==x1){var _this10=_this6.zpp_inner;if(_this10._validate!=null){_this10._validate()}tmp1=_this6.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this6.zpp_inner.x=x1;_this6.zpp_inner.y=y1;var _this11=_this6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}if(gravity.zpp_inner.weak){var inner1=gravity.zpp_inner;gravity.zpp_inner.outer=null;gravity.zpp_inner=null;gravity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=gravity;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}}holeShape.zpp_inner.immutable_midstep("Shape::body");if((holeShape.zpp_inner.body!=null?holeShape.zpp_inner.body.outer:null)!=holeBody){if(holeShape.zpp_inner.body!=null){(holeShape.zpp_inner.body!=null?holeShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(holeShape)}if(holeBody!=null){var _this12=holeBody.zpp_inner.wrap_shapes;if(_this12.zpp_inner.reverse_flag){_this12.push(holeShape)}else{_this12.unshift(holeShape)}}}holeBody.zpp_inner.immutable_midstep("Body::"+"false");if(!holeBody.zpp_inner.norotate!=false){holeBody.zpp_inner.norotate=true;holeBody.zpp_inner.invalidate_inertia()}if(holeBody.zpp_inner.wrap_pos==null){holeBody.zpp_inner.setupPosition()}var _this13=holeBody.zpp_inner.wrap_pos;var _this14=_this13.zpp_inner;if(_this14._validate!=null){_this14._validate()}if(_this13.zpp_inner.x!=1200){_this13.zpp_inner.x=1200;var _this15=_this13.zpp_inner;if(_this15._invalidate!=null){_this15._invalidate(_this15)}}var _this16=_this13.zpp_inner;if(_this16._validate!=null){_this16._validate()}if(holeBody.zpp_inner.wrap_pos==null){holeBody.zpp_inner.setupPosition()}var _this17=holeBody.zpp_inner.wrap_pos;var _this18=_this17.zpp_inner;if(_this18._validate!=null){_this18._validate()}if(_this17.zpp_inner.y!=700){_this17.zpp_inner.y=700;var _this19=_this17.zpp_inner;if(_this19._invalidate!=null){_this19._invalidate(_this19)}}var _this20=_this17.zpp_inner;if(_this20._validate!=null){_this20._validate()}holeBody.zpp_inner.immutable_midstep("Body::space");if((holeBody.zpp_inner.space==null?null:holeBody.zpp_inner.space.outer)!=s){if((holeBody.zpp_inner.space==null?null:holeBody.zpp_inner.space.outer)!=null){holeBody.zpp_inner.component.woken=false}if((holeBody.zpp_inner.space==null?null:holeBody.zpp_inner.space.outer)!=null){(holeBody.zpp_inner.space==null?null:holeBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(holeBody)}if(s!=null){var _this21=s.zpp_inner.wrap_bodies;if(_this21.zpp_inner.reverse_flag){_this21.push(holeBody)}else{_this21.unshift(holeBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,angle,32,32,holeBody,false);this.holeAnim.showBehavior("0");this.addTile(this.holeAnim);if(holeBody.zpp_inner_i.wrap_cbTypes==null){holeBody.zpp_inner_i.setupcbTypes()}var _this22=holeBody.zpp_inner_i.wrap_cbTypes;var obj=this.holeCbType;if(_this22.zpp_inner.reverse_flag){_this22.push(obj)}else{_this22.unshift(obj)}var _this23=this.body;if(_this23.zpp_inner_i.userData==null){_this23.zpp_inner_i.userData={}}_this23.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.Hole"]=project_game_objects_Hole;project_game_objects_Hole.__name__="project.game.objects.Hole";project_game_objects_Hole.__super__=project_entities_PhysicalTile;project_game_objects_Hole.prototype=$extend(project_entities_PhysicalTile.prototype,{holeCbType:null,holeListener:null,inflaListener:null,holeType:null,holeAnim:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.holeListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.holeCbType,$bind(this,this.bodyOnHole));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.holeListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.inflaListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.inflatableType,this.holeCbType,$bind(this,this.inflaOnHole));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.inflaListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);this.holeAnim.update(dt)},bodyOnHole:function(collision){var _gthis=this;var _this=collision.zpp_inner.int1.outer_i;if(_this.zpp_inner_i.userData==null){_this.zpp_inner_i.userData={}}var b=js_Boot.__cast(_this.zpp_inner_i.userData.object,project_game_objects_Bear);b.disableUpdate();b.disablePhysics();var _this1=b.body;var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this2=ret.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(ret.zpp_inner.x==x){var _this3=ret.zpp_inner;if(_this3._validate!=null){_this3._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this4=ret.zpp_inner;if(_this4._invalidate!=null){_this4._invalidate(_this4)}}}ret.zpp_inner.weak=true;var velocity=ret;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var _this5=_this1.zpp_inner.wrap_vel;var _this6=velocity.zpp_inner;if(_this6._validate!=null){_this6._validate()}var x1=velocity.zpp_inner.x;var _this7=velocity.zpp_inner;if(_this7._validate!=null){_this7._validate()}var y1=velocity.zpp_inner.y;var tmp1;var _this8=_this5.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(_this5.zpp_inner.x==x1){var _this9=_this5.zpp_inner;if(_this9._validate!=null){_this9._validate()}tmp1=_this5.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this5.zpp_inner.x=x1;_this5.zpp_inner.y=y1;var _this10=_this5.zpp_inner;if(_this10._invalidate!=null){_this10._invalidate(_this10)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}engine_tweens_Actuator.timer(.3).onComplete(function(f){b.lookAt(180);return});engine_tweens_Actuator.tween(b,.5,{x:this.get_x(),y:this.get_y()}).ease(motion_easing_Quad.easeInOut).onComplete(function(){b.disableVisuals();switch(b.specie){case 1:_gthis.holeAnim.showBehavior("panda");break;case 2:_gthis.holeAnim.showBehavior("ice");break;case 3:_gthis.holeAnim.showBehavior("grizzly");break;default:}engine_soundlib_SoundList.FX(25);engine_tweens_Actuator.timer(1).onComplete($bind(b,b.respawn));engine_soundlib_SoundList.FX(26,1)})},inflaOnHole:function(collision){var _this=collision.zpp_inner.int1.outer_i;if(_this.zpp_inner_i.userData==null){_this.zpp_inner_i.userData={}}var b=js_Boot.__cast(_this.zpp_inner_i.userData.object,project_game_objects_Inflatable);var _this1=b.body;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var type=zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC;_this1.zpp_inner.immutable_midstep("Body::type");if(zpp_$nape_phys_ZPP_$Body.types[_this1.zpp_inner.type]!=type){var ntype;if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(type==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){ntype=2}else{if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}ntype=type==zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC?3:1}if(ntype==1&&_this1.zpp_inner.space!=null){_this1.zpp_inner.velx=0;_this1.zpp_inner.vely=0;_this1.zpp_inner.angvel=0}_this1.zpp_inner.invalidate_type();if(_this1.zpp_inner.space!=null){_this1.zpp_inner.space.transmitType(_this1.zpp_inner,ntype)}else{_this1.zpp_inner.type=ntype}}var _this2=b.body;if(_this2.zpp_inner_i.wrap_cbTypes==null){_this2.zpp_inner_i.setupcbTypes()}_this2.zpp_inner_i.wrap_cbTypes.clear();var _this3=b.body;var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this4=ret.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(ret.zpp_inner.x==x){var _this5=ret.zpp_inner;if(_this5._validate!=null){_this5._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this6=ret.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}}ret.zpp_inner.weak=true;var velocity=ret;if(_this3.zpp_inner.wrap_vel==null){_this3.zpp_inner.setupVelocity()}var _this7=_this3.zpp_inner.wrap_vel;var _this8=velocity.zpp_inner;if(_this8._validate!=null){_this8._validate()}var x1=velocity.zpp_inner.x;var _this9=velocity.zpp_inner;if(_this9._validate!=null){_this9._validate()}var y1=velocity.zpp_inner.y;var tmp1;var _this10=_this7.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(_this7.zpp_inner.x==x1){var _this11=_this7.zpp_inner;if(_this11._validate!=null){_this11._validate()}tmp1=_this7.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this7.zpp_inner.x=x1;_this7.zpp_inner.y=y1;var _this12=_this7.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(_this3.zpp_inner.wrap_vel==null){_this3.zpp_inner.setupVelocity()}engine_tweens_Actuator.tween(b,.5,{x:this.get_x(),y:this.get_y()}).ease(motion_easing_Quad.easeInOut);engine_tweens_Actuator.tween(b,.5,{scaleX:.25,scaleY:.1,alpha:.01}).delay(.5).onComplete($bind(b,b.destroySelf))},__class__:project_game_objects_Hole});var project_game_objects_Inflatable=function(s){this.bouncerCbType=new nape_callbacks_CbType;this.lastPosition=new nape_geom_Vec2;if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var b=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC);var _this=b.zpp_inner.wrap_shapes;var obj=new nape_shape_Circle(28);if(_this.zpp_inner.reverse_flag){_this.push(obj)}else{_this.unshift(obj)}b.zpp_inner.immutable_midstep("Body::space");if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=s){if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){b.zpp_inner.component.woken=false}if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){(b.zpp_inner.space==null?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b)}if(s!=null){var _this1=s.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(b)}else{_this1.unshift(b)}}}if(b.zpp_inner_i.wrap_cbTypes==null){b.zpp_inner_i.setupcbTypes()}var _this2=b.zpp_inner_i.wrap_cbTypes;var obj1=project_game_CallbackTypes.inflatableType;if(_this2.zpp_inner.reverse_flag){_this2.push(obj1)}else{_this2.unshift(obj1)}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,32,45,b,false);b.setShapeMaterials(nape_phys_Material.rubber());this.baseTileContainer=new openfl_display_TileContainer(32,40);this.customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_INFLATABLE_ATLAS);this.baseTileContainer.addTile(this.customTile);this.customTile.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.customTile.set_x(-32);this.customTile.set_y(-45);this.addTile(this.baseTileContainer);var _this3=this.body;if(_this3.zpp_inner_i.userData==null){_this3.zpp_inner_i.userData={}}_this3.zpp_inner_i.userData.object=this;var _this4=this.body;if(_this4.zpp_inner_i.wrap_cbTypes==null){_this4.zpp_inner_i.setupcbTypes()}var _this5=_this4.zpp_inner_i.wrap_cbTypes;var obj2=this.bouncerCbType;if(_this5.zpp_inner.reverse_flag){_this5.push(obj2)}else{_this5.unshift(obj2)}};$hxClasses["project.game.objects.Inflatable"]=project_game_objects_Inflatable;project_game_objects_Inflatable.__name__="project.game.objects.Inflatable";project_game_objects_Inflatable.__super__=project_entities_PhysicalTile;project_game_objects_Inflatable.prototype=$extend(project_entities_PhysicalTile.prototype,{customTile:null,baseTileContainer:null,lastPosition:null,bounceListener:null,bouncerCbType:null,destroySelf:function(){var _this=this.body;_this.zpp_inner.immutable_midstep("Body::space");if((_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer)!=null){if((_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer)!=null){_this.zpp_inner.component.woken=false}if((_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer)!=null){(_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(_this)}}this.parent.removeTile(this)},initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.data.sortCriteria=this.get_y();var _this10=this.lastPosition;var x1=this.get_x();var _this11=_this10.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(_this10.zpp_inner.x!=x1){_this10.zpp_inner.x=x1;var _this12=_this10.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}var _this13=_this10.zpp_inner;if(_this13._validate!=null){_this13._validate()}var _this14=this.lastPosition;var y1=this.get_y();var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this14.zpp_inner.y!=y1){_this14.zpp_inner.y=y1;var _this16=_this14.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bounceListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.bouncerCbType,$bind(this,this.bodyOnEnter));var _this18=this.body;var _this19=(_this18.zpp_inner.space==null?null:_this18.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.bounceListener;if(_this19.zpp_inner.reverse_flag){_this19.push(obj)}else{_this19.unshift(obj)}},bodyOnEnter:function(collision){var _gthis=this;engine_tweens_Actuator.tween(this.baseTileContainer,.1,{scaleX:.9,scaleY:.9},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.baseTileContainer,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_soundlib_SoundList.FX(16,0,false)},update:function(dt){var tmp;var _this=this.lastPosition;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}var tmp1=_this.zpp_inner.x;var _this2=this.body;if(_this2.zpp_inner.wrap_pos==null){_this2.zpp_inner.setupPosition()}var _this3=_this2.zpp_inner.wrap_pos;var _this4=_this3.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(tmp1==_this3.zpp_inner.x){var _this5=this.lastPosition;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}var tmp2=_this5.zpp_inner.y;var _this7=this.body;if(_this7.zpp_inner.wrap_pos==null){_this7.zpp_inner.setupPosition()}var _this8=_this7.zpp_inner.wrap_pos;var _this9=_this8.zpp_inner;if(_this9._validate!=null){_this9._validate()}tmp=tmp2!=_this8.zpp_inner.y}else{tmp=true}if(tmp){project_entities_PhysicalTile.prototype.update.call(this,dt);this.data.sortCriteria=this.get_y();var _this10=this.lastPosition;var x=this.get_x();var _this11=_this10.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(_this10.zpp_inner.x!=x){_this10.zpp_inner.x=x;var _this12=_this10.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}var _this13=_this10.zpp_inner;if(_this13._validate!=null){_this13._validate()}var _this14=this.lastPosition;var y=this.get_y();var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this14.zpp_inner.y!=y){_this14.zpp_inner.y=y;var _this16=_this14.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}}},__class__:project_game_objects_Inflatable});var project_game_objects_OneSideWall=function(s,dir){this.bodiesOver=0;this.direction="left";this.oneSideCbType=new nape_callbacks_CbType;this.direction=dir;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var oneSideBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var rect;switch(this.direction){case"down":rect=nape_shape_Polygon.rect(0,26,128,16);this.animSheet=project_game_util_GameTiles.OBJECT_ONE_SIDE_DOWN;break;case"right":rect=nape_shape_Polygon.rect(26,16,16,128);this.animSheet=project_game_util_GameTiles.OBJECT_ONE_SIDE_RIGHT;break;case"up":rect=nape_shape_Polygon.rect(0,26,128,16);this.animSheet=project_game_util_GameTiles.OBJECT_ONE_SIDE_UP;break;default:rect=nape_shape_Polygon.rect(26,16,16,128);this.animSheet=project_game_util_GameTiles.OBJECT_ONE_SIDE_LEFT}var oneSideShape=new nape_shape_Polygon(rect);oneSideShape.zpp_inner.immutable_midstep("Shape::body");if((oneSideShape.zpp_inner.body!=null?oneSideShape.zpp_inner.body.outer:null)!=oneSideBody){if(oneSideShape.zpp_inner.body!=null){(oneSideShape.zpp_inner.body!=null?oneSideShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(oneSideShape)}if(oneSideBody!=null){var _this=oneSideBody.zpp_inner.wrap_shapes;if(_this.zpp_inner.reverse_flag){_this.push(oneSideShape)}else{_this.unshift(oneSideShape)}}}oneSideBody.zpp_inner.immutable_midstep("Body::"+"false");if(!oneSideBody.zpp_inner.norotate!=false){oneSideBody.zpp_inner.norotate=true;oneSideBody.zpp_inner.invalidate_inertia()}if(oneSideBody.zpp_inner.wrap_pos==null){oneSideBody.zpp_inner.setupPosition()}var _this1=oneSideBody.zpp_inner.wrap_pos;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=1200){_this1.zpp_inner.x=1200;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(oneSideBody.zpp_inner.wrap_pos==null){oneSideBody.zpp_inner.setupPosition()}var _this5=oneSideBody.zpp_inner.wrap_pos;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(_this5.zpp_inner.y!=700){_this5.zpp_inner.y=700;var _this7=_this5.zpp_inner;if(_this7._invalidate!=null){_this7._invalidate(_this7)}}var _this8=_this5.zpp_inner;if(_this8._validate!=null){_this8._validate()}oneSideBody.zpp_inner.immutable_midstep("Body::space");if((oneSideBody.zpp_inner.space==null?null:oneSideBody.zpp_inner.space.outer)!=s){if((oneSideBody.zpp_inner.space==null?null:oneSideBody.zpp_inner.space.outer)!=null){oneSideBody.zpp_inner.component.woken=false}if((oneSideBody.zpp_inner.space==null?null:oneSideBody.zpp_inner.space.outer)!=null){(oneSideBody.zpp_inner.space==null?null:oneSideBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(oneSideBody)}if(s!=null){var _this9=s.zpp_inner.wrap_bodies;if(_this9.zpp_inner.reverse_flag){_this9.push(oneSideBody)}else{_this9.unshift(oneSideBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,oneSideBody,false);if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}var pl=new nape_callbacks_PreListener(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,this.oneSideCbType,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,$bind(this,this.oneWayHandler),0,true);if(oneSideBody.zpp_inner_i.wrap_cbTypes==null){oneSideBody.zpp_inner_i.setupcbTypes()}var _this10=oneSideBody.zpp_inner_i.wrap_cbTypes;var obj=this.oneSideCbType;if(_this10.zpp_inner.reverse_flag){_this10.push(obj)}else{_this10.unshift(obj)}var _this11=s.zpp_inner.wrap_listeners;if(_this11.zpp_inner.reverse_flag){_this11.push(pl)}else{_this11.unshift(pl)}this.doorImg=new engine_mapsheet_AnimatedTile;this.doorImg.set_tileset(this.animSheet);this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("close",[0],false,10));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("open",[3],false,10));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("opening",[0,1,2,3],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("closing",[3,2,1,0],false,20));this.doorImg.showBehavior("closing");this.doorImg.update(1e3);this.addTile(this.doorImg);var _this12=this.body;if(_this12.zpp_inner_i.userData==null){_this12.zpp_inner_i.userData={}}_this12.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.OneSideWall"]=project_game_objects_OneSideWall;project_game_objects_OneSideWall.__name__="project.game.objects.OneSideWall";project_game_objects_OneSideWall.__super__=project_entities_PhysicalTile;project_game_objects_OneSideWall.prototype=$extend(project_entities_PhysicalTile.prototype,{oneSideCbType:null,enterListener:null,exitListener:null,detectionType:null,direction:null,animSheet:null,doorImg:null,onGoingListener:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY,this.detectionType,this.oneSideCbType,$bind(this,this.bodyOnEnter));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.enterListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY,this.detectionType,this.oneSideCbType,$bind(this,this.bodyOnExit));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.exitListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}this.data.sortCriteria=this.get_y();if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_ANY==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_ANY=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.onGoingListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING,zpp_$nape_util_ZPP_$Flags.InteractionType_ANY,this.detectionType,this.oneSideCbType,$bind(this,this.bodyOnGoing));var _this14=this.body;var _this15=(_this14.zpp_inner.space==null?null:_this14.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj2=this.onGoingListener;if(_this15.zpp_inner.reverse_flag){_this15.push(obj2)}else{_this15.unshift(obj2)}},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);this.doorImg.update(dt)},bodyOnEnter:function(collision){this.bodiesOver+=1},bodyOnExit:function(collision){this.bodiesOver-=1;if(this.bodiesOver<1){if(this.doorImg.currentBehavior.name!="closing"){this.doorImg.showBehavior("closing");this.data.sortCriteria=this.get_y()}}},bodyOnGoing:function(collision){var _this=collision.zpp_inner.int1.outer_i;if(_this.zpp_inner_i.userData==null){_this.zpp_inner_i.userData={}}if(_this.zpp_inner_i.userData.object instanceof project_game_objects_Bear&&this.bodiesOver>1){var _this1=collision.zpp_inner.int1.outer_i;if(_this1.zpp_inner_i.userData==null){_this1.zpp_inner_i.userData={}}if(this.data.sortCriteria>js_Boot.__cast(_this1.zpp_inner_i.userData.object,project_game_objects_Bear).data.sortCriteria-1){var _this2=collision.zpp_inner.int1.outer_i;if(_this2.zpp_inner_i.userData==null){_this2.zpp_inner_i.userData={}}this.data.sortCriteria=js_Boot.__cast(_this2.zpp_inner_i.userData.object,project_game_objects_Bear).data.sortCriteria-1}}},bodiesOver:null,oneWayHandler:function(cb){var _this=cb.zpp_inner.pre_arbiter.wrapper();var colArb=_this.zpp_inner.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?_this.zpp_inner.colarb.outer_zn:null;if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}var rv=zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT;if(this.bodiesOver<1){switch(this.direction){case"down":if(colArb.zpp_inner.colarb.wrap_normal==null){colArb.zpp_inner.colarb.getnormal()}var _this1=colArb.zpp_inner.colarb.wrap_normal;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.y<0!=cb.zpp_inner.pre_swapped){if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}rv=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE;this.doorImg.showBehavior("opening");engine_soundlib_SoundList.FX(23,0,false)}else{engine_soundlib_SoundList.FX(24,0,false)}break;case"left":if(colArb.zpp_inner.colarb.wrap_normal==null){colArb.zpp_inner.colarb.getnormal()}var _this3=colArb.zpp_inner.colarb.wrap_normal;var _this4=_this3.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(_this3.zpp_inner.x>0!=cb.zpp_inner.pre_swapped){if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}rv=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE;this.doorImg.showBehavior("opening");engine_soundlib_SoundList.FX(23,0,false)}else{engine_soundlib_SoundList.FX(24,0,false)}break;case"right":if(colArb.zpp_inner.colarb.wrap_normal==null){colArb.zpp_inner.colarb.getnormal()}var _this5=colArb.zpp_inner.colarb.wrap_normal;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(_this5.zpp_inner.x<0!=cb.zpp_inner.pre_swapped){if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}rv=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE;this.doorImg.showBehavior("opening");engine_soundlib_SoundList.FX(23,0,false)}else{engine_soundlib_SoundList.FX(24,0,false)}break;case"up":if(colArb.zpp_inner.colarb.wrap_normal==null){colArb.zpp_inner.colarb.getnormal()}var _this7=colArb.zpp_inner.colarb.wrap_normal;var _this8=_this7.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(_this7.zpp_inner.y>0!=cb.zpp_inner.pre_swapped){if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}rv=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE;this.doorImg.showBehavior("opening");engine_soundlib_SoundList.FX(23,0,false)}else{engine_soundlib_SoundList.FX(24,0,false)}break}}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}rv=zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE}return rv},__class__:project_game_objects_OneSideWall});var project_game_objects_Splat=function(s,angle,type){if(type==null){type="goo"}if(angle==null){angle=0}this.speedDown=.95;this.speedUp=1.2;this.splatType="goo";this.splatCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var fluidBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);this.splatType=type;var fluidShape=new nape_shape_Circle(40);fluidShape.zpp_inner.immutable_midstep("Shape::fluidEnabled");fluidShape.zpp_inner.fluidEnabled=true;if(fluidShape.zpp_inner.fluidProperties==null){var fluidProperties=new nape_phys_FluidProperties;fluidShape.zpp_inner.setFluid(fluidProperties.zpp_inner);fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}fluidShape.zpp_inner.fluidProperties.wrapper()}fluidShape.zpp_inner.wake();var customTile;if(this.splatType=="oil"){fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this=fluidShape.zpp_inner.fluidProperties.wrapper();if(1!=_this.zpp_inner.density*1e3){_this.zpp_inner.density=.001;_this.zpp_inner.invalidate()}customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_SPLAT_OIL_ATLAS)}else{fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this1=fluidShape.zpp_inner.fluidProperties.wrapper();if(1!=_this1.zpp_inner.density*1e3){_this1.zpp_inner.density=.001;_this1.zpp_inner.invalidate()}customTile=project_game_util_GameTiles.ATLAS_TILESET.getTile(project_game_util_GameTiles.OBJECT_SPLAT_GOO_ATLAS)}fluidShape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(fluidShape.zpp_inner.fluidProperties==null){fluidShape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this2=fluidShape.zpp_inner.fluidProperties.wrapper();var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this3=ret.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(ret.zpp_inner.x==x){var _this4=ret.zpp_inner;if(_this4._validate!=null){_this4._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this5=ret.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}}ret.zpp_inner.weak=true;var gravity=ret;if(gravity==null){if(_this2.zpp_inner.wrap_gravity!=null){_this2.zpp_inner.wrap_gravity.zpp_inner._inuse=false;var _this6=_this2.zpp_inner.wrap_gravity;var inner=_this6.zpp_inner;_this6.zpp_inner.outer=null;_this6.zpp_inner=null;_this6.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=_this6;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner;_this2.zpp_inner.wrap_gravity=null}}else{if(_this2.zpp_inner.wrap_gravity==null){_this2.zpp_inner.getgravity()}var _this7=_this2.zpp_inner.wrap_gravity;var _this8=gravity.zpp_inner;if(_this8._validate!=null){_this8._validate()}var x1=gravity.zpp_inner.x;var _this9=gravity.zpp_inner;if(_this9._validate!=null){_this9._validate()}var y1=gravity.zpp_inner.y;var tmp1;var _this10=_this7.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(_this7.zpp_inner.x==x1){var _this11=_this7.zpp_inner;if(_this11._validate!=null){_this11._validate()}tmp1=_this7.zpp_inner.y==y1}else{tmp1=false}if(!tmp1){_this7.zpp_inner.x=x1;_this7.zpp_inner.y=y1;var _this12=_this7.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}if(gravity.zpp_inner.weak){var inner1=gravity.zpp_inner;gravity.zpp_inner.outer=null;gravity.zpp_inner=null;gravity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=gravity;if(inner1.outer!=null){inner1.outer.zpp_inner=null;inner1.outer=null}inner1._isimmutable=null;inner1._validate=null;inner1._invalidate=null;inner1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner1}}fluidShape.zpp_inner.immutable_midstep("Shape::body");if((fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null)!=fluidBody){if(fluidShape.zpp_inner.body!=null){(fluidShape.zpp_inner.body!=null?fluidShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(fluidShape)}if(fluidBody!=null){var _this13=fluidBody.zpp_inner.wrap_shapes;if(_this13.zpp_inner.reverse_flag){_this13.push(fluidShape)}else{_this13.unshift(fluidShape)}}}fluidBody.zpp_inner.immutable_midstep("Body::"+"false");if(!fluidBody.zpp_inner.norotate!=false){fluidBody.zpp_inner.norotate=true;fluidBody.zpp_inner.invalidate_inertia()}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this14=fluidBody.zpp_inner.wrap_pos;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this14.zpp_inner.x!=1200){_this14.zpp_inner.x=1200;var _this16=_this14.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(fluidBody.zpp_inner.wrap_pos==null){fluidBody.zpp_inner.setupPosition()}var _this18=fluidBody.zpp_inner.wrap_pos;var _this19=_this18.zpp_inner;if(_this19._validate!=null){_this19._validate()}if(_this18.zpp_inner.y!=700){_this18.zpp_inner.y=700;var _this20=_this18.zpp_inner;if(_this20._invalidate!=null){_this20._invalidate(_this20)}}var _this21=_this18.zpp_inner;if(_this21._validate!=null){_this21._validate()}fluidBody.zpp_inner.immutable_midstep("Body::space");if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=s){if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){fluidBody.zpp_inner.component.woken=false}if((fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer)!=null){(fluidBody.zpp_inner.space==null?null:fluidBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(fluidBody)}if(s!=null){var _this22=s.zpp_inner.wrap_bodies;if(_this22.zpp_inner.reverse_flag){_this22.push(fluidBody)}else{_this22.unshift(fluidBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,Math.ceil(Math.random()*24)*15,64,64,fluidBody,false);customTile.set_tileset(project_game_util_GameTiles.ATLAS_TILESET);this.addTile(customTile);if(fluidBody.zpp_inner_i.wrap_cbTypes==null){fluidBody.zpp_inner_i.setupcbTypes()}var _this23=fluidBody.zpp_inner_i.wrap_cbTypes;var obj=this.splatCbType;if(_this23.zpp_inner.reverse_flag){_this23.push(obj)}else{_this23.unshift(obj)}var _this24=this.body;if(_this24.zpp_inner_i.userData==null){_this24.zpp_inner_i.userData={}}_this24.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.Splat"]=project_game_objects_Splat;project_game_objects_Splat.__name__="project.game.objects.Splat";project_game_objects_Splat.__super__=project_entities_PhysicalTile;project_game_objects_Splat.prototype=$extend(project_entities_PhysicalTile.prototype,{splatCbType:null,splatListener:null,splatType:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(this.splatType=="oil"){if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.splatListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.splatCbType,$bind(this,this.bodyOnOil));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.splatListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.splatListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.splatCbType,$bind(this,this.bodyOnOil));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.splatListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}}else{if(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.splatListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_ONGOING,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.splatCbType,$bind(this,this.bodyOnGoo));var _this14=this.body;var _this15=(_this14.zpp_inner.space==null?null:_this14.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj2=this.splatListener;if(_this15.zpp_inner.reverse_flag){_this15.push(obj2)}else{_this15.unshift(obj2)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.splatListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_FLUID,project_game_CallbackTypes.bearType,this.splatCbType,$bind(this,this.bodyOnGooFX));var _this16=this.body;var _this17=(_this16.zpp_inner.space==null?null:_this16.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj3=this.splatListener;if(_this17.zpp_inner.reverse_flag){_this17.push(obj3)}else{_this17.unshift(obj3)}}},speedUp:null,speedDown:null,bodyOnOil:function(collision){var _this=collision.zpp_inner.int1.outer_i;var _this1=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var v=_this1.zpp_inner.wrap_vel;var _this2=collision.zpp_inner.int1.outer_i;var _this3=_this2.zpp_inner_i.ibody!=null?_this2.zpp_inner_i.ibody.outer:null;var _this4=v.zpp_inner;if(_this4._validate!=null){_this4._validate()}var angularVel=v.zpp_inner.x;var _this5=v.zpp_inner;if(_this5._validate!=null){_this5._validate()}var angularVel1=angularVel*v.zpp_inner.x;var _this6=v.zpp_inner;if(_this6._validate!=null){_this6._validate()}var angularVel2=v.zpp_inner.y;var _this7=v.zpp_inner;if(_this7._validate!=null){_this7._validate()}var angularVel3=Math.sqrt(angularVel1+angularVel2*v.zpp_inner.y)/50;if(_this3.zpp_inner.angvel!=angularVel3){_this3.zpp_inner.angvel=angularVel3;_this3.zpp_inner.wake()}var _this8=v.zpp_inner;if(_this8._validate!=null){_this8._validate()}var y=v.zpp_inner.y*this.speedUp;var _this9=v.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(v.zpp_inner.y!=y){v.zpp_inner.y=y;var _this10=v.zpp_inner;if(_this10._invalidate!=null){_this10._invalidate(_this10)}}var _this11=v.zpp_inner;if(_this11._validate!=null){_this11._validate()}var _this12=v.zpp_inner;if(_this12._validate!=null){_this12._validate()}var x=v.zpp_inner.x*this.speedUp;var _this13=v.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(v.zpp_inner.x!=x){v.zpp_inner.x=x;var _this14=v.zpp_inner;if(_this14._invalidate!=null){_this14._invalidate(_this14)}}var _this15=v.zpp_inner;if(_this15._validate!=null){_this15._validate()}engine_soundlib_SoundList.FX(29,0,false)},bodyOnGoo:function(collision){var _this=collision.zpp_inner.int1.outer_i;var _this1=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var v=_this1.zpp_inner.wrap_vel;var _this2=collision.zpp_inner.int1.outer_i;var _this3=_this2.zpp_inner_i.ibody!=null?_this2.zpp_inner_i.ibody.outer:null;var _this4=v.zpp_inner;if(_this4._validate!=null){_this4._validate()}var angularVel=v.zpp_inner.x;var _this5=v.zpp_inner;if(_this5._validate!=null){_this5._validate()}var angularVel1=angularVel*v.zpp_inner.x;var _this6=v.zpp_inner;if(_this6._validate!=null){_this6._validate()}var angularVel2=v.zpp_inner.y;var _this7=v.zpp_inner;if(_this7._validate!=null){_this7._validate()}var angularVel3=Math.sqrt(angularVel1+angularVel2*v.zpp_inner.y)/100;if(_this3.zpp_inner.angvel!=angularVel3){_this3.zpp_inner.angvel=angularVel3;_this3.zpp_inner.wake()}var _this8=v.zpp_inner;if(_this8._validate!=null){_this8._validate()}var tmp=v.zpp_inner.x;var _this9=v.zpp_inner;if(_this9._validate!=null){_this9._validate()}var tmp1=tmp*v.zpp_inner.x;var _this10=v.zpp_inner;if(_this10._validate!=null){_this10._validate()}var tmp2=v.zpp_inner.y;var _this11=v.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(Math.sqrt(tmp1+tmp2*v.zpp_inner.y)>50){var _this12=v.zpp_inner;if(_this12._validate!=null){_this12._validate()}var x=v.zpp_inner.x*this.speedDown;var _this13=v.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(v.zpp_inner.x!=x){v.zpp_inner.x=x;var _this14=v.zpp_inner;if(_this14._invalidate!=null){_this14._invalidate(_this14)}}var _this15=v.zpp_inner;if(_this15._validate!=null){_this15._validate()}var _this16=v.zpp_inner;if(_this16._validate!=null){_this16._validate()}var y=v.zpp_inner.y*this.speedDown;var _this17=v.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(v.zpp_inner.y!=y){v.zpp_inner.y=y;var _this18=v.zpp_inner;if(_this18._invalidate!=null){_this18._invalidate(_this18)}}var _this19=v.zpp_inner;if(_this19._validate!=null){_this19._validate()}}},bodyOnGooFX:function(collision){engine_soundlib_SoundList.FX(30,0,false)},__class__:project_game_objects_Splat});var project_game_objects_Teleport=function(s,dir,thisID,exitID){if(dir==null){dir="up"}this.grabbedBear=[];this.offset=new nape_geom_Vec2;this.targetID=-1;this.teleID=-1;this.direction="left";this.teleportCbType=new nape_callbacks_CbType;this.direction=dir;this.teleID=thisID;this.targetID=exitID;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var teleportBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var rect;this.tileSheet=project_game_util_GameTiles.OBJECT_TELEPORT;var currentID=-1;var img1Pos=new openfl_geom_Point;var img2Pos=new openfl_geom_Point;switch(this.direction){case"down":rect=nape_shape_Polygon.rect(-64,0,128,16);currentID=1;img1Pos.x=0;img1Pos.y=-16;img2Pos.x=-64;img2Pos.y=-16;break;case"left":rect=nape_shape_Polygon.rect(32,16,16,128);currentID=2;img1Pos.y=16;img2Pos.y=80;break;case"up":rect=nape_shape_Polygon.rect(-64,16,128,16);currentID=0;img1Pos.x=0;img1Pos.y=-16;img2Pos.x=-64;img2Pos.y=-16;break;default:rect=nape_shape_Polygon.rect(16,16,16,128);currentID=3;img1Pos.y=16;img2Pos.y=80;var _this=this.offset;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}if(_this.zpp_inner.x!=64){_this.zpp_inner.x=64;var _this2=_this.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}}var teleportShape=new nape_shape_Polygon(rect);teleportShape.zpp_inner.immutable_midstep("Shape::sensorEnabled");teleportShape.zpp_inner.sensorEnabled=true;teleportShape.zpp_inner.wake();teleportShape.zpp_inner.immutable_midstep("Shape::body");if((teleportShape.zpp_inner.body!=null?teleportShape.zpp_inner.body.outer:null)!=teleportBody){if(teleportShape.zpp_inner.body!=null){(teleportShape.zpp_inner.body!=null?teleportShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(teleportShape)}if(teleportBody!=null){var _this4=teleportBody.zpp_inner.wrap_shapes;if(_this4.zpp_inner.reverse_flag){_this4.push(teleportShape)}else{_this4.unshift(teleportShape)}}}teleportBody.zpp_inner.immutable_midstep("Body::"+"false");if(!teleportBody.zpp_inner.norotate!=false){teleportBody.zpp_inner.norotate=true;teleportBody.zpp_inner.invalidate_inertia()}if(teleportBody.zpp_inner.wrap_pos==null){teleportBody.zpp_inner.setupPosition()}var _this5=teleportBody.zpp_inner.wrap_pos;var _this6=_this5.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(_this5.zpp_inner.x!=1200){_this5.zpp_inner.x=1200;var _this7=_this5.zpp_inner;if(_this7._invalidate!=null){_this7._invalidate(_this7)}}var _this8=_this5.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(teleportBody.zpp_inner.wrap_pos==null){teleportBody.zpp_inner.setupPosition()}var _this9=teleportBody.zpp_inner.wrap_pos;var _this10=_this9.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(_this9.zpp_inner.y!=700){_this9.zpp_inner.y=700;var _this11=_this9.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}var _this12=_this9.zpp_inner;if(_this12._validate!=null){_this12._validate()}teleportBody.zpp_inner.immutable_midstep("Body::space");if((teleportBody.zpp_inner.space==null?null:teleportBody.zpp_inner.space.outer)!=s){if((teleportBody.zpp_inner.space==null?null:teleportBody.zpp_inner.space.outer)!=null){teleportBody.zpp_inner.component.woken=false}if((teleportBody.zpp_inner.space==null?null:teleportBody.zpp_inner.space.outer)!=null){(teleportBody.zpp_inner.space==null?null:teleportBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(teleportBody)}if(s!=null){var _this13=s.zpp_inner.wrap_bodies;if(_this13.zpp_inner.reverse_flag){_this13.push(teleportBody)}else{_this13.unshift(teleportBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,teleportBody,false);if(teleportBody.zpp_inner_i.wrap_cbTypes==null){teleportBody.zpp_inner_i.setupcbTypes()}var _this14=teleportBody.zpp_inner_i.wrap_cbTypes;var obj=this.teleportCbType;if(_this14.zpp_inner.reverse_flag){_this14.push(obj)}else{_this14.unshift(obj)}this.teleportImg=new openfl_display_Tile(currentID,img1Pos.x,img1Pos.y);this.teleportImg.set_tileset(this.tileSheet);this.addTile(this.teleportImg);this.teleportImg=new openfl_display_Tile(currentID,img2Pos.x,img2Pos.y);this.teleportImg.set_tileset(this.tileSheet);this.addTile(this.teleportImg);var _this15=this.body;if(_this15.zpp_inner_i.userData==null){_this15.zpp_inner_i.userData={}}_this15.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.Teleport"]=project_game_objects_Teleport;project_game_objects_Teleport.__name__="project.game.objects.Teleport";project_game_objects_Teleport.__super__=project_entities_PhysicalTile;project_game_objects_Teleport.prototype=$extend(project_entities_PhysicalTile.prototype,{teleportCbType:null,enterListener:null,exitListener:null,teleportExit:null,direction:null,tileSheet:null,teleportImg:null,teleID:null,targetID:null,offset:null,camera:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.teleportCbType,$bind(this,this.bodyOnEnter));if(zpp_$nape_util_ZPP_$Flags.CbEvent_END==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_END=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.exitListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_END,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.teleportCbType,$bind(this,this.bodyOnExit));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.enterListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.exitListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}this.data.sortCriteria=this.get_y()},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);if(this.camera!=null&&this.grabbedBear.length>0){if(!this.camera.movingALot){this.releaseTheKracub()}}else if(this.grabbedBear.length>0){this.releaseTheKracub()}},bodyOnEnter:function(collision){var canTeleport=true;switch(this.direction){case"down":var _this=collision.zpp_inner.int1.outer_i;var _this1=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var _this2=_this1.zpp_inner.wrap_vel;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}canTeleport=_this2.zpp_inner.y>0;break;case"right":var _this4=collision.zpp_inner.int1.outer_i;var _this5=_this4.zpp_inner_i.ibody!=null?_this4.zpp_inner_i.ibody.outer:null;if(_this5.zpp_inner.wrap_vel==null){_this5.zpp_inner.setupVelocity()}var _this6=_this5.zpp_inner.wrap_vel;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}canTeleport=_this6.zpp_inner.x>0;break;case"up":var _this8=collision.zpp_inner.int1.outer_i;var _this9=_this8.zpp_inner_i.ibody!=null?_this8.zpp_inner_i.ibody.outer:null;if(_this9.zpp_inner.wrap_vel==null){_this9.zpp_inner.setupVelocity()}var _this10=_this9.zpp_inner.wrap_vel;var _this11=_this10.zpp_inner;if(_this11._validate!=null){_this11._validate()}canTeleport=_this10.zpp_inner.y<0;break;default:var _this12=collision.zpp_inner.int1.outer_i;var _this13=_this12.zpp_inner_i.ibody!=null?_this12.zpp_inner_i.ibody.outer:null;if(_this13.zpp_inner.wrap_vel==null){_this13.zpp_inner.setupVelocity()}var _this14=_this13.zpp_inner.wrap_vel;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}canTeleport=_this14.zpp_inner.x<0}if(!canTeleport){var _this16=collision.zpp_inner.int1.outer_i;var b=_this16.zpp_inner_i.ibody!=null?_this16.zpp_inner_i.ibody.outer:null;var minVelocity=200;var addedVelocity=300;switch(this.direction){case"down":if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this17=b.zpp_inner.wrap_vel;var _this18=_this17.zpp_inner;if(_this18._validate!=null){_this18._validate()}if(_this17.zpp_inner.y>-minVelocity){if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this19=b.zpp_inner.wrap_vel;if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this20=b.zpp_inner.wrap_vel;var _this21=_this20.zpp_inner;if(_this21._validate!=null){_this21._validate()}var y=_this20.zpp_inner.y-addedVelocity;var _this22=_this19.zpp_inner;if(_this22._validate!=null){_this22._validate()}if(_this19.zpp_inner.y!=y){_this19.zpp_inner.y=y;var _this23=_this19.zpp_inner;if(_this23._invalidate!=null){_this23._invalidate(_this23)}}var _this24=_this19.zpp_inner;if(_this24._validate!=null){_this24._validate()}}break;case"left":if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this25=b.zpp_inner.wrap_vel;var _this26=_this25.zpp_inner;if(_this26._validate!=null){_this26._validate()}if(_this25.zpp_inner.x<minVelocity){if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this27=b.zpp_inner.wrap_vel;if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this28=b.zpp_inner.wrap_vel;var _this29=_this28.zpp_inner;if(_this29._validate!=null){_this29._validate()}var x=_this28.zpp_inner.x+addedVelocity;var _this30=_this27.zpp_inner;if(_this30._validate!=null){_this30._validate()}if(_this27.zpp_inner.x!=x){_this27.zpp_inner.x=x;var _this31=_this27.zpp_inner;if(_this31._invalidate!=null){_this31._invalidate(_this31)}}var _this32=_this27.zpp_inner;if(_this32._validate!=null){_this32._validate()}}break;case"up":if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this33=b.zpp_inner.wrap_vel;var _this34=_this33.zpp_inner;if(_this34._validate!=null){_this34._validate()}if(_this33.zpp_inner.y<minVelocity){if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this35=b.zpp_inner.wrap_vel;if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this36=b.zpp_inner.wrap_vel;var _this37=_this36.zpp_inner;if(_this37._validate!=null){_this37._validate()}var y1=_this36.zpp_inner.y+addedVelocity;var _this38=_this35.zpp_inner;if(_this38._validate!=null){_this38._validate()}if(_this35.zpp_inner.y!=y1){_this35.zpp_inner.y=y1;var _this39=_this35.zpp_inner;if(_this39._invalidate!=null){_this39._invalidate(_this39)}}var _this40=_this35.zpp_inner;if(_this40._validate!=null){_this40._validate()}}break;default:if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this41=b.zpp_inner.wrap_vel;var _this42=_this41.zpp_inner;if(_this42._validate!=null){_this42._validate()}if(_this41.zpp_inner.x>-minVelocity){if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this43=b.zpp_inner.wrap_vel;if(b.zpp_inner.wrap_vel==null){b.zpp_inner.setupVelocity()}var _this44=b.zpp_inner.wrap_vel;var _this45=_this44.zpp_inner;if(_this45._validate!=null){_this45._validate()}var x1=_this44.zpp_inner.x-addedVelocity;var _this46=_this43.zpp_inner;if(_this46._validate!=null){_this46._validate()}if(_this43.zpp_inner.x!=x1){_this43.zpp_inner.x=x1;var _this47=_this43.zpp_inner;if(_this47._invalidate!=null){_this47._invalidate(_this47)}}var _this48=_this43.zpp_inner;if(_this48._validate!=null){_this48._validate()}}}}else{engine_soundlib_SoundList.FX(36)}},bodyOnExit:function(collision){var canTeleport=true;var distance=new openfl_geom_Point;switch(this.direction){case"down":var _this=collision.zpp_inner.int1.outer_i;var _this1=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(_this1.zpp_inner.wrap_vel==null){_this1.zpp_inner.setupVelocity()}var _this2=_this1.zpp_inner.wrap_vel;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}canTeleport=_this2.zpp_inner.y>0;break;case"right":var _this4=collision.zpp_inner.int1.outer_i;var _this5=_this4.zpp_inner_i.ibody!=null?_this4.zpp_inner_i.ibody.outer:null;if(_this5.zpp_inner.wrap_vel==null){_this5.zpp_inner.setupVelocity()}var _this6=_this5.zpp_inner.wrap_vel;var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}canTeleport=_this6.zpp_inner.x>0;break;case"up":var _this8=collision.zpp_inner.int1.outer_i;var _this9=_this8.zpp_inner_i.ibody!=null?_this8.zpp_inner_i.ibody.outer:null;if(_this9.zpp_inner.wrap_vel==null){_this9.zpp_inner.setupVelocity()}var _this10=_this9.zpp_inner.wrap_vel;var _this11=_this10.zpp_inner;if(_this11._validate!=null){_this11._validate()}canTeleport=_this10.zpp_inner.y<0;break;default:var _this12=collision.zpp_inner.int1.outer_i;var _this13=_this12.zpp_inner_i.ibody!=null?_this12.zpp_inner_i.ibody.outer:null;if(_this13.zpp_inner.wrap_vel==null){_this13.zpp_inner.setupVelocity()}var _this14=_this13.zpp_inner.wrap_vel;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}canTeleport=_this14.zpp_inner.x<0}if(canTeleport){var _this16=collision.zpp_inner.int1.outer_i;var b=_this16.zpp_inner_i.ibody!=null?_this16.zpp_inner_i.ibody.outer:null;switch(this.direction){case"down":if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this17=b.zpp_inner.wrap_pos;var _this18=_this17.zpp_inner;if(_this18._validate!=null){_this18._validate()}var tmp=_this17.zpp_inner.x;var _this19=this.body;if(_this19.zpp_inner.wrap_pos==null){_this19.zpp_inner.setupPosition()}var _this20=_this19.zpp_inner.wrap_pos;var _this21=_this20.zpp_inner;if(_this21._validate!=null){_this21._validate()}distance.x=tmp-_this20.zpp_inner.x;break;case"right":if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this22=b.zpp_inner.wrap_pos;var _this23=_this22.zpp_inner;if(_this23._validate!=null){_this23._validate()}var tmp1=_this22.zpp_inner.y;var _this24=this.body;if(_this24.zpp_inner.wrap_pos==null){_this24.zpp_inner.setupPosition()}var _this25=_this24.zpp_inner.wrap_pos;var _this26=_this25.zpp_inner;if(_this26._validate!=null){_this26._validate()}distance.y=tmp1-_this25.zpp_inner.y;break;case"up":if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this27=b.zpp_inner.wrap_pos;var _this28=_this27.zpp_inner;if(_this28._validate!=null){_this28._validate()}var tmp2=_this27.zpp_inner.x;var _this29=this.body;if(_this29.zpp_inner.wrap_pos==null){_this29.zpp_inner.setupPosition()}var _this30=_this29.zpp_inner.wrap_pos;var _this31=_this30.zpp_inner;if(_this31._validate!=null){_this31._validate()}distance.x=tmp2-_this30.zpp_inner.x;break;default:if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this32=b.zpp_inner.wrap_pos;var _this33=_this32.zpp_inner;if(_this33._validate!=null){_this33._validate()}var tmp3=_this32.zpp_inner.y;var _this34=this.body;if(_this34.zpp_inner.wrap_pos==null){_this34.zpp_inner.setupPosition()}var _this35=_this34.zpp_inner.wrap_pos;var _this36=_this35.zpp_inner;if(_this36._validate!=null){_this36._validate()}distance.y=tmp3-_this35.zpp_inner.y}this.teleportExit.grabBody(b,distance)}},grabbedBear:null,grabBody:function(b,distance){switch(this.direction){case"down":case"up":if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this=b.zpp_inner.wrap_pos;var _this1=this.body;if(_this1.zpp_inner.wrap_pos==null){_this1.zpp_inner.setupPosition()}var _this2=_this1.zpp_inner.wrap_pos;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}var x=_this2.zpp_inner.x;var _this4=_this.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(_this.zpp_inner.x!=x){_this.zpp_inner.x=x;var _this5=_this.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}var _this6=_this.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this7=b.zpp_inner.wrap_pos;var _this8=this.body;if(_this8.zpp_inner.wrap_pos==null){_this8.zpp_inner.setupPosition()}var _this9=_this8.zpp_inner.wrap_pos;var _this10=_this9.zpp_inner;if(_this10._validate!=null){_this10._validate()}var y=_this9.zpp_inner.y;var _this11=_this7.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(_this7.zpp_inner.y!=y){_this7.zpp_inner.y=y;var _this12=_this7.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}var _this13=_this7.zpp_inner;if(_this13._validate!=null){_this13._validate()}break;default:if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this14=b.zpp_inner.wrap_pos;var _this15=this.body;if(_this15.zpp_inner.wrap_pos==null){_this15.zpp_inner.setupPosition()}var _this16=_this15.zpp_inner.wrap_pos;var _this17=_this16.zpp_inner;if(_this17._validate!=null){_this17._validate()}var x1=_this16.zpp_inner.x;var _this18=_this14.zpp_inner;if(_this18._validate!=null){_this18._validate()}if(_this14.zpp_inner.x!=x1){_this14.zpp_inner.x=x1;var _this19=_this14.zpp_inner;if(_this19._invalidate!=null){_this19._invalidate(_this19)}}var _this20=_this14.zpp_inner;if(_this20._validate!=null){_this20._validate()}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _this21=b.zpp_inner.wrap_pos;var _this22=this.body;if(_this22.zpp_inner.wrap_pos==null){_this22.zpp_inner.setupPosition()}var _this23=_this22.zpp_inner.wrap_pos;var _this24=_this23.zpp_inner;if(_this24._validate!=null){_this24._validate()}var y1=_this23.zpp_inner.y+64;var _this25=_this21.zpp_inner;if(_this25._validate!=null){_this25._validate()}if(_this21.zpp_inner.y!=y1){_this21.zpp_inner.y=y1;var _this26=_this21.zpp_inner;if(_this26._invalidate!=null){_this26._invalidate(_this26)}}var _this27=_this21.zpp_inner;if(_this27._validate!=null){_this27._validate()}}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _g1=b.zpp_inner.wrap_pos;var _this28=_g1.zpp_inner;if(_this28._validate!=null){_this28._validate()}var x2=_g1.zpp_inner.x;var _this29=this.offset;var _this30=_this29.zpp_inner;if(_this30._validate!=null){_this30._validate()}var x3=x2+_this29.zpp_inner.x;var _this31=_g1.zpp_inner;if(_this31._validate!=null){_this31._validate()}if(_g1.zpp_inner.x!=x3){_g1.zpp_inner.x=x3;var _this32=_g1.zpp_inner;if(_this32._invalidate!=null){_this32._invalidate(_this32)}}var _this33=_g1.zpp_inner;if(_this33._validate!=null){_this33._validate()}if(b.zpp_inner.wrap_pos==null){b.zpp_inner.setupPosition()}var _g11=b.zpp_inner.wrap_pos;var _this34=_g11.zpp_inner;if(_this34._validate!=null){_this34._validate()}var y2=_g11.zpp_inner.y;var _this35=this.offset;var _this36=_this35.zpp_inner;if(_this36._validate!=null){_this36._validate()}var y3=y2+_this35.zpp_inner.y;var _this37=_g11.zpp_inner;if(_this37._validate!=null){_this37._validate()}if(_g11.zpp_inner.y!=y3){_g11.zpp_inner.y=y3;var _this38=_g11.zpp_inner;if(_this38._invalidate!=null){_this38._invalidate(_this38)}}var _this39=_g11.zpp_inner;if(_this39._validate!=null){_this39._validate()}b.zpp_inner.immutable_midstep("Body::space");if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){b.zpp_inner.component.woken=false}if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){(b.zpp_inner.space==null?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b)}}this.grabbedBear.push(b)},releaseTheKracub:function(){var _g=0;var _g1=this.grabbedBear;while(_g<_g1.length){var b=_g1[_g];++_g;var _this=this.body;var space=_this.zpp_inner.space==null?null:_this.zpp_inner.space.outer;b.zpp_inner.immutable_midstep("Body::space");if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=space){if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){b.zpp_inner.component.woken=false}if((b.zpp_inner.space==null?null:b.zpp_inner.space.outer)!=null){(b.zpp_inner.space==null?null:b.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b)}if(space!=null){var _this1=space.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(b)}else{_this1.unshift(b)}}}}while(this.grabbedBear.length>0)this.grabbedBear.pop()},__class__:project_game_objects_Teleport});var project_game_objects_TimedDoor=function(s,dir,timeOpen,timeClose,delay,isUp){if(isUp==null){isUp=true}if(delay==null){delay=0}if(timeClose==null){timeClose=5}if(timeOpen==null){timeOpen=5}this.baseGroup=0;this.delayTime=0;this.currentTime=0;this.doorIsUp=true;this.direction="left";this.timedDoorCbType=new nape_callbacks_CbType;this.direction=dir;this.maxTimeOpened=timeOpen;this.maxTimeClosed=timeClose;this.delayTime=delay;this.doorIsUp=isUp;this.currentTime=delay;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var body=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var circle1;var circle2;switch(this.direction){case"left":case"right":var x=0;var y=-16;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var circle11;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}circle11=ret.zpp_inner.y==y}else{circle11=false}if(!circle11){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;circle1=new nape_shape_Circle(10,ret);var x1=0;var y1=16;var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x1;ret3.y=y1;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var circle21;var _this3=ret2.zpp_inner;if(_this3._validate!=null){_this3._validate()}if(ret2.zpp_inner.x==x1){var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}circle21=ret2.zpp_inner.y==y1}else{circle21=false}if(!circle21){ret2.zpp_inner.x=x1;ret2.zpp_inner.y=y1;var _this5=ret2.zpp_inner;if(_this5._invalidate!=null){_this5._invalidate(_this5)}}}ret2.zpp_inner.weak=true;circle2=new nape_shape_Circle(10,ret2);this.animSheet=project_game_util_GameTiles.OBJECT_TIMED_DOOR_V;break;default:var x2=-16;var y2=0;var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x2;ret5.y=y2;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var circle12;var _this6=ret4.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(ret4.zpp_inner.x==x2){var _this7=ret4.zpp_inner;if(_this7._validate!=null){_this7._validate()}circle12=ret4.zpp_inner.y==y2}else{circle12=false}if(!circle12){ret4.zpp_inner.x=x2;ret4.zpp_inner.y=y2;var _this8=ret4.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}}ret4.zpp_inner.weak=true;circle1=new nape_shape_Circle(10,ret4);var x3=16;var y3=0;var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x3;ret7.y=y3;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var circle22;var _this9=ret6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(ret6.zpp_inner.x==x3){var _this10=ret6.zpp_inner;if(_this10._validate!=null){_this10._validate()}circle22=ret6.zpp_inner.y==y3}else{circle22=false}if(!circle22){ret6.zpp_inner.x=x3;ret6.zpp_inner.y=y3;var _this11=ret6.zpp_inner;if(_this11._invalidate!=null){_this11._invalidate(_this11)}}}ret6.zpp_inner.weak=true;circle2=new nape_shape_Circle(10,ret6);this.animSheet=project_game_util_GameTiles.OBJECT_TIMED_DOOR_H}circle1.zpp_inner.immutable_midstep("Shape::body");if((circle1.zpp_inner.body!=null?circle1.zpp_inner.body.outer:null)!=body){if(circle1.zpp_inner.body!=null){(circle1.zpp_inner.body!=null?circle1.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(circle1)}if(body!=null){var _this12=body.zpp_inner.wrap_shapes;if(_this12.zpp_inner.reverse_flag){_this12.push(circle1)}else{_this12.unshift(circle1)}}}circle2.zpp_inner.immutable_midstep("Shape::body");if((circle2.zpp_inner.body!=null?circle2.zpp_inner.body.outer:null)!=body){if(circle2.zpp_inner.body!=null){(circle2.zpp_inner.body!=null?circle2.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(circle2)}if(body!=null){var _this13=body.zpp_inner.wrap_shapes;if(_this13.zpp_inner.reverse_flag){_this13.push(circle2)}else{_this13.unshift(circle2)}}}body.zpp_inner.immutable_midstep("Body::"+"false");if(!body.zpp_inner.norotate!=false){body.zpp_inner.norotate=true;body.zpp_inner.invalidate_inertia()}if(body.zpp_inner.wrap_pos==null){body.zpp_inner.setupPosition()}var _this14=body.zpp_inner.wrap_pos;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this14.zpp_inner.x!=1200){_this14.zpp_inner.x=1200;var _this16=_this14.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(body.zpp_inner.wrap_pos==null){body.zpp_inner.setupPosition()}var _this18=body.zpp_inner.wrap_pos;var _this19=_this18.zpp_inner;if(_this19._validate!=null){_this19._validate()}if(_this18.zpp_inner.y!=700){_this18.zpp_inner.y=700;var _this20=_this18.zpp_inner;if(_this20._invalidate!=null){_this20._invalidate(_this20)}}var _this21=_this18.zpp_inner;if(_this21._validate!=null){_this21._validate()}body.zpp_inner.immutable_midstep("Body::space");if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=s){if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){body.zpp_inner.component.woken=false}if((body.zpp_inner.space==null?null:body.zpp_inner.space.outer)!=null){(body.zpp_inner.space==null?null:body.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(body)}if(s!=null){var _this22=s.zpp_inner.wrap_bodies;if(_this22.zpp_inner.reverse_flag){_this22.push(body)}else{_this22.unshift(body)}}}body.zpp_inner.immutable_midstep("Body::mass");body.zpp_inner.massMode=1;body.zpp_inner.cmass=.001;body.zpp_inner.invalidate_mass();body.zpp_inner.validate_mass();project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,body,false);this.doorImg=new engine_mapsheet_AnimatedTile;this.doorImg.set_tileset(this.animSheet);this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("0",[0],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("1",[1],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("2",[2],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("3",[3],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("4",[4],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("5",[5],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("getDown",[5,4,3,2,1,0],false,20));this.doorImg.addBehavior(new engine_mapsheet_data_Behavior("getUp",[0,1,2,3,4,5],false,20));if(this.doorIsUp){this.doorImg.showBehavior("5")}else{this.doorImg.showBehavior("0")}this.doorImg.update(1);this.doorImg.set_x(-32);this.doorImg.set_y(-48);this.addTile(this.doorImg);if(body.zpp_inner_i.userData==null){body.zpp_inner_i.userData={}}body.zpp_inner_i.userData.object=this;this.baseGroup=body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper().zpp_inner.collisionGroup};$hxClasses["project.game.objects.TimedDoor"]=project_game_objects_TimedDoor;project_game_objects_TimedDoor.__name__="project.game.objects.TimedDoor";project_game_objects_TimedDoor.__super__=project_entities_PhysicalTile;project_game_objects_TimedDoor.prototype=$extend(project_entities_PhysicalTile.prototype,{timedDoorCbType:null,timedDoorListener:null,direction:null,animSheet:null,doorImg:null,doorIsUp:null,maxTimeOpened:null,maxTimeClosed:null,currentTime:null,delayTime:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.data.sortCriteria=this.get_y();var _this10=this.body;if(_this10.zpp_inner_i.wrap_cbTypes==null){_this10.zpp_inner_i.setupcbTypes()}var _this11=_this10.zpp_inner_i.wrap_cbTypes;var obj=this.timedDoorCbType;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.timedDoorListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.timedDoorCbType,$bind(this,this.bodyOnStart));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.timedDoorListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}},bodyOnStart:function(collision){if(collision.zpp_inner.int1.outer_i.zpp_inner_i.ibody!=null){var _this=collision.zpp_inner.int1.outer_i;var body=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(body!=null){var tmp=zpp_$nape_phys_ZPP_$Body.types[body.zpp_inner.type];if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(tmp==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=100.1;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp1;var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}if(ret.zpp_inner.x==100.1){var _this2=ret.zpp_inner;if(_this2._validate!=null){_this2._validate()}tmp1=ret.zpp_inner.y==y}else{tmp1=false}if(!tmp1){ret.zpp_inner.x=100.1;ret.zpp_inner.y=y;var _this3=ret.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}}ret.zpp_inner.weak=true;body.applyImpulse(ret)}}}},baseGroup:null,update:function(dt){var _gthis=this;project_entities_PhysicalTile.prototype.update.call(this,dt);this.currentTime+=dt/1e3;if(this.doorIsUp){if(this.currentTime>this.maxTimeOpened){this.doorImg.showBehavior("getDown");engine_soundlib_SoundList.FX(31,0,false);engine_tweens_Actuator.timer(.35).onComplete(function(){_gthis.doorIsUp=false});this.currentTime-=this.maxTimeOpened;var _this=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this.zpp_inner.collisionGroup!=0){_this.zpp_inner.collisionGroup=0;_this.zpp_inner.invalidate()}var _this1=this.body.zpp_inner.wrap_shapes.at(1).zpp_inner.filter.wrapper();if(_this1.zpp_inner.collisionGroup!=0){_this1.zpp_inner.collisionGroup=0;_this1.zpp_inner.invalidate()}this.data.sortCriteria=-Infinity}}else if(this.currentTime>this.maxTimeClosed){this.doorImg.showBehavior("getUp");engine_soundlib_SoundList.FX(32,0,false);this.currentTime-=this.maxTimeClosed;this.doorIsUp=true;var _this2=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();var collisionGroup=this.baseGroup;if(_this2.zpp_inner.collisionGroup!=collisionGroup){_this2.zpp_inner.collisionGroup=collisionGroup;_this2.zpp_inner.invalidate()}var _this3=this.body.zpp_inner.wrap_shapes.at(1).zpp_inner.filter.wrapper();var collisionGroup1=this.baseGroup;if(_this3.zpp_inner.collisionGroup!=collisionGroup1){_this3.zpp_inner.collisionGroup=collisionGroup1;_this3.zpp_inner.invalidate()}this.data.sortCriteria=this.get_y()}this.doorImg.update(dt)},__class__:project_game_objects_TimedDoor});var project_game_objects_WallBouncer=function(s,dir,size){if(size==null){size=2}this.push=20;this.direction="left";this.bouncerCbType=new nape_callbacks_CbType;this.direction=dir;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var bouncerBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);var rect=[];this.bouncerSize=size;if(size==2){switch(this.direction){case"down":rect=nape_shape_Polygon.rect(-20,16,54*size,20);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_TOP;this.animSheet.slice(1,2);break;case"left":rect=nape_shape_Polygon.rect(-40,-58*(size-1)+128-32,8,56*size);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_RIGHT;this.animSheet.slice(2,1);break;case"up":rect=nape_shape_Polygon.rect(-148,8,54*size,20);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_BOTTOM;this.animSheet.slice(1,2);break;default:rect=nape_shape_Polygon.rect(-32,-58*(size-1)-32,8,56*size);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_LEFT;this.animSheet.slice(2,1)}}else{switch(this.direction){case"down":rect=nape_shape_Polygon.rect(-24,16,58*size,20);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_TOP;break;case"left":rect=nape_shape_Polygon.rect(-40,-58*(size-1)+128+64-32,8,56*size);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_RIGHT;break;case"up":rect=nape_shape_Polygon.rect(-216,8,58*size,20);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_BOTTOM;break;default:rect=nape_shape_Polygon.rect(-32,-58*(size-1)-32,8,56*size);this.animSheet=project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_LEFT}}var bouncerShape=new nape_shape_Polygon(rect);bouncerShape.zpp_inner.immutable_midstep("Shape::body");if((bouncerShape.zpp_inner.body!=null?bouncerShape.zpp_inner.body.outer:null)!=bouncerBody){if(bouncerShape.zpp_inner.body!=null){(bouncerShape.zpp_inner.body!=null?bouncerShape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(bouncerShape)}if(bouncerBody!=null){var _this=bouncerBody.zpp_inner.wrap_shapes;if(_this.zpp_inner.reverse_flag){_this.push(bouncerShape)}else{_this.unshift(bouncerShape)}}}bouncerBody.zpp_inner.immutable_midstep("Body::space");if((bouncerBody.zpp_inner.space==null?null:bouncerBody.zpp_inner.space.outer)!=s){if((bouncerBody.zpp_inner.space==null?null:bouncerBody.zpp_inner.space.outer)!=null){bouncerBody.zpp_inner.component.woken=false}if((bouncerBody.zpp_inner.space==null?null:bouncerBody.zpp_inner.space.outer)!=null){(bouncerBody.zpp_inner.space==null?null:bouncerBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(bouncerBody)}if(s!=null){var _this1=s.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(bouncerBody)}else{_this1.unshift(bouncerBody)}}}var mat=nape_phys_Material.steel();if(0!=mat.zpp_inner.staticFriction){mat.zpp_inner.staticFriction=0;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}if(0!=mat.zpp_inner.dynamicFriction){mat.zpp_inner.dynamicFriction=0;mat.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}bouncerBody.setShapeMaterials(mat);project_entities_PhysicalTile.call(this,0,0,0,1,1,0,0,0,bouncerBody,false);if(bouncerBody.zpp_inner_i.wrap_cbTypes==null){bouncerBody.zpp_inner_i.setupcbTypes()}var _this2=bouncerBody.zpp_inner_i.wrap_cbTypes;var obj=this.bouncerCbType;if(_this2.zpp_inner.reverse_flag){_this2.push(obj)}else{_this2.unshift(obj)}this.bouncerImg=new engine_mapsheet_AnimatedTile;this.bouncerImg.set_tileset(this.animSheet);this.bouncerImg.addBehavior(new engine_mapsheet_data_Behavior("0",[0],false,10));this.bouncerImg.addBehavior(new engine_mapsheet_data_Behavior("bounce",[1,1,0,0,1,1,0,0,1,1,0],false,30));this.bouncerImg.showBehavior("0");switch(this.direction){case"down":this.bouncerImg.set_x(size==2?-32:-32);this.bouncerImg.set_y(-32);break;case"left":this.bouncerImg.set_x(-96);this.bouncerImg.set_y(size==2?32:32);break;case"up":this.bouncerImg.set_x(size==2?-157:-224);this.bouncerImg.set_y(-36);break;default:this.bouncerImg.set_x(-32);this.bouncerImg.set_y(size==2?-96:-160)}this.addTile(this.bouncerImg);var _this3=this.body;if(_this3.zpp_inner_i.userData==null){_this3.zpp_inner_i.userData={}}_this3.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.WallBouncer"]=project_game_objects_WallBouncer;project_game_objects_WallBouncer.__name__="project.game.objects.WallBouncer";project_game_objects_WallBouncer.__super__=project_entities_PhysicalTile;project_game_objects_WallBouncer.prototype=$extend(project_entities_PhysicalTile.prototype,{bouncerCbType:null,enterListener:null,direction:null,animSheet:null,bouncerImg:null,bouncerSize:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.enterListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_COLLISION,zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY,this.bouncerCbType,$bind(this,this.bodyOnEnter));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.enterListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}switch(this.direction){case"left":case"right":this.data.sortCriteria=-Infinity;break;default:this.data.sortCriteria=this.get_y()-this.bouncerImg.get_y()}},update:function(dt){project_entities_PhysicalTile.prototype.update.call(this,dt);this.bouncerImg.update(dt)},push:null,bodyOnEnter:function(collision){this.bodyEnterInitialTest(collision)},bodyEnterInitialTest:function(collision){if(collision.zpp_inner.int1.outer_i.zpp_inner_i.ibody!=null){var _this=collision.zpp_inner.int1.outer_i;var body=_this.zpp_inner_i.ibody!=null?_this.zpp_inner_i.ibody.outer:null;if(body!=null){var tmp=zpp_$nape_phys_ZPP_$Body.types[body.zpp_inner.type];if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(tmp==zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this1=body.zpp_inner.wrap_vel;var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}var tmp1=_this1.zpp_inner.x;var _this3=_this1.zpp_inner;if(_this3._validate!=null){_this3._validate()}var tmp2=tmp1*_this1.zpp_inner.x;var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var tmp3=_this1.zpp_inner.y;var _this5=_this1.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(Math.sqrt(tmp2+tmp3*_this1.zpp_inner.y)>0){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var n=body.zpp_inner.wrap_vel.unit();switch(this.direction){case"down":var _this6=n.zpp_inner;if(_this6._validate!=null){_this6._validate()}if(n.zpp_inner.y<=.1){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this7=body.zpp_inner.wrap_vel;var y=this.push;var _this8=_this7.zpp_inner;if(_this8._validate!=null){_this8._validate()}if(_this7.zpp_inner.y!=y){_this7.zpp_inner.y=y;var _this9=_this7.zpp_inner;if(_this9._invalidate!=null){_this9._invalidate(_this9)}}var _this10=_this7.zpp_inner;if(_this10._validate!=null){_this10._validate()}}var tmp4;var _this11=n.zpp_inner;if(_this11._validate!=null){_this11._validate()}if(n.zpp_inner.x<.1){var _this12=n.zpp_inner;if(_this12._validate!=null){_this12._validate()}tmp4=n.zpp_inner.x>-.1}else{tmp4=false}if(tmp4){var _this13=n.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(n.zpp_inner.x<=0){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this14=body.zpp_inner.wrap_vel;var x=-this.push;var _this15=_this14.zpp_inner;if(_this15._validate!=null){_this15._validate()}if(_this14.zpp_inner.x!=x){_this14.zpp_inner.x=x;var _this16=_this14.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}var _this17=_this14.zpp_inner;if(_this17._validate!=null){_this17._validate()}}else{if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this18=body.zpp_inner.wrap_vel;var x1=this.push;var _this19=_this18.zpp_inner;if(_this19._validate!=null){_this19._validate()}if(_this18.zpp_inner.x!=x1){_this18.zpp_inner.x=x1;var _this20=_this18.zpp_inner;if(_this20._invalidate!=null){_this20._invalidate(_this20)}}var _this21=_this18.zpp_inner;if(_this21._validate!=null){_this21._validate()}}}break;case"left":var _this22=n.zpp_inner;if(_this22._validate!=null){_this22._validate()}if(n.zpp_inner.x>=-.1){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this23=body.zpp_inner.wrap_vel;var x2=-this.push;var _this24=_this23.zpp_inner;if(_this24._validate!=null){_this24._validate()}if(_this23.zpp_inner.x!=x2){_this23.zpp_inner.x=x2;var _this25=_this23.zpp_inner;if(_this25._invalidate!=null){_this25._invalidate(_this25)}}var _this26=_this23.zpp_inner;if(_this26._validate!=null){_this26._validate()}}var tmp5;var _this27=n.zpp_inner;if(_this27._validate!=null){_this27._validate()}if(n.zpp_inner.y<.1){var _this28=n.zpp_inner;if(_this28._validate!=null){_this28._validate()}tmp5=n.zpp_inner.y>-.1}else{tmp5=false}if(tmp5){var _this29=n.zpp_inner;if(_this29._validate!=null){_this29._validate()}if(n.zpp_inner.y<=0){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this30=body.zpp_inner.wrap_vel;var y1=-this.push;var _this31=_this30.zpp_inner;if(_this31._validate!=null){_this31._validate()}if(_this30.zpp_inner.y!=y1){_this30.zpp_inner.y=y1;var _this32=_this30.zpp_inner;if(_this32._invalidate!=null){_this32._invalidate(_this32)}}var _this33=_this30.zpp_inner;if(_this33._validate!=null){_this33._validate()}}else{if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this34=body.zpp_inner.wrap_vel;var y2=this.push;var _this35=_this34.zpp_inner;if(_this35._validate!=null){_this35._validate()}if(_this34.zpp_inner.y!=y2){_this34.zpp_inner.y=y2;var _this36=_this34.zpp_inner;if(_this36._invalidate!=null){_this36._invalidate(_this36)}}var _this37=_this34.zpp_inner;if(_this37._validate!=null){_this37._validate()}}}break;case"right":var _this38=n.zpp_inner;if(_this38._validate!=null){_this38._validate()}if(n.zpp_inner.x<=.1){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this39=body.zpp_inner.wrap_vel;var x3=this.push;var _this40=_this39.zpp_inner;if(_this40._validate!=null){_this40._validate()}if(_this39.zpp_inner.x!=x3){_this39.zpp_inner.x=x3;var _this41=_this39.zpp_inner;if(_this41._invalidate!=null){_this41._invalidate(_this41)}}var _this42=_this39.zpp_inner;if(_this42._validate!=null){_this42._validate()}}var tmp6;var _this43=n.zpp_inner;if(_this43._validate!=null){_this43._validate()}if(n.zpp_inner.y<.1){var _this44=n.zpp_inner;if(_this44._validate!=null){_this44._validate()}tmp6=n.zpp_inner.y>-.1}else{tmp6=false}if(tmp6){var _this45=n.zpp_inner;if(_this45._validate!=null){_this45._validate()}if(n.zpp_inner.y<=0){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this46=body.zpp_inner.wrap_vel;var y3=-this.push;var _this47=_this46.zpp_inner;if(_this47._validate!=null){_this47._validate()}if(_this46.zpp_inner.y!=y3){_this46.zpp_inner.y=y3;var _this48=_this46.zpp_inner;if(_this48._invalidate!=null){_this48._invalidate(_this48)}}var _this49=_this46.zpp_inner;if(_this49._validate!=null){_this49._validate()}}else{if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this50=body.zpp_inner.wrap_vel;var y4=this.push;var _this51=_this50.zpp_inner;if(_this51._validate!=null){_this51._validate()}if(_this50.zpp_inner.y!=y4){_this50.zpp_inner.y=y4;var _this52=_this50.zpp_inner;if(_this52._invalidate!=null){_this52._invalidate(_this52)}}var _this53=_this50.zpp_inner;if(_this53._validate!=null){_this53._validate()}}}break;case"up":var _this54=n.zpp_inner;if(_this54._validate!=null){_this54._validate()}if(n.zpp_inner.y>=-.1){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this55=body.zpp_inner.wrap_vel;var y5=-this.push;var _this56=_this55.zpp_inner;if(_this56._validate!=null){_this56._validate()}if(_this55.zpp_inner.y!=y5){_this55.zpp_inner.y=y5;var _this57=_this55.zpp_inner;if(_this57._invalidate!=null){_this57._invalidate(_this57)}}var _this58=_this55.zpp_inner;if(_this58._validate!=null){_this58._validate()}}var tmp7;var _this59=n.zpp_inner;if(_this59._validate!=null){_this59._validate()}if(n.zpp_inner.x<.1){var _this60=n.zpp_inner;if(_this60._validate!=null){_this60._validate()}tmp7=n.zpp_inner.x>-.1}else{tmp7=false}if(tmp7){var _this61=n.zpp_inner;if(_this61._validate!=null){_this61._validate()}if(n.zpp_inner.x<=0){if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this62=body.zpp_inner.wrap_vel;var x4=-this.push;var _this63=_this62.zpp_inner;if(_this63._validate!=null){_this63._validate()}if(_this62.zpp_inner.x!=x4){_this62.zpp_inner.x=x4;var _this64=_this62.zpp_inner;if(_this64._invalidate!=null){_this64._invalidate(_this64)}}var _this65=_this62.zpp_inner;if(_this65._validate!=null){_this65._validate()}}else{if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this66=body.zpp_inner.wrap_vel;var x5=this.push;var _this67=_this66.zpp_inner;if(_this67._validate!=null){_this67._validate()}if(_this66.zpp_inner.x!=x5){_this66.zpp_inner.x=x5;var _this68=_this66.zpp_inner;if(_this68._invalidate!=null){_this68._invalidate(_this68)}}var _this69=_this66.zpp_inner;if(_this69._validate!=null){_this69._validate()}}}break}if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this70=body.zpp_inner.wrap_vel;var _this71=_this70.zpp_inner;if(_this71._validate!=null){_this71._validate()}var v=_this70.zpp_inner.x;var _this72=_this70.zpp_inner;if(_this72._validate!=null){_this72._validate()}var v1=v*_this70.zpp_inner.x;var _this73=_this70.zpp_inner;if(_this73._validate!=null){_this73._validate()}var v2=_this70.zpp_inner.y;var _this74=_this70.zpp_inner;if(_this74._validate!=null){_this74._validate()}var force=Math.sqrt(v1+v2*_this70.zpp_inner.y)*10;if(force>1e3){force=1e3}if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var velocity=body.zpp_inner.wrap_vel.normalise().mul(force);if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}var _this75=body.zpp_inner.wrap_vel;var _this76=velocity.zpp_inner;if(_this76._validate!=null){_this76._validate()}var x6=velocity.zpp_inner.x;var _this77=velocity.zpp_inner;if(_this77._validate!=null){_this77._validate()}var y6=velocity.zpp_inner.y;var tmp8;var _this78=_this75.zpp_inner;if(_this78._validate!=null){_this78._validate()}if(_this75.zpp_inner.x==x6){var _this79=_this75.zpp_inner;if(_this79._validate!=null){_this79._validate()}tmp8=_this75.zpp_inner.y==y6}else{tmp8=false}if(!tmp8){_this75.zpp_inner.x=x6;_this75.zpp_inner.y=y6;var _this80=_this75.zpp_inner;if(_this80._invalidate!=null){_this80._invalidate(_this80)}}if(velocity.zpp_inner.weak){var inner=velocity.zpp_inner;velocity.zpp_inner.outer=null;velocity.zpp_inner=null;velocity.zpp_pool=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=velocity;if(inner.outer!=null){inner.outer.zpp_inner=null;inner.outer=null}inner._isimmutable=null;inner._validate=null;inner._invalidate=null;inner.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=inner}if(body.zpp_inner.wrap_vel==null){body.zpp_inner.setupVelocity()}this.bounceAnim()}}}}},bounceAnim:function(){this.bouncerImg.showBehavior("bounce");if(this.bouncerSize==2){engine_soundlib_SoundList.FX(19,0,false)}else{engine_soundlib_SoundList.FX(19,0,false)}},checkVisibility:function(s){this.set_visible(s.get_x()/s.get_scaleX()+this.get_x()+64*this.bouncerSize>0&&s.get_x()/s.get_scaleX()+this.get_x()-64*this.bouncerSize<800&&s.get_y()/s.get_scaleX()+this.get_y()+64*this.bouncerSize+64>0&&s.get_y()/s.get_scaleX()+this.get_y()-64*this.bouncerSize<600)},__class__:project_game_objects_WallBouncer});var project_game_objects_WallTile=function(id,x,y,wallType,s,tilesetSource){if(tilesetSource==null){tilesetSource=""}if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var b=zpp_$nape_util_ZPP_$Flags.BodyType_STATIC;var x1=x;var y1=y;if(y==null){y1=0}if(x==null){x1=0}var x2=x1;var y2=y1;if(y2==null){y2=0}if(x2==null){x2=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x2;ret1.y=y2;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var b1;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x2){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}b1=ret.zpp_inner.y==y2}else{b1=false}if(!b1){ret.zpp_inner.x=x2;ret.zpp_inner.y=y2;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=true;var b2=new nape_phys_Body(b,ret);switch(id){case 16:var _this3=b2.zpp_inner.wrap_shapes;var x3=-32;var y3=-32;var ret2;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret2=new nape_geom_Vec2}else{ret2=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret2.zpp_pool;ret2.zpp_pool=null}if(ret2.zpp_inner==null){var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=x3;ret3.y=y3;ret2.zpp_inner=ret3;ret2.zpp_inner.outer=ret2}else{var obj;var _this4=ret2.zpp_inner;if(_this4._validate!=null){_this4._validate()}if(ret2.zpp_inner.x==x3){var _this5=ret2.zpp_inner;if(_this5._validate!=null){_this5._validate()}obj=ret2.zpp_inner.y==y3}else{obj=false}if(!obj){ret2.zpp_inner.x=x3;ret2.zpp_inner.y=y3;var _this6=ret2.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}}ret2.zpp_inner.weak=true;var x4=32;var y4=-32;var ret4;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret4=new nape_geom_Vec2}else{ret4=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret4.zpp_pool;ret4.zpp_pool=null}if(ret4.zpp_inner==null){var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=x4;ret5.y=y4;ret4.zpp_inner=ret5;ret4.zpp_inner.outer=ret4}else{var obj1;var _this7=ret4.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(ret4.zpp_inner.x==x4){var _this8=ret4.zpp_inner;if(_this8._validate!=null){_this8._validate()}obj1=ret4.zpp_inner.y==y4}else{obj1=false}if(!obj1){ret4.zpp_inner.x=x4;ret4.zpp_inner.y=y4;var _this9=ret4.zpp_inner;if(_this9._invalidate!=null){_this9._invalidate(_this9)}}}ret4.zpp_inner.weak=true;var x5=32;var y5=32;var ret6;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret6=new nape_geom_Vec2}else{ret6=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret6.zpp_pool;ret6.zpp_pool=null}if(ret6.zpp_inner==null){var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=x5;ret7.y=y5;ret6.zpp_inner=ret7;ret6.zpp_inner.outer=ret6}else{var obj2;var _this10=ret6.zpp_inner;if(_this10._validate!=null){_this10._validate()}if(ret6.zpp_inner.x==x5){var _this11=ret6.zpp_inner;if(_this11._validate!=null){_this11._validate()}obj2=ret6.zpp_inner.y==y5}else{obj2=false}if(!obj2){ret6.zpp_inner.x=x5;ret6.zpp_inner.y=y5;var _this12=ret6.zpp_inner;if(_this12._invalidate!=null){_this12._invalidate(_this12)}}}ret6.zpp_inner.weak=true;var obj3=new nape_shape_Polygon([ret2,ret4,ret6]);if(_this3.zpp_inner.reverse_flag){_this3.push(obj3)}else{_this3.unshift(obj3)}break;case 17:var _this13=b2.zpp_inner.wrap_shapes;var x6=-32;var y6=-32;var ret8;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret8=new nape_geom_Vec2}else{ret8=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret8.zpp_pool;ret8.zpp_pool=null}if(ret8.zpp_inner==null){var ret9;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret9=new zpp_$nape_geom_ZPP_$Vec2}else{ret9=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret9.next;ret9.next=null}ret9.weak=false;ret9._immutable=false;ret9.x=x6;ret9.y=y6;ret8.zpp_inner=ret9;ret8.zpp_inner.outer=ret8}else{var obj4;var _this14=ret8.zpp_inner;if(_this14._validate!=null){_this14._validate()}if(ret8.zpp_inner.x==x6){var _this15=ret8.zpp_inner;if(_this15._validate!=null){_this15._validate()}obj4=ret8.zpp_inner.y==y6}else{obj4=false}if(!obj4){ret8.zpp_inner.x=x6;ret8.zpp_inner.y=y6;var _this16=ret8.zpp_inner;if(_this16._invalidate!=null){_this16._invalidate(_this16)}}}ret8.zpp_inner.weak=true;var x7=32;var y7=-32;var ret10;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret10=new nape_geom_Vec2}else{ret10=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret10.zpp_pool;ret10.zpp_pool=null}if(ret10.zpp_inner==null){var ret11;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret11=new zpp_$nape_geom_ZPP_$Vec2}else{ret11=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret11.next;ret11.next=null}ret11.weak=false;ret11._immutable=false;ret11.x=x7;ret11.y=y7;ret10.zpp_inner=ret11;ret10.zpp_inner.outer=ret10}else{var obj5;var _this17=ret10.zpp_inner;if(_this17._validate!=null){_this17._validate()}if(ret10.zpp_inner.x==x7){var _this18=ret10.zpp_inner;if(_this18._validate!=null){_this18._validate()}obj5=ret10.zpp_inner.y==y7}else{obj5=false}if(!obj5){ret10.zpp_inner.x=x7;ret10.zpp_inner.y=y7;var _this19=ret10.zpp_inner;if(_this19._invalidate!=null){_this19._invalidate(_this19)}}}ret10.zpp_inner.weak=true;var x8=-32;var y8=32;var ret12;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret12=new nape_geom_Vec2}else{ret12=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret12.zpp_pool;ret12.zpp_pool=null}if(ret12.zpp_inner==null){var ret13;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret13=new zpp_$nape_geom_ZPP_$Vec2}else{ret13=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret13.next;ret13.next=null}ret13.weak=false;ret13._immutable=false;ret13.x=x8;ret13.y=y8;ret12.zpp_inner=ret13;ret12.zpp_inner.outer=ret12}else{var obj6;var _this20=ret12.zpp_inner;if(_this20._validate!=null){_this20._validate()}if(ret12.zpp_inner.x==x8){var _this21=ret12.zpp_inner;if(_this21._validate!=null){_this21._validate()}obj6=ret12.zpp_inner.y==y8}else{obj6=false}if(!obj6){ret12.zpp_inner.x=x8;ret12.zpp_inner.y=y8;var _this22=ret12.zpp_inner;if(_this22._invalidate!=null){_this22._invalidate(_this22)}}}ret12.zpp_inner.weak=true;var obj7=new nape_shape_Polygon([ret8,ret10,ret12]);if(_this13.zpp_inner.reverse_flag){_this13.push(obj7)}else{_this13.unshift(obj7)}break;case 18:var _this23=b2.zpp_inner.wrap_shapes;var x9=-32;var y9=-32;var ret14;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret14=new nape_geom_Vec2}else{ret14=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret14.zpp_pool;ret14.zpp_pool=null}if(ret14.zpp_inner==null){var ret15;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret15=new zpp_$nape_geom_ZPP_$Vec2}else{ret15=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret15.next;ret15.next=null}ret15.weak=false;ret15._immutable=false;ret15.x=x9;ret15.y=y9;ret14.zpp_inner=ret15;ret14.zpp_inner.outer=ret14}else{var obj8;var _this24=ret14.zpp_inner;if(_this24._validate!=null){_this24._validate()}if(ret14.zpp_inner.x==x9){var _this25=ret14.zpp_inner;if(_this25._validate!=null){_this25._validate()}obj8=ret14.zpp_inner.y==y9}else{obj8=false}if(!obj8){ret14.zpp_inner.x=x9;ret14.zpp_inner.y=y9;var _this26=ret14.zpp_inner;if(_this26._invalidate!=null){_this26._invalidate(_this26)}}}ret14.zpp_inner.weak=true;var x10=32;var y10=-32;var ret16;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret16=new nape_geom_Vec2}else{ret16=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret16.zpp_pool;ret16.zpp_pool=null}if(ret16.zpp_inner==null){var ret17;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret17=new zpp_$nape_geom_ZPP_$Vec2}else{ret17=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret17.next;ret17.next=null}ret17.weak=false;ret17._immutable=false;ret17.x=x10;ret17.y=y10;ret16.zpp_inner=ret17;ret16.zpp_inner.outer=ret16}else{var obj9;var _this27=ret16.zpp_inner;if(_this27._validate!=null){_this27._validate()}if(ret16.zpp_inner.x==x10){var _this28=ret16.zpp_inner;if(_this28._validate!=null){_this28._validate()}obj9=ret16.zpp_inner.y==y10}else{obj9=false}if(!obj9){ret16.zpp_inner.x=x10;ret16.zpp_inner.y=y10;var _this29=ret16.zpp_inner;if(_this29._invalidate!=null){_this29._invalidate(_this29)}}}ret16.zpp_inner.weak=true;var x11=32;var y11=32;var ret18;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret18=new nape_geom_Vec2}else{ret18=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret18.zpp_pool;ret18.zpp_pool=null}if(ret18.zpp_inner==null){var ret19;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret19=new zpp_$nape_geom_ZPP_$Vec2}else{ret19=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret19.next;ret19.next=null}ret19.weak=false;ret19._immutable=false;ret19.x=x11;ret19.y=y11;ret18.zpp_inner=ret19;ret18.zpp_inner.outer=ret18}else{var obj10;var _this30=ret18.zpp_inner;if(_this30._validate!=null){_this30._validate()}if(ret18.zpp_inner.x==x11){var _this31=ret18.zpp_inner;if(_this31._validate!=null){_this31._validate()}obj10=ret18.zpp_inner.y==y11}else{obj10=false}if(!obj10){ret18.zpp_inner.x=x11;ret18.zpp_inner.y=y11;var _this32=ret18.zpp_inner;if(_this32._invalidate!=null){_this32._invalidate(_this32)}}}ret18.zpp_inner.weak=true;var obj11=new nape_shape_Polygon([ret14,ret16,ret18]);if(_this23.zpp_inner.reverse_flag){_this23.push(obj11)}else{_this23.unshift(obj11)}break;case 19:var _this33=b2.zpp_inner.wrap_shapes;var x12=-32;var y12=-32;var ret20;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret20=new nape_geom_Vec2}else{ret20=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret20.zpp_pool;ret20.zpp_pool=null}if(ret20.zpp_inner==null){var ret21;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret21=new zpp_$nape_geom_ZPP_$Vec2}else{ret21=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret21.next;ret21.next=null}ret21.weak=false;ret21._immutable=false;ret21.x=x12;ret21.y=y12;ret20.zpp_inner=ret21;ret20.zpp_inner.outer=ret20}else{var obj12;var _this34=ret20.zpp_inner;if(_this34._validate!=null){_this34._validate()}if(ret20.zpp_inner.x==x12){var _this35=ret20.zpp_inner;if(_this35._validate!=null){_this35._validate()}obj12=ret20.zpp_inner.y==y12}else{obj12=false}if(!obj12){ret20.zpp_inner.x=x12;ret20.zpp_inner.y=y12;var _this36=ret20.zpp_inner;if(_this36._invalidate!=null){_this36._invalidate(_this36)}}}ret20.zpp_inner.weak=true;var x13=32;var y13=-32;var ret22;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret22=new nape_geom_Vec2}else{ret22=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret22.zpp_pool;ret22.zpp_pool=null}if(ret22.zpp_inner==null){var ret23;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret23=new zpp_$nape_geom_ZPP_$Vec2}else{ret23=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret23.next;ret23.next=null}ret23.weak=false;ret23._immutable=false;ret23.x=x13;ret23.y=y13;ret22.zpp_inner=ret23;ret22.zpp_inner.outer=ret22}else{var obj13;var _this37=ret22.zpp_inner;if(_this37._validate!=null){_this37._validate()}if(ret22.zpp_inner.x==x13){var _this38=ret22.zpp_inner;if(_this38._validate!=null){_this38._validate()}obj13=ret22.zpp_inner.y==y13}else{obj13=false}if(!obj13){ret22.zpp_inner.x=x13;ret22.zpp_inner.y=y13;var _this39=ret22.zpp_inner;if(_this39._invalidate!=null){_this39._invalidate(_this39)}}}ret22.zpp_inner.weak=true;var x14=-32;var y14=32;var ret24;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret24=new nape_geom_Vec2}else{ret24=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret24.zpp_pool;ret24.zpp_pool=null}if(ret24.zpp_inner==null){var ret25;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret25=new zpp_$nape_geom_ZPP_$Vec2}else{ret25=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret25.next;ret25.next=null}ret25.weak=false;ret25._immutable=false;ret25.x=x14;ret25.y=y14;ret24.zpp_inner=ret25;ret24.zpp_inner.outer=ret24}else{var obj14;var _this40=ret24.zpp_inner;if(_this40._validate!=null){_this40._validate()}if(ret24.zpp_inner.x==x14){var _this41=ret24.zpp_inner;if(_this41._validate!=null){_this41._validate()}obj14=ret24.zpp_inner.y==y14}else{obj14=false}if(!obj14){ret24.zpp_inner.x=x14;ret24.zpp_inner.y=y14;var _this42=ret24.zpp_inner;if(_this42._invalidate!=null){_this42._invalidate(_this42)}}}ret24.zpp_inner.weak=true;var obj15=new nape_shape_Polygon([ret20,ret22,ret24]);if(_this33.zpp_inner.reverse_flag){_this33.push(obj15)}else{_this33.unshift(obj15)}break;case 20:var _this43=b2.zpp_inner.wrap_shapes;var x15=32;var y15=-32;var ret26;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret26=new nape_geom_Vec2}else{ret26=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret26.zpp_pool;ret26.zpp_pool=null}if(ret26.zpp_inner==null){var ret27;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret27=new zpp_$nape_geom_ZPP_$Vec2}else{ret27=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret27.next;ret27.next=null}ret27.weak=false;ret27._immutable=false;ret27.x=x15;ret27.y=y15;ret26.zpp_inner=ret27;ret26.zpp_inner.outer=ret26}else{var obj16;var _this44=ret26.zpp_inner;if(_this44._validate!=null){_this44._validate()}if(ret26.zpp_inner.x==x15){var _this45=ret26.zpp_inner;if(_this45._validate!=null){_this45._validate()}obj16=ret26.zpp_inner.y==y15}else{obj16=false}if(!obj16){ret26.zpp_inner.x=x15;ret26.zpp_inner.y=y15;var _this46=ret26.zpp_inner;if(_this46._invalidate!=null){_this46._invalidate(_this46)}}}ret26.zpp_inner.weak=true;var x16=32;var y16=32;var ret28;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret28=new nape_geom_Vec2}else{ret28=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret28.zpp_pool;ret28.zpp_pool=null}if(ret28.zpp_inner==null){var ret29;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret29=new zpp_$nape_geom_ZPP_$Vec2}else{ret29=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret29.next;ret29.next=null}ret29.weak=false;ret29._immutable=false;ret29.x=x16;ret29.y=y16;ret28.zpp_inner=ret29;ret28.zpp_inner.outer=ret28}else{var obj17;var _this47=ret28.zpp_inner;if(_this47._validate!=null){_this47._validate()}if(ret28.zpp_inner.x==x16){var _this48=ret28.zpp_inner;if(_this48._validate!=null){_this48._validate()}obj17=ret28.zpp_inner.y==y16}else{obj17=false}if(!obj17){ret28.zpp_inner.x=x16;ret28.zpp_inner.y=y16;var _this49=ret28.zpp_inner;if(_this49._invalidate!=null){_this49._invalidate(_this49)}}}ret28.zpp_inner.weak=true;var x17=-32;var y17=32;var ret30;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret30=new nape_geom_Vec2}else{ret30=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret30.zpp_pool;ret30.zpp_pool=null}if(ret30.zpp_inner==null){var ret31;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret31=new zpp_$nape_geom_ZPP_$Vec2}else{ret31=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret31.next;ret31.next=null}ret31.weak=false;ret31._immutable=false;ret31.x=x17;ret31.y=y17;ret30.zpp_inner=ret31;ret30.zpp_inner.outer=ret30}else{var obj18;var _this50=ret30.zpp_inner;if(_this50._validate!=null){_this50._validate()}if(ret30.zpp_inner.x==x17){var _this51=ret30.zpp_inner;if(_this51._validate!=null){_this51._validate()}obj18=ret30.zpp_inner.y==y17}else{obj18=false}if(!obj18){ret30.zpp_inner.x=x17;ret30.zpp_inner.y=y17;var _this52=ret30.zpp_inner;if(_this52._invalidate!=null){_this52._invalidate(_this52)}}}ret30.zpp_inner.weak=true;var obj19=new nape_shape_Polygon([ret26,ret28,ret30]);if(_this43.zpp_inner.reverse_flag){_this43.push(obj19)}else{_this43.unshift(obj19)}break;case 21:var _this53=b2.zpp_inner.wrap_shapes;var x18=-32;var y18=-32;var ret32;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret32=new nape_geom_Vec2}else{ret32=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret32.zpp_pool;ret32.zpp_pool=null}if(ret32.zpp_inner==null){var ret33;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret33=new zpp_$nape_geom_ZPP_$Vec2}else{ret33=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret33.next;ret33.next=null}ret33.weak=false;ret33._immutable=false;ret33.x=x18;ret33.y=y18;ret32.zpp_inner=ret33;ret32.zpp_inner.outer=ret32}else{var obj20;var _this54=ret32.zpp_inner;if(_this54._validate!=null){_this54._validate()}if(ret32.zpp_inner.x==x18){var _this55=ret32.zpp_inner;if(_this55._validate!=null){_this55._validate()}obj20=ret32.zpp_inner.y==y18}else{obj20=false}if(!obj20){ret32.zpp_inner.x=x18;ret32.zpp_inner.y=y18;var _this56=ret32.zpp_inner;if(_this56._invalidate!=null){_this56._invalidate(_this56)}}}ret32.zpp_inner.weak=true;var x19=32;var y19=32;var ret34;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret34=new nape_geom_Vec2}else{ret34=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret34.zpp_pool;ret34.zpp_pool=null}if(ret34.zpp_inner==null){var ret35;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret35=new zpp_$nape_geom_ZPP_$Vec2}else{ret35=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret35.next;ret35.next=null}ret35.weak=false;ret35._immutable=false;ret35.x=x19;ret35.y=y19;ret34.zpp_inner=ret35;ret34.zpp_inner.outer=ret34}else{var obj21;var _this57=ret34.zpp_inner;if(_this57._validate!=null){_this57._validate()}if(ret34.zpp_inner.x==x19){var _this58=ret34.zpp_inner;if(_this58._validate!=null){_this58._validate()}obj21=ret34.zpp_inner.y==y19}else{obj21=false}if(!obj21){ret34.zpp_inner.x=x19;ret34.zpp_inner.y=y19;var _this59=ret34.zpp_inner;if(_this59._invalidate!=null){_this59._invalidate(_this59)}}}ret34.zpp_inner.weak=true;var x20=-32;var y20=32;var ret36;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret36=new nape_geom_Vec2}else{ret36=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret36.zpp_pool;ret36.zpp_pool=null}if(ret36.zpp_inner==null){var ret37;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret37=new zpp_$nape_geom_ZPP_$Vec2}else{ret37=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret37.next;ret37.next=null}ret37.weak=false;ret37._immutable=false;ret37.x=x20;ret37.y=y20;ret36.zpp_inner=ret37;ret36.zpp_inner.outer=ret36}else{var obj22;var _this60=ret36.zpp_inner;if(_this60._validate!=null){_this60._validate()}if(ret36.zpp_inner.x==x20){var _this61=ret36.zpp_inner;if(_this61._validate!=null){_this61._validate()}obj22=ret36.zpp_inner.y==y20}else{obj22=false}if(!obj22){ret36.zpp_inner.x=x20;ret36.zpp_inner.y=y20;var _this62=ret36.zpp_inner;if(_this62._invalidate!=null){_this62._invalidate(_this62)}}}ret36.zpp_inner.weak=true;var obj23=new nape_shape_Polygon([ret32,ret34,ret36]);if(_this53.zpp_inner.reverse_flag){_this53.push(obj23)}else{_this53.unshift(obj23)}break;default:var _this63=b2.zpp_inner.wrap_shapes;var obj24=new nape_shape_Polygon(nape_shape_Polygon.rect(-32,-32,64,64));if(_this63.zpp_inner.reverse_flag){_this63.push(obj24)}else{_this63.unshift(obj24)}}b2.setShapeMaterials(nape_phys_Material.steel());b2.zpp_inner.immutable_midstep("Body::space");if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=s){if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=null){b2.zpp_inner.component.woken=false}if((b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer)!=null){(b2.zpp_inner.space==null?null:b2.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(b2)}if(s!=null){var _this64=s.zpp_inner.wrap_bodies;if(_this64.zpp_inner.reverse_flag){_this64.push(b2)}else{_this64.unshift(b2)}}}project_entities_PhysicalTile.call(this,id,x,y,1,1,0,32,48,b2,false);switch(tilesetSource){case"wall02":this.set_tileset(project_game_util_GameTiles.WALL02);break;case"wall03":this.set_tileset(project_game_util_GameTiles.WALL03);break;case"wallbox":this.set_tileset(project_game_util_GameTiles.WALLBOX);break}if(tilesetSource=="wallbox"){this.data.sortCriteria=y}else{switch(id){case 16:case 18:this.data.sortCriteria=y-32;break;case 20:case 21:this.data.sortCriteria=Infinity;break;default:this.data.sortCriteria=y}}};$hxClasses["project.game.objects.WallTile"]=project_game_objects_WallTile;project_game_objects_WallTile.__name__="project.game.objects.WallTile";project_game_objects_WallTile.__super__=project_entities_PhysicalTile;project_game_objects_WallTile.prototype=$extend(project_entities_PhysicalTile.prototype,{__class__:project_game_objects_WallTile});var project_game_objects_props_Beacon=function(startingFrame){openfl_display_TileContainer.call(this,0,0,1,1,0,32,48);var bearSheet=project_game_util_GameTiles.PROP_BEACON;this.beacon=new engine_mapsheet_AnimatedTile(0,0);this.beacon.set_tileset(bearSheet);this.beacon.addBehavior(new engine_mapsheet_data_Behavior("0",[0,1,2,3,4,5],true,20));this.beacon.addBehavior(new engine_mapsheet_data_Behavior("1",[1,2,3,4,5,0],true,20));this.beacon.addBehavior(new engine_mapsheet_data_Behavior("2",[2,3,4,5,0,1],true,20));this.beacon.addBehavior(new engine_mapsheet_data_Behavior("3",[3,4,5,0,1,2],true,20));this.beacon.addBehavior(new engine_mapsheet_data_Behavior("4",[4,5,0,1,2,3],true,20));this.beacon.addBehavior(new engine_mapsheet_data_Behavior("5",[5,0,1,2,3,4],true,20));this.beacon.showBehavior(startingFrame);this.beacon.update(1);this.addTile(this.beacon)};$hxClasses["project.game.objects.props.Beacon"]=project_game_objects_props_Beacon;project_game_objects_props_Beacon.__name__="project.game.objects.props.Beacon";project_game_objects_props_Beacon.__interfaces__=[engine_updateable_IUpdateable];project_game_objects_props_Beacon.__super__=openfl_display_TileContainer;project_game_objects_props_Beacon.prototype=$extend(openfl_display_TileContainer.prototype,{beacon:null,update:function(dt){this.beacon.update(dt)},__class__:project_game_objects_props_Beacon});var project_game_objects_props_PropBox=function(s,type){this.propBoxCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var boxBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC);this.animSheet=[project_game_util_GameTiles.PROP_BOX30,project_game_util_GameTiles.PROP_BOX45,project_game_util_GameTiles.PROP_BOX90][type/4|0];var sh=new nape_shape_Circle(5);sh.zpp_inner.immutable_midstep("Shape::body");if((sh.zpp_inner.body!=null?sh.zpp_inner.body.outer:null)!=boxBody){if(sh.zpp_inner.body!=null){(sh.zpp_inner.body!=null?sh.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(sh)}if(boxBody!=null){var _this=boxBody.zpp_inner.wrap_shapes;if(_this.zpp_inner.reverse_flag){_this.push(sh)}else{_this.unshift(sh)}}}sh.zpp_inner.immutable_midstep("Shape::sensorEnabled");sh.zpp_inner.sensorEnabled=true;sh.zpp_inner.wake();boxBody.zpp_inner.immutable_midstep("Body::space");if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=s){if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=null){boxBody.zpp_inner.component.woken=false}if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=null){(boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(boxBody)}if(s!=null){var _this1=s.zpp_inner.wrap_bodies;if(_this1.zpp_inner.reverse_flag){_this1.push(boxBody)}else{_this1.unshift(boxBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,32,32,boxBody,false);if(boxBody.zpp_inner_i.wrap_cbTypes==null){boxBody.zpp_inner_i.setupcbTypes()}var _this2=boxBody.zpp_inner_i.wrap_cbTypes;var obj=this.propBoxCbType;if(_this2.zpp_inner.reverse_flag){_this2.push(obj)}else{_this2.unshift(obj)}this.boxImg=new engine_mapsheet_AnimatedTile;this.boxImg.set_tileset(this.animSheet);var t2=type%4*4;this.boxImg.addBehavior(new engine_mapsheet_data_Behavior("idle",[t2],false,20));this.boxImg.addBehavior(new engine_mapsheet_data_Behavior("unbox",[1+t2,2+t2,3+t2],false,20));this.boxImg.showBehavior("idle");this.boxImg.update(1);this.addTile(this.boxImg);var _this3=this.body;if(_this3.zpp_inner_i.userData==null){_this3.zpp_inner_i.userData={}}_this3.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.props.PropBox"]=project_game_objects_props_PropBox;project_game_objects_props_PropBox.__name__="project.game.objects.props.PropBox";project_game_objects_props_PropBox.__super__=project_entities_PhysicalTile;project_game_objects_props_PropBox.prototype=$extend(project_entities_PhysicalTile.prototype,{propBoxCbType:null,bearOverListener:null,inflatableOverListener:null,animSheet:null,boxImg:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.bearOverListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.bearType,this.propBoxCbType,$bind(this,this.bodyOver));var _this10=this.body;var _this11=(_this10.zpp_inner.space==null?null:_this10.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj=this.bearOverListener;if(_this11.zpp_inner.reverse_flag){_this11.push(obj)}else{_this11.unshift(obj)}if(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN=new nape_callbacks_CbEvent;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR=new nape_callbacks_InteractionType;zpp_$nape_util_ZPP_$Flags.internal=false}this.inflatableOverListener=new nape_callbacks_InteractionListener(zpp_$nape_util_ZPP_$Flags.CbEvent_BEGIN,zpp_$nape_util_ZPP_$Flags.InteractionType_SENSOR,project_game_CallbackTypes.inflatableType,this.propBoxCbType,$bind(this,this.bodyOver));var _this12=this.body;var _this13=(_this12.zpp_inner.space==null?null:_this12.zpp_inner.space.outer).zpp_inner.wrap_listeners;var obj1=this.inflatableOverListener;if(_this13.zpp_inner.reverse_flag){_this13.push(obj1)}else{_this13.unshift(obj1)}this.data.sortCriteria=this.get_y()},update:function(dt){if(this.boxImg.currentBehavior.name=="unbox"&&!this.boxImg.behaviorComplete){project_entities_PhysicalTile.prototype.update.call(this,dt);this.boxImg.update(dt)}},bodyOver:function(collision){var _this=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this.zpp_inner.collisionGroup!=0){_this.zpp_inner.collisionGroup=0;_this.zpp_inner.invalidate()}var _this1=this.body.zpp_inner.wrap_shapes.at(0).zpp_inner.filter.wrapper();if(_this1.zpp_inner.sensorGroup!=0){_this1.zpp_inner.sensorGroup=0;_this1.zpp_inner.invalidate()}this.data.sortCriteria=-Infinity;this.boxImg.showBehavior("unbox");engine_soundlib_SoundList.FX(22)},__class__:project_game_objects_props_PropBox});var project_game_objects_props_Trash=function(s){this.propBoxCbType=new nape_callbacks_CbType;if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var boxBody=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC);this.animSheet=project_game_util_GameTiles.PROP_TRASH;var shape=new nape_shape_Polygon(nape_shape_Polygon.rect(0,0,8,8));shape.zpp_inner.immutable_midstep("Shape::fluidEnabled");shape.zpp_inner.fluidEnabled=true;if(shape.zpp_inner.fluidProperties==null){var fluidProperties=new nape_phys_FluidProperties;shape.zpp_inner.setFluid(fluidProperties.zpp_inner);shape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(shape.zpp_inner.fluidProperties==null){shape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}shape.zpp_inner.fluidProperties.wrapper()}shape.zpp_inner.wake();var _this=shape.zpp_inner.filter.wrapper();if(_this.zpp_inner.fluidMask!=3){_this.zpp_inner.fluidMask=3;_this.zpp_inner.invalidate()}shape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(shape.zpp_inner.fluidProperties==null){shape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this1=shape.zpp_inner.fluidProperties.wrapper();if(1e4!=_this1.zpp_inner.density*1e3){_this1.zpp_inner.density=10;_this1.zpp_inner.invalidate()}shape.zpp_inner.immutable_midstep("Shape::fluidProperties");if(shape.zpp_inner.fluidProperties==null){shape.zpp_inner.setFluid((new nape_phys_FluidProperties).zpp_inner)}var _this2=shape.zpp_inner.fluidProperties.wrapper();if(100!=_this2.zpp_inner.viscosity){_this2.zpp_inner.viscosity=100;_this2.zpp_inner.invalidate()}var material=nape_phys_Material.wood();shape.zpp_inner.immutable_midstep("Shape::material");shape.zpp_inner.setMaterial(material.zpp_inner);shape.zpp_inner.material.wrapper();var _this3=shape.zpp_inner.material.wrapper();if(1!=_this3.zpp_inner.density*1e3){_this3.zpp_inner.density=.001;_this3.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.PROPS)}var _this4=shape.zpp_inner.material.wrapper();if(0!=_this4.zpp_inner.dynamicFriction){_this4.zpp_inner.dynamicFriction=0;_this4.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ANGDRAG|zpp_$nape_phys_ZPP_$Material.ARBITERS)}var _this5=shape.zpp_inner.material.wrapper();if(1!=_this5.zpp_inner.staticFriction){_this5.zpp_inner.staticFriction=1;_this5.zpp_inner.invalidate(zpp_$nape_phys_ZPP_$Material.WAKE|zpp_$nape_phys_ZPP_$Material.ARBITERS)}shape.zpp_inner.immutable_midstep("Shape::body");if((shape.zpp_inner.body!=null?shape.zpp_inner.body.outer:null)!=boxBody){if(shape.zpp_inner.body!=null){(shape.zpp_inner.body!=null?shape.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(shape)}if(boxBody!=null){var _this6=boxBody.zpp_inner.wrap_shapes;if(_this6.zpp_inner.reverse_flag){_this6.push(shape)}else{_this6.unshift(shape)}}}boxBody.zpp_inner.immutable_midstep("Body::space");if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=s){if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=null){boxBody.zpp_inner.component.woken=false}if((boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer)!=null){(boxBody.zpp_inner.space==null?null:boxBody.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(boxBody)}if(s!=null){var _this7=s.zpp_inner.wrap_bodies;if(_this7.zpp_inner.reverse_flag){_this7.push(boxBody)}else{_this7.unshift(boxBody)}}}project_entities_PhysicalTile.call(this,0,0,0,1,1,0,4,4,boxBody,true);if(boxBody.zpp_inner_i.wrap_cbTypes==null){boxBody.zpp_inner_i.setupcbTypes()}var _this8=boxBody.zpp_inner_i.wrap_cbTypes;var obj=this.propBoxCbType;if(_this8.zpp_inner.reverse_flag){_this8.push(obj)}else{_this8.unshift(obj)}this.boxImg=new openfl_display_Tile;this.boxImg.set_tileset(this.animSheet);this.addTile(this.boxImg);var _this9=this.body;if(_this9.zpp_inner_i.userData==null){_this9.zpp_inner_i.userData={}}_this9.zpp_inner_i.userData.object=this};$hxClasses["project.game.objects.props.Trash"]=project_game_objects_props_Trash;project_game_objects_props_Trash.__name__="project.game.objects.props.Trash";project_game_objects_props_Trash.__super__=project_entities_PhysicalTile;project_game_objects_props_Trash.prototype=$extend(project_entities_PhysicalTile.prototype,{propBoxCbType:null,animSheet:null,boxImg:null,initialize:function(){var _this=this.body;if(_this.zpp_inner.wrap_pos==null){_this.zpp_inner.setupPosition()}var _this1=_this.zpp_inner.wrap_pos;var x=this.get_x();var _this2=_this1.zpp_inner;if(_this2._validate!=null){_this2._validate()}if(_this1.zpp_inner.x!=x){_this1.zpp_inner.x=x;var _this3=_this1.zpp_inner;if(_this3._invalidate!=null){_this3._invalidate(_this3)}}var _this4=_this1.zpp_inner;if(_this4._validate!=null){_this4._validate()}var _this5=this.body;if(_this5.zpp_inner.wrap_pos==null){_this5.zpp_inner.setupPosition()}var _this6=_this5.zpp_inner.wrap_pos;var y=this.get_y();var _this7=_this6.zpp_inner;if(_this7._validate!=null){_this7._validate()}if(_this6.zpp_inner.y!=y){_this6.zpp_inner.y=y;var _this8=_this6.zpp_inner;if(_this8._invalidate!=null){_this8._invalidate(_this8)}}var _this9=_this6.zpp_inner;if(_this9._validate!=null){_this9._validate()}this.data.sortCriteria=-Infinity},__class__:project_game_objects_props_Trash});var project_game_popups_LosePopup=function(level){this.clicked=false;this.container=new openfl_display_Sprite;engine_scenemanager_bases_PopupBase.call(this);this.currentLevel=level;this.fade=new openfl_display_Sprite;this.fade.get_graphics().beginFill(0,1);this.fade.get_graphics().drawRect(0,0,800,600);this.fade.set_alpha(0);this.addChild(this.fade);this.landingPosition=new openfl_geom_Point(400,300);this.get_graphics().beginFill(0,.25);this.get_graphics().drawRect(0,0,800,600);var img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-lose.png"),5,null,true);this.container.addChild(img);var loseText=new engine_text_Label(project_locale_L10N_$CN.getText("LOST"),new openfl_text_TextFormat("Cooper Black",32,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);loseText.set_x(0);loseText.set_y(-125);var retryText=new engine_text_Label(project_locale_L10N_$CN.getText("TRY_AGAIN"),new openfl_text_TextFormat("Cooper Black",24,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);retryText.set_x(0);retryText.set_y(-75);var restartButton=new engine_button_ImageButton("img/game/popups/game-popup-lose-restart.png",true,55,160,$bind(this,this.restartGame),false);var exitButton=new engine_button_ImageButton("img/game/popups/game-popup-win-selector.png",true,-80,160,$bind(this,this.exitGame),false);this.container.addChild(restartButton);this.container.addChild(exitButton);this.container.addChild(loseText);this.container.addChild(retryText);this.addChild(this.container)};$hxClasses["project.game.popups.LosePopup"]=project_game_popups_LosePopup;project_game_popups_LosePopup.__name__="project.game.popups.LosePopup";project_game_popups_LosePopup.__super__=engine_scenemanager_bases_PopupBase;project_game_popups_LosePopup.prototype=$extend(engine_scenemanager_bases_PopupBase.prototype,{landingPosition:null,container:null,currentLevel:null,fade:null,clicked:null,onShow:function(){this.getIn()},getIn:function(){this.container.set_y(-200);this.container.set_x(this.landingPosition.x);this.fade.set_alpha(0);engine_tweens_Actuator.tween(this.container,.5,{y:this.landingPosition.y}).ease(motion_easing_Bounce.easeOut);engine_tweens_Actuator.tween(this.fade,.75,{alpha:.5}).ease(motion_easing_Quad.easeOut);engine_soundlib_SoundList.FX(42,0,false)},restartGame:function(){this.getOut("restart")},exitGame:function(){this.getOut("exit")},getOut:function(how){if(this.clicked){return}else{this.clicked=true}switch(how){case"exit":engine_scenemanager_Manager.changeScene(project_scenes_MenuScene,["selector"],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(2);break;case"restart":engine_scenemanager_Manager.changeScene(project_scenes_GameScene,[this.currentLevel],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(1);break}},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},__class__:project_game_popups_LosePopup});var project_game_popups_PausePopup=function(level,onResume){this.clicked=false;this.container=new openfl_display_Sprite;engine_scenemanager_bases_PopupBase.call(this);this.continueGame=onResume;this.currentLevel=level;this.landingPosition=new openfl_geom_Point(400,300);this.fade=new openfl_display_Sprite;this.fade.get_graphics().beginFill(0,1);this.fade.get_graphics().drawRect(0,0,800,600);this.fade.set_alpha(0);this.addChild(this.fade);var img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-pause.png"),5,null,true);this.container.addChild(img);var playButton=new engine_button_ImageButton("img/menu/buttons/btn_play.png",true,0,0,$bind(this,this.returnToGame),false);var restartButton=new engine_button_ImageButton("img/game/popups/game-restart.png",true,140,0,$bind(this,this.restartGame),false);var exitButton=new engine_button_ImageButton("img/game/popups/game-exit.png",true,220,0,$bind(this,this.exitGame),false);var soundButton=new engine_button_MuteButton(false);soundButton.set_x(300);var pauseText=new engine_text_Label(project_locale_L10N_$CN.getText("PAUSE"),new openfl_text_TextFormat("Cooper Black",32,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);pauseText.set_x(-200);pauseText.set_y(0);this.container.addChild(playButton);this.container.addChild(restartButton);this.container.addChild(exitButton);this.container.addChild(soundButton);this.container.addChild(pauseText);this.addChild(this.container)};$hxClasses["project.game.popups.PausePopup"]=project_game_popups_PausePopup;project_game_popups_PausePopup.__name__="project.game.popups.PausePopup";project_game_popups_PausePopup.__super__=engine_scenemanager_bases_PopupBase;project_game_popups_PausePopup.prototype=$extend(engine_scenemanager_bases_PopupBase.prototype,{landingPosition:null,container:null,currentLevel:null,continueGame:null,fade:null,clicked:null,onShow:function(){this.getIn()},getIn:function(){this.container.set_y(-200);this.container.set_x(this.landingPosition.x);this.fade.set_alpha(0);engine_tweens_Actuator.tween(this.container,.5,{y:this.landingPosition.y}).ease(motion_easing_Bounce.easeOut);engine_tweens_Actuator.tween(this.fade,.75,{alpha:.5}).ease(motion_easing_Quad.easeOut);engine_soundlib_SoundList.FX(4)},returnToGame:function(){this.getOut("continue")},restartGame:function(){this.getOut("restart")},exitGame:function(){this.getOut("exit")},getOut:function(how){var _gthis=this;if(this.clicked){return}else{this.clicked=true}switch(how){case"continue":engine_tweens_Actuator.tween(this.fade,.25,{alpha:0}).ease(motion_easing_Quad.easeOut);engine_soundlib_SoundList.FX(3);engine_tweens_Actuator.tween(this.container,.25,{y:800}).ease(motion_easing_Quad.easeOut).onComplete(function(){_gthis.closeHandler();_gthis.continueGame()});engine_soundlib_SoundList.FX(5);break;case"exit":engine_scenemanager_Manager.changeScene(project_scenes_MenuScene,["selector"],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(2);break;case"restart":engine_scenemanager_Manager.changeScene(project_scenes_GameScene,[this.currentLevel],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(1);break}},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},__class__:project_game_popups_PausePopup});var project_game_popups_WinPopup=function(level,cond,shotsLeft){this.clicked=false;this.container=new openfl_display_Sprite;engine_scenemanager_bases_PopupBase.call(this);this.currentLevel=level;this.landingPosition=new openfl_geom_Point(400,300);this.fade=new openfl_display_Sprite;this.fade.get_graphics().beginFill(0,1);this.fade.get_graphics().drawRect(0,0,800,600);this.fade.set_alpha(0);this.addChild(this.fade);var img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win.png"),5,null,true);this.container.addChild(img);this.playButton=new engine_button_ImageButton("img/menu/buttons/btn_play.png",true,0,160,$bind(this,this.returnToGame),false);this.restartButton=new engine_button_ImageButton("img/game/popups/game-popup-win-restart.png",true,134.5,160,$bind(this,this.restartGame),false);this.exitButton=new engine_button_ImageButton("img/game/popups/game-popup-win-selector.png",true,-134.5,160,$bind(this,this.exitGame),false);this.starL=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star1.png"),5,null,true);this.starM=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star2.png"),5,null,true);this.starR=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star3.png"),5,null,true);this.starL.set_x(-103);this.starL.set_y(-118);this.starM.set_x(0);this.starM.set_y(-125.5);this.starR.set_x(103);this.starR.set_y(-118);this.starText=new engine_text_Label(project_locale_L10N_$CN.getText("STAR3"),new openfl_text_TextFormat("Cooper Black",24,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.starText.set_x(0);this.starText.set_y(-30);this.congratText=new engine_text_Label(project_locale_L10N_$CN.getText("WON"),new openfl_text_TextFormat("Cooper Black",24,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.congratText.set_x(0);this.congratText.set_y(-55);if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star3"]!=null?cond.getReserved("star3"):cond.h["star3"])){this.starText.set_text(project_locale_L10N_$CN.getText("STAR3"))}else if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star2"]!=null?cond.getReserved("star2"):cond.h["star2"])){this.starText.set_text(project_locale_L10N_$CN.getText("STAR2"))}else if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star1"]!=null?cond.getReserved("star1"):cond.h["star1"])){this.starText.set_text(project_locale_L10N_$CN.getText("STAR1"))}else{this.starText.set_text(project_locale_L10N_$CN.getText("STAR0"))}this.container.addChild(this.playButton);this.container.addChild(this.restartButton);this.container.addChild(this.congratText);this.container.addChild(this.starText);this.container.addChild(this.exitButton);this.container.addChild(this.starL);this.container.addChild(this.starM);this.container.addChild(this.starR);this.addChild(this.container);this.starR.set_visible(false);this.starM.set_visible(false);this.starL.set_visible(false);this.playButton.set_scaleX(0);this.playButton.set_scaleY(0);this.restartButton.set_scaleX(0);this.restartButton.set_scaleY(0);this.exitButton.set_scaleX(0);this.exitButton.set_scaleY(0);engine_tweens_Actuator.timer(.5).onComplete($bind(this,this.showStars),[level,cond,shotsLeft])};$hxClasses["project.game.popups.WinPopup"]=project_game_popups_WinPopup;project_game_popups_WinPopup.__name__="project.game.popups.WinPopup";project_game_popups_WinPopup.__super__=engine_scenemanager_bases_PopupBase;project_game_popups_WinPopup.prototype=$extend(engine_scenemanager_bases_PopupBase.prototype,{landingPosition:null,container:null,currentLevel:null,fade:null,starL:null,starM:null,starR:null,playButton:null,restartButton:null,exitButton:null,congratText:null,starText:null,clicked:null,onShow:function(){this.getIn()},getIn:function(){this.container.set_y(-200);this.container.set_x(this.landingPosition.x);this.fade.set_alpha(0);engine_tweens_Actuator.tween(this.container,.5,{y:this.landingPosition.y}).ease(motion_easing_Bounce.easeOut);engine_tweens_Actuator.tween(this.fade,.75,{alpha:.5}).ease(motion_easing_Quad.easeOut)},showStars:function(level,cond,shotsLeft){var levelState=2;if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star3"]!=null?cond.getReserved("star3"):cond.h["star3"])){levelState=5;this.starR.set_visible(true);this.starM.set_visible(true);this.starL.set_visible(true);this.starL.set_scaleX(0);this.starL.set_scaleY(0);engine_tweens_Actuator.tween(this.starL,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut);this.starM.set_scaleX(0);this.starM.set_scaleY(0);engine_tweens_Actuator.tween(this.starM,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut).delay(.2);this.starR.set_scaleX(0);this.starR.set_scaleY(0);engine_tweens_Actuator.tween(this.starR,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut).delay(.4);engine_soundlib_SoundList.FX(50);engine_soundlib_SoundList.FX(51,.2);engine_soundlib_SoundList.FX(52,.4)}else if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star2"]!=null?cond.getReserved("star2"):cond.h["star2"])){levelState=4;this.starM.set_visible(true);this.starL.set_visible(true);this.starL.set_scaleX(0);this.starL.set_scaleY(0);engine_tweens_Actuator.tween(this.starL,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut);this.starM.set_scaleX(0);this.starM.set_scaleY(0);engine_tweens_Actuator.tween(this.starM,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut).delay(.2);engine_soundlib_SoundList.FX(50);engine_soundlib_SoundList.FX(51,.2)}else if(shotsLeft>=(__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"])-(__map_reserved["star1"]!=null?cond.getReserved("star1"):cond.h["star1"])){this.starL.set_visible(true);levelState=3;this.starL.set_scaleX(0);this.starL.set_scaleY(0);engine_tweens_Actuator.tween(this.starL,.25,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut);engine_soundlib_SoundList.FX(50)}this.playButton.set_scaleX(0);this.playButton.set_scaleY(0);engine_tweens_Actuator.tween(this.playButton,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(.75);this.restartButton.set_scaleX(0);this.restartButton.set_scaleY(0);engine_tweens_Actuator.tween(this.restartButton,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(.75);this.exitButton.set_scaleX(0);this.exitButton.set_scaleY(0);engine_tweens_Actuator.tween(this.exitButton,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(.75);if(project_data_UserData.setScore(level-1,shotsLeft,levelState)){project_data_UserData.store()}},returnToGame:function(){this.getOut("next")},restartGame:function(){this.getOut("restart")},exitGame:function(){this.getOut("exit")},getOut:function(how){if(this.clicked){return}else{this.clicked=true}switch(how){case"exit":engine_scenemanager_Manager.changeScene(project_scenes_MenuScene,["selector"],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(2);break;case"next":if(this.currentLevel<18){engine_scenemanager_Manager.changeScene(project_scenes_GameScene,[this.currentLevel+1],project_transitions_DoorsTransition);engine_soundlib_SoundList.FX(3)}else{engine_scenemanager_Manager.changeScene(project_scenes_MenuScene,["ending"],project_transitions_DoorsTransition);engine_soundlib_SoundList.FX(3)}engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);break;case"restart":engine_scenemanager_Manager.changeScene(project_scenes_GameScene,[this.currentLevel],project_transitions_DoorsTransition);engine_tweens_Actuator.timer(1).onComplete(this.closeHandler);engine_soundlib_SoundList.FX(1);break}},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},__class__:project_game_popups_WinPopup});var project_game_ui_ObjectIndicator=function(targetitem){this.hiding=false;openfl_display_TileContainer.call(this);this.name=targetitem;this.indicator=new openfl_display_Tile(0,0,0,1,1,0,32,64);this.indicator.set_tileset(project_game_util_GameTiles.INDICATOR_ARROW);var indicatorContainer=new openfl_display_TileContainer;indicatorContainer.addTile(this.indicator);this.item=new engine_mapsheet_AnimatedTile(32,32);this.item.set_tileset(project_game_util_GameTiles.INDICATOR_ITEM);this.item.addBehavior(new engine_mapsheet_data_Behavior("grizzly",[0],false,10));this.item.addBehavior(new engine_mapsheet_data_Behavior("panda",[1],false,10));this.item.addBehavior(new engine_mapsheet_data_Behavior("ice",[2],false,10));this.item.addBehavior(new engine_mapsheet_data_Behavior("goal",[3],false,10));this.item.showBehavior(targetitem);this.item.update(1);this.itemContainer=new openfl_display_TileContainer;this.itemContainer.addTile(this.item);indicatorContainer.addTile(this.itemContainer);this.addTile(indicatorContainer);this.item.set_x(0);this.item.set_y(0);this.itemContainer.set_y(-32);this.originPos=new nape_geom_Vec2;this.targetPos=new nape_geom_Vec2;this.offset=new nape_geom_Vec2(16,16);this.set_visible(false);this.hiding=true};$hxClasses["project.game.ui.ObjectIndicator"]=project_game_ui_ObjectIndicator;project_game_ui_ObjectIndicator.__name__="project.game.ui.ObjectIndicator";project_game_ui_ObjectIndicator.__interfaces__=[engine_updateable_IUpdateable];project_game_ui_ObjectIndicator.__super__=openfl_display_TileContainer;project_game_ui_ObjectIndicator.prototype=$extend(openfl_display_TileContainer.prototype,{target:null,canvas:null,originPos:null,targetPos:null,offset:null,indicator:null,item:null,itemContainer:null,name:null,update:function(dt){var _gthis=this;var center=this.canvas.globalToLocal(new openfl_geom_Point(this.canvas.stage.stageWidth/2,this.canvas.stage.stageHeight/2));var _this=this.originPos;var x=center.x;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}if(_this.zpp_inner.x!=x){_this.zpp_inner.x=x;var _this2=_this.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}var _this3=_this.zpp_inner;if(_this3._validate!=null){_this3._validate()}var _this4=this.originPos;var y=center.y;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}if(_this4.zpp_inner.y!=y){_this4.zpp_inner.y=y;var _this6=_this4.zpp_inner;if(_this6._invalidate!=null){_this6._invalidate(_this6)}}var _this7=_this4.zpp_inner;if(_this7._validate!=null){_this7._validate()}var _this8=this.targetPos;var x1=this.target.get_x();var _this9=_this8.zpp_inner;if(_this9._validate!=null){_this9._validate()}if(_this8.zpp_inner.x!=x1){_this8.zpp_inner.x=x1;var _this10=_this8.zpp_inner;if(_this10._invalidate!=null){_this10._invalidate(_this10)}}var _this11=_this8.zpp_inner;if(_this11._validate!=null){_this11._validate()}var _this12=this.targetPos;var y1=this.target.get_y();var _this13=_this12.zpp_inner;if(_this13._validate!=null){_this13._validate()}if(_this12.zpp_inner.y!=y1){_this12.zpp_inner.y=y1;var _this14=_this12.zpp_inner;if(_this14._invalidate!=null){_this14._invalidate(_this14)}}var _this15=_this12.zpp_inner;if(_this15._validate!=null){_this15._validate()}var _this16=this.targetPos;var _this17=_this16.zpp_inner;if(_this17._validate!=null){_this17._validate()}var tmp=_this16.zpp_inner.x;var tmp1=center.x+400;var _this18=this.offset;var _this19=_this18.zpp_inner;if(_this19._validate!=null){_this19._validate()}this.set_x(Math.min(tmp,tmp1-_this18.zpp_inner.x));var tmp2=this.get_x();var tmp3=center.x-400;var _this20=this.offset;var _this21=_this20.zpp_inner;if(_this21._validate!=null){_this21._validate()}this.set_x(Math.max(tmp2,tmp3+_this20.zpp_inner.x));var _this22=this.targetPos;var _this23=_this22.zpp_inner;if(_this23._validate!=null){_this23._validate()}var tmp4=_this22.zpp_inner.y;var tmp5=center.y+300;var _this24=this.offset;var _this25=_this24.zpp_inner;if(_this25._validate!=null){_this25._validate()}this.set_y(Math.min(tmp4,tmp5-_this24.zpp_inner.y));var tmp6=this.get_y();var tmp7=center.y-300;var _this26=this.offset;var _this27=_this26.zpp_inner;if(_this27._validate!=null){_this27._validate()}this.set_y(Math.max(tmp6,tmp7+_this26.zpp_inner.y));var tmp8;var tmp9;var tmp10;var tmp11=this.get_x();var tmp12=center.x+400;var _this28=this.offset;var _this29=_this28.zpp_inner;if(_this29._validate!=null){_this29._validate()}if(tmp11<tmp12-_this28.zpp_inner.x){var tmp13=this.get_x();var tmp14=center.x-400;var _this30=this.offset;var _this31=_this30.zpp_inner;if(_this31._validate!=null){_this31._validate()}tmp10=tmp13>tmp14+_this30.zpp_inner.x}else{tmp10=false}if(tmp10){var tmp15=this.get_y();var tmp16=center.y+300;var _this32=this.offset;var _this33=_this32.zpp_inner;if(_this33._validate!=null){_this33._validate()}tmp9=tmp15<tmp16-_this32.zpp_inner.y}else{tmp9=false}if(tmp9){var tmp17=this.get_y();var tmp18=center.y-300;var _this34=this.offset;var _this35=_this34.zpp_inner;if(_this35._validate!=null){_this35._validate()}tmp8=tmp17>tmp18+_this34.zpp_inner.y}else{tmp8=false}if(tmp8){if(!this.hiding){this.hiding=true;engine_tweens_Actuator.tween(this,.25,{scaleX:.01,scaleY:.01}).onComplete(function(){_gthis.set_visible(false)})}}else if(this.hiding){this.hiding=false;this.set_visible(true);engine_tweens_Actuator.tween(this,.25,{scaleX:1,scaleY:1})}var _this36=this.targetPos.sub(this.originPos);var angle;var angle1;var _this37=_this36.zpp_inner;if(_this37._validate!=null){_this37._validate()}var angle2=_this36.zpp_inner.x;var _this38=_this36.zpp_inner;if(_this38._validate!=null){_this38._validate()}if(angle2==_this36.zpp_inner.y){var _this39=_this36.zpp_inner;if(_this39._validate!=null){_this39._validate()}angle1=_this36.zpp_inner.x==0}else{angle1=false}if(angle1){angle=0}else{var _this40=_this36.zpp_inner;if(_this40._validate!=null){_this40._validate()}var angle3=_this36.zpp_inner.y;var _this41=_this36.zpp_inner;if(_this41._validate!=null){_this41._validate()}angle=Math.atan2(angle3,_this36.zpp_inner.x)}this.set_rotation(angle*180/Math.PI-90);this.itemContainer.set_rotation(-this.get_rotation())},hiding:null,__class__:project_game_ui_ObjectIndicator});var project_game_ui_SelectionDrag=function(baseContainer){this.limit5=100;this.limit4=91;this.limit3=79;this.limit2=63;this.limit1=43;this.circleOpenTime=.25;this.circleCloseTime=.25;this.angle=0;this.distance=0;this.minDistance=11;this.maxDistance=100;this.dragging=false;openfl_display_Sprite.call(this);this.circle=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionindicator.png"),5,null,true);this.circleBase=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionindicator-floor.png"),5,null,true);this.addChild(this.circle);this.spot1=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionspot1.png"),5,null,true);this.spot2=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionspot2.png"),5,null,true);this.spot3=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionspot3.png"),5,null,true);this.spot4=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionspot4.png"),5,null,true);this.spot5=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/selectionspot5.png"),5,null,true);this.spotPivot=new openfl_display_Sprite;this.spotPivot.addChild(this.spot5);this.spotPivot.addChild(this.spot4);this.spotPivot.addChild(this.spot3);this.spotPivot.addChild(this.spot2);this.spotPivot.addChild(this.spot1);this.addChild(this.spotPivot);this.arraySpot=[];this.arraySpot.push(this.spot1);this.arraySpot.push(this.spot2);this.arraySpot.push(this.spot3);this.arraySpot.push(this.spot4);this.arraySpot.push(this.spot5);this.arrayLimit=[];this.arrayLimit.push(this.limit1);this.arrayLimit.push(this.limit2);this.arrayLimit.push(this.limit3);this.arrayLimit.push(this.limit4);this.arrayLimit.push(this.limit5);this.hideArrow();this.hideCircle();this.circle.set_scaleX(.25);this.circle.set_scaleY(.25);baseContainer.addChild(this.circleBase);var _g=this.circle;_g.set_y(_g.get_y()+3);var _g1=this.circleBase;_g1.set_y(_g1.get_y()+3);var _g2=this.spotPivot;_g2.set_y(_g2.get_y()+3)};$hxClasses["project.game.ui.SelectionDrag"]=project_game_ui_SelectionDrag;project_game_ui_SelectionDrag.__name__="project.game.ui.SelectionDrag";project_game_ui_SelectionDrag.__interfaces__=[engine_updateable_IUpdateable];project_game_ui_SelectionDrag.__super__=openfl_display_Sprite;project_game_ui_SelectionDrag.prototype=$extend(openfl_display_Sprite.prototype,{dragging:null,maxDistance:null,minDistance:null,distance:null,angle:null,circle:null,circleBase:null,spot1:null,spot2:null,spot3:null,spot4:null,spot5:null,spotPivot:null,arraySpot:null,arrayLimit:null,circleCloseTime:null,circleOpenTime:null,showCircle:function(c,target){this.circle.set_visible(true);if(c!=null&&target!=null){engine_tweens_Actuator.tween(this.circle,this.circleOpenTime,{scaleX:1,scaleY:1,alpha:1});engine_tweens_Actuator.tween(this.circleBase,this.circleOpenTime,{scaleX:1,scaleY:1,alpha:1})}},hideCircle:function(){var _gthis=this;engine_tweens_Actuator.tween(this.circle,this.circleCloseTime,{scaleX:.25,scaleY:.25,alpha:0},false).onComplete(function(){_gthis.circle.set_visible(false);_gthis.circleBase.set_visible(false)});engine_tweens_Actuator.tween(this.circleBase,this.circleCloseTime,{scaleX:.25,scaleY:.25},false);engine_tweens_Actuator.tween(this.circleBase,this.circleCloseTime/2,{alpha:0},false).delay(this.circleCloseTime/2)},hideCircleAfterShot:function(){var _gthis=this;engine_tweens_Actuator.tween(this.circle,this.circleCloseTime,{alpha:0}).onComplete(function(){_gthis.circle.set_scaleX(0);_gthis.circle.set_scaleY(0);_gthis.circle.set_visible(false);_gthis.circle.set_alpha(1);_gthis.circleBase.set_scaleX(0);_gthis.circleBase.set_scaleY(0);_gthis.circleBase.set_alpha(1);_gthis.circleBase.set_visible(false)});engine_tweens_Actuator.tween(this.circleBase,this.circleCloseTime,{alpha:0})},hideArrow:function(){this.arraySpot[0].set_visible(false);this.arraySpot[0].set_x(0);this.arraySpot[1].set_visible(false);this.arraySpot[1].set_x(0);this.arraySpot[2].set_visible(false);this.arraySpot[2].set_x(0);this.arraySpot[3].set_visible(false);this.arraySpot[3].set_x(0);this.arraySpot[4].set_visible(false);this.arraySpot[4].set_x(0)},power:function(){var count=0;if(this.arraySpot[0].get_visible()){count=1}if(this.arraySpot[1].get_visible()){++count}if(this.arraySpot[2].get_visible()){++count}if(this.arraySpot[3].get_visible()){++count}if(this.arraySpot[4].get_visible()){++count}this.distance=0;return count},powerReset:function(){this.distance=0;this.hideArrow()},limit1:null,limit2:null,limit3:null,limit4:null,limit5:null,update:function(dt){this.circleBase.set_x(this.get_x());this.circleBase.set_y(this.get_y());if(this.circle.get_visible()){var clampedDist=Math.min(this.distance/1.5,this.maxDistance);clampedDist=Math.max(clampedDist,this.minDistance);this.spotPivot.set_rotation(this.angle-90);this.circle.set_rotation(this.angle);this.spot1.set_x(clampedDist+32);this.spot2.set_x(clampedDist+32);this.spot3.set_x(clampedDist+32);this.spot4.set_x(clampedDist+32);this.spot5.set_x(clampedDist+32);var _g=0;while(_g<5){var i=_g++;if(this.arraySpot[i].get_x()>this.arrayLimit[i]){this.arraySpot[i].set_x(this.arrayLimit[i]*(i+13)/13-3);if(!this.arraySpot[i].get_visible()){this.arraySpot[i].set_visible(true);switch(i){case 0:engine_soundlib_SoundList.FX(11);break;case 1:engine_soundlib_SoundList.FX(12);break;case 2:engine_soundlib_SoundList.FX(13);break;case 3:engine_soundlib_SoundList.FX(14);break;case 4:engine_soundlib_SoundList.FX(15);break}}}else if(this.arraySpot[i].get_visible()){this.arraySpot[i].set_visible(false);switch(i){case 0:engine_soundlib_SoundList.FX(10);break;case 1:engine_soundlib_SoundList.FX(11);break;case 2:engine_soundlib_SoundList.FX(12);break;case 3:engine_soundlib_SoundList.FX(13);break;case 4:engine_soundlib_SoundList.FX(14);break}}}}},__class__:project_game_ui_SelectionDrag});var project_game_ui_TopBar=function(levelNumber,cond,onPause){this.currentValue=0;this.currentShots=0;this.starShots=[];openfl_display_Sprite.call(this);this.starShots.push(__map_reserved["star1"]!=null?cond.getReserved("star1"):cond.h["star1"]);this.starShots.push(__map_reserved["star2"]!=null?cond.getReserved("star2"):cond.h["star2"]);this.starShots.push(__map_reserved["star3"]!=null?cond.getReserved("star3"):cond.h["star3"]);this.maxShots=__map_reserved["maxShots"]!=null?cond.getReserved("maxShots"):cond.h["maxShots"];this.currentValue=this.maxShots;var container=new openfl_display_Sprite;var background=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/UI/topbar-shotcounter-background.png"),4);this.topBar=new engine_progressbar_Progressbar(openfl_utils_Assets.getBitmapData("img/game/UI/topbar-shotcounter-progress.png"),0,this.maxShots);this.topBarBkg=new engine_progressbar_Progressbar(openfl_utils_Assets.getBitmapData("img/game/UI/topbar-shotcounter-progress-bkg.png"),0,this.maxShots);this.pauseButton=new engine_button_ImageButton("img/game/UI/game-pause.png",true,760,0,onPause,false);var pauseButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_small_bg.png"),5,null,true);var level=new engine_text_Label(""+levelNumber,new openfl_text_TextFormat("Cooper Black",30,16731469,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);level.set_x(40);level.set_y(-3);pauseButtonBackground.set_x(this.pauseButton.get_x());pauseButtonBackground.set_y(this.pauseButton.get_y());this.shottext=new engine_text_Label(this.currentShots+"",new openfl_text_TextFormat("Cooper Black",22,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.shottext.set_x(background.get_width()-113);this.shottext.set_y(-2);this.shotLeftOneText=new engine_text_Label("1",new openfl_text_TextFormat("Cooper Black",16,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.shotLeftTwoText=new engine_text_Label("2",new openfl_text_TextFormat("Cooper Black",16,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.shotLeftThreeText=new engine_text_Label("3",new openfl_text_TextFormat("Cooper Black",16,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.shotLeftOneText.set_y(-2);this.shotLeftTwoText.set_y(-2);this.shotLeftThreeText.set_y(-2);var animationStarSheet=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/UI/topbar-shotcounter-stars.png"));animationStarSheet.slice(2,1);animationStarSheet.addBehavior(new engine_mapsheet_data_Behavior("on",[0],false,10));animationStarSheet.addBehavior(new engine_mapsheet_data_Behavior("off",[1],false,10));this.star1=new engine_mapsheet_Animation(animationStarSheet,true);this.star2=new engine_mapsheet_Animation(animationStarSheet,true);this.star3=new engine_mapsheet_Animation(animationStarSheet,true);this.star1.showBehavior("on");this.star2.showBehavior("on");this.star3.showBehavior("on");this.star1.update(1);this.star2.update(1);this.star3.update(1);var slice=this.topBar.get_width()/this.maxShots;this.star1.set_x(slice*(this.maxShots-this.starShots[0])-animationStarSheet.tWidth/2);this.star2.set_x(slice*(this.maxShots-this.starShots[1])-animationStarSheet.tWidth/2);this.star3.set_x(slice*(this.maxShots-this.starShots[2])-animationStarSheet.tWidth/2);this.star1.set_y(-this.star1.get_height()/2);this.star2.set_y(-this.star2.get_height()/2);this.star3.set_y(-this.star3.get_height()/2);this.shotLeftOneText.set_x(this.star1.get_x()+animationStarSheet.tWidth);this.shotLeftTwoText.set_x(this.star2.get_x()+animationStarSheet.tWidth);this.shotLeftThreeText.set_x(this.star3.get_x()+animationStarSheet.tWidth);this.shotLeftOneText.set_text(this.maxShots-this.starShots[0]+"");this.shotLeftTwoText.set_text(this.maxShots-this.starShots[1]+"");this.shotLeftThreeText.set_text(this.maxShots-this.starShots[2]+"");this.addChild(container);container.addChild(background);container.addChild(this.topBarBkg);container.addChild(this.topBar);container.addChild(level);container.addChild(this.shottext);this.addChild(pauseButtonBackground);this.addChild(this.pauseButton);this.topBarBkg.set_x(150);this.topBar.set_x(150);this.topBar.addChild(this.star1);this.topBar.addChild(this.star2);this.topBar.addChild(this.star3);this.topBar.addChild(this.shotLeftOneText);this.topBar.addChild(this.shotLeftTwoText);this.topBar.addChild(this.shotLeftThreeText);this.topBarBkg.changeValue(this.maxShots,0);this.topBar.changeValue(this.maxShots,0);pauseButtonBackground.mouseEnabled=false;pauseButtonBackground.mouseChildren=false;container.mouseEnabled=false;container.mouseChildren=false;this.updateValue()};$hxClasses["project.game.ui.TopBar"]=project_game_ui_TopBar;project_game_ui_TopBar.__name__="project.game.ui.TopBar";project_game_ui_TopBar.__interfaces__=[engine_responsive_IResizable];project_game_ui_TopBar.__super__=openfl_display_Sprite;project_game_ui_TopBar.prototype=$extend(openfl_display_Sprite.prototype,{starShots:null,maxShots:null,currentShots:null,topBar:null,topBarBkg:null,star1:null,star2:null,star3:null,currentValue:null,shottext:null,shotLeftOneText:null,shotLeftTwoText:null,shotLeftThreeText:null,pauseButton:null,onShot:function(shotCount){this.currentValue=this.maxShots-shotCount;this.preUpdateValue()},preUpdateValue:function(){this.topBar.changeValue(this.currentValue)},updateValue:function(){this.shottext.set_text(this.currentValue+"");this.topBarBkg.changeValue(this.currentValue);if(this.starShots[2]<this.maxShots-this.currentValue){if(this.star3.currentBehavior.name!="off"){this.star3.showBehavior("off");this.star3.update(1);engine_soundlib_SoundList.FX(53)}}if(this.starShots[1]<this.maxShots-this.currentValue){if(this.star2.currentBehavior.name!="off"){this.star2.showBehavior("off");this.star2.update(1);engine_soundlib_SoundList.FX(54)}}if(this.starShots[0]<this.maxShots-this.currentValue){if(this.star1.currentBehavior.name!="off"){this.star1.showBehavior("off");this.star1.update(1);engine_soundlib_SoundList.FX(55)}}},enableButtons:function(b){this.pauseButton.setEnabled(b);this.pauseButton.mouseEnabled=b},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},__class__:project_game_ui_TopBar});var project_game_util_GameTiles=function(){};$hxClasses["project.game.util.GameTiles"]=project_game_util_GameTiles;project_game_util_GameTiles.__name__="project.game.util.GameTiles";project_game_util_GameTiles.Initialize=function(){if(!project_game_util_GameTiles.initialized){project_game_util_GameTiles.initialized=true;project_game_util_GameTiles.ATLAS_TILESET=new engine_atlas_StarlingTileset(openfl_utils_Assets.getBitmapData("img/game/objects/atlas/gameobjects.png"),openfl_utils_Assets.getText("img/game/objects/atlas/gameobjects.xml"));project_game_util_GameTiles.FLOOR01=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/floor.png"));project_game_util_GameTiles.FLOOR01.slice(2,2);project_game_util_GameTiles.FLOOR02=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/floor02.png"));project_game_util_GameTiles.FLOOR02.slice(2,2);project_game_util_GameTiles.FLOOR03=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/floor03.png"));project_game_util_GameTiles.FLOOR03.slice(2,2);project_game_util_GameTiles.WALL01=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/wall01.png"));project_game_util_GameTiles.WALL01.slice(6,4);project_game_util_GameTiles.WALL02=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/wall02.png"));project_game_util_GameTiles.WALL02.slice(6,4);project_game_util_GameTiles.WALL03=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/wall03.png"));project_game_util_GameTiles.WALL03.slice(6,4);project_game_util_GameTiles.WALLBOX=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/wallbox.png"));project_game_util_GameTiles.WALLBOX.slice(3,2);project_game_util_GameTiles.BANISTER=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/level/banister.png"));project_game_util_GameTiles.BANISTER.slice(4,4);project_game_util_GameTiles.INDICATOR_ARROW=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/UI/objectinidicator-arrow.png"));project_game_util_GameTiles.INDICATOR_ARROW.slice(1,1);project_game_util_GameTiles.INDICATOR_ITEM=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/UI/objectindicator-item.png"));project_game_util_GameTiles.INDICATOR_ITEM.slice(2,2);project_game_util_GameTiles.OBJECT_BEAR_PANDA=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/bearpanda.png"));project_game_util_GameTiles.OBJECT_BEAR_PANDA.slice(3,2);project_game_util_GameTiles.OBJECT_BEAR_GRIZZLY=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/beargrizzly.png"));project_game_util_GameTiles.OBJECT_BEAR_GRIZZLY.slice(3,2);project_game_util_GameTiles.OBJECT_BEAR_ICE=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/bearice.png"));project_game_util_GameTiles.OBJECT_BEAR_ICE.slice(3,2);project_game_util_GameTiles.OBJECT_BEAR_BASE_ATLAS="bearbase.png";project_game_util_GameTiles.OBJECT_BEAR_SHADOW_ATLAS="bearshadow.png";project_game_util_GameTiles.OBJECT_GOAL1=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/goal1.png"));project_game_util_GameTiles.OBJECT_GOAL1.slice(2,1);project_game_util_GameTiles.OBJECT_GOAL2=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/goal2.png"));project_game_util_GameTiles.OBJECT_GOAL2.slice(2,2);project_game_util_GameTiles.OBJECT_GOAL3=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/goal3.png"));project_game_util_GameTiles.OBJECT_GOAL3.slice(2,2);project_game_util_GameTiles.OBJECT_GOAL_FLAG_ATLAS="goal-flag.png";project_game_util_GameTiles.OBJECT_BOUNCER_TOP_ATLAS="bouncerTop.png";project_game_util_GameTiles.OBJECT_BOUNCER_BASE_ATLAS="bouncerBase.png";project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_TOP=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerTop2.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_TOP.slice(1,2);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_BOTTOM=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerBottom2.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_BOTTOM.slice(1,2);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_LEFT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerLeft2.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_LEFT.slice(2,1);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_RIGHT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerRight2.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_2_RIGHT.slice(2,1);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_TOP=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerTop3.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_TOP.slice(1,2);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_BOTTOM=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerBottom3.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_BOTTOM.slice(1,2);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_LEFT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerLeft3.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_LEFT.slice(2,1);project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_RIGHT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/wallBouncerRight3.png"));project_game_util_GameTiles.OBJECT_BOUNCER_WALL_3_RIGHT.slice(2,1);project_game_util_GameTiles.OBJECT_SPLAT_GOO_ATLAS="splatGoo.png";project_game_util_GameTiles.OBJECT_SPLAT_OIL_ATLAS="splatOil.png";project_game_util_GameTiles.OBJECT_INFLATABLE_ATLAS="inflatable-lone.png";project_game_util_GameTiles.OBJECT_ONE_SIDE_UP=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorOneSide-up.png"));project_game_util_GameTiles.OBJECT_ONE_SIDE_UP.slice(2,2);project_game_util_GameTiles.OBJECT_ONE_SIDE_DOWN=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorOneSide-down.png"));project_game_util_GameTiles.OBJECT_ONE_SIDE_DOWN.slice(2,2);project_game_util_GameTiles.OBJECT_ONE_SIDE_LEFT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorOneSide-left.png"));project_game_util_GameTiles.OBJECT_ONE_SIDE_LEFT.slice(4,1);project_game_util_GameTiles.OBJECT_ONE_SIDE_RIGHT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorOneSide-right.png"));project_game_util_GameTiles.OBJECT_ONE_SIDE_RIGHT.slice(4,1);project_game_util_GameTiles.OBJECT_TIMED_DOOR_V=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorTimedV.png"));project_game_util_GameTiles.OBJECT_TIMED_DOOR_V.slice(3,2);project_game_util_GameTiles.OBJECT_TIMED_DOOR_H=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorTimedH.png"));project_game_util_GameTiles.OBJECT_TIMED_DOOR_H.slice(3,2);project_game_util_GameTiles.OBJECT_DOOR_SWITCH=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorButton-button.png"));project_game_util_GameTiles.OBJECT_DOOR_SWITCH.slice(2,1);project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_LEFT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorButton-left.png"));project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_LEFT.slice(3,2);project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_RIGHT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorButton-right.png"));project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_RIGHT.slice(3,2);project_game_util_GameTiles.OBJECT_DOOR_BUTTON_FLOOR_LR_ATLAS="doorButton-hfloor.png";project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_TOP=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorButton-top.png"));project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_TOP.slice(3,2);project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_BOTTOM=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/doorButton-bottom.png"));project_game_util_GameTiles.OBJECT_DOOR_BUTTON_SHEET_BOTTOM.slice(3,2);project_game_util_GameTiles.OBJECT_DOOR_BUTTON_FLOOR_TB_ATLAS="doorButton-vfloor.png";project_game_util_GameTiles.OBJECT_HOLE=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/hole.png"));project_game_util_GameTiles.OBJECT_HOLE.slice(4,3);project_game_util_GameTiles.OBJECT_TELEPORT=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/teleport.png"));project_game_util_GameTiles.OBJECT_TELEPORT.slice(2,2);project_game_util_GameTiles.PROP_BEACON=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/props/beacon.png"));project_game_util_GameTiles.PROP_BEACON.slice(3,2);project_game_util_GameTiles.PROP_BOX90=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/props/box90.png"));project_game_util_GameTiles.PROP_BOX90.slice(4,4);project_game_util_GameTiles.PROP_BOX30=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/props/box30.png"));project_game_util_GameTiles.PROP_BOX30.slice(4,4);project_game_util_GameTiles.PROP_BOX45=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/props/box45.png"));project_game_util_GameTiles.PROP_BOX45.slice(4,4);project_game_util_GameTiles.PROP_TRASH=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/props/trash.png"));project_game_util_GameTiles.PROP_TRASH.slice(1,1);project_game_util_GameTiles.OBJECT_GOALFLAG=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/game/objects/goalFlag.png"));project_game_util_GameTiles.OBJECT_GOALFLAG.slice(4,1);project_game_util_GameTiles.OBJECT_INTROFLAG=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/menu/intro_flag.png"));project_game_util_GameTiles.OBJECT_INTROFLAG.slice(4,1)}};var project_locale_L10N_$CN=function(){};$hxClasses["project.locale.L10N_CN"]=project_locale_L10N_$CN;project_locale_L10N_$CN.__name__="project.locale.L10N_CN";project_locale_L10N_$CN.__properties__={set_langSelected:"set_langSelected",get_langSelected:"get_langSelected"};project_locale_L10N_$CN.get_langSelected=function(){if(project_locale_L10N_$CN.langSelected==null){project_locale_L10N_$CN.set_langSelected("en")}return project_locale_L10N_$CN.langSelected};project_locale_L10N_$CN.set_langSelected=function(value){return project_locale_L10N_$CN.langSelected=value};project_locale_L10N_$CN.getText=function(nodeName,overrideLang){if(project_locale_L10N_$CN.get_langSelected()==null){project_locale_L10N_$CN.set_langSelected("en")}if(overrideLang==null){overrideLang=project_locale_L10N_$CN.get_langSelected()}if(project_locale_L10N_$CN.langs==null){project_locale_L10N_$CN.langs=JSON.parse(openfl_utils_Assets.getText("locale:lang.json"))}var rv="ERROR";if(Object.prototype.hasOwnProperty.call(project_locale_L10N_$CN.langs,nodeName)){rv=Reflect.getProperty(Reflect.getProperty(project_locale_L10N_$CN.langs,nodeName),overrideLang);if(rv==""){rv="ERROR, LANGUAGE "+overrideLang+" NOT PROVIDED"}}return rv};project_locale_L10N_$CN.getQueryVariable=function(variable){var vars=window.location.search.substring(1).split("&");var _g=0;var _g1=vars.length;while(_g<_g1){var pair=vars[_g++].split("=");if(pair[0]==variable){return pair[1]}}return"en"};var project_menu_Ending=function(){this.star3_y=0;this.star3_x=0;this.star2_y=0;this.star2_x=0;this.star1_y=0;this.star1_x=0;this.tire3_y=0;this.tire3_x=0;this.tire2_y=0;this.tire2_x=0;this.tire1_y=0;this.tire1_x=0;this.iceberg_y=0;this.iceberg_x=0;this.grizzly_y=0;this.grizzly_x=0;this.panda_y=0;this.panda_x=0;this.board_y=0;this.board_x=0;this.back_y=560;this.back_x=40;openfl_display_Sprite.call(this);this.board=new openfl_display_Sprite;var boardImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_board.png"),5,null,true);this.board.addChild(boardImg);this.grizzly=new openfl_display_Sprite;var grizzlyImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_grizzly.png"),5,null,true);this.grizzly.addChild(grizzlyImg);this.iceberg=new openfl_display_Sprite;var icebergImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_iceberg.png"),5,null,true);this.iceberg.addChild(icebergImg);this.panda=new openfl_display_Sprite;var pandaImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_panda.png"),5,null,true);this.panda.addChild(pandaImg);this.board=new openfl_display_Sprite;var boardImg1=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_board.png"),5,null,true);this.board.addChild(boardImg1);this.star1=new openfl_display_Sprite;var star1Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star1.png"),5,null,true);this.star1.addChild(star1Img);this.star2=new openfl_display_Sprite;var star2Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star2.png"),5,null,true);this.star2.addChild(star2Img);this.star3=new openfl_display_Sprite;var star3Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/game/popups/game-popup-win-star3.png"),5,null,true);this.star3.addChild(star3Img);this.tire1=new openfl_display_Sprite;var tire1Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_tire1.png"),5,null,true);this.tire1.addChild(tire1Img);this.tire2=new openfl_display_Sprite;var tire2Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_tire2.png"),5,null,true);this.tire2.addChild(tire2Img);this.tire3=new openfl_display_Sprite;var tire3Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/end_tire3.png"),5,null,true);this.tire3.addChild(tire3Img);this.backContainer=new openfl_display_Sprite;var backButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_small_bg.png"),5,null,true);var backButton=new engine_button_ImageButton("img/menu/buttons/btn_back.png",true,0,0,$bind(this,this.onBackPressed),false);this.backContainer.set_x(800-this.backContainer.get_width()/2);this.backContainer.set_y(600-this.backContainer.get_height()/2);this.backContainer.addChild(backButtonBackground);this.backContainer.addChild(backButton);this.backContainer.set_x(this.back_x);this.backContainer.set_y(this.back_y);this.addChild(this.tire1);this.addChild(this.tire2);this.addChild(this.tire3);this.addChild(this.board);this.addChild(this.star1);this.addChild(this.star2);this.addChild(this.star3);this.addChild(this.grizzly);this.addChild(this.iceberg);this.addChild(this.panda);this.addChild(this.backContainer);var congratText=new engine_text_Label(project_locale_L10N_$CN.getText("CONGRATULATIONS"),new openfl_text_TextFormat("Cooper Black",42,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);congratText.set_x(0);congratText.set_y(-this.board.get_height()+50);var endingText=new engine_text_Label(StringTools.replace(project_locale_L10N_$CN.getText("ENDING"),"\\n","\n"),new openfl_text_TextFormat("Cooper Black",32,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);endingText.set_x(0);endingText.set_y(-this.board.get_height()/4+32);var endingText2=new engine_text_Label(StringTools.replace(project_locale_L10N_$CN.getText("ENDING2"),"\\n","\n"),new openfl_text_TextFormat("Cooper Black",32,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);endingText2.set_x(0);endingText2.set_y(16);this.board.addChild(congratText);this.board.addChild(endingText);this.board.addChild(endingText2);this.board_x=400;this.board_y=250;this.panda_x=this.panda.get_width()/2;this.panda_y=600-this.panda.get_height()/2;this.grizzly_x=400;this.grizzly_y=600-this.grizzly.get_height()/2;this.iceberg_x=800-this.iceberg.get_width()/2;this.iceberg_y=600-this.iceberg.get_height()/2;this.tire1_x=this.panda_x-this.tire1.get_width()/8;this.tire1_y=120+this.tire1.get_height()/4;this.tire2_x=this.grizzly_x+this.tire2.get_width()/4;this.tire2_y=120;this.tire3_x=this.iceberg_x+this.tire3.get_width()/4;this.tire3_y=150+this.tire3.get_height()/4;this.star1_x=100;this.star1_y=75;this.star2_x=600+this.star2.get_width()/4;this.star2_y=150+this.star2.get_height()/2;this.star3_x=700+this.star3.get_width()/4;this.star3_y=75+this.star3.get_height()/2;this.set_visible(false)};$hxClasses["project.menu.Ending"]=project_menu_Ending;project_menu_Ending.__name__="project.menu.Ending";project_menu_Ending.__interfaces__=[engine_updateable_IUpdateable];project_menu_Ending.__super__=openfl_display_Sprite;project_menu_Ending.prototype=$extend(openfl_display_Sprite.prototype,{board:null,grizzly:null,iceberg:null,panda:null,tire1:null,tire2:null,tire3:null,star1:null,star2:null,star3:null,backContainer:null,backPressed:null,update:function(dt){},back_x:null,back_y:null,board_x:null,board_y:null,panda_x:null,panda_y:null,grizzly_x:null,grizzly_y:null,iceberg_x:null,iceberg_y:null,tire1_x:null,tire1_y:null,tire2_x:null,tire2_y:null,tire3_x:null,tire3_y:null,star1_x:null,star1_y:null,star2_x:null,star2_y:null,star3_x:null,star3_y:null,spawn:function(){this.set_visible(true);this.backContainer.set_scaleX(0);this.backContainer.set_scaleY(0);this.panda.set_x(this.panda_x);this.panda.set_y(this.panda_y+500);this.grizzly.set_x(this.grizzly_x);this.grizzly.set_y(this.grizzly_y+500);this.iceberg.set_x(this.iceberg_x);this.iceberg.set_y(this.iceberg_y+500);this.board.set_x(this.board_x);this.board.set_y(this.board_y-500);this.tire1.set_x(this.tire1_x);this.tire1.set_y(this.tire1_y+600);this.tire2.set_x(this.tire2_x);this.tire2.set_y(this.tire2_y+600);this.tire3.set_x(this.tire3_x);this.tire3.set_y(this.tire3_y+600);this.star1.set_x(this.star1_x);this.star1.set_y(this.star1_y+600+200);this.star2.set_x(this.star2_x);this.star2.set_y(this.star2_y+600+200);this.star3.set_x(this.star3_x);this.star3.set_y(this.star3_y+600+200);engine_tweens_Actuator.timer(.5).onComplete($bind(this,this.getIn))},getIn:function(){var _gthis=this;engine_tweens_Actuator.tween(this.tire1,1,{x:this.tire1_x,y:this.tire1_y}).ease(motion_easing_Quad.easeOut).delay(.75);engine_tweens_Actuator.tween(this.tire2,1,{x:this.tire2_x,y:this.tire2_y}).ease(motion_easing_Quad.easeOut).delay(.25);engine_tweens_Actuator.tween(this.tire3,1,{x:this.tire3_x,y:this.tire3_y}).ease(motion_easing_Quad.easeOut).delay(.5);engine_tweens_Actuator.tween(this.star1,1,{x:this.star1_x,y:this.star1_y}).ease(motion_easing_Quad.easeOut).delay(.8);engine_tweens_Actuator.tween(this.star2,1,{x:this.star2_x,y:this.star2_y}).ease(motion_easing_Quad.easeOut).delay(1);engine_tweens_Actuator.tween(this.star3,1,{x:this.star3_x,y:this.star3_y}).ease(motion_easing_Quad.easeOut).delay(1.2);engine_tweens_Actuator.tween(this.grizzly,1,{x:this.grizzly_x,y:this.grizzly_y}).ease(motion_easing_Quad.easeOut).delay(1.25);engine_tweens_Actuator.tween(this.panda,1,{x:this.panda_x,y:this.panda_y}).ease(motion_easing_Quad.easeOut).delay(1.5);engine_tweens_Actuator.tween(this.iceberg,1,{x:this.iceberg_x,y:this.iceberg_y}).ease(motion_easing_Quad.easeOut).delay(1.75);engine_tweens_Actuator.tween(this.board,1,{y:this.board_y}).ease(motion_easing_Bounce.easeOut).delay(2);engine_tweens_Actuator.tween(this.backContainer,1,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeOut).delay(2.5);engine_soundlib_SoundList.FX(36,.25);engine_soundlib_SoundList.FX(36,.5);engine_soundlib_SoundList.FX(36,.75);engine_soundlib_SoundList.playVoice(64,1.6);engine_soundlib_SoundList.playVoice(69,1.7);engine_soundlib_SoundList.FX(16,1.25);engine_soundlib_SoundList.FX(16,1.5);engine_soundlib_SoundList.FX(16,1.75);engine_soundlib_SoundList.FX(50,1.8);engine_soundlib_SoundList.FX(51,2);engine_soundlib_SoundList.FX(52,2.25);engine_tweens_Actuator.timer(1.25).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire1,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire1,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})});engine_tweens_Actuator.timer(1.5).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire2,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire2,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})});engine_tweens_Actuator.timer(1.75).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire3,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire3,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})});engine_tweens_Actuator.timer(1.8).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star1,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star1,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})});engine_tweens_Actuator.timer(2).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star2,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star2,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})});engine_tweens_Actuator.timer(2.2).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star3,.1,{scaleX:1.1,scaleY:1.1},false).ease(motion_easing_Quad.easeOut).onComplete(function(){engine_tweens_Actuator.tween(_gthis.star3,.1,{scaleX:1,scaleY:1},false).ease(motion_easing_Quad.easeIn)})})},getOut:function(){engine_tweens_Actuator.tween(this.grizzly,1,{x:this.grizzly_x,y:this.grizzly_y+500}).ease(motion_easing_Quad.easeIn).delay(.75);engine_tweens_Actuator.tween(this.panda,1,{x:this.panda_x,y:this.panda_y+500}).ease(motion_easing_Quad.easeIn).delay(.5);engine_tweens_Actuator.tween(this.iceberg,1,{x:this.iceberg_x,y:this.iceberg_y+500}).ease(motion_easing_Quad.easeIn).delay(.25);engine_tweens_Actuator.tween(this.board,1,{y:this.board_y-500}).ease(motion_easing_Bounce.easeIn).delay(1);engine_tweens_Actuator.tween(this.backContainer,.25,{scaleX:0,scaleY:0}).ease(motion_easing_Quad.easeIn);this.backContainer.mouseChildren=false;engine_tweens_Actuator.tween(this.tire1,.5,{x:this.tire1_x,y:this.tire1_y+600}).ease(motion_easing_Quad.easeIn).delay(1.5);engine_tweens_Actuator.tween(this.tire2,.5,{x:this.tire2_x,y:this.tire2_y+600}).ease(motion_easing_Quad.easeIn).delay(1.75);engine_tweens_Actuator.tween(this.tire3,.5,{x:this.tire3_x,y:this.tire3_y+600}).ease(motion_easing_Quad.easeIn).delay(2);engine_tweens_Actuator.tween(this.star1,1,{x:this.star1_x,y:this.star1_y+600}).ease(motion_easing_Quad.easeIn).delay(1);engine_tweens_Actuator.tween(this.star2,1,{x:this.star2_x,y:this.star2_y+600}).ease(motion_easing_Quad.easeIn).delay(1.2);engine_tweens_Actuator.tween(this.star3,1,{x:this.star3_x,y:this.star3_y+600}).ease(motion_easing_Quad.easeIn).delay(1.4);engine_soundlib_SoundList.FX(9,1)},onBackPressed:function(){if(this.backPressed!=null){this.backPressed()}},__class__:project_menu_Ending});var project_menu_LevelButton=function(lvlnumber,btnstate){this.state=0;engine_button_Button.call(this,0,0,$bind(this,this.onPress),true,30);this.number=lvlnumber;this.state=btnstate;var buttonSheet=new engine_mapsheet_Mapsheet(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_level.png"));buttonSheet.slice(3,2);buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+2,[2]));buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+3,[3]));buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+4,[4]));buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+5,[5]));buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+1,[1]));buttonSheet.addBehavior(new engine_mapsheet_data_Behavior(""+0,[0]));this.animatedButton=new engine_mapsheet_Animation(buttonSheet,true);this.animatedButton.showBehavior(""+this.state);this.animatedButton.update(1);this.animatedButton.set_x(-this.animatedButton.get_width()/2);this.animatedButton.set_y(-this.animatedButton.get_height()/2);this.addChildAt(this.animatedButton,0);var lbl;if(this.state==0){lbl=new engine_text_Label(""+lvlnumber,new openfl_text_TextFormat("Cooper Black",30,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);lbl.set_x(55);lbl.set_y(52)}else if(this.state==1){lbl=new engine_text_Label(""+lvlnumber,new openfl_text_TextFormat("Cooper Black",30,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);lbl.set_x(55);lbl.set_y(52)}else{lbl=new engine_text_Label(""+lvlnumber,new openfl_text_TextFormat("Cooper Black",30,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);lbl.set_x(55);lbl.set_y(57)}this.animatedButton.addChild(lbl)};$hxClasses["project.menu.LevelButton"]=project_menu_LevelButton;project_menu_LevelButton.__name__="project.menu.LevelButton";project_menu_LevelButton.__super__=engine_button_Button;project_menu_LevelButton.prototype=$extend(engine_button_Button.prototype,{animatedButton:null,number:null,buttonPressed:null,state:null,onPress:function(){if(this.buttonPressed!=null&&this.state!=0){this.buttonPressed(this.number);engine_soundlib_SoundList.FX(3)}},__class__:project_menu_LevelButton});var project_menu_LevelSelector=function(levelSelected){this.back_y=560;this.back_x=40;this.buttonPressed=false;openfl_display_Sprite.call(this);this.backContainer=new openfl_display_Sprite;this.roadmap=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/levelselect_buttonsback.png"),5);this.addChild(this.roadmap);this.roadmap.set_x(400);this.roadmap.set_y(300);this.buttonBackground=new openfl_display_Sprite;this.buttonBackground.set_x(400);this.buttonBackground.set_y(320);this.addChild(this.buttonBackground);var bmp=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/levelselect_buttonsback.png"),5);this.buttonBackground.addChild(bmp);bmp.set_y(bmp.get_y()-20);bmp.set_visible(false);this.levelList=[];this.updateData(levelSelected);this.bears=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/selector_bears.png"),5,null,true);this.bears.set_x(400);this.bears.set_y(600-this.bears.get_height()/2);this.addChild(this.bears);this.selectText=new engine_text_Label(project_locale_L10N_$CN.getText("LEVEL_SELECT"),new openfl_text_TextFormat("Cooper Black",24,16777215,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5);this.selectText.set_x(400);this.selectText.set_y(80);this.addChild(this.selectText);var backButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_small_bg.png"),5,null,true);var backButton=new engine_button_ImageButton("img/menu/buttons/btn_back.png",true,0,0,$bind(this,this.onBackPressed),false);this.backContainer.set_x(800-this.backContainer.get_width()/2);this.backContainer.set_y(600-this.backContainer.get_height()/2);this.backContainer.addChild(backButtonBackground);this.backContainer.addChild(backButton);this.addChild(this.backContainer);this.backContainer.set_x(this.back_x);this.backContainer.set_y(this.back_y);this.set_visible(false)};$hxClasses["project.menu.LevelSelector"]=project_menu_LevelSelector;project_menu_LevelSelector.__name__="project.menu.LevelSelector";project_menu_LevelSelector.__interfaces__=[engine_updateable_IUpdateable];project_menu_LevelSelector.__super__=openfl_display_Sprite;project_menu_LevelSelector.prototype=$extend(openfl_display_Sprite.prototype,{levelList:null,buttonBackground:null,backContainer:null,bears:null,backPressed:null,buttonPressed:null,selectText:null,roadmap:null,updateData:function(levelSelected){if(this.buttonPressed){return}this.buttonPressed=true;var ox=75-this.buttonBackground.get_width()/2;var oy=55-this.buttonBackground.get_height()/2;var data=project_data_UserData.getData();var _g=0;while(_g<18){var i=_g++;var lb=new project_menu_LevelButton(i+1,data.levels[i].state);this.levelList.push(lb);this.buttonBackground.addChild(lb);lb.set_x(ox+(i<6||i>11?110*(i%6):550-110*(i%6)));lb.set_y(oy+110*(i/6|0));lb.buttonPressed=levelSelected}},back_x:null,back_y:null,spawn:function(){this.buttonBackground.set_x(400);this.set_visible(true);this.buttonPressed=false},getIn:function(){this.backContainer.set_x(this.back_x+1e3);this.buttonBackground.set_x(1400);this.roadmap.set_x(1350);this.selectText.set_x(1200);this.bears.set_x(1200);engine_tweens_Actuator.tween(this.buttonBackground,1,{x:400}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.backContainer,1,{x:this.back_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.selectText,1,{x:400}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.bears,1,{x:400}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.roadmap,1,{x:400}).ease(motion_easing_Quad.easeOut);this.set_visible(true);this.buttonPressed=false},getOut:function(){engine_tweens_Actuator.tween(this.backContainer,1,{x:this.back_x+1e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.buttonBackground,1,{x:1400}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.selectText,1,{x:1200}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.bears,1,{x:1200}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.roadmap,1,{x:1350}).ease(motion_easing_Quad.easeOut);this.buttonPressed=true},update:function(dt){},onBackPressed:function(){if(this.backPressed!=null){this.backPressed();engine_soundlib_SoundList.FX(2)}},__class__:project_menu_LevelSelector});var project_menu_MainMenu=function(){this.intro=false;this.wbb_y=600;this.wbb_x=400;this.box3_y=500;this.box3_x=585;this.box2_y=515;this.box2_x=275;this.box1_y=145;this.box1_x=520;this.flag_y=400;this.flag_x=665;this.play_y=500;this.play_x=700;this.credits_y=560;this.credits_x=40;this.iceberg_y=175;this.iceberg_x=650;this.grizzly_y=325;this.grizzly_x=450;this.panda_y=385;this.panda_x=155;this.logo_y=120;this.logo_x=280;openfl_display_Sprite.call(this);this.playContainer=new openfl_display_Sprite;this.creditsContainer=new openfl_display_Sprite;this.soundContainer=new openfl_display_Sprite;this.logoContainer=new openfl_display_Sprite;var playButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_play_bg.png"),5,null,true);var playButton=new engine_button_ImageButton("img/menu/buttons/btn_play.png",true,0,0,$bind(this,this.onPlayPressed),false);playButtonBackground.set_x(playButton.get_x());playButtonBackground.set_y(playButton.get_y());this.playContainer.addChild(playButtonBackground);this.playContainer.addChild(playButton);this.addChild(this.playContainer);this.playContainer.set_x(800-this.playContainer.get_width()/2);this.playContainer.set_y(600-this.playContainer.get_height()/2);var logo=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/logo.png"),5,null,true);this.logoContainer.addChild(logo);this.grizzly=new openfl_display_Sprite;var grizzlyImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/main_menu_grizzly.png"),5,null,true);this.grizzly.addChild(grizzlyImg);this.iceberg=new openfl_display_Sprite;var icebergImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/main_menu_polar.png"),5,null,true);this.iceberg.addChild(icebergImg);this.panda=new openfl_display_Sprite;var pandaImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/main_menu_panda.png"),5,null,true);this.panda.addChild(pandaImg);this.credits=new openfl_display_Sprite;var creditsImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/credits.png"),5,null,true);this.credits.addChild(creditsImg);this.wbb=new openfl_display_Sprite;var wbbImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/intro_logo_WBB.png"),2,null,true);this.wbb.addChild(wbbImg);this.wbb.set_x(400);this.wbb.set_y(600);this.flag=new openfl_display_Sprite;this.flagSheet=project_game_util_GameTiles.OBJECT_INTROFLAG;this.flagImg=new engine_mapsheet_Animation(this.flagSheet,true);this.flagSheet.addBehavior(new engine_mapsheet_data_Behavior("idle",[3,2,1,0],true,12));this.flagImg.showBehavior("idle");this.flagImg.update(1);this.flagImg.set_x(-125);this.flagImg.set_y(-215);this.flag.addChild(this.flagImg);this.box1=new openfl_display_Sprite;var box1Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/intro_box1.png"),5,null,true);this.box1.addChild(box1Img);this.box2=new openfl_display_Sprite;var box2Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/intro_box2.png"),5,null,true);this.box2.addChild(box2Img);this.box3=new openfl_display_Sprite;var box3Img=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/intro_box3.png"),5,null,true);this.box3.addChild(box3Img);this.addChild(this.box1);this.addChild(this.box2);this.addChild(this.box3);this.addChild(this.playContainer);this.addChild(this.logoContainer);this.addChild(this.iceberg);this.addChild(this.panda);this.addChild(this.grizzly);this.addChild(this.flag);this.addChild(this.wbb);this.addChild(this.credits);this.flag.mouseEnabled=false;this.flag.mouseChildren=false;var soundButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_small_bg.png"),5,null,true);this.soundButton=new engine_button_MuteButton(false);this.soundContainer.set_x(800-this.soundContainer.get_width()/2);this.soundContainer.set_y(600-this.soundContainer.get_height()/2);this.soundContainer.addChild(soundButtonBackground);this.soundContainer.addChild(this.soundButton);this.soundContainer.set_x(760);this.soundContainer.set_y(40);this.addEventListener("enterFrame",$bind(this,this.addSoundButton));var creditsButtonBackground=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/buttons/btn_small_bg.png"),5,null,true);var creditsButton=new engine_button_ImageButton("img/menu/buttons/btn_credits.png",true,0,0,$bind(this,this.onCreditsPressed),false);this.creditsContainer.set_x(800-this.creditsContainer.get_width()/2);this.creditsContainer.set_y(600-this.creditsContainer.get_height()/2);this.creditsContainer.addChild(creditsButtonBackground);this.creditsContainer.addChild(creditsButton);this.creditsContainer.addChild(this.credits);this.addChild(this.creditsContainer);this.creditsContainer.set_x(this.credits_x);this.creditsContainer.set_y(this.credits_y);this.credits.set_x(-this.credits.get_width());this.credits.set_y(0);this.creditsContainer.addEventListener("mouseOut",$bind(this,this.onCreditsOut));this.creditsContainer.addEventListener("mouseOver",$bind(this,this.onCreditsOver));var prodText=new engine_text_Label(project_locale_L10N_$CN.getText("PRODUCED"),new openfl_text_TextFormat("Cooper Black",10,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),6);prodText.set_x(-165);prodText.set_y(0);var devText=new engine_text_Label(project_locale_L10N_$CN.getText("DEVELOPED"),new openfl_text_TextFormat("Cooper Black",10,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),6);devText.set_x(137);devText.set_y(0);this.credits.addChild(devText);this.credits.addChild(prodText)};$hxClasses["project.menu.MainMenu"]=project_menu_MainMenu;project_menu_MainMenu.__name__="project.menu.MainMenu";project_menu_MainMenu.__interfaces__=[engine_updateable_IUpdateable];project_menu_MainMenu.__super__=openfl_display_Sprite;project_menu_MainMenu.prototype=$extend(openfl_display_Sprite.prototype,{playContainer:null,soundContainer:null,creditsContainer:null,logoContainer:null,credits:null,grizzly:null,iceberg:null,panda:null,box1:null,box2:null,box3:null,flag:null,wbb:null,playPressed:null,soundButton:null,flagImg:null,flagSheet:null,addSoundButton:function(e){this.parent.addChild(this.soundContainer);this.removeEventListener("enterFrame",$bind(this,this.addSoundButton))},update:function(dt){this.flagImg.update(dt)},onPlayPressed:function(){if(this.playPressed!=null){engine_soundlib_SoundList.FX(3);this.playPressed()}},onCreditsPressed:function(){engine_tweens_Actuator.tween(this.credits,.5,{x:this.creditsContainer.get_x()+this.credits.get_width()/2-80}).ease(motion_easing_Quad.easeOut)},onCreditsOver:function(e){engine_tweens_Actuator.tween(this.credits,.5,{x:this.creditsContainer.get_x()+this.credits.get_width()/2-80}).ease(motion_easing_Quad.easeOut);engine_soundlib_SoundList.FX(1,0,false)},onCreditsOut:function(e){engine_tweens_Actuator.tween(this.credits,.5,{x:-this.credits.get_width()/2-50}).ease(motion_easing_Quad.easeOut);engine_soundlib_SoundList.FX(2,0,false)},logo_x:null,logo_y:null,panda_x:null,panda_y:null,grizzly_x:null,grizzly_y:null,iceberg_x:null,iceberg_y:null,credits_x:null,credits_y:null,play_x:null,play_y:null,flag_x:null,flag_y:null,box1_x:null,box1_y:null,box2_x:null,box2_y:null,box3_x:null,box3_y:null,wbb_x:null,wbb_y:null,spawn:function(){this.set_visible(true);this.soundButton.update(0);this.playContainer.set_scaleX(0);this.playContainer.set_scaleY(0);this.soundContainer.set_scaleX(0);this.soundContainer.set_scaleY(0);this.creditsContainer.set_scaleX(0);this.creditsContainer.set_scaleY(0);this.soundContainer.set_visible(true);this.logoContainer.set_x(this.logo_x);this.logoContainer.set_y(this.logo_y-500);this.panda.set_x(this.panda_x-500);this.panda.set_y(this.panda_y);this.grizzly.set_x(this.grizzly_x);this.grizzly.set_y(this.grizzly_y+750);this.iceberg.set_x(this.iceberg_x+500);this.iceberg.set_y(this.iceberg_y+500);this.flag.set_x(this.flag_x);this.flag.set_y(this.flag_y+500);this.box1.set_x(this.box1_x+350);this.box1.set_y(this.box1_y-500);this.box2.set_x(this.box2_x-350);this.box2.set_y(this.box2_y+500);this.box3.set_x(this.box3_x+500);this.box3.set_y(this.box3_y+500);this.wbb.set_x(this.wbb_x);this.wbb.set_y(this.wbb_y+this.wbb.get_height());this.creditsContainer.set_x(this.credits_x);this.creditsContainer.set_y(this.credits_y);engine_tweens_Actuator.tween(this.panda,1,{x:this.panda_x,y:this.panda_y}).ease(motion_easing_Quad.easeOut).delay(.25);engine_tweens_Actuator.tween(this.grizzly,1,{x:this.grizzly_x,y:this.grizzly_y}).ease(motion_easing_Quad.easeOut).delay(.5);engine_tweens_Actuator.tween(this.iceberg,1,{x:this.iceberg_x,y:this.iceberg_y}).ease(motion_easing_Quad.easeOut).delay(.75);engine_tweens_Actuator.tween(this.logoContainer,1,{y:this.logo_y}).ease(motion_easing_Bounce.easeOut).delay(1);engine_tweens_Actuator.tween(this.wbb,1,{y:this.wbb_y}).ease(motion_easing_Quad.easeOut).delay(1);engine_tweens_Actuator.tween(this.playContainer,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(1.75);engine_tweens_Actuator.tween(this.creditsContainer,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(1.75);engine_tweens_Actuator.tween(this.soundContainer,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Quad.easeOut).delay(1.75);engine_tweens_Actuator.tween(this.flag,.75,{x:this.flag_x,y:this.flag_y}).ease(motion_easing_Quad.easeOut).delay(1);engine_tweens_Actuator.tween(this.box1,.75,{x:this.box1_x,y:this.box1_y}).ease(motion_easing_Quad.easeOut).delay(.85);engine_tweens_Actuator.tween(this.box2,.75,{x:this.box2_x,y:this.box2_y}).ease(motion_easing_Quad.easeOut).delay(.65);engine_tweens_Actuator.tween(this.box3,.75,{x:this.box3_x,y:this.box3_y}).ease(motion_easing_Quad.easeOut).delay(.35);engine_tweens_Actuator.timer(1.75).onComplete($bind(this,this.introDone));engine_soundlib_SoundLib.stop("audio/music/BouncyCubs.mp3");engine_soundlib_SoundLib.playMusic("audio/music/BouncyCubs.mp3",0,999999)},getIn:function(){this.set_visible(true);this.soundButton.update(0);this.playContainer.set_scaleX(1);this.playContainer.set_scaleY(1);this.creditsContainer.set_scaleX(1);this.creditsContainer.set_scaleY(1);this.grizzly.set_x(this.grizzly_x-1e3-600);this.grizzly.set_y(this.grizzly_y);this.panda.set_x(this.panda_x-1e3-400);this.panda.set_y(this.panda_y);this.iceberg.set_x(this.iceberg_x-1e3-200);this.iceberg.set_y(this.iceberg_y);this.logoContainer.set_x(this.logo_x-1e3);this.logoContainer.set_y(this.logo_y);this.creditsContainer.set_x(this.credits_x-1e3);this.creditsContainer.set_y(this.credits_y);this.wbb.set_x(this.wbb_x-2e3);this.wbb.set_y(this.wbb_y);this.playContainer.set_x(this.play_x-1e3);this.playContainer.set_y(this.play_y);this.flag.set_x(this.flag_x-2e3);this.flag.set_y(this.flag_y);this.box1.set_x(this.box1_x-900);this.box1.set_y(this.box1_y);this.box2.set_x(this.box2_x-900);this.box2.set_y(this.box2_y);this.box3.set_x(this.box3_x-900);this.box3.set_y(this.box3_y);engine_tweens_Actuator.tween(this.grizzly,1,{x:this.grizzly_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.panda,1,{x:this.panda_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.iceberg,1,{x:this.iceberg_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.logoContainer,1,{x:this.logo_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.wbb,1,{x:this.wbb_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.creditsContainer,1,{x:this.credits_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.playContainer,1,{x:this.play_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.flag,1,{x:this.flag_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box1,1,{x:this.box1_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box2,1,{x:this.box2_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box3,1,{x:this.box3_x}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.timer(1).onComplete($bind(this,this.introDone))},getOut:function(){engine_tweens_Actuator.tween(this.grizzly,1,{x:this.grizzly_x-1e3-600}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.panda,1,{x:this.panda_x-1e3-400}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.iceberg,1,{x:this.iceberg_x-1e3-200}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.logoContainer,1,{x:this.logo_x-1e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.creditsContainer,1,{x:this.creditsContainer.get_x()-1e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.playContainer,1,{x:this.play_x-1e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.flag,1,{x:this.flag_x-2e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.wbb,1,{x:this.wbb_x-2e3}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box1,1,{x:this.box1_x-900}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box2,1,{x:this.box2_x-900}).ease(motion_easing_Quad.easeOut);engine_tweens_Actuator.tween(this.box3,1,{x:this.box3_x-900}).ease(motion_easing_Quad.easeOut)},intro:null,introDone:function(){if(!this.intro){this.intro=true;engine_tweens_Actuator.tween(this.panda,.8,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat();engine_tweens_Actuator.tween(this.grizzly,.9,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat();engine_tweens_Actuator.tween(this.iceberg,1,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat();engine_tweens_Actuator.tween(this.box1,1.1,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat();engine_tweens_Actuator.tween(this.box2,1.2,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat();engine_tweens_Actuator.tween(this.box3,1.3,{rotation:5}).ease(motion_easing_Quad.easeInOut).reflect().repeat()}},__class__:project_menu_MainMenu});var project_menu_Menu=function(state){if(state==null){state="default"}this.aux=0;this.loadingLevel=false;openfl_display_Sprite.call(this);var bmp=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/background_home.png"),5);this.background=new openfl_display_Sprite;this.background.addChild(bmp);this.background.set_x(500);this.background.set_y(300);this.addChild(this.background);var bmp2=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/background_home_shine.png"),5);this.shine=new openfl_display_Sprite;this.shine.addChild(bmp2);this.shine.set_x(400);this.shine.set_y(300);this.addChild(this.shine);this.mainMenu=new project_menu_MainMenu;this.mainMenu.playPressed=$bind(this,this.goLevelSelector);this.addChild(this.mainMenu);this.mainMenu.set_visible(false);this.levelSelector=new project_menu_LevelSelector($bind(this,this.goLevel));this.levelSelector.backPressed=$bind(this,this.goMainMenu);this.addChild(this.levelSelector);this.ending=new project_menu_Ending;this.ending.backPressed=$bind(this,this.exitEnding);this.addChild(this.ending);if(state=="selector"){this.mainMenu.getOut();this.levelSelector.spawn()}else if(state=="ending"){this.ending.spawn();this.mainMenu.soundContainer.set_visible(false)}else{this.mainMenu.spawn();this.levelSelector.getOut()}};$hxClasses["project.menu.Menu"]=project_menu_Menu;project_menu_Menu.__name__="project.menu.Menu";project_menu_Menu.__interfaces__=[engine_responsive_IResizable,engine_updateable_IUpdateable];project_menu_Menu.__super__=openfl_display_Sprite;project_menu_Menu.prototype=$extend(openfl_display_Sprite.prototype,{background:null,shine:null,mainMenu:null,levelSelector:null,ending:null,loadingLevel:null,aux:null,update:function(dt){this.aux+=dt;if(this.aux>=250){var _g=this.shine;_g.set_scaleX(_g.get_scaleX()*-1);this.aux=0}this.mainMenu.update(dt)},goLevelSelector:function(){this.mainMenu.getOut();this.levelSelector.getIn();engine_tweens_Actuator.tween(this.background,1,{x:300}).ease(motion_easing_Quad.easeOut)},goMainMenu:function(){this.levelSelector.getOut();this.mainMenu.getIn();engine_tweens_Actuator.tween(this.background,1,{x:500}).ease(motion_easing_Quad.easeOut)},exitEnding:function(){var _gthis=this;this.ending.getOut();engine_tweens_Actuator.timer(2).onComplete(function(){_gthis.mainMenu.spawn()})},goLevel:function(levelNumber){if(!this.loadingLevel){this.loadingLevel=true;engine_scenemanager_Manager.changeScene(project_scenes_GameScene,[levelNumber],project_transitions_DoorsTransition)}},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},destroy:function(){engine_tweens_Actuator.stop(haxe_ds_Either.Right("menu"))},__class__:project_menu_Menu});var project_scenes_DisclaimerScene=function(){openfl_display_Sprite.call(this);this.get_graphics().beginFill(0);this.get_graphics().drawRect(0,0,engine_scenemanager_Manager.SCREEN_WIDTH,engine_scenemanager_Manager.SCREEN_HEIGHT);openfl_Lib.get_current().stage.addEventListener("click",$bind(this,this.playAnimation));this.bar=new engine_image_Image(openfl_utils_Assets.getBitmapData("assets/preloader/bar.png"),5,null,true);this.addChild(this.bar);this.bar.set_x(engine_scenemanager_Manager.SCREEN_WIDTH/2);this.bar.set_y(engine_scenemanager_Manager.SCREEN_HEIGHT/2+5);var myLang="";switch(project_locale_L10N_$CN.get_langSelected()){case"es":case"es-419":myLang="assets/preloader/loadingAR.png";break;case"pt":case"pt-br":myLang="assets/preloader/loadingBR.png";break;default:myLang="assets/preloader/loadingUS.png"}this.bg=new engine_image_Image(openfl_utils_Assets.getBitmapData(myLang),5,null,true);this.addChild(this.bg);this.bg.set_x(engine_scenemanager_Manager.SCREEN_WIDTH/2);this.bg.set_y(engine_scenemanager_Manager.SCREEN_HEIGHT/2);this.fully=new engine_image_Image(openfl_utils_Assets.getBitmapData("assets/preloader/fully_loaded.png"),5,null,true);if(Main.isMobile){this.startText=new engine_text_Label(project_locale_L10N_$CN.getText("START_MOBILE"),new openfl_text_TextFormat("Cooper Black",20,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5)}else{this.startText=new engine_text_Label(project_locale_L10N_$CN.getText("START_PC"),new openfl_text_TextFormat("Cooper Black",20,0,true,null,null,openfl_text__$TextFormatAlign_TextFormatAlign_$Impl_$.toString(0)),5)}this.container=new openfl_display_Sprite;this.container.addChild(this.fully);this.container.addChild(this.startText);this.addChild(this.container);this.container.set_x(engine_scenemanager_Manager.SCREEN_WIDTH/2);this.container.set_y(engine_scenemanager_Manager.SCREEN_HEIGHT/2+this.container.get_height()/2);this.container.set_scaleX(0);this.container.set_scaleY(0);engine_tweens_Actuator.tween(this.container,.5,{scaleX:1,scaleY:1}).ease(motion_easing_Bounce.easeInOut)};$hxClasses["project.scenes.DisclaimerScene"]=project_scenes_DisclaimerScene;project_scenes_DisclaimerScene.__name__="project.scenes.DisclaimerScene";project_scenes_DisclaimerScene.__interfaces__=[engine_scenemanager_IScene];project_scenes_DisclaimerScene.__super__=openfl_display_Sprite;project_scenes_DisclaimerScene.prototype=$extend(openfl_display_Sprite.prototype,{CN:null,startText:null,bar:null,bg:null,fully:null,container:null,playAnimation:function(e){var _gthis=this;this.removeChild(this.container);this.removeChild(this.bar);this.removeChild(this.bg);openfl_Lib.get_current().stage.removeEventListener("click",$bind(this,this.playAnimation));motion_Actuate.timer(6).onComplete($bind(this,this.goMenu));motion_Actuate.timer(.3).onComplete(function(){_gthis.CN=openfl_utils_Assets.getMovieClip("Preloader2015:");_gthis.CN.set_cacheAsBitmap(false);_gthis.CN.set_scaleX(_gthis.CN.set_scaleY(engine_scenemanager_Manager.SCREEN_HEIGHT/_gthis.CN.get_height()));_gthis.CN.set_x((engine_scenemanager_Manager.SCREEN_WIDTH-_gthis.CN.get_width())/2);_gthis.addChild(_gthis.CN);engine_soundlib_SoundLib.playMusic("audio/music/CNintro.mp3")})},goMenu:function(){engine_soundlib_SoundLib.stop("audio/music/CNintro.mp3");engine_scenemanager_Manager.changeScene(project_scenes_StoryScene,null,engine_scenemanager_transitions_FadeColorTransition,[0,.5,.5])},onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},update:function(dt){},onResize:function(newW,newH){this.resize()},resize:function(e){if(this.stage!=null){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.max(this.stage.stageWidth/800,this.stage.stageHeight/600)));this.set_x((this.stage.stageWidth-800*this.get_scaleX())/2);this.set_y((this.stage.stageHeight-600*this.get_scaleY())/2)}},pause:function(){},resume:function(){},__class__:project_scenes_DisclaimerScene});var project_scenes_GameScene=function(levelSelected){openfl_display_Sprite.call(this);this.game=new project_game_Game(levelSelected);this.addChild(this.game);this.topBar=new project_game_ui_TopBar(levelSelected,this.game.conditions,($_=this.game,$bind($_,$_.pausePressed)));this.addChild(this.game.indicatorTM);this.addChild(this.topBar);this.topBar.set_x(0);this.topBar.set_y(this.topBar.get_height()/2);this.game.shotCB=($_=this.topBar,$bind($_,$_.onShot));this.game.somethingSelected=$bind(this,this.dimStuff);this.gameframe=new openfl_display_Bitmap(openfl_utils_Assets.getBitmapData("img/game/UI/gameframe.png"),null,true);this.addChild(this.gameframe);openfl_Lib.get_current().stage.addEventListener("mouseMove",$bind(this,this.PanicMouseMove),null,-1)};$hxClasses["project.scenes.GameScene"]=project_scenes_GameScene;project_scenes_GameScene.__name__="project.scenes.GameScene";project_scenes_GameScene.__interfaces__=[engine_scenemanager_IScene];project_scenes_GameScene.__super__=openfl_display_Sprite;project_scenes_GameScene.prototype=$extend(openfl_display_Sprite.prototype,{game:null,topBar:null,gameframe:null,PanicMouseMove:function(e){if(this.game.state!=project_game_GameState.PAUSED){if(e.stageX<2||e.stageX>798||e.stageY<2||e.stageY>598){this.dimStuff(false);this.game.cancelAll()}}},dimStuff:function(b){var _gthis=this;engine_tweens_Actuator.tween(this.topBar,.5,{alpha:b?.25:1},false).ease(motion_easing_Linear.get_easeNone()).onComplete(function(){_gthis.topBar.enableButtons(!b);if(!b){_gthis.topBar.updateValue()}})},onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){this.game.state=project_game_GameState.PLAYING},onDestroy:function(navigatingTo){this.game.destroy();openfl_Lib.get_current().stage.removeEventListener("mouseMove",$bind(this,this.PanicMouseMove))},onFocus:function(){},onFocusLost:function(){this.dimStuff(false);this.game.cancelAll();this.game.pausePressed()},update:function(dt){this.game.update(dt)},onResize:function(newW,newH){this.game.onResize(newW,newH);this.topBar.onResize(newW,newH);this.topBar.set_y(this.topBar.get_height()/2)},pause:function(){},resume:function(){},__class__:project_scenes_GameScene});var project_scenes_MenuScene=function(state){if(state==null){state="default"}openfl_display_Sprite.call(this);this.menu=new project_menu_Menu(state);this.addChild(this.menu)};$hxClasses["project.scenes.MenuScene"]=project_scenes_MenuScene;project_scenes_MenuScene.__name__="project.scenes.MenuScene";project_scenes_MenuScene.__interfaces__=[engine_scenemanager_IScene];project_scenes_MenuScene.__super__=openfl_display_Sprite;project_scenes_MenuScene.prototype=$extend(openfl_display_Sprite.prototype,{menu:null,onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){this.menu.destroy()},onFocus:function(){},onFocusLost:function(){},update:function(dt){this.menu.update(dt)},onResize:function(newW,newH){this.menu.onResize(newW,newH)},pause:function(){},resume:function(){},__class__:project_scenes_MenuScene});var project_scenes_StoryScene=function(){openfl_display_Sprite.call(this);this.get_graphics().beginFill(0);this.get_graphics().drawRect(0,0,800,600);this.bears=new openfl_display_Sprite;var bearsImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_bears.png"),5,null,true);this.bears.addChild(bearsImg);this.bears.set_x(400);this.bears.set_y(300);this.faces1=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_faces1.png"),5,null,true);this.bears.addChild(this.faces1);this.faces2=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_faces2.png"),5,null,true);this.bears.addChild(this.faces2);this.faces3=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_faces3.png"),5,null,true);this.bears.addChild(this.faces3);this.eyes_panda=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_faces2_panda.png"),5,null,true);this.bears.addChild(this.eyes_panda);this.eyes_panda.set_x(-70);this.eyes_panda.set_y(-5);this.eyes_grizzly=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_faces2_grizzly.png"),5,null,true);this.bears.addChild(this.eyes_grizzly);this.eyes_grizzly.set_x(0);this.eyes_grizzly.set_y(-10);this.tire=new openfl_display_Sprite;var tireImg=new engine_image_Image(openfl_utils_Assets.getBitmapData("img/menu/preintro_tire.png"),2,null,true);this.tire.addChild(tireImg);this.tire.set_x(400);this.tire.set_y(-600);this.addChild(this.bears);this.addChild(this.tire);this.faces1.set_visible(true);this.faces2.set_visible(false);this.faces3.set_visible(false);this.eyes_panda.set_visible(false);this.eyes_grizzly.set_visible(false);engine_soundlib_SoundList.FX(75);motion_Actuate.timer(1).onComplete($bind(this,this.getIn))};$hxClasses["project.scenes.StoryScene"]=project_scenes_StoryScene;project_scenes_StoryScene.__name__="project.scenes.StoryScene";project_scenes_StoryScene.__interfaces__=[engine_scenemanager_IScene];project_scenes_StoryScene.__super__=openfl_display_Sprite;project_scenes_StoryScene.prototype=$extend(openfl_display_Sprite.prototype,{bears:null,faces1:null,faces2:null,faces3:null,eyes_panda:null,eyes_grizzly:null,tire:null,getIn:function(){var _gthis=this;this.faces1.set_visible(true);engine_tweens_Actuator.tween(this.tire,3,{y:300+this.tire.get_height()/2}).ease(motion_easing_Bounce.easeOut);engine_tweens_Actuator.tween(this.tire,.1,{scaleY:.925},false).ease(motion_easing_Quad.easeOut).delay(1.1).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire,.1,{scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_tweens_Actuator.tween(this.tire,.1,{scaleY:.95},false).ease(motion_easing_Quad.easeOut).delay(2.2).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire,.1,{scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_tweens_Actuator.tween(this.tire,.1,{scaleY:.975},false).ease(motion_easing_Quad.easeOut).delay(2.75).onComplete(function(){engine_tweens_Actuator.tween(_gthis.tire,.1,{scaleY:1},false).ease(motion_easing_Quad.easeIn)});engine_soundlib_SoundList.FX(46,.5);engine_soundlib_SoundList.FX(47,1.1);engine_soundlib_SoundList.FX(47,2.2);engine_soundlib_SoundList.FX(47,2.75);engine_soundlib_SoundList.FX(48,3);engine_soundlib_SoundList.FX(49,4);engine_soundlib_SoundList.playVoice(70,1.1);engine_soundlib_SoundList.playVoice(71,5);engine_soundlib_SoundList.FX(76,5);engine_tweens_Actuator.timer(1).onComplete(function(){_gthis.faces1.set_visible(false);_gthis.faces2.set_visible(true);_gthis.eyes_panda.set_visible(true);_gthis.eyes_grizzly.set_visible(true)});engine_tweens_Actuator.timer(3).onComplete(function(){engine_tweens_Actuator.tween(_gthis.eyes_panda,.5,{x:_gthis.eyes_panda.get_x()+5});engine_tweens_Actuator.tween(_gthis.eyes_grizzly,.5,{x:_gthis.eyes_grizzly.get_x()-5})});engine_tweens_Actuator.timer(4).onComplete(function(){engine_tweens_Actuator.tween(_gthis.eyes_panda,.5,{x:_gthis.eyes_panda.get_x()-5});engine_tweens_Actuator.tween(_gthis.eyes_grizzly,.5,{x:_gthis.eyes_grizzly.get_x()+5})});engine_tweens_Actuator.timer(5).onComplete(function(){_gthis.faces2.set_visible(false);_gthis.eyes_panda.set_visible(false);_gthis.eyes_grizzly.set_visible(false);_gthis.faces3.set_visible(true)});engine_tweens_Actuator.timer(7).onComplete($bind(this,this.goMenu))},goMenu:function(){engine_scenemanager_Manager.changeScene(project_scenes_MenuScene,null,engine_scenemanager_transitions_FadeColorTransition,[0,.5,.5])},onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},update:function(dt){},onResize:function(newW,newH){},pause:function(){},resume:function(){},__class__:project_scenes_StoryScene});var project_transitions_DoorsTransition=function(asset,timeDown,timeUp,waitingTime,easeIn,easeOut){if(waitingTime==null){waitingTime=1}if(timeUp==null){timeUp=1}if(timeDown==null){timeDown=1}this.doors=[];openfl_display_Sprite.call(this);this.waitingTime=waitingTime;this.easeOut=easeOut;this.easeIn=easeIn;this.timeUp=timeUp;this.timeDown=timeDown;this.doors.push(new engine_image_Image(openfl_utils_Assets.getBitmapData("img/transitions/transition-d1.png"),9));this.doors[0].set_x(0);this.addChild(this.doors[0]);this.doors.push(new engine_image_Image(openfl_utils_Assets.getBitmapData("img/transitions/transition-d2.png"),7));this.doors[1].set_x(800);this.addChild(this.doors[1])};$hxClasses["project.transitions.DoorsTransition"]=project_transitions_DoorsTransition;project_transitions_DoorsTransition.__name__="project.transitions.DoorsTransition";project_transitions_DoorsTransition.__interfaces__=[engine_scenemanager_ITransition,engine_scenemanager_IScene];project_transitions_DoorsTransition.__super__=openfl_display_Sprite;project_transitions_DoorsTransition.prototype=$extend(openfl_display_Sprite.prototype,{doors:null,timeDown:null,timeUp:null,easeIn:null,easeOut:null,waitingTime:null,startCovering:function(whenCovered){var _gthis=this;motion_Actuate.tween(this.doors[0],this.timeDown/2,{x:150}).ease(motion_easing_Quad.easeIn).onComplete(function(){motion_Actuate.tween(_gthis.doors[0],_gthis.timeDown/2,{x:400}).ease(motion_easing_Bounce.easeOut)});motion_Actuate.tween(this.doors[1],this.timeDown/2,{x:650}).ease(motion_easing_Quad.easeIn).onComplete(function(){motion_Actuate.tween(_gthis.doors[1],_gthis.timeDown/2,{x:400}).ease(motion_easing_Bounce.easeOut)});motion_Actuate.timer(this.timeDown).onComplete(whenCovered);engine_soundlib_SoundList.FX(43)},startResolving:function(whenResolved){motion_Actuate.timer(this.waitingTime).onComplete(whenResolved)},startUncovering:function(whenUncovered){motion_Actuate.tween(this.doors[0],this.timeUp/2,{x:0}).ease(motion_easing_Quad.easeIn);motion_Actuate.tween(this.doors[1],this.timeUp/2,{x:800}).ease(motion_easing_Quad.easeIn);motion_Actuate.timer(this.timeUp/2).onComplete(whenUncovered);engine_soundlib_SoundList.FX(45);engine_soundlib_SoundList.FX(44)},onPopupOpen:function(popupReference){},onPopupClose:function(popupClass){},onShow:function(){},onDestroy:function(navigatingTo){},onFocus:function(){},onFocusLost:function(){},update:function(dt){},onResize:function(newW,newH){this.set_scaleX(this.set_scaleY(1));this.set_scaleX(this.set_scaleY(Math.min(newW/800,newH/600)));this.set_x((newW-800*this.get_scaleX())/2);this.set_y((newH-600*this.get_scaleY())/2)},pause:function(){},resume:function(){},__class__:project_transitions_DoorsTransition});var zpp_$nape_callbacks_ZPP_$Callback=function(){this.constraint=null;this.body=null;this.pre_swapped=false;this.pre_arbiter=null;this.wrap_arbiters=null;this.set=null;this.int2=null;this.int1=null;this.length=0;this.prev=null;this.next=null;this.listener=null;this.event=0;this.outer_int=null;this.outer_con=null;this.outer_body=null;this.length=0};$hxClasses["zpp_nape.callbacks.ZPP_Callback"]=zpp_$nape_callbacks_ZPP_$Callback;zpp_$nape_callbacks_ZPP_$Callback.__name__="zpp_nape.callbacks.ZPP_Callback";zpp_$nape_callbacks_ZPP_$Callback.prototype={outer_body:null,outer_con:null,outer_int:null,wrapper_body:function(){if(this.outer_body==null){this.outer_body=new nape_callbacks_BodyCallback;this.outer_body.zpp_inner=this}return this.outer_body},wrapper_con:function(){if(this.outer_con==null){this.outer_con=new nape_callbacks_ConstraintCallback;this.outer_con.zpp_inner=this}return this.outer_con},wrapper_int:function(){if(this.outer_int==null){this.outer_int=new nape_callbacks_InteractionCallback;this.outer_int.zpp_inner=this}if(this.wrap_arbiters==null){this.wrap_arbiters=zpp_$nape_util_ZPP_$ArbiterList.get(this.set.arbiters,true)}else{this.wrap_arbiters.zpp_inner.inner=this.set.arbiters}this.wrap_arbiters.zpp_inner.zip_length=true;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},event:null,listener:null,next:null,prev:null,length:null,push:function(obj){if(this.prev!=null){this.prev.next=obj}else{this.next=obj}obj.prev=this.prev;obj.next=null;this.prev=obj;this.length++},pop:function(){var ret=this.next;this.next=ret.next;if(this.next==null){this.prev=null}else{this.next.prev=null}this.length--;return ret},empty:function(){return this.next==null},int1:null,int2:null,set:null,wrap_arbiters:null,pre_arbiter:null,pre_swapped:null,body:null,constraint:null,__class__:zpp_$nape_callbacks_ZPP_$Callback};var zpp_$nape_callbacks_ZPP_$CbSet=function(){this.constraints=null;this.interactors=null;this.zip_conlisteners=false;this.conlisteners=null;this.zip_bodylisteners=false;this.bodylisteners=null;this.zip_listeners=false;this.listeners=null;this.cbpairs=null;this.manager=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType;this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener;this.zip_listeners=true;this.bodylisteners=new zpp_$nape_util_ZNPList_$ZPP_$BodyListener;this.zip_bodylisteners=true;this.conlisteners=new zpp_$nape_util_ZNPList_$ZPP_$ConstraintListener;this.zip_conlisteners=true;this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;this.id=zpp_$nape_ZPP_$ID.CbSet();this.cbpairs=new zpp_$nape_util_ZNPList_$ZPP_$CbSetPair};$hxClasses["zpp_nape.callbacks.ZPP_CbSet"]=zpp_$nape_callbacks_ZPP_$CbSet;zpp_$nape_callbacks_ZPP_$CbSet.__name__="zpp_nape.callbacks.ZPP_CbSet";zpp_$nape_callbacks_ZPP_$CbSet.setlt=function(a,b){var i=a.cbTypes.head;var j=b.cbTypes.head;while(i!=null&&j!=null){var ca=i.elt;var cb=j.elt;if(ca.id<cb.id){return true}if(cb.id<ca.id){return false}else{i=i.next;j=j.next}}if(j!=null){return i==null}else{return false}};zpp_$nape_callbacks_ZPP_$CbSet.get=function(cbTypes){var ret;if(zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool==null){ret=new zpp_$nape_callbacks_ZPP_$CbSet}else{ret=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=ret.next;ret.next=null}var ite=null;var cx_ite=cbTypes.head;while(cx_ite!=null){var cb=cx_ite.elt;ite=ret.cbTypes.insert(ite,cb);cb.cbsets.add(ret);cx_ite=cx_ite.next}return ret};zpp_$nape_callbacks_ZPP_$CbSet.single_intersection=function(a,b,i){var ret=null;var cx_ite=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;while(cx_ite!=null){var p=cx_ite.elt;if(p.a==a&&p.b==b||p.a==b&&p.b==a){ret=p;break}cx_ite=cx_ite.next}if(ret==null){var ret1;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret1=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret1=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret1.next;ret1.next=null}ret1.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a,b)){ret1.a=a;ret1.b=b}else{ret1.a=b;ret1.b=a}ret=ret1;a.cbpairs.add(ret);if(b!=a){b.cbpairs.add(ret)}}if(ret.zip_listeners){ret.zip_listeners=false;ret.__validate()}var ite=ret.listeners.head;if(ite!=null&&ite.elt==i){return ite.next==null}else{return false}};zpp_$nape_callbacks_ZPP_$CbSet.prototype={cbTypes:null,count:null,next:null,id:null,manager:null,cbpairs:null,invalidate_pairs:function(){var cx_ite=this.cbpairs.head;while(cx_ite!=null){cx_ite.elt.zip_listeners=true;cx_ite=cx_ite.next}},listeners:null,zip_listeners:null,realvalidate_listeners:function(){this.listeners.clear();var cx_ite=this.cbTypes.head;while(cx_ite!=null){var npre=null;var nite=this.listeners.head;var cite=cx_ite.elt.listeners.head;while(cite!=null){var cx=cite.elt;if(nite!=null&&nite.elt==cx){cite=cite.next;npre=nite;nite=nite.next}else{var tmp;if(nite!=null){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else{tmp=true}if(tmp){if(cx.space==this.manager.space){var _this=this.listeners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret.next;ret.next=null}ret.elt=cx;var temp=ret;if(npre==null){temp.next=_this.head;_this.head=temp}else{temp.next=npre.next;npre.next=temp}_this.pushmod=_this.modified=true;_this.length++;npre=temp}cite=cite.next}else{npre=nite;nite=nite.next}}}cx_ite=cx_ite.next}},bodylisteners:null,zip_bodylisteners:null,realvalidate_bodylisteners:function(){this.bodylisteners.clear();var cx_ite=this.cbTypes.head;while(cx_ite!=null){var npre=null;var nite=this.bodylisteners.head;var cite=cx_ite.elt.bodylisteners.head;while(cite!=null){var cx=cite.elt;if(nite!=null&&nite.elt==cx){cite=cite.next;npre=nite;nite=nite.next}else{var tmp;if(nite!=null){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else{tmp=true}if(tmp){var _this=cx.options;if(!_this.nonemptyintersection(this.cbTypes,_this.excludes)&&cx.space==this.manager.space){var _this1=this.bodylisteners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=ret.next;ret.next=null}ret.elt=cx;var temp=ret;if(npre==null){temp.next=_this1.head;_this1.head=temp}else{temp.next=npre.next;npre.next=temp}_this1.pushmod=_this1.modified=true;_this1.length++;npre=temp}cite=cite.next}else{npre=nite;nite=nite.next}}}cx_ite=cx_ite.next}},conlisteners:null,zip_conlisteners:null,realvalidate_conlisteners:function(){this.conlisteners.clear();var cx_ite=this.cbTypes.head;while(cx_ite!=null){var npre=null;var nite=this.conlisteners.head;var cite=cx_ite.elt.conlisteners.head;while(cite!=null){var cx=cite.elt;if(nite!=null&&nite.elt==cx){cite=cite.next;npre=nite;nite=nite.next}else{var tmp;if(nite!=null){var b=nite.elt;tmp=cx.precedence>b.precedence||cx.precedence==b.precedence&&cx.id>b.id}else{tmp=true}if(tmp){var _this=cx.options;if(!_this.nonemptyintersection(this.cbTypes,_this.excludes)&&cx.space==this.manager.space){var _this1=this.conlisteners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=ret.next;ret.next=null}ret.elt=cx;var temp=ret;if(npre==null){temp.next=_this1.head;_this1.head=temp}else{temp.next=npre.next;npre.next=temp}_this1.pushmod=_this1.modified=true;_this1.length++;npre=temp}cite=cite.next}else{npre=nite;nite=nite.next}}}cx_ite=cx_ite.next}},validate:function(){if(this.zip_listeners){this.zip_listeners=false;this.realvalidate_listeners()}if(this.zip_bodylisteners){this.zip_bodylisteners=false;this.realvalidate_bodylisteners()}if(this.zip_conlisteners){this.zip_conlisteners=false;this.realvalidate_conlisteners()}},interactors:null,constraints:null,__class__:zpp_$nape_callbacks_ZPP_$CbSet};var zpp_$nape_callbacks_ZPP_$CbSetPair=function(){this.listeners=null;this.zip_listeners=false;this.next=null;this.b=null;this.a=null;this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener};$hxClasses["zpp_nape.callbacks.ZPP_CbSetPair"]=zpp_$nape_callbacks_ZPP_$CbSetPair;zpp_$nape_callbacks_ZPP_$CbSetPair.__name__="zpp_nape.callbacks.ZPP_CbSetPair";zpp_$nape_callbacks_ZPP_$CbSetPair.setlt=function(x,y){if(!zpp_$nape_callbacks_ZPP_$CbSet.setlt(x.a,y.a)){if(x.a==y.a){return zpp_$nape_callbacks_ZPP_$CbSet.setlt(x.b,y.b)}else{return false}}else{return true}};zpp_$nape_callbacks_ZPP_$CbSetPair.prototype={a:null,b:null,next:null,zip_listeners:null,listeners:null,__validate:function(){this.listeners.clear();var aite=this.a.listeners.head;var bite=this.b.listeners.head;while(aite!=null&&bite!=null){var ax=aite.elt;var bx=bite.elt;if(ax==bx){var tmp;var tmp1;var _this=ax.options1;var xs=this.a.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=ax.options2;var xs1=this.b.cbTypes;tmp1=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else{tmp1=false}if(!tmp1){var _this2=ax.options2;var xs2=this.a.cbTypes;if(_this2.nonemptyintersection(xs2,_this2.includes)&&!_this2.nonemptyintersection(xs2,_this2.excludes)){var _this3=ax.options1;var xs3=this.b.cbTypes;tmp=_this3.nonemptyintersection(xs3,_this3.includes)&&!_this3.nonemptyintersection(xs3,_this3.excludes)}else{tmp=false}}else{tmp=true}if(tmp){this.listeners.add(ax)}aite=aite.next;bite=bite.next}else if(ax.precedence>bx.precedence||ax.precedence==bx.precedence&&ax.id>bx.id){aite=aite.next}else{bite=bite.next}}},__class__:zpp_$nape_callbacks_ZPP_$CbSetPair};var zpp_$nape_util_ZPP_$Flags=function(){};$hxClasses["zpp_nape.util.ZPP_Flags"]=zpp_$nape_util_ZPP_$Flags;zpp_$nape_util_ZPP_$Flags.__name__="zpp_nape.util.ZPP_Flags";var zpp_$nape_callbacks_ZPP_$Listener=function(){this.space=null;this.interaction=null;this.constraint=null;this.body=null;this.precedence=0;this.event=0;this.type=0;this.id=0;this.outer=null;this.id=zpp_$nape_ZPP_$ID.Listener()};$hxClasses["zpp_nape.callbacks.ZPP_Listener"]=zpp_$nape_callbacks_ZPP_$Listener;zpp_$nape_callbacks_ZPP_$Listener.__name__="zpp_nape.callbacks.ZPP_Listener";zpp_$nape_callbacks_ZPP_$Listener.prototype={outer:null,id:null,type:null,event:null,precedence:null,body:null,constraint:null,interaction:null,space:null,addedToSpace:function(){},removedFromSpace:function(){},__class__:zpp_$nape_callbacks_ZPP_$Listener};var zpp_$nape_callbacks_ZPP_$BodyListener=function(options,event,handler){this.handler=null;this.options=null;this.outer_zn=null;zpp_$nape_callbacks_ZPP_$Listener.call(this);this.event=event;this.handler=handler;this.body=this;this.type=0;this.options=options.zpp_inner};$hxClasses["zpp_nape.callbacks.ZPP_BodyListener"]=zpp_$nape_callbacks_ZPP_$BodyListener;zpp_$nape_callbacks_ZPP_$BodyListener.__name__="zpp_nape.callbacks.ZPP_BodyListener";zpp_$nape_callbacks_ZPP_$BodyListener.__super__=zpp_$nape_callbacks_ZPP_$Listener;zpp_$nape_callbacks_ZPP_$BodyListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{outer_zn:null,options:null,handler:null,addedToSpace:function(){this.options.handler=$bind(this,this.cbtype_change);var cx_ite=this.options.includes.head;while(cx_ite!=null){var cb=cx_ite.elt;var pre=null;var cx_ite1=cb.bodylisteners.head;while(cx_ite1!=null){var j=cx_ite1.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id){break}pre=cx_ite1;cx_ite1=cx_ite1.next}var _this=cb.bodylisteners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$BodyListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.zpp_pool=ret.next;ret.next=null}ret.elt=this;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++;var cx_ite2=cb.cbsets.head;while(cx_ite2!=null){cx_ite2.elt.zip_bodylisteners=true;cx_ite2=cx_ite2.next}cx_ite=cx_ite.next}},removedFromSpace:function(){var cx_ite=this.options.includes.head;while(cx_ite!=null){var cb=cx_ite.elt;cb.bodylisteners.remove(this);var cx_ite1=cb.cbsets.head;while(cx_ite1!=null){cx_ite1.elt.zip_bodylisteners=true;cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}this.options.handler=null},cbtype_change:function(cb,included,added){this.removedFromSpace();var _this=this.options;if(included){if(added){var pre=null;var cx_ite=_this.includes.head;while(cx_ite!=null){if(cb.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this1=_this.includes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;if(pre==null){temp.next=_this1.head;_this1.head=temp}else{temp.next=pre.next;pre.next=temp}_this1.pushmod=_this1.modified=true;_this1.length++}else{_this.includes.remove(cb)}}else if(added){var pre1=null;var cx_ite1=_this.excludes.head;while(cx_ite1!=null){if(cb.id<cx_ite1.elt.id){break}pre1=cx_ite1;cx_ite1=cx_ite1.next}var _this2=_this.excludes;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret1.next;ret1.next=null}ret1.elt=cb;var temp1=ret1;if(pre1==null){temp1.next=_this2.head;_this2.head=temp1}else{temp1.next=pre1.next;pre1.next=temp1}_this2.pushmod=_this2.modified=true;_this2.length++}else{_this.excludes.remove(cb)}this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$BodyListener});var zpp_$nape_callbacks_ZPP_$ConstraintListener=function(options,event,handler){this.handler=null;this.options=null;this.outer_zn=null;zpp_$nape_callbacks_ZPP_$Listener.call(this);this.event=event;this.handler=handler;this.constraint=this;this.type=1;this.options=options.zpp_inner};$hxClasses["zpp_nape.callbacks.ZPP_ConstraintListener"]=zpp_$nape_callbacks_ZPP_$ConstraintListener;zpp_$nape_callbacks_ZPP_$ConstraintListener.__name__="zpp_nape.callbacks.ZPP_ConstraintListener";zpp_$nape_callbacks_ZPP_$ConstraintListener.__super__=zpp_$nape_callbacks_ZPP_$Listener;zpp_$nape_callbacks_ZPP_$ConstraintListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{outer_zn:null,options:null,handler:null,addedToSpace:function(){this.options.handler=$bind(this,this.cbtype_change);var cx_ite=this.options.includes.head;while(cx_ite!=null){var cb=cx_ite.elt;var pre=null;var cx_ite1=cb.conlisteners.head;while(cx_ite1!=null){var j=cx_ite1.elt;if(this.precedence>j.precedence||this.precedence==j.precedence&&this.id>j.id){break}pre=cx_ite1;cx_ite1=cx_ite1.next}var _this=cb.conlisteners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.zpp_pool=ret.next;ret.next=null}ret.elt=this;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++;var cx_ite2=cb.cbsets.head;while(cx_ite2!=null){cx_ite2.elt.zip_conlisteners=true;cx_ite2=cx_ite2.next}cx_ite=cx_ite.next}},removedFromSpace:function(){var cx_ite=this.options.includes.head;while(cx_ite!=null){var cb=cx_ite.elt;cb.conlisteners.remove(this);var cx_ite1=cb.cbsets.head;while(cx_ite1!=null){cx_ite1.elt.zip_conlisteners=true;cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}this.options.handler=null},cbtype_change:function(cb,included,added){this.removedFromSpace();var _this=this.options;if(included){if(added){var pre=null;var cx_ite=_this.includes.head;while(cx_ite!=null){if(cb.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this1=_this.includes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;if(pre==null){temp.next=_this1.head;_this1.head=temp}else{temp.next=pre.next;pre.next=temp}_this1.pushmod=_this1.modified=true;_this1.length++}else{_this.includes.remove(cb)}}else if(added){var pre1=null;var cx_ite1=_this.excludes.head;while(cx_ite1!=null){if(cb.id<cx_ite1.elt.id){break}pre1=cx_ite1;cx_ite1=cx_ite1.next}var _this2=_this.excludes;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret1.next;ret1.next=null}ret1.elt=cb;var temp1=ret1;if(pre1==null){temp1.next=_this2.head;_this2.head=temp1}else{temp1.next=pre1.next;pre1.next=temp1}_this2.pushmod=_this2.modified=true;_this2.length++}else{_this.excludes.remove(cb)}this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$ConstraintListener});var zpp_$nape_util_ZNPList_$ZPP_$CbType=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_CbType"]=zpp_$nape_util_ZNPList_$ZPP_$CbType;zpp_$nape_util_ZNPList_$ZPP_$CbType.__name__="zpp_nape.util.ZNPList_ZPP_CbType";zpp_$nape_util_ZNPList_$ZPP_$CbType.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},has:function(obj){var ret;ret=false;var cx_ite=this.head;while(cx_ite!=null){if(cx_ite.elt==obj){ret=true;break}cx_ite=cx_ite.next}return ret},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbType};var zpp_$nape_callbacks_ZPP_$InteractionListener=function(options1,options2,event,type){this.handlerp=null;this.pure=false;this.allowSleepingCallbacks=false;this.handleri=null;this.options2=null;this.options1=null;this.itype=0;this.outer_znp=null;this.outer_zni=null;zpp_$nape_callbacks_ZPP_$Listener.call(this);this.type=type;this.interaction=this;this.event=event;this.options1=options1.zpp_inner;this.options2=options2.zpp_inner;this.allowSleepingCallbacks=false};$hxClasses["zpp_nape.callbacks.ZPP_InteractionListener"]=zpp_$nape_callbacks_ZPP_$InteractionListener;zpp_$nape_callbacks_ZPP_$InteractionListener.__name__="zpp_nape.callbacks.ZPP_InteractionListener";zpp_$nape_callbacks_ZPP_$InteractionListener.__super__=zpp_$nape_callbacks_ZPP_$Listener;zpp_$nape_callbacks_ZPP_$InteractionListener.prototype=$extend(zpp_$nape_callbacks_ZPP_$Listener.prototype,{outer_zni:null,outer_znp:null,itype:null,options1:null,options2:null,handleri:null,allowSleepingCallbacks:null,pure:null,handlerp:null,with_uniquesets:function(fresh){var _gthis=this;var set;if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool==null){set=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair}else{set=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=set.next;set.next=null}set.lt=zpp_$nape_callbacks_ZPP_$CbSetPair.setlt;var B=this.options2.includes;var U=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType;var V=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType;var W=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType;var aite=this.options1.includes.head;var bite=B.head;while(aite!=null&&bite!=null){var a=aite.elt;var b=bite.elt;if(a==b){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=a;var temp=ret;temp.next=W.head;W.head=temp;W.modified=true;W.length++;aite=aite.next;bite=bite.next}else if(a.id<b.id){var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret1.next;ret1.next=null}ret1.elt=a;var temp1=ret1;temp1.next=U.head;U.head=temp1;U.modified=true;U.length++;aite=aite.next}else{var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret2.next;ret2.next=null}ret2.elt=b;var temp2=ret2;temp2.next=V.head;V.head=temp2;V.modified=true;V.length++;bite=bite.next}}while(aite!=null){var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret3.next;ret3.next=null}ret3.elt=aite.elt;var temp3=ret3;temp3.next=U.head;U.head=temp3;U.modified=true;U.length++;aite=aite.next}while(bite!=null){var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret4.next;ret4.next=null}ret4.elt=bite.elt;var temp4=ret4;temp4.next=V.head;V.head=temp4;V.modified=true;V.length++;bite=bite.next}while(U.head!=null){var x=U.pop_unsafe();var cx_ite=B.head;while(cx_ite!=null){var B1=cx_ite.elt.cbsets;var U1=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet;var V1=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;var W1=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;var aite1=x.cbsets.head;var bite1=B1.head;while(aite1!=null&&bite1!=null){var a1=aite1.elt;var b1=bite1.elt;if(a1==b1){var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret5.next;ret5.next=null}ret5.elt=a1;var temp5=ret5;temp5.next=W1.head;W1.head=temp5;W1.modified=true;W1.length++;aite1=aite1.next;bite1=bite1.next}else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a1,b1)){var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret6.next;ret6.next=null}ret6.elt=a1;var temp6=ret6;temp6.next=U1.head;U1.head=temp6;U1.modified=true;U1.length++;aite1=aite1.next}else{var ret7;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret7=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret7=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret7.next;ret7.next=null}ret7.elt=b1;var temp7=ret7;temp7.next=V1.head;V1.head=temp7;V1.modified=true;V1.length++;bite1=bite1.next}}while(aite1!=null){var ret8;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret8=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret8=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret8.next;ret8.next=null}ret8.elt=aite1.elt;var temp8=ret8;temp8.next=U1.head;U1.head=temp8;U1.modified=true;U1.length++;aite1=aite1.next}while(bite1!=null){var ret9;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret9=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret9=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret9.next;ret9.next=null}ret9.elt=bite1.elt;var temp9=ret9;temp9.next=V1.head;V1.head=temp9;V1.modified=true;V1.length++;bite1=bite1.next}while(U1.head!=null){var x1=U1.pop_unsafe();var cx_ite1=B1.head;while(cx_ite1!=null){var y=cx_ite1.elt;x1.validate();y.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x1,y,_gthis)){var ret10;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret10=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret10=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret10.next;ret10.next=null}ret10.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x1,y)){ret10.a=x1;ret10.b=y}else{ret10.a=y;ret10.b=x1}set.try_insert(ret10)}cx_ite1=cx_ite1.next}}while(V1.head!=null){var x2=V1.pop_unsafe();var cx_ite2=W1.head;while(cx_ite2!=null){var y1=cx_ite2.elt;x2.validate();y1.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x2,y1,_gthis)){var ret11;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret11=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret11=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret11.next;ret11.next=null}ret11.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x2,y1)){ret11.a=x2;ret11.b=y1}else{ret11.a=y1;ret11.b=x2}set.try_insert(ret11)}cx_ite2=cx_ite2.next}}while(W1.head!=null){var x3=W1.pop_unsafe();x3.validate();x3.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x3,x3,_gthis)){var ret12;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret12=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret12=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret12.next;ret12.next=null}ret12.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x3,x3)){ret12.a=x3;ret12.b=x3}else{ret12.a=x3;ret12.b=x3}set.try_insert(ret12)}var cx_ite3=W1.head;while(cx_ite3!=null){var y2=cx_ite3.elt;x3.validate();y2.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x3,y2,_gthis)){var ret13;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret13=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret13=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret13.next;ret13.next=null}ret13.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x3,y2)){ret13.a=x3;ret13.b=y2}else{ret13.a=y2;ret13.b=x3}set.try_insert(ret13)}cx_ite3=cx_ite3.next}}cx_ite=cx_ite.next}}while(V.head!=null){var x4=V.pop_unsafe();var cx_ite4=W.head;while(cx_ite4!=null){var B2=cx_ite4.elt.cbsets;var U2=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet;var V2=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;var W2=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;var aite2=x4.cbsets.head;var bite2=B2.head;while(aite2!=null&&bite2!=null){var a2=aite2.elt;var b2=bite2.elt;if(a2==b2){var ret14;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret14=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret14=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret14.next;ret14.next=null}ret14.elt=a2;var temp10=ret14;temp10.next=W2.head;W2.head=temp10;W2.modified=true;W2.length++;aite2=aite2.next;bite2=bite2.next}else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a2,b2)){var ret15;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret15=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret15=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret15.next;ret15.next=null}ret15.elt=a2;var temp11=ret15;temp11.next=U2.head;U2.head=temp11;U2.modified=true;U2.length++;aite2=aite2.next}else{var ret16;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret16=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret16=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret16.next;ret16.next=null}ret16.elt=b2;var temp12=ret16;temp12.next=V2.head;V2.head=temp12;V2.modified=true;V2.length++;bite2=bite2.next}}while(aite2!=null){var ret17;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret17=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret17=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret17.next;ret17.next=null}ret17.elt=aite2.elt;var temp13=ret17;temp13.next=U2.head;U2.head=temp13;U2.modified=true;U2.length++;aite2=aite2.next}while(bite2!=null){var ret18;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret18=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret18=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret18.next;ret18.next=null}ret18.elt=bite2.elt;var temp14=ret18;temp14.next=V2.head;V2.head=temp14;V2.modified=true;V2.length++;bite2=bite2.next}while(U2.head!=null){var x5=U2.pop_unsafe();var cx_ite5=B2.head;while(cx_ite5!=null){var y3=cx_ite5.elt;x5.validate();y3.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x5,y3,_gthis)){var ret19;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret19=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret19=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret19.next;ret19.next=null}ret19.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x5,y3)){ret19.a=x5;ret19.b=y3}else{ret19.a=y3;ret19.b=x5}set.try_insert(ret19)}cx_ite5=cx_ite5.next}}while(V2.head!=null){var x6=V2.pop_unsafe();var cx_ite6=W2.head;while(cx_ite6!=null){var y4=cx_ite6.elt;x6.validate();y4.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x6,y4,_gthis)){var ret20;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret20=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret20=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret20.next;ret20.next=null}ret20.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x6,y4)){ret20.a=x6;ret20.b=y4}else{ret20.a=y4;ret20.b=x6}set.try_insert(ret20)}cx_ite6=cx_ite6.next}}while(W2.head!=null){var x7=W2.pop_unsafe();x7.validate();x7.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x7,x7,_gthis)){var ret21;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret21=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret21=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret21.next;ret21.next=null}ret21.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x7,x7)){ret21.a=x7;ret21.b=x7}else{ret21.a=x7;ret21.b=x7}set.try_insert(ret21)}var cx_ite7=W2.head;while(cx_ite7!=null){var y5=cx_ite7.elt;x7.validate();y5.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x7,y5,_gthis)){var ret22;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret22=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret22=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret22.next;ret22.next=null}ret22.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x7,y5)){ret22.a=x7;ret22.b=y5}else{ret22.a=y5;ret22.b=x7}set.try_insert(ret22)}cx_ite7=cx_ite7.next}}cx_ite4=cx_ite4.next}}while(W.head!=null){var x8=W.pop_unsafe();var B3=x8.cbsets;var U3=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet;var V3=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;var W3=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;var aite3=x8.cbsets.head;var bite3=B3.head;while(aite3!=null&&bite3!=null){var a3=aite3.elt;var b3=bite3.elt;if(a3==b3){var ret23;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret23=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret23=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret23.next;ret23.next=null}ret23.elt=a3;var temp15=ret23;temp15.next=W3.head;W3.head=temp15;W3.modified=true;W3.length++;aite3=aite3.next;bite3=bite3.next}else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a3,b3)){var ret24;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret24=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret24=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret24.next;ret24.next=null}ret24.elt=a3;var temp16=ret24;temp16.next=U3.head;U3.head=temp16;U3.modified=true;U3.length++;aite3=aite3.next}else{var ret25;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret25=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret25=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret25.next;ret25.next=null}ret25.elt=b3;var temp17=ret25;temp17.next=V3.head;V3.head=temp17;V3.modified=true;V3.length++;bite3=bite3.next}}while(aite3!=null){var ret26;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret26=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret26=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret26.next;ret26.next=null}ret26.elt=aite3.elt;var temp18=ret26;temp18.next=U3.head;U3.head=temp18;U3.modified=true;U3.length++;aite3=aite3.next}while(bite3!=null){var ret27;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret27=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret27=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret27.next;ret27.next=null}ret27.elt=bite3.elt;var temp19=ret27;temp19.next=V3.head;V3.head=temp19;V3.modified=true;V3.length++;bite3=bite3.next}while(U3.head!=null){var x9=U3.pop_unsafe();var cx_ite8=B3.head;while(cx_ite8!=null){var y6=cx_ite8.elt;x9.validate();y6.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x9,y6,_gthis)){var ret28;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret28=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret28=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret28.next;ret28.next=null}ret28.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x9,y6)){ret28.a=x9;ret28.b=y6}else{ret28.a=y6;ret28.b=x9}set.try_insert(ret28)}cx_ite8=cx_ite8.next}}while(V3.head!=null){var x10=V3.pop_unsafe();var cx_ite9=W3.head;while(cx_ite9!=null){var y7=cx_ite9.elt;x10.validate();y7.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x10,y7,_gthis)){var ret29;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret29=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret29=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret29.next;ret29.next=null}ret29.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x10,y7)){ret29.a=x10;ret29.b=y7}else{ret29.a=y7;ret29.b=x10}set.try_insert(ret29)}cx_ite9=cx_ite9.next}}while(W3.head!=null){var x11=W3.pop_unsafe();x11.validate();x11.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x11,x11,_gthis)){var ret30;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret30=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret30=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret30.next;ret30.next=null}ret30.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x11,x11)){ret30.a=x11;ret30.b=x11}else{ret30.a=x11;ret30.b=x11}set.try_insert(ret30)}var cx_ite10=W3.head;while(cx_ite10!=null){var y8=cx_ite10.elt;x11.validate();y8.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x11,y8,_gthis)){var ret31;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret31=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret31=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret31.next;ret31.next=null}ret31.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x11,y8)){ret31.a=x11;ret31.b=y8}else{ret31.a=y8;ret31.b=x11}set.try_insert(ret31)}cx_ite10=cx_ite10.next}}var cx_ite11=W.head;while(cx_ite11!=null){var B4=cx_ite11.elt.cbsets;var U4=zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet;var V4=zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet;var W4=zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet;var aite4=x8.cbsets.head;var bite4=B4.head;while(aite4!=null&&bite4!=null){var a4=aite4.elt;var b4=bite4.elt;if(a4==b4){var ret32;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret32=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret32=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret32.next;ret32.next=null}ret32.elt=a4;var temp20=ret32;temp20.next=W4.head;W4.head=temp20;W4.modified=true;W4.length++;aite4=aite4.next;bite4=bite4.next}else if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a4,b4)){var ret33;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret33=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret33=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret33.next;ret33.next=null}ret33.elt=a4;var temp21=ret33;temp21.next=U4.head;U4.head=temp21;U4.modified=true;U4.length++;aite4=aite4.next}else{var ret34;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret34=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret34=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret34.next;ret34.next=null}ret34.elt=b4;var temp22=ret34;temp22.next=V4.head;V4.head=temp22;V4.modified=true;V4.length++;bite4=bite4.next}}while(aite4!=null){var ret35;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret35=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret35=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret35.next;ret35.next=null}ret35.elt=aite4.elt;var temp23=ret35;temp23.next=U4.head;U4.head=temp23;U4.modified=true;U4.length++;aite4=aite4.next}while(bite4!=null){var ret36;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool==null){ret36=new zpp_$nape_util_ZNPNode_$ZPP_$CbSet}else{ret36=zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.zpp_pool=ret36.next;ret36.next=null}ret36.elt=bite4.elt;var temp24=ret36;temp24.next=V4.head;V4.head=temp24;V4.modified=true;V4.length++;bite4=bite4.next}while(U4.head!=null){var x12=U4.pop_unsafe();var cx_ite12=B4.head;while(cx_ite12!=null){var y9=cx_ite12.elt;x12.validate();y9.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x12,y9,_gthis)){var ret37;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret37=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret37=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret37.next;ret37.next=null}ret37.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x12,y9)){ret37.a=x12;ret37.b=y9}else{ret37.a=y9;ret37.b=x12}set.try_insert(ret37)}cx_ite12=cx_ite12.next}}while(V4.head!=null){var x13=V4.pop_unsafe();var cx_ite13=W4.head;while(cx_ite13!=null){var y10=cx_ite13.elt;x13.validate();y10.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x13,y10,_gthis)){var ret38;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret38=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret38=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret38.next;ret38.next=null}ret38.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x13,y10)){ret38.a=x13;ret38.b=y10}else{ret38.a=y10;ret38.b=x13}set.try_insert(ret38)}cx_ite13=cx_ite13.next}}while(W4.head!=null){var x14=W4.pop_unsafe();x14.validate();x14.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x14,x14,_gthis)){var ret39;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret39=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret39=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret39.next;ret39.next=null}ret39.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x14,x14)){ret39.a=x14;ret39.b=x14}else{ret39.a=x14;ret39.b=x14}set.try_insert(ret39)}var cx_ite14=W4.head;while(cx_ite14!=null){var y11=cx_ite14.elt;x14.validate();y11.validate();if(zpp_$nape_callbacks_ZPP_$CbSet.single_intersection(x14,y11,_gthis)){var ret40;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret40=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret40=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret40.next;ret40.next=null}ret40.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(x14,y11)){ret40.a=x14;ret40.b=y11}else{ret40.a=y11;ret40.b=x14}set.try_insert(ret40)}cx_ite14=cx_ite14.next}}cx_ite11=cx_ite11.next}}if(set.parent!=null){var cur=set.parent;while(cur!=null)if(cur.prev!=null){cur=cur.prev}else if(cur.next!=null){cur=cur.next}else{var pair=cur.data;if(fresh){_gthis.space.freshListenerType(pair.a,pair.b)}else{_gthis.space.nullListenerType(pair.a,pair.b)}pair.a=pair.b=null;pair.listeners.clear();pair.next=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=pair;var ret41=cur.parent;if(ret41!=null){if(cur==ret41.prev){ret41.prev=null}else{ret41.next=null}cur.parent=null}var o=cur;o.data=null;o.lt=null;o.swapped=null;o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=o;cur=ret41}set.parent=null}var o1=set;o1.data=null;o1.lt=null;o1.swapped=null;o1.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=o1},addedToSpace:function(){var _gthis=this;var pre=this.type==3;var ite1=this.options1.includes.head;var ite2=this.options2.includes.head;while(ite1!=null&&ite2!=null){var cb1=ite1.elt;var cb2=ite2.elt;if(cb1==cb2){var pre1=null;var cx_ite=cb1.listeners.head;while(cx_ite!=null){var j=cx_ite.elt;if(_gthis.precedence>j.precedence||_gthis.precedence==j.precedence&&_gthis.id>j.id){break}pre1=cx_ite;cx_ite=cx_ite.next}var _this=cb1.listeners;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret.next;ret.next=null}ret.elt=_gthis;var temp=ret;if(pre1==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre1.next;pre1.next=temp}_this.pushmod=_this.modified=true;_this.length++;var cx_ite1=cb1.cbsets.head;while(cx_ite1!=null){var cb=cx_ite1.elt;cb.zip_listeners=true;cb.invalidate_pairs();cx_ite1=cx_ite1.next}if(pre){var cx_ite2=cb1.interactors.head;while(cx_ite2!=null){cx_ite2.elt.wake();cx_ite2=cx_ite2.next}}ite1=ite1.next;ite2=ite2.next}else if(cb1.id<cb2.id){var pre2=null;var cx_ite3=cb1.listeners.head;while(cx_ite3!=null){var j1=cx_ite3.elt;if(_gthis.precedence>j1.precedence||_gthis.precedence==j1.precedence&&_gthis.id>j1.id){break}pre2=cx_ite3;cx_ite3=cx_ite3.next}var _this1=cb1.listeners;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret1.next;ret1.next=null}ret1.elt=_gthis;var temp1=ret1;if(pre2==null){temp1.next=_this1.head;_this1.head=temp1}else{temp1.next=pre2.next;pre2.next=temp1}_this1.pushmod=_this1.modified=true;_this1.length++;var cx_ite4=cb1.cbsets.head;while(cx_ite4!=null){var cb3=cx_ite4.elt;cb3.zip_listeners=true;cb3.invalidate_pairs();cx_ite4=cx_ite4.next}if(pre){var cx_ite5=cb1.interactors.head;while(cx_ite5!=null){cx_ite5.elt.wake();cx_ite5=cx_ite5.next}}ite1=ite1.next}else{var pre3=null;var cx_ite6=cb2.listeners.head;while(cx_ite6!=null){var j2=cx_ite6.elt;if(_gthis.precedence>j2.precedence||_gthis.precedence==j2.precedence&&_gthis.id>j2.id){break}pre3=cx_ite6;cx_ite6=cx_ite6.next}var _this2=cb2.listeners;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret2.next;ret2.next=null}ret2.elt=_gthis;var temp2=ret2;if(pre3==null){temp2.next=_this2.head;_this2.head=temp2}else{temp2.next=pre3.next;pre3.next=temp2}_this2.pushmod=_this2.modified=true;_this2.length++;var cx_ite7=cb2.cbsets.head;while(cx_ite7!=null){var cb4=cx_ite7.elt;cb4.zip_listeners=true;cb4.invalidate_pairs();cx_ite7=cx_ite7.next}if(pre){var cx_ite8=cb2.interactors.head;while(cx_ite8!=null){cx_ite8.elt.wake();cx_ite8=cx_ite8.next}}ite2=ite2.next}}while(ite1!=null){var cb5=ite1.elt;var pre4=null;var cx_ite9=cb5.listeners.head;while(cx_ite9!=null){var j3=cx_ite9.elt;if(_gthis.precedence>j3.precedence||_gthis.precedence==j3.precedence&&_gthis.id>j3.id){break}pre4=cx_ite9;cx_ite9=cx_ite9.next}var _this3=cb5.listeners;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret3.next;ret3.next=null}ret3.elt=_gthis;var temp3=ret3;if(pre4==null){temp3.next=_this3.head;_this3.head=temp3}else{temp3.next=pre4.next;pre4.next=temp3}_this3.pushmod=_this3.modified=true;_this3.length++;var cx_ite10=cb5.cbsets.head;while(cx_ite10!=null){var cb6=cx_ite10.elt;cb6.zip_listeners=true;cb6.invalidate_pairs();cx_ite10=cx_ite10.next}if(pre){var cx_ite11=cb5.interactors.head;while(cx_ite11!=null){cx_ite11.elt.wake();cx_ite11=cx_ite11.next}}ite1=ite1.next}while(ite2!=null){var cb7=ite2.elt;var pre5=null;var cx_ite12=cb7.listeners.head;while(cx_ite12!=null){var j4=cx_ite12.elt;if(_gthis.precedence>j4.precedence||_gthis.precedence==j4.precedence&&_gthis.id>j4.id){break}pre5=cx_ite12;cx_ite12=cx_ite12.next}var _this4=cb7.listeners;var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret4.next;ret4.next=null}ret4.elt=_gthis;var temp4=ret4;if(pre5==null){temp4.next=_this4.head;_this4.head=temp4}else{temp4.next=pre5.next;pre5.next=temp4}_this4.pushmod=_this4.modified=true;_this4.length++;var cx_ite13=cb7.cbsets.head;while(cx_ite13!=null){var cb8=cx_ite13.elt;cb8.zip_listeners=true;cb8.invalidate_pairs();cx_ite13=cx_ite13.next}if(pre){var cx_ite14=cb7.interactors.head;while(cx_ite14!=null){cx_ite14.elt.wake();cx_ite14=cx_ite14.next}}ite2=ite2.next}this.options1.handler=$bind(this,this.cbtype_change1);this.options2.handler=$bind(this,this.cbtype_change2);this.with_uniquesets(true)},removedFromSpace:function(){var _gthis=this;this.with_uniquesets(false);var pre=this.type==3;var ite1=this.options1.includes.head;var ite2=this.options2.includes.head;while(ite1!=null&&ite2!=null){var cb1=ite1.elt;var cb2=ite2.elt;if(cb1==cb2){cb1.listeners.remove(_gthis);var cx_ite=cb1.cbsets.head;while(cx_ite!=null){var cb=cx_ite.elt;cb.zip_listeners=true;cb.invalidate_pairs();cx_ite=cx_ite.next}if(pre){var cx_ite1=cb1.interactors.head;while(cx_ite1!=null){cx_ite1.elt.wake();cx_ite1=cx_ite1.next}}ite1=ite1.next;ite2=ite2.next}else if(cb1.id<cb2.id){cb1.listeners.remove(_gthis);var cx_ite2=cb1.cbsets.head;while(cx_ite2!=null){var cb3=cx_ite2.elt;cb3.zip_listeners=true;cb3.invalidate_pairs();cx_ite2=cx_ite2.next}if(pre){var cx_ite3=cb1.interactors.head;while(cx_ite3!=null){cx_ite3.elt.wake();cx_ite3=cx_ite3.next}}ite1=ite1.next}else{cb2.listeners.remove(_gthis);var cx_ite4=cb2.cbsets.head;while(cx_ite4!=null){var cb4=cx_ite4.elt;cb4.zip_listeners=true;cb4.invalidate_pairs();cx_ite4=cx_ite4.next}if(pre){var cx_ite5=cb2.interactors.head;while(cx_ite5!=null){cx_ite5.elt.wake();cx_ite5=cx_ite5.next}}ite2=ite2.next}}while(ite1!=null){var cb5=ite1.elt;cb5.listeners.remove(_gthis);var cx_ite6=cb5.cbsets.head;while(cx_ite6!=null){var cb6=cx_ite6.elt;cb6.zip_listeners=true;cb6.invalidate_pairs();cx_ite6=cx_ite6.next}if(pre){var cx_ite7=cb5.interactors.head;while(cx_ite7!=null){cx_ite7.elt.wake();cx_ite7=cx_ite7.next}}ite1=ite1.next}while(ite2!=null){var cb7=ite2.elt;cb7.listeners.remove(_gthis);var cx_ite8=cb7.cbsets.head;while(cx_ite8!=null){var cb8=cx_ite8.elt;cb8.zip_listeners=true;cb8.invalidate_pairs();cx_ite8=cx_ite8.next}if(pre){var cx_ite9=cb7.interactors.head;while(cx_ite9!=null){cx_ite9.elt.wake();cx_ite9=cx_ite9.next}}ite2=ite2.next}this.options1.handler=null;this.options2.handler=null},cbtype_change1:function(cb,included,added){this.cbtype_change(this.options1,cb,included,added)},cbtype_change2:function(cb,included,added){this.cbtype_change(this.options2,cb,included,added)},cbtype_change:function(options,cb,included,added){this.removedFromSpace();if(included){if(added){var pre=null;var cx_ite=options.includes.head;while(cx_ite!=null){if(cb.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this=options.includes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++}else{options.includes.remove(cb)}}else if(added){var pre1=null;var cx_ite1=options.excludes.head;while(cx_ite1!=null){if(cb.id<cx_ite1.elt.id){break}pre1=cx_ite1;cx_ite1=cx_ite1.next}var _this1=options.excludes;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret1.next;ret1.next=null}ret1.elt=cb;var temp1=ret1;if(pre1==null){temp1.next=_this1.head;_this1.head=temp1}else{temp1.next=pre1.next;pre1.next=temp1}_this1.pushmod=_this1.modified=true;_this1.length++}else{options.excludes.remove(cb)}this.addedToSpace()},__class__:zpp_$nape_callbacks_ZPP_$InteractionListener});var zpp_$nape_callbacks_ZPP_$OptionType=function(){this.wrap_excludes=null;this.wrap_includes=null;this.excludes=null;this.includes=null;this.handler=null;this.outer=null;this.includes=new zpp_$nape_util_ZNPList_$ZPP_$CbType;this.excludes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};$hxClasses["zpp_nape.callbacks.ZPP_OptionType"]=zpp_$nape_callbacks_ZPP_$OptionType;zpp_$nape_callbacks_ZPP_$OptionType.__name__="zpp_nape.callbacks.ZPP_OptionType";zpp_$nape_callbacks_ZPP_$OptionType.argument=function(val){if(val==null){return new nape_callbacks_OptionType}else if(val instanceof nape_callbacks_OptionType){return val}else{return(new nape_callbacks_OptionType).including(val)}};zpp_$nape_callbacks_ZPP_$OptionType.prototype={outer:null,handler:null,includes:null,excludes:null,wrap_includes:null,wrap_excludes:null,setup_includes:function(){this.wrap_includes=zpp_$nape_util_ZPP_$CbTypeList.get(this.includes,true)},setup_excludes:function(){this.wrap_excludes=zpp_$nape_util_ZPP_$CbTypeList.get(this.excludes,true)},nonemptyintersection:function(xs,ys){var ret=false;var xite=xs.head;var eite=ys.head;while(eite!=null&&xite!=null){var ex=eite.elt;var xi=xite.elt;if(ex==xi){ret=true;break}else if(ex.id<xi.id){eite=eite.next}else{xite=xite.next}}return ret},append_type:function(list,val){if(list==this.includes){if(!this.includes.has(val)){if(!this.excludes.has(val)){if(this.handler!=null){this.handler(val,true,true)}else{var pre=null;var cx_ite=this.includes.head;while(cx_ite!=null){if(val.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this=this.includes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=val;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++}}else if(this.handler!=null){this.handler(val,false,false)}else{this.excludes.remove(val)}}}else if(!this.excludes.has(val)){if(!this.includes.has(val)){if(this.handler!=null){this.handler(val,false,true)}else{var pre1=null;var cx_ite1=this.excludes.head;while(cx_ite1!=null){if(val.id<cx_ite1.elt.id){break}pre1=cx_ite1;cx_ite1=cx_ite1.next}var _this1=this.excludes;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret1.next;ret1.next=null}ret1.elt=val;var temp1=ret1;if(pre1==null){temp1.next=_this1.head;_this1.head=temp1}else{temp1.next=pre1.next;pre1.next=temp1}_this1.pushmod=_this1.modified=true;_this1.length++}}else if(this.handler!=null){this.handler(val,true,false)}else{this.includes.remove(val)}}},append:function(list,val){if(val instanceof nape_callbacks_CbType){this.append_type(list,val.zpp_inner)}else if(val instanceof nape_callbacks_CbTypeList){var cbs=val;cbs.zpp_inner.valmod();var _g=nape_callbacks_CbTypeIterator.get(cbs);while(true){_g.zpp_inner.zpp_inner.valmod();var _this=_g.zpp_inner;_this.zpp_inner.valmod();if(_this.zpp_inner.zip_length){_this.zpp_inner.zip_length=false;_this.zpp_inner.user_length=_this.zpp_inner.inner.length}_g.zpp_critical=true;var tmp;if(_g.zpp_i<_this.zpp_inner.user_length){tmp=true}else{_g.zpp_next=nape_callbacks_CbTypeIterator.zpp_pool;nape_callbacks_CbTypeIterator.zpp_pool=_g;_g.zpp_inner=null;tmp=false}if(!tmp){break}_g.zpp_critical=false;this.append_type(list,_g.zpp_inner.at(_g.zpp_i++).zpp_inner)}}else if(val instanceof Array){var cbs1=val;var _g1=0;while(_g1<cbs1.length)this.append_type(list,cbs1[_g1++].zpp_inner)}},__class__:zpp_$nape_callbacks_ZPP_$OptionType};var zpp_$nape_constraint_ZPP_$Constraint=function(){this.pre_dt=0;this.cbSet=null;this.cbTypes=null;this.__velocity=false;this.ignore=false;this.component=null;this.removeOnBreak=false;this.breakUnderError=false;this.breakUnderForce=false;this.maxError=0;this.maxForce=0;this.damping=0;this.frequency=0;this.stiff=false;this.active=false;this.space=null;this.compound=null;this.id=0;this.outer=null;this.__velocity=false;this.id=zpp_$nape_ZPP_$ID.Constraint();this.stiff=true;this.active=true;this.ignore=false;this.frequency=10;this.damping=1;this.maxForce=Infinity;this.maxError=Infinity;this.breakUnderForce=false;this.removeOnBreak=true;this.pre_dt=-1;this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};$hxClasses["zpp_nape.constraint.ZPP_Constraint"]=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$Constraint.__name__="zpp_nape.constraint.ZPP_Constraint";zpp_$nape_constraint_ZPP_$Constraint.prototype={outer:null,id:null,compound:null,space:null,active:null,stiff:null,frequency:null,damping:null,maxForce:null,maxError:null,breakUnderForce:null,breakUnderError:null,removeOnBreak:null,component:null,ignore:null,__velocity:null,cbTypes:null,cbSet:null,insert_cbtype:function(cb){if(!this.cbTypes.has(cb)){if(this.space!=null){this.dealloc_cbSet();cb.constraints.add(this)}var pre=null;var cx_ite=this.cbTypes.head;while(cx_ite!=null){if(cb.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this=this.cbTypes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++;if(this.space!=null){this.alloc_cbSet();this.wake()}}},alloc_cbSet:function(){if((this.cbSet=this.space.cbsets.get(this.cbTypes))!=null){this.cbSet.count++;this.cbSet.constraints.add(this)}},dealloc_cbSet:function(){if(this.cbSet!=null){this.cbSet.constraints.remove(this);if(--this.cbSet.count==0){this.space.cbsets.remove(this.cbSet);var o=this.cbSet;o.listeners.clear();o.zip_listeners=true;o.bodylisteners.clear();o.zip_bodylisteners=true;o.conlisteners.clear();o.zip_conlisteners=true;while(o.cbTypes.head!=null)o.cbTypes.pop_unsafe().cbsets.remove(o);o.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=o}this.cbSet=null}},addedToSpace:function(){if(this.active){this.activeInSpace()}this.activeBodies();var cx_ite=this.cbTypes.head;while(cx_ite!=null){cx_ite.elt.constraints.add(this);cx_ite=cx_ite.next}},removedFromSpace:function(){if(this.active){this.inactiveOrOutSpace()}this.inactiveBodies();var cx_ite=this.cbTypes.head;while(cx_ite!=null){cx_ite.elt.constraints.remove(this);cx_ite=cx_ite.next}},activeInSpace:function(){this.alloc_cbSet();if(zpp_$nape_space_ZPP_$Component.zpp_pool==null){this.component=new zpp_$nape_space_ZPP_$Component}else{this.component=zpp_$nape_space_ZPP_$Component.zpp_pool;zpp_$nape_space_ZPP_$Component.zpp_pool=this.component.next;this.component.next=null}this.component.isBody=false;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var o=this.component;o.body=null;o.constraint=null;o.next=zpp_$nape_space_ZPP_$Component.zpp_pool;zpp_$nape_space_ZPP_$Component.zpp_pool=o;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(id,di){return false},broken:function(){},warmStart:function(){},pre_dt:null,preStep:function(dt){return false},applyImpulseVel:function(){return false},applyImpulsePos:function(){return false},wake:function(){if(this.space!=null){this.space.wake_constraint(this)}},__class__:zpp_$nape_constraint_ZPP_$Constraint};var zpp_$nape_constraint_ZPP_$AngleJoint=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.b2=null;this.b1=null;this.scale=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.ratio=0;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.ratio=1;this.jAcc=0;this.slack=false;this.jMax=Infinity;this.stepped=false};$hxClasses["zpp_nape.constraint.ZPP_AngleJoint"]=zpp_$nape_constraint_ZPP_$AngleJoint;zpp_$nape_constraint_ZPP_$AngleJoint.__name__="zpp_nape.constraint.ZPP_AngleJoint";zpp_$nape_constraint_ZPP_$AngleJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$AngleJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,ratio:null,jointMin:null,jointMax:null,slack:null,equal:null,scale:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,b2:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAcc=0;this.pre_dt=-1;this.slack=false},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.equal=this.jointMin==this.jointMax;var C=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){C-=this.jointMax;this.slack=false;this.scale=1}else if(C<this.jointMin){C=this.jointMin-C;this.scale=-1;this.slack=false}else if(C>this.jointMax){C-=this.jointMax;this.scale=1;this.slack=false}else{this.scale=0;C=0;this.slack=true}var C1=C;if(!this.slack){this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;if(this.kMass!=0){this.kMass=1/this.kMass}else{this.jAcc=0}if(!this.stiff){if(this.breakUnderError&&C1*C1>this.maxError*this.maxError){return true}var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);var biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMass*=ig;this.bias=-C1*biasCoef;if(this.bias<-this.maxError){this.bias=-this.maxError}else if(this.bias>this.maxError){this.bias=this.maxError}}else{this.bias=0;this.gamma=0}this.jAcc*=dtratio;this.jMax=this.maxForce*dt}return false},warmStart:function(){if(!this.slack){this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack){return false}var j=this.kMass*(this.bias-this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel))-this.jAcc*this.gamma;var jOld=this.jAcc;this.jAcc+=j;if(!this.equal&&this.jAcc>0){this.jAcc=0}if(this.breakUnderForce&&(this.jAcc>this.jMax||this.jAcc<-this.jMax)){return true}if(!this.stiff){if(this.jAcc>this.jMax){this.jAcc=this.jMax}else if(this.jAcc<-this.jMax){this.jAcc=-this.jMax}}j=this.jAcc-jOld;this.b1.angvel-=this.scale*this.b1.iinertia*j;this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*j;return false},applyImpulsePos:function(){var j;var slack;var C=this.ratio*this.b2.rot-this.b1.rot;if(this.equal){C-=this.jointMax;slack=false;this.scale=1}else if(C<this.jointMin){C=this.jointMin-C;this.scale=-1;slack=false}else if(C>this.jointMax){C-=this.jointMax;this.scale=1;slack=false}else{this.scale=0;C=0;slack=true}var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError){return true}E*=.5;j=-E*this.kMass;if(this.equal||j<0){var _this=this.b1;var dr=-this.scale*j*this.b1.iinertia;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m;_this.axisx=nx}var _this1=this.b2;var dr1=this.ratio*this.scale*j*this.b2.iinertia;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1;_this1.axisx=nx1}}}return false},__class__:zpp_$nape_constraint_ZPP_$AngleJoint});var zpp_$nape_constraint_ZPP_$DistanceJoint=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.cx2=0;this.cx1=0;this.ny=0;this.nx=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.jAcc=0;this.jMax=Infinity;this.stepped=false;this.cx1=this.cx2=0};$hxClasses["zpp_nape.constraint.ZPP_DistanceJoint"]=zpp_$nape_constraint_ZPP_$DistanceJoint;zpp_$nape_constraint_ZPP_$DistanceJoint.__name__="zpp_nape.constraint.ZPP_DistanceJoint";zpp_$nape_constraint_ZPP_$DistanceJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$DistanceJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,jointMin:null,jointMax:null,slack:null,equal:null,nx:null,ny:null,cx1:null,cx2:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(x){this.a1localx=x.x;this.a1localy=x.y;this.wake()},setup_a1:function(){var x=this.a1localx;var y=this.a1localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a1=ret;this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(x){this.a2localx=x.x;this.a2localy=x.y;this.wake()},setup_a2:function(){var x=this.a2localx;var y=this.a2localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a2=ret;this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},wrap_a2:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var C=this.nx*this.nx+this.ny*this.ny;if(C<nape_Config.epsilon){this.nx=0;this.ny=0;C=0;this.slack=true}else{C=Math.sqrt(C);var t=1/C;this.nx*=t;this.ny*=t;if(this.equal){C-=this.jointMax;this.slack=false}else if(C<this.jointMin){C=this.jointMin-C;this.nx=-this.nx;this.ny=-this.ny;this.slack=false}else if(C>this.jointMax){C-=this.jointMax;this.slack=false}else{this.nx=0;this.ny=0;C=0;this.slack=true}}var C1=C;if(!this.slack){this.cx1=this.ny*this.a1relx-this.nx*this.a1rely;this.cx2=this.ny*this.a2relx-this.nx*this.a2rely;this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia;if(this.kMass!=0){this.kMass=1/this.kMass}else{this.jAcc=0}if(!this.stiff){if(this.breakUnderError&&C1*C1>this.maxError*this.maxError){return true}var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);var biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMass*=ig;this.bias=-C1*biasCoef;if(this.bias<-this.maxError){this.bias=-this.maxError}else if(this.bias>this.maxError){this.bias=this.maxError}}else{this.bias=0;this.gamma=0}this.jAcc*=dtratio;this.jMax=this.maxForce*dt}return false},warmStart:function(){if(!this.slack){var t=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*t;this.b1.vely-=this.ny*t;var t1=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t1;this.b2.vely+=this.ny*t1;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack){return false}var j=this.kMass*(this.bias-(this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1))-this.jAcc*this.gamma;var jOld=this.jAcc;this.jAcc+=j;if(!this.equal&&this.jAcc>0){this.jAcc=0}if(this.breakUnderForce&&this.jAcc<-this.jMax){return true}if(!this.stiff){if(this.jAcc<-this.jMax){this.jAcc=-this.jMax}}j=this.jAcc-jOld;var t=this.b1.imass*j;this.b1.velx-=this.nx*t;this.b1.vely-=this.ny*t;var t1=this.b2.imass*j;this.b2.velx+=this.nx*t1;this.b2.vely+=this.ny*t1;this.b1.angvel-=this.cx1*this.b1.iinertia*j;this.b2.angvel+=this.cx2*this.b2.iinertia*j;return false},applyImpulsePos:function(){var j;var r1x=0;var r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0;var r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var slack;var nx=0;var ny=0;nx=this.b2.posx+r2x-(this.b1.posx+r1x);ny=this.b2.posy+r2y-(this.b1.posy+r1y);var C=nx*nx+ny*ny;if(C<nape_Config.epsilon){nx=0;ny=0;C=0;slack=true}else{C=Math.sqrt(C);var t=1/C;nx*=t;ny*=t;if(this.equal){C-=this.jointMax;slack=false}else if(C<this.jointMin){C=this.jointMin-C;nx=-nx;ny=-ny;slack=false}else if(C>this.jointMax){C-=this.jointMax;slack=false}else{nx=0;ny=0;C=0;slack=true}}var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError){return true}if(E*E<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){return false}E*=.5;if(E*E>6){var k=this.b1.smass+this.b2.smass;if(k>nape_Config.epsilon){k=.75/k;j=-E*k;if(this.equal||j<0){var t1=j*this.b1.imass;this.b1.posx-=nx*t1;this.b1.posy-=ny*t1;var t2=j*this.b2.imass;this.b2.posx+=nx*t2;this.b2.posy+=ny*t2;nx=this.b2.posx+r2x-(this.b1.posx+r1x);ny=this.b2.posy+r2y-(this.b1.posy+r1y);var C1=nx*nx+ny*ny;if(C1<nape_Config.epsilon){nx=0;ny=0;C1=0}else{C1=Math.sqrt(C1);var t3=1/C1;nx*=t3;ny*=t3;if(this.equal){C1-=this.jointMax}else if(C1<this.jointMin){C1=this.jointMin-C1;nx=-nx;ny=-ny}else if(C1>this.jointMax){C1-=this.jointMax}else{nx=0;ny=0;C1=0}}E=C1;E*=.5}}}var cx1=ny*r1x-nx*r1y;var cx2=ny*r2x-nx*r2y;var k1=this.b1.smass+this.b2.smass+cx1*cx1*this.b1.sinertia+cx2*cx2*this.b2.sinertia;if(k1!=0){k1=1/k1}j=-E*k1;if(this.equal||j<0){var t4=this.b1.imass*j;this.b1.posx-=nx*t4;this.b1.posy-=ny*t4;var t5=this.b2.imass*j;this.b2.posx+=nx*t5;this.b2.posy+=ny*t5;var _this=this.b1;var dr=-cx1*this.b1.iinertia*j;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx1=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m;_this.axisx=nx1}var _this1=this.b2;var dr1=cx2*this.b2.iinertia*j;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx2=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1;_this1.axisx=nx2}}}return false},__class__:zpp_$nape_constraint_ZPP_$DistanceJoint});var zpp_$nape_constraint_ZPP_$LineJoint=function(){this.biasy=0;this.biasx=0;this.jAccy=0;this.jAccx=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_n=null;this.nrely=0;this.nrelx=0;this.nlocaly=0;this.nlocalx=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.cx2=0;this.cx1=0;this.dot2=0;this.dot1=0;this.equal=false;this.jointMax=0;this.jointMin=0;this.scale=0;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.nlocalx=0;this.nlocaly=0;this.nrelx=0;this.nrely=0;this.jAccx=0;this.jAccy=0;this.jMax=Infinity;this.jointMin=-Infinity;this.jointMax=Infinity;this.stepped=false};$hxClasses["zpp_nape.constraint.ZPP_LineJoint"]=zpp_$nape_constraint_ZPP_$LineJoint;zpp_$nape_constraint_ZPP_$LineJoint.__name__="zpp_nape.constraint.ZPP_LineJoint";zpp_$nape_constraint_ZPP_$LineJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$LineJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,scale:null,jointMin:null,jointMax:null,equal:null,dot1:null,dot2:null,cx1:null,cx2:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(x){this.a1localx=x.x;this.a1localy=x.y;this.wake()},setup_a1:function(){var x=this.a1localx;var y=this.a1localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a1=ret;this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(x){this.a2localx=x.x;this.a2localy=x.y;this.wake()},setup_a2:function(){var x=this.a2localx;var y=this.a2localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a2=ret;this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},wrap_a2:null,zip_n:null,nlocalx:null,nlocaly:null,nrelx:null,nrely:null,validate_n:function(){this.wrap_n.zpp_inner.x=this.nlocalx;this.wrap_n.zpp_inner.y=this.nlocaly},invalidate_n:function(x){this.nlocalx=x.x;this.nlocaly=x.y;this.zip_n=true;this.wake()},setup_n:function(){var x=this.nlocalx;var y=this.nlocaly;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_n=ret;this.wrap_n.zpp_inner._inuse=true;this.wrap_n.zpp_inner._validate=$bind(this,this.validate_n);this.wrap_n.zpp_inner._invalidate=$bind(this,this.invalidate_n)},wrap_n:null,validate_norm:function(){if(this.zip_n){this.zip_n=false;var imag=1/Math.sqrt(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly);this.nlocalx*=imag;this.nlocaly*=imag}},kMassa:null,kMassb:null,kMassc:null,jAccx:null,jAccy:null,jMax:null,gamma:null,biasx:null,biasy:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAccx=0;this.jAccy=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.equal=this.jointMin==this.jointMax;this.stepped=true;this.validate_norm();this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var dx=0;var dy=0;var Cx=0;var Cy=0;dx=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx;dy=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely;Cx=dy*this.nrelx-dx*this.nrely;Cy=this.nrelx*dx+this.nrely*dy;if(this.equal){Cy-=this.jointMin;this.scale=1}else if(Cy>this.jointMax){Cy-=this.jointMax;this.scale=1}else if(Cy<this.jointMin){Cy=this.jointMin-Cy;this.scale=-1}else{Cy=0;this.scale=0}var drx=0;var dry=0;drx=dx+this.a1relx;dry=dy+this.a1rely;this.dot1=this.nrelx*drx+this.nrely*dry;this.cx1=dry*this.nrelx-drx*this.nrely;this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely;this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely;this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia;this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia);this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb;var flag;if(det!=det){this.kMassa=this.kMassb=this.kMassc=0;flag=3}else if(det==0){var flag1=0;if(this.kMassa!=0){this.kMassa=1/this.kMassa}else{this.kMassa=0;flag1=1}if(this.kMassc!=0){this.kMassc=1/this.kMassc}else{this.kMassc=0;flag1|=2}this.kMassb=0;flag=flag1}else{det=1/det;var t=this.kMassc*det;this.kMassc=this.kMassa*det;this.kMassa=t;this.kMassb*=-det;flag=0}if((flag&1)!=0){this.jAccx=0}if((flag&2)!=0){this.jAccy=0}if(!this.stiff){if(this.breakUnderError&&Cx*Cx+Cy*Cy>this.maxError*this.maxError){return true}var biasCoef;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMassa*=ig;this.kMassb*=ig;this.kMassc*=ig;this.biasx=Cx;this.biasy=Cy;var t1=-biasCoef;this.biasx*=t1;this.biasy*=t1;var t2=this.maxError;var ls=this.biasx*this.biasx+this.biasy*this.biasy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.biasx*=t3;this.biasy*=t3}}else{this.gamma=0;this.biasx=0;this.biasy=0}this.jAccx*=dtratio;this.jAccy*=dtratio;this.jMax=this.maxForce*dt;return false},warmStart:function(){var J2x=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx;var J2y=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;var t=this.b1.imass;this.b1.velx-=J2x*t;this.b1.vely-=J2y*t;var t1=this.b2.imass;this.b2.velx+=J2x*t1;this.b2.vely+=J2y*t1;this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia;this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},applyImpulseVel:function(){var Ex=0;var Ey=0;var dvx=0;var dvy=0;dvx=this.b2.velx-this.b1.velx;dvy=this.b2.vely-this.b1.vely;dvx+=this.b2.kinvelx-this.b1.kinvelx;dvy+=this.b2.kinvely-this.b1.kinvely;Ex=dvy*this.nrelx-dvx*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1;Ey=this.scale*(this.nrelx*dvx+this.nrely*dvy-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var Jx=0;var Jy=0;Jx=this.biasx-Ex;Jy=this.biasy-Ey;var t=this.kMassa*Jx+this.kMassb*Jy;Jy=this.kMassb*Jx+this.kMassc*Jy;Jx=t;var t1=this.gamma;Jx-=this.jAccx*t1;Jy-=this.jAccy*t1;var jOldx=0;var jOldy=0;jOldx=this.jAccx;jOldy=this.jAccy;this.jAccx+=Jx;this.jAccy+=Jy;if(this.jAccy>0){this.jAccy=0}if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax){return true}}else if(!this.stiff){var t2=this.jMax;var ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.jAccx*=t3;this.jAccy*=t3}}Jx=this.jAccx-jOldx;Jy=this.jAccy-jOldy;var J2x=this.scale*this.nrelx*Jy-this.nrely*Jx;var J2y=this.nrelx*Jx+this.scale*this.nrely*Jy;var t4=this.b1.imass;this.b1.velx-=J2x*t4;this.b1.vely-=J2y*t4;var t5=this.b2.imass;this.b2.velx+=J2x*t5;this.b2.vely+=J2y*t5;this.b1.angvel+=(this.scale*this.cx1*Jy-this.dot1*Jx)*this.b1.iinertia;this.b2.angvel+=(this.dot2*Jx-this.scale*this.cx2*Jy)*this.b2.iinertia;return false},applyImpulsePos:function(){var nx=0;var ny=0;nx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly;ny=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var r1x=0;var r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0;var r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var dx=0;var dy=0;var scale;var Ex=0;var Ey=0;dx=this.b2.posx+r2x-this.b1.posx-r1x;dy=this.b2.posy+r2y-this.b1.posy-r1y;Ex=dy*nx-dx*ny;Ey=nx*dx+ny*dy;if(this.equal){Ey-=this.jointMin;scale=1}else if(Ey>this.jointMax){Ey-=this.jointMax;scale=1}else if(Ey<this.jointMin){Ey=this.jointMin-Ey;scale=-1}else{Ey=0;scale=0}if(this.breakUnderError&&Ex*Ex+Ey*Ey>this.maxError*this.maxError){return true}if(Ex*Ex+Ey*Ey<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){return false}var Jx=0;var Jy=0;Ex*=.5;Ey*=.5;if(Ex*Ex+Ey*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape_Config.epsilon){k=.8/k;var Jx1=k*(ny*Ex-scale*nx*Ey);var Jy1=k*(nx*Ex*scale-ny*Ex);var t=this.b1.imass;this.b1.posx-=Jx1*t;this.b1.posy-=Jy1*t;var t1=this.b2.imass;this.b2.posx+=Jx1*t1;this.b2.posy+=Jy1*t1;dx=this.b2.posx+r2x-this.b1.posx-r1x;dy=this.b2.posy+r2y-this.b1.posy-r1y;Ex=dy*nx-dx*ny;Ey=nx*dx+ny*dy;if(this.equal){Ey-=this.jointMin;scale=1}else if(Ey>this.jointMax){Ey-=this.jointMax;scale=1}else if(Ey<this.jointMin){Ey=this.jointMin-Ey;scale=-1}else{Ey=0;scale=0}Ex*=.5;Ey*=.5}}var dot1;var dot2;var cx1;var cx2;var Ka=0;var Kb=0;var Kc=0;var drx=0;var dry=0;drx=dx+r1x;dry=dy+r1y;dot1=nx*drx+ny*dry;cx1=dry*nx-drx*ny;dot2=nx*r2x+ny*r2y;cx2=r2y*nx-r2x*ny;Ka=this.b1.smass+this.b2.smass+dot1*dot1*this.b1.sinertia+dot2*dot2*this.b2.sinertia;Kb=-scale*(dot1*cx1*this.b1.sinertia+dot2*cx2*this.b2.sinertia);Kc=scale*scale*(this.b1.smass+this.b2.smass+cx1*cx1*this.b1.sinertia+cx2*cx2*this.b2.sinertia);Jx=-Ex;Jy=-Ey;var det=Ka*Kc-Kb*Kb;if(det!=det){Jy=0;Jx=Jy}else if(det==0){if(Ka!=0){Jx/=Ka}else{Jx=0}if(Kc!=0){Jy/=Kc}else{Jy=0}}else{det=1/det;var t2=det*(Kc*Jx-Kb*Jy);Jy=det*(Ka*Jy-Kb*Jx);Jx=t2}if(Jy>0){Jy=0}var J2x=scale*nx*Jy-ny*Jx;var J2y=nx*Jx+scale*ny*Jy;var t3=this.b1.imass;this.b1.posx-=J2x*t3;this.b1.posy-=J2y*t3;var t4=this.b2.imass;this.b2.posx+=J2x*t4;this.b2.posy+=J2y*t4;var _this=this.b1;var dr=(scale*cx1*Jy-dot1*Jx)*this.b1.iinertia;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx1=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m;_this.axisx=nx1}var _this1=this.b2;var dr1=(dot2*Jx-scale*cx2*Jy)*this.b2.iinertia;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx2=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1;_this1.axisx=nx2}return false},__class__:zpp_$nape_constraint_ZPP_$LineJoint});var zpp_$nape_constraint_ZPP_$MotorJoint=function(){this.stepped=false;this.jMax=0;this.jAcc=0;this.kMass=0;this.b2=null;this.b1=null;this.rate=0;this.ratio=0;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.jAcc=0;this.stepped=false;this.__velocity=true};$hxClasses["zpp_nape.constraint.ZPP_MotorJoint"]=zpp_$nape_constraint_ZPP_$MotorJoint;zpp_$nape_constraint_ZPP_$MotorJoint.__name__="zpp_nape.constraint.ZPP_MotorJoint";zpp_$nape_constraint_ZPP_$MotorJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$MotorJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,ratio:null,rate:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,b2:null,kMass:null,jAcc:null,jMax:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia;this.kMass=1/this.kMass;this.jAcc*=dtratio;this.jMax=this.maxForce*dt;return false},warmStart:function(){this.b1.angvel-=this.b1.iinertia*this.jAcc;this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},applyImpulseVel:function(){var j=-this.kMass*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate);var jOld=this.jAcc;this.jAcc+=j;if(this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax){return true}}else if(this.jAcc<-this.jMax){this.jAcc=-this.jMax}else if(this.jAcc>this.jMax){this.jAcc=this.jMax}j=this.jAcc-jOld;this.b1.angvel-=this.b1.iinertia*j;this.b2.angvel+=this.ratio*this.b2.iinertia*j;return false},applyImpulsePos:function(){return false},__class__:zpp_$nape_constraint_ZPP_$MotorJoint});var zpp_$nape_constraint_ZPP_$PivotJoint=function(){this.stepped=false;this.biasy=0;this.biasx=0;this.gamma=0;this.jMax=0;this.jAccy=0;this.jAccx=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.stepped=false;this.jAccx=0;this.jAccy=0;this.jMax=Infinity;this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0};$hxClasses["zpp_nape.constraint.ZPP_PivotJoint"]=zpp_$nape_constraint_ZPP_$PivotJoint;zpp_$nape_constraint_ZPP_$PivotJoint.__name__="zpp_nape.constraint.ZPP_PivotJoint";zpp_$nape_constraint_ZPP_$PivotJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$PivotJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(x){this.a1localx=x.x;this.a1localy=x.y;this.wake()},setup_a1:function(){var x=this.a1localx;var y=this.a1localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a1=ret;this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(x){this.a2localx=x.x;this.a2localy=x.y;this.wake()},setup_a2:function(){var x=this.a2localx;var y=this.a2localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a2=ret;this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},wrap_a2:null,kMassa:null,kMassb:null,kMassc:null,jAccx:null,jAccy:null,jMax:null,gamma:null,biasx:null,biasy:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAccx=0;this.jAccy=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var m=this.b1.smass+this.b2.smass;this.kMassa=m;this.kMassb=0;this.kMassc=m;if(this.b1.sinertia!=0){var Y=this.a1rely*this.b1.sinertia;this.kMassa+=Y*this.a1rely;this.kMassb+=-Y*this.a1relx;this.kMassc+=this.a1relx*this.b1.sinertia*this.a1relx}if(this.b2.sinertia!=0){var Y1=this.a2rely*this.b2.sinertia;this.kMassa+=Y1*this.a2rely;this.kMassb+=-Y1*this.a2relx;this.kMassc+=this.a2relx*this.b2.sinertia*this.a2relx}var det=this.kMassa*this.kMassc-this.kMassb*this.kMassb;var flag;if(det!=det){this.kMassa=this.kMassb=this.kMassc=0;flag=3}else if(det==0){var flag1=0;if(this.kMassa!=0){this.kMassa=1/this.kMassa}else{this.kMassa=0;flag1=1}if(this.kMassc!=0){this.kMassc=1/this.kMassc}else{this.kMassc=0;flag1|=2}this.kMassb=0;flag=flag1}else{det=1/det;var t=this.kMassc*det;this.kMassc=this.kMassa*det;this.kMassa=t;this.kMassb*=-det;flag=0}if((flag&1)!=0){this.jAccx=0}if((flag&2)!=0){this.jAccy=0}if(!this.stiff){var biasCoef;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMassa*=ig;this.kMassb*=ig;this.kMassc*=ig;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError){return true}var t1=-biasCoef;this.biasx*=t1;this.biasy*=t1;var t2=this.maxError;var ls=this.biasx*this.biasx+this.biasy*this.biasy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.biasx*=t3;this.biasy*=t3}}else{this.biasx=0;this.biasy=0;this.gamma=0}this.jAccx*=dtratio;this.jAccy*=dtratio;this.jMax=this.maxForce*dt;return false},warmStart:function(){var t=this.b1.imass;this.b1.velx-=this.jAccx*t;this.b1.vely-=this.jAccy*t;var t1=this.b2.imass;this.b2.velx+=this.jAccx*t1;this.b2.vely+=this.jAccy*t1;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},applyImpulseVel:function(){var Ex=0;var Ey=0;Ex=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));Ey=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var Jx=0;var Jy=0;Jx=this.biasx-Ex;Jy=this.biasy-Ey;var t=this.kMassa*Jx+this.kMassb*Jy;Jy=this.kMassb*Jx+this.kMassc*Jy;Jx=t;var t1=this.gamma;Jx-=this.jAccx*t1;Jy-=this.jAccy*t1;var jOldx=0;var jOldy=0;jOldx=this.jAccx;jOldy=this.jAccy;this.jAccx+=Jx;this.jAccy+=Jy;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax){return true}}else if(!this.stiff){var t2=this.jMax;var ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(ls>t2*t2){var t3=t2*(1/Math.sqrt(ls));this.jAccx*=t3;this.jAccy*=t3}}Jx=this.jAccx-jOldx;Jy=this.jAccy-jOldy;var t4=this.b1.imass;this.b1.velx-=Jx*t4;this.b1.vely-=Jy*t4;var t5=this.b2.imass;this.b2.velx+=Jx*t5;this.b2.vely+=Jy*t5;this.b1.angvel-=(Jy*this.a1relx-Jx*this.a1rely)*this.b1.iinertia;this.b2.angvel+=(Jy*this.a2relx-Jx*this.a2rely)*this.b2.iinertia;return false},applyImpulsePos:function(){var r1x=0;var r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0;var r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var Ex=0;var Ey=0;Ex=this.b2.posx+r2x-(this.b1.posx+r1x);Ey=this.b2.posy+r2y-(this.b1.posy+r1y);if(this.breakUnderError&&Ex*Ex+Ey*Ey>this.maxError*this.maxError){return true}if(Ex*Ex+Ey*Ey<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){return false}Ex*=.5;Ey*=.5;var Jx=0;var Jy=0;if(Ex*Ex+Ey*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape_Config.epsilon){k=.75/k;Jx=-Ex*k;Jy=-Ey*k;var ls=Jx*Jx+Jy*Jy;if(ls>400){var t=20*(1/Math.sqrt(ls));Jx*=t;Jy*=t}var t1=this.b1.imass;this.b1.posx-=Jx*t1;this.b1.posy-=Jy*t1;var t2=this.b2.imass;this.b2.posx+=Jx*t2;this.b2.posy+=Jy*t2;Ex=this.b2.posx+r2x-(this.b1.posx+r1x);Ey=this.b2.posy+r2y-(this.b1.posy+r1y);Ex*=.5;Ey*=.5}}var Ka=0;var Kb=0;var Kc=0;var m=this.b1.smass+this.b2.smass;Ka=m;Kb=0;Kc=m;if(this.b1.sinertia!=0){var Y=r1y*this.b1.sinertia;Ka=m+Y*r1y;Kb+=-Y*r1x;Kc=m+r1x*this.b1.sinertia*r1x}if(this.b2.sinertia!=0){var Y1=r2y*this.b2.sinertia;Ka+=Y1*r2y;Kb+=-Y1*r2x;Kc+=r2x*this.b2.sinertia*r2x}Jx=-Ex;Jy=-Ey;var ls1=Jx*Jx+Jy*Jy;if(ls1>36){var t3=6*(1/Math.sqrt(ls1));Jx*=t3;Jy*=t3}var det=Ka*Kc-Kb*Kb;if(det!=det){Jy=0;Jx=Jy}else if(det==0){if(Ka!=0){Jx/=Ka}else{Jx=0}if(Kc!=0){Jy/=Kc}else{Jy=0}}else{det=1/det;var t4=det*(Kc*Jx-Kb*Jy);Jy=det*(Ka*Jy-Kb*Jx);Jx=t4}var t5=this.b1.imass;this.b1.posx-=Jx*t5;this.b1.posy-=Jy*t5;var t6=this.b2.imass;this.b2.posx+=Jx*t6;this.b2.posy+=Jy*t6;var _this=this.b1;var dr=-(Jy*r1x-Jx*r1y)*this.b1.iinertia;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m1=1-d2*d2/8;var nx=(p*_this.axisx+dr*_this.axisy)*m1;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m1;_this.axisx=nx}var _this1=this.b2;var dr1=(Jy*r2x-Jx*r2y)*this.b2.iinertia;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m2=1-d21*d21/8;var nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m2;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m2;_this1.axisx=nx1}return false},__class__:zpp_$nape_constraint_ZPP_$PivotJoint});var zpp_$nape_constraint_ZPP_$PulleyJoint=function(){this.stepped=false;this.bias=0;this.gamma=0;this.jMax=0;this.jAcc=0;this.kMass=0;this.wrap_a4=null;this.a4rely=0;this.a4relx=0;this.a4localy=0;this.a4localx=0;this.b4=null;this.wrap_a3=null;this.a3rely=0;this.a3relx=0;this.a3localy=0;this.a3localx=0;this.b3=null;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.cx4=0;this.cx3=0;this.cx2=0;this.cx1=0;this.n34y=0;this.n34x=0;this.n12y=0;this.n12x=0;this.equal=false;this.slack=false;this.jointMax=0;this.jointMin=0;this.ratio=1;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0;this.a3localx=0;this.a3localy=0;this.a3relx=0;this.a3rely=0;this.a4localx=0;this.a4localy=0;this.a4relx=0;this.a4rely=0;this.n12x=1;this.n12y=0;this.n34x=1;this.n34y=0;this.jAcc=0;this.jMax=Infinity;this.stepped=false;this.cx1=this.cx2=this.cx3=this.cx4=0};$hxClasses["zpp_nape.constraint.ZPP_PulleyJoint"]=zpp_$nape_constraint_ZPP_$PulleyJoint;zpp_$nape_constraint_ZPP_$PulleyJoint.__name__="zpp_nape.constraint.ZPP_PulleyJoint";zpp_$nape_constraint_ZPP_$PulleyJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$PulleyJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,ratio:null,jointMin:null,jointMax:null,slack:null,equal:null,n12x:null,n12y:null,n34x:null,n34y:null,cx1:null,cx2:null,cx3:null,cx4:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}if(this.b3!=this.b1&&this.b3!=this.b2){if(this.b3!=null){this.b3.constraints.add(this)}}if(this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3){if(this.b4!=null){this.b4.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}if(this.b3!=this.b1&&this.b3!=this.b2){if(this.b3!=null){this.b3.constraints.remove(this)}}if(this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3){if(this.b4!=null){this.b4.constraints.remove(this)}}},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(x){this.a1localx=x.x;this.a1localy=x.y;this.wake()},setup_a1:function(){var x=this.a1localx;var y=this.a1localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a1=ret;this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(x){this.a2localx=x.x;this.a2localy=x.y;this.wake()},setup_a2:function(){var x=this.a2localx;var y=this.a2localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a2=ret;this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},wrap_a2:null,b3:null,a3localx:null,a3localy:null,a3relx:null,a3rely:null,validate_a3:function(){this.wrap_a3.zpp_inner.x=this.a3localx;this.wrap_a3.zpp_inner.y=this.a3localy},invalidate_a3:function(x){this.a3localx=x.x;this.a3localy=x.y;this.wake()},setup_a3:function(){var x=this.a3localx;var y=this.a3localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a3=ret;this.wrap_a3.zpp_inner._inuse=true;this.wrap_a3.zpp_inner._validate=$bind(this,this.validate_a3);this.wrap_a3.zpp_inner._invalidate=$bind(this,this.invalidate_a3)},wrap_a3:null,b4:null,a4localx:null,a4localy:null,a4relx:null,a4rely:null,validate_a4:function(){this.wrap_a4.zpp_inner.x=this.a4localx;this.wrap_a4.zpp_inner.y=this.a4localy},invalidate_a4:function(x){this.a4localx=x.x;this.a4localy=x.y;this.wake()},setup_a4:function(){var x=this.a4localx;var y=this.a4localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a4=ret;this.wrap_a4.zpp_inner._inuse=true;this.wrap_a4.zpp_inner._validate=$bind(this,this.validate_a4);this.wrap_a4.zpp_inner._invalidate=$bind(this,this.invalidate_a4)},wrap_a4:null,kMass:null,jAcc:null,jMax:null,gamma:null,bias:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}if(this.b3!=null&&this.b3.type==2){this.b3.wake()}if(this.b4!=null&&this.b4.type==2){this.b4.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}if(this.b3.type==2){var xr2;if(this.b3.component==this.b3.component.parent){xr2=this.b3.component}else{var obj4=this.b3.component;var stack4=null;while(obj4!=obj4.parent){var nxt8=obj4.parent;obj4.parent=stack4;stack4=obj4;obj4=nxt8}while(stack4!=null){var nxt9=stack4.parent;stack4.parent=obj4;stack4=nxt9}xr2=obj4}var yr2;if(this.component==this.component.parent){yr2=this.component}else{var obj5=this.component;var stack5=null;while(obj5!=obj5.parent){var nxt10=obj5.parent;obj5.parent=stack5;stack5=obj5;obj5=nxt10}while(stack5!=null){var nxt11=stack5.parent;stack5.parent=obj5;stack5=nxt11}yr2=obj5}if(xr2!=yr2){if(xr2.rank<yr2.rank){xr2.parent=yr2}else if(xr2.rank>yr2.rank){yr2.parent=xr2}else{yr2.parent=xr2;xr2.rank++}}}if(this.b4.type==2){var xr3;if(this.b4.component==this.b4.component.parent){xr3=this.b4.component}else{var obj6=this.b4.component;var stack6=null;while(obj6!=obj6.parent){var nxt12=obj6.parent;obj6.parent=stack6;stack6=obj6;obj6=nxt12}while(stack6!=null){var nxt13=stack6.parent;stack6.parent=obj6;stack6=nxt13}xr3=obj6}var yr3;if(this.component==this.component.parent){yr3=this.component}else{var obj7=this.component;var stack7=null;while(obj7!=obj7.parent){var nxt14=obj7.parent;obj7.parent=stack7;stack7=obj7;obj7=nxt14}while(stack7!=null){var nxt15=stack7.parent;stack7.parent=obj7;stack7=nxt15}yr3=obj7}if(xr3!=yr3){if(xr3.rank<yr3.rank){xr3.parent=yr3}else if(xr3.rank>yr3.rank){yr3.parent=xr3}else{yr3.parent=xr3;xr3.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&(this.b2.id==di||this.b3.id==di||this.b4.id==di)||this.b2.id==id&&(this.b3.id==di||this.b4.id==di||this.b1.id==di)||this.b3.id==id&&(this.b4.id==di||this.b1.id==di||this.b2.id==di))){if(this.b4.id==id){if(!(this.b1.id==di||this.b2.id==di)){return this.b3.id==di}else{return true}}else{return false}}else{return true}},clearcache:function(){this.jAcc=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.equal=this.jointMin==this.jointMax;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var t12x=0;var t12y=0;var t34x=0;var t34y=0;t12x=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);t12y=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);t34x=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx);t34y=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var C12=Math.sqrt(t12x*t12x+t12y*t12y);var C34=Math.sqrt(t34x*t34x+t34y*t34y);if(C12!=0){var t=1/C12;this.n12x=t12x*t;this.n12y=t12y*t}if(C34!=0){var t1=1/C34;this.n34x=t34x*t1;this.n34y=t34y*t1;var t2=this.ratio;this.n34x*=t2;this.n34y*=t2}else{var t3=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=t3;this.n34y*=t3}var C=C12+this.ratio*C34;if(this.equal){C-=this.jointMax;this.slack=false}else if(C<this.jointMin){C=this.jointMin-C;this.n12x=-this.n12x;this.n12y=-this.n12y;this.n34x=-this.n34x;this.n34y=-this.n34y;this.slack=false}else if(C>this.jointMax){C-=this.jointMax;this.slack=false}else{this.n12x=0;this.n12y=0;this.n34x=0;this.n34y=0;C=0;this.slack=true}var C1=C;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely;this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely;this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely;this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var K=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4){K-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)}if(this.b1==this.b3){K+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)}if(this.b2==this.b3){K-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)}if(this.b2==this.b4){K+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)}this.kMass=K;if(this.kMass!=0){this.kMass=1/this.kMass}else{this.jAcc=0}if(!this.stiff){if(this.breakUnderError&&C1*C1>this.maxError*this.maxError){return true}var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);var biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMass*=ig;this.bias=-C1*biasCoef;if(this.bias<-this.maxError){this.bias=-this.maxError}else if(this.bias>this.maxError){this.bias=this.maxError}}else{this.bias=0;this.gamma=0}this.jAcc*=dtratio;this.jMax=this.maxForce*dt}return false},warmStart:function(){if(!this.slack){var t=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*t;this.b1.vely-=this.n12y*t;var t1=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t1;this.b2.vely+=this.n12y*t1;var t2=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*t2;this.b3.vely-=this.n34y*t2;var t3=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*t3;this.b4.vely+=this.n34y*t3;this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc;this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc;this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc;this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},applyImpulseVel:function(){if(this.slack){return false}var j=this.kMass*(this.bias-(this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3))-this.jAcc*this.gamma;var jOld=this.jAcc;this.jAcc+=j;if(!this.equal&&this.jAcc>0){this.jAcc=0}if(this.breakUnderForce&&this.jAcc<-this.jMax){return true}if(!this.stiff){if(this.jAcc<-this.jMax){this.jAcc=-this.jMax}}j=this.jAcc-jOld;var t=this.b1.imass*j;this.b1.velx-=this.n12x*t;this.b1.vely-=this.n12y*t;var t1=this.b2.imass*j;this.b2.velx+=this.n12x*t1;this.b2.vely+=this.n12y*t1;var t2=this.b3.imass*j;this.b3.velx-=this.n34x*t2;this.b3.vely-=this.n34y*t2;var t3=this.b4.imass*j;this.b4.velx+=this.n34x*t3;this.b4.vely+=this.n34y*t3;this.b1.angvel-=this.cx1*this.b1.iinertia*j;this.b2.angvel+=this.cx2*this.b2.iinertia*j;this.b3.angvel-=this.cx3*this.b3.iinertia*j;this.b4.angvel+=this.cx4*this.b4.iinertia*j;return false},applyImpulsePos:function(){var j;var r1x=0;var r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0;var r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r3x=0;var r3y=0;r3x=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy;r3y=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var r4x=0;var r4y=0;r4x=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy;r4y=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var slack;var n12x=0;var n12y=0;var n34x=0;var n34y=0;n12x=this.n12x;n12y=this.n12y;n34x=this.n34x;n34y=this.n34y;var t12x=0;var t12y=0;var t34x=0;var t34y=0;t12x=this.b2.posx+r2x-(this.b1.posx+r1x);t12y=this.b2.posy+r2y-(this.b1.posy+r1y);t34x=this.b4.posx+r4x-(this.b3.posx+r3x);t34y=this.b4.posy+r4y-(this.b3.posy+r3y);var C12=Math.sqrt(t12x*t12x+t12y*t12y);var C34=Math.sqrt(t34x*t34x+t34y*t34y);if(C12!=0){var t=1/C12;n12x=t12x*t;n12y=t12y*t}if(C34!=0){var t1=1/C34;n34x=t34x*t1;n34y=t34y*t1;var t2=this.ratio;n34x*=t2;n34y*=t2}else{var t3=this.ratio/Math.sqrt(n34x*n34x+n34y*n34y);n34x*=t3;n34y*=t3}var C=C12+this.ratio*C34;if(this.equal){C-=this.jointMax;slack=false}else if(C<this.jointMin){C=this.jointMin-C;n12x=-n12x;n12y=-n12y;n34x=-n34x;n34y=-n34y;slack=false}else if(C>this.jointMax){C-=this.jointMax;slack=false}else{n12x=0;n12y=0;n34x=0;n34y=0;C=0;slack=true}var E=C;if(!slack){if(this.breakUnderError&&E*E>this.maxError*this.maxError){return true}if(E*E<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){return false}E*=.5;if(E*E>6){var k=this.b1.smass+this.b2.smass;if(k>nape_Config.epsilon){k=.75/k;j=-E*k;if(this.equal||j<0){var t4=j*this.b1.imass;this.b1.posx-=n12x*t4;this.b1.posy-=n12y*t4;var t5=j*this.b2.imass;this.b2.posx+=n12x*t5;this.b2.posy+=n12y*t5;var t6=j*this.b3.imass;this.b3.posx-=n34x*t6;this.b3.posy-=n34y*t6;var t7=j*this.b4.imass;this.b4.posx+=n34x*t7;this.b4.posy+=n34y*t7;var t12x1=0;var t12y1=0;var t34x1=0;var t34y1=0;t12x1=this.b2.posx+r2x-(this.b1.posx+r1x);t12y1=this.b2.posy+r2y-(this.b1.posy+r1y);t34x1=this.b4.posx+r4x-(this.b3.posx+r3x);t34y1=this.b4.posy+r4y-(this.b3.posy+r3y);var C121=Math.sqrt(t12x1*t12x1+t12y1*t12y1);var C341=Math.sqrt(t34x1*t34x1+t34y1*t34y1);if(C121!=0){var t8=1/C121;n12x=t12x1*t8;n12y=t12y1*t8}if(C341!=0){var t9=1/C341;n34x=t34x1*t9;n34y=t34y1*t9;var t10=this.ratio;n34x*=t10;n34y*=t10}else{var t11=this.ratio/Math.sqrt(n34x*n34x+n34y*n34y);n34x*=t11;n34y*=t11}var C1=C121+this.ratio*C341;if(this.equal){C1-=this.jointMax}else if(C1<this.jointMin){C1=this.jointMin-C1;n12x=-n12x;n12y=-n12y;n34x=-n34x;n34y=-n34y}else if(C1>this.jointMax){C1-=this.jointMax}else{n12x=0;n12y=0;n34x=0;n34y=0;C1=0}E=C1;E*=.5}}}var cx1=n12y*r1x-n12x*r1y;var cx2=n12y*r2x-n12x*r2y;var cx3=n34y*r3x-n34x*r3y;var cx4=n34y*r4x-n34x*r4y;var K=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*cx1*cx1+this.b2.sinertia*cx2*cx2+this.b3.sinertia*cx3*cx3+this.b4.sinertia*cx4*cx4;if(this.b1==this.b4){K-=2*((n12x*n34x+n12y*n34y)*this.b1.smass+cx1*cx4*this.b1.sinertia)}if(this.b1==this.b3){K+=2*((n12x*n34x+n12y*n34y)*this.b1.smass+cx1*cx3*this.b1.sinertia)}if(this.b2==this.b3){K-=2*((n12x*n34x+n12y*n34y)*this.b2.smass+cx2*cx3*this.b2.sinertia)}if(this.b2==this.b4){K+=2*((n12x*n34x+n12y*n34y)*this.b2.smass+cx2*cx4*this.b2.sinertia)}var k1=K;if(k1!=0){k1=1/k1}j=-E*k1;if(this.equal||j<0){var t12=this.b1.imass*j;this.b1.posx-=n12x*t12;this.b1.posy-=n12y*t12;var t13=this.b2.imass*j;this.b2.posx+=n12x*t13;this.b2.posy+=n12y*t13;var t14=this.b3.imass*j;this.b3.posx-=n34x*t14;this.b3.posy-=n34y*t14;var t15=this.b4.imass*j;this.b4.posx+=n34x*t15;this.b4.posy+=n34y*t15;var _this=this.b1;var dr=-cx1*this.b1.iinertia*j;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m;_this.axisx=nx}var _this1=this.b2;var dr1=cx2*this.b2.iinertia*j;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1;_this1.axisx=nx1}var _this2=this.b3;var dr2=-cx3*this.b3.iinertia*j;_this2.rot+=dr2;if(dr2*dr2>1e-4){_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}else{var d22=dr2*dr2;var p2=1-.5*d22;var m2=1-d22*d22/8;var nx2=(p2*_this2.axisx+dr2*_this2.axisy)*m2;_this2.axisy=(p2*_this2.axisy-dr2*_this2.axisx)*m2;_this2.axisx=nx2}var _this3=this.b4;var dr3=cx4*this.b4.iinertia*j;_this3.rot+=dr3;if(dr3*dr3>1e-4){_this3.axisx=Math.sin(_this3.rot);_this3.axisy=Math.cos(_this3.rot)}else{var d23=dr3*dr3;var p3=1-.5*d23;var m3=1-d23*d23/8;var nx3=(p3*_this3.axisx+dr3*_this3.axisy)*m3;_this3.axisy=(p3*_this3.axisy-dr3*_this3.axisx)*m3;_this3.axisx=nx3}}}return false},__class__:zpp_$nape_constraint_ZPP_$PulleyJoint});var zpp_$nape_constraint_ZPP_$UserConstraint=function(dim,velonly){this.jOld=null;this.J=null;this.vec3=null;this.Keff=null;this.jMax=0;this.velonly=false;this.gamma=0;this.soft=0;this.y=null;this.L=null;this.stepped=false;this.bias=null;this.jAcc=null;this.dim=0;this.bodies=null;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.bodies=[];this.dim=dim;this.velonly=velonly;this.jAcc=[];this.bias=[];this.L=[];this.J=[];this.jOld=[];this.y=[];this.Keff=[];this.vec3=nape_geom_Vec3.get(0,0,0);var _g=0;while(_g<dim){var i=_g++;this.J[i]=this.jOld[i]=this.y[i]=0;this.bias[i]=0;this.jAcc[i]=0;var _g1=0;while(_g1<dim)this.L[i*dim+_g1++]=0}this.stepped=false};$hxClasses["zpp_nape.constraint.ZPP_UserConstraint"]=zpp_$nape_constraint_ZPP_$UserConstraint;zpp_$nape_constraint_ZPP_$UserConstraint.__name__="zpp_nape.constraint.ZPP_UserConstraint";zpp_$nape_constraint_ZPP_$UserConstraint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$UserConstraint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,bodies:null,dim:null,jAcc:null,bias:null,activeBodies:function(){var _g=0;var _g1=this.bodies;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.body!=null){b.body.constraints.add(this)}}},inactiveBodies:function(){var _g=0;var _g1=this.bodies;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.body!=null){b.body.constraints.remove(this)}}},stepped:null,wake_connected:function(){var _g=0;var _g1=this.bodies;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.body.type==2){b.body.wake()}}},forest:function(){var _g=0;var _g1=this.bodies;while(_g<_g1.length){var b=_g1[_g];++_g;if(b.body.type==2){var xr;if(b.body.component==b.body.component.parent){xr=b.body.component}else{var obj=b.body.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}}},pair_exists:function(id,di){var ret=false;var bl=this.bodies.length|0;var _g=0;while(_g<bl){var bi=_g++;var b=this.bodies[bi].body;var _g1=bi+1;while(_g1<bl){var c=this.bodies[_g1++].body;if(b.id==id&&c.id==di||b.id==di&&c.id==id){ret=true;break}}if(ret){break}}return ret},broken:function(){},clearcache:function(){var _g=0;var _g1=this.dim;while(_g<_g1)this.jAcc[_g++]=0;this.pre_dt=-1},lsq:function(v){var sum=0;var _g=0;var _g1=this.dim;while(_g<_g1){var i=_g++;sum+=v[i]*v[i]}return sum},_clamp:function(v,max){var x=this.lsq(v);if(x>max*max){var scale=max/Math.sqrt(x);var _g=0;var _g1=this.dim;while(_g<_g1)v[_g++]*=scale}},L:null,solve:function(m){var ind=0;var _g=0;var _g1=this.dim;while(_g<_g1){var j=_g++;var sum=0;var _g2=0;var _g11=j-1;while(_g2<_g11){var k=_g2++;sum+=this.L[j*this.dim+k]*this.L[j*this.dim+k]}var rec=Math.sqrt(m[ind++]-sum);this.L[j*this.dim+j]=rec;if(rec!=0){rec=1/rec;var _g21=j+1;var _g3=this.dim;while(_g21<_g3){var i=_g21++;var sum1=0;var _g22=0;var _g31=j-1;while(_g22<_g31){var k1=_g22++;sum1+=this.L[i*this.dim+k1]*this.L[j*this.dim+k1]}this.L[i*this.dim+j]=rec*(m[ind++]-sum1)}}else{var _g23=j+1;var _g32=this.dim;while(_g23<_g32)this.L[_g23++*this.dim+j]=0;ind+=this.dim-j-1}}return this.L},y:null,transform:function(L,x){var _g=0;var _g1=this.dim;while(_g<_g1){var i=_g++;var sum=x[i];var lii=L[i*this.dim+i];if(lii!=0){var _g2=0;while(_g2<i){var k=_g2++;sum-=L[i*this.dim+k]*this.y[k]}this.y[i]=sum/lii}else{this.y[i]=0}}var _g21=0;var _g3=this.dim;while(_g21<_g3){var i1=this.dim-1-_g21++;var lii1=L[i1*this.dim+i1];if(lii1!=0){var sum1=this.y[i1];var _g22=i1+1;var _g31=this.dim;while(_g22<_g31){var k1=_g22++;sum1-=L[k1*this.dim+i1]*x[k1]}x[i1]=sum1/lii1}else{x[i1]=0}}},soft:null,gamma:null,velonly:null,jMax:null,Keff:null,preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.L=this.solve(this.Keff);if(!this.stiff&&!this.velonly){var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);var biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.soft=ig;if(this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError){return true}var _g=0;var _g1=this.dim;while(_g<_g1)this.bias[_g++]*=-biasCoef;this._clamp(this.bias,this.maxError)}else{var _g2=0;var _g11=this.dim;while(_g2<_g11)this.bias[_g2++]=0;this.gamma=0;this.soft=1}var _g3=0;var _g12=this.dim;while(_g3<_g12)this.jAcc[_g3++]*=dtratio;this.jMax=this.maxForce*dt;return false},vec3:null,warmStart:function(){var _g=0;var _g1=this.bodies;while(_g<_g1.length){var b=_g1[_g++].body;var t=b.imass;var b1=b.velx;var _this=this.vec3;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}b.velx=b1+_this.zpp_inner.x*t;var b2=b.vely;var _this2=this.vec3;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}b.vely=b2+_this2.zpp_inner.y*t;var b3=b.angvel;var _this4=this.vec3;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}b.angvel=b3+_this4.zpp_inner.z*b.iinertia}},J:null,jOld:null,applyImpulseVel:function(){var _g=0;var _g1=this.dim;while(_g<_g1){var i=_g++;this.J[i]=this.bias[i]-this.J[i]}this.transform(this.L,this.J);var _g2=0;var _g3=this.dim;while(_g2<_g3){var i1=_g2++;this.jOld[i1]=this.jAcc[i1];this.jAcc[i1]+=this.J[i1]=this.J[i1]*this.soft-this.jAcc[i1]*this.gamma}if((this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce){return true}else if(!this.stiff){this._clamp(this.jAcc,this.jMax)}}var _g4=0;var _g5=this.dim;while(_g4<_g5){var i2=_g4++;this.J[i2]=this.jAcc[i2]-this.jOld[i2]}var _g6=0;var _g7=this.bodies;while(_g6<_g7.length){var b=_g7[_g6++].body;var t=b.imass;var b1=b.velx;var _this=this.vec3;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}b.velx=b1+_this.zpp_inner.x*t;var b2=b.vely;var _this2=this.vec3;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}b.vely=b2+_this2.zpp_inner.y*t;var b3=b.angvel;var _this4=this.vec3;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}b.angvel=b3+_this4.zpp_inner.z*b.iinertia}return false},applyImpulsePos:function(){if(this.velonly){return false}var lj=this.lsq(this.J);if(this.breakUnderError&&lj>this.maxError*this.maxError){return true}else if(lj<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){return false}var _g=0;var _g1=this.dim;while(_g<_g1)this.J[_g++]*=-1;this.transform(this.solve(this.Keff),this.J);var _g2=0;var _g3=this.bodies;while(_g2<_g3.length){var b=_g3[_g2++].body;var t=b.imass;var b1=b.posx;var _this=this.vec3;var _this1=_this.zpp_inner;if(_this1._validate!=null){_this1._validate()}b.posx=b1+_this.zpp_inner.x*t;var b2=b.posy;var _this2=this.vec3;var _this3=_this2.zpp_inner;if(_this3._validate!=null){_this3._validate()}b.posy=b2+_this2.zpp_inner.y*t;var _this4=this.vec3;var _this5=_this4.zpp_inner;if(_this5._validate!=null){_this5._validate()}var dr=_this4.zpp_inner.z*b.iinertia;b.rot+=dr;if(dr*dr>1e-4){b.axisx=Math.sin(b.rot);b.axisy=Math.cos(b.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*b.axisx+dr*b.axisy)*m;b.axisy=(p*b.axisy-dr*b.axisx)*m;b.axisx=nx}}return false},__class__:zpp_$nape_constraint_ZPP_$UserConstraint});var zpp_$nape_constraint_ZPP_$UserBody=function(cnt,body){this.body=null;this.cnt=0;this.cnt=cnt;this.body=body};$hxClasses["zpp_nape.constraint.ZPP_UserBody"]=zpp_$nape_constraint_ZPP_$UserBody;zpp_$nape_constraint_ZPP_$UserBody.__name__="zpp_nape.constraint.ZPP_UserBody";zpp_$nape_constraint_ZPP_$UserBody.prototype={cnt:null,body:null,__class__:zpp_$nape_constraint_ZPP_$UserBody};var zpp_$nape_constraint_ZPP_$WeldJoint=function(){this.stepped=false;this.biasz=0;this.biasy=0;this.biasx=0;this.gamma=0;this.jMax=0;this.jAccz=0;this.jAccy=0;this.jAccx=0;this.kMassf=0;this.kMasse=0;this.kMassc=0;this.kMassd=0;this.kMassb=0;this.kMassa=0;this.phase=0;this.wrap_a2=null;this.a2rely=0;this.a2relx=0;this.a2localy=0;this.a2localx=0;this.b2=null;this.wrap_a1=null;this.a1rely=0;this.a1relx=0;this.a1localy=0;this.a1localx=0;this.b1=null;this.outer_zn=null;zpp_$nape_constraint_ZPP_$Constraint.call(this);this.phase=0;this.jAccx=0;this.jAccy=0;this.jAccz=0;this.jMax=Infinity;this.stepped=false;this.a1localx=0;this.a1localy=0;this.a1relx=0;this.a1rely=0;this.a2localx=0;this.a2localy=0;this.a2relx=0;this.a2rely=0};$hxClasses["zpp_nape.constraint.ZPP_WeldJoint"]=zpp_$nape_constraint_ZPP_$WeldJoint;zpp_$nape_constraint_ZPP_$WeldJoint.__name__="zpp_nape.constraint.ZPP_WeldJoint";zpp_$nape_constraint_ZPP_$WeldJoint.__super__=zpp_$nape_constraint_ZPP_$Constraint;zpp_$nape_constraint_ZPP_$WeldJoint.prototype=$extend(zpp_$nape_constraint_ZPP_$Constraint.prototype,{outer_zn:null,activeBodies:function(){if(this.b1!=null){this.b1.constraints.add(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.add(this)}}},inactiveBodies:function(){if(this.b1!=null){this.b1.constraints.remove(this)}if(this.b2!=this.b1){if(this.b2!=null){this.b2.constraints.remove(this)}}},b1:null,a1localx:null,a1localy:null,a1relx:null,a1rely:null,validate_a1:function(){this.wrap_a1.zpp_inner.x=this.a1localx;this.wrap_a1.zpp_inner.y=this.a1localy},invalidate_a1:function(x){this.a1localx=x.x;this.a1localy=x.y;this.wake()},setup_a1:function(){var x=this.a1localx;var y=this.a1localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a1=ret;this.wrap_a1.zpp_inner._inuse=true;this.wrap_a1.zpp_inner._validate=$bind(this,this.validate_a1);this.wrap_a1.zpp_inner._invalidate=$bind(this,this.invalidate_a1)},wrap_a1:null,b2:null,a2localx:null,a2localy:null,a2relx:null,a2rely:null,validate_a2:function(){this.wrap_a2.zpp_inner.x=this.a2localx;this.wrap_a2.zpp_inner.y=this.a2localy},invalidate_a2:function(x){this.a2localx=x.x;this.a2localy=x.y;this.wake()},setup_a2:function(){var x=this.a2localx;var y=this.a2localy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_a2=ret;this.wrap_a2.zpp_inner._inuse=true;this.wrap_a2.zpp_inner._validate=$bind(this,this.validate_a2);this.wrap_a2.zpp_inner._invalidate=$bind(this,this.invalidate_a2)},wrap_a2:null,phase:null,kMassa:null,kMassb:null,kMassd:null,kMassc:null,kMasse:null,kMassf:null,jAccx:null,jAccy:null,jAccz:null,jMax:null,gamma:null,biasx:null,biasy:null,biasz:null,stepped:null,wake_connected:function(){if(this.b1!=null&&this.b1.type==2){this.b1.wake()}if(this.b2!=null&&this.b2.type==2){this.b2.wake()}},forest:function(){if(this.b1.type==2){var xr;if(this.b1.component==this.b1.component.parent){xr=this.b1.component}else{var obj=this.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(this.component==this.component.parent){yr=this.component}else{var obj1=this.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}if(this.b2.type==2){var xr1;if(this.b2.component==this.b2.component.parent){xr1=this.b2.component}else{var obj2=this.b2.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(this.component==this.component.parent){yr1=this.component}else{var obj3=this.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}},pair_exists:function(id,di){if(!(this.b1.id==id&&this.b2.id==di)){if(this.b1.id==di){return this.b2.id==id}else{return false}}else{return true}},clearcache:function(){this.jAccx=0;this.jAccy=0;this.jAccz=0;this.pre_dt=-1},preStep:function(dt){if(this.pre_dt==-1){this.pre_dt=dt}var dtratio=dt/this.pre_dt;this.pre_dt=dt;this.stepped=true;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var m=this.b1.smass+this.b2.smass;this.kMassa=m;this.kMassb=0;this.kMassd=m;this.kMassc=0;this.kMasse=0;this.kMassf=0;if(this.b1.sinertia!=0){var X=this.a1relx*this.b1.sinertia;var Y=this.a1rely*this.b1.sinertia;this.kMassa+=Y*this.a1rely;this.kMassb+=-Y*this.a1relx;this.kMassd+=X*this.a1relx;this.kMassc+=-Y;this.kMasse+=X;this.kMassf+=this.b1.sinertia}if(this.b2.sinertia!=0){var X1=this.a2relx*this.b2.sinertia;var Y1=this.a2rely*this.b2.sinertia;this.kMassa+=Y1*this.a2rely;this.kMassb+=-Y1*this.a2relx;this.kMassd+=X1*this.a2relx;this.kMassc+=-Y1;this.kMasse+=X1;this.kMassf+=this.b2.sinertia}var det=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);var flag;if(det!=det){this.kMassa=0;this.kMassb=0;this.kMassd=0;this.kMassc=0;this.kMasse=0;this.kMassf=0;flag=7}else if(det==0){var flag1=0;if(this.kMassa!=0){this.kMassa=1/this.kMassa}else{this.kMassa=0;flag1=1}if(this.kMassd!=0){this.kMassd=1/this.kMassd}else{this.kMassd=0;flag1|=2}if(this.kMassf!=0){this.kMassf=1/this.kMassf}else{this.kMassf=0;flag1|=4}this.kMassb=this.kMassc=this.kMasse=0;flag=flag1}else{det=1/det;var D=det*(this.kMassa*this.kMassf-this.kMassc*this.kMassc);var C=det*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);var E=det*(this.kMassb*this.kMassc-this.kMassa*this.kMasse);var F=det*(this.kMassa*this.kMassd-this.kMassb*this.kMassb);this.kMassa=det*(this.kMassd*this.kMassf-this.kMasse*this.kMasse);this.kMassb=det*(this.kMasse*this.kMassc-this.kMassb*this.kMassf);this.kMassd=D;this.kMassc=C;this.kMasse=E;this.kMassf=F;flag=0}if((flag&1)!=0){this.jAccx=0}if((flag&2)!=0){this.jAccy=0}if((flag&4)!=0){this.jAccz=0}if(!this.stiff){var biasCoef;var omega=2*Math.PI*this.frequency;this.gamma=1/(dt*omega*(2*this.damping+omega*dt));var ig=1/(1+this.gamma);biasCoef=dt*omega*omega*this.gamma;this.gamma*=ig;this.kMassa*=ig;this.kMassb*=ig;this.kMassd*=ig;this.kMassc*=ig;this.kMasse*=ig;this.kMassf*=ig;this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx);this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);this.biasz=this.b2.rot-this.b1.rot-this.phase;if(this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError){return true}var t=-biasCoef;this.biasx*=t;this.biasy*=t;this.biasz*=t;var t1=this.maxError;var ls=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(ls>t1*t1){var t2=t1*(1/Math.sqrt(ls));this.biasx*=t2;this.biasy*=t2;this.biasz*=t2}}else{this.biasx=0;this.biasy=0;this.biasz=0;this.gamma=0}this.jAccx*=dtratio;this.jAccy*=dtratio;this.jAccz*=dtratio;this.jMax=this.maxForce*dt;return false},warmStart:function(){var t=this.b1.imass;this.b1.velx-=this.jAccx*t;this.b1.vely-=this.jAccy*t;var t1=this.b2.imass;this.b2.velx+=this.jAccx*t1;this.b2.vely+=this.jAccy*t1;this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia;this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},applyImpulseVel:function(){var Ex=0;var Ey=0;var Ez=0;Ex=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel));Ey=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));Ez=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var Jx=0;var Jy=0;var Jz=0;Jx=this.biasx-Ex;Jy=this.biasy-Ey;Jz=this.biasz-Ez;var X=this.kMassa*Jx+this.kMassb*Jy+this.kMassc*Jz;var Y=this.kMassb*Jx+this.kMassd*Jy+this.kMasse*Jz;Jz=this.kMassc*Jx+this.kMasse*Jy+this.kMassf*Jz;Jx=X;Jy=Y;var t=this.gamma;Jx-=this.jAccx*t;Jy-=this.jAccy*t;Jz-=this.jAccz*t;var jOldx=0;var jOldy=0;var jOldz=0;jOldx=this.jAccx;jOldy=this.jAccy;jOldz=this.jAccz;this.jAccx+=Jx;this.jAccy+=Jy;this.jAccz+=Jz;if(this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax){return true}}else if(!this.stiff){var t1=this.jMax;var ls=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(ls>t1*t1){var t2=t1*(1/Math.sqrt(ls));this.jAccx*=t2;this.jAccy*=t2;this.jAccz*=t2}}Jx=this.jAccx-jOldx;Jy=this.jAccy-jOldy;Jz=this.jAccz-jOldz;var t3=this.b1.imass;this.b1.velx-=Jx*t3;this.b1.vely-=Jy*t3;var t4=this.b2.imass;this.b2.velx+=Jx*t4;this.b2.vely+=Jy*t4;this.b1.angvel-=(Jy*this.a1relx-Jx*this.a1rely+Jz)*this.b1.iinertia;this.b2.angvel+=(Jy*this.a2relx-Jx*this.a2rely+Jz)*this.b2.iinertia;return false},applyImpulsePos:function(){var r1x=0;var r1y=0;r1x=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy;r1y=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r2x=0;var r2y=0;r2x=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy;r2y=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var Ex=0;var Ey=0;var Ez=0;Ex=this.b2.posx+r2x-(this.b1.posx+r1x);Ey=this.b2.posy+r2y-(this.b1.posy+r1y);Ez=this.b2.rot-this.b1.rot-this.phase;var Jx=0;var Jy=0;var Jz=0;if(this.breakUnderError&&Ex*Ex+Ey*Ey+Ez*Ez>this.maxError*this.maxError){return true}var cont=true;if(Ex*Ex+Ey*Ey<nape_Config.constraintLinearSlop*nape_Config.constraintLinearSlop){cont=false;Ex=0;Ey=0}var x=nape_Config.constraintAngularSlop;if(Ez*Ez<x*x){if(!cont){return false}else{Ez=0}}Ex*=.5;Ey*=.5;Ez*=.5;if(Ex*Ex+Ey*Ey>6){var k=this.b1.smass+this.b2.smass;if(k>nape_Config.epsilon){k=.75/k;Jx=-Ex*k;Jy=-Ey*k;var ls=Jx*Jx+Jy*Jy;if(ls>400){var t=20*(1/Math.sqrt(ls));Jx*=t;Jy*=t}var t1=this.b1.imass;this.b1.posx-=Jx*t1;this.b1.posy-=Jy*t1;var t2=this.b2.imass;this.b2.posx+=Jx*t2;this.b2.posy+=Jy*t2;Ex=this.b2.posx+r2x-(this.b1.posx+r1x);Ey=this.b2.posy+r2y-(this.b1.posy+r1y);Ez=this.b2.rot-this.b1.rot-this.phase;Ex*=.5;Ey*=.5;Ez*=.5}}var Ka=0;var Kb=0;var Kd=0;var Kc=0;var Ke=0;var Kf=0;var m=this.b1.smass+this.b2.smass;Ka=m;Kb=0;Kd=m;Kc=0;Ke=0;Kf=0;if(this.b1.sinertia!=0){var X=r1x*this.b1.sinertia;var Y=r1y*this.b1.sinertia;Ka=m+Y*r1y;Kb+=-Y*r1x;Kd=m+X*r1x;Kc+=-Y;Ke+=X;Kf+=this.b1.sinertia}if(this.b2.sinertia!=0){var X1=r2x*this.b2.sinertia;var Y1=r2y*this.b2.sinertia;Ka+=Y1*r2y;Kb+=-Y1*r2x;Kd+=X1*r2x;Kc+=-Y1;Ke+=X1;Kf+=this.b2.sinertia}Jx=-Ex;Jy=-Ey;Jz=-Ez;var ls1=Jx*Jx+Jy*Jy;if(ls1>36){var t3=6*(1/Math.sqrt(ls1));Jx*=t3;Jy*=t3}var det=Ka*(Kd*Kf-Ke*Ke)+Kb*(Kc*Ke-Kb*Kf)+Kc*(Kb*Ke-Kc*Kd);if(det!=det){Jz=0;Jy=Jz;Jx=Jy}else if(det==0){if(Ka!=0){Jx/=Ka}else{Jx=0}if(Kd!=0){Jy/=Kd}else{Jy=0}if(Kf!=0){Jz/=Kf}else{Jz=0}}else{det=1/det;var B=Ke*Kc-Kb*Kf;var C=Kb*Ke-Kc*Kd;var E=Kb*Kc-Ka*Ke;var X2=det*(Jx*(Kd*Kf-Ke*Ke)+Jy*B+Jz*C);var Y2=det*(Jx*B+Jy*(Ka*Kf-Kc*Kc)+Jz*E);Jz=det*(Jx*C+Jy*E+Jz*(Ka*Kd-Kb*Kb));Jx=X2;Jy=Y2}var t4=this.b1.imass;this.b1.posx-=Jx*t4;this.b1.posy-=Jy*t4;var t5=this.b2.imass;this.b2.posx+=Jx*t5;this.b2.posy+=Jy*t5;var _this=this.b1;var dr=-(Jy*r1x-Jx*r1y+Jz)*this.b1.iinertia;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m1=1-d2*d2/8;var nx=(p*_this.axisx+dr*_this.axisy)*m1;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m1;_this.axisx=nx}var _this1=this.b2;var dr1=(Jy*r2x-Jx*r2y+Jz)*this.b2.iinertia;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m2=1-d21*d21/8;var nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m2;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m2;_this1.axisx=nx1}return false},__class__:zpp_$nape_constraint_ZPP_$WeldJoint});var zpp_$nape_dynamics_ZPP_$Arbiter=function(){this.sensorarb=null;this.fluidarb=null;this.colarb=null;this.type=0;this.pair=null;this.ws2=null;this.ws1=null;this.b2=null;this.b1=null;this.invalidated=false;this.immState=0;this.fresh=false;this.continuous=false;this.presentable=false;this.intchange=false;this.present=0;this.sleeping=false;this.cleared=false;this.active=false;this.endGenerated=0;this.sleep_stamp=0;this.up_stamp=0;this.stamp=0;this.di=0;this.id=0;this.outer=null};$hxClasses["zpp_nape.dynamics.ZPP_Arbiter"]=zpp_$nape_dynamics_ZPP_$Arbiter;zpp_$nape_dynamics_ZPP_$Arbiter.__name__="zpp_nape.dynamics.ZPP_Arbiter";zpp_$nape_dynamics_ZPP_$Arbiter.prototype={outer:null,wrapper:function(){if(this.outer==null){zpp_$nape_dynamics_ZPP_$Arbiter.internal=true;if(this.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){this.colarb.outer_zn=new nape_dynamics_CollisionArbiter;this.outer=this.colarb.outer_zn}else if(this.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){this.fluidarb.outer_zn=new nape_dynamics_FluidArbiter;this.outer=this.fluidarb.outer_zn}else{this.outer=new nape_dynamics_Arbiter}this.outer.zpp_inner=this;zpp_$nape_dynamics_ZPP_$Arbiter.internal=false}return this.outer},id:null,di:null,stamp:null,up_stamp:null,sleep_stamp:null,endGenerated:null,active:null,cleared:null,sleeping:null,present:null,intchange:null,presentable:null,continuous:null,fresh:null,immState:null,invalidated:null,b1:null,b2:null,ws1:null,ws2:null,pair:null,type:null,colarb:null,fluidarb:null,sensorarb:null,__class__:zpp_$nape_dynamics_ZPP_$Arbiter};var zpp_$nape_dynamics_ZPP_$SensorArbiter=function(){this.next=null;zpp_$nape_dynamics_ZPP_$Arbiter.call(this);this.type=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR;this.sensorarb=this};$hxClasses["zpp_nape.dynamics.ZPP_SensorArbiter"]=zpp_$nape_dynamics_ZPP_$SensorArbiter;zpp_$nape_dynamics_ZPP_$SensorArbiter.__name__="zpp_nape.dynamics.ZPP_SensorArbiter";zpp_$nape_dynamics_ZPP_$SensorArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter;zpp_$nape_dynamics_ZPP_$SensorArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{next:null,__class__:zpp_$nape_dynamics_ZPP_$SensorArbiter});var zpp_$nape_dynamics_ZPP_$FluidArbiter=function(){this.pre_dt=0;this.buoyy=0;this.buoyx=0;this.ny=0;this.nx=0;this.lgamma=0;this.dampy=0;this.dampx=0;this.vMassc=0;this.vMassb=0;this.vMassa=0;this.agamma=0;this.adamp=0;this.wMass=0;this.nodrag=false;this.r2y=0;this.r2x=0;this.r1y=0;this.r1x=0;this.overlap=0;this.centroidy=0;this.centroidx=0;this.next=null;this.outer_zn=null;zpp_$nape_dynamics_ZPP_$Arbiter.call(this);this.type=zpp_$nape_dynamics_ZPP_$Arbiter.FLUID;this.fluidarb=this;this.buoyx=0;this.buoyy=0;this.pre_dt=-1};$hxClasses["zpp_nape.dynamics.ZPP_FluidArbiter"]=zpp_$nape_dynamics_ZPP_$FluidArbiter;zpp_$nape_dynamics_ZPP_$FluidArbiter.__name__="zpp_nape.dynamics.ZPP_FluidArbiter";zpp_$nape_dynamics_ZPP_$FluidArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter;zpp_$nape_dynamics_ZPP_$FluidArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{outer_zn:null,next:null,centroidx:null,centroidy:null,overlap:null,r1x:null,r1y:null,r2x:null,r2y:null,nodrag:null,wMass:null,adamp:null,agamma:null,vMassa:null,vMassb:null,vMassc:null,dampx:null,dampy:null,lgamma:null,nx:null,ny:null,buoyx:null,buoyy:null,pre_dt:null,__class__:zpp_$nape_dynamics_ZPP_$FluidArbiter});var zpp_$nape_dynamics_ZPP_$ColArbiter=function(){this.pre_dt=0;this.stat=false;this.next=null;this.hpc2=false;this.hc2=false;this.oc2=null;this.c2=null;this.oc1=null;this.c1=null;this.__ref_vertex=0;this.__ref_edge2=null;this.__ref_edge1=null;this.biasCoef=0;this.rev=false;this.radius=0;this.lproj=0;this.lnormy=0;this.lnormx=0;this.surfacey=0;this.surfacex=0;this.k2y=0;this.k2x=0;this.k1y=0;this.k1x=0;this.rt2b=0;this.rn2b=0;this.rt2a=0;this.rn2a=0;this.rt1b=0;this.rn1b=0;this.rt1a=0;this.rn1a=0;this.jrAcc=0;this.rMass=0;this.Kc=0;this.Kb=0;this.Ka=0;this.kMassc=0;this.kMassb=0;this.kMassa=0;this.wrap_normal=null;this.ny=0;this.nx=0;this.innards=null;this.contacts=null;this.s2=null;this.s1=null;this.userdef_rfric=false;this.userdef_restitution=false;this.userdef_stat_fric=false;this.userdef_dyn_fric=false;this.rfric=0;this.restitution=0;this.stat_fric=0;this.dyn_fric=0;this.outer_zn=null;zpp_$nape_dynamics_ZPP_$Arbiter.call(this);this.pre_dt=-1;this.contacts=new zpp_$nape_dynamics_ZPP_$Contact;this.innards=new zpp_$nape_dynamics_ZPP_$IContact;this.type=zpp_$nape_dynamics_ZPP_$Arbiter.COL;this.colarb=this};$hxClasses["zpp_nape.dynamics.ZPP_ColArbiter"]=zpp_$nape_dynamics_ZPP_$ColArbiter;zpp_$nape_dynamics_ZPP_$ColArbiter.__name__="zpp_nape.dynamics.ZPP_ColArbiter";zpp_$nape_dynamics_ZPP_$ColArbiter.__super__=zpp_$nape_dynamics_ZPP_$Arbiter;zpp_$nape_dynamics_ZPP_$ColArbiter.prototype=$extend(zpp_$nape_dynamics_ZPP_$Arbiter.prototype,{outer_zn:null,dyn_fric:null,stat_fric:null,restitution:null,rfric:null,userdef_dyn_fric:null,userdef_stat_fric:null,userdef_restitution:null,userdef_rfric:null,s1:null,s2:null,contacts:null,innards:null,nx:null,ny:null,normal_validate:function(){if(this.cleared){throw new js__$Boot_HaxeError("Error: Arbiter not currently in use")}this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;if(this.ws1.id>this.ws2.id){this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x;this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y}},wrap_normal:null,getnormal:function(){var x=0;var y=0;var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_normal=ret;this.wrap_normal.zpp_inner._immutable=true;this.wrap_normal.zpp_inner._inuse=true;this.wrap_normal.zpp_inner._validate=$bind(this,this.normal_validate)},kMassa:null,kMassb:null,kMassc:null,Ka:null,Kb:null,Kc:null,rMass:null,jrAcc:null,rn1a:null,rt1a:null,rn1b:null,rt1b:null,rn2a:null,rt2a:null,rn2b:null,rt2b:null,k1x:null,k1y:null,k2x:null,k2y:null,surfacex:null,surfacey:null,ptype:null,lnormx:null,lnormy:null,lproj:null,radius:null,rev:null,biasCoef:null,__ref_edge1:null,__ref_edge2:null,__ref_vertex:null,c1:null,oc1:null,c2:null,oc2:null,hc2:null,hpc2:null,next:null,stat:null,pre_dt:null,__class__:zpp_$nape_dynamics_ZPP_$ColArbiter});var zpp_$nape_dynamics_ZPP_$Contact=function(){this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.elasticity=0;this.dist=0;this.fresh=false;this.hash=0;this.stamp=0;this.posOnly=false;this.active=false;this.inner=null;this.arbiter=null;this.py=0;this.px=0;this.outer=null;this.inner=new zpp_$nape_dynamics_ZPP_$IContact};$hxClasses["zpp_nape.dynamics.ZPP_Contact"]=zpp_$nape_dynamics_ZPP_$Contact;zpp_$nape_dynamics_ZPP_$Contact.__name__="zpp_nape.dynamics.ZPP_Contact";zpp_$nape_dynamics_ZPP_$Contact.prototype={outer:null,wrapper:function(){if(this.outer==null){zpp_$nape_dynamics_ZPP_$Contact.internal=true;this.outer=new nape_dynamics_Contact;zpp_$nape_dynamics_ZPP_$Contact.internal=false;this.outer.zpp_inner=this}return this.outer},px:null,py:null,arbiter:null,inner:null,active:null,posOnly:null,stamp:null,hash:null,fresh:null,dist:null,elasticity:null,next:null,_inuse:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.next;this.next=ret.next;ret._inuse=false;if(this.next==null){this.pushmod=true}this.modified=true;this.length--},__class__:zpp_$nape_dynamics_ZPP_$Contact};var zpp_$nape_dynamics_ZPP_$IContact=function(){this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.lr2y=0;this.lr2x=0;this.lr1y=0;this.lr1x=0;this.jtAcc=0;this.jnAcc=0;this.friction=0;this.bounce=0;this.tMass=0;this.nMass=0;this.r2y=0;this.r2x=0;this.r1y=0;this.r1x=0};$hxClasses["zpp_nape.dynamics.ZPP_IContact"]=zpp_$nape_dynamics_ZPP_$IContact;zpp_$nape_dynamics_ZPP_$IContact.__name__="zpp_nape.dynamics.ZPP_IContact";zpp_$nape_dynamics_ZPP_$IContact.prototype={r1x:null,r1y:null,r2x:null,r2y:null,nMass:null,tMass:null,bounce:null,friction:null,jnAcc:null,jtAcc:null,lr1x:null,lr1y:null,lr2x:null,lr2y:null,next:null,_inuse:null,modified:null,pushmod:null,length:null,add:function(o){o._inuse=true;o.next=this.next;this.next=o;this.modified=true;this.length++;return o},__class__:zpp_$nape_dynamics_ZPP_$IContact};var zpp_$nape_dynamics_ZPP_$InteractionFilter=function(){this.fluidMask=0;this.fluidGroup=0;this.sensorMask=0;this.sensorGroup=0;this.collisionMask=0;this.collisionGroup=0;this.shapes=null;this.outer=null;this.next=null;this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};$hxClasses["zpp_nape.dynamics.ZPP_InteractionFilter"]=zpp_$nape_dynamics_ZPP_$InteractionFilter;zpp_$nape_dynamics_ZPP_$InteractionFilter.__name__="zpp_nape.dynamics.ZPP_InteractionFilter";zpp_$nape_dynamics_ZPP_$InteractionFilter.prototype={next:null,outer:null,wrapper:function(){if(this.outer==null){this.outer=new nape_dynamics_InteractionFilter;var o=this.outer.zpp_inner;o.outer=null;o.next=zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool;zpp_$nape_dynamics_ZPP_$InteractionFilter.zpp_pool=o;this.outer.zpp_inner=this}return this.outer},shapes:null,collisionGroup:null,collisionMask:null,sensorGroup:null,sensorMask:null,fluidGroup:null,fluidMask:null,invalidate:function(){var cx_ite=this.shapes.head;while(cx_ite!=null){cx_ite.elt.invalidate_filter();cx_ite=cx_ite.next}},__class__:zpp_$nape_dynamics_ZPP_$InteractionFilter};var zpp_$nape_dynamics_ZPP_$InteractionGroup=function(){this.depth=0;this.interactors=null;this.groups=null;this.group=null;this.ignore=false;this.outer=null;this.depth=0;this.groups=new zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup;this.interactors=new zpp_$nape_util_ZNPList_$ZPP_$Interactor};$hxClasses["zpp_nape.dynamics.ZPP_InteractionGroup"]=zpp_$nape_dynamics_ZPP_$InteractionGroup;zpp_$nape_dynamics_ZPP_$InteractionGroup.__name__="zpp_nape.dynamics.ZPP_InteractionGroup";zpp_$nape_dynamics_ZPP_$InteractionGroup.prototype={outer:null,ignore:null,group:null,groups:null,interactors:null,depth:null,invalidate:function(force){if(force==null){force=false}if(!(force||this.ignore)){return}var cx_ite=this.interactors.head;while(cx_ite!=null){var b=cx_ite.elt;if(b.ibody!=null){b.ibody.wake()}else if(b.ishape!=null){b.ishape.body.wake()}else{b.icompound.wake()}cx_ite=cx_ite.next}var cx_ite1=this.groups.head;while(cx_ite1!=null){cx_ite1.elt.invalidate(force);cx_ite1=cx_ite1.next}},__class__:zpp_$nape_dynamics_ZPP_$InteractionGroup};var zpp_$nape_dynamics_ZPP_$SpaceArbiterList=function(){this.at_index_3=0;this.at_index_2=0;this.at_index_1=0;this.at_index_0=0;this.ite_3=null;this.ite_2=null;this.ite_1=null;this.ite_0=null;this.lengths=null;this.zip_length=false;this._length=0;this.space=null;nape_dynamics_ArbiterList.call(this);this.at_index_0=0;this.at_index_1=0;this.at_index_2=0;this.at_index_3=0;this.zip_length=true;this._length=0;this.lengths=[];this.lengths.push(0);this.lengths.push(0);this.lengths.push(0);this.lengths.push(0)};$hxClasses["zpp_nape.dynamics.ZPP_SpaceArbiterList"]=zpp_$nape_dynamics_ZPP_$SpaceArbiterList;zpp_$nape_dynamics_ZPP_$SpaceArbiterList.__name__="zpp_nape.dynamics.ZPP_SpaceArbiterList";zpp_$nape_dynamics_ZPP_$SpaceArbiterList.__super__=nape_dynamics_ArbiterList;zpp_$nape_dynamics_ZPP_$SpaceArbiterList.prototype=$extend(nape_dynamics_ArbiterList.prototype,{space:null,_length:null,zip_length:null,zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;var len=0;var cx_ite=this.space.c_arbiters_true.head;while(cx_ite!=null){if(cx_ite.elt.active){++len}cx_ite=cx_ite.next}this.lengths[0]=len;this._length+=len;var len1=0;var cx_ite1=this.space.c_arbiters_false.head;while(cx_ite1!=null){if(cx_ite1.elt.active){++len1}cx_ite1=cx_ite1.next}this.lengths[1]=len1;this._length+=len1;var len2=0;var cx_ite2=this.space.f_arbiters.head;while(cx_ite2!=null){if(cx_ite2.elt.active){++len2}cx_ite2=cx_ite2.next}this.lengths[2]=len2;this._length+=len2;var len3=0;var cx_ite3=this.space.s_arbiters.head;while(cx_ite3!=null){if(cx_ite3.elt.active){++len3}cx_ite3=cx_ite3.next}this.lengths[3]=len3;this._length+=len3;this.zip_length=false}return this._length},lengths:null,ite_0:null,ite_1:null,ite_2:null,ite_3:null,at_index_0:null,at_index_1:null,at_index_2:null,at_index_3:null,zpp_vm:function(){var modified=false;if(this.space.c_arbiters_true.modified){modified=true;this.space.c_arbiters_true.modified=false}if(this.space.c_arbiters_false.modified){modified=true;this.space.c_arbiters_false.modified=false}if(this.space.f_arbiters.modified){modified=true;this.space.f_arbiters.modified=false}if(this.space.s_arbiters.modified){modified=true;this.space.s_arbiters.modified=false}if(modified){this.zip_length=true;this._length=0;this.ite_0=null;this.ite_1=null;this.ite_2=null;this.ite_3=null}},at:function(index){this.zpp_vm();var ret=null;var accum_length=0;if(index<this.lengths[0]){var offset=index;if(offset<this.at_index_0||this.ite_0==null){this.at_index_0=0;this.ite_0=this.space.c_arbiters_true.head;while(!this.ite_0.elt.active)this.ite_0=this.ite_0.next}while(this.at_index_0!=offset){this.at_index_0++;this.ite_0=this.ite_0.next;while(!this.ite_0.elt.active)this.ite_0=this.ite_0.next}ret=this.ite_0.elt.wrapper()}else{accum_length=this.lengths[0]}if(ret==null){if(index<accum_length+this.lengths[1]){var offset1=index-accum_length;if(offset1<this.at_index_1||this.ite_1==null){this.at_index_1=0;this.ite_1=this.space.c_arbiters_false.head;while(!this.ite_1.elt.active)this.ite_1=this.ite_1.next}while(this.at_index_1!=offset1){this.at_index_1++;this.ite_1=this.ite_1.next;while(!this.ite_1.elt.active)this.ite_1=this.ite_1.next}ret=this.ite_1.elt.wrapper()}else{accum_length+=this.lengths[1]}}if(ret==null){if(index<accum_length+this.lengths[2]){var offset2=index-accum_length;if(offset2<this.at_index_2||this.ite_2==null){this.at_index_2=0;this.ite_2=this.space.f_arbiters.head;while(!this.ite_2.elt.active)this.ite_2=this.ite_2.next}while(this.at_index_2!=offset2){this.at_index_2++;this.ite_2=this.ite_2.next;while(!this.ite_2.elt.active)this.ite_2=this.ite_2.next}ret=this.ite_2.elt.wrapper()}else{accum_length+=this.lengths[2]}}if(ret==null){if(index<accum_length+this.lengths[3]){var offset3=index-accum_length;if(offset3<this.at_index_3||this.ite_3==null){this.at_index_3=0;this.ite_3=this.space.s_arbiters.head;while(!this.ite_3.elt.active)this.ite_3=this.ite_3.next}while(this.at_index_3!=offset3){this.at_index_3++;this.ite_3=this.ite_3.next;while(!this.ite_3.elt.active)this.ite_3=this.ite_3.next}ret=this.ite_3.elt.wrapper()}else{accum_length+=this.lengths[3]}}return ret},__class__:zpp_$nape_dynamics_ZPP_$SpaceArbiterList});var zpp_$nape_geom_ZPP_$AABB=function(){this.wrap_max=null;this.maxy=0;this.maxx=0;this.wrap_min=null;this.miny=0;this.minx=0;this.next=null;this.outer=null;this._immutable=false;this._validate=null;this._invalidate=null};$hxClasses["zpp_nape.geom.ZPP_AABB"]=zpp_$nape_geom_ZPP_$AABB;zpp_$nape_geom_ZPP_$AABB.__name__="zpp_nape.geom.ZPP_AABB";zpp_$nape_geom_ZPP_$AABB.prototype={_invalidate:null,_validate:null,_immutable:null,outer:null,next:null,minx:null,miny:null,wrap_min:null,maxx:null,maxy:null,wrap_max:null,toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},__class__:zpp_$nape_geom_ZPP_$AABB};var zpp_$nape_util_ZNPList_$ZPP_$Vec2=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Vec2"]=zpp_$nape_util_ZNPList_$ZPP_$Vec2;zpp_$nape_util_ZNPList_$ZPP_$Vec2.__name__="zpp_nape.util.ZNPList_ZPP_Vec2";zpp_$nape_util_ZNPList_$ZPP_$Vec2.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Vec2}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Vec2};var zpp_$nape_geom_ZPP_$Collide=function(){};$hxClasses["zpp_nape.geom.ZPP_Collide"]=zpp_$nape_geom_ZPP_$Collide;zpp_$nape_geom_ZPP_$Collide.__name__="zpp_nape.geom.ZPP_Collide";zpp_$nape_geom_ZPP_$Collide.circleContains=function(c,p){var dx=0;var dy=0;dx=p.x-c.worldCOMx;dy=p.y-c.worldCOMy;return dx*dx+dy*dy<c.radius*c.radius};zpp_$nape_geom_ZPP_$Collide.polyContains=function(s,p){var retvar;retvar=true;var cx_ite=s.edges.head;while(cx_ite!=null){var a=cx_ite.elt;if(a.gnormx*p.x+a.gnormy*p.y<=a.gprojection){cx_ite=cx_ite.next;continue}else{retvar=false;break}}return retvar};zpp_$nape_geom_ZPP_$Collide.contactCollide=function(s1,s2,arb,rev){if(s2.type==1){if(s1.type==1){var cont=true;var max=-1e100;var maxi=-1;var axis1=null;var axis2=null;var cx_ite=s1.polygon.edges.head;while(cx_ite!=null){var ax=cx_ite.elt;var min=1e100;var cx_ite1=s2.polygon.gverts.next;while(cx_ite1!=null){var v=cx_ite1;var k=ax.gnormx*v.x+ax.gnormy*v.y;if(k<min){min=k}if(min-ax.gprojection<=max){break}cx_ite1=cx_ite1.next}min-=ax.gprojection;if(min>=0){cont=false;break}if(min>max){max=min;axis1=ax;maxi=1}cx_ite=cx_ite.next}if(cont){var cx_ite2=s2.polygon.edges.head;while(cx_ite2!=null){var ax1=cx_ite2.elt;var min1=1e100;var cx_ite3=s1.polygon.gverts.next;while(cx_ite3!=null){var v1=cx_ite3;var k1=ax1.gnormx*v1.x+ax1.gnormy*v1.y;if(k1<min1){min1=k1}if(min1-ax1.gprojection<=max){break}cx_ite3=cx_ite3.next}min1-=ax1.gprojection;if(min1>=0){cont=false;break}if(min1>max){max=min1;axis2=ax1;maxi=2}cx_ite2=cx_ite2.next}if(!cont){return false}else{var q2;var ax2;var scale;if(maxi==1){q2=s2.polygon;ax2=axis1;scale=1}else{q2=s1.polygon;ax2=axis2;scale=-1}var ay=null;var min2=1e100;var cx_ite4=q2.edges.head;while(cx_ite4!=null){var axis=cx_ite4.elt;var k2=ax2.gnormx*axis.gnormx+ax2.gnormy*axis.gnormy;if(k2<min2){min2=k2;ay=axis}cx_ite4=cx_ite4.next}var c0x=0;var c0y=0;c0x=ay.gp0.x;c0y=ay.gp0.y;var c1x=0;var c1y=0;c1x=ay.gp1.x;c1y=ay.gp1.y;var dvx=0;var dvy=0;dvx=c1x-c0x;dvy=c1y-c0y;var d0=ax2.gnormy*c0x-ax2.gnormx*c0y;var d1=ax2.gnormy*c1x-ax2.gnormx*c1y;var den=1/(d1-d0);var t=(-ax2.tp1-d0)*den;if(t>nape_Config.epsilon){c0x+=dvx*t;c0y+=dvy*t}var t1=(-ax2.tp0-d1)*den;if(t1<-nape_Config.epsilon){c1x+=dvx*t1;c1y+=dvy*t1}var nx=0;var ny=0;var t2=scale;nx=ax2.gnormx*t2;ny=ax2.gnormy*t2;arb.lnormx=ax2.lnormx;arb.lnormy=ax2.lnormy;arb.lproj=ax2.lprojection;arb.radius=0;arb.rev=rev!=(scale==-1);arb.ptype=arb.rev?1:0;var c0d=c0x*ax2.gnormx+c0y*ax2.gnormy-ax2.gprojection;var c1d=c1x*ax2.gnormx+c1y*ax2.gnormy-ax2.gprojection;if(c0d>0&&c1d>0){return false}else{if(rev){nx=-nx;ny=-ny}var px=c0x-ax2.gnormx*c0d*.5;var py=c0y-ax2.gnormy*c0d*.5;var hash=arb.rev?1:0;var posOnly=c0d>0;if(posOnly==null){posOnly=false}var c=null;var cx_ite5=arb.contacts.next;while(cx_ite5!=null){var cur=cx_ite5;if(hash==cur.hash){c=cur;break}cx_ite5=cx_ite5.next}if(c==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c=new zpp_$nape_dynamics_ZPP_$Contact}else{c=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c.next;c.next=null}var ci=c.inner;ci.jnAcc=ci.jtAcc=0;c.hash=hash;c.fresh=true;c.arbiter=arb;arb.jrAcc=0;var _this=arb.contacts;c._inuse=true;var temp=c;temp.next=_this.next;_this.next=temp;_this.modified=true;_this.length++;arb.innards.add(ci)}else{c.fresh=false}c.px=px;c.py=py;arb.nx=nx;arb.ny=ny;c.dist=c0d;c.stamp=arb.stamp;c.posOnly=posOnly;var con=c;c0x-=q2.body.posx;c0y-=q2.body.posy;con.inner.lr1x=c0x*q2.body.axisy+c0y*q2.body.axisx;con.inner.lr1y=c0y*q2.body.axisy-c0x*q2.body.axisx;var px1=c1x-ax2.gnormx*c1d*.5;var py1=c1y-ax2.gnormy*c1d*.5;var hash1=arb.rev?0:1;var posOnly1=c1d>0;if(posOnly1==null){posOnly1=false}var c1=null;var cx_ite6=arb.contacts.next;while(cx_ite6!=null){var cur1=cx_ite6;if(hash1==cur1.hash){c1=cur1;break}cx_ite6=cx_ite6.next}if(c1==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c1=new zpp_$nape_dynamics_ZPP_$Contact}else{c1=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c1.next;c1.next=null}var ci1=c1.inner;ci1.jnAcc=ci1.jtAcc=0;c1.hash=hash1;c1.fresh=true;c1.arbiter=arb;arb.jrAcc=0;var _this1=arb.contacts;c1._inuse=true;var temp1=c1;temp1.next=_this1.next;_this1.next=temp1;_this1.modified=true;_this1.length++;arb.innards.add(ci1)}else{c1.fresh=false}c1.px=px1;c1.py=py1;arb.nx=nx;arb.ny=ny;c1.dist=c1d;c1.stamp=arb.stamp;c1.posOnly=posOnly1;con=c1;c1x-=q2.body.posx;c1y-=q2.body.posy;con.inner.lr1x=c1x*q2.body.axisy+c1y*q2.body.axisx;con.inner.lr1y=c1y*q2.body.axisy-c1x*q2.body.axisx;if(maxi==1){arb.__ref_edge1=ax2;arb.__ref_edge2=ay}else{arb.__ref_edge2=ax2;arb.__ref_edge1=ay}return true}}}else{return false}}else{var max1=-1e100;var cont1=true;var a0=null;var vi=null;var vite=s2.polygon.gverts.next;var cx_ite7=s2.polygon.edges.head;while(cx_ite7!=null){var a=cx_ite7.elt;var dist=a.gnormx*s1.circle.worldCOMx+a.gnormy*s1.circle.worldCOMy-a.gprojection-s1.circle.radius;if(dist>0){cont1=false;break}if(dist>max1){max1=dist;a0=a;vi=vite}vite=vite.next;cx_ite7=cx_ite7.next}if(cont1){var v0=vi;var v11=vi.next==null?s2.polygon.gverts.next:vi.next;var dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius;var px2=0;var py2=0;px2=v0.x-s1.circle.worldCOMx;py2=v0.y-s1.circle.worldCOMy;var distSqr=px2*px2+py2*py2;var co;if(distSqr>minDist*minDist){co=null}else if(distSqr<nape_Config.epsilon*nape_Config.epsilon){var px3=s1.circle.worldCOMx;var py3=s1.circle.worldCOMy;var c2=null;var cx_ite8=arb.contacts.next;while(cx_ite8!=null){var cur2=cx_ite8;if(0==cur2.hash){c2=cur2;break}cx_ite8=cx_ite8.next}if(c2==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c2=new zpp_$nape_dynamics_ZPP_$Contact}else{c2=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c2.next;c2.next=null}var ci2=c2.inner;ci2.jnAcc=ci2.jtAcc=0;c2.hash=0;c2.fresh=true;c2.arbiter=arb;arb.jrAcc=0;var _this2=arb.contacts;c2._inuse=true;var temp2=c2;temp2.next=_this2.next;_this2.next=temp2;_this2.modified=true;_this2.length++;arb.innards.add(ci2)}else{c2.fresh=false}c2.px=px3;c2.py=py3;arb.nx=1;arb.ny=0;c2.dist=-minDist;c2.stamp=arb.stamp;c2.posOnly=false;co=c2}else{var invDist=1/Math.sqrt(distSqr);var dist1=invDist<nape_Config.epsilon?1e100:1/invDist;var df=.5+(s1.circle.radius-.5*minDist)*invDist;if(rev){var px4=s1.circle.worldCOMx+px2*df;var py4=s1.circle.worldCOMy+py2*df;var c3=null;var cx_ite9=arb.contacts.next;while(cx_ite9!=null){var cur3=cx_ite9;if(0==cur3.hash){c3=cur3;break}cx_ite9=cx_ite9.next}if(c3==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c3=new zpp_$nape_dynamics_ZPP_$Contact}else{c3=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c3.next;c3.next=null}var ci3=c3.inner;ci3.jnAcc=ci3.jtAcc=0;c3.hash=0;c3.fresh=true;c3.arbiter=arb;arb.jrAcc=0;var _this3=arb.contacts;c3._inuse=true;var temp3=c3;temp3.next=_this3.next;_this3.next=temp3;_this3.modified=true;_this3.length++;arb.innards.add(ci3)}else{c3.fresh=false}c3.px=px4;c3.py=py4;arb.nx=-px2*invDist;arb.ny=-py2*invDist;c3.dist=dist1-minDist;c3.stamp=arb.stamp;c3.posOnly=false;co=c3}else{var px5=s1.circle.worldCOMx+px2*df;var py5=s1.circle.worldCOMy+py2*df;var c4=null;var cx_ite10=arb.contacts.next;while(cx_ite10!=null){var cur4=cx_ite10;if(0==cur4.hash){c4=cur4;break}cx_ite10=cx_ite10.next}if(c4==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c4=new zpp_$nape_dynamics_ZPP_$Contact}else{c4=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c4.next;c4.next=null}var ci4=c4.inner;ci4.jnAcc=ci4.jtAcc=0;c4.hash=0;c4.fresh=true;c4.arbiter=arb;arb.jrAcc=0;var _this4=arb.contacts;c4._inuse=true;var temp4=c4;temp4.next=_this4.next;_this4.next=temp4;_this4.modified=true;_this4.length++;arb.innards.add(ci4)}else{c4.fresh=false}c4.px=px5;c4.py=py5;arb.nx=px2*invDist;arb.ny=py2*invDist;c4.dist=dist1-minDist;c4.stamp=arb.stamp;c4.posOnly=false;co=c4}}if(co!=null){var con1=co.inner;arb.ptype=2;var vx=0;var vy=0;vx=v0.x-s2.polygon.body.posx;vy=v0.y-s2.polygon.body.posy;arb.__ref_edge1=a0;arb.__ref_vertex=-1;if(rev){con1.lr1x=vx*s2.polygon.body.axisy+vy*s2.polygon.body.axisx;con1.lr1y=vy*s2.polygon.body.axisy-vx*s2.polygon.body.axisx;con1.lr2x=s1.circle.localCOMx;con1.lr2y=s1.circle.localCOMy}else{con1.lr2x=vx*s2.polygon.body.axisy+vy*s2.polygon.body.axisx;con1.lr2y=vy*s2.polygon.body.axisy-vx*s2.polygon.body.axisx;con1.lr1x=s1.circle.localCOMx;con1.lr1y=s1.circle.localCOMy}arb.radius=s1.circle.radius}return co!=null}else if(dt>=v11.y*a0.gnormx-v11.x*a0.gnormy){var minDist1=s1.circle.radius;var px6=0;var py6=0;px6=v11.x-s1.circle.worldCOMx;py6=v11.y-s1.circle.worldCOMy;var distSqr1=px6*px6+py6*py6;var co1;if(distSqr1>minDist1*minDist1){co1=null}else if(distSqr1<nape_Config.epsilon*nape_Config.epsilon){var px7=s1.circle.worldCOMx;var py7=s1.circle.worldCOMy;var c5=null;var cx_ite11=arb.contacts.next;while(cx_ite11!=null){var cur5=cx_ite11;if(0==cur5.hash){c5=cur5;break}cx_ite11=cx_ite11.next}if(c5==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c5=new zpp_$nape_dynamics_ZPP_$Contact}else{c5=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c5.next;c5.next=null}var ci5=c5.inner;ci5.jnAcc=ci5.jtAcc=0;c5.hash=0;c5.fresh=true;c5.arbiter=arb;arb.jrAcc=0;var _this5=arb.contacts;c5._inuse=true;var temp5=c5;temp5.next=_this5.next;_this5.next=temp5;_this5.modified=true;_this5.length++;arb.innards.add(ci5)}else{c5.fresh=false}c5.px=px7;c5.py=py7;arb.nx=1;arb.ny=0;c5.dist=-minDist1;c5.stamp=arb.stamp;c5.posOnly=false;co1=c5}else{var invDist1=1/Math.sqrt(distSqr1);var dist2=invDist1<nape_Config.epsilon?1e100:1/invDist1;var df1=.5+(s1.circle.radius-.5*minDist1)*invDist1;if(rev){var px8=s1.circle.worldCOMx+px6*df1;var py8=s1.circle.worldCOMy+py6*df1;var c6=null;var cx_ite12=arb.contacts.next;while(cx_ite12!=null){var cur6=cx_ite12;if(0==cur6.hash){c6=cur6;break}cx_ite12=cx_ite12.next}if(c6==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c6=new zpp_$nape_dynamics_ZPP_$Contact}else{c6=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c6.next;c6.next=null}var ci6=c6.inner;ci6.jnAcc=ci6.jtAcc=0;c6.hash=0;c6.fresh=true;c6.arbiter=arb;arb.jrAcc=0;var _this6=arb.contacts;c6._inuse=true;var temp6=c6;temp6.next=_this6.next;_this6.next=temp6;_this6.modified=true;_this6.length++;arb.innards.add(ci6)}else{c6.fresh=false}c6.px=px8;c6.py=py8;arb.nx=-px6*invDist1;arb.ny=-py6*invDist1;c6.dist=dist2-minDist1;c6.stamp=arb.stamp;c6.posOnly=false;co1=c6}else{var px9=s1.circle.worldCOMx+px6*df1;var py9=s1.circle.worldCOMy+py6*df1;var c7=null;var cx_ite13=arb.contacts.next;while(cx_ite13!=null){var cur7=cx_ite13;if(0==cur7.hash){c7=cur7;break}cx_ite13=cx_ite13.next}if(c7==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c7=new zpp_$nape_dynamics_ZPP_$Contact}else{c7=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c7.next;c7.next=null}var ci7=c7.inner;ci7.jnAcc=ci7.jtAcc=0;c7.hash=0;c7.fresh=true;c7.arbiter=arb;arb.jrAcc=0;var _this7=arb.contacts;c7._inuse=true;var temp7=c7;temp7.next=_this7.next;_this7.next=temp7;_this7.modified=true;_this7.length++;arb.innards.add(ci7)}else{c7.fresh=false}c7.px=px9;c7.py=py9;arb.nx=px6*invDist1;arb.ny=py6*invDist1;c7.dist=dist2-minDist1;c7.stamp=arb.stamp;c7.posOnly=false;co1=c7}}if(co1!=null){var con2=co1.inner;arb.ptype=2;var vx1=0;var vy1=0;vx1=v11.x-s2.polygon.body.posx;vy1=v11.y-s2.polygon.body.posy;arb.__ref_edge1=a0;arb.__ref_vertex=1;if(rev){con2.lr1x=vx1*s2.polygon.body.axisy+vy1*s2.polygon.body.axisx;con2.lr1y=vy1*s2.polygon.body.axisy-vx1*s2.polygon.body.axisx;con2.lr2x=s1.circle.localCOMx;con2.lr2y=s1.circle.localCOMy}else{con2.lr2x=vx1*s2.polygon.body.axisy+vy1*s2.polygon.body.axisx;con2.lr2y=vy1*s2.polygon.body.axisy-vx1*s2.polygon.body.axisx;con2.lr1x=s1.circle.localCOMx;con2.lr1y=s1.circle.localCOMy}arb.radius=s1.circle.radius}return co1!=null}else{var nx1=0;var ny1=0;var t3=s1.circle.radius+max1*.5;nx1=a0.gnormx*t3;ny1=a0.gnormy*t3;var px10=0;var py10=0;px10=s1.circle.worldCOMx-nx1;py10=s1.circle.worldCOMy-ny1;var con3;if(rev){var nx2=a0.gnormx;var ny2=a0.gnormy;var c8=null;var cx_ite14=arb.contacts.next;while(cx_ite14!=null){var cur8=cx_ite14;if(0==cur8.hash){c8=cur8;break}cx_ite14=cx_ite14.next}if(c8==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c8=new zpp_$nape_dynamics_ZPP_$Contact}else{c8=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c8.next;c8.next=null}var ci8=c8.inner;ci8.jnAcc=ci8.jtAcc=0;c8.hash=0;c8.fresh=true;c8.arbiter=arb;arb.jrAcc=0;var _this8=arb.contacts;c8._inuse=true;var temp8=c8;temp8.next=_this8.next;_this8.next=temp8;_this8.modified=true;_this8.length++;arb.innards.add(ci8)}else{c8.fresh=false}c8.px=px10;c8.py=py10;arb.nx=nx2;arb.ny=ny2;c8.dist=max1;c8.stamp=arb.stamp;c8.posOnly=false;con3=c8}else{var nx3=-a0.gnormx;var ny3=-a0.gnormy;var c9=null;var cx_ite15=arb.contacts.next;while(cx_ite15!=null){var cur9=cx_ite15;if(0==cur9.hash){c9=cur9;break}cx_ite15=cx_ite15.next}if(c9==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c9=new zpp_$nape_dynamics_ZPP_$Contact}else{c9=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c9.next;c9.next=null}var ci9=c9.inner;ci9.jnAcc=ci9.jtAcc=0;c9.hash=0;c9.fresh=true;c9.arbiter=arb;arb.jrAcc=0;var _this9=arb.contacts;c9._inuse=true;var temp9=c9;temp9.next=_this9.next;_this9.next=temp9;_this9.modified=true;_this9.length++;arb.innards.add(ci9)}else{c9.fresh=false}c9.px=px10;c9.py=py10;arb.nx=nx3;arb.ny=ny3;c9.dist=max1;c9.stamp=arb.stamp;c9.posOnly=false;con3=c9}arb.ptype=rev?0:1;arb.lnormx=a0.lnormx;arb.lnormy=a0.lnormy;arb.rev=!rev;arb.lproj=a0.lprojection;arb.radius=s1.circle.radius;con3.inner.lr1x=s1.circle.localCOMx;con3.inner.lr1y=s1.circle.localCOMy;arb.__ref_edge1=a0;arb.__ref_vertex=0;return true}}else{return false}}}else{var minDist2=s1.circle.radius+s2.circle.radius;var px11=0;var py11=0;px11=s2.circle.worldCOMx-s1.circle.worldCOMx;py11=s2.circle.worldCOMy-s1.circle.worldCOMy;var distSqr2=px11*px11+py11*py11;var co2;if(distSqr2>minDist2*minDist2){co2=null}else if(distSqr2<nape_Config.epsilon*nape_Config.epsilon){var px12=s1.circle.worldCOMx;var py12=s1.circle.worldCOMy;var c10=null;var cx_ite16=arb.contacts.next;while(cx_ite16!=null){var cur10=cx_ite16;if(0==cur10.hash){c10=cur10;break}cx_ite16=cx_ite16.next}if(c10==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c10=new zpp_$nape_dynamics_ZPP_$Contact}else{c10=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c10.next;c10.next=null}var ci10=c10.inner;ci10.jnAcc=ci10.jtAcc=0;c10.hash=0;c10.fresh=true;c10.arbiter=arb;arb.jrAcc=0;var _this10=arb.contacts;c10._inuse=true;var temp10=c10;temp10.next=_this10.next;_this10.next=temp10;_this10.modified=true;_this10.length++;arb.innards.add(ci10)}else{c10.fresh=false}c10.px=px12;c10.py=py12;arb.nx=1;arb.ny=0;c10.dist=-minDist2;c10.stamp=arb.stamp;c10.posOnly=false;co2=c10}else{var invDist2=1/Math.sqrt(distSqr2);var dist3=invDist2<nape_Config.epsilon?1e100:1/invDist2;var df2=.5+(s1.circle.radius-.5*minDist2)*invDist2;if(rev){var px13=s1.circle.worldCOMx+px11*df2;var py13=s1.circle.worldCOMy+py11*df2;var c11=null;var cx_ite17=arb.contacts.next;while(cx_ite17!=null){var cur11=cx_ite17;if(0==cur11.hash){c11=cur11;break}cx_ite17=cx_ite17.next}if(c11==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c11=new zpp_$nape_dynamics_ZPP_$Contact}else{c11=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c11.next;c11.next=null}var ci11=c11.inner;ci11.jnAcc=ci11.jtAcc=0;c11.hash=0;c11.fresh=true;c11.arbiter=arb;arb.jrAcc=0;var _this11=arb.contacts;c11._inuse=true;var temp11=c11;temp11.next=_this11.next;_this11.next=temp11;_this11.modified=true;_this11.length++;arb.innards.add(ci11)}else{c11.fresh=false}c11.px=px13;c11.py=py13;arb.nx=-px11*invDist2;arb.ny=-py11*invDist2;c11.dist=dist3-minDist2;c11.stamp=arb.stamp;c11.posOnly=false;co2=c11}else{var px14=s1.circle.worldCOMx+px11*df2;var py14=s1.circle.worldCOMy+py11*df2;var c12=null;var cx_ite18=arb.contacts.next;while(cx_ite18!=null){var cur12=cx_ite18;if(0==cur12.hash){c12=cur12;break}cx_ite18=cx_ite18.next}if(c12==null){if(zpp_$nape_dynamics_ZPP_$Contact.zpp_pool==null){c12=new zpp_$nape_dynamics_ZPP_$Contact}else{c12=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c12.next;c12.next=null}var ci12=c12.inner;ci12.jnAcc=ci12.jtAcc=0;c12.hash=0;c12.fresh=true;c12.arbiter=arb;arb.jrAcc=0;var _this12=arb.contacts;c12._inuse=true;var temp12=c12;temp12.next=_this12.next;_this12.next=temp12;_this12.modified=true;_this12.length++;arb.innards.add(ci12)}else{c12.fresh=false}c12.px=px14;c12.py=py14;arb.nx=px11*invDist2;arb.ny=py11*invDist2;c12.dist=dist3-minDist2;c12.stamp=arb.stamp;c12.posOnly=false;co2=c12}}if(co2!=null){var con4=co2.inner;if(rev){con4.lr1x=s2.circle.localCOMx;con4.lr1y=s2.circle.localCOMy;con4.lr2x=s1.circle.localCOMx;con4.lr2y=s1.circle.localCOMy}else{con4.lr1x=s1.circle.localCOMx;con4.lr1y=s1.circle.localCOMy;con4.lr2x=s2.circle.localCOMx;con4.lr2y=s2.circle.localCOMy}arb.radius=s1.circle.radius+s2.circle.radius;arb.ptype=2;return true}else{return false}}};zpp_$nape_geom_ZPP_$Collide.testCollide_safe=function(s1,s2){if(s2.type==0){var t=s1;s1=s2;s2=t}return zpp_$nape_geom_ZPP_$Collide.testCollide(s1,s2)};zpp_$nape_geom_ZPP_$Collide.testCollide=function(s1,s2){if(s2.type==1){if(s1.type==1){var cont=true;var cx_ite=s1.polygon.edges.head;while(cx_ite!=null){var ax=cx_ite.elt;var min=1e100;var cx_ite1=s2.polygon.gverts.next;while(cx_ite1!=null){var v=cx_ite1;var k=ax.gnormx*v.x+ax.gnormy*v.y;if(k<min){min=k}cx_ite1=cx_ite1.next}min-=ax.gprojection;if(min>0){cont=false;break}cx_ite=cx_ite.next}if(cont){var cx_ite2=s2.polygon.edges.head;while(cx_ite2!=null){var ax1=cx_ite2.elt;var min1=1e100;var cx_ite3=s1.polygon.gverts.next;while(cx_ite3!=null){var v1=cx_ite3;var k1=ax1.gnormx*v1.x+ax1.gnormy*v1.y;if(k1<min1){min1=k1}cx_ite3=cx_ite3.next}min1-=ax1.gprojection;if(min1>0){cont=false;break}cx_ite2=cx_ite2.next}return cont}else{return false}}else{var a0=null;var vi=null;var cont1=true;var max=-1e100;var vite=s2.polygon.gverts.next;var cx_ite4=s2.polygon.edges.head;while(cx_ite4!=null){var a=cx_ite4.elt;var dist=a.gnormx*s1.circle.worldCOMx+a.gnormy*s1.circle.worldCOMy-a.gprojection-s1.circle.radius;if(dist>0){cont1=false;break}if(dist>max){max=dist;a0=a;vi=vite}vite=vite.next;cx_ite4=cx_ite4.next}if(cont1){var v0=vi;var v11=vi.next==null?s2.polygon.gverts.next:vi.next;var dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius;var px=0;var py=0;px=v0.x-s1.circle.worldCOMx;py=v0.y-s1.circle.worldCOMy;return px*px+py*py<=minDist*minDist}else if(dt>=v11.y*a0.gnormx-v11.x*a0.gnormy){var minDist1=s1.circle.radius;var px1=0;var py1=0;px1=v11.x-s1.circle.worldCOMx;py1=v11.y-s1.circle.worldCOMy;return px1*px1+py1*py1<=minDist1*minDist1}else{return true}}else{return false}}}else{var minDist2=s1.circle.radius+s2.circle.radius;var px2=0;var py2=0;px2=s2.circle.worldCOMx-s1.circle.worldCOMx;py2=s2.circle.worldCOMy-s1.circle.worldCOMy;return px2*px2+py2*py2<=minDist2*minDist2}};zpp_$nape_geom_ZPP_$Collide.flowCollide=function(s1,s2,arb){if(s2.type==1){if(s1.type==1){var out1=[];var out2=[];var cont=true;var total=true;var cx_ite=s1.polygon.edges.head;while(cx_ite!=null){var ax=cx_ite.elt;var min=1e100;var ind=0;var cx_ite1=s2.polygon.gverts.next;while(cx_ite1!=null){var v=cx_ite1;var k=ax.gnormx*v.x+ax.gnormy*v.y;if(k<min){min=k}if(k>=ax.gprojection+nape_Config.epsilon){out2[ind]=true;total=false}++ind;cx_ite1=cx_ite1.next}min-=ax.gprojection;if(min>0){cont=false;break}cx_ite=cx_ite.next}if(total){var _this=s2.polygon;if(_this.zip_worldCOM){if(_this.body!=null){_this.zip_worldCOM=false;if(_this.zip_localCOM){_this.zip_localCOM=false;if(_this.type==1){var _this1=_this.polygon;if(_this1.lverts.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y}else if(_this1.lverts.next.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y;_this1.localCOMx+=_this1.lverts.next.next.x;_this1.localCOMy+=_this1.lverts.next.next.y;_this1.localCOMx*=.5;_this1.localCOMy*=.5}else{_this1.localCOMx=0;_this1.localCOMy=0;var area=0;var cx_ite2=_this1.lverts.next;var u=cx_ite2;cx_ite2=cx_ite2.next;var v1=cx_ite2;cx_ite2=cx_ite2.next;while(cx_ite2!=null){var w=cx_ite2;area+=v1.x*(w.y-u.y);var cf=w.y*v1.x-w.x*v1.y;_this1.localCOMx+=(v1.x+w.x)*cf;_this1.localCOMy+=(v1.y+w.y)*cf;u=v1;v1=w;cx_ite2=cx_ite2.next}cx_ite2=_this1.lverts.next;var w1=cx_ite2;area+=v1.x*(w1.y-u.y);var cf1=w1.y*v1.x-w1.x*v1.y;_this1.localCOMx+=(v1.x+w1.x)*cf1;_this1.localCOMy+=(v1.y+w1.y)*cf1;u=v1;cx_ite2=cx_ite2.next;var w2=cx_ite2;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this1.localCOMx+=(w1.x+w2.x)*cf2;_this1.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this1.localCOMx*=t;_this1.localCOMy*=t}}if(_this.wrap_localCOM!=null){_this.wrap_localCOM.zpp_inner.x=_this.localCOMx;_this.wrap_localCOM.zpp_inner.y=_this.localCOMy}}var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}arb.overlap=s2.polygon.area;arb.centroidx=s2.polygon.worldCOMx;arb.centroidy=s2.polygon.worldCOMy;return true}else if(cont){total=true;var cx_ite3=s2.polygon.edges.head;while(cx_ite3!=null){var ax1=cx_ite3.elt;var min1=1e100;var ind1=0;var cx_ite4=s1.polygon.gverts.next;while(cx_ite4!=null){var v2=cx_ite4;var k1=ax1.gnormx*v2.x+ax1.gnormy*v2.y;if(k1<min1){min1=k1}if(k1>=ax1.gprojection+nape_Config.epsilon){out1[ind1]=true;total=false}++ind1;cx_ite4=cx_ite4.next}min1-=ax1.gprojection;if(min1>0){cont=false;break}cx_ite3=cx_ite3.next}if(total){var _this3=s1.polygon;if(_this3.zip_worldCOM){if(_this3.body!=null){_this3.zip_worldCOM=false;if(_this3.zip_localCOM){_this3.zip_localCOM=false;if(_this3.type==1){var _this4=_this3.polygon;if(_this4.lverts.next.next==null){_this4.localCOMx=_this4.lverts.next.x;_this4.localCOMy=_this4.lverts.next.y}else if(_this4.lverts.next.next.next==null){_this4.localCOMx=_this4.lverts.next.x;_this4.localCOMy=_this4.lverts.next.y;_this4.localCOMx+=_this4.lverts.next.next.x;_this4.localCOMy+=_this4.lverts.next.next.y;_this4.localCOMx*=.5;_this4.localCOMy*=.5}else{_this4.localCOMx=0;_this4.localCOMy=0;var area1=0;var cx_ite5=_this4.lverts.next;var u1=cx_ite5;cx_ite5=cx_ite5.next;var v3=cx_ite5;cx_ite5=cx_ite5.next;while(cx_ite5!=null){var w3=cx_ite5;area1+=v3.x*(w3.y-u1.y);var cf3=w3.y*v3.x-w3.x*v3.y;_this4.localCOMx+=(v3.x+w3.x)*cf3;_this4.localCOMy+=(v3.y+w3.y)*cf3;u1=v3;v3=w3;cx_ite5=cx_ite5.next}cx_ite5=_this4.lverts.next;var w4=cx_ite5;area1+=v3.x*(w4.y-u1.y);var cf4=w4.y*v3.x-w4.x*v3.y;_this4.localCOMx+=(v3.x+w4.x)*cf4;_this4.localCOMy+=(v3.y+w4.y)*cf4;u1=v3;cx_ite5=cx_ite5.next;var w5=cx_ite5;area1+=w4.x*(w5.y-u1.y);var cf5=w5.y*w4.x-w5.x*w4.y;_this4.localCOMx+=(w4.x+w5.x)*cf5;_this4.localCOMy+=(w4.y+w5.y)*cf5;area1=1/(3*area1);var t1=area1;_this4.localCOMx*=t1;_this4.localCOMy*=t1}}if(_this3.wrap_localCOM!=null){_this3.wrap_localCOM.zpp_inner.x=_this3.localCOMx;_this3.wrap_localCOM.zpp_inner.y=_this3.localCOMy}}var _this5=_this3.body;if(_this5.zip_axis){_this5.zip_axis=false;_this5.axisx=Math.sin(_this5.rot);_this5.axisy=Math.cos(_this5.rot)}_this3.worldCOMx=_this3.body.posx+(_this3.body.axisy*_this3.localCOMx-_this3.body.axisx*_this3.localCOMy);_this3.worldCOMy=_this3.body.posy+(_this3.localCOMx*_this3.body.axisx+_this3.localCOMy*_this3.body.axisy)}}arb.overlap=s1.polygon.area;arb.centroidx=s1.polygon.worldCOMx;arb.centroidy=s1.polygon.worldCOMy;return true}else if(cont){while(zpp_$nape_geom_ZPP_$Collide.flowpoly.head!=null){var p=zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe();if(!p._inuse){if(p.outer!=null){p.outer.zpp_inner=null;p.outer=null}p._isimmutable=null;p._validate=null;p._invalidate=null;p.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p}}var fst_vert=null;var poly1=false;var ite1=s1.polygon.gverts.next;var ind11=0;var ite2=s2.polygon.gverts.next;var ind2=0;var _g=0;var _g1=s2.polygon.edgeCnt;while(_g<_g1){var i=_g++;if(!out2[i]){ind2=i;break}else{ite2=ite2.next}}if(ite2==null){ite2=s2.polygon.gverts.next;poly1=true;var _g2=0;var _g3=s1.polygon.edgeCnt;while(_g2<_g3){var i1=_g2++;if(!out1[i1]){ind11=i1;break}else{ite1=ite1.next}}if(ite1==null){ite1=s1.polygon.gverts.next}else{zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ite1);fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}}else{zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ite2);fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}var cnt=1;if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head==null){var cx_cont=true;var cx_itei=s1.polygon.gverts.next;var u2=cx_itei;var cx_itej=cx_itei.next;while(cx_itej!=null){var v4=cx_itej;var min2=2;var cx_itei1=s2.polygon.gverts.next;var a=cx_itei1;var cx_itej1=cx_itei1.next;while(cx_itej1!=null){var b=cx_itej1;var t2=0;var _sx=0;var _sy=0;_sx=u2.x-a.x;_sy=u2.y-a.y;var _vx=0;var _vy=0;_vx=v4.x-u2.x;_vy=v4.y-u2.y;var _qx=0;var _qy=0;_qx=b.x-a.x;_qy=b.y-a.y;var den=_vy*_qx-_vx*_qy;var tmp;if(den*den>nape_Config.epsilon*nape_Config.epsilon){den=1/den;var txx=(_qy*_sx-_qx*_sy)*den;if(txx>nape_Config.epsilon&&txx<1-nape_Config.epsilon){var sxx=(_vy*_sx-_vx*_sy)*den;if(sxx>nape_Config.epsilon&&sxx<1-nape_Config.epsilon){t2=txx;tmp=true}else{tmp=false}}else{tmp=false}}else{tmp=false}if(tmp){if(t2<min2){min2=t2;ite2=cx_itei1}}cx_itei1=cx_itej1;a=b;cx_itej1=cx_itej1.next}while(true){cx_itej1=s2.polygon.gverts.next;var b1=cx_itej1;var t3=0;var _sx1=0;var _sy1=0;_sx1=u2.x-a.x;_sy1=u2.y-a.y;var _vx1=0;var _vy1=0;_vx1=v4.x-u2.x;_vy1=v4.y-u2.y;var _qx1=0;var _qy1=0;_qx1=b1.x-a.x;_qy1=b1.y-a.y;var den1=_vy1*_qx1-_vx1*_qy1;var tmp1;if(den1*den1>nape_Config.epsilon*nape_Config.epsilon){den1=1/den1;var txx1=(_qy1*_sx1-_qx1*_sy1)*den1;if(txx1>nape_Config.epsilon&&txx1<1-nape_Config.epsilon){var sxx1=(_vy1*_sx1-_vx1*_sy1)*den1;if(sxx1>nape_Config.epsilon&&sxx1<1-nape_Config.epsilon){t3=txx1;tmp1=true}else{tmp1=false}}else{tmp1=false}}else{tmp1=false}if(tmp1){if(t3<min2){min2=t3;ite2=cx_itei1}}break}if(min2!=2){var cx=0;var cy=0;var T=min2;cx=u2.x+(v4.x-u2.x)*T;cy=u2.y+(v4.y-u2.y)*T;var ret;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Vec2}else{ret=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.weak=false;ret._immutable=false;ret.x=cx;ret.y=cy;fst_vert=ret;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert);poly1=true;ite1=cx_itei;cx_cont=false;break}cx_itei=cx_itej;u2=v4;cx_itej=cx_itej.next}if(cx_cont){while(true){cx_itej=s1.polygon.gverts.next;var v5=cx_itej;var min3=2;var cx_itei2=s2.polygon.gverts.next;var a1=cx_itei2;var cx_itej2=cx_itei2.next;while(cx_itej2!=null){var b2=cx_itej2;var t4=0;var _sx2=0;var _sy2=0;_sx2=u2.x-a1.x;_sy2=u2.y-a1.y;var _vx2=0;var _vy2=0;_vx2=v5.x-u2.x;_vy2=v5.y-u2.y;var _qx2=0;var _qy2=0;_qx2=b2.x-a1.x;_qy2=b2.y-a1.y;var den2=_vy2*_qx2-_vx2*_qy2;var tmp2;if(den2*den2>nape_Config.epsilon*nape_Config.epsilon){den2=1/den2;var txx2=(_qy2*_sx2-_qx2*_sy2)*den2;if(txx2>nape_Config.epsilon&&txx2<1-nape_Config.epsilon){var sxx2=(_vy2*_sx2-_vx2*_sy2)*den2;if(sxx2>nape_Config.epsilon&&sxx2<1-nape_Config.epsilon){t4=txx2;tmp2=true}else{tmp2=false}}else{tmp2=false}}else{tmp2=false}if(tmp2){if(t4<min3){min3=t4;ite2=cx_itei2}}cx_itei2=cx_itej2;a1=b2;cx_itej2=cx_itej2.next}while(true){cx_itej2=s2.polygon.gverts.next;var b3=cx_itej2;var t5=0;var _sx3=0;var _sy3=0;_sx3=u2.x-a1.x;_sy3=u2.y-a1.y;var _vx3=0;var _vy3=0;_vx3=v5.x-u2.x;_vy3=v5.y-u2.y;var _qx3=0;var _qy3=0;_qx3=b3.x-a1.x;_qy3=b3.y-a1.y;var den3=_vy3*_qx3-_vx3*_qy3;var tmp3;if(den3*den3>nape_Config.epsilon*nape_Config.epsilon){den3=1/den3;var txx3=(_qy3*_sx3-_qx3*_sy3)*den3;if(txx3>nape_Config.epsilon&&txx3<1-nape_Config.epsilon){var sxx3=(_vy3*_sx3-_vx3*_sy3)*den3;if(sxx3>nape_Config.epsilon&&sxx3<1-nape_Config.epsilon){t5=txx3;tmp3=true}else{tmp3=false}}else{tmp3=false}}else{tmp3=false}if(tmp3){if(t5<min3){min3=t5;ite2=cx_itei2}}break}if(min3!=2){var cx1=0;var cy1=0;var T1=min3;cx1=u2.x+(v5.x-u2.x)*T1;cy1=u2.y+(v5.y-u2.y)*T1;var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=cx1;ret1.y=cy1;fst_vert=ret1;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert);poly1=true;ite1=cx_itei;break}break}}cnt=2}while(true)if(poly1){ite1=ite1.next;++ind11;if(ite1==null){ite1=s1.polygon.gverts.next;ind11=0}if(!out1[ind11]){var ex=ite1;var tmp4;if(fst_vert!=null){var dx=0;var dy=0;dx=ex.x-fst_vert.x;dy=ex.y-fst_vert.y;tmp4=dx*dx+dy*dy<nape_Config.epsilon}else{tmp4=false}if(tmp4){break}zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ex);if(fst_vert==null){fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}cnt=1}else{var a2=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt;var b4=ite1;var u3=ite2;var itm=ite2.next;if(itm==null){itm=s2.polygon.gverts.next}var max=-1;var itmo=null;var indo=0;var icnt=0;var beg_ite=itm;var cx_ite6=itm;while(true){var v6=cx_ite6;var t6=0;var _sx4=0;var _sy4=0;_sx4=u3.x-a2.x;_sy4=u3.y-a2.y;var _vx4=0;var _vy4=0;_vx4=v6.x-u3.x;_vy4=v6.y-u3.y;var _qx4=0;var _qy4=0;_qx4=b4.x-a2.x;_qy4=b4.y-a2.y;var den4=_vy4*_qx4-_vx4*_qy4;var tmp5;if(den4*den4>nape_Config.epsilon*nape_Config.epsilon){den4=1/den4;var txx4=(_qy4*_sx4-_qx4*_sy4)*den4;if(txx4>nape_Config.epsilon&&txx4<1-nape_Config.epsilon){var sxx4=(_vy4*_sx4-_vx4*_sy4)*den4;if(sxx4>nape_Config.epsilon&&sxx4<1-nape_Config.epsilon){t6=txx4;tmp5=true}else{tmp5=false}}else{tmp5=false}}else{tmp5=false}if(tmp5){if(t6>=-1){itmo=ite2;indo=ind2;icnt=1;if(1==cnt){max=t6;cx_ite6=beg_ite;break}else{max=t6}}}u3=v6;ite2=cx_ite6;++ind2;if(ind2>=s2.polygon.edgeCnt){ind2=0}cx_ite6=cx_ite6.next;if(cx_ite6==null){cx_ite6=s2.polygon.gverts.next}break}while(cx_ite6!=beg_ite){var v7=cx_ite6;var t7=0;var _sx5=0;var _sy5=0;_sx5=u3.x-a2.x;_sy5=u3.y-a2.y;var _vx5=0;var _vy5=0;_vx5=v7.x-u3.x;_vy5=v7.y-u3.y;var _qx5=0;var _qy5=0;_qx5=b4.x-a2.x;_qy5=b4.y-a2.y;var den5=_vy5*_qx5-_vx5*_qy5;var tmp6;if(den5*den5>nape_Config.epsilon*nape_Config.epsilon){den5=1/den5;var txx5=(_qy5*_sx5-_qx5*_sy5)*den5;if(txx5>nape_Config.epsilon&&txx5<1-nape_Config.epsilon){var sxx5=(_vy5*_sx5-_vx5*_sy5)*den5;if(sxx5>nape_Config.epsilon&&sxx5<1-nape_Config.epsilon){t7=txx5;tmp6=true}else{tmp6=false}}else{tmp6=false}}else{tmp6=false}if(tmp6){if(t7>=max){itmo=ite2;indo=ind2;if(++icnt==cnt){max=t7;break}else{max=t7}}}u3=v7;ite2=cx_ite6;++ind2;if(ind2>=s2.polygon.edgeCnt){ind2=0}cx_ite6=cx_ite6.next;if(cx_ite6==null){cx_ite6=s2.polygon.gverts.next}}if(itmo==null){break}var u4=itmo;var itm2=itmo.next;if(itm2==null){itm2=s2.polygon.gverts.next}var v8=itm2;var cx2=0;var cy2=0;var T2=max;cx2=u4.x+(v8.x-u4.x)*T2;cy2=u4.y+(v8.y-u4.y)*T2;var tmp7;if(fst_vert!=null){var dx1=0;var dy1=0;dx1=cx2-fst_vert.x;dy1=cy2-fst_vert.y;tmp7=dx1*dx1+dy1*dy1<nape_Config.epsilon}else{tmp7=false}if(tmp7){break}var ret2;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret2=new zpp_$nape_geom_ZPP_$Vec2}else{ret2=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret2.next;ret2.next=null}ret2.weak=false;ret2._immutable=false;ret2.x=cx2;ret2.y=cy2;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ret2);if(fst_vert==null){fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}ite2=itmo;ind2=indo;poly1=!poly1;cnt=2}}else{ite2=ite2.next;++ind2;if(ite2==null){ite2=s2.polygon.gverts.next;ind2=0}if(!out2[ind2]){var ex1=ite2;var tmp8;if(fst_vert!=null){var dx2=0;var dy2=0;dx2=ex1.x-fst_vert.x;dy2=ex1.y-fst_vert.y;tmp8=dx2*dx2+dy2*dy2<nape_Config.epsilon}else{tmp8=false}if(tmp8){break}zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ex1);if(fst_vert==null){fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}cnt=1}else{var a3=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt;var b5=ite2;var u5=ite1;var itm1=ite1.next;if(itm1==null){itm1=s1.polygon.gverts.next}var max1=-1;var itmo1=null;var indo1=0;var icnt1=0;var beg_ite1=itm1;var cx_ite7=itm1;while(true){var v9=cx_ite7;var t8=0;var _sx6=0;var _sy6=0;_sx6=u5.x-a3.x;_sy6=u5.y-a3.y;var _vx6=0;var _vy6=0;_vx6=v9.x-u5.x;_vy6=v9.y-u5.y;var _qx6=0;var _qy6=0;_qx6=b5.x-a3.x;_qy6=b5.y-a3.y;var den6=_vy6*_qx6-_vx6*_qy6;var tmp9;if(den6*den6>nape_Config.epsilon*nape_Config.epsilon){den6=1/den6;var txx6=(_qy6*_sx6-_qx6*_sy6)*den6;if(txx6>nape_Config.epsilon&&txx6<1-nape_Config.epsilon){var sxx6=(_vy6*_sx6-_vx6*_sy6)*den6;if(sxx6>nape_Config.epsilon&&sxx6<1-nape_Config.epsilon){t8=txx6;tmp9=true}else{tmp9=false}}else{tmp9=false}}else{tmp9=false}if(tmp9){if(t8>=-1){itmo1=ite1;indo1=ind11;icnt1=1;if(1==cnt){max1=t8;cx_ite7=beg_ite1;break}else{max1=t8}}}u5=v9;ite1=cx_ite7;++ind11;if(ind11>=s1.polygon.edgeCnt){ind11=0}cx_ite7=cx_ite7.next;if(cx_ite7==null){cx_ite7=s1.polygon.gverts.next}break}while(cx_ite7!=beg_ite1){var v10=cx_ite7;var t9=0;var _sx7=0;var _sy7=0;_sx7=u5.x-a3.x;_sy7=u5.y-a3.y;var _vx7=0;var _vy7=0;_vx7=v10.x-u5.x;_vy7=v10.y-u5.y;var _qx7=0;var _qy7=0;_qx7=b5.x-a3.x;_qy7=b5.y-a3.y;var den7=_vy7*_qx7-_vx7*_qy7;var tmp10;if(den7*den7>nape_Config.epsilon*nape_Config.epsilon){den7=1/den7;var txx7=(_qy7*_sx7-_qx7*_sy7)*den7;if(txx7>nape_Config.epsilon&&txx7<1-nape_Config.epsilon){var sxx7=(_vy7*_sx7-_vx7*_sy7)*den7;if(sxx7>nape_Config.epsilon&&sxx7<1-nape_Config.epsilon){t9=txx7;tmp10=true}else{tmp10=false}}else{tmp10=false}}else{tmp10=false}if(tmp10){if(t9>=max1){itmo1=ite1;indo1=ind11;if(++icnt1==cnt){max1=t9;break}else{max1=t9}}}u5=v10;ite1=cx_ite7;++ind11;if(ind11>=s1.polygon.edgeCnt){ind11=0}cx_ite7=cx_ite7.next;if(cx_ite7==null){cx_ite7=s1.polygon.gverts.next}}if(itmo1==null){break}var u6=itmo1;var itm21=itmo1.next;if(itm21==null){itm21=s1.polygon.gverts.next}var v11=itm21;var cx3=0;var cy3=0;var T3=max1;cx3=u6.x+(v11.x-u6.x)*T3;cy3=u6.y+(v11.y-u6.y)*T3;var tmp11;if(fst_vert!=null){var dx3=0;var dy3=0;dx3=cx3-fst_vert.x;dy3=cy3-fst_vert.y;tmp11=dx3*dx3+dy3*dy3<nape_Config.epsilon}else{tmp11=false}if(tmp11){break}var ret3;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret3=new zpp_$nape_geom_ZPP_$Vec2}else{ret3=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret3.next;ret3.next=null}ret3.weak=false;ret3._immutable=false;ret3.x=cx3;ret3.y=cy3;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ret3);if(fst_vert==null){fst_vert=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}ite1=itmo1;ind11=indo1;poly1=!poly1;cnt=2}}if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head!=null&&zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next!=null&&zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.next!=null){var area2=0;var COMx=0;var COMy=0;COMx=0;COMy=0;area2=0;var cx_ite8=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;var u7=cx_ite8.elt;cx_ite8=cx_ite8.next;var v12=cx_ite8.elt;cx_ite8=cx_ite8.next;while(cx_ite8!=null){var w6=cx_ite8.elt;area2+=v12.x*(w6.y-u7.y);var cf6=w6.y*v12.x-w6.x*v12.y;COMx+=(v12.x+w6.x)*cf6;COMy+=(v12.y+w6.y)*cf6;u7=v12;v12=w6;cx_ite8=cx_ite8.next}cx_ite8=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;var w7=cx_ite8.elt;area2+=v12.x*(w7.y-u7.y);var cf7=w7.y*v12.x-w7.x*v12.y;COMx+=(v12.x+w7.x)*cf7;COMy+=(v12.y+w7.y)*cf7;u7=v12;cx_ite8=cx_ite8.next;var w8=cx_ite8.elt;area2+=w7.x*(w8.y-u7.y);var cf8=w8.y*w7.x-w8.x*w7.y;COMx+=(w7.x+w8.x)*cf8;COMy+=(w7.y+w8.y)*cf8;area2*=.5;var ia=1/(6*area2);COMx*=ia;COMy*=ia;arb.overlap=-area2;arb.centroidx=COMx;arb.centroidy=COMy;return true}else{return false}}else{return false}}else{return false}}else{var inte=[];var total1=true;var a0=null;var vi=null;var max2=-1e100;var cont1=true;var vite=s2.polygon.gverts.next;var ind3=0;var cx_ite9=s2.polygon.edges.head;while(cx_ite9!=null){var a4=cx_ite9.elt;var dist=a4.gnormx*s1.circle.worldCOMx+a4.gnormy*s1.circle.worldCOMy;if(dist>a4.gprojection+s1.circle.radius){cont1=false;break}else if(dist+s1.circle.radius>a4.gprojection+nape_Config.epsilon){total1=false;inte[ind3]=true}dist-=a4.gprojection+s1.circle.radius;if(dist>max2){max2=dist;a0=a4;vi=vite}vite=vite.next;++ind3;cx_ite9=cx_ite9.next}if(cont1){if(total1){arb.overlap=s1.circle.area;arb.centroidx=s1.circle.worldCOMx;arb.centroidy=s1.circle.worldCOMy;return true}else{var v0=vi;var v13=vi.next==null?s2.polygon.gverts.next:vi.next;var dt=s1.circle.worldCOMy*a0.gnormx-s1.circle.worldCOMx*a0.gnormy;var tmp12;if(dt<=v0.y*a0.gnormx-v0.x*a0.gnormy){var minDist=s1.circle.radius;var px=0;var py=0;px=v0.x-s1.circle.worldCOMx;py=v0.y-s1.circle.worldCOMy;tmp12=px*px+py*py<=minDist*minDist}else if(dt>=v13.y*a0.gnormx-v13.x*a0.gnormy){var minDist1=s1.circle.radius;var px1=0;var py1=0;px1=v13.x-s1.circle.worldCOMx;py1=v13.y-s1.circle.worldCOMy;tmp12=px1*px1+py1*py1<=minDist1*minDist1}else{tmp12=true}if(tmp12){var ins=[];var ind4=0;var total2=true;var vi1=null;var vind=0;var cx_ite10=s2.polygon.gverts.next;while(cx_ite10!=null){var v14=cx_ite10;var dx4=0;var dy4=0;dx4=v14.x-s1.circle.worldCOMx;dy4=v14.y-s1.circle.worldCOMy;if(!(ins[ind4]=dx4*dx4+dy4*dy4<=s1.circle.radius*s1.circle.radius)){total2=false}else{vind=ind4;vi1=cx_ite10}++ind4;cx_ite10=cx_ite10.next}if(total2){var _this6=s2.polygon;if(_this6.zip_worldCOM){if(_this6.body!=null){_this6.zip_worldCOM=false;if(_this6.zip_localCOM){_this6.zip_localCOM=false;if(_this6.type==1){var _this7=_this6.polygon;if(_this7.lverts.next.next==null){_this7.localCOMx=_this7.lverts.next.x;_this7.localCOMy=_this7.lverts.next.y}else if(_this7.lverts.next.next.next==null){_this7.localCOMx=_this7.lverts.next.x;_this7.localCOMy=_this7.lverts.next.y;_this7.localCOMx+=_this7.lverts.next.next.x;_this7.localCOMy+=_this7.lverts.next.next.y;_this7.localCOMx*=.5;_this7.localCOMy*=.5}else{_this7.localCOMx=0;_this7.localCOMy=0;var area3=0;var cx_ite11=_this7.lverts.next;var u8=cx_ite11;cx_ite11=cx_ite11.next;var v15=cx_ite11;cx_ite11=cx_ite11.next;while(cx_ite11!=null){var w9=cx_ite11;area3+=v15.x*(w9.y-u8.y);var cf9=w9.y*v15.x-w9.x*v15.y;_this7.localCOMx+=(v15.x+w9.x)*cf9;_this7.localCOMy+=(v15.y+w9.y)*cf9;u8=v15;v15=w9;cx_ite11=cx_ite11.next}cx_ite11=_this7.lverts.next;var w10=cx_ite11;area3+=v15.x*(w10.y-u8.y);var cf10=w10.y*v15.x-w10.x*v15.y;_this7.localCOMx+=(v15.x+w10.x)*cf10;_this7.localCOMy+=(v15.y+w10.y)*cf10;u8=v15;cx_ite11=cx_ite11.next;var w11=cx_ite11;area3+=w10.x*(w11.y-u8.y);var cf11=w11.y*w10.x-w11.x*w10.y;_this7.localCOMx+=(w10.x+w11.x)*cf11;_this7.localCOMy+=(w10.y+w11.y)*cf11;area3=1/(3*area3);var t10=area3;_this7.localCOMx*=t10;_this7.localCOMy*=t10}}if(_this6.wrap_localCOM!=null){_this6.wrap_localCOM.zpp_inner.x=_this6.localCOMx;_this6.wrap_localCOM.zpp_inner.y=_this6.localCOMy}}var _this8=_this6.body;if(_this8.zip_axis){_this8.zip_axis=false;_this8.axisx=Math.sin(_this8.rot);_this8.axisy=Math.cos(_this8.rot)}_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy);_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy)}}arb.overlap=s2.polygon.area;arb.centroidx=s2.polygon.worldCOMx;arb.centroidy=s2.polygon.worldCOMy;return true}else{while(zpp_$nape_geom_ZPP_$Collide.flowpoly.head!=null){var p1=zpp_$nape_geom_ZPP_$Collide.flowpoly.pop_unsafe();if(!p1._inuse){if(p1.outer!=null){p1.outer.zpp_inner=null;p1.outer=null}p1._isimmutable=null;p1._validate=null;p1._invalidate=null;p1.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=p1}}zpp_$nape_geom_ZPP_$Collide.flowsegs.clear();var fst_vert1=null;var state=1;if(vi1==null){vi1=s2.polygon.gverts.next;state=2}else{fst_vert1=vi1;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(fst_vert1)}while(state!=0)if(state==1){vi1=vi1.next;if(vi1==null){vi1=s2.polygon.gverts.next}++vind;if(vind>=s2.polygon.edgeCnt){vind=0}if(ins[vind]){var dx5=0;var dy5=0;dx5=fst_vert1.x-vi1.x;dy5=fst_vert1.y-vi1.y;if(dx5*dx5+dy5*dy5<nape_Config.epsilon){break}zpp_$nape_geom_ZPP_$Collide.flowpoly.add(vi1)}else{var u9=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt;var v16=vi1;var vx=0;var vy=0;vx=v16.x-u9.x;vy=v16.y-u9.y;var qx=0;var qy=0;qx=u9.x-s1.circle.worldCOMx;qy=u9.y-s1.circle.worldCOMy;var A=vx*vx+vy*vy;var B=2*(qx*vx+qy*vy);var D=Math.sqrt(B*B-4*A*(qx*qx+qy*qy-s1.circle.radius*s1.circle.radius));A=1/(2*A);var t11=(-B-D)*A;var cx4=0;var cy4=0;var T4=t11<nape_Config.epsilon?(-B+D)*A:t11;cx4=u9.x+(v16.x-u9.x)*T4;cy4=u9.y+(v16.y-u9.y)*T4;var dx6=0;var dy6=0;dx6=fst_vert1.x-cx4;dy6=fst_vert1.y-cy4;if(dx6*dx6+dy6*dy6<nape_Config.epsilon){break}var ret4;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret4=new zpp_$nape_geom_ZPP_$Vec2}else{ret4=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret4.next;ret4.next=null}ret4.weak=false;ret4._immutable=false;ret4.x=cx4;ret4.y=cy4;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ret4);state=2}}else if(state==2){var vi2=vi1.next;if(vi2==null){vi2=s2.polygon.gverts.next}var u10=vi1;state=0;var beg_ite2=vi2;var cx_ite12=vi2;while(true){var v17=cx_ite12;var vind2=vind+1;if(vind2==s2.polygon.edgeCnt){vind2=0}if(inte[vind]){if(ins[vind2]){var vx1=0;var vy1=0;vx1=v17.x-u10.x;vy1=v17.y-u10.y;var qx1=0;var qy1=0;qx1=u10.x-s1.circle.worldCOMx;qy1=u10.y-s1.circle.worldCOMy;var A1=vx1*vx1+vy1*vy1;var B1=2*(qx1*vx1+qy1*vy1);var D1=Math.sqrt(B1*B1-4*A1*(qx1*qx1+qy1*qy1-s1.circle.radius*s1.circle.radius));A1=1/(2*A1);var t12=(-B1-D1)*A1;var cx5=0;var cy5=0;var T5=t12<nape_Config.epsilon?(-B1+D1)*A1:t12;cx5=u10.x+(v17.x-u10.x)*T5;cy5=u10.y+(v17.y-u10.y)*T5;var dx7=0;var dy7=0;dx7=fst_vert1.x-cx5;dy7=fst_vert1.y-cy5;if(dx7*dx7+dy7*dy7<nape_Config.epsilon){state=0;cx_ite12=beg_ite2;break}var ret5;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret5=new zpp_$nape_geom_ZPP_$Vec2}else{ret5=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret5.next;ret5.next=null}ret5.weak=false;ret5._immutable=false;ret5.x=cx5;ret5.y=cy5;var cp=ret5;zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt);zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp);zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp);state=1;cx_ite12=beg_ite2;break}else{var t0=0;var t13=0;var vx2=0;var vy2=0;vx2=v17.x-u10.x;vy2=v17.y-u10.y;var qx2=0;var qy2=0;qx2=u10.x-s1.circle.worldCOMx;qy2=u10.y-s1.circle.worldCOMy;var A2=vx2*vx2+vy2*vy2;var B2=2*(qx2*vx2+qy2*vy2);var D2=B2*B2-4*A2*(qx2*qx2+qy2*qy2-s1.circle.radius*s1.circle.radius);var two;if(D2*D2<nape_Config.epsilon){if(D2<0){t0=10}else{t13=-B2/(2*A2);t0=t13}two=false}else{D2=Math.sqrt(D2);A2=1/(2*A2);t0=(-B2-D2)*A2;t13=(-B2+D2)*A2;two=true}if(t0<1-nape_Config.epsilon&&t13>nape_Config.epsilon){var cx6=0;var cy6=0;var T6=t0;cx6=u10.x+(v17.x-u10.x)*T6;cy6=u10.y+(v17.y-u10.y)*T6;var tmp13;if(fst_vert1!=null){var dx8=0;var dy8=0;dx8=fst_vert1.x-cx6;dy8=fst_vert1.y-cy6;tmp13=dx8*dx8+dy8*dy8<nape_Config.epsilon}else{tmp13=false}if(tmp13){state=0;cx_ite12=beg_ite2;break}var ret6;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret6=new zpp_$nape_geom_ZPP_$Vec2}else{ret6=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret6.next;ret6.next=null}ret6.weak=false;ret6._immutable=false;ret6.x=cx6;ret6.y=cy6;var cp1=ret6;if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head!=null){zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt);zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp1)}zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp1);if(fst_vert1==null){fst_vert1=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}if(two){var cx7=0;var cy7=0;var T7=t13;cx7=u10.x+(v17.x-u10.x)*T7;cy7=u10.y+(v17.y-u10.y)*T7;var ret7;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret7=new zpp_$nape_geom_ZPP_$Vec2}else{ret7=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret7.next;ret7.next=null}ret7.weak=false;ret7._immutable=false;ret7.x=cx7;ret7.y=cy7;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ret7)}}}}u10=v17;vi1=cx_ite12;vind=vind2;cx_ite12=cx_ite12.next;if(cx_ite12==null){cx_ite12=s2.polygon.gverts.next}break}while(cx_ite12!=beg_ite2){var v18=cx_ite12;var vind21=vind+1;if(vind21==s2.polygon.edgeCnt){vind21=0}if(inte[vind]){if(ins[vind21]){var vx3=0;var vy3=0;vx3=v18.x-u10.x;vy3=v18.y-u10.y;var qx3=0;var qy3=0;qx3=u10.x-s1.circle.worldCOMx;qy3=u10.y-s1.circle.worldCOMy;var A3=vx3*vx3+vy3*vy3;var B3=2*(qx3*vx3+qy3*vy3);var D3=Math.sqrt(B3*B3-4*A3*(qx3*qx3+qy3*qy3-s1.circle.radius*s1.circle.radius));A3=1/(2*A3);var t14=(-B3-D3)*A3;var cx8=0;var cy8=0;var T8=t14<nape_Config.epsilon?(-B3+D3)*A3:t14;cx8=u10.x+(v18.x-u10.x)*T8;cy8=u10.y+(v18.y-u10.y)*T8;var dx9=0;var dy9=0;dx9=fst_vert1.x-cx8;dy9=fst_vert1.y-cy8;if(dx9*dx9+dy9*dy9<nape_Config.epsilon){state=0;break}var ret8;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret8=new zpp_$nape_geom_ZPP_$Vec2}else{ret8=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret8.next;ret8.next=null}ret8.weak=false;ret8._immutable=false;ret8.x=cx8;ret8.y=cy8;var cp2=ret8;zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt);zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp2);zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp2);state=1;break}else{var t01=0;var t15=0;var vx4=0;var vy4=0;vx4=v18.x-u10.x;vy4=v18.y-u10.y;var qx4=0;var qy4=0;qx4=u10.x-s1.circle.worldCOMx;qy4=u10.y-s1.circle.worldCOMy;var A4=vx4*vx4+vy4*vy4;var B4=2*(qx4*vx4+qy4*vy4);var D4=B4*B4-4*A4*(qx4*qx4+qy4*qy4-s1.circle.radius*s1.circle.radius);var two1;if(D4*D4<nape_Config.epsilon){if(D4<0){t01=10}else{t15=-B4/(2*A4);t01=t15}two1=false}else{D4=Math.sqrt(D4);A4=1/(2*A4);t01=(-B4-D4)*A4;t15=(-B4+D4)*A4;two1=true}if(t01<1-nape_Config.epsilon&&t15>nape_Config.epsilon){var cx9=0;var cy9=0;var T9=t01;cx9=u10.x+(v18.x-u10.x)*T9;cy9=u10.y+(v18.y-u10.y)*T9;var tmp14;if(fst_vert1!=null){var dx10=0;var dy10=0;dx10=fst_vert1.x-cx9;dy10=fst_vert1.y-cy9;tmp14=dx10*dx10+dy10*dy10<nape_Config.epsilon}else{tmp14=false}if(tmp14){state=0;break}var ret9;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret9=new zpp_$nape_geom_ZPP_$Vec2}else{ret9=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret9.next;ret9.next=null}ret9.weak=false;ret9._immutable=false;ret9.x=cx9;ret9.y=cy9;var cp3=ret9;if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head!=null){zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt);zpp_$nape_geom_ZPP_$Collide.flowsegs.add(cp3)}zpp_$nape_geom_ZPP_$Collide.flowpoly.add(cp3);if(fst_vert1==null){fst_vert1=zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt}if(two1){var cx10=0;var cy10=0;var T10=t15;cx10=u10.x+(v18.x-u10.x)*T10;cy10=u10.y+(v18.y-u10.y)*T10;var ret10;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret10=new zpp_$nape_geom_ZPP_$Vec2}else{ret10=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret10.next;ret10.next=null}ret10.weak=false;ret10._immutable=false;ret10.x=cx10;ret10.y=cy10;zpp_$nape_geom_ZPP_$Collide.flowpoly.add(ret10)}}}}u10=v18;vi1=cx_ite12;vind=vind21;cx_ite12=cx_ite12.next;if(cx_ite12==null){cx_ite12=s2.polygon.gverts.next}}}if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head==null){return false}else if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next==null){var all=true;var cx_ite13=s2.polygon.edges.head;while(cx_ite13!=null){var e=cx_ite13.elt;if(e.gnormx*s1.circle.worldCOMx+e.gnormy*s1.circle.worldCOMy>e.gprojection){all=false;break}cx_ite13=cx_ite13.next}if(all){arb.overlap=s1.circle.area;arb.centroidx=s1.circle.worldCOMx;arb.centroidy=s1.circle.worldCOMy;return true}else{return false}}else{var COMx1=0;var COMy1=0;var area4=0;if(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.next!=null){var parea=0;var pCOMx=0;var pCOMy=0;pCOMx=0;pCOMy=0;parea=0;var cx_ite14=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;var u11=cx_ite14.elt;cx_ite14=cx_ite14.next;var v19=cx_ite14.elt;cx_ite14=cx_ite14.next;while(cx_ite14!=null){var w12=cx_ite14.elt;parea+=v19.x*(w12.y-u11.y);var cf12=w12.y*v19.x-w12.x*v19.y;pCOMx+=(v19.x+w12.x)*cf12;pCOMy+=(v19.y+w12.y)*cf12;u11=v19;v19=w12;cx_ite14=cx_ite14.next}cx_ite14=zpp_$nape_geom_ZPP_$Collide.flowpoly.head;var w13=cx_ite14.elt;parea+=v19.x*(w13.y-u11.y);var cf13=w13.y*v19.x-w13.x*v19.y;pCOMx+=(v19.x+w13.x)*cf13;pCOMy+=(v19.y+w13.y)*cf13;u11=v19;cx_ite14=cx_ite14.next;var w14=cx_ite14.elt;parea+=w13.x*(w14.y-u11.y);var cf14=w14.y*w13.x-w14.x*w13.y;pCOMx+=(w13.x+w14.x)*cf14;pCOMy+=(w13.y+w14.y)*cf14;parea*=.5;var ia1=1/(6*parea);pCOMx*=ia1;pCOMy*=ia1;var t16=-parea;COMx1+=pCOMx*t16;COMy1+=pCOMy*t16;area4=0-parea}else{zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.elt);zpp_$nape_geom_ZPP_$Collide.flowsegs.add(zpp_$nape_geom_ZPP_$Collide.flowpoly.head.next.elt)}while(zpp_$nape_geom_ZPP_$Collide.flowsegs.head!=null){var u12=zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe();var v20=zpp_$nape_geom_ZPP_$Collide.flowsegs.pop_unsafe();var dx11=0;var dy11=0;dx11=v20.x-u12.x;dy11=v20.y-u12.y;var nx=0;var ny=0;nx=dx11;ny=dy11;var imag=1/Math.sqrt(nx*nx+ny*ny);nx*=imag;ny*=imag;var t17=nx;nx=-ny;ny=t17;var cx11=0;var cy11=0;cx11=u12.x+v20.x;cy11=u12.y+v20.y;cx11*=.5;cy11*=.5;cx11-=s1.circle.worldCOMx;cy11-=s1.circle.worldCOMy;var xd=nx*cx11+ny*cy11;var carea=0;var ccom=0;var cos=xd/s1.circle.radius;var sin=Math.sqrt(1-cos*cos);var theta=Math.acos(cos);carea=s1.circle.radius*(s1.circle.radius*theta-xd*sin);ccom=.6666666666666666*s1.circle.radius*sin*sin*sin/(theta-cos*sin);cx11=s1.circle.worldCOMx;cy11=s1.circle.worldCOMy;var t18=ccom;cx11+=nx*t18;cy11+=ny*t18;var t19=carea;COMx1+=cx11*t19;COMy1+=cy11*t19;area4+=carea}var t20=1/area4;COMx1*=t20;COMy1*=t20;arb.overlap=area4;arb.centroidx=COMx1;arb.centroidy=COMy1;return true}}}else{return false}}}else{return false}}}else{var c1=s1.circle;var c2=s2.circle;var deltax=0;var deltay=0;deltax=c2.worldCOMx-c1.worldCOMx;deltay=c2.worldCOMy-c1.worldCOMy;var cr=c1.radius+c2.radius;var ds=deltax*deltax+deltay*deltay;if(ds>cr*cr){return false}else if(ds<nape_Config.epsilon*nape_Config.epsilon){if(c1.radius<c2.radius){arb.overlap=c1.area;arb.centroidx=c1.worldCOMx;arb.centroidy=c1.worldCOMy}else{arb.overlap=c2.area;arb.centroidx=c2.worldCOMx;arb.centroidy=c2.worldCOMy}return true}else{var d=Math.sqrt(ds);var id=1/d;var x1=.5*(d-(c2.radius*c2.radius-c1.radius*c1.radius)*id);if(x1<=-c1.radius){arb.overlap=c1.area;arb.centroidx=c1.worldCOMx;arb.centroidy=c1.worldCOMy}else{var x2=d-x1;if(x2<=-c2.radius){arb.overlap=c2.area;arb.centroidx=c2.worldCOMx;arb.centroidy=c2.worldCOMy}else{var area11=0;var y1=0;var area21=0;var y2=0;var cos1=x1/c1.radius;var sin1=Math.sqrt(1-cos1*cos1);var theta1=Math.acos(cos1);area11=c1.radius*(c1.radius*theta1-x1*sin1);y1=.6666666666666666*c1.radius*sin1*sin1*sin1/(theta1-cos1*sin1);var cos2=x2/c2.radius;var sin2=Math.sqrt(1-cos2*cos2);var theta2=Math.acos(cos2);area21=c2.radius*(c2.radius*theta2-x2*sin2);y2=.6666666666666666*c2.radius*sin2*sin2*sin2/(theta2-cos2*sin2);var tarea=area11+area21;var ya=(y1*area11+(d-y2)*area21)/tarea*id;arb.overlap=tarea;arb.centroidx=c1.worldCOMx+deltax*ya;arb.centroidy=c1.worldCOMy+deltay*ya}}return true}}};var zpp_$nape_geom_ZPP_$ConvexRayResult=function(){this.toiDistance=0;this.inner=false;this.shape=null};$hxClasses["zpp_nape.geom.ZPP_ConvexRayResult"]=zpp_$nape_geom_ZPP_$ConvexRayResult;zpp_$nape_geom_ZPP_$ConvexRayResult.__name__="zpp_nape.geom.ZPP_ConvexRayResult";zpp_$nape_geom_ZPP_$ConvexRayResult.prototype={shape:null,inner:null,toiDistance:null,__class__:zpp_$nape_geom_ZPP_$ConvexRayResult};var zpp_$nape_geom_ZPP_$GeomVert=function(){this.forced=false;this.next=null;this.prev=null;this.y=0;this.x=0};$hxClasses["zpp_nape.geom.ZPP_GeomVert"]=zpp_$nape_geom_ZPP_$GeomVert;zpp_$nape_geom_ZPP_$GeomVert.__name__="zpp_nape.geom.ZPP_GeomVert";zpp_$nape_geom_ZPP_$GeomVert.prototype={x:null,y:null,prev:null,next:null,forced:null,__class__:zpp_$nape_geom_ZPP_$GeomVert};var zpp_$nape_geom_ZPP_$GeomPoly=function(outer){this.vertices=null;this.outer=null;this.outer=outer};$hxClasses["zpp_nape.geom.ZPP_GeomPoly"]=zpp_$nape_geom_ZPP_$GeomPoly;zpp_$nape_geom_ZPP_$GeomPoly.__name__="zpp_nape.geom.ZPP_GeomPoly";zpp_$nape_geom_ZPP_$GeomPoly.prototype={outer:null,vertices:null,__class__:zpp_$nape_geom_ZPP_$GeomPoly};var zpp_$nape_geom_ZPP_$Mat23=function(){this.next=null;this._invalidate=null;this.ty=0;this.tx=0;this.d=0;this.c=0;this.b=0;this.a=0;this.outer=null};$hxClasses["zpp_nape.geom.ZPP_Mat23"]=zpp_$nape_geom_ZPP_$Mat23;zpp_$nape_geom_ZPP_$Mat23.__name__="zpp_nape.geom.ZPP_Mat23";zpp_$nape_geom_ZPP_$Mat23.get=function(){var ret;if(zpp_$nape_geom_ZPP_$Mat23.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Mat23}else{ret=zpp_$nape_geom_ZPP_$Mat23.zpp_pool;zpp_$nape_geom_ZPP_$Mat23.zpp_pool=ret.next;ret.next=null}return ret};zpp_$nape_geom_ZPP_$Mat23.prototype={outer:null,a:null,b:null,c:null,d:null,tx:null,ty:null,_invalidate:null,next:null,__class__:zpp_$nape_geom_ZPP_$Mat23};var zpp_$nape_geom_ZPP_$MatMN=function(m,n){this.x=null;this.n=0;this.m=0;this.outer=null;this.m=m;this.n=n;this.x=[];var _g=0;var _g1=m*n;while(_g<_g1){++_g;this.x.push(0)}};$hxClasses["zpp_nape.geom.ZPP_MatMN"]=zpp_$nape_geom_ZPP_$MatMN;zpp_$nape_geom_ZPP_$MatMN.__name__="zpp_nape.geom.ZPP_MatMN";zpp_$nape_geom_ZPP_$MatMN.prototype={outer:null,m:null,n:null,x:null,__class__:zpp_$nape_geom_ZPP_$MatMN};var zpp_$nape_geom_ZPP_$ToiEvent=function(){this.kinematic=false;this.failed=false;this.slipped=false;this.axis=null;this.c2=null;this.c1=null;this.frozen2=false;this.frozen1=false;this.arbiter=null;this.s2=null;this.s1=null;this.toi=0;this.next=null;this.c1=new zpp_$nape_geom_ZPP_$Vec2;this.c2=new zpp_$nape_geom_ZPP_$Vec2;this.axis=new zpp_$nape_geom_ZPP_$Vec2};$hxClasses["zpp_nape.geom.ZPP_ToiEvent"]=zpp_$nape_geom_ZPP_$ToiEvent;zpp_$nape_geom_ZPP_$ToiEvent.__name__="zpp_nape.geom.ZPP_ToiEvent";zpp_$nape_geom_ZPP_$ToiEvent.prototype={next:null,toi:null,s1:null,s2:null,arbiter:null,frozen1:null,frozen2:null,c1:null,c2:null,axis:null,slipped:null,failed:null,kinematic:null,__class__:zpp_$nape_geom_ZPP_$ToiEvent};var zpp_$nape_geom_ZPP_$SweepDistance=function(){};$hxClasses["zpp_nape.geom.ZPP_SweepDistance"]=zpp_$nape_geom_ZPP_$SweepDistance;zpp_$nape_geom_ZPP_$SweepDistance.__name__="zpp_nape.geom.ZPP_SweepDistance";zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep=function(toi,timeStep,lowerBound,negRadius,userAPI){if(userAPI==null){userAPI=false}var s1=toi.s1;var s2=toi.s2;var b1=s1.body;var b2=s2.body;var deltax=0;var deltay=0;deltax=b2.velx-b1.velx;deltay=b2.vely-b1.vely;var ang1=b1.angvel;if(ang1<0){ang1=-ang1}var ang2=b2.angvel;if(ang2<0){ang2=-ang2}var angBias=s1.sweepCoef*ang1+s2.sweepCoef*ang2;if(!userAPI&&!toi.kinematic&&deltax*deltax+deltay*deltay<nape_Config.dynamicSweepLinearThreshold*nape_Config.dynamicSweepLinearThreshold&&angBias<nape_Config.dynamicSweepAngularThreshold){toi.toi=-1;toi.failed=true;return}var c1=toi.c1;var c2=toi.c2;var axis=toi.axis;var curTOI=lowerBound;var curIter=0;while(true){var dt=curTOI*timeStep;var delta=dt-b1.sweepTime;if(delta!=0){b1.sweepTime=dt;b1.posx+=b1.velx*delta;b1.posy+=b1.vely*delta;if(b1.angvel!=0){var dr=b1.sweep_angvel*delta;b1.rot+=dr;if(dr*dr>1e-4){b1.axisx=Math.sin(b1.rot);b1.axisy=Math.cos(b1.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*b1.axisx+dr*b1.axisy)*m;b1.axisy=(p*b1.axisy-dr*b1.axisx)*m;b1.axisx=nx}}}if(s1.type==0){s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy);s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy)}else{var p1=s1.polygon;var li=p1.lverts.next;var cx_ite=p1.gverts.next;while(cx_ite!=null){var g=cx_ite;var l=li;li=li.next;g.x=b1.posx+(b1.axisy*l.x-b1.axisx*l.y);g.y=b1.posy+(l.x*b1.axisx+l.y*b1.axisy);cx_ite=cx_ite.next}var ite=p1.edges.head;var cx_ite1=p1.gverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var v=cx_ite1;var e=ite.elt;ite=ite.next;e.gnormx=b1.axisy*e.lnormx-b1.axisx*e.lnormy;e.gnormy=e.lnormx*b1.axisx+e.lnormy*b1.axisy;e.gprojection=b1.posx*e.gnormx+b1.posy*e.gnormy+e.lprojection;e.tp0=u.y*e.gnormx-u.x*e.gnormy;e.tp1=v.y*e.gnormx-v.x*e.gnormy;u=v;cx_ite1=cx_ite1.next}var v1=p1.gverts.next;var e1=ite.elt;e1.gnormx=b1.axisy*e1.lnormx-b1.axisx*e1.lnormy;e1.gnormy=e1.lnormx*b1.axisx+e1.lnormy*b1.axisy;e1.gprojection=b1.posx*e1.gnormx+b1.posy*e1.gnormy+e1.lprojection;e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy;e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}var dt1=curTOI*timeStep;var delta1=dt1-b2.sweepTime;if(delta1!=0){b2.sweepTime=dt1;b2.posx+=b2.velx*delta1;b2.posy+=b2.vely*delta1;if(b2.angvel!=0){var dr1=b2.sweep_angvel*delta1;b2.rot+=dr1;if(dr1*dr1>1e-4){b2.axisx=Math.sin(b2.rot);b2.axisy=Math.cos(b2.rot)}else{var d21=dr1*dr1;var p2=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p2*b2.axisx+dr1*b2.axisy)*m1;b2.axisy=(p2*b2.axisy-dr1*b2.axisx)*m1;b2.axisx=nx1}}}if(s2.type==0){s2.worldCOMx=b2.posx+(b2.axisy*s2.localCOMx-b2.axisx*s2.localCOMy);s2.worldCOMy=b2.posy+(s2.localCOMx*b2.axisx+s2.localCOMy*b2.axisy)}else{var p3=s2.polygon;var li1=p3.lverts.next;var cx_ite2=p3.gverts.next;while(cx_ite2!=null){var g1=cx_ite2;var l1=li1;li1=li1.next;g1.x=b2.posx+(b2.axisy*l1.x-b2.axisx*l1.y);g1.y=b2.posy+(l1.x*b2.axisx+l1.y*b2.axisy);cx_ite2=cx_ite2.next}var ite1=p3.edges.head;var cx_ite3=p3.gverts.next;var u1=cx_ite3;cx_ite3=cx_ite3.next;while(cx_ite3!=null){var v2=cx_ite3;var e2=ite1.elt;ite1=ite1.next;e2.gnormx=b2.axisy*e2.lnormx-b2.axisx*e2.lnormy;e2.gnormy=e2.lnormx*b2.axisx+e2.lnormy*b2.axisy;e2.gprojection=b2.posx*e2.gnormx+b2.posy*e2.gnormy+e2.lprojection;e2.tp0=u1.y*e2.gnormx-u1.x*e2.gnormy;e2.tp1=v2.y*e2.gnormx-v2.x*e2.gnormy;u1=v2;cx_ite3=cx_ite3.next}var v3=p3.gverts.next;var e3=ite1.elt;e3.gnormx=b2.axisy*e3.lnormx-b2.axisx*e3.lnormy;e3.gnormy=e3.lnormx*b2.axisx+e3.lnormy*b2.axisy;e3.gprojection=b2.posx*e3.gnormx+b2.posy*e3.gnormy+e3.lprojection;e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy;e3.tp1=v3.y*e3.gnormx-v3.x*e3.gnormy}var s11=s1;var s21=s2;var w1=c1;var w2=c2;var sep;if(s1.type==0&&s2.type==0){var c11=s1.circle;var c21=s2.circle;var dist;var nx2=0;var ny=0;nx2=c21.worldCOMx-c11.worldCOMx;ny=c21.worldCOMy-c11.worldCOMy;var len=Math.sqrt(nx2*nx2+ny*ny);dist=len-(c11.radius+c21.radius);if(dist<1e100){if(len==0){nx2=1;ny=0}else{var t=1/len;nx2*=t;ny*=t}var t1=c11.radius;c1.x=c11.worldCOMx+nx2*t1;c1.y=c11.worldCOMy+ny*t1;var t2=-c21.radius;c2.x=c21.worldCOMx+nx2*t2;c2.y=c21.worldCOMy+ny*t2;axis.x=nx2;axis.y=ny}sep=dist}else{var swapped=false;if(s1.type==0&&s2.type==1){s11=s2;s21=s1;w1=c2;w2=c1;swapped=true}if(s11.type==1&&s21.type==0){var circle=s21.circle;var best=-1e100;var a0=null;var cx_ite4=s11.polygon.edges.head;while(cx_ite4!=null){var a=cx_ite4.elt;var dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>1e100){best=dist1;break}if(dist1>0){if(dist1>best){best=dist1;a0=a}}else if(best<0&&dist1>best){best=dist1;a0=a}cx_ite4=cx_ite4.next}if(best<1e100){var v0=a0.gp0;var v11=a0.gp1;var dt2=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt2<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx3=0;var ny1=0;nx3=circle.worldCOMx-v0.x;ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx3*nx3+ny1*ny1);best=len1-circle.radius;if(best<1e100){if(len1==0){nx3=1;ny1=0}else{var t3=1/len1;nx3*=t3;ny1*=t3}w1.x=v0.x+nx3*0;w1.y=v0.y+ny1*0;var t4=-circle.radius;w2.x=circle.worldCOMx+nx3*t4;w2.y=circle.worldCOMy+ny1*t4;axis.x=nx3;axis.y=ny1}}else if(dt2>=v11.y*a0.gnormx-v11.x*a0.gnormy){var nx4=0;var ny2=0;nx4=circle.worldCOMx-v11.x;ny2=circle.worldCOMy-v11.y;var len2=Math.sqrt(nx4*nx4+ny2*ny2);best=len2-circle.radius;if(best<1e100){if(len2==0){nx4=1;ny2=0}else{var t5=1/len2;nx4*=t5;ny2*=t5}w1.x=v11.x+nx4*0;w1.y=v11.y+ny2*0;var t6=-circle.radius;w2.x=circle.worldCOMx+nx4*t6;w2.y=circle.worldCOMy+ny2*t6;axis.x=nx4;axis.y=ny2}}else{var t7=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t7;w2.y=circle.worldCOMy+a0.gnormy*t7;var t8=-best;w1.x=w2.x+a0.gnormx*t8;w1.y=w2.y+a0.gnormy*t8;axis.x=a0.gnormx;axis.y=a0.gnormy}}if(swapped){axis.x=-axis.x;axis.y=-axis.y}sep=best}else{var p11=s11.polygon;var p21=s21.polygon;var best1=-1e100;var a1=null;var a2=null;var besti=0;var cx_ite5=p11.edges.head;while(cx_ite5!=null){var a3=cx_ite5.elt;var min=1e100;var cx_ite6=p21.gverts.next;while(cx_ite6!=null){var v4=cx_ite6;var k=a3.gnormx*v4.x+a3.gnormy*v4.y;if(k<min){min=k}cx_ite6=cx_ite6.next}min-=a3.gprojection;if(min>1e100){best1=min;break}if(min>0){if(min>best1){best1=min;a1=a3;besti=1}}else if(best1<0&&min>best1){best1=min;a1=a3;besti=1}cx_ite5=cx_ite5.next}if(best1<1e100){var cx_ite7=p21.edges.head;while(cx_ite7!=null){var a4=cx_ite7.elt;var min1=1e100;var cx_ite8=p11.gverts.next;while(cx_ite8!=null){var v5=cx_ite8;var k1=a4.gnormx*v5.x+a4.gnormy*v5.y;if(k1<min1){min1=k1}cx_ite8=cx_ite8.next}min1-=a4.gprojection;if(min1>1e100){best1=min1;break}if(min1>0){if(min1>best1){best1=min1;a2=a4;besti=2}}else if(best1<0&&min1>best1){best1=min1;a2=a4;besti=2}cx_ite7=cx_ite7.next}if(best1<1e100){var q2;var ax;if(besti==1){q2=p21;ax=a1}else{q2=p11;ax=a2;var tmp=w1;w1=w2;w2=tmp;swapped=!swapped}var ay=null;var min2=1e100;var cx_ite9=q2.edges.head;while(cx_ite9!=null){var a5=cx_ite9.elt;var k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;if(k2<min2){min2=k2;ay=a5}cx_ite9=cx_ite9.next}if(swapped){axis.x=-ax.gnormx;axis.y=-ax.gnormy}else{axis.x=ax.gnormx;axis.y=ax.gnormy}if(best1>=0){var v01=ax.gp0;var v12=ax.gp1;var q0=ay.gp0;var q1=ay.gp1;var vx=0;var vy=0;var qx=0;var qy=0;vx=v12.x-v01.x;vy=v12.y-v01.y;qx=q1.x-q0.x;qy=q1.y-q0.y;var vdot=1/(vx*vx+vy*vy);var qdot=1/(qx*qx+qy*qy);var t11=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot;var t21=-(vx*(v01.x-q1.x)+vy*(v01.y-q1.y))*vdot;var s12=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot;var s22=-(qx*(q0.x-v12.x)+qy*(q0.y-v12.y))*qdot;if(t11<0){t11=0}else if(t11>1){t11=1}if(t21<0){t21=0}else if(t21>1){t21=1}if(s12<0){s12=0}else if(s12>1){s12=1}if(s22<0){s22=0}else if(s22>1){s22=1}var f1x=0;var f1y=0;var t9=t11;f1x=v01.x+vx*t9;f1y=v01.y+vy*t9;var f2x=0;var f2y=0;var t10=t21;f2x=v01.x+vx*t10;f2y=v01.y+vy*t10;var g1x=0;var g1y=0;var t12=s12;g1x=q0.x+qx*t12;g1y=q0.y+qy*t12;var g2x=0;var g2y=0;var t13=s22;g2x=q0.x+qx*t13;g2y=q0.y+qy*t13;var dx=0;var dy=0;dx=f1x-q0.x;dy=f1y-q0.y;var d1=dx*dx+dy*dy;var dx1=0;var dy1=0;dx1=f2x-q1.x;dy1=f2y-q1.y;var d22=dx1*dx1+dy1*dy1;var dx2=0;var dy2=0;dx2=g1x-v01.x;dy2=g1y-v01.y;var e11=dx2*dx2+dy2*dy2;var dx3=0;var dy3=0;dx3=g2x-v12.x;dy3=g2y-v12.y;var e21=dx3*dx3+dy3*dy3;var minfx=0;var minfy=0;var minq=null;if(d1<d22){minfx=f1x;minfy=f1y;minq=q0}else{minfx=f2x;minfy=f2y;minq=q1;d1=d22}var mingx=0;var mingy=0;var minv=null;if(e11<e21){mingx=g1x;mingy=g1y;minv=v01}else{mingx=g2x;mingy=g2y;minv=v12;e11=e21}if(d1<e11){w1.x=minfx;w1.y=minfy;w2.x=minq.x;w2.y=minq.y;best1=Math.sqrt(d1)}else{w2.x=mingx;w2.y=mingy;w1.x=minv.x;w1.y=minv.y;best1=Math.sqrt(e11)}if(best1!=0){axis.x=w2.x-w1.x;axis.y=w2.y-w1.y;var t14=1/best1;axis.x*=t14;axis.y*=t14;if(swapped){axis.x=-axis.x;axis.y=-axis.y}}sep=best1}else{var c0x=0;var c0y=0;c0x=ay.gp0.x;c0y=ay.gp0.y;var c1x=0;var c1y=0;c1x=ay.gp1.x;c1y=ay.gp1.y;var dvx=0;var dvy=0;dvx=c1x-c0x;dvy=c1y-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y;var d11=ax.gnormy*c1x-ax.gnormx*c1y;var den=1/(d11-d0);var t15=(-ax.tp1-d0)*den;if(t15>nape_Config.epsilon){c0x+=dvx*t15;c0y+=dvy*t15}var t16=(-ax.tp0-d11)*den;if(t16<-nape_Config.epsilon){c1x+=dvx*t16;c1y+=dvy*t16}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection;var c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x;w2.y=c0y;var t17=-c0d;w1.x=w2.x+ax.gnormx*t17;w1.y=w2.y+ax.gnormy*t17;sep=c0d}else{w2.x=c1x;w2.y=c1y;var t18=-c1d;w1.x=w2.x+ax.gnormx*t18;w1.y=w2.y+ax.gnormy*t18;sep=c1d}}}else{sep=1e100}}else{sep=1e100}}}var sep1=sep+negRadius;var dot=deltax*axis.x+deltay*axis.y;if(sep1<nape_Config.distanceThresholdCCD){if(userAPI){break}var d1x=0;var d1y=0;d1x=c1.x-b1.posx;d1y=c1.y-b1.posy;var d2x=0;var d2y=0;d2x=c2.x-b2.posx;d2y=c2.y-b2.posy;var proj=dot-b1.sweep_angvel*(axis.y*d1x-axis.x*d1y)+b2.sweep_angvel*(axis.y*d2x-axis.x*d2y);if(proj>0){toi.slipped=true}if(proj<=0||sep1<nape_Config.distanceThresholdCCD*.5){break}}var denom=(angBias-dot)*timeStep;if(denom<=0){curTOI=-1;break}var delta2=sep1/denom;if(delta2<1e-6){delta2=1e-6}curTOI+=delta2;if(curTOI>=1){curTOI=1;var dt3=curTOI*timeStep;var delta3=dt3-b1.sweepTime;if(delta3!=0){b1.sweepTime=dt3;b1.posx+=b1.velx*delta3;b1.posy+=b1.vely*delta3;if(b1.angvel!=0){var dr2=b1.sweep_angvel*delta3;b1.rot+=dr2;if(dr2*dr2>1e-4){b1.axisx=Math.sin(b1.rot);b1.axisy=Math.cos(b1.rot)}else{var d23=dr2*dr2;var p4=1-.5*d23;var m2=1-d23*d23/8;var nx5=(p4*b1.axisx+dr2*b1.axisy)*m2;b1.axisy=(p4*b1.axisy-dr2*b1.axisx)*m2;b1.axisx=nx5}}}if(s1.type==0){s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy);s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy)}else{var p5=s1.polygon;var li2=p5.lverts.next;var cx_ite10=p5.gverts.next;while(cx_ite10!=null){var g2=cx_ite10;var l2=li2;li2=li2.next;g2.x=b1.posx+(b1.axisy*l2.x-b1.axisx*l2.y);g2.y=b1.posy+(l2.x*b1.axisx+l2.y*b1.axisy);cx_ite10=cx_ite10.next}var ite2=p5.edges.head;var cx_ite11=p5.gverts.next;var u2=cx_ite11;cx_ite11=cx_ite11.next;while(cx_ite11!=null){var v6=cx_ite11;var e4=ite2.elt;ite2=ite2.next;e4.gnormx=b1.axisy*e4.lnormx-b1.axisx*e4.lnormy;e4.gnormy=e4.lnormx*b1.axisx+e4.lnormy*b1.axisy;e4.gprojection=b1.posx*e4.gnormx+b1.posy*e4.gnormy+e4.lprojection;e4.tp0=u2.y*e4.gnormx-u2.x*e4.gnormy;e4.tp1=v6.y*e4.gnormx-v6.x*e4.gnormy;u2=v6;cx_ite11=cx_ite11.next}var v7=p5.gverts.next;var e5=ite2.elt;e5.gnormx=b1.axisy*e5.lnormx-b1.axisx*e5.lnormy;e5.gnormy=e5.lnormx*b1.axisx+e5.lnormy*b1.axisy;e5.gprojection=b1.posx*e5.gnormx+b1.posy*e5.gnormy+e5.lprojection;e5.tp0=u2.y*e5.gnormx-u2.x*e5.gnormy;e5.tp1=v7.y*e5.gnormx-v7.x*e5.gnormy}var dt4=curTOI*timeStep;var delta4=dt4-b2.sweepTime;if(delta4!=0){b2.sweepTime=dt4;b2.posx+=b2.velx*delta4;b2.posy+=b2.vely*delta4;if(b2.angvel!=0){var dr3=b2.sweep_angvel*delta4;b2.rot+=dr3;if(dr3*dr3>1e-4){b2.axisx=Math.sin(b2.rot);b2.axisy=Math.cos(b2.rot)}else{var d24=dr3*dr3;var p6=1-.5*d24;var m3=1-d24*d24/8;var nx6=(p6*b2.axisx+dr3*b2.axisy)*m3;b2.axisy=(p6*b2.axisy-dr3*b2.axisx)*m3;b2.axisx=nx6}}}if(s2.type==0){s2.worldCOMx=b2.posx+(b2.axisy*s2.localCOMx-b2.axisx*s2.localCOMy);s2.worldCOMy=b2.posy+(s2.localCOMx*b2.axisx+s2.localCOMy*b2.axisy)}else{var p7=s2.polygon;var li3=p7.lverts.next;var cx_ite12=p7.gverts.next;while(cx_ite12!=null){var g3=cx_ite12;var l3=li3;li3=li3.next;g3.x=b2.posx+(b2.axisy*l3.x-b2.axisx*l3.y);g3.y=b2.posy+(l3.x*b2.axisx+l3.y*b2.axisy);cx_ite12=cx_ite12.next}var ite3=p7.edges.head;var cx_ite13=p7.gverts.next;var u3=cx_ite13;cx_ite13=cx_ite13.next;while(cx_ite13!=null){var v8=cx_ite13;var e6=ite3.elt;ite3=ite3.next;e6.gnormx=b2.axisy*e6.lnormx-b2.axisx*e6.lnormy;e6.gnormy=e6.lnormx*b2.axisx+e6.lnormy*b2.axisy;e6.gprojection=b2.posx*e6.gnormx+b2.posy*e6.gnormy+e6.lprojection;e6.tp0=u3.y*e6.gnormx-u3.x*e6.gnormy;e6.tp1=v8.y*e6.gnormx-v8.x*e6.gnormy;u3=v8;cx_ite13=cx_ite13.next}var v9=p7.gverts.next;var e7=ite3.elt;e7.gnormx=b2.axisy*e7.lnormx-b2.axisx*e7.lnormy;e7.gnormy=e7.lnormx*b2.axisx+e7.lnormy*b2.axisy;e7.gprojection=b2.posx*e7.gnormx+b2.posy*e7.gnormy+e7.lprojection;e7.tp0=u3.y*e7.gnormx-u3.x*e7.gnormy;e7.tp1=v9.y*e7.gnormx-v9.x*e7.gnormy}var s13=s1;var s23=s2;var w11=c1;var w21=c2;var sep2;if(s1.type==0&&s2.type==0){var c12=s1.circle;var c22=s2.circle;var dist2;var nx7=0;var ny3=0;nx7=c22.worldCOMx-c12.worldCOMx;ny3=c22.worldCOMy-c12.worldCOMy;var len3=Math.sqrt(nx7*nx7+ny3*ny3);dist2=len3-(c12.radius+c22.radius);if(dist2<1e100){if(len3==0){nx7=1;ny3=0}else{var t19=1/len3;nx7*=t19;ny3*=t19}var t20=c12.radius;c1.x=c12.worldCOMx+nx7*t20;c1.y=c12.worldCOMy+ny3*t20;var t22=-c22.radius;c2.x=c22.worldCOMx+nx7*t22;c2.y=c22.worldCOMy+ny3*t22;axis.x=nx7;axis.y=ny3}sep2=dist2}else{var swapped1=false;if(s1.type==0&&s2.type==1){s13=s2;s23=s1;w11=c2;w21=c1;swapped1=true}if(s13.type==1&&s23.type==0){var circle1=s23.circle;var best2=-1e100;var a01=null;var cx_ite14=s13.polygon.edges.head;while(cx_ite14!=null){var a6=cx_ite14.elt;var dist3=a6.gnormx*circle1.worldCOMx+a6.gnormy*circle1.worldCOMy-a6.gprojection-circle1.radius;if(dist3>1e100){best2=dist3;break}if(dist3>0){if(dist3>best2){best2=dist3;a01=a6}}else if(best2<0&&dist3>best2){best2=dist3;a01=a6}cx_ite14=cx_ite14.next}if(best2<1e100){var v02=a01.gp0;var v13=a01.gp1;var dt5=circle1.worldCOMy*a01.gnormx-circle1.worldCOMx*a01.gnormy;if(dt5<=v02.y*a01.gnormx-v02.x*a01.gnormy){var nx8=0;var ny4=0;nx8=circle1.worldCOMx-v02.x;ny4=circle1.worldCOMy-v02.y;var len4=Math.sqrt(nx8*nx8+ny4*ny4);best2=len4-circle1.radius;if(best2<1e100){if(len4==0){nx8=1;ny4=0}else{var t23=1/len4;nx8*=t23;ny4*=t23}w11.x=v02.x+nx8*0;w11.y=v02.y+ny4*0;var t24=-circle1.radius;w21.x=circle1.worldCOMx+nx8*t24;w21.y=circle1.worldCOMy+ny4*t24;axis.x=nx8;axis.y=ny4}}else if(dt5>=v13.y*a01.gnormx-v13.x*a01.gnormy){var nx9=0;var ny5=0;nx9=circle1.worldCOMx-v13.x;ny5=circle1.worldCOMy-v13.y;var len5=Math.sqrt(nx9*nx9+ny5*ny5);best2=len5-circle1.radius;if(best2<1e100){if(len5==0){nx9=1;ny5=0}else{var t25=1/len5;nx9*=t25;ny5*=t25}w11.x=v13.x+nx9*0;w11.y=v13.y+ny5*0;var t26=-circle1.radius;w21.x=circle1.worldCOMx+nx9*t26;w21.y=circle1.worldCOMy+ny5*t26;axis.x=nx9;axis.y=ny5}}else{var t27=-circle1.radius;w21.x=circle1.worldCOMx+a01.gnormx*t27;w21.y=circle1.worldCOMy+a01.gnormy*t27;var t28=-best2;w11.x=w21.x+a01.gnormx*t28;w11.y=w21.y+a01.gnormy*t28;axis.x=a01.gnormx;axis.y=a01.gnormy}}if(swapped1){axis.x=-axis.x;axis.y=-axis.y}sep2=best2}else{var p12=s13.polygon;var p22=s23.polygon;var best3=-1e100;var a11=null;var a21=null;var besti1=0;var cx_ite15=p12.edges.head;while(cx_ite15!=null){var a7=cx_ite15.elt;var min3=1e100;var cx_ite16=p22.gverts.next;while(cx_ite16!=null){var v10=cx_ite16;var k3=a7.gnormx*v10.x+a7.gnormy*v10.y;if(k3<min3){min3=k3}cx_ite16=cx_ite16.next}min3-=a7.gprojection;if(min3>1e100){best3=min3;break}if(min3>0){if(min3>best3){best3=min3;a11=a7;besti1=1}}else if(best3<0&&min3>best3){best3=min3;a11=a7;besti1=1}cx_ite15=cx_ite15.next}if(best3<1e100){var cx_ite17=p22.edges.head;while(cx_ite17!=null){var a8=cx_ite17.elt;var min4=1e100;var cx_ite18=p12.gverts.next;while(cx_ite18!=null){var v14=cx_ite18;var k4=a8.gnormx*v14.x+a8.gnormy*v14.y;if(k4<min4){min4=k4}cx_ite18=cx_ite18.next}min4-=a8.gprojection;if(min4>1e100){best3=min4;break}if(min4>0){if(min4>best3){best3=min4;a21=a8;besti1=2}}else if(best3<0&&min4>best3){best3=min4;a21=a8;besti1=2}cx_ite17=cx_ite17.next}if(best3<1e100){var q21;var ax1;if(besti1==1){q21=p22;ax1=a11}else{q21=p12;ax1=a21;var tmp1=w11;w11=w21;w21=tmp1;swapped1=!swapped1}var ay1=null;var min5=1e100;var cx_ite19=q21.edges.head;while(cx_ite19!=null){var a9=cx_ite19.elt;var k5=ax1.gnormx*a9.gnormx+ax1.gnormy*a9.gnormy;if(k5<min5){min5=k5;ay1=a9}cx_ite19=cx_ite19.next}if(swapped1){axis.x=-ax1.gnormx;axis.y=-ax1.gnormy}else{axis.x=ax1.gnormx;axis.y=ax1.gnormy}if(best3>=0){var v03=ax1.gp0;var v15=ax1.gp1;var q01=ay1.gp0;var q11=ay1.gp1;var vx1=0;var vy1=0;var qx1=0;var qy1=0;vx1=v15.x-v03.x;vy1=v15.y-v03.y;qx1=q11.x-q01.x;qy1=q11.y-q01.y;var vdot1=1/(vx1*vx1+vy1*vy1);var qdot1=1/(qx1*qx1+qy1*qy1);var t110=-(vx1*(v03.x-q01.x)+vy1*(v03.y-q01.y))*vdot1;var t29=-(vx1*(v03.x-q11.x)+vy1*(v03.y-q11.y))*vdot1;var s14=-(qx1*(q01.x-v03.x)+qy1*(q01.y-v03.y))*qdot1;var s24=-(qx1*(q01.x-v15.x)+qy1*(q01.y-v15.y))*qdot1;if(t110<0){t110=0}else if(t110>1){t110=1}if(t29<0){t29=0}else if(t29>1){t29=1}if(s14<0){s14=0}else if(s14>1){s14=1}if(s24<0){s24=0}else if(s24>1){s24=1}var f1x1=0;var f1y1=0;var t30=t110;f1x1=v03.x+vx1*t30;f1y1=v03.y+vy1*t30;var f2x1=0;var f2y1=0;var t31=t29;f2x1=v03.x+vx1*t31;f2y1=v03.y+vy1*t31;var g1x1=0;var g1y1=0;var t32=s14;g1x1=q01.x+qx1*t32;g1y1=q01.y+qy1*t32;var g2x1=0;var g2y1=0;var t33=s24;g2x1=q01.x+qx1*t33;g2y1=q01.y+qy1*t33;var dx4=0;var dy4=0;dx4=f1x1-q01.x;dy4=f1y1-q01.y;var d12=dx4*dx4+dy4*dy4;var dx5=0;var dy5=0;dx5=f2x1-q11.x;dy5=f2y1-q11.y;var d25=dx5*dx5+dy5*dy5;var dx6=0;var dy6=0;dx6=g1x1-v03.x;dy6=g1y1-v03.y;var e12=dx6*dx6+dy6*dy6;var dx7=0;var dy7=0;dx7=g2x1-v15.x;dy7=g2y1-v15.y;var e22=dx7*dx7+dy7*dy7;var minfx1=0;var minfy1=0;var minq1=null;if(d12<d25){minfx1=f1x1;minfy1=f1y1;minq1=q01}else{minfx1=f2x1;minfy1=f2y1;minq1=q11;d12=d25}var mingx1=0;var mingy1=0;var minv1=null;if(e12<e22){mingx1=g1x1;mingy1=g1y1;minv1=v03}else{mingx1=g2x1;mingy1=g2y1;minv1=v15;e12=e22}if(d12<e12){w11.x=minfx1;w11.y=minfy1;w21.x=minq1.x;w21.y=minq1.y;best3=Math.sqrt(d12)}else{w21.x=mingx1;w21.y=mingy1;w11.x=minv1.x;w11.y=minv1.y;best3=Math.sqrt(e12)}if(best3!=0){axis.x=w21.x-w11.x;axis.y=w21.y-w11.y;var t34=1/best3;axis.x*=t34;axis.y*=t34;if(swapped1){axis.x=-axis.x;axis.y=-axis.y}}sep2=best3}else{var c0x1=0;var c0y1=0;c0x1=ay1.gp0.x;c0y1=ay1.gp0.y;var c1x1=0;var c1y1=0;c1x1=ay1.gp1.x;c1y1=ay1.gp1.y;var dvx1=0;var dvy1=0;dvx1=c1x1-c0x1;dvy1=c1y1-c0y1;var d01=ax1.gnormy*c0x1-ax1.gnormx*c0y1;var d13=ax1.gnormy*c1x1-ax1.gnormx*c1y1;var den1=1/(d13-d01);var t35=(-ax1.tp1-d01)*den1;if(t35>nape_Config.epsilon){c0x1+=dvx1*t35;c0y1+=dvy1*t35}var t36=(-ax1.tp0-d13)*den1;if(t36<-nape_Config.epsilon){c1x1+=dvx1*t36;c1y1+=dvy1*t36}var c0d1=c0x1*ax1.gnormx+c0y1*ax1.gnormy-ax1.gprojection;var c1d1=c1x1*ax1.gnormx+c1y1*ax1.gnormy-ax1.gprojection;if(c0d1<c1d1){w21.x=c0x1;w21.y=c0y1;var t37=-c0d1;w11.x=w21.x+ax1.gnormx*t37;w11.y=w21.y+ax1.gnormy*t37;sep2=c0d1}else{w21.x=c1x1;w21.y=c1y1;var t38=-c1d1;w11.x=w21.x+ax1.gnormx*t38;w11.y=w21.y+ax1.gnormy*t38;sep2=c1d1}}}else{sep2=1e100}}else{sep2=1e100}}}var sep3=sep2+negRadius;if(sep3<nape_Config.distanceThresholdCCD){if(userAPI){break}var d1x1=0;var d1y1=0;d1x1=c1.x-b1.posx;d1y1=c1.y-b1.posy;var d2x1=0;var d2y1=0;d2x1=c2.x-b2.posx;d2y1=c2.y-b2.posy;var proj1=deltax*axis.x+deltay*axis.y-b1.sweep_angvel*(axis.y*d1x1-axis.x*d1y1)+b2.sweep_angvel*(axis.y*d2x1-axis.x*d2y1);if(proj1>0){toi.slipped=true}if(proj1<=0||sep3<nape_Config.distanceThresholdCCD*.5){break}}curTOI=-1;break}if(++curIter>=40){if(sep1>negRadius){toi.failed=true}break}}toi.toi=curTOI};zpp_$nape_geom_ZPP_$SweepDistance.staticSweep=function(toi,timeStep,lowerBound,negRadius){var s1=toi.s1;var s2=toi.s2;var b1=s1.body;var deltax=0;var deltay=0;deltax=-b1.velx;deltay=-b1.vely;var ang1=b1.sweep_angvel;if(ang1<0){ang1=-ang1}var angBias=s1.sweepCoef*ang1;var c1=toi.c1;var c2=toi.c2;var axis=toi.axis;var curTOI=lowerBound;var curIter=0;while(true){var dt=curTOI*timeStep;var delta=dt-b1.sweepTime;if(delta!=0){b1.sweepTime=dt;b1.posx+=b1.velx*delta;b1.posy+=b1.vely*delta;if(b1.angvel!=0){var dr=b1.sweep_angvel*delta;b1.rot+=dr;if(dr*dr>1e-4){b1.axisx=Math.sin(b1.rot);b1.axisy=Math.cos(b1.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*b1.axisx+dr*b1.axisy)*m;b1.axisy=(p*b1.axisy-dr*b1.axisx)*m;b1.axisx=nx}}}if(s1.type==0){s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy);s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy)}else{var p1=s1.polygon;var li=p1.lverts.next;var cx_ite=p1.gverts.next;while(cx_ite!=null){var g=cx_ite;var l=li;li=li.next;g.x=b1.posx+(b1.axisy*l.x-b1.axisx*l.y);g.y=b1.posy+(l.x*b1.axisx+l.y*b1.axisy);cx_ite=cx_ite.next}var ite=p1.edges.head;var cx_ite1=p1.gverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var v=cx_ite1;var e=ite.elt;ite=ite.next;e.gnormx=b1.axisy*e.lnormx-b1.axisx*e.lnormy;e.gnormy=e.lnormx*b1.axisx+e.lnormy*b1.axisy;e.gprojection=b1.posx*e.gnormx+b1.posy*e.gnormy+e.lprojection;e.tp0=u.y*e.gnormx-u.x*e.gnormy;e.tp1=v.y*e.gnormx-v.x*e.gnormy;u=v;cx_ite1=cx_ite1.next}var v1=p1.gverts.next;var e1=ite.elt;e1.gnormx=b1.axisy*e1.lnormx-b1.axisx*e1.lnormy;e1.gnormy=e1.lnormx*b1.axisx+e1.lnormy*b1.axisy;e1.gprojection=b1.posx*e1.gnormx+b1.posy*e1.gnormy+e1.lprojection;e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy;e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}var s11=s1;var s21=s2;var w1=c1;var w2=c2;var sep;if(s1.type==0&&s2.type==0){var c11=s1.circle;var c21=s2.circle;var dist;var nx1=0;var ny=0;nx1=c21.worldCOMx-c11.worldCOMx;ny=c21.worldCOMy-c11.worldCOMy;var len=Math.sqrt(nx1*nx1+ny*ny);dist=len-(c11.radius+c21.radius);if(dist<1e100){if(len==0){nx1=1;ny=0}else{var t=1/len;nx1*=t;ny*=t}var t1=c11.radius;c1.x=c11.worldCOMx+nx1*t1;c1.y=c11.worldCOMy+ny*t1;var t2=-c21.radius;c2.x=c21.worldCOMx+nx1*t2;c2.y=c21.worldCOMy+ny*t2;axis.x=nx1;axis.y=ny}sep=dist}else{var swapped=false;if(s1.type==0&&s2.type==1){s11=s2;s21=s1;w1=c2;w2=c1;swapped=true}if(s11.type==1&&s21.type==0){var circle=s21.circle;var best=-1e100;var a0=null;var cx_ite2=s11.polygon.edges.head;while(cx_ite2!=null){var a=cx_ite2.elt;var dist1=a.gnormx*circle.worldCOMx+a.gnormy*circle.worldCOMy-a.gprojection-circle.radius;if(dist1>1e100){best=dist1;break}if(dist1>0){if(dist1>best){best=dist1;a0=a}}else if(best<0&&dist1>best){best=dist1;a0=a}cx_ite2=cx_ite2.next}if(best<1e100){var v0=a0.gp0;var v11=a0.gp1;var dt1=circle.worldCOMy*a0.gnormx-circle.worldCOMx*a0.gnormy;if(dt1<=v0.y*a0.gnormx-v0.x*a0.gnormy){var nx2=0;var ny1=0;nx2=circle.worldCOMx-v0.x;ny1=circle.worldCOMy-v0.y;var len1=Math.sqrt(nx2*nx2+ny1*ny1);best=len1-circle.radius;if(best<1e100){if(len1==0){nx2=1;ny1=0}else{var t3=1/len1;nx2*=t3;ny1*=t3}w1.x=v0.x+nx2*0;w1.y=v0.y+ny1*0;var t4=-circle.radius;w2.x=circle.worldCOMx+nx2*t4;w2.y=circle.worldCOMy+ny1*t4;axis.x=nx2;axis.y=ny1}}else if(dt1>=v11.y*a0.gnormx-v11.x*a0.gnormy){var nx3=0;var ny2=0;nx3=circle.worldCOMx-v11.x;ny2=circle.worldCOMy-v11.y;var len2=Math.sqrt(nx3*nx3+ny2*ny2);best=len2-circle.radius;if(best<1e100){if(len2==0){nx3=1;ny2=0}else{var t5=1/len2;nx3*=t5;ny2*=t5}w1.x=v11.x+nx3*0;w1.y=v11.y+ny2*0;var t6=-circle.radius;w2.x=circle.worldCOMx+nx3*t6;w2.y=circle.worldCOMy+ny2*t6;axis.x=nx3;axis.y=ny2}}else{var t7=-circle.radius;w2.x=circle.worldCOMx+a0.gnormx*t7;w2.y=circle.worldCOMy+a0.gnormy*t7;var t8=-best;w1.x=w2.x+a0.gnormx*t8;w1.y=w2.y+a0.gnormy*t8;axis.x=a0.gnormx;axis.y=a0.gnormy}}if(swapped){axis.x=-axis.x;axis.y=-axis.y}sep=best}else{var p11=s11.polygon;var p2=s21.polygon;var best1=-1e100;var a1=null;var a2=null;var besti=0;var cx_ite3=p11.edges.head;while(cx_ite3!=null){var a3=cx_ite3.elt;var min=1e100;var cx_ite4=p2.gverts.next;while(cx_ite4!=null){var v2=cx_ite4;var k=a3.gnormx*v2.x+a3.gnormy*v2.y;if(k<min){min=k}cx_ite4=cx_ite4.next}min-=a3.gprojection;if(min>1e100){best1=min;break}if(min>0){if(min>best1){best1=min;a1=a3;besti=1}}else if(best1<0&&min>best1){best1=min;a1=a3;besti=1}cx_ite3=cx_ite3.next}if(best1<1e100){var cx_ite5=p2.edges.head;while(cx_ite5!=null){var a4=cx_ite5.elt;var min1=1e100;var cx_ite6=p11.gverts.next;while(cx_ite6!=null){var v3=cx_ite6;var k1=a4.gnormx*v3.x+a4.gnormy*v3.y;if(k1<min1){min1=k1}cx_ite6=cx_ite6.next}min1-=a4.gprojection;if(min1>1e100){best1=min1;break}if(min1>0){if(min1>best1){best1=min1;a2=a4;besti=2}}else if(best1<0&&min1>best1){best1=min1;a2=a4;besti=2}cx_ite5=cx_ite5.next}if(best1<1e100){var q2;var ax;if(besti==1){q2=p2;ax=a1}else{q2=p11;ax=a2;var tmp=w1;w1=w2;w2=tmp;swapped=!swapped}var ay=null;var min2=1e100;var cx_ite7=q2.edges.head;while(cx_ite7!=null){var a5=cx_ite7.elt;var k2=ax.gnormx*a5.gnormx+ax.gnormy*a5.gnormy;if(k2<min2){min2=k2;ay=a5}cx_ite7=cx_ite7.next}if(swapped){axis.x=-ax.gnormx;axis.y=-ax.gnormy}else{axis.x=ax.gnormx;axis.y=ax.gnormy}if(best1>=0){var v01=ax.gp0;var v12=ax.gp1;var q0=ay.gp0;var q1=ay.gp1;var vx=0;var vy=0;var qx=0;var qy=0;vx=v12.x-v01.x;vy=v12.y-v01.y;qx=q1.x-q0.x;qy=q1.y-q0.y;var vdot=1/(vx*vx+vy*vy);var qdot=1/(qx*qx+qy*qy);var t11=-(vx*(v01.x-q0.x)+vy*(v01.y-q0.y))*vdot;var t21=-(vx*(v01.x-q1.x)+vy*(v01.y-q1.y))*vdot;var s12=-(qx*(q0.x-v01.x)+qy*(q0.y-v01.y))*qdot;var s22=-(qx*(q0.x-v12.x)+qy*(q0.y-v12.y))*qdot;if(t11<0){t11=0}else if(t11>1){t11=1}if(t21<0){t21=0}else if(t21>1){t21=1}if(s12<0){s12=0}else if(s12>1){s12=1}if(s22<0){s22=0}else if(s22>1){s22=1}var f1x=0;var f1y=0;var t9=t11;f1x=v01.x+vx*t9;f1y=v01.y+vy*t9;var f2x=0;var f2y=0;var t10=t21;f2x=v01.x+vx*t10;f2y=v01.y+vy*t10;var g1x=0;var g1y=0;var t12=s12;g1x=q0.x+qx*t12;g1y=q0.y+qy*t12;var g2x=0;var g2y=0;var t13=s22;g2x=q0.x+qx*t13;g2y=q0.y+qy*t13;var dx=0;var dy=0;dx=f1x-q0.x;dy=f1y-q0.y;var d1=dx*dx+dy*dy;var dx1=0;var dy1=0;dx1=f2x-q1.x;dy1=f2y-q1.y;var d21=dx1*dx1+dy1*dy1;var dx2=0;var dy2=0;dx2=g1x-v01.x;dy2=g1y-v01.y;var e11=dx2*dx2+dy2*dy2;var dx3=0;var dy3=0;dx3=g2x-v12.x;dy3=g2y-v12.y;var e2=dx3*dx3+dy3*dy3;var minfx=0;var minfy=0;var minq=null;if(d1<d21){minfx=f1x;minfy=f1y;minq=q0}else{minfx=f2x;minfy=f2y;minq=q1;d1=d21}var mingx=0;var mingy=0;var minv=null;if(e11<e2){mingx=g1x;mingy=g1y;minv=v01}else{mingx=g2x;mingy=g2y;minv=v12;e11=e2}if(d1<e11){w1.x=minfx;w1.y=minfy;w2.x=minq.x;w2.y=minq.y;best1=Math.sqrt(d1)}else{w2.x=mingx;w2.y=mingy;w1.x=minv.x;w1.y=minv.y;best1=Math.sqrt(e11)}if(best1!=0){axis.x=w2.x-w1.x;axis.y=w2.y-w1.y;var t14=1/best1;axis.x*=t14;axis.y*=t14;if(swapped){axis.x=-axis.x;axis.y=-axis.y}}sep=best1}else{var c0x=0;var c0y=0;c0x=ay.gp0.x;c0y=ay.gp0.y;var c1x=0;var c1y=0;c1x=ay.gp1.x;c1y=ay.gp1.y;var dvx=0;var dvy=0;dvx=c1x-c0x;dvy=c1y-c0y;var d0=ax.gnormy*c0x-ax.gnormx*c0y;var d11=ax.gnormy*c1x-ax.gnormx*c1y;var den=1/(d11-d0);var t15=(-ax.tp1-d0)*den;if(t15>nape_Config.epsilon){c0x+=dvx*t15;c0y+=dvy*t15}var t16=(-ax.tp0-d11)*den;if(t16<-nape_Config.epsilon){c1x+=dvx*t16;c1y+=dvy*t16}var c0d=c0x*ax.gnormx+c0y*ax.gnormy-ax.gprojection;var c1d=c1x*ax.gnormx+c1y*ax.gnormy-ax.gprojection;if(c0d<c1d){w2.x=c0x;w2.y=c0y;var t17=-c0d;w1.x=w2.x+ax.gnormx*t17;w1.y=w2.y+ax.gnormy*t17;sep=c0d}else{w2.x=c1x;w2.y=c1y;var t18=-c1d;w1.x=w2.x+ax.gnormx*t18;w1.y=w2.y+ax.gnormy*t18;sep=c1d}}}else{sep=1e100}}else{sep=1e100}}}var sep1=sep+negRadius;var dot=deltax*axis.x+deltay*axis.y;if(sep1<nape_Config.distanceThresholdCCD){var d1x=0;var d1y=0;d1x=c1.x-b1.posx;d1y=c1.y-b1.posy;var proj=dot-b1.sweep_angvel*(axis.y*d1x-axis.x*d1y);if(proj>0){toi.slipped=true}if(proj<=0||sep1<nape_Config.distanceThresholdCCD*.5){break}}var denom=(angBias-dot)*timeStep;if(denom<=0){curTOI=-1;break}var delta1=sep1/denom;if(delta1<1e-6){delta1=1e-6}curTOI+=delta1;if(curTOI>=1){curTOI=1;var dt2=curTOI*timeStep;var delta2=dt2-b1.sweepTime;if(delta2!=0){b1.sweepTime=dt2;b1.posx+=b1.velx*delta2;b1.posy+=b1.vely*delta2;if(b1.angvel!=0){var dr1=b1.sweep_angvel*delta2;b1.rot+=dr1;if(dr1*dr1>1e-4){b1.axisx=Math.sin(b1.rot);b1.axisy=Math.cos(b1.rot)}else{var d22=dr1*dr1;var p3=1-.5*d22;var m1=1-d22*d22/8;var nx4=(p3*b1.axisx+dr1*b1.axisy)*m1;b1.axisy=(p3*b1.axisy-dr1*b1.axisx)*m1;b1.axisx=nx4}}}if(s1.type==0){s1.worldCOMx=b1.posx+(b1.axisy*s1.localCOMx-b1.axisx*s1.localCOMy);s1.worldCOMy=b1.posy+(s1.localCOMx*b1.axisx+s1.localCOMy*b1.axisy)}else{var p4=s1.polygon;var li1=p4.lverts.next;var cx_ite8=p4.gverts.next;while(cx_ite8!=null){var g1=cx_ite8;var l1=li1;li1=li1.next;g1.x=b1.posx+(b1.axisy*l1.x-b1.axisx*l1.y);g1.y=b1.posy+(l1.x*b1.axisx+l1.y*b1.axisy);cx_ite8=cx_ite8.next}var ite1=p4.edges.head;var cx_ite9=p4.gverts.next;var u1=cx_ite9;cx_ite9=cx_ite9.next;while(cx_ite9!=null){var v4=cx_ite9;var e3=ite1.elt;ite1=ite1.next;e3.gnormx=b1.axisy*e3.lnormx-b1.axisx*e3.lnormy;e3.gnormy=e3.lnormx*b1.axisx+e3.lnormy*b1.axisy;e3.gprojection=b1.posx*e3.gnormx+b1.posy*e3.gnormy+e3.lprojection;e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy;e3.tp1=v4.y*e3.gnormx-v4.x*e3.gnormy;u1=v4;cx_ite9=cx_ite9.next}var v5=p4.gverts.next;var e4=ite1.elt;e4.gnormx=b1.axisy*e4.lnormx-b1.axisx*e4.lnormy;e4.gnormy=e4.lnormx*b1.axisx+e4.lnormy*b1.axisy;e4.gprojection=b1.posx*e4.gnormx+b1.posy*e4.gnormy+e4.lprojection;e4.tp0=u1.y*e4.gnormx-u1.x*e4.gnormy;e4.tp1=v5.y*e4.gnormx-v5.x*e4.gnormy}var s13=s1;var s23=s2;var w11=c1;var w21=c2;var sep2;if(s1.type==0&&s2.type==0){var c12=s1.circle;var c22=s2.circle;var dist2;var nx5=0;var ny3=0;nx5=c22.worldCOMx-c12.worldCOMx;ny3=c22.worldCOMy-c12.worldCOMy;var len3=Math.sqrt(nx5*nx5+ny3*ny3);dist2=len3-(c12.radius+c22.radius);if(dist2<1e100){if(len3==0){nx5=1;ny3=0}else{var t19=1/len3;nx5*=t19;ny3*=t19}var t20=c12.radius;c1.x=c12.worldCOMx+nx5*t20;c1.y=c12.worldCOMy+ny3*t20;var t22=-c22.radius;c2.x=c22.worldCOMx+nx5*t22;c2.y=c22.worldCOMy+ny3*t22;axis.x=nx5;axis.y=ny3}sep2=dist2}else{var swapped1=false;if(s1.type==0&&s2.type==1){s13=s2;s23=s1;w11=c2;w21=c1;swapped1=true}if(s13.type==1&&s23.type==0){var circle1=s23.circle;var best2=-1e100;var a01=null;var cx_ite10=s13.polygon.edges.head;while(cx_ite10!=null){var a6=cx_ite10.elt;var dist3=a6.gnormx*circle1.worldCOMx+a6.gnormy*circle1.worldCOMy-a6.gprojection-circle1.radius;if(dist3>1e100){best2=dist3;break}if(dist3>0){if(dist3>best2){best2=dist3;a01=a6}}else if(best2<0&&dist3>best2){best2=dist3;a01=a6}cx_ite10=cx_ite10.next}if(best2<1e100){var v02=a01.gp0;var v13=a01.gp1;var dt3=circle1.worldCOMy*a01.gnormx-circle1.worldCOMx*a01.gnormy;if(dt3<=v02.y*a01.gnormx-v02.x*a01.gnormy){var nx6=0;var ny4=0;nx6=circle1.worldCOMx-v02.x;ny4=circle1.worldCOMy-v02.y;var len4=Math.sqrt(nx6*nx6+ny4*ny4);best2=len4-circle1.radius;if(best2<1e100){if(len4==0){nx6=1;ny4=0}else{var t23=1/len4;nx6*=t23;ny4*=t23}w11.x=v02.x+nx6*0;w11.y=v02.y+ny4*0;var t24=-circle1.radius;w21.x=circle1.worldCOMx+nx6*t24;w21.y=circle1.worldCOMy+ny4*t24;axis.x=nx6;axis.y=ny4}}else if(dt3>=v13.y*a01.gnormx-v13.x*a01.gnormy){var nx7=0;var ny5=0;nx7=circle1.worldCOMx-v13.x;ny5=circle1.worldCOMy-v13.y;var len5=Math.sqrt(nx7*nx7+ny5*ny5);best2=len5-circle1.radius;if(best2<1e100){if(len5==0){nx7=1;ny5=0}else{var t25=1/len5;nx7*=t25;ny5*=t25}w11.x=v13.x+nx7*0;w11.y=v13.y+ny5*0;var t26=-circle1.radius;w21.x=circle1.worldCOMx+nx7*t26;w21.y=circle1.worldCOMy+ny5*t26;axis.x=nx7;axis.y=ny5}}else{var t27=-circle1.radius;w21.x=circle1.worldCOMx+a01.gnormx*t27;w21.y=circle1.worldCOMy+a01.gnormy*t27;var t28=-best2;w11.x=w21.x+a01.gnormx*t28;w11.y=w21.y+a01.gnormy*t28;axis.x=a01.gnormx;axis.y=a01.gnormy}}if(swapped1){axis.x=-axis.x;axis.y=-axis.y}sep2=best2}else{var p12=s13.polygon;var p21=s23.polygon;var best3=-1e100;var a11=null;var a21=null;var besti1=0;var cx_ite11=p12.edges.head;while(cx_ite11!=null){var a7=cx_ite11.elt;var min3=1e100;var cx_ite12=p21.gverts.next;while(cx_ite12!=null){var v6=cx_ite12;var k3=a7.gnormx*v6.x+a7.gnormy*v6.y;if(k3<min3){min3=k3}cx_ite12=cx_ite12.next}min3-=a7.gprojection;if(min3>1e100){best3=min3;break}if(min3>0){if(min3>best3){best3=min3;a11=a7;besti1=1}}else if(best3<0&&min3>best3){best3=min3;a11=a7;besti1=1}cx_ite11=cx_ite11.next}if(best3<1e100){var cx_ite13=p21.edges.head;while(cx_ite13!=null){var a8=cx_ite13.elt;var min4=1e100;var cx_ite14=p12.gverts.next;while(cx_ite14!=null){var v7=cx_ite14;var k4=a8.gnormx*v7.x+a8.gnormy*v7.y;if(k4<min4){min4=k4}cx_ite14=cx_ite14.next}min4-=a8.gprojection;if(min4>1e100){best3=min4;break}if(min4>0){if(min4>best3){best3=min4;a21=a8;besti1=2}}else if(best3<0&&min4>best3){best3=min4;a21=a8;besti1=2}cx_ite13=cx_ite13.next}if(best3<1e100){var q21;var ax1;if(besti1==1){q21=p21;ax1=a11}else{q21=p12;ax1=a21;var tmp1=w11;w11=w21;w21=tmp1;swapped1=!swapped1}var ay1=null;var min5=1e100;var cx_ite15=q21.edges.head;while(cx_ite15!=null){var a9=cx_ite15.elt;var k5=ax1.gnormx*a9.gnormx+ax1.gnormy*a9.gnormy;if(k5<min5){min5=k5;ay1=a9}cx_ite15=cx_ite15.next}if(swapped1){axis.x=-ax1.gnormx;axis.y=-ax1.gnormy}else{axis.x=ax1.gnormx;axis.y=ax1.gnormy}if(best3>=0){var v03=ax1.gp0;var v14=ax1.gp1;var q01=ay1.gp0;var q11=ay1.gp1;var vx1=0;var vy1=0;var qx1=0;var qy1=0;vx1=v14.x-v03.x;vy1=v14.y-v03.y;qx1=q11.x-q01.x;qy1=q11.y-q01.y;var vdot1=1/(vx1*vx1+vy1*vy1);var qdot1=1/(qx1*qx1+qy1*qy1);var t110=-(vx1*(v03.x-q01.x)+vy1*(v03.y-q01.y))*vdot1;var t29=-(vx1*(v03.x-q11.x)+vy1*(v03.y-q11.y))*vdot1;var s14=-(qx1*(q01.x-v03.x)+qy1*(q01.y-v03.y))*qdot1;var s24=-(qx1*(q01.x-v14.x)+qy1*(q01.y-v14.y))*qdot1;if(t110<0){t110=0}else if(t110>1){t110=1}if(t29<0){t29=0}else if(t29>1){t29=1}if(s14<0){s14=0}else if(s14>1){s14=1}if(s24<0){s24=0}else if(s24>1){s24=1}var f1x1=0;var f1y1=0;var t30=t110;f1x1=v03.x+vx1*t30;f1y1=v03.y+vy1*t30;var f2x1=0;var f2y1=0;var t31=t29;f2x1=v03.x+vx1*t31;f2y1=v03.y+vy1*t31;var g1x1=0;var g1y1=0;var t32=s14;g1x1=q01.x+qx1*t32;g1y1=q01.y+qy1*t32;var g2x1=0;var g2y1=0;var t33=s24;g2x1=q01.x+qx1*t33;g2y1=q01.y+qy1*t33;var dx4=0;var dy4=0;dx4=f1x1-q01.x;dy4=f1y1-q01.y;var d12=dx4*dx4+dy4*dy4;var dx5=0;var dy5=0;dx5=f2x1-q11.x;dy5=f2y1-q11.y;var d23=dx5*dx5+dy5*dy5;var dx6=0;var dy6=0;dx6=g1x1-v03.x;dy6=g1y1-v03.y;var e12=dx6*dx6+dy6*dy6;var dx7=0;var dy7=0;dx7=g2x1-v14.x;dy7=g2y1-v14.y;var e21=dx7*dx7+dy7*dy7;var minfx1=0;var minfy1=0;var minq1=null;if(d12<d23){minfx1=f1x1;minfy1=f1y1;minq1=q01}else{minfx1=f2x1;minfy1=f2y1;minq1=q11;d12=d23}var mingx1=0;var mingy1=0;var minv1=null;if(e12<e21){mingx1=g1x1;mingy1=g1y1;minv1=v03}else{mingx1=g2x1;mingy1=g2y1;minv1=v14;e12=e21}if(d12<e12){w11.x=minfx1;w11.y=minfy1;w21.x=minq1.x;w21.y=minq1.y;best3=Math.sqrt(d12)}else{w21.x=mingx1;w21.y=mingy1;w11.x=minv1.x;w11.y=minv1.y;best3=Math.sqrt(e12)}if(best3!=0){axis.x=w21.x-w11.x;axis.y=w21.y-w11.y;var t34=1/best3;axis.x*=t34;axis.y*=t34;if(swapped1){axis.x=-axis.x;axis.y=-axis.y}}sep2=best3}else{var c0x1=0;var c0y1=0;c0x1=ay1.gp0.x;c0y1=ay1.gp0.y;var c1x1=0;var c1y1=0;c1x1=ay1.gp1.x;c1y1=ay1.gp1.y;var dvx1=0;var dvy1=0;dvx1=c1x1-c0x1;dvy1=c1y1-c0y1;var d01=ax1.gnormy*c0x1-ax1.gnormx*c0y1;var d13=ax1.gnormy*c1x1-ax1.gnormx*c1y1;var den1=1/(d13-d01);var t35=(-ax1.tp1-d01)*den1;if(t35>nape_Config.epsilon){c0x1+=dvx1*t35;c0y1+=dvy1*t35}var t36=(-ax1.tp0-d13)*den1;if(t36<-nape_Config.epsilon){c1x1+=dvx1*t36;c1y1+=dvy1*t36}var c0d1=c0x1*ax1.gnormx+c0y1*ax1.gnormy-ax1.gprojection;var c1d1=c1x1*ax1.gnormx+c1y1*ax1.gnormy-ax1.gprojection;if(c0d1<c1d1){w21.x=c0x1;w21.y=c0y1;var t37=-c0d1;w11.x=w21.x+ax1.gnormx*t37;w11.y=w21.y+ax1.gnormy*t37;sep2=c0d1}else{w21.x=c1x1;w21.y=c1y1;var t38=-c1d1;w11.x=w21.x+ax1.gnormx*t38;w11.y=w21.y+ax1.gnormy*t38;sep2=c1d1}}}else{sep2=1e100}}else{sep2=1e100}}}var sep3=sep2+negRadius;if(sep3<nape_Config.distanceThresholdCCD){var d1x1=0;var d1y1=0;d1x1=c1.x-b1.posx;d1y1=c1.y-b1.posy;var proj1=deltax*axis.x+deltay*axis.y-b1.sweep_angvel*(axis.y*d1x1-axis.x*d1y1);if(proj1>0){toi.slipped=true}if(proj1<=0||sep3<nape_Config.distanceThresholdCCD*.5){break}}curTOI=-1;break}if(++curIter>=40){if(sep1>negRadius){toi.failed=true}break}}toi.toi=curTOI};var zpp_$nape_geom_ZPP_$Vec3=function(){this._validate=null;this.immutable=false;this.z=0;this.y=0;this.x=0;this.outer=null;this.immutable=false;this._validate=null};$hxClasses["zpp_nape.geom.ZPP_Vec3"]=zpp_$nape_geom_ZPP_$Vec3;zpp_$nape_geom_ZPP_$Vec3.__name__="zpp_nape.geom.ZPP_Vec3";zpp_$nape_geom_ZPP_$Vec3.prototype={outer:null,x:null,y:null,z:null,immutable:null,_validate:null,__class__:zpp_$nape_geom_ZPP_$Vec3};var zpp_$nape_phys_ZPP_$Interactor=function(){this.wrap_cbTypes=null;this.cbSet=null;this.cbTypes=null;this.group=null;this.cbsets=null;this.icompound=null;this.ibody=null;this.ishape=null;this.userData=null;this.id=0;this.outer_i=null;this.id=zpp_$nape_ZPP_$ID.Interactor();this.cbsets=new zpp_$nape_util_ZNPList_$ZPP_$CallbackSet;this.cbTypes=new zpp_$nape_util_ZNPList_$ZPP_$CbType};$hxClasses["zpp_nape.phys.ZPP_Interactor"]=zpp_$nape_phys_ZPP_$Interactor;zpp_$nape_phys_ZPP_$Interactor.__name__="zpp_nape.phys.ZPP_Interactor";zpp_$nape_phys_ZPP_$Interactor.get=function(i1,i2){var id=i1.id<i2.id?i1.id:i2.id;var di=i1.id<i2.id?i2.id:i1.id;var ret=null;var cx_ite=(i1.cbsets.length<i2.cbsets.length?i1.cbsets:i2.cbsets).head;while(cx_ite!=null){var x=cx_ite.elt;if(x.id==id&&x.di==di){ret=x;break}cx_ite=cx_ite.next}return ret};zpp_$nape_phys_ZPP_$Interactor.prototype={outer_i:null,id:null,userData:null,ishape:null,ibody:null,icompound:null,__iaddedToSpace:function(){if(this.group!=null){this.group.interactors.add(this)}var cx_ite=this.cbTypes.head;while(cx_ite!=null){cx_ite.elt.interactors.add(this);cx_ite=cx_ite.next}this.alloc_cbSet()},__iremovedFromSpace:function(){if(this.group!=null){this.group.interactors.remove(this)}var cx_ite=this.cbTypes.head;while(cx_ite!=null){cx_ite.elt.interactors.remove(this);cx_ite=cx_ite.next}this.dealloc_cbSet()},wake:function(){if(this.ishape!=null){var body=this.ishape.body;if(body!=null&&body.space!=null){body.space.non_inlined_wake(body)}}else if(this.ibody!=null){if(this.ibody.space!=null){this.ibody.space.non_inlined_wake(this.ibody)}}else if(this.icompound.space!=null){this.icompound.space.wakeCompound(this.icompound)}},cbsets:null,group:null,cbTypes:null,cbSet:null,wrap_cbTypes:null,setupcbTypes:function(){this.wrap_cbTypes=zpp_$nape_util_ZPP_$CbTypeList.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=$bind(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=$bind(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=true},wrap_cbTypes_subber:function(pcb){var cb=pcb.zpp_inner;if(this.cbTypes.has(cb)){var space=this.ishape!=null?this.ishape.body==null?null:this.ishape.body.space:this.ibody!=null?this.ibody.space:this.icompound.space;if(space!=null){this.dealloc_cbSet();cb.interactors.remove(this)}this.cbTypes.remove(cb);if(space!=null){this.alloc_cbSet();this.wake()}}},wrap_cbTypes_adder:function(cb){this.insert_cbtype(cb.zpp_inner);return false},insert_cbtype:function(cb){if(!this.cbTypes.has(cb)){var space=this.ishape!=null?this.ishape.body==null?null:this.ishape.body.space:this.ibody!=null?this.ibody.space:this.icompound.space;if(space!=null){this.dealloc_cbSet();cb.interactors.add(this)}var pre=null;var cx_ite=this.cbTypes.head;while(cx_ite!=null){if(cb.id<cx_ite.elt.id){break}pre=cx_ite;cx_ite=cx_ite.next}var _this=this.cbTypes;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbType}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbType.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;if(pre==null){temp.next=_this.head;_this.head=temp}else{temp.next=pre.next;pre.next=temp}_this.pushmod=_this.modified=true;_this.length++;if(space!=null){this.alloc_cbSet();this.wake()}}},alloc_cbSet:function(){var space=this.ishape!=null?this.ishape.body==null?null:this.ishape.body.space:this.ibody!=null?this.ibody.space:this.icompound.space;if((this.cbSet=space.cbsets.get(this.cbTypes))!=null){this.cbSet.count++;this.cbSet.interactors.add(this);this.cbSet.validate();space.freshInteractorType(this)}},dealloc_cbSet:function(){var space=this.ishape!=null?this.ishape.body==null?null:this.ishape.body.space:this.ibody!=null?this.ibody.space:this.icompound.space;if(this.cbSet!=null){this.cbSet.interactors.remove(this);space.nullInteractorType(this);if(--this.cbSet.count==0){space.cbsets.remove(this.cbSet);var o=this.cbSet;o.listeners.clear();o.zip_listeners=true;o.bodylisteners.clear();o.zip_bodylisteners=true;o.conlisteners.clear();o.zip_conlisteners=true;while(o.cbTypes.head!=null)o.cbTypes.pop_unsafe().cbsets.remove(o);o.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=o}this.cbSet=null}},immutable_midstep:function(n){},__class__:zpp_$nape_phys_ZPP_$Interactor};var zpp_$nape_phys_ZPP_$Body=function(){this.wrap_worldCOM=null;this.wrap_localCOM=null;this.zip_worldCOM=false;this.worldCOMy=0;this.worldCOMx=0;this.zip_localCOM=false;this.localCOMy=0;this.localCOMx=0;this.zip_aabb=false;this.aabb=null;this.norotate=false;this.sinertia=0;this.iinertia=0;this.cinertia=0;this.zip_inertia=false;this.inertia=0;this.inertiaMode=0;this.zip_gravMassScale=false;this.gravMassScale=0;this.gravMassMode=0;this.zip_gravMass=false;this.gravMass=0;this.nomove=false;this.cmass=0;this.smass=0;this.imass=0;this.massMode=0;this.zip_mass=false;this.mass=0;this.zip_axis=false;this.axisy=0;this.axisx=0;this.rot=0;this.pre_rot=0;this.kinangvel=0;this.torque=0;this.angvel=0;this.svely=0;this.svelx=0;this.kinvely=0;this.kinvelx=0;this.forcey=0;this.forcex=0;this.wrap_vel=null;this.vely=0;this.velx=0;this.wrap_pos=null;this.posy=0;this.posx=0;this.pre_posy=0;this.pre_posx=0;this.disableCCD=false;this.bulletEnabled=false;this.bullet=false;this.sweepRadius=0;this.sweepFrozen=false;this.sweep_angvel=0;this.sweepTime=0;this.graph_depth=0;this.component=null;this.constraints=null;this.arbiters=null;this.space=null;this.wrap_shapes=null;this.shapes=null;this.compound=null;this.type=0;this.world=false;this.outer=null;zpp_$nape_phys_ZPP_$Interactor.call(this);this.ibody=this;this.world=false;this.bulletEnabled=false;this.sweepTime=0;this.sweep_angvel=0;this.norotate=this.nomove=false;this.disableCCD=false;this.posx=0;this.posy=0;this.rot=0;this.axisx=0;this.axisy=1;this.svelx=0;this.svely=0;this.velx=0;this.vely=0;this.kinvelx=0;this.kinvely=0;this.forcex=0;this.forcey=0;this.torque=this.angvel=this.kinangvel=0;this.pre_posx=Infinity;this.pre_posy=Infinity;this.pre_rot=Infinity;this.localCOMx=0;this.localCOMy=0;this.worldCOMx=0;this.worldCOMy=0;this.zip_aabb=true;var ret;if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$AABB}else{ret=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=ret.next;ret.next=null}ret.minx=0;ret.miny=0;ret.maxx=0;ret.maxy=0;this.aabb=ret;this.aabb._immutable=true;this.aabb._validate=$bind(this,this.aabb_validate);this.massMode=0;this.gravMassMode=0;this.gravMassScale=1;this.inertiaMode=0;this.arbiters=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter;this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape;this.wrap_shapes=zpp_$nape_util_ZPP_$ShapeList.get(this.shapes);this.wrap_shapes.zpp_inner.adder=$bind(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=$bind(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=$bind(this,this.shapes_invalidate);this.kinematicDelaySleep=false};$hxClasses["zpp_nape.phys.ZPP_Body"]=zpp_$nape_phys_ZPP_$Body;zpp_$nape_phys_ZPP_$Body.__name__="zpp_nape.phys.ZPP_Body";zpp_$nape_phys_ZPP_$Body.bodysetlt=function(a,b){return a.id<b.id};zpp_$nape_phys_ZPP_$Body.__static=function(){if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}var ret=new nape_phys_Body(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC);var si=ret.zpp_inner;si.world=true;si.wrap_shapes.zpp_inner.immutable=true;si.smass=si.imass=si.cmass=si.mass=si.gravMass=0;si.sinertia=si.iinertia=si.cinertia=si.inertia=0;si.cbTypes.clear();return ret};zpp_$nape_phys_ZPP_$Body.__super__=zpp_$nape_phys_ZPP_$Interactor;zpp_$nape_phys_ZPP_$Body.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{outer:null,world:null,type:null,invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},compound:null,shapes:null,wrap_shapes:null,invalidate_shapes:function(){this.zip_aabb=true;this.zip_localCOM=true;this.zip_worldCOM=true;this.invalidate_mass();this.invalidate_inertia()},space:null,arbiters:null,constraints:null,component:null,graph_depth:null,interactingBodies:function(arbiter_type,depth,output){var _gthis=this;if(zpp_$nape_phys_ZPP_$Body.bodyset==null){zpp_$nape_phys_ZPP_$Body.bodyset=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body;zpp_$nape_phys_ZPP_$Body.bodyset.lt=zpp_$nape_phys_ZPP_$Body.bodysetlt;zpp_$nape_phys_ZPP_$Body.bodystack=new zpp_$nape_util_ZNPList_$ZPP_$Body}var ret=output==null?new nape_phys_BodyList:output;zpp_$nape_phys_ZPP_$Body.bodyset.insert(this);zpp_$nape_phys_ZPP_$Body.bodystack.add(this);this.graph_depth=0;while(zpp_$nape_phys_ZPP_$Body.bodystack.head!=null){var cur=zpp_$nape_phys_ZPP_$Body.bodystack.pop_unsafe();if(cur.graph_depth==depth){continue}var cx_ite=cur.arbiters.head;while(cx_ite!=null){var arb=cx_ite.elt;if((arb.type&arbiter_type)!=0){var other=arb.b1==cur?arb.b2:arb.b1;if(zpp_$nape_phys_ZPP_$Body.bodyset.try_insert_bool(other)){zpp_$nape_phys_ZPP_$Body.bodystack.add(other);other.graph_depth=cur.graph_depth+1}}cx_ite=cx_ite.next}}var _this=zpp_$nape_phys_ZPP_$Body.bodyset;if(_this.parent!=null){var cur1=_this.parent;while(cur1!=null)if(cur1.prev!=null){cur1=cur1.prev}else if(cur1.next!=null){cur1=cur1.next}else{var b=cur1.data;if(b!=_gthis){var obj=b.outer;if(ret.zpp_inner.reverse_flag){ret.push(obj)}else{ret.unshift(obj)}}var ret1=cur1.parent;if(ret1!=null){if(cur1==ret1.prev){ret1.prev=null}else{ret1.next=null}cur1.parent=null}var o=cur1;o.data=null;o.lt=null;o.swapped=null;o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=o;cur1=ret1}_this.parent=null}return ret},atRest:function(dt){if(this.type!=2){return this.component.sleeping}else{var linSq=nape_Config.linearSleepThreshold;linSq*=linSq;var cansleep;if(this.velx*this.velx+this.vely*this.vely>linSq){cansleep=false}else{var dx=0;var dy=0;dx=this.posx-this.pre_posx;dy=this.posy-this.pre_posy;if(dx*dx+dy*dy>.25*linSq*dt*dt){cansleep=false}else{var dx1=0;var dy1=0;dx1=this.aabb.maxx-this.aabb.minx;dy1=this.aabb.maxy-this.aabb.miny;var idl=dx1*dx1+dy1*dy1;var angSq=nape_Config.angularSleepThreshold;angSq*=angSq;if(4*this.angvel*this.angvel*idl>angSq){cansleep=false}else{var dr=this.rot-this.pre_rot;cansleep=dr*dr*idl>angSq*dt*dt?false:true}}}if(!cansleep){this.component.waket=this.space.stamp}return this.component.waket+nape_Config.sleepDelay<this.space.stamp}},refreshArbiters:function(){var cx_ite=this.arbiters.head;while(cx_ite!=null){cx_ite.elt.invalidated=true;cx_ite=cx_ite.next}},sweepTime:null,sweep_angvel:null,sweepFrozen:null,sweepRadius:null,bullet:null,bulletEnabled:null,disableCCD:null,pre_posx:null,pre_posy:null,posx:null,posy:null,wrap_pos:null,velx:null,vely:null,wrap_vel:null,forcex:null,forcey:null,kinvelx:null,kinvely:null,svelx:null,svely:null,pos_invalidate:function(pos){this.immutable_midstep("Body::position");if(!(this.posx==pos.x&&this.posy==pos.y)){this.posx=pos.x;this.posy=pos.y;var cx_ite=this.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;if(s.type==1){s.polygon.invalidate_gverts();s.polygon.invalidate_gaxi()}s.invalidate_worldCOM();cx_ite=cx_ite.next}this.zip_worldCOM=true;this.wake()}},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(vel){this.velx=vel.x;this.vely=vel.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},setupPosition:function(){var x=this.posx;var y=this.posy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_pos=ret;this.wrap_pos.zpp_inner._inuse=true;if(this.world){this.wrap_pos.zpp_inner._immutable=true}else{this.wrap_pos.zpp_inner._invalidate=$bind(this,this.pos_invalidate);this.wrap_pos.zpp_inner._validate=$bind(this,this.pos_validate)}},setupVelocity:function(){var x=this.velx;var y=this.vely;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_vel=ret;this.wrap_vel.zpp_inner._inuse=true;if(this.world){this.wrap_vel.zpp_inner._immutable=true}else{this.wrap_vel.zpp_inner._invalidate=$bind(this,this.vel_invalidate);this.wrap_vel.zpp_inner._validate=$bind(this,this.vel_validate)}},angvel:null,torque:null,kinangvel:null,pre_rot:null,rot:null,axisx:null,axisy:null,zip_axis:null,kinematicDelaySleep:null,mass:null,zip_mass:null,massMode:null,imass:null,smass:null,cmass:null,nomove:null,invalidate_mass:function(){this.zip_mass=true;this.invalidate_gravMass()},validate_mass:function(){if(this.zip_mass||this.massMode==0&&false){this.zip_mass=false;if(this.massMode==0){this.cmass=0;var cx_ite=this.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;s.refmaterial.density=s.material.density;s.validate_area_inertia();this.cmass+=s.area*s.material.density;cx_ite=cx_ite.next}}if(this.type==2&&!this.nomove){this.mass=this.cmass;this.imass=this.smass=1/this.mass}else{this.mass=Infinity;this.imass=this.smass=0}}},gravMass:null,zip_gravMass:null,gravMassMode:null,gravMassScale:null,zip_gravMassScale:null,invalidate_gravMass:function(){if(this.gravMassMode!=1){this.zip_gravMass=true}if(this.gravMassMode!=2){this.zip_gravMassScale=true}this.wake()},validate_gravMass:function(){if(this.zip_gravMass){this.zip_gravMass=false;this.validate_mass();if(this.gravMassMode==0){this.validate_mass();this.gravMass=this.cmass}else if(this.gravMassMode==2){this.validate_mass();this.gravMass=this.cmass*this.gravMassScale}}},inertiaMode:null,inertia:null,zip_inertia:null,cinertia:null,iinertia:null,sinertia:null,norotate:null,invalidate_inertia:function(){this.zip_inertia=true;this.wake()},validate_inertia:function(){if(this.zip_inertia||this.inertiaMode==0&&false){this.zip_inertia=false;if(this.inertiaMode==0){this.cinertia=0;var cx_ite=this.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;s.refmaterial.density=s.material.density;s.validate_area_inertia();this.cinertia+=s.inertia*s.area*s.material.density;cx_ite=cx_ite.next}}if(this.type==2&&!this.norotate){this.inertia=this.cinertia;this.sinertia=this.iinertia=1/this.inertia}else{this.inertia=Infinity;this.sinertia=this.iinertia=0}}},aabb:null,zip_aabb:null,localCOMx:null,localCOMy:null,zip_localCOM:null,worldCOMx:null,worldCOMy:null,zip_worldCOM:null,wrap_localCOM:null,wrap_worldCOM:null,validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=false;var tempx=0;var tempy=0;var msum=0;var cx_ite=this.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;if(s.zip_localCOM){s.zip_localCOM=false;if(s.type==1){var _this=s.polygon;if(_this.lverts.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y}else if(_this.lverts.next.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y;_this.localCOMx+=_this.lverts.next.next.x;_this.localCOMy+=_this.lverts.next.next.y;_this.localCOMx*=.5;_this.localCOMy*=.5}else{_this.localCOMx=0;_this.localCOMy=0;var area=0;var cx_ite1=_this.lverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;var v=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf;_this.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite1=cx_ite1.next}cx_ite1=_this.lverts.next;var w1=cx_ite1;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1;_this.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite1=cx_ite1.next;var w2=cx_ite1;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this.localCOMx+=(w1.x+w2.x)*cf2;_this.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this.localCOMx*=t;_this.localCOMy*=t}}if(s.wrap_localCOM!=null){s.wrap_localCOM.zpp_inner.x=s.localCOMx;s.wrap_localCOM.zpp_inner.y=s.localCOMy}}s.validate_area_inertia();var t1=s.area*s.material.density;tempx+=s.localCOMx*t1;tempy+=s.localCOMy*t1;msum+=s.area*s.material.density;cx_ite=cx_ite.next}if(msum!=0){var t2=1/msum;this.localCOMx=tempx*t2;this.localCOMy=tempy*t2}if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}if(this.zip_mass&&this.massMode==0){this.zip_mass=false;this.cmass=msum;if(this.type==2){this.mass=this.cmass;this.imass=this.smass=1/this.mass}else{this.mass=Infinity;this.imass=this.smass=0}}}},validate_worldCOM:function(){if(this.zip_worldCOM){this.zip_worldCOM=false;this.validate_localCOM();if(this.zip_axis){this.zip_axis=false;this.axisx=Math.sin(this.rot);this.axisy=Math.cos(this.rot)}this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy);this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy);if(this.wrap_worldCOM!=null){this.wrap_worldCOM.zpp_inner.x=this.worldCOMx;this.wrap_worldCOM.zpp_inner.y=this.worldCOMy}}},aabb_validate:function(){if(this.zip_aabb){this.zip_aabb=false;this.aabb.minx=Infinity;this.aabb.miny=Infinity;this.aabb.maxx=-Infinity;this.aabb.maxy=-Infinity;var cx_ite=this.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;if(s.zip_aabb){if(s.body!=null){s.zip_aabb=false;if(s.type==0){var _this=s.circle;if(_this.zip_worldCOM){if(_this.body!=null){_this.zip_worldCOM=false;if(_this.zip_localCOM){_this.zip_localCOM=false;if(_this.type==1){var _this1=_this.polygon;if(_this1.lverts.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y}else if(_this1.lverts.next.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y;_this1.localCOMx+=_this1.lverts.next.next.x;_this1.localCOMy+=_this1.lverts.next.next.y;_this1.localCOMx*=.5;_this1.localCOMy*=.5}else{_this1.localCOMx=0;_this1.localCOMy=0;var area=0;var cx_ite1=_this1.lverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;var v=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf;_this1.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite1=cx_ite1.next}cx_ite1=_this1.lverts.next;var w1=cx_ite1;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1;_this1.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite1=cx_ite1.next;var w2=cx_ite1;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this1.localCOMx+=(w1.x+w2.x)*cf2;_this1.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this1.localCOMx*=t;_this1.localCOMy*=t}}if(_this.wrap_localCOM!=null){_this.wrap_localCOM.zpp_inner.x=_this.localCOMx;_this.wrap_localCOM.zpp_inner.y=_this.localCOMy}}var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}var rx=_this.radius;var ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx;_this.aabb.miny=_this.worldCOMy-ry;_this.aabb.maxx=_this.worldCOMx+rx;_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=s.polygon;if(_this3.zip_gverts){if(_this3.body!=null){_this3.zip_gverts=false;_this3.validate_lverts();var _this4=_this3.body;if(_this4.zip_axis){_this4.zip_axis=false;_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}var li=_this3.lverts.next;var cx_ite2=_this3.gverts.next;while(cx_ite2!=null){var g=cx_ite2;var l=li;li=li.next;g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y);g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy);cx_ite2=cx_ite2.next}}}var p0=_this3.gverts.next;_this3.aabb.minx=p0.x;_this3.aabb.miny=p0.y;_this3.aabb.maxx=p0.x;_this3.aabb.maxy=p0.y;var cx_ite3=_this3.gverts.next.next;while(cx_ite3!=null){var p=cx_ite3;if(p.x<_this3.aabb.minx){_this3.aabb.minx=p.x}if(p.x>_this3.aabb.maxx){_this3.aabb.maxx=p.x}if(p.y<_this3.aabb.miny){_this3.aabb.miny=p.y}if(p.y>_this3.aabb.maxy){_this3.aabb.maxy=p.y}cx_ite3=cx_ite3.next}}}}var _this5=this.aabb;var x=s.aabb;if(x.minx<_this5.minx){_this5.minx=x.minx}if(x.maxx>_this5.maxx){_this5.maxx=x.maxx}if(x.miny<_this5.miny){_this5.miny=x.miny}if(x.maxy>_this5.maxy){_this5.maxy=x.maxy}cx_ite=cx_ite.next}}},shapes_adder:function(s){if(s.zpp_inner.body!=this){if(s.zpp_inner.body!=null){s.zpp_inner.body.wrap_shapes.remove(s)}s.zpp_inner.body=this;s.zpp_inner.addedToBody();if(this.space!=null){var _this=this.space;var s1=s.zpp_inner;var o=s1.body;if(!o.world){o.component.waket=_this.stamp+(_this.midstep?0:1);if(o.type==3){o.kinematicDelaySleep=true}if(o.component.sleeping){_this.really_wake(o,false)}}_this.bphase.insert(s1);s1.addedToSpace()}if(s.zpp_inner.type==1){s.zpp_inner.polygon.invalidate_gaxi();s.zpp_inner.polygon.invalidate_gverts()}return true}else{return false}},shapes_subber:function(s){if(this.space!=null){this.space.removed_shape(s.zpp_inner)}s.zpp_inner.body=null},shapes_invalidate:function(_){this.invalidate_shapes()},addedToSpace:function(){if(zpp_$nape_space_ZPP_$Component.zpp_pool==null){this.component=new zpp_$nape_space_ZPP_$Component}else{this.component=zpp_$nape_space_ZPP_$Component.zpp_pool;zpp_$nape_space_ZPP_$Component.zpp_pool=this.component.next;this.component.next=null}this.component.isBody=true;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){while(this.arbiters.head!=null){var arb=this.arbiters.pop_unsafe();var s=this.space;arb.cleared=true;if(arb.b2==this){var _this=arb.b1.arbiters;var pre=null;var cur=_this.head;while(cur!=null){if(cur.elt==arb){var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;break}pre=cur;cur=cur.next}}if(arb.b1==this){var _this1=arb.b2.arbiters;var pre1=null;var cur1=_this1.head;while(cur1!=null){if(cur1.elt==arb){var old1;var ret1;if(pre1==null){old1=_this1.head;ret1=old1.next;_this1.head=ret1;if(_this1.head==null){_this1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){_this1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o1;_this1.modified=true;_this1.length--;_this1.pushmod=true;break}pre1=cur1;cur1=cur1.next}}if(arb.pair!=null){arb.pair.arb=null;arb.pair=null}arb.active=false;s.f_arbiters.modified=true}var o2=this.component;o2.body=null;o2.constraint=null;o2.next=zpp_$nape_space_ZPP_$Component.zpp_pool;zpp_$nape_space_ZPP_$Component.zpp_pool=o2;this.component=null;this.__iremovedFromSpace()},__class__:zpp_$nape_phys_ZPP_$Body});var zpp_$nape_phys_ZPP_$Compound=function(){this.space=null;this.compound=null;this.depth=0;this.wrap_compounds=null;this.wrap_constraints=null;this.wrap_bodies=null;this.compounds=null;this.constraints=null;this.bodies=null;this.outer=null;zpp_$nape_phys_ZPP_$Interactor.call(this);this.icompound=this;this.depth=1;this.bodies=new zpp_$nape_util_ZNPList_$ZPP_$Body;this.wrap_bodies=zpp_$nape_util_ZPP_$BodyList.get(this.bodies);this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber);this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.constraints);this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber);this.compounds=new zpp_$nape_util_ZNPList_$ZPP_$Compound;this.wrap_compounds=zpp_$nape_util_ZPP_$CompoundList.get(this.compounds);this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber)};$hxClasses["zpp_nape.phys.ZPP_Compound"]=zpp_$nape_phys_ZPP_$Compound;zpp_$nape_phys_ZPP_$Compound.__name__="zpp_nape.phys.ZPP_Compound";zpp_$nape_phys_ZPP_$Compound.__super__=zpp_$nape_phys_ZPP_$Interactor;zpp_$nape_phys_ZPP_$Compound.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{outer:null,bodies:null,constraints:null,compounds:null,wrap_bodies:null,wrap_constraints:null,wrap_compounds:null,depth:null,compound:null,space:null,addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},bodies_adder:function(x){if(x.zpp_inner.compound!=this){if(x.zpp_inner.compound!=null){x.zpp_inner.compound.wrap_bodies.remove(x)}else if(x.zpp_inner.space!=null){x.zpp_inner.space.wrap_bodies.remove(x)}x.zpp_inner.compound=this;if(this.space!=null){this.space.addBody(x.zpp_inner)}return true}else{return false}},bodies_subber:function(x){x.zpp_inner.compound=null;if(this.space!=null){this.space.remBody(x.zpp_inner)}},constraints_adder:function(x){if(x.zpp_inner.compound!=this){if(x.zpp_inner.compound!=null){x.zpp_inner.compound.wrap_constraints.remove(x)}else if(x.zpp_inner.space!=null){x.zpp_inner.space.wrap_constraints.remove(x)}x.zpp_inner.compound=this;if(this.space!=null){this.space.addConstraint(x.zpp_inner)}return true}else{return false}},constraints_subber:function(x){x.zpp_inner.compound=null;if(this.space!=null){this.space.remConstraint(x.zpp_inner)}},compounds_adder:function(x){if(x.zpp_inner.compound!=this){if(x.zpp_inner.compound!=null){x.zpp_inner.compound.wrap_compounds.remove(x)}else if(x.zpp_inner.space!=null){x.zpp_inner.space.wrap_compounds.remove(x)}x.zpp_inner.compound=this;x.zpp_inner.depth=this.depth+1;if(this.space!=null){this.space.addCompound(x.zpp_inner)}return true}else{return false}},compounds_subber:function(x){x.zpp_inner.compound=null;x.zpp_inner.depth=1;if(this.space!=null){this.space.remCompound(x.zpp_inner)}},__class__:zpp_$nape_phys_ZPP_$Compound});var zpp_$nape_phys_ZPP_$FluidProperties=function(){this.wrap_gravity=null;this.gravityy=0;this.gravityx=0;this.density=0;this.viscosity=0;this.shapes=null;this.outer=null;this.next=null;this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape;this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityx=0;this.gravityy=0};$hxClasses["zpp_nape.phys.ZPP_FluidProperties"]=zpp_$nape_phys_ZPP_$FluidProperties;zpp_$nape_phys_ZPP_$FluidProperties.__name__="zpp_nape.phys.ZPP_FluidProperties";zpp_$nape_phys_ZPP_$FluidProperties.prototype={next:null,outer:null,wrapper:function(){if(this.outer==null){this.outer=new nape_phys_FluidProperties;var o=this.outer.zpp_inner;o.outer=null;o.next=zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool;zpp_$nape_phys_ZPP_$FluidProperties.zpp_pool=o;this.outer.zpp_inner=this}return this.outer},shapes:null,viscosity:null,density:null,gravityx:null,gravityy:null,wrap_gravity:null,gravity_invalidate:function(x){this.gravityx=x.x;this.gravityy=x.y;this.invalidate()},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},getgravity:function(){var x=this.gravityx;var y=this.gravityy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_gravity=ret;this.wrap_gravity.zpp_inner._inuse=true;this.wrap_gravity.zpp_inner._invalidate=$bind(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=$bind(this,this.gravity_validate)},invalidate:function(){var cx_ite=this.shapes.head;while(cx_ite!=null){cx_ite.elt.invalidate_fluidprops();cx_ite=cx_ite.next}},__class__:zpp_$nape_phys_ZPP_$FluidProperties};var zpp_$nape_phys_ZPP_$Material=function(){this.rollingFriction=0;this.elasticity=0;this.density=0;this.staticFriction=0;this.dynamicFriction=0;this.shapes=null;this.outer=null;this.next=null;this.shapes=new zpp_$nape_util_ZNPList_$ZPP_$Shape;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=.001;this.rollingFriction=.01};$hxClasses["zpp_nape.phys.ZPP_Material"]=zpp_$nape_phys_ZPP_$Material;zpp_$nape_phys_ZPP_$Material.__name__="zpp_nape.phys.ZPP_Material";zpp_$nape_phys_ZPP_$Material.prototype={next:null,outer:null,wrapper:function(){if(this.outer==null){this.outer=new nape_phys_Material;var o=this.outer.zpp_inner;o.outer=null;o.next=zpp_$nape_phys_ZPP_$Material.zpp_pool;zpp_$nape_phys_ZPP_$Material.zpp_pool=o;this.outer.zpp_inner=this}return this.outer},shapes:null,dynamicFriction:null,staticFriction:null,density:null,elasticity:null,rollingFriction:null,set:function(x){this.dynamicFriction=x.dynamicFriction;this.staticFriction=x.staticFriction;this.density=x.density;this.elasticity=x.elasticity;this.rollingFriction=x.rollingFriction},invalidate:function(x){var cx_ite=this.shapes.head;while(cx_ite!=null){cx_ite.elt.invalidate_material(x);cx_ite=cx_ite.next}},__class__:zpp_$nape_phys_ZPP_$Material};var zpp_$nape_shape_ZPP_$Shape=function(type){this.zip_aabb=false;this.aabb=null;this.pairs=null;this.node=null;this.sweep=null;this.sensorEnabled=false;this.fluidEnabled=false;this.fluidProperties=null;this.filter=null;this.material=null;this.refmaterial=null;this.polygon=null;this.circle=null;this.sweepCoef=0;this.zip_sweepRadius=false;this.sweepRadius=0;this.wrap_worldCOM=null;this.wrap_localCOM=null;this.zip_worldCOM=false;this.worldCOMy=0;this.worldCOMx=0;this.zip_localCOM=false;this.localCOMy=0;this.localCOMx=0;this.zip_angDrag=false;this.angDrag=0;this.inertia=0;this.zip_area_inertia=false;this.area=0;this.type=0;this.body=null;this.outer=null;zpp_$nape_phys_ZPP_$Interactor.call(this);this.pairs=new zpp_$nape_util_ZNPList_$ZPP_$AABBPair;this.ishape=this;this.type=type;var ret;if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$AABB}else{ret=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=ret.next;ret.next=null}ret.minx=0;ret.miny=0;ret.maxx=0;ret.maxy=0;this.aabb=ret;this.aabb._immutable=true;this.aabb._validate=$bind(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=true;this.localCOMx=0;this.localCOMy=0;this.worldCOMx=0;this.worldCOMy=0;this.fluidEnabled=false;this.sensorEnabled=false;this.fluidProperties=null;this.body=null;this.refmaterial=new zpp_$nape_phys_ZPP_$Material;this.sweepRadius=this.sweepCoef=0};$hxClasses["zpp_nape.shape.ZPP_Shape"]=zpp_$nape_shape_ZPP_$Shape;zpp_$nape_shape_ZPP_$Shape.__name__="zpp_nape.shape.ZPP_Shape";zpp_$nape_shape_ZPP_$Shape.__super__=zpp_$nape_phys_ZPP_$Interactor;zpp_$nape_shape_ZPP_$Shape.prototype=$extend(zpp_$nape_phys_ZPP_$Interactor.prototype,{outer:null,body:null,type:null,area:null,zip_area_inertia:null,inertia:null,angDrag:null,zip_angDrag:null,localCOMx:null,localCOMy:null,zip_localCOM:null,worldCOMx:null,worldCOMy:null,zip_worldCOM:null,wrap_localCOM:null,wrap_worldCOM:null,sweepRadius:null,zip_sweepRadius:null,sweepCoef:null,validate_sweepRadius:function(){if(this.zip_sweepRadius){this.zip_sweepRadius=false;if(this.type==0){this.circle.__validate_sweepRadius()}else{this.polygon.__validate_sweepRadius()}}},circle:null,polygon:null,refmaterial:null,material:null,filter:null,fluidProperties:null,fluidEnabled:null,sensorEnabled:null,sweep:null,node:null,pairs:null,aabb:null,zip_aabb:null,validate_area_inertia:function(){if(this.zip_area_inertia){this.zip_area_inertia=false;if(this.type==0){this.circle.__validate_area_inertia()}else{this.polygon.__validate_area_inertia()}}},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction){this.zip_angDrag=false;this.refmaterial.dynamicFriction=this.material.dynamicFriction;if(this.type==0){this.circle.__validate_angDrag()}else{this.polygon.__validate_angDrag()}}},getworldCOM:function(){if(this.zip_worldCOM){if(this.body!=null){this.zip_worldCOM=false;if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1){var _this=this.polygon;if(_this.lverts.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y}else if(_this.lverts.next.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y;_this.localCOMx+=_this.lverts.next.next.x;_this.localCOMy+=_this.lverts.next.next.y;_this.localCOMx*=.5;_this.localCOMy*=.5}else{_this.localCOMx=0;_this.localCOMy=0;var area=0;var cx_ite=_this.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf;_this.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1;_this.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this.localCOMx+=(w1.x+w2.x)*cf2;_this.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this.localCOMx*=t;_this.localCOMy*=t}}if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}var _this1=this.body;if(_this1.zip_axis){_this1.zip_axis=false;_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx;this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},invalidate_area_inertia:function(){this.zip_area_inertia=true;if(this.body!=null){var _this=this.body;_this.zip_localCOM=true;_this.zip_worldCOM=true;this.body.invalidate_mass();this.body.invalidate_inertia()}},invalidate_angDrag:function(){this.zip_angDrag=true},invalidate_localCOM:function(){this.zip_localCOM=true;this.invalidate_area_inertia();if(this.type==0){this.zip_sweepRadius=true}this.invalidate_angDrag();this.invalidate_worldCOM();if(this.body!=null){var _this=this.body;_this.zip_localCOM=true;_this.zip_worldCOM=true}},invalidate_worldCOM:function(){this.zip_worldCOM=true;this.zip_aabb=true;if(this.body!=null){this.body.zip_aabb=true}},invalidate_material:function(flags){if((flags&zpp_$nape_phys_ZPP_$Material.WAKE)!=0){this.wake()}if((flags&zpp_$nape_phys_ZPP_$Material.ARBITERS)!=0){if(this.body!=null){this.body.refreshArbiters()}}if((flags&zpp_$nape_phys_ZPP_$Material.PROPS)!=0){if(this.body!=null){var _this=this.body;_this.zip_localCOM=true;_this.zip_worldCOM=true;this.body.invalidate_mass();this.body.invalidate_inertia()}}if((flags&zpp_$nape_phys_ZPP_$Material.ANGDRAG)!=0){this.invalidate_angDrag()}this.refmaterial.set(this.material)},invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){if(this.fluidEnabled){this.wake()}},aabb_validate:function(){if(this.zip_aabb){if(this.body!=null){this.zip_aabb=false;if(this.type==0){var _this=this.circle;if(_this.zip_worldCOM){if(_this.body!=null){_this.zip_worldCOM=false;if(_this.zip_localCOM){_this.zip_localCOM=false;if(_this.type==1){var _this1=_this.polygon;if(_this1.lverts.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y}else if(_this1.lverts.next.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y;_this1.localCOMx+=_this1.lverts.next.next.x;_this1.localCOMy+=_this1.lverts.next.next.y;_this1.localCOMx*=.5;_this1.localCOMy*=.5}else{_this1.localCOMx=0;_this1.localCOMy=0;var area=0;var cx_ite=_this1.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf;_this1.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this1.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1;_this1.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this1.localCOMx+=(w1.x+w2.x)*cf2;_this1.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this1.localCOMx*=t;_this1.localCOMy*=t}}if(_this.wrap_localCOM!=null){_this.wrap_localCOM.zpp_inner.x=_this.localCOMx;_this.wrap_localCOM.zpp_inner.y=_this.localCOMy}}var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}var rx=_this.radius;var ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx;_this.aabb.miny=_this.worldCOMy-ry;_this.aabb.maxx=_this.worldCOMx+rx;_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=this.polygon;if(_this3.zip_gverts){if(_this3.body!=null){_this3.zip_gverts=false;_this3.validate_lverts();var _this4=_this3.body;if(_this4.zip_axis){_this4.zip_axis=false;_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}var li=_this3.lverts.next;var cx_ite1=_this3.gverts.next;while(cx_ite1!=null){var g=cx_ite1;var l=li;li=li.next;g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y);g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy);cx_ite1=cx_ite1.next}}}var p0=_this3.gverts.next;_this3.aabb.minx=p0.x;_this3.aabb.miny=p0.y;_this3.aabb.maxx=p0.x;_this3.aabb.maxy=p0.y;var cx_ite2=_this3.gverts.next.next;while(cx_ite2!=null){var p=cx_ite2;if(p.x<_this3.aabb.minx){_this3.aabb.minx=p.x}if(p.x>_this3.aabb.maxx){_this3.aabb.maxx=p.x}if(p.y<_this3.aabb.miny){_this3.aabb.miny=p.y}if(p.y>_this3.aabb.maxy){_this3.aabb.maxy=p.y}cx_ite2=cx_ite2.next}}}}},setMaterial:function(material){if(this.material!=material){if(this.body!=null&&this.body.space!=null){if(this.material!=null){this.material.shapes.remove(this)}}this.material=material;if(this.body!=null&&this.body.space!=null){material.shapes.add(this)}this.wake();if(this.body!=null){this.body.refreshArbiters()}}},setFilter:function(filter){if(this.filter!=filter){if(this.body!=null&&this.body.space!=null){if(this.filter!=null){this.filter.shapes.remove(this)}}this.filter=filter;if(this.body!=null&&this.body.space!=null){filter.shapes.add(this)}this.wake()}},setFluid:function(fluid){if(this.fluidProperties!=fluid){if(this.body!=null&&this.body.space!=null){if(this.fluidProperties!=null){this.fluidProperties.shapes.remove(this)}}this.fluidProperties=fluid;if(this.body!=null&&this.body.space!=null){fluid.shapes.add(this)}if(this.fluidEnabled){this.wake()}}},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=true;if(this.body!=null){this.body.zip_aabb=true}},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);if(this.fluidProperties!=null){this.fluidProperties.shapes.add(this)}},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);if(this.fluidProperties!=null){this.fluidProperties.shapes.remove(this)}},__class__:zpp_$nape_shape_ZPP_$Shape});var zpp_$nape_shape_ZPP_$Circle=function(){this.radius=0;this.outer_zn=null;zpp_$nape_shape_ZPP_$Shape.call(this,0);this.circle=this;this.zip_localCOM=false};$hxClasses["zpp_nape.shape.ZPP_Circle"]=zpp_$nape_shape_ZPP_$Circle;zpp_$nape_shape_ZPP_$Circle.__name__="zpp_nape.shape.ZPP_Circle";zpp_$nape_shape_ZPP_$Circle.__super__=zpp_$nape_shape_ZPP_$Shape;zpp_$nape_shape_ZPP_$Circle.prototype=$extend(zpp_$nape_shape_ZPP_$Shape.prototype,{outer_zn:null,radius:null,invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=true;if(this.body!=null){this.body.zip_aabb=true}if(this.body!=null){this.body.wake()}},localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(x){this.localCOMx=x.x;this.localCOMy=x.y;this.invalidate_localCOM();if(this.body!=null){this.body.wake()}},setupLocalCOM:function(){var x=this.localCOMx;var y=this.localCOMy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_localCOM=ret;this.wrap_localCOM.zpp_inner._inuse=true;this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate)},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var r2=this.radius*this.radius;this.area=r2*Math.PI;this.inertia=r2*.5+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var lc=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy;var r2=this.radius*this.radius;this.angDrag=(lc+2*r2)*(this.material.dynamicFriction*nape_Config.fluidAngularDragFriction)+.5*nape_Config.fluidAngularDrag*(1+nape_Config.fluidVacuumDrag)*lc;this.angDrag/=2*(lc+.5*r2)},__class__:zpp_$nape_shape_ZPP_$Circle});var zpp_$nape_shape_ZPP_$Edge=function(){this.tp1=0;this.tp0=0;this.gp1=null;this.lp1=null;this.gp0=null;this.lp0=null;this.gprojection=0;this.lprojection=0;this.length=0;this.wrap_gnorm=null;this.gnormy=0;this.gnormx=0;this.wrap_lnorm=null;this.lnormy=0;this.lnormx=0;this.outer=null;this.polygon=null;this.next=null;this.lnormx=0;this.lnormy=0;this.gnormx=0;this.gnormy=0;this.length=0;this.lprojection=0;this.gprojection=0};$hxClasses["zpp_nape.shape.ZPP_Edge"]=zpp_$nape_shape_ZPP_$Edge;zpp_$nape_shape_ZPP_$Edge.__name__="zpp_nape.shape.ZPP_Edge";zpp_$nape_shape_ZPP_$Edge.prototype={next:null,polygon:null,outer:null,wrapper:function(){if(this.outer==null){zpp_$nape_shape_ZPP_$Edge.internal=true;this.outer=new nape_shape_Edge;zpp_$nape_shape_ZPP_$Edge.internal=false;this.outer.zpp_inner=this}return this.outer},lnormx:null,lnormy:null,wrap_lnorm:null,gnormx:null,gnormy:null,wrap_gnorm:null,length:null,lprojection:null,gprojection:null,lp0:null,gp0:null,lp1:null,gp1:null,tp0:null,tp1:null,__class__:zpp_$nape_shape_ZPP_$Edge};var zpp_$nape_shape_ZPP_$Polygon=function(){this.zip_sanitation=false;this.zip_valid=false;this.zip_gaxi=false;this.zip_gverts=false;this.zip_laxi=false;this.zip_lverts=false;this.reverse_flag=false;this.edgeCnt=0;this.wrap_edges=null;this.edges=null;this.wrap_gverts=null;this.gverts=null;this.wrap_lverts=null;this.lverts=null;this.outer_zn=null;zpp_$nape_shape_ZPP_$Shape.call(this,1);this.polygon=this;this.lverts=new zpp_$nape_geom_ZPP_$Vec2;this.gverts=new zpp_$nape_geom_ZPP_$Vec2;this.edges=new zpp_$nape_util_ZNPList_$ZPP_$Edge;this.edgeCnt=0};$hxClasses["zpp_nape.shape.ZPP_Polygon"]=zpp_$nape_shape_ZPP_$Polygon;zpp_$nape_shape_ZPP_$Polygon.__name__="zpp_nape.shape.ZPP_Polygon";zpp_$nape_shape_ZPP_$Polygon.__super__=zpp_$nape_shape_ZPP_$Shape;zpp_$nape_shape_ZPP_$Polygon.prototype=$extend(zpp_$nape_shape_ZPP_$Shape.prototype,{outer_zn:null,lverts:null,wrap_lverts:null,gverts:null,wrap_gverts:null,edges:null,wrap_edges:null,edgeCnt:null,reverse_flag:null,lverts_pa_invalidate:function(x){this.invalidate_lverts()},gverts_pa_validate:function(){if(this.zip_gverts){if(this.body!=null){this.zip_gverts=false;this.validate_lverts();var _this=this.body;if(_this.zip_axis){_this.zip_axis=false;_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}var li=this.lverts.next;var cx_ite=this.gverts.next;while(cx_ite!=null){var g=cx_ite;var l=li;li=li.next;g.x=this.body.posx+(this.body.axisy*l.x-this.body.axisx*l.y);g.y=this.body.posy+(l.x*this.body.axisx+l.y*this.body.axisy);cx_ite=cx_ite.next}}}},lverts_post_adder:function(x){x.zpp_inner._invalidate=$bind(this,this.lverts_pa_invalidate);var ite=null;var ite2=null;var cx_ite=this.lverts.next;while(cx_ite!=null){if(cx_ite==x.zpp_inner){break}else{ite=ite==null?this.gverts.next:ite.next;ite2=ite2==null?this.edges.head:ite2.next}cx_ite=cx_ite.next}var ret;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Vec2}else{ret=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.weak=false;ret._immutable=true;ret.x=0;ret.y=0;var vec=ret;this.gverts.insert(ite,vec);if(this.lverts.next.next!=null){if(this.lverts.next.next.next==null){var ed;if(zpp_$nape_shape_ZPP_$Edge.zpp_pool==null){ed=new zpp_$nape_shape_ZPP_$Edge}else{ed=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=ed.next;ed.next=null}ed.polygon=this;this.edges.add(ed);var ed1;if(zpp_$nape_shape_ZPP_$Edge.zpp_pool==null){ed1=new zpp_$nape_shape_ZPP_$Edge}else{ed1=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=ed1.next;ed1.next=null}ed1.polygon=this;this.edges.add(ed1);this.edgeCnt+=2}else{var ed2;if(zpp_$nape_shape_ZPP_$Edge.zpp_pool==null){ed2=new zpp_$nape_shape_ZPP_$Edge}else{ed2=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=ed2.next;ed2.next=null}ed2.polygon=this;this.edges.insert(ite2,ed2);this.edgeCnt++}}vec._validate=$bind(this,this.gverts_pa_validate)},lverts_subber:function(x){this.cleanup_lvert(x.zpp_inner)},lverts_invalidate:function(_){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=zpp_$nape_util_ZPP_$MixVec2List.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=$bind(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=$bind(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=$bind(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=$bind(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},zip_lverts:null,invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();this.zip_lverts=true;this.zip_valid=true;this.zip_sanitation=true;if(this.body!=null){this.body.wake()}},zip_laxi:null,invalidate_laxi:function(){this.invalidate_gaxi();this.zip_sweepRadius=true;this.zip_laxi=true},zip_gverts:null,invalidate_gverts:function(){this.zip_aabb=true;if(this.body!=null){this.body.zip_aabb=true}this.zip_gverts=true},zip_gaxi:null,invalidate_gaxi:function(){this.zip_gaxi=true},zip_valid:null,validate_lverts:function(){if(this.zip_lverts){this.zip_lverts=false;if(this.lverts.length>2){this.validate_area_inertia();if(this.area<0){this.reverse_vertices();this.area=-this.area}}}},cleanup_lvert:function(x){var ite=null;var ite2=null;var cx_ite=this.lverts.next;while(cx_ite!=null){if(cx_ite==x){break}else{ite=ite==null?this.gverts.next:ite.next;ite2=ite2==null?this.edges.head:ite2.next}cx_ite=cx_ite.next}var rem=ite==null?this.gverts.next:ite.next;this.gverts.erase(ite);var o=rem;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o._isimmutable=null;o._validate=null;o._invalidate=null;o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o;if(this.edgeCnt==2){var rem1=this.edges.pop_unsafe();var o1=rem1;o1.polygon=null;o1.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=o1;rem1=this.edges.pop_unsafe();var o2=rem1;o2.polygon=null;o2.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=o2;this.edgeCnt=0}else if(this.edgeCnt!=0){var rem2=ite2==null?this.edges.head.elt:ite2.next.elt;this.edges.erase(ite2);var o3=rem2;o3.polygon=null;o3.next=zpp_$nape_shape_ZPP_$Edge.zpp_pool;zpp_$nape_shape_ZPP_$Edge.zpp_pool=o3;this.edgeCnt--}},zip_sanitation:null,splice_collinear_real:function(){if(this.lverts.next==null){return}if(this.lverts.next.next==null){return}if(this.lverts.next.next.next==null){return}var pre=null;var cur=this.lverts.next;while(cur!=null){var u=cur;var v=cur.next==null?this.lverts.next:cur.next;var dx=0;var dy=0;dx=u.x-v.x;dy=u.y-v.y;if(dx*dx+dy*dy<nape_Config.epsilon*nape_Config.epsilon){this.cleanup_lvert(cur);cur=this.lverts.erase(pre)}else{pre=cur;cur=cur.next}}if(this.lverts.next==null){return}var removed;while(true){removed=false;var pre1=this.lverts.next;while(pre1!=null){var cur1=pre1.next==null?this.lverts.next:pre1.next;var u1=pre1;var v1=cur1;var w=cur1.next==null?this.lverts.next:cur1.next;var ax=0;var ay=0;ax=v1.x-u1.x;ay=v1.y-u1.y;var bx=0;var by=0;bx=w.x-v1.x;by=w.y-v1.y;var crs=by*ax-bx*ay;if(crs*crs>=nape_Config.epsilon*nape_Config.epsilon){pre1=pre1.next}else{this.cleanup_lvert(cur1);this.lverts.erase(pre1.next==null?null:pre1);removed=true;pre1=pre1.next}}if(!removed){break}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();this.edges.reverse();var ite=this.edges.iterator_at(this.edgeCnt-1);var elem=this.edges.pop_unsafe();this.edges.insert(ite,elem);this.reverse_flag=!this.reverse_flag;if(this.wrap_lverts!=null){this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag}if(this.wrap_gverts!=null){this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag}if(this.wrap_edges!=null){this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag}},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=false;this.validate_lverts();var ite=this.edges.head;var cx_ite=this.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var v=cx_ite;var edge=ite.elt;ite=ite.next;edge.lp0=u;edge.lp1=v;var dx=0;var dy=0;dx=u.x-v.x;dy=u.y-v.y;var l=Math.sqrt(dx*dx+dy*dy);edge.length=l;var t=1/l;dx*=t;dy*=t;var t1=dx;dx=-dy;dy=t1;edge.lprojection=dx*u.x+dy*u.y;edge.lnormx=dx;edge.lnormy=dy;if(edge.wrap_lnorm!=null){edge.wrap_lnorm.zpp_inner.x=dx;edge.wrap_lnorm.zpp_inner.y=dy}u=v;cx_ite=cx_ite.next}var v1=this.lverts.next;var edge1=ite.elt;edge1.lp0=u;edge1.lp1=v1;var dx1=0;var dy1=0;dx1=u.x-v1.x;dy1=u.y-v1.y;var l1=Math.sqrt(dx1*dx1+dy1*dy1);edge1.length=l1;var t2=1/l1;dx1*=t2;dy1*=t2;var t3=dx1;dx1=-dy1;dy1=t3;edge1.lprojection=dx1*u.x+dy1*u.y;edge1.lnormx=dx1;edge1.lnormy=dy1;if(edge1.wrap_lnorm!=null){edge1.wrap_lnorm.zpp_inner.x=dx1;edge1.wrap_lnorm.zpp_inner.y=dy1}}},__validate_sweepRadius:function(){var maxRadius=0;var minRadius=0;this.validate_laxi();var cx_ite=this.lverts.next;while(cx_ite!=null){var x=cx_ite;var r=x.x*x.x+x.y*x.y;if(r>maxRadius){maxRadius=r}cx_ite=cx_ite.next}var cx_ite1=this.edges.head;while(cx_ite1!=null){var e=cx_ite1.elt;if(e.lprojection<minRadius){minRadius=e.lprojection;if(minRadius<0){break}}cx_ite1=cx_ite1.next}if(minRadius<0){minRadius=0}this.sweepRadius=Math.sqrt(maxRadius);this.sweepCoef=this.sweepRadius-minRadius},__validate_area_inertia:function(){if(this.lverts.next==null||this.lverts.next.next==null||this.lverts.next.next.next==null){this.area=0;this.inertia=0}else{this.area=0;var s1=0;var s2=0;var cx_ite=this.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;var a=v.y*u.x-v.x*u.y;s1+=a*(v.x*v.x+v.y*v.y+(v.x*u.x+v.y*u.y)+(u.x*u.x+u.y*u.y));s2+=a;this.area+=v.x*(w.y-u.y);u=v;v=w;cx_ite=cx_ite.next}cx_ite=this.lverts.next;var w1=cx_ite;var a1=v.y*u.x-v.x*u.y;s1+=a1*(v.x*v.x+v.y*v.y+(v.x*u.x+v.y*u.y)+(u.x*u.x+u.y*u.y));s2+=a1;this.area+=v.x*(w1.y-u.y);u=v;cx_ite=cx_ite.next;var a2=w1.y*u.x-w1.x*u.y;s1+=a2*(w1.x*w1.x+w1.y*w1.y+(w1.x*u.x+w1.y*u.y)+(u.x*u.x+u.y*u.y));s2+=a2;this.area+=w1.x*(cx_ite.y-u.y);this.inertia=s1/(6*s2);this.area*=.5;if(this.area<0){this.area=-this.area;this.reverse_vertices()}}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();var accum=0;var ei=this.edges.head;var perim=0;var cx_itei=this.lverts.next;var u=cx_itei;var cx_itej=cx_itei.next;while(cx_itej!=null){var v=cx_itej;var edge=ei.elt;ei=ei.next;perim+=edge.length;var dx=0;var dy=0;dx=v.x-u.x;dy=v.y-u.y;accum+=edge.length*nape_Config.fluidAngularDragFriction*this.material.dynamicFriction*edge.lprojection*edge.lprojection;var t=-(u.y*edge.lnormx-u.x*edge.lnormy)/(dy*edge.lnormx-dx*edge.lnormy);if(t>0){var ta=t>1?1:t;var cx=0;var cy=0;cx=u.x;cy=u.y;var t1=ta;cx+=dx*t1;cy+=dy*t1;var dota=edge.lnormy*u.x-edge.lnormx*u.y;var dotb=edge.lnormy*cx-edge.lnormx*cy;accum+=(dotb*dotb*dotb-dota*dota*dota)/(3*(dotb-dota))*ta*edge.length*nape_Config.fluidAngularDrag}if(t<1){var tb=t<0?0:t;var cx1=0;var cy1=0;cx1=u.x;cy1=u.y;var t2=tb;cx1+=dx*t2;cy1+=dy*t2;var dota1=edge.lnormy*cx1-edge.lnormx*cy1;var dotb1=edge.lnormy*v.x-edge.lnormx*v.y;accum+=(dotb1*dotb1*dotb1-dota1*dota1*dota1)/(3*(dotb1-dota1))*nape_Config.fluidVacuumDrag*(1-tb)*edge.length*nape_Config.fluidAngularDrag}cx_itei=cx_itej;u=v;cx_itej=cx_itej.next}while(true){cx_itej=this.lverts.next;var v1=cx_itej;var edge1=ei.elt;ei=ei.next;perim+=edge1.length;var dx1=0;var dy1=0;dx1=v1.x-u.x;dy1=v1.y-u.y;accum+=edge1.length*nape_Config.fluidAngularDragFriction*this.material.dynamicFriction*edge1.lprojection*edge1.lprojection;var t3=-(u.y*edge1.lnormx-u.x*edge1.lnormy)/(dy1*edge1.lnormx-dx1*edge1.lnormy);if(t3>0){var ta1=t3>1?1:t3;var cx2=0;var cy2=0;cx2=u.x;cy2=u.y;var t4=ta1;cx2+=dx1*t4;cy2+=dy1*t4;var dota2=edge1.lnormy*u.x-edge1.lnormx*u.y;var dotb2=edge1.lnormy*cx2-edge1.lnormx*cy2;accum+=(dotb2*dotb2*dotb2-dota2*dota2*dota2)/(3*(dotb2-dota2))*ta1*edge1.length*nape_Config.fluidAngularDrag}if(t3<1){var tb1=t3<0?0:t3;var cx3=0;var cy3=0;cx3=u.x;cy3=u.y;var t5=tb1;cx3+=dx1*t5;cy3+=dy1*t5;var dota3=edge1.lnormy*cx3-edge1.lnormx*cy3;var dotb3=edge1.lnormy*v1.x-edge1.lnormx*v1.y;accum+=(dotb3*dotb3*dotb3-dota3*dota3*dota3)/(3*(dotb3-dota3))*nape_Config.fluidVacuumDrag*(1-tb1)*edge1.length*nape_Config.fluidAngularDrag}break}this.angDrag=accum/(this.inertia*perim)},localCOM_validate:function(){if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1){var _this=this.polygon;if(_this.lverts.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y}else if(_this.lverts.next.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y;_this.localCOMx+=_this.lverts.next.next.x;_this.localCOMy+=_this.lverts.next.next.y;_this.localCOMx*=.5;_this.localCOMy*=.5}else{_this.localCOMx=0;_this.localCOMy=0;var area=0;var cx_ite=_this.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf;_this.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1;_this.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this.localCOMx+=(w1.x+w2.x)*cf2;_this.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this.localCOMx*=t;_this.localCOMy*=t}}if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}},localCOM_invalidate:function(x){if(this.zip_localCOM){this.zip_localCOM=false;if(this.type==1){var _this=this.polygon;if(_this.lverts.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y}else if(_this.lverts.next.next.next==null){_this.localCOMx=_this.lverts.next.x;_this.localCOMy=_this.lverts.next.y;_this.localCOMx+=_this.lverts.next.next.x;_this.localCOMy+=_this.lverts.next.next.y;_this.localCOMx*=.5;_this.localCOMy*=.5}else{_this.localCOMx=0;_this.localCOMy=0;var area=0;var cx_ite=_this.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this.localCOMx+=(v.x+w.x)*cf;_this.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this.localCOMx+=(v.x+w1.x)*cf1;_this.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this.localCOMx+=(w1.x+w2.x)*cf2;_this.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this.localCOMx*=t;_this.localCOMy*=t}}if(this.wrap_localCOM!=null){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy}}var delx=0;var dely=0;delx=x.x-this.localCOMx;dely=x.y-this.localCOMy;var cx_ite1=this.lverts.next;while(cx_ite1!=null){var p=cx_ite1;p.x+=delx;p.y+=dely;cx_ite1=cx_ite1.next}this.invalidate_lverts()},setupLocalCOM:function(){var x=this.localCOMx;var y=this.localCOMy;if(y==null){y=0}if(x==null){x=0}var ret;if(zpp_$nape_util_ZPP_$PubPool.poolVec2==null){ret=new nape_geom_Vec2}else{ret=zpp_$nape_util_ZPP_$PubPool.poolVec2;zpp_$nape_util_ZPP_$PubPool.poolVec2=ret.zpp_pool;ret.zpp_pool=null}if(ret.zpp_inner==null){var ret1;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret1=new zpp_$nape_geom_ZPP_$Vec2}else{ret1=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret1.next;ret1.next=null}ret1.weak=false;ret1._immutable=false;ret1.x=x;ret1.y=y;ret.zpp_inner=ret1;ret.zpp_inner.outer=ret}else{var tmp;var _this=ret.zpp_inner;if(_this._validate!=null){_this._validate()}if(ret.zpp_inner.x==x){var _this1=ret.zpp_inner;if(_this1._validate!=null){_this1._validate()}tmp=ret.zpp_inner.y==y}else{tmp=false}if(!tmp){ret.zpp_inner.x=x;ret.zpp_inner.y=y;var _this2=ret.zpp_inner;if(_this2._invalidate!=null){_this2._invalidate(_this2)}}}ret.zpp_inner.weak=false;this.wrap_localCOM=ret;this.wrap_localCOM.zpp_inner._inuse=true;this.wrap_localCOM.zpp_inner._validate=$bind(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=$bind(this,this.localCOM_invalidate)},__class__:zpp_$nape_shape_ZPP_$Polygon});var zpp_$nape_space_ZPP_$Broadphase=function(){this.dynab=null;this.sweep=null;this.is_sweep=false;this.space=null};$hxClasses["zpp_nape.space.ZPP_Broadphase"]=zpp_$nape_space_ZPP_$Broadphase;zpp_$nape_space_ZPP_$Broadphase.__name__="zpp_nape.space.ZPP_Broadphase";zpp_$nape_space_ZPP_$Broadphase.prototype={space:null,is_sweep:null,sweep:null,dynab:null,insert:function(shape){if(this.is_sweep){this.sweep.__insert(shape)}else{this.dynab.__insert(shape)}},remove:function(shape){if(this.is_sweep){this.sweep.__remove(shape)}else{this.dynab.__remove(shape)}},sync:function(shape){if(this.is_sweep){if(!this.sweep.space.continuous){if(shape.zip_aabb){if(shape.body!=null){shape.zip_aabb=false;if(shape.type==0){var _this=shape.circle;if(_this.zip_worldCOM){if(_this.body!=null){_this.zip_worldCOM=false;if(_this.zip_localCOM){_this.zip_localCOM=false;if(_this.type==1){var _this1=_this.polygon;if(_this1.lverts.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y}else if(_this1.lverts.next.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y;_this1.localCOMx+=_this1.lverts.next.next.x;_this1.localCOMy+=_this1.lverts.next.next.y;_this1.localCOMx*=.5;_this1.localCOMy*=.5}else{_this1.localCOMx=0;_this1.localCOMy=0;var area=0;var cx_ite=_this1.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf;_this1.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this1.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1;_this1.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this1.localCOMx+=(w1.x+w2.x)*cf2;_this1.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this1.localCOMx*=t;_this1.localCOMy*=t}}if(_this.wrap_localCOM!=null){_this.wrap_localCOM.zpp_inner.x=_this.localCOMx;_this.wrap_localCOM.zpp_inner.y=_this.localCOMy}}var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}var rx=_this.radius;var ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx;_this.aabb.miny=_this.worldCOMy-ry;_this.aabb.maxx=_this.worldCOMx+rx;_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=shape.polygon;if(_this3.zip_gverts){if(_this3.body!=null){_this3.zip_gverts=false;_this3.validate_lverts();var _this4=_this3.body;if(_this4.zip_axis){_this4.zip_axis=false;_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}var li=_this3.lverts.next;var cx_ite1=_this3.gverts.next;while(cx_ite1!=null){var g=cx_ite1;var l=li;li=li.next;g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y);g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy);cx_ite1=cx_ite1.next}}}var p0=_this3.gverts.next;_this3.aabb.minx=p0.x;_this3.aabb.miny=p0.y;_this3.aabb.maxx=p0.x;_this3.aabb.maxy=p0.y;var cx_ite2=_this3.gverts.next.next;while(cx_ite2!=null){var p=cx_ite2;if(p.x<_this3.aabb.minx){_this3.aabb.minx=p.x}if(p.x>_this3.aabb.maxx){_this3.aabb.maxx=p.x}if(p.y<_this3.aabb.miny){_this3.aabb.miny=p.y}if(p.y>_this3.aabb.maxy){_this3.aabb.maxy=p.y}cx_ite2=cx_ite2.next}}}}}}else{var _this5=this.dynab;var node=shape.node;if(!node.synced){if(!_this5.space.continuous){if(shape.zip_aabb){if(shape.body!=null){shape.zip_aabb=false;if(shape.type==0){var _this6=shape.circle;if(_this6.zip_worldCOM){if(_this6.body!=null){_this6.zip_worldCOM=false;if(_this6.zip_localCOM){_this6.zip_localCOM=false;if(_this6.type==1){var _this7=_this6.polygon;if(_this7.lverts.next.next==null){_this7.localCOMx=_this7.lverts.next.x;_this7.localCOMy=_this7.lverts.next.y}else if(_this7.lverts.next.next.next==null){_this7.localCOMx=_this7.lverts.next.x;_this7.localCOMy=_this7.lverts.next.y;_this7.localCOMx+=_this7.lverts.next.next.x;_this7.localCOMy+=_this7.lverts.next.next.y;_this7.localCOMx*=.5;_this7.localCOMy*=.5}else{_this7.localCOMx=0;_this7.localCOMy=0;var area1=0;var cx_ite3=_this7.lverts.next;var u1=cx_ite3;cx_ite3=cx_ite3.next;var v1=cx_ite3;cx_ite3=cx_ite3.next;while(cx_ite3!=null){var w3=cx_ite3;area1+=v1.x*(w3.y-u1.y);var cf3=w3.y*v1.x-w3.x*v1.y;_this7.localCOMx+=(v1.x+w3.x)*cf3;_this7.localCOMy+=(v1.y+w3.y)*cf3;u1=v1;v1=w3;cx_ite3=cx_ite3.next}cx_ite3=_this7.lverts.next;var w4=cx_ite3;area1+=v1.x*(w4.y-u1.y);var cf4=w4.y*v1.x-w4.x*v1.y;_this7.localCOMx+=(v1.x+w4.x)*cf4;_this7.localCOMy+=(v1.y+w4.y)*cf4;u1=v1;cx_ite3=cx_ite3.next;var w5=cx_ite3;area1+=w4.x*(w5.y-u1.y);var cf5=w5.y*w4.x-w5.x*w4.y;_this7.localCOMx+=(w4.x+w5.x)*cf5;_this7.localCOMy+=(w4.y+w5.y)*cf5;area1=1/(3*area1);var t1=area1;_this7.localCOMx*=t1;_this7.localCOMy*=t1}}if(_this6.wrap_localCOM!=null){_this6.wrap_localCOM.zpp_inner.x=_this6.localCOMx;_this6.wrap_localCOM.zpp_inner.y=_this6.localCOMy}}var _this8=_this6.body;if(_this8.zip_axis){_this8.zip_axis=false;_this8.axisx=Math.sin(_this8.rot);_this8.axisy=Math.cos(_this8.rot)}_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy);_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy)}}var rx1=_this6.radius;var ry1=_this6.radius;_this6.aabb.minx=_this6.worldCOMx-rx1;_this6.aabb.miny=_this6.worldCOMy-ry1;_this6.aabb.maxx=_this6.worldCOMx+rx1;_this6.aabb.maxy=_this6.worldCOMy+ry1}else{var _this9=shape.polygon;if(_this9.zip_gverts){if(_this9.body!=null){_this9.zip_gverts=false;_this9.validate_lverts();var _this10=_this9.body;if(_this10.zip_axis){_this10.zip_axis=false;_this10.axisx=Math.sin(_this10.rot);_this10.axisy=Math.cos(_this10.rot)}var li1=_this9.lverts.next;var cx_ite4=_this9.gverts.next;while(cx_ite4!=null){var g1=cx_ite4;var l1=li1;li1=li1.next;g1.x=_this9.body.posx+(_this9.body.axisy*l1.x-_this9.body.axisx*l1.y);g1.y=_this9.body.posy+(l1.x*_this9.body.axisx+l1.y*_this9.body.axisy);cx_ite4=cx_ite4.next}}}var p01=_this9.gverts.next;_this9.aabb.minx=p01.x;_this9.aabb.miny=p01.y;_this9.aabb.maxx=p01.x;_this9.aabb.maxy=p01.y;var cx_ite5=_this9.gverts.next.next;while(cx_ite5!=null){var p1=cx_ite5;if(p1.x<_this9.aabb.minx){_this9.aabb.minx=p1.x}if(p1.x>_this9.aabb.maxx){_this9.aabb.maxx=p1.x}if(p1.y<_this9.aabb.miny){_this9.aabb.miny=p1.y}if(p1.y>_this9.aabb.maxy){_this9.aabb.maxy=p1.y}cx_ite5=cx_ite5.next}}}}}var sync;if(node.dyn==(shape.body.type==1?false:!shape.body.component.sleeping)){var _this11=node.aabb;var x=shape.aabb;sync=!(x.minx>=_this11.minx&&x.miny>=_this11.miny&&x.maxx<=_this11.maxx&&x.maxy<=_this11.maxy)}else{sync=true}if(sync){node.synced=true;node.snext=_this5.syncs;_this5.syncs=node}}}},broadphase:function(space,discrete){},clear:function(){},bodiesUnderPoint:function(x,y,filter,output){return null},__class__:zpp_$nape_space_ZPP_$Broadphase};var zpp_$nape_space_ZPP_$AABBNode=function(){this.first_sync=false;this.synced=false;this.snext=null;this.moved=false;this.mnext=null;this.next=null;this.height=0;this.child2=null;this.child1=null;this.parent=null;this.dyn=false;this.shape=null;this.aabb=null;this.height=-1};$hxClasses["zpp_nape.space.ZPP_AABBNode"]=zpp_$nape_space_ZPP_$AABBNode;zpp_$nape_space_ZPP_$AABBNode.__name__="zpp_nape.space.ZPP_AABBNode";zpp_$nape_space_ZPP_$AABBNode.prototype={aabb:null,shape:null,dyn:null,parent:null,child1:null,child2:null,height:null,next:null,mnext:null,moved:null,snext:null,synced:null,first_sync:null,__class__:zpp_$nape_space_ZPP_$AABBNode};var zpp_$nape_space_ZPP_$AABBPair=function(){this.next=null;this.arb=null;this.di=0;this.id=0;this.sleeping=false;this.first=false;this.n2=null;this.n1=null};$hxClasses["zpp_nape.space.ZPP_AABBPair"]=zpp_$nape_space_ZPP_$AABBPair;zpp_$nape_space_ZPP_$AABBPair.__name__="zpp_nape.space.ZPP_AABBPair";zpp_$nape_space_ZPP_$AABBPair.prototype={n1:null,n2:null,first:null,sleeping:null,id:null,di:null,arb:null,next:null,__class__:zpp_$nape_space_ZPP_$AABBPair};var zpp_$nape_space_ZPP_$AABBTree=function(){this.root=null};$hxClasses["zpp_nape.space.ZPP_AABBTree"]=zpp_$nape_space_ZPP_$AABBTree;zpp_$nape_space_ZPP_$AABBTree.__name__="zpp_nape.space.ZPP_AABBTree";zpp_$nape_space_ZPP_$AABBTree.prototype={root:null,clear:function(){if(this.root==null){return}var stack=null;this.root.next=stack;stack=this.root;while(stack!=null){var ret=stack;stack=ret.next;ret.next=null;if(ret.child1==null){ret.shape.node=null;ret.shape.removedFromSpace();ret.shape=null}else{if(ret.child1!=null){ret.child1.next=stack;stack=ret.child1}if(ret.child2!=null){ret.child2.next=stack;stack=ret.child2}}ret.height=-1;var o=ret.aabb;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o.wrap_min=o.wrap_max=null;o._invalidate=null;o._validate=null;o.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o;ret.child1=ret.child2=ret.parent=null;ret.next=null;ret.snext=null;ret.mnext=null;ret.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=ret}this.root=null},removeLeaf:function(leaf){if(leaf==this.root){this.root=null}else{var parent=leaf.parent;var gparent=parent.parent;var sibling=parent.child1==leaf?parent.child2:parent.child1;if(gparent!=null){if(gparent.child1==parent){gparent.child1=sibling}else{gparent.child2=sibling}sibling.parent=gparent;parent.height=-1;var o=parent.aabb;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o.wrap_min=o.wrap_max=null;o._invalidate=null;o._validate=null;o.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent;var node=gparent;while(node!=null){if(node.child1==null||node.height<2){node=node}else{var b=node.child1;var c=node.child2;var balance=c.height-b.height;if(balance>1){var f=c.child1;var g=c.child2;c.child1=node;c.parent=node.parent;node.parent=c;if(c.parent!=null){if(c.parent.child1==node){c.parent.child1=c}else{c.parent.child2=c}}else{this.root=c}if(f.height>g.height){c.child2=f;node.child2=g;g.parent=node;var _this=node.aabb;var a=b.aabb;var b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx;_this.miny=a.miny<b1.miny?a.miny:b1.miny;_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx;_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb;var a1=node.aabb;var b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx;_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny;_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx;_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height;var y=g.height;node.height=1+(x>y?x:y);var x1=node.height;var y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g;node.child2=f;f.parent=node;var _this2=node.aabb;var a2=b.aabb;var b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx;_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny;_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx;_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb;var a3=node.aabb;var b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx;_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny;_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx;_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height;var y2=f.height;node.height=1+(x2>y2?x2:y2);var x3=node.height;var y3=g.height;c.height=1+(x3>y3?x3:y3)}node=c}else if(balance<-1){var f1=b.child1;var g1=b.child2;b.child1=node;b.parent=node.parent;node.parent=b;if(b.parent!=null){if(b.parent.child1==node){b.parent.child1=b}else{b.parent.child2=b}}else{this.root=b}if(f1.height>g1.height){b.child2=f1;node.child1=g1;g1.parent=node;var _this4=node.aabb;var a4=c.aabb;var b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx;_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny;_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx;_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb;var a5=node.aabb;var b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx;_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny;_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx;_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height;var y4=g1.height;node.height=1+(x4>y4?x4:y4);var x5=node.height;var y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1;node.child1=f1;f1.parent=node;var _this6=node.aabb;var a6=c.aabb;var b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx;_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny;_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx;_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb;var a7=node.aabb;var b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx;_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny;_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx;_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height;var y6=f1.height;node.height=1+(x6>y6?x6:y6);var x7=node.height;var y7=g1.height;b.height=1+(x7>y7?x7:y7)}node=b}else{node=node}}var child1=node.child1;var child2=node.child2;var _this8=node.aabb;var a8=child1.aabb;var b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx;_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny;_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx;_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height;var y8=child2.height;node.height=1+(x8>y8?x8:y8);node=node.parent}}else{this.root=sibling;sibling.parent=null;parent.height=-1;var o1=parent.aabb;if(o1.outer!=null){o1.outer.zpp_inner=null;o1.outer=null}o1.wrap_min=o1.wrap_max=null;o1._invalidate=null;o1._validate=null;o1.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o1;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent}}},__class__:zpp_$nape_space_ZPP_$AABBTree};var zpp_$nape_space_ZPP_$DynAABBPhase=function(space){this.treeStack=null;this.moves=null;this.syncs=null;this.pairs=null;this.dtree=null;this.stree=null;zpp_$nape_space_ZPP_$Broadphase.call(this);this.space=space;this.is_sweep=false;this.dynab=this;this.stree=new zpp_$nape_space_ZPP_$AABBTree;this.dtree=new zpp_$nape_space_ZPP_$AABBTree};$hxClasses["zpp_nape.space.ZPP_DynAABBPhase"]=zpp_$nape_space_ZPP_$DynAABBPhase;zpp_$nape_space_ZPP_$DynAABBPhase.__name__="zpp_nape.space.ZPP_DynAABBPhase";zpp_$nape_space_ZPP_$DynAABBPhase.__super__=zpp_$nape_space_ZPP_$Broadphase;zpp_$nape_space_ZPP_$DynAABBPhase.prototype=$extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{stree:null,dtree:null,pairs:null,syncs:null,moves:null,__insert:function(shape){var node;if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool==null){node=new zpp_$nape_space_ZPP_$AABBNode}else{node=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=node.next;node.next=null}if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){node.aabb=new zpp_$nape_geom_ZPP_$AABB}else{node.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=node.aabb.next;node.aabb.next=null}node.moved=false;node.synced=false;node.first_sync=false;node.shape=shape;shape.node=node;node.synced=true;node.first_sync=true;node.snext=this.syncs;this.syncs=node},__remove:function(shape){var node=shape.node;if(!node.first_sync){if(node.dyn){this.dtree.removeLeaf(node)}else{this.stree.removeLeaf(node)}}shape.node=null;if(node.synced){var pre=null;var cur=this.syncs;while(cur!=null){if(cur==node){break}pre=cur;cur=cur.snext}if(pre==null){this.syncs=cur.snext}else{pre.snext=cur.snext}cur.snext=null;node.synced=false}if(node.moved){var pre1=null;var cur1=this.moves;while(cur1!=null){if(cur1==node){break}pre1=cur1;cur1=cur1.mnext}if(pre1==null){this.moves=cur1.mnext}else{pre1.mnext=cur1.mnext}cur1.mnext=null;node.moved=false}var pre2=null;var cur2=this.pairs;while(cur2!=null){var nxt=cur2.next;if(cur2.n1==node||cur2.n2==node){if(pre2==null){this.pairs=nxt}else{pre2.next=nxt}if(cur2.arb!=null){cur2.arb.pair=null}cur2.arb=null;cur2.n1.shape.pairs.remove(cur2);cur2.n2.shape.pairs.remove(cur2);var o=cur2;o.n1=o.n2=null;o.sleeping=false;o.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=o;cur2=nxt;continue}pre2=cur2;cur2=nxt}while(shape.pairs.head!=null){var cur3=shape.pairs.pop_unsafe();if(cur3.n1==node){cur3.n2.shape.pairs.remove(cur3)}else{cur3.n1.shape.pairs.remove(cur3)}if(cur3.arb!=null){cur3.arb.pair=null}cur3.arb=null;cur3.n1=cur3.n2=null;cur3.sleeping=false;cur3.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=cur3}node.height=-1;var o1=node.aabb;if(o1.outer!=null){o1.outer.zpp_inner=null;o1.outer=null}o1.wrap_min=o1.wrap_max=null;o1._invalidate=null;o1._validate=null;o1.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o1;node.child1=node.child2=node.parent=null;node.next=null;node.snext=null;node.mnext=null;node.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=node},sync_broadphase:function(){this.space.validation();if(this.syncs!=null){if(this.moves==null){var node=this.syncs;while(node!=null){var shape=node.shape;if(!node.first_sync){var tree=node.dyn?this.dtree:this.stree;if(node==tree.root){tree.root=null}else{var parent=node.parent;var gparent=parent.parent;var sibling=parent.child1==node?parent.child2:parent.child1;if(gparent!=null){if(gparent.child1==parent){gparent.child1=sibling}else{gparent.child2=sibling}sibling.parent=gparent;parent.height=-1;var o=parent.aabb;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o.wrap_min=o.wrap_max=null;o._invalidate=null;o._validate=null;o.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent;var node1=gparent;while(node1!=null){if(node1.child1==null||node1.height<2){node1=node1}else{var b=node1.child1;var c=node1.child2;var balance=c.height-b.height;if(balance>1){var f=c.child1;var g=c.child2;c.child1=node1;c.parent=node1.parent;node1.parent=c;if(c.parent!=null){if(c.parent.child1==node1){c.parent.child1=c}else{c.parent.child2=c}}else{tree.root=c}if(f.height>g.height){c.child2=f;node1.child2=g;g.parent=node1;var _this=node1.aabb;var a=b.aabb;var b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx;_this.miny=a.miny<b1.miny?a.miny:b1.miny;_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx;_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb;var a1=node1.aabb;var b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx;_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny;_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx;_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height;var y=g.height;node1.height=1+(x>y?x:y);var x1=node1.height;var y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g;node1.child2=f;f.parent=node1;var _this2=node1.aabb;var a2=b.aabb;var b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx;_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny;_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx;_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb;var a3=node1.aabb;var b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx;_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny;_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx;_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height;var y2=f.height;node1.height=1+(x2>y2?x2:y2);var x3=node1.height;var y3=g.height;c.height=1+(x3>y3?x3:y3)}node1=c}else if(balance<-1){var f1=b.child1;var g1=b.child2;b.child1=node1;b.parent=node1.parent;node1.parent=b;if(b.parent!=null){if(b.parent.child1==node1){b.parent.child1=b}else{b.parent.child2=b}}else{tree.root=b}if(f1.height>g1.height){b.child2=f1;node1.child1=g1;g1.parent=node1;var _this4=node1.aabb;var a4=c.aabb;var b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx;_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny;_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx;_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb;var a5=node1.aabb;var b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx;_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny;_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx;_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height;var y4=g1.height;node1.height=1+(x4>y4?x4:y4);var x5=node1.height;var y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1;node1.child1=f1;f1.parent=node1;var _this6=node1.aabb;var a6=c.aabb;var b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx;_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny;_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx;_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb;var a7=node1.aabb;var b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx;_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny;_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx;_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height;var y6=f1.height;node1.height=1+(x6>y6?x6:y6);var x7=node1.height;var y7=g1.height;b.height=1+(x7>y7?x7:y7)}node1=b}else{node1=node1}}var child1=node1.child1;var child2=node1.child2;var _this8=node1.aabb;var a8=child1.aabb;var b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx;_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny;_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx;_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height;var y8=child2.height;node1.height=1+(x8>y8?x8:y8);node1=node1.parent}}else{tree.root=sibling;sibling.parent=null;parent.height=-1;var o1=parent.aabb;if(o1.outer!=null){o1.outer.zpp_inner=null;o1.outer=null}o1.wrap_min=o1.wrap_max=null;o1._invalidate=null;o1._validate=null;o1.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o1;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent}}}else{node.first_sync=false}var aabb=node.aabb;if(!this.space.continuous){if(shape.zip_aabb){if(shape.body!=null){shape.zip_aabb=false;if(shape.type==0){var _this9=shape.circle;if(_this9.zip_worldCOM){if(_this9.body!=null){_this9.zip_worldCOM=false;if(_this9.zip_localCOM){_this9.zip_localCOM=false;if(_this9.type==1){var _this10=_this9.polygon;if(_this10.lverts.next.next==null){_this10.localCOMx=_this10.lverts.next.x;_this10.localCOMy=_this10.lverts.next.y}else if(_this10.lverts.next.next.next==null){_this10.localCOMx=_this10.lverts.next.x;_this10.localCOMy=_this10.lverts.next.y;_this10.localCOMx+=_this10.lverts.next.next.x;_this10.localCOMy+=_this10.lverts.next.next.y;_this10.localCOMx*=.5;_this10.localCOMy*=.5}else{_this10.localCOMx=0;_this10.localCOMy=0;var area=0;var cx_ite=_this10.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this10.localCOMx+=(v.x+w.x)*cf;_this10.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this10.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this10.localCOMx+=(v.x+w1.x)*cf1;_this10.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this10.localCOMx+=(w1.x+w2.x)*cf2;_this10.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this10.localCOMx*=t;_this10.localCOMy*=t}}if(_this9.wrap_localCOM!=null){_this9.wrap_localCOM.zpp_inner.x=_this9.localCOMx;_this9.wrap_localCOM.zpp_inner.y=_this9.localCOMy}}var _this11=_this9.body;if(_this11.zip_axis){_this11.zip_axis=false;_this11.axisx=Math.sin(_this11.rot);_this11.axisy=Math.cos(_this11.rot)}_this9.worldCOMx=_this9.body.posx+(_this9.body.axisy*_this9.localCOMx-_this9.body.axisx*_this9.localCOMy);_this9.worldCOMy=_this9.body.posy+(_this9.localCOMx*_this9.body.axisx+_this9.localCOMy*_this9.body.axisy)}}var rx=_this9.radius;var ry=_this9.radius;_this9.aabb.minx=_this9.worldCOMx-rx;_this9.aabb.miny=_this9.worldCOMy-ry;_this9.aabb.maxx=_this9.worldCOMx+rx;_this9.aabb.maxy=_this9.worldCOMy+ry}else{var _this12=shape.polygon;if(_this12.zip_gverts){if(_this12.body!=null){_this12.zip_gverts=false;_this12.validate_lverts();var _this13=_this12.body;if(_this13.zip_axis){_this13.zip_axis=false;_this13.axisx=Math.sin(_this13.rot);_this13.axisy=Math.cos(_this13.rot)}var li=_this12.lverts.next;var cx_ite1=_this12.gverts.next;while(cx_ite1!=null){var g2=cx_ite1;var l=li;li=li.next;g2.x=_this12.body.posx+(_this12.body.axisy*l.x-_this12.body.axisx*l.y);g2.y=_this12.body.posy+(l.x*_this12.body.axisx+l.y*_this12.body.axisy);cx_ite1=cx_ite1.next}}}var p0=_this12.gverts.next;_this12.aabb.minx=p0.x;_this12.aabb.miny=p0.y;_this12.aabb.maxx=p0.x;_this12.aabb.maxy=p0.y;var cx_ite2=_this12.gverts.next.next;while(cx_ite2!=null){var p=cx_ite2;if(p.x<_this12.aabb.minx){_this12.aabb.minx=p.x}if(p.x>_this12.aabb.maxx){_this12.aabb.maxx=p.x}if(p.y<_this12.aabb.miny){_this12.aabb.miny=p.y}if(p.y>_this12.aabb.maxy){_this12.aabb.maxy=p.y}cx_ite2=cx_ite2.next}}}}}var a9=shape.aabb;aabb.minx=a9.minx-3;aabb.miny=a9.miny-3;aabb.maxx=a9.maxx+3;aabb.maxy=a9.maxy+3;var tree1=(node.dyn=shape.body.type==1?false:!shape.body.component.sleeping)?this.dtree:this.stree;if(tree1.root==null){tree1.root=node;tree1.root.parent=null}else{var leafaabb=node.aabb;var node2=tree1.root;while(node2.child1!=null){var child11=node2.child1;var child21=node2.child2;var _this14=node2.aabb;var area1=(_this14.maxx-_this14.minx+(_this14.maxy-_this14.miny))*2;var _this15=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var a10=node2.aabb;_this15.minx=a10.minx<leafaabb.minx?a10.minx:leafaabb.minx;_this15.miny=a10.miny<leafaabb.miny?a10.miny:leafaabb.miny;_this15.maxx=a10.maxx>leafaabb.maxx?a10.maxx:leafaabb.maxx;_this15.maxy=a10.maxy>leafaabb.maxy?a10.maxy:leafaabb.maxy;var _this16=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var carea=(_this16.maxx-_this16.minx+(_this16.maxy-_this16.miny))*2;var cost=2*carea;var icost=2*(carea-area1);var _this17=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b10=child11.aabb;_this17.minx=leafaabb.minx<b10.minx?leafaabb.minx:b10.minx;_this17.miny=leafaabb.miny<b10.miny?leafaabb.miny:b10.miny;_this17.maxx=leafaabb.maxx>b10.maxx?leafaabb.maxx:b10.maxx;_this17.maxy=leafaabb.maxy>b10.maxy?leafaabb.maxy:b10.maxy;var cost1;if(child11.child1==null){var _this18=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost1=(_this18.maxx-_this18.minx+(_this18.maxy-_this18.miny))*2+icost}else{var _this19=child11.aabb;var _this20=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost1=(_this20.maxx-_this20.minx+(_this20.maxy-_this20.miny))*2-(_this19.maxx-_this19.minx+(_this19.maxy-_this19.miny))*2+icost}var _this21=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b11=child21.aabb;_this21.minx=leafaabb.minx<b11.minx?leafaabb.minx:b11.minx;_this21.miny=leafaabb.miny<b11.miny?leafaabb.miny:b11.miny;_this21.maxx=leafaabb.maxx>b11.maxx?leafaabb.maxx:b11.maxx;_this21.maxy=leafaabb.maxy>b11.maxy?leafaabb.maxy:b11.maxy;var cost2;if(child21.child1==null){var _this22=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost2=(_this22.maxx-_this22.minx+(_this22.maxy-_this22.miny))*2+icost}else{var _this23=child21.aabb;var _this24=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost2=(_this24.maxx-_this24.minx+(_this24.maxy-_this24.miny))*2-(_this23.maxx-_this23.minx+(_this23.maxy-_this23.miny))*2+icost}if(cost<cost1&&cost<cost2){break}else{node2=cost1<cost2?child11:child21}}var sibling1=node2;var oparent=sibling1.parent;var nparent;if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool==null){nparent=new zpp_$nape_space_ZPP_$AABBNode}else{nparent=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=nparent.next;nparent.next=null}if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){nparent.aabb=new zpp_$nape_geom_ZPP_$AABB}else{nparent.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=nparent.aabb.next;nparent.aabb.next=null}nparent.moved=false;nparent.synced=false;nparent.first_sync=false;nparent.parent=oparent;var _this25=nparent.aabb;var b12=sibling1.aabb;_this25.minx=leafaabb.minx<b12.minx?leafaabb.minx:b12.minx;_this25.miny=leafaabb.miny<b12.miny?leafaabb.miny:b12.miny;_this25.maxx=leafaabb.maxx>b12.maxx?leafaabb.maxx:b12.maxx;_this25.maxy=leafaabb.maxy>b12.maxy?leafaabb.maxy:b12.maxy;nparent.height=sibling1.height+1;if(oparent!=null){if(oparent.child1==sibling1){oparent.child1=nparent}else{oparent.child2=nparent}nparent.child1=sibling1;nparent.child2=node;sibling1.parent=nparent;node.parent=nparent}else{nparent.child1=sibling1;nparent.child2=node;sibling1.parent=nparent;node.parent=nparent;tree1.root=nparent}node2=node.parent;while(node2!=null){if(node2.child1==null||node2.height<2){node2=node2}else{var b13=node2.child1;var c1=node2.child2;var balance1=c1.height-b13.height;if(balance1>1){var f2=c1.child1;var g3=c1.child2;c1.child1=node2;c1.parent=node2.parent;node2.parent=c1;if(c1.parent!=null){if(c1.parent.child1==node2){c1.parent.child1=c1}else{c1.parent.child2=c1}}else{tree1.root=c1}if(f2.height>g3.height){c1.child2=f2;node2.child2=g3;g3.parent=node2;var _this26=node2.aabb;var a11=b13.aabb;var b14=g3.aabb;_this26.minx=a11.minx<b14.minx?a11.minx:b14.minx;_this26.miny=a11.miny<b14.miny?a11.miny:b14.miny;_this26.maxx=a11.maxx>b14.maxx?a11.maxx:b14.maxx;_this26.maxy=a11.maxy>b14.maxy?a11.maxy:b14.maxy;var _this27=c1.aabb;var a12=node2.aabb;var b15=f2.aabb;_this27.minx=a12.minx<b15.minx?a12.minx:b15.minx;_this27.miny=a12.miny<b15.miny?a12.miny:b15.miny;_this27.maxx=a12.maxx>b15.maxx?a12.maxx:b15.maxx;_this27.maxy=a12.maxy>b15.maxy?a12.maxy:b15.maxy;var x9=b13.height;var y9=g3.height;node2.height=1+(x9>y9?x9:y9);var x10=node2.height;var y10=f2.height;c1.height=1+(x10>y10?x10:y10)}else{c1.child2=g3;node2.child2=f2;f2.parent=node2;var _this28=node2.aabb;var a13=b13.aabb;var b16=f2.aabb;_this28.minx=a13.minx<b16.minx?a13.minx:b16.minx;_this28.miny=a13.miny<b16.miny?a13.miny:b16.miny;_this28.maxx=a13.maxx>b16.maxx?a13.maxx:b16.maxx;_this28.maxy=a13.maxy>b16.maxy?a13.maxy:b16.maxy;var _this29=c1.aabb;var a14=node2.aabb;var b17=g3.aabb;_this29.minx=a14.minx<b17.minx?a14.minx:b17.minx;_this29.miny=a14.miny<b17.miny?a14.miny:b17.miny;_this29.maxx=a14.maxx>b17.maxx?a14.maxx:b17.maxx;_this29.maxy=a14.maxy>b17.maxy?a14.maxy:b17.maxy;var x11=b13.height;var y11=f2.height;node2.height=1+(x11>y11?x11:y11);var x12=node2.height;var y12=g3.height;c1.height=1+(x12>y12?x12:y12)}node2=c1}else if(balance1<-1){var f3=b13.child1;var g4=b13.child2;b13.child1=node2;b13.parent=node2.parent;node2.parent=b13;if(b13.parent!=null){if(b13.parent.child1==node2){b13.parent.child1=b13}else{b13.parent.child2=b13}}else{tree1.root=b13}if(f3.height>g4.height){b13.child2=f3;node2.child1=g4;g4.parent=node2;var _this30=node2.aabb;var a15=c1.aabb;var b18=g4.aabb;_this30.minx=a15.minx<b18.minx?a15.minx:b18.minx;_this30.miny=a15.miny<b18.miny?a15.miny:b18.miny;_this30.maxx=a15.maxx>b18.maxx?a15.maxx:b18.maxx;_this30.maxy=a15.maxy>b18.maxy?a15.maxy:b18.maxy;var _this31=b13.aabb;var a16=node2.aabb;var b19=f3.aabb;_this31.minx=a16.minx<b19.minx?a16.minx:b19.minx;_this31.miny=a16.miny<b19.miny?a16.miny:b19.miny;_this31.maxx=a16.maxx>b19.maxx?a16.maxx:b19.maxx;_this31.maxy=a16.maxy>b19.maxy?a16.maxy:b19.maxy;var x13=c1.height;var y13=g4.height;node2.height=1+(x13>y13?x13:y13);var x14=node2.height;var y14=f3.height;b13.height=1+(x14>y14?x14:y14)}else{b13.child2=g4;node2.child1=f3;f3.parent=node2;var _this32=node2.aabb;var a17=c1.aabb;var b20=f3.aabb;_this32.minx=a17.minx<b20.minx?a17.minx:b20.minx;_this32.miny=a17.miny<b20.miny?a17.miny:b20.miny;_this32.maxx=a17.maxx>b20.maxx?a17.maxx:b20.maxx;_this32.maxy=a17.maxy>b20.maxy?a17.maxy:b20.maxy;var _this33=b13.aabb;var a18=node2.aabb;var b21=g4.aabb;_this33.minx=a18.minx<b21.minx?a18.minx:b21.minx;_this33.miny=a18.miny<b21.miny?a18.miny:b21.miny;_this33.maxx=a18.maxx>b21.maxx?a18.maxx:b21.maxx;_this33.maxy=a18.maxy>b21.maxy?a18.maxy:b21.maxy;var x15=c1.height;var y15=f3.height;node2.height=1+(x15>y15?x15:y15);var x16=node2.height;var y16=g4.height;b13.height=1+(x16>y16?x16:y16)}node2=b13}else{node2=node2}}var child12=node2.child1;var child22=node2.child2;var x17=child12.height;var y17=child22.height;node2.height=1+(x17>y17?x17:y17);var _this34=node2.aabb;var a19=child12.aabb;var b22=child22.aabb;_this34.minx=a19.minx<b22.minx?a19.minx:b22.minx;_this34.miny=a19.miny<b22.miny?a19.miny:b22.miny;_this34.maxx=a19.maxx>b22.maxx?a19.maxx:b22.maxx;_this34.maxy=a19.maxy>b22.maxy?a19.maxy:b22.maxy;node2=node2.parent}}node.synced=false;node.moved=true;node.mnext=node.snext;node.snext=null;node=node.mnext}var t1=this.syncs;this.syncs=this.moves;this.moves=t1}else{while(this.syncs!=null){var ret=this.syncs;this.syncs=ret.snext;ret.snext=null;var shape1=ret.shape;if(!ret.first_sync){var tree2=ret.dyn?this.dtree:this.stree;if(ret==tree2.root){tree2.root=null}else{var parent1=ret.parent;var gparent1=parent1.parent;var sibling2=parent1.child1==ret?parent1.child2:parent1.child1;if(gparent1!=null){if(gparent1.child1==parent1){gparent1.child1=sibling2}else{gparent1.child2=sibling2}sibling2.parent=gparent1;parent1.height=-1;var o2=parent1.aabb;if(o2.outer!=null){o2.outer.zpp_inner=null;o2.outer=null}o2.wrap_min=o2.wrap_max=null;o2._invalidate=null;o2._validate=null;o2.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o2;parent1.child1=parent1.child2=parent1.parent=null;parent1.next=null;parent1.snext=null;parent1.mnext=null;parent1.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent1;var node3=gparent1;while(node3!=null){if(node3.child1==null||node3.height<2){node3=node3}else{var b23=node3.child1;var c2=node3.child2;var balance2=c2.height-b23.height;if(balance2>1){var f4=c2.child1;var g5=c2.child2;c2.child1=node3;c2.parent=node3.parent;node3.parent=c2;if(c2.parent!=null){if(c2.parent.child1==node3){c2.parent.child1=c2}else{c2.parent.child2=c2}}else{tree2.root=c2}if(f4.height>g5.height){c2.child2=f4;node3.child2=g5;g5.parent=node3;var _this35=node3.aabb;var a20=b23.aabb;var b24=g5.aabb;_this35.minx=a20.minx<b24.minx?a20.minx:b24.minx;_this35.miny=a20.miny<b24.miny?a20.miny:b24.miny;_this35.maxx=a20.maxx>b24.maxx?a20.maxx:b24.maxx;_this35.maxy=a20.maxy>b24.maxy?a20.maxy:b24.maxy;var _this36=c2.aabb;var a21=node3.aabb;var b25=f4.aabb;_this36.minx=a21.minx<b25.minx?a21.minx:b25.minx;_this36.miny=a21.miny<b25.miny?a21.miny:b25.miny;_this36.maxx=a21.maxx>b25.maxx?a21.maxx:b25.maxx;_this36.maxy=a21.maxy>b25.maxy?a21.maxy:b25.maxy;var x18=b23.height;var y18=g5.height;node3.height=1+(x18>y18?x18:y18);var x19=node3.height;var y19=f4.height;c2.height=1+(x19>y19?x19:y19)}else{c2.child2=g5;node3.child2=f4;f4.parent=node3;var _this37=node3.aabb;var a22=b23.aabb;var b26=f4.aabb;_this37.minx=a22.minx<b26.minx?a22.minx:b26.minx;_this37.miny=a22.miny<b26.miny?a22.miny:b26.miny;_this37.maxx=a22.maxx>b26.maxx?a22.maxx:b26.maxx;_this37.maxy=a22.maxy>b26.maxy?a22.maxy:b26.maxy;var _this38=c2.aabb;var a23=node3.aabb;var b27=g5.aabb;_this38.minx=a23.minx<b27.minx?a23.minx:b27.minx;_this38.miny=a23.miny<b27.miny?a23.miny:b27.miny;_this38.maxx=a23.maxx>b27.maxx?a23.maxx:b27.maxx;_this38.maxy=a23.maxy>b27.maxy?a23.maxy:b27.maxy;var x20=b23.height;var y20=f4.height;node3.height=1+(x20>y20?x20:y20);var x21=node3.height;var y21=g5.height;c2.height=1+(x21>y21?x21:y21)}node3=c2}else if(balance2<-1){var f5=b23.child1;var g6=b23.child2;b23.child1=node3;b23.parent=node3.parent;node3.parent=b23;if(b23.parent!=null){if(b23.parent.child1==node3){b23.parent.child1=b23}else{b23.parent.child2=b23}}else{tree2.root=b23}if(f5.height>g6.height){b23.child2=f5;node3.child1=g6;g6.parent=node3;var _this39=node3.aabb;var a24=c2.aabb;var b28=g6.aabb;_this39.minx=a24.minx<b28.minx?a24.minx:b28.minx;_this39.miny=a24.miny<b28.miny?a24.miny:b28.miny;_this39.maxx=a24.maxx>b28.maxx?a24.maxx:b28.maxx;_this39.maxy=a24.maxy>b28.maxy?a24.maxy:b28.maxy;var _this40=b23.aabb;var a25=node3.aabb;var b29=f5.aabb;_this40.minx=a25.minx<b29.minx?a25.minx:b29.minx;_this40.miny=a25.miny<b29.miny?a25.miny:b29.miny;_this40.maxx=a25.maxx>b29.maxx?a25.maxx:b29.maxx;_this40.maxy=a25.maxy>b29.maxy?a25.maxy:b29.maxy;var x22=c2.height;var y22=g6.height;node3.height=1+(x22>y22?x22:y22);var x23=node3.height;var y23=f5.height;b23.height=1+(x23>y23?x23:y23)}else{b23.child2=g6;node3.child1=f5;f5.parent=node3;var _this41=node3.aabb;var a26=c2.aabb;var b30=f5.aabb;_this41.minx=a26.minx<b30.minx?a26.minx:b30.minx;_this41.miny=a26.miny<b30.miny?a26.miny:b30.miny;_this41.maxx=a26.maxx>b30.maxx?a26.maxx:b30.maxx;_this41.maxy=a26.maxy>b30.maxy?a26.maxy:b30.maxy;var _this42=b23.aabb;var a27=node3.aabb;var b31=g6.aabb;_this42.minx=a27.minx<b31.minx?a27.minx:b31.minx;_this42.miny=a27.miny<b31.miny?a27.miny:b31.miny;_this42.maxx=a27.maxx>b31.maxx?a27.maxx:b31.maxx;_this42.maxy=a27.maxy>b31.maxy?a27.maxy:b31.maxy;var x24=c2.height;var y24=f5.height;node3.height=1+(x24>y24?x24:y24);var x25=node3.height;var y25=g6.height;b23.height=1+(x25>y25?x25:y25)}node3=b23}else{node3=node3}}var child13=node3.child1;var child23=node3.child2;var _this43=node3.aabb;var a28=child13.aabb;var b32=child23.aabb;_this43.minx=a28.minx<b32.minx?a28.minx:b32.minx;_this43.miny=a28.miny<b32.miny?a28.miny:b32.miny;_this43.maxx=a28.maxx>b32.maxx?a28.maxx:b32.maxx;_this43.maxy=a28.maxy>b32.maxy?a28.maxy:b32.maxy;var x26=child13.height;var y26=child23.height;node3.height=1+(x26>y26?x26:y26);node3=node3.parent}}else{tree2.root=sibling2;sibling2.parent=null;parent1.height=-1;var o3=parent1.aabb;if(o3.outer!=null){o3.outer.zpp_inner=null;o3.outer=null}o3.wrap_min=o3.wrap_max=null;o3._invalidate=null;o3._validate=null;o3.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o3;parent1.child1=parent1.child2=parent1.parent=null;parent1.next=null;parent1.snext=null;parent1.mnext=null;parent1.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent1}}}else{ret.first_sync=false}var aabb1=ret.aabb;if(!this.space.continuous){if(shape1.zip_aabb){if(shape1.body!=null){shape1.zip_aabb=false;if(shape1.type==0){var _this44=shape1.circle;if(_this44.zip_worldCOM){if(_this44.body!=null){_this44.zip_worldCOM=false;if(_this44.zip_localCOM){_this44.zip_localCOM=false;if(_this44.type==1){var _this45=_this44.polygon;if(_this45.lverts.next.next==null){_this45.localCOMx=_this45.lverts.next.x;_this45.localCOMy=_this45.lverts.next.y}else if(_this45.lverts.next.next.next==null){_this45.localCOMx=_this45.lverts.next.x;_this45.localCOMy=_this45.lverts.next.y;_this45.localCOMx+=_this45.lverts.next.next.x;_this45.localCOMy+=_this45.lverts.next.next.y;_this45.localCOMx*=.5;_this45.localCOMy*=.5}else{_this45.localCOMx=0;_this45.localCOMy=0;var area2=0;var cx_ite3=_this45.lverts.next;var u1=cx_ite3;cx_ite3=cx_ite3.next;var v1=cx_ite3;cx_ite3=cx_ite3.next;while(cx_ite3!=null){var w3=cx_ite3;area2+=v1.x*(w3.y-u1.y);var cf3=w3.y*v1.x-w3.x*v1.y;_this45.localCOMx+=(v1.x+w3.x)*cf3;_this45.localCOMy+=(v1.y+w3.y)*cf3;u1=v1;v1=w3;cx_ite3=cx_ite3.next}cx_ite3=_this45.lverts.next;var w4=cx_ite3;area2+=v1.x*(w4.y-u1.y);var cf4=w4.y*v1.x-w4.x*v1.y;_this45.localCOMx+=(v1.x+w4.x)*cf4;_this45.localCOMy+=(v1.y+w4.y)*cf4;u1=v1;cx_ite3=cx_ite3.next;var w5=cx_ite3;area2+=w4.x*(w5.y-u1.y);var cf5=w5.y*w4.x-w5.x*w4.y;_this45.localCOMx+=(w4.x+w5.x)*cf5;_this45.localCOMy+=(w4.y+w5.y)*cf5;area2=1/(3*area2);var t2=area2;_this45.localCOMx*=t2;_this45.localCOMy*=t2}}if(_this44.wrap_localCOM!=null){_this44.wrap_localCOM.zpp_inner.x=_this44.localCOMx;_this44.wrap_localCOM.zpp_inner.y=_this44.localCOMy}}var _this46=_this44.body;if(_this46.zip_axis){_this46.zip_axis=false;_this46.axisx=Math.sin(_this46.rot);_this46.axisy=Math.cos(_this46.rot)}_this44.worldCOMx=_this44.body.posx+(_this44.body.axisy*_this44.localCOMx-_this44.body.axisx*_this44.localCOMy);_this44.worldCOMy=_this44.body.posy+(_this44.localCOMx*_this44.body.axisx+_this44.localCOMy*_this44.body.axisy)}}var rx1=_this44.radius;var ry1=_this44.radius;_this44.aabb.minx=_this44.worldCOMx-rx1;_this44.aabb.miny=_this44.worldCOMy-ry1;_this44.aabb.maxx=_this44.worldCOMx+rx1;_this44.aabb.maxy=_this44.worldCOMy+ry1}else{var _this47=shape1.polygon;if(_this47.zip_gverts){if(_this47.body!=null){_this47.zip_gverts=false;_this47.validate_lverts();var _this48=_this47.body;if(_this48.zip_axis){_this48.zip_axis=false;_this48.axisx=Math.sin(_this48.rot);_this48.axisy=Math.cos(_this48.rot)}var li1=_this47.lverts.next;var cx_ite4=_this47.gverts.next;while(cx_ite4!=null){var g7=cx_ite4;var l1=li1;li1=li1.next;g7.x=_this47.body.posx+(_this47.body.axisy*l1.x-_this47.body.axisx*l1.y);g7.y=_this47.body.posy+(l1.x*_this47.body.axisx+l1.y*_this47.body.axisy);cx_ite4=cx_ite4.next}}}var p01=_this47.gverts.next;_this47.aabb.minx=p01.x;_this47.aabb.miny=p01.y;_this47.aabb.maxx=p01.x;_this47.aabb.maxy=p01.y;var cx_ite5=_this47.gverts.next.next;while(cx_ite5!=null){var p1=cx_ite5;if(p1.x<_this47.aabb.minx){_this47.aabb.minx=p1.x}if(p1.x>_this47.aabb.maxx){_this47.aabb.maxx=p1.x}if(p1.y<_this47.aabb.miny){_this47.aabb.miny=p1.y}if(p1.y>_this47.aabb.maxy){_this47.aabb.maxy=p1.y}cx_ite5=cx_ite5.next}}}}}var a29=shape1.aabb;aabb1.minx=a29.minx-3;aabb1.miny=a29.miny-3;aabb1.maxx=a29.maxx+3;aabb1.maxy=a29.maxy+3;var tree3=(ret.dyn=shape1.body.type==1?false:!shape1.body.component.sleeping)?this.dtree:this.stree;if(tree3.root==null){tree3.root=ret;tree3.root.parent=null}else{var leafaabb1=ret.aabb;var node4=tree3.root;while(node4.child1!=null){var child14=node4.child1;var child24=node4.child2;var _this49=node4.aabb;var area3=(_this49.maxx-_this49.minx+(_this49.maxy-_this49.miny))*2;var _this50=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var a30=node4.aabb;_this50.minx=a30.minx<leafaabb1.minx?a30.minx:leafaabb1.minx;_this50.miny=a30.miny<leafaabb1.miny?a30.miny:leafaabb1.miny;_this50.maxx=a30.maxx>leafaabb1.maxx?a30.maxx:leafaabb1.maxx;_this50.maxy=a30.maxy>leafaabb1.maxy?a30.maxy:leafaabb1.maxy;var _this51=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var carea1=(_this51.maxx-_this51.minx+(_this51.maxy-_this51.miny))*2;var cost3=2*carea1;var icost1=2*(carea1-area3);var _this52=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b33=child14.aabb;_this52.minx=leafaabb1.minx<b33.minx?leafaabb1.minx:b33.minx;_this52.miny=leafaabb1.miny<b33.miny?leafaabb1.miny:b33.miny;_this52.maxx=leafaabb1.maxx>b33.maxx?leafaabb1.maxx:b33.maxx;_this52.maxy=leafaabb1.maxy>b33.maxy?leafaabb1.maxy:b33.maxy;var cost11;if(child14.child1==null){var _this53=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost11=(_this53.maxx-_this53.minx+(_this53.maxy-_this53.miny))*2+icost1}else{var _this54=child14.aabb;var _this55=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost11=(_this55.maxx-_this55.minx+(_this55.maxy-_this55.miny))*2-(_this54.maxx-_this54.minx+(_this54.maxy-_this54.miny))*2+icost1}var _this56=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b34=child24.aabb;_this56.minx=leafaabb1.minx<b34.minx?leafaabb1.minx:b34.minx;_this56.miny=leafaabb1.miny<b34.miny?leafaabb1.miny:b34.miny;_this56.maxx=leafaabb1.maxx>b34.maxx?leafaabb1.maxx:b34.maxx;_this56.maxy=leafaabb1.maxy>b34.maxy?leafaabb1.maxy:b34.maxy;var cost21;if(child24.child1==null){var _this57=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost21=(_this57.maxx-_this57.minx+(_this57.maxy-_this57.miny))*2+icost1}else{var _this58=child24.aabb;var _this59=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost21=(_this59.maxx-_this59.minx+(_this59.maxy-_this59.miny))*2-(_this58.maxx-_this58.minx+(_this58.maxy-_this58.miny))*2+icost1}if(cost3<cost11&&cost3<cost21){break}else{node4=cost11<cost21?child14:child24}}var sibling3=node4;var oparent1=sibling3.parent;var nparent1;if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool==null){nparent1=new zpp_$nape_space_ZPP_$AABBNode}else{nparent1=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=nparent1.next;nparent1.next=null}if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){nparent1.aabb=new zpp_$nape_geom_ZPP_$AABB}else{nparent1.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=nparent1.aabb.next;nparent1.aabb.next=null}nparent1.moved=false;nparent1.synced=false;nparent1.first_sync=false;nparent1.parent=oparent1;var _this60=nparent1.aabb;var b35=sibling3.aabb;_this60.minx=leafaabb1.minx<b35.minx?leafaabb1.minx:b35.minx;_this60.miny=leafaabb1.miny<b35.miny?leafaabb1.miny:b35.miny;_this60.maxx=leafaabb1.maxx>b35.maxx?leafaabb1.maxx:b35.maxx;_this60.maxy=leafaabb1.maxy>b35.maxy?leafaabb1.maxy:b35.maxy;nparent1.height=sibling3.height+1;if(oparent1!=null){if(oparent1.child1==sibling3){oparent1.child1=nparent1}else{oparent1.child2=nparent1}nparent1.child1=sibling3;nparent1.child2=ret;sibling3.parent=nparent1;ret.parent=nparent1}else{nparent1.child1=sibling3;nparent1.child2=ret;sibling3.parent=nparent1;ret.parent=nparent1;tree3.root=nparent1}node4=ret.parent;while(node4!=null){if(node4.child1==null||node4.height<2){node4=node4}else{var b36=node4.child1;var c3=node4.child2;var balance3=c3.height-b36.height;if(balance3>1){var f6=c3.child1;var g8=c3.child2;c3.child1=node4;c3.parent=node4.parent;node4.parent=c3;if(c3.parent!=null){if(c3.parent.child1==node4){c3.parent.child1=c3}else{c3.parent.child2=c3}}else{tree3.root=c3}if(f6.height>g8.height){c3.child2=f6;node4.child2=g8;g8.parent=node4;var _this61=node4.aabb;var a31=b36.aabb;var b37=g8.aabb;_this61.minx=a31.minx<b37.minx?a31.minx:b37.minx;_this61.miny=a31.miny<b37.miny?a31.miny:b37.miny;_this61.maxx=a31.maxx>b37.maxx?a31.maxx:b37.maxx;_this61.maxy=a31.maxy>b37.maxy?a31.maxy:b37.maxy;var _this62=c3.aabb;var a32=node4.aabb;var b38=f6.aabb;_this62.minx=a32.minx<b38.minx?a32.minx:b38.minx;_this62.miny=a32.miny<b38.miny?a32.miny:b38.miny;_this62.maxx=a32.maxx>b38.maxx?a32.maxx:b38.maxx;_this62.maxy=a32.maxy>b38.maxy?a32.maxy:b38.maxy;var x27=b36.height;var y27=g8.height;node4.height=1+(x27>y27?x27:y27);var x28=node4.height;var y28=f6.height;c3.height=1+(x28>y28?x28:y28)}else{c3.child2=g8;node4.child2=f6;f6.parent=node4;var _this63=node4.aabb;var a33=b36.aabb;var b39=f6.aabb;_this63.minx=a33.minx<b39.minx?a33.minx:b39.minx;_this63.miny=a33.miny<b39.miny?a33.miny:b39.miny;_this63.maxx=a33.maxx>b39.maxx?a33.maxx:b39.maxx;_this63.maxy=a33.maxy>b39.maxy?a33.maxy:b39.maxy;var _this64=c3.aabb;var a34=node4.aabb;var b40=g8.aabb;_this64.minx=a34.minx<b40.minx?a34.minx:b40.minx;_this64.miny=a34.miny<b40.miny?a34.miny:b40.miny;_this64.maxx=a34.maxx>b40.maxx?a34.maxx:b40.maxx;_this64.maxy=a34.maxy>b40.maxy?a34.maxy:b40.maxy;var x29=b36.height;var y29=f6.height;node4.height=1+(x29>y29?x29:y29);var x30=node4.height;var y30=g8.height;c3.height=1+(x30>y30?x30:y30)}node4=c3}else if(balance3<-1){var f7=b36.child1;var g9=b36.child2;b36.child1=node4;b36.parent=node4.parent;node4.parent=b36;if(b36.parent!=null){if(b36.parent.child1==node4){b36.parent.child1=b36}else{b36.parent.child2=b36}}else{tree3.root=b36}if(f7.height>g9.height){b36.child2=f7;node4.child1=g9;g9.parent=node4;var _this65=node4.aabb;var a35=c3.aabb;var b41=g9.aabb;_this65.minx=a35.minx<b41.minx?a35.minx:b41.minx;_this65.miny=a35.miny<b41.miny?a35.miny:b41.miny;_this65.maxx=a35.maxx>b41.maxx?a35.maxx:b41.maxx;_this65.maxy=a35.maxy>b41.maxy?a35.maxy:b41.maxy;var _this66=b36.aabb;var a36=node4.aabb;var b42=f7.aabb;_this66.minx=a36.minx<b42.minx?a36.minx:b42.minx;_this66.miny=a36.miny<b42.miny?a36.miny:b42.miny;_this66.maxx=a36.maxx>b42.maxx?a36.maxx:b42.maxx;_this66.maxy=a36.maxy>b42.maxy?a36.maxy:b42.maxy;var x31=c3.height;var y31=g9.height;node4.height=1+(x31>y31?x31:y31);var x32=node4.height;var y32=f7.height;b36.height=1+(x32>y32?x32:y32)}else{b36.child2=g9;node4.child1=f7;f7.parent=node4;var _this67=node4.aabb;var a37=c3.aabb;var b43=f7.aabb;_this67.minx=a37.minx<b43.minx?a37.minx:b43.minx;_this67.miny=a37.miny<b43.miny?a37.miny:b43.miny;_this67.maxx=a37.maxx>b43.maxx?a37.maxx:b43.maxx;_this67.maxy=a37.maxy>b43.maxy?a37.maxy:b43.maxy;var _this68=b36.aabb;var a38=node4.aabb;var b44=g9.aabb;_this68.minx=a38.minx<b44.minx?a38.minx:b44.minx;_this68.miny=a38.miny<b44.miny?a38.miny:b44.miny;_this68.maxx=a38.maxx>b44.maxx?a38.maxx:b44.maxx;_this68.maxy=a38.maxy>b44.maxy?a38.maxy:b44.maxy;var x33=c3.height;var y33=f7.height;node4.height=1+(x33>y33?x33:y33);var x34=node4.height;var y34=g9.height;b36.height=1+(x34>y34?x34:y34)}node4=b36}else{node4=node4}}var child15=node4.child1;var child25=node4.child2;var x35=child15.height;var y35=child25.height;node4.height=1+(x35>y35?x35:y35);var _this69=node4.aabb;var a39=child15.aabb;var b45=child25.aabb;_this69.minx=a39.minx<b45.minx?a39.minx:b45.minx;_this69.miny=a39.miny<b45.miny?a39.miny:b45.miny;_this69.maxx=a39.maxx>b45.maxx?a39.maxx:b45.maxx;_this69.maxy=a39.maxy>b45.maxy?a39.maxy:b45.maxy;node4=node4.parent}}ret.synced=false;if(!ret.moved){ret.moved=true;ret.mnext=this.moves;this.moves=ret}}}}},broadphase:function(space,discrete){var node=this.syncs;while(node!=null){var shape=node.shape;if(!node.first_sync){var tree=node.dyn?this.dtree:this.stree;if(node==tree.root){tree.root=null}else{var parent=node.parent;var gparent=parent.parent;var sibling=parent.child1==node?parent.child2:parent.child1;if(gparent!=null){if(gparent.child1==parent){gparent.child1=sibling}else{gparent.child2=sibling}sibling.parent=gparent;parent.height=-1;var o=parent.aabb;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o.wrap_min=o.wrap_max=null;o._invalidate=null;o._validate=null;o.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent;var node1=gparent;while(node1!=null){if(node1.child1==null||node1.height<2){node1=node1}else{var b=node1.child1;var c=node1.child2;var balance=c.height-b.height;if(balance>1){var f=c.child1;var g=c.child2;c.child1=node1;c.parent=node1.parent;node1.parent=c;if(c.parent!=null){if(c.parent.child1==node1){c.parent.child1=c}else{c.parent.child2=c}}else{tree.root=c}if(f.height>g.height){c.child2=f;node1.child2=g;g.parent=node1;var _this=node1.aabb;var a=b.aabb;var b1=g.aabb;_this.minx=a.minx<b1.minx?a.minx:b1.minx;_this.miny=a.miny<b1.miny?a.miny:b1.miny;_this.maxx=a.maxx>b1.maxx?a.maxx:b1.maxx;_this.maxy=a.maxy>b1.maxy?a.maxy:b1.maxy;var _this1=c.aabb;var a1=node1.aabb;var b2=f.aabb;_this1.minx=a1.minx<b2.minx?a1.minx:b2.minx;_this1.miny=a1.miny<b2.miny?a1.miny:b2.miny;_this1.maxx=a1.maxx>b2.maxx?a1.maxx:b2.maxx;_this1.maxy=a1.maxy>b2.maxy?a1.maxy:b2.maxy;var x=b.height;var y=g.height;node1.height=1+(x>y?x:y);var x1=node1.height;var y1=f.height;c.height=1+(x1>y1?x1:y1)}else{c.child2=g;node1.child2=f;f.parent=node1;var _this2=node1.aabb;var a2=b.aabb;var b3=f.aabb;_this2.minx=a2.minx<b3.minx?a2.minx:b3.minx;_this2.miny=a2.miny<b3.miny?a2.miny:b3.miny;_this2.maxx=a2.maxx>b3.maxx?a2.maxx:b3.maxx;_this2.maxy=a2.maxy>b3.maxy?a2.maxy:b3.maxy;var _this3=c.aabb;var a3=node1.aabb;var b4=g.aabb;_this3.minx=a3.minx<b4.minx?a3.minx:b4.minx;_this3.miny=a3.miny<b4.miny?a3.miny:b4.miny;_this3.maxx=a3.maxx>b4.maxx?a3.maxx:b4.maxx;_this3.maxy=a3.maxy>b4.maxy?a3.maxy:b4.maxy;var x2=b.height;var y2=f.height;node1.height=1+(x2>y2?x2:y2);var x3=node1.height;var y3=g.height;c.height=1+(x3>y3?x3:y3)}node1=c}else if(balance<-1){var f1=b.child1;var g1=b.child2;b.child1=node1;b.parent=node1.parent;node1.parent=b;if(b.parent!=null){if(b.parent.child1==node1){b.parent.child1=b}else{b.parent.child2=b}}else{tree.root=b}if(f1.height>g1.height){b.child2=f1;node1.child1=g1;g1.parent=node1;var _this4=node1.aabb;var a4=c.aabb;var b5=g1.aabb;_this4.minx=a4.minx<b5.minx?a4.minx:b5.minx;_this4.miny=a4.miny<b5.miny?a4.miny:b5.miny;_this4.maxx=a4.maxx>b5.maxx?a4.maxx:b5.maxx;_this4.maxy=a4.maxy>b5.maxy?a4.maxy:b5.maxy;var _this5=b.aabb;var a5=node1.aabb;var b6=f1.aabb;_this5.minx=a5.minx<b6.minx?a5.minx:b6.minx;_this5.miny=a5.miny<b6.miny?a5.miny:b6.miny;_this5.maxx=a5.maxx>b6.maxx?a5.maxx:b6.maxx;_this5.maxy=a5.maxy>b6.maxy?a5.maxy:b6.maxy;var x4=c.height;var y4=g1.height;node1.height=1+(x4>y4?x4:y4);var x5=node1.height;var y5=f1.height;b.height=1+(x5>y5?x5:y5)}else{b.child2=g1;node1.child1=f1;f1.parent=node1;var _this6=node1.aabb;var a6=c.aabb;var b7=f1.aabb;_this6.minx=a6.minx<b7.minx?a6.minx:b7.minx;_this6.miny=a6.miny<b7.miny?a6.miny:b7.miny;_this6.maxx=a6.maxx>b7.maxx?a6.maxx:b7.maxx;_this6.maxy=a6.maxy>b7.maxy?a6.maxy:b7.maxy;var _this7=b.aabb;var a7=node1.aabb;var b8=g1.aabb;_this7.minx=a7.minx<b8.minx?a7.minx:b8.minx;_this7.miny=a7.miny<b8.miny?a7.miny:b8.miny;_this7.maxx=a7.maxx>b8.maxx?a7.maxx:b8.maxx;_this7.maxy=a7.maxy>b8.maxy?a7.maxy:b8.maxy;var x6=c.height;var y6=f1.height;node1.height=1+(x6>y6?x6:y6);var x7=node1.height;var y7=g1.height;b.height=1+(x7>y7?x7:y7)}node1=b}else{node1=node1}}var child1=node1.child1;var child2=node1.child2;var _this8=node1.aabb;var a8=child1.aabb;var b9=child2.aabb;_this8.minx=a8.minx<b9.minx?a8.minx:b9.minx;_this8.miny=a8.miny<b9.miny?a8.miny:b9.miny;_this8.maxx=a8.maxx>b9.maxx?a8.maxx:b9.maxx;_this8.maxy=a8.maxy>b9.maxy?a8.maxy:b9.maxy;var x8=child1.height;var y8=child2.height;node1.height=1+(x8>y8?x8:y8);node1=node1.parent}}else{tree.root=sibling;sibling.parent=null;parent.height=-1;var o1=parent.aabb;if(o1.outer!=null){o1.outer.zpp_inner=null;o1.outer=null}o1.wrap_min=o1.wrap_max=null;o1._invalidate=null;o1._validate=null;o1.next=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=o1;parent.child1=parent.child2=parent.parent=null;parent.next=null;parent.snext=null;parent.mnext=null;parent.next=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=parent}}}else{node.first_sync=false}var aabb=node.aabb;if(!space.continuous){if(shape.zip_aabb){if(shape.body!=null){shape.zip_aabb=false;if(shape.type==0){var _this9=shape.circle;if(_this9.zip_worldCOM){if(_this9.body!=null){_this9.zip_worldCOM=false;if(_this9.zip_localCOM){_this9.zip_localCOM=false;if(_this9.type==1){var _this10=_this9.polygon;if(_this10.lverts.next.next==null){_this10.localCOMx=_this10.lverts.next.x;_this10.localCOMy=_this10.lverts.next.y}else if(_this10.lverts.next.next.next==null){_this10.localCOMx=_this10.lverts.next.x;_this10.localCOMy=_this10.lverts.next.y;_this10.localCOMx+=_this10.lverts.next.next.x;_this10.localCOMy+=_this10.lverts.next.next.y;_this10.localCOMx*=.5;_this10.localCOMy*=.5}else{_this10.localCOMx=0;_this10.localCOMy=0;var area=0;var cx_ite=_this10.lverts.next;var u=cx_ite;cx_ite=cx_ite.next;var v=cx_ite;cx_ite=cx_ite.next;while(cx_ite!=null){var w=cx_ite;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this10.localCOMx+=(v.x+w.x)*cf;_this10.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite=cx_ite.next}cx_ite=_this10.lverts.next;var w1=cx_ite;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this10.localCOMx+=(v.x+w1.x)*cf1;_this10.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite=cx_ite.next;var w2=cx_ite;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this10.localCOMx+=(w1.x+w2.x)*cf2;_this10.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this10.localCOMx*=t;_this10.localCOMy*=t}}if(_this9.wrap_localCOM!=null){_this9.wrap_localCOM.zpp_inner.x=_this9.localCOMx;_this9.wrap_localCOM.zpp_inner.y=_this9.localCOMy}}var _this11=_this9.body;if(_this11.zip_axis){_this11.zip_axis=false;_this11.axisx=Math.sin(_this11.rot);_this11.axisy=Math.cos(_this11.rot)}_this9.worldCOMx=_this9.body.posx+(_this9.body.axisy*_this9.localCOMx-_this9.body.axisx*_this9.localCOMy);_this9.worldCOMy=_this9.body.posy+(_this9.localCOMx*_this9.body.axisx+_this9.localCOMy*_this9.body.axisy)}}var rx=_this9.radius;var ry=_this9.radius;_this9.aabb.minx=_this9.worldCOMx-rx;_this9.aabb.miny=_this9.worldCOMy-ry;_this9.aabb.maxx=_this9.worldCOMx+rx;_this9.aabb.maxy=_this9.worldCOMy+ry}else{var _this12=shape.polygon;if(_this12.zip_gverts){if(_this12.body!=null){_this12.zip_gverts=false;_this12.validate_lverts();var _this13=_this12.body;if(_this13.zip_axis){_this13.zip_axis=false;_this13.axisx=Math.sin(_this13.rot);_this13.axisy=Math.cos(_this13.rot)}var li=_this12.lverts.next;var cx_ite1=_this12.gverts.next;while(cx_ite1!=null){var g2=cx_ite1;var l=li;li=li.next;g2.x=_this12.body.posx+(_this12.body.axisy*l.x-_this12.body.axisx*l.y);g2.y=_this12.body.posy+(l.x*_this12.body.axisx+l.y*_this12.body.axisy);cx_ite1=cx_ite1.next}}}var p0=_this12.gverts.next;_this12.aabb.minx=p0.x;_this12.aabb.miny=p0.y;_this12.aabb.maxx=p0.x;_this12.aabb.maxy=p0.y;var cx_ite2=_this12.gverts.next.next;while(cx_ite2!=null){var p=cx_ite2;if(p.x<_this12.aabb.minx){_this12.aabb.minx=p.x}if(p.x>_this12.aabb.maxx){_this12.aabb.maxx=p.x}if(p.y<_this12.aabb.miny){_this12.aabb.miny=p.y}if(p.y>_this12.aabb.maxy){_this12.aabb.maxy=p.y}cx_ite2=cx_ite2.next}}}}}var a9=shape.aabb;aabb.minx=a9.minx-3;aabb.miny=a9.miny-3;aabb.maxx=a9.maxx+3;aabb.maxy=a9.maxy+3;var tree1=(node.dyn=shape.body.type==1?false:!shape.body.component.sleeping)?this.dtree:this.stree;if(tree1.root==null){tree1.root=node;tree1.root.parent=null}else{var leafaabb=node.aabb;var node2=tree1.root;while(node2.child1!=null){var child11=node2.child1;var child21=node2.child2;var _this14=node2.aabb;var area1=(_this14.maxx-_this14.minx+(_this14.maxy-_this14.miny))*2;var _this15=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var a10=node2.aabb;_this15.minx=a10.minx<leafaabb.minx?a10.minx:leafaabb.minx;_this15.miny=a10.miny<leafaabb.miny?a10.miny:leafaabb.miny;_this15.maxx=a10.maxx>leafaabb.maxx?a10.maxx:leafaabb.maxx;_this15.maxy=a10.maxy>leafaabb.maxy?a10.maxy:leafaabb.maxy;var _this16=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var carea=(_this16.maxx-_this16.minx+(_this16.maxy-_this16.miny))*2;var cost=2*carea;var icost=2*(carea-area1);var _this17=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b10=child11.aabb;_this17.minx=leafaabb.minx<b10.minx?leafaabb.minx:b10.minx;_this17.miny=leafaabb.miny<b10.miny?leafaabb.miny:b10.miny;_this17.maxx=leafaabb.maxx>b10.maxx?leafaabb.maxx:b10.maxx;_this17.maxy=leafaabb.maxy>b10.maxy?leafaabb.maxy:b10.maxy;var cost1;if(child11.child1==null){var _this18=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost1=(_this18.maxx-_this18.minx+(_this18.maxy-_this18.miny))*2+icost}else{var _this19=child11.aabb;var _this20=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost1=(_this20.maxx-_this20.minx+(_this20.maxy-_this20.miny))*2-(_this19.maxx-_this19.minx+(_this19.maxy-_this19.miny))*2+icost}var _this21=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;var b11=child21.aabb;_this21.minx=leafaabb.minx<b11.minx?leafaabb.minx:b11.minx;_this21.miny=leafaabb.miny<b11.miny?leafaabb.miny:b11.miny;_this21.maxx=leafaabb.maxx>b11.maxx?leafaabb.maxx:b11.maxx;_this21.maxy=leafaabb.maxy>b11.maxy?leafaabb.maxy:b11.maxy;var cost2;if(child21.child1==null){var _this22=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost2=(_this22.maxx-_this22.minx+(_this22.maxy-_this22.miny))*2+icost}else{var _this23=child21.aabb;var _this24=zpp_$nape_space_ZPP_$AABBTree.tmpaabb;cost2=(_this24.maxx-_this24.minx+(_this24.maxy-_this24.miny))*2-(_this23.maxx-_this23.minx+(_this23.maxy-_this23.miny))*2+icost}if(cost<cost1&&cost<cost2){break}else{node2=cost1<cost2?child11:child21}}var sibling1=node2;var oparent=sibling1.parent;var nparent;if(zpp_$nape_space_ZPP_$AABBNode.zpp_pool==null){nparent=new zpp_$nape_space_ZPP_$AABBNode}else{nparent=zpp_$nape_space_ZPP_$AABBNode.zpp_pool;zpp_$nape_space_ZPP_$AABBNode.zpp_pool=nparent.next;nparent.next=null}if(zpp_$nape_geom_ZPP_$AABB.zpp_pool==null){nparent.aabb=new zpp_$nape_geom_ZPP_$AABB}else{nparent.aabb=zpp_$nape_geom_ZPP_$AABB.zpp_pool;zpp_$nape_geom_ZPP_$AABB.zpp_pool=nparent.aabb.next;nparent.aabb.next=null}nparent.moved=false;nparent.synced=false;nparent.first_sync=false;nparent.parent=oparent;var _this25=nparent.aabb;var b12=sibling1.aabb;_this25.minx=leafaabb.minx<b12.minx?leafaabb.minx:b12.minx;_this25.miny=leafaabb.miny<b12.miny?leafaabb.miny:b12.miny;_this25.maxx=leafaabb.maxx>b12.maxx?leafaabb.maxx:b12.maxx;_this25.maxy=leafaabb.maxy>b12.maxy?leafaabb.maxy:b12.maxy;nparent.height=sibling1.height+1;if(oparent!=null){if(oparent.child1==sibling1){oparent.child1=nparent}else{oparent.child2=nparent}nparent.child1=sibling1;nparent.child2=node;sibling1.parent=nparent;node.parent=nparent}else{nparent.child1=sibling1;nparent.child2=node;sibling1.parent=nparent;node.parent=nparent;tree1.root=nparent}node2=node.parent;while(node2!=null){if(node2.child1==null||node2.height<2){node2=node2}else{var b13=node2.child1;var c1=node2.child2;var balance1=c1.height-b13.height;if(balance1>1){var f2=c1.child1;var g3=c1.child2;c1.child1=node2;c1.parent=node2.parent;node2.parent=c1;if(c1.parent!=null){if(c1.parent.child1==node2){c1.parent.child1=c1}else{c1.parent.child2=c1}}else{tree1.root=c1}if(f2.height>g3.height){c1.child2=f2;node2.child2=g3;g3.parent=node2;var _this26=node2.aabb;var a11=b13.aabb;var b14=g3.aabb;_this26.minx=a11.minx<b14.minx?a11.minx:b14.minx;_this26.miny=a11.miny<b14.miny?a11.miny:b14.miny;_this26.maxx=a11.maxx>b14.maxx?a11.maxx:b14.maxx;_this26.maxy=a11.maxy>b14.maxy?a11.maxy:b14.maxy;var _this27=c1.aabb;var a12=node2.aabb;var b15=f2.aabb;_this27.minx=a12.minx<b15.minx?a12.minx:b15.minx;_this27.miny=a12.miny<b15.miny?a12.miny:b15.miny;_this27.maxx=a12.maxx>b15.maxx?a12.maxx:b15.maxx;_this27.maxy=a12.maxy>b15.maxy?a12.maxy:b15.maxy;var x9=b13.height;var y9=g3.height;node2.height=1+(x9>y9?x9:y9);var x10=node2.height;var y10=f2.height;c1.height=1+(x10>y10?x10:y10)}else{c1.child2=g3;node2.child2=f2;f2.parent=node2;var _this28=node2.aabb;var a13=b13.aabb;var b16=f2.aabb;_this28.minx=a13.minx<b16.minx?a13.minx:b16.minx;_this28.miny=a13.miny<b16.miny?a13.miny:b16.miny;_this28.maxx=a13.maxx>b16.maxx?a13.maxx:b16.maxx;_this28.maxy=a13.maxy>b16.maxy?a13.maxy:b16.maxy;var _this29=c1.aabb;var a14=node2.aabb;var b17=g3.aabb;_this29.minx=a14.minx<b17.minx?a14.minx:b17.minx;_this29.miny=a14.miny<b17.miny?a14.miny:b17.miny;_this29.maxx=a14.maxx>b17.maxx?a14.maxx:b17.maxx;_this29.maxy=a14.maxy>b17.maxy?a14.maxy:b17.maxy;var x11=b13.height;var y11=f2.height;node2.height=1+(x11>y11?x11:y11);var x12=node2.height;var y12=g3.height;c1.height=1+(x12>y12?x12:y12)}node2=c1}else if(balance1<-1){var f3=b13.child1;var g4=b13.child2;b13.child1=node2;b13.parent=node2.parent;node2.parent=b13;if(b13.parent!=null){if(b13.parent.child1==node2){b13.parent.child1=b13}else{b13.parent.child2=b13}}else{tree1.root=b13}if(f3.height>g4.height){b13.child2=f3;node2.child1=g4;g4.parent=node2;var _this30=node2.aabb;var a15=c1.aabb;var b18=g4.aabb;_this30.minx=a15.minx<b18.minx?a15.minx:b18.minx;_this30.miny=a15.miny<b18.miny?a15.miny:b18.miny;_this30.maxx=a15.maxx>b18.maxx?a15.maxx:b18.maxx;_this30.maxy=a15.maxy>b18.maxy?a15.maxy:b18.maxy;var _this31=b13.aabb;var a16=node2.aabb;var b19=f3.aabb;_this31.minx=a16.minx<b19.minx?a16.minx:b19.minx;_this31.miny=a16.miny<b19.miny?a16.miny:b19.miny;_this31.maxx=a16.maxx>b19.maxx?a16.maxx:b19.maxx;_this31.maxy=a16.maxy>b19.maxy?a16.maxy:b19.maxy;var x13=c1.height;var y13=g4.height;node2.height=1+(x13>y13?x13:y13);var x14=node2.height;var y14=f3.height;b13.height=1+(x14>y14?x14:y14)}else{b13.child2=g4;node2.child1=f3;f3.parent=node2;var _this32=node2.aabb;var a17=c1.aabb;var b20=f3.aabb;_this32.minx=a17.minx<b20.minx?a17.minx:b20.minx;_this32.miny=a17.miny<b20.miny?a17.miny:b20.miny;_this32.maxx=a17.maxx>b20.maxx?a17.maxx:b20.maxx;_this32.maxy=a17.maxy>b20.maxy?a17.maxy:b20.maxy;var _this33=b13.aabb;var a18=node2.aabb;var b21=g4.aabb;_this33.minx=a18.minx<b21.minx?a18.minx:b21.minx;_this33.miny=a18.miny<b21.miny?a18.miny:b21.miny;_this33.maxx=a18.maxx>b21.maxx?a18.maxx:b21.maxx;_this33.maxy=a18.maxy>b21.maxy?a18.maxy:b21.maxy;var x15=c1.height;var y15=f3.height;node2.height=1+(x15>y15?x15:y15);var x16=node2.height;var y16=g4.height;b13.height=1+(x16>y16?x16:y16)}node2=b13}else{node2=node2}}var child12=node2.child1;var child22=node2.child2;var x17=child12.height;var y17=child22.height;node2.height=1+(x17>y17?x17:y17);var _this34=node2.aabb;var a19=child12.aabb;var b22=child22.aabb;_this34.minx=a19.minx<b22.minx?a19.minx:b22.minx;_this34.miny=a19.miny<b22.miny?a19.miny:b22.miny;_this34.maxx=a19.maxx>b22.maxx?a19.maxx:b22.maxx;_this34.maxy=a19.maxy>b22.maxy?a19.maxy:b22.maxy;node2=node2.parent}}node.synced=false;node=node.snext}while(this.syncs!=null){var ret=this.syncs;this.syncs=ret.snext;ret.snext=null;if(ret.moved){continue}ret.moved=false;var lshape=ret.shape;if(lshape.body.component.sleeping){continue}var ab=ret.aabb;var stack=null;if(this.dtree.root!=null){this.dtree.root.next=stack;stack=this.dtree.root}while(stack!=null){var ret1=stack;stack=ret1.next;ret1.next=null;if(ret1==ret){continue}if(ret1.child1==null){var shape1=ret1.shape;if(shape1.body!=lshape.body&&!(shape1.body.type==1&&lshape.body.type==1)){var x18=ret1.aabb;if(x18.miny<=ab.maxy&&ab.miny<=x18.maxy&&x18.minx<=ab.maxx&&ab.minx<=x18.maxx){var id;var di;if(lshape.id<shape1.id){id=lshape.id;di=shape1.id}else{id=shape1.id;di=lshape.id}var p1=null;var cx_ite3=(lshape.pairs.length<shape1.pairs.length?lshape:shape1).pairs.head;while(cx_ite3!=null){var px=cx_ite3.elt;if(px.id==id&&px.di==di){p1=px;break}cx_ite3=cx_ite3.next}if(p1!=null){if(p1.sleeping){p1.sleeping=false;p1.next=this.pairs;this.pairs=p1;p1.first=true}continue}if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool==null){p1=new zpp_$nape_space_ZPP_$AABBPair}else{p1=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=p1.next;p1.next=null}p1.n1=ret;p1.n2=ret1;p1.id=id;p1.di=di;p1.next=this.pairs;this.pairs=p1;p1.first=true;var _this35=lshape.pairs;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret2.next;ret2.next=null}ret2.elt=p1;var temp=ret2;temp.next=_this35.head;_this35.head=temp;_this35.modified=true;_this35.length++;var _this36=shape1.pairs;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret3.next;ret3.next=null}ret3.elt=p1;var temp1=ret3;temp1.next=_this36.head;_this36.head=temp1;_this36.modified=true;_this36.length++}}}else{var x19=ret1.aabb;if(x19.miny<=ab.maxy&&ab.miny<=x19.maxy&&x19.minx<=ab.maxx&&ab.minx<=x19.maxx){if(ret1.child1!=null){ret1.child1.next=stack;stack=ret1.child1}if(ret1.child2!=null){ret1.child2.next=stack;stack=ret1.child2}}}}if(this.stree.root!=null){this.stree.root.next=stack;stack=this.stree.root}while(stack!=null){var ret4=stack;stack=ret4.next;ret4.next=null;if(ret4==ret){continue}if(ret4.child1==null){var shape2=ret4.shape;if(shape2.body!=lshape.body&&!(shape2.body.type==1&&lshape.body.type==1)){var x20=ret4.aabb;if(x20.miny<=ab.maxy&&ab.miny<=x20.maxy&&x20.minx<=ab.maxx&&ab.minx<=x20.maxx){var id1;var di1;if(lshape.id<shape2.id){id1=lshape.id;di1=shape2.id}else{id1=shape2.id;di1=lshape.id}var p2=null;var cx_ite4=(lshape.pairs.length<shape2.pairs.length?lshape:shape2).pairs.head;while(cx_ite4!=null){var px1=cx_ite4.elt;if(px1.id==id1&&px1.di==di1){p2=px1;break}cx_ite4=cx_ite4.next}if(p2!=null){if(p2.sleeping){p2.sleeping=false;p2.next=this.pairs;this.pairs=p2;p2.first=true}continue}if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool==null){p2=new zpp_$nape_space_ZPP_$AABBPair}else{p2=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=p2.next;p2.next=null}p2.n1=ret;p2.n2=ret4;p2.id=id1;p2.di=di1;p2.next=this.pairs;this.pairs=p2;p2.first=true;var _this37=lshape.pairs;var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret5.next;ret5.next=null}ret5.elt=p2;var temp2=ret5;temp2.next=_this37.head;_this37.head=temp2;_this37.modified=true;_this37.length++;var _this38=shape2.pairs;var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret6.next;ret6.next=null}ret6.elt=p2;var temp3=ret6;temp3.next=_this38.head;_this38.head=temp3;_this38.modified=true;_this38.length++}}}else{var x21=ret4.aabb;if(x21.miny<=ab.maxy&&ab.miny<=x21.maxy&&x21.minx<=ab.maxx&&ab.minx<=x21.maxx){if(ret4.child1!=null){ret4.child1.next=stack;stack=ret4.child1}if(ret4.child2!=null){ret4.child2.next=stack;stack=ret4.child2}}}}}while(this.moves!=null){var ret7=this.moves;this.moves=ret7.mnext;ret7.mnext=null;ret7.moved=false;var lshape1=ret7.shape;if(lshape1.body.component.sleeping){continue}var ab1=ret7.aabb;var stack1=null;if(this.dtree.root!=null){this.dtree.root.next=stack1;stack1=this.dtree.root}while(stack1!=null){var ret8=stack1;stack1=ret8.next;ret8.next=null;if(ret8==ret7){continue}if(ret8.child1==null){var shape3=ret8.shape;if(shape3.body!=lshape1.body&&!(shape3.body.type==1&&lshape1.body.type==1)){var x22=ret8.aabb;if(x22.miny<=ab1.maxy&&ab1.miny<=x22.maxy&&x22.minx<=ab1.maxx&&ab1.minx<=x22.maxx){var id2;var di2;if(lshape1.id<shape3.id){id2=lshape1.id;di2=shape3.id}else{id2=shape3.id;di2=lshape1.id}var p3=null;var cx_ite5=(lshape1.pairs.length<shape3.pairs.length?lshape1:shape3).pairs.head;while(cx_ite5!=null){var px2=cx_ite5.elt;if(px2.id==id2&&px2.di==di2){p3=px2;break}cx_ite5=cx_ite5.next}if(p3!=null){if(p3.sleeping){p3.sleeping=false;p3.next=this.pairs;this.pairs=p3;p3.first=true}continue}if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool==null){p3=new zpp_$nape_space_ZPP_$AABBPair}else{p3=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=p3.next;p3.next=null}p3.n1=ret7;p3.n2=ret8;p3.id=id2;p3.di=di2;p3.next=this.pairs;this.pairs=p3;p3.first=true;var _this39=lshape1.pairs;var ret9;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret9=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret9=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret9.next;ret9.next=null}ret9.elt=p3;var temp4=ret9;temp4.next=_this39.head;_this39.head=temp4;_this39.modified=true;_this39.length++;var _this40=shape3.pairs;var ret10;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret10=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret10=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret10.next;ret10.next=null}ret10.elt=p3;var temp5=ret10;temp5.next=_this40.head;_this40.head=temp5;_this40.modified=true;_this40.length++}}}else{var x23=ret8.aabb;if(x23.miny<=ab1.maxy&&ab1.miny<=x23.maxy&&x23.minx<=ab1.maxx&&ab1.minx<=x23.maxx){if(ret8.child1!=null){ret8.child1.next=stack1;stack1=ret8.child1}if(ret8.child2!=null){ret8.child2.next=stack1;stack1=ret8.child2}}}}if(this.stree.root!=null){this.stree.root.next=stack1;stack1=this.stree.root}while(stack1!=null){var ret11=stack1;stack1=ret11.next;ret11.next=null;if(ret11==ret7){continue}if(ret11.child1==null){var shape4=ret11.shape;if(shape4.body!=lshape1.body&&!(shape4.body.type==1&&lshape1.body.type==1)){var x24=ret11.aabb;if(x24.miny<=ab1.maxy&&ab1.miny<=x24.maxy&&x24.minx<=ab1.maxx&&ab1.minx<=x24.maxx){var id3;var di3;if(lshape1.id<shape4.id){id3=lshape1.id;di3=shape4.id}else{id3=shape4.id;di3=lshape1.id}var p4=null;var cx_ite6=(lshape1.pairs.length<shape4.pairs.length?lshape1:shape4).pairs.head;while(cx_ite6!=null){var px3=cx_ite6.elt;if(px3.id==id3&&px3.di==di3){p4=px3;break}cx_ite6=cx_ite6.next}if(p4!=null){if(p4.sleeping){p4.sleeping=false;p4.next=this.pairs;this.pairs=p4;p4.first=true}continue}if(zpp_$nape_space_ZPP_$AABBPair.zpp_pool==null){p4=new zpp_$nape_space_ZPP_$AABBPair}else{p4=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=p4.next;p4.next=null}p4.n1=ret7;p4.n2=ret11;p4.id=id3;p4.di=di3;p4.next=this.pairs;this.pairs=p4;p4.first=true;var _this41=lshape1.pairs;var ret12;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret12=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret12=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret12.next;ret12.next=null}ret12.elt=p4;var temp6=ret12;temp6.next=_this41.head;_this41.head=temp6;_this41.modified=true;_this41.length++;var _this42=shape4.pairs;var ret13;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool==null){ret13=new zpp_$nape_util_ZNPNode_$ZPP_$AABBPair}else{ret13=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret13.next;ret13.next=null}ret13.elt=p4;var temp7=ret13;temp7.next=_this42.head;_this42.head=temp7;_this42.modified=true;_this42.length++}}}else{var x25=ret11.aabb;if(x25.miny<=ab1.maxy&&ab1.miny<=x25.maxy&&x25.minx<=ab1.maxx&&ab1.minx<=x25.maxx){if(ret11.child1!=null){ret11.child1.next=stack1;stack1=ret11.child1}if(ret11.child2!=null){ret11.child2.next=stack1;stack1=ret11.child2}}}}}var pre=null;var cur=this.pairs;while(cur!=null){var tmp;if(!cur.first){var _this43=cur.n1.aabb;var x26=cur.n2.aabb;tmp=!(x26.miny<=_this43.maxy&&_this43.miny<=x26.maxy&&x26.minx<=_this43.maxx&&_this43.minx<=x26.maxx)}else{tmp=false}if(tmp){if(pre==null){this.pairs=cur.next}else{pre.next=cur.next}var _this44=cur.n1.shape.pairs;var pre1=null;var cur1=_this44.head;while(cur1!=null){if(cur1.elt==cur){var old;var ret14;if(pre1==null){old=_this44.head;ret14=old.next;_this44.head=ret14;if(_this44.head==null){_this44.pushmod=true}}else{old=pre1.next;ret14=old.next;pre1.next=ret14;if(ret14==null){_this44.pushmod=true}}var o2=old;o2.elt=null;o2.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o2;_this44.modified=true;_this44.length--;_this44.pushmod=true;break}pre1=cur1;cur1=cur1.next}var _this45=cur.n2.shape.pairs;var pre2=null;var cur2=_this45.head;while(cur2!=null){if(cur2.elt==cur){var old1;var ret15;if(pre2==null){old1=_this45.head;ret15=old1.next;_this45.head=ret15;if(_this45.head==null){_this45.pushmod=true}}else{old1=pre2.next;ret15=old1.next;pre2.next=ret15;if(ret15==null){_this45.pushmod=true}}var o3=old1;o3.elt=null;o3.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o3;_this45.modified=true;_this45.length--;_this45.pushmod=true;break}pre2=cur2;cur2=cur2.next}var nxt=cur.next;if(cur.arb!=null){cur.arb.pair=null}cur.arb=null;var o4=cur;o4.n1=o4.n2=null;o4.sleeping=false;o4.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=o4;cur=nxt;continue}var s1=cur.n1.shape;var b110=s1.body;var s2=cur.n2.shape;var b23=s2.body;if(!cur.first){if((b110.component.sleeping||b110.type==1)&&(b23.component.sleeping||b23.type==1)){cur.sleeping=true;if(pre==null){this.pairs=cur.next}else{pre.next=cur.next}cur=cur.next;continue}}cur.first=false;var _this46=s1.aabb;var x27=s2.aabb;if(x27.miny<=_this46.maxy&&_this46.miny<=x27.maxy&&x27.minx<=_this46.maxx&&_this46.minx<=x27.maxx){var oarb=cur.arb;if(discrete){cur.arb=space.narrowPhase(s1,s2,b110.type!=2||b23.type!=2,cur.arb,false)}else{cur.arb=space.continuousEvent(s1,s2,b110.type!=2||b23.type!=2,cur.arb,false)}if(cur.arb==null){if(oarb!=null){oarb.pair=null}}else{cur.arb.pair=cur}}pre=cur;cur=cur.next}},clear:function(){while(this.syncs!=null){var next=this.syncs.snext;this.syncs.snext=null;if(this.syncs.first_sync){this.syncs.shape.node=null;this.syncs.shape.removedFromSpace();this.syncs.shape=null}this.syncs=next}while(this.moves!=null){var next1=this.moves.mnext;this.moves.mnext=null;if(this.moves.first_sync){this.moves.shape.node=null;this.moves.shape.removedFromSpace();this.moves.shape=null}this.moves=next1}while(this.pairs!=null){var nxt=this.pairs.next;if(this.pairs.arb!=null){this.pairs.arb.pair=null}this.pairs.arb=null;var _this=this.pairs.n1.shape.pairs;var obj=this.pairs;var pre=null;var cur=_this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;break}pre=cur;cur=cur.next}var _this1=this.pairs.n2.shape.pairs;var obj1=this.pairs;var pre1=null;var cur1=_this1.head;while(cur1!=null){if(cur1.elt==obj1){var old1;var ret1;if(pre1==null){old1=_this1.head;ret1=old1.next;_this1.head=ret1;if(_this1.head==null){_this1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){_this1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o1;_this1.modified=true;_this1.length--;_this1.pushmod=true;break}pre1=cur1;cur1=cur1.next}var o2=this.pairs;o2.n1=o2.n2=null;o2.sleeping=false;o2.next=zpp_$nape_space_ZPP_$AABBPair.zpp_pool;zpp_$nape_space_ZPP_$AABBPair.zpp_pool=o2;this.pairs=nxt}this.dtree.clear();this.stree.clear()},treeStack:null,bodiesUnderPoint:function(x,y,filter,output){this.sync_broadphase();var ret;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Vec2}else{ret=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.weak=false;ret._immutable=false;ret.x=x;ret.y=y;var v=ret;var ret1=output==null?new nape_phys_BodyList:output;if(this.stree.root!=null){if(this.treeStack==null){this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode}this.treeStack.add(this.stree.root);while(this.treeStack.head!=null){var node=this.treeStack.pop_unsafe();var _this=node.aabb;if(v.x>=_this.minx&&v.x<=_this.maxx&&v.y>=_this.miny&&v.y<=_this.maxy){if(node.child1==null){var body=node.shape.body.outer;if(!ret1.has(body)){var tmp;if(filter!=null){var _this1=node.shape.filter;tmp=(_this1.collisionMask&filter.collisionGroup)!=0&&(filter.collisionMask&_this1.collisionGroup)!=0}else{tmp=true}if(tmp){if(node.shape.type==0){if(zpp_$nape_geom_ZPP_$Collide.circleContains(node.shape.circle,v)){ret1.push(body)}}else if(zpp_$nape_geom_ZPP_$Collide.polyContains(node.shape.polygon,v)){ret1.push(body)}}}}else{if(node.child1!=null){this.treeStack.add(node.child1)}if(node.child2!=null){this.treeStack.add(node.child2)}}}}}if(this.dtree.root!=null){if(this.treeStack==null){this.treeStack=new zpp_$nape_util_ZNPList_$ZPP_$AABBNode}this.treeStack.add(this.dtree.root);while(this.treeStack.head!=null){var node1=this.treeStack.pop_unsafe();var _this2=node1.aabb;if(v.x>=_this2.minx&&v.x<=_this2.maxx&&v.y>=_this2.miny&&v.y<=_this2.maxy){if(node1.child1==null){var body1=node1.shape.body.outer;if(!ret1.has(body1)){var tmp1;if(filter!=null){var _this3=node1.shape.filter;tmp1=(_this3.collisionMask&filter.collisionGroup)!=0&&(filter.collisionMask&_this3.collisionGroup)!=0}else{tmp1=true}if(tmp1){if(node1.shape.type==0){if(zpp_$nape_geom_ZPP_$Collide.circleContains(node1.shape.circle,v)){ret1.push(body1)}}else if(zpp_$nape_geom_ZPP_$Collide.polyContains(node1.shape.polygon,v)){ret1.push(body1)}}}}else{if(node1.child1!=null){this.treeStack.add(node1.child1)}if(node1.child2!=null){this.treeStack.add(node1.child2)}}}}}if(v.outer!=null){v.outer.zpp_inner=null;v.outer=null}v._isimmutable=null;v._validate=null;v._invalidate=null;v.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=v;return ret1},__class__:zpp_$nape_space_ZPP_$DynAABBPhase});var zpp_$nape_space_ZPP_$Island=function(){this.waket=0;this.sleep=false;this.comps=null;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.comps=new zpp_$nape_util_ZNPList_$ZPP_$Component};$hxClasses["zpp_nape.space.ZPP_Island"]=zpp_$nape_space_ZPP_$Island;zpp_$nape_space_ZPP_$Island.__name__="zpp_nape.space.ZPP_Island";zpp_$nape_space_ZPP_$Island.prototype={next:null,_inuse:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.next;this.next=ret.next;ret._inuse=false;if(this.next==null){this.pushmod=true}this.modified=true;this.length--},comps:null,sleep:null,waket:null,__class__:zpp_$nape_space_ZPP_$Island};var zpp_$nape_space_ZPP_$Component=function(){this.woken=false;this.waket=0;this.sleeping=false;this.island=null;this.constraint=null;this.body=null;this.isBody=false;this.rank=0;this.parent=null;this.next=null;this.sleeping=false;this.island=null;this.parent=this;this.rank=0;this.woken=false};$hxClasses["zpp_nape.space.ZPP_Component"]=zpp_$nape_space_ZPP_$Component;zpp_$nape_space_ZPP_$Component.__name__="zpp_nape.space.ZPP_Component";zpp_$nape_space_ZPP_$Component.prototype={next:null,parent:null,rank:null,isBody:null,body:null,constraint:null,island:null,sleeping:null,waket:null,woken:null,__class__:zpp_$nape_space_ZPP_$Component};var zpp_$nape_space_ZPP_$CallbackSet=function(){this.lazydel=false;this.freed=false;this.length=0;this.pushmod=false;this.modified=false;this._inuse=false;this.next=null;this.int2=null;this.int1=null;this.di=0;this.id=0;this.arbiters=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter};$hxClasses["zpp_nape.space.ZPP_CallbackSet"]=zpp_$nape_space_ZPP_$CallbackSet;zpp_$nape_space_ZPP_$CallbackSet.__name__="zpp_nape.space.ZPP_CallbackSet";zpp_$nape_space_ZPP_$CallbackSet.get=function(i1,i2){var ret;if(zpp_$nape_space_ZPP_$CallbackSet.zpp_pool==null){ret=new zpp_$nape_space_ZPP_$CallbackSet}else{ret=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=ret.next;ret.next=null}ret.freed=false;ret.lazydel=false;ret.COLLISIONstate=1;ret.COLLISIONstamp=0;ret.SENSORstate=1;ret.SENSORstamp=0;ret.FLUIDstate=1;ret.FLUIDstamp=0;if(i1.id<i2.id){ret.int1=i1;ret.int2=i2}else{ret.int1=i2;ret.int2=i1}ret.id=ret.int1.id;ret.di=ret.int2.id;return ret};zpp_$nape_space_ZPP_$CallbackSet.prototype={id:null,di:null,int1:null,int2:null,arbiters:null,COLLISIONstate:null,COLLISIONstamp:null,SENSORstate:null,SENSORstamp:null,FLUIDstate:null,FLUIDstamp:null,next:null,_inuse:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.next;this.next=ret.next;ret._inuse=false;if(this.next==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.next;this.pop();return ret},freed:null,lazydel:null,remove_arb:function(x){var _this=this.arbiters;var pre=null;var cur=_this.head;while(cur!=null){if(cur.elt==x){var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;break}pre=cur;cur=cur.next}},empty_arb:function(type){var retvar;retvar=true;var cx_ite=this.arbiters.head;while(cx_ite!=null)if((cx_ite.elt.type&type)==0){cx_ite=cx_ite.next;continue}else{retvar=false;break}return retvar},__class__:zpp_$nape_space_ZPP_$CallbackSet};var zpp_$nape_space_ZPP_$CbSetManager=function(space){this.space=null;this.cbsets=null;if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool==null){this.cbsets=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet}else{this.cbsets=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=this.cbsets.next;this.cbsets.next=null}this.cbsets.lt=zpp_$nape_callbacks_ZPP_$CbSet.setlt;this.space=space};$hxClasses["zpp_nape.space.ZPP_CbSetManager"]=zpp_$nape_space_ZPP_$CbSetManager;zpp_$nape_space_ZPP_$CbSetManager.__name__="zpp_nape.space.ZPP_CbSetManager";zpp_$nape_space_ZPP_$CbSetManager.prototype={cbsets:null,space:null,get:function(cbTypes){if(cbTypes.head==null){return null}var fake;if(zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool==null){fake=new zpp_$nape_callbacks_ZPP_$CbSet}else{fake=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=fake.next;fake.next=null}var faketypes=fake.cbTypes;fake.cbTypes=cbTypes;var res=this.cbsets.find_weak(fake);var ret;if(res!=null){ret=res.data}else{var set=zpp_$nape_callbacks_ZPP_$CbSet.get(cbTypes);this.cbsets.insert(set);set.manager=this;ret=set}fake.cbTypes=faketypes;var o=fake;o.listeners.clear();o.zip_listeners=true;o.bodylisteners.clear();o.zip_bodylisteners=true;o.conlisteners.clear();o.zip_conlisteners=true;while(o.cbTypes.head!=null)o.cbTypes.pop_unsafe().cbsets.remove(o);o.next=zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSet.zpp_pool=o;return ret},remove:function(set){this.cbsets.remove(set);while(set.cbpairs.head!=null){var pair=set.cbpairs.pop_unsafe();if(pair.a!=pair.b){if(set==pair.a){pair.b.cbpairs.remove(pair)}else{pair.a.cbpairs.remove(pair)}}pair.a=pair.b=null;pair.listeners.clear();pair.next=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=pair}set.manager=null},__class__:zpp_$nape_space_ZPP_$CbSetManager};var zpp_$nape_space_ZPP_$Space=function(gravity,broadphase){this.prelisteners=null;this.precb=null;this.continuous=false;this.toiEvents=null;this.pre_dt=0;this.cbsets=null;this.callbackset_list=null;this.callbacks=null;this.wrap_listeners=null;this.listeners=null;this.islands=null;this.staticsleep=null;this.wrap_livecon=null;this.live_constraints=null;this.wrap_live=null;this.live=null;this.s_arbiters=null;this.f_arbiters=null;this.c_arbiters_false=null;this.c_arbiters_true=null;this.sortcontacts=false;this.time=0;this.midstep=false;this.stamp=0;this.global_ang_drag=0;this.global_lin_drag=0;this.__static=null;this.bphase=null;this.kinematics=null;this.wrap_constraints=null;this.constraints=null;this.wrap_compounds=null;this.compounds=null;this.wrap_bodies=null;this.bodies=null;this.gravityy=0;this.gravityx=0;this.outer=null;this.toiEvents=new zpp_$nape_util_ZNPList_$ZPP_$ToiEvent;this.global_lin_drag=.015;this.global_ang_drag=.015;this.precb=new nape_callbacks_PreCallback;this.precb.zpp_inner=new zpp_$nape_callbacks_ZPP_$Callback;this.sortcontacts=true;this.pre_dt=0;var tmp;if(broadphase!=null){if(zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE=new nape_space_Broadphase;zpp_$nape_util_ZPP_$Flags.internal=false}tmp=broadphase==zpp_$nape_util_ZPP_$Flags.Broadphase_DYNAMIC_AABB_TREE}else{tmp=true}if(tmp){this.bphase=new zpp_$nape_space_ZPP_$DynAABBPhase(this)}else{if(zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE=new nape_space_Broadphase;zpp_$nape_util_ZPP_$Flags.internal=false}if(broadphase==zpp_$nape_util_ZPP_$Flags.Broadphase_SWEEP_AND_PRUNE){this.bphase=new zpp_$nape_space_ZPP_$SweepPhase(this)}}this.time=0;if(gravity!=null){this.gravityx=gravity.x;this.gravityy=gravity.y}else{this.gravityx=0;this.gravityy=0}this.bodies=new zpp_$nape_util_ZNPList_$ZPP_$Body;this.wrap_bodies=zpp_$nape_util_ZPP_$BodyList.get(this.bodies);this.wrap_bodies.zpp_inner.adder=$bind(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=$bind(this,this.bodies_subber);this.compounds=new zpp_$nape_util_ZNPList_$ZPP_$Compound;this.wrap_compounds=zpp_$nape_util_ZPP_$CompoundList.get(this.compounds);this.wrap_compounds.zpp_inner.adder=$bind(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=$bind(this,this.compounds_subber);this.kinematics=new zpp_$nape_util_ZNPList_$ZPP_$Body;this.c_arbiters_true=new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter;this.c_arbiters_false=new zpp_$nape_util_ZNPList_$ZPP_$ColArbiter;this.f_arbiters=new zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter;this.s_arbiters=new zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter;this.islands=new zpp_$nape_space_ZPP_$Island;this.live=new zpp_$nape_util_ZNPList_$ZPP_$Body;this.wrap_live=zpp_$nape_util_ZPP_$BodyList.get(this.live,true);this.staticsleep=new zpp_$nape_util_ZNPList_$ZPP_$Body;this.constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.wrap_constraints=zpp_$nape_util_ZPP_$ConstraintList.get(this.constraints);this.wrap_constraints.zpp_inner.adder=$bind(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=$bind(this,this.constraints_subber);this.live_constraints=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this.wrap_livecon=zpp_$nape_util_ZPP_$ConstraintList.get(this.live_constraints,true);this.__static=zpp_$nape_phys_ZPP_$Body.__static();this.__static.zpp_inner.space=this;this.callbacks=new zpp_$nape_callbacks_ZPP_$Callback;this.midstep=false;this.listeners=new zpp_$nape_util_ZNPList_$ZPP_$Listener;this.wrap_listeners=zpp_$nape_util_ZPP_$ListenerList.get(this.listeners);this.wrap_listeners.zpp_inner.adder=$bind(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=$bind(this,this.listeners_subber);this.callbackset_list=new zpp_$nape_space_ZPP_$CallbackSet;this.mrca1=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;this.mrca2=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;this.prelisteners=new zpp_$nape_util_ZNPList_$ZPP_$InteractionListener;this.cbsets=new zpp_$nape_space_ZPP_$CbSetManager(this)};$hxClasses["zpp_nape.space.ZPP_Space"]=zpp_$nape_space_ZPP_$Space;zpp_$nape_space_ZPP_$Space.__name__="zpp_nape.space.ZPP_Space";zpp_$nape_space_ZPP_$Space.prototype={outer:null,gravityx:null,gravityy:null,bodies:null,wrap_bodies:null,compounds:null,wrap_compounds:null,constraints:null,wrap_constraints:null,kinematics:null,bphase:null,__static:null,global_lin_drag:null,global_ang_drag:null,stamp:null,midstep:null,time:null,sortcontacts:null,c_arbiters_true:null,c_arbiters_false:null,f_arbiters:null,s_arbiters:null,live:null,wrap_live:null,live_constraints:null,wrap_livecon:null,staticsleep:null,islands:null,listeners:null,wrap_listeners:null,callbacks:null,callbackset_list:null,cbsets:null,clear:function(){while(this.listeners.head!=null)this.remListener(this.listeners.pop_unsafe());while(this.callbackset_list.next!=null){var c=this.callbackset_list.pop_unsafe();c.arbiters.clear();c.int1=c.int2=null;c.id=c.di=-1;c.freed=true;c.next=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=c}while(this.c_arbiters_true.head!=null){var arb=this.c_arbiters_true.pop_unsafe();if(!arb.cleared){var _this=arb.b1.arbiters;var pre=null;var cur=_this.head;while(cur!=null){if(cur.elt==arb){var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;break}pre=cur;cur=cur.next}var _this1=arb.b2.arbiters;var pre1=null;var cur1=_this1.head;while(cur1!=null){if(cur1.elt==arb){var old1;var ret1;if(pre1==null){old1=_this1.head;ret1=old1.next;_this1.head=ret1;if(_this1.head==null){_this1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){_this1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o1;_this1.modified=true;_this1.length--;_this1.pushmod=true;break}pre1=cur1;cur1=cur1.next}if(arb.pair!=null){arb.pair.arb=null;arb.pair=null}}arb.b1=arb.b2=null;arb.active=false;arb.intchange=false;while(arb.contacts.next!=null){var _this2=arb.contacts;var ret2=_this2.next;_this2.pop();ret2.arbiter=null;ret2.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=ret2;var _this3=arb.innards;var ret3=_this3.next;_this3.next=ret3.next;ret3._inuse=false;if(_this3.next==null){_this3.pushmod=true}_this3.modified=true;_this3.length--}arb.userdef_dyn_fric=false;arb.userdef_stat_fric=false;arb.userdef_restitution=false;arb.userdef_rfric=false;arb.__ref_edge1=arb.__ref_edge2=null;arb.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=arb;arb.pre_dt=-1}while(this.c_arbiters_false.head!=null){var arb1=this.c_arbiters_false.pop_unsafe();if(!arb1.cleared){var _this4=arb1.b1.arbiters;var pre2=null;var cur2=_this4.head;while(cur2!=null){if(cur2.elt==arb1){var old2;var ret4;if(pre2==null){old2=_this4.head;ret4=old2.next;_this4.head=ret4;if(_this4.head==null){_this4.pushmod=true}}else{old2=pre2.next;ret4=old2.next;pre2.next=ret4;if(ret4==null){_this4.pushmod=true}}var o2=old2;o2.elt=null;o2.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o2;_this4.modified=true;_this4.length--;_this4.pushmod=true;break}pre2=cur2;cur2=cur2.next}var _this5=arb1.b2.arbiters;var pre3=null;var cur3=_this5.head;while(cur3!=null){if(cur3.elt==arb1){var old3;var ret5;if(pre3==null){old3=_this5.head;ret5=old3.next;_this5.head=ret5;if(_this5.head==null){_this5.pushmod=true}}else{old3=pre3.next;ret5=old3.next;pre3.next=ret5;if(ret5==null){_this5.pushmod=true}}var o3=old3;o3.elt=null;o3.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o3;_this5.modified=true;_this5.length--;_this5.pushmod=true;break}pre3=cur3;cur3=cur3.next}if(arb1.pair!=null){arb1.pair.arb=null;arb1.pair=null}}arb1.b1=arb1.b2=null;arb1.active=false;arb1.intchange=false;while(arb1.contacts.next!=null){var _this6=arb1.contacts;var ret6=_this6.next;_this6.pop();ret6.arbiter=null;ret6.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=ret6;var _this7=arb1.innards;var ret7=_this7.next;_this7.next=ret7.next;ret7._inuse=false;if(_this7.next==null){_this7.pushmod=true}_this7.modified=true;_this7.length--}arb1.userdef_dyn_fric=false;arb1.userdef_stat_fric=false;arb1.userdef_restitution=false;arb1.userdef_rfric=false;arb1.__ref_edge1=arb1.__ref_edge2=null;arb1.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=arb1;arb1.pre_dt=-1}while(this.s_arbiters.head!=null){var arb2=this.s_arbiters.pop_unsafe();if(!arb2.cleared){var _this8=arb2.b1.arbiters;var pre4=null;var cur4=_this8.head;while(cur4!=null){if(cur4.elt==arb2){var old4;var ret8;if(pre4==null){old4=_this8.head;ret8=old4.next;_this8.head=ret8;if(_this8.head==null){_this8.pushmod=true}}else{old4=pre4.next;ret8=old4.next;pre4.next=ret8;if(ret8==null){_this8.pushmod=true}}var o4=old4;o4.elt=null;o4.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o4;_this8.modified=true;_this8.length--;_this8.pushmod=true;break}pre4=cur4;cur4=cur4.next}var _this9=arb2.b2.arbiters;var pre5=null;var cur5=_this9.head;while(cur5!=null){if(cur5.elt==arb2){var old5;var ret9;if(pre5==null){old5=_this9.head;ret9=old5.next;_this9.head=ret9;if(_this9.head==null){_this9.pushmod=true}}else{old5=pre5.next;ret9=old5.next;pre5.next=ret9;if(ret9==null){_this9.pushmod=true}}var o5=old5;o5.elt=null;o5.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o5;_this9.modified=true;_this9.length--;_this9.pushmod=true;break}pre5=cur5;cur5=cur5.next}if(arb2.pair!=null){arb2.pair.arb=null;arb2.pair=null}}arb2.b1=arb2.b2=null;arb2.active=false;arb2.intchange=false;arb2.next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=arb2}while(this.f_arbiters.head!=null){var arb3=this.f_arbiters.pop_unsafe();if(!arb3.cleared){var _this10=arb3.b1.arbiters;var pre6=null;var cur6=_this10.head;while(cur6!=null){if(cur6.elt==arb3){var old6;var ret10;if(pre6==null){old6=_this10.head;ret10=old6.next;_this10.head=ret10;if(_this10.head==null){_this10.pushmod=true}}else{old6=pre6.next;ret10=old6.next;pre6.next=ret10;if(ret10==null){_this10.pushmod=true}}var o6=old6;o6.elt=null;o6.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o6;_this10.modified=true;_this10.length--;_this10.pushmod=true;break}pre6=cur6;cur6=cur6.next}var _this11=arb3.b2.arbiters;var pre7=null;var cur7=_this11.head;while(cur7!=null){if(cur7.elt==arb3){var old7;var ret11;if(pre7==null){old7=_this11.head;ret11=old7.next;_this11.head=ret11;if(_this11.head==null){_this11.pushmod=true}}else{old7=pre7.next;ret11=old7.next;pre7.next=ret11;if(ret11==null){_this11.pushmod=true}}var o7=old7;o7.elt=null;o7.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o7;_this11.modified=true;_this11.length--;_this11.pushmod=true;break}pre7=cur7;cur7=cur7.next}if(arb3.pair!=null){arb3.pair.arb=null;arb3.pair=null}}arb3.b1=arb3.b2=null;arb3.active=false;arb3.intchange=false;arb3.next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=arb3;arb3.pre_dt=-1}this.bphase.clear();while(this.bodies.head!=null){var b=this.bodies.pop_unsafe();if(b.component!=null){var i=b.component.island;if(i!=null){while(i.comps.head!=null){var c1=i.comps.pop_unsafe();c1.sleeping=false;c1.island=null;c1.parent=c1;c1.rank=0}i.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=i}}b.removedFromSpace();b.space=null}while(this.constraints.head!=null){var c2=this.constraints.pop_unsafe();if(c2.component!=null){var i1=c2.component.island;if(i1!=null){while(i1.comps.head!=null){var c3=i1.comps.pop_unsafe();c3.sleeping=false;c3.island=null;c3.parent=c3;c3.rank=0}i1.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=i1}}c2.removedFromSpace();c2.space=null}this.kinematics.clear();var stack=new zpp_$nape_util_ZNPList_$ZPP_$Compound;while(this.compounds.head!=null)stack.add(this.compounds.pop_unsafe());while(stack.head!=null){var comp=stack.pop_unsafe();comp.removedFromSpace();comp.space=null;var cx_ite=comp.bodies.head;while(cx_ite!=null){var b1=cx_ite.elt;if(b1.component!=null){var i2=b1.component.island;if(i2!=null){while(i2.comps.head!=null){var c4=i2.comps.pop_unsafe();c4.sleeping=false;c4.island=null;c4.parent=c4;c4.rank=0}i2.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=i2}}b1.removedFromSpace();b1.space=null;cx_ite=cx_ite.next}var cx_ite1=comp.constraints.head;while(cx_ite1!=null){var c5=cx_ite1.elt;if(c5.component!=null){var i3=c5.component.island;if(i3!=null){while(i3.comps.head!=null){var c6=i3.comps.pop_unsafe();c6.sleeping=false;c6.island=null;c6.parent=c6;c6.rank=0}i3.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=i3}}c5.removedFromSpace();c5.space=null;cx_ite1=cx_ite1.next}var cx_ite2=comp.compounds.head;while(cx_ite2!=null){stack.add(cx_ite2.elt);cx_ite2=cx_ite2.next}}this.staticsleep.clear();this.live.clear();this.live_constraints.clear();this.stamp=0;this.time=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear()},bodies_adder:function(x){if(x.zpp_inner.space!=this){if(x.zpp_inner.space!=null){x.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(x)}this.addBody(x.zpp_inner);return true}else{return false}},bodies_subber:function(x){this.remBody(x.zpp_inner)},compounds_adder:function(x){if(x.zpp_inner.space!=this){if(x.zpp_inner.space!=null){x.zpp_inner.space.wrap_compounds.remove(x)}this.addCompound(x.zpp_inner);return true}else{return false}},compounds_subber:function(x){this.remCompound(x.zpp_inner)},constraints_adder:function(x){if(x.zpp_inner.space!=this){if(x.zpp_inner.space!=null){x.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(x)}this.addConstraint(x.zpp_inner);return true}else{return false}},constraints_subber:function(x){this.remConstraint(x.zpp_inner)},listeners_adder:function(x){if(x.zpp_inner.space!=this){if(x.zpp_inner.space!=null){x.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(x)}this.addListener(x.zpp_inner);return true}else{return false}},listeners_subber:function(x){this.remListener(x.zpp_inner)},addListener:function(x){x.space=this;x.addedToSpace()},remListener:function(x){x.removedFromSpace();x.space=null},add_callbackset:function(cb){var _this=cb.int1.cbsets;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=ret.next;ret.next=null}ret.elt=cb;var temp=ret;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++;var _this1=cb.int2.cbsets;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=ret1.next;ret1.next=null}ret1.elt=cb;var temp1=ret1;temp1.next=_this1.head;_this1.head=temp1;_this1.modified=true;_this1.length++;var _this2=this.callbackset_list;cb._inuse=true;cb.next=_this2.next;_this2.next=cb;_this2.modified=true;_this2.length++},remove_callbackset:function(cb){cb.lazydel=true;var _this=cb.int1.cbsets;var pre=null;var cur=_this.head;while(cur!=null){if(cur.elt==cb){var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;break}pre=cur;cur=cur.next}var _this1=cb.int2.cbsets;var pre1=null;var cur1=_this1.head;while(cur1!=null){if(cur1.elt==cb){var old1;var ret1;if(pre1==null){old1=_this1.head;ret1=old1.next;_this1.head=ret1;if(_this1.head==null){_this1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){_this1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.zpp_pool=o1;_this1.modified=true;_this1.length--;_this1.pushmod=true;break}pre1=cur1;cur1=cur1.next}},transmitType:function(p,new_type){if(!p.world){p.component.waket=this.stamp+(this.midstep?0:1);if(p.type==3){p.kinematicDelaySleep=true}if(p.component.sleeping){this.really_wake(p,false)}}if(p.type==2){this.live.remove(p)}else if(p.type==3){this.kinematics.remove(p);this.staticsleep.remove(p)}else if(p.type==1){this.staticsleep.remove(p)}p.type=new_type;if(p.type==3){this.kinematics.add(p)}if(p.type==1){this.static_validation(p)}p.component.sleeping=true;if(!p.world){p.component.waket=this.stamp+(this.midstep?0:1);if(p.type==3){p.kinematicDelaySleep=true}if(p.component.sleeping){this.really_wake(p,true)}}},removed_shape:function(s,deleting){if(deleting==null){deleting=false}var _gthis=this;var body=s.body;if(!deleting){body.wake()}var pre=null;var cx_ite=body.arbiters.head;while(cx_ite!=null){var xarb=cx_ite.elt;if(xarb.ws1==s||xarb.ws2==s){if(xarb.present!=0){this.MRCA_chains(xarb.ws1,xarb.ws2);var cx_ite1=this.mrca1.head;while(cx_ite1!=null){var i1=cx_ite1.elt;var cx_ite2=this.mrca2.head;while(cx_ite2!=null){var i2=cx_ite2.elt;var cb1=i1.cbSet;var cb2=i2.cbSet;cb1.validate();cb2.validate();var ret=null;var cx_ite3=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite3!=null){var p=cx_ite3.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret=p;break}cx_ite3=cx_ite3.next}if(ret==null){var ret1;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret1=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret1=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret1.next;ret1.next=null}ret1.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret1.a=cb1;ret1.b=cb2}else{ret1.a=cb2;ret1.b=cb1}ret=ret1;cb1.cbpairs.add(ret);if(cb2!=cb1){cb2.cbpairs.add(ret)}}if(ret.zip_listeners){ret.zip_listeners=false;ret.__validate()}if(ret.listeners.head==null){cx_ite2=cx_ite2.next;continue}var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);callbackset.remove_arb(xarb);xarb.present--;var ret2=null;var cx_ite4=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite4!=null){var p1=cx_ite4.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret2=p1;break}cx_ite4=cx_ite4.next}if(ret2==null){var ret3;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret3=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret3=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret3.next;ret3.next=null}ret3.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret3.a=cb1;ret3.b=cb2}else{ret3.a=cb2;ret3.b=cb1}ret2=ret3;cb1.cbpairs.add(ret2);if(cb2!=cb1){cb2.cbpairs.add(ret2)}}if(ret2.zip_listeners){ret2.zip_listeners=false;ret2.__validate()}var cx_ite5=ret2.listeners.head;while(cx_ite5!=null){var x=cx_ite5.elt;if(x.event==1){if((x.itype&xarb.type)!=0&&callbackset.empty_arb(x.itype)){var cb=_gthis.push_callback(x);cb.event=1;var o1=callbackset.int1;var o2=callbackset.int2;var tmp;var _this=x.options1;var xs=o1.cbTypes;if(_this.nonemptyintersection(xs,_this.includes)&&!_this.nonemptyintersection(xs,_this.excludes)){var _this1=x.options2;var xs1=o2.cbTypes;tmp=_this1.nonemptyintersection(xs1,_this1.includes)&&!_this1.nonemptyintersection(xs1,_this1.excludes)}else{tmp=false}if(tmp){cb.int1=o1;cb.int2=o2}else{cb.int1=o2;cb.int2=o1}cb.set=callbackset}}cx_ite5=cx_ite5.next}if(callbackset.arbiters.head==null){this.remove_callbackset(callbackset)}cx_ite2=cx_ite2.next}cx_ite1=cx_ite1.next}}if(xarb.b1!=body&&xarb.b1.type==2){var o=xarb.b1;if(!o.world){o.component.waket=this.stamp+(this.midstep?0:1);if(o.type==3){o.kinematicDelaySleep=true}if(o.component.sleeping){this.really_wake(o,false)}}}if(xarb.b2!=body&&xarb.b2.type==2){var o3=xarb.b2;if(!o3.world){o3.component.waket=this.stamp+(this.midstep?0:1);if(o3.type==3){o3.kinematicDelaySleep=true}if(o3.component.sleeping){this.really_wake(o3,false)}}}xarb.cleared=true;if(body==null||xarb.b2==body){var _this2=xarb.b1.arbiters;var pre1=null;var cur=_this2.head;while(cur!=null){if(cur.elt==xarb){var old;var ret4;if(pre1==null){old=_this2.head;ret4=old.next;_this2.head=ret4;if(_this2.head==null){_this2.pushmod=true}}else{old=pre1.next;ret4=old.next;pre1.next=ret4;if(ret4==null){_this2.pushmod=true}}var o4=old;o4.elt=null;o4.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o4;_this2.modified=true;_this2.length--;_this2.pushmod=true;break}pre1=cur;cur=cur.next}}if(body==null||xarb.b1==body){var _this3=xarb.b2.arbiters;var pre2=null;var cur1=_this3.head;while(cur1!=null){if(cur1.elt==xarb){var old1;var ret5;if(pre2==null){old1=_this3.head;ret5=old1.next;_this3.head=ret5;if(_this3.head==null){_this3.pushmod=true}}else{old1=pre2.next;ret5=old1.next;pre2.next=ret5;if(ret5==null){_this3.pushmod=true}}var o5=old1;o5.elt=null;o5.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o5;_this3.modified=true;_this3.length--;_this3.pushmod=true;break}pre2=cur1;cur1=cur1.next}}if(xarb.pair!=null){xarb.pair.arb=null;xarb.pair=null}xarb.active=false;this.f_arbiters.modified=true;cx_ite=body.arbiters.erase(pre);continue}pre=cx_ite;cx_ite=cx_ite.next}this.bphase.remove(s);s.removedFromSpace()},addConstraint:function(con){con.space=this;con.addedToSpace();if(con.active){con.component.sleeping=true;this.wake_constraint(con,true)}},remConstraint:function(con){if(con.active){this.wake_constraint(con,true);this.live_constraints.remove(con)}con.removedFromSpace();con.space=null},addCompound:function(x){x.space=this;x.addedToSpace();var cx_ite=x.bodies.head;while(cx_ite!=null){this.addBody(cx_ite.elt);cx_ite=cx_ite.next}var cx_ite1=x.constraints.head;while(cx_ite1!=null){this.addConstraint(cx_ite1.elt);cx_ite1=cx_ite1.next}var cx_ite2=x.compounds.head;while(cx_ite2!=null){this.addCompound(cx_ite2.elt);cx_ite2=cx_ite2.next}},remCompound:function(x){var cx_ite=x.bodies.head;while(cx_ite!=null){this.remBody(cx_ite.elt);cx_ite=cx_ite.next}var cx_ite1=x.constraints.head;while(cx_ite1!=null){this.remConstraint(cx_ite1.elt);cx_ite1=cx_ite1.next}var cx_ite2=x.compounds.head;while(cx_ite2!=null){this.remCompound(cx_ite2.elt);cx_ite2=cx_ite2.next}x.removedFromSpace();x.space=null},addBody:function(body,flag){if(flag==null){flag=-1}body.space=this;body.addedToSpace();body.component.sleeping=true;if(!body.world){body.component.waket=this.stamp+(this.midstep?0:1);if(body.type==3){body.kinematicDelaySleep=true}if(body.component.sleeping){this.really_wake(body,true)}}var cx_ite=body.shapes.head;while(cx_ite!=null){var shape=cx_ite.elt;this.bphase.insert(shape);shape.addedToSpace();cx_ite=cx_ite.next}if(body.type==1){this.static_validation(body)}else if(body.type!=2){if(flag!=3){this.kinematics.add(body)}}},remBody:function(body,flag){if(flag==null){flag=-1}if(body.type==1){if(!body.world){body.component.waket=this.stamp+(this.midstep?0:1);if(body.type==3){body.kinematicDelaySleep=true}if(body.component.sleeping){this.really_wake(body,true)}}this.staticsleep.remove(body)}else if(body.type==2){if(!body.world){body.component.waket=this.stamp+(this.midstep?0:1);if(body.type==3){body.kinematicDelaySleep=true}if(body.component.sleeping){this.really_wake(body,true)}}this.live.remove(body)}else{if(flag!=3){this.kinematics.remove(body)}if(!body.world){body.component.waket=this.stamp+(this.midstep?0:1);if(body.type==3){body.kinematicDelaySleep=true}if(body.component.sleeping){this.really_wake(body,true)}}this.staticsleep.remove(body)}var cx_ite=body.shapes.head;while(cx_ite!=null){this.removed_shape(cx_ite.elt,true);cx_ite=cx_ite.next}body.removedFromSpace();body.space=null},bodiesUnderPoint:function(x,y,filter,output){return this.bphase.bodiesUnderPoint(x,y,filter,output)},push_callback:function(i){var cb;if(zpp_$nape_callbacks_ZPP_$Callback.zpp_pool==null){cb=new zpp_$nape_callbacks_ZPP_$Callback}else{cb=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool;zpp_$nape_callbacks_ZPP_$Callback.zpp_pool=cb.next;cb.next=null}this.callbacks.push(cb);cb.listener=i;return cb},pre_dt:null,step:function(deltaTime,velocityIterations,positionIterations){var _gthis=this;this.time+=deltaTime;this.pre_dt=deltaTime;this.midstep=true;this.stamp++;this.validation();this.bphase.broadphase(this,true);this.prestep(deltaTime);if(this.sortcontacts){var xxlist=this.c_arbiters_false;if(xxlist.head!=null&&xxlist.head.next!=null){var head=xxlist.head;var tail=null;var left=null;var right=null;var nxt=null;var listSize=1;var numMerges;var leftSize;var rightSize;while(true){numMerges=0;left=head;head=null;tail=head;while(left!=null){++numMerges;right=left;leftSize=0;rightSize=listSize;while(right!=null&&leftSize<listSize){++leftSize;right=right.next}while(leftSize>0||rightSize>0&&right!=null){if(leftSize==0){nxt=right;right=right.next;--rightSize}else if(rightSize==0||right==null){nxt=left;left=left.next;--leftSize}else if(left.elt.active&&right.elt.active?left.elt.oc1.dist<right.elt.oc1.dist:true){nxt=left;left=left.next;--leftSize}else{nxt=right;right=right.next;--rightSize}if(tail!=null){tail.next=nxt}else{head=nxt}tail=nxt}left=right}tail.next=null;listSize<<=1;if(!(numMerges>1)){break}}xxlist.head=head;xxlist.modified=true;xxlist.pushmod=true}}this.updateVel(deltaTime);this.warmStart();this.iterateVel(velocityIterations);var cx_ite=this.kinematics.head;while(cx_ite!=null){var cur=cx_ite.elt;cur.pre_posx=cur.posx;cur.pre_posy=cur.posy;cur.pre_rot=cur.rot;cx_ite=cx_ite.next}var cx_ite1=this.live.head;while(cx_ite1!=null){var cur1=cx_ite1.elt;cur1.pre_posx=cur1.posx;cur1.pre_posy=cur1.posy;cur1.pre_rot=cur1.rot;cx_ite1=cx_ite1.next}this.updatePos(deltaTime);this.continuous=true;this.continuousCollisions(deltaTime);this.continuous=false;this.iteratePos(positionIterations);var cx_ite2=this.kinematics.head;while(cx_ite2!=null){var cur2=cx_ite2.elt;var urot=cur2.pre_rot!=cur2.rot;if(!(cur2.posx==cur2.pre_posx&&cur2.posy==cur2.pre_posy)){var cx_ite3=cur2.shapes.head;while(cx_ite3!=null){var s=cx_ite3.elt;if(s.type==1){s.polygon.invalidate_gverts();s.polygon.invalidate_gaxi()}s.invalidate_worldCOM();cx_ite3=cx_ite3.next}cur2.zip_worldCOM=true}if(urot){cur2.zip_axis=true;var cx_ite4=cur2.shapes.head;while(cx_ite4!=null){var s1=cx_ite4.elt;if(s1.type==1){s1.polygon.invalidate_gverts();s1.polygon.invalidate_gaxi()}s1.invalidate_worldCOM();cx_ite4=cx_ite4.next}cur2.zip_worldCOM=true}cx_ite2=cx_ite2.next}var cx_ite5=this.live.head;while(cx_ite5!=null){var cur3=cx_ite5.elt;var urot1=cur3.pre_rot!=cur3.rot;if(!(cur3.posx==cur3.pre_posx&&cur3.posy==cur3.pre_posy)){var cx_ite6=cur3.shapes.head;while(cx_ite6!=null){var s2=cx_ite6.elt;if(s2.type==1){s2.polygon.invalidate_gverts();s2.polygon.invalidate_gaxi()}s2.invalidate_worldCOM();cx_ite6=cx_ite6.next}cur3.zip_worldCOM=true}if(urot1){cur3.zip_axis=true;var cx_ite7=cur3.shapes.head;while(cx_ite7!=null){var s3=cx_ite7.elt;if(s3.type==1){s3.polygon.invalidate_gverts();s3.polygon.invalidate_gaxi()}s3.invalidate_worldCOM();cx_ite7=cx_ite7.next}cur3.zip_worldCOM=true}cx_ite5=cx_ite5.next}var pre=null;var cx_ite8=this.staticsleep.head;while(cx_ite8!=null){var b=cx_ite8.elt;if(b.type!=3||b.velx==0&&b.vely==0&&b.angvel==0){if(b.kinematicDelaySleep){b.kinematicDelaySleep=false;cx_ite8=cx_ite8.next;continue}b.component.sleeping=true;var _this=this.staticsleep;var old;var ret;if(pre==null){old=_this.head;ret=old.next;_this.head=ret;if(_this.head==null){_this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){_this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=o;_this.modified=true;_this.length--;_this.pushmod=true;cx_ite8=ret;continue}pre=cx_ite8;cx_ite8=cx_ite8.next}this.doForests(deltaTime);this.sleepArbiters();this.midstep=false;var pre1=null;var cx_ite9=this.callbackset_list.next;while(cx_ite9!=null){var set=cx_ite9;if(set.arbiters.head==null){var _this1=this.callbackset_list;var old1;var ret1;if(pre1==null){old1=_this1.next;ret1=old1.next;_this1.next=ret1;if(_this1.next==null){_this1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){_this1.pushmod=true}}old1._inuse=false;_this1.modified=true;_this1.length--;_this1.pushmod=true;cx_ite9=ret1;set.int1=set.int2=null;set.id=set.di=-1;set.freed=true;set.next=zpp_$nape_space_ZPP_$CallbackSet.zpp_pool;zpp_$nape_space_ZPP_$CallbackSet.zpp_pool=set;continue}var ret2;ret2=true;var cx_ite10=set.arbiters.head;while(cx_ite10!=null)if(cx_ite10.elt.sleeping){cx_ite10=cx_ite10.next;continue}else{ret2=false;break}var sleeping=ret2;var a=set.int1.cbSet;var b1=set.int2.cbSet;var ret3=null;var cx_ite11=(a.cbpairs.length<b1.cbpairs.length?a.cbpairs:b1.cbpairs).head;while(cx_ite11!=null){var p=cx_ite11.elt;if(p.a==a&&p.b==b1||p.a==b1&&p.b==a){ret3=p;break}cx_ite11=cx_ite11.next}if(ret3==null){var ret4;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret4=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret4=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret4.next;ret4.next=null}ret4.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(a,b1)){ret4.a=a;ret4.b=b1}else{ret4.a=b1;ret4.b=a}ret3=ret4;a.cbpairs.add(ret3);if(b1!=a){b1.cbpairs.add(ret3)}}if(ret3.zip_listeners){ret3.zip_listeners=false;ret3.__validate()}var cx_ite12=ret3.listeners.head;while(cx_ite12!=null){var x=cx_ite12.elt;if(x.event==6){if((!sleeping||x.allowSleepingCallbacks)&&!set.empty_arb(x.itype)){var cb=_gthis.push_callback(x);cb.event=6;var o1=set.int1;var o2=set.int2;var tmp;var _this2=x.options1;var xs=o1.cbTypes;if(_this2.nonemptyintersection(xs,_this2.includes)&&!_this2.nonemptyintersection(xs,_this2.excludes)){var _this3=x.options2;var xs1=o2.cbTypes;tmp=_this3.nonemptyintersection(xs1,_this3.includes)&&!_this3.nonemptyintersection(xs1,_this3.excludes)}else{tmp=false}if(tmp){cb.int1=o1;cb.int2=o2}else{cb.int1=o2;cb.int2=o1}cb.set=set}}cx_ite12=cx_ite12.next}pre1=cx_ite9;cx_ite9=cx_ite9.next}while(!this.callbacks.empty()){var cb1=this.callbacks.pop();if(cb1.listener.type==0){cb1.listener.body.handler(cb1.wrapper_body())}else if(cb1.listener.type==1){cb1.listener.constraint.handler(cb1.wrapper_con())}else if(cb1.listener.type==2){cb1.listener.interaction.handleri(cb1.wrapper_int())}cb1.int1=cb1.int2=null;cb1.body=null;cb1.constraint=null;cb1.listener=null;if(cb1.wrap_arbiters!=null){cb1.wrap_arbiters.zpp_inner.inner=null}cb1.set=null;cb1.next=zpp_$nape_callbacks_ZPP_$Callback.zpp_pool;zpp_$nape_callbacks_ZPP_$Callback.zpp_pool=cb1}},toiEvents:null,continuousCollisions:function(deltaTime){var MAX_VEL=2*Math.PI/deltaTime;this.bphase.broadphase(this,false);var curTimeAlpha=0;while(curTimeAlpha<1&&this.toiEvents.head!=null){var minTOI=null;var minTime=2;var minKinematic=false;var preMin=null;var pre=null;var cx_ite=this.toiEvents.head;while(cx_ite!=null){var toi=cx_ite.elt;var b1=toi.s1.body;var b2=toi.s2.body;if(b1.sweepFrozen&&b2.sweepFrozen){if(toi.toi!=0&&zpp_$nape_geom_ZPP_$Collide.testCollide_safe(toi.s1,toi.s2)){toi.toi=0}else{cx_ite=this.toiEvents.erase(pre);toi.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=toi;continue}}if(toi.frozen1!=b1.sweepFrozen||toi.frozen2!=b2.sweepFrozen){if(!toi.kinematic){toi.frozen1=b1.sweepFrozen;toi.frozen2=b2.sweepFrozen;if(toi.frozen1){var tmp=toi.s1;toi.s1=toi.s2;toi.s2=tmp;toi.frozen1=false;toi.frozen2=true}zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,deltaTime,0,nape_Config.collisionSlopCCD);if(toi.toi<0){cx_ite=this.toiEvents.erase(pre);toi.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=toi;continue}}else{cx_ite=this.toiEvents.erase(pre);toi.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=toi;continue}}if(toi.toi>=0&&(toi.toi<minTime||!minKinematic&&toi.kinematic)){minTOI=toi;minTime=toi.toi;minKinematic=toi.kinematic;preMin=pre}pre=cx_ite;cx_ite=cx_ite.next}if(minTOI==null){break}this.toiEvents.erase(preMin);curTimeAlpha=minTOI.toi;var b11=minTOI.s1.body;var b21=minTOI.s2.body;if(!b11.sweepFrozen){var dt=curTimeAlpha*deltaTime;var delta=dt-b11.sweepTime;if(delta!=0){b11.sweepTime=dt;b11.posx+=b11.velx*delta;b11.posy+=b11.vely*delta;if(b11.angvel!=0){var dr=b11.sweep_angvel*delta;b11.rot+=dr;if(dr*dr>1e-4){b11.axisx=Math.sin(b11.rot);b11.axisy=Math.cos(b11.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*b11.axisx+dr*b11.axisy)*m;b11.axisy=(p*b11.axisy-dr*b11.axisx)*m;b11.axisx=nx}}}var s=minTOI.s1;if(s.type==0){s.worldCOMx=b11.posx+(b11.axisy*s.localCOMx-b11.axisx*s.localCOMy);s.worldCOMy=b11.posy+(s.localCOMx*b11.axisx+s.localCOMy*b11.axisy)}else{var p1=s.polygon;var li=p1.lverts.next;var cx_ite1=p1.gverts.next;while(cx_ite1!=null){var g=cx_ite1;var l=li;li=li.next;g.x=b11.posx+(b11.axisy*l.x-b11.axisx*l.y);g.y=b11.posy+(l.x*b11.axisx+l.y*b11.axisy);cx_ite1=cx_ite1.next}var ite=p1.edges.head;var cx_ite2=p1.gverts.next;var u=cx_ite2;cx_ite2=cx_ite2.next;while(cx_ite2!=null){var v=cx_ite2;var e=ite.elt;ite=ite.next;e.gnormx=b11.axisy*e.lnormx-b11.axisx*e.lnormy;e.gnormy=e.lnormx*b11.axisx+e.lnormy*b11.axisy;e.gprojection=b11.posx*e.gnormx+b11.posy*e.gnormy+e.lprojection;e.tp0=u.y*e.gnormx-u.x*e.gnormy;e.tp1=v.y*e.gnormx-v.x*e.gnormy;u=v;cx_ite2=cx_ite2.next}var v1=p1.gverts.next;var e1=ite.elt;e1.gnormx=b11.axisy*e1.lnormx-b11.axisx*e1.lnormy;e1.gnormy=e1.lnormx*b11.axisx+e1.lnormy*b11.axisy;e1.gprojection=b11.posx*e1.gnormx+b11.posy*e1.gnormy+e1.lprojection;e1.tp0=u.y*e1.gnormx-u.x*e1.gnormy;e1.tp1=v1.y*e1.gnormx-v1.x*e1.gnormy}}if(!b21.sweepFrozen){var dt1=curTimeAlpha*deltaTime;var delta1=dt1-b21.sweepTime;if(delta1!=0){b21.sweepTime=dt1;b21.posx+=b21.velx*delta1;b21.posy+=b21.vely*delta1;if(b21.angvel!=0){var dr1=b21.sweep_angvel*delta1;b21.rot+=dr1;if(dr1*dr1>1e-4){b21.axisx=Math.sin(b21.rot);b21.axisy=Math.cos(b21.rot)}else{var d21=dr1*dr1;var p2=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p2*b21.axisx+dr1*b21.axisy)*m1;b21.axisy=(p2*b21.axisy-dr1*b21.axisx)*m1;b21.axisx=nx1}}}var s1=minTOI.s2;if(s1.type==0){s1.worldCOMx=b21.posx+(b21.axisy*s1.localCOMx-b21.axisx*s1.localCOMy);s1.worldCOMy=b21.posy+(s1.localCOMx*b21.axisx+s1.localCOMy*b21.axisy)}else{var p3=s1.polygon;var li1=p3.lverts.next;var cx_ite3=p3.gverts.next;while(cx_ite3!=null){var g1=cx_ite3;var l1=li1;li1=li1.next;g1.x=b21.posx+(b21.axisy*l1.x-b21.axisx*l1.y);g1.y=b21.posy+(l1.x*b21.axisx+l1.y*b21.axisy);cx_ite3=cx_ite3.next}var ite1=p3.edges.head;var cx_ite4=p3.gverts.next;var u1=cx_ite4;cx_ite4=cx_ite4.next;while(cx_ite4!=null){var v2=cx_ite4;var e2=ite1.elt;ite1=ite1.next;e2.gnormx=b21.axisy*e2.lnormx-b21.axisx*e2.lnormy;e2.gnormy=e2.lnormx*b21.axisx+e2.lnormy*b21.axisy;e2.gprojection=b21.posx*e2.gnormx+b21.posy*e2.gnormy+e2.lprojection;e2.tp0=u1.y*e2.gnormx-u1.x*e2.gnormy;e2.tp1=v2.y*e2.gnormx-v2.x*e2.gnormy;u1=v2;cx_ite4=cx_ite4.next}var v3=p3.gverts.next;var e3=ite1.elt;e3.gnormx=b21.axisy*e3.lnormx-b21.axisx*e3.lnormy;e3.gnormy=e3.lnormx*b21.axisx+e3.lnormy*b21.axisy;e3.gprojection=b21.posx*e3.gnormx+b21.posy*e3.gnormy+e3.lprojection;e3.tp0=u1.y*e3.gnormx-u1.x*e3.gnormy;e3.tp1=v3.y*e3.gnormx-v3.x*e3.gnormy}}var arb=this.narrowPhase(minTOI.s1,minTOI.s2,true,minTOI.arbiter,true);if(arb==null){if(minTOI.arbiter!=null&&minTOI.arbiter.pair!=null){minTOI.arbiter.pair.arb=null;minTOI.arbiter.pair=null}}else if(!this.presteparb(arb,deltaTime,true)){if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL&&(arb.active&&(arb.immState&1)!=0)){var _this=arb.colarb;var jx=_this.nx*_this.c1.jnAcc-_this.ny*_this.c1.jtAcc;var jy=_this.ny*_this.c1.jnAcc+_this.nx*_this.c1.jtAcc;var t=_this.b1.imass;_this.b1.velx-=jx*t;_this.b1.vely-=jy*t;_this.b1.angvel-=_this.b1.iinertia*(jy*_this.c1.r1x-jx*_this.c1.r1y);var t1=_this.b2.imass;_this.b2.velx+=jx*t1;_this.b2.vely+=jy*t1;_this.b2.angvel+=_this.b2.iinertia*(jy*_this.c1.r2x-jx*_this.c1.r2y);if(_this.hc2){var jx1=_this.nx*_this.c2.jnAcc-_this.ny*_this.c2.jtAcc;var jy1=_this.ny*_this.c2.jnAcc+_this.nx*_this.c2.jtAcc;var t2=_this.b1.imass;_this.b1.velx-=jx1*t2;_this.b1.vely-=jy1*t2;_this.b1.angvel-=_this.b1.iinertia*(jy1*_this.c2.r1x-jx1*_this.c2.r1y);var t3=_this.b2.imass;_this.b2.velx+=jx1*t3;_this.b2.vely+=jy1*t3;_this.b2.angvel+=_this.b2.iinertia*(jy1*_this.c2.r2x-jx1*_this.c2.r2y)}_this.b2.angvel+=_this.jrAcc*_this.b2.iinertia;_this.b1.angvel-=_this.jrAcc*_this.b1.iinertia;var _this1=arb.colarb;var v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel);var v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel);var j=(v1y*_this1.nx-v1x*_this1.ny+_this1.surfacex)*_this1.c1.tMass;var jMax=_this1.c1.friction*_this1.c1.jnAcc;var jOld=_this1.c1.jtAcc;var cjAcc=jOld-j;if(cjAcc>jMax){cjAcc=jMax}else if(cjAcc<-jMax){cjAcc=-jMax}j=cjAcc-jOld;_this1.c1.jtAcc=cjAcc;var jx2=-_this1.ny*j;var jy2=_this1.nx*j;_this1.b2.velx+=jx2*_this1.b2.imass;_this1.b2.vely+=jy2*_this1.b2.imass;_this1.b1.velx-=jx2*_this1.b1.imass;_this1.b1.vely-=jy2*_this1.b1.imass;_this1.b2.angvel+=_this1.rt1b*j*_this1.b2.iinertia;_this1.b1.angvel-=_this1.rt1a*j*_this1.b1.iinertia;if(_this1.hc2){var v2x=_this1.k2x+_this1.b2.velx-_this1.c2.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c2.r1y*_this1.b1.angvel);var v2y=_this1.k2y+_this1.b2.vely+_this1.c2.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c2.r1x*_this1.b1.angvel);j=(v2y*_this1.nx-v2x*_this1.ny+_this1.surfacex)*_this1.c2.tMass;jMax=_this1.c2.friction*_this1.c2.jnAcc;jOld=_this1.c2.jtAcc;cjAcc=jOld-j;if(cjAcc>jMax){cjAcc=jMax}else if(cjAcc<-jMax){cjAcc=-jMax}j=cjAcc-jOld;_this1.c2.jtAcc=cjAcc;jx2=-_this1.ny*j;jy2=_this1.nx*j;_this1.b2.velx+=jx2*_this1.b2.imass;_this1.b2.vely+=jy2*_this1.b2.imass;_this1.b1.velx-=jx2*_this1.b1.imass;_this1.b1.vely-=jy2*_this1.b1.imass;_this1.b2.angvel+=_this1.rt2b*j*_this1.b2.iinertia;_this1.b1.angvel-=_this1.rt2a*j*_this1.b1.iinertia;v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel);v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel);v2x=_this1.k2x+_this1.b2.velx-_this1.c2.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c2.r1y*_this1.b1.angvel);v2y=_this1.k2y+_this1.b2.vely+_this1.c2.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c2.r1x*_this1.b1.angvel);var ax=_this1.c1.jnAcc;var ay=_this1.c2.jnAcc;var jnx=v1x*_this1.nx+v1y*_this1.ny+_this1.surfacey+_this1.c1.bounce-(_this1.Ka*ax+_this1.Kb*ay);var jny=v2x*_this1.nx+v2y*_this1.ny+_this1.surfacey+_this1.c2.bounce-(_this1.Kb*ax+_this1.Kc*ay);var xx=-(_this1.kMassa*jnx+_this1.kMassb*jny);var xy=-(_this1.kMassb*jnx+_this1.kMassc*jny);if(xx>=0&&xy>=0){jnx=xx-ax;jny=xy-ay;_this1.c1.jnAcc=xx;_this1.c2.jnAcc=xy}else{xx=-_this1.c1.nMass*jnx;if(xx>=0&&_this1.Kb*xx+jny>=0){jnx=xx-ax;jny=-ay;_this1.c1.jnAcc=xx;_this1.c2.jnAcc=0}else{xy=-_this1.c2.nMass*jny;if(xy>=0&&_this1.Kb*xy+jnx>=0){jnx=-ax;jny=xy-ay;_this1.c1.jnAcc=0;_this1.c2.jnAcc=xy}else if(jnx>=0&&jny>=0){jnx=-ax;jny=-ay;_this1.c1.jnAcc=_this1.c2.jnAcc=0}else{jnx=0;jny=0}}}j=jnx+jny;jx2=_this1.nx*j;jy2=_this1.ny*j;_this1.b2.velx+=jx2*_this1.b2.imass;_this1.b2.vely+=jy2*_this1.b2.imass;_this1.b1.velx-=jx2*_this1.b1.imass;_this1.b1.vely-=jy2*_this1.b1.imass;_this1.b2.angvel+=(_this1.rn1b*jnx+_this1.rn2b*jny)*_this1.b2.iinertia;_this1.b1.angvel-=(_this1.rn1a*jnx+_this1.rn2a*jny)*_this1.b1.iinertia}else{if(_this1.radius!=0){j=(_this1.b2.angvel-_this1.b1.angvel)*_this1.rMass;jMax=_this1.rfric*_this1.c1.jnAcc;jOld=_this1.jrAcc;_this1.jrAcc-=j;if(_this1.jrAcc>jMax){_this1.jrAcc=jMax}else if(_this1.jrAcc<-jMax){_this1.jrAcc=-jMax}j=_this1.jrAcc-jOld;_this1.b2.angvel+=j*_this1.b2.iinertia;_this1.b1.angvel-=j*_this1.b1.iinertia}v1x=_this1.k1x+_this1.b2.velx-_this1.c1.r2y*_this1.b2.angvel-(_this1.b1.velx-_this1.c1.r1y*_this1.b1.angvel);v1y=_this1.k1y+_this1.b2.vely+_this1.c1.r2x*_this1.b2.angvel-(_this1.b1.vely+_this1.c1.r1x*_this1.b1.angvel);j=(_this1.c1.bounce+(_this1.nx*v1x+_this1.ny*v1y)+_this1.surfacey)*_this1.c1.nMass;jOld=_this1.c1.jnAcc;cjAcc=jOld-j;if(cjAcc<0){cjAcc=0}j=cjAcc-jOld;_this1.c1.jnAcc=cjAcc;jx2=_this1.nx*j;jy2=_this1.ny*j;_this1.b2.velx+=jx2*_this1.b2.imass;_this1.b2.vely+=jy2*_this1.b2.imass;_this1.b1.velx-=jx2*_this1.b1.imass;_this1.b1.vely-=jy2*_this1.b1.imass;_this1.b2.angvel+=_this1.rn1b*j*_this1.b2.iinertia;_this1.b1.angvel-=_this1.rn1a*j*_this1.b1.iinertia}var _this2=arb.colarb;var v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel);var v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel);var j1=(v1y1*_this2.nx-v1x1*_this2.ny+_this2.surfacex)*_this2.c1.tMass;var jMax1=_this2.c1.friction*_this2.c1.jnAcc;var jOld1=_this2.c1.jtAcc;var cjAcc1=jOld1-j1;if(cjAcc1>jMax1){cjAcc1=jMax1}else if(cjAcc1<-jMax1){cjAcc1=-jMax1}j1=cjAcc1-jOld1;_this2.c1.jtAcc=cjAcc1;var jx3=-_this2.ny*j1;var jy3=_this2.nx*j1;_this2.b2.velx+=jx3*_this2.b2.imass;_this2.b2.vely+=jy3*_this2.b2.imass;_this2.b1.velx-=jx3*_this2.b1.imass;_this2.b1.vely-=jy3*_this2.b1.imass;_this2.b2.angvel+=_this2.rt1b*j1*_this2.b2.iinertia;_this2.b1.angvel-=_this2.rt1a*j1*_this2.b1.iinertia;if(_this2.hc2){var v2x1=_this2.k2x+_this2.b2.velx-_this2.c2.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c2.r1y*_this2.b1.angvel);var v2y1=_this2.k2y+_this2.b2.vely+_this2.c2.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c2.r1x*_this2.b1.angvel);j1=(v2y1*_this2.nx-v2x1*_this2.ny+_this2.surfacex)*_this2.c2.tMass;jMax1=_this2.c2.friction*_this2.c2.jnAcc;jOld1=_this2.c2.jtAcc;cjAcc1=jOld1-j1;if(cjAcc1>jMax1){cjAcc1=jMax1}else if(cjAcc1<-jMax1){cjAcc1=-jMax1}j1=cjAcc1-jOld1;_this2.c2.jtAcc=cjAcc1;jx3=-_this2.ny*j1;jy3=_this2.nx*j1;_this2.b2.velx+=jx3*_this2.b2.imass;_this2.b2.vely+=jy3*_this2.b2.imass;_this2.b1.velx-=jx3*_this2.b1.imass;_this2.b1.vely-=jy3*_this2.b1.imass;_this2.b2.angvel+=_this2.rt2b*j1*_this2.b2.iinertia;_this2.b1.angvel-=_this2.rt2a*j1*_this2.b1.iinertia;v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel);v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel);v2x1=_this2.k2x+_this2.b2.velx-_this2.c2.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c2.r1y*_this2.b1.angvel);v2y1=_this2.k2y+_this2.b2.vely+_this2.c2.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c2.r1x*_this2.b1.angvel);var ax1=_this2.c1.jnAcc;var ay1=_this2.c2.jnAcc;var jnx1=v1x1*_this2.nx+v1y1*_this2.ny+_this2.surfacey+_this2.c1.bounce-(_this2.Ka*ax1+_this2.Kb*ay1);var jny1=v2x1*_this2.nx+v2y1*_this2.ny+_this2.surfacey+_this2.c2.bounce-(_this2.Kb*ax1+_this2.Kc*ay1);var xx1=-(_this2.kMassa*jnx1+_this2.kMassb*jny1);var xy1=-(_this2.kMassb*jnx1+_this2.kMassc*jny1);if(xx1>=0&&xy1>=0){jnx1=xx1-ax1;jny1=xy1-ay1;_this2.c1.jnAcc=xx1;_this2.c2.jnAcc=xy1}else{xx1=-_this2.c1.nMass*jnx1;if(xx1>=0&&_this2.Kb*xx1+jny1>=0){jnx1=xx1-ax1;jny1=-ay1;_this2.c1.jnAcc=xx1;_this2.c2.jnAcc=0}else{xy1=-_this2.c2.nMass*jny1;if(xy1>=0&&_this2.Kb*xy1+jnx1>=0){jnx1=-ax1;jny1=xy1-ay1;_this2.c1.jnAcc=0;_this2.c2.jnAcc=xy1}else if(jnx1>=0&&jny1>=0){jnx1=-ax1;jny1=-ay1;_this2.c1.jnAcc=_this2.c2.jnAcc=0}else{jnx1=0;jny1=0}}}j1=jnx1+jny1;jx3=_this2.nx*j1;jy3=_this2.ny*j1;_this2.b2.velx+=jx3*_this2.b2.imass;_this2.b2.vely+=jy3*_this2.b2.imass;_this2.b1.velx-=jx3*_this2.b1.imass;_this2.b1.vely-=jy3*_this2.b1.imass;_this2.b2.angvel+=(_this2.rn1b*jnx1+_this2.rn2b*jny1)*_this2.b2.iinertia;_this2.b1.angvel-=(_this2.rn1a*jnx1+_this2.rn2a*jny1)*_this2.b1.iinertia}else{if(_this2.radius!=0){j1=(_this2.b2.angvel-_this2.b1.angvel)*_this2.rMass;jMax1=_this2.rfric*_this2.c1.jnAcc;jOld1=_this2.jrAcc;_this2.jrAcc-=j1;if(_this2.jrAcc>jMax1){_this2.jrAcc=jMax1}else if(_this2.jrAcc<-jMax1){_this2.jrAcc=-jMax1}j1=_this2.jrAcc-jOld1;_this2.b2.angvel+=j1*_this2.b2.iinertia;_this2.b1.angvel-=j1*_this2.b1.iinertia}v1x1=_this2.k1x+_this2.b2.velx-_this2.c1.r2y*_this2.b2.angvel-(_this2.b1.velx-_this2.c1.r1y*_this2.b1.angvel);v1y1=_this2.k1y+_this2.b2.vely+_this2.c1.r2x*_this2.b2.angvel-(_this2.b1.vely+_this2.c1.r1x*_this2.b1.angvel);j1=(_this2.c1.bounce+(_this2.nx*v1x1+_this2.ny*v1y1)+_this2.surfacey)*_this2.c1.nMass;jOld1=_this2.c1.jnAcc;cjAcc1=jOld1-j1;if(cjAcc1<0){cjAcc1=0}j1=cjAcc1-jOld1;_this2.c1.jnAcc=cjAcc1;jx3=_this2.nx*j1;jy3=_this2.ny*j1;_this2.b2.velx+=jx3*_this2.b2.imass;_this2.b2.vely+=jy3*_this2.b2.imass;_this2.b1.velx-=jx3*_this2.b1.imass;_this2.b1.vely-=jy3*_this2.b1.imass;_this2.b2.angvel+=_this2.rn1b*j1*_this2.b2.iinertia;_this2.b1.angvel-=_this2.rn1a*j1*_this2.b1.iinertia}var _this3=arb.colarb;var v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel);var v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel);var j2=(v1y2*_this3.nx-v1x2*_this3.ny+_this3.surfacex)*_this3.c1.tMass;var jMax2=_this3.c1.friction*_this3.c1.jnAcc;var jOld2=_this3.c1.jtAcc;var cjAcc2=jOld2-j2;if(cjAcc2>jMax2){cjAcc2=jMax2}else if(cjAcc2<-jMax2){cjAcc2=-jMax2}j2=cjAcc2-jOld2;_this3.c1.jtAcc=cjAcc2;var jx4=-_this3.ny*j2;var jy4=_this3.nx*j2;_this3.b2.velx+=jx4*_this3.b2.imass;_this3.b2.vely+=jy4*_this3.b2.imass;_this3.b1.velx-=jx4*_this3.b1.imass;_this3.b1.vely-=jy4*_this3.b1.imass;_this3.b2.angvel+=_this3.rt1b*j2*_this3.b2.iinertia;_this3.b1.angvel-=_this3.rt1a*j2*_this3.b1.iinertia;if(_this3.hc2){var v2x2=_this3.k2x+_this3.b2.velx-_this3.c2.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c2.r1y*_this3.b1.angvel);var v2y2=_this3.k2y+_this3.b2.vely+_this3.c2.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c2.r1x*_this3.b1.angvel);j2=(v2y2*_this3.nx-v2x2*_this3.ny+_this3.surfacex)*_this3.c2.tMass;jMax2=_this3.c2.friction*_this3.c2.jnAcc;jOld2=_this3.c2.jtAcc;cjAcc2=jOld2-j2;if(cjAcc2>jMax2){cjAcc2=jMax2}else if(cjAcc2<-jMax2){cjAcc2=-jMax2}j2=cjAcc2-jOld2;_this3.c2.jtAcc=cjAcc2;jx4=-_this3.ny*j2;jy4=_this3.nx*j2;_this3.b2.velx+=jx4*_this3.b2.imass;_this3.b2.vely+=jy4*_this3.b2.imass;_this3.b1.velx-=jx4*_this3.b1.imass;_this3.b1.vely-=jy4*_this3.b1.imass;_this3.b2.angvel+=_this3.rt2b*j2*_this3.b2.iinertia;_this3.b1.angvel-=_this3.rt2a*j2*_this3.b1.iinertia;v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel);v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel);v2x2=_this3.k2x+_this3.b2.velx-_this3.c2.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c2.r1y*_this3.b1.angvel);v2y2=_this3.k2y+_this3.b2.vely+_this3.c2.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c2.r1x*_this3.b1.angvel);var ax2=_this3.c1.jnAcc;var ay2=_this3.c2.jnAcc;var jnx2=v1x2*_this3.nx+v1y2*_this3.ny+_this3.surfacey+_this3.c1.bounce-(_this3.Ka*ax2+_this3.Kb*ay2);var jny2=v2x2*_this3.nx+v2y2*_this3.ny+_this3.surfacey+_this3.c2.bounce-(_this3.Kb*ax2+_this3.Kc*ay2);var xx2=-(_this3.kMassa*jnx2+_this3.kMassb*jny2);var xy2=-(_this3.kMassb*jnx2+_this3.kMassc*jny2);if(xx2>=0&&xy2>=0){jnx2=xx2-ax2;jny2=xy2-ay2;_this3.c1.jnAcc=xx2;_this3.c2.jnAcc=xy2}else{xx2=-_this3.c1.nMass*jnx2;if(xx2>=0&&_this3.Kb*xx2+jny2>=0){jnx2=xx2-ax2;jny2=-ay2;_this3.c1.jnAcc=xx2;_this3.c2.jnAcc=0}else{xy2=-_this3.c2.nMass*jny2;if(xy2>=0&&_this3.Kb*xy2+jnx2>=0){jnx2=-ax2;jny2=xy2-ay2;_this3.c1.jnAcc=0;_this3.c2.jnAcc=xy2}else if(jnx2>=0&&jny2>=0){jnx2=-ax2;jny2=-ay2;_this3.c1.jnAcc=_this3.c2.jnAcc=0}else{jnx2=0;jny2=0}}}j2=jnx2+jny2;jx4=_this3.nx*j2;jy4=_this3.ny*j2;_this3.b2.velx+=jx4*_this3.b2.imass;_this3.b2.vely+=jy4*_this3.b2.imass;_this3.b1.velx-=jx4*_this3.b1.imass;_this3.b1.vely-=jy4*_this3.b1.imass;_this3.b2.angvel+=(_this3.rn1b*jnx2+_this3.rn2b*jny2)*_this3.b2.iinertia;_this3.b1.angvel-=(_this3.rn1a*jnx2+_this3.rn2a*jny2)*_this3.b1.iinertia}else{if(_this3.radius!=0){j2=(_this3.b2.angvel-_this3.b1.angvel)*_this3.rMass;jMax2=_this3.rfric*_this3.c1.jnAcc;jOld2=_this3.jrAcc;_this3.jrAcc-=j2;if(_this3.jrAcc>jMax2){_this3.jrAcc=jMax2}else if(_this3.jrAcc<-jMax2){_this3.jrAcc=-jMax2}j2=_this3.jrAcc-jOld2;_this3.b2.angvel+=j2*_this3.b2.iinertia;_this3.b1.angvel-=j2*_this3.b1.iinertia}v1x2=_this3.k1x+_this3.b2.velx-_this3.c1.r2y*_this3.b2.angvel-(_this3.b1.velx-_this3.c1.r1y*_this3.b1.angvel);v1y2=_this3.k1y+_this3.b2.vely+_this3.c1.r2x*_this3.b2.angvel-(_this3.b1.vely+_this3.c1.r1x*_this3.b1.angvel);j2=(_this3.c1.bounce+(_this3.nx*v1x2+_this3.ny*v1y2)+_this3.surfacey)*_this3.c1.nMass;jOld2=_this3.c1.jnAcc;cjAcc2=jOld2-j2;if(cjAcc2<0){cjAcc2=0}j2=cjAcc2-jOld2;_this3.c1.jnAcc=cjAcc2;jx4=_this3.nx*j2;jy4=_this3.ny*j2;_this3.b2.velx+=jx4*_this3.b2.imass;_this3.b2.vely+=jy4*_this3.b2.imass;_this3.b1.velx-=jx4*_this3.b1.imass;_this3.b1.vely-=jy4*_this3.b1.imass;_this3.b2.angvel+=_this3.rn1b*j2*_this3.b2.iinertia;_this3.b1.angvel-=_this3.rn1a*j2*_this3.b1.iinertia}var _this4=arb.colarb;var v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel);var v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel);var j3=(v1y3*_this4.nx-v1x3*_this4.ny+_this4.surfacex)*_this4.c1.tMass;var jMax3=_this4.c1.friction*_this4.c1.jnAcc;var jOld3=_this4.c1.jtAcc;var cjAcc3=jOld3-j3;if(cjAcc3>jMax3){cjAcc3=jMax3}else if(cjAcc3<-jMax3){cjAcc3=-jMax3}j3=cjAcc3-jOld3;_this4.c1.jtAcc=cjAcc3;var jx5=-_this4.ny*j3;var jy5=_this4.nx*j3;_this4.b2.velx+=jx5*_this4.b2.imass;_this4.b2.vely+=jy5*_this4.b2.imass;_this4.b1.velx-=jx5*_this4.b1.imass;_this4.b1.vely-=jy5*_this4.b1.imass;_this4.b2.angvel+=_this4.rt1b*j3*_this4.b2.iinertia;_this4.b1.angvel-=_this4.rt1a*j3*_this4.b1.iinertia;if(_this4.hc2){var v2x3=_this4.k2x+_this4.b2.velx-_this4.c2.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c2.r1y*_this4.b1.angvel);var v2y3=_this4.k2y+_this4.b2.vely+_this4.c2.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c2.r1x*_this4.b1.angvel);j3=(v2y3*_this4.nx-v2x3*_this4.ny+_this4.surfacex)*_this4.c2.tMass;jMax3=_this4.c2.friction*_this4.c2.jnAcc;jOld3=_this4.c2.jtAcc;cjAcc3=jOld3-j3;if(cjAcc3>jMax3){cjAcc3=jMax3}else if(cjAcc3<-jMax3){cjAcc3=-jMax3}j3=cjAcc3-jOld3;_this4.c2.jtAcc=cjAcc3;jx5=-_this4.ny*j3;jy5=_this4.nx*j3;_this4.b2.velx+=jx5*_this4.b2.imass;_this4.b2.vely+=jy5*_this4.b2.imass;_this4.b1.velx-=jx5*_this4.b1.imass;_this4.b1.vely-=jy5*_this4.b1.imass;_this4.b2.angvel+=_this4.rt2b*j3*_this4.b2.iinertia;_this4.b1.angvel-=_this4.rt2a*j3*_this4.b1.iinertia;v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel);v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel);v2x3=_this4.k2x+_this4.b2.velx-_this4.c2.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c2.r1y*_this4.b1.angvel);v2y3=_this4.k2y+_this4.b2.vely+_this4.c2.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c2.r1x*_this4.b1.angvel);var ax3=_this4.c1.jnAcc;var ay3=_this4.c2.jnAcc;var jnx3=v1x3*_this4.nx+v1y3*_this4.ny+_this4.surfacey+_this4.c1.bounce-(_this4.Ka*ax3+_this4.Kb*ay3);var jny3=v2x3*_this4.nx+v2y3*_this4.ny+_this4.surfacey+_this4.c2.bounce-(_this4.Kb*ax3+_this4.Kc*ay3);var xx3=-(_this4.kMassa*jnx3+_this4.kMassb*jny3);var xy3=-(_this4.kMassb*jnx3+_this4.kMassc*jny3);if(xx3>=0&&xy3>=0){jnx3=xx3-ax3;jny3=xy3-ay3;_this4.c1.jnAcc=xx3;_this4.c2.jnAcc=xy3}else{xx3=-_this4.c1.nMass*jnx3;if(xx3>=0&&_this4.Kb*xx3+jny3>=0){jnx3=xx3-ax3;jny3=-ay3;_this4.c1.jnAcc=xx3;_this4.c2.jnAcc=0}else{xy3=-_this4.c2.nMass*jny3;if(xy3>=0&&_this4.Kb*xy3+jnx3>=0){jnx3=-ax3;jny3=xy3-ay3;_this4.c1.jnAcc=0;_this4.c2.jnAcc=xy3}else if(jnx3>=0&&jny3>=0){jnx3=-ax3;jny3=-ay3;_this4.c1.jnAcc=_this4.c2.jnAcc=0}else{jnx3=0;jny3=0}}}j3=jnx3+jny3;jx5=_this4.nx*j3;jy5=_this4.ny*j3;_this4.b2.velx+=jx5*_this4.b2.imass;_this4.b2.vely+=jy5*_this4.b2.imass;_this4.b1.velx-=jx5*_this4.b1.imass;_this4.b1.vely-=jy5*_this4.b1.imass;_this4.b2.angvel+=(_this4.rn1b*jnx3+_this4.rn2b*jny3)*_this4.b2.iinertia;_this4.b1.angvel-=(_this4.rn1a*jnx3+_this4.rn2a*jny3)*_this4.b1.iinertia}else{if(_this4.radius!=0){j3=(_this4.b2.angvel-_this4.b1.angvel)*_this4.rMass;jMax3=_this4.rfric*_this4.c1.jnAcc;jOld3=_this4.jrAcc;_this4.jrAcc-=j3;if(_this4.jrAcc>jMax3){_this4.jrAcc=jMax3}else if(_this4.jrAcc<-jMax3){_this4.jrAcc=-jMax3}j3=_this4.jrAcc-jOld3;_this4.b2.angvel+=j3*_this4.b2.iinertia;_this4.b1.angvel-=j3*_this4.b1.iinertia}v1x3=_this4.k1x+_this4.b2.velx-_this4.c1.r2y*_this4.b2.angvel-(_this4.b1.velx-_this4.c1.r1y*_this4.b1.angvel);v1y3=_this4.k1y+_this4.b2.vely+_this4.c1.r2x*_this4.b2.angvel-(_this4.b1.vely+_this4.c1.r1x*_this4.b1.angvel);j3=(_this4.c1.bounce+(_this4.nx*v1x3+_this4.ny*v1y3)+_this4.surfacey)*_this4.c1.nMass;jOld3=_this4.c1.jnAcc;cjAcc3=jOld3-j3;if(cjAcc3<0){cjAcc3=0}j3=cjAcc3-jOld3;_this4.c1.jnAcc=cjAcc3;jx5=_this4.nx*j3;jy5=_this4.ny*j3;_this4.b2.velx+=jx5*_this4.b2.imass;_this4.b2.vely+=jy5*_this4.b2.imass;_this4.b1.velx-=jx5*_this4.b1.imass;_this4.b1.vely-=jy5*_this4.b1.imass;_this4.b2.angvel+=_this4.rn1b*j3*_this4.b2.iinertia;_this4.b1.angvel-=_this4.rn1a*j3*_this4.b1.iinertia}b11.sweep_angvel=b11.angvel%MAX_VEL;b21.sweep_angvel=b21.angvel%MAX_VEL}}if(arb!=null&&(arb.active&&(arb.immState&1)!=0)&&arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){if(!b11.sweepFrozen&&b11.type!=3){b11.sweepFrozen=true;if(minTOI.failed){b11.angvel=b11.sweep_angvel=0}else if(minTOI.slipped){b11.sweep_angvel*=nape_Config.angularCCDSlipScale;b11.angvel=b11.sweep_angvel}else{b11.angvel=b11.sweep_angvel}}if(!b21.sweepFrozen&&b21.type!=3){b21.sweepFrozen=true;if(minTOI.failed){b21.angvel=b21.sweep_angvel=0}else if(minTOI.slipped){b21.sweep_angvel*=nape_Config.angularCCDSlipScale;b21.angvel=b21.sweep_angvel}else{b21.angvel=b21.sweep_angvel}}}var o=minTOI;o.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=o}while(this.toiEvents.head!=null){var toi1=this.toiEvents.pop_unsafe();toi1.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=toi1}var cx_ite5=this.kinematics.head;while(cx_ite5!=null){var cur=cx_ite5.elt;var delta2=deltaTime-cur.sweepTime;if(delta2!=0){cur.sweepTime=deltaTime;cur.posx+=cur.velx*delta2;cur.posy+=cur.vely*delta2;if(cur.angvel!=0){var dr2=cur.sweep_angvel*delta2;cur.rot+=dr2;if(dr2*dr2>1e-4){cur.axisx=Math.sin(cur.rot);cur.axisy=Math.cos(cur.rot)}else{var d22=dr2*dr2;var p4=1-.5*d22;var m2=1-d22*d22/8;var nx2=(p4*cur.axisx+dr2*cur.axisy)*m2;cur.axisy=(p4*cur.axisy-dr2*cur.axisx)*m2;cur.axisx=nx2}}}cur.sweepTime=0;cx_ite5=cx_ite5.next}var cx_ite6=this.live.head;while(cx_ite6!=null){var cur1=cx_ite6.elt;if(!cur1.sweepFrozen){var delta3=deltaTime-cur1.sweepTime;if(delta3!=0){cur1.sweepTime=deltaTime;cur1.posx+=cur1.velx*delta3;cur1.posy+=cur1.vely*delta3;if(cur1.angvel!=0){var dr3=cur1.sweep_angvel*delta3;cur1.rot+=dr3;if(dr3*dr3>1e-4){cur1.axisx=Math.sin(cur1.rot);cur1.axisy=Math.cos(cur1.rot)}else{var d23=dr3*dr3;var p5=1-.5*d23;var m3=1-d23*d23/8;var nx3=(p5*cur1.axisx+dr3*cur1.axisy)*m3;cur1.axisy=(p5*cur1.axisy-dr3*cur1.axisx)*m3;cur1.axisx=nx3}}}}cur1.sweepTime=0;cx_ite6=cx_ite6.next}},continuousEvent:function(s1,s2,stat,in_arb,_){if(s1.body.sweepFrozen&&s2.body.sweepFrozen){return in_arb}if(s1.body.disableCCD||s2.body.disableCCD){return in_arb}var tmp;if(!(in_arb!=null&&in_arb.colarb==null)){var b1=s1.body;var b2=s2.body;var con_ignore;con_ignore=false;var cx_ite=b1.constraints.head;while(cx_ite!=null){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=true;break}cx_ite=cx_ite.next}var tmp1;var tmp2;if(!con_ignore){var cur=s1;while(cur!=null&&cur.group==null)if(cur.ishape!=null){cur=cur.ishape.body}else if(cur.icompound!=null){cur=cur.icompound.compound}else{cur=cur.ibody.compound}var g1=cur==null?null:cur.group;var tmp3;if(g1==null){tmp3=false}else{var cur1=s2;while(cur1!=null&&cur1.group==null)if(cur1.ishape!=null){cur1=cur1.ishape.body}else if(cur1.icompound!=null){cur1=cur1.icompound.compound}else{cur1=cur1.ibody.compound}var g2=cur1==null?null:cur1.group;if(g2==null){tmp3=false}else{var ret=false;while(g1!=null&&g2!=null){if(g1==g2){ret=g1.ignore;break}if(g1.depth<g2.depth){g2=g2.group}else{g1=g1.group}}tmp3=ret}}tmp2=!tmp3}else{tmp2=false}if(tmp2){var tmp4;if(s1.sensorEnabled||s2.sensorEnabled){var _this=s1.filter;var x=s2.filter;tmp4=(_this.sensorMask&x.sensorGroup)!=0&&(x.sensorMask&_this.sensorGroup)!=0}else{tmp4=false}if(tmp4){tmp1=2}else{var tmp5;if(s1.fluidEnabled||s2.fluidEnabled){var _this1=s1.filter;var x1=s2.filter;tmp5=(_this1.fluidMask&x1.fluidGroup)!=0&&(x1.fluidMask&_this1.fluidGroup)!=0}else{tmp5=false}if(tmp5&&!(b1.imass==0&&b2.imass==0&&b1.iinertia==0&&b2.iinertia==0)){tmp1=0}else{var _this2=s1.filter;var x2=s2.filter;tmp1=(_this2.collisionMask&x2.collisionGroup)!=0&&(x2.collisionMask&_this2.collisionGroup)!=0&&!(b1.imass==0&&b2.imass==0&&b1.iinertia==0&&b2.iinertia==0)?1:-1}}}else{tmp1=-1}tmp=tmp1<=0}else{tmp=true}if(tmp){return in_arb}var b11=s1.body;var b21=s2.body;if(stat||b11.bullet||b21.bullet){var toi;if(zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool==null){toi=new zpp_$nape_geom_ZPP_$ToiEvent}else{toi=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=toi.next;toi.next=null}toi.failed=false;toi.s1=toi.s2=null;toi.arbiter=null;var kin=b11.type==3||b21.type==3;if(stat&&!kin){if(s1.body.type!=2){toi.s2=s1;toi.s1=s2}else{toi.s1=s1;toi.s2=s2}toi.kinematic=false;zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD)}else{toi.s1=s1;toi.s2=s2;toi.kinematic=kin;if(toi.s1.body.sweepFrozen||toi.s2.body.sweepFrozen){if(toi.s1.body.sweepFrozen){var tmp6=toi.s1;toi.s1=toi.s2;toi.s2=tmp6;toi.frozen1=false;toi.frozen2=true}zpp_$nape_geom_ZPP_$SweepDistance.staticSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD)}else{zpp_$nape_geom_ZPP_$SweepDistance.dynamicSweep(toi,this.pre_dt,0,nape_Config.collisionSlopCCD)}}if(stat&&toi.toi<0||toi.failed){var o=toi;o.next=zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool;zpp_$nape_geom_ZPP_$ToiEvent.zpp_pool=o}else{this.toiEvents.add(toi);toi.frozen1=toi.s1.body.sweepFrozen;toi.frozen2=toi.s2.body.sweepFrozen;toi.arbiter=in_arb!=null?in_arb.colarb:null}}return in_arb},bodyCbWake:function(b){if(b.type==2&&b.cbSet!=null){if(this.midstep){var cx_ite=b.cbSet.bodylisteners.head;while(cx_ite!=null){var i=cx_ite.elt;if(i.event!=2){cx_ite=cx_ite.next;continue}var cb=this.push_callback(i);cb.event=2;cb.body=b;cx_ite=cx_ite.next}}else{b.component.woken=true}}},bodyCbSleep:function(b){if(b.type==2&&b.cbSet!=null){var cx_ite=b.cbSet.bodylisteners.head;while(cx_ite!=null){var i=cx_ite.elt;if(i.event!=3){cx_ite=cx_ite.next;continue}var cb=this.push_callback(i);cb.event=3;cb.body=b;cx_ite=cx_ite.next}}},constraintCbWake:function(con){if(con.cbSet!=null){if(this.midstep){var cx_ite=con.cbSet.conlisteners.head;while(cx_ite!=null){var i=cx_ite.elt;if(i.event!=2){cx_ite=cx_ite.next;continue}var cb=this.push_callback(i);cb.event=2;cb.constraint=con;cx_ite=cx_ite.next}}else{con.component.woken=true}}},constraintCbSleep:function(con){if(con.cbSet!=null){var cx_ite=con.cbSet.conlisteners.head;while(cx_ite!=null){var i=cx_ite.elt;if(i.event!=3){cx_ite=cx_ite.next;continue}var cb=this.push_callback(i);cb.event=3;cb.constraint=con;cx_ite=cx_ite.next}}},constraintCbBreak:function(con){if(con.cbSet!=null){var cx_ite=con.cbSet.conlisteners.head;while(cx_ite!=null){var i=cx_ite.elt;if(i.event!=4){cx_ite=cx_ite.next;continue}var cb=this.push_callback(i);cb.event=4;cb.constraint=con;cx_ite=cx_ite.next}}},nullListenerType:function(cb1,cb2){var stack=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;var cx_ite=cb1.interactors.head;while(cx_ite!=null){stack.add(cx_ite.elt);cx_ite=cx_ite.next}if(cb1!=cb2){var cx_ite1=cb2.interactors.head;while(cx_ite1!=null){stack.add(cx_ite1.elt);cx_ite1=cx_ite1.next}}while(stack.head!=null){var intx=stack.pop_unsafe();if(intx.icompound!=null){var comp=intx.icompound;var cx_ite2=comp.bodies.head;while(cx_ite2!=null){stack.add(cx_ite2.elt);cx_ite2=cx_ite2.next}var cx_ite3=comp.compounds.head;while(cx_ite3!=null){stack.add(cx_ite3.elt);cx_ite3=cx_ite3.next}}else{var xshp=intx.ishape!=null?intx.ishape:null;var cx_ite4=(intx.ibody!=null?intx.ibody:intx.ishape.body).arbiters.head;while(cx_ite4!=null){var xarb=cx_ite4.elt;if(xarb.present==0){cx_ite4=cx_ite4.next;continue}if(xshp!=null&&!(xarb.ws1==xshp||xarb.ws2==xshp)){cx_ite4=cx_ite4.next;continue}this.MRCA_chains(xarb.ws1,xarb.ws2);var cx_ite5=this.mrca1.head;while(cx_ite5!=null){var i1=cx_ite5.elt;if(i1.cbSet!=cb1&&i1.cbSet!=cb2){cx_ite5=cx_ite5.next;continue}var cx_ite6=this.mrca2.head;while(cx_ite6!=null){var i2=cx_ite6.elt;if(i1.cbSet==cb1&&i2.cbSet!=cb2||i1.cbSet==cb2&&i2.cbSet!=cb1){cx_ite6=cx_ite6.next;continue}var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(callbackset!=null){while(callbackset.arbiters.head!=null){var arb=callbackset.arbiters.pop_unsafe();arb.present--}this.remove_callbackset(callbackset)}cx_ite6=cx_ite6.next}cx_ite5=cx_ite5.next}cx_ite4=cx_ite4.next}}}},nullInteractorType:function(intx,me){if(me==null){me=intx}if(intx.icompound!=null){var comp=intx.icompound;var cx_ite=comp.bodies.head;while(cx_ite!=null){this.nullInteractorType(cx_ite.elt,me);cx_ite=cx_ite.next}var cx_ite1=comp.compounds.head;while(cx_ite1!=null){this.nullInteractorType(cx_ite1.elt,me);cx_ite1=cx_ite1.next}}else{var xshp=intx.ishape!=null?intx.ishape:null;var cx_ite2=(intx.ibody!=null?intx.ibody:intx.ishape.body).arbiters.head;while(cx_ite2!=null){var xarb=cx_ite2.elt;if(xarb.present==0){cx_ite2=cx_ite2.next;continue}if(xshp!=null&&!(xarb.ws1==xshp||xarb.ws2==xshp)){cx_ite2=cx_ite2.next;continue}this.MRCA_chains(xarb.ws1,xarb.ws2);var cx_ite3=this.mrca1.head;while(cx_ite3!=null){var i1=cx_ite3.elt;var cx_ite4=this.mrca2.head;while(cx_ite4!=null){var i2=cx_ite4.elt;if(i1!=me&&i2!=me){cx_ite4=cx_ite4.next;continue}var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(callbackset!=null){xarb.present--;callbackset.remove_arb(xarb);if(callbackset.arbiters.head==null){this.remove_callbackset(callbackset)}}cx_ite4=cx_ite4.next}cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}}},freshListenerType:function(cb1,cb2){var stack=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;var cx_ite=cb1.interactors.head;while(cx_ite!=null){stack.add(cx_ite.elt);cx_ite=cx_ite.next}if(cb1!=cb2){var cx_ite1=cb2.interactors.head;while(cx_ite1!=null){stack.add(cx_ite1.elt);cx_ite1=cx_ite1.next}}while(stack.head!=null){var intx=stack.pop_unsafe();if(intx.icompound!=null){var comp=intx.icompound;var cx_ite2=comp.bodies.head;while(cx_ite2!=null){stack.add(cx_ite2.elt);cx_ite2=cx_ite2.next}var cx_ite3=comp.compounds.head;while(cx_ite3!=null){stack.add(cx_ite3.elt);cx_ite3=cx_ite3.next}}else{var xshp=intx.ishape!=null?intx.ishape:null;var cx_ite4=(intx.ibody!=null?intx.ibody:intx.ishape.body).arbiters.head;while(cx_ite4!=null){var xarb=cx_ite4.elt;if(!xarb.presentable){cx_ite4=cx_ite4.next;continue}if(xshp!=null&&!(xarb.ws1==xshp||xarb.ws2==xshp)){cx_ite4=cx_ite4.next;continue}this.MRCA_chains(xarb.ws1,xarb.ws2);var cx_ite5=this.mrca1.head;while(cx_ite5!=null){var i1=cx_ite5.elt;if(i1.cbSet!=cb1&&i1.cbSet!=cb2){cx_ite5=cx_ite5.next;continue}var cx_ite6=this.mrca2.head;while(cx_ite6!=null){var i2=cx_ite6.elt;if(i1.cbSet==cb1&&i2.cbSet!=cb2||i1.cbSet==cb2&&i2.cbSet!=cb1){cx_ite6=cx_ite6.next;continue}var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(callbackset==null){callbackset=zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);this.add_callbackset(callbackset)}var tmp;var ret;ret=false;var cx_ite7=callbackset.arbiters.head;while(cx_ite7!=null){if(cx_ite7.elt==xarb){ret=true;break}cx_ite7=cx_ite7.next}if(!ret){var _this=callbackset.arbiters;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret1.next;ret1.next=null}ret1.elt=xarb;var temp=ret1;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++;tmp=true}else{tmp=false}if(tmp){xarb.present++}cx_ite6=cx_ite6.next}cx_ite5=cx_ite5.next}cx_ite4=cx_ite4.next}}}},freshInteractorType:function(intx,me){if(me==null){me=intx}if(intx.icompound!=null){var comp=intx.icompound;var cx_ite=comp.bodies.head;while(cx_ite!=null){this.freshInteractorType(cx_ite.elt,me);cx_ite=cx_ite.next}var cx_ite1=comp.compounds.head;while(cx_ite1!=null){this.freshInteractorType(cx_ite1.elt,me);cx_ite1=cx_ite1.next}}else{var xshp=intx.ishape!=null?intx.ishape:null;var cx_ite2=(intx.ibody!=null?intx.ibody:intx.ishape.body).arbiters.head;while(cx_ite2!=null){var xarb=cx_ite2.elt;if(!xarb.presentable){cx_ite2=cx_ite2.next;continue}if(xshp!=null&&!(xarb.ws1==xshp||xarb.ws2==xshp)){cx_ite2=cx_ite2.next;continue}this.MRCA_chains(xarb.ws1,xarb.ws2);var cx_ite3=this.mrca1.head;while(cx_ite3!=null){var i1=cx_ite3.elt;var cx_ite4=this.mrca2.head;while(cx_ite4!=null){var i2=cx_ite4.elt;if(i1!=me&&i2!=me){cx_ite4=cx_ite4.next;continue}var cb1=i1.cbSet;var cb2=i2.cbSet;cb1.validate();cb2.validate();var ret=null;var cx_ite5=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite5!=null){var p=cx_ite5.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret=p;break}cx_ite5=cx_ite5.next}if(ret==null){var ret1;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret1=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret1=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret1.next;ret1.next=null}ret1.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret1.a=cb1;ret1.b=cb2}else{ret1.a=cb2;ret1.b=cb1}ret=ret1;cb1.cbpairs.add(ret);if(cb2!=cb1){cb2.cbpairs.add(ret)}}if(ret.zip_listeners){ret.zip_listeners=false;ret.__validate()}if(ret.listeners.head!=null){var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(callbackset==null){callbackset=zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);this.add_callbackset(callbackset)}var tmp;var ret2;ret2=false;var cx_ite6=callbackset.arbiters.head;while(cx_ite6!=null){if(cx_ite6.elt==xarb){ret2=true;break}cx_ite6=cx_ite6.next}if(!ret2){var _this=callbackset.arbiters;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret3.next;ret3.next=null}ret3.elt=xarb;var temp=ret3;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++;tmp=true}else{tmp=false}if(tmp){xarb.present++}}cx_ite4=cx_ite4.next}cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}}},wakeCompound:function(x){var cx_ite=x.bodies.head;while(cx_ite!=null){var y=cx_ite.elt;if(!y.world){y.component.waket=this.stamp+(this.midstep?0:1);if(y.type==3){y.kinematicDelaySleep=true}if(y.component.sleeping){this.really_wake(y,false)}}cx_ite=cx_ite.next}var cx_ite1=x.constraints.head;while(cx_ite1!=null){this.wake_constraint(cx_ite1.elt);cx_ite1=cx_ite1.next}var cx_ite2=x.compounds.head;while(cx_ite2!=null){this.wakeCompound(cx_ite2.elt);cx_ite2=cx_ite2.next}},wakeIsland:function(i){while(i.comps.head!=null){var c=i.comps.pop_unsafe();c.waket=this.stamp+(this.midstep?0:1);if(c.isBody){var b=c.body;this.live.add(b);var cx_ite=b.arbiters.head;while(cx_ite!=null){var arb=cx_ite.elt;if(arb.sleeping){arb.sleeping=false;arb.up_stamp+=this.stamp-arb.sleep_stamp;if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){var carb=arb.colarb;if(carb.stat){var _this=this.c_arbiters_true;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret.next;ret.next=null}ret.elt=carb;var temp=ret;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++}else{var _this1=this.c_arbiters_false;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret1.next;ret1.next=null}ret1.elt=carb;var temp1=ret1;temp1.next=_this1.head;_this1.head=temp1;_this1.modified=true;_this1.length++}}else if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){var _this2=this.f_arbiters;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=ret2.next;ret2.next=null}ret2.elt=arb.fluidarb;var temp2=ret2;temp2.next=_this2.head;_this2.head=temp2;_this2.modified=true;_this2.length++}else{var _this3=this.s_arbiters;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=ret3.next;ret3.next=null}ret3.elt=arb.sensorarb;var temp3=ret3;temp3.next=_this3.head;_this3.head=temp3;_this3.modified=true;_this3.length++}}cx_ite=cx_ite.next}this.bodyCbWake(b);c.sleeping=false;c.island=null;c.parent=c;c.rank=0;if(b.type!=1){var cx_ite1=b.shapes.head;while(cx_ite1!=null){var shape=cx_ite1.elt;if(shape.node!=null){this.bphase.sync(shape)}cx_ite1=cx_ite1.next}}}else{var con=c.constraint;var _this4=this.live_constraints;var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret4.next;ret4.next=null}ret4.elt=con;var temp4=ret4;temp4.next=_this4.head;_this4.head=temp4;_this4.modified=true;_this4.length++;this.constraintCbWake(con);c.sleeping=false;c.island=null;c.parent=c;c.rank=0}}i.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=i},non_inlined_wake:function(o,fst){if(fst==null){fst=false}if(!o.world){o.component.waket=this.stamp+(this.midstep?0:1);if(o.type==3){o.kinematicDelaySleep=true}if(o.component.sleeping){this.really_wake(o,fst)}}},really_wake:function(o,fst){if(fst==null){fst=false}if(o.component.island==null){o.component.sleeping=false;if(o.type==3||o.type==1){var _this=this.staticsleep;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Body}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++}else{var _this1=this.live;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$Body}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret1.next;ret1.next=null}ret1.elt=o;var temp1=ret1;temp1.next=_this1.head;_this1.head=temp1;_this1.modified=true;_this1.length++}var cx_ite=o.constraints.head;while(cx_ite!=null){var con=cx_ite.elt;if(con.space==this){this.wake_constraint(con)}cx_ite=cx_ite.next}var cx_ite1=o.arbiters.head;while(cx_ite1!=null){var arb=cx_ite1.elt;if(arb.sleeping){arb.sleeping=false;arb.up_stamp+=this.stamp+(this.midstep?0:1)-arb.sleep_stamp;if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL){var carb=arb.colarb;if(carb.stat){var _this2=this.c_arbiters_true;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret2.next;ret2.next=null}ret2.elt=carb;var temp2=ret2;temp2.next=_this2.head;_this2.head=temp2;_this2.modified=true;_this2.length++}else{var _this3=this.c_arbiters_false;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret3.next;ret3.next=null}ret3.elt=carb;var temp3=ret3;temp3.next=_this3.head;_this3.head=temp3;_this3.modified=true;_this3.length++}}else if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){var _this4=this.f_arbiters;var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=ret4.next;ret4.next=null}ret4.elt=arb.fluidarb;var temp4=ret4;temp4.next=_this4.head;_this4.head=temp4;_this4.modified=true;_this4.length++}else{var _this5=this.s_arbiters;var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=ret5.next;ret5.next=null}ret5.elt=arb.sensorarb;var temp5=ret5;temp5.next=_this5.head;_this5.head=temp5;_this5.modified=true;_this5.length++}}if(arb.type!=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR&&!arb.cleared&&arb.up_stamp>=this.stamp&&(arb.immState&1)!=0){if(arb.b1.type==2&&arb.b1.component.sleeping){var o1=arb.b1;if(!o1.world){o1.component.waket=this.stamp+(this.midstep?0:1);if(o1.type==3){o1.kinematicDelaySleep=true}if(o1.component.sleeping){this.really_wake(o1,false)}}}if(arb.b2.type==2&&arb.b2.component.sleeping){var o2=arb.b2;if(!o2.world){o2.component.waket=this.stamp+(this.midstep?0:1);if(o2.type==3){o2.kinematicDelaySleep=true}if(o2.component.sleeping){this.really_wake(o2,false)}}}}cx_ite1=cx_ite1.next}if(!fst&&o.type==2){this.bodyCbWake(o)}if(!fst&&!this.bphase.is_sweep&&o.type!=1){var cx_ite2=o.shapes.head;while(cx_ite2!=null){var shape=cx_ite2.elt;if(shape.node!=null){this.bphase.sync(shape)}cx_ite2=cx_ite2.next}}}else{this.wakeIsland(o.component.island)}},wake_constraint:function(con,fst){if(fst==null){fst=false}if(con.active){con.component.waket=this.stamp+(this.midstep?0:1);if(con.component.sleeping){if(con.component.island==null){con.component.sleeping=false;var _this=this.live_constraints;var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret.next;ret.next=null}ret.elt=con;var temp=ret;temp.next=_this.head;_this.head=temp;_this.modified=true;_this.length++;con.wake_connected();if(!fst){this.constraintCbWake(con)}}else{this.wakeIsland(con.component.island)}return true}else{return false}}else{return false}},doForests:function(dt){var cx_ite=this.c_arbiters_false.head;while(cx_ite!=null){var arb=cx_ite.elt;if(!arb.cleared&&arb.up_stamp==this.stamp&&(arb.immState&1)!=0){if(arb.b1.type==2&&arb.b2.type==2){var xr;if(arb.b1.component==arb.b1.component.parent){xr=arb.b1.component}else{var obj=arb.b1.component;var stack=null;while(obj!=obj.parent){var nxt=obj.parent;obj.parent=stack;stack=obj;obj=nxt}while(stack!=null){var nxt1=stack.parent;stack.parent=obj;stack=nxt1}xr=obj}var yr;if(arb.b2.component==arb.b2.component.parent){yr=arb.b2.component}else{var obj1=arb.b2.component;var stack1=null;while(obj1!=obj1.parent){var nxt2=obj1.parent;obj1.parent=stack1;stack1=obj1;obj1=nxt2}while(stack1!=null){var nxt3=stack1.parent;stack1.parent=obj1;stack1=nxt3}yr=obj1}if(xr!=yr){if(xr.rank<yr.rank){xr.parent=yr}else if(xr.rank>yr.rank){yr.parent=xr}else{yr.parent=xr;xr.rank++}}}}cx_ite=cx_ite.next}var cx_ite1=this.f_arbiters.head;while(cx_ite1!=null){var arb1=cx_ite1.elt;if(!arb1.cleared&&arb1.up_stamp==this.stamp&&(arb1.immState&1)!=0){if(arb1.b1.type==2&&arb1.b2.type==2){var xr1;if(arb1.b1.component==arb1.b1.component.parent){xr1=arb1.b1.component}else{var obj2=arb1.b1.component;var stack2=null;while(obj2!=obj2.parent){var nxt4=obj2.parent;obj2.parent=stack2;stack2=obj2;obj2=nxt4}while(stack2!=null){var nxt5=stack2.parent;stack2.parent=obj2;stack2=nxt5}xr1=obj2}var yr1;if(arb1.b2.component==arb1.b2.component.parent){yr1=arb1.b2.component}else{var obj3=arb1.b2.component;var stack3=null;while(obj3!=obj3.parent){var nxt6=obj3.parent;obj3.parent=stack3;stack3=obj3;obj3=nxt6}while(stack3!=null){var nxt7=stack3.parent;stack3.parent=obj3;stack3=nxt7}yr1=obj3}if(xr1!=yr1){if(xr1.rank<yr1.rank){xr1.parent=yr1}else if(xr1.rank>yr1.rank){yr1.parent=xr1}else{yr1.parent=xr1;xr1.rank++}}}}cx_ite1=cx_ite1.next}var cx_ite2=this.live_constraints.head;while(cx_ite2!=null){cx_ite2.elt.forest();cx_ite2=cx_ite2.next}while(this.live.head!=null){var _this=this.live;var ret=_this.head.elt;_this.pop();var oc=ret.component;var root;if(oc==oc.parent){root=oc}else{var obj4=oc;var stack4=null;while(obj4!=obj4.parent){var nxt8=obj4.parent;obj4.parent=stack4;stack4=obj4;obj4=nxt8}while(stack4!=null){var nxt9=stack4.parent;stack4.parent=obj4;stack4=nxt9}root=obj4}if(root.island==null){if(zpp_$nape_space_ZPP_$Island.zpp_pool==null){root.island=new zpp_$nape_space_ZPP_$Island}else{root.island=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=root.island.next;root.island.next=null}root.island.waket=0;var _this1=this.islands;var o=root.island;o._inuse=true;o.next=_this1.next;_this1.next=o;_this1.modified=true;_this1.length++;root.island.sleep=true}oc.island=root.island;var _this2=oc.island.comps;var ret1;if(zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool==null){ret1=new zpp_$nape_util_ZNPNode_$ZPP_$Component}else{ret1=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=ret1.next;ret1.next=null}ret1.elt=oc;var temp=ret1;temp.next=_this2.head;_this2.head=temp;_this2.modified=true;_this2.length++;var rest=ret.atRest(dt);oc.island.sleep=oc.island.sleep&&rest;if(oc.waket>oc.island.waket){oc.island.waket=oc.waket}}while(this.live_constraints.head!=null){var _this3=this.live_constraints;var ret2=_this3.head.elt;_this3.pop();var oc1=ret2.component;var root1;if(oc1==oc1.parent){root1=oc1}else{var obj5=oc1;var stack5=null;while(obj5!=obj5.parent){var nxt10=obj5.parent;obj5.parent=stack5;stack5=obj5;obj5=nxt10}while(stack5!=null){var nxt11=stack5.parent;stack5.parent=obj5;stack5=nxt11}root1=obj5}oc1.island=root1.island;var _this4=oc1.island.comps;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$Component}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=ret3.next;ret3.next=null}ret3.elt=oc1;var temp1=ret3;temp1.next=_this4.head;_this4.head=temp1;_this4.modified=true;_this4.length++;if(oc1.waket>oc1.island.waket){oc1.island.waket=oc1.waket}}while(this.islands.next!=null){var _this5=this.islands;var ret4=_this5.next;_this5.pop();if(ret4.sleep){var cx_ite3=ret4.comps.head;while(cx_ite3!=null){var c=cx_ite3.elt;if(c.isBody){var b=c.body;b.velx=0;b.vely=0;b.angvel=0;c.sleeping=true;var cx_ite4=b.shapes.head;while(cx_ite4!=null){this.bphase.sync(cx_ite4.elt);cx_ite4=cx_ite4.next}this.bodyCbSleep(b)}else{this.constraintCbSleep(c.constraint);c.sleeping=true}cx_ite3=cx_ite3.next}}else{while(ret4.comps.head!=null){var _this6=ret4.comps;var ret5=_this6.head.elt;_this6.pop();ret5.waket=ret4.waket;if(ret5.isBody){var _this7=this.live;var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$Body}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret6.next;ret6.next=null}ret6.elt=ret5.body;var temp2=ret6;temp2.next=_this7.head;_this7.head=temp2;_this7.modified=true;_this7.length++}else{var _this8=this.live_constraints;var ret7;if(zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool==null){ret7=new zpp_$nape_util_ZNPNode_$ZPP_$Constraint}else{ret7=zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.zpp_pool=ret7.next;ret7.next=null}ret7.elt=ret5.constraint;var temp3=ret7;temp3.next=_this8.head;_this8.head=temp3;_this8.modified=true;_this8.length++}ret5.sleeping=false;ret5.island=null;ret5.parent=ret5;ret5.rank=0}ret4.next=zpp_$nape_space_ZPP_$Island.zpp_pool;zpp_$nape_space_ZPP_$Island.zpp_pool=ret4}}},sleepArbiters:function(){var pre=null;var arbs=this.c_arbiters_true;var arbite=arbs.head;var fst=this.c_arbiters_false!=null;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre=null}while(arbite!=null){var arb=arbite.elt;if(arb.b1.component.sleeping&&arb.b2.component.sleeping){arb.sleep_stamp=this.stamp;arb.sleeping=true;var old;var ret;if(pre==null){old=arbs.head;ret=old.next;arbs.head=ret;if(arbs.head==null){arbs.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){arbs.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=o;arbs.modified=true;arbs.length--;arbs.pushmod=true;arbite=ret;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre=null}continue}pre=arbite;arbite=arbite.next;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre=null}}var pre1=null;var arbs1=this.f_arbiters;var arbite1=arbs1.head;while(arbite1!=null){var arb1=arbite1.elt;if(arb1.b1.component.sleeping&&arb1.b2.component.sleeping){arb1.sleep_stamp=this.stamp;arb1.sleeping=true;var old1;var ret1;if(pre1==null){old1=arbs1.head;ret1=old1.next;arbs1.head=ret1;if(arbs1.head==null){arbs1.pushmod=true}}else{old1=pre1.next;ret1=old1.next;pre1.next=ret1;if(ret1==null){arbs1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=o1;arbs1.modified=true;arbs1.length--;arbs1.pushmod=true;arbite1=ret1;continue}pre1=arbite1;arbite1=arbite1.next}var pre2=null;var arbs2=this.s_arbiters;var arbite2=arbs2.head;while(arbite2!=null){var arb2=arbite2.elt;if(arb2.b1.component.sleeping&&arb2.b2.component.sleeping){arb2.sleep_stamp=this.stamp;arb2.sleeping=true;var old2;var ret2;if(pre2==null){old2=arbs2.head;ret2=old2.next;arbs2.head=ret2;if(arbs2.head==null){arbs2.pushmod=true}}else{old2=pre2.next;ret2=old2.next;pre2.next=ret2;if(ret2==null){arbs2.pushmod=true}}var o2=old2;o2.elt=null;o2.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=o2;arbs2.modified=true;arbs2.length--;arbs2.pushmod=true;arbite2=ret2;continue}pre2=arbite2;arbite2=arbite2.next}},static_validation:function(body){if(body.shapes.head!=null){if(body.zip_aabb){body.zip_aabb=false;body.aabb.minx=Infinity;body.aabb.miny=Infinity;body.aabb.maxx=-Infinity;body.aabb.maxy=-Infinity;var cx_ite=body.shapes.head;while(cx_ite!=null){var s=cx_ite.elt;if(s.zip_aabb){if(s.body!=null){s.zip_aabb=false;if(s.type==0){var _this=s.circle;if(_this.zip_worldCOM){if(_this.body!=null){_this.zip_worldCOM=false;if(_this.zip_localCOM){_this.zip_localCOM=false;if(_this.type==1){var _this1=_this.polygon;if(_this1.lverts.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y}else if(_this1.lverts.next.next.next==null){_this1.localCOMx=_this1.lverts.next.x;_this1.localCOMy=_this1.lverts.next.y;_this1.localCOMx+=_this1.lverts.next.next.x;_this1.localCOMy+=_this1.lverts.next.next.y;_this1.localCOMx*=.5;_this1.localCOMy*=.5}else{_this1.localCOMx=0;_this1.localCOMy=0;var area=0;var cx_ite1=_this1.lverts.next;var u=cx_ite1;cx_ite1=cx_ite1.next;var v=cx_ite1;cx_ite1=cx_ite1.next;while(cx_ite1!=null){var w=cx_ite1;area+=v.x*(w.y-u.y);var cf=w.y*v.x-w.x*v.y;_this1.localCOMx+=(v.x+w.x)*cf;_this1.localCOMy+=(v.y+w.y)*cf;u=v;v=w;cx_ite1=cx_ite1.next}cx_ite1=_this1.lverts.next;var w1=cx_ite1;area+=v.x*(w1.y-u.y);var cf1=w1.y*v.x-w1.x*v.y;_this1.localCOMx+=(v.x+w1.x)*cf1;_this1.localCOMy+=(v.y+w1.y)*cf1;u=v;cx_ite1=cx_ite1.next;var w2=cx_ite1;area+=w1.x*(w2.y-u.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this1.localCOMx+=(w1.x+w2.x)*cf2;_this1.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this1.localCOMx*=t;_this1.localCOMy*=t}}if(_this.wrap_localCOM!=null){_this.wrap_localCOM.zpp_inner.x=_this.localCOMx;_this.wrap_localCOM.zpp_inner.y=_this.localCOMy}}var _this2=_this.body;if(_this2.zip_axis){_this2.zip_axis=false;_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy)}}var rx=_this.radius;var ry=_this.radius;_this.aabb.minx=_this.worldCOMx-rx;_this.aabb.miny=_this.worldCOMy-ry;_this.aabb.maxx=_this.worldCOMx+rx;_this.aabb.maxy=_this.worldCOMy+ry}else{var _this3=s.polygon;if(_this3.zip_gverts){if(_this3.body!=null){_this3.zip_gverts=false;_this3.validate_lverts();var _this4=_this3.body;if(_this4.zip_axis){_this4.zip_axis=false;_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}var li=_this3.lverts.next;var cx_ite2=_this3.gverts.next;while(cx_ite2!=null){var g=cx_ite2;var l=li;li=li.next;g.x=_this3.body.posx+(_this3.body.axisy*l.x-_this3.body.axisx*l.y);g.y=_this3.body.posy+(l.x*_this3.body.axisx+l.y*_this3.body.axisy);cx_ite2=cx_ite2.next}}}var p0=_this3.gverts.next;_this3.aabb.minx=p0.x;_this3.aabb.miny=p0.y;_this3.aabb.maxx=p0.x;_this3.aabb.maxy=p0.y;var cx_ite3=_this3.gverts.next.next;while(cx_ite3!=null){var p=cx_ite3;if(p.x<_this3.aabb.minx){_this3.aabb.minx=p.x}if(p.x>_this3.aabb.maxx){_this3.aabb.maxx=p.x}if(p.y<_this3.aabb.miny){_this3.aabb.miny=p.y}if(p.y>_this3.aabb.maxy){_this3.aabb.maxy=p.y}cx_ite3=cx_ite3.next}}}}var _this5=body.aabb;var x=s.aabb;if(x.minx<_this5.minx){_this5.minx=x.minx}if(x.maxx>_this5.maxx){_this5.maxx=x.maxx}if(x.miny<_this5.miny){_this5.miny=x.miny}if(x.maxy>_this5.maxy){_this5.maxy=x.maxy}cx_ite=cx_ite.next}}}body.validate_mass();body.validate_inertia();var cx_ite4=body.shapes.head;while(cx_ite4!=null){var s1=cx_ite4.elt;if(s1.type==1){var _this6=s1.polygon;if(_this6.zip_sanitation){_this6.zip_sanitation=false;_this6.splice_collinear_real()}var _this7=s1.polygon;if(_this7.zip_gaxi){if(_this7.body!=null){_this7.zip_gaxi=false;_this7.validate_laxi();var _this8=_this7.body;if(_this8.zip_axis){_this8.zip_axis=false;_this8.axisx=Math.sin(_this8.rot);_this8.axisy=Math.cos(_this8.rot)}if(_this7.zip_gverts){if(_this7.body!=null){_this7.zip_gverts=false;_this7.validate_lverts();var _this9=_this7.body;if(_this9.zip_axis){_this9.zip_axis=false;_this9.axisx=Math.sin(_this9.rot);_this9.axisy=Math.cos(_this9.rot)}var li1=_this7.lverts.next;var cx_ite5=_this7.gverts.next;while(cx_ite5!=null){var g1=cx_ite5;var l1=li1;li1=li1.next;g1.x=_this7.body.posx+(_this7.body.axisy*l1.x-_this7.body.axisx*l1.y);g1.y=_this7.body.posy+(l1.x*_this7.body.axisx+l1.y*_this7.body.axisy);cx_ite5=cx_ite5.next}}}var ite=_this7.edges.head;var cx_ite6=_this7.gverts.next;var u1=cx_ite6;cx_ite6=cx_ite6.next;while(cx_ite6!=null){var v1=cx_ite6;var e=ite.elt;ite=ite.next;e.gp0=u1;e.gp1=v1;e.gnormx=_this7.body.axisy*e.lnormx-_this7.body.axisx*e.lnormy;e.gnormy=e.lnormx*_this7.body.axisx+e.lnormy*_this7.body.axisy;e.gprojection=_this7.body.posx*e.gnormx+_this7.body.posy*e.gnormy+e.lprojection;if(e.wrap_gnorm!=null){e.wrap_gnorm.zpp_inner.x=e.gnormx;e.wrap_gnorm.zpp_inner.y=e.gnormy}e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;u1=v1;cx_ite6=cx_ite6.next}var e1=ite.elt;e1.gp0=u1;e1.gp1=_this7.gverts.next;e1.gnormx=_this7.body.axisy*e1.lnormx-_this7.body.axisx*e1.lnormy;e1.gnormy=e1.lnormx*_this7.body.axisx+e1.lnormy*_this7.body.axisy;e1.gprojection=_this7.body.posx*e1.gnormx+_this7.body.posy*e1.gnormy+e1.lprojection;if(e1.wrap_gnorm!=null){e1.wrap_gnorm.zpp_inner.x=e1.gnormx;e1.wrap_gnorm.zpp_inner.y=e1.gnormy}e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy;e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}}cx_ite4=cx_ite4.next}body.sweepFrozen=true},validation:function(){var _this=this.cbsets;if(!_this.cbsets.empty()){var set_ite=_this.cbsets.parent;while(set_ite.prev!=null)set_ite=set_ite.prev;while(set_ite!=null){set_ite.data.validate();if(set_ite.next!=null){set_ite=set_ite.next;while(set_ite.prev!=null)set_ite=set_ite.prev}else{while(set_ite.parent!=null&&set_ite==set_ite.parent.next)set_ite=set_ite.parent;set_ite=set_ite.parent}}}var cx_ite=this.live.head;while(cx_ite!=null){var cur=cx_ite.elt;cur.sweepRadius=0;var cx_ite1=cur.shapes.head;while(cx_ite1!=null){var s=cx_ite1.elt;if(s.type==1){var _this1=s.polygon;if(_this1.zip_sanitation){_this1.zip_sanitation=false;_this1.splice_collinear_real()}var _this2=s.polygon;if(_this2.zip_gaxi){if(_this2.body!=null){_this2.zip_gaxi=false;_this2.validate_laxi();var _this3=_this2.body;if(_this3.zip_axis){_this3.zip_axis=false;_this3.axisx=Math.sin(_this3.rot);_this3.axisy=Math.cos(_this3.rot)}if(_this2.zip_gverts){if(_this2.body!=null){_this2.zip_gverts=false;_this2.validate_lverts();var _this4=_this2.body;if(_this4.zip_axis){_this4.zip_axis=false;_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}var li=_this2.lverts.next;var cx_ite2=_this2.gverts.next;while(cx_ite2!=null){var g=cx_ite2;var l=li;li=li.next;g.x=_this2.body.posx+(_this2.body.axisy*l.x-_this2.body.axisx*l.y);g.y=_this2.body.posy+(l.x*_this2.body.axisx+l.y*_this2.body.axisy);cx_ite2=cx_ite2.next}}}var ite=_this2.edges.head;var cx_ite3=_this2.gverts.next;var u=cx_ite3;cx_ite3=cx_ite3.next;while(cx_ite3!=null){var v=cx_ite3;var e=ite.elt;ite=ite.next;e.gp0=u;e.gp1=v;e.gnormx=_this2.body.axisy*e.lnormx-_this2.body.axisx*e.lnormy;e.gnormy=e.lnormx*_this2.body.axisx+e.lnormy*_this2.body.axisy;e.gprojection=_this2.body.posx*e.gnormx+_this2.body.posy*e.gnormy+e.lprojection;if(e.wrap_gnorm!=null){e.wrap_gnorm.zpp_inner.x=e.gnormx;e.wrap_gnorm.zpp_inner.y=e.gnormy}e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;u=v;cx_ite3=cx_ite3.next}var e1=ite.elt;e1.gp0=u;e1.gp1=_this2.gverts.next;e1.gnormx=_this2.body.axisy*e1.lnormx-_this2.body.axisx*e1.lnormy;e1.gnormy=e1.lnormx*_this2.body.axisx+e1.lnormy*_this2.body.axisy;e1.gprojection=_this2.body.posx*e1.gnormx+_this2.body.posy*e1.gnormy+e1.lprojection;if(e1.wrap_gnorm!=null){e1.wrap_gnorm.zpp_inner.x=e1.gnormx;e1.wrap_gnorm.zpp_inner.y=e1.gnormy}e1.tp0=e1.gp0.y*e1.gnormx-e1.gp0.x*e1.gnormy;e1.tp1=e1.gp1.y*e1.gnormx-e1.gp1.x*e1.gnormy}}}s.validate_sweepRadius();if(s.sweepRadius>cur.sweepRadius){cur.sweepRadius=s.sweepRadius}cx_ite1=cx_ite1.next}cur.validate_mass();cur.validate_inertia();if(cur.shapes.head!=null){if(cur.zip_aabb){cur.zip_aabb=false;cur.aabb.minx=Infinity;cur.aabb.miny=Infinity;cur.aabb.maxx=-Infinity;cur.aabb.maxy=-Infinity;var cx_ite4=cur.shapes.head;while(cx_ite4!=null){var s1=cx_ite4.elt;if(s1.zip_aabb){if(s1.body!=null){s1.zip_aabb=false;if(s1.type==0){var _this5=s1.circle;if(_this5.zip_worldCOM){if(_this5.body!=null){_this5.zip_worldCOM=false;if(_this5.zip_localCOM){_this5.zip_localCOM=false;if(_this5.type==1){var _this6=_this5.polygon;if(_this6.lverts.next.next==null){_this6.localCOMx=_this6.lverts.next.x;_this6.localCOMy=_this6.lverts.next.y}else if(_this6.lverts.next.next.next==null){_this6.localCOMx=_this6.lverts.next.x;_this6.localCOMy=_this6.lverts.next.y;_this6.localCOMx+=_this6.lverts.next.next.x;_this6.localCOMy+=_this6.lverts.next.next.y;_this6.localCOMx*=.5;_this6.localCOMy*=.5}else{_this6.localCOMx=0;_this6.localCOMy=0;var area=0;var cx_ite5=_this6.lverts.next;var u1=cx_ite5;cx_ite5=cx_ite5.next;var v1=cx_ite5;cx_ite5=cx_ite5.next;while(cx_ite5!=null){var w=cx_ite5;area+=v1.x*(w.y-u1.y);var cf=w.y*v1.x-w.x*v1.y;_this6.localCOMx+=(v1.x+w.x)*cf;_this6.localCOMy+=(v1.y+w.y)*cf;u1=v1;v1=w;cx_ite5=cx_ite5.next}cx_ite5=_this6.lverts.next;var w1=cx_ite5;area+=v1.x*(w1.y-u1.y);var cf1=w1.y*v1.x-w1.x*v1.y;_this6.localCOMx+=(v1.x+w1.x)*cf1;_this6.localCOMy+=(v1.y+w1.y)*cf1;u1=v1;cx_ite5=cx_ite5.next;var w2=cx_ite5;area+=w1.x*(w2.y-u1.y);var cf2=w2.y*w1.x-w2.x*w1.y;_this6.localCOMx+=(w1.x+w2.x)*cf2;_this6.localCOMy+=(w1.y+w2.y)*cf2;area=1/(3*area);var t=area;_this6.localCOMx*=t;_this6.localCOMy*=t}}if(_this5.wrap_localCOM!=null){_this5.wrap_localCOM.zpp_inner.x=_this5.localCOMx;_this5.wrap_localCOM.zpp_inner.y=_this5.localCOMy}}var _this7=_this5.body;if(_this7.zip_axis){_this7.zip_axis=false;_this7.axisx=Math.sin(_this7.rot);_this7.axisy=Math.cos(_this7.rot)}_this5.worldCOMx=_this5.body.posx+(_this5.body.axisy*_this5.localCOMx-_this5.body.axisx*_this5.localCOMy);_this5.worldCOMy=_this5.body.posy+(_this5.localCOMx*_this5.body.axisx+_this5.localCOMy*_this5.body.axisy)}}var rx=_this5.radius;var ry=_this5.radius;_this5.aabb.minx=_this5.worldCOMx-rx;_this5.aabb.miny=_this5.worldCOMy-ry;_this5.aabb.maxx=_this5.worldCOMx+rx;_this5.aabb.maxy=_this5.worldCOMy+ry}else{var _this8=s1.polygon;if(_this8.zip_gverts){if(_this8.body!=null){_this8.zip_gverts=false;_this8.validate_lverts();var _this9=_this8.body;if(_this9.zip_axis){_this9.zip_axis=false;_this9.axisx=Math.sin(_this9.rot);_this9.axisy=Math.cos(_this9.rot)}var li1=_this8.lverts.next;var cx_ite6=_this8.gverts.next;while(cx_ite6!=null){var g1=cx_ite6;var l1=li1;li1=li1.next;g1.x=_this8.body.posx+(_this8.body.axisy*l1.x-_this8.body.axisx*l1.y);g1.y=_this8.body.posy+(l1.x*_this8.body.axisx+l1.y*_this8.body.axisy);cx_ite6=cx_ite6.next}}}var p0=_this8.gverts.next;_this8.aabb.minx=p0.x;_this8.aabb.miny=p0.y;_this8.aabb.maxx=p0.x;_this8.aabb.maxy=p0.y;var cx_ite7=_this8.gverts.next.next;while(cx_ite7!=null){var p=cx_ite7;if(p.x<_this8.aabb.minx){_this8.aabb.minx=p.x}if(p.x>_this8.aabb.maxx){_this8.aabb.maxx=p.x}if(p.y<_this8.aabb.miny){_this8.aabb.miny=p.y}if(p.y>_this8.aabb.maxy){_this8.aabb.maxy=p.y}cx_ite7=cx_ite7.next}}}}var _this10=cur.aabb;var x=s1.aabb;if(x.minx<_this10.minx){_this10.minx=x.minx}if(x.maxx>_this10.maxx){_this10.maxx=x.maxx}if(x.miny<_this10.miny){_this10.miny=x.miny}if(x.maxy>_this10.maxy){_this10.maxy=x.maxy}cx_ite4=cx_ite4.next}}cur.validate_worldCOM()}cur.validate_gravMass();if(cur.zip_axis){cur.zip_axis=false;cur.axisx=Math.sin(cur.rot);cur.axisy=Math.cos(cur.rot)}if(cur.component.woken&&cur.cbSet!=null){var cx_ite8=cur.cbSet.bodylisteners.head;while(cx_ite8!=null){var i=cx_ite8.elt;if(i.event!=2){cx_ite8=cx_ite8.next;continue}var cb=this.push_callback(i);cb.event=2;cb.body=cur;cx_ite8=cx_ite8.next}}cur.component.woken=false;var cx_ite9=cur.shapes.head;while(cx_ite9!=null){this.bphase.sync(cx_ite9.elt);cx_ite9=cx_ite9.next}cx_ite=cx_ite.next}var cx_ite10=this.kinematics.head;while(cx_ite10!=null){var cur1=cx_ite10.elt;cur1.sweepRadius=0;var cx_ite11=cur1.shapes.head;while(cx_ite11!=null){var s2=cx_ite11.elt;if(s2.type==1){var _this11=s2.polygon;if(_this11.zip_sanitation){_this11.zip_sanitation=false;_this11.splice_collinear_real()}var _this12=s2.polygon;if(_this12.zip_gaxi){if(_this12.body!=null){_this12.zip_gaxi=false;_this12.validate_laxi();var _this13=_this12.body;if(_this13.zip_axis){_this13.zip_axis=false;_this13.axisx=Math.sin(_this13.rot);_this13.axisy=Math.cos(_this13.rot)}if(_this12.zip_gverts){if(_this12.body!=null){_this12.zip_gverts=false;_this12.validate_lverts();var _this14=_this12.body;if(_this14.zip_axis){_this14.zip_axis=false;_this14.axisx=Math.sin(_this14.rot);_this14.axisy=Math.cos(_this14.rot)}var li2=_this12.lverts.next;var cx_ite12=_this12.gverts.next;while(cx_ite12!=null){var g2=cx_ite12;var l2=li2;li2=li2.next;g2.x=_this12.body.posx+(_this12.body.axisy*l2.x-_this12.body.axisx*l2.y);g2.y=_this12.body.posy+(l2.x*_this12.body.axisx+l2.y*_this12.body.axisy);cx_ite12=cx_ite12.next}}}var ite1=_this12.edges.head;var cx_ite13=_this12.gverts.next;var u2=cx_ite13;cx_ite13=cx_ite13.next;while(cx_ite13!=null){var v2=cx_ite13;var e2=ite1.elt;ite1=ite1.next;e2.gp0=u2;e2.gp1=v2;e2.gnormx=_this12.body.axisy*e2.lnormx-_this12.body.axisx*e2.lnormy;e2.gnormy=e2.lnormx*_this12.body.axisx+e2.lnormy*_this12.body.axisy;e2.gprojection=_this12.body.posx*e2.gnormx+_this12.body.posy*e2.gnormy+e2.lprojection;if(e2.wrap_gnorm!=null){e2.wrap_gnorm.zpp_inner.x=e2.gnormx;e2.wrap_gnorm.zpp_inner.y=e2.gnormy}e2.tp0=e2.gp0.y*e2.gnormx-e2.gp0.x*e2.gnormy;e2.tp1=e2.gp1.y*e2.gnormx-e2.gp1.x*e2.gnormy;u2=v2;cx_ite13=cx_ite13.next}var e3=ite1.elt;e3.gp0=u2;e3.gp1=_this12.gverts.next;e3.gnormx=_this12.body.axisy*e3.lnormx-_this12.body.axisx*e3.lnormy;e3.gnormy=e3.lnormx*_this12.body.axisx+e3.lnormy*_this12.body.axisy;e3.gprojection=_this12.body.posx*e3.gnormx+_this12.body.posy*e3.gnormy+e3.lprojection;if(e3.wrap_gnorm!=null){e3.wrap_gnorm.zpp_inner.x=e3.gnormx;e3.wrap_gnorm.zpp_inner.y=e3.gnormy}e3.tp0=e3.gp0.y*e3.gnormx-e3.gp0.x*e3.gnormy;e3.tp1=e3.gp1.y*e3.gnormx-e3.gp1.x*e3.gnormy}}}s2.validate_sweepRadius();if(s2.sweepRadius>cur1.sweepRadius){cur1.sweepRadius=s2.sweepRadius}cx_ite11=cx_ite11.next}cur1.validate_mass();cur1.validate_inertia();if(cur1.shapes.head!=null){if(cur1.zip_aabb){cur1.zip_aabb=false;cur1.aabb.minx=Infinity;cur1.aabb.miny=Infinity;cur1.aabb.maxx=-Infinity;cur1.aabb.maxy=-Infinity;var cx_ite14=cur1.shapes.head;while(cx_ite14!=null){var s3=cx_ite14.elt;if(s3.zip_aabb){if(s3.body!=null){s3.zip_aabb=false;if(s3.type==0){var _this15=s3.circle;if(_this15.zip_worldCOM){if(_this15.body!=null){_this15.zip_worldCOM=false;if(_this15.zip_localCOM){_this15.zip_localCOM=false;if(_this15.type==1){var _this16=_this15.polygon;if(_this16.lverts.next.next==null){_this16.localCOMx=_this16.lverts.next.x;_this16.localCOMy=_this16.lverts.next.y}else if(_this16.lverts.next.next.next==null){_this16.localCOMx=_this16.lverts.next.x;_this16.localCOMy=_this16.lverts.next.y;_this16.localCOMx+=_this16.lverts.next.next.x;_this16.localCOMy+=_this16.lverts.next.next.y;_this16.localCOMx*=.5;_this16.localCOMy*=.5}else{_this16.localCOMx=0;_this16.localCOMy=0;var area1=0;var cx_ite15=_this16.lverts.next;var u3=cx_ite15;cx_ite15=cx_ite15.next;var v3=cx_ite15;cx_ite15=cx_ite15.next;while(cx_ite15!=null){var w3=cx_ite15;area1+=v3.x*(w3.y-u3.y);var cf3=w3.y*v3.x-w3.x*v3.y;_this16.localCOMx+=(v3.x+w3.x)*cf3;_this16.localCOMy+=(v3.y+w3.y)*cf3;u3=v3;v3=w3;cx_ite15=cx_ite15.next}cx_ite15=_this16.lverts.next;var w4=cx_ite15;area1+=v3.x*(w4.y-u3.y);var cf4=w4.y*v3.x-w4.x*v3.y;_this16.localCOMx+=(v3.x+w4.x)*cf4;_this16.localCOMy+=(v3.y+w4.y)*cf4;u3=v3;cx_ite15=cx_ite15.next;var w5=cx_ite15;area1+=w4.x*(w5.y-u3.y);var cf5=w5.y*w4.x-w5.x*w4.y;_this16.localCOMx+=(w4.x+w5.x)*cf5;_this16.localCOMy+=(w4.y+w5.y)*cf5;area1=1/(3*area1);var t1=area1;_this16.localCOMx*=t1;_this16.localCOMy*=t1}}if(_this15.wrap_localCOM!=null){_this15.wrap_localCOM.zpp_inner.x=_this15.localCOMx;_this15.wrap_localCOM.zpp_inner.y=_this15.localCOMy}}var _this17=_this15.body;if(_this17.zip_axis){_this17.zip_axis=false;_this17.axisx=Math.sin(_this17.rot);_this17.axisy=Math.cos(_this17.rot)}_this15.worldCOMx=_this15.body.posx+(_this15.body.axisy*_this15.localCOMx-_this15.body.axisx*_this15.localCOMy);_this15.worldCOMy=_this15.body.posy+(_this15.localCOMx*_this15.body.axisx+_this15.localCOMy*_this15.body.axisy)}}var rx1=_this15.radius;var ry1=_this15.radius;_this15.aabb.minx=_this15.worldCOMx-rx1;_this15.aabb.miny=_this15.worldCOMy-ry1;_this15.aabb.maxx=_this15.worldCOMx+rx1;_this15.aabb.maxy=_this15.worldCOMy+ry1}else{var _this18=s3.polygon;if(_this18.zip_gverts){if(_this18.body!=null){_this18.zip_gverts=false;_this18.validate_lverts();var _this19=_this18.body;if(_this19.zip_axis){_this19.zip_axis=false;_this19.axisx=Math.sin(_this19.rot);_this19.axisy=Math.cos(_this19.rot)}var li3=_this18.lverts.next;var cx_ite16=_this18.gverts.next;while(cx_ite16!=null){var g3=cx_ite16;var l3=li3;li3=li3.next;g3.x=_this18.body.posx+(_this18.body.axisy*l3.x-_this18.body.axisx*l3.y);g3.y=_this18.body.posy+(l3.x*_this18.body.axisx+l3.y*_this18.body.axisy);cx_ite16=cx_ite16.next}}}var p01=_this18.gverts.next;_this18.aabb.minx=p01.x;_this18.aabb.miny=p01.y;_this18.aabb.maxx=p01.x;_this18.aabb.maxy=p01.y;var cx_ite17=_this18.gverts.next.next;while(cx_ite17!=null){var p1=cx_ite17;if(p1.x<_this18.aabb.minx){_this18.aabb.minx=p1.x}if(p1.x>_this18.aabb.maxx){_this18.aabb.maxx=p1.x}if(p1.y<_this18.aabb.miny){_this18.aabb.miny=p1.y}if(p1.y>_this18.aabb.maxy){_this18.aabb.maxy=p1.y}cx_ite17=cx_ite17.next}}}}var _this20=cur1.aabb;var x1=s3.aabb;if(x1.minx<_this20.minx){_this20.minx=x1.minx}if(x1.maxx>_this20.maxx){_this20.maxx=x1.maxx}if(x1.miny<_this20.miny){_this20.miny=x1.miny}if(x1.maxy>_this20.maxy){_this20.maxy=x1.maxy}cx_ite14=cx_ite14.next}}cur1.validate_worldCOM()}cur1.validate_gravMass();if(cur1.zip_axis){cur1.zip_axis=false;cur1.axisx=Math.sin(cur1.rot);cur1.axisy=Math.cos(cur1.rot)}var cx_ite18=cur1.shapes.head;while(cx_ite18!=null){this.bphase.sync(cx_ite18.elt);cx_ite18=cx_ite18.next}cx_ite10=cx_ite10.next}var cx_ite19=this.live_constraints.head;while(cx_ite19!=null){var con=cx_ite19.elt;if(con.active){if(con.component.woken&&con.cbSet!=null){var cx_ite20=con.cbSet.conlisteners.head;while(cx_ite20!=null){var i1=cx_ite20.elt;if(i1.event!=2){cx_ite20=cx_ite20.next;continue}var cb1=this.push_callback(i1);cb1.event=2;cb1.constraint=con;cx_ite20=cx_ite20.next}}con.component.woken=false}cx_ite19=cx_ite19.next}},updateVel:function(dt){var linDrag=1-dt*this.global_lin_drag;var angDrag=1-dt*this.global_ang_drag;var cx_ite=this.live.head;while(cx_ite!=null){var cur=cx_ite.elt;if(cur.smass!=0){var time=dt*cur.imass;cur.velx=linDrag*cur.velx+(cur.forcex+this.gravityx*cur.gravMass)*time;cur.vely=linDrag*cur.vely+(cur.forcey+this.gravityy*cur.gravMass)*time}if(cur.sinertia!=0){var dpx=0;var dpy=0;dpx=cur.worldCOMx-cur.posx;dpy=cur.worldCOMy-cur.posy;cur.angvel=angDrag*cur.angvel+(cur.torque+(this.gravityy*dpx-this.gravityx*dpy)*cur.gravMass)*dt*cur.iinertia}cx_ite=cx_ite.next}},updatePos:function(dt){var MAX_VEL=2*Math.PI/dt;var cx_ite=this.live.head;while(cx_ite!=null){var cur=cx_ite.elt;cur.pre_posx=cur.posx;cur.pre_posy=cur.posy;cur.pre_rot=cur.rot;cur.sweepTime=0;cur.sweep_angvel=cur.angvel%MAX_VEL;var delta=dt-cur.sweepTime;if(delta!=0){cur.sweepTime=dt;cur.posx+=cur.velx*delta;cur.posy+=cur.vely*delta;if(cur.angvel!=0){var dr=cur.sweep_angvel*delta;cur.rot+=dr;if(dr*dr>1e-4){cur.axisx=Math.sin(cur.rot);cur.axisy=Math.cos(cur.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*cur.axisx+dr*cur.axisy)*m;cur.axisy=(p*cur.axisy-dr*cur.axisx)*m;cur.axisx=nx}}}if(!cur.disableCCD){var linThreshold=nape_Config.staticCCDLinearThreshold*cur.sweepRadius;var angThreshold=nape_Config.staticCCDAngularThreshold;if((cur.velx*cur.velx+cur.vely*cur.vely)*dt*dt>linThreshold*linThreshold||cur.angvel*cur.angvel*dt*dt>angThreshold*angThreshold||cur.type==3){var angvel=cur.sweep_angvel;if(angvel<0){angvel=-angvel}var iangvel=1/angvel;var cx_ite1=cur.shapes.head;while(cx_ite1!=null){var s=cx_ite1.elt;var aabb=s.aabb;var minx=aabb.minx;var miny=aabb.miny;var maxx=aabb.maxx;var maxy=aabb.maxy;var count=angvel*dt*s.sweepCoef*.008333333333333333|0;if(count>8){count=8}var anginc=angvel*dt/count;var delta1=dt-cur.sweepTime;if(delta1!=0){cur.sweepTime=dt;cur.posx+=cur.velx*delta1;cur.posy+=cur.vely*delta1;if(cur.angvel!=0){var dr1=cur.sweep_angvel*delta1;cur.rot+=dr1;if(dr1*dr1>1e-4){cur.axisx=Math.sin(cur.rot);cur.axisy=Math.cos(cur.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p1*cur.axisx+dr1*cur.axisy)*m1;cur.axisy=(p1*cur.axisy-dr1*cur.axisx)*m1;cur.axisx=nx1}}}if(s.type==0){var _this=s.circle;_this.worldCOMx=_this.body.posx+(_this.body.axisy*_this.localCOMx-_this.body.axisx*_this.localCOMy);_this.worldCOMy=_this.body.posy+(_this.localCOMx*_this.body.axisx+_this.localCOMy*_this.body.axisy);_this.aabb.minx=_this.worldCOMx-_this.radius;_this.aabb.miny=_this.worldCOMy-_this.radius;_this.aabb.maxx=_this.worldCOMx+_this.radius;_this.aabb.maxy=_this.worldCOMy+_this.radius}else{var _this1=s.polygon;var li=_this1.lverts.next;var p0=_this1.gverts.next;var l=li;li=li.next;p0.x=_this1.body.posx+(_this1.body.axisy*l.x-_this1.body.axisx*l.y);p0.y=_this1.body.posy+(l.x*_this1.body.axisx+l.y*_this1.body.axisy);_this1.aabb.minx=p0.x;_this1.aabb.miny=p0.y;_this1.aabb.maxx=p0.x;_this1.aabb.maxy=p0.y;var cx_ite2=_this1.gverts.next.next;while(cx_ite2!=null){var p2=cx_ite2;var l1=li;li=li.next;p2.x=_this1.body.posx+(_this1.body.axisy*l1.x-_this1.body.axisx*l1.y);p2.y=_this1.body.posy+(l1.x*_this1.body.axisx+l1.y*_this1.body.axisy);if(p2.x<_this1.aabb.minx){_this1.aabb.minx=p2.x}if(p2.x>_this1.aabb.maxx){_this1.aabb.maxx=p2.x}if(p2.y<_this1.aabb.miny){_this1.aabb.miny=p2.y}if(p2.y>_this1.aabb.maxy){_this1.aabb.maxy=p2.y}cx_ite2=cx_ite2.next}}if(minx<aabb.minx){aabb.minx=minx}else{minx=aabb.minx}if(miny<aabb.miny){aabb.miny=miny}else{miny=aabb.miny}if(maxx>aabb.maxx){aabb.maxx=maxx}else{maxx=aabb.maxx}if(maxy>aabb.maxy){aabb.maxy=maxy}else{maxy=aabb.maxy}var _g=1;var _g1=count;while(_g<_g1){var dt1=anginc*_g++*iangvel;var delta2=dt1-cur.sweepTime;if(delta2!=0){cur.sweepTime=dt1;cur.posx+=cur.velx*delta2;cur.posy+=cur.vely*delta2;if(cur.angvel!=0){var dr2=cur.sweep_angvel*delta2;cur.rot+=dr2;if(dr2*dr2>1e-4){cur.axisx=Math.sin(cur.rot);cur.axisy=Math.cos(cur.rot)}else{var d22=dr2*dr2;var p3=1-.5*d22;var m2=1-d22*d22/8;var nx2=(p3*cur.axisx+dr2*cur.axisy)*m2;cur.axisy=(p3*cur.axisy-dr2*cur.axisx)*m2;cur.axisx=nx2}}}if(s.type==0){var _this2=s.circle;_this2.worldCOMx=_this2.body.posx+(_this2.body.axisy*_this2.localCOMx-_this2.body.axisx*_this2.localCOMy);_this2.worldCOMy=_this2.body.posy+(_this2.localCOMx*_this2.body.axisx+_this2.localCOMy*_this2.body.axisy);_this2.aabb.minx=_this2.worldCOMx-_this2.radius;_this2.aabb.miny=_this2.worldCOMy-_this2.radius;_this2.aabb.maxx=_this2.worldCOMx+_this2.radius;_this2.aabb.maxy=_this2.worldCOMy+_this2.radius}else{var _this3=s.polygon;var li1=_this3.lverts.next;var p01=_this3.gverts.next;var l2=li1;li1=li1.next;p01.x=_this3.body.posx+(_this3.body.axisy*l2.x-_this3.body.axisx*l2.y);p01.y=_this3.body.posy+(l2.x*_this3.body.axisx+l2.y*_this3.body.axisy);_this3.aabb.minx=p01.x;_this3.aabb.miny=p01.y;_this3.aabb.maxx=p01.x;_this3.aabb.maxy=p01.y;var cx_ite3=_this3.gverts.next.next;while(cx_ite3!=null){var p4=cx_ite3;var l3=li1;li1=li1.next;p4.x=_this3.body.posx+(_this3.body.axisy*l3.x-_this3.body.axisx*l3.y);p4.y=_this3.body.posy+(l3.x*_this3.body.axisx+l3.y*_this3.body.axisy);if(p4.x<_this3.aabb.minx){_this3.aabb.minx=p4.x}if(p4.x>_this3.aabb.maxx){_this3.aabb.maxx=p4.x}if(p4.y<_this3.aabb.miny){_this3.aabb.miny=p4.y}if(p4.y>_this3.aabb.maxy){_this3.aabb.maxy=p4.y}cx_ite3=cx_ite3.next}}if(minx<aabb.minx){aabb.minx=minx}else{minx=aabb.minx}if(miny<aabb.miny){aabb.miny=miny}else{miny=aabb.miny}if(maxx>aabb.maxx){aabb.maxx=maxx}else{maxx=aabb.maxx}if(maxy>aabb.maxy){aabb.maxy=maxy}else{maxy=aabb.maxy}}this.bphase.sync(s);cx_ite1=cx_ite1.next}cur.sweepFrozen=false;if(cur.type==2&&cur.bulletEnabled){var linThreshold2=nape_Config.bulletCCDLinearThreshold*cur.sweepRadius;var angThreshold2=nape_Config.bulletCCDAngularThreshold;if((cur.velx*cur.velx+cur.vely*cur.vely)*dt*dt>linThreshold2*linThreshold2||cur.angvel*cur.angvel*dt*dt>angThreshold2*angThreshold2){cur.bullet=true}}}else{cur.sweepFrozen=true;cur.bullet=false}}else{cur.sweepFrozen=true;cur.bullet=false}cx_ite=cx_ite.next}var cx_ite4=this.kinematics.head;while(cx_ite4!=null){var cur1=cx_ite4.elt;cur1.pre_posx=cur1.posx;cur1.pre_posy=cur1.posy;cur1.pre_rot=cur1.rot;cur1.sweepTime=0;cur1.sweep_angvel=cur1.angvel%MAX_VEL;var delta3=dt-cur1.sweepTime;if(delta3!=0){cur1.sweepTime=dt;cur1.posx+=cur1.velx*delta3;cur1.posy+=cur1.vely*delta3;if(cur1.angvel!=0){var dr3=cur1.sweep_angvel*delta3;cur1.rot+=dr3;if(dr3*dr3>1e-4){cur1.axisx=Math.sin(cur1.rot);cur1.axisy=Math.cos(cur1.rot)}else{var d23=dr3*dr3;var p5=1-.5*d23;var m3=1-d23*d23/8;var nx3=(p5*cur1.axisx+dr3*cur1.axisy)*m3;cur1.axisy=(p5*cur1.axisy-dr3*cur1.axisx)*m3;cur1.axisx=nx3}}}if(!cur1.disableCCD){var linThreshold1=nape_Config.staticCCDLinearThreshold*cur1.sweepRadius;var angThreshold1=nape_Config.staticCCDAngularThreshold;if((cur1.velx*cur1.velx+cur1.vely*cur1.vely)*dt*dt>linThreshold1*linThreshold1||cur1.angvel*cur1.angvel*dt*dt>angThreshold1*angThreshold1||cur1.type==3){var angvel1=cur1.sweep_angvel;if(angvel1<0){angvel1=-angvel1}var iangvel1=1/angvel1;var cx_ite5=cur1.shapes.head;while(cx_ite5!=null){var s1=cx_ite5.elt;var aabb1=s1.aabb;var minx1=aabb1.minx;var miny1=aabb1.miny;var maxx1=aabb1.maxx;var maxy1=aabb1.maxy;var count1=angvel1*dt*s1.sweepCoef*.008333333333333333|0;if(count1>8){count1=8}var anginc1=angvel1*dt/count1;var delta4=dt-cur1.sweepTime;if(delta4!=0){cur1.sweepTime=dt;cur1.posx+=cur1.velx*delta4;cur1.posy+=cur1.vely*delta4;if(cur1.angvel!=0){var dr4=cur1.sweep_angvel*delta4;cur1.rot+=dr4;if(dr4*dr4>1e-4){cur1.axisx=Math.sin(cur1.rot);cur1.axisy=Math.cos(cur1.rot)}else{var d24=dr4*dr4;var p6=1-.5*d24;var m4=1-d24*d24/8;var nx4=(p6*cur1.axisx+dr4*cur1.axisy)*m4;cur1.axisy=(p6*cur1.axisy-dr4*cur1.axisx)*m4;cur1.axisx=nx4}}}if(s1.type==0){var _this4=s1.circle;_this4.worldCOMx=_this4.body.posx+(_this4.body.axisy*_this4.localCOMx-_this4.body.axisx*_this4.localCOMy);_this4.worldCOMy=_this4.body.posy+(_this4.localCOMx*_this4.body.axisx+_this4.localCOMy*_this4.body.axisy);_this4.aabb.minx=_this4.worldCOMx-_this4.radius;_this4.aabb.miny=_this4.worldCOMy-_this4.radius;_this4.aabb.maxx=_this4.worldCOMx+_this4.radius;_this4.aabb.maxy=_this4.worldCOMy+_this4.radius}else{var _this5=s1.polygon;var li2=_this5.lverts.next;var p02=_this5.gverts.next;var l4=li2;li2=li2.next;p02.x=_this5.body.posx+(_this5.body.axisy*l4.x-_this5.body.axisx*l4.y);p02.y=_this5.body.posy+(l4.x*_this5.body.axisx+l4.y*_this5.body.axisy);_this5.aabb.minx=p02.x;_this5.aabb.miny=p02.y;_this5.aabb.maxx=p02.x;_this5.aabb.maxy=p02.y;var cx_ite6=_this5.gverts.next.next;while(cx_ite6!=null){var p7=cx_ite6;var l5=li2;li2=li2.next;p7.x=_this5.body.posx+(_this5.body.axisy*l5.x-_this5.body.axisx*l5.y);p7.y=_this5.body.posy+(l5.x*_this5.body.axisx+l5.y*_this5.body.axisy);if(p7.x<_this5.aabb.minx){_this5.aabb.minx=p7.x}if(p7.x>_this5.aabb.maxx){_this5.aabb.maxx=p7.x}if(p7.y<_this5.aabb.miny){_this5.aabb.miny=p7.y}if(p7.y>_this5.aabb.maxy){_this5.aabb.maxy=p7.y}cx_ite6=cx_ite6.next}}if(minx1<aabb1.minx){aabb1.minx=minx1}else{minx1=aabb1.minx}if(miny1<aabb1.miny){aabb1.miny=miny1}else{miny1=aabb1.miny}if(maxx1>aabb1.maxx){aabb1.maxx=maxx1}else{maxx1=aabb1.maxx}if(maxy1>aabb1.maxy){aabb1.maxy=maxy1}else{maxy1=aabb1.maxy}var _g2=1;var _g11=count1;while(_g2<_g11){var dt2=anginc1*_g2++*iangvel1;var delta5=dt2-cur1.sweepTime;if(delta5!=0){cur1.sweepTime=dt2;cur1.posx+=cur1.velx*delta5;cur1.posy+=cur1.vely*delta5;if(cur1.angvel!=0){var dr5=cur1.sweep_angvel*delta5;cur1.rot+=dr5;if(dr5*dr5>1e-4){cur1.axisx=Math.sin(cur1.rot);cur1.axisy=Math.cos(cur1.rot)}else{var d25=dr5*dr5;var p8=1-.5*d25;var m5=1-d25*d25/8;var nx5=(p8*cur1.axisx+dr5*cur1.axisy)*m5;cur1.axisy=(p8*cur1.axisy-dr5*cur1.axisx)*m5;cur1.axisx=nx5}}}if(s1.type==0){var _this6=s1.circle;_this6.worldCOMx=_this6.body.posx+(_this6.body.axisy*_this6.localCOMx-_this6.body.axisx*_this6.localCOMy);_this6.worldCOMy=_this6.body.posy+(_this6.localCOMx*_this6.body.axisx+_this6.localCOMy*_this6.body.axisy);_this6.aabb.minx=_this6.worldCOMx-_this6.radius;_this6.aabb.miny=_this6.worldCOMy-_this6.radius;_this6.aabb.maxx=_this6.worldCOMx+_this6.radius;_this6.aabb.maxy=_this6.worldCOMy+_this6.radius}else{var _this7=s1.polygon;var li3=_this7.lverts.next;var p03=_this7.gverts.next;var l6=li3;li3=li3.next;p03.x=_this7.body.posx+(_this7.body.axisy*l6.x-_this7.body.axisx*l6.y);p03.y=_this7.body.posy+(l6.x*_this7.body.axisx+l6.y*_this7.body.axisy);_this7.aabb.minx=p03.x;_this7.aabb.miny=p03.y;_this7.aabb.maxx=p03.x;_this7.aabb.maxy=p03.y;var cx_ite7=_this7.gverts.next.next;while(cx_ite7!=null){var p9=cx_ite7;var l7=li3;li3=li3.next;p9.x=_this7.body.posx+(_this7.body.axisy*l7.x-_this7.body.axisx*l7.y);p9.y=_this7.body.posy+(l7.x*_this7.body.axisx+l7.y*_this7.body.axisy);if(p9.x<_this7.aabb.minx){_this7.aabb.minx=p9.x}if(p9.x>_this7.aabb.maxx){_this7.aabb.maxx=p9.x}if(p9.y<_this7.aabb.miny){_this7.aabb.miny=p9.y}if(p9.y>_this7.aabb.maxy){_this7.aabb.maxy=p9.y}cx_ite7=cx_ite7.next}}if(minx1<aabb1.minx){aabb1.minx=minx1}else{minx1=aabb1.minx}if(miny1<aabb1.miny){aabb1.miny=miny1}else{miny1=aabb1.miny}if(maxx1>aabb1.maxx){aabb1.maxx=maxx1}else{maxx1=aabb1.maxx}if(maxy1>aabb1.maxy){aabb1.maxy=maxy1}else{maxy1=aabb1.maxy}}this.bphase.sync(s1);cx_ite5=cx_ite5.next}cur1.sweepFrozen=false;if(cur1.type==2&&cur1.bulletEnabled){var linThreshold21=nape_Config.bulletCCDLinearThreshold*cur1.sweepRadius;var angThreshold21=nape_Config.bulletCCDAngularThreshold;if((cur1.velx*cur1.velx+cur1.vely*cur1.vely)*dt*dt>linThreshold21*linThreshold21||cur1.angvel*cur1.angvel*dt*dt>angThreshold21*angThreshold21){cur1.bullet=true}}}else{cur1.sweepFrozen=true;cur1.bullet=false}}else{cur1.sweepFrozen=true;cur1.bullet=false}cx_ite4=cx_ite4.next}},continuous:null,presteparb:function(arb,dt,cont){if(cont==null){cont=false}var _gthis=this;if(!arb.cleared&&(arb.b1.component.sleeping&&arb.b2.component.sleeping)){arb.sleep_stamp=this.stamp;arb.sleeping=true;return true}if(!arb.cleared||arb.present!=0||arb.intchange){var endcb=!cont&&arb.up_stamp==this.stamp-1&&!arb.cleared&&!arb.intchange;var begcb=arb.fresh&&!arb.cleared&&!arb.intchange;if(endcb){arb.endGenerated=this.stamp}if(begcb||endcb||arb.cleared||arb.intchange){var s1=arb.ws1;var s2=arb.ws2;var _this=this.mrca1;while(_this.head!=null){var ret=_this.head;_this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret;if(_this.head==null){_this.pushmod=true}_this.modified=true;_this.length--}_this.pushmod=true;var _this1=this.mrca2;while(_this1.head!=null){var ret1=_this1.head;_this1.head=ret1.next;ret1.elt=null;ret1.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret1;if(_this1.head==null){_this1.pushmod=true}_this1.modified=true;_this1.length--}_this1.pushmod=true;if(s1.cbSet!=null){var _this2=this.mrca1;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret2.next;ret2.next=null}ret2.elt=s1;var temp=ret2;temp.next=_this2.head;_this2.head=temp;_this2.modified=true;_this2.length++}if(s1.body.cbSet!=null){var _this3=this.mrca1;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret3.next;ret3.next=null}ret3.elt=s1.body;var temp1=ret3;temp1.next=_this3.head;_this3.head=temp1;_this3.modified=true;_this3.length++}if(s2.cbSet!=null){var _this4=this.mrca2;var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret4.next;ret4.next=null}ret4.elt=s2;var temp2=ret4;temp2.next=_this4.head;_this4.head=temp2;_this4.modified=true;_this4.length++}if(s2.body.cbSet!=null){var _this5=this.mrca2;var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret5.next;ret5.next=null}ret5.elt=s2.body;var temp3=ret5;temp3.next=_this5.head;_this5.head=temp3;_this5.modified=true;_this5.length++}var c1=s1.body.compound;var c2=s2.body.compound;while(c1!=c2)if((c1==null?0:c1.depth)<(c2==null?0:c2.depth)){if(c2.cbSet!=null){var _this6=this.mrca2;var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret6.next;ret6.next=null}ret6.elt=c2;var temp4=ret6;temp4.next=_this6.head;_this6.head=temp4;_this6.modified=true;_this6.length++}c2=c2.compound}else{if(c1.cbSet!=null){var _this7=this.mrca1;var ret7;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret7=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret7=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret7.next;ret7.next=null}ret7.elt=c1;var temp5=ret7;temp5.next=_this7.head;_this7.head=temp5;_this7.modified=true;_this7.length++}c1=c1.compound}var cx_ite=this.mrca1.head;while(cx_ite!=null){var i1=cx_ite.elt;var cx_ite1=this.mrca2.head;while(cx_ite1!=null){var i2=cx_ite1.elt;var cb1=i1.cbSet;var cb2=i2.cbSet;var ret8=null;var cx_ite2=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite2!=null){var p=cx_ite2.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret8=p;break}cx_ite2=cx_ite2.next}if(ret8==null){var ret9;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret9=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret9=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret9.next;ret9.next=null}ret9.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret9.a=cb1;ret9.b=cb2}else{ret9.a=cb2;ret9.b=cb1}ret8=ret9;cb1.cbpairs.add(ret8);if(cb2!=cb1){cb2.cbpairs.add(ret8)}}if(ret8.zip_listeners){ret8.zip_listeners=false;ret8.__validate()}if(ret8.listeners.head==null){cx_ite1=cx_ite1.next;continue}var callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(begcb||arb.intchange){if(callbackset==null){callbackset=zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);this.add_callbackset(callbackset)}var ret10=null;var cx_ite3=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite3!=null){var p1=cx_ite3.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret10=p1;break}cx_ite3=cx_ite3.next}if(ret10==null){var ret11;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret11=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret11=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret11.next;ret11.next=null}ret11.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret11.a=cb1;ret11.b=cb2}else{ret11.a=cb2;ret11.b=cb1}ret10=ret11;cb1.cbpairs.add(ret10);if(cb2!=cb1){cb2.cbpairs.add(ret10)}}if(ret10.zip_listeners){ret10.zip_listeners=false;ret10.__validate()}var cx_ite4=ret10.listeners.head;while(cx_ite4!=null){var x=cx_ite4.elt;if(x.event==0){if((x.itype&arb.type)!=0&&callbackset.empty_arb(x.itype)){var cb=_gthis.push_callback(x);cb.event=0;var o1=callbackset.int1;var o2=callbackset.int2;var tmp;var _this8=x.options1;var xs=o1.cbTypes;if(_this8.nonemptyintersection(xs,_this8.includes)&&!_this8.nonemptyintersection(xs,_this8.excludes)){var _this9=x.options2;var xs1=o2.cbTypes;tmp=_this9.nonemptyintersection(xs1,_this9.includes)&&!_this9.nonemptyintersection(xs1,_this9.excludes)}else{tmp=false}if(tmp){cb.int1=o1;cb.int2=o2}else{cb.int1=o2;cb.int2=o1}cb.set=callbackset}}cx_ite4=cx_ite4.next}var tmp1;var ret12;ret12=false;var cx_ite5=callbackset.arbiters.head;while(cx_ite5!=null){if(cx_ite5.elt==arb){ret12=true;break}cx_ite5=cx_ite5.next}if(!ret12){var _this10=callbackset.arbiters;var ret13;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret13=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret13=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret13.next;ret13.next=null}ret13.elt=arb;var temp6=ret13;temp6.next=_this10.head;_this10.head=temp6;_this10.modified=true;_this10.length++;tmp1=true}else{tmp1=false}if(tmp1){arb.present++}}else{arb.present--;callbackset.remove_arb(arb);var ret14=null;var cx_ite6=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite6!=null){var p2=cx_ite6.elt;if(p2.a==cb1&&p2.b==cb2||p2.a==cb2&&p2.b==cb1){ret14=p2;break}cx_ite6=cx_ite6.next}if(ret14==null){var ret15;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret15=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret15=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret15.next;ret15.next=null}ret15.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret15.a=cb1;ret15.b=cb2}else{ret15.a=cb2;ret15.b=cb1}ret14=ret15;cb1.cbpairs.add(ret14);if(cb2!=cb1){cb2.cbpairs.add(ret14)}}if(ret14.zip_listeners){ret14.zip_listeners=false;ret14.__validate()}var cx_ite7=ret14.listeners.head;while(cx_ite7!=null){var x1=cx_ite7.elt;if(x1.event==1){if((x1.itype&arb.type)!=0&&callbackset.empty_arb(x1.itype)){var cb3=_gthis.push_callback(x1);cb3.event=1;var o11=callbackset.int1;var o21=callbackset.int2;var tmp2;var _this11=x1.options1;var xs2=o11.cbTypes;if(_this11.nonemptyintersection(xs2,_this11.includes)&&!_this11.nonemptyintersection(xs2,_this11.excludes)){var _this12=x1.options2;var xs3=o21.cbTypes;tmp2=_this12.nonemptyintersection(xs3,_this12.includes)&&!_this12.nonemptyintersection(xs3,_this12.excludes)}else{tmp2=false}if(tmp2){cb3.int1=o11;cb3.int2=o21}else{cb3.int1=o21;cb3.int2=o11}cb3.set=callbackset}}cx_ite7=cx_ite7.next}if(callbackset.arbiters.head==null){this.remove_callbackset(callbackset)}}cx_ite1=cx_ite1.next}cx_ite=cx_ite.next}}arb.fresh=false;arb.intchange=false}if(arb.cleared||arb.up_stamp+(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.COL?nape_Config.arbiterExpirationDelay:0)<this.stamp){if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR){var _this13=arb.sensorarb;if(!_this13.cleared){var _this14=_this13.b1.arbiters;var pre=null;var cur=_this14.head;while(cur!=null){if(cur.elt==_this13){var old;var ret16;if(pre==null){old=_this14.head;ret16=old.next;_this14.head=ret16;if(_this14.head==null){_this14.pushmod=true}}else{old=pre.next;ret16=old.next;pre.next=ret16;if(ret16==null){_this14.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;_this14.modified=true;_this14.length--;_this14.pushmod=true;break}pre=cur;cur=cur.next}var _this15=_this13.b2.arbiters;var pre1=null;var cur1=_this15.head;while(cur1!=null){if(cur1.elt==_this13){var old1;var ret17;if(pre1==null){old1=_this15.head;ret17=old1.next;_this15.head=ret17;if(_this15.head==null){_this15.pushmod=true}}else{old1=pre1.next;ret17=old1.next;pre1.next=ret17;if(ret17==null){_this15.pushmod=true}}var o3=old1;o3.elt=null;o3.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o3;_this15.modified=true;_this15.length--;_this15.pushmod=true;break}pre1=cur1;cur1=cur1.next}if(_this13.pair!=null){_this13.pair.arb=null;_this13.pair=null}}_this13.b1=_this13.b2=null;_this13.active=false;_this13.intchange=false;_this13.next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=_this13}else if(arb.type==zpp_$nape_dynamics_ZPP_$Arbiter.FLUID){var _this16=arb.fluidarb;if(!_this16.cleared){var _this17=_this16.b1.arbiters;var pre2=null;var cur2=_this17.head;while(cur2!=null){if(cur2.elt==_this16){var old2;var ret18;if(pre2==null){old2=_this17.head;ret18=old2.next;_this17.head=ret18;if(_this17.head==null){_this17.pushmod=true}}else{old2=pre2.next;ret18=old2.next;pre2.next=ret18;if(ret18==null){_this17.pushmod=true}}var o4=old2;o4.elt=null;o4.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o4;_this17.modified=true;_this17.length--;_this17.pushmod=true;break}pre2=cur2;cur2=cur2.next}var _this18=_this16.b2.arbiters;var pre3=null;var cur3=_this18.head;while(cur3!=null){if(cur3.elt==_this16){var old3;var ret19;if(pre3==null){old3=_this18.head;ret19=old3.next;_this18.head=ret19;if(_this18.head==null){_this18.pushmod=true}}else{old3=pre3.next;ret19=old3.next;pre3.next=ret19;if(ret19==null){_this18.pushmod=true}}var o5=old3;o5.elt=null;o5.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o5;_this18.modified=true;_this18.length--;_this18.pushmod=true;break}pre3=cur3;cur3=cur3.next}if(_this16.pair!=null){_this16.pair.arb=null;_this16.pair=null}}_this16.b1=_this16.b2=null;_this16.active=false;_this16.intchange=false;_this16.next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=_this16;_this16.pre_dt=-1}else{var _this19=arb.colarb;if(!_this19.cleared){var _this20=_this19.b1.arbiters;var pre4=null;var cur4=_this20.head;while(cur4!=null){if(cur4.elt==_this19){var old4;var ret20;if(pre4==null){old4=_this20.head;ret20=old4.next;_this20.head=ret20;if(_this20.head==null){_this20.pushmod=true}}else{old4=pre4.next;ret20=old4.next;pre4.next=ret20;if(ret20==null){_this20.pushmod=true}}var o6=old4;o6.elt=null;o6.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o6;_this20.modified=true;_this20.length--;_this20.pushmod=true;break}pre4=cur4;cur4=cur4.next}var _this21=_this19.b2.arbiters;var pre5=null;var cur5=_this21.head;while(cur5!=null){if(cur5.elt==_this19){var old5;var ret21;if(pre5==null){old5=_this21.head;ret21=old5.next;_this21.head=ret21;if(_this21.head==null){_this21.pushmod=true}}else{old5=pre5.next;ret21=old5.next;pre5.next=ret21;if(ret21==null){_this21.pushmod=true}}var o7=old5;o7.elt=null;o7.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o7;_this21.modified=true;_this21.length--;_this21.pushmod=true;break}pre5=cur5;cur5=cur5.next}if(_this19.pair!=null){_this19.pair.arb=null;_this19.pair=null}}_this19.b1=_this19.b2=null;_this19.active=false;_this19.intchange=false;while(_this19.contacts.next!=null){var _this22=_this19.contacts;var ret22=_this22.next;_this22.pop();ret22.arbiter=null;ret22.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=ret22;var _this23=_this19.innards;var ret23=_this23.next;_this23.next=ret23.next;ret23._inuse=false;if(_this23.next==null){_this23.pushmod=true}_this23.modified=true;_this23.length--}_this19.userdef_dyn_fric=false;_this19.userdef_stat_fric=false;_this19.userdef_restitution=false;_this19.userdef_rfric=false;_this19.__ref_edge1=_this19.__ref_edge2=null;_this19.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=_this19;_this19.pre_dt=-1}return true}var pact=arb.active;arb.active=arb.presentable=arb.up_stamp==this.stamp;if((arb.immState&1)!=0){if(arb.active&&arb.type!=zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR){if(arb.colarb!=null){var _this24=arb.colarb;if(_this24.invalidated){_this24.invalidated=false;if(!_this24.userdef_restitution){if(_this24.s1.material.elasticity<=-Infinity||_this24.s2.material.elasticity<=-Infinity){_this24.restitution=0}else if(_this24.s1.material.elasticity>=Infinity||_this24.s2.material.elasticity>=Infinity){_this24.restitution=1}else{_this24.restitution=(_this24.s1.material.elasticity+_this24.s2.material.elasticity)/2}if(_this24.restitution<0){_this24.restitution=0}if(_this24.restitution>1){_this24.restitution=1}}if(!_this24.userdef_dyn_fric){_this24.dyn_fric=Math.sqrt(_this24.s1.material.dynamicFriction*_this24.s2.material.dynamicFriction)}if(!_this24.userdef_stat_fric){_this24.stat_fric=Math.sqrt(_this24.s1.material.staticFriction*_this24.s2.material.staticFriction)}if(!_this24.userdef_rfric){_this24.rfric=Math.sqrt(_this24.s1.material.rollingFriction*_this24.s2.material.rollingFriction)}}if(_this24.pre_dt==-1){_this24.pre_dt=dt}var dtratio=dt/_this24.pre_dt;_this24.pre_dt=dt;var mass_sum=_this24.b1.smass+_this24.b2.smass;_this24.hc2=false;var fst=true;_this24.biasCoef=_this24.b1.type!=2||_this24.b2.type!=2?_this24.continuous?nape_Config.contactContinuousStaticBiasCoef:nape_Config.contactStaticBiasCoef:_this24.continuous?nape_Config.contactContinuousBiasCoef:nape_Config.contactBiasCoef;_this24.continuous=false;var pre6=null;var prei=null;var cx_itei=_this24.innards.next;var cx_ite8=_this24.contacts.next;while(cx_ite8!=null){var c=cx_ite8;if(c.stamp+nape_Config.arbiterExpirationDelay<_this24.stamp){var _this25=_this24.contacts;var old6;var ret24;if(pre6==null){old6=_this25.next;ret24=old6.next;_this25.next=ret24;if(_this25.next==null){_this25.pushmod=true}}else{old6=pre6.next;ret24=old6.next;pre6.next=ret24;if(ret24==null){_this25.pushmod=true}}old6._inuse=false;_this25.modified=true;_this25.length--;_this25.pushmod=true;cx_ite8=ret24;var _this26=_this24.innards;var old7;var ret25;if(prei==null){old7=_this26.next;ret25=old7.next;_this26.next=ret25;if(_this26.next==null){_this26.pushmod=true}}else{old7=prei.next;ret25=old7.next;prei.next=ret25;if(ret25==null){_this26.pushmod=true}}old7._inuse=false;_this26.modified=true;_this26.length--;_this26.pushmod=true;cx_itei=ret25;c.arbiter=null;c.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c;continue}var ci=c.inner;var pact1=c.active;c.active=c.stamp==_this24.stamp;if(c.active){if(fst){fst=false;_this24.c1=ci;_this24.oc1=c}else{_this24.hc2=true;_this24.c2=ci;_this24.oc2=c}ci.r2x=c.px-_this24.b2.posx;ci.r2y=c.py-_this24.b2.posy;ci.r1x=c.px-_this24.b1.posx;ci.r1y=c.py-_this24.b1.posy;var x2=ci.r2x*_this24.nx+ci.r2y*_this24.ny;var kt=mass_sum+_this24.b2.sinertia*(x2*x2);var x3=ci.r1x*_this24.nx+ci.r1y*_this24.ny;kt+=_this24.b1.sinertia*(x3*x3);ci.tMass=kt<nape_Config.epsilon*nape_Config.epsilon?0:1/kt;var x4=_this24.ny*ci.r2x-_this24.nx*ci.r2y;var nt=mass_sum+_this24.b2.sinertia*(x4*x4);var x5=_this24.ny*ci.r1x-_this24.nx*ci.r1y;nt+=_this24.b1.sinertia*(x5*x5);ci.nMass=nt<nape_Config.epsilon*nape_Config.epsilon?0:1/nt;var vrx=0;var vry=0;var ang=_this24.b2.angvel+_this24.b2.kinangvel;vrx=_this24.b2.velx+_this24.b2.kinvelx-ci.r2y*ang;vry=_this24.b2.vely+_this24.b2.kinvely+ci.r2x*ang;ang=_this24.b1.angvel+_this24.b1.kinangvel;vrx-=_this24.b1.velx+_this24.b1.kinvelx-ci.r1y*ang;vry-=_this24.b1.vely+_this24.b1.kinvely+ci.r1x*ang;var vdot=_this24.nx*vrx+_this24.ny*vry;c.elasticity=_this24.restitution;ci.bounce=vdot*c.elasticity;if(ci.bounce>-nape_Config.elasticThreshold){ci.bounce=0}vdot=vry*_this24.nx-vrx*_this24.ny;var thr=nape_Config.staticFrictionThreshold;if(vdot*vdot>thr*thr){ci.friction=_this24.dyn_fric}else{ci.friction=_this24.stat_fric}ci.jnAcc*=dtratio;ci.jtAcc*=dtratio}if(pact1!=c.active){_this24.contacts.modified=true}pre6=cx_ite8;prei=cx_itei;cx_itei=cx_itei.next;cx_ite8=cx_ite8.next}if(_this24.hc2){_this24.hpc2=true;if(_this24.oc1.posOnly){var tmp3=_this24.c1;_this24.c1=_this24.c2;_this24.c2=tmp3;var tmp21=_this24.oc1;_this24.oc1=_this24.oc2;_this24.oc2=tmp21;_this24.hc2=false}else if(_this24.oc2.posOnly){_this24.hc2=false}if(_this24.oc1.posOnly){fst=true}}else{_this24.hpc2=false}_this24.jrAcc*=dtratio;if(!fst){_this24.rn1a=_this24.ny*_this24.c1.r1x-_this24.nx*_this24.c1.r1y;_this24.rt1a=_this24.c1.r1x*_this24.nx+_this24.c1.r1y*_this24.ny;_this24.rn1b=_this24.ny*_this24.c1.r2x-_this24.nx*_this24.c1.r2y;_this24.rt1b=_this24.c1.r2x*_this24.nx+_this24.c1.r2y*_this24.ny;_this24.k1x=_this24.b2.kinvelx-_this24.c1.r2y*_this24.b2.kinangvel-(_this24.b1.kinvelx-_this24.c1.r1y*_this24.b1.kinangvel);_this24.k1y=_this24.b2.kinvely+_this24.c1.r2x*_this24.b2.kinangvel-(_this24.b1.kinvely+_this24.c1.r1x*_this24.b1.kinangvel)}if(_this24.hc2){_this24.rn2a=_this24.ny*_this24.c2.r1x-_this24.nx*_this24.c2.r1y;_this24.rt2a=_this24.c2.r1x*_this24.nx+_this24.c2.r1y*_this24.ny;_this24.rn2b=_this24.ny*_this24.c2.r2x-_this24.nx*_this24.c2.r2y;_this24.rt2b=_this24.c2.r2x*_this24.nx+_this24.c2.r2y*_this24.ny;_this24.k2x=_this24.b2.kinvelx-_this24.c2.r2y*_this24.b2.kinangvel-(_this24.b1.kinvelx-_this24.c2.r1y*_this24.b1.kinangvel);_this24.k2y=_this24.b2.kinvely+_this24.c2.r2x*_this24.b2.kinangvel-(_this24.b1.kinvely+_this24.c2.r1x*_this24.b1.kinangvel);_this24.kMassa=mass_sum+_this24.b1.sinertia*_this24.rn1a*_this24.rn1a+_this24.b2.sinertia*_this24.rn1b*_this24.rn1b;_this24.kMassb=mass_sum+_this24.b1.sinertia*_this24.rn1a*_this24.rn2a+_this24.b2.sinertia*_this24.rn1b*_this24.rn2b;_this24.kMassc=mass_sum+_this24.b1.sinertia*_this24.rn2a*_this24.rn2a+_this24.b2.sinertia*_this24.rn2b*_this24.rn2b;if(_this24.kMassa*_this24.kMassa+2*_this24.kMassb*_this24.kMassb+_this24.kMassc*_this24.kMassc<nape_Config.illConditionedThreshold*(_this24.kMassa*_this24.kMassc-_this24.kMassb*_this24.kMassb)){_this24.Ka=_this24.kMassa;_this24.Kb=_this24.kMassb;_this24.Kc=_this24.kMassc;var det=_this24.kMassa*_this24.kMassc-_this24.kMassb*_this24.kMassb;if(det!=det){_this24.kMassa=_this24.kMassb=_this24.kMassc=0}else if(det==0){if(_this24.kMassa!=0){_this24.kMassa=1/_this24.kMassa}else{_this24.kMassa=0}if(_this24.kMassc!=0){_this24.kMassc=1/_this24.kMassc}else{_this24.kMassc=0}_this24.kMassb=0}else{det=1/det;var t=_this24.kMassc*det;_this24.kMassc=_this24.kMassa*det;_this24.kMassa=t;_this24.kMassb*=-det}}else{_this24.hc2=false;if(_this24.oc2.dist<_this24.oc1.dist){var t1=_this24.c1;_this24.c1=_this24.c2;_this24.c2=t1}_this24.oc2.active=false;_this24.contacts.modified=true}}_this24.surfacex=_this24.b2.svelx;_this24.surfacey=_this24.b2.svely;_this24.surfacex+=_this24.b1.svelx;_this24.surfacey+=_this24.b1.svely;_this24.surfacex=-_this24.surfacex;_this24.surfacey=-_this24.surfacey;_this24.rMass=_this24.b1.sinertia+_this24.b2.sinertia;if(_this24.rMass!=0){_this24.rMass=1/_this24.rMass}if(fst){arb.active=false}}else{var _this27=arb.fluidarb;if(_this27.pre_dt==-1){_this27.pre_dt=dt}var dtratio1=dt/_this27.pre_dt;_this27.pre_dt=dt;_this27.r1x=_this27.centroidx-_this27.b1.posx;_this27.r1y=_this27.centroidy-_this27.b1.posy;_this27.r2x=_this27.centroidx-_this27.b2.posx;_this27.r2y=_this27.centroidy-_this27.b2.posy;var g1x=0;var g1y=0;if(_this27.ws1.fluidEnabled&&_this27.ws1.fluidProperties.wrap_gravity!=null){g1x=_this27.ws1.fluidProperties.gravityx;g1y=_this27.ws1.fluidProperties.gravityy}else{g1x=this.gravityx;g1y=this.gravityy}var g2x=0;var g2y=0;if(_this27.ws2.fluidEnabled&&_this27.ws2.fluidProperties.wrap_gravity!=null){g2x=_this27.ws2.fluidProperties.gravityx;g2y=_this27.ws2.fluidProperties.gravityy}else{g2x=this.gravityx;g2y=this.gravityy}var buoyx=0;var buoyy=0;if(_this27.ws1.fluidEnabled&&_this27.ws2.fluidEnabled){var mass1=_this27.overlap*_this27.ws1.fluidProperties.density;var mass2=_this27.overlap*_this27.ws2.fluidProperties.density;if(mass1>mass2){var t2=mass1+mass2;buoyx-=g1x*t2;buoyy-=g1y*t2}else if(mass1<mass2){var t3=mass1+mass2;buoyx+=g2x*t3;buoyy+=g2y*t3}else{var gx=0;var gy=0;gx=g1x+g2x;gy=g1y+g2y;gx*=.5;gy*=.5;if(_this27.ws1.worldCOMx*gx+_this27.ws1.worldCOMy*gy>_this27.ws2.worldCOMx*gx+_this27.ws2.worldCOMy*gy){var t4=mass1+mass2;buoyx-=gx*t4;buoyy-=gy*t4}else{var t5=mass1+mass2;buoyx+=gx*t5;buoyy+=gy*t5}}}else if(_this27.ws1.fluidEnabled){var mass=_this27.overlap*_this27.ws1.fluidProperties.density;buoyx-=g1x*mass;buoyy-=g1y*mass}else if(_this27.ws2.fluidEnabled){var mass3=_this27.overlap*_this27.ws2.fluidProperties.density;buoyx+=g2x*mass3;buoyy+=g2y*mass3}buoyx*=dt;buoyy*=dt;_this27.buoyx=buoyx;_this27.buoyy=buoyy;if(_this27.b1.type==2){var t6=_this27.b1.imass;_this27.b1.velx-=buoyx*t6;_this27.b1.vely-=buoyy*t6;_this27.b1.angvel-=(buoyy*_this27.r1x-buoyx*_this27.r1y)*_this27.b1.iinertia}if(_this27.b2.type==2){var t7=_this27.b2.imass;_this27.b2.velx+=buoyx*t7;_this27.b2.vely+=buoyy*t7;_this27.b2.angvel+=(buoyy*_this27.r2x-buoyx*_this27.r2y)*_this27.b2.iinertia}if((!_this27.ws1.fluidEnabled||_this27.ws1.fluidProperties.viscosity==0)&&(!_this27.ws2.fluidEnabled||_this27.ws2.fluidProperties.viscosity==0)){_this27.nodrag=true;_this27.dampx=0;_this27.dampy=0;_this27.adamp=0}else{_this27.nodrag=false;var tViscosity=0;if(_this27.ws1.fluidEnabled){_this27.ws2.validate_angDrag();tViscosity=_this27.ws1.fluidProperties.viscosity*_this27.ws2.angDrag*_this27.overlap/_this27.ws2.area}if(_this27.ws2.fluidEnabled){_this27.ws1.validate_angDrag();tViscosity+=_this27.ws2.fluidProperties.viscosity*_this27.ws1.angDrag*_this27.overlap/_this27.ws1.area}if(tViscosity!=0){var iSum=_this27.b1.sinertia+_this27.b2.sinertia;if(iSum!=0){_this27.wMass=1/iSum}else{_this27.wMass=0}tViscosity*=4e-4;var omega=2*Math.PI*tViscosity;_this27.agamma=1/(dt*omega*(2+omega*dt));var ig=1/(1+_this27.agamma);_this27.agamma*=ig;_this27.wMass*=ig}else{_this27.wMass=0;_this27.agamma=0}var vrnx=_this27.b2.velx+_this27.b2.kinvelx-_this27.r2y*(_this27.b2.angvel+_this27.b2.kinangvel)-(_this27.b1.velx+_this27.b1.kinvelx-_this27.r1y*(_this27.b2.angvel+_this27.b2.kinangvel));var vrny=_this27.b2.vely+_this27.b2.kinvely+_this27.r2x*(_this27.b2.angvel+_this27.b2.kinangvel)-(_this27.b1.vely+_this27.b1.kinvely+_this27.r1x*(_this27.b1.angvel+_this27.b1.kinangvel));if(!(vrnx*vrnx+vrny*vrny<nape_Config.epsilon*nape_Config.epsilon)){var imag=1/Math.sqrt(vrnx*vrnx+vrny*vrny);vrnx*=imag;vrny*=imag;_this27.nx=vrnx;_this27.ny=vrny}var tViscosity1=0;if(_this27.ws1.fluidEnabled){var f=-_this27.ws1.fluidProperties.viscosity*_this27.overlap/_this27.ws2.area;if(_this27.ws2.type==0){tViscosity1=0-f*_this27.ws2.circle.radius*nape_Config.fluidLinearDrag/(2*_this27.ws2.circle.radius*Math.PI)}else{var bord=0;var acc=0;var cx_ite9=_this27.ws2.polygon.edges.head;while(cx_ite9!=null){var ex=cx_ite9.elt;bord+=ex.length;var fact=f*ex.length*(ex.gnormx*_this27.nx+ex.gnormy*_this27.ny);if(fact>0){fact*=-nape_Config.fluidVacuumDrag;fact=fact}acc-=fact*.5*nape_Config.fluidLinearDrag;cx_ite9=cx_ite9.next}tViscosity1=acc/bord}}if(_this27.ws2.fluidEnabled){var f1=-_this27.ws2.fluidProperties.viscosity*_this27.overlap/_this27.ws1.area;if(_this27.ws1.type==0){tViscosity1-=f1*_this27.ws1.circle.radius*nape_Config.fluidLinearDrag/(2*_this27.ws1.circle.radius*Math.PI)}else{var bord1=0;var acc1=0;var cx_ite10=_this27.ws1.polygon.edges.head;while(cx_ite10!=null){var ex1=cx_ite10.elt;bord1+=ex1.length;var fact1=f1*ex1.length*(ex1.gnormx*_this27.nx+ex1.gnormy*_this27.ny);if(fact1>0){fact1*=-nape_Config.fluidVacuumDrag;fact1=fact1}acc1-=fact1*.5*nape_Config.fluidLinearDrag;cx_ite10=cx_ite10.next}tViscosity1+=acc1/bord1}}if(tViscosity1!=0){var m=_this27.b1.smass+_this27.b2.smass;var Ka=0;var Kb=0;var Kc=0;Ka=m;Kb=0;Kc=m;if(_this27.b1.sinertia!=0){var Y=_this27.r1y*_this27.b1.sinertia;Ka=m+Y*_this27.r1y;Kb+=-Y*_this27.r1x;Kc=m+_this27.r1x*_this27.b1.sinertia*_this27.r1x}if(_this27.b2.sinertia!=0){var Y1=_this27.r2y*_this27.b2.sinertia;Ka+=Y1*_this27.r2y;Kb+=-Y1*_this27.r2x;Kc+=_this27.r2x*_this27.b2.sinertia*_this27.r2x}var det1=Ka*Kc-Kb*Kb;if(det1!=det1){Kc=0;Kb=Kc;Ka=Kb}else if(det1==0){if(Ka!=0){Ka=1/Ka}else{Ka=0}if(Kc!=0){Kc=1/Kc}else{Kc=0}Kb=0}else{det1=1/det1;var t8=Kc*det1;Kc=Ka*det1;Ka=t8;Kb*=-det1}_this27.vMassa=Ka;_this27.vMassb=Kb;_this27.vMassc=Kc;var omega1=2*Math.PI*tViscosity1;_this27.lgamma=1/(dt*omega1*(2+omega1*dt));var ig1=1/(1+_this27.lgamma);_this27.lgamma*=ig1;_this27.vMassa*=ig1;_this27.vMassb*=ig1;_this27.vMassc*=ig1}else{_this27.vMassa=0;_this27.vMassb=0;_this27.vMassc=0;_this27.lgamma=0}}_this27.dampx*=dtratio1;_this27.dampy*=dtratio1;_this27.adamp*=dtratio1}}}else if(arb.colarb!=null){var _this28=arb.colarb;var fst1=true;var pre7=null;var prei1=null;var cx_itei1=_this28.innards.next;_this28.hc2=false;var cx_ite11=_this28.contacts.next;while(cx_ite11!=null){var c3=cx_ite11;if(c3.stamp+nape_Config.arbiterExpirationDelay<_this28.stamp){var _this29=_this28.contacts;var old8;var ret26;if(pre7==null){old8=_this29.next;ret26=old8.next;_this29.next=ret26;if(_this29.next==null){_this29.pushmod=true}}else{old8=pre7.next;ret26=old8.next;pre7.next=ret26;if(ret26==null){_this29.pushmod=true}}old8._inuse=false;_this29.modified=true;_this29.length--;_this29.pushmod=true;cx_ite11=ret26;var _this30=_this28.innards;var old9;var ret27;if(prei1==null){old9=_this30.next;ret27=old9.next;_this30.next=ret27;if(_this30.next==null){_this30.pushmod=true}}else{old9=prei1.next;ret27=old9.next;prei1.next=ret27;if(ret27==null){_this30.pushmod=true}}old9._inuse=false;_this30.modified=true;_this30.length--;_this30.pushmod=true;cx_itei1=ret27;c3.arbiter=null;c3.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c3;continue}var ci1=c3.inner;var pact2=c3.active;c3.active=c3.stamp==_this28.stamp;if(c3.active){if(fst1){fst1=false;_this28.c1=ci1;_this28.oc1=c3}else{_this28.hc2=true;_this28.c2=ci1;_this28.oc2=c3}}if(pact2!=c3.active){_this28.contacts.modified=true}pre7=cx_ite11;prei1=cx_itei1;cx_itei1=cx_itei1.next;cx_ite11=cx_ite11.next}if(_this28.hc2){_this28.hpc2=true;if(_this28.oc1.posOnly){var tmp4=_this28.c1;_this28.c1=_this28.c2;_this28.c2=tmp4;var tmp22=_this28.oc1;_this28.oc1=_this28.oc2;_this28.oc2=tmp22;_this28.hc2=false}else if(_this28.oc2.posOnly){_this28.hc2=false}if(_this28.oc1.posOnly){fst1=true}}else{_this28.hpc2=false}if(fst1){arb.active=false}}if(pact!=arb.active){arb.b1.arbiters.modified=true;arb.b2.arbiters.modified=true;this.c_arbiters_true.modified=this.c_arbiters_false.modified=true;this.s_arbiters.modified=this.f_arbiters.modified=true}return false},prestep:function(dt){var pre=null;var cx_ite=this.live_constraints.head;while(cx_ite!=null){var con=cx_ite.elt;if(con.preStep(dt)){cx_ite=this.live_constraints.erase(pre);con.broken();this.constraintCbBreak(con);if(con.removeOnBreak){con.component.sleeping=true;this.midstep=false;if(con.compound!=null){con.compound.wrap_constraints.remove(con.outer)}else{this.wrap_constraints.remove(con.outer)}this.midstep=true}else{con.active=false}con.clearcache();continue}pre=cx_ite;cx_ite=cx_ite.next}var pre1=null;var arbs=this.c_arbiters_true;var arbite=arbs.head;var fst=this.c_arbiters_false!=null;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre1=null}while(arbite!=null){if(this.presteparb(arbite.elt,dt)){var old;var ret;if(pre1==null){old=arbs.head;ret=old.next;arbs.head=ret;if(arbs.head==null){arbs.pushmod=true}}else{old=pre1.next;ret=old.next;pre1.next=ret;if(ret==null){arbs.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=o;arbs.modified=true;arbs.length--;arbs.pushmod=true;arbite=ret;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre1=null}continue}pre1=arbite;arbite=arbite.next;if(fst&&arbite==null){fst=false;arbite=this.c_arbiters_false.head;arbs=this.c_arbiters_false;pre1=null}}var pre2=null;var arbs1=this.f_arbiters;var arbite1=arbs1.head;while(arbite1!=null){if(this.presteparb(arbite1.elt,dt)){var old1;var ret1;if(pre2==null){old1=arbs1.head;ret1=old1.next;arbs1.head=ret1;if(arbs1.head==null){arbs1.pushmod=true}}else{old1=pre2.next;ret1=old1.next;pre2.next=ret1;if(ret1==null){arbs1.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=o1;arbs1.modified=true;arbs1.length--;arbs1.pushmod=true;arbite1=ret1;continue}pre2=arbite1;arbite1=arbite1.next}var pre3=null;var arbs2=this.s_arbiters;var arbite2=arbs2.head;while(arbite2!=null){if(this.presteparb(arbite2.elt,dt)){var old2;var ret2;if(pre3==null){old2=arbs2.head;ret2=old2.next;arbs2.head=ret2;if(arbs2.head==null){arbs2.pushmod=true}}else{old2=pre3.next;ret2=old2.next;pre3.next=ret2;if(ret2==null){arbs2.pushmod=true}}var o2=old2;o2.elt=null;o2.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=o2;arbs2.modified=true;arbs2.length--;arbs2.pushmod=true;arbite2=ret2;continue}pre3=arbite2;arbite2=arbite2.next}},warmStart:function(){var cx_ite=this.f_arbiters.head;while(cx_ite!=null){var arb=cx_ite.elt;if(arb.active&&(arb.immState&1)!=0){var t=arb.b1.imass;arb.b1.velx-=arb.dampx*t;arb.b1.vely-=arb.dampy*t;var t1=arb.b2.imass;arb.b2.velx+=arb.dampx*t1;arb.b2.vely+=arb.dampy*t1;arb.b1.angvel-=arb.b1.iinertia*(arb.dampy*arb.r1x-arb.dampx*arb.r1y);arb.b2.angvel+=arb.b2.iinertia*(arb.dampy*arb.r2x-arb.dampx*arb.r2y);arb.b1.angvel-=arb.adamp*arb.b1.iinertia;arb.b2.angvel+=arb.adamp*arb.b2.iinertia}cx_ite=cx_ite.next}var arbi=this.c_arbiters_false.head;var fst=true;if(arbi==null){arbi=this.c_arbiters_true.head;fst=false}while(arbi!=null){var arb1=arbi.elt;if(arb1.active&&(arb1.immState&1)!=0){var jx=arb1.nx*arb1.c1.jnAcc-arb1.ny*arb1.c1.jtAcc;var jy=arb1.ny*arb1.c1.jnAcc+arb1.nx*arb1.c1.jtAcc;var t2=arb1.b1.imass;arb1.b1.velx-=jx*t2;arb1.b1.vely-=jy*t2;arb1.b1.angvel-=arb1.b1.iinertia*(jy*arb1.c1.r1x-jx*arb1.c1.r1y);var t3=arb1.b2.imass;arb1.b2.velx+=jx*t3;arb1.b2.vely+=jy*t3;arb1.b2.angvel+=arb1.b2.iinertia*(jy*arb1.c1.r2x-jx*arb1.c1.r2y);if(arb1.hc2){var jx1=arb1.nx*arb1.c2.jnAcc-arb1.ny*arb1.c2.jtAcc;var jy1=arb1.ny*arb1.c2.jnAcc+arb1.nx*arb1.c2.jtAcc;var t4=arb1.b1.imass;arb1.b1.velx-=jx1*t4;arb1.b1.vely-=jy1*t4;arb1.b1.angvel-=arb1.b1.iinertia*(jy1*arb1.c2.r1x-jx1*arb1.c2.r1y);var t5=arb1.b2.imass;arb1.b2.velx+=jx1*t5;arb1.b2.vely+=jy1*t5;arb1.b2.angvel+=arb1.b2.iinertia*(jy1*arb1.c2.r2x-jx1*arb1.c2.r2y)}arb1.b2.angvel+=arb1.jrAcc*arb1.b2.iinertia;arb1.b1.angvel-=arb1.jrAcc*arb1.b1.iinertia}arbi=arbi.next;if(fst&&arbi==null){arbi=this.c_arbiters_true.head;fst=false}}var cx_ite1=this.live_constraints.head;while(cx_ite1!=null){cx_ite1.elt.warmStart();cx_ite1=cx_ite1.next}},iterateVel:function(times){var _g=0;while(_g<times){++_g;var cx_ite=this.f_arbiters.head;while(cx_ite!=null){var arb=cx_ite.elt;if(arb.active&&(arb.immState&1)!=0){if(!arb.nodrag){var w1=arb.b1.angvel+arb.b1.kinangvel;var w2=arb.b2.angvel+arb.b2.kinangvel;var jx=arb.b1.velx+arb.b1.kinvelx-arb.r1y*w1-(arb.b2.velx+arb.b2.kinvelx-arb.r2y*w2);var jy=arb.b1.vely+arb.b1.kinvely+arb.r1x*w1-(arb.b2.vely+arb.b2.kinvely+arb.r2x*w2);var t=arb.vMassa*jx+arb.vMassb*jy;jy=arb.vMassb*jx+arb.vMassc*jy;jx=t;var t1=arb.lgamma;jx-=arb.dampx*t1;jy-=arb.dampy*t1;arb.dampx+=jx;arb.dampy+=jy;var t2=arb.b1.imass;arb.b1.velx-=jx*t2;arb.b1.vely-=jy*t2;var t3=arb.b2.imass;arb.b2.velx+=jx*t3;arb.b2.vely+=jy*t3;arb.b1.angvel-=arb.b1.iinertia*(jy*arb.r1x-jx*arb.r1y);arb.b2.angvel+=arb.b2.iinertia*(jy*arb.r2x-jx*arb.r2y);var j_damp=(w1-w2)*arb.wMass-arb.adamp*arb.agamma;arb.adamp+=j_damp;arb.b1.angvel-=j_damp*arb.b1.iinertia;arb.b2.angvel+=j_damp*arb.b2.iinertia}}cx_ite=cx_ite.next}var pre=null;var cx_ite1=this.live_constraints.head;while(cx_ite1!=null){var con=cx_ite1.elt;if(con.applyImpulseVel()){cx_ite1=this.live_constraints.erase(pre);con.broken();this.constraintCbBreak(con);if(con.removeOnBreak){con.component.sleeping=true;this.midstep=false;if(con.compound!=null){con.compound.wrap_constraints.remove(con.outer)}else{this.wrap_constraints.remove(con.outer)}this.midstep=true}else{con.active=false}con.clearcache();continue}pre=cx_ite1;cx_ite1=cx_ite1.next}var arbi=this.c_arbiters_false.head;var fst=true;if(arbi==null){arbi=this.c_arbiters_true.head;fst=false}while(arbi!=null){var arb1=arbi.elt;if(arb1.active&&(arb1.immState&1)!=0){var v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel);var v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel);var j=(v1y*arb1.nx-v1x*arb1.ny+arb1.surfacex)*arb1.c1.tMass;var jMax=arb1.c1.friction*arb1.c1.jnAcc;var jOld=arb1.c1.jtAcc;var cjAcc=jOld-j;if(cjAcc>jMax){cjAcc=jMax}else if(cjAcc<-jMax){cjAcc=-jMax}j=cjAcc-jOld;arb1.c1.jtAcc=cjAcc;var jx1=-arb1.ny*j;var jy1=arb1.nx*j;arb1.b2.velx+=jx1*arb1.b2.imass;arb1.b2.vely+=jy1*arb1.b2.imass;arb1.b1.velx-=jx1*arb1.b1.imass;arb1.b1.vely-=jy1*arb1.b1.imass;arb1.b2.angvel+=arb1.rt1b*j*arb1.b2.iinertia;arb1.b1.angvel-=arb1.rt1a*j*arb1.b1.iinertia;if(arb1.hc2){var v2x=arb1.k2x+arb1.b2.velx-arb1.c2.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c2.r1y*arb1.b1.angvel);var v2y=arb1.k2y+arb1.b2.vely+arb1.c2.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c2.r1x*arb1.b1.angvel);j=(v2y*arb1.nx-v2x*arb1.ny+arb1.surfacex)*arb1.c2.tMass;jMax=arb1.c2.friction*arb1.c2.jnAcc;jOld=arb1.c2.jtAcc;cjAcc=jOld-j;if(cjAcc>jMax){cjAcc=jMax}else if(cjAcc<-jMax){cjAcc=-jMax}j=cjAcc-jOld;arb1.c2.jtAcc=cjAcc;jx1=-arb1.ny*j;jy1=arb1.nx*j;arb1.b2.velx+=jx1*arb1.b2.imass;arb1.b2.vely+=jy1*arb1.b2.imass;arb1.b1.velx-=jx1*arb1.b1.imass;arb1.b1.vely-=jy1*arb1.b1.imass;arb1.b2.angvel+=arb1.rt2b*j*arb1.b2.iinertia;arb1.b1.angvel-=arb1.rt2a*j*arb1.b1.iinertia;v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel);v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel);v2x=arb1.k2x+arb1.b2.velx-arb1.c2.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c2.r1y*arb1.b1.angvel);v2y=arb1.k2y+arb1.b2.vely+arb1.c2.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c2.r1x*arb1.b1.angvel);var ax=arb1.c1.jnAcc;var ay=arb1.c2.jnAcc;var jnx=v1x*arb1.nx+v1y*arb1.ny+arb1.surfacey+arb1.c1.bounce-(arb1.Ka*ax+arb1.Kb*ay);var jny=v2x*arb1.nx+v2y*arb1.ny+arb1.surfacey+arb1.c2.bounce-(arb1.Kb*ax+arb1.Kc*ay);var xx=-(arb1.kMassa*jnx+arb1.kMassb*jny);var xy=-(arb1.kMassb*jnx+arb1.kMassc*jny);if(xx>=0&&xy>=0){jnx=xx-ax;jny=xy-ay;arb1.c1.jnAcc=xx;arb1.c2.jnAcc=xy}else{xx=-arb1.c1.nMass*jnx;if(xx>=0&&arb1.Kb*xx+jny>=0){jnx=xx-ax;jny=-ay;arb1.c1.jnAcc=xx;arb1.c2.jnAcc=0}else{xy=-arb1.c2.nMass*jny;if(xy>=0&&arb1.Kb*xy+jnx>=0){jnx=-ax;jny=xy-ay;arb1.c1.jnAcc=0;arb1.c2.jnAcc=xy}else if(jnx>=0&&jny>=0){jnx=-ax;jny=-ay;arb1.c1.jnAcc=arb1.c2.jnAcc=0}else{jnx=0;jny=0}}}j=jnx+jny;jx1=arb1.nx*j;jy1=arb1.ny*j;arb1.b2.velx+=jx1*arb1.b2.imass;arb1.b2.vely+=jy1*arb1.b2.imass;arb1.b1.velx-=jx1*arb1.b1.imass;arb1.b1.vely-=jy1*arb1.b1.imass;arb1.b2.angvel+=(arb1.rn1b*jnx+arb1.rn2b*jny)*arb1.b2.iinertia;arb1.b1.angvel-=(arb1.rn1a*jnx+arb1.rn2a*jny)*arb1.b1.iinertia}else{if(arb1.radius!=0){j=(arb1.b2.angvel-arb1.b1.angvel)*arb1.rMass;jMax=arb1.rfric*arb1.c1.jnAcc;jOld=arb1.jrAcc;arb1.jrAcc-=j;if(arb1.jrAcc>jMax){arb1.jrAcc=jMax}else if(arb1.jrAcc<-jMax){arb1.jrAcc=-jMax}j=arb1.jrAcc-jOld;arb1.b2.angvel+=j*arb1.b2.iinertia;arb1.b1.angvel-=j*arb1.b1.iinertia}v1x=arb1.k1x+arb1.b2.velx-arb1.c1.r2y*arb1.b2.angvel-(arb1.b1.velx-arb1.c1.r1y*arb1.b1.angvel);v1y=arb1.k1y+arb1.b2.vely+arb1.c1.r2x*arb1.b2.angvel-(arb1.b1.vely+arb1.c1.r1x*arb1.b1.angvel);j=(arb1.c1.bounce+(arb1.nx*v1x+arb1.ny*v1y)+arb1.surfacey)*arb1.c1.nMass;jOld=arb1.c1.jnAcc;cjAcc=jOld-j;if(cjAcc<0){cjAcc=0}j=cjAcc-jOld;arb1.c1.jnAcc=cjAcc;jx1=arb1.nx*j;jy1=arb1.ny*j;arb1.b2.velx+=jx1*arb1.b2.imass;arb1.b2.vely+=jy1*arb1.b2.imass;arb1.b1.velx-=jx1*arb1.b1.imass;arb1.b1.vely-=jy1*arb1.b1.imass;arb1.b2.angvel+=arb1.rn1b*j*arb1.b2.iinertia;arb1.b1.angvel-=arb1.rn1a*j*arb1.b1.iinertia}}arbi=arbi.next;if(fst&&arbi==null){arbi=this.c_arbiters_true.head;fst=false}}}},iteratePos:function(times){var _g=0;while(_g<times){++_g;var pre=null;var cx_ite=this.live_constraints.head;while(cx_ite!=null){var con=cx_ite.elt;if(!con.__velocity&&con.stiff){if(con.applyImpulsePos()){cx_ite=this.live_constraints.erase(pre);con.broken();this.constraintCbBreak(con);if(con.removeOnBreak){con.component.sleeping=true;this.midstep=false;if(con.compound!=null){con.compound.wrap_constraints.remove(con.outer)}else{this.wrap_constraints.remove(con.outer)}this.midstep=true}else{con.active=false}con.clearcache();continue}}pre=cx_ite;cx_ite=cx_ite.next}var arbi=this.c_arbiters_false.head;var fst=true;if(arbi==null){arbi=this.c_arbiters_true.head;fst=false}while(arbi!=null){var arb=arbi.elt;if(arb.active&&(arb.immState&1)!=0){if(arb.ptype==2){var c=arb.c1;var r2x=0;var r2y=0;r2x=arb.b2.axisy*c.lr2x-arb.b2.axisx*c.lr2y;r2y=c.lr2x*arb.b2.axisx+c.lr2y*arb.b2.axisy;r2x+=arb.b2.posx;r2y+=arb.b2.posy;var r1x=0;var r1y=0;r1x=arb.b1.axisy*c.lr1x-arb.b1.axisx*c.lr1y;r1y=c.lr1x*arb.b1.axisx+c.lr1y*arb.b1.axisy;r1x+=arb.b1.posx;r1y+=arb.b1.posy;var dx=0;var dy=0;dx=r2x-r1x;dy=r2y-r1y;var dl=Math.sqrt(dx*dx+dy*dy);var r=arb.radius-nape_Config.collisionSlop;var err=dl-r;if(dx*arb.nx+dy*arb.ny<0){dx=-dx;dy=-dy;err-=arb.radius}if(err<0){if(dl<nape_Config.epsilon){if(arb.b1.smass!=0){arb.b1.posx+=nape_Config.epsilon*10}else{arb.b2.posx+=nape_Config.epsilon*10}}else{var t=1/dl;dx*=t;dy*=t;var px=.5*(r1x+r2x);var py=.5*(r1y+r2y);r1x=px-arb.b1.posx;r1y=py-arb.b1.posy;r2x=px-arb.b2.posx;r2y=py-arb.b2.posy;var rn1=dy*r1x-dx*r1y;var rn2=dy*r2x-dx*r2y;var K=arb.b2.smass+rn2*rn2*arb.b2.sinertia+arb.b1.smass+rn1*rn1*arb.b1.sinertia;if(K!=0){var jn=-arb.biasCoef*(dl-r)/K;var Jx=0;var Jy=0;Jx=dx*jn;Jy=dy*jn;var t1=arb.b1.imass;arb.b1.posx-=Jx*t1;arb.b1.posy-=Jy*t1;var _this=arb.b1;var dr=-rn1*arb.b1.iinertia*jn;_this.rot+=dr;if(dr*dr>1e-4){_this.axisx=Math.sin(_this.rot);_this.axisy=Math.cos(_this.rot)}else{var d2=dr*dr;var p=1-.5*d2;var m=1-d2*d2/8;var nx=(p*_this.axisx+dr*_this.axisy)*m;_this.axisy=(p*_this.axisy-dr*_this.axisx)*m;_this.axisx=nx}var t2=arb.b2.imass;arb.b2.posx+=Jx*t2;arb.b2.posy+=Jy*t2;var _this1=arb.b2;var dr1=rn2*arb.b2.iinertia*jn;_this1.rot+=dr1;if(dr1*dr1>1e-4){_this1.axisx=Math.sin(_this1.rot);_this1.axisy=Math.cos(_this1.rot)}else{var d21=dr1*dr1;var p1=1-.5*d21;var m1=1-d21*d21/8;var nx1=(p1*_this1.axisx+dr1*_this1.axisy)*m1;_this1.axisy=(p1*_this1.axisy-dr1*_this1.axisx)*m1;_this1.axisx=nx1}}}}}else{var gnormx=0;var gnormy=0;var gproj;var clip1x=0;var clip1y=0;var clip2x=0;var clip2y=0;if(arb.ptype==0){gnormx=arb.b1.axisy*arb.lnormx-arb.b1.axisx*arb.lnormy;gnormy=arb.lnormx*arb.b1.axisx+arb.lnormy*arb.b1.axisy;gproj=arb.lproj+(gnormx*arb.b1.posx+gnormy*arb.b1.posy);clip1x=arb.b2.axisy*arb.c1.lr1x-arb.b2.axisx*arb.c1.lr1y;clip1y=arb.c1.lr1x*arb.b2.axisx+arb.c1.lr1y*arb.b2.axisy;clip1x+=arb.b2.posx;clip1y+=arb.b2.posy;if(arb.hpc2){clip2x=arb.b2.axisy*arb.c2.lr1x-arb.b2.axisx*arb.c2.lr1y;clip2y=arb.c2.lr1x*arb.b2.axisx+arb.c2.lr1y*arb.b2.axisy;clip2x+=arb.b2.posx;clip2y+=arb.b2.posy}}else{gnormx=arb.b2.axisy*arb.lnormx-arb.b2.axisx*arb.lnormy;gnormy=arb.lnormx*arb.b2.axisx+arb.lnormy*arb.b2.axisy;gproj=arb.lproj+(gnormx*arb.b2.posx+gnormy*arb.b2.posy);clip1x=arb.b1.axisy*arb.c1.lr1x-arb.b1.axisx*arb.c1.lr1y;clip1y=arb.c1.lr1x*arb.b1.axisx+arb.c1.lr1y*arb.b1.axisy;clip1x+=arb.b1.posx;clip1y+=arb.b1.posy;if(arb.hpc2){clip2x=arb.b1.axisy*arb.c2.lr1x-arb.b1.axisx*arb.c2.lr1y;clip2y=arb.c2.lr1x*arb.b1.axisx+arb.c2.lr1y*arb.b1.axisy;clip2x+=arb.b1.posx;clip2y+=arb.b1.posy}}var err1=clip1x*gnormx+clip1y*gnormy-gproj-arb.radius;err1+=nape_Config.collisionSlop;var err2=0;if(arb.hpc2){err2=clip2x*gnormx+clip2y*gnormy-gproj-arb.radius;err2+=nape_Config.collisionSlop}if(err1<0||err2<0){if(arb.rev){gnormx=-gnormx;gnormy=-gnormy}var c1r1x=0;var c1r1y=0;c1r1x=clip1x-arb.b1.posx;c1r1y=clip1y-arb.b1.posy;var c1r2x=0;var c1r2y=0;c1r2x=clip1x-arb.b2.posx;c1r2y=clip1y-arb.b2.posy;var c2r1x=0;var c2r1y=0;var c2r2x=0;var c2r2y=0;if(arb.hpc2){c2r1x=clip2x-arb.b1.posx;c2r1y=clip2y-arb.b1.posy;c2r2x=clip2x-arb.b2.posx;c2r2y=clip2y-arb.b2.posy;var rn1a=gnormy*c1r1x-gnormx*c1r1y;var rn1b=gnormy*c1r2x-gnormx*c1r2y;var rn2a=gnormy*c2r1x-gnormx*c2r1y;var rn2b=gnormy*c2r2x-gnormx*c2r2y;var mass_sum=arb.b1.smass+arb.b2.smass;arb.kMassa=mass_sum+arb.b1.sinertia*rn1a*rn1a+arb.b2.sinertia*rn1b*rn1b;arb.kMassb=mass_sum+arb.b1.sinertia*rn1a*rn2a+arb.b2.sinertia*rn1b*rn2b;arb.kMassc=mass_sum+arb.b1.sinertia*rn2a*rn2a+arb.b2.sinertia*rn2b*rn2b;var Ka=0;var Kb=0;var Kc=0;Ka=arb.kMassa;Kb=arb.kMassb;Kc=arb.kMassc;var bx=err1*arb.biasCoef;var by=err2*arb.biasCoef;while(true){var xx=0;var xy=0;xx=bx;xy=by;xx=-bx;xy=-by;var det=arb.kMassa*arb.kMassc-arb.kMassb*arb.kMassb;if(det!=det){xy=0;xx=xy}else if(det==0){if(arb.kMassa!=0){xx/=arb.kMassa}else{xx=0}if(arb.kMassc!=0){xy/=arb.kMassc}else{xy=0}}else{det=1/det;var t3=det*(arb.kMassc*xx-arb.kMassb*xy);xy=det*(arb.kMassa*xy-arb.kMassb*xx);xx=t3}if(xx>=0&&xy>=0){var t4=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t4;arb.b1.posy-=gnormy*t4;var _this2=arb.b1;var dr2=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);_this2.rot+=dr2;if(dr2*dr2>1e-4){_this2.axisx=Math.sin(_this2.rot);_this2.axisy=Math.cos(_this2.rot)}else{var d22=dr2*dr2;var p2=1-.5*d22;var m2=1-d22*d22/8;var nx2=(p2*_this2.axisx+dr2*_this2.axisy)*m2;_this2.axisy=(p2*_this2.axisy-dr2*_this2.axisx)*m2;_this2.axisx=nx2}var t5=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t5;arb.b2.posy+=gnormy*t5;var _this3=arb.b2;var dr3=arb.b2.iinertia*(rn1b*xx+rn2b*xy);_this3.rot+=dr3;if(dr3*dr3>1e-4){_this3.axisx=Math.sin(_this3.rot);_this3.axisy=Math.cos(_this3.rot)}else{var d23=dr3*dr3;var p3=1-.5*d23;var m3=1-d23*d23/8;var nx3=(p3*_this3.axisx+dr3*_this3.axisy)*m3;_this3.axisy=(p3*_this3.axisy-dr3*_this3.axisx)*m3;_this3.axisx=nx3}break}xx=-bx/Ka;xy=0;if(xx>=0&&Kb*xx+by>=0){var t6=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t6;arb.b1.posy-=gnormy*t6;var _this4=arb.b1;var dr4=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);_this4.rot+=dr4;if(dr4*dr4>1e-4){_this4.axisx=Math.sin(_this4.rot);_this4.axisy=Math.cos(_this4.rot)}else{var d24=dr4*dr4;var p4=1-.5*d24;var m4=1-d24*d24/8;var nx4=(p4*_this4.axisx+dr4*_this4.axisy)*m4;_this4.axisy=(p4*_this4.axisy-dr4*_this4.axisx)*m4;_this4.axisx=nx4}var t7=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t7;arb.b2.posy+=gnormy*t7;var _this5=arb.b2;var dr5=arb.b2.iinertia*(rn1b*xx+rn2b*xy);_this5.rot+=dr5;if(dr5*dr5>1e-4){_this5.axisx=Math.sin(_this5.rot);_this5.axisy=Math.cos(_this5.rot)}else{var d25=dr5*dr5;var p5=1-.5*d25;var m5=1-d25*d25/8;var nx5=(p5*_this5.axisx+dr5*_this5.axisy)*m5;_this5.axisy=(p5*_this5.axisy-dr5*_this5.axisx)*m5;_this5.axisx=nx5}break}xx=0;xy=-by/Kc;if(xy>=0&&Kb*xy+bx>=0){var t8=(xx+xy)*arb.b1.imass;arb.b1.posx-=gnormx*t8;arb.b1.posy-=gnormy*t8;var _this6=arb.b1;var dr6=-arb.b1.iinertia*(rn1a*xx+rn2a*xy);_this6.rot+=dr6;if(dr6*dr6>1e-4){_this6.axisx=Math.sin(_this6.rot);_this6.axisy=Math.cos(_this6.rot)}else{var d26=dr6*dr6;var p6=1-.5*d26;var m6=1-d26*d26/8;var nx6=(p6*_this6.axisx+dr6*_this6.axisy)*m6;_this6.axisy=(p6*_this6.axisy-dr6*_this6.axisx)*m6;_this6.axisx=nx6}var t9=(xx+xy)*arb.b2.imass;arb.b2.posx+=gnormx*t9;arb.b2.posy+=gnormy*t9;var _this7=arb.b2;var dr7=arb.b2.iinertia*(rn1b*xx+rn2b*xy);_this7.rot+=dr7;if(dr7*dr7>1e-4){_this7.axisx=Math.sin(_this7.rot);_this7.axisy=Math.cos(_this7.rot)}else{var d27=dr7*dr7;var p7=1-.5*d27;var m7=1-d27*d27/8;var nx7=(p7*_this7.axisx+dr7*_this7.axisy)*m7;_this7.axisy=(p7*_this7.axisy-dr7*_this7.axisx)*m7;_this7.axisx=nx7}break}break}}else{var rn11=gnormy*c1r1x-gnormx*c1r1y;var rn21=gnormy*c1r2x-gnormx*c1r2y;var K1=arb.b2.smass+rn21*rn21*arb.b2.sinertia+arb.b1.smass+rn11*rn11*arb.b1.sinertia;if(K1!=0){var jn1=-arb.biasCoef*err1/K1;var Jx1=0;var Jy1=0;Jx1=gnormx*jn1;Jy1=gnormy*jn1;var t10=arb.b1.imass;arb.b1.posx-=Jx1*t10;arb.b1.posy-=Jy1*t10;var _this8=arb.b1;var dr8=-rn11*arb.b1.iinertia*jn1;_this8.rot+=dr8;if(dr8*dr8>1e-4){_this8.axisx=Math.sin(_this8.rot);_this8.axisy=Math.cos(_this8.rot)}else{var d28=dr8*dr8;var p8=1-.5*d28;var m8=1-d28*d28/8;var nx8=(p8*_this8.axisx+dr8*_this8.axisy)*m8;_this8.axisy=(p8*_this8.axisy-dr8*_this8.axisx)*m8;_this8.axisx=nx8}var t11=arb.b2.imass;arb.b2.posx+=Jx1*t11;arb.b2.posy+=Jy1*t11;var _this9=arb.b2;var dr9=rn21*arb.b2.iinertia*jn1;_this9.rot+=dr9;if(dr9*dr9>1e-4){_this9.axisx=Math.sin(_this9.rot);_this9.axisy=Math.cos(_this9.rot)}else{var d29=dr9*dr9;var p9=1-.5*d29;var m9=1-d29*d29/8;var nx9=(p9*_this9.axisx+dr9*_this9.axisy)*m9;_this9.axisy=(p9*_this9.axisy-dr9*_this9.axisx)*m9;_this9.axisx=nx9}}}}}}arbi=arbi.next;if(fst&&arbi==null){arbi=this.c_arbiters_true.head;fst=false}}}},precb:null,prelisteners:null,narrowPhase:function(s1,s2,stat,in_arb,continuous){var _gthis=this;var ret=null;var b1=s1.body;var b2=s2.body;var con_ignore;con_ignore=false;var cx_ite=b1.constraints.head;while(cx_ite!=null){var con=cx_ite.elt;if(con.ignore&&con.pair_exists(b1.id,b2.id)){con_ignore=true;break}cx_ite=cx_ite.next}var itype;var itype1;if(!con_ignore){var cur=s1;while(cur!=null&&cur.group==null)if(cur.ishape!=null){cur=cur.ishape.body}else if(cur.icompound!=null){cur=cur.icompound.compound}else{cur=cur.ibody.compound}var g1=cur==null?null:cur.group;var itype2;if(g1==null){itype2=false}else{var cur1=s2;while(cur1!=null&&cur1.group==null)if(cur1.ishape!=null){cur1=cur1.ishape.body}else if(cur1.icompound!=null){cur1=cur1.icompound.compound}else{cur1=cur1.ibody.compound}var g2=cur1==null?null:cur1.group;if(g2==null){itype2=false}else{var ret1=false;while(g1!=null&&g2!=null){if(g1==g2){ret1=g1.ignore;break}if(g1.depth<g2.depth){g2=g2.group}else{g1=g1.group}}itype2=ret1}}itype1=!itype2}else{itype1=false}if(itype1){var itype3;if(s1.sensorEnabled||s2.sensorEnabled){var _this=s1.filter;var x=s2.filter;itype3=(_this.sensorMask&x.sensorGroup)!=0&&(x.sensorMask&_this.sensorGroup)!=0}else{itype3=false}if(itype3){itype=2}else{var itype4;if(s1.fluidEnabled||s2.fluidEnabled){var _this1=s1.filter;var x1=s2.filter;itype4=(_this1.fluidMask&x1.fluidGroup)!=0&&(x1.fluidMask&_this1.fluidGroup)!=0}else{itype4=false}if(itype4&&!(b1.imass==0&&b2.imass==0&&b1.iinertia==0&&b2.iinertia==0)){itype=0}else{var _this2=s1.filter;var x2=s2.filter;itype=(_this2.collisionMask&x2.collisionGroup)!=0&&(x2.collisionMask&_this2.collisionGroup)!=0&&!(b1.imass==0&&b2.imass==0&&b1.iinertia==0&&b2.iinertia==0)?1:-1}}}else{itype=-1}if(itype!=-1){var sa;var sb;if(s1.type>s2.type){sa=s2;sb=s1}else if(s1.type==s2.type){if(s1.id<s2.id){sa=s1;sb=s2}else{sb=s1;sa=s2}}else{sa=s1;sb=s2}var reverse=sa==s2;if(itype==0){var xarb;if(in_arb==null){var ret2=null;var cx_ite1=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;while(cx_ite1!=null){var arb=cx_ite1.elt;if(arb.id==sa.id&&arb.di==sb.id){ret2=arb;break}cx_ite1=cx_ite1.next}xarb=ret2}else{xarb=in_arb}var first=xarb==null;var arb1;var swapped=false;if(first){if(zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool==null){arb1=new zpp_$nape_dynamics_ZPP_$FluidArbiter}else{arb1=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=arb1.next;arb1.next=null}}else if(xarb.fluidarb==null){xarb.cleared=true;var _this3=xarb.b1.arbiters;var pre=null;var cur2=_this3.head;while(cur2!=null){if(cur2.elt==xarb){var old;var ret3;if(pre==null){old=_this3.head;ret3=old.next;_this3.head=ret3;if(_this3.head==null){_this3.pushmod=true}}else{old=pre.next;ret3=old.next;pre.next=ret3;if(ret3==null){_this3.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;_this3.modified=true;_this3.length--;_this3.pushmod=true;break}pre=cur2;cur2=cur2.next}var _this4=xarb.b2.arbiters;var pre1=null;var cur3=_this4.head;while(cur3!=null){if(cur3.elt==xarb){var old1;var ret4;if(pre1==null){old1=_this4.head;ret4=old1.next;_this4.head=ret4;if(_this4.head==null){_this4.pushmod=true}}else{old1=pre1.next;ret4=old1.next;pre1.next=ret4;if(ret4==null){_this4.pushmod=true}}var o1=old1;o1.elt=null;o1.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o1;_this4.modified=true;_this4.length--;_this4.pushmod=true;break}pre1=cur3;cur3=cur3.next}if(xarb.pair!=null){xarb.pair.arb=null;xarb.pair=null}xarb.active=false;this.f_arbiters.modified=true;if(zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool==null){arb1=new zpp_$nape_dynamics_ZPP_$FluidArbiter}else{arb1=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=arb1.next;arb1.next=null}arb1.intchange=true;first=true;swapped=true}else{arb1=xarb.fluidarb}if(first||arb1.stamp!=this.stamp||continuous){arb1.stamp=this.stamp;if(zpp_$nape_geom_ZPP_$Collide.flowCollide(sa,sb,arb1)){if(first){var di=sb.id;arb1.b1=s1.body;arb1.ws1=s1;arb1.b2=s2.body;arb1.ws2=s2;arb1.id=sa.id;arb1.di=di;var _this5=arb1.b1.arbiters;var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret5.next;ret5.next=null}ret5.elt=arb1;var temp=ret5;temp.next=_this5.head;_this5.head=temp;_this5.modified=true;_this5.length++;var _this6=arb1.b2.arbiters;var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret6.next;ret6.next=null}ret6.elt=arb1;var temp1=ret6;temp1.next=_this6.head;_this6.head=temp1;_this6.modified=true;_this6.length++;arb1.active=true;arb1.present=0;arb1.cleared=false;arb1.sleeping=false;arb1.fresh=false;arb1.presentable=false;arb1.nx=0;arb1.ny=1;arb1.dampx=0;arb1.dampy=0;arb1.adamp=0;var _this7=this.f_arbiters;var ret7;if(zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool==null){ret7=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter}else{ret7=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=ret7.next;ret7.next=null}ret7.elt=arb1;var temp2=ret7;temp2.next=_this7.head;_this7.head=temp2;_this7.modified=true;_this7.length++;arb1.fresh=!swapped}else{arb1.fresh=arb1.up_stamp<this.stamp-1||arb1.endGenerated==this.stamp&&continuous}arb1.up_stamp=arb1.stamp;if(arb1.fresh||(arb1.immState&4)==0){arb1.immState=1;var anyimpure=false;var arbs1=arb1.ws1.id>arb1.ws2.id?arb1.ws2:arb1.ws1;var arbs2=arb1.ws1.id>arb1.ws2.id?arb1.ws1:arb1.ws2;var _this8=this.mrca1;while(_this8.head!=null){var ret8=_this8.head;_this8.head=ret8.next;ret8.elt=null;ret8.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret8;if(_this8.head==null){_this8.pushmod=true}_this8.modified=true;_this8.length--}_this8.pushmod=true;var _this9=this.mrca2;while(_this9.head!=null){var ret9=_this9.head;_this9.head=ret9.next;ret9.elt=null;ret9.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret9;if(_this9.head==null){_this9.pushmod=true}_this9.modified=true;_this9.length--}_this9.pushmod=true;if(arbs1.cbSet!=null){var _this10=this.mrca1;var ret10;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret10=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret10=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret10.next;ret10.next=null}ret10.elt=arbs1;var temp3=ret10;temp3.next=_this10.head;_this10.head=temp3;_this10.modified=true;_this10.length++}if(arbs1.body.cbSet!=null){var _this11=this.mrca1;var ret11;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret11=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret11=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret11.next;ret11.next=null}ret11.elt=arbs1.body;var temp4=ret11;temp4.next=_this11.head;_this11.head=temp4;_this11.modified=true;_this11.length++}if(arbs2.cbSet!=null){var _this12=this.mrca2;var ret12;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret12=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret12=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret12.next;ret12.next=null}ret12.elt=arbs2;var temp5=ret12;temp5.next=_this12.head;_this12.head=temp5;_this12.modified=true;_this12.length++}if(arbs2.body.cbSet!=null){var _this13=this.mrca2;var ret13;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret13=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret13=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret13.next;ret13.next=null}ret13.elt=arbs2.body;var temp6=ret13;temp6.next=_this13.head;_this13.head=temp6;_this13.modified=true;_this13.length++}var c1=arbs1.body.compound;var c2=arbs2.body.compound;while(c1!=c2)if((c1==null?0:c1.depth)<(c2==null?0:c2.depth)){if(c2.cbSet!=null){var _this14=this.mrca2;var ret14;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret14=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret14=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret14.next;ret14.next=null}ret14.elt=c2;var temp7=ret14;temp7.next=_this14.head;_this14.head=temp7;_this14.modified=true;_this14.length++}c2=c2.compound}else{if(c1.cbSet!=null){var _this15=this.mrca1;var ret15;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret15=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret15=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret15.next;ret15.next=null}ret15.elt=c1;var temp8=ret15;temp8.next=_this15.head;_this15.head=temp8;_this15.modified=true;_this15.length++}c1=c1.compound}var cx_ite2=this.mrca1.head;while(cx_ite2!=null){var i1=cx_ite2.elt;var cx_ite3=this.mrca2.head;while(cx_ite3!=null){var i2=cx_ite3.elt;var cb1=i1.cbSet;var cb2=i2.cbSet;var ret16=null;var cx_ite4=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite4!=null){var p=cx_ite4.elt;if(p.a==cb1&&p.b==cb2||p.a==cb2&&p.b==cb1){ret16=p;break}cx_ite4=cx_ite4.next}if(ret16==null){var ret17;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret17=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret17=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret17.next;ret17.next=null}ret17.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret17.a=cb1;ret17.b=cb2}else{ret17.a=cb2;ret17.b=cb1}ret16=ret17;cb1.cbpairs.add(ret16);if(cb2!=cb1){cb2.cbpairs.add(ret16)}}if(ret16.zip_listeners){ret16.zip_listeners=false;ret16.__validate()}if(ret16.listeners.head==null){cx_ite3=cx_ite3.next;continue}var callbackset=null;var ncallbackset=null;var _this16=this.prelisteners;while(_this16.head!=null){var ret18=_this16.head;_this16.head=ret18.next;ret18.elt=null;ret18.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret18;if(_this16.head==null){_this16.pushmod=true}_this16.modified=true;_this16.length--}_this16.pushmod=true;var lite=null;var ret19=null;var cx_ite5=(cb1.cbpairs.length<cb2.cbpairs.length?cb1.cbpairs:cb2.cbpairs).head;while(cx_ite5!=null){var p1=cx_ite5.elt;if(p1.a==cb1&&p1.b==cb2||p1.a==cb2&&p1.b==cb1){ret19=p1;break}cx_ite5=cx_ite5.next}if(ret19==null){var ret20;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret20=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret20=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret20.next;ret20.next=null}ret20.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb1,cb2)){ret20.a=cb1;ret20.b=cb2}else{ret20.a=cb2;ret20.b=cb1}ret19=ret20;cb1.cbpairs.add(ret19);if(cb2!=cb1){cb2.cbpairs.add(ret19)}}if(ret19.zip_listeners){ret19.zip_listeners=false;ret19.__validate()}var cx_ite6=ret19.listeners.head;while(cx_ite6!=null){var x3=cx_ite6.elt;if(x3.event==5){if((x3.itype&4)!=0){var _this17=_gthis.prelisteners;var ret21;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret21=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret21=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret21.next;ret21.next=null}ret21.elt=x3;var temp9=ret21;if(lite==null){temp9.next=_this17.head;_this17.head=temp9}else{temp9.next=lite.next;lite.next=temp9}_this17.pushmod=_this17.modified=true;_this17.length++;lite=temp9;anyimpure=anyimpure||!x3.pure}}cx_ite6=cx_ite6.next}if(this.prelisteners.head==null){cx_ite3=cx_ite3.next;continue}callbackset=zpp_$nape_phys_ZPP_$Interactor.get(i1,i2);if(callbackset==null){ncallbackset=zpp_$nape_space_ZPP_$CallbackSet.get(i1,i2);this.add_callbackset(ncallbackset)}if(callbackset==null||(callbackset.FLUIDstamp!=this.stamp||continuous)&&(callbackset.FLUIDstate&4)==0){if(ncallbackset!=null){callbackset=ncallbackset}if(callbackset!=null){var cx_ite7=this.prelisteners.head;while(cx_ite7!=null){if(cx_ite7.elt.itype==7){callbackset.COLLISIONstamp=this.stamp;callbackset.SENSORstamp=this.stamp;callbackset.FLUIDstamp=this.stamp}else{callbackset.FLUIDstamp=this.stamp}cx_ite7=cx_ite7.next}}var pact=arb1.active;arb1.active=true;this.precb.zpp_inner.pre_arbiter=arb1;this.precb.zpp_inner.set=callbackset;var cx_ite8=this.prelisteners.head;while(cx_ite8!=null){var listener=cx_ite8.elt;this.precb.zpp_inner.listener=listener;var cb=this.precb.zpp_inner;var o11=callbackset.int1;var o2=callbackset.int2;var ret22;var _this18=listener.options1;var xs=o11.cbTypes;if(_this18.nonemptyintersection(xs,_this18.includes)&&!_this18.nonemptyintersection(xs,_this18.excludes)){var _this19=listener.options2;var xs1=o2.cbTypes;ret22=_this19.nonemptyintersection(xs1,_this19.includes)&&!_this19.nonemptyintersection(xs1,_this19.excludes)}else{ret22=false}if(ret22){cb.int1=o11;cb.int2=o2}else{cb.int1=o2;cb.int2=o11}this.precb.zpp_inner.pre_swapped=i1!=this.precb.zpp_inner.int1;var ret23=listener.handlerp(this.precb);if(ret23!=null){var ret24;if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret23==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT){ret24=5}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret23==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE){ret24=1}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}ret24=ret23==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2}}arb1.immState=ret24}cx_ite8=cx_ite8.next}arb1.active=pact;if(callbackset!=null){var cx_ite9=this.prelisteners.head;while(cx_ite9!=null){if(cx_ite9.elt.itype==7){callbackset.COLLISIONstate=arb1.immState;callbackset.SENSORstate=arb1.immState;callbackset.FLUIDstate=arb1.immState}else{callbackset.FLUIDstate=arb1.immState}cx_ite9=cx_ite9.next}}}else if(callbackset==null){if((arb1.immState&4)==0){arb1.immState=1}}else{arb1.immState=callbackset.FLUIDstate}cx_ite3=cx_ite3.next}cx_ite2=cx_ite2.next}if(anyimpure&&(arb1.immState&4)==0){if(arb1.b1.type==2){var o3=arb1.b1;if(!o3.world){o3.component.waket=this.stamp+(this.midstep?0:1);if(o3.type==3){o3.kinematicDelaySleep=true}if(o3.component.sleeping){this.really_wake(o3,false)}}}if(arb1.b1.type==2){var o4=arb1.b2;if(!o4.world){o4.component.waket=this.stamp+(this.midstep?0:1);if(o4.type==3){o4.kinematicDelaySleep=true}if(o4.component.sleeping){this.really_wake(o4,false)}}}}}if((arb1.immState&1)!=0){if(arb1.b1.type==2&&arb1.b1.component.sleeping){var o5=arb1.b1;if(!o5.world){o5.component.waket=this.stamp+(this.midstep?0:1);if(o5.type==3){o5.kinematicDelaySleep=true}if(o5.component.sleeping){this.really_wake(o5,false)}}}if(arb1.b2.type==2&&arb1.b2.component.sleeping){var o6=arb1.b2;if(!o6.world){o6.component.waket=this.stamp+(this.midstep?0:1);if(o6.type==3){o6.kinematicDelaySleep=true}if(o6.component.sleeping){this.really_wake(o6,false)}}}}if(arb1.sleeping){arb1.sleeping=false;var _this20=this.f_arbiters;var ret25;if(zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool==null){ret25=new zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter}else{ret25=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=ret25.next;ret25.next=null}ret25.elt=arb1;var temp10=ret25;temp10.next=_this20.head;_this20.head=temp10;_this20.modified=true;_this20.length++}ret=arb1}else if(first){var o7=arb1;o7.next=zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$FluidArbiter.zpp_pool=o7;ret=null}else{ret=arb1}}else{ret=arb1}}else if(itype==1){var carbs=stat?this.c_arbiters_true:this.c_arbiters_false;var xarb1;if(in_arb==null){var ret26=null;var cx_ite10=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;while(cx_ite10!=null){var arb2=cx_ite10.elt;if(arb2.id==sa.id&&arb2.di==sb.id){ret26=arb2;break}cx_ite10=cx_ite10.next}xarb1=ret26}else{xarb1=in_arb}var first1=xarb1==null;var arb3;var swapped1=false;if(first1){if(zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool==null){arb3=new zpp_$nape_dynamics_ZPP_$ColArbiter}else{arb3=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=arb3.next;arb3.next=null}arb3.stat=stat}else if(xarb1.colarb==null){xarb1.cleared=true;var _this21=xarb1.b1.arbiters;var pre2=null;var cur4=_this21.head;while(cur4!=null){if(cur4.elt==xarb1){var old2;var ret27;if(pre2==null){old2=_this21.head;ret27=old2.next;_this21.head=ret27;if(_this21.head==null){_this21.pushmod=true}}else{old2=pre2.next;ret27=old2.next;pre2.next=ret27;if(ret27==null){_this21.pushmod=true}}var o8=old2;o8.elt=null;o8.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o8;_this21.modified=true;_this21.length--;_this21.pushmod=true;break}pre2=cur4;cur4=cur4.next}var _this22=xarb1.b2.arbiters;var pre3=null;var cur5=_this22.head;while(cur5!=null){if(cur5.elt==xarb1){var old3;var ret28;if(pre3==null){old3=_this22.head;ret28=old3.next;_this22.head=ret28;if(_this22.head==null){_this22.pushmod=true}}else{old3=pre3.next;ret28=old3.next;pre3.next=ret28;if(ret28==null){_this22.pushmod=true}}var o9=old3;o9.elt=null;o9.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o9;_this22.modified=true;_this22.length--;_this22.pushmod=true;break}pre3=cur5;cur5=cur5.next}if(xarb1.pair!=null){xarb1.pair.arb=null;xarb1.pair=null}xarb1.active=false;this.f_arbiters.modified=true;if(zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool==null){arb3=new zpp_$nape_dynamics_ZPP_$ColArbiter}else{arb3=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=arb3.next;arb3.next=null}arb3.intchange=true;arb3.stat=stat;first1=true;swapped1=true}else{arb3=xarb1.colarb;reverse=sa!=arb3.s1;if(arb3.stat!=stat){arb3.stat=stat;if(!arb3.sleeping){(stat?this.c_arbiters_false:this.c_arbiters_true).remove(arb3);carbs.add(arb3)}}}if(first1||arb3.stamp!=this.stamp||continuous){arb3.stamp=this.stamp;if(zpp_$nape_geom_ZPP_$Collide.contactCollide(sa,sb,arb3,reverse)){if(first1){var di1=sb.id;arb3.b1=s1.body;arb3.ws1=s1;arb3.b2=s2.body;arb3.ws2=s2;arb3.id=sa.id;arb3.di=di1;var _this23=arb3.b1.arbiters;var ret29;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret29=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret29=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret29.next;ret29.next=null}ret29.elt=arb3;var temp11=ret29;temp11.next=_this23.head;_this23.head=temp11;_this23.modified=true;_this23.length++;var _this24=arb3.b2.arbiters;var ret30;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret30=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret30=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret30.next;ret30.next=null}ret30.elt=arb3;var temp12=ret30;temp12.next=_this24.head;_this24.head=temp12;_this24.modified=true;_this24.length++;arb3.active=true;arb3.present=0;arb3.cleared=false;arb3.sleeping=false;arb3.fresh=false;arb3.presentable=false;arb3.s1=s1;arb3.s2=s2;if(!arb3.userdef_restitution){if(arb3.s1.material.elasticity<=-Infinity||arb3.s2.material.elasticity<=-Infinity){arb3.restitution=0}else if(arb3.s1.material.elasticity>=Infinity||arb3.s2.material.elasticity>=Infinity){arb3.restitution=1}else{arb3.restitution=(arb3.s1.material.elasticity+arb3.s2.material.elasticity)/2}if(arb3.restitution<0){arb3.restitution=0}if(arb3.restitution>1){arb3.restitution=1}}if(!arb3.userdef_dyn_fric){arb3.dyn_fric=Math.sqrt(arb3.s1.material.dynamicFriction*arb3.s2.material.dynamicFriction)}if(!arb3.userdef_stat_fric){arb3.stat_fric=Math.sqrt(arb3.s1.material.staticFriction*arb3.s2.material.staticFriction)}if(!arb3.userdef_rfric){arb3.rfric=Math.sqrt(arb3.s1.material.rollingFriction*arb3.s2.material.rollingFriction)}var ret31;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret31=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret31=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret31.next;ret31.next=null}ret31.elt=arb3;var temp13=ret31;temp13.next=carbs.head;carbs.head=temp13;carbs.modified=true;carbs.length++;arb3.fresh=!swapped1}else{arb3.fresh=arb3.up_stamp<this.stamp-1||arb3.endGenerated==this.stamp&&continuous}arb3.up_stamp=arb3.stamp;if(arb3.fresh||(arb3.immState&4)==0){arb3.immState=1;var anyimpure1=false;var arbs11=arb3.ws1.id>arb3.ws2.id?arb3.ws2:arb3.ws1;var arbs21=arb3.ws1.id>arb3.ws2.id?arb3.ws1:arb3.ws2;var _this25=this.mrca1;while(_this25.head!=null){var ret32=_this25.head;_this25.head=ret32.next;ret32.elt=null;ret32.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret32;if(_this25.head==null){_this25.pushmod=true}_this25.modified=true;_this25.length--}_this25.pushmod=true;var _this26=this.mrca2;while(_this26.head!=null){var ret33=_this26.head;_this26.head=ret33.next;ret33.elt=null;ret33.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret33;if(_this26.head==null){_this26.pushmod=true}_this26.modified=true;_this26.length--}_this26.pushmod=true;if(arbs11.cbSet!=null){var _this27=this.mrca1;var ret34;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret34=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret34=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret34.next;ret34.next=null}ret34.elt=arbs11;var temp14=ret34;temp14.next=_this27.head;_this27.head=temp14;_this27.modified=true;_this27.length++}if(arbs11.body.cbSet!=null){var _this28=this.mrca1;var ret35;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret35=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret35=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret35.next;ret35.next=null}ret35.elt=arbs11.body;var temp15=ret35;temp15.next=_this28.head;_this28.head=temp15;_this28.modified=true;_this28.length++}if(arbs21.cbSet!=null){var _this29=this.mrca2;var ret36;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret36=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret36=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret36.next;ret36.next=null}ret36.elt=arbs21;var temp16=ret36;temp16.next=_this29.head;_this29.head=temp16;_this29.modified=true;_this29.length++}if(arbs21.body.cbSet!=null){var _this30=this.mrca2;var ret37;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret37=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret37=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret37.next;ret37.next=null}ret37.elt=arbs21.body;var temp17=ret37;temp17.next=_this30.head;_this30.head=temp17;_this30.modified=true;_this30.length++}var c11=arbs11.body.compound;var c21=arbs21.body.compound;while(c11!=c21)if((c11==null?0:c11.depth)<(c21==null?0:c21.depth)){if(c21.cbSet!=null){var _this31=this.mrca2;var ret38;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret38=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret38=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret38.next;ret38.next=null}ret38.elt=c21;var temp18=ret38;temp18.next=_this31.head;_this31.head=temp18;_this31.modified=true;_this31.length++}c21=c21.compound}else{if(c11.cbSet!=null){var _this32=this.mrca1;var ret39;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret39=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret39=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret39.next;ret39.next=null}ret39.elt=c11;var temp19=ret39;temp19.next=_this32.head;_this32.head=temp19;_this32.modified=true;_this32.length++}c11=c11.compound}var cx_ite11=this.mrca1.head;while(cx_ite11!=null){var i11=cx_ite11.elt;var cx_ite12=this.mrca2.head;while(cx_ite12!=null){var i21=cx_ite12.elt;var cb11=i11.cbSet;var cb21=i21.cbSet;var ret40=null;var cx_ite13=(cb11.cbpairs.length<cb21.cbpairs.length?cb11.cbpairs:cb21.cbpairs).head;while(cx_ite13!=null){var p2=cx_ite13.elt;if(p2.a==cb11&&p2.b==cb21||p2.a==cb21&&p2.b==cb11){ret40=p2;break}cx_ite13=cx_ite13.next}if(ret40==null){var ret41;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret41=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret41=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret41.next;ret41.next=null}ret41.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb11,cb21)){ret41.a=cb11;ret41.b=cb21}else{ret41.a=cb21;ret41.b=cb11}ret40=ret41;cb11.cbpairs.add(ret40);if(cb21!=cb11){cb21.cbpairs.add(ret40)}}if(ret40.zip_listeners){ret40.zip_listeners=false;ret40.__validate()}if(ret40.listeners.head==null){cx_ite12=cx_ite12.next;continue}var callbackset1=null;var ncallbackset1=null;var _this33=this.prelisteners;while(_this33.head!=null){var ret42=_this33.head;_this33.head=ret42.next;ret42.elt=null;ret42.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret42;if(_this33.head==null){_this33.pushmod=true}_this33.modified=true;_this33.length--}_this33.pushmod=true;var lite1=null;var ret43=null;var cx_ite14=(cb11.cbpairs.length<cb21.cbpairs.length?cb11.cbpairs:cb21.cbpairs).head;while(cx_ite14!=null){var p3=cx_ite14.elt;if(p3.a==cb11&&p3.b==cb21||p3.a==cb21&&p3.b==cb11){ret43=p3;break}cx_ite14=cx_ite14.next}if(ret43==null){var ret44;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret44=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret44=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret44.next;ret44.next=null}ret44.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb11,cb21)){ret44.a=cb11;ret44.b=cb21}else{ret44.a=cb21;ret44.b=cb11}ret43=ret44;cb11.cbpairs.add(ret43);if(cb21!=cb11){cb21.cbpairs.add(ret43)}}if(ret43.zip_listeners){ret43.zip_listeners=false;ret43.__validate()}var cx_ite15=ret43.listeners.head;while(cx_ite15!=null){var x4=cx_ite15.elt;if(x4.event==5){if((x4.itype&1)!=0){var _this34=_gthis.prelisteners;var ret45;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret45=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret45=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret45.next;ret45.next=null}ret45.elt=x4;var temp20=ret45;if(lite1==null){temp20.next=_this34.head;_this34.head=temp20}else{temp20.next=lite1.next;lite1.next=temp20}_this34.pushmod=_this34.modified=true;_this34.length++;lite1=temp20;anyimpure1=anyimpure1||!x4.pure}}cx_ite15=cx_ite15.next}if(this.prelisteners.head==null){cx_ite12=cx_ite12.next;continue}callbackset1=zpp_$nape_phys_ZPP_$Interactor.get(i11,i21);if(callbackset1==null){ncallbackset1=zpp_$nape_space_ZPP_$CallbackSet.get(i11,i21);this.add_callbackset(ncallbackset1)}if(callbackset1==null||(callbackset1.COLLISIONstamp!=this.stamp||continuous)&&(callbackset1.COLLISIONstate&4)==0){if(ncallbackset1!=null){callbackset1=ncallbackset1}if(callbackset1!=null){var cx_ite16=this.prelisteners.head;while(cx_ite16!=null){if(cx_ite16.elt.itype==7){callbackset1.COLLISIONstamp=this.stamp;callbackset1.SENSORstamp=this.stamp;callbackset1.FLUIDstamp=this.stamp}else{callbackset1.COLLISIONstamp=this.stamp}cx_ite16=cx_ite16.next}}var pact1=arb3.active;arb3.active=true;var fst=true;var pre4=null;var prei=null;var cx_itei=arb3.innards.next;arb3.hc2=false;var cx_ite17=arb3.contacts.next;while(cx_ite17!=null){var c=cx_ite17;if(c.stamp+nape_Config.arbiterExpirationDelay<arb3.stamp){var _this35=arb3.contacts;var old4;var ret46;if(pre4==null){old4=_this35.next;ret46=old4.next;_this35.next=ret46;if(_this35.next==null){_this35.pushmod=true}}else{old4=pre4.next;ret46=old4.next;pre4.next=ret46;if(ret46==null){_this35.pushmod=true}}old4._inuse=false;_this35.modified=true;_this35.length--;_this35.pushmod=true;cx_ite17=ret46;var _this36=arb3.innards;var old5;var ret47;if(prei==null){old5=_this36.next;ret47=old5.next;_this36.next=ret47;if(_this36.next==null){_this36.pushmod=true}}else{old5=prei.next;ret47=old5.next;prei.next=ret47;if(ret47==null){_this36.pushmod=true}}old5._inuse=false;_this36.modified=true;_this36.length--;_this36.pushmod=true;cx_itei=ret47;c.arbiter=null;c.next=zpp_$nape_dynamics_ZPP_$Contact.zpp_pool;zpp_$nape_dynamics_ZPP_$Contact.zpp_pool=c;continue}var ci=c.inner;var pact2=c.active;c.active=c.stamp==arb3.stamp;if(c.active){if(fst){fst=false;arb3.c1=ci;arb3.oc1=c}else{arb3.hc2=true;arb3.c2=ci;arb3.oc2=c}}if(pact2!=c.active){arb3.contacts.modified=true}pre4=cx_ite17;prei=cx_itei;cx_itei=cx_itei.next;cx_ite17=cx_ite17.next}if(arb3.hc2){arb3.hpc2=true;if(arb3.oc1.posOnly){var tmp=arb3.c1;arb3.c1=arb3.c2;arb3.c2=tmp;var tmp2=arb3.oc1;arb3.oc1=arb3.oc2;arb3.oc2=tmp2;arb3.hc2=false}else if(arb3.oc2.posOnly){arb3.hc2=false}}else{arb3.hpc2=false}this.precb.zpp_inner.pre_arbiter=arb3;this.precb.zpp_inner.set=callbackset1;var cx_ite18=this.prelisteners.head;while(cx_ite18!=null){var listener1=cx_ite18.elt;this.precb.zpp_inner.listener=listener1;var cb3=this.precb.zpp_inner;var o12=callbackset1.int1;var o21=callbackset1.int2;var ret48;var _this37=listener1.options1;var xs2=o12.cbTypes;if(_this37.nonemptyintersection(xs2,_this37.includes)&&!_this37.nonemptyintersection(xs2,_this37.excludes)){var _this38=listener1.options2;var xs3=o21.cbTypes;ret48=_this38.nonemptyintersection(xs3,_this38.includes)&&!_this38.nonemptyintersection(xs3,_this38.excludes)}else{ret48=false}if(ret48){cb3.int1=o12;cb3.int2=o21}else{cb3.int1=o21;cb3.int2=o12}this.precb.zpp_inner.pre_swapped=i11!=this.precb.zpp_inner.int1;var ret49=listener1.handlerp(this.precb);if(ret49!=null){var ret50;if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret49==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT){ret50=5}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret49==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE){ret50=1}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}ret50=ret49==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2}}arb3.immState=ret50}cx_ite18=cx_ite18.next}arb3.active=pact1;if(callbackset1!=null){var cx_ite19=this.prelisteners.head;while(cx_ite19!=null){if(cx_ite19.elt.itype==7){callbackset1.COLLISIONstate=arb3.immState;callbackset1.SENSORstate=arb3.immState;callbackset1.FLUIDstate=arb3.immState}else{callbackset1.COLLISIONstate=arb3.immState}cx_ite19=cx_ite19.next}}}else if(callbackset1==null){if((arb3.immState&4)==0){arb3.immState=1}}else{arb3.immState=callbackset1.COLLISIONstate}cx_ite12=cx_ite12.next}cx_ite11=cx_ite11.next}if(anyimpure1&&(arb3.immState&4)==0){if(arb3.b1.type==2){var o10=arb3.b1;if(!o10.world){o10.component.waket=this.stamp+(this.midstep?0:1);if(o10.type==3){o10.kinematicDelaySleep=true}if(o10.component.sleeping){this.really_wake(o10,false)}}}if(arb3.b1.type==2){var o13=arb3.b2;if(!o13.world){o13.component.waket=this.stamp+(this.midstep?0:1);if(o13.type==3){o13.kinematicDelaySleep=true}if(o13.component.sleeping){this.really_wake(o13,false)}}}}}if((arb3.immState&1)!=0){if(arb3.b1.type==2&&arb3.b1.component.sleeping){var o14=arb3.b1;if(!o14.world){o14.component.waket=this.stamp+(this.midstep?0:1);if(o14.type==3){o14.kinematicDelaySleep=true}if(o14.component.sleeping){this.really_wake(o14,false)}}}if(arb3.b2.type==2&&arb3.b2.component.sleeping){var o15=arb3.b2;if(!o15.world){o15.component.waket=this.stamp+(this.midstep?0:1);if(o15.type==3){o15.kinematicDelaySleep=true}if(o15.component.sleeping){this.really_wake(o15,false)}}}}if(arb3.sleeping){arb3.sleeping=false;var ret51;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret51=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret51=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret51.next;ret51.next=null}ret51.elt=arb3;var temp21=ret51;temp21.next=carbs.head;carbs.head=temp21;carbs.modified=true;carbs.length++}ret=arb3}else if(first1){var o16=arb3;o16.userdef_dyn_fric=false;o16.userdef_stat_fric=false;o16.userdef_restitution=false;o16.userdef_rfric=false;o16.__ref_edge1=o16.__ref_edge2=null;o16.next=zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$ColArbiter.zpp_pool=o16;ret=null}else{ret=arb3}}else{ret=arb3}}else{var xarb2;if(in_arb==null){var ret52=null;var cx_ite20=(b1.arbiters.length<b2.arbiters.length?b1:b2).arbiters.head;while(cx_ite20!=null){var arb4=cx_ite20.elt;if(arb4.id==sa.id&&arb4.di==sb.id){ret52=arb4;break}cx_ite20=cx_ite20.next}xarb2=ret52}else{xarb2=in_arb}var first2=xarb2==null;var arb5;var swapped2=false;if(first2){if(zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool==null){arb5=new zpp_$nape_dynamics_ZPP_$SensorArbiter}else{arb5=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=arb5.next;arb5.next=null}}else if(xarb2.sensorarb==null){xarb2.cleared=true;var _this39=xarb2.b1.arbiters;var pre5=null;var cur6=_this39.head;while(cur6!=null){if(cur6.elt==xarb2){var old6;var ret53;if(pre5==null){old6=_this39.head;ret53=old6.next;_this39.head=ret53;if(_this39.head==null){_this39.pushmod=true}}else{old6=pre5.next;ret53=old6.next;pre5.next=ret53;if(ret53==null){_this39.pushmod=true}}var o17=old6;o17.elt=null;o17.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o17;_this39.modified=true;_this39.length--;_this39.pushmod=true;break}pre5=cur6;cur6=cur6.next}var _this40=xarb2.b2.arbiters;var pre6=null;var cur7=_this40.head;while(cur7!=null){if(cur7.elt==xarb2){var old7;var ret54;if(pre6==null){old7=_this40.head;ret54=old7.next;_this40.head=ret54;if(_this40.head==null){_this40.pushmod=true}}else{old7=pre6.next;ret54=old7.next;pre6.next=ret54;if(ret54==null){_this40.pushmod=true}}var o18=old7;o18.elt=null;o18.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o18;_this40.modified=true;_this40.length--;_this40.pushmod=true;break}pre6=cur7;cur7=cur7.next}if(xarb2.pair!=null){xarb2.pair.arb=null;xarb2.pair=null}xarb2.active=false;this.f_arbiters.modified=true;if(zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool==null){arb5=new zpp_$nape_dynamics_ZPP_$SensorArbiter}else{arb5=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=arb5.next;arb5.next=null}arb5.intchange=true;first2=true;swapped2=true}else{arb5=xarb2.sensorarb}if(first2||arb5.stamp!=this.stamp||continuous){arb5.stamp=this.stamp;if(zpp_$nape_geom_ZPP_$Collide.testCollide(sa,sb)){if(first2){var di2=sb.id;arb5.b1=s1.body;arb5.ws1=s1;arb5.b2=s2.body;arb5.ws2=s2;arb5.id=sa.id;arb5.di=di2;var _this41=arb5.b1.arbiters;var ret55;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret55=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret55=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret55.next;ret55.next=null}ret55.elt=arb5;var temp22=ret55;temp22.next=_this41.head;_this41.head=temp22;_this41.modified=true;_this41.length++;var _this42=arb5.b2.arbiters;var ret56;if(zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool==null){ret56=new zpp_$nape_util_ZNPNode_$ZPP_$Arbiter}else{ret56=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret56.next;ret56.next=null}ret56.elt=arb5;var temp23=ret56;temp23.next=_this42.head;_this42.head=temp23;_this42.modified=true;_this42.length++;arb5.active=true;arb5.present=0;arb5.cleared=false;arb5.sleeping=false;arb5.fresh=false;arb5.presentable=false;var _this43=this.s_arbiters;var ret57;if(zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool==null){ret57=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter}else{ret57=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=ret57.next;ret57.next=null}ret57.elt=arb5;var temp24=ret57;temp24.next=_this43.head;_this43.head=temp24;_this43.modified=true;_this43.length++;arb5.fresh=!swapped2}else{arb5.fresh=arb5.up_stamp<this.stamp-1||arb5.endGenerated==this.stamp&&continuous}arb5.up_stamp=arb5.stamp;if(arb5.fresh||(arb5.immState&4)==0){arb5.immState=1;var anyimpure2=false;var arbs12=arb5.ws1.id>arb5.ws2.id?arb5.ws2:arb5.ws1;var arbs22=arb5.ws1.id>arb5.ws2.id?arb5.ws1:arb5.ws2;var _this44=this.mrca1;while(_this44.head!=null){var ret58=_this44.head;_this44.head=ret58.next;ret58.elt=null;ret58.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret58;if(_this44.head==null){_this44.pushmod=true}_this44.modified=true;_this44.length--}_this44.pushmod=true;var _this45=this.mrca2;while(_this45.head!=null){var ret59=_this45.head;_this45.head=ret59.next;ret59.elt=null;ret59.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret59;if(_this45.head==null){_this45.pushmod=true}_this45.modified=true;_this45.length--}_this45.pushmod=true;if(arbs12.cbSet!=null){var _this46=this.mrca1;var ret60;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret60=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret60=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret60.next;ret60.next=null}ret60.elt=arbs12;var temp25=ret60;temp25.next=_this46.head;_this46.head=temp25;_this46.modified=true;_this46.length++}if(arbs12.body.cbSet!=null){var _this47=this.mrca1;var ret61;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret61=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret61=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret61.next;ret61.next=null}ret61.elt=arbs12.body;var temp26=ret61;temp26.next=_this47.head;_this47.head=temp26;_this47.modified=true;_this47.length++}if(arbs22.cbSet!=null){var _this48=this.mrca2;var ret62;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret62=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret62=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret62.next;ret62.next=null}ret62.elt=arbs22;var temp27=ret62;temp27.next=_this48.head;_this48.head=temp27;_this48.modified=true;_this48.length++}if(arbs22.body.cbSet!=null){var _this49=this.mrca2;var ret63;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret63=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret63=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret63.next;ret63.next=null}ret63.elt=arbs22.body;var temp28=ret63;temp28.next=_this49.head;_this49.head=temp28;_this49.modified=true;_this49.length++}var c12=arbs12.body.compound;var c22=arbs22.body.compound;while(c12!=c22)if((c12==null?0:c12.depth)<(c22==null?0:c22.depth)){if(c22.cbSet!=null){var _this50=this.mrca2;var ret64;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret64=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret64=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret64.next;ret64.next=null}ret64.elt=c22;var temp29=ret64;temp29.next=_this50.head;_this50.head=temp29;_this50.modified=true;_this50.length++}c22=c22.compound}else{if(c12.cbSet!=null){var _this51=this.mrca1;var ret65;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret65=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret65=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret65.next;ret65.next=null}ret65.elt=c12;var temp30=ret65;temp30.next=_this51.head;_this51.head=temp30;_this51.modified=true;_this51.length++}c12=c12.compound}var cx_ite21=this.mrca1.head;while(cx_ite21!=null){var i12=cx_ite21.elt;var cx_ite22=this.mrca2.head;while(cx_ite22!=null){var i22=cx_ite22.elt;var cb12=i12.cbSet;var cb22=i22.cbSet;var ret66=null;var cx_ite23=(cb12.cbpairs.length<cb22.cbpairs.length?cb12.cbpairs:cb22.cbpairs).head;while(cx_ite23!=null){var p4=cx_ite23.elt;if(p4.a==cb12&&p4.b==cb22||p4.a==cb22&&p4.b==cb12){ret66=p4;break}cx_ite23=cx_ite23.next}if(ret66==null){var ret67;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret67=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret67=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret67.next;ret67.next=null}ret67.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb12,cb22)){ret67.a=cb12;ret67.b=cb22}else{ret67.a=cb22;ret67.b=cb12}ret66=ret67;cb12.cbpairs.add(ret66);if(cb22!=cb12){cb22.cbpairs.add(ret66)}}if(ret66.zip_listeners){ret66.zip_listeners=false;ret66.__validate()}if(ret66.listeners.head==null){cx_ite22=cx_ite22.next;continue}var callbackset2=null;var ncallbackset2=null;var _this52=this.prelisteners;while(_this52.head!=null){var ret68=_this52.head;_this52.head=ret68.next;ret68.elt=null;ret68.next=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret68;if(_this52.head==null){_this52.pushmod=true}_this52.modified=true;_this52.length--}_this52.pushmod=true;var lite2=null;var ret69=null;var cx_ite24=(cb12.cbpairs.length<cb22.cbpairs.length?cb12.cbpairs:cb22.cbpairs).head;while(cx_ite24!=null){var p5=cx_ite24.elt;if(p5.a==cb12&&p5.b==cb22||p5.a==cb22&&p5.b==cb12){ret69=p5;break}cx_ite24=cx_ite24.next}if(ret69==null){var ret70;if(zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool==null){ret70=new zpp_$nape_callbacks_ZPP_$CbSetPair}else{ret70=zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool;zpp_$nape_callbacks_ZPP_$CbSetPair.zpp_pool=ret70.next;ret70.next=null}ret70.zip_listeners=true;if(zpp_$nape_callbacks_ZPP_$CbSet.setlt(cb12,cb22)){ret70.a=cb12;ret70.b=cb22}else{ret70.a=cb22;ret70.b=cb12}ret69=ret70;cb12.cbpairs.add(ret69);if(cb22!=cb12){cb22.cbpairs.add(ret69)}}if(ret69.zip_listeners){ret69.zip_listeners=false;ret69.__validate()}var cx_ite25=ret69.listeners.head;while(cx_ite25!=null){var x5=cx_ite25.elt;if(x5.event==5){if((x5.itype&2)!=0){var _this53=_gthis.prelisteners;var ret71;if(zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool==null){ret71=new zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener}else{ret71=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.zpp_pool=ret71.next;ret71.next=null}ret71.elt=x5;var temp31=ret71;if(lite2==null){temp31.next=_this53.head;_this53.head=temp31}else{temp31.next=lite2.next;lite2.next=temp31}_this53.pushmod=_this53.modified=true;_this53.length++;lite2=temp31;anyimpure2=anyimpure2||!x5.pure}}cx_ite25=cx_ite25.next}if(this.prelisteners.head==null){cx_ite22=cx_ite22.next;continue}callbackset2=zpp_$nape_phys_ZPP_$Interactor.get(i12,i22);if(callbackset2==null){ncallbackset2=zpp_$nape_space_ZPP_$CallbackSet.get(i12,i22);this.add_callbackset(ncallbackset2)}if(callbackset2==null||(callbackset2.SENSORstamp!=this.stamp||continuous)&&(callbackset2.SENSORstate&4)==0){if(ncallbackset2!=null){callbackset2=ncallbackset2}if(callbackset2!=null){var cx_ite26=this.prelisteners.head;while(cx_ite26!=null){if(cx_ite26.elt.itype==7){callbackset2.COLLISIONstamp=this.stamp;callbackset2.SENSORstamp=this.stamp;callbackset2.FLUIDstamp=this.stamp}else{callbackset2.SENSORstamp=this.stamp}cx_ite26=cx_ite26.next}}var pact3=arb5.active;arb5.active=true;this.precb.zpp_inner.pre_arbiter=arb5;this.precb.zpp_inner.set=callbackset2;var cx_ite27=this.prelisteners.head;while(cx_ite27!=null){var listener2=cx_ite27.elt;this.precb.zpp_inner.listener=listener2;var cb4=this.precb.zpp_inner;var o19=callbackset2.int1;var o22=callbackset2.int2;var ret72;var _this54=listener2.options1;var xs4=o19.cbTypes;if(_this54.nonemptyintersection(xs4,_this54.includes)&&!_this54.nonemptyintersection(xs4,_this54.excludes)){var _this55=listener2.options2;var xs5=o22.cbTypes;ret72=_this55.nonemptyintersection(xs5,_this55.includes)&&!_this55.nonemptyintersection(xs5,_this55.excludes)}else{ret72=false}if(ret72){cb4.int1=o19;cb4.int2=o22}else{cb4.int1=o22;cb4.int2=o19}this.precb.zpp_inner.pre_swapped=i12!=this.precb.zpp_inner.int1;var ret73=listener2.handlerp(this.precb);if(ret73!=null){var ret74;if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret73==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT){ret74=5}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}if(ret73==zpp_$nape_util_ZPP_$Flags.PreFlag_ACCEPT_ONCE){ret74=1}else{if(zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE=new nape_callbacks_PreFlag;zpp_$nape_util_ZPP_$Flags.internal=false}ret74=ret73==zpp_$nape_util_ZPP_$Flags.PreFlag_IGNORE?6:2}}arb5.immState=ret74}cx_ite27=cx_ite27.next}arb5.active=pact3;if(callbackset2!=null){var cx_ite28=this.prelisteners.head;while(cx_ite28!=null){if(cx_ite28.elt.itype==7){callbackset2.COLLISIONstate=arb5.immState;callbackset2.SENSORstate=arb5.immState;callbackset2.FLUIDstate=arb5.immState}else{callbackset2.SENSORstate=arb5.immState}cx_ite28=cx_ite28.next}}}else if(callbackset2==null){if((arb5.immState&4)==0){arb5.immState=1}}else{arb5.immState=callbackset2.SENSORstate}cx_ite22=cx_ite22.next}cx_ite21=cx_ite21.next}if(anyimpure2&&(arb5.immState&4)==0){if(arb5.b1.type!=1){var o20=arb5.b1;if(!o20.world){o20.component.waket=this.stamp+(this.midstep?0:1);if(o20.type==3){o20.kinematicDelaySleep=true}if(o20.component.sleeping){this.really_wake(o20,false)}}}if(arb5.b2.type!=1){var o23=arb5.b2;if(!o23.world){o23.component.waket=this.stamp+(this.midstep?0:1);if(o23.type==3){o23.kinematicDelaySleep=true}if(o23.component.sleeping){this.really_wake(o23,false)}}}}}if(arb5.sleeping){arb5.sleeping=false;var _this56=this.s_arbiters;var ret75;if(zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool==null){ret75=new zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter}else{ret75=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=ret75.next;ret75.next=null}ret75.elt=arb5;var temp32=ret75;temp32.next=_this56.head;_this56.head=temp32;_this56.modified=true;_this56.length++}ret=arb5}else if(first2){var o24=arb5;o24.next=zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool;zpp_$nape_dynamics_ZPP_$SensorArbiter.zpp_pool=o24;ret=null}else{ret=arb5}}else{ret=arb5}}}return ret},mrca1:null,mrca2:null,MRCA_chains:function(s1,s2){var _this=this.mrca1;while(_this.head!=null){var ret=_this.head;_this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret;if(_this.head==null){_this.pushmod=true}_this.modified=true;_this.length--}_this.pushmod=true;var _this1=this.mrca2;while(_this1.head!=null){var ret1=_this1.head;_this1.head=ret1.next;ret1.elt=null;ret1.next=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret1;if(_this1.head==null){_this1.pushmod=true}_this1.modified=true;_this1.length--}_this1.pushmod=true;if(s1.cbSet!=null){var _this2=this.mrca1;var ret2;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret2=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret2=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret2.next;ret2.next=null}ret2.elt=s1;var temp=ret2;temp.next=_this2.head;_this2.head=temp;_this2.modified=true;_this2.length++}if(s1.body.cbSet!=null){var _this3=this.mrca1;var ret3;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret3=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret3=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret3.next;ret3.next=null}ret3.elt=s1.body;var temp1=ret3;temp1.next=_this3.head;_this3.head=temp1;_this3.modified=true;_this3.length++}if(s2.cbSet!=null){var _this4=this.mrca2;var ret4;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret4=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret4=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret4.next;ret4.next=null}ret4.elt=s2;var temp2=ret4;temp2.next=_this4.head;_this4.head=temp2;_this4.modified=true;_this4.length++}if(s2.body.cbSet!=null){var _this5=this.mrca2;var ret5;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret5=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret5=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret5.next;ret5.next=null}ret5.elt=s2.body;var temp3=ret5;temp3.next=_this5.head;_this5.head=temp3;_this5.modified=true;_this5.length++}var c1=s1.body.compound;var c2=s2.body.compound;while(c1!=c2)if((c1==null?0:c1.depth)<(c2==null?0:c2.depth)){if(c2.cbSet!=null){var _this6=this.mrca2;var ret6;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret6=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret6=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret6.next;ret6.next=null}ret6.elt=c2;var temp4=ret6;temp4.next=_this6.head;_this6.head=temp4;_this6.modified=true;_this6.length++}c2=c2.compound}else{if(c1.cbSet!=null){var _this7=this.mrca1;var ret7;if(zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool==null){ret7=new zpp_$nape_util_ZNPNode_$ZPP_$Interactor}else{ret7=zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.zpp_pool=ret7.next;ret7.next=null}ret7.elt=c1;var temp5=ret7;temp5.next=_this7.head;_this7.head=temp5;_this7.modified=true;_this7.length++}c1=c1.compound}},__class__:zpp_$nape_space_ZPP_$Space};var zpp_$nape_space_ZPP_$SweepData=function(){this.aabb=null;this.shape=null;this.prev=null;this.next=null};$hxClasses["zpp_nape.space.ZPP_SweepData"]=zpp_$nape_space_ZPP_$SweepData;zpp_$nape_space_ZPP_$SweepData.__name__="zpp_nape.space.ZPP_SweepData";zpp_$nape_space_ZPP_$SweepData.prototype={next:null,prev:null,shape:null,aabb:null,__class__:zpp_$nape_space_ZPP_$SweepData};var zpp_$nape_space_ZPP_$SweepPhase=function(space){this.list=null;zpp_$nape_space_ZPP_$Broadphase.call(this);this.space=space;this.is_sweep=true;this.sweep=this};$hxClasses["zpp_nape.space.ZPP_SweepPhase"]=zpp_$nape_space_ZPP_$SweepPhase;zpp_$nape_space_ZPP_$SweepPhase.__name__="zpp_nape.space.ZPP_SweepPhase";zpp_$nape_space_ZPP_$SweepPhase.__super__=zpp_$nape_space_ZPP_$Broadphase;zpp_$nape_space_ZPP_$SweepPhase.prototype=$extend(zpp_$nape_space_ZPP_$Broadphase.prototype,{list:null,__insert:function(shape){var dat;if(zpp_$nape_space_ZPP_$SweepData.zpp_pool==null){dat=new zpp_$nape_space_ZPP_$SweepData}else{dat=zpp_$nape_space_ZPP_$SweepData.zpp_pool;zpp_$nape_space_ZPP_$SweepData.zpp_pool=dat.next;dat.next=null}shape.sweep=dat;dat.shape=shape;dat.aabb=shape.aabb;dat.next=this.list;if(this.list!=null){this.list.prev=dat}this.list=dat},__remove:function(shape){var dat=shape.sweep;if(dat.prev==null){this.list=dat.next}else{dat.prev.next=dat.next}if(dat.next!=null){dat.next.prev=dat.prev}shape.sweep=null;dat.prev=null;dat.shape=null;dat.aabb=null;dat.next=zpp_$nape_space_ZPP_$SweepData.zpp_pool;zpp_$nape_space_ZPP_$SweepData.zpp_pool=dat},sync_broadphase:function(){this.space.validation();if(this.list!=null){var a=this.list.next;while(a!=null){var n=a.next;var b=a.prev;if(a.aabb.minx>b.aabb.minx){a=n;continue}while(b.prev!=null&&b.prev.aabb.minx>a.aabb.minx)b=b.prev;var prev=a.prev;prev.next=a.next;if(a.next!=null){a.next.prev=prev}if(b.prev==null){a.prev=null;this.list=a;a.next=b;b.prev=a}else{a.prev=b.prev;b.prev=a;a.prev.next=a;a.next=b}a=n}}},broadphase:function(space,discrete){if(this.list!=null){var a=this.list.next;while(a!=null){var n=a.next;var b=a.prev;if(a.aabb.minx>b.aabb.minx){a=n;continue}while(b.prev!=null&&b.prev.aabb.minx>a.aabb.minx)b=b.prev;var prev=a.prev;prev.next=a.next;if(a.next!=null){a.next.prev=prev}if(b.prev==null){a.prev=null;this.list=a;a.next=b;b.prev=a}else{a.prev=b.prev;b.prev=a;a.prev.next=a;a.next=b}a=n}var d1=this.list;while(d1!=null){var d2=d1.next;var s1=d1.shape;var b1=s1.body;var bottom=d1.aabb.maxx;while(d2!=null){if(d2.aabb.minx>bottom){break}var s2=d2.shape;var b2=s2.body;if(b2==b1){d2=d2.next;continue}if(b1.type==1&&b2.type==1){d2=d2.next;continue}if(b1.component.sleeping&&b2.component.sleeping){d2=d2.next;continue}var _this=s1.aabb;var x=s2.aabb;if(!(x.miny>_this.maxy||_this.miny>x.maxy)){if(discrete){space.narrowPhase(s1,s2,b1.type!=2||b2.type!=2,null,false)}else{space.continuousEvent(s1,s2,b1.type!=2||b2.type!=2,null,false)}}d2=d2.next}d1=d1.next}}},clear:function(){while(this.list!=null){this.list.shape.removedFromSpace();this.__remove(this.list.shape)}},bodiesUnderPoint:function(x,y,filter,output){this.sync_broadphase();var ret;if(zpp_$nape_geom_ZPP_$Vec2.zpp_pool==null){ret=new zpp_$nape_geom_ZPP_$Vec2}else{ret=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=ret.next;ret.next=null}ret.weak=false;ret._immutable=false;ret.x=x;ret.y=y;var v=ret;var ret1=output==null?new nape_phys_BodyList:output;var a=this.list;while(a!=null&&a.aabb.minx>x)a=a.next;while(a!=null&&a.aabb.minx<=x){if(a.aabb.maxx>=x&&a.aabb.miny<=y&&a.aabb.maxy>=y){var shape=a.shape;var body=shape.body.outer;if(!ret1.has(body)){var tmp;if(filter!=null){var _this=shape.filter;tmp=(_this.collisionMask&filter.collisionGroup)!=0&&(filter.collisionMask&_this.collisionGroup)!=0}else{tmp=true}if(tmp){if(shape.type==0){if(zpp_$nape_geom_ZPP_$Collide.circleContains(shape.circle,v)){ret1.push(body)}}else if(zpp_$nape_geom_ZPP_$Collide.polyContains(shape.polygon,v)){ret1.push(body)}}}}a=a.next}if(v.outer!=null){v.outer.zpp_inner=null;v.outer=null}v._isimmutable=null;v._validate=null;v._invalidate=null;v.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=v;return ret1},__class__:zpp_$nape_space_ZPP_$SweepPhase});var zpp_$nape_util_ZNPList_$ZPP_$Compound=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Compound"]=zpp_$nape_util_ZNPList_$ZPP_$Compound;zpp_$nape_util_ZNPList_$ZPP_$Compound.__name__="zpp_nape.util.ZNPList_ZPP_Compound";zpp_$nape_util_ZNPList_$ZPP_$Compound.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Compound}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Compound.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Compound};var zpp_$nape_util_ZNPList_$ZPP_$AABBNode=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_AABBNode"]=zpp_$nape_util_ZNPList_$ZPP_$AABBNode;zpp_$nape_util_ZNPList_$ZPP_$AABBNode.__name__="zpp_nape.util.ZNPList_ZPP_AABBNode";zpp_$nape_util_ZNPList_$ZPP_$AABBNode.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$AABBNode}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$AABBNode};var zpp_$nape_util_ZNPList_$ZPP_$Edge=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Edge"]=zpp_$nape_util_ZNPList_$ZPP_$Edge;zpp_$nape_util_ZNPList_$ZPP_$Edge.__name__="zpp_nape.util.ZNPList_ZPP_Edge";zpp_$nape_util_ZNPList_$ZPP_$Edge.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Edge}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Edge}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Edge.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},reverse:function(){var cur=this.head;var pre=null;while(cur!=null){var nx=cur.next;cur.next=pre;this.head=cur;pre=cur;cur=nx}this.modified=true;this.pushmod=true},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Edge};var zpp_$nape_util_ZNPList_$ZPP_$AABBPair=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_AABBPair"]=zpp_$nape_util_ZNPList_$ZPP_$AABBPair;zpp_$nape_util_ZNPList_$ZPP_$AABBPair.__name__="zpp_nape.util.ZNPList_ZPP_AABBPair";zpp_$nape_util_ZNPList_$ZPP_$AABBPair.prototype={head:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},__class__:zpp_$nape_util_ZNPList_$ZPP_$AABBPair};var zpp_$nape_util_ZNPList_$ZPP_$Shape=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Shape"]=zpp_$nape_util_ZNPList_$ZPP_$Shape;zpp_$nape_util_ZNPList_$ZPP_$Shape.__name__="zpp_nape.util.ZNPList_ZPP_Shape";zpp_$nape_util_ZNPList_$ZPP_$Shape.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Shape}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Shape}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Shape.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Shape};var zpp_$nape_util_ZNPList_$ZPP_$Arbiter=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Arbiter"]=zpp_$nape_util_ZNPList_$ZPP_$Arbiter;zpp_$nape_util_ZNPList_$ZPP_$Arbiter.__name__="zpp_nape.util.ZNPList_ZPP_Arbiter";zpp_$nape_util_ZNPList_$ZPP_$Arbiter.prototype={head:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},__class__:zpp_$nape_util_ZNPList_$ZPP_$Arbiter};var zpp_$nape_util_ZNPList_$ZPP_$Body=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Body"]=zpp_$nape_util_ZNPList_$ZPP_$Body;zpp_$nape_util_ZNPList_$ZPP_$Body.__name__="zpp_nape.util.ZNPList_ZPP_Body";zpp_$nape_util_ZNPList_$ZPP_$Body.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Body}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Body}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},clear:function(){while(this.head!=null){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Body.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--}this.pushmod=true},has:function(obj){var ret;ret=false;var cx_ite=this.head;while(cx_ite!=null){if(cx_ite.elt==obj){ret=true;break}cx_ite=cx_ite.next}return ret},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Body};var zpp_$nape_util_ZNPList_$ZPP_$CallbackSet=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=zpp_$nape_util_ZNPList_$ZPP_$CallbackSet;zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.__name__="zpp_nape.util.ZNPList_ZPP_CallbackSet";zpp_$nape_util_ZNPList_$ZPP_$CallbackSet.prototype={head:null,modified:null,pushmod:null,length:null,__class__:zpp_$nape_util_ZNPList_$ZPP_$CallbackSet};var zpp_$nape_util_ZNPList_$ZPP_$Component=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Component"]=zpp_$nape_util_ZNPList_$ZPP_$Component;zpp_$nape_util_ZNPList_$ZPP_$Component.__name__="zpp_nape.util.ZNPList_ZPP_Component";zpp_$nape_util_ZNPList_$ZPP_$Component.prototype={head:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Component.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Component};var zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter;zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.__name__="zpp_nape.util.ZNPList_ZPP_FluidArbiter";zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter.prototype={head:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$FluidArbiter};var zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter;zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.__name__="zpp_nape.util.ZNPList_ZPP_SensorArbiter";zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter.prototype={head:null,modified:null,pushmod:null,length:null,pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$SensorArbiter};var zpp_$nape_util_ZNPList_$ZPP_$Listener=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_Listener"]=zpp_$nape_util_ZNPList_$ZPP_$Listener;zpp_$nape_util_ZNPList_$ZPP_$Listener.__name__="zpp_nape.util.ZNPList_ZPP_Listener";zpp_$nape_util_ZNPList_$ZPP_$Listener.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Listener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},insert:function(cur,o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$Listener}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;if(cur==null){temp.next=this.head;this.head=temp}else{temp.next=cur.next;cur.next=temp}this.pushmod=this.modified=true;this.length++;return temp},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$Listener.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$Listener};var zpp_$nape_util_ZNPList_$ZPP_$ColArbiter=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=zpp_$nape_util_ZNPList_$ZPP_$ColArbiter;zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.__name__="zpp_nape.util.ZNPList_ZPP_ColArbiter";zpp_$nape_util_ZNPList_$ZPP_$ColArbiter.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},__class__:zpp_$nape_util_ZNPList_$ZPP_$ColArbiter};var zpp_$nape_util_ZNPList_$ZPP_$ToiEvent=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=zpp_$nape_util_ZNPList_$ZPP_$ToiEvent;zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.__name__="zpp_nape.util.ZNPList_ZPP_ToiEvent";zpp_$nape_util_ZNPList_$ZPP_$ToiEvent.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},erase:function(pre){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$ToiEvent};var zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup;zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.__name__="zpp_nape.util.ZNPList_ZPP_InteractionGroup";zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup.prototype={head:null,modified:null,pushmod:null,length:null,iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup};var zpp_$nape_util_ZNPList_$ZPP_$CbSetPair=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=zpp_$nape_util_ZNPList_$ZPP_$CbSetPair;zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZNPList_ZPP_CbSetPair";zpp_$nape_util_ZNPList_$ZPP_$CbSetPair.prototype={head:null,modified:null,pushmod:null,length:null,add:function(o){var ret;if(zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool==null){ret=new zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair}else{ret=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=ret.next;ret.next=null}ret.elt=o;var temp=ret;temp.next=this.head;this.head=temp;this.modified=true;this.length++;return o},pop:function(){var ret=this.head;this.head=ret.next;ret.elt=null;ret.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=ret;if(this.head==null){this.pushmod=true}this.modified=true;this.length--},pop_unsafe:function(){var ret=this.head.elt;this.pop();return ret},remove:function(obj){var pre=null;var cur=this.head;while(cur!=null){if(cur.elt==obj){var old;var ret;if(pre==null){old=this.head;ret=old.next;this.head=ret;if(this.head==null){this.pushmod=true}}else{old=pre.next;ret=old.next;pre.next=ret;if(ret==null){this.pushmod=true}}var o=old;o.elt=null;o.next=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.zpp_pool=o;this.modified=true;this.length--;this.pushmod=true;break}pre=cur;cur=cur.next}},__class__:zpp_$nape_util_ZNPList_$ZPP_$CbSetPair};var zpp_$nape_util_ZNPList_$ConvexResult=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ConvexResult"]=zpp_$nape_util_ZNPList_$ConvexResult;zpp_$nape_util_ZNPList_$ConvexResult.__name__="zpp_nape.util.ZNPList_ConvexResult";zpp_$nape_util_ZNPList_$ConvexResult.prototype={head:null,modified:null,pushmod:null,length:null,iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ConvexResult};var zpp_$nape_util_ZNPList_$ZPP_$GeomPoly=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=zpp_$nape_util_ZNPList_$ZPP_$GeomPoly;zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.__name__="zpp_nape.util.ZNPList_ZPP_GeomPoly";zpp_$nape_util_ZNPList_$ZPP_$GeomPoly.prototype={head:null,modified:null,pushmod:null,length:null,iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$ZPP_$GeomPoly};var zpp_$nape_util_ZNPList_$RayResult=function(){this.length=0;this.pushmod=false;this.modified=false;this.head=null};$hxClasses["zpp_nape.util.ZNPList_RayResult"]=zpp_$nape_util_ZNPList_$RayResult;zpp_$nape_util_ZNPList_$RayResult.__name__="zpp_nape.util.ZNPList_RayResult";zpp_$nape_util_ZNPList_$RayResult.prototype={head:null,modified:null,pushmod:null,length:null,iterator_at:function(ind){var ret=this.head;while(ind-- >0&&ret!=null)ret=ret.next;return ret},__class__:zpp_$nape_util_ZNPList_$RayResult};var zpp_$nape_util_ZNPNode_$ZPP_$Compound=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Compound"]=zpp_$nape_util_ZNPNode_$ZPP_$Compound;zpp_$nape_util_ZNPNode_$ZPP_$Compound.__name__="zpp_nape.util.ZNPNode_ZPP_Compound";zpp_$nape_util_ZNPNode_$ZPP_$Compound.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Compound};var zpp_$nape_util_ZNPNode_$ZPP_$AABBNode=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=zpp_$nape_util_ZNPNode_$ZPP_$AABBNode;zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.__name__="zpp_nape.util.ZNPNode_ZPP_AABBNode";zpp_$nape_util_ZNPNode_$ZPP_$AABBNode.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$AABBNode};var zpp_$nape_util_ZNPNode_$ZPP_$Edge=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Edge"]=zpp_$nape_util_ZNPNode_$ZPP_$Edge;zpp_$nape_util_ZNPNode_$ZPP_$Edge.__name__="zpp_nape.util.ZNPNode_ZPP_Edge";zpp_$nape_util_ZNPNode_$ZPP_$Edge.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Edge};var zpp_$nape_util_ZNPNode_$ZPP_$AABBPair=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=zpp_$nape_util_ZNPNode_$ZPP_$AABBPair;zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.__name__="zpp_nape.util.ZNPNode_ZPP_AABBPair";zpp_$nape_util_ZNPNode_$ZPP_$AABBPair.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$AABBPair};var zpp_$nape_util_ZNPNode_$ZPP_$Shape=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Shape"]=zpp_$nape_util_ZNPNode_$ZPP_$Shape;zpp_$nape_util_ZNPNode_$ZPP_$Shape.__name__="zpp_nape.util.ZNPNode_ZPP_Shape";zpp_$nape_util_ZNPNode_$ZPP_$Shape.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Shape};var zpp_$nape_util_ZNPNode_$ZPP_$Arbiter=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$Arbiter;zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.__name__="zpp_nape.util.ZNPNode_ZPP_Arbiter";zpp_$nape_util_ZNPNode_$ZPP_$Arbiter.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Arbiter};var zpp_$nape_util_ZNPNode_$ZPP_$Constraint=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Constraint"]=zpp_$nape_util_ZNPNode_$ZPP_$Constraint;zpp_$nape_util_ZNPNode_$ZPP_$Constraint.__name__="zpp_nape.util.ZNPNode_ZPP_Constraint";zpp_$nape_util_ZNPNode_$ZPP_$Constraint.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Constraint};var zpp_$nape_util_ZNPNode_$ZPP_$Body=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Body"]=zpp_$nape_util_ZNPNode_$ZPP_$Body;zpp_$nape_util_ZNPNode_$ZPP_$Body.__name__="zpp_nape.util.ZNPNode_ZPP_Body";zpp_$nape_util_ZNPNode_$ZPP_$Body.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Body};var zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet;zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.__name__="zpp_nape.util.ZNPNode_ZPP_CallbackSet";zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$CallbackSet};var zpp_$nape_util_ZNPNode_$ZPP_$CbType=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbType"]=zpp_$nape_util_ZNPNode_$ZPP_$CbType;zpp_$nape_util_ZNPNode_$ZPP_$CbType.__name__="zpp_nape.util.ZNPNode_ZPP_CbType";zpp_$nape_util_ZNPNode_$ZPP_$CbType.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbType};var zpp_$nape_util_ZNPNode_$ZPP_$Component=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Component"]=zpp_$nape_util_ZNPNode_$ZPP_$Component;zpp_$nape_util_ZNPNode_$ZPP_$Component.__name__="zpp_nape.util.ZNPNode_ZPP_Component";zpp_$nape_util_ZNPNode_$ZPP_$Component.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Component};var zpp_$nape_util_ZNPNode_$ZPP_$Vec2=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Vec2"]=zpp_$nape_util_ZNPNode_$ZPP_$Vec2;zpp_$nape_util_ZNPNode_$ZPP_$Vec2.__name__="zpp_nape.util.ZNPNode_ZPP_Vec2";zpp_$nape_util_ZNPNode_$ZPP_$Vec2.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Vec2};var zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter;zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_FluidArbiter";zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$FluidArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter;zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_SensorArbiter";zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$SensorArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$Listener=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Listener"]=zpp_$nape_util_ZNPNode_$ZPP_$Listener;zpp_$nape_util_ZNPNode_$ZPP_$Listener.__name__="zpp_nape.util.ZNPNode_ZPP_Listener";zpp_$nape_util_ZNPNode_$ZPP_$Listener.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Listener};var zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter;zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.__name__="zpp_nape.util.ZNPNode_ZPP_ColArbiter";zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$ColArbiter};var zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent;zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.__name__="zpp_nape.util.ZNPNode_ZPP_ToiEvent";zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$ToiEvent};var zpp_$nape_util_ZNPNode_$ZPP_$Interactor=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_Interactor"]=zpp_$nape_util_ZNPNode_$ZPP_$Interactor;zpp_$nape_util_ZNPNode_$ZPP_$Interactor.__name__="zpp_nape.util.ZNPNode_ZPP_Interactor";zpp_$nape_util_ZNPNode_$ZPP_$Interactor.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$Interactor};var zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener;zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.__name__="zpp_nape.util.ZNPNode_ZPP_InteractionListener";zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$InteractionListener};var zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup;zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.__name__="zpp_nape.util.ZNPNode_ZPP_InteractionGroup";zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$InteractionGroup};var zpp_$nape_util_ZNPNode_$ZPP_$CbSet=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSet"]=zpp_$nape_util_ZNPNode_$ZPP_$CbSet;zpp_$nape_util_ZNPNode_$ZPP_$CbSet.__name__="zpp_nape.util.ZNPNode_ZPP_CbSet";zpp_$nape_util_ZNPNode_$ZPP_$CbSet.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbSet};var zpp_$nape_util_ZNPNode_$ZPP_$BodyListener=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=zpp_$nape_util_ZNPNode_$ZPP_$BodyListener;zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.__name__="zpp_nape.util.ZNPNode_ZPP_BodyListener";zpp_$nape_util_ZNPNode_$ZPP_$BodyListener.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$BodyListener};var zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener;zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.__name__="zpp_nape.util.ZNPNode_ZPP_ConstraintListener";zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$ConstraintListener};var zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair;zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZNPNode_ZPP_CbSetPair";zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$CbSetPair};var zpp_$nape_util_ZNPNode_$ConvexResult=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ConvexResult"]=zpp_$nape_util_ZNPNode_$ConvexResult;zpp_$nape_util_ZNPNode_$ConvexResult.__name__="zpp_nape.util.ZNPNode_ConvexResult";zpp_$nape_util_ZNPNode_$ConvexResult.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ConvexResult};var zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly;zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.__name__="zpp_nape.util.ZNPNode_ZPP_GeomPoly";zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$ZPP_$GeomPoly};var zpp_$nape_util_ZNPNode_$RayResult=function(){this.elt=null;this.next=null};$hxClasses["zpp_nape.util.ZNPNode_RayResult"]=zpp_$nape_util_ZNPNode_$RayResult;zpp_$nape_util_ZNPNode_$RayResult.__name__="zpp_nape.util.ZNPNode_RayResult";zpp_$nape_util_ZNPNode_$RayResult.prototype={next:null,elt:null,__class__:zpp_$nape_util_ZNPNode_$RayResult};var zpp_$nape_util_ZPP_$MixVec2List=function(){this.at_index=0;this.at_ite=null;this.zip_length=false;this._length=0;this.inner=null;nape_geom_Vec2List.call(this);this.at_ite=null;this.at_index=0;this.zip_length=true;this._length=0};$hxClasses["zpp_nape.util.ZPP_MixVec2List"]=zpp_$nape_util_ZPP_$MixVec2List;zpp_$nape_util_ZPP_$MixVec2List.__name__="zpp_nape.util.ZPP_MixVec2List";zpp_$nape_util_ZPP_$MixVec2List.get=function(list,immutable){if(immutable==null){immutable=false}var ret=new zpp_$nape_util_ZPP_$MixVec2List;ret.inner=list;ret.zpp_inner.immutable=immutable;return ret};zpp_$nape_util_ZPP_$MixVec2List.__super__=nape_geom_Vec2List;zpp_$nape_util_ZPP_$MixVec2List.prototype=$extend(nape_geom_Vec2List.prototype,{inner:null,_length:null,zip_length:null,at_ite:null,at_index:null,zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;var cx_ite=this.inner.next;while(cx_ite!=null){this._length++;cx_ite=cx_ite.next}this.zip_length=false}return this._length},zpp_vm:function(){this.zpp_inner.validate();if(this.inner.modified){this.zip_length=true;this._length=0;this.at_ite=null}},at:function(index){this.zpp_vm();if(this.zpp_inner.reverse_flag){index=this.zpp_gl()-1-index}if(index<this.at_index||this.at_ite==null){this.at_index=0;this.at_ite=this.inner.next;while(true)break}while(this.at_index!=index){this.at_index++;this.at_ite=this.at_ite.next;while(true)break}var _this=this.at_ite;if(_this.outer==null){_this.outer=new nape_geom_Vec2;var o=_this.outer.zpp_inner;if(o.outer!=null){o.outer.zpp_inner=null;o.outer=null}o._isimmutable=null;o._validate=null;o._invalidate=null;o.next=zpp_$nape_geom_ZPP_$Vec2.zpp_pool;zpp_$nape_geom_ZPP_$Vec2.zpp_pool=o;_this.outer.zpp_inner=_this}return _this.outer},push:function(obj){this.zpp_vm();var cont=this.zpp_inner.adder!=null?this.zpp_inner.adder(obj):true;if(cont){if(this.zpp_inner.reverse_flag){this.inner.add(obj.zpp_inner)}else{var ite=this.inner.iterator_at(this.zpp_gl()-1);this.inner.insert(ite,obj.zpp_inner)}this.zpp_inner.invalidate();if(this.zpp_inner.post_adder!=null){this.zpp_inner.post_adder(obj)}}return cont},__class__:zpp_$nape_util_ZPP_$MixVec2List});var zpp_$nape_util_ZPP_$EdgeList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Edge;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_EdgeList"]=zpp_$nape_util_ZPP_$EdgeList;zpp_$nape_util_ZPP_$EdgeList.__name__="zpp_nape.util.ZPP_EdgeList";zpp_$nape_util_ZPP_$EdgeList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$EdgeList};var zpp_$nape_util_ZPP_$ShapeList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Shape;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ShapeList"]=zpp_$nape_util_ZPP_$ShapeList;zpp_$nape_util_ZPP_$ShapeList.__name__="zpp_nape.util.ZPP_ShapeList";zpp_$nape_util_ZPP_$ShapeList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_shape_ShapeList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$ShapeList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ShapeList};var zpp_$nape_util_ZPP_$BodyList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Body;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_BodyList"]=zpp_$nape_util_ZPP_$BodyList;zpp_$nape_util_ZPP_$BodyList.__name__="zpp_nape.util.ZPP_BodyList";zpp_$nape_util_ZPP_$BodyList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_phys_BodyList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$BodyList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$BodyList};var zpp_$nape_util_ZPP_$CompoundList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Compound;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_CompoundList"]=zpp_$nape_util_ZPP_$CompoundList;zpp_$nape_util_ZPP_$CompoundList.__name__="zpp_nape.util.ZPP_CompoundList";zpp_$nape_util_ZPP_$CompoundList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_phys_CompoundList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$CompoundList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$CompoundList};var zpp_$nape_util_ZPP_$InteractorList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Interactor;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_InteractorList"]=zpp_$nape_util_ZPP_$InteractorList;zpp_$nape_util_ZPP_$InteractorList.__name__="zpp_nape.util.ZPP_InteractorList";zpp_$nape_util_ZPP_$InteractorList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$InteractorList};var zpp_$nape_util_ZPP_$ConvexResultList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ConvexResult;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ConvexResultList"]=zpp_$nape_util_ZPP_$ConvexResultList;zpp_$nape_util_ZPP_$ConvexResultList.__name__="zpp_nape.util.ZPP_ConvexResultList";zpp_$nape_util_ZPP_$ConvexResultList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ConvexResultList};var zpp_$nape_util_ZPP_$GeomPolyList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$GeomPoly;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_GeomPolyList"]=zpp_$nape_util_ZPP_$GeomPolyList;zpp_$nape_util_ZPP_$GeomPolyList.__name__="zpp_nape.util.ZPP_GeomPolyList";zpp_$nape_util_ZPP_$GeomPolyList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$GeomPolyList};var zpp_$nape_util_ZPP_$RayResultList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$RayResult;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_RayResultList"]=zpp_$nape_util_ZPP_$RayResultList;zpp_$nape_util_ZPP_$RayResultList.__name__="zpp_nape.util.ZPP_RayResultList";zpp_$nape_util_ZPP_$RayResultList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$RayResultList};var zpp_$nape_util_ZPP_$Vec2List=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.subber=null;this.post_adder=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Vec2;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_Vec2List"]=zpp_$nape_util_ZPP_$Vec2List;zpp_$nape_util_ZPP_$Vec2List.__name__="zpp_nape.util.ZPP_Vec2List";zpp_$nape_util_ZPP_$Vec2List.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$Vec2List};var zpp_$nape_util_ZPP_$ArbiterList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Arbiter;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ArbiterList"]=zpp_$nape_util_ZPP_$ArbiterList;zpp_$nape_util_ZPP_$ArbiterList.__name__="zpp_nape.util.ZPP_ArbiterList";zpp_$nape_util_ZPP_$ArbiterList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_dynamics_ArbiterList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$ArbiterList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ArbiterList};var zpp_$nape_util_ZPP_$ContactList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_dynamics_ZPP_$Contact;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ContactList"]=zpp_$nape_util_ZPP_$ContactList;zpp_$nape_util_ZPP_$ContactList.__name__="zpp_nape.util.ZPP_ContactList";zpp_$nape_util_ZPP_$ContactList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ContactList};var zpp_$nape_util_ZPP_$InteractionGroupList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this._validate=null;this._invalidated=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$InteractionGroup;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_InteractionGroupList"]=zpp_$nape_util_ZPP_$InteractionGroupList;zpp_$nape_util_ZPP_$InteractionGroupList.__name__="zpp_nape.util.ZPP_InteractionGroupList";zpp_$nape_util_ZPP_$InteractionGroupList.prototype={outer:null,inner:null,_invalidated:null,_validate:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$InteractionGroupList};var zpp_$nape_util_ZPP_$ConstraintList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Constraint;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ConstraintList"]=zpp_$nape_util_ZPP_$ConstraintList;zpp_$nape_util_ZPP_$ConstraintList.__name__="zpp_nape.util.ZPP_ConstraintList";zpp_$nape_util_ZPP_$ConstraintList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_constraint_ConstraintList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$ConstraintList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ConstraintList};var zpp_$nape_util_ZPP_$CbTypeList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$CbType;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_CbTypeList"]=zpp_$nape_util_ZPP_$CbTypeList;zpp_$nape_util_ZPP_$CbTypeList.__name__="zpp_nape.util.ZPP_CbTypeList";zpp_$nape_util_ZPP_$CbTypeList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_callbacks_CbTypeList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$CbTypeList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$CbTypeList};var zpp_$nape_util_ZPP_$ListenerList=function(){this.user_length=0;this.zip_length=false;this.push_ite=null;this.at_ite=null;this.at_index=0;this.reverse_flag=false;this.dontremove=false;this.subber=null;this.post_adder=null;this.adder=null;this._validate=null;this._invalidate=null;this._invalidated=false;this.immutable=false;this.inner=null;this.outer=null;this.inner=new zpp_$nape_util_ZNPList_$ZPP_$Listener;this._invalidated=true};$hxClasses["zpp_nape.util.ZPP_ListenerList"]=zpp_$nape_util_ZPP_$ListenerList;zpp_$nape_util_ZPP_$ListenerList.__name__="zpp_nape.util.ZPP_ListenerList";zpp_$nape_util_ZPP_$ListenerList.get=function(list,imm){if(imm==null){imm=false}var ret=new nape_callbacks_ListenerList;ret.zpp_inner.inner=list;if(imm){ret.zpp_inner.immutable=true}ret.zpp_inner.zip_length=true;return ret};zpp_$nape_util_ZPP_$ListenerList.prototype={outer:null,inner:null,immutable:null,_invalidated:null,_invalidate:null,_validate:null,adder:null,post_adder:null,subber:null,dontremove:null,reverse_flag:null,valmod:function(){this.validate();if(this.inner.modified){if(this.inner.pushmod){this.push_ite=null}this.at_ite=null;this.inner.modified=false;this.inner.pushmod=false;this.zip_length=true}},validate:function(){if(this._invalidated){this._invalidated=false;if(this._validate!=null){this._validate()}}},invalidate:function(){this._invalidated=true;if(this._invalidate!=null){this._invalidate(this)}},at_index:null,at_ite:null,push_ite:null,zip_length:null,user_length:null,__class__:zpp_$nape_util_ZPP_$ListenerList};var zpp_$nape_util_ZPP_$Set_$ZPP_$Body=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};$hxClasses["zpp_nape.util.ZPP_Set_ZPP_Body"]=zpp_$nape_util_ZPP_$Set_$ZPP_$Body;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.__name__="zpp_nape.util.ZPP_Set_ZPP_Body";zpp_$nape_util_ZPP_$Set_$ZPP_$Body.prototype={lt:null,swapped:null,data:null,prev:null,next:null,parent:null,colour:null,__fix_dbl_red:function(x){while(true){var par=x.parent;var g=par.parent;if(g==null){par.colour=1;break}var n1;var n2;var n3;var t1;var t2;var t3;var t4;if(par==g.prev){n3=g;t4=g.next;if(x==par.prev){n1=x;n2=par;t1=x.prev;t2=x.next;t3=par.next}else{n1=par;n2=x;t1=par.prev;t2=x.prev;t3=x.next}}else{n1=g;t1=g.prev;if(x==par.prev){n2=x;n3=par;t2=x.prev;t3=x.next;t4=par.next}else{n2=par;n3=x;t2=par.prev;t3=x.prev;t4=x.next}}var par1=g.parent;if(par1==null){this.parent=n2}else if(par1.prev==g){par1.prev=n2}else{par1.next=n2}if(n2!=null){n2.parent=par1}n1.prev=t1;if(t1!=null){t1.parent=n1}n1.next=t2;if(t2!=null){t2.parent=n1}n2.prev=n1;if(n1!=null){n1.parent=n2}n2.next=n3;if(n3!=null){n3.parent=n2}n3.prev=t3;if(t3!=null){t3.parent=n3}n3.next=t4;if(t4!=null){t4.parent=n3}n2.colour=g.colour-1;n1.colour=1;n3.colour=1;if(n2==this.parent){this.parent.colour=1}else if(n2.colour==0&&n2.parent.colour==0){x=n2;continue}break}},try_insert_bool:function(obj){var x=null;var cur=null;if(this.parent==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=x.next;x.next=null}x.data=obj;this.parent=x}else{cur=this.parent;while(true)if(this.lt(obj,cur.data)){if(cur.prev==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=x.next;x.next=null}x.data=obj;cur.prev=x;x.parent=cur;break}else{cur=cur.prev}}else if(this.lt(cur.data,obj)){if(cur.next==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=x.next;x.next=null}x.data=obj;cur.next=x;x.parent=cur;break}else{cur=cur.next}}else{break}}if(x==null){return false}else{if(x.parent==null){x.colour=1}else{x.colour=0;if(x.parent.colour==0){this.__fix_dbl_red(x)}}return true}},insert:function(obj){var x;if(zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$Body}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$Body.zpp_pool=x.next;x.next=null}x.data=obj;if(this.parent==null){this.parent=x}else{var cur=this.parent;while(true)if(this.lt(x.data,cur.data)){if(cur.prev==null){cur.prev=x;x.parent=cur;break}else{cur=cur.prev}}else if(cur.next==null){cur.next=x;x.parent=cur;break}else{cur=cur.next}}if(x.parent==null){x.colour=1}else{x.colour=0;if(x.parent.colour==0){this.__fix_dbl_red(x)}}return x},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$Body};var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.__name__="zpp_nape.util.ZPP_Set_ZPP_CbSet";zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.prototype={lt:null,swapped:null,data:null,prev:null,next:null,parent:null,colour:null,empty:function(){return this.parent==null},find:function(obj){var cur=this.parent;while(cur!=null&&cur.data!=obj)if(this.lt(obj,cur.data)){cur=cur.prev}else{cur=cur.next}return cur},find_weak:function(obj){var cur=this.parent;while(cur!=null)if(this.lt(obj,cur.data)){cur=cur.prev}else if(this.lt(cur.data,obj)){cur=cur.next}else{break}return cur},remove:function(obj){this.remove_node(this.find(obj))},remove_node:function(cur){if(cur.next!=null&&cur.prev!=null){var sm=cur.next;while(sm.prev!=null)sm=sm.prev;var t=cur.data;cur.data=sm.data;sm.data=t;if(this.swapped!=null){this.swapped(cur.data,sm.data)}cur=sm}var child=cur.prev==null?cur.next:cur.prev;if(cur.colour==1){if(cur.prev!=null||cur.next!=null){child.colour=1}else if(cur.parent!=null){var parent=cur.parent;while(true){parent.colour++;parent.prev.colour--;parent.next.colour--;var child1=parent.prev;if(child1.colour==-1){this.__fix_neg_red(child1);break}else if(child1.colour==0){if(child1.prev!=null&&child1.prev.colour==0){this.__fix_dbl_red(child1.prev);break}if(child1.next!=null&&child1.next.colour==0){this.__fix_dbl_red(child1.next);break}}var child2=parent.next;if(child2.colour==-1){this.__fix_neg_red(child2);break}else if(child2.colour==0){if(child2.prev!=null&&child2.prev.colour==0){this.__fix_dbl_red(child2.prev);break}if(child2.next!=null&&child2.next.colour==0){this.__fix_dbl_red(child2.next);break}}if(parent.colour==2){if(parent.parent==null){parent.colour=1}else{parent=parent.parent;continue}}break}}}var par=cur.parent;if(par==null){this.parent=child}else if(par.prev==cur){par.prev=child}else{par.next=child}if(child!=null){child.parent=par}cur.parent=cur.prev=cur.next=null;var o=cur;o.data=null;o.lt=null;o.swapped=null;o.next=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=o},__fix_neg_red:function(negred){var parent=negred.parent;var child;if(parent.prev==negred){var nl=negred.prev;var nr=negred.next;var trl=nr.prev;var trr=nr.next;nl.colour=0;negred.colour=parent.colour=1;negred.next=trl;if(trl!=null){trl.parent=negred}var t=parent.data;parent.data=nr.data;nr.data=t;if(this.swapped!=null){this.swapped(parent.data,nr.data)}nr.prev=trr;if(trr!=null){trr.parent=nr}nr.next=parent.next;if(parent.next!=null){parent.next.parent=nr}parent.next=nr;if(nr!=null){nr.parent=parent}child=nl}else{var nl1=negred.next;var nr1=negred.prev;var trl1=nr1.next;var trr1=nr1.prev;nl1.colour=0;negred.colour=parent.colour=1;negred.prev=trl1;if(trl1!=null){trl1.parent=negred}var t1=parent.data;parent.data=nr1.data;nr1.data=t1;if(this.swapped!=null){this.swapped(parent.data,nr1.data)}nr1.next=trr1;if(trr1!=null){trr1.parent=nr1}nr1.prev=parent.prev;if(parent.prev!=null){parent.prev.parent=nr1}parent.prev=nr1;if(nr1!=null){nr1.parent=parent}child=nl1}if(child.prev!=null&&child.prev.colour==0){this.__fix_dbl_red(child.prev)}else if(child.next!=null&&child.next.colour==0){this.__fix_dbl_red(child.next)}},__fix_dbl_red:function(x){while(true){var par=x.parent;var g=par.parent;if(g==null){par.colour=1;break}var n1;var n2;var n3;var t1;var t2;var t3;var t4;if(par==g.prev){n3=g;t4=g.next;if(x==par.prev){n1=x;n2=par;t1=x.prev;t2=x.next;t3=par.next}else{n1=par;n2=x;t1=par.prev;t2=x.prev;t3=x.next}}else{n1=g;t1=g.prev;if(x==par.prev){n2=x;n3=par;t2=x.prev;t3=x.next;t4=par.next}else{n2=par;n3=x;t2=par.prev;t3=x.prev;t4=x.next}}var par1=g.parent;if(par1==null){this.parent=n2}else if(par1.prev==g){par1.prev=n2}else{par1.next=n2}if(n2!=null){n2.parent=par1}n1.prev=t1;if(t1!=null){t1.parent=n1}n1.next=t2;if(t2!=null){t2.parent=n1}n2.prev=n1;if(n1!=null){n1.parent=n2}n2.next=n3;if(n3!=null){n3.parent=n2}n3.prev=t3;if(t3!=null){t3.parent=n3}n3.next=t4;if(t4!=null){t4.parent=n3}n2.colour=g.colour-1;n1.colour=1;n3.colour=1;if(n2==this.parent){this.parent.colour=1}else if(n2.colour==0&&n2.parent.colour==0){x=n2;continue}break}},insert:function(obj){var x;if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet.zpp_pool=x.next;x.next=null}x.data=obj;if(this.parent==null){this.parent=x}else{var cur=this.parent;while(true)if(this.lt(x.data,cur.data)){if(cur.prev==null){cur.prev=x;x.parent=cur;break}else{cur=cur.prev}}else if(cur.next==null){cur.next=x;x.parent=cur;break}else{cur=cur.next}}if(x.parent==null){x.colour=1}else{x.colour=0;if(x.parent.colour==0){this.__fix_dbl_red(x)}}return x},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$CbSet};var zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair=function(){this.colour=0;this.parent=null;this.next=null;this.prev=null;this.data=null;this.swapped=null;this.lt=null};$hxClasses["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.__name__="zpp_nape.util.ZPP_Set_ZPP_CbSetPair";zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.prototype={lt:null,swapped:null,data:null,prev:null,next:null,parent:null,colour:null,__fix_dbl_red:function(x){while(true){var par=x.parent;var g=par.parent;if(g==null){par.colour=1;break}var n1;var n2;var n3;var t1;var t2;var t3;var t4;if(par==g.prev){n3=g;t4=g.next;if(x==par.prev){n1=x;n2=par;t1=x.prev;t2=x.next;t3=par.next}else{n1=par;n2=x;t1=par.prev;t2=x.prev;t3=x.next}}else{n1=g;t1=g.prev;if(x==par.prev){n2=x;n3=par;t2=x.prev;t3=x.next;t4=par.next}else{n2=par;n3=x;t2=par.prev;t3=x.prev;t4=x.next}}var par1=g.parent;if(par1==null){this.parent=n2}else if(par1.prev==g){par1.prev=n2}else{par1.next=n2}if(n2!=null){n2.parent=par1}n1.prev=t1;if(t1!=null){t1.parent=n1}n1.next=t2;if(t2!=null){t2.parent=n1}n2.prev=n1;if(n1!=null){n1.parent=n2}n2.next=n3;if(n3!=null){n3.parent=n2}n3.prev=t3;if(t3!=null){t3.parent=n3}n3.next=t4;if(t4!=null){t4.parent=n3}n2.colour=g.colour-1;n1.colour=1;n3.colour=1;if(n2==this.parent){this.parent.colour=1}else if(n2.colour==0&&n2.parent.colour==0){x=n2;continue}break}},try_insert:function(obj){var x=null;var cur=null;if(this.parent==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=x.next;x.next=null}x.data=obj;this.parent=x}else{cur=this.parent;while(true)if(this.lt(obj,cur.data)){if(cur.prev==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=x.next;x.next=null}x.data=obj;cur.prev=x;x.parent=cur;break}else{cur=cur.prev}}else if(this.lt(cur.data,obj)){if(cur.next==null){if(zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool==null){x=new zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair}else{x=zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool;zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair.zpp_pool=x.next;x.next=null}x.data=obj;cur.next=x;x.parent=cur;break}else{cur=cur.next}}else{break}}if(x==null){return cur}else{if(x.parent==null){x.colour=1}else{x.colour=0;if(x.parent.colour==0){this.__fix_dbl_red(x)}}return x}},__class__:zpp_$nape_util_ZPP_$Set_$ZPP_$CbSetPair};function $getIterator(o){if(o instanceof Array)return HxOverrides.iter(o);else return o.iterator()}function $bind(o,m){if(m==null)return null;if(m.__id__==null)m.__id__=$global.$haxeUID++;var f;if(o.hx__closures__==null)o.hx__closures__={};else f=o.hx__closures__[m.__id__];if(f==null){f=m.bind(o);o.hx__closures__[m.__id__]=f}return f}$global.$haxeUID|=0;var init=lime__$internal_backend_html5_HTML5Application;var init=lime_app_Application;haxe_ds_ObjectMap.count=0;$hxClasses["Math"]=Math;if(String.fromCodePoint==null)String.fromCodePoint=function(c){return c<65536?String.fromCharCode(c):String.fromCharCode((c>>10)+55232)+String.fromCharCode((c&1023)+56320)};String.prototype.__class__=$hxClasses["String"]=String;String.__name__="String";$hxClasses["Array"]=Array;Array.__name__="Array";Date.prototype.__class__=$hxClasses["Date"]=Date;Date.__name__="Date";var Int={};var Dynamic={};var Float=Number;var Bool=Boolean;var Class={};var Enum={};haxe_Resource.content=[{name:"__ASSET__:bitmap_Splash",data:"aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQVpBQUFBRVdDQVlBQUFCSVZzRUpBQUFBQkdkQlRVRUFBTEdPZlB0Umt3QUFBQ0JqU0ZKTkFBQ0hEd0FBakE4QUFQMVNBQUNCUUFBQWZYa0FBT21MQUFBODVRQUFHY3h6UElWM0FBQUtMMmxEUTFCSlEwTWdVSEp2Wm1sc1pRQUFTTWVkbG5kVVZOY1doOCs5ZDNxaHpURFNHWHFUTGpDQTlDNGdIUVJSR0dZR0dNb0F3d3hOYklpb1FFUVJFUUZGa0tDQUFhT2hTS3lJWWlFb3FHQVBTQkJRWWpDS3FLaGtSdFpLZkhsNTcrWGw5OGU5MzlwbjczUDMyWHVmdFM0QUpFOGZMaThGbGdJZ21TZmdCM280MDFlRlI5Q3gvUUFHZUlBQnBnQXdXZW1wdmtIdXdVQWtMemNYZXJySUNmeUwzZ3dCU1B5K1planBUNmVELzAvU3JGUytBQURJWDhUbWJFNDZTOFQ1SWs3S0ZLU0s3VE1pcHNZa2lobEdpWmt2U2xERWNtS09XK1NsbjMwVzJWSE03R1FlVzhUaW5GUFp5V3d4OTRoNGU0YVFJMkxFUjhRRkdWeE9wb2h2aTFnelNaak1GZkZiY1d3eWg1a09BSW9rdGdzNHJIZ1JtNGlZeEE4T2RCSHhjZ0J3cExndk9PWUxGbkN5Qk9KRHVhU2tadk81Y2ZFQ3VpNUxqMjVxYmMyZ2UzSXlremdDZ2FFL2s1WEk1TFBwTGluSnFVeGVOZ0NMWi80c0dYRnQ2YUlpVzVwYVcxb2FtaG1aZmxHby83cjROeVh1N1NLOUN2amNNNGpXOTRmdHIveFM2Z0JneklwcXMrc1BXOHgrQURxMkFpQjMvdytiNWlFQUpFVjlhNy94eFhsbzRubUpGd2hTYll5Tk16TXpqYmdjbHBHNG9ML3JmenI4RFgzeFBTUHhkcitYaCs3S2lXVUtrd1IwY2QxWUtVa3BRajQ5UFpYSjR0QU4venpFL3pqd3IvTllHc2lKNWZBNVBGRkVxR2pLdUx3NFVidDViSzZBbThLamMzbi9xWW4vTU94UFdweHJrU2oxbndBMXlnaEkzYUFDNU9jK2dLSVFBUko1VU56MTMvdm1ndzhGNHBzWHBqcXhPUGVmQmYzN3JuQ0orSkhPamZzYzV4SVlUR2NKK1JtTGErSnJDZENBQUNRQkZjZ0RGYUFCZElFaE1BTld3Qlk0QWpld0F2aUJZQkFPMWdJV2lBZkpnQTh5UVM3WURBcEFFZGdGOW9KS1VBUHFRU05vQVNkQUJ6Z05Mb0RMNERxNENlNkFCMkFFaklQbllBYThBZk1RQkdFaE1rU0I1Q0ZWU0FzeWdNd2dCbVFQdVVFK1VDQVVEa1ZEY1JBUEVrSzUwQmFvQ0NxRktxRmFxQkg2RmpvRlhZQ3VRZ1BRUFdnVW1vSitoZDdEQ0V5Q3FiQXlyQTBid3d6WUNmYUdnK0UxY0J5Y0J1ZkErZkJPdUFLdWc0L0I3ZkFGK0RwOEJ4NkJuOE96Q0VDSUNBMVJRd3dSQnVLQytDRVJTQ3pDUnpZZ2hVZzVVb2UwSUYxSUwzSUxHVUdta1hjb0RJcUNvcU1NVWJZb1QxUUlpb1ZLUTIxQUZhTXFVVWRSN2FnZTFDM1VLR29HOVFsTlJpdWhEZEEyYUMvMEtuUWNPaE5kZ0M1SE42RGIwSmZRZDlEajZEY1lESWFHMGNGWVlUd3g0WmdFekRwTU1lWUFwaFZ6SGpPQUdjUE1ZckZZZWF3QjFnN3JoMlZpQmRnQzdIN3NNZXc1N0NCMkhQc1dSOFNwNHN4dzdyZ0lIQStYaHl2SE5lSE80Z1p4RTdoNXZCUmVDMitEOThPejhkbjRFbnc5dmd0L0F6K09ueWRJRTNRSWRvUmdRZ0poTTZHQzBFSzRSSGhJZUVVa0V0V0oxc1FBSXBlNGlWaEJQRTY4UWh3bHZpUEprUFJKTHFSSWtwQzBrM1NFZEo1MGovU0tUQ1pya3gzSkVXUUJlU2U1a1h5Ui9KajhWb0lpWVNUaEpjR1cyQ2hSSmRFdU1TanhRaEl2cVNYcEpMbFdNa2V5WFBLazVBM0phU204bExhVWl4UlRhb05VbGRRcHFXR3BXV21LdEttMG4zU3lkTEYway9SVjZVa1pySXkyakpzTVd5WmY1ckRNUlpreENrTFJvTGhRV0pRdGxIcktKY280RlVQVm9YcFJFNmhGMUcrby9kUVpXUm5aWmJLaHNsbXlWYkpuWkVkb0NFMmI1a1ZMb3BYUVR0Q0dhTytYS0M5eFdzSlpzbU5KeTVMQkpYTnlpbktPY2h5NVFybFd1VHR5NytYcDhtN3lpZks3NVR2a0h5bWdGUFFWQWhReUZRNHFYRktZVnFRcTJpcXlGQXNWVHlqZVY0S1Y5SlVDbGRZcEhWYnFVNXBWVmxIMlVFNVYzcTk4VVhsYWhhYmlxSktnVXFaeVZtVktsYUpxcjhwVkxWTTlwL3FNTGt0M29pZlJLK2c5OUJrMUpUVlBOYUZhclZxLzJyeTZqbnFJZXA1NnEvb2pEWUlHUXlOV28weWpXMk5HVTFYVFZ6TlhzMW56dmhaZWk2RVZyN1ZQcTFkclRsdEhPMHg3bTNhSDlxU09uSTZYVG81T3M4NURYYkt1ZzI2YWJwM3ViVDJNSGtNdlVlK0EzazE5V045Q1AxNi9TditHQVd4Z2FjQTFPR0F3c0JTOTFIb3BiMm5kMG1GRGtxR1RZWVpocytHb0VjM0l4eWpQcU1Qb2hiR21jWVR4YnVOZTQwOG1GaVpKSnZVbUQweGxURmVZNXBsMm1mNXFwbS9HTXFzeXUyMU9ObmMzMzJqZWFmNXltY0V5enJLRHkrNWFVQ3g4TGJaWmRGdDh0TFN5NUZ1MldFNVphVnBGVzFWYkRUT29ESDlHTWVPS05kcmEyWHFqOVducmR6YVdOZ0tiRXphLzJCcmFKdG8yMlU0dTExbk9XVjYvZk14TzNZNXBWMnMzWWsrM2o3WS9aRC9pb09iQWRLaHplT0tvNGNoMmJIQ2NjTkp6U25BNjV2VEMyY1NaNzl6bVBPZGk0N0xlNWJ3cjR1cmhXdWphN3liakZ1Slc2ZmJZWGQwOXpyM1pmY2JEd21PZHgzbFB0S2UzNTI3UFlTOWxMNVpYbzlmTUNxc1Y2MWYwZUpPOGc3d3J2Wi80NlB2d2ZicDhZZDhWdm50OEg2N1VXc2xiMmVFSC9Mejg5dmc5OHRmeFQvUC9QZ0FUNEI5UUZmQTAwRFF3TjdBM2lCSVVGZFFVOUNiWU9iZ2srRUdJYm9nd3BEdFVNalF5dERGMExzdzFyRFJzWkpYeHF2V3Jyb2NyaEhQRE95T3dFYUVSRFJHenE5MVc3MTA5SG1rUldSQTV0RVpuVGRhYXEyc1YxaWF0UFJNbEdjV01PaG1Oamc2TGJvcit3UFJqMWpGblk3eGlxbU5tV0M2c2Zhem5iRWQyR1h1S1k4Y3A1VXpFMnNXV3hrN0cyY1h0aVp1S2Q0Z3ZqNS9tdW5BcnVTOFRQQk5xRXVZUy9SS1BKQzRraFNXMUp1T1NvNU5QOFdSNGlieWVGSldVckpTQlZJUFVndFNSTkp1MHZXa3pmRzkrUXpxVXZpYTlVMEFWL1V6MUNYV0ZXNFdqR2ZZWlZSbHZNME16VDJaSlovR3krckwxczNka1QrUzQ1M3k5RHJXT3RhNDdWeTEzYys3b2VxZjF0UnVnRFRFYnVqZHFiTXpmT0w3Slk5UFJ6WVROaVp0L3lEUEpLODE3dlNWc1MxZStjdjZtL0xHdEhsdWJDeVFLK0FYRDIyeTMxV3hIYmVkdTc5OWh2bVAvamsrRjdNSnJSU1pGNVVVZmlsbkYxNzR5L2FyaXE0V2RzVHY3U3l4TER1N0M3T0x0R3RydHNQdG9xWFJwVHVuWUh0ODk3V1gwc3NLeTEzdWo5bDR0WDFaZXM0K3dUN2h2cE1Lbm9uTy81djVkK3o5VXhsZmVxWEt1YXExV3F0NVJQWGVBZldEd29PUEJsaHJsbXFLYTk0ZTRoKzdXZXRTMjEyblhsUi9HSE00NC9MUSt0TDczYThiWGpRMEtEVVVOSDQvd2pvd2NEVHphMDJqVjJOaWsxRlRTRERjTG02ZU9SUjY3K1kzck41MHRoaTIxcmJUV291UGd1UEQ0czIranZ4MDY0WDJpK3lUalpNdDNXdDlWdDFIYUN0dWg5dXoybVk3NGpwSE84TTZCVXl0T2RYZlpkclY5Yi9UOWtkTnFwNnZPeUo0cE9VczRtMzkyNFZ6T3VkbnpxZWVuTDhSZEdPdU82bjV3Y2RYRjJ6MEJQZjJYdkM5ZHVleCsrV0t2VSsrNUszWlhUbCsxdVhycUd1TmF4M1hMNisxOUZuMXRQMWo4ME5adjJkOSt3K3BHNTAzcm0xMER5d2ZPRGpvTVhyamxldXZ5YmEvYjErK3N2RE13RkRKMGR6aHllT1F1Kys3a3ZhUjdMKzluM0o5L3NPa2grbUhoSTZsSDVZK1ZIdGY5cVBkajY0amx5SmxSMTlHK0owRlBIb3l4eHA3L2xQN1RoL0g4cCtTbjVST3FFNDJUWnBPbnA5eW5iajViL1d6OGVlcnorZW1DbjZWL3JuNmgrK0s3WHh4LzZadFpOVFAra3Y5eTRkZmlWL0t2anJ4ZTlycDcxbi8yOFp2a04vTnpoVy9sM3g1OXgzalgrejdzL2NSODVnZnNoNHFQZWgrN1BubC9lcmlRdkxEd0cvZUU4L3MzQkNrZUFBQUFDWEJJV1hNQUFBc1NBQUFMRWdIUzNYNzhBQUFBSVhSRldIUkRjbVZoZEdsdmJpQlVhVzFsQURJd01UVTZNRGM2TURFZ01URTZNekU2TVRSVjJpSzJBQUJHa1VsRVFWUjRYdTE5QjdoY3RkRzI5aFozRzJOTUoyQUl2WnBlVERFOUJBaTloOUI3RFk2QkpIeWgvTlFFUWcrbXhwaGVUT2dZMHd6QkZOTTdCR3hNeDRCN3UvWXQrNy92NVZ5elh1K2VJK25vMUIwOXp6ejIzUjJOWmw1cHp4eEpvMUdoV0N3cUtZS0FJQ0FJQ0FLQ2dDa0NkYVlWaEY4UUVBUUVBVUZBRUNBQzRrQmtIQWdDZ29BZ0lBaFlJU0FPeEFvMnFTUUlDQUtDZ0NBZ0RrVEdnQ0FnQ0FnQ2dvQVZBdUpBckdDVFNvS0FJQ0FJQ0FMaVFHUU1DQUtDZ0NBZ0NGZ2hJQTdFQ2phcEpBZ0lBb0tBSUNBT1JNYUFJQ0FJQ0FLQ2dCVUM0a0NzWUpOS2dvQWdJQWdJQXVKQVpBd0lBb0tBSUNBSVdDRWdEc1FLTnFra0NBZ0Nnb0FnSUE1RXhvQWdJQWdJQW9LQUZRSUZTYVpvaFp0VXFpRUU4QnZaQWVidUNlb09HZ1c2dFZBb3ROUVFCR0txSUZBUkFYRWdNakFFZ1NvSXdIRjB3VmUzZ0E0b1kza0RmLzhXVHVRSEFVOFFxR1VFeElIVWN1K0w3VlVSZ1BOb3dKZVBnSDVUaGVsdGZMNFpuTWhzZ1ZFUXFGVUVaQStrVm50ZTdBNUM0SHdmNThHNi9VRVhCd21SN3dXQlBDTWdNNUE4OTY3WVpvVUFaaDhib09Jcm9Qb0FBYzM0Zm0zTVFqNjJha2dxQ1FJWlIwQm1JQm52UUZFL0VnU3UxSEFlYkxnUmRFWWtHb2hRUVNBRENNZ01KQU9kSkNyR2h3Qm1IenVpdFJFR0xUYUJkMm5NUWlZWjFCRldRU0FYQ01nTUpCZmRLRVk0Uk9CUGhySVlxYlcvWVIxaEZ3UnlnWUE0a0Z4MG94amhBZ0hNUGxhQm5HMHNaTzFoVVVlcUNBS1pSMEFjU09hN1VBeHdpTUFmSU12bU43RWxuRTlQaDNxSUtFRWdFd2pZL0ZneVlaZ29LUWhZSUdDN0ZOVUpiVzFtMFo1VUVRUXlqWUE0a0V4M255anZDZ0hNSU5hR3JCVkN5TnNpUkYycEtnaGtFZ0Z4SUpuc05sRTZBZ1IyRGlsenZaRDFwYm9na0RrRXhJRmtyc3RFNFlnUTJEYWszSFZDMXBmcWdrRG1FSkJ6SUpuck1sSFlOUUpZdnVJZXhtUlF0NUN5ZStFOHlQU1FNcVM2SUpBWkJHUUdrcG11RWtValJLQy9BK2RCOVZhTVVFY1JMUWlrRGdGeElLbnJFbEVvQVFRMmROVG1jbzdraUJoQklCTUlpQVBKUkRlSmtoRWo0R29EZk1tSTlSVHhna0NxRUJBSGtxcnV5STh5MkZkWUdOUXJJeGF0NFVqUEpSekpFVEdDUUNZUUVBZVNpVzdLanBKd0dpZUR2b2JHVEM0NEZmLy9GblFuYUUvdmtxWkVqSmxjS0RTQTFnQWRCTG9BZENmb0pkQTNhdHEwalYwbzFUcG16TVplRzd5TVNvb2drSHNFSkFvcjkxMGNuNEZ3RUNlaXRhdDlXdndLMzEwR3VoN1JTc3hpRzFuQmc1ekxTWnVEQm5pMEZ2N3RYTjVnWGQrK3F0Y1BibTZtYmI3MVZqWHpzTVBZeEJ6UWU2RFJIcjJJNmRoM2tSa3JnZ1dCaEJBUUI1SVE4SGxzRmc1a0hPeGFYc08yTDhBekNFNWt1QWF2RmdzY0JpOS9vc1BZQ2ZSYkVCMUdZR25ZWUFQVlk4eVlRRDRkaHViNzdsTXo5OXV2R2lzZHl1T2dKMEIwS0swNk1vVkhFRWd6QXJLRWxlYmV5WkJ1Y0I2TGFqb1BXc1ZvcGZ0UjV4R1E5Y1l6blFab1c5QVF5T01iL2lnUUwzalNjaDVVcEc3WlpkMmgzTWo3cGFvVzZrVGRxT04zMU5uVFBlaldRM2Y2aVNSQndERUM0a0FjQTFyRDRteXkwZTRDdk42REUvbWRDVzU0OEM0SE9nOTFPSk41R25RTWlBN011QlFXWDl5NFRyVUtCWDhIVWxxTnVsSm42djRGYmFGTnpoUVJRWUpBVEFpSUE0a0o2QnBvWnBxbGpZdWczbi9nUkM0UDJtVEhRM1pyMEtQZ0h3djZQOURTbG0zT3ExYm4wSUdvVnF0VktkcEFXOGJTTnRvWTFpYXBMd2pFaFlBNGtMaVF6bms3Mk0vNENTWk9zVFNUNC9CVTBKTndJblFvOHdvZXFIV2dBMEJ2NE1OblFVeDY2R3pacDlDbmo2WEtDMVlydHJTRWtVV2JhTnV6dEJXMEg2Z1FScURVRlFTaVJrQWNTTlFJMTViOHNMdlJ2QTN3WlRpUkZmbndCTzJEdjduNWZDZkkxV0cvK1hxazBOTm01YTFLcDg1aDhKV1RRbHZ2QnIxUERNU1JPTUZVaEVTQWdEaVFDRUN0WVpGUE9iQjlKZFhjL0hyRDVwdC9DRm4zZ2xaM0lMTzZDSWNPcERqTmRoV3ZxbnEwblJpOERpZXlaYVE0aUhCQndBSUJjU0FXb0VtVnFnZzg2QVNieHNhRmVqenl5S29OQTNpRUk5cGlzUEVkcUVoeDZ0UkFIa3NHemtpZWh4TzVHK1F3Yk14U0c2a21DSGdJaUFPUm9lQU1BYXc2ZlFaaFBEd1h2aXkwa09yeHhCTUtNNUh3c3Z3a09OeG1pTkNCZEZqQVF5WWZ3SW44a1h0RDBRSWowZ1dCWUFSa0VBWmpKQnhtQ054Z3h1N0QzYU9INnZIWVk2cGgwMDJkaVZ4QVVKMjduMEJ4d29UbzlQeEZjZy84OTUrZ2wrRkUxb3lqUVdsREVLaUdnTHRmajJBc0NQeU1BRGQvdjNVR0J2WW91c09KMUsvTks4c2pLQTVuSUczZmZCT0JnbFZGYm9SdnhzQ0puQkpubzlLV0lGQ0tnRGdRR1E5T0VjQXkxbHdJdk55bDBFTHYzdTNMV2ZYTDYyUkpNV3U1T0h1MldRVWY3cGdkQ0RYcENyb0NUbVFFYURGbmhvZ2dRVUFUQVhFZ21rQUpteEVDMTRMYmFmTEF3cEpMcXU2UFBxb0syQnR4V21iTWNDYXU3UXNlakUrazdJaFdlWFprazBSYWwwWnJGZ0Z4SURYYjlkRVpqbGtJWCt1WmFzUnBxVnR0TmRYOS92dFZvZDdaT1VKVmRPUkFpdDk5cDRyVEU3ME9mUm1BL1J5Y3lGRk9RUmRoZ29BUEF1SkFaSGhFaFFBMzA5OTFMYnhoMjIxVmwwc3VjU2JXVmVSVTY4Y2ZPOU1waEtBdXFIc0RuTWlsY3Znd0JJcFNWUnNCY1NEYVVBbWpDUUtZaGJTQi93UlEwYVNlRG0vbjAwNVRuZmJkVjRjMWtLZnRXemY3L1cwZmZSVFlWb3dNZzlEV2NEZ1I3cEZJRVFRaVEwQWNTR1RRaXVBcGRYWHZOQThmN3VhMnBqSTR1OTE0bzZwZmRkWFFJQmNkUlU2MXZ2NTZhRjBjQzlnRDhwNkVFM0dZcThXeGhpSXU4d2lJQThsOEY2YlRBRHk0bUtYd21WbEhIcmw0OFd2ZWNPdTRJTHkzMjUxM3FyQW55ZHNjNmRieTJtdU9EWFFpYmd2MmdkY1hUZ1NLRUVHZ0ZBRnhJREllbkNPQUI5YkNFTXJNdVJ0eWp3Rk9SS2sycm1pNUxmWDkrNnN1NTU4ZlNtamJXR2FHRDFtUUE2dnRRNmJ1U21YWmtIM2g5VWtxRlJTbHNvdUFPSkRzOWwwcU5jZURpaWVsZVczck9oMEtObzhjcWVaZWMwMGsrbkkvcEdGTCt6eURiWk1ucTdETFdDM1BQNitRUVRnUyt4d0paVjg4NGZXTkk1RWlSaERBalo0Q2dpRGdDZ0U4b0JnRnhBdWZOaTZYT1h2d1lOWDY1cHV1bXZwRkRrSjZ1dzBaRW1vcHEvWDk5MFBwMWZ3MEx4Wk1mV0dmUE9MMVVlcVZGUVd6Z1lBNGtHejBVK3ExOU1KR2gwSFJyU29wVzJ4dVZyTVFPVldjTk1tNUxYWFlUTzk4NXBuV2NsdmZmdHU2TGl1MmpCZ1JxbjZNbFFlaXJXRVM0aHNqNGpsdlNoeEl6anM0UnZONE9JTVhRRlV0cmVQR3FWa0hIYVFzcjM3MU5hVUxIRWg5djM1VzVyYTg5SkpWUFZacWUvZGQxZnJwcDliMUU2aklQbkoza0NZQkE2VEo5Q0FnRGlROWZaRlpUZkJHZXdTVUg2eGpRUE9UVDZxbUVMT0ZxbTEwN2FxNlhIQ0JqZ29MOEhBUEE1ZFlXZFdkZXkvdmU4cGNHZXoxV2VZVUY0WFRoVUFoNVp0LzZVSkx0RmtBQVR5SUdPWHpBb2o3SDlxbDIzWFhxVTdISEtQTnI4V0lTSzhaRzI2b1d0NTZTNHU5bEtubnFGR3EzblF6SG5lZ1QxdGhCZVVxRk5oWTZYQVZtbEI5eTRXTHhWVEdINGN6VFdySGhZRE1RT0pDT29mdHdIbjBoVm4zbVRvUFFqSDd4Qk5WQ3pMc09pMjQyNlBMZVhZcHVPWU9IMjZzU2pPU08vbzVqMEszYnFxdWIxL2w5TjUxWXkyclZxRER2OC9yUTNkU1JWSk5JU0F6a0pycWJyZkc0dUh6Q0NUdVlpdTEwS1dMNm9FUTMzcVh0dzVpRmpKOXJiVlVxMkZxRVQ3b2UvRlFZYWRPMnViTTJHSUwxVEw2NXdzWWticEYxV1AyMDdERER1MWh4ZlhycmFjS2ZYaVcwaXM0RDlQNnpqdUtFVnZOZDkybFdsMmNQOUhXMUpmeFVjeENkblVqU3FUVUdnTGlRR3F0eHgzWkMrZkJQRmVoRDNjVWV2VlNQWjU1UnRXdnY3NGp6WlNhZS9QTmF0WlI1a2xwdTk5Mm0ycmtKcjlHNGV4cDlpbW5xSWJ0dGxOTThOaXd6VGFxc0REUFQyb1VPTG5taHg1U1RYLzVpMnI5NUJPTkNwR3puQWdud2hUOFVnUUJJd1RFZ1JqQkpjeEVBTTVqTmZ6RDVFL2RYQ0JTaHd1anVqLzFsRHNuZ2hUdFU1ZFlRaFZuelRKU3J4N3A0bnRpbHFBYUdvTHJ6WnlwVlBmdXdYeCtIRTFOcXVuc3MxWFRQLzRSVGs3NDJnUnFBemlSVkdXRURHK1dTSWdhQWRrRGlScmhuTW4zemhEYzdNcDVFSjYyS1ZQVURMekp0NDRaNHdZdDNLWGV1QWR6Q1pvVkxudk54YUZFclJMV2ViQVJMT0V4TlQxblBpN3ZPTkhTZjM0bXZnamNMT2RETEpDcjhTcmlRR3A4QUZpWXo2V3JUUzNxK1ZaaHpxd1pXQVpxd1o2SWk5SnBIOThqS1ZXYm1IczNyblEzbkxtRTFaZkxadDJ3N0pad1laK3liNlVJQXRvSXlCS1dObFRDaURmVXBZRUNzd2IyaWdxTkFwYVArREJ0UFBqZ2NFM0FJVTNGSm5aUW1IcmRjc3VweHUyMy8yVWZZOUZGdzdVYm92YnNrMDVTYzY1TmRDdGlHdFJmSFV0WjM0UXdRNnJXRUFMaVFHcW9zOE9hQ2dkeU8yVG83VEtIYkt6TDZhZi9mREF3eFBXMTA3R25VYjVKelR2Vkc3ZmUrbWVIZ1lpcHVwVldDcW1wdytxWStVeUR6bTFmZmVWUXFMR28yK0ZBUW5wdjR6YWxRa1lSRUFlUzBZNkxXMjA0RHk1eHZBaUtiZG16Y2NjZFZiZGh3MVRCY2xZd2MrZWRWUXMzNXpmYjdPZFpCdlpaMnFPOWREYko0d2JZYTIvdUxiZjhuUDQrdWNLOCs1dkRpYnljbkFyU2NsWVFFQWVTbFo1S1dFODRrRmVnd2dKWmRxTldxMjZwcFZSM1hCeGxmRW9jaXZHT2pycGxsMVVLbStxWktZak1tcmIwMG9wcDVoTXNyOENCT04vblN0QWVhVG9pQkdKN200eElmeEViQXdKd0hyOUx3bm5RTk41WlBuM2dRRFg3MUZPVll1aXNRYWxiZmZWc09RL2Foc2lzaHQ4UjdrVExKdWh6T1Z5WWFCZGtvM0Z4SU5ub3A2UzFQQ2RwQmVaY2RaV2FCb2ZRZk04OVNhc1NlZnVOTyswVWVSc2FEWnlyd1NNc05ZNkFPSkFhSHdCQjV1Tk5kRS93ckJ2RUYrWDNCZVM0YXRoa0U5WHBrRU5VSFE0SUtpUXh6SFBocWZZVWxIVzl2aytCS3FKQ1doR1FQWkMwOWt4SzlFcHM3d01iNXp3TXlMZngrcTIyVWdXY1ZxK2xNbU9ERFZSTEZEYzRtb0VvZXlGbWVOVWN0OHhBYXE3TDlRMkc4OWdjM0xGdW5QTlNxTzVEaDZwZVgzNnB1dUpVZU1OdXU5V2M4MkFQTVdJc0JZVjdJUndEVWdTQmlnaUlBNUdCNFlmQWFYSEMwMlhRSU5VVGtWT05mL2lEVXAwN3g5bDA2dHBLaVFNaExyR09nZFIxaENqa2k0QXNZY2tBcVlnQTNqeVh3aGZqUVkxUlE4UThVRHp2MFhqQUFWRTNsUjM1czJlcnFZc3Nvb29JNjAyNDhLckdmZ2pyL1RaaFBhVDVGQ0lnTTVBVWRrcEtWRG8wRHVkQlc3dmRjWWM0ai9KT3h4VzlEUzd2U2JFZlZIeUI0RmlRSWdnc2dJQTRFQmtVQ3lEZ1pXWGxQZWVSbHk2NEU2TngzMzBqYnllTERhUm9HU3VXc1pERlBxcDFuY1dCMVBvSXFHdy9UeUd2RURVMDlXdXNvYnI4N1c5Uk41TlorUTFJdjVLU3NnSmVLalpMaVM2aVJvb1FFQWVTb3M1SWtTcjd4YUZMMXdzdk5McENOZzZkMHRSRy9UcnJ0TitwbnBJaTA4U1VkRVNhMUJBSGtxYmVTSUV1M3ZMVjNsR3JVci9paXFvQnlRNmwrQ0RBQTVUcE9GUklKZmVSQzZka3RKWWpJQTVFeGtRNUFqejN3UWlzU0V0N3hCVWVrRkw4RVVqUk1oYkhSS3huZ21Sc3BCOEIrUVdudjQvaTFqQ1dSRXhNcjE0VHBhMU5OVDArUWsyNzZPOXEraFZYcStiMzNqY3l1ekVkQndvN2RJNWxiQmdCSk15SklpRG5RQktGUDMyTlk1bUNGNU52R0xWbXZYRmpvT3JaTStwbUVwWGY5djMzYXVKUng2bTU3MzB3bng3ZDk5bEw5Yjd3UEp5dzBUdGlNMzNsbFZYclo1OGxhb3ZYK0dzNEQ3SlJHaFFSSGRLQmdNeEEwdEVQcWRBQ3ptTVJLTEplMU1vVWV1RkczSnc3aitLTUdlcW5ndzVkd0hrUTI1bjNEVmNUanoxUjRiNWRMYWhURk02N25qZEd0UFFXcHZ3aklBNGsvMzFzWWlGRE5ldE5LdGp3Rm5EblJkN0wxUE11Vk0xangxVTFzK21aNTlUMEs2L1JnaUZGK3lBY0d4TE9xOVZydGNFa0RxUTIrbG5YeWdHNmpHSDRpb1lYUTRWcEs0bTZMWjkrcG1iZC8wQmcwOVAvZGIxcThYRXlIUUlhY0ljN1U5cW5wSWdEU1VsSHBFR04xSXpLTklBaE9zVHpka2tIVXB3MEtiZHd6N2pwMzZxSXpmT2dVcHc3VjAzLzU1VkJiTzNaaU91UjNqMGxKWmFYakpUWUttb0VJQ0FPUklaSU93SmVqSC8vdU9Cb2ZlT051SnFLdDUwNWM5WHNSeC9YYm5QMmlKR3E5ZHZ2QXZsVHRJelZYODZEQkhaWHpUQ0lBNm1acmc0MGxLbExZZ3VMYWhrMUtsQ2hMRExNZWVsbDFXYXdSRmRzYmRWYTdrcFJPQy9IeVBKWjdCdlIyVDBDNGtEY1k1cFZpV3ZGcVhqTDAwL0gyVnhzYmMxNWxWSFFabVgyRTA4R1ZxakhsYjZGYnQwQytXSmlXRHVtZHFTWmxDTWdEaVRsSFJTamVxdkgySlpxZmYxMVZadzhPYzRtWTJuTDlLQWdsV3IrNkdQVjlzT1AvdnJoZ3EwR1hPMmJraExyV0VtSnphSkdCUVRFZ2NpdzZFQWcxbVdKSXM1QXREejNYTzdRYng3N3VaVk5jMThQM2hOSzBYbVFXTWVLRmFCU0tSWUV4SUhFQW5NbUdvbjlvZER5MUZQaGdHbkdaWGt0TGVGa3VLeU4vWXkySDM2d2tqajMvZmxQcTFjU2txSjlrSDVXUmtxbDNDRWdEaVIzWFdwdFVPd1BCZHQ5a0RrdmpsWS83cktIK25hVnRkcUovNTl4NHkycU9HdVd0ZkV1S3JaTm5xSVZ2bHVwTFozeklIVzRQNlZ1OGNWZHFCcFdSdXd2RzJFVmx2clJJQ0FPSkJwY3N5ZzE5aWRUNjlpeHFtMzhlQ09zNWp6L1h6WHgwS01VMzloNTFvSlJUUHovMUFzdVZoTzIyazQxYVd4SUd6Vm93RnpFUGVhMnBmWHJiNEtyTXIxN09wSXJ4ajVXZ3NFUmppUVFFQWVTQk9vcGF4TngvY3d0MGlNSnRZeG1JWEFXVTg0Nld4V3JMRnUxL3ZpVG1uamNTWXBwUkhUelREbTFXZVB3WUxYMldpZnFIYXhNeVRKV0QyL01PSVZQaEdVUEFYRWcyZXV6S0RSbUVzVkVpc2sreUp5WFgxRXRYMzBkcU9lTVc0YXF5YWNNVWlyRUF6MndrVW9NbXRsMUsxVXRUcCt1MVdSS1ppRFVOYkV4b3dXVU1NV0NnRGlRV0dCT2ZTTUxKNlZoeTdQUEtvV1poVTZaKzFwd3BGS0huRmtQUDZxbW5IbVdqbGhuUEhVaE1nd1hHUkNnVVFwTEw2M3FWMXROZ3pOeWxzVEdUT1NXU1FQYUNJZ0QwWVlxMTR5SnBjZHRtemhSdGI3empoYTRMVjk5cGNYWHdUVHozdnZWakNFM0dOVUp3MXpvMlVNVmNGN0RwaFRxOVpNZ3AyUVdZbWVvRFRoU0o3VUlpQU5KYmRmRXFsaW5XRnNyYTB4M0dhczQwenpLYXRvL0xsZHpMVTZIMitMUnNMVGRiY0FtcDh4VHNnOGlEc1Iya09Tb25qaVFISFZtQ0ZPU2RTQ2FhVTBLbmN6VlpKVFc1RUZueEJiaTI3RGlyNjI2b2E2UC9vb1FUNlNiekZpc0ZBcXVaTjRad1RLRkkyTUlpQVBKV0lkRnBHNGhJcmxhWWx0ZWZGRXBqUkRZdXI1Mis3WXRDSkdkZGxsdzJuUXRaUU9ZR3Rld3kvSlJiekp6d1kyT3pJMlZjRWwwekNSc3V6VHZJU0FPUklZQ0VaaWJKQXpGT1hOVXkralJnU28wTEx0c0lFODFocG0zM3FaYVBoOXZYViszWXVlTjdLNlRielNjdWFSZ0gwUnYxMThYT09ITEpBTGlRRExaYmM2VlR2eGhvTE1QMHJpR2ZmUVJ6NDVNdit3SzU4Q1ZDK3kwd1hxcXJvZjVrWnJHdGRZMDBxMXgrKzJOK0NOZ1Ruek1SR0NUaURSRVFCeUlJV0E1WlRmZm5YWU1oTTZCd2s3cnJHTWQ1VVIxWno4K0l2cFpDTTZDZE5sdUd5TjBDb1dDNnJ6cHhrWjE2amZjVUJWQ2hBMGJOVmFaZVlZREdTSWk0d2lJQThsNEJ6cFNQL0c4NmkxdnZhV0tQLzNrYjA3blRxcnp4aHRabTh6VUp6T0hEck91cjF1eDI3NTc2N0syOHpXdWlSeFhpeTFtVkVmQlVUVU1IR2hXeHkzM1ZMZmlSRm9XRVJBSGtzVmVjNi96RlBjaXpTVzJIeW9NS0YxMzJpR0l4ZmY3V2Y5NUNEcyswVzc1ZE41c0U5WEpZRE85Mjk1N1d0bVVjRGh2S3NhTUZYQlN5UmtDNGtDY1FabGRRUXNYaXpPaGZmTExXQnJwM2J2dXZKTXFkTEUvZ3RBMmJicHFlblpVNUozVjYzU2tVdEVvOVFzdnJMcnRZK2RBRXJ3bmZTYkdqQ3hoYWZSdjNsbkVnZVM5aC9YdDAwZ0hxeS9NaHJOWjR6eElBU0dzM1hiZHhVYjh2RHF6bjNvbVZIMmR5cDIzMmtKMTIyTzNRTmFlZnpyVitxcmF1bFZYVlhWSWJaSkErVGFCTnFYSkZDSWdEaVNGblpLUVNzRlpDaU5Xck8yTEwxVGJaNThGdHRMajZDTVVONTV0eTV6Ukw5dFdOYXJYKzRKelZTZWY2S3F1TzJ5bnVoOTBnSkhNY3VhRXdubkZnWVRxdGZ4VUZnZVNuNzRNYThuNHNBSmMxTmNKNTIxWWFVWFY1YmUvc1c2dTlmdnZWUnNvNnNMMEpIM3ZHcWE2L21iQmZSdk9UdnBjZlVWb0ZSSUs1eDBiV25FUmtBc0VDcnliV29vZ2dQc2R6Z1FLRnlXTlJLYzk5bERkaGc4UFZLTjEvQmRxd2c0N3E2TGxobmpmVzI5V1hHYUtxelMvL1k3cW1QbDAzbkp6WlhydW81cWV4UWtUMU5RbGw0ekxqSTUyL29JOWtNVEhTdHhHUzNzTElpQXpFQmtWSFFqOEx3MVF0RHozbk5ZOTUvWDlsbE05ampyY1d1WFdiK05kaFduc3Y0N3FjY0t4N2VUS2VkRDRBcTY0clY5ckxXc2NMQ3QrWWxsUHF1VU1BWEVnT2V2UUVPYThINkt1czZwdFU2YW8xamZmMUpMWDY1UVRWU09XczJ3S283SHlVaEpZeG5vM0w5aUpIZUVRRUFjU0RyODgxZjRVeGt4TGcwRTYreUR0ZWlJN2I1K3Ivb213M3NTdU0wa0RYSXJaZVdNc0ROK1ZQWkFZQVU5elUrSkEwdHc3TWVxR05XMXVodW5kN0JTeFhqcmh2QjBxTkt5MnFscjQ0dk9ObzdKTTBxZEhiRzVvOGZYcnJ4OWFob0dBdDd5eFlsQkZXUE9LZ0RpUXZQYXNuVjJ2MkZWelc2djFwWmVVbXNtempYcWw2KzYvVTcwR242Ykg3SEhaTG4wWk5SSVRjMkdKSlZRaHhIM3NobXJHRXdOdHFKU3dKNE9BT0pCa2NFOXJxLzlOZzJLOEg3emx2MmFxOURqK0dMWFFtWC9TbW9uVTQxNlJ4clVkYlR3ankyL1RpSkZxN2l0amtvT3VEajlqaEF6SFZNU0J4QVIwRnBvUkI1S0ZYb3BQUjE3SzBScGZjOVZiMHQ0SEtSSFI0OWlqVlo5cnJ3eE1wOTdqU0VSdjhhSHJvRXc2OWtRMUVmVGovcjlYTTI0ZTZrQ2lwUWpjcVJKRDRkaDRQb1oycEltTUlPRG1WNVFSWTBWTmZ3U3d0ajBKSEhvaFVCR0RhYklQVXFvS0R4Z3VOdkl4MVJYL1ZqcXR6a045UE1udW9qU05mRnJOZnZxWEJKRDhPNGxTbkRSSkZadWE0bWo2VFl5UnhETTN4MkdvdEtHSGdEZ1FQWnhxaVd0RUdveHRmZTg5VmJROExWNi8xSktxejcrdVVvczlNMEl0aEtTRzNmYmNUWFUvY0QrMXlBMy9VbjJHWEtNOSs1Z3g1RVkxWWNCQU5mSHdvMVhML3hpa1ZsS3d6RGIxZ2t2bSs0aFplSk1vcmUvRUZ2dndWQkwyU1p2cFJVQk9vcWUzYnhMUkRDZlNOMFhEMk1WT3ZuUy83VGJWZU5CQmlTakNrKzdmRC96bDFyOUNmVDN5VnUydmVnMUM4c09GRmxJemh0eWdwbDU4NlR6ZDZyR1J2Zmlva1ltRUZEZjk5YStxNmFKWURvWnZnaG5JcTRsMGlEU2FTZ1JrQnBMS2JrbFVLVVppSlo2Wmx3allMbU01UWErdU1OOFNXTEcxVmMwWWRvZjZmcXZ0MjUzSDlHdUd6TmRNK3daK0V1ZFJvRmZ6WFhjNU1UbEF5SGY0UHNGSWdUaE1sRFpNRVJBSFlvcFl6dm05R1AvL3BNRk1uV3R1bzlLemZ0bGxWYSsvbnJuQTNTTThLYytaUjl1TVg2N0Q2THordW9xaHhFbVU1b2NlVXEzang4ZlI5QU55L2lNT21MUFZoamlRYlBWWFhOcmVHMWREZnUyMGZmT05hdnY0NDhSVTZYSGtZV3J4cDBlb3JqdnQ2S3REOThNUFRVWkhSRjV4K1NxbWNtZE03VWd6R1VKQUhFaUdPaXN1VmZHbXlVTVlxVWhYWVJQTzZ4S24rbVdXVm4ydXUxb3RldmZ0cWhHbjNpdVZ5WDhjcktaZGNxa3FHaHgrZEtGajA3bm5xdFpQWXNsck9BNWpJaFg3WWk1d0V4bnVFQkFINGc3THZFbTZOUTBHSmJvUFVnSkFwMDAyVWoyUFBhb2lKRXdwUC8yNkc5U0VyWGRRcys0TFRrWHZBdGZtdSs5V1RSZGY3RUtVam94LzZ6QUpUKzBoSUZGWXRkZm5XaFlqR21zWk1JNEROV3BWaUlpcDBMT25XdWlubjZCRm9tb29oZVVpT29pV2I3bVg3Ris2YkxHNVdtVFl6Y2kxYm45cm9sOEwzRFNmZGNnaHFvaFQ4REVVTnJJY1ppRHg1citQd1RCcElqd0NNZ01KajJFdUplQ0J3U3R1SDByYXVPTDA2YXIxdGRlU1ZxTjlobEhxUEJxVy9aVmEvSW1IVlpldEY4eUUyL1RmRjFYemV4Rmt4OGRod2FiQmc5Vk1oRGJINUR5SSs4UGlQQklmZnFsVlFCeElhcnNtRllyaDFGM3lwZm1wWk0rdnRYNzN2WnFPUTRXbFpTRkVhREVUOENML3ZsSDFIWHFUYXZ6MUN2Tytaamh2L1ZKTHVRTU9oeGFiNzdoRFRWOWpEZFYwMldYdTVPcEp1bHlQVGJocUVRRlp3cXJGWGpld0dVdFpQRGkya1VFVjU2d05Bd2FvSG9iSkZWMHFNZVhQWjZtWmQvMFNtTVlUNTMzdkhEWi9FMWhPSWsvemh4K3FibnZ0cVRwdHNGNDRGYVpOVTd5ZHNYbmtTTlg4NElPcTdidmdwYk53RFZhc1BRYXpqNDBqa0NzaWM0S0FPSkNjZEdSVVpzQ0I3QTdaaVo0TDRTbndoU1pPVktwWHI2ak05SlU3OGRBalZkT29GOXA1cU10aVdMcHFXSGtsdDdwZ2x0RTZaa3o3NGNtV1o1NVJyUysvckhoNE1lR3lPeHhJNHN1WUNXTWd6ZnNnSUE1RWhvY3ZBbkFnM0FsbXNpVkgrYy90QU8rQkEzTU51KzVxVnpsa3Jia3Z2Nm9tSG5NOHduUm5xVjUvK3FQcWNkelJJU1grWEwwTkliZzhMTWtsdXBabm4xWEZrc09KVGhvSUorUmRPSTkxd29tUTJubEhRQnhJM252WWdYMXdJanhtbmVpYmFPZmpqbE5kcjczV2dUV1dJaENxeTNEZFFvOGVsZ0tVS2lLYXJPWEpKOXRuR0p4cHRIM05PSVhVbGozZ1FCNU1yWGFpV0NvUUVBZVNpbTVJdnhKd0lyeElLSmwwczJpNERza0tlMzN4UmZMaHZDRzZpdUczaktES1FIa0p6bU5BQnZRVUZSTkdRS0t3RXU2QUREVS9pS3N1U2VuYmh0VHV6ZmZmbjFUelR0cHQySFpiSjNJaUZzSStIaHh4R3lJK0p3aUlBOGxKUjBadGhwZks0dTZvMi9HVDMzVDIyVXBoR1NtcnBiRFlZcXArbmRSdks5d2xhVXV5T3NMaTExc2NTUHlZWjduRjA2SDg5S1FNYVAzc005VjB6amxKTmUrazNjYnR0bk1pSnlJaDdOc3pJcEl0WW5PSWdEaVFISFpxVkNiaHpaVDNoTVNXL3JXU0hjei8xUHpBQTFHWkdMbmNoblE3a0xPOFBvNGNCMmtnSHdqSUpubysrakUySzdDWnpwY09abVpON0lCWm9WTW4xZjJlZTFURGJydTV0N3V0VGJYaE9sMUdTZkZFZWFjVFRnamZCckwwdHJ6d2dtSm1ZUjRNYk1WaHd4UVdCa2tNa0RzL1V0Z3pLVlpKSEVpS095ZXRxc0dKckFMZDNnUjFTMHBISGsvcGN0NTVxdk1aV0hGcGFBaWxSaEhodE8yaHRUeVB3ZkRhSDM1b2wxZS93Z3FxSjViTmpBdE9wYmUrOFVhN0xNcHRHVDFhRlhGUU1NVmxGblJiRDg0amx0endLY1pCVkRORVFCeUlJV0RDL2pNQ2NDSW40cCtyazhham9YOS8xUVhMV2cwNzdLQ3Z5dFNwcW1YVUtOWE1oenNlOHEwK2wxYjFHanRXMVMyL2ZLRHNOdkMxT3d6T01pQzNpRFl5VkU2QzgwaEYzck1NWVNhcUFnRnhJRElNckJHQUUza0VsWGV4RnVDd1lqMFNEWGJhZjMvRlBZYjZ0ZGRXcW12WFg2UWpvMi9MNjYrMzU1WnFkeGhJR1ZMRVVwVk82VFpraU9wMDlJSW56OXNQQmRJQmRUaWhlSzZWMVZIWmxPY3hPSTlVOUtHcDRzS2ZQQUxpUUpMdmc4eHFBQWZTQjhwektXdTVOQm5CNWExQzM3NUtkZTZzRk5LRDhCNXoyOUpwNzcxVnQzdVJTQkdwMUxrVU5jOWhZSW1xV0N6YWlrMUx2UytoQ0pldWtHaE1paUJnam9BNEVIUE1wRVlKQW5BaTNFd2ZCZXFTUjJBS1NPRFlzTWttN1p2Z1JUaVJIQlVhc3pXY3h5czVza2xNaVJrQmNTQXhBNTdINXVCRURvTmR0K1RSdGh6YmREaWNoMXhWbStNT2pzTTBPUWNTQjhvNWI4TjdFRjJSY3pQelpONWw0anp5MUozSjJTSXprT1N3ejFYTDN2a1EzcnEwVjY0TXk1OHhUQ2kycjV6M3lGL0hKbUdST0pBa1VNOXBtM0FpMkxWV0kwRmI1dFRFckp2MVBBejREWnhIcmpaenN0NHBXZFpmSEVpV2V5K0Z1c09KOE5wQVhtS2U2RFc0S1lRbWFaVmVnd0xid25ra2xzc3NhUUNrZmZjSXlCNkllMHhyV2lJZVVOTUF3STZndDJvYWlIUVp6MUJyemp6RWVhU3JYekt2alRpUXpIZGgrZ3pBZzJvS3RHTGEyVEhwMDY3bU5HSWZjT1l4cWVZc0Y0TWpSMEFjU09RUTEyWUQzZ09MVHVTRjJrUWdGVmFQZ2hiYmV3NDlGUXFKRXZsQ1FCeEl2dm96VmRaNFN5WmN6aHFlS3NWcVF4bGl6bVVyTGlsS0VRUWlRVUFjU0NTd2l0QU9CTHlJbjMzdzl4V0NTbXdJL0FNdE1WUjNUbXd0U2tNMWlZQkVZZFZrdHlkak5DSzBqa0RMMTRJWTdpdkZQUUlNenowUmp1Tm05NkpGb2lDd0lBTGlRR1JVeElvQW5NaW1hSkFIRHBlSnRlSDhOOGJFaVB2QWVVamdRdjc3T2pVV3loSldhcnFpTmhUQkE0NDMzL1VIUFZZYkZzZGk1ZU5vWlgxeEhyRmdMWTJVSUNBT1JJWkQ3QWd3ZmJoM0I4V3BhSnkzNFVteFEyQTJxcDBLTEhjRy9XUW5RbW9KQXZZSXlCS1dQWFpTMHdFQ1dOSmFGV0tHZ1RaMElLNldSTHdLWXcrRDQvaW9sb3dXVzlPRmdNeEEwdFVmTmFjTkhvQWZ3Mmp1aS93SkpDZWxnMGNBdzNKUEEyMG16aU1ZTE9HSUZnR1pnVVNMcjBnM1FBQ3prV1hCZmltSVliOVNGa1RnSG53MENJN2pHd0ZIRUVnREF1SkEwdEFMb3NOOENNQ1JiSUVQL2duYVFLQnBSNERMVlhRY293VVBRU0JOQ0lnRFNWTnZpQzdsam9SM2k1d0hXcjFHb1hrZmRwOER4eUVuK1d0MEFLVGRiSEVnYWUraEd0ZlB1NmlLUzFxbmc5YXJFVGlZUGZmdm9IdmhQSW8xWXJPWW1VRUV4SUZrc05OcVZXVTRrKzFoKzBtZ25VQU5PY09oQmZid2JNeFZjQnJQNXN3Mk1TZW5DSWdEeVduSDV0a3NPSkxsWU45Um9OK0QrUDhzbDYrZy9HMmdHK0U0eG1mWkVORzk5aEFRQjFKN2ZaNGJpK0ZJQ2pCbUlHaC8wRzZneFRObUhQZDQvaVBMVkJuck5WRjNIZ0xpUUdRdzVBSUJiNjlrQUl6WkdiUURhQjFRMnM4NUxTTWh1YmtZZmpWcmhEaVFtdTM2ZkJzT2g3SXJMSHc0NVZhS0EwbDVCNGw2L2dpay9RMU4razhRc0VWZ3BtMUZxU2NJQ0FKNkNNZ01SQThuNGNvWUFwaUJiQU9WbnpGVWV5TDRHZUhWRGRRRnhFaXZObEFyYUM2SVRvbnBWZzRFL1oraDdFcnNNZ054QUtLSVNBNEJjU0RKWVM4dFI0aUFwUU9aZ0QySkpZTFVnbXptN2VLdGYyR0xPSkN3Q0VyOVJCR1FKYXhFNFpmR0JRRkJRQkRJTGdMaVFMTGJkNks1SUNBSUNBS0pJaUFPSkZINHBYRkJRQkFRQkxLTGdEaVE3UGFkYUM0SUNBS0NRS0lJaUFOSkZINXBYQkFRQkFTQjdDSWdEaVM3ZlNlYSt5UEEwRnZUWWxQSHRBM2hGd1J5ZzRBNGtOeDBwUmhTaG9ETnJYM2ZDb3FDZ0NDZ2o0QTRFSDJzaERORENPQTh4MmRROXd0RGxVMFBIaHFLRjNaQklGOElpQVBKVjMrS05mTWpjSWtCSUR4bGZwVUJ2N0FLQWpXUGdEaVFtaDhDdVFiZ2VsZzNRdFBDa3pGcmtTVXNUYkNFVFJBZ0F1SkFaQnprRmdFNEJPYXg0cDBiZC9zWXlabkhrZUM5SmJkQWlHR0NRRVFJaUFPSkNGZ1JtdzRFNEJobWdRNkFObHVEN2dHTkJmMEFlZ3QwS1dnVmZIOXpPclFWTFFTQmJDRWd5UlN6MVYraWJRb1FrR1NLS2VnRVVTRVZDTWdNSkJYZElFb0lBb0tBSUpBOUJNU0JaSy9QUkdOQlFCQVFCRktCZ0RpUVZIU0RLQ0VJQ0FLQ1FQWVFFQWVTdlQ0VGpRVUJRVUFRU0FVQzRrQlMwUTJpUk1ZUW1PMUlYMWR5SEtrallnUUJNd1RFZ1pqaEpkeUNBQkVZN3dDR3FRZ2ZudVJBam9nUUJCSkRRQnhJWXRCTHd4bEdZRFIwbnh0Uy8rZEQxcGZxZ2tEaUNJZ0RTYndMUklHc0lZQ1p3eFRvL0orUWVzdko5NUFBU3ZYa0VaQ0RoTW4zZ1dpUVFRUndtSEJscVAwT3FJdUYrcVBoaERhM3FDZFZCSUZVSVNBemtGUjFoeWlURlFUZ0FQNEhYVSsyMEpkcFZBNjJxQ2RWQklIVUlTQU9KSFZkSWdwbEJRRTRrUnVoNjBtZ1prMmR2d1RmZHFqM3VTYS9zQWtDcVVaQUhFaXF1MGVVU3pzQ2NBYlhRRWN1Ujczc295czMzSmxhZmwzd3Y1ZDJtMFEvUVVBWEFka0QwVVZLK0FTQkFBU3dMN0l1V0hZRXJRVHFCcG9JWXRiZmgrRTRmaFFBQllHOElTQU9KRzg5S3ZZSUFvS0FJQkFUQXJLRUZSUFEwb3dnSUFnSUFubERRR1lnS2UxUkxJZlVRN1VsUU4xQlBMVThJYVdxaWxxQ2dDQlFvd2pJRENSbEhRL0hNUkQwRU5TYURQb2E5QW5vZTN6MkEyZ1lhTTJVcVN6cUNBS0NRSTBpSURPUUZIVThuTU9GVU9mUEFTb3hvdWNZekVpR3BraDFVY1ZEQUgzSVdTTVBHWFlGY1JQOVExNnJLd0FKQW5sRVFCeElTbm9WRDU1RG9jcS9OZFZwQWQrV2VERDVoWTVxaWhLMnNBaWc3eG9nNHdqUThhQzF5K1ROd2Q5UGdpNUJmNzBVdGkycEx3aWtDUUZ4SUNub0RXKy9ZenhVV2NaQW5XZnhRTnJXZ0Y5WUkwQUFmY2VRM1h0Qi9RUEV0K0g3RzBDbm9OL0NKbUtNd0JJUktRaVlJeUFPeEJ3ejV6WHdFTm9NUXBuaDFhUzBnbmt4U1FsdUFwbGJYdlRiS3BENEF2dkJRUEtqNE4wRC9jWlpwQlJCSU5NSXlDWjZPcnB2TFFzMUdLVzFoa1U5cWVJQUFUZ1A3bkU4YU9nODJQSXVvUE1kcUNBaUJJSEVFUkFIa25nWHRDdXdzS1VhdlMzclNiWHdDQXlDaUZVdHhaem16VjRzcTBzMVFTQWRDSWdEeVhZL1NQOGwwSC9lbnRVSklacHVSTjB3OVVNMExWVUZBWGNJeUFQSUhaWWlxWFlRMkFDbU1sdzNUTms1VEdXcEt3aWtBWUdhY2lCNGMxd1JkQkhvR2RCclBMQUhPZ1hVS3cyZElUcGtCZ0VYZTAvOU1PNlljRkdLSUpCWkJHckNnZUNIV2dCeDQvSUQwSm1nYlVCOGkvd2Q2QXJRWi9pZS81Y2lDT2dnc0pBT1V3QVBmM3Z5NHVJQVNCR1JIQUpPdzNpOVU3Z01TVjBhMUFrMEJmUSs2SFdFTFRMc05KRUN2ZjZGaG84TGFKejY3UTA5SHpSUkVyS1pxNG8ycndEaUcrVlVFQjJWdHMyUThSZndYMkRTcnNlN08vUmwycFBjbFdLeHlBM3FUVUY5UUROQmIrQTk0TFUwR0lyK09oeDYzQnhTRjU0TDZTbW4xRU9pNkZYSGVPRUJ6b05BSERjOHZQa0c2RmFNbWUvZHRDQlNLaUhneElGNGp1TnFOTEFIaU9HbDVlVXJmSEFtZml4M3h0ME4wSTMzTTR6UWJIY1MrSDROUGFjRThYdU9ndy85bzBDVmxpS1kvSkNwU2E2R3ZLS2ZQSEVndjZBRHFCYmhEeDlVYVkrQUQ0VUQ4VkRnZGJLSkZmVFhSbWo4MVpBS2pNVzRXREdrakpxdmp2RlNBQWlYZ2s2cDhPeVpnYytPd1hpSi9ibFRLeDBUZWdrTFA2WkZBUlpUTk94ZG9RTTdjUHdWL25NSGVQK1lBTEJuR0xUSnQ5MmpnL2hoUncvd1BPOE4ybXJyMkl2ait5dEJ0d1RKays5L1JzQjdHRHlDLzFiYllGNGYzejBOUGhkTFNHRmdweVA3Tm93QTFPV0JRaW5oRVRnWElrNnI4dXpoNzNRWXhzdjI0WnNSQ1pVUUNPMUFJSlRlZjNsTmVMbUJ6YVdlV0FyYTZveUdlTjJvU2RGSkQzSXhCUEpocGxNT2hSNmNXa3NKUm1BZnNIRFp5cS93WlNTSkY1RjVPbm5Mc1p4eDJ4YW1NdUZWdUZKQ0lBREh3TlEvcHdlSTRJcklGU0dha2FvK0NJUnlJRjcwMG40R0NQT0JmcGdCZjFoV3pnSVljMjlTZlBOUndlYmVFTWJFZVNibFR5Yk1OY3k3djZidHVueWE0cXpZTGtldEQ2MXE0cVVMVHVnenk3cFM3UmNFR1BqQ1owcFFXUjNPeGtYa1hGQTdOZmQ5S0FjQ3RMZ1dyTk9CcGNBT2lCSGw2Ulp0QmRVWkNKbGRET1gyaCtPaE01UGlqd0FqNDNUS0tuZ2dKQnJCQkFmQWpkcmRRYWFidEF4NitKdU9rY0lUaUlESmFvWUpiMkREd3ZBekFtRWR5SElXUVBhenFHTlZCVDl5WHNvMDFyRHk2d0g4dGh1ZnR2VU0xYzhtdTdmL3dlZzkzV0xDcXl2VGlBL2o2MU5VWUFRZTkwU0NDcU91dU96RlNML0VJaEtEbE16WTkwRXZlNlhtbVBCbURJYmsxQTNyUUd3Mk0yM3FoRUhvSm9QSy9KRUhiWHB6WTg2bTJOYXphU3VMZFppYzBHUThNbnc2OFFKbjhEbVUyQmgwcE9kSU9JWkt5Mno4OFFCb1UvQ2VMRmw0blhiWmk1clMyQWVwQ0FIWDFEY3piQ1kvMkVwR01ZVE90TmpVTVcyamxQOHEvS0c3Vm4wVGZ1QnZCalJtcTc5dHZUQzJaNm11S1Q2bS9KRmh3UmtGNkdZUWwrQ1kycDNMdE51QitvTjY0L085UUdNaVU2QjJCVC9yT2UwZ0JJWWdsSmRuaWFRNFJpQ3NBM0dzam50eDNrRXRwdEQrT0VENi9maitKUGNhaU1SYVFnRGpiU0xvSmRBem9IZEFjbmxVUkFNQVRvSG5xeGhROFkxUEV3eTM1MEZkS1JFZ2tIc0hRc3k4WllZTjhkOXpRS1h4KzF4dWVCdDBJSGoya1I5N0JDTk1SQW9DRVNJQUo4Sm9Oczc4dVBUTWc0TWQ1VHY4NS85QU80Q25LVUlWYWxwMFRUZ1F6NG5NZ0lNNEY4VE4xMlZCdk1ScFVmeTlMdWl1bWg0Rllyd2drR0VFbUs0RXhORDZ2aURlRXRrUHREUStPeDhrTThBSSs3Wm1IRWdwaG5BWVg0SGVCekYxaVJSQlFCRElBUUp3Rm5PWTVnYjBoYmU4bFFPcjBtMUNJU0JOazYvMk9OdkFXOWw0RXQya1RNYURteWxEdEFyYTRFRkF6aGI0ZHNHWSsvZFEzemUzbEo5Z3lHT3VKYjZoZENRKy9CVHlHS1doVlZDZnFSTnM0dmgzUWpzVmMzS2xMUmNXOU9rSkc1Y0VNV0tPWjE3WUJ3dzk1ZHZjTkJBZDd3VFlVeDV4cElWaEpTWjBLYU9xU3BjZ2dtUnRWQ201SXVUd1hOSnFudTdVOVhQd1RRa1NGdlE5NUJLVDFUMDh2b1ZNaHZCYUYwOVBIbTdqZVphZlFCOUNwaGFlcU1zekRUend5bkg3RWVwcDRZWjZUSEQ2YXhCL0EreFB0a3Q4ck81bjkwS3ZWNFlNM28zQ01Oa1ArQkRYQWNYcmI5ckIyemhaaDcvdEw4TTgrQ0dUeHdwSXRPZGp5SEw2Z2dqNXZTR1htUkFZVVVrc1o0RW1lbnBiWWFpRFZUbVAxNC84ZmJJZkdiMUlYWWdoRTduK0FMdC90SkZyVXllMU14QSt4RUNYRUJBUTQreWZCTDBEK2h5ZkgyeHFMT293cFFnanJDaVBaejFlOE9STnd1ZVBnVFl4bFprSGZqcFUwTDZnSzBBdmd2aFE0WVAzRXhBamg0alRNNkJSSU9ZOFkzWmw3aU0xZ1hjYzZGSFFoYUNkdmN3RWljQ0NIOVVXb0lmUitCVFFXNTYrN08rZjhQbGJvRUUyT2JSUVoyblFQWkREQjhVcm50ei80Yk54b0QrWUdrdEhCR0lhRThyanVINE85QjdvTzN4K0pxaFNNdEwyWnZEZFhpQW1rdVRaSm00T3MzOW8zeldlUTFwQUhYemVBRG9NUkg3Mkt5TVMvK3YxSldWTngzZFBnWTZvSnFPU2plQTlGcDh6U1NxRFUwWjV0a3pBNTMrdWhnbSs2d282R1VTOXA0RGU5ZXdncnVOQlU5bUhucDNhenlidy94WkVEQ21EZG80Ry9ZRFBSb0JzcngwbTNvdDcrajZJZjVrY2xlZktxRE4vQjdTWmRyQXZadUg3OTBIWGdYYnk2OE5xMlBoOURubDhaLzRENkE2di8rbTRhQ3ZIRDBPWkdZMUdtL25icE4zczA1ZEJWNEIyQTVrZWZOWlhFOElKbEJYQnZROENjUjNJaENZRnRRZDVxNFBHQnNqOWU1QWNmZzhaOWFCN05YUnNBYyt4UVRMQmM2NkdyRXA0L0thYWJNajdpNlZNRGc3anZrTmJEYUQ5UUNOQnpaWnRWN0p4RG1ROURqb1kxTVZFdDdhMnR1NmdvZ0Z0U1BuZzd3eTZVYlBlQlBBZHBLc1hlSmNBZlJrZyt5OEc4cnBBMXBnQWVVeit0MENmb3M3Qm9GYWZ1bmVYMXdOdmY5QjdtdGdRKzNHZ0hZTHNBYzlaQVRML3I0SXUyNkRPZUFOZDNnSHZlaHE2L0Q0QWw4bjRucWxNdEg4bjRGOFJkQnRvcm9HK3BXUDNHOVFiQk9wbTBtNEZ6UHA1WTN1V3BSNGRPazFCL1N0QXZ3cWpUNlc2Mmw1ZTN5V0Y0L1NTTGRLakJxVWVHQXhlblp4SURPRmprcjZnd2plL3EvTStFL0V3NDV2bjNTQm1LVzBJQXNiZ2UwNmxkd0lOQTNGMmNpd29zakdHQVUzZE9ldmdJVDZkd2pNYXQ2TWU4MWpwbE12QXhDVUx2M0kyNU9tKzVRNkdJRVlEK3BXRElZOWg1L01LL3VieTNqOUJmbGp1Qjc1NWlVUHgveDNBejVuR21qcUdlanhNaXZvRTZwNVlyUTYrV3hiZm5SVWdrMDZWU3l6dEJmOC9CUDl3K2RZa2M4WGE0QitOdXJ2NzZNSmxiWjd6OHNPbE43Ni9VUWNEdE1VbGZTWm41Q3pqOXlEVFBIb2R6U3lGLzNCcC93UEkyMGFuN1hJZTFPT1JBczRvT0xhNVRCV21jQ21hNmU0L2hseHVPemdya2YyNGJUVDBsa0NZemxzM2I1VHZKVXlReHgrZVNTSkRQcEFZK3BlN0FpeTZnSGd2QWlQT2RMTW5oOEdCRDVEclFNK2ozWGtQa3pBQ0s5U2xJK0NEMHJTY0d1UkU4RDJkamM2TEI1MG1sM044QytUeHR4WjBxVm1IalBJSCtHL3hCUitXUVlYMzhmQ0J6WWZ2Y0pCTjlnUHFlU1ZrN0ZtbE1TWlBEY3AveHlXVGRpY0lPWHhKNFFQYzVtRk1PWnhaVmN2UXpLVnM3cUVFbGMwZ1kxMC9KbnpQdHU0RGNkazg3QU83bzZsKytNOUl5T2FMZzFieG5OajFZS1pqZEoxdGdmdStsNktOYTdXVTBXQktqUVB4M2xUNVZzeU5TdDJ5QXVyNTVaamFHb0o2NlFyeitMYURURmNEeUxEcGFOZzliQitFOUFPaWFjRlhLdCtLUjBNSHZwVzVMSHg0VkgxVDFtaUlUc1J2RDJOTHlOQjk2T204WlhKYzZ6clNMYUZiNlY2SWJwTEpUVkNQT3Q4R3NuRWVIYkR4dVhBRFpQR3VuL0tpZTQzQkFOVG53MzJvQVk2VnVvM09pc3Q2bFp5V0R1NGRNcXRlMCtCaHpYMnV2VFRHalNrTCs1SEw3YndDUXFlY0I2YkFPNGwwQlBud0hBOTluRnd4a1JvSEFtTTU1ZVB5aDJueDg5STJLWno1UnNuSWtqeVYwMkFNYjJaTXFuREdjemVjaU12MEl5YzRNSVp2Mm93Z3FsUjRua0MzNkl3WEhaNk85dmdDVTdyY28rdDQxa005TGxWd0JoSzJNTUxuekFwQ2RIWFpBblc1Zk96aXhZRXZpWlVlcWlhWSt2RmVDUG0vQ3d0WVFQMHpNTlpPOXVQQjkzeFJxQnFFNEZpLy8rZENYaW9jQ0I0c2g4TVltMHVDbWxIUEw5dHViMHVRYk90Wk5oZGROZStoN1hUZDAxSmJQbEQydHF4YnFacUxzY3QrUHIrS1RpWkpQenQ3U3lCKzVwbklvNXhTZnQwWk1aZGhmSmQxRGZFL0hIYVZ0NjJyQy9jd1hhWUdxalRiTk1HMDRrb0U3T080TkZubU5vUndQdlovZUU2aW1nd3VuMWVOd2d2VGNJVzZ5ME9YMWNMS2RQRWpES1VESG5Ec3dIOVpDbmtVOFcxK01mQzI5cmw4VTdZMHpWazF2a2xYZThzT2FvUWh6MitDWGdVeC9GUDd2RXdWd1R3dG5MYkM4TWgrRlpReUhUdEJQL3lnNzh0Vk1HMi9vejVuMEs1S2J3Z3FuN21hL0RhQzlrcE05RndaL2RTL3JJSUpwZ3Z3Y3I4QjhvSTI0U3ZwaUNERDlxTUEvRzJZSkdsazMxenY3WWZOSnhlZmNjYkh2UzdkUWgyNGFzT2xYRjdTeDcwYmh2V2FGSjE5TlY5NXRvUFVSTW1xdkhBZS9mQWxOL3RzQmhvUHp1Unl3OXNKdUw4SU1kMEQ0dmtFVG05WGduTmVITFErYUJOUXg2RTNib3ErYktuajVvNlhzU3pWbUs4YTl3eU9keUVvcHpKTTlobWlocURxUG9abHc5em83MjlRZHh4NGR3VXRpdFhZRFVIY0Qrb0RPaFRFTXlJNmhjdU1CMVpncEcyNkVaRnNxei9hSHd5NkhUUVVkQ2FJUzJEOG5YSS9KNmkwZ1lGWEVZUXFpVGtRUEVoNlF2T0gyUm1XRmd6Q1ErMER5N3ExVkcwOGpPVmdDU3F0WU9CTWtJN2pieUFtcVp1djRMTVcwTlA0a01FSk5rNkUrMVcyL1Iya2Y1anZlVGJFNU0wNlRGdFpxNnU3YVI2SFhhNTFNUW5DK0JJR0RzQkQrdEhTakFITXRRVzZGZDh4ZmIvdURQMk1DbUN0WXdEZ1UyaVRoemdYS1BpY0dRMTR2SUVCQVp5bFZDdWp3UGUxUVpzVldSTnhJRjVVMEIzUWFDMUxBODdHZzh4WktKcWxEcG1vQnB5NERNV0h2bDloT3V3ZHdYc0NLUEJOQ2p5Yy9ka3VPN28rRlV2SHg1UHlEQlZsQ1BoMGk0N2hSaTl2RnN4YllWL2VEN29KeEpQS09pOFM1Umo0UlRtYTRNVlVKUXdqdndYRVRBRTJ4WlV1N2FmTW9ZREo3R29RSHJpMG9XTEJkMXpPWW9ZQm5iSm1oZEJrazJWbXpucDhDL1I1QUF4OHZqSTB1YnpRY1J3VEpFUG4rMFFjQ0JTN0NNU3BvR25oRDJBd0htQU1kWk9pandEM0hyaUhVVjY0ZjhTekZHc0FVejZFVGNvMEUrYUllUG1BSElnZnkzYWdvMEdNcE9GQk41MHBmTGxLWEpyTFUza0t4cXdBVFBZQkhRVmlPUFZXSUwrMzBrcjI5eTBMS2JiQjZIWlVXaDQ2SEFRNkFzUmxuRDFCcG1uV1RSNnlRWHJ5L0pEdWtoRWZ1SHdnQnhVNmF0MVNIbEJpc25lMU5mcmttS0JaTTNCbXpyWjl2WDYvRXYveXBaMEJBMnZoOHdWV0dIUVZMK1ZMd29Fd2NvS25QVTBMM3pUNWhzeU5JeWtHQ0FBei9nQTYxbDRac3NnOURnN2dKZkRkYVNBbVlUTXRISmhKbCtQeFEzaXhWQW44UFFWLzg3d0xINkFtSlU4ekVMNHA3KzFoTVE4RER5dmZVTklLZ1BFWkVlWkEyM3VvZnhqYW5zOVo0Ty8vZU9QUXBJL0NuRzBwYjRmT1ZMYzhVN3BzVmEwU2VKamhnVE4rblZJKyt3bWMrWmNJWlVEQUVOQ25jQ0lYZ3JhcEVDMVgydTh2UUxkVFFiOEhYVlkrTG5TVXJjYVRoQU94YVpPWkxnL0hnNDZnU2JGQWdNdE9vTHRBZi9YMk9JYmpYNU1Ja3ZaV3NmejRheERYZkowY1JMSXdwYVBLcC9naDhPRHBBZ1dmRi9FaHo3NllGRHJZdkpTYmdFRzFHU0l4MDMzSWRlQ2hlNkN5RW41WFFSZitmaXNWWmlwZ0tMNXVDYU5IZVJ2OWRSc0YzMGNHdkxvYjAydmdvVjg2QTZxMFFoRFU3Sy9Cd0hNalhEMllESGt2Z001aGFIS1o3Q0E1MXQvYlBNeXRHd3RSa2N0V3cwTFVsNm9hQ0hCdkNyUWNhR1BRcmp5ZkF4b0V1Z2owSUlobmJqajE5VHZCcmRHU0U1WkthN3Z6Qk9PaHhUeENyeG0wdElnWFNtbFFKYldzajFmVERMaHdKcy85RUpNU0pzRGdNUjlkK05iTmZrcWk2T1l2bzI3TWdueW5Eb0czbjZZeGRJYTgzSzZqbUM0aGx6ZkRTRlllaVRnYjlBS0lXWnFwODg0T2xpQ3JtcFFWQjNJZ0hsNjY2NVdhL1ZmYmJNd1RCdG9SZEM3b0lSRFRjczhDalFjeHZUWWo1RzRHY2NtUUo1SjNBNjJRSXRSMG9zQkdHZXJML1pNOEZDNGIrWlV2WWpMeUp6Z3NYaTNyVnpqZVlpMTRvUFpHZ3liTGNreUF5V1ZSSGRMTjQwZWI1K2tBbkhpL3pIekxzU0ZCNFZZQjlYMFU5RGxzUGcza09vREZONHRsU1AyZFZtY0gwck5LQ1lFQW5UQm9Mem9NaU9HbE04eVEramNRTjU5NTRORG1QRTRJalVKVjVYcHpVS0ZUTkNtaEQxYVpOQllSN3d3OGpQd08xN0paNDZWTFMxMnJSaTJWeU9OTFM5d2xMZjFjSHZiTDVTak9FRjJYWDBIZ1pTQm00M1VhTEpLVkdRZ0JQUk1Qdmp4dGRMb2VKTDd5Z0IzM0xENEJNYXlURGtNM0pVV3NlaG8wcG5Qcm11bGFQN09WWnIzb1JEWnhqeWlPa2laZFN1MU5Rei9QaFVMem5jUHdnaHlpakRCbGZqV202ei9WVmVkbnlZRndDZXRXUEFoZFJtSzR3akcxY29CWGJ4RFhvUmxLbWFZbHFMQ1lWZHVZTFpYTEg2bEpDYlBXYjlLTzhDYUxRQnFlZTR5TVdpQ0FBSi9SZ1hDMUpZcVpDRkZuQk5mbGNDS0h1T2lDTkFCcFlnY1BFbDFoVXFHV2VlRTRtRTZiRzJvbU9YWjBJYk01bEtZclc0ZFBaejNYTkdwSDU0MVpSN2RLUEthNjJMWWo5WUlSU0dMWnJQekZwbW9hSnMrSk1BZVp6akp0c0xXVk9YZ05jdWc5djZ3NUVFSnhCQjZNdTl1aVZtUDFlUExYOXJTL0gxUXY0VXZUTUZuWDBPdWtST0dsVUNabGlnbHpHVy9RL2xGYTF0MURtSmlicWlabkxsd2F6Vmt6Znp2Yncwa3dVS1Zxd2ZlTXltSmVLeDRDTmsyU3FLTXpWM0xPMG1IMDQ4bWlBNkU5MThPSm1FUTdoTVVwYy9VOUovc2JCNHJ6UEFIRFlXOERuUXBhRlNIVkEvQ3ZUZHk2QTNYbWlWaEpRNWpKZlJFVU4wRkRaaldXb0hzeVRPNFhDYUdHVk5WQTRDZndNQjJQYm1HbTJ6VkRFQjBCbDQ4WGdtTmdQaTJ1Q2dRV25wOEIzUUppa3NUK0lLYnFmeWV3b2o3RC9tRWpzN0xxUVBobXlSQlRLZFVSTUQxeFhDcUpBNXhuUFphSHMxZ0l0QkhvRDZBclFkeUlUMFBaV0VNSnhzWHJGcjRkVmt4UXB5bUFrWUlWaTVkeXd1VGtzMmFUd21hRGdIZlFsR2VhZEVzRDZud1FncGpnOEhPUTlkSVo2cjRET2d2VUgwcnpaV1VmME5VZzAwakRVcHVaMEhZalhSQXE4U1h0UUJoSlk3clIyV0hIem5qTFBqYU04WG10eXpNZXNNM2s0VmtLQlE5c0RvU2p1QTAwUHNVWTdlNm5HeDdhZk9QYjFFRC96OHBPVEp0dVl2cHRTakp0K0RJR3VnaHI5QWk4YTlDRXpzdUtnVGgvVm96ZHhVQnJneXBHaTJHY2ZnKzZIM1F5aUpkQ2NYYkxNRjJiOEd6VFdmcDh5aWZwUUw2Rkpud3IwODFnV1FuMWYrQmgyYzlaeitWSEVKZDNiQTVlY21QOEREZ09uVERQcE5mMFY0T2E1UW5wU251UUNUdE54bmQ1aGxqVHQ4V0IwT2VrOGlHRXorZzQrS1lvSlYwSW1CemE0MTN6UVV1VUMxaUhPdXVCL2dVYURSb084bjJod2ZlTGdwZ2pqSWN2dVZRMUFYOEg1ZzJFRS9rZmlFa1N1YlJjTFlWTk5mUkRSYldhL01CY2R2OTRDTnNTRHlybW1EbVhRRmtLcC9HMmFjVXRtOHhFTmROTHBEcU1tb2srMFRuOFJYNitWZHNVbDZHeU4rQUh4aXl6OHdyK2JnVHg5THhwc3NmL2xobWpjODZrM1A2cjBEYmo3SThESFFqaTJ2bmJJTWJmUzBrWEFpYkpOdmt5cG4wdE5QcDljUkFEV0xoM2VCeUk1OWYyQkkzQzUrVTNQTGFqZ3MrWmpYY2thSGRReDNPWno3ZEw4TjBqSUo0czl5MWM1Z0tEYVNacW0xbkxQRDJTY0NBOGZVbm4wYjRHaVgvcE1mOGFCSTdQOXp0aEZqSXdSUDA4VnRXOTJLYmM5cDdBTW5CS0N4Nm13dDdQRWppWEJ4Z1pwc3dmNVpPZ3kwRGNGK080MHY2eGw5andaSms5dkgzT3BqQndnUzgxVEozTnQwZGVWU29sWlFqd3JSMHFtZHhMY2hMR0Y5L3dmUXQ0RGdZREEweVlScVQ4K1Vvbk1RUThsYTdpNVNWUS9hc0k1OHZheTZqSDVJbEJ4ZFFoNkNaL3JOaHVFZzZrQ1U2amZMT1NsOHk4SG9TTXovZE1BU0RsRndSc1ozU1VjQjBjUk5VekZ2anVVUEJ3bW0xeUgzVnAzOWpPanFyMUwvV2dRMk5ZOGVFZ3BtMHdMVy9pZ1ZMdU1GeEd1NWpxSS96eElNQkx5SFFMSC82UDR5SCtlOUFDczJoOHRoR0lNd2p1SWZieEVkb1AzMjFaNFh2ZTh1bFh1TmZ4R3Rxb21zZ1UzL0ZseFc5WnQxdytBMGZDUEhlTjFvaDFnVGJtODliY1QwRkYyOE5wMjBwWTczeXcwMEhiM1BGQklkdUEzZ0dleDREV0FpMFAyZ1IwR29odmJQOEdoVWtGb1hOK3czZ01oYXl3d0lNRURvWHIwRXh3SnlXL0NBeUZhYnBMdGtTQkx6OE1aeC9IMlM3b0l1OWZ6amhlQmVubW1hcVVDVmdudVNObjNMZWl6UTlBZndZeGJmdktvTFZBeDN2T3dDUllZelRHK1pRdzNSdDJCcUt6MlZxdVg4VTZjQ0k4WU1OMVE1dkN0OUJLVVVjMit0bTByMVBIVHhlbmVub08rVmtkcGFyd2NCbUxkNjh3VW9WdjVzeDh5eWlQL2lGa2RsUk4yL2tkUGtENDFsaXBQT2pBWGhjaVRNYUhEcThPVDZuZXBmd21kWFY0ZFhnNmRDbm5EVk5YNGVISnBWNmIxWXQrcU1mWkxyTlU4MS9PRGt4S3BRQU5rN0RpMWRIWWhTQ0cyek9zbnI5VFh2Rk52VXpLOVNiTWxYakRPaERUSFgvcTRGZUhhOGEyYjg2Vmp1V2JyZ2QyWU9SWEx5alRhYlUrOFpOcEd2SFQwWVpmdmFGaEIwZEU5YXZOUUV3T2RybWNHWnp2RTUvUEswcE53M21yd2NhSEZmZEZkRXRwZUx2Sm1OUGgxZUVwMWJPVTM2U3VEcThPVDRjdTVieGg2cmJMUk4vemQvS0VicWM0NE9NcXkvTVY1RHpvUUxhSkNDN1IzbXRTb1JKdldBZGljL0RxeTJwSzQ4Mlp5d1pNSkdaVHducjEwamI5M2daTTNoUjBaZHB1MkZhdEJ5d2ZSdU9jVmtkVm1LQ1JiMENtcFZwc085ZGpkVkpNOElGK2htbWpWZmg1c1ZMVktENXZvOVhrb2UrbjFsWDRrc3NmdW1WaUNXUFYzMHdGWVRwM2Zaakltd0FjU3AyN1NWMGRYaDJlRGpQTGVYVnNyVmEzRkRydUs4UjFRUFpPNERtK3ZOL3dHWCtyaitzT2pwQjhmRlllZ2paRHZ4eUZkU0EwMnVSS1N0b2RkQnNhZjJpakxBQ3FKUGM1eU5ISjJscmEzQnQ0K0U3eWFaOXZENmFISHovd25HTTFzUXdoTlUza042NGprczFIVng1dTAza29tOExOOE1RRFFjelhZMXI4VXF6cjNFNzNQZ1krTi9ITG82Wk05ZURMeW43ZXFXUy91b3pvK3NaVWVCay9MM2ppaXhHWEFuVit0Qk9oRjg5SmRSU2R5N05NZUNsUGQ3K1JTOHVscGZ4dlAyaDBlSFY0cXRubUJCZGd6ZFFtRE1TSU1ua2hiZUJleVFKbmhVb0FQQXovNTQyZlVSWTZqNzI5a04vUTdZUnlJSGlBVFlFR3d3MjBvTE1aNnNmdnJkL3pqY0RrTG9kSFVHK0JXOWk4aDNiRmU3TjlkTGc4UUQrK0dacThTVkpja0V6aXlNMXBrK0lyazRLOHRDTTdHV0lacEFPdmt0M0dDNy9tRW8vSjhodjduek9YYW9XenBxRENTN0JZRGdYWnp0em9FTGJGanlqUU1YZ1BGOTZmNHZkUzRhY3paK203OEMwZXhPVmJuWWNlSFdScGVScC82THlwODJXcDJuN09QSG5RZzIvdW80S0E5cjRmV3NiSCsyU21hOVFsRDNtRENsK2VkQjZhZEhqbHV0QlduUmRFWWtjTXF4WmdRaDRlOUl0cUZzQ1hyWUYrbTliNGpzODhSbWdGdldRSFlWcnRlODZ5dGtRN3pwYnNRamtRVDB1ZWdBejhJWHE4NStIQkUramx2VEJmcGlEWCtkSHliZmhRSDBSUHhYZTYwOVBiMGJiT2tnVnQxbmxicGxyM1FhWk8zaTR1eTd5dE9USjRveUEzelFJTDJ1WXNjVDNRQXlEZHQ4NUtjcmwwdHovazdRdHFYM3ZHdjN4TFB0RkE3dGtCNlZGdWdLelNOKzl5UFhpNDc1LzhFRDhDYm43engyYnlCc3VxZEVEcm96NFBzV29WOEw0SlJnWnBjTFBTcEREajZxYmV3Nm1qM2prQmVOSEpuRi9haUxmVWNMSUd6bGVEVnpjMzBtbVFGM1JlNkFuSW04K3A0Mi8rSm5XeXVESnZVK0R2MTVzQjhxMDhhR1oyUS9sYnMyZHIwQ2wvam5tbS9BaVN6ekUxQ2JReitIbjVtbzVUMHhrTDNLL2pDekV6OEFZZVRnVVBaOFljMTh6Q0crcU1Sb2x5bERrWXRBN2t2NkdqdERZUHdyOTRDaklVWVpUMEF6MEo0dHBQSmZvQm4vTjBybEU3cUxNS2FFd1ZtWlB4K2RtZ3prRnl3ZE1ITkJRMHQ0cXNTZmo4ZEZBaFNGYkg5K0R0RGJvSk5NZEh2Ny9ndTNvRG1iM0FQd1RVVkVYbUZIeitOMUNEcnN4U1B0UmJCM1ExNkV1ZnZpcnR2Mm5nZXdDMGw1OGQrRzVIMEFjK01zZmpPOGJQQi9aL1cxdmJ1cUJ4b0dJWmZZVy9OeTZYZ2M4S29FTkE3MWFvMHlHakdkODlEdHBSUjRkcVBLamZBRG9hOUxaUFcyenpmZEJSb0xwS3Nqd1pzeXZJK0J5ZkRmQnAveUI4UDdGQ3ZUbjQ3Ty9WMnZPUnR4WHFqSzhncnhXZjNRbnE3bE4zRUw2ZlVhRXVQeHRraWpQcTdBUDZzWUk4OXQyVnhMNEtsbldlN2NTZ2ZNd1FxNE5NZFNHLzE5ZDc0TjhIUUpNQytydTBYZXJ4dXFmVGxqWnRkOVJoZjRLMkI5MEVHbWVnQS9YaFdCb0syaDNVS1l3ZWZuWGJINWl1Q3M0SjhNS25MVUZMZzNqOG4yOVRYRnA2SG0rZUpsRTI4MVNDVEI3YTRlbGVybEV5QkpUcmxWd0dlQmd5amFLc0lHc3hUNy9sOEM4M2N4bng5UUhvSmNnS2VodXJDQk5rTWljVTMwNVhLSkhKdDl2UmtHbXl2Rk5xYzI5UFQrYTBjcUpudWZMUW14Z3dISEJaRUE4Z2RRWnhPWUJMRDF4MjRVeVJlemR0RlEydjhDRmtyb09QMXdjeGJ4Qm50NXlTTTlyalZXOXBVa3NVeG1RakdKbnlZVzJ2QXQrcUg4ZFE4TjBuUXIxVndMZXgxejdISC9kLytBYjRtdC9TZ1paU1pVeG9pN2pSVnVMWUU4UjlNYjdwdllLMkFtZlpxTDhFZVBtMnk5OEt4eDV4ZWc1MWZmY1VVWS9wTGZoYjRGa0Myc2pscUtkUXoyL21WdFZFRCt0dFBheVpKWUF6TytxaFkwTWZUeGYrN2xuNDFqNVNaK1pSU1NIb3dyRk8yemd1T1FiYWw1NGdMekJZQjNXWEFpL1BZYkEvT0k0NVpxaUxTYVJXUlp3Z204OGdodXFTMk8vVWsvcXhyL2dibitMcFNuMi9SSnRXejdxS2paZDhDRDM0ck9FWTd3ZmlzNnhVRHo0TGVZQ1lXSDBFSFVxRE1JSkVXMy92MUlGWWF5RVZCUUZCUUJBUUJES0hnSXM5a013WkxRb0xBb0tBSUNBSWhFZEFIRWg0REVXQ0lDQUlDQUkxaVlBNGtKcnNkakZhRUJBRUJJSHdDSWdEQ1kraFNCQUVCQUZCb0NZUkVBZFNrOTB1UmdzQ2dvQWdFQjRCY1NEaE1SUUpnb0FnSUFqVUpBTGlRR3F5MjhWb1FVQVFFQVRDSXlBT0pEeUdJa0VRRUFRRWdacEVRQnhJVFhhN0dDMElDQUtDUUhnRXhJR0V4MUFrQ0FLQ2dDQlFrd2lJQTZuSmJoZWpCUUZCUUJBSWo0QTRrUEFZaWdSQlFCQVFCR29TZ2Y4UFZvTys5dkdQa0ZBQUFBQUFTVVZPUks1Q1lJST0"},{name:"__ASSET__:bitmap_Bar",data:"aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQWFjQUFBQlFDQU1BQUFDSzBVcS9BQUFBTTFCTVZFWC8vLy92Nys4UER3OC9QejlmWDEvZjM5K2ZuNThmSHgrL3Y3OS9mMyt2cjY5dmIyOHZMeS9QejgrUGo0OVBUMDhBQUFDdmxOMXJBQUFCT2tsRVFWUjRYdTNkT1E2REFBeEUwVUQyUGZjL2JVcFgwNlNJTGZTbWZ6V1N2NERkK1pOMjNJWDl6VEMxVjdUM2RzUFVsalhaZFdrM1RPM3dTVHUxRzZiMmpQYlJiNWphSStKbnUyRnFwMmdQL1lhcHJSRXY3WWFwM2FOOXRSdW1kb3oyM0crWTJqN2lTN3RoYXJkbzN6MkdtWC9nWXZLdTBWN2JEVk5ib2wxN0REUC93TVhrWGFMZE54aG0vbE9VbVgva1krUkN1WkNSQzVueEJ5NW0vbE9Va1F2bFFrWXVaR3J2aUc4Tmh0bHlYcE1MR2JtUWtRdmxRa1l1Wk9hL0U4QTQ4c21GakZ6SWpEeHdNWEtoWE1qSWhjenNBeGZ6MDlPTmtRc1p1VkF1Wkh4Q2pObCtMcFFMR2JtUWtRdmxRa1l1Wk9hL0U4QTQ4c21GakZ6SXpEeHdNWEtoWE1qSWhjejJqbUkrSWNiSWhZeGNLQmN5UGlIR3lJVnlJU01YOWh1NWtKRUw1VUxHSDRjWVJ6NjVrSkVMbWQ4UFQ0eDNBcGd2bVFFSS9XRWZhcmdBQUFBQVNVVk9SSzVDWUlJPQ"},{name:"__ASSET__:bitmap_SplashEN",data:"aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQW9BQUFBSGdDQVlBQUFBMTBkemtBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINHd3REZ3MEpYbHJ5ZndBQUFCZDBSVmgwUm1sc1pTQk9ZVzFsQUd4dllXUnBibWRWVXk1d2JtZTA3amQyQUFBNENHbFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBEOTRjR0ZqYTJWMElHSmxaMmx1UFNMdnU3OGlJR2xrUFNKWE5VMHdUWEJEWldocFNIcHlaVk42VGxSamVtdGpPV1FpUHo0S1BIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVdFMVFJRU52Y21VZ05TNHhMaklpUGdvZ1BISmtaanBTUkVZZ2VHMXNibk02Y21SbVBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1THpBeUx6SXlMWEprWmkxemVXNTBZWGd0Ym5NaklqNEtJQ0E4Y21SbU9rUmxjMk55YVhCMGFXOXVJSEprWmpwaFltOTFkRDBpSWdvZ0lDQWdlRzFzYm5NNmVHMXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNoaGNDOHhMakF2SWdvZ0lDQWdlRzFzYm5NNlpHTTlJbWgwZEhBNkx5OXdkWEpzTG05eVp5OWtZeTlsYkdWdFpXNTBjeTh4TGpFdklnb2dJQ0FnZUcxc2JuTTZjR2h2ZEc5emFHOXdQU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDNCb2IzUnZjMmh2Y0M4eExqQXZJZ29nSUNBZ2VHMXNibk02ZUcxd1RVMDlJbWgwZEhBNkx5OXVjeTVoWkc5aVpTNWpiMjB2ZUdGd0x6RXVNQzl0YlM4aUNpQWdJQ0I0Yld4dWN6cHpkRVYyZEQwaWFIUjBjRG92TDI1ekxtRmtiMkpsTG1OdmJTOTRZWEF2TVM0d0wzTlVlWEJsTDFKbGMyOTFjbU5sUlhabGJuUWpJZ29nSUNBZ2VHMXNibk02ZEdsbVpqMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzkwYVdabUx6RXVNQzhpQ2lBZ0lDQjRiV3h1Y3pwbGVHbG1QU0pvZEhSd09pOHZibk11WVdSdlltVXVZMjl0TDJWNGFXWXZNUzR3THlJS0lDQWdlRzF3T2tOeVpXRjBiM0pVYjI5c1BTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdLRmRwYm1SdmQzTXBJZ29nSUNCNGJYQTZRM0psWVhSbFJHRjBaVDBpTWpBeE9TMHhNaTB3TTFReU16b3hNam8xTlZvaUNpQWdJSGh0Y0RwTmIyUnBabmxFWVhSbFBTSXlNREU1TFRFeUxUQXpWREl6T2pFek9qQTRXaUlLSUNBZ2VHMXdPazFsZEdGa1lYUmhSR0YwWlQwaU1qQXhPUzB4TWkwd00xUXlNem94TXpvd09Gb2lDaUFnSUdSak9tWnZjbTFoZEQwaWFXMWhaMlV2Y0c1bklnb2dJQ0J3YUc5MGIzTm9iM0E2UTI5c2IzSk5iMlJsUFNJeklnb2dJQ0I0YlhCTlRUcEpibk4wWVc1alpVbEVQU0o0YlhBdWFXbGtPamhsTURZeE5EVXhMV1l3WW1FdE1EQTBOQzA0WTJZNExUa3pZakk1WWpCbFpXTTBPQ0lLSUNBZ2VHMXdUVTA2Ukc5amRXMWxiblJKUkQwaWVHMXdMbVJwWkRvNFpUQTJNVFExTVMxbU1HSmhMVEF3TkRRdE9HTm1PQzA1TTJJeU9XSXdaV1ZqTkRnaUNpQWdJSGh0Y0UxTk9rOXlhV2RwYm1Gc1JHOWpkVzFsYm5SSlJEMGllRzF3TG1ScFpEbzRaVEEyTVRRMU1TMW1NR0poTFRBd05EUXRPR05tT0MwNU0ySXlPV0l3WldWak5EZ2lDaUFnSUhScFptWTZUM0pwWlc1MFlYUnBiMjQ5SWpFaUNpQWdJSFJwWm1ZNldGSmxjMjlzZFhScGIyNDlJamN5TURBd01DOHhNREF3TUNJS0lDQWdkR2xtWmpwWlVtVnpiMngxZEdsdmJqMGlOekl3TURBd0x6RXdNREF3SWdvZ0lDQjBhV1ptT2xKbGMyOXNkWFJwYjI1VmJtbDBQU0l5SWdvZ0lDQmxlR2xtT2tOdmJHOXlVM0JoWTJVOUlqWTFOVE0xSWdvZ0lDQmxlR2xtT2xCcGVHVnNXRVJwYldWdWMybHZiajBpTmpRd0lnb2dJQ0JsZUdsbU9sQnBlR1ZzV1VScGJXVnVjMmx2YmowaU5EZ3dJajRLSUNBZ1BIaHRjRTFOT2tocGMzUnZjbmsrQ2lBZ0lDQThjbVJtT2xObGNUNEtJQ0FnSUNBOGNtUm1PbXhwQ2lBZ0lDQWdJSE4wUlhaME9tRmpkR2x2YmowaVkzSmxZWFJsWkNJS0lDQWdJQ0FnYzNSRmRuUTZhVzV6ZEdGdVkyVkpSRDBpZUcxd0xtbHBaRG80WlRBMk1UUTFNUzFtTUdKaExUQXdORFF0T0dObU9DMDVNMkl5T1dJd1pXVmpORGdpQ2lBZ0lDQWdJSE4wUlhaME9uZG9aVzQ5SWpJd01Ua3RNVEl0TUROVU1qTTZNVEk2TlRWYUlnb2dJQ0FnSUNCemRFVjJkRHB6YjJaMGQyRnlaVUZuWlc1MFBTSkJaRzlpWlNCUWFHOTBiM05vYjNBZ1EwTWdLRmRwYm1SdmQzTXBJaTgrQ2lBZ0lDQThMM0prWmpwVFpYRStDaUFnSUR3dmVHMXdUVTA2U0dsemRHOXllVDRLSUNBOEwzSmtaanBFWlhOamNtbHdkR2x2Ymo0S0lEd3ZjbVJtT2xKRVJqNEtQQzk0T25odGNHMWxkR0UrQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdDaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0NpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQUtJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lBbzhQM2h3WVdOclpYUWdaVzVrUFNKeUlqOCtmUkhMR0FBQUFCaDBSVmgwVTI5bWRIZGhjbVVBUVdSdlltVWdVR2h2ZEc5emFHOXdOTXVPWndBQUFBOTBSVmgwVjNKcGRHVnlBRk4xY0dWeVVFNUh4Y1N2M1FBQURJRkpSRUZVZU5ydDNUOW8xR2tleC9GUGpqMWtFUXRUekFwaUlZY0U1WUpGY2tJdWQxY0lTaEloVFZDanNKRFZ0VG53V0NlZ3JhMFd1aWdJd2ZWUHBkR1FSbGdWQll2RHJNV1phZzVGNUxDUXdES0ZGb01FdWNJck5pNkxPNlBKY3NuTS9QSjZWVExQMkh3eEQyK2Z5ZStaamlUdkFnREFxdkU3SXdBQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBQUFJUUFBQUJDQUFnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBQUFJUUFBQUJDQUFnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBQUFJUUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBQUFJUUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFCQ0FBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBSVFBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQkNBQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQVFnQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQVFnQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUlBQUJBQVFnQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUNFQUFBQVFnQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQUVJQUFBQWhBQUFBRUlBQUFBaEFBQUFFSUFJQUFCQUJBQUFJQUNFQUFBQVFnQUFBQ0VBQUFBUWdBZ0FBRUFFQUFBZ0FnQUFFQVdGbWZHUUVVWDBkSHg4OS9mdmZ1M2MrdnZmOHp0TXEvUzJDRmZ2NlMrS2tEQUZoRmZBUU1BQ0FBQVFBUWdBQUFDRUFBQUFRZ0FBQUNFQUFBQVFnQWdBQUVBRUFBQWdBZ0FBRUFFSUFBQUFoQUFBQUVJQUFBQWhBQVFBQUNBQ0FBQVFBUWdBQUF0TDNQaklCMjFOZlhsMjNidG1YcjFxM3A3T3pNMnJWckRRVllkbS9ldkVtU3ZIcjFLaytmUHMyVEowL3k2TkVqZzBFQXduSTVmUGh3UmtaRzB0L2ZuM1hyMWhrSTBCSnF0VnBtWm1ZeVBUMmRTNWN1R1FodG9TUEpPMk9nVlpWS3BSdy9manhIamh3UmZVQmJ4T0RGaXhkeit2VHBWS3RWQTBFQXdsSWRPM1lzSjArZUZINUFXNGJneVpNbmMvYnNXY05BQU1KaWRIVjE1ZWJObStudTdqWU1vSzFWS3BYczI3Y3Z6NTQ5TXd3RUlEUXlORFNVNjlldi81WlR2M25UQTFiSTUwdDVjNjFXeTRFREIzTDc5bTJUUXdEQ2gwWkhSM1B0MnJYRnZQVkZrdStUUEV6eW55U1Z3Zkx3V3hNRVZzS2RNN2ZXSk9sTzhvY2tmMG15SjhubVQvMjlnd2NQWm5KeTBnQVJnTERFK0h1WTVOaGdlZml4aVFFdEZvVzlTYzR1QktFSXBPVzVDSnFtNit2cnk4VEV4TWZlOGlMSjZHQjUrSzlKS2lZR3RGajhyUmtzRHo5ZTJLTkdGL2FzdWlZbUp0TFgxMmRvTkowVFFKcXFWQ3BsZG5ZMkd6ZHViUFNXNzVOOFBWZ2UvdEcwZ0RZSndnMUp2c3RQSHczL3l0emNYSHA2ZWx3VGd3Qms5YnA4K1hMR3hzWWFMVjhaTEE4Zk1pV2dUVVB3Y3BLdjZxMWR2WG8xaHc3WjNoQ0FyRUo5ZlgyWm1abHB0RHcxV0I3ZVowcEFtMGZnelNSNzY2MzE5L2Y3R2ptYXh1OEEwalNuVHAxcXRQUXd5WmNtQkJUQWx3dDcybEwyUUZoMlRnQnBpbytjL3Mwbitac25mWUdpV0hoQytKK3BjMytnVTBDYXhRa2dUZkhOTjk4MFdqb24vb0FpV2RqVHppMXhMd1FCU0xHVVNxVU1EQXpVVzVwUDhxMEpBUVgwYmVwOFk5SEF3RUJLcFpMcElBQXB2dDdlM2taZjlUYnB1aGVnaUJiMnRsL2RBTDF1M2JyMDl2WWFFQUtRNHR1NWMyZWpwUXVtQXhUWWhTWHVpU0FBS1k0ZE8zYlVlM2srdnVVREtMWks2bndNM0dCUEJBRklzV3pmdnIzZXk3T0Q1ZUczcGdNVTFjSWVON3ZJUFJFRUlNWFM0UGYvbnBzTXNBbzhYK1NlQ0FLUTR2akkwMjYrRkJOWURhcEwzQnRCQUFJQUlBQXBqclZHQU5qclFBQlNRTlZxdzA5NnZ6QWRZQlg0WW9sN0l3aEFpbUZ1YnE3ZXkyNUNCVmFEM2tYdWlTQUFLWlpLcGU1MWY1dnZuTG0xd1hTQW9sclk0ell2Y2s4RUFVaXh6TXpNTkZyYVl6cEFnZTFaNHA0SUFwRGllUERnUWFPbE1kTUJDbXhzaVhzaUxKdU9KTytNZ1pYMjh1WExiTnk0c2Q3U253Ykx3NDlOQ0NpU08yZHU5U2I1MTRldno4M05aZE9tVFFiRWluTUNTRlBjdUhHajBkSlowd0VLNk93UzkwSllWazRBYVlwU3FaVG56NTgzK2dxa3J3Zkx3NWRNQ1NpQ08yZHVIVTd5M1lldjEycTFiTm15eFJVd05JVVRRSnFpV3ExbWVucTYwZkw1aFk5TEFObzkvbnFUbksrM05qMDlMZjVvR2llQU5NMG5UZ0ZmSlBuellIbjRSNU1DMmpUK05pVDVJWFd1Zm5INlI3TTVBYVJwcXRWcXl1VnlvK1hOU1g1d0VnaTBhZnoxTm9xL0pDbVh5K0tQcG5JQ1NOUGR1SEVqZS9mdWJiUThuK1Nyd2ZLdzM1UUcyaVgrOWllNWt1VHpldXRUVTFQWnYzKy9RU0VBV2QxS3BWTHUzNytmN3U3dWo3MXRLc2svZkNRTXRIRDRiVWh5TGtuRC85RldLcFhzMnJYTDZSOENFTjVINE96c2JLTzdBWC9wU3BJTDdnb0VXaWo4ZXBQOFBjbG9HcHo2SlQvZCtkZlQweVArRUlEd1lRUXU0aVR3dmZra0Q1TDhPOG56SkcrVC9OY1VnV1gyK3lScmtteEo4c2NrT3o4V2ZlODUrVU1Bd2ljaThPclZxeGtZR0RBTW9CRHUzcjJic2JFeDhVZEw4UlF3TGFWYXJXWm9hQ2pqNCtPcDFXb0dBclN0V3EyVzhmSHhEQTBOaVQ5YWpoTkFXbGFwVk1yNTgrYy85b1F3UUV1YW1wckswYU5IaFI4Q0VINnJycTZ1bkRoeElpTWpJNDB1alFab3VscXRsdW5wNlp3NmRTclBuajB6RUFRZy9MK01qbzVtOSs3ZDZlbnBXZXpESWdETHBsS3BaSFoyTnZmdTNjdms1S1NCSUFCaEpYUjFkYVd6c3pQcjE2ODNER0JGdkg3OU9xOWV2WExLaHdBRUFLQjllQW9ZQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFJUUFBQUJDQUFnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFJUUFBQUJDQUFnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFJUUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFJUUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFCQ0FBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBSUFBQkFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBQ0VBQUFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQkFBQUlBQ0VBQUFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFBQUVJQUlBQUJBQVFnRVlBQUNBQUFRQVFnQUFBQ0VBQUFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQUFFSUFBQUFoQUFRQUFDQUNBQUFRQVFnQUFBQ0VBQUFBUWdBQUFDRUFBQUFRZ0FnQUFFQUVBQUFnQWdBQUVBRUlBQUFBaEFBQURxK2g5NGY5UDI2dEZQY2dBQUFBQkpSVTVFcmtKZ2dnPT0"}];var __map_reserved={};Object.defineProperty(js__$Boot_HaxeError.prototype,"message",{get:function(){return String(this.val)}});js_Boot.__toStr={}.toString;var array=null;var vector=null;var view=null;var buffer=null;var len=null;var this1=new Uint32Array(256);lime_math__$RGBA_RGBA_$Impl_$.__alpha16=this1;var _g=0;while(_g<256){var i=_g++;lime_math__$RGBA_RGBA_$Impl_$.__alpha16[i]=Math.ceil(i*257.00392156862745)}var array1=null;var vector1=null;var view1=null;var buffer1=null;var len1=null;var this2=new Uint8Array(511);lime_math__$RGBA_RGBA_$Impl_$.__clamp=this2;var _g1=0;while(_g1<255){var i1=_g1++;lime_math__$RGBA_RGBA_$Impl_$.__clamp[i1]=i1}var _g2=255;var _g3=511;while(_g2<_g3){var i2=_g2++;lime_math__$RGBA_RGBA_$Impl_$.__clamp[i2]=255}lime_utils_Log.level=0;if(typeof console=="undefined"){console={}}if(console.log==null){console.log=function(){}}openfl__$internal_renderer_canvas_CanvasGraphics.hitTestCanvas=typeof window!="undefined"?window.document.createElement("canvas"):null;openfl__$internal_renderer_canvas_CanvasGraphics.hitTestContext=typeof window!="undefined"?openfl__$internal_renderer_canvas_CanvasGraphics.hitTestCanvas.getContext("2d"):null;openfl_ui_Multitouch.maxTouchPoints=2;openfl_ui_Multitouch.supportedGestures=null;openfl_ui_Multitouch.supportsGestureEvents=false;openfl_ui_Multitouch.inputMode=2;openfl_display_DisplayObject.__meta__={fields:{__cairo:{SuppressWarnings:["checkstyle:Dynamic"]},addEventListener:{SuppressWarnings:["checkstyle:Dynamic"]},removeEventListener:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_DisplayObject.__broadcastEvents=new haxe_ds_StringMap;openfl_display_DisplayObject.__instanceCount=0;openfl_display_DisplayObject.__tempStack=new lime_utils_ObjectPool(function(){return openfl__$Vector_Vector_$Impl_$.toObjectVector(null)},function(stack){stack.set_length(0)});Main.isMobile=false;openfl_display_BitmapData.__meta__={fields:{image:{SuppressWarnings:["checkstyle:Dynamic"]},__framebufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},__indexBufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},__surface:{SuppressWarnings:["checkstyle:Dynamic"]},__textureContext:{SuppressWarnings:["checkstyle:Dynamic"]},__vertexBufferContext:{SuppressWarnings:["checkstyle:Dynamic"]},getSurface:{SuppressWarnings:["checkstyle:Dynamic"]},__fromImage:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_BitmapData.__pool=new openfl__$internal_renderer_BitmapDataPool;openfl_display_BitmapData.__tempVector=new lime_math_Vector2;SplashEN.resourceType="image/png";SplashEN.resourceName="__ASSET__:bitmap_SplashEN";Bar.resourceType="image/png";Bar.resourceName="__ASSET__:bitmap_Bar";openfl_display_Preloader.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{onComplete:{SuppressWarnings:["checkstyle:Dynamic"]}}};CustomPreloader.color=0;CustomPreloader.backgroundColor=0;openfl_text_Font.__fontByName=new haxe_ds_StringMap;openfl_text_Font.__registeredFonts=[];Xml.Element=0;Xml.PCData=1;Xml.CData=2;Xml.Comment=3;Xml.DocType=4;Xml.ProcessingInstruction=5;Xml.Document=6;engine_datamanager_DataManager.LOCAL_STORAGE_STRING="STORAGE_ENGINE";engine_input_KeyboardMap.KEY_CODES_LENGHT=256;engine_input_TouchLib.dirty=false;engine_input_TouchLib.justSwiped=false;openfl_display_Tile.__meta__={fields:{data:{SuppressWarnings:["checkstyle:Dynamic"]}}};engine_mapsheet_data_Behavior.uniqueID=0;engine_scenemanager_Manager.isResizable=false;engine_scenemanager_Manager.hasFocus=true;engine_scenemanager_Manager.defaultTransition=engine_scenemanager_transitions_FadeColorTransition;engine_scenemanager_Manager.isTransitioning=false;engine_scenemanager_Manager.earlyPause=false;engine_soundlib_SoundLib.channels=[];engine_soundlib_SoundLib.overlaps=[];engine_soundlib_SoundLib.muted=false;engine_tweens_Actuator.actuators=new haxe_ds_StringMap;motion_actuators_SimpleActuator.actuators=[];motion_actuators_SimpleActuator.actuatorsLength=0;motion_actuators_SimpleActuator.addedEvent=false;haxe_Serializer.USE_CACHE=false;haxe_Serializer.USE_ENUM_INDEX=false;haxe_Serializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_Unserializer.DEFAULT_RESOLVER=new haxe__$Unserializer_DefaultResolver;haxe_Unserializer.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";haxe_crypto_Base64.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";haxe_crypto_Base64.BYTES=haxe_io_Bytes.ofString(haxe_crypto_Base64.CHARS);haxe_xml_Parser.escapes=function($this){var $r;var h=new haxe_ds_StringMap;if(__map_reserved["lt"]!=null){h.setReserved("lt","<")}else{h.h["lt"]="<"}if(__map_reserved["gt"]!=null){h.setReserved("gt",">")}else{h.h["gt"]=">"}if(__map_reserved["amp"]!=null){h.setReserved("amp","&")}else{h.h["amp"]="&"}if(__map_reserved["quot"]!=null){h.setReserved("quot",'"')}else{h.h["quot"]='"'}if(__map_reserved["apos"]!=null){h.setReserved("apos","'")}else{h.h["apos"]="'"}$r=h;return $r}(this);haxe_zip_InflateImpl.LEN_EXTRA_BITS_TBL=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,-1,-1];haxe_zip_InflateImpl.LEN_BASE_VAL_TBL=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258];haxe_zip_InflateImpl.DIST_EXTRA_BITS_TBL=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,-1,-1];haxe_zip_InflateImpl.DIST_BASE_VAL_TBL=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];haxe_zip_InflateImpl.CODE_LENGTHS_POS=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];lime__$internal_backend_html5_HTML5HTTPRequest.activeRequests=0;lime__$internal_backend_html5_HTML5HTTPRequest.requestLimit=17;lime__$internal_backend_html5_HTML5HTTPRequest.requestQueue=new haxe_ds_List;lime__$internal_backend_html5_HTML5Window.dummyCharacter="";lime__$internal_backend_html5_HTML5Window.windowID=0;lime__$internal_format_Base64.DICTIONARY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");lime__$internal_format_Base64.EXTENDED_DICTIONARY=function($this){var $r;var result=[];{var _g=0;var _g1=lime__$internal_format_Base64.DICTIONARY;while(_g<_g1.length){var a=_g1[_g++];var _g2=0;var _g11=lime__$internal_format_Base64.DICTIONARY;while(_g2<_g11.length)result.push(a+_g11[_g2++])}}$r=result;return $r}(this);lime__$internal_graphics_StackBlur.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1];lime__$internal_graphics_StackBlur.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9];lime_math__$Matrix4_Matrix4_$Impl_$.__identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];lime_system_Clipboard.onUpdate=new lime_app__$Event_$Void_$Void;lime_system_Sensor.sensorByID=new haxe_ds_IntMap;lime_system_Sensor.sensors=[];lime_ui_Gamepad.devices=new haxe_ds_IntMap;lime_ui_Gamepad.onConnect=new lime_app__$Event_$lime_$ui_$Gamepad_$Void;lime_ui_Joystick.devices=new haxe_ds_IntMap;lime_ui_Joystick.onConnect=new lime_app__$Event_$lime_$ui_$Joystick_$Void;lime_ui_Touch.onCancel=new lime_app__$Event_$lime_$ui_$Touch_$Void;lime_ui_Touch.onEnd=new lime_app__$Event_$lime_$ui_$Touch_$Void;lime_ui_Touch.onMove=new lime_app__$Event_$lime_$ui_$Touch_$Void;lime_ui_Touch.onStart=new lime_app__$Event_$lime_$ui_$Touch_$Void;lime_utils_Assets.cache=new lime_utils_AssetCache;lime_utils_Assets.onChange=new lime_app__$Event_$Void_$Void;lime_utils_Assets.bundlePaths=new haxe_ds_StringMap;lime_utils_Assets.libraries=new haxe_ds_StringMap;lime_utils_Assets.libraryPaths=new haxe_ds_StringMap;lime_utils_Log.throwErrors=true;motion_easing_Expo.easeOut=new motion_easing__$Expo_ExpoEaseOut;motion_Actuate.defaultActuator=motion_actuators_SimpleActuator;motion_Actuate.defaultEase=motion_easing_Expo.easeOut;motion_Actuate.targetLibraries=new haxe_ds_ObjectMap;motion_easing_Bounce.easeIn=new motion_easing__$Bounce_BounceEaseIn;motion_easing_Bounce.easeInOut=new motion_easing__$Bounce_BounceEaseInOut;motion_easing_Bounce.easeOut=new motion_easing__$Bounce_BounceEaseOut;motion_easing_Quad.easeIn=new motion_easing__$Quad_QuadEaseIn;motion_easing_Quad.easeInOut=new motion_easing__$Quad_QuadEaseInOut;motion_easing_Quad.easeOut=new motion_easing__$Quad_QuadEaseOut;nape_Config.epsilon=1e-8;nape_Config.fluidAngularDragFriction=2.5;nape_Config.fluidAngularDrag=100;nape_Config.fluidVacuumDrag=.5;nape_Config.fluidLinearDrag=.5;nape_Config.collisionSlop=.2;nape_Config.collisionSlopCCD=.5;nape_Config.distanceThresholdCCD=.05;nape_Config.staticCCDLinearThreshold=.05;nape_Config.staticCCDAngularThreshold=.005;nape_Config.bulletCCDLinearThreshold=.125;nape_Config.bulletCCDAngularThreshold=.0125;nape_Config.dynamicSweepLinearThreshold=17;nape_Config.dynamicSweepAngularThreshold=.6;nape_Config.angularCCDSlipScale=.75;nape_Config.arbiterExpirationDelay=6;nape_Config.staticFrictionThreshold=2;nape_Config.elasticThreshold=20;nape_Config.sleepDelay=60;nape_Config.linearSleepThreshold=.2;nape_Config.angularSleepThreshold=.4;nape_Config.contactBiasCoef=.3;nape_Config.contactStaticBiasCoef=.6;nape_Config.contactContinuousBiasCoef=.4;nape_Config.contactContinuousStaticBiasCoef=.5;nape_Config.constraintLinearSlop=.1;nape_Config.constraintAngularSlop=.001;nape_Config.illConditionedThreshold=2e8;openfl__$Vector_IVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$Vector_BoolVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$Vector_FloatVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$Vector_FunctionVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$Vector_IntVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$Vector_ObjectVector.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{toJSON:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_Lib.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_agal_AGALConverter.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_agal_AGALConverter.limitedProfile=true;openfl__$internal_formats_agal__$AGALConverter_DestRegister.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_agal_RegisterMap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_agal__$AGALConverter_SamplerRegister.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_agal__$AGALConverter_SourceRegister.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_animate_AnimateLibrary.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_html_HTMLParser.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_formats_html_HTMLParser.__regexAlign=new EReg("align\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexBreakTag=new EReg("<br\\s*/?>","gi");openfl__$internal_formats_html_HTMLParser.__regexBlockIndent=new EReg("blockindent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexColor=new EReg("color\\s?=\\s?(\"#([^\"]+)\"|'#([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexEntities=[new EReg("&quot;","g"),new EReg("&apos;","g"),new EReg("&amp;","g"),new EReg("&lt;","g"),new EReg("&gt;","g"),new EReg("&nbsp;","g")];openfl__$internal_formats_html_HTMLParser.__regexFace=new EReg("face\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexHTMLTag=new EReg("<.*?>","g");openfl__$internal_formats_html_HTMLParser.__regexHref=new EReg("href\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexIndent=new EReg(" indent\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexLeading=new EReg("leading\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexLeftMargin=new EReg("leftmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexRightMargin=new EReg("rightmargin\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexSize=new EReg("size\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_html_HTMLParser.__regexTabStops=new EReg("tabstops\\s?=\\s?(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_formats_swf_SWFLite.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{resolveClass:{SuppressWarnings:["checkstyle:Dynamic"]},resolveEnum:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_formats_swf_SWFLite.instances=new haxe_ds_StringMap;openfl__$internal_formats_swf_SWFLiteLibrary.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_DrawCommandBuffer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{o:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_renderer_DrawCommandBuffer.empty=new openfl__$internal_renderer_DrawCommandBuffer;openfl__$internal_renderer_DrawCommandReader.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_SamplerState.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_ShaderBuffer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{overrideIntValues:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_DisplayObjectRenderer.__meta__={fields:{__type:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_CairoRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:Dynamic"]}};openfl__$internal_renderer_cairo_CairoRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_cairo_CairoTilemap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{renderTileContainer:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_renderer_canvas_CanvasGraphics.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{windingRule:{SuppressWarnings:["checkstyle:Dynamic"]},createBitmapFill:{SuppressWarnings:["checkstyle:Dynamic"]},createGradientPattern:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_renderer_canvas_CanvasGraphics.fillCommands=new openfl__$internal_renderer_DrawCommandBuffer;openfl__$internal_renderer_canvas_CanvasGraphics.strokeCommands=new openfl__$internal_renderer_DrawCommandBuffer;openfl_display_CanvasRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:Dynamic"]}};openfl__$internal_renderer_canvas_CanvasRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_canvas_CanvasTextField.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_canvas_CanvasTilemap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},statics:{renderTileContainer:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_renderer_canvas_CanvasVideo.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display_Shader.__meta__={fields:{glProgram:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_renderer_context3D_Context3DBitmap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DBuffer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_geom_Rectangle.__pool=new lime_utils_ObjectPool(function(){return new openfl_geom_Rectangle},function(r){r.setTo(0,0,0,0)});openfl_geom_Matrix.__meta__={fields:{equals:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_geom_Matrix.__pool=new lime_utils_ObjectPool(function(){return new openfl_geom_Matrix},function(m){m.identity()});openfl_geom_ColorTransform.__pool=new lime_utils_ObjectPool(function(){return new openfl_geom_ColorTransform},function(ct){ct.__identity()});openfl__$internal_renderer_context3D_Context3DGraphics.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DGraphics.blankBitmapData=new openfl_display_BitmapData(1,1,false,0);openfl__$internal_renderer_context3D_Context3DGraphics.tempColorTransform=new openfl_geom_ColorTransform(1,1,1,1,0,0,0,0);openfl__$internal_renderer_context3D_Context3DMaskShader.opaqueBitmapData=new openfl_display_BitmapData(1,1,false,0);openfl_display_OpenGLRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:Dynamic"]}};openfl__$internal_renderer_context3D_Context3DRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DRenderer.__alphaValue=[1];openfl__$internal_renderer_context3D_Context3DRenderer.__colorMultipliersValue=[0,0,0,0];openfl__$internal_renderer_context3D_Context3DRenderer.__colorOffsetsValue=[0,0,0,0];openfl__$internal_renderer_context3D_Context3DRenderer.__emptyColorValue=[0,0,0,0];openfl__$internal_renderer_context3D_Context3DRenderer.__hasColorTransformValue=[false];openfl__$internal_renderer_context3D_Context3DRenderer.__scissorRectangle=new openfl_geom_Rectangle;openfl__$internal_renderer_context3D_Context3DRenderer.__textureSizeValue=[0,0];openfl__$internal_renderer_context3D_Context3DShape.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DState.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DTextField.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DTilemap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DVideo.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_context3D_Context3DVideo.__textureSizeValue=[0,0];openfl__$internal_renderer_dom_DOMBitmap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_dom_DOMDisplayObject.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display_DOMRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:Dynamic"]}};openfl__$internal_renderer_dom_DOMRenderer.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_dom_DOMShape.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_dom_DOMTextField.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_dom_DOMTextField.__regexColor=new EReg("color=(\"#([^\"]+)\"|'#([^']+)')","i");openfl__$internal_renderer_dom_DOMTextField.__regexFace=new EReg("face=(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_renderer_dom_DOMTextField.__regexFont=new EReg("<font ([^>]+)>","gi");openfl__$internal_renderer_dom_DOMTextField.__regexCloseFont=new EReg("</font>","gi");openfl__$internal_renderer_dom_DOMTextField.__regexSize=new EReg("size=(\"([^\"]+)\"|'([^']+)')","i");openfl__$internal_renderer_dom_DOMTilemap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_renderer_dom_DOMVideo.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_geom_Point.__pool=new lime_utils_ObjectPool(function(){return new openfl_geom_Point},function(p){p.setTo(0,0)});openfl__$internal_text_TextEngine.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_text_TextLayoutGroup.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl__$internal_utils_TouchData.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{touch:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl__$internal_utils_TouchData.__pool=new lime_utils_ObjectPool(function(){return new openfl__$internal_utils_TouchData},function(data){data.reset()});openfl_display_Application.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display_DOMElement.__meta__={fields:{__element:{SuppressWarnings:["checkstyle:Dynamic"]},_:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_LoaderInfo.__meta__={statics:{create:{SuppressWarnings:["checkstyle:FieldDocComment"]}},fields:{parameters:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display_LoaderInfo.__rootURL=typeof window!="undefined"?window.document.URL:"";openfl_display_DefaultPreloader.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display_ShaderInput.__meta__={fields:{index:{SuppressWarnings:["checkstyle:Dynamic"]},name:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_display_ShaderParameter.__meta__={fields:{index:{SuppressWarnings:["checkstyle:Dynamic"]},name:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_display_Stage.__meta__={fields:{__broadcastEvent:{SuppressWarnings:["checkstyle:Dynamic"]},__dispatchEvent:{SuppressWarnings:[["checkstyle:Dynamic","checkstyle:LeftCurly"]]},__dispatchStack:{SuppressWarnings:[["checkstyle:Dynamic","checkstyle:LeftCurly"]]},__dispatchTarget:{SuppressWarnings:["checkstyle:Dynamic"]},__handleError:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display__$Tileset_TileData.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display_Window.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]},fields:{_:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_display3D_Context3D.__glDepthStencil=-1;openfl_display3D_Context3D.__glMaxTextureMaxAnisotropy=-1;openfl_display3D_Context3D.__glMaxViewportDims=-1;openfl_display3D_Context3D.__glTextureMaxAnisotropy=-1;openfl_display3D_Uniform.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display3D_UniformMap.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_display3D_textures_TextureBase.__meta__={fields:{__textureContext:{SuppressWarnings:["checkstyle:Dynamic"]},__getGLFramebuffer:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_events_Event.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_Event(null)},function(event){event.__init()});openfl_events_AccelerometerEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_AccelerometerEvent(null)},function(event){event.__init()});openfl_events_ActivityEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_ActivityEvent(null)},function(event){event.__init()});openfl_events_TextEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_TextEvent(null)},function(event){event.__init()});openfl_events_ErrorEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_ErrorEvent(null)},function(event){event.__init()});openfl_events__$EventDispatcher_DispatchIterator.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_events__$EventDispatcher_Listener.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_events_FocusEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_FocusEvent(null)},function(event){event.__init()});openfl_events_FullScreenEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_FullScreenEvent(null)},function(event){event.__init()});openfl_events_GameInputEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_GameInputEvent(null)},function(event){event.__init()});openfl_events_HTTPStatusEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_HTTPStatusEvent(null)},function(event){event.__init()});openfl_events_IOErrorEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_IOErrorEvent(null)},function(event){event.__init()});openfl_events_KeyboardEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_KeyboardEvent(null)},function(event){event.__init()});openfl_events_MouseEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_MouseEvent(null)},function(event){event.__init()});openfl_events_NetStatusEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_NetStatusEvent(null)},function(event){event.__init()});openfl_events_ProgressEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_ProgressEvent(null)},function(event){event.__init()});openfl_events_RenderEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_RenderEvent(null)},function(event){event.__init()});openfl_events_SecurityErrorEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_SecurityErrorEvent(null)},function(event){event.__init()});openfl_events_TouchEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_TouchEvent(null)},function(event){event.__init()});openfl_events_UncaughtErrorEvent.__pool=new lime_utils_ObjectPool(function(){return new openfl_events_UncaughtErrorEvent(null)},function(event){event.__init()});openfl_filters_BlurFilter.__blurShader=new openfl_filters__$BlurFilter_BlurShader;openfl_filters__$ColorMatrixFilter_ColorMatrixShader.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_filters_ColorMatrixFilter.__colorMatrixShader=new openfl_filters__$ColorMatrixFilter_ColorMatrixShader;openfl_filters_DropShadowFilter.__hideShader=new openfl_filters__$DropShadowFilter_HideShader;openfl_filters_GlowFilter.__invertAlphaShader=new openfl_filters__$GlowFilter_InvertAlphaShader;openfl_filters_GlowFilter.__blurAlphaShader=new openfl_filters__$GlowFilter_BlurAlphaShader;openfl_filters_GlowFilter.__combineShader=new openfl_filters__$GlowFilter_CombineShader;openfl_filters_GlowFilter.__innerCombineShader=new openfl_filters__$GlowFilter_InnerCombineShader;openfl_filters_GlowFilter.__combineKnockoutShader=new openfl_filters__$GlowFilter_CombineKnockoutShader;openfl_filters_GlowFilter.__innerCombineKnockoutShader=new openfl_filters__$GlowFilter_InnerCombineKnockoutShader;openfl_media_SoundTransform.__meta__={fields:{clone:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_media_SoundMixer.__soundChannels=[];openfl_media_SoundMixer.__soundTransform=new openfl_media_SoundTransform;openfl_net_NetStream.__meta__={fields:{speed:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_net_SharedObject.defaultObjectEncoding=10;openfl_net_URLRequestDefaults.followRedirects=true;openfl_net_URLRequestDefaults.idleTimeout=0;openfl_net_URLRequestDefaults.manageCookies=false;openfl_sensors_Accelerometer.currentX=0;openfl_sensors_Accelerometer.currentY=1;openfl_sensors_Accelerometer.currentZ=0;openfl_sensors_Accelerometer.defaultInterval=34;openfl_sensors_Accelerometer.initialized=false;openfl_sensors_Accelerometer.supported=false;openfl_system_ApplicationDomain.currentDomain=new openfl_system_ApplicationDomain(null);openfl_text_TextField.__missingFontWarning=new haxe_ds_StringMap;openfl_text_TextFormat.__meta__={fields:{clone:{SuppressWarnings:["checkstyle:FieldDocComment"]}}};openfl_ui_GameInput.__meta__={fields:{addEventListener:{SuppressWarnings:["checkstyle:Dynamic"]}}};openfl_ui_GameInput.numDevices=0;openfl_ui_GameInput.__deviceList=[];openfl_ui_GameInput.__instances=[];openfl_ui_GameInput.__devices=new haxe_ds_ObjectMap;openfl_ui_Mouse.__cursor="auto";openfl_utils_AGALMiniAssembler.__meta__={obj:{SuppressWarnings:[["checkstyle:ConstantName","checkstyle:FieldDocComment"]]}};openfl_utils_AGALMiniAssembler.OPMAP=new haxe_ds_StringMap;openfl_utils_AGALMiniAssembler.REGMAP=new haxe_ds_StringMap;openfl_utils_AGALMiniAssembler.SAMPLEMAP=new haxe_ds_StringMap;openfl_utils_AGALMiniAssembler.initialized=false;openfl_utils__$AGALMiniAssembler_OpCode.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_utils__$AGALMiniAssembler_Register.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_utils__$AGALMiniAssembler_Sampler.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_utils_Assets.cache=new openfl_utils_AssetCache;openfl_utils_ByteArrayData.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};openfl_utils_ByteArrayData.defaultObjectEncoding=10;haxe_lang_Iterator.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};haxe_lang_Iterable.__meta__={obj:{SuppressWarnings:["checkstyle:FieldDocComment"]}};project_data_MapReader.TILE_MASK=268435455;zpp_$nape_callbacks_ZPP_$CbType.ANY_SHAPE=new nape_callbacks_CbType;zpp_$nape_callbacks_ZPP_$CbType.ANY_BODY=new nape_callbacks_CbType;zpp_$nape_callbacks_ZPP_$CbType.ANY_COMPOUND=new nape_callbacks_CbType;zpp_$nape_callbacks_ZPP_$CbType.ANY_CONSTRAINT=new nape_callbacks_CbType;zpp_$nape_ZPP_$ID._Interactor=0;zpp_$nape_ZPP_$ID._Constraint=0;zpp_$nape_ZPP_$ID._CbType=0;zpp_$nape_ZPP_$ID._CbSet=0;zpp_$nape_ZPP_$ID._Listener=0;project_game_CallbackTypes.bearType=new nape_callbacks_CbType;project_game_CallbackTypes.banisterType=new nape_callbacks_CbType;project_game_CallbackTypes.inflatableType=new nape_callbacks_CbType;project_game_CallbackTypes.goalType=new nape_callbacks_CbType;project_game_objects_Banister.rightrect=nape_shape_Polygon.rect(-2,-2,32,4);project_game_objects_Banister.leftrect=nape_shape_Polygon.rect(-32,-2,32,4);project_game_objects_Banister.uprect=nape_shape_Polygon.rect(-2,-32,4,32);project_game_objects_Banister.downrect=nape_shape_Polygon.rect(-2,-2,4,32);project_game_util_GameTiles.initialized=false;zpp_$nape_util_ZPP_$Flags.internal=false;zpp_$nape_callbacks_ZPP_$InteractionListener.UCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet;zpp_$nape_callbacks_ZPP_$InteractionListener.VCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet;zpp_$nape_callbacks_ZPP_$InteractionListener.WCbSet=new zpp_$nape_util_ZNPList_$ZPP_$CbSet;zpp_$nape_callbacks_ZPP_$InteractionListener.UCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType;zpp_$nape_callbacks_ZPP_$InteractionListener.VCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType;zpp_$nape_callbacks_ZPP_$InteractionListener.WCbType=new zpp_$nape_util_ZNPList_$ZPP_$CbType;zpp_$nape_dynamics_ZPP_$Arbiter.internal=false;zpp_$nape_dynamics_ZPP_$Arbiter.COL=1;zpp_$nape_dynamics_ZPP_$Arbiter.FLUID=4;zpp_$nape_dynamics_ZPP_$Arbiter.SENSOR=2;zpp_$nape_dynamics_ZPP_$Contact.internal=false;zpp_$nape_geom_ZPP_$Collide.flowpoly=new zpp_$nape_util_ZNPList_$ZPP_$Vec2;zpp_$nape_geom_ZPP_$Collide.flowsegs=new zpp_$nape_util_ZNPList_$ZPP_$Vec2;zpp_$nape_phys_ZPP_$Body.types=function($this){var $r;if(zpp_$nape_util_ZPP_$Flags.BodyType_STATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_STATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}if(zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC==null){zpp_$nape_util_ZPP_$Flags.internal=true;zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC=new nape_phys_BodyType;zpp_$nape_util_ZPP_$Flags.internal=false}$r=[null,zpp_$nape_util_ZPP_$Flags.BodyType_STATIC,zpp_$nape_util_ZPP_$Flags.BodyType_DYNAMIC,zpp_$nape_util_ZPP_$Flags.BodyType_KINEMATIC];return $r}(this);zpp_$nape_phys_ZPP_$Material.WAKE=1;zpp_$nape_phys_ZPP_$Material.PROPS=2;zpp_$nape_phys_ZPP_$Material.ANGDRAG=4;zpp_$nape_phys_ZPP_$Material.ARBITERS=8;zpp_$nape_shape_ZPP_$Edge.internal=false;zpp_$nape_space_ZPP_$AABBTree.tmpaabb=new zpp_$nape_geom_ZPP_$AABB;zpp_$nape_util_ZPP_$EdgeList.internal=false;zpp_$nape_util_ZPP_$ShapeList.internal=false;zpp_$nape_util_ZPP_$BodyList.internal=false;zpp_$nape_util_ZPP_$CompoundList.internal=false;zpp_$nape_util_ZPP_$InteractorList.internal=false;zpp_$nape_util_ZPP_$ConvexResultList.internal=false;zpp_$nape_util_ZPP_$GeomPolyList.internal=false;zpp_$nape_util_ZPP_$RayResultList.internal=false;zpp_$nape_util_ZPP_$Vec2List.internal=false;zpp_$nape_util_ZPP_$ArbiterList.internal=false;zpp_$nape_util_ZPP_$ContactList.internal=false;zpp_$nape_util_ZPP_$InteractionGroupList.internal=false;zpp_$nape_util_ZPP_$ConstraintList.internal=false;zpp_$nape_util_ZPP_$CbTypeList.internal=false;zpp_$nape_util_ZPP_$ListenerList.internal=false;ApplicationMain.main()})(typeof exports!="undefined"?exports:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this)};$hx_exports.lime=$hx_exports.lime||{};$hx_exports.lime.$scripts=$hx_exports.lime.$scripts||{};$hx_exports.lime.$scripts["Bouncy Cubs"]=$hx_script;$hx_exports.lime.embed=function(projectName){var exports={};var script=$hx_exports.lime.$scripts[projectName];if(!script)throw Error('Cannot find project name "'+projectName+'"');script(exports,$global);for(var key in exports)$hx_exports[key]=$hx_exports[key]||exports[key];var lime=exports.lime||window.lime;if(lime&&lime.embed&&this!=lime.embed)lime.embed.apply(lime,arguments);return exports};if(typeof define=="function"&&define.amd){define([],function(){return $hx_exports.lime});define.__amd=define.amd;define.amd=null}})(typeof exports!="undefined"?exports:typeof define=="function"&&define.amd?{}:typeof window!="undefined"?window:typeof self!="undefined"?self:this,typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this);!function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var e=this||n;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var o=this||n;if(e=parseFloat(e),o.ctx||_(),void 0!==e&&e>=0&&e<=1){if(o._volume=e,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.volume=u._volume*e)}return o}return o._volume},mute:function(e){var o=this||n;o.ctx||_(),o._muted=e,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(e?0:o._volume,n.ctx.currentTime);for(var t=0;t<o._howls.length;t++)if(!o._howls[t]._webAudio)for(var r=o._howls[t]._getSoundIds(),a=0;a<r.length;a++){var u=o._howls[t]._soundById(r[a]);u&&u._node&&(u._node.muted=!!e||u._muted)}return o},unload:function(){for(var e=this||n,o=e._howls.length-1;o>=0;o--)e._howls[o].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,_()),e},codecs:function(e){return(this||n)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||n;if(e.state=e.ctx?e.ctx.state||"suspended":"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{var o=new Audio;void 0===o.oncanplaythrough&&(e._canPlayEvent="canplay")}catch(n){e.noAudio=!0}else e.noAudio=!0;try{var o=new Audio;o.muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||n,o=null;try{o="undefined"!=typeof Audio?new Audio:null}catch(n){return e}if(!o||"function"!=typeof o.canPlayType)return e;var t=o.canPlayType("audio/mpeg;").replace(/^no$/,""),r=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),a=r&&parseInt(r[0].split("/")[1],10)<33;return e._codecs={mp3:!(a||!t&&!o.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!o.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||n,o=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi|Chrome|Safari/i.test(e._navigator&&e._navigator.userAgent);if(!e._audioUnlocked&&e.ctx&&o){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(n){for(var o=0;o<e.html5PoolSize;o++){var r=new Audio;r._unlocked=!0,e._releaseHtml5Audio(r)}for(var o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var a=e._howls[o]._getSoundIds(),u=0;u<a.length;u++){var i=e._howls[o]._soundById(a[u]);i&&i._node&&!i._node._unlocked&&(i._node._unlocked=!0,i._node.load())}e._autoResume();var d=e.ctx.createBufferSource();d.buffer=e._scratchBuffer,d.connect(e.ctx.destination),void 0===d.start?d.noteOn(0):d.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),d.onended=function(){d.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||n;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var o=(new Audio).play();return o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(e){var o=this||n;return e._unlocked&&o._html5AudioPool.push(e),o},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&n.usingWebAudio){for(var o=0;o<e._howls.length;o++)if(e._howls[o]._webAudio)for(var t=0;t<e._howls[o]._sounds.length;t++)if(!e._howls[o]._sounds[t]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout(function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then(function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())}))},3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&n.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var n=new e,o=function(e){var n=this;if(!e.src||0===e.src.length)return void console.error("An array of source files must be passed with any new Howl.");n.init(e)};o.prototype={init:function(e){var o=this;return n.ctx||_(),o._autoplay=e.autoplay||!1,o._format="string"!=typeof e.format?e.format:[e.format],o._html5=e.html5||!1,o._muted=e.mute||!1,o._loop=e.loop||!1,o._pool=e.pool||5,o._preload="boolean"!=typeof e.preload||e.preload,o._rate=e.rate||1,o._sprite=e.sprite||{},o._src="string"!=typeof e.src?e.src:[e.src],o._volume=void 0!==e.volume?e.volume:1,o._xhrWithCredentials=e.xhrWithCredentials||!1,o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=e.onend?[{fn:e.onend}]:[],o._onfade=e.onfade?[{fn:e.onfade}]:[],o._onload=e.onload?[{fn:e.onload}]:[],o._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],o._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],o._onpause=e.onpause?[{fn:e.onpause}]:[],o._onplay=e.onplay?[{fn:e.onplay}]:[],o._onstop=e.onstop?[{fn:e.onstop}]:[],o._onmute=e.onmute?[{fn:e.onmute}]:[],o._onvolume=e.onvolume?[{fn:e.onvolume}]:[],o._onrate=e.onrate?[{fn:e.onrate}]:[],o._onseek=e.onseek?[{fn:e.onseek}]:[],o._onunlock=e.onunlock?[{fn:e.onunlock}]:[],o._onresume=[],o._webAudio=n.usingWebAudio&&!o._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o.load(),o},load:function(){var e=this,o=null;if(n.noAudio)return void e._emit("loaderror",null,"No audio support.");"string"==typeof e._src&&(e._src=[e._src]);for(var r=0;r<e._src.length;r++){var u,i;if(e._format&&e._format[r])u=e._format[r];else{if("string"!=typeof(i=e._src[r])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(i),u||(u=/\.([^.]+)$/.exec(i.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&n.codecs(u)){o=e._src[r];break}}return o?(e._src=o,e._state="loading","https:"===window.location.protocol&&"http:"===o.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new t(e),e._webAudio&&a(e),e):void e._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(e,o){var t=this,r=null;if("number"==typeof e)r=e,e=null;else{if("string"==typeof e&&"loaded"===t._state&&!t._sprite[e])return null;if(void 0===e&&(e="__default",!t._playLock)){for(var a=0,u=0;u<t._sounds.length;u++)t._sounds[u]._paused&&!t._sounds[u]._ended&&(a++,r=t._sounds[u]._id);1===a?e=null:r=null}}var i=r?t._soundById(r):t._inactiveSound();if(!i)return null;if(r&&!e&&(e=i._sprite||"__default"),"loaded"!==t._state){i._sprite=e,i._ended=!1;var d=i._id;return t._queue.push({event:"play",action:function(){t.play(d)}}),d}if(r&&!i._paused)return o||t._loadQueue("play"),i._id;t._webAudio&&n._autoResume();var _=Math.max(0,i._seek>0?i._seek:t._sprite[e][0]/1e3),s=Math.max(0,(t._sprite[e][0]+t._sprite[e][1])/1e3-_),l=1e3*s/Math.abs(i._rate),c=t._sprite[e][0]/1e3,f=(t._sprite[e][0]+t._sprite[e][1])/1e3,p=!(!i._loop&&!t._sprite[e][2]);i._sprite=e,i._ended=!1;var m=function(){i._paused=!1,i._seek=_,i._start=c,i._stop=f,i._loop=p};if(_>=f)return void t._ended(i);var v=i._node;if(t._webAudio){var h=function(){t._playLock=!1,m(),t._refreshBuffer(i);var e=i._muted||t._muted?0:i._volume;v.gain.setValueAtTime(e,n.ctx.currentTime),i._playStart=n.ctx.currentTime,void 0===v.bufferSource.start?i._loop?v.bufferSource.noteGrainOn(0,_,86400):v.bufferSource.noteGrainOn(0,_,s):i._loop?v.bufferSource.start(0,_,86400):v.bufferSource.start(0,_,s),l!==1/0&&(t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l)),o||setTimeout(function(){t._emit("play",i._id),t._loadQueue()},0)};"running"===n.state?h():(t._playLock=!0,t.once("resume",h),t._clearTimer(i._id))}else{var y=function(){v.currentTime=_,v.muted=i._muted||t._muted||n._muted||v.muted,v.volume=i._volume*n.volume(),v.playbackRate=i._rate;try{var r=v.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(t._playLock=!0,m(),r.then(function(){t._playLock=!1,v._unlocked=!0,o||(t._emit("play",i._id),t._loadQueue())}).catch(function(){t._playLock=!1,t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),i._ended=!0,i._paused=!0})):o||(t._playLock=!1,m(),t._emit("play",i._id),t._loadQueue()),v.playbackRate=i._rate,v.paused)return void t._emit("playerror",i._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||i._loop?t._endTimers[i._id]=setTimeout(t._ended.bind(t,i),l):(t._endTimers[i._id]=function(){t._ended(i),v.removeEventListener("ended",t._endTimers[i._id],!1)},v.addEventListener("ended",t._endTimers[i._id],!1))}catch(e){t._emit("playerror",i._id,e)}},g=window&&window.ejecta||!v.readyState&&n._navigator.isCocoonJS;if(v.readyState>=3||g)y();else{t._playLock=!0;var b=function(){y(),v.removeEventListener(n._canPlayEvent,b,!1)};v.addEventListener(n._canPlayEvent,b,!1),t._clearTimer(i._id)}}return i._id},pause:function(e){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"pause",action:function(){n.pause(e)}}),n;for(var o=n._getSoundIds(e),t=0;t<o.length;t++){n._clearTimer(o[t]);var r=n._soundById(o[t]);if(r&&!r._paused&&(r._seek=n.seek(o[t]),r._rateSeek=0,r._paused=!0,n._stopFade(o[t]),r._node))if(n._webAudio){if(!r._node.bufferSource)continue;void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),n._cleanBuffer(r._node)}else isNaN(r._node.duration)&&r._node.duration!==1/0||r._node.pause();arguments[1]||n._emit("pause",r?r._id:null)}return n},stop:function(e,n){var o=this;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"stop",action:function(){o.stop(e)}}),o;for(var t=o._getSoundIds(e),r=0;r<t.length;r++){o._clearTimer(t[r]);var a=o._soundById(t[r]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,o._stopFade(t[r]),a._node&&(o._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),o._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause())),n||o._emit("stop",a._id))}return o},mute:function(e,o){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"mute",action:function(){t.mute(e,o)}}),t;if(void 0===o){if("boolean"!=typeof e)return t._muted;t._muted=e}for(var r=t._getSoundIds(o),a=0;a<r.length;a++){var u=t._soundById(r[a]);u&&(u._muted=e,u._interval&&t._stopFade(u._id),t._webAudio&&u._node?u._node.gain.setValueAtTime(e?0:u._volume,n.ctx.currentTime):u._node&&(u._node.muted=!!n._muted||e),t._emit("mute",u._id))}return t},volume:function(){var e,o,t=this,r=arguments;if(0===r.length)return t._volume;if(1===r.length||2===r.length&&void 0===r[1]){t._getSoundIds().indexOf(r[0])>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else r.length>=2&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var a;if(!(void 0!==e&&e>=0&&e<=1))return a=o?t._soundById(o):t._sounds[0],a?a._volume:0;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,r)}}),t;void 0===o&&(t._volume=e),o=t._getSoundIds(o);for(var u=0;u<o.length;u++)(a=t._soundById(o[u]))&&(a._volume=e,r[2]||t._stopFade(o[u]),t._webAudio&&a._node&&!a._muted?a._node.gain.setValueAtTime(e,n.ctx.currentTime):a._node&&!a._muted&&(a._node.volume=e*n.volume()),t._emit("volume",a._id));return t},fade:function(e,o,t,r){var a=this;if("loaded"!==a._state||a._playLock)return a._queue.push({event:"fade",action:function(){a.fade(e,o,t,r)}}),a;e=parseFloat(e),o=parseFloat(o),t=parseFloat(t),a.volume(e,r);for(var u=a._getSoundIds(r),i=0;i<u.length;i++){var d=a._soundById(u[i]);if(d){if(r||a._stopFade(u[i]),a._webAudio&&!d._muted){var _=n.ctx.currentTime,s=_+t/1e3;d._volume=e,d._node.gain.setValueAtTime(e,_),d._node.gain.linearRampToValueAtTime(o,s)}a._startFadeInterval(d,e,o,t,u[i],void 0===r)}}return a},_startFadeInterval:function(e,n,o,t,r,a){var u=this,i=n,d=o-n,_=Math.abs(d/.01),s=Math.max(4,_>0?t/_:t),l=Date.now();e._fadeTo=o,e._interval=setInterval(function(){var r=(Date.now()-l)/t;l=Date.now(),i+=d*r,i=Math.max(0,i),i=Math.min(1,i),i=Math.round(100*i)/100,u._webAudio?e._volume=i:u.volume(i,e._id,!0),a&&(u._volume=i),(o<n&&i<=o||o>n&&i>=o)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,u.volume(o,e._id),u._emit("fade",e._id))},s)},_stopFade:function(e){var o=this,t=o._soundById(e);return t&&t._interval&&(o._webAudio&&t._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(t._interval),t._interval=null,o.volume(t._fadeTo,e),t._fadeTo=null,o._emit("fade",e)),o},loop:function(){var e,n,o,t=this,r=arguments;if(0===r.length)return t._loop;if(1===r.length){if("boolean"!=typeof r[0])return!!(o=t._soundById(parseInt(r[0],10)))&&o._loop;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var a=t._getSoundIds(n),u=0;u<a.length;u++)(o=t._soundById(a[u]))&&(o._loop=e,t._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e,e&&(o._node.bufferSource.loopStart=o._start||0,o._node.bufferSource.loopEnd=o._stop)));return t},rate:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var i;if("number"!=typeof e)return i=t._soundById(o),i?i._rate:t._rate;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,r)}}),t;void 0===o&&(t._rate=e),o=t._getSoundIds(o);for(var d=0;d<o.length;d++)if(i=t._soundById(o[d])){t.playing(o[d])&&(i._rateSeek=t.seek(o[d]),i._playStart=t._webAudio?n.ctx.currentTime:i._playStart),i._rate=e,t._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(e,n.ctx.currentTime):i._node&&(i._node.playbackRate=e);var _=t.seek(o[d]),s=(t._sprite[i._sprite][0]+t._sprite[i._sprite][1])/1e3-_,l=1e3*s/Math.abs(i._rate);!t._endTimers[o[d]]&&i._paused||(t._clearTimer(o[d]),t._endTimers[o[d]]=setTimeout(t._ended.bind(t,i),l)),t._emit("rate",i._id)}return t},seek:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var a=t._getSoundIds(),u=a.indexOf(r[0]);u>=0?o=parseInt(r[0],10):t._sounds.length&&(o=t._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));if(void 0===o)return t;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"seek",action:function(){t.seek.apply(t,r)}}),t;var i=t._soundById(o);if(i){if(!("number"==typeof e&&e>=0)){if(t._webAudio){var d=t.playing(o)?n.ctx.currentTime-i._playStart:0,_=i._rateSeek?i._rateSeek-i._seek:0;return i._seek+(_+d*Math.abs(i._rate))}return i._node.currentTime}var s=t.playing(o);s&&t.pause(o,!0),i._seek=e,i._ended=!1,t._clearTimer(o),t._webAudio||!i._node||isNaN(i._node.duration)||(i._node.currentTime=e);var l=function(){t._emit("seek",o),s&&t.play(o,!0)};if(s&&!t._webAudio){var c=function(){t._playLock?setTimeout(c,0):l()};setTimeout(c,0)}else l()}return t},playing:function(e){var n=this;if("number"==typeof e){var o=n._soundById(e);return!!o&&!o._paused}for(var t=0;t<n._sounds.length;t++)if(!n._sounds[t]._paused)return!0;return!1},duration:function(e){var n=this,o=n._duration,t=n._soundById(e);return t&&(o=n._sprite[t._sprite][1]/1e3),o},state:function(){return this._state},unload:function(){for(var e=this,o=e._sounds,t=0;t<o.length;t++){if(o[t]._paused||e.stop(o[t]._id),!e._webAudio){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(o[t]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),o[t]._node.removeEventListener("error",o[t]._errorFn,!1),o[t]._node.removeEventListener(n._canPlayEvent,o[t]._loadFn,!1),n._releaseHtml5Audio(o[t]._node)}delete o[t]._node,e._clearTimer(o[t]._id)}var a=n._howls.indexOf(e);a>=0&&n._howls.splice(a,1);var u=!0;for(t=0;t<n._howls.length;t++)if(n._howls[t]._src===e._src||e._src.indexOf(n._howls[t]._src)>=0){u=!1;break}return r&&u&&delete r[e._src],n.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,n,o,t){var r=this,a=r["_on"+e];return"function"==typeof n&&a.push(t?{id:o,fn:n,once:t}:{id:o,fn:n}),r},off:function(e,n,o){var t=this,r=t["_on"+e],a=0;if("number"==typeof n&&(o=n,n=null),n||o)for(a=0;a<r.length;a++){var u=o===r[a].id;if(n===r[a].fn&&u||!n&&u){r.splice(a,1);break}}else if(e)t["_on"+e]=[];else{var i=Object.keys(t);for(a=0;a<i.length;a++)0===i[a].indexOf("_on")&&Array.isArray(t[i[a]])&&(t[i[a]]=[])}return t},once:function(e,n,o){var t=this;return t.on(e,n,o,1),t},_emit:function(e,n,o){for(var t=this,r=t["_on"+e],a=r.length-1;a>=0;a--)r[a].id&&r[a].id!==n&&"load"!==e||(setTimeout(function(e){e.call(this,n,o)}.bind(t,r[a].fn),0),r[a].once&&t.off(e,r[a].fn,r[a].id));return t._loadQueue(e),t},_loadQueue:function(e){var n=this;if(n._queue.length>0){var o=n._queue[0];o.event===e&&(n._queue.shift(),n._loadQueue()),e||o.action()}return n},_ended:function(e){var o=this,t=e._sprite;if(!o._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(o._ended.bind(o,e),100),o;var r=!(!e._loop&&!o._sprite[t][2]);if(o._emit("end",e._id),!o._webAudio&&r&&o.stop(e._id,!0).play(e._id),o._webAudio&&r){o._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=n.ctx.currentTime;var a=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),a)}return o._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,o._clearTimer(e._id),o._cleanBuffer(e._node),n._autoSuspend()),o._webAudio||r||o.stop(e._id,!0),o},_clearTimer:function(e){var n=this;if(n._endTimers[e]){if("function"!=typeof n._endTimers[e])clearTimeout(n._endTimers[e]);else{var o=n._soundById(e);o&&o._node&&o._node.removeEventListener("ended",n._endTimers[e],!1)}delete n._endTimers[e]}return n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new t(e)},_drain:function(){var e=this,n=e._pool,o=0,t=0;if(!(e._sounds.length<n)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&o++;for(t=e._sounds.length-1;t>=0;t--){if(o<=n)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),o--)}}},_getSoundIds:function(e){var n=this;if(void 0===e){for(var o=[],t=0;t<n._sounds.length;t++)o.push(n._sounds[t]._id);return o}return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=n.ctx.createBufferSource(),e._node.bufferSource.buffer=r[o._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,n.ctx.currentTime),o},_cleanBuffer:function(e){var o=this,t=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=n._scratchBuffer}catch(e){}return e.bufferSource=null,o}};var t=function(e){this._parent=e,this.init()};t.prototype={init:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,o._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,t=n._muted||e._muted||e._parent._muted?0:e._volume;return o._webAudio?(e._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),e._node.gain.setValueAtTime(t,n.ctx.currentTime),e._node.paused=!0,e._node.connect(n.masterGain)):(e._node=n._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(n._canPlayEvent,e._loadFn,!1),e._node.src=o._src,e._node.preload="auto",e._node.volume=t*n.volume(),e._node.load()),e},reset:function(){var e=this,o=e._parent;return e._muted=o._muted,e._loop=o._loop,e._volume=o._volume,e._rate=o._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++n._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,o=e._parent;o._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(o._sprite).length&&(o._sprite={__default:[0,1e3*o._duration]}),"loaded"!==o._state&&(o._state="loaded",o._emit("load"),o._loadQueue()),e._node.removeEventListener(n._canPlayEvent,e._loadFn,!1)}};var r={},a=function(e){var n=e._src;if(r[n])return e._duration=r[n].duration,void d(e);if(/^data:[^;]+;base64,/.test(n)){for(var o=atob(n.split(",")[1]),t=new Uint8Array(o.length),a=0;a<o.length;++a)t[a]=o.charCodeAt(a);i(t.buffer,e)}else{var _=new XMLHttpRequest;_.open("GET",n,!0),_.withCredentials=e._xhrWithCredentials,_.responseType="arraybuffer",_.onload=function(){var n=(_.status+"")[0];if("0"!==n&&"2"!==n&&"3"!==n)return void e._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");i(_.response,e)},_.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete r[n],e.load())},u(_)}},u=function(e){try{e.send()}catch(n){e.onerror()}},i=function(e,o){var t=function(){o._emit("loaderror",null,"Decoding audio data failed.")},a=function(e){e&&o._sounds.length>0?(r[o._src]=e,d(o,e)):t()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(e).then(a).catch(t):n.ctx.decodeAudioData(e,a,t)},d=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},_=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(e){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),o=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),t=o?parseInt(o[1],10):null;if(e&&t&&t<9){var r=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());(n._navigator&&n._navigator.standalone&&!r||n._navigator&&!n._navigator.standalone&&!r)&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:1,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};"function"==typeof define&&define.amd&&define([],function(){return{Howler:n,Howl:o}}),"undefined"!=typeof exports&&(exports.Howler=n,exports.Howl=o),"undefined"!=typeof window?(window.HowlerGlobal=e,window.Howler=n,window.Howl=o,window.Sound=t):"undefined"!=typeof global&&(global.HowlerGlobal=e,global.Howler=n,global.Howl=o,global.Sound=t)}();!function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var t=n._howls.length-1;t>=0;t--)n._howls[t].stereo(e);return n},HowlerGlobal.prototype.pos=function(e,n,t){var r=this;return r.ctx&&r.ctx.listener?(n="number"!=typeof n?r._pos[1]:n,t="number"!=typeof t?r._pos[2]:t,"number"!=typeof e?r._pos:(r._pos=[e,n,t],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(e,n,t,r,o,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var s=a._orientation;return n="number"!=typeof n?s[1]:n,t="number"!=typeof t?s[2]:t,r="number"!=typeof r?s[3]:r,o="number"!=typeof o?s[4]:o,i="number"!=typeof i?s[5]:i,"number"!=typeof e?s:(a._orientation=[e,n,t,r,o,i],void 0!==a.ctx.listener.forwardX?(a.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.forwardZ.setTargetAtTime(t,Howler.ctx.currentTime,.1),a.ctx.listener.upX.setTargetAtTime(e,Howler.ctx.currentTime,.1),a.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),a.ctx.listener.upZ.setTargetAtTime(t,Howler.ctx.currentTime,.1)):a.ctx.listener.setOrientation(e,n,t,r,o,i),a)},Howl.prototype.init=function(e){return function(n){var t=this;return t._orientation=n.orientation||[1,0,0],t._stereo=n.stereo||null,t._pos=n.pos||null,t._pannerAttr={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:360,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:360,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:0,distanceModel:void 0!==n.distanceModel?n.distanceModel:"inverse",maxDistance:void 0!==n.maxDistance?n.maxDistance:1e4,panningModel:void 0!==n.panningModel?n.panningModel:"HRTF",refDistance:void 0!==n.refDistance?n.refDistance:1,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:1},t._onstereo=n.onstereo?[{fn:n.onstereo}]:[],t._onpos=n.onpos?[{fn:n.onpos}]:[],t._onorientation=n.onorientation?[{fn:n.onorientation}]:[],e.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,t){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(n,t)}}),r;var o=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof n)return r._stereo;r._stereo=n,r._pos=[n,0,0]}for(var i=r._getSoundIds(t),a=0;a<i.length;a++){var s=r._soundById(i[a]);if(s){if("number"!=typeof n)return s._stereo;s._stereo=n,s._pos=[n,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||e(s,o),"spatial"===o?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(n,0,0):s._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),r._emit("stereo",s._id)}}return r},Howl.prototype.pos=function(n,t,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(n,t,r,o)}}),i;if(t="number"!=typeof t?0:t,r="number"!=typeof r?-.5:r,void 0===o){if("number"!=typeof n)return i._pos;i._pos=[n,t,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var p=i._soundById(a[s]);if(p){if("number"!=typeof n)return p._pos;p._pos=[n,t,r],p._node&&(p._panner&&!p._panner.pan||e(p,"spatial"),void 0!==p._panner.positionX?(p._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),p._panner.positionY.setValueAtTime(t,Howler.ctx.currentTime),p._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):p._panner.setPosition(n,t,r)),i._emit("pos",p._id)}}return i},Howl.prototype.orientation=function(n,t,r,o){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(n,t,r,o)}}),i;if(t="number"!=typeof t?i._orientation[1]:t,r="number"!=typeof r?i._orientation[2]:r,void 0===o){if("number"!=typeof n)return i._orientation;i._orientation=[n,t,r]}for(var a=i._getSoundIds(o),s=0;s<a.length;s++){var p=i._soundById(a[s]);if(p){if("number"!=typeof n)return p._orientation;p._orientation=[n,t,r],p._node&&(p._panner||(p._pos||(p._pos=i._pos||[0,0,-.5]),e(p,"spatial")),void 0!==p._panner.orientationX?(p._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),p._panner.orientationY.setValueAtTime(t,Howler.ctx.currentTime),p._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):p._panner.setOrientation(n,t,r)),i._emit("orientation",p._id)}}return i},Howl.prototype.pannerAttr=function(){var n,t,r,o=this,i=arguments;if(!o._webAudio)return o;if(0===i.length)return o._pannerAttr;if(1===i.length){if("object"!=typeof i[0])return r=o._soundById(parseInt(i[0],10)),r?r._pannerAttr:o._pannerAttr;n=i[0],void 0===t&&(n.pannerAttr||(n.pannerAttr={coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,panningModel:n.panningModel}),o._pannerAttr={coneInnerAngle:void 0!==n.pannerAttr.coneInnerAngle?n.pannerAttr.coneInnerAngle:o._coneInnerAngle,coneOuterAngle:void 0!==n.pannerAttr.coneOuterAngle?n.pannerAttr.coneOuterAngle:o._coneOuterAngle,coneOuterGain:void 0!==n.pannerAttr.coneOuterGain?n.pannerAttr.coneOuterGain:o._coneOuterGain,distanceModel:void 0!==n.pannerAttr.distanceModel?n.pannerAttr.distanceModel:o._distanceModel,maxDistance:void 0!==n.pannerAttr.maxDistance?n.pannerAttr.maxDistance:o._maxDistance,refDistance:void 0!==n.pannerAttr.refDistance?n.pannerAttr.refDistance:o._refDistance,rolloffFactor:void 0!==n.pannerAttr.rolloffFactor?n.pannerAttr.rolloffFactor:o._rolloffFactor,panningModel:void 0!==n.pannerAttr.panningModel?n.pannerAttr.panningModel:o._panningModel})}else 2===i.length&&(n=i[0],t=parseInt(i[1],10));for(var a=o._getSoundIds(t),s=0;s<a.length;s++)if(r=o._soundById(a[s])){var p=r._pannerAttr;p={coneInnerAngle:void 0!==n.coneInnerAngle?n.coneInnerAngle:p.coneInnerAngle,coneOuterAngle:void 0!==n.coneOuterAngle?n.coneOuterAngle:p.coneOuterAngle,coneOuterGain:void 0!==n.coneOuterGain?n.coneOuterGain:p.coneOuterGain,distanceModel:void 0!==n.distanceModel?n.distanceModel:p.distanceModel,maxDistance:void 0!==n.maxDistance?n.maxDistance:p.maxDistance,refDistance:void 0!==n.refDistance?n.refDistance:p.refDistance,rolloffFactor:void 0!==n.rolloffFactor?n.rolloffFactor:p.rolloffFactor,panningModel:void 0!==n.panningModel?n.panningModel:p.panningModel};var c=r._panner;c?(c.coneInnerAngle=p.coneInnerAngle,c.coneOuterAngle=p.coneOuterAngle,c.coneOuterGain=p.coneOuterGain,c.distanceModel=p.distanceModel,c.maxDistance=p.maxDistance,c.refDistance=p.refDistance,c.rolloffFactor=p.rolloffFactor,c.panningModel=p.panningModel):(r._pos||(r._pos=o._pos||[0,0,-.5]),e(r,"spatial"))}return o},Sound.prototype.init=function(e){return function(){var n=this,t=n._parent;n._orientation=t._orientation,n._stereo=t._stereo,n._pos=t._pos,n._pannerAttr=t._pannerAttr,e.call(this),n._stereo?t.stereo(n._stereo):n._pos&&t.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var n=this,t=n._parent;return n._orientation=t._orientation,n._stereo=t._stereo,n._pos=t._pos,n._pannerAttr=t._pannerAttr,n._stereo?t.stereo(n._stereo):n._pos?t.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,t._refreshBuffer(n)),e.call(this)}}(Sound.prototype.reset);var e=function(e,n){n=n||"spatial","spatial"===n?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}();!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.pako=t()}}(function(){return function t(e,a,i){function n(s,o){if(!a[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var d=a[s]={exports:{}};e[s][0].call(d.exports,function(t){var a=e[s][1][t];return n(a?a:t)},d,d.exports,t,e,a,i)}return a[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=l.assign({level:w,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=o.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==b)throw new Error(d[a]);if(e.header&&o.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(n="string"==typeof e.dictionary?h.string2buf(e.dictionary):"[object ArrayBuffer]"===_.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,a=o.deflateSetDictionary(this.strm,n),a!==b)throw new Error(d[a]);this._dict_set=!0}}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}function s(t,e){return e=e||{},e.gzip=!0,n(t,e)}var o=t("./zlib/deflate"),l=t("./utils/common"),h=t("./utils/strings"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=Object.prototype.toString,u=0,c=4,b=0,g=1,m=2,w=-1,p=0,v=8;i.prototype.push=function(t,e){var a,i,n=this.strm,r=this.options.chunkSize;if(this.ended)return!1;i=e===~~e?e:e===!0?c:u,"string"==typeof t?n.input=h.string2buf(t):"[object ArrayBuffer]"===_.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;do{if(0===n.avail_out&&(n.output=new l.Buf8(r),n.next_out=0,n.avail_out=r),a=o.deflate(n,i),a!==g&&a!==b)return this.onEnd(a),this.ended=!0,!1;0!==n.avail_out&&(0!==n.avail_in||i!==c&&i!==m)||("string"===this.options.to?this.onData(h.buf2binstring(l.shrinkBuf(n.output,n.next_out))):this.onData(l.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||0===n.avail_out)&&a!==g);return i===c?(a=o.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===b):i!==m||(this.onEnd(b),n.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===b&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Deflate=i,a.deflate=n,a.deflateRaw=r,a.gzip=s},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(t,e,a){"use strict";function i(t){if(!(this instanceof i))return new i(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0===(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var a=s.inflateInit2(this.strm,e.windowBits);if(a!==h.Z_OK)throw new Error(d[a]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function n(t,e){var a=new i(e);if(a.push(t,!0),a.err)throw a.msg;return a.result}function r(t,e){return e=e||{},e.raw=!0,n(t,e)}var s=t("./zlib/inflate"),o=t("./utils/common"),l=t("./utils/strings"),h=t("./zlib/constants"),d=t("./zlib/messages"),f=t("./zlib/zstream"),_=t("./zlib/gzheader"),u=Object.prototype.toString;i.prototype.push=function(t,e){var a,i,n,r,d,f,_=this.strm,c=this.options.chunkSize,b=this.options.dictionary,g=!1;if(this.ended)return!1;i=e===~~e?e:e===!0?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?_.input=l.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?_.input=new Uint8Array(t):_.input=t,_.next_in=0,_.avail_in=_.input.length;do{if(0===_.avail_out&&(_.output=new o.Buf8(c),_.next_out=0,_.avail_out=c),a=s.inflate(_,h.Z_NO_FLUSH),a===h.Z_NEED_DICT&&b&&(f="string"==typeof b?l.string2buf(b):"[object ArrayBuffer]"===u.call(b)?new Uint8Array(b):b,a=s.inflateSetDictionary(this.strm,f)),a===h.Z_BUF_ERROR&&g===!0&&(a=h.Z_OK,g=!1),a!==h.Z_STREAM_END&&a!==h.Z_OK)return this.onEnd(a),this.ended=!0,!1;_.next_out&&(0!==_.avail_out&&a!==h.Z_STREAM_END&&(0!==_.avail_in||i!==h.Z_FINISH&&i!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(n=l.utf8border(_.output,_.next_out),r=_.next_out-n,d=l.buf2string(_.output,n),_.next_out=r,_.avail_out=c-r,r&&o.arraySet(_.output,_.output,n,r,0),this.onData(d)):this.onData(o.shrinkBuf(_.output,_.next_out)))),0===_.avail_in&&0===_.avail_out&&(g=!0)}while((_.avail_in>0||0===_.avail_out)&&a!==h.Z_STREAM_END);return a===h.Z_STREAM_END&&(i=h.Z_FINISH),i===h.Z_FINISH?(a=s.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h.Z_OK):i!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),_.avail_out=0,!0)},i.prototype.onData=function(t){this.chunks.push(t)},i.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},a.Inflate=i,a.inflate=n,a.inflateRaw=r,a.ungzip=n},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(t,e,a){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var i in a)a.hasOwnProperty(i)&&(t[i]=a[i])}}return t},a.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var n={arraySet:function(t,e,a,i,n){if(e.subarray&&t.subarray)return void t.set(e.subarray(a,a+i),n);for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){var e,a,i,n,r,s;for(i=0,e=0,a=t.length;e<a;e++)i+=t[e].length;for(s=new Uint8Array(i),n=0,e=0,a=t.length;e<a;e++)r=t[e],s.set(r,n),n+=r.length;return s}},r={arraySet:function(t,e,a,i,n){for(var r=0;r<i;r++)t[n+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};a.setTyped=function(t){t?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,n)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,r))},a.setTyped(i)},{}],4:[function(t,e,a){"use strict";function i(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var a="",i=0;i<e;i++)a+=String.fromCharCode(t[i]);return a}var n=t("./common"),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new n.Buf8(256),l=0;l<256;l++)o[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;o[254]=o[254]=1,a.string2buf=function(t){var e,a,i,r,s,o=t.length,l=0;for(r=0;r<o;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),l+=a<128?1:a<2048?2:a<65536?3:4;for(e=new n.Buf8(l),s=0,r=0;s<l;r++)a=t.charCodeAt(r),55296===(64512&a)&&r+1<o&&(i=t.charCodeAt(r+1),56320===(64512&i)&&(a=65536+(a-55296<<10)+(i-56320),r++)),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},a.buf2binstring=function(t){return i(t,t.length)},a.binstring2buf=function(t){for(var e=new n.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},a.buf2string=function(t,e){var a,n,r,s,l=e||t.length,h=new Array(2*l);for(n=0,a=0;a<l;)if(r=t[a++],r<128)h[n++]=r;else if(s=o[r],s>4)h[n++]=65533,a+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&a<l;)r=r<<6|63&t[a++],s--;s>1?h[n++]=65533:r<65536?h[n++]=r:(r-=65536,h[n++]=55296|r>>10&1023,h[n++]=56320|1023&r)}return i(h,n)},a.utf8border=function(t,e){var a;for(e=e||t.length,e>t.length&&(e=t.length),a=e-1;a>=0&&128===(192&t[a]);)a--;return a<0?e:0===a?e:a+o[t[a]]>e?a:e}},{"./common":3}],5:[function(t,e,a){"use strict";function i(t,e,a,i){for(var n=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){s=a>2e3?2e3:a,a-=s;do{n=n+e[i++]|0,r=r+n|0}while(--s);n%=65521,r%=65521}return n|r<<16|0}e.exports=i},{}],6:[function(t,e,a){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(t,e,a){"use strict";function i(){for(var t,e=[],a=0;a<256;a++){t=a;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}function n(t,e,a,i){var n=r,s=i+a;t^=-1;for(var o=i;o<s;o++)t=t>>>8^n[255&(t^e[o])];return t^-1}var r=i();e.exports=n},{}],8:[function(t,e,a){"use strict";function i(t,e){return t.msg=D[e],e}function n(t){return(t<<1)-(t>4?9:0)}function r(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(R.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function o(t,e){C._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function l(t,e){t.pending_buf[t.pending++]=e}function h(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function d(t,e,a,i){var n=t.avail_in;return n>i&&(n=i),0===n?0:(t.avail_in-=n,R.arraySet(e,t.input,t.next_in,n,a),1===t.state.wrap?t.adler=N(t.adler,e,n,a):2===t.state.wrap&&(t.adler=O(t.adler,e,n,a)),t.next_in+=n,t.total_in+=n,n)}function f(t,e){var a,i,n=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-ft?t.strstart-(t.w_size-ft):0,h=t.window,d=t.w_mask,f=t.prev,_=t.strstart+dt,u=h[r+s-1],c=h[r+s];t.prev_length>=t.good_match&&(n>>=2),o>t.lookahead&&(o=t.lookahead);do{if(a=e,h[a+s]===c&&h[a+s-1]===u&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<_);if(i=dt-(_-r),r=_-dt,i>s){if(t.match_start=e,s=i,i>=o)break;u=h[r+s-1],c=h[r+s]}}}while((e=f[e&d])>l&&0!==--n);return s<=t.lookahead?s:t.lookahead}function _(t){var e,a,i,n,r,s=t.w_size;do{if(n=t.window_size-t.lookahead-t.strstart,t.strstart>=s+(s-ft)){R.arraySet(t.window,t.window,s,s,0),t.match_start-=s,t.strstart-=s,t.block_start-=s,a=t.hash_size,e=a;do{i=t.head[--e],t.head[e]=i>=s?i-s:0}while(--a);a=s,e=a;do{i=t.prev[--e],t.prev[e]=i>=s?i-s:0}while(--a);n+=s}if(0===t.strm.avail_in)break;if(a=d(t.strm,t.window,t.strstart+t.lookahead,n),t.lookahead+=a,t.lookahead+t.insert>=ht)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+ht-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<ht)););}while(t.lookahead<ft&&0!==t.strm.avail_in)}function u(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(_(t),0===t.lookahead&&e===I)return vt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+a;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,o(t,!1),0===t.strm.avail_out))return vt;if(t.strstart-t.block_start>=t.w_size-ft&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.strstart>t.block_start&&(o(t,!1),0===t.strm.avail_out)?vt:vt}function c(t,e){for(var a,i;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a)),t.match_length>=ht)if(i=C._tr_tally(t,t.strstart-t.match_start,t.match_length-ht),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ht){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function b(t,e){for(var a,i,n;;){if(t.lookahead<ft){if(_(t),t.lookahead<ft&&e===I)return vt;if(0===t.lookahead)break}if(a=0,t.lookahead>=ht&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ht-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-ft&&(t.match_length=f(t,a),t.match_length<=5&&(t.strategy===q||t.match_length===ht&&t.strstart-t.match_start>4096)&&(t.match_length=ht-1)),t.prev_length>=ht&&t.match_length<=t.prev_length){n=t.strstart+t.lookahead-ht,i=C._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ht),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=n&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ht-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!==--t.prev_length);if(t.match_available=0,t.match_length=ht-1,t.strstart++,i&&(o(t,!1),0===t.strm.avail_out))return vt}else if(t.match_available){if(i=C._tr_tally(t,0,t.window[t.strstart-1]),i&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return vt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=C._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ht-1?t.strstart:ht-1,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function g(t,e){for(var a,i,n,r,s=t.window;;){if(t.lookahead<=dt){if(_(t),t.lookahead<=dt&&e===I)return vt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=ht&&t.strstart>0&&(n=t.strstart-1,i=s[n],i===s[++n]&&i===s[++n]&&i===s[++n])){r=t.strstart+dt;do{}while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<r);t.match_length=dt-(r-n),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ht?(a=C._tr_tally(t,1,t.match_length-ht),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function m(t,e){for(var a;;){if(0===t.lookahead&&(_(t),0===t.lookahead)){if(e===I)return vt;break}if(t.match_length=0,a=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(o(t,!1),0===t.strm.avail_out))return vt}return t.insert=0,e===F?(o(t,!0),0===t.strm.avail_out?yt:xt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?vt:kt}function w(t,e,a,i,n){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=i,this.func=n}function p(t){t.window_size=2*t.w_size,r(t.head),t.max_lazy_match=Z[t.level].max_lazy,t.good_match=Z[t.level].good_length,t.nice_match=Z[t.level].nice_length,t.max_chain_length=Z[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ht-1,t.match_available=0,t.ins_h=0}function v(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=V,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new R.Buf16(2*ot),this.dyn_dtree=new R.Buf16(2*(2*rt+1)),this.bl_tree=new R.Buf16(2*(2*st+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new R.Buf16(lt+1),this.heap=new R.Buf16(2*nt+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new R.Buf16(2*nt+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=Q,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ut:wt,t.adler=2===e.wrap?0:1,e.last_flush=I,C._tr_init(e),H):i(t,K)}function y(t){var e=k(t);return e===H&&p(t.state),e}function x(t,e){return t&&t.state?2!==t.state.wrap?K:(t.state.gzhead=e,H):K}function z(t,e,a,n,r,s){if(!t)return K;var o=1;if(e===Y&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>$||a!==V||n<8||n>15||e<0||e>9||s<0||s>W)return i(t,K);8===n&&(n=9);var l=new v;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ht-1)/ht),l.window=new R.Buf8(2*l.w_size),l.head=new R.Buf16(l.hash_size),l.prev=new R.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new R.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,y(t)}function B(t,e){return z(t,e,V,tt,et,J)}function S(t,e){var a,o,d,f;if(!t||!t.state||e>L||e<0)return t?i(t,K):K;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===pt&&e!==F)return i(t,0===t.avail_out?P:K);if(o.strm=t,a=o.last_flush,o.last_flush=e,o.status===ut)if(2===o.wrap)t.adler=0,l(o,31),l(o,139),l(o,8),o.gzhead?(l(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),l(o,255&o.gzhead.time),l(o,o.gzhead.time>>8&255),l(o,o.gzhead.time>>16&255),l(o,o.gzhead.time>>24&255),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(l(o,255&o.gzhead.extra.length),l(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=O(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ct):(l(o,0),l(o,0),l(o,0),l(o,0),l(o,0),l(o,9===o.level?2:o.strategy>=G||o.level<2?4:0),l(o,zt),o.status=wt);else{var _=V+(o.w_bits-8<<4)<<8,u=-1;u=o.strategy>=G||o.level<2?0:o.level<6?1:6===o.level?2:3,_|=u<<6,0!==o.strstart&&(_|=_t),_+=31-_%31,o.status=wt,h(o,_),0!==o.strstart&&(h(o,t.adler>>>16),h(o,65535&t.adler)),t.adler=1}if(o.status===ct)if(o.gzhead.extra){for(d=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending!==o.pending_buf_size));)l(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=bt)}else o.status=bt;if(o.status===bt)if(o.gzhead.name){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.gzindex=0,o.status=gt)}else o.status=gt;if(o.status===gt)if(o.gzhead.comment){d=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),s(t),d=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,l(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>d&&(t.adler=O(t.adler,o.pending_buf,o.pending-d,d)),0===f&&(o.status=mt)}else o.status=mt;if(o.status===mt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(l(o,255&t.adler),l(o,t.adler>>8&255),t.adler=0,o.status=wt)):o.status=wt),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,H}else if(0===t.avail_in&&n(e)<=n(a)&&e!==F)return i(t,P);if(o.status===pt&&0!==t.avail_in)return i(t,P);if(0!==t.avail_in||0!==o.lookahead||e!==I&&o.status!==pt){var c=o.strategy===G?m(o,e):o.strategy===X?g(o,e):Z[o.level].func(o,e);if(c!==yt&&c!==xt||(o.status=pt),c===vt||c===yt)return 0===t.avail_out&&(o.last_flush=-1),H;if(c===kt&&(e===U?C._tr_align(o):e!==L&&(C._tr_stored_block(o,0,0,!1),e===T&&(r(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,H}return e!==F?H:o.wrap<=0?j:(2===o.wrap?(l(o,255&t.adler),l(o,t.adler>>8&255),l(o,t.adler>>16&255),l(o,t.adler>>24&255),l(o,255&t.total_in),l(o,t.total_in>>8&255),l(o,t.total_in>>16&255),l(o,t.total_in>>24&255)):(h(o,t.adler>>>16),h(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?H:j)}function E(t){var e;return t&&t.state?(e=t.state.status,e!==ut&&e!==ct&&e!==bt&&e!==gt&&e!==mt&&e!==wt&&e!==pt?i(t,K):(t.state=null,e===wt?i(t,M):H)):K}function A(t,e){var a,i,n,s,o,l,h,d,f=e.length;if(!t||!t.state)return K;if(a=t.state,s=a.wrap,2===s||1===s&&a.status!==ut||a.lookahead)return K;for(1===s&&(t.adler=N(t.adler,e,f,0)),a.wrap=0,f>=a.w_size&&(0===s&&(r(a.head),a.strstart=0,a.block_start=0,a.insert=0),d=new R.Buf8(a.w_size),R.arraySet(d,e,f-a.w_size,a.w_size,0),e=d,f=a.w_size),o=t.avail_in,l=t.next_in,h=t.input,t.avail_in=f,t.next_in=0,t.input=e,_(a);a.lookahead>=ht;){i=a.strstart,n=a.lookahead-(ht-1);do{a.ins_h=(a.ins_h<<a.hash_shift^a.window[i+ht-1])&a.hash_mask,a.prev[i&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=i,i++}while(--n);a.strstart=i,a.lookahead=ht-1,_(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=ht-1,a.match_available=0,t.next_in=l,t.input=h,t.avail_in=o,a.wrap=s,H}var Z,R=t("../utils/common"),C=t("./trees"),N=t("./adler32"),O=t("./crc32"),D=t("./messages"),I=0,U=1,T=3,F=4,L=5,H=0,j=1,K=-2,M=-3,P=-5,Y=-1,q=1,G=2,X=3,W=4,J=0,Q=2,V=8,$=9,tt=15,et=8,at=29,it=256,nt=it+1+at,rt=30,st=19,ot=2*nt+1,lt=15,ht=3,dt=258,ft=dt+ht+1,_t=32,ut=42,ct=69,bt=73,gt=91,mt=103,wt=113,pt=666,vt=1,kt=2,yt=3,xt=4,zt=3;Z=[new w(0,0,0,0,u),new w(4,4,8,4,c),new w(4,5,16,8,c),new w(4,6,32,32,c),new w(4,4,16,16,b),new w(8,16,32,32,b),new w(8,16,128,128,b),new w(8,32,128,256,b),new w(32,128,258,1024,b),new w(32,258,258,4096,b)],a.deflateInit=B,a.deflateInit2=z,a.deflateReset=y,a.deflateResetKeep=k,a.deflateSetHeader=x,a.deflate=S,a.deflateEnd=E,a.deflateSetDictionary=A,a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(t,e,a){"use strict";function i(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=i},{}],10:[function(t,e,a){"use strict";var i=30,n=12;e.exports=function(t,e){var a,r,s,o,l,h,d,f,_,u,c,b,g,m,w,p,v,k,y,x,z,B,S,E,A;a=t.state,r=t.next_in,E=t.input,s=r+(t.avail_in-5),o=t.next_out,A=t.output,l=o-(e-t.avail_out),h=o+(t.avail_out-257),d=a.dmax,f=a.wsize,_=a.whave,u=a.wnext,c=a.window,b=a.hold,g=a.bits,m=a.lencode,w=a.distcode,p=(1<<a.lenbits)-1,v=(1<<a.distbits)-1;t:do{g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=m[b&p];e:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,0===y)A[o++]=65535&k;else{if(!(16&y)){if(0===(64&y)){k=m[(65535&k)+(b&(1<<y)-1)];continue e}if(32&y){a.mode=n;break t}t.msg="invalid literal/length code",a.mode=i;break t}x=65535&k,y&=15,y&&(g<y&&(b+=E[r++]<<g,g+=8),x+=b&(1<<y)-1,b>>>=y,g-=y),g<15&&(b+=E[r++]<<g,g+=8,b+=E[r++]<<g,g+=8),k=w[b&v];a:for(;;){if(y=k>>>24,b>>>=y,g-=y,y=k>>>16&255,!(16&y)){if(0===(64&y)){k=w[(65535&k)+(b&(1<<y)-1)];continue a}t.msg="invalid distance code",a.mode=i;break t}if(z=65535&k,y&=15,g<y&&(b+=E[r++]<<g,g+=8,g<y&&(b+=E[r++]<<g,g+=8)),z+=b&(1<<y)-1,z>d){t.msg="invalid distance too far back",a.mode=i;break t}if(b>>>=y,g-=y,y=o-l,z>y){if(y=z-y,y>_&&a.sane){t.msg="invalid distance too far back",a.mode=i;break t}if(B=0,S=c,0===u){if(B+=f-y,y<x){x-=y;do{A[o++]=c[B++]}while(--y);B=o-z,S=A}}else if(u<y){if(B+=f+u-y,y-=u,y<x){x-=y;do{A[o++]=c[B++]}while(--y);if(B=0,u<x){y=u,x-=y;do{A[o++]=c[B++]}while(--y);B=o-z,S=A}}}else if(B+=u-y,y<x){x-=y;do{A[o++]=c[B++]}while(--y);B=o-z,S=A}for(;x>2;)A[o++]=S[B++],A[o++]=S[B++],A[o++]=S[B++],x-=3;x&&(A[o++]=S[B++],x>1&&(A[o++]=S[B++]))}else{B=o-z;do{A[o++]=A[B++],A[o++]=A[B++],A[o++]=A[B++],x-=3}while(x>2);x&&(A[o++]=A[B++],x>1&&(A[o++]=A[B++]))}break}}break}}while(r<s&&o<h);x=g>>3,r-=x,g-=x<<3,b&=(1<<g)-1,t.next_in=r,t.next_out=o,t.avail_in=r<s?5+(s-r):5-(r-s),t.avail_out=o<h?257+(h-o):257-(o-h),a.hold=b,a.bits=g}},{}],11:[function(t,e,a){"use strict";function i(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function n(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new w.Buf16(320),this.work=new w.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=T,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new w.Buf32(bt),e.distcode=e.distdyn=new w.Buf32(gt),e.sane=1,e.back=-1,Z):N}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,r(t)):N}function o(t,e){var a,i;return t&&t.state?(i=t.state,e<0?(a=0,e=-e):(a=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?N:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=a,i.wbits=e,s(t))):N}function l(t,e){var a,i;return t?(i=new n,t.state=i,i.window=null,a=o(t,e),a!==Z&&(t.state=null),a):N}function h(t){return l(t,wt)}function d(t){if(pt){var e;for(g=new w.Buf32(512),m=new w.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(y(z,t.lens,0,288,g,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;y(B,t.lens,0,32,m,0,t.work,{bits:5}),pt=!1}t.lencode=g,t.lenbits=9,t.distcode=m,t.distbits=5}function f(t,e,a,i){var n,r=t.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new w.Buf8(r.wsize)),i>=r.wsize?(w.arraySet(r.window,e,a-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(n=r.wsize-r.wnext,n>i&&(n=i),w.arraySet(r.window,e,a-i,n,r.wnext),i-=n,i?(w.arraySet(r.window,e,a-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=n,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=n))),0}function _(t,e){var a,n,r,s,o,l,h,_,u,c,b,g,m,bt,gt,mt,wt,pt,vt,kt,yt,xt,zt,Bt,St=0,Et=new w.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return N;a=t.state,a.mode===X&&(a.mode=W),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,c=l,b=h,xt=Z;t:for(;;)switch(a.mode){case T:if(0===a.wrap){a.mode=W;break}for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(2&a.wrap&&35615===_){a.check=0,Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0),_=0,u=0,a.mode=F;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&_)<<8)+(_>>8))%31){t.msg="incorrect header check",a.mode=_t;break}if((15&_)!==U){t.msg="unknown compression method",a.mode=_t;break}if(_>>>=4,u-=4,yt=(15&_)+8,0===a.wbits)a.wbits=yt;else if(yt>a.wbits){t.msg="invalid window size",a.mode=_t;break}a.dmax=1<<yt,t.adler=a.check=1,a.mode=512&_?q:X,_=0,u=0;break;case F:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.flags=_,(255&a.flags)!==U){t.msg="unknown compression method",a.mode=_t;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=_t;break}a.head&&(a.head.text=_>>8&1),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=L;case L:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.time=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,Et[2]=_>>>16&255,Et[3]=_>>>24&255,a.check=v(a.check,Et,4,0)),_=0,u=0,a.mode=H;case H:for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.head&&(a.head.xflags=255&_,a.head.os=_>>8),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0,a.mode=j;case j:if(1024&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length=_,a.head&&(a.head.extra_len=_),512&a.flags&&(Et[0]=255&_,Et[1]=_>>>8&255,a.check=v(a.check,Et,2,0)),_=0,u=0}else a.head&&(a.head.extra=null);a.mode=K;case K:if(1024&a.flags&&(g=a.length,g>l&&(g=l),g&&(a.head&&(yt=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),w.arraySet(a.head.extra,n,s,g,yt)),512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,a.length-=g),a.length))break t;a.length=0,a.mode=M;case M:if(2048&a.flags){if(0===l)break t;g=0;do{yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.name+=String.fromCharCode(yt))}while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=P;case P:if(4096&a.flags){if(0===l)break t;g=0;do{yt=n[s+g++],a.head&&yt&&a.length<65536&&(a.head.comment+=String.fromCharCode(yt))}while(yt&&g<l);if(512&a.flags&&(a.check=v(a.check,n,g,s)),l-=g,s+=g,yt)break t}else a.head&&(a.head.comment=null);a.mode=Y;case Y:if(512&a.flags){for(;u<16;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(65535&a.check)){t.msg="header crc mismatch",a.mode=_t;break}_=0,u=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=X;break;case q:for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}t.adler=a.check=i(_),_=0,u=0,a.mode=G;case G:if(0===a.havedict)return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,C;t.adler=a.check=1,a.mode=X;case X:if(e===E||e===A)break t;case W:if(a.last){_>>>=7&u,u-=7&u,a.mode=ht;break}for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}switch(a.last=1&_,_>>>=1,u-=1,3&_){case 0:a.mode=J;break;case 1:if(d(a),a.mode=at,e===A){_>>>=2,u-=2;break t}break;case 2:a.mode=$;break;case 3:t.msg="invalid block type",a.mode=_t}_>>>=2,u-=2;break;case J:for(_>>>=7&u,u-=7&u;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if((65535&_)!==(_>>>16^65535)){t.msg="invalid stored block lengths",a.mode=_t;break}if(a.length=65535&_,_=0,u=0,a.mode=Q,e===A)break t;case Q:a.mode=V;case V:if(g=a.length){if(g>l&&(g=l),g>h&&(g=h),0===g)break t;w.arraySet(r,n,s,g,o),l-=g,s+=g,h-=g,o+=g,a.length-=g;break}a.mode=X;break;case $:for(;u<14;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(a.nlen=(31&_)+257,_>>>=5,u-=5,a.ndist=(31&_)+1,_>>>=5,u-=5,a.ncode=(15&_)+4,_>>>=4,u-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=_t;break}a.have=0,a.mode=tt;case tt:for(;a.have<a.ncode;){for(;u<3;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.lens[At[a.have++]]=7&_,_>>>=3,u-=3}for(;a.have<19;)a.lens[At[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,zt={bits:a.lenbits},xt=y(x,a.lens,0,19,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid code lengths set",a.mode=_t;break}a.have=0,a.mode=et;case et:for(;a.have<a.nlen+a.ndist;){for(;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(wt<16)_>>>=gt,u-=gt,a.lens[a.have++]=wt;else{if(16===wt){for(Bt=gt+2;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_>>>=gt,u-=gt,0===a.have){t.msg="invalid bit length repeat",a.mode=_t;break}yt=a.lens[a.have-1],g=3+(3&_),_>>>=2,u-=2}else if(17===wt){for(Bt=gt+3;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=3+(7&_),_>>>=3,u-=3}else{for(Bt=gt+7;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=gt,u-=gt,yt=0,g=11+(127&_),_>>>=7,u-=7}if(a.have+g>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=_t;break}for(;g--;)a.lens[a.have++]=yt}}if(a.mode===_t)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=_t;break}if(a.lenbits=9,zt={bits:a.lenbits},xt=y(z,a.lens,0,a.nlen,a.lencode,0,a.work,zt),a.lenbits=zt.bits,xt){t.msg="invalid literal/lengths set",a.mode=_t;break}if(a.distbits=6,a.distcode=a.distdyn,zt={bits:a.distbits},xt=y(B,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,zt),a.distbits=zt.bits,xt){t.msg="invalid distances set",a.mode=_t;break}if(a.mode=at,e===A)break t;case at:a.mode=it;case it:if(l>=6&&h>=258){t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,k(t,b),o=t.next_out,r=t.output,h=t.avail_out,s=t.next_in,n=t.input,l=t.avail_in,_=a.hold,u=a.bits,a.mode===X&&(a.back=-1);break}for(a.back=0;St=a.lencode[_&(1<<a.lenbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(mt&&0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.lencode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,a.length=wt,0===mt){a.mode=lt;break}if(32&mt){a.back=-1,a.mode=X;break}if(64&mt){t.msg="invalid literal/length code",a.mode=_t;break}a.extra=15&mt,a.mode=nt;case nt:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.length+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=rt;case rt:for(;St=a.distcode[_&(1<<a.distbits)-1],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(0===(240&mt)){for(pt=gt,vt=mt,kt=wt;St=a.distcode[kt+((_&(1<<pt+vt)-1)>>pt)],gt=St>>>24,mt=St>>>16&255,wt=65535&St,!(pt+gt<=u);){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}_>>>=pt,u-=pt,a.back+=pt}if(_>>>=gt,u-=gt,a.back+=gt,64&mt){t.msg="invalid distance code",a.mode=_t;break}a.offset=wt,a.extra=15&mt,a.mode=st;case st:if(a.extra){for(Bt=a.extra;u<Bt;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}a.offset+=_&(1<<a.extra)-1,_>>>=a.extra,u-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=_t;break}a.mode=ot;case ot:if(0===h)break t;if(g=b-h,a.offset>g){if(g=a.offset-g,g>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=_t;break}g>a.wnext?(g-=a.wnext,m=a.wsize-g):m=a.wnext-g,g>a.length&&(g=a.length),bt=a.window}else bt=r,m=o-a.offset,g=a.length;g>h&&(g=h),h-=g,a.length-=g;do{r[o++]=bt[m++]}while(--g);0===a.length&&(a.mode=it);break;case lt:if(0===h)break t;r[o++]=a.length,h--,a.mode=it;break;case ht:if(a.wrap){for(;u<32;){if(0===l)break t;l--,_|=n[s++]<<u,u+=8}if(b-=h,t.total_out+=b,a.total+=b,b&&(t.adler=a.check=a.flags?v(a.check,r,b,o-b):p(a.check,r,b,o-b)),b=h,(a.flags?_:i(_))!==a.check){t.msg="incorrect data check",a.mode=_t;break}_=0,u=0}a.mode=dt;case dt:if(a.wrap&&a.flags){for(;u<32;){if(0===l)break t;l--,_+=n[s++]<<u,u+=8}if(_!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=_t;break}_=0,u=0}a.mode=ft;case ft:xt=R;break t;case _t:xt=O;break t;case ut:return D;case ct:default:return N}return t.next_out=o,t.avail_out=h,t.next_in=s,t.avail_in=l,a.hold=_,a.bits=u,(a.wsize||b!==t.avail_out&&a.mode<_t&&(a.mode<ht||e!==S))&&f(t,t.output,t.next_out,b-t.avail_out)?(a.mode=ut,D):(c-=t.avail_in,b-=t.avail_out,t.total_in+=c,t.total_out+=b,a.total+=b,a.wrap&&b&&(t.adler=a.check=a.flags?v(a.check,r,b,t.next_out-b):p(a.check,r,b,t.next_out-b)),t.data_type=a.bits+(a.last?64:0)+(a.mode===X?128:0)+(a.mode===at||a.mode===Q?256:0),(0===c&&0===b||e===S)&&xt===Z&&(xt=I),xt)}function u(t){if(!t||!t.state)return N;var e=t.state;return e.window&&(e.window=null),t.state=null,Z}function c(t,e){var a;return t&&t.state?(a=t.state,0===(2&a.wrap)?N:(a.head=e,e.done=!1,Z)):N}function b(t,e){var a,i,n,r=e.length;return t&&t.state?(a=t.state,0!==a.wrap&&a.mode!==G?N:a.mode===G&&(i=1,i=p(i,e,r,0),i!==a.check)?O:(n=f(t,e,r,r))?(a.mode=ut,D):(a.havedict=1,Z)):N}var g,m,w=t("../utils/common"),p=t("./adler32"),v=t("./crc32"),k=t("./inffast"),y=t("./inftrees"),x=0,z=1,B=2,S=4,E=5,A=6,Z=0,R=1,C=2,N=-2,O=-3,D=-4,I=-5,U=8,T=1,F=2,L=3,H=4,j=5,K=6,M=7,P=8,Y=9,q=10,G=11,X=12,W=13,J=14,Q=15,V=16,$=17,tt=18,et=19,at=20,it=21,nt=22,rt=23,st=24,ot=25,lt=26,ht=27,dt=28,ft=29,_t=30,ut=31,ct=32,bt=852,gt=592,mt=15,wt=mt,pt=!0;a.inflateReset=s,a.inflateReset2=o,a.inflateResetKeep=r,a.inflateInit=h,a.inflateInit2=l,a.inflate=_,a.inflateEnd=u,a.inflateGetHeader=c,a.inflateSetDictionary=b,a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(t,e,a){"use strict";var i=t("../utils/common"),n=15,r=852,s=592,o=0,l=1,h=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],_=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,a,c,b,g,m,w){var p,v,k,y,x,z,B,S,E,A=w.bits,Z=0,R=0,C=0,N=0,O=0,D=0,I=0,U=0,T=0,F=0,L=null,H=0,j=new i.Buf16(n+1),K=new i.Buf16(n+1),M=null,P=0;for(Z=0;Z<=n;Z++)j[Z]=0;for(R=0;R<c;R++)j[e[a+R]]++;for(O=A,N=n;N>=1&&0===j[N];N--);if(O>N&&(O=N),0===N)return b[g++]=20971520,b[g++]=20971520,w.bits=1,0;for(C=1;C<N&&0===j[C];C++);for(O<C&&(O=C),U=1,Z=1;Z<=n;Z++)if(U<<=1,U-=j[Z],U<0)return-1;if(U>0&&(t===o||1!==N))return-1;for(K[1]=0,Z=1;Z<n;Z++)K[Z+1]=K[Z]+j[Z];for(R=0;R<c;R++)0!==e[a+R]&&(m[K[e[a+R]]++]=R);if(t===o?(L=M=m,z=19):t===l?(L=d,H-=257,M=f,P-=257,z=256):(L=_,M=u,z=-1),F=0,R=0,Z=C,x=g,D=O,I=0,k=-1,T=1<<O,y=T-1,t===l&&T>r||t===h&&T>s)return 1;for(var Y=0;;){Y++,B=Z-I,m[R]<z?(S=0,E=m[R]):m[R]>z?(S=M[P+m[R]],E=L[H+m[R]]):(S=96,E=0),p=1<<Z-I,v=1<<D,C=v;do{v-=p,b[x+(F>>I)+v]=B<<24|S<<16|E|0}while(0!==v);for(p=1<<Z-1;F&p;)p>>=1;if(0!==p?(F&=p-1,F+=p):F=0,R++,0===--j[Z]){if(Z===N)break;Z=e[a+m[R]]}if(Z>O&&(F&y)!==k){for(0===I&&(I=O),x+=C,D=Z-I,U=1<<D;D+I<N&&(U-=j[D+I],!(U<=0));)D++,U<<=1;if(T+=1<<D,t===l&&T>r||t===h&&T>s)return 1;k=F&y,b[k]=O<<24|D<<16|x-g|0}}return 0!==F&&(b[x+F]=Z-I<<24|64<<16|0),w.bits=O,0}},{"../utils/common":3}],13:[function(t,e,a){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(t,e,a){"use strict";function i(t){for(var e=t.length;--e>=0;)t[e]=0}function n(t,e,a,i,n){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=i,this.max_length=n,this.has_stree=t&&t.length}function r(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function s(t){return t<256?lt[t]:lt[256+(t>>>7)]}function o(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function l(t,e,a){t.bi_valid>W-a?(t.bi_buf|=e<<t.bi_valid&65535,o(t,t.bi_buf),t.bi_buf=e>>W-t.bi_valid,t.bi_valid+=a-W):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function h(t,e,a){l(t,a[2*e],a[2*e+1])}function d(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1}function f(t){16===t.bi_valid?(o(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function _(t,e){var a,i,n,r,s,o,l=e.dyn_tree,h=e.max_code,d=e.stat_desc.static_tree,f=e.stat_desc.has_stree,_=e.stat_desc.extra_bits,u=e.stat_desc.extra_base,c=e.stat_desc.max_length,b=0;for(r=0;r<=X;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<G;a++)i=t.heap[a],r=l[2*l[2*i+1]+1]+1,r>c&&(r=c,b++),l[2*i+1]=r,i>h||(t.bl_count[r]++,s=0,i>=u&&(s=_[i-u]),o=l[2*i],t.opt_len+=o*(r+s),f&&(t.static_len+=o*(d[2*i+1]+s)));if(0!==b){do{for(r=c-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[c]--,b-=2}while(b>0);for(r=c;0!==r;r--)for(i=t.bl_count[r];0!==i;)n=t.heap[--a],n>h||(l[2*n+1]!==r&&(t.opt_len+=(r-l[2*n+1])*l[2*n],l[2*n+1]=r),i--)}}function u(t,e,a){var i,n,r=new Array(X+1),s=0;for(i=1;i<=X;i++)r[i]=s=s+a[i-1]<<1;for(n=0;n<=e;n++){var o=t[2*n+1];0!==o&&(t[2*n]=d(r[o]++,o))}}function c(){var t,e,a,i,r,s=new Array(X+1);for(a=0,i=0;i<K-1;i++)for(dt[i]=a,t=0;t<1<<et[i];t++)ht[a++]=i;for(ht[a-1]=i,r=0,i=0;i<16;i++)for(ft[i]=r,t=0;t<1<<at[i];t++)lt[r++]=i;for(r>>=7;i<Y;i++)for(ft[i]=r<<7,t=0;t<1<<at[i]-7;t++)lt[256+r++]=i;for(e=0;e<=X;e++)s[e]=0;for(t=0;t<=143;)st[2*t+1]=8,t++,s[8]++;for(;t<=255;)st[2*t+1]=9,t++,s[9]++;for(;t<=279;)st[2*t+1]=7,t++,s[7]++;for(;t<=287;)st[2*t+1]=8,t++,s[8]++;for(u(st,P+1,s),t=0;t<Y;t++)ot[2*t+1]=5,ot[2*t]=d(t,5);_t=new n(st,et,M+1,P,X),ut=new n(ot,at,0,Y,X),ct=new n(new Array(0),it,0,q,J)}function b(t){var e;for(e=0;e<P;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Y;e++)t.dyn_dtree[2*e]=0;for(e=0;e<q;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function g(t){t.bi_valid>8?o(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function m(t,e,a,i){g(t),i&&(o(t,a),o(t,~a)),N.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}function w(t,e,a,i){var n=2*e,r=2*a;return t[n]<t[r]||t[n]===t[r]&&i[e]<=i[a]}function p(t,e,a){for(var i=t.heap[a],n=a<<1;n<=t.heap_len&&(n<t.heap_len&&w(e,t.heap[n+1],t.heap[n],t.depth)&&n++,!w(e,i,t.heap[n],t.depth));)t.heap[a]=t.heap[n],a=n,n<<=1;t.heap[a]=i}function v(t,e,a){var i,n,r,o,d=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],n=t.pending_buf[t.l_buf+d],d++,0===i?h(t,n,e):(r=ht[n],h(t,r+M+1,e),o=et[r],0!==o&&(n-=dt[r],l(t,n,o)),i--,r=s(i),h(t,r,a),o=at[r],0!==o&&(i-=ft[r],l(t,i,o)))}while(d<t.last_lit);h(t,Q,e)}function k(t,e){var a,i,n,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=G,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)n=t.heap[++t.heap_len]=h<2?++h:0,r[2*n]=1,t.depth[n]=0,t.opt_len--,o&&(t.static_len-=s[2*n+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)p(t,r,a);n=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],p(t,r,1),i=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=i,r[2*n]=r[2*a]+r[2*i],t.depth[n]=(t.depth[a]>=t.depth[i]?t.depth[a]:t.depth[i])+1,r[2*a+1]=r[2*i+1]=n,t.heap[1]=n++,p(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],_(t,e),u(r,h,t.bl_count)}function y(t,e,a){var i,n,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,i=0;i<=a;i++)n=s,s=e[2*(i+1)+1],++o<l&&n===s||(o<h?t.bl_tree[2*n]+=o:0!==n?(n!==r&&t.bl_tree[2*n]++,t.bl_tree[2*V]++):o<=10?t.bl_tree[2*$]++:t.bl_tree[2*tt]++,o=0,r=n,0===s?(l=138,h=3):n===s?(l=6,h=3):(l=7,h=4))}function x(t,e,a){var i,n,r=-1,s=e[1],o=0,d=7,f=4;for(0===s&&(d=138,f=3),i=0;i<=a;i++)if(n=s,s=e[2*(i+1)+1],!(++o<d&&n===s)){if(o<f){do{h(t,n,t.bl_tree)}while(0!==--o)}else 0!==n?(n!==r&&(h(t,n,t.bl_tree),o--),h(t,V,t.bl_tree),l(t,o-3,2)):o<=10?(h(t,$,t.bl_tree),l(t,o-3,3)):(h(t,tt,t.bl_tree),l(t,o-11,7));o=0,r=n,0===s?(d=138,f=3):n===s?(d=6,f=3):(d=7,f=4)}}function z(t){var e;for(y(t,t.dyn_ltree,t.l_desc.max_code),y(t,t.dyn_dtree,t.d_desc.max_code),k(t,t.bl_desc),e=q-1;e>=3&&0===t.bl_tree[2*nt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function B(t,e,a,i){var n;for(l(t,e-257,5),l(t,a-1,5),l(t,i-4,4),n=0;n<i;n++)l(t,t.bl_tree[2*nt[n]+1],3);x(t,t.dyn_ltree,e-1),x(t,t.dyn_dtree,a-1)}function S(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return D;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return I;for(e=32;e<M;e++)if(0!==t.dyn_ltree[2*e])return I;return D}function E(t){bt||(c(),bt=!0),t.l_desc=new r(t.dyn_ltree,_t),t.d_desc=new r(t.dyn_dtree,ut),t.bl_desc=new r(t.bl_tree,ct),t.bi_buf=0,t.bi_valid=0,b(t)}function A(t,e,a,i){l(t,(T<<1)+(i?1:0),3),m(t,e,a,!0)}function Z(t){l(t,F<<1,3),h(t,Q,st),f(t)}function R(t,e,a,i){var n,r,s=0;t.level>0?(t.strm.data_type===U&&(t.strm.data_type=S(t)),k(t,t.l_desc),k(t,t.d_desc),s=z(t),n=t.opt_len+3+7>>>3,r=t.static_len+3+7>>>3,r<=n&&(n=r)):n=r=a+5,a+4<=n&&e!==-1?A(t,e,a,i):t.strategy===O||r===n?(l(t,(F<<1)+(i?1:0),3),v(t,st,ot)):(l(t,(L<<1)+(i?1:0),3),B(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),v(t,t.dyn_ltree,t.dyn_dtree)),b(t),i&&g(t)}function C(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(ht[a]+M+1)]++,t.dyn_dtree[2*s(e)]++),t.last_lit===t.lit_bufsize-1}var N=t("../utils/common"),O=4,D=0,I=1,U=2,T=0,F=1,L=2,H=3,j=258,K=29,M=256,P=M+1+K,Y=30,q=19,G=2*P+1,X=15,W=16,J=7,Q=256,V=16,$=17,tt=18,et=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],at=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],it=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],nt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],rt=512,st=new Array(2*(P+2));i(st);var ot=new Array(2*Y);i(ot);var lt=new Array(rt);i(lt);var ht=new Array(j-H+1);i(ht);var dt=new Array(K);i(dt);var ft=new Array(Y);i(ft);var _t,ut,ct,bt=!1;a._tr_init=E,a._tr_stored_block=A,a._tr_flush_block=R,a._tr_tally=C,a._tr_align=Z},{"../utils/common":3}],15:[function(t,e,a){"use strict";function i(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=i},{}],"/":[function(t,e,a){"use strict";var i=t("./lib/utils/common").assign,n=t("./lib/deflate"),r=t("./lib/inflate"),s=t("./lib/zlib/constants"),o={};i(o,n,r,s),e.exports=o},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}if(typeof define=="function"&&define.__amd){define.amd=define.__amd;delete define.__amd}
