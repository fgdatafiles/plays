(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+wlT":function(t,e,i){"use strict";var s=i("R6lU");i("a/rO"),i("vw/H"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("86MP")),o=function(t){function e(e,i){var s,n=i.data,a=i.inputEnabled,o=void 0!==a&&a;(s=t.call(this,e)||this).data=n,s.w=0,s.h=0,s.inputEnableChildren=o;for(var r=0,h=0;h<n.keys.length;h++){var d=s.game.make.image(r,0,n.keys[h]);d.anchor.set(0,0),r+=d.width,s.w+=d.width,s.h=d.height,s.add(d)}return s}return(0,a.default)(e,t),e.prototype.destroy=function(e,i){void 0===e&&(e=!0),t.prototype.destroy.call(this,e,i)},(0,n.default)(e,[{key:"width",get:function(){return this.data.width||this.w}},{key:"height",get:function(){return this.data.height||this.h}}]),e}(Phaser.Group);e.default=o},"//mK":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i){var s,n=i.data,a=i.colourThemeId;s=t.call(this,e)||this;var o=n.offsetY,r=n.bounds,h=n.sky,d=s.game.make.image(0,0,"pond","bank");d.x=6400-d.width,d.y=h.height-.9*d.height,s.add(d);var l=s.game.make.image(0,0,"pond","tree_branch");return l.x=-3,l.y=h.height-1.2*l.height,s.add(l),s.renderLand(o,r,d,a),d.bringToTop(),s}(0,n.default)(e,t);var i=e.prototype;return i.renderLand=function(t,e,i,s){var n,a=0,o=0,r=e.h+80;do{o=a*(n=this.game.make.image(0,0,"pond_"+s,"pond_floor")).width/2,n.position.set(o,r),a++,this.add(n)}while(o<.88*e.w);var h={x:o=6300,y:t+e.h},d={x:i.x+12,y:i.y+i.height-15},l={x:6440,y:i.y+i.height-15},u={x:6440,y:t+e.h},c=this.game.make.graphics();c.beginFill(9929250),c.drawPolygon([h,d,l,u]),c.endFill(),this.add(c);for(var p=0,m=[{x:6400,y:3040,a:-45},{x:6350,y:2649},{x:6140,y:2150,a:-115},{x:5950,y:1680,a:-105},{x:i.x+100,y:i.y+n.height-55,a:-80}];p<m.length;p++){var f=m[p],g=f.x,v=f.y,y=f.a,b=void 0===y?-90:y,S=this.game.make.image(g,v,"pond_"+s,"pond_floor");S.anchor.set(.5),S.angle=b,this.add(S)}},i.destroy=function(e,i){void 0===e&&(e=!0),t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=a},0:function(t,e,i){t.exports=i("vGYV")},"0BGZ":function(t,e,i){"use strict";i("a/rO"),i("vw/H"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("vXl+"),n=i("6YV8"),a=i("oX+o"),o=function(){function t(t){var e=t.game,i=t.pond,s=t.gameHud;this.game=e,this.pond=i,this.pondModel=i.pondModel,this.decisionTreeModel=i.decisionTreeModel,this.environment=i.environment,this.gameHud=s,this.narrator=s.narrator,this.gameCamera=i.gameCamera}var e=t.prototype;return e.resetPond=function(){this.pondModel.resetIntroPond(),this.environment.resetIntroPond(),this.decisionTreeModel.reset(),this.decisionTreeModel.resetIndex(),this.decisionTreeModel.setCurrentPondLayer(this.pondModel.currentLayerID)},e.narrate=function(t){var e=t.key,i=t.next;i&&this.narrator.onNarrateOnboardComplete.addOnce(i,this),this.narrator.narrateOnboard({key:e})},e.narrateSequence=function(t){var e=t.keys,i=t.next;this.narrator.onNarrateOnboardComplete.add(this.narrateSequenceItem,this,1,{keys:e,next:i}),this.narrateSequenceItem({keys:e,next:i})},e.narrateSequenceItem=function(t){var e=t.keys,i=t.next;if(e.length>0){var s=e.shift();this.narrator.narrateOnboard({key:s})}else this.narrator.onNarrateOnboardComplete.remove(this.narrateSequenceItem,this),i&&this[i]()},e.createStartBurst=function(t){var e=t.x,i=t.y;return new s.StarBurst(this.game,{x:e,y:i})},e.waitForBarReady=function(t){var e=t.func;this.gameHud.overlayDecision.onBarReady.addOnce(e,this)},e.start=function(){this.pondModel.isOnboardPanComplete?(this.playUnderwaterAmbient(),this.startOnboardingLayer(this.pondModel.activePondLayerID)):(this.pond.gameHud.hideHomeButton(),this.playSurfaceAmbient(),this.doOnboardPan())},e.activateLayer=function(t){void 0===t&&(t={}),this.pond.showOptions(t),this.pond.activateArrows(),this.gameHud.arrowsActive=!0,this.gameHud.showScrollArrows({left:!0,right:!0})},e.startOnboardingLayer=function(t){var e=this.decisionTreeModel.selectedOptions.length,i=this.decisionTreeModel.state,s=!1;switch(t){case"bottom":this.obBottomStart();break;case"middle1":if(3===e)this.activateLayer({restoreBranchOptions:!1}),this.gameHud.overlayDecision.factBookVisible=!0,this.obMiddle1Start();else if(4===e)if(this.activateLayer(),this.gameHud.overlayDecision.factBookVisible=!0,i===a.DECISION_STATES.NEXT){var n=this.decisionTreeModel.selectedOptions[3];this.obMiddle102(n)}else this.pond.onPondPanUpComplete.addOnce(this.obMiddle2Start,this),this.gameHud.overlayDecision.dispatchDecisionID=!0,this.waitForBarReady({func:this.obMiddle106});else 5!==e&&6!==e||(this.activateLayer(),this.gameHud.overlayDecision.factBookVisible=!0,this.pond.onPondPanUpComplete.addOnce(this.obMiddle2Start,this),this.gameHud.overlayDecision.dispatchDecisionID=!0,this.obMiddle106());this.pond.gameHud.showHomeButton();break;case"middle2":9===e&&i===a.DECISION_STATES.NEXT?s=!0:this.decisionTreeModel.state=a.DECISION_STATES.BRANCH,this.activateLayer({restoreBranchOptions:!1}),this.gameHud.overlayDecision.factBookVisible=!0,this.gameHud.overlayDecision.dispatchDecisionID=!0,this.gameHud.enableNextDecisionButton(),this.obMiddle2Start({isLastDecision:s}),this.pond.gameHud.showHomeButton();break;case"surface":12===e&&i===a.DECISION_STATES.NEXT?s=!0:this.decisionTreeModel.state=a.DECISION_STATES.BRANCH,this.activateLayer({restoreBranchOptions:!1}),this.gameHud.overlayDecision.factBookVisible=!0,this.gameHud.overlayDecision.dispatchDecisionID=!0,this.gameHud.enableNextDecisionButton(),this.obSurfaceStart({isLastDecision:s}),this.pond.gameHud.showHomeButton()}},e.doOnboardPan=function(){this.gameCamera.onMoveComplete.addOnce(this.onOnboardPanComplete,this),this.gameCamera.startOnboardPanDown(),this.game.time.events.add(4e3,this.narrate,this,{key:"ob_08_elinor"}),this.game.time.events.add(1e3,this.playUnderwaterAmbient,this)},e.playSurfaceAmbient=function(){this.pond.playSurfaceAmbient()},e.playUnderwaterAmbient=function(){this.pond.playUnderwaterAmbient()},e.onOnboardPanComplete=function(){this.gameCamera.setDefaultSpeed(),this.gameHud.showScrollArrows(this.gameCamera.getAvailableHorizontalDirections()),this.narrate({key:"ob_09_elinor",next:this.obBottomStartTransition})},e.obBottomStartTransition=function(){this.gameHud.wipeIn(this.obBottomStart,this)},e.obBottomStart=function(){this.resetPond(),this.narrate({key:"ob_012_elinor",next:this.obBottom01}),this.pond.gameHud.showHomeButton()},e.obBottom01=function(){this.pond.showOptions({}),this.gameHud.overlayDecision.readItemNames=!1,this.narrate({key:"ob_023_olive",next:this.obBottom01a})},e.obBottom01a=function(){this.narrate({key:"ob_025_olive",next:this.obBottom02})},e.obBottom02=function(){var t=this.gameHud.overlayDecision;t.options.showFactButton(),t.options.addChild(this.createStartBurst(t.options.factBook.base)),t.onBookClicked.addOnce(this.obFactBookStart,this),t.options.enableOptions(),t.options.showHandPrompt(),t.onOnboardDecisionComplete.addOnce(this.obBottom07,this)},e.obFactBookStart=function(t){this.factBookRock=t,this.narrateSequence({keys:["ob_031_device_elinor","ob_031b_elinor"],next:"obFactBook01"}),this.gameHud.overlayDecision.options.disableOptions()},e.obFactBook01=function(){var t=this.gameHud.overlayDecision;t.options.addChild(this.createStartBurst(t.options.items[0])),t.options.enableItems(),t.options.factBook.enable(),t.options.enableTapArea(),t.onBookClicked.addOnce(this.obFactBook02,this)},e.obFactBook02=function(){this.gameHud.overlayDecision.options.showHandPrompt();var t=this.factBookRock?"ob_032_elinor":"ob_032_alt_elinor";this.narrate({key:t,next:this.obFactBookComplete})},e.obFactBookComplete=function(){},e.obBottom07=function(){this.gameHud.nextDecisionButtonVisible=!1,this.narrateSequence({keys:["summary_rock","ob_042_elinor"],next:"obBottom08"})},e.obBottom08=function(){this.gameHud.enableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!0,this.gameHud.addChild(this.createStartBurst(this.gameHud.btnNextDecision)),this.gameHud.overlayDecision.readItemNames=!0,this.gameHud.onPanToActiveLayer.addOnce(this.waitForBarReady,this,null,{func:this.obBottom09})},e.obBottom09=function(){this.narrateSequence({keys:["ob_051_elinor","ob_053_olive"],next:"obBottom10"})},e.obBottom10=function(){var t=this.gameHud.overlayDecision;t.options.enableOptions(),t.options.showFactButton(),t.options.addChild(this.createStartBurst(t.options.factBook.base)),t.onOnboardDecisionComplete.addOnce(this.obBottom11,this)},e.obBottom11=function(t){t=this.game.controller.pondModel.pondItems.checkIDisPlantType(t),this.gameHud.disableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!1,this.narrateSequence({keys:["summary_"+t,"ob_061_elinor"],next:"obBottom12"})},e.obBottom12=function(){this.gameCamera.onMoveComplete.addOnce(this.obBottom13,this),this.pond.activateArrows(),this.gameHud.arrowsActive=!0,this.gameHud.showScrollArrows({left:!0,right:!0}),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnLeft)),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnRight))},e.obBottom13=function(){this.narrate({key:"ob_071_elinor",next:this.obBottom14})},e.obBottom14=function(){this.gameHud.autoStartNextDecision=!1,this.gameHud.enableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!0,this.gameHud.onNextDecision.addOnce(this.obBottom15,this),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnNextDecision))},e.obBottom15=function(){this.narrateSequence({keys:["ob_081_elinor","ob_081b_elinor","ob_083_elinor"],next:"obBottom15a"})},e.obBottom15a=function(){this.gameHud.overlayDecision.createBranchOptions(),this.waitForBarReady({func:this.obBottom16})},e.obBottom16=function(){var t=this.gameHud.overlayDecision;t.options.enableOptions(),t.options.showFactButton(),t.onOnboardDecisionComplete.addOnce(this.obBottom17,this)},e.obBottom17=function(t){this.gameHud.disableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!1,this.narrateSequence({keys:["summary_"+t,"ob_091_olive"],next:"obBottom18"})},e.obBottom18=function(){this.gameCamera.setIntroVerticalSpeed(),this.gameHud.autoStartNextDecision=!1,this.gameHud.enableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!0,this.gameHud.onNextDecision.addOnce(this.obMiddle1Start,this),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnNextDecision)),this.gameHud.onNextPondLayer.addOnce(this.obBottom19,this)},e.obBottom19=function(){this.narrate({key:"ob_101_elinor",next:null})},e.obMiddle1Start=function(){this.gameHud.overlayDecision.factBookVisible=!0,this.gameCamera.setDefaultSpeed(),this.narrateSequence({keys:["ob_111_olive","ob_112_elinor"],next:"obMiddle100"})},e.obMiddle100=function(){this.gameHud.overlayDecision.createBranchOptions(),this.waitForBarReady({func:this.obMiddle101})},e.obMiddle101=function(){var t=this.gameHud.overlayDecision;t.options.enableOptions(),t.onOnboardDecisionComplete.addOnce(this.obMiddle102,this)},e.obMiddle102=function(t){this.gameHud.disableNextDecisionButton(),this.gameHud.nextDecisionButtonVisible=!1,this.narrateSequence({keys:["summary_"+t,"ob_121_elinor"],next:"obMiddle103"})},e.obMiddle103=function(){this.gameHud.magnifyActive=!0,this.gameHud.showMagnifyingGlassButton(!1),this.gameHud.addChild(this.createStartBurst(this.gameHud.overlayMagnify.btnMagnify)),this.gameHud.onMagnifyStart.addOnce(this.obMiddle104,this)},e.obMiddle104=function(){this.narrate({key:"ob_131_device_elinor",next:this.obMiddle105})},e.obMiddle105=function(){this.gameHud.overlayMagnify.magnifyGlass.dropIsEnabled=!0,this.gameHud.overlayMagnify.magnifyGlass.enableDrop(),this.gameHud.onMagnifyComplete.addOnce(this.obMiddle106,this),this.pond.onPondPanUpComplete.addOnce(this.obMiddle2Start,this),this.gameHud.overlayDecision.dispatchDecisionID=!0},e.obMiddle106=function(){this.gameHud.overlayDecision.branchOptionsEnabled=!0,this.gameHud.enableNextDecisionButton()},e.obMiddle2Start=function(t){var e=t.lifecycleId,i=t.isLastDecision;e?(this.gameHud.autoStartNextDecision=!1,this.gameHud.onNextDecision.addOnce(this.obMiddle2StartLifeCycle,this)):i?this.pond.onPondPanUpComplete.addOnce(this.obSurfaceStart,this):this.narrate({key:"ob_151_elinor",next:this.obMiddle200})},e.obMiddle2StartLifeCycle=function(){this.narrate({key:"ob_151_elinor",next:this.obMiddle200})},e.obMiddle200=function(){this.gameHud.overlayDecision.branchOptionsEnabled=!1,this.gameHud.overlayDecision.createBranchOptions(),this.waitForBarReady({func:this.obMiddle201}),this.pond.onPondPanUpComplete.addOnce(this.obSurfaceStart,this)},e.obMiddle201=function(){this.gameHud.overlayDecision.branchOptionsEnabled=!0},e.obSurfaceStart=function(t){var e=t.lifecycleId,i=t.isLastDecision;e?(this.gameHud.autoStartNextDecision=!1,this.gameHud.onNextDecision.addOnce(this.obSurfaceStartLifeCycle,this)):i?this.pond.onPondComplete.addOnce(this.obSurface02,this):this.narrateSequence({keys:["ob_161_elinor","ob_162_olive"],next:"obSurface00"})},e.obSurfaceStartLifeCycle=function(){this.narrateSequence({keys:["ob_161_elinor","ob_162_olive"],next:"obSurface00"})},e.obSurface00=function(){this.gameHud.overlayDecision.branchOptionsEnabled=!1,this.gameHud.overlayDecision.createBranchOptions(),this.waitForBarReady({func:this.obSurface01}),this.pond.onPondComplete.addOnce(this.obSurface02,this)},e.obSurface01=function(){this.gameHud.overlayDecision.branchOptionsEnabled=!0},e.obSurface02=function(){this.pondModel.completeIntroPond(),this.gameCamera.onMoveComplete.addOnce(this.obSurface03,this),this.gameHud.magnifyActive=!0,this.pond.showPondComplete()},e.obSurface03=function(){this.narrateSequence({keys:["ob_171_elinor","ob_172_olive","ob_174_elinor"],next:"obSurface04"})},e.obSurface04=function(){this.gameHud.pondComplete(),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnLeft)),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnRight)),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnDown)),this.narrate({key:"ob_175_elinor",next:this.obSurface05})},e.obSurface05=function(){this.gameHud.showNewPondButton(),this.gameHud.showMagnifyingGlassButton(),this.gameHud.addChild(this.createStartBurst(this.gameHud.btnNewPond)),(0,n.getGA)().track({action:"tutorial_complete"})},e.destroy=function(){this.narrator&&this.narrator.stop(),this.narrator=null,this.game=null,this.pond=null,this.pondModel=null,this.decisionTreeModel=null,this.environment=null,this.gameHud=null,this.gameCamera=null},t}();e.default=o},"0swR":function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("vQY2"),i("7EEF"),i("COu/"),i("a/rO"),i("/TzG"),i("Rz/f"),i("96V2"),i("QQAp"),i("3Ss1"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("fKPv")),o=n(i("C9uT")),r=n(i("MPoQ")),h=s(i("evHg")),d=i("hNsG");function l(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var m=["activePondLayerID","pondIntroIsComplete","pondIsComplete","onboarding","unlockedItems"],f=function(){function t(t,e,i){var s=i.data,n=i.lifecycles,a=i.gameHeight,o=i.shortcutsModel,d=i.isOnboarding;this.saves=t,this.id=e,this.saveNumber=this.saves.getSaveNumber(),this.colourThemeId=this.saves.getColourThemeId(),this.data=p({},s),this.pondIsComplete=!1,this.pondIntroIsComplete=!1,this.unlockedItems=[],this.onSpawnAwaitingItems=new Phaser.Signal;var l=this.data,u=l.offsetY,c=l.bounds,m=l.pondLayers,f=l.onboarding,g=m.startLayer,v=m.layers,y=u+c.h-.5*a;(this.pondLayers=v.map((function(t,e){return t.y=y-a*(v.length-(e+1)),t})),this.onboarding=!!d&&{generated:!1,panComplete:!1,onboardComplete:!1},this.pondItems=new r.default(t,{data:this.data,layers:v}),this.activePondLayerID=d?"surface":g,this.lifecycles=n,this.load(),this.activePondLayerIndex=this.getPondLayerIndexById(this.activePondLayerID),this.pondLayerIndex=this.activePondLayerIndex,this.onboarding)&&(this.onboarding.generated||(this.generateIntroPond(f),this.onboarding.generated=!0));this.updateShortcutState(o),this.zoom=new h.default,this.zoom.active=this.pondComplete,this.zoom.currentPondLayerId=this.currentLayerID}var e=t.prototype;return e.checkForOnboardingReset=function(){if(this.onboarding){var t=this.onboarding,e=t.generated,i=t.panComplete;(e&&!i||"bottom"===this.activePondLayerID)&&this.resetIntroPond()}},e.generateIntroPond=function(t){for(var e,i=l(t.layers);!(e=i()).done;){var s=e.value,n=s.id,a=s.creatures,o=this.getPondLayerIndexById(n),r=this.data.bounds.w*this.pondLayers[o].activeWidth;this.pondItems.insertSpawnItems(o,r,a)}},e.resetIntroPond=function(){this.activeLayer="bottom",this.pondItems.reset(),this.onboarding.panComplete=!0,this.save()},e.completeIntroPond=function(){this.onboarding.onboardComplete=!0,this.save()},e.updateShortcutState=function(t){this.arrowsActive=t.arrowsUnlocked||!1},e.getPondLayerIndexById=function(t){return this.pondLayers.findIndex((function(e){return e.id===t}))},e.getPondLayerIdByIndex=function(t){return this.pondLayers[t].id},e.getPondLayerDataById=function(t){return this.pondLayers[this.getPondLayerIndexById(t)]},e.getCameraDragDropScale=function(){return this.pondLayers[this.pondLayerIndex].cameraDragDropScale},e.addItem=function(t,e,i){return this.pondItems.addItem(this.currentLayerIndex,t,e,i)},e.getPending=function(){return this.pondItems.getPending()},e.addSpawnItems=function(){var t=this.data.bounds.w*this.pondLayers[this.pondLayerIndex].activeWidth;this.pondItems.addSpawnItems(this.currentLayerIndex,t)},e.spawnUnlockedItems=function(t){for(var e=0;e<t.length;e++)this.unlockedItems.push(p({},t[e]))},e.spawnAwaitingItems=function(){for(var t=[],e=0;e<this.unlockedItems.length;e++){var i=this.unlockedItems[e],s=i.id,n=i.targetLayer;if(n===this.activePondLayerID){t.push(this.unlockedItems[e].id);var a=this.getPondLayerIndexById(n),o=this.data.bounds.w*this.pondLayers[a].activeWidth;this.pondItems.spawnUnlockedItems(s,a,o),this.unlockedItems.splice(e,1),e--}}var r,h=this.saves.getSavedLifecycles(),d=t.reduce((function(t,e){return t=!0===h[e]&&t}),!0);if(t.length>1)if(d){r=t[Math.floor(Math.random()*t.length)]}else{for(var l=[],u=0;u<t.length;u++){var c=t[u],p=this.lifecycles[c].priority;h[c]||l.push({id:c,priority:p})}if(l.length>0)l.sort((function(t,e){return t.priority-e.priority})),r=l.pop().id;else r=t[Math.floor(Math.random()*t.length)]}else r=t[0]||!1;r&&(h[r]=!0,this.saves.saveLifecycles(h)),this.onSpawnAwaitingItems.dispatch(r)},e.getSavedPondLayerItems=function(t,e){var i=this.getPondLayerIndexById(t);return this.pondItems.getSavedPondLayerItems(i,e)},e.activateNextLayer=function(){this.pondComplete=0===this.activePondLayerIndex,this.activePondLayerIndex=Math.max(0,this.activePondLayerIndex-1),this.activePondLayerID=this.currentActiveLayerID,this.save()},e.panUp=function(){return this.pondLayerIndex=Math.max(0,this.pondLayerIndex-1),this.zoom.currentPondLayerId=this.currentLayerID,this.getCurrentLayerScale()},e.panDown=function(){return this.pondLayerIndex=Math.min(this.pondLayers.length-1,this.pondLayerIndex+1),this.zoom.currentPondLayerId=this.currentLayerID,this.getCurrentLayerScale()},e.panTop=function(){this.pondLayerIndex=0,this.zoom.currentPondLayerId=this.currentLayerID},e.panBottom=function(){this.pondLayerIndex=this.pondLayers.length-1,this.zoom.currentPondLayerId=this.currentLayerID},e.getCurrentLayerScale=function(){return this.zoom.state===h.ZOOM_STATE.ZOOMED_OUT?d.POND_OVERVIEW_SCALE:this.getCurrentLayerData().scale},e.panToActiveLayer=function(){var t=this.pondLayerIndex-this.activePondLayerIndex;return this.pondLayerIndex=this.activePondLayerIndex,{y:t,scale:this.getCurrentLayerData().scale}},e.getCurrentLayerData=function(){return this.pondLayers[this.pondLayerIndex]},e.validateUp=function(){return this.pondLayerIndex>this.activePondLayerIndex||this.arrowsActive},e.load=function(){var t=this.saves.load();this.saves.deserialize(this,t,"pond"),this.save()},e.save=function(){var t=this.saves.serialize(this,"pond",m);this.saves.save({data:t})},(0,o.default)(t,[{key:"isOnboarding",get:function(){return!1!==this.onboarding}},{key:"isOnboardPanComplete",get:function(){return this.onboarding.panComplete}},{key:"isOnboardComplete",get:function(){return this.onboarding.onboardComplete}},{key:"activeLayer",set:function(t){this.activePondLayerID=t,this.activePondLayerIndex=this.getPondLayerIndexById(this.activePondLayerID),this.pondLayerIndex=this.activePondLayerIndex}},{key:"pondComplete",set:function(t){this.zoom.active=t,this.pondIsComplete=t},get:function(){return this.pondIsComplete}},{key:"pondIntroComplete",set:function(t){this.pondIntroIsComplete=t,this.save()},get:function(){return this.pondIntroIsComplete}},{key:"currentLayerIsActivePondLayer",get:function(){return this.pondLayerIndex===this.activePondLayerIndex}},{key:"currentLayerIndex",get:function(){return this.pondLayerIndex}},{key:"currentLayerID",get:function(){return this.pondLayers[this.pondLayerIndex].id}},{key:"currentActiveLayerIndex",get:function(){return this.activePondLayerIndex}},{key:"currentActiveLayerID",get:function(){return this.pondLayers[this.activePondLayerIndex].id}}]),t}();e.default=f},"0z9Q":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i){var s,n=i.data,a=i.colourThemeId,o=n.water,r=o.key,h=void 0===r?"":r,d=o.width,l=n.bounds;return(s=t.call(this,e)||this).water=s.game.make.image(0,0,h+"_"+a),s.water.width=d,s.add(s.water),s.renderWeeds(l,s.water.height,a),s}(0,n.default)(e,t);var i=e.prototype;return i.renderWeeds=function(t,e,i){var s=0,n=0;do{var a=this.game.make.image(0,0,"pond_"+i,"weeds");a.anchor.set(.5,1),n=s*a.width*1.4;var o=e+Math.random()*(.2*a.height);a.position.set(n,o),s++,this.add(a)}while(n<.88*t.w)},i.destroy=function(e,i){void 0===e&&(e=!0),this.water=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=a},"1DSD":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.button.anchor.set(.5,1),n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},"1gQj":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(){}var e=t.prototype;return e.reset=function(){},e.addPondData=function(){},e.showLevelSettings=function(){},t}();e.default=s},"3huV":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=i("zgbH"),r=function(t){function e(e,i){var s,a=void 0===i?{}:i,o=a.background,r=void 0!==o&&o,h=a.title,d=void 0!==h&&h,l=a.bgClr;return(s=t.call(this,e)||this).game.scale.onSizeChange.add(s.positionContainer,(0,n.default)(s)),l&&s.setBackgroundColour(l),r&&s.setBackground(r),d&&s.setTitle(d),s.positionContainer(),s}(0,a.default)(e,t);var i=e.prototype;return i.setBackgroundColour=function(t){this.bgClr||(this.bgClr=this.game.make.graphics(),this.bgClr.beginFill(t,1),this.bgClr.drawRect(0,0,this.game.defaultWidth,this.game.defaultHeight),this.add(this.bgClr))},i.setBackground=function(t){this.bg||(this.bg=this.game.make.image(0,0),this.bg.anchor.set(.5),this.bg.x=.5*this.game.defaultWidth,this.bg.y=.5*this.game.defaultHeight,this.addChildAt(this.bg,0)),this.bg.loadTexture(t)},i.setTitle=function(t){if(!this.title){var e={font:"75px "+o.FONT_EXTRA_BOLD,fill:"#ffffff",align:"center",wordWrap:!0,wordWrapWidth:960};this.title=this.game.make.text(.5*this.game.defaultWidth,50,"",e),this.title.setShadow(0,4,"rgba(0,0,0,0.15)",0),this.title.anchor.set(.5,0),this.add(this.title)}this.title.text=t},i.positionContainer=function(){this.x=(this.game.width-this.game.defaultWidth)/2,this.y=(this.game.height-this.game.defaultHeight)/2},i.update=function(){t.prototype.update.call(this)},i.destroy=function(){this.bgClr&&(this.bgClr.destroy(),this.bgClr=null),this.bg&&(this.bg.destroy(),this.bg=null),this.title&&(this.title.destroy(),this.title=null),this.game.scale.onSizeChange.remove(this.positionContainer,this),t.prototype.destroy.call(this,!0)},e}(Phaser.Group);e.default=r},"4UFF":function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("a/rO"),i("vw/H"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.HUD_PAD=void 0;var a=n(i("C9uT")),o=n(i("M1I4")),r=n(i("86MP")),h=n(i("dD3M")),d=n(i("vQJm")),l=n(i("4WsE")),u=s(i("SNUy")),c=n(i("tw/v")),p=s(i("llML")),m=n(i("c9gZ")),f=i("bHjq"),g=i("6YV8"),v=i("vXl+"),y=n(i("YbP7")),b=i("evHg"),S=n(i("Frl2"));e.HUD_PAD=20;var P=function(t){function e(e,i,s){var n;return(n=t.call(this,e)||this).game.scale.onSizeChange.add(n.positionContainer,(0,o.default)(n)),n.captions=i,n.pondModel=s,n.onIntroComplete=new Phaser.Signal,n.onScrollLeft=new Phaser.Signal,n.onScrollRight=new Phaser.Signal,n.onScrollUp=new Phaser.Signal,n.onScrollDown=new Phaser.Signal,n.onDragStart=new Phaser.Signal,n.onDragStop=new Phaser.Signal,n.onDecisionComplete=new Phaser.Signal,n.onNextDecision=new Phaser.Signal,n.onNextPondLayer=new Phaser.Signal,n.onReplayPond=new Phaser.Signal,n.onPanToActiveLayer=new Phaser.Signal,n.onMagnifyStart=new Phaser.Signal,n.onMagnify=new Phaser.Signal,n.onMagnifyComplete=new Phaser.Signal,n.onLifecycleVOComplete=new Phaser.Signal,n.onToggleZoom=new Phaser.Signal,n.arrowsActive=!0,n.magnifyActive=!0,n.autoStartNextDecision=!0,n.createElements(),n.hideScrollArrows(),n}(0,r.default)(e,t);var i=e.prototype;return i.createElements=function(){this.createScrollArrows(),this.createZoomButton(),this.lifecyclePanel=new S.default(this.game),this.addChild(this.lifecyclePanel),this.lifecyclePanel.x=.5*this.game.width,this.narrator=new p.default(this.game,{narrators:[p.NARRATORS.OLIVE,p.NARRATORS.ELINOR,p.NARRATORS.ARI],narrator:p.NARRATORS.OLIVE,captions:this.captions}),this.addChild(this.narrator),this.overlayMagnify=new c.default(this.game,this.narrator),this.overlayMagnify.onMagnifyVisible.add(this.showMagnifyingGlass,this),this.overlayMagnify.onMagnifyActive.add(this.activateMagnifyingGlass,this),this.overlayMagnify.onMagnifyComplete.add(this.handleMagnifyItemComplete,this),this.addChild(this.overlayMagnify),this.btnHome=new h.default({game:this.game,up:"btn_home",over:"btn_home_over"}),this.btnHome.position.set(20+.5*this.btnHome.width,20+.5*this.btnHome.height),this.btnHome.onInputUp.addOnce(this.onHandleHome,this),this.addChild(this.btnHome),this.btnNextDecision=new h.default({game:this.game,up:"btn_continue",over:"btn_continue_over",atlas:"ui_buttons"}),this.btnNextDecision.x=this.game.width-20-.5*this.btnNextDecision.width,this.btnNextDecision.y=this.game.height-20-.5*this.btnNextDecision.height,this.addChild(this.btnNextDecision),this.btnNextDecision.disable(),this.nextDecisionButtonVisible=!1,this.btnNewPond=new h.default({game:this.game,up:"btn_pc_new_pond",over:"btn_pc_new_pond_over",atlas:"ui_buttons"}),this.btnNewPond.x=this.game.width-20-.5*this.btnNewPond.width,this.btnNewPond.y=this.game.height-20-.5*this.btnNewPond.height,this.addChild(this.btnNewPond),this.btnNewPond.visible=!1},i.hideHomeButton=function(){this.btnHome.visible=!1},i.showHomeButton=function(){this.btnHome.visible=!0},i.onHandleHome=function(){this.pondModel.isOnboarding&&(0,g.getGA)().track({action:"skipTutorial"}),this.game.controller.showWelcomeScreen()},i.playIntro=function(){var t=["ob_176_elinor","ob_177_olive"],e="playIntroComplete";this.narrator.onNarrateOnboardComplete.add(this.narrateSequenceItem,this,1,{keys:t,next:e}),this.narrateSequenceItem({keys:t,next:e})},i.playIntroComplete=function(){this.pondModel.pondIntroComplete=!0,this.onIntroComplete.dispatch()},i.narrateSequenceItem=function(t){var e=t.keys,i=t.next;if(e.length>0){var s=e.shift();this.narrator.narrateNewPond({key:s})}else this.narrator.onNarrateOnboardComplete.remove(this.narrateSequenceItem,this),i&&this[i]()},i.wipeIn=function(t,e){this.fade=this.game.make.spine(.5*this.game.width,.5*this.game.height,"transition_ring",!0),this.fade.anchor.set(.5,1),this.addChild(this.fade),this.fade.setAnimationByName(0,"fade_in",!1),this.update(),this.fade.onComplete.addOnce(t,e),this.fade.onComplete.addOnce(this.wipeOut,this)},i.wipeOut=function(){this.fade.setAnimationByName(0,"fade_out",!1),this.update(),this.updateTransform(),this.fade.onComplete.addOnce(this.destroyWipe,this)},i.destroyWipe=function(){this.fade.destroy(),this.fade=null},i.disableNextDecisionButton=function(){this.btnNextDecision.onInputDown.remove(this.onHandleNextDecision,this),this.btnNextDecision.disable()},i.enableNextDecisionButton=function(){this.btnNextDecision.onInputDown.add(this.onHandleNextDecision,this),this.btnNextDecision.enable()},i.onHandleNextDecision=function(){this.nextDecisionButtonVisible=!1,this.overlayDecision.removeOptionsPanel(),this.overlayDecision.model.isPondLayerComplete()?this.handleNextPondLayer():(this.handleNextDecision(),this.onPanToActiveLayer.dispatch())},i.addOverlayDecision=function(t,e){this.overlayDecision=this.pondModel.isOnboarding?new m.default(this.game,this,{decisionTreeModel:t}):new d.default(this.game,this,{decisionTreeModel:t}),this.overlayDecision.onItemPickedUp.add(this.addDragChoice,this),this.overlayDecision.onDecisionComplete.add(this.handleDecisionComplete,this),this.overlayDecision.init(this.narrator,e)},i.handleDecisionComplete=function(t){t?(t=this.pondModel.pondItems.checkIDisPlantType(t),this.narrator.onNarrateNameComplete.addOnce(this.handleSummaryComplete,this),this.narrator.narrate({type:f.CAPTION.SUMMARY,id:t,narrator:p.NARRATORS.ELINOR,hideOnComplete:!0})):this.handleSummaryComplete()},i.handleSummaryComplete=function(){this.nextDecisionButtonVisible=!0,this.showMagnifyingGlassButton(),this.onDecisionComplete.dispatch(),this.resetIdlePrompt()},i.handleNextDecision=function(){this.stopIdlePrompt(),this.resetMagnify(),this.onNextDecision.dispatch(),this.autoStartNextDecision?this.overlayDecision.createBranchOptions():this.autoStartNextDecision=!0},i.handleNextPondLayer=function(){this.resetMagnify(),this.overlayDecisionVisibility=!1,this.onNextPondLayer.dispatch()},i.addDragChoice=function(t){this.dragChoice=new l.default(this.game,{atlas:"tray_creatures",key:t.id,opts:t}),this.addChild(this.dragChoice),this.dragChoice.onDropped.addOnce(this.removeDragChoice,this),this.dragChoice.startDrag(),this.onDragStart.dispatch(t)},i.removeDragChoice=function(t){this.dragChoice.stopDrag(),this.dragChoice.destroy(),this.onDragStop.dispatch(t),this.overlayDecision.handleOnItemDropped(t)},i.showLifeCyclePanel=function(t){t="frog_surface"===t?"frog":t,this.lifecyclePanel.showLifecycle(t),this.narrator.onNarrateNameComplete.addOnce(this.handleLifecycleVOComplete,this),this.narrator.narrate({type:f.CAPTION.SUMMARY,id:t,narrator:p.NARRATORS.ELINOR,hideOnComplete:!0})},i.handleLifecycleVOComplete=function(){this.lifecyclePanel.hideLifecycle(),this.nextDecisionButtonVisible=!0,this.showMagnifyingGlassButton(),this.resetIdlePrompt(),this.onLifecycleVOComplete.dispatch()},i.stopIdlePrompt=function(){this.idleTimer&&(this.game.time.events.remove(this.idleTimer),this.idleTimer=null)},i.resetIdlePrompt=function(){this.stopIdlePrompt(),this.idleTimer=this.game.time.events.add(1e4,this.handleIdlePrompt,this)},i.handleIdlePrompt=function(){var t=[];if(this.btnNextDecision.visible&&t.push(this.btnNextDecision),this.btnLeft.visible&&t.push(this.btnLeft),this.btnRight.visible&&t.push(this.btnRight),this.btnUp.visible&&t.push(this.btnUp),this.btnDown.visible&&t.push(this.btnDown),t.length>0){var e=t[Math.floor(Math.random()*t.length)];this.addChild(this.createStartBurst(e)),this.idleTimer=this.game.time.events.add(1e4,this.handleIdlePrompt,this)}},i.createStartBurst=function(t){var e=t.x,i=t.y;return new v.StarBurst(this.game,{x:e,y:i})},i.pondComplete=function(){this.showScrollArrows({left:!0,right:!0,down:!0})},i.showNewPondButton=function(){this.hasNewPondButton=!0,this.btnNewPond.visible=!0,this.btnNewPond.onInputDown.addOnce(this.onHandleNewPond,this)},i.onHandleNewPond=function(){this.game.controller.handleNewPond()},i.resetMagnify=function(){this.overlayMagnify.resetMagnify()},i.showMagnifyingGlassButton=function(t){void 0===t&&(t=!0),this.magnifyActive&&this.overlayMagnify.showMagnifyingGlassButton(t)},i.showMagnifyingGlass=function(){this.hideScrollArrows(),this.nextDecisionButtonVisible=!1,this.overlayDecision&&this.overlayDecision.hide(),this.onMagnifyStart.dispatch()},i.activateMagnifyingGlass=function(t){this.onMagnify.dispatch(t)},i.hideMagnifyingGlass=function(){this.overlayMagnify.hideMagnifyingGlass(),this.overlayDecision&&this.overlayDecision.show()},i.magnifyItem=function(t,e){this.overlayMagnify.magnifyItem(t,e)},i.handleMagnifyItemComplete=function(){this.onMagnifyComplete.dispatch(),this.pondModel.pondComplete||(this.nextDecisionButtonVisible=!0)},i.createScrollArrows=function(){this.btnLeft=new u.default(this.game,{direction:u.DIRECTION.LEFT}),this.addChild(this.btnLeft),this.btnLeft.x=.5*this.btnLeft.width,this.btnLeft.y=.5*this.game.height,this.btnLeft.onInputDown.add(this.handleBtnLeftInputDown,this),this.btnRight=new u.default(this.game,{direction:u.DIRECTION.RIGHT}),this.addChild(this.btnRight),this.btnRight.x=this.game.width-.5*this.btnRight.width,this.btnRight.y=.5*this.game.height,this.btnRight.onInputDown.add(this.handleBtnRightInputDown,this),this.btnUp=new u.default(this.game,{direction:u.DIRECTION.UP}),this.addChild(this.btnUp),this.btnUp.x=.5*this.game.width,this.btnUp.y=.5*this.btnUp.height,this.btnUp.onInputDown.add(this.handleBtnUpInputDown,this),this.btnDown=new u.default(this.game,{direction:u.DIRECTION.DOWN}),this.addChild(this.btnDown),this.btnDown.x=.5*this.game.width,this.btnDown.y=this.game.height-.5*this.btnDown.height,this.btnDown.onInputDown.add(this.handleBtnDownInputDown,this)},i.showScrollArrows=function(t){var e=t.left,i=void 0!==e&&e,s=t.right,n=void 0!==s&&s,a=t.up,o=void 0!==a&&a,r=t.down,h=void 0!==r&&r;if(this.arrowsActive&&(this.btnLeft.visible=i,this.btnRight.visible=n,this.btnUp.visible=o,this.btnDown.visible=h),this.pondModel.zoom.active){var d=this.pondModel.zoom.getZoomButtonOptions(),l=d.position,u=d.state;l?(this.zoomButton.y="TOP"===l?.5*this.zoomButton.height+20:this.game.height-20-.5*this.zoomButton.height,this.zoomButton.setState(u),this.zoomButton.visible=!0):this.zoomButton.visible=!1,this.hasNewPondButton&&(this.btnNewPond.visible=u===b.ZOOM_STATE.ZOOMED_OUT)}},i.createZoomButton=function(){this.zoomButton=new y.default(this.game,{states:["toggle_zoom_in","toggle_zoom_out"],active:0}),this.addChild(this.zoomButton),this.zoomButton.x=.5*this.game.width,this.zoomButton.y=.5*this.zoomButton.height,this.zoomButton.visible=!1,this.zoomButton.onInputDown.add(this.handleZoomToggle,this)},i.handleZoomToggle=function(t){var e=t.state;this.hideScrollArrows(),this.pondModel.zoom.state=e,this.onToggleZoom.dispatch()},i.hideScrollArrows=function(){this.btnLeft.visible=!1,this.btnRight.visible=!1,this.btnUp.visible=!1,this.btnDown.visible=!1,this.btnNewPond.visible=!1,this.zoomButton.visible=!1},i.handleBtnLeftInputDown=function(){this.hideScrollArrows(),this.onScrollLeft.dispatch(),this.resetIdlePrompt()},i.handleBtnRightInputDown=function(){this.hideScrollArrows(),this.onScrollRight.dispatch(),this.resetIdlePrompt()},i.handleBtnUpInputDown=function(){this.hideScrollArrows(),this.onScrollUp.dispatch(),this.resetIdlePrompt()},i.handleBtnDownInputDown=function(){this.hideScrollArrows(),this.onScrollDown.dispatch(),this.resetIdlePrompt()},i.positionContainer=function(){this.btnRight&&(this.btnRight.x=this.game.width-.5*this.btnRight.width),this.btnUp&&(this.btnUp.x=.5*this.game.width),this.btnDown&&(this.btnDown.x=.5*this.game.width,this.btnDown.y=this.game.height-.5*this.btnDown.height),this.btnNextDecision&&(this.btnNextDecision.x=this.game.width-20-.5*this.btnNextDecision.width,this.btnNextDecision.y=this.game.height-20-.5*this.btnNextDecision.height),this.overlayDecision&&(this.overlayDecision.x=.5*(this.game.width-this.game.defaultWidth),this.overlayDecision.reposition())},i.destroy=function(e,i){void 0===e&&(e=!0),this.game.scale.onSizeChange.remove(this.positionContainer,this),this.btnHome&&(this.btnHome.onInputUp.remove(this.onHandleHome,this),this.btnHome.destroy(),this.btnHome=null),this.overlayDecision&&(this.overlayDecision.destroy(),this.overlayDecision=null),this.overlayMagnify&&(this.overlayMagnify.onMagnifyVisible.remove(this.showMagnifyingGlass,this),this.overlayMagnify.onMagnifyActive.remove(this.activateMagnifyingGlass,this),this.overlayMagnify.onMagnifyComplete.remove(this.handleMagnifyItemComplete,this)),this.btnMagnify&&(this.btnMagnify.destroy(),this.btnMagnify=null),this.captions&&(this.captions.destroy(),this.captions=null),this.btnNextDecision&&(this.btnNextDecision.destroy(),this.btnNextDecision=null),this.zoomButton&&(this.zoomButton.destroy(),this.zoomButton=null),this.btnLeft.destroy(),this.btnRight.destroy(),this.btnUp.destroy(),this.btnDown.destroy(),this.onScrollLeft.removeAll(),this.onScrollLeft=null,this.onScrollRight.removeAll(),this.onScrollRight=null,this.onScrollUp.removeAll(),this.onScrollUp=null,this.onScrollDown.removeAll(),this.onScrollDown=null,this.onDragStart.removeAll(),this.onDragStart=null,this.onDragStop.removeAll(),this.onDragStop=null,this.onDecisionComplete.removeAll(),this.onDecisionComplete=null,this.onNextDecision.removeAll(),this.onNextDecision=null,this.onNextPondLayer.removeAll(),this.onNextPondLayer=null,this.onReplayPond.removeAll(),this.onReplayPond=null,this.onMagnifyStart.removeAll(),this.onMagnifyStart=null,this.onMagnify.removeAll(),this.onMagnify=null,this.onMagnifyComplete.removeAll(),this.onMagnifyComplete=null,this.onPanToActiveLayer.removeAll(),this.onPanToActiveLayer=null,this.onLifecycleVOComplete.removeAll(),this.onLifecycleVOComplete=null,this.onToggleZoom.removeAll(),this.onToggleZoom=null,this.pondModel=null,t.prototype.destroy.call(this,e,i)},(0,a.default)(e,[{key:"nextDecisionButtonVisible",set:function(t){this.btnNextDecision.visible=t}},{key:"autoStartNextDecision",get:function(){return this.autoStartDecision},set:function(t){this.autoStartDecision=t}},{key:"overlayDecisionVisibility",set:function(t){this.overlayDecision&&(this.overlayDecision.visible=t)}}]),e}(Phaser.Group);e.default=P},"4WsE":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i){var s,a=i.x,o=void 0===a?0:a,r=i.y,h=void 0===r?0:r,d=i.atlas,l=void 0===d?"geology":d,u=i.key,c=i.opts;return(s=t.call(this,e,o,h)||this).options=c,s.anchor.set(.5),s.scale.set(.8),s.costumeGlow=s.game.make.image(0,0,l,u+"_selected"),s.costumeGlow.anchor.set(.5),s.addChild(s.costumeGlow),s.costume=s.game.make.image(0,0,l,u),s.costume.anchor.set(.5),s.addChild(s.costume),s.game.input.onUp.add(s.onReleaseMe,(0,n.default)(s)),s.onDropped=new Phaser.Signal,s}(0,a.default)(e,t);var i=e.prototype;return i.startDrag=function(){this.isDragging=!0},i.stopDrag=function(){this.isDragging=!1},i.onReleaseMe=function(){this.game.input.onUp.remove(this.onReleaseMe,this),this.onDropped.dispatch(this.options)},i.update=function(){if(this.isDragging){var e=this.game.input.position,i=e.x,s=e.y;this.x=i,this.y=s}t.prototype.update.call(this)},i.destroy=function(e){void 0===e&&(e=!0),this.onDropped&&(this.onDropped.removeAll(),this.onDropped=null),this.costumeGlow.destroy(),this.costumeGlow=null,this.costume.destroy(),this.costume=null,t.prototype.destroy.call(this,e)},e}(Phaser.Sprite);e.default=o},"4upZ":function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e){var i,s=e.game,n=e.x,a=e.y,o=e.depth;return(i=t.call(this,s,n,a,"particles","particle")||this).x0=n,i.y0=a,i.depth=o,i.anchor.set(.5),i.scale.set(Phaser.Math.random(.3,.5)),i.angSpeed=Phaser.Math.random(Math.PI/10,Math.PI/5)*(Math.random()<.5?-1:1),i.ang=Phaser.Math.random(0,2*Math.PI),i.r0=i.rad=Phaser.Math.between(200,300),i.radDest=i.r0+Phaser.Math.between(-20,20),i}return(0,n.default)(e,t),e.prototype.step=function(t){this.ang+=t*this.angSpeed,this.x=this.x0+this.rad*Math.cos(this.ang),this.y=this.y0+this.rad*Math.sin(this.ang)},e}(Phaser.Image);e.default=a},"52Rl":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("bFzk")).default);e.default=a},"5mNR":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_MAP=e.STATE_MY_CREATURE=e.STATE_MY_CREATURES=e.STATE_POND=e.STATE_POND_ONBOARDING=e.STATE_ENVIRONMENT_LOADER=e.STATE_POND_SELECT=e.STATE_WELCOME=e.STATE_INTRO=e.STATE_LOAD=e.STATE_BOOT=void 0;var n=s(i("VawD")),a=s(i("GEMp")),o=s(i("ZJ/5")),r=s(i("WtpM")),h=s(i("Iikf")),d=s(i("POxg")),l=s(i("IO21")),u=s(i("btHK")),c=s(i("roAw")),p=s(i("t2fk"));e.STATE_BOOT="STATE_BOOT";e.STATE_LOAD="STATE_LOAD";e.STATE_INTRO="STATE_INTRO";e.STATE_WELCOME="STATE_WELCOME";e.STATE_POND_SELECT="STATE_POND_SELECT";e.STATE_ENVIRONMENT_LOADER="STATE_ENVIRONMENT_LOADER";e.STATE_POND_ONBOARDING="STATE_POND_ONBOARDING";e.STATE_POND="STATE_POND";e.STATE_MY_CREATURES="STATE_MY_CREATURES";e.STATE_MY_CREATURE="STATE_MY_CREATURE";var m={STATE_BOOT:n.default,STATE_LOAD:a.default,STATE_INTRO:o.default,STATE_WELCOME:r.default,STATE_POND_SELECT:h.default,STATE_ENVIRONMENT_LOADER:d.default,STATE_POND_ONBOARDING:l.default,STATE_POND:u.default,STATE_MY_CREATURES:c.default,STATE_MY_CREATURE:p.default};e.STATE_MAP=m},"5xma":function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("YY9M"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("dD3M")),o=function(t){function e(e,i){var s,n=i.id,a=i.data;return(s=t.call(this,e)||this).data=a,s.setCaptions(n),s.audioId=n+"_vo",s.onAnimComplete=new Phaser.Signal,s.audioSkeleton=null,s.makeScene(),s.playAnim(s.data.anims[0]),s}(0,n.default)(e,t);var i=e.prototype;return i.setCaptions=function(t){this.game.springRollCaptionsPlugin.setData(this.game.cache.getJSON(t+"_captions"))},i.getIcon=function(){var t=this.data.skeletons.indexOf(this.data.icon_skeleton_id),e=this.skeletons[t];return this.skeletons[t]=null,e},i.showSkipButton=function(){this.btnSkip=new a.default({game:this.game,up:"btn_skip",over:"btn_skip"}),this.btnSkip.x=this.game.width/2-55,this.btnSkip.y=this.game.defaultHeight/2-55,this.addChild(this.btnSkip),this.btnSkip.onInputDown.add(this.handleAnimComplete,this)},i.makeScene=function(){this.skeletons=[];for(var t=0;t<this.data.skeletons.length;t++){var e=this.data.skeletons[t],i=this.game.make.spine(0,0,e,!0);i.anchor.set(.5,1),this.skeletons.push(i),this.addChild(i),e===this.data.audio_skeleton_id&&(this.audioSkeleton=i,this.audioSkeleton.onEvent.add(this.handleAudioEvent,this))}},i.handleAudioEvent=function(t,e){var i=e.data.name;this.game.springRollCaptionsPlugin.playCaption(i),this.game.sounds.playVO(i,{spriteID:this.audioId})},i.playAnim=function(t,e){void 0===e&&(e=!1);for(var i=-1,s=0,n=0;n<this.skeletons.length;n++){var a=this.skeletons[n].setAnimationByName(0,t,e);a.animationEnd>0&&a.animationEnd>s&&(s=a.animationEnd,i=n)}i>=0&&this.game.time.events.add(1e3*s,this.handleAnimComplete,this)},i.handleAnimComplete=function(){this.dispatchAnimComplete()},i.dispatchAnimComplete=function(){this.onAnimComplete.dispatch()},i.destroy=function(){this.btnSkip&&(this.btnSkip.destroy(),this.btnSkip=null);for(var e=0;e<this.skeletons.length;e++)this.removeChild(this.skeletons[e]),this.skeletons[e]&&this.skeletons[e].destroy();this.skeletons=null,t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=o},"6QQ6":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("gdNA")),a=s(i("ohdW")),o=s(i("rO7k")),r=s(i("tn33")),h=s(i("lKfn")),d=s(i("bBX6")),l=s(i("knPr")),u=s(i("ZmTD")),c=s(i("q2tZ")),p=s(i("g4PE")),m=s(i("1DSD")),f=s(i("TDaU")),g=s(i("irCZ")),v=s(i("J/Jt")),y=s(i("n7Ri")),b=s(i("hi8H")),S=s(i("IokY")),P=s(i("52Rl")),I=s(i("JljA")),D=s(i("GlYg")),O=s(i("b8xE")),C=s(i("K+TP")),w=s(i("l6Mt")),A=s(i("JROV")),M=s(i("jXut")),T=s(i("L3Wh")),_=s(i("xtAN")),k=function(){function t(t,e){this.game=t,this.environment=e}return t.prototype.getCreature=function(t){var e;switch(t.id){case"caddisfly_larvae":e=new d.default(this.game,this.environment,t);break;case"diving_beetle_larvae":e=new p.default(this.game,this.environment,t);break;case"diving_beetle":e=new O.default(this.game,this.environment,t);break;case"dragonfly_larvae":e=new u.default(this.game,this.environment,t);break;case"snail":e=new w.default(this.game,this.environment,t);break;case"mayfly_larvae":e=new l.default(this.game,this.environment,t);break;case"red_spotted_newt":e=new f.default(this.game,this.environment,t);break;case"scavenger_beetle_larvae":e=new m.default(this.game,this.environment,t);break;case"scavenger_beetle":e=new C.default(this.game,this.environment,t);break;case"worm":e=new b.default(this.game,this.environment,t);break;case"mosquito_larvae":e=new c.default(this.game,this.environment,t);break;case"tadpole":e=new h.default(this.game,this.environment,t);break;case"frog":e=new T.default(this.game,this.environment,t);break;case"frog_surface":e=new _.default(this.game,this.environment,t);break;case"northern_pike":e=new g.default(this.game,this.environment,t);break;case"pumpkinseed":e=new v.default(this.game,this.environment,t);break;case"spotted_bass":e=new y.default(this.game,this.environment,t);break;case"yellow_bullhead_catfish":e=new S.default(this.game,this.environment,t);break;case"map_turtle":case"painted_turtle":e=new M.default(this.game,this.environment,t);break;case"mallard_duck":case"teal_duck":e=new a.default(this.game,this.environment,t);break;case"caddisfly":e=new P.default(this.game,this.environment,t);break;case"dragonfly":e=new A.default(this.game,this.environment,t);break;case"mayfly":e=new I.default(this.game,this.environment,t);break;case"mosquito":e=new D.default(this.game,this.environment,t);break;case"kingfisher":e=new r.default(this.game,this.environment,t);break;case"heron":e=new o.default(this.game,this.environment,t);break;default:e=new n.default(this.game,this.environment,t)}return e},t}();e.default=k},"6R9f":function(t,e,i){"use strict";i("wiMi"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=function(){function t(t){this.game=t,this.transitionToState=!1,this.transitionToParams=!1,this.onTransitionComplete=new Phaser.Signal}var e=t.prototype;return e.clearCurrentState=function(){this.game.state.clearCurrentState()},e.onTransitionInComplete=function(){this.switchStates()},e.switchStates=function(){var t;(t=this.game.state).start.apply(t,[this.transitionToState].concat(this.transitionToParams)),this.game.state.onStateChange.addOnce(this.handleStateChanged,this)},e.handleStateChanged=function(){this.onTransitionControllerComplete()},e.onTransitionControllerComplete=function(){this.onTransitionComplete.dispatch(),this.transitionController=null},e.startState=function(t){var e=t.nextState,i=t.nextStateParams;this.transitionToState=e,this.transitionToParams=i,this.switchStates()},t}();e.default=s},"6YV8":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGA=function(t){return new a(t)},e.addGoogleAnalyticsPlugin=function(t){var e=t.plugin;return new a(e)};var s=i("TEuq"),n=null,a=function(){function t(t){var e=this;return n||(n=this,s.Debugger.log("log","GoogleAnalytics plugin registered"),this._plugin=t,this.startTime=Date.now(),window.addEventListener("unload",(function(){e.track({action:"endGame"})})),n)}var e=t.prototype;return e.destroy=function(){n=null,this._plugin=null},e.track=function(t){var e=t.category,i=void 0===e?"Elinor Pondlife":e,s=t.action,n=void 0===s?"":s,a=t.label,o=void 0===a?"":a,r=t.value,h=void 0===r?"":r;this._plugin&&this._plugin.event(i,n,o,h)},t}()},"89Dv":function(t,e,i){"use strict";var s=i("R6lU");i("qnda"),i("7EEF"),i("XvIX"),i("XEfP"),i("ocEJ"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=i("SPpy"),o=i("zgbH"),r=i("TEuq"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.debug,i=void 0!==e&&e;this.debug=i},i.preload=function(){this.loadError=!1,this.game.load.onFileError.add(this.handleFileError,this),this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.game.load.onFileComplete.add(this.handleFileComplete,this),this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.loadAssets()},i.handleFileError=function(t){this.loadError=!0,this.debug&&r.Debugger.log("error","StateLoader.handleFileError "+t)},i.handleFileStart=function(t,i){if(-1!==i.indexOf("-audioatlas")&&this.audioSprites.push(i.replace("-audioatlas","")),!this.loadedAssets.find((function(t){return t.key===i}))){var s=this.game.load._fileList.find((function(t){return t.key===i}));e.addUnloadAsset(s)}},i.handleLoadStart=function(){this.loadedAssets=(0,a.getGameFileLoadList)(this.game,this.debug),e.addUnloadAssets(this.loadedAssets)},i.handleFileComplete=function(t,e,i){this.debug&&r.Debugger.log("log","OnboardLoader.handleFileComplete "+t+", "+e+", "+i)},i.loadAssets=function(){this.audioSprites=[]},i.loadPacks=function(t){for(var e=t.path,i=t.packs,s=0;s<i.length;s++){var n=i[s];this.game.load.pack(n.key,e+n.file,null,this)}},i.create=function(){var t=this;if(!this.loadError){for(var e=0;e<this.audioSprites.length;e++)this.game.cache.checkSoundKey(this.audioSprites[e])&&this.game.sounds.addAudioSprite({id:this.audioSprites[e]});this.game.sounds.decode(this.audioSprites,this.start,this),this.decodeSoundsCallback=this.game.time.events.add(o.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()}))}},i.start=function(){this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.game.load.onFileError.remove(this.handleFileError,this),this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.game.load.onFileComplete.remove(this.handleFileComplete,this)},i.shutdown=function(){if(e.unloadAssets(this.game,this.debug),this.audioSprites.length>0)for(var t=0;t<this.audioSprites.length;t++)this.game.sounds.removeAudioSprite({id:this.audioSprites[t]});this.audioSprites=null},e}(Phaser.State);e.default=h,h.LoadedAssets=[],h.LoadedAssetPacks={},h.addUnloadAsset=function(t){h.LoadedAssets.push({type:t.type,key:t.key,url:t.url})},h.addUnloadAssets=function(t){t.forEach((function(t){h.addUnloadAsset(t)}))},h.unloadAssets=function(t){h.LoadedAssets.forEach((function(e){(0,a.unloadFile)(t,e)}))},h.LoadedAssets=[],h.LoadedAssetPacks={}},"9k7I":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadSave=e.SAVE_LIST=e.SAVE_KEY=void 0;var s=i("zgbH");e.SAVE_KEY="testSave";e.SAVE_LIST=["SELECT","onboarding"];e.loadSave=function(t,e,i,n){var a=new Phaser.Loader(t);a.onLoadComplete.addOnce(e,i),a.json("testSave",s.PATH_ASSETS+"saves/"+n+".json"),a.start()}},Akkm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.STATE=void 0;var n=s(i("86MP")),a={DECISION:"decision",FACT:"fact"};e.STATE=a;var o=function(t){function e(e,i){var s,n=i.x,o=i.y,r=i.isVisible,h=void 0===r||r,d=i.atlas,l=void 0===d?"ui_buttons":d,u=i.dropIsEnabled,c=void 0===u||u;return(s=t.call(this,e)||this).savedX=n,s.savedY=o,s.dropIsEnabled=c,s.atlas=l,s.base=s.game.make.image(0,0,l,"factbook_base_inactive"),s.base.anchor.set(.5),s.addChild(s.base),s.book=s.game.make.image(0,0,l,"factbook_inactive"),s.book.anchor.set(.5),s.addChild(s.book),s.onClicked=new Phaser.Signal,s.state=a.DECISION,s.alpha=0,s.visible=!1,h&&s.fadeIn(),s}(0,n.default)(e,t);var i=e.prototype;return i.fadeIn=function(){this.visible=!0,this.alpha=0,this.game.make.tween(this).to({alpha:1},400,"Quad.easeOut",!0)},i.animateOff=function(){var t=this.game.defaultHeight+this.height;this.game.make.tween(this).to({y:t},500,"Quad.easeIn",!0)},i.setPosition=function(t,e){this.base.position.set(t,e),this.book.position.set(t,e)},i.reset=function(){this.setPosition(this.savedX,this.savedY),this.book.frameName="factbook_inactive"},i.onOver=function(){this.base.frameName="factbook_base_active"},i.onUp=function(){this.state=this.state===a.DECISION?a.FACT:a.DECISION,this.base.frameName="factbook_base_inactive",this.book.frameName="factbook_active",this.onClicked.dispatch(this.state),this.state===a.FACT?this.game.sounds.playSFX("mag_select",{spriteID:"sfx_general"}):this.game.sounds.playSFX("click",{spriteID:"sfx_general"})},i.onOut=function(){this.base.frameName="factbook_base_inactive"},i.disable=function(){this.base.inputEnabled&&(this.base.inputEnabled=!1,this.base.input.useHandCursor=!1,this.base.events.onInputOver.remove(this.onOver,this),this.base.events.onInputUp.remove(this.onUp,this),this.base.events.onInputOut.remove(this.onOut,this))},i.enable=function(){this.base.inputEnabled||(this.base.inputEnabled=!0,this.base.input.useHandCursor=!0,this.base.events.onInputOver.add(this.onOver,this),this.base.events.onInputUp.add(this.onUp,this),this.base.events.onInputOut.add(this.onOut,this))},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){void 0===e&&(e=!0),this.disable(),this.clearSignal(this.onClicked),this.onClicked=null,this.base=null,this.book=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=o},Bx3X:function(t,e,i){"use strict";i("RiZp"),i("XvIX"),i("ZKpu"),i("6WZY"),i("XEfP"),i("Wse9"),i("LBAN"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.getDeviceMetric=e.isOld=e.getiOSversion=e.getIPadModel=e.getIPhoneModel=e.isIE11=e.isIE=e.PERFORMANCE_CATEGORY=void 0;var s=i("M2um"),n=/Android.*Nexus[\\s]+(7|9|10)/,a=/SM-T530|SM-T330|SM-N8010/,o=/HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel/,r=/HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410/,h=/sm-t377|sm-t56/,d=/hudl/,l={LOW_END:"LOW_END",MID_END:"MID_END",HIGH_END:"HIGH_END"};e.PERFORMANCE_CATEGORY=l;var u={LOW_END:"iPhone 1/3g/3gs,iPhone 4/4s,iPhone 5/5c/5s,iPad 1/2 | Mini 1",MID_END:"iPhone 6/6s/7/8,iPhone 6/6s/7/8 (Display Zoom),iPhone 6/6s/7 Plus/8 Plus,iPhone 6/6s/7 Plus/8 Plus (Display Zoom),iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7"};e.isIE=function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var i=t.indexOf("rv:");return parseInt(t.substring(i+3,t.indexOf(".",i)),10)}return!1};e.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode};var c=function(){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio;return t===320/480&&1===e?"iPhone 1/3g/3gs":t===640/960&&2===e?"iPhone 4/4s":t===640/1136&&2===e?"iPhone 5/5c/5s":t===750/1334&&2===e?"iPhone 6/6s/7/8":t===640/1136&&2===e?"iPhone 6/6s/7/8 (Display Zoom)":.5625===t&&3===e?"iPhone 6/6s/7 Plus/8 Plus":t===1125/2001&&3===e?"iPhone 6/6s/7 Plus/8 Plus (Display Zoom)":t===375/812&&3===e?"iPhone X":""};e.getIPhoneModel=c;var p=function(){var t=(window.screen.width>window.screen.height?window.screen.height:window.screen.width)/(window.screen.width>window.screen.height?window.screen.width:window.screen.height),e=window.devicePixelRatio;return.75===t?1===e?"iPad 1/2 | Mini 1":"iPad 3-5, iPad Air 1-2, iPad Mini 2-4, iPad Pro 9.7":.75===t?"iPad Pro 10.5":t===1024/1366?"iPad Pro 12.9, Pro 12.9 (2nd Gen)":void 0};e.getIPadModel=p;e.getiOSversion=function(){var t=window.navigator.userAgent,e=t.indexOf("OS ");return(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1)&&e>-1?window.Number(t.substr(e+3,3).replace("_",".")):0};var m=function(){var t=window.navigator.userAgent;return!!t.match(n)||(!!t.match(a)||(!(!t.match(o)&&!t.match(r))||(!!t.match(h)||!!t.match(d))))};e.isOld=m;e.getDeviceMetric=function(){var t=l.MID_END,e=(0,s.getPlatform)();if("desktop"===e.type)t=l.HIGH_END;else if("unknown"!==e.type){switch(e.os){case"windows":case"blackberry":case"webos":t=l.LOW_END;break;case"fire":t=function(t){var e=l.MID_END;return t.kindle.gen<8&&(e=l.LOW_END),e}(e);break;case"android":t=function(t){if(m())return l.LOW_END;var e=t.version&&parseInt(t.version)||0;return e<=6?l.LOW_END:e>9?l.HIGH_END:l.MID_END}(e);break;case"ios":t=function(t){var e=l.HIGH_END;if("tablet"===t.type){var i=p();u.LOW_END.includes(i)?e=l.LOW_END:u.MID_END.includes(i)&&(e=t.majorVersion<13?l.LOW_END:l.MID_END)}else if("smartphone"===t.type){var s=c();u.LOW_END.includes(s)?e=l.LOW_END:u.MID_END.includes(s)&&(e=l.MID_END)}return e}(e)}return{platform:e,category:t}}return{platform:e,category:t}}},CDWU:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=s(i("C9uT")),o=i("TEuq");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d={id:null,volume:.2},l=function(){function t(t){var e=t.game;this.game=e,this.sounds={},this.sprites={},this.backgroundMusic=h({},d),this._soundVolume=1,this._sfxVolume=1,this._musicVolume=1,this._voVolume=1}var e=t.prototype;return e.startup=function(){this.game.sound.mute=!1,this.touchLock()},e.decode=function(t,e,i){this.game.sound.setDecodedCallback(t,e,i)},e.handleGamePause=function(t){var e=this,i=this.game.sound.context.state;t&&"running"===i?this.game.sound.context.suspend().then((function(){})):t||"interrupted"!==i&&"suspended"!==i||(this.contextTimeout&&(clearTimeout(this.contextTimeout),this.contextTimeout=null),this.contextTimeout=setTimeout((function(){e.game.sound.context.resume().then((function(){}))}),500))},e.touchLock=function(){this.game.sound.usingWebAudio&&"suspended"===this.game.sound.context.state&&(o.Debugger.log("log","AudioContext is suspended"),this.game.sound.setTouchLock(),this.isTouchLocked=!0)},e.checkAudioContext=function(){var t=this;"suspended"===this.game.sound.context.state&&this.game.sound.usingWebAudio&&(o.Debugger.log("log","AudioContext attempting resume"),this.game.sound.context.resume().then((function(){o.Debugger.log("log","AudioContext resumed successfully"),t.isTouchLocked="suspended"===t.game.sound.context.state})))},e.addSound=function(t,e){this.sounds[t]=this.game.make.audio(e),this.sounds[t].stop()},e.removeSound=function(t,e){this.sounds[t]&&(this.sounds[t].destroy(),this.game.cache.removeSound(e))},e.addAudioSprite=function(t){var e=t.id;this.sprites[e]=this.game.add.audioSprite(e)},e.removeAudioSprite=function(t){var e=this,i=t.id;this.sprites[i]&&(this.sprites[i].isPlaying&&this.sprites[i].stop(),Object.keys(this.sprites[i].sounds).forEach((function(t){e.sprites[i].sounds[t].isPlaying&&e.sprites[i].sounds[t].stop(),e.sprites[i].sounds[t].destroy(),e.game.cache.removeSound(t),delete e.sprites[i].sounds[t]})),this.game.cache.removeJSON(i),this.game.cache.removeSound(i),delete this.sprites[i])},e.checkSfxExists=function(t,e){return this.sprites[e]&&this.sprites[e].sounds[t]},e.sfxExists=function(t,e){return!!this.checkSfxExists(t,e)||(o.Debugger.log("warn","Cant find "+t+" in audiosprite "+e+", has it been added? (config.json and assetpack)"),!1)},e.playSFX=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._sfxVolume,this.playAudioSprite(t,e)},e.playVO=function(t,e){return void 0===e&&(e={}),e.volume=(e.volume||1)*this._voVolume,this.playAudioSprite(t,e)},e.playAudioSprite=function(t,e){void 0===e&&(e={});var i=e,s=i.volume,n=void 0===s?1:s,a=i.loop,o=void 0!==a&&a,r=i.ignoreIfPlaying,h=void 0!==r&&r,d=i.delay,l=void 0===d?null:d,u=i.onComplete,c=void 0===u?null:u,p=i.onCompleteScope,m=void 0===p?null:p,f=i.spriteID,g=void 0===f?"generic_audiosprite":f;if(!this.sfxExists(t,g))return!1;if(!0!==Phaser.Device.ie||!this.game.paused){if(this.checkAudioContext(),l)return e.delay=null,this.game.time.events.add(l,this.playAudioSprite,this,t,e),!0;var v=this.sprites[g],y=v.get(t);if(this.isTouchLocked){if(!c)return!1;var b=new Phaser.Signal;b.addOnce((function(){c.call(m)})),b.dispatch()}else{if(h&&y.isPlaying)return!1;y.loop=o,y.markers[t].loop=o,v.play(t,n),c&&y.onStop.addOnce((function(){c.call(m)}))}return v}},e.stopAudioSprite=function(t,e){void 0===e&&(e={});var i=e.spriteID,s=void 0===i?"":i;this.sprites[s]?this.sprites[s].get(t).isPlaying&&this.sprites[s].stop(t):this.sounds[t]&&this.sounds[t].isPlaying&&this.sounds[t].stop()},e.stopAllSFX=function(){for(var t in this.sprites)if(this.sprites.hasOwnProperty(t))for(var e in this.sprites[t].sounds)this.sprites[t].sounds.hasOwnProperty(e)&&this.sprites[t].sounds[e].isPlaying&&"click"!==e&&this.sprites[t].sounds[e].stop()},e.clearBackgroundMusic=function(){this.backgroundMusic=h({},d)},e.setBackgroundMusic=function(t){this.sounds[t]?this.backgroundMusic.id=t:o.Debugger.log("warn","Background music "+t+" not found.")},e.stopBackgroundMusic=function(){var t=this.backgroundMusic.id;this.stopSound(t)},e.playBackgroundMusic=function(){var t=this.backgroundMusic,e=t.id,i=t.volume,s=this.sounds[e];s&&this.allowMusic&&(s.paused||s.isPlaying?s.paused&&(s.volume=0,s.resume(),s.fadeTo(500,i)):s.play("",0,i,!0)),this.game.paused&&this.pauseBackgroundMusic()},e.pauseBackgroundMusic=function(){var t=this.backgroundMusic.id,e=this.sounds[t];e&&e.pause()},e.stopSound=function(t){this.sounds[t]&&(this.sounds[t].pausedPosition=0,this.sounds[t].isPlaying&&this.sounds[t].stop())},e.setVolume=function(t,e){this.backgroundMusic.id===t?(this.backgroundMusic.volume=e,this.sounds[t].fadeTo(1e3,e)):this.sounds[t].volume=e},(0,a.default)(t,[{key:"soundVolume",set:function(t){this.game.sound.volume=t,this._soundVolume=t}},{key:"sfxVolume",set:function(t){for(var e in this._sfxVolume=t,this.sounds)e!==this.backgroundMusic.id&&(this.sounds[e].mute=0===this._sfxVolume)}},{key:"musicVolume",set:function(t){this._musicVolume=t,1===this._musicVolume?this.playBackgroundMusic():this.pauseBackgroundMusic()}},{key:"voVolume",set:function(t){this._voVolume=t}},{key:"allowSFX",get:function(){return 1===this._sfxVolume}},{key:"allowMusic",get:function(){return 1===this._musicVolume}},{key:"allowVo",get:function(){return 1===this._voVolume}}]),t}();e.default=l},DaKh:function(t,e,i){"use strict";"resetTransform"in CanvasRenderingContext2D.prototype||(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)})},Dc5c:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("86MP")),o=i("zgbH"),r=function(t){function e(e,i){var s,n=i.x,a=void 0===n?0:n,o=i.y,r=void 0===o?0:o,h=i.atlas,d=void 0===h?"ui_various":h,l=i.key,u=void 0===l?"magnify_glass":l;return(s=t.call(this,e,a,r)||this).manifyGlass=s.game.make.image(a,r,d,u),s.manifyGlass.anchor.set(.5),s.addChild(s.manifyGlass),s.loader=new Phaser.Loader(s.game),s.onActivateMagnifyGlass=new Phaser.Signal,s.visible=!1,s.dropEnabled=!1,s}(0,a.default)(e,t);var i=e.prototype;return i.enableDrop=function(){this.game.input.onUp.add(this.onReleaseMe,this)},i.onReleaseMe=function(t){this.stopDrag(),this.onActivateMagnifyGlass.dispatch(t)},i.startDrag=function(){this.x=-this.manifyGlass.width,this.y=this.game.defaultHeight+this.manifyGlass.height,this.inputEnabled=!0,this.input.enabled=!0,this.dropEnabled&&this.game.input.onUp.add(this.onReleaseMe,this),this.isDragging=!0},i.stopDrag=function(){this.isDragging=!1,this.input&&(this.input.enabled=!1),this.game.input.onUp.remove(this.onReleaseMe,this)},i.update=function(){if(this.isDragging){var e=this.game.input.position,i=e.x,s=e.y;this.x=i,this.y=s}t.prototype.update.call(this)},i.examineItem=function(t,e){this.pondItemId=t,this.factId=e,this.loader.onLoadComplete.addOnce(this.loaded,this),this.loader.image(this.factId,o.PATH_ASSETS+"environment/magnified/"+this.factId+".png"),this.loader.start()},i.loaded=function(){this.manifyImage=this.game.make.image(0,0),this.manifyImage.anchor.set(.5),this.addChild(this.manifyImage),this.manifyImage.loadTexture(this.factId),this.setChildIndex(this.manifyImage,0)},i.clearCreature=function(){this.manifyImage&&this.manifyImage.destroy(!0)},i.destroy=function(e){void 0===e&&(e=!0),this.manifyImage&&(this.manifyImage.destroy(),this.manifyImage=null),this.manifyGlass.destroy(),this.manifyGlass=null,this.onActivateMagnifyGlass.removeAll(),this.onActivateMagnifyGlass=null,t.prototype.destroy.call(this,e)},(0,n.default)(e,[{key:"dropIsEnabled",set:function(t){this.dropEnabled=t}}]),e}(Phaser.Sprite);e.default=r},En6K:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("fKPv")),o=n(i("C9uT")),r=n(i("86MP")),h=n(i("tpwa")),d=i("YZLL"),l=s(i("Akkm"));function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function p(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var f=[[0],[-161,161]],g=function(t){function e(e,i){var s,n=i.options,a=i.onBookClicked,o=i.branchOptionsEnabled,r=i.readItemNames,h=i.onBarReady,d=i.factBookVisible;return(s=t.call(this,e)||this).options=n,s.onBookClicked=a,s.onPickUp=new Phaser.Signal,s.onReadFact=new Phaser.Signal,s.onEnterDecisionState=new Phaser.Signal,s.onBarReady=h,s.branchOptionsEnabled=o,s.readItemNamesEnabled=r,s.factBookVisible=d,s.createTapArea(),s.createBar(),s}(0,r.default)(e,t);var i=e.prototype;return i.enableOptions=function(){this.branchOptionsEnabled||(this.enableItems(),this.factBook.enable())},i.disableOptions=function(){this.items&&this.disableItems(),this.factBook&&this.factBook.disable(),this.disableTapArea()},i.showHandPrompt=function(){var t=new d.HandPrompt(this.game,{x:this.optionsBar.x,y:this.optionsBar.y});this.addChild(t),t.animate()},i.createTapArea=function(){this.tapArea=this.game.make.graphics(),this.tapArea.beginFill(10066329,0),this.tapArea.drawRect(0,0,this.game.width,this.game.height),this.addChild(this.tapArea),this.tapArea.x=.5*-(this.game.width-this.game.defaultWidth)},i.enableTapArea=function(){this.tapArea.inputEnabled||(this.tapArea.inputEnabled=!0,this.tapArea.input.useHandCursor=!0,this.tapArea.events.onInputUp.add(this.tapAreaClicked,this))},i.disableTapArea=function(){this.tapArea.inputEnabled&&(this.tapArea.inputEnabled=!1,this.tapArea.input.useHandCursor=!1,this.tapArea.events.onInputUp.remove(this.tapAreaClicked,this))},i.tapAreaClicked=function(){this.factBook.onUp()},i.createBar=function(){this.optionsBar=this.game.make.image(0,0,"ui_various","options_bar"),this.optionsBar.anchor.set(.5),this.optionsBar.x=this.game.defaultWidth/2,this.optionsBar.y=this.game.defaultHeight+this.optionsBar.height,this.addChild(this.optionsBar),this.showBar()},i.showBar=function(){if(this.optionsBar){var t=this.game.defaultHeight-.5*this.optionsBar.height-20;this.game.make.tween(this.optionsBar).to({y:t},400,"Quad.easeOut",!0).onComplete.addOnce(this.onShowBarComplete,this)}},i.onShowBarComplete=function(){this.createItems(this.options)},i.hideBar=function(){if(this.optionsBar){var t=this.game.defaultHeight+this.optionsBar.height;this.game.make.tween(this.optionsBar).to({y:t},400,"Quad.easeIn",!0)}this.factBook&&this.factBook.animateOff()},i.disableItems=function(){for(var t,e=p(this.items);!(t=e()).done;){var i=t.value;i.disableBranchItem(),i.onPickUp.remove(this.handlePickUp,this),i.onReadFact.remove(this.handleReadFact,this)}},i.enableItems=function(){for(var t,e=p(this.items);!(t=e()).done;){var i=t.value;i.enableBranchItem(),i.onPickUp.add(this.handlePickUp,this),i.onReadFact.add(this.handleReadFact,this)}},i.createItems=function(t){this.items=[];for(var e,i=f[t.length-1],s=p(t.entries());!(e=s()).done;){var n=e.value,a=n[0],o=n[1],r=o.key,d=new h.default(this.game,{id:r,index:a,data:c({},o),atlas:"tray_creatures",enabled:!1,readItemName:this.readItemNamesEnabled});this.addChild(d),d.x=this.game.defaultWidth/2+i[a],d.y=this.optionsBar.y+47-.5*d.height,this.items.push(d),this.readItemNamesEnabled?d.onNameRead.addOnce(this.showItem,this):d.animateOn()}this.readItemNamesEnabled?(this.showCount=0,this.showItem()):this.showItemsComplete()},i.showItem=function(){this.items[this.showCount]?(this.items[this.showCount].animateOn(),this.showCount++):this.showItemsComplete()},i.showItemsComplete=function(){this.branchOptionsEnabled&&this.enableItems(),this.createFactButton(),this.enterDecisionState(this.branchOptionsEnabled),this.onBarReady.dispatch()},i.handlePickUp=function(t){for(var e,i=p(this.items);!(e=i()).done;){e.value.animateOff()}this.factBook.disable(),this.onPickUp.dispatch(t)},i.handleReadFact=function(t){for(var e,i=p(this.items);!(e=i()).done;){e.value.unselect(t.id)}this.factBook.disable(),this.onReadFact.dispatch(t)},i.createFactButton=function(){var t=this.optionsBar.x+.5*this.optionsBar.width-100,e=this.optionsBar.y-.5*this.optionsBar.height-20;this.factBook=new l.default(this.game,{x:t,y:e,isVisible:this.factBookVisible}),this.addChild(this.factBook),this.factBook.onClicked.add(this.handleBookClicked,this)},i.showFactButton=function(){this.factBook&&this.factBook.fadeIn()},i.enterFactState=function(){this.optionsBar.frameName="options_bar_selected";for(var t,e=p(this.items);!(t=e()).done;){t.value.setFactState(!0)}this.enableTapArea()},i.enterDecisionState=function(t){void 0===t&&(t=!0),this.optionsBar.frameName="options_bar";for(var e,i=p(this.items);!(e=i()).done;){var s=e.value;s.setFactState(!1),s.selected=!1,t&&s.enableBranchItem()}this.factBook.reset(),t&&this.factBook.enable(),this.disableTapArea(),this.onEnterDecisionState.dispatch()},i.handleBookClicked=function(t){t===l.STATE.FACT?this.enterFactState():t===l.STATE.DECISION&&this.enterDecisionState();var e="rock"===this.items[0].id;this.onBookClicked.dispatch(e)},i.enterReadingFactState=function(){},i.narrateFactComplete=function(){for(var t,e=p(this.items);!(t=e()).done;){var i=t.value;i.selected=!1,i.enableBranchItem()}this.factBook.enable()},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){if(void 0===e&&(e=!0),this.factBook&&(this.factBook.onClicked.remove(this.handleBookClicked,this),this.factBook.destroy(),this.factBook=null),this.tapArea&&(this.disableTapArea(),this.tapArea.destroy(),this.tapArea=null),this.clearSignal(this.onPickUp),this.onPickUp=null,this.clearSignal(this.onReadFact),this.onReadFact=null,this.clearSignal(this.onEnterDecisionState),this.onEnterDecisionState=null,Array.isArray(this.items))for(var s,n=p(this.items);!(s=n()).done;){var a=s.value;a.disableBranchItem(),a.onNameRead.remove(this.showItem,this),a.onPickUp.remove(this.handlePickUp,this),a.onReadFact.remove(this.handleReadFact,this),a.destroy(),a=null}this.items=null,this.optionsBar&&(this.optionsBar.destroy(),this.optionsBar=null),this.options=null,t.prototype.destroy.call(this,e,i)},(0,o.default)(e,[{key:"factBookVisible",get:function(){return this._factBookVisible},set:function(t){this._factBookVisible=t}},{key:"readItemNames",set:function(t){this.readItemNamesEnabled=t}}]),e}(Phaser.Group);e.default=g},Frl2:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e){var i,s=(i=t.call(this,e)||this).game.cache.getJSON("app_config").lifecycles;return i.lifecycles=s,i.backing=i.game.make.graphics(),i.backing.beginFill(0,.4),i.backing.drawRect(0,0,Math.max(i.game.width,i.game.defaultWidth),i.game.defaultHeight),i.add(i.backing),i.backing.x=.5*-i.backing.width,i.panel=i.game.make.image(0,0,"lifecycle","panel"),i.add(i.panel),i.panel.x=.5*-i.panel.width,i.panel.y=.5*(i.game.defaultHeight-i.panel.height),i.leftImage=i.game.make.image(0,0),i.leftImage.anchor.set(.5),i.add(i.leftImage),i.leftImage.y=i.panel.y+.5*i.panel.height,i.rightImage=i.game.make.image(0,0),i.rightImage.anchor.set(.5),i.add(i.rightImage),i.rightImage.y=i.panel.y+.5*i.panel.height,i.arrow=i.game.make.image(0,0,"lifecycle","arrow"),i.arrow.anchor.set(.5),i.add(i.arrow),i.arrow.x=i.panel.x+.5*i.panel.width,i.arrow.y=i.panel.y+.5*i.panel.height,i.alpha=0,i}(0,n.default)(e,t);var i=e.prototype;return i.showLifecycle=function(t){var e=this.lifecycles[t].from;this.backing.inputEnabled=!0;this.leftImage.loadTexture("lifecycle",e),this.leftImage.x=this.panel.x+70+.5*this.leftImage.width,this.rightImage.loadTexture("lifecycle",t),this.rightImage.x=this.panel.x+this.panel.width-70-.5*this.leftImage.width,this.alpha=0,this.game.make.tween(this).to({alpha:1},200,"Quad.easeIn",!0)},i.hideLifecycle=function(){this.backing.inputEnabled=!1,this.game.make.tween(this).to({alpha:0},200,"Quad.easeIn",!0)},i.destroy=function(e,i){void 0===e&&(e=!0),this.leftImage=null,this.rightImage=null,this.arrow=null,this.panel=null,this.backing=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=a},G4Df:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("VHS3")),a=s(i("RmX3")),o=s(i("ko7Z"));function r(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var d=function(){function t(t,e){var i=e.container,s=e.items,n=e.layerHeight,a=e.environment;this.game=t,this.layerHeight=n,this.container=i,this.environment=a,this.plants=[];for(var o,h=r(s);!(o=h()).done;){var d=o.value;this.addPlant(d)}}var e=t.prototype;return e.reset=function(){for(var t,e=r(this.plants);!(t=e()).done;){var i=t.value;i.onEat.remove(this.handleCreatureEatPlant,this),i.destroy()}this.plants=[]},e.addPlant=function(t){var e=t.x,i=t.offsetY,s=new n.default(this.game,this.environment,t),a=this.layerHeight+i;return s.setPosition(e,a),s.onEat.add(this.handleCreatureEatPlant,this),this.container.add(s),this.plants.push(s),s},e.addBulrush=function(t){var e=t.x,i=t.offsetY,s=new a.default(this.game,this.environment,t),n=this.layerHeight+i;s.setPosition(e,n),this.container.add(s)},e.getClosestTo=function(t,e,i){if(void 0===i&&(i=99999),this.plants.length>0){for(var s,n=0;n<this.plants.length;n++){var a=this.plants[n];if("algae_surface"!==a.id){var o=a.x-t,r=Math.abs(o);r<i&&(i=r,s=a)}}return s}return null},e.getPlantsById=function(t){return this.plants.filter((function(e){return e.id===t}))},e.handleCreatureEatPlant=function(t,e){var i=new o.default(this.game,this.environment,.3,t.depth+1);i.x=e.x,i.y=e.y,this.container.add(i)},e.destroy=function(){this.reset()},t}();e.default=d},G9dM:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(){this.currentPond="none",this.clearPlayerSaves=function(){},this.launchSave=[],this.pondDebug=!1,this.myCreaturesUnlocked=!1,this.arrowsUnlocked=!1,this.sound=!0,this.sfx=!0,this.music=!0,this.vo=!0,this.captions=!0,this.nextLevel=function(){}}},GEMp:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("XEfP"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("LClc")),o=s(i("x1tP")),r=i("6YV8"),h=i("SPpy"),d=i("zgbH"),l=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.preload=function(){this.debug=!1,this.loadComplete=!1,this.loadBar=new a.default(this.game),this.game.add.existing(this.loadBar),this.assetsReady=!1,this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.loadAppAssetPacks()},i.handleFileStart=function(t,e){-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},i.handleLoadStart=function(){(0,h.getGameFileLoadList)(this.game,this.debug)},i.loadAppAssetPacks=function(){this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.audioSprites=[];for(var t=this.game.cache.getJSON("load_manifest").main.packs,e=0;e<t.length;e++){var i=t[e];this.game.load.pack(i.key,i.path,null,this)}},i.loadUpdate=function(){this.loadBar.visible=!0,this.loadBar.setProgress(this.game.load.progress/100)},i.create=function(){this.assetsReady=!0,this.game.sounds.startup()},i.update=function(){this.checkLoading()},i.checkLoading=function(){!this.loadComplete&&this.assetsReady&&(this.loadBar.setProgress(1),this.handleLoadComplete())},i.handleLoadComplete=function(){var t=this;if(!this.loadComplete){this.loadComplete=!0,this.game.app_config=this.game.cache.getJSON("app_config"),this.setControllers();for(var e=0;e<this.audioSprites.length;e++)this.game.sounds.addAudioSprite({id:this.audioSprites[e]});for(var i=0;i<this.game.app_config.audio.length;i++)this.game.sounds.addSound(this.game.app_config.audio[i],this.game.app_config.audio[i]);this.game.sounds.decode(this.audioSprites,this.audioDecoded,this),this.decodeSoundsCallback=this.game.time.events.add(d.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()}))}},i.audioDecoded=function(){this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.loadBar.onAnimationComplete.add(this.handleLoadAnimationComplete,this),this.loadBar.animateCompleteSequence({delay:500,duration:200});var t=this.game.springRollApplication.getPlugin("GoogleAnalytics");(0,r.addGoogleAnalyticsPlugin)({plugin:t})},i.setControllers=function(){this.game.controller=new o.default(this.game),this.game.controller.init()},i.handleLoadAnimationComplete=function(){this.game.controller.loadComplete(),this.loadComplete=!0},i.shutdown=function(){this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.loadBar.onAnimationComplete.remove(this.handleLoadAnimationComplete,this),this.loadBar.destroy(),this.loadBar=null},e}(Phaser.State);e.default=l},GlYg:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e.prototype.playSFX=function(){this.game.sounds.playSFX(this.id,{spriteID:"sfx_creatures"})},e}(s(i("bFzk")).default);e.default=a},IO21:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("86MP")),o=n(i("4UFF")),r=n(i("zoTg")),h=n(i("hNsG")),d=s(i("bHjq")),l=n(i("0BGZ")),u=i("MPoQ"),c=i("6YV8"),p=i("evHg"),m=i("oX+o"),f=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.pondModel,i=t.decisionTreeModel;this.pondModel=e,this.decisionTreeModel=i,this.onPondComplete=new Phaser.Signal,this.onPondPanUpComplete=new Phaser.Signal},i.create=function(){this.container=this.game.add.group(),this.environment=new r.default(this.game,{pondModel:this.pondModel}),this.container.addChild(this.environment),this.gameCamera=new h.default(this.game,{scene:this.environment,cameraFollow:this.environment.cameraFollow,pondModel:this.pondModel}),this.addHud(),this.gameHud.arrowsActive=!1,this.gameHud.magnifyActive=!1,this.gameCamera.start(),this.onboarding=new l.default({game:this.game,pond:this,gameHud:this.gameHud}),(0,c.getGA)().track({action:"startLevel",label:"pond_"+this.pondModel.saveNumber}),this.game.sounds.playVO("silence",{spriteID:"mixed_onboarding_vo",onComplete:this.start,onCompleteScope:this})},i.start=function(){this.onboarding.start()},i.playSurfaceAmbient=function(){this.sndAmbient=this.game.sounds.playSFX("surface",{spriteID:"ambient",loop:!0,volume:.2})},i.playUnderwaterAmbient=function(){this.game.sounds.stopAudioSprite("surface",{spriteID:"ambient"}),this.sndAmbient=this.game.sounds.playSFX("underwater",{spriteID:"ambient",loop:!0,volume:.1})},i.activateArrows=function(){this.gameCamera.onMoveComplete.add(this.onPanComplete,this)},i.update=function(){var t=Math.min(.1,this.game.time.elapsedMS/1e3);this.environment.step(t),this.gameCamera.step(t)},i.showOptions=function(t){this.gameHud.onMagnify.add(this.onMagnify,this),this.gameHud.onMagnifyComplete.add(this.onMagnifyComplete,this),this.gameHud.onToggleZoom.add(this.handleToggleZoom,this),this.pondModel.pondComplete?(this.pondModel.zoom.state=p.ZOOM_STATE.ZOOMED_OUT,this.decisionTreeModel.setComplete(),this.gameCamera.zoomToPondOverview()):(this.gameHud.addOverlayDecision(this.decisionTreeModel,t),this.gameHud.onDragStart.add(this.zoomOut,this),this.gameHud.onDragStop.add(this.zoomIn,this),this.gameHud.onDecisionComplete.add(this.onDecisionComplete,this),this.gameHud.onNextDecision.add(this.onNextDecision,this),this.gameHud.onNextPondLayer.add(this.onNextPondLayer,this),this.gameHud.onPanToActiveLayer.add(this.panToActiveLayer,this))},i.onMagnify=function(t){var e=t.worldX,i=t.worldY,s=Math.floor(e/this.gameCamera.cameraScale),n=Math.floor(i/this.gameCamera.cameraScale),a=this.environment.getClosestPondItemTo(this.pondModel,{x:s,y:n}),o=a.id,r=a.item;this.pondItem=r,this.pondItem?this.gameHud.magnifyItem(o,this.pondItem):(this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections()),this.gameHud.hideMagnifyingGlass(),this.gameHud.handleMagnifyItemComplete())},i.onMagnifyComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections()),this.pondItem&&this.pondItem.unpause(),this.pondItem=null},i.onDecisionComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections());var t=this.pondModel.pondItems.spawnItem,e=null;t&&t.unlock&&(e=t.unlock),this.pondModel.addSpawnItems(),null!==e&&this.pondModel.spawnUnlockedItems(e),this.pondModel.pondItems.save(),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!0})},i.onNextDecision=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableHorizontalDirections())},i.onNextPondLayer=function(){if(this.pondModel.activateNextLayer(),this.pondModel.pondComplete)this.pondModel.zoom.state=p.ZOOM_STATE.ZOOMED_OUT,this.onPondComplete.dispatch();else{this.gameCamera.onMoveComplete.addOnce(this.onNextPondLevelPanComplete,this),this.panToActiveLayer();var t=this.pondModel.currentLayerID;this.decisionTreeModel.resetIndex(),this.decisionTreeModel.setCurrentPondLayer(t),this.gameHud.resetMagnify(),this.gameHud.hideScrollArrows()}},i.onNextPondLevelPanComplete=function(){this.pondModel.onSpawnAwaitingItems.addOnce(this.onEnterLevelComplete,this),this.pondModel.spawnAwaitingItems(),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!0,unlocked:!0})},i.onEnterLevelComplete=function(t){this.onPondPanUpComplete.dispatch({lifecycleId:t}),t?(this.decisionTreeModel.state=m.DECISION_STATES.READY,this.gameHud.onLifecycleVOComplete.addOnce(this.handleLifecycleComplete,this),this.gameHud.showLifeCyclePanel(t)):this.gameHud.handleNextDecision()},i.handleLifecycleComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections())},i.showPondComplete=function(){this.pondModel.zoom.state=p.ZOOM_STATE.ZOOMED_OUT,this.gameHud.hideScrollArrows(),this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.onPondCompleteZoomed,this),this.gameCamera.zoomToPondComplete()},i.onPondCompleteZoomed=function(){this.gameCamera.onMoveComplete.remove(this.onPondCompleteZoomed,this),this.gameCamera.onMoveComplete.add(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.showMagnifyingGlassButton,this)},i.showMagnifyingGlassButton=function(){this.gameHud.showMagnifyingGlassButton()},i.zoomOut=function(){var t=this.pondModel.getCameraDragDropScale();this.gameCamera.zoomTo(t)},i.zoomIn=function(t){this.environment.onAddPondItem.addOnce(this.handleAddPondItem,this),t.x=Math.floor(this.game.input.worldX/this.gameCamera.cameraScale),t.y=Math.floor(this.game.input.worldY/this.gameCamera.cameraScale),this.pondModel.addItem(t),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!1}),this.gameCamera.zoomToSaved(),"BRANCH"===t.dragType&&(0,c.getGA)().track({action:"select_content",label:this.pondModel.activePondLayerID+"_"+t.id})},i.handleAddPondItem=function(t){var e=t.type,i=t.item;switch(this.game.sounds.playSFX("drop",{spriteID:"sfx_general"}),e){case u.PLANT:var s=i.data,n=s.id,a=s.dragType;"lillypad"===n&&"BRANCH"===a?(this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.onLillypadPanComplete,this),this.gameHud.hideScrollArrows(),this.gameCamera.panTo(i.getX(),i.getTop())):this.gameCamera.panTo(i.getX());break;case u.GEOLOGY:case u.CREATURE:"heron"===i.id&&this.gameCamera.onMoveComplete.addOnce(i.hunt,i),this.gameCamera.panTo(i.getX())}},i.onLillypadPanComplete=function(){this.gameCamera.onMoveComplete.remove(this.onLillypadPanComplete,this),this.gameCamera.onMoveComplete.add(this.onPanComplete,this),this.gameHud.overlayDecision.showNextOptions()},i.panLeft=function(){this.gameCamera.panLeft()},i.panRight=function(){this.gameCamera.panRight()},i.panUp=function(){this.gameCamera.panUp()},i.panDown=function(){this.gameCamera.panDown(),this.gameHud.overlayDecisionVisibility=this.pondModel.currentLayerIsActivePondLayer},i.panToActiveLayer=function(){this.gameCamera.panToActiveLayer()},i.handleToggleZoom=function(){this.gameCamera.zoomToActiveLayer()},i.onPanComplete=function(t){this.gameHud.showScrollArrows(t),this.gameHud.overlayDecisionVisibility=this.pondModel.currentLayerIsActivePondLayer,this.gameCamera.cameraY<1e3?(this.game.sounds.stopAudioSprite("underwater",{spriteID:"ambient"}),this.sndAmbient=this.game.sounds.playSFX("surface",{spriteID:"ambient",loop:!0,volume:.2})):(this.game.sounds.stopAudioSprite("surface",{spriteID:"ambient"}),this.sndAmbient=this.game.sounds.playSFX("underwater",{spriteID:"ambient",loop:!0,volume:.1}))},i.removeHud=function(){this.gameHud.onScrollLeft.remove(this.panLeft,this),this.gameHud.onScrollRight.remove(this.panRight,this),this.gameHud.onScrollUp.remove(this.panUp,this),this.gameHud.onScrollDown.remove(this.panDown,this),this.gameHud.onDragStart.remove(this.zoomOut,this),this.gameHud.onDragStop.remove(this.zoomIn,this),this.gameHud.onDecisionComplete.remove(this.onDecisionComplete,this),this.gameHud.onNextDecision.remove(this.onNextDecision,this),this.gameHud.onNextPondLayer.remove(this.onNextPondLayer,this),this.gameHud.onMagnify.remove(this.onMagnify,this),this.gameHud.onMagnifyComplete.remove(this.onMagnifyComplete,this),this.gameHud.onPanToActiveLayer.remove(this.panToActiveLayer,this),this.gameHud.destroy(!0),this.gameHud=null},i.addHud=function(){this.captions=new d.default,this.captions.parseGroups(this.game,[{id:"olive",type:d.CAPTION.MAGNIFY},{id:"olive",type:d.CAPTION.FACT},{id:"olive",type:d.CAPTION.NAME},{id:"mixed",type:d.CAPTION.ONBOARDING},{id:"elinor",type:d.CAPTION.SUMMARY}]),this.game.springRollCaptionsPlugin.setData(this.captions.data),this.gameHud=new o.default(this.game,this.captions,this.pondModel),this.container.addChild(this.gameHud),this.gameHud.fixedToCamera=!0,this.gameHud.onScrollLeft.add(this.panLeft,this),this.gameHud.onScrollRight.add(this.panRight,this),this.gameHud.onScrollUp.add(this.panUp,this),this.gameHud.onScrollDown.add(this.panDown,this),this.gameHud.hideHomeButton()},i.shutdown=function(){this.onPondComplete.removeAll(),this.onPondComplete=null,this.onPondPanUpComplete.removeAll(),this.onPondPanUpComplete=null,this.sndAmbient&&(this.sndAmbient.stop(),this.sndAmbient=null),this.onboarding.destroy(),this.onboarding=null,this.removeHud(),this.environment.destroy(!0),this.environment=null,this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.destroy(!0),this.gameCamera=null,this.container.destroy(!0),this.container=null,this.pondModel=null,this.decisionTreeModel=null,this.captions&&(this.captions.destroy(),this.captions=null)},e}(Phaser.State);e.default=f},Iikf:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("a/rO"),i("/TzG"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("3huV")),o=s(i("UYjU")),r=s(i("dD3M")),h=i("4UFF"),d=s(i("TqQQ")),l=s(i("ujPl")),u=i("hDA+");function c(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return p(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var m=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.model;this.creaturesUnlockedModel=e},i.preload=function(){},i.create=function(){this.container=new a.default(this.game,{background:"bg_underwater",title:this.game.copy.getCopy("title_choose_pond")}),this.game.add.existing(this.container),this.buttonWrap=this.game.make.group(),this.container.add(this.buttonWrap),this.createHudButtons(),this.createSaveButtons(),this.pulseButton(),!this.game.controller.saves.hasPromptedMyCreatures()&&this.creaturesUnlockedModel.hasSomeUnlocked&&(this.game.controller.saves.setMyCreaturesPromptComplete(),(0,u.playDeviceAudioAndCaption)(this.game,{spriteID:"vo_ui",id:"my_creatures_notification"}))},i.createSaveButtons=function(){var t=this;this.deleting=!1;var e=this.game.controller.saves.getSaves(),i=0;if(this.buttons=e.map((function(e,s){var n=new o.default({game:t.game,up:"btn_pond",over:"btn_pond_over",saveId:e.id,hasDelete:!0,colourThemeId:e.colourThemeId});return n.x=.5*n.width+n.width*s,n.onInputUp.add(t.loadPond,t),n.onDelete.add(t.deletePond,t),t.buttonWrap.add(n),i=n.x+.5*n.width,n})),this.buttons.length<3){var s=new o.default({game:this.game,up:"btn_new_pond",over:"btn_new_pond_over",sfxID:"newpond"});s.x=.5*s.width+s.width*this.buttons.length,s.onInputUp.add(this.loadPond,this),this.buttonWrap.add(s),this.buttons.push(s),i=s.x+.5*s.width}this.buttonWrap.x=.5*(this.game.defaultWidth-i),this.buttonWrap.y=.5*this.game.defaultHeight},i.removeSaveButtons=function(){for(var t,e=c(this.buttons);!(t=e()).done;){var i=t.value;i.onInputUp.remove(this.loadPond,this),i.destroy(),i=null}this.buttons=null},i.deletePond=function(t){var e=t.saveId,i=t.colourThemeId;this.deleting||(this.deleting=!0,this.pondDeleteOverlay=new d.default(this.game,e,i),this.game.add.existing(this.pondDeleteOverlay),this.pondDeleteOverlay.x=.5*this.game.width,this.pondDeleteOverlay.onDelete.addOnce(this.handleDeletePond,this),this.pondDeleteOverlay.onCancel.addOnce(this.removeDeletePondOverlay,this),(0,u.playAudioAndCaption)(this.game,{spriteID:"vo_ui",id:"erase_confirm"}))},i.handleDeletePond=function(t){this.game.controller.deleteSave(t),this.removeSaveButtons(),this.createSaveButtons(),this.removeDeletePondOverlay()},i.removeDeletePondOverlay=function(){this.deleting=!1,this.game.sounds.stopAllSFX(),this.game.springRollCaptionsPlugin.stopCaption(),this.pondDeleteOverlay&&(this.pondDeleteOverlay.destroy(),this.pondDeleteOverlay=null)},i.loadPond=function(t){this.game.controller.loadEnvironment(t.saveId)},i.createHudButtons=function(){this.game.scale.onSizeChange.add(this.positionHudButtons,this),this.btnMyCreatures=new l.default({game:this.game,up:"btn_mycreatures",over:"btn_mycreatures_over",label:{xPos:55,text:this.game.copy.getCopy("lbl_my_animals")},vo:{spriteID:"vo_ui",id:"my_animals"}}),this.btnMyCreatures.x=.5*this.game.width,this.btnMyCreatures.y=this.game.height-.5*this.btnMyCreatures.height-h.HUD_PAD,this.btnMyCreatures.onInputUp.add(this.onHandleShowMyCreatures,this),this.game.add.existing(this.btnMyCreatures),this.btnHome=new r.default({game:this.game,up:"btn_home",over:"btn_home_over"}),this.btnHome.position.set(h.HUD_PAD+.5*this.btnHome.width,h.HUD_PAD+.5*this.btnHome.height),this.btnHome.onInputUp.addOnce(this.onHandleHome,this),this.game.add.existing(this.btnHome)},i.positionHudButtons=function(){this.btnMyCreatures.x=.5*this.game.width,this.pondDeleteOverlay&&(this.pondDeleteOverlay.x=.5*this.game.width)},i.removeHudButtons=function(){this.game.scale.onSizeChange.remove(this.positionHudButtons,this),this.btnMyCreatures.onInputUp.remove(this.onHandleShowMyCreatures,this),this.btnMyCreatures.destroy(),this.btnMyCreatures=null,this.btnHome.onInputUp.remove(this.onHandleHome,this),this.btnHome.destroy(),this.btnHome=null},i.onHandleHome=function(){this.game.sounds.stopAllSFX(),this.game.springRollCaptionsPlugin.stopCaption(),this.game.controller.showWelcomeScreen()},i.onHandleShowMyCreatures=function(){this.game.controller.showMyCreatures()},i.pulseButton=function(){var t=this.game.add.tween(this.btnMyCreatures.scale).to({x:1.2,y:1.2},400,"Quad.easeOut",!1),e=this.game.add.tween(this.btnMyCreatures.scale).to({x:.8,y:.8},240,"Quad.easeIn",!1),i=this.game.add.tween(this.btnMyCreatures.scale).to({x:1,y:1},160,"Quad.easeOut",!1);t.chain(e),e.chain(i),t.start(),this.tintIn()},i.tint=function(t,e){var i=Math.floor(100*e),s=Phaser.Color.interpolateColor(this.startTint,this.endTint,100,i);this.btnMyCreatures.tint=s},i.tintIn=function(){this.startTint="0xffffff",this.endTint="0xffea29";var t=this.game.add.tween({step:0}).to({step:100},500,"Linear");t.onUpdateCallback(this.tint.bind(this)),this.btnMyCreatures.tint=this.startTint,t.onComplete.add(this.tintOut,this),t.start()},i.tintOut=function(){this.startTint="0xffea29",this.endTint="0xffffff";var t=this.game.add.tween({step:0}).to({step:100},300,"Linear");t.onUpdateCallback(this.tint.bind(this)),this.btnMyCreatures.tint=this.startTint,t.start()},i.shutdown=function(){this.removeHudButtons();for(var e,i=c(this.buttons);!(e=i()).done;){var s=e.value;s.onInputUp.remove(this.loadPond,this),s.destroy(),s=null}this.buttons=null,this.buttonWrap&&this.buttonWrap.destroy(!0),this.buttonWrap=null,this.removeDeletePondOverlay(),this.container&&this.container.destroy(!0),this.container=null,this.creaturesUnlockedModel=null,t.prototype.shutdown.call(this)},e}(Phaser.State);e.default=m},IokY:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.button.anchor.set(.65,.5),n}return(0,n.default)(e,t),e}(s(i("VatX")).default);e.default=a},"J/Jt":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("VatX")).default);e.default=a},JROV:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e.prototype.playSFX=function(){this.game.sounds.playSFX("dragon_fly",{spriteID:"sfx_creatures"})},e}(s(i("bFzk")).default);e.default=a},JljA:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("bFzk")).default);e.default=a},Jr4d:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s){var a;a=t.call(this,e,i,s)||this;var o=s.key,r=s.animation,h=r.idle;return a.animationData=r,a.asset=a.game.make.spine(0,0,o,!0),a.asset.anchor.set(.5,1),a.addChildAt(a.asset,0),a.rootBone=a.asset.skeleton.getRootBone(),a.scaleDefault=a.rootBone.scaleX,a.sightRange=a.game.make.image(0,0,"sight_range"),a.sightRange.alpha=.3,a.sightRange.anchor.set(0,.5),a.sightRange.width=a.aiData.viewRange,a.sightRange.scale.y=a.sightRange.scale.x,a.jawPos=new Phaser.Point(0,0),a.jaws=a.asset.skeleton.findBone("anchor_jaws"),a.jaws&&(a.jdx=a.jaws.worldX,a.jdy=a.jaws.worldY,a.sightRange.x=a.jdx,a.sightRange.y=a.jdy),a.setAnim(h),a.addButton(),a.alpha=0,a.game.make.tween((0,n.default)(a)).to({alpha:1},100,"Quad.easeIn",!0),a}(0,a.default)(e,t);var i=e.prototype;return i.setAnim=function(t,e){void 0===e&&(e=!0);var i=this.animationData,s=i.idle;-1===i.available.indexOf(t)&&(t=s),this.currentAnim=this.asset.setAnimationByName(0,t,e)},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setScale=function(t){var e=-1*this.dir;this.rootBone.scaleX=-t*this.scaleDefault*e,this.rootBone.scaleY=t*this.scaleDefault,this.button.scale.x=Math.abs(this.button.scale.x)*this.dir,this.setJawsPos()},i.setRotation=function(t){this.rootBone.rotation=-t,this.button&&(this.button.angle=t),this.setJawsPos()},i.setJawsPos=function(){if(this.jawPos.x=0,this.jawPos.y=0,this.jaws){var t=-this.rootBone.rotation/180*Math.PI,e=.5*this.dir;this.jawPos.x=this.jdx*e,this.jawPos.y=-this.dir*this.jdy*e,this.jawPos=this.jawPos.rotate(0,0,t)}this.sightRange.x=this.jawPos.x,this.sightRange.y=this.jawPos.y,this.sightRange.scale.x=this.dir*Math.abs(this.sightRange.scale.x),this.sightRange.angle=-this.rootBone.rotation},i.getJawsPos=function(){if(this.jaws){var t=-this.rootBone.rotation/180*Math.PI,e=.5*this.dir;return this.jawPos.x=this.jdx*e,this.jawPos.y=-this.dir*this.jdy*e,this.jawPos=this.jawPos.rotate(0,0,t),{x:this.x+this.jawPos.x,y:this.y+this.jawPos.y}}return{x:this.x,y:this.y}},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.destroy=function(){this.sightRange.destroy(),this.asset.destroy(),t.prototype.destroy.call(this)},e}(s(i("UaYW")).default);e.default=o},"K+TP":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},KPua:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("LRV5"));function a(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var r=function(){function t(t,e){var i=e.container,s=e.items,n=e.layerHeight,o=e.environment;this.game=t,this.layerHeight=n,this.container=i,this.environment=o,this.rocks=[];for(var r,h=a(s);!(r=h()).done;){var d=r.value;this.addRock(d,!0)}}var e=t.prototype;return e.reset=function(){for(var t,e=a(this.rocks);!(t=e()).done;){t.value.destroy()}this.rocks=[]},e.addRock=function(t,e){var i=new n.default(this.game,this.environment,t,e);return this.container.add(i),this.rocks.push(i),i},e.getClosestTo=function(t,e,i){if(void 0===i&&(i=99999),this.rocks.length>0){for(var s,n=0;n<this.rocks.length;n++){var a=this.rocks[n],o=a.x-t,r=a.y-e,h=Math.sqrt(o*o+r*r);h<i&&(i=h,s=a)}return s}return null},e.destroy=function(){},t}();e.default=r},L3Wh:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e.prototype.playSFX=function(){this.game.sounds.playSFX("frog",{spriteID:"sfx_creatures"})},e}(s(i("VatX")).default);e.default=a},LClc:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("3huV")),o=s(i("ssJl")),r=function(t){function e(e){var i;return(i=t.call(this,e,{background:"bg_underwater"})||this).onAnimationComplete=new Phaser.Signal,i.tadpole=i.game.make.spine(0,0,"tadpole_loader",!0),i.tadpole.anchor.set(.5,1),i.tadpole.position.set(.5*i.game.defaultWidth,300),i.add(i.tadpole),i.tadpole.setAnimationByName(0,"loader",!0),i.addChild(i.tadpole),i.loadBar=new o.default(i.game),i.loadBar.x=.5*i.game.defaultWidth-.5*i.loadBar.width,i.loadBar.y=450,i.add(i.loadBar),i}(0,n.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.loadBar.setProgress(Math.max(0,Math.min(1,t)))},i.setProcessing=function(){this.loadBar.setProcessing()},i.animateCompleteSequence=function(t){var e=t.delay,i=void 0===e?500:e,s=t.duration,n=void 0===s?200:s;this.animateOutTween=this.game.add.tween(this).to({alpha:0},n,Phaser.Easing.Quadratic.Out,!0,i),this.animateOutTween.onComplete.add(this.handleAnimateSequenceComplete,this)},i.handleAnimateSequenceComplete=function(){this.onAnimationComplete.dispatch()},i.destroy=function(){this.onAnimationComplete.removeAll(),this.animateOutTween&&(this.animateOutTween.stop(),this.game.tweens.remove(this.animateOutTween)),this.loadBar.destroy(),this.tadpole.destroy(),this.tadpole=null,this.onAnimationComplete=null,this.animateOutTween=null,this.loadBar=null,t.prototype.destroy.call(this,!0)},e}(a.default);e.default=r},LRV5:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s,a){var o;void 0===a&&(a=!1);var r=s.x,h=void 0===r?0:r,d=s.y,l=void 0===d?0:d,u=s.id,c=s.atlas,p=void 0===c?"geology":c,m=s.key,f=s.depth,g=s.destY;return(o=t.call(this,e,h,l,p,m)||this).environment=i,o.data=s,o.id=u,o.dir=1,o.key=m,o.anchor.set(.5),o.depth=f,o.destY=g,a&&(o.data.y=o.y=o.destY),o.alpha=0,o.game.make.tween((0,n.default)(o)).to({alpha:1},100,"Quad.easeIn",!0),o}(0,a.default)(e,t);var i=e.prototype;return i.getX=function(){return this.x},i.getY=function(){return this.y},i.pause=function(){},i.unpause=function(){},i.addSnail=function(t){var e=t.position,i=this.position,s=e.x-i.x,n=e.y-i.y;t.position.set(s,n),this.addChild(t);var a=.45*this.height;t.snapToRock(0,a)},i.getRadius=function(){return.5*this.height},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e)},i.update=function(){t.prototype.update.call(this);var e=Math.min(.1,this.game.time.elapsedMS/1e3);this.y<this.destY?this.y+=200*e:this.y=this.destY,this.data.y=this.y},e}(Phaser.Image);e.default=o},M2um:function(t,e,i){"use strict";i("6WZY"),i("XEfP"),i("LBAN"),Object.defineProperty(e,"__esModule",{value:!0}),e.getPlatform=void 0;var s=/KFONWI|KFMAWI|KFSUWI|KFAUWI|KFDOWI|KFGIWI|KFFOWI|KFMEWI|KFTBWI|KFARWI|KFASWI|KFSAWA|KFSAWI|KFAPWA|KFAPWI|KFSOWI|KFJWA|KFTHWI|KFTHWA|KFJWI|KFTT|KFOT|SD4930UR|Kindle|Kindle Fire/i,n={KFONWI:{gen:10,description:"Fire HD 8, 8+ (10th Gen)"},KFMAWI:{gen:9,description:"Fire HD 10 (9th Gen)"},KFMUWI:{gen:9,description:"Fire 7 (9th Gen)"},KFKAWI:{gen:8,description:"Fire HD 8 (8th Gen)"},KFSUWI:{gen:7,description:"Fire 7 (7th Gen)"},KFAUWI:{gen:7,description:"Fire HD 10 (7th Gen)"},KFDOWI:{gen:7,description:"Fire HD 8 (7th Gen)"},KFGIWI:{gen:6,description:"Fire HD 8 (6th Gen)"},KFTBWI:{gen:5,description:"Fire HD 10 (5th Gen)"},KFMEWI:{gen:5,description:"Fire HD 8 (5th Gen)"},KFFOWI:{gen:5,description:"Fire (5th Gen)"},KFSAWI:{gen:4,description:"Fire HDX 8.9 (4th Gen)"},KFSAWA:{gen:4,description:"Fire HDX 8.9 LTE (4th Gen)"},KFASWI:{gen:4,description:"Fire HD 7 (4th Gen)"},KFARWI:{gen:4,description:"Fire HD 6 (4th Gen)"},KFAPWI:{gen:3,description:"Fire HDX 8.9 (3rd Gen)"},KFAPWA:{gen:3,description:"Fire HDX 8.9 LTE (3rd Gen)"},KFTHWI:{gen:3,description:"Fire HDX 7 (3rd Gen)"},KFTHWA:{gen:3,description:"Fire HDX 7 LTE (3rd Gen)"},KFSOWI:{gen:3,description:"Fire HD 7 (3rd Gen)"},SD4930UR:{gen:1,description:"Fire Phone"}};function a(t){return t.match(/Tablet|Android.*Pixel C|PlayBook|Hudl HT7S3|Hudl 2|Nexus 7/)?"tablet":"smartphone"}e.getPlatform=function(){return function(){var t=window.navigator.platform,e=window.navigator.userAgent,i={type:"unknown",os:"unknown",family:"unknown",version:"unknown"};if(!window.MSStream){var o=e.match(/iPhone|iPod/),r=e.match(/iPad/),h="MacIntel"===t&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;if(o||r||h){var d=navigator.userAgent.match(/Version\/(\d+)\.(\d+)\.?(\d+)?/),l=d&&d[1]?d[1]:"",u=d&&d[2]?d[2]:"",c=d&&d[3]?d[3]:"";return i.os="ios",i.family="ios",i.type=o?"smartphone":"tablet",i.majorVersion=isNaN(parseInt(l))?0:parseInt(l),i.version=l+"."+u+"."+c,i}}var p=e.match(s);if(p){var m=n[p]||{gen:0,description:"unknown"};return i.type="tablet",i.os="fire",i.family="android",i.kindle=m,i}var f=e.match(/(Android)\s+([\d.]+)/);if(f)return i.type=a(e),i.os="android",i.family="android",i.version=f[2],i;if(e.match(/webOS|hpwOS/))return i.type=a(e),i.os="webos",i.family="webos",i;if(e.match(/BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+/))return i.type=a(e),i.os="blackberry",i.family="blackberry",i;var g=e.match(/Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE/),v=e.match(/Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM/);if(g||v)return i.type="smartphone",i.os="windows",i.family="windows",i;var y=e.match(/windows/i),b=e.match(/macintosh/i),S=e.match(/cros/i);return y||b||S?(i.type="desktop",i.os=y?"windows":b?"macintosh":S?"linux":"unknown",i):i}()}},MPoQ:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("RiZp"),i("XvIX"),i("a/rO"),i("/TzG"),i("Rz/f"),i("96V2"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("Wse9"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.PARTICLES=e.CREATURE=e.PLANT=e.GEOLOGY=void 0;var n=s(i("fKPv")),a=i("lZbN"),o=i("ioi1");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var u=["itemsById"];e.GEOLOGY="geology";e.PLANT="plant";e.CREATURE="creature";e.PARTICLES="particles";var c=function(){function t(t,e){var i=e.data,s=e.layers;this.saves=t,this.layers=s,this.populationsByID=i.populationsByID,this.elementsByID=i.elementsByID,this.animationsByID=i.animationsByID,this.aiDataByID=i.aiDataByID,this.plantTypes=i.plantTypes,this.rockTypes=i.rockTypes,this.setItemEnemies(),this.totalsById={},this.itemsById={},this.layerItems=s.map((function(t){return{layerId:t.id,geology:[],plant:[],creature:[]}})),this.pending=[],this.spawnItem=null,this.load();for(var n=0,a=Object.keys(this.itemsById);n<a.length;n++){var o=a[n],r=this.itemsById[o],h=r.type,d=r.layerIndex;this.layerItems[d][h].push(o)}}var e=t.prototype;return e.insertSpawnItems=function(t,e,i){for(var s,n=d(i);!(s=n()).done;){var a=s.value,r=h({},this.elementsByID[a]);r.id=a,r.animation=h({},this.animationsByID[a]),r.aiData=h({},this.aiDataByID[a]);var l=r.type;"geology"===l&&(r.y=3e3),(0,o.zeroTotalsById)(a,l,this.totalsById),(0,o.createSpawnItems)(this,t,e,r)}},e.reset=function(){this.totalsById={},this.itemsById={},this.layerItems=this.layers.map((function(t){return{layerId:t.id,geology:[],plant:[],creature:[]}})),this.pending=[],this.spawnItem=null,this.save()},e.checkIDisPlantType=function(t){return this.plantTypes.underwater.includes(t)?"underwater":this.plantTypes.surface.includes(t)?"surface":t},e.setItemEnemies=function(){var t=this;Object.keys(this.aiDataByID).forEach((function(e){t.aiDataByID[e].enemies=t.getEaters(e)}))},e.getEaters=function(t){var e=this,i=[];return Object.keys(this.aiDataByID).forEach((function(s){e.aiDataByID[s].food.indexOf(t)>-1&&i.push(s)})),i},e.addItem=function(t,e){var i=h(h({},e),this.elementsByID[e.id]);i.animation=h({},this.animationsByID[e.id]),i.aiData=h({},this.aiDataByID[e.id]);var s=i.id,n=i.type,r=s+"_"+this.layerItems[t][n].length;this.layerItems[t][n].push(r);var d=(0,a.createPondItem)(r,t,i);this.itemsById[r]=d,this.pending.push(r),this.spawnItem=i,(0,o.updateTotalsById)(s,n,this.totalsById),this.save()},e.addSpawnItems=function(t,e){this.spawnItem&&(0,o.createSpawnItems)(this,t,e,this.spawnItem),this.spawnItem=null},e.getPending=function(){var t=this,e=this.pending.reduce((function(e,i){return e.push(t.itemsById[i]),e}),[]);return this.pending=[],e},e.getSavedPondLayerItems=function(t,e){var i=this;return this.layerItems[t][e].map((function(t){return i.itemsById[t]}))},e.spawnUnlockedItems=function(t,e,i){var s=h({id:t},this.elementsByID[t]);s.animation=h({},this.animationsByID[t]),s.aiData=h({},this.aiDataByID[t]),this.totalsById[t]=0,(0,o.createSpawnItems)(this,e,i,s),this.save()},e.load=function(){var t=this.saves.load();this.saves.deserialize(this,t,"pondItems"),this.save()},e.save=function(){var t=this.saves.serialize(this,"pondItems",u);this.saves.save({data:t})},t}();e.default=c},PFbm:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e){var i;return(i=t.call(this,e)||this).onFadeEnd=new Phaser.Signal,i.fade=i.game.add.spine(i.game.defaultWidth/2,i.game.defaultHeight/2,"transition_ring",!0),i.fade.anchor.set(.5,1),i.add(i.fade),i.fade.visible=!1,i}(0,n.default)(e,t);var i=e.prototype;return i.fadeIn=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_in",!1),this.update(),this.fade.onComplete.addOnce(this.handleFadeInEnd,this)},i.fadeOut=function(){this.game.add.existing(this),this.game.world.bringToTop(this),this.fade.visible=!0,this.fade.setAnimationByName(0,"fade_out",!1),this.update(),this.updateTransform(),this.fade.onComplete.addOnce(this.handleFadeOutEnd,this)},i.handleFadeInEnd=function(){this.onFadeEnd.dispatch()},i.handleFadeOutEnd=function(){this.fade.visible=!1,this.onFadeEnd.dispatch()},i.destroy=function(){this.fade.destroy(),this.fade=null,t.prototype.destroy.call(this)},e}(s(i("3huV")).default);e.default=a},POxg:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("XEfP"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("LClc")),o=i("zgbH"),r=i("TEuq"),h=i("SPpy"),d=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.isOnboarding,i=t.debug,s=void 0!==i&&i;this.isOnboarding=e,this.debug=s,this.loadTracker=this.game.controller.loadTracker},i.preload=function(){if(this.loadBar=new a.default(this.game),this.game.add.existing(this.loadBar),this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.audioSprites=[],this.game.controller.assetsLoaded){var t=this.game.cache.checkJSONKey("mixed_captions_onboarding");if(this.isOnboarding&&!t){this.game.controller.assetsLoaded=!1;var e=this.game.cache.getJSON("load_manifest").onboarding;this.loadPacks(e)}else this.handleLoadComplete()}else this.loadAssets()},i.handleFileStart=function(t,e,i){this.debug&&r.Debugger.log("log","EnvironmentLoader.handleFileStart "+t+", "+e+", "+i),-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},i.handleLoadStart=function(){this.loadedAssets=(0,h.getGameFileLoadList)(this.game,this.debug)},i.loadAssets=function(){var t=this.game.cache.getJSON("load_manifest").environment;this.loadPacks(t);var e=this.game.cache.getJSON("load_manifest").themes;this.loadPacks(e);var i=this.game.cache.getJSON("load_manifest").characters;if(this.loadPacks(i),this.isOnboarding){var s=this.game.cache.getJSON("load_manifest").onboarding;this.loadPacks(s)}},i.loadPacks=function(t){for(var e=t.path,i=t.packs,s=0;s<i.length;s++){var n=i[s];this.debug&&r.Debugger.log("log","loadPack "+e+" : "+n.file),this.game.load.pack(n.key,e+n.file,null,this)}},i.loadUpdate=function(){this.loadBar.setProgress(this.game.load.progress/100)},i.create=function(){var t=this;if(this.loadBar.setProgress(1),!this.game.controller.assetsLoaded){for(var e=0;e<this.audioSprites.length;e++)this.game.sounds.addAudioSprite({id:this.audioSprites[e]});this.game.sounds.decode(this.audioSprites,this.handleLoadComplete,this),this.decodeSoundsCallback=this.game.time.events.add(o.DECODE_TIMEOUT_SPEED,(function(){t.decodeSoundsCallback=null,t.loadBar&&t.loadBar.setProcessing()}))}},i.handleLoadComplete=function(){this.game.controller.assetsLoaded=!0,this.decodeSoundsCallback&&(this.game.time.events.remove(this.decodeSoundsCallback),this.decodeSoundsCallback=null),this.loadBar.onAnimationComplete.add(this.handleLoadAnimationComplete,this),this.loadBar.animateCompleteSequence({delay:100,duration:200})},i.handleLoadAnimationComplete=function(){this.game.controller.startSim()},i.shutdown=function(){this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.loadedAssets=null,this.audioSprites=null},e}(Phaser.State);e.default=d},PsHK:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).angles=[-Math.PI/4,Math.PI/4],n.destAng=0,n.scaleDefault=.5*n.rootBone.scaleX,n.state=o.STATE_SWIM_TO_DEST,n.setAnim("swim"),n}(0,n.default)(e,t);var i=e.prototype;return i.getX=function(){return this.x},i.getY=function(){return this.y},i.setPosition=function(e,i){switch(t.prototype.setPosition.call(this,e,i),this.surfaceType=o.SURFACE_PLANT,Math.random()<.3&&(this.surfaceType=Math.random()<.5?o.SURFACE_GROUND:o.SURFACE_ROCK),this.surfaceType){case o.SURFACE_ROCK:this.ang=Phaser.Math.random(this.angles[0],this.angles[1]),this.rock=this.environment.getClosestRockTo(this.x,this.y),this.depth=this.rock.depth-1,this.radius=this.rock.getRadius();break;case o.SURFACE_PLANT:var s=this.environment.getClosestPlantTo(this.x,this.y),n=s.getAnchorForY(this.y,!0);this.plant={item:s,anchor:n},this.depth=s.depth-1,this.dx=-50*this.dir,this.dy=100;break;case o.SURFACE_GROUND:this.isOnGround=!1,this.depth=2}},i.setSittingAngle=function(){switch(this.destAng=-this.rootBone.rotation/180*Math.PI,this.surfaceType){case o.SURFACE_ROCK:this.travelDir=this.ang+(1===this.dir?0:Math.PI);break;case o.SURFACE_PLANT:this.ang=.5*-Math.PI*this.dir,this.travelDir=.5*-Math.PI;break;case o.SURFACE_GROUND:this.ang=0,this.travelDir=1===this.dir?0:Math.PI}},i.setDestPoint=function(){switch(this.setSpeed(),this.surfaceType){case o.SURFACE_ROCK:this.destPoint.x=this.rock.x+this.radius*Math.sin(this.ang),this.destPoint.y=this.rock.y-this.radius*Math.cos(this.ang);break;case o.SURFACE_PLANT:var t=this.plant.item.getAnchorPos(this.plant.anchor);this.dx=-50*(t.x>this.x?1:-1),this.destPoint.x=t.x,this.destPoint.y=t.y+this.dy;break;case o.SURFACE_GROUND:this.destPoint.x=this.x+Phaser.Math.between(100,200)*(Math.random()<.5?-1:1),this.destPoint.y=3200}this.dir=this.destPoint.x>this.x?1:-1},i.isFoodInRange=function(t){var e=this.getJawsPos(),i=t.x,s=t.y,n=i-e.x,a=s-e.y,o=Math.sqrt(n*n+a*a),r=this.aiData.viewRange;if(o<=r&&this.dir*n>0){var h=.5*this.aiData.fov,d=180*this.travelDir/Math.PI%360,l=180*Math.atan2(a,n)/Math.PI,u=Phaser.Math.getShortestAngle(d,l);if(Math.abs(u)<h)return{inRange:!0,dist:o,value:1-o/r,anchor:null}}return null},i.setEvadeDestPoint=function(t){void 0===t&&(t=this.targetEnemy.item);var e=t.y-this.y;this.dir=Math.random()<.5?-1:1;var i=this.dir*Phaser.Math.between(300,400),s=(e>0||this.surfaceType===o.SURFACE_GROUND?-1:1)*Phaser.Math.between(100,150);this.destPoint.x=this.x+i,this.destPoint.y=this.y+s},i.stepIdle=function(){this.findFoodInRange(),this.findEnemiesInRange(),this.targetEnemy?(this.state=o.STATE_EVADE,this.setSpeed(),this.setAnim("swim"),this.setEvadeDestPoint()):this.isHungryToHunt()&&this.targetFood&&(this.state=o.STATE_HUNT,this.huntTime=.5,this.setSpeed(),this.setAnim("hunt"))},i.stepFeed=function(t){this.feedTime-=t,this.feedTime<0&&(this.state=o.STATE_IDLE,this.setAnim("idle"))},i.stepHunt=function(t){this.huntTime-=t,this.targetFood&&this.targetFood.item&&this.huntTime<0&&(this.state=o.STATE_FEED,this.feedTime=1.6,this.setSpeed(),this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1,this.setAnim("feed"))},i.stepSwimDoDest=function(){this.findEnemiesInRange(),this.targetEnemy&&(this.state=o.STATE_EVADE,this.setSpeed(),this.setAnim("swim"),this.setEvadeDestPoint())},i.move=function(t){if(this.state===o.STATE_IDLE||this.state===o.STATE_FEED&&this.surfaceType===o.SURFACE_PLANT){switch(this.surfaceType){case o.SURFACE_ROCK:1===this.dir&&this.ang>this.angles[1]?this.dir=-1:-1===this.dir&&this.ang<this.angles[0]&&(this.dir=1),this.x=this.rock.x+this.radius*Math.sin(this.ang),this.y=this.rock.y-this.radius*Math.cos(this.ang);break;case o.SURFACE_PLANT:var e=this.plant.item.getAnchorPos(this.plant.anchor);this.x=e.x,this.y=e.y+this.dy;break;case o.SURFACE_GROUND:this.isOnGround?(this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t),this.x+=this.dir*this.speed*t,this.x<500?this.dir=1:this.x>5e3&&(this.dir=-1)):(this.y+=100*t,this.y>=3200&&(this.isOnGround=!0))}this.destAng+=1*(this.ang-this.destAng)*t,this.setRotation(this.destAng/Math.PI*180)}else if(this.state===o.STATE_EVADE||this.state===o.STATE_SWIM_TO_DEST){var i=this.destPoint.x-this.x,s=this.destPoint.y-this.y,n=Math.atan2(s,i);this.travelDir<0&&n>2.5&&(n-=2*Math.PI),this.travelDir>0&&n<-2.5&&(n+=2*Math.PI),this.travelDir+=(n-this.travelDir)*this.rotationSpeed*t,this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t);var a=this.speed*Math.cos(this.travelDir)*t,r=this.speed*Math.sin(this.travelDir)*t;this.x+=a,this.y+=r,this.applyMovementRotation(),this.checkEndOfMovement()}},i.checkEndOfMovement=function(){var t=this.destPoint.x-this.x,e=this.destPoint.y-this.y,i=Math.sqrt(t*t+e*e),s=this.speed;this.state===o.STATE_SWIM_TO_DEST&&(s=10),i<s&&this.onReachDestPoint()},i.onReachDestPoint=function(){switch(this.state){case o.STATE_EVADE:this.state=o.STATE_SWIM_TO_DEST,this.setPosition(this.x,this.y),this.setDestPoint(),this.setAnim("swim");break;case o.STATE_SWIM_TO_DEST:this.state=o.STATE_IDLE,this.setAnim("idle"),this.setSittingAngle()}},e}(a.default);e.default=r},RZI6:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("/TzG"),i("Rz/f"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.NEW_SAVE=e.ONBOARDING_SAVE=void 0;var n=s(i("fKPv")),a=i("TEuq");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}e.ONBOARDING_SAVE="ONBOARDING_SAVE";e.NEW_SAVE="NEW_SAVE";var h=function(){function t(t){var e=t.storage,i=t.lifecycles;this.onReady=new Phaser.Signal,this.storage=e,this.lifecyclesDefaults=Object.keys(i).reduce((function(t,e){return t[e]=!1,t}),{})}var e=t.prototype;return e.loadStorage=function(){this.storage.onRead.addOnce(this.handleDataRead,this),this.storage.loadData()},e.handleDataRead=function(){this.saveID=null,this.saves=this.loadData("saves",{}),this.createSaveCount(),this.createLifecycle(),this.createMyCreaturesPrompt(),this.onReady.dispatch()},e.addSave=function(t,e){this.saves[t]=e,this.saveData()},e.createSaveID=function(){return this.incrementSaveCount(),(new Date).getTime()},e.setSaveID=function(t){this.saveID="NEW_SAVE"===t?this.createSaveID():t},e.getSaveID=function(){return this.saveID},e.loadData=function(t,e){void 0===e&&(e={});var i=this.storage.getGameData()[t];return i?JSON.parse(i):e},e.createMyCreaturesPrompt=function(){this.myCreaturesPrompt=this.loadData("mycreaturesvo",!1);var t=JSON.stringify(this.myCreaturesPrompt);this.storage.setGameData("mycreaturesvo",t)},e.setMyCreaturesPromptComplete=function(){this.myCreaturesPrompt=!0,this.storage.setGameData("mycreaturesvo",JSON.stringify(this.myCreaturesPrompt))},e.hasPromptedMyCreatures=function(){return this.myCreaturesPrompt},e.createLifecycle=function(){this.lifecycles=this.loadData("lifecycles",this.lifecyclesDefaults);var t=JSON.stringify(this.lifecycles);this.storage.setGameData("lifecycles",t)},e.saveLifecycles=function(t){var e=JSON.stringify(t);this.storage.setGameData("lifecycles",e)},e.getSavedLifecycles=function(){return this.lifecycles},e.createSaveCount=function(){this.saveCount=this.loadData("savecount",0);var t=JSON.stringify(this.saveCount);this.storage.setGameData("savecount",t)},e.incrementSaveCount=function(){this.saveCount++;var t=JSON.stringify(this.saveCount);this.storage.setGameData("savecount",t)},e.create=function(t){var e=t.saveID;if(this.hasSave(e))a.Debugger.log("warn","Saves.create "+e+" exists");else{var i=this.saveCount;this.saves[e]={id:e,version:23,saveNumber:i},a.Debugger.log("log","Saves.create "+e+" #"+i+" version 23")}return this.saveData(),this.saves[e]},e.load=function(t){var e=t||this.saveID;if(this.hasSave(e))return 23!==this.saves[e].version&&window.confirm("Saved data is incompatible due to development changes.\n\nClick OK to delete old saved data and restart")&&(this.deleteSave(e),this.saveID=null,location.reload()),this.saves[e]},e.save=function(t){var e=t.id,i=t.data,s=e||this.saveID;if(s){var n=r(r({},this.saves[s]||this.create({saveID:s})),i);this.saves[s]=n,this.saveData()}},e.renameSave=function(){if(this.saveID){var t=this.createSaveID();this.saves[t]=r({},this.saves[this.saveID]),this.saves[t].id=t,delete this.saves[this.saveID],this.setSaveID(t),this.saveData()}},e.deleteSaves=function(){if(this.playerHasSaves()){for(var t=0,e=Object.keys(this.saves);t<e.length;t++){var i=e[t];this.deleteSave(i)}return!0}return!1},e.deleteSave=function(t){var e=t||this.saveID;this.hasSave(e)?(delete this.saves[e],this.saveData(),a.Debugger.log("log","Saves.delete slot "+e)):a.Debugger.log("warn","Saves.delete slot "+e+" : doesn't exist")},e.hasSave=function(t){return this.saves&&this.saves[t]||!1},e.playerHasSaves=function(){return!!this.saves&&Object.keys(this.saves).length>0},e.getSaves=function(){var t=this;return Object.keys(this.saves).map((function(e){return t.saves[e]}))},e.getSaveNumber=function(){return this.hasSave(this.saveID)?this.saves[this.saveID].saveNumber:this.saveCount},e.getSavesCount=function(){return this.saves?Object.keys(this.saves).length:0},e.hasColourThemeId=function(t){var e=t||this.saveID;return this.hasSave(e)&&this.saves[e].colourThemeId||!1},e.setColourThemeId=function(t){this.save({data:{colourThemeId:t}})},e.getColourThemeId=function(t){var e=t||this.saveID;return this.hasSave(e)?this.saves[e].colourThemeId:"green"},e.saveData=function(){var t=JSON.stringify(this.saves);this.storage.setGameData("saves",t)},e.deserialize=function(t,e,i){var s=e&&e[i]||null;if(s)for(var n=0,a=Object.keys(s);n<a.length;n++){var o=a[n];null===t[o]&&void 0===t[o]||(t[o]=s[o])}},e.serialize=function(t,e,i){var s={};return s[e]=i.reduce((function(e,i){return e[i]=t[i],e}),{}),s},t}();e.default=h},RmX3:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s){var a,o=s.id,r=s.key,h=s.plantType,d=s.scale,l=void 0===d?.3:d;return(a=t.call(this,e)||this).id=o,a.dir=1,a.key=r,a.environment=i,a.data=s,a.depth=101,a.plantType=h,a.asset=a.game.make.spine(0,0,r,!0),a.asset.anchor.set(.5,1),a.addChild(a.asset),a.asset.setAnimationByName(0,"idle",!0),a.rootBone=a.asset.skeleton.getRootBone(),a.scaleDefault=a.rootBone.scaleX*l,a.alpha=0,a.game.make.tween((0,n.default)(a)).to({alpha:1},100,"Quad.easeIn",!0),a.rootBone.rotation=15,a.update(),a.asset.update(),a.asset.updateTransform(),a}(0,a.default)(e,t);var i=e.prototype;return i.pause=function(){},i.unpause=function(){},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.setPosition=function(t,e){this.x=t,this.y=e},i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault},i.destroy=function(){this.asset.destroy()},e}(Phaser.Group);e.default=o},SNUy:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.DIRECTION=void 0;var n=s(i("C9uT")),a=s(i("86MP"));e.DIRECTION={LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN"};var o={LEFT:"btn_pond_left",RIGHT:"btn_pond_right",UP:"btn_pond_up",DOWN:"btn_pond_down"},r=function(t){function e(e,i){var s,n=i.direction;(s=t.call(this,e)||this).direction=n;var a=o[n],r=a+"_icon";return s.back=s.game.make.image(0,0,"ui_buttons",a),s.back.anchor.set(.5),s.back.blendMode=PIXI.blendModes.MULTIPLY,s.addChild(s.back),s.icon=s.game.make.image(0,0,"ui_buttons",r),s.icon.anchor.set(.5),s.addChild(s.icon),s.hitArea=new Phaser.Rectangle(.5*-s.back.width,.5*-s.back.height,s.back.width,s.back.height),s.inputEnabled=!0,s.input.useHandCursor=!0,s.onInputDown=new Phaser.Signal,s.enable(),s}(0,a.default)(e,t);var i=e.prototype;return i.enable=function(){this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputOver.add(this.onOver,this),this.events.onInputOut.add(this.onOut,this)},i.disable=function(){this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputOver.remove(this.onOver,this),this.events.onInputOut.remove(this.onOut,this)},i.handleInputDown=function(){this.game.sounds.playSFX("arrow",{spriteID:"sfx_general"}),this.onInputDown.dispatch()},i.onOver=function(){},i.onOut=function(){},i.destroy=function(){this.onInputDown.removeAll(),this.events.onInputDown.removeAll(),this.events.onInputOver.removeAll(),this.events.onInputOut.removeAll(),this.back.destroy(),this.icon.destroy()},(0,n.default)(e,[{key:"width",get:function(){return Math.abs(this.back.width)}},{key:"height",get:function(){return Math.abs(this.back.height)}}]),e}(Phaser.Sprite);e.default=r},SPpy:function(t,e,i){"use strict";i("j3Ef"),i("7EEF"),i("/TzG"),i("3Ipg"),i("XEfP"),i("ocEJ"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.getGameFileLoadList=e.unloadAssetPack=e.unloadFile=void 0;var s=i("Bx3X"),n=i("TEuq"),a=function(t,e){switch(e.type){case"image":t.cache.checkImageKey(e.key)&&t.cache.removeImage(e.key,!0);break;case"text":t.cache.checkTextKey(e.key)&&t.cache.removeText(e.key);break;case"json":t.cache.checkJSONKey(e.key)&&t.cache.removeJSON(e.key);break;case"xml":t.cache.checkXMLKey(e.key)&&t.cache.removeXML(e.key);break;case"binary":t.cache.checkBinaryKey(e.key)&&t.cache.removeBinary(e.key);break;case"spritesheet":t.cache.checkKey(e.key)&&t.cache.removeSpriteSheet(e.key);break;case"video":t.cache.checkVideoKey(e.key)&&t.cache.removeVideo(e.key);break;case"tilemap":t.cache.checkTilemapKey(e.key)&&t.cache.removeTilemap(e.key);break;case"physics":t.cache.checkPhysicsKey(e.key)&&t.cache.removePhysics(e.key);break;case"bitmapFont":t.cache.checkBitmapFontKey(e.key)&&t.cache.removeBitmapFont(e.key);break;case"atlasJSONArray":case"atlasJSONHash":case"atlasXML":case"atlas":case"textureatlas":t.cache.removeTextureAtlas(e.key);break;case"audiosprite":t.sounds.removeAudioSprite({id:e.key});break;case"audio":t.sounds.removeSound(e.key,e.key),t.sounds.removeAudioSprite({id:e.key})}};e.unloadFile=a;e.unloadAssetPack=function(t,e){Object.keys(e).forEach((function(i){e[i].forEach((function(e){a(t,e)}))}))};e.getGameFileLoadList=function(t,e){return t.deviceMetric.category===s.PERFORMANCE_CATEGORY.LOW_END?t.load._fileList.filter((function(t){if("audio"===t.type){var i=t.url.map((function(t){return t.replace("64","32")}));t.url=i,e&&n.Debugger.log("log","Adjust audio path : "+t.url)}return"packfile"!==t.type})):t.load._fileList.filter((function(t){return"packfile"!==t.type}))}},TDaU:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.button.anchor.set(.6,.5),n}return(0,n.default)(e,t),e}(s(i("VatX")).default);e.default=a},TSJq:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("zgbH"),n=function(){function t(t){this.game=t}var e=t.prototype;return e.getBaseDirectory=function(){return s.PATH_BASE},e.resolveRelatveUrl=function(t){return this.getBaseDirectory()+t},e.getAssetsDirectory=function(t){return t?this.resolveRelatveUrl(s.PATH_ASSETS+t):this.resolveRelatveUrl(s.PATH_ASSETS)},e.getGameAssetsDirectory=function(t,e){return e?this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/"+e):this.resolveRelatveUrl(s.PATH_ASSETS+"games/"+t+"/")},e.getFontsDirectory=function(t){return this.getAssetsDirectory("fonts/"+t)},e.getLocationBackground=function(t){return"locations/"+t+"/background.jpg"},e.getLocationCreatures=function(t){return"spritesheets/"+t+"/creatures"},e.getCopyXML=function(t){return"locale/"+t+".xml"},e.getResultImage=function(t){return"ui/images/result_"+t+".png"},t}();e.default=n},TqQQ:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=i("zgbH"),r=s(i("dD3M")),h=function(t){function e(e,i,s){var a;return(a=t.call(this,e)||this).saveId=i,a.onDelete=new Phaser.Signal,a.onCancel=new Phaser.Signal,a.backing=a.game.make.graphics(),a.backing.beginFill(0,.4),a.backing.drawRect(0,0,Math.max(a.game.width,a.game.defaultWidth),a.game.defaultHeight),a.backing.inputEnabled=!0,a.add(a.backing),a.backing.x=.5*-a.backing.width,a.createOverlay(s),a.alpha=0,a.game.make.tween((0,n.default)(a)).to({alpha:1},100,"Quad.easeIn",!0),a}(0,a.default)(e,t);var i=e.prototype;return i.createOverlay=function(t){this.panel=this.game.make.image(0,0,"ui_various","panel_pond_delete"),this.add(this.panel),this.panel.x=.5*-this.panel.width,this.panel.y=.5*(this.game.defaultHeight-this.panel.height),this.pondImage=this.game.make.image(0,0,"ui_buttons","btn_pondimage_"+t),this.pondImage.anchor.set(0,.5),this.add(this.pondImage),this.pondImage.x=this.panel.x+40,this.pondImage.y=this.panel.y+.5*this.panel.height,this.deleteIcon=this.game.make.image(0,0,"ui_icons","icon_delete"),this.deleteIcon.anchor.set(.5),this.add(this.deleteIcon),this.deleteIcon.x=this.pondImage.x+.5*this.pondImage.width,this.deleteIcon.y=this.pondImage.y;var e={font:"48px "+o.FONT_REGULAR,fill:"#000000",align:"left"};this.description=this.game.make.text(0,50,"",e),this.description.anchor.set(0,1),this.add(this.description),this.description.x=this.pondImage.x+this.pondImage.width,this.description.y=this.panel.y+.5*this.panel.height-30,this.description.text="Delete pond?",this.btnConfirm=new r.default({game:this.game,up:"btn_confirm",over:"btn_confirm_over"}),this.btnConfirm.position.set(this.description.x+.5*this.description.width,this.description.y+.5*this.btnConfirm.height+10),this.btnConfirm.onInputUp.addOnce(this.onHandleConfirm,this),this.add(this.btnConfirm),this.btnCancel=new r.default({game:this.game,up:"btn_close",over:"btn_close_over"}),this.btnCancel.position.set(this.panel.x+this.panel.width-50,this.panel.y+30),this.btnCancel.onInputUp.addOnce(this.onHandleCancel,this),this.add(this.btnCancel)},i.onHandleConfirm=function(){this.onDelete.dispatch(this.saveId)},i.onHandleCancel=function(){this.onCancel.dispatch()},i.destroy=function(e,i){void 0===e&&(e=!0),this.onDelete.removeAll(),this.onDelete=null,this.onCancel.removeAll(),this.onCancel=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=h},UYjU:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("dD3M")),o=i("RZI6"),r=i("hDA+"),h=function(t){function e(e){var i,s=e.game,n=e.x,a=void 0===n?0:n,r=e.y,h=void 0===r?0:r,d=e.up,l=e.over,u=e.atlas,c=void 0===u?"ui_buttons":u,p=e.saveId,m=e.hasDelete,f=void 0!==m&&m,g=e.colourThemeId,v=e.sfxID,y=e.vo;return(i=t.call(this,{game:s,x:a,y:h,up:d,over:l,atlas:c,sfxID:v,vo:y})||this).saveId=p||o.NEW_SAVE,i.colourThemeId=g,f&&(i.createImage(c,g),i.createDelete()),i}(0,n.default)(e,t);var i=e.prototype;return i.createImage=function(t,e){this.pondImage=this.game.make.image(0,0,t,"btn_pondimage_"+e),this.pondImage.anchor.set(.5),this.addChild(this.pondImage)},i.createDelete=function(){this.onDelete=new Phaser.Signal,this.btnDelete=new a.default({game:this.game,up:"btn_delete",over:"btn_delete_over"}),this.btnDelete.x=this.x+.3*this.width,this.btnDelete.y=this.y-.3*this.height,this.btnDelete.onInputOver.add(this.deletePondHover,this),this.btnDelete.onInputUp.add(this.deletePond,this),this.addChild(this.btnDelete)},i.deletePondHover=function(){(0,r.playAudioAndCaption)(this.game,{spriteID:"vo_ui",id:"erase"})},i.deletePond=function(){this.onDelete.dispatch({saveId:this.saveId,colourThemeId:this.colourThemeId})},i.destroy=function(e){void 0===e&&(e=!0),this.pondImage&&(this.pondImage.destroy(),this.pondImage=null),this.btnDelete&&(this.onDelete.removeAll(),this.onDelete=null,this.btnDelete.onInputOver.removeAll(),this.btnDelete.onInputOut.removeAll(),this.btnDelete.destroy(),this.btnDelete=null),t.prototype.destroy.call(this,e)},e}(a.default);e.default=h},UaYW:function(t,e,i){"use strict";var s=i("R6lU");i("XvIX"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.SURFACE_GROUND=e.SURFACE_PLANT=e.SURFACE_ROCK=e.STATE_SWIM_TO_DEST=e.STATE_FEED=e.STATE_EVADE=e.STATE_HUNT=e.STATE_IDLE=void 0;var n=s(i("86MP"));e.STATE_IDLE=0;e.STATE_HUNT=1;e.STATE_EVADE=2;e.STATE_FEED=3;e.STATE_SWIM_TO_DEST=4;e.SURFACE_ROCK=0;e.SURFACE_PLANT=1;e.SURFACE_GROUND=2;var a=function(t){function e(e,i,s){var n;n=t.call(this,e)||this;var a=s.id,o=s.depth,r=s.isStatic,h=s.key,d=s.atlas,l=s.animation,u=s.aiData;return n.data=s,n.key=h,n.atlas=d,n.id=a,n.isStatic=r,n.animation=l,n.aiData=u,n.depth=o,n.paused=!1,n.environment=i,n.weight=u.weight,n.hunger=s.hunger||0,n.hungerRatio=n.weight/200,n.food=[],n.enemies=[],n.targetFood=null,n.targetEnemy=null,n.camouflaged=!1,n.state=0,n.onEat=new Phaser.Signal,n.dir=Math.random()<.5?-1:1,n.destPoint=new Phaser.Point(0,0),n.speed=0,n.speedDest=n.aiData.speedIdle,n.travelDir=0,n.rotationSpeed=1.5,n}(0,n.default)(e,t);var i=e.prototype;return i.addButton=function(t){void 0===t&&(t=this.asset),this.button=this.game.make.button(0,0,"sight_range"),this.button.width=.5*t.width,this.button.height=.5*t.height,this.button.alpha=0,this.button.anchor.set(.5,.5),this.addChild(this.button),this.button.inputEnabled=!0,this.button.events.onInputDown.add(this.handleInputDown,this),this.button.input.useHandCursor=!0},i.handleInputDown=function(){if(0===this.state){this.state=2,this.setSpeed(),this.setAnim("evade"),this.playSFX();var t=this.y;this.y<this.movementArea.y+200?t-=50:this.y>this.movementArea.height-200?t+=50:t+=50*(Math.random()<.5?-1:1),this.setEvadeDestPoint({y:t})}},i.playSFX=function(){},i.getX=function(){return this.x},i.getY=function(){return this.y},i.setAnim=function(t){},i.pause=function(){this.paused=!0,this.pauseAnim()},i.unpause=function(){this.paused=!1,this.unpauseAnim()},i.pauseAnim=function(){},i.unpauseAnim=function(){},i.appearSmooth=function(){this.alpha=0,this.game.add.tween(this).to({alpha:1},1e3,null,!0)},i.setSpeed=function(){switch(this.state){case 0:this.speedDest=this.aiData.speedIdle,this.rotationSpeed=1.5;break;case 3:this.speedDest=0;break;case 1:this.speedDest=this.aiData.speedIdle*this.aiData.speedHunt,this.rotationSpeed=5;break;case 2:this.speedDest=this.aiData.speedIdle*this.aiData.speedEvade,this.rotationSpeed=5;break;case 4:this.speedDest=.5*this.aiData.speedIdle,this.rotationSpeed=5}if(this.speedDest>0){var t=.15*this.speedDest;this.speedDest=Phaser.Math.random(this.speedDest-t,this.speedDest+t)}},i.setPosition=function(t,e){this.x=t,this.y=e},i.setScale=function(t){this.scale.set(t)},i.setRotation=function(t){this.angle=t},i.getDisplayObject=function(){return this},i.setMovementArea=function(t,e,i,s){this.movementArea=new Phaser.Rectangle(t,e,i,s),this.setDestPoint()},i.clampPosition=function(){this.destPoint.y=Phaser.Math.clamp(this.destPoint.y,this.environment.surfaceY+50,this.environment.groundY),this.y=Phaser.Math.clamp(this.y,this.environment.surfaceY+50,this.environment.groundY)},i.setDestPoint=function(){this.x<this.movementArea.x+1e3?this.dir=1:this.x>this.movementArea.width-1e3?this.dir=-1:this.dir=Math.random()<.5?-1:1,this.destPoint.x=this.x+this.dir*(400+400*Math.random());var t=this.movementArea.y+100,e=this.movementArea.y+this.movementArea.height-100;this.destPoint.y=t+Math.random()*(e-t),this.setSpeed()},i.findFoodInRange=function(){var t=this.environment.allItems,e=t.creatures,i=t.plants;this.food=[],this.closestFoodInd=-1,this.targetFood=null,this.findCreaturesInRange(e),this.findPlantsInRange(i)},i.findCreaturesInRange=function(t){for(var e=t.length,i=0;i<e;i++){var s=t[i];if(this.aiData.food.indexOf(s.id)>-1){var n=this.isFoodInRange(s,!1);n&&(this.food.push({item:s,value:n.value,dist:n.dist,isPlant:!1}),(-1===this.closestFoodInd||n.dist<=this.food[this.closestFoodInd].dist)&&(this.closestFoodInd=this.food.length-1,this.targetFood=this.food[this.closestFoodInd]))}}},i.findPlantsInRange=function(t){for(var e=t.length,i=0;i<e;i++){var s=t[i];if(this.aiData.food.indexOf(s.id)>-1){var n=this.isFoodInRange(s,!0);n&&(this.food.push({item:s,value:n.value,dist:n.dist,isPlant:!0,anchor:n.anchor}),(-1===this.closestFoodInd||n.dist<=this.food[this.closestFoodInd].dist)&&(this.closestFoodInd=this.food.length-1,this.targetFood=this.food[this.closestFoodInd]))}}},i.isFoodInRange=function(t,e){var i=null,s=this.getJawsPos(),n=t.x-s.x,a=t.y-s.y;if(e){if(!(i=t.getAnchorForY(this.y)))return null;a=t.getAnchorPos(i).y-this.y}var o=Math.sqrt(n*n+a*a),r=this.aiData.viewRange;if(o<=this.aiData.eatRange&&n*this.dir>0)return{inRange:!0,dist:o,value:1-o/r,anchor:i};if(o<=r&&n*this.dir>0){var h=.5*this.aiData.fov,d=180*this.travelDir/Math.PI%360,l=180*Math.atan2(a,n)/Math.PI,u=Phaser.Math.getShortestAngle(d,l);if(Math.abs(u)<h)return{inRange:!0,dist:o,value:1-o/r,anchor:i}}return null},i.findEnemiesInRange=function(){var t=this.environment.allItems.creatures;this.enemies=[],this.closestEnemyInd=-1,this.targetEnemy=null;for(var e=t.length,i=0;i<e;i++){var s=t[i];if(!s.camouflaged&&this.aiData.enemies.indexOf(s.id)>-1){var n=s.x-this.x,a=s.y-this.y,o=Math.sqrt(n*n+a*a),r=this.aiData.proximityRange;o<=r&&(this.enemies.push({item:s,value:1-o/r,dist:o}),(-1===this.closestEnemyInd||o<=this.enemies[this.closestEnemyInd].dist)&&(this.closestEnemyInd=this.enemies.length-1,this.targetEnemy=this.enemies[this.closestEnemyInd]))}}},i.isHungryToHunt=function(){var t=1-this.hunger/(.3*this.weight);return t<.33||t<.66&&Math.random()<.2},i.setEvadeDestPoint=function(t){void 0===t&&(t=this.targetEnemy.item);var e=t.y-this.y;this.dir=Math.random()<.5?-1:1;var i=this.dir*Phaser.Math.between(200,300),s=(e>20?-1:1)*Phaser.Math.between(100,150);this.destPoint.x=this.x+i,this.destPoint.y=this.y+s},i.stepIdle=function(){this.findFoodInRange(),this.findEnemiesInRange(),this.targetEnemy?(this.state=2,this.setSpeed(),this.setAnim("evade"),this.setEvadeDestPoint()):this.isHungryToHunt()&&this.targetFood&&(this.state=1,this.targetFood.isPlant?this.huntTime=10:this.huntTime=Phaser.Math.random(2,4),this.setSpeed(),this.setAnim("hunt"))},i.stepFeed=function(t){this.feedTime-=t,this.feedTime<0&&(this.state=0,this.setDestPoint(),this.setAnim("idle"))},i.stepHunt=function(t){if(this.huntTime-=t,this.targetFood&&this.targetFood.item&&this.huntTime>0&&this.isFoodInRange(this.targetFood.item,this.targetFood.isPlant)){if(this.targetFood.isPlant){var e=this.targetFood.item.getAnchorPos(this.targetFood.anchor);this.destPoint.x=e.x,this.destPoint.y=e.y}else this.destPoint.x=this.targetFood.item.x,this.destPoint.y=this.targetFood.item.y;var i=this.destPoint.x-this.getJawsPos().x;this.dir=i>0?1:-1}else this.targetFood=null,this.state=0,this.setDestPoint(),this.setAnim("idle")},i.stepEvade=function(){},i.stepSwimDoDest=function(){},i.step=function(t){if(!this.paused){switch(this.hunger+=this.hungerRatio*t,this.hunger=Math.min(this.hunger,.3*this.weight),this.data.hunger=this.hunger,this._debugRenderHunger(),this.state){case 0:this.stepIdle(t);break;case 3:this.stepFeed(t);break;case 1:this.stepHunt(t);break;case 2:this.stepEvade(t);break;case 4:this.stepSwimDoDest(t)}this.move(t),this.clampPosition()}},i.move=function(t){if(3!==this.state){var e=this.destPoint.x-this.x,i=this.destPoint.y-this.y,s=Math.atan2(i,e);this.travelDir<0&&s>2.5&&(s-=2*Math.PI),this.travelDir>0&&s<-2.5&&(s+=2*Math.PI),this.travelDir+=(s-this.travelDir)*this.rotationSpeed*t,this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t);var n=this.speed*Math.cos(this.travelDir)*t,a=this.speed*Math.sin(this.travelDir)*t;this.x+=n,this.y+=a,this.applyMovementRotation(),this.checkEndOfMovement()}},i.applyMovementRotation=function(){var t;1===this.dir?t=180*this.travelDir*.5/Math.PI:-1===this.dir&&(t=-(t=this.travelDir>0?.5*(Math.PI-this.travelDir)*180/Math.PI:.5*(-Math.PI-this.travelDir)*180/Math.PI)),t=Phaser.Math.clamp(t,-20,20),this.setRotation(t)},i.checkEndOfMovement=function(){var t,e;if(1===this.state){var i=this.getJawsPos(),s=this.destPoint.x-i.x,n=this.destPoint.y-i.y;e=Math.sqrt(s*s+n*n),t=this.aiData.eatRange}else{var a=this.destPoint.x-this.x,o=this.destPoint.y-this.y;e=Math.sqrt(a*a+o*o),t=.2*this.speed}e<t&&this.onReachDestPoint()},i.onReachDestPoint=function(){switch(this.state){case 0:this.setDestPoint();break;case 1:this.state=3,this.feedTime=this.targetFood.isPlant?3:1,this.setSpeed(),this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1,this.setAnim("feed");break;case 2:this.state=0,this.setDestPoint(),this.setAnim("idle")}},i.getJawsPos=function(){return{x:this.x,y:this.y}},i.eat=function(){this.onEat.dispatch(this),this.destroy()},i.destroy=function(){t.prototype.destroy.call(this)},i._debugAddHungerMeter=function(){},i._debugRenderHunger=function(){},e}(Phaser.Group);e.default=a},VHS3:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s){var a,o=s.id,r=s.key,h=s.animation,d=s.plantType,l=s.depth,u=s.scale,c=s.aiData,p=s.vertical,m=h.idle;return(a=t.call(this,e)||this).id=o,a.vertical=p,a.dir=1,a.key=r,a.environment=i,a.aiData=c,a.weight=a.aiData.weight,a.data=s,a.depth=l,a.onEat=new Phaser.Signal,a.plantType=d,a.asset=a.game.make.spine(0,0,r,!0),a.asset.anchor.set(.5,1),a.addChild(a.asset),a.asset.setAnimationByName(0,m,!0),a.rootBone=a.asset.skeleton.getRootBone(),a.scaleDefault=a.rootBone.scaleX*u,a.setAnchors(),a.alpha=0,a.game.make.tween((0,n.default)(a)).to({alpha:1},100,"Quad.easeIn",!0),a.update(),a.asset.update(),a.asset.updateTransform(),a}(0,a.default)(e,t);var i=e.prototype;return i.pause=function(){},i.unpause=function(){},i.setAnchors=function(){this.anchors=[];for(var t=this.aiData.anchors.length,e=0;e<t;e++){var i=this.asset.skeleton.findBone(this.aiData.anchors[e]);i.restoreTime=this.game.time.now,this.anchors.push(i)}},i.getX=function(){return this.x},i.getY=function(){return this.y},i.getTop=function(){return this.y-this.asset.height*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x),this.bone&&(this.dot.x=this.bone.worldX/this.environment.scale.x,this.dot.y=-this.bone.worldY/this.environment.scale.x)},i.setPosition=function(t,e){this.x=t,this.y=e},i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault},i.getAnchorForY=function(t,e){void 0===e&&(e=!1);for(var i=this.anchors.length,s=1e4,n=null,a=0;a<i;a++){var o=this.anchors[a];if(this.game.time.now-o.restoreTime>1e4||e){var r=this.y-o.worldY/this.environment.scale.x,h=Math.abs(t-r);h<s&&(s=h,n=o)}}return n},i.getAnchorPos=function(t){return{x:this.x+t.worldX/this.environment.scale.x,y:this.y-t.worldY/this.environment.scale.x}},i.eat=function(t){t.restoreTime=this.game.time.now,this.onEat.dispatch(this,this.getAnchorPos(t))},i.destroy=function(){this.asset.destroy()},e}(Phaser.Group);e.default=o},VatX:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){return t.call(this,e,i,s)||this}(0,n.default)(e,t);var i=e.prototype;return i.setDestPoint=function(){this.destPoint.x=this.x+this.dir*Phaser.Math.between(400,800);var t=this.movementArea.y+100,e=this.movementArea.y+this.movementArea.height-100;this.destPoint.y=Phaser.Math.between(t,e),this.setSpeed()},i.move=function(t){var e=this.destPoint.x-this.x,i=this.destPoint.y-this.y,s=Math.atan2(i,e),n=this.travelDir%(2*Math.PI),a=0;s>=0?a=s>n+Math.PI?s-2*Math.PI-n:s-n:s<0&&(a=s<n-Math.PI?s-2*Math.PI-n:s-n),s=this.travelDir+a,this.travelDir+=(s-this.travelDir)*this.rotationSpeed*t,this.speed+=2*(this.speedDest-this.speed)*t;var o=this.speed*Math.cos(this.travelDir)*t,r=this.speed*Math.sin(this.travelDir)*t;this.x+=o,this.y+=r,this.applyMovementRotation(),this.checkEndOfMovement()},i.step=function(e){t.prototype.step.call(this,e);var i=-100-.5*this.asset.width,s=100+this.movementArea.width+.5*this.asset.width;1===this.dir&&this.x>s?(this.dir=-1,this.travelDir=Math.PI,this.setDestPoint(),this.setScale(this.environment.scale.x)):-1===this.dir&&this.x<i&&(this.travelDir=0,this.dir=1,this.setDestPoint(),this.setScale(this.environment.scale.x))},i.checkEndOfMovement=function(){if(this.state===o.STATE_HUNT){var t=this.getJawsPos(),e=this.destPoint.x-t.x,i=this.destPoint.y-t.y;Math.sqrt(e*e+i*i)<this.aiData.eatRange&&this.onReachDestPoint()}else{var s=this.destPoint.x-this.x,n=this.destPoint.y-this.y;Math.sqrt(s*s+n*n),this.speed,s*this.dir<0&&this.onReachDestPoint()}},i.destroy=function(){this.dot&&this.dot.destroy(),t.prototype.destroy.call(this)},e}(a.default);e.default=r},VawD:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("86MP")),o=n(i("01M/")),r=n(i("fY54")),h=i("zgbH"),d=i("5mNR"),l=i("mQkb"),u=s(i("zgbH")),c=i("TEuq"),p=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){this.fontsReady=!1,this.loadComplete=!1,this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.crossOrigin="anonymous",this.game.load.pack("boot","assetpack.json",null,this),o.default.load({custom:{families:[h.FONT_COPY,h.FONT_SUBTITLE,h.FONT_REGULAR,h.FONT_ITALIC,h.FONT_EXTRA_BOLD,h.FONT_BOLD,h.FONT_BOLD_ITALIC,h.FONT_LIGHT],urls:[this.game.urls.getFontsDirectory(h.FONT_CSS)]},active:this.fontsLoaded.bind(this),inactive:this.fontsLoaded.bind(this)}),this.game.springRollScaleManagerPlugin=this.game.plugins.add(new l.ScaleManagerPlugin(this.game,this.game.plugins,{width:u.GAME_WIDTH_DEFAULT,height:u.GAME_HEIGHT_DEFAULT,safeWidth:u.GAME_SAFE_WIDTH,safeHeight:u.GAME_SAFE_HEIGHT})),Phaser.Loader.prototype.processPack=function(t){var e=t.data[t.key];if(e)for(var i=0;i<e.length;i++){var s=e[i];switch(s.type){case"image":this.image(s.key,s.url,s.overwrite);break;case"text":this.text(s.key,s.url,s.overwrite);break;case"json":this.json(s.key,s.url,s.overwrite);break;case"xml":this.xml(s.key,s.url,s.overwrite);break;case"script":this.script(s.key,s.url,s.callback,t.callbackContext||this);break;case"binary":this.binary(s.key,s.url,s.callback,t.callbackContext||this);break;case"spritesheet":this.spritesheet(s.key,s.url,s.frameWidth,s.frameHeight,s.frameMax,s.margin,s.spacing,s.skipFrames);break;case"video":this.video(s.key,s.urls);break;case"audio":this.audio(s.key,s.urls,s.autoDecode);break;case"audiosprite":this.audiosprite(s.key,s.urls,s.jsonURL,s.jsonData,s.autoDecode);break;case"tilemap":this.tilemap(s.key,s.url,s.data,Phaser.Tilemap[s.format]);break;case"physics":this.physics(s.key,s.url,s.data,Phaser.Loader[s.format]);break;case"bitmapFont":this.bitmapFont(s.key,s.textureURL,s.atlasURL,s.atlasData,s.xSpacing,s.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlasXML":this.atlasXML(s.key,s.textureURL,s.atlasURL,s.atlasData);break;case"atlas":this.atlas(s.key,s.textureURL,s.atlasURL,s.atlasData,Phaser.Loader[s.format]);break;case"shader":this.shader(s.key,s.url,s.overwrite);break;case"spine":this.spine(s.key,s.url)}}else c.Debugger.log("warn","Phaser.Loader - "+t.key+" : pack has data, but not for pack key")},PhaserSpine.Spine.prototype.update=function(){this.state.update(this.game.time.elapsed/1e3),this.state.apply(this.skeleton),this.skeleton.color.a=this.worldAlpha,this.skeleton.updateWorldTransform()},this.game.add.plugin(PhaserSpine.SpinePlugin,{triangleRendering:!0,debugRendering:!1})},i.fontsLoaded=function(){this.fontsReady=!0},i.create=function(){this.game.copy=new r.default(this.game,this.game.cache.getXML("copy_xml")),this.game.isTouch="ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0,this.loadComplete=!0},i.update=function(){this.checkLoading()},i.checkLoading=function(){this.loadComplete&&this.fontsReady&&this.game.state.start(d.STATE_LOAD,!0,!1)},e}(Phaser.State);e.default=p},WtpM:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("3huV")),o=s(i("dD3M")),r=i("6YV8"),h=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(){},i.preload=function(){},i.create=function(){this.container=new a.default(this.game,{background:"bg_welcome"}),this.logo=this.game.make.image(.5*this.game.defaultWidth,150,"logo_game"),this.logo.anchor.set(.5),this.container.addChild(this.logo),this.btnStart=new o.default({game:this.game,up:"btn_start",over:"btn_start_over",vo:{spriteID:"vo_ui",id:"play"}}),this.btnStart.position.set(.5*this.game.defaultWidth,380),this.btnStart.onInputUp.add(this.handleBtnStart,this),this.container.addChild(this.btnStart),this.game.sounds.setBackgroundMusic("music_title",!0),this.game.sounds.playBackgroundMusic(),this.game.sounds.playVO("title",{spriteID:"vo_ui"}),this.game.springRollCaptionsPlugin.playCaption("title")},i.handleBtnStart=function(){(0,r.getGA)().track({action:"clickPlay"}),this.btnStart.onInputUp.remove(this.handleBtnStart,this),this.btnStart.visible=!1,this.game.controller.showIntro()},i.shutdown=function(){this.game.sounds.stopBackgroundMusic(),this.game.sounds.clearBackgroundMusic(),this.container.destroy(!0),this.container=null},e}(Phaser.State);e.default=h},XjIo:function(t,e,i){"use strict";var s=i("R6lU");i("wiMi"),i("j3Ef"),i("RiZp"),i("Rz/f"),i("Wse9"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=["blue","brown","green"],o=function(){function t(){this.colourTheme=null,this.usedThemes=[],this.availableThemes=[].concat(a)}var e=t.prototype;return e.registerSavedThemes=function(t){var e=this;this.usedThemes=t.reduce((function(t,e){return t.push(e.colourThemeId),t}),[]),this.availableThemes=a.filter((function(t){return!e.usedThemes.includes(t)}))},e.restoreThemeId=function(t){var e=this;this.availableThemes.push(t),this.usedThemes=a.filter((function(t){return!e.availableThemes.includes(t)}))},(0,n.default)(t,[{key:"nextColourThemeId",get:function(){return this.availableThemes.shift()||!1}}]),t}();e.default=o},YZLL:function(t,e,i){"use strict";var s=i("R6lU");i("pXic"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.HandPrompt=void 0;var n=s(i("86MP")),a=function(t){function e(e,i){var s,n=i.x,a=void 0===n?0:n,o=i.y,r=void 0===o?0:o;return(s=t.call(this,e,a,r,"ui_various","hand_prompt")||this).anchor.set(0,.5),s.alpha=0,s.savedY=r,s}(0,n.default)(e,t);var i=e.prototype;return i.animate=function(){this.cnt=0,this.createTween()},i.repeat=function(){this.cnt++,this.cnt<3?this.createTween():this.destroy()},i.createTween=function(){this.y=this.savedY,this.game.add.tween(this).to({alpha:1},100,null,!0),this.game.add.tween(this).to({y:"-200"},1500,"Quad.easeOut",!0),this.game.add.tween(this).to({alpha:0},100,null,!0,1400).onComplete.addOnce(this.repeat,this)},i.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e)},e}(Phaser.Image);e.HandPrompt=a},YbP7:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("86MP")),o=function(t){function e(e,i){var s,n=i.states,a=i.active;return(s=t.call(this,e)||this).states=n,s.active=a,s.back=s.game.make.image(0,0,"ui_buttons",s.states[s.active]),s.back.anchor.set(.5),s.addChild(s.back),s.hitArea=new Phaser.Rectangle(.5*-s.back.width,.5*-s.back.height,s.back.width,s.back.height),s.inputEnabled=!0,s.input.useHandCursor=!0,s.onInputDown=new Phaser.Signal,s.enable(),s}(0,a.default)(e,t);var i=e.prototype;return i.setState=function(t){this.active=t,this.updateState()},i.toggleState=function(){this.active=0===this.active?1:0,this.updateState()},i.updateState=function(){this.back.frameName=this.states[this.active]},i.enable=function(){this.events.onInputDown.add(this.handleInputDown,this),this.events.onInputOver.add(this.onOver,this),this.events.onInputOut.add(this.onOut,this)},i.disable=function(){this.events.onInputDown.remove(this.handleInputDown,this),this.events.onInputOver.remove(this.onOver,this),this.events.onInputOut.remove(this.onOut,this)},i.handleInputDown=function(){this.game.sounds.playSFX("click",{spriteID:"sfx_general"}),this.toggleState(),this.onInputDown.dispatch({state:this.active})},i.onOver=function(){this.back.frameName=this.states[this.active]+"_over"},i.onOut=function(){this.back.frameName=this.states[this.active]},i.destroy=function(){this.onInputDown.removeAll(),this.events.onInputDown.removeAll(),this.events.onInputOver.removeAll(),this.events.onInputOut.removeAll(),this.back.destroy()},(0,n.default)(e,[{key:"width",get:function(){return Math.abs(this.back.width)}},{key:"height",get:function(){return Math.abs(this.back.height)}}]),e}(Phaser.Sprite);e.default=o},"ZJ/5":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("3huV")),o=s(i("5xma")),r=s(i("89Dv")),h=s(i("gwMp")),d=s(i("LClc")),l=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(e){var i=e.data;t.prototype.init.call(this,{debug:!1}),this.data=i,this.introAssetsLoaded=!1,this.transition=this.game.controller.getTransition()},i.preload=function(){t.prototype.preload.call(this),this.container=new a.default(this.game),this.game.time.events.add(1e3,this.showLoader,this).autoDestroy=!0},i.showLoader=function(){this.introAssetsLoaded||(this.loadBar=new d.default(this.game),this.game.add.existing(this.loadBar),this.transition.fadeOut())},i.loadAssets=function(){t.prototype.loadAssets.call(this),this.game.load.baseURL=this.game.urls.getAssetsDirectory();for(var e="intro/",i=0;i<this.data.skeletons.length;i++){var s=this.data.skeletons[i],n=s;this.game.load.spine(n,e+"spine/"+s+".json")}this.game.load.json("intro_captions",e+"audio/intro_vo_captions.json"),e+="audio/64/intro_vo",this.game.load.audioSprite("intro_vo",[e+".mp3"],e+".json")},i.loadPacks=function(e){t.prototype.loadPacks.call(this,e)},i.create=function(){this.game.sounds.addSound("intro_vo","intro_vo"),t.prototype.create.call(this),this.introAssetsLoaded=!0},i.start=function(){t.prototype.start.call(this),this.loadError||(this.pondAssetsLoaded=!1,this.introComplete=!1,this.loadBar?(this.transition.onFadeEnd.addOnce(this.startIntro,this),this.transition.fadeIn()):this.startIntro())},i.startIntro=function(){this.loadBar&&(this.loadBar.visible=!1),this.onboardLoader=new h.default(this.game,{debug:!1}),this.onboardLoader.onLoadComplete.addOnce(this.pondAssetsLoadComplete,this),this.onboardLoader.loadAssets(),this.introScene=new o.default(this.game,{id:"intro",data:this.data}),this.container.addChild(this.introScene),this.introScene.x=this.game.defaultWidth/2,this.introScene.y=this.game.defaultHeight/2,this.introScene.onAnimComplete.addOnce(this.handleAnimComplete,this),this.transition.fadeOut()},i.pondAssetsLoadComplete=function(){this.pondAssetsLoaded=!0,this.playEndTransition()},i.handleAnimComplete=function(){this.introComplete=!0,this.playEndTransition()},i.playEndTransition=function(){this.introComplete&&this.pondAssetsLoaded?(this.loadBar&&this.loadBar.setProgress(1),this.transition.onFadeEnd.addOnce(this.handleTransitionEnd,this),this.transition.fadeIn()):this.introComplete&&!this.pondAssetsLoaded&&(this.transition.onFadeEnd.addOnce(this.transitionLoader,this),this.transition.fadeIn())},i.transitionLoader=function(){this.loadBar?this.loadBar.visible=!0:(this.loadBar=new d.default(this.game),this.game.add.existing(this.loadBar)),this.transition.fadeOut()},i.handleTransitionEnd=function(){this.game.controller.startOnboarding()},i.loadUpdate=function(){this.loadBar&&this.game.load.progress>0&&this.loadBar.setProgress(this.game.load.progress/100)},i.update=function(){t.prototype.update.call(this),this.pondAssetsLoaded||this.loadUpdate()},i.shutdown=function(){this.introScene&&this.introScene.destroy(),this.container.destroy(!0),this.onboardLoader.destroy(),this.onboardLoader=null,this.loadBar&&(this.loadBar.destroy(),this.loadBar=null),this.introScene=null,this.transition=null,this.container=null,t.prototype.shutdown.call(this)},e}(r.default);e.default=l},ZXKE:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("XvIX"),i("a/rO"),i("96V2"),i("3Ss1"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=s(i("C9uT")),o=s(i("6QQ6")),r=s(i("yxXW")),h=i("vXl+");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function l(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var c=function(){function t(t,e){var i=e.container,s=e.y,n=e.top,a=e.items,r=e.layerWidth,h=e.layerHeight,d=e.environment,l=e.inputEnabled,u=void 0!==l&&l;this.game=t,this.layerWidth=r,this.layerHeight=h,this.inputEnableChildren=u,this.container=i,this.environment=d,this.creatureFactory=new o.default(this.game,d),this.creatures=[],this.y=s,this.top=n,this.bottom=this.y+this.layerHeight,this._paused=!1,this.addAllCreatures(a)}var e=t.prototype;return e.reset=function(){for(var t,e=l(this.creatures);!(t=e()).done;){t.value.destroy()}this.creatures=[]},e.addAllCreatures=function(t){for(var e,i=l(t);!(e=i()).done;){var s=e.value;this.addCreature(s)}},e.getClosestTo=function(t){var e=t.x,i=t.y;if(this.creatures.length>0){for(var s=300,n=null,a=0;a<this.creatures.length;a++){var o=this.creatures[a],r=o.getX()-e,h=o.getY()-i,d=Math.sqrt(r*r+h*h);d<s&&(s=d,n=o)}return this._paused=null!==n,n}return null},e.addCreature=function(t,e){void 0===e&&(e=!1);var i=t.x,s=t.layers,n=t.y,a=this.y+this.top,o=this.bottom;if(s)for(var r=0;r<s.length;r++){var h=s[r],d=this.environment.layers[h];d&&(o=Math.max(o,d.bottom),a=Math.min(a,d.y+d.top))}(n=Phaser.Math.clamp(n,a,o))||(n=Phaser.Math.between(a,o));var l=this.creatureFactory.getCreature(t);return l.environment=this.environment,l.onEat.addOnce(this.handleCreatureEat,this),this.container.add(l.getDisplayObject()),t.flying?(a=this.y,o=this.y+this.top,n=Phaser.Math.between(a,o),l.setPosition(i,n),l.setMovementArea(0,a,this.layerWidth,o-a)):(l.setPosition(i,n),l.setMovementArea(0,a,this.layerWidth,o-a)),this.creatures.push(l),this.addStars({creatureData:t,creature:l,unlocked:e}),l},e.addStars=function(t){var e=t.creatureData,i=t.creature;if(t.unlocked){if(e.layerIndex>0){var s=.2+i.weight/15*.8,n=new r.default(this.game,this.environment,s,i.depth);n.x=i.x,n.y=i.y,this.container.add(n)}var a=new h.StarBurst(this.game,{x:i.x,y:i.y});this.container.add(a)}},e.handleCreatureEat=function(t){var e=this.creatures.indexOf(t);if(this.creatures.splice(e,1),!t.data.flying){var i=.2+t.weight/15*.8,s=new r.default(this.game,this.environment,i,t.depth);s.x=t.x,s.y=t.y,this.container.add(s)}var a=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t.data);a.x=Phaser.Math.between(0,this.layerWidth),a.y=null,(t=this.addCreature(a)).appearSmooth()},e.step=function(t){if(!this._paused)for(var e=0;e<this.creatures.length;e++)this.creatures[e].step(t)},e.destroy=function(){this.reset()},(0,a.default)(t,[{key:"paused",set:function(t){this._paused=t}}]),t}();e.default=c},ZmTD:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.camouflaged=!0,n.button.anchor.set(.7,1),n}return(0,n.default)(e,t),e}(s(i("PsHK")).default);e.default=a},afRL:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("wiMi"),i("COu/"),i("RiZp"),i("a/rO"),i("Rz/f"),i("96V2"),i("YY9M"),i("3Ipg"),i("vw/H"),i("q4B+"),i("Wse9"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=i("MPoQ");function o(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var h=function(){function t(t){this.myCreaturesUnlocked=t,this._all=[],this._unlocked=[]}return t.prototype.parseSaves=function(t){var e=this,i=t.saves,s=t.data;if(this._all=Object.keys(s).reduce((function(t,e){return s[e].myCreature&&!t.includes(e)&&t.push(e),t}),[]),this.myCreaturesUnlocked)this._unlocked=[].concat(this._all);else{this._unlocked=[];for(var n,r=o(i);!(n=r()).done;){var h=n.value.pondItems;h&&function(){for(var t,i=h.itemsById,s=o(Object.keys(i).reduce((function(t,e){var s=i[e],n=s.id;return s.type!==a.CREATURE||t.includes(n)||t.push(n),t}),[]));!(t=s()).done;){var n=t.value;e._unlocked.includes(n)||e._unlocked.push(n)}}()}}},(0,n.default)(t,[{key:"unlockedShortcut",set:function(t){this.myCreaturesUnlocked=t}},{key:"all",get:function(){return this._all}},{key:"unlocked",get:function(){return this._unlocked}},{key:"hasSomeUnlocked",get:function(){return this._unlocked.length>=1}}]),t}();e.default=h},anOO:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("4upZ")),a=s(i("cJbQ"));function o(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var h=function(){function t(t,e){var i=e.container,s=e.layerWidth,n=e.layerHeight,a=e.environment;this.game=t,this.layerWidth=s,this.layerHeight=n,this.container=i,this.environment=a,this.surfaceY=this.environment.surfaceY,this.particles=[],this.bubbles=[];for(var o=0;o<50;o++)this.addParticle();this.time=0}var e=t.prototype;return e.reset=function(){for(var t,e=o(this.particles);!(t=e()).done;){t.value.destroy()}this.particles=[]},e.addParticle=function(){var t=Phaser.Math.between(100,this.layerWidth-100),e=this.surfaceY+Phaser.Math.between(100,this.layerHeight-100),i=Phaser.Math.between(1,500),s=new n.default({game:this.game,environment:this.environment,x:t,y:e,depth:i});return this.container.add(s),this.particles.push(s),s},e.addBubbles=function(){var t=Phaser.Math.between(100,this.layerWidth-100),e=this.surfaceY+this.layerHeight,i=Phaser.Math.between(1,500),s=new a.default({game:this.game,surfaceY:this.layerHeight,x:t,y:e,depth:i});return this.container.add(s),this.bubbles.push(s),s},e.step=function(t){if(!this._paused){for(var e=0;e<this.particles.length;e++)this.particles[e].step(t);for(var i=0;i<this.bubbles.length;i++)this.bubbles[i].step(t);this.time-=t,this.time<0&&(this.addBubbles(),this.time=Phaser.Math.between(3,5))}},e.destroy=function(){this.reset()},t}();e.default=h},b8xE:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},bBX6:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).canHide=!0,n}return(0,n.default)(e,t),e}(s(i("m1Ny")).default);e.default=a},bFzk:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){return t.call(this,e,i,s)||this}(0,n.default)(e,t);var i=e.prototype;return i.clampPosition=function(){this.destPoint.y=Math.min(this.destPoint.y,this.environment.surfaceY-50),this.y>=this.environment.surfaceY&&(this.y=this.environment.surfaceY,this.travelDir=1===this.dir?.1*-Math.PI:.9*-Math.PI)},i.setSpeed=function(){switch(this.state){case o.STATE_IDLE:this.speedDest=this.aiData.speedIdle,this.rotationSpeed=5;break;case o.STATE_FEED:this.targetFood.isPlant?(this.speedDest=0,this.speed=0,this.rotationSpeed=5):(this.speedDest=this.aiData.speedIdle,this.rotationSpeed=5);break;case o.STATE_HUNT:this.speedDest=this.aiData.speedIdle*this.aiData.speedHunt,this.rotationSpeed=5;break;case o.STATE_EVADE:this.speedDest=this.aiData.speedIdle*this.aiData.speedEvade,this.rotationSpeed=5}if(this.speedDest>0){var t=.15*this.speedDest;this.speedDest=Phaser.Math.random(this.speedDest-t,this.speedDest+t)}},i.move=function(t){var e=this.destPoint.x-this.x,i=this.destPoint.y-this.y,s=Math.atan2(i,e);this.travelDir<0&&s>2.5&&(s-=2*Math.PI),this.travelDir>0&&s<-2.5&&(s+=2*Math.PI),this.travelDir+=(s-this.travelDir)*this.rotationSpeed*t,this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t);var n=this.speed*Math.cos(this.travelDir)*t,a=this.speed*Math.sin(this.travelDir)*t;this.x+=n,this.y+=a,this.applyMovementRotation(),this.checkEndOfMovement()},e}(a.default);e.default=r},bHjq:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CAPTION=void 0;var n=s(i("fKPv"));function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function r(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}e.CAPTION={UI:"ui",MAGNIFY:"magnify",FACT:"fact",NAME:"name",SUMMARY:"summary",ONBOARDING:"onboarding",INTRO:"intro"};var d=function(){function t(){}var e=t.prototype;return e.parseGroups=function(t,e){this.data={};for(var i,s=r(e);!(i=s()).done;){var n=i.value,a=n.id,h=n.type;this.data=o(o({},this.data),this.getGroup(t,a,h))}return this.data},e.getGroup=function(t,e,i){return t.cache.getJSON(e+"_captions_"+i)},e.destroy=function(){this.data=null},t}();e.default=d},btHK:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("86MP")),o=n(i("4UFF")),r=n(i("zoTg")),h=n(i("hNsG")),d=s(i("bHjq")),l=i("MPoQ"),u=i("6YV8"),c=i("evHg"),p=i("oX+o"),m=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.pondModel,i=t.decisionTreeModel;this.pondModel=e,this.decisionTreeModel=i},i.create=function(){this.container=this.game.add.group(),this.environment=new r.default(this.game,{pondModel:this.pondModel}),this.container.addChild(this.environment),this.gameCamera=new h.default(this.game,{scene:this.environment,cameraFollow:this.environment.cameraFollow,pondModel:this.pondModel}),this.addHud(),this.gameCamera.onMoveComplete.add(this.onPanComplete,this),this.gameCamera.start(),(0,u.getGA)().track({action:"startLevel",label:"pond_"+this.pondModel.saveNumber}),this.pondModel.pondIntroComplete?this.showOptions():(this.gameHud.onIntroComplete.addOnce(this.showOptions,this),this.gameHud.playIntro())},i.update=function(){var t=Math.min(.1,this.game.time.elapsedMS/1e3);this.environment.step(t),this.gameCamera.step(t)},i.showOptions=function(){this.gameHud.onMagnify.add(this.onMagnify,this),this.gameHud.onMagnifyComplete.add(this.onMagnifyComplete,this),this.gameHud.onToggleZoom.add(this.handleToggleZoom,this),this.pondModel.pondComplete?(this.pondModel.zoom.state=c.ZOOM_STATE.ZOOMED_OUT,this.decisionTreeModel.setComplete(),this.gameCamera.zoomToPondOverview(),this.gameHud.showMagnifyingGlassButton()):(this.gameHud.addOverlayDecision(this.decisionTreeModel),this.gameHud.onDragStart.add(this.zoomOut,this),this.gameHud.onDragStop.add(this.zoomIn,this),this.gameHud.onDecisionComplete.add(this.onDecisionComplete,this),this.gameHud.onNextDecision.add(this.onNextDecision,this),this.gameHud.onNextPondLayer.add(this.onNextPondLayer,this),this.gameHud.onPanToActiveLayer.add(this.panToActiveLayer,this))},i.onMagnify=function(t){var e=t.worldX,i=t.worldY,s=Math.floor(e/this.gameCamera.cameraScale),n=Math.floor(i/this.gameCamera.cameraScale),a=this.environment.getClosestPondItemTo(this.pondModel,{x:s,y:n}),o=a.id,r=a.item;this.pondItem=r,this.pondItem?this.gameHud.magnifyItem(o,this.pondItem):(this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections()),this.gameHud.hideMagnifyingGlass(),this.gameHud.handleMagnifyItemComplete())},i.onMagnifyComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections()),this.pondItem&&this.pondItem.unpause(),this.pondItem=null},i.onDecisionComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections());var t=this.pondModel.pondItems.spawnItem,e=null;t&&t.unlock&&(e=t.unlock),this.pondModel.addSpawnItems(),null!==e&&this.pondModel.spawnUnlockedItems(e),this.pondModel.pondItems.save(),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!0})},i.onNextDecision=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableHorizontalDirections())},i.onNextPondLayer=function(){if(this.pondModel.activateNextLayer(),this.pondModel.pondComplete)this.showPondComplete();else{this.gameCamera.onMoveComplete.addOnce(this.onNextPondLevelPanComplete,this),this.panToActiveLayer();var t=this.pondModel.currentLayerID;this.decisionTreeModel.resetIndex(),this.decisionTreeModel.setCurrentPondLayer(t),this.gameHud.resetMagnify(),this.gameHud.hideScrollArrows()}},i.onNextPondLevelPanComplete=function(){this.pondModel.onSpawnAwaitingItems.addOnce(this.onEnterLevelComplete,this),this.pondModel.spawnAwaitingItems(),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!0,unlocked:!0})},i.onEnterLevelComplete=function(t){t?(this.decisionTreeModel.state=p.DECISION_STATES.READY,this.gameHud.onLifecycleVOComplete.addOnce(this.handleLifecycleComplete,this),this.gameHud.showLifeCyclePanel(t)):this.gameHud.handleNextDecision()},i.handleLifecycleComplete=function(){this.gameHud.showScrollArrows(this.gameCamera.getAvailableDirections())},i.showPondComplete=function(){this.pondModel.zoom.state=c.ZOOM_STATE.ZOOMED_OUT,this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.onPondCompleteZoomed,this),this.gameCamera.zoomToPondComplete()},i.onPondCompleteZoomed=function(){this.gameCamera.onMoveComplete.remove(this.onPondCompleteZoomed,this),this.gameCamera.onMoveComplete.add(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.showMagnifyingGlassButton,this),this.gameHud.pondComplete(),this.gameHud.showNewPondButton()},i.showMagnifyingGlassButton=function(){this.gameHud.showMagnifyingGlassButton()},i.zoomOut=function(){var t=this.pondModel.getCameraDragDropScale();this.gameCamera.zoomTo(t)},i.zoomIn=function(t){this.environment.onAddPondItem.addOnce(this.handleAddPondItem,this),t.x=Math.floor(this.game.input.worldX/this.gameCamera.cameraScale),t.y=Math.floor(this.game.input.worldY/this.gameCamera.cameraScale),this.pondModel.addItem(t),this.environment.updateDisplayItems({pondModel:this.pondModel,spawned:!1}),this.gameCamera.zoomToSaved(),"BRANCH"===t.dragType&&(0,u.getGA)().track({action:"select_content",label:this.pondModel.activePondLayerID+"_"+t.id})},i.handleAddPondItem=function(t){var e=t.type,i=t.item;switch(this.game.sounds.playSFX("drop",{spriteID:"sfx_general"}),e){case l.PLANT:var s=i.data,n=s.id,a=s.dragType;"lillypad"===n&&"BRANCH"===a?(this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.onMoveComplete.addOnce(this.onLillypadPanComplete,this),this.gameHud.hideScrollArrows(),this.gameCamera.panTo(i.getX(),i.getTop())):this.gameCamera.panTo(i.getX());break;case l.GEOLOGY:case l.CREATURE:"heron"===i.id&&this.gameCamera.onMoveComplete.addOnce(i.hunt,i),this.gameCamera.panTo(i.getX())}},i.onLillypadPanComplete=function(t){this.gameCamera.onMoveComplete.remove(this.onLillypadPanComplete,this),this.gameCamera.onMoveComplete.add(this.onPanComplete,this),this.gameHud.showScrollArrows(t),this.gameHud.overlayDecision.showNextOptions()},i.panLeft=function(){this.gameCamera.panLeft()},i.panRight=function(){this.gameCamera.panRight()},i.panUp=function(){this.gameCamera.panUp()},i.panDown=function(){this.gameCamera.panDown(),this.gameHud.overlayDecisionVisibility=this.pondModel.currentLayerIsActivePondLayer},i.panToActiveLayer=function(){this.gameCamera.panToActiveLayer()},i.handleToggleZoom=function(){this.gameCamera.zoomToActiveLayer()},i.onPanComplete=function(t){this.decisionTreeModel.isInDecisionState()&&(t.up=!1,t.down=!1),this.gameHud.showScrollArrows(t),this.gameHud.overlayDecisionVisibility=this.pondModel.currentLayerIsActivePondLayer,this.gameCamera.cameraY<1e3?(this.game.sounds.stopAudioSprite("underwater",{spriteID:"ambient"}),this.sndAmbient=this.game.sounds.playSFX("surface",{spriteID:"ambient",loop:!0,volume:.2})):(this.game.sounds.stopAudioSprite("surface",{spriteID:"ambient"}),this.sndAmbient=this.game.sounds.playSFX("underwater",{spriteID:"ambient",loop:!0,volume:.1}))},i.removeHud=function(){this.gameHud.onScrollLeft.remove(this.panLeft,this),this.gameHud.onScrollRight.remove(this.panRight,this),this.gameHud.onScrollUp.remove(this.panUp,this),this.gameHud.onScrollDown.remove(this.panDown,this),this.gameHud.onDragStart.remove(this.zoomOut,this),this.gameHud.onDragStop.remove(this.zoomIn,this),this.gameHud.onDecisionComplete.remove(this.onDecisionComplete,this),this.gameHud.onNextDecision.remove(this.onNextDecision,this),this.gameHud.onNextPondLayer.remove(this.onNextPondLayer,this),this.gameHud.onMagnify.remove(this.onMagnify,this),this.gameHud.onMagnifyComplete.remove(this.onMagnifyComplete,this),this.gameHud.onPanToActiveLayer.remove(this.panToActiveLayer,this),this.gameHud.destroy(!0),this.gameHud=null},i.addHud=function(){this.captions=new d.default,this.captions.parseGroups(this.game,[{id:"olive",type:d.CAPTION.MAGNIFY},{id:"olive",type:d.CAPTION.FACT},{id:"olive",type:d.CAPTION.NAME},{id:"mixed",type:d.CAPTION.INTRO},{id:"elinor",type:d.CAPTION.SUMMARY}]),this.game.springRollCaptionsPlugin.setData(this.captions.data),this.gameHud=new o.default(this.game,this.captions,this.pondModel),this.container.addChild(this.gameHud),this.gameHud.enableNextDecisionButton(),this.gameHud.fixedToCamera=!0,this.gameHud.onScrollLeft.add(this.panLeft,this),this.gameHud.onScrollRight.add(this.panRight,this),this.gameHud.onScrollUp.add(this.panUp,this),this.gameHud.onScrollDown.add(this.panDown,this)},i.shutdown=function(){this.sndAmbient&&(this.sndAmbient.stop(),this.sndAmbient=null),this.removeHud(),this.environment.destroy(!0),this.environment=null,this.gameCamera.onMoveComplete.remove(this.onPanComplete,this),this.gameCamera.destroy(!0),this.gameCamera=null,this.container.destroy(!0),this.container=null,this.pondModel=null,this.decisionTreeModel=null,this.captions&&(this.captions.destroy(),this.captions=null)},e}(Phaser.State);e.default=m},c25H:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=s(i("M1I4")),o=s(i("86MP"));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}var h=function(t){function e(e,i){var s;s=t.call(this,e)||this;var n=i.id,o=i.data,r=i.atlas,h=void 0===r?"tray_creatures":r;return s.onInputDown=new Phaser.Signal,s.id=n,s.data=o,s.data.dragType="DRAGDROP",s.costume=s.game.make.image(0,0,h,n),s.costume.anchor.set(.5),s.addChild(s.costume),s.button=s.game.make.button(0,0,""),s.button.width=s.costume.width,s.button.height=s.costume.height,s.button.alpha=0,s.button.anchor.set(.5),s.addChild(s.button),s.enable(),s.button.events.onInputDown.add(s.handleInputDown,(0,a.default)(s)),s.button.events.onInputUp.add(s.handleInputUp,(0,a.default)(s)),s}(0,o.default)(e,t);var i=e.prototype;return i.enable=function(){this.button.inputEnabled=!0,this.button.input.useHandCursor=!0},i.disable=function(){this.button.inputEnabled=!1,this.button.input.useHandCursor=!1},i.animateOn=function(){this.game.make.tween(this).from({y:"+300",alpha:0},200,"Quad.easeIn",!0)},i.animateOff=function(){this.game.make.tween(this).to({alpha:0},300,"Quad.easeIn",!0)},i.animateTo=function(t){var e=this.game.make.tween(this).to({alpha:0},100,"Quad.easeIn",!1),i=this.game.make.tween(this).to({x:t,alpha:1},200,"Quad.easeOut",!1);e.chain(i),e.start()},i.handleInputDown=function(t,e){this.pointer=e,this.startX=e.x,this.startY=e.y,this.isDown=!0},i.handleInputUp=function(){this.isDown&&this.pickUp()},i.pickUp=function(){this.isDown=!1,this.game.sounds.playSFX("select",{spriteID:"sfx_general"}),this.onInputDown.dispatch(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},this.data))},i.update=function(){if(t.prototype.update.call(this),this.isDown){var e=Math.abs(this.pointer.x-this.startX),i=Math.abs(this.pointer.y-this.startY);Math.sqrt(e*e+i*i)>20&&this.pickUp()}},i.destroy=function(e,i){void 0===e&&(e=!0),this.onInputDown&&(this.onInputDown.removeAll(),this.onInputDown=null),this.costume.destroy(),this.costume=null,this.disable(),this.button.events.onInputDown.remove(this.handleInputDown,this),this.button.events.onInputUp.remove(this.handleInputUp,this),this.button.destroy(),this.button=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=h},c9gZ:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("En6K")),o=s(i("g24n")),r=i("oX+o"),h=i("bHjq"),d=i("llML"),l=i("6YV8"),u=function(){function t(t,e,i){var s=i.decisionTreeModel;this.game=t,this.container=e,this.model=s,this.onBarReady=new Phaser.Signal,this.onBookClicked=new Phaser.Signal,this.onItemPickedUp=new Phaser.Signal,this.onItemDropped=new Phaser.Signal,this.onReadFactComplete=new Phaser.Signal,this.onDecisionComplete=new Phaser.Signal,this.onOnboardDecisionComplete=new Phaser.Signal,this._branchOptionsEnabled=!1,this.dispatchDecisionIdEnabled=!1,this.readItemNamesEnabled=!0,this.factBookVisible=!1}var e=t.prototype;return e.init=function(t,e){var i=e.restoreBranchOptions,s=void 0===i||i;switch(this.narrator=t,this.model.state){case r.DECISION_STATES.BRANCH:s&&this.createBranchOptions();break;case r.DECISION_STATES.OPTIONS:this.createBranchChoiceItems();break;case r.DECISION_STATES.NEXT:this.decisionComplete()}},e.center=function(){this.x=.5*(this.game.width-this.game.defaultWidth)},e.reposition=function(){},e.hide=function(){this.visible=!1},e.show=function(){this.visible=!0},e.createBranchOptions=function(){var t=this.model.getBranchOptions();this.options=new a.default(this.game,{options:t,onBookClicked:this.onBookClicked,branchOptionsEnabled:this._branchOptionsEnabled,readItemNames:this.readItemNamesEnabled,onBarReady:this.onBarReady,factBookVisible:this.factBookVisible}),this.options.onPickUp.add(this.handleOnSelectBranch,this),this.options.onReadFact.add(this.handleOnSelectBranchFact,this),this.options.onEnterDecisionState.add(this.handleOnEnterDecisionState,this),this.container.addChildAt(this.options,0),this.center()},e.enterDecisionState=function(){this.options.enterDecisionState()},e.handleOnSelectBranch=function(t){var e=t.id,i=t.options;this.model.setChosenBranchOption(e);var s=i[0];t.id=s,this.onItemPickedUp.dispatch(t)},e.handleOnReleaseBranch=function(t){var e=t.id,i=t.options;this.onItemDropped.dispatch(),this.model.setBranchOptionChoice({id:e}),i.length>1?this.createBranchChoiceItems():(this.removeOptionsPanel(),this.decisionComplete(e))},e.handleOnSelectBranchFact=function(t){var e=t.id;this.options.enterReadingFactState(),this.narrator.onNarrateFactComplete.addOnce(this.onNarrateFactComplete,this);var i=this.narrator.narrateFact({type:h.CAPTION.FACT,id:e,narrator:d.NARRATORS.OLIVE});(0,l.getGA)().track({action:"select_content",label:i})},e.onNarrateFactComplete=function(){this.options.narrateFactComplete(),this.onReadFactComplete.dispatch()},e.handleOnEnterDecisionState=function(){this.narrator.stopNarrateFact()},e.createBranchChoiceItems=function(){this.removeOptionsPanel();var t=this.model.getBranchOptionChoices();this.options=new o.default(this.game,{options:t}),this.options.onPickUp.add(this.handleOnSelectBranchChoice,this),this.container.addChildAt(this.options,0),this.center()},e.handleOnSelectBranchChoice=function(t){this.onItemPickedUp.dispatch(t)},e.handleOnReleaseBranchChoice=function(t){this.options.enableItems(),this.model.setBranchOptionChoice(t);var e=t.id;this.decisionComplete(e)},e.handleOnItemDropped=function(t){var e=t.id,i=t.dragType;"lillypad"===e&&"BRANCH"===i?(this.savedOptions=t,this.options.hideBar()):"BRANCH"===t.dragType?this.handleOnReleaseBranch(t):"DRAGDROP"===t.dragType&&this.handleOnReleaseBranchChoice(t)},e.showNextOptions=function(){this.handleOnReleaseBranch(this.savedOptions)},e.decisionComplete=function(t){this.model.isDecisionComplete()&&(this.options&&this.options.hideBar(),this.dispatchDecisionIdEnabled?this.onDecisionComplete.dispatch(t):this.onDecisionComplete.dispatch(),this.onOnboardDecisionComplete.dispatch(t))},e.removeOptionsPanel=function(){this.options&&(this.options.onEnterDecisionState&&this.options.onEnterDecisionState.remove(this.handleOnEnterDecisionState,this),this.options.onPickUp&&this.options.onPickUp.remove(this.handleOnSelectBranchChoice,this),this.options.onReadFact&&this.options.onReadFact.remove(this.handleOnSelectBranchFact,this),this.options.destroy(!0),this.options=null)},e.clearSignal=function(t){t&&t.removeAll()},e.destroy=function(){this.narrator=null,this.clearSignal(this.onBarReady),this.onBarReady=null,this.clearSignal(this.onBookClicked),this.onBookClicked=null,this.clearSignal(this.onItemPickedUp),this.onItemPickedUp=null,this.clearSignal(this.onItemDropped),this.onItemDropped=null,this.clearSignal(this.onReadFactComplete),this.onReadFactComplete=null,this.clearSignal(this.onDecisionComplete),this.onDecisionComplete=null,this.clearSignal(this.onOnboardDecisionComplete),this.onOnboardDecisionComplete=null,this.model=null,this.removeOptionsPanel()},(0,n.default)(t,[{key:"x",set:function(t){this.options&&(this.options.x=t)}},{key:"visible",set:function(t){this.options&&(this.options.visible=t)}},{key:"dispatchDecisionID",set:function(t){this.dispatchDecisionIdEnabled=t}},{key:"readItemNames",set:function(t){this.readItemNamesEnabled=t,this.options&&(this.options.readItemNames=t)}},{key:"factBookVisible",get:function(){return this._factBookVisible},set:function(t){this._factBookVisible=t,this.options&&(this.options.factBookVisible=t)}},{key:"branchOptionsEnabled",get:function(){return this._branchOptionsEnabled},set:function(t){this._branchOptionsEnabled=t,this._branchOptionsEnabled?this.options&&this.options.enableOptions():this.options&&this.options.disableOptions()}}]),t}();e.default=u},cJbQ:function(t,e,i){"use strict";var s=i("R6lU");i("3Ss1"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e){var i,s=e.game,n=e.x,a=e.y,o=e.depth,r=e.surfaceY;(i=t.call(this,s)||this).depth=o,i.surfaceY=r,i.x=n,i.y=a,i.onDestroy=new Phaser.Signal,i.bubbles=[];for(var h=Phaser.Math.between(4,8),d=0,l=0;l<h;l++){var u=Phaser.Math.between(-50,50),c=i.makeBubble(u,d);c.speed=Phaser.Math.between(250,300),i.addChild(c),i.bubbles.push(c),d+=Phaser.Math.between(40,80)}return i}(0,n.default)(e,t);var i=e.prototype;return i.makeBubble=function(t,e){var i=Math.random()<.5?"bubble1":"bubble3",s=this.game.make.image(t,e,"particles",i);return s.anchor.set(.5),s.scale.set(Phaser.Math.random(.5,1)),s.scale.x*=Math.random()<.5?-1:1,s.alpha=Phaser.Math.random(.2,.5),s.angle=Phaser.Math.between(0,360),s},i.step=function(t){for(var e=0;e<this.bubbles.length;e++){var i=this.bubbles[e];i.y-=i.speed*t,i.y<50-this.surfaceY&&(this.bubbles.splice(e,1),i.destroy(),e--)}0===this.bubbles.length&&this.onDestroy.dispatch(this)},e}(Phaser.Group);e.default=a},cjcH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLS=function(){return new a};var s=i("TEuq"),n=null,a=function(){function t(){return n||(n=this,this.useSpringroll=!1,this.onRead=new Phaser.Signal,this.isLocalStorageSupported="undefined"!=typeof Storage,this.boundLoadSuccess=this.handleUserDataLoadSuccess.bind(this),this.boundLoadFail=this.handleUserDataLoadFail.bind(this),n)}var e=t.prototype;return e.parseData=function(t){try{return JSON.parse(t)}catch(t){}return null},e.loadFromLocalStorage=function(){return this.isLocalStorageSupported?window.localStorage.getItem("pbs_pondlife"):{}},e.saveToLocalStorage=function(){if(this.isLocalStorageSupported)try{window.localStorage.setItem("pbs_pondlife",JSON.stringify(this.data))}catch(t){s.Debugger.log("error",t)}},e.deleteLocalStorage=function(){if(this.isLocalStorageSupported)try{window.localStorage.setItem("pbs_pondlife",JSON.stringify({}))}catch(t){s.Debugger.log("error",t)}},e.handleUserDataLoadSuccess=function(t){var e=this;if(this.useSpringroll=!0,this.data=t,this.data)s.Debugger.log("log","UserData success");else{var i=this.loadFromLocalStorage();s.Debugger.log("log","data null -> load data via localStorage"),i?(this.data=this.parseData(i),s.UserData.write("pbs_pondlife",this.data).then((function(t){s.Debugger.log("log","UserData saved "+t)}),(function(t){s.Debugger.log("error",t),e.saveToLocalStorage()}))):this.data={}}this.onRead.dispatch()},e.handleUserDataLoadFail=function(t){s.Debugger.log("warn","UserData load error: "+t);var e=this.loadFromLocalStorage();this.data=this.parseData(e)||{},this.onRead.dispatch()},e.loadData=function(){s.UserData.read("pbs_pondlife").then(this.boundLoadSuccess,this.boundLoadFail)},e.getGameData=function(){return this.data},e.setGameData=function(t,e){var i=this;this.data[t]=e,this.useSpringroll?s.UserData.write("pbs_pondlife",this.data).then((function(t){s.Debugger.log("log","UserData saved "+t)}),(function(t){s.Debugger.log("error",t),i.saveToLocalStorage()})):this.saveToLocalStorage()},e.deleteGameData=function(){var t=this;this.useSpringroll?s.UserData.write("pbs_pondlife",{}).then((function(t){s.Debugger.log("log","UserData saved "+t)}),(function(e){s.Debugger.log("error",e),t.deleteLocalStorage()})):this.deleteLocalStorage()},e.destroy=function(){n=null},t}()},dD3M:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e){var i,s=e.game,a=e.x,o=void 0===a?0:a,r=e.y,h=void 0===r?0:r,d=e.up,l=e.over,u=e.atlas,c=void 0===u?"ui_buttons":u,p=e.playClick,m=void 0===p||p,f=e.sfxID,g=void 0===f?"click":f,v=e.vo;return(i=t.call(this,s,o,h,c)||this).setFrames(l,d,d,d),i.anchor.set(.5),i.playClick=m,i.sfxID=g,i.data={},i.out=d,i.over=l,i.isOver=!1,i.input.useHandCursor=!0,i.onInputDown.add(i.onDown,(0,n.default)(i)),i.onInputUp.add(i.onUp,(0,n.default)(i)),i.onInputOver.add(i.onOver,(0,n.default)(i)),i.onInputOut.add(i.onOut,(0,n.default)(i)),i.vo=v,i.isTouch="desktop"!==i.game.deviceMetric.platform.type,i.init(),i}(0,a.default)(e,t);var i=e.prototype;return i.init=function(){this.enable()},i.enable=function(){this.input.enabled=!0},i.disable=function(){this.input.enabled=!1},i.isWithinBounds=function(t,e){return this.getBounds().contains(t,e)},i.onOver=function(){this.isOver=!0,this.vo&&this.playVO("hover")},i.onOut=function(){this.isOver=!1},i.onDown=function(){this.playClick&&this.game.sounds.playSFX(this.sfxID,{spriteID:"sfx_general"}),this.vo&&this.playVO("click")},i.onUp=function(){},i.playVO=function(t){var e=null,i=this.vo,s=i.id,n=i.spriteID,a=i.desktop,o=void 0===a||a,r=i.device,h=void 0===r||r;switch(t){case"hover":!this.isTouch&&o&&(e=this.game.sounds.playVO(s,{spriteID:n,ignoreIfPlaying:!0}));break;case"click":this.isTouch&&h&&(e=this.game.sounds.playVO(s,{spriteID:n,ignoreIfPlaying:!0}))}e&&this.game.springRollCaptionsPlugin.playCaption(this.vo.id)},i.destroy=function(e){void 0===e&&(e=!0),this.clearFrames(),this.disable(),this.onInputDown.removeAll(),this.onInputDown=null,this.onInputUp.removeAll(),this.onInputUp=null,this.onInputOver.removeAll(),this.onInputOver=null,this.onInputOut.removeAll(),this.onInputOut=null,t.prototype.destroy.call(this,e)},e}(Phaser.Button);e.default=o},evHg:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ZOOM_STATE=void 0;var n=s(i("C9uT")),a={ZOOMED_IN:0,ZOOMED_OUT:1};e.ZOOM_STATE=a;var o=function(){function t(){this.state=a.ZOOMED_IN,this.active=!1}return t.prototype.getZoomButtonOptions=function(){return{position:"surface"===this.currentPondLayer?"TOP":"bottom"===this.currentPondLayer&&"BOTTOM",state:this.state}},(0,n.default)(t,[{key:"active",get:function(){return this.isActive},set:function(t){this.isActive=t}},{key:"state",get:function(){return this._state},set:function(t){this._state=t}},{key:"currentPondLayerId",set:function(t){this.currentPondLayer=t}},{key:"isZoomedOut",get:function(){return this.state===a.ZOOMED_OUT}}]),t}();e.default=o},"f+AP":function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("fKPv")),o=n(i("86MP")),r=n(i("tpwa")),h=s(i("Akkm"));function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var p=[[0],[-161,161]],m=function(t){function e(e,i){var s,n=i.options;return(s=t.call(this,e)||this).options=n,s.onPickUp=new Phaser.Signal,s.onReadFact=new Phaser.Signal,s.onEnterDecisionState=new Phaser.Signal,s.createTapArea(),s.createBar(),s}(0,o.default)(e,t);var i=e.prototype;return i.createTapArea=function(){this.tapArea=this.game.make.graphics(),this.tapArea.beginFill(10066329,0),this.tapArea.drawRect(0,0,this.game.width,this.game.height),this.addChild(this.tapArea),this.tapArea.x=.5*-(this.game.width-this.game.defaultWidth)},i.enableTapArea=function(){this.tapArea.inputEnabled||(this.tapArea.inputEnabled=!0,this.tapArea.input.useHandCursor=!0,this.tapArea.events.onInputUp.add(this.tapAreaClicked,this))},i.disableTapArea=function(){this.tapArea.inputEnabled&&(this.tapArea.inputEnabled=!1,this.tapArea.input.useHandCursor=!1,this.tapArea.events.onInputUp.remove(this.tapAreaClicked,this))},i.tapAreaClicked=function(){this.factBook.onUp()},i.createBar=function(){this.optionsBar=this.game.make.image(0,0,"ui_various","options_bar"),this.optionsBar.anchor.set(.5),this.optionsBar.x=this.game.defaultWidth/2,this.optionsBar.y=this.game.defaultHeight+this.optionsBar.height,this.addChild(this.optionsBar),this.showBar()},i.showBar=function(){if(this.optionsBar){var t=this.game.defaultHeight-.5*this.optionsBar.height-20;this.game.make.tween(this.optionsBar).to({y:t},400,"Quad.easeOut",!0).onComplete.addOnce(this.onShowBarComplete,this)}},i.onShowBarComplete=function(){this.createItems(this.options)},i.hideBar=function(){if(this.optionsBar){var t=this.game.defaultHeight+this.optionsBar.height;this.game.make.tween(this.optionsBar).to({y:t},400,"Quad.easeIn",!0)}this.factBook&&this.factBook.animateOff()},i.disableItems=function(){for(var t,e=u(this.items);!(t=e()).done;){var i=t.value;i.disableBranchItem(),i.onPickUp.remove(this.handlePickUp,this),i.onReadFact.remove(this.handleReadFact,this)}},i.enableItems=function(){for(var t,e=u(this.items);!(t=e()).done;){var i=t.value;i.enableBranchItem(),i.onPickUp.add(this.handlePickUp,this),i.onReadFact.add(this.handleReadFact,this)}},i.createItems=function(t){this.items=[];for(var e,i=p[t.length-1],s=u(t.entries());!(e=s()).done;){var n=e.value,a=n[0],o=n[1],h=o.key,d=new r.default(this.game,{id:h,index:a,data:l({},o),atlas:"tray_creatures",enabled:!1});this.addChild(d),d.x=this.game.defaultWidth/2+i[a],d.y=this.optionsBar.y+47-.5*d.height,d.onNameRead.addOnce(this.showItem,this),this.items.push(d)}this.showCount=0,this.showItem()},i.showItem=function(){this.items[this.showCount]?(this.items[this.showCount].animateOn(),this.showCount++):this.showItemsComplete()},i.showItemsComplete=function(){this.enableItems(),this.createFactButton(),this.enterDecisionState()},i.handlePickUp=function(t){for(var e,i=u(this.items);!(e=i()).done;){e.value.animateOff()}this.factBook.disable(),this.onPickUp.dispatch(t)},i.handleReadFact=function(t){for(var e,i=u(this.items);!(e=i()).done;){e.value.unselect(t.id)}this.factBook.disable(),this.onReadFact.dispatch(t)},i.createFactButton=function(){var t=this.optionsBar.x+.5*this.optionsBar.width-100,e=this.optionsBar.y-.5*this.optionsBar.height-20;this.factBook=new h.default(this.game,{x:t,y:e}),this.addChild(this.factBook),this.factBook.onClicked.add(this.handleBookClicked,this)},i.enterFactState=function(){this.optionsBar.frameName="options_bar_selected";for(var t,e=u(this.items);!(t=e()).done;){t.value.setFactState(!0)}this.enableTapArea()},i.enterDecisionState=function(){this.optionsBar.frameName="options_bar";for(var t,e=u(this.items);!(t=e()).done;){var i=t.value;i.setFactState(!1),i.selected=!1,i.enableBranchItem()}this.factBook.reset(),this.factBook.enable(),this.disableTapArea(),this.onEnterDecisionState.dispatch()},i.handleBookClicked=function(t){t===h.STATE.FACT?this.enterFactState():t===h.STATE.DECISION&&this.enterDecisionState()},i.enterReadingFactState=function(){},i.narrateFactComplete=function(){for(var t,e=u(this.items);!(t=e()).done;){var i=t.value;i.selected=!1,i.enableBranchItem()}this.factBook.enable()},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){if(void 0===e&&(e=!0),this.factBook&&(this.factBook.onClicked.remove(this.handleBookClicked,this),this.factBook.destroy(),this.factBook=null),this.tapArea&&(this.disableTapArea(),this.tapArea.destroy(),this.tapArea=null),this.clearSignal(this.onPickUp),this.onPickUp=null,this.clearSignal(this.onReadFact),this.onReadFact=null,this.clearSignal(this.onEnterDecisionState),this.onEnterDecisionState=null,Array.isArray(this.items))for(var s,n=u(this.items);!(s=n()).done;){var a=s.value;a.disableBranchItem(),a.onNameRead.remove(this.showItem,this),a.onPickUp.remove(this.handlePickUp,this),a.onReadFact.remove(this.handleReadFact,this),a.destroy(),a=null}this.items=null,this.optionsBar&&(this.optionsBar.destroy(),this.optionsBar=null),this.options=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=m},fY54:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=i("zgbH");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h=function(){function t(t,e,i){this.copy={},this.game=t,this.levelDialogue=i;for(var s=e.getElementsByTagName("item"),n=0;n<s.length;n++)this.copy[s[n].getAttribute("id")]=s[n].childNodes[0].nodeValue}var e=t.prototype;return e.setElinorCopy=function(t){var e=t.getElementsByTagName("item");this.elinorCopy={};for(var i=0;i<e.length;i++)this.elinorCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.setSceneCopy=function(t){var e=t.getElementsByTagName("item");this.sceneCopy={};for(var i=0;i<e.length;i++)this.sceneCopy[e[i].getAttribute("id")]=e[i].childNodes[0].nodeValue},e.getElinorCopy=function(t,e){return e&&this.elinorCopy[t+"_device"]?this.elinorCopy[t+"_device"]:this.elinorCopy[t]||""},e.getSceneCopy=function(t,e){return e&&this.sceneCopy[t+"_device"]?this.sceneCopy[t+"_device"]:this.sceneCopy[t]||""},e.getCopy=function(t,e){return e&&this.copy[t+"_device"]?this.copy[t+"_device"]:this.copy[t]||"copy not found [ "+t+" ]"},e.getCopyNoDefault=function(t){return this.copy[t]||null},e.getFontFamily=function(t,e){return t?e+"px "+a.FONT_TITLE:e+"px "+a.FONT_COPY},e.createFontStyle=function(t,e,i,s){return void 0===s&&(s={}),r({font:this.getFontFamily(t,e),fill:i,boundsAlignH:s.boundsAlignH||"center",boundsAlignV:s.boundsAlignV||"middle"},s)},e.createSubtitleFontStyle=function(t,e,i){return void 0===i&&(i={}),r({font:t+"px "+a.FONT_SUBTITLE,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.createSetUpFontStyle=function(t,e,i){return void 0===i&&(i={}),r({font:t+"px "+a.FONT_ITALIC,fill:e,boundsAlignH:i.boundsAlignH||"center",boundsAlignV:i.boundsAlignV||"middle"},i)},e.getLevelDialogue=function(t){return this.levelDialogue[t]},e.getGameDialogue=function(t){return this.game.cache.getJSON("dialogue_"+t)},e.getGameIntroDialogue=function(t){var e=this.getGameDialogue(t);return!!e&&e.intro},e.getGameOutroDialogue=function(t,e){var i=this.getGameDialogue(t);return i&&i.outro[e]||!1},e.getCharacterName=function(t){return this.getCopy(t)},e.getHowToPlayCopy=function(){for(var t=0,e=[];t<1;){var i=this.copy["howtoplay_"+(t+1)+"_title"],s=this.copy["howtoplay_"+(t+1)+"_copy"];e.push({title:i,copy:s}),t++}return e},t}();e.default=h},g24n:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("7EEF"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=s(i("86MP")),o=s(i("c25H"));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var u=[324,644,856,960,960],c=function(t){function e(e,i){var s,n=i.options;return(s=t.call(this,e)||this).halfWidth=s.game.defaultWidth/2,s.halfHeight=s.game.defaultHeight/2,s.onPickUp=new Phaser.Signal,s.createBar(),s.createItems(n),s}(0,a.default)(e,t);var i=e.prototype;return i.createBar=function(){this.optionsBar=this.game.make.image(0,0,"ui_various","options_bar"),this.optionsBar.anchor.set(.5),this.optionsBar.x=this.game.defaultWidth/2,this.optionsBar.y=this.game.defaultHeight-.5*this.optionsBar.height-20,this.addChild(this.optionsBar)},i.hideBar=function(){if(this.optionsBar){var t=this.game.defaultHeight+this.optionsBar.height;this.game.make.tween(this.optionsBar).to({y:t},400,"Quad.easeIn",!0)}},i.enableOptions=function(){},i.disableOptions=function(){},i.enableItems=function(){for(var t,e=d(this.items);!(t=e()).done;){var i=t.value;this.itemsById[i].enable()}},i.disableItems=function(){for(var t,e=d(this.items);!(t=e()).done;){var i=t.value;this.itemsById[i].disable()}},i.createItems=function(t){this.itemsById={},this.items=[];for(var e,i=t.length,s=u[i-1],n=s/i,a=d(t.entries());!(e=a()).done;){var r=e.value,l=r[0],c=r[1],p=c.id,m=p+"_"+l;c.displayId=m;var f=new o.default(this.game,{id:p,data:h({},c),atlas:"tray_creatures"});this.addChild(f);var g=-.5*s+l*n+.5*n,v=n/324;f.scale.set(v),f.x=this.halfWidth+g,f.y=this.optionsBar.y+47-.5*f.height,f.onInputDown.add(this.handleInputDown,this),this.items.push(m),this.itemsById[m]=f,f.animateOn()}},i.repositionItems=function(){for(var t,e=this.items.length,i=u[e-1],s=i/e,n=d(this.items.entries());!(t=n()).done;){var a=t.value,o=a[0],r=a[1],h=this.itemsById[r];h.disable();var l=-.5*i+o*s+.5*s;h.animateTo(this.halfWidth+l)}},i.handleInputDown=function(t){var e=t.displayId;this.destroyItem(e),this.repositionItems(),this.onPickUp.dispatch(t)},i.destroyItem=function(t){var e=this.itemsById[t];e&&(e.onInputDown.remove(this.handleInputDown,this),e.destroy()),e=null,this.itemsById[t]=null,this.items=this.items.filter((function(e){return e!==t}))},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){void 0===e&&(e=!0),this.clearSignal(this.onPickUp),this.onPickUp=null;for(var s,n=d(this.items);!(s=n()).done;){var a=s.value;this.destroyItem(a)}this.itemsById=null,this.optionsBar&&(this.optionsBar.destroy(),this.optionsBar=null),t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=c},g4PE:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.camouflaged=!0,n.button.anchor.set(.7,.5),n}return(0,n.default)(e,t),e}(s(i("PsHK")).default);e.default=a},gdNA:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;n=t.call(this,e,i,s)||this;var a=s.atlas,o=s.key;return n.asset=n.game.make.sprite(0,0,a,o),n.asset.anchor.set(.5),n.addChild(n.asset),n}(0,n.default)(e,t);var i=e.prototype;return i.setDestPoint=function(){t.prototype.setDestPoint.call(this),this.scale.x=this.dir},i.destroy=function(){this.asset.destroy(),t.prototype.destroy.call(this)},e}(s(i("UaYW")).default);e.default=a},gsGo:function(t,e,i){"use strict";var s=i("R6lU"),n=i("IfHf");i("YY9M"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("+G5l")),o=s(i("wqsV")),r=i("cjcH"),h=i("TEuq"),d=i("9k7I"),l=function(){function t(t,e){var i=e.model,s=e.isVisible,n=void 0!==s&&s;this.game=t,this.model=i,this.gameSettings=null,this.saveSettings=null,this.levelSettings=null,this.myCreaturesUnlockedControl=null,this.currentPondControl=null,this.pondDebugControl=null,this.unlockArrowsControl=null,this.saveControl=null,this.saveSelectControl=null,this.soundControl=null,this.sfxControl=null,this.musicControl=null,this.voControl=null,this.captionsControl=null,this.boundClearSaves=this.clearSaves.bind(this),this.boundToggle=this.toggleDisplay.bind(this),this.boundSaveSelect=this.onSaveSelect.bind(this),this.boundToggleDebugPond=this.toggleDebugPond.bind(this),this.boundToggleUnlockArrows=this.toggleUnlockArrows.bind(this),this.boundToggleSound=this.toggleSound.bind(this),this.boundToggleSFX=this.toggleSFX.bind(this),this.boundToggleMusic=this.toggleMusic.bind(this),this.boundToggleVO=this.toggleVO.bind(this),this.boundToggleCaptions=this.toggleCaptions.bind(this),this.isVisible=n,this.trigger=new o.default({sequence:"↑ ↑ ↓ ↓ ← →",onComplete:this.boundToggle,onFail:function(t){h.Debugger.log("log","key shortcut "+t+" unrecognised")}})}var e=t.prototype;return e.toggleDisplay=function(){this.isVisible?this.hide():this.show()},e.toggleDebugPond=function(){this.game.controller.shortcutDebugPond(this.model.pondDebug)},e.toggleUnlockArrows=function(){this.game.controller.updateShortcutsState(this.model)},e.toggleSound=function(){this.game.sounds.soundVolume=this.model.sound?1:0},e.toggleSFX=function(){this.game.sounds.sfxVolume=this.model.sfx?1:0},e.toggleMusic=function(){this.game.sounds.musicVolume=this.model.music?1:0},e.toggleVO=function(){this.game.sounds.voVolume=this.model.vo?1:0},e.toggleCaptions=function(){this.game.springRollCaptionsPlugin.setMute(!this.model.captions)},e.open=function(){this.gui.open()},e.close=function(){this.gui.close()},e.show=function(){this.isVisible=!0,this.gui.show()},e.hide=function(){this.isVisible=!1,this.gui.hide()},e.clearSaves=function(){(0,r.getLS)().deleteGameData(),location.reload()},e.setVisible=function(){this.isVisible?this.show():this.hide()},e.createGameSettings=function(){this.gameSettings=this.gui.addFolder("Game Settings"),this.currentPondControl=this.gameSettings.add(this.model,"currentPond").name("Current Pond Save");var t=this.currentPondControl.domElement.getElementsByTagName("input")[0];t&&(t.readOnly=!0),this.myCreaturesUnlockedControl=this.gameSettings.add(this.model,"myCreaturesUnlocked").name("My creatures unlocked"),this.pondDebugControl=this.gameSettings.add(this.model,"pondDebug").name("Debug Pond").onChange(this.boundToggleDebugPond),this.unlockArrowsControl=this.gameSettings.add(this.model,"arrowsUnlocked").name("Unlock Arrows").onChange(this.boundToggleUnlockArrows)},e.onSaveSelect=function(t){"SELECT"!==t&&(0,d.loadSave)(this.game,this.onSaveloaded,this,t)},e.onSaveloaded=function(){var t=this.game.cache.getJSON(d.SAVE_KEY);this.game.controller.shortcutAddSave(t)},e.createSaveSettings=function(){this.saveSettings=this.gui.addFolder("Saved Data"),this.saveControl=this.saveSettings.add(this.model,"clearPlayerSaves").name("Delete all Pond Saves").onChange(this.boundClearSaves),this.saveSettings.open()},e.createAudioSettings=function(){this.audioSettings=this.gui.addFolder("Audio"),this.soundControl=this.audioSettings.add(this.model,"sound").name("Sound").onChange(this.boundToggleSound),this.sfxControl=this.audioSettings.add(this.model,"sfx").name("SFX").onChange(this.boundToggleSFX),this.musicControl=this.audioSettings.add(this.model,"music").name("Music").onChange(this.boundToggleMusic),this.voControl=this.audioSettings.add(this.model,"vo").name("VO").onChange(this.boundToggleVO),this.captionsControl=this.audioSettings.add(this.model,"captions").name("Captions").onChange(this.boundToggleCaptions)},e.create=function(){a.GUI.TEXT_CLOSED="Close Shortcuts",a.GUI.TEXT_OPEN="Open Shortcuts",this.gui=new a.GUI({name:"Shortcuts",closed:!0,autoPlace:!1,width:300}),this.gui.domElement.id="gui",document.getElementById("shortcuts-container").appendChild(this.gui.domElement),this.createGameSettings(),this.createSaveSettings(),this.createAudioSettings(),this.close(),this.hide()},e.update=function(){this.currentPondControl.updateDisplay()},e.reset=function(){this.model.currentPond="none",this.currentPondControl.updateDisplay(),this.levelSettings&&this.gui.removeFolder(this.levelSettings),this.levelSettings=null},e.addPondData=function(t){var e=t.saveId;this.model.currentPond=e,this.currentPondControl.updateDisplay()},e.showLevelSettings=function(){this.currentPondControl.updateDisplay()},e.cleanUp=function(t){t&&(t.remove(),t=null)},e.destroy=function(){this.cleanUp(this.unlockArrowsControl),this.cleanUp(this.myCreaturesUnlockedControl),this.cleanUp(this.currentPondControl),this.cleanUp(this.pondDebugControl),this.gui.removeFolder(this.gameSettings),this.gameSettings=null,this.cleanUp(this.saveControl),this.cleanUp(this.saveSelectControl),this.gui.removeFolder(this.saveSettings),this.saveSettings=null,this.cleanUp(this.soundControl),this.cleanUp(this.sfxControl),this.cleanUp(this.musicControl),this.cleanUp(this.voControl),this.cleanUp(this.captionsControl),this.gui.removeFolder(this.audioSettings),this.audioSettings=null,this.gui.removeFolder(this.levelSettings),this.levelSettings=null,this.gui.destroy(),this.gui=null,this.trigger.destroy(),this.trigger=null,this.debugsaves=null},t}();e.default=l},gwMp:function(t,e,i){"use strict";i("XvIX"),i("XEfP"),i("ocEJ"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("TEuq"),n=i("SPpy"),a=function(){function t(t,e){var i=e.debug,s=void 0!==i&&i;this.game=t,this.debug=s,this.loadTracker=this.game.controller.loadTracker,this.onLoadComplete=new Phaser.Signal}var e=t.prototype;return e.handleFileError=function(t){this.loadError=!0,this.debug&&s.Debugger.log("error","OnboardLoader.handleFileError "+t)},e.handleFileStart=function(t,e){-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},e.handleLoadStart=function(){this.loadedAssets=(0,n.getGameFileLoadList)(this.game,this.debug)},e.handleFileComplete=function(t,e,i){this.debug&&s.Debugger.log("log","OnboardLoader.handleFileComplete "+t+", "+e+", "+i),i&&-1!==e.indexOf("-audioatlas")&&this.audioSprites.push(e.replace("-audioatlas",""))},e.handleLoadComplete=function(){this.game.controller.assetsLoaded=!0,this.debug&&s.Debugger.log("log","OnboardLoader.handleLoadComplete");for(var t=0;t<this.audioSprites.length;t++)this.game.sounds.addAudioSprite({id:this.audioSprites[t]});this.game.sounds.decode(this.audioSprites,this.onComplete,this)},e.loadAssets=function(){this.game.load.baseURL=this.game.urls.getAssetsDirectory(),this.game.load.onLoadStart.add(this.handleLoadStart,this),this.game.load.onFileStart.add(this.handleFileStart,this),this.game.load.onFileError.add(this.handleFileError,this),this.game.load.onFileComplete.add(this.handleFileComplete,this),this.game.load.onLoadComplete.add(this.handleLoadComplete,this),this.audioSprites=[];var t=this.game.cache.getJSON("load_manifest").environment;this.loadPacks(t);var e=this.game.cache.getJSON("load_manifest").themes;this.loadPacks(e);var i=this.game.cache.getJSON("load_manifest").characters;this.loadPacks(i);var s=this.game.cache.getJSON("load_manifest").onboarding;this.loadPacks(s),this.game.load.start()},e.loadPacks=function(t){for(var e=t.path,i=t.packs,s=0;s<i.length;s++){var n=i[s];this.game.load.pack(n.key,e+n.file,null,this)}},e.loadUpdate=function(){},e.onComplete=function(){this.onLoadComplete.dispatch()},e.destroy=function(){this.loadTracker=null,this.game.load.onLoadStart.remove(this.handleLoadStart,this),this.game.load.onFileStart.remove(this.handleFileStart,this),this.game.load.onFileComplete.remove(this.handleFileComplete,this),this.game.load.onFileError.remove(this.handleFileError,this),this.game.load.onFileComplete.remove(this.handleFileComplete,this),this.game.load.onLoadComplete.remove(this.handleLoadComplete,this)},t}();e.default=a},"hDA+":function(t,e,i){"use strict";i("vw/H"),i("q4B+"),Object.defineProperty(e,"__esModule",{value:!0}),e.playDeviceAudioAndCaption=e.playAudioAndCaption=e.isObjEmpty=e.shuffle=e.easeOutQuad=e.easeInQuad=e.zeroPad=e.calculateAspectRatioFit=void 0;e.calculateAspectRatioFit=function(t,e,i,s,n){void 0===n&&(n=3);var a=Math.min(i/t,s/e),o=Math.min(a,n);return{width:t*o,height:e*o,ratio:o}};e.zeroPad=function(t,e){var i=Math.abs(t),s=Math.max(0,e-Math.floor(i).toString().length),n=Math.pow(10,s).toString().substr(1);return t<0&&(n="-"+n),n+i};e.easeInQuad=function(t,e,i,s){return i*(t/=s)*t+e};e.easeOutQuad=function(t,e,i,s){return-i*(t/=s)*(t-2)+e};e.shuffle=function(t){for(var e,i,s=t.length;s>0;)i=Math.floor(Math.random()*s),e=t[--s],t[s]=t[i],t[i]=e;return t};e.isObjEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})};e.playAudioAndCaption=function(t,e){var i=e.spriteID,s=void 0===i?"vo_ui":i,n=e.id,a=e.stop;(void 0===a||a)&&t.sounds.stopAllSFX(),t.sounds.playVO(n,{spriteID:s})&&t.springRollCaptionsPlugin.playCaption(n)};e.playDeviceAudioAndCaption=function(t,e){var i=e.spriteID,s=void 0===i?"vo_ui":i,n=e.id,a=e.stop,o=void 0===a||a,r="desktop"===t.deviceMetric.platform.type?n+"_click":n+"_tap";o&&t.sounds.stopAllSFX(),t.sounds.playVO(r,{spriteID:s})&&t.springRollCaptionsPlugin.playCaption(r)}},hNsG:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.POND_OVERVIEW_SCALE=void 0;var s=1,n=.4,a=10,o=4;e.POND_OVERVIEW_SCALE=.28;var r=function(){function t(t,e){var i=e.scene,s=e.cameraFollow,n=e.pondModel;this.game=t,this.scene=i,this.cameraFollow=s,this.pondModel=n;var a=this.pondModel.data,o=a.offsetY,r=a.bounds;this.offsetY=o,this.bounds=r;this.game.world.setBounds(this.bounds.x,this.bounds.y,1*this.bounds.w,this.offsetY+1*this.bounds.h),this.game.camera.follow(this.cameraFollow,Phaser.Camera.FOLLOW_LOCKON),this.cameraX=this.destX=0,this.cameraY=this.destY=0,this.cameraScale=this.destScale=1,this.isPanning=!1,this.isZooming=!1,this.onMoveComplete=new Phaser.Signal,this.onZoomComplete=new Phaser.Signal,this.setDefaultSpeed()}var e=t.prototype;return e.setIntroSpeed=function(){this.speedH=s,this.speedV=s,this.scaleSpeed=n},e.setIntroVerticalSpeed=function(){this.speedH=a,this.speedV=s,this.scaleSpeed=n},e.setDefaultSpeed=function(){this.speedH=a,this.speedV=a,this.scaleSpeed=o},e.step=function(t){if(this.isPanning){if(this.cameraX!==this.destX){var e=this.destX-this.cameraX,i=e<0?-1:1;e=Math.min(200,Math.abs(e))*i,this.cameraX+=e*t*this.speedH}if(this.cameraY!==this.destY){var s=this.destY-this.cameraY,n=s<0?-1:1;s=Math.min(200,Math.abs(s))*n,this.cameraY+=s*t*this.speedV}if(this.cameraScale!==this.destScale){var a=this.destScale-this.cameraScale,o=a<0?-1:1;a=Math.min(200,Math.abs(a))*o,this.cameraScale+=a*t*this.scaleSpeed}Math.abs(this.destX-this.cameraX)<1&&(this.cameraX=this.destX),Math.abs(this.destY-this.cameraY)<1&&(this.cameraY=this.destY),Math.abs(this.destScale-this.cameraScale)<.002&&(this.cameraScale=this.destScale),this.cameraX===this.destX&&this.cameraY===this.destY&&this.cameraScale===this.destScale&&this.moveComplete(),this.scene.scale.set(this.cameraScale),this.cameraFollow.position.set(this.cameraX,this.cameraY),this.game.world.setBounds(this.bounds.x,this.bounds.y,this.bounds.w*this.cameraScale,(this.offsetY+this.bounds.h)*this.cameraScale)}else if(this.isZooming){if(this.cameraScale!==this.destScale){var r=this.destScale-this.cameraScale,h=r<0?-1:1;r=Math.min(200,Math.abs(r))*h,this.cameraScale+=r*t*this.scaleSpeed}Math.abs(this.destScale-this.cameraScale)<.001&&(this.cameraScale=this.destScale),this.scene.scale.set(this.cameraScale),this.cameraScale===this.destScale&&this.zoomComplete(),this.game.world.setBounds(this.bounds.x,this.bounds.y,this.bounds.w*this.cameraScale,(this.offsetY+this.bounds.h)*this.cameraScale)}},e.zoomComplete=function(){this.isZooming=!1,this.onZoomComplete.dispatch(this.getAvailableDirections())},e.moveComplete=function(){this.isPeek?this.pan(0,this.savedY):(this.isPanning=!1,this.onMoveComplete.dispatch(this.getAvailableDirections()))},e.pan=function(t,e,i,s){void 0===s&&(s=!1);var n=t,a=e,o=this.cameraX+n,r=this.cameraY+a;this.destScale=i||this.destScale,this.isPeek=s;var h=this.boundsCheck(o,r),d=h.toX,l=h.toY;this.isPanning=d!==this.cameraX||l!==this.cameraY||i!==this.cameraScale,this.destX=d,this.destY=l,this.isPanning||this.moveComplete()},e.peek=function(t,e){this.savedY=-1*e,this.pan(t,e,0,!0)},e.getBounds=function(){var t=.5*this.game.width,e=.5*this.game.height,i=t,s=this.bounds.w-t,n=this.offsetY+e,a=this.offsetY+this.bounds.h-e;return this.pondModel.zoom.isZoomedOut&&(i=.5*this.bounds.w-.75*this.game.width,s=.5*this.bounds.w+.75*this.game.width,n=.5*this.bounds.h-.75*this.game.height,a=.5*this.bounds.h+.75*this.game.height),{top:n,left:i,right:s,bottom:a}},e.getAvailableHorizontalDirections=function(){var t=this.getBounds(),e=t.left,i=t.right,s={left:!1,right:!1};return this.cameraX>e&&(s.left=!0),this.cameraX<i&&(s.right=!0),s},e.getAvailableDirections=function(){var t=this.getBounds(),e=t.top,i=t.left,s=t.right,n=t.bottom,a={left:!1,right:!1,up:!1,down:!1};return this.cameraX>i&&(a.left=!0),this.cameraX<s&&(a.right=!0),this.cameraY>e&&(a.up=this.pondModel.validateUp()),this.cameraY<n&&(a.down=!0),a},e.boundsCheck=function(t,e){var i=this.getBounds(),s=i.top,n=i.left,a=i.right,o=i.bottom,r=t,h=e;return t<n?r=n:t>a&&(r=a),e<s?h=s:e>o&&(h=o),{toX:r,toY:h}},e.zoomTo=function(t){this.savedCameraScale=this.cameraScale,this.isZooming=t!==this.destScale,this.destScale=t},e.zoomToSaved=function(){this.isZooming=this.savedCameraScale!==this.destScale,this.destScale=this.savedCameraScale},e.setPosition=function(t,e,i){this.destX=this.cameraX=t,this.destY=this.cameraY=e,this.destScale=this.cameraScale=i,this.isPanning=!0},e.panLeft=function(){var t=this.pondModel.zoom.isZoomedOut?-this.bounds.w:-960;this.pan(t,0)},e.panRight=function(){var t=this.pondModel.zoom.isZoomedOut?this.bounds.w:960;this.pan(t,0)},e.panUp=function(){var t=this.pondModel.zoom.isZoomedOut,e=t?-this.bounds.h:-720;t?this.pondModel.panTop():this.pondModel.panUp();var i=this.pondModel.getCurrentLayerScale();this.pan(0,e,i)},e.panDown=function(){var t=this.pondModel.zoom.isZoomedOut,e=t?this.bounds.h:720;t?this.pondModel.panBottom():this.pondModel.panDown();var i=this.pondModel.getCurrentLayerScale();this.pan(0,e,i)},e.zoomToActiveLayer=function(){var t=this.pondModel.getCurrentLayerScale(),e=this.pondModel.pondLayerIndex;this.pan(0,720*e,t)},e.panToActiveLayer=function(){var t=this.pondModel.panToActiveLayer(),e=t.y,i=t.scale;e>0&&this.pan(0,-720*e,i)},e.panTo=function(t,e){var i=t-this.cameraX,s=960*Math.round(i/960);if(e){var n=e-this.cameraY,a=720*Math.round(n/720);this.peek(s,a,0)}else this.pan(s,0,0)},e.start=function(){var t=this.pondModel.getCurrentLayerData(),e=t.y,i=t.scale,s=.5*this.bounds.w;this.setPosition(s,e,i)},e.startOnboardPanDown=function(){var t=this.pondModel.getPondLayerDataById("surface"),e=t.y,i=t.scale,s=this.pondModel.getPondLayerDataById("bottom"),n=s.y,a=s.scale,o=.5*this.bounds.w;this.cameraScale=i,this.destScale=a,this.destX=this.cameraX=o,this.cameraY=e,this.destY=n,this.setIntroSpeed(),this.step(1),this.isPanning=!0},e.zoomToPondComplete=function(){var t=this.pondModel.getPondLayerDataById("surface").y;this.destX=.5*this.bounds.w,this.destY=t,this.destScale=.28,this.isPanning=!0},e.zoomToPondOverview=function(){this.zoomTo(.28)},e.destroy=function(){this.isPanning=!1,this.game=null,this.scene=null,this.cameraFollow.destroy(!0),this.cameraFollow=null,this.onMoveComplete.removeAll(),this.onMoveComplete=null,this.onZoomComplete.removeAll(),this.onZoomComplete=null,this.pondModel=null},t}();e.default=r},hi8H:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},ioi1:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("wiMi"),i("j3Ef"),i("7EEF"),i("COu/"),i("a/rO"),i("96V2"),i("QQAp"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.createSpawnItems=e.updateTotalsById=e.zeroTotalsById=e.getTotalsById=void 0;var n=s(i("fKPv")),a=i("lZbN"),o=i("MPoQ");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var u=function(t,e,i){switch(e){case o.GEOLOGY:case o.PLANT:return i[e];case o.CREATURE:return i[t]}};e.getTotalsById=u;e.zeroTotalsById=function(t,e,i){switch(e){case o.GEOLOGY:case o.PLANT:i[e]=0;break;case o.CREATURE:i[t]=0}};e.updateTotalsById=function(t,e,i){switch(e){case o.GEOLOGY:case o.PLANT:i[e]=i[e]?i[e]+1:1;break;case o.CREATURE:i[t]=i[t]?i[t]+1:1}};var c=function(t,e,i,s){for(var n=Math.floor((e-300)/t),a=.5*(n-n/4),o=[],r=0;r<t;r++){var h={};h.id="zone_"+r,h.unpadX=300+n*r,h.unpadW=n-1,h.x=300+a+n*r,h.w=n-2*a,h.itemCount=0,o.push(h)}if(i){for(var l,u=d(i);!(l=u()).done;)for(var c,p=s[l.value].x,m=d(o);!(c=m()).done;){var f=c.value;if(p>=f.unpadX&&p<f.unpadX+f.unpadW){f.itemCount++;break}}o.sort((function(t,e){return t.itemCount>e.itemCount?1:-1}))}return o},p=function(t,e,i,s,n,o){var r=s+"_"+t.layerItems[e][i].length;t.layerItems[e][i].push(r),n.x=o.x+Math.random()*o.w,n.depth=t.elementsByID[s].depth;var h=(0,a.createPondItem)(r,e,n);t.itemsById[r]=h,t.pending.push(r)};e.createSpawnItems=function(t,e,i,s){var n=s.id,a=s.type,r=function(t,e,i,s){var n=s.type,a=0,r=[];switch(n){case o.GEOLOGY:a=t.populationsByID.geology,r=c(a,i,t.layerItems[e][n],t.itemsById);break;case o.PLANT:var h=s.plantType;a=t.populationsByID.plant[h],a+=t.plantTypes[h+"_extra"].length,r=c(a,i,t.layerItems[e][n],t.itemsById);break;case o.CREATURE:a=s.population,r=c(a,i)}return{population:a,dropZones:r}}(t,e,i,s),d=r.population,l=r.dropZones,m=d-u(n,a,t.totalsById);if(m>0)if(a===o.PLANT){var f=s.plantType;(function(t,e,i,s,n,a){for(;s>0;){var o=n.shift(),r=Math.floor(Math.random()*t.plantTypes[a].length),d=t.plantTypes[a][r],l=h({id:d},t.elementsByID[d]);l.animation=h({},t.animationsByID[d]),l.aiData=h({},t.aiDataByID[d]),p(t,e,i,l.id,l,o),s--}})(t,e,a,m=t.populationsByID.plant[f],l,f),function(t,e,i,s,n){for(Phaser.ArrayUtils.shuffle(n);n.length>0;){var a=s.shift(),o=n.shift(),r=h({id:o},t.elementsByID[o]);r.animation=h({},t.animationsByID[o]),r.aiData=h({},t.aiDataByID[o]),p(t,e,i,r.id,r,a)}}(t,e,a,l,[].concat(t.plantTypes[f+"_extra"]))}else a===o.GEOLOGY?function(t,e,i,s,n,a,o){for(;a>0;){var r=o.shift(),d=Math.floor(Math.random()*t.rockTypes.length),l=t.rockTypes[d],u=h({id:l},t.elementsByID[l]);p(t,e,i,u.id,u,r),a--}}(t,e,a,0,0,m,l):function(t,e,i,s,n,a,o){for(;a>0;){var r=o[a-1];p(t,e,i,s,n,r),a--}}(t,e,a,n,s,m,l)}},irCZ:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("VatX")).default);e.default=a},jXut:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},knPr:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},ko7Z:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s,a){var o;return(o=t.call(this,e)||this).environment=i,o.depth=a,o.asset=o.game.make.spine(0,0,"fx_eat_plant"),o.asset.setAnimationByName(0,"animation",!1),o.asset.anchor.set(.5,1),o.asset.onComplete.add(o.destroy,(0,n.default)(o)),o.addChild(o.asset),o.rootBone=o.asset.skeleton.getRootBone(),o.scaleDefault=.8*o.rootBone.scaleX*s,o.setScale(o.environment.scale.x),o}(0,a.default)(e,t);var i=e.prototype;return i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.destroy=function(){this.asset.destroy(),t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=o},l6Mt:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).button.anchor.set(.5,1),n.angles=[-Math.PI/4,Math.PI/4],n.ang=Phaser.Math.random(n.angles[0],n.angles[1]),n.scaleDefault=.5*n.rootBone.scaleX,n}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.state===o.STATE_IDLE&&(this.state=o.STATE_EVADE,this.evadeTime=5,this.camouflaged=Math.random()<.5,this.setSpeed(),this.setAnim("evade"))},i.getX=function(){return this.surfaceType===o.SURFACE_ROCK?this.rock.x+this.x:this.x},i.getY=function(){return this.surfaceType===o.SURFACE_ROCK?this.rock.y+this.y:this.y},i.setPosition=function(e,i){switch(t.prototype.setPosition.call(this,e,i),this.surfaceType=Phaser.Math.between(0,2),this.surfaceType){case o.SURFACE_ROCK:this.rock=this.environment.getClosestRockTo(this.x,this.y),this.rock&&this.rock.addSnail(this);break;case o.SURFACE_PLANT:var s=this.environment.getClosestPlantTo(this.x,this.y),n=s.getAnchorForY(this.y,!0);this.plant={item:s,anchor:n};var a=s.getAnchorPos(n);this.x=a.x,this.y=a.y,this.depth=s.depth-1,s.vertical&&this.setRotation(Math.random()<.5?90:-90);break;case o.SURFACE_GROUND:this.isOnGround=!1}},i.snapToRock=function(t,e){this.radius=Math.abs(e),this.x=this.radius*Math.sin(this.ang),this.y=-this.radius*Math.cos(this.ang),this.setRotation(this.ang)},i.stepEvade=function(t){if(this.evadeTime-=t,this.evadeTime<=0)this.camouflaged=!1,this.state=o.STATE_IDLE,this.setSpeed(),this.setAnim("move");else if(this.surfaceType===o.SURFACE_PLANT){var e=this.plant.item.getAnchorPos(this.plant.anchor);this.x=e.x,this.y=e.y}},i.stepIdle=function(t){switch(this.surfaceType){case o.SURFACE_ROCK:this.ang+=this.dir*Math.PI*.01*t,1===this.dir&&this.ang>this.angles[1]?this.dir=-1:-1===this.dir&&this.ang<this.angles[0]&&(this.dir=1),this.x=this.radius*Math.sin(this.ang),this.y=-this.radius*Math.cos(this.ang),this.setRotation(this.ang/Math.PI*180);break;case o.SURFACE_PLANT:var e=this.plant.item.getAnchorPos(this.plant.anchor);this.x=e.x,this.y=e.y;break;case o.SURFACE_GROUND:this.isOnGround?(this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t),this.x+=this.dir*this.speed*t,this.x<500?this.dir=1:this.x>5e3&&(this.dir=-1)):(this.y+=50*t,this.y>=3040&&(this.isOnGround=!0))}},i.step=function(e){if(!this.paused){switch(this.state){case o.STATE_IDLE:this.stepIdle(e);break;case o.STATE_EVADE:this.stepEvade(e)}this.surfaceType===o.SURFACE_ROCK&&t.prototype.update.call(this)}},e}(a.default);e.default=r},lKfn:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("Jr4d")).default);e.default=a},lZbN:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.createPondItem=void 0;var n=s(i("fKPv")),a=i("MPoQ");function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var h=function(t){return Phaser.Math.between(t[0],t[1])};e.createPondItem=function(t,e,i){switch(i.type){case a.GEOLOGY:return function(t,e,i){return i.depth=h(i.depth),i.destY=Phaser.Math.between(3e3,3100),r(r({},i),{},{uid:t,layerIndex:e})}(t,e,i);case a.PLANT:return function(t,e,i){return i.depth=h(i.depth),i.scale="underwater"===i.plantType?Phaser.Math.random(.2,.5):.44,r(r({},i),{},{uid:t,layerIndex:e})}(t,e,i);case a.CREATURE:return function(t,e,i){return i.depth=h(i.depth),r(r({},i),{},{uid:t,layerIndex:e})}(t,e,i)}}},llML:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("RiZp"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("XEfP"),i("q4B+"),i("Wse9"),i("GPcm"),i("ocEJ"),i("388n"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.NARRATORS=void 0;var n=s(i("86MP")),a=i("bHjq"),o=i("TEuq");function r(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var d={OLIVE:"olive",ELINOR:"elinor",ARI:"ari"};e.NARRATORS=d;var l=function(t){function e(e,i){var s,n=i.narrators,a=i.narrator,o=i.captions;return(s=t.call(this,e)||this).captions=o,s.narrating=!1,s.onNarrateNameComplete=new Phaser.Signal,s.onNarrateFactComplete=new Phaser.Signal,s.onNarrateOnboardComplete=new Phaser.Signal,s.factsRead={},s.createHeads(n),s.head=s.heads[a],s.visible=!1,s}(0,n.default)(e,t);var i=e.prototype;return i.createHeads=function(t){this.heads={};for(var e,i=r(t);!(e=i()).done;){var s=e.value;this.heads[s]=this.createHead(s)}},i.createHead=function(t){var e=this.game.make.spine(0,0,t+"_narrator",!0);if(e.anchor.set(.5,1),this.addChild(e),e.setSkinByName("closed"),e.y=this.game.height,e.setAnimationByName(0,"animation",!0),e.id=t,e.visible=!1,t===d.OLIVE)for(var i,s=r(e.skeleton.slots);!(i=s()).done;){var n=i.value;n&&("olive_book"===n.data.name&&(this.oliveBookSlot=n),"arm"===n.data.name&&(this.oliveArmSlot=n),"arm2"===n.data.name&&(this.oliveArm2Slot=n))}return e},i.activateHead=function(t){this.head&&(this.head.visible=!1),this.head=this.heads[t],this.head.visible=!0},i.hideHead=function(){this.head.visible=!1},i.refreshSkin=function(t){var e=this.head.skeleton.getRootBone(),i=e.scaleX,s=e.scaleY;this.head.setToSetupPose(),e.scaleX=i,e.scaleY=s,this.head.id===d.OLIVE&&this._adjustOlive(t)},i.narrate=function(t){var e=t.type,i=t.id,s=t.narrator,n=t.hideOnComplete,a=void 0!==n&&n;if(!this.narrating){var o=e+"_"+i,r=s+"_"+e+"_vo";this.head.visible=!0,this._prepare({narrator:s,key:o,spriteID:r,dispatch:this.narrateComplete,hideOnComplete:a})}},i.narrateComplete=function(t){var e=t.hideOnComplete;this.head.setSkinByName("closed"),this.refreshSkin(),e&&this.hideHead(),this.narrating=!1,this.onNarrateNameComplete.dispatch()},i.narrateNewPond=function(t){var e=t.key;if(!this.narrating){var i=e.split("_").pop()||"olive";this._prepare({narrator:i,key:e,spriteID:"mixed_intro_vo",dispatch:this.narrateOnboardComplete})}},i.narrateOnboard=function(t){var e,i,s=t.key;this.narrating||(s.includes("_device_")&&(s="desktop"===this.game.deviceMetric.platform.type?s.replace("_device_","_click_"):s.replace("_device_","")),s.includes("ob_")?(e=s.split("_").pop()||"olive",i="mixed_onboarding_vo"):(e="elinor",i="elinor_"+a.CAPTION.SUMMARY+"_vo"),this._prepare({narrator:e,key:s,spriteID:i,dispatch:this.narrateOnboardComplete}))},i.narrateOnboardComplete=function(){this.head.setSkinByName("closed"),this.refreshSkin(),this.hideHead(),this.narrating=!1,this.onNarrateOnboardComplete.dispatch()},i.stopNarrateFact=function(t){void 0===t&&(t=!0),this.narrating&&"FACT"===this.narrateType&&(this.stop(),this.narrateFactComplete({hideOnComplete:t,isFact:!0}))},i.narrateFact=function(t){var e=t.type,i=t.id,s=t.narrator,n=t.hideOnComplete,o=void 0===n||n;this.narrating&&this.stop(),this.narrateType="FACT",this.factsRead[i]?(this.factsRead[i]++,this.factsRead[i]>2&&(this.factsRead[i]=1)):this.factsRead[i]=1,this.captions.data[e+"_"+i+"_00"+this.factsRead[i]]||(this.factsRead[i]=1);var r=e+"_"+i+"_00"+this.factsRead[i],h="olive_"+e+"_vo",d=e===a.CAPTION.FACT;return this._prepare({key:r,spriteID:h,narrator:s,dispatch:this.narrateFactComplete,hideOnComplete:o,isFact:d}),r},i.narrateFactComplete=function(t){var e=t.hideOnComplete,i=t.isFact;this.narrateType=null,this.head.setSkinByName("closed"),this.refreshSkin(i),e&&this.hideHead(),this.narrating=!1,this.onNarrateFactComplete.dispatch()},i._prepare=function(t){var e=t.narrator,i=t.key,s=t.spriteID,n=t.dispatch,a=t.hideOnComplete,r=void 0===a||a,h=t.isFact,l=void 0!==h&&h;if(this.captions.data[i]){var u=this.captions.data[i].length,c=(this.captions.data[i][u-1]||1e3).end;if(0===c)return void o.Debugger.log("warn","Caption "+i+" has no duration");this.narrating=!0,this.visible=!0,this.head.id!==e?this.activateHead(e):this.head.visible=!0,e===d.OLIVE&&this._adjustOlive(l);var p={key:i,spriteID:s,end:c,dispatch:n,hideOnComplete:r,isFact:l};this.timerEvent=this.game.time.events.add(500,this._speak,this,p)}else n.call(this,{hideOnComplete:r})},i._adjustOlive=function(t){t?(this.oliveBookSlot&&(this.oliveBookSlot.color.a=1),this.oliveArmSlot&&(this.oliveArmSlot.color.a=0),this.oliveArm2Slot&&(this.oliveArm2Slot.color.a=0)):(this.oliveBookSlot&&(this.oliveBookSlot.color.a=0),this.oliveArmSlot&&(this.oliveArmSlot.color.a=1),this.oliveArm2Slot&&(this.oliveArm2Slot.color.a=1))},i._speak=function(t){var e=t.key,i=t.spriteID,s=t.end,n=t.dispatch,a=t.hideOnComplete,o=t.isFact;this.currentKey=e,this.currentSpriteID=i,this.head.setSkinByName("talking"),this.refreshSkin(o),this.game.springRollCaptionsPlugin.playCaption(e),this.audio=this.game.sounds.playVO(e,{spriteID:i}),this.timerEvent=this.game.time.events.add(s,n,this,{hideOnComplete:a,isFact:o})},i.stop=function(){this.timerEvent&&(this.game.time.events.remove(this.timerEvent),this.timerEvent=null),this.audio&&this.game.sounds.stopAudioSprite(this.currentKey,{spriteID:this.currentSpriteID}),this.game&&this.game.springRollCaptionsPlugin&&this.game.springRollCaptionsPlugin.stopCaption()},i.destroy=function(e,i){void 0===e&&(e=!0),this.stop(),this.oliveBookSlot=null,this.oliveArmSlot=null,this.oliveArm2Slot=null,this.heads=null,this.head=null,this.audio=null,this.onNarrateNameComplete&&(this.onNarrateNameComplete.removeAll(),this.onNarrateNameComplete=null),this.onNarrateFactComplete&&(this.onNarrateFactComplete.removeAll(),this.onNarrateFactComplete=null),this.onNarrateOnboardComplete&&(this.onNarrateOnboardComplete.removeAll(),this.onNarrateOnboardComplete=null),this.game=null,this.captions=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=l},"m/lz":function(t,e,i){"use strict";var s=i("R6lU");i("7EEF"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("TSJq")),o=s(i("CDWU")),r=s(i("v2oV")),h=i("Bx3X"),d=i("zgbH"),l=i("5mNR"),u=i("zgbH"),c=i("Y66D"),p=i("TEuq"),m=function(){function t(){}var e=t.prototype;return e.init=function(t){var e,i=this,s=this;this.game=new Phaser.Game(d.GAME_WIDTH_DEFAULT,d.GAME_HEIGHT_DEFAULT,(/webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Phaser.AUTO),d.GAME_DIV_ID,{init:function(){this.game.springRollCaptionsPlugin=this.game.plugins.add(new c.CaptionsPlugin(this.game,this.game.plugins,s.captionsMuted)),this.game.springRollApplication=t,this.game.stage.disableVisibilityChange=!0,this.game.preserveDrawingBuffer=!0,this.game.input.maxPointers=1,this.game.stage.backgroundColor=u.GAME_BACKGROUND_COLOR,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.fullScreenScaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.pageAlignHorizontally=!1,this.game.scale.pageAlignVertically=!1,this.game.defaultWidth=d.GAME_WIDTH_DEFAULT,this.game.defaultHeight=d.GAME_HEIGHT_DEFAULT,this.game.offsetWidth=0,this.game.offsetHeight=0,this.game.screenPadding=.02*Math.max(d.GAME_WIDTH_DEFAULT,d.GAME_HEIGHT_DEFAULT),this.game.aspectController=new r.default(this.game),this.game.sounds=new o.default({game:this.game}),this.game.urls=new a.default(this.game),this.game.deviceMetric=(0,h.getDeviceMetric)(),p.Debugger.log("log","deviceMetric",this.game.deviceMetric)},preload:function(){},create:function(){var t=this;this.game.onBlur.add(s.onBlur,s),this.game.onFocus.add(s.onFocus,s),this.game.input.onUp.add(s.onFocus,s),this.game.input.onDown.add(s.onFocus,s),this.game.input.onTap.add(s.onFocus,s),this.game.input.onHold.add(s.onFocus,s),Object.keys(l.STATE_MAP).forEach((function(e){t.game.state.add(e,l.STATE_MAP[e],!1)})),this.game.canvas.addEventListener("MSPointerCancel",(function(e){t._pointerCancel(e)})),this.game.canvas.addEventListener("pointercancel",(function(e){t._pointerCancel(e)})),this.game.state.start(l.STATE_BOOT,!0,!1)}}),this.hidden=void 0,this.originalPauseValue=void 0,void 0!==document.hidden?(this.hidden="hidden",e="visibilitychange"):void 0!==document.msHidden?(this.hidden="msHidden",e="msvisibilitychange"):void 0!==document.webkitHidden&&(this.hidden="webkitHidden",e="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this.hidden&&document.addEventListener(e,(function(){return i.handleVisibilityChange()}),!1),window.addEventListener("onpagehide",(function(){return i.onBlur()}),!1),window.addEventListener("pageshow",(function(){return i.onFocus()}),!1)},e.handleVisibilityChange=function(){document[this.hidden]?this.onBlur():this.onFocus()},e.onBlur=function(){document[this.hidden]&&void 0===this.originalPauseValue&&(this.originalPauseValue=this.game.paused,this.pauseGame(!0))},e.onFocus=function(){void 0!==this.originalPauseValue&&(this.pauseGame(this.originalPauseValue),this.originalPauseValue=void 0)},e.pauseGame=function(t){this.game.paused=t,this.game.sounds.handleGamePause(t)},e._pointerCancel=function(t){this.game.input&&this.game.input.enabled&&(t.identifier=t.pointerId,"mouse"===t.pointerType||4===t.pointerType?this.game.input.mousePointer.stop(t):this.game.input.stopPointer(t))},(0,n.default)(t,[{key:"captionsMuted",set:function(t){this._captionsMuted=t},get:function(){return this._captionsMuted}}]),t}();e.default=m},m1Ny:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).angles=[-Math.PI/4,Math.PI/4],n.ang=Phaser.Math.random(n.angles[0],n.angles[1]),n.canHide=!1,n.evadeTime=0,n.availableSurfaces=[o.SURFACE_ROCK,o.SURFACE_GROUND],n.scaleDefault=.5*n.rootBone.scaleX,n}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){if(this.state===o.STATE_IDLE){if(this.state=o.STATE_EVADE,this.canHide)this.evadeTime=5,this.camouflaged=Math.random()<.5;else{var t=this.y;this.y<this.movementArea.y+200?t-=50:this.y>this.movementArea.height-200?t+=50:t+=50*(Math.random()<.5?-1:1),this.setEvadeDestPoint({y:t})}this.setSpeed(),this.setAnim("evade")}},i.getX=function(){return this.x},i.getY=function(){return this.y},i.setPosition=function(e,i){switch(t.prototype.setPosition.call(this,e,i),this.surfaceType=this.availableSurfaces[Phaser.Math.between(0,this.availableSurfaces.length-1)],this.surfaceType){case o.SURFACE_ROCK:this.ang=Phaser.Math.random(this.angles[0],this.angles[1]),this.rock=this.environment.getClosestRockTo(this.x,this.y),this.depth=this.rock.depth-1,this.radius=this.rock.getRadius();break;case o.SURFACE_PLANT:var s=this.environment.getClosestPlantTo(this.x,this.y),n=s.getAnchorForY(this.y,!0);this.plant={item:s,anchor:n};var a=s.getAnchorPos(n);this.x=a.x,this.y=a.y,this.depth=s.depth-1,s.vertical&&this.setRotation(Math.random()<.5?90:-90);break;case o.SURFACE_GROUND:this.isOnGround=!1}},i.snapToRock=function(t,e){this.radius=Math.abs(e),this.x=this.radius*Math.sin(this.ang),this.y=-this.radius*Math.cos(this.ang),this.setRotation(this.ang)},i.setDestPoint=function(){switch(this.setSpeed(),this.surfaceType){case o.SURFACE_ROCK:this.angDest=Phaser.Math.random(this.angles[0],this.angles[1]),this.dir=this.angDest>this.ang?1:-1;break;case o.SURFACE_GROUND:this.destPoint.x=this.x+Phaser.Math.between(100,200)*(Math.random()<.5?-1:1),this.destPoint.x=Phaser.Math.clamp(this.destPoint.x,500,5e3),this.destPoint.y=3040,this.dir=this.destPoint.x>this.x?1:-1}},i.isFoodInRange=function(t){var e=this.getJawsPos(),i=t.x-e.x,s=t.getAnchorForY(this.y);if(s){var n=Math.abs(i),a=this.aiData.viewRange;if(n<=a&&i*this.dir>0)return{inRange:!0,dist:n,value:1-n/a,anchor:s}}return null},i.stepIdle=function(){this.findFoodInRange(),this.findEnemiesInRange(),this.targetEnemy?(this.state=o.STATE_EVADE,this.canHide?(this.evadeTime=5,this.camouflaged=Math.random()<.5):this.setEvadeDestPoint(),this.setSpeed(),this.setAnim("evade")):this.isHungryToHunt()&&this.targetFood&&this.surfaceType===o.SURFACE_GROUND&&(this.state=o.STATE_HUNT,this.huntTime=10,this.setSpeed(),this.setAnim("hunt"))},i.stepHunt=function(t){if(this.huntTime-=t,this.targetFood&&this.targetFood.item&&this.huntTime>0&&this.isFoodInRange(this.targetFood.item,this.targetFood.isPlant)){this.destPoint.x=this.targetFood.item.x,this.destPoint.y=3040;var e=this.destPoint.x-this.getJawsPos().x;this.dir=e>0?1:-1}else this.targetFood=null,this.state=o.STATE_IDLE,this.setDestPoint(),this.setAnim("move")},i.stepEvade=function(t){this.canHide&&(this.evadeTime-=t,this.evadeTime<=0&&(this.camouflaged=!1,this.state=o.STATE_IDLE,this.setSpeed(),this.setAnim("move")))},i.stepFeed=function(t){this.feedTime-=t,this.feedTime<0&&(this.state=o.STATE_IDLE,this.setDestPoint(),this.setAnim("move"))},i.move=function(t){if(this.state!==o.STATE_FEED)switch(this.surfaceType){case o.SURFACE_ROCK:this.ang+=this.dir*Math.PI*.01*t,this.x=this.rock.x+this.radius*Math.sin(this.ang),this.y=this.rock.y-this.radius*Math.cos(this.ang),this.setRotation(this.ang/Math.PI*180),this.checkEndOfMovement();break;case o.SURFACE_PLANT:var e=this.plant.item.getAnchorPos(this.plant.anchor);this.x=e.x,this.y=e.y;break;case o.SURFACE_GROUND:this.isOnGround?(this.speed=Phaser.Math.linear(this.speed,this.speedDest,.5*t),this.x+=this.dir*this.speed*t,this.checkEndOfMovement()):(this.y+=50*t,this.y>=3040&&(this.isOnGround=!0))}},i.checkEndOfMovement=function(){switch(this.surfaceType){case o.SURFACE_GROUND:var t=this.destPoint.x-this.getJawsPos().x;Math.abs(t)<20&&this.onReachDestPoint();break;case o.SURFACE_ROCK:var e=this.angDest-this.ang;this.dir*e<0&&this.onReachDestPoint()}},i.onReachDestPoint=function(){switch(this.state){case o.STATE_IDLE:this.surfaceType===o.SURFACE_ROCK&&this.isHungryToHunt()?(this.state=o.STATE_FEED,this.feedTime=3,this.setSpeed(),this.hunger-=1,this.hunger=Math.max(0,this.hunger),this.setAnim("feed")):this.setDestPoint();break;case o.STATE_EVADE:this.state=o.STATE_IDLE,this.setDestPoint(),this.setAnim("move");break;case o.STATE_HUNT:this.state=o.STATE_FEED,this.feedTime=3,this.setSpeed(),this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1,this.setAnim("feed")}},e}(a.default);e.default=r},n7Ri:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e}(s(i("VatX")).default);e.default=a},"oX+o":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("j3Ef"),i("qnda"),i("7EEF"),i("COu/"),i("XvIX"),i("a/rO"),i("Rz/f"),i("96V2"),i("3Ss1"),i("YY9M"),i("mizm"),i("pkSX"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("J5eo"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.DECISION_STATES=void 0;var n=s(i("fKPv")),a=s(i("C9uT"));function o(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}var d=["state","pondLayer","selectedOptions","branchHistory","choiceHistory","optionIndex","currentPathId","currentPathData","currentOptionId"],l={READY:"READY",BRANCH:"BRANCH",OPTIONS:"OPTIONS",NEXT:"NEXT",COMPLETE:"COMPLETE"};e.DECISION_STATES=l;var u=function(){function t(t,e){var i=e.data,s=e.elementsByID;this.saves=t,this.data=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},i),this.elementsByID=Object.keys(s).reduce((function(t,e){return t[e]={id:e},t}),{}),this.state=l.READY,this.reset(),this.load()}var e=t.prototype;return e.setComplete=function(){this.state=l.COMPLETE,this.reset(),this.save()},e.reset=function(){this.branchHistory={},this.choiceHistory={},this.selectedOptions=[],this.optionIndex=0,this.currentPathId=null,this.currentPathData=null,this.currentOptionId=null,this.pondLayer=null},e.checkCondition=function(t,e){void 0===t&&(t=[]);for(var i=0;i<t.length;i++)if(-1===e.indexOf(t[i]))return!1;return!0},e.resetIndex=function(){this.optionIndex=0,this.currentOptionId=null,this.state=l.READY},e.setCurrentPondLayer=function(t){if(this.state===l.READY){if(this.pondLayer=t,this.currentPathData)if(this.currentPathData.nextPath){var e=this.currentPathData.nextPath,i=Math.floor(Math.random()*e.length);this.currentPathId=e[i]}else{var s=this.getCurrentPaths();this.currentPathId=s[0].id;for(var n=0;n<s.length;n++){var a=s[n];if(this.checkCondition(a.required,this.selectedOptions)){this.currentPathId=a.id;break}}}else{var o=this.getCurrentPaths();this.currentPathId=o[0].id,this.selectedOptions=[]}this.currentPathData=this.getCurrentPathData(),this.branchHistory[this.currentPathId]=[],this.choiceHistory[this.currentPathId]={},this.state=l.BRANCH,this.save()}},e.getCurrentPaths=function(){return this.data.pathsByPondLevel[this.pondLayer]||[]},e.getCurrentPathData=function(){var t=this,e=this.getCurrentPaths().find((function(e){return e.id===t.currentPathId}));return JSON.parse(JSON.stringify(e))},e.getBranchOptions=function(){var t=this;if(this.optionIndex>=this.currentPathData.options.length)return[];for(var e=this.currentPathData.options[this.optionIndex],i=0;i<e.length;i++)if("reject_1"===e[i]){var s=this.currentPathData.options[0],n=this.branchHistory[this.currentPathId][0],a=s[0]===n?s[1]:s[0];e[i]=a}else if("reject_2"===e[i]){var o=this.currentPathData.options[1],r=this.branchHistory[this.currentPathId][1],h=o[0]===r?o[1]:o[0];e[i]=h}return this.state=l.BRANCH,this.save(),e.reduce((function(e,i){return e.push(t.data.choicesByID[i]),e}),[])},e.setChosenBranchOption=function(t){this.branchHistory[this.currentPathId].push(t),this.choiceHistory[this.currentPathId][t]=[],this.selectedOptions.push(t),this.currentOptionId=t,this.optionIndex++,this.state=l.OPTIONS,this.save()},e.getBranchOptionChoices=function(){for(var t,e=this,i=this.data.choicesByID[this.currentOptionId],s=i.options,n=void 0===s?[]:s,a=this.choiceHistory[this.currentPathId][this.currentOptionId],r=Array.from(n),h=o(a);!(t=h()).done;){var d=t.value;r.splice(r.indexOf(d),1)}return r.reduce((function(t,s){var n=e.elementsByID[s];return i.unlock&&(n.unlock=i.unlock),t.push(n),t}),[])},e.setBranchOptionChoice=function(t){var e=t.id;this.choiceHistory[this.currentPathId][this.currentOptionId].push(e),this.isDecisionComplete()&&(this.state=l.NEXT),this.save()},e.isDecisionComplete=function(){return!!this.currentOptionId&&this.choiceHistory[this.currentPathId][this.currentOptionId].length>=this.data.choicesByID[this.currentOptionId].options.length},e.isPondLayerComplete=function(){return this.optionIndex>this.currentPathData.options.length-1},e.isInDecisionState=function(){return this.state===l.BRANCH||this.state===l.OPTIONS},e.load=function(){var t=this.saves.load();this.saves.deserialize(this,t,"decisiontree"),this.save()},e.save=function(){var t=this.saves.serialize(this,"decisiontree",d);this.saves.save({data:t})},(0,a.default)(t,[{key:"state",set:function(t){this._state=t},get:function(){return this._state}}]),t}();e.default=u},ohYO:function(t,e,i){},ohdW:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("Jr4d")),o=i("UaYW"),r=function(t){function e(e,i,s){var n;(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n.asset.y=-50,n.button.anchor.set(.5,.7),n.catchAnchor=n.asset.skeleton.findBone("anchor_catch"),n.speed=20;var a=s.range;return n.range=a,n}(0,n.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.state===o.STATE_IDLE&&(this.startHunt(),this.game.sounds.playSFX("duck",{spriteID:"sfx_creatures"}))},i.setPosition=function(t,e){this.x=Phaser.Math.clamp(t,this.range[0],this.range[1]),this.y=e},i.setMovementArea=function(t,e,i,s){t=this.range[0],i=this.range[1]-this.range[0],this.movementArea=new Phaser.Rectangle(t,e,i,0),this.setDestPoint()},i.setDestPoint=function(){var t=Math.abs(this.x-this.range[0]),e=Math.abs(this.x-this.range[1]);this.dir=t<700?1:e<700||Math.random()<.5?-1:1,this.destPoint.x=this.x+this.dir*Phaser.Math.between(500,700),this.destPoint.y=this.y,this.scale.x=this.dir},i.move=function(t){var e=this.speed*t*this.dir;this.x+=e,(1===this.dir&&this.x>this.destPoint.x||-1===this.dir&&this.x<this.destPoint.x)&&this.setDestPoint()},i.getJawsPos=function(){return{x:this.x+135*this.dir,y:this.y}},i.findPlantsInRange=function(){},i.isFoodInRange=function(t){var e=this.getJawsPos(),i=t.x-e.x,s=t.y-e.y;return s>300&&s<800&&Math.abs(i)<200?{inRange:!0,dist:s,value:1-s/800,anchor:null}:null},i.stepIdle=function(){this.findFoodInRange(),this.isHungryToHunt()&&this.targetFood&&this.startHunt()},i.startHunt=function(){this.state=o.STATE_HUNT,this.huntTime=0,this.emptyBeak=!0,this.setAnim("feed",!1)},i.stepHunt=function(t){if(this.huntTime+=t,this.emptyBeak&&this.huntTime>.2&&this.huntTime<.85){if(this.targetFood&&this.targetFood.item){var e=2*this.rootBone.scaleY,i=this.x+this.catchAnchor.worldX/e,s=this.y-this.catchAnchor.worldY/e,n=this.targetFood.item.x-i,a=this.targetFood.item.y-s;Math.abs(n<200)&&Math.abs(a)<100&&(this.emptyBeak=!1,this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1)}}else this.huntTime>2.7&&(this.targetFood=null,this.state=o.STATE_IDLE,this.setAnim("idle"))},i.step=function(t){if(!this.paused)switch(this.hunger+=this.hungerRatio*t,this.hunger=Math.min(this.hunger,.3*this.weight),this.data.hunger=this.hunger,this._debugRenderHunger(),this.state){case o.STATE_IDLE:this.stepIdle(t),this.move(t);break;case o.STATE_HUNT:this.stepHunt(t)}},e}(a.default);e.default=r},otTh:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).debugGraphic=n.game.make.graphics(),n.debugGraphic.beginFill(16711680,0),n.debugGraphic.drawRect(0,0,10,10),n.debugGraphic.anchor.set(.5),n.addChild(n.debugGraphic),n.anchor.set(.5),n}return(0,n.default)(e,t),e}(Phaser.Sprite);e.default=a},q2tZ:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e,i,s){var n;return(n=t.call(this,e,i,s)||this).scaleDefault=.5*n.rootBone.scaleX,n}return(0,n.default)(e,t),e.prototype.setDestPoint=function(){this.x<this.movementArea.x+1e3?this.dir=1:this.x>this.movementArea.width-1e3?this.dir=-1:this.dir=Math.random()<.5?-1:1,this.destPoint.x=this.x+this.dir*(400+400*Math.random());var t=this.movementArea.y+20,e=this.movementArea.y+450;this.destPoint.y=t+Math.random()*(e-t),this.setSpeed()},e}(s(i("Jr4d")).default);e.default=a},rO7k:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("M1I4")),o=n(i("86MP")),r=s(i("UaYW")),h=function(t){function e(e,i,s){var n;n=t.call(this,e,i,s)||this;var o=s.key,r=s.keyHead,h=s.animation;n.animationData=h,n.assetBody=n.game.make.spine(0,0,o,!0),n.assetBody.anchor.set(.5,1),n.addChildAt(n.assetBody,0),n.assetBody.setAnimationByName(0,"idle",!0),n.assetHead=n.game.make.spine(-900,-750,r,!0),n.assetHead.anchor.set(.5,1),n.addChildAt(n.assetHead,0),n.currentAnim=n.assetHead.setAnimationByName(0,"idle",!0),n.bodyRootBone=n.assetBody.skeleton.getRootBone(),n.headRootBone=n.assetHead.skeleton.getRootBone(),n.catchAnchor=n.assetHead.skeleton.findBone("anchor_catch"),n.scaleDefault=.5*n.bodyRootBone.scaleX,n.alpha=0,n.game.make.tween((0,a.default)(n)).to({alpha:1},100,"Quad.easeIn",!0);var d=s.slot;return n.slot=d,n.addButton(n.assetBody),n.button.width=.6*n.assetBody.width,n.button.anchor.set(.8,1),n}(0,o.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.state===r.STATE_IDLE&&(this.startHunt(),this.game.sounds.playSFX("heron",{spriteID:"sfx_creatures"}))},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setPosition=function(t,e){this.x=this.slot.x,this.y=this.slot.y},i.setScale=function(t){this.bodyRootBone.scaleX=t*this.scaleDefault,this.bodyRootBone.scaleY=t*this.scaleDefault,this.headRootBone.scaleX=t*this.scaleDefault,this.headRootBone.scaleY=t*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.getJawsPos=function(){return{x:this.x+this.assetHead.x,y:this.y+this.assetHead.y}},i.findPlantsInRange=function(){},i.isFoodInRange=function(t){var e=this.getJawsPos(),i=t.x-e.x,s=t.y-e.y;return s>720&&s<1300&&Math.abs(i)<200?{inRange:!0,dist:s,value:1-s/1300,anchor:null}:null},i.hunt=function(){this.state=r.STATE_HUNT,this.huntTime=0,this.emptyBeak=!0,this.currentAnim=this.assetHead.setAnimationByName(0,"hunt",!1)},i.stepIdle=function(){this.findFoodInRange(),this.isHungryToHunt()&&this.targetFood&&this.startHunt()},i.startHunt=function(){this.state=r.STATE_HUNT,this.huntTime=0,this.emptyBeak=!0,this.currentAnim=this.assetHead.setAnimationByName(0,"hunt",!1)},i.stepHunt=function(t){if(this.huntTime+=t,this.emptyBeak&&this.huntTime>0&&this.huntTime<.33){if(this.targetFood&&this.targetFood.item){var e=2*this.headRootBone.scaleX,i=this.x+this.assetHead.x+this.catchAnchor.worldX/e,s=this.y+this.assetHead.y-this.catchAnchor.worldY/e,n=this.targetFood.item.x-i,a=this.targetFood.item.y-s;Math.abs(n)<200&&Math.abs(a)<100&&(this.emptyBeak=!1,this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1)}}else this.huntTime>2&&(this.targetFood=null,this.state=r.STATE_IDLE,this.currentAnim=this.assetHead.setAnimationByName(0,"idle",!0))},i.step=function(t){if(!this.paused)switch(this.hunger+=this.hungerRatio*t,this.hunger=Math.min(this.hunger,.3*this.weight),this.data.hunger=this.hunger,this._debugRenderHunger(),this.state){case r.STATE_IDLE:this.stepIdle(t);break;case r.STATE_HUNT:this.stepHunt(t)}},e}(r.default);e.default=h},roAw:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("RiZp"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("Wse9"),i("GPcm"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("3huV")),o=s(i("dD3M")),r=i("4UFF"),h=i("hDA+");function d(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var u=function(t){function e(){return t.apply(this,arguments)||this}(0,n.default)(e,t);var i=e.prototype;return i.init=function(t){var e=t.model;this.model=e},i.preload=function(){},i.create=function(){this.container=new a.default(this.game,{background:"bg_underwater",title:""}),this.game.add.existing(this.container),this.createHudButtons(),this.renderGrid(),this.model.hasSomeUnlocked&&(0,h.playDeviceAudioAndCaption)(this.game,{spriteID:"vo_ui",id:"creatures_prompt"})},i.renderGrid=function(){this.grid=this.game.make.group();var t=[0,0,0,1,1,1,1,1,1,2,2,2,2,2,2,2,3,3,3,3,3,3,4,4,4,4,4],e=t[0],i=0,s=0,n=this.game.make.group();this.grid.add(n);for(var a,o={w:0,h:0},r=d(this.model.all.entries());!(a=r()).done;){var h=a.value,l=h[0],u=h[1],c=this.model.unlocked.includes(u),p=this.createButton(u,c);e!==t[l]&&(i=0,s+=p.height,(n=this.game.make.group()).y=s,this.grid.add(n)),i+=p.width+20,e=t[l],p.x=i,n.add(p),o={w:p.width,h:p.height}}this.formatGrid(),this.grid.x=.5*(this.game.defaultWidth-this.grid.width)-20-.5*o.w,this.grid.y=.5*(this.game.defaultHeight-this.grid.height)+.5*o.h,this.container.add(this.grid)},i.createButton=function(t,e){var i=e?"unlocked_"+t:"locked_"+t,s=e?"over_"+t:"locked_"+t,n=new o.default({game:this.game,up:i,over:s,atlas:"ui_mycreatures"});return n.id=t,n.input.enabled=e,e&&n.onInputUp.add(this.onShowCreature,this),n},i.formatGrid=function(){for(var t=0;t<this.grid.children.length;t++)if(2!==t){var e=this.grid.children[2],i=this.grid.children[t];i.x=(e.width-i.width)/2}},i.onShowCreature=function(t){var e=t.id;this.game.sounds.stopAllSFX(),this.game.springRollCaptionsPlugin.stopCaption(),this.game.controller.showMyCreature(e)},i.createHudButtons=function(){this.btnBack=new o.default({game:this.game,up:"btn_back",over:"btn_back_over"}),this.btnBack.position.set(r.HUD_PAD+.5*this.btnBack.width,r.HUD_PAD+.5*this.btnBack.height),this.btnBack.onInputUp.addOnce(this.onHandleBack,this),this.game.add.existing(this.btnBack)},i.removeHudButtons=function(){this.btnBack.onInputUp.remove(this.onHandleBack,this),this.btnBack.destroy(),this.btnBack=null},i.onHandleBack=function(){this.game.sounds.stopAllSFX(),this.game.springRollCaptionsPlugin.stopCaption(),this.game.controller.showPondSelect()},i.destroyCreatureOverlay=function(){this.creatureOverlay.destroy(!0),this.creatureOverlay=null},i.shutdown=function(){this.removeHudButtons(),this.creatureOverlay&&this.destroyCreatureOverlay(),this.grid&&this.grid.destroy(!0),this.grid=null,this.container&&this.container.destroy(!0),this.container=null,t.prototype.shutdown.call(this)},e}(Phaser.State);e.default=u},ssJl:function(t,e,i){"use strict";var s=i("R6lU");i("GFHg"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("86MP")),o=i("zgbH"),r=function(t){function e(e){var i;return(i=t.call(this,e)||this).backing=i.game.make.graphics(),i.backing.beginFill(0,.2),i.backing.drawRoundedRect(0,0,200,20,10),i.addChild(i.backing),i.fill=i.game.make.graphics(),i.fill.beginFill(16777215),i.fill.drawRoundedRect(0,0,200,20,10),i.addChild(i.fill),i.masker=i.game.make.graphics(),i.masker.beginFill(16711680),i.masker.drawRect(0,0,200,20),i.addChild(i.masker),i.fill.mask=i.masker,i.copy=i.game.add.text(0,0,i.game.copy.getCopy("loading")+" 0%",{font:"47px "+o.FONT_REGULAR,fill:"#ffffff",boundsAlignH:"center"}),i.copy.setTextBounds(-50,-90,300),i.addChild(i.copy),i.setProgress(0),i}(0,a.default)(e,t);var i=e.prototype;return i.setProgress=function(t){this.masker.clear(),this.masker.beginFill(16711680),this.masker.drawRect(0,0,this.fill.width*t,20);var e=Math.round(100*t);this.copy.text=this.game.copy.getCopy("loading")+" "+e+"%"},i.setProcessing=function(){this.copy.text=this.game.copy.getCopy("processing")},i.destroy=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.copy.destroy(),this.backing.destroy(),this.fill.destroy(),this.masker.destroy(),this.backing=null,this.fill=null,this.masker=null,this.copy=null,t.prototype.destroy.call(this,e,i)},(0,n.default)(e,[{key:"width",get:function(){return this.backing.width}},{key:"height",get:function(){return this.backing.height}}]),e}(Phaser.Group);e.default=r},t2fk:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("XEfP"),i("ocEJ"),i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("86MP")),o=n(i("89Dv")),r=n(i("3huV")),h=i("hDA+"),d=s(i("llML")),l=n(i("dD3M")),u=i("4UFF"),c=n(i("ujPl")),p=i("bHjq"),m=n(i("zDtB")),f=i("6YV8"),g=function(t){function e(){return t.apply(this,arguments)||this}(0,a.default)(e,t);var i=e.prototype;return i.init=function(e){var i=e.id,s=e.captions;t.prototype.init.call(this,{debug:!1}),this.id=i,this.captions=s;var n=this.game.cache.getJSON("pond_config").animationsByID[this.id],a=n.idle,o=void 0===a?"idle":a,r=n.available,h=void 0===r?[]:r;this.animationIdle=o,this.animationAvailable=h,this.animCount=0},i.preload=function(){this.container=new r.default(this.game,{background:"bg_underwater",title:""}),t.prototype.preload.call(this)},i.loadAssets=function(){t.prototype.loadAssets.call(this),this.game.load.spine(this.id,"environment/pond/spine/"+this.id+".png")},i.loadPacks=function(e){t.prototype.loadPacks.call(this,e)},i.handleLoadError=function(){this.game.controller.showMyCreatures()},i.start=function(){t.prototype.start.call(this);this.asset=this.game.make.spine(0,0,this.id,!0),this.asset.anchor.set(.5,1),this.container.add(this.asset),this.asset.setAnimationByName(0,this.animationIdle,!0);var e=(0,h.calculateAspectRatioFit)(this.asset.width,this.asset.height,this.game.defaultWidth-300,this.game.defaultHeight-200);this.asset.width=Math.min(e.width,this.asset.width),this.asset.height=Math.min(e.height,this.asset.height),this.asset.x=.5*this.game.defaultWidth,this.asset.y=.5*this.game.defaultHeight,this.narrator=new d.default(this.game,{narrators:[d.NARRATORS.OLIVE],narrator:d.NARRATORS.OLIVE,captions:this.captions}),this.game.add.existing(this.narrator),this.tapArea=new m.default({game:this.game}),this.tapArea.onTap.add(this.nextAnim,this),this.container.add(this.tapArea),this.tapArea.activate(),this.createHudButtons(),this.game.time.events.add(800,this.nameCreature,this).autoDestroy=!0},i.nameCreature=function(){this.narrator.narrate({type:p.CAPTION.NAME,id:this.id,narrator:d.NARRATORS.OLIVE})},i.nextAnim=function(){this.animCount++;var t=this.animCount%this.animationAvailable.length,e=this.animationAvailable[t]||this.animationIdle;this.asset.setAnimationByName(0,e,!0);var i=this.narrator.narrateFact({type:p.CAPTION.MAGNIFY,id:this.id,narrator:d.NARRATORS.OLIVE,hideOnComplete:!1});(0,f.getGA)().track({action:"select_content",label:i.replace(p.CAPTION.MAGNIFY,"mycreatures")})},i.createHudButtons=function(){this.game.scale.onSizeChange.add(this.positionHudButtons,this),this.btnBack=new c.default({game:this.game,up:"btn_lozenge_back",over:"btn_lozenge_back_over",label:{xPos:25,text:this.game.copy.getCopy("lbl_back")}}),this.btnBack.x=.5*this.game.width,this.btnBack.y=this.game.height-.5*this.btnBack.height-u.HUD_PAD,this.btnBack.onInputUp.add(this.onHandleBack,this),this.game.add.existing(this.btnBack),this.btnHome=new l.default({game:this.game,up:"btn_home",over:"btn_home_over"}),this.btnHome.position.set(u.HUD_PAD+.5*this.btnHome.width,u.HUD_PAD+.5*this.btnHome.height),this.btnHome.onInputUp.addOnce(this.onHandleHome,this),this.game.add.existing(this.btnHome)},i.positionHudButtons=function(){this.btnBack.x=.5*this.game.width},i.removeHudButtons=function(){this.game.scale.onSizeChange.remove(this.positionHudButtons,this),this.btnBack.onInputUp.remove(this.onHandleBack,this),this.btnBack.destroy(),this.btnBack=null,this.btnHome.onInputUp.remove(this.onHandleHome,this),this.btnHome.destroy(),this.btnHome=null},i.onHandleHome=function(){this.narrator.stop(),this.game.controller.showWelcomeScreen()},i.onHandleBack=function(){this.narrator.stop(),this.game.controller.showMyCreatures()},i.shutdown=function(){this.removeHudButtons(),this.tapArea&&this.tapArea.destroy(),this.tapArea=null,this.narrator&&this.narrator.destroy(),this.narrator=null,this.asset&&(this.asset.events.onInputUp.remove(this.nextAnim,this),this.asset.destroy(!0)),this.asset=null,this.container&&this.container.destroy(!0),this.container=null,t.prototype.shutdown.call(this)},e}(o.default);e.default=g},tn33:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("M1I4")),o=n(i("86MP")),r=s(i("UaYW")),h=function(t){function e(e,i,s){var n;n=t.call(this,e,i,s)||this;var o=s.key,r=s.animation;n.animationData=r,n.asset=n.game.make.spine(0,0,o,!0),n.asset.anchor.set(.5,1),n.addChildAt(n.asset,0),n.currentAnim=n.asset.setAnimationByName(0,"idle",!0),n.rootBone=n.asset.skeleton.getRootBone(),n.catchAnchor=n.asset.skeleton.findBone("anchor_catch"),n.scaleDefault=.5*n.rootBone.scaleX,n.camouflaged=!0,n.alpha=0,n.game.make.tween((0,a.default)(n)).to({alpha:1},100,"Quad.easeIn",!0);var h=s.slot;return n.slot=h,n.addButton(),n.button.height=.3*n.asset.height,n.button.anchor.set(.5,.9),n}(0,o.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.state===r.STATE_IDLE&&(this.startHunt(),this.game.sounds.playSFX("kingfisher",{spriteID:"sfx_creatures"}))},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setPosition=function(t,e){this.x=this.slot.x,this.y=this.slot.y},i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.getJawsPos=function(){return{x:this.x,y:this.y}},i.findPlantsInRange=function(){},i.isFoodInRange=function(t){var e=this.getJawsPos(),i=t.x-e.x,s=t.y-e.y;return s>150&&s<800&&Math.abs(i)<200?{inRange:!0,dist:s,value:1-s/800,anchor:null}:null},i.stepIdle=function(){this.findFoodInRange(),this.isHungryToHunt()&&this.targetFood&&this.startHunt()},i.startHunt=function(){this.state=r.STATE_HUNT,this.huntTime=0,this.emptyBeak=!0,this.currentAnim=this.asset.setAnimationByName(0,"dive",!1)},i.stepHunt=function(t){if(this.huntTime+=t,this.emptyBeak&&this.huntTime>0&&this.huntTime<.33){if(this.targetFood&&this.targetFood.item){var e=2*this.rootBone.scaleX,i=this.x+this.catchAnchor.worldX/e,s=this.y-this.catchAnchor.worldY/e,n=this.targetFood.item.x-i,a=this.targetFood.item.y-s;Math.abs(n)<200&&Math.abs(a)<100&&(this.emptyBeak=!1,this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1)}}else this.huntTime>3.85&&(this.targetFood=null,this.state=r.STATE_IDLE,this.currentAnim=this.asset.setAnimationByName(0,"idle",!0))},i.step=function(t){if(!this.paused)switch(this.hunger+=this.hungerRatio*t,this.hunger=Math.min(this.hunger,.3*this.weight),this.data.hunger=this.hunger,this._debugRenderHunger(),this.state){case r.STATE_IDLE:this.stepIdle(t);break;case r.STATE_HUNT:this.stepHunt(t)}},e}(r.default);e.default=h},tpwa:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("UUvd"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("fKPv")),a=s(i("C9uT")),o=s(i("86MP"));function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d=function(t){function e(e,i){var s;s=t.call(this,e)||this;var n=i.id,a=i.index,o=i.data,r=i.atlas,h=void 0===r?"tray_creatures":r,d=i.enabled,l=void 0===d||d,u=i.readItemName,c=void 0===u||u;return s.onPickUp=new Phaser.Signal,s.onReadFact=new Phaser.Signal,s.onNameRead=new Phaser.Signal,s.id=n,s.data=o,s.data.dragType="BRANCH",s.displayId=n+"_"+a,s.isFactState=!1,s.readItemName=c,s.init(h,n),l&&s.enable(),s}(0,o.default)(e,t);var i=e.prototype;return i.init=function(t,e){this.costume=this.game.make.image(0,0,t,e),this.costume.anchor.set(.5),this.addChild(this.costume),this.costumeSelected=this.game.make.image(0,0,t,e+"_selected"),this.costumeSelected.anchor.set(.5),this.costumeSelected.visible=!1,this.addChild(this.costumeSelected),this.button=this.game.make.button(0,0,""),this.button.width=this.costume.width,this.button.height=this.costume.height,this.button.alpha=0,this.button.anchor.set(.5),this.button.input.useHandCursor=!1,this.button.inputEnabled=!1,this.addChild(this.button),this.voId="name_"+this.id,this.spriteVOId="olive_name_vo",this.hasName=this.game.sounds.checkSfxExists(this.voId,this.spriteVOId),this.alpha=0},i.disableBranchItem=function(){this.button.inputEnabled&&(this.button.inputEnabled=!1,this.button.input.useHandCursor=!1,this.button.events.onInputDown.remove(this.handleInputDown,this),this.button.events.onInputUp.remove(this.handleInputUp,this))},i.enableBranchItem=function(){this.button.inputEnabled||(this.button.inputEnabled=!0,this.button.input.useHandCursor=!0,this.button.events.onInputDown.add(this.handleInputDown,this),this.button.events.onInputUp.add(this.handleInputUp,this))},i.setFactState=function(t){this.isFactState=t},i.unselect=function(t){this.id!==t&&(this.selected=!1)},i.animateOn=function(){this.alpha=0,this.game.make.tween(this).to({alpha:1},200,"Quad.easeIn",!0).onComplete.addOnce(this.readName,this)},i.readName=function(){this.hasName&&this.readItemName?(this.game.springRollCaptionsPlugin.playCaption(this.voId),this.game.sounds.playVO(this.voId,{spriteID:this.spriteVOId,onComplete:this.onReadNameComplete,onCompleteScope:this})):this.onNameRead.dispatch()},i.onReadNameComplete=function(){this.onNameRead&&this.onNameRead.dispatch()},i.animateOff=function(){this.game.make.tween(this).to({alpha:0,y:"+200"},300,"Quad.easeIn",!0)},i.handleInputDown=function(t,e){this.pointer=e,this.startX=e.x,this.startY=e.y,this.isDown=!0},i.handleInputUp=function(){this.isDown&&this.pickUp()},i.pickUp=function(){this.isDown=!1,this.game.sounds.playSFX("select",{spriteID:"sfx_general"}),this.isFactState?(this.selected=!0,this.onReadFact.dispatch(h({},this.data))):(this.isFactState||(this.alpha=0),this.onPickUp.dispatch(h({},this.data)))},i.update=function(){if(t.prototype.update.call(this),this.isDown){var e=Math.abs(this.pointer.x-this.startX),i=Math.abs(this.pointer.y-this.startY);Math.sqrt(e*e+i*i)>20&&this.pickUp()}},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){void 0===e&&(e=!0),this.clearSignal(this.onPickUp),this.onPickUp=null,this.clearSignal(this.onReadFact),this.onReadFact=null,this.clearSignal(this.onNameRead),this.onNameRead=null,this.costume.destroy(),this.costume=null,this.costumeSelected.destroy(),this.costumeSelected=null,this.button.events.onInputDown.remove(this.handleInputDown,this),this.button.events.onInputUp.remove(this.handleInputUp,this),this.button.destroy(),this.button=null,this.game&&this.game.sounds.stopAudioSprite(this.voId,{spriteID:this.spriteVOId}),t.prototype.destroy.call(this,e,i)},(0,a.default)(e,[{key:"bounds",get:function(){return this.costume.getBounds()}},{key:"selected",set:function(t){this.costumeSelected.visible=t}}]),e}(Phaser.Group);e.default=d},"tw/v":function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=s(i("dD3M")),r=s(i("Dc5c")),h=i("bHjq"),d=i("4UFF"),l=i("llML"),u=i("6YV8"),c=function(t){function e(e,i){var s;return(s=t.call(this,e)||this).onMagnifyVisible=new Phaser.Signal,s.onMagnifyActive=new Phaser.Signal,s.onMagnifyComplete=new Phaser.Signal,s.btnMagnify=new o.default({game:s.game,up:"btn_magnify",over:"btn_magnify_over",atlas:"ui_buttons",sfxID:"mag_select"}),s.addChild(s.btnMagnify),s.btnMagnify.onInputDown.add(s.handleInputDown,(0,n.default)(s)),s.btnMagnify.onInputUp.add(s.handleInputUp,(0,n.default)(s)),s.btnMagnify.visible=!1,s.magnifyGlass=new r.default(s.game,{}),s.magnifyGlass.onActivateMagnifyGlass.add(s.activateMagnifyingGlass,(0,n.default)(s)),s.addChild(s.magnifyGlass),s.narrator=i,s}(0,a.default)(e,t);var i=e.prototype;return i.handleInputDown=function(t,e){this.pointer=e,this.startX=e.x,this.startY=e.y,this.isDown=!0},i.handleInputUp=function(){this.isDown&&this.pickUp()},i.pickUp=function(){this.isDown=!1,this.magnifyGlass.visible||(this.onMagnifyVisible.dispatch(),this.btnMagnify.visible=!1,this.magnifyGlass.visible=!0,this.magnifyGlass.startDrag())},i.update=function(){if(t.prototype.update.call(this),this.isDown){var e=Math.abs(this.pointer.x-this.startX),i=Math.abs(this.pointer.y-this.startY);Math.sqrt(e*e+i*i)>20&&this.pickUp()}},i.resetMagnify=function(){this.btnMagnify.visible=!1,this.magnifyGlass.visible=!1,this.magnifyGlass.stopDrag()},i.showMagnifyingGlassButton=function(t){void 0===t&&(t=!0),this.btnMagnify.visible||(this.btnMagnify.visible=!0,this.btnMagnify.x=d.HUD_PAD+.5*this.btnMagnify.width,this.btnMagnify.y=this.game.height-d.HUD_PAD-.5*this.btnMagnify.height),this.magnifyGlass.dropIsEnabled=t},i.hideMagnifyingGlassButton=function(){this.btnMagnify.visible=!1},i.activateMagnifyingGlass=function(t){this.onMagnifyActive.dispatch(t)},i.hideMagnifyingGlass=function(){this.magnifyGlass.visible=!1,this.btnMagnify.visible=!0},i.magnifyItem=function(t,e){this.game.sounds.playSFX("mag_use",{spriteID:"sfx_general"});var i=e.data.factId?e.data.factId:t;this.narrator.onNarrateFactComplete.addOnce(this.handleMagnifyItemComplete,this);var s=this.narrator.narrateFact({type:h.CAPTION.MAGNIFY,id:i,narrator:l.NARRATORS.OLIVE});this.magnifyGlass.examineItem(i,s),(0,u.getGA)().track({action:"select_content",label:s})},i.handleMagnifyItemComplete=function(){this.magnifyGlass.clearCreature(),this.hideMagnifyingGlass(),this.onMagnifyComplete.dispatch()},i.clearSignal=function(t){t&&t.removeAll()},i.destroy=function(e,i){void 0===e&&(e=!0),this.clearSignal(this.onMagnifyVisible),this.onMagnifyVisible=null,this.clearSignal(this.onMagnifyActive),this.onMagnifyActive=null,this.clearSignal(this.onMagnifyComplete),this.onMagnifyComplete=null,this.btnMagnify&&(this.btnMagnify.onInputDown.remove(this.handleInputDown,this),this.btnMagnify.onInputUp.remove(this.handleInputUp,this),this.btnMagnify.destroy(),this.btnMagnify=null),this.magnifyGlass&&(this.magnifyGlass.onActivateMagnifyGlass.remove(this.activateMagnifyingGlass,this),this.magnifyGlass.stopDrag(),this.magnifyGlass.destroy(),this.magnifyGlass=null),this.narrator=null,t.prototype.destroy.call(this,e,i)},e}(Phaser.Group);e.default=c},uNgd:function(t,e,i){"use strict";i("7EEF"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i("SPpy"),n=i("TEuq"),a=function(){function t(t){var e=t.game,i=t.debug,s=void 0!==i&&i;this.game=e,this.debug=s,this.loadedAssets=[],this.loadedAssetPacks={}}var e=t.prototype;return e.addUnloadAsset=function(t){var e=Array.isArray(t.url)?t.url[0]:t.url;this.debug&&n.Debugger.log("log","LoadTracker.addUnloadAsset : "+t.type+" | "+e),this.loadedAssets.push({type:t.type,key:t.key,url:t.url})},e.addUnloadAssets=function(t){var e=this;t.forEach((function(t){e.addUnloadAsset(t)}))},e.unloadAssets=function(){var t=this;this.loadedAssets.forEach((function(e){t.debug&&n.Debugger.log("log","unloadFile : "+e.key),(0,s.unloadFile)(t.game,e)})),this.loadedAssets=[]},e.unloadAssetPack=function(t){var e=this;Object.keys(t).forEach((function(i){t[i].forEach((function(t){(0,s.unloadFile)(e.game,t)}))}))},t}();e.default=a},ujPl:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("dD3M")),o=i("zgbH"),r=function(t){function e(e){var i,s=e.game,n=e.x,a=void 0===n?0:n,r=e.y,h=void 0===r?0:r,d=e.up,l=e.over,u=e.atlas,c=void 0===u?"ui_buttons":u,p=e.label,m=e.vo;i=t.call(this,{game:s,x:a,y:h,up:d,over:l,atlas:c,vo:m})||this;var f=p.xPos,g=p.text,v={font:"36px "+o.FONT_REGULAR,fill:"#000000",align:"left"};return i.label=i.game.make.text(0,50,"",v),i.label.anchor.set(.5),i.addChild(i.label),i.label.x=f,i.label.y=0,i.label.text=g,i}return(0,n.default)(e,t),e.prototype.destroy=function(e){void 0===e&&(e=!0),t.prototype.destroy.call(this,e)},e}(a.default);e.default=r},v2oV:function(t,e,i){"use strict";var s=i("IfHf");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("zgbH")),a=function(){function t(t){this.game=t}return t.prototype.updateGameSize=function(t){if(this.game.scale){var e=t.width,i=t.height,s=768/n.GAME_SAFE_HEIGHT;i<=768&&(s=i/n.GAME_SAFE_HEIGHT),e<n.GAME_SAFE_WIDTH&&s>e/n.GAME_SAFE_WIDTH&&(s=e/n.GAME_SAFE_WIDTH),e=e>this.game.defaultWidth?this.game.defaultWidth:Math.floor(e),i=i>768?768:Math.floor(i),e=Math.floor(e/s),i=Math.floor(i/s),e%2==1&&e++,this.game.screenPadding=.02*Math.max(e,i),this.game.scale.setGameSize(e,i),this.game.scale.setUserScale(s),this.game.offsetWidth=e/2-this.game.defaultWidth/2,this.game.offsetHeight=i/2-this.game.defaultHeight/2}},t}();e.default=a},vGYV:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("ohYO");var a=i("TEuq"),o=n(i("a8kN")),r=n(i("LQdk")),h=n(i("GhOu")),d=n(i("m/lz")),l=s(i("zgbH"));i("DaKh");var u=i("vaxU"),c=(i("o+jM"),function(t,e){void 0===t&&a.Debugger.log("error","Library Missing : "+e)});window.PhaserGlobal={hideBanner:!0},document.getElementById(l.GAME_DIV_ID).className=l.GAME_DIV_CLASSNAME,a.Debugger.minLevel("GENERAL"),a.Debugger.enable(!1),a.Application.uses(new u.GoogleAnalytics),c(o.default,"PIXI"),c(r.default,"p2"),c(h.default,"Phaser");var p=new a.Application({features:{captions:!0,vo:!0,music:!0,sfx:!0}}),m=new d.default;p.state.ready.subscribe((function(t){t&&m.init(p)})),p.state.pause.subscribe((function(t){m.game&&m.pauseGame(t)})),p.state.captionsMuted.subscribe((function(t){m.captionsMuted=t,m.game&&m.game.springRollCaptionsPlugin&&m.game.springRollCaptionsPlugin.setMute(t)})),p.state.soundVolume.subscribe((function(t){m.game&&m.game.sounds&&(m.game.sounds.soundVolume=t)})),p.state.voVolume.subscribe((function(t){m.game&&m.game.sounds&&(m.game.sounds.voVolume=t)})),p.state.musicVolume.subscribe((function(t){m.game&&m.game.sounds&&(m.game.sounds.musicVolume=t)})),p.state.sfxVolume.subscribe((function(t){m.game&&m.game.sounds&&(m.game.sounds.sfxVolume=t)}));var f=p;e.default=f},vQJm:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("C9uT")),a=s(i("f+AP")),o=s(i("g24n")),r=i("oX+o"),h=i("bHjq"),d=i("llML"),l=i("6YV8"),u=function(){function t(t,e,i){var s=i.decisionTreeModel;this.game=t,this.container=e,this.model=s,this.onItemPickedUp=new Phaser.Signal,this.onDecisionComplete=new Phaser.Signal}var e=t.prototype;return e.init=function(t){switch(this.narrator=t,this.model.state){case r.DECISION_STATES.BRANCH:this.createBranchOptions();break;case r.DECISION_STATES.OPTIONS:this.createBranchChoiceItems();break;case r.DECISION_STATES.NEXT:this.decisionComplete()}},e.center=function(){this.x=.5*(this.game.width-this.game.defaultWidth)},e.reposition=function(){},e.hide=function(){this.visible=!1},e.show=function(){this.visible=!0},e.createBranchOptions=function(){var t=this.model.getBranchOptions();this.options=new a.default(this.game,{options:t}),this.options.onPickUp.add(this.handleOnSelectBranch,this),this.options.onReadFact.add(this.handleOnSelectBranchFact,this),this.options.onEnterDecisionState.add(this.handleOnEnterDecisionState,this),this.container.addChildAt(this.options,0),this.center()},e.enterDecisionState=function(){this.options.enterDecisionState()},e.handleOnSelectBranch=function(t){var e=t.id,i=t.options;this.model.setChosenBranchOption(e);var s=i[0];t.id=s,this.onItemPickedUp.dispatch(t)},e.handleOnReleaseBranch=function(t){var e=t.id,i=t.options;this.model.setBranchOptionChoice({id:e}),i.length>1?this.createBranchChoiceItems():(this.removeOptionsPanel(),this.decisionComplete(e))},e.handleOnSelectBranchFact=function(t){var e=t.id;this.options.enterReadingFactState(),this.narrator.onNarrateFactComplete.addOnce(this.onNarrateFactComplete,this);var i=this.narrator.narrateFact({type:h.CAPTION.FACT,id:e,narrator:d.NARRATORS.OLIVE});(0,l.getGA)().track({action:"select_content",label:i})},e.onNarrateFactComplete=function(){this.options.narrateFactComplete()},e.handleOnEnterDecisionState=function(){this.narrator.stopNarrateFact()},e.createBranchChoiceItems=function(){this.removeOptionsPanel();var t=this.model.getBranchOptionChoices();this.options=new o.default(this.game,{options:t}),this.options.onPickUp.add(this.handleOnSelectBranchChoice,this),this.container.addChildAt(this.options,0),this.center()},e.handleOnSelectBranchChoice=function(t){this.onItemPickedUp.dispatch(t)},e.handleOnReleaseBranchChoice=function(t){this.options.enableItems(),this.model.setBranchOptionChoice(t);var e=t.id;this.decisionComplete(e)},e.handleOnItemDropped=function(t){var e=t.id,i=t.dragType;"lillypad"===e&&"BRANCH"===i?(this.savedOptions=t,this.options.hideBar()):"BRANCH"===t.dragType?this.handleOnReleaseBranch(t):"DRAGDROP"===t.dragType&&this.handleOnReleaseBranchChoice(t)},e.showNextOptions=function(){this.handleOnReleaseBranch(this.savedOptions)},e.decisionComplete=function(t){this.model.isDecisionComplete()&&(this.options&&this.options.hideBar(),this.onDecisionComplete.dispatch(t))},e.removeOptionsPanel=function(){this.options&&(this.options.onEnterDecisionState&&this.options.onEnterDecisionState.remove(this.handleOnEnterDecisionState,this),this.options.onPickUp&&this.options.onPickUp.remove(this.handleOnSelectBranchChoice,this),this.options.onReadFact&&this.options.onReadFact.remove(this.handleOnSelectBranchFact,this),this.options.destroy(!0),this.options=null)},e.clearSignal=function(t){t&&t.removeAll()},e.destroy=function(){this.narrator=null,this.clearSignal(this.onItemPickedUp),this.onItemPickedUp=null,this.clearSignal(this.onDecisionComplete),this.onDecisionComplete=null,this.model=null,this.removeOptionsPanel()},(0,n.default)(t,[{key:"x",set:function(t){this.options&&(this.options.x=t)}},{key:"visible",set:function(t){this.options&&(this.options.visible=t)}}]),t}();e.default=u},"vXl+":function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("COu/"),i("a/rO"),i("96V2"),i("YY9M"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.StarBurst=void 0;var n=s(i("86MP"));function a(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var r=function(t){function e(e,i){var s;(s=t.call(this,e)||this).costume=s.game.make.image(0,0,"ui_various","star"),s.costume.anchor.set(.5),s.costume.scale.set(.4+.4*Math.random());var n=i||360*Math.random(),a=100+100*Math.random();return s.vx=a*Math.cos(n),s.vy=a*Math.sin(n),s.costume.angle=360*Math.random(),s.addChild(s.costume),s}return(0,n.default)(e,t),e.prototype.update=function(){var t=this.game.time.elapsedMS/1e3;this.x+=this.vx*t,this.y+=this.vy*t,this.angle+=1;var e=Phaser.Math.distance(0,0,this.x,this.y);this.costume.scale.set(1.01*this.costume.scale.x,1.01*this.costume.scale.y),e>60&&this.alpha>.1?this.alpha+=8*(0-this.alpha)*t:e>60&&this.destroy(!0)},e}(Phaser.Sprite),h=function(t){function e(e,i){var s,n=i.x,a=i.y;s=t.call(this,e,n,a)||this;for(var o=0;o<360;o+=30){var h=new r(e,o);s.addChild(h)}return s}(0,n.default)(e,t);var i=e.prototype;return i.start=function(t){var e=t.x,i=t.y;this.position.set(e,i)},i.update=function(){if(0===this.children.length)this.destroy();else for(var t,e=a(this.children);!(t=e()).done;){t.value.update()}},i.destroy=function(e){void 0===e&&(e=!0);for(var i,s=a(this.children);!(i=s()).done;){var n=i.value;n.destroy(!0),n=null}t.prototype.destroy.call(this,e)},e}(Phaser.Sprite);e.StarBurst=h},wqsV:function(t,e,i){"use strict";i("a/rO"),i("/TzG"),i("vw/H"),i("XEfP"),i("388n"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={backspace:8,tab:9,enter:13,return:13,shift:16,"⇧":16,control:17,ctrl:17,"⌃":17,alt:18,option:18,"⌥":18,pause:19,capslock:20,esc:27,space:32,pageup:33,pagedown:34,end:35,home:36,left:37,L:37,"←":37,up:38,U:38,"↑":38,right:39,R:39,"→":39,down:40,D:40,"↓":40,insert:45,delete:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,"⌘":91,command:91,kp_0:96,kp_1:97,kp_2:98,kp_3:99,kp_4:100,kp_5:101,kp_6:102,kp_7:103,kp_8:104,kp_9:105,kp_multiply:106,kp_plus:107,kp_minus:109,kp_decimal:110,kp_divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,equal:187,"=":187,comma:188,",":188,minus:189,"-":189,period:190,".":190},n=function(){};function a(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&(t["e"+e+i]=i,t[e+i]=function(){t["e"+e+i](window.event)},t.attachEvent("on"+e,t[e+i]))}function o(t,e,i){t.removeEventListener(e,i)}function r(t){t.index=0}function h(t,e){var i=t.str,s=t.seq,n=t.keys,a=t.next,o=t.fail,h=t.done,d=t.index;e===n[d]?(t.index++,a(i,s[d],d,s),t.index===n.length&&(h(i),r(t))):d>0&&(r(t),o(i))}var d=function(){function t(t){var e,i,a,o,r,h,d,l,u,c,p=t.sequence,m=void 0===p?"↑ ↑ ↓ ↓ ← →":p,f=t.onComplete,g=t.onNext,v=t.onFail;this.touchCoords={startX:null,startY:null,endX:null,endY:null},this.bindedNext=this.next.bind(this),this.bindedFail=this.fail.bind(this),this.bindedComplete=this.complete.bind(this),this.bindedKeyDown=this.keydown.bind(this),this.bindedKeyUp=this.keyup.bind(this),this.bindedTouchStart=this.touchstart.bind(this),this.bindedTouchEnd=this.touchend.bind(this),this.touchEnabled="ontouchstart"in window,this.sequence=(e=m,i={done:f||this.bindedComplete,next:g||this.bindedNext,fail:v||this.bindedFail},a=i.done,o=void 0===a?n:a,r=i.next,h=void 0===r?n:r,d=i.fail,l=void 0===d?n:d,u=e.split(" "),c=u.map((function(t){return s[t]})),{index:0,str:e,next:h,fail:l,done:o,seq:u,keys:c}),this.enable()}var e=t.prototype;return e.enable=function(){a(window,"keydown",this.bindedKeyDown),a(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(a(window,"touchstart",this.bindedTouchStart),a(window,"touchend",this.bindedTouchEnd))},e.disable=function(){o(window,"keydown",this.bindedKeyDown),o(window,"keyup",this.bindedKeyUp),this.touchEnabled&&(o(window,"touchstart",this.bindedTouchStart),o(window,"touchend",this.bindedTouchEnd))},e.destroy=function(){this.disable(),this.sequence=null},e.keydown=function(t){},e.keyup=function(t){h(this.sequence,t.keyCode)},e.touchstart=function(t){this.touchCoords.startX=t.touches[0].screenX,this.touchCoords.startY=t.touches[0].screenY},e.touchend=function(t){this.touchCoords.endX=t.changedTouches[0].screenX,this.touchCoords.endY=t.changedTouches[0].screenY,this.determineSwipeDirection(this.touchCoords)},e.determineSwipeDirection=function(t){var e=t.startX,i=t.startY,n=t.endX-e,a=t.endY-i,o=Math.abs(n),r=Math.abs(a);(Math.abs(n)>100||Math.abs(a)>100)&&(r>1.5*o?a>100?h(this.sequence,s.down):a<-100&&h(this.sequence,s.up):o>1.5*r&&(n>100?h(this.sequence,s.right):n<-100&&h(this.sequence,s.left)))},e.fail=function(t){},e.next=function(t,e,i,s){},e.complete=function(t){},t}();e.default=d},x1tP:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("AaIv"),i("j3Ef"),i("7EEF"),i("mizm"),i("pkSX"),i("3Ipg"),i("J5eo"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("fKPv")),o=n(i("6R9f")),r=i("5mNR"),h=i("5mNR"),d=n(i("0swR")),l=(n(i("gsGo")),n(i("1gQj"))),u=n(i("G9dM")),c=n(i("oX+o")),p=s(i("RZI6")),m=i("cjcH"),f=n(i("afRL")),g=s(i("bHjq")),v=n(i("PFbm")),y=i("6YV8"),b=n(i("XjIo")),S=n(i("uNgd"));function P(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function I(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?P(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var D=function(){function t(t){this.game=t}var e=t.prototype;return e.init=function(){this.onGamePaused=new Phaser.Signal,this.onGameResume=new Phaser.Signal,this.stateController=new o.default(this.game),this.shortcutsModel=new u.default,this.shortcuts=new l.default,this.colourThemeModel=new b.default,this.loadTracker=new S.default({game:this.game,debug:!1}),this.assetsLoaded=!1},e.startBoot=function(){this.game.state.start(r.STATE_BOOT,!0,!0)},e.deleteSave=function(t){var e=this.saves.getColourThemeId(t);this.saves.deleteSave(t),this.colourThemeModel.restoreThemeId(e),this.updateMyCreaturesModel()},e.createSaveId=function(t){this.saves.setSaveID(t),this.saves.hasColourThemeId()||this.saves.setColourThemeId(this.colourThemeModel.nextColourThemeId)},e.shortcutAddSave=function(t){this.saves.addSave(t.id,t),this.updateMyCreaturesModel()},e.shortcutDebugPond=function(t){this.game.state.current===h.STATE_POND&&this.game.state.callbackContext.environment.setPondDebug(t,this.pondModel)},e.updateShortcutsState=function(){this.pondModel&&this.pondModel.updateShortcutState(this.shortcutsModel)},e.loadComplete=function(){this.captions=new g.default,(0,y.getGA)().track({action:"startGame"});var t=this.game.cache.getJSON("app_config").lifecycles;this.saves=new p.default({storage:(0,m.getLS)(),lifecycles:t}),this.saves.onReady.addOnce(this.showWelcomeScreen,this),this.saves.loadStorage(),this.myCreaturesUnlockedModel=new f.default(this.shortcutsModel.myCreaturesUnlocked)},e.showWelcomeScreen=function(){var t=this.saves.hasSave(p.ONBOARDING_SAVE);t&&(t.pond?t.pond&&t.pond.onboarding&&!t.pond.onboarding.panComplete&&this.saves.deleteSave(p.ONBOARDING_SAVE):this.saves.deleteSave(p.ONBOARDING_SAVE));var e=this.saves.playerHasSaves();this.captions.parseGroups(this.game,[{id:"olive",type:g.CAPTION.MAGNIFY},{id:"olive",type:g.CAPTION.NAME},{id:"generic",type:g.CAPTION.UI}]),this.game.springRollCaptionsPlugin.setData(this.captions.data),this.shortcuts.reset(),this.game.paused&&this.resumeGame(),e&&(this.pondModel&&this.pondModel.checkForOnboardingReset(),this.colourThemeModel.registerSavedThemes(this.saves.getSaves()),this.updateMyCreaturesModel()),this.startState(r.STATE_WELCOME,{})},e.showIntro=function(){this.saves.playerHasSaves()?this.showPondSelect():(this.createSaveId(p.ONBOARDING_SAVE),this.transition=this.getTransition(),this.transition.onFadeEnd.addOnce(this.showIntroTransitionComplete,this),this.transition.fadeIn())},e.showIntroTransitionComplete=function(){var t=this.game.cache.getJSON("app_config").spineIntroData;this.startState(h.STATE_INTRO,{data:t})},e.handleNewPond=function(){this.captions.parseGroups(this.game,[{id:"olive",type:g.CAPTION.MAGNIFY},{id:"olive",type:g.CAPTION.NAME},{id:"generic",type:g.CAPTION.UI}]),this.game.springRollCaptionsPlugin.setData(this.captions.data),this.saves.playerHasSaves()&&(this.colourThemeModel.registerSavedThemes(this.saves.getSaves()),this.updateMyCreaturesModel()),this.showPondSelect()},e.showPondSelect=function(){if(this.saves.hasSave(p.ONBOARDING_SAVE)){var t=this.saves.load(p.ONBOARDING_SAVE);if(t.pond.onboarding.onboardComplete){var e=this.saves.createSaveID();t.id=e,t.pond.onboarding=!1,t.pond.pondIntroIsComplete=!0,this.saves.save({id:e,data:t}),this.saves.deleteSave(p.ONBOARDING_SAVE)}}this.startState(r.STATE_POND_SELECT,{model:this.myCreaturesUnlockedModel})},e.startOnboarding=function(){this.createPondModel({isOnboarding:!0,saveId:this.saves.getSaveID()}),this.startSim()},e.updateMyCreaturesModel=function(){var t=this.game.cache.getJSON("pond_config");this.myCreaturesUnlockedModel.unlockedShortcut=this.shortcutsModel.myCreaturesUnlocked,this.myCreaturesUnlockedModel.parseSaves({saves:this.saves.getSaves(),data:I({},t.elementsByID)})},e.showMyCreatures=function(){this.startState(h.STATE_MY_CREATURES,{model:this.myCreaturesUnlockedModel})},e.showMyCreature=function(t){this.startState(h.STATE_MY_CREATURE,{id:t,captions:this.captions})},e.getTransition=function(){return this.transition=new v.default(this.game),this.transition},e.createPondModel=function(t){var e=t.isOnboarding,i=void 0!==e&&e,s=t.saveId,n=this.game.cache.getJSON("app_config").lifecycles,a=this.game.cache.getJSON("pond_config");this.pondModel=new d.default(this.saves,s,{data:a,lifecycles:n,gameHeight:this.game.height,shortcutsModel:this.shortcutsModel,isOnboarding:i})},e.loadEnvironment=function(t){this.shortcuts.addPondData({saveId:t}),this.createSaveId(t),this.createPondModel({isOnboarding:t===p.ONBOARDING_SAVE,saveId:t});var e=this.pondModel.isOnboarding&&!this.pondModel.isOnboardComplete;this.startState(h.STATE_ENVIRONMENT_LOADER,{isOnboarding:e,debug:!1})},e.startSim=function(){var t=this.game.cache.getJSON("pond_config"),e=this.game.cache.getJSON("decision_tree_data");this.decisionTreeModel=new c.default(this.saves,{data:e,elementsByID:t.elementsByID});var i=this.pondModel.currentActiveLayerID;this.decisionTreeModel.setCurrentPondLayer(i),this.pondModel.isOnboarding&&!this.pondModel.isOnboardComplete?((0,y.getGA)().track({action:"tutorial_begin"}),this.startState(h.STATE_POND_ONBOARDING,{pondModel:this.pondModel,decisionTreeModel:this.decisionTreeModel})):this.startState(h.STATE_POND,{pondModel:this.pondModel,decisionTreeModel:this.decisionTreeModel})},e.startState=function(t,e){this.game.controller.stateController.startState({nextState:t,nextStateParams:[!0,!1,e]})},e.pauseGame=function(){this.game.paused||(this.onGamePaused.dispatch(),this.game.paused=!0,this.game.sounds.pauseAll())},e.resumeGame=function(){this.game.paused&&(this.onGameResume.dispatch(),this.game.paused=!1,this.game.sounds.resumeAll())},t}();e.default=D},xtAN:function(t,e,i){"use strict";var s=i("IfHf"),n=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("M1I4")),o=n(i("86MP")),r=s(i("UaYW")),h=function(t){function e(e,i,s){var n;n=t.call(this,e,i,s)||this;var o=s.key,r=s.animation;n.animationData=r,n.asset=n.game.make.spine(0,0,o,!0),n.asset.anchor.set(.5,1),n.addChildAt(n.asset,0),n.currentAnim=n.asset.setAnimationByName(0,"idle",!0),n.rootBone=n.asset.skeleton.getRootBone(),n.catchAnchor=n.asset.skeleton.findBone("anchor_catch"),n.scaleDefault=.5*n.rootBone.scaleX,n.camouflaged=!0,n.dir=Math.random()<.5?-1:1,n.alpha=0,n.game.make.tween((0,a.default)(n)).to({alpha:1},100,"Quad.easeIn",!0);var h=n.environment.getPlantsById("lillypad"),d=h[0];return n.depth=d.depth-1,n.posX=h[0].x+Phaser.Math.between(300,350),n.posY=840,n.addButton(),n.button.anchor.set(.5,1),n}(0,o.default)(e,t);var i=e.prototype;return i.handleInputDown=function(){this.state===r.STATE_IDLE&&(this.startHunt(),this.game.sounds.playSFX("frog",{spriteID:"sfx_creatures"}))},i.pauseAnim=function(){this.currentAnim.timeScale=0},i.unpauseAnim=function(){this.currentAnim.timeScale=1},i.setDestPoint=function(){},i.setPosition=function(t,e){this.x=this.posX,this.y=this.posY},i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault*this.dir,this.rootBone.scaleY=t*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.getJawsPos=function(){return{x:this.x,y:this.y}},i.findPlantsInRange=function(){},i.isFoodInRange=function(t){var e=2*this.rootBone.scaleY,i=this.catchAnchor.worldX/e,s=-this.catchAnchor.worldY/e;i+=this.x,s+=this.y;var n=t.x-i,a=t.y-s;return Math.abs(a)<50&&n*this.dir>0&&Math.abs(n)>150&&Math.abs(n)<400?{inRange:!0,dist:n=Math.abs(n),value:1-n/400,anchor:null}:null},i.stepIdle=function(){this.findFoodInRange(),this.isHungryToHunt()&&this.targetFood&&this.startHunt()},i.startHunt=function(){this.state=r.STATE_HUNT,this.huntTime=0,this.emptyTongue=!0,this.currentAnim=this.asset.setAnimationByName(0,"feed",!1)},i.stepHunt=function(t){if(this.huntTime+=t,this.emptyTongue&&this.huntTime>.15&&this.huntTime<.5){if(this.targetFood&&this.targetFood.item){var e=2*this.rootBone.scaleY,i=this.x+this.catchAnchor.worldX/e,s=this.y-this.catchAnchor.worldY/e,n=this.targetFood.item.x-i,a=this.targetFood.item.y-s;Math.abs(n)<150&&Math.abs(a)<50&&(this.emptyTongue=!1,this.hunger-=this.targetFood.item.weight,this.hunger=Math.max(0,this.hunger),this.targetFood.item.eat(this.targetFood.isPlant?this.targetFood.anchor:null),this.targetFood=null,this.closestFoodInd=-1)}}else this.huntTime>1&&(this.targetFood=null,this.state=r.STATE_IDLE,this.currentAnim=this.asset.setAnimationByName(0,"idle",!0))},i.step=function(t){if(!this.paused)switch(this.hunger+=this.hungerRatio*t,this.hunger=Math.min(this.hunger,.3*this.weight),this.data.hunger=this.hunger,this._debugRenderHunger(),this.state){case r.STATE_IDLE:this.stepIdle(t);break;case r.STATE_HUNT:this.stepHunt(t)}},e}(r.default);e.default=h},yxXW:function(t,e,i){"use strict";var s=i("R6lU");i("UUvd"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("M1I4")),a=s(i("86MP")),o=function(t){function e(e,i,s,a){var o;return(o=t.call(this,e)||this).environment=i,o.depth=a,o.asset=o.game.make.spine(0,0,"fx_bubble_burst"),o.asset.setAnimationByName(0,"animation",!1),o.asset.anchor.set(.5,1),o.asset.onComplete.add(o.destroy,(0,n.default)(o)),o.addChild(o.asset),o.rootBone=o.asset.skeleton.getRootBone(),o.scaleDefault=.8*o.rootBone.scaleX*s,o.setScale(o.environment.scale.x),o}(0,a.default)(e,t);var i=e.prototype;return i.setScale=function(t){this.rootBone.scaleX=t*this.scaleDefault,this.rootBone.scaleY=t*this.scaleDefault},i.update=function(){t.prototype.update.call(this),this.setScale(this.environment.scale.x)},i.destroy=function(){this.asset.destroy(),t.prototype.destroy.call(this)},e}(Phaser.Group);e.default=o},zDtB:function(t,e,i){"use strict";var s=i("R6lU");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=function(t){function e(e){var i,s=e.game,n=e.width,a=e.height,o=e.debug,r=void 0!==o&&o;return(i=t.call(this,s)||this).inputEnabled=!0,i.input.useHandCursor=!0,i.hitArea=new Phaser.Rectangle(0,0,n||i.game.defaultWidth,a||i.game.defaultHeight),i.tapsRegistered=0,i.onTap=new Phaser.Signal,r&&(i.debugGraphic=i.game.make.graphics(),i.debugGraphic.beginFill(10066329,1),i.debugGraphic.drawRect(0,0,i.hitArea.width,i.hitArea.height),i.addChild(i.debugGraphic)),i}(0,n.default)(e,t);var i=e.prototype;return i.reset=function(){this.tapsRegistered=0},i.activate=function(){this.events.onInputDown.add(this.handleTap,this)},i.deactivate=function(){this.events.onInputDown.remove(this.handleTap,this)},i.handleTap=function(){this.tapsRegistered++;var t=this.game.input.activePointer.x,e=this.game.input.activePointer.y;this.onTap.dispatch({taps_registered:this.tapsRegistered,x:t,y:e})},i.destroy=function(){this.deactivate(),this.onTap.removeAll(),this.onTap=null,this.hitArea=null,t.prototype.destroy.call(this,!0)},e}(Phaser.Sprite);e.default=a},zgbH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FONT_SUBTITLE_SIZE=e.FONT_SUBTITLE_CSS=e.FONT_SUBTITLE=e.FONT_COPY_CSS=e.FONT_COPY=e.FONT_TITLE=e.FONT_CSS=e.FONT_ITALIC=e.FONT_LIGHT=e.FONT_REGULAR=e.FONT_EXTRA_BOLD=e.FONT_BOLD_ITALIC=e.FONT_BOLD=e.PATH_ASSETS=e.PATH_BASE=e.GAME_DIV_CLASSNAME=e.GAME_DIV_ID=e.DECODE_TIMEOUT_SPEED=e.GAME_BACKGROUND_COLOR=e.GAME_SAFE_HEIGHT=e.GAME_SAFE_WIDTH=e.GAME_HEIGHT_DEFAULT=e.GAME_WIDTH_DEFAULT=void 0;e.GAME_WIDTH_DEFAULT=1680;e.GAME_HEIGHT_DEFAULT=720;e.GAME_SAFE_WIDTH=960;e.GAME_SAFE_HEIGHT=720;e.GAME_BACKGROUND_COLOR="0xFFFFFF";e.DECODE_TIMEOUT_SPEED=3e3;e.GAME_DIV_ID="gameContent";e.GAME_DIV_CLASSNAME="canvas_container absolute_center page_background trap";e.PATH_BASE="./";e.PATH_ASSETS="assets/";e.FONT_BOLD="Elinor";e.FONT_BOLD_ITALIC="Elinor";e.FONT_EXTRA_BOLD="Elinor";e.FONT_REGULAR="Elinor";e.FONT_LIGHT="Elinor";e.FONT_ITALIC="Elinor";e.FONT_CSS="stylesheet.css";e.FONT_TITLE="Elinor";e.FONT_COPY="Elinor";e.FONT_COPY_CSS="stylesheet.css";e.FONT_SUBTITLE="Elinor";e.FONT_SUBTITLE_CSS="stylesheet.css";e.FONT_SUBTITLE_SIZE="32"},zoTg:function(t,e,i){"use strict";var s=i("R6lU");i("AaIv"),i("45zI"),i("hE1C"),i("wiMi"),i("COu/"),i("XvIX"),i("a/rO"),i("96V2"),i("QQAp"),i("YY9M"),i("3Ipg"),i("vw/H"),i("q4B+"),i("GPcm"),i("UUvd"),i("3mz+"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i("86MP")),a=s(i("+wlT")),o=s(i("0z9Q")),r=s(i("ZXKE")),h=s(i("G4Df")),d=s(i("KPua")),l=s(i("anOO")),u=s(i("otTh")),c=s(i("//mK")),p=i("MPoQ");function m(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return f(t,e)}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var s=0;return function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=t[Symbol.iterator]()).next.bind(i)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}var g=function(t){function e(e,i){var s,n=i.pondModel;s=t.call(this,e)||this;var a=n.data,o=a.sky,r=a.bounds,h=a.offsetY;return s.pondModel=n,s.surfaceY=o.height,s.groundY=h+r.h-220,s.onAddPondItem=new Phaser.Signal,s.layersToUpdate=[],s.createLayers(n),s.sortCommonLayer(),s.setPondDebug(s.game.controller.shortcutsModel.pondDebug,n),s}(0,n.default)(e,t);var i=e.prototype;return i.createLayers=function(t){this.layers={},this.layers.sky=new a.default(this.game,{data:t.data.sky}),this.layers.water=new o.default(this.game,{data:t.data,colourThemeId:t.colourThemeId}),this.layers.water.y=this.surfaceY,this.layers.land=new c.default(this.game,{data:t.data,colourThemeId:t.colourThemeId}),this.layers.common=this.game.make.group(),this.cameraFollow=new u.default(this.game,0,0),this.layers.geologyLayer=this.createLayer(t,"bottom",p.GEOLOGY),this.layers.plantLayer=this.createLayer(t,"bottom",p.PLANT),this.layers.particlesLayer=this.createLayer(t,"bottom",p.PARTICLES),this.layers.bottom=this.createCreatureLayer(t,"bottom"),this.layers.middle1=this.createCreatureLayer(t,"middle1"),this.layers.middle2=this.createCreatureLayer(t,"middle2"),this.layers.surface=this.createCreatureLayer(t,"surface",this.surfaceY),this.addCreaturesToLayers(t),this.addBulrush(t.pondItems.elementsByID.bulrush),this.debugGr=this.game.make.graphics(),this.layers.common.addChild(this.debugGr),this.addChild(this.layers.sky),this.addChild(this.layers.water),this.addChild(this.layers.common),this.addChild(this.layers.land),this.addChild(this.cameraFollow),this.layersToUpdate.push(this.layers.particlesLayer)},i.addBulrush=function(t){t.id="bulrush",t.x=5750,t.offsetY=-1280,this.layers.plantLayer.addBulrush(t)},i.setPondDebug=function(t,e){this.pondDebug=t,this.pondDebug?this._renderDebugGrid(e):(this.debugGr.clear(),this._clearDebugGrid())},i.resetIntroPond=function(){this.layers.bottom.reset(),this.layers.middle1.reset(),this.layers.middle2.reset(),this.layers.surface.reset(),this.layers.geologyLayer.reset(),this.layers.plantLayer.reset()},i.getClosestPondItemTo=function(t,e){var i=e.x,s=e.y,n="",a=this.getClosestCreatureTo(t,e);return a&&(n=a.id),a||(a=this.getClosestRockTo(i,s,200))&&("rock_2"!==(n=a.id)&&"rock_3"!==n||(n="rock")),a||(a=this.getClosestPlantTo(i,s,300))&&("reed"!==(n=a.id)&&"wild_cellary"!==n||(n=null,a=null)),{id:n,item:a}},i.getClosestCreatureTo=function(t,e){var i=this.getAllCreatures(),s=this.getClosestItemTo(i,e);return s&&s.pause(),s},i.getClosestItemTo=function(t,e){var i=e.x,s=e.y;if(t.length>0){for(var n=300,a=null,o=0;o<t.length;o++){var r=t[o],h=r.getX()-i,d=r.getY()-s,l=Math.sqrt(h*h+d*d);l<n&&(n=l,a=r)}return a}return null},i.getClosestRockTo=function(t,e,i){return void 0===i&&(i=99999),this.layers.geologyLayer.getClosestTo(t,e,i)},i.getClosestPlantTo=function(t,e,i){return void 0===i&&(i=99999),this.layers.plantLayer.getClosestTo(t,e,i)},i.getPlantsById=function(t){return this.layers.plantLayer.getPlantsById(t)},i.unPauseLayer=function(t){var e=t.currentLayerID;this.layers[e].paused=!1},i.updateDisplayItems=function(t){var e=t.pondModel,i=t.spawned,s=void 0!==i&&i,n=t.unlocked,a=void 0!==n&&n,o=e.getPending();a&&(o=this.processPendingItems(o));for(var r,h=m(o);!(r=h()).done;){var d=r.value,l=e.getPondLayerIdByIndex(d.layerIndex);this.addDisplayItem({currentLayerID:l,item:d,spawned:s,unlocked:a})}},i.processPendingItems=function(t){for(var e,i={},s=[],n=m(t);!(e=n()).done;){var a=e.value,o=a.id;-1===s.indexOf(o)&&(s.push(o),i[o]=[]),i[o].push(a)}for(var r=this.cameraFollow.x,h=this.cameraFollow.y,d=0,l=s;d<l.length;d++){for(var u=i[l[d]],c=u[0],p=99999,f=0;f<u.length;f++){var g=u[f],v=g.x-r,y=g.y-h,b=Math.sqrt(v*v+y*y);b<p&&(p=b,c=g)}c.x=r-300+600*Math.random(),c.y=h-300+600*Math.random()}return t},i.addDisplayItem=function(t){var e,i=t.currentLayerID,s=t.item,n=t.spawned,a=t.unlocked,o=s.type;switch(o){case p.GEOLOGY:e=this.layers.geologyLayer.addRock(s,n);break;case p.PLANT:e=this.layers.plantLayer.addPlant(s);break;case p.CREATURE:e=this.layers[i].addCreature(s,a)}this.onAddPondItem.dispatch({type:o,item:e}),this.sortCommonLayer()},i.sortCommonLayer=function(){this.layers.common.sort("depth",Phaser.Group.SORT_DESCENDING)},i.createLayer=function(t,e,i){var s={items:i===p.PARTICLES?[]:t.getSavedPondLayerItems(e,i),layerWidth:t.data.bounds.w,layerHeight:t.data.water.height,environment:this,container:this.layers.common};switch(i){case p.GEOLOGY:return new d.default(this.game,s);case p.PLANT:return new h.default(this.game,s);case p.PARTICLES:return new l.default(this.game,s)}},i.createCreatureLayer=function(t,e,i){void 0===i&&(i=0);var s=t.getPondLayerDataById(e),n=t.data.bounds.w,a=s.y;a-=.5*this.game.height,0!==i&&(i-=a);var o=new r.default(this.game,{items:[],y:a,layerWidth:n,layerHeight:720,environment:this,container:this.layers.common,top:i});return this.layersToUpdate.push(o),o},i.addCreaturesToLayers=function(t){var e=t.getSavedPondLayerItems("bottom",p.CREATURE);this.layers.bottom.addAllCreatures(e),e=t.getSavedPondLayerItems("middle1",p.CREATURE),this.layers.middle1.addAllCreatures(e),e=t.getSavedPondLayerItems("middle2",p.CREATURE),this.layers.middle2.addAllCreatures(e),e=t.getSavedPondLayerItems("surface",p.CREATURE),this.layers.surface.addAllCreatures(e)},i.getAllItems=function(){var t=this.layers.plantLayer.plants,e=this.getAllCreatures();this.allItems={creatures:e,plants:t}},i.getAllCreatures=function(){var t=[];return t=(t=(t=(t=t.concat(this.layers.bottom.creatures)).concat(this.layers.middle1.creatures)).concat(this.layers.middle2.creatures)).concat(this.layers.surface.creatures)},i._renderDebugAI=function(){this.debugGr.clear();for(var t=this.allItems.creatures,e=t.length,i=0;i<e;i++){for(var s=t[i],n=s.food.length,a=0;a<n;a++){var o=s.food[a];a===s.closestFoodInd?this.debugGr.lineStyle(3,16776960,.3):this.debugGr.lineStyle(2,65535,.4+0*o.value);var r=s.getJawsPos();if(this.debugGr.moveTo(r.x,r.y),o.isPlant){var h=o.item.getAnchorPos(o.anchor);this.debugGr.lineTo(h.x,h.y)}else this.debugGr.lineTo(o.item.x,o.item.y)}for(var d=s.enemies.length,l=0;l<d;l++){var u=s.enemies[l];l===s.closestEnemyInd?this.debugGr.lineStyle(3,16711680,.3):this.debugGr.lineStyle(1,16711935,.3+0*u.value),this.debugGr.moveTo(s.x+10,s.y+10),this.debugGr.lineTo(u.item.x+10,u.item.y+10)}}},i.step=function(t){this.getAllItems();for(var e=0;e<this.layersToUpdate.length;e++)this.layersToUpdate[e].step(t);this.sortCommonLayer(),this.pondDebug&&this._renderDebugAI()},i.destroy=function(e,i){void 0===e&&(e=!0),this.cameraFollow.destroy(!0),this.cameraFollow=null;for(var s=0,n=Object.keys(this.layers);s<n.length;s++){var a=n[s];this.layers[a].destroy(!0),this.layers[a]=null}this.layers=null,this.onAddPondItem.removeAll(),this.onAddPondItem=null,this._clearDebugGrid(),t.prototype.destroy.call(this,e,i)},i._clearDebugGrid=function(){this.gridDB&&(this.removeChild(this.gridDB),this.gridDB.destroy(),this.gridDB=null)},i._renderDebugGrid=function(t){var e=t.data.offsetY,i=t.data.bounds,s=Math.floor(i.w/1280),n=Math.floor(i.h/720);this.gridDB=this.game.make.graphics(),this.gridDB.anchor.set(0,0);for(var a=0;a<n;a++)for(var o=0;o<s;o++)this.gridDB.lineStyle(1,3355443,1),this.gridDB.drawRect(1280*o,720*a,1280,720);this.gridDB.x=this.layers.sky.x,this.gridDB.y=e,this.addChild(this.gridDB)},e}(Phaser.Group);e.default=g}},[[0,2,1]]]);
//# sourceMappingURL=../sourcemaps/js/main.387962fc.js.map