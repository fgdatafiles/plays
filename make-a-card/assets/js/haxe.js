!function(a,b){"use strict";function c(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function d(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=F++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}Math.__name__=["Math"];var e=function(){};e.__name__=["Std"],e.string=function(a){return k.__string_rec(a,"")};var f=function(){};f.__name__=["Type"],f.getClassName=function(a){var b=a.__name__;return null==b?null:b.join(".")};var g=function(){};g.__name__=["haxe","IMap"];var h=function(){this.h={}};h.__name__=["haxe","ds","StringMap"],h.__interfaces__=[g],h.prototype={set:function(a,b){null!=M[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=M[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=M[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){return null!=M[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},__class__:h};var i=function(){};i.__name__=["haxe","macro","Error"],i.prototype={toString:function(){return this.message},__class__:i};var j=function(a){Error.call(this),this.val=a,this.message=String(a),Error.captureStackTrace&&Error.captureStackTrace(this,j)};j.__name__=["js","_Boot","HaxeError"],j.__super__=Error,j.prototype=c(Error.prototype,{__class__:j});var k=function(){};k.__name__=["js","Boot"],k.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;var c=k.__nativeClassName(a);return null!=c?k.__resolveNativeClass(c):null},k.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+k.__string_rec(a[g],b):k.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var l=0;h>l;){var m=l++;i+=(m>0?",":"")+k.__string_rec(a[m],b)}return i+="]"}var n;try{n=a.toString}catch(o){return o instanceof j&&(o=o.val),"???"}if(null!=n&&n!=Object.toString&&"function"==typeof n){var p=a.toString();if("[object Object]"!=p)return p}var q=null,r="{\n";b+="	";var s=null!=a.hasOwnProperty;for(var q in a)(!s||a.hasOwnProperty(q))&&"prototype"!=q&&"__class__"!=q&&"__super__"!=q&&"__interfaces__"!=q&&"__properties__"!=q&&(2!=r.length&&(r+=", \n"),r+=b+q+" : "+k.__string_rec(a[q],b));return b=b.substring(1),r+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},k.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||k.__interfLoop(g,b))return!0}return k.__interfLoop(a.__super__,b)},k.__instanceof=function(a,b){if(null==b)return!1;switch(b){case G:return(0|a)===a;case I:return"number"==typeof a;case J:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case H:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(k.__interfLoop(k.getClass(a),b))return!0}else if("object"==typeof b&&k.__isNativeObj(b)&&a instanceof b)return!0;return b==K&&null!=a.__name__?!0:b==L&&null!=a.__ename__?!0:a.__enum__==b}},k.__cast=function(a,b){if(k.__instanceof(a,b))return a;throw new j("Cannot cast "+e.string(a)+" to "+e.string(b))},k.__nativeClassName=function(a){var b=k.__toStr.call(a).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b},k.__isNativeObj=function(a){return null!=k.__nativeClassName(a)},k.__resolveNativeClass=function(a){return b[a]};var l=function(){};l.__name__=["pbsdaniel","Constants"];var m=function(){createjs.Container.call(this),window.console.log("New DT loading screen"),this._bg=new createjs.Shape,this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,930,490),this._bg.graphics.endFill(),this.addChild(this._bg),this._trolley=new createjs.Container,this.addChild(this._trolley),this._assets=new B(this.getImageManifest(),this.getAudioManifest(),d(this,this.onPackageReady)),this._assets.load(),window.console.log("DTLoadingScreen created")};m.__name__=["pbsdaniel","DTLoadingScreen"],m.__super__=createjs.Container,m.prototype=c(createjs.Container.prototype,{start:function(){window.console.log("Start loading screen"),this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut)},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley)},onPackageReady:function(){var a=this._assets.getSpriteFromSheet("loadingTrolley","loadingScreenSheet"),b=this._assets.getSpriteFromSheet("loadingText","loadingScreenSheet");a.y=-1*a.getBounds().height,a.x=a.getBounds().width*-.5,this._trolley.addChild(a),this._trolley.x=465,this._trolley.y=245,this._text=b,this._text.x=.5*(930-b.getBounds().width),this._text.y=.55*(490-b.getBounds().height),this.addChild(this._text)},getImageManifest:function(){var a=[];return a.push(B.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),a},getAudioManifest:function(){var a=[];return a},__class__:m});var n=function(){this.card_ui_button_stickers_selected_frames=[3],this.card_ui_button_print_frames=[14],this.card_ui_button_eraser_frames=[15],this.card_ui_button_shapes_frames=[7],this.card_ui_button_erase_frames=[13],this.card_ui_button_newpage_frames=[11],this.card_ui_scroll_left_frames=[10],this.card_ui_button_shapes_selected_frames=[2],this.card_ui_button_themes_selected_frames=[4],this.card_ui_button_themes_frames=[9],this.card_ui_page_divider_frames=[0],this.card_ui_scroll_right_frames=[12],this.card_ui_button_stickers_frames=[8],this.card_ui_button_save_frames=[5],this.card_ui_button_crayons_frames=[6],this.card_ui_button_crayons_selected_frames=[1],this.card_ui_stickers_frames=[3,0,5,8,4,10,1,11,2,17,13,7,12,16,14,15,6,9],this.card_ui_shapes_frames=[1,4,11,6,9,2,8,7,3,5,0,10],this.card_ui_crayons_frames=[2,3,14,15,16,17,6,9,12],this.card_ui_crayons_disabled_frames=[21,22,23,24,25,26,18,19,20],this.card_ui_crayons_down_frames=[1,0,4,5,7,8,10,11,13],this.card_ui_color_background_frames=[0],this.card_ui_color_red_off_frames=[6],this.card_ui_color_yellow_on_frames=[13],this.card_ui_color_blue_off_frames=[2],this.card_ui_color_yellow_off_frames=[7],this.card_ui_color_black_off_frames=[1],this.card_ui_color_black_on_frames=[8],this.card_ui_color_orange_on_frames=[11],this.card_ui_color_green_off_frames=[3],this.card_ui_color_orange_off_frames=[4],this.card_ui_color_red_on_frames=[12],this.card_ui_color_green_on_frames=[10],this.template_frames=[5],this.card_ui_color_blue_on_frames=[9]};n.__name__=["pbsdaniel","makeacard","Assetizer"],n.prototype={Load:function(a){this.card_ui_color_blue_on=a.getSpriteFromSheet("card_ui_color_blue_on"),this.template=a.getSpriteFromSheet("template"),this.card_ui_color_green_on=a.getSpriteFromSheet("card_ui_color_green_on"),this.card_ui_color_red_on=a.getSpriteFromSheet("card_ui_color_red_on"),this.card_ui_color_orange_off=a.getSpriteFromSheet("card_ui_color_orange_off"),this.card_ui_color_green_off=a.getSpriteFromSheet("card_ui_color_green_off"),this.card_ui_color_orange_on=a.getSpriteFromSheet("card_ui_color_orange_on"),this.card_ui_color_black_on=a.getSpriteFromSheet("card_ui_color_black_on"),this.card_ui_color_black_off=a.getSpriteFromSheet("card_ui_color_black_off"),this.card_ui_color_yellow_off=a.getSpriteFromSheet("card_ui_color_yellow_off"),this.card_ui_color_blue_off=a.getSpriteFromSheet("card_ui_color_blue_off"),this.card_ui_color_yellow_on=a.getSpriteFromSheet("card_ui_color_yellow_on"),this.card_ui_color_red_off=a.getSpriteFromSheet("card_ui_color_red_off"),this.card_ui_color_background=a.getSpriteFromSheet("card_ui_color_background"),this.card_ui_crayons_down=a.getSpriteFromSheet("card_ui_crayons_down"),this.card_ui_crayons_disabled=a.getSpriteFromSheet("card_ui_crayons_disabled"),this.card_ui_crayons=a.getSpriteFromSheet("card_ui_crayons"),this.loadingText=a.getSpriteFromSheet("loadingText"),this.loadingTrolley=a.getSpriteFromSheet("loadingTrolley"),this.card_ui_shapes=a.getSpriteFromSheet("card_ui_shapes"),this.card_ui_stickers=a.getSpriteFromSheet("card_ui_stickers"),this.playBtnDown=a.getSpriteFromSheet("playBtnDown"),this.playBtn=a.getSpriteFromSheet("playBtn"),this.card_ui_button_crayons_selected=a.getSpriteFromSheet("card_ui_button_crayons_selected"),this.card_ui_button_crayons=a.getSpriteFromSheet("card_ui_button_crayons"),this.card_ui_button_save=a.getSpriteFromSheet("card_ui_button_save"),this.card_ui_button_stickers=a.getSpriteFromSheet("card_ui_button_stickers"),this.card_ui_scroll_right=a.getSpriteFromSheet("card_ui_scroll_right"),this.card_ui_page_divider=a.getSpriteFromSheet("card_ui_page_divider"),this.card_ui_button_themes=a.getSpriteFromSheet("card_ui_button_themes"),this.card_ui_button_themes_selected=a.getSpriteFromSheet("card_ui_button_themes_selected"),this.card_ui_button_shapes_selected=a.getSpriteFromSheet("card_ui_button_shapes_selected"),this.card_ui_scroll_left=a.getSpriteFromSheet("card_ui_scroll_left"),this.card_ui_button_newpage=a.getSpriteFromSheet("card_ui_button_newpage"),this.card_ui_button_erase=a.getSpriteFromSheet("card_ui_button_erase"),this.card_ui_button_shapes=a.getSpriteFromSheet("card_ui_button_shapes"),this.card_ui_button_eraser=a.getSpriteFromSheet("card_ui_button_eraser"),this.card_ui_button_print=a.getSpriteFromSheet("card_ui_button_print"),this.card_ui_button_stickers_selected=a.getSpriteFromSheet("card_ui_button_stickers_selected")},__class__:n};var o=function(a,b,c,d){this.endPoint=d,this.control2=c,this.control1=b,this.startPoint=a};o.__name__=["pbsdaniel","makeacard","Bezier"],o.prototype={length:function(){for(var a,b,c,d,e,f=11,g=0,h=0,i=0,j=0;f>j;){var k=j++;a=k/f,b=this.point(a,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),c=this.point(a,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),k>0&&(d=b-h,e=c-i,g+=Math.sqrt(d*d+e*e)),h=b,i=c}return g},point:function(a,b,c,d,e){return b*(1-a)*(1-a)*(1-a)+3*c*(1-a)*(1-a)*a+3*d*(1-a)*a*a+e*a*a*a},__class__:o};var p=function(){};p.__name__=["pbsdaniel","makeacard","Main"],p.main=function(){window.SGGameButler=new A("MakeACard",p.start),p._isSpringroll="undefined"!=typeof springroll},p.start=function(a,b){p.SpringrollApp=a,p._bellhop=b,C.init(p.SpringrollApp),window.focus(),p._game=new r(p.SpringrollApp,a.options.debug)},p.ga_call=function(a){try{p._bellhop.send("gacall",a)}catch(b){if(b instanceof j&&(b=b.val),!k.__instanceof(b,i))throw b;window.console.warn("Warning: "+e.string(b))}};var q=function(a,b){null==b&&(b=!1);var c=this;q.SpringrollApp=a,1==a.options.debug?D.enabled=!0:D.enabled=!1,this.checkEnvironment(),D.log("New DanielGame!",q),this._stage=a.display.stage,this._stage.enableMouseOver(10),window.SRApp=a,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,a.display.width,a.display.height).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),b&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),a.on("update",function(a,b,d){c.update({delta:a})})};q.__name__=["sg","pbskids","daniel","SpringrollGame"],q.prototype={checkEnvironment:function(){var a=window.location.search.substring(1);this._queryVars=a.split("&");for(var b=0,c=this._queryVars.length;c>b;){var d=b++,e=this._queryVars[d].split("=");"packageName"==e[0]&&"org.pbskids.gamesapp"==e[1]&&(q.isPBSKidsApp=!0)}},resize:function(a){D.green(e.string(a.width)+", "+e.string(a.height)),this.BG.graphics.clear(),this.BG.graphics.beginFill("orange").drawRect(0,0,a.width,a.height).endFill()},begin:function(){null!=q.SpringrollApp.scaling&&D.purple(q.SpringrollApp.scaling._items)},update:function(a){this._stage.update(a)},__class__:q};var r=function(a,b){null==b&&(b=!1),this._justPeeled=!1,this._loadTransitionT=0,this._stickerScrollTo=0,this._currentScribbler=null,this._themeVO=["card_thankyou","card_iloveyou","card_uggamugga","card_youaregrrific","card_happybirthday","card_foryou","card_hineighbor","card_youarespecial"],this._themes=["card_ui_themes_01.png","card_ui_themes_02.png","card_ui_themes_03.png","card_ui_themes_04.png","card_ui_themes_05.png","card_ui_themes_06.png","card_ui_themes_07.png","card_ui_themes_08.png"],this._mode=3,this._crayonColorHexes=["#F70000","#FD8300","#F7EE00","#3945E6","#0CF700","#1C1C1C","#8A5D3B","#FFFFFF","#F114F4"],this._crayonFrameIndexIndex=-1,this._crayonColorTriplet="",this._atSticker=0,this._colorSelected=0,this._rgb=[[1,0,0],[1,.75,0],[1,1,0],[0,0,1],[0,1,0],[0,0,0]],this._crayonXMargin=-22,this._crayonScale=1,this._shapesPalette=[],this._sideButtonsEnabled=[],this._sideButtons=[],this._trays=[],this._a=new n,this._editWhere=null,this._editMode=!1,this._debug=!1,q.call(this,a,b),this._debug=b,this._debug&&window.console.log("Meow!"),this.NewCursorContainer(),this._loadingScreen=new m,this._loadingScreen.addEventListener("added",(E=this._loadingScreen,d(E,E.start))),this._loadingScreen.addEventListener("removed",(E=this._loadingScreen,d(E,E.freeze))),this._loadLayer.addChild(this._loadingScreen);var c=this._themeVO.concat(["card_title","card_startover_pageturn","card_undo_woosh"]);this._audioMans=c.map(B.makeAudioManifestItem),window.console.log(this._audioMans),this._globalAssets=new B(this.getGlobalData(),this._audioMans,d(this,this.onGlobalAssetsRetrieved)),this._globalAssets.load()};r.__name__=["pbsdaniel","makeacard","MakeACard"],r.__super__=q,r.prototype=c(q.prototype,{getGlobalData:function(){var a=[];return a.push(B.makeManifestItem("colors","assets/sheets/colors.json","spritesheet")),a.push(B.makeManifestItem("crayons","assets/sheets/crayons.json","spritesheet")),a.push(B.makeManifestItem("shapes","assets/sheets/shapes.json","spritesheet")),a.push(B.makeManifestItem("shapesArrangement","assets/config/shapesArrangement.json","text")),a.push(B.makeManifestItem("stickers","assets/sheets/stickers.json","spritesheet")),a.push(B.makeManifestItem("titlescreen","assets/sheets/titlescreen.json","spritesheet")),a.push(B.makeManifestItem("ui","assets/sheets/ui_assets.json","spritesheet")),a.push(B.makeManifestItem("card_ui_overlay.png","assets/images/environments/card_ui_overlay.png")),a.push(B.makeManifestItem(this._themes[0],"assets/images/environments/card_ui_themes_01.png")),a.push(B.makeManifestItem(this._themes[1],"assets/images/environments/card_ui_themes_02.png")),a.push(B.makeManifestItem(this._themes[2],"assets/images/environments/card_ui_themes_03.png")),a.push(B.makeManifestItem(this._themes[3],"assets/images/environments/card_ui_themes_04.png")),a.push(B.makeManifestItem(this._themes[4],"assets/images/environments/card_ui_themes_05.png")),a.push(B.makeManifestItem(this._themes[5],"assets/images/environments/card_ui_themes_06.png")),a.push(B.makeManifestItem(this._themes[6],"assets/images/environments/card_ui_themes_07.png")),a.push(B.makeManifestItem(this._themes[7],"assets/images/environments/card_ui_themes_08.png")),a.push(B.makeManifestItem("title","assets/images/environments/title.jpg")),a},onGlobalAssetsRetrieved:function(){var a=this;for(window.console.log("global assets retrieved"),C.instance.playVO("card_title");this._loadLayer.numChildren>2;)this._loadLayer.removeChildAt(this._loadLayer.numChildren-1);var b=new createjs.Shape;b.graphics.beginFill("#ffffff"),b.graphics.drawCircle(465,245,1),b.graphics.endFill(),b.compositeOperation="destination-out",this._loadLayer.addChild(b),this._loadLayer.cache(0,0,930,490);var c=createjs.Tween.get(this);c.to({_loadTransitionT:930},1e3,createjs.Ease.quintInOut).call(function(){a._loadLayer.removeAllChildren(),a.container.removeChild(a._loadLayer)}),c.addEventListener("change",function(c){b.graphics.clear(),b.graphics.beginFill("#ffffff"),b.graphics.drawCircle(465,245,a._loadTransitionT),b.graphics.endFill(),a._loadLayer.updateCache("")},null),this._a.Load(this._globalAssets);var e=[this._a.card_ui_color_red_on,this._a.card_ui_color_orange_on,this._a.card_ui_color_yellow_on,this._a.card_ui_color_blue_on,this._a.card_ui_color_green_on,this._a.card_ui_color_black_on],f=[this._a.card_ui_color_red_off,this._a.card_ui_color_orange_off,this._a.card_ui_color_yellow_off,this._a.card_ui_color_blue_off,this._a.card_ui_color_green_off,this._a.card_ui_color_black_off];this._buttons_on=[],this._buttons_off=[];for(var g=0,h=e.length;h>g;){var i=g++;this._buttons_on.push(new x(e[i],new w(e[i],15,this._crayonColorHexes[i]))),this._buttons_on[i].turnOn(),this._buttons_off.push(new x(f[i],new w(f[i],15,this._crayonColorHexes[i]))),this._buttons_off[i].turnOn()}this.NewCard();var j=this._globalAssets.getBitmap("card_ui_overlay.png");this._ui=new createjs.Container,this._gameLayer.addChild(this._ui),this._ui.x=this._ui.y=0,this._ui.addChild(j),j.x=0,j.y=0,j.on("mousedown",function(a){});for(var k=0;4>k;){var l=k++;this._trays.push(new createjs.Container),this._ui.addChild(this._trays[l]),this._trays[l].x=650,this._trays[l].y=33.3}this._sideButtons.push(this._a.card_ui_button_themes),this._sideButtons.push(this._a.card_ui_button_stickers),this._sideButtons.push(this._a.card_ui_button_shapes),this._sideButtons.push(this._a.card_ui_button_crayons),this._sideButtonsEnabled.push(this._a.card_ui_button_themes_selected),this._sideButtonsEnabled.push(this._a.card_ui_button_stickers_selected),this._sideButtonsEnabled.push(this._a.card_ui_button_shapes_selected),this._sideButtonsEnabled.push(this._a.card_ui_button_crayons_selected);for(var m=0;4>m;){var n=m++,o=[3-n],p=[new x(this._sideButtons[o[0]],new w(this._sideButtons[o[0]]))];this._sideButtons[o[0]]=p[0],this._ui.addChild(p[0]),this._ui.addChild(this._sideButtonsEnabled[o[0]]),this._sideButtonsEnabled[o[0]].x=830,p[0].x=840,this._sideButtonsEnabled[o[0]].y=this._sideButtons[o[0]].y=16+this._sideButtons[o[0]].getBounds().height*o[0],this._sideButtonsEnabled[o[0]].visible=!1,p[0].on("mousedown",function(b,c){return function(d){b[0].forceOut(),a.SetMode(c[0])}}(p,o)),p[0].turnOn()}for(var r=0,s=this._a.card_ui_crayons_frames.length;s>r;){var t=[r++],u=this._a.card_ui_crayons.clone();this._trays[3].addChild(u),u.scaleX=u.scaleY=this._crayonScale,u.x=t[0]%3*(this._a.card_ui_crayons.getBounds().width*this._crayonScale)+(t[0]%3+1)*this._crayonXMargin-this._crayonXMargin/2,u.y=Math.floor(t[0]/3)*(this._a.card_ui_crayons.getBounds().height*this._crayonScale+20),u.gotoAndStop(this._a.card_ui_crayons_frames[t[0]]),u.on("mousedown",function(b){return function(c){a.StopDrawing(),a.CrayonTime(b[0])}}(t))}var v=this._a.card_ui_color_background;v.x=-17.5,v.y=290-this._trays[2].y,this._trays[2].addChild(v),this.SetUpEditorOnContainer(this._trays[2]);for(var y=0;6>y;){var z=[y++];this._trays[2].addChild(this._buttons_on[z[0]]),this._trays[2].addChild(this._buttons_off[z[0]]),this._buttons_on[z[0]].x=this._buttons_off[z[0]].x=v.x+15+z[0]%3*this._buttons_on[0].getBounds().width*.9,this._buttons_on[z[0]].y=this._buttons_off[z[0]].y=v.y+28+Math.floor(z[0]/3)*(this._buttons_on[0].getBounds().height+7),this._buttons_off[z[0]].on("mousedown",function(b){return function(c){a._buttons_off[b[0]].forceOut(),a.SetShapeColor(b[0])}}(z)),this._buttons_on[z[0]].on("mousedown",function(b){return function(c){a._buttons_on[b[0]].forceOut(),a.SetShapeColor(b[0])}}(z))}var A=0;this._stickerScroll=new createjs.Container;var B=(new createjs.Graphics).beginStroke("#ffffff").beginFill("#ff00ff").drawRect(0,0,200,445).endFill().endStroke(),D=new createjs.Shape(B);D.cache(-10,0,200,445),this._trays[1].addChild(D),D.y=-10,this._trays[1].addChild(this._stickerScroll);for(var E=0,F=this._a.card_ui_stickers_frames.length;F>E;){var G=[E++],H=[this._a.card_ui_stickers.clone()];this._stickerScroll.addChild(H[0]),H[0].gotoAndStop(this._a.card_ui_stickers_frames[G[0]]),H[0].x=50,H[0].y=A,A+=H[0].getBounds().height+20,H[0].on("mousedown",function(b,c){return function(d){var e=b[0].clone();e.x=0,e.y=0,a.ReplaceOnCursor(e),e.gotoAndStop(a._a.card_ui_stickers_frames[c[0]]),a._cursorContainer.x=d.stageX-a._cursorContainer.getBounds().width/4,a._cursorContainer.y=d.stageY-a._cursorContainer.getBounds().height/4}}(H,G))}this._stickerScroll.cache(0,0,this._stickerScroll.getBounds().width+50,this._stickerScroll.getBounds().height+20),this._stickerScroll.compositeOperation="source-in",this.ScrollStickers(0);this._themeScroll=new createjs.Container;var I=D.clone();I.cache(0,0,180,445),I.x=-3,this._trays[0].addChild(I),this._trays[0].addChild(this._themeScroll);for(var J=0,K=this._themes.length;K>J;){var L=J++,M=[this._globalAssets.getBitmap(this._themes[L])],N=[this._themeVO[L]];M[0].scaleX=M[0].scaleY=.1,this._themeScroll.addChild(M[0]),M[0].x=L%2*100-20,M[0].y=50*L,1==(1&L)?M[0].rotation=15:M[0].rotation=-15,M[0].on("mousedown",function(b,c){return function(d){var e=c[0].clone();e.x=-31,e.y=-15,e.rotation=0,e.scaleX=e.scaleY=.53,a._theCard.removeChildAt(0),a._theCard.addChildAt(e,0),C.instance.playVO(b[0])}}(N,M))}this._themeScroll.cache(-20,-20,this._themeScroll.getBounds().width+40,this._themeScroll.getBounds().height+40),this._themeScroll.compositeOperation="source-in";var O=new x(this._a.card_ui_scroll_right.clone(),new w(this._a.card_ui_scroll_right));this._trays[1].addChild(O),O.rotation=88,O.y=360,O.x=185,O.on("mousedown",function(b){O.forceOut(),a.ScrollBySticker(1)}),O.turnOn();var P=new x(this._a.card_ui_scroll_left.clone(),new w(this._a.card_ui_scroll_left));this._trays[1].addChild(P),P.y=-30,P.x=40,P.rotation=92,P.on("mousedown",function(b){P.forceOut(),a.ScrollBySticker(-1)}),P.turnOn(),this._trays[1].cache(-30,-50,this._trays[1].getBounds().width+30,this._trays[1].getBounds().height+50),this._trays[0].cache(-30,-50,this._trays[0].getBounds().width+30,this._trays[0].getBounds().height+50),this._stage.on("stagemousemove",function(b){null!=a._cursorContainer&&(3==a._mode||null==a._onCursor?(a._cursorContainer.x=b.stageX,a._cursorContainer.y=b.stageY):(a._cursorContainer.x=b.stageX-a._cursorContainer.getBounds().width/4,a._cursorContainer.y=b.stageY-a._cursorContainer.getBounds().height/4))}),this.SetMode(0),this.SetShapeColor(0);var Q=new x(this._a.card_ui_button_erase,new w(this._a.card_ui_button_erase));if(this._ui.addChild(Q),Q.x=290,Q.y=440,Q.on("mousedown",function(b){a.StopDrawing(),a._theCard.children.length>2&&(a._theCard.removeChildAt(a._theCard.children.length-1),C.instance.playAudio("card_undo_woosh"))}),Q.turnOn(),!q.isPBSKidsApp){var R=new x(this._a.card_ui_button_print,new w(this._a.card_ui_button_print));this._ui.addChild(R),R.x=430,R.y=430,R.on("mousedown",d(this,this.PrintHandler)),R.turnOn()}var S=new x(this._a.card_ui_button_newpage,new w(this._a.card_ui_button_newpage));this._ui.addChild(S),S.x=149,S.y=430,S.on("mousedown",d(this,this.ClearHandler)),S.turnOn();var T=this._globalAssets.getBitmap("title");this._ui.addChild(T),T.on("mouseover",function(a){});var U=this._a.playBtn;this._ui.addChild(U);var V=this._a.playBtnDown;this._ui.addChild(V),U.x=V.x=this._ui.getBounds().width/2-U.getBounds().width/2,U.y=V.y=375,V.visible=!1,U.on("mouseover",function(a){V.visible=!0}),V.on("mouseout",function(a){V.visible=!1});var W=function(b){a._ui.removeChild(V),a._ui.removeChild(U),a._ui.removeChild(T),C.instance.killAll()};V.on("mousedown",W),U.on("mousedown",W),T.on("mousedown",W),window.document.onkeydown=function(b){if(a._debug&&a.EditModeKeyboardEventHandler(b),!(a._theCard.numChildren>500)){if(Math.random()>.3333333){var c=a._stickerScroll.getChildAt(Math.floor(a._stickerScroll.numChildren*Math.random()*.99));c.dispatchEvent(new createjs.MouseEvent("mousedown",!1,!1,0,0,null,0,!0,0,0))}else a._colorSelected=Math.floor(5.999*Math.random()),a.PopulateShapesPalette(a._colorSelected),a._shapesPalette[Math.floor(Math.random()*a._shapesPalette.length*.999)].dispatchEvent(new createjs.MouseEvent("mousedown",!1,!1,0,0,null,0,!0,0,0));var d=-20+a._theCard.x+(530-a._cursorContainer.getBounds().width/3)*Math.random(),e=-20+a._theCard.y+(425-a._cursorContainer.getBounds().height/3)*Math.random();a._cursorContainer.x=d,a._cursorContainer.y=e;var f=new createjs.MouseEvent("mousedown",!1,!1,d,e,null,0,!0,0,0);a._theCard.dispatchEvent(f)}}},ClearHandler:function(a){var b=this,c=this._theCard;C.instance.playAudio("card_startover_pageturn"),this._gameLayer.addChild(c);var d=2e3*Math.random()-1e3,e=2e3*Math.random()-1e3;createjs.Tween.get(c).to({x:d,y:e,rotation:720},700).call(function(){b._gameLayer.removeChild(c)}),this.NewCard()},PrintHandler:function(a){var b=this._theCard.getChildAt(0);this._theCard.cache(b.x,b.y,b.getBounds().width*b.scaleX,b.getBounds().height*b.scaleY);var c=window.open();c.document.write("<html><body onload=window.print()><br><img src='"+this._theCard.cacheCanvas.toDataURL()+"'/></body></html>"),c.document.close(),this._theCard.uncache()},CardClickHandler:function(a){var b=this;if(3==this._mode){if(null!=this._currentScribbler&&this._currentScribbler.isDrawing()){if("stagemouseup"==a.type&&this._currentScribbler.PointsDrawn<5)return;this.CrayonTime(this._crayonFrameIndexIndex,!1),this.StopDrawing()}else if(null!=this._onCursor){if("stagemouseup"==a.type)return;this.CrayonTime(this._crayonFrameIndexIndex,!0);var c=new s(530,425,this._crayonColorTriplet);this._theCard.addChild(c),c.hitArea=this._theCard.getChildAt(0),c._bigBrush=!1,c.onDrawStart(a),this._currentScribbler=c}}else if(null!=this._onCursor&&!this._justPeeled){var d=this._cursorContainer.x,e=this._cursorContainer.y,f=this._theCard.globalToLocal(this._cursorContainer.x,this._cursorContainer.y);this._theCard.addChild(this._cursorContainer),this._cursorContainer.x=f.x,this._cursorContainer.y=f.y,this._cursorContainer.on("mousedown",function(a){if(3!=b._mode&&null==b._onCursor){b._justPeeled=!0,b._cursorContainer=a.currentTarget,b._onCursor=b._cursorContainer.getChildAt(0);var c=b._theCard.localToGlobal(b._cursorContainer.x,b._cursorContainer.y);b._stage.addChild(b._cursorContainer),b._cursorContainer.x=c.x,b._cursorContainer.y=c.y,b._cursorContainer.removeAllEventListeners(),b._onCursor.removeAllEventListeners(),b._cursorContainer.on("pressmove",function(a){b._justPeeled=!1,b._cursorContainer.removeAllEventListeners()})}}),this.NewCursorContainer(d,e)}},StopDrawing:function(){null!=this._currentScribbler&&this._currentScribbler.isDrawing()&&(this._currentScribbler._stopDrawing=!0,this._currentScribbler.hitArea=this._shapesPalette[0])},SetMode:function(a){this._mode=a,this.StopDrawing(),this.ReplaceOnCursor(null);for(var b=0;4>b;){var c=b++;this._sideButtonsEnabled[c].visible=c==a,this._trays[c].visible=c==a,this._sideButtons[c].visible=c!=a}switch(a){case 0:return void(this._currentScribbler=null);case 1:return void(this._currentScribbler=null);case 2:return void(this._currentScribbler=null);case 3:return}},AddShape:function(a,b,c,d,e,f,g,h){null==h&&(h=1);var i=this._a.card_ui_shapes.clone();return i.gotoAndStop(b),null!=a&&a.addChild(i),i.x=f,i.y=g,i.scaleX=i.scaleY=h,i.filters=[new createjs.ColorFilter(c,d,e,1,0,0,0,0)],i.cache(0,0,i.getBounds().width,i.getBounds().height),i},PopulateShapesPalette:function(a){null==a&&(a=0);for(var b=this,c=0,d=this._shapesPalette;c<d.length;){var f=d[c];++c,this._trays[2].removeChild(f)}this._shapesPalette=[];for(var g=0,i=this._a.card_ui_shapes_frames.length;i>g;){var k=[g++],l=this.AddShape(this._trays[2],this._a.card_ui_shapes_frames[k[0]],this._rgb[a][0],this._rgb[a][1],this._rgb[a][2],k[0]%3*(this._a.card_ui_shapes.getBounds().width+5),Math.floor(k[0]/3)*(this._a.card_ui_shapes.getBounds().height+2),.9);l.name="shape_"+k[0],this._shapesPalette.push(l),l.on("mousedown",function(c){return function(d){b.ReplaceOnCursor(b.AddShape(null,b._a.card_ui_shapes_frames[c[0]],b._rgb[a][0],b._rgb[a][1],b._rgb[a][2],0,0,1)).stop(),b._cursorContainer.x=d.stageX-b._cursorContainer.getBounds().width/4,b._cursorContainer.y=d.stageY-b._cursorContainer.getBounds().height/4}}(k))}try{for(var m=new h,n=JSON.parse(this._globalAssets.getResult("shapesArrangement")),o=0;o<n.length;){var p=n[o];++o,m.set(p.name,p)}this.PositionGameObjectsFromMap(m,this._trays[2])}catch(q){q instanceof j&&(q=q.val),window.console.error("caught: "+e.string(q))}},SetShapeColor:function(a){this._colorSelected=a;for(var b=0;6>b;){var c=b++;this._buttons_on[c].visible=a==c,this._buttons_off[c].visible=a!=c}if(this.PopulateShapesPalette(a),null!=this._onCursor){var d=new createjs.Shape;this._cursorContainer.addChild(d),d.graphics.beginFill("rgb("+Math.floor(255*this._rgb[a][0])+","+Math.floor(255*this._rgb[a][1])+","+Math.floor(255*this._rgb[a][2])+")").drawRect(0,0,this._cursorContainer.getBounds().width,this._cursorContainer.getBounds().height).endFill(),d.compositeOperation="source-in",this._cursorContainer.updateCache("")}},ScrollBySticker:function(a){this._atSticker+=a,this._atSticker<0&&(this._atSticker=0),this._atSticker>=this._stickerScroll.numChildren&&(this._atSticker=this._stickerScroll.numChildren-1),this._stickerScrollTo=-this._stickerScroll.getChildAt(this._atSticker).y},ScrollStickers:function(a){this._stickerScroll.y=a,null!=this._trays[1].cacheCanvas&&this._trays[1].updateCache("")},CrayonTime:function(a,b){null==b&&(b=!1),this._crayonFrameIndexIndex=a;var c=(b?this._a.card_ui_crayons_down:this._a.card_ui_crayons).clone();c.gotoAndStop((b?this._a.card_ui_crayons_down_frames:this._a.card_ui_crayons_frames)[this._crayonFrameIndexIndex]),this._crayonColorTriplet=this._crayonColorHexes[a],c.y=-c.getBounds().height+10,b?c.x=0:c.x=-15,this.ReplaceOnCursor(c)},update:function(a){if(q.prototype.update.call(this,a),null!=this._currentScribbler&&this._currentScribbler.update(a),null!=this._stickerScroll){var b=this._stickerScroll.y-this._stickerScrollTo;if(Math.abs(b)>1.5){var c=.16666*-b;Math.abs(c)<1&&(c/=Math.abs(c));var d=this._stickerScroll.y+c;this.ScrollStickers(d)}}},ReplaceOnCursor:function(a){return this._cursorContainer.removeAllChildren(),this._cursorContainer.uncache(),this._onCursor=a,null!=this._onCursor&&(this._cursorContainer.addChild(this._onCursor),this._cursorContainer.cache(-this._cursorContainer.getBounds().width,-this._cursorContainer.getBounds().height,2*this._cursorContainer.getBounds().width,2*this._cursorContainer.getBounds().height)),a},SetWhiteCardBG:function(){var a=new createjs.Shape((new createjs.Graphics).beginFill("#ffffff").drawRect(0,0,530,425).endFill());a.cache(0,0,530,425),this._theCard.addChildAt(a,0)},NewCard:function(){var a=this;this._theCard=new createjs.Container,this._gameLayer.addChild(this._theCard),this.SetWhiteCardBG(),this._theCard.addChild(this._a.card_ui_page_divider),this._a.card_ui_page_divider.stop(),this._a.card_ui_page_divider.x=265-this._a.card_ui_page_divider.getBounds().width/2,this._gameLayer.addChildAt(this._theCard,0),this._theCard.x=76,this._theCard.y=8,this._theCard.removeAllEventListeners(),this._theCard.on("mousedown",d(this,this.CardClickHandler)),this._theCard.on("stagemouseup",d(this,this.CardClickHandler)),
this._stage.on("stagemouseup",function(b){if(a._justPeeled)return void(a._justPeeled=!1);var c=a._theCard.globalToLocal(b.stageX,b.stageY);a._theCard.getBounds().contains(c.x,c.y)&&a._theCard.dispatchEvent(b)})},NewCursorContainer:function(a,b){null==b&&(b=0),null==a&&(a=0),this._onCursor=null,this._cursorContainer=new createjs.Container,this._stage.addChild(this._cursorContainer),this._cursorContainer.x=a,this._cursorContainer.y=b},SetUpEditorOnContainer:function(a){this._editWhere=a},EditModeKeyboardEventHandler:function(a){if(69==a.keyCode&&this._debug)if(this._editMode){for(var b=0,c=this._editWhere.children;b<c.length;){var e=c[b];++b;var f=e;f.removeEventListener("pressmove",d(this,this.EditMoveHandler),null)}this._editMode=!1,window.console.log(this.GameObjectsToJSON(this._editWhere))}else{for(var g=0,h=this._editWhere.children;g<h.length;){var i=h[g];++g;var j=i;j.removeAllEventListeners(),j.addEventListener("pressmove",d(this,this.EditMoveHandler),null)}this._editMode=!0}},GameObjectsToJSON:function(a){for(var b=[],c=0,d=a.numChildren;d>c;){var e=c++,f=a.getChildAt(e);null!=f.name&&b.push({name:f.name,x:f.x,y:f.y})}return JSON.stringify(b)},PositionGameObjectsFromMap:function(a,b){for(var c=0,d=b.numChildren;d>c;){var e=c++,f=b.getChildAt(e);a.exists(f.name)&&(f.x=a.get(f.name).x,f.y=a.get(f.name).y)}},EditMoveHandler:function(a){if(this._editMode){var b=k.__cast(a.currentTarget,createjs.DisplayObject).getBounds(),c=a.currentTarget.parent.globalToLocal(a.stageX-b.width/2-b.x,a.stageY-b.height/2-b.y);a.currentTarget.x=c.x,a.currentTarget.y=c.y}},__class__:r});var s=function(a,b,c,d){this._currentPointerID=-1,this._erase=!1,this._stopDrawing=!1,this._bigBrush=!1,this._draw=!1,this._oldRadius=1.5,this._velocity=0,this._colorHex="#00ff00",this.PointsDrawn=0,this._tickCount=0,this.currentPoint=new createjs.Point,createjs.Shape.call(this,d),this._tickCount=0,this._width=a,this._height=b,null!=c&&(this._colorHex=c),this.cache(0,0,a,b)};s.__name__=["pbsdaniel","makeacard","Scribbler"],s.distance=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},s.__super__=createjs.Shape,s.prototype=c(createjs.Shape.prototype,{isDrawing:function(){return this._draw},update:function(a){this._tickCount++;var b=this.currentPoint;if(this._draw){this._stopDrawing&&(this._draw=this._stopDrawing=!1);var c=s.distance(this._lastPosition,b),d=c/a.delta;this._velocity=d*(a.delta*s.VelocityChangeFactor/1e3)+this._velocity*(1-a.delta*s.VelocityChangeFactor/1e3),(b.x!=this._lastPosition.x||b.y!=this._lastPosition.y)&&(this._points.push(b),this._lastPosition=b)}if(0==(1&this._tickCount)&&this._points.length>3){for(;this._points.length>3;){var e=this.calculateCCP(this._points[0],this._points[1],this._points[2]),f=e.c2;e=this.calculateCCP(this._points[1],this._points[2],this._points[3]);var g=e.c1,h=new o(this._points[1],f,g,this._points[2]);this.drawCurve(h),this._points.shift(),this.PointsDrawn++}this.updateCache("source-over"),this.graphics.clear()}},drawCurve:function(a){var b,c,d,e,f,g,h,i,j;b=Math.floor(a.length())+1;var k=s.MinBrushRadius+(s.MaxBrushRadius-s.MinBrushRadius-this._velocity*s.VelocityRadiusFactor);k<s.MinBrushRadius&&(k=s.MinBrushRadius),k>s.MaxBrushRadius&&(k=s.MaxBrushRadius);var l=k,m=(k-this._oldRadius)/b;this._oldRadius=k;var n=s.MaxBrushAlpha-this._velocity/5;n=Math.pow(2*this._velocity,5),n=Math.max(n,s.MinBrushAlpha),n=Math.min(n,s.MaxBrushAlpha),this._bigBrush&&(n=Math.pow(2*this._velocity,5),n=Math.max(n,.045),n=Math.min(n,1),s.BoringBrush&&(n=1));for(var o=0;b>o;){var p=o++;c=p/b,d=c*c,e=d*c,f=1-c,g=f*f,h=g*f,i=h*a.startPoint.x,i+=3*g*c*a.control1.x,i+=3*f*d*a.control2.x,i+=e*a.endPoint.x,j=h*a.startPoint.y,j+=3*g*c*a.control1.y,j+=3*f*d*a.control2.y,j+=e*a.endPoint.y,this._bigBrush?(l=s.BigBrushRadius,this.drawCircle(i,j,this.graphics,l)):(this.drawCircle(i,j,this.graphics,l+Math.random()*s.BrushRandomness-s.BrushRandomness/2),l+=m,l<s.MinBrushRadius&&(l=s.MinBrushRadius))}},drawCircle:function(a,b,c,d){null==d&&(d=2),this._rainbow?(c.beginFill(createjs.Graphics.getHSL(this._rainbowIndex,80,70)),this._rainbowIndex++,this._rainbowIndex>360&&(this._rainbowIndex=0)):c.beginFill(this._colorHex),c.drawCircle(a,b,d).endFill()},calculateCCP:function(a,b,c){var d=a.x-b.x,e=a.y-b.y,f=b.x-c.x,g=b.y-c.y,h=(a.x+b.x)/2,i=(a.y+b.y)/2,j=(b.x+c.x)/2,k=(b.y+c.y)/2,l=Math.sqrt(d*d+e*e),m=Math.sqrt(f*f+g*g),n=h-j,o=i-k,p=m/(l+m),q=j+n*p,r=k+o*p,s=b.x-q,t=b.y-r;return{c1:new createjs.Point(h+s,i+t),c2:new createjs.Point(j+s,k+t)}},BadPointerID:function(a,b){return null==b&&(b=!1),(b||this._draw||this._erase)&&a.pointerID!=this._currentPointerID&&-1!=this._currentPointerID},onPressMoveSetCurrentPoint:function(a){this.currentPoint=this.globalToLocal(a.stageX,a.stageY)},onDrawStart:function(a){window.console.log("start scribble"),this.BadPointerID(a)||(this._currentPointerID=a.pointerID,this.currentPoint=this.globalToLocal(a.stageX,a.stageY),this._lastPosition=this.currentPoint,this._bigBrush?this.AnyBrushStart(s.BigBrushRadius):this.AnyBrushStart(s.MinBrushRadius),this.PointsDrawn=0,this.stage.on("stagemousemove",d(this,this.onPressMoveSetCurrentPoint)))},AnyBrushStart:function(a){this._points=[],this._draw=!0,this._stopDrawing=!1,this._points.push(this.currentPoint),this._points.push(this.currentPoint),this.alpha=Math.max(this.alpha,.05),this.drawCircle(this._lastPosition.x,this._lastPosition.y,this.graphics,a),this._velocity=.01,this.updateCache("source-over"),this.graphics.clear()},__class__:s});var t=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};t.__name__=["sg","cjs","AssetLoader"],t.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",d(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b},__class__:t};var u=function(){this.sceneName="unnamed",createjs.Container.call(this)};u.__name__=["sg","cjs","GameScreen"],u.__super__=createjs.Container,u.prototype=c(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){},getImageManifest:function(){var a=[];return a},getAudioManifest:function(){var a=[];return a},__class__:u});var v=function(a,b,c,e,f){this._game=b,this._app=a,a.on("resize",d(this,this.onResize)),this.setBaseDimensions(new createjs.Rectangle(0,0,e,f)),this.onResize(c.canvas.width,c.canvas.height)};v.__name__=["sg","cjs","ScaleHandler"],v.prototype={setBaseDimensions:function(a){this._baseDimennsions=a},onResize:function(a,b){v.scale=a/this._baseDimennsions.width,this._game.scaleX=this._game.scaleY=v.scale,v.currentDimensions=new createjs.Rectangle(0,0,this._baseDimennsions.width*v.scale,this._baseDimennsions.height*v.scale)},__class__:v};var w=function(a,b,c,d){null==d&&(d=5),null==c&&(c="#FFFFFF"),null==b&&(b=15),createjs.Container.call(this),this.x=a.x,this.y=a.y;for(var e=0;d>e;){var f=(e++,a.clone());this.addChild(f),f.x=0,f.y=0,f.shadow=new createjs.Shadow(c,0,0,b),f.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b)}this.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b),this.removeAllChildren()};w.__name__=["sg","cjs","ui","Glow"],w.__super__=createjs.Container,w.prototype=c(createjs.Container.prototype,{__class__:w});var x=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over&&(this._down=this._over),this.addChild(this._hitbox)};x.__name__=["sg","cjs","ui","HoverButton"],x.__super__=createjs.Container,x.prototype=c(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",d(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",d(this,this.onOver)),this._hitbox.addEventListener("mouseout",d(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",d(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",d(this,this.onOver)),this._hitbox.removeEventListener("mouseout",d(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(this._over.visible=!1,this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:x});var y=function(){t.call(this,y.manifest(),"loadingSpriteSheet","loadingData")};y.__name__=["sg","cjs","views","LoadingAnimation"],y.get_instance=function(){return null==y.instance&&(y.instance=new y),y.instance},y.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},y.load=function(a){y.get_instance().loadSpriteSheet(a)},y.loadingAnimation=function(){return new createjs.Sprite(y.get_instance()._spriteSheet,"Loading")},y.__super__=t,y.prototype=c(t.prototype,{__class__:y});var z=function(){u.call(this)};z.__name__=["sg","cjs","views","LoadingScreen"],z.__super__=u,z.prototype=c(u.prototype,{init:function(){window.console.log("Load assets for LodaingScreen"),this._assets=new B(this.getImageManifest(),this.getAudioManifest(),d(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){window.console.log("LoadingScreen: onPackageReady")},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:z});var A=function(a,b){this._started=!1,this.name=a,this._startCall=b};A.__name__=["sg","kit","PBSGameButler"],A.prototype={startGame:function(a,b){this._started||(window.console.log("Butler starting game"),this._startCall(a,b),window.console.log("Start complete"))},get_name:function(){return this.name},__class__:A};var B=function(a,b,c,d){null==d&&(d=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=a,this._audioManifest=b,this._completeCallback=c,this._loadQueue=new createjs.LoadQueue(!0,d),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=C.instance};B.__name__=["sg","pbskids","AssetPackage"],B.makeManifestItem=function(a,b,c){return{id:a,src:b,type:c}},B.makeAudioManifestItem=function(a){return{id:a}},B.prototype={load:function(){null!=this._audioManifest&&this._audioManifest.length>0?C.instance.loadAudio(this._audioManifest,d(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(a,b){if(null!=b&&""!=b){var c=new createjs.Sprite(this._loadQueue.getResult(b),a);return c}for(var d=this._loadQueue.getItems(!0),e=0,f=d.length;f>e;){var g=e++;if("spritesheet"==d[g].item.type&&-1!=this._loadQueue.getResult(d[g].item.id).animations.indexOf(a)){var h=new createjs.Sprite(this._loadQueue.getResult(d[g].item.id),a);return h}}return null},getBitmap:function(a){var b=this._loadQueue.getResult(a);return new createjs.Bitmap(b)},getImage:function(a){return this._loadQueue.getResult(a)},getResult:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a){a.length>0?(this._loadQueue.addEventListener("complete",d(this,this.onQueueComplete),null),this._loadQueue.loadManifest(a)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(a){this._loadQueue.loadManifest(a)},onQueueComplete:function(a){this._loadQueue.removeEventListener("complete",d(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:B};var C=function(a,b){this._callbacks=new h,this._soundMap=new h,this._sounds=new h,createjs.EventDispatcher.call(this),this._voPlayer=a,this._sound=b};C.__name__=["sg","pbskids","audio","SRAudioManager"],C.init=function(a){null==C.instance&&(C.instance=new C(a.voPlayer,a.sound))},C.__super__=createjs.EventDispatcher,C.prototype=c(createjs.EventDispatcher.prototype,{playAudio:function(a,b){var c=this._sound.play(a,b);return c},loopAudio:function(a){var b={loop:-1},c=this._sound.play(a,b);return c},playVO:function(a,b,c){null==c&&(c=!0),c||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(a,b)):window.console.log("VO dropped due to conflicting VO playing. "+a+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(a){this._sound.stop(a)},stopVO:function(a){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(a){},handleComplete:function(a){null!=function(b){var c,d=a.currentTarget.uniqueId;return c=b._callbacks.get(d)}(this)&&function(b){var c,d=a.currentTarget.uniqueId;return c=b._callbacks.get(d)}(this)(),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).stop(),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).removeEventListener("complete",d(this,this.handleComplete)),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).removeEventListener("failed",d(this,this.handleFailed));var b=a.currentTarget.uniqueId;this._sounds.set(b,null);var c=a.currentTarget.uniqueId;this._sounds.remove(c);var e=a.currentTarget.uniqueId;this._callbacks.set(e,null);var f=a.currentTarget.uniqueId;this._callbacks.remove(f)},loadAudio:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}window.console.log(c),window.console.log(this._sound),this._sound.preload(c,b)},queueLoaded:function(a){},__class__:C});var D=function(){};D.__name__=["sg","springroll","logging","Logging"],D.log=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.log(a))},D.getCallerString=function(a){if(null==a)return"";var b=f.getClassName(a).split(".");return"["+b[b.length-1]+"] "},D.clear=function(){D.enabled&&springroll.Debug.clear()},D.debug=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.debug(a))},D.error=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.error(a))},D.info=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.info(a))},D.trace=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.trace(a))},D.aqua=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.aqua(a))},D.blue=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.blue(a))},D.gray=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.gray(a))},D.green=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.green(a))},D.lime=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.lime(a))},D.maroon=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.maroon(a))},D.navy=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.navy(a))},D.olive=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.olive(a))},D.orange=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.orange(a))},D.pink=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.pink(a))},D.purple=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.purple(a))},D.red=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.red(a))},D.silver=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.silver(a))},D.teal=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.teal(a))},D.yellow=function(a,b){D.enabled&&(null!=b&&(a=D.getCallerString(b)+e.string(a)),springroll.Debug.yellow(a))};var E,F=0;String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"];var G={__name__:["Int"]},H={__name__:["Dynamic"]},I=Number;I.__name__=["Float"];var J=Boolean;J.__ename__=["Bool"];var K={__name__:["Class"]},L={};null==Array.prototype.map&&(Array.prototype.map=function(a){for(var b=[],c=0,d=this.length;d>c;){var e=c++;b[e]=a(this[e])}return b}),createjs.DisplayObject.prototype.setBounds=function(a,b,c,d){this._bounds=null!=a?(this._bounds||new createjs.Rectangle).setValues(a,b,c,d):null};var M={};k.__toStr={}.toString,l.GAME_WIDTH=930,l.GAME_HEIGHT=490,m.DT_LOADING_SS="loadingScreenSheet",p.GAME_NAME="MakeACard",r.CARD_WIDTH=530,r.CARD_HEIGHT=425,s.BoringBrush=!1,s.MinBrushRadius=2.5,s.MaxBrushRadius=3.5,s.BigBrushRadius=20,s.VelocityRadiusFactor=7,s.VelocityChangeFactor=1.6,s.MinBrushAlpha=.1,s.MaxBrushAlpha=.55,s.BrushRandomness=0,u.COMPLETE="complete",v.scale=1,x.ACTIVATED="activated",x.DOWN="down",x.OVER="over",y.SPRITESHEET="loadingSpriteSheet",y.DATA="loadingData",z.READY="ready",D.enabled=!0,p.main()}("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);