!function(){"use strict";function t(){this.init()}t.prototype={init:function(){var t=this||y;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var e=this||y;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&0<=t&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&(e.masterGain.gain.value=t);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),n=0;n<i.length;n++){var o=e._howls[r]._soundById(i[n]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||y;e.ctx||c(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var r=0;r<e._howls.length;r++)if(!e._howls[r]._webAudio)for(var i=e._howls[r]._getSoundIds(),n=0;n<i.length;n++){var o=e._howls[r]._soundById(i[n]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},unload:function(){for(var t=this||y,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||y)._codecs[t.replace(/^x-/,"")]},_setup:function(){var e=this||y;if(e.state=e.ctx&&e.ctx.state||"running",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||y,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var r=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),n=i&&parseInt(i[0].split("/")[1],10)<33;return e._codecs={mp3:!(n||!r&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!r,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_enableMobileAudio:function(){var e=this||y,t=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(e._navigator&&e._navigator.userAgent),r=!!("ontouchend"in window||e._navigator&&0<e._navigator.maxTouchPoints||e._navigator&&0<e._navigator.msMaxTouchPoints);if(!e._mobileEnabled&&e.ctx&&(t||r)){e._mobileEnabled=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var i=function(){y._autoResume();var t=e.ctx.createBufferSource();t.buffer=e._scratchBuffer,t.connect(e.ctx.destination),void 0===t.start?t.noteOn(0):t.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),t.onended=function(){t.disconnect(0),e._mobileEnabled=!0,e.mobileAutoEnable=!1,document.removeEventListener("touchend",i,!0)}};return document.addEventListener("touchend",i,!0),e}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&y.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var r=0;r<t._howls[e]._sounds.length;r++)if(!t._howls[e]._sounds[r]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&y.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then(function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")}),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};function e(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")}var y=new t;e.prototype={init:function(t){var e=this;return y.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=y.usingWebAudio&&!e._html5,void 0!==y.ctx&&y.ctx&&y.mobileAutoEnable&&y._enableMobileAudio(),y._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var t=this,e=null;if(!y.noAudio){"string"==typeof t._src&&(t._src=[t._src]);for(var r=0;r<t._src.length;r++){var i,n;if(t._format&&t._format[r])i=t._format[r];else{if("string"!=typeof(n=t._src[r])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}i=(i=(i=/^data:audio\/([^;,]+);/i.exec(n))||/\.([^.]+)$/.exec(n.split("?",1)[0]))&&i[1].toLowerCase()}if(i||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),i&&y.codecs(i)){e=t._src[r];break}}return e?(t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new o(t),t._webAudio&&a(t),t):void t._emit("loaderror",null,"No codec support for selected audio sources.")}t._emit("loaderror",null,"No audio support.")},play:function(t,e){var r=this,i=null;if("number"==typeof t)i=t,t=null;else{if("string"==typeof t&&"loaded"===r._state&&!r._sprite[t])return null;if(void 0===t){t="__default";for(var n=0,o=0;o<r._sounds.length;o++)r._sounds[o]._paused&&!r._sounds[o]._ended&&(n++,i=r._sounds[o]._id);1===n?t=null:i=null}}var s=i?r._soundById(i):r._inactiveSound();if(!s)return null;if(i&&!t&&(t=s._sprite||"__default"),"loaded"!==r._state){s._sprite=t,s._ended=!1;var a=s._id;return r._queue.push({event:"play",action:function(){r.play(a)}}),a}if(i&&!s._paused)return e||setTimeout(function(){r._emit("play",s._id)},0),s._id;r._webAudio&&y._autoResume();var u=Math.max(0,0<s._seek?s._seek:r._sprite[t][0]/1e3),l=Math.max(0,(r._sprite[t][0]+r._sprite[t][1])/1e3-u),h=1e3*l/Math.abs(s._rate);s._paused=!1,s._ended=!1,s._sprite=t,s._seek=u,s._start=r._sprite[t][0]/1e3,s._stop=(r._sprite[t][0]+r._sprite[t][1])/1e3,s._loop=!(!s._loop&&!r._sprite[t][2]);var c=s._node;if(r._webAudio){var d=function(){r._refreshBuffer(s);var t=s._muted||r._muted?0:s._volume;c.gain.setValueAtTime(t,y.ctx.currentTime),s._playStart=y.ctx.currentTime,void 0===c.bufferSource.start?s._loop?c.bufferSource.noteGrainOn(0,u,86400):c.bufferSource.noteGrainOn(0,u,l):s._loop?c.bufferSource.start(0,u,86400):c.bufferSource.start(0,u,l),h!=1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),h)),e||setTimeout(function(){r._emit("play",s._id)},0)},f="running"===y.state;if("loaded"===r._state&&f)d();else{var p=f||"loaded"!==r._state?"load":"resume";r.once(p,d,f?s._id:null),r._clearTimer(s._id)}}else{var _=function(){c.currentTime=u,c.muted=s._muted||r._muted||y._muted||c.muted,c.volume=s._volume*y.volume(),c.playbackRate=s._rate,c.play(),h!=1/0&&(r._endTimers[s._id]=setTimeout(r._ended.bind(r,s),h)),e||r._emit("play",s._id)},g="loaded"===r._state&&(window&&window.ejecta||!c.readyState&&y._navigator.isCocoonJS);if(4===c.readyState||g)_();else{var v=function(){_(),c.removeEventListener(y._canPlayEvent,v,!1)};c.addEventListener(y._canPlayEvent,v,!1),r._clearTimer(s._id)}}return s._id},pause:function(t){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var r=e._getSoundIds(t),i=0;i<r.length;i++){e._clearTimer(r[i]);var n=e._soundById(r[i]);if(n&&!n._paused&&(n._seek=e.seek(r[i]),n._rateSeek=0,n._paused=!0,e._stopFade(r[i]),n._node))if(e._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),e._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||e._emit("pause",n?n._id:null)}return e},stop:function(t,e){var r=this;if("loaded"!==r._state)return r._queue.push({event:"stop",action:function(){r.stop(t)}}),r;for(var i=r._getSoundIds(t),n=0;n<i.length;n++){r._clearTimer(i[n]);var o=r._soundById(i[n]);o&&(o._seek=o._start||0,o._rateSeek=0,o._paused=!0,o._ended=!0,r._stopFade(i[n]),o._node&&(r._webAudio?o._node.bufferSource&&(void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),r._cleanBuffer(o._node)):isNaN(o._node.duration)&&o._node.duration!==1/0||(o._node.currentTime=o._start||0,o._node.pause())),e||r._emit("stop",o._id))}return r},mute:function(t,e){var r=this;if("loaded"!==r._state)return r._queue.push({event:"mute",action:function(){r.mute(t,e)}}),r;if(void 0===e){if("boolean"!=typeof t)return r._muted;r._muted=t}for(var i=r._getSoundIds(e),n=0;n<i.length;n++){var o=r._soundById(i[n]);o&&(o._muted=t,r._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,y.ctx.currentTime):o._node&&(o._node.muted=!!y._muted||t),r._emit("mute",o._id))}return r},volume:function(){var t,e,r,i=this,n=arguments;if(0===n.length)return i._volume;if(1===n.length||2===n.length&&void 0===n[1]?0<=i._getSoundIds().indexOf(n[0])?e=parseInt(n[0],10):t=parseFloat(n[0]):2<=n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10)),!(void 0!==t&&0<=t&&t<=1))return(r=e?i._soundById(e):i._sounds[0])?r._volume:0;if("loaded"!==i._state)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,n)}}),i;void 0===e&&(i._volume=t),e=i._getSoundIds(e);for(var o=0;o<e.length;o++)(r=i._soundById(e[o]))&&(r._volume=t,n[2]||i._stopFade(e[o]),i._webAudio&&r._node&&!r._muted?r._node.gain.setValueAtTime(t,y.ctx.currentTime):r._node&&!r._muted&&(r._node.volume=t*y.volume()),i._emit("volume",r._id));return i},fade:function(r,i,t,n){var o=this,e=Math.abs(r-i),s=i<r?"out":"in",a=e/.01,u=0<a?t/a:t;if(u<4&&(a=Math.ceil(a/(4/u)),u=4),"loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(r,i,t,n)}}),o;o.volume(r,n);for(var l=o._getSoundIds(n),h=0;h<l.length;h++){var c=o._soundById(l[h]);if(c){if(n||o._stopFade(l[h]),o._webAudio&&!c._muted){var d=y.ctx.currentTime,f=d+t/1e3;c._volume=r,c._node.gain.setValueAtTime(r,d),c._node.gain.linearRampToValueAtTime(i,f)}var p=r;c._interval=setInterval(function(t,e){0<a&&(p+="in"==s?.01:-.01),p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,o._webAudio?(void 0===n&&(o._volume=p),e._volume=p):o.volume(p,t,!0),(i<r&&p<=i||r<i&&i<=p)&&(clearInterval(e._interval),e._interval=null,o.volume(i,t),o._emit("fade",t))}.bind(o,l[h],c),u)}}return o},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(y.ctx.currentTime),clearInterval(e._interval),e._interval=null,this._emit("fade",t)),this},loop:function(){var t,e,r,i=this,n=arguments;if(0===n.length)return i._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(r=i._soundById(parseInt(n[0],10)))&&r._loop;t=n[0],i._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var o=i._getSoundIds(e),s=0;s<o.length;s++)(r=i._soundById(o[s]))&&(r._loop=t,i._webAudio&&r._node&&r._node.bufferSource&&((r._node.bufferSource.loop=t)&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop)));return i},rate:function(){var t,e,r,i=this,n=arguments;if(0===n.length)e=i._sounds[0]._id;else if(1===n.length){0<=i._getSoundIds().indexOf(n[0])?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("number"!=typeof t)return(r=i._soundById(e))?r._rate:i._rate;if("loaded"!==i._state)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,n)}}),i;void 0===e&&(i._rate=t),e=i._getSoundIds(e);for(var o=0;o<e.length;o++)if(r=i._soundById(e[o])){r._rateSeek=i.seek(e[o]),r._playStart=i._webAudio?y.ctx.currentTime:r._playStart,r._rate=t,i._webAudio&&r._node&&r._node.bufferSource?r._node.bufferSource.playbackRate.value=t:r._node&&(r._node.playbackRate=t);var s=i.seek(e[o]),a=1e3*((i._sprite[r._sprite][0]+i._sprite[r._sprite][1])/1e3-s)/Math.abs(r._rate);!i._endTimers[e[o]]&&r._paused||(i._clearTimer(e[o]),i._endTimers[e[o]]=setTimeout(i._ended.bind(i,r),a)),i._emit("rate",r._id)}return i},seek:function(){var t,e,r=this,i=arguments;if(0===i.length)e=r._sounds[0]._id;else if(1===i.length){0<=r._getSoundIds().indexOf(i[0])?e=parseInt(i[0],10):(e=r._sounds[0]._id,t=parseFloat(i[0]))}else 2===i.length&&(t=parseFloat(i[0]),e=parseInt(i[1],10));if(void 0===e)return r;if("loaded"!==r._state)return r._queue.push({event:"seek",action:function(){r.seek.apply(r,i)}}),r;var n=r._soundById(e);if(n){if(!("number"==typeof t&&0<=t)){if(r._webAudio){var o=r.playing(e)?y.ctx.currentTime-n._playStart:0,s=n._rateSeek?n._rateSeek-n._seek:0;return n._seek+(s+o*Math.abs(n._rate))}return n._node.currentTime}var a=r.playing(e);a&&r.pause(e,!0),n._seek=t,n._ended=!1,r._clearTimer(e),a&&r.play(e,!0),!r._webAudio&&n._node&&(n._node.currentTime=t),r._emit("seek",e)}return r},playing:function(t){if("number"==typeof t){var e=this._soundById(t);return!!e&&!e._paused}for(var r=0;r<this._sounds.length;r++)if(!this._sounds[r]._paused)return!0;return!1},duration:function(t){var e=this._duration,r=this._soundById(t);return r&&(e=this._sprite[r._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,r=0;r<e.length;r++){e[r]._paused||t.stop(e[r]._id),t._webAudio||(/MSIE |Trident\//.test(y._navigator&&y._navigator.userAgent)||(e[r]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),e[r]._node.removeEventListener("error",e[r]._errorFn,!1),e[r]._node.removeEventListener(y._canPlayEvent,e[r]._loadFn,!1)),delete e[r]._node,t._clearTimer(e[r]._id);var i=y._howls.indexOf(t);0<=i&&y._howls.splice(i,1)}var n=!0;for(r=0;r<y._howls.length;r++)if(y._howls[r]._src===t._src){n=!1;break}return s&&n&&delete s[t._src],y.noAudio=!1,t._state="unloaded",t._sounds=[],t=null},on:function(t,e,r,i){var n=this["_on"+t];return"function"==typeof e&&n.push(i?{id:r,fn:e,once:i}:{id:r,fn:e}),this},off:function(t,e,r){var i=this,n=i["_on"+t],o=0;if("number"==typeof e&&(r=e,e=null),e||r)for(o=0;o<n.length;o++){var s=r===n[o].id;if(e===n[o].fn&&s||!e&&s){n.splice(o,1);break}}else if(t)i["_on"+t]=[];else{var a=Object.keys(i);for(o=0;o<a.length;o++)0===a[o].indexOf("_on")&&Array.isArray(i[a[o]])&&(i[a[o]]=[])}return i},once:function(t,e,r){return this.on(t,e,r,1),this},_emit:function(t,e,r){for(var i=this["_on"+t],n=i.length-1;0<=n;n--)i[n].id&&i[n].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,r)}.bind(this,i[n].fn),0),i[n].once&&this.off(t,i[n].fn,i[n].id));return this},_loadQueue:function(){var t=this;if(0<t._queue.length){var e=t._queue[0];t.once(e.event,function(){t._queue.shift(),t._loadQueue()}),e.action()}return t},_ended:function(t){var e=this,r=t._sprite;if(!e._webAudio&&e._node&&!e._node.ended)return setTimeout(e._ended.bind(e,t),100),e;var i=!(!t._loop&&!e._sprite[r][2]);if(e._emit("end",t._id),!e._webAudio&&i&&e.stop(t._id,!0).play(t._id),e._webAudio&&i){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=y.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),n)}return e._webAudio&&!i&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),y._autoSuspend()),e._webAudio||i||e.stop(t._id),e},_clearTimer:function(t){return this._endTimers[t]&&(clearTimeout(this._endTimers[t]),delete this._endTimers[t]),this},_soundById:function(t){for(var e=0;e<this._sounds.length;e++)if(t===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new o(t)},_drain:function(){var t=this,e=t._pool,r=0,i=0;if(!(t._sounds.length<e)){for(i=0;i<t._sounds.length;i++)t._sounds[i]._ended&&r++;for(i=t._sounds.length-1;0<=i;i--){if(r<=e)return;t._sounds[i]._ended&&(t._webAudio&&t._sounds[i]._node&&t._sounds[i]._node.disconnect(0),t._sounds.splice(i,1),r--)}}},_getSoundIds:function(t){if(void 0!==t)return[t];for(var e=[],r=0;r<this._sounds.length;r++)e.push(this._sounds[r]._id);return e},_refreshBuffer:function(t){return t._node.bufferSource=y.ctx.createBufferSource(),t._node.bufferSource.buffer=s[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,this},_cleanBuffer:function(t){if(this._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=this._scratchBuffer}catch(t){}}return t.bufferSource=null,this}};var o=function(t){this._parent=t,this.init()};o.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++y._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,r=y._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),t._node.gain.setValueAtTime(r,y.ctx.currentTime),t._node.paused=!0,t._node.connect(y.masterGain)):(t._node=new Audio,t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(y._canPlayEvent,t._loadFn,!1),t._node.src=e._src,t._node.preload="auto",t._node.volume=r*y.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++y._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(y._canPlayEvent,this._loadFn,!1)}};var s={},a=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void h(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),i=new Uint8Array(r.length),n=0;n<r.length;++n)i[n]=r.charCodeAt(n);l(i.buffer,e)}else{var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?l(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},u(o)}},u=function(e){try{e.send()}catch(t){e.onerror()}},l=function(t,e){y.ctx.decodeAudioData(t,function(t){t&&0<e._sounds.length&&(s[e._src]=t,h(e,t))},function(){e._emit("loaderror",null,"Decoding audio data failed.")})},h=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){try{"undefined"!=typeof AudioContext?y.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?y.ctx=new webkitAudioContext:y.usingWebAudio=!1}catch(t){y.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(y._navigator&&y._navigator.platform),e=y._navigator&&y._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),r=e?parseInt(e[1],10):null;if(t&&r&&r<9){var i=/safari/.test(y._navigator&&y._navigator.userAgent.toLowerCase());(y._navigator&&y._navigator.standalone&&!i||y._navigator&&!y._navigator.standalone&&!i)&&(y.usingWebAudio=!1)}y.usingWebAudio&&(y.masterGain=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),y.masterGain.gain.value=y._muted?0:1,y.masterGain.connect(y.ctx.destination)),y._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:y,Howl:e}}),"undefined"!=typeof exports&&(exports.Howler=y,exports.Howl=e),"undefined"!=typeof window?(window.HowlerGlobal=t,window.Howler=y,window.Howl=e,window.Sound=o):"undefined"!=typeof global&&(global.HowlerGlobal=t,global.Howler=y,global.Howl=e,global.Sound=o)}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=t()}}(function(){return function o(s,a,u){function l(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=a[e]={exports:{}};s[e][0].call(n.exports,function(t){return l(s[e][1][t]||t)},n,n.exports,o,s,a,u)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<u.length;t++)l(u[t]);return l}({1:[function(t,e,r){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&--e,e}r.INT_BITS=32,r.INT_MAX=2147483647,r.INT_MIN=-1<<31,r.sign=function(t){return(0<t)-(t<0)},r.abs=function(t){var e=t>>31;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(t<e)},r.max=function(t,e){return t^(t^e)&-(t<e)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,e|=r=(15<(t>>>=r))<<2,(e|=r=(3<(t>>>=r))<<1)|(t>>>=r)>>1},r.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},r.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},r.countTrailingZeros=i,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}}(n),r.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},r.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},r.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},r.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},r.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},r.nextCombination=function(t){var e=t|t-1;return 1+e|(~e&-~e)-1>>>i(t)+1}},{}],2:[function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,n,o,s,a,u,l,h=e&&e.length,c=h?e[0]*r:t.length,d=_(t,0,c,r,!0),f=[];if(!d)return f;if(h&&(d=function(t,e,r,i){var n,o,s,a,u,l=[];for(n=0,o=e.length;n<o;n++)s=e[n]*i,a=n<o-1?e[n+1]*i:t.length,(u=_(t,s,a,i,!1))===u.next&&(u.steiner=!0),l.push(b(u));for(l.sort(y),n=0;n<l.length;n++)m(l[n],r),r=g(r,r.next);return r}(t,e,d,r)),t.length>80*r){i=o=t[0],n=s=t[1];for(var p=r;p<c;p+=r)(a=t[p])<i&&(i=a),(u=t[p+1])<n&&(n=u),o<a&&(o=a),s<u&&(s=u);l=0!==(l=Math.max(o-i,s-n))?1/l:0}return v(d,f,r,i,n,l),f}function _(t,e,r,i,n){var o,s;if(n===0<P(t,e,r,i))for(o=e;o<r;o+=i)s=u(o,t[o],t[o+1],s);else for(o=r-i;e<=o;o-=i)s=u(o,t[o],t[o+1],s);return s&&a(s,s.next)&&(C(s),s=s.next),s}function g(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!a(i,i.next)&&0!==T(i.prev,i,i.next))i=i.next;else{if(C(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function v(t,e,r,i,n,o,s){if(t){!s&&o&&function(t,e,r,i){var n=t;for(;null===n.z&&(n.z=p(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next,n!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,u,l=1;do{for(r=t,o=t=null,s=0;r;){for(s++,i=r,e=a=0;e<l&&(a++,i=i.nextZ);e++);for(u=l;0<a||0<u&&i;)0!==a&&(0===u||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,u--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,l*=2}while(1<s)}(n)}(t,i,n,o);for(var a,u,l=t;t.prev!==t.next;)if(a=t.prev,u=t.next,o?c(t,i,n,o):h(t))e.push(a.i/r),e.push(t.i/r),e.push(u.i/r),C(t),t=u.next,l=u.next;else if((t=u)===l){s?1===s?v(t=d(t,e,r),e,r,i,n,o,2):2===s&&f(t,e,r,i,n,o):v(g(t),e,r,i,n,o,1);break}}}function h(t){var e=t.prev,r=t,i=t.next;if(!(0<=T(e,r,i))){for(var n=t.next.next;n!==t.prev;){if(x(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=T(n.prev,n,n.next))return;n=n.next}return 1}}function c(t,e,r,i){var n=t.prev,o=t,s=t.next;if(!(0<=T(n,o,s))){for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,u=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,l=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,h=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=p(a,u,e,r,i),d=p(l,h,e,r,i),f=t.nextZ;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=T(f.prev,f,f.next))return;f=f.nextZ}for(f=t.prevZ;f&&f.z>=c;){if(f!==t.prev&&f!==t.next&&x(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&0<=T(f.prev,f,f.next))return;f=f.prevZ}return 1}}function d(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!a(n,o)&&w(n,i,i.next,o)&&S(n,o)&&S(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),C(i),C(i.next),i=t=o),i=i.next}while(i!==t);return i}function f(t,e,r,i,n,o){var s,a,u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&(a=l,(s=u).next.i!==a.i&&s.prev.i!==a.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&w(r,r.next,t,e))return 1;r=r.next}while(r!==t);return}(s,a)&&S(s,a)&&S(a,s)&&function(t,e){var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;for(;r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),r=r.next,r!==t;);return i}(s,a))){var h=E(u,l);return u=g(u,u.next),h=g(h,h.next),v(u,e,r,i,n,o),void v(h,e,r,i,n,o)}l=l.next}u=u.next}while(u!==t)}function y(t,e){return t.x-e.x}function m(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&s<a){if((s=a)===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===s)return r.prev;var u,l=r,h=r.x,c=r.y,d=1/0;for(i=r.next;i!==l;)n>=i.x&&i.x>=h&&n!==i.x&&x(o<c?n:s,o,h,c,o<c?s:n,o,i.x,i.y)&&((u=Math.abs(o-i.y)/(n-i.x))<d||u===d&&i.x>r.x)&&S(i,t)&&(r=i,d=u),i=i.next;return r}(t,e)){var r=E(e,t);g(r,r.next)}}function p(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function b(t){for(var e=t,r=t;e.x<r.x&&(r=e),(e=e.next)!==t;);return r}function x(t,e,r,i,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(i-a)-(r-s)*(e-a)&&0<=(r-s)*(o-a)-(n-s)*(i-a)}function T(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function a(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,r,i){return a(t,e)&&a(r,i)||a(t,i)&&a(r,e)||0<T(t,e,r)!=0<T(t,e,i)&&0<T(r,i,t)!=0<T(r,i,e)}function S(t,e){return T(t.prev,t,t.next)<0?0<=T(t,e,t.next)&&0<=T(t,t.prev,e):T(t,e,t.prev)<0||T(t,t.next,e)<0}function E(t,e){var r=new s(t.i,t.x,t.y),i=new s(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(o.next=i).prev=o,i}function u(t,e,r,i){var n=new s(t,e,r);return i?(n.next=i.next,(n.prev=i).next.prev=n,i.next=n):(n.prev=n).next=n,n}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function s(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}e.exports=i,(e.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(P(t,0,o,r));if(n)for(var a=0,u=e.length;a<u;a++){var l=e[a]*r,h=a<u-1?e[a+1]*r:t.length;s-=Math.abs(P(t,l,h,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},{}],3:[function(t,e,r){"use strict";function l(){}function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(){this._events=new l,this._eventsCount=0}var n=Object.prototype.hasOwnProperty,f="~";Object.create&&(l.prototype=Object.create(null),(new l).__proto__||(f=!1)),i.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(f?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},i.prototype.listeners=function(t,e){var r=f?f+t:t,i=this._events[r];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var n=0,o=i.length,s=new Array(o);n<o;n++)s[n]=i[n].fn;return s},i.prototype.emit=function(t,e,r,i,n,o){var s=f?f+t:t;if(!this._events[s])return!1;var a,u,l=this._events[s],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,n),!0;case 6:return l.fn.call(l.context,e,r,i,n,o),!0}for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];l.fn.apply(l.context,a)}else{var c,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,i);break;default:if(!a)for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];l[u].fn.apply(l[u].context,a)}}return!0},i.prototype.on=function(t,e,r){var i=new o(e,r||this),n=f?f+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],i]:this._events[n].push(i):(this._events[n]=i,this._eventsCount++),this},i.prototype.once=function(t,e,r){var i=new o(e,r||this,!0),n=f?f+t:t;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],i]:this._events[n].push(i):(this._events[n]=i,this._eventsCount++),this},i.prototype.removeListener=function(t,e,r,i){var n=f?f+t:t;if(!this._events[n])return this;if(!e)return 0==--this._eventsCount?this._events=new l:delete this._events[n],this;var o=this._events[n];if(o.fn)o.fn!==e||i&&!o.once||r&&o.context!==r||(0==--this._eventsCount?this._events=new l:delete this._events[n]);else{for(var s=0,a=[],u=o.length;s<u;s++)(o[s].fn!==e||i&&!o[s].once||r&&o[s].context!==r)&&a.push(o[s]);a.length?this._events[n]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new l:delete this._events[n]}return this},i.prototype.removeAllListeners=function(t){var e;return t?(e=f?f+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new l:delete this._events[e])):(this._events=new l,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=f,i.EventEmitter=i,void 0!==e&&(e.exports=i)},{}],4:[function(t,e,r){function i(t,e){return t.test(e)}function n(t){var e=t||navigator.userAgent,r=e.split("[FBAN");if(void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]),this.apple={phone:i(a,e),ipod:i(u,e),tablet:!i(a,e)&&i(l,e),device:i(a,e)||i(u,e)||i(l,e)},this.amazon={phone:i(d,e),tablet:!i(d,e)&&i(f,e),device:i(d,e)||i(f,e)},this.android={phone:i(d,e)||i(h,e),tablet:!i(d,e)&&!i(h,e)&&(i(f,e)||i(c,e)),device:i(d,e)||i(f,e)||i(h,e)||i(c,e)},this.windows={phone:i(p,e),tablet:i(_,e),device:i(p,e)||i(_,e)},this.other={blackberry:i(g,e),blackberry10:i(v,e),opera:i(y,e),firefox:i(b,e),chrome:i(m,e),device:i(g,e)||i(v,e)||i(y,e)||i(b,e)||i(m,e)},this.seven_inch=i(x,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this}function o(){var t=new n;return t.Class=n,t}var s,a,u,l,h,c,d,f,p,_,g,v,y,m,b,x;s=this,a=/iPhone/i,u=/iPod/i,l=/iPad/i,h=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,c=/Android/i,d=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,_=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,g=/BlackBerry/i,v=/BB10/i,y=/Opera Mini/i,m=/(CriOS|Chrome)(?=.*\bMobile\b)/i,b=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,x=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=n:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=o():s.isMobile=o()},{}],5:[function(t,e,r){"use strict";var u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return}}()?Object.assign:function(t,e){for(var r,i,n=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))l.call(r,s)&&(n[s]=r[s]);if(u){i=u(r);for(var a=0;a<i.length;a++)h.call(r,i[a])&&(n[i[a]]=r[i[a]])}}return n}},{}],6:[function(t,e,r){function n(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=o,r&&this.upload(r),this._updateID=0}var o=new ArrayBuffer(0);n.prototype.upload=function(t,e,r){r||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,r){return new n(t,t.ARRAY_BUFFER,e,r)},n.createIndexBuffer=function(t,e,r){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,r)},n.create=function(t,e,r,i){return new n(t,e,r,i)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=n},{}],7:[function(t,e,r){function s(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100}var a=t("./GLTexture");s.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new a(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},s.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},s.prototype.clear=function(t,e,r,i){this.bind();var n=this.gl;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},s.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},s.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},s.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},s.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},s.createRGBA=function(t,e,r,i){var n=a.fromData(t,null,e,r);n.enableNearestScaling(),n.enableWrapClamp();var o=new s(t,e,r);return o.enableTexture(n),o.unbind(),o},s.createFloat32=function(t,e,r,i){var n=new a.fromData(t,i,e,r);n.enableNearestScaling(),n.enableWrapClamp();var o=new s(t,e,r);return o.enableTexture(n),o.unbind(),o},e.exports=s},{"./GLTexture":9}],8:[function(t,e,r){function i(t,e,r,i,n){this.gl=t,i&&(e=u(e,i),r=u(r,i)),this.program=o(t,e,r,n),this.attributes=s(t,this.program),this.uniformData=a(t,this.program),this.uniforms=l(t,this.uniformData)}var o=t("./shader/compileProgram"),s=t("./shader/extractAttributes"),a=t("./shader/extractUniforms"),u=t("./shader/setPrecision"),l=t("./shader/generateUniformAccessObject");i.prototype.bind=function(){return this.gl.useProgram(this.program),this},i.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=i},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(t,e,r){function o(t,e,r,i,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=i||t.RGBA,this.type=n||t.UNSIGNED_BYTE}var n=!(o.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,i=t.videoHeight||t.height;i!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=i});o.prototype.uploadData=function(t,e,r){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!n){if(!i.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},o.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},o.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},o.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},o.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},o.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},o.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},o.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},o.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},o.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},o.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},o.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},o.fromSource=function(t,e,r){var i=new o(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},o.fromData=function(t,e,r,i){var n=new o(t);return n.uploadData(e,r,i),n},e.exports=o},{}],10:[function(t,e,r){function i(t,e){if(this.nativeVaoExtension=null,i.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var n=t("./setVertexAttribArrays");i.prototype.constructor=i,(e.exports=i).FORCE_NATIVE=!1,i.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},i.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},i.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var i=this.attributes[r];e!==i.buffer&&(i.buffer.bind(),e=i.buffer),t.vertexAttribPointer(i.attribute.location,i.attribute.size,i.type||t.FLOAT,i.normalized||!1,i.stride||0,i.start||0)}return n(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},i.prototype.addAttribute=function(t,e,r,i,n,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:n||0,start:o||0}),this.dirty=!0,this},i.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},i.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},i.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r,e||this.getSize()),this},i.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},i.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(t,e,r){e.exports=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},{}],12:[function(t,e,r){var i={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=i),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=i)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(t,e,r){e.exports=function(t,e,r){var i;if(r){var n=r.tempAttribState,o=r.attribState;for(i=0;i<n.length;i++)n[i]=!1;for(i=0;i<e.length;i++)n[e[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==n[i]&&(o[i]=n[i],r.attribState[i]?t.enableVertexAttribArray(i):t.disableVertexAttribArray(i))}else for(i=0;i<e.length;i++){var s=e[i];t.enableVertexAttribArray(s.attribute.location)}}},{}],14:[function(t,e,r){var u=function(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)};e.exports=function(t,e,r,i){var n=u(t,t.VERTEX_SHADER,e),o=u(t,t.FRAGMENT_SHADER,r),s=t.createProgram();if(t.attachShader(s,n),t.attachShader(s,o),i)for(var a in i)t.bindAttribLocation(s,i[a],a);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(n),t.deleteShader(o),s}},{}],15:[function(t,e,r){var i=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],16:[function(t,e,r){var a=t("./mapType"),u=t("./mapSize"),l=function(t,e,r,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,i||0)};e.exports=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=0;n<i;n++){var o=t.getActiveAttrib(e,n),s=a(t,o.type);r[o.name]={type:s,size:u(s),location:t.getAttribLocation(e,o.name),pointer:l}}return r}},{"./mapSize":20,"./mapType":21}],17:[function(t,e,r){var u=t("./mapType"),l=t("./defaultValue");e.exports=function(t,e){for(var r={},i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<i;n++){var o=t.getActiveUniform(e,n),s=o.name.replace(/\[.*?\]/,""),a=u(t,o.type);r[s]={type:a,size:o.size,location:t.getUniformLocation(e,s),value:l(a,o.size)}}return r}},{"./defaultValue":15,"./mapType":21}],18:[function(t,e,r){var h=function(t){var e=i.replace("%%",t);return new Function(e)},c=function(t,e){var r,i=n.replace(/%%/g,t);return(r=1===e.size?o[e.type]:s[e.type])&&(i+="\nthis.gl."+r+";"),new Function("value",i)},d=function(t,e){for(var r=e,i=0;i<t.length-1;i++){var n=r[t[i]]||{data:{}};r[t[i]]=n,r=n}return r},i=["return this.data.%%.value;"].join("\n"),n=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),o={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},s={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=function(t,e){var r={data:{}};r.gl=t;for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n],s=o.split("."),a=s[s.length-1],u=d(s,r),l=e[o];u.data[a]=l,u.gl=t,Object.defineProperty(u,a,{get:h(a),set:c(a,l)})}return r}},{}],19:[function(t,e,r){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(t,e,r){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return i[t]}},{}],21:[function(t,e,r){var o=null,s={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!o){var r=Object.keys(s);o={};for(var i=0;i<r.length;++i){var n=r[i];o[t[n]]=s[n]}}return o[e]}},{}],22:[function(t,e,r){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],23:[function(t,e,l){(function(n){function o(t,e){for(var r=0,i=t.length-1;0<=i;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;)t.unshift("..");return t}function s(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}function a(t){return e.exec(t).slice(1)}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;l.resolve=function(){for(var t="",e=!1,r=arguments.length-1;-1<=r&&!e;r--){var i=0<=r?arguments[r]:n.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,e="/"===i.charAt(0))}return(e?"/":"")+(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||"."},l.normalize=function(t){var e=l.isAbsolute(t),r="/"===i(t,-1);return(t=o(s(t.split("/"),function(t){return!!t}),!e).join("/"))||e||(t="."),t&&r&&(t+="/"),(e?"/":"")+t},l.isAbsolute=function(t){return"/"===t.charAt(0)},l.join=function(){var t=Array.prototype.slice.call(arguments,0);return l.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},l.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=l.resolve(t).substr(1),e=l.resolve(e).substr(1);for(var i=r(t.split("/")),n=r(e.split("/")),o=Math.min(i.length,n.length),s=o,a=0;a<o;a++)if(i[a]!==n[a]){s=a;break}var u=[];for(a=s;a<i.length;a++)u.push("..");return(u=u.concat(n.slice(s))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(t){var e=a(t),r=e[0],i=e[1];return r||i?r+(i=i&&i.substr(0,i.length-1)):"."},l.basename=function(t,e){var r=a(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},l.extname=function(t){return a(t)[3]};var i="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,t("_process"))},{_process:24}],24:[function(t,e,r){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(h===setTimeout)return setTimeout(e,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function s(){_&&f&&(_=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!_){var t=o(s);_=!0;for(var e=p.length;e;){for(f=p,p=[];++g<e;)f&&f[g].run();g=-1,e=p.length}f=null,_=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function l(){}var h,c,d=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(t){h=i}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(t){c=n}}();var f,p=[],_=!1,g=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];p.push(new u(t,e)),1!==p.length||_||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],25:[function(t,R,D){(function(A){!function(t){function v(t){throw new RangeError(_[t])}function n(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function e(t,e){var r=t.split("@"),i="";return 1<r.length&&(i=r[0]+"@",t=r[1]),i+n((t=t.replace(p,".")).split("."),e).join(".")}function y(t){for(var e,r,i=[],n=0,o=t.length;n<o;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function m(t){return n(t,function(t){var e="";return 65535<t&&(e+=M((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+M(t)}).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,r){var i=0;for(t=r?I(t/c):t>>1,t+=I(t/e);g*E>>1<t;i+=w)t=I(t/g);return I(i+(g+1)*t/(t+h))}function r(t){var e,r,i,n,o,s,a,u,l,h,c,d=[],f=t.length,p=0,_=P,g=C;for((r=t.lastIndexOf(O))<0&&(r=0),i=0;i<r;++i)128<=t.charCodeAt(i)&&v("not-basic"),d.push(t.charCodeAt(i));for(n=0<r?r+1:0;n<f;){for(o=p,s=1,a=w;f<=n&&v("invalid-input"),c=t.charCodeAt(n++),(w<=(u=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:w)||u>I((T-p)/s))&&v("overflow"),p+=u*s,!(u<(l=a<=g?S:g+E<=a?E:a-g));a+=w)s>I(T/(h=w-l))&&v("overflow"),s*=h;g=x(p-o,e=d.length+1,0==o),I(p/e)>T-_&&v("overflow"),_+=I(p/e),p%=e,d.splice(p++,0,_)}return m(d)}function i(t){var e,r,i,n,o,s,a,u,l,h,c,d,f,p,_,g=[];for(d=(t=y(t)).length,e=P,o=C,s=r=0;s<d;++s)(c=t[s])<128&&g.push(M(c));for(i=n=g.length,n&&g.push(O);i<d;){for(a=T,s=0;s<d;++s)(c=t[s])>=e&&c<a&&(a=c);for(a-e>I((T-r)/(f=i+1))&&v("overflow"),r+=(a-e)*f,e=a,s=0;s<d;++s)if((c=t[s])<e&&++r>T&&v("overflow"),c==e){for(u=r,l=w;!(u<(h=l<=o?S:o+E<=l?E:l-o));l+=w)_=u-h,p=w-h,g.push(M(b(h+_%p,0))),u=I(_/p);g.push(M(b(u,0))),o=x(r,f,i==n),r=0,++i}++r,++e}return g.join("")}var o="object"==typeof D&&D&&!D.nodeType&&D,s="object"==typeof R&&R&&!R.nodeType&&R,a="object"==typeof A&&A;a.global!==a&&a.window!==a&&a.self!==a||(t=a);var u,l,T=2147483647,w=36,S=1,E=26,h=38,c=700,C=72,P=128,O="-",d=/^xn--/,f=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=w-S,I=Math.floor,M=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:y,encode:m},decode:r,encode:i,toASCII:function(t){return e(t,function(t){return f.test(t)?"xn--"+i(t):t})},toUnicode:function(t){return e(t,function(t){return d.test(t)?r(t.slice(4).toLowerCase()):t})}},0,o&&s)if(R.exports==o)s.exports=u;else for(l in u)u.hasOwnProperty(l)&&(o[l]=u[l]);else t.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(t,e,r){"use strict";e.exports=function(t,e,r,i){e=e||"&",r=r||"=";var n={};if("string"!=typeof t||0===t.length)return n;var o=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var a,u,l=t.length;0<s&&s<l&&(l=s);for(var h=0;h<l;++h){var c,d,f,p,_=t[h].replace(o,"%20"),g=_.indexOf(r);d=0<=g?(c=_.substr(0,g),_.substr(g+1)):(c=_,""),f=decodeURIComponent(c),p=decodeURIComponent(d),a=n,u=f,Object.prototype.hasOwnProperty.call(a,u)?v(n[f])?n[f].push(p):n[f]=[n[f],p]:n[f]=p}return n};var v=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],27:[function(t,e,r){"use strict";function o(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}function s(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}e.exports=function(r,i,n,t){return i=i||"&",n=n||"=",null===r&&(r=void 0),"object"==typeof r?o(u(r),function(t){var e=encodeURIComponent(s(t))+n;return a(r[t])?o(r[t],function(t){return e+encodeURIComponent(s(t))}).join(i):e+encodeURIComponent(s(r[t]))}).join(i):t?encodeURIComponent(s(t))+n+encodeURIComponent(s(r)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],28:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":26,"./encode":27}],29:[function(t,e,r){"use strict";function P(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,r){if(t&&k.isObject(t)&&t instanceof P)return t;var i=new P;return i.parse(t,e,r),i}var D=t("punycode"),k=t("./util");r.parse=i,r.resolve=function(t,e){return i(t,!1,!0).resolve(e)},r.resolveObject=function(t,e){return t?i(t,!1,!0).resolveObject(e):e},r.format=function(t){return k.isString(t)&&(t=i(t)),t instanceof P?t.format():P.prototype.format.call(t)},r.Url=P;var L=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,F=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,o=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),B=["'"].concat(o),N=["%","/","?",";","#"].concat(B),j=["/","?","#"],X=/^[+a-z0-9A-Z_-]{0,63}$/,U=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G={javascript:!0,"javascript:":!0},W={javascript:!0,"javascript:":!0},H={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},z=t("querystring");P.prototype.parse=function(t,e,r){if(!k.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),n=-1!==i&&i<t.indexOf("#")?"?":"#",o=t.split(n);o[0]=o[0].replace(/\\/g,"/");var s=t=o.join(n);if(s=s.trim(),!r&&1===t.split("#").length){var a=F.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=e?z.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=L.exec(s);if(u){var l=(u=u[0]).toLowerCase();this.protocol=l,s=s.substr(u.length)}if(r||u||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var h="//"===s.substr(0,2);!h||u&&W[u]||(s=s.substr(2),this.slashes=!0)}if(!W[u]&&(h||u&&!H[u])){for(var c=-1,d=0;d<j.length;d++){-1!==(_=s.indexOf(j[d]))&&(-1===c||_<c)&&(c=_)}var f,p;-1!==(p=-1===c?s.lastIndexOf("@"):s.lastIndexOf("@",c))&&(f=s.slice(0,p),s=s.slice(p+1),this.auth=decodeURIComponent(f)),c=-1;for(d=0;d<N.length;d++){var _;-1!==(_=s.indexOf(N[d]))&&(-1===c||_<c)&&(c=_)}-1===c&&(c=s.length),this.host=s.slice(0,c),s=s.slice(c),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var v=this.hostname.split(/\./),y=(d=0,v.length);d<y;d++){var m=v[d];if(m&&!m.match(X)){for(var b="",x=0,T=m.length;x<T;x++)127<m.charCodeAt(x)?b+="x":b+=m[x];if(!b.match(X)){var w=v.slice(0,d),S=v.slice(d+1),E=m.match(U);E&&(w.push(E[1]),S.unshift(E[2])),S.length&&(s="/"+S.join(".")+s),this.hostname=w.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=D.toASCII(this.hostname));var C=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+C,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!G[l])for(d=0,y=B.length;d<y;d++){var O=B[d];if(-1!==s.indexOf(O)){var I=encodeURIComponent(O);I===O&&(I=escape(O)),s=s.split(O).join(I)}}var M=s.indexOf("#");-1!==M&&(this.hash=s.substr(M),s=s.slice(0,M));var A=s.indexOf("?");if(-1!==A?(this.search=s.substr(A),this.query=s.substr(A+1),e&&(this.query=z.parse(this.query)),s=s.slice(0,A)):e&&(this.search="",this.query={}),s&&(this.pathname=s),H[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){C=this.pathname||"";var R=this.search||"";this.path=C+R}return this.href=this.format(),this},P.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",n=!1,o="";this.host?n=t+this.host:this.hostname&&(n=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&k.isObject(this.query)&&Object.keys(this.query).length&&(o=z.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||H[e])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):n=n||"",i&&"#"!==i.charAt(0)&&(i="#"+i),s&&"?"!==s.charAt(0)&&(s="?"+s),e+n+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+i},P.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},P.prototype.resolveObject=function(t){if(k.isString(t)){var e=new P;e.parse(t,!1,!0),t=e}for(var r=new P,i=Object.keys(this),n=0;n<i.length;n++){var o=i[n];r[o]=this[o]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var s=Object.keys(t),a=0;a<s.length;a++){var u=s[a];"protocol"!==u&&(r[u]=t[u])}return H[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!H[t.protocol]){for(var l=Object.keys(t),h=0;h<l.length;h++){var c=l[h];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||W[t.protocol])r.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var f=r.pathname||"",p=r.search||"";r.path=f+p}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),v=g||_||r.host&&t.pathname,y=v,m=r.pathname&&r.pathname.split("/")||[],b=(d=t.pathname&&t.pathname.split("/")||[],r.protocol&&!H[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===m[0]?m[0]=r.host:m.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),v=v&&(""===d[0]||""===m[0])),g)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,m=d;else if(d.length)(m=m||[]).pop(),m=m.concat(d),r.search=t.search,r.query=t.query;else if(!k.isNullOrUndefined(t.search)){if(b)r.hostname=r.host=m.shift(),(E=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift());return r.search=t.search,r.query=t.query,k.isNull(r.pathname)&&k.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=m.slice(-1)[0],T=(r.host||t.host||1<m.length)&&("."===x||".."===x)||""===x,w=0,S=m.length;0<=S;S--)"."===(x=m[S])?m.splice(S,1):".."===x?(m.splice(S,1),w++):w&&(m.splice(S,1),w--);if(!v&&!y)for(;w--;)m.unshift("..");!v||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),T&&"/"!==m.join("/").substr(-1)&&m.push("");var E,C=""===m[0]||m[0]&&"/"===m[0].charAt(0);b&&(r.hostname=r.host=!C&&m.length?m.shift():"",(E=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=E.shift(),r.host=r.hostname=E.shift()));return(v=v||r.host&&m.length)&&!C&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),k.isNull(r.pathname)&&k.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},P.prototype.parseHost=function(){var t=this.host,e=n.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":30,punycode:25,querystring:28}],30:[function(t,e,r){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],31:[function(t,e,r){"use strict";e.exports=function(t,e,r){var i,n=t.length;if(!(n<=e||0===r)){var o=n-(r=n<e+r?n-e:r);for(i=e;i<o;++i)t[i]=t[i+r];t.length=o}}},{}],32:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=i(t("mini-signals")),o=i(t("parse-uri")),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./async")),c=i(t("./Resource")),a=/(#[\w-]+)?$/,u=(l.prototype.add=function(t,e,r,i){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"===(void 0===t?"undefined":h(t))&&(i=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(i=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(i=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new c.default(t,e,r),"function"==typeof i&&this.resources[t].onAfterMiddleware.once(i),this.loading){for(var o=r.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var u=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var l=0;l<s.length;++l)s[l].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},l.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},l.prototype.use=function(t){return this._afterMiddleware.push(t),this},l.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},l.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},l.prototype._prepareUrl=function(t){var e=(0,o.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=a.exec(r)[0];-1!==(r=r.substr(0,r.length-i.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},l.prototype._loadResource=function(r,t){var i=this;r._dequeue=t,s.eachSeries(this._beforeMiddleware,function(t,e){t.call(i,r,function(){e(r.isComplete?{}:null)})},function(){r.isComplete?i._onLoad(r):(r._onLoadBinding=r.onComplete.once(i._onLoad,i),r.load())},!0)},l.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},l.prototype._onLoad=function(r){var i=this;r._onLoadBinding=null,this._resourcesParsing.push(r),r._dequeue(),s.eachSeries(this._afterMiddleware,function(t,e){t.call(i,r,e)},function(){r.onAfterMiddleware.dispatch(r),i.progress+=r.progressChunk,i.onProgress.dispatch(i,r),r.error?i.onError.dispatch(r.error,i,r):i.onLoad.dispatch(i,r),i._resourcesParsing.splice(i._resourcesParsing.indexOf(r),1),i._queue.idle()&&0===i._resourcesParsing.length&&(i.progress=100,i._onComplete())},!0)},l);function l(){var r=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),this.baseUrl=t,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=s.queue(this._boundLoadResource,e),this._queue.pause(),this.resources={},this.onProgress=new n.default,this.onError=new n.default,this.onLoad=new n.default,this.onStart=new n.default,this.onComplete=new n.default}r.default=u},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(){}function o(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function s(t){return t.toString().replace("object ","")}r.__esModule=!0;var a=function(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t},u=i(t("parse-uri")),l=i(t("mini-signals")),h=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null,d=(f.setExtensionLoadType=function(t,e){o(f._loadTypeMap,t,e)},f.setExtensionXhrType=function(t,e){o(f._xhrTypeMap,t,e)},f.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(f.STATUS_FLAGS.COMPLETE,!0),this._setFlag(f.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},f.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=f.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},f.prototype.load=function(t){var e=this;if(!this.isLoading){if(this.isComplete)return void(t&&setTimeout(function(){return t(e)},1));switch(t&&this.onComplete.once(t),this._setFlag(f.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case f.LOAD_TYPE.IMAGE:this.type=f.TYPE.IMAGE,this._loadElement("image");break;case f.LOAD_TYPE.AUDIO:this.type=f.TYPE.AUDIO,this._loadSourceElement("audio");break;case f.LOAD_TYPE.VIDEO:this.type=f.TYPE.VIDEO,this._loadSourceElement("video");break;case f.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},f.prototype._hasFlag=function(t){return!!(this._flags&t)},f.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},f.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},f.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},f.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),this.xhrType===f.XHR_RESPONSE_TYPE.JSON||this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=f.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},f.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},f.prototype._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);var i=document.createElement("source");return i.src=e,i.type=r,i},f.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},f.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},f.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},f.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},f.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},f.prototype._xhrOnLoad=function(){var t=this.xhr,e="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===r&&0<e.length?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===f.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=f.TYPE.TEXT;else if(this.xhrType===f.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=f.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===f.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(e,"text/xml")}else{var n=document.createElement("div");n.innerHTML=e,this.data=n}this.type=f.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},f.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,(c=c||document.createElement("a")).href=t;var r=!(t=(0,u.default)(c.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},f.prototype._determineXhrType=function(){return f._xhrTypeMap[this.extension]||f.XHR_RESPONSE_TYPE.TEXT},f.prototype._determineLoadType=function(){return f._loadTypeMap[this.extension]||f.LOAD_TYPE.XHR},f.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(-1<i?i:t.length,-1<n?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},f.prototype._getMimeFromXhrType=function(t){switch(t){case f.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case f.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case f.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case f.XHR_RESPONSE_TYPE.JSON:return"application/json";case f.XHR_RESPONSE_TYPE.DEFAULT:case f.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},a(f,[{key:"isDataUrl",get:function(){return this._hasFlag(f.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(f.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(f.STATUS_FLAGS.LOADING)}}]),f);function f(t,e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(f.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=f.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=n,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new l.default,this.onProgress=new l.default,this.onComplete=new l.default,this.onAfterMiddleware=new l.default}function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=d).STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},d.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,svg:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE,mp3:d.LOAD_TYPE.AUDIO,ogg:d.LOAD_TYPE.AUDIO,wav:d.LOAD_TYPE.AUDIO,mp4:d.LOAD_TYPE.VIDEO,webm:d.LOAD_TYPE.VIDEO},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT,ttf:d.XHR_RESPONSE_TYPE.BUFFER,otf:d.XHR_RESPONSE_TYPE.BUFFER},d.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(t,e,r){"use strict";function s(){}function a(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}r.__esModule=!0,r.eachSeries=function(r,i,n,o){var s=0,a=r.length;!function t(e){e||s===a?n&&n(e):o?setTimeout(function(){i(r[s++],t)},1):i(r[s++],t)}()},r.queue=function(e,t){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var i={data:t,callback:"function"==typeof r?r:s};e?o._tasks.unshift(i):o._tasks.push(i),setTimeout(function(){return o.process()},1)}}function i(t){return function(){--n,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),n<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var n=0,o={_tasks:[],concurrency:t,saturated:s,unsaturated:s,buffer:t/4,empty:s,drain:s,error:s,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){n=0,o.drain=s,o.started=!1,o._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!o.paused&&n<o.concurrency&&o._tasks.length;){var t=o._tasks.shift();0===o._tasks.length&&o.empty(),(n+=1)===o.concurrency&&o.saturated(),e(t.data,a(i(t)))}},length:function(){return o._tasks.length},running:function(){return n},idle:function(){return o._tasks.length+n===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};return o}},{}],35:[function(t,e,r){"use strict";r.__esModule=!0,r.encodeBinary=function(t){for(var e="",r=0;r<t.length;){for(var i=[0,0,0],n=[0,0,0,0],o=0;o<i.length;++o)r<t.length?i[o]=255&t.charCodeAt(r++):i[o]=0;switch(n[0]=i[0]>>2,n[1]=(3&i[0])<<4|i[1]>>4,n[2]=(15&i[1])<<2|i[2]>>6,n[3]=63&i[2],r-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+=a.charAt(n[s])}return e};var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(t,e,r){"use strict";var i=t("./Loader").default,n=t("./Resource").default,o=t("./async"),s=t("./b64");i.Resource=n,i.async=o,i.base64=s,e.exports=i,e.exports.default=i},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===s.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=(n=u.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=n,t.type=s.default.TYPE.IMAGE,t.data.onload=function(){u.revokeObjectURL(n),t.data.onload=null,e()},{v:void 0});if("object"===o(r))return r.v}}else{var i=t.xhr.getResponseHeader("content-type");if(i&&0===i.indexOf("image"))return t.data=new Image,t.data.src="data:"+i+";base64,"+a.default.encodeBinary(t.xhr.responseText),t.type=s.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}var n;e()}else e()}};var s=i(t("../../Resource")),a=i(t("../../b64")),u=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,r){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}Object.defineProperty(r,"__esModule",{value:!0});var o=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t},s=(o(l,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),l),a=(o(u,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),u);function u(){i(this,u),this._head=this._tail=void 0}function l(t,e,r){void 0===e&&(e=!1),i(this,l),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}a.MiniSignalBinding=s,r.default=a,e.exports=r.default},{}],39:[function(t,e,r){"use strict";e.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(t,e,r){e&&(n[i.q.name][e]=r)}),n}},{}],40:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),n=i(t("ismobilejs")),o=i(t("./accessibleTarget"));u.utils.mixins.delayMixin(u.DisplayObject.prototype,o.default);var s=(a.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=e.length-1;0<=r;r--)this.updateAccessibleObjects(e[r])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,i=this.div;i.style.left=t.left+"px",i.style.top=t.top+"px",i.style.width=this.renderer.width+"px",i.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,u.utils.removeItems(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{i=o._accessibleDiv;var s=o.hitArea,a=o.worldTransform;o.hitArea?(i.style.left=(a.tx+s.x*a.a)*e+"px",i.style.top=(a.ty+s.y*a.d)*r+"px",i.style.width=s.width*a.a*e+"px",i.style.height=s.height*a.d*r+"px"):(s=o.getBounds(),this.capHitArea(s),i.style.left=s.x*e+"px",i.style.top=s.y*r+"px",i.style.width=s.width*e+"px",i.style.height=s.height*r+"px")}}this.renderId++}},a.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},a.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},a.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},a.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},a.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},a.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a);function a(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}r.default=s,u.WebGLRenderer.registerPlugin("accessibility",s),u.CanvasRenderer.registerPlugin("accessibility",s)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,r){"use strict";r.__esModule=!0,r.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./accessibleTarget");Object.defineProperty(r,"accessibleTarget",{enumerable:!0,get:function(){return i(n).default}});var o=t("./AccessibilityManager");Object.defineProperty(r,"AccessibilityManager",{enumerable:!0,get:function(){return i(o).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=function(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t},o=t("./autoDetectRenderer"),s=i(t("./display/Container")),a=t("./ticker"),u=i(t("./settings")),l=t("./const"),h=(c.prototype.render=function(){this.renderer.render(this.stage)},c.prototype.stop=function(){this._ticker.stop()},c.prototype.start=function(){this._ticker.start()},c.prototype.destroy=function(t){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},n(c,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),c);function c(t,e,r,i,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c),"number"==typeof t&&(t=Object.assign({width:t,height:e||u.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!n},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,o.autoDetectRenderer)(t),this.stage=new s.default,this._ticker=null,this.ticker=t.sharedTicker?a.shared:new a.Ticker,t.autoStart&&this.start()}function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=h},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(t,e,r){"use strict";function i(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.substring(0,9))return"precision "+e+" float;\n"+t;return t}r.__esModule=!0;var n,o=t("pixi-gl-core"),s=t("./settings"),a=s&&s.__esModule?s:{default:s},u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=o.GLShader),l);function l(t,e,r){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,i(e,a.default.PRECISION_VERTEX),i(r,a.default.PRECISION_FRAGMENT)))}r.default=u},{"./settings":101,"pixi-gl-core":12}],45:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=function(t,e,r,i){var n=t&&t.forceCanvas;return void 0!==i&&(n=i),!n&&o.isWebGLSupported()?new a.default(t,e,r):new s.default(t,e,r)};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("./utils")),s=i(t("./renderers/canvas/CanvasRenderer")),a=i(t("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(t,e,r){"use strict";r.__esModule=!0,r.VERSION="4.6.1",r.PI_2=2*Math.PI,r.RAD_TO_DEG=180/Math.PI,r.DEG_TO_RAD=Math.PI/180,r.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},r.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},r.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},r.SCALE_MODES={LINEAR:0,NEAREST:1},r.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},r.GC_MODES={AUTO:0,MANUAL:1},r.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,r.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,r.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,r.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},r.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},r.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},r.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},r.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../math"),n=(o.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},o.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},o.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:((t=t||new i.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},o.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},o.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,i=i<o?o:i,n=n<s?s:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},o.prototype.addFrame=function(t,e,r,i,n){var o=t.worldTransform,s=o.a,a=o.b,u=o.c,l=o.d,h=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,_=this.maxY,g=s*e+u*r+h,v=a*e+l*r+c;d=g<d?g:d,f=v<f?v:f,p=p<g?g:p,_=_<v?v:_,d=(g=s*i+u*r+h)<d?g:d,f=(v=a*i+l*r+c)<f?v:f,p=p<g?g:p,_=_<v?v:_,d=(g=s*e+u*n+h)<d?g:d,f=(v=a*e+l*n+c)<f?v:f,p=p<g?g:p,_=_<v?v:_,d=(g=s*i+u*n+h)<d?g:d,f=(v=a*i+l*n+c)<f?v:f,p=p<g?g:p,_=_<v?v:_,this.minX=d,this.minY=f,this.maxX=p,this.maxY=_},o.prototype.addVertices=function(t,e,r,i){for(var n=t.worldTransform,o=n.a,s=n.b,a=n.c,u=n.d,l=n.tx,h=n.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,_=r;_<i;_+=2){var g=e[_],v=e[_+1],y=o*g+a*v+l,m=u*v+s*g+h;c=y<c?y:c,d=m<d?m:d,f=f<y?y:f,p=p<m?m:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},o.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},o.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=u<n?n:u,this.maxY=l<o?o:l}},o.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=o){var s=this.minX,a=this.minY,u=this.maxX,l=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=u<n?n:u,this.maxY=l<o?o:l}},o);function o(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}r.default=n},{"../math":70}],48:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t},o=t("../utils"),s=t("./DisplayObject"),a=s&&s.__esModule?s:{default:s},u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.onChildrenChange=function(){},l.prototype.addChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},l.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},l.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}},l.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},l.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var r=this.getChildIndex(t);(0,o.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},l.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},l.prototype.removeChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var i=this.children.indexOf(t);if(-1===i)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this)}return t},l.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},l.prototype.removeChildren=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],r="number"==typeof e?e:this.children.length,i=r-t,n=void 0;if(0<i&&i<=r){n=this.children.splice(t,i);for(var o=0;o<n.length;++o)n[o].parent=null,n[o].transform&&(n[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<n.length;++s)n[s].emit("removed",this);return n}if(0==i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},l.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},l.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},l.prototype._calculateBounds=function(){},l.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},l.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},l.prototype._renderWebGL=function(t){},l.prototype._renderCanvas=function(t){},l.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},l.prototype.destroy=function(t){n.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},i(l,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return t.children=[],t}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=u).prototype.containerUpdateTransform=u.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=function(t,e,r){return e&&_(t.prototype,e),r&&_(t,r),t},s=i(t("eventemitter3")),a=t("../const"),u=i(t("../settings")),l=i(t("./TransformStatic")),h=i(t("./Transform")),c=i(t("./Bounds")),d=t("../math"),f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,n=s.default),p.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},p.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},p.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new d.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},p.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new d.Rectangle),t=this._localBoundsRect);var i=this.getBounds(!1,t);return this.parent=r,this.transform=e,i},p.prototype.toGlobal=function(t,e){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},p.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},p.prototype.renderWebGL=function(t){},p.prototype.renderCanvas=function(t){},p.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},p.prototype.setTransform=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,a=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=r||1,this.scale.y=i||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=u,this},p.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},o(p,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new p),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),p);function p(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this)),e=u.default.TRANSFORM_MODE===a.TRANSFORM_MODE.STATIC?l.default:h.default;return t.tempDisplayObjectParent=null,t.transform=new e,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new c.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}function _(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=f).prototype.displayObjectUpdateTransform=f.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t},o=t("../math"),s=t("./TransformBase"),a=s&&s.__esModule?s:{default:s},u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,i=a.default),l.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},l.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},l.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},l.prototype.setFromMatrix=function(t){t.decompose(this)},n(l,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this));return t.position=new o.Point(0,0),t.scale=new o.Point(1,1),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new o.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=u},{"../math":70,"./TransformBase":51}],51:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../math"),n=(o.prototype.updateLocalTransform=function(){},o.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,i=this.localTransform;r.a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._worldID++},o);function o(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}(r.default=n).prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},{"../math":70}],52:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t},o=t("../math"),s=t("./TransformBase"),a=s&&s.__esModule?s:{default:s},u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,i=a.default),l.prototype.onChange=function(){this._localID++},l.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},l.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},l.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},l.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(l,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),l);function l(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this));return t.position=new o.ObservablePoint(t.onChange,t,0,0),t.scale=new o.ObservablePoint(t.onChange,t,1,1),t.pivot=new o.ObservablePoint(t.onChange,t,0,0),t.skew=new o.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=u},{"../math":70,"./TransformBase":51}],53:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("../display/Container")),s=i(t("../textures/RenderTexture")),a=i(t("../textures/Texture")),u=i(t("./GraphicsData")),l=i(t("../sprites/Sprite")),h=t("../math"),c=t("../utils"),S=t("../const"),d=i(t("../display/Bounds")),f=i(t("./utils/bezierCurveTo")),p=i(t("../renderers/canvas/CanvasRenderer")),_=void 0,g=new h.Matrix,v=new h.Point,y=new Float32Array(4),m=new Float32Array(4),b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(x,n=o.default),x.prototype.clone=function(){var t=new x;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},x.prototype.lineStyle=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new h.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},x.prototype.moveTo=function(t,e){var r=new h.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},x.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},x.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,o=0,s=0;0===n.length&&this.moveTo(0,0);for(var a=n[n.length-2],u=n[n.length-1],l=1;l<=20;++l){var h=l/20;o=a+(t-a)*h,s=u+(e-u)*h,n.push(o+(t+(r-t)*h-o)*h,s+(e+(i-e)*h-s)*h)}return this.dirty++,this},x.prototype.bezierCurveTo=function(t,e,r,i,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],u=s[s.length-1];return s.length-=2,(0,f.default)(a,u,t,e,r,i,n,o,s),this.dirty++,this},x.prototype.arcTo=function(t,e,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,u=s-t,l=i-e,h=r-t,c=Math.abs(a*h-u*l);if(c<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=a*a+u*u,f=l*l+h*h,p=a*l+u*h,_=n*Math.sqrt(d)/c,g=n*Math.sqrt(f)/c,v=_*p/d,y=g*p/f,m=_*h+g*u,b=_*l+g*a,x=u*(g+v),T=a*(g+v),w=h*(_+y),S=l*(_+y),E=Math.atan2(T-b,x-m),C=Math.atan2(S-b,w-m);this.arc(m+t,b+e,n,E,C,h*a<u*l)}return this.dirty++,this},x.prototype.arc=function(t,e,r,i,n){var o=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(i===n)return this;!o&&n<=i?n+=2*Math.PI:o&&i<=n&&(i+=2*Math.PI);var s=n-i,a=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0==s)return this;var u=t+Math.cos(i)*r,l=e+Math.sin(i)*r,h=this.currentPath?this.currentPath.shape.points:null;h?h[h.length-2]===u&&h[h.length-1]===l||h.push(u,l):(this.moveTo(u,l),h=this.currentPath.shape.points);for(var c=s/(2*a),d=2*c,f=Math.cos(c),p=Math.sin(c),_=a-1,g=_%1/_,v=0;v<=_;++v){var y=c+i+d*(v+g*v),m=Math.cos(y),b=-Math.sin(y);h.push((f*m+p*b)*r+t,(f*-b+p*m)*r+e)}return this.dirty++,this},x.prototype.beginFill=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},x.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},x.prototype.drawRect=function(t,e,r,i){return this.drawShape(new h.Rectangle(t,e,r,i)),this},x.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new h.RoundedRectangle(t,e,r,i,n)),this},x.prototype.drawCircle=function(t,e,r){return this.drawShape(new h.Circle(t,e,r)),this},x.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new h.Ellipse(t,e,r,i)),this},x.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof h.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var n=new h.Polygon(e);return n.closed=r,this.drawShape(n),this},x.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},x.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===S.SHAPES.RECT&&!this.graphicsData[0].lineWidth},x.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},x.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new l.default(new a.default(a.default.WHITE)));var r=this._spriteRect;if(16777215===this.tint)r.tint=this.graphicsData[0].fillColor;else{var i=y,n=m;(0,c.hex2rgb)(this.graphicsData[0].fillColor,i),(0,c.hex2rgb)(this.tint,n),i[0]*=n[0],i[1]*=n[1],i[2]*=n[2],r.tint=(0,c.rgb2hex)(i)}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},x.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},x.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},x.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fill&&i.shape&&i.shape.contains(v.x,v.y)){if(i.holes)for(var n=0;n<i.holes.length;n++)if(i.holes[n].contains(v.x,v.y))return!1;return!0}}return!1},x.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var n=0,o=0,s=0,a=0,u=0,l=0;l<this.graphicsData.length;l++){var h=this.graphicsData[l],c=h.type,d=h.lineWidth;if(n=h.shape,c===S.SHAPES.RECT||c===S.SHAPES.RREC)o=n.x-d/2,s=n.y-d/2,t=o<t?o:t,e=e<o+(a=n.width+d)?o+a:e,r=s<r?s:r,i=i<s+(u=n.height+d)?s+u:i;else if(c===S.SHAPES.CIRC)o=n.x,s=n.y,t=o-(a=n.radius+d/2)<t?o-a:t,e=e<o+a?o+a:e,r=s-(u=n.radius+d/2)<r?s-u:r,i=i<s+u?s+u:i;else if(c===S.SHAPES.ELIP)o=n.x,s=n.y,t=o-(a=n.width+d/2)<t?o-a:t,e=e<o+a?o+a:e,r=s-(u=n.height+d/2)<r?s-u:r,i=i<s+u?s+u:i;else for(var f=n.points,p=0,_=0,g=0,v=0,y=0,m=0,b=0,x=0,T=0;T+2<f.length;T+=2)o=f[T],s=f[T+1],p=f[T+2],_=f[T+3],g=Math.abs(p-o),v=Math.abs(_-s),u=d,(a=Math.sqrt(g*g+v*v))<1e-9||(t=(b=(p+o)/2)-(y=(u/a*v+g)/2)<t?b-y:t,e=e<b+y?b+y:e,r=(x=(_+s)/2)-(m=(u/a*g+v)/2)<r?x-m:r,i=i<x+m?x+m:i)}else i=r=e=t=0;var w=this.boundsPadding;this._localBounds.minX=t-w,this._localBounds.maxX=e+w,this._localBounds.minY=r-w,this._localBounds.maxY=i+w},x.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new u.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===S.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},x.prototype.generateCanvasTexture=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=this.getLocalBounds(),i=s.default.create(r.width,r.height,t,e);_=_||new p.default,this.transform.updateLocalTransform(),this.transform.localTransform.copy(g),g.invert(),g.tx-=r.x,g.ty-=r.y,_.render(this,i,!0,g);var n=a.default.fromCanvas(i.baseTexture._canvasRenderTarget.canvas,t,"graphics");return n.baseTexture.resolution=e,n.baseTexture.update(),n},x.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},x.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},x.prototype.destroy=function(t){n.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var r in this._webgl)for(var i=0;i<this._webgl[r].data.length;++i)this._webgl[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},x);function x(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return e.fillAlpha=1,e.lineWidth=0,e.nativeLines=t,e.lineColor=0,e.graphicsData=[],e.tint=16777215,e._prevTint=16777215,e.blendMode=S.BLEND_MODES.NORMAL,e.currentPath=null,e._webGL={},e.isMask=!1,e.boundsPadding=0,e._localBounds=new d.default,e.dirty=0,e.fastRectDirty=-1,e.clearDirty=0,e.boundsDirty=-1,e.cachedSpriteDirty=!1,e._spriteRect=null,e._fastRect=!1,e}(r.default=b)._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(t,e,r){"use strict";r.__esModule=!0;var i=(u.prototype.clone=function(){return new u(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},u.prototype.addHole=function(t){this.holes.push(t)},u.prototype.destroy=function(){this.shape=null,this.holes=null},u);function u(t,e,r,i,n,o,s,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,u),this.lineWidth=t,this.nativeLines=s,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=n,this._fillTint=i,this.fill=o,this.holes=[],this.shape=a,this.type=a.type}r.default=i},{}],55:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../../renderers/canvas/CanvasRenderer"),n=i&&i.__esModule?i:{default:i},O=t("../../const"),o=(s.prototype.render=function(t){var e=this.renderer,r=e.context,i=t.worldAlpha,n=t.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),r.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var s=0;s<t.graphicsData.length;s++){var a=t.graphicsData[s],u=a.shape,l=a._fillTint,h=a._lineTint;if(r.lineWidth=a.lineWidth,a.type===O.SHAPES.POLY){r.beginPath(),this.renderPolygon(u.points,u.closed,r);for(var c=0;c<a.holes.length;c++)this.renderPolygon(a.holes[c].points,!0,r);a.fill&&(r.globalAlpha=a.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(a.type===O.SHAPES.RECT)!a.fillColor&&0!==a.fillColor||(r.globalAlpha=a.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fillRect(u.x,u.y,u.width,u.height)),a.lineWidth&&(r.globalAlpha=a.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.strokeRect(u.x,u.y,u.width,u.height));else if(a.type===O.SHAPES.CIRC)r.beginPath(),r.arc(u.x,u.y,u.radius,0,2*Math.PI),r.closePath(),a.fill&&(r.globalAlpha=a.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke());else if(a.type===O.SHAPES.ELIP){var d=2*u.width,f=2*u.height,p=u.x-d/2,_=u.y-f/2;r.beginPath();var g=d/2*.5522848,v=f/2*.5522848,y=p+d,m=_+f,b=p+d/2,x=_+f/2;r.moveTo(p,x),r.bezierCurveTo(p,x-v,b-g,_,b,_),r.bezierCurveTo(b+g,_,y,x-v,y,x),r.bezierCurveTo(y,x+v,b+g,m,b,m),r.bezierCurveTo(b-g,m,p,x+v,p,x),r.closePath(),a.fill&&(r.globalAlpha=a.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}else if(a.type===O.SHAPES.RREC){var T=u.x,w=u.y,S=u.width,E=u.height,C=u.radius,P=Math.min(S,E)/2|0;C=P<C?P:C,r.beginPath(),r.moveTo(T,w+C),r.lineTo(T,w+E-C),r.quadraticCurveTo(T,w+E,T+C,w+E),r.lineTo(T+S-C,w+E),r.quadraticCurveTo(T+S,w+E,T+S,w+E-C),r.lineTo(T+S,w+C),r.quadraticCurveTo(T+S,w,T+S-C,w),r.lineTo(T+C,w),r.quadraticCurveTo(T,w,T,w+C),r.closePath(),!a.fillColor&&0!==a.fillColor||(r.globalAlpha=a.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),a.lineWidth&&(r.globalAlpha=a.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),r.stroke())}}},s.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,i=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var o=t.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*i*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255}},s.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var i=1;i<t.length/2;++i)r.lineTo(t[2*i],t[2*i+1]);e&&r.closePath()},s.prototype.destroy=function(){this.renderer=null},s);function s(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.renderer=t}r.default=o,n.default.registerPlugin("graphics",o)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r,i,n,o,s,a){var u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],l=0,h=0,c=0,d=0,f=0;u.push(t,e);for(var p=1,_=0;p<=20;++p)c=(h=(l=1-(_=p/20))*l)*l,f=(d=_*_)*_,u.push(c*t+3*h*_*r+3*l*d*n+f*s,c*e+3*h*_*i+3*l*d*o+f*a);return u}},{}],57:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,l=t("../../utils"),h=t("../../const"),o=i(t("../../renderers/webgl/utils/ObjectRenderer")),s=i(t("../../renderers/webgl/WebGLRenderer")),a=i(t("./WebGLGraphicsData")),u=i(t("./shaders/PrimitiveShader")),c=i(t("./utils/buildPoly")),d=i(t("./utils/buildRectangle")),f=i(t("./utils/buildRoundedRectangle")),p=i(t("./utils/buildCircle")),_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,n=o.default),g.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new u.default(this.gl)},g.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},g.prototype.render=function(t){var e=this.renderer,r=e.gl,i=void 0,n=t._webGL[this.CONTEXT_UID];n&&t.dirty===n.dirty||(this.updateGraphics(t),n=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var s=0,a=n.data.length;s<a;s++){var u=(i=n.data[s]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,l.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(i.vao),i.nativeLines?r.drawArrays(r.LINES,0,i.points.length/6):i.vao.draw(r.TRIANGLE_STRIP,i.indices.length)}},g.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if((r=r||(t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1})).dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var i=0;i<r.data.length;i++)this.graphicsDataPool.push(r.data[i]);r.data.length=0,r.lastIndex=0}for(var n=void 0,o=void 0,s=r.lastIndex;s<t.graphicsData.length;s++){var a=t.graphicsData[s];n=this.getWebGLData(r,0),a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(r,0,!0),r.lastIndex++),a.type===h.SHAPES.POLY&&(0,c.default)(a,n,o),a.type===h.SHAPES.RECT?(0,d.default)(a,n,o):a.type===h.SHAPES.CIRC||a.type===h.SHAPES.ELIP?(0,p.default)(a,n,o):a.type===h.SHAPES.RREC&&(0,f.default)(a,n,o),r.lastIndex++}this.renderer.bindVao(null);for(var u=0;u<r.data.length;u++)(n=r.data[u]).dirty&&n.upload()},g.prototype.getWebGLData=function(t,e,r){var i=t.data[t.data.length-1];return(!i||i.nativeLines!==r||32e4<i.points.length)&&((i=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,i.reset(e),t.data.push(i)),i.dirty=!0,i},g);function g(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.graphicsDataPool=[],e.primitiveShader=null,e.gl=t.gl,e.CONTEXT_UID=0,e}r.default=_,s.default.registerPlugin("graphics",_)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("pixi-gl-core"),n=i&&i.__esModule?i:{default:i},o=(s.prototype.reset=function(){this.points.length=0,this.indices.length=0},s.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},s.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},s);function s(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new n.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}r.default=o},{"pixi-gl-core":12}],59:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=t("../../../Shader"),o=n&&n.__esModule?n:{default:n},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.default),a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}r.default=s},{"../../../Shader":44}],60:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var i=t.shape,n=i.x,o=i.y,s=void 0,a=void 0;if(a=t.type===T.SHAPES.CIRC?(s=i.radius,i.radius):(s=i.width,i.height),0!==s&&0!==a){var u=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(i.width+i.height)),l=2*Math.PI/u;if(t.fill){var h=(0,w.hex2rgb)(t.fillColor),c=t.fillAlpha,d=h[0]*c,f=h[1]*c,p=h[2]*c,_=e.points,g=e.indices,v=_.length/6;g.push(v);for(var y=0;y<u+1;y++)_.push(n,o,d,f,p,c),_.push(n+Math.sin(l*y)*s,o+Math.cos(l*y)*a,d,f,p,c),g.push(v++,v++);g.push(v-1)}if(t.lineWidth){var m=t.points;t.points=[];for(var b=0;b<u+1;b++)t.points.push(n+Math.sin(l*b)*s,o+Math.cos(l*b)*a);(0,x.default)(t,e,r),t.points=m}}};var i=t("./buildLine"),x=i&&i.__esModule?i:{default:i},T=t("../../../const"),w=t("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){t.nativeLines?function(t,e){var r=0,i=t.points;if(0!==i.length){var n=e.points,o=i.length/2,s=(0,W.hex2rgb)(t.lineColor),a=t.lineAlpha,u=s[0]*a,l=s[1]*a,h=s[2]*a;for(r=1;r<o;r++){var c=i[2*(r-1)],d=i[2*(r-1)+1],f=i[2*r],p=i[2*r+1];n.push(c,d),n.push(u,l,h,a),n.push(f,p),n.push(u,l,h,a)}}}(t,r):function(t,e){var r=t.points;if(0!==r.length){var i=new G.Point(r[0],r[1]),n=new G.Point(r[r.length-2],r[r.length-1]);if(i.x===n.x&&i.y===n.y){(r=r.slice()).pop(),r.pop();var o=(n=new G.Point(r[r.length-2],r[r.length-1])).x+.5*(i.x-n.x),s=n.y+.5*(i.y-n.y);r.unshift(o,s),r.push(o,s)}var a=e.points,u=e.indices,l=r.length/2,h=r.length,c=a.length/6,d=t.lineWidth/2,f=(0,W.hex2rgb)(t.lineColor),p=t.lineAlpha,_=f[0]*p,g=f[1]*p,v=f[2]*p,y=r[0],m=r[1],b=r[2],x=r[3],T=0,w=0,S=-(m-x),E=y-b,C=0,P=0,O=0,I=0,M=Math.sqrt(S*S+E*E);S/=M,E/=M,S*=d,E*=d,a.push(y-S,m-E,_,g,v,p),a.push(y+S,m+E,_,g,v,p);for(var A=1;A<l-1;++A){y=r[2*(A-1)],m=r[2*(A-1)+1],b=r[2*A],x=r[2*A+1],T=r[2*(A+1)],w=r[2*(A+1)+1],S=-(m-x),E=y-b,S/=M=Math.sqrt(S*S+E*E),E/=M,S*=d,E*=d,C=-(x-w),P=b-T,C/=M=Math.sqrt(C*C+P*P),P/=M;var R=-E+m-(-E+x),D=-S+b-(-S+y),k=(-S+y)*(-E+x)-(-S+b)*(-E+m),L=-(P*=d)+w-(-P+x),F=-(C*=d)+b-(-C+T),B=(-C+T)*(-P+x)-(-C+b)*(-P+w),N=R*F-L*D;if(Math.abs(N)<.1)N+=10.1,a.push(b-S,x-E,_,g,v,p),a.push(b+S,x+E,_,g,v,p);else{var j=(D*B-F*k)/N,X=(L*k-R*B)/N;196*d*d<(j-b)*(j-b)+(X-x)*(X-x)?(O=S-C,I=E-P,O/=M=Math.sqrt(O*O+I*I),I/=M,O*=d,I*=d,a.push(b-O,x-I),a.push(_,g,v,p),a.push(b+O,x+I),a.push(_,g,v,p),a.push(b-O,x-I),a.push(_,g,v,p),h++):(a.push(j,X),a.push(_,g,v,p),a.push(b-(j-b),x-(X-x)),a.push(_,g,v,p))}}y=r[2*(l-2)],m=r[2*(l-2)+1],b=r[2*(l-1)],S=-(m-(x=r[2*(l-1)+1])),E=y-b,S/=M=Math.sqrt(S*S+E*E),E/=M,S*=d,E*=d,a.push(b-S,x-E),a.push(_,g,v,p),a.push(b+S,x+E),a.push(_,g,v,p),u.push(c);for(var U=0;U<h;++U)u.push(c++);u.push(c-1)}}(t,e)};var G=t("../../../math"),W=t("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.default=function(t,e,r){t.points=t.shape.points.slice();var i=t.points;if(t.fill&&6<=i.length){for(var n=[],o=t.holes,s=0;s<o.length;s++){var a=o[s];n.push(i.length/2),i=i.concat(a.points)}var u=e.points,l=e.indices,h=i.length/2,c=(0,x.hex2rgb)(t.fillColor),d=t.fillAlpha,f=c[0]*d,p=c[1]*d,_=c[2]*d,g=(0,T.default)(i,n,2);if(!g)return;for(var v=u.length/6,y=0;y<g.length;y+=3)l.push(g[y]+v),l.push(g[y]+v),l.push(g[y+1]+v),l.push(g[y+2]+v),l.push(g[y+2]+v);for(var m=0;m<h;m++)u.push(i[2*m],i[2*m+1],f,p,_,d)}0<t.lineWidth&&(0,b.default)(t,e,r)};var b=i(t("./buildLine")),x=t("../../../utils"),T=i(t("earcut"))},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e,r){var i=t.shape,n=i.x,o=i.y,s=i.width,a=i.height;if(t.fill){var u=(0,y.hex2rgb)(t.fillColor),l=t.fillAlpha,h=u[0]*l,c=u[1]*l,d=u[2]*l,f=e.points,p=e.indices,_=f.length/6;f.push(n,o),f.push(h,c,d,l),f.push(n+s,o),f.push(h,c,d,l),f.push(n,o+a),f.push(h,c,d,l),f.push(n+s,o+a),f.push(h,c,d,l),p.push(_,_,1+_,2+_,3+_,3+_)}if(t.lineWidth){var g=t.points;t.points=[n,o,n+s,o,n+s,o+a,n,o+a,n,o],(0,v.default)(t,e,r),t.points=g}};var i=t("./buildLine"),v=i&&i.__esModule?i:{default:i},y=t("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function g(t,e,r){return t+(e-t)*r}function S(t,e,r,i,n,o,s){for(var a=6<arguments.length&&void 0!==s?s:[],u=0,l=0,h=0,c=0,d=0,f=0,p=0,_=0;p<=20;++p)u=g(t,r,_=p/20),l=g(e,i,_),h=g(r,n,_),c=g(i,o,_),d=g(u,h,_),f=g(l,c,_),a.push(d,f);return a}r.__esModule=!0,r.default=function(t,e,r){var i=t.shape,n=i.x,o=i.y,s=i.width,a=i.height,u=i.radius,l=[];if(l.push(n,o+u),S(n,o+a-u,n,o+a,n+u,o+a,l),S(n+s-u,o+a,n+s,o+a,n+s,o+a-u,l),S(n+s,o+u,n+s,o,n+s-u,o,l),S(n+u,o,n,o,n,o+u+1e-10,l),t.fill){for(var h=(0,P.hex2rgb)(t.fillColor),c=t.fillAlpha,d=h[0]*c,f=h[1]*c,p=h[2]*c,_=e.points,g=e.indices,v=_.length/6,y=(0,E.default)(l,null,2),m=0,b=y.length;m<b;m+=3)g.push(y[m]+v),g.push(y[m]+v),g.push(y[m+1]+v),g.push(y[m+2]+v),g.push(y[m+2]+v);for(var x=0,T=l.length;x<T;x++)_.push(l[x],l[++x],d,f,p,c)}if(t.lineWidth){var w=t.points;t.points=l,(0,C.default)(t,e,r),t.points=w}};var E=i(t("earcut")),C=i(t("./buildLine")),P=t("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(t,e,r){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.autoDetectRenderer=r.Application=r.Filter=r.SpriteMaskFilter=r.Quad=r.RenderTarget=r.ObjectRenderer=r.WebGLManager=r.Shader=r.CanvasRenderTarget=r.TextureUvs=r.VideoBaseTexture=r.BaseRenderTexture=r.RenderTexture=r.BaseTexture=r.TextureMatrix=r.Texture=r.Spritesheet=r.CanvasGraphicsRenderer=r.GraphicsRenderer=r.GraphicsData=r.Graphics=r.TextMetrics=r.TextStyle=r.Text=r.SpriteRenderer=r.CanvasTinter=r.CanvasSpriteRenderer=r.Sprite=r.TransformBase=r.TransformStatic=r.Transform=r.Container=r.DisplayObject=r.Bounds=r.glCore=r.WebGLRenderer=r.CanvasRenderer=r.ticker=r.utils=r.settings=void 0;var o=t("./const");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return o[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return s[t]}})});var a=t("pixi-gl-core");Object.defineProperty(r,"glCore",{enumerable:!0,get:function(){return n(a).default}});var u=t("./display/Bounds");Object.defineProperty(r,"Bounds",{enumerable:!0,get:function(){return n(u).default}});var l=t("./display/DisplayObject");Object.defineProperty(r,"DisplayObject",{enumerable:!0,get:function(){return n(l).default}});var h=t("./display/Container");Object.defineProperty(r,"Container",{enumerable:!0,get:function(){return n(h).default}});var c=t("./display/Transform");Object.defineProperty(r,"Transform",{enumerable:!0,get:function(){return n(c).default}});var d=t("./display/TransformStatic");Object.defineProperty(r,"TransformStatic",{enumerable:!0,get:function(){return n(d).default}});var f=t("./display/TransformBase");Object.defineProperty(r,"TransformBase",{enumerable:!0,get:function(){return n(f).default}});var p=t("./sprites/Sprite");Object.defineProperty(r,"Sprite",{enumerable:!0,get:function(){return n(p).default}});var _=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(r,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return n(_).default}});var g=t("./sprites/canvas/CanvasTinter");Object.defineProperty(r,"CanvasTinter",{enumerable:!0,get:function(){return n(g).default}});var v=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(r,"SpriteRenderer",{enumerable:!0,get:function(){return n(v).default}});var y=t("./text/Text");Object.defineProperty(r,"Text",{enumerable:!0,get:function(){return n(y).default}});var m=t("./text/TextStyle");Object.defineProperty(r,"TextStyle",{enumerable:!0,get:function(){return n(m).default}});var b=t("./text/TextMetrics");Object.defineProperty(r,"TextMetrics",{enumerable:!0,get:function(){return n(b).default}});var x=t("./graphics/Graphics");Object.defineProperty(r,"Graphics",{enumerable:!0,get:function(){return n(x).default}});var T=t("./graphics/GraphicsData");Object.defineProperty(r,"GraphicsData",{enumerable:!0,get:function(){return n(T).default}});var w=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(r,"GraphicsRenderer",{enumerable:!0,get:function(){return n(w).default}});var S=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(r,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return n(S).default}});var E=t("./textures/Spritesheet");Object.defineProperty(r,"Spritesheet",{enumerable:!0,get:function(){return n(E).default}});var C=t("./textures/Texture");Object.defineProperty(r,"Texture",{enumerable:!0,get:function(){return n(C).default}});var P=t("./textures/TextureMatrix");Object.defineProperty(r,"TextureMatrix",{enumerable:!0,get:function(){return n(P).default}});var O=t("./textures/BaseTexture");Object.defineProperty(r,"BaseTexture",{enumerable:!0,get:function(){return n(O).default}});var I=t("./textures/RenderTexture");Object.defineProperty(r,"RenderTexture",{enumerable:!0,get:function(){return n(I).default}});var M=t("./textures/BaseRenderTexture");Object.defineProperty(r,"BaseRenderTexture",{enumerable:!0,get:function(){return n(M).default}});var A=t("./textures/VideoBaseTexture");Object.defineProperty(r,"VideoBaseTexture",{enumerable:!0,get:function(){return n(A).default}});var R=t("./textures/TextureUvs");Object.defineProperty(r,"TextureUvs",{enumerable:!0,get:function(){return n(R).default}});var D=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(r,"CanvasRenderTarget",{enumerable:!0,get:function(){return n(D).default}});var k=t("./Shader");Object.defineProperty(r,"Shader",{enumerable:!0,get:function(){return n(k).default}});var L=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(r,"WebGLManager",{enumerable:!0,get:function(){return n(L).default}});var F=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(r,"ObjectRenderer",{enumerable:!0,get:function(){return n(F).default}});var B=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(r,"RenderTarget",{enumerable:!0,get:function(){return n(B).default}});var N=t("./renderers/webgl/utils/Quad");Object.defineProperty(r,"Quad",{enumerable:!0,get:function(){return n(N).default}});var j=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(r,"SpriteMaskFilter",{enumerable:!0,get:function(){return n(j).default}});var X=t("./renderers/webgl/filters/Filter");Object.defineProperty(r,"Filter",{enumerable:!0,get:function(){return n(X).default}});var U=t("./Application");Object.defineProperty(r,"Application",{enumerable:!0,get:function(){return n(U).default}});var G=t("./autoDetectRenderer");Object.defineProperty(r,"autoDetectRenderer",{enumerable:!0,get:function(){return G.autoDetectRenderer}});var W=i(t("./utils")),H=i(t("./ticker")),z=n(t("./settings")),Y=n(t("./renderers/canvas/CanvasRenderer")),V=n(t("./renderers/webgl/WebGLRenderer"));r.settings=z.default,r.utils=W,r.ticker=H,r.CanvasRenderer=Y.default,r.WebGLRenderer=V.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":12}],66:[function(t,e,r){"use strict";function h(t){return t<0?-1:0<t?1:0}r.__esModule=!0;var i=t("./Matrix"),c=i&&i.__esModule?i:{default:i},d=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],p=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],g=[],v=[];!function(){for(var t=0;t<16;t++){var e=[];v.push(e);for(var r=0;r<16;r++)for(var i=h(d[t]*d[r]+p[t]*f[r]),n=h(f[t]*d[r]+_[t]*f[r]),o=h(d[t]*p[r]+p[t]*_[r]),s=h(f[t]*p[r]+_[t]*_[r]),a=0;a<16;a++)if(d[a]===i&&f[a]===n&&p[a]===o&&_[a]===s){e.push(a);break}}for(var u=0;u<16;u++){var l=new c.default;l.set(d[u],f[u],p[u],_[u],0,0),g.push(l)}}();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return d[t]},uY:function(t){return f[t]},vX:function(t){return p[t]},vY:function(t){return _[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return v[t][e]},sub:function(t,e){return v[t][o.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?o.S:o.N:2*Math.abs(e)<=Math.abs(t)?0<t?o.E:o.W:0<e?0<t?o.SE:o.SW:0<t?o.NE:o.NW},matrixAppendRotationInv:function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=g[o.inv(e)];n.tx=r,n.ty=i,t.append(n)}};r.default=o},{"./Matrix":67}],67:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},n=t("./Point"),o=n&&n.__esModule?n:{default:n},s=(a.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},a.prototype.set=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},a.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r},a.prototype.apply=function(t,e){e=e||new o.default;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},a.prototype.applyInverse=function(t,e){e=e||new o.default;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},a.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},a.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},a.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},a.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},a.prototype.setTransform=function(t,e,r,i,n,o,s,a,u){var l=Math.sin(s),h=Math.cos(s),c=Math.cos(u),d=Math.sin(u),f=-Math.sin(a),p=Math.cos(a),_=h*n,g=l*n,v=-l*o,y=h*o;return this.a=c*_+d*v,this.b=c*g+d*y,this.c=f*_+p*v,this.d=f*g+p*y,this.tx=t+(r*_+i*v),this.ty=e+(r*g+i*y),this},a.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},a.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),s=Math.atan2(r,e);return Math.abs(o+s)<1e-5?(t.rotation=s,e<0&&0<=n&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},a.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,o=t*i-e*r;return this.a=i/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(t*this.ty-e*n)/o,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var t=new a;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},a.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},i(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this.array=null}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"./Point":69}],68:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t},n=(o.prototype.set=function(t,e){var r=t||0,i=e||(0!==e?r:0);this._x===r&&this._y===i||(this._x=r,this._y=i,this.cb.call(this.scope))},o.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},i(o,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),o);function o(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this._x=r,this._y=i,this.cb=t,this.scope=e}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=n},{}],69:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n);function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.x=t,this.y=e}r.default=i},{}],70:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./Point");Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return i(n).default}});var o=t("./ObservablePoint");Object.defineProperty(r,"ObservablePoint",{enumerable:!0,get:function(){return i(o).default}});var s=t("./Matrix");Object.defineProperty(r,"Matrix",{enumerable:!0,get:function(){return i(s).default}});var a=t("./GroupD8");Object.defineProperty(r,"GroupD8",{enumerable:!0,get:function(){return i(a).default}});var u=t("./shapes/Circle");Object.defineProperty(r,"Circle",{enumerable:!0,get:function(){return i(u).default}});var l=t("./shapes/Ellipse");Object.defineProperty(r,"Ellipse",{enumerable:!0,get:function(){return i(l).default}});var h=t("./shapes/Polygon");Object.defineProperty(r,"Polygon",{enumerable:!0,get:function(){return i(h).default}});var c=t("./shapes/Rectangle");Object.defineProperty(r,"Rectangle",{enumerable:!0,get:function(){return i(c).default}});var d=t("./shapes/RoundedRectangle");Object.defineProperty(r,"RoundedRectangle",{enumerable:!0,get:function(){return i(d).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("./Rectangle"),n=i&&i.__esModule?i:{default:i},o=t("../../const"),s=(a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=r},a.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.x=t,this.y=e,this.radius=r,this.type=o.SHAPES.CIRC}r.default=s},{"../../const":46,"./Rectangle":74}],72:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("./Rectangle"),n=i&&i.__esModule?i:{default:i},o=t("../../const"),s=(a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return(r*=r)+(i*=i)<=1},a.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.x=t,this.y=e,this.width=r,this.height=i,this.type=o.SHAPES.ELIP}r.default=s},{"../../const":46,"./Rectangle":74}],73:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../Point"),s=i&&i.__esModule?i:{default:i},a=t("../../const"),n=(u.prototype.clone=function(){return new u(this.points.slice())},u.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},u.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var s=this.points[2*n],a=this.points[2*n+1],u=this.points[2*o],l=this.points[2*o+1];e<a!=e<l&&t<(e-a)/(l-a)*(u-s)+s&&(r=!r)}return r},u);function u(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),Array.isArray(e[0])&&(e=e[0]),e[0]instanceof s.default){for(var i=[],n=0,o=e.length;n<o;n++)i.push(e[n].x,e[n].y);e=i}this.closed=!0,this.points=e,this.type=a.SHAPES.POLY}r.default=n},{"../../const":46,"../Point":69}],74:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t},n=t("../../const"),o=(s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},s.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},s.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},s.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=i,this.height=n-i},i(s,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new s(0,0,0,0)}}]),s);function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=n.SHAPES.RECT}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=o},{"../../const":46}],75:[function(t,e,r){"use strict";r.__esModule=!0;var o=t("../../const"),i=(s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.radius)},s.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},s);function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.x=t,this.y=e,this.width=r,this.height=i,this.radius=n,this.type=o.SHAPES.RREC}r.default=i},{"../../const":46}],76:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o,n=function(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),t},s=t("../utils"),a=t("../math"),u=t("../const"),l=i(t("../settings")),h=i(t("../display/Container")),c=i(t("../textures/RenderTexture")),d=i(t("eventemitter3")),f=new a.Matrix,p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,o=d.default),_.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},_.prototype.generateTexture=function(t,e,r){var i=t.getLocalBounds(),n=c.default.create(0|i.width,0|i.height,e,r);return f.tx=-i.x,f.ty=-i.y,this.render(t,n,!1,f,!0),n},_.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},n(_,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,s.hex2string)(t),(0,s.hex2rgb)(t,this._backgroundColorRgba)}}]),_);function _(t,e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return(0,s.sayHello)(t),"number"==typeof e&&(e=Object.assign({width:e,height:r||l.default.RENDER_OPTIONS.height},i)),e=Object.assign({},l.default.RENDER_OPTIONS,e),n.options=e,n.type=u.RENDERER_TYPE.UNKNOWN,n.screen=new a.Rectangle(0,0,e.width,e.height),n.view=e.view||document.createElement("canvas"),n.resolution=e.resolution||l.default.RESOLUTION,n.transparent=e.transparent,n.autoResize=e.autoResize||!1,n.blendModes=null,n.preserveDrawingBuffer=e.preserveDrawingBuffer,n.clearBeforeRender=e.clearBeforeRender,n.roundPixels=e.roundPixels,n._backgroundColor=0,n._backgroundColorRgba=[0,0,0,0],n._backgroundColorString="#000000",n.backgroundColor=e.backgroundColor||n._backgroundColor,n._tempDisplayObjectParent=new h.default,n._lastObjectRendered=n._tempDisplayObjectParent,n}function g(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=p},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("../SystemRenderer")),s=i(t("./utils/CanvasMaskManager")),h=i(t("./utils/CanvasRenderTarget")),a=i(t("./utils/mapCanvasBlendModesToPixi")),u=t("../../utils"),c=t("../../const"),l=i(t("../../settings")),d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n=o.default),f.prototype.render=function(t,e,r,i,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new h.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(e||(this._lastObjectRendered=t),!n){var a=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;i?(i.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=c.BLEND_MODES.NORMAL,s.globalCompositeOperation=this.blendModes[c.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var l=this.context;this.context=s,t.renderCanvas(this),this.context=l,s.restore(),this.resolution=o,this.emit("postrender")}},f.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},f.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},f.prototype.destroy=function(t){this.destroyPlugins(),n.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},f.prototype.resize=function(t,e){n.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=l.default.SCALE_MODE===c.SCALE_MODES.LINEAR)},f.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},f);function f(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"Canvas",t,e,r));return i.type=c.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new s.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,a.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}r.default=d,u.pluginTarget.mixin(d)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(t,e,r){"use strict";r.__esModule=!0;var S=t("../../../const"),i=(n.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,i=t.transform.worldTransform,n=e.resolution;e.context.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},n.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var i=0;i<r;i++){var n=t.graphicsData[i],o=n.shape;if(n.type===S.SHAPES.POLY){var s=o.points;e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(n.type===S.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(n.type===S.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(n.type===S.SHAPES.ELIP){var u=2*o.width,l=2*o.height,h=o.x-u/2,c=o.y-l/2,d=u/2*.5522848,f=l/2*.5522848,p=h+u,_=c+l,g=h+u/2,v=c+l/2;e.moveTo(h,v),e.bezierCurveTo(h,v-f,g-d,c,g,c),e.bezierCurveTo(g+d,c,p,v-f,p,v),e.bezierCurveTo(p,v+f,g+d,_,g,_),e.bezierCurveTo(g-d,_,h,v+f,h,v),e.closePath()}else if(n.type===S.SHAPES.RREC){var y=o.x,m=o.y,b=o.width,x=o.height,T=o.radius,w=Math.min(b,x)/2|0;T=w<T?w:T,e.moveTo(y,m+T),e.lineTo(y,m+x-T),e.quadraticCurveTo(y,m+x,y+T,m+x),e.lineTo(y+b-T,m+x),e.quadraticCurveTo(y+b,m+x,y+b,m+x-T),e.lineTo(y+b,m+T),e.quadraticCurveTo(y+b,m,y+b-T,m),e.lineTo(y+T,m),e.quadraticCurveTo(y,m,y,m+T),e.closePath()}}}},n.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},n.prototype.destroy=function(){},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.renderer=t}r.default=i},{"../../../const":46}],79:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},n=t("../../../settings"),o=n&&n.__esModule?n:{default:n},s=(a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},i(a,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),a);function a(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(t,e)}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../../../settings":101}],80:[function(t,e,r){"use strict";function s(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}r.__esModule=!0,r.default=function(){if("undefined"==typeof document)return!1;var t=s("#ff00ff"),e=s("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var n=i.getImageData(2,0,1,1);if(!n)return!1;var o=n.data;return 255===o[0]&&0===o[1]&&0===o[2]}},{}],81:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="multiply",t[i.BLEND_MODES.SCREEN]="screen",t[i.BLEND_MODES.OVERLAY]="overlay",t[i.BLEND_MODES.DARKEN]="darken",t[i.BLEND_MODES.LIGHTEN]="lighten",t[i.BLEND_MODES.COLOR_DODGE]="color-dodge",t[i.BLEND_MODES.COLOR_BURN]="color-burn",t[i.BLEND_MODES.HARD_LIGHT]="hard-light",t[i.BLEND_MODES.SOFT_LIGHT]="soft-light",t[i.BLEND_MODES.DIFFERENCE]="difference",t[i.BLEND_MODES.EXCLUSION]="exclusion",t[i.BLEND_MODES.HUE]="hue",t[i.BLEND_MODES.SATURATION]="saturate",t[i.BLEND_MODES.COLOR]="color",t[i.BLEND_MODES.LUMINOSITY]="luminosity"):(t[i.BLEND_MODES.NORMAL]="source-over",t[i.BLEND_MODES.ADD]="lighter",t[i.BLEND_MODES.MULTIPLY]="source-over",t[i.BLEND_MODES.SCREEN]="source-over",t[i.BLEND_MODES.OVERLAY]="source-over",t[i.BLEND_MODES.DARKEN]="source-over",t[i.BLEND_MODES.LIGHTEN]="source-over",t[i.BLEND_MODES.COLOR_DODGE]="source-over",t[i.BLEND_MODES.COLOR_BURN]="source-over",t[i.BLEND_MODES.HARD_LIGHT]="source-over",t[i.BLEND_MODES.SOFT_LIGHT]="source-over",t[i.BLEND_MODES.DIFFERENCE]="source-over",t[i.BLEND_MODES.EXCLUSION]="source-over",t[i.BLEND_MODES.HUE]="source-over",t[i.BLEND_MODES.SATURATION]="source-over",t[i.BLEND_MODES.COLOR]="source-over",t[i.BLEND_MODES.LUMINOSITY]="source-over"),t[i.BLEND_MODES.NORMAL_NPM]=t[i.BLEND_MODES.NORMAL],t[i.BLEND_MODES.ADD_NPM]=t[i.BLEND_MODES.ADD],t[i.BLEND_MODES.SCREEN_NPM]=t[i.BLEND_MODES.SCREEN],t};var i=t("../../../const"),n=t("./canUseNewCanvasBlendModes"),o=n&&n.__esModule?n:{default:n}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../../const"),n=t("../../settings"),o=n&&n.__esModule?n:{default:n},s=(a.prototype.update=function(){this.count++,this.mode!==i.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},a.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},a.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])},a);function a(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}r.default=s},{"../../const":46,"../../settings":101}],83:[function(t,e,r){"use strict";r.__esModule=!0;var u=t("pixi-gl-core"),l=t("../../const"),i=t("./utils/RenderTarget"),h=i&&i.__esModule?i:{default:i},s=t("../../utils"),n=(o.prototype.bindTexture=function(){},o.prototype.getTexture=function(){},o.prototype.updateTexture=function(t,e){var r=this.gl,i=!!t._glRenderTargets;if(!t.hasLoaded)return null;var n=this.renderer.boundTextures;if(void 0===e)for(var o=e=0;o<n.length;++o)if(n[o]===t){e=o;break}n[e]=t,r.activeTexture(r.TEXTURE0+e);var s=t._glTextures[this.renderer.CONTEXT_UID];if(s)i?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):s.upload(t.source);else{if(i){var a=new h.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);a.resize(t.width,t.height),s=(t._glRenderTargets[this.renderer.CONTEXT_UID]=a).texture}else(s=new u.GLTexture(this.gl,null,null,null,null)).bind(e),s.premultiplyAlpha=!0,s.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=s,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&s.enableMipmap(),t.wrapMode===l.WRAP_MODES.CLAMP?s.enableWrapClamp():t.wrapMode===l.WRAP_MODES.REPEAT?s.enableWrapRepeat():s.enableWrapMirrorRepeat()):s.enableWrapClamp(),t.scaleMode===l.SCALE_MODES.NEAREST?s.enableNearestScaling():s.enableLinearScaling()}return s},o.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var r=this.renderer.CONTEXT_UID,i=t._glTextures,n=t._glRenderTargets;if(i[r]&&(this.renderer.unbindTexture(t),i[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete i[r],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&(0,s.removeItems)(this._managedTextures,o,1)}n&&n[r]&&(n[r].destroy(),delete n[r])}},o.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},o.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},o);function o(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}r.default=n},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("../SystemRenderer")),s=i(t("./managers/MaskManager")),a=i(t("./managers/StencilManager")),u=i(t("./managers/FilterManager")),l=i(t("./utils/RenderTarget")),h=i(t("./utils/ObjectRenderer")),c=i(t("./TextureManager")),d=i(t("../../textures/BaseTexture")),f=i(t("./TextureGarbageCollector")),p=i(t("./WebGLState")),_=i(t("./utils/mapWebGLDrawModesToPixi")),g=i(t("./utils/validateContext")),v=t("../../utils"),y=i(t("pixi-gl-core")),m=t("../../const"),b=0,x=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(T,n=o.default),T.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new c.default(this),this.filterManager=new u.default(this),this.textureGC=new f.default(this),this.state.resetToDefault(),this.rootRenderTarget=new l.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new y.default.GLTexture.fromData(t,null,1,1),i={_glTextures:{}};i._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var o=new d.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[n]=i,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},T.prototype.render=function(t,e,r,i,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,i),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},T.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},T.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},T.prototype.resize=function(t,e){o.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},T.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},T.prototype.clear=function(t){this._activeRenderTarget.clear(t)},T.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},T.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},T.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var i=t.baseTexture;i._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(i,0),this.unbindTexture(i),(r=i._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},T.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&((this._activeRenderTarget=t).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},T.prototype.bindShader=function(t,e){return this._activeShader!==t&&((this._activeShader=t).bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},T.prototype.bindTexture=function(t,e,r){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,r)e=e||0;else{for(var i=0;i<this.boundTextures.length;i++)if(this.boundTextures[i]===t)return i;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},T.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},T.prototype.createVao=function(){return new y.default.VertexArrayObject(this.gl,this.state.attribState)},T.prototype.bindVao=function(t){return this._activeVao===t||(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t),this},T.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeVao=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},T.prototype.handleContextLost=function(t){t.preventDefault()},T.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},T.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),n.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},T);function T(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,T);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"WebGL",t,e,r));return i.legacy=i.options.legacy,i.legacy&&(y.default.VertexArrayObject.FORCE_NATIVE=!0),i.type=m.RENDERER_TYPE.WEBGL,i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),i.view.addEventListener("webglcontextlost",i.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:i.options.preserveDrawingBuffer,powerPreference:i.options.powerPreference},i._backgroundColorRgba[3]=i.transparent?0:1,i.maskManager=new s.default(i),i.stencilManager=new a.default(i),i.emptyRenderer=new h.default(i),i.currentRenderer=i.emptyRenderer,i.textureManager=null,i.filterManager=null,i.initPlugins(),i.options.context&&(0,g.default)(i.options.context),i.gl=i.options.context||y.default.createContext(i.view,i._contextOptions),i.CONTEXT_UID=b++,i.state=new p.default(i.gl),i.renderingToScreen=!0,i.boundTextures=null,i._activeShader=null,i._activeVao=null,i._activeRenderTarget=null,i._initContext(),i.drawModes=(0,_.default)(i.gl),i._nextTextureLocation=0,i.setBlendMode(0),i}r.default=x,v.pluginTarget.mixin(x)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("./utils/mapWebGLBlendModesToPixi"),n=i&&i.__esModule?i:{default:i},o=(s.prototype.push=function(){var t=this.stack[this.stackIndex];t=t||(this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},s.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},s.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},s.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},s.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},s.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},s.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},s.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},s.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},s.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},s);function s(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,n.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}r.default=o},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=function(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t},o=i(t("./extractUniformsFromSrc")),s=t("../../../utils"),a=t("../../../const"),u=i(t("../../../settings")),l={},h=(c.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},n(c,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),c);function c(t,e,r){for(var i in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.vertexSrc=t||c.defaultVertexSrc,this.fragmentSrc=e||c.defaultFragmentSrc,this._blendMode=a.BLEND_MODES.NORMAL,this.uniformData=r||(0,o.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,s.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=u.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=h},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(t,e,r){"use strict";function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},i=void 0,n=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<n.length;o++){var s=n[o].trim();if(-1<s.indexOf("uniform")){var a=s.split(" "),u=a[1],l=a[2],h=1;-1<l.indexOf("[")&&(l=(i=l.split(/\[|]/))[0],h*=Number(i[1])),l.match(e)||(r[l]={value:c(u,h),name:l,type:u})}}return r}r.__esModule=!0,r.default=function(t,e,r){var i=o(t),n=o(e);return Object.assign(i,n)};var i=t("pixi-gl-core"),c=(i&&i.__esModule?i:{default:i}).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(t,e,r){"use strict";r.__esModule=!0,r.calculateScreenSpaceMatrix=function(t,e,r){var i=t.identity();return i.translate(e.x/r.width,e.y/r.height),i.scale(r.width,r.height),i},r.calculateNormalizedScreenSpaceMatrix=function(t,e,r){var i=t.identity();i.translate(e.x/r.width,e.y/r.height);var n=r.width/e.width,o=r.height/e.height;return i.scale(n,o),i},r.calculateSpriteMatrix=function(t,e,r,i){var n=i._texture.orig,o=t.set(r.width,0,0,r.height,e.x,e.y),s=i.worldTransform.copy(a.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/n.width,1/n.height),o.translate(i.anchor.x,i.anchor.y),o};var a=t("../../../math")},{"../../../math":70}],89:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("../Filter")),s=t("../../../../math"),a=i((t("path"),t("../../../../textures/TextureMatrix"))),u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=o.default),l.prototype.apply=function(t,e,r){var i=this.maskSprite,n=this.maskSprite.texture;n.valid&&(n.transform||(n.transform=new a.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,i).prepend(n.transform.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,t.applyFilter(this,e,r))},l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var e=new s.Matrix,r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,r.maskSprite=t,r.maskMatrix=e,r}r.default=u},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:23}],90:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}r.__esModule=!0;function d(){n(this,d),this.renderTarget=null,this.sourceFrame=new l.Rectangle,this.destinationFrame=new l.Rectangle,this.filters=[],this.target=null,this.resolution=1}var o,s=i(t("./WebGLManager")),a=i(t("../utils/RenderTarget")),u=i(t("../utils/Quad")),l=t("../../../math"),h=i(t("../../../Shader")),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../filters/filterTransforms")),f=i(t("bit-twiddle")),p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,o=s.default),_.prototype.pushFilter=function(t,e){var r=this.renderer,i=this.filterData;if(!i){i=this.renderer._activeRenderTarget.filterStack;var n=new d;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[n]},this.filterData=i}var o=i.stack[++i.index];o=o||(i.stack[i.index]=new d);var s=e[0].resolution,a=0|e[0].padding,u=t.filterArea||t.getBounds(!0),l=o.sourceFrame,h=o.destinationFrame;l.x=(u.x*s|0)/s,l.y=(u.y*s|0)/s,l.width=(u.width*s|0)/s,l.height=(u.height*s|0)/s,i.stack[0].renderTarget.transform||e[0].autoFit&&l.fit(i.stack[0].destinationFrame),l.pad(a),h.width=l.width,h.height=l.height;var c=this.getPotRenderTarget(r.gl,l.width,l.height,s);o.target=t,o.filters=e,o.resolution=s,(o.renderTarget=c).setFrame(h,l),r.bindRenderTarget(c),c.clear()},_.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var i=r.filters;if(1===i.length)i[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var n=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var s=0;for(s=0;s<i.length-1;++s){i[s].apply(this,n,o,!0,r);var a=n;n=o,o=a}i[s].apply(this,n,e.renderTarget,!1,r),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}0==--t.index&&(this.filterData=null)},_.prototype.applyFilter=function(t,e,r,i){var n=this.renderer,o=n.gl,s=t.glShaders[n.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new h.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[n.CONTEXT_UID]=new h.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(s)),n.bindVao(this.quad.vao),n.bindRenderTarget(r),i&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),r===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},_.prototype.syncUniforms=function(t,e){var r=e.uniformData,i=e.uniforms,n=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var u in r){var l=r[u].type;if("sampler2d"===l&&0!==i[u]){if(i[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(i[u].baseTexture,n);else{t.uniforms[u]=n;var h=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],h.activeTexture(h.TEXTURE0+n),i[u].texture.bind()}n++}else if("mat3"===l)void 0!==i[u].a?t.uniforms[u]=i[u].toArray(!0):t.uniforms[u]=i[u];else if("vec2"===l)if(void 0!==i[u].x){var c=t.uniforms[u]||new Float32Array(2);c[0]=i[u].x,c[1]=i[u].y,t.uniforms[u]=c}else t.uniforms[u]=i[u];else"float"===l&&t.uniforms.data[u].value===r[u]||(t.uniforms[u]=i[u])}},_.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return i.setFrame(r.destinationFrame,r.sourceFrame),i},_.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},_.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return c.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},_.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return c.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},_.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return c.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},_.prototype.destroy=function(){for(var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.renderer,r=this.managedFilters,i=0;i<r.length;i++)t||r[i].glShaders[e.CONTEXT_UID].destroy(),delete r[i].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},_.prototype.getPotRenderTarget=function(t,e,r,i){var n=(65535&(e=f.default.nextPow2(e*i)))<<16|65535&(r=f.default.nextPow2(r*i));this.pool[n]||(this.pool[n]=[]);var o=this.pool[n].pop();if(!o){var s=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new a.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=i,o.defaultFrame.width=o.size.width=e/i,o.defaultFrame.height=o.size.height=r/i,o},_.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},_.prototype.freePotRenderTarget=function(t){var e=(65535&t.size.width*t.resolution)<<16|65535&t.size.height*t.resolution;this.pool[e].push(t)},_);function _(t){n(this,_);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t));return e.gl=e.renderer.gl,e.quad=new u.default(e.gl,t.state.attribState),e.shaderCache={},e.pool={},e.filterData=null,e.managedFilters=[],e}r.default=p},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("./WebGLManager")),s=i(t("../filters/spriteMask/SpriteMaskFilter")),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,n=o.default),u.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,i=Math.atan2(r.b,r.a);(i=Math.round(i*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},u.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},u.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];(r=r||(this.alphaMaskPool[this.alphaMaskIndex]=[new s.default(e)]))[0].resolution=this.renderer.resolution,r[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),this.alphaMaskIndex++},u.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},u.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},u.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},u.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,i=e.getBounds();i.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(i.x*n,(r.root?r.size.height-i.y-i.height:i.y)*n,i.width*n,i.height*n),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},u.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},u);function u(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.scissor=!1,e.scissorData=null,e.scissorRenderTarget=null,e.enableScissor=!0,e.alphaMaskPool=[],e.alphaMaskIndex=0,e}r.default=a},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=t("./WebGLManager"),o=n&&n.__esModule?n:{default:n},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.default),a.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},a.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},a.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},a.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},a.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},a.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},a);function a(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return e.stencilMaskStack=null,e}r.default=s},{"./WebGLManager":93}],93:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}r.default=i},{}],94:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=t("../managers/WebGLManager"),o=n&&n.__esModule?n:{default:n},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.default),a.prototype.start=function(){},a.prototype.stop=function(){this.flush()},a.prototype.flush=function(){},a.prototype.render=function(t){},a);function a(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.apply(this,arguments))}r.default=s},{"../managers/WebGLManager":93}],95:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=i(t("pixi-gl-core")),o=i(t("../../../utils/createIndicesForQuads")),s=(a.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this},a.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},a);function a(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,o.default)(1),this.vertexBuffer=n.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new n.default.VertexArrayObject(t,e)}r.default=s},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":12}],96:[function(t,e,r){"use strict";r.__esModule=!0;var s=t("../../../math"),a=t("../../../const"),i=t("../../../settings"),u=i&&i.__esModule?i:{default:i},l=t("pixi-gl-core"),n=(h.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},h.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},h.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},h.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},h.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},h.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},h.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},h);function h(t,e,r,i,n,o){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,h),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new s.Rectangle(0,0,1,1),this.resolution=n||u.default.RESOLUTION,this.projectionMatrix=new s.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new s.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==i?i:u.default.SCALE_MODE,this.root=o,this.root?(this.frameBuffer=new l.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}r.default=n},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(t,e,r){"use strict";function s(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}r.__esModule=!0,r.default=function(t,e){var r=!e;if(r){var i=document.createElement("canvas");i.width=1,i.height=1,e=a.default.createContext(i)}for(var n=e.createShader(e.FRAGMENT_SHADER);;){var o=u.replace(/%forloop%/gi,s(t));if(e.shaderSource(n,o),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var i=t("pixi-gl-core"),a=i&&i.__esModule?i:{default:i},u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],98:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var i=t("../../../const")},{"../../../const":46}],99:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var i=t("../../../const")},{"../../../const":46}],100:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=i(t("./utils/maxRecommendedTextures")),o=i(t("./utils/canUploadSameBuffer"));r.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,o.default)()}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=function(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t},s=t("../math"),a=t("../utils"),u=t("../const"),l=i(t("../textures/Texture")),h=i(t("../display/Container")),c=new s.Point,d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n=h.default),f.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,a.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,a.sign)(this.scale.y)*this._height/this._texture.orig.height)},f.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},f.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,r=e.a,i=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,u=this.vertexData,l=t.trim,h=t.orig,c=this._anchor,d=0,f=0,p=0,_=0;p=l?(d=(f=l.x-c._x*h.width)+l.width,(_=l.y-c._y*h.height)+l.height):(d=(f=-c._x*h.width)+h.width,(_=-c._y*h.height)+h.height),u[0]=r*f+n*_+s,u[1]=o*_+i*f+a,u[2]=r*d+n*_+s,u[3]=o*_+i*d+a,u[4]=r*d+n*p+s,u[5]=o*p+i*d+a,u[6]=r*f+n*p+s,u[7]=o*p+i*f+a}},f.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,u=n.d,l=n.tx,h=n.ty,c=-i._x*r.width,d=c+r.width,f=-i._y*r.height,p=f+r.height;e[0]=o*c+a*f+l,e[1]=u*f+s*c+h,e[2]=o*d+a*f+l,e[3]=u*f+s*d+h,e[4]=o*d+a*p+l,e[5]=u*p+s*d+h,e[6]=o*c+a*p+l,e[7]=u*p+s*c+h},f.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},f.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},f.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},f.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},f.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return c.x>=i&&c.x<i+e&&(n=-r*this.anchor.y,c.y>=n&&c.y<n+r)},f.prototype.destroy=function(t){if(n.prototype.destroy.call(this,t),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var e="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!e)}this._texture=null,this.shader=null},f.from=function(t){return new f(l.default.from(t))},f.fromFrame=function(t){var e=a.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new f(e)},f.fromImage=function(t,e,r){return new f(l.default.fromImage(t,e,r))},o(f,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),f);function f(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return e._anchor=new s.ObservablePoint(e._onAnchorUpdate,e),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=u.BLEND_MODES.NORMAL,e.shader=null,e.cachedTint=16777215,e.texture=t||l.default.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.pluginName="sprite",e}function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=d},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=i(t("../../renderers/canvas/CanvasRenderer")),h=t("../../const"),c=t("../../math"),d=i(t("./CanvasTinter")),f=new c.Matrix,o=(s.prototype.render=function(t){var e=t._texture,r=this.renderer,i=e._frame.width,n=e._frame.height,o=t.transform.worldTransform,s=0,a=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var u=e.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==u&&(r.context[r.smoothProperty]=u),a=e.trim?(s=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(s=(.5-t.anchor.x)*e.orig.width,(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(f),o=f,c.GroupD8.matrixAppendRotationInv(o,e.rotate,s,a),a=s=0),s-=i/2,a-=n/2,r.roundPixels?(r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution|0,o.ty*r.resolution|0),s|=0,a|=0):r.context.setTransform(o.a,o.b,o.c,o.d,o.tx*r.resolution,o.ty*r.resolution);var l=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=d.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,i*l,n*l,s*r.resolution,a*r.resolution,i*r.resolution,n*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*l,e._frame.y*l,i*l,n*l,s*r.resolution,a*r.resolution,i*r.resolution,n*r.resolution)}},s.prototype.destroy=function(){this.renderer=null},s);function s(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.renderer=t}r.default=o,n.default.registerPlugin("sprite",o)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(t,e,r){"use strict";r.__esModule=!0;var f=t("../../utils"),i=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),a={getTintedTexture:function(t,e){var r=t._texture,i="#"+("00000"+(0|(e=a.roundColor(e))).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var n=r.tintCache[i],o=void 0;if(n){if(n.tintId===r._updateID)return r.tintCache[i];o=r.tintCache[i]}else o=a.canvas||document.createElement("canvas");if(a.tintMethod(r,e,o),o.tintId=r._updateID,a.convertTintToImage){var s=new Image;s.src=o.toDataURL(),r.tintCache[i]=s}else r.tintCache[i]=o,a.canvas=null;return o},tintWithMultiply:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore()},tintWithOverlay:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore()},tintWithPerPixel:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore();for(var s=(0,f.hex2rgb)(e),a=s[0],u=s[1],l=s[2],h=i.getImageData(0,0,n.width,n.height),c=h.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=u,c[d+2]*=l;i.putImageData(h,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,r=(0,f.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,f.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,(i&&i.__esModule?i:{default:i}).default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,r.default=a},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}r.default=i},{}],106:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("../../renderers/webgl/utils/ObjectRenderer")),s=i(t("../../renderers/webgl/WebGLRenderer")),a=i(t("../../utils/createIndicesForQuads")),u=i(t("./generateMultiTextureShader")),l=i(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),h=i(t("./BatchBuffer")),B=i(t("../../settings")),N=t("../../utils"),j=i(t("pixi-gl-core")),X=i(t("bit-twiddle")),U=0,G=0,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,n=o.default),d.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),B.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,l.default)(this.MAX_TEXTURES,t)),this.shader=(0,u.default)(t,this.MAX_TEXTURES),this.indexBuffer=j.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=j.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(i,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(i,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},d.prototype.onPrerender=function(){this.vertexCount=0},d.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},d.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=X.default.nextPow2(this.currentIndex),i=X.default.log2(r),n=this.buffers[i],o=this.sprites,s=this.groups,a=n.float32View,u=n.uint32View,l=this.boundTextures,h=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,_=1,g=0,v=s[0],y=void 0,m=void 0,b=N.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];v.textureCount=0,v.start=0,v.blend=b,U++;var x=void 0;for(x=0;x<e;++x){var T=h[x];T._enabled!==U?((l[x]=T)._virtalBoundId=x,T._enabled=U):l[x]=this.renderer.emptyTextures[x]}for(U++,x=0;x<this.currentIndex;++x){var w=o[x];f=w._texture.baseTexture;var S=N.premultiplyBlendMode[Number(f.premultipliedAlpha)][w.blendMode];if(b!==S&&(b=S,p=null,g=e,U++),p!==f&&(p=f)._enabled!==U){if(g===e&&(U++,v.size=x-v.start,g=0,(v=s[_++]).blend=b,v.textureCount=0,v.start=x),f.touched=c,-1===f._virtalBoundId)for(var E=0;E<e;++E){var C=(E+G)%e,P=l[C];if(P._enabled!==U){G++,P._virtalBoundId=-1,l[f._virtalBoundId=C]=f;break}}f._enabled=U,v.textureCount++,v.ids[g]=f._virtalBoundId,v.textures[g++]=f}if(y=w.vertexData,m=w._texture._uvs.uvsUint32,this.renderer.roundPixels){var O=this.renderer.resolution;a[d]=(y[0]*O|0)/O,a[d+1]=(y[1]*O|0)/O,a[d+5]=(y[2]*O|0)/O,a[d+6]=(y[3]*O|0)/O,a[d+10]=(y[4]*O|0)/O,a[d+11]=(y[5]*O|0)/O,a[d+15]=(y[6]*O|0)/O,a[d+16]=(y[7]*O|0)/O}else a[d]=y[0],a[d+1]=y[1],a[d+5]=y[2],a[d+6]=y[3],a[d+10]=y[4],a[d+11]=y[5],a[d+15]=y[6],a[d+16]=y[7];u[d+2]=m[0],u[d+7]=m[1],u[d+12]=m[2],u[d+17]=m[3];var I=Math.min(w.worldAlpha,1),M=I<1&&f.premultipliedAlpha?(0,N.premultiplyTint)(w._tintRGB,I):w._tintRGB+(255*I<<24);u[d+3]=u[d+8]=u[d+13]=u[d+18]=M,a[d+4]=a[d+9]=a[d+14]=a[d+19]=f._virtalBoundId,d+=20}if(v.size=x-v.start,B.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var A=this.shader.attributes,R=this.vertexBuffers[this.vertexCount]=j.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),D=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(R,A.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(R,A.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(R,A.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);A.aTextureId&&D.addAttribute(R,A.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=D}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(x=0;x<e;++x)h[x]._virtalBoundId=-1;for(x=0;x<_;++x){for(var k=s[x],L=k.textureCount,F=0;F<L;F++)p=k.textures[F],h[k.ids[F]]!==p&&this.renderer.bindTexture(p,k.ids[F],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(k.blend),t.drawElements(t.TRIANGLES,6*k.size,t.UNSIGNED_SHORT,6*k.start*2)}this.currentIndex=0}},d.prototype.start=function(){this.renderer.bindShader(this.shader),B.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},d.prototype.stop=function(){this.flush()},d.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),n.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var e=0;e<this.buffers.length;++e)this.buffers[e].destroy()},d);function d(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));e.vertSize=5,e.vertByteSize=4*e.vertSize,e.size=B.default.SPRITE_BATCH_SIZE,e.buffers=[];for(var r=1;r<=X.default.nextPow2(e.size);r*=2)e.buffers.push(new h.default(4*r*e.vertByteSize));e.indices=(0,a.default)(e.size),e.shader=null,e.currentIndex=0,e.groups=[];for(var i=0;i<e.size;i++)e.groups[i]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return e.sprites=[],e.vertexBuffers=[],e.vaos=[],e.vaoMax=2,e.vertexCount=0,e.renderer.on("prerender",e.onPrerender,e),e}r.default=c,s.default.registerPlugin("sprite",c)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=a;r=(r=r.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var i=new s.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),n=[],o=0;o<e;o++)n[o]=o;return i.bind(),i.uniforms.uSamplers=n,i};var i=t("../../Shader"),s=i&&i.__esModule?i:{default:i},a=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:23}],108:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o,n=function(t,e,r){return e&&y(t.prototype,e),r&&y(t,r),t},s=i(t("../sprites/Sprite")),a=i(t("../textures/Texture")),u=t("../math"),l=t("../utils"),_=t("../const"),h=i(t("../settings")),c=i(t("./TextStyle")),v=i(t("./TextMetrics")),d=i(t("../utils/trimCanvas")),f={texture:!0,children:!1,baseTexture:!0},p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,o=s.default),g.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,i=v.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=i.width,o=i.height,s=i.lines,a=i.lineHeight,u=i.lineWidths,l=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil((n+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((o+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var c=void 0,d=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,0<e.dropShadowBlur&&(r.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,_=0;_<s.length;_++)c=e.strokeThickness/2,d=e.strokeThickness/2+_*a+h.ascent,"right"===e.align?c+=l-u[_]:"center"===e.align&&(c+=(l-u[_])/2),e.fill&&(this.drawLetterSpacing(s[_],c+f+e.padding,d+p+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[_],c+f+e.padding,d+p+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,s);for(var g=0;g<s.length;g++)c=e.strokeThickness/2,d=e.strokeThickness/2+g*a+h.ascent,"right"===e.align?c+=l-u[g]:"center"===e.align&&(c+=(l-u[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding,!0),e.fill&&this.drawLetterSpacing(s[g],c+e.padding,d+e.padding);this.updateTexture()}},g.prototype.drawLetterSpacing=function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],n=this._style.letterSpacing;if(0!==n)for(var o=String.prototype.split.call(t,""),s=e,a=0,u="";a<t.length;)u=o[a++],i?this.context.strokeText(u,s,r):this.context.fillText(u,s,r),s+=this.context.measureText(u).width+n;else i?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},g.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var r=this._texture,i=this._style,n=i.trim?0:i.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},g.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),o.prototype.renderWebGL.call(this,t)},g.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),o.prototype._renderCanvas.call(this,t)},g.prototype.getLocalBounds=function(t){return this.updateText(!0),o.prototype.getLocalBounds.call(this,t)},g.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},g.prototype._onStyleChange=function(){this.dirty=!0},g.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,i=void 0,n=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var h=u.length+1,c=1;c<h;++c)l.push(c/h);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===_.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),i=(u.length+1)*e.length;for(var d=n=0;d<e.length;d++){n+=1;for(var f=0;f<u.length;f++)o="number"==typeof l[f]?l[f]/e.length+d/e.length:n/i,r.addColorStop(o,u[f]),n++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),i=u.length+1,n=1;for(var p=0;p<u.length;p++)o="number"==typeof l[p]?l[p]:n/i,r.addColorStop(o,u[p]),n++}return r},g.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},f,t),o.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},n(g,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,l.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,l.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof c.default?this._style=t:this._style=new c.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),g);function g(t,e,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,g),(r=r||document.createElement("canvas")).width=3,r.height=3;var i=a.default.fromCanvas(r,h.default.SCALE_MODE,"text");i.orig=new u.Rectangle,i.trim=new u.Rectangle;var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,i));return a.default.addToCache(n._texture,n._texture.baseTexture.textureCacheIds[0]),n.canvas=r,n.context=n.canvas.getContext("2d"),n.resolution=h.default.RESOLUTION,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=t,n.style=e,n.localStyleID=-1,n}function y(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=p},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(t,e,r){"use strict";r.__esModule=!0;var i=(y.measureText=function(t,e,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:y._canvas;r=r||e.wordWrap;var n=e.toFontString(),o=y.measureFont(n),s=i.getContext("2d");s.font=n;for(var a=(r?y.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(a.length),l=0,h=0;h<a.length;h++){var c=s.measureText(a[h]).width+(a[h].length-1)*e.letterSpacing;u[h]=c,l=Math.max(l,c)}var d=l+e.strokeThickness;e.dropShadow&&(d+=e.dropShadowDistance);var f=e.lineHeight||o.fontSize+e.strokeThickness,p=Math.max(f,o.fontSize+e.strokeThickness)+(a.length-1)*(f+e.leading);return e.dropShadow&&(p+=e.dropShadowDistance),new y(t,e,d,p,a,u,f+e.leading,l,o)},y.wordWrap=function(t,e){for(var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:y._canvas).getContext("2d"),i="",n=t.charAt(0),o=t.split("\n"),s=e.wordWrapWidth,a={},u=0;u<o.length;u++){for(var l=s,h=o[u].split(" "),c=0;c<h.length;c++){var d=r.measureText(h[c]).width;if(e.breakWords&&s<d)for(var f=h[c].split(""),p=0;p<f.length;p++){var _=f[p],g=a[_];void 0===g&&(g=r.measureText(_).width,a[_]=g),l<g?(i+="\n"+_,l=s-g):(0===p&&(0<c||" "===n)&&(i+=" "),i+=_,l-=g)}else{var v=d+r.measureText(" ").width;0===c||l<v?(0<c&&(i+="\n"),i+=h[c],l=s-d):(l-=v,i+=" "+h[c])}}u<o.length-1&&(i+="\n")}return i},y.measureFont=function(t){if(y._fonts[t])return y._fonts[t];var e={},r=y._canvas,i=y._context;i.font=t;var n=Math.ceil(i.measureText("|Mq").width),o=Math.ceil(i.measureText("M").width),s=2*o;o=1.4*o|0,r.width=n,r.height=s,i.fillStyle="#f00",i.fillRect(0,0,n,s),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText("|Mq",0,o);var a=i.getImageData(0,0,n,s).data,u=a.length,l=4*n,h=0,c=0,d=!1;for(h=0;h<o;++h){for(var f=0;f<l;f+=4)if(255!==a[c+f]){d=!0;break}if(d)break;c+=l}for(e.ascent=o-h,c=u-l,d=!1,h=s;o<h;--h){for(var p=0;p<l;p+=4)if(255!==a[c+p]){d=!0;break}if(d)break;c-=l}return e.descent=h-o,e.fontSize=e.ascent+e.descent,y._fonts[t]=e},y);function y(t,e,r,i,n,o,s,a,u){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,y),this.text=t,this.style=e,this.width=r,this.height=i,this.lines=n,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=u}r.default=i;var n=document.createElement("canvas");n.width=n.height=10,i._canvas=n,i._context=n.getContext("2d"),i._fonts={}},{}],110:[function(t,e,r){"use strict";function i(t){return"number"==typeof t?(0,u.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function n(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function o(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}r.__esModule=!0;var s=function(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t},a=t("../const"),u=t("../utils"),l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:a.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},h=(c.prototype.clone=function(){var t={};return o(t,this,l),new c(t)},c.prototype.reset=function(){o(this,l,l)},c.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;0<=r;r--){var i=e[r].trim();/([\"\'])[^\'\"]+\1/.test(i)||(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},s(c,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=n(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=n(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){!function(t,e){if(Array.isArray(t)&&Array.isArray(e)&&t.length===e.length){for(var r=0;r<t.length;++r)if(t[r]!==e[r])return;return 1}}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=n(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),c);function c(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,c),this.styleID=0,this.reset(),o(this,t,t)}function d(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=h},{"../const":46,"../utils":125}],111:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o,n=i(t("./BaseTexture")),s=i(t("../settings")),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o=n.default),u.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=0<t&&0<e,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},u.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],i=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,null,r));return n.resolution=i||s.default.RESOLUTION,n.width=Math.ceil(t),n.height=Math.ceil(e),n.realWidth=n.width*n.resolution,n.realHeight=n.height*n.resolution,n.scaleMode=void 0!==r?r:s.default.SCALE_MODE,n.hasLoaded=!0,n._glRenderTargets={},n._canvasRenderTarget=null,n.valid=!1,n}r.default=a},{"../settings":101,"./BaseTexture":112}],112:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,s=t("../utils"),o=i(t("../settings")),a=i(t("eventemitter3")),u=i(t("../utils/determineCrossOrigin")),l=i(t("bit-twiddle")),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,n=a.default),c.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},c.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=l.default.isPow2(this.realWidth)&&l.default.isPow2(this.realHeight)},c.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(((this.source=t).src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var i=this;if(t.onload=function(){if(i._updateImageType(),t.onload=null,t.onerror=null,i.isLoading){if(i.isLoading=!1,i._sourceLoaded(),"svg"===i.imageType)return void i._loadSvgSource();i.emit("loaded",i)}},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===i.imageType)return void i._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},c.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,s.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(!(e=(0,s.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(e=(0,s.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},c.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,s.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},c.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},c.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},c.prototype._loadSvgSourceUsingString=function(t){var e=(0,s.getSvgSize)(t),r=e.width,i=e.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var n=document.createElement("canvas");n.width=this.realWidth,n.height=this.realHeight,n._pixiId="canvas_"+(0,s.uid)(),n.getContext("2d").drawImage(this.source,0,0,r,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=n,c.addToCache(this,n._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},c.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},c.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),c.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},c.prototype.dispose=function(){this.emit("dispose",this)},c.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},c.fromImage=function(t,e,r,i){var n=s.BaseTextureCache[t];if(!n){var o=new Image;void 0===e&&0!==t.indexOf("data:")?o.crossOrigin=(0,u.default)(t):e&&(o.crossOrigin="string"==typeof e?e:"anonymous"),(n=new c(o,r)).imageUrl=t,i&&(n.sourceScale=i),n.resolution=(0,s.getResolutionOfUrl)(t),o.src=t,c.addToCache(n,t)}return n},c.fromCanvas=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+(0,s.uid)());var i=s.BaseTextureCache[t._pixiId];return i||(i=new c(t,e),c.addToCache(i,t._pixiId)),i},c.from=function(t,e,r){if("string"==typeof t)return c.fromImage(t,void 0,e,r);if(t instanceof HTMLImageElement){var i=t.src,n=s.BaseTextureCache[i];return n||((n=new c(t,e)).imageUrl=i,r&&(n.sourceScale=r),n.resolution=(0,s.getResolutionOfUrl)(i),c.addToCache(n,i)),n}return t instanceof HTMLCanvasElement?c.fromCanvas(t,e):t},c.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]=t)},c.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)delete s.BaseTextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},c);function c(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return i.uid=(0,s.uid)(),i.touched=0,i.resolution=r||o.default.RESOLUTION,i.width=100,i.height=100,i.realWidth=100,i.realHeight=100,i.scaleMode=void 0!==e?e:o.default.SCALE_MODE,i.hasLoaded=!1,i.isLoading=!1,i.source=null,i.origSource=null,i.imageType=null,i.sourceScale=1,i.premultipliedAlpha=!0,i.imageUrl=null,i.isPowerOfTwo=!1,i.mipmap=o.default.MIPMAP_TEXTURES,i.wrapMode=o.default.WRAP_MODE,i._glTextures={},i._enabled=0,i._virtalBoundId=-1,i._destroyed=!1,i.textureCacheIds=[],t&&i.loadSource(t),i}r.default=h},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var u,l=i(t("./BaseRenderTexture")),n=i(t("./Texture")),o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,u=n.default),h.prototype.resize=function(t,e,r){t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},h.create=function(t,e,r,i){return new h(new l.default(t,e,r,i))},h);function h(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var r=null;if(!(t instanceof l.default)){var i=arguments[1],n=arguments[2],o=arguments[3],s=arguments[4];console.warn("Please use RenderTexture.create("+i+", "+n+") instead of the ctor directly."),r=arguments[0],e=null,t=new l.default(i,n,o,s)}var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,t,e));return a.legacyRenderer=r,a.valid=!0,a._updateUvs(),a}r.default=o},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t},l=t("../"),n=t("../utils"),o=(i(h,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),h.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,n.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},h.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=h.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},h.prototype._processFrames=function(t){for(var e=t,r=h.BATCH_SIZE,i=this.baseTexture.sourceScale;e-t<r&&e<this._frameKeys.length;){var n=this._frameKeys[e],o=this._frames[n].frame;if(o){var s,a=null,u=new l.Rectangle(0,0,Math.floor(this._frames[n].sourceSize.w*i)/this.resolution,Math.floor(this._frames[n].sourceSize.h*i)/this.resolution);s=this._frames[n].rotated?new l.Rectangle(Math.floor(o.x*i)/this.resolution,Math.floor(o.y*i)/this.resolution,Math.floor(o.h*i)/this.resolution,Math.floor(o.w*i)/this.resolution):new l.Rectangle(Math.floor(o.x*i)/this.resolution,Math.floor(o.y*i)/this.resolution,Math.floor(o.w*i)/this.resolution,Math.floor(o.h*i)/this.resolution),this._frames[n].trimmed&&(a=new l.Rectangle(Math.floor(this._frames[n].spriteSourceSize.x*i)/this.resolution,Math.floor(this._frames[n].spriteSourceSize.y*i)/this.resolution,Math.floor(o.w*i)/this.resolution,Math.floor(o.h*i)/this.resolution)),this.textures[n]=new l.Texture(this.baseTexture,s,u,a,this._frames[n].rotated?2:0),l.Texture.addToCache(this.textures[n],n)}e++}},h.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},h.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*h.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*h.BATCH_SIZE<t._frameKeys.length?t._nextBatch():t._parseComplete()},0)},h.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},h);function h(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,h),this.baseTexture=t,this.textures={},this.data=e,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=o},{"../":65,"../utils":125}],115:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}r.__esModule=!0;var s,o=function(t,e,r){return e&&g(t.prototype,e),r&&g(t,r),t},a=i(t("./BaseTexture")),u=i(t("./VideoBaseTexture")),l=i(t("./TextureUvs")),h=i(t("eventemitter3")),c=t("../math"),d=t("../utils"),f=i(t("../settings")),p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,s=h.default),_.prototype.update=function(){this.baseTexture.update()},_.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new c.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},_.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},_.prototype.destroy=function(t){this.baseTexture&&(t&&(d.TextureCache[this.baseTexture.imageUrl]&&_.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,_.removeFromCache(this),this.textureCacheIds=null},_.prototype.clone=function(){return new _(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},_.prototype._updateUvs=function(){this._uvs||(this._uvs=new l.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},_.fromImage=function(t,e,r,i){var n=d.TextureCache[t];return n||(n=new _(a.default.fromImage(t,e,r,i)),_.addToCache(n,t)),n},_.fromFrame=function(t){var e=d.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},_.fromCanvas=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new _(a.default.fromCanvas(t,e,r))},_.fromVideo=function(t,e){return"string"==typeof t?_.fromVideoUrl(t,e):new _(u.default.fromVideo(t,e))},_.fromVideoUrl=function(t,e){return new _(u.default.fromUrl(t,e))},_.from=function(t){if("string"!=typeof t)return t instanceof HTMLImageElement?new _(a.default.from(t)):t instanceof HTMLCanvasElement?_.fromCanvas(t,f.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?_.fromVideo(t):t instanceof a.default?new _(t):t;var e=d.TextureCache[t];return e||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?_.fromVideoUrl(t):_.fromImage(t))},_.fromLoader=function(t,e,r){var i=new a.default(t,void 0,(0,d.getResolutionOfUrl)(e)),n=new _(i);return i.imageUrl=e,r=r||e,a.default.addToCache(n.baseTexture,r),_.addToCache(n,r),r!==e&&(a.default.addToCache(n.baseTexture,e),_.addToCache(n,e)),n},_.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),d.TextureCache[e]=t)},_.removeFromCache=function(t){if("string"==typeof t){var e=d.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete d.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)d.TextureCache[t.textureCacheIds[i]]===t&&delete d.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},o(_,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",u="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,l="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+a+" "+l)}this.valid=i&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),_);function _(t,e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));if(o.noFrame=!1,e||(o.noFrame=!0,e=new c.Rectangle(0,0,1,1)),t instanceof _&&(t=t.baseTexture),o.baseTexture=t,o._frame=e,o.trim=i,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=r||e,o._rotate=Number(n||0),!0===n)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(o.noFrame&&(e=new c.Rectangle(0,0,t.width,t.height),t.on("update",o.onBaseTextureUpdated,o)),o.frame=e):t.once("loaded",o.onBaseTextureLoaded,o),o._updateID=0,o.transform=null,o.textureCacheIds=[],o}function g(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=p).EMPTY=new p(new a.default),n(p.EMPTY),n(p.EMPTY.baseTexture),p.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new p(new a.default(t))}(),n(p.WHITE),n(p.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},n=t("../math/Matrix"),o=n&&n.__esModule?n:{default:n},l=new o.default,s=(a.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},a.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(l.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(l));var o=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,u=this.clampOffset;return s[0]=(e._frame.x+a+u)/o.width,s[1]=(e._frame.y+a+u)/o.height,s[2]=(e._frame.x+e._frame.width-a+u)/o.width,s[3]=(e._frame.y+e._frame.height-a+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},i(a,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),a);function a(t,e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this._texture=t,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../math/Matrix":67}],117:[function(t,e,r){"use strict";r.__esModule=!0;var i=t("../math/GroupD8"),l=i&&i.__esModule?i:{default:i},n=(o.prototype.set=function(t,e,r){var i=e.width,n=e.height;if(r){var o=t.width/2/i,s=t.height/2/n,a=t.x/i+o,u=t.y/n+s;r=l.default.add(r,l.default.NW),this.x0=a+o*l.default.uX(r),this.y0=u+s*l.default.uY(r),r=l.default.add(r,2),this.x1=a+o*l.default.uX(r),this.y1=u+s*l.default.uY(r),r=l.default.add(r,2),this.x2=a+o*l.default.uX(r),this.y2=u+s*l.default.uY(r),r=l.default.add(r,2),this.x3=a+o*l.default.uX(r),this.y3=u+s*l.default.uY(r)}else this.x0=t.x/i,this.y0=t.y/n,this.x1=(t.x+t.width)/i,this.y1=t.y/n,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/n,this.x3=t.x/i,this.y3=(t.y+t.height)/n;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},o);function o(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}r.default=n},{"../math/GroupD8":66}],118:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){e=e||"video/"+t.substr(t.lastIndexOf(".")+1);var r=document.createElement("source");return r.src=t,r.type=e,r}r.__esModule=!0;var n,o=function(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),t},a=i(t("./BaseTexture")),u=t("../utils"),l=t("../ticker"),h=t("../const"),c=i(t("../utils/determineCrossOrigin")),d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,n=a.default),f.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},f.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},f.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(l.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},f.prototype._onPlayStop=function(){this._isAutoUpdating&&(l.shared.remove(this.update,this),this._isAutoUpdating=!1)},f.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},f.prototype.destroy=function(){this._isAutoUpdating&&l.shared.remove(this.update,this),this.source&&this.source._pixiId&&(a.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),n.prototype.destroy.call(this)},f.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+(0,u.uid)());var r=u.BaseTextureCache[t._pixiId];return r||(r=new f(t,e),a.default.addToCache(r,t._pixiId)),r},f.fromUrl=function(t,e,r){var i=document.createElement("video");i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var n=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==n.indexOf("data:")?i.crossOrigin=(0,c.default)(n):r&&(i.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var o=0;o<t.length;++o)i.appendChild(s(t[o].src||t[o],t[o].mime));else i.appendChild(s(n,t.mime));return i.load(),f.fromVideo(i,e)},o(f,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(l.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(l.shared.add(this.update,this,h.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),f);function f(t,e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));return r.width=t.videoWidth,r.height=t.videoHeight,r._autoUpdate=!0,r._isAutoUpdating=!1,r.autoPlay=!0,r.update=r.update.bind(r),r._onCanPlay=r._onCanPlay.bind(r),t.addEventListener("play",r._onPlayStart.bind(r)),t.addEventListener("pause",r._onPlayStop.bind(r)),r.hasLoaded=!1,r.__loaded=!1,r._isSourceReady()?r._onCanPlay():(t.addEventListener("canplay",r._onCanPlay),t.addEventListener("canplaythrough",r._onCanPlay)),r}function p(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=d).fromUrls=d.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=function(t,e,r){return e&&h(t.prototype,e),r&&h(t,r),t},o=i(t("../settings")),s=t("../const"),a=i(t("./TickerListener")),u=(l.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},l.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},l.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},l.prototype.add=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,r))},l.prototype.addOnce=function(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,r,!0))},l.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},l.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},l.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},l.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},l.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},l.prototype.update=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*o.default.TARGET_FPMS*this.speed;for(var r=this._head,i=r.next;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},n(l,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,o.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),l);function l(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/o.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}function h(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=u},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},n.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},n.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},n.prototype.destroy=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},n);function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.fn=t,this.context=e,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}r.default=i},{}],121:[function(t,e,r){"use strict";r.__esModule=!0,r.Ticker=r.shared=void 0;var i=t("./Ticker"),n=i&&i.__esModule?i:{default:i},o=new n.default;o.autoStart=!0,o.destroy=function(){},r.shared=o,r.Ticker=n.default},{"./Ticker":119}],122:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=6*t,r=new Uint16Array(e),i=0,n=0;i<e;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}},{}],124:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,(o=o||document.createElement("a")).href=t;var r=!(t=n.default.parse(o.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"};var i=t("url"),n=i&&i.__esModule?i:{default:i},o=void 0},{url:29}],125:[function(t,e,r){"use strict";function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function n(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.premultiplyBlendMode=r.BaseTextureCache=r.TextureCache=r.mixins=r.pluginTarget=r.EventEmitter=r.removeItems=r.isMobile=void 0,r.uid=function(){return++f},r.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},r.hex2string=function(t){return t=t.toString(16),"#"+("000000".substr(0,6-t.length)+t)},r.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},r.getResolutionOfUrl=function(t,e){var r=s.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1},r.decomposeDataUri=function(t){var e=o.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}},r.getUrlFileExtension=function(t){var e=o.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},r.getSvgSize=function(t){var e=o.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r},r.skipHello=function(){p=!0},r.sayHello=function(t){if(!p){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var e=["\n %c %c %c PixiJS "+o.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+o.VERSION+" - "+t+" - http://www.pixijs.com/");p=!0}},r.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(t){return!1}},r.sign=function(t){return 0===t?0:t<0?-1:1},r.destroyTextureCache=function(){var t=void 0;for(t in _)_[t].destroy();for(t in g)g[t].destroy()},r.clearTextureCache=function(){var t=void 0;for(t in _)delete _[t];for(t in g)delete g[t]},r.correctBlendMode=function(t,e){return v[e?1:0][t]},r.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n=n*e+.5|0)},r.premultiplyRgba=function(t,e,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r},r.premultiplyTintToRgba=function(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,!i&&void 0!==i||(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r};var o=t("../const"),s=n(t("../settings")),a=n(t("eventemitter3")),u=n(t("./pluginTarget")),l=i(t("./mixin")),h=i(t("ismobilejs")),c=n(t("remove-array-items")),d=n(t("./mapPremultipliedBlendModes")),f=0,p=!1;r.isMobile=h,r.removeItems=c.default,r.EventEmitter=a.default,r.pluginTarget=u.default,r.mixins=l;var _=r.TextureCache=Object.create(null),g=r.BaseTextureCache=Object.create(null),v=r.premultiplyBlendMode=(0,d.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){for(var t=[],e=[],r=0;r<32;r++)e[t[r]=r]=r;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var i=[];return i.push(e),i.push(t),i};var n=t("../const")},{"../const":46}],127:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){return n.default.tablet||n.default.phone?4:t};var i=t("ismobilejs"),n=i&&i.__esModule?i:{default:i}},{ismobilejs:4}],128:[function(t,e,r){"use strict";function i(t,e){if(t&&e)for(var r=Object.keys(e),i=0;i<r.length;++i){var n=r[i];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}r.__esModule=!0,r.mixin=i,r.delayMixin=function(t,e){n.push(t,e)},r.performMixins=function(){for(var t=0;t<n.length;t+=2)i(n[t],n[t+1]);n.length=0};var n=[]},{}],129:[function(t,e,r){"use strict";r.__esModule=!0,r.default={mixin:function(t){var r;(r=t).__plugins={},r.registerPlugin=function(t,e){r.__plugins[t]=e},r.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},r.__plugins)this.plugins[t]=new r.__plugins[t](this)},r.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}}},{}],130:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){var e=t.width,r=t.height,i=t.getContext("2d"),n=i.getImageData(0,0,e,r).data,o=n.length,s={top:null,left:null,right:null,bottom:null},a=void 0,u=void 0,l=void 0;for(a=0;a<o;a+=4)0!==n[a+3]&&(u=a/4%e,l=~~(a/4/e),null===s.top&&(s.top=l),(null===s.left||u<s.left)&&(s.left=u),(null===s.right||s.right<u)&&(s.right=u+1),(null===s.bottom||s.bottom<l)&&(s.bottom=l));return e=s.right-s.left,{height:r=s.bottom-s.top+1,width:e,data:i.getImageData(s.left,s.top,e,r)}}},{}],131:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(r){var t=r.mesh,e=r.particles,i=r.extras,n=r.filters,o=r.prepare,s=r.loaders,a=r.interaction;Object.defineProperties(r,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r.Container}},DisplayObjectContainer:{get:function(){return r.Container}},Strip:{get:function(){return t.Mesh}},Rope:{get:function(){return t.Rope}},ParticleContainer:{get:function(){return e.ParticleContainer}},MovieClip:{get:function(){return i.AnimatedSprite}},TilingSprite:{get:function(){return i.TilingSprite}},BitmapText:{get:function(){return i.BitmapText}},blendModes:{get:function(){return r.BLEND_MODES}},scaleModes:{get:function(){return r.SCALE_MODES}},BaseTextureCache:{get:function(){return r.utils.BaseTextureCache}},TextureCache:{get:function(){return r.utils.TextureCache}},math:{get:function(){return r}},AbstractFilter:{get:function(){return r.Filter}},TransformManual:{get:function(){return r.TransformBase}},TARGET_FPMS:{get:function(){return r.settings.TARGET_FPMS},set:function(t){r.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return r.settings.FILTER_RESOLUTION},set:function(t){r.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return r.settings.RESOLUTION},set:function(t){r.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return r.settings.MIPMAP_TEXTURES},set:function(t){r.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return r.settings.SPRITE_BATCH_SIZE},set:function(t){r.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return r.settings.SPRITE_MAX_TEXTURES},set:function(t){r.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return r.settings.RETINA_PREFIX},set:function(t){r.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return r.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=0;l<u.length;l++)!function(){var e=u[l];Object.defineProperty(r[e.parent],"DEFAULT",{get:function(){return e.parent,e.target,r.settings[e.target]},set:function(t){e.parent,e.target,r.settings[e.target]=t}})}();Object.defineProperties(r.settings,{PRECISION:{get:function(){return r.settings.PRECISION_FRAGMENT},set:function(t){r.settings.PRECISION_FRAGMENT=t}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return r.TextureMatrix}}}),r.DisplayObject.prototype.generateTexture=function(t,e,r){return t.generateTexture(this,e,r)},r.Graphics.prototype.generateTexture=function(t,e){return this.generateCanvasTexture(t,e)},r.GroupD8.isSwapWidthHeight=function(t){return r.GroupD8.isVertical(t)},r.RenderTexture.prototype.render=function(t,e,r,i){this.legacyRenderer.render(t,this,r,e,!i)},r.RenderTexture.prototype.getImage=function(t){return this.legacyRenderer.extract.image(t)},r.RenderTexture.prototype.getBase64=function(t){return this.legacyRenderer.extract.base64(t)},r.RenderTexture.prototype.getCanvas=function(t){return this.legacyRenderer.extract.canvas(t)},r.RenderTexture.prototype.getPixels=function(t){return this.legacyRenderer.pixels(t)},r.Sprite.prototype.setTexture=function(t){this.texture=t},i.BitmapText&&(i.BitmapText.prototype.setText=function(t){this.text=t}),r.Text.prototype.setText=function(t){this.text=t},r.Text.calculateFontProperties=function(t){return r.TextMetrics.measureFont(t)},Object.defineProperties(r.Text,{fontPropertiesCache:{get:function(){return r.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r.TextMetrics._context}}}),r.Text.prototype.setStyle=function(t){this.style=t},r.Text.prototype.determineFontProperties=function(t){return r.TextMetrics.measureFont(t)},r.Text.getFontStyle=function(t){return(t=t||{})instanceof r.TextStyle||(t=new r.TextStyle(t)),t.toFontString()},Object.defineProperties(r.TextStyle.prototype,{font:{get:function(){var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){1<t.indexOf("italic")?this._fontStyle="italic":-1<t.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal",-1<t.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var n=0;n<r;++n)if(e[n].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[n];break}if(-1<r&&r<e.length-1){this._fontFamily="";for(var o=r+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),r.Texture.prototype.setFrame=function(t){this.frame=t},r.Texture.addTextureToCache=function(t,e){r.Texture.addToCache(t,e)},r.Texture.removeTextureFromCache=function(t){return r.BaseTexture.removeFromCache(t),r.Texture.removeFromCache(t)},Object.defineProperties(n,{AbstractFilter:{get:function(){return r.AbstractFilter}},SpriteMaskFilter:{get:function(){return r.SpriteMaskFilter}},VoidFilter:{get:function(){return n.AlphaFilter}}}),r.utils.uuid=function(){return r.utils.uid()},r.utils.canUseNewCanvasBlendModes=function(){return r.CanvasTinter.canUseMultiply};var h=!0;if(Object.defineProperty(r.utils,"_saidHello",{set:function(t){t&&this.skipHello(),h=t},get:function(){return h}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){},get:function(){return NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){},get:function(){return NaN}}),s.Loader){var c=s.Resource,d=s.Loader;Object.defineProperties(c.prototype,{isJson:{get:function(){return this.type===c.TYPE.JSON}},isXml:{get:function(){return this.type===c.TYPE.XML}},isImage:{get:function(){return this.type===c.TYPE.IMAGE}},isAudio:{get:function(){return this.type===c.TYPE.AUDIO}},isVideo:{get:function(){return this.type===c.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return this.pre}},after:{get:function(){return this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(t){this.cursor=t},get:function(){return this.cursor}}),a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(t){this.cursorStyles.default=t},get:function(){return this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(t){this.currentCursorMode=t},get:function(){return this.currentCursorMode}}))}},{}],132:[function(t,e,r){"use strict";r.__esModule=!0;var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=new h.Rectangle,i=(n.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(t){var e=this.renderer,r=void 0,i=void 0,n=void 0,o=void 0;t&&(o=t instanceof h.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=e.rootContext,(n=c).width=this.renderer.width,n.height=this.renderer.height);var s=n.width*i,a=n.height*i,u=new h.CanvasRenderTarget(s,a),l=r.getImageData(n.x*i,n.y*i,s,a);return u.context.putImageData(l,0,0),u.canvas},n.prototype.pixels=function(t){var e=this.renderer,r=void 0,i=void 0,n=void 0,o=void 0;return t&&(o=t instanceof h.RenderTexture?t:e.generateTexture(t)),o?(r=o.baseTexture._canvasRenderTarget.context,i=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(r=e.rootContext,(n=c).width=e.width,n.height=e.height),r.getImageData(0,0,n.width*i,n.height*i).data},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),(this.renderer=t).extract=this}r.default=i,h.CanvasRenderer.registerPlugin("extract",i)},{"../../core":65}],133:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./webgl/WebGLExtract");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return i(n).default}});var o=t("./canvas/CanvasExtract");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return i(o).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(t,e,r){"use strict";r.__esModule=!0;var f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),p=new f.Rectangle,i=(n.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(t){var e=this.renderer,r=void 0,i=void 0,n=void 0,o=!1,s=void 0;t&&(s=t instanceof f.RenderTexture?t:this.renderer.generateTexture(t)),s?(i=(r=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=s.frame,o=!1):(i=(r=this.renderer.rootRenderTarget).resolution,o=!0,(n=p).width=r.size.width,n.height=r.size.height);var a=n.width*i,u=n.height*i,l=new f.CanvasRenderTarget(a,u);if(r){e.bindRenderTarget(r);var h=new Uint8Array(4*a*u),c=e.gl;c.readPixels(n.x*i,n.y*i,a,u,c.RGBA,c.UNSIGNED_BYTE,h);var d=l.context.getImageData(0,0,a,u);d.data.set(h),l.context.putImageData(d,0,0),o&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-u))}return l.canvas},n.prototype.pixels=function(t){var e=this.renderer,r=void 0,i=void 0,n=void 0,o=void 0;t&&(o=t instanceof f.RenderTexture?t:this.renderer.generateTexture(t)),o?(i=(r=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=o.frame):(i=(r=this.renderer.rootRenderTarget).resolution,(n=p).width=r.size.width,n.height=r.size.height);var s=n.width*i,a=n.height*i,u=new Uint8Array(4*s*a);if(r){e.bindRenderTarget(r);var l=e.gl;l.readPixels(n.x*i,n.y*i,s,a,l.RGBA,l.UNSIGNED_BYTE,u)}return u},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),(this.renderer=t).extract=this}r.default=i,f.WebGLRenderer.registerPlugin("extract",i)},{"../../core":65}],135:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.Sprite),a.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&o.ticker.shared.remove(this.update,this))},a.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH))},a.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},a.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},a.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())},a.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},a.prototype.destroy=function(t){this.stop(),i.prototype.destroy.call(this,t)},a.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(o.Texture.fromFrame(t[r]));return new a(e)},a.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(o.Texture.fromImage(t[r]));return new a(e)},n(a,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof o.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),a);function a(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t[0]instanceof o.Texture?t[0]:t[0].texture));return r._textures=null,r._durations=null,r.textures=t,r._autoUpdate=!1!==e,r.animationSpeed=1,r.loop=!0,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../core":65}],136:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},E=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),s=i(t("../core/math/ObservablePoint")),y=t("../core/utils"),m=i(t("../core/settings")),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(C,n=E.Container),C.prototype.updateText=function(){for(var t=C.fonts[this._font.name],e=this._font.size/t.size,r=new E.Point,i=[],n=[],o=null,s=0,a=0,u=0,l=-1,h=0,c=0,d=0,f=0;f<this.text.length;f++){var p=this.text.charCodeAt(f);if(/(\s)/.test(this.text.charAt(f))&&(l=f,h=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(f)))n.push(s),a=Math.max(a,s),u++,r.x=0,r.y+=t.lineHeight,o=null;else if(-1!==l&&0<this._maxWidth&&r.x*e>this._maxWidth)E.utils.removeItems(i,l-c,f-l),f=l,l=-1,++c,n.push(h),a=Math.max(a,h),u++,r.x=0,r.y+=t.lineHeight,o=null;else{var _=t.chars[p];_&&(o&&_.kerning[o]&&(r.x+=_.kerning[o]),i.push({texture:_.texture,line:u,charCode:p,position:new E.Point(r.x+_.xOffset,r.y+_.yOffset)}),s=r.x+(_.texture.width+_.xOffset),r.x+=_.xAdvance,d=Math.max(d,_.yOffset+_.texture.height),o=p)}}n.push(s),a=Math.max(a,s);for(var g=[],v=0;v<=u;v++){var y=0;"right"===this._font.align?y=a-n[v]:"center"===this._font.align&&(y=(a-n[v])/2),g.push(y)}for(var m=i.length,b=this.tint,x=0;x<m;x++){var T=this._glyphs[x];T?T.texture=i[x].texture:(T=new E.Sprite(i[x].texture),this._glyphs.push(T)),T.position.x=(i[x].position.x+g[i[x].line])*e,T.position.y=i[x].position.y*e,T.scale.x=T.scale.y=e,T.tint=b,T.parent||this.addChild(T)}for(var w=m;w<this._glyphs.length;++w)this.removeChild(this._glyphs[w]);if(this._textWidth=a*e,this._textHeight=(r.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var S=0;S<m;S++)this._glyphs[S].x-=this._textWidth*this.anchor.x,this._glyphs[S].y-=this._textHeight*this.anchor.y;this._maxLineHeight=d*e},C.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},C.prototype.getLocalBounds=function(){return this.validate(),n.prototype.getLocalBounds.call(this)},C.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},C.registerFont=function(t,e){var r={},i=t.getElementsByTagName("info")[0],n=t.getElementsByTagName("common")[0],o=t.getElementsByTagName("page")[0].getAttribute("file"),s=(0,y.getResolutionOfUrl)(o,m.default.RESOLUTION);r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(n.getAttribute("lineHeight"),10)/s,r.chars={};for(var a=t.getElementsByTagName("char"),u=0;u<a.length;u++){var l=a[u],h=parseInt(l.getAttribute("id"),10),c=new E.Rectangle(parseInt(l.getAttribute("x"),10)/s+e.frame.x/s,parseInt(l.getAttribute("y"),10)/s+e.frame.y/s,parseInt(l.getAttribute("width"),10)/s,parseInt(l.getAttribute("height"),10)/s);r.chars[h]={xOffset:parseInt(l.getAttribute("xoffset"),10)/s,yOffset:parseInt(l.getAttribute("yoffset"),10)/s,xAdvance:parseInt(l.getAttribute("xadvance"),10)/s,kerning:{},texture:new E.Texture(e.baseTexture,c)}}for(var d=t.getElementsByTagName("kerning"),f=0;f<d.length;f++){var p=d[f],_=parseInt(p.getAttribute("first"),10)/s,g=parseInt(p.getAttribute("second"),10)/s,v=parseInt(p.getAttribute("amount"),10)/s;r.chars[g]&&(r.chars[g].kerning[_]=v)}return C.fonts[r.font]=r},o(C,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):C.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),C);function C(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,C);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},r.font=e.font,r._text=t,r._maxWidth=0,r._maxLineHeight=0,r._anchor=new s.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=a).fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t},d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),o=t("../core/sprites/canvas/CanvasTinter"),f=o&&o.__esModule?o:{default:o},s=new d.Point,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,n=d.Sprite),u.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},u.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},u.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,i=this.worldTransform,n=t.resolution,o=e.baseTexture,s=o.resolution,a=this.tilePosition.x/this.tileScale.x%e._frame.width*s,u=this.tilePosition.y/this.tileScale.y%e._frame.height*s;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var l=new d.CanvasRenderTarget(e._frame.width,e._frame.height,s);16777215!==this.tint?(this.tintedTexture=f.default.getTintedTexture(this,this.tint),l.context.drawImage(this.tintedTexture,0,0)):l.context.drawImage(o.source,-e._frame.x*s,-e._frame.y*s),this.cachedTint=this.tint,this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/s,this.tileScale.y/s);var h=this.anchor.x*-this._width,c=this.anchor.y*-this._height;this.uvRespectAnchor?(r.translate(a,u),r.fillRect(h-a,c-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s)):(r.translate(a+h,u+c),r.fillRect(-a,-u,this._width/this.tileScale.x*s,this._height/this.tileScale.y*s))}},u.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},u.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),t||(this._localBoundsRect||(this._localBoundsRect=new d.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):n.prototype.getLocalBounds.call(this,t)},u.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,s);var e=this._width,r=this._height,i=-e*this.anchor._x;if(s.x>=i&&s.x<i+e){var n=-r*this.anchor._y;if(s.y>=n&&s.y<n+r)return!0}return!1},u.prototype.destroy=function(t){n.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},u.from=function(t,e,r){return new u(d.Texture.from(t),e,r)},u.fromFrame=function(t,e,r){var i=d.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new u(i,e,r)},u.fromImage=function(t,e,r,i,n){return new u(d.Texture.fromImage(t,i,n),e,r)},i(u,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),u);function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return i.tileTransform=new d.TransformStatic,i._width=e,i._height=r,i._canvasPattern=null,i.uvTransform=t.transform||new d.TextureMatrix(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=a},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),c=i(t("../core/textures/Texture")),d=i(t("../core/textures/BaseTexture")),f=t("../core/utils"),n=h.DisplayObject,p=new h.Matrix;n.prototype._cacheAsBitmap=!1,n.prototype._cacheData=!1;function o(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null}Object.defineProperties(n.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){var e=void 0;(this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new o),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),n.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},n.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;r.pad(i)}var n=t._activeRenderTarget,o=t.filterManager.filterStack,s=h.RenderTexture.create(0|r.width,0|r.height),a="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=a,d.default.addToCache(s.baseTexture,a),c.default.addToCache(s,a);var u=p;u.tx=-r.x,u.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,s,!0,u,!0),t.bindRenderTarget(n),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var l=new h.Sprite(s);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-r.x/r.width,l.anchor.y=-r.y/r.height,l.alpha=e,l._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},n.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},n.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var i=t.context,n=h.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+(0,f.uid)();this._cacheData.textureCacheId=o,d.default.addToCache(n.baseTexture,o),c.default.addToCache(n,o);var s=p;this.transform.localTransform.copy(s),s.invert(),s.tx-=e.x,s.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,n,!0,s,!1),t.context=i,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var a=new h.Sprite(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-e.x/e.width,a.anchor.y=-e.y/e.height,a._bounds=this._bounds,a.alpha=r,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=a,this.containsPoint=a.containsPoint.bind(a)}},n.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},n.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},n.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,d.default.removeFromCache(this._cacheData.textureCacheId),c.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(t,e,r){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core"));i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":65}],140:[function(t,e,r){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core"));i.DisplayObject.prototype.getGlobalPosition=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new i.Point,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":65}],141:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.BitmapText=r.TilingSpriteRenderer=r.TilingSprite=r.AnimatedSprite=void 0;var n=t("./AnimatedSprite");Object.defineProperty(r,"AnimatedSprite",{enumerable:!0,get:function(){return i(n).default}});var o=t("./TilingSprite");Object.defineProperty(r,"TilingSprite",{enumerable:!0,get:function(){return i(o).default}});var s=t("./webgl/TilingSpriteRenderer");Object.defineProperty(r,"TilingSpriteRenderer",{enumerable:!0,get:function(){return i(s).default}});var a=t("./BitmapText");Object.defineProperty(r,"BitmapText",{enumerable:!0,get:function(){return i(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(t,e,r){"use strict";r.__esModule=!0;var i,p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),_=t("../../core/const"),g=(t("path"),new p.Matrix),n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,i=p.ObjectRenderer),o.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new p.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new p.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new p.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},o.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var i=r.vertices;i[0]=i[6]=t._width*-t.anchor.x,i[1]=i[3]=t._height*-t.anchor.y,i[2]=i[4]=t._width*(1-t.anchor.x),i[5]=i[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((i=r.uvs)[0]=i[6]=-t.anchor.x,i[1]=i[3]=-t.anchor.y,i[2]=i[4]=1-t.anchor.x,i[5]=i[7]=1-t.anchor.y),r.upload();var n=t._texture,o=n.baseTexture,s=t.tileTransform.localTransform,a=t.uvTransform,u=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;u&&(o._glTextures[e.CONTEXT_UID]?u=o.wrapMode!==_.WRAP_MODES.CLAMP:o.wrapMode===_.WRAP_MODES.CLAMP&&(o.wrapMode=_.WRAP_MODES.REPEAT));var l=u?this.simpleShader:this.shader;e.bindShader(l);var h=n.width,c=n.height,d=t._width,f=t._height;g.set(s.a*h/d,s.b*h/f,s.c*c/d,s.d*c/f,s.tx/d,s.ty/f),g.invert(),u?g.prepend(a.mapCoord):(l.uniforms.uMapCoord=a.mapCoord.toArray(!0),l.uniforms.uClampFrame=a.uClampFrame,l.uniforms.uClampOffset=a.uClampOffset),l.uniforms.uTransform=g.toArray(!0),l.uniforms.uColor=p.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,l.uniforms.uColor,o.premultipliedAlpha),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.uSampler=e.bindTexture(n),e.setBlendMode(p.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},o);function o(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return e.shader=null,e.simpleShader=null,e.quad=null,e}r.default=n,p.WebGLRenderer.registerPlugin("tilingSprite",n)},{"../../core":65,"../../core/const":46,path:23}],143:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.Filter),n(a,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return e.alpha=t,e.glShaderKey="alpha",e}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../../core":65,path:23}],144:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var o,n=function(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),a=i(t("./BlurXFilter")),u=i(t("./BlurYFilter")),l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,o=s.Filter),h.prototype.apply=function(t,e,r){var i=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,i,!0),this.blurYFilter.apply(t,i,r,!1),t.returnRenderTarget(i)},n(h,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),h);function h(t,e,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return n.blurXFilter=new a.default(t,e,r,i),n.blurYFilter=new u.default(t,e,r,i),n.padding=0,n.resolution=r||s.settings.RESOLUTION,n.quality=e||4,n.blur=t||8,n}function c(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=l},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var a,n=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t},u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=i(t("./generateBlurVertSource")),d=i(t("./generateBlurFragSource")),f=i(t("./getMaxBlurKernelSize")),o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,a=u.Filter),l.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,o=(0,f.default)(n);this.vertexSrc=(0,c.default)(o,!0),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var s=t.getRenderTarget(!0),a=e,u=s,l=0;l<this.passes-1;l++){t.applyFilter(this,a,u,!0);var h=u;u=a,a=h}t.applyFilter(this,a,r,i),t.returnRenderTarget(s)}},n(l,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),l);function l(t,e,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),i=i||5;var n=(0,c.default)(i,!0),o=(0,d.default)(i),s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,n,o));return s.resolution=r||u.settings.RESOLUTION,s._quality=0,s.quality=e||4,s.strength=t||8,s.firstRun=!0,s}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=o},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var a,n=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t},u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),c=i(t("./generateBlurVertSource")),d=i(t("./generateBlurFragSource")),f=i(t("./getMaxBlurKernelSize")),o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,a=u.Filter),l.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,o=(0,f.default)(n);this.vertexSrc=(0,c.default)(o,!1),this.fragmentSrc=(0,d.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var s=t.getRenderTarget(!0),a=e,u=s,l=0;l<this.passes-1;l++){t.applyFilter(this,a,u,!0);var h=u;u=a,a=h}t.applyFilter(this,a,r,i),t.returnRenderTarget(s)}},n(l,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),l);function l(t,e,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,l),i=i||5;var n=(0,c.default)(i,!1),o=(0,d.default)(i),s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,n,o));return s.resolution=r||u.settings.RESOLUTION,s._quality=0,s.quality=e||4,s.strength=t||8,s.firstRun=!0,s}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=o},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=u[t],r=e.length,i=l,n="",o=void 0,s=0;s<t;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);r<=(o=s)&&(o=t-s-1),n+=a=a.replace("%value%",e[o]),n+="\n"}return(i=i.replace("%blur%",n)).replace("%size%",t)};var u={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},l=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t,e){var r=Math.ceil(t/2),i=u,n="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<t;s++){var a=o.replace("%index%",s);n+=a=a.replace("%sampleIndex%",s-(r-1)+".0"),n+="\n"}return(i=i.replace("%blur%",n)).replace("%size%",t)};var u=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;e<r;)r-=2;return r}},{}],150:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.Filter),a.prototype._loadMatrix=function(t){var e=t;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},a.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},a.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},a.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},a.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=(0,Math.sqrt)(1/3),o=[r+1/3*(1-r),1/3*(1-r)-n*i,1/3*(1-r)+n*i,0,0,1/3*(1-r)+n*i,r+1/3*(1-r),1/3*(1-r)-n*i,0,0,1/3*(1-r)-n*i,1/3*(1-r)+n*i,r+1/3*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)},a.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},a.prototype.saturate=function(){var t=arguments[1],e=2*(0<arguments.length&&void 0!==arguments[0]?arguments[0]:0)/3+1,r=-.5*(e-1),i=[e,r,r,0,0,r,e,r,0,0,r,r,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},a.prototype.desaturate=function(){this.saturate(-1)},a.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},a.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},a.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},a.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},a.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},a.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},a.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},a.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},a.prototype.colorTone=function(t,e,r,i,n){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,u=((i=i||3375104)>>16&255)/255,l=(i>>8&255)/255,h=(255&i)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,u,l,h,e=e||.15,0,o-u,s-l,a-h,0,0];this._loadMatrix(c,n)},a.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},a.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(a,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),a);function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=s).prototype.grayscale=s.prototype.greyscale},{"../../core":65,path:23}],151:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.Filter),a.prototype.apply=function(t,e,r){var i=1/r.destinationFrame.width*(r.size.width/e.size.width);this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*i,this.uniforms.scale.y=this.scale.y*i,t.applyFilter(this,e,r)},i(a,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),a);function a(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=new o.Matrix;t.renderable=!1;var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return i.maskSprite=t,i.maskMatrix=r,i.uniforms.mapSampler=t._texture,i.uniforms.filterMatrix=r,i.uniforms.scale={x:1,y:1},null!=e||(e=20),i.scale=new o.Point(e,e),i}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../../core":65,path:23}],152:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),o=(t("path"),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,i=n.Filter),s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}r.default=o},{"../../core":65,path:23}],153:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./fxaa/FXAAFilter");Object.defineProperty(r,"FXAAFilter",{enumerable:!0,get:function(){return i(n).default}});var o=t("./noise/NoiseFilter");Object.defineProperty(r,"NoiseFilter",{enumerable:!0,get:function(){return i(o).default}});var s=t("./displacement/DisplacementFilter");Object.defineProperty(r,"DisplacementFilter",{enumerable:!0,get:function(){return i(s).default}});var a=t("./blur/BlurFilter");Object.defineProperty(r,"BlurFilter",{enumerable:!0,get:function(){return i(a).default}});var u=t("./blur/BlurXFilter");Object.defineProperty(r,"BlurXFilter",{enumerable:!0,get:function(){return i(u).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(r,"BlurYFilter",{enumerable:!0,get:function(){return i(l).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(r,"ColorMatrixFilter",{enumerable:!0,get:function(){return i(h).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(r,"AlphaFilter",{enumerable:!0,get:function(){return i(c).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=function(t,e,r){return e&&u(t.prototype,e),r&&u(t,r),t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.Filter),n(a,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=t,r.seed=e,r}function u(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=s},{"../../core":65,path:23}],155:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&a(t.prototype,e),r&&a(t,r),t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),o=(s.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},s.prototype._copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},s.prototype._reset=function(){this.isPrimary=!1},i(s,[{key:"pointerId",get:function(){return this.identifier}}]),s);function s(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}function a(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=o},{"../core":65}],156:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.stopPropagation=function(){this.stopped=!0},n.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},n);function n(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}r.default=i},{}],157:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),s=i(t("./InteractionData")),a=i(t("./InteractionEvent")),c=i(t("./InteractionTrackingData")),u=i(t("eventemitter3")),l=i(t("./interactiveTarget"));o.utils.mixins.delayMixin(o.DisplayObject.prototype,l.default);var h,d="MOUSE",f={target:null,data:{global:null}},p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(_,h=u.default),_.prototype.hitTest=function(t,e){return f.target=null,f.data.global=t,e=e||this.renderer._lastObjectRendered,this.processInteractive(f,e,null,!0),f.target},_.prototype.setTargetElement=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},_.prototype.addEvents=function(){this.interactionDOMElement&&(o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},_.prototype.removeEvents=function(){this.interactionDOMElement&&(o.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},_.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},_.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":n(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},_.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},_.prototype.mapPositionToPoint=function(t,e,r){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},_.prototype.processInteractive=function(t,e,r,i,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n;if(e.hitArea?a=!1:i&&e._mask&&(e._mask.containsPoint(o)||(i=!1)),e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;0<=l;l--){var h=u[l],c=this.processInteractive(t,h,r,i,a);if(c){if(!h.parent)continue;a=!1,c&&(t.target&&(i=!1),s=!0)}}return n&&(i&&!t.target&&(e.hitArea?(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(s=!0)):e.containsPoint&&e.containsPoint(o)&&(s=!0)),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},_.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},_.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;if(r)if(e.trackedPointers[n]||(e.trackedPointers[n]=new c.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},_.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=i[s],u=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,u);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,l),"mouse"===a.pointerType||"pen"===a.pointerType){var h=2===a.button;this.emit(h?"rightup"+o:"mouseup"+o,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,l),this.releaseInteractionDataForPointerId(a.pointerId,u))}},_.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},_.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},_.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},_.prototype.processPointerUp=function(t,e,r){var i=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===i.pointerType;if("mouse"===i.pointerType||"pen"===i.pointerType){var a=2===i.button,u=c.default.FLAGS,l=a?u.RIGHT_DOWN:u.LEFT_DOWN,h=void 0!==o&&o.flags&l;r?(this.dispatchEvent(e,a?"rightup":"mouseup",t),h&&this.dispatchEvent(e,a?"rightclick":"click",t)):h&&this.dispatchEvent(e,a?"rightupoutside":"mouseupoutside",t),o&&(a?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},_.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t;var a="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},_.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},_.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},_.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[n];r&&!s&&(s=e.trackedPointers[n]=new c.default(n)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},_.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);"mouse"===(i.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},_.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,r=void 0;return e===d||"mouse"===t.pointerType?r=this.mouse:this.activeInteractionData[e]?r=this.activeInteractionData[e]:((r=this.interactionDataPool.pop()||new s.default).identifier=e,this.activeInteractionData[e]=r),r._copyEvent(t),r},_.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e._reset(),this.interactionDataPool.push(e))},_.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t._reset(),t},_.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,i=t.changedTouches.length;r<i;r++){var n=t.changedTouches[r];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,void(n.tangentialPressure=0)===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=d),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0),e.push(t);return e},_.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},_);function _(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,_);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,h.call(this));return e=e||{},r.renderer=t,r.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,r.interactionFrequency=e.interactionFrequency||10,r.mouse=new s.default,r.mouse.identifier=d,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[d]=r.mouse,r.interactionDataPool=[],r.eventData=new a.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new o.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}r.default=p,o.WebGLRenderer.registerPlugin("interaction",p),o.CanvasRenderer.registerPlugin("interaction",p)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t},n=(o.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},i(o,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),o);function o(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,o),this._pointerId=t,this._flags=o.FLAGS.NONE}function s(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=n).FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./InteractionData");Object.defineProperty(r,"InteractionData",{enumerable:!0,get:function(){return i(n).default}});var o=t("./InteractionManager");Object.defineProperty(r,"InteractionManager",{enumerable:!0,get:function(){return i(o).default}});var s=t("./interactiveTarget");Object.defineProperty(r,"interactiveTarget",{enumerable:!0,get:function(){return i(s).default}});var a=t("./InteractionTrackingData");Object.defineProperty(r,"InteractionTrackingData",{enumerable:!0,get:function(){return i(a).default}});var u=t("./InteractionEvent");Object.defineProperty(r,"InteractionEvent",{enumerable:!0,get:function(){return i(u).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(t,e,r){"use strict";r.__esModule=!0,r.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(t,e,r){"use strict";function o(t,e){t.bitmapFont=i.BitmapText.registerFont(t.data,e)}r.__esModule=!0,r.parse=o,r.default=function(){return function(e,r){if(e.data&&e.type===u.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var t=e.isDataUrl?"":s.dirname(e.url);e.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");var i=t+e.data.getElementsByTagName("page")[0].getAttribute("file");if(a.utils.TextureCache[i])o(e,a.utils.TextureCache[i]),r();else{var n={crossOrigin:e.crossOrigin,loadType:u.Resource.LOAD_TYPE.IMAGE,metadata:e.metadata.imageMetadata,parentResource:e};this.add(e.name+"_image",i,n,function(t){o(e,t.texture),r()})}}else r();else r()}};var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("path")),a=t("../core"),u=t("resource-loader"),i=t("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0,r.shared=r.Resource=r.textureParser=r.getResourcePath=r.spritesheetParser=r.parseBitmapFontData=r.bitmapFontParser=r.Loader=void 0;var n=t("./bitmapFontParser");Object.defineProperty(r,"bitmapFontParser",{enumerable:!0,get:function(){return i(n).default}}),Object.defineProperty(r,"parseBitmapFontData",{enumerable:!0,get:function(){return n.parse}});var o=t("./spritesheetParser");Object.defineProperty(r,"spritesheetParser",{enumerable:!0,get:function(){return i(o).default}}),Object.defineProperty(r,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var s=t("./textureParser");Object.defineProperty(r,"textureParser",{enumerable:!0,get:function(){return i(s).default}});var a=t("resource-loader");Object.defineProperty(r,"Resource",{enumerable:!0,get:function(){return a.Resource}});var u=i(t("../core/Application")),l=i(t("./loader"));r.Loader=l.default;var h=new l.default;h.destroy=function(){},r.shared=h;var c=u.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?h:new l.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,o=i(t("resource-loader")),s=t("resource-loader/lib/middlewares/parsing/blob"),a=i(t("eventemitter3")),u=i(t("./textureParser")),l=i(t("./spritesheetParser")),h=i(t("./bitmapFontParser")),c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,n=o.default),d.addPixiMiddleware=function(t){d._pixiMiddleware.push(t)},d.prototype.destroy=function(){this.removeAllListeners(),this.reset()},d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,e));a.default.call(i);for(var r=0;r<d._pixiMiddleware.length;++r)i.use(d._pixiMiddleware[r]());return i.onStart.add(function(t){return i.emit("start",t)}),i.onProgress.add(function(t,e){return i.emit("progress",t,e)}),i.onError.add(function(t,e,r){return i.emit("error",t,e,r)}),i.onLoad.add(function(t,e){return i.emit("load",t,e)}),i.onComplete.add(function(t,e){return i.emit("complete",t,e)}),i}for(var f in r.default=c,a.default.prototype)c.prototype[f]=a.default.prototype[f];c._pixiMiddleware=[s.blobMiddlewareFactory,u.default,l.default,h.default];var p=o.default.Resource;p.setExtensionXhrType("fnt",p.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(t,e,r){"use strict";function o(t,e){return t.isDataUrl?t.data.meta.image:n.default.resolve(t.url.replace(e,""),t.data.meta.image)}r.__esModule=!0,r.default=function(){return function(r,i){var t=r.name+"_image";if(r.data&&r.type===s.Resource.TYPE.JSON&&r.data.frames&&!this.resources[t]){var e={crossOrigin:r.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:r.metadata.imageMetadata,parentResource:r},n=o(r,this.baseUrl);this.add(t,n,e,function(t){var e=new a.Spritesheet(t.texture.baseTexture,r.data,r.url);e.parse(function(){r.spritesheet=e,r.textures=e.textures,i()})})}else i()}},r.getResourcePath=o;var s=t("resource-loader"),i=t("url"),n=i&&i.__esModule?i:{default:i},a=t("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(t,e,r){"use strict";r.__esModule=!0,r.default=function(){return function(t,e){t.data&&t.type===i.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var i=t("resource-loader"),n=t("../core/textures/Texture"),o=n&&n.__esModule?n:{default:n}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(t,e,r){"use strict";r.__esModule=!0;var s,i=function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),n=t("../core/textures/Texture"),u=n&&n.__esModule?n:{default:n},h=new a.Point,c=new a.Polygon,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,s=a.Container),d.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},d.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},d.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},d.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},d.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},d.prototype._refresh=function(){},d.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},d.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,h);for(var e=this.vertices,r=c.points,i=this.indices,n=this.indices.length,o=this.drawMode===d.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<n;s+=o){var a=2*i[s],u=2*i[s+1],l=2*i[s+2];if(r[0]=e[a],r[1]=e[1+a],r[2]=e[u],r[3]=e[1+u],r[4]=e[l],r[5]=e[1+l],c.contains(h.x,h.y))return!0}return!1},i(d,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t)&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this))}},{key:"tint",get:function(){return a.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=a.utils.hex2rgb(t,this.tintRgb)}}]),d);function d(t,e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this));return o._texture=t||u.default.EMPTY,o.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),o.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),o.indices=i||new Uint16Array([0,1,3,2]),o.dirty=0,o.indexDirty=0,o.blendMode=a.BLEND_MODES.NORMAL,o.canvasPadding=0,o.drawMode=n||d.DRAW_MODES.TRIANGLE_MESH,o.shader=null,o.tintRgb=new Float32Array([1,1,1]),o._glDatas={},o._uvTransform=new a.TextureMatrix(o._texture),o.uploadUvTransform=!1,o.pluginName="mesh",o}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(r.default=o).DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(t,e,r){"use strict";r.__esModule=!0;var s,i=function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t},n=t("./Plane"),o=n&&n.__esModule?n:{default:n},a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=o.default),u.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},u.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},u.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha;var r=this.worldTransform,i=t.resolution;t.roundPixels?e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i);var n=this._texture.baseTexture,o=n.source,s=n.width*n.resolution,a=n.height*n.resolution;this.drawSegment(e,o,s,a,0,1,10,11),this.drawSegment(e,o,s,a,2,3,12,13),this.drawSegment(e,o,s,a,4,5,14,15),this.drawSegment(e,o,s,a,8,9,18,19),this.drawSegment(e,o,s,a,10,11,20,21),this.drawSegment(e,o,s,a,12,13,22,23),this.drawSegment(e,o,s,a,16,17,26,27),this.drawSegment(e,o,s,a,18,19,28,29),this.drawSegment(e,o,s,a,20,21,30,31)},u.prototype.drawSegment=function(t,e,r,i,n,o,s,a){var u=this.uvs,l=this.vertices,h=(u[s]-u[n])*r,c=(u[a]-u[o])*i,d=l[s]-l[n],f=l[a]-l[o];h<1&&(h=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawImage(e,u[n]*r,u[o]*i,h,c,l[n],l[o],d,f)},u.prototype._refresh=function(){s.prototype._refresh.call(this);var t=this.uvs,e=this._texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},i(u,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),u);function u(t,e,r,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,4,4));return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o.leftWidth=void 0!==e?e:10,o.rightWidth=void 0!==i?i:10,o.topHeight=void 0!==r?r:10,o.bottomHeight=void 0!==n?n:10,o.refresh(!0),o}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=a},{"./Plane":168}],168:[function(t,e,r){"use strict";r.__esModule=!0;var n,i=t("./Mesh"),o=i&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,r=[],i=[],n=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,u=t.height/s,l=0;l<e;l++){var h=l%this.verticesX,c=l/this.verticesX|0;r.push(h*a,c*u),i.push(h/o,c/s)}for(var d=o*s,f=0;f<d;f++){var p=f%o,_=f/o|0,g=_*this.verticesX+p,v=_*this.verticesX+p+1,y=(1+_)*this.verticesX+p,m=(1+_)*this.verticesX+p+1;n.push(g,v,y),n.push(v,m,y)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},a.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},a);function a(t,e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return i._ready=!0,i.verticesX=e||10,i.verticesY=r||10,i.drawMode=o.default.DRAW_MODES.TRIANGLES,i.refresh(),i}r.default=s},{"./Mesh":166}],169:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=t("./Mesh"),o=n&&n.__esModule?n:{default:n},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.default),a.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,i=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var n=t.length,o=1;o<n;o++){var s=4*o,a=o/(n-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,i[s=2*o]=1,i[s+1]=1,r[s=2*o]=s,r[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},a.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,i=0,n=0,o=this.vertices,s=t.length,a=0;a<s;a++){var u=t[a],l=4*a;n=-((r=a<t.length-1?t[a+1]:u).x-e.x),i=r.y-e.y;var h=10*(1-a/(s-1));1<h&&(h=1);var c=Math.sqrt(i*i+n*n),d=this._texture.height/2;i/=c,n/=c,i*=d,n*=d,o[l]=u.x+i,o[1+l]=u.y+n,o[2+l]=u.x-i,o[3+l]=u.y-n,e=u}},a.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},a);function a(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t));return r.points=e,r.vertices=new Float32Array(4*e.length),r.uvs=new Float32Array(4*e.length),r.colors=new Float32Array(2*e.length),r.indices=new Uint16Array(2*e.length),r.autoUpdate=!0,r.refresh(),r}r.default=s},{"./Mesh":166}],170:[function(t,e,r){"use strict";r.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),n=t("../Mesh"),o=n&&n.__esModule?n:{default:n},s=(a.prototype.render=function(t){var e=this.renderer,r=e.context,i=t.worldTransform,n=e.resolution;e.roundPixels?r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e.setBlendMode(t.blendMode),t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},a.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var i=2*r;this._renderDrawTriangle(t,i,2+i,4+i)}},a.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,i=0;i<r;i+=3){var n=2*e[i],o=2*e[i+1],s=2*e[i+2];this._renderDrawTriangle(t,n,o,s)}},a.prototype._renderDrawTriangle=function(t,e,r,i){var n=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var u=a.baseTexture,l=u.source,h=u.width,c=u.height,d=void 0,f=void 0,p=void 0,_=void 0,g=void 0,v=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;d=(o[e]*y.a+o[e+1]*y.c+y.tx)*u.width,f=(o[r]*y.a+o[r+1]*y.c+y.tx)*u.width,p=(o[i]*y.a+o[i+1]*y.c+y.tx)*u.width,_=(o[e]*y.b+o[e+1]*y.d+y.ty)*u.height,g=(o[r]*y.b+o[r+1]*y.d+y.ty)*u.height,v=(o[i]*y.b+o[i+1]*y.d+y.ty)*u.height}else d=o[e]*u.width,f=o[r]*u.width,p=o[i]*u.width,_=o[e+1]*u.height,g=o[r+1]*u.height,v=o[i+1]*u.height;var m=s[e],b=s[r],x=s[i],T=s[e+1],w=s[r+1],S=s[i+1];if(0<t.canvasPadding){var E=t.canvasPadding/t.worldTransform.a,C=t.canvasPadding/t.worldTransform.d,P=(m+b+x)/3,O=(T+w+S)/3,I=m-P,M=T-O,A=Math.sqrt(I*I+M*M);m=P+I/A*(A+E),T=O+M/A*(A+C),M=w-O,b=P+(I=b-P)/(A=Math.sqrt(I*I+M*M))*(A+E),w=O+M/A*(A+C),M=S-O,x=P+(I=x-P)/(A=Math.sqrt(I*I+M*M))*(A+E),S=O+M/A*(A+C)}n.save(),n.beginPath(),n.moveTo(m,T),n.lineTo(b,w),n.lineTo(x,S),n.closePath(),n.clip();var R=d*g+_*p+f*v-g*p-_*f-d*v,D=m*g+_*x+b*v-g*x-_*b-m*v,k=d*b+m*p+f*x-b*p-m*f-d*x,L=d*g*x+_*b*p+m*f*v-m*g*p-_*f*x-d*b*v,F=T*g+_*S+w*v-g*S-_*w-T*v,B=d*w+T*p+f*S-w*p-T*f-d*S,N=d*g*S+_*w*p+T*f*v-T*g*p-_*f*S-d*w*v;n.transform(D/R,F/R,k/R,B/R,L/R,N/R),n.drawImage(l,0,0,h*u.resolution,c*u.resolution,0,0,h,c),n.restore(),this.renderer.invalidateBlendMode()}},a.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,i=r.length/2;e.beginPath();for(var n=1;n<i-2;++n){var o=2*n,s=r[o],a=r[1+o],u=r[2+o],l=r[3+o],h=r[4+o],c=r[5+o];e.moveTo(s,a),e.lineTo(u,l),e.lineTo(h,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},a.prototype.destroy=function(){this.renderer=null},a);function a(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,a),this.renderer=t}r.default=s,i.CanvasRenderer.registerPlugin("mesh",s)},{"../../core":65,"../Mesh":166}],171:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./Mesh");Object.defineProperty(r,"Mesh",{enumerable:!0,get:function(){return i(n).default}});var o=t("./webgl/MeshRenderer");Object.defineProperty(r,"MeshRenderer",{enumerable:!0,get:function(){return i(o).default}});var s=t("./canvas/CanvasMeshRenderer");Object.defineProperty(r,"CanvasMeshRenderer",{enumerable:!0,get:function(){return i(s).default}});var a=t("./Plane");Object.defineProperty(r,"Plane",{enumerable:!0,get:function(){return i(a).default}});var u=t("./NineSlicePlane");Object.defineProperty(r,"NineSlicePlane",{enumerable:!0,get:function(){return i(u).default}});var l=t("./Rope");Object.defineProperty(r,"Rope",{enumerable:!0,get:function(){return i(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),a=i(t("pixi-gl-core")),u=i(t("../Mesh")),l=(t("path"),s.Matrix.IDENTITY),o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,n=s.ObjectRenderer),h.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new s.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},h.prototype.render=function(t){var e=this.renderer,r=e.gl,i=t._texture;if(i.valid){var n=t._glDatas[e.CONTEXT_UID];n||(e.bindVao(null),(n={shader:this.shader,vertexBuffer:a.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:a.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:a.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty}).vao=new a.default.VertexArrayObject(r).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=n),e.bindVao(n.vao),t.dirty!==n.dirty&&(n.dirty=t.dirty,n.uvBuffer.upload(t.uvs)),t.indexDirty!==n.indexDirty&&(n.indexDirty=t.indexDirty,n.indexBuffer.upload(t.indices)),n.vertexBuffer.upload(t.vertices),e.bindShader(n.shader),n.shader.uniforms.uSampler=e.bindTexture(i),e.state.setBlendMode(s.utils.correctBlendMode(t.blendMode,i.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(t.uploadUvTransform?n.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=l.toArray(!0)),n.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),n.shader.uniforms.uColor=s.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,n.shader.uniforms.uColor,i.baseTexture.premultipliedAlpha);var o=t.drawMode===u.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;n.vao.draw(o,t.indices.length,0)}},h);function h(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.shader=null,e}r.default=o,s.WebGLRenderer.registerPlugin("mesh",o)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(t,e,r){"use strict";r.__esModule=!0;var o,i=function(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),n=t("../core/utils"),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o=s.Container),u.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t||"tint"in t?!!t.alpha||!!t.tint:this._properties[4])},u.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},u.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},u.prototype.onChildrenChange=function(t){var e=Math.floor(t/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},u.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,i=!0,n=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var l=this.children[u];if(l.visible){var h=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)i&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),i=!1),n=l.anchor.x*(-h.width*l.scale.x)+l.position.x+.5,o=l.anchor.y*(-h.height*l.scale.y)+l.position.y+.5,s=h.width*l.scale.x,a=h.height*l.scale.y;else{i=i||!0,l.displayObjectUpdateTransform();var c=l.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=l.anchor.x*-h.width+.5,o=l.anchor.y*-h.height+.5,s=h.width,a=h.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.source,h.x*d,h.y*d,h.width*d,h.height*d,n*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},u.prototype.destroy=function(t){if(o.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null},i(u,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,n.hex2rgb)(t,this.tintRgb)}}]),u);function u(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,e=arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return 16384<r&&(r=16384),t<r&&(r=t),n._properties=[!1,!0,!1,!1,!1],n._maxSize=t,n._batchSize=r,n._glBuffers={},n._bufferToUpdate=0,n.interactiveChildren=!1,n.blendMode=s.BLEND_MODES.NORMAL,n.autoResize=i,n.roundPixels=!0,n.baseTexture=null,n.setProperties(e),n._tint=0,n.tintRgb=new Float32Array(4),n.tint=16777215,n}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}r.default=a},{"../core":65,"../core/utils":125}],174:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./ParticleContainer");Object.defineProperty(r,"ParticleContainer",{enumerable:!0,get:function(){return i(n).default}});var o=t("./webgl/ParticleRenderer");Object.defineProperty(r,"ParticleRenderer",{enumerable:!0,get:function(){return i(o).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var f=i(t("pixi-gl-core")),p=i(t("../../core/utils/createIndicesForQuads")),n=(s.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,p.default)(this.size),this.indexBuffer=f.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r){var i=this.dynamicProperties[r];i.offset=e,e+=i.size,this.dynamicStride+=i.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=f.default.GLBuffer.createVertexBuffer(t,n,t.STREAM_DRAW);for(var o=0,s=this.staticStride=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=f.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new f.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var l=0;l<this.dynamicProperties.length;++l){var h=this.dynamicProperties[l];h.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,h.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*h.offset):this.vao.addAttribute(this.dynamicBuffer,h.attribute,t.FLOAT,!1,4*this.dynamicStride,4*h.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},s.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},s.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},s.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},s);function s(t,e,r,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,s),this.gl=t,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var o=e[n];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},r[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}r.default=n},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":12}],176:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n,p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),o=i(t("./ParticleShader")),a=i(t("./ParticleBuffer")),c=t("../../core/utils"),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,n=p.ObjectRenderer),u.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new o.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},u.prototype.start=function(){this.renderer.bindShader(this.shader)},u.prototype.render=function(t){var e=t.children,r=t._maxSize,i=t._batchSize,n=this.renderer,o=e.length;if(0!==o){r<o&&(o=r);var s=t._glBuffers[n.CONTEXT_UID];s=s||(t._glBuffers[n.CONTEXT_UID]=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.renderer.setBlendMode(p.utils.correctBlendMode(t.blendMode,a.premultipliedAlpha));var u=n.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=p.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(a);for(var h=0,c=0;h<o;h+=i,c+=1){var d=o-h;if(i<d&&(d=i),c>=s.length){if(!t.autoResize)break;s.push(this._generateOneMoreBuffer(t))}var f=s[c];f.uploadDynamic(e,h,d),t._bufferToUpdate===c&&(f.uploadStatic(e,h,d),t._bufferToUpdate=c+1),n.bindVao(f.vao),f.vao.draw(u.TRIANGLES,6*d)}}},u.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],i=t._maxSize,n=t._batchSize,o=t._properties,s=0;s<i;s+=n)r.push(new a.default(e,this.properties,o,n));return r},u.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,r=t._batchSize,i=t._properties;return new a.default(e,this.properties,i,r)},u.prototype.uploadVertices=function(t,e,r,i,n,o){for(var s=0,a=0,u=0,l=0,h=0;h<r;++h){var c=t[e+h],d=c._texture,f=c.scale.x,p=c.scale.y,_=d.trim,g=d.orig;_?(s=(a=_.x-c.anchor.x*g.width)+_.width,u=(l=_.y-c.anchor.y*g.height)+_.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,u=g.height*(1-c.anchor.y),l=g.height*-c.anchor.y),i[o]=a*f,i[o+1]=l*p,i[o+n]=s*f,i[o+n+1]=l*p,i[o+2*n]=s*f,i[o+2*n+1]=u*p,i[o+3*n]=a*f,i[o+3*n+1]=u*p,o+=4*n}},u.prototype.uploadPosition=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},u.prototype.uploadRotation=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},u.prototype.uploadUvs=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0),o+=4*n}},u.prototype.uploadTint=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s],u=a._texture.baseTexture.premultipliedAlpha,l=a.alpha,h=l<1&&u?(0,c.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);i[o]=h,i[o+n]=h,i[o+2*n]=h,i[o+3*n]=h,o+=4*n}},u.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),n.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},u);function u(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.shader=null,e.indexBuffer=null,e.properties=null,e.tempMatrix=new p.Matrix,e.CONTEXT_UID=0,e}r.default=s,p.WebGLRenderer.registerPlugin("particle",s)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(t,e,r){"use strict";r.__esModule=!0;var i,n=t("../../core/Shader"),o=n&&n.__esModule?n:{default:n},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,i=o.default),a);function a(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,i.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}r.default=s},{"../../core/Shader":44}],178:[function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1})},{}],179:[function(t,e,r){"use strict";var i=t("object-assign"),n=i&&i.__esModule?i:{default:i};Object.assign||(Object.assign=n.default)},{"object-assign":5}],180:[function(t,e,r){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(t,e,r){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n){var o=r[n];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],182:[function(t,e,r){"use strict";function i(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof h.Texture){var n=t._textures[i].baseTexture;-1===e.indexOf(n)&&(e.push(n),r=!0)}return r}function n(t,e){return t instanceof h.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function o(t,e){if(t._texture&&t._texture instanceof h.Texture){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function s(t,e){return e instanceof h.Text&&(e.updateText(!0),!0)}function a(t,e){if(e instanceof h.TextStyle){var r=e.toFontString();return h.TextMetrics.measureFont(r),!0}return!1}function u(t,e){if(t instanceof h.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function l(t,e){return t instanceof h.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}r.__esModule=!0;var h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../core")),c=t("./limiters/CountLimiter"),d=c&&c.__esModule?c:{default:c},f=h.ticker.shared;h.settings.UPLOADS_PER_FRAME=4;var p=(_.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,f.addOnce(this.tick,this,h.UPDATE_PRIORITY.UTILITY))):e&&e()},_.prototype.tick=function(){setTimeout(this.delayedTick,0)},_.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)f.addOnce(this.tick,this,h.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var n=this.completes.slice(0),o=this.completes.length=0,s=n.length;o<s;o++)n[o]()}},_.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},_.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},_.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof h.Container)for(var i=t.children.length-1;0<=i;i--)this.add(t.children[i]);return this},_.prototype.destroy=function(){this.ticking&&f.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},_);function _(t){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,_),this.limiter=new d.default(h.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(u),this.registerFindHook(l),this.registerFindHook(i),this.registerFindHook(n),this.registerFindHook(o),this.registerUploadHook(s),this.registerUploadHook(a)}r.default=p},{"../core":65,"./limiters/CountLimiter":185}],183:[function(t,e,r){"use strict";function i(t,e){if(e instanceof o.BaseTexture){var r=e.source,i=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),n=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,i,n,0,0,t.canvas.width,t.canvas.height),!0}return!1}r.__esModule=!0;var n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),s=t("../BasePrepare"),a=s&&s.__esModule?s:{default:s},u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,n=a.default),l.prototype.destroy=function(){n.prototype.destroy.call(this),this.ctx=null,this.canvas=null},l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return(e.uploadHookHelper=e).canvas=document.createElement("canvas"),e.canvas.width=16,e.canvas.height=16,e.ctx=e.canvas.getContext("2d"),e.registerUploadHook(i),e}r.default=u,o.CanvasRenderer.registerPlugin("prepare",u)},{"../../core":65,"../BasePrepare":182}],184:[function(t,e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}r.__esModule=!0;var n=t("./webgl/WebGLPrepare");Object.defineProperty(r,"webgl",{enumerable:!0,get:function(){return i(n).default}});var o=t("./canvas/CanvasPrepare");Object.defineProperty(r,"canvas",{enumerable:!0,get:function(){return i(o).default}});var s=t("./BasePrepare");Object.defineProperty(r,"BasePrepare",{enumerable:!0,get:function(){return i(s).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(r,"CountLimiter",{enumerable:!0,get:function(){return i(a).default}});var u=t("./limiters/TimeLimiter");Object.defineProperty(r,"TimeLimiter",{enumerable:!0,get:function(){return i(u).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.maxItemsPerFrame=t,this.itemsLeft=0}r.default=i},{}],186:[function(t,e,r){"use strict";r.__esModule=!0;var i=(n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n);function n(t){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,n),this.maxMilliseconds=t,this.frameStart=0}r.default=i},{}],187:[function(t,e,r){"use strict";function i(t,e){return e instanceof a.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function n(t,e){return e instanceof a.Graphics&&(!e.dirty&&!e.clearDirty&&e._webGL[t.plugins.graphics.CONTEXT_UID]||t.plugins.graphics.updateGraphics(e),!0)}function o(t,e){return t instanceof a.Graphics&&(e.push(t),!0)}r.__esModule=!0;var s,a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(t("../../core")),u=t("../BasePrepare"),l=u&&u.__esModule?u:{default:u},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,s=l.default),c);function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t));return e.uploadHookHelper=e.renderer,e.registerFindHook(o),e.registerUploadHook(i),e.registerUploadHook(n),e}r.default=h,a.WebGLRenderer.registerPlugin("prepare",h)},{"../../core":65,"../BasePrepare":182}],188:[function(g,t,v){(function(t){"use strict";function e(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}v.__esModule=!0,v.loader=v.prepare=v.particles=v.mesh=v.loaders=v.interaction=v.filters=v.extras=v.extract=v.accessibility=void 0;var r=g("./polyfill");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(v,t,{enumerable:!0,get:function(){return r[t]}})});var i=g("./core");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(v,t,{enumerable:!0,get:function(){return i[t]}})});var n=g("./deprecation"),o=n&&n.__esModule?n:{default:n},s=e(g("./accessibility")),a=e(g("./extract")),u=e(g("./extras")),l=e(g("./filters")),h=e(g("./interaction")),c=e(g("./loaders")),d=e(g("./mesh")),f=e(g("./particles")),p=e(g("./prepare"));i.utils.mixins.performMixins();var _=c.shared||null;v.accessibility=s,v.extract=a,v.extras=u,v.filters=l,v.interaction=h,v.loaders=c,v.mesh=d,v.particles=f,v.prepare=p,v.loader=_,"function"==typeof o.default&&(0,o.default)(v),t.PIXI=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){function i(t,e,r){return t.call.apply(t.bind,arguments)}function n(e,r,t){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,i),e.apply(r,t)}}return function(){return e.apply(r,arguments)}}function f(t,e,r){return(f=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:n).apply(null,arguments)}var a=Date.now||function(){return+new Date};function e(t,e){this.a=t,this.m=e||t,this.c=this.m.document}var u=!!window.FontFace;function l(t,e,r,i){if(e=t.c.createElement(e),r)for(var n in r)r.hasOwnProperty(n)&&("style"==n?e.style.cssText=r[n]:e.setAttribute(n,r[n]));return i&&e.appendChild(t.c.createTextNode(i)),e}function h(t,e,r){(t=(t=t.c.getElementsByTagName(e)[0])||document.documentElement).insertBefore(r,t.lastChild)}function r(t){t.parentNode&&t.parentNode.removeChild(t)}function p(t,e,r){e=e||[],r=r||[];for(var i=t.className.split(/\s+/),n=0;n<e.length;n+=1){for(var o=!1,s=0;s<i.length;s+=1)if(e[n]===i[s]){o=!0;break}o||i.push(e[n])}for(e=[],n=0;n<i.length;n+=1){for(o=!1,s=0;s<r.length;s+=1)if(i[n]===r[s]){o=!0;break}o||e.push(i[n])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(t,e){for(var r=t.className.split(/\s+/),i=0,n=r.length;i<n;i++)if(r[i]==e)return!0;return!1}function c(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function d(t,e,r){function i(){s&&n&&(s(o),s=null)}e=l(t,"link",{rel:"stylesheet",href:e,media:"all"});var n=!1,o=null,s=r||null;u?(e.onload=function(){n=!0,i()},e.onerror=function(){n=!0,o=Error("Stylesheet failed to load"),i()}):setTimeout(function(){n=!0,i()},0),h(t,"head",e)}function _(t,e,r,i){var n=t.c.getElementsByTagName("head")[0];if(n){var o=l(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,r&&r(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&n.removeChild(o))},n.appendChild(o),setTimeout(function(){s||(s=!0,r&&r(Error("Script load timeout")))},i||5e3),o}return null}function g(){this.a=0,this.c=null}function v(t){return t.a++,function(){t.a--,s(t)}}function y(t,e){t.c=e,s(t)}function s(t){0==t.a&&t.c&&(t.c(),t.c=null)}function m(t){this.a=t||"-"}function b(t,e){this.c=t,this.f=4,this.a="n";var r=(e||"n4").match(/^([nio])([1-9])$/i);r&&(this.a=r[1],this.f=parseInt(r[2],10))}function x(t){var e=[];t=t.split(/,\s*/);for(var r=0;r<t.length;r++){var i=t[r].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function T(t){return t.a+t.f}function w(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function S(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new m("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function E(t){if(t.g){var e=o(t.f,t.a.c("wf","active")),r=[],i=[t.a.c("wf","loading")];e||r.push(t.a.c("wf","inactive")),p(t.f,r,i)}C(t,"inactive")}function C(t,e,r){t.j&&t.h[e]&&(r?t.h[e](r.c,T(r)):t.h[e]())}function P(){this.c={}}function O(t,e){this.c=t,this.f=e,this.a=l(this.c,"span",{"aria-hidden":"true"},this.f)}function I(t){h(t.c,"body",t.a)}function M(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";font-style:"+w(t)+";font-weight:"+t.f+"00;"}function A(t,e,r,i,n,o){this.g=t,this.j=e,this.a=i,this.c=r,this.f=n||3e3,this.h=o||void 0}function R(t,e,r,i,n,o,s){this.v=t,this.B=e,this.c=r,this.a=i,this.s=s||"BESbswy",this.f={},this.w=n||3e3,this.u=o||null,this.o=this.j=this.h=this.g=null,this.g=new O(this.c,this.s),this.h=new O(this.c,this.s),this.j=new O(this.c,this.s),this.o=new O(this.c,this.s),t=M(t=new b(this.a.c+",serif",T(this.a))),this.g.a.style.cssText=t,t=M(t=new b(this.a.c+",sans-serif",T(this.a))),this.h.a.style.cssText=t,t=M(t=new b("serif",T(this.a))),this.j.a.style.cssText=t,t=M(t=new b("sans-serif",T(this.a))),this.o.a.style.cssText=t,I(this.g),I(this.h),I(this.j),I(this.o)}m.prototype.c=function(t){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},A.prototype.start=function(){var n=this.c.m.document,o=this,s=a(),t=new Promise(function(r,i){!function e(){var t;a()-s>=o.f?i():n.fonts.load(w(t=o.a)+" "+t.f+"00 300px "+x(t.c),o.h).then(function(t){1<=t.length?r():setTimeout(e,25)},function(){i()})}()}),e=new Promise(function(t,e){setTimeout(e,o.f)});Promise.race([e,t]).then(function(){o.g(o.a)},function(){o.j(o.a)})};var D={D:"serif",C:"sans-serif"},k=null;function L(){if(null===k){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);k=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)}return k}function F(t,e,r){for(var i in D)if(D.hasOwnProperty(i)&&e===t.f[D[i]]&&r===t.f[D[i]])return!0;return!1}function B(t){var e,r=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=r===t.f.serif&&i===t.f["sans-serif"])||(e=L()&&F(t,r,i)),e?a()-t.A>=t.w?L()&&F(t,r,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?N(t,t.v):N(t,t.B):setTimeout(f(function(){B(this)},t),50):N(t,t.v)}function N(t,e){setTimeout(f(function(){r(this.g.a),r(this.h.a),r(this.j.a),r(this.o.a),e(this.a)},t),0)}function j(t,e,r){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=r}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=a(),B(this)};var X=null;function U(t){0==--t.f&&t.j&&(t.o?((t=t.a).g&&p(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),C(t,"active")):E(t.a))}function t(t){this.j=t,this.a=new P,this.h=0,this.f=this.g=!0}function G(t,e){this.c=t,this.a=e}function W(t,e){this.c=t,this.a=e}function H(t,e,r){this.c=t||e+"//fonts.googleapis.com/css",this.a=[],this.f=[],this.g=r||""}j.prototype.g=function(t){var e=this.a;e.g&&p(e.f,[e.a.c("wf",t.c,T(t).toString(),"active")],[e.a.c("wf",t.c,T(t).toString(),"loading"),e.a.c("wf",t.c,T(t).toString(),"inactive")]),C(e,"fontactive",t),this.o=!0,U(this)},j.prototype.h=function(t){var e=this.a;if(e.g){var r=o(e.f,e.a.c("wf",t.c,T(t).toString(),"active")),i=[],n=[e.a.c("wf",t.c,T(t).toString(),"loading")];r||i.push(e.a.c("wf",t.c,T(t).toString(),"inactive")),p(e.f,i,n)}C(e,"fontinactive",t),U(this)},t.prototype.load=function(t){this.c=new e(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(n,t,e){var r=[],i=e.timeout;!function(t){t.g&&p(t.f,[t.a.c("wf","loading")]),C(t,"loading")}(t);r=function(t,e,r){var i,n=[];for(i in e)if(e.hasOwnProperty(i)){var o=t.c[i];o&&n.push(o(e[i],r))}return n}(n.a,e,n.c);var o=new j(n.c,t,i);for(n.h=r.length,t=0,e=r.length;t<e;t++)r[t].load(function(t,e,r){var i,u,l,h,c,d;u=o,l=t,h=e,c=r,d=0==--(i=n).h,(i.f||i.g)&&setTimeout(function(){var t=c||null,e=h||{};if(0===l.length&&d)E(u.a);else{u.f+=l.length,d&&(u.j=d);var r,i=[];for(r=0;r<l.length;r++){var n=l[r],o=e[n.c],s=u.a,a=n;s.g&&p(s.f,[s.a.c("wf",a.c,T(a).toString(),"loading")]),C(s,"fontloading",a),(s=null)===X&&(X=!!window.FontFace&&(!(a=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(a[1],10))),s=X?new A(f(u.g,u),f(u.h,u),u.c,n,u.s,o):new R(f(u.g,u),f(u.h,u),u.c,n,u.s,t,o),i.push(s)}for(r=0;r<i.length;r++)i[r].start()}},0)})}(this,new S(this.c,t),t)},G.prototype.load=function(s){var t,e,r,i=this,a=i.a.projectId,n=i.a.version;if(a){var u=i.c.m;_(this.c,(e=a,r=n,c((t=i).c)+"//"+(t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""))+"/"+e+".js"+(r?"?v="+r:"")),function(t){t?s([]):(u["__MonotypeConfiguration__"+a]=function(){return i.a},function t(){if(u["__mti_fntLst"+a]){var e,r=u["__mti_fntLst"+a](),i=[];if(r)for(var n=0;n<r.length;n++){var o=r[n].fontfamily;null!=r[n].fontStyle&&null!=r[n].fontWeight?(e=r[n].fontStyle+r[n].fontWeight,i.push(new b(o,e))):i.push(new b(o))}s(i)}else setTimeout(function(){t()},50)}())}).id="__MonotypeAPIScript__"+a}else s([])},W.prototype.load=function(t){var e,r,i=this.a.urls||[],n=this.a.families||[],o=this.a.testStrings||{},s=new g;for(e=0,r=i.length;e<r;e++)d(this.c,i[e],v(s));var a=[];for(e=0,r=n.length;e<r;e++)if((i=n[e].split(":"))[1])for(var u=i[1].split(","),l=0;l<u.length;l+=1)a.push(new b(i[0],u[l]));else a.push(new b(i[0]));y(s,function(){t(a,o)})};function z(t){this.f=t,this.a=[],this.c={}}var Y={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},V={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},q={i:"i",italic:"i",n:"n",normal:"n"},Z=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function K(t,e){this.c=t,this.a=e}var Q={Arimo:!0,Cousine:!0,Tinos:!0};function J(t,e){this.c=t,this.a=e}function $(t,e){this.c=t,this.f=e,this.a=[]}K.prototype.load=function(t){var e=new g,r=this.c,i=new H(this.a.api,c(r),this.a.text),n=this.a.families;!function(t,e){for(var r=e.length,i=0;i<r;i++){var n=e[i].split(":");3==n.length&&t.f.push(n.pop());var o="";2==n.length&&""!=n[1]&&(o=":"),t.a.push(n.join(o))}}(i,n);var o=new z(n);!function(t){for(var e=t.f.length,r=0;r<e;r++){var i=t.f[r].split(":"),n=i[0].replace(/\+/g," "),o=["n4"];if(2<=i.length){var s;if(s=[],a=i[1])for(var a,u=(a=a.split(",")).length,l=0;l<u;l++){var h;if((h=a[l]).match(/^[\w-]+$/))if(null==(d=Z.exec(h.toLowerCase())))h="";else{if(h=null==(h=d[2])||""==h?"n":q[h],null==(d=d[1])||""==d)d="4";else var c=V[d],d=c||(isNaN(d)?"4":d.substr(0,1));h=[h,d].join("")}else h="";h&&s.push(h)}0<s.length&&(o=s),3==i.length&&(s=[],0<(i=(i=i[2])?i.split(","):s).length&&(i=Y[i[0]])&&(t.c[n]=i))}for(t.c[n]||(i=Y[n])&&(t.c[n]=i),i=0;i<o.length;i+=1)t.a.push(new b(n,o[i]))}}(o),d(r,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,r=[],i=0;i<e;i++)r.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+r.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}(i),v(e)),y(e,function(){t(o.a,o.c,Q)})},J.prototype.load=function(s){var t=this.a.id,a=this.c.m;t?_(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",function(t){if(t)s([]);else if(a.Typekit&&a.Typekit.config&&a.Typekit.config.fn){t=a.Typekit.config.fn;for(var e=[],r=0;r<t.length;r+=2)for(var i=t[r],n=t[r+1],o=0;o<n.length;o++)e.push(new b(i,n[o]));try{a.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}s(e)}},2e3):s([])},$.prototype.load=function(l){var t,e=this.f.id,r=this.c.m,h=this;e?(r.__webfontfontdeckmodule__||(r.__webfontfontdeckmodule__={}),r.__webfontfontdeckmodule__[e]=function(t,e){for(var r=0,i=e.fonts.length;r<i;++r){var n=e.fonts[r];h.a.push(new b(n.name,(o="font-weight:"+n.weight+";font-style:"+n.style,u=a=s=void 0,s=4,a="n",u=null,o&&((u=o.match(/(normal|oblique|italic)/i))&&u[1]&&(a=u[1].substr(0,1).toLowerCase()),(u=o.match(/([1-9]00|normal|bold)/i))&&u[1]&&(/bold/i.test(u[1])?s=7:/[1-9]00/.test(u[1])&&(s=parseInt(u[1].substr(0,1),10)))),a+s)))}var o,s,a,u;l(h.a)},_(this.c,c(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+((t=this.c).m.location.hostname||t.a.location.hostname)+"/"+e+".js",function(t){t&&l([])})):l([])};var tt=new t(window);tt.a.c.custom=function(t,e){return new W(e,t)},tt.a.c.fontdeck=function(t,e){return new $(e,t)},tt.a.c.monotype=function(t,e){return new G(e,t)},tt.a.c.typekit=function(t,e){return new J(e,t)},tt.a.c.google=function(t,e){return new K(e,t)};var et={load:f(tt.load,tt)};"function"==typeof define&&define.amd?define(function(){return et}):"undefined"!=typeof module&&module.exports?module.exports=et:(window.WebFont=et,window.WebFontConfig&&tt.load(window.WebFontConfig))}();var VERSION="1.2.5",src={bitmaps:{bg:"assets/level_3/bg.png",sky:"assets/level_3/sky.png",bushes:"assets/level_3/bushes.png",tree:"assets/level_3/tree.png",bench:"assets/level_3/bench.png",tree1:"assets/level_3/tree1.png",skyline0:"assets/level_3/skyline0.png",skyline1:"assets/level_3/skyline1.png",skyline2:"assets/level_3/skyline2.png",city_sky:"assets/level_2/city_sky.png",city_skyline:"assets/level_2/city_skyline.png",buildings:"assets/level_2/buildings.png",city_tree:"assets/level_2/city_tree.png",hydrant:"assets/level_2/hydrant.png",light_posts:"assets/level_2/light_posts.png",meters:"assets/level_2/meters.png",city_ground:"assets/level_2/city_ground.png",buildings_night:"assets/level_1/buildings_night.png",ground_night:"assets/level_1/ground_night.png",hydrant_night:"assets/level_1/hydrant_night.png",meters__night:"assets/level_1/meters__night.png",sky__night:"assets/level_1/sky__night.png",tree_night:"assets/level_1/tree_night.png",night_skyline:"assets/level_1/night_skyline.png",wall:"assets/level_4/wall.png",top_stalactites:"assets/level_4/top_stalactites.png",silhouette_stalactites:"assets/level_4/silhouette_stalactites.png",side_spikes:"assets/level_4/side_spikes.png",grass:"assets/level_4/grass.png",caves:"assets/level_4/caves.png",cage:"assets/level_4/cage.png",l5_buildings:"assets/level_5/buildings.png",l5_city_skyline:"assets/level_5/city_skyline.png",l5_explosion_hole:"assets/level_5/explosion_hole.png",l5_ground:"assets/level_5/ground.png",l5_hydrant:"assets/level_5/hydrant.png",l5_sky:"assets/level_5/sky.png",l5_meters:"assets/level_5/meters.png",l5_rubble:"assets/level_5/rubble.png",title_cn:"assets/title/cn_logo.png",title_brand:"assets/title/brand_logo.png",title_bg:"assets/title/title_bg.png",title_characters:"assets/title/TTG_TitleScreen_CharactersGrouped.png",title_ball:"assets/title/ball.png",plus_btn_h:"assets/buttons/plus_btn_h.png",plus_btn_i:"assets/buttons/plus_btn_i.png",plus_btn_n:"assets/buttons/plus_btn_n.png",plus_btn_p:"assets/buttons/plus_btn_p.png",green_btn_h:"assets/buttons/green_btn_h.png",green_btn_i:"assets/buttons/green_btn_i.png",green_btn_n:"assets/buttons/green_btn_n.png",green_btn_p:"assets/buttons/green_btn_p.png",ok_btn_h:"assets/buttons/ok_btn_h.png",ok_btn_n:"assets/buttons/ok_btn_n.png",ok_btn_p:"assets/buttons/ok_btn_p.png",soundOFF_btn_h:"assets/buttons/soundOFF_btn_h.png",soundOFF_btn_n:"assets/buttons/soundOFF_btn_n.png",soundOFF_btn_p:"assets/buttons/soundOFF_btn_p.png",soundON_btn_h:"assets/buttons/soundON_btn_h.png",soundON_btn_n:"assets/buttons/soundON_btn_n.png",soundON_btn_p:"assets/buttons/soundON_btn_p.png",video_btn_h:"assets/buttons/video_btn_h.png",video_btn_i:"assets/buttons/video_btn_i.png",video_btn_n:"assets/buttons/video_btn_n.png",video_btn_p:"assets/buttons/video_btn_p.png",x_btn_h:"assets/buttons/x_btn_h.png",x_btn_n:"assets/buttons/x_btn_n.png",x_btn_p:"assets/buttons/x_btn_p.png",musicOFF_btn_off:"assets/buttons/musicOFF_btn_off.png",musicOFF_btn_p:"assets/buttons/musicOFF_btn_p.png",musicON_btn_n:"assets/buttons/musicON_btn_n.png",musicON_btn_p:"assets/buttons/musicON_btn_p.png",musicON_btn_h:"assets/buttons/musicON_btn_h.png",soundOFF_btn_off:"assets/buttons/soundOFF_btn_off.png",settings_btn_n:"assets/buttons/settings_btn_n.png",settings_btn_p:"assets/buttons/settings_btn_p.png",settings_btn_h:"assets/buttons/settings_btn_h.png",play_btn_g:"assets/buttons/play_btn_g.png",play_btn_h:"assets/buttons/play_btn_h.png",play_btn_n:"assets/buttons/play_btn_n.png",play_btn_p:"assets/buttons/play_btn_p.png",shop_btn_h:"assets/buttons/shop_btn_h.png",shop_btn_n:"assets/buttons/shop_btn_n.png",shop_btn_p:"assets/buttons/shop_btn_p.png",coin_btn_g:"assets/buttons/coin_btn_g.png",coin_btn_h:"assets/buttons/coin_btn_h.png",coin_btn_n:"assets/buttons/coin_btn_n.png",coin_btn_p:"assets/buttons/coin_btn_p.png",home_btn_h:"assets/buttons/home_btn_h.png",home_btn_n:"assets/buttons/home_btn_n.png",home_btn_p:"assets/buttons/home_btn_p.png",pause_btn_h:"assets/buttons/pause_btn_h.png",pause_btn_n:"assets/buttons/pause_btn_n.png",pause_btn_p:"assets/buttons/pause_btn_p.png",troll:"assets/sprites/troll.png",raven:"assets/sprites/raven.png",character_sprite_beastboy:"assets/sprites/character_sprite_beastboy.png",character_sprite_robin:"assets/sprites/character_sprite_robin.png",character_sprite_starfire:"assets/sprites/character_sprite_starfire.png",cyborg_run:"assets/sprites/cyborg_run.png",cyborg_fall:"assets/sprites/cyborg_fall.png",trollKing:"assets/sprites/troll_king_sprite.png",ribbon_0:"assets/ribbon_bb.png",ribbon_1:"assets/ribbon_cy.png",ribbon_2:"assets/ribbon_raven.png",ribbon_3:"assets/ribbon_robin.png",ribbon_4:"assets/ribbon_star.png",score_ribbon:"assets/score_ribbon.png",BB_frame:"assets/BB_frame.png",Cy_frame:"assets/Cy_frame.png",Raven_frame:"assets/Raven_frame.png",Robin_frame:"assets/Robin_frame.png",Star_frame:"assets/Star_frame.png",big_info_panel:"assets/big_info_panel.png",timePlus:"assets/timeplus.png",timeMinus:"assets/timeminus.png",p0:"assets/particle_0.png",p1:"assets/particle_1.png",p2:"assets/particle_2.png",p3:"assets/particle_3.png",in_target_r:"assets/in_target_r.png",in_target_w:"assets/in_target_w.png",out_target_r:"assets/out_target_r.png",out_target_w:"assets/out_target_w.png",aim:"assets/aim.png",darken_bg:"assets/darken_bg.png",gr_bg:"assets/gr_bg.png",hud_panel:"assets/hud_panel.png",led_panel:"assets/led_panel.png",rain_loop:"assets/rain_loop.png",select_frame:"assets/select_frame.png",stage_light:"assets/stage_light.png",tick_icon:"assets/tick_icon.png",time_icon:"assets/time_icon.png",time_up_icon:"assets/time_up_icon.png",ball:"assets/ball.png",goal_1:"assets/Goal_1.png",scoreboard:"assets/scoreboard_3.png",raven_head:"assets/raven_head.png",raven_shadow:"assets/raven_shadow.png",hit:"assets/hit.png",effect:"assets/effect.png",effect_1:"assets/effect_1.png",tutorial:"assets/tutorial.png",tutorial2:"assets/tutorial2.png",coin_s_icon:"assets/coin_s_icon.png",coin_xl_icon:"assets/coin_xl_icon.png",coins_5:"assets/coins_5.png",coins_20:"assets/coins_20.png",coins_50:"assets/coins_50.png"},sprites:{character_beastboy:{source:"character_sprite_beastboy",frames:33,frameWidth:248,frameHeight:168},character_robin:{source:"character_sprite_robin",frames:35,frameWidth:260,frameHeight:248},character_starfire:{source:"character_sprite_starfire",frames:30,frameWidth:376,frameHeight:260},character_cyborg:{source:"cyborg_run",frames:14,frameWidth:242,frameHeight:258},character_cyborg_fall:{source:"cyborg_fall",frames:2,frameWidth:328,frameHeight:258},raven:{source:"raven",frames:34,frameWidth:269,frameHeight:225},troll_king:{source:"trollKing",frames:7,frameWidth:253,frameHeight:258},troll:{source:"troll",frames:11,frameWidth:160,frameHeight:134},hit:{source:"hit",frames:7,frameWidth:260,frameHeight:291}}},Game=function(){var r,i,u,h,y,m,n,o,c,s,a,l,b,_,x,g,e,T,d,f,v=!1,p=!1,w=!1,S=!0,E=!1,C=!0,P=!1,t=!1,O=0,I=null,M=null,A=!1,R=20,D=70,k=5,L=100,F=.05,B=[{id:2,img:"Raven_frame",cost:0,bonus:0,unlocked:!0},{id:1,img:"Cy_frame",cost:1e3,bonus:5,unlocked:!1},{id:4,img:"Star_frame",cost:1500,bonus:10,unlocked:!1},{id:0,img:"BB_frame",cost:2500,bonus:15,unlocked:!1},{id:3,img:"Robin_frame",cost:3e3,bonus:20,unlocked:!1}],N={hasFocus:!0,create:function(){PIXI.loader.add("config","config.json"),PIXI.loader.once("complete",function(){I=PIXI.loader.resources.config.data,VERSION=I.version,WebFont.load({active:pt,custom:{families:["FredBurger Black"],urls:["ar"!=I.language?"assets/fonts/fredburger.css":"assets/fonts/fredburger_arabic.css"]}})}),window.addEventListener("blur",N.OnWindowBlur.bind(this)),window.addEventListener("focus",N.OnWindowFocus.bind(this)),document.addEventListener("visibilitychange",N.OnVisibilityChange.bind(this)),PIXI.loader.load()},OnWindowBlur:function(){N.hasFocus=!1,xt()},OnWindowFocus:function(){N.hasFocus=!0,Tt()},OnVisibilityChange:function(){"hidden"==document.visibilityState?N.OnWindowBlur():N.OnWindowFocus()},freeze:function(){xt()},unfreeze:function(){Tt()}},j={TITLE:"title",PAUSE:"pause",SHOP:"shop",PLAY:"play",SHOWAD:"showAd"},X={highscore:0,defaultState:{extraTime:0,inTutorial:[1,1],playerCoins:0,charactersUnlocked:[1,0,0,0,0],sfx:!0,music:!0},saveData:{extraTime:0,inTutorial:[1,1],playerCoins:0,charactersUnlocked:[1,0,0,0,0],sfx:!0,music:!0},play:function(){Tt()},pause:function(){xt()},init:function(){X.highscore=0,X.getSaveData()},setHighScore:function(t){X.highscore=t,this.setSaveData()},setSaveData:function(){var t={inTutorial:X.saveData.inTutorial,playerCoins:X.saveData.playerCoins,charactersUnlocked:X.saveData.charactersUnlocked,sfx:X.saveData.sfx,music:X.saveData.music,highscore:X.highscore};localStorage.setItem("teen_titans_goal",JSON.stringify(t))},getSaveData:function(t){var e=localStorage.getItem("teen_titans_goal");if(e){var r=JSON.parse(e);X.saveData.inTutorial=r.inTutorial||[1,1],X.saveData.playerCoins=r.playerCoins||0,X.saveData.charactersUnlocked=r.charactersUnlocked||[1,0,0,0,0],X.saveData.sfx=r.sfx,X.saveData.music=r.music,X.highscore=r.highscore,p=!X.saveData.music,w=!X.saveData.sfx,X.saveData.sfx||te.muteGroup("SFX"),X.saveData.music||te.muteGroup("Music")}t&&t()},trackPlayAnalytics:function(t){X.sdk&&X.sdk.analytics.trackPlay(t)},getLocalisation:function(t){return i[t]?i[t][I.language]:""}},U=640,G=1137,W=0,H=0,z={},Y=0,V=0,q=300,Z=350,K=0,Q=4,J=0,$=!0,tt=!0,et=!1,rt=0,it=1,nt=0,ot=0,st=0,at=0,ut=0,lt=0,ht=0,ct=0,dt=0,ft=0;function pt(){(u=new PIXI.Application(U,G,{roundPixels:!1,sharedTicker:!0,resolution:1,antialias:!1,transparent:!0})).view.style.width="100%",u.view.style.width="100%",document.getElementById("gm4html5_div_id").appendChild(u.view),u.ticker.autoStart=!1,u.ticker.stop(),u.ticker.add(Mt);var t=navigator.userAgent;A=!/Mobi|Android|iP[ao]d|iPhone/i.test(t)&&(!/Mac/.test(t)||!navigator.maxTouchPoints||navigator.maxTouchPoints<=1),function(){var t=document.getElementById("gm4html5_div_id"),e=window.innerWidth/U,r=window.innerHeight/G,i=1,n=0,o=0,s=0,a=0;o=e<r?(s=U*e,a=G*e,i=e,n=0,(window.innerHeight-a)/i):(s=U*r,a=G*r,i=r,n=(window.innerWidth-s)/i,0);n=Math.max(Math.min(n,254),0),o=Math.max(o,0),t.style.width="100%",t.style.height="100%",A?(t.style.width=s+"px",t.style.height=a+"px",t.style.marginLeft=(window.innerWidth-s)/2+"px",o=n=0):(t.style.width="100%",t.style.height="100%");t.style.backgroundSize=856*i+"px "+1390*i+"px",t.style.backgroundPosition="center "+(o/2-125)+"px",t.style.backgroundImage='url("assets/loading_bg.png")',W=n,H=o,u.renderer.resize(U+n,G+o)}(),(r=new PIXI.Container).x=115+W/2,r.y=410+H/2,u.stage.addChild(r),r.empty=PIXI.Sprite.fromImage("assets/loading_bar_empty.png"),r.full=PIXI.Sprite.fromImage("assets/loading_bar_full.png"),r.addChild(r.empty),r.addChild(r.full);var e=new PIXI.Graphics;e.beginFill(0),e.drawRect(0,0,0,94),r.addChild(e),r.full.mask=e,setTimeout(function(){!function(){for(var t in te.register("bg",new Howl({src:["assets/sounds/music_loop.mp3"],loop:!0,volume:.5}),"Music"),te.register("end_screen_coins_multiple",new Howl({src:["assets/sounds/end_screen_coins_multiple.mp3"]}),"SFX"),te.register("coins",new Howl({src:["assets/sounds/coins.mp3"]}),"SFX"),te.register("fail",new Howl({src:["assets/sounds/fail_all.mp3"]}),"SFX"),te.register("goal",new Howl({src:["assets/sounds/goal_all.mp3"]}),"SFX"),te.register("kick",new Howl({src:["assets/sounds/kick.mp3"]}),"SFX"),te.register("item_bought",new Howl({src:["assets/sounds/item_bought.mp3"]}),"SFX"),te.register("click",new Howl({src:["assets/sounds/button.mp3"]}),"SFX"),src.bitmaps)PIXI.loader.add(t,src.bitmaps[t]);PIXI.loader.add("title_logo","assets/title/ttg_logo_"+I.language+".png"),PIXI.loader.add("localisation","assets/localisation.json"),PIXI.loader.on("progress",jt),PIXI.loader.load(Xt)}()},1),X.init()}function _t(){X.getSaveData(function(){nt=X.saveData.playerCoins;for(var t=0;t<X.saveData.charactersUnlocked.length;t++)B[t].unlocked=X.saveData.charactersUnlocked[t],0<t&&X.saveData.charactersUnlocked[t]&&(it+=F);!function(){for(var t in src.sprites){var e=PIXI.ParseTile(src.sprites[t]);z[t]=e}h=new SContainer,u.stage.addChild(h),g=[],T=new SContainer,u.stage.addChild(T),(s=new Ee(PIXI.utils.TextureCache.pause_btn_n)).anchor.set(.5),s.x=575/U*(U+W),s.y=95,s.registerState("down",PIXI.utils.TextureCache.pause_btn_p),s.registerState("hover",PIXI.utils.TextureCache.pause_btn_h),s.visible=!1,T.addChildZ(s,70),s.on("pointertap",Et);var r=PIXI.Sprite.fromFrame("scoreboard");r.anchor.x=.5,r.x=320/U*(U+W),r.y=53,T.addChildZ(r,50),(l=new PIXI.Text("0",{font:"60px FredBurger Black",fill:16777215,align:"right"})).anchor.x=1,l.x=r.x+160,l.y=80,T.addChildZ(l,50),(a=new PIXI.Text("0",{font:"60px FredBurger Black",fill:16777215,align:"right"})).anchor.x=1,a.x=r.x+160,a.y=173,T.addChildZ(a,50),(m=new Animable(z.raven[0])).anchor.y=1,m.anchor.x=.5,m.x=80,m.y=800,T.addChildZ(m,7),Animator.add("player",m),(c=PIXI.Sprite.fromFrame("raven_shadow")).anchor.x=.5,c.x=70,c.y=795,T.addChildZ(c,6),(y=PIXI.Sprite.fromFrame("in_target_w")).anchor.set(.5),y.x=150+W/2,y.y=700,T.addChildZ(y,9);var i=PIXI.Sprite.fromFrame("out_target_w");i.scale.set(1.2),i.anchor.set(.5),i.x=0,i.y=0,y.addChild(i),y.outLine=i,(n=PIXI.Sprite.fromFrame("darken_bg")).width=U+W,n.height=G+H,u.stage.addChild(n),(f=new ce(B)).on("start",gt),f.on("settings",Ct),f.on("buy",wt),f.setEnable(!1),u.stage.addChild(f),(o=new ie).on("addTime",St),o.setEnable(!1),u.stage.addChild(o),(d=new oe).on("start",gt),d.on("settings",Ct),d.on("shop",Ot),u.stage.addChild(d),d.bestScore=X.highscore,u.render(),X.trackPlayAnalytics(j.TITLE),te.playLoop("bg")}(),u.stage.interactive=!0,u.stage.on("pointerdown",function(t){!function(t){if(t.target instanceof Ee)return;if(C||!E||S||!v)return;Dt(),t.stopPropagation()}(t)}),(M=keyboard(" ")).press=Dt,document.addEventListener("keydown",function(t){!function(t){if(C||!E||S||!v)return;P&&P==t.keyCode||(P=t.keyCode,t.keyCode)}(t)}),document.addEventListener("keyup",function(t){P==t.keyCode&&(P=null)}),function(){if(!S)return;S=!1,u.ticker.start()}()})}function gt(t){X.trackPlayAnalytics(j.PLAY),J=t,function(){T.overlay&&(T.removeChild(T.overlay),T.overlay=null);te.playLoop("bg"),tt=X.saveData.inTutorial[0],$=X.saveData.inTutorial[1],_canContinue=!0,ot=ft=ht=lt=ut=at=st=rt=dt=ct=0,b=Gt(b),x=Gt(x),_=Gt(_),e=Gt(e),g=Gt(g),ParticleManager.clear(),Animator.clear(),function(t){J=t;for(;h.children.length;)h.children.shift();switch(t){case 0:var e=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.sky,U+W,720);h.addChildZ(e,0),skyline1=PIXI.Sprite.fromFrame("skyline0"),skyline1.y=455+H/2,h.addChildZ(skyline1,1),skyline2=PIXI.Sprite.fromFrame("skyline1"),skyline2.x=640,skyline2.y=455+H/2,h.addChildZ(skyline2,2),skyline3=PIXI.Sprite.fromFrame("skyline2"),skyline3.x=1280,skyline3.y=455+H/2,h.addChildZ(skyline3,2);var r=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.bushes,U+W,115);r.y=588+H/2,h.addChildZ(r,2),(n=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.bg,U+W,Math.min(646,G+H-675))).y=675+H/2,h.addChildZ(n,3),$t.clearLayers(),$t.registerTileLayer(e,.25),$t.registerStaticLayer(skyline1,1/3),$t.registerStaticLayer(skyline2,1/3),$t.registerStaticLayer(skyline3,1/3),$t.registerTileLayer(r,1/1.5),$t.registerTileLayer(n,1),m.x=80+W/2,m.y=m.base=800+H/2,m.texture=z.raven[0],m.addAnimation("fall",z.raven,[0,1]),m.addAnimation("kick",z.raven,[32,33]),m.addAnimation("head",z.raven,[28,29,30]),m.addAnimation("run",z.raven,[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]),c.x=70+W/2,c.y=795+H/2,c.visible=!0;break;case 1:e=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.city_sky,U+W,719);h.addChildZ(e,0),skyline1=PIXI.Sprite.fromFrame("city_skyline"),skyline1.y=60+H/2,h.addChildZ(skyline1,1),skyline2=PIXI.Sprite.fromFrame("city_skyline"),skyline2.x=640,skyline2.y=60+H/2,h.addChildZ(skyline2,2),skyline3=PIXI.Sprite.fromFrame("city_skyline"),skyline3.x=1280,skyline3.y=60+H/2,h.addChildZ(skyline3,3),(i=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.buildings,U+W,582)).y=143+H/2,h.addChildZ(i,2),(n=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.city_ground,U+W,542)).y=720+H/2,h.addChildZ(n,3),$t.clearLayers(),$t.registerTileLayer(e,.25),$t.registerStaticLayer(skyline1,1/3),$t.registerStaticLayer(skyline2,1/3),$t.registerStaticLayer(skyline3,1/3),$t.registerTileLayer(i,1),$t.registerTileLayer(n,1),m.x=80+W/2,m.y=m.base=800+H/2,m.texture=z.character_cyborg[0],m.addAnimation("fall",z.character_cyborg_fall,[0,1]),m.addAnimation("kick",z.character_cyborg,[1,1]),m.addAnimation("head",z.character_cyborg,[0,0]),m.addAnimation("run",z.character_cyborg,[2,3,4,5,6,7,8,9,10,11,12,13]),c.visible=!1;break;case 2:e=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.l5_sky,U+W,719);h.addChildZ(e,0),skyline1=PIXI.Sprite.fromFrame("l5_city_skyline"),skyline1.y=60+H/2,h.addChildZ(skyline1,1),skyline2=PIXI.Sprite.fromFrame("l5_city_skyline"),skyline2.x=640,skyline2.y=60+H/2,h.addChildZ(skyline2,2),skyline3=PIXI.Sprite.fromFrame("l5_city_skyline"),skyline3.x=1280,skyline3.y=60+H/2,h.addChildZ(skyline3,3),(i=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.l5_buildings,U+W,582)).y=143+H/2,h.addChildZ(i,2),(n=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.l5_ground,U+W,542)).y=720+H/2,h.addChildZ(n,3),$t.clearLayers(),$t.registerTileLayer(e,.25),$t.registerStaticLayer(skyline1,1/3),$t.registerStaticLayer(skyline2,1/3),$t.registerStaticLayer(skyline3,1/3),$t.registerTileLayer(i,1),$t.registerTileLayer(n,1),m.x=80+W/2,m.y=m.base=820+H/2,m.texture=z.character_starfire[0],m.addAnimation("fall",z.character_starfire,[0,1,2]),m.addAnimation("kick",z.character_starfire,[28,29]),m.addAnimation("head",z.character_starfire,[27,27,27]),m.addAnimation("run",z.character_starfire,[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26]),c.x=60+W/2,c.y=820+H/2,c.visible=!0;break;case 3:var i,n;e=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.sky__night,U+W,720);h.addChildZ(e,0),skyline1=PIXI.Sprite.fromFrame("night_skyline"),skyline1.y=60+H/2,h.addChildZ(skyline1,1),skyline2=PIXI.Sprite.fromFrame("night_skyline"),skyline2.x=640,skyline2.y=60+H/2,h.addChildZ(skyline2,2),skyline3=PIXI.Sprite.fromFrame("night_skyline"),skyline3.x=1280,skyline3.y=60+H/2,h.addChildZ(skyline3,2),(i=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.buildings_night,U+W,653)).y=77+H/2,h.addChildZ(i,2),(n=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.ground_night,U+W,542)).y=720+H/2,h.addChildZ(n,3),$t.clearLayers(),$t.registerTileLayer(e,.25),$t.registerStaticLayer(skyline1,1/3),$t.registerStaticLayer(skyline2,1/3),$t.registerStaticLayer(skyline3,1/3),$t.registerTileLayer(i,1),$t.registerTileLayer(n,1),m.x=80+W/2,m.y=m.base=810+H/2,m.texture=z.character_beastboy[0],m.addAnimation("fall",z.character_beastboy,[1,2]),m.addAnimation("kick",z.character_beastboy,[32,32]),m.addAnimation("head",z.character_beastboy,[3,4,4]),m.addAnimation("run",z.character_beastboy,[5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]),c.visible=!1;break;case 4:var o=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.caves,U+W,202);o.y=279+H/2,h.addChildZ(o,0),skyline1=PIXI.Sprite.fromFrame("top_stalactites"),skyline1.y=H/2-127,h.addChildZ(skyline1,1),skyline2=PIXI.Sprite.fromFrame("top_stalactites"),skyline2.x=640,skyline2.y=H/2-127,h.addChildZ(skyline2,1),skyline3=PIXI.Sprite.fromFrame("top_stalactites"),skyline3.x=1280,skyline3.y=H/2-127,h.addChildZ(skyline3,1);var s=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.silhouette_stalactites,U+W,213);s.y=H/2-127,h.addChildZ(s,2);var a=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.side_spikes,U+W,100);a.y=404+H/2,h.addChildZ(a,2);var u=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.wall,U+W,295);u.y=465+H/2,h.addChildZ(u,3);var l=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.grass,U+W,503);l.y=760+H/2,h.addChildZ(l,4),$t.clearLayers(),$t.registerTileLayer(o,.25),$t.registerStaticLayer(skyline1,1/3),$t.registerStaticLayer(skyline2,1/3),$t.registerStaticLayer(skyline3,1/3),$t.registerTileLayer(s,1/1.5),$t.registerTileLayer(a,1),$t.registerTileLayer(u,1),$t.registerTileLayer(l,1),m.x=80+W/2,m.y=m.base=810+H/2,m.texture=z.character_robin[0],m.addAnimation("fall",z.character_robin,[1,2]),m.addAnimation("kick",z.character_robin,[4,5]),m.addAnimation("head",z.character_robin,[3,3,3]),m.addAnimation("run",z.character_robin,[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34]),c.visible=!1}}(J),C=!1,v=E=!0,n.visible=!1,o.visible=!1,f.visible=!1,d.visible=!1,n.visible=!1,s.visible=!0,rt=0,Y=R+V,0,q=300,bt(),It(),tt?function(t,e){var r=e,i=Math.atan2(r-t,y.x-t),n=new we(780+H/2);n.x=650+W/2,n.y=r+H/2,n.active=!0,n.kicked=!1,T.addChildZ(n,8),b.push(n),n.addForce(7*-Math.cos(i),7*-Math.sin(i))}(500,500):K=0;m.setAnimation("run",-1,20),Jt.clear(),V=0,X.setSaveData()}()}function vt(){s.visible=!1,M.unsubscribe(),function(){te.playLoop("bg"),V=0,v=!1,n.visible=!0,f.visible=!1,o.visible=!0;var t=new fe({score:rt,bonus:Math.round(rt*(it-1)),coins:ot,goals:st,perfects:at,kicks:ut,misses:lt,combos:ht});t.x=0,t.y=0,u.stage.addChild(t),t.once("close",function(){Ot()}),t.once("ok",function(){Ot()}),u.stage.removeChild(o),u.stage.addChild(o),o.setEnable(!1),o.time=20+V,o.money=nt}();var t=Math.round(rt*(it-1));(rt+=t)>X.highscore&&X.setHighScore(rt),X.saveData.playerCoins=nt,X.setSaveData()}function yt(){S||($=!1,X.saveData.inTutorial[1]=0,X.setSaveData(),v=!(et=!1),M.unsubscribe(),Dt(),T.removeChild(T.overlay))}function mt(){S||(tt=!1,X.saveData.inTutorial[0]=0,X.setSaveData(),M.unsubscribe(),v=!0,Dt(),T.removeChild(T.overlay))}function bt(){S=S&&!1}function xt(){u&&!t&&(u.renderer.plugins.interaction.removeEvents(),u.ticker.stop(),t=!0,Howler.mute(!0),setTimeout(100,function(){Howler.mute(!0)}),v&&Et())}function Tt(){u&&t&&N.hasFocus&&(A||window.innerWidth<window.innerHeight)&&(u.ticker.start(),u.renderer.plugins.interaction.setTargetElement(u.renderer.view,u.renderer.resolution),t=!1,Howler.mute(!1))}function wt(t){!B[t].unlocked&&B[t].cost<=nt&&(nt-=B[t].cost,f.unlockCharacter(t),B[t].unlocked=!0,o.money=nt,o.setEnable(L<=nt&&V<D),f.setMoney(nt),it+=F,f.bonus=Math.round(100*(it-1)),X.saveData.playerCoins=nt,X.saveData.charactersUnlocked[t]=!0,X.setSaveData())}function St(){v=!1,n.visible=!0,u.stage.removeChild(n),u.stage.addChild(n),d.setEnable(!1),f.setEnable(!1),o.setEnable(!1);var t=new _e;t.x=320/U*(U+W),t.y=600/G*(G+H),t.scale.set(.2),u.stage.addChild(t),t.once("close",function(){Ot()}),t.once("buy",function(){V<D&&L<=nt&&(V+=k,nt-=L),X.saveData.playerCoins=nt,X.setSaveData(),Ot()}),Tweener.addTween(t,{scaleX:1,scaleY:1},{time:25,transition:"easeInOutBack"})}function Et(t){if(E&&!S&&(S=!0)){X.trackPlayAnalytics(j.PAUSE),n.visible=!0,u.stage.removeChild(n),u.stage.addChild(n),d.setEnable(!1),f.setEnable(!1),o.setEnable(!1);var e=new ye;e.x=320/U*(U+W),e.y=600/G*(G+H),e.scale.set(.2),u.stage.addChild(e),e.on("home",function(){M.unsubscribe(),Pt()}),e.on("play",function(){bt(),n.visible=!1}),Tweener.addTween(e,{scaleX:1,scaleY:1},{time:25,transition:"easeInOutBack"})}}function Ct(){v=!1,n.visible=!0,u.stage.removeChild(n),u.stage.addChild(n),d.setEnable(!1),f.setEnable(!1),o.setEnable(!1);var t=new be({music:p,sound:w});t.x=320/U*(U+W),t.y=600/G*(G+H),t.scale.set(.2),u.stage.addChild(t),t.on("change_mute_sound",function(t){(w=t)?te.muteGroup("SFX"):te.unmuteGroup("SFX"),X.saveData.sfx=!w,X.setSaveData()}),t.on("change_mute_music",function(t){(p=t)?te.muteGroup("Music"):te.unmuteGroup("Music"),X.saveData.music=!p,X.setSaveData()}),t.once("close",function(){(d.visible?Pt:Ot)()}),Tweener.addTween(t,{scaleX:1,scaleY:1},{time:25,transition:"easeInOutBack"})}function Pt(){n.visible=!1,d.setEnable(!0),d.visible=!0,d.bestScore=X.highscore,f.visible=!1}function Ot(){v=!1,te.playLoop("bg"),X.trackPlayAnalytics(j.SHOP),n.visible=!1,f.setEnable(!0),f.y=0,f.visible=!0,f.targetToSlot(J),f.bestScore=X.highscore,f.bonus=Math.round(100*(it-1)),f.setMoney(nt),o.y=0,o.time=20+V,o.money=nt,o.setEnable(100<=nt&&V<D),o.visible=!0,d.visible=!1}function It(){a.text=""+rt,l.text=""+Math.round(Y)}function Mt(t){if(!S&&v){Animator.update(t),ParticleManager.update(t);for(var e,r=b.slice(0),i=0;i<r.length;i++)r[i].update(t),(r[i].x<-50||0<r[i]._vx&&r[i].x>700+W)&&Ut(b,r[i]);if(E){for(r=_.slice(0),i=0;i<r.length;i++){(l=r[i]).x-=l.speed,l.x<-l.width&&Ut(_,l)}for(r=x.slice(0),i=0;i<r.length;i++){var n=r[i];n.x-=Q,n.x<-n.width&&Ut(x,n)}q--,!(75<++K)||b.length&&b[0].active||(Z<=(K=0)&&!$?(function(){var t=PIXI.Sprite.fromFrame("goal_1");t.anchor.y=1,t.anchor.x=0,t.x=700+W,t.y=780+H/2,t.active=!0,T.addChildZ(t,5),x.push(t);var e=new Animable(z.troll_king[0]);e.scale.set(.8),e.anchor.x=.5,e.anchor.y=1,e.x=170,e.y=10,t.addChild(e),(t.keeper=e).addAnimation("idle",z.troll_king,[0,0,0]),e.addAnimation("catch",z.troll_king,[0,1,1,0]),e.addAnimation("jump",z.troll_king,[0,2,3,4,5]),e.setAnimation("idle",-1,20),Animator.add("keeper",e)}(),$t.deadZone=400+Math.round(200*Math.random()),Z=350,Rt(!0)):q<=0&&0<Math.random()?($&&(et=!0),(e=new Animable(z.troll[0])).anchor.y=1,e.anchor.x=0,e.x=700+W,e.y=815+H/2,e.speed=1.2*Q,e.active=!0,e.addAnimation("run",z.troll,[0,1,2,3,4,5,6]),e.addAnimation("fall",z.troll,[7,8]),e.addAnimation("hit",z.troll,[9,10]),e.setAnimation("run",-1,20),T.addChildZ(e,8),_.push(e),Animator.add(null,e),q=300,Rt(!0)):Rt());for(r=g.slice(0),i=0;i<r.length;i++)r[i].x-=Q,r[i].x<-200&&Ut(g,r[i]);if(skyline1.x<=-640&&(skyline1.x+=1920,J||(skyline1.texture=Nt())),skyline2.x<=-640&&(skyline2.x+=1920,J||(skyline2.texture=Nt())),skyline3.x<=-640&&(skyline3.x+=1920,J||(skyline3.texture=Nt())),$t.update(Q),$t.deadZone<=0){var o=$t.getRandomForeground(J),s=PIXI.Sprite.fromFrame(o.id);s.anchor.x=.5,s.anchor.y=1,s.x=850+W,s.y=o.level+H/2,T.addChildZ(s,4),g.push(s),$t.deadZone=o.spaceZone+Math.round(Math.random()*o.maxSpaceZone)}for(r=b.slice(0),i=0;i<r.length;i++){var a=r[i];if(a.active){if(a.x<y.x-60&&!a.missed)a.active=!1,Y-=4,Y=Math.max(0,Y),It(),Lt();else if(0<a._vx&&!a.perfect)for(var u=0;u<_.length;u++){var l;20<(l=_[u]).x-a.x&&l.x-a.x<50&&655<a.y&&(l.setAnimation("hit",0,7),l.addToPlaylist("run",-1,20),a.x=l.x,a.y=l.y,a.grounded=!0,a.addForce(l.speed,0),300<a.x-m.x?a.addForce(2*l.speed-5,0):a.addForce(l.speed-5,0))}}else if(a.target){a.target.x-=Q;var h=(d=a.target.x-a.x)/50;1<h?h=1:h<.6&&(h=.6),a.scale.set(.5),d<50&&(a.scale.set(1),a.target=null,a.addForce(-25,20))}}var c=Bt();if(c){y.y=c.y;var d,f=(d=Wt(c,y))/400*.3;.3<f&&(f=.3);var p=.7+f;y.scale.set(p),y.outLine.scale.set(.9+f),tt&&d<10?function(){v=!1,b[0].x=y.x,b[0].y=y.y;var t=new ee(U+W,G+H,0,.7);T.addChildZ(t,60),t.holeX=320,t.holeY=600,t.radius=320,t.render(),Tweener.addTween(t,{holeX:y.x,holeY:y.y,radius:70},{time:40,transition:"easeOutQuad",onUpdate:function(t){t.render()}});var e=A?X.getLocalisation("tutorial_01_desktop"):X.getLocalisation("tutorial_01_mobile"),r=new PIXI.Text(e,{font:"32px FredBurger Black",fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:550});r.anchor.set(.5),r.x=320/U*(U+W),r.y=1050+H,ClampTextSize(r,r.style.wordWrapWidth,100),t.addChild(r);var i=PIXI.Sprite.fromFrame("tutorial");i.anchor.set(.5),i.x=320/U*(U+W),i.y=920+H,t.addChild(i),t.interactive=!0,t.buttonMode=!0,t.on("pointertap",mt),(M=keyboard(" ")).press=mt.bind(this),T.overlay=t}():$&&d<30&&et&&function(){v=!1,b[0].x=y.x+25,b[0].y=y.y;var t=new ee(U+W,G+H,0,.7);T.addChildZ(t,60),t.holeX=y.x,t.holeY=y.y,t.radius=70,t.render();var e=Ft();t.addNextHole(e.x+e.width/2,e.y-e.height/2,80);var r=new PIXI.Text(X.getLocalisation("tutorial_02"),{font:"32px FredBurger Black",fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:500});r.anchor.set(.5),r.x=320/U*(U+W),r.y=1050+H,ClampTextSize(r,r.style.wordWrapWidth,100),t.addChild(r);var i=PIXI.Sprite.fromFrame("tutorial2");i.anchor.set(.5),i.x=320/U*(U+W),i.y=920+H,t.addChild(i),t.interactive=!1,t.buttonMode=!0,t.on("pointertap",yt),(M=keyboard(" ")).press=yt.bind(this),setTimeout(function(){t.interactive=!0},600),T.overlay=t}()}O%60==0&&(--Y<=0&&(te.play("fail"),Y=0,E=!1,m.setAnimation("fall",0,4),setTimeout(function(){vt()},600)),It()),T.sortChildren()}9999999999<++O&&(O=0)}}function At(t){ot+=t,nt+=t,It();var e=new PIXI.Container;switch(e.x=320,e.y=640+H/2,e.scale.set(.2),T.addChild(e),t){case 5:(r=PIXI.Sprite.fromFrame("coins_5")).anchor.set(.5),e.addChild(r);break;case 20:(r=PIXI.Sprite.fromFrame("coins_20")).anchor.set(.5),e.addChild(r);break;case 50:var r;(r=PIXI.Sprite.fromFrame("coins_50")).anchor.set(.5),e.addChild(r)}Tweener.addTween(e,{y:e.y-60,alpha:0},{time:60,delay:20,onComplete:function(t){t.parent&&t.parent.removeChild(t),t.destroy()}}),Tweener.addTween(e.scale,{x:.8,y:.8},{time:30,transition:"easeOutBack",onComplete:function(t){}})}function Rt(t){var e=300+500*Math.random(),r=300+500*Math.random(),i=Math.atan2(r-e,y.x-e);t&&(e=550+200*Math.random(),r=550+200*Math.random(),i=Math.atan2(r-e,y.x-e));var n=new we(780+H/2);n.x=750+W/2,n.y=r+H/2,n.active=!0,n.kicked=!1,T.addChildZ(n,8),b.push(n),n.addForce(7*-Math.cos(i),7*-Math.sin(i))}function Dt(){if(E&&(660<y.y?m.setAnimation("kick",0,5):m.setAnimation("head",0,7),te.play("kick"),m.addToPlaylist("run",-1,20),!tt&&!et)){ut++;var t,e,r,i,n,o=Bt();if(o&&!o.kicked){o.kicked=!0;var s=230+320*Math.random(),a=Math.atan2(s-o.y,640-o.x),u=Wt(o,y);if(o.x>=y.x-60&&u<60){o.missed=!1,ht<++ft&&(ht=ft),o.touched||dt++,7==dt&&(ct=dt=Z=0);var l=function(){x.sort(function(t,e){return t.x-e.y});for(var t=0;t<x.length;t++)if(-30<x[t].x&&x[t].x<550&&x[t].active)return x[t]}();if(u<20){if(at++,o.touched||ct++,4==ct&&(ct=dt=Z=0),Y+=1.5,It(),o.grounded=!1,o.perfect=!0,l){var h=l.x-20*Q+150;return st++,Ut(b,o,!0),Tweener.addTween(o,{x:h,y:642+100*Math.random()+H/2,rotation:5*Math.PI,scaleX:.7,scaleY:.7},{time:20,transition:"linear",onComplete:function(t){!function(){te.play("goal"),At(50),setTimeout(kt,300);var t=new PIXI.Text(X.getLocalisation("goal"),{font:"60px FredBurger Black",align:"center",stroke:"#2c0a63",strokeThickness:12,fill:["#ff890b","#ffd044"],fillGradientStops:[.1,.5],fillGradientType:0});t.anchor.set(.5),t.x=320/U*(U+W),t.y=470,ClampTextSize(t,550,100),T.addChild(t),Tweener.addTween(t,{y:t.y-70,alpha:0},{time:60,delay:20,onComplete:function(t){t.parent&&t.parent.removeChild(t),t.destroy()}}),Tweener.addTween(t.scale,{x:t.scale.x,y:t.scale.y},{time:30,transition:"easeOutBack",onComplete:function(t){}});for(var e=0;e<40;e++){var r=Math.floor(4*Math.random()),i=new ParticleManager.Particle(PIXI.utils.TextureCache["p"+r]);i.x=10+Math.random()*(U+W-20),i.y=0;var n=3+5*Math.random();i.startSpeed={x:0,y:n},i.startSize=.3+.7*Math.random(),i.startAlpha=1,i.angularSpeed=.2*Math.random()-.1,i.lifeTime=100,i.endSpeed=i.startSpeed,i.endAlpha=0,i.endSize=i.startSize,T.addChildZ(i,20),ParticleManager.emit(i)}T.sortChildren()}((t.x,t.y)),t.parent.removeChild(t),t.destroy()}}),l.active=!1,Tweener.addTween(l.keeper,{x:[l.keeper.x,l.keeper.x+50,l.keeper.x+100],y:[l.keeper.y,l.keeper.y-40,l.keeper.y]},{time:15,onComplete:function(t){Tweener.addTween(t,{y:[t.y-10,t.y,t.y-5,t.y]},{time:7,transition:"linear"})}}),void l.keeper.setAnimation("jump",0,24)}At(20),(n=new PIXI.Text(X.getLocalisation("perfect"),{font:"60px FredBurger Black",align:"center",stroke:"#2c0a63",strokeThickness:12,fill:["#27fe94","#46fdf6"],fillGradientStops:[.1,.5],fillGradientType:0})).anchor.set(.5),n.x=320/U*(U+W),n.y=470,ClampTextSize(n,550,100),T.addChild(n),Tweener.addTween(n,{y:n.y-70,alpha:0},{time:60,delay:20,onComplete:function(t){t.parent&&t.parent.removeChild(t),t.destroy()}}),Tweener.addTween(n.scale,{x:n.scale.x,y:n.scale.y},{time:30,transition:"easeOutBack",onComplete:function(t){}}),setTimeout(kt,300),o.addForce(-25,20)}else{if(At(5),ct=0,l){l.keeper.setAnimation("catch",0,10),o.active=!1;h=l.x-50;var c=l.x-h,d=o.x-h,f=o.y-(700+H/2),p=c/Q;return o.addForce(d/p-5,f/p),void(o.target={x:l.x+160,y:l.y-80})}if(o.grounded)o.addForce(-30,0),o.grounded=!1;else{var _=Ft();if(_){var g=Math.atan2(_.y-100*Math.random()-o.y,_.x-o.x);o.addForce(30*-Math.cos(g),30*-Math.sin(g))}else o.addForce(30*-Math.cos(a),30*-Math.sin(a));o.grounded=!1}}o.touched=!0;var v=m.base-m.height/2-(o.y+o.height/2);0<v&&(i=v,Tweener.addTween(m,{y:m.base-i},{time:7,onComplete:function(t){Tweener.addTween(t,{y:m.base},{time:10})}})),rt++,It(),t=o.x-o.width/4,e=o.y,(r=new Animable(z.hit[0])).anchor.set(.5),r.x=t,r.y=e,T.addChild(r),r.addAnimation("hit",z.hit),r.setAnimation("hit",0,24),Animator.add(null,r,!0)}else u<120&&(o.missed=!0),Y-=4,Y=Math.max(0,Y),It(),Lt(),ct=dt=ft=0,lt++}}}function kt(){var t=PIXI.Sprite.fromFrame("timePlus");t.anchor.set(.5),t.x=320,t.y=550,t.scale.set(.2),T.addChild(t);var e=X.getLocalisation("plus_sec");e=e.replace("<num>",1.5);var r=new PIXI.Text(e,{font:"50px FredBurger Black",align:"center",stroke:"#240852",strokeThickness:6,fill:["#ff8106","#ffd146"],fillGradientStops:[.1,.5],fillGradientType:0});r.x=35,r.anchor.set(.5),t.addChild(r),Tweener.addTween(t,{y:t.y-70,alpha:0},{time:60,delay:20,onComplete:function(t){t.parent&&t.parent.removeChild(t),t.destroy()}}),Tweener.addTween(t.scale,{x:1,y:1},{time:30,transition:"easeOutBack",onComplete:function(t){}})}function Lt(){var t=PIXI.Sprite.fromFrame("timeMinus");t.anchor.set(.5),t.x=320,t.y=520,t.scale.set(.2),T.addChild(t);var e=X.getLocalisation("minus_sec");e=e.replace("<num>",4);var r=new PIXI.Text(e,{font:"50px FredBurger Black",align:"center",stroke:"#240852",strokeThickness:6,fill:["#ff8106","#ffd146"],fillGradientStops:[.1,.5],fillGradientType:0});r.x=35,r.anchor.set(.5),t.addChild(r),Tweener.addTween(t,{y:t.y-70,alpha:0},{time:60,delay:20,onComplete:function(t){t.parent&&t.parent.removeChild(t),t.destroy()}}),Tweener.addTween(t.scale,{x:1,y:1},{time:30,transition:"easeOutBack",onComplete:function(t){}})}function Ft(){_.sort(function(t,e){return t.x-e.y});for(var t=0;t<_.length;t++)if(_[t].x>y.x+50)return _[t]}function Bt(){b.sort(function(t,e){return t.x-e.y});for(var t=0;t<b.length;t++)if(b[t].active)return b[t]}function Nt(){var t=Math.random();return.8<t?PIXI.utils.TextureCache.skyline0:.7<t?PIXI.utils.TextureCache.skyline1:PIXI.utils.TextureCache.skyline2}function jt(t,e){r.full.mask.clear(),r.full.mask.beginFill(0),r.full.mask.drawRect(0,0,t.progress/100*430,94),u.render()}function Xt(t,e){i=e.localisation.data,r.visible=!1,_t()}function Ut(t,e,r){var i=t.indexOf(e);if(-1<i){if(t.splice(i,1),r)return;if(e.parent)e.parent.removeChild(e)}e.destroy()}function Gt(t){if(!t)return[];for(var e=0;e<t.length;e++){var r=t[e];r.parent&&r.parent.removeChild(r),Tweener.extract(r),r.destroy&&r.destroy()}return t=[],[]}function Wt(t,e){var r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}var Ht,zt,Yt,Vt,qt,Zt,Kt,Qt,Jt=(Ht=[],zt={appear:function(t,e){!function(t){for(var e=0;e<Ht.length;e++)Tweener.finish(Ht[e].position),Tweener.addTween(Ht[e].position,{y:Ht[e].y+t},{time:30,transition:"easeOutQuad"})}(130),t.y=-t.height,Tweener.addTween(t.position,{y:13},{time:30,transition:"easeOutQuad"}),Tweener.addTween(t,{alpha:0},{time:60,delay:e,onComplete:function(t){t.visible=!1,t.parent&&t.parent.removeChild(t),zt.release(t)}}),Ht.push(t)},clear:function(){!function(){for(var t=0;t<Ht.length;t++)Tweener.extract(Ht[t]),Ht[t].parent.removeChild(Ht[t]);Ht=[]}()},release:function(t){var e=Ht.indexOf(t);-1<e&&Ht.splice(e,1)}}),$t=(Yt=[{name:"park",layers:[{id:"sky",level:0,speed:1},{id:"sky",level:0,speed:1}],foreground:[{id:"bench",level:765,spaceZone:220,maxSpaceZone:200,spawnTime:100},{id:"tree",level:720,spaceZone:350,maxSpaceZone:200,spawnTime:100},{id:"tree1",level:730,spaceZone:380,maxSpaceZone:200,spawnTime:100}]},{name:"city",layers:[{id:"",level:0,speed:1}],foreground:[{id:"hydrant",level:741,spaceZone:50,maxSpaceZone:500,spawnTime:100},{id:"light_posts",level:741,spaceZone:80,maxSpaceZone:500,spawnTime:100},{id:"meters",level:741,spaceZone:30,maxSpaceZone:500,spawnTime:100},{id:"city_tree",level:741,spaceZone:120,maxSpaceZone:500,spawnTime:100}]},{name:"destroyed",layers:[{id:"sky",level:0,speed:1},{id:"sky",level:0,speed:1}],foreground:[{id:"l5_hydrant",level:741,spaceZone:50,maxSpaceZone:500,spawnTime:100},{id:"l5_meters",level:741,spaceZone:30,maxSpaceZone:500,spawnTime:100},{id:"l5_explosion_hole",level:929,spaceZone:120,maxSpaceZone:400,spawnTime:100},{id:"l5_rubble",level:815,spaceZone:120,maxSpaceZone:300,spawnTime:100}]},{name:"city_night",layers:[{id:"",level:0,speed:1}],foreground:[{id:"hydrant_night",level:741,spaceZone:50,maxSpaceZone:500,spawnTime:100},{id:"meters__night",level:741,spaceZone:30,maxSpaceZone:500,spawnTime:100},{id:"tree_night",level:741,spaceZone:120,maxSpaceZone:500,spawnTime:100}]},{name:"underground",layers:[{id:"",level:0,speed:1}],foreground:[{id:"cage",level:465,spaceZone:300,maxSpaceZone:600,spawnTime:100},{id:"cage",level:465,spaceZone:300,maxSpaceZone:600,spawnTime:100}]}],Vt=[],qt=[],Zt=-1,{deadZone:50,getRandomForeground:function(t){var e=Yt[t],r=e.foreground.slice();0<=Zt&&Zt<r.length&&r.splice(Zt,1);var i=Math.floor(Math.random()*r.length);return Zt=e.foreground.indexOf(r[i]),r[i]},update:function(t){$t.deadZone-=t;for(var e=0;e<Vt.length;e++)Vt[e].display.x-=t*Vt[e].speedScale;for(e=0;e<qt.length;e++)qt[e].display.tilePosition.x-=t*qt[e].speedScale,qt[e].display.tilePosition.x<qt[e].display.texture.width&&(qt[e].display.tilePosition.x+=qt[e].display.texture.width)},clearLayers:function(){Vt=[],qt=[]},registerStaticLayer:function(t,e){Vt.push({display:t,speedScale:e})},registerTileLayer:function(t,e){qt.push({display:t,speedScale:e})}}),te=(Kt={},Qt={},{play:function(t){Kt[t]&&Kt[t].play()},stop:function(t){Kt[t]&&Kt[t].stop()},playLoop:function(t){Kt[t]&&!Kt[t].isPlaying&&(Kt[t].isPlaying=!0,Kt[t].play())},pauseLoop:function(t){Kt[t]&&Kt[t].isPlaying&&(Kt[t].isPlaying=!1,Kt[t].pause())},stopLoop:function(t){Kt[t]&&Kt[t].isPlaying&&(Kt[t].isPlaying=!1,Kt[t].stop())},register:function(t,e,r){Kt[t]=e,r&&(Qt[r]||(Qt[r]=[]),Qt[r].push(t))},mute:function(t){Kt[t]&&Kt[t].mute(!0)},unmute:function(t){Kt[t]&&Kt[t].mute(!1)},muteAll:function(){for(var t=0;t<Qt.length;t++)for(var e=0;e<Qt[t].length;e++)Kt[Qt[t][e]].mute(!0)},unmuteAll:function(){for(var t=0;t<Qt.length;t++)for(var e=0;e<Qt[t].length;e++)Kt[Qt[t][e]].mute(!1)},muteGroup:function(t){if(Qt[t])for(var e=0;e<Qt[t].length;e++)Kt[Qt[t][e]].mute(!0)},unmuteGroup:function(t){if(Qt[t])for(var e=0;e<Qt[t].length;e++)Kt[Qt[t][e]].mute(!1)},get:function(t){if(Kt[t])return Kt[t]}}),ee=((re.prototype=Object.create(PIXI.Graphics.prototype)).render=function(){if(this.clear(),this.beginFill(this._color,this._alpha),this.moveTo(0,0),this.lineTo(this._width,0),this.lineTo(this._width,this._height),this.lineTo(0,this._height),this.lineTo(0,0),this.closePath(),!this._holeRadius)return 0;this.moveTo(this._holeX,this._holeY),this.arc(this._holeX,this._holeY,this._holeRadius,0,2*Math.PI),this.addHole()},re.prototype.addNextHole=function(t,e,r){this.moveTo(t,e),this.arc(t,e,r,0,2*Math.PI),this.addHole()},Object.defineProperty(re.prototype,"holeX",{set:function(t){this._holeX=t},get:function(){return this._holeX},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"holeY",{set:function(t){this._holeY=t},get:function(){return this._holeY},enumerable:!0,configurable:!0}),Object.defineProperty(re.prototype,"radius",{set:function(t){this._holeRadius=t},get:function(){return this._holeRadius},enumerable:!0,configurable:!0}),re);function re(t,e,r,i){PIXI.Graphics.call(this),this._width=t,this._height=e,this._holeX=0,this._holeY=0,this._holeRadius=0,this._color=r||0,this._alpha=i||0}var ie=((ne.prototype=Object.create(PIXI.Container.prototype)).setEnable=function(t){this._btnPlus.setEnable(t)},Object.defineProperty(ne.prototype,"money",{set:function(t){this._money=t,this._moneyField.text=""+t},get:function(){return this._money},enumerable:!0,configurable:!0}),Object.defineProperty(ne.prototype,"time",{set:function(t){this._time=t,this._timeField.text=""+t},get:function(){return this._time},enumerable:!0,configurable:!0}),ne);function ne(t){PIXI.Container.call(this);var e=PIXI.Sprite.fromFrame("hud_panel");e.anchor.x=.5,e.x=320/U*(U+W),this.addChild(e);var r=PIXI.Sprite.fromFrame("coin_xl_icon");r.scale.set(.9),r.anchor.set(.5),r.x=576/U*(U+W),r.y=80,this.addChild(r);var i=PIXI.Sprite.fromFrame("led_panel");i.x=272/U*(U+W),i.y=58,this.addChild(i);var n=PIXI.Sprite.fromFrame("time_icon");n.anchor.set(.5),n.x=231/U*(U+W),n.y=99,this.addChild(n);var o=new PIXI.Text("999",{font:"32px FredBurger Black",fill:16777215,align:"right"});o.anchor.set(.5),o.x=576/U*(U+W),o.y=133,this.addChild(o);var s=new PIXI.Text("20",{font:"64px FredBurger Black",fill:16777215,align:"right"});s.anchor.x=1,s.x=i.x+i.width-10,s.y=61,this.addChild(s);var a=new Ee(PIXI.utils.TextureCache.plus_btn_n);a.anchor.set(.5),a.x=i.x+i.width+60,a.y=97,a.registerState("down",PIXI.utils.TextureCache.plus_btn_p),a.registerState("hover",PIXI.utils.TextureCache.plus_btn_h),a.registerState("disabled",PIXI.utils.TextureCache.plus_btn_i),this.addChild(a),a.on("pointertap",function(){this.emit("addTime")}.bind(this)),this._moneyField=o,this._timeField=s,this._btnPlus=a,this._money=0,this._time=0}var oe=((se.prototype=Object.create(PIXI.Container.prototype)).setEnable=function(t){this._btnPlay.setEnable(t),this._btnSettings.setEnable(t)},Object.defineProperty(se.prototype,"bestScore",{set:function(t){this._bestScoreValueField.text=t},get:function(){return this._bestScoreValueField.text},enumerable:!0,configurable:!0}),se);function se(){PIXI.Container.call(this);var t=PIXI.Sprite.fromFrame("title_bg");t.anchor.x=.5,t.anchor.y=.5,t.x=U/2+W/2,t.y=G/2+H/2,this.addChild(t);var e=PIXI.Sprite.fromFrame("title_cn");e.anchor.set(.5),e.scale.set(.25),e.x=U+W-75,e.y=70/G*(G+H),this.addChild(e);var r=PIXI.Sprite.fromFrame("title_brand");r.anchor.set(.5),r.scale.set(.35),r.x=.175*U,r.y=70/G*(G+H),this.addChild(r);var i=PIXI.Sprite.fromFrame("title_logo");i.anchor.set(.5),i.x=340/U*(U+W),i.y=240/G*(G+H),this.addChild(i);var n=PIXI.Sprite.fromFrame("title_characters");n.anchor.set(.5),n.x=322/U*(U+W),n.y=720/G*(G+H),this.addChild(n);var o=PIXI.Sprite.fromFrame("title_ball");o.anchor.set(.5),o.x=340/U*(U+W),o.y=996/G*(G+H),this.addChild(o);var s=new PIXI.Text(X.getLocalisation("best_score"),{font:"50px FredBurger Black",fill:16777215,align:"center",stroke:"#420f96",strokeThickness:9});s.anchor.set(.5),s.x=340/U*(U+W),s.y=400/G*(G+H),ClampTextSize(s,550,100),this.addChild(s);var a=new PIXI.Text("0",{font:"80px FredBurger Black",fill:4395928,align:"center"});a.anchor.set(.5),a.x=340/U*(U+W),a.y=460/G*(G+H),this.addChild(a),this._bestScoreValueField=a;var u=new Ee(PIXI.utils.TextureCache.play_btn_n);u.scale.set(.65),u.anchor.set(.5),u.x=340/U*(U+W),u.y=996/G*(G+H),u.contentOffsetY=20,u.registerState("down",PIXI.utils.TextureCache.play_btn_p),u.registerState("hover",PIXI.utils.TextureCache.play_btn_h),this.addChild(u),u.on("pointertap",function(){this.emit("shop")}.bind(this)),this._btnPlay=u;var l=new Ee(PIXI.utils.TextureCache.settings_btn_n);l.anchor.set(.5),l.x=558/U*(U+W),l.y=1053/G*(G+H),l.registerState("down",PIXI.utils.TextureCache.settings_btn_p),l.registerState("hover",PIXI.utils.TextureCache.settings_btn_h),this.addChild(l),l.on("pointertap",function(){this.emit("settings")}.bind(this)),this._btnSettings=l}var ae=((ue.prototype=Object.create(PIXI.Container.prototype)).setEnable=function(t){this._buyButton.setEnable(t)},ue.prototype.unlock=function(){this._buyButton.setEnable(!1),this._buyButton.visible=!1,this.unlocked=!0},ue);function ue(t){PIXI.Container.call(this),this.id=t.id,this.unlocked=t.unlocked,this.cost=t.cost;var e=PIXI.Sprite.fromFrame(t.img);e.anchor.x=.5,e.x=0,e.y=0,this.addChild(e);var r=new Ee(PIXI.utils.TextureCache.coin_btn_n);r.scale.set(.9),r.anchor.set(.5),r.x=0,r.y=370,r.contentOffsetY=20,r.registerState("down",PIXI.utils.TextureCache.coin_btn_p),r.registerState("hover",PIXI.utils.TextureCache.coin_btn_h),r.registerState("disabled",PIXI.utils.TextureCache.coin_btn_g),this.addChild(r),r.setEnable(!1),r.on("pointertap",function(){this.emit("buy")}.bind(this));var i=new PIXI.Text(""+t.cost,{font:"35px FredBurger Black",fill:606087,align:"right"});i.anchor.x=0,i.anchor.y=.5,i.x=-20,i.y=-10,r.content.addChild(i),this._buyButton=r,t.unlocked&&(r.visible=!1)}var le=((he.prototype=Object.create(PIXI.Container.prototype)).onSlideStart=function(t){if(this._isSliding)return 0;this._slideLock=!0,this._isSliding=!0,this._anchorX=t.data.global.x},he.prototype.onSlideStop=function(t){if(!this._isSliding)return 0;if(this._isSliding=!1,this._anchorX=null,!this._slideLock){var e=320*Math.round(this.itemContainer.x/320),r=4-(Math.round(this.itemContainer.x/320)+2);this.animateSliderTo(e),this.select(this.items[r])}},he.prototype.onSlideMove=function(t){if(!this._isSliding)return 0;var e=t.data.global.x-this._anchorX;this._slideLock&&Math.abs(e)<10?this._anchorX=t.data.global.x:(this._slideLock=!1,Tweener.extract(this.itemContainer),this._anchorX=t.data.global.x,this.itemContainer.x+=1.5*e,640<this.itemContainer.x?this.itemContainer.x=640:this.itemContainer.x<-640&&(this.itemContainer.x=-640))},he.prototype.initCharacters=function(t){for(var e=this,r=0;r<t.length;r++){var i=new ae(t[r]);i.id=r,i.x=320*r-320,i.y=0,this.itemContainer.addChild(i),i.interactive=!0,i.buttonMode=!0,i.on("pointertap",function(){e.animateSliderTo(320-this.x),e.select(this)}),i.on("buy",function(){e.emit("buy",this.id)}),this.items.push(i)}},he.prototype.select=function(t){if(!t.unlocked)return!1;this._selected=t.id,this._selectFrame.x=t.x,1==t.id||2==t.id?this._selectFrame.scale.x=-1:this._selectFrame.scale.x=1},he.prototype.animateSliderTo=function(t){Tweener.addTween(this.itemContainer,{x:t},{time:15,transition:"easeOutQuad"})},he.prototype.setMoney=function(t){for(var e=0;e<this.items.length;e++){var r=this.items[e];!r.unlocked&&r.cost<=t?r.setEnable(!0):r.unlocked||r.setEnable(!1)}},he.prototype.setEnable=function(t){this._sliderContainer.interactive=t;for(var e=0;e<this.items.length;e++)this.items[e].interactive=t},he.prototype.unlockCharacter=function(t){this.items[t].unlock(),this.select(this.items[t])},he.prototype.targetToSlot=function(t){var e=320*t-320;this._selected=t,this.animateSliderTo(320-e)},he.prototype.getSelected=function(){return this._selected},he);function he(t){PIXI.Container.call(this);var e=new PIXI.Container;this.addChild(e);var r=new PIXI.Graphics;r.beginFill(65280,.8),r.drawRect(0,0,640,450),r.cacheAsBitmap=!0,r.alpha=0,e.addChild(r),e.interactive=!0,e.buttonMode=!0,e.on("pointerdown",function(t){this.onSlideStart(t)}.bind(this)),e.on("pointerup",function(t){this.onSlideStop(t)}.bind(this)),e.on("pointerupoutside",function(t){this.onSlideStop(t)}.bind(this)),e.on("pointermove",function(t){this.onSlideMove(t)}.bind(this)),this._selected=2,this.items=[],this.itemContainer=new PIXI.Container,e.addChild(this.itemContainer),this._sliderContainer=e,this.initCharacters(t);var i=PIXI.Sprite.fromFrame("select_frame");i.anchor.x=.5,i.x=-320,i.y=-10,this.itemContainer.addChild(i),this._selectFrame=i,this._isSliding=!1,this._anchorX=null,this._slideLock=!0}var ce=((de.prototype=Object.create(PIXI.Container.prototype)).setEnable=function(t){this._slider.setEnable(t),this._btnPlay.interactive=t},de.prototype.setMoney=function(t){this._slider.setMoney(t)},de.prototype.unlockCharacter=function(t){this._slider.unlockCharacter(t),this._slider.targetToSlot(t)},de.prototype.targetToSlot=function(t){this._slider.targetToSlot(t)},Object.defineProperty(de.prototype,"bestScore",{set:function(t){this._bestScoreValueField.text=t},get:function(){return this._bestScoreValueField.text},enumerable:!0,configurable:!0}),Object.defineProperty(de.prototype,"bonus",{set:function(t){var e=X.getLocalisation("bonus_score");e=e.replace("<num>",t),this._bonusScoreField.text=e,ClampTextSize(this._bonusScoreField,550,100)},get:function(){return this._bonusScoreField.text},enumerable:!0,configurable:!0}),de);function de(t){PIXI.Container.call(this);var e=PIXI.Sprite.fromFrame("gr_bg");e.width=U+W,e.height=G+H,this.addChild(e);var r=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.rain_loop,U+W,G+H);this.addChild(r),Tweener.addTween(r.tilePosition,{y:1136},{time:250,loop:-1});var i=new PIXI.Text(X.getLocalisation("best_score"),{font:"50px FredBurger Black",fill:4395928,align:"center"});i.anchor.set(.5),i.x=320/U*(U+W),i.y=220/G*(G+H),ClampTextSize(i,550,100),this.addChild(i);var n=new PIXI.Text("0",{font:"100px FredBurger Black",fill:4395928,align:"center"});n.anchor.set(.5),n.x=320/U*(U+W),n.y=305/G*(G+H),this.addChild(n),this._bestScoreValueField=n,this._selectedCharacter=2;var o=new le(t);o.x=W/2,o.y=380/G*(G+H),this.addChild(o),this._slider=o,this._slider.on("buy",function(t){this.emit("buy",t)}.bind(this));var s=new Ee(PIXI.utils.TextureCache.green_btn_n);s.anchor.set(.5),s.x=320/U*(U+W),s.y=927/G*(G+H),s.contentOffsetY=20,s.registerState("down",PIXI.utils.TextureCache.green_btn_p),s.registerState("hover",PIXI.utils.TextureCache.green_btn_h),s.registerState("disabled",PIXI.utils.TextureCache.green_btn_i),this.addChild(s),s.on("pointertap",function(){this.emit("start",o.getSelected())}.bind(this)),this._btnPlay=s;var a=new PIXI.Text(X.getLocalisation("play"),{font:"70px FredBurger Black",fill:16777215,align:"right"});a.anchor.x=.5,a.anchor.y=.5,a.x=0,a.y=-25,ClampTextSize(a,400,100),s.content.addChild(a);var u=X.getLocalisation("bonus_score");u=u.replace("<num>",20);var l=new PIXI.Text(u,{font:"30px FredBurger Black",fill:4395928,align:"center"});l.anchor.set(.5),l.x=320/U*(U+W),l.y=1030/G*(G+H),ClampTextSize(l,550,100),this.addChild(l),this._bonusScoreField=l}var fe=((pe.prototype=Object.create(PIXI.Container.prototype)).kill=function(){for(var t=0;t<this.children.length;t++)this.children[t].interactive=!1,this.children[t].removeAllListeners(),Tweener.extract(this.children[t]);this.interactive=!1,this.removeAllListeners(),Tweener.extract(this),this.parent&&this.parent.removeChild(this),this.destroy()},pe);function pe(t){PIXI.Container.call(this);var e=PIXI.Sprite.fromFrame("gr_bg");e.width=U+W,e.height=G+H,this.addChild(e);var r=new PIXI.extras.TilingSprite(PIXI.utils.TextureCache.rain_loop,U+W,G+H);this.addChild(r),Tweener.addTween(r.tilePosition,{y:1136},{time:250,loop:-1});var i=PIXI.Sprite.fromFrame("darken_bg");i.width=U+W,i.height=G+H,this.addChild(i);var n=PIXI.Sprite.fromFrame("stage_light");n.x=W/2-110,n.y=0,this.addChild(n);var o=PIXI.Sprite.fromFrame("stage_light");o.scale.x=-1,o.x=750+W/2,o.y=0,this.addChild(o);var s=PIXI.Sprite.fromFrame("big_info_panel");s.anchor.set(.5),s.x=320/U*(U+W),s.y=596/G*(G+H),this.addChild(s);var a=new PIXI.Text(X.getLocalisation("results"),{font:"80px FredBurger Black",fill:16777215,stroke:"#420f96",strokeThickness:12,align:"center"});a.anchor.set(.5),a.x=0,a.y=-310,ClampTextSize(a,500,100),s.addChild(a);var u=PIXI.Sprite.fromFrame("score_ribbon");u.x=-312,u.y=-260,s.addChild(u);var l=new PIXI.Text(X.getLocalisation("score"),{font:"64px FredBurger Black",fill:16777215,align:"left"});l.anchor.x=0,l.anchor.y=.5,l.x=-260,l.y=-190,ClampTextSize(l,300,100),s.addChild(l);var h=new PIXI.Text(t.score||"0",{font:"64px FredBurger Black",fill:16777215,align:"right"});h.anchor.x=1,h.anchor.y=.5,h.x=240,h.y=-190,ClampTextSize(h,175,100),s.addChild(h);var c=new PIXI.Text(X.getLocalisation("player_bonus"),{font:"34px FredBurger Black",fill:16777215,align:"left"});c.anchor.x=0,c.anchor.y=.5,c.x=-260,c.y=-113,ClampTextSize(c,325,100),s.addChild(c);var d=new PIXI.Text("+"+t.bonus,{font:"34px FredBurger Black",fill:16777215,align:"right"});d.anchor.x=1,d.anchor.y=.5,d.x=255,d.y=-113,ClampTextSize(d,150,100),s.addChild(d);var f=new PIXI.Text(X.getLocalisation("coins"),{font:"34px FredBurger Black",fill:16777215,align:"left"});f.anchor.x=0,f.anchor.y=.5,f.x=-260,f.y=-67,ClampTextSize(f,325,100),s.addChild(f);var p=new PIXI.Text("+"+t.coins,{font:"34px FredBurger Black",fill:16777215,align:"right"});p.anchor.x=1,p.anchor.y=.5,p.x=255,p.y=-67,ClampTextSize(p,150,100),s.addChild(p);var _=new PIXI.Text(X.getLocalisation("goals"),{font:"34px FredBurger Black",fill:16777215,align:"left"});_.anchor.x=0,_.anchor.y=.5,_.x=-211,_.y=-8,ClampTextSize(_,300,100),s.addChild(_);var g=new PIXI.Text(""+t.goals,{font:"34px FredBurger Black",fill:16777215,align:"right"});g.anchor.x=1,g.anchor.y=.5,g.x=195,g.y=-8,ClampTextSize(g,100,100),s.addChild(g);var v=new PIXI.Text(X.getLocalisation("perfect_kicks"),{font:"34px FredBurger Black",fill:16777215,align:"left"});v.anchor.x=0,v.anchor.y=.5,v.x=-211,v.y=38,ClampTextSize(v,300,100),s.addChild(v);var y=new PIXI.Text(""+t.perfects,{font:"34px FredBurger Black",fill:16777215,align:"right"});y.anchor.x=1,y.anchor.y=.5,y.x=195,y.y=38,ClampTextSize(y,100,100),s.addChild(y);var m=new PIXI.Text(X.getLocalisation("kicks"),{font:"34px FredBurger Black",fill:16777215,align:"left"});m.anchor.x=0,m.anchor.y=.5,m.x=-211,m.y=81,ClampTextSize(m,300,100),s.addChild(m);var b=new PIXI.Text(""+ +t.kicks,{font:"34px FredBurger Black",fill:16777215,align:"right"});b.anchor.x=1,b.anchor.y=.5,b.x=195,b.y=81,ClampTextSize(b,100,100),s.addChild(b);var x=new PIXI.Text(X.getLocalisation("misses"),{font:"34px FredBurger Black",fill:16777215,align:"left"});x.anchor.x=0,x.anchor.y=.5,x.x=-211,x.y=123,ClampTextSize(x,300,100),s.addChild(x);var T=new PIXI.Text(""+ +t.misses,{font:"34px FredBurger Black",fill:16777215,align:"right"});T.anchor.x=1,T.anchor.y=.5,T.x=195,T.y=123,ClampTextSize(T,100,100),s.addChild(T);var w=new PIXI.Text(X.getLocalisation("best_combo"),{font:"34px FredBurger Black",fill:16777215,align:"left"});w.anchor.x=0,w.anchor.y=.5,w.x=-211,w.y=169,ClampTextSize(w,300,100),s.addChild(w);var S=new PIXI.Text(""+ +t.combos,{font:"34px FredBurger Black",fill:16777215,align:"right"});S.anchor.x=1,S.anchor.y=.5,S.x=195,S.y=169,ClampTextSize(S,100,100),s.addChild(S);var E=new Ee(PIXI.utils.TextureCache.ok_btn_n);E.scale.set(.9),E.anchor.set(.5),E.x=0,E.y=295,E.registerState("down",PIXI.utils.TextureCache.ok_btn_p),E.registerState("hover",PIXI.utils.TextureCache.ok_btn_h),s.addChild(E);var C=new PIXI.Text(X.getLocalisation("ok"),{font:"90px FredBurger Black",fill:16777215,align:"center"});C.anchor.set(.5),C.x=0,C.y=-20,ClampTextSize(C,250,100),E.content.addChild(C),E.on("pointerdown",function(){C.alpha=.75,C.y=0}),E.on("pointerover",function(){C.alpha=.75}),E.on("pointerupoutside",function(){C.alpha=1,C.y=-20}),E.on("pointerout",function(){E.isdown||(C.alpha=1,C.y=-20)}),E.once("pointertap",function(){this.emit("ok"),this.kill()}.bind(this))}var _e=((ge.prototype=Object.create(PIXI.Sprite.prototype)).kill=function(){for(var t=0;t<this.children.length;t++)this.children[t].interactive=!1,this.children[t].removeAllListeners(),Tweener.extract(this.children[t]);this.interactive=!1,this.removeAllListeners(),Tweener.extract(this),this.parent&&this.parent.removeChild(this),this.destroy()},ge);function ge(){PIXI.Sprite.call(this,PIXI.utils.TextureCache.big_info_panel),this.anchor.set(.5);var t=new PIXI.Text(X.getLocalisation("extra_time"),{font:"70px FredBurger Black",fill:16777215,align:"center",stroke:"#420f96",strokeThickness:10});t.anchor.set(.5),t.x=0,t.y=-270,t.style.lineHeight=110,ClampTextSize(t,400,100),this.addChild(t);var e=PIXI.Sprite.fromFrame("time_up_icon");e.anchor.set(.5),e.x=-10,e.y=-80,this.addChild(e);var r=new PIXI.Text(X.getLocalisation("add_5_seconds"),{font:"40px FredBurger Black",fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:500});r.anchor.x=.5,r.anchor.y=.5,r.x=0,r.y=115,ClampTextSize(r,r.style.wordWrapWidth,120),this.addChild(r);var i=new Ee(PIXI.utils.TextureCache.x_btn_n);i.anchor.set(.5),i.x=255,i.y=-330,i.registerState("down",PIXI.utils.TextureCache.x_btn_p),i.registerState("hover",PIXI.utils.TextureCache.x_btn_h),this.addChild(i),i.once("pointertap",function(){this.emit("close"),this.kill()}.bind(this));var n=new Ee(PIXI.utils.TextureCache.green_btn_n);n.anchor.set(.5),n.x=0,n.y=270,n.contentOffsetY=20,n.registerState("down",PIXI.utils.TextureCache.green_btn_p),n.registerState("hover",PIXI.utils.TextureCache.green_btn_h),n.registerState("disabled",PIXI.utils.TextureCache.green_btn_i),this.addChild(n),n.once("pointertap",function(){this.emit("buy"),this.kill()}.bind(this));var o=new PIXI.Text("100",{font:"60px FredBurger Black",fill:16777215,align:"right"});o.anchor.x=.5,o.anchor.y=.5,o.x=20,o.y=-15,n.content.addChild(o);var s=PIXI.Sprite.fromFrame("coin_s_icon");s.scale.set(1),s.anchor.x=.5,s.anchor.y=.5,s.x=o.x-o.width/2-s.width/2-30,s.y=-15,n.content.addChild(s)}(ve.prototype=Object.create(PIXI.Sprite.prototype)).kill=function(){for(var t=0;t<this.children.length;t++)this.children[t].interactive=!1,this.children[t].removeAllListeners(),Tweener.extract(this.children[t]);this.interactive=!1,this.removeAllListeners(),Tweener.extract(this),this.parent&&this.parent.removeChild(this),this.destroy()};function ve(){PIXI.Sprite.call(this,PIXI.utils.TextureCache.big_info_panel),this.anchor.set(.5);var t=PIXI.Sprite.fromFrame("effect");t.anchor.set(.5),t.x=0,t.y=-175,this.addChild(t),Tweener.addTween(t,{rotation:2*Math.PI},{time:1e3,loop:-1});var e=PIXI.Sprite.fromFrame("effect_1");e.anchor.set(.5),e.x=0,e.y=-175,this.addChild(e),Tweener.addTween(e,{rotation:2*Math.PI},{time:700,loop:-1});var r=PIXI.Sprite.fromFrame("raven_head");r.anchor.set(.5),r.x=0,r.y=-175,this.addChild(r);var i=new PIXI.Text(X.getLocalisation("out_of_time"),{font:"52px FredBurger Black",fill:16777215,align:"center",stroke:"#420f96",strokeThickness:8});i.anchor.set(.5),i.x=0,i.y=-310,this.addChild(i);var n=new PIXI.Text(X.getLocalisation("keep_playing"),{font:"52px FredBurger Black",fill:16777215,align:"left"});n.anchor.x=.5,n.anchor.y=.5,n.x=0,n.y=-35,this.addChild(n);var o=new Ee(PIXI.utils.TextureCache.video_btn_n);o.anchor.set(.5),o.x=0,o.y=110,o.contentOffsetY=20,o.registerState("down",PIXI.utils.TextureCache.video_btn_p),o.registerState("hover",PIXI.utils.TextureCache.video_btn_h),o.registerState("disabled",PIXI.utils.TextureCache.video_btn_i),this.addChild(o),o.once("pointertap",function(){this.emit("yes"),this.kill()}.bind(this));var s=new PIXI.Text("+15 ",{font:"60px FredBurger Black",fill:16777215,align:"right"});s.anchor.x=1,s.anchor.y=.5,s.x=30,s.y=-15,o.content.addChild(s);var a=new PIXI.Text(X.getLocalisation("seconds"),{font:"40px FredBurger Black",fill:16777215,align:"right"});a.anchor.x=1,a.anchor.y=.5,a.x=s.x+s.width+20,a.y=-15,o.content.addChild(a);var u=new Ee(PIXI.utils.TextureCache.no_btn_n);u.anchor.set(.5),u.x=0,u.y=285,u.contentOffsetY=20,u.registerState("down",PIXI.utils.TextureCache.no_btn_p),u.registerState("hover",PIXI.utils.TextureCache.no_btn_h),this.addChild(u),u.once("pointertap",function(){this.emit("no"),this.kill()}.bind(this))}var ye=((me.prototype=Object.create(PIXI.Sprite.prototype)).kill=function(){for(var t=0;t<this.children.length;t++)this.children[t].interactive=!1,this.children[t].removeAllListeners(),Tweener.extract(this.children[t]);this.interactive=!1,this.removeAllListeners(),Tweener.extract(this),this.parent&&this.parent.removeChild(this),this.destroy()},me);function me(t){PIXI.Sprite.call(this,PIXI.utils.TextureCache.big_info_panel),this.anchor.set(.5);var e=new PIXI.Text(X.getLocalisation("pause")+" ",{font:"96px FredBurger Black",fill:16777215,align:"center",stroke:"#420f96",strokeThickness:12});e.anchor.set(.5),e.x=0,e.y=-300,ClampTextSize(e,500,150),this.addChild(e);var r=new Ee(PIXI.utils.TextureCache.home_btn_n);r.anchor.set(.5),r.x=0,r.y=-91,r.registerState("down",PIXI.utils.TextureCache.home_btn_p),r.registerState("hover",PIXI.utils.TextureCache.home_btn_h),this.addChild(r),r.on("pointertap",function(t){this.emit("home"),this.kill()}.bind(this));var i=new Ee(PIXI.utils.TextureCache.play_btn_n);i.anchor.set(.5),i.x=0,i.y=186,i.registerState("down",PIXI.utils.TextureCache.play_btn_p),i.registerState("hover",PIXI.utils.TextureCache.play_btn_h),this.addChild(i),i.on("pointertap",function(t){this.emit("play"),this.kill()}.bind(this))}var be=((xe.prototype=Object.create(PIXI.Sprite.prototype)).kill=function(){for(var t=0;t<this.children.length;t++)this.children[t].interactive=!1,this.children[t].removeAllListeners(),Tweener.extract(this.children[t]);this.interactive=!1,this.removeAllListeners(),Tweener.extract(this),this.parent&&this.parent.removeChild(this),this.destroy()},xe);function xe(t){PIXI.Sprite.call(this,PIXI.utils.TextureCache.big_info_panel),this.anchor.set(.5),this._music=t.music,this._sound=t.sound;var e=new Ee(PIXI.utils.TextureCache.x_btn_n);e.anchor.set(.5),e.x=255,e.y=-330,e.registerState("down",PIXI.utils.TextureCache.x_btn_p),e.registerState("hover",PIXI.utils.TextureCache.x_btn_h),this.addChild(e),e.once("pointertap",function(){this.emit("close"),this.kill()}.bind(this));var r=new PIXI.Text(X.getLocalisation("settings")+" ",{font:"72px FredBurger Black",fill:16777215,align:"center",stroke:"#420f96",strokeThickness:12});r.anchor.set(.5),r.x=0,r.y=-300,ClampTextSize(r,400,150),this.addChild(r);var i=new Ee(PIXI.utils.TextureCache.musicON_btn_n);i.anchor.set(.5),i.x=0,i.y=176,this.addChild(i),this._btnMusic=i,this._music?(this._btnMusic.registerState("up",PIXI.utils.TextureCache.musicOFF_btn_off),this._btnMusic.registerState("down",PIXI.utils.TextureCache.musicOFF_btn_p),this._btnMusic.registerState("hover",PIXI.utils.TextureCache.musicOFF_btn_off)):(this._btnMusic.registerState("up",PIXI.utils.TextureCache.musicON_btn_n),this._btnMusic.registerState("down",PIXI.utils.TextureCache.musicON_btn_p),this._btnMusic.registerState("hover",PIXI.utils.TextureCache.musicON_btn_h)),this._btnMusic.updateState(),i.on("pointertap",function(t){this._music=!this._music,this._music?(this._btnMusic.registerState("up",PIXI.utils.TextureCache.musicOFF_btn_off),this._btnMusic.registerState("down",PIXI.utils.TextureCache.musicOFF_btn_p),this._btnMusic.registerState("hover",PIXI.utils.TextureCache.musicOFF_btn_off)):(this._btnMusic.registerState("up",PIXI.utils.TextureCache.musicON_btn_n),this._btnMusic.registerState("down",PIXI.utils.TextureCache.musicON_btn_p),this._btnMusic.registerState("hover",PIXI.utils.TextureCache.musicON_btn_h)),this._btnMusic.updateState(),this.emit("change_mute_music",this._music)}.bind(this));var n=new Ee(PIXI.utils.TextureCache.soundON_btn_n);n.anchor.set(.5),n.x=0,n.y=-61,this.addChild(n),this._btnSound=n,this._sound?(this._btnSound.registerState("up",PIXI.utils.TextureCache.soundOFF_btn_off),this._btnSound.registerState("down",PIXI.utils.TextureCache.soundOFF_btn_p),this._btnSound.registerState("hover",PIXI.utils.TextureCache.soundOFF_btn_off)):(this._btnSound.registerState("up",PIXI.utils.TextureCache.soundON_btn_n),this._btnSound.registerState("down",PIXI.utils.TextureCache.soundON_btn_p),this._btnSound.registerState("hover",PIXI.utils.TextureCache.soundON_btn_h)),this._btnSound.updateState(),n.on("pointertap",function(t){this._sound=!this._sound,this._sound?(this._btnSound.registerState("up",PIXI.utils.TextureCache.soundOFF_btn_off),this._btnSound.registerState("down",PIXI.utils.TextureCache.soundOFF_btn_p),this._btnSound.registerState("hover",PIXI.utils.TextureCache.soundOFF_btn_off)):(this._btnSound.registerState("up",PIXI.utils.TextureCache.soundON_btn_n),this._btnSound.registerState("down",PIXI.utils.TextureCache.soundON_btn_p),this._btnSound.registerState("hover",PIXI.utils.TextureCache.soundON_btn_h)),this._btnSound.updateState(),this.emit("change_mute_sound",this._sound)}.bind(this));var o=new PIXI.Text("v "+VERSION,{font:"15px Arial",fill:16777215,align:"center"});o.anchor.x=1,o.x=240,o.y=345,this.addChild(o)}var Te,we=(Te=780,(Se.prototype=Object.create(PIXI.Sprite.prototype)).update=function(t){this.x+=this._vx-5,this.y+=this._vy,this._vx+=this._ax,this._vy+=this._ay,this.y>=Te&&(this.y=Te,2<this._vy?this._vy*=-.85:(this._vy=0,this._ay=0)),0==this._vy&&0<=this._vx&&(this._vx*=.9),this._vr=this._vx/50,this.rotation+=this._vr},Se.prototype.addForce=function(t,e){this._vx=-t,this._vy=-e,this._ay=.68},Se);function Se(t){PIXI.Sprite.call(this,PIXI.utils.TextureCache.ball),this.anchor.set(.5),this._vx=0,this._vy=0,this._ax=0,this._ay=0,this._vr=.1,Te=t,this.grounded=!1,this.sleep=!1}var Ee=function(){"use strict";function t(t){PIXI.Sprite.call(this,t),this.interactive=!0,this.buttonMode=!0,this.isOver=!1,this.isdown=!1,this.pushable=!1,this.pushed=!1,this.textureUp=t,this.content=new PIXI.Container,this.addChild(this.content),this.contentOffsetX=0,this.contentOffsetY=0,this.on("pointerdown",this.onDown).on("pointerup",this.onUp).on("pointerupoutside",this.onUp).on("pointerover",this.onOver).on("pointerout",this.onOut)}return(t.prototype=Object.create(PIXI.Sprite.prototype)).onUp=function(){this.pushable&&(this.pushed=!this.pushed),this.pushed||(this.isdown=!1,this.texture=this.textureUp,this.content.x=0,this.content.y=0),this.emit("up")},t.prototype.onDown=function(){this.isdown=!0,this.textureDown&&(this.texture=this.textureDown),this.content.x=this.contentOffsetX,this.content.y=this.contentOffsetY,te.play("click")},t.prototype.onOver=function(){this.isOver=!0,this.isdown||this.textureOver&&(this.texture=this.textureOver)},t.prototype.onOut=function(){this.isOver=!1,this.isdown||(this.texture=this.textureUp)},t.prototype.push=function(){this.pushed=!0,this.isdown=!0,this.textureDown&&(this.texture=this.textureDown)},t.prototype.release=function(){this.pushable||(this.pushed=!1),this.onUp()},t.prototype.registerState=function(t,e){switch(t){case"up":this.textureUp=e;break;case"down":this.textureDown=e;break;case"hover":this.textureOver=e;break;case"disabled":this.textureDisabled=e}},t.prototype.updateState=function(){!this.interactive&&this.textureDisabled?this.texture=this.textureDisabled:this.isdown&&this.textureDown?this.texture=this.textureDown:this.textureOver?this.texture=this.textureOver:this.texture=this.textureUp},t.prototype.setEnable=function(t){t?(this.texture=this.textureUp,this.interactive=!0):(this.texture=this.textureDisabled||this.textureUp,this.interactive=!1)},t}();return N}(),Tweener=function(){var d={tweens:[],loop:!0,params:{time:1,transition:"linear",delay:0,variant:0},fallbacks:{onStart:null,onUpdate:null,onComplete:null},finish:function(t){for(var e=0;e<d.tweens.length;e++)if(d.tweens[e]._target==t){d.tweens[e].finish();break}},pause:function(t){for(var e=0;e<d.tweens.length;e++)if(d.tweens[e]._target==t){d.tweens[e].pause();break}},restart:function(t){for(var e=0;e<d.tweens.length;e++)if(d.tweens[e]._target==t){d.tweens[e].restart();break}},extract:function(t){for(var e=0;e<d.tweens.length;e++)if(d.tweens[e]._target===t){d.tweens[e].stop();break}},addTween:function(t,e,r){var i=d;d.extract(t);var n=new i.Tween(t,e,r);i.tweens.push(n),n.start()},addFrameTween:function(t,e,r){},Tween:function(t,e,r){if(this._target=t,this._prms=[],this._propsQueue={},this._propsStart={},this._propsEnd={},this._running=!1,this._elapsed=0,this.def={time:25,delay:0,transition:"linear",variant:0,onStart:null,onUpdate:null,onComplete:null,loop:!1},r)for(var i in this.def)this.def[i]=r[i]?r[i]:this.def[i];for(var n in e)this._prms.push(n),this._propsStart[n]=t[n],this._propsQueue[n]=e[n]-t[n],this._propsEnd[n]=e[n]}};return d.Tween.prototype.start=function(){PIXI.ticker.shared.add(this.update,this),this._running=!0},d.Tween.prototype.stop=function(){this._running=!1,PIXI.ticker.shared.remove(this.update,this);var t=d.tweens;t.splice(t.indexOf(this),1)},d.Tween.prototype.pause=function(){this._running&&(this._running=!1,PIXI.ticker.shared.remove(this.update,this))},d.Tween.prototype.restart=function(){this._running||(PIXI.ticker.shared.add(this.update,this),this._running=!0),this._elapse=0},d.Tween.prototype.finish=function(){for(var t=0;t<this._prms.length;t++){var e=this._prms[t];this._target[e]=this._propsStart[e]+this._propsQueue[e]}this.def.onComplete&&this.def.onComplete(this._target),this.stop()},d.Tween.prototype.update=function(t){var e=t;if(0<this.def.delay)this.def.delay-=e,this.def.delay<=0&&this.def.onStart&&this.def.onStart(this._target);else{var r=this.def.time;this._elapsed+=e,this._elapsed<0?this._elapsed=0:this._elapsed+e/2>this.def.time&&(this._elapsed=this.def.time);for(var i=this._elapsed/this.def.time,n=d.transitions[this.def.transition](i,this.def.variant),o=0;o<this._prms.length;o++){var s=this._prms[o];if(this._propsEnd[s].constructor===Array){var a=(this._propsEnd[s].length-1)*n,u=Math.ceil(a),l=1-(u-a),h=0<u?this._propsEnd[s][u-1]:this._propsStart[s],c=this._propsEnd[s][u];this._target[s]!=c&&(dirty=!0,this._target[s]=h+(c-h)*l)}else this._target[s]=this._propsStart[s]+(this._propsEnd[s]-this._propsStart[s])*n}this.def.onUpdate&&this.def.onUpdate(this._target,i),this._elapsed>=r&&(this.def.loop?(0<this.def.loop&&this.def.loop--,this._elapsed=0):this.stop(),this.def.onComplete&&this.def.onComplete(this._target,this))}},d.transitions={linear:function(t){return t},easeInElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:1==(t/=1)?1:(r=r||.3,e=i<Math.abs(1)?(i=1,r/4):r/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/r)))},bow:function(t){return Math.sin(t*Math.PI)},bounc:function(t){return Math.sin(3*t*Math.PI)},experimental:function(t){return Math.sin(t*Math.PI)},easeOutSine:function(t){return+Math.sin(t*(Math.PI/2))},easeOutCubic:function(t){return--t*t*t+1},easeOutBounce:function(t){return t<1/2.75?7.5625*t*t*1:1<7.5625*(t-=1.5/2.75)*t+.8575?1:7.5625*t*t+.8575},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*(--t*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return(t/=1)*t*t*t*t},easeOutQuint:function(t){return--t*t*t*t*t+1},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t*(Math.PI/2))+1},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?1:+Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInCirc:function(t){return 1<=t?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return+Math.sqrt(1- --t*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:1==(t/=1)?1:(r=r||.3,e=i<Math.abs(1)?(i=1,r/4):r/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/r)+1)},easeInOutElastic:function(t){var e=1.70158,r=0,i=1;return 0===t?0:2==(t/=.5)?1:(r=r||.3*1.5*1,e=i<Math.abs(1)?(i=1,r/4):r/(2*Math.PI)*Math.asin(1/i),t<1?i*Math.pow(2,10*--t)*Math.sin((t-e)*(2*Math.PI)/r)*-.5:i*Math.pow(2,-10*--t)*Math.sin((t-e)*(2*Math.PI)/r)*.5+1)},easeInBack:function(t){return(t/=1)*t*(2.70158*t-1.70158)},custom:function(t,e){return t<.5?0:Math.sin(t*Math.PI*2+Math.PI)},easeOutBack:function(t){return(t-1)*(t-1)*(2.70158*(t-1)+1.70158)+1},easeInBounce:function(t){return 1-d.transitions.easeOutBounce(1-t)},easeInOutBounce:function(t){return t<.5?.5*easingEffects.easeInBounce(2*t):.5*easingEffects.easeOutBounce(2*t-1)+.5}},d}(),Animator=function(){"use strict";var i=[];return{add:function(t,e,r){e.tmp=r,i.push(e)},remove:function(t){var e=i.indexOf(t);-1<e&&i.splice(e,1)},update:function(t){for(var e=0;e<i.length;e++)i[e]&&i[e].running?i[e].update(t):i[e].tmp&&(i[e].parent&&i[e].parent.removeChild(i[e]),this.remove(i[e]))},clear:function(){for(var t=i.slice(0),e=0;e<t.length;e++)t[e].tmp&&(t[e].parent&&t[e].parent.removeChild(t[e]),this.remove(t[e]))}}}(),Animable=function(){function t(t){PIXI.Sprite.call(this,t),this._animations={},this._loop=0,this._elapsed=0,this._fps=10,this._animation=null,this._playlist=[],this.running=!1}return(t.prototype=Object.create(PIXI.Sprite.prototype)).addAnimation=function(t,e,r,i){if(r){this._animations[t]=[];for(var n=0;n<r.length;n++)this._animations[t].push(e[r[n]])}else this._animations[t]=e;if(i){var o=[].concat(this._animations[t]);o.reverse(),this._animations[t].pop(),this._animations[t]=this._animations[t].concat(o)}},t.prototype.addMultiAnimation=function(t,e,r){this._animations[t]=[];for(var i=0;i<r.length;i++){for(var n=[],o=0;o<r[i].length;o++)n.push(e[r[i][o]]);this._animations[t].push(n)}},t.prototype.setAnimation=function(t,e,r){if(!this._animations[t])return null;this._animationName=t,this._animation=this.getAnimation(this._animationName),this._elapsed=0,this._loop=e||0,this._fps=r||this._fps,this.running=!0,this.clearPlaylist()},t.prototype.stopAnimation=function(){this.running=!1},t.prototype.getAnimation=function(t){if(this._animations[t][0].constructor!==Array)return this._animations[t];var e=Math.round(Math.random()*(this._animations[t].length-1));return this._animations[t][e]},t.prototype.addToPlaylist=function(t,e,r){this._playlist.push({name:t,loops:e,fps:r})},t.prototype.clearPlaylist=function(){this._playlist=[]},t.prototype.gotoNext=function(){if(this._playlist.length){var t=this._playlist.pop();this.setAnimation(t.name,t.loops,t.fps)}},t.prototype.update=function(t){if(!this.running||!this._animation)return null;this._elapsed+=0<t?t:0;var e=this._animation,r=(e.length-1)/(this._fps/60);if(this._elapsed>=r)if(this._loop)this._loop--,this._elapsed-=r,this._animation=this.getAnimation(this._animationName);else if(this._elapsed=r,this.running=!1,this._playlist.length){var i=this._playlist.pop();this.setAnimation(i.name,i.loops,i.fps)}var n=Math.round(this._elapsed*this._fps/60);this.texture=e[n]},t.prototype.reset=function(){this._elapsed=0},t}(),SContainer=function(){var a=[],u=[],r=0;function l(t,e){return t.zOrder>e.zOrder?1:t.zOrder<e.zOrder?-1:t.arrivalOrder>e.arrivalOrder?1:t.arrivalOrder<e.arrivalOrder?-1:0}function t(){PIXI.Container.call(this),this.addChildZ=function(t,e){t.zOrder=e||0,t.oldZOrder=1e100,t.arrivalOrder=++r,this.addChild(t)},this.sortChildren=function(){for(var t=this.children,e=t.length,r=0;r<e;r++){var i=t[r];i.zOrder!==i.oldZOrder?a.push(i):u.push(i),i.oldZOrder=i.zOrder}if(0!==a.length){1<a.length&&a.sort(l);for(var n=0,o=0,s=0;o<a.length&&s<u.length;)l(a[o],u[s])<0?t[n++]=a[o++]:t[n++]=u[s++];for(;o<a.length;)t[n++]=a[o++];for(;s<u.length;)t[n++]=u[s++];a.length=0,u.length=0}else u.length=0}}return t.prototype=Object.create(PIXI.Container.prototype),t}(),ParticleManager=function(){var t={},r=[];t.emit=function(t){r.push(t),t.init()},t.update=function(t){for(var e=0;e<r.length;e++)r[e].update(t)},t.clear=function(){for(var t=0;t<r.length;t++)r[t].kill();r=[]};function e(t,e){this._parentEmitter=e,this.startSpeed={x:0,y:0},this.endSpeed={x:0,y:0},this.angle=0,this.angularSpeed=0,this.startSize=1,this.startColor={r:255,g:255,b:255},this.startAlpha=1,this.lifeTime=100,this._endAlpha=0,this._endSize=1,this._endColor={r:255,g:255,b:255},this._acceleration={x:0,y:0},this._colorTransition=!1,this._speedTransition=!1,this._sizeTransition=!1,this._alphaTransition=!1,this._elapsedTime=0,this._ease=null,this._alpha=1,this._size=1,this._velocity={x:0,y:0},this._rotation=0,this.init(),PIXI.Sprite.call(this,t),this.anchor.x=.5,this.anchor.y=.5}(e.prototype=Object.create(PIXI.Sprite.prototype)).init=function(){this._elapsedTime=0,this._velocity.x=this.startSpeed.x,this._velocity.y=this.startSpeed.y,this._rotation=this.angle},e.prototype.resetProps=function(){this._elapsedTime=0,this._velocity.x=this.startSpeed.x,this._velocity.y=this.startSpeed.y,this._rotation=this.angle};return e.prototype.update=function(t){if(this._elapsedTime+=t,this._elapsedTime>=this.lifeTime)return this.kill(),-1;var e=this._elapsedTime/this.lifeTime;if(this._ease&&(e=this._ease(e)),this._alphaTransition&&(this._alpha=(this._endAlpha-this.startAlpha)*e+this.startAlpha),this._sizeTransition&&(this._size=(this._endSize-this.startSize)*e+this.startSize),this._speedTransition&&(this._velocity.x<this.endSpeed.x?this._velocity.x+=this._acceleration.x*t:this._velocity.x>this.endSpeed.x&&(this._velocity.x-=this._acceleration.x*t),this._velocity.y<this.endSpeed.y?this._velocity.y+=this._acceleration.y*t:this._velocity.y>this.endSpeed.y&&(this._velocity.y-=this._acceleration.y*t)),this._colorTransition){var r=e,i=Math.round((this._endColor.r-this.startColor.r)*r)+this.startColor.r,n=Math.round((this._endColor.g-this.startColor.g)*r)+this.startColor.g,o=Math.round((this._endColor.b-this.startColor.b)*r)+this.startColor.b;this._tint=ColorMath.ToHex(i,n,o)}return this.angularSpeed&&(this._rotation+=this.angularSpeed),this.apply(),e},e.prototype.apply=function(){this.x+=this._velocity.x,this.y+=this._velocity.y,this.rotation=this._rotation,this.alpha=this._alpha,this.tint=this._tint,this.scale.x=this.scale.y=this._size},e.prototype.kill=function(){this.parent&&this.parent.removeChild(this),this.destroy()},Object.defineProperties(e.prototype,{endColor:{set:function(t){"0xFFFFFF"!=(this._endColor=t)&&(this._colorTransition=!0)}},acceleration:{get:function(){return this._acceleration},set:function(t){0==(this._acceleration=t).x&&0==t.y||(this._speedTransition=!0)}},endSize:{set:function(t){this._endSize=t,this._sizeTransition=!0}},endAlpha:{set:function(t){this._endAlpha=t,this._alphaTransition=!0}}}),t.Particle=e,t}();function OrientationChecker(t,e){this.startCallback=e,this.incorrectOrientation=!1,this.resumeOnCorrectOrientation=!1;var r=document.createElement("style");r.innerHTML="#rotate-screen {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    top: 0;\n    left: 0;\n    z-index: 2147483647;\n    background-color: #1cc6e3;\n    background-image: url('assets/rotate.png');\n    background-repeat: no-repeat;\n    background-size: contain;\n    background-position: center;\n}",document.head.appendChild(r);var i=document.createElement("div");i.id="rotate-screen",i.style.display="none",(t?document.getElementById(t):document.body).appendChild(i),this.rotate=i;var n=navigator.userAgent;this.desktop=!/Mobi|Android|iP[ao]d|iPhone/i.test(n)&&(!/Mac/.test(n)||!navigator.maxTouchPoints||navigator.maxTouchPoints<=1),this._onResize=this.OnResize.bind(this),window.addEventListener("resize",this._onResize),this.OnResize()}PIXI.ParseTile=function(t){var e=PIXI.loader.resources[t.source];if(e){var r=[];e.textures={};for(var i=0,n=0,o=0;o<t.frames;o++){var s=t.source+"_"+o,a=new PIXI.Rectangle(i,n,t.frameWidth,t.frameHeight);if(e.textures[s]=new PIXI.Texture(e.texture.baseTexture,a,a.clone()),PIXI.utils.TextureCache[s]=e.textures[s],r.push(e.textures[s]),(i+=t.frameWidth)+t.frameWidth>e.texture.width&&(i=0,(n+=t.frameHeight)+t.frameHeight>e.texture.height))break}return r}return!1},Object.defineProperties(PIXI.Container.prototype,{scaleX:{get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{get:function(){return this.scale.y},set:function(t){this.scale.y=t}}}),Object.defineProperties(PIXI.Sprite.prototype,{scaleX:{get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{get:function(){return this.scale.y},set:function(t){this.scale.y=t}},anchorX:{get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},anchorY:{get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}}}),(OrientationChecker.prototype.constructor=OrientationChecker).prototype.OnResize=function(){var t=this.GetScreenOrientation()||"portrait-primary";this.desktop||"portrait-primary"==t||"portrait-secondary"==t?(this.LeaveIncorrectOrientation(),this.startCallback&&(window.scrollTo(0,0),this.startCallback.call(),delete this.startCallback)):this.EnterIncorrectOrientation()},OrientationChecker.prototype.SetGame=function(t){this.game=t},OrientationChecker.prototype.Pause=function(){Game.freeze()},OrientationChecker.prototype.Resume=function(){Game.unfreeze()},OrientationChecker.prototype.EnterIncorrectOrientation=function(){this.ShowIncorrectOrientationMessage(),this.Pause()},OrientationChecker.prototype.LeaveIncorrectOrientation=function(){this.HideIncorrectOrientationMessage(),this.Resume()},OrientationChecker.prototype.ShowIncorrectOrientationMessage=function(){this.incorrectOrientation=!0,this.rotate.style.display="initial"},OrientationChecker.prototype.HideIncorrectOrientationMessage=function(){this.incorrectOrientation=!1,this.rotate.style.display="none"},OrientationChecker.prototype.GetScreenOrientation=function(t){var e=window.screen,r=e.orientation||e.mozOrientation||e.msOrientation;if(r&&"string"==typeof r.type)return r.type;if("string"==typeof r)return r;var i="portrait-primary",n="landscape-primary";if("screen"===t)return e.height>e.width?i:n;if("viewport"===t)return this.visualBounds.height>this.visualBounds.width?i:n;if("window.orientation"===t&&"number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?i:n;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return i;if(window.matchMedia("(orientation: landscape)").matches)return n}return this.visualBounds.height>this.visualBounds.width?i:n};var ClampTextSize=function(t,e,r){var i=Math.min(e/t.width,r/t.height);i<1&&t.scale.set(i)};function keyboard(t){var e={};e.value=t,e.isDown=!1,e.isUp=!0,e.press=void 0,e.release=void 0,e.downHandler=function(t){t.key===e.value&&(e.isUp&&e.press&&e.press(),e.isDown=!0,e.isUp=!1,t.preventDefault())},e.upHandler=function(t){t.key===e.value&&(e.isDown&&e.release&&e.release(),e.isDown=!1,e.isUp=!0,t.preventDefault())};var r=e.downHandler.bind(e),i=e.upHandler.bind(e);return window.addEventListener("keydown",r,!1),window.addEventListener("keyup",i,!1),e.unsubscribe=function(t){window.removeEventListener("keydown",r),window.removeEventListener("keyup",i)},e}var orientationCheck=new OrientationChecker(null,Game.create);