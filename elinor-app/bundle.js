!function(e){function t(t){for(var o,a,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)a=s[p],i[a]&&d.push(i[a][0]),i[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);d.length;)d.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={0:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;r.push([204,1]),n()}({201:function(e,t,n){var o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(r){function a(e,t){if(e=e||"",t=t||{},e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var n=s(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=V(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=V(this._r)),this._g<1&&(this._g=V(this._g)),this._b<1&&(this._b=V(this._b)),this._ok=n.ok,this._tc_id=H++}function s(e){var t={r:0,g:0,b:0},n=1,o=null,r=null,a=null,s=!1,l=!1;return"string"==typeof e&&(e=function(e){e=e.replace(L,"").replace(F,"").toLowerCase();var t,n=!1;if(U[e])e=U[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=W.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=W.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=W.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=W.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=W.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=W.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=W.hex8.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:G(t[4]),format:n?"name":"hex8"}:(t=W.hex6.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:n?"name":"hex"}:(t=W.hex4.exec(e))?{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:G(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=W.hex3.exec(e))&&{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:n?"name":"hex"}}(e)),"object"==i(e)&&(D(e.r)&&D(e.g)&&D(e.b)?(t=function(e,t,n){return{r:255*B(e,255),g:255*B(t,255),b:255*B(n,255)}}(e.r,e.g,e.b),s=!0,l="%"===String(e.r).substr(-1)?"prgb":"rgb"):D(e.h)&&D(e.s)&&D(e.v)?(o=M(e.s),r=M(e.v),t=u(e.h,o,r),s=!0,l="hsv"):D(e.h)&&D(e.s)&&D(e.l)&&(o=M(e.s),a=M(e.l),t=function(e,t,n){function o(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+6*(t-e)*(2/3-n):e}var i,r,a;if(e=B(e,360),t=B(t,100),n=B(n,100),0===t)i=r=a=n;else{var s=.5>n?n*(1+t):n+t-n*t,l=2*n-s;i=o(l,s,e+1/3),r=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*i,g:255*r,b:255*a}}(e.h,o,a),s=!0,l="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=P(n),{ok:s,format:e.format||l,r:N(255,j(t.r,0)),g:N(255,j(t.g,0)),b:N(255,j(t.b,0)),a:n}}function l(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var o,i,r=j(e,t,n),a=N(e,t,n),s=(r+a)/2;if(r==a)o=i=0;else{var l=r-a;switch(i=s>.5?l/(2-r-a):l/(r+a),r){case e:o=(t-n)/l+(n>t?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,l:s}}function c(e,t,n){e=B(e,255),t=B(t,255),n=B(n,255);var o,i,r=j(e,t,n),a=N(e,t,n),s=r,l=r-a;if(i=0===r?0:l/r,r==a)o=0;else{switch(r){case e:o=(t-n)/l+(n>t?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:i,v:s}}function u(e,t,n){e=6*B(e,360),t=B(t,100),n=B(n,100);var o=r.floor(e),i=e-o,a=n*(1-t),s=n*(1-i*t),l=n*(1-(1-i)*t),c=o%6;return{r:255*[n,s,a,a,l,n][c],g:255*[l,n,n,s,a,a][c],b:255*[a,a,l,n,n,s][c]}}function p(e,t,n,o){var i=[O(V(e).toString(16)),O(V(t).toString(16)),O(V(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(e,t,n,o){return[O(x(o)),O(V(e).toString(16)),O(V(t).toString(16)),O(V(n).toString(16))].join("")}function h(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=I(n.s),a(n)}function f(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=I(n.s),a(n)}function g(e){return a(e).desaturate(100)}function m(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=I(n.l),a(n)}function _(e,t){t=0===t?0:t||10;var n=a(e).toRgb();return n.r=j(0,N(255,n.r-V(-t/100*255))),n.g=j(0,N(255,n.g-V(-t/100*255))),n.b=j(0,N(255,n.b-V(-t/100*255))),a(n)}function y(e,t){t=0===t?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=I(n.l),a(n)}function v(e,t){var n=a(e).toHsl(),o=(n.h+t)%360;return n.h=0>o?360+o:o,a(n)}function b(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function w(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function S(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function T(e,t,n){t=t||6,n=n||30;var o=a(e).toHsl(),i=360/n,r=[a(e)];for(o.h=(o.h-(i*t>>1)+720)%360;--t;)o.h=(o.h+i)%360,r.push(a(o));return r}function C(e,t){t=t||6;for(var n=a(e).toHsv(),o=n.h,i=n.s,r=n.v,s=[],l=1/t;t--;)s.push(a({h:o,s:i,v:r})),r=(r+l)%1;return s}function P(e){return e=parseFloat(e),(isNaN(e)||0>e||e>1)&&(e=1),e}function B(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=N(t,j(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function I(e){return N(1,j(0,e))}function A(e){return parseInt(e,16)}function O(e){return 1==e.length?"0"+e:""+e}function M(e){return 1>=e&&(e=100*e+"%"),e}function x(e){return r.round(255*parseFloat(e)).toString(16)}function G(e){return A(e)/255}function D(e){return!!W.CSS_UNIT.exec(e)}var L=/^\s+/,F=/\s+$/,H=0,V=r.round,N=r.min,j=r.max,R=r.random;a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,o=this.toRgb();return e=o.r/255,t=o.g/255,n=o.b/255,.2126*(.03928>=e?e/12.92:r.pow((e+.055)/1.055,2.4))+.7152*(.03928>=t?t/12.92:r.pow((t+.055)/1.055,2.4))+.0722*(.03928>=n?n/12.92:r.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=P(e),this._roundA=V(100*this._a)/100,this},toHsv:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=c(this._r,this._g,this._b),t=V(360*e.h),n=V(100*e.s),o=V(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=l(this._r,this._g,this._b),t=V(360*e.h),n=V(100*e.s),o=V(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,o,i){var r=[O(V(e).toString(16)),O(V(t).toString(16)),O(V(n).toString(16)),O(x(o))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:V(this._r),g:V(this._g),b:V(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+V(this._r)+", "+V(this._g)+", "+V(this._b)+")":"rgba("+V(this._r)+", "+V(this._g)+", "+V(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:V(100*B(this._r,255))+"%",g:V(100*B(this._g,255))+"%",b:V(100*B(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+V(100*B(this._r,255))+"%, "+V(100*B(this._g,255))+"%, "+V(100*B(this._b,255))+"%)":"rgba("+V(100*B(this._r,255))+"%, "+V(100*B(this._g,255))+"%, "+V(100*B(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(E[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+d(this._r,this._g,this._b,this._a),n=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var i=a(e);n="#"+d(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,o=this._a<1&&this._a>=0;return!t&&o&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return a(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(_,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(b,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(S,arguments)}},a.fromRatio=function(e,t){if("object"==i(e)){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]="a"===o?e[o]:M(e[o]));e=n}return a(e,t)},a.equals=function(e,t){return!(!e||!t)&&a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:R(),g:R(),b:R()})},a.mix=function(e,t,n){n=0===n?0:n||50;var o=a(e).toRgb(),i=a(t).toRgb(),r=n/100;return a({r:(i.r-o.r)*r+o.r,g:(i.g-o.g)*r+o.g,b:(i.b-o.b)*r+o.b,a:(i.a-o.a)*r+o.a})},a.readability=function(e,t){var n=a(e),o=a(t);return(r.max(n.getLuminance(),o.getLuminance())+.05)/(r.min(n.getLuminance(),o.getLuminance())+.05)},a.isReadable=function(e,t,n){var o,i,r=a.readability(e,t);switch(i=!1,(o=function(e){var t,n;return t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}(n)).level+o.size){case"AAsmall":case"AAAlarge":i=r>=4.5;break;case"AAlarge":i=r>=3;break;case"AAAsmall":i=r>=7}return i},a.mostReadable=function(e,t,n){var o,i,r,s,l=null,c=0;i=(n=n||{}).includeFallbackColors,r=n.level,s=n.size;for(var u=0;u<t.length;u++)(o=a.readability(e,t[u]))>c&&(c=o,l=a(t[u]));return a.isReadable(e,l,{level:r,size:s})||!i?l:(n.includeFallbackColors=!1,a.mostReadable(e,["#fff","#000"],n))};var U=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},E=a.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(U),W=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=a:void 0===(o=function(){return a}.call(t,n,t,e))||(e.exports=o)}(Math)},204:function(e,t,n){"use strict";n.r(t);var o=n(13),i=n(95),r=n(0),a=function(){function e(){}return e.TalkToOlive="TalkToOlive",e.FindMagGlass="FindMagGlass",e.UseMagGlass="UseMagGlass",e.TalkToAri="TalkToAri",e.FindSieve="FindSieve",e.UseSieve="UseSieve",e.FindShovel="FindShovel",e.UseShovelForSieve="UseShovelForSieve",e.UseSieveAfterShovel="UseSieveAfterShovel",e.ViewCollectionBox="ViewCollectionBox",e.TalkToRanger="TalkToRanger",e.FindWateringCan="FindWateringCan",e.GrowFirstFlower="GrowFirstFlower",e.UseShovelForPlanting="UseShovelForPlanting",e.WaterAfterDigging="WaterAfterDigging",e.FindChrysanthemum="FindChrysanthemum",e.InspectChrysanthemum="InspectChrysanthemum",e.SelectChrysanthemumSeed="SelectChrysanthemumSeed",e.GrowChrysanthemumPlant="GrowChrysanthemumPlant",e.TalkToCamilla="TalkToCamilla",e.FindBinoculars="FindBinoculars",e.FindBirds="FindBirds",e.BirdNotebookInteraction="BirdNotebookInteraction",e.TalkToMsMole="TalkToMsMole",e.FindTorch="FindTorch",e.FindOwl="FindOwl",e.FindMoth="FindMoth",e.FindKatydid="FindKatydid",e.GetHelperMission="GetHelperMission",e.HM_DrawFlowers="HM_DrawFlowers",e.HM_SortByShape="HM_SortByShape",e.HM_Leaf_Spikey="HM_Leaf_Spikey",e.HM_FindKatydid="HM_FindKatydid",e.HM_Sally_Eggs="HM_Sally_Eggs",e.HM_FindToad="HM_FindToad",e.HM_DrawToad="HM_DrawToad",e.HM_Camilla_Rocks="HM_Camilla_Rocks",e.HM_Camilla_Eggs="HM_Camilla_Eggs",e.HM_Camilla_Sap="HM_Camilla_Sap",e.HM_Camilla_Bush="HM_Camilla_Bush",e.HM_Camilla_Flowers="HM_Camilla_Flowers",e.HM_Moms_Caterpillar="HM_Moms_Caterpillar",e.HM_Moms_Bee="HM_Moms_Bee",e.HM_Moms_Snail="HM_Moms_Snail",e.HM_Mole_Flowers="HM_Mole_Flowers",e.HM_Mole_Draw="HM_Mole_Draw",e.HM_Mole_Moth="HM_Mole_Moth",e.HM_Mole_Collection="HM_Mole_Collection",e.HM_Mole_Sieve="HM_Mole_Sieve",e.HM_Tapir_Collection="HM_Tapir_Collection",e.HM_Tapir_Lizard="HM_Tapir_Lizard",e.HM_Tapir_Water="HM_Tapir_Water",e.HM_Tapir_Flowers="HM_Tapir_Flowers",e.HM_Sally_Beetle="HM_Sally_Beetle",e.HM_Sally_Ant="HM_Sally_Ant",e.HM_Sally_Ant_Carry="HM_Sally_Ant_Carry",e.HM_Sally_Ant_Hill="HM_Sally_Ant_Hill",e.HM_Sally_Log="HM_Sally_Log",e}(),s={onboarding_1:[{content:"<p>Hi! I'm Elinor! Do you want to explore with me?</p>",end:3696,start:0}],onboarding_2:[{content:"<p>Let's go to the clubhouse. I'm meeting my friend Olive there!</p>",end:3850,start:0}],onboarding_3_desktop:[{content:"<p>Click where you want me to go! try it!</p>",end:2696,start:0}],onboarding_3_tablet:[{content:"<p>Tap where you want me to go! Try it!</p>",end:2911,start:0}],onboarding_4_desktop:[{content:"<p>You can also click on the arrow buttons,</p>",end:2623,start:0},{content:"<p>Or use the arrow keys on your keyboard</p>",end:5029,start:2623},{content:"<p>to help me move!</p>",end:6403,start:5029}],onboarding_4_tablet:[{content:"<p>You can also tap on the arrow buttons to help me move!</p>",end:3845,start:0}],clubhouse_m1_01:[{content:"<p>Hi Olive!</p>",end:1071,start:0},{content:"<p>Are you ready to have a nature adventure with me? </p>",end:3729,start:1071}],clubhouse_m1_02:[{content:"<p>Hi Elinor! Yes, I can't wait! </p>",end:2789,start:0},{content:"<p>Let's look for some tools for our nature adventure! </p>",end:6031,start:2879}],clubhouse_m1_03:[{content:"<p>Great idea!</p>",end:1120,start:0}],clubhouse_m1_03_hint:[{content:"<p>Let's look for some tools to help us observe! </p>",end:2570,start:0}],clubhouse_m1_04:[{content:"<p>We found a magnifying glass! </p>",end:1957,start:0},{content:"<p>It makes things look bigger to help us observe them! </p>",end:5382,start:2134}],clubhouse_m1_05:[{content:"<p>That is so interesting! Let's try it!</p>",end:4090,start:0}],clubhouse_m1_05_hint:[{content:"<p>Tap on the magnifying glass when you are near something you want to see up close.</p>",end:3973,start:0}],clubhouse_m2_01:[{content:"<p>Ooh, a butterfly!</p>",end:2501,start:0},{content:"<p>Try using the magnifying glass to take a closer look! </p>",end:6348,start:2679}],clubhouse_m2_01_hint:[{content:"<p>Try using the magnifying glass to take a closer look!</p>",end:3654,start:0}],clubhouse_m2_02:[{content:"<p>OK!</p>",end:787,start:0}],clubhouse_m2_03:[{content:"<p>Move the magnifying glass over the butterfly to see it close up!</p>",end:3809,start:0}],clubhouse_m2_04:[{content:"<p>That's it! Wow! Look at the beautifully colored wings! </p>",end:4959,start:0}],clubhouse_m2_05:[{content:"<p>Wow! Seeing small things up close is so interesting!</p>",end:5183,start:0},{content:"<p>We need more observations!</p>",end:7994,start:5183}],clubhouse_m2_06:[{content:"<p>Yeah!</p>",end:1250,start:0}],riverbank_m1_01:[{content:"<p>Hi Ari! Olive and I are exploring! Want to join us?</p>",end:4873,start:0}],riverbank_m1_02:[{content:"<p>Ya! Hey, look over there! </p>",end:2325,start:0},{content:"<p>It's a tool we can use to find things in the dirt!</p>",end:5034,start:2325}],riverbank_m1_02_hint:[{content:"<p>See if you can find the sifter.</p>",end:1895,start:0},{content:"<p>We can use it to find things in the dirt. </p>",end:4239,start:1971}],riverbank_m1_03:[{content:"<p>This is a Sifter. You can scoop up dirt, </p>",end:2953,start:0},{content:"<p>Then give it a shake to see if you can find a nature treasure. </p>",end:6011,start:2953}],riverbank_m1_04:[{content:'<p>Oooh! Did you say "Nature Treasure"?!</p>',end:3578,start:0}],riverbank_m2_01:[{content:"<p>Yeah! We can find things like rocks and shells!</p>",end:3189,start:0},{content:"<p>Use the sifter on that pile of dirt. </p>",end:5466,start:3189}],riverbank_m2_02:[{content:"<p>Ooh! We found a Nature Treasure! </p>",end:2800,start:0},{content:"<p>It's so cool! </p>",end:4690,start:2866}],riverbank_m2_02_hint:[{content:"<p>Use the sifter on that pile of dirt.</p>",end:2319,start:0}],riverbank_m3_00:[{content:"<p>Now find the shovel. </p>",end:1509,start:0}],riverbank_m3_01:[{content:"<p>You found a shovel! Try using it to see what happens.</p>",end:3770,start:0}],riverbank_m3_02:[{content:"<p>You made another pile of dirt! </p>",end:2252,start:0},{content:"<p>Try using the sifter on it to look for more treasure! </p>",end:5479,start:2252}],riverbank_m3_03:[{content:"<p>Great discovery! I'm going to add this treasure to our collection. </p>",end:3295,start:0},{content:"<p>Tap on me to look in our collection box. </p>",end:5796,start:3364}],riverbank_m3_04:[{content:"<p>Finding treasure is so much fun!</p>",end:2543,start:0},{content:"<p>Let's look for some more.</p>",end:4304,start:2543}],yard_m1_01:[{content:"<p>Hi, Mom! What are you doing? </p>",end:2219,start:0}],yard_m1_02:[{content:"<p>Oh, hi kids! </p>",end:1074,start:0},{content:"<p>I could use some help watering these plants. </p>",end:3572,start:1074},{content:"<p>Can you get the green watering can? </p>",end:5636,start:3572}],yard_m1_03:[{content:"<p>Great! Now, use the watering can on a pile of dirt.</p>",end:3946,start:0}],yard_m1_04:[{content:"<p>Wonderful! </p>",end:1279,start:0},{content:"<p>You helped grow a colorful flower for our garden.</p>",end:4601,start:1279}],yard_m2_01:[{content:"<p>I see you have a shovel. </p>",end:1915,start:0},{content:"<p>Try using it to make a new pile of dirt in the garden. </p>",end:5284,start:1985}],yard_m2_02:[{content:"<p>Great! Now try watering the pile of dirt!</p>",end:3530,start:0}],yard_m2_03:[{content:"<p>Look! You grew a flower!</p>",end:2500,start:0},{content:"<p>With a shovel and watering can, you can grow flowers anywhere you'd like!</p>",end:7163,start:2520}],yard_m3_01:[{content:"<p>Take a look around, and see if you can find a yellow flower. </p>",end:4330,start:0},{content:"<p>Then take a close look at it with a magnifying glass.</p>",end:8021,start:4330}],yard_m3_02:[{content:"<p>There's the yellow flower!</p>",end:2005,start:0},{content:"<p>Try using the magnifying glass to take a closer look. ",end:5566,start:2062}],yard_m3_03:[{content:"<p>Great! You collected one of its seeds!</p>",end:3030,start:0},{content:"<p>Go to your seed bag to choose it.</p>",end:5510,start:3030}],yard_m3_04:[{content:"<p>Fantastic!</p>",end:1284,start:0},{content:"<p>Now use the shovel and watering can to grow the new flower! </p>",end:5433,start:1300}],yard_m3_05_fail:[{content:"<p>Try choosing the other flower in the seed bag.</p>",end:3441,start:0}],yard_m3_05_pass:[{content:"<p>Ooh! It's so colorful!</p>",end:3322,start:0}],yard_m3_06:[{content:"<p>Great work! Keep an eye out for new flowers to collect!</p>",end:4122,start:0},{content:"<p>And remember, you can use the shovel and watering can</p>",end:7260,start:4122},{content:"<p>to grow flowers wherever you want.</p>",end:9596,start:7260}],deep_m1_00:[{content:"<p>Hi Camilla! What are you doing? </p>",end:2196,start:0}],deep_m1_01:[{content:"<p>I hear birds! I wish I could see them.</p>",end:3509,start:0},{content:"<p>I think I need a tool that helps me see things that are far away.</p>",end:8234,start:3509},{content:"<p>Can you help me?</p>",end:9199,start:8234}],deep_m1_02:[{content:"<p>Let's see what we can find!</p>",end:1850,start:0}],deep_m1_03:[{content:"<p>Oh wow! Binoculars!</p>",end:3135,start:0},{content:"<p>They will be perfect to help us look at far away birds.</p>",end:6799,start:3135}],deep_m2_01:[{content:"<p>Let's see if we can find three birds of different colors with the binoculars!</p>",end:4936,start:0}],deep_m2_02:[{content:"<p>Ok, let's do it!</p>",end:1898,start:0}],deep_m2_03:[{content:"<p>Look for shaking leaves in the trees.</p>",end:2351,start:0},{content:"<p>There might be birds hiding in there!</p>",end:3967,start:2351}],deep_m2_04:[{content:"<p>Oooh! It's a blue bird!</p>",end:2975,start:0}],deep_m2_05:[{content:"<p>Two more birds to find! Let's go! </p>",end:2764,start:0}],deep_m2_06:[{content:"<p>We found a red bird!</p>",end:1525,start:0}],deep_m2_07:[{content:"<p>We have one more bird to find!</p>",end:2412,start:0}],deep_m2_08:[{content:"<p>Look! It's a yellow bird!</p>",end:1856,start:0}],deep_m2_09:[{content:"<p>We found one blue bird, one red bird, and one yellow bird!</p>",end:4906,start:0}],deep_m2_10:[{content:"<p>Thanks Elinor! Birds come in all different shapes, sizes and colors.</p>",end:5359,start:0}],deep_m3_01:[{content:"<p>Now that we've made these interesting observations,</p>",end:2997,start:0},{content:"<p>We can record what we saw in my notebook!</p>",end:5642,start:2997}],deep_m3_02:[{content:"<p>Let's color in the birds to match the ones that we observed!</p>",end:3338,start:0},{content:"<p>Blue, red and yellow!</p>",end:6261,start:3338}],deep_m3_03:[{content:"<p>Nice coloring! You can also add stickers. Tap on the sticker icon to see them!</p>",end:7045,start:0}],deep_m3_04:[{content:"<p>You can drag the stickers to your picture!</p>",end:2586,start:0}],deep_m3_06:[{content:"<p>The notebook is great for recording what we observe.</p>",end:3500,start:0},{content:"<p>Tap on me anytime to open the notebook.</p>",end:6e3,start:3550}],deep_m3_07:[{content:"<p>Let’s make more observations!</p>",end:3500,start:0}],collectionbox_entry_1:[{content:"<p>Try sorting the treasures by size!</p>",end:2597,start:0}],collectionbox_entry_2:[{content:"<p>Can you sort your treasures by color?</p>",end:2352,start:0}],collectionbox_entry_3:[{content:"<p>Try sorting the treasures by shape!</p>",end:2234,start:0}],collectionbox_intro:[{content:"<p>This is your collection box!</p>",end:2015,start:0},{content:"<p>You keep all the nature treasures you find here.</p>",end:4767,start:2015},{content:"<p>You can organize them any way you like.</p>",end:7477,start:4767}],collectionbox_payoff_1:[{content:"<p>It's looking great! </p>",end:1703,start:0}],collectionbox_payoff_2:[{content:"<p>Great job! How else can you sort your collection?</p>",end:3054,start:0}],collectionbox_payoff_3:[{content:"<p>Your sorting is treasure-iffic!</p>",end:2321,start:0}],collectionbox_payoff_4:[{content:"<p>I love sorting!</p>",end:1373,start:0}],collectionbox_payoff_5:[{content:"<p>Scientists sort objects. Way to go Scientists!</p>",end:4295,start:0}],cuo_bino_acorn:[{content:"<p>An acorn! it's a tree seed!</p>",end:2843,start:0}],cuo_bino_babybird_1:[{content:"<p>That chick is trying to find its mother!</p>",end:2495,start:0}],cuo_bino_babybird_2:[{content:"<p>Oh, wow! There are two baby birds!</p>",end:3359,start:0}],cuo_bino_babybird_3:[{content:"<p>These baby birds look like they're waiting for their mom to bring them some food.</p>",end:4194,start:0}],cuo_bino_caterpillar:[{content:"<p>Oooh! It's a Caterpillar!</p>",end:2700,start:0},{content:"<p>Did you know that someday it will become a butterfly?</p>",end:7e3,start:2800}],cuo_bino_clubhouse:[{content:"<p>Look at the drawings on the clubhouse!</p>",end:2410,start:0},{content:"<p>We can make more art in the notebook.</p>",end:4970,start:2410}],cuo_bino_clubhouse_2:[{content:"<p>Let's keep drawing in the notebook</p>",end:2060,start:0},{content:"<p>So we can share what we found with our friends in the clubhouse!</p>",end:5685,start:2060}],cuo_bino_eggs:[{content:"<p>Bird eggs can be different colors and sizes.</p>",end:2890,start:0}],cuo_bino_web:[{content:"<p>Spiders make their webs and live in them.</p>",end:3024,start:0}],cuo_fl_katydid_1:[{content:"<p>Oooh! A Katydid!</p>",end:2171,start:0},{content:"<p>They're nocturnal, so they are awake at night!</p>",end:5350,start:2171}],cuo_fl_katydid_2:[{content:"<p>A Katydid! They use their wings to make sounds!</p>",end:4239,start:0}],cuo_fl_moth:[{content:"<p>Oooh, Moths! Look! They're following the light! </p>",end:4650,start:0}],cuo_fl_owl:[{content:"<p>Ooh an Owl! Their eyes help them see at night.</p>",end:3354,start:0}],cuo_fl_toad_1:[{content:"<p>Toads are nocturnal. So they like to be out at night time!</p>",end:4101,start:0}],cuo_fl_toad_2:[{content:"<p>Toads can be different colors.</p>",end:2441,start:0}],cuo_fl_toad_3:[{content:"<p>Toads make their throat bigger to make their voice louder.</p>",end:3631,start:0}],cuo_fl_web:[{content:"<p>A spider made its home in this log.</p>",end:2810,start:0}],cuo_mg_acorn:[{content:"<p>These acorns fell out of the tree, on to the ground.</p>",end:3711,start:0}],cuo_mg_ant_1:[{content:"<p>An ant! Let's count its legs!</p>",end:3194,start:0},{content:"<p>1, 2, 3, 4, 5, 6!</p>",end:9221,start:3194},{content:"<p>Insects have 6 legs.</p>",end:12794,start:9221},{content:"<p>So, this ant is an insect!</p>",end:15871,start:12794}],cuo_mg_ant_2:[{content:"<p>That ant is carrying a leaf!</p>",end:2687,start:0},{content:"<p>The ant's body parts help it carry all kinds of things!</p>",end:6303,start:2687}],cuo_mg_ant_3:[{content:"<p>This is an ant hill, where ants live!</p>",end:2100,start:0},{content:"<p>It looks like they made it mud, sticks and leaves.</p>",end:5e3,start:2150}],cuo_mg_bees:[{content:"<p>Bees gather nectar to take back to the hive as food.</p>",end:3352,start:0}],cuo_mg_bush_butterfly:[{content:"<p>A Butterfly! I wonder if it's looking for a flower to drink nectar?</p>",end:4632,start:0}],cuo_mg_bush_caterpillar:[{content:"<p>A Caterpillar is hiding in this bush!</p>",end:2597,start:0},{content:"<p>Notice how many legs it has.</p>",end:4709,start:2597}],cuo_mg_bush_katydid:[{content:"<p>A green Katydid lives in this bush.</p>",end:2607,start:0}],cuo_mg_bush_toad:[{content:"<p>A bush gives this toad shade from the sun!</p>",end:3023,start:0}],cuo_mg_butterfly:[{content:"<p>A Butterfly! The wings have such a beautiful pattern.</p>",end:4122,start:0}],cuo_mg_chrysalis:[{content:"<p>A Chrysalis!</p>",end:1337,start:0},{content:"<p>There's a caterpillar inside there that's slowly turning into a butterfly.</p>",end:6276,start:1337}],cuo_mg_elm_1:[{content:"<p>It's an Elm leaf. The edges are really spiky.</p>",end:3215,start:0}],cuo_mg_elm_2:[{content:"<p>This Elm leaf is starting to change color.</p>",end:2672,start:0},{content:"<p>It's turning yellow!</p>",end:4544,start:2672}],cuo_mg_elm_3:[{content:"<p>This Elm leaf is turning brown.</p>",end:1954,start:0}],cuo_mg_firefly_1:[{content:"<p>Wow. Look how the Firefly can light up!</p>",end:3413,start:0}],cuo_mg_firefly_2:[{content:"<p>Fireflies talk to each other by blinking their lights in patterns!</p>",end:3967,start:0}],cuo_mg_fish:[{content:"<p>Fish live in water.</p>",end:1336,start:0}],cuo_mg_ginko_1:[{content:"<p>it's a Ginko leaf. It kind of looks like a fan.</p>",end:3444,start:0}],cuo_mg_ginko_2:[{content:"<p>This Ginko leaf is turning yellow.</p>",end:2292,start:0}],cuo_mg_ginko_3:[{content:"<p>This Ginko leaf is turning brown.</p>",end:2270,start:0}],cuo_mg_ladybug_2:[{content:"<p>A ladybug!</p>",end:1567,start:0},{content:"<p>It's wings are hiding underneath its hard shell.</p>",end:5088,start:1567}],cuo_mg_ladybug_1:[{content:"<p>How many spots does this ladybug have? </p>",end:3224,start:0}],cuo_mg_lizard_1:[{content:"<p>Check it out!</p>",end:1312,start:0},{content:"<p>This Lizard is warming itself up on the sunny rock!</p>",end:5027,start:1312}],cuo_mg_lizard_2:[{content:"<p>Wow! That lizard is the same color as the log it's sitting on.</p>",end:5130,start:0},{content:"<p>So it's hard to find. It's camouflaged!</p>",end:8506,start:5130}],cuo_mg_lizard_3:[{content:"<p>Lizards can't get warm by themselves.</p>",end:2693,start:0},{content:"<p>So they like to sit in places that get a lot of sun!</p>",end:6053,start:2693}],cuo_mg_maple_1:[{content:"<p>It's a Maple leaf!</p>",end:1759,start:0},{content:'<p>It has three parts that stick out, called "lobes". </p>',end:5205,start:1759}],cuo_mg_maple_2:[{content:"<p>This Maple leaf is turning red!</p>",end:2160,start:0}],cuo_mg_maple_3:[{content:"<p>This Maple leaf is turning brown.</p>",end:2207,start:0}],cuo_mg_rock_ant:[{content:"<p>An ant!</p>",end:1089,start:0},{content:"<p>Lots of living things can be found under a rock!</p>",end:5142,start:1089}],cuo_mg_rock_bug:[{content:"<p>A Roly Poly!</p>",end:1989,start:0},{content:"<p>Sometimes they roll up into little balls to protect themselves!</p>",end:6479,start:1989}],cuo_mg_rock_caterpillar:[{content:"<p>It's a caterpillar!</p>",end:2032,start:0},{content:"<p>Caterpillars become butterflies.</p>",end:4853,start:2032}],cuo_mg_rock_worm:[{content:"<p>It's a worm!</p>",end:1274,start:0},{content:"<p>They also like to live in the dirt!</p>",end:3488,start:1274}],cuo_mg_sap:[{content:"<p>Look at that ooey gooey sap coming out of the tree!</p>",end:3376,start:0}],cuo_mg_snail_1:[{content:"<p>Snails build their shells as they grow.</p>",end:2858,start:0},{content:"<p>Look at the interesting shape and pattern!</p>",end:5824,start:2858}],cuo_mg_snail_2:[{content:"<p>Look at the Snail's shiny slime trail!</p>",end:2602,start:0},{content:"<p>That helps the snail move across the ground.</p>",end:5781,start:2602}],cuo_mg_turtle_1:[{content:"<p>Turtles can live on land, and in the water.</p>",end:2810,start:0}],cuo_mg_turtle_2:[{content:"<p>A Turtle!</p>",end:1146,start:0},{content:"<p>Notice the hard shell that protects its body!</p>",end:4106,start:1146}],cuo_mg_Bell_1:[{content:"<p>A Bellflower!</p>",end:1552,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:3927,start:1552}],cuo_mg_Bell_2:[{content:"<p>Butterflies love to drink nectar from this flower!</p>",end:3e3,start:0}],cuo_mg_Chrysanthemum_1:[{content:"<p>A Chrysanthemum!</p>",end:1647,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:4165,start:1647}],cuo_mg_Chrysanthemum_2:[{content:"<p>This flower is made up of a bunch of small flowers.</p>",end:3253,start:0}],cuo_mg_Cosmos_1:[{content:'<p>This colorful flower is called "Cosmos".</p>',end:3104,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:5754,start:3104}],cuo_mg_Cosmos_2:[{content:"<p>Bees love to drink nectar from this flower.</p>",end:3013,start:0}],cuo_mg_Daisy_1:[{content:"<p>Pink Daisy!</p>",end:1503,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:4053,start:1503}],cuo_mg_Daisy_2:[{content:"<p>These flowers have a bright yellow center.</p>",end:3013,start:0}],cuo_mg_Tulip_1:[{content:"<p>A Tulip!</p>",end:1199,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:3642,start:1199}],cuo_mg_Tulip_2:[{content:"<p>I love the smell of these Tulips!</p>",end:2656,start:0}],cuo_mg_White_1:[{content:'<p>This flower is called "Culver\'s Root".</p>',end:2869,start:0},{content:"<p>Let's collect one of its seeds!</p>",end:5055,start:2900}],cuo_mg_White_2:[{content:"<p>These flowers are the same shape as Rabbit ears!</p>",end:3578,start:0}],ari_tap:[{content:"<p>Wow!</p>",end:1217,start:0}],collectionbox_reminder:[{content:"<p>Use the sifter on a dirt mound to find new treasure.</p>",end:3082,start:0},{content:"<p>And tap on me any time to see what you've collected.</p>",end:6272,start:3082}],elinor_missing_tool:[{content:"<p>Hmmm... I don't have the right tool to look here yet.</p>",end:3114,start:0}],elinor_sieveFail:[{content:"<p>Hmmm... nothing here. Let's try a pile of dirt.</p>",end:3904,start:0}],elinor_tap:[{content:"<p>Yay!</p>",end:1187,start:0}],final_unlock_1:[{content:"<p>We helped everyone!</p>",end:1754,start:0}],final_unlock_2:[{content:"<p>You unlocked all the tools!</p>",end:2900,start:0},{content:"<p>Now we can explore and discover all kinds of things in nature!</p>",end:6400,start:3e3},{content:"<p>We need more observations!</p>",end:1e4,start:6500}],mission_keep_going_elinor:[{content:"<p>Keep exploring new areas to find all of your tools!</p>",end:4133,start:0}],mission_keep_going:[{content:"<p>Keep exploring new areas to find all of your tools.</p>",end:3260,start:0}],use_magnifying_glass:[{content:"<p>Magnifying Glass.</p>",end:1072,start:0}],use_seeds:[{content:"<p>Seeds.</p>",end:610,start:0}],onboarding_mg:[{content:"<p>Move the magnifying glass over the butterfly to see it close up.</p>",end:3920,start:0}],onboarding_sifter:[{content:"<p>Move the sifter back and forth to find the treasure hiding under the dirt.</p>",end:4106,start:0},{content:"<p>Shake shake shake shake shake! Yah!</p>",end:6922,start:4106}],use_binoculars:[{content:"<p>Binoculars.</p>",end:788,start:0}],use_flashlight:[{content:"<p>Flashlight.</p>",end:762,start:0}],newflower_obs_02:[{content:"<p>Great! now select the new seed from the seed bag!</p>",end:3909,start:0},{content:"<p>Use your shovel and watering can to sow the new seed!</p>",end:7606,start:3909}],notebook_reminder:[{content:"<p>Don't forget about the notebook!</p>",end:1662,start:0},{content:"<p>Tap on me any time to open it up.</p>",end:4089,start:1662},{content:"<p>And we can record some of our observations!</p>",end:6836,start:4260}],onboarding_binoculars:[{content:"<p>Use the slider to look closer</p>",end:2789,start:0},{content:"<p>and then drag your finger on the screen to look around!</p>",end:6314,start:2789}],olive_tap:[{content:"<p>Hmm.. how interesting!</p>",end:3487,start:0}],use_shovel:[{content:"<p>Shovel.</p>",end:561,start:0}],use_sifter:[{content:"<p>Sifter.</p>",end:693,start:0}],use_watering_can:[{content:"<p>Watering Can.</p>",end:862,start:0}],nb_cosmos:[{content:"<p>This is a Cosmos flower.</p>",end:2229,start:0},{content:"<p>Let's look for one, so we can record its color here.</p>",end:5591,start:2229}],nb_ant:[{content:"<p>You can observe ants near the clubhouse!</p>",end:2480,start:0}],nb_ant_hill:[{content:"<p>Let's find an ant hill to make close up observations!</p>",end:3391,start:0},{content:"<p>Then, we can color what we saw.</p>",end:5455,start:3391}],nb_baby_bird:[{content:"<p>I saw a nest in a tree close to the river.</p>",end:2581,start:0},{content:"<p>Let's take a look to see if any baby birds have hatched yet!</p>",end:6373,start:2581}],nb_bell_flower:[{content:"<p>Let's find a Bell flower to see what color it is!</p>",end:2394,start:0},{content:"<p>And then paint what we saw here.</p>",end:4053,start:2394}],nb_caterpillar:[{content:"<p>There's a caterpillar on the tree near your house, Elinor!</p>",end:2826,start:0},{content:"<p>Let's observe it to see its colors!</p>",end:5279,start:2826}],nb_chrysalis:[{content:"<p>Let's look for a Chrysalis in a tree!</p>",end:2186,start:0},{content:"<p>and see what color it is!</p>",end:3728,start:2186}],nb_daisy:[{content:"<p>What color was is center of this daisy?</p>",end:2426,start:0},{content:"<p>Let's plant one and take a look!</p>",end:4768,start:2426}],nb_eggs:[{content:"<p>Let's look for nests in trees while we're exploring.</p>",end:3216,start:0},{content:"<p>We might see some eggs!</p>",end:4911,start:3216}],nb_ladybug:[{content:"<p>Hmm. I wonder if there are ladybugs that are different colors?</p>",end:4026,start:0},{content:"<p>Let's observe some and see!</p>",end:6485,start:4026}],nb_lizard:[{content:"<p>Lizards use their color to look like the things around them!</p>",end:3600,start:0},{content:"<p>Let's look for one and record our observations here.</p>",end:7109,start:3600}],nb_spider:[{content:"<p>Spiders make the webs that they live iin.</p>",end:3130,start:0},{content:"<p>I wonder if all spider webs are the same shape?</p>",end:6453,start:3130}],nb_toad:[{content:"<p>Toads can be different colors.</p>",end:1813,start:0},{content:"<p>Let's look at a few toads and compare their colors.</p>",end:5072,start:1813}],nb_tulip:[{content:"<p>Tulips come in different colors.</p>",end:2090,start:0},{content:"<p>Let's find one and paint what we see!</p>",end:4421,start:2090}],tapir_help_binoculars:[{content:"<p>Look for three different birds with the binocular.</p>",end:4335,start:0}],tapir_help_flashlight:[{content:"<p>Use the flashlight to find three creatures who are awake at night!</p>",end:5930,start:0}],tapir_help_mg:[{content:"<p>Use the magnifying glass to look closely at the butterfly.</p>",end:3856,start:0}],tapir_help_notebook:[{content:"<p>Tap on Olive to use the notebook.</p>",end:2602,start:0}],tapir_help_shovel:[{content:"<p>Dig a hole with the shovel. Then, use the sifter. </p>",end:3823,start:0}],tapir_song_ari:[{content:"<p><em>To keep going this way first help Ari uncover hidden treasures in the ground</em></p>",end:6058,start:0},{content:"<p><em>Who knows what you'll discover?</em></p>",end:8805,start:6058}],tapir_help_sifter:[{content:"<p>Use the sifter to find things in the dirt.</p>",end:3634,start:0}],tapir_song_camilla:[{content:"<p><em>To keep going this way, help Camilla find birds..</em></p>",end:4157,start:0},{content:"<p><em>She's looking for three colors, what do you observe?</em></p>",end:8083,start:4157}],tapir_song_mole:[{content:"<p><em>Help Ms Mole and use your light.. </em></p>",end:2741,start:0},{content:"<p><em>Look for creatures that come out at night!</em></p>",end:4965,start:2741}],tapir_song_mom:[{content:"<p><em>To keep going this way, see what Mom needs...</em></p>",end:3877,start:0},{content:"<p><em>Help her grow a garden by planting flower seeds!</em></p>",end:8543,start:3877}],tapir_song_olive:[{content:"<p><em>To keep going this way first you have to try...</em></p>",end:3802,start:0},{content:"<p><em>looking closely at the colorful Butterfly!</em></p>",end:7674,start:3802}],tool_hint_binoc:[{content:"<p>Try using the binoculars to look at far away things!</p>",end:3946,start:0}],tool_hint_light:[{content:"<p>Try using the flashlight. It helps you see in dark places!</p>",end:4212,start:0}],tool_hint_mag:[{content:"<p>Try using the magnifying glass to look at this closely!</p>",end:3759,start:0}],tool_hint_nothing:[{content:"<p>There's nothing to observe here with that tool.</p>",end:2656,start:0}],tool_hint_sifter:[{content:"<p>Try making a pile with the shovel first</p>",end:2704,start:0},{content:"<p>And then we can use the sifter. </p>",end:4986,start:2704}],tool_hint_wateringcan:[{content:"<p>Try digging a hole with the shovel first.</p>",end:3157,start:0},{content:"<p>And then use the watering can.</p>",end:5301,start:3157}],night_m1_01:[{content:"<p>Hi Mz Mole!</p>",end:1281,start:222},{content:"<p>Why are you in the forest at night time?</p>",end:3914,start:1724}],night_m1_02:[{content:"<p>Hi kids! I’m exploring!</p>",end:3372,start:0},{content:"<p>There are so many interesting things</p>",end:5756,start:3448},{content:"<p>to observe at night time.</p>",end:8121,start:5756},{content:"<p>Can you find a flashlight </p>",end:10221,start:8302},{content:"<p>so you can see better in the dark?</p>",end:12187,start:10259}],night_m1_02_hint:[{content:"<p> Can you find a flashlight</p>",end:2845,start:208},{content:"<p>so you can see better in the dark?</p>",end:4725,start:2866}],night_m1_03:[{content:"<p>That’s great!</p>",end:1556,start:0},{content:"<p>Now you can use it to make</p>",end:4032,start:1863},{content:"<p>some observations here in the dark</p>",end:6152,start:4130},{content:"<p>that means they’re awake at night!</p>",end:12777,start:10184},{content:"<p>Let’s look for animals that are nocturnal</p>",end:10125,start:6457}],night_m2_01:[{content:"<p>Let’s see what else we can find!</p>",end:2329,start:483}],night_m2_03:[{content:"<p>Let's find one more creature!</p>",end:5933,start:3949},{content:"<p>That is so interesting!</p>",end:3755,start:1200},{content:"<p>Wow!</p>",end:1088,start:271}],night_m2_05:[{content:"<p>Owls have big eyes</p>",end:2706,start:165},{content:"<p>that help them see at night.</p>",end:5169,start:2895}],night_m3_01:[{content:"<p>Keep observing with the flashlight</p>",end:2503,start:94},{content:"<p>to see if you can find</p>",end:4745,start:2555},{content:"<p>other nocturnal creatures.</p>",end:6151,start:4797}],night_m3_02:[{content:"<p>I notice the moths like to fly near the light.</p>",end:3941,start:125}],night_m4_01:[{content:"<p>Listen! I hear a chirping noise.</p>",end:2778,start:351},{content:"<p>Do you know what is making that sound?</p>",end:5342,start:2897}],night_m4_02:[{content:"<p>Katydids don’t have good eyesight. </p>",end:2721,start:118},{content:"<p>Instead they listen, smell</p>",end:4345,start:2884},{content:"<p>and touch to know</p>",end:6498,start:4501},{content:"<p>where they are going.</p>",end:8128,start:6498}],night_m4_04:[{content:"<p>Great work observing! </p>",end:3168,start:1491},{content:"<p>That’s right!</p>",end:1302,start:340}],night_m4_03:[{content:"<p>different animals use different senses</p>",end:3868,start:1534},{content:"<p>to find their way around!</p>",end:5561,start:3947},{content:"<p>Wow</p>",end:1256,start:397}],HM_Moms_Bee:[{content:"<p>The bees seem to like the nectar in the flowers!</p>",end:2762,start:61},{content:"<p>Take a look at it with your magnifying glass!</p>",end:5414,start:2760}],HM_Moms_Caterpillar:[{content:"<p>There is a creature eating leaves in the tree over there.</p>",end:3087,start:0},{content:"<p>What creature is it?</p>",end:4762,start:3087}],HM_SortByShape:[{content:"<p>Can you sort them based on their shape</p>",end:3061,start:0}],help_mom_collection2:[{content:"<p>Try sorting your nature treasures by their shape.</p>",end:3114,start:0},{content:"<p>You can sort by circles, triangles and squares to start.</p>",end:7200,start:3114}],HM_DrawFlowers:[{content:"<p>Flowers use their pollen to attract bees</p>",end:2868,start:0},{content:"<p>Flowers use their color to attract bees</p>",end:3077,start:0},{content:"<p>and other animals that collect pollen</p>",end:5215,start:3077}],help_mom_flowers2:[{content:"<p>Try to color this flower to look like the flowers you've observed.</p>",end:3792,start:0}],ranger_help:[{content:"<p>Hi kids! Can you help me out?</p>",end:2559,start:0}],HM_Moms_Snail:[{content:"<p>Take a close look at the snail.</p>",end:2170,start:0},{content:"<p>What do you notice about the shape of its shell?</p>",end:5017,start:2170}],camilla_help:[{content:"<p>Hi friends! Can you help me out?</p>",end:2495,start:0}],Camilla_Eggs2:[{content:"<p>Color in these eggs.</p>",end:1863,start:0}],HM_Camilla_Flowers:[{content:"<p>I hear butterflies like purple flowers.</p>",end:3120,start:0},{content:"<p>Can you plant four purple flowers to see if they come?</p>",end:6282,start:3120}],HM_Leaf_Spikey:[{content:"<p>Leaves are really interesting. They come in different shapes and sizes.</p>",end:4752,start:0},{content:"<p>Let's find one that is spiky.</p>",end:6862,start:4752}],Camilla_Eggs:[{content:"<p>Bird eggs can have spots, and they come in all sorts of colors.</p>",end:3834,start:0}],HM_Camilla_Rocks:[{content:"<p>I LOVE looking under rocks!</p>",end:2757,start:0},{content:"<p>You never know what you might find. </p>",end:4579,start:2757},{content:"<p>Can you look under a rock and make a picture of what you see?</p>",end:7555,start:4579}],HM_Camilla_Bush:[{content:"<p>Do you hear rustling from a bush?</p>",end:2426,start:0},{content:"<p>I wonder what animal is living in there?</p>",end:5066,start:2426},{content:"<p>Let's take a look.</p>",end:6431,start:5066}],HM_Camilla_Sap:[{content:"<p>Have you noticed the goopy sap coming out of that tree?</p>",end:3475,start:0},{content:"<p>You can use the magnifying glass to investigate!</p>",end:6766,start:3475}],HM_Mole_Collection:[{content:"<p>Can you show me your collection of treasures?</p>",end:3855,start:0}],help_mole_collection2:[{content:"<p>Wow! What a collection!</p>",end:3237,start:0},{content:"<p>Can you sort all your treasures by their color?</p>",end:7482,start:3237}],HM_Mole_Draw:[{content:"<p>Drawing animals helps us learn about them!</p>",end:3413,start:0},{content:"<p>Can you color this picture of an owl for me?</p>",end:6778,start:3413}],help_mole_color2:[{content:"<p>Can you color this picture of an owl for me?</p>",end:3525,start:0}],HM_Mole_Sieve:[{content:"<p>Use your shovel and sifter to find two things in the dirt.</p>",end:5600,start:0}],HM_Mole_Flowers:[{content:"<p>This area needs some more color.</p>",end:2597,start:0},{content:"<p>Can you plant one of every kind of flower?</p>",end:6133,start:2597}],help_mole_lightning:[{content:"<p>Look at that glowing insect flying over there!</p>",end:3429,start:0},{content:"<p>Let's take a look at it with the magnifying glass!</p>",end:7149,start:3429}],HM_FindKatydid:[{content:"<p>Can you hear that sound? It's coming from the hollow log over there.</p>",end:5456,start:0},{content:"<p>Take a look and see what it is</p>",end:8309,start:5456}],HM_Mole_Moth:[{content:"<p>I noticed something fluttering in the tree over there.</p>",end:4842,start:0},{content:"<p>I wonder what it is?</p>",end:6616,start:4842}],msMole_help:[{content:"<p>Hi kids! Can you help me out?</p>",end:3039,start:0}],HM_Sally_Ant_Hill:[{content:"<p>Hmm. What's that little hill over there?</p>",end:2927,start:0},{content:"<p>The ants seem to like going there.</p>",end:5194,start:2927},{content:"<p>Take a closer look with your magnifying glass.</p>",end:8757,start:5194}],HM_Sally_Beetle:[{content:"<p>Ladybugs are a kind of beetle</p>",end:2239,start:0},{content:"<p>Can you take a closer look</p>",end:4223,start:2239},{content:"<p>and count how many spots you can see on its shell?</p>",end:6970,start:4223}],HM_Sally_Ant_Carry:[{content:"<p>I saw some ants carrying something.</p>",end:2725,start:0},{content:"<p>Can you take a closer look to see what they're carrying?</p>",end:5973,start:2725}],HM_Sally_Eggs:[{content:"<p>Do you see the bird's nest in the tree?</p>",end:2959,start:0},{content:"<p>Take a closer look and count how many eggs it has.</p>",end:6437,start:2959}],sally_help:[{content:"<p>Hi Elinor!</p>",end:1063,start:0}],HM_Sally_Log:[{content:"<p>I can hear something coming from the hollow log.</p>",end:2906,start:0},{content:"<p>I wonder what it is?</p>",end:4954,start:2906},{content:"<p>Try using the flashlight to see what's in there.</p>",end:8341,start:4954}],HM_Sally_Ant:[{content:"<p>I wonder how many legs an ant has?</p>",end:2655,start:0},{content:"<p>Take a closer look to find out.</p>",end:4917,start:2703}],HM_Tapir_Collection:[{content:"<p>Let's look at your collection box.</p>",end:3525,start:0}],help_tapir_collection2:[{content:"<p>Can you sort your treasures based on their size?</p>",end:3440,start:0}],help_tapir_dark:[{content:"<p>Look for a dark place around here where different creatures might live.</p>",end:4597,start:0}],HM_Tapir_Flowers:[{content:"<p>Try observing a flower up close.</p>",end:3354,start:0},{content:"<p>If it's a flower you haven't seen before, you can collect its seed!</p>",end:7055,start:3354}],senorTapir_help:[{content:"<p>Hey there kids! Can you help me out?</p>",end:2696,start:0}],HM_Tapir_Lizard:[{content:"<p>I saw an animal over there sitting on a rock.</p>",end:3381,start:0},{content:"<p>I wonder why it likes to sit there.</p>",end:6165,start:3381},{content:"<p>Can you take a closer look?</p>",end:8235,start:6170}],HM_FindToad:[{content:"<p>Toads have different colors and patterns on their skin</p>",end:3057,start:0},{content:"<p>That help them blend in with the things around them.</p>",end:5862,start:3057}],HM_DrawToad:[{content:"<p>Color this toad so it blends in with a log!</p>",end:3898,start:0}],HM_Tapir_Water:[{content:"<p>Lots of things live in the water.</p>",end:2506,start:0},{content:"<p>Can you use your magnifying glass to observe something in the water more closely?</p>",end:7466,start:2506}],senorTapir_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],ari_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],camilla_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],msMole_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],olive_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],ranger_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],sally_thanks:[{content:"<p>Thanks Elinor!</p>",end:1e3,start:0}],splash:[{content:"<p>Let's play \"Elinor's Nature Adventure!\"</p>",end:2739,start:0}]},l=function(){function e(){}return e.GameComplete=!1,e.RewardPayoffPlayed=!1,e.PlayGameName=!1,e.CurrentScene="intro",e.PreviousScene="intro",e.PreviousGameScene="intro",e.SceneTint=16777215,e.CharTint=16777215,e.SeedType="Daisy",e.EnterAnimation="",e.BirdFound={},e.UnlockedAreas={clubhouse:!0},e.VisitedAreas={clubhouse:!0},e.CompletedAreas={},e.CompletedInteractions={},e.CollectionBoxVO="collectionbox_intro",e.NotebookVO="",e.MG_uses=0,e.SI_uses=0,e.SH_uses=0,e.WC_uses=0,e.BI_uses=0,e.TO_uses=0,e.Notebook_uses=0,e.RocksCollected=0,e.InteractionID=0,e.LastNotebookOpen=0,e.LastCollectionBoxOpen=0,e}(),c={prefix:"./assets/images/",title:["ui/splash/SplashScreen.png","ui/splash/StartButton.png"],map:["map/MapScreen.jpg","ui/tickBtn.png","map/QuestAvailable.png","map/Circle1.png","map/Circle2.png","map/Circle3.png","map/Circle4.png","map/Circle5.png","map/MapIndicator_senorTapir.png","map/MapIndicator_ari.png","map/MapIndicator_camilla.png","map/MapIndicator_elinor.png","map/MapIndicator_msMole.png","map/MapIndicator_olive.png","map/MapIndicator_ranger.png","map/MapIndicator_sally.png"],game:["puddle.png","shadow.png","gameObjects/mound.png","tools/wateringCan.png","tools/magnifyingGlass.png","tools/shovel.png","tools/torch.png","tools/binoculars.png","tools/sieve.png","ui/homeButton.png","ui/mapBtn.png","tutorial/groundPointer.png","ui/bubble_speech.png","ui/bubble_thought.png","ui/missionQuestion.png","ui/missionExclamation.png","ui/missionTick.png","ui/buttonbar.png","ui/toolIcon_bg0.png","ui/toolIcon_bg1.png","ui/toolIcon_magnifyingGlass.png","ui/toolIcon_wateringCan.png","ui/toolIcon_shovel.png","ui/toolIcon_torch.png","ui/toolIcon_binoculars.png","ui/toolIcon_sieve.png","ui/missionAnt.png","ui/missionAnthill.png","ui/missionLeaf.png","ui/seedbag/SeedBell.png","ui/seedbag/SeedCosmos.png","ui/seedbag/SeedChrysanthemum.png","ui/seedbag/SeedDaisy.png","ui/seedbag/SeedTulip.png","ui/seedbag/SeedWhite.png","ui/seedbag/SeedBagBell.png","ui/seedbag/SeedBagCosmos.png","ui/seedbag/SeedBagChrysanthemum.png","ui/seedbag/SeedBagDaisy.png","ui/seedbag/SeedBagTulip.png","ui/seedbag/SeedBagWhite.png","ui/bubble_olive.png","ui/bubble_ari.png","tutorial/tutArrow.png","tutorial/tutArrowShadow.png","ui/arrowRight.png","ui/arrowLeft.png","2PixelRect.png","particles/QuestionParticle2.png"],interaction:["ui/nextBtn.png","ui/tickBtn.png","ui/closeBtn.png","ui/notebookBtn.png","2PixelRect.png","torchInteraction/blackPixel.jpg"],intro:["tutorial/pointHand.png","lvl_common/BG_BlueSky.png","lvl_common/BG_ClubhouseHills2.png","lvl_common/BG_MidTree4.png","lvl_common/white.png","lvl_common/Bg_ClubhouseHill.png","lvl_common/BG_MidTree3.png","lvl_common/TreeCluster.png","lvl_common/BG_layer1.png","lvl_common/BG_layer1a.jpg","lvl_common/BG_layer1b.jpg","lvl_common/BG_layer14.png","lvl_common/BG_layer2.png","lvl_common/BG_Foreground4.png","lvl_common/BG_Foreground3.png","lvl_common/post_a.png","lvl_common/post_b.png","lvl_common/post_c.png","lvl_common/BG_BackyardBush2.png","lvl_common/BG_BackyardTree.png","lvl_common/BG_BackyardBush.png","lvl_common/bg_layer0.png","lvl_common/BG_Layer13.png","lvl_common/BG_Layer12.png","lvl_common/SignRiver.png"],clubhouse:["ui/missionIconWater.png","ui/missionIconPlant.png",{id:"AcornsMag",src:"gameObjects/levelAcorn.png"},"lvl_common/BG_BlueSky.png","lvl_common/white.png","lvl_common/BG_ClubhouseHills2.png","lvl_common/BG_MidTree4.png","lvl_common/BG_FarHills1.png","lvl_common/BG_MidTree3.png","lvl_common/Bg_ClubhouseHill.png","lvl_common/TreeClusterFull.png","lvl_common/BG_layer1.png","lvl_common/BG_layer14.png","lvl_common/BG_layer1a.jpg","lvl_common/BG_layer1b.jpg","lvl_common/BG_Layer4.png","lvl_common/BG_BackyardTree.png","lvl_common/BG_BackyardBush2.png","lvl_common/BG_Foreground4.png","lvl_common/BG_Foreground3Tall.png","lvl_common/BG_BackyardBush.png","lvl_common/BG_layer2.png","lvl_common/BG_layer2Full.png","lvl_common/post_c.png","lvl_common/post_b.png","lvl_common/post_a.png","lvl_common/SignRiver.png","lvl_common/SignNight.png","lvl_common/NestTree2.png","lvl_common/BG_TyreTree.png","lvl_common/bg_layer0.png","lvl_common/BG_Layer13.png","lvl_common/BG_Layer12.png"],riverBank:["gameObjects/LizardRock.png","ui/missionIconPlant.png","ui/missionIconWater.png","gameObjects/CaterpillarMag.png","lvl_common/BG_StreamTrees.png","lvl_common/BG_HouseBushes.png","lvl_common/BG_StreamWater.png","lvl_common/BG_layer2.png","lvl_common/BG_Layer4.png","lvl_common/BG_MidTree1.png","lvl_common/BG_MidTree2.png","lvl_common/BG_MidTree3.png","lvl_common/white.png","lvl_common/BG_Stream.png","lvl_common/BG_StreamWide.png","lvl_common/BG_layer6.png","lvl_common/post_c.png","lvl_common/post_b.png","lvl_common/post_a.png","lvl_common/SignHouse.png","lvl_common/SignClubhouse2.png","lvl_common/BG_BackyardBush2.png","lvl_common/NestTree2.png","lvl_common/BG_TyreTree.png","lvl_common/BG_Layer12.png","lvl_common/BG_Layer13.png","lvl_common/bg_layer0.png"],elinorsHouse:["ui/missionIconWater.png","ui/missionIconPlant.png","gameObjects/CaterpillarBino.png","lvl_common/BG_FarHills1.png","lvl_common/BG_HouseBushes.png","lvl_common/BG_TyreTree.png","lvl_common/white.png","lvl_common/BG_layer1.png","lvl_common/BG_layer2Full.png","lvl_common/post_c.png","lvl_common/post_b.png","lvl_common/post_a.png","lvl_common/SignForest.png","lvl_common/SignRiver2.png","lvl_common/BG_Layer4Full.png","lvl_common/BG_ElinorsHouse.png","lvl_common/BG_Foreground3Tall.png","lvl_common/BG_Foreground4.png","lvl_common/GardenSign1.png","lvl_common/GardenSign3.png","lvl_common/GardenSign4.png","lvl_common/BG_BackyardTreeTall.png","lvl_common/BG_BackyardBush2.png","lvl_common/BG_BackyardBush.png","lvl_common/ChrysalisTree.png","lvl_common/Rock2.png","lvl_common/Rock1.png","lvl_common/bg_layer0.png","lvl_common/BG_Layer13.png","lvl_common/BG_Layer12.png","lvl_common/BG_FGBush.png"],deepForest:["gameObjects/treeEyes.png","gameObjects/treeEyesBG.png","gameObjects/LizardLog.png","lvl_common/white.png","lvl_common/BG_StreamTrees.png","lvl_common/BG_HouseBushes.png","lvl_common/BG_MidTree2.png","lvl_common/BG_MidTree3.png","lvl_common/BG_Bush.png","lvl_common/DeepForestGround1.png","lvl_common/BG_TyreTree.png","lvl_common/TreeLean.png","lvl_common/ThinTree.png","lvl_common/BG_BackyardBush2.png","lvl_common/Rock2.png","lvl_common/Rock1.png","lvl_common/BG_Foreground3Tall.png","lvl_common/BG_Foreground4.png","lvl_common/post_c.png","lvl_common/post_b.png","lvl_common/post_a.png","lvl_common/SignNight2.png","lvl_common/SignHouse2.png","lvl_common/bg_layer0.png","lvl_common/BG_FGBush3.png","lvl_common/BG_Layer13.png","lvl_common/BG_FGTree3.png"],nightForest:["gameObjects/treeEyes.png","gameObjects/treeEyesBG.png","gameObjects/LampOn.png","gameObjects/LampOff.png","lvl_common/NightSky2.png","lvl_common/Night_FarHills1.png","lvl_common/BG_HouseBushes.png","lvl_common/BG_MidTree1.png","lvl_common/BG_MidTree3.png","lvl_common/BG_MidTree4.png","lvl_common/BG_MidTree2.png","lvl_common/BG_layer2Full.png","lvl_common/TreeLean.png","lvl_common/BG_layer2Night.png","lvl_common/BG_TreeHole.png","lvl_common/BG_BackyardBush2.png","lvl_common/BG_BackyardBush.png","lvl_common/BG_TyreTree.png","lvl_common/ChrysalisTree.png","lvl_common/Rock2.png","lvl_common/BG_Layer13.png","lvl_common/BG_Layer12.png","lvl_common/BG_FGBush.png"],notebook:["common/uiBackground.jpg","notebook/SpiralNotebook.png","notebook/NotebookRing.png","notebook/PaletteWindow.png","notebook/NextButton.png","notebook/BackButton.png","notebook/PaintButton.png","notebook/StickerButton.png","notebook/StickerTabOn.png","notebook/PaintTabOn.png","notebook/IndexInsects.png","notebook/IndexLifeCycle.png","notebook/IndexBirds.png","notebook/IndexNocturnal.png","notebook/IndexHiding.png","notebook/IndexPlants.png","notebook/IndexHomes.png","notebook/IndexFriends.png","notebook/IndexTools.png","notebook/stickers/LadybugRedSticker.png","notebook/stickers/LadybugYellowSticker.png","notebook/stickers/LadybugOrangeSticker.png","notebook/stickers/AntSticker.png","notebook/stickers/MapleLeafSticker.png","notebook/stickers/BeeSticker.png","notebook/templates/LadybugTemplate.png","notebook/templates/AntTemplate.png","notebook/templates/AnthillTemplate.png","notebook/templates/SpiderTemplate.png","notebook/templates/TreeTemplate.png","notebook/stickers/CaterpillarSticker.png","notebook/stickers/ChrysalisSticker.png","notebook/stickers/ButterflySticker.png","notebook/stickers/ElmLeafSticker.png","notebook/stickers/MothDaggerSticker.png","notebook/stickers/MothGreySticker.png","notebook/templates/CaterpillarTemplate.png","notebook/templates/ButterflyTemplate.png","notebook/templates/ChrysalisTemplate.png","notebook/templates/KatydidTemplate.png","notebook/templates/LizardTemplate.png","notebook/stickers/BirdBlueSticker.png","notebook/stickers/BirdRedSticker.png","notebook/stickers/BirdYellowSticker.png","notebook/stickers/PillBugSticker.png","notebook/stickers/PumpkinSeedSticker.png","notebook/stickers/Note1Sticker.png","notebook/stickers/Note2Sticker.png","notebook/templates/NestTemplate.png","notebook/templates/BirdsTemplate.png","notebook/templates/BabyBirdTemplate.png","notebook/stickers/OwlSticker.png","notebook/stickers/FireflySticker.png","notebook/stickers/ToadRedSticker.png","notebook/stickers/KatydidSticker.png","notebook/templates/OwlTemplate.png","notebook/templates/FireflyTemplate.png","notebook/templates/ToadTemplate.png","notebook/stickers/ToadBrownSticker.png","notebook/templates/HollowLogTemplate.png","notebook/templates/MothTemplate.png","notebook/stickers/FlowerYellowSticker.png","notebook/stickers/FlowerWhiteSticker.png","notebook/stickers/FlowerPinkSticker.png","notebook/stickers/FlowerCosmosSticker.png","notebook/stickers/SapSticker.png","notebook/templates/DaisyTemplate.png","notebook/templates/BellTemplate.png","notebook/templates/TulipTemplate.png","notebook/templates/CosmosTemplate.png","notebook/stickers/SnailSticker.png","notebook/stickers/SpiderSticker.png","notebook/stickers/AntHillSticker.png","notebook/stickers/WebSticker.png","notebook/stickers/NestSticker.png","notebook/stickers/AriSticker.png","notebook/stickers/OliveSticker.png","notebook/stickers/RangerRabbitSticker.png","notebook/stickers/SenorTapirSticker.png","notebook/stickers/MsMoleSticker.png","notebook/templates/ElinorTemplate.png","notebook/templates/OliveTemplate.png","notebook/templates/AriTemplate.png","notebook/templates/RangerTemplate.png","notebook/templates/TapirTemplate.png","notebook/stickers/BinocularsSticker.png","notebook/stickers/MagnifySticker.png","notebook/stickers/SeedbagSticker.png","notebook/stickers/ShovelSticker.png","notebook/stickers/SifterSticker.png","notebook/stickers/TorchSticker.png","notebook/stickers/WateringCanSticker.png","notebook/templates/ShovelTemplate.png","notebook/templates/BinocularsTemplate.png","paints/paint_black.png","paints/paint_brown.png","paints/paint_red.png","paints/paint_orange.png","paints/paint_green.png","paints/paint_yellow.png","paints/paint_blue.png","paints/paint_purple.png","paints/stickerBurst_red.png","paints/stickerBurst_orange.png","paints/stickerBurst_green.png","paints/stickerBurst_yellow.png","paints/stickerBurst_blue.png","paints/stickerBurst_purple.png","paints/stickerBurst_brown.png","paints/stickerBurst_black.png","notebook/BrushWidth0.png","notebook/BrushWidth1.png","notebook/BrushWidth2.png","notebook/currentPen.png"],magGlassInteraction:["common/uiBackground.jpg","magGlassInteraction/magnifyingGlassBig.png","tutorial/pointHand.png"],magGlassAntSingle:["magGlassInteraction/AntSingleMagnifySmall.png"],magGlassAntFood:["magGlassInteraction/AntFoodMagnifySmall.png"],magGlassAntRock:["magGlassInteraction/AntRockMagnify.png","magGlassInteraction/AntRockMagnifySmall.png"],magGlassAntHill:["magGlassInteraction/AntHillMagnifySmall.png"],magGlassLizard:["magGlassInteraction/LizardMagnify.png","magGlassInteraction/LizardMagnifySmall.png"],magGlassLizardLog:["magGlassInteraction/LizardLogMagnifySmall.png"],magGlassSnail:["magGlassInteraction/SnailMagnify.png","magGlassInteraction/SnailMagnifySmall.png"],magGlassButterfly:["magGlassInteraction/ButterflyMagnify.png","magGlassInteraction/ButterflyMagnifySmall.png"],magGlassChrysalis:["magGlassInteraction/ChrysalisMagnify.png","magGlassInteraction/ChrysalisMagnifySmall.png"],magGlassLadybugRed:[{id:"LadybugSmall",src:"magGlassInteraction/BugMagnifySmallRed.png"}],magGlassLadybugYellow:[{id:"LadybugSmall",src:"magGlassInteraction/BugMagnifySmallYellow.png"}],magGlassLadybugOrange:[{id:"LadybugSmall",src:"magGlassInteraction/BugMagnifySmallOrange.png"}],magGlassLadybugWings:[{id:"LadybugSmall",src:"magGlassInteraction/BugMagnifySmallOrange.png"}],magGlassCaterpillarMag:["magGlassInteraction/CaterpillarMagMagnify.png","magGlassInteraction/CaterpillarMagMagnifySmall.png"],magGlassCaterpillarRock:["magGlassInteraction/CaterpillarRockMagnify.png","magGlassInteraction/CaterpillarRockMagnifySmall.png"],magGlassAcornsMag:["magGlassInteraction/AcornsMagMagnify.png","magGlassInteraction/AcornsMagMagnifySmall.png"],magGlassKatydidMag:[{id:"KatydidMagMagnifySmall",src:"magGlassInteraction/KatydidMagnifySmall.png"}],magGlassToadMagBrown:["magGlassInteraction/ToadBG.png",{id:"SmallToad",src:"magGlassInteraction/ToadBrownSmall.png"}],magGlassToadMagYellow:["magGlassInteraction/ToadBG.png",{id:"SmallToad",src:"magGlassInteraction/ToadYellowSmall.png"}],magGlassToadMagGreen:["magGlassInteraction/ToadBG.png",{id:"SmallToad",src:"magGlassInteraction/ToadGreenSmall.png"}],magGlassWorm:["magGlassInteraction/WormMagnify.png","magGlassInteraction/WormMagnifySmall.png"],magGlassPillBug:["magGlassInteraction/PillBugMagnify.png","magGlassInteraction/PillBugMagnifySmall.png"],magGlassChrysanthemum:["magGlassInteraction/ChrysanthemumMagnify.png","magGlassInteraction/ChrysanthemumMagnifySmall.png"],magGlassWhite:["magGlassInteraction/WhiteMagnify.png","magGlassInteraction/WhiteMagnifySmall.png"],magGlassCosmos:["magGlassInteraction/CosmosMagnify.png","magGlassInteraction/CosmosMagnifySmall.png"],magGlassBell:["magGlassInteraction/BellMagnify.png","magGlassInteraction/BellMagnifySmall.png"],magGlassTulip:["magGlassInteraction/TulipMagnify.png","magGlassInteraction/TulipMagnifySmall.png"],magGlassDaisy:["magGlassInteraction/DaisyMagnify.png","magGlassInteraction/DaisyMagnifySmall.png"],magGlassLandTurtle:["magGlassInteraction/LandTurtleMagnifySmall.png"],magGlassElmLeaf:[{id:"ElmLeafMagnify",src:"magGlassInteraction/ElmLeafBig.png"},{id:"ElmLeafMagnifySmall",src:"magGlassInteraction/ElmLeafSmall.png"}],magGlassElmLeafBrown:[{id:"ElmLeafMagnify",src:"magGlassInteraction/ElmLeafBrownBig.png"},{id:"ElmLeafMagnifySmall",src:"magGlassInteraction/ElmLeafBrownSmall.png"}],magGlassElmLeafYellow:[{id:"ElmLeafMagnify",src:"magGlassInteraction/ElmLeafYellowBig.png"},{id:"ElmLeafMagnifySmall",src:"magGlassInteraction/ElmLeafYellowSmall.png"}],magGlassMapleLeaf:[{id:"MapleLeafMagnify",src:"magGlassInteraction/MapleLeafBig.png"},{id:"MapleLeafMagnifySmall",src:"magGlassInteraction/MapleLeafSmall.png"}],magGlassMapleLeafBrown:[{id:"MapleLeafMagnify",src:"magGlassInteraction/MapleLeafBrownBig.png"},{id:"MapleLeafMagnifySmall",src:"magGlassInteraction/MapleLeafBrownSmall.png"}],magGlassMapleLeafYellow:[{id:"MapleLeafMagnify",src:"magGlassInteraction/MapleLeafYellowBig.png"},{id:"MapleLeafMagnifySmall",src:"magGlassInteraction/MapleLeafYellowSmall.png"}],magGlassGingkoLeaf:[{id:"GingkoLeafMagnify",src:"magGlassInteraction/GingkoLeafBig.png"},{id:"GingkoLeafMagnifySmall",src:"magGlassInteraction/GingkoLeafSmall.png"}],magGlassGingkoLeafBrown:[{id:"GingkoLeafMagnify",src:"magGlassInteraction/GingkoLeafBrownBig.png"},{id:"GingkoLeafMagnifySmall",src:"magGlassInteraction/GingkoLeafBrownSmall.png"}],magGlassGingkoLeafYellow:[{id:"GingkoLeafMagnify",src:"magGlassInteraction/GingkoLeafYellowBig.png"},{id:"GingkoLeafMagnifySmall",src:"magGlassInteraction/GingkoLeafYellowSmall.png"}],magGlassSap:["magGlassInteraction/SapMagnify.png","magGlassInteraction/SapMagnifySmall.png"],magGlassFish:["magGlassInteraction/Water.png","magGlassInteraction/FishMagnifySmall.png"],magGlassFirefly:["magGlassInteraction/FireflyMagnifySmall.png"],magGlassTurtle:["magGlassInteraction/TurtleMagnify.png","magGlassInteraction/TurtleMagnifySmall.png"],magGlassBee:["magGlassInteraction/BeeMagnify.png","magGlassInteraction/BeeMagnifySmall.png"],torchInteraction:["torchInteraction/TorchCircle.png","torchInteraction/TorchCircleGlow.png","torchInteraction/EmptyTreeLog.jpg","torchInteraction/SpiderTree.jpg","torchInteraction/Spider.png","torchInteraction/TreeDark.jpg"],torchOwl:["torchInteraction/Owl_background.jpg","torchInteraction/Owl_eyeCover.png","torchInteraction/Owl_overlay.png","torchInteraction/Owl_eye.png","torchInteraction/Owl_lidBot.png","torchInteraction/Owl_lidTop.png"],binocularsInteraction:["ui/drawBtn.png","binocularsInteraction/ZoomSlider.png","binocularsInteraction/ZoomBar.png","binocularsInteraction/BinocularBG.png","binocularsInteraction/Stencil.png","tutorial/pointHand.png"],bino_birds:["binocularsInteraction/tree_Birds.png"],bino_SpiderWeb:["binocularsInteraction/tree_Birds.png"],bino_CaterpillarBino:["binocularsInteraction/tree_Caterpillar.png"],bino_Nest:["binocularsInteraction/tree_Nest.png"],bino_ChickWhite:["binocularsInteraction/tree_Nest.png"],bino_Chrysalis:["binocularsInteraction/tree_Chrysalis.png"],bino_AcornsBino:["binocularsInteraction/tree_Birds.png"],bino_Clubhouse:["binocularsInteraction/hillBG.png"],sieveInteraction:["common/uiBackground.jpg","tutorial/pointHand.png","sieveInteraction/sieveDirt_0.png","sieveInteraction/sieveDirt_1.png","sieveInteraction/sieveDirt_2.png","sieveInteraction/sieveParticles_0.png","sieveInteraction/sieveParticles_1.png","sieveInteraction/sieveParticles_2.png","sieveInteraction/sieve.png","sieveInteraction/sieveArrow.png","sieveInteraction/sieveRock_0.png","sieveInteraction/sieveRock_1.png","sieveInteraction/sieveRock_2.png","sieveInteraction/sieveRock_3.png","sieveInteraction/sieveRock_4.png","collectionBox/TrilobiteFossilYellow.png","collectionBox/SnailShell.png","collectionBox/SmallEmerald.png","collectionBox/SkippingStone.png","collectionBox/SmallBlueRock.png","collectionBox/PumpkinSeed.png","collectionBox/RedStoneMedium.png","collectionBox/SandBurr.png","collectionBox/MediumMarble.png","collectionBox/Coin.png","collectionBox/AmberInsect.png","collectionBox/AmmoniteFossil.png","collectionBox/Acorn.png","collectionBox/RaptorClaw.png","collectionBox/FishFossil.png","collectionBox/AmberAnt.png"],collectionBox:["common/uiBackground.jpg","collectionBox/Box.png","ui/tickBtn.png","collectionBox/DivBot.png","collectionBox/DivMid.png","collectionBox/Card1.png","collectionBox/Card2.png","collectionBox/Card3.png","collectionBox/TapeMeasure.png","collectionBox/BoxTop.png","collectionBox/Tape.png","collectionBox/light.png","collectionBox/light2.png","collectionBox/TrilobiteFossilYellow.png","collectionBox/SnailShell.png","collectionBox/SmallEmerald.png","collectionBox/SkippingStone.png","collectionBox/SmallBlueRock.png","collectionBox/PumpkinSeed.png","collectionBox/RedStoneMedium.png","collectionBox/SandBurr.png","collectionBox/MediumMarble.png","collectionBox/Coin.png","collectionBox/AmberInsect.png","collectionBox/AmmoniteFossil.png","collectionBox/Acorn.png","collectionBox/RaptorClaw.png","collectionBox/FishFossil.png","collectionBox/AmberAnt.png"]},u=c,p={prefix:"./assets/anims/",game:[{id:"elinor",src:"./elinor/Elinor.json"},{id:"olive",src:"./olive/Olive.json"},{id:"ari",src:"./ari/Ari.json"},{id:"plantDaisy",src:"./plantDaisy/Plant.json"},{id:"plantChrysanthemum",src:"./plantChrysanthemum/Plant.json"},{id:"plantWhite",src:"./plantWhite/Plant.json"},{id:"plantCosmos",src:"./plantCosmos/Plant.json"},{id:"plantBell",src:"./plantBell/Plant.json"},{id:"plantTulip",src:"./plantTulip/Plant.json"},{id:"Butterfly",src:"./butterflyLanded/ButterflyLanded.json"},{id:"Bee",src:"./bee/Bee.json"}],intro:["clubhouse/Clubhouse.json",{id:"ButterflyGuide",src:"./butterfly/Butterfly.json"},{id:"RewardGeneric",src:"./rewardGeneric/RewardGeneric.json"},{id:"senorTapir",src:"./senorTapir/SenorTapir.json"}],clubhouse:["clubhouse/Clubhouse.json",{id:"WebLog",src:"./webLog/WebLog.json"},{id:"AntSingle",src:"./antSingle/AntSingle.json"},{id:"AntFood",src:"./antFood/AntFood.json"},{id:"AntHill",src:"./anthill/AntHill.json"},{id:"Nest",src:"./birdNest/Nest.json"},{id:"AcornsBino",src:"./acorns/Acorns.json"},{id:"BugRed",src:"./bugRed/Bug.json"}],clubhouse_Missions:[],clubhouse_HelperMissions:[{id:"sally",src:"./sally/Sally.json"}],riverBank:[{id:"senorTapir",src:"./senorTapir/SenorTapir.json"},{id:"Bush",src:"./bush/BushExport.json"},{id:"Bug",src:"./bug/Bug.json"},{id:"Toad",src:"./toad/Toad.json"},{id:"Katydid",src:"./katydidLog/KatydidLog.json"},{id:"Fish",src:"./fish/Fish.json"},{id:"Lizard",src:"./lizard/Lizard.json"},{id:"Nest",src:"./birdNest/Nest.json"},{id:"BugOrange",src:"./bugOrange/Bug.json"},"turtle/Turtle.json","landTurtle/LandTurtle.json"],riverBank_Missions:[{id:"RewardGeneric",src:"./rewardGeneric/RewardGeneric.json"}],elinorsHouse:[{id:"ranger",src:"./ranger/Ranger.json"},{id:"Bush",src:"./bush/BushExport.json"},{id:"Chrysalis",src:"./chrysalis/Chrysalis.json"},{id:"Snail",src:"./snail/Snail.json"},{id:"Katydid",src:"./katydidLog/KatydidLog.json"},{id:"SpiderWeb",src:"./spiderWeb/SpiderWeb.json"},{id:"FlipRock",src:"./flipRock/FlipRock.json"},{id:"BugYellow",src:"./bugYellow/Bug.json"}],elinorsHouse_Missions:[{id:"RewardGeneric",src:"./rewardGeneric/RewardGeneric.json"},{id:"senorTapir",src:"./senorTapir/SenorTapir.json"}],deepForest:[{id:"birdBlue",src:"./birdBlue/BirdBlue.json"},{id:"treeRustle",src:"./treeRustle/TreeRustle.json"},{id:"Bush",src:"./bush/BushExport.json"},{id:"FlipRock",src:"./flipRock/FlipRock.json"},{id:"camilla",src:"./camilla/Camilla.json"},{id:"ElmLeaf",src:"./elmLeaf/ElmLeaf.json"},{id:"GingkoLeaf",src:"./gingkoLeaf/GingkoLeaf.json"},{id:"MapleLeaf",src:"./mapleLeaf/MapleLeaf.json"},{id:"Sap",src:"./sap/Sap.json"},{id:"Lizard",src:"./lizardBrown/Lizard.json"}],deepForest_Missions:[{id:"RewardGeneric",src:"./rewardGeneric/RewardGeneric.json"},{id:"senorTapir",src:"./senorTapir/SenorTapir.json"}],nightForest:[{id:"msMole",src:"./msMole/MsMole.json"},{id:"Owl",src:"./owl/Owl.json"},{id:"Moth",src:"./mothTree/MothAll.json"},{id:"Katydid",src:"./katydidLog/KatydidLog.json"},{id:"Firefly",src:"./firefly/Firefly.json"},{id:"Bush",src:"./bush/BushExport.json"},{id:"SmallToad",src:"toadSmall/Toad.json"}],nightForest_Missions:[{id:"RewardGeneric",src:"./rewardGeneric/RewardGeneric.json"},{id:"senorTapir",src:"./senorTapir/SenorTapir.json"}],binocularsInteraction:[],bino_birds:[{id:"TreeBirds",src:"./treeBirds/TreeBirds.json"},{id:"birdBlue",src:"./birdBlue/BirdBlue.json"}],bino_SpiderWeb:[{id:"SpiderWeb",src:"./spiderWeb/SpiderWeb.json"}],bino_CaterpillarBino:[{id:"CaterpillarBino",src:"caterpillarBino/CaterpillarBino.json"}],bino_Nest:[{id:"Nest",src:"./birdNest/Nest.json"}],bino_ChickWhite:[{id:"Nest",src:"./birdNest/Nest.json"}],bino_Chrysalis:[{id:"Chrysalis",src:"./chrysalis/Chrysalis.json"}],bino_AcornsBino:[{id:"AcornsBino",src:"./acorns/Acorns.json"}],bino_Clubhouse:["clubhouse/Clubhouse.json"],torchInteraction:[{id:"MothFlying",src:"./moth/MothAll.json"}],torchToadBrown:["toadBrown/Toad.json"],torchToadYellow:["toadYellow/Toad.json"],torchToadGreen:["toadGreen/Toad.json"],torchKatydid:[{id:"Katydid",src:"katydidTorch/Katydid.json"}],magGlassToadMagBrown:["toadBrown/Toad.json"],magGlassToadMagYellow:["toadYellow/Toad.json"],magGlassToadMagGreen:["toadGreen/Toad.json"],magGlassChrysalis:[{id:"Chrysalis",src:"./chrysalisLarge/Chrysalis.json"}],magGlassAntHill:[{id:"AntHillObs",src:"anthillObs/AntHillObs.json"}],magGlassFish:["fishBig/Fish.json"],magGlassLizardLog:[{id:"LizardLogMagnify",src:"lizardLog/LizardObs.json"}],magGlassKatydidMag:[{id:"KatydidMagMagnify",src:"katydidBig/Katydid.json"}],magGlassFirefly:[{id:"FireflyMagnify",src:"fireflyBig/Firefly.json"}],magGlassLadybugRed:[{id:"LadybugLarge",src:"ladybugRed/Ladybug.json"}],magGlassLadybugYellow:[{id:"LadybugLarge",src:"ladybugYellow/Ladybug.json"}],magGlassLadybugOrange:[{id:"LadybugLarge",src:"ladybugOrange/Ladybug.json"}],magGlassLadybugWings:[{id:"LadybugLarge",src:"ladybugWings/Ladybug.json"}],magGlassSnail:["snailBig/Snail.json"],magGlassAntSingle:["antBig/AntBig.json"],magGlassLandTurtle:["landTurtleBig/LandTurtleBig.json"],magGlassAntFood:["antBig/AntBig.json"],journal:[{id:"observationAnt",src:"./observationAnt/ObservationAntExport.json"}],map:["mapPayoff/MapPayoff.json"]},d=p,h={prefix:"./assets/images/particles/",game:["./stickerBurst.png","./stickerBurstEmitter.json","./TickParticles.png","./TickParticlesEmitter.json"],interaction:["./stickerBurst.png","./stickerBurstEmitter.json"],journal:["./stickerBurst.png","./stickerBurstEmmiter.json"],riverBank:["stream/StreamFX.png","stream/StreamEmitter.json"],nightForest:["./LampGlow.png","./LampGlowEmitter.json"],map:["./GoldStar.png","./GoldStarEmitter.json"]},f=h,g={prefix:"./assets/config/",intro:[{id:"levelJson",src:"intro.json"}],clubhouse:[{id:"levelJson",src:"clubhouse.json"}],riverBank:[{id:"levelJson",src:"riverBank.json"}],elinorsHouse:[{id:"levelJson",src:"elinorsHouse.json"}],deepForest:[{id:"levelJson",src:"deepForest.json"}],nightForest:[{id:"levelJson",src:"nightForest.json"}]},m=g,_={prefix:"assets/sounds/",game:["sfx/generic_click.mp3","vo/general/elinor_tap.mp3","vo/general/olive_tap.mp3","vo/general/final_unlock_1.mp3",{id:"mission_keep_going",src:"vo/general/mission_keep_going_olive.mp3"},"sfx/elinor_dig.mp3","sfx/elinor_watering.mp3","sfx/unlock_sticker.mp3","sfx/elinor-tool-out.mp3","sfx/flower_grow_v2.mp3","sfx/flower_ding_A.mp3","sfx/flower_ding_B.mp3","sfx/flower_ding_C.mp3","sfx/flower_ding_Chigh.mp3","sfx/flower_ding_D.mp3","sfx/flower_ding_E.mp3","sfx/flower_ding_F.mp3","sfx/flower_ding_G.mp3","sfx/swish1.mp3","sfx/swish2.mp3","sfx/swish3.mp3","sfx/swish4.mp3","sfx/xylo_0.mp3","sfx/xylo_1.mp3","sfx/xylo_2.mp3","sfx/xylo_3.mp3","sfx/xylo_4_seedbag.mp3","sfx/xylo_4.mp3","sfx/xylo_5.mp3","sfx/generic_success_1.mp3","sfx/generic_success_2.mp3","sfx/mission_complete.mp3","sfx/seedbag.mp3","vo/general/notebook_reminder.mp3","vo/general/collectionbox_reminder.mp3","vo/general/use_watering_can.mp3","vo/general/use_sifter.mp3","vo/general/use_shovel.mp3","vo/general/use_flashlight.mp3","vo/general/use_binoculars.mp3","vo/general/use_magnifying_glass.mp3","vo/general/use_seeds.mp3","vo/general/newflower_obs_02.mp3","vo/tools/tool_hint_nothing.mp3","vo/tools/tool_hint_mag.mp3","vo/tools/tool_hint_light.mp3","vo/tools/tool_hint_binoc.mp3","vo/tools/tool_hint_sifter.mp3","vo/tools/tool_hint_wateringcan.mp3"],intro:["sfx/katydid.mp3","sfx/wobble.mp3","vo/onboarding/onboarding_1.mp3","vo/onboarding/onboarding_2.mp3","vo/onboarding/onboarding_3_desktop.mp3","vo/onboarding/onboarding_3_tablet.mp3","vo/onboarding/onboarding_4_desktop.mp3","vo/onboarding/onboarding_4_tablet.mp3","vo/Area1_Clubhouse/clubhouse_m1_01.mp3","vo/Area1_Clubhouse/clubhouse_m1_02.mp3","vo/Area1_Clubhouse/clubhouse_m1_03.mp3","vo/Area1_Clubhouse/clubhouse_m1_03_hint.mp3","vo/Area1_Clubhouse/clubhouse_m1_04.mp3","vo/Area1_Clubhouse/clubhouse_m1_05.mp3","vo/Area1_Clubhouse/clubhouse_m2_01.mp3","vo/Area1_Clubhouse/clubhouse_m2_01_hint.mp3","vo/Area1_Clubhouse/clubhouse_m2_02.mp3","vo/Area1_Clubhouse/clubhouse_m2_05.mp3","vo/Area1_Clubhouse/clubhouse_m2_06.mp3","vo/genericMission/olive_thanks.mp3","vo/senorTapir/tapir_song_olive.mp3","vo/senorTapir/tapir_help_mg.mp3"],clubhouse:["sfx/katydid.mp3","sfx/wobble.mp3"],clubhouse_Missions:[],clubhouse_HelperMissions:["vo/genericMission/sally_thanks.mp3",{id:"sally_help",src:"vo/genericMission/help_sally_hi.mp3"},{id:"HM_Sally_Eggs",src:"vo/genericMission/help_sally_eggs.mp3"},{id:"HM_Sally_Beetle",src:"vo/genericMission/help_sally_beetle.mp3"},{id:"HM_Sally_Ant",src:"vo/genericMission/help_sally_ant.mp3"},{id:"HM_Sally_Ant_Carry",src:"vo/genericMission/help_sally_carrying.mp3"},{id:"HM_Sally_Ant_Hill",src:"vo/genericMission/help_sally_anthill.mp3"},{id:"HM_Sally_Log",src:"vo/genericMission/help_sally_log.mp3"}],riverBank:["vo/senorTapir/tapir_song_ari.mp3","vo/senorTapir/tapir_help_shovel.mp3","vo/senorTapir/tapir_help_sifter.mp3","sfx/toad.mp3"],torchKatydid:["sfx/katydid.mp3"],riverBank_Missions:["vo/Area2_Riverbank/riverbank_m1_01.mp3","vo/Area2_Riverbank/riverbank_m1_02.mp3","vo/Area2_Riverbank/riverbank_m1_02_hint.mp3","vo/Area2_Riverbank/riverbank_m1_03.mp3","vo/Area2_Riverbank/riverbank_m1_04.mp3","vo/Area2_Riverbank/riverbank_m2_01.mp3","vo/Area2_Riverbank/riverbank_m2_02.mp3","vo/Area2_Riverbank/riverbank_m2_02_hint.mp3","vo/Area2_Riverbank/riverbank_m3_01.mp3","vo/Area2_Riverbank/riverbank_m3_02.mp3","vo/Area2_Riverbank/riverbank_m3_03.mp3","vo/Area2_Riverbank/riverbank_m3_04.mp3","vo/genericMission/ari_thanks.mp3"],riverBank_HelperMissions:["vo/genericMission/senorTapir_thanks.mp3",{id:"senorTapir_help",src:"vo/genericMission/help_tapir_hikids.mp3"},{id:"HM_Tapir_Collection",src:"vo/genericMission/help_tapir_collection1.mp3"},{id:"HM_Tapir_Flowers",src:"vo/genericMission/help_tapir_flower.mp3"},{id:"HM_Tapir_Lizard",src:"vo/genericMission/help_tapir_lizard.mp3"},{id:"HM_FindToad",src:"vo/genericMission/help_tapir_dark.mp3"},{id:"HM_DrawToad",src:"vo/genericMission/help_tapir_toads1.mp3"},{id:"HM_Tapir_Water",src:"vo/genericMission/help_tapir_water.mp3"}],elinorsHouse:["sfx/katydid.mp3","vo/senorTapir/tapir_song_mom.mp3","vo/genericMission/ranger_thanks.mp3"],elinorsHouse_Missions:["vo/Area3_Elinors_Yard/yard_m1_01.mp3","vo/Area3_Elinors_Yard/yard_m1_02.mp3","vo/Area3_Elinors_Yard/yard_m1_02_hint.mp3","vo/Area3_Elinors_Yard/yard_m1_03.mp3","vo/Area3_Elinors_Yard/yard_m1_04.mp3","vo/Area3_Elinors_Yard/yard_m2_01.mp3","vo/Area3_Elinors_Yard/yard_m2_02.mp3","vo/Area3_Elinors_Yard/yard_m2_03.mp3","vo/Area3_Elinors_Yard/yard_m3_01.mp3","vo/Area3_Elinors_Yard/yard_m3_02.mp3","vo/Area3_Elinors_Yard/yard_m3_03.mp3","vo/Area3_Elinors_Yard/yard_m3_04.mp3","vo/Area3_Elinors_Yard/yard_m3_05_fail.mp3","vo/Area3_Elinors_Yard/yard_m3_05_pass.mp3","vo/Area3_Elinors_Yard/yard_m3_06.mp3"],elinorsHouse_HelperMissions:[{id:"ranger_help",src:"vo/genericMission/help_mom_hikids.mp3"},{id:"HM_Moms_Bee",src:"vo/genericMission/help_mom_bee.mp3"},{id:"HM_Moms_Caterpillar",src:"vo/genericMission/help_mom_caterpillar.mp3"},{id:"HM_SortByShape",src:"vo/genericMission/help_mom_collection1.mp3"},{id:"HM_Moms_Snail",src:"vo/genericMission/help_mom_snail.mp3"},{id:"HM_DrawFlowers",src:"vo/genericMission/help_mom_flowers1.mp3"}],deepForest:["sfx/shaking_bush_01.mp3","sfx/bird1.mp3","sfx/bird2.mp3","sfx/bird3.mp3","sfx/blinking_eyes_01.mp3","vo/genericMission/camilla_thanks.mp3","vo/senorTapir/tapir_song_camilla.mp3","vo/senorTapir/tapir_help_binoculars.mp3"],deepForest_Missions:["vo/Area4_Deep_Forest/deep_m1_00.mp3","vo/Area4_Deep_Forest/deep_m1_01.mp3","vo/Area4_Deep_Forest/deep_m1_02.mp3","vo/Area4_Deep_Forest/deep_m1_03.mp3","vo/Area4_Deep_Forest/deep_m2_01.mp3","vo/Area4_Deep_Forest/deep_m2_02.mp3","vo/Area4_Deep_Forest/deep_m2_03.mp3","vo/Area4_Deep_Forest/deep_m2_05.mp3","vo/Area4_Deep_Forest/deep_m2_07.mp3","vo/Area4_Deep_Forest/deep_m2_09.mp3","vo/Area4_Deep_Forest/deep_m2_10.mp3","vo/Area4_Deep_Forest/deep_m3_01.mp3","vo/Area4_Deep_Forest/deep_m3_06.mp3","vo/Area4_Deep_Forest/deep_m3_07.mp3"],deepForest_HelperMissions:["vo/genericMission/camilla_help.mp3",{id:"Camilla_Eggs",src:"vo/genericMission/help_camilla_eggs1.mp3"},{id:"HM_Camilla_Bush",src:"vo/genericMission/help_camilla_rustling.mp3"},{id:"HM_Camilla_Rocks",src:"vo/genericMission/help_camilla_rocks.mp3"},{id:"HM_Camilla_Flowers",src:"vo/genericMission/help_camilla_flowers.mp3"},{id:"HM_Camilla_Sap",src:"vo/genericMission/help_camilla_sap.mp3"},{id:"HM_Leaf_Spikey",src:"vo/genericMission/help_camilla_leaves.mp3"}],nightForest:["sfx/shaking_bush_01.mp3","sfx/owl_1.mp3","sfx/katydid.mp3","sfx/blinking_eyes_01.mp3","sfx/toad.mp3","vo/senorTapir/tapir_song_mole.mp3","vo/genericMission/msMole_thanks.mp3"],nightForest_Missions:["vo/Area5_Night_Forest/night_m1_01.mp3","vo/Area5_Night_Forest/night_m1_02.mp3","vo/Area5_Night_Forest/night_m1_02_hint.mp3","vo/Area5_Night_Forest/night_m1_03.mp3","vo/Area5_Night_Forest/night_m2_01.mp3","vo/Area5_Night_Forest/night_m2_05.mp3","vo/Area5_Night_Forest/night_m2_04_hint.mp3","vo/Area5_Night_Forest/night_m2_03.mp3","vo/Area5_Night_Forest/night_m3_01.mp3","vo/Area5_Night_Forest/night_m3_02.mp3","vo/Area5_Night_Forest/night_m4_01.mp3","vo/Area5_Night_Forest/night_m4_02.mp3","vo/Area5_Night_Forest/night_m4_03.mp3","vo/Area5_Night_Forest/night_m4_04.mp3"],nightForest_HelperMissions:["vo/genericMission/msMole_help.mp3",{id:"HM_FindKatydid",src:"vo/genericMission/help_mole_log.mp3"},{id:"HM_Mole_Collection",src:"vo/genericMission/help_mole_collection1.mp3"},{id:"HM_Mole_Sieve",src:"vo/genericMission/help_mole_find.mp3"},{id:"HM_Mole_Draw",src:"vo/genericMission/help_mole_color1.mp3"},{id:"HM_Mole_Flowers",src:"vo/genericMission/help_mole_flowers.mp3"},{id:"HM_Mole_Moth",src:"vo/genericMission/help_mole_moth.mp3"}],magGlassInteraction:["vo/Area1_Clubhouse/clubhouse_m2_03.mp3","sfx/generic_success_1.mp3","sfx/generic_success_2.mp3","sfx/generic_click.mp3"],magGlassKatydidMag:["sfx/katydid.mp3"],magGlassToadMagBrown:["sfx/sfx_toad_throat.mp3"],magGlassToadMagGreen:["sfx/sfx_toad_throat.mp3"],magGlassToadMagYellow:["sfx/sfx_toad_throat.mp3"],torchInteraction:["sfx/generic_success_1.mp3","sfx/generic_success_2.mp3","sfx/generic_click.mp3"],binocularsInteraction:["sfx/generic_success_1.mp3","sfx/generic_success_2.mp3","sfx/generic_click.mp3","vo/general/onboarding_binoculars.mp3"],sieveInteraction:["sfx/generic_success_1.mp3","sfx/generic_success_2.mp3","sfx/seive_0.mp3","sfx/seive_1.mp3","sfx/generic_click.mp3"],notebook:[{id:"Camilla_Eggs2",src:"vo/genericMission/help_camilla_eggs2.mp3"},"vo/Area4_Deep_Forest/deep_m3_02.mp3","vo/Area4_Deep_Forest/deep_m3_03.mp3","vo/Area4_Deep_Forest/deep_m3_04.mp3","sfx/generic_click.mp3",{id:"HM_DrawToad2",src:"vo/genericMission/help_tapir_toads2.mp3"},{id:"help_mom_flowers2",src:"vo/genericMission/help_mom_flowers2.mp3"}],collectionBox:["vo/collectionBox/collectionbox_payoff_5.mp3","vo/collectionBox/collectionbox_payoff_4.mp3","vo/collectionBox/collectionbox_payoff_3.mp3","vo/collectionBox/collectionbox_intro.mp3","vo/collectionBox/collectionbox_payoff_1.mp3","vo/collectionBox/collectionbox_payoff_2.mp3","vo/collectionBox/collectionbox_entry_3.mp3","vo/collectionBox/collectionbox_entry_2.mp3","vo/collectionBox/collectionbox_entry_1.mp3","vo/genericMission/help_mole_collection2.mp3","vo/genericMission/help_tapir_collection2.mp3","vo/genericMission/help_mom_collection2.mp3","sfx/measure_fast_extend.mp3","sfx/measure_slow_extend.mp3","sfx/measure_snap_back.mp3","sfx/generic_click.mp3"],map:["vo/general/final_unlock_2.mp3","sfx/map_unlock.mp3","sfx/generic_click.mp3"]},y=_,v=function(){function e(e,t,n){var o=this;void 0===n&&(n=[]),this.assetTags=[],this.AddToStage=function(e){o.View.visible=!1,e.addChildAt(o.View,0),setTimeout(function(){o.View.visible=!0},50)},this.Preload=function(e){for(var t=0;t<o.assetTags.length;t++)o.LoadAssetsWithTag(o.assetTags[t]);for(t=0;t<e.length;t++)o.LoadAssetsWithTag(e[t]);return new Promise(function(e,t){PIXI.loader.load(e)})},this.LoadAssetsWithTag=function(e){o.AddAssetArray(d.prefix,d[e]),o.AddAssetArray(u.prefix,u[e]),o.AddAssetArray(f.prefix,f[e]),o.AddAssetArray(y.prefix,y[e]),o.AddAssetArray(m.prefix,m[e])},this.AddAssetArray=function(e,t){if(t)for(var n,o,i=0;i<t.length;i++)"string"==typeof(o=t[i])?n=o.split("\\").pop().split("/").pop().split(".")[0]:o.id&&o.src?(n=o.id,o=o.src):(console.error("Issues loading asset:"),console.error(o)),PIXI.loader.add(n,e+o)},this._id=t,this.SceneService=e,this.assetTags=n,this.assetTags.push(t)}return Object.defineProperty(e.prototype,"ID",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.Start=function(e){},e.prototype.Update=function(e){},e.prototype.SlowUpdate=function(e){},e.prototype.Teardown=function(){this.View.parent&&this.View.parent.removeChild(this.View),this.View.destroy({children:!0,texture:!0,baseTexture:!0}),this.View=null},e}(),b=function(){function e(){}return e.Get=function(e){if(PIXI.loader.resources[e])return PIXI.loader.resources[e].spineData;console.error("Could not get Spine Animation: "+e)},e}(),w=function(){function e(){}return Object.defineProperty(e,"IsMobile",{get:function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsDesktop",{get:function(){return!this.IsMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsKindle",{get:function(){var e=navigator.userAgent;return/Kindle/i.test(e)||/Silk/i.test(e)||/KFTT/i.test(e)||/KFOT/i.test(e)||/KFJWA/i.test(e)||/KFJWI/i.test(e)||/KFSOWI/i.test(e)||/KFTHWA/i.test(e)||/KFTHWI/i.test(e)||/KFAPWA/i.test(e)||/KFAPWI/i.test(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"lowEndDevice",{get:function(){try{return!(!e.isIOS||window.screen.height/window.screen.width!=1024/768||1!=window.devicePixelRatio)||e.isAndroid}catch(e){}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isAndroid",{get:function(){return(window.ua||navigator.userAgent).toLowerCase().indexOf("android")>-1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"androidVersion",{get:function(){var e=(window.ua||navigator.userAgent).toLowerCase().match(/android\s([0-9\.]*)/);return e?e[1]:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"majorAndroidVersion",{get:function(){return parseInt(e.androidVersion,10)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIOS",{get:function(){return!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isIPhone",{get:function(){return!!navigator.platform&&/iPhone|iPod/.test(navigator.platform)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"iosVersion",{get:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||"0",10)]}},enumerable:!0,configurable:!0}),e}(),S=function(){return function(e,t){var n=this;void 0===t&&(t=!0),this.onDragStart=function(e){e.data.isPrimary&&n.active&&(w.IsMobile?n.startDraging(e):n.dragging?n.stopDrag(e):n.startDraging(e))},this.startDraging=function(e){n.dragging||(n.dragging=!0,n.data=e.data,n.dragStartTime=(new Date).getTime(),n.previousPos=n.toCanvasPos(e))},this.onDragEnd=function(e){w.IsMobile?n.stopDrag(e):(new Date).getTime()-n.dragStartTime>za.MinDragTime&&n.stopDrag(e)},this.stopDrag=function(e){n.active&&e.data.isPrimary&&(n.TryDraw(n.previousPos,n.previousPos),n.dragging=!1,n.data=null)},this.onDragMove=function(e){if(n.active&&e.data.isPrimary&&n.dragging){var t=n.toCanvasPos(e);n.TryDraw(n.previousPos,t),n.previousPos=t}},this.toCanvasPos=function(e){var t=n.data.getLocalPosition(n.parent);return t.x-=n.canvasPos.x,t.y-=n.canvasPos.y,t},this.TryDraw=function(e,t){n.active&&n.inBounds(e,t)&&n.draw(e,t)},this.inBounds=function(e,t){return n.canvasBounds.contains(e.x,e.y)&&n.canvasBounds.contains(t.x,t.y)},this.draw=function(e,t){n.paintCanvas.Draw(e,t)},this.teardownCurrent=function(){n.paintCanvas&&(n.paintCanvas.interactive=!1,n.paintCanvas.removeAllListeners())},this.teardownCurrent(),this.paintCanvas=e,this.parent=e.parent,this.canvasPos=e.position,this.canvasBounds=e.GetBounds();var o=new r.Sprite(X.Get("2PixelRect"));this.parent.addChild(o),o.alpha=.1,o.position.set(-300,-350),o.scale.set(330,350),o.interactive=!0,o.on("pointerdown",this.onDragStart).on("pointerup",this.onDragEnd).on("pointerupoutside",this.onDragEnd).on("pointermove",this.onDragMove),this.active=t}}(),k=function(){function e(){}return e.lerp=function(t,n,o){return t+(n-t)*e.clamp01(o)},e.inverseLerp=function(e,t,n){return(n-e)/(t-e)},e.lerpPoint=function(t,n,o){return new r.Point(e.lerp(t.x,n.x,o),e.lerp(t.y,n.y,o))},e.rotate=function(e,t){return 0==t?new r.Point(e,0):new r.Point(Math.cos(t)*e,Math.sin(t)*e)},e.clamp=function(e,t,n){return e<t?t:e>n?n:e},e.clamp01=function(t){return e.clamp(t,0,1)},e.clampPoint=function(t,n){return new r.Point(e.clamp(t.x,n.x,n.x+n.width),e.clamp(t.y,n.y,n.y+n.height))},e.smoothStep=function(e){return-2*Math.pow(e,3)+3*Math.pow(e,2)},e.Rand=function(e){return void 0===e&&(e=1),Math.random()*e},e.RandBool=function(){return Math.random()>.5},e.Range=function(e,t){return Math.random()*(t-e)+e},e.IntRange=function(t,n){return Math.floor(e.Range(t,n))},e.dist=function(t,n){return Math.sqrt(e.srqDist(t,n))},e.srqDist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},e.magnitude=function(t){return e.dist(t,{x:0,y:0})},e.normalize=function(t){var n=e.magnitude(t);return new r.Point(t.x/n,t.y/n)},e.mod=function(e,t){return(e%t+t)%t},e.moveTowards=function(t,n,o){var i=new r.Point(n.x-t.x,n.y-t.y),a=e.magnitude(i);return a<=o||0==a?n:new r.Point(t.x+i.x*(o/a),t.y+i.y*(o/a))},e.moveTowardsValue=function(e,t,n){var o;return t>e?(o=e+n)>t?t:o:(o=e-n)<t?t:o},e}(),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(e){function t(t,n){void 0===n&&(n=0);var o=e.call(this)||this;return o.Data=t,o.position=t.Position,o.zIndex=n,o.interactive=!0,o}return T(t,e),t}(r.Container),P=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),B=function(e){function t(t,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var r=e.call(this,t,i)||this;try{r.SpineAnim=new PIXI.spine.Spine(b.Get(t.Name)),r.SpineAnim.position.set(n,o),r.SpineAnim.tint=l.SceneTint;r.SpineAnim.state.hasAnimation("animation")&&r.SpineAnim.state.setAnimation(0,"animation",!0),r.addChild(r.SpineAnim),r.SpineAnim.update(0)}catch(e){console.error(e)}return r}return P(t,e),t.prototype.AddHitbox=function(e,t,n,o){void 0===n&&(n=.5),void 0===o&&(o=.8);var i=new r.Sprite(X.Get("2PixelRect"));i.anchor.set(n,o),i.scale.set(e/2,t/2),i.alpha=1e-5,this.addChild(i)},t.prototype.Teardown=function(){},t}(C),I=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),A=function(e){function t(t,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=0);var a=e.call(this,t,i)||this,s=new r.Sprite(X.Get(t.Name));return s.tint=l.SceneTint,s.position.set(n,o),a.addChild(s),a}return I(t,e),t.prototype.Teardown=function(){},t}(C),O=n(1),M=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),x=function(e){function t(t){var n=e.call(this,t,-1e3)||this,o=new r.Container;o.position.set(0,-230),o.scale.set(.9),n.addChild(o);var i=new r.Sprite(X.Get("treeEyesBG"));i.anchor.set(.3,.65),o.addChild(i);var a=new r.Sprite(X.Get("treeEyes"));a.scale.set(.6),o.addChild(a),n.tl=new O.h({repeat:-1,repeatDelay:.9}),n.tl.to(a,.1,{x:4,y:0}),n.tl.to(a,.1,{x:-3,y:4},.5),n.tl.to(a,.1,{x:0,y:0},1.2),n.tl.to(a,.1,{alpha:0},1.9);var s=new r.Sprite(X.Get("2PixelRect"));return s.x=20,s.scale.set(50,60),s.anchor.set(.5),s.alpha=.001,o.addChild(s),n}return M(t,e),t.prototype.Teardown=function(){this.tl&&this.tl.kill()},t}(C),G=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),D=(function(e){function t(t){var n=e.call(this,t)||this,o=new PIXI.spine.Spine(b.Get("bush"));return o.update(0),o.tint=l.SceneTint,o.state.setAnimation(0,"animation",!0),o.scale.set(.8),n.addChild(o),n}G(t,e),t.prototype.Teardown=function(){}}(C),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),L=function(e){function t(t,n){var o=e.call(this,t)||this;try{var i=new PIXI.spine.Spine(b.Get("Toad"));i.skeleton.setSkinByName(n+"toad"),i.tint=l.SceneTint,i.scale.set(.8),i.update(0);i.state.hasAnimation("LogIdle")&&i.state.setAnimation(0,"LogIdle",!0),o.addChild(i)}catch(e){console.error(e)}return o}return D(t,e),t.prototype.Teardown=function(){},t}(C),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),H=function(e){function t(t){var n=e.call(this,t)||this,o=new PIXI.spine.Spine(b.Get("Bush"));return o.update(0),o.tint=l.SceneTint,o.state.setAnimation(0,"animation",!0),o.scale.set(.8),n.addChild(o),n}return F(t,e),t.prototype.Teardown=function(){},t}(C),V=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),N=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new r.Sprite(X.Get("CaterpillarBino"));return n.addChild(o),o.anchor.set(.5),o.scale.set(.7),o.y=-230,n}return V(t,e),t}(C),j=(function(){}(),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),R=(n(200),function(e){function t(t,n){var o=e.call(this)||this;return o.viewScale=.3,o.bodyTrack=0,o.mouthTrack=1,o.PlayAnim=function(e,t){o.spineAnim.state.hasAnimation(e)?(o.loopingAnim=t,o.spineAnim.state.setAnimation(o.bodyTrack,e,t)):(console.error("Anim "+e+" not found on spine data."),o.spineAnim.state.setAnimation(o.bodyTrack,es.IDLE,!0))},o.onAnimComplete=function(e,t){e!=o.bodyTrack||o.loopingAnim||o.spineAnim.state.setAnimation(o.bodyTrack,o.isWalking?es.WALK:es.IDLE,!0)},o.PlayAnims=function(e,t){o.spineAnim.state.setAnimation(o.bodyTrack,e,!1),o.spineAnim.state.addAnimation(o.bodyTrack,t,!1,0)},o.PlayTalkAnim=function(e){o.spineAnim.state.setAnimation(o.mouthTrack,es.TALK,!0),o.stopTalkingDelay&&o.stopTalkingDelay.kill(),o.stopTalkingDelay=O.i.delayedCall(e,o.StopTalkAnim)},o.StopTalkAnim=function(){o.spineAnim.state.tracks[o.mouthTrack]&&o.spineAnim.state.setEmptyAnimation(o.mouthTrack,.3),o.stopTalkingDelay&&o.stopTalkingDelay.kill(),o.stopTalkingDelay=null},o.UpdatePosition=function(e){o.x=e.x,o.y=e.y},o.UpdateHeading=function(e){o.spineAnim.skeleton.scaleX=e?-1:1},o.ShowBubble=function(e,t){void 0===t&&(t=new r.Point(0,-200));var n=new r.Sprite(X.Get("bubble_"+o.name));n.position=t,n.anchor.set(.5,1),n.scale.set(.5),n.alpha=0,o.addChild(n);var i=new O.h;i.to(n,.2,{alpha:1},.5),i.to(n.scale,.6,{x:1,y:1,ease:O.d.easeOut.config(1,.3)},.5),e||(i.to(n,.25,{alpha:0},2.5),i.to(n.scale,.25,{x:.4,y:.4,ease:O.g.easeIn},2.5),i.to(n,.25,{alpha:0},4.5),i.to(n.scale,.25,{x:.4,y:.4,ease:O.g.easeIn},4.5))},o.mixAnims=function(){o.spineAnim.state.hasAnimation(es.IDLE)&&o.spineAnim.state.hasAnimation(es.WALK)&&o.mixAnim(es.IDLE,es.WALK,.25),o.spineAnim.state.hasAnimation(es.SELECT)&&(o.mixAnim(es.IDLE,es.SELECT,.25),o.mixAnim(es.WALK,es.SELECT,.25))},o.mixAnim=function(e,t,n){o.spineAnim.stateData.setMix(e,t,n),o.spineAnim.stateData.setMix(t,e,n)},o.name=t,o.spineAnim=new PIXI.spine.Spine(n),o.spineAnim.tint=l.CharTint,o.spineAnim.scale.set(o.viewScale),o.spineAnim.state.setAnimation(0,es.IDLE,!0),o.spineAnim.state.onComplete=o.onAnimComplete,o.addChild(o.spineAnim),o.spineAnim.update(0),o.interactive=!0,o.buttonMode=!0,o.mixAnims(),o}return j(t,e),t.prototype.StartWalking=function(){this.isWalking=!0,this.PlayAnim(es.WALK,!0)},t.prototype.StopWalking=function(){this.isWalking=!1,this.PlayAnim(es.IDLE,!0)},t}(r.Container)),U=n(12),E=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),W=function(e){function t(t){var n=e.call(this,X.Get("shadow"))||this;return n.zIndex=-500,n.alpha=.13,n.anchor.set(.5),n.scale.set(t),n}return E(t,e),t}(r.Sprite),X=function(){function e(){}return e.Get=function(e){if(PIXI.loader.resources[e])return PIXI.loader.resources[e].texture;console.error("Could not get Texture: "+e)},e}(),z=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Y=function(e){function t(t,n,o,i,r){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i=3),void 0===r&&(r=!1);var a=e.call(this,null)||this;return a.DEFAULT=0,a.MOUSE_DOWN=1,a.MOUSE_OVER=2,a.isMouseOver=!1,a.segments=4,a.horizontalLayout=!0,a.onButtonUp=function(){a.setSegment(a.DEFAULT)},a.onButtonUpOutSide=function(){a.setSegment(a.DEFAULT)},a.onButtonDown=function(){a.setSegment(a.MOUSE_DOWN),a.emit("buttondown")},a.onButtonOut=function(){a.setSegment(a.DEFAULT),a.isMouseOver=!1},a.onButtonOver=function(){a.setSegment(a.MOUSE_OVER),a.isMouseOver=!0},a.setSegment=function(e){a.texture=a.btnTextures[e]},a.setTexture=function(e){var t,n;if(a.texture=X.Get(e),a.btnTextures=[],a.horizontalLayout){t=a.texture.width/a.segments,n=a.texture.height;for(var o=0;o<3;o++){var i=new PIXI.Texture(a.texture,new PIXI.Rectangle(o*t,0,t,n));a.btnTextures.push(i)}}else{t=a.texture.width,n=a.texture.height/a.segments;for(o=0;o<3;o++){i=new PIXI.Texture(a.texture,new PIXI.Rectangle(0,o*n,t,n));a.btnTextures.push(i)}}a.setSegment(a.DEFAULT)},a.x=n,a.y=o,a.segments=i,a.horizontalLayout=r,a.anchor.set(.5),a.setTexture(t),a.on("pointerdown",a.onButtonDown),a.on("pointerup",a.onButtonUp),a.on("pointerupoutside",a.onButtonUpOutSide),a.on("pointerover",a.onButtonOver),a.on("pointerout",a.onButtonOut),a.interactive=!0,a.buttonMode=!0,a.on("pointertap",function(){Ko.Play("generic_click")}),a}return z(t,e),t.prototype.resetState=function(){this.setSegment(this.DEFAULT)},t}(r.Sprite),K=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Z=function(e){function t(t,n,o,i){void 0===n&&(n=0),void 0===o&&(o=0),void 0===i&&(i="");var a=e.call(this)||this;return a.DEFAULT=0,a.MOUSE_DOWN=1,a.MOUSE_OVER=2,a.isMouseOver=!1,a.onButtonUp=function(){a.Sprite.tint=16777215},a.onButtonUpOutSide=function(){a.Sprite.tint=16777215,a.Sprite.scale.set(1)},a.onButtonDown=function(e){e.data.isPrimary&&(a.Sprite.tint=11184810,a.emit("buttondown"))},a.onButtonOut=function(){a.Sprite.tint=16777215,a.Sprite.scale.set(1),a.isMouseOver=!1},a.onButtonOver=function(){a.isMouseOver=!0,a.Sprite.scale.set(1.1)},a.position.set(n,o),a.Sprite=new r.Sprite(X.Get(t)),a.addChild(a.Sprite),a.Sprite.anchor.set(.5),a.on("pointerdown",a.onButtonDown),a.on("pointerup",a.onButtonUp),a.on("pointerupoutside",a.onButtonUpOutSide),a.on("pointerover",a.onButtonOver),a.on("pointerout",a.onButtonOut),a.on("pointertap",function(){Ko.Play("generic_click")}),a.interactive=!0,a.buttonMode=!0,a}return K(t,e),t.prototype.resetState=function(){this.Sprite.tint=16777215,this.Sprite.scale.set(1)},t.prototype.SetTexture=function(e){this.Sprite.texture=X.Get(e)},t}(r.Container),q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J=function(e){function t(t,n,o,i){void 0===o&&(o=0),void 0===i&&(i=0);var a=e.call(this)||this;return a.canUse=!1,a.tint_overs=[11063270,11069135,14478785,16771510,16765878,16755365],a.tint_downs=[9285854,9295552,12181934,16767903,16758431,16748426],a.tint_normal=16777215,a.volume=0,a.SetHintState=function(e){a.canUse&&!e?a.StopHint():!a.canUse&&e&&a.StartHint()},a.StartHint=function(){a.canUse=!0,a.bgTexture.tint=a.tint_over,a.jiggleIcon()},a.jiggleIcon=function(){a.tl&&a.tl.kill(),a.tl=new O.h({repeat:4,repeatDelay:.6}),a.tl.to(a.tooltexture,.08,{rotation:-.1}),a.tl.to(a.tooltexture,.1,{rotation:.2}),a.tl.to(a.tooltexture,.14,{rotation:-.3}),a.tl.to(a.tooltexture,.1,{rotation:.2}),a.tl.to(a.tooltexture,.08,{rotation:-.1}),a.tl.to(a.tooltexture,.05,{rotation:0}),a.tl.to(a.tooltexture.scale,.3,{x:1.4,y:1.4},0),a.tl.to(a.tooltexture.scale,.3,{x:1,y:1},.3)},a.onButtonUp=function(){a.bgTexture.tint=a.tint_over},a.onButtonUpOutSide=function(){a.bgTexture.tint=a.canUse?a.tint_over:a.tint_normal},a.onButtonDown=function(){a.emit("buttondown"),a.bgTexture.tint=a.tint_down,w.IsMobile&&Ko.Play("xylo_"+a.id,.2)},a.onButtonOut=function(){a.bgTexture.scale.set(1),a.tooltexture.scale.set(1),a.bgTexture.tint=a.canUse?a.tint_over:a.tint_normal},a.onButtonOver=function(){a.bgTexture.scale.set(.95),a.tooltexture.scale.set(1.1),a.bgTexture.tint=a.tint_over,w.IsDesktop&&Ko.Play("xylo_"+a.id,.2)},a.x=o,a.y=i,a.y=i,a.id=n,a.tint_over=a.tint_overs[n],a.tint_down=a.tint_downs[n],a.on("pointerdown",a.onButtonDown),a.on("pointerup",a.onButtonUp),a.on("pointerupoutside",a.onButtonUpOutSide),a.on("pointerover",a.onButtonOver),a.on("pointerout",a.onButtonOut),a.bgTexture=new r.Sprite(X.Get("toolIcon_bg"+(n+1)%2)),a.bgTexture.anchor.set(.5),a.addChild(a.bgTexture),a.tooltexture=new r.Sprite(X.Get("toolIcon_"+t)),a.tooltexture.anchor.set(.5),a.addChild(a.tooltexture),a.hitArea=new PIXI.Rectangle(-60,-65,120,130),a.interactive=!0,a.buttonMode=!0,setTimeout(function(){return a.volume=.2},1e3),window.b=a,a}return q(t,e),Object.defineProperty(t.prototype,"CanUse",{get:function(){return this.canUse},enumerable:!0,configurable:!0}),t.prototype.resetState=function(){this.onButtonOut()},t.prototype.SetTint=function(e){this.bgTexture.tint=e,this.tooltexture.tint=e},t.prototype.StopHint=function(){this.canUse=!1,this.bgTexture.tint=this.tint_normal,this.tl&&this.tl.kill(),this.tl=null,this.tooltexture.rotation=0},t}(r.Container),Q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$=function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var o=e.call(this)||this;return o.tint_normal=16777215,o.tint_over=16754126,o.tint_down=16615870,o.volume=0,o.SetType=function(e){o.seedTexture.texture=X.Get("SeedBag"+e)},o.Wiggle=function(){o.tint_normal=o.tint_over,o.bgTexture.tint=o.tint_over,o.tl&&o.tl.kill(),o.tl=new O.h({repeat:4,repeatDelay:.6}),o.tl.to(o.seedTexture,.08,{rotation:-.1}),o.tl.to(o.seedTexture,.1,{rotation:.2}),o.tl.to(o.seedTexture,.14,{rotation:-.3}),o.tl.to(o.seedTexture,.1,{rotation:.2}),o.tl.to(o.seedTexture,.08,{rotation:-.1}),o.tl.to(o.seedTexture,.05,{rotation:0}),o.tl.to(o.seedTexture.scale,.3,{x:1.4,y:1.4},0),o.tl.to(o.seedTexture.scale,.3,{x:1,y:1},.3),O.i.delayedCall(5,function(){o.tint_normal=16777215,o.bgTexture.tint=o.tint_normal})},o.onButtonUp=function(){o.bgTexture.tint=o.tint_over},o.onButtonUpOutSide=function(){o.bgTexture.tint=o.tint_normal},o.onButtonDown=function(){o.emit("buttondown"),o.bgTexture.tint=o.tint_down,w.IsMobile&&Ko.Play("xylo_4_seedbag",.2)},o.onButtonOut=function(){o.bgTexture.scale.set(1),o.seedTexture.scale.set(1),o.bgTexture.tint=o.tint_normal},o.onButtonOver=function(){o.bgTexture.scale.set(.95),o.seedTexture.scale.set(1.1),o.bgTexture.tint=o.tint_over,w.IsDesktop&&Ko.Play("xylo_4_seedbag",.2)},o.x=t,o.y=n,o.scale.set(.7),o.on("pointerdown",o.onButtonDown),o.on("pointerup",o.onButtonUp),o.on("pointerupoutside",o.onButtonUpOutSide),o.on("pointerover",o.onButtonOver),o.on("pointerout",o.onButtonOut),o.bgTexture=new r.Sprite(X.Get("toolIcon_bg1")),o.bgTexture.anchor.set(.5),o.addChild(o.bgTexture),o.seedTexture=new r.Sprite(X.Get("SeedBag"+l.SeedType)),o.seedTexture.anchor.set(.5),o.addChild(o.seedTexture),o.hitArea=new PIXI.Rectangle(-60,-65,120,130),o.interactive=!0,o.buttonMode=!0,setTimeout(function(){return o.volume=.2},1e3),window.s=o,o}return Q(t,e),t.prototype.resetState=function(){this.onButtonOut()},t}(r.Container),ee=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),te=function(e){function t(t,n,o){var i=e.call(this)||this;i.Wiggle=function(){i.seedbag.Wiggle()},i.openSeedMenu=function(){var e=0;i.bg.visible=!0,i.seedButtons[0].visible=!0,i.seedButtons[0].x=500+110*e++;for(var t=1;t<i.seedButtons.length;t++)$a.Unocked[i.seedButtons[t].name]?(i.seedButtons[t].visible=!0,i.seedButtons[t].x=500+110*e++):i.seedButtons[t].visible=!1;if(Ko.Play("use_seeds"),i.taskService.Task&&i.taskService.Task.Name==a.SelectChrysanthemumSeed){var n=new O.h({repeat:-1,repeatDelay:.6});n.to(i.seedButtons[1],.08,{rotation:-.1}),n.to(i.seedButtons[1],.1,{rotation:.2}),n.to(i.seedButtons[1],.14,{rotation:-.3}),n.to(i.seedButtons[1],.1,{rotation:.2}),n.to(i.seedButtons[1],.08,{rotation:-.1}),n.to(i.seedButtons[1],.05,{rotation:0}),i.yellowSeedHighlight=n}},i.closeSeedMenu=function(){i.bg.visible=!1;for(var e=0;e<i.seedButtons.length;e++)i.seedButtons[e].visible=!1;i.yellowSeedHighlight&&(i.yellowSeedHighlight.kill(),i.yellowSeedHighlight=null)},i.addSeedBtns=function(){i.seedButtons=[];for(var e=function(e){var t=new Z("Seed"+$a.All[e],310+110*e,-60);t.name=$a.All[e],i.seedButtons[e]=t,i.addChild(t),t.on("pointertap",function(){return i.onSelectSeed(e)}),t.interactive=!0},t=0;t<$a.All.length;t++)e(t)},i.onSelectSeed=function(e){l.SeedType=$a.All[e],i.tools.SeedSelected.Dispatch(l.SeedType),i.seedbag.SetType($a.All[e]),i.closeSeedMenu(),pi.UseTool("seed bag","select "+l.SeedType)},i.tools=t.Tools,i.taskService=t.TaskService;var s=new r.Container;return s.position.set(n,o),i.addChild(s),i.seedbag=new $,s.addChild(i.seedbag),i.bg=new r.Sprite(X.Get("2PixelRect")),i.bg.scale.set(za.Width/2,za.Height/2),i.bg.interactive=!0,i.bg.tint=0,i.bg.alpha=.4,i.bg.y=-550,i.addChild(i.bg),i.addSeedBtns(),i.seedbag.on("pointertap",i.openSeedMenu),i.bg.on("pointertap",i.closeSeedMenu),i.closeSeedMenu(),l.NewSeedType&&(l.NewSeedType!=$a.Daisy||(l.NewSeedType!=$a.Chrysanthemum?i.seedbag.Wiggle():(Vn.Play("newflower_obs_02"),i.seedbag.Wiggle())),l.NewSeedType=""),i}return ee(t,e),t}(r.Container),ne=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttons={},t.seedbagX=887,t.buttonX=[457,557,667,777,997,1107],t.Init=function(e){t.tools=e.Tools,t.btnCont=new r.Container,t.addChild(t.btnCont),t.btnCont.y=550;var n=new r.Sprite(X.Get("buttonbar"));n.interactive=!0,n.position=new r.Point(za.Width/2,90),n.anchor.set(.5),t.btnCont.addChild(n);var o=!1;ns.All.forEach(function(e,n){var i=new J(e,n,t.buttonX[n],80);i.scale.set(.7),i.visible=!1,i.on("pointertap",function(){return t.toolBtnPress(i,e)}),t.btnCont.addChild(i),t.buttons[e]=i,o=o||qo.IsUnlocked(e)}),t.seedbagUI=new te(e,t.seedbagX,80),t.seedbagUI.visible=qo.SeedbagUnlocked,t.btnCont.addChild(t.seedbagUI),t.btnCont.visible=o},t.UnlockSeedbag=function(){t.seedbagUI.visible=!0,t.seedbagUI.Wiggle()},t.SetEnabled=function(e){ns.All.forEach(function(n){var o=t.buttons[n];o.interactive=e,o.SetTint(e?16777215:11184810),o.resetState()})},t.UpdateHints=function(e){t.btnCont.visible=!1,ns.All.forEach(function(n){var o=t.buttons[n],i=e[n];qo.IsUnlocked(n)?(o.SetHintState(i),o.visible=!0,t.btnCont.visible=!0):o.visible=!1}),t.seedbagUI.visible=qo.SeedbagUnlocked,t.toolTutHand&&(t.toolTutHand.visible=e[ns.MagnifyingGlass])},t.AddTutHand=function(){t.toolTutHand=new re(460,600),t.addChild(t.toolTutHand)},t.toolBtnPress=function(e,n){t.tools.TryUse.Dispatch(n)},t}return ne(t,e),t}(r.Container),ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),re=function(e){function t(t,n){var o=e.call(this)||this;o.position.set(t,n);var i=new r.Sprite(X.Get("pointHand"));i.position.set(50,-130),i.anchor.set(.5),i.rotation=-.7,i.scale.set(.65),o.addChild(i);var a=new O.h({repeat:-1,repeatDelay:1.4});return a.to(i,.25,{y:-50,ease:O.a.easeOut},0),a.to(i,.35,{y:-130,ease:O.a.easeOut},.25),o}return ie(t,e),t}(r.Container),ae=n(96),se=function(){function e(){}return e.Get=function(e){if(PIXI.loader.resources[e])return PIXI.loader.resources[e].data;console.error("Could not get Particle: "+e)},e}(),le=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ce=function(e){function t(t,n,o){void 0===o&&(o="stickerBurst");var i=e.call(this)||this;i.Teardown=function(){i.emitter&&(i.emitter.autoUpdate=!1,i.emitter.emit=!1,i.emitter.destroy())},i.position.set(n.x,n.y);var r=se.Get(t+"Emitter"),a=[X.Get(o)];return i.emitter=new ae.a(i,a,r),i}return le(t,e),t}(r.Container),ue=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=function(e){function t(){var t=e.call(this)||this;return t.bubbleSide="right",t.flipped=!1,t.IconDuration=3,t.assetPrefix="./assets/images/ui/task/",t.onTaskStarted=function(e){e?(t.hasTask=!0,t.currentTask=e,t.bubbleChar.texture=r.Texture.fromImage(t.assetPrefix+"char_"+e.Giver+".png"),t.bubbleChar.visible=!0,t.bubbleIcon.visible=!1,t.bounceBubble(),t.updateBubbleSide(e)):console.warn("mission start was called, but there's no active mission.")},t.onTaskComplete=function(e){O.i.delayedCall(.33,function(){t.bubbeTick.visible=!0,O.i.delayedCall(2,function(){return t.bubbeTick.visible=!1});var e=new r.Point(-170,-120),n=new ce("TickParticles",e,"TickParticles");n.emitter.playOnceAndDestroy(),t.addChild(n),t.bounceBubble()}),e.HideSpeachBubbleAfterTask&&O.i.delayedCall(5,t.hideIfNoMission)},t.hideIfNoMission=function(){t.currentTask=t.taskService.Task,t.hasTask=null!=t.currentTask},t.bounceBubble=function(){O.i.killChildTweensOf(t);var e=new O.h;e.to(t.scaleCont.scale,.2,{x:1.4,y:1.4},0),e.to(t.scaleCont.scale,.2,{x:1,y:1},.8)},t.onTap=function(){var e=t.taskService.Task;e?(t.taskService.emit(ei.RepeatInstrux,e),t.bubbleIcon.texture=r.Texture.fromImage(t.assetPrefix+e.Name+".png"),t.questIconTimer=t.IconDuration,t.bubbleIcon.visible=!0,t.bubbleChar.visible=!1,t.bounceBubble()):console.error("quest bubble tapped, without valid active quest!")},t.updateMissionBubble=function(){t.currentTask&&t.updateBubbleSide(t.currentTask),t.visible=t.hasTask&&t.giverOffScreen},t.updateBubbleSide=function(e){e.SceneName!=t.sceneName?(t.giverOffScreen=!0,t.showOnMissionSide(e),t.updateBubblePos()):t.charOffScreen(e.Giver)?(t.giverOffScreen=!0,t.updateBubblePos()):t.giverOffScreen=!1},t.updateBubblePos=function(){"right"==t.bubbleSide?(t.x=za.Width-Dn.Offset,t.flipped=!1,t.scale.x=1,t.bubbeTick.scale.x=1):"left"==t.bubbleSide?(t.x=Dn.Offset,t.flipped=!1,t.scale.x=-1,t.bubbeTick.scale.x=-1):console.error("Unexpected dir: "+t.bubbleSide)},t.charOffScreen=function(e){var n=t.charService.Get(e);if(n){var o=n.Position.x-t.elinor.Position.x;if(o<0?o-=Dn.Offset:o+=Dn.Offset,o>750)return t.bubbleSide="right",!0;if(o<-750)return t.bubbleSide="left",!0}else console.error("Mission giver not on this level!");return!1},t.showOnMissionSide=function(e){var n=t.sceneName,o=e.SceneName;n==qa.Clubhouse?t.bubbleSide=o==qa.DeepForest||o==qa.NightForest?"left":"right":n==qa.RiverBank?t.bubbleSide=o==qa.Clubhouse||o==qa.NightForest?"left":"right":n==qa.ElinorsHouse?t.bubbleSide=o==qa.Clubhouse||o==qa.RiverBank?"left":"right":n==qa.DeepForest?t.bubbleSide=o==qa.RiverBank||o==qa.ElinorsHouse?"left":"right":n==qa.NightForest&&(t.bubbleSide=o==qa.DeepForest||o==qa.ElinorsHouse?"left":"right")},t.y=350,t.visible=!1,t.interactive=!0,t.buttonMode=!0,t.on("pointertap",t.onTap),t.scaleCont=new r.Container,t.addChild(t.scaleCont),t.bubbleBase=r.Sprite.fromImage(t.assetPrefix+"bubbleBase.png"),t.bubbleBase.anchor.set(1,1),t.scaleCont.addChild(t.bubbleBase),t.bubbleChar=r.Sprite.fromImage(t.assetPrefix+"char_olive.png"),t.bubbleChar.position.set(-60,-65),t.bubbleChar.anchor.set(.5),t.bubbleChar.scale.set(.7),t.scaleCont.addChild(t.bubbleChar),t.bubbleIcon=r.Sprite.fromImage(t.assetPrefix+"FindMagGlass.png"),t.bubbleIcon.position.set(-60,-65),t.bubbleIcon.scale.set(.6),t.bubbleIcon.anchor.set(.5),t.bubbleIcon.visible=!1,t.scaleCont.addChild(t.bubbleIcon),t.bubbeTick=r.Sprite.fromImage(t.assetPrefix+"bubbleTick.png"),t.bubbeTick.position.set(-120,-90),t.bubbeTick.anchor.set(.5),t.bubbeTick.visible=!1,t.scaleCont.addChild(t.bubbeTick),t}return ue(t,e),t.prototype.Init=function(e){this.taskService=e.TaskService,this.charService=e.CharacterService,this.elinor=this.charService.Elinor,this.sceneName=e.ID,this.taskService.on(ei.Start,this.onTaskStarted),this.taskService.on(ei.Complete,this.onTaskComplete),this.taskService.Task&&this.onTaskStarted(this.taskService.Task)},t.prototype.SlowUpdate=function(e){this.updateMissionBubble(),this.questIconTimer>0&&(this.questIconTimer-=e,this.questIconTimer<=0&&(this.bubbleIcon.visible=!1,this.bubbleChar.visible=!0))},t}(r.Container),de=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),he=function(e){function t(t,n,o,i){var r=e.call(this)||this;return r.defaultFont={fontSize:30,fill:4539717},r.col_on=10813271,r.col_off=16738634,r.SetValue=function(e){r.cacheAsBitmap=!1,r.label.text=r.text+e,r.bg.tint=e?r.col_on:r.col_off,r.cacheAsBitmap=!0},r._calculateCachedBounds=function(){return r.bg.getBounds()},r.x=o,r.y=i,r.text=t,r.label=new PIXI.Text(t+"false ",r.defaultFont),r.bg=new PIXI.Sprite(X.Get("2PixelRect")),r.bg.scale.set(r.label.width/1.99,r.label.height/1.99),r.bg.position.set(-5,-2),r.addChild(r.bg),r.addChild(r.bg),r.addChild(r.label),r.interactive=!0,r.SetValue(n),r}return de(t,e),t}(PIXI.Container),fe=n(10),ge=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(e){function t(t){var n=e.call(this)||this;n.toolToggels=[],n.onKeydown=function(e){if(27==e.keyCode)n.debugCont.visible=!1;else if(32==e.keyCode)n.toggleWalkSpeed();else if(77==e.keyCode)n.toggleVolume();else if(e.keyCode>=49&&e.keyCode<=54){var t=e.keyCode-49,o=ns.All[t];qo.UnlockState[o]=!qo.UnlockState[o],n.toolToggels[t].SetValue(qo.UnlockState[o])}else if(55==e.keyCode)qo.SeedbagUnlocked=!qo.SeedbagUnlocked,n.seedbagToggle.SetValue(qo.SeedbagUnlocked);else if(56==e.keyCode)qo.NotebookUnlocked=!qo.NotebookUnlocked;else if(70==e.keyCode){document.querySelector("#frame").requestFullscreen()}},n.toggleDebugMenu=function(){n.debugCont.visible=!n.debugCont.visible},n.toggleWalkSpeed=function(){li.FastWalk=!li.FastWalk,n.speedToggle.SetValue(li.FastWalk)},n.toggleVolume=function(){window.game.SrApp.state.soundVolume.value=0==window.game.SrApp.state.soundVolume.value?1:0,n.volumeToggle.SetValue(window.game.SrApp.state.soundVolume.value>0)},n.completeGame=function(){zo.Tasks=[],zo.CurrentTask=null,l.CurrentScene=qa.NightForest,l.PreviousGameScene=qa.NightForest,l.GameComplete=!0,l.RewardPayoffPlayed=!0,l.AriUnlocked=!0,l.OliveUnlocked=!0,l.OnboardingComplete=!0,l.MagGlassTutComplete=!0,l.SieveTutComplete=!0,l.UnlockedAreas[qa.Clubhouse]=!0,l.UnlockedAreas[qa.RiverBank]=!0,l.UnlockedAreas[qa.ElinorsHouse]=!0,l.UnlockedAreas[qa.DeepForest]=!0,l.UnlockedAreas[qa.NightForest]=!0,l.VisitedAreas[qa.Clubhouse]=!0,l.VisitedAreas[qa.RiverBank]=!0,l.VisitedAreas[qa.ElinorsHouse]=!0,l.VisitedAreas[qa.DeepForest]=!0,l.VisitedAreas[qa.NightForest]=!0,l.CompletedAreas[qa.Clubhouse]=!0,l.CompletedAreas[qa.RiverBank]=!0,l.CompletedAreas[qa.ElinorsHouse]=!0,l.CompletedAreas[qa.DeepForest]=!0,l.CompletedAreas[qa.NightForest]=!0,qo.UnlockState[ns.MagnifyingGlass]=!0,qo.UnlockState[ns.WateringCan]=!0,qo.UnlockState[ns.Shovel]=!0,qo.UnlockState[ns.Sieve]=!0,qo.UnlockState[ns.Torch]=!0,qo.UnlockState[ns.Binoculars]=!0,qo.NotebookUnlocked=!0,qo.CollectionBoxUnlocked=!0,Ln.Save(),location.reload()},n.debugCont=new r.Container,n.debugCont.visible=!1,n.addChild(n.debugCont),n.openCloseBtn=r.Sprite.fromImage("./assets/images/common/debugBtn.png"),n.openCloseBtn.on("pointertap",n.toggleDebugMenu),n.openCloseBtn.position=new r.Point(za.Width/2-470,10),n.openCloseBtn.interactive=!0,n.openCloseBtn.scale.set(.5),n.addChild(n.openCloseBtn);var o=new r.Sprite(X.Get("2PixelRect"));o.scale.set(za.Width/2,za.Height/2),o.interactive=!0,o.alpha=.7,n.debugCont.addChild(o);var i=window.game.SrApp.state.soundVolume.value>0;n.volumeToggle=new he("Sound [m]: ",i,720,100),n.volumeToggle.on("pointertap",n.toggleVolume),n.debugCont.addChild(n.volumeToggle),n.speedToggle=new he("Fast Walk [space]: ",li.FastWalk,320,100),n.speedToggle.on("pointertap",n.toggleWalkSpeed),n.debugCont.addChild(n.speedToggle);for(var a=function(e){var t=170+50*e,n=ns.All[e],o=new he(e+1+". "+n+": ",qo.UnlockState[n],320,t);s.debugCont.addChild(o),o.on("pointertap",function(){qo.UnlockState[n]=!qo.UnlockState[n],o.SetValue(qo.UnlockState[n])}),s.toolToggels.push(o)},s=this,c=0;c<ns.All.length;c++)a(c);n.seedbagToggle=new he("7. Seedbag: ",qo.SeedbagUnlocked,320,470),n.debugCont.addChild(n.seedbagToggle),n.seedbagToggle.on("pointertap",function(){qo.SeedbagUnlocked=!qo.SeedbagUnlocked,n.seedbagToggle.SetValue(qo.SeedbagUnlocked)});var u=new ye("Unlock Map",720,150);n.debugCont.addChild(u),u.once("pointertap",function(){qo.MapUnlocked=!0;for(var e=0;e<qa.GameScenes.length;e++)l.UnlockedAreas[qa.GameScenes[e]]=!0,l.VisitedAreas[qa.GameScenes[e]]=!0});var p=new ye("Unlock Rocks",720,200);n.debugCont.addChild(p),p.once("pointertap",function(){as.Unlocked=as.All});var d=new ye("Unlock Seeds",720,250);n.debugCont.addChild(d),d.once("pointertap",function(){for(var e=0;e<$a.All.length;e++)$a.Unocked[$a.All[e]]=!0});var h=new ye("Notebook",720,350);n.debugCont.addChild(h),h.once("pointertap",function(){zo.SaveLevelLayout(t),t.SceneService.NavigateTo(qa.Notebook)});var f=new ye("Collection Box",720,400);n.debugCont.addChild(f),f.once("pointertap",function(){zo.SaveLevelLayout(t),t.SceneService.NavigateTo(qa.CollectionBox)});var g=new ye("Complete Game",720,450);n.debugCont.addChild(g),g.once("pointertap",n.completeGame);var m=new ye("Clear Save Data",1020,100);return n.debugCont.addChild(m),m.once("pointertap",function(){localStorage.clear(),location.reload()}),fe(window).on("keydown",n.onKeydown),setTimeout(function(){n.parent.once("removed",function(){fe(window).off("keydown",this.onKeydown)})},10),n}return ge(t,e),t}(r.Container),_e=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ye=function(e){function t(t,n,o){var i=e.call(this)||this;return i.defaultFont={fontSize:30,fill:4539717},i.SetText=function(e){i.cacheAsBitmap=!1,i.label.text=e,i.cacheAsBitmap=!1},i._calculateCachedBounds=function(){return i.bg.getBounds()},i.x=n,i.y=o,i.label=new PIXI.Text(t,i.defaultFont),i.bg=new PIXI.Graphics,i.bg.beginFill(8971229),i.bg.drawRect(0,0,i.label.width,i.label.height),i.addChild(i.bg),i.addChild(i.label),i.interactive=!0,i.cacheAsBitmap=!0,i}return _e(t,e),t}(PIXI.Container),ve=function(){return function(){var e=this;this.methods=[],this.Sub=function(t){e.methods.push(t)},this.Dispatch=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);for(var o=0;o<e.methods.length;o++)e.methods[o](t,n)}}}(),be=function(){return function(e,t,n,o){var i=this;void 0===t&&(t=null),void 0===n&&(n=null),void 0===o&&(o=null),this.MockStartDrag=function(e){i.onDragStart(e)},this.onDragStart=function(e){e.data.isPrimary&&(w.IsMobile?i.startDraging(e):i.dragging?i.stopDrag(e):i.startDraging(e))},this.startDraging=function(e){i.dragging||(i.dragging=!0,i.dragStartTime=(new Date).getTime(),i.data=e.data,i.setDragOffset(e.data.getLocalPosition(i.disObj.parent)),i.dragStartCallback&&i.dragStartCallback())},this.setDragOffset=function(e){i.offset=e.clone(),i.offset.x-=i.disObj.x,i.offset.y-=i.disObj.y},this.onDragMove=function(e){if(i.dragging){var t=i.data.getLocalPosition(i.disObj.parent);i.disObj.x=t.x-i.offset.x,i.disObj.y=t.y-i.offset.y,i.dragMoveCallback&&i.dragMoveCallback(e)}},this.onDragEnd=function(e){w.IsMobile?i.stopDrag(e):(new Date).getTime()-i.dragStartTime>za.MinDragTime&&i.stopDrag(e)},this.stopDrag=function(e){i.dragging&&(i.dragging=!1,i.data=null,i.dragStopCallback&&i.dragStopCallback())},this.dragStartCallback=t,this.dragStopCallback=n,this.dragMoveCallback=o,this.disObj=e,this.disObj.interactive=!0,this.disObj.on("pointerdown",this.onDragStart).on("pointerup",this.onDragEnd).on("pointerupoutside",this.onDragEnd).on("pointermove",this.onDragMove)}}(),we=(function(){function e(){}e.Wiggle=function(e,t,n,o){void 0===o&&(o=-1);var i=new O.h({repeat:o,repeatDelay:0});e.rotation=-n,i.to(e,t,{rotation:n,ease:O.a.easeOut.config(2.7)}),i.to(e,t,{rotation:-n,ease:O.a.easeOut.config(2.7)})},e.PlayStickerUnlock=function(t,n,o){var i=new r.Point(400,400),a=new ce("stickerBurst",i);a.emitter.playOnceAndDestroy(),t.addChild(a);var s=new r.Sprite(X.Get(o+"Sticker"));s.anchor.set(.5),s.position=i,t.addChild(s),s.scale.set(.5),n.scale.set(.5),n.visible=!0;var l=new O.h;l.to(s.scale,.5,{x:2,y:2,ease:O.a.easeOut},0),l.to(s,.5,{x:400,ease:O.a.easeOut},0),l.to(s,.3,{x:n.x,y:n.y,ease:O.c.easeIn},1.6),l.to(s.scale,.3,{x:1,y:1,ease:O.a.easeIn},1.6),l.to(s,.1,{alpha:0},1.85),l.to(n.scale,.5,{x:1,y:1,ease:O.e.easeOut},.2),l.to(n.scale,.1,{x:1.25,y:1.25,ease:O.e.easeOut},1.85),l.to(n.scale,.3,{x:1,y:1,ease:O.e.easeInOut},1.95),O.i.delayedCall(2.3,function(){l.kill(),e.Wiggle(n,.5,.2,-1)})}}(),function(){function e(){}return e.Any=function(e,t){for(var n=0;n<t.length;n++)if(e==t[n])return!0;return!1},e}()),Se=function(){function e(){}return e.Any=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e[Math.floor(Math.random()*e.length)]},e.AnyFromArray=function(e){return e[Math.floor(Math.random()*e.length)]},Object.defineProperty(e,"Bool",{get:function(){return Math.random()>.5},enumerable:!0,configurable:!0}),e}(),ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Te=function(e){function t(t,n,o,i){var a=e.call(this)||this;a.grow=function(){a.grown||(a.grown=!0,O.i.to(a.scale,.6,{x:1,y:1,ease:O.e.easeInOut}))},a.onDragMove=function(e){e.data.getLocalPosition(a.parent);a.x=k.clamp(a.x,150,za.Width-150),a.y=k.clamp(a.y,100,za.Width/2);var t=.5-a.x/za.Width;a.rotation=3*t,k.dist(a.position,a.smallObj.position)<100&&!a.objDiscovered&&(a.objDiscovered=!0,a.emit("objDiscovered"))},a.scale.set(.5),a.position.set(t,n),a.smallObj=i,a.largObj=o;var s=new r.Graphics;s.beginFill(6621786,1),s.drawCircle(0,0,200),s.endFill(),a.addChild(s);var l=new r.Sprite(X.Get("magnifyingGlassBig"));return l.anchor.set(.44,.35),a.addChild(l),o.mask=s,a.once("pointerdown",a.grow),a.dragger=new be(a,null,null,a.onDragMove),a}return ke(t,e),t.prototype.Update=function(e){this.largObj.x=.8*(za.Width/2-this.x),this.largObj.y=.4*(za.Height/2-this.y)},t.prototype.MoveToTarget=function(){(new O.h).to(this,.2,{x:this.smallObj.position.x,y:this.smallObj.position.y}),this.grow(),this.objDiscovered||(this.objDiscovered=!0,this.emit("objDiscovered"))},t}(r.Container),Ce=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pe=function(e){function t(){var t=e.call(this)||this;return t.enabled=!0,t.isWalking=!0,t.goLeft=!1,t.goRight=!1,t.timeStanding=0,t.timeWalking=0,t.btnAlpha=1,t.Init=function(e){t.elinor=e.Elinor,t.lastXPos=t.elinor.Position.x},t.SetEnabled=function(e){t.enabled=e},t.Update=function(e){if(t.enabled){var n=t.elinor.Position.clone(),o=!1;t.goRight||Yo.Right?(n.x+=100,o=!0):(t.goLeft||Yo.Left)&&(n.x-=100,o=!0),Yo.Up?(n.y-=40,o=!0):Yo.Down&&(n.y+=40,o=!0),t.isWalking&&!o?(t.elinor.Stop(),t.isWalking=!1):o&&(t.isWalking=!0,t.elinor.SetDestination(n))}t.leftBtn.x=Dn.Offset+130,t.rightBtn.x=za.Width-t.leftBtn.x},t.onPointerDown=function(e){e.data.isPrimary&&(e.target==t.rightBtn?(t.goRight=!0,t.goLeft=!1):e.target==t.leftBtn&&(t.goRight=!1,t.goLeft=!0))},t.onRightBtnUp=function(){t.goRight=!1},t.onLeftBtnUp=function(){t.goLeft=!1},t.rightBtn=new Z("arrowRight",0,420),t.addChild(t.rightBtn),t.leftBtn=new Z("arrowLeft",0,420),t.addChild(t.leftBtn),t.rightBtn.on("pointerdown",function(e){return t.onPointerDown(e)}),t.rightBtn.on("pointerup",function(){return t.onRightBtnUp()}),t.rightBtn.on("pointerout",function(){return t.onRightBtnUp()}),t.rightBtn.on("pointerupoutside",function(){return t.onRightBtnUp()}),t.leftBtn.on("pointerdown",function(e){return t.onPointerDown(e)}),t.leftBtn.on("pointerup",function(){return t.onLeftBtnUp()}),t.leftBtn.on("pointerout",function(){return t.onLeftBtnUp()}),t.leftBtn.on("pointerupoutside",function(){return t.onLeftBtnUp()}),t.visible=!0,t}return Ce(t,e),t.prototype.SlowUpdate=function(e){var t=this.elinor.Position.x;this.lastXPos==t?(this.timeWalking=0,this.timeStanding+=e,this.timeStanding>1.5&&(this.btnAlpha=1)):(this.lastXPos=t,this.timeStanding=0,this.timeWalking+=e,this.timeWalking>3&&(this.btnAlpha=.1)),this.leftBtn.alpha=t<Mn.minX+75?.01:this.btnAlpha,this.rightBtn.alpha=t>Mn.maxX-75?.01:this.btnAlpha},t}(r.Container),Be=function(){function e(){}return e.BringToFront=function(e){e&&e.parent?e.parent.setChildIndex(e,e.parent.children.length-1):console.error("Display object has no parent or is null")},e.BringToBack=function(e){e&&e.parent?e.parent.setChildIndex(e,0):console.error("Display object has no parent or is null")},e}(),Ie=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ae=function(e){function t(t,n,o){void 0===n&&(n=0),void 0===o&&(o=0);var i=e.call(this,X.Get(t))||this;return i.SetBounds=function(e){i.bounds=e},i.SetDropZone=function(e){i.dropZone=e},i.MockStartDrag=function(e){i.dragger.MockStartDrag(e)},i.onDragStart=function(){i.emit("pickup",i),Be.BringToFront(i)},i.onDragStop=function(){i.emit("drop",i)},i.onDragMove=function(){i.emit("drag",i)},i.position.set(n,o),i.anchor.set(.5),i.buttonMode=!0,i.dragger=new be(i,i.onDragStart,i.onDragStop,i.onDragMove),i}return Ie(t,e),Object.defineProperty(t.prototype,"InDropZone",{get:function(){return!this.dropZone||this.dropZone.Contains(this.position)},enumerable:!0,configurable:!0}),t}(r.Sprite),Oe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Me=function(e){function t(t){var n=e.call(this)||this;return n.growDist=140,n.ShowThought=function(){n.isBig?n.scale.set(1.2,1.2):n.scale.set(1,1),n.bubbleBase.texture=X.Get("bubble_thought"),n.bubbleIcon.visible=!1,n.visible=!0},n.StartTask=function(e){console.log("StartTask: "+e),n.isBig?n.scale.set(1.2,1.2):n.scale.set(1,1),n.bubbleBase.texture=X.Get("bubble_speech"),n.bubbleIcon.visible=!0,n.visible=!0,n.bubbleIcon.visible=!0,n.bubbleIcon.scale.set(0),n.bubbleIcon.texture=r.Texture.fromImage("assets/images/ui/task/"+e+".png"),new O.i(n.bubbleIcon.scale,.3,{x:1,y:1,ease:O.a.easeOut.config(1.7)})},n.CompleteTask=function(e){if(n.isBig?n.scale.set(1.2,1.2):n.scale.set(1,1),e.PlayPayoff){var t=new ce("stickerBurst",new r.Point(-110,-120));t.emitter.playOnceAndDestroy(),n.addChild(t)}e.HideSpeachBubbleAfterTask&&new O.i(n.scale,.3,{x:0,y:0,delay:2,onComplete:function(){return n.visible=!1}})},n.UpdateDist=function(e){!n.isBig&&e<n.growDist?(n.isBig=!0,O.i.killChildTweensOf(n.scale),O.i.to(n.scale,1,{x:1.2,y:1.2,ease:O.d.easeOut.config(1,.5)})):n.isBig&&e>n.growDist&&(n.isBig=!1,O.i.killChildTweensOf(n.scale),O.i.to(n.scale,1,{x:1,y:1,ease:O.d.easeOut.config(1,.5)}))},n.getOffset=function(e){return e.Name==Ya.Elinor||e.Name==Ya.Ari||e.Name==Ya.Olive?new r.Point(0,-100):e.Name==Ya.MsMole||e.Name==Ya.Camilla||e.Name==Ya.Sally?new r.Point(0,-130):new r.Point(0,-240)},n.visible=!1,n.position=n.getOffset(t),n.bubbleBase=new r.Sprite(X.Get("bubble_thought")),n.bubbleBase.anchor.set(1,1),n.addChild(n.bubbleBase),n.bubbleIcon=new r.Sprite,n.bubbleIcon.position.set(-110,-133),n.bubbleIcon.anchor.set(.5,.5),n.bubbleIcon.visible=!1,n.addChild(n.bubbleIcon),n}return Oe(t,e),t}(r.Container),xe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ge=function(e){function t(t){for(var n=e.call(this)||this,o=rs.All,i=0;i<o.length;i++){var r=o[i],a=new Xe(r,t),s=i%3*150-110,l=170*Math.floor(i/3)-200;a.position.set(s,l),n.addChild(a)}return n}return xe(t,e),t}(r.Container),De=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(e){function t(t,n){var o=e.call(this)||this;o.Save=function(){o.StickerActivity.SaveAndHide(),o.DrawingActivity.SaveAndHide()},o.interactionStart=function(){o.BackBtn.visible=!1},o.interactionEnd=function(){o.BackBtn.visible=!0},o.UpdateTemplate=function(e){var t=e.Templates[e.CurrentTemplate];"blank"==t?o.template.visible=!1:(o.template.texture=X.Get(t+"Template"),o.template.blendMode=PIXI.BLEND_MODES.MULTIPLY,o.template.visible=!0),pi.SelectContent("notebook template: "+t)},o.ShowIndex=function(){o.DrawingActivity.SaveAndHide(),o.StickerActivity.SaveAndHide(),o.IndexPage.visible=!0,o.BackBtn.visible=!1,o.template.visible=!1,o.NextTemplateButton.visible=!1,o.PrevTemplateButton.visible=!1},o.ShowEntry=function(e){o.IndexPage.visible=!1,o.StickerActivity.InitEntry(e),o.DrawingActivity.InitEntry(e),O.i.delayedCall(.3,function(){o.BackBtn.visible=!0,o.NextTemplateButton.visible=!0,o.PrevTemplateButton.visible=!0}),o.UpdateTemplate(e)},o.addUIButtons=function(e){o.addNotebookRings(),o.BackBtn=new Y(e?"notebookBtn":"tickBtn",260,240),o.BackBtn.visible=!1,o.BackBtn.scale.set(.8),o.addChild(o.BackBtn),o.NextTemplateButton=new Z("NextButton",280,-10),o.NextTemplateButton.visible=!1,o.addChild(o.NextTemplateButton),o.PrevTemplateButton=new Z("BackButton",-240,-10),o.PrevTemplateButton.visible=!1,o.addChild(o.PrevTemplateButton)},o.addNotebookRings=function(){[-241,-55,143].forEach(function(e){var t=new r.Sprite(X.Get("NotebookRing"));t.position.set(-315,e),o.addChild(t)})},o.bookBG=new r.Sprite(X.Get("SpiralNotebook")),o.bookBG.anchor.set(.5,.5),o.addChild(o.bookBG),o.DrawingActivity=new Ne,o.addChild(o.DrawingActivity),o.template=new r.Sprite(X.Get("2PixelRect")),o.template.visible=!1,o.template.position.set(20,-20),o.template.anchor.set(.5),o.addChild(o.template),o.StickerActivity=new Ee,o.StickerActivity.on("interactionStart",o.interactionStart),o.StickerActivity.on("interactionEnd",o.interactionEnd),o.addChild(o.StickerActivity),o.IndexPage=new Ge(n),o.addChild(o.IndexPage);var i=null==t;return o.addUIButtons(i),o}return De(t,e),t}(r.Container),Fe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),He=function(e){function t(){var t=e.call(this)||this;return t.ShowEntry=function(e){t.ToggleViews(e)},t.ToggleViews=function(e){t.stickerTab.visible=e,t.paintTab.visible=!e,e?(setTimeout(function(){return t.DrawBtn.interactive=!0},100),t.StickerBtn.interactive=!1):(setTimeout(function(){return t.StickerBtn.interactive=!0},100),t.DrawBtn.interactive=!1)},t.paletteBG=new r.Sprite(X.Get("PaletteWindow")),t.paletteBG.anchor.set(.5,.5),t.addChild(t.paletteBG),t.paintTab=new r.Sprite(X.Get("PaintTabOn")),t.paintTab.position.set(-22,-335),t.addChild(t.paintTab),t.stickerTab=new r.Sprite(X.Get("StickerTabOn")),t.stickerTab.position.set(-137,-335),t.addChild(t.stickerTab),t.DrawBtn=new Z("PaintButton"),t.DrawBtn.position.set(70,-290),t.addChild(t.DrawBtn),t.StickerBtn=new Z("StickerButton"),t.StickerBtn.position.set(-70,-290),t.addChild(t.StickerBtn),t}return Fe(t,e),t}(r.Container),Ve=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ne=function(e){function t(){var t=e.call(this)||this;return t.canvasPos=new r.Point(-240,-320),t.canvasSize=new r.Point(542,600),t.canvasColour=16051139,t.currentSize=-1,t.currentPaintId=0,t.InitEntry=function(e){t.entry=e,t.restoreDrawing(e),t.Enable(),t.visible=!0},t.Enable=function(){t.paintPotCont.visible=!0,t.updateLockedState()},t.Disable=function(){t.paintService.active=!1,t.paintPotCont.visible=!1},t.UpdateTemplate=function(e){t.saveDrawing(t.entry,e),t.restoreDrawing(t.entry)},t.updateLockedState=function(){t.paintPotCont.alpha=1,t.paintService.active=!0,t.paintPotCont.interactiveChildren=!0},t.SaveAndHide=function(){t.entry&&t.saveDrawing(t.entry,t.entry.CurrentTemplate),t.paintPotCont.visible=!1,t.visible=!1},t.saveDrawing=function(e,n){t.paintCanvas.SaveAs(t.entry.Name+n)},t.restoreDrawing=function(e){t.paintCanvas.Load(e.Name+e.CurrentTemplate)},t.initPaintPots=function(){t.paintPots=[];for(var e=function(e){var n=e<4?-540:-420,o=(e<4?-50:-470)+105*e,i=new ot("paint_"+za.PaintColours[e],n,o);t.paintPotCont.addChild(i),t.paintPots.push(i);var r=e;i.on("pointertap",function(){return t.onPaintPress(r)})},n=0;n<za.PaintColours.length;n++)e(n);t.paintPots[t.currentPaintId].Select(),t.paintCanvas.SetPenColour(za.HexColours[t.currentPaintId])},t.initPenSizes=function(){t.penSizes=[];for(var e=function(e){var n=new Z("BrushWidth"+e,82*e-570,-150);t.paintPotCont.addChild(n),t.penSizes.push(n);var o=e;n.on("pointertap",function(){return t.onSizeChange(o)})},n=0;n<3;n++)e(n);t.currentPen=new r.Sprite(X.Get("currentPen")),t.currentPen.anchor.set(.5),t.paintPotCont.addChild(t.currentPen),t.onSizeChange(1)},t.onSizeChange=function(e){t.currentSize!=e&&(-1!=t.currentSize&&t.penSizes[t.currentSize].scale.set(1),t.currentSize=e,t.penSizes[t.currentSize].scale.set(1.2),t.paintCanvas.SetPenWidth(t.currentSize),t.currentPen.position=t.penSizes[t.currentSize].position,t.currentPen.scale.set(t.penSizes[t.currentSize].scale.x))},t.onPaintPress=function(e){if(t.currentPaintId!=e){-1!=t.currentPaintId&&t.paintPots[t.currentPaintId].Unselect(),t.currentPaintId=e,t.paintPots[t.currentPaintId].Select(),4==t.currentPaintId?t.paintCanvas.SetEraser():t.paintCanvas.SetPenColour(za.HexColours[e]);var n="stickerBurst_"+za.PaintColours[e],o=new ce("stickerBurst",t.paintPots[t.currentPaintId].position,n);o.emitter.playOnceAndDestroy(),t.addChild(o)}},t.paintCanvas=new _n(t.canvasPos,t.canvasSize,t.canvasColour),t.addChild(t.paintCanvas),t.paintPotCont=new r.Container,t.addChild(t.paintPotCont),t.initPaintPots(),t.initPenSizes(),t.paintService=new S(t.paintCanvas),t.paintService.active=!1,t}return Ve(t,e),t}(r.Container),je=function(){return function(e,t,n,o){var i=this;this.Contains=function(e){return e.x>i.x1&&e.x<i.x2&&e.y>i.y1&&e.y<i.y2},this.x1=e,this.x2=t,this.y1=n,this.y2=o}}(),Re=function(){function e(e,t){this.Pos=e,this.TextureID=t}return e.FromSticker=function(t){return new e(t.position,t.texture.textureCacheIds[0])},e}(),Ue=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ee=function(e){function t(){var t=e.call(this)||this;return t.stickerDropZone=new je(-210,270,-270,230),t.InitEntry=function(e){e&&(t.entry=e,t.initStickerTray(),t.restoreStickers(e)),t.Disable(),t.visible=!0},t.UpdateTemplate=function(e){t.saveStickers(t.entry,e),t.restoreStickers(t.entry),t.updateLockedState()},t.Enable=function(){t.entry.Templates[t.entry.CurrentTemplate];t.stickerCont.alpha=1;for(var e=0;e<t.stickerCont.children.length;e++)t.stickerCont.children[e].interactive=!0;t.stickerBtnCont.alpha=1;for(e=0;e<t.stickerBtnCont.children.length;e++)t.stickerBtnCont.children[e].interactive=!0;t.stickerBtnBG.visible=!0,t.stickerBtnCont.visible=!0},t.Disable=function(){t.stickerCont.alpha=.5,t.stickerBtnBG.visible=!1,t.stickerBtnCont.visible=!1,t.stickerCont.children.forEach(function(e){e.interactive=!1})},t.SaveAndHide=function(){t.entry&&t.saveStickers(t.entry,t.entry.CurrentTemplate),t.stickerBtnCont.visible=!1,t.stickerCont.alpha=0,t.currentStickers="",t.visible=!1},t.updateLockedState=function(){var e="locked"!=t.entry.Templates[t.entry.CurrentTemplate];t.stickerBtnCont.alpha=e?1:.5,t.stickerBtnCont.interactiveChildren=!!e},t.saveStickers=function(e,n){for(var o=[],i=0;i<t.stickerCont.children.length;i++){var r=t.stickerCont.children[i];r.InDropZone&&o.push(Re.FromSticker(r)),r.removeAllListeners()}t.stickerCont.removeChildren(),t.entry.StickerSaves[n]=o},t.restoreStickers=function(e){var n=e.StickerSaves[e.CurrentTemplate];null!=n&&n.forEach(function(e){t.addSticker(e.TextureID,e.Pos)})},t.initStickerTray=function(){if(t.entry&&t.currentStickers!=t.entry.Name){t.currentStickers=t.entry.Name,t.stickerBtnCont.removeChildren();for(var e=function(e){var n=new Z(t.entry.Stickers[e]+"Sticker");t.stickerBtnCont.addChild(n),n.position=t.getStickerPos(e),n.x+=t.stickerBtnBG.x,n.y+=t.stickerBtnBG.y;var o=e;n.on("pointerdown",function(e){return t.onStickerBtnDown(o,e)})},n=0;n<t.entry.Stickers.length;n++)e(n)}},t.onStickerBtnDown=function(e,n){if(n.data.isPrimary){var o=t.entry.Stickers[e]+"Sticker";t.addSticker(o,n.target.position.clone()).MockStartDrag(n)}},t.addSticker=function(e,n){var o=new Ae(e,n.x,n.y);return t.stickerCont.addChild(o),o.SetDropZone(t.stickerDropZone),o.on("pickup",t.PickupSticker),o.on("drag",t.DragSticker),o.on("drop",t.DropSticker),o},t.PickupSticker=function(e){t.emit("interactionStart")},t.DragSticker=function(e){e.tint=e.InDropZone?16777215:3355443},t.DropSticker=function(e){t.emit("interactionEnd"),e.InDropZone?(e.rotation+=k.Range(-.2,.2),e.rotation=k.clamp(e.rotation,-.5,.5)):(e.removeAllListeners(),t.stickerCont.removeChild(e))},t.initStickerBtnBg=function(){t.stickerBtnBG=new r.Container,t.addChild(t.stickerBtnBG),t.stickerBtnBG.cacheAsBitmap=!0},t.getStickerPos=function(e){var t=e%2,n=Math.floor(e/2);return new r.Point(120*t,120*n)},t.initStickerBtnBg(),t.stickerBtnBG.position.set(-540,-130),t.stickerBtnCont=new r.Container,t.stickerCont=new r.Container,t.addChild(t.stickerBtnCont),t.addChild(t.stickerCont),t}return Ue(t,e),t}(r.Container),We=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xe=function(e){function t(t,n){var o=e.call(this)||this,i=new Z("Index"+t.Name);i.on("pointertap",function(){return n(t)}),o.addChild(i);var r=new PIXI.Text(t.Name,{fontSize:24,fontFamily:"LoveYaLikeASister",fill:7886146,align:"center"});return r.anchor.set(.5,0),r.position.set(0,60),r.cacheAsBitmap=!0,o.addChild(r),o}return We(t,e),t}(r.Container),ze=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ze(t,e),t.prototype.StartWalking=function(){},t.prototype.StopWalking=function(){},t.prototype.PlayAnim=function(e,t){},t.prototype.PlayAnims=function(e,t){},t.prototype.PlayTalkAnim=function(e){},t.prototype.StopTalkAnim=function(){},t.prototype.UpdatePosition=function(e){},t.prototype.UpdateHeading=function(e){},t.prototype.ShowBubble=function(e,t){void 0===t&&(t=new r.Point(0,-200))},t}(r.Container),Ke=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ze=function(e){function t(t){var n=e.call(this)||this;n.angleToDest=0,n.MaxSpeed=200,n.MinSpeed=60,n.speed=n.MaxSpeed,n.MaxDistToTarget=75,n.Stop=function(){n.destination.x!=n.Position.x&&(n.destination.x=n.Position.x,n.destination.y=n.Position.y,n.StopWalking())},n.MoveToPoint=function(e){n.MoveTo(e.x,e.y)},n.MoveTo=function(e,t){var o=new r.Point(e,t);n.Name!=Ya.Elinor&&n.Name!=Ya.Ari&&n.Name!=Ya.Olive||(o=Mn.ClampPos(new r.Point(e,t),e)),n.Data.Position=o,n.View.UpdatePosition(o),n.Shadow.position=o},n.SetVisible=function(e){n.View.visible=e,n.Shadow.visible=e},n.Data=t,n.Shadow=new W(n.Name==Ya.Ranger?2.5:1.5);var o=b.Get(n.Name);return n.View=o?new R(n.Name,o):new Ye,n.SpeachBubble=new Me(n),n.View.addChild(n.SpeachBubble),n.restoreState(t),n}return Ke(t,e),Object.defineProperty(t.prototype,"Name",{get:function(){return this.Data.Name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Position",{get:function(){return this.Data.Position.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FacingRight",{get:function(){return this.Data.FacingRight},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsWalking",{get:function(){return this.isWalking},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ToolPosition",{get:function(){var e=this.Data.Position.clone();return e.x+=this.FacingRight?60:-60,e.y+=15,e},enumerable:!0,configurable:!0}),t.prototype.restoreState=function(e){this.destination=new r.Point(e.Position.x,e.Position.y),this.MoveToPoint(this.destination),this.View.UpdateHeading(this.FacingRight)},t.prototype.Update=function(e){if(this.target){var t=new r.Point(this.target.Position.x,this.target.Position.y-20);k.srqDist(this.Position,t)>14400&&this.SetDestination(k.moveTowards(t,this.Position,110))}this.destination!=this.Position&&this.MoveToPoint(this.moveTowards(this.Position,this.destination,this.speed*e))},t.prototype.SetTarget=function(e){this.target=e},t.prototype.SetDestination=function(e){k.srqDist(this.Position,e)>100&&(this.destination.x=e.x,this.destination.y=e.y,this.angleToDest=Math.atan2(this.destination.y-this.Position.y,this.destination.x-this.Position.x),this.tryStartWalking(),this.prevSrqDistToTarget=Number.MAX_SAFE_INTEGER,this.SetHeading(e.x>this.Position.x))},t.prototype.SetHeading=function(e){this.Data.FacingRight=e,this.View.UpdateHeading(e)},t.prototype.moveTowards=function(e,t,n){var o=k.srqDist(e,t),i=k.inverseLerp(0,1e3,o),a=li.FastWalk?7*this.MaxSpeed:this.MaxSpeed;return this.speed=k.lerp(this.MinSpeed,a,i),o<=n*n||o>this.prevSrqDistToTarget?(this.tryStopWalking(),e):(this.prevSrqDistToTarget=o,new r.Point(e.x+Math.cos(this.angleToDest)*n,e.y+Math.sin(this.angleToDest)*n))},t.prototype.tryStartWalking=function(){this.isWalking||this.StartWalking()},t.prototype.StartWalking=function(){this.isWalking=!0,this.View.StartWalking()},t.prototype.tryStopWalking=function(){this.isWalking&&(this.StopWalking(),this.emit("stop"))},t.prototype.StopWalking=function(){this.isWalking=!1,this.View.StopWalking()},t}(U.EventEmitter),qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Je=function(e){function t(){var t=e.call(this,X.Get("groundPointer"))||this;return t.zIndex=-5e3,t.MoveTo=function(e){t.x=e.x,t.y=e.y},t.Show=function(){O.i.to(t.scale,.2,{x:.5,y:.5,alpha:0,ease:O.f.easeOut})},t.Hide=function(){O.i.to(t.scale,.2,{x:0,y:0,alpha:0,ease:O.f.easeOut})},t.scale.set(0),t.anchor.set(.5),t}return qe(t,e),t}(r.Sprite),Qe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$e=function(e){function t(t){var n=e.call(this,t)||this;return n.Destview=new Je,n}return Qe(t,e),t.prototype.SetDestination=function(t){e.prototype.SetDestination.call(this,t),this.Destview.MoveTo(t)},t.prototype.StartWalking=function(){e.prototype.StartWalking.call(this),this.Destview.Show()},t.prototype.StopWalking=function(){e.prototype.StopWalking.call(this),this.Destview.Hide()},t}(Ze),et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.assetPrefix="./assets/images/ui/task/",t.timesPlayed=0,t.playDittyWhenClose=function(){var e=t.Position.x-t.elinor.Position.x;!t.dittyPlayed&&e<250&&!Vn.currentVO?t.TryPlayDitty():e>=550&&(t.dittyPlayed=!1)},t.TryPlayDitty=function(){l.UnlockedAreas[t.nextScene]||(t.timesPlayed++,t.dittyPlayed=!0,t.showBubble(),t.sceneID==qa.Intro?Vn.Play(t.timesPlayed<2?"tapir_song_olive":"tapir_help_mg"):t.sceneID==qa.RiverBank?t.timesPlayed<2?Vn.Play("tapir_song_ari"):qo.IsUnlocked(ns.Shovel)&&0==l.SH_uses?Vn.Play("tapir_help_shovel"):Vn.Play("tapir_help_sifter"):t.sceneID==qa.ElinorsHouse?(Vn.Play("tapir_song_mom"),t.View.PlayAnim("SingSeed",!1)):t.sceneID==qa.DeepForest?Vn.Play(t.timesPlayed<2?"tapir_song_camilla":"tapir_help_binoculars"):t.sceneID==qa.NightForest?Vn.Play(t.timesPlayed<2?"tapir_song_mole":"tapir_help_flashlight"):(console.warn("add new song songs and animation!"),Vn.Play("tapir_song_seed"),t.View.PlayAnim("SingSeed",!1)))},t.initBubble=function(){t.bubbleCont=new r.Container,t.View.addChild(t.bubbleCont),t.bubbleCont.position.set(-30,-170),t.bubbleCont.scale.set(.8),t.bubbleCont.visible=!1,t.bubbleBackground=new r.Sprite(X.Get("bubble_speech")),t.bubbleCont.addChild(t.bubbleBackground),t.bubbleBackground.anchor.set(1,1),t.bubbleIcon=new r.Sprite,t.bubbleCont.addChild(t.bubbleIcon),t.bubbleIcon.anchor.set(.5),t.bubbleIcon.position.set(-110,-130)},t.showBubble=function(){var e=t.taskService.Task;e&&(t.bubbleIcon.texture=r.Texture.fromImage(t.assetPrefix+e.Name+".png"),t.bubbleIcon.visible=!0,t.bubbleCont.visible=!0,t.delayedHideCall&&t.delayedHideCall.kill(),t.delayedHideCall=O.i.delayedCall(4.5,function(){t.bubbleCont.visible=!1}))},t}return et(t,e),t.prototype.InitSenorTapir=function(e){this.nextScene=e.SceneToRight,this.taskService=e.TaskService,l.UnlockedAreas[this.nextScene]?this.SetVisible(!1):(this.elinor=e.CharacterService.Elinor,this.sceneID=e.ID,this.initBubble())},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.View.visible&&this.elinor&&this.playDittyWhenClose()},t}(Ze),nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ot=function(e){function t(t,n,o){var i=e.call(this,X.Get(t))||this;return i.Select=function(){O.i.to(i.scale,.35,{x:1.1,y:1.1,ease:O.d.easeOut.config(1,.3)})},i.Unselect=function(){O.i.to(i.scale,.35,{x:.9,y:.9,ease:O.f.easeOut})},i.anchor.set(.5),i.position.set(n,o),i.scale.set(1),i.interactive=!0,i.buttonMode=!0,i}return nt(t,e),t}(r.Sprite),it=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rt=function(e){function t(t){var n=e.call(this,X.Get("puddle"))||this;return n.zIndex=-1e4,n.scale.set(0),n.anchor.set(.5),n.alpha=0,n.position.set(t.x,t.y),O.i.to(n,.7,{alpha:.7,delay:.5}),O.i.to(n.scale,.7,{x:1,y:1.5,alpha:.7,ease:O.f.easeOut,delay:.5}),O.i.to(n,5,{alpha:0,delay:3}),O.i.to(n.scale,5,{x:.8,y:1.2,alpha:0,ease:O.f.easeOut,delay:3}),n}return it(t,e),t}(r.Sprite),at=function(){function e(e){var t=this;this.RemoveFlower=function(e){t.Data.HasFlower&&(t.Data.HasFlower=!1,t.Data.SeedType="",t.View.RemoveFlower(e))},this.Water=function(e,n){t.Data.HasFlower||(t.Data.HasFlower=!0,t.Data.SeedType=e,t.View.Water(e,n))},this.SetHighlight=function(e){t.View.SetHighlight(e)},this.Data=e,this.View=new Ft(e)}return Object.defineProperty(e.prototype,"Pos",{get:function(){return new r.Point(this.Data.Position.x,this.Data.Position.y)},enumerable:!0,configurable:!0}),e}(),st=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=function(e){function t(t){var n=e.call(this)||this;return n.zIndex=0,n.UpdateState=function(){n.lantern.texture=X.Get(n.Data.IsOn?"LampOn":"LampOff"),n.particles.emitter.emit=n.Data.IsOn},n.Data=t,n.zIndex=t.ZIndex,n.position=t.Position,n.scale.set(t.Scale),n.interactive=!0,n.lantern=new r.Sprite(X.Get(t.IsOn?"LampOn":"LampOff")),n.lantern.anchor.set(.5,.9),n.addChild(n.lantern),n.particles=new ce("LampGlow",new r.Point(-5,-135),"LampGlow"),n.particles.emitter.autoUpdate=!0,n.particles.emitter.emit=t.IsOn,n.addChild(n.particles),n}return st(t,e),t}(r.Container),ct=function(){function e(e){this.Toggle=function(){console.error("todo")},this.Data=e,this.View=new lt(e)}return Object.defineProperty(e.prototype,"Pos",{get:function(){return this.Data.Position.clone()},enumerable:!0,configurable:!0}),e}(),ut=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pt=function(e){function t(t){var n=e.call(this,t)||this;return n.zIndex=-300,n.rustle=function(){n.tree.state.setAnimation(0,Se.Any("Rustle1","Rustle2","Rustle3"),!1),O.i.delayedCall(k.Range(1,3),n.rustle)},n.tree=new PIXI.spine.Spine(b.Get("treeRustle")),n.tree.update(0),n.tree.y=-100,n.tree.scale.set(.4),n.addChild(n.tree),l.BirdFound[t.Name]&&(t.Name==Za.RedBird?n.tree.state.setAnimation(1,"BirdRedAppear",!1):t.Name==Za.YellowBird&&n.tree.state.setAnimation(1,"BirdYellowAppear",!1)),n.rustle(),n}return ut(t,e),t}(C),dt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new r.Container;o.position.set(-30,-240),o.scale.set(.7),n.addChild(o);var i=new PIXI.spine.Spine(b.Get("Owl"));i.update(0),i.state.setAnimation(0,"OwlIdle2",!0),i.tint=l.SceneTint,o.addChild(i);var a=new r.Sprite(X.Get("2PixelRect"));return a.x=20,a.scale.set(50,60),a.anchor.set(.5),a.alpha=1e-4,o.addChild(a),n}return dt(t,e),t.prototype.Teardown=function(){},t}(C),ft=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gt=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-1e3;var o=new PIXI.spine.Spine(b.Get(t.Name));return o.update(0),o.state.setAnimation(0,"animation",!0),n.addChild(o),n}return ft(t,e),t}(C),mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_t=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new PIXI.spine.Spine(b.Get(Za.Nest));o.update(0),o.scale.set(1.5),o.position.set(-27,-80),o.scale.set(.55),o.tint=l.SceneTint;return o.state.hasAnimation("EggRustle")?o.state.setAnimation(0,"EggRustle",!0):console.log("Failed to set nest anim."),n.addChild(o),n}return mt(t,e),t}(C),yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vt=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new PIXI.spine.Spine(b.Get(Za.Chrysalis));o.update(0),o.position.set(19,-165),o.tint=l.SceneTint;return o.state.hasAnimation("animation")?o.state.setAnimation(0,"animation",!0):console.log("Failed to set anim."),n.addChild(o),n}return yt(t,e),t}(C),bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wt=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new PIXI.spine.Spine(b.Get(Za.Nest));return n.addChild(o),o.scale.set(.6),o.tint=l.SceneTint,o.state.setAnimation(0,"BirdEmerge2",!1),o.position.set(45,4),o.update(0),n}return bt(t,e),t}(C),St=function(){function e(e){var t=this;this.addView=function(e){e.ToolType==ns.MagnifyingGlass?e.Name==Za.ElmLeaf||e.Name==Za.MapleLeaf||e.Name==Za.GingkoLeaf?t.View=new B(e,0,-70,-300):e.Name==Za.TreeSap?t.View=new B(e,0,-130,-300):e.Name==Za.Fish?t.View=new Tn(e):e.Name==Za.Turtle||e.Name==Za.LandTurtle?t.View=new gt(e):e.Name==Za.Firefly?(t.View=new B(e),t.View.AddHitbox(120,70,.8,.75),t.View.SpineAnim.tint=16777215):e.Name==Za.CaterpillarMag?t.View=new H(e):e.Name==Za.Lizard||e.Name==Za.LizardLog?t.View=new Pn(e):e.Name==Za.FlipRock?t.View=new In(e):e.Name==Za.Bee?(t.View=new B(e,0,-50,200),t.View.AddHitbox(250,50,.7,1.3)):e.Name==Za.BugRed||e.Name==Za.BugYellow||e.Name==Za.BugOrange?(t.View=new B(e),t.View.AddHitbox(200,80,.8,.75)):e.Name==Za.AntSingle?(t.View=new B(e),t.View.AddHitbox(120,50,.1,.75)):e.Name==Za.AntFood?(t.View=new B(e),t.View.AddHitbox(200,50,-.1,.75)):e.Name==Za.AntHill?(t.View=new B(e),t.View.scale.set(.3)):e.Name==Za.Chrysalis?t.View=new vt(e):e.Name==Za.ToadStandalone?t.View=new Kt(e):e.Name==Za.AcornsMag?t.View=new A(e):t.View=new B(e):e.ToolType==ns.Torch?e.Name==Za.Owl?t.View=new ht(e):e.Name==Za.Katydid?(t.View=new B(e,0,0,-300),t.View.scale.set(.8)):e.Name==Za.SpiderLog?t.View=new On(e):e.Name==Za.Moth?t.View=new B(e,0,-230,-300):e.Name==Za.ToadTorch?t.View=new L(e,"yellow"):e.Name==Za.BlinkeyEyes&&(t.View=new x(e)):e.ToolType==ns.Binoculars&&(e.Name==Za.BlueBird?t.View=new Sn(e):e.Name==Za.RedBird||e.Name==Za.YellowBird?t.View=new pt(e):e.Name==Za.CaterpillarBino?t.View=new N(e):e.Name==Za.Nest?t.View=new _t(e):e.Name==Za.ChickWhite?t.View=new wt(e):e.Name==Za.AcornsBino?t.View=new B(e,-40,-330):e.Name==Za.SpiderWeb?(t.View=new B(e,9,-260),t.View.SpineAnim.state.setAnimation(0,"JustWeb",!0)):e.Name==Za.Clubhouse?t.View=new C(e):t.View=new B(e)),t.View||(t.View=new C(e),console.error("Missing specific view fot interactionn: "+e.Name+", "+e.ToolType))},this.Data=e,this.addView(e)}return Object.defineProperty(e.prototype,"Pos",{get:function(){return new r.Point(this.Data.Position.x,this.Data.Position.y)},enumerable:!0,configurable:!0}),e.prototype.Teardown=function(){this.View.Teardown&&this.View.Teardown()},e}(),kt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tt=function(e){function t(t){var n=e.call(this)||this;return n.Data=t,n.position=t.Position,n.interactive=!0,n.buttonMode=!0,O.i.delayedCall(.1,function(){n.toolView?(n.toolView.tint=l.SceneTint,n.toolView.scale.set(.9,1.1),n.tl=new O.h({repeat:-1,repeatDelay:0}),n.tl.to(n.toolView.scale,.25,{x:1.1,y:.9,ease:O.e.easeInOut}),n.tl.to(n.toolView.scale,.25,{x:.9,y:1.1,ease:O.e.easeInOut})):console.error("missing tool view!")}),n}return kt(t,e),Object.defineProperty(t.prototype,"ToolType",{get:function(){return this.Data.ToolType},enumerable:!0,configurable:!0}),t.prototype.Hide=function(){this.visible=!1,this.interactive=!1},t.prototype.Teardown=function(){this.tl&&(this.tl.kill(),this.tl=null)},t}(r.Container),Ct=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pt=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("wateringCan")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return Ct(t,e),t}(Tt),Bt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),It=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("shovel")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return Bt(t,e),t}(Tt),At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ot=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("torch")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return At(t,e),t}(Tt),Mt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xt=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("sieve")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return Mt(t,e),t}(Tt),Gt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Dt=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("binoculars")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return Gt(t,e),t}(Tt),Lt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(e){function t(t){var n=e.call(this)||this;return n.zIndex=-10,n.hideUntilSeedbagUnlocked=function(e){e.Hidden=!1,!qo.SeedbagUnlocked&&e.HasFlower&&e.SeedType!=$a.Daisy&&e.SeedType!=$a.Chrysanthemum&&(e.Hidden=!0,n.visible=!1)},n.RemoveFlower=function(e){n.mound.visible=!0,n.flower.visible=!1,n.flower.state.clearTracks(),n.addBounceAnim()},n.Water=function(e,t){O.i.delayedCall(t,function(){n.killBounceAnim(),n.mound.visible=!1,n.addFlower(e),n.flower.state.setAnimation(0,"SproutAnim",!1)})},n.killBounceAnim=function(){n.tl&&(n.tl.kill(),n.scale.set(1))},n.addBounceAnim=function(){n.killBounceAnim(),n.scale.set(.9,1.1),n.tl=new O.h({repeat:-1,repeatDelay:0,delay:Math.random()}),n.tl.to(n.scale,.35,{x:1.05,y:.95,ease:O.e.easeInOut}),n.tl.to(n.scale,.35,{x:.95,y:1.105,ease:O.e.easeInOut})},n.initMound=function(e){n.mound=new r.Sprite(X.Get("mound")),n.mound.tint=l.CharTint,n.mound.visible=!e,n.mound.anchor.set(.5),n.mound.y=-9,n.addChild(n.mound),e||n.addBounceAnim()},n.initFlower=function(e,t){if(e){n.addFlower(t),n.flower.state.setAnimation(0,"SproutAnim",!1);var o=k.Range(.3,.4);n.flower.scale.set(Se.Bool?-o:o,o),n.flower.state.timeScale=100}},n.addFlower=function(e){n.flower&&(n.flower.state.clearTracks(),n.removeChild(n.flower),n.flower=null);var t=k.Range(.3,.4);n.flower=new PIXI.spine.Spine(b.Get("plant"+e)),n.flower.update(0),n.flower.tint=l.CharTint,n.flower.scale.set(Se.Bool?-t:t,t),n.addChild(n.flower)},n.SetHighlight=function(e){},n.Data=t,n.position=t.Position,n.initFlower(t.HasFlower,t.SeedType),n.initMound(t.HasFlower),n.hideUntilSeedbagUnlocked(t),n}return Lt(t,e),t}(r.Container),Ht=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vt=function(e){function t(t,n){var o=e.call(this)||this;if(o.interaction=t,o.position.set(n.X,n.Y),t==Za.Katydid){var i=new r.spine.Spine(b.Get(t));i.state.setAnimation(0,"animation",!0),o.animalImg=i,o.animalImg.scale.set(n.FacingLeft?-.5:.5,.5)}else if(t==Za.SpiderLog){var a=new PIXI.Sprite(X.Get("Spider"));a.anchor.set(.5),o.animalImg=a,o.animalImg.scale.x=n.FacingLeft?-1:1}else if(t==Za.ToadTorch){var s=new r.spine.Spine(b.Get("Toad"));s.state.setAnimation(0,"animation",!0),s.y=90,o.animalImg=s,o.animalImg.scale.x=n.FacingLeft?-1:1}else console.error("Missing view for "+t);return o.addChild(o.animalImg),o}return Ht(t,e),t.prototype.UpdateTorchPos=function(e,t){},t.prototype.Find=function(){},t}(r.Container),Nt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jt=function(e){function t(t){var n=e.call(this)||this;return n.position=t,n.eye=new PIXI.Sprite(X.Get("Owl_eye")),n.eye.anchor.set(.5),n.addChild(n.eye),n.lidTop=new PIXI.Sprite(X.Get("Owl_lidTop")),n.lidTop.position.set(0,-20),n.lidTop.anchor.set(.5),n.addChild(n.lidTop),n.lidBot=new PIXI.Sprite(X.Get("Owl_lidBot")),n.lidBot.position.set(0,20),n.lidBot.anchor.set(.5),n.addChild(n.lidBot),n}return Nt(t,e),t.prototype.UpdateDist=function(e){var t=k.inverseLerp(40,200,e);t=k.clamp01(t),t=k.smoothStep(t),this.lidTop.y=k.lerp(-13,-28,t),this.lidBot.y=k.lerp(13,28,t)},t}(r.Container),Rt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ut=function(e){function t(t,n){var o=e.call(this)||this;o.leftPos=new r.Point(712,184),o.rightPos=new r.Point(782,184),o.leftEye=new jt(o.leftPos),o.addChild(o.leftEye),o.rightEye=new jt(o.rightPos),o.addChild(o.rightEye);var i=new PIXI.Sprite(X.Get("Owl_eyeCover"));return i.position.set(660,130),o.addChild(i),o}return Rt(t,e),t.prototype.SetGlowEyes=function(e,t){this.leftGlowEye=e,this.leftGlowEye.position=this.leftPos,this.rightGlowEye=t,this.rightGlowEye.position=this.rightPos},t.prototype.UpdateTorchPos=function(e,t){var n=k.dist(e,this.leftPos);this.leftEye.UpdateDist(n),this.leftGlowEye.UpdateDist(n);var o=k.dist(e,this.rightPos);this.rightEye.UpdateDist(o),this.rightGlowEye.UpdateDist(o)},t.prototype.Find=function(){},t}(r.Container),Et=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wt=function(e){function t(){var t=e.call(this)||this;return t.eye=new PIXI.Sprite(X.Get("Owl_eye")),t.eye.anchor.set(.5),t.addChild(t.eye),t}return Et(t,e),t.prototype.UpdateTorchPos=function(e,t){var n=k.dist(e,this.position),o=k.inverseLerp(40,200,n);o=k.clamp01(o)},t.prototype.UpdateDist=function(e){var t=k.inverseLerp(200,300,e);this.eye.alpha=k.lerp(0,1,k.clamp01(t))},t}(r.Container),Xt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zt=function(e){function t(t,n){var o=e.call(this)||this;o.found=!1,o.torchPos=new r.Point;o.moths=[],o.mothSin=[],o.mothCos=[],o.mothRadius=[],o.mothSpeed=[];for(var i=0;i<5;i++){var a=new PIXI.spine.Spine(b.Get("MothFlying"));a.update(0),a.position.x=n.X+k.Range(-100,100),a.position.y=n.Y+k.Range(-100,100),a.state.setAnimation(0,"animation",!0),o.addChild(a),o.moths.push(a),o.mothSin.push(k.Range(0,6)),o.mothCos.push(k.Range(0,6)),o.mothRadius.push(k.Range(40,220)),o.mothSpeed.push(k.Range(.5,1.5))}return o}return Xt(t,e),t.prototype.UpdateTorchPos=function(e,t){if(this.found){this.torchPos=e;for(var n=0;n<this.moths.length;n++){this.mothSin[n]+=3*t,this.mothCos[n]+=2*t;var o=this.torchPos.clone();o.x+=Math.sin(this.mothSin[n])*this.mothRadius[n],o.y+=Math.cos(this.mothCos[n])*this.mothRadius[n];var i=1+.4*Math.sin(this.mothSin[n]);this.moths[n].scale.set(o.x<this.moths[n].x?i:-i,i),this.moths[n].position=k.moveTowards(this.moths[n].position,o,500*t*this.mothSpeed[n])}}},t.prototype.Find=function(){this.found=!0},t}(r.Container),Yt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kt=function(e){function t(t){var n=e.call(this,t)||this;return n.zIndex=-300,n.SpineAnim=new PIXI.spine.Spine(b.Get("SmallToad")),n.SpineAnim.update(0),n.SpineAnim.tint=l.SceneTint,n.SpineAnim.state.setAnimation(0,"animation",!0),n.SpineAnim.scale.set(.3),n.addChild(n.SpineAnim),n}return Yt(t,e),t}(C),Zt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qt=function(e){function t(t){var n=e.call(this)||this;return n.position=t,n.setupArt(),n}return Zt(t,e),t.prototype.Update=function(e){},t.prototype.setupArt=function(){var e=new r.Container;this.addChild(e),this.circle=new PIXI.Sprite(X.Get("TorchCircle")),this.circle.anchor.set(.5),e.addChild(this.circle);var t=new PIXI.Sprite(X.Get("blackPixel"));t.scale.set(3*za.Width,3*za.Height),t.position.set(0,-322),t.anchor.set(.5,1),e.addChild(t);var n=new PIXI.Sprite(X.Get("blackPixel"));n.scale.set(3*za.Width,3*za.Height),n.position.set(0,322),n.anchor.set(.5,0),e.addChild(n);var o=new PIXI.Sprite(X.Get("blackPixel"));o.scale.set(2*za.Width,323*za.Height),o.position.set(-322,0),o.anchor.set(1,.5),e.addChild(o);var i=new PIXI.Sprite(X.Get("blackPixel"));i.scale.set(2*za.Width,323*za.Height),i.position.set(322,0),i.anchor.set(0,.5),e.addChild(i),this.glow=new PIXI.Sprite(X.Get("TorchCircleGlow")),this.glow.blendMode=PIXI.BLEND_MODES.ADD,this.glow.alpha=.4,this.glow.anchor.set(.5),this.addChild(this.glow);var a=new PIXI.Sprite(X.Get("blackPixel"));a.scale.set(646,646),a.anchor.set(.5),this.addChild(a);var s=new O.h;e.scale.set(.6),s.to(e.scale,.5,{x:1,y:1},.4),a.alpha=1,s.to(a,.5,{alpha:.5},.7),s.to(a,.1,{alpha:.3}),s.to(a,.1,{alpha:.8}),s.to(a,.1,{alpha:.5}),s.to(a,.1,{alpha:0})},t}(r.Container),Jt=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qt=function(e){function t(t){var n=e.call(this)||this;return n.Moved=new ve,n.EnableInteraction=function(){n.interactive=!0,n.on("pointerdown",n.onDragStart),n.on("pointermove",n.dragMove),n.on("pointerup",n.onDragEnd),n.on("pointerupoutside",n.onDragEnd)},n.onDragStart=function(e){e.data.isPrimary&&(w.IsMobile?n.startDraging(e):n.dragging?n.stopDrag(e):n.startDraging(e))},n.startDraging=function(e){n.dragging||(n.dragging=!0,n.dragStartTime=(new Date).getTime(),n.prevDragPos=e.data.global.clone(),n.emit("startBinoDrag"))},n.dragMove=function(e){if(e.data.isPrimary&&n.dragging){var t=e.data.global.clone(),o=new r.Point(n.prevDragPos.x-t.x,n.prevDragPos.y-t.y);n.prevDragPos=t,n.Moved.Dispatch(o)}},n.onDragEnd=function(e){w.IsMobile?n.stopDrag(e):(new Date).getTime()-n.dragStartTime>za.MinDragTime&&n.stopDrag(e)},n.stopDrag=function(e){n.dragging&&(n.dragging=!1)},n.position=t,n.setupArt(),n}return Jt(t,e),t.prototype.Scale=function(e){},t.prototype.setupArt=function(){this.binoCont=new r.Container,this.addChild(this.binoCont);var e=new PIXI.Sprite(X.Get("Stencil"));e.scale.set(3),e.anchor.set(1,.5),this.binoCont.addChild(e);var t=new PIXI.Sprite(X.Get("Stencil"));t.scale.set(-3,3),t.anchor.set(1,.5),this.binoCont.addChild(t);var n=new r.Sprite(X.Get("2PixelRect"));n.y-=170,n.anchor.set(.5,1),n.tint=0,n.scale.set(650,200),this.binoCont.addChild(n),(n=new r.Sprite(X.Get("2PixelRect"))).y=170,n.anchor.set(.5,0),n.tint=0,n.scale.set(650,200),this.binoCont.addChild(n),(n=new r.Sprite(X.Get("2PixelRect"))).x=320,n.anchor.set(0,.5),n.tint=0,n.scale.set(400,200),this.binoCont.addChild(n),(n=new r.Sprite(X.Get("2PixelRect"))).x=-320,n.anchor.set(1,.5),n.tint=0,n.scale.set(400,200),this.binoCont.addChild(n),this.scale.set(1.4),this.cacheAsBitmap=!0},t}(r.Container),$t=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),en=function(e){function t(t,n){var o=e.call(this)||this;return o.ZoomTo=new ve,o.minSliderPos=-150,o.maxSliderPos=117,o.zoom01=0,o.clickVol=0,o.Update=function(e){o.clickVol-=.5*e,o.clickVol=k.clamp(o.clickVol,0,.2),o.clicking.volume=k.clamp(o.clickVol,0,.05);var t=O.e.easeIn.getRatio(o.zoom01);o.clicking.speed=k.lerp(.5,1,t)},o.ChangeZoom=function(e){o.clickVol+=Math.abs(o.zoom01-e),o.zoom01=e,o.zoomSlider.x=k.lerp(o.minSliderPos,o.maxSliderPos,e)},o.EnableInteraction=function(){o.zoomBar.on("pointerdown",o.dragStart),o.zoomBar.on("pointermove",o.dragMove),o.zoomBar.on("pointerup",o.dragStop),o.zoomBar.on("pointerupoutside",o.dragStop),o.zoomBar.interactive=!0,o.zoomBar.buttonMode=!0},o.dragStart=function(e){e.data.isPrimary&&(o.isDragging=!0,o.onZoomChange(e.data.getLocalPosition(o.zoomBar).x))},o.dragMove=function(e){e.data.isPrimary&&o.isDragging&&o.onZoomChange(e.data.getLocalPosition(o.zoomBar).x)},o.dragStop=function(e){e.data.isPrimary&&o.isDragging&&o.StopDrag()},o.StopDrag=function(){o.isDragging=!1},o.onZoomChange=function(e){var t=k.clamp(e,o.minSliderPos,o.maxSliderPos),n=k.inverseLerp(o.minSliderPos,o.maxSliderPos,t);o.ZoomTo.Dispatch(n)},o.Teardown=function(){Hn.Unload(o.clicking)},o.clicking=Hn.Load("assets/sounds/sfx/binoc_tone3.mp3"),o.clicking.volume=0,o.clicking.loop=!0,o.clicking.play(),o.position=n,o.setupArt(),o.ChangeZoom(t),o}return $t(t,e),Object.defineProperty(t.prototype,"IsDragging",{get:function(){return this.IsDragging},enumerable:!0,configurable:!0}),t.prototype.setupArt=function(){this.zoomBar=new PIXI.Sprite(X.Get("ZoomBar")),this.zoomBar.position.set(0,270),this.zoomBar.anchor.set(.5),this.addChild(this.zoomBar),this.zoomSlider=new PIXI.Sprite(X.Get("ZoomSlider")),this.zoomSlider.position.set(0,270),this.zoomSlider.anchor.set(.5),this.addChild(this.zoomSlider)},t}(r.Container),tn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nn=function(e){function t(n){var o=e.call(this,X.Get("sieveParticles_"+t.texCount++%3))||this;return o.anchor.set(.5),o.rotation=k.IntRange(0,360),o.scale.set(k.Range(1,2)),o.position=n,o}return tn(t,e),t.texCount=0,t}(r.Sprite),on=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rn=function(e){function t(t,n){var o=e.call(this)||this;o.Moved=new ve,o.Finished=new ve,o.centerX=za.Width/2,o.sieveRad=185,o.particleDelta=0,o.particleThreshold=100,o.dirtParticles=[],o.nrRocks=15,o.nrDirt=20,o.remainingDirt=0,o.MoveTo=function(e,t){o.sieve.x=e,o.remainingDirt=0;for(var n=0;n<o.dirt.length;n++)o.moveDirt(n,t);o.remainingDirt<5&&!o.rockFound&&(o.rockFound=!0,o.Finished.Dispatch()),o.addParticles(t);var i=Math.min(Math.abs(t),5);i=(5-i)/50,i+=.9,i=Math.min(o.sieve.scale.y,i),o.sieve.scale.y=k.lerp(o.sieve.scale.y,i,.2),o.sieve.scale.x=1-o.sieve.scale.y+1},o.moveDirt=function(e,t){var n=o.dirt[e];if(n.visible){o.remainingDirt++;var i=n.Friction*t;n.x-=i;var r=.01*t;if(n.rotation+=k.Range(-r,r),k.magnitude(n.position)>o.sieveRad)n.x*=.95,n.y*=.95;else{var a=.7*t;n.y+=k.Range(-a,a)}n.LifeTime-=Math.abs(t),n.LifeTime<0&&(n.visible=!1)}},o.addParticles=function(e){if(!o.rockFound)for(o.particleDelta+=Math.abs(e);o.particleDelta>o.particleThreshold;){o.particleDelta-=o.particleThreshold;var t=o.sieve.position.clone();t.x+=k.IntRange(-90,90);var n=new nn(t);o.particleCont.addChild(n),o.dirtParticles.push(n)}},o.SetAngle=function(e){o.sieve.y=100*Math.abs(e-.5)-70,o.sieve.rotation=k.lerp(-.2,.2,e),o.leftArrow.scale.set(k.lerp(.5,2,e)),o.rightArrow.scale.set(k.lerp(-2,.5,e)),o.leftArrow.position.x=-k.lerp(300,400,e),o.rightArrow.position.x=k.lerp(400,300,e)},o.EnableInteraction=function(){o.interactive=!0,o.buttonMode=!0,o.on("pointerdown",o.dragStart),o.on("pointermove",o.dragMove),o.on("pointerup",o.onDragEnd),o.on("pointerupoutside",o.onDragEnd)},o.dragStart=function(e){e.data.isPrimary&&(w.IsMobile?o.startDraging(e):o.dragging?o.stopDrag(e):o.startDraging(e))},o.startDraging=function(e){o.dragging||(o.dragging=!0,o.dragStartTime=(new Date).getTime(),o.prevDragX=e.data.global.x)},o.dragMove=function(e){if(e.data.isPrimary&&o.dragging){var t=e.data.global.x,n=o.prevDragX-t;o.prevDragX=t,o.Moved.Dispatch(n)}},o.onDragEnd=function(e){w.IsMobile?o.stopDrag(e):(new Date).getTime()-o.dragStartTime>za.MinDragTime&&o.stopDrag(e)},o.stopDrag=function(e){e.data.isPrimary&&o.dragging&&(o.dragging=!1)},o.position=t,o.setupArt(n);var i=new O.h;o.sieve.y=300,i.to(o.sieve,.5,{y:-70,ease:O.a.easeOut.config(1)},.3);for(var r=0;r<o.dirt.length;r++){var a=o.dirt[r].y,s=o.dirt[r].y-100;o.dirt[r].y-=1e3;var l=k.Range(.3,.7);i.to(o.dirt[r],.5,{y:a,ease:O.c.easeIn},l),i.to(o.dirt[r],.2,{y:s,ease:O.c.easeOut},l+.5),i.to(o.dirt[r],.2,{y:a,ease:O.c.easeIn},l+.7),r>o.nrRocks&&(o.dirt[r].scale.set(.75),i.to(o.dirt[r].scale,.5,{x:1,y:1,ease:O.c.easeOut},l+.5))}return o.leftArrow.x=-200,o.rightArrow.x=200,i.to(o.leftArrow,.4,{x:-350,ease:O.a.easeOut.config(1)},1.2),i.to(o.rightArrow,.4,{x:350,ease:O.a.easeOut.config(1)},1.4),o}return on(t,e),t.prototype.setupArt=function(e){this.particleCont=new r.Container,this.addChild(this.particleCont),this.sieve=new r.Container,this.sieve.y=-70,this.addChild(this.sieve),this.leftArrow=new PIXI.Sprite(X.Get("sieveArrow")),this.leftArrow.anchor.set(1,.5),this.sieve.addChild(this.leftArrow),this.rightArrow=new PIXI.Sprite(X.Get("sieveArrow")),this.rightArrow.anchor.set(1,.5),this.rightArrow.scale.x=-1,this.sieve.addChild(this.rightArrow),this.SetAngle(.5);var t=new PIXI.Sprite(X.Get("sieve"));t.anchor.set(.5),this.sieve.addChild(t),this.dirt=[];var n=new sn(this.sieveRad,e);n.Friction=k.Range(.4,.7),this.sieve.addChild(n),this.dirt.push(n);for(var o=0;o<this.nrRocks;o++){var i=new sn(this.sieveRad,"sieveRock_"+o%5);this.sieve.addChild(i),this.dirt.push(i),i.IsRock=!0,i.LifeTime=k.IntRange(2e3,6e3),i.Friction=k.Range(.4,.7)}for(o=0;o<this.nrDirt;o++){var a=new sn(this.sieveRad,"sieveDirt_"+o%3);this.sieve.addChild(a),this.dirt.push(a),a.IsDirt=!0,a.LifeTime=k.IntRange(2e3,5e3),a.Friction=k.Range(.1,.6)}},t.prototype.Update=function(e){for(var t=0;t<this.dirtParticles.length;t++)this.dirtParticles[t].y+=900*e;this.sieve.scale.y=k.lerp(this.sieve.scale.y,1,30*e),this.sieve.scale.x=1-this.sieve.scale.y+1},t}(r.Container),an=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sn=function(e){function t(t,n){var o=e.call(this,X.Get(n))||this;return o.Friction=0,o.anchor.set(.5),o.rotation=k.IntRange(0,360),o.placeInCircle(t),o}return an(t,e),t.prototype.placeInCircle=function(e){var t=new r.Point(k.Range(-1,1),k.Range(-1,1));t=k.normalize(t);var n=k.IntRange(0,e);t.x*=n,t.y*=n,this.position=t},t}(r.Sprite),ln=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cn=function(e){function t(t,n,o){var i=e.call(this)||this;if(i.zIndex=1e3,i.position.set(t,n),o){i.Ring=new r.Sprite(X.Get("groundPointer")),i.Ring.anchor.set(.5),i.Ring.scale.set(.5),i.addChild(i.Ring);var a=new O.h({repeat:-1,repeatDelay:1.4});a.to(i.Ring.scale,.35,{x:1,y:1,ease:O.a.easeOut},.25),a.to(i.Ring,.35,{alpha:0,ease:O.a.easeOut},.25)}var s=new r.Sprite(X.Get("pointHand"));s.position.set(50,-130),s.anchor.set(.5),s.rotation=-.7,s.scale.set(.65),i.addChild(s);var l=new O.h({repeat:-1,repeatDelay:1.4});return l.to(s,.25,{y:-50,ease:O.a.easeOut},0),l.to(s,.35,{y:-130,ease:O.a.easeOut},.25),i}return ln(t,e),t}(r.Container),un=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pn=(function(e){function t(t,n){var o=e.call(this)||this;return o.zIndex=250,o.position.set(t,n),o.arrow=new r.Sprite(X.Get("tutArrow")),o.arrow.rotation=-Math.PI/2,o.arrow.alpha=0,o.arrow.anchor.set(.5),o.arrow.scale.set(.6),o.addChild(o.arrow),o.tl=new O.h({repeat:-1,repeatDelay:.5}),o.tl.to(o.arrow,1.5,{x:150,ease:O.d.easeOut.config(1,.75)},.6),o.tl.to(o.arrow.scale,1,{x:.7,y:.7},.6),o.tl.to(o.arrow,.9,{alpha:1},0),o.tl.to(o.arrow,.4,{alpha:0},1.5),o}un(t,e),t.prototype.Remove=function(){var e=this;this.tl.kill(),O.i.to(this,.5,{alpha:0,onComplete:function(){return e.parent.removeChild(e)}})}}(r.Container),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),dn=function(e){function t(t,n){var o=e.call(this)||this;return o.zIndex=5e3,o.butterflySinX=0,o.butterflySinY=0,o.SetTarget=function(e,t){o.char=e,o.moving=!0,o.charOffset=t},o.Update=function(e){var t;o.butterflySinX+=3*e,o.butterflySinY+=2*e,o.char?((t=o.char.Position).x+=o.charOffset.x+100*Math.sin(o.butterflySinX),t.y+=o.charOffset.y+100*Math.cos(o.butterflySinY)):((t=o.startPoint.clone()).x+=50*Math.sin(o.butterflySinX),t.y+=50*Math.cos(o.butterflySinY));var n=1+.2*Math.sin(o.butterflySinY);o.scale.set(t.x<o.x?n:-n,n),o.position=k.moveTowards(o.position,t,500*e)},o.position.set(t,n),o.startPoint=o.position.clone(),o.anim=new PIXI.spine.Spine(b.Get("ButterflyGuide")),o.anim.state.setAnimation(0,"animation",!0),o.anim.update(0),o.addChild(o.anim),o}return pn(t,e),t}(r.Container),hn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fn=function(e){function t(t){var n=e.call(this)||this;return n.PickedUp=new ve,n.Placed=new ve,n.onDragStart=function(){n.PickedUp.Dispatch(n,n.CurrentArea),O.i.killChildTweensOf(n.rock),O.i.killChildTweensOf(n.shadow),O.i.to(n.rock,.2,{y:n.shadow.y-80,ease:O.a.easeOut.config(1.7)}),O.i.to(n.shadow.scale,.2,{x:1.15,y:1.15}),O.i.to(n.shadow,.2,{alpha:.2})},n.onDragStop=function(){n.clampDropPosition(),O.i.killChildTweensOf(n.rock),O.i.killChildTweensOf(n.shadow),O.i.to(n.rock,.15,{y:n.shadow.y,ease:O.b.easeOut}),O.i.to(n.shadow.scale,.15,{x:1,y:1}),O.i.to(n.shadow,.15,{alpha:.3}),n.rock.rotation+=k.Range(-.2,.2),n.shadow.rotation=n.rock.rotation},n.clampDropPosition=function(){var e=k.inverseLerp(0,za.Height,n.y),t=k.lerp(480,430,e),o=k.lerp(1150,1200,e);n.x=k.clamp(n.x,t,o),n.y=k.clamp(n.y,150,630),n.y<480?(n.y=Math.min(n.y,440),n.CurrentArea=-1):(n.y=Math.max(n.y,550),n.x<650?(n.x=k.clamp(n.x,430,610),n.CurrentArea=0):n.x<870?(n.x=k.clamp(n.x,720,870),n.CurrentArea=1):n.x<1062?(n.x=k.clamp(n.x,940,1016),n.CurrentArea=2):(n.x=Math.max(n.x,1100),n.CurrentArea=3)),n.Placed.Dispatch(n,n.CurrentArea)},n.Align=function(e){n.rock.rotation=k.moveTowardsValue(n.rock.rotation,0,10*e),n.shadow.rotation=n.rock.rotation},n.Data=t,n.position.set(t.xPos,t.yPos),n.CurrentArea=t.Area,n.shadow=new PIXI.Sprite(X.Get(t.Img)),n.shadow.alpha=.3,n.shadow.anchor.set(.5),n.addChild(n.shadow),"AmberInsect"==t.Img||"AmberAnt"==t.Img||"SmallEmerald"==t.Img?n.shadow.tint=12566463:n.shadow.tint=0,n.rock=new PIXI.Sprite(X.Get(t.Img)),n.rock.anchor.set(.5),n.addChild(n.rock),n.rock.rotation=k.Range(-Math.PI,Math.PI),n.shadow.rotation=n.rock.rotation,n.rock.scale.set(k.Range(.9,1.1)),n.dragger=new be(n,n.onDragStart,n.onDragStop),n.buttonMode=!0,n}return hn(t,e),t}(r.Container),gn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mn=n(201),_n=function(e){function t(t,n,o,i){void 0===i&&(i="");var a=e.call(this)||this;return a.penRadius=25,a.baseColour="#f49979",a.sinTime=0,a.ClearCanvas=function(){a.graphic.clear(),a.graphic.beginFill(a.eraserColour,1e-7),a.graphic.drawRect(0,0,a.size.x,a.size.y),a.previousArt.visible=!1},a.Load=function(e){a.ClearCanvas();if(null!=e&&""!=e){var t="drawing"+e,n=localStorage.getItem(t);n&&(!0,a.previousArt.texture=r.Texture.fromImage(n),a.previousArt.visible=!0)}},a.SetPenColour=function(e){a.baseColour=e,a.graphic.lineStyle(a.penRadius,parseInt(e.substring(1),16)),a.erasing=!1},a.SetPenWidth=function(e){0==e?a.penRadius=8:1==e?a.penRadius=17:2==e&&(a.penRadius=40)},a.SetEraser=function(){a.erasing=!0},a.Draw=function(e,t){a.erasing?a.erase(e,t):a.drawColour(e,t)},a.drawColour=function(e,t){var n=k.dist(e,t);a.sinTime+=.3;var o=(Math.sin(a.sinTime)+1)/2,i=k.lerp(a.penRadius,1.5*a.penRadius,o),r=parseInt(mn(a.baseColour).lighten(6*o).toString().substring(1),16);a.graphic.beginFill(r).lineStyle(i/2,r).moveTo(e.x,e.y).lineTo(t.x,t.y);for(var s=i/4,l=Math.min(n/5,4),c=0;c<l;c++){var u=k.lerpPoint(e,t,c/l);u.x+=k.Range(-s,s),u.y+=k.Range(-s,s),r=parseInt(mn(a.baseColour).lighten(5*Math.random()).toString().substring(1),16),a.graphic.beginFill(r,1).lineStyle(1,r).drawCircle(u.x,u.y,k.Range(i/10,i/6)).endFill()}a.graphic.beginFill(r,1).lineStyle(1,r).drawCircle(t.x,t.y,i/4).endFill()},a.erase=function(e,t){var n=a.eraserColour;e.x=k.clamp(e.x,24,510),t.x=k.clamp(t.x,24,510),e.y=k.clamp(e.y,30,560),t.y=k.clamp(t.y,30,560),a.graphic.lineStyle(50,n).moveTo(e.x,e.y).lineTo(t.x,t.y),a.graphic.beginFill(n,1).lineStyle(1,n).drawCircle(t.x,t.y,30).endFill()},a.GetBounds=function(){var e=.75*a.penRadius;return new r.Rectangle(e,e,a.size.x-2*e,a.size.y-2*e)},a.SaveAs=function(e){var t=window.game.PixiApp.renderer.plugins.extract.base64(a),n="drawing"+e;localStorage.setItem(n,t)},a.position=t,a.size=n,a.eraserColour=o,a.previousArt=new r.Sprite,a.addChild(a.previousArt),a.graphic=new r.Graphics,a.graphic.width=a.size.x,a.graphic.height=a.size.y,a.addChild(a.graphic),a.ClearCanvas(),a.Load(i),a}return gn(t,e),t}(r.Container),yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vn=function(e){function t(){var n=e.call(this)||this;n.fullScale=2.4,n.Show=function(){n.whiteCover.alpha=1,n.barMask.scale.x=0,n.animPlayed=!1,n.visible=!0},n.Hide=function(){n.visible=!1},n.Update=function(e,t){n.barMask.scale.x=k.lerp(n.barMask.scale.x,n.fullScale*t,2*e),n.whiteCover.alpha=t<10?k.lerp(n.whiteCover.alpha,0,e):t<85?k.lerp(n.whiteCover.alpha,0,.2):k.inverseLerp(85,100,t),t>=40&&!n.animPlayed&&(n.animPlayed=!0,n.playMidPointAnim())},n.playMidPointAnim=function(){if(n.flower&&n.flower.state)try{n.flower.scale.x*=-1,n.flower.state.setAnimation(0,t.MidPointAnim,!1),t.MidPointAnim="SelectAnim"}catch(e){console.error(e)}},n.onAnimComplete=function(){try{n.flower&&(n.flower.scale.x=n.flower.scale.y,n.flower.state&&n.flower.state.addAnimation(0,"LoadAnim",!0,0))}catch(e){console.error(e)}},n.visible=!1,n.x=za.Width/2,n.y=za.Height/2,(new PIXI.loaders.Loader).add("flowerAnim","assets/anims/elinor/Elinor.json").load(function(e,o){n.flower=new PIXI.spine.Spine(o.flowerAnim.spineData),n.flower.state.onComplete=n.onAnimComplete,n.flower.state.setAnimation(0,"LoadAnim",!0),n.flower.scale.set(.4),n.flower.y=70,n.addChildAt(n.flower,0),n.flower.stateData.setMix(t.MidPointAnim,"LoadAnim",.2),n.flower.stateData.setMix("LoadAnim",t.MidPointAnim,.2)});var o=r.Sprite.fromImage("assets/images/ui/splash/LoadBarEmpty.png");o.y=95,o.anchor.set(.5),n.addChild(o),n.barMask=r.Sprite.fromImage("assets/images/2PixelRect.png"),n.barMask.position.set(-240,o.y),n.barMask.anchor.set(0,.5),n.barMask.scale.set(0,20),n.barMask.tint=16711680,n.barMask.alpha=.9,n.addChild(n.barMask);var i=r.Sprite.fromImage("assets/images/ui/splash/LoadBarFill.png");return i.mask=n.barMask,i.y=o.y,i.anchor.set(.5),n.addChild(i),n.whiteCover=r.Sprite.fromImage("assets/images/2PixelRect.png"),n.whiteCover.scale.set(za.Width/2,za.Height/2),n.whiteCover.anchor.set(.5),n.addChild(n.whiteCover),n}return yn(t,e),t.MidPointAnim="SelectAnim",t}(r.Container),bn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wn=(function(e){function t(t,n){void 0===t&&(t=0),void 0===n&&(n=0);var o=e.call(this)||this,i=PIXI.Sprite.fromImage("./assets/images/2PixelRect.png");i.position.set(t-3,n-3),i.scale.set(18),i.alpha=.5,o.addChild(i);var r=new PIXI.Text;r.position.set(t,n),o.addChild(r);var a,s=[];return function e(){window.requestAnimationFrame(function(){for(var t=performance.now();s.length>0&&s[0]<=t-1e3;)s.shift();s.push(t),a=s.length,e(),r.text=""+a})}(),o}bn(t,e)}(r.Container),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),Sn=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-300;var o=new PIXI.spine.Spine(b.Get("birdBlue"));return o.update(0),o.position.y=-250,o.state.setAnimation(0,"animation",!0),n.addChild(o),n}return wn(t,e),t}(C),kn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tn=function(e){function t(t){var n=e.call(this,t)||this;n.zIndex=-1e3;var o=new PIXI.spine.Spine(b.Get(Za.Fish));return o.update(0),o.position.y=-20,o.state.setAnimation(0,"animation",!0),n.addChild(o),n}return kn(t,e),t}(C),Cn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Pn=function(e){function t(t){var n=e.call(this,t)||this;if(t.Name==Za.Lizard){var o=new r.Sprite(X.Get("LizardRock"));o.interactive=!1,o.y=50,o.anchor.set(.5,.74),n.addChild(o)}else{var i=new r.Sprite(X.Get("LizardLog"));i.interactive=!1,i.position.set(-300,-125),i.scale.set(1.2),n.addChild(i)}var a=new PIXI.spine.Spine(b.Get(Za.Lizard));return a.update(0),a.state.setAnimation(0,"animation",!0),a.scale.set(.9),a.y=50,n.addChild(a),n.hitArea=new PIXI.Rectangle(-20,-100,50,50),n.buttonMode=!0,n}return Cn(t,e),t.prototype.Teardown=function(){},t}(C),Bn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),In=function(e){function t(t){var n=e.call(this,t,0)||this;n.addAnim=function(e,t){n.SpineAnim.state.hasAnimation(e)?n.SpineAnim.state.addAnimation(0,e,t,0):console.error("Missing anim: "+e)},n.SpineAnim=new PIXI.spine.Spine(b.Get("FlipRock")),n.SpineAnim.update(0),n.SpineAnim.scale.set(.6),n.SpineAnim.tint=l.SceneTint,n.addChild(n.SpineAnim);var o=l.LastInteraction;return o!=Za.PillBug&&o!=Za.Worm&&o!=Za.CaterpillarRock&&o!=Za.AntRock||n.addAnim("ReplaceRock",!1),n.addAnim("IdleWobble",!0),n}return Bn(t,e),t}(C),An=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),On=function(e){function t(t){var n=e.call(this,t)||this;return n.SpineAnim=new PIXI.spine.Spine(b.Get("WebLog")),n.SpineAnim.update(0),n.SpineAnim.tint=l.SceneTint,n.SpineAnim.state.setAnimation(0,"animation",!0),n.addChild(n.SpineAnim),n}return An(t,e),t}(C),Mn=function(){function e(){}return e.maxY=550,e.minY=400,e.Init=function(t){e.sceneToRight=t.ZoneToRight,e.sceneToLeft=t.ZoneToLeft,e.levelWidth=t.Width,e.UpdateLocks()},e.UpdateLocks=function(){e.minX=l.UnlockedAreas[e.sceneToLeft]?100:450,e.maxX=e.levelWidth,e.maxX-=l.UnlockedAreas[e.sceneToRight]?100:600},e.ClampPos=function(t,n){var o=e.minY;if(e.Bounds&&e.Bounds.length>1)for(var i=1;i<e.Bounds.length;i++){if(n<e.Bounds[i].x){var r=k.inverseLerp(e.Bounds[i-1].x,e.Bounds[i].x,n);o=-k.lerp(e.Bounds[i-1].y,e.Bounds[i].y,r);break}}return t.x=k.clamp(t.x,e.minX,e.maxX),t.y=k.clamp(t.y,o,e.maxY),t},e}(),xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gn=function(e){function t(t,n){var o=e.call(this)||this;return o.TargetType=ts.None,o.enabled=!0,o.pointerDown=!1,o.dragTime=0,o.gamePointerPos=new r.Point,o.dragThreshold=.3,o.GAME_VIEW="GameSceneView",o.SetEnabled=function(e){o.enabled=e,o.enabled||(o.pointerDown=!1)},o.Update=function(e){li.dragToMoveEnabled&&o.pointerDown&&(o.dragTime+=e,o.dragTime>o.dragThreshold&&(o.Target=null,o.TargetType=ts.None,o.gamePointerPos=o.getPosInGame(o.lastPointerEvt),o.SetElinorDest(o.gamePointerPos)))},o.OnPointerDown=function(e){e.data.isPrimary&&o.enabled&&(o.dragTime=0,o.pointerDown=!0,o.gamePointerPos=o.getPosInGame(e))},o.OnPointerMove=function(e){o.pointerDown&&(o.gamePointerPos=o.getPosInGame(e))},o.OnPointerUp=function(e){e.data.isPrimary&&o.pointerDown&&(o.dragTime<o.dragThreshold?o.OnTap(e):o.charService.Elinor.Stop(),o.pointerDown=!1)},o.getPosInGame=function(e){if(e){o.lastPointerEvt=e;var t=e.data.getLocalPosition(o.GameSceneView);return t.y+=za.Height/2,t.x+=za.Width/2,t.x-=za.Width/2+o.GameSceneView.Offset,t}return o.gamePointerPos},o.OnTap=function(e){if(e&&e.target){var t=e.target.name;if(o.setTargetInfo(e.target),t==o.GAME_VIEW)o.SetElinorDest(o.getPosInGame(e));else if(t==Ya.Elinor||t==Ya.Ari&&l.AriUnlocked||t==Ya.Olive&&l.OliveUnlocked);else{var n=e.target.position;k.dist(o.charService.Elinor.Position,n)>150?o.SetElinorDest(n,70):o.emit("targetTapped")}}},o.setTargetInfo=function(e){o.Target={type:ts.None,name:e.name},o.TargetType=ts.None,e.name!=o.GAME_VIEW&&(e instanceof R?(o.TargetType=ts.Character,o.Target={name:e.name}):e instanceof Tt?(o.TargetType=ts.Tool,o.Target={toolType:e.Data.ToolType}):e instanceof C?(o.TargetType=ts.InteractionPoint,o.Target={toolType:e.Data.ToolType,object:e.Data.Name}):e instanceof Ft?(o.TargetType=ts.Mound,o.Target={hasFlower:e.Data.HasFlower}):e instanceof lt&&(o.TargetType=ts.Lantern,o.Target={data:e.Data,view:e}))},o.SetElinorDest=function(e,t){void 0===t&&(t=0),e=e.clone(),t>0&&(e=k.moveTowards(e,o.charService.Elinor.Position,70));var n=o.charService.Elinor.Position.x,i=Mn.ClampPos(e,n);o.charService.Elinor.SetDestination(i)},o.worldWidth=n.Width,o.charService=t.CharacterService,o.GameSceneView=t.View,o.GameSceneView.on("pointerdown",o.OnPointerDown),o.GameSceneView.on("pointermove",o.OnPointerMove),o.GameSceneView.on("pointerupoutside",o.OnPointerUp),o.GameSceneView.on("pointerup",o.OnPointerUp),o.GameSceneView.name=o.GAME_VIEW,o.GameSceneView.interactive=!0,o}return xn(t,e),Object.defineProperty(t.prototype,"Enabled",{get:function(){return this.enabled},enumerable:!0,configurable:!0}),t}(U.EventEmitter),Dn=function(){function e(t){var n=this;this.safeZone=(za.Width-za.MinWidth)/2,this.onResize=function(t){var o=t.scale,i=t.width.valueOf(),r=t.height.valueOf();n.view.style.width=i+"px",n.view.style.height=r+"px",n.stage.scale.set(o.x.valueOf(),o.y.valueOf());var a=k.inverseLerp(za.MinWidth/1e3,za.Width/1e3,o.x);e.offset=k.lerp(0,(za.Width-za.MinWidth)/2,a),e.Scale=r/za.Height},this.stage=t.stage,this.view=t.view,this.renderer=t.renderer,this.scaleElement=document.getElementById("frame");new o.d({width:za.Width,height:za.Height,safeWidth:za.MinWidth,safeHeight:za.Height,callback:this.onResize});this.view.style.display="block",this.view.style.margin="auto",this.view.style.transformOrigin="top left",this.view.style.left="0px",this.view.style.top="0px",this.stage.position.set(this.renderer.width/2,this.renderer.height/2),this.stage.pivot.x=this.renderer.width/2,this.stage.pivot.y=this.renderer.height/2}return Object.defineProperty(e,"Offset",{get:function(){return e.offset},enumerable:!0,configurable:!0}),e.Scale=1,e.offset=0,e}(),Ln=function(){function e(){}return e.SaveFileVersion="100",e.HasValidSave=function(){var t=localStorage.getItem(za.SaveVersion);return console.log("PersistanceService::HasValidSave: "+t+" vs "+e.SaveFileVersion),!(!t||t!=e.SaveFileVersion)&&null!=localStorage.getItem(za.SavePath)},e.Save=function(){setTimeout(function(){var t={PlayerPreffs:{}};t.PlayerPreffs.PreviousGameScene=l.PreviousGameScene,t.PlayerPreffs.SeedType=l.SeedType,t.PlayerPreffs.AriUnlocked=l.AriUnlocked,t.PlayerPreffs.OliveUnlocked=l.OliveUnlocked,t.PlayerPreffs.OnboardingComplete=l.OnboardingComplete,t.PlayerPreffs.MagGlassTutComplete=l.MagGlassTutComplete,t.PlayerPreffs.SieveTutComplete=l.SieveTutComplete,t.PlayerPreffs.BinoTutComplete=l.BinoTutComplete,t.PlayerPreffs.GameComplete=l.GameComplete,t.PlayerPreffs.RewardPayoffPlayed=l.RewardPayoffPlayed,t.PlayerPreffs.UnlockedAreas=l.UnlockedAreas,t.PlayerPreffs.VisitedAreas=l.VisitedAreas,t.PlayerPreffs.CompletedAreas=l.CompletedAreas,t.PlayerPreffs.CompletedInteractions=l.CompletedInteractions,t.Tasks=zo.Tasks,t.CurrentTask=zo.CurrentTask,t.levels={},t.levels[qa.Intro]=zo.Levels[qa.Intro],t.levels[qa.Clubhouse]=zo.Levels[qa.Clubhouse],t.levels[qa.RiverBank]=zo.Levels[qa.RiverBank],t.levels[qa.ElinorsHouse]=zo.Levels[qa.ElinorsHouse],t.levels[qa.DeepForest]=zo.Levels[qa.DeepForest],t.levels[qa.NightForest]=zo.Levels[qa.NightForest],t.UnlockState=qo.UnlockState,t.SeedbagUnlocked=qo.SeedbagUnlocked,t.NotebookUnlocked=qo.NotebookUnlocked,t.CollectionBoxUnlocked=qo.CollectionBoxUnlocked,t.MapUnlocked=qo.MapUnlocked,t.MG_uses=l.MG_uses,t.SI_uses=l.SI_uses,t.SH_uses=l.SH_uses,t.WC_uses=l.WC_uses,t.BI_uses=l.BI_uses,t.TO_uses=l.TO_uses,t.Notebook_uses=l.Notebook_uses,t.BlueBirdFound=l.BlueBirdFound,t.RedBirdFound=l.RedBirdFound,t.YellowBirdFound=l.YellowBirdFound,t.NotebookVO_IntroPlayed=l.NotebookVO,t.CollectionBoxVisited=l.CollectionBoxVisited,t.LockedRocks=as.Locked,t.UnlockedRocks=as.Unlocked,t.UnlockedSeeds=$a.Unocked,localStorage.setItem(za.SavePath,JSON.stringify(t)),localStorage.setItem(za.SaveVersion,e.SaveFileVersion)},10)},e.RestoreGameState=function(){var e=JSON.parse(localStorage.getItem(za.SavePath));l.PreviousGameScene=e.PlayerPreffs.PreviousGameScene,l.SeedType=e.PlayerPreffs.SeedType,l.AriUnlocked=e.PlayerPreffs.AriUnlocked,l.OliveUnlocked=e.PlayerPreffs.OliveUnlocked,l.OnboardingComplete=e.PlayerPreffs.OnboardingComplete,l.MagGlassTutComplete=e.PlayerPreffs.MagGlassTutComplete,l.SieveTutComplete=e.PlayerPreffs.SieveTutComplete,l.BinoTutComplete=e.PlayerPreffs.BinoTutComplete,l.GameComplete=e.PlayerPreffs.GameComplete,l.RewardPayoffPlayed=e.PlayerPreffs.RewardPayoffPlayed,l.CollectionBoxVisited=e.PlayerPreffs.CollectionBoxVisited,l.UnlockedAreas=e.PlayerPreffs.UnlockedAreas,l.VisitedAreas=e.PlayerPreffs.VisitedAreas,l.CompletedAreas=e.PlayerPreffs.CompletedAreas,l.CompletedInteractions=e.PlayerPreffs.CompletedInteractions,zo.Tasks=e.Tasks,zo.CurrentTask=e.CurrentTask,zo.Levels={},zo.Levels[qa.Intro]=e.levels[qa.Intro],zo.Levels[qa.Clubhouse]=e.levels[qa.Clubhouse],zo.Levels[qa.RiverBank]=e.levels[qa.RiverBank],zo.Levels[qa.ElinorsHouse]=e.levels[qa.ElinorsHouse],zo.Levels[qa.DeepForest]=e.levels[qa.DeepForest],zo.Levels[qa.NightForest]=e.levels[qa.NightForest],qo.UnlockState=e.UnlockState,qo.SeedbagUnlocked=e.SeedbagUnlocked,qo.NotebookUnlocked=e.NotebookUnlocked,qo.CollectionBoxUnlocked=e.CollectionBoxUnlocked,qo.MapUnlocked=e.MapUnlocked,l.MG_uses=e.MG_uses,l.SI_uses=e.SI_uses,l.SH_uses=e.SH_uses,l.WC_uses=e.WC_uses,l.BI_uses=e.BI_uses,l.TO_uses=e.TO_uses,l.Notebook_uses=e.Notebook_uses,l.BlueBirdFound=e.BlueBirdFound,l.RedBirdFound=e.RedBirdFound,l.YellowBirdFound=e.YellowBirdFound,l.NotebookVO=e.NotebookVO,as.Locked=e.LockedRocks,as.Unlocked=e.UnlockedRocks,$a.Unocked=e.UnlockedSeeds},e}(),Fn=n(97),Hn=function(){function e(t){Fn.a;t.state.soundVolume.subscribe(e.setVolume),e.setVolume(t.state.soundVolume.value),e.loadMusic()}return e.musicVolume=.04,e.loadMusic=function(){e.music||(e.music=PIXI.sound.Sound.from({url:"assets/sounds/music/elinor_music.mp3",loop:!0}),e.musicVolume=li.IsDebug?.04:.1,e.music.volume=e.musicVolume,e.music.play())},e.Load=function(e){return PIXI.sound.Sound.from(e)},e.Unload=function(e){e&&(e.stop(),e.destroy(),e=null)},e.Get=function(e){if(PIXI.loader.resources[e])return PIXI.loader.resources[e].sound;console.error("failed to get sound with id: "+e)},e.Clear=function(){PIXI.sound.stopAll(),PIXI.sound.removeAll()},e.OnPause=function(){PIXI.sound.pauseAll(),e.music&&e.music.isPlaying&&e.music.pause(),console.log("SoundService::OnPause")},e.OnResume=function(){setTimeout(function(){PIXI.sound.resumeAll(),PIXI.sound.unmuteAll(),e.setVolume(PIXI.sound.volumeAll),e.music&&!e.music.isPlaying&&e.music.play()},100)},e.setVolume=function(t){try{PIXI.sound.volumeAll=t}catch(e){console.error("Failed to set volume."+e)}e.music&&(e.music.volume=t>0?e.musicVolume:0)},e}(),Vn=function(){function e(){}return e.Volume=1,e.playNext=[],e.Init=function(t){e.captions=t,e.captions=t},e.SetScene=function(t){e.sceneID=t.ID,e.currentTalkView=null,e.charService=t instanceof ga?t.CharacterService:null},e.Play=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.playNext=Object.values(t);var o=e.playNext.shift();e._play(o)},e.Stop=function(){e.currentVO&&(e.stopCurrentLipflap(),e.currentVO.stop(),e.captions.stop(),e.currentVO=null)},e.Add=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(null==e.currentVO){e.playNext=Object.values(t);var o=e.playNext.shift();e._play(o)}else e.playNext=e.playNext.concat(t)},e.PlayCC=function(t){window.game.SrApp.state.captionsMuted.value||e.captions.start(t)},e._play=function(t){console.log("_play "+t);var n=Hn.Get(t);n?(e.Stop(),e.currentVO=n,e.currentVO.volume=e.Volume,e.currentVO.play().once("end",e.completeCallback),e.playLipflap(t),e.PlayCC(t)):(console.error("could not play "+t),e.completeCallback())},e.completeCallback=function(){if(e.currentVO=null,e.playNext.length>0){var t=e.playNext.shift();e._play(t)}},e.playLipflap=function(t){var n=e.tryGetChar(t);n&&e.currentVO?(e.currentTalkView=n.View,e.currentTalkView.PlayTalkAnim(e.currentVO.duration)):console.error("Failed to find char view for "+t)},e.stopCurrentLipflap=function(){e.currentTalkView?(e.currentTalkView.StopTalkAnim(),e.currentTalkView=null,console.log("stopCurrentLipflap Stopped")):console.log("stopCurrentLipflap no view")},e.tryGetChar=function(t){if(e.charService){if(we.Any(t,["clubhouse_m1_02","clubhouse_m1_03_hint","clubhouse_m1_04","clubhouse_m1_05_hint","clubhouse_m2_01_hint","clubhouse_m2_01","clubhouse_m2_06","yard_m3_02","deep_m3_01","deep_m3_06","olive_thanks","mission_keep_going"]))return e.charService.Get(Ya.Olive);if(we.Any(t,["clubhouse_m1_02","clubhouse_m1_03_hint","clubhouse_m1_04","clubhouse_m1_05_hint","clubhouse_m2_01_hint","clubhouse_m2_01","clubhouse_m2_06","riverbank_m1_02_hint","riverbank_m1_02","riverbank_m1_03","riverbank_m2_01","riverbank_m2_02_hint","riverbank_m2_02","riverbank_m3_00","riverbank_m3_01","riverbank_m3_02","riverbank_m3_03","ari_thanks"]))return e.charService.Get(Ya.Ari);if(we.Any(t,["tapir_song_olive","tapir_song_mom","tapir_song_camilla","tapir_song_mole","tapir_song_ari","tapir_help_sifter","tapir_help_shovel","tapir_help_notebook","tapir_help_mg","tapir_help_flashlight","tapir_help_binoculars","help_tapir_collection1","help_tapir_collection2","help_tapir_dark","help_tapir_flower","help_tapir_hikids","help_tapir_lizard","help_tapir_toads1","help_tapir_toads2","help_tapir_water","senorTapir_thanks","senorTapir_help","HM_Tapir_Collection","HM_Tapir_Flowers","HM_Tapir_Lizard","HM_FindToad","HM_DrawToad","HM_Tapir_Water"]))return e.charService.Get(Ya.SenorTapir);if(we.Any(t,["yard_m1_02","yard_m1_02_hint","yard_m1_03","yard_m1_04","yard_m2_01","yard_m2_02","yard_m2_03","yard_m3_01","yard_m3_03","yard_m3_04","yard_m3_05_fail","yard_m3_06","help_mom_bee","help_mom_caterpillar","help_mom_collection1","help_mom_collection2","help_mom_flowers1","help_mom_flowers2","help_mom_hikids","help_mom_snail","ranger_help","HM_Moms_Bee","HM_Moms_Caterpillar","HM_SortByShape","HM_Moms_Snail","HM_DrawFlowers","ranger_thanks"]))return e.charService.Get(Ya.Ranger);if(we.Any(t,["deep_m1_01","deep_m1_03","deep_m2_01","deep_m2_03","deep_m2_10","camilla_help","camilla_thanks","help_camilla_eggs1","help_camilla_eggs2","help_camilla_flowers","help_camilla_leaves","help_camilla_rocks","help_camilla_rustling","help_camilla_sap","Camilla_Eggs","HM_Camilla_Bush","HM_Camilla_Rocks","HM_Camilla_Flowers","HM_Camilla_Sap","HM_Leaf_Spikey"]))return e.charService.Get(Ya.Camilla);if(we.Any(t,["night_m1_02","night_m1_02_hint","night_m1_03","night_m2_04_hint","night_m2_05","night_m3_01","night_m3_02","night_m4_01","night_m4_02","night_m4_04","help_mole_collection1","help_mole_collection2","help_mole_color1","help_mole_color2","help_mole_find","help_mole_flowers","help_mole_lightning","help_mole_log","help_mole_moth","msMole_help","msMole_thanks","HM_FindKatydid","HM_Mole_Collection","HM_Mole_Sieve","HM_Mole_Draw","HM_Mole_Flowers","HM_Mole_Moth"]))return e.charService.Get(Ya.MsMole);if(we.Any(t,["onboarding_1","onboarding_2","onboarding_3_desktop","onboarding_3_tablet","onboarding_4_tablet","onboarding_4_desktop","clubhouse_m1_01","clubhouse_m1_03","clubhouse_m1_05","clubhouse_m2_02","clubhouse_m2_05","riverbank_m1_01","riverbank_m1_04","riverbank_m3_04","yard_m1_01","yard_m3_05_pass","deep_m1_00","deep_m1_02","deep_m2_02","deep_m2_05","deep_m2_07","deep_m2_09","deep_m3_07","night_m1_01","night_m2_01","night_m2_03","night_m4_03"]))return e.charService.Elinor;if(we.Any(t,["help_sally_ant","help_sally_anthill","help_sally_carrying","help_sally_beetle","help_sally_eggs","help_sally_helpme","help_sally_hi","help_sally_log","sally_thanks","sally_help","HM_Sally_Eggs","HM_Sally_Beetle","HM_Sally_Ant","HM_Sally_Ant_Carry","HM_Sally_Ant_Hill","HM_Sally_Log"]))return e.charService.Get(Ya.Sally)}return null},e}(),Nn=function(){return function(e,t){var n=this;this.fadeTimeInS=.4,this.slowTickInS=.5,this.NavigateTo=function(e,t,o){void 0===t&&(t={}),void 0===o&&(o=[]),e?n.transitionInProgress?console.error("Tried to navigate to "+e+"while we were already navigating."):(O.i.killAll(),n.transitionInProgress=!0,n.fade.interactive=!0,n.fade.tint=n.getFadeColour(e),O.i.to(n.fade,n.fadeTimeInS,{alpha:1}),setTimeout(function(){n.ClearAssetCache();var i=new Qa[e](n,e);i.Preload(o).then(function(){return n.OnSceneLoaded(i,t)}),l.PlayGameName&&(Vn.PlayCC("splash"),PIXI.sound.Sound.from("assets/sounds/vo/general/splash.mp3").play(),l.PlayGameName=!1)},1e3*n.fadeTimeInS)):console.error("sceneID: "+e)},this.NavigateBack=function(){l.PreviousGameScene?n.NavigateTo(l.PreviousGameScene):n.NavigateTo(qa.ElinorsHouse)},this.ClearAssetCache=function(){Vn.Stop(),Vn.captions.stop(),Hn.Clear(),PIXI.utils.clearTextureCache(),PIXI.loader.reset(),n.loadProgressView.Show()},this.OnSceneLoaded=function(e,t){O.i.delayedCall(n.fadeTimeInS,function(){Vn.Stop(),O.i.killAll(),l.CurrentScene=e.ID,l.PreviousScene=n.currentScene?n.currentScene.ID:"",n.setTint(e.ID),e.Start(t),e.AddToStage(n.stage),n.currentScene&&(n.currentScene.Teardown(),n.currentScene=null),n.currentScene=e,n.transitionInProgress=!1,n.loadProgressView.Hide(),Ln.Save(),Vn.SetScene(e),n.fadeInScene()})},this.Update=function(e){n.transitionInProgress?n.loadProgressView.Update(e,PIXI.loader.progress):n.currentScene&&n.currentScene.Update(e)},this.slowUpdate=function(){n.pauseService.IsPaused||n.transitionInProgress||!n.currentScene||n.currentScene.SlowUpdate(n.slowTickInS)},this.fadeInScene=function(){n.fade.interactive=!1,n.fade.alpha=1,setTimeout(function(){O.i.to(n.fade,.5,{alpha:0})},10)},this.getFadeColour=function(e){return e==qa.TorchInteraction?0:16777215},this.setTint=function(e){e==qa.NightForest?(l.SceneTint=8095927,l.CharTint=12568551):(l.SceneTint=16777215,l.CharTint=16777215)},this.stage=e,this.fade=r.Sprite.fromImage("./assets/images/2PixelRect.png"),this.fade.scale.set(za.Width/2,za.Height/2),this.fade.alpha=0,this.stage.addChild(this.fade),this.loadProgressView=new vn,this.stage.addChild(this.loadProgressView),this.pauseService=t,setInterval(this.slowUpdate,1e3*this.slowTickInS)}}(),jn=function(){return function(e,t,n,o){void 0===t&&(t=0),void 0===n&&(n=0),void 0===o&&(o=!0),this.Name=e,this.Position=new r.Point(t,n),this.FacingRight=o}}(),Rn=function(){return function(e,t,n){this.Chars=[],this.GameObjects=[],this.Width=e,this.ZoneToLeft=t,this.ZoneToRight=n}}(),Un=(function(){function e(e,t,n){this.Position=new r.Point(e,t),this.Name=n}e.prototype.Clone=function(){return new e(this.Position.x,this.Position.y,this.Name)}}(),function(){}(),function(){return function(e,t){this.Position=e,this.ObjectType=t}}()),En=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Wn=function(e){function t(t,n,o,i){void 0===i&&(i="");var a=e.call(this,new r.Point(t,n),os.Mound)||this;return a.HasFlower=o,a.SeedType=""!=i?i:$a.Chrysanthemum,a}return En(t,e),t}(Un),Xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zn=function(e){function t(t,n,o,i){var a=e.call(this,new r.Point(t,n),os.Lantern)||this;return a.IsOn=!0,a.Scale=o,a.ZIndex=i,a}return Xn(t,e),t}(Un),Yn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kn=function(e){function t(t,n,o){var i=e.call(this,new r.Point(n,o),os.Tool)||this;return i.ToolType=t,i}return Yn(t,e),t}(Un),Zn=function(){return function(e,t,n,o){this.Img=e,this.Colour=t,this.Size=n,this.Shape=o}}(),qn=function(){function e(){}return e.FromSeed=function(t){var n=new e;return n.SeedType=t,n},e}(),Jn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qn=function(e){function t(t,n,o){var i=e.call(this,n,os.InteractionPoint)||this;return i.Name=t,i.ToolType=o,i}return Jn(t,e),t}(Un),$n=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eo=function(e){function t(t,n){return e.call(this,t,n,ns.MagnifyingGlass)||this}return $n(t,e),t}(Qn),to=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),no=function(e){function t(t){return e.call(this,Za.Butterfly,t,ns.MagnifyingGlass)||this}return to(t,e),t}(Qn),oo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),io=function(e){function t(t){return e.call(this,Za.Firefly,t,ns.MagnifyingGlass)||this}return oo(t,e),t}(Qn),ro=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ao=(function(e){function t(t){return e.call(this,Za.HollowTree,t,ns.Torch)||this}ro(t,e)}(Qn),function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}()),so=function(e){function t(t){return e.call(this,Za.Owl,t,ns.Torch)||this}return ao(t,e),t}(Qn),lo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),co=function(e){function t(t){return e.call(this,Za.Moth,t,ns.Torch)||this}return lo(t,e),t}(Qn),uo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),po=function(e){function t(t){return e.call(this,Za.Katydid,t,ns.Torch)||this}return uo(t,e),t}(Qn),ho=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fo=function(e){function t(t){return e.call(this,Za.ToadTorch,t,ns.Torch)||this}return ho(t,e),t}(Qn),go=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mo=function(e){function t(t,n){var o=this;return t==Za.BlinkeyEyes?o=e.call(this,t,n,ns.Torch)||this:t==Za.CaterpillarBino?o=e.call(this,t,n,ns.Binoculars)||this:t==Za.CaterpillarMag?o=e.call(this,t,n,ns.MagnifyingGlass)||this:(console.error("Unexpected caterpillar type: "+t),o=e.call(this,t,n,ns.MagnifyingGlass)||this),o}return go(t,e),t}(Qn),_o=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yo=function(e){function t(t){return e.call(this,Za.Fish,t,ns.MagnifyingGlass)||this}return _o(t,e),t}(Qn),vo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bo=function(e){function t(t,n){return e.call(this,t,n,ns.MagnifyingGlass)||this}return vo(t,e),t}(Qn),wo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),So=function(e){function t(t){return e.call(this,Za.Bee,t,ns.MagnifyingGlass)||this}return wo(t,e),t}(Qn),ko=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),To=function(e){function t(t){return e.call(this,Za.Turtle,t,ns.MagnifyingGlass)||this}return ko(t,e),t}(Qn),Co=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Po=function(e){function t(t){return e.call(this,Za.LandTurtle,t,ns.MagnifyingGlass)||this}return Co(t,e),t}(Qn),Bo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Io=function(e){function t(t){return e.call(this,Za.ToadStandalone,t,ns.MagnifyingGlass)||this}return Bo(t,e),t}(Qn),Ao=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Oo=function(e){function t(t){return e.call(this,Za.FlipRock,t,ns.MagnifyingGlass)||this}return Ao(t,e),t}(Qn),Mo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xo=function(e){function t(t,n){return e.call(this,n,t,ns.MagnifyingGlass)||this}return Mo(t,e),t}(Qn),Go=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Do=function(e){function t(t,n){var o=e.call(this,Za.Nest,n,ns.Binoculars)||this;return o.Colour=t,o}return Go(t,e),t}(Qn),Lo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fo=function(e){function t(t,n){return e.call(this,t,n,ns.Binoculars)||this}return Lo(t,e),t}(Qn),Ho=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vo=function(e){function t(t){return e.call(this,Za.SpiderLog,t,ns.Torch)||this}return Ho(t,e),t}(Qn),No=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jo=function(e){function t(t){return e.call(this,Za.Chrysalis,t,ns.MagnifyingGlass)||this}return No(t,e),t}(Qn),Ro=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Uo=function(e){function t(t,n){return e.call(this,t,n,ns.Binoculars)||this}return Ro(t,e),t}(Qn),Eo=function(){return function(e,t,n,o,i){void 0===o&&(o=!1),void 0===i&&(i=!0),this.Name=e,this.Giver=t,this.SceneName=n,this.HideSpeachBubbleAfterTask=o,this.PlayPayoff=i}}(),Wo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xo=function(e){function t(t,n){return e.call(this,t,n,ns.MagnifyingGlass)||this}return Wo(t,e),t}(Qn),zo=function(){function e(){}return e.Levels={},e.Tasks=[],e.Init=function(){Ln.HasValidSave()?(console.log("RestoreGameState"),Ln.RestoreGameState()):(console.log("Init new Game"),e.SetupIntro(qa.Intro),e.SetupClubhouse(qa.Clubhouse),e.SetupRiverBank(qa.RiverBank),e.SetupElinorsHouse(qa.ElinorsHouse),e.SetupDeepForest(qa.DeepForest),e.SetupNightForest(qa.NightForest),e.InitTasks())},e.InitTasks=function(){var t=[new Eo(a.TalkToOlive,Ya.Olive,qa.Intro,!1,!1),new Eo(a.TalkToAri,Ya.Ari,qa.RiverBank,!1,!1),new Eo(a.TalkToRanger,Ya.Ranger,qa.ElinorsHouse,!1,!1),new Eo(a.TalkToCamilla,Ya.Camilla,qa.DeepForest,!1,!1),new Eo(a.TalkToMsMole,Ya.MsMole,qa.NightForest,!1,!1)];e.Tasks=t},e.SetupIntro=function(t){var n=new Rn(3500,qa.NightForest,qa.RiverBank);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor,650,450)),n.Chars.push(new jn(Ya.Olive,1500,450)),n.Chars.push(new jn(Ya.Ari)),n.Chars.push(new jn(Ya.SenorTapir,n.Width-450,450,!1));var o=[];o.push(new Kn(ns.MagnifyingGlass,2300,500)),n.GameObjects=o},e.SetupClubhouse=function(t){var n=new Rn(6e3,qa.NightForest,qa.RiverBank);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor,650,450)),n.Chars.push(new jn(Ya.Olive)),n.Chars.push(new jn(Ya.Ari)),n.Chars.push(new jn(Ya.Sally,2600,450)),n.Chars.push(new jn(Ya.SenorTapir,n.Width-450,450,!1));var o=[];o.push(new no(new r.Point(2100,450))),o.push(new eo(Za.BugRed,new r.Point(3100,450))),o.push(new bo(Za.AntSingle,new r.Point(1147,490)));var i=[];i.push(new Wn(2395,500,!0,$a.Tulip)),i.push(new Vo(new r.Point(3950,375))),i.push(new Do(Za.WhiteEggs,new r.Point(3460,450))),i.push(new bo(Za.AntFood,new r.Point(4200,490))),i.push(new bo(Za.AntHill,new r.Point(5200,450))),i.push(new Qn(Za.AcornsMag,new r.Point(4550,430),ns.MagnifyingGlass)),i.push(new Qn(Za.AcornsBino,new r.Point(4550,430),ns.Binoculars)),i.push(new Qn(Za.Clubhouse,new r.Point(1400,420),ns.Binoculars)),e.addHiddenObjects(i,o),n.GameObjects=o},e.SetupRiverBank=function(t){var n=new Rn(6e3,qa.Clubhouse,qa.ElinorsHouse);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor)),n.Chars.push(new jn(Ya.Olive)),n.Chars.push(new jn(Ya.Ari,2300,450)),n.Chars.push(new jn(Ya.SenorTapir,n.Width-450,450,!1)),e.SetCharPos(t,"left");var o=[];o.push(new Kn(ns.Sieve,2900,500)),o.push(new Wn(2950,520,!1)),o.push(new Wn(2200,530,!0,$a.Cosmos));var i=[];i.push(new mo(Za.CaterpillarMag,new r.Point(1150,440))),i.push(new eo(Za.BugOrange,new r.Point(4550,470))),i.push(new Fo(Za.ChickWhite,new r.Point(3250,400))),i.push(new yo(new r.Point(1650,450))),i.push(new To(new r.Point(3650,430))),i.push(new Po(new r.Point(2050,430))),i.push(new fo(new r.Point(4200,400))),i.push(new xo(new r.Point(5e3,560),Za.Lizard)),e.addHiddenObjects(i,o),n.GameObjects=o},e.SetupElinorsHouse=function(t){var n=new Rn(6e3,qa.RiverBank,qa.DeepForest);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor,700,450)),n.Chars.push(new jn(Ya.Olive)),n.Chars.push(new jn(Ya.Ari)),n.Chars.push(new jn(Ya.Ranger,1900,450,!1)),n.Chars.push(new jn(Ya.SenorTapir,n.Width-450,450,!1));var o=[];o.push(new Kn(ns.WateringCan,2400,500)),o.push(new Wn(1450,530,!0,$a.Daisy)),o.push(new Wn(2020,430,!1)),o.push(new Wn(2100,490,!1)),o.push(new Wn(2270,430,!0,$a.Daisy)),o.push(new Wn(2882,523,!1)),o.push(new Wn(3060,477,!1)),o.push(new Wn(3846,500,!1));var i=[];i.push(new Oo(new r.Point(4648,527))),i.push(new po(new r.Point(4150,375))),i.push(new eo(Za.BugYellow,new r.Point(4550,470))),i.push(new mo(Za.CaterpillarMag,new r.Point(2755,394))),i.push(new mo(Za.CaterpillarBino,new r.Point(1480,450))),i.push(new Qn(Za.SpiderWeb,new r.Point(5094,410),ns.Binoculars)),i.push(new jo(new r.Point(3520,385))),i.push(new So(new r.Point(3300,450))),i.push(new Qn(Za.Snail,new r.Point(900,430),ns.MagnifyingGlass)),e.addHiddenObjects(i,o),n.GameObjects=o},e.SetupDeepForest=function(t){var n=new Rn(6e3,qa.ElinorsHouse,qa.NightForest);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor)),n.Chars.push(new jn(Ya.Olive)),n.Chars.push(new jn(Ya.Ari)),n.Chars.push(new jn(Ya.Camilla,1400,450,!1)),n.Chars.push(new jn(Ya.SenorTapir,5570,450,!1)),e.SetCharPos(t,"left");var o=[];o.push(new Kn(ns.Binoculars,1930,470)),o.push(new Uo(Za.BlueBird,new r.Point(2100,450))),o.push(new Uo(Za.RedBird,new r.Point(3585,430))),o.push(new Uo(Za.YellowBird,new r.Point(5205,425)));var i=[];i.push(new Oo(new r.Point(2920,514))),i.push(new Wn(4131,450,!0,$a.White)),i.push(new xo(new r.Point(4150,610),Za.LizardLog)),i.push(new mo(Za.CaterpillarMag,new r.Point(2755,394))),i.push(new mo(Za.BlinkeyEyes,new r.Point(940,450))),i.push(new Xo(Za.TreeSap,new r.Point(4600,450))),i.push(new Xo(Za.GingkoLeaf,new r.Point(800,490))),i.push(new Xo(Za.MapleLeaf,new r.Point(3800,490))),i.push(new Xo(Za.ElmLeaf,new r.Point(4950,490))),e.addHiddenObjects(i,o),n.GameObjects=o},e.SetupNightForest=function(t){var n=new Rn(6e3,qa.DeepForest,qa.Clubhouse);e.Levels[t]=n,n.Chars.push(new jn(Ya.Elinor)),n.Chars.push(new jn(Ya.Olive)),n.Chars.push(new jn(Ya.Ari)),n.Chars.push(new jn(Ya.MsMole,950,450,!1)),n.Chars.push(new jn(Ya.SenorTapir,7e3,450,!1)),e.SetCharPos(t,"left");var o=[];o.push(new Kn(ns.Torch,1300,450)),o.push(new so(new r.Point(1675,470))),o.push(new co(new r.Point(2270,420))),o.push(new po(new r.Point(2754,410))),o.push(new zn(773,430,.84,0)),o.push(new zn(3171,623,1.3,500)),o.push(new zn(3906,436,.73,0)),o.push(new zn(5073,460,.76,10)),o.push(new zn(5500,645,1.3,500));var i=[];i.push(new Wn(4400,440,!0,$a.Bell)),i.push(new io(new r.Point(4306,460))),i.push(new Io(new r.Point(4800,440))),i.push(new mo(Za.CaterpillarMag,new r.Point(3264,440))),e.addHiddenObjects(i,o),n.GameObjects=o},e.addHiddenObjects=function(e,t){for(var n=0;n<e.length;n++)e[n].HideTillEnd=!0,t.push(e[n])},e.SaveLevelLayout=function(t){for(var n=e.Levels[t.ID],o=new Rn(n.Width,n.ZoneToLeft,n.ZoneToRight),i=0;i<t.CharacterService.Charachters.length;i++)o.Chars.push(t.CharacterService.Charachters[i].Data);o.GameObjects=t.GameObjectService.GetAllGameObjects(),e.Levels[t.ID]=o,Ln.Save()},e.SetCharPos=function(t,n){var o=e.Levels[t],i="left"==n?700:o.Width-700,a=e.GetChar(o,Ya.Elinor);if(a.Position=new r.Point(i,500),a.FacingRight=!0,l.OliveUnlocked){var s=e.GetChar(o,Ya.Olive);s&&(i="left"==n?600:o.Width-600,s.Position=new r.Point(i,550),s.FacingRight=!0)}if(l.AriUnlocked){var c=e.GetChar(o,Ya.Ari);c&&(i="left"==n?500:o.Width-500,c.Position=new r.Point(i,450),c.FacingRight=!0)}},e.LoadLevelLayout=function(t){return console.log("LoadLevelLayout: "+t),console.log(e.Levels),e.Levels[t]},e.GetChar=function(e,t){for(var n=0;n<e.Chars.length;n++)if(e.Chars[n].Name==t)return e.Chars[n];return null},e}(),Yo=function(){function e(){}return e.left=37,e.up=38,e.right=39,e.down=40,e.Init=function(){fe(document).on("keydown",e.onKeyDown),fe(document).on("keyup",e.onKeyUp)},e.onKeyDown=function(t){t.keyCode==e.left&&(e.Left=!0),t.keyCode==e.right&&(e.Right=!0),t.keyCode==e.up&&(e.Up=!0),t.keyCode==e.down&&(e.Down=!0)},e.onKeyUp=function(t){t.keyCode==e.left&&(e.Left=!1),t.keyCode==e.right&&(e.Right=!1),t.keyCode==e.up&&(e.Up=!1),t.keyCode==e.down&&(e.Down=!1)},e}(),Ko=function(){function e(){}return e.Volume=1,e.Play=function(t,n){void 0===n&&(n=-1);var o=Hn.Get(t);o?(o.volume=-1!=n?n:e.Volume,o.play()):console.error("could not play sfx:",t)},e}(),Zo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qo=function(e){function t(){var n=e.call(this)||this;return n.OnPickup=new ve,n.TryUse=new ve,n.HoleDug=new ve,n.FlowerGrown=new ve,n.SeedSelected=new ve,n.toolRange={},n.Init=function(e){n.gameObjects=e.GameObjectService,n.gameInput=e.GameInput,n.elinor=e.CharacterService.Elinor,n.toolRange[ns.MagnifyingGlass]=160,n.toolRange[ns.WateringCan]=120,n.toolRange[ns.Shovel]=120,n.toolRange[ns.Torch]=200,n.toolRange[ns.Binoculars]=275,n.toolRange[ns.Sieve]=n.toolRange[ns.Shovel]},n.PickUpTool=function(e){t.UnlockState[e]||(t.UnlockState[e]=!0,n.OnPickup.Dispatch(e),n.elinor.Stop(),n.gameInput.SetEnabled(!1),O.i.delayedCall(.5,function(){return n.gameInput.SetEnabled(!0)})),Ln.Save()},n.CanUse=function(e){if(!t.IsUnlocked(e))return!1;if(e==ns.MagnifyingGlass)return n.GetClosestMagGlassTargetInRange();if(e==ns.Torch||e==ns.Binoculars){var o=n.elinor.ToolPosition,i=n.toolRange[e];return n.CanUseTool(o,i,e)}if(e==ns.Sieve||e==ns.WateringCan||e==ns.Shovel)return n.DirtInRange(e).length>0;console.error("unexpected tooltype: "+e)},n.DirtInHitBox=function(e){for(var t=n.gameObjects.Mounds,o=[],i=0;i<t.length;i++)t[i].Pos.x>e.x&&t[i].Pos.x<e.x+e.width&&t[i].Pos.y>e.y&&t[i].Pos.y<e.y+e.height&&o.push(i);return o},n.DirtInRange=function(e){if(e==ns.Shovel||e==ns.Sieve||e==ns.WateringCan){var t=n.gameObjects.Mounds,o=[];if(t.length>0)for(var i=n.elinor.ToolPosition,r=n.toolRange[e],a=Number.MAX_SAFE_INTEGER,s=0;s<t.length;s++)if(t[s].View.visible){var l=k.dist(i,t[s].Pos);a=Math.min(a,l),l<=r&&o.push(s)}return o}return console.error("wrong tool type: "+e),[]},n.CanUseTool=function(e,t,o){var i=n.gameObjects.InteractionPoints;if(i.length>0)for(var r=Number.MAX_SAFE_INTEGER,a=0;a<i.length;a++)if(i[a].Data.ToolType==o&&i[a].View.visible){var s=k.dist(e,i[a].Pos);if(r=Math.min(r,s),s<=t)return!0}return!1},n.GetClosestTarget=function(e){if(e==ns.MagnifyingGlass)return n.GetClosestMagGlassTargetInRange();var t,o=[];if(e==ns.Shovel)o=n.gameObjects.Mounds;else for(var i=0;i<n.gameObjects.InteractionPoints.length;i++)n.gameObjects.InteractionPoints[i].Data.ToolType==e&&n.gameObjects.InteractionPoints[i].View.visible&&o.push(n.gameObjects.InteractionPoints[i]);var r=n.elinor.ToolPosition;if(o.length>0){var a=n.toolRange[e];for(i=0;i<o.length;i++){var s=k.dist(r,o[i].Pos);s<a&&(s=a,t=o[i])}}return t},n.GetClosestMagGlassTargetInRange=function(){for(var e=null,t=n.toolRange[ns.MagnifyingGlass],o=n.elinor.ToolPosition,i=n.gameObjects.InteractionPoints,r=0;r<i.length;r++)if(i[r].Data.ToolType==ns.MagnifyingGlass&&i[r].View.visible){var a=n.gameObjects.InteractionPoints[r];(l=k.dist(a.Data.Position,o))<t&&(e=a,t=l)}var s=n.gameObjects.Mounds;for(r=0;r<s.length;r++){var l,c=s[r];if(c.Data.HasFlower&&!c.Data.Hidden)(l=k.dist(c.Data.Position,o))<t&&(e=c,t=l)}return e},li.IsDebug,n}return Zo(t,e),t.UnlockState={},t.IsUnlocked=function(e){return t.UnlockState[e]},t.AnyToolUnlocked=function(){return t.UnlockState[ns.WateringCan]||t.UnlockState[ns.Shovel]||t.UnlockState[ns.Sieve]||t.UnlockState[ns.MagnifyingGlass]||t.UnlockState[ns.Binoculars]||t.UnlockState[ns.Torch]},t}(PIXI.utils.EventEmitter),Jo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qo=function(e){function t(t){var n=e.call(this)||this;return n.hintStates={},n.SlowUpdate=function(e){var t=n.tools.GetClosestTarget(ns.MagnifyingGlass);!n.hintStates[ns.MagnifyingGlass]&&t&&t.Data&&t.Data.Object==Ka.Insects&&Ko.Play("shaking_bush_01");var o=n.tools.GetClosestTarget(ns.Torch);!n.hintStates[ns.Torch]&&o&&(o.Data.Name==Za.Owl?Ko.Play("owl_1"):o.Data.Name==Za.Katydid?Ko.Play("katydid"):o.Data.Name==Za.Moth?Ko.Play("shaking_bush_01"):o.Data.Name==Za.ToadTorch?Ko.Play("toad"):console.warn("No hint sound for "+o.Data.Name));var i=n.tools.GetClosestTarget(ns.Binoculars);!n.hintStates[ns.Binoculars]&&i&&(i.Data.Name!=Za.RedBird&&i.Data.Name!=Za.YellowBird&&i.Data.Name!=Za.BlueBird||Ko.Play(Se.Any("bird1","bird2","bird3"))),n.currentMound=n.tools.GetClosestTarget(ns.Shovel);var r=n.currentMound&&!n.currentMound.Data.HasFlower&&!n.currentMound.Data.HideTillEnd,a=!n.currentMound;n.hintStates[ns.WateringCan]=r,n.hintStates[ns.Shovel]=a,n.hintStates[ns.Sieve]=null!=n.currentMound,n.hintStates[ns.Torch]=null!=o,n.hintStates[ns.Binoculars]=null!=i,n.hintStates[ns.MagnifyingGlass]=null!=t,n.gameUI.UpdateHints(n.hintStates),n.gameObjects.UpdateMoundHint(n.currentMound)},n.tools=t.Tools,n.gameUI=t.GameUI,n.gameObjects=t.GameObjectService,ns.All.forEach(function(e){n.hintStates[e]=!1}),n}return Jo(t,e),t}(PIXI.utils.EventEmitter),$o=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ei=function(e){function t(n){var o=e.call(this)||this;return o.TaskUpdateRange=250,o.RepeatTime=120,o.timeTillRepeat=10,o.repeatMissionInstrux=function(e){o.timeTillRepeat-=e,o.timeTillRepeat<=0&&(o.timeTillRepeat=o.RepeatTime,o.emit(t.RepeatInstrux,o.task))},o.removeOptionalTasks=function(e){var t=zo.CurrentTask;t&&(t.Name==a.GetHelperMission?zo.CurrentTask=null:t.IsHelperMission&&t.SceneName!=e?zo.CurrentTask=null:o.task=zo.CurrentTask);var n=zo.Tasks;zo.Tasks=[];for(var i=0;i<n.length;i++)(t=n[i]).Name==a.GetHelperMission||t.IsHelperMission&&t.SceneName!=e||zo.Tasks.push(t)},o.tryGetTask=function(){if(o.nextTask)o.StartTask(o.nextTask);else for(var e=zo.Tasks,t=0;t<e.length;t++){var n=e[t];if(o.distToTaskGiver(n)<o.TaskUpdateRange)return o.StartTask(n),zo.Tasks.splice(t,1),void pi.CharInteraction(n.Giver+" game helper mission prompt.")}},o.StartTask=function(e){o.task=e,o.nextTask=null,o.emit(t.Start,e),zo.CurrentTask=e,o.timeTillRepeat=o.RepeatTime;var n=e.Name+(l.GameComplete?": helper mission":": core missions");pi.TaskStarted(n)},o.completeTask=function(e,n){if(o.task){o.emit(t.Complete,o.task);var i=o.task.Name+(l.GameComplete?": helper mission":": core missions");pi.TaskCompleted(i),o.task=null,o.nextTaskDelay=e,o.nextTask=n,zo.CurrentTask=n}else console.error("Trying to complet task that doesnt exist.")},o.tryProgressTask=function(){if(o.task.SceneName==o.gameScene.ID)if(o.task.Name==a.TalkToOlive)o.completeTask(4,new Eo(a.FindMagGlass,Ya.Olive,qa.Intro));else if(o.task.Name==a.FindMagGlass&&qo.IsUnlocked(ns.MagnifyingGlass))o.completeTask(9.5,new Eo(a.UseMagGlass,Ya.Olive,qa.Intro,!0));else if(o.task.Name==a.TalkToAri)o.completeTask(4,new Eo(a.FindSieve,Ya.Ari,qa.RiverBank));else if(o.task.Name==a.FindSieve&&qo.IsUnlocked(ns.Sieve))o.completeTask(9,new Eo(a.UseSieve,Ya.Ari,qa.RiverBank));else if(o.task.Name==a.TalkToRanger)o.completeTask(5,new Eo(a.FindWateringCan,Ya.Ranger,qa.ElinorsHouse));else if(o.task.Name==a.FindWateringCan&&qo.IsUnlocked(ns.WateringCan))o.completeTask(3,new Eo(a.GrowFirstFlower,Ya.Ranger,qa.ElinorsHouse));else if(o.task.Name==a.FindShovel&&qo.IsUnlocked(ns.Shovel))o.completeTask(3,new Eo(a.UseShovelForSieve,Ya.Ari,qa.RiverBank));else if(o.task.Name==a.UseShovelForSieve&&l.SH_uses>0)o.completeTask(2,new Eo(a.UseSieveAfterShovel,Ya.Ari,qa.RiverBank));else if(o.task.Name==a.FindChrysanthemum)for(var e=o.gameScene.GameObjectService.Mounds,t=0;t<e.length;t++){var n=e[t];if(n.Data.HasFlower&&n.View.visible&&n.Data.SeedType==$a.Chrysanthemum){var i=o.gameScene.CharacterService.Elinor.Position.x;Math.abs(i-n.Data.Position.x)<150&&o.completeTask(.5,new Eo(a.InspectChrysanthemum,Ya.Ranger,qa.ElinorsHouse))}}else o.task.Name==a.InspectChrysanthemum&&$a.Unocked[$a.Chrysanthemum]?o.completeTask(.5,new Eo(a.SelectChrysanthemumSeed,Ya.Ranger,qa.ElinorsHouse)):o.task.Name==a.TalkToCamilla?o.completeTask(2,new Eo(a.FindBinoculars,Ya.Camilla,qa.DeepForest)):o.task.Name==a.FindBinoculars&&qo.IsUnlocked(ns.Binoculars)?o.completeTask(5.8,new Eo(a.FindBirds,Ya.Camilla,qa.DeepForest)):o.task.Name==a.TalkToMsMole?o.completeTask(3.5,new Eo(a.FindTorch,Ya.MsMole,qa.NightForest)):o.task.Name==a.FindTorch&&qo.IsUnlocked(ns.Torch)&&o.completeTask(13,new Eo(a.FindOwl,Ya.MsMole,qa.NightForest))},o.onFlowerGrown=function(e,t){var n=o.gameScene.FlowerCount;if(n.Add(t,e),o.task&&o.task.SceneName==o.gameScene.ID)if(o.task.Name==a.GrowFirstFlower)o.completeTask(6.5,new Eo(a.UseShovelForPlanting,Ya.Ranger,qa.ElinorsHouse));else if(o.task.Name==a.WaterAfterDigging)o.completeTask(8,new Eo(a.FindChrysanthemum,Ya.Ranger,qa.ElinorsHouse));else if(o.task.Name==a.GrowChrysanthemumPlant)t==$a.Chrysanthemum?o.completeTask(2,null):Vn.Play("yard_m3_05_fail");else if(o.task.Name==a.HM_Camilla_Flowers)n.Get($a.Bell)>=4&&o.completeTask(.5,null);else if(o.task.Name==a.HM_Mole_Flowers){for(var i=0;i<$a.All.length;i++){var r=$a.All[i];if($a.Unocked[r]&&0==n.Get(r))return}o.completeTask(.5,null)}},o.onSeedSelect=function(e){o.task&&o.task.SceneName==o.gameScene.ID&&o.task.Name==a.SelectChrysanthemumSeed&&e==$a.Chrysanthemum&&o.completeTask(1,new Eo(a.GrowChrysanthemumPlant,Ya.Ranger,qa.ElinorsHouse,!0))},o.onHoleDug=function(){o.task&&o.task.SceneName==o.gameScene.ID&&o.task.Name==a.UseShovelForPlanting&&o.completeTask(2.5,new Eo(a.WaterAfterDigging,Ya.Ranger,qa.ElinorsHouse))},o.onReturnFromScene=function(e){if(o.task&&o.task.SceneName==o.gameScene.ID){var t=o.task.Name;if(e==qa.MagGlassInteraction)t==a.UseMagGlass&&o.completeTask(2,null);else if(e==qa.SieveInteraction)t==a.UseSieve?o.completeTask(8,new Eo(a.FindShovel,Ya.Ari,qa.RiverBank)):t==a.UseSieveAfterShovel?o.completeTask(3,new Eo(a.ViewCollectionBox,Ya.Ari,qa.RiverBank,!0)):t==a.HM_Mole_Sieve&&l.RocksCollected>=2&&o.completeTask(.5,null);else if(e==qa.CollectionBox)t==a.ViewCollectionBox?o.completeTask(3,null):t!=a.HM_SortByShape&&t!=a.HM_Mole_Collection&&t!=a.HM_Tapir_Collection||o.completeTask(.5,null);else if(e==qa.BinocularsInteraction){if(t==a.FindBirds&&l.NewBirdFound){if(l.BlueBirdFound&&l.RedBirdFound&&l.YellowBirdFound)o.completeTask(12,new Eo(a.BirdNotebookInteraction,Ya.Camilla,qa.DeepForest,!0));else{var n=0;n+=l.BlueBirdFound?1:0,n+=l.RedBirdFound?1:0,1==(n+=l.YellowBirdFound?1:0)?Vn.Play("deep_m2_05"):2==n&&Vn.Play("deep_m2_07")}l.NewBirdFound=null}}else e==qa.Notebook?t==a.BirdNotebookInteraction?o.completeTask(2,null):t!=a.HM_DrawFlowers&&t!=a.HM_Mole_Draw&&t!=a.HM_Camilla_Eggs&&t!=a.HM_DrawToad||o.completeTask(.5,null):e==qa.TorchInteraction&&t==a.HM_FindToad&&o.completeTask(.5,null);if(l.LastInteraction){var i=l.LastInteraction;l.LastInteraction="",console.log("LastInteraction: "+i),t==a.HM_Leaf_Spikey?i!=Za.ElmLeaf&&i!=Za.MapleLeaf||o.completeTask(.5,null):t==a.HM_Camilla_Rocks?i!=Za.AntRock&&i!=Za.CaterpillarRock&&i!=Za.Worm&&i!=Za.PillBug||o.completeTask(.5,null):t==a.HM_Tapir_Lizard&&i==Za.Lizard?o.completeTask(.5,null):t==a.FindOwl&&i==Za.Owl?o.completeTask(11,new Eo(a.FindMoth,Ya.MsMole,qa.NightForest)):t==a.FindMoth&&i==Za.Moth?o.completeTask(5,new Eo(a.FindKatydid,Ya.MsMole,qa.NightForest,!0)):t==a.FindKatydid&&i==Za.Katydid?o.completeTask(2,null):t==a.HM_Moms_Caterpillar&&i==Za.CaterpillarBino||t==a.HM_Moms_Bee&&i==Za.Bee||t==a.HM_Camilla_Sap&&i==Za.TreeSap||t==a.HM_Moms_Snail&&i==Za.Snail?o.completeTask(.5,null):t==a.HM_Camilla_Bush&&we.Any(i,[Za.CaterpillarMag,Za.Butterfly,Za.KatydidMag,Za.ToadMag])?o.completeTask(.5,null):t==a.HM_Tapir_Flowers&&we.Any(i,$a.All)?o.completeTask(.5,null):t==a.HM_Sally_Eggs&&i==Za.Nest?o.completeTask(2,null):t==a.HM_Sally_Beetle&&i==Za.BugRed||t==a.HM_Mole_Moth&&i==Za.Moth||t==a.HM_Sally_Ant&&we.Any(i,[Za.AntSingle,Za.AntFood,Za.AntHill])||t==a.HM_Sally_Log&&i==Za.SpiderLog||t==a.HM_Sally_Ant_Carry&&i==Za.AntFood||t==a.HM_Tapir_Water&&i==Za.Fish||t==a.HM_Tapir_Water&&i==Za.Turtle||t==a.HM_Sally_Ant_Hill&&i==Za.AntHill?o.completeTask(.5,null):t==a.HM_FindKatydid&&(i!=Za.ToadTorch&&i!=Za.Katydid||o.completeTask(.5,null))}}},o.distToTaskGiver=function(e){if(e.SceneName==o.gameScene.ID){var t=o.gameScene.CharacterService.Get(e.Giver);return t?t.View.visible||Number.MAX_SAFE_INTEGER:(console.warn("Failed to get giver for: ",e),Number.MAX_SAFE_INTEGER),k.dist(o.gameScene.CharacterService.Elinor.Position,t.Position)}return Number.MAX_SAFE_INTEGER},o.TaskGiverTapped=function(e){if(e.Name==a.GetHelperMission){var n=e.Giver,i=o.gameScene.ID,r=[];if(n==Ya.Sally)r=[a.HM_Sally_Eggs,a.HM_Sally_Beetle,a.HM_Sally_Ant,a.HM_Sally_Ant_Carry,a.HM_Sally_Ant_Hill,a.HM_Sally_Log];else if(n==Ya.SenorTapir)r=[a.HM_Tapir_Water,a.HM_FindToad,a.HM_DrawToad,a.HM_Tapir_Lizard,a.HM_Tapir_Flowers,a.HM_Tapir_Collection];else if(n==Ya.Ranger)r=[a.HM_DrawFlowers,a.HM_SortByShape,a.HM_Moms_Caterpillar,a.HM_Moms_Bee,a.HM_Moms_Snail];else if(n==Ya.Camilla)r=[a.HM_Leaf_Spikey,a.HM_Camilla_Rocks,a.HM_Camilla_Eggs,a.HM_Camilla_Bush,a.HM_Camilla_Sap],$a.Unocked[$a.Bell]&&r.push(a.HM_Camilla_Flowers);else{if(n!=Ya.MsMole)return o.completeTask(.5,null),void console.error("Failed to get helper mission from:",n);r=[a.HM_Mole_Sieve,a.HM_Mole_Collection,a.HM_Mole_Flowers,a.HM_Mole_Moth,a.HM_Mole_Draw,a.HM_FindKatydid]}t.missionId++,console.log("TaskService.missionId: "+t.missionId);var s=r[t.missionId%r.length],l=new Eo(a.GetHelperMission,n,i,!0,!0);l.IsHelperMission=!0,l.Name=s,o.completeTask(.5,l)}},o.gameScene=n,o.nextTaskDelay=.5,o.removeOptionalTasks(n.ID),setTimeout(function(){o.onReturnFromScene(l.PreviousScene),n.Tools.FlowerGrown.Sub(o.onFlowerGrown),n.Tools.SeedSelected.Sub(o.onSeedSelect),n.Tools.HoleDug.Sub(o.onHoleDug)},10),o}return $o(t,e),Object.defineProperty(t.prototype,"Task",{get:function(){return this.task},enumerable:!0,configurable:!0}),t.prototype.SlowUpdate=function(e){this.nextTaskDelay>0?this.nextTaskDelay-=e:this.task?(this.tryProgressTask(),this.repeatMissionInstrux(e)):this.tryGetTask()},t.prototype.Teardown=function(){var e=zo.CurrentTask;e&&e.Name==a.GetHelperMission&&(zo.CurrentTask=null)},t.Start="Start",t.Complete="Complete",t.RepeatInstrux="RepeatInstrux",t.missionId=0,t}(PIXI.utils.EventEmitter),ti=function(){function e(e){var t=this;this.onTaskStart=function(e){var n=t.charService.Get(e.Giver);n&&(n.SpeachBubble.StartTask(e.Name),Ya.IsNPC(n.Name)&&n.View.PlayAnim(es.IDLE,!0))},this.onTaskComplete=function(e){var n=t.charService.Get(e.Giver);n&&n.SpeachBubble.CompleteTask(e)},this.showThoughtBubbles=function(){for(var e=zo.Tasks,n=0;n<e.length;n++){var o=e[n];(i=t.charService.Get(o.Giver))&&i.SpeachBubble.ShowThought()}var i,r=zo.CurrentTask;r&&((i=t.charService.Get(r.Giver))&&i.SpeachBubble.StartTask(r.Name))},this.updateBubbleSizes=function(){for(var e=t.charService.Elinor.Position.x,n=0;n<t.charService.Charachters.length;n++){var o=t.charService.Charachters[n];if(o.View.visible&&o.SpeachBubble.visible){var i=Math.abs(e-o.Position.x);o.SpeachBubble.UpdateDist(i)}}},this.gameScene=e,this.charService=e.CharacterService,this.showThoughtBubbles();var n=this.gameScene.TaskService;n.on(ei.Start,this.onTaskStart),n.on(ei.Complete,this.onTaskComplete)}return e.prototype.SlowUpdate=function(e){this.updateBubbleSizes()},e}(),ni=function(){return function(){var e=this;this.Get=function(t){return e.flowerCount[t]},this.GetTotal=function(t){for(var n=0,o=0;o<$a.All.length;o++)n+=e.flowerCount[$a.All[o]];return n},this.flowerCount={},this.Reset=function(){e.flowerCount={};for(var t=0;t<$a.All.length;t++)e.flowerCount[$a.All[t]]=0},this.Add=function(t,n){void 0===n&&(n=1),e.flowerCount[t]+=n},this.Reset()}}(),oi=function(){return function(e){var t=this;this.OnFlowerGrown=function(e,n){n==$a.Cosmos&&t.requirementsFulfilled(n,Za.Bee,3)?t.addBeeToLevel():n==$a.Bell&&t.requirementsFulfilled(n,Za.Butterfly,4)&&t.addButterflyToLevel()},this.requirementsFulfilled=function(e,n,o){for(var i=t.gameObjects.InteractionPoints,r=0;r<i.length;r++)if(i[r].Data.Name==n)return;var a=0,s=t.gameObjects.Mounds;for(r=0;r<s.length;r++)s[r].Data.HasFlower&&s[r].Data.SeedType==e&&a++;return a>=o},this.addBeeToLevel=function(){var e=t.charService.Elinor.Position;e.x+=k.Range(-50,50),e.y-=50;var n=new So(e);t.gameObjects.AddInteractionPoint(n)},this.addButterflyToLevel=function(){var e=t.charService.Elinor.Position;e.x+=k.Range(-50,50),e.y-=50;var n=new no(e);t.gameObjects.AddInteractionPoint(n)},this.gameObjects=e.GameObjectService,this.charService=e.CharacterService}}(),ii=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ri=function(e){function t(t){var n=e.call(this)||this;return n.Get=function(e){for(var t=0;t<n.Charachters.length;t++)if(n.Charachters[t].Name==e)return n.Charachters[t];return null},n.AddViewsToLevel=function(e){for(var t in e.AddObject(n._elinor.Destview),n.Charachters)e.AddObject(n.Charachters[t].View),e.AddObject(n.Charachters[t].Shadow)},n.restoreCharsFromData=function(e){n.Charachters=[];for(var t=0;t<e.Chars.length;t++){var o=void 0;e.Chars[t].Name==Ya.Elinor?(o=new $e(e.Chars[t]),n._elinor=o):o=e.Chars[t].Name==Ya.SenorTapir?new tt(e.Chars[t]):new Ze(e.Chars[t]),n.Charachters.push(o)}},n.setupElinorOliveAndAri=function(){n._elinor.on("stop",function(){return n.emit("groupStopped")}),n._elinor.View.on("pointertap",function(){return n.emit("mainCharTapped",Ya.Elinor)});var e=n.Get(Ya.Olive),t=n.Get(Ya.Ari);e&&l.OliveUnlocked?(e.SetTarget(n._elinor),e.View.on("pointertap",function(){return n.emit("mainCharTapped",Ya.Olive)}),t&&l.AriUnlocked&&(t.SetTarget(e),t.View.on("pointertap",function(){return n.emit("mainCharTapped",Ya.Ari)}))):t&&l.AriUnlocked&&(t.SetTarget(n._elinor),t.View.on("pointertap",function(){return n.emit("mainCharTapped",Ya.Ari)}))},n.restoreCharsFromData(t),n.setupElinorOliveAndAri(),n}return ii(t,e),Object.defineProperty(t.prototype,"Elinor",{get:function(){return this._elinor},enumerable:!0,configurable:!0}),t.prototype.Update=function(e){for(var t in this.Charachters)this.Charachters[t].Update(e)},t.prototype.SlowUpdate=function(e){for(var t=0;t<this.Charachters.length;t++){if(this.Charachters[t].Name!=Ya.Elinor)Math.abs(this.Charachters[t].Position.x-this.Elinor.Position.x)>350||this.Charachters[t].SetHeading(this.Elinor.Position.x>this.Charachters[t].Position.x)}},t}(U.EventEmitter),ai=function(){function e(e,t){this.speed=5,this.desiredX=0,this.panX=0,this.charService=e.CharacterService,this.gameSceneView=e.View,this.worldWidthClamp=-(t-za.Width),this.Update(1e3)}return e.prototype.Update=function(e){if(this.panning)this.gameSceneView.SetXPos(this.panX);else{var t=k.clamp(za.Width/2-this.charService.Elinor.Position.x,this.worldWidthClamp,0);this.desiredX=k.lerp(this.desiredX,t,e*this.speed),this.gameSceneView.SetXPos(this.desiredX)}},e.prototype.IntroPan=function(){var e=this;this.panning=!0;var t=k.clamp(za.Width/2-this.charService.Elinor.Position.x,this.worldWidthClamp,0);this.panX=t;var n=new O.h;n.to(this,2,{panX:-1200,ease:O.e.easeInOut}),n.to(this,2,{panX:t,ease:O.e.easeInOut},3.5),n.add(function(){return e.panning=!1})},e}(),si=function(){function e(e){var t=this;this.onPause=function(){PIXI.ticker.shared.stop(),O.i.pauseAll(),Hn.OnPause(),PIXI.spine.Spine.globalAutoUpdate=!1},this.onResume=function(){PIXI.ticker.shared.start(),O.i.resumeAll(),Hn.OnResume(),PIXI.spine.Spine.globalAutoUpdate=!0},this.srApp=e,e.state.pause.subscribe(function(e,n){e&&!n?t.onPause():!e&&n&&t.onResume()}),fe(window).focus(function(){e.state.pause.value=!1}).blur(function(){e.state.pause.value=!0})}return Object.defineProperty(e.prototype,"IsPaused",{get:function(){return this.srApp.state.pause.value},enumerable:!0,configurable:!0}),e}(),li=function(){function e(){}return Object.defineProperty(e,"IsDebug",{get:function(){return e.isDebug},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Version",{get:function(){return e.version},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AestTime",{get:function(){return e.aestTime},enumerable:!0,configurable:!0}),Object.defineProperty(e,"NyTime",{get:function(){return e.nyTime},enumerable:!0,configurable:!0}),Object.defineProperty(e,"GitRev",{get:function(){return e.gitRev},enumerable:!0,configurable:!0}),e.Init=function(t){var n="assets/config/buildInfo.json?"+Math.random();fe.ajax({url:n,dataType:"json",success:function(n){e.isDebug="dev"==n.env,e.version=n.version,e.aestTime=n.aestTime,e.nyTime=n.nyTime,e.gitRev=n.shortRev,t()},error:function(){console.error("Build Info not present."),t()}})},e.showNavigationButtons=!1,e.dragToMoveEnabled=!0,e.FastWalk=!1,e}(),ci=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ui=function(e){function t(t,n){var o=e.call(this)||this;return o.leftDist=450,o.SlowUpdate=function(e){if(""!=o.zoneToLeft&&o.elinor.Position.x<o.leftDist){if(o.warningInProgress)return;o.stopPlayerFromLeaving()?o.warnPlayer():o.navigateTo(o.zoneToLeft,"right")}""!=o.zoneToRight&&o.elinor.Position.x>o.rightDist&&o.navigateTo(o.zoneToRight,"left")},o.stopPlayerFromLeaving=function(){return!l.GameComplete&&!o.warningPlayed},o.warnPlayer=function(){o.warningInProgress=!0,o.elinor.Stop(),o.gameScene.GameInput.SetEnabled(!1),o.gameScene.GameUI.SetEnabled(!1),O.i.to(o.gameScene.View.scale,.5,{x:1.5,y:1.5,ease:O.e.easeInOut});o.gameScene.CharacterService.Get(Ya.Olive);O.i.delayedCall(.5,function(){o.elinor.SetHeading(!0),Vn.Play("mission_keep_going")}),O.i.delayedCall(3.5,function(){var e=new r.Point(1.5*o.leftDist,o.elinor.Position.y);o.elinor.SetDestination(e)}),O.i.delayedCall(5,function(){o.gameScene.GameInput.SetEnabled(!0),o.gameScene.GameUI.SetEnabled(!0),O.i.to(o.gameScene.View.scale,1,{x:1,y:1,ease:O.e.easeInOut})}),O.i.delayedCall(5.2,function(){o.warningPlayed=!0,o.warningInProgress=!1})},o.navigateTo=function(e,t){zo.SaveLevelLayout(o.gameScene),zo.SetCharPos(e,t),o.gameScene.SceneService.NavigateTo(e)},o.gameScene=t,o.elinor=t.CharacterService.Elinor,o.zoneToLeft=n.ZoneToLeft,o.zoneToRight=n.ZoneToRight,o.rightDist=n.Width-o.leftDist,o}return ci(t,e),t}(PIXI.utils.EventEmitter),pi=function(){function e(){}return e.appName="elinor-app",e.Init=function(t){e.implementation=t,window.onbeforeunload=function(){e.send("endGame")}},e.Send=function(t,n,o){e.send(t,n,o)},e.EnterArea=function(t){e.send("startLevel",t)},e.TutorialBegin=function(t,n){e.send("tutorial_begin",t,n)},e.TutorialComplete=function(t,n){e.send("tutorial_complete",t,n)},e.SelectContent=function(t){e.send("select_content",t)},e.UseTool=function(t,n){e.send("tool_used",t+" used on "+n)},e.ToolFail=function(t){e.send("startIncorrectFeedback",t+" used without target")},e.CharInteraction=function(t){e.send("character_interaction",t)},e.TaskStarted=function(t){e.send("mission_start",t),e.send("startInstruction",t)},e.TaskCompleted=function(t){e.send("mission_complete",t)},e.send=function(t,n,o){e.implementation?(console.log("Analytics::send::",t,n),e.implementation.event(e.appName,t,n,o)):console.error("Analytics service has not been initialized.")},e}(),di=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hi=function(e){function t(){var t=e.call(this)||this;return t.Play=function(e){t.bg.alpha=0,t.tool.alpha=0,t.tool.scale.set(.5),t.tool.position=t.center,t.tool.texture=X.Get("toolIcon_"+e),t.visible=!0,t.tl&&t.tl.kill(),t.tl=new O.h;var n=w.lowEndDevice?.4:.01;t.tl.to(t.bg,.3,{alpha:n},0),t.tl.to(t.bg,.3,{alpha:0},1.4),t.tl.to(t.tool,.3,{alpha:1},.3),t.tl.to(t.tool.scale,.3,{x:2.5,y:2.5,ease:O.a.easeOut.config(1.7)},.3),t.tl.to(t.tool,.2,{y:600},1.3),t.tl.to(t.tool.scale,.2,{x:1,y:1},1.4),t.tl.to(t.tool,.1,{alpha:0},1.4),O.i.delayedCall(.3,function(){var e=new ce("stickerBurst",t.center,"stickerBurst");e.emitter.playOnceAndDestroy(),t.addChild(e),t.setChildIndex(t.tool,t.children.length-1)}),O.i.delayedCall(2,function(){return t.visible=!1})},t.center=new r.Point(za.Width/2,za.Height/2),t.bg=new r.Sprite(X.Get("2PixelRect")),t.bg.scale.set(t.center.x,t.center.y),t.bg.interactive=!0,t.bg.tint=0,t.addChild(t.bg),t.tool=new r.Sprite(X.Get("toolIcon_magnifyingGlass")),t.tool.scale.set(t.center.x,t.center.y),t.tool.position=t.center,t.tool.anchor.set(.5),t.addChild(t.tool),t.visible=!1,t}return di(t,e),t}(r.Container),fi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gi=function(e){function t(){var t=e.call(this)||this;t.Init=function(e){t.ArrowButtons.Init(e.CharacterService),t.ToolBarView.Init(e),t.offscreenTaskHint.Init(e),li.IsDebug&&(t.debugMenu=new me(e),t.addChild(t.debugMenu))},t.SetEnabled=function(e){t.ToolBarView.SetEnabled(e),t.MapBtn.interactive=e,t.ArrowButtons.SetEnabled(e)},t.Update=function(e){t.ArrowButtons.Update(e)},t.UnlockTool=function(e){t.pickupPayoff.Play(e)},t.OnMissionComplete=function(e){t.payoffAnim?(t.payoffAnim.visible=!0,t.payoffAnim.state.setAnimation(0,e,!1),O.i.delayedCall(4,function(){return t.payoffAnim.visible=!1}),Ko.Play("mission_complete")):console.error("Mission Payoff, hasnt loaded.")},t.UpdateHints=function(e){t.ToolBarView.UpdateHints(e)},t.Hide=function(){O.i.to(t.ToolBarView,.5,{y:200,ease:O.e.easeOut})},t.Show=function(){O.i.to(t.ToolBarView,1,{y:0,ease:O.e.easeOut})};var n=new r.Sprite(X.Get("homeButton"));return n.position=new r.Point(240,70),n.interactive=!0,n.buttonMode=!0,n.anchor.set(.5),t.MapBtn=new Z("mapBtn",za.Width/2+420,70),t.MapBtn.visible=!1,t.addChild(t.MapBtn),t.ArrowButtons=new Pe,t.addChild(t.ArrowButtons),t.ToolBarView=new oe,t.addChild(t.ToolBarView),t.offscreenTaskHint=new pe,t.addChild(t.offscreenTaskHint),t.pickupPayoff=new hi,t.addChild(t.pickupPayoff),b.Get("RewardGeneric")&&(t.payoffAnim=new PIXI.spine.Spine(b.Get("RewardGeneric")),t.payoffAnim.position.set(za.Width/2,za.Height/2),t.payoffAnim.visible=!1,t.addChild(t.payoffAnim)),t}return fi(t,e),t.prototype.SlowUpdate=function(e){this.offscreenTaskHint.SlowUpdate(e),this.MapBtn.visible=qo.MapUnlocked,this.ArrowButtons.SlowUpdate(e)},t}(r.Container),mi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_i=function(e){function t(){var t=e.call(this)||this;return t.addGameInfo=function(){var e=new r.Text("Version: "+li.Version+" ("+li.GitRev+")",{fill:5066061});e.x=za.Width/2-450,e.y=620,t.addChild(e);var n=new r.Text("Melbourne: "+li.AestTime,{fill:13421772});n.x=za.Width/2-450,n.y=660,t.addChild(n);var o=new r.Text("NY: "+li.NyTime,{fill:5066061});if(o.x=za.Width/2+150,o.y=660,t.addChild(o),Ln.HasValidSave()){var i=r.Sprite.fromImage("./assets/images/ui/clearCache.png");i.position.set(za.Width/2-450,10),i.alpha=.3,i.interactive=!0,i.scale.set(.5),t.addChild(i),i.once("pointertap",function(){localStorage.clear(),location.reload()})}},t.BG=new r.Sprite(X.Get("SplashScreen")),t.BG.position.set(za.Width/2,za.Height/2),t.BG.anchor.set(.5,.5),t.addChild(t.BG),t.PlayBtn=new Y("StartButton",za.Width/2+4,za.Height/2+20),t.addChild(t.PlayBtn),li.IsDebug&&t.addGameInfo(),t}return mi(t,e),t}(r.Container),yi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vi=function(e){function t(){var t=e.call(this)||this;t.ShowQuestHelper=function(e){var n=new r.Sprite(X.Get("MapIndicator_"+e.Giver));n.anchor.set(.5),n.scale.set(.9),t.buttonCont.addChild(n),e.SceneName==qa.Clubhouse?n.position.set(570,240):e.SceneName==qa.RiverBank?n.position.set(830,270):e.SceneName==qa.ElinorsHouse?n.position.set(700,580):e.SceneName==qa.DeepForest?n.position.set(610,440):e.SceneName==qa.NightForest?n.position.set(370,430):n.visible=!1},t.MoveElinor=function(e){var n=t.getEliPos(e);if(k.dist(n,t.eliHead)>30){var o=new O.h;o.to(t.eliHead.scale,.2,{x:0,y:0,ease:O.g.easeIn},.1),o.to(t.eliHead,.01,{x:n.x,y:n.y,ease:O.a.easeOut.config(1)},.3),o.to(t.eliHead.scale,.25,{x:1,y:1,ease:O.a.easeOut.config(1)},.35)}},t.DisableInput=function(){t.LvlBtnClubhouse.interactive=!1,t.LvlBtnRiverBank.interactive=!1,t.LvlBtnElinorsHouse.interactive=!1,t.LvlBtnDeepForest.interactive=!1,t.LvlBtnNightForest.interactive=!1},t.PlayPayoff=function(){t.buttonCont.visible=!1;var e=new ce("GoldStar",new r.Point(565,350),"GoldStar");t.addChild(e);var n=new PIXI.spine.Spine(b.Get("MapPayoff"));n.visible=!1,n.x=140,t.addChild(n),Vn.Play("final_unlock_2"),O.i.delayedCall(1.5,function(){n.visible=!0,n.state.setAnimation(0,"Payoff",!1),Ko.Play("map_unlock")}),O.i.delayedCall(2.6,function(){e.emitter.playOnceAndDestroy()}),O.i.delayedCall(6.7,function(){n.visible=!1,t.buttonCont.visible=!0})},t.getEliPos=function(e){return e==qa.RiverBank?new r.Point(950,280):e==qa.ElinorsHouse?new r.Point(850,540):e==qa.DeepForest?new r.Point(480,550):e==qa.NightForest?new r.Point(370,280):new r.Point(700,190)};var n=new PIXI.Sprite(X.Get("MapScreen"));return t.addChild(n),t.buttonCont=new r.Container,t.buttonCont.position.set(140,0),t.addChild(t.buttonCont),t.CloseBtn=new Y("tickBtn",1e3,620),t.buttonCont.addChild(t.CloseBtn),t.LvlBtnNightForest=new Z("Circle5",450,364),t.LvlBtnNightForest.visible=l.VisitedAreas[qa.NightForest],t.buttonCont.addChild(t.LvlBtnNightForest),t.LvlBtnDeepForest=new Z("Circle4",575,510),t.LvlBtnDeepForest.visible=l.VisitedAreas[qa.DeepForest],t.buttonCont.addChild(t.LvlBtnDeepForest),t.LvlBtnElinorsHouse=new Z("Circle3",765,530),t.LvlBtnElinorsHouse.visible=l.VisitedAreas[qa.ElinorsHouse],t.buttonCont.addChild(t.LvlBtnElinorsHouse),t.LvlBtnRiverBank=new Z("Circle2",857,353),t.LvlBtnRiverBank.visible=l.VisitedAreas[qa.RiverBank],t.buttonCont.addChild(t.LvlBtnRiverBank),t.LvlBtnClubhouse=new Z("Circle1",655,277),t.buttonCont.addChild(t.LvlBtnClubhouse),t.eliHead=new r.Sprite(X.Get("MapIndicator_elinor")),t.eliHead.anchor.set(.5),t.eliHead.scale.set(0),t.buttonCont.addChild(t.eliHead),(new O.h).to(t.eliHead.scale,.25,{x:.9,y:.9,ease:O.a.easeOut.config(1)},.5),t.eliHead.position=t.getEliPos(l.PreviousScene),t}return yi(t,e),t}(r.Container),bi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wi=function(e){function t(){var t=e.call(this)||this;t.sortDelay=0,t.MaxSortDelay=.2,t.AddLayer=function(e,n){t.artLayers.push(e),t.layerSpeeds.push(n),e.y=-za.Height/2,t.addChild(e),n<=1&&Be.BringToFront(t.objectLayer)},t.Update=function(e){t.sortDelay-=e,t.sortDelay<0&&(t.sortDelay=t.MaxSortDelay,t.SortObjectLayer())},t.SetXPos=function(e){t.objectLayer.x=e-t.halfWidth,t.bgObjectLayer.x=e-t.halfWidth;for(var n=0;n<t.artLayers.length;n++)t.artLayers[n].x=e*t.layerSpeeds[n]-t.halfWidth},t.AddObject=function(e,n){void 0===n&&(n=!0),e?(t.objectLayer.addChild(e),n&&t.SortObjectLayer()):console.error("Failed to add object to game scene.")},t.AddLantern=function(e){t.objectLayer.addChild(e.View)},t.AddObjectToBackground=function(e,n){t.bgObjectLayer.addChild(e),t.setChildIndex(t.bgObjectLayer,n)},t.AddClubhouse=function(e){t.artLayers[2].addChild(e)},t.RemoveObj=function(e){t.objectLayer.removeChild(e)},t.SortObjectLayer=function(){t.objectLayer.children.sort(function(e,t){var n=e.zIndex||0,o=t.zIndex||0;return e.y+n-(t.y+o)})};var n=za.Height/2;return t.halfWidth=za.Width/2,t.position=new r.Point(t.halfWidth,n),t.objectLayer=new r.Container,t.objectLayer.y=-n,t.addChild(t.objectLayer),t.bgObjectLayer=new r.Container,t.bgObjectLayer.y=-n,t.addChild(t.bgObjectLayer),t.artLayers=[],t.layerSpeeds=[],t}return bi(t,e),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.objectLayer.x},enumerable:!0,configurable:!0}),t}(r.Container),Si=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ki=function(e){function t(t,n){var o=e.call(this)||this;o.bookIndexPos=.5*za.Width,o.bookEntryPos=.62*za.Width,o.paletteIndexPos=-200,o.paletteEntryPos=483,o.GotoIndex=function(){o.NotebookView.ShowIndex(),o.LeaveButton.visible=!0,o.animatePages(o.bookIndexPos,o.paletteIndexPos)},o.GotoEntry=function(e){o.entry=e,o.LeaveButton.visible=!1,o.Palette.ShowEntry(!1),o.NotebookView.ShowEntry(e),o.animatePages(o.bookEntryPos,o.paletteEntryPos),o.NotebookView.UpdateTemplate(e)},o.UpdateTemplate=function(e){o.NotebookView.StickerActivity.UpdateTemplate(e),o.NotebookView.DrawingActivity.UpdateTemplate(e),o.NotebookView.UpdateTemplate(o.entry)},o.GotoStickers=function(){o.Palette.ToggleViews(!0),o.NotebookView.DrawingActivity.Disable(),o.NotebookView.StickerActivity.Enable()},o.GotoDrawing=function(){o.Palette.ToggleViews(!1),o.NotebookView.StickerActivity.Disable(),o.NotebookView.DrawingActivity.Enable()},o.animatePages=function(e,t,n){if(void 0===n&&(n=!0),n){var i=new O.h;i.to(o.NotebookView,.2,{x:e,ease:O.a.easeOut},0),i.to(o.Palette,.2,{x:t,ease:O.a.easeOut},0)}else o.NotebookView.x=e,o.Palette.x=t},o.entry=t;var i=new r.Sprite(X.Get("uiBackground"));i.x=za.Width/2,i.anchor.set(.5,0),i.scale.set(1.25),o.addChild(i),o.Palette=new He,o.addChild(o.Palette),o.NotebookView=new Le(t,n),o.addChild(o.NotebookView),o.LeaveButton=new Y("tickBtn",1080,600),o.addChild(o.LeaveButton);var a=za.Height/2;return null!=o.entry?(o.NotebookView.position.set(o.bookEntryPos,a),o.Palette.position.set(o.paletteEntryPos,a),o.LeaveButton.visible=!1,o.Palette.ShowEntry(!1),o.NotebookView.ShowEntry(o.entry)):(o.NotebookView.position.set(o.bookIndexPos,a),o.Palette.position.set(o.paletteIndexPos,a),o.NotebookView.ShowIndex()),o}return Si(t,e),t}(r.Container),Ti=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ci=function(e){function t(){var t=e.call(this)||this;t.dragStart=-1,t.HardMin=210,t.SoftMin=240,t.HardMax=856,t.SoftMax=730,t.onDragStart=function(e){e.data.isPrimary&&(t.dragStart=e.data.getLocalPosition(t.parent).x,Ko.Play(Se.Any("measure_slow_extend","measure_fast_extend"),k.Range(.2,.5)))},t.onDragMove=function(e){if(e.data.isPrimary&&-1!=t.dragStart){var n=e.data.getLocalPosition(t.parent).x-t.dragStart;t.tape.x=k.clamp(t.tape.x+n,t.HardMin,t.HardMax),t.dragStart=e.data.getLocalPosition(t.parent).x}},t.onDragEnd=function(e){if(e.data.isPrimary)if(t.dragStart=-1,t.tape.x<t.SoftMin){var n=.8*(t.SoftMin-t.tape.x)+t.SoftMin;O.i.to(t.tape,.2,{x:n,ease:O.a.easeOut.config(1.7)}),Ko.Play("measure_snap_back",.3)}else t.tape.x>t.SoftMax&&(O.i.to(t.tape,.15,{x:t.SoftMax-50,ease:O.a.easeOut.config(1.7)}),Ko.Play("measure_snap_back",.3))},t.position.set(137,0);var n=r.Sprite.fromImage("assets/images/2PixelRect.png");n.position.set(200,50),n.scale.set(420,44),t.addChild(n),t.tape=new r.Sprite(X.Get("Tape")),t.tape.anchor.set(0,.5),t.tape.mask=n,t.tape.position.set(550,95),t.addChild(t.tape);var o=new r.Sprite(X.Get("TapeMeasure"));o.position.set(850,35),t.addChild(o);var i=new r.Sprite(X.Get("BoxTop"));i.position.set(198,52),t.addChild(i);var a=new r.Sprite(X.Get("light"));a.scale.x=0,a.position.set(580,67),t.addChild(a);var s=new r.Sprite(X.Get("light2"));return s.anchor.set(.5),s.position.set(550,73),s.scale.set(0),t.addChild(s),O.i.to(a,.3,{x:750,delay:.5}),O.i.to(a.scale,.15,{x:1,delay:.5}),O.i.to(a,.15,{alpha:0,delay:.65}),O.i.to(s.scale,.2,{x:1,y:1,delay:.9}),O.i.to(s,.4,{rotation:-2,delay:.9}),O.i.to(s.scale,.2,{x:0,y:0,delay:1.2}),t.tape.x=t.SoftMax,O.i.to(t.tape,.6,{x:t.SoftMin+50,delay:.5,ease:O.a.easeOut.config(1.7)}),Ko.Play(Se.Any("measure_slow_extend","measure_fast_extend"),k.Range(.2,.5)),t.tape.interactive=!0,t.tape.buttonMode=!0,t.tape.on("pointerdown",t.onDragStart).on("pointerup",t.onDragEnd).on("pointerupoutside",t.onDragEnd).on("pointermove",t.onDragMove),t}return Ti(t,e),t.prototype.Update=function(e){if(this.tape.x<this.SoftMin){var t=1-(this.tape.x-this.HardMin)/(this.SoftMin-this.HardMin);this.tape.scale.y=k.lerp(1,.85,t),t*=2;var n=95+k.Range(-t,t);this.tape.y=n}else if(this.tape.x>this.SoftMax){t=(this.tape.x-this.SoftMax)/(this.HardMax-this.SoftMax),n=95+k.Range(-t,t);this.tape.y=n}else this.tape.scale.y=1,this.tape.y=95},t}(r.Container),Pi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bi=function(e){function t(){var t=e.call(this)||this;return t.RockPickedUp=new ve,t.RockPlaced=new ve,t.setupBox=function(){var e=new r.Sprite(X.Get("uiBackground"));e.x=za.Width/2,e.anchor.set(.5,0),e.scale.set(1.25),t.addChild(e),t.boxView=new r.Container,t.boxView.x=-50,t.addChild(t.boxView);var n=new PIXI.Sprite(X.Get("Box"));n.x=za.Width/2,n.anchor.set(.5,0),t.boxView.addChild(n),t.tapeMeasure=new Ci,t.boxView.addChild(t.tapeMeasure),t.topArea=new r.Container,t.boxView.addChild(t.topArea);var o=new r.Sprite(X.Get("DivMid"));o.position.set(367,428),t.boxView.addChild(o),t.botArea=new r.Container,t.boxView.addChild(t.botArea);var i=new r.Sprite(X.Get("DivBot"));i.position.set(357,645),t.boxView.addChild(i);var a=new r.Sprite(X.Get("Card1"));a.position.set(632,422),t.boxView.addChild(a);var s=new r.Sprite(X.Get("Card2"));s.position.set(877,422),t.boxView.addChild(s);var l=new r.Sprite(X.Get("Card3"));l.position.set(1047,422),t.boxView.addChild(l),t.aboveAll=new r.Container,t.boxView.addChild(t.aboveAll)},t.addRocks=function(){t.Rocks=[];for(var e=0;e<as.Unlocked.length;e++){var n=as.Unlocked[e];n.xPos||(n.xPos=k.Range(450,1185),n.yPos=k.Range(300,400),n.Area=-1),t.AddRock(n)}},t.AddRock=function(e){var n=new fn(e);t.Rocks.push(n),n.PickedUp.Sub(t.onRockPickedUp),n.Placed.Sub(t.onRockPlaced),-1==n.CurrentArea?t.topArea.addChild(n):t.botArea.addChild(n)},t.onRockPickedUp=function(e,n){e.setParent(t.aboveAll),t.RockPickedUp.Dispatch(e,n),t.selectedRock=e},t.onRockPlaced=function(e,n){-1==n?e.setParent(t.topArea):e.setParent(t.botArea),t.RockPlaced.Dispatch(e,n),t.selectedRock=null},t.alignRock=function(e){t.selectedRock&&t.selectedRock.y<250&&t.selectedRock.Align(e)},t.SavePos=function(){for(var e=0;e<as.Unlocked.length;e++)as.Unlocked[e].xPos=t.Rocks[e].position.x,as.Unlocked[e].yPos=t.Rocks[e].position.y,as.Unlocked[e].Area=t.Rocks[e].CurrentArea},t.setupBox(),t.addRocks(),t.CloseBtn=new Y("tickBtn",-200,620),t.CloseBtn.scale.set(.8),t.addChild(t.CloseBtn),t}return Pi(t,e),t.prototype.Update=function(e){this.tapeMeasure.Update(e),this.alignRock(e),this.CloseBtn.x=Math.min(za.Width-(Dn.Offset+100),1300)},t}(r.Container),Ii=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ai=function(e){function t(t){var n=e.call(this)||this;return n.OnReturn=new ve,n.OnGotoNotebook=new ve,n.ShowNextBtn=function(){n.TickBtn.scale.set(0),n.TickBtn.visible=!0,O.i.to(n.TickBtn.scale,.2,{x:1,y:1,ease:O.a.easeOut.config(1.7)});var e=new ce("stickerBurst",n.TickBtn.position);e.scale.set(1.4),e.emitter.playOnceAndDestroy(),n.addChild(e)},n.ShowNotebookBtn=function(){console.error("TODO implement!")},n.TickBtn=new Y("tickBtn",za.Width/2+420,650),n.TickBtn.once("pointertap",n.OnReturn.Dispatch),n.TickBtn.visible=!1,n.addChild(n.TickBtn),n.NotebookBtn=new Y("tickBtn",n.TickBtn.x,n.TickBtn.y),n.NotebookBtn.visible=!1,n.addChild(n.NotebookBtn),n.CloseBtn=new Y("closeBtn",za.Width/2-420,60),n.CloseBtn.once("pointertap",n.OnReturn.Dispatch),n.CloseBtn.visible=l.CompletedInteractions[t],n.addChild(n.CloseBtn),n}return Ii(t,e),t}(r.Container),Oi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mi=function(e){function t(t){var n=e.call(this)||this;return n.OnObjFound=new ve,n.PlayDragTut=function(){n.dragHand=new r.Sprite(X.Get("pointHand")),n.dragHand.position.set(1100,600),n.dragHand.anchor.set(.8,.8),n.dragHand.scale.set(.5),n.dragHand.alpha=0,n.addChild(n.dragHand),n.dragTut=new O.h({repeat:-1,repeatDelay:2}),n.dragTut.to(n.dragHand,.2,{alpha:1,ease:O.a.easeOut},0),n.dragTut.to(n.dragHand.scale,.2,{x:1,y:1,ease:O.a.easeOut},0),n.dragTut.to(n.dragHand,.2,{rotation:-.3,ease:O.a.easeOut},.5),n.dragTut.to(n.dragHand,1,{x:740,y:360,ease:O.a.easeOut},.8),n.dragTut.to(n.dragHand,.3,{alpha:0,ease:O.a.easeOut},1.7)},n.Teardown=function(){n.stopHandAnim()},n.stopHandAnim=function(){n.dragTut&&(n.dragTut.kill(),n.dragHand.visible=!1,n.dragTut=null)},n.initArt=function(e){var t=n.initBackground(e),o=n.initMagified(e);n.magGlass=new Te(1200,850,o,t),n.addChild(n.magGlass),n.magGlass.once("objDiscovered",n.OnObjFound.Dispatch),n.magGlass.once("pointerdown",n.stopHandAnim),n.magGlass.scale.set(.6),n.magGlass.position=new r.Point(1050,890);var i=new O.h;i.to(n.magGlass,.5,{x:900,y:510,ease:O.a.easeOut.config(1)},.3),i.to(n.magGlass.scale,.5,{x:.5,y:.5,ease:O.a.easeOut.config(1)},.3),t.scale.set(1.25),i.to(t.scale,.5,{x:1.4,y:1.4,ease:O.a.easeOut.config(1)},.3),n.magGlass.interactive=!1,O.i.delayedCall(1,function(){return n.magGlass.interactive=!0})},n.initBackground=function(e){var t=new r.Container;t.position.set(za.Width/2,za.Height/2),n.addChild(t);var o,i=new PIXI.Sprite(X.Get("uiBackground"));return i.y=-za.Height/2,i.anchor.set(.5,0),t.addChild(i),o=e==Za.BugRed||e==Za.BugYellow||e==Za.BugOrange||e==Za.BugWings?new r.Sprite(X.Get("LadybugSmall")):e==Za.ToadMag||e==Za.ToadStandalone?new r.Sprite(X.Get("SmallToad")):new r.Sprite(X.Get(e+"MagnifySmall")),t.addChild(o),e==Za.Fish||e==Za.Turtle?(o.y=-za.Height/2,o.anchor.set(.5,0)):e==Za.TreeSap?(o.y=-za.Height/2,o.anchor.set(.5,0)):e==Za.Chrysalis?(o.anchor.set(.5,0),o.y=-450):(o.anchor.set(.5),o.y=50),t},n.initMagified=function(e){var t=new r.Container;if(n.addChild(t),e==Za.Turtle||e==Za.Fish||e==Za.LizardLog){var o=new r.Sprite(X.Get("2PixelRect"));o.position.set(za.Width/2,za.Height/2),o.scale.set(za.Width,za.Height),o.anchor.set(.5),t.addChild(o),console.log("whiteBG.scale"),console.log(o.scale)}if(e==Za.Turtle)(_=new r.Sprite(X.Get(e+"Magnify"))).position.set(za.Width/2,.66*za.Height),_.anchor.set(.5),t.addChild(_);else if(e==Za.LizardLog){(s=new PIXI.spine.Spine(b.Get("LizardLogMagnify"))).position.set(za.Width/2,400),s.state.setAnimation(0,"animation",!0),t.addChild(s)}else if(e==Za.Fish){(g=new r.Sprite(X.Get("Water"))).position.set(675,360),g.anchor.set(.5),t.addChild(g);var i=new PIXI.spine.Spine(b.Get("Fish"));i.state.setAnimation(0,"animation",!0),t.addChild(i)}else if(e==Za.Snail){(c=new PIXI.Sprite(X.Get("uiBackground"))).position.set(za.Width/2,.2*za.Height),c.scale.set(4),c.anchor.set(.5),t.addChild(c),l.InteractionID++;var a=l.InteractionID%2,s=Se.Any("Idle","IdleSlime");(f=new PIXI.spine.Spine(b.Get("Snail"))).state.setAnimation(0,["Idle","IdleSlime"][a],!0),f.position.set(700,530),t.addChild(f)}else{var c;if((c=new PIXI.Sprite(X.Get("uiBackground"))).position.set(za.Width/2,.2*za.Height),c.scale.set(4),c.anchor.set(.5),t.addChild(c),e==Za.Chrysalis){var u=new r.Sprite(X.Get("ChrysalisMagnify"));u.position.set(675,360),u.anchor.set(.5),t.addChild(u);var p=new PIXI.spine.Spine(b.Get(Za.Chrysalis));p.state.setAnimation(0,"animation",!0),p.position.set(700,530),t.addChild(p)}else if(e==Za.BugRed||e==Za.BugYellow||e==Za.BugOrange||e==Za.BugWings){var d=new PIXI.spine.Spine(b.Get("LadybugLarge"));d.state.setAnimation(0,"animation",!0),d.position.set(700,530),t.addChild(d)}else if(we.Any(e,[Za.AntSingle,Za.AntFood])){var h=new PIXI.spine.Spine(b.Get("AntBig"));h.state.setAnimation(0,e,!0),h.position.set(700,530),t.addChild(h)}else if(e==Za.AntHill)n.anim=new PIXI.spine.Spine(b.Get("AntHillObs")),n.anim.position.set(700,530),t.addChild(n.anim);else if(e==Za.Snail){var f;s=Se.Any("Idle","IdleSlime");(f=new PIXI.spine.Spine(b.Get("Snail"))).state.setAnimation(0,s,!0),f.position.set(700,530),t.addChild(f)}else if(e==Za.ToadMag||e==Za.ToadStandalone){var g;(g=new r.Sprite(X.Get("ToadBG"))).position.set(690,380),g.anchor.set(.5,0),t.addChild(g);var m=new PIXI.spine.Spine(b.Get("Toad"));m.state.setAnimation(0,"animation",!0),m.position.set(700,530),t.addChild(m)}else if(e==Za.LandTurtle)n.anim=new PIXI.spine.Spine(b.Get("LandTurtleBig")),n.anim.state.setAnimation(0,"Idle",!0),n.anim.position.set(700,530),t.addChild(n.anim);else if(e==Za.KatydidMag)n.anim=new PIXI.spine.Spine(b.Get(e+"Magnify")),n.anim.state.setAnimation(0,"animation",!0),n.anim.position.set(700,530),t.addChild(n.anim);else if(e==Za.Firefly){n.anim=new PIXI.spine.Spine(b.Get(e+"Magnify")),n.anim.position.set(700,530),t.addChild(n.anim);s=["LightUp","Idle"][a=l.InteractionID%2];n.anim.state.setAnimation(0,s,!0)}else{var _;(_=new r.Sprite(X.Get(e+"Magnify"))).position.set(za.Width/2,.66*za.Height),_.anchor.set(.5),t.addChild(_)}}return t},n.initArt(t),n.UI=new Ai(t),n.addChild(n.UI),n}return Oi(t,e),t.prototype.Update=function(e){this.magGlass.Update(e)},t.prototype.FindObject=function(){this.UI.ShowNextBtn(),this.anim&&this.anim.state.hasAnimation("Found")&&this.anim.state.setAnimation(0,"Found",!0)},t}(r.Container),xi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Gi=function(e){function t(t,n){var o=e.call(this)||this;o.initBG=function(e){e==Za.Moth?(o.BG=new PIXI.Sprite(X.Get("TreeDark")),o.BG.scale.set(2)):e==Za.SpiderLog?o.BG=new PIXI.Sprite(X.Get("SpiderTree")):e==Za.Owl?o.BG=new PIXI.Sprite(X.Get("Owl_background")):e==Za.ToadTorch||e==Za.Katydid?o.BG=new PIXI.Sprite(X.Get("EmptyTreeLog")):(console.error("Failed to get bg for interaction: "+e),o.BG=new PIXI.Sprite(X.Get("EmptyTreeLog"))),o.addChild(o.BG)},o.initAnimal=function(e,t){e==Za.Moth?(o.animal=new zt(e,t),o.addChild(o.animal)):e==Za.Owl?(o.animal=new Ut(e,t),o.addChild(o.animal)):e!=Za.Owl&&(o.animal=new Vt(e,t),o.addChild(o.animal))},o.FindAnimal=function(){o.animal.Find()},o.initBG(t),o.initAnimal(t,n);var i=new r.Point(za.Width/2,za.Height/2);if(t==Za.Owl&&(i=new r.Point(.2*za.Width,.9*za.Height)),o.Torch=new qt(i),o.addChild(o.Torch),t==Za.Owl){var a=new PIXI.Sprite(X.Get("Owl_overlay"));o.addChild(a);var s=new Wt,l=new Wt;o.addChild(s),o.addChild(l),o.animal.SetGlowEyes(s,l)}return o.UI=new Ai(t),o.addChild(o.UI),o}return xi(t,e),t.prototype.Update=function(e){this.Torch.Update(e),this.animal.UpdateTorchPos(this.Torch.position,e)},t}(r.Container),Di=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Li=function(e){function t(t,n){var o=e.call(this)||this;o.minZoomSize=.2,o.maxZoomSize=1,o.ChangeZoom=function(e){o.zoomCont.scale.set(k.lerp(o.minZoomSize,o.maxZoomSize,e)),o.Binoculars.Scale(k.lerp(1,1.7,e)),o.ZoomControll.ChangeZoom(e)},o.MoveTo=function(e){o.zoomCont.pivot.set(-e.x,-e.y)},o.PlayHandTutorial=function(){var e=new r.Sprite(X.Get("pointHand"));e.position.set(740,1e3),e.anchor.set(.8,.8),e.rotation=1.1,e.scale.set(1),o.addChild(e);var t=O.g.easeInOut,n=new O.h;n.to(e,.5,{alpha:1,y:740,ease:O.c.easeInOut,delay:1}),n.to(e,.1,{rotation:.7,ease:t,delay:.2}),n.to(e,.6,{rotation:.6,x:730,ease:t,delay:.1}),n.to(e,1,{rotation:.9,x:860,ease:t,delay:.1}),n.to(e,.1,{rotation:1.1,ease:t,delay:.1}),n.to(e,1,{y:550,x:780,ease:t,delay:.5}),n.to(e,.1,{rotation:.9,ease:t,delay:.1}),n.to(e,1.5,{x:440,y:300,ease:t,delay:.1}),n.to(e,1.5,{x:1040,y:400,ease:t,delay:.1}),n.to(e,1.5,{x:440,y:600,alpha:0,ease:t,delay:.1}),O.i.delayedCall(1.8,function(){var e=new ce("stickerBurst",new r.Point(650,620));e.emitter.playOnceAndDestroy(),e.scale.set(.5),o.addChild(e)}),O.i.delayedCall(5.4,function(){var e=new ce("stickerBurst",new r.Point(740,400));e.emitter.playOnceAndDestroy(),e.scale.set(.5),o.addChild(e)})};var i=new r.Point(za.Width/2,za.Height/2),a=new PIXI.Sprite(X.Get("BinocularBG"));return a.position=i,a.anchor.set(.5),o.addChild(a),o.zoomCont=new r.Container,o.zoomCont.position=i,o.addChild(o.zoomCont),o.initBG(n),o.initTarget(n),o.initBino(t,i),o.ChangeZoom(t),o.playIntroAnim(i.y),o.UI=new Ai(n),o.addChild(o.UI),o}return Di(t,e),t.prototype.initBG=function(e){if(e==Za.Clubhouse){var t=new r.Sprite(X.Get("hillBG"));return t.position.set(-30,150),t.scale.set(2.1),t.anchor.set(.5),void this.zoomCont.addChild(t)}var n;if(e==Za.RedBird||e==Za.BlueBird||e==Za.YellowBird||e==Za.SpiderWeb||e==Za.AcornsBino)n=new r.Sprite(X.Get("tree_Birds"));else if(e==Za.CaterpillarBino)n=new r.Sprite(X.Get("tree_Caterpillar"));else{if(e!=Za.Nest&&e!=Za.ChickWhite&&e!=Za.ChickBlue&&e!=Za.ChickBrown)return void console.error("Unexpected bino target: "+e);n=new r.Sprite(X.Get("tree_Nest"))}n.anchor.set(.5,1),n.y=720,n.scale.set(3),this.zoomCont.addChild(n)},t.prototype.initTarget=function(e){if(console.log("initTarget: "+e),e==Za.Clubhouse)this.targetAnim=new PIXI.spine.Spine(b.Get("Clubhouse")),this.targetAnim.update(0),this.zoomCont.addChild(this.targetAnim),this.targetAnim.scale.set(2);else if(e==Za.BlueBird){var t=new PIXI.spine.Spine(b.Get("birdBlue"));this.zoomCont.addChild(t),t.position.set(-60,270),t.scale.set(1.5),t.state.setAnimation(0,"animation",!0),t.update(0)}else if(e==Za.RedBird||e==Za.YellowBird)this.targetAnim=new PIXI.spine.Spine(b.Get("TreeBirds")),this.targetAnim.scale.set(1.5),this.targetAnim.position.set(100,690),this.zoomCont.addChild(this.targetAnim),this.targetAnim.update(0),e==Za.YellowBird?this.targetAnim.state.setAnimation(0,"Rustle3",!0):e==Za.RedBird&&this.targetAnim.state.setAnimation(0,"Rustle1",!0);else if(e==Za.CaterpillarBino){var n=new PIXI.spine.Spine(b.Get("CaterpillarBino"));n.update(0),this.zoomCont.addChild(n),n.position.set(-80,150),n.scale.set(.8),n.state.setAnimation(0,"animation",!0)}else if(e==Za.Nest){var o=new PIXI.spine.Spine(b.Get("Nest"));o.update(0),o.position.set(-10,600),this.zoomCont.addChild(o),o.scale.set(1.5);o.state.setAnimation(0,"EggRustle",!0)}else if(e==Za.ChickWhite)this.targetAnim=new PIXI.spine.Spine(b.Get("Nest")),this.targetAnim.state.setAnimation(0,"EggBrownRustle",!0),this.targetAnim.scale.set(1.5),this.targetAnim.position.set(-10,600),this.zoomCont.addChild(this.targetAnim),this.targetAnim.update(0);else if(e==Za.SpiderWeb)this.targetAnim=new PIXI.spine.Spine(b.Get("SpiderWeb")),this.targetAnim.state.setAnimation(0,"JustWeb",!0),this.targetAnim.scale.set(2),this.zoomCont.addChild(this.targetAnim),this.targetAnim.update(0);else if(e==Za.AcornsBino){var i=new PIXI.spine.Spine(b.Get(e));i.state.setAnimation(0,"animation",!0),i.position.set(-240,-240),i.scale.set(1.5),this.zoomCont.addChild(i),i.update(0)}},t.prototype.initBino=function(e,t){this.Binoculars=new Qt(t),this.addChild(this.Binoculars),this.ZoomControll=new en(e,t),this.addChild(this.ZoomControll),this.Binoculars.on("startBinoDrag",this.ZoomControll.StopDrag)},t.prototype.FindTarget=function(e){if(this.targetAnim)if(e==Za.RedBird)this.targetAnim.state.setAnimation(1,"BirdRedAppear",!1);else if(e==Za.YellowBird)this.targetAnim.state.setAnimation(1,"BirdYellowAppear",!1);else if(e==Za.SpiderWeb)this.targetAnim.state.setAnimation(0,"FastDrop",!0);else if(e==Za.Clubhouse)this.targetAnim.state.setAnimation(0,"animation",!1);else if(e==Za.ChickWhite){var t="BirdEmerge"+(1+(l.InteractionID-1)%3);this.targetAnim.state.setAnimation(0,t,!1)}},t.prototype.playIntroAnim=function(e){var t=this,n=new O.h;this.Binoculars.y=500,n.to(this.Binoculars,.5,{y:e,ease:O.a.easeOut.config(1)},.3),this.ZoomControll.y=500,n.to(this.ZoomControll,.4,{y:e,ease:O.a.easeOut.config(1)},.5),O.i.delayedCall(1.2,function(){return t.introComplete=!0})},t.prototype.Update=function(e){this.introComplete&&this.ZoomControll.Update(e)},t}(r.Container),Fi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Hi=function(e){function t(t){var n=e.call(this)||this;n.SetAngle=function(e){n.Sieve.SetAngle(e),n.bg.x=k.lerp(n.centerX+10,n.centerX-10,e)},n.PlayHandTutorial=function(){var e=new r.Sprite(X.Get("pointHand"));e.position.set(za.Width/2,1e3),e.anchor.set(.8,.8),e.rotation=1.1,e.scale.set(1.5),n.addChild(e);var t=O.c.easeInOut,o=new O.h;o.to(e,.5,{alpha:1,y:550,ease:O.c.easeInOut,delay:1}),o.to(e,.1,{rotation:.7,ease:t,delay:.2}),o.to(e,.4,{rotation:.6,x:500,ease:t,delay:.1}),o.to(e,.8,{rotation:.9,x:1080,ease:t,delay:.1}),o.to(e,.4,{rotation:.6,x:500,ease:t,delay:.1}),o.to(e,.8,{rotation:.9,x:1080,ease:t,delay:.1}),o.to(e,1.2,{rotation:.6,alpha:0,x:0,ease:O.c.easeInOut,delay:.1})},n.centerX=za.Width/2;var o=new r.Point(n.centerX,za.Height/2);return n.bg=new r.Sprite(X.Get("uiBackground")),n.bg.position.set(n.centerX,.23*za.Height),n.bg.scale.set(1.35),n.bg.anchor.set(.5),n.addChild(n.bg),n.Sieve=new rn(o,t),n.addChild(n.Sieve),n.UI=new Ai(t),n.addChild(n.UI),n}return Fi(t,e),t}(r.Container),Vi=function(){function e(){}return e.degToRad=57.29578,e.MakeLevel=function(){var t;try{return t=PIXI.loader.resources.levelJson.data,Mn.Bounds=t.Bounds,e.SetupLevel(t)}catch(e){console.error("Failed to get level from resources!"),console.error(e),console.error(PIXI.loader.resources)}},e.SetupLevel=function(t){t&&t.Level&&t.Speeds||(console.error("Invalid level data!"),console.error(t));var n=new wi,o=0,i=t.Level;for(var r in i){var a=e.AddContainer(i[r]);n.AddLayer(a,t.Speeds[o++])}return n},e.AddContainer=function(t){var n=new PIXI.Container;if(n.x=100*t.x,n.y=-100*t.y,n.scale.x=t.scaleX,n.scale.y=t.scaleY,n.rotation=-t.rotation/e.degToRad,t.children)for(var o in t.children)e.AddImage(t.children[o],n);return n},e.AddImage=function(t,n){var o=new r.Sprite(X.Get(t.imgName));o.anchor.x=o.anchor.y=.5,o.rotation=-t.rotation/e.degToRad,o.x=100*t.x,o.y=-100*t.y,t.tint&&(o.tint=t.tint),t.alpha&&(o.alpha=t.alpha),o.scale.x=t.scaleX,o.scale.y=t.scaleY,n.addChild(o)},e}(),Ni=function(){return function(e,t){var n=this;this.prog=0,this.updateTL=function(){n.blurFilter.blur=7*n.prog,n.satFilter.saturate(.75*-n.prog),n.gameView.scale.set(k.lerp(1,1.02,n.prog))},this.onComplete=function(){n.gameView.filters=[]},this.gameView=e.View,e.GameUI.UnlockTool(t),e.GameObjectService.PickupTool(t),Ko.Play("unlock_sticker",.25),w.lowEndDevice||(this.blurFilter=new PIXI.filters.BlurFilter,this.satFilter=new PIXI.filters.ColorMatrixFilter,this.blurFilter.blur=2,this.satFilter.saturate(0),O.i.delayedCall(.2,function(){n.gameView.filters=[n.blurFilter,n.satFilter];var e=new O.h;e.to(n,.5,{prog:1,onUpdate:n.updateTL},0),e.to(n,.4,{prog:0,onUpdate:n.updateTL,onComplete:n.onComplete},1.3)}))}}(),ji=function(){function e(t,n){var o=this;if(this.tapElinor=function(t,n){t.IsWalking?n.Elinor.Stop():e.readyForJump&&(t.View.PlayAnim(es.SELECT,!1),e.readyForJump=!1,setTimeout(function(){return e.readyForJump=!0},900),Ko.Play("elinor_tap"),Vn.PlayCC("elinor_tap"))},this.tapOlive=function(e,t){var n=t.TaskService.Task;if(n&&n.Giver==Ya.Olive)t.TaskService.emit(ei.RepeatInstrux,n);else if(n&&n.Name==a.BirdNotebookInteraction){e.View.PlayAnim(es.SELECT,!1),rs.Birds.CurrentTemplate=1;var i={entryName:Ka.Birds};t.SceneService.NavigateTo(qa.Notebook,i)}else qo.NotebookUnlocked&&(e.View.PlayAnim(es.SELECT,!1),o.navigateTo(t,qa.Notebook),Ko.Play("olive_tap"))},this.tapAri=function(e,t){if(qo.CollectionBoxUnlocked)e.View.PlayAnims("BoxAnim","BoxAwayAnim"),o.navigateTo(t,qa.CollectionBox),Ko.Play("ari_tap");else{var n=t.TaskService.Task;n&&n.Giver==Ya.Ari&&t.TaskService.emit(ei.RepeatInstrux,n)}},this.navigateTo=function(e,t){e.GameUI.SetEnabled(!1),e.GameInput.SetEnabled(!1),zo.SaveLevelLayout(e),e.SceneService.NavigateTo(t)},n.GameInput.Enabled){var i=n.CharacterService,r=i.Get(t);r.Name==Ya.Elinor?this.tapElinor(r,i):r.Name==Ya.Olive?this.tapOlive(r,n):r.Name==Ya.Ari&&this.tapAri(r,n)}}return e.readyForJump=!0,e}(),Ri=function(){return function(e,t){var n=t.TaskService.Task;n&&n.Giver==e?(t.TaskService.TaskGiverTapped(n),t.TaskService.emit(ei.RepeatInstrux,n),pi.CharInteraction(e+"tapped to repeat instrux.")):e==Ya.SenorTapir&&(t.CharacterService.Get(e).TryPlayDitty(),pi.CharInteraction("SenorTapir tapped to repeat ditty."));var o=t.CharacterService.Elinor,i=t.CharacterService.Get(e);o.SetHeading(o.Position.x<i.Position.x)}}(),Ui=function(){function e(e){this.gameScene=e;var t=e.GameInput.TargetType,n=e.GameInput.Target;if(t==ts.Character)this.inspectCharacter(n.name);else if(t==ts.Tool){this.gameScene.Tools.PickUpTool(n.toolType)}else t==ts.Mound||(t==ts.ToolMarker?e.Tools.TryUse.Dispatch(n.toolType):t==ts.Map?(zo.SaveLevelLayout(e),e.SceneService.NavigateTo(qa.Map)):t==ts.Lantern?(n.data.IsOn=!n.data.IsOn,n.view.UpdateState()):t!=ts.None&&console.warn("Unexpected targetType: "+t))}return e.prototype.inspectCharacter=function(e){var t=this;(Ya.IsNPC(e)||e==Ya.Ari&&!l.AriUnlocked||e==Ya.Olive&&!l.OliveUnlocked)&&O.i.delayedCall(.1,function(){t.gameScene.CharacterService.emit("npcTapped",e)})},e}(),Ei=function(){return function(e,t){if(this.replayInstrux=function(e,t,n){void 0===n&&(n=3),Vn.Play(e)},null==Vn.currentVO&&e){var n=t.CharacterService,o=n.Get(e.Giver),i=e.Name;console.log("RepeatInstruxCommand:taskName: "+i),i==a.FindMagGlass?this.replayInstrux("clubhouse_m1_03_hint",o,2.5):i==a.UseMagGlass?this.replayInstrux("clubhouse_m2_01_hint",o,4):i==a.FindSieve?this.replayInstrux("riverbank_m1_02_hint",o,4.4):i==a.UseSieve?this.replayInstrux("riverbank_m2_02_hint",o,2.6):i==a.UseShovelForSieve?this.replayInstrux("riverbank_m3_01",o,4):i==a.UseShovelForSieve?this.replayInstrux("riverbank_m3_02",o,6):i==a.UseSieveAfterShovel?this.replayInstrux("riverbank_m2_02_hint",o,2.6):i==a.ViewCollectionBox?this.replayInstrux("riverbank_m3_03",n.Get(Ya.Ari),5):i==a.FindWateringCan?this.replayInstrux("yard_m1_02_hint",n.Get(Ya.Ranger),2):i==a.GrowFirstFlower?this.replayInstrux("yard_m1_03",n.Get(Ya.Ranger),4):i==a.UseShovelForPlanting?this.replayInstrux("yard_m2_01",n.Get(Ya.Ranger),6):i==a.WaterAfterDigging?this.replayInstrux("yard_m2_02",n.Get(Ya.Ranger),6):i==a.FindChrysanthemum?this.replayInstrux("yard_m3_01",n.Get(Ya.Ranger),8):i==a.InspectChrysanthemum?this.replayInstrux("yard_m3_02",n.Get(Ya.Olive),5.6):i==a.SelectChrysanthemumSeed?this.replayInstrux("yard_m3_03",n.Get(Ya.Ranger),5.4):i==a.GrowChrysanthemumPlant?this.replayInstrux("yard_m3_04",n.Get(Ya.Ranger),5.3):i==a.FindBinoculars?this.replayInstrux("deep_m1_01",n.Get(Ya.Camilla),9):i==a.FindBirds?this.replayInstrux("deep_m2_03",n.Get(Ya.Camilla),6):i==a.HM_Camilla_Rocks?this.replayInstrux(i,n.Get(Ya.Camilla),8):i==a.FindTorch?this.replayInstrux("night_m1_02_hint",n.Get(Ya.MsMole),4.7):i==a.FindOwl||i==a.FindMoth||i==a.FindKatydid?this.replayInstrux("night_m2_04_hint",n.Get(Ya.MsMole),4):i==a.HM_DrawFlowers?this.replayInstrux(i,n.Get(Ya.Ranger),5):i==a.HM_Leaf_Spikey?this.replayInstrux(i,n.Get(Ya.Camilla),7):i==a.HM_FindKatydid?this.replayInstrux(i,n.Get(Ya.MsMole),8):i==a.HM_FindToad?this.replayInstrux(i,n.Get(Ya.SenorTapir),3):i==a.HM_Tapir_Lizard?this.replayInstrux(i,n.Get(Ya.SenorTapir),6):i==a.HM_Tapir_Collection?this.replayInstrux(i,o,2):we.Any(i,[a.HM_Camilla_Eggs,a.HM_SortByShape])?this.replayInstrux(i,o,3):we.Any(i,[a.HM_Moms_Snail,a.HM_Moms_Caterpillar,a.HM_DrawToad,a.HM_Mole_Collection])?this.replayInstrux(i,o,4.5):we.Any(i,[a.HM_Sally_Eggs,a.HM_Sally_Ant,a.HM_Mole_Moth])?this.replayInstrux(i,o,7):we.Any(i,[a.HM_Mole_Flowers,a.HM_Camilla_Flowers,a.HM_Sally_Ant_Carry,a.HM_Moms_Bee,a.HM_Mole_Sieve,a.HM_Camilla_Bush,a.HM_Tapir_Water])?this.replayInstrux(i,o,6):we.Any(i,[a.HM_Tapir_Flowers,a.HM_Mole_Draw,a.HM_Sally_Ant_Hill,a.HM_Camilla_Sap,a.HM_Sally_Log])?this.replayInstrux(i,o,7):console.error("Failed to replay task instrux:",i)}}}(),Wi=function(){return function(e,t){var n=this;this.missingTool=function(){null!=Vn.currentVO&&Vn.Play("elinor_missing_tool")},this.failToUseTool=function(e){n.disableInputTemporarily(1.1);var t="";e==ns.Sieve?(t="SievingFailAnim",Ko.Play("elinor_dig",.3)):e==ns.Torch?t="TorchFailAnim":e==ns.MagnifyingGlass?t="MagnifyFailAnim":e==ns.Binoculars?t="BinocularsFailAnim":console.error("unexpected tool type: "+ns);var o=n.gameScene.CharacterService.Elinor;o.Stop(),O.i.delayedCall(.2,function(){return o.View.PlayAnim(t,!1)}),n.playToolHint(e),pi.ToolFail(e)},this.playToolHint=function(e){n.hintService.hintStates[ns.MagnifyingGlass]?Ko.Play("tool_hint_mag"):n.hintService.hintStates[ns.Torch]?Ko.Play("tool_hint_light"):n.hintService.hintStates[ns.Binoculars]?Ko.Play("tool_hint_binoc"):e==ns.Sieve?qo.UnlockState[ns.Shovel]&&Ko.Play("tool_hint_sifter"):Ko.Play("tool_hint_nothing")},this.useTool=function(e){e==ns.MagnifyingGlass?new Ji(n.gameScene):e==ns.WateringCan?new Yi(n.gameScene):e==ns.Shovel?new Zi(n.gameScene):e==ns.Torch?new $i(n.gameScene):e==ns.Binoculars?new tr(n.gameScene):e==ns.Sieve?new or(n.gameScene):console.error("unexpected tool type: "+ns)},this.disableInputTemporarily=function(e){var t=n.gameScene.GameInput,o=n.gameScene.GameUI;t.SetEnabled(!1),o.SetEnabled(!1),O.i.delayedCall(e,function(){t.SetEnabled(!0),o.SetEnabled(!0)})},this.gameScene=e,this.hintService=e.ToolHintService,qo.IsUnlocked(t)?t==ns.WateringCan||t==ns.Shovel?this.useTool(t):e.Tools.CanUse(t)?this.useTool(t):this.failToUseTool(t):this.missingTool()}}(),Xi=function(){return function(e,t,n){var o=this;void 0===n&&(n=1.1),this.toolType=ns.MagnifyingGlass,this.playToolAnim=function(){var e=o.gameScene.CharacterService.Elinor;e.Stop(),O.i.delayedCall(.1,function(){o.toolType==ns.WateringCan?e.View.PlayAnim("WateringAnim",!1):o.toolType==ns.Shovel?(e.View.PlayAnim("DiggingAnim",!1),Ko.Play("elinor_dig",.3)):o.toolType==ns.MagnifyingGlass?(e.View.PlayAnim("MagnifyAnim",!1),Ko.Play("elinor-tool-out",.35)):o.toolType==ns.Torch?Ko.Play("elinor-tool-out",.35):o.toolType==ns.Binoculars?Ko.Play("elinor-tool-out",.35):console.warn("Play tool anim and sfx.")})},this.disableInputTemporarily=function(){var e=o.gameScene.GameInput,t=o.gameScene.GameUI;e.SetEnabled(!1),t.SetEnabled(!1),O.i.delayedCall(o.animTime,function(){e.SetEnabled(!0),t.SetEnabled(!0)})},this.gameScene=e,this.toolType=t,this.animTime=n}}(),zi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Yi=function(e){function t(t){var n=e.call(this,t,ns.WateringCan,2.3)||this;return n.tryUseTool=function(){var e=n.gameScene.Tools,t=new PIXI.Rectangle;t.y=n.elinor.Position.y-20,t.x=n.elinor.Position.x,t.x+=n.elinor.FacingRight?-85:-205,t.width=290,t.height=70;var o=e.DirtInHitBox(t);if(o.length>0){for(var i=0,r=n.gameObjects.Mounds,a=0;a<o.length;a++){var s=r[o[a]];s.Data.HasFlower||(s.Water(l.SeedType,.2*a),i++)}i>0&&(e.FlowerGrown.Dispatch(i,l.SeedType),n.playFlowerDing(i),pi.UseTool(ns.WateringCan,"grow "+l.SeedType))}else Vn.Play("tool_hint_wateringcan"),pi.ToolFail(ns.WateringCan);l.WC_uses++},n.playFlowerDing=function(e){Ko.Play("flower_grow_v2",.3);for(var t=["C","D","E","F","G","A","B","Chigh","B","A","G"],o=k.IntRange(0,4),i=0;i<e;i++){var r="flower_ding_"+t[o+i];Ko.Play(r,.3)}zo.SaveLevelLayout(n.gameScene)},n.addPuddleView=function(e){var t=n.gameScene.View,o=new rt(e);t.AddObject(o)},n.disableInputTemporarily(),n.playToolAnim(),n.gameObjects=t.GameObjectService,n.elinor=t.CharacterService.Elinor,O.i.delayedCall(.1,function(){return Ko.Play("elinor_watering",.3)}),O.i.delayedCall(1,function(){return n.addPuddleView(n.elinor.ToolPosition)}),O.i.delayedCall(1.9,n.tryUseTool),l.WC_uses<10&&!Vn.currentVO&&Ko.Play("use_watering_can"),n}return zi(t,e),t}(Xi),Ki=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zi=function(e){function t(t){var n=e.call(this,t,ns.Shovel)||this;return n.tryUseTool=function(){var e=new PIXI.Rectangle;e.y=n.elinor.Position.y-20,e.x=n.elinor.Position.x,e.x+=n.elinor.FacingRight?10:-110,e.width=100,e.height=60;var t=n.gameScene.Tools.DirtInHitBox(e);if(t.length>0){var o=n.gameObjects.Mounds[t[0]];o.Data.HasFlower&&o.View.visible&&$a.Unocked[o.Data.SeedType]&&(n.gameObjects.RemovePlant(t[0]),pi.UseTool(ns.Shovel,"remove flower"))}else{var i=n.elinor.ToolPosition,r=new Wn(i.x,i.y,!1);n.gameObjects.AddMound(r),n.tools.HoleDug.Dispatch(),pi.UseTool(ns.Shovel,"dig hole")}l.SH_uses++},n.disableInputTemporarily(),n.playToolAnim(),n.gameObjects=t.GameObjectService,n.elinor=t.CharacterService.Elinor,n.tools=t.Tools,O.i.delayedCall(.9,n.tryUseTool),l.SH_uses<10&&!Vn.currentVO&&Ko.Play("use_shovel"),n}return Ki(t,e),t}(Xi),qi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ji=function(e){function t(t){var n=e.call(this,t,ns.MagnifyingGlass)||this;return n.tryUseTool=function(){var e=n.gameScene.Tools.GetClosestMagGlassTargetInRange();e?(l.MG_uses++,n.inspectTarget(e),vn.MidPointAnim="MagnifyAnim"):pi.ToolFail(ns.MagnifyingGlass)},n.inspectTarget=function(e){e instanceof St?e.Data.Name==Za.FlipRock?n.inspectRock(e):e.Data.Name==Za.CaterpillarMag?n.inspectBush(e):e.Data.Name==Za.BugRed||e.Data.Name==Za.BugYellow||e.Data.Name==Za.BugOrange?n.inspectLadybug(e.Data.Name):e.Data.Name==Za.ToadStandalone?n.inspectToad(Za.ToadStandalone):e.Data.Name==Za.ElmLeaf||e.Data.Name==Za.MapleLeaf||e.Data.Name==Za.GingkoLeaf?n.inspectLeaf(e):n.inspectInteraction(e):e instanceof at?n.inspectEarthMound(e):console.error("unexpected target: "+typeof e),zo.SaveLevelLayout(n.gameScene)},n.inspectEarthMound=function(e){var t=e.Data.SeedType;if(t){var o=["magGlass"+t],i=qn.FromSeed(t);n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,i,o),pi.UseTool(ns.MagnifyingGlass,t)}else console.error("Invalid earth mound. No seed type!")},n.inspectLeaf=function(e){var t,o=new qn;o.InteractionName=e.Data.Name;var i=["","Yellow","Brown"][l.InteractionID++%3];t=["magGlass"+o.InteractionName+i],n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,o,t),pi.UseTool(ns.MagnifyingGlass,o.InteractionName)},n.inspectBush=function(e){var t=[Za.CaterpillarMag,Za.Butterfly,Za.KatydidMag,Za.ToadMag],o=t[l.InteractionID++%t.length],i=new qn;if(i.InteractionName=o,o==Za.ToadMag)n.inspectToad(o);else{var r=["magGlass"+o];n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,i,r)}pi.UseTool(ns.MagnifyingGlass,o)},n.inspectToad=function(e){var t=new qn;t.InteractionName=e;var o=["magGlassToadMag"+["Brown","Green","Yellow"][l.InteractionID++%3]];n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,t,o)},n.inspectLadybug=function(e){var t=new qn,o=[];if(e==Za.BugRed)t.InteractionName=e,o=["magGlassLadybugRed"];else if(e==Za.BugYellow)t.InteractionName=e,o=["magGlassLadybugYellow"];else{var i=l.InteractionID++%2;0==i?(o=["magGlassLadybugOrange"],t.InteractionName=Za.BugOrange):1==i&&(o=["magGlassLadybugWings"],t.InteractionName=Za.BugWings)}n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,t,o),pi.UseTool(ns.MagnifyingGlass,"ladybug")},n.inspectRock=function(e){var t=[Za.AntRock,Za.Worm,Za.PillBug,Za.CaterpillarRock],o=t[l.InteractionID++%t.length],i=new qn;i.InteractionName=o;var r=["magGlass"+o];O.i.delayedCall(1.3,function(){n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,i,r)}),e.View.SpineAnim.state.setAnimation(0,o,!1),pi.UseTool(ns.MagnifyingGlass,o)},n.inspectInteraction=function(e){var t=new qn;t.InteractionName=e.Data.Name;var o=["magGlass"+t.InteractionName];n.gameScene.SceneService.NavigateTo(qa.MagGlassInteraction,t,o),pi.UseTool(ns.MagnifyingGlass,e.Data.Name)},t.GameInput.SetEnabled(!1),t.GameUI.SetEnabled(!1),n.playToolAnim(),O.i.delayedCall(.9,n.tryUseTool),l.MG_uses<10&&!Vn.currentVO&&Ko.Play("use_magnifying_glass"),n}return qi(t,e),t}(Xi),Qi=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$i=function(e){function t(t){var n=e.call(this,t,ns.Torch)||this;return n.playAnim=function(e,t){var o=n.gameScene.CharacterService.Elinor;o.Stop(),O.i.delayedCall(.01,function(){o.View.PlayAnim(e,!1),Ko.Play("elinor_dig",.3)})},n.gotoInteraction=function(){var e,t={},o=n.gameScene.Tools.GetClosestTarget(n.toolType);o&&o instanceof St&&(e=o.Data.Name),e==Za.BlinkeyEyes&&(e=Za.Moth),t.interaction=e,l.TO_uses++,zo.SaveLevelLayout(n.gameScene);var i=n.getAssetTags(t.interaction);n.gameScene.SceneService.NavigateTo(qa.TorchInteraction,t,i),vn.MidPointAnim="TorchAnim",pi.UseTool(ns.Torch,e)},n.getAssetTags=function(e){return e==Za.Owl?["torchOwl"]:e==Za.Katydid?["torchKatydid"]:e==Za.ToadTorch?["torchToad"+["Brown","Yellow","Green"][l.InteractionID++%3]]:[]},t.GameInput.SetEnabled(!1),t.GameUI.SetEnabled(!1),n.playToolAnim(),O.i.delayedCall(.9,n.gotoInteraction),O.i.to(n.gameScene.View.scale,2,{x:2,y:2}),n.playAnim("TorchAnim",""),l.TO_uses<10&&!Vn.currentVO&&Ko.Play("use_flashlight"),n}return Qi(t,e),t}(Xi),er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tr=function(e){function t(t){var n=e.call(this,t,ns.Binoculars)||this;n.gotoInteraction=function(e,t){zo.SaveLevelLayout(n.gameScene),n.gameScene.SceneService.NavigateTo(qa.BinocularsInteraction,e,t),vn.MidPointAnim="BinocularsAnim"},t.GameInput.SetEnabled(!1),t.GameUI.SetEnabled(!1),n.playToolAnim();var o,i=n.gameScene.Tools.GetClosestTarget(n.toolType);if(i){var r={},a=[];i.Data&&i.Data.Name&&((o=i.Data.Name)==Za.Chrysalis||o==Za.AcornsBino||o==Za.SpiderWeb||o==Za.ChickWhite||o==Za.CaterpillarBino||o==Za.Nest?(r.targetName=o,a=["bino_"+r.targetName]):o==Za.Clubhouse?(r.targetName=o,a=["bino_Clubhouse"]):o==Za.RedBird||o==Za.BlueBird||o==Za.YellowBird?(r.targetName=i.Data.Name,a=["bino_birds"]):console.error("Unexpected bino target: "+i.Data.Name)),O.i.delayedCall(.9,function(){return n.gotoInteraction(r,a)}),O.i.to(n.gameScene.View.scale,2,{x:2,y:2}),t.CharacterService.Elinor.View.PlayAnim("BinocularsAnim",!1),pi.UseTool(ns.Binoculars,o)}return l.BI_uses<10&&!Vn.currentVO&&Ko.Play("use_binoculars"),n}return er(t,e),t}(Xi),nr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),or=function(e){function t(t){var n=e.call(this,t,ns.Sieve)||this;return n.playAnim=function(e,t){var o=n.gameScene.CharacterService.Elinor;o.Stop(),O.i.delayedCall(.1,function(){o.View.PlayAnim(e,!1),Ko.Play("elinor_dig",.3)})},n.tryUseTool=function(){n.gameScene.Tools.DirtInRange(n.toolType).length>0?(n.gotoInteraction(),l.SI_uses++,pi.UseTool(ns.Sieve,"dirt mound")):pi.ToolFail(ns.Sieve)},n.gotoInteraction=function(){zo.SaveLevelLayout(n.gameScene),n.gameScene.SceneService.NavigateTo(qa.SieveInteraction),vn.MidPointAnim="SievingAnim"},t.GameInput.SetEnabled(!1),t.GameUI.SetEnabled(!1),O.i.delayedCall(1.4,n.tryUseTool),n.playAnim("SievingAnim",""),O.i.to(n.gameScene.View.scale,2.5,{x:1.5,y:1.5}),l.SI_uses<10&&!Vn.currentVO&&Ko.Play("use_sifter"),n}return nr(t,e),t}(Xi),ir=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rr=function(e){function t(t){var n=e.call(this,t)||this;return n.name=n.ToolType+"_view",n.toolView=new r.Sprite(X.Get("magnifyingGlass")),n.toolView.anchor.set(.5,.85),n.addChild(n.toolView),n}return ir(t,e),t}(Tt),ar=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sr=function(e){function t(t,n){var o=e.call(this)||this;return o.Mounds=[],o.Lanterns=[],o.InteractionPoints=[],o.ToolViews=[],o.initObjects=function(e){for(var t=0;t<e.length;t++)e[t].ObjectType==os.Mound?o.AddMound(e[t]):e[t].ObjectType==os.Lantern?o.Lanterns.push(new ct(e[t])):e[t].ObjectType==os.InteractionPoint?o.AddInteractionPoint(e[t]):e[t].ObjectType==os.Tool?o.AddTool(e[t]):console.error("Unknown gameObject: "+e[t].ObjectType)},o.AddMound=function(e){var t=new at(e);return o.gameView.AddObject(t.View),o.Mounds.push(t),t},o.RemoveMound=function(e){e>=0&&e<o.Mounds.length&&(o.gameView.RemoveObj(o.Mounds[e].View),o.Mounds.splice(e,1))},o.UpdateMoundHint=function(e){if(e)for(var t=0;t<o.Mounds.length;t++)o.Mounds[t].SetHighlight(e.Data==o.Mounds[t].Data);else for(t=0;t<o.Mounds.length;t++)o.Mounds[t].SetHighlight(!1)},o.RemovePlant=function(e){var t=o.Mounds[e];t?t.RemoveFlower(0):console.error("Failed to remove flower.")},o.AddInteractionPoint=function(e,t){void 0===t&&(t=!0);var n=new St(e);o.InteractionPoints.push(n);var i=l.CompletedAreas[qa.NightForest];!t||e.HideTillEnd&&!i?n.View.visible=!1:e.Name==Za.Turtle||e.Name==Za.Fish?o.gameView.AddObjectToBackground(n.View,2):o.gameView.AddObject(n.View)},o.AddTool=function(e){qo.IsUnlocked(e.ToolType)||(e.ToolType==ns.MagnifyingGlass?o.ToolViews.push(new rr(e)):e.ToolType==ns.WateringCan?o.ToolViews.push(new Pt(e)):e.ToolType==ns.Torch?o.ToolViews.push(new Ot(e)):e.ToolType==ns.Shovel?o.ToolViews.push(new It(e)):e.ToolType==ns.Binoculars?o.ToolViews.push(new Dt(e)):e.ToolType==ns.Sieve?o.ToolViews.push(new xt(e)):console.error("Unknown tooltype: "+e.ToolType))},o.AddViewsToLevel=function(e){for(var t=0;t<o.ToolViews.length;t++)e.AddObject(o.ToolViews[t],!1);for(t=0;t<o.Lanterns.length;t++)e.AddLantern(o.Lanterns[t]);e.SortObjectLayer()},o.PickupTool=function(e){for(var t=0;t<o.ToolViews.length;t++)if(o.ToolViews[t].ToolType==e)return void o.ToolViews[t].Hide()},o.charService=t.CharacterService,o.toolService=t.Tools,o.gameView=t.View,o.initObjects(n.GameObjects),o}return ar(t,e),t.prototype.SlowUpdate=function(e){var t=this.charService.Elinor.Position;this.tryPickupTools(t)},t.prototype.tryPickupTools=function(e){for(var t=0;t<this.ToolViews.length;t++){if(this.ToolViews[t].visible)Math.abs(this.ToolViews[t].position.x-e.x)<70&&this.toolService.PickUpTool(this.ToolViews[t].Data.ToolType)}},t.prototype.Teardown=function(){for(var e=0;e<this.InteractionPoints.length;e++)this.InteractionPoints[e].Teardown();for(e=0;e<this.ToolViews.length;e++)this.ToolViews[e].Teardown()},t.prototype.GetAllGameObjects=function(){var e=[];e=(e=(e=e.concat(this.Mounds.map(function(e){return e.Data}))).concat(this.Lanterns.map(function(e){return e.Data}))).concat(this.InteractionPoints.map(function(e){return e.Data}));for(var t=0;t<this.ToolViews.length;t++)this.ToolViews[t].visible&&e.push(this.ToolViews[t].Data);return e},t}(U.EventEmitter),lr=function(){return function(e){console.log("UseSieveAfterShovel_Completed"),Vn.Play("riverbank_m3_03"),qo.CollectionBoxUnlocked=!0,Ln.Save()}}(),cr=function(){return function(e){console.log("FindTorch_Completed"),Vn.Play("night_m1_03")}}(),ur=function(){return function(e,t){this.playPayoffAnim=function(e,t){e.PlayPayoff&&O.i.delayedCall(.3,function(){Ko.Play("generic_success_2",.3),t.CharacterService.Elinor.View.PlayAnim(es.SELECT,!1)})};var n=e.Name;n==a.TalkToOlive?(new Dr(t),new $r(t)):n==a.FindMagGlass?new Lr(t):n==a.UseMagGlass?new Fr(t):n==a.TalkToAri?new $r(t):n==a.FindSieve?new Hr(t):n==a.UseSieve?new Vr(t):n==a.FindShovel?new Nr(t):n==a.UseShovelForSieve?new jr(t):n==a.UseSieveAfterShovel?new lr(t):n==a.ViewCollectionBox?new Rr(t):n==a.TalkToRanger?new $r(t):n==a.FindWateringCan?new Ur(t):n==a.GrowFirstFlower?new Er(t):n==a.WaterAfterDigging?new Wr(t):n==a.GrowChrysanthemumPlant?new Xr(t):n==a.TalkToCamilla?(new zr(t),new $r(t)):n==a.FindBinoculars?new Yr(t):n==a.FindBirds?new Kr(t):n==a.BirdNotebookInteraction?new Zr(t):n==a.TalkToMsMole?new $r(t):n==a.FindTorch?new cr(t):n==a.FindOwl?new qr(t):n==a.FindMoth?new Jr(t):n==a.FindKatydid?new Qr(t):n==a.HM_Leaf_Spikey?new ia(t):n==a.HM_FindKatydid?new ra(t):n==a.HM_FindToad?new la(t):n==a.HM_DrawFlowers?new ua(t):n==a.HM_SortByShape?new da(t):we.Any(n,[a.HM_Camilla_Rocks,a.HM_Camilla_Rocks,a.HM_Tapir_Lizard,a.HM_Tapir_Collection,a.HM_Moms_Caterpillar,a.HM_Mole_Collection,a.HM_Mole_Sieve,a.HM_Sally_Beetle,a.HM_Sally_Ant,a.HM_Sally_Ant_Carry,a.HM_Sally_Log,a.HM_Mole_Moth,a.HM_Tapir_Water,a.HM_Tapir_Flowers,a.HM_Camilla_Flowers,a.HM_Mole_Draw,a.HM_Mole_Flowers,a.HM_Sally_Ant_Hill,a.HM_Sally_Eggs,a.HM_Camilla_Bush,a.HM_Camilla_Sap])?new ta(t,e):console.warn("Failed to get start command for: "+n),this.playPayoffAnim(e,t),Ln.Save()}}(),pr=function(){return function(e){Vn.Play("clubhouse_m2_01","clubhouse_m2_02")}}(),dr=function(){return function(e){var t=this;this.checksRemaining=10,this.updateAriPos=function(){t.olive.Position.x>t.ari.Position.x?t.ari.SetTarget(t.olive):(t.checksRemaining--,t.checksRemaining>0?O.i.delayedCall(.75,t.updateAriPos):(console.log("final check"),t.ari.SetTarget(t.olive)))},console.log("TalkToAri_Started"),l.AriUnlocked=!0,Ln.Save(),this.olive=e.CharacterService.Get(Ya.Olive),this.ari=e.CharacterService.Get(Ya.Ari),Vn.Play("riverbank_m1_01","riverbank_m1_02"),O.i.delayedCall(4.5,this.updateAriPos)}}(),hr=function(){return function(e){console.log("UseSieve_Started"),Vn.Play("riverbank_m2_01")}}(),fr=function(){return function(e){console.log("UseShovelForSieve_Started")}}(),gr=function(){return function(e){console.log("TalkToRanger_Started"),Vn.Play("yard_m1_01","yard_m1_02"),e.CharacterService.Get(Ya.Ranger).View.PlayAnim(es.IDLE,!0)}}(),mr=function(){return function(e){console.log("UseShovelForPlanting_Started"),Vn.Play("yard_m2_01")}}(),_r=function(){return function(e){console.log("WaterAfterDigging_Started"),Vn.Play("yard_m2_02")}}(),yr=function(){return function(e){var t=this;this.flowers=[],this.plantChrysanthemum=function(e,n){var o=new Wn(k.clamp(n,600,4500),490,!1),i=e.GameObjectService.AddMound(o);i.Water($a.Chrysanthemum,0),i.View.visible=!1,t.flowers.push(i)},console.log("FindChrysanthemum_Started"),Vn.Play("yard_m3_01"),this.plantChrysanthemum(e,2200),this.plantChrysanthemum(e,1200),this.plantChrysanthemum(e,3300),zo.SaveLevelLayout(e),O.i.delayedCall(4.5,function(){for(var e=0;e<t.flowers.length;e++)t.flowers[e].View.visible=!0,t.flowers[e].View.Water($a.Chrysanthemum,0)})}}(),vr=function(){return function(e){console.log("InspectChrysanthemum_Started"),Vn.Play("yard_m3_02")}}(),br=function(){return function(e){console.log("SelectChrysanthemumSeed_Started"),Vn.Play("yard_m3_03"),qo.SeedbagUnlocked=!0,e.GameUI.ToolBarView.UnlockSeedbag(),Ln.Save()}}(),wr=function(){return function(e){console.log("GrowChrysanthemumPlant_Started"),Vn.Play("yard_m3_04")}}(),Sr=function(){return function(e){console.log("FindBirds_Started"),Vn.Play("deep_m2_01","deep_m2_02","deep_m2_03")}}(),kr=function(){return function(e){console.log("BirdNotebookInteraction_Started"),Vn.Play("deep_m3_01"),qo.NotebookUnlocked=!0,zo.SaveLevelLayout(e),O.i.delayedCall(1.5,function(){e.GameUI.SetEnabled(!1),e.GameInput.SetEnabled(!1),O.i.to(e.View.scale,.5,{x:1.5,y:1.5,ease:O.e.easeInOut})}),O.i.delayedCall(6,function(){var t={entryName:Ka.Birds};rs.Birds.CurrentTemplate=3,l.NotebookVO="notebookTutorial",e.SceneService.NavigateTo(qa.Notebook,t)})}}(),Tr=function(){return function(e){console.log("Tapir_Collection_Started:"),Vn.Play(a.HM_Tapir_Collection),l.CollectionBoxVO="help_tapir_collection2"}}(),Cr=function(){return function(e){console.log("Mole_Collection_Started:"),Vn.Play(a.HM_Mole_Collection),l.CollectionBoxVO="help_mole_collection2"}}(),Pr=function(){return function(e){console.log("Mole_Sieve_Started:"),Vn.Play(a.HM_Mole_Sieve),l.RocksCollected=0}}(),Br=function(){return function(e){console.log("HM_Mole_Flowers_Started");var t=e.TaskService.Task;e.CharacterService.Get(t.Giver),Vn.Play(t.Name),e.FlowerCount.Reset()}}(),Ir=function(){return function(e,t){console.log("Mole_Draw_Started"),O.i.delayedCall(5,function(){e.GameUI.SetEnabled(!1),e.GameInput.SetEnabled(!1),zo.SaveLevelLayout(e)}),O.i.delayedCall(6,function(){zo.SaveLevelLayout(e);var t={entryName:Ka.Nocturnal};rs.Nocturnal.CurrentTemplate=1,e.SceneService.NavigateTo(qa.Notebook,t)}),Vn.Play(t.Name)}}(),Ar=function(){return function(e){console.log("TalkToMsMole_Started"),Vn.Play("night_m1_01")}}(),Or=function(){return function(e){console.log("FindTorch_Started"),Vn.Play("night_m1_02")}}(),Mr=function(){return function(e){console.log("FindOwl_Started"),Vn.Play("night_m2_01")}}(),xr=function(){return function(e){console.log("FindMoth_Started"),Vn.Play("night_m3_01")}}(),Gr=function(){return function(e){console.log("FindKatydid_Started"),Vn.Play("night_m4_01")}}(),Dr=function(){return function(e){console.log("TalkToOlive_Completed");var t=e.CharacterService,n=t.Elinor,o=t.Get(Ya.Olive);o.View.PlayAnim(es.IDLE,!0),O.i.delayedCall(1.5,function(){o.SetTarget(n),o.View.on("pointertap",function(){return t.emit("mainCharTapped",Ya.Olive)}),l.OliveUnlocked=!0;var i=e;i.PointHand&&(i.PointHand.visible=!0,i.PointHand.Ring.visible=!1,i.PointHand.position.set(2300,500))}),Vn.Play("clubhouse_m1_01","clubhouse_m1_02","clubhouse_m1_03"),l.OliveUnlocked=!0,Ln.Save()}}(),Lr=function(){return function(e){Vn.Play("clubhouse_m1_04","clubhouse_m1_05");var t=e.CharacterService,n=t.Get(Ya.Olive),o=t.Elinor,i=new no(new r.Point(o.Position.x,500));e.GameObjectService.AddInteractionPoint(i),l.CompletedAreas[e.ID]=!0,zo.SaveLevelLayout(e);var a=e.GameObjectService.InteractionPoints.find(function(e){return e.Data.Name==Za.Butterfly});a&&(a.View.visible=!1);var s=e.Butterfly;s&&O.i.delayedCall(6,function(){s.SetTarget(o,new r.Point(0,-1e3))}),O.i.delayedCall(8,function(){var n=t.Elinor.Position.x,o=new PIXI.spine.Spine(b.Get("Butterfly"));o.state.setAnimation(0,"landing",!1),o.state.addAnimation(0,"animation",!0,0),o.position.set(n,500),e.View.AddObject(o),o.update(0),O.i.delayedCall(4,function(){o.visible=!1,a&&(a.Data.Position.x=n,a.View.position.x=n,a.View.visible=!0)})});var c=e;c.PointHand&&(c.PointHand.visible=!1),e.GameUI.ToolBarView.AddTutHand(),l.AriUnlocked&&e.CharacterService.Get(Ya.Ari).SetTarget(n),pi.TutorialBegin("use magnifying glass")}}(),Fr=function(){return function(e){console.log("UseMagGlass_Completed"),l.CompletedAreas[qa.Clubhouse]=!0,zo.SaveLevelLayout(e),O.i.delayedCall(.5,function(){Vn.Play("olive_thanks")}),O.i.delayedCall(1,function(){e.GameUI.OnMissionComplete(a.UseMagGlass)}),O.i.delayedCall(4,function(){Vn.Play("clubhouse_m2_05","clubhouse_m2_06")}),pi.TutorialComplete("use magnifying glass")}}(),Hr=function(){return function(e){console.log("FindSieve_Completed"),Vn.Play("riverbank_m1_03","riverbank_m1_04"),pi.TutorialBegin("use sifter")}}(),Vr=function(){return function(e){console.log("UseSieve_Completed"),Vn.Play("riverbank_m2_02");var t=e.CharacterService.Elinor,n=k.clamp(t.Position.x+550,600,5500),o=new Kn(ns.Shovel,n,500),i=new It(o);e.GameObjectService.ToolViews.push(i),zo.SaveLevelLayout(e),O.i.delayedCall(3,function(){i.x=k.clamp(t.Position.x+550,600,5500),e.View.AddObject(i,!1)}),pi.TutorialComplete("use sifter")}}(),Nr=function(){return function(e){console.log("FindShovel_Completed"),Vn.Play("riverbank_m3_01"),pi.TutorialBegin("use shovel")}}(),jr=function(){return function(e){console.log("UseShovelForSieve_Completed"),Vn.Play("riverbank_m3_02"),pi.TutorialComplete("use shovel")}}(),Rr=function(){return function(e){console.log("ViewCollectionBox_Completed"),l.CompletedAreas[qa.RiverBank]=!0,zo.SaveLevelLayout(e),O.i.delayedCall(.5,function(){Vn.Play("ari_thanks")}),O.i.delayedCall(1,function(){e.GameUI.OnMissionComplete(a.ViewCollectionBox)}),O.i.delayedCall(4,function(){Vn.Play("riverbank_m3_04")})}}(),Ur=function(){return function(e){console.log("FindWateringCan_Completed"),Vn.Play("yard_m1_03"),pi.TutorialBegin("use watering can")}}(),Er=function(){return function(e){console.log("GrowFirstFlower_Completed"),e.CharacterService.Get(Ya.Ranger).View.PlayAnim(es.IDLE,!0),Vn.Play("yard_m1_04"),pi.TutorialComplete("use watering can")}}(),Wr=function(){return function(e){console.log("WaterAfterDigging_Completed"),Vn.Play("yard_m2_03")}}(),Xr=function(){return function(e){console.log("GrowChrysanthemumPlant_Completed"),l.CompletedAreas[qa.ElinorsHouse]=!0,l.UnlockedAreas[e.SceneToRight]=!0,Mn.UpdateLocks(),zo.SaveLevelLayout(e);var t=e.CharacterService.Get(Ya.SenorTapir);O.i.delayedCall(.5,function(){t.SetDestination(new r.Point(7e3,450)),Vn.Play("ranger_thanks")}),O.i.delayedCall(1,function(){e.GameUI.OnMissionComplete(a.GrowChrysanthemumPlant)})}}(),zr=function(){return function(e){console.log("TalkToCamilla_Completed"),Vn.Play("deep_m1_00","deep_m1_01","deep_m1_02"),e.CharacterService.Get(Ya.Camilla).View.PlayAnim(es.IDLE,!0)}}(),Yr=function(){return function(e){console.log("FindBinoculars_Completed"),Vn.Play("deep_m1_03")}}(),Kr=function(){return function(e){console.log("FindYellowBird_Completed"),Vn.Play("deep_m2_09","deep_m2_10"),qo.NotebookUnlocked=!0,rs.Birds.CurrentTemplate=1,zo.SaveLevelLayout(e)}}(),Zr=function(){return function(e){console.log("BirdNotebookInteraction_Completed"),l.CompletedAreas[qa.DeepForest]=!0,zo.SaveLevelLayout(e),O.i.delayedCall(.5,function(){Vn.Play("camilla_thanks")}),O.i.delayedCall(1,function(){e.GameUI.OnMissionComplete(a.BirdNotebookInteraction)}),O.i.delayedCall(4,function(){Vn.Play("deep_m3_06","deep_m3_07")})}}(),qr=function(){return function(e){console.log("FindOwl_Completed"),Vn.Play("night_m2_05","night_m2_03")}}(),Jr=function(){return function(e){console.log("FindMoth_Completed"),Vn.Play("night_m3_02")}}(),Qr=function(){return function(e){console.log("FindKatydid_Completed"),l.GameComplete=!0,l.CompletedAreas[qa.NightForest]=!0,zo.SaveLevelLayout(e),O.i.delayedCall(.5,function(){Vn.Play("msMole_thanks")}),O.i.delayedCall(1,function(){e.GameUI.OnMissionComplete(a.FindKatydid)}),O.i.delayedCall(4,function(){Vn.Play("night_m4_02","night_m4_03","night_m4_04")}),O.i.delayedCall(18,function(){e.PlayRewardPayoff()})}}(),$r=function(){return function(e){console.log("TalkToChar_Completed"),e.CharacterService.Elinor.Stop(),e.GameInput.SetEnabled(!1),e.GameUI.SetEnabled(!1),O.i.to(e.View.scale,.5,{x:1.5,y:1.5,ease:O.e.easeOut}),O.i.to(e.View,.5,{y:za.Height/2+170,ease:O.e.easeOut}),e.GameUI.Hide(),O.i.delayedCall(2.5,function(){e.GameInput.SetEnabled(!0),e.GameUI.SetEnabled(!0),O.i.to(e.View.scale,1,{x:1,y:1,ease:O.e.easeOut}),O.i.to(e.View,1,{y:za.Height/2,ease:O.e.easeOut}),e.GameUI.Show()})}}(),ea=function(){return function(e,t,n){console.log("Task_Started:",t.Name),Vn.Play(t.Name)}}(),ta=function(){return function(e,t){console.log("Task_Completed:",t.Name),Vn.Play(t.Giver+"_thanks")}}(),na=function(){return function(e){console.log("Camilla_Eggs_Started"),Vn.Play("Camilla_Eggs"),O.i.delayedCall(2.5,function(){e.GameUI.SetEnabled(!1),e.GameInput.SetEnabled(!1),zo.SaveLevelLayout(e)}),O.i.delayedCall(3.2,function(){var t={entryName:Ka.Birds};rs.Birds.CurrentTemplate=1,l.NotebookVO="Camilla_Eggs2",e.SceneService.NavigateTo(qa.Notebook,t)})}}(),oa=function(){return function(e){console.log("GetHelperMission_Started");var t=e.TaskService.Task;t&&Vn.Play(t.Giver+"_help")}}(),ia=(function(){}(),function(){return function(e){console.log("LeafMisssion_Completed"),Vn.Play("camilla_thanks")}}()),ra=function(){return function(e){console.log("FindKatydidHelpMission_Completed"),Vn.Play("msMole_thanks")}}(),aa=(function(){}(),function(){return function(e){console.log("FindToad_Started");var t=e.TaskService.Task;Vn.Play(t.Name)}}()),sa=function(){return function(e){console.log("HM_DrawToad_Started"),Vn.Play("HM_DrawToad"),e.CharacterService.Get(Ya.SenorTapir),O.i.delayedCall(2.5,function(){e.GameUI.SetEnabled(!1),e.GameInput.SetEnabled(!1),zo.SaveLevelLayout(e)}),O.i.delayedCall(5.5,function(){l.NotebookVO="HM_DrawToad2";var t={entryName:Ka.Nocturnal};rs.Nocturnal.CurrentTemplate=3,e.SceneService.NavigateTo(qa.Notebook,t)})}}(),la=function(){return function(e){console.log("FindToad_Completed"),Vn.Play("senorTapir_thanks")}}(),ca=function(){return function(e){console.log("DrawFlowers_Started");var t=e.TaskService.Task;O.i.delayedCall(5,function(){zo.SaveLevelLayout(e),rs.Plants.CurrentTemplate=1;var t={entryName:Ka.Plants};l.NotebookVO="help_mom_flowers2",e.SceneService.NavigateTo(qa.Notebook,t)}),Vn.Play(t.Name)}}(),ua=function(){return function(e){console.log("DrawFlowers_Completed"),Vn.Play("ranger_thanks")}}(),pa=function(){return function(e){console.log("SortByShape_Started");var t=e.TaskService.Task;O.i.delayedCall(3,function(){zo.SaveLevelLayout(e),l.CollectionBoxVO="help_mom_collection2",e.SceneService.NavigateTo(qa.CollectionBox)}),Vn.Play(t.Name)}}(),da=function(){return function(e){console.log("SortByShape_Completed"),Vn.Play("ranger_thanks")}}(),ha=function(){return function(e,t){var n=e.Name;return n==a.UseMagGlass?new pr(t):n==a.TalkToAri?new dr(t):n==a.UseSieve?new hr(t):n==a.UseShovelForSieve?new fr(t):n==a.TalkToRanger?new gr(t):n==a.UseShovelForPlanting?new mr(t):n==a.WaterAfterDigging?new _r(t):n==a.FindChrysanthemum?new yr(t):n==a.InspectChrysanthemum?new vr(t):n==a.SelectChrysanthemumSeed?new br(t):n==a.GrowChrysanthemumPlant?new wr(t):n==a.FindBirds?new Sr(t):n==a.BirdNotebookInteraction?new kr(t):n==a.TalkToMsMole?new Ar(t):n==a.FindTorch?new Or(t):n==a.FindOwl?new Mr(t):n==a.FindMoth?new xr(t):n==a.FindKatydid?new Gr(t):n==a.GetHelperMission?new oa(t):n==a.HM_Camilla_Eggs?new na(t):n==a.HM_DrawFlowers?new ca(t):n==a.HM_Leaf_Spikey?new ea(t,e,7):n==a.HM_Camilla_Rocks?new ea(t,e,8):n==a.HM_FindKatydid?new ea(t,e,8):n==a.HM_Tapir_Lizard?new ea(t,e,8):n==a.HM_Mole_Flowers?new Br(t):n==a.HM_FindToad?new aa(t):n==a.HM_SortByShape?new pa(t):n==a.HM_Mole_Collection?new Cr(t):n==a.HM_Mole_Draw?new Ir(t,e):n==a.HM_DrawToad?new sa(t):n==a.HM_Tapir_Collection?new Tr(t):n==a.HM_Mole_Sieve?new Pr(t):we.Any(n,[a.HM_Moms_Snail,a.HM_Moms_Caterpillar])?new ea(t,e,5):we.Any(n,[a.HM_Sally_Ant,a.HM_Mole_Moth])?new ea(t,e,5):we.Any(n,[a.HM_Sally_Eggs,a.HM_Camilla_Flowers,a.HM_Sally_Ant_Carry,a.HM_Moms_Bee,a.HM_Camilla_Bush])?new ea(t,e,6):we.Any(n,[a.HM_Sally_Beetle,a.HM_Camilla_Sap,a.HM_Tapir_Flowers,a.HM_Mole_Draw])?new ea(t,e,7):we.Any(n,[a.HM_Sally_Log,a.HM_Tapir_Water])?new ea(t,e,8):we.Any(n,[a.HM_Sally_Ant_Hill])?new ea(t,e,9):void console.warn("Failed to get start command for: "+n)}}(),fa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ga=function(e){function t(t,n){var o=e.call(this,t,n,["game"])||this;return o.AddToStage=function(e){e.addChildAt(o.GameUI,0),e.addChildAt(o.View,0)},o.initHelperMission=function(e){var t=o.TaskService.Task,n=o.CharacterService.Get(e);if(0==zo.Tasks.length)if(t)n.SetVisible(t.Giver==n.Name);else{var i=new Eo(a.GetHelperMission,e,o.ID,!1,!1);zo.Tasks.push(i),n.View.PlayAnim(es.CALL,!0)}},o.PlayRewardPayoff=function(){l.RewardPayoffPlayed=!0,qo.MapUnlocked=!0,o.GameInput.SetEnabled(!1),o.GameUI.SetEnabled(!1),O.i.delayedCall(.2,function(){O.i.to(o.View.scale,.5,{x:1.5,y:1.5,ease:O.e.easeInOut})}),O.i.delayedCall(1,function(){Vn.Play("final_unlock_1"),o.CharacterService.Elinor.View.PlayAnim("SelectAnim",!1),o.CharacterService.Get(Ya.Ari).View.PlayAnim("SelectAnim",!1),o.CharacterService.Get(Ya.Olive).View.PlayAnim("SelectAnim",!1)}),O.i.delayedCall(3.75,function(){o.SceneService.NavigateTo(qa.Map,{showReward:!0})})},o.remindUserOfTools=function(){if(Vn.currentVO)console.log("cenceled coz of vo");else{var e=(new Date).getTime();qo.CollectionBoxUnlocked?l.LastCollectionBoxOpen?(e-l.LastCollectionBoxOpen)/1e3>60?Vn.Play("collectionbox_reminder"):console.log("time since last box check: "+(e-l.LastCollectionBoxOpen)):Vn.Play("collectionbox_reminder"):qo.NotebookUnlocked&&(l.LastNotebookOpen?(e-l.LastNotebookOpen)/1e3>300?Vn.Play("notebook_reminder"):console.log("time since notebook check: "+(e-l.LastCollectionBoxOpen)):Vn.Play("notebook_reminder")),o.toolReminder=O.i.delayedCall(300,o.remindUserOfTools)}},l.CompletedAreas[n]?o.assetTags.push(n+"_HelperMissions"):o.assetTags.push(n+"_Missions"),o}return fa(t,e),Object.defineProperty(t.prototype,"SceneToLeft",{get:function(){return this.sceneToLeft},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SceneToRight",{get:function(){return this.sceneToRight},enumerable:!0,configurable:!0}),t.prototype.Start=function(){this.InitServices(),this.InitCommands(),this.InitViews()},t.prototype.InitServices=function(){l.PreviousGameScene!=this.ID&&pi.EnterArea(this.ID),l.PreviousGameScene=this.ID,l.UnlockedAreas[this.ID]=!0,l.VisitedAreas[this.ID]=!0;var e=zo.LoadLevelLayout(this.ID);this.sceneToLeft=e.ZoneToLeft,this.sceneToRight=e.ZoneToRight,Mn.Init(e),this.View=Vi.MakeLevel(),this.Tools=new qo,this.GameUI=new gi,this.CharacterService=new ri(e),this.GameObjectService=new sr(this,e),this.GameInput=new Gn(this,e),this.GameScroller=new ai(this,e.Width),this.TaskService=new ei(this),this.TaskViews=new ti(this),this.ToolHintService=new Qo(this),this.navigationService=new ui(this,e),this.FlowerCount=new ni,this.FlowerAttraction=new oi(this),this.Tools.Init(this),this.GameUI.Init(this),l.GameComplete&&!l.RewardPayoffPlayed&&this.PlayRewardPayoff()},t.prototype.InitCommands=function(){var e=this;this.CharacterService.on("mainCharTapped",function(t){return new ji(t,e)}),this.CharacterService.on("npcTapped",function(t){return new Ri(t,e)}),this.GameInput.on("targetTapped",function(){return new Ui(e)}),this.CharacterService.on("groupStopped",function(){return new Ui(e)}),this.TaskService.on(ei.Start,function(t){return new ha(t,e)}),this.TaskService.on(ei.Complete,function(t){return new ur(t,e)}),this.TaskService.on(ei.RepeatInstrux,function(t){return new Ei(t,e)}),this.Tools.OnPickup.Sub(function(t){return new Ni(e,t)}),this.Tools.TryUse.Sub(function(t){return new Wi(e,t)}),this.Tools.FlowerGrown.Sub(this.FlowerAttraction.OnFlowerGrown),this.GameUI.MapBtn.once("pointerdown",function(){e.GameUI.SetEnabled(!1),e.GameUI.SetEnabled(!1),zo.SaveLevelLayout(e),e.SceneService.NavigateTo(qa.Map)})},t.prototype.InitViews=function(){this.CharacterService.AddViewsToLevel(this.View),this.GameObjectService.AddViewsToLevel(this.View),this.CharacterService.Get(Ya.Ari).SetVisible(l.AriUnlocked||this.ID==qa.RiverBank),""!=l.EnterAnimation&&(this.CharacterService.Elinor.View.PlayAnim(l.EnterAnimation,!1),l.EnterAnimation=""),l.PreviousScene==qa.CollectionBox&&this.CharacterService.Get(Ya.Ari).View.PlayAnim("BoxAwayAnim",!1),l.UnlockedAreas[this.sceneToRight]&&this.CharacterService.Get(Ya.SenorTapir).SetVisible(!1),qo.NotebookUnlocked&&this.CharacterService.Get(Ya.Olive).View.ShowBubble(!0),qo.CollectionBoxUnlocked&&this.CharacterService.Get(Ya.Ari).View.ShowBubble(!0),this.CharacterService.Get(Ya.SenorTapir).InitSenorTapir(this),l.GameComplete&&(this.toolReminder=O.i.delayedCall(60,this.remindUserOfTools))},t.prototype.Update=function(e){this.GameUI.Update(e),this.GameInput.Update(e),this.GameScroller.Update(e),this.View.Update(e),this.CharacterService.Update(e)},t.prototype.SlowUpdate=function(e){this.GameUI.SlowUpdate(e),this.GameObjectService.SlowUpdate(e),this.ToolHintService.SlowUpdate(e),this.navigationService.SlowUpdate(e),this.CharacterService.SlowUpdate(e),this.TaskService.SlowUpdate(e),this.TaskViews.SlowUpdate(e)},t.prototype.Teardown=function(){this.TaskService.Teardown(),this.GameObjectService.Teardown(),this.View.parent.removeChild(this.View),this.GameUI.parent.removeChild(this.GameUI),this.View.destroy(),this.GameUI.destroy(),this.toolReminder&&this.toolReminder.kill()},t}(v),ma=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_a=function(e){function t(t,n){return e.call(this,t,n,["interaction"])||this}return ma(t,e),t}(v),ya=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),va=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.LoadGame=function(){t.View.interactive=!1,t.View.removeAllListeners(),l.PlayGameName=!0;var e=l.PreviousGameScene;t.SceneService.NavigateTo(e),pi.Send("clickPlay")},t}return ya(t,e),t.prototype.Start=function(){this.View=new _i,this.View.PlayBtn.once("pointerdown",this.LoadGame)},t}(v),ba=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ba(t,e),t.prototype.Start=function(e){var t=this;this.View=new vi,this.showTaskGiver(),this.View.CloseBtn.once("pointertap",this.SceneService.NavigateBack),this.View.LvlBtnClubhouse.once("pointertap",function(){return t.onDestSelected(qa.Clubhouse,"left")}),this.View.LvlBtnRiverBank.once("pointertap",function(){return t.onDestSelected(qa.RiverBank,"left")}),this.View.LvlBtnElinorsHouse.once("pointertap",function(){return t.onDestSelected(qa.ElinorsHouse,"left")}),this.View.LvlBtnNightForest.once("pointertap",function(){return t.onDestSelected(qa.NightForest,"left")}),this.View.LvlBtnDeepForest.once("pointertap",function(){return t.onDestSelected(qa.DeepForest,"left")}),e&&e.showReward&&this.View.PlayPayoff()},t.prototype.showTaskGiver=function(){var e=zo.CurrentTask;e&&this.View.ShowQuestHelper(e)},t.prototype.onDestSelected=function(e,t){var n=this;this.View.DisableInput(),this.View.MoveElinor(e),O.i.delayedCall(.5,function(){zo.SetCharPos(e,t),n.SceneService.NavigateTo(e)})},t}(v),Sa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ka=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.panToShowOlive=function(){t.elinor.View.PlayAnim(es.CALL,!1),O.i.delayedCall(6.2,function(){t.olive.View.PlayAnim(es.CALL,!0)}),O.i.delayedCall(4,function(){t.GameScroller.IntroPan(),O.i.delayedCall(5,t.onPanComplete)})},t.onPanComplete=function(){t.GameInput.SetEnabled(!0),t.GameUI.SetEnabled(!0),t.Butterfly=new dn(900,100),t.Butterfly.SetTarget(t.elinor,new r.Point(300,-100)),t.View.AddObject(t.Butterfly),t.PointHand=new cn(900,450,!0),t.View.AddObject(t.PointHand),O.i.delayedCall(3,function(){t.GameUI.ArrowButtons.visible=!0}),pi.TutorialBegin("movement controls")},t.Update=function(n){e.prototype.Update.call(t,n),t.updateTut(n)},t.updateTut=function(e){!t.movedSignificantly&&t.elinor.Position.x>800&&(t.movedSignificantly=!0,t.PointHand&&(t.PointHand.visible=!1,pi.TutorialComplete("movement controls"))),t.Butterfly&&t.Butterfly.Update(e)},t}return Sa(t,e),t.prototype.InitCommands=function(){e.prototype.InitCommands.call(this),l.MG_uses>=1&&(l.UnlockedAreas[this.SceneToRight]=!0),Mn.UpdateLocks()},t.prototype.InitViews=function(){var t=this;e.prototype.InitViews.call(this),this.elinor=this.CharacterService.Elinor,this.olive=this.CharacterService.Get(Ya.Olive),l.OliveUnlocked||(this.olive.SetTarget(null),this.olive.View.PlayAnim(es.IDLE,!0));var n=new PIXI.spine.Spine(b.Get("Clubhouse"));n.on("pointertap",function(e){n.state.setAnimation(0,"animation",!1),Ko.Play("wobble")}),n.position.set(1270,240),n.interactive=!0,n.buttonMode=!0,this.View.AddClubhouse(n),l.OnboardingComplete||(this.GameInput.SetEnabled(!1),this.GameUI.SetEnabled(!1),this.GameUI.ArrowButtons.visible=!1,l.OnboardingComplete=!0,O.i.delayedCall(2,function(){t.panToShowOlive();var e="onboarding_3_"+(w.IsDesktop?"desktop":"tablet"),n="onboarding_4_"+(w.IsDesktop?"desktop":"tablet");Vn.Play("onboarding_1","onboarding_2",e,n)}))},t}(ga),Ta=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ca=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Update=function(n){e.prototype.Update.call(t,n)},t.initHelperMission=function(e){console.log("initHelperMission");var n=t.CharacterService.Get(e),o=t.TaskService.Task;if(0==zo.Tasks.length)if(o)n.SetVisible(o.Giver==n.Name);else{var i=new Eo(a.GetHelperMission,e,t.ID,!1,!1);zo.Tasks.push(i),n.View.PlayAnim(es.CALL,!0)}else n.SetVisible(!1)},t}return Ta(t,e),t.prototype.InitViews=function(){e.prototype.InitViews.call(this),this.initHelperMission(Ya.Sally);var t=new PIXI.spine.Spine(b.Get("Clubhouse"));t.on("pointertap",function(e){t.state.setAnimation(0,"animation",!1),Ko.Play("wobble")}),t.position.set(1270,240),t.interactive=!0,t.buttonMode=!0,this.View.AddClubhouse(t)},t}(ga),Pa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ba=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.initHelperMission=function(e){var n=t.CharacterService.Get(e),o=new r.Point(2350,450),i=t.TaskService.Task;if(0==zo.Tasks.length)if(i)i.Giver==n.Name?(n.SetDestination(o),n.MoveTo(o.x,o.y),n.SetVisible(!0)):n.SetVisible(!1);else{var s=new Eo(a.GetHelperMission,e,t.ID,!1,!1);zo.Tasks.push(s),n.View.PlayAnim(es.CALL,!0),n.SetDestination(o),n.MoveTo(o.x,o.y),n.SetVisible(!0)}},t}return Pa(t,e),t.prototype.InitCommands=function(){e.prototype.InitCommands.call(this),l.CollectionBoxVisited&&(l.UnlockedAreas[this.SceneToRight]=!0),l.UnlockedAreas[this.SceneToLeft]=!0,Mn.UpdateLocks()},t.prototype.InitViews=function(){e.prototype.InitViews.call(this),this.ari=this.CharacterService.Get(Ya.Ari),l.AriUnlocked||(this.ari.MoveTo(2300,450),this.ari.View.PlayAnim(es.CALL,!0),this.ari.SetTarget(null));var t=new ce("Stream",new r.Point(1600,320),"StreamFX");t.emitter.autoUpdate=!0,this.View.AddObjectToBackground(t,2),this.initHelperMission(Ya.SenorTapir)},t}(ga),Ia=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ia(t,e),t.prototype.InitCommands=function(){var t=this;e.prototype.InitCommands.call(this),l.UnlockedAreas[this.SceneToLeft]=!0,Mn.UpdateLocks(),l.CompletedAreas[qa.NightForest]&&this.initHelperMission(Ya.Ranger);var n=this.CharacterService.Get(Ya.Ranger);zo.Tasks.filter(function(e){return e.SceneName==t.ID}).length>0&&null==this.TaskService.Task&&n.View.PlayAnim(es.CALL,!0)},t}(ga),Oa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oa(t,e),t.prototype.InitCommands=function(){var t=this;e.prototype.InitCommands.call(this),l.Notebook_uses>0&&(l.UnlockedAreas[this.SceneToRight]=!0),l.UnlockedAreas[this.SceneToLeft]=!0,Mn.UpdateLocks(),l.CompletedAreas[qa.NightForest]&&this.initHelperMission(Ya.Camilla);var n=this.CharacterService.Get(Ya.Camilla);zo.Tasks.filter(function(e){return e.SceneName==t.ID}).length>0&&null==this.TaskService.Task&&n.View.PlayAnim(es.CALL,!0)},t}(ga),xa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ga=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xa(t,e),t.prototype.InitCommands=function(){var t=this;e.prototype.InitCommands.call(this),l.UnlockedAreas[this.SceneToRight]=!0,l.UnlockedAreas[this.SceneToLeft]=!0,Mn.UpdateLocks(),this.initHelperMission(Ya.MsMole);var n=this.CharacterService.Get(Ya.MsMole);zo.Tasks.filter(function(e){return e.SceneName==t.ID}).length>0&&null==this.TaskService.Task&&n.View.PlayAnim(es.CALL,!0)},t}(ga),Da=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),La=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onBackBtn=function(){t.canGotoIndex?t.View.GotoIndex():(t.View.NotebookView.Save(),t.SceneService.NavigateBack(),t.notebookVOTimeout&&t.notebookVOTimeout.kill())},t.gotoEntry=function(e){t.entry=e,t.View.GotoEntry(e),t.prevTemplateName!=e.Name&&pi.SelectContent("notebook catergory: "+e.Name),t.prevTemplateName=e.Name},t.GotoStickers=function(){t.View.GotoStickers()},t.GotoDrawing=function(){t.View.GotoDrawing()},t.gotoNextTemplate=function(){if(t.entry){var e=t.entry.CurrentTemplate;t.entry.CurrentTemplate=k.mod(e+1,t.entry.Templates.length),t.updateTemplate(e)}},t.gotoPrevTemplate=function(){if(t.entry){var e=t.entry.CurrentTemplate;t.entry.CurrentTemplate=k.mod(e-1,t.entry.Templates.length),t.updateTemplate(e)}},t.playIntroVO=function(){l.NotebookVO&&("notebookTutorial"==l.NotebookVO?t.addTutorialVO():Vn.Play(l.NotebookVO)),l.NotebookVO=null},t.addTutorialVO=function(){Vn.Play("deep_m3_02");var e=O.i.delayedCall(12,function(){Vn.Play("deep_m3_03"),t.jiggle(t.View.Palette.StickerBtn)});t.View.Palette.StickerBtn.once("pointertap",function(){e.kill(),Vn.Play("deep_m3_04"),O.i.delayedCall(10,function(){t.jiggle(t.View.NotebookView.BackBtn)})})},t.updateTemplate=function(e){t.View.UpdateTemplate(e),t.notebookVOTimeout&&t.notebookVOTimeout.kill(),t.notebookVOTimeout=O.i.delayedCall(4,t.playVOIfNotObservedInGame)},t.playVOIfNotObservedInGame=function(){if(t.entry){Hn.Unload(t.notebookVO);var e;t.entry.Name==Ka.Insects?t.hasValidVO(1,[Za.AntSingle,Za.AntFood])?e="nb_ant":t.hasValidVO(2,[Za.BugRed,Za.BugYellow,Za.BugOrange,Za.BugWings])&&(e="nb_ladybug"):t.entry.Name==Ka.LifeCycle?t.hasValidVO(2,[Za.CaterpillarMag])?e="nb_caterpillar":t.hasValidVO(3,[Za.Chrysalis])&&(e="nb_chrysalis"):t.entry.Name==Ka.Homes?t.hasValidVO(1,[Za.AntHill])?e="nb_ant_hill":t.hasValidVO(2,[Za.SpiderRock,Za.SpiderLog,Za.SpiderWeb])&&(e="nb_spider"):t.entry.Name==Ka.Nocturnal?t.hasValidVO(3,[Za.ToadMag,Za.ToadStandalone,,Za.ToadTorch])&&(e="nb_toad"):t.entry.Name==Ka.Plants?1!=t.entry.CurrentTemplate||$a.Unocked[$a.Daisy]?2!=t.entry.CurrentTemplate||$a.Unocked[$a.Bell]?3!=t.entry.CurrentTemplate||$a.Unocked[$a.Cosmos]?4!=t.entry.CurrentTemplate||$a.Unocked[$a.Tulip]||(e="nb_tulip"):e="nb_cosmos":e="nb_bell_flower":e="nb_daisy":t.entry.Name==Ka.Birds?t.hasValidVO(1,[Za.Nest])?e="nb_eggs":t.hasValidVO(2,[Za.ChickWhite])&&(e="nb_baby_bird"):t.entry.Name==Ka.Hiding&&t.hasValidVO(2,[Za.LizardLog,Za.Lizard])&&(e="nb_lizard"),e&&(t.notebookVO=Hn.Load("assets/sounds/vo/notebook/"+e+".mp3"),t.notebookVO.play(),Vn.PlayCC(e))}},t.hasValidVO=function(e,n){if(t.entry.CurrentTemplate==e){for(var o=0;o<n.length;o++)if(l.CompletedInteractions[n[o]])return!1;return!0}return!1},t.jiggle=function(e){var t=new O.h;t.to(e,.08,{rotation:-.1}),t.to(e,.1,{rotation:.2}),t.to(e,.14,{rotation:-.3}),t.to(e,.1,{rotation:.2}),t.to(e,.08,{rotation:-.1}),t.to(e,.05,{rotation:0})},t}return Da(t,e),t.prototype.Start=function(e){var t=e?e.entryName:"";this.entry=t?rs.Get(t):null,this.canGotoIndex=null==this.entry,this.View=new ki(this.entry,this.gotoEntry),this.View.NotebookView.BackBtn.on("pointertap",this.onBackBtn),this.View.LeaveButton.once("pointertap",this.SceneService.NavigateBack),this.View.NotebookView.NextTemplateButton.on("pointertap",this.gotoNextTemplate),this.View.NotebookView.PrevTemplateButton.on("pointertap",this.gotoPrevTemplate),this.View.Palette.StickerBtn.on("pointertap",this.GotoStickers),this.View.Palette.DrawBtn.on("pointertap",this.GotoDrawing),qo.NotebookUnlocked=!0,this.playIntroVO(),this.notebookVOTimeout=O.i.delayedCall(7,this.playVOIfNotObservedInGame),pi.SelectContent("notebook"),l.Notebook_uses++,l.LastNotebookOpen=(new Date).getTime()},t}(_a),Fa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ha=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextVoCount=5,t.onRockPickedUp=function(e,n){t.View.CloseBtn.alpha=.3},t.onRockPlaced=function(e,n){t.nextVoCount--,t.nextVoCount<=0&&(t.nextVoCount=k.Range(5,8),Vn.Play("collectionbox_payoff_"+Se.Any(1,2,3,4,5))),t.View.CloseBtn.alpha=1},t.onSelectClose=function(e){t.View.SavePos(),t.SceneService.NavigateBack()},t}return Fa(t,e),t.prototype.Start=function(){this.View=new Bi,this.View.CloseBtn.once("pointertap",this.onSelectClose),this.View.RockPickedUp.Sub(this.onRockPickedUp),this.View.RockPlaced.Sub(this.onRockPlaced),l.CollectionBoxVO?(Vn.Play(l.CollectionBoxVO),l.CollectionBoxVO=""):Vn.Play("collectionbox_entry_"+Se.Any(1,2,3)),pi.SelectContent("collection box"),l.CollectionBoxVisited=!0,l.LastCollectionBoxOpen=(new Date).getTime()},t.prototype.Update=function(e){this.View.Update(e)},t}(v),Va=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Na=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.InitTarget=function(e){t.interactionName=Za.Butterfly,e.SeedType?(t.isFlower=!0,t.interactionName=e.SeedType,t.loadFlowerVO(e.SeedType,$a.Unocked[e.SeedType]),$a.Unocked[e.SeedType]||($a.Unocked[e.SeedType]=!0,l.NewSeedType=e.SeedType)):e.InteractionName?t.interactionName=e.InteractionName:(console.error("Invalid args!"),console.error(e))},t.autoFindObject=function(){t.objFound||t.View.magGlass.MoveToTarget()},t.findObject=function(){t.objFound||(t.objFound=!0,t.View.FindObject(),l.CompletedInteractions[t.interactionName]=!0,t.observationVo&&(t.observationVo.play(),Vn.PlayCC(t.observationVoID),Vn.Stop()),t.playFoundVO(),t.autoFindTl&&t.autoFindTl.kill())},t.playFoundVO=function(){console.log("playFoundVO: "+t.interactionName),t.interactionName==Za.KatydidMag?Ko.Play("katydid",.3):t.interactionName==Za.ToadStandalone?Ko.Play("sfx_toad_throat",.3):Ko.Play("generic_success_"+Se.Any(1,2),.3)},t.loadFlowerVO=function(e,n){if(e==$a.Daisy)t.observationVoID="cuo_mg_Daisy_2",t.observationVo=Hn.Load("assets/sounds/vo/flowerCuo/cuo_mg_Daisy_2.mp3");else{t.observationVoID="cuo_mg_"+e+"_"+(n?"2":"1");var o="assets/sounds/vo/flowerCuo/"+t.observationVoID+".mp3";t.observationVo=Hn.Load(o),console.log("this.observationVoID"),console.log(t.observationVoID)}},t.loadObservationVO=function(){var e="assets/sounds/vo/cuo/";if(t.isTutorial)e="assets/sounds/vo/Area1_Clubhouse/",t.observationVoID="clubhouse_m2_04";else{if(t.isFlower)return;if(t.interactionName==Za.Butterfly)t.observationVoID=Se.Any("cuo_mg_butterfly","cuo_mg_bush_butterfly");else if(t.interactionName==Za.BugRed||t.interactionName==Za.BugYellow||t.interactionName==Za.BugOrange)t.observationVoID="cuo_mg_ladybug_1";else if(t.interactionName==Za.BugWings)t.observationVoID="cuo_mg_ladybug_2";else if(t.interactionName==Za.AntSingle)t.observationVoID="cuo_mg_ant_1";else if(t.interactionName==Za.AntFood)t.observationVoID="cuo_mg_ant_2";else if(t.interactionName==Za.AntHill)t.observationVoID="cuo_mg_ant_3";else if(t.interactionName==Za.Bee)t.observationVoID="cuo_mg_bees";else if(t.interactionName==Za.AcornsMag)t.observationVoID="cuo_mg_acorn";else if(t.interactionName==Za.Snail){var n=1+l.InteractionID%2;t.observationVoID="cuo_mg_snail_"+n}else if(t.interactionName==Za.CaterpillarRock)t.observationVoID="cuo_mg_rock_caterpillar";else if(t.interactionName==Za.AntRock)t.observationVoID="cuo_mg_rock_ant";else if(t.interactionName==Za.Worm)t.observationVoID="cuo_mg_rock_worm";else if(t.interactionName==Za.PillBug)t.observationVoID="cuo_mg_rock_bug";else if(t.interactionName==Za.CaterpillarMag)t.observationVoID="cuo_mg_bush_caterpillar";else if(t.interactionName==Za.ElmLeaf){n=1+(l.InteractionID-1)%3;t.observationVoID="cuo_mg_elm_"+n}else if(t.interactionName==Za.MapleLeaf){n=1+(l.InteractionID-1)%3;t.observationVoID="cuo_mg_maple_"+n}else if(t.interactionName==Za.GingkoLeaf){n=1+(l.InteractionID-1)%3;t.observationVoID="cuo_mg_ginko_"+n}else if(t.interactionName==Za.TreeSap)t.observationVoID="cuo_mg_sap";else if(t.interactionName==Za.Chrysalis)t.observationVoID="cuo_mg_chrysalis";else if(t.interactionName==Za.Firefly){l.InteractionID++;n=l.InteractionID%2;t.observationVoID=["cuo_mg_firefly_1","cuo_mg_firefly_2"][n]}else if(t.interactionName==Za.Fish)t.observationVoID="cuo_mg_fish";else if(t.interactionName==Za.Turtle)t.observationVoID="cuo_mg_turtle_1";else if(t.interactionName==Za.LandTurtle)t.observationVoID="cuo_mg_turtle_2";else if(t.interactionName==Za.Lizard)t.observationVoID="cuo_mg_lizard_1";else if(t.interactionName==Za.LizardLog)t.observationVoID="cuo_mg_lizard_2";else if(t.interactionName==Za.KatydidMag)t.observationVoID="cuo_mg_bush_katydid";else if(t.interactionName==Za.ToadMag)t.observationVoID="cuo_mg_bush_toad";else if(t.interactionName==Za.ToadStandalone){n=1+(l.InteractionID-1)%3;t.observationVoID="cuo_fl_toad_"+n}else console.log("this.interactionName: "+t.interactionName),e="assets/sounds/vo/general/",t.observationVoID="elinor_tap"}t.observationVo=Hn.Load(e+t.observationVoID+".mp3")},t}return Va(t,e),t.prototype.Start=function(e){var t=this;this.InitTarget(e),this.View=new Mi(this.interactionName),this.View.OnObjFound.Sub(this.findObject),this.autoFindTl=O.i.delayedCall(20,this.autoFindObject),l.MagGlassTutComplete||(l.MagGlassTutComplete=!0,this.isTutorial=!0,this.View.PlayDragTut(),Vn.Play("clubhouse_m2_03")),this.loadObservationVO(),this.View.UI.OnReturn.Sub(function(){t.SceneService.NavigateBack(),t.View.Teardown()}),l.LastInteraction=this.interactionName},t.prototype.Update=function(e){this.View.Update(e)},t.prototype.Teardown=function(){e.prototype.Teardown.call(this),Hn.Unload(this.observationVo),this.autoFindTl&&this.autoFindTl.kill()},t}(_a),ja=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ra=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enableTorchInteraction=function(){t.View.BG.on("pointerdown",t.moveTorch),t.View.BG.on("pointermove",t.moveTorch),t.View.BG.interactive=!0},t.moveTorch=function(e){var n=new r.Point(e.data.global.x,e.data.global.y);n.x=k.clamp(n.x,0,za.Width),n.y=k.clamp(n.y,0,za.Height),t.View.Torch.position=n;var o=k.dist(n,t.animalPos);!t.animalFound&&o<100&&t.findAnimal()},t.findAnimal=function(){t.animalFound=!0,t.View.FindAnimal(),t.findAnimalTimeout&&(t.findAnimalTimeout.kill(),t.findAnimalTimeout=null),t.lockCameraWhenFound&&(t.View.BG.interactive=!1,O.i.to(t.View.Torch,.2,{x:t.animalPos.x,y:t.animalPos.y}),O.i.delayedCall(.3,function(){return t.View.BG.interactive=!0})),t.observationVo&&(t.observationVo.play(),Vn.PlayCC(t.observationVoID)),Ko.Play("generic_success_"+Se.Any(1,2),.3),O.i.delayedCall(.5,t.highlightLeaveButton),l.CompletedInteractions[t.interactionName]=!0},t.highlightLeaveButton=function(){t.stickerUnlock?(console.error(".PlayStickerAnim(this.stickerUnlock)"),t.View.UI.ShowNextBtn()):t.View.UI.ShowNextBtn()},t.getRandomPos=function(e){return e==Za.Katydid?Se.AnyFromArray(t.caterpillarPositions):e==Za.SpiderLog?Se.AnyFromArray(t.spiderPositions):e==Za.ToadTorch?Se.AnyFromArray(t.toadPositions):e==Za.Owl||e==Za.ToadTorch?{X:za.Width/2-70,Y:190,FacingLeft:!1}:e==Za.Moth?{X:za.Width/2+300,Y:150,FacingLeft:!1}:(console.error("Unexpected interaction: "+e),t.caterpillarPositions[0])},t.caterpillarPositions=[{X:520,Y:450,FacingLeft:!0},{X:340,Y:280,FacingLeft:!0},{X:1120,Y:300,FacingLeft:!1},{X:910,Y:150,FacingLeft:!1},{X:1010,Y:660,FacingLeft:!1}],t.spiderPositions=[{X:520,Y:450,FacingLeft:!0},{X:340,Y:280,FacingLeft:!0},{X:1120,Y:300,FacingLeft:!1},{X:910,Y:150,FacingLeft:!1},{X:1010,Y:660,FacingLeft:!1}],t.toadPositions=[{X:za.Width/2,Y:600,FacingLeft:!0},{X:za.Width/2,Y:600,FacingLeft:!1}],t.loadObservationVO=function(){var e="assets/sounds/vo/cuo/";if(t.interactionName==Za.ToadTorch)t.observationVoID=Se.Any("cuo_fl_toad_1","cuo_fl_toad_2","cuo_fl_toad_3");else if(t.interactionName==Za.Katydid){var n=l.InteractionID++%2;0==n?t.observationVoID="cuo_fl_katydid_1":1==n&&(t.observationVoID="cuo_fl_katydid_2"),Ko.Play("katydid",.3)}else t.interactionName==Za.Owl?t.observationVoID="cuo_fl_owl":t.interactionName==Za.SpiderLog?t.observationVoID="cuo_fl_web":t.interactionName==Za.Moth?t.observationVoID="cuo_fl_moth":t.interactionName==Za.SpiderLog?t.observationVoID="cuo_fl_web":(e="assets/sounds/vo/general/",t.observationVoID="elinor_tap");t.observationVo=Hn.Load(e+t.observationVoID+".mp3")},t}return ja(t,e),t.prototype.Start=function(e){var t=this;e&&e.interaction?this.interactionName=e.interaction:(console.error("No interaction passed into torch interaction!"),this.interactionName=Za.Moth);var n=this.getRandomPos(this.interactionName);this.animalPos=new r.Point(n.X,n.Y),this.View=new Gi(this.interactionName,n),this.lockCameraWhenFound=this.interactionName!=Za.Moth;var o=li.IsDebug?5:20;this.findAnimalTimeout=O.i.delayedCall(o,this.findAnimal),l.EnterAnimation="TorchOffAnim",l.LastInteraction=this.interactionName,O.i.delayedCall(1,this.enableTorchInteraction),this.View.UI.OnReturn.Sub(this.SceneService.NavigateBack),this.View.UI.OnGotoNotebook.Sub(function(){t.SceneService.NavigateTo(qa.Notebook,{entryName:t.notebookEntry})}),this.loadObservationVO()},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.View.Update(t)},t.prototype.Teardown=function(){e.prototype.Teardown.call(this),Hn.Unload(this.observationVo)},t}(_a),Ua=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ea=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentZoom=0,t.farMoveSpeed=2.1,t.closeMoveSpeed=1,t.minX=-830,t.maxX=915,t.minY=-500,t.maxY=1150,t.initTargetPos=function(e){e&&e.targetName?t.targetName=e.targetName:(t.targetName=Se.Any(Za.BlueBird,Za.RedBird,Za.YellowBird),console.error("We should always have a targetName"),console.error(e)),t.targetName==Za.BlueBird?(t.targetPos=new r.Point(90,-220),l.BlueBirdFound||(l.BlueBirdFound=!0,l.NewBirdFound=Za.BlueBird)):t.targetName==Za.RedBird?(t.targetPos=new r.Point(-10,375),l.RedBirdFound||(l.RedBirdFound=!0,l.NewBirdFound=Za.RedBird)):t.targetName==Za.YellowBird?(t.targetPos=new r.Point(550,370),l.YellowBirdFound||(l.YellowBirdFound=!0,l.NewBirdFound=Za.YellowBird)):t.targetName==Za.CaterpillarBino?t.targetPos=new r.Point(37,-120):t.targetName==Za.Nest||t.targetName==Za.ChickBlue||t.targetName==Za.ChickBrown||t.targetName==Za.ChickWhite?t.targetPos=new r.Point(260,195):t.targetName==Za.SpiderWeb?t.targetPos=new r.Point(40,-110):t.targetName==Za.AcornsBino?t.targetPos=new r.Point(235,225):t.targetName==Za.Clubhouse?t.targetPos=new r.Point(-20,200):console.error("Unexpected bino target: "+t.targetName)},t.EnableInteraction=function(){t.View.Binoculars.EnableInteraction(),t.View.ZoomControll.EnableInteraction()},t.zoomTo=function(e){t.currentZoom=e,t.View.ChangeZoom(t.currentZoom)},t.onViewMoved=function(e){var n=k.lerp(t.farMoveSpeed,t.closeMoveSpeed,t.currentZoom);e.x*=n,e.y*=n,t.desiredPos.x=t.desiredPos.x-e.x*n,t.desiredPos.y=t.desiredPos.y-e.y*n},t.moveView=function(e){t.desiredPos.x<t.minX?t.desiredPos.x=k.lerp(t.desiredPos.x,t.minX,(t.minX-t.desiredPos.x)*e/25):t.desiredPos.x>t.maxX&&(t.desiredPos.x=k.lerp(t.desiredPos.x,t.maxX,(t.desiredPos.x-t.maxX)*e/25)),t.desiredPos.y<t.minY?t.desiredPos.y=k.lerp(t.desiredPos.y,t.minY,(t.minY-t.desiredPos.y)*e/25):t.desiredPos.y>t.maxY&&(t.desiredPos.y=k.lerp(t.desiredPos.y,t.maxY,(t.desiredPos.y-t.maxY)*e/25)),t.currentPos=k.lerpPoint(t.currentPos,t.desiredPos,20*e),t.View.MoveTo(t.currentPos)},t.tryFindTarget=function(){t.currentZoom>.5&&!t.targetFound&&(k.dist(t.currentPos,t.targetPos)<110&&t.findTarget());l.CompletedInteractions[t.targetName]=!0},t.autoFindTarget=function(){t.targetFound||t.animateTo(t.targetPos,.95,.5)},t.animateTo=function(e,n,o){var i={val:0},r=t.desiredPos.clone();O.i.to(i,o,{val:1,onUpdate:function(){t.zoomTo(k.lerp(t.currentZoom,n,i.val)),t.desiredPos=k.lerpPoint(r,e,i.val)}})},t.findTarget=function(){t.targetFound=!0,t.View.FindTarget(t.targetName),Ko.Play("generic_success_"+Se.Any(1,2),.3),O.i.delayedCall(.5,t.View.UI.ShowNextBtn),t.autoFindTimeout&&t.autoFindTimeout.kill(),t.observationVo&&(Vn.Stop(),t.observationVo.play(),Vn.PlayCC(t.observationVoID)),t.targetName!=Za.RedBird&&t.targetName!=Za.YellowBird||(l.BirdFound[t.targetName]=!0)},t.navigateBack=function(){t.View.ZoomControll.Teardown(),t.SceneService.NavigateBack(),Hn.Unload(t.observationVo)},t.loadObservationVO=function(){var e="assets/sounds/vo/cuo/";if(t.targetName==Za.BlueBird)e="assets/sounds/vo/Area4_Deep_Forest/",t.observationVoID="deep_m2_04";else if(t.targetName==Za.RedBird)e="assets/sounds/vo/Area4_Deep_Forest/",t.observationVoID="deep_m2_06";else if(t.targetName==Za.YellowBird)e="assets/sounds/vo/Area4_Deep_Forest/",t.observationVoID="deep_m2_08";else if(t.targetName==Za.SpiderWeb)t.observationVoID="cuo_bino_web";else if(t.targetName==Za.Nest)t.observationVoID="cuo_bino_eggs";else if(t.targetName==Za.AcornsBino)t.observationVoID="cuo_bino_acorn";else if(t.targetName==Za.Clubhouse)t.observationVoID="cuo_bino_clubhouse";else if(t.targetName==Za.CaterpillarBino)t.observationVoID="cuo_bino_caterpillar";else if(t.targetName==Za.ChickWhite){var n=1+l.InteractionID++%3;t.observationVoID="cuo_bino_babybird_"+n}else console.warn("TODO, add find VO: "+t.targetName),e="assets/sounds/vo/general/",t.observationVoID="elinor_tap";t.observationVo=Hn.Load(e+t.observationVoID+".mp3")},t}return Ua(t,e),t.prototype.Start=function(e){this.initTargetPos(e),this.currentZoom=k.Range(.1,.49),this.currentPos=new r.Point(k.Range(this.minX,this.maxX),k.Range(this.minY,this.maxY)),this.desiredPos=this.currentPos,this.View=new Li(this.currentZoom,this.targetName),this.View.Binoculars.Moved.Sub(this.onViewMoved),this.View.ZoomControll.ZoomTo.Sub(this.zoomTo),O.i.delayedCall(1.5,this.EnableInteraction);var t=li.IsDebug?5:20;this.autoFindTimeout=O.i.delayedCall(t,this.autoFindTarget),this.View.UI.OnReturn.Sub(this.navigateBack),l.EnterAnimation="BinocularsOffAnim",l.LastInteraction=this.targetName,l.BinoTutComplete||(this.View.PlayHandTutorial(),l.BinoTutComplete=!0,Vn.Play("onboarding_binoculars")),this.loadObservationVO()},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.View.Update(t),this.tryFindTarget(),this.moveView(t)},t}(_a),Wa=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minX=-300,t.maxX=300,t.prevX=-1,t.sievePos=0,t.prevDir=!1,t.rockFound=!1,t.EnableInteraction=function(){t.View.Sieve.EnableInteraction()},t.onSieveMoved=function(e){var n=t.sievePos-e;e=(n=k.clamp(n,t.minX,t.maxX))-t.sievePos,t.sievePos=n,t.View.Sieve.MoveTo(n,e);var o=k.inverseLerp(t.minX,t.maxX,t.sievePos);if(t.View.SetAngle(o),!t.rockFound){var i=e>=0;i!=t.prevDir&&(t.prevDir=i,Ko.Play("seive_"+k.IntRange(0,2),k.Range(.2,.5)))}},t.onRockFound=function(){t.rockFound||(t.rockFound=!0,t.isNewRock&&as.Unlock(t.rockData),t.View.UI.ShowNextBtn(),Ko.Play("generic_success_"+Se.Any(1,2),.3))},t.returnToGame=function(){Hn.Unload(t.tutorialVO),t.SceneService.NavigateBack()},t}return Wa(t,e),t.prototype.Start=function(){as.Locked.length>0?(this.isNewRock=!0,this.rockData=Se.AnyFromArray(as.Locked)):this.rockData=Se.AnyFromArray(as.All),this.View=new Hi(this.rockData.Img),this.View.Sieve.Moved.Sub(this.onSieveMoved),this.View.Sieve.Finished.Sub(this.onRockFound),this.View.UI.OnReturn.Sub(this.returnToGame),O.i.delayedCall(1,this.EnableInteraction),l.EnterAnimation="SievingOffAnim",l.RocksCollected++,l.SieveTutComplete||(this.View.PlayHandTutorial(),l.SieveTutComplete=!0,this.tutorialVO=Hn.Load("./assets/sounds/vo/general/onboarding_sifter.mp3"),Vn.PlayCC("onboarding_sifter"),this.tutorialVO.play())},t.prototype.Update=function(t){e.prototype.Update.call(this,t),this.View.Sieve.Update(t)},t}(_a),za=function(){function e(){}return e.Width=1555,e.MinWidth=1e3,e.Height=720,e.SavePath="elinorSave",e.SaveVersion="elinorSaveVersion",e.MinDragTime=100,e.AppOptions={features:{sound:!0,music:!0,vo:!0,sfx:!0,captions:!0,hints:!1}},e.PixiAppOptions={width:e.Width,height:e.Height,autoresize:!0,antialias:!0,preserveDrawingBuffer:w.IsKindle||w.isAndroid},e.PaintColours=["black","red","green","blue","brown","orange","yellow","purple"],e.HexColours=["#78655f","#f49979","#b6dc73","#68b0de","#f4ebc3","#f4c37d","#f1d84c","#c67fde"],e}(),Ya=function(){function e(){}return e.IsNPC=function(t){return t!=e.Elinor&&t!=e.Olive&&t!=e.Ari},e.Elinor="elinor",e.Olive="olive",e.Ari="ari",e.Ranger="ranger",e.SenorTapir="senorTapir",e.MsMole="msMole",e.Camilla="camilla",e.Sally="sally",e}(),Ka=function(){function e(){}return e.Insects="Insects",e.LifeCycle="LifeCycle",e.Birds="Birds",e.Nocturnal="Nocturnal",e.Hiding="Hiding",e.Plants="Plants",e.Homes="Homes",e.Friends="Friends",e.Tools="Tools",e}(),Za=function(){function e(){}return e.BugRed="BugRed",e.BugYellow="BugYellow",e.BugOrange="BugOrange",e.BugWings="BugWings",e.Bush="Bush",e.Fish="Fish",e.Butterfly="Butterfly",e.Firefly="Firefly",e.HollowTree="HollowTree",e.Bee="Bee",e.Turtle="Turtle",e.LandTurtle="LandTurtle",e.Lizard="Lizard",e.LizardLog="LizardLog",e.Nest="Nest",e.BlueEggs="Blue",e.BrownEggs="Brown",e.GreenEggs="Green",e.WhiteEggs="White",e.ChickWhite="ChickWhite",e.ChickBrown="ChickBrown",e.ChickBlue="ChickBlue",e.FlipRock="FlipRock",e.Worm="Worm",e.PillBug="PillBug",e.AntHill="AntHill",e.AntFood="AntFood",e.AntSingle="AntSingle",e.AntRock="AntRock",e.Owl="Owl",e.Moth="Moth",e.Katydid="Katydid",e.Snail="Snail",e.KatydidMag="KatydidMag",e.BirdTree="BirdTree",e.BlueBird="BlueBird",e.RedBird="RedBird",e.YellowBird="YellowBird",e.BlackBird="BlackBird",e.SpiderWeb="SpiderWeb",e.SpiderLog="SpiderLog",e.SpiderRock="SpiderRock",e.BlinkeyEyes="BlinkeyEyes",e.CaterpillarMag="CaterpillarMag",e.CaterpillarBino="CaterpillarBino",e.CaterpillarRock="CaterpillarRock",e.ToadMag="ToadMag",e.ToadTorch="ToadTorch",e.ToadStandalone="ToadStandalone",e.GingkoLeaf="GingkoLeaf",e.MapleLeaf="MapleLeaf",e.ElmLeaf="ElmLeaf",e.TreeSap="Sap",e.AcornsBino="AcornsBino",e.AcornsMag="AcornsMag",e.Clubhouse="Clubhouse",e.Chrysalis="Chrysalis",e}(),qa=function(){function e(){}return e.Title="title",e.Intro="intro",e.Clubhouse="clubhouse",e.RiverBank="riverBank",e.ElinorsHouse="elinorsHouse",e.DeepForest="deepForest",e.NightForest="nightForest",e.MagGlassInteraction="magGlassInteraction",e.TorchInteraction="torchInteraction",e.BinocularsInteraction="binocularsInteraction",e.SieveInteraction="sieveInteraction",e.Notebook="notebook",e.CollectionBox="collectionBox",e.Map="map",e.DrawAnt="drawAnt",e.DrawMoundTop="drawMoundTop",e.DrawMoundBot="drawMoundBot",e.GameScenes=["clubhouse","riverBank","elinorsHouse","deepForest","nightForest"],e}(),Ja={};Ja[qa.Title]=va,Ja[qa.Map]=wa,Ja[qa.Intro]=ka,Ja[qa.Clubhouse]=Ca,Ja[qa.RiverBank]=Ba,Ja[qa.ElinorsHouse]=Aa,Ja[qa.DeepForest]=Ma,Ja[qa.NightForest]=Ga,Ja[qa.MagGlassInteraction]=Na,Ja[qa.TorchInteraction]=Ra,Ja[qa.BinocularsInteraction]=Ea,Ja[qa.SieveInteraction]=Xa,Ja[qa.Notebook]=La,Ja[qa.CollectionBox]=Ha;var Qa=Ja,$a=function(){function e(){}return e.Daisy="Daisy",e.Chrysanthemum="Chrysanthemum",e.White="White",e.Cosmos="Cosmos",e.Bell="Bell",e.Tulip="Tulip",e.All=[e.Daisy,e.Chrysanthemum,e.White,e.Cosmos,e.Bell,e.Tulip],e.Unocked={},e}(),es=function(){function e(){}return e.IDLE="IdleAnim",e.WALK="WalkAnim",e.TALK="TalkAnim",e.SELECT="SelectAnim",e.DIG="DiggingAnim",e.WATER="WateringAnim",e.CALL="CallAnim",e}(),ts=function(){function e(){}return e.None="none",e.Character="character",e.Tool="tool",e.ToolMarker="toolMarker",e.InteractionPoint="InteractionPoint",e.Map="Map",e.Mound="mound",e.Lantern="lantern",e}(),ns=function(){function e(){}return Object.defineProperty(e,"All",{get:function(){return[e.MagnifyingGlass,e.Sieve,e.Shovel,e.WateringCan,e.Binoculars,e.Torch]},enumerable:!0,configurable:!0}),e.MagnifyingGlass="magnifyingGlass",e.WateringCan="wateringCan",e.Shovel="shovel",e.Torch="torch",e.Binoculars="binoculars",e.Sieve="sieve",e}(),os=function(){function e(){}return e.Mound="mound",e.Lantern="lantern",e.InteractionPoint="interactionPoint",e.Tool="tool",e}(),is=function(){return function(e,t,n){void 0===t&&(t=[]),void 0===n&&(n=[]),this.StickerSaves={},this.Name=e,this.Stickers=t,this.Templates=n,this.CurrentTemplate=1==n.length?0:1,this.StickerSaves={};for(var o=0;o<n.length;o++)this.StickerSaves[o]=[]}}(),rs=function(){function e(){}return e.Insects=new is(Ka.Insects,["LadybugRed","LadybugOrange","LadybugYellow","Ant","Firefly","Katydid","Bee"],["blank","Ant","Ladybug"]),e.LifeCycle=new is(Ka.LifeCycle,["Caterpillar","Chrysalis","Butterfly","ElmLeaf","MothDagger","MothGrey","Nest"],["blank","Butterfly","Caterpillar","Chrysalis"]),e.Homes=new is(Ka.Homes,["Snail","Spider","Web","Bee","Ant","AntHill","Nest"],["blank","Anthill","Spider","Tree"]),e.Plants=new is(Ka.Plants,["PumpkinSeed","FlowerYellow","FlowerWhite","FlowerPink","FlowerCosmos","MapleLeaf","Sap","WateringCan"],["blank","Daisy","Bell","Cosmos","Tulip"]),e.Nocturnal=new is(Ka.Nocturnal,["Owl","Firefly","ToadRed","Katydid","MothGrey","MsMole","Torch"],["blank","Owl","Katydid","Toad"]),e.Birds=new is(Ka.Birds,["BirdBlue","BirdRed","BirdYellow","Ant","PillBug","PumpkinSeed","Note1","Note2"],["blank","Nest","BabyBird","Birds"]),e.Hiding=new is(Ka.Hiding,["MothGrey","Katydid","ToadRed","ToadBrown","BirdYellow","Caterpillar","Magnify"],["blank","Moth","Lizard","HollowLog"]),e.Friends=new is(Ka.Friends,["Ari","Olive","RangerRabbit","SenorTapir","MsMole"],["blank","Elinor","Ranger","Ari","Olive","Tapir"]),e.Tools=new is(Ka.Tools,["Binoculars","Magnify","Seedbag","Shovel","Sifter","Torch","WateringCan"],["blank","Shovel","Binoculars"]),e.All=[e.Insects,e.LifeCycle,e.Homes,e.Plants,e.Nocturnal,e.Birds,e.Hiding,e.Friends,e.Tools],e.Get=function(t){for(var n=e.All,o=0;o<n.length;o++)if(n[o].Name==t)return n[o];console.error("No Notebook entry found with name: "+t)},e}(),as=function(){function e(){}return e.TrilobiteFossilYellow=new Zn("TrilobiteFossilYellow","yellow","large",""),e.SnailShell=new Zn("SnailShell","red","large","round"),e.SmallEmerald=new Zn("SmallEmerald","green","small","triangle"),e.SkippingStone=new Zn("SkippingStone","green","large","round"),e.SmallBlueRock=new Zn("SmallBlueRock","blue","small","square"),e.SandBurr=new Zn("SandBurr","red","small","round"),e.PumpkinSeed=new Zn("PumpkinSeed","yellow","small",""),e.MediumMarble=new Zn("MediumMarble","blue","small","round"),e.Acorn=new Zn("Acorn","red","large","round"),e.AmmoniteFossil=new Zn("AmmoniteFossil","blue","large","round"),e.Coin=new Zn("Coin","yellow","small","round"),e.RedStoneMedium=new Zn("RedStoneMedium","red","small","triangle"),e.AmberInsect=new Zn("AmberInsect","yellow","large","square"),e.RaptorClaw=new Zn("RaptorClaw","green","large",""),e.FishFossil=new Zn("FishFossil","yellow","large","round"),e.AmberAnt=new Zn("AmberAnt","red","large","triangle"),e.All=[e.TrilobiteFossilYellow,e.SnailShell,e.SmallEmerald,e.SkippingStone,e.SmallBlueRock,e.SandBurr,e.PumpkinSeed,e.MediumMarble,e.Acorn,e.AmmoniteFossil,e.Coin,e.RedStoneMedium,e.AmberInsect,e.RaptorClaw,e.FishFossil,e.AmberAnt],e.Locked=[e.TrilobiteFossilYellow,e.SnailShell,e.SmallEmerald,e.SkippingStone,e.SmallBlueRock,e.SandBurr,e.PumpkinSeed,e.MediumMarble,e.Acorn,e.AmmoniteFossil,e.Coin,e.RedStoneMedium,e.AmberInsect,e.RaptorClaw,e.FishFossil,e.AmberAnt],e.Unlocked=[],e.Unlock=function(t){for(var n=0;n<e.Locked.length;n++)if(e.Locked[n]==t)return-1==e.Unlocked.indexOf(t)?e.Unlocked.push(t):console.error("Rock already unlocked!"),void e.Locked.splice(n,1);console.error("Failed to unlock rock!")},e}(),ss=function(){function e(){}return e.Build=function(e){if(!s)return console.error("No caption data found. CAPTION_DATA missing"),null;var t=document.getElementById("captions");if(!t)return console.error("No caption element found."),null;var n=new o.b(s,new o.c(t));return e.state.captionsMuted.subscribe(function(e){e&&n.stop()}),e.container.on("captionsStyles",function(e){console.warn("TODO implement captionsStyles.")}),n},e}(),ls=function(){return function(){var e=this;this.InitGame=function(){Vn.Init(e.captions),zo.Init();var t=qa.Title;e.sceneService.NavigateTo(t),e.PixiApp.ticker.add(e.Update),pi.Init(e.SrApp.getPlugin("GoogleAnalytics")),pi.Send("startGame")},this.Update=function(t){if(!e.pauseService.IsPaused){var n=r.ticker.shared.elapsedMS/1e3;e.sceneService.Update(n),e.captions.update(n)}},o.a.uses(new i.a({name:"elinor-app"})),this.SrApp=new o.a(za.AppOptions),this.PixiApp=new r.Application(za.PixiAppOptions),this.PixiApp.renderer.backgroundColor=16777215;var t=document.getElementById("content");t?t.appendChild(this.PixiApp.view):console.error("Could not find content DOM object to attach Pixi view."),this.resizeService=new Dn(this.PixiApp),this.pauseService=new si(this.SrApp),this.soundService=new Hn(this.SrApp),this.sceneService=new Nn(this.PixiApp.stage,this.pauseService),this.captions=ss.Build(this.SrApp),Yo.Init(),this.SrApp.state.ready.subscribe(function(){return li.Init(e.InitGame)})}}();window.game=new ls}});