"use strict";!function(){var e,n=window,a=document,t=a.body,i=Boolean("ontouchstart"in window||navigator.maxTouchPoints),s=navigator?navigator.userAgent:n.navigator.userAgent,o={is_opera:-1!==s.toLowerCase().indexOf("op"),is_chrome:-1!==s.indexOf("Chrome"),is_explorer:-1!==s.indexOf("MSIE")||-1!==s.indexOf("Trident/"),is_firefox:-1!==s.indexOf("Firefox"),is_safari:-1!==s.indexOf("Safari"),is_edge:-1!==s.indexOf("Edge"),is_ipad:-1!==s.indexOf("iPad"),is_ios:!!navigator.platform&&/iPad|iPhone|iPod/i.test(navigator.platform),is_android:/android/i.test(s),is_windows_phone:/Windows Phone/i.test(s),is_mobile:/mobile/i.test(s)},r=function(){var e,n=document.createElement("whatever"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};if(o.is_explorer||o.is_edge||o.is_ipad)return 0;for(e in a)if(void 0!==n.style[e])return a[e]}();function c(e,n){return"string"==typeof e&&e.trim().match(/<(\w+)(.*?)\/?>/)?function(e,n){var t,i=1;for(e.match(/^<(tbody|thead|tfoot|caption|colgroup)[\s|>].*/)?t=c("<table>"):e.match(/^<tr[\s|>].*/)?(t=c("<table><tbody>"),i=2):e.match(/^<col[\s|>].*/)?(t=c("<table><colgroup>"),i=2):e.match(/^<td[\s|>].*/)?(t=c("<table><tbody><tr>"),i=3):e.match(/^<th[\s|>].*/)?(t=c("<table><thead><tr>"),i=3):t=e.match(/^<option[\s|>].*/)?a.createElement("select"):a.createElement("div"),t.innerHTML=e;i--;)t=t.firstChild;return"object"==typeof n&&Object.keys(n).forEach(function(e){t.setAttribute(e,n[e])}),t}(e,n):function(e,n){var t=[].slice;return void 0===n&&(n=e,e=a),/^#[\w-]+$/.test(n)?a.getElementById(n.substr(1)):function(e){return[].concat.apply([],e)}(n.split(",").map(function(n){if(!/^([#|.]?[\w-]+)$/.test(n))return t.call(e.querySelectorAll(n));switch(n.charAt(0)){case"#":return a.getElementById(n.substr(1));case".":return t.call(e.getElementsByClassName(n.substr(1)));default:return t.call(e.getElementsByTagName(n))}}))}(e,n)}function l(e){return"string"==typeof e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):e}function d(e,n){var a=function(){e[n].fired||(e[n].fired=1,d(e,n+1),e[n].callback&&e[n].callback.call&&e[n].callback())},t=new Image;n=n||0,e&&e.length>n&&(t.onload=a,t.onerror=a,t.src=SITE_URL+e[n].src)}function u(e,a,t){var i,s,o,c,l=0,d=function(e){(++l>=s||!e.propertyName)&&(this.removeEventListener(r,d),a(e))};r?(c=new Event(r),i=n.getComputedStyle(e,null)["transition-property"]||"",s=i.split(",").length,t&&(o=(n.getComputedStyle(e,null)["transition-duration"]||"").split(",").reduce(function(e,n){return-1!==n.indexOf("ms")?Math.max(e,parseFloat(n.replace("ms",""))):-1!==n.indexOf("s")?Math.max(e,1e3*parseFloat(n.replace("s",""))):e},0),setTimeout(function(){return e?e.dispatchEvent(c):0},1.5*o)),e.on(r,d)):setTimeout(function(){a({target:e})})}function m(e){-1===e.href.indexOf(SITE_URL)&&0!==e.href.indexOf("mailto:")&&e.addClass("is-ext").setAttribute("target","_blank")}o.is_chrome=o.is_chrome&&!o.is_opera,o.is_safari=o.is_safari&&!o.is_chrome,o.is_mobile=o.is_mobile||o.is_ipad||o.is_ios||o.is_android||o.is_windows_phone,console.log("%c Modern English ðŸŒ³ ","color: white; background: #AFC731; padding: 2px;"),Window.prototype.on=Element.prototype.on=document.on=function(e,n){var t=this;return e.replace(/(\s)/g,"").split(",").map(function(e){return function(e,n,t){return e===a&&"load"===n&&(n="DOMContentLoaded"),e.addEventListener(n,t),e}(t,e,n)}),this},Array.prototype.on=function(e,n){return this.map(function(a){return a.on(e,n)})},Element.prototype.removeClass=function(e){return this.className=this.className.replace(new RegExp("(^| )"+l(e)+"( |$)","ig"),"$2").trim(),this},Array.prototype.removeClass=function(e){return this.map(function(n){return n.removeClass(e)})},Element.prototype.addClass=function(e){return this.hasClass(e)||(this.className+=(this.className?" ":"")+e),this},Array.prototype.addClass=function(e){return this.map(function(n){return n.addClass(e)})},Element.prototype.hasClass=function(e){return new RegExp("(^| )"+l(e)+"( |$)","ig").test(this.className)},document.remove||(Element.prototype.remove=function(){this&&this.parentNode&&this.parentNode.removeChild(this)}),Array.prototype.remove=function(e){void 0!==this[e]&&this.splice(e,1)},Array.prototype.shuffle=function(){for(var e,n,a=this.length;a>0;)n=Math.random()*a--|0,e=this[a],this[a]=this[n],this[n]=e},Array.prototype.clone=function(){return this.map(function(e){return Object.assign({},e)})},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var n,a,t,i,s,o,r,c=1;if(void 0===e||null===e)throw new TypeError("Cannot convert first argument to object");for(n=Object(e);c<arguments.length;c++)if(void 0!==(a=arguments[c])&&null!==a)for(a=Object(a),t=0,o=(s=Object.keys(a)).length;t<o;t++)i=s[t],void 0!==(r=Object.getOwnPropertyDescriptor(a,i))&&r.enumerable&&(n[i]=a[i]);return n}}),function(){for(var e=0,n=["ms","moz","webkit","o"],a=0;a<n.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[n[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[a]+"CancelAnimationFrame"]||window[n[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,a){var t=(new Date).getTime(),i=Math.max(0,16-(t-e)),s=window.setTimeout(function(){n(t+i)},i);return e=t+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),o.is_explorer||o.is_edge?(t.addClass("is-ms"),o.is_explorer&&t.addClass("is-ie")):o.is_mobile&&t.addClass("is-not-desktop"),o.is_ios||o.is_ipad?(e="is-ios"+(o.is_ipad?" is-ipad":""),t.addClass(e),c("html").addClass(e)):o.is_android&&(t.addClass("android"),c("html").addClass("android")),navigator.platform.match(/mac/i)||i||t.addClass("sb");var h,g={success:["daisy_brilliant","daisy_fantastic","daisy_hooray","daisy_well_done","ollie_brilliant","ollie_fantastic","ollie_hooray","ollie_well_done"],finished:["daisy_you_did_it","ollie_you_did_it"],mismatch:["daisy_have_another_go","ollie_have_another_go","daisy_try_again","ollie_try_again","daisy_try_another_one","ollie_try_another_one"],idle:["daisy_which_one","ollie_which_one","daisy_lets_make_a_match","ollie_lets_make_a_match"],start:["daisy_how_many","ollie_how_many"]},p={};function f(e){var n,a,t,i;if(g[e]){for((n=g[e].slice(0)).shuffle(),a=n.length;a--;){for(t=p[e].length,i=0;t--;)n[a]===p[e][t]&&(i=1,t=0);if(!i)return p[e].push(n[a]),void V("voice/"+n[a]+".mp3")}p[e]=[p[e][0]],V("voice/"+p[e][0]+".mp3")}}function _(){n.can_autoplay_audio&&(v(),h=setTimeout(function(){f("idle"),_()},15e3))}function v(){clearTimeout(h)}function w(){var e,t=["ammonite","bear","bottle","dad-mug","duck","pan","police-car","trophy","watering-can","wellie","triceratops","t-rex","strawberry","stegosaurus","apple-juice","sock","snail","starfish","rose","recipe-book","owl","mug","lightbulb","lemon","ball","apple","leaf","jelly","globe","jackinthebox","banana","hedgehog","diplodocus","daisy-phone","beetroot","cookie","flag","ollie-phone"].slice(0),i=[],s=2,o=c("#game-matching-list-container"),r=a.createDocumentFragment();for(t.shuffle(),t=t.slice(0,8);s--;)i=i.concat(t);for(i.shuffle(),s=i.length;s--;)(e=c("<button>",{class:"game-item","data-matching-pair":i[s]})).appendChild(c("<img>",{alt:"",src:SITE_URL+"/img/game/matching/bucket.png",class:"click-through"})),r.appendChild(e);for(;o.firstElementChild;)o.removeChild(o.firstElementChild);o.appendChild(r),n.matching_can_select=1,n.matching_turns_taken=0,f("start"),_()}function b(e){n.matching_can_select&&!e.hasClass("game-item-found")&&(e.hasClass("game-item-show")||e.addClass("game-item-show"),2===c(".game-item-show").length&&function(){var e=c(".game-item-show"),a=0;2===e.length&&(++n.matching_turns_taken,n.matching_can_select=0,e[0].getAttribute("data-matching-pair")===e[1].getAttribute("data-matching-pair")?(e.removeClass("game-item-show").addClass("game-item-found"),n.matching_can_select=1,a=1):(setTimeout(function(){e.removeClass("game-item-show"),n.matching_can_select=1},1500),a=0),a&&!y()?(f("success"),_()):a?y()&&(v(),f("finished"),ee("modal-game-over")):(f("mismatch"),_()))}())}function y(){return c(".game-item").length===c(".game-item-found").length}a.on("click",function(e){var n=e.target;n.hasAttribute("data-matching-pair")?b(n):n.hasAttribute("data-replay-matching-pairs")?(c(".modal").forEach(ne),w()):n.hasAttribute("data-end-game")&&(c(".modal").forEach(ne),ae("games"))}),function(){var e;for(e in g)p[e]=[]}(),w();var C,x,A,E,k="/img/sprite/",T="/img/video/",z="/img/facey/",N="/video/facey/",M="/img/game/",O="/img/home/",j="/img/common/",L=[],F=[],I=c("#main"),R=new function(e,n){var a,t=1e3/e,i=null,s=-1,o=this;function r(e){var o;null===i&&(i=e),(o=Math.floor((e-i)/t))>s&&n({time:e,frame:s=o}),a=requestAnimationFrame(r)}o.is_playing=0,o.start=function(){o.is_playing||(o.is_playing=!0,a=requestAnimationFrame(r))},o.pause=function(){o.is_playing&&(cancelAnimationFrame(a),o.is_playing=!1,i=null,s=-1)}}(30,function(){for(var e=L.length;e--;)L[e].update(),L[e].render();for(e=F.length;e--;)F[e].update(),F[e].render()}),S=[{name:"boo-jump-wave",image_src:k+"boo-jump-wave.png",frame_count:274,contains:["boo"],width:194,height:204},{name:"whizzy-home-page",image_src:k+"whizzy-home-page.png",frame_count:228,contains:["whizzy"],width:184,height:166,delay:700},{name:"whizzy-spin",image_src:k+"whizzy-spin.png",frame_count:90,contains:["whizzy"],width:171,height:166},{name:"boo-jump-spin",image_src:k+"boo-jump-spin.png",frame_count:74,contains:["boo"],width:206,height:261},{name:"boris-licking",image_src:k+"boris-licking.png",frame_count:154,contains:["boris"],width:142,height:150},{name:"dad-wave",image_src:k+"dad-wave.png",frame_count:260,contains:["dad"],width:237,height:387},{name:"hedgehog",image_src:k+"hedgehog.png",frame_count:112,width:220,height:194,is_reserved:!0,first_frame_src:k+"hedgehog-initial.png"},{name:"loading-whizzy-spin",image_src:k+"loading-whizzy-spin.png",frame_count:90,contains:["whizzy"],width:220,height:214,is_reserved:!0,first_frame_src:k+"loading-whizzy-spin-initial.png"},{name:"loading-boo-jump-spin",image_src:k+"loading-boo-jump-spin.png",frame_count:63,contains:["whizzy"],width:220,height:278,is_reserved:!0,first_frame_src:k+"loading-boo-jump-spin-initial.png"},{name:"loading-herbie-eating",image_src:k+"loading-herbie-eating.png",frame_count:48,contains:["herbie"],width:220,height:162,is_reserved:!0,first_frame_src:k+"loading-herbie-eating-initial.png"},{name:"cockrell",image_src:k+"cockrell.png",frame_count:50,width:60,height:63,is_reserved:!0},{name:"flag-blue",image_src:k+"flag-blue.png",frame_count:19,width:99,height:64,is_reserved:!0},{name:"flag-red",image_src:k+"flag-red.png",frame_count:19,width:111,height:90,is_reserved:!0},{name:"herbie-eating",image_src:k+"herbie-eating.png",frame_count:48,width:217,height:160},{name:"home-wave",image_src:k+"home-wave.png",frame_count:101,contains:["daisy","ollie"],width:350,height:222,delay:700,is_reserved:!0},{name:"daisy-running",image_src:k+"daisy-running.png",frame_count:20,contains:["daisy"],width:122,height:203,is_reserved:!0},{name:"ollie-running",image_src:k+"ollie-running.png",frame_count:20,contains:["ollie"],width:121,height:205,is_reserved:!0},{name:"wipe",image_src:k+"wipe.png",frame_count:31,width:601,height:338,fullsize:!0,is_reserved:!0,no_repeat:!0,callback:le,className:"wipe-sprite",parent:"#loading"}],W={loading:{animation_slots:[{includes:["loading-whizzy-spin","loading-boo-jump-spin","loading-herbie-eating","hedgehog"],parent:".load-sprite",className:"loading"}]},home:{animation_slots:[{className:"home-left",excludes:["whizzy-home-page","herbie-eating","dad-wave"],parent:".home-sprites"},{className:"home-right",excludes:["boris-licking","dad-wave"],parent:".home-sprites"},{includes:["home-wave"],parent:".home-sprites",className:"home-wave"}]},games:{animation_slots:[{includes:["boris-licking"],className:"castle-front"},{includes:["dad-wave"],className:"playhouse-front"},{includes:["flag-blue"]},{includes:["flag-red"]},{includes:["cockrell"]},{includes:["daisy-running"],callback:K,parent:".house"},{includes:["ollie-running"],callback:K,parent:".house"},{includes:["ollie-running"],className:"behind-house",parent:".house"},{includes:["daisy-running"],className:"behind-house",parent:".house"}]}},H=window.innerWidth,q=window.innerHeight,P=[{src:j+"dando-logo.png"},{src:j+"clear.gif"},{src:j+"chf-logo.png",essential:1},{src:j+"menu-tab.png",essential:1},{src:j+"volume.png",essential:1},{src:j+"volume-muted.png"},{src:j+"arrow.png"},{src:j+"menu-meet.png",essential:1},{src:j+"menu-the-show.png",essential:1},{src:j+"menu-watch.png",essential:1},{src:j+"menu-games.png",essential:1},{src:j+"menu-activities.png",essential:1},{src:j+"menu-grown-ups.png",essential:1},{src:O+"home-bg.png",essential:1},{src:O+"home-fence.png",essential:1},{src:O+"edge-repeat.png",essential:1},{src:O+"fence-left-repeat.png",essential:1},{src:O+"fence-right-repeat.png",essential:1},{src:O+"hedge.png",essential:1},{src:k+"boo-jump-spin.png",essential:1},{src:k+"boo-jump-wave.png",essential:1},{src:k+"boris-licking.png",essential:1},{src:k+"cockrell.png"},{src:k+"dad-wave.png"},{src:k+"daisy-running.png"},{src:k+"flag-blue.png"},{src:k+"flag-red.png"},{src:k+"hedgehog.png",essential:1},{src:k+"herbie-eating.png",essential:1},{src:k+"home-wave.png",essential:1},{src:k+"ollie-running.png"},{src:k+"whizzy-home-page.png",essential:1},{src:k+"whizzy-spin.png",essential:1},{src:k+"wipe.png",essential:1},{src:T+"video-1.png"},{src:T+"video-2.png"},{src:T+"bg.jpg"},{src:T+"tv.png"},{src:T+"blank-screen.jpg"},{src:z+"facey-bg.jpg"},{src:z+"facey-screen.png"},{src:z+"facey-phone.png"},{src:z+"daisy.png"},{src:z+"ollie.png"},{src:z+"dad.png"},{src:z+"boo.png"},{src:z+"whizzy.png"},{src:M+"game-bg.png"},{src:M+"01-castle-rear2.png"},{src:M+"02-playhouse.png"},{src:M+"04-castle-right.png"},{src:M+"matching-pairs.png"},{src:M+"flower-splash.png"},{src:M+"matching/bucket.png"},{src:N+"daisy.mp4"},{src:N+"boo.mp4"},{src:N+"dad.mp4"},{src:N+"ollie.mp4"},{src:N+"whizzy.mp4"}];function U(){t.hasClass("menu-show")?D():t.addClass("menu-show")}function D(){t.removeClass("menu-show")}function $(e){var n,a,t,i,s=c(e,".menu-item");s.length&&s[0]&&(n=s[0].currentStyle||window.getComputedStyle(s[0]),a=s[0].offsetWidth+1,t=parseInt(n.marginRight.replace("px","")),i=Math.ceil(s.length*(t+a)),e.style.width=i-t+"px",e.parentNode.removeClass("can-scroll"),function(e,n){var a=e.parentNode;c(a.parentNode,".menu-page").forEach(function(e){e.parentNode.removeChild(e)}),n?(a.addClass("can-scroll"),a.parentNode.appendChild(c("<button>Next page</button>",{class:"menu-page page-next"})),a.parentNode.appendChild(c("<button>Previous page</button>",{class:"menu-page page-previous"}))):a.removeClass("can-scroll")}(e,i+t>e.parentNode.offsetWidth))}function B(){c(".menu-scroll").map(function(e){$(e)})}function G(e){var a,t=c(e.parentNode,".menu")[0],i=t.firstElementChild.firstElementChild,s=i.currentStyle||window.getComputedStyle(i),o=parseInt(s.marginRight.replace("px","")),r=t.offsetWidth+o-1,l=t.scrollLeft;a=e.hasClass("page-previous")?-r:r,function(e,a,t){var i=new Date,s=function(){var o=(new Date-i)/e;o<1?n.requestAnimationFrame(s):o=1,a(o),1===o&&t&&t.call&&t()};n.requestAnimationFrame(s)}(400,function(e){t.scrollLeft=l+a*e})}function J(){var e;for(c("canvas").forEach(function(e){e.getContext("2d").clearRect(0,0,e.width,e.height)}),H=n.innerWidth,q=n.innerHeight,e=L.length;e--;)L[e].resize_handler(),L[e].render();B()}function K(e){var n=this,a=H>1020?308:228,i=Math.abs(e.canvas.offsetLeft-(H/2-a))/214;t.offsetWidth,e.canvas.addClass("running"),e.canvas.style.transitionDuration=i+"s",t.offsetWidth,e.canvas.addClass("in-castle"),setTimeout(function(){ie(e.name),setTimeout(function(){(function(e){var n=Math.abs(e.canvas.offsetLeft-(H/2+184))/214;t.offsetWidth,e.canvas.addClass("running"),e.canvas.style.transitionDuration=n+"s",t.offsetWidth,e.canvas.addClass("in-house"),setTimeout(function(){ie(e.name)},1e3*n+1e3)}).bind(n)(e)},1e3)},1e3*i+1e3)}function Q(){var e=c("#progress");!function(e,n,a){for(var t,i=0,s=[],o=[],r=0,c=function(){++r===t?n&&n.call&&n():a&&a.call&&a(r,t)};i<e.length;++i)e[i].essential?(e[i].callback=c,s.push(e[i])):o.push(e[i]);t=s.length,d(s=s.concat(o))}(P,function(){e.style.width="100%",c("#secondary").innerHTML=c("#template-secondary").innerHTML,setTimeout(function(){ae("home","wipe")},1e3)},function(n,a){e.style.width=Math.round(n/a*100)+"%"})}function V(e,a){var i=e.replace(/[.\/-]/g,"_"),s=c("#"+i),r={id:i,preload:"auto",src:SITE_URL+"/audio/"+e},l=a||{};n.is_muted&&o.is_ios||l.play_one_instance&&s||(l.loop&&(r.loop="loop"),s=c("<audio>",r),n.is_muted&&!n.can_autoplay_audio?s.volume=0:l.volume&&(s.volume=l.volume),s.on("ended",function(){this.remove()}),t.appendChild(s),s.play())}function X(e){e.muted=!0}function Y(e){e.muted=!1}function Z(){c("audio").forEach(function(e){e.pause(),e.remove()})}function ee(e,a){var i,s=c("<div>",{class:"modal was-created "+e}),o=c("<div>",{class:"modal-container"}),r=c("#"+e);r&&(o.innerHTML=r.innerHTML),s.appendChild(o),t.appendChild(s),t.offsetWidth,s.addClass("showing"),R.pause(),a&&-1!==a.indexOf("(")&&-1!==a.indexOf(")")&&(i=a.substring(a.indexOf("(")+1,a.indexOf(")")),a=a.substring(0,a.indexOf("("))),a&&n[a]&&n[a].call&&u(s,function(){n[a](i)})}function ne(e){var n;e&&e instanceof HTMLElement&&(n=function(e,n){if(!e.hasClass(n))for(;(e=e.parentElement)&&!e.hasClass(n););return e}(e,"modal"))&&(n.removeClass("showing"),n.hasClass("was-created")&&u(n,function(){n.remove()})),R.start()}function ae(e,a){if(v(),function(e,n){var a=c("#scene-"+e),t=c(I,".current-scene")[0],i=c(I,".next-scene")[0];return a?(c("video").forEach(ge),"wipe"===n?(i.innerHTML=a.innerHTML,H>1024?(i.addClass("will-wipe"),t.offsetWidth,i.addClass("wiping"),u(i,function(){i.removeClass("wiping").removeClass("will-wipe").removeClass("next-scene").addClass("current-scene"),t.addClass("next-scene").removeClass("current-scene").innerHTML=""})):(i.removeClass("next-scene").addClass("current-scene"),t.addClass("next-scene").removeClass("current-scene").innerHTML=""),te(ce("wipe"))):(i.innerHTML=a.innerHTML,i.offsetWidth,i.removeClass("next-scene").addClass("current-scene"),t.addClass("next-scene").removeClass("current-scene"),t.offsetWidth,t.innerHTML=""),SITE_URL&&c("a").map(m),1):0}(e,a)){switch(F=L.clone(),n.used_sprites={},L=[],function(e){var n,a,t,i=W[e]&&W[e].animation_slots?W[e].animation_slots:0,s=S.clone(),o=0;for(s.shuffle();o<i.length;++o)for(a=i[o],t=s.length;t--;)n=s[t],(a.includes&&oe(a.includes,n.name)||!a.includes&&!n.is_reserved&&!re(n.name,n.contains)&&!se(a.excludes,n.name))&&(a.parent&&(n.parent=a.parent),a.className&&(n.className=(n.className?n.className+" ":"")+a.className),te(n),a.callback&&a.callback.call&&a.callback(n),t=0)}(e),function(e){for(var n=e.length;n--;)("wipe"!==e[n].name||"wipe"===e[n].name&&e[n].is_paused)&&(le(e[n]),e.remove(n))}(F),t.setAttribute("data-scene",e),B(),A&&(A=null),e){case"loading":!function(){var e,n=[];for(e in used_sprites)n.push({src:ce(e).image_src});n.push({src:"/img/common/loading-bg.png",callback:Q}),d(n)}();break;case"game-pairs":w()}window.setTimeout(function(){window.scrollTo(0,1)},1)}}function te(e){var a,t=new Image,i=c("<canvas>",{class:"canvas"}),s=c(I,".sprite-container")[0];e&&(e.parent?(a=c(e.parent)).length&&(a=a[0]):a=s,a.appendChild(i),i.width=H,i.height=q,t.src=SITE_URL+e.image_src,t.onload=R.start,e.image=t,e.canvas=i,L.push(function(e){var n,a,t,i={},s=0,o=e.frame_count||1,r=0,c=0;return i.name=e.name,i.canvas=e.canvas,i.context=i.canvas.getContext("2d"),i.width=e.width,i.height=e.height,i.image=e.image,i.is_paused=0,i.scale=e.scale?e.scale:1,i.canvas.addClass(i.name+" sprite"),e.className&&i.canvas.addClass(e.className),e.fullsize?i.canvas.addClass("full-size"):(i.canvas.width=i.width*i.scale,i.canvas.height=i.height*i.scale),i.resize_handler=function(){e.fullsize?(q>H?(a=Math.max(q,1080),n=a/9*16):(n=Math.max(H,1920),a=n/16*9),r=Math.round((H-n)/2),c=Math.round((q-a)/2),n=Math.round(n),a=Math.round(a),i.canvas.width=H,i.canvas.height=q+(Boolean("ontouchstart"in window||navigator.maxTouchPoints)?120:0)):(n=Math.round(i.width*i.scale),a=Math.round(i.height*i.scale))},i.resize_handler(),i.update=function(){i.is_paused||(s<o-1?s+=1:(e.callback&&e.callback.call&&e.callback(i),e.no_repeat?(i.is_paused=1,e.delay&&setTimeout(function(){i.is_paused=0,s=0},e.delay)):s=0))},i.render=function(){i.context.clearRect(r,c,n,a),i.context.drawImage(i.image,s*i.width,0,i.width,i.height,r,c,n,a)},i.delete=function(){i.context.clearRect(r,c,n,a),i.canvas.remove()},t=new Image,e.first_frame_src&&(t.src=SITE_URL+e.first_frame_src,t.onload=function(){i.context.drawImage(t,0,0,i.width,i.height,r,c,n,a)}),i}(e)),e.name&&(n.used_sprites[e.name]=e.contains?e.contains:[]))}function ie(e){for(var n=0;n<L.length;++n)if(L[n].name===e)return L[n].delete(),L.remove(n)}function se(e,n){return e&&-1!==e.indexOf(n)}function oe(e,n){return!e||-1!==e.indexOf(n)}function re(e,a){var t,i;if(n.used_sprites[e])return 1;if(a)for(t in n.used_sprites)for(i=a.length;i--;)if(n.used_sprites[t]&&-1!==n.used_sprites[t].indexOf(a[i]))return 1;return 0}function ce(e){for(var n=S.length;n--;)if(S[n].name===e)return S[n];return 0}function le(e){e.delete()}function de(e,a){A||(A=c("#video-player")),"vimeo"===a?he(e):"facey"===a&&function(e){for(c(A,"video").forEach(function(e){e.pause()}),E&&E.pause();A.firstElementChild;)A.removeChild(A.firstElementChild);(E=c("<video>",{preload:"auto",playsinline:"playsinline",src:SITE_URL+"/video/facey/"+e+".mp4",class:e})).on("ended",me),A.appendChild(E),E.play(),n.is_muted&&(E.muted=!0)}(e),Z()}function ue(e){var n,a;e.hasClass("playing")||(e.hasAttribute("data-play-video")?(a="vimeo",n=e.getAttribute("data-play-video")):e.hasAttribute("data-facey-trigger")&&(a="facey",n=e.getAttribute("data-facey-trigger")),me(),e.addClass("playing"),de(n,a))}function me(){c(".menu-item").removeClass("playing"),c("[data-facey-trigger]").removeClass("playing"),E&&(E.pause(),E.remove())}function he(e,n){var a=n||"decode_video",t="https://www.vimeo.com/api/oembed.json?url="+encodeURIComponent(e)+"&loop=1&autoplay=1&callback="+a,i=c("#vimeo_script");i&&i.parentNode.removeChild(i),(i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src",t),i.setAttribute("id","vimeo_script"),c("head")[0].appendChild(i)}function ge(e){e.pause(),e.removeAttribute("src"),e.load(),e.remove()}"undefined"!=typeof thumbnails_list&&thumbnails_list&&thumbnails_list.length&&thumbnails_list[0]&&(P=P.concat(thumbnails_list)),n.on("resize",function(){clearTimeout(C),C=setTimeout(J,100)}),a.on("click",function(e){var a=e.target;a.hasAttribute("data-scene-open")&&!a.hasAttribute("disabled")?(Z(),ae(a.getAttribute("data-scene-open"),"wipe"),D()):a.hasAttribute("data-play-video")?(Z(),ue(a)):a.hasAttribute("data-menu-toggle")?U():a.hasAttribute("data-mute-toggle")?(n.is_muted=!n.is_muted,n.is_muted?(o.is_ios?c("audio, video").forEach(function(e){e.pause(),e.loop||e.remove()}):c("audio, video").forEach(X),t.addClass("is-muted")):(o.is_ios?c("audio, video").forEach(function(e){e.loop&&e.play()}):c("audio, video").forEach(Y),t.removeClass("is-muted"))):a.hasClass("menu-page")?G(a):a.hasAttribute("data-facey-trigger")&&ue(a)}).on("scroll",function(){clearTimeout(x),x=setTimeout(function(){t.scrollTop?t.addClass("has-scrolled"):t.removeClass("has-scrolled")},100)}),ae("loading"),n.is_muted=!1,a.on("click",function(e){var n=e.target;n.hasAttribute("data-modal-create")?ee(n.getAttribute("data-modal-create"),n.hasAttribute("data-modal-callback")?n.getAttribute("data-modal-callback"):0):n.hasAttribute("data-modal-close")&&ne(n)})}();