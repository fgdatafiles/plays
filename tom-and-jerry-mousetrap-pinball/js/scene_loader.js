function LoaderScreen(){trace("LoaderScreen()");var me=this;var div=document.getElementById("div_loading");__utils.doDestroyAllChildren(div);var loading_block=div.appendChild(document.createElement("div"));loading_block.className="loading_block";loading_block.style.visibility="hidden";var loading_logo=loading_block.appendChild(document.createElement("img"));loading_logo.className="loading_logo";loading_logo.src=oLANG_IMAGES.MovieLogo||"media/images/MovieLogo.png";loading_logo.style.width="256px";loading_logo.onload=function(){me.doResizeUpdate();}
loading_block.appendChild(document.createElement("p"));var loading_gif=loading_block.appendChild(document.createElement("img"));loading_gif.className="loading_logo";loading_gif.src="media/images/Loader_White.gif";loading_gif.onload=function(){me.doResizeUpdate();}
div.style.display="block";loading_block.style.visibility="visible";loading_block.appendChild(document.createElement("p"));var loading_date=loading_block.appendChild(document.createElement("div"));loading_date.className="loading_date";__utils.doHTMLText(loading_date,oLANG.loading_msg);var style=window.getComputedStyle(loading_date,null).getPropertyValue('font-size');loading_date.my_fontsize=parseFloat(style);var loading_bar=loading_block.appendChild(document.createElement("div"));loading_bar.className="loading_bar";var loading_bar_fill=loading_bar.appendChild(document.createElement("div"));loading_bar_fill.className="loading_bar_fill";var loading_bar_frame=loading_bar.appendChild(document.createElement("div"));loading_bar_frame.className="loading_bar_frame";loading_bar_fill.style.width="0%";this.doResizeUpdate=function(){var content_width=loading_block.clientWidth;var content_height=loading_block.clientHeight;div.style.width=(oSTAGE.game_width)+"px";div.style.height=(oSTAGE.game_height)+"px";div.style.transform="scale("+oSTAGE.scale+")";loading_block.style.marginTop=-(content_height*0.5)+"px";loading_block.style.marginLeft=-(content_width*0.5)+"px";}
this.doUpdateBar=function(prog){loading_bar_fill.style.width=Math.max(9,Math.min(100,(prog*100)))+"%";}
this.doDestroy=function(){window.removeEventListener("resize",me.doResizeUpdate);window.removeEventListener("orientationchange",me.doResizeUpdate);__utils.doDestroyAllChildren(div);div.style.display="none";}
var resize_updater={doResizeUpdate:me.doResizeUpdate};update_queue.push(resize_updater);me.doResizeUpdate();window.addEventListener("resize",me.doResizeUpdate);window.addEventListener("orientationchange",me.doResizeUpdate);div.style.display="block";new ResizeSensor(div,function(){RESIZER.w=0;RESIZER.h=0;});}