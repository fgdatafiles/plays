this.createjs=this.createjs||{},function(){"use strict";var t=createjs.PreloadJS=createjs.PreloadJS||{};t.version="0.6.3",t.buildDate="Tue, 15 Sep 2015 20:59:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;n>i;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var i=this,n=[i];i.parent;)n.push(i=i.parent);var r,s=n.length;for(r=s-1;r>=0&&!t.propagationStopped;r--)n[r]._dispatchEvent(t,1+(0==r));for(r=1;s>r&&!t.propagationStopped;r++)n[r]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),function(){function t(e,n){function s(t){if(s[t]!==v)return s[t];var e;if("bug-string-char-index"==t)e="a"!="a"[0];else if("json"==t)e=s("json-stringify")&&s("json-parse");else{var i,r='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var h=n.stringify,u="function"==typeof h&&_;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===h(0)&&"0"===h(new o)&&'""'==h(new a)&&h(y)===v&&h(v)===v&&h()===v&&"1"===h(i)&&"[1]"==h([i])&&"[null]"==h([v])&&"null"==h(null)&&"[null,null,null]"==h([v,y,null])&&h({a:[i,!0,!1,null,"\0\b\n\f\r\t"]})==r&&"1"===h(null,i)&&"[\n 1,\n 2\n]"==h([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==h(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==h(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==h(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==h(new l(-1))}catch(t){u=!1}}e=u}if("json-parse"==t){var c=n.parse;if("function"==typeof c)try{if(0===c("0")&&!c(!1)){var d=5==(i=c(r)).a.length&&1===i.a[0];if(d){try{d=!c('"\t"')}catch(t){}if(d)try{d=1!==c("01")}catch(t){}if(d)try{d=1!==c("1.")}catch(t){}}}}catch(t){d=!1}e=d}}return s[t]=!!e}e||(e=r.Object()),n||(n=r.Object());var o=e.Number||r.Number,a=e.String||r.String,h=e.Object||r.Object,l=e.Date||r.Date,u=e.SyntaxError||r.SyntaxError,c=e.TypeError||r.TypeError,d=e.Math||r.Math,p=e.JSON||r.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var f,g,v,m=h.prototype,y=m.toString,_=new l(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(t){}if(!s("json")){var b="[object Function]",w="[object Number]",x="[object String]",T="[object Array]",E=s("bug-string-char-index");if(!_)var S=d.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],P=function(t,e){return A[e]+365*(t-1970)+S((t-1969+(e=+(e>1)))/4)-S((t-1901+e)/100)+S((t-1601+e)/400)};if((f=m.hasOwnProperty)||(f=function(t){var e,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=y?f=function(t){var e=this.__proto__,i=t in(this.__proto__=null,this);return this.__proto__=e,i}:(e=i.constructor,f=function(t){var i=(this.constructor||e).prototype;return t in this&&!(t in i&&this[t]===i[t])}),i=null,f.call(this,t)}),g=function(t,e){var n,r,s,o=0;for(s in(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n)f.call(r,s)&&o++;return n=r=null,o?g=2==o?function(t,e){var i,n={},r=y.call(t)==b;for(i in t)r&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(t,i)||e(i)}:function(t,e){var i,n,r=y.call(t)==b;for(i in t)r&&"prototype"==i||!f.call(t,i)||(n="constructor"===i)||e(i);(n||f.call(t,i="constructor"))&&e(i)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],g=function(t,e){var n,s,o=y.call(t)==b,a=!o&&"function"!=typeof t.constructor&&i[typeof t.hasOwnProperty]&&t.hasOwnProperty||f;for(n in t)o&&"prototype"==n||!a.call(t,n)||e(n);for(s=r.length;n=r[--s];a.call(t,n)&&e(n));}),g(t,e)},!s("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},C=function(t,e){return("000000"+(e||0)).slice(-t)},I=function(t){for(var e='"',i=0,n=t.length,r=!E||n>10,s=r&&(E?t.split(""):t);n>i;i++){var o=t.charCodeAt(i);switch(o){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=M[o];break;default:if(32>o){e+="\\u00"+C(2,o.toString(16));break}e+=r?s[i]:t.charAt(i)}}return e+'"'},O=function(t,e,i,n,r,s,o){var a,h,l,u,d,p,m,_,b,E,A,M,R,L,D,k;try{a=e[t]}catch(t){}if("object"==typeof a&&a)if("[object Date]"!=(h=y.call(a))||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(h!=w&&h!=x&&h!=T||f.call(a,"toJSON"))&&(a=a.toJSON(t));else if(a>-1/0&&1/0>a){if(P){for(d=S(a/864e5),l=S(d/365.2425)+1970-1;P(l+1,0)<=d;l++);for(u=S((d-P(l,0))/30.42);P(l,u+1)<=d;u++);d=1+d-P(l,u),m=S((p=(a%864e5+864e5)%864e5)/36e5)%24,_=S(p/6e4)%60,b=S(p/1e3)%60,E=p%1e3}else l=a.getUTCFullYear(),u=a.getUTCMonth(),d=a.getUTCDate(),m=a.getUTCHours(),_=a.getUTCMinutes(),b=a.getUTCSeconds(),E=a.getUTCMilliseconds();a=(0>=l||l>=1e4?(0>l?"-":"+")+C(6,0>l?-l:l):C(4,l))+"-"+C(2,u+1)+"-"+C(2,d)+"T"+C(2,m)+":"+C(2,_)+":"+C(2,b)+"."+C(3,E)+"Z"}else a=null;if(i&&(a=i.call(e,t,a)),null===a)return"null";if("[object Boolean]"==(h=y.call(a)))return""+a;if(h==w)return a>-1/0&&1/0>a?""+a:"null";if(h==x)return I(""+a);if("object"==typeof a){for(L=o.length;L--;)if(o[L]===a)throw c();if(o.push(a),A=[],D=s,s+=r,h==T){for(R=0,L=a.length;L>R;R++)M=O(R,a,i,n,r,s,o),A.push(M===v?"null":M);k=A.length?r?"[\n"+s+A.join(",\n"+s)+"\n"+D+"]":"["+A.join(",")+"]":"[]"}else g(n||a,function(t){var e=O(t,a,i,n,r,s,o);e!==v&&A.push(I(t)+":"+(r?" ":"")+e)}),k=A.length?r?"{\n"+s+A.join(",\n"+s)+"\n"+D+"}":"{"+A.join(",")+"}":"{}";return o.pop(),k}};n.stringify=function(t,e,n){var r,s,o,a;if(i[typeof e]&&e)if((a=y.call(e))==b)s=e;else if(a==T){o={};for(var h,l=0,u=e.length;u>l;h=e[l++],((a=y.call(h))==x||a==w)&&(o[h]=1));}if(n)if((a=y.call(n))==w){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else a==x&&(r=n.length<=10?n:n.slice(0,10));return O("",((h={})[""]=t,h),s,o,r,"",[])}}if(!s("json-parse")){var R,L,D=a.fromCharCode,k={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},j=function(){throw R=L=null,u()},N=function(){for(var t,e,i,n,r,s=L,o=s.length;o>R;)switch(r=s.charCodeAt(R)){case 9:case 10:case 13:case 32:R++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=E?s.charAt(R):s[R],R++,t;case 34:for(t="@",R++;o>R;)if(32>(r=s.charCodeAt(R)))j();else if(92==r)switch(r=s.charCodeAt(++R)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=k[r],R++;break;case 117:for(e=++R,i=R+4;i>R;R++)(r=s.charCodeAt(R))>=48&&57>=r||r>=97&&102>=r||r>=65&&70>=r||j();t+=D("0x"+s.slice(e,R));break;default:j()}else{if(34==r)break;for(r=s.charCodeAt(R),e=R;r>=32&&92!=r&&34!=r;)r=s.charCodeAt(++R);t+=s.slice(e,R)}if(34==s.charCodeAt(R))return R++,t;j();default:if(e=R,45==r&&(n=!0,r=s.charCodeAt(++R)),r>=48&&57>=r){for(48==r&&((r=s.charCodeAt(R+1))>=48&&57>=r)&&j(),n=!1;o>R&&((r=s.charCodeAt(R))>=48&&57>=r);R++);if(46==s.charCodeAt(R)){for(i=++R;o>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==R&&j(),R=i}if(101==(r=s.charCodeAt(R))||69==r){for((43==(r=s.charCodeAt(++R))||45==r)&&R++,i=R;o>i&&((r=s.charCodeAt(i))>=48&&57>=r);i++);i==R&&j(),R=i}return+s.slice(e,R)}if(n&&j(),"true"==s.slice(R,R+4))return R+=4,!0;if("false"==s.slice(R,R+5))return R+=5,!1;if("null"==s.slice(R,R+4))return R+=4,null;j()}return"$"},B=function(t){var e,i;if("$"==t&&j(),"string"==typeof t){if("@"==(E?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=N());i||(i=!0))i&&(","==t?"]"==(t=N())&&j():j()),","==t&&j(),e.push(B(t));return e}if("{"==t){for(e={};"}"!=(t=N());i||(i=!0))i&&(","==t?"}"==(t=N())&&j():j()),(","==t||"string"!=typeof t||"@"!=(E?t.charAt(0):t[0])||":"!=N())&&j(),e[t.slice(1)]=B(N());return e}j()}return t},U=function(t,e,i){var n=F(t,e,i);n===v?delete t[e]:t[e]=n},F=function(t,e,i){var n,r=t[e];if("object"==typeof r&&r)if(y.call(r)==T)for(n=r.length;n--;)U(r,n,i);else g(r,function(t){U(r,t,i)});return i.call(t,e,r)};n.parse=function(t,e){var i,n;return R=0,L=""+t,i=B(N()),"$"!=N()&&j(),R=L=null,e&&y.call(e)==b?F(((n={})[""]=i,n),"",e):i}}}return n.runInContext=t,n}var e="function"==typeof define&&define.amd,i={function:!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,r=i[typeof window]&&window||this,s=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(r=s),n&&!e)t(r,n);else{var o=r.JSON,a=r.JSON3,h=!1,l=t(r,r.JSON3={noConflict:function(){return h||(h=!0,r.JSON=o,r.JSON3=a,o=a=null),l}});r.JSON={parse:l.parse,stringify:l.stringify}}e&&define(function(){return l})}.call(this),function(){var t={appendToHead:function(e){t.getHead().appendChild(e)},getHead:function(){return document.head||document.getElementsByTagName("head")[0]},getBody:function(){return document.body||document.getElementsByTagName("body")[0]}};createjs.DomUtils=t}(),function(){var t={parseXML:function(t,e){var i=null;try{if(window.DOMParser)i=(new DOMParser).parseFromString(t,e)}catch(t){}if(!i)try{(i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)}catch(t){i=null}return i},parseJSON:function(t){if(null==t)return null;try{return JSON.parse(t)}catch(t){throw t}}};createjs.DataUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this._formatQueryString(e,i):t+"?"+this._formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this),i=this;e instanceof Function?e(function(t){i._result=t,i._sendComplete()}):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._formatResult=function(t){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(t.getTag().src=t.getResult(!0)),t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;("loaded"==t.readyState||"complete"==t.readyState)&&this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,o=s.ACTIVEX_VERSIONS.length;o>r;r++){var a=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(a);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,this.init(t,e,i)}var e=createjs.extend(t,createjs.AbstractLoader),i=t;e.init=function(t,e,i){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(t),this._paused=!1,this._basePath=e,this._crossOrigin=i,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},i.loadTimeout=8e3,i.LOAD_TIMEOUT=0,i.BINARY=createjs.AbstractLoader.BINARY,i.CSS=createjs.AbstractLoader.CSS,i.IMAGE=createjs.AbstractLoader.IMAGE,i.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,i.JSON=createjs.AbstractLoader.JSON,i.JSONP=createjs.AbstractLoader.JSONP,i.MANIFEST=createjs.AbstractLoader.MANIFEST,i.SOUND=createjs.AbstractLoader.SOUND,i.VIDEO=createjs.AbstractLoader.VIDEO,i.SVG=createjs.AbstractLoader.SVG,i.TEXT=createjs.AbstractLoader.TEXT,i.XML=createjs.AbstractLoader.XML,i.POST=createjs.AbstractLoader.POST,i.GET=createjs.AbstractLoader.GET,e.registerLoader=function(t){if(!t||!t.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(t))throw new Error("loader already exists.");this._availableLoaders.unshift(t)},e.unregisterLoader=function(t){var e=this._availableLoaders.indexOf(t);-1!=e&&e<this._defaultLoaderLength-1&&this._availableLoaders.splice(e,1)},e.setUseXHR=function(t){return this.setPreferXHR(t)},e.setPreferXHR=function(t){return this.preferXHR=0!=t&&null!=window.XMLHttpRequest,this.preferXHR},e.removeAll=function(){this.remove()},e.remove=function(t){var e=null;if(!t||t instanceof Array){if(t)e=t;else if(arguments.length>0)return}else e=[t];var i=!1;if(e){for(;e.length;){var n=e.pop(),r=this.getResult(n);for(s=this._loadQueue.length-1;s>=0;s--)if((o=this._loadQueue[s].getItem()).id==n||o.src==n){this._loadQueue.splice(s,1)[0].cancel();break}for(s=this._loadQueueBackup.length-1;s>=0;s--)if((o=this._loadQueueBackup[s].getItem()).id==n||o.src==n){this._loadQueueBackup.splice(s,1)[0].cancel();break}if(r)this._disposeItem(this.getItem(n));else for(var s=this._currentLoads.length-1;s>=0;s--){var o=this._currentLoads[s].getItem();if(o.id==n||o.src==n){this._currentLoads.splice(s,1)[0].cancel(),i=!0;break}}}i&&this._loadNext()}else{for(var a in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[a]);this.init(this.preferXHR,this._basePath,this._crossOrigin)}},e.reset=function(){for(var t in this.close(),this._loadItemsById)this._disposeItem(this._loadItemsById[t]);for(var e=[],i=0,n=this._loadQueueBackup.length;n>i;i++)e.push(this._loadQueueBackup[i].getItem());this.loadManifest(e,!1)},e.installPlugin=function(t){if(null!=t&&null!=t.getPreloadHandlers){this._plugins.push(t);var e=t.getPreloadHandlers();if(e.scope=t,null!=e.types)for(var i=0,n=e.types.length;n>i;i++)this._typeCallbacks[e.types[i]]=e;if(null!=e.extensions)for(i=0,n=e.extensions.length;n>i;i++)this._extensionCallbacks[e.extensions[i]]=e}},e.setMaxConnections=function(t){this._maxConnections=t,!this._paused&&this._loadQueue.length>0&&this._loadNext()},e.loadFile=function(t,e,i){if(null!=t)this._addItem(t,null,i),!1!==e?this.setPaused(!1):this.setPaused(!0);else{var n=new createjs.ErrorEvent("PRELOAD_NO_FILE");this._sendError(n)}},e.loadManifest=function(t,e,n){var r=null,s=null;if(t instanceof Array){if(0==t.length){var o=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(o)}r=t}else if("string"==typeof t)r=[{src:t,type:i.MANIFEST}];else{if("object"!=typeof t){o=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(o)}if(void 0!==t.src){if(null==t.type)t.type=i.MANIFEST;else if(t.type!=i.MANIFEST){o=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(o)}r=[t]}else void 0!==t.manifest&&(r=t.manifest,s=t.path)}for(var a=0,h=r.length;h>a;a++)this._addItem(r[a],s,n);!1!==e?this.setPaused(!1):this.setPaused(!0)},e.load=function(){this.setPaused(!1)},e.getItem=function(t){return this._loadItemsById[t]||this._loadItemsBySrc[t]},e.getResult=function(t,e){var i=this._loadItemsById[t]||this._loadItemsBySrc[t];if(null==i)return null;var n=i.id;return e&&this._loadedRawResults[n]?this._loadedRawResults[n]:this._loadedResults[n]},e.getItems=function(t){var e=[];for(var i in this._loadItemsById){var n=this._loadItemsById[i],r=this.getResult(i);(!0!==t||null!=r)&&e.push({item:n,result:r,rawResult:this.getResult(i,!0)})}return e},e.setPaused=function(t){this._paused=t,this._paused||this._loadNext()},e.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},e._addItem=function(t,e,i){var n=this._createLoadItem(t,e,i);if(null!=n){var r=this._createLoader(n);null!=r&&("plugins"in r&&(r.plugins=this._plugins),n._loader=r,this._loadQueue.push(r),this._loadQueueBackup.push(r),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&n.type==createjs.LoadQueue.JAVASCRIPT||!0===n.maintainOrder)&&(this._scriptOrder.push(n),this._loadedScripts.push(null)))}},e._createLoadItem=function(t,e,i){var n=createjs.LoadItem.create(t);if(null==n)return null;var r="",s=i||this._basePath;if(n.src instanceof Object){if(!n.type)return null;if(e){r=e;var o=createjs.RequestUtils.parseURI(e);null==s||o.absolute||o.relative||(r=s+r)}else null!=s&&(r=s)}else{var a=createjs.RequestUtils.parseURI(n.src);a.extension&&(n.ext=a.extension),null==n.type&&(!n.ext&&window.console&&console.error("unable to get extension for "+n.src),n.type=createjs.RequestUtils.getTypeByExtension(n.ext));var h=n.src;if(!a.absolute&&!a.relative)if(e){r=e;o=createjs.RequestUtils.parseURI(e);h=e+h,null==s||o.absolute||o.relative||(r=s+r)}else null!=s&&(r=s);n.src=r+n.src}n.path=r,(void 0===n.id||null===n.id||""===n.id)&&(n.id=h);var l=this._typeCallbacks[n.type]||this._extensionCallbacks[n.ext];if(l){var u=l.callback.call(l.scope,n,this);if(!1===u)return null;!0===u||null!=u&&(n._loader=u),null!=(a=createjs.RequestUtils.parseURI(n.src)).extension&&(n.ext=a.extension)}return this._loadItemsById[n.id]=n,this._loadItemsBySrc[n.src]=n,null==n.crossOrigin&&(n.crossOrigin=this._crossOrigin),n},e._createLoader=function(t){if(null!=t._loader)return t._loader;for(var e=this.preferXHR,i=0;i<this._availableLoaders.length;i++){var n=this._availableLoaders[i];if(n&&n.canLoadItem(t))return new n(t,e)}return null},e._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var t=0;t<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);t++){var e=this._loadQueue[t];this._canStartLoad(e)&&(this._loadQueue.splice(t,1),t--,this._loadItem(e))}}},e._loadItem=function(t){t.on("fileload",this._handleFileLoad,this),t.on("progress",this._handleProgress,this),t.on("complete",this._handleFileComplete,this),t.on("error",this._handleError,this),t.on("fileerror",this._handleFileError,this),this._currentLoads.push(t),this._sendFileStart(t.getItem()),t.load()},e._handleFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleFileError=function(t){var e=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,t.item);this._sendError(e)},e._handleError=function(t){var e=t.target;this._numItemsLoaded++,this._finishOrderedItem(e,!0),this._updateProgress();var i=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,e.getItem());this._sendError(i),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(e),this._cleanLoadItem(e),this._loadNext())},e._handleFileComplete=function(t){var e=t.target,i=e.getItem(),n=e.getResult();this._loadedResults[i.id]=n;var r=e.getResult(!0);null!=r&&r!==n&&(this._loadedRawResults[i.id]=r),this._saveLoadedItems(e),this._removeLoadItem(e),this._finishOrderedItem(e)||this._processFinishedLoad(i,e),this._cleanLoadItem(e)},e._saveLoadedItems=function(t){var e=t.getLoadedItems();if(null!==e)for(var i=0;i<e.length;i++){var n=e[i].item;this._loadItemsBySrc[n.src]=n,this._loadItemsById[n.id]=n,this._loadedResults[n.id]=e[i].result,this._loadedRawResults[n.id]=e[i].rawResult}},e._finishOrderedItem=function(t,e){var i=t.getItem();if(this.maintainScriptOrder&&i.type==createjs.LoadQueue.JAVASCRIPT||i.maintainOrder){t instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var n=createjs.indexOf(this._scriptOrder,i);return-1!=n&&(this._loadedScripts[n]=!0===e||i,this._checkScriptLoadOrder(),!0)}return!1},e._checkScriptLoadOrder=function(){for(var t=this._loadedScripts.length,e=0;t>e;e++){var i=this._loadedScripts[e];if(null===i||void 0===i)break;if(!0!==i){var n=this._loadedResults[i.id];i.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(n);var r=i._loader;this._processFinishedLoad(i,r),this._loadedScripts[e]=!0}}},e._processFinishedLoad=function(t,e){if(this._numItemsLoaded++,!this.maintainScriptOrder&&t.type==createjs.LoadQueue.JAVASCRIPT){var i=e.getTag();createjs.DomUtils.appendToHead(i)}this._updateProgress(),this._sendFileComplete(t,e),this._loadNext()},e._canStartLoad=function(t){if(!this.maintainScriptOrder||t.preferXHR)return!0;var e=t.getItem();if(e.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var i=this._scriptOrder.indexOf(e),n=0;i>n;){if(null==this._loadedScripts[n])return!1;n++}return this._currentlyLoadingScript=!0,!0},e._removeLoadItem=function(t){for(var e=this._currentLoads.length,i=0;e>i;i++)if(this._currentLoads[i]==t){this._currentLoads.splice(i,1);break}},e._cleanLoadItem=function(t){var e=t.getItem();e&&delete e._loader},e._handleProgress=function(t){var e=t.target;this._sendFileProgress(e.getItem(),e.progress),this._updateProgress()},e._updateProgress=function(){var t=this._numItemsLoaded/this._numItems,e=this._numItems-this._numItemsLoaded;if(e>0){for(var i=0,n=0,r=this._currentLoads.length;r>n;n++)i+=this._currentLoads[n].progress;t+=i/e*(e/this._numItems)}this._lastProgress!=t&&(this._sendProgress(t),this._lastProgress=t)},e._disposeItem=function(t){delete this._loadedResults[t.id],delete this._loadedRawResults[t.id],delete this._loadItemsById[t.id],delete this._loadItemsBySrc[t.src]},e._sendFileProgress=function(t,e){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var i=new createjs.Event("fileprogress");i.progress=e,i.loaded=e,i.total=1,i.item=t,this.dispatchEvent(i)}},e._sendFileComplete=function(t,e){if(!this._isCanceled()&&!this._paused){var i=new createjs.Event("fileload");i.loader=e,i.item=t,i.result=this._loadedResults[t.id],i.rawResult=this._loadedRawResults[t.id],t.completeHandler&&t.completeHandler(i),this.hasEventListener("fileload")&&this.dispatchEvent(i)}},e._sendFileStart=function(t){var e=new createjs.Event("filestart");e.item=t,this.hasEventListener("filestart")&&this.dispatchEvent(e)},e.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.TEXT)}(createjs.extend(t,createjs.AbstractLoader),t).canLoadItem=function(t){return t.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.BINARY},e._updateXHR=function(t){t.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",this._tag=e?document.createElement("style"):document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.CSS},e._formatResult=function(t){if(this._preferXHR){var e=t.getTag();if(e.styleSheet)e.styleSheet.cssText=t.getResult(!0);else{var i=document.createTextNode(t.getResult(!0));e.appendChild(i)}}else e=this._tag;return createjs.DomUtils.appendToHead(e),e},createjs.CSSLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(t)?this._tag=t:createjs.RequestUtils.isImageTag(t.src)?this._tag=t.src:createjs.RequestUtils.isImageTag(t.tag)&&(this._tag=t.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.IMAGE},e.load=function(){if(""!=this._tag.src&&this._tag.complete)this._sendComplete();else{var t=this._item.crossOrigin;1==t&&(t="Anonymous"),null==t||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=t),this.AbstractLoader_load()}},e._updateXHR=function(t){t.loader.mimeType="text/plain; charset=x-user-defined-binary",t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){var e=this;return function(i){var n=e._tag,r=window.URL||window.webkitURL;if(e._preferXHR)if(r){var s=r.createObjectURL(t.getResult(!0));s?(n.src=s,n.onload=function(){r.revokeObjectURL(this.src),i(this)}):(n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)})}else n.src=t.getItem().src,n.complete?i(n):n.onload=function(){i(this)}}},createjs.ImageLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JAVASCRIPT},e._formatResult=function(t){var e=t.getTag();return this._preferXHR&&(e.text=t.getResult(!0)),e},createjs.JavaScriptLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSON},e._formatResult=function(t){var e=null;try{e=createjs.DataUtils.parseJSON(t.getResult(!0))}catch(t){var i=new createjs.ErrorEvent("JSON_FORMAT",null,t);return this._sendError(i),t}return e},createjs.JSONLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.JSONP},e.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},e.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},e._handleLoad=function(t){this._result=this._rawResult=t,this._sendComplete(),this._dispose()},e._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},e._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.MANIFEST_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.MANIFEST},e.load=function(){this.AbstractLoader_load()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.MANIFEST_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},e._loadManifest=function(t){if(t&&t.manifest){var e=this._manifestQueue=new createjs.LoadQueue;e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("complete",this._handleManifestComplete,this,!0),e.on("error",this._handleManifestError,this,!0);for(var i=0,n=this.plugins.length;n>i;i++)e.installPlugin(this.plugins[i]);e.loadManifest(t)}else this._sendComplete()},e._handleManifestFileLoad=function(t){t.target=null,this.dispatchEvent(t)},e._handleManifestComplete=function(t){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.MANIFEST_PROGRESS)+i.MANIFEST_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.ManifestLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(t)||createjs.RequestUtils.isVideoTag(t.src)?(this.setTag(createjs.RequestUtils.isVideoTag(t)?t:t.src),this._preferXHR=!1):this.setTag(this._createTag())}var e=t;createjs.extend(t,createjs.AbstractMediaLoader)._createTag=function(){return document.createElement("video")},e.canLoadItem=function(t){return t.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i.SPRITESHEET_PROGRESS=.25,i.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SPRITESHEET},e.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},e._createRequest=function(){var t=this._item.callback;this._request=null!=t?new createjs.JSONPLoader(this._item):new createjs.JSONLoader(this._item)},e.handleEvent=function(t){switch(t.type){case"complete":return this._rawResult=t.target.getResult(!0),this._result=t.target.getResult(),this._sendProgress(i.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return t.loaded*=i.SPRITESHEET_PROGRESS,this.progress=t.loaded/t.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(t)}this.AbstractLoader_handleEvent(t)},e._loadManifest=function(t){if(t&&t.images){var e=this._manifestQueue=new createjs.LoadQueue;e.on("complete",this._handleManifestComplete,this,!0),e.on("fileload",this._handleManifestFileLoad,this),e.on("progress",this._handleManifestProgress,this),e.on("error",this._handleManifestError,this,!0),e.loadManifest(t.images)}},e._handleManifestFileLoad=function(t){var e=t.result;if(null!=e){var i=this.getResult().images;i[i.indexOf(t.item.src)]=e}},e._handleManifestComplete=function(t){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},e._handleManifestProgress=function(t){this.progress=t.progress*(1-i.SPRITESHEET_PROGRESS)+i.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},e._handleManifestError=function(t){var e=new createjs.Event("fileerror");e.item=t.data,this.dispatchEvent(e)},createjs.SpriteSheetLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractLoader_constructor(t,e,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",e?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SVG},e._formatResult=function(t){var e=createjs.DataUtils.parseXML(t.getResult(!0),"text/xml"),i=t.getTag();return!this._preferXHR&&document.body.contains(i)&&document.body.removeChild(i),null!=e.documentElement?(i.appendChild(e.documentElement),i.style.visibility="visible",i):e},createjs.SVGLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var e=createjs.extend(t,createjs.AbstractLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.XML},e._formatResult=function(t){return createjs.DataUtils.parseXML(t.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(t,"AbstractLoader")}(),function(){"use strict";!function(t){function e(t,e){return t._priority-e._priority}var i=function(){this._listeners={}},n=i.prototype;n.on=function(t,i,n){if("string"!=typeof t)for(var r in t)this.on(r,t[r],n);else for(var s,o=t.split(" "),a=0,h=o.length;h>a;a++)t=o[a],(s=this._listeners[t])||(s=this._listeners[t]=[]),i._priority=parseInt(n)||0,-1===s.indexOf(i)&&(s.push(i),s.length>1&&s.sort(e));return this},n.off=function(t,e){if(void 0===t||!this._listeners)return this._listeners={},this;if(void 0===this._listeners[t])return this;if(void 0===e)delete this._listeners[t];else for(var i=this._listeners[t],n=0,r=i.length;r>n;n++)if(i[n]===e){i.splice(n,1);break}return this},n.trigger=function(t){"string"==typeof t&&(t={type:t});var e=this._listeners[t.type];if(void 0!==e)for(var i=e.length-1;i>=0;i--)e[i](t)},n.destroy=function(){this._listeners=null},t.BellhopEventDispatcher=i}(window),function(t,e){var i=t.BellhopEventDispatcher,n=function(){i.call(this),this.onReceive=this.receive.bind(this),this.connected=!1,this.name="",this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.supported=null,this.iframe=null},r=i.prototype,s=n.prototype=Object.create(r);s.receive=function(t){if(t.source===this.target){var e=t.data;if("connected"===e){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(e,this.origin);var i,r=this._sendLater.length;if(r>0){for(i=0;r>i;i++){var s=this._sendLater[i];this.send(s.type,s.data)}this._sendLater.length=0}}else{if(!this.connected)return;try{e=JSON.parse(e,n.reviver)}catch(t){return}"object"==typeof e&&e.type&&this.trigger(e)}}},s.toString=function(){return"[Bellhop '"+this.name+"']"},Object.defineProperty(s,"target",{get:function(){return this.isChild?t.parent:this.iframe.contentWindow}}),s.connect=function(i,n){if(this.connecting)return this;this.disconnect(),this.connecting=!0,this._sendLater||(this._sendLater=[]),this.iframe=i||null;var r=this.isChild=i===e,s=this.target;return this.supported=r?!!s&&t!=s:!!s,this.origin=n===e?"*":n,t.attachEvent?t.attachEvent("onmessage",this.onReceive):t.addEventListener("message",this.onReceive),r&&(t===s?this.trigger("failed"):"complete"===t.document.readyState?s.postMessage("connected",this.origin):t.onload=function(){s.postMessage("connected",this.origin)}.bind(this)),this},s.disconnect=function(){return this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this._sendLater&&(this._sendLater.length=0),this.isChild=!0,t.detachEvent?t.detachEvent("onmessage",this.onReceive):t.removeEventListener("message",this.onReceive),this},s.send=function(t,i){if("string"!=typeof t)throw"The event type must be a string";if(t={type:t},i!==e&&(t.data=i),this.connecting)this._sendLater.push(t);else{if(!this.connected)return this;this.target.postMessage(JSON.stringify(t),this.origin)}return this},s.fetch=function(t,i,n,r){var s=this;if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";r=r!==e&&r;var o=function(t){r&&s.off(t.type,o),i(t)};return this.on(t,o),this.send(t,n),this},s.respond=function(t,i,n){n=n!==e&&n;var r=this,s=function(e){n&&r.off(e.type,s),r.send(t,"function"==typeof i?i():i)};return this.on(t,s),this},s.destroy=function(){r.destroy.call(this),this.disconnect(),this._sendLater=null},n.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=o(e.__classname);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e};var o=function(e){for(var i=e.split("."),n=t;i.length;)if(!(n=n[i.shift()]))return;return n};t.Bellhop=n}(window)}(),this.createjs=this.createjs||{},function(){var t=createjs.SoundJS=createjs.SoundJS||{};t.version="0.6.6",t.buildDate="Thu, 10 May 2018 18:47:59 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.indexOf=function(t,e){"use strict";for(var i=0,n=t.length;i<n;i++)if(e===t[i])return i;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(t,e){var i=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,Array.prototype.slice.call(arguments,0).concat(i))}}}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"BrowserDetect cannot be instantiated"}var e=t.agent=window.navigator.userAgent;t.isWindowPhone=e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,t.isFirefox=e.indexOf("Firefox")>-1,t.isOpera=null!=window.opera,t.isChrome=e.indexOf("Chrome")>-1,t.isIOS=(e.indexOf("iPod")>-1||e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&!t.isWindowPhone,t.isAndroid=e.indexOf("Android")>-1&&!t.isWindowPhone,t.isBlackberry=e.indexOf("Blackberry")>-1,createjs.BrowserDetect=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;s<o;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,a=s.length;for(o=a-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;o<a&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(t){}try{t.eventPhase=e}catch(t){}t.removed=!1,r=r.slice();for(var s=0;s<i&&!t.immediatePropagationStopped;s++){var o=r[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.Event_constructor("error"),this.title=t,this.message=e,this.data=i}createjs.extend(t,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(t,"Event")}(),this.createjs=this.createjs||{},function(t){"use strict";function e(t,e){this.Event_constructor("progress"),this.loaded=t,this.total=null==e?1:e,this.progress=0==e?0:this.loaded/this.total}createjs.extend(e,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(e,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function t(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=i.LOAD_TIMEOUT_DEFAULT}var e=t.prototype={},i=t;i.LOAD_TIMEOUT_DEFAULT=8e3,i.create=function(e){if("string"==typeof e){var n=new t;return n.src=e,n}if(e instanceof i)return e;if(e instanceof Object&&e.src)return null==e.loadTimeout&&(e.loadTimeout=i.LOAD_TIMEOUT_DEFAULT),e;throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},createjs.LoadItem=i}(),function(){var t={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[.\/]*?\//i,EXTENSION_PATT:/\/?[^\/]+\.(\w{1,5})$/i,parseURI:function(e){var i={absolute:!1,relative:!1};if(null==e)return i;var n,r=e.indexOf("?");return r>-1&&(e=e.substr(0,r)),t.ABSOLUTE_PATT.test(e)?i.absolute=!0:t.RELATIVE_PATT.test(e)&&(i.relative=!0),(n=e.match(t.EXTENSION_PATT))&&(i.extension=n[1].toLowerCase()),i},formatQueryString:function(t,e){if(null==t)throw new Error("You must specify data.");var i=[];for(var n in t)i.push(n+"="+escape(t[n]));return e&&(i=i.concat(e)),i.join("&")},buildPath:function(t,e){if(null==e)return t;var i=[],n=t.indexOf("?");if(-1!=n){var r=t.slice(n+1);i=i.concat(r.split("&"))}return-1!=n?t.slice(0,n)+"?"+this.formatQueryString(e,i):t+"?"+this.formatQueryString(e,i)},isCrossDomain:function(t){var e=document.createElement("a");e.href=t.src;var i=document.createElement("a");return i.href=location.href,""!=e.hostname&&(e.port!=i.port||e.protocol!=i.protocol||e.hostname!=i.hostname)},isLocal:function(t){var e=document.createElement("a");return e.href=t.src,""==e.hostname&&"file:"==e.protocol},isBinary:function(t){switch(t){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(t){return t instanceof HTMLImageElement},isAudioTag:function(t){return!!window.HTMLAudioElement&&t instanceof HTMLAudioElement},isVideoTag:function(t){return!!window.HTMLVideoElement&&t instanceof HTMLVideoElement},isText:function(t){switch(t){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},getTypeByExtension:function(t){if(null==t)return createjs.AbstractLoader.TEXT;switch(t.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=i,this.resultFormatter=null,this._item=t?createjs.LoadItem.create(t):null,this._preferXHR=e,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var e=createjs.extend(t,createjs.EventDispatcher),i=t;i.POST="POST",i.GET="GET",i.BINARY="binary",i.CSS="css",i.IMAGE="image",i.JAVASCRIPT="javascript",i.JSON="json",i.JSONP="jsonp",i.MANIFEST="manifest",i.SOUND="sound",i.VIDEO="video",i.SPRITESHEET="spritesheet",i.SVG="svg",i.TEXT="text",i.XML="xml",e.getItem=function(){return this._item},e.getResult=function(t){return t?this._rawResult:this._result},e.getTag=function(){return this._tag},e.setTag=function(t){this._tag=t},e.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var t=new createjs.Event("initialize");t.loader=this._request,this.dispatchEvent(t),this._request.load()},e.cancel=function(){this.canceled=!0,this.destroy()},e.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},e.getLoadedItems=function(){return this._loadedItems},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._createTag=function(t){return null},e._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},e._sendProgress=function(t){if(!this._isCanceled()){var e=null;"number"==typeof t?(this.progress=t,e=new createjs.ProgressEvent(this.progress)):(e=t,this.progress=t.loaded/t.total,e.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(e)}},e._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var t=new createjs.Event("complete");t.rawResult=this._rawResult,null!=this._result&&(t.result=this._result),this.dispatchEvent(t)}},e._sendError=function(t){!this._isCanceled()&&this.hasEventListener("error")&&(null==t&&(t=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(t))},e._isCanceled=function(){return!(null!=window.createjs&&!this.canceled)},e.resultFormatter=null,e.handleEvent=function(t){switch(t.type){case"complete":this._rawResult=t.target._response;var e=this.resultFormatter&&this.resultFormatter(this);e instanceof Function?e.call(this,createjs.proxy(this._resultFormatSuccess,this),createjs.proxy(this._resultFormatFailed,this)):(this._result=e||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(t);break;case"error":this._sendError(t);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+t.type.toUpperCase()+"_ERROR"))}},e._resultFormatSuccess=function(t){this._result=t,this._sendComplete()},e._resultFormatFailed=function(t){this._sendError(t)},e.buildPath=function(t,e){return createjs.RequestUtils.buildPath(t,e)},e.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractLoader_constructor(t,e,i),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.on("initialize",this._updateXHR,this)}var e=createjs.extend(t,createjs.AbstractLoader);e.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},e._createTag=function(){},e._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},e._updateXHR=function(t){t.loader.setResponseType&&t.loader.setResponseType("blob")},e._formatResult=function(t){if(this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR){var e=window.URL||window.webkitURL,i=t.getResult(!0);t.getTag().src=e.createObjectURL(i)}return t.getTag()},createjs.AbstractMediaLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t){this._item=t},e=createjs.extend(t,createjs.EventDispatcher);e.load=function(){},e.destroy=function(){},e.cancel=function(){},createjs.AbstractRequest=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var e=createjs.extend(t,createjs.AbstractRequest);e.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var t=new createjs.Event("initialize");t.loader=this._tag,this.dispatchEvent(t),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},e.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleError=function(){this._clean(),this.dispatchEvent("error")},e._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},e._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},e._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},e._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},e._showTag=function(){this._tag.style.visibility=this._startTagVisibility},e._handleStalled=function(){},createjs.TagRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.AbstractRequest_constructor(t),this._tag=e,this._tagSrcAttribute=i,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var e=createjs.extend(t,createjs.TagRequest);e.load=function(){var t=createjs.proxy(this._handleStalled,this);this._stalledCallback=t;var e=createjs.proxy(this._handleProgress,this);this._handleProgress=e,this._tag.addEventListener("stalled",t),this._tag.addEventListener("progress",e),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},e._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var t=this._tag;"loaded"!=t.readyState&&"complete"!=t.readyState||this._handleTagComplete()},e._handleStalled=function(){},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(t,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractRequest_constructor(t),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),this._createXHR(t)}var e=createjs.extend(t,createjs.AbstractRequest);t.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],e.getResult=function(t){return t&&this._rawResponse?this._rawResponse:this._response},e.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},e.load=function(){if(null!=this._request){null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(t){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,t))}}else this._handleError()},e.setResponseType=function(t){"blob"===t&&(t=window.URL?"blob":"arraybuffer",this._responseType=t),this._request.responseType=t},e.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},e.getResponseHeader=function(t){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(t):null},e._handleProgress=function(t){if(t&&!(t.loaded>0&&0==t.total)){var e=new createjs.ProgressEvent(t.loaded,t.total);this.dispatchEvent(e)}},e._handleLoadStart=function(t){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},e._handleAbort=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,t))},e._handleError=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(t.message))},e._handleReadyStateChange=function(t){4==this._request.readyState&&this._handleLoad()},e._handleLoad=function(t){if(!this.loaded){this.loaded=!0;var e=this._checkError();if(e)return void this._handleError(e);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(t){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===t.name&&window.BlobBuilder){var i=new BlobBuilder;i.append(this._response),this._response=i.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},e._handleTimeout=function(t){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,t))},e._checkError=function(){var t=parseInt(this._request.status);switch(t){case 404:return new Error(t);case 0:return this._getResponse()?null:new Error(t)}return null},e._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(t){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(t){}return null},e._createXHR=function(t){var e=createjs.RequestUtils.isCrossDomain(t),i={},n=null;if(window.XMLHttpRequest)n=new XMLHttpRequest,e&&void 0===n.withCredentials&&window.XDomainRequest&&(n=new XDomainRequest);else{for(var r=0,o=s.ACTIVEX_VERSIONS.length;r<o;r++){var a=s.ACTIVEX_VERSIONS[r];try{n=new ActiveXObject(a);break}catch(t){}}if(null==n)return!1}null==t.mimeType&&createjs.RequestUtils.isText(t.type)&&(t.mimeType="text/plain; charset=utf-8"),t.mimeType&&n.overrideMimeType&&n.overrideMimeType(t.mimeType),this._xhrLevel="string"==typeof n.responseType?2:1;var h;if(h=t.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(t.src,t.values):t.src,n.open(t.method||createjs.AbstractLoader.GET,h,!0),e&&n instanceof XMLHttpRequest&&1==this._xhrLevel&&(i.Origin=location.origin),t.values&&t.method==createjs.AbstractLoader.POST&&(i["Content-Type"]="application/x-www-form-urlencoded"),e||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),t.headers)for(var l in t.headers)i[l]=t.headers[l];for(l in i)n.setRequestHeader(l,i[l]);return n instanceof XMLHttpRequest&&void 0!==t.withCredentials&&(n.withCredentials=t.withCredentials),this._request=n,!0},e._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},e.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(t,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e){this.AbstractMediaLoader_constructor(t,e,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(t)?this._tag=t:createjs.RequestUtils.isAudioTag(t.src)?this._tag=t:createjs.RequestUtils.isAudioTag(t.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(t)?t:t.src),null!=this._tag&&(this._preferXHR=!1)}var e=createjs.extend(t,createjs.AbstractMediaLoader);t.canLoadItem=function(t){return t.type==createjs.AbstractLoader.SOUND},e._createTag=function(t){var e=document.createElement("audio");return e.autoplay=!1,e.preload="none",e.src=t,e},createjs.SoundLoader=createjs.promote(t,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this.interrupt=null,this.delay=null,this.offset=null,this.loop=null,this.volume=null,this.pan=null,this.startTime=null,this.duration=null},e=t.prototype={},i=t;i.create=function(t){if(t instanceof i||t instanceof Object){var e=new createjs.PlayPropsConfig;return e.set(t),e}throw new Error("Type not recognized.")},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[PlayPropsConfig]"},createjs.PlayPropsConfig=i}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Sound cannot be instantiated"}function e(t,e){this.init(t,e)}var i=t;i.INTERRUPT_ANY="any",i.INTERRUPT_EARLY="early",i.INTERRUPT_LATE="late",i.INTERRUPT_NONE="none",i.PLAY_INITED="playInited",i.PLAY_SUCCEEDED="playSucceeded",i.PLAY_INTERRUPTED="playInterrupted",i.PLAY_FINISHED="playFinished",i.PLAY_FAILED="playFailed",i.SUPPORTED_EXTENSIONS=["mp3","ogg","opus","mpeg","wav","m4a","mp4","aiff","wma","mid"],i.EXTENSION_MAP={m4a:"mp4"},i.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:((?:[^\/?]+)\.(\w+))|(?:[^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,i.defaultInterruptBehavior=i.INTERRUPT_NONE,i.alternateExtensions=[],i.activePlugin=null,i._masterVolume=1,Object.defineProperty(i,"volume",{get:function(){return this._masterVolume},set:function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)}}),i._masterMute=!1,Object.defineProperty(i,"muted",{get:function(){return this._masterMute},set:function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0}}),Object.defineProperty(i,"capabilities",{get:function(){return null==i.activePlugin?null:i.activePlugin._capabilities},set:function(t){return!1}}),i._pluginsRegistered=!1,i._lastID=0,i._instances=[],i._idHash={},i._preloadHash={},i._defaultPlayPropsHash={},i.addEventListener=null,i.removeEventListener=null,i.removeAllEventListeners=null,i.dispatchEvent=null,i.hasEventListener=null,i._listeners=null,createjs.EventDispatcher.initialize(i),i.getPreloadHandlers=function(){return{callback:createjs.proxy(i.initLoad,i),types:["sound"],extensions:i.SUPPORTED_EXTENSIONS}},i._handleLoadComplete=function(t){var e=t.target.getItem().src;if(i.preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!0,i.hasEventListener("fileload"))(t=new createjs.Event("fileload")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._handleLoadError=function(t){var e=t.target.getItem().src;if(i._preloadHash[e])for(var n=0,r=i._preloadHash[e].length;n<r;n++){var s=i._preloadHash[e][n];if(i._preloadHash[e][n]=!1,i.hasEventListener("fileerror"))(t=new createjs.Event("fileerror")).src=s.src,t.id=s.id,t.data=s.data,t.sprite=s.sprite,i.dispatchEvent(t)}},i._registerPlugin=function(t){return!!t.isSupported()&&(i.activePlugin=new t,!0)},i.registerPlugins=function(t){i._pluginsRegistered=!0;for(var e=0,n=t.length;e<n;e++)if(i._registerPlugin(t[e]))return!0;return!1},i.initializeDefaultPlugins=function(){return null!=i.activePlugin||!i._pluginsRegistered&&!!i.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])},i.isReady=function(){return null!=i.activePlugin},i.getCapabilities=function(){return null==i.activePlugin?null:i.activePlugin._capabilities},i.getCapability=function(t){return null==i.activePlugin?null:i.activePlugin._capabilities[t]},i.initLoad=function(t){return i._registerSound(t)},i._registerSound=function(t){if(!i.initializeDefaultPlugins())return!1;var n;if(t.src instanceof Object?(n=i._parseSrc(t.src)).src=t.path+n.src:n=i._parsePath(t.src),null==n)return!1;t.src=n.src,t.type="sound";var r=t.data,s=null;if(null!=r&&(isNaN(r.channels)?isNaN(r)||(s=parseInt(r)):s=parseInt(r.channels),r.audioSprite))for(var o,a=r.audioSprite.length;a--;)o=r.audioSprite[a],i._idHash[o.id]={src:t.src,startTime:parseInt(o.startTime),duration:parseInt(o.duration)},o.defaultPlayProps&&(i._defaultPlayPropsHash[o.id]=createjs.PlayPropsConfig.create(o.defaultPlayProps));null!=t.id&&(i._idHash[t.id]={src:t.src});var h=i.activePlugin.register(t);return e.create(t.src,s),null!=r&&isNaN(r)?t.data.channels=s||e.maxPerChannel():t.data=s||e.maxPerChannel(),h.type&&(t.type=h.type),t.defaultPlayProps&&(i._defaultPlayPropsHash[t.src]=createjs.PlayPropsConfig.create(t.defaultPlayProps)),h},i.registerSound=function(t,e,n,r,s){var o={src:t,id:e,data:n,defaultPlayProps:s};t instanceof Object&&t.src&&(r=e,o=t),(o=createjs.LoadItem.create(o)).path=r,null==r||o.src instanceof Object||(o.src=r+t);var a=i._registerSound(o);if(!a)return!1;if(i._preloadHash[o.src]||(i._preloadHash[o.src]=[]),i._preloadHash[o.src].push(o),1==i._preloadHash[o.src].length)a.on("complete",createjs.proxy(this._handleLoadComplete,this)),a.on("error",createjs.proxy(this._handleLoadError,this)),i.activePlugin.preload(a);else if(1==i._preloadHash[o.src][0])return!0;return o},i.registerSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.registerSound(t[n].src,t[n].id,t[n].data,e,t[n].defaultPlayProps);return i},i.removeSound=function(t,n){if(null==i.activePlugin)return!1;var r;if(t instanceof Object&&t.src&&(t=t.src),t instanceof Object?r=i._parseSrc(t):(t=i._getSrcById(t).src,r=i._parsePath(t)),null==r)return!1;for(var s in t=r.src,null!=n&&(t=n+t),i._idHash)i._idHash[s].src==t&&delete i._idHash[s];return e.removeSrc(t),delete i._preloadHash[t],i.activePlugin.removeSound(t),!0},i.removeSounds=function(t,e){var i=[];t.path&&(e?e+=t.path:e=t.path,t=t.manifest);for(var n=0,r=t.length;n<r;n++)i[n]=createjs.Sound.removeSound(t[n].src,e);return i},i.removeAllSounds=function(){i._idHash={},i._preloadHash={},e.removeAll(),i.activePlugin&&i.activePlugin.removeAllSounds()},i.loadComplete=function(t){if(!i.isReady())return!1;var e=i._parsePath(t);return t=e?i._getSrcById(e.src).src:i._getSrcById(t).src,void 0!=i._preloadHash[t]&&1==i._preloadHash[t][0]},i._parsePath=function(t){"string"!=typeof t&&(t=t.toString());var e=t.match(i.FILE_PATTERN);if(null===e)return!1;var n="",r="",s="";if(i.SUPPORTED_EXTENSIONS.indexOf(e[5])>=0)n=e[4],s=r=e[5];else{if(!(i.SUPPORTED_EXTENSIONS.indexOf(e[8])>=0))return null;n=e[7],s=r=e[8]}for(var o=i.capabilities,a=0;!o[r];)if(r=i.alternateExtensions[a++],a>i.alternateExtensions.length)return null;return{name:n,src:t=t.replace("."+s,"."+r),extension:r}},i._parseSrc=function(t){var e={name:void 0,src:void 0,extension:void 0},n=i.capabilities;for(var r in t)if(t.hasOwnProperty(r)&&n[r]){e.src=t[r],e.extension=r;break}if(!e.src)return!1;var s=e.src.lastIndexOf("/");return e.name=-1!=s?e.src.slice(s+1):e.src,e},i.play=function(t,e,n,r,s,o,a,h,l){var u;u=e instanceof Object||e instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(e):createjs.PlayPropsConfig.create({interrupt:e,delay:n,offset:r,loop:s,volume:o,pan:a,startTime:h,duration:l});var c=i.createInstance(t,u.startTime,u.duration);return i._playInstance(c,u)||c._playFailed(),c},i.createInstance=function(t,n,r){if(!i.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(t,n,r);var s=i._defaultPlayPropsHash[t];t=i._getSrcById(t);var o=i._parsePath(t.src),a=null;return null!=o&&null!=o.src?(e.create(o.src),null==n&&(n=t.startTime),a=i.activePlugin.create(o.src,n,r||t.duration),(s=s||i._defaultPlayPropsHash[o.src])&&a.applyPlayProps(s)):a=new createjs.DefaultSoundInstance(t,n,r),a.uniqueId=i._lastID++,a},i.stop=function(){for(var t=this._instances,e=t.length;e--;)t[e].stop()},i.setVolume=function(t){if(null==Number(t))return!1;if(t=Math.max(0,Math.min(1,t)),i._masterVolume=t,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(t))for(var e=this._instances,n=0,r=e.length;n<r;n++)e[n].setMasterVolume(t)},i.getVolume=function(){return this._masterVolume},i.setMute=function(t){if(null==t)return!1;if(this._masterMute=t,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(t))for(var e=this._instances,i=0,n=e.length;i<n;i++)e[i].setMasterMute(t);return!0},i.getMute=function(){return this._masterMute},i.setDefaultPlayProps=function(t,e){t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]=createjs.PlayPropsConfig.create(e)},i.getDefaultPlayProps=function(t){return t=i._getSrcById(t),i._defaultPlayPropsHash[i._parsePath(t.src).src]},i.pause=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!0},i.resume=function(){for(var t=this.instances,e=t.length;e--;)t[e].paused=!1},i._playInstance=function(t,e){var n=i._defaultPlayPropsHash[t.src]||{};if(null==e.interrupt&&(e.interrupt=n.interrupt||i.defaultInterruptBehavior),null==e.delay&&(e.delay=n.delay||0),null==e.offset&&(e.offset=t.getPosition()),null==e.loop&&(e.loop=t.loop),null==e.volume&&(e.volume=t.volume),null==e.pan&&(e.pan=t.pan),0==e.delay){if(!i._beginPlaying(t,e))return!1}else{var r=setTimeout(function(){i._beginPlaying(t,e)},e.delay);t.delayTimeoutId=r}return this._instances.push(t),!0},i._beginPlaying=function(t,i){if(!e.add(t,i.interrupt))return!1;if(!t._beginPlaying(i)){var n=createjs.indexOf(this._instances,t);return n>-1&&this._instances.splice(n,1),!1}return!0},i._getSrcById=function(t){return i._idHash[t]||{src:t}},i._playFinished=function(t){e.remove(t);var n=createjs.indexOf(this._instances,t);n>-1&&this._instances.splice(n,1);var r=i.activePlugin._soundInstances;r[t.src]&&r[t.src].indexOf(t)>-1&&r[t.src].splice(r[t.src].indexOf(t),1)},createjs.Sound=t,e.channels={},e.create=function(t,i){return null==e.get(t)&&(e.channels[t]=new e(t,i),!0)},e.removeSrc=function(t){var i=e.get(t);return null!=i&&(i._removeAll(),delete e.channels[t],!0)},e.removeAll=function(){for(var t in e.channels)e.channels[t]._removeAll();e.channels={}},e.add=function(t,i){var n=e.get(t.src);return null!=n&&n._add(t,i)},e.remove=function(t){var i=e.get(t.src);return null!=i&&(i._remove(t),!0)},e.maxPerChannel=function(){return n.maxDefault},e.get=function(t){return e.channels[t]};var n=e.prototype;n.constructor=e,n.src=null,n.max=null,n.maxDefault=100,n.length=0,n.init=function(t,e){this.src=t,this.max=e||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},n._get=function(t){return this._instances[t]},n._add=function(t,e){return!!this._getSlot(e,t)&&(this._instances.push(t),this.length++,!0)},n._remove=function(t){var e=i.activePlugin._soundInstances;e[t.src]&&e[t.src].indexOf(t)>-1&&e[t.src].splice(e[t.src].indexOf(t),1);var n=createjs.indexOf(this._instances,t);return-1!=n&&(this._instances.splice(n,1),this.length--,!0)},n._removeAll=function(){for(var t=this.length-1;t>=0;t--)this._instances[t].stop()},n._getSlot=function(e,i){var n,r;if(e!=t.INTERRUPT_NONE&&null==(r=this._get(0)))return!0;for(var s=0,o=this.max;s<o;s++){if(null==(n=this._get(s)))return!0;if(n.playState==t.PLAY_FINISHED||n.playState==t.PLAY_INTERRUPTED||n.playState==t.PLAY_FAILED){r=n;break}e!=t.INTERRUPT_NONE&&(e==t.INTERRUPT_EARLY&&n.getPosition()<r.getPosition()||e==t.INTERRUPT_LATE&&n.getPosition()>r.getPosition())&&(r=n)}return null!=r&&(r._interrupt(),this._remove(r),!0)},n.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(t,e,i,n){this.EventDispatcher_constructor(),this.src=t,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._volume=1,Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._startTime=Math.max(0,e||0),Object.defineProperty(this,"startTime",{get:this.getStartTime,set:this.setStartTime}),this._duration=Math.max(0,i||0),Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),!1!==n&&!0!==n&&this.setPlaybackResource(n),this._position=0,Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},e=createjs.extend(t,createjs.EventDispatcher);e.play=function(t,e,i,n,r,s){var o;return o=t instanceof Object||t instanceof createjs.PlayPropsConfig?createjs.PlayPropsConfig.create(t):createjs.PlayPropsConfig.create({interrupt:t,delay:e,offset:i,loop:n,volume:r,pan:s}),this.playState==createjs.Sound.PLAY_SUCCEEDED?(this.applyPlayProps(o),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,o),this)},e.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},e.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},e.applyPlayProps=function(t){return null!=t.offset&&this.setPosition(t.offset),null!=t.loop&&this.setLoop(t.loop),null!=t.volume&&this.setVolume(t.volume),null!=t.pan&&this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this},e.toString=function(){return"[AbstractSoundInstance]"},e.getPaused=function(){return this._paused},e.setPaused=function(t){if(!(!0!==t&&!1!==t||this._paused==t||1==t&&this.playState!=createjs.Sound.PLAY_SUCCEEDED))return this._paused=t,t?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this},e.setVolume=function(t){return t==this._volume?this:(this._volume=Math.max(0,Math.min(1,t)),this._muted||this._updateVolume(),this)},e.getVolume=function(){return this._volume},e.setMuted=function(t){if(!0===t||!1===t)return this._muted=t,this._updateVolume(),this},e.getMuted=function(){return this._muted},e.setPan=function(t){return t==this._pan?this:(this._pan=Math.max(-1,Math.min(1,t)),this._updatePan(),this)},e.getPan=function(){return this._pan},e.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED||(this._position=this._calculateCurrentPosition()),this._position},e.setPosition=function(t){return this._position=Math.max(0,t),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},e.getStartTime=function(){return this._startTime},e.setStartTime=function(t){return t==this._startTime?this:(this._startTime=Math.max(0,t||0),this._updateStartTime(),this)},e.getDuration=function(){return this._duration},e.setDuration=function(t){return t==this._duration?this:(this._duration=Math.max(0,t||0),this._updateDuration(),this)},e.setPlaybackResource=function(t){return this._playbackResource=t,0==this._duration&&this._setDurationFromSource(),this},e.getPlaybackResource=function(){return this._playbackResource},e.getLoop=function(){return this._loop},e.setLoop=function(t){null!=this._playbackResource&&(0!=this._loop&&0==t?this._removeLooping(t):0==this._loop&&0!=t&&this._addLooping(t)),this._loop=t},e._sendEvent=function(t){var e=new createjs.Event(t);this.dispatchEvent(e)},e._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},e._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},e._beginPlaying=function(t){return this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},e._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},e._handleSoundComplete=function(t){if(this._position=0,0!=this._loop)return this._loop--,this._handleLoop(),void this._sendEvent("loop");this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this._sendEvent("complete")},e._handleSoundReady=function(){},e._updateVolume=function(){},e._updatePan=function(){},e._updateStartTime=function(){},e._updateDuration=function(){},e._setDurationFromSource=function(){},e._calculateCurrentPosition=function(){},e._updatePosition=function(){},e._removeLooping=function(t){},e._addLooping=function(t){},e._pause=function(){},e._resume=function(){},e._handleStop=function(){},e._handleCleanUp=function(){},e._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(t,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var t=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._volume=1,this._loaderClass,this._soundInstanceClass,this._volume=1},e=t.prototype;t._capabilities=null,t.isSupported=function(){return!0},e.register=function(t){var e=this._loaders[t.src];return e&&!e.canceled?this._loaders[t.src]:(this._audioSources[t.src]=!0,this._soundInstances[t.src]=[],(e=new this._loaderClass(t)).on("complete",this._handlePreloadComplete,this),this._loaders[t.src]=e,e)},e.preload=function(t){t.on("error",this._handlePreloadError,this),t.load()},e.isPreloadStarted=function(t){return null!=this._audioSources[t]},e.isPreloadComplete=function(t){return!(null==this._audioSources[t]||1==this._audioSources[t])},e.removeSound=function(t){if(this._soundInstances[t]){for(var e=this._soundInstances[t].length;e--;)this._soundInstances[t][e].destroy();delete this._soundInstances[t],delete this._audioSources[t],this._loaders[t]&&this._loaders[t].destroy(),delete this._loaders[t]}},e.removeAllSounds=function(){for(var t in this._audioSources)this.removeSound(t)},e.create=function(t,e,i){this.isPreloadStarted(t)||this.preload(this.register(t));var n=new this._soundInstanceClass(t,e,i,this._audioSources[t]);return this._soundInstances[t].push(n),n},e.setVolume=function(t){return this._volume=t,this._updateVolume(),!0},e.getVolume=function(){return this._volume},e.setMute=function(t){return this._updateVolume(),!0},e.toString=function(){return"[AbstractPlugin]"},e._handlePreloadComplete=function(t){var e=t.target.getItem().src;this._audioSources[e]=t.result;for(var i=0,n=this._soundInstances[e].length;i<n;i++)this._soundInstances[e][i].setPlaybackResource(this._audioSources[e])},e._handlePreloadError=function(t){},e._updateVolume=function(){},createjs.AbstractPlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!0,createjs.AbstractLoader.SOUND)}var e=createjs.extend(t,createjs.AbstractLoader);t.context=null,e.toString=function(){return"[WebAudioLoader]"},e._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},e._sendComplete=function(e){t.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._sendError,this))},e._handleAudioDecoded=function(t){this._result=t,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.gainNode=i.context.createGain(),this.panNode=i.context.createPanner(),this.panNode.panningModel=i._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i.context=null,i._scratchBuffer=null,i.destinationNode=null,i._panningModel="equalpower",e.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},e.toString=function(){return"[WebAudioSoundInstance]"},e._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},e._removeLooping=function(t){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},e._addLooping=function(t){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},e._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},e._cleanUpAudioNode=function(t){if(t){t.stop(0),t.disconnect(0);try{t.buffer=i._scratchBuffer}catch(t){}t=null}return t},e._handleSoundReady=function(t){this.gainNode.connect(i.destinationNode);var e=.001*this._duration,n=.001*this._position;n>e&&(n=e),this.sourceNode=this._createAndPlayAudioNode(i.context.currentTime-e,n),this._playbackStartTime=this.sourceNode.startTime-n,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(e-n)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},e._createAndPlayAudioNode=function(t,e){var n=i.context.createBufferSource();n.buffer=this.playbackResource,n.connect(this.panNode);var r=.001*this._duration;return e>r&&(e=r-.001),n.startTime=t+r,n.start(n.startTime,e+.001*this._startTime,r-e),n},e._pause=function(){this._position=1e3*(i.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},e._resume=function(){this._handleSoundReady()},e._updateVolume=function(){var t=this._muted?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},e._calculateCurrentPosition=function(){return 1e3*(i.context.currentTime-this._playbackStartTime)},e._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},e._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},e._updateDuration=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._pause(),this._resume())},createjs.WebAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this._panningModel=i._panningModel,this.context=i.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=i._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._capabilities=null,i._panningModel="equalpower",i.context=null,i._scratchBuffer=null,i._unlocked=!1,i.isSupported=function(){var t=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return!("file:"==location.protocol&&!t&&!this._isFileXHRSupported())&&(i._generateCapabilities(),null!=i.context)},i.playEmptySound=function(){if(null!=i.context){var t=i.context.createBufferSource();t.buffer=i._scratchBuffer,t.connect(i.context.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()}},i._isFileXHRSupported=function(){var t=!0,e=new XMLHttpRequest;try{e.open("GET","WebAudioPluginTest.fail",!1)}catch(e){return t=!1}e.onerror=function(){t=!1},e.onload=function(){t=404==this.status||200==this.status||0==this.status&&""!=this.response};try{e.send()}catch(e){t=!1}return t},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;if(null==i.context){if(window.AudioContext)i.context=new AudioContext;else{if(!window.webkitAudioContext)return null;i.context=new webkitAudioContext}document.addEventListener("click",function(){"suspended"===i.context.state&&i.context.resume()})}null==i._scratchBuffer&&(i._scratchBuffer=i.context.createBuffer(1,1,22050)),i._compatibilitySetUp(),"ontouchstart"in window&&"running"!=i.context.state&&(i._unlock(),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i._capabilities={panning:!0,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var o=e[r],a=n[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}i.context.destination.numberOfChannels<2&&(i._capabilities.panning=!1)}},i._compatibilitySetUp=function(){if(i._panningModel="equalpower",!i.context.createGain){i.context.createGain=i.context.createGainNode;var t=i.context.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff,i._panningModel=0}},i._unlock=function(){"suspended"===i.context.state&&i.context.resume(),i._unlocked||(i.playEmptySound(),"running"==i.context.state&&(document.removeEventListener("mousedown",i._unlock,!0),document.removeEventListener("touchend",i._unlock,!0),document.removeEventListener("touchstart",i._unlock,!0),i._unlocked=!0))},e.toString=function(){return"[WebAudioPlugin]"},e._addPropsToClasses=function(){var t=this._soundInstanceClass;t.context=this.context,t._scratchBuffer=i._scratchBuffer,t.destinationNode=this.gainNode,t._panningModel=this._panningModel,this._loaderClass.context=this.context},e._updateVolume=function(){var t=createjs.Sound._masterMute?0:this._volume;t!=this.gainNode.gain.value&&(this.gainNode.gain.value=t)},createjs.WebAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"HTMLAudioTagPool cannot be instantiated"}function e(t){this._tags=[]}var i=t;i._tags={},i._tagPool=new e,i._tagUsed={},i.get=function(t){var e=i._tags[t];return null==e?(e=i._tags[t]=i._tagPool.get()).src=t:i._tagUsed[t]?(e=i._tagPool.get()).src=t:i._tagUsed[t]=!0,e},i.set=function(t,e){e==i._tags[t]?i._tagUsed[t]=!1:i._tagPool.set(e)},i.remove=function(t){var e=i._tags[t];return null!=e&&(i._tagPool.set(e),delete i._tags[t],delete i._tagUsed[t],!0)},i.getDuration=function(t){var e=i._tags[t];return null!=e&&e.duration?1e3*e.duration:0},createjs.HTMLAudioTagPool=t;var n=e.prototype;n.constructor=e,n.get=function(){var t;return null==(t=0==this._tags.length?this._createTag():this._tags.pop()).parentNode&&document.body.appendChild(t),t},n.set=function(t){-1==createjs.indexOf(this._tags,t)&&(this._tags.src=null,this._tags.push(t))},n.toString=function(){return"[TagPool]"},n._createTag=function(){var t=document.createElement("audio");return t.autoplay=!1,t.preload="none",t}}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i,n){this.AbstractSoundInstance_constructor(t,e,i,n),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),i?this._audioSpriteStopTime=.001*(e+i):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var e=createjs.extend(t,createjs.AbstractSoundInstance);e.setMasterVolume=function(t){this._updateVolume()},e.setMasterMute=function(t){this._updateVolume()},e.toString=function(){return"[HTMLAudioSoundInstance]"},e._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},e._handleCleanUp=function(){var t=this._playbackResource;if(null!=t){t.pause(),t.loop=!1,t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),t.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{t.currentTime=this._startTime}catch(t){}createjs.HTMLAudioTagPool.set(this.src,t),this._playbackResource=null}},e._beginPlaying=function(t){return this._playbackResource=createjs.HTMLAudioTagPool.get(this.src),this.AbstractSoundInstance__beginPlaying(t)},e._handleSoundReady=function(t){if(4!==this._playbackResource.readyState){var e=this._playbackResource;return e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),e.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),e.preload="auto",void e.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},e._handleTagReady=function(t){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},e._pause=function(){this._playbackResource.pause()},e._resume=function(){this._playbackResource.play()},e._updateVolume=function(){if(null!=this._playbackResource){var t=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;t!=this._playbackResource.volume&&(this._playbackResource.volume=t)}},e._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},e._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(t){this._handleSetPositionSeek(null)}},e._handleSetPositionSeek=function(t){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._handleAudioSpriteLoop=function(t){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},e._handleLoop=function(t){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},e._updateStartTime=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._updateDuration=function(){this._audioSpriteStopTime=.001*(this._startTime+this._duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},e._setDurationFromSource=function(){this._duration=createjs.HTMLAudioTagPool.getDuration(this.src),this._playbackResource=null},createjs.HTMLAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=i._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i.MAX_INSTANCES=30,i._AUDIO_READY="canplaythrough",i._AUDIO_ENDED="ended",i._AUDIO_SEEKED="seeked",i._AUDIO_STALLED="stalled",i._TIME_UPDATE="timeupdate",i._capabilities=null,i.isSupported=function(){return i._generateCapabilities(),null!=i._capabilities},i._generateCapabilities=function(){if(null==i._capabilities){var t=document.createElement("audio");if(null==t.canPlayType)return null;i._capabilities={panning:!1,volume:!0,tracks:-1};for(var e=createjs.Sound.SUPPORTED_EXTENSIONS,n=createjs.Sound.EXTENSION_MAP,r=0,s=e.length;r<s;r++){var o=e[r],a=n[o]||o;i._capabilities[o]="no"!=t.canPlayType("audio/"+o)&&""!=t.canPlayType("audio/"+o)||"no"!=t.canPlayType("audio/"+a)&&""!=t.canPlayType("audio/"+a)}}},e.register=function(t){var e=createjs.HTMLAudioTagPool.get(t.src),i=this.AbstractPlugin_register(t);return i.setTag(e),i},e.removeSound=function(t){this.AbstractPlugin_removeSound(t),createjs.HTMLAudioTagPool.remove(t)},e.create=function(t,e,i){var n=this.AbstractPlugin_create(t,e,i);return n.setPlaybackResource(null),n},e.toString=function(){return"[HTMLAudioPlugin]"},e.setVolume=e.getVolume=e.setMute=null,createjs.HTMLAudioPlugin=createjs.promote(t,"AbstractPlugin")}();var swfobject=function(){function t(){if(!B){try{var t=O.getElementsByTagName("body")[0].appendChild(p("span"));t.parentNode.removeChild(t)}catch(t){return}B=!0;for(var e=D.length,i=0;i<e;i++)D[i]()}}function e(t){B?t():D[D.length]=t}function i(t){if(typeof I.addEventListener!=E)I.addEventListener("load",t,!1);else if(typeof O.addEventListener!=E)O.addEventListener("load",t,!1);else if(typeof I.attachEvent!=E)!function(t,e,i){t.attachEvent(e,i),N[N.length]=[t,e,i]}(I,"onload",t);else if("function"==typeof I.onload){var e=I.onload;I.onload=function(){e(),t()}}else I.onload=t}function n(){var t=k.length;if(t>0)for(var e=0;e<t;e++){var i=k[e].id,n=k[e].callbackFn,h={success:!1,id:i};if(X.pv[0]>0){var l=d(i);if(l)if(!f(k[e].swfVersion)||X.wk&&X.wk<312)if(k[e].expressInstall&&s()){var u={};u.data=k[e].expressInstall,u.width=l.getAttribute("width")||"0",u.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(u.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(u.align=l.getAttribute("align"));for(var c={},p=l.getElementsByTagName("param"),g=p.length,m=0;m<g;m++)"movie"!=p[m].getAttribute("name").toLowerCase()&&(c[p[m].getAttribute("name")]=p[m].getAttribute("value"));o(u,c,i,n)}else a(l),n&&n(h);else v(i,!0),n&&(h.success=!0,h.ref=r(i),n(h))}else if(v(i,!0),n){var y=r(i);y&&typeof y.SetVariable!=E&&(h.success=!0,h.ref=y),n(h)}}}function r(t){var e=null,i=d(t);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=E)e=i;else{var n=i.getElementsByTagName(S)[0];n&&(e=n)}return e}function s(){return!U&&f("6.0.65")&&(X.win||X.mac)&&!(X.wk&&X.wk<312)}function o(t,e,i,n){U=!0,b=n||null,w={success:!1,id:i};var r=d(i);if(r){"OBJECT"==r.nodeName?(y=h(r),_=null):(y=r,_=i),t.id=M,(typeof t.width==E||!/%$/.test(t.width)&&parseInt(t.width,10)<310)&&(t.width="310"),(typeof t.height==E||!/%$/.test(t.height)&&parseInt(t.height,10)<137)&&(t.height="137"),O.title=O.title.slice(0,47)+" - Flash Player Installation";var s=X.ie&&X.win?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+O.title;if(typeof e.flashvars!=E?e.flashvars+="&"+o:e.flashvars=o,X.ie&&X.win&&4!=r.readyState){var a=p("div");i+="SWFObjectNew",a.setAttribute("id",i),r.parentNode.insertBefore(a,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}l(t,e,i)}}function a(t){if(X.ie&&X.win&&4!=t.readyState){var e=p("div");t.parentNode.insertBefore(e,t),e.parentNode.replaceChild(h(t),e),t.style.display="none",function(){4==t.readyState?t.parentNode.removeChild(t):setTimeout(arguments.callee,10)}()}else t.parentNode.replaceChild(h(t),t)}function h(t){var e=p("div");if(X.win&&X.ie)e.innerHTML=t.innerHTML;else{var i=t.getElementsByTagName(S)[0];if(i){var n=i.childNodes;if(n)for(var r=n.length,s=0;s<r;s++)1==n[s].nodeType&&"PARAM"==n[s].nodeName||8==n[s].nodeType||e.appendChild(n[s].cloneNode(!0))}}return e}function l(t,e,i){var n,r=d(i);if(X.wk&&X.wk<312)return n;if(r)if(typeof t.id==E&&(t.id=i),X.ie&&X.win){var s="";for(var o in t)t[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?e.movie=t[o]:"styleclass"==o.toLowerCase()?s+=' class="'+t[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+t[o]+'"'));var a="";for(var h in e)e[h]!=Object.prototype[h]&&(a+='<param name="'+h+'" value="'+e[h]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+a+"</object>",j[j.length]=t.id,n=d(t.id)}else{var l=p(S);for(var c in l.setAttribute("type",P),t)t[c]!=Object.prototype[c]&&("styleclass"==c.toLowerCase()?l.setAttribute("class",t[c]):"classid"!=c.toLowerCase()&&l.setAttribute(c,t[c]));for(var f in e)e[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&u(l,f,e[f]);r.parentNode.replaceChild(l,r),n=l}return n}function u(t,e,i){var n=p("param");n.setAttribute("name",e),n.setAttribute("value",i),t.appendChild(n)}function c(t){var e=d(t);e&&"OBJECT"==e.nodeName&&(X.ie&&X.win?(e.style.display="none",function(){4==e.readyState?function(t){var e=d(t);if(e){for(var i in e)"function"==typeof e[i]&&(e[i]=null);e.parentNode.removeChild(e)}}(t):setTimeout(arguments.callee,10)}()):e.parentNode.removeChild(e))}function d(t){var e=null;try{e=O.getElementById(t)}catch(t){}return e}function p(t){return O.createElement(t)}function f(t){var e=X.pv,i=t.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,e[0]>i[0]||e[0]==i[0]&&e[1]>i[1]||e[0]==i[0]&&e[1]==i[1]&&e[2]>=i[2]}function g(t,e,i,n){if(!X.ie||!X.mac){var r=O.getElementsByTagName("head")[0];if(r){var s=i&&"string"==typeof i?i:"screen";if(n&&(x=null,T=null),!x||T!=s){var o=p("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),x=r.appendChild(o),X.ie&&X.win&&typeof O.styleSheets!=E&&O.styleSheets.length>0&&(x=O.styleSheets[O.styleSheets.length-1]),T=s}X.ie&&X.win?x&&typeof x.addRule==S&&x.addRule(t,e):x&&typeof O.createTextNode!=E&&x.appendChild(O.createTextNode(t+" {"+e+"}"))}}}function v(t,e){if(F){var i=e?"visible":"hidden";B&&d(t)?d(t).style.visibility=i:g("#"+t,"visibility:"+i)}}function m(t){return null!=/[\\\"<>\.;]/.exec(t)&&typeof encodeURIComponent!=E?encodeURIComponent(t):t}var y,_,b,w,x,T,E="undefined",S="object",A="Shockwave Flash",P="application/x-shockwave-flash",M="SWFObjectExprInst",C="onreadystatechange",I=window,O=document,R=navigator,L=!1,D=[function(){L?function(){var t=O.getElementsByTagName("body")[0],e=p(S);e.setAttribute("type",P);var i=t.appendChild(e);if(i){var r=0;!function(){if(typeof i.GetVariable!=E){var s=i.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),X.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(r<10)return r++,void setTimeout(arguments.callee,10);t.removeChild(e),i=null,n()}()}else n()}():n()}],k=[],j=[],N=[],B=!1,U=!1,F=!0,X=function(){var t=typeof O.getElementById!=E&&typeof O.getElementsByTagName!=E&&typeof O.createElement!=E,e=R.userAgent.toLowerCase(),i=R.platform.toLowerCase(),n=/win/.test(i||e),r=/mac/.test(i||e),s=!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,a=[0,0,0],h=null;if(typeof R.plugins!=E&&typeof R.plugins[A]==S)!(h=R.plugins[A].description)||typeof R.mimeTypes!=E&&R.mimeTypes[P]&&!R.mimeTypes[P].enabledPlugin||(L=!0,o=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof I.ActiveXObject!=E)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&((h=l.GetVariable("$version"))&&(o=!0,h=h.split(" ")[1].split(","),a=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]))}catch(t){}return{w3:t,pv:a,wk:s,ie:o,win:n,mac:r}}();return X.w3&&((typeof O.readyState!=E&&"complete"==O.readyState||typeof O.readyState==E&&(O.getElementsByTagName("body")[0]||O.body))&&t(),B||(typeof O.addEventListener!=E&&O.addEventListener("DOMContentLoaded",t,!1),X.ie&&X.win&&(O.attachEvent(C,function(){"complete"==O.readyState&&(O.detachEvent(C,arguments.callee),t())}),I==top&&function(){if(!B){try{O.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}t()}}()),X.wk&&function(){B||(/loaded|complete/.test(O.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),X.ie&&X.win&&window.attachEvent("onunload",function(){for(var t=N.length,e=0;e<t;e++)N[e][0].detachEvent(N[e][1],N[e][2]);for(var i=j.length,n=0;n<i;n++)c(j[n]);for(var r in X)X[r]=null;for(var s in X=null,swfobject)swfobject[s]=null;swfobject=null}),{registerObject:function(t,e,i,n){if(X.w3&&t&&e){var r={};r.id=t,r.swfVersion=e,r.expressInstall=i,r.callbackFn=n,k[k.length]=r,v(t,!1)}else n&&n({success:!1,id:t})},getObjectById:function(t){if(X.w3)return r(t)},embedSWF:function(t,i,n,r,a,h,u,c,d,p){var g={success:!1,id:i};X.w3&&!(X.wk&&X.wk<312)&&t&&i&&n&&r&&a?(v(i,!1),e(function(){n+="",r+="";var e={};if(d&&typeof d===S)for(var m in d)e[m]=d[m];e.data=t,e.width=n,e.height=r;var y={};if(c&&typeof c===S)for(var _ in c)y[_]=c[_];if(u&&typeof u===S)for(var b in u)typeof y.flashvars!=E?y.flashvars+="&"+b+"="+u[b]:y.flashvars=b+"="+u[b];if(f(a)){var w=l(e,y,i);e.id==i&&v(i,!0),g.success=!0,g.ref=w}else{if(h&&s())return e.data=h,void o(e,y,i,p);v(i,!0)}p&&p(g)})):p&&p(g)},switchOffAutoHideShow:function(){F=!1},ua:X,getFlashPlayerVersion:function(){return{major:X.pv[0],minor:X.pv[1],release:X.pv[2]}},hasFlashPlayerVersion:f,createSWF:function(t,e,i){return X.w3?l(t,e,i):void 0},showExpressInstall:function(t,e,i,n){X.w3&&s()&&o(t,e,i,n)},removeSWF:function(t){X.w3&&c(t)},createCSS:function(t,e,i,n){X.w3&&g(t,e,i,n)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(t){var e=O.location.search||O.location.hash;if(e){if(/\?/.test(e)&&(e=e.split("?")[1]),null==t)return m(e);for(var i=e.split("&"),n=0;n<i.length;n++)if(i[n].substring(0,i[n].indexOf("="))==t)return m(i[n].substring(i[n].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var t=d(M);t&&y&&(t.parentNode.replaceChild(y,t),_&&(v(_,!0),X.ie&&X.win&&(y.style.display="block")),b&&b(w)),U=!1}}}}();this.createjs=this.createjs||{},function(){"use strict";function t(t){this.AbstractLoader_constructor(t,!1,createjs.AbstractLoader.SOUND),this.flashId=null}var e=createjs.extend(t,createjs.AbstractLoader),i=t;i._flash=null,i._preloadInstances=[],i.setFlash=function(t){i._flash=t;for(var e=i._preloadInstances.length;e--;){i._preloadInstances.pop().load()}},e.load=function(){if(null!=i._flash){this.flashId=i._flash.preload(this._item.src);var t=new createjs.Event(createjs.FlashAudioPlugin._REG_FLASHID);this.dispatchEvent(t)}else i._preloadInstances.push(this)},e.handleProgress=function(t,e){this._sendProgress(t/e)},e.handleComplete=function(){this._result=this._item.src,this._sendComplete()},e.handleError=function(t){this._handleError(t)},e.destroy=function(){var t=new createjs.Event(createjs.FlashAudioPlugin._UNREG_FLASHID);this.dispatchEvent(t),this.AbstractLoader_destroy()},e.toString=function(){return"[FlashAudioLoader]"},createjs.FlashAudioLoader=createjs.promote(t,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,n,r){this.AbstractSoundInstance_constructor(t,e,n,r),this.flashId=null,null==i._flash&&i._instances.push(this)}var e=createjs.extend(t,createjs.AbstractSoundInstance),i=t;i._flash=null,i._instances=[],i.setFlash=function(t){i._flash=t;for(var e=i._instances.length;e--;){i._instances.pop()._setDurationFromSource()}},e.setLoop=function(t){null!=this.flashId&&i._flash.setLoop(this.flashId,t),this._loop=t},e.toString=function(){return"[FlashAudioSoundInstance]"},e._updateVolume=function(){null!=this.flashId&&i._flash.setVolume(this.flashId,this._volume)},e._updatePan=function(){null!=this.flashId&&i._flash.setPan(this.flashId,this._pan)},e._setDurationFromSource=function(){this._duration=i._flash.getDurationBySrc(this.src)},e._interrupt=function(){null!=this.flashId&&(i._flash.interrupt(this.flashId),this.AbstractSoundInstance__interrupt())},e._handleCleanUp=function(){i._flash.stopSound(this.flashId),this._sendEvent(createjs.FlashAudioPlugin._UNREG_FLASHID),this.flashId=null},e._beginPlaying=function(t){return null!=i._flash&&(this.setPosition(t.offset),this.setLoop(t.loop),this.setVolume(t.volume),this.setPan(t.pan),null!=t.startTime&&(this.setStartTime(t.startTime),this.setDuration(t.duration)),this._paused=!1,this.flashId=i._flash.playSound(this.src,this._position,this._loop,this._volume,this._pan,this._startTime,this._duration),null==this.flashId?(this._playFailed(),!1):(this._muted&&this.setMute(!0),this._sendEvent(createjs.FlashAudioPlugin._REG_FLASHID),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0))},e._pause=function(){null!=this.flashId&&(this._position=this._calculateCurrentPosition(),i._flash.pauseSound(this.flashId))},e._resume=function(){null!=this.flashId&&i._flash.resumeSound(this.flashId)},e._handleStop=function(){null!=this.flashId&&i._flash.stopSound(this.flashId)},e._updateVolume=function(){var t=this._muted?0:this._volume;i._flash.setVolume(this.flashId,t)},e._calculateCurrentPosition=function(){return i._flash.getPosition(this.flashId)},e._updatePosition=function(){null!=this.flashId&&i._flash.setPosition(this.flashId,this._position)},e.handleSoundFinished=function(){this._loop=0,this._handleSoundComplete()},e.handleSoundLoop=function(){this._loop--,this._sendEvent("loop")},createjs.FlashAudioSoundInstance=createjs.promote(t,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this.AbstractPlugin_constructor(),this.showOutput=!1,this._CONTAINER_ID="flashAudioContainer",this._WRAPPER_ID="SoundJSFlashContainer",this._container=null,this._flash=null,this.flashReady=!1,this._flashInstances={},this._flashPreloadInstances={},this._capabilities=i._capabilities,this._loaderClass=createjs.FlashAudioLoader,this._soundInstanceClass=createjs.FlashAudioSoundInstance;var t=this.wrapper=document.createElement("div");t.id=this._WRAPPER_ID,t.style.position="absolute",t.style.marginLeft="-1px",t.className=this._WRAPPER_ID,document.body.appendChild(t);var e=this._container=document.createElement("div");e.id=this._CONTAINER_ID,e.appendChild(document.createTextNode("SoundJS Flash Container")),t.appendChild(e);var n=i.swfPath;swfobject.embedSWF(n+"FlashAudioPlugin.swf",this._CONTAINER_ID,"1","1","9.0.0",null,null,{AllowScriptAccess:"always"},null,createjs.proxy(this._handleSWFReady,this))}var e=createjs.extend(t,createjs.AbstractPlugin),i=t;i._REG_FLASHID="registerflashid",i._UNREG_FLASHID="unregisterflashid",i._capabilities=null,i.swfPath="src/soundjs/flashaudio/",i.isSupported=function(){return!(createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry||createjs.BrowserDetect.isWindowsPhone)&&(i._generateCapabilities(),null!=swfobject&&swfobject.hasFlashPlayerVersion("9.0.0"))},i._generateCapabilities=function(){null==i._capabilities&&(i._capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!1,mp4:!1,aiff:!1,wma:!1,mid:!1})},e.register=function(t,e){var n=this.AbstractPlugin_register(t,e);return n.addEventListener(i._REG_FLASHID,createjs.proxy(this.registerPreloadInstance,this)),n.addEventListener(i._UNREG_FLASHID,createjs.proxy(this.unregisterPreloadInstance,this)),n},e.removeAllSounds=function(){this._flashInstances={},this._flashPreloadInstances={},this.AbstractPlugin_removeAllSounds()},e.create=function(t,e,n){var r=this.AbstractPlugin_create(t,e,n);return r.on(i._REG_FLASHID,this.registerSoundInstance,this),r.on(i._UNREG_FLASHID,this.unregisterSoundInstance,this),r},e.toString=function(){return"[FlashAudioPlugin]"},e._handleSWFReady=function(t){this._flash=t.ref},e._handleFlashReady=function(){this.flashReady=!0,this._loaderClass.setFlash(this._flash),this._soundInstanceClass.setFlash(this._flash),this._updateVolume()},e._updateVolume=function(){if(!this.flashReady)return!0;var t=createjs.Sound._masterMute?0:this._volume;return this._flash.setMasterVolume(t)},e.registerPreloadInstance=function(t){this._flashPreloadInstances[t.target.flashId]=t.target},e.unregisterPreloadInstance=function(t){delete this._flashPreloadInstances[t.target.flashId]},e.registerSoundInstance=function(t){this._flashInstances[t.target.flashId]=t.target},e.unregisterSoundInstance=function(t){delete this._flashInstances[t.target.flashId]},e.flashLog=function(t){try{this.showOutput&&console.log(t)}catch(t){}},e.handleSoundEvent=function(t,e){var i=this._flashInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handlePreloadEvent=function(t,e){var i=this._flashPreloadInstances[t];if(null!=i){for(var n=[],r=2,s=arguments.length;r<s;r++)n.push(arguments[r]);try{0==n.length?i[e]():i[e].apply(i,n)}catch(t){}}},e.handleEvent=function(t){switch(t){case"ready":this._handleFlashReady()}},e.handleErrorEvent=function(t){},createjs.FlashAudioPlugin=createjs.promote(t,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){var t=createjs.FlashAudioPlugin=createjs.FlashAudioPlugin||{};t.version="0.6.5",t.buildDate="Fri, 07 Apr 2017 15:14:47 GMT"}(),function(){"use strict";var t,e,i,n;"extend"in(n=window)||(n.extend=function(t,e){if(e){"string"==typeof e&&(e=n.include(e));var i=e.prototype;t.prototype=Object.create(i),Object.defineProperty(t.prototype,"__parent",{configurable:!0,writable:!0,value:i})}return Object.defineProperty(t.prototype,"constructor",{configurable:!0,writable:!0,value:t}),t.extend=function(e){return n.extend(e,t)},t.prototype}),function(t,e){if(!("include"in t)){t.include=function(e,i){var n=e.split("."),r=t,s="";i=void 0===i||!!i;for(var o=0,a=n.length;o<a;o++){if(!r[s=n[o]]){if(!i)return null;throw"Unable to include '"+e+"'"}r=r[s]}return r}}}(window),function(t,e){if(!("mixin"in t)){t.mixin=function(i,n){if("string"==typeof n&&(n=t.include(n)),!n.prototype)throw"no mixin prototype";var r=n.prototype;for(var s in r){var o=e.getOwnPropertyDescriptor(r,s);o?e.defineProperty(i,s,o):i[s]=r[s]}return n.apply(i,Array.prototype.slice.call(arguments,2)),i}}}(window,Object),function(t){if(!("namespace"in t)){t.namespace=function(e){for(var i=e.split("."),n=t,r="",s=0,o=i.length;s<o;s++)n[r=i[s]]=n[r]||{},n=n[r];return n}}}(window),function(t,e,i){t.prototype.shuffle||i.defineProperty(t.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,i,n=this.length;n;t=e.floor(e.random()*n),i=this[--n],this[n]=this[t],this[t]=i);return this}}),t.prototype.random||i.defineProperty(t.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[e.floor(e.random()*this.length)]}}),t.prototype.last||i.defineProperty(t.prototype,"last",{enumerable:!1,writable:!1,value:function(){return this[this.length-1]}}),t.prototype.append||i.defineProperty(t.prototype,"append",{enumerable:!1,writable:!1,value:function(){for(var e=arguments,i=0,n=e.length;i<n;++i){var r=e[i];if(t.isArray(r))for(var s=0,o=r.length;s<o;++s)this.push(r[s]);else this.push(r)}return this}})}(Array,Math,Object),function(t){t.randomInt=function(e,i){return void 0===i&&(i=e,e=0),t.floor(t.random()*(i-e+1))+e},t.randomFloat=function(e,i){return void 0===i&&(i=e,e=0),t.random()*(i-e)+e},t.dist=function(e,i,n,r){return t.sqrt(t.distSq(e,i,n,r))},t.distSq=function(t,e,i,n){return"number"==typeof t.x&&t.x==t.x&&(n=i,i=e,e=t.y,t=t.x),"number"==typeof i.x&&i.x==i.x&&(n=i.y,i=i.x),(t-i)*(t-i)+(e-n)*(e-n)},t.clamp=function(t,e,i){return void 0===i&&(i=e,e=0),t>i?i:t<e?e:t},t.roundDecimal=function(e,i){return t.round(e/i)*i}}(Math),function(t,e){t.prototype.toPaddedString||e.defineProperty(t.prototype,"toPaddedString",{enumerable:!1,writable:!1,value:function(t){t||(t=2);var e,i=this;i<0&&(i*=-1,e="-");for(var n=String(Math.floor(i));n.length<t;)n="0"+n;return e&&(n=e+n),n}})}(Number,Object),function(t,e,i){t.merge=function(e,i){for(var n in e&&"object"==typeof e||(e={}),i)if(i.hasOwnProperty(n)){var r=i[n];if("object"==typeof r&&t.isPlain(r)){e[n]=t.merge(e[n],r);continue}e[n]=r}for(var s=2,o=arguments.length;s<o;s++)t.merge(e,arguments[s]);return e},t.isPlain=function(t){var i,n=e.hasOwnProperty;if(!t||"object"!=typeof t||t.nodeType||t===window)return!1;try{if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}if(e.ownLast)for(i in t)return n.call(t,i);for(i in t);return void 0===i||n.call(t,i)},t.prototype.clone||t.defineProperty(t.prototype,"clone",{enumerable:!1,writable:!0,value:function(){var t={};for(var e in this)t[e]=this[e];return t}})}(Object,{}),function(){var t=include("createjs.RequestUtils",!1),e=include("createjs.AbstractLoader",!1);if(t){var i=t.getTypeByExtension;t.getTypeByExtension=function(t){if(t)switch(t.toLowerCase()){case"fnt":return e.XML}return i(t)}}}(),function(t,e){e.defineProperty(t.prototype,"format",{enumerable:!1,writable:!1,value:function(){if(arguments.length<1)return this;var t=Array.isArray(t)?t:Array.prototype.slice.call(arguments);return this.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(e,i,n){return n?i+t[parseInt(n)-1]:i+t.shift()}).replace(/%%s/g,"%s")}}),t.prototype.reverse||e.defineProperty(t.prototype,"reverse",{enumerable:!1,writable:!1,value:function(){for(var t="",e=this.length-1;e>=0;e--)t+=this[e];return t}})}(String,Object),function(){function t(){this.currentCallCount=0}var e={create:function(e,i){if(!e)return null;("number"!=typeof i||i<1)&&(i=2);var n=function(){++n.currentCallCount>=i&&e()};return n.currentCallCount=0,n.reset=t,n}};namespace("springroll").CombinedCallback=e}(),e=function(e,i,n,r,s){t||(t=include("springroll.Application")),"boolean"==typeof n&&(n={repeat:!!n,autoDestroy:void 0===r||!!r,useFrames:!!s}),n=Object.merge({repeat:!1,autoDestroy:!0,useFrames:!1},n||{}),this._callback=e,this._delay=i,this._timer=i,this._repeat=n.repeat,this._autoDestroy=n.autoDestroy,this._useFrames=n.useFrames,this._paused=!1,this._update=this._update.bind(this),t.instance.on("update",this._update)},(i=extend(e))._update=function(e){this._callback?(this._timer-=this._useFrames?1:e,this._timer<=0&&(this._callback(this),this._repeat?this._timer+=this._delay:this._autoDestroy?this.destroy():t.instance.off("update",this._update))):this.destroy()},i.restart=function(){if(this._callback){var e=t.instance;e.has("update",this._update)||e.on("update",this._update),this._timer=this._delay,this._paused=!1}},i.stop=function(){t.instance.off("update",this._update),this._paused=!1},Object.defineProperty(i,"paused",{get:function(){return this._paused},set:function(e){if(this._callback){var i=t.instance;this._paused&&!e?(this._paused=!1,i.has("update",this._update)||i.on("update",this._update)):e&&i.has("update",this._update)&&(this._paused=!0,i.off("update",this._update))}}}),i.destroy=function(){t.instance.off("update",this._update),this._callback=null},namespace("springroll").DelayedCall=e,function(){var t,e=function(e,i,n){void 0===t&&(t=include("springroll.Debug",!1)),this.name=e,this._value=i,this._toString=n||this.name};Object.defineProperty(e.prototype,"asInt",{get:function(){return this._value}}),e.prototype.toString=function(){return this._toString};var i=function(){var t=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);Object.defineProperty(this,"_byValue",{enumerable:!1,writable:!1,value:[]}),Object.defineProperty(this,"rawEnumValues",{enumerable:!1,writable:!1,value:t});for(var i,n,r,s=0,o=0,a=t.length;o<a;++o)"string"==typeof t[o]?r=t[o]:(r=t[o].name,n=t[o].value||s,s=n),this[r]||(this[(i="string"==typeof t[o]?new e(r,s,r):new e(r,n,t[o].toString||r)).name]=i,this._byValue[s]?Array.isArray(this._byValue[s])?this._byValue[s].push(i):this._byValue[s]=[this._byValue[s],i]:this._byValue[s]=i,s++);Object.defineProperty(this,"length",{enumerable:!1,writable:!1,value:t.length}),Object.defineProperty(this,"next",{enumerable:!1,writable:!1,value:function(t){var e=t.asInt+1;return e>=s?this.first:this.valueFromInt(e)}}),Object.defineProperty(this,"first",{enumerable:!1,writable:!1,value:this.valueFromInt(t[0].value||0)}),Object.defineProperty(this,"last",{enumerable:!1,writable:!1,value:this.valueFromInt(s-1)})},n=extend(i);Object.defineProperty(n,"valueFromInt",{enumerable:!1,writable:!1,value:function(t){var e=this._byValue[t];return e?Array.isArray(e)?e[0]:e:null}}),namespace("springroll").Enum=i}(),function(t){var e={},i=void 0!==window.Storage;if(i)try{localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST")}catch(t){i=!1}e.remove=function(t){i?(localStorage.removeItem(t),sessionStorage.removeItem(t)):e.write(t,"",-1)},e.write=function(t,e,n){var r;i?n?sessionStorage.setItem(t,JSON.stringify(e)):localStorage.setItem(t,JSON.stringify(e)):(r=n?-1!==n?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toGMTString(),document.cookie=t+"="+escape(JSON.stringify(e))+r+"; path=/")},e.read=function(t){if(i){var n=localStorage.getItem(t)||sessionStorage.getItem(t);return n?JSON.parse(n,e.reviver):null}var r,s,o=t+"=",a=document.cookie.split(";"),h=0;for(h=0,s=a.length;h<s;h++){for(r=a[h];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(o))return JSON.parse(unescape(r.substring(o.length,r.length)),e.reviver)}return null},e.reviver=function(t,e){if(e&&"string"==typeof e.__classname){var i=include(e.__classname,!1);if(i){var n=new i;if(n.fromJSON)return n.fromJSON(e),n}}return e},namespace("springroll").SavedData=e}(),function(t){var e=include("performance",!1),i=e&&(e.now||e.mozNow||e.msNow||e.oNow||e.webkitNow);i&&(e.now=i);var n={};n.now=i?function(){return e.now()}:Date.now,namespace("springroll").TimeUtils=n}(window),function(){var t=function(t){this.max=-1,this.options=[];var e=0;for(var i in t)e+=t[i],this.options.push({key:i,value:e}),this.max+=t[i]};extend(t).random=function(){for(var t=Math.randomInt(0,this.max),e=0,i=this.options,n=i.length;e<n;++e)if(t<i[e].value)return i[e].key;return null},namespace("springroll").WeightedRandom=t}(),function(){for(var t=["ms","moz","webkit","o"],e=t.length,i=0;i<e&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var n=include("springroll.TimeUtils"),r=0;window.requestAnimationFrame=function(t){var e=n.now(),i=Math.max(0,16-(e-r)),s=window.setTimeout(function(){t(e+i)},i);return r=e+i,s},window.cancelAnimationFrame=function(t){clearTimeout(t)}}window.requestAnimFrame=window.requestAnimationFrame}(),function(t){function e(t,e){return t._priority-e._priority}function i(t){if(null===t)return"null";var e=typeof t;return"object"===e||"function"===e?Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":e}var n=function(){this._listeners={},this._destroyed=!1},r=extend(n);Object.defineProperty(r,"destroyed",{enumerable:!0,get:function(){return this._destroyed}}),r.trigger=function(e){if(!this._destroyed&&this._listeners.hasOwnProperty(e)&&this._listeners[e]!==t){var i,n=this._listeners[e].slice();arguments.length>1&&(i=Array.prototype.slice.call(arguments,1));for(var r=n.length-1;r>=0;--r){var s=n[r];s._eventDispatcherOnce&&(delete s._eventDispatcherOnce,this.off(e,s)),s.apply(this,i)}}},r.once=function(t,e,i){return this.on(t,e,i,!0)},r.on=function(t,n,r,s){if(!this._destroyed){if("object"===i(t))for(var o in t)t.hasOwnProperty(o)&&this.on(o,t[o],r,s);else if("function"===i(n))for(var a,h=t.split(" "),l=null,u=0,c=h.length;u<c;u++)l=h[u],a=this._listeners.hasOwnProperty(l)?this._listeners[l]:this._listeners[l]=[],s&&(n._eventDispatcherOnce=!0),n._priority=parseInt(r)||0,-1===a.indexOf(n)&&(a.push(n),a.length>1&&a.sort(e));else if(Array.isArray(n))for(var d=0,p=n.length;d<p;d++)this.on(t,n[d],r,s);return this}},r.off=function(e,i){if(!this._destroyed){if(e===t)this._listeners={};else if(Array.isArray(i))for(var n=0,r=i.length;n<r;n++)this.off(e,i[n]);else for(var s,o,a=e.split(" "),h=null,l=0,u=a.length;l<u;l++)h=a[l],this._listeners.hasOwnProperty(h)&&(s=this._listeners[h],i===t?s.length=0:-1!==(o=s.indexOf(i))&&s.splice(o,1));return this}},r.has=function(t,e){if(!t||!this._listeners.hasOwnProperty(t))return!1;var i=this._listeners[t];return!!i&&(e?i.indexOf(e)>=0:i.length>0)},r.destroy=function(){this._destroyed=!0,this._listeners=null},namespace("springroll").EventDispatcher=n}(),function(t){var e=include("springroll.EventDispatcher"),i=function(){e.call(this),this._properties={}},n=e.prototype,r=e.extend(i);r.add=function(e,i,n){var r=this._properties,o=r[e];if(o!==t)return o.setValue(i),o.setReadOnly(n===t?o.readOnly:n),this;if(this.hasOwnProperty(e))throw"Object already has property "+e;return r[e]=new s(e,i,n),Object.defineProperty(this,e,{get:function(t){var e=this._properties[t];if(e.responder){var i=e.responder();return e.value=i,i}return e.value}.bind(this,e),set:function(t,e){var i=this._properties[t];if(i.readOnly)throw"Property '"+t+"' is read-only";var n=i.value;i.value=e,n!=e&&this.trigger(t,e)}.bind(this,e)}),this},r.respond=function(e,i){var n=this._properties[e];if(n===t)throw"Property "+e+" does not exist";return n.responder=i,n.value=i(),this},r.destroy=function(){var t;for(var e in this._properties)(t=this._properties[e]).value=null,t.responder=null;this._properties=null,n.destroy.call(this)};var s=function(t,e,i){this.name=t,this.setValue(e),this.setReadOnly(i),this.responder=null};s.prototype.setValue=function(e){this.value=e===t?null:e},s.prototype.setReadOnly=function(e){this.readOnly=e!==t&&!!e},namespace("springroll").PropertyDispatcher=i}(),function(t){var e,i=include("springroll.PropertyDispatcher"),n=function(n,r){e===t&&(e=include("springroll.Debug",!1)),i.call(this),this._options=r||{},this._app=n},r=i.extend(n);r.init=function(){var t=this._options;for(var e in this._app,(t=Object.merge({},t)).useQueryString&&Object.merge(t,s()),t)this.add(e,t[e]);var i=this._properties;for(var n in i)this.trigger(n,i[n].value)};var s=function(){var e={},i=window.location.search;if(!i)return e;for(var n,r=i.substr(i.indexOf("?")+1),s=r.indexOf("#"),o=(r=s<0?r:r.substring(0,s)).split("&"),a=0,h=o.length;a<h;a++){var l=(n=o[a].split("="))[1];"true"===l||l===t?l=!0:"false"===l&&(l=!1),e[n[0]]=l}return e};r.asDOMElement=function(t){var e=this._properties[t];e&&e.value&&"string"==typeof e.value&&(e.value=document.getElementById(e.value))},r.override=function(e,i){var n=this._properties[e];if(n===t)throw"Invalid override "+e;return n.setValue(i),this},namespace("springroll").ApplicationOptions=n}(),function(){var t;namespace("springroll").ApplicationPlugin=function(e){t||(t=include("springroll.Application")),this.priority=e||0,this.setup=function(){},this.preload=null,this.teardown=function(){},t._plugins.push(this),t._plugins.sort(function(t,e){return e.priority-t.priority})}}(),function(t){var e=include("springroll.TimeUtils"),i=include("springroll.EventDispatcher"),n=include("springroll.ApplicationOptions"),r=include("springroll.DelayedCall"),s=function(t,e){if(m)throw"Only one Application can be opened at a time";m=this,i.call(this),this.options=new n(this,t),this.display=null,this.init=e||null,this.pluginLoad=null,v={},g=[],l=this._tick.bind(this),s._plugins.forEach(function(t){t.setup.call(m)}),this.options.init(),this.name=this.options.name,setTimeout(this._preInit.bind(this),0)};s.version="1.1.0";var o=i.prototype,a=i.extend(s);s._plugins=[];var h=0,l=null,u=!1,c=!0,d=-1,p=!1,f=0,g=null,v=null,m=null;Object.defineProperty(s,"instance",{get:function(){return m}}),a._preInit=function(){if(!this.destroyed){var t=this.options;p=t.raf,t.on("raf",function(t){p=t}),t.on("fps",function(t){"number"==typeof t&&(f=1e3/t|0)}),t.canvasId&&t.display&&this.addDisplay(t.canvasId,t.display,t.displayOptions);var e=[];s._plugins.forEach(function(t){t.preload&&e.push(t.preload.bind(m))}),this.pluginLoad=this.load(e,{complete:this._doInit.bind(this),progress:y.bind(this),autoStart:!1,startAll:!1}),this.pluginLoad.start()}};var y=function(t){this.trigger("pluginProgress",t)};a._doInit=function(){this.destroyed||(this.pluginLoad=null,this.trigger("beforeInit"),this.paused=!1,this.trigger("init"),this.init&&this.init.call(this),this.trigger("afterInit"))},Object.defineProperty(a,"enabled",{set:function(t){c=t,g.forEach(function(e){e.enabled=t})},get:function(){return c}}),Object.defineProperty(a,"paused",{get:function(){return u},set:function(t){u=!!t,this.internalPaused(u)}}),a.internalPaused=function(t){this.trigger("pause",t),this.trigger(t?"paused":"resumed",t),t?-1!=d&&(p?cancelAnimationFrame(d):clearTimeout(d),d=-1):-1==d&&l&&(h=e.now(),d=p?requestAnimFrame(l):_(l))};var _=function(t,e){var i=f;return e&&(i=Math.max(0,f-e)),setTimeout(t,i)};a.addDisplay=function(t,e,i){if(v[t])throw"Display exists with id '"+t+"'";var n=new e(t,i);return v[t]=n,g.push(n),n.enabled=c,this.display||(this.display=n),this.trigger("displayAdded",n),n},Object.defineProperty(a,"displays",{get:function(){return g}}),a.getDisplay=function(t){return v[t]},a.removeDisplay=function(t){var e=v[t];e&&(g.splice(g.indexOf(e),1),e.destroy(),delete v[t],this.trigger("displayRemoved",t))},a._tick=function(){if(u)d=-1;else{var t=e.now(),i=t-h;if(h=t,this.trigger("update",i),g)for(var n=0;n<g.length;n++)g[n].render(i);l&&(d=p?requestAnimFrame(l):_(l,e.now()-h))}},a.setTimeout=function(t,e,i,n){return new r(t,e,!1,n,i)},a.setInterval=function(t,e,i){return new r(t,e,!0,!1,i)},a.destroy=function(){this.destroyed||(this.paused=!0,this.trigger("destroy"),s._plugins.slice().reverse().forEach(function(t){t.teardown.call(m)}),g.forEach(function(t){t.destroy()}),g=null,v=null,m=l=null,this.display=null,this.options.destroy(),this.options=null,o.destroy.call(this))},a.toString=function(){return"[Application name='"+this.name+"']"},namespace("springroll").Application=s}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("createjs.Tween",!1),i=include("createjs.Ticker",!1);new t(120).setup=function(){var t=this.options;t.add("raf",!0,!0),t.add("fps",60,!0),t.add("useQueryString",!1,!0),t.add("canvasId",null,!0),t.add("display",null,!0),t.add("displayOptions",null,!0);var n=this;t.add("updateTween",!0,!0).on("updateTween",function(t){e&&(i&&i.setPaused(!!t),n.off("update",e.tick),t&&n.on("update",e.tick))}),t.add("name","",!0)}}(),function(t,e,i){var n=function(t,n){this._onFocus=t,this._onBlur=n,this._enabled=!1,(s||e.onfocusin!==i)&&(this._onToggle=function(){e.hidden||e.webkitHidden||e.msHidden||e.mozHidden?this._onBlur():this._onFocus()}.bind(this),this.enabled=!0)},r=extend(n),s=null;e.hidden!==i?s="visibilitychange":e.mozHidden!==i?s="mozvisibilitychange":e.msHidden!==i?s="msvisibilitychange":e.webkitHidden!==i&&(s="webkitvisibilitychange");var o=!s&&e.onfocusin!==i;Object.defineProperty(r,"enabled",{get:function(){return this._enabled},set:function(i){i=!!i,this._enabled!=i&&(this._enabled=i,t.removeEventListener("pagehide",this._onBlur),t.removeEventListener("pageshow",this._onFocus),t.removeEventListener("blur",this._onBlur),t.removeEventListener("focus",this._onFocus),t.removeEventListener("visibilitychange",this._onToggle),e.removeEventListener(s,this._onToggle,!1),o&&(e.removeEventListener("focusin",this._onFocus),e.removeEventListener("focusout",this._onBlur)),i&&(e.addEventListener(s,this._onToggle,!1),t.addEventListener("pagehide",this._onBlur),t.addEventListener("pageshow",this._onFocus),t.addEventListener("blur",this._onBlur),t.addEventListener("focus",this._onFocus),t.addEventListener("visibilitychange",this._onToggle,!1),o&&(e.addEventListener("focusin",this._onFocus),e.addEventListener("focusout",this._onBlur))))}}),r.destroy=function(){s&&this._onToggle&&(this.enabled=!1,this._onToggle=null,this._onFocus=null,this._onBlur=null)},namespace("springroll").PageVisibility=n}(window,document),function(){var t=new(include("springroll.ApplicationPlugin"));t.setup=function(){var t=include("springroll.PageVisibility"),n=this._visibility=new t(i.bind(this),e.bind(this));this.options.add("autoPause",!0).on("autoPause",function(t){n.enabled=t}).respond("autoPause",function(){return n.enabled}),Object.defineProperty(this,"autoPaused",{set:function(t){this.paused||this.internalPaused(t)}})};var e=function(){this.autoPaused=!0},i=function(){this.autoPaused=!1};t.teardown=function(){this._visibility&&this._visibility.destroy(),this._visibility=null}}(),function(){var t=function(){this._filters=[]},e=extend(t);e.add=function(t,e){if(!t||"string"!=typeof t&&t instanceof RegExp==0)throw"invalide replace value";if("string"!=typeof e)throw"invalid replacement value";if(this._filters){for(var i=this._filters.length-1;i>=0;i--)if(t.toString()==this._filters[i].replace.toString())throw"Filter already exists.";this._filters.push({replace:t,replacement:e})}},e.filter=function(t){if(!this._filters)return t;for(var e=this._filters.length-1;e>=0;e--){var i=this._filters[e].replace,n=this._filters[e].replacement;t=t.replace(i,n)}return t},e.destroy=function(){this._filters=null},namespace("springroll").StringFilters=t}(),function(){var t=new(include("springroll.ApplicationPlugin"))(110);t.setup=function(){var t=include("springroll.StringFilters");this.filters=new t},t.teardown=function(){this.filters&&this.filters.destroy(),this.filters=null}}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("devicePixelRatio",!1),i=new t(100),n=null,r=0,s=0,o=0,a=0,h={width:0,height:0,normalWidth:0,normalHeight:0},l=null;i.setup=function(){var t=this.options;t.add("maxWidth",0),t.add("maxHeight",0),t.add("uniformResize",!0),t.add("responsive",!1,!0),t.add("resizeElement","frame",!0),t.add("enableHiDPI",!1),t.on("maxWidth",function(t){r=t}),t.on("maxHeight",function(t){s=t}),this.once("displayAdded",function(t){o=t.width,a=t.height,r||(r=o),s||(s=a)}),this.realWidth=0,this.realHeight=0,this.triggerResize=function(){if(n){h.width=0|(n.innerWidth||n.clientWidth),h.height=0|(n.innerHeight||n.clientHeight),this.calculateDisplaySize(h);var t=this.realWidth=h.width,i=this.realHeight=h.height,r=h.normalWidth,s=h.normalHeight,o=this.options.responsive,a=this.options.enableHiDPI;this.displays.forEach(function(n){o?(a&&e&&(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",t*=e,i*=e),n.resize(t,i)):(n.canvas.style.width=t+"px",n.canvas.style.height=i+"px",a&&e&&(r*=e,s*=e),n.resize(r,s))}),this.trigger("resize",o?t:r,o?i:s),this.displays.forEach(function(t){t.render(0,!0)})}},this.onWindowResize=function(){this.triggerResize(),l=this.setTimeout(function(){this.triggerResize(),l=null}.bind(this),500)},this.calculateDisplaySize=function(t){if(a&&this.options.uniformResize){var e=r/a,i=o/s,n=o/a,h=t.width/t.height;h<i?t.height=t.width/i:h>e&&(t.width=t.height*e),h=t.width/t.height,t.normalWidth=o,t.normalHeight=a,h>n?t.normalWidth=a*h:h<n&&(t.normalHeight=o/h),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t.normalWidth=Math.ceil(t.normalWidth),t.normalHeight=Math.ceil(t.normalHeight)}},this.once("beforeInit",this.triggerResize)},i.preload=function(t){var e=this.options;e.asDOMElement("resizeElement"),e.resizeElement&&(n=e.resizeElement,this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize)),t()},i.teardown=function(){l&&(l.destroy(),l=null),n&&window.removeEventListener("resize",this.onWindowResize),n=null,h.width=h.height=h.normalWidth=h.normalHeight=o=a=s=r=0}}(),function(t){var e=function(t){this._app=t,this._versions={},this._filters=[],this._globalVersion=null,this._applySpecificVersion=this._applySpecificVersion.bind(this),this._applyGlobalVersion=this._applyGlobalVersion.bind(this),this.cacheBust=!1},i=extend(e);Object.defineProperty(i,"cacheBust",{get:function(){return!(!this._globalVersion||0!==this._globalVersion.indexOf("cb="))},set:function(t){if(t)this._globalVersion="cb="+Date.now(),this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion);else{var e=this._app.options.version;this._globalVersion=e?"v="+e:null,this._globalVersion?(this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion)):(this.unregisterURLFilter(this._applyGlobalVersion),this.registerURLFilter(this._applySpecificVersion))}}}),i.destroy=function(){this._app=null,this._versions=null,this._filters=null,this._applySpecificVersion=null,this._applyGlobalVersion=null},i.addVersionsFile=function(t,e,i){if(this.cacheBust)e&&e();else{this.addVersion(t,Date.now().toString()),t=this._applySpecificVersion(t);var n=this;this._app.load(t,function(t){if(t){var r,s,o=t.replace(/\r/g,"").split("\n");for(r=0,len=o.length;r<len;r++)o[r]&&(2==(s=o[r].split(" ")).length&&n.addVersion((i||"")+s[0],s[1]))}e&&e()})}},i.addVersion=function(t,e){this._versions[t]||(this._versions[t]=e)},i.registerURLFilter=function(t){-1==this._filters.indexOf(t)&&this._filters.push(t)},i.unregisterURLFilter=function(t){var e=this._filters.indexOf(t);e>-1&&this._filters.splice(e,1)},i._applySpecificVersion=function(t){var e=this._app.options.basePath;if(e&&e.indexOf("?")>0)return t;var i=this._versions[t];return i&&!1===/(\?|\&)v\=[0-9]*/.test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+"v="+i.version),t},i._applyGlobalVersion=function(t){if(!this._globalVersion)return t;var e=this._app.options.basePath;return e&&e.indexOf("?")>0?t:(!1===(0===this._globalVersion.indexOf("cb=")?/(\?|\&)cb\=[0-9]*/:/(\?|\&)v\=/).test(t)&&(t=t+(t.indexOf("?")<0?"?":"&")+this._globalVersion),t)},i._applyBasePath=function(t){var e=this._app.options.basePath;return e&&!1===/^http(s)?\:/.test(t)&&-1==t.search(e)&&(t=e+t),t},i.prepare=function(t,e){e&&(t=this._applyBasePath(t));for(var i=0,n=this._filters.length;i<n;++i)t=this._filters[i](t);return t},namespace("springroll").CacheManager=e}(),function(){var t,e=include("springroll.Application"),i=function(e,n){if(void 0===t&&(t=include("springroll.Debug",!1)),this.status=i.WAITING,this.complete=e.complete||null,this.cache=!!e.cache,this.id=e.id||null,this.type=e.type||null,this.original=e,this.cache&&!this.id){if(n&&"string"==typeof n){var r=n.lastIndexOf(".");r>-1&&(n=n.substr(0,r));var s=n.lastIndexOf("/");s>-1&&(n=n.substr(s+1)),e.id=this.id=n}this.id||(this.cache=!1)}},n=extend(i);i.WAITING=0,i.RUNNING=1,i.FINISHED=2,n.start=function(t){t()},n.filter=function(t){var i=e.instance.assetManager.sizes;if(t&&i.test(t)){var n=i.size(this.original.sizes);t=i.filter(t,n),this.original.scale=n.scale}return t},n.load=function(t,i){return e.instance.load(t,i)},n.simpleLoad=function(t,i,n,r){return e.instance.loader.load(t,i,n,r)},n.destroy=function(){this.status=i.FINISHED,this.id=null,this.type=null,this.complete=null,this.original=null},namespace("springroll").Task=i}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.async=e.async},i=t.extend(e);e.test=function(t){return!!t.async},i.start=function(t){this.async(t)},i.destroy=function(){t.prototype.destroy.call(this),this.async=null},namespace("springroll").FunctionTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.color),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha)},i=t.extend(e);e.test=function(t){return!!t.color&&!!t.alpha},i.start=function(t){this.load({_alpha:this.alpha,_color:this.color},function(i){t(e.mergeAlpha(i._color,i._alpha)),i._color.src=i._alpha.src=""})},e.mergeAlpha=function(t,e,i){i||(i=document.createElement("canvas")),i.width=Math.max(e.width,t.width),i.height=Math.max(e.height,t.height);var n=i.getContext("2d");return n.save(),n.drawImage(t,0,0),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),n.restore(),i},namespace("springroll").ColorAlphaTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e),this.assets=e.assets,this.cacheAll=e.cacheAll,this.progress=e.progress},i=t.extend(e);e.test=function(t){return!!t.assets&&(Array.isArray(t.assets)||Object.isPlain(t.assets))},i.start=function(t){this.load(this.assets,{complete:t,progress:this.progress,cacheAll:this.cacheAll})},i.destroy=function(){t.prototype.destroy.call(this),this.assets=null},namespace("springroll").ListTask=e}(),function(){var t=include("springroll.Task"),e=function(e){t.call(this,e,e.src),this.src=this.filter(e.src),this.progress=e.progress||null,this.data=e.data||null,this.advanced=!!e.advanced},i=t.extend(e);e.test=function(t){return!!t.src},i.start=function(t){var e=this.advanced;this.simpleLoad(this.src,function(i){var n=i;n&&!e&&(n=i.content,i.destroy()),t(n)},this.progress,this.data)},i.destroy=function(){t.prototype.destroy.call(this),this.data=null,this.progress=null},namespace("springroll").LoadTask=e}(),function(t){var e,i=include("createjs.LoadQueue"),n=include("createjs.Sound",!1),r=function(){i.call(this,!0),void 0===e&&(e=include("springroll.Debug",!1)),this.retries=0,this.url=null,this.preparedUrl=null,this.data=null,this.onComplete=null,this.onProgress=null,this._onFailed=this._onFailed.bind(this),this._onProgress=this._onProgress.bind(this),this._onCompleted=this._onCompleted.bind(this),n&&this.installPlugin(n)},s=extend(r,i);r.MAX_RETRIES=3,s.toString=function(){return"[LoaderItem(url:'"+this.url+"')]"},Object.defineProperty(s,"basePath",{set:function(t){this._basePath=t}}),Object.defineProperty(s,"crossOrigin",{set:function(t){this._crossOrigin=t}}),s.clear=function(){this.basePath="",this.crossOrigin=!1,this.retries=0,this.onComplete=null,this.onProgress=null,this.data=null,this.preparedUrl=null,this.url=null,this.removeAllEventListeners(),this.removeAll(),this.close()},s.start=function(t){this.addEventListener("fileload",this._onCompleted),this.addEventListener("error",this._onFailed),this.addEventListener("fileprogress",this._onProgress),this._internalStart()},s._internalStart=function(){var t=this.preparedUrl;this.data&&this.data.id&&(t={id:this.data.id,src:t,data:this.data}),this.loadFile(t)},s._onProgress=function(t){this.onProgress&&this.onProgress(this.progress)},s._onFailed=function(t){this.removeAll(),this.retry()},s.retry=function(){this.retries++,this.retries>r.MAX_RETRIES?this.onComplete(this,null):this._internalStart()},s._onCompleted=function(t){this.onComplete(this,t.result)},namespace("springroll").LoaderItem=r}(),function(){var t=function(t,e,i){this.content=t,this.url=e,this.data=i,this.id=null},e=extend(t);e.toString=function(){return"[LoaderResult(url: '"+this.url+"')]"},e.reset=function(){this.content=this.url=this.data=this.id=null},e.destroy=function(){this.reset()},namespace("springroll").LoaderResult=t}(),function(t){var e=include("springroll.LoaderItem"),i=include("springroll.CacheManager"),n=include("springroll.LoaderResult"),r=function(t){this.app=t,this.maxCurrentLoads=2,this.cacheManager=new i(t),this.items={},this.itemPool=[]},s=extend(r);s.destroy=function(){this.itemPool&&this.itemPool.forEach(function(t){t.clear()}),this.itemPool=null,this.cacheManager&&this.cacheManager.destroy(),this.cacheManager=null,this.items=null},s.load=function(t,e,i,n){var r=this.app.options,s=this._getItem(),o=r.basePath;return void 0!==o&&!1===/^http(s)?\:/.test(t)&&-1==t.search(o)&&(s.basePath=o),s.crossOrigin=r.crossOrigin,s.url=t,s.preparedUrl=this.cacheManager.prepare(t),s.onComplete=this._onComplete.bind(this,e),s.onProgress=i||null,s.data=n||null,s.setMaxConnections(this.maxCurrentLoads),this.items[t]=s,s.start(),s},s._onComplete=function(t,e,i){i&&(i=new n(i,e.url,e.data)),t(i),this._putItem(e)},s.cancel=function(t){var e=this.items[t];return!!e&&(e.clear(),this._putItem(e),!0)},s._getItem=function(){var t=this.itemPool;return t.length?t.pop():new e},s._putItem=function(t){delete this.items[t.url],t.clear(),this.itemPool.push(t)},namespace("springroll").Loader=r}(),function(t){function e(t){t&&(t.destroy&&t.destroy(),"IMG"==t.tagName&&(t.src=""))}var i,n=function(){void 0===i&&(i=include("springroll.Debug",!1)),this._cache={}},r=extend(n);r.read=function(t){return this._cache[t]||null},r.write=function(t,e){this._cache[t]&&this.delete(t),this._cache[t]=e},r.delete=function(t){var i="string"==typeof t?t:t.id;if(i){var n=this._cache[i];if(n){if(Object.isPlain(n))for(var r in n)e(n[r]);else Array.isArray(n)?n.forEach(e):e(n);delete this._cache[i]}}},r.empty=function(){for(var t in this._cache)this.delete(t)},r.destroy=function(){this.empty(),this._cache=null},namespace("springroll").AssetCache=n}(),function(){var t,e=include("devicePixelRatio",!1)||1,i=function(){void 0===t&&(t=include("springroll.Debug",!1)),this._sizes=[],this._sizesMap={},this._preferredSize=null},n=extend(i);i.SIZE_TOKEN="%SIZE%",n.reset=function(){this._sizes.length=0,this._sizesMap={}},n.define=function(t,e,i,n){var r={id:t,maxSize:e,scale:i,fallback:n};this._sizesMap[t]=r,this._sizes.push(r),this._sizes.sort(function(t,e){return t.maxSize-e.maxSize})},n.filter=function(t,e){return e=e||this._preferredSize,t.replace(i.SIZE_TOKEN,e.id)},n.test=function(t){return t.indexOf(i.SIZE_TOKEN)>-1},n.size=function(t){var e=this._preferredSize,i=e.fallback;if(t&&!t[e.id])for(var n=0,r=i.length;n<r;n++){var s=i[n];if(!1!==t[s]){e=this._sizesMap[s];break}}if(!e)throw"Asset does not support any valid size";return e},n.refresh=function(t,i){for(var n=Math.min(t,i),r=null,s=this._sizes,o=s.length-1;o>=0&&s[o].maxSize/e>n;--o)r=s[o];this._preferredSize=r},n.destroy=function(){this._preferredSize=null,this._sizes=null,this._sizesMap=null},namespace("springroll").AssetSizes=i}(),function(t){function e(t){return function(t){return"string"==typeof t}(t)?{src:t}:function(t){return"function"==typeof t}(t)?{async:t}:t}var i=include("springroll.Task"),n=include("springroll.EventDispatcher"),r=function(t){n.call(this),this.manager=t,this.mode=o,this.startAll=!0,this.cacheAll=!1,this.tasks=[],this.results=null,this.running=!1,this.numLoaded=0,this.total=0,this.type=null},s=n.extend(r);s.setup=function(t,e){this.startAll=e.startAll,this.cacheAll=e.cacheAll,this.type=e.type,this.mode=this.addTasks(t),this.results=a(this.mode),e.autoStart&&this.start()},s.start=function(){this.trigger("progress",0),this.running=!0,this.nextTask()},s.reset=function(){this.tasks.forEach(function(t){t.status=i.FINISHED,t.destroy()}),this.total=0,this.numLoaded=0,this.mode=o,this.tasks.length=0,this.results=null,this.type=null,this.startAll=!0,this.cacheAll=!1,this.running=!1};var o=1;s.addTasks=function(i){var n,r,s=o;if((i=e(i)).type===t&&this.type&&(i.type=this.type),this.getTaskByAsset(i))return this.addTask(i),0;if(i.type===this.type&&this.type&&delete i.type,Array.isArray(i))for(var a=0;a<i.length;a++)n=e(i[a]),(r=this.addTask(n)).id||(s=2);else if(Object.isPlain(i))for(var h in i)n=e(i[h]),(r=this.addTask(n)).id||(r.id=h);return s},s.addTask=function(e){e.type===t&&this.type&&(e.type=this.type);var i,n=this.getTaskByAsset(e);return n&&(e.cache===t&&this.cacheAll&&(e.cache=!0),i=new n(e),this.tasks.push(i),++this.total),i},s.getTaskByAsset=function(t){for(var e,i=this.manager.taskDefs,n=0,r=i.length;n<r;n++)if((e=i[n]).test(t))return e;return null},s.nextTask=function(){for(var t=this.tasks,e=0;e<t.length;e++){var n=t[e];if(n.status===i.WAITING&&(n.status=i.RUNNING,n.start(this.taskDone.bind(this,n)),!this.startAll))return}},s.taskDone=function(t,e){if(this.running){e=e||null;var i=this.tasks.indexOf(t);if(-1!==i){this.tasks.splice(i,1);var n=[];if(e){switch(this.mode){case 0:this.results=e;break;case 2:this.results.push(e);break;case o:this.results[t.id]=e}t.cache&&this.manager.cache.write(t.id,e)}t.complete&&t.complete(e,t.original,n),this.trigger("taskDone",e,t.original,n),t.destroy();var r=this.addTasks(n);if(this.trigger("progress",++this.numLoaded/this.total),this.mode===o&&r!==this.mode)throw"Assets require IDs";this.tasks.length?this.nextTask():this.trigger("complete",this.results)}}};var a=function(t){switch(t){case 0:return null;case 2:return[];case o:return{}}};s.destroy=function(){n.prototype.destroy.call(this),this.reset(),this.tasks=null,this.manager=null},namespace("springroll").AssetLoad=r}(),function(t){var e=include("springroll.AssetLoad"),i=include("springroll.AssetCache"),n=include("springroll.AssetSizes"),r=(include("springroll.Task"),function(){this.loads=[],this.loadPool=[],this.taskDefs=[],this.cache=new i,this.sizes=new n,this.defaultType=null,this.sizes.define("half",400,.5,["full"]),this.sizes.define("full",1e4,1,["half"])}),s=extend(r);s.register=function(t,e){"string"==typeof t&&(t=include(t,!1)),t&&(t.priority=e||0,this.taskDefs.push(t),this.taskDefs.sort(function(t,e){return e.priority-t.priority}))},s.load=function(t,e){e=Object.merge({complete:null,progress:null,taskDone:null,cacheAll:!1,startAll:!0,autoStart:!0,type:this.defaultType},e);var i=this.getLoad();return this.loads.push(i),e.complete=this._onLoaded.bind(this,e.complete,i),i.once("complete",e.complete),e.progress&&i.on("progress",e.progress),e.taskDone&&i.on("taskDone",e.taskDone),i.setup(t,e),i},s.poolLoad=function(t){t.off("complete progress taskDone"),t.reset(),this.loadPool.push(t)},s.getLoad=function(){return this.loadPool.length>0?this.loadPool.pop():new e(this)},s._onLoaded=function(t,e,i){var n=this.loads.indexOf(e);n>-1&&this.loads.splice(n,1),t&&t(i),this.poolLoad(e)},s.destroy=function(){this.sizes.destroy(),this.sizes=null,this.cache.destroy(),this.cache=null,this.loadPool=null,this.loads=null,this.taskDefs=null},namespace("springroll").AssetManager=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Loader"),i=include("springroll.AssetManager"),n=new t(100);n.setup=function(){var t=this.loader=new e(this),n=this.assetManager=new i;n.register("springroll.LoadTask"),n.register("springroll.ListTask"),n.register("springroll.FunctionTask",10),n.register("springroll.ColorAlphaTask",20);var r=this.options;r.add("cacheBust",!1).respond("cacheBust",function(){return t.cacheManager.cacheBust}).on("cacheBust",function(e){t.cacheManager.cacheBust="true"==e||!!e}),r.add("basePath"),r.add("version",null,!0),r.add("versionsFile",null,!0),r.add("defaultAssetType").on("defaultAssetType",function(t){n.defaultType=t}),this.load=function(t,e,i,r,s){var o;return"string"==typeof t?t={src:t,progress:i||null,complete:e||null,cache:!!r,data:s||null}:(o=e,"function"==typeof e&&(o={complete:e})),n.load(t,o)},this.unload=function(t){"string"==typeof t&&(t=Array.prototype.slice.call(arguments));for(var e=0;e<t.length;e++)n.cache.delete(t[e])},this.unloadAll=function(){n.cache.empty()},this.getCache=function(t){return n.cache.read(t)},this.on("resize",function(){n.sizes.refresh(this.realWidth,this.realHeight)}),this.once("beforeInit",function(){this.display&&n.sizes.refresh(this.realWidth,this.realHeight)})},n.preload=function(t){this.triggerResize();var e=this.options.versionsFile;e?this.loader.cacheManager.addVersionsFile(e,t):t()},n.teardown=function(){this.loader&&(this.loader.destroy(),this.loader=null),this.assetManager&&(this.assetManager.destroy(),this.assetManager=null)}}(),function(){var t=new(include("springroll.ApplicationPlugin"))(80);t.setup=function(){include("springroll.Debug",!1);var t=this.options;t.add("configPath",null,!0),t.add("preload",[],!0),this.config=null,this._assetLoad=null,this._numLoaded=0,this._total=0,this._progress=-1,this.on("pluginProgress",e.bind(this))},t.preload=function(t){var s=[],o=this.options.configPath;o?s.push({id:"config",src:o,cache:!1,complete:n.bind(this)}):i(this,s);var a=r.bind(this,t);s.length?this._assetLoad=this.load(s,{complete:a,progress:e.bind(this),cacheAll:!0}):a()};var e=function(){this._assetLoad&&(this._numLoaded=this._assetLoad.numLoaded,this._total=this._assetLoad.total);var t=(this._numLoaded+this.pluginLoad.numLoaded)/(this._total+this.pluginLoad.total);t>this._progress&&(this._progress=t,this.trigger("progress",t))},i=function(t,e){e.append(t.options.preload),t.trigger("loading",e)},n=function(t,e,n){this.config=t,this.trigger("configLoaded",t,n),i(this,n)},r=function(t,e){this._assetLoad=null,this.trigger("loaded",e),t()};t.teardown=function(){this.config=null}}(),function(t){var e=include("springroll.EventDispatcher"),i=function(t,i){e.call(this),i=i||{},this.canvas=document.getElementById(t),this.id=t,this.width=this.canvas.width,this.height=this.canvas.height,this.stage=null,this.paused=!1,this._enabled=!1,this._visible="none"!=this.canvas.style.display,this.adapter=null},n=e.extend(i);Object.defineProperty(n,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&(this.trigger(t?"enabled":"disabled"),this.trigger("enable",t))}}),Object.defineProperty(n,"visible",{get:function(){return this._visible},set:function(t){var e=this._visible;this._visible=t,this.canvas.style.display=t?"block":"none",e!=t&&(this.trigger(t?"visible":"hidden"),this.trigger("visibility",t))}}),n.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.render=function(t,e){},n.destroy=function(){this.enabled=!1,this.adapter=null,this.stage=null,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas.onmousedown=null,this.canvas=null},namespace("springroll").AbstractDisplay=i}(),function(){var t=include("springroll.Application"),e=include("springroll.Loader"),i=include("springroll.PropertyDispatcher"),n=include("springroll.EventDispatcher");t.prototype.getDisplays=function(t){return"function"==typeof t&&_displays.forEach(t),_displays},n.mixIn=function(t,e){return mixin(t,n)},Object.defineProperty(e,"instance",{get:function(){return t.instance.loader}}),i.prototype.readOnly=function(t){for(var e,i,n=0;n<arguments.length;n++){if(i=arguments[n],void 0===(e=this._properties[i]))throw"Property "+i+" does not exist";e.readOnly=!0}return this}}()}(),function(){"use strict";var t,e,i;!function(t){function e(t){var e=t.lastIndexOf("."),i=parseInt(t.substr(e+1),10),n=t.substr(0,e).split(":");return 36e5*parseInt(n[0],10)+6e3*parseInt(n[1],10)+1e3*parseInt(n[2],10)+i}var i=include("springroll.Application"),n=function(t,e,i){include("springroll.Debug",!1),this._data=null,this._textField=null,this._completeCallback=null,this._lines=[],this._currentAlias=0,this._currentDuration=0,this._currentTime=0,this._currentLine=-1,this._lastActiveLine=-1,this._playing=!1,this._destroyed=!1,this._selfUpdate=!0,this._mute=!1,this.update=this.update.bind(this),this.data=t||{},this.textField=e||null,this.selfUpdate=void 0===i||!!i},r=extend(n);Object.defineProperty(r,"mute",{get:function(){return this._mute},set:function(t){this._mute=t,this._updateCaptions()}}),Object.defineProperty(r,"selfUpdate",{set:function(t){this._selfUpdate=!!t,i.instance.off("update",this.update),this._selfUpdate&&i.instance.on("update",this.update)},get:function(){return this._selfUpdate}}),Object.defineProperty(r,"data",{set:function(t){if(this._data=t,t){var i,n,r,s,o=/[0-9]+\:[0-9]{2}\:[0-9]{2}\.[0-9]{3}/;for(var a in t)if(Array.isArray(t[a])&&(t[a]={lines:t[a]}),i=t[a].lines)for(s=i.length,n=0;n<s;++n)"string"==typeof(r=i[n]).start&&(o.test(r.start)?r.start=e(r.start):r.start=parseInt(r.start,10)),"string"==typeof r.end&&(o.test(r.end)?r.end=e(r.end):r.end=parseInt(r.end,10))}},get:function(){return this._data}}),Object.defineProperty(r,"textField",{set:function(t){s(this._textField,""),this._textField="string"==typeof t?document.getElementById(t):t||null},get:function(){return this._textField}});var s=function(t,e){if(t){if(t.nodeName)t.innerHTML=e;else{if(!t.constructor.prototype.hasOwnProperty("text")&&!t.hasOwnProperty("text"))throw"Unrecognizable captions text field";t.text=e}return t}};r.hasCaption=function(t){return!!this._data&&!!this._data[t]},r.getFullCaption=function(t,e){if(this._data){var i,n,r;if(e=e||" ",Array.isArray(t))for(r=0;r<t.length;r++)"string"==typeof t[r]&&(n=this.getFullCaption(t[r],e),i?i+=e+n:i=n);else{if(!this._data[t])return t;var s=this._data[t].lines;for(r=0;r<s.length;r++)n=s[r].content,i?i+=e+n:i=n}return i}},r._load=function(t){if(!this._destroyed){if(this._reset(),!t)return void(this._lines=null);this._lines=t.lines}},r._reset=function(){this._currentLine=-1,this._lastActiveLine=-1},Object.defineProperty(r,"playing",{get:function(){return this._playing}}),r._getTotalDuration=function(){var t=this._lines;return t?t[t.length-1].end:0},Object.defineProperty(r,"currentDuration",{get:function(){return this._currentDuration}}),Object.defineProperty(r,"currentAlias",{get:function(){return this._currentAlias}}),r.play=function(t,e){this.stop(),this._completeCallback=e,this._playing=!0,this._currentAlias=t,this._load(this._data[t]),this._currentDuration=this._getTotalDuration(),this.seek(0)},r.stop=function(){this._playing=!1,this._currentAlias=null,this._lines=null,this._completeCallback=null,this._reset(),this._updateCaptions()},r.seek=function(t){var e=this._currentTime=t,i=this._lines;if(i){if(e<i[0].start)return this._currentLine=this._lastActiveLine=-1,void this._updateCaptions();for(var n=i.length,r=0;r<n;r++){if(e>=i[r].start&&e<=i[r].end){this._currentLine=this._lastActiveLine=r,this._updateCaptions();break}e>i[r].end?(this._lastActiveLine=r,this._currentLine=-1,this._updateCaptions()):e<i[r].start&&(this._lastActiveLine=r-1,this._currentLine=-1,this._updateCaptions())}}else this._updateCaptions()},r._updatePercent=function(t){this._destroyed||(this._currentTime=t*this._currentDuration,this._calcUpdate())},r.update=function(t){!this._destroyed&&this._playing&&(this._currentTime+=t,this._calcUpdate())},r._calcUpdate=function(){var t=this._lines;if(t){var e=t.length,i=this._lastActiveLine+1,n=e-1,r=this._currentTime;r>=t[n].end?this.stop():i<=n&&r>=t[i].start&&r<=t[i].end?(this._currentLine=this._lastActiveLine=i,this._updateCaptions()):-1!=this._currentLine&&r>t[this._currentLine].end&&(this._lastActiveLine=this._currentLine,this._currentLine=-1,this._updateCaptions())}},r._updateCaptions=function(){s(this._textField,-1==this._currentLine||this._mute?"":this._lines[this._currentLine].content)},r.getLength=function(t){var e=0;if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)"string"==typeof t[i]?e+=this.getLength(t[i]):"number"==typeof t[i]&&(e+=t[i]);else{if(!this._data[t])return e;var r=this._data[t].lines;e+=r[r.length-1].end}return parseInt(e)},r.destroy=function(){this._destroyed||(this._destroyed=!0,this._data=null,this._lines=null)},namespace("springroll").Captions=n}(),t=include("springroll.ApplicationPlugin"),e=include("springroll.Captions"),include("springroll.Debug",!1),(i=new t(60)).setup=function(){this.options.add("captions","captions",!0),this.options.add("captionsPath",null,!0),this.captions=new e},i.preload=function(t){this.voPlayer&&(this.voPlayer.captions=this.captions),this.captions.textField=this.options.captions;var e=this.options.captionsPath;e?this.load(e,function(e){this.captions.data=e,t()}.bind(this)):t()},i.teardown=function(){this.captions&&(this.captions.destroy(),this.captions=null)}}(),function(){"use strict";var t,e;t=function(){this.onComplete=null,this.onCancelled=null,this.eventList=null,this.listIndex=-1,this.instance=null,this.isLooping=!1,this.useCaptions=!1,this._paused=!1,this.duration=0,this.speed=1,this.soundAlias=null,this.soundInst=null,this.playSound=!1,this.soundStart=0,this.soundEnd=0,this.complete=!1,this._position=0,this.isTimer=!1},(e=extend(t)).reset=function(){return this.instance&&(this.instance.destroy(),this.instance=null),this.complete=!1,this.soundEnd=0,this.soundStart=0,this.playSound=!1,this.soundInst=null,this.soundAlias=null,this.speed=1,this._position=0,this.duration=0,this._paused=!1,this.useCaptions=!1,this.isLooping=!1,this.isTimer=!1,this.listIndex=-1,this.eventList=null,this.onCancelled=null,this.onComplete=null,this},Object.defineProperty(e,"position",{get:function(){return this._position},set:function(t){this._position=t,this.isTimer||this.instance.setPosition(t)}}),e._nextItem=function(){var t=!1;if(this.soundInst&&(this.soundInst._endCallback=null),this.isLooping){var e=this.soundInst;e&&(e.stop(),this.soundInst=null),t=!0}else if(this.isTimer||this.instance.endAnim(),this.soundEnd=this.soundStart=0,this.isLooping=this.playSound=this.useCaptions=!1,this.soundInst=this.soundAlias=null,++this.listIndex>=this.eventList.length)return void(this.complete=!0);var i=this.eventList[this.listIndex];switch(typeof i){case"object":this.isTimer=!1;var n=this.instance;n.beginAnim(i,t),this.duration=n.duration,this.speed=i.speed,this.isLooping=n.isLooping||i.loop,this._position=n.position,i.alias&&(this.soundAlias=i.alias,this.soundStart=i.audioStart,this.playSound=!0,this.useCaptions=i.useCaptions);break;case"number":this.isTimer=!0,this.duration=i,this._position=0;break;case"function":i(),this._nextItem()}},Object.defineProperty(e,"time",{get:function(){return 1e3*this.position},set:function(t){this.position=.001*t}}),Object.defineProperty(e,"paused",{get:function(){return this._paused},set:function(t){if(t!=this._paused){this._paused=!!t;var e=this.soundInst;e&&(this.paused?e.pause():e.resume())}}}),namespace("springroll").AnimatorTimeline=t,function(t){function e(t){return"string"==typeof t}function i(t){return"number"==typeof t}function n(t){return"function"==typeof t}var r,s,o,a,h,l,u,c=include("springroll.AnimatorTimeline"),d=function(t){this.debug=!1,this.captions=null,u=t,o=[],r=[];try{"function"==typeof(s=new Map([])).delete&&"function"==typeof s.has&&"function"==typeof s.set&&"function"==typeof s.get||(s=null)}catch(t){}l=[],a=!1,h=!1,this._update=this._update.bind(this),include("springroll.Debug",!1)},p=extend(d);p.register=function(t,e){var i=include(t,!1);i&&(i.priority=e,o.push(i),o.sort(function(t,e){return e.priority-t.priority}))},p.play=function(t,e,i,n){!0===n&&(n=i),Array.isArray(e)||(e=[e]),this.stop(t);var o=this._makeTimeline(t,e,i,n);return o.eventList&&o.eventList.length>=1?(o._nextItem(),a||this._startUpdate(),s&&s.set(t,o),r.push(o),a=!0,o):(l.push(o.reset()),i&&i(),null)},p._makeTimeline=function(t,r,s,o){var a=l.length?l.pop():new c,h=f(t);if(!h)return a;var d=h.create(t);if(!d)return a;a.instance=d,a.eventList=[],a.onComplete=s,a.onCancelled=o,a.speed=void 0;for(var p,g,v,m=0,y=r.length;m<y;++m){var _=r[m];if(e(_)){if(!h.hasAnimation(t,_))continue;a.eventList.push({anim:_,audio:null,start:0,speed:1})}else if("object"==typeof _){if(!h.hasAnimation(t,_.anim))continue;var b={anim:_.anim,start:i(_.start)?.001*_.start:0,speed:_.speed>0?_.speed:1,loop:_.loop};(p=_.audio)&&u.sound&&(e(p)?(g=0,v=p):(g=p.start>0?.001*p.start:0,v=p.alias),u.sound.isSupported&&!u.sound.systemMuted&&u.sound.exists(v)&&(u.sound.preload(v),b.alias=v,b.audioStart=g,b.useCaptions=this.captions&&this.captions.hasCaption(v))),a.eventList.push(b)}else i(_)?a.eventList.push(.001*_):n(_)&&a.eventList.push(_)}return a},p.canAnimate=function(t){return!!t&&!!f(t)};var f=function(t){for(var e,i=0,n=o.length;i<n;i++)if((e=o[i]).test(t))return e;return null};p.hasAnimation=function(t,e){var i=f(t);return!!i&&i.hasAnimation(t,e)},p.getDuration=function(t,e){var i=f(t);if(!i)return 0;if(!Array.isArray(e))return i.getDuration(t,e.anim||e);for(var n=0,r=0;r<e.length;++r){var s=e[r];"number"==typeof s?n+=s:"string"==typeof s?n+=i.getDuration(t,s):"object"==typeof s&&s.anim&&(n+=i.getDuration(t,s.anim))}return n},p.stop=function(t,e){var i=g(t);i&&(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p.stopAll=function(t,e){if(a)for(var i,n=r.length-1;n>=0;--n)i=r[n],t&&!t.contains(i.instance.clip)||(e&&(i.onComplete=i.onCancelled=null),this._remove(i,!0))},p._remove=function(t,e){var i=r.indexOf(t);if(!(i<0)){var n=t.onComplete,o=t.onCancelled;e&&t.soundInst&&t.soundInst.stop(),s&&s.delete(t.instance.clip),i==r.length-1?r.pop():r.splice(i,1),a=r.length>0,t.useCaptions&&this.captions.stop(),l.push(t.reset()),a||this._stopUpdate(),e?o&&o():n&&n()}},p.pause=function(){if(!h){h=!0;for(var t=r.length-1;t>=0;--t)r[t].paused=!0;this._stopUpdate()}},p.resume=function(){if(h){h=!1;for(var t=r.length-1;t>=0;--t)r[t].paused=!1;a&&this._startUpdate()}},p.pauseInGroup=function(t,e){if(a&&e)for(var i=r.length-1;i>=0;--i)e.contains(r[i].instance.clip)&&(r[i].paused=t)},p.getTimeline=function(t){return a?g(t):null};var g=function(t){if(s)return s.has(t)?s.get(t):null;for(var e=r.length-1;e>=0;--e)if(r[e].instance.clip===t)return r[e];return null};Object.defineProperty(p,"paused",{get:function(){return h}}),p._startUpdate=function(){u.on("update",this._update)},p._stopUpdate=function(){u.off("update",this._update)},p._update=function(t){for(var e,i,n,s=.001*t,o=r.length-1;o>=0;--o){if(!(e=r[o]))return;if(e.instance,!e.paused){if(n=0,e.soundInst?e.soundInst.isValid?((i=.001*e.soundInst.position)<0&&(i=0),n=e.soundStart+i,e.useCaptions&&this.captions.seek(e.soundInst.position)):n=e.duration:n=e.position+s*e.speed,n>=e.duration){for(;n>=e.duration;){if(n-=e.duration,e.isLooping){if(!e.duration){e.complete=!0;break}e.onComplete&&e.onComplete()}if(e._nextItem(),e.complete)break}if(e.complete){this._remove(e);continue}}e.playSound&&n>=e.soundStart?(e.position=e.soundStart,e.playSound=!1,e.soundInst=u.sound.play(e.soundAlias,this._onSoundDone.bind(this,e,e.listIndex,e.soundAlias),v.bind(null,e,e.listIndex)),e.useCaptions&&this.captions.play(e.soundAlias)):e.position=n}}};var v=function(t,e){t.listIndex==e&&(t.soundEnd=t.soundStart+.001*t.soundInst.length)};p._onSoundDone=function(t,e,i){this.captions&&this.captions.currentAlias==i&&this.captions.stop(),t.listIndex==e&&(t.soundEnd>t.position&&(t.position=t.soundEnd),t.soundInst=null)},p.destroy=function(){this.stopAll(null,!0),this.captions=null,u=null,r=null,l=null,s=null,o=null},namespace("springroll").Animator=d}(),function(t){var e=(include("springroll.Application"),function(){this.clip=null,this.position=0,this.duration=0,this.isLooping=!1,this.currentName=null}),i=extend(e);i.init=function(t){this.clip=t},i.beginAnim=function(t,e){},i.endAnim=function(){},i.setPosition=function(t){},e.test=function(t){return!1},e.hasAnimation=function(t,e){return!1},e.getDuration=function(t,e){return 0},e.extend=function(t,i){return t._pool=[],t.create=function(e){var i=t._pool.length>0?t._pool.pop():new t;return i.init(e),i},t.pool=function(e){e.destroy(),t._pool.push(e)},extend(t,i||e)},i.destroy=function(){this.clip=null},namespace("springroll").AnimatorInstance=e}(),function(t){var e=include("springroll.Application"),i=include("springroll.AnimatorInstance"),n=function(){i.call(this),this.startTime=0,this.length=0,this.firstFrame=-1,this.lastFrame=-1},r=i.extend(n);r.init=function(t){t.framerate||(t.framerate=e.instance.options.fps||15),t.tickEnabled=!1,this.clip=t,this.isLooping=!1,this.currentName=null,this.position=this.duration=0,this.lastFrame=t.currentFrame},r.beginAnim=function(t,e){var i,n=this.currentName=t.anim,r=-1,s=-1,o=!1;if("*"!=n||this.clip.timeline.resolve(n))for(var a=this.clip.getLabels(),h=n+"_stop",l=n+"_loop",u=0,c=a.length;u<c;++u)if((i=a[u]).label==n)r=i.position;else{if(i.label==h){s=i.position;break}if(i.label==l){s=i.position,o=!0;break}}else r=0,s=this.clip.timeline.duration-1,o=!!t.loop;this.firstFrame=r,this.lastFrame=s,this.length=s-r,this.isLooping=o;var d=this.clip.framerate;if(this.startTime=this.firstFrame/d,this.duration=this.length/d,e)this.position=0;else{var p=t.start||0;this.position=p<0?Math.random()*this.duration:p}this.clip.play(),this.clip.elapsedTime=this.startTime+this.position,this.clip.advance()},r.endAnim=function(){this.clip.gotoAndStop(this.lastFrame)},r.setPosition=function(t){this.position=t,this.clip.elapsedTime=this.startTime+t,this.clip.advance()},n.test=function(e){return e.framerate!==t&&e.getLabels!==t&&e.elapsedTime!==t&&e.gotoAndStop!==t&&e.gotoAndPlay!==t&&e.stop!==t&&e.play!==t},n.hasAnimation=function(t,e){if("*"==e&&!t.timeline.resolve(e))return!0;for(var i,n=t.getLabels(),r=-1,s=-1,o=e+"_stop",a=e+"_loop",h=0,l=n.length;h<l;++h)if((i=n[h]).label==e)r=i.position;else if(i.label==o||i.label==a){s=i.position;break}return r>=0&&s>0},n.getDuration=function(t,i){if(t.framerate||(t.framerate=e.instance.options.fps||15),"*"==i&&!t.timeline.resolve(i))return t.timeline.duration/t.framerate*1e3;for(var n,r=t.getLabels(),s=-1,o=-1,a=i+"_stop",h=i+"_loop",l=0,u=r.length;l<u;++l)if((n=r[l]).label==i)s=n.position;else if(n.label==a||n.label==h){o=n.position;break}return s>=0&&o>0?(o-s)/t.framerate*1e3:0},r.destroy=function(){this.clip=null},namespace("springroll").GenericMovieClipInstance=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Animator"),i=new t(50);i.setup=function(){this.animator=new e(this),this.animator.captions=this.captions||null,this.animator.register("springroll.GenericMovieClipInstance",0)},i.teardown=function(){this.animator&&(this.animator.destroy(),this.animator=null)}}()}(),function(){"use strict";var t,e,i;t=include("springroll.SavedData"),e=function(t){this.container=t,this.id=""},(i=extend(e)).read=function(e,i){if(!this.container.supported)return i(t.read(this.id+e));this.container.fetch("userDataRead",function(t){i(t.data)},this.id+e,!0)},i.write=function(e,i,n){if(!this.container.supported)return t.write(this.id+e,i),void(n&&n());this.container.fetch("userDataWrite",function(t){n&&n()},{name:this.id+e,value:i},!0)},i.remove=function(e,i){if(!this.container.supported)return t.remove(this.id+e),void(i&&i());this.container.fetch("userDataRemove",function(t){i&&i()},this.id+e,!0)},i.destroy=function(){this.id=null,this.container=null},namespace("springroll").UserData=e,function(t){var e=include("springroll.ApplicationPlugin"),i=include("springroll.PageVisibility"),n=include("springroll.UserData"),r=include("Bellhop"),s=new e(200);s.setup=function(){var t=this.options,e=this.container=new r;e.connect(),this.userData=new n(e),t.add("keepFocus",!1).on("keepFocus",function(t){e.send("keepFocus",t)}),this.on("progress",function(t){this.container.send("progress",t)}),this.once("beforeInit",function(){e.send("loaded")}),e.send("loading"),this.singlePlay=!1,this.playOptions={};var i=/playOptions=[^&$]*/.exec(window.location.search);if(null!==i){var s=i[0],h=decodeURIComponent(s.split("=")[1]);try{this.playOptions=JSON.parse(h)}catch(t){springroll.Debug&&springroll.Debug.warn("ContainerClientPlugin: Failed to parse playOptions from query string")}}this.singlePlayEnd=function(){return!!this.singlePlay&&(this.endGame(),!0)},this.endGame=function(t){this.trigger("endGame",t||"game_completed"),this.destroy()},this.once("beforeInit",function(){var t=!!this.sound;this.container.send("features",{sound:t,hints:!!this.hints,music:t&&this.sound.contextExists("music"),vo:t&&this.sound.contextExists("vo"),sfx:t&&this.sound.contextExists("sfx"),captions:!!this.captions,disablePause:!!this.options.disablePause})}),e.supported&&(e.fetch("singlePlay",f.bind(this)),e.fetch("playOptions",p.bind(this))),window.onerror=a.bind(this),window.onunload=window.onbeforeunload=o.bind(this)};var o=function(){return window.onunload=window.onbeforeunload=null,void this.endGame("left_site")},a=function(t){if(this.container.supported)return this.container.send("localError",String(t)),!0};s.preload=function(t){if(!this.name)throw"Application name is empty";if(this.userData.id=this.name,this.container.supported){this.container.on({soundMuted:l.bind(this),captionsMuted:u.bind(this),musicMuted:c.bind(this,"music"),voMuted:c.bind(this,"vo"),sfxMuted:c.bind(this,"sfx"),captionsStyles:d.bind(this),pause:h.bind(this),close:g.bind(this)}),this.options.autoPause=!1;var e=this.container;this._pageVisibility=new i(e.send.bind(e,"focus",!0),e.send.bind(e,"focus",!1))}t()};var h=function(t){var e=!!t.data;this.autoPaused=e,this.enabled=!e},l=function(t){this.sound&&(this.sound.muteAll=!!t.data)},u=function(t){this.captions&&(this.captions.mute=!!t.data)},c=function(t,e){this.sound&&this.sound.setContextMute(t,!!e.data)},d=function(t){var e=t.data,i=(this.captions||{}).textField||null;i&&i.nodeName&&(i.className="size-"+e.size+" bg-"+e.background+" color-"+e.color+" edge-"+e.edge+" font-"+e.font+" align-"+e.align)},p=function(t){Object.merge(this.playOptions,t.data||{}),this.trigger("playOptions",this.playOptions)},f=function(t){this.singlePlay=!!t.data},g=function(){this.endGame("closed_container")};s.teardown=function(){window.onerror=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.userData&&(this.userData.destroy(),this.userData=null),this.container&&(this.container.send("endGame"),this.container.destroy(),this.container=null)}}()}(),function(){"use strict";var t;!function(t){var e,i=include("springroll.EventDispatcher"),n=function(t,n){i.call(this),e||(e=include("springroll.Application"),include("springroll.Debug",!1)),n=Object.merge({next:null,previous:null,delayLoad:0,preload:[],scaling:null},n||{});var r=this.app=e.instance;this.voPlayer=r.voPlayer||null,this.sound=r.sound||null,this.config=r.config||null,this.scaling=r.scaling||null,this.scalingItems=n.scaling||null,this.stateId=null,this.manager=null,this.panel=t,this.preload=n.preload,this.preloaded=!1,this.assets=null,this._destroyed=!1,this._active=!1,this._isLoading=!1,this._canceled=!1,this._onEnterProceed=null,this._onLoadingComplete=null,this._enabled=!1,this._nextState=n.next,this._prevState=n.previous,this.delayLoad=n.delayLoad,this.panel.visible=!1},r=i.prototype,s=i.extend(n),o=function(){};s.exit=o,s.exitStart=o,s.cancel=o,s.enter=o,s.enterDone=o,s.nextState=function(){var t=typeof this._nextState;this._nextState&&("function"===t?this._nextState():"string"===t&&(this.manager.state=this._nextState))},s.previousState=function(){var t=typeof this._prevState;this._prevState&&("function"===t?this._prevState():"string"===t&&(this.manager.state=this._prevState))},s.loadingStart=function(){this._isLoading||(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterProceed,this._onEnterProceed=null)},s.loadingDone=function(t){if(void 0===t&&(t=this.delayLoad),this._isLoading){if(t&&"number"==typeof t)return this.panel.visible=!0,void this.app.setTimeout(this.loadingDone.bind(this,0),t,!0);this._isLoading=!1,this.manager.loadingDone(),this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null)}},Object.defineProperty(s,"canceled",{get:function(){return this._canceled}}),Object.defineProperty(s,"active",{get:function(){return this._active}}),Object.defineProperty(s,"enabled",{get:function(){return this._enabled},set:function(t){var e=this._enabled;this._enabled=t,e!=t&&this.trigger("enabled",t)}}),Object.defineProperty(s,"destroyed",{get:function(){return this._destroyed}}),s._internalExit=function(){this.preloaded=!1;var t=this.panel,e=this.scalingItems,i=this.scaling;i&&e&&("panel"==e?i.removeItem(t):i.removeItems(t,e)),this.preload.length&&this.app.unload(this.preload),this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(t)),this._enabled=!1,t.visible=!1,this._active=!1,this.exit(),this.trigger("exit")},s._internalEntering=function(){this.enter(),this.trigger("enter"),this.loadingStart(),this.preloaded=!1;var t=[];this.trigger("loading",t),this.preload.length&&(t=this.preload.concat(t)),t.length?this.app.load(t,{complete:this._onLoaded.bind(this),progress:a.bind(this),cacheAll:!0}):this._onLoaded(null)};var a=function(t){this.trigger("progress",t),this.manager.trigger("progress",t)};s._onLoaded=function(t){if(this.assets=t,this.preloaded=!0,this.trigger("loaded",t),this.scaling){var e=this.scalingItems;e&&("panel"==e?(this.panel.x=this.panel.y=0,this.panel.scaleX=this.panel.scaleY=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})):this.scaling.addItems(this.panel,e))}this.loadingDone()},s._internalExitStart=function(){this.exitStart(),this.trigger("exitStart")},s._internalEnter=function(t){this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(this.panel)),this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterProceed=t,this._internalEntering(),this._onEnterProceed&&(this._onEnterProceed(),this._onEnterProceed=null)},s._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExit(),this.cancel(),this.trigger("cancel")},s._internalEnterDone=function(){this._canceled||(this.enabled=!0,this.enterDone(),this.trigger("enterDone"))},s.destroy=function(){this._destroyed||(this.trigger("destroy"),this.app=null,this.scaling=null,this.sound=null,this.voPlayer=null,this.config=null,this.scalingItems=null,this.assets=null,this.preload=null,this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterProceed=null,this._onLoadingComplete=null,r.destroy.call(this))},namespace("springroll").State=n}(),t=function(t,e,i){this.currentState=e,this.visibleState=void 0===i?e:i,this.type=t},extend(t),t.VISIBLE="onVisible",t.HIDDEN="onHidden",namespace("springroll").StateEvent=t,function(t){var e=(include("springroll.Debug",!1),include("springroll.EventDispatcher")),i=(include("springroll.State"),include("springroll.StateEvent")),n=function(t){e.call(this),this.animator=null,this.transition=null,this.waitForLoadingComplete=!1,this._transitionSounds=t||null,this._states={},this._state=null,this._stateId=null,this._oldState=null,this._isLoading=!1,this._isTransitioning=!1,this._destroyed=!1,this.enabled=!0,this._onTransitionLoading=this._onTransitionLoading.bind(this),this._onTransitionOut=this._onTransitionOut.bind(this),this._onStateLoaded=this._onStateLoaded.bind(this),this._onTransitionIn=this._onTransitionIn.bind(this)},r=e.extend(n),s=n.TRANSITION_IN="onTransitionIn",o=n.TRANSITION_LOADING="onTransitionLoading",a=n.TRANSITION_IN_DONE="onTransitionInDone",h=n.TRANSITION_OUT="onTransitionOut",l=n.TRANSITION_OUT_DONE="onTransitionOutDone",u=n.TRANSITION_INIT_DONE="onInitDone",c=n.LOADING_START="onLoadingStart",d=n.LOADING_DONE="onLoadingDone";r.addState=function(t,e){this._states[t]=e,e.stateId=t,e.manager=this},Object.defineProperty(r,"currentState",{get:function(){return this._state}}),r.getStateById=function(t){return this._states[t]},r.isBusy=function(){return this._isLoading||this._isTransitioning},r.loadingStart=function(){this._destroyed||(this.trigger(c),this._onTransitionLoading())},r.loadingDone=function(){this._destroyed||this.trigger(d)},Object.defineProperty(r,"enabled",{set:function(t){this.trigger("enabled",t)}}),r.refresh=function(){this.state=this._stateId},Object.defineProperty(r,"state",{set:function(t){this._isTransitioning||(this._stateId=t,this.enabled=!1,this._oldState=this._state,this._state=this._states[t],this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnter(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStart(),this.enabled=!1,this.trigger(h),this._transitioning(h,this._onTransitionOut)):(this._isTransitioning=!0,this.transition&&(this.transition.visible=!0),this._onTransitionLoading(),this.trigger(u),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)))},get:function(){return this._stateId}}),r._onTransitionOut=function(){this.trigger(l),this._isTransitioning=!1,this.has(i.HIDDEN)&&this.trigger(i.HIDDEN,new i(i.HIDDEN,this._state,this._oldState)),this._oldState.panel.visible=!1,this._oldState._internalExit(),this._oldState=null,this._onTransitionLoading(),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)},r._onStateLoaded=function(){if(this._isLoading=!1,this._isTransitioning=!0,this.has(i.VISIBLE)&&this.trigger(i.VISIBLE,new i(i.VISIBLE,this._state)),this._state.panel.visible=!0,this.waitForLoadingComplete&&this.animator.hasAnimation(this.transition,o)){var t=this.animator.getTimeline(this.transition);t.onComplete=function(){this.trigger(s),this._transitioning(s,this._onTransitionIn)}.bind(this),t.isLooping=!1}else this.trigger(s),this._transitioning(s,this._onTransitionIn)},r._onTransitionIn=function(){this.transition&&(this.transition.visible=!1),this.trigger(a),this._isTransitioning=!1,this.enabled=!0,this._state._internalEnterDone()},r._onTransitionLoading=function(){if(this.transition){var t,e=this._transitionSounds;e&&(t=e.loading||e.loop);var i=this.animator;i.hasAnimation(this.transition,o)?(this.trigger(o),i.play(this.transition,{anim:o,audio:t})):i.hasAnimation(this.transition,"transitionLoop")&&(this.trigger(o),i.play(this.transition,{anim:"transitionLoop",audio:t}))}},r.showTransitionOut=function(t){this.enabled=!1,this._transitioning(h,function(){this._onTransitionLoading(),t&&t()}.bind(this))},r.showTransitionIn=function(t){this._transitioning(s,function(){this.enabled=!0,this.transition.visible=!1,t&&t()}.bind(this))},r._transitioning=function(t,e){var i,n=this.transition,r=this._transitionSounds;if(!n)return e();n.visible=!0,r&&(i=t==s?r.in:r.out),this.animator.play(n,{anim:t,audio:i},e)},r.destroy=function(){if(this._destroyed=!0,this.off(),this.transition&&this.animator.stop(this.transition),this._state&&this._state._internalExit(),this._states)for(var t in this._states)this._states[t].destroy(),delete this._states[t];this.transition=null,this._state=null,this._oldState=null,this._states=null},namespace("springroll").StateManager=n}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.StateManager"),i=(include("springroll.Debug",!1),new t);i.setup=function(){this._states=null,this.manager=null,this._transition=null,Object.defineProperty(this,"transition",{set:function(t){if(!this.display)throw"No default display";if(t&&!this.animator)throw"No animation module";var e=this.display.stage;this._transition&&e.removeChild(this._transition),this._transition=t,this.manager&&(this.manager.transition=t),t&&(t.stop&&t.stop(),e.addChild(t))},get:function(){return this._transition}}),this.options.add("state",null,!0),this.options.add("transition"),this.options.add("transitionSounds",{in:null,out:null},!0),Object.defineProperty(this,"states",{set:function(t){if(this.manager)throw"States already set";if(!this.display)throw"No default display";var i=this.manager=new e(this.options.transitionSounds);i.animator=this.animator,i.on("enabled",function(t){this.display.enabled=t}.bind(this));var n=this.display.stage;for(var r in t)i.addState(r,t[r]),n.addChild(t[r].panel),this.trigger("stateAdded",r,t[r]);this._states=t;var s=this._transition||this.options.transition;s&&(this.transition=s,s.gotoAndStop&&s.gotoAndStop("onTransitionOut_stop")),this.options.state&&(i.state=this.options.state)},get:function(){return this._states}})},i.teardown=function(){this._state=null,this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display&&this.display.adapter.removeChildren(this.transition),this.transition=null)}}(),function(){var t=include("springroll.StateManager").prototype;t.changeTransition=function(t){this.transition=t},t.getCurrentState=function(){return this.currentState},t.setState=function(t){this.state=t},t.next=function(){this._state.nextState()},t.previous=function(){this._state.previousState()},Object.defineProperty(include("springroll"),"BaseState",{get:function(){return include("springroll.State")}})}()}(),function(){"use strict";var t,e,i;namespace("springroll").SoundContext=function(t){this.id=t,this.volume=1,this.muted=!1,this.sounds=[],this.subContexts=[]},e=function(){t||(t=include("springroll.Sound")),this._channel=null,this._endFunc=null,this._endCallback=null,this._startFunc=null,this._startParams=null,this.alias=null,this._fTime=0,this._fDur=0,this._fStart=0,this._fEnd=0,this.curVol=0,this._pan=0,this.length=0,this.paused=!1,this.globallyPaused=!1,this.isValid=!0},i=extend(e),Object.defineProperty(i,"position",{get:function(){return this._channel?this._channel.getPosition():0}}),i.stop=function(){var e=t.instance;if(e){var i=e._sounds[this.alias];if(!i)return;var n=i.playing.indexOf(this);n>-1&&i.playing.splice(n,1),(n=i.waitingToPlay.indexOf(this))>-1&&i.waitingToPlay.splice(n,1),e._stopInst(this)}},i.updateVolume=function(e){if(this._channel){if(void 0===e){var i=t.instance,n=i._sounds[this.alias];if(n.context){var r=i._contexts[n.context];e=r.muted?0:r.volume}else e=1}this._channel.setVolume(e*this.curVol)}},Object.defineProperty(i,"volume",{get:function(){return this.curVol},set:function(t){this.curVol=t,this.updateVolume()}}),Object.defineProperty(i,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._channel&&(this._channel.pan=t)}}),i.pause=function(){this.globallyPaused=!1,this.paused||(this.paused=!0,this._channel&&(this._channel.paused=!0,t.instance._onInstancePaused()))},i.resume=function(){this.paused&&(this.paused=!1,this._channel&&(t.instance._onInstanceResume(),this._channel.paused=!1,this._channel.gainNode&&(this._channel._volume=-1,this._channel.gainNode.gain.value=0),this.updateVolume()))},namespace("springroll").SoundInstance=e,function(){var t=include("springroll.Task"),e=include("springroll.Application"),i=function(e){t.call(this,e,e.sounds[0]),this.sounds=e.sounds},n=t.prototype,r=t.extend(i);i.test=function(t){return!!t.sounds&&Array.isArray(t.sounds)},r.start=function(t){var i=e.instance.sound,n=this.sounds;i.preload(n,function(){n.destroy=function(){i.unload(this),this.length=0,delete this.destroy},t(n)})},r.destroy=function(){this.sounds=null,n.destroy.call(this)},namespace("springroll").SoundTask=i}(),function(){function t(){var t=c.activePlugin,e=t._audioSources,i=t._soundInstances,n=t._loaders;h.context.close&&h.context.close();var r=window.AudioContext||window.webkitAudioContext;for(var s in h.context=new r,h.call(t),t._loaders=n,t._audioSources=e,t._soundInstances=i,i)for(var o=i[s],a=0;a<o.length;++a){var l=o[a];l.panNode.disconnect(0),l.gainNode.disconnect(0),l.gainNode=h.context.createGain(),l.panNode=h.context.createPanner(),l.panNode.panningModel=h._panningModel,l.panNode.connect(l.gainNode),l._updatePan(),(l._position<0||void 0===l._position)&&(l._position=0)}}function e(t){h.playEmptySound(),"running"!=h.context.state&&void 0!==h.context.state||(v.preventDefaultOnUnmute&&t.preventDefault(),document.removeEventListener("touchstart",e),document.removeEventListener("touchend",e),document.removeEventListener("mousedown",e),v.systemMuted=!1,v.trigger("systemUnmuted"))}function i(t){return"string"==typeof t}function n(t){return"function"==typeof t}var r,s,o=include("springroll.Application"),a=include("springroll.EventDispatcher"),h=include("createjs.WebAudioPlugin"),l=include("createjs.CordovaAudioPlugin",!1),u=include("createjs.FlashAudioPlugin",!1),c=include("createjs.Sound"),d=include("springroll.Enum"),p=function(){s||(include("springroll.Debug",!1),r=include("springroll.SoundContext"),s=include("springroll.SoundInstance")),a.call(this),this._sounds={},this._fades=[],this._pool=[],this.supportedSound=null,this._contexts={},this._update=this._update.bind(this),this._markLoaded=this._markLoaded.bind(this),this._playAfterLoad=this._playAfterLoad.bind(this),this.isSupported=!0,this.systemMuted=createjs.BrowserDetect.isIOS,this.preventDefaultOnUnmute=!0},f=a.prototype,g=a.extend(p),v=null,m=new d("unloaded","loading","loaded");p.init=function(t,i){var r=o.instance.options;n(t)&&(t={ready:t});var s={plugins:u?[h,u]:[h],types:["ogg","mp3"],swfPath:"assets/swfs/",ready:null};if(t=Object.merge({},s,t),r.forceFlashAudio&&(t.plugins=[u]),l&&(r.forceNativeAudio||t.plugins.indexOf(l)>=0))try{(window.top?window.top.springroll.forceNativeAudio:window.springroll.forceNativeAudio)&&(t.plugins=[l])}catch(t){}if(t.ready=t.ready||i,!t.ready)throw"springroll.Sound.init requires a ready callback";if(u){var a=r.basePath;u.swfPath=(a||"")+t.swfPath}if(c.registerPlugins(t.plugins),createjs.BrowserDetect.isIOS&&c.activePlugin instanceof h&&"running"!=c.activePlugin.context.state?(document.addEventListener("touchstart",e),document.addEventListener("touchend",e),document.addEventListener("mousedown",e)):this.systemMuted=!1,v=new p,c.getCapabilities())v._initComplete(t.types,t.ready);else if(c.activePlugin){var d;d=function(){try{var e=window.plugins.NativeAudio||window.top.plugins.NativeAudio||null;e&&e.getCapabilities(function(e){e,o.instance.off("update",d),v._initComplete(t.types,t.ready)},function(t){t})}catch(t){}},o.instance.on("update",d)}else v.isSupported=!1,t.ready&&t.ready();return v},g._initComplete=function(t,e){if(u&&c.activePlugin instanceof u)v.supportedSound=".mp3";else for(var i,n=0,r=t.length;n<r;++n)if(i=t[n],c.getCapability(i)){v.supportedSound="."+i;break}this._fixAndroidAudio=createjs.BrowserDetect.isAndroid&&c.activePlugin instanceof h&&!(navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("Firefox")>-1),this._fixAndroidAudio&&(this._numPlayingAudio=0,this._lastAudioTime=Date.now()),e&&e()},Object.defineProperty(p,"instance",{get:function(){return v}}),g.addContext=function(t){if(t){for(var e,n=t.soundManifest||t.sounds||[],s=t.path||"",o=!0===t.preload||!1,a=t.context,h={},l=0,u=n.length;l<u;++l)i(e=n[l])&&(e={id:e}),(h=this._sounds[e.id]={id:e.id,src:s+(e.src?e.src:e.id)+this.supportedSound,volume:e.volume?e.volume:1,loop:!!e.loop,loadState:m.unloaded,playing:[],waitingToPlay:[],context:e.context||a,playAfterLoad:!1,preloadCallback:null,data:e,duration:0}).context&&(this._contexts[h.context]||(this._contexts[h.context]=new r(h.context)),this._contexts[h.context].sounds.push(h)),(o||!0===e.preload)&&this.preload(h.id);return this}},g.linkContexts=function(t,e){if(this._contexts[t]||(this._contexts[t]=new r(t)),t=this._contexts[t],Array.isArray(e))for(var i=0;i<e.length;++i)t.subContexts.indexOf(e[i])<0&&t.subContexts.push(e[i]);else t.subContexts.indexOf(e)<0&&t.subContexts.push(e)},g.exists=function(t){return!!this._sounds[t]},g.contextExists=function(t){return!!this._contexts[t]},g.isUnloaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==m.unloaded},g.isLoaded=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==m.loaded},g.isLoading=function(t){return!!this._sounds[t]&&this._sounds[t].loadState==m.loading},g.isPlaying=function(t){var e=this._sounds[t];return!!e&&e.playing.length+e.waitingToPlay.length>0},g.getDuration=function(t){var e=this._sounds[t];if(!e)return null;if(!e.duration&&e.loadState==m.loaded){var i=c.play(t,null,null,null,null,0);e.duration=i.getDuration(),i.stop()}return e.duration},g.fadeIn=function(t,e,n,r){var s,a;if(i(t)){if(!(s=this._sounds[t]))return;s.playing.length&&(a=s.playing[s.playing.length-1])}else a=t,s=this._sounds[a.alias];if(a&&a._channel){a._fTime=0,a._fDur=e>0?e:500,a._fEnd=n||a.curVol,a._fStop=!1;var h=r>0?r:0;a.volume=a._fStart=h,-1==this._fades.indexOf(a)&&(this._fades.push(a),1==this._fades.length&&o.instance.on("update",this._update))}},g.fadeOut=function(t,e,n,r,s){var a,h;if(i(t)){if(!(a=this._sounds[t]))return;if(a.playing.length)h=a.playing[a.playing.length-1];else if(f.loadState==m.loading)return void this.stop(t)}else h=t;h&&h._channel&&(h._fTime=0,h._fDur=e>0?e:500,r>0?(h.volume=r,h._fStart=r):h._fStart=h.volume,h._fEnd=n||0,s=void 0===s?0===h._fEnd:!!s,h._fStop=s,-1==this._fades.indexOf(h)&&(this._fades.push(h),1==this._fades.length&&o.instance.on("update",this._update)))},g._update=function(t){for(var e,i,n,r,s,a=this._fades,h=a.length-1;h>=0;--h)(e=a[h]).paused||((i=e._fTime+=t)>=e._fDur?e._fStop?((n=this._sounds[e.alias])&&n.playing.splice(n.playing.indexOf(e),1),this._stopInst(e)):(e.curVol=e._fEnd,e.updateVolume(),a.splice(h,1)):(r=i/e._fDur,s=e._fEnd>e._fStart?e._fStart+(e._fEnd-e._fStart)*r:e._fEnd+(e._fStart-e._fEnd)*r,e.curVol=s,e.updateVolume()));0===a.length&&o.instance.off("update",this._update)},g.play=function(e,i,r,s,o,a,h,l,u){var d;if(i&&n(i)&&(d=i,i=null),d=(i?i.complete:d)||null,r=(i?i.start:r)||null,s=!!(i?i.interrupt:s),o=(i?i.delay:o)||0,a=(i?i.offset:a)||0,h=i?i.loop:h,l=i?i.volume:l,u=(i?i.pan:u)||0,this.isSupported){!0===h&&(h=-1);var p=this._sounds[e];if(p){(p.loop&&void 0===h||null===h)&&(h=-1),l="number"==typeof l?l:p.volume;var f,g,v=p.loadState;if(v==m.loaded){this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(Date.now()-this._lastAudioTime>=3e4&&t(),this._numPlayingAudio=1,this._lastAudioTime=-1));var y=c.play(e,s,o,a,h,l,u);return y&&y.playState!=c.PLAY_FAILED?(f=this._getSoundInst(y,p.id),y.handleExtraData&&y.handleExtraData(p.data),f.curVol=l,f._pan=u,p.playing.push(f),f._endCallback=d,f.updateVolume(),f.length=y.getDuration(),p.duration||(p.duration=f.length),f._channel.addEventListener("complete",f._endFunc),r&&setTimeout(r,0),f):(d&&d(),null)}return v==m.unloaded?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=o,g[2]=a,g[3]=h):f._startParams=[s,o,a,h],this.preload(p.id),f):v==m.loading?(p.playAfterLoad=!0,(f=this._getSoundInst(null,p.id)).curVol=l,f._pan=u,p.waitingToPlay.push(f),f._endCallback=d,f._startFunc=r,f._startParams?((g=f._startParams)[0]=s,g[1]=o,g[2]=a,g[3]=h):f._startParams=[s,o,a,h],f):void 0}d&&d()}else d&&setTimeout(d,0)},g._getSoundInst=function(t,e){var i;return this._pool.length?i=this._pool.pop():(i=new s)._endFunc=this._onSoundComplete.bind(this,i),i._channel=t,i.alias=e,i.length=t?t.getDuration():0,i.isValid=!0,i},g._playAfterLoad=function(e){var n=i(e)?e:e.data.id,r=this._sounds[n];if(r.loadState=m.loaded,r.playAfterLoad){this._fixAndroidAudio&&this._lastAudioTime>0&&Date.now()-this._lastAudioTime>=3e4&&t();for(var s,o,a,h,l,u=r.waitingToPlay,d=0,p=u.length;d<p;++d)o=(s=u[d])._startParams,a=s.curVol,l=s._pan,(h=c.play(n,o[0],o[1],o[2],o[3],a,l))&&h.playState!=c.PLAY_FAILED?(this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(this._numPlayingAudio=1,this._lastAudioTime=-1)),r.playing.push(s),s._channel=h,h.handleExtraData&&h.handleExtraData(r.data),s.length=h.getDuration(),r.duration||(r.duration=s.length),s.updateVolume(),h.addEventListener("complete",s._endFunc),s._startFunc&&s._startFunc(),s.paused&&h.pause()):(s._endCallback&&s._endCallback(),this._poolInst(s));u.length=0}},g._onSoundComplete=function(t){if(t._channel){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc);var e=this._sounds[t.alias],i=e.playing.indexOf(t);i>-1&&e.playing.splice(i,1);var n=t._endCallback;this._poolInst(t),n&&n()}},g.stop=function(t){var e=this._sounds[t];if(e)if(e.playing.length)this._stopSound(e);else if(e.loadState==m.loading){e.playAfterLoad=!1;for(var i,n=e.waitingToPlay,r=0,s=n.length;r<s;++r)i=n[r],this._poolInst(i);n.length=0}},g._stopSound=function(t){for(var e=t.playing,i=e.length-1;i>=0;--i)this._stopInst(e[i]);e.length=0},g._stopInst=function(t){t._channel&&(!t.paused&&this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),t._channel.removeEventListener("complete",t._endFunc),t._channel.stop());var e=this._fades.indexOf(t);e>-1&&this._fades.splice(e,1),this._poolInst(t)},g.stopContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i)(e=n[i]).playing.length?this._stopSound(e):e.loadState==m.loading&&(e.playAfterLoad=!1);for(i=0;i<t.subContexts.length;++i)this.stopContext(t.subContexts[i])}},g.stopAll=function(){for(var t in this._sounds)this.stop(t)},g.pause=function(t,e){i(t)&&(t=this._sounds[t]),e=!!e;var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e);for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].paused||(r[n].pause(),r[n].globallyPaused=e)},g.resume=function(t,e){i(t)&&(t=this._sounds[t]);var n,r=t.playing;for(n=r.length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume();for(n=(r=t.waitingToPlay).length-1;n>=0;--n)r[n].globallyPaused==e&&r[n].resume()},g.pauseContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].pause();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].pause()}for(i=0;i<t.subContexts.length;++i)this.pauseContext(t.subContexts[i])}},g.resumeContext=function(t){if(t=this._contexts[t]){var e,i,n=t.sounds;for(i=n.length-1;i>=0;--i){var r;for(r=(e=n[i]).playing.length-1;r>=0;--r)e.playing[r].resume();for(r=e.waitingToPlay.length-1;r>=0;--r)e.waitingToPlay[r].resume()}for(i=0;i<t.subContexts.length;++i)this.resumeContext(t.subContexts[i])}},g.pauseAll=function(){var t=this._sounds;for(var e in t)this.pause(t[e],!0)},g.resumeAll=function(){var t=this._sounds;for(var e in t)this.resume(t[e],!0)},g._onInstancePaused=function(){this._fixAndroidAudio&&0==--this._numPlayingAudio&&(this._lastAudioTime=Date.now())},g._onInstanceResume=function(){this._fixAndroidAudio&&(this._lastAudioTime>0&&Date.now()-this._lastAudioTime>3e4&&t(),this._numPlayingAudio++,this._lastAudioTime=-1)},g.setContextMute=function(t,e){if(t=this._contexts[t]){t.muted=e;var i,n,r,s,o=t.volume,a=t.sounds;for(s=a.length-1;s>=0;--s)if((i=a[s]).playing.length)for(r=(n=i.playing).length-1;r>=0;--r)n[r].updateVolume(e?0:o);for(s=0;s<t.subContexts.length;++s)this.setContextMute(t.subContexts[s],e)}},Object.defineProperty(g,"muteAll",{set:function(t){c.setMute(!!t)}}),g.setContextVolume=function(t,e){if(t=this._contexts[t]){var i=t.muted;t.volume=e;for(var n,r,s,o=t.sounds,a=o.length-1;a>=0;--a)if((n=o[a]).playing.length)for(s=(r=n.playing).length-1;s>=0;--s)r[s].updateVolume(i?0:e)}},g.preload=function(t,e){if(this.isSupported)if(i(t)&&(t=[t]),t&&0!==t.length){for(var n,r=[],s=0,a=t.length;s<a;++s)(n=this._sounds[t[s]])&&n.loadState==m.unloaded&&(n.loadState=m.loading,r.push({id:n.id,src:n.src,complete:this._markLoaded,data:n,advanced:!0}));r.length>0?o.instance.load(r,e):e&&e()}else e&&e();else e&&setTimeout(e,0)},g._markLoaded=function(t){var e=t.data.id,i=this._sounds[e];i&&(i.loadState=m.loaded,i.playAfterLoad&&this._playAfterLoad(e));var n=i.preloadCallback;n&&(i.preloadCallback=null,n())},g.unload=function(t){if(t)for(var e,i=0,n=t.length;i<n;++i)(e=this._sounds[t[i]])&&(this._stopSound(e),e.loadState=m.unloaded),c.removeSound(e.src)},g.unloadAll=function(){var t=[];for(var e in this._sounds)t.push(e);this.unload(t)},g._poolInst=function(t){-1==this._pool.indexOf(t)&&(t._endCallback=t.alias=t._channel=t._startFunc=null,t.curVol=0,t.globallyPaused=t.paused=t.isValid=!1,this._pool.push(t))},g.destroy=function(){if(this.stopAll(),c.removeAllSounds(),u&&c.activePlugin instanceof u){var t=document.getElementById("SoundJSFlashContainer");t&&t.parentNode&&t.parentNode.removeChild(t)}v=null,this._sounds=null,this._volumes=null,this._fades=null,this._contexts=null,this._pool=null},namespace("springroll").Sound=p}(),function(){var t,e=include("springroll.Sound"),i=include("springroll.Application"),n=include("springroll.EventDispatcher"),r=function(){n.call(this),t||(t=include("springroll.Captions",!1)),this._onSoundFinished=this._onSoundFinished.bind(this),this._updateSilence=this._updateSilence.bind(this),this._updateSoloCaption=this._updateSoloCaption.bind(this),this._syncCaptionToSound=this._syncCaptionToSound.bind(this),this._listHelper=[],this.trackSound=!1,this.paused=!1,this.voList=null,this._listCounter=0,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=[],this._timer=0,this._captions=null},s=extend(r,n);Object.defineProperty(s,"playing",{get:function(){return null!==this._currentVO||this._timer>0}}),Object.defineProperty(s,"currentVO",{get:function(){return this._currentVO}}),Object.defineProperty(s,"captions",{set:function(t){this._captions=t,t&&(t.selfUpdate=!1)},get:function(){return this._captions}}),Object.defineProperty(s,"currentPosition",{get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}}),Object.defineProperty(s,"currentDuration",{get:function(){return this.playing?this._soundInstance?e.instance.getDuration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}),s.getElapsed=function(){var t,i,n=0;if(!this.voList)return 0;for(i=0;i<this._listCounter;++i)"string"==typeof(t=this.voList[i])?n+=e.instance.getDuration(t):"number"==typeof t&&(n+=t);return(i=this._listCounter)<this.voList.length&&("string"==typeof(t=this.voList[i])?n+=this._soundInstance.position:"number"==typeof t&&(n+=t-this._timer)),n},s.pause=function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]))},s.resume=function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.playing?this._soundInstance?i.instance.on("update",this._syncCaptionToSound):i.instance.on("update",this._updateSoloCaption):i.instance.on("update",this._updateSilence))},s.play=function(t,e,i){this.stop(),this.playing&&this.stop(),this._listCounter=-1,"string"==typeof t?(this._listHelper.length=0,this._listHelper[0]=t,this.voList=this._listHelper):this.voList=t,this._callback=e,this._cancelledCallback=!0===i?e:i,this._onSoundFinished()},s._onSoundFinished=function(){if(this._listCounter>=0&&this.trigger("end",this._currentVO),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this._captions&&this._soundInstance&&this._captions.seek(this._soundInstance.length),this._soundInstance=null,++this._listCounter>=this.voList.length){this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null;var t=this._callback;this._callback=null,t&&t()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,i.instance.on("update",this._updateSilence),this.trigger("start",null))},s._updateSilence=function(t){this._timer-=t,this._timer<=0&&this._onSoundFinished()},s._updateSoloCaption=function(t){this._timer+=t,this._captions.seek(this._timer),this._timer>=this._captions.currentDuration&&this._onSoundFinished()},s._syncCaptionToSound=function(t){this._soundInstance&&this._captions.seek(this._soundInstance.position)},s._playSound=function(){this.trackSound&&-1==this._trackedSounds.indexOf(this._currentVO)&&this._trackedSounds.push(this._currentVO);var t=e.instance;!t.exists(this._currentVO)&&this._captions&&this._captions.hasCaption(this._currentVO)?(this._captions.play(this._currentVO),this._timer=0,i.instance.on("update",this._updateSoloCaption)):(this._soundInstance=t.play(this._currentVO,this._onSoundFinished),this._captions&&(this._captions.play(this._currentVO),i.instance.on("update",this._syncCaptionToSound)));for(var n,r=this.voList.length,s=this._listCounter+1;s<r;++s)if("string"==typeof(n=this.voList[s])){t.exists(n)&&!t.isLoaded(n)&&t.preload(n);break}},s.stop=function(){this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.stop(),i.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this.voList=null,this._timer=0,this._callback=null;var t=this._cancelledCallback;this._cancelledCallback=null,t&&t()},s.unloadSound=function(){e.instance.unload(this._trackedSounds),this._trackedSounds.length=0},s.destroy=function(){this.stop(),this.voList=null,this._listHelper=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=null,this._captions=null,n.prototype.destroy.call(this)},namespace("springroll").VOPlayer=r,namespace("springroll").Sound.VOPlayer=r}(),function(){var t=include("springroll.ApplicationPlugin"),e=include("springroll.Sound"),i=include("springroll.VOPlayer"),n=include("createjs.WebAudioPlugin"),r=include("createjs.FlashAudioPlugin",!1),s=new t(90);s.setup=function(){this.options.add("audioPlugins",r?[n,r]:[n],!0),this.options.add("swfPath","assets/swfs/",!0),this.options.add("forceFlashAudio",!1,!0),this.options.add("forceNativeAudio",!1,!0),this.options.add("audioTypes",["ogg","mp3"],!0),this._music=null,this._musicInstance=null,this.voPlayer=new i,this.sound=null,this.assetManager.register("springroll.SoundTask"),Object.defineProperty(this,"music",{set:function(t){if(t!=this._music){var e=this.sound;this._music&&(e.fadeOut(this._music),this._musicInstance=null),this._music=t,t&&(this._musicInstance=e.play(this._music,{start:e.fadeIn.bind(e,t),loop:-1}))}},get:function(){return this._music}}),Object.defineProperty(this,"musicInstance",{get:function(){return this._musicInstance}}),this.once("configLoaded",function(t){var e=t.sounds,i=this.sound;e&&(e.vo&&i.addContext(e.vo),e.sfx&&i.addContext(e.sfx),e.music&&i.addContext(e.music))})},s.preload=function(t){e.init({plugins:this.options.audioPlugins,swfPath:this.options.swfPath,types:this.options.audioTypes,ready:function(){if(!this.destroyed){var i=this.sound=e.instance;this.on({paused:function(){i.pauseAll()},resumed:function(){i.resumeAll()}}),this.trigger("soundReady"),t()}}.bind(this)})},s.teardown=function(){this.voPlayer&&(this.voPlayer.destroy(),this.voPlayer=null),this.sound&&(this.sound.destroy(),this.sound=null)}}(),function(){var t=include("springroll.Sound"),e=include("springroll.SoundInstance"),i=include("springroll.VOPlayer"),n=t.prototype;Object.defineProperty(n,"soundEnabled",{get:function(){return this.isSupported}}),n.loadConfig=function(t){return this.addContext(t)},n.preloadSound=function(t,e){this.preload(t,e)},n.unpauseAll=function(){this.resumeAll()},n.unpauseSound=function(t){this.resume(t)},n.pauseSound=function(t){this.pause(t)},(n=e.prototype).unpause=function(){this.resume()},n=i.prototype,Object.defineProperty(n,"soundList",{get:function(){return this.voList}})}()}(),function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e,i){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&s(r,i.prototype),r}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return o(t,arguments,r(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),s(n,t)})(t)}function h(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}var l=function(e){function s(){return t(this,s),h(this,r(s).apply(this,arguments))}return n(s,a(Error)),i(s,[{key:"serialize",value:function(){return{type:"error",data:this.constructor.name,message:this.message}}}]),s}(),u=function(e){function i(){return t(this,i),h(this,r(i).apply(this,arguments))}return n(i,l),i}(),c=function(e){function i(){return t(this,i),h(this,r(i).apply(this,arguments))}return n(i,l),i}(),d=function(e){function i(){return t(this,i),h(this,r(i).apply(this,arguments))}return n(i,l),i}(),p=function(t){return"OfflineError"===t.data?new u(t.message):"UnnavigableGameError"===t.data?new c(t.message):"DownloadFailedError"===t.data?new d(t.message):void 0},f=function(){function e(){t(this,e),this.listeners=[]}return i(e,[{key:"send",value:function(t,e){e.send("navigate",{slug:t}),e.on("navigationStatus",this.sendNavigationStatus.bind(this))}},{key:"subscribe",value:function(t){this.listeners.push(t)}},{key:"sendNavigationStatus",value:function(t){var e=t.data;"error"===t.data.type&&(e={type:"error",data:p(t.data)});for(var i=0;i<this.listeners.length;i++)this.listeners[i](e)}}]),e}();function g(t){return void 0===(t=Object.assign({timeout:1e3,sendData:{}},t)).client?Promise.reject(new Error("No Bellhop client provided to attemptBellhopWait")):void 0===t.sendMessage?Promise.reject(new Error("No sendMessage value provided to attemptBellhopWait")):void 0===t.receiveMessage?Promise.reject(new Error("No receiveMessage value provided to attemptBellhopWait")):t.client.connected?new Promise(function(e,i){var n=!1;setTimeout(function(){n||(t.client.off(t.receiveMessage),n=!0,i(new Error("Timeout waiting for message from container")))},t.timeout);t.client.on(t.receiveMessage,function(i){n||(t.client.off(t.receiveMessage),n=!0,e(i.data))}),t.client.send(t.sendMessage,t.sendData)}):Promise.reject(new Error("Client is not connected"))}var v=function(){function e(i){t(this,e),this.application=i}return i(e,[{key:"navigate",value:function(t){if(this.application.container.connected){var e=new f;return e.send(t,this.application.container),e}console.warn("Application is not connected to a container. Cannot open ".concat(t))}},{key:"getDownloadStatus",value:function(){return g({client:this.application.container,sendMessage:"getDownloadStatus",receiveMessage:"downloadStatus"})}},{key:"attemptDownload",value:function(t){return g({client:this.application.container,sendMessage:"attemptDownload",sendData:{slug:t},receiveMessage:"attemptDownload"}).then(function(t){if("error"===t.data.type)throw p(t.data);return t})}},{key:"attemptAllDownloads",value:function(){return g({client:this.application.container,sendMessage:"attemptAllDownloads",receiveMessage:"attemptAllDownloads"}).then(function(t){if("error"===t.data.type)throw p(t.data);return t})}}]),e}();new(function(){function e(){t(this,e),springroll.ApplicationPlugin.call(this),this.setup=e.prototype.setup,this.teardown=e.prototype.teardown}return i(e,[{key:"setup",value:function(){var t=springroll.Application.instance;t.router=new v(t)}},{key:"teardown",value:function(){delete springroll.Application.instance.router}}]),e}())}(),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t){var e=this.constructor;return this.then(function(i){return e.resolve(t()).then(function(){return i})},function(i){return e.resolve(t()).then(function(){return e.reject(i)})})}function e(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(t,this)}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var n;try{n=i(t._value)}catch(t){return void s(e.promise,t)}r(e.promise,n)}else(1===t._state?r:s)(e.promise,t._value)})):t._deferreds.push(e)}function r(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void o(t);if("function"==typeof n)return void a(function(t,e){return function(){t.apply(e,arguments)}}(n,e),t)}t._state=1,t._value=e,o(t)}catch(e){s(t,e)}}function s(t,e){t._state=2,t._value=e,o(t)}function o(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;r>e;e++)n(t,t._deferreds[e]);t._deferreds=null}function a(t,e){var i=!1;try{t(function(t){i||(i=!0,r(e,t))},function(t){i||(i=!0,s(e,t))})}catch(t){if(i)return;i=!0,s(e,t)}}var h=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,i){var r=new this.constructor(e);return n(this,new function(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}(t,i,r)),r},i.prototype.finally=t,i.all=function(t){return new i(function(e,i){function n(t,o){try{if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,function(e){n(t,e)},i)}r[t]=o,0==--s&&e(r)}catch(t){i(t)}}if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);for(var s=r.length,o=0;r.length>o;o++)n(o,r[o])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,i){i(t)})},i.race=function(t){return new i(function(e,i){for(var n=0,r=t.length;r>n;n++)t[n].then(e,i)})},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){h(t,0)},i._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var l=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"Promise"in l?l.Promise.prototype.finally||(l.Promise.prototype.finally=t):l.Promise=i}),this.PBS=this.PBS||{},this.PBS.KIDS=function(t){"use strict";function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name="GoogleAnalytics",this.panel=document.createElement("div"),this.logs=document.createElement("div")}var i,n;return i=t,(n=[{key:"preload",value:function(){return Promise.resolve()}},{key:"init",value:function(){}},{key:"start",value:function(t){this.app=t,this.loggingPanel=t.getPlugin("LoggingPanel"),void 0!==this.loggingPanel&&(this.render=this.loggingPanel.addPanel({name:"Google Analytics"}),this.logs.className="container",this.logs.style.overflowY="scroll",this.logs.style.maxHeight="80vh",this.panel.appendChild(this.logs),this.render(this.panel))}},{key:"render",value:function(t){}},{key:"getFormattedDate",value:function(){var t=new Date,e=t.getHours()+":",i=t.getMinutes();e+=i<10?"0".concat(i):i,e+=":";var n=t.getSeconds();return e+(n<10?"0".concat(n):n)}},{key:"event",value:function(t,e,i,n){var r={hitType:"event"};void 0!==t&&(r.eventCategory=t),void 0!==e&&(r.eventAction=e),void 0!==i&&(r.eventLabel=i),void 0!==n&&(r.eventValue=n),this.app.container.connected&&this.app.container.send("googleAnalyticsEvent",r),this.renderRecord("Event",[t,e,i,n])}},{key:"renderRecord",value:function(t,e){if(void 0!==this.loggingPanel){var i=document.createElement("div");i.className="container";var n=document.createElement("div");n.className="bg-dkblue container";var r=document.createElement("div");r.className="half-width bold",r.innerText=t.toUpperCase(),n.appendChild(r);var s=document.createElement("div");s.innerText=this.getFormattedDate(),s.className="half-width bold",n.appendChild(s);var o=document.createElement("div");o.className="clear--both",n.appendChild(o),i.appendChild(n);var a=document.createElement("div");a.className="bg-blue full-width container",a.style.textAlign="center",a.innerText=e.filter(function(t){return void 0!==t}).join("  "),i.appendChild(a);var h=document.createElement("div");h.className="clear--both",i.appendChild(h),this.logs.insertBefore(i,this.logs.firstChild),this.render(this.panel)}}}])&&e(i.prototype,n),t}(),n=new springroll.ApplicationPlugin;return n.setup=function(){var t=this;t.googleAnalytics=new i,t.getPlugin=function(){return t.loggingPanel},t.googleAnalytics.start(t)},t.default=n,t.plugin=n,t}({}),function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e,i){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var r=new(Function.bind.apply(t,n));return i&&o(r,i.prototype),r}).apply(null,arguments)}function h(t){var e="function"==typeof Map?new Map:void 0;return(h=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return a(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)})(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}var c=function(){function t(){e(this,t),this._listeners={}}return n(t,[{key:"trigger",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};void 0!==this._listeners[t]&&this._listeners[t].forEach(function(t){return t(e)})}},{key:"once",value:function(t,e){var i=this;return this.on(t,function n(r){e(r),i.off(t,n)})}},{key:"on",value:function(t,e){Array.isArray(this._listeners[t])||(this._listeners[t]=[]),this._listeners[t].push(e)}},{key:"off",value:function(t,e){if(void 0!==this._listeners[t]){var i=this._listeners[t].indexOf(e);-1!==i&&this._listeners[t].splice(i,1)}}},{key:"has",value:function(t,e){return Array.isArray(this._listeners[t])&&this._listeners[t].indexOf(e)>-1}}]),t}(),d=function(t){var e=t.toString(16).toUpperCase();return e.length<2&&(e="0"+e),e};var p=function(t){function i(){return e(this,i),u(this,s(i).apply(this,arguments))}return r(i,h(Error)),n(i,[{key:"toString",value:function(){return this.message}}]),i}(),f=function(t){function i(t,n,r){var o;return e(this,i),(o=u(this,s(i).call(this,t))).event=n,o.signature=r,o}return r(i,p),i}(),g=function(t){function i(t,n,r){var o;e(this,i);var a=t.map(function(t){return t.message}).join("");return(o=u(this,s(i).call(this,a,n,r))).validationErrors=t,o}return r(i,f),i}();function v(t,e){var i=document.createElement("div");i.classList.add("accordion-trigger","closed"),t instanceof HTMLElement?i.appendChild(t):i.innerHTML=t;var n=document.createElement("div");n.classList.add("accordion-content","closed"),e instanceof HTMLElement?n.appendChild(e):n.innerHTML=e,i.addEventListener("click",function(){i.classList.toggle("closed"),n.classList.toggle("closed")});var r=document.createElement("div");return r.classList.add("accordion"),r.appendChild(i),r.appendChild(n),r}function m(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'\n  <header class="pbs-font bold event-header '.concat(i," event-").concat(t,'">\n    <div class="third-width code">').concat(t,'</div>\n    <div class="event-name">\n      ').concat(e,'\n      <span class="arrow reversed"></span>\n    </div>\n  </header> \n  ')}function y(t,e,i){var n=v(m(e,i.events[e],"disabled"),'<p class="event-data">'.concat(t.events[e].info,"</p>")),r=function(t){for(var e,i="",n=0;n<t.length;n++)i+=(e=t[n],'\n  <div class="spec-argument">\n    <div class="parameter-specification">\n      <span class="parameter-name">'.concat(e.name,'</span>\n      <span class="parameter-type text-blue">: ').concat(e.type,'</span>\n    </div>\n    <p class="parameter-description">').concat(e.info,"</p>\n  </div>\n  "));return v('\n  <div class="argument-view bg-teal">\n    <span class="arrow"></span>\n    View Arguments\n  </div>\n  ',i)}(t.events[e].args);return n.querySelector(".accordion-content").appendChild(r),n}function _(t,e,i){var n='\n  <div class="argument-view">\n    <span class="arrow"></span>\n    '.concat(t.name,"\n  </div>"),r=[{label:"Info",value:t.info},{label:"Type",value:t.type},{label:"Value",value:e}];void 0!==i&&r.unshift({label:"Error",value:i});var s=r.map(function(t){var i;return t.value instanceof Object||t.value instanceof Array?(t.value='<pre class="is-json-data">'+JSON.stringify(e,null,2)+"</pre>",i="<dt>".concat(t.label,' :</dt><dd class="is-json">').concat(t.value,"</dd>")):i="<dt>".concat(t.label," :</dt><dd>").concat(t.value,"</dd>"),i});return v(n,'<dl class="element-data">'.concat(s.join(""),"</dl>"))}var b=function(){function t(i,n){var r=this;if(e(this,t),!n){var s="Cannot create analytics logging panel. Logging Panel plugin has not been included. See ".concat("https://projects.pbs.org/bitbucket/projects/SD/repos/springroll-logging-panel-plugin/browse");throw new Error(s)}this.analyticsEmitter=i,this.loggingPanel=n,this.onLearningEvent=this.onLearningEvent.bind(this),this.analyticsEmitter.on("learningEvent",this.onLearningEvent),this.onLearningError=this.onLearningError.bind(this),this.analyticsEmitter.on("learningError",this.onLearningError),this.specTab=document.createElement("div"),this.specTab.id="learning-spec",this.eventsTab=document.createElement("div"),this.eventsTab.id="learning-events";var o=this.loggingPanel.addPanel("Learning Spec"),a=this.loggingPanel.addPanel("LearningEvents");this.render=function(){o(r.specTab),a(r.eventsTab)},i.spec?this.onSpecInitialized():(this.onSpecInitialized=this.onSpecInitialized.bind(this),this.analyticsEmitter.on("learningSpecInitialized",this.onSpecInitialized))}return n(t,[{key:"onLearningEvent",value:function(t){this.setSpecHeaderState(t.event_data.event_code);var e=this.analyticsEmitter,i=function(t,e,i){var n=e.event_data.event_code,r=m(n,i.events[n]),s=document.createElement("div");return t.events[n].args.forEach(function(t){var i=_(t,e.event_data[t.name]);s.appendChild(i)}),v(r,s)}(e.spec,t,e.catalog);this.eventsTab.insertBefore(i,this.eventsTab.firstChild),this.render()}},{key:"onLearningError",value:function(t){t instanceof f&&this.setSpecHeaderState(t.signature.eventCode,"error"),t instanceof p&&console.log(t.toString());var e=this.analyticsEmitter,i=function(t,e,i){var n=e.signature.eventCode,r=m(n,i.events[n],"error"),s=document.createElement("div");return t.events[n].args.forEach(function(t,i){var n=_(t,e.event[i]);s.appendChild(n)}),v(r,s)}(e.spec,t,e.catalog);this.eventsTab.insertBefore(i,this.eventsTab.firstChild),this.render()}},{key:"onSpecInitialized",value:function(t){for(var e=this.analyticsEmitter.catalog,i=this.analyticsEmitter.spec,n=Object.keys(i.events),r=0;r<n.length;r++){var s=y(i,n[r],e);this.specTab.appendChild(s)}this.render()}},{key:"setSpecHeaderState",value:function(t,e){var i=this.specTab.querySelector(".event-header.event-".concat(t));null!==i&&(i.classList.remove("disabled","error"),void 0!==e&&i.classList.add(e),this.render())}}]),t}(),w=function(){this.events=Object.assign({},T)},x=w.prototype,T={2000:"startGame",2010:"endGame",2020:"startRound",2030:"endRound",2040:"startLevel",2050:"endLevel",2060:"startTutorial",2070:"endTutorial",2075:"skipTutorial",2080:"startMovie",2081:"skipMovie",2083:"endMovie",3010:"startInstruction",3110:"endInstruction",3020:"startIncorrectFeedback",3120:"endIncorrectFeedback",3021:"startCorrectFeedback",3121:"endCorrectFeedback",4010:"clickPlay",4020:"selectAnswer",4030:"startDrag",4035:"endDragOutside",4070:"offClick",4080:"dwellTime",4090:"clickHelp",4095:"clickReplay",4100:"submitAnswer"};w.globals=["game_time","level","round","event_count"],x.lookup=function(t){for(var e in this.events)if(t===this.events[e])return e;return null},x.add=function(t){for(var e in t){if(void 0!==this.events[e])throw new p("Cannot override the existing event code "+e);this.events[e]=t[e]}};var E=[{name:"description",type:"string",info:"The text or description of the instruction"},{name:"identifier",type:"string",info:"A unique identifier for this piece of instruction"},{name:"media_type",type:["audio","animation","other"],info:"The type of media that has just played"},{name:"total_duration",type:"int",info:"The estimated duration of the media playback in milliseconds (if it ran uninterrupted)"}];w.args={3010:E,3020:E,3021:E,2080:[{name:"movie_id",type:"string",info:"The identifier for the movie that was playing"},{name:"duration",type:"int",info:"The duration of the media playback in milliseconds"},{name:"description",type:"string",info:"The text or description of the instruction"}],4010:[{name:"coordinates",type:"object",info:"the game screen coordinates of the click dictionary: {'x': integer, 'y': integer, 'stage_width': integer, 'stage_height': integer}"}]},x.destroy=function(){this.events=null};var S=function(t,e,i,n,r){this.eventCode=t,this.api=e,this.args=i||null,this.eventArgs=n||null,this.info=r||null},A=S.prototype;function P(e,i){for(var n=e.args||e.eventArgs,r={},s=[],o=0,a=0,h=function(e,h){var l=n[e];if(-1!==w.globals.indexOf(l.name))return"continue";a++;var u=i[l.name];if(void 0===u)s.push({property:l.name,message:"No value found for argument ".concat(l.name)});else{var c=function e(i,n,r,s){if(void 0===n||null===n)return["Supplied value ".concat(n," is empty")];if("*"===i)return[];if("string"===i&&t(n)!==i||"int"===i&&parseInt(n)!==n||"number"===i&&parseFloat(n)!==n||"array"===i&&!Array.isArray(n)||"boolean"===i&&t(n)!==i||"object"===i&&t(n)!==i)return["".concat(n," is not a valid ").concat(i)];var o;var a;if(/^array->(int|boolean|string|number|array|object)$/.test(i)){if(!Array.isArray(n))return["".concat(n," is not an ").concat(i)];var h=i.replace("array->",""),l=[];for(o=0,a=n.length;o<a;o++)l=l.concat(e(h,n[o],r,s));return l}if(Array.isArray(i)&&-1===i.indexOf(n))return["".concat(n," is not valid in set ").concat(i)];if("object"===i&&r){for(var u=[],c=0;c<r.length;c++){var d=r[c];u=u.concat(e(d.type,n[d.name],d.args,s+"."+d.name))}return u}return[]}(l.type,u,l.args||null,l.name);c.length>0?c.forEach(function(t){s.push({property:l.name,message:t})}):o++}r[l.name]=u},l=0,u=n.length;l<u;l++)h(l);if(a!==o){var c="Arguments length doesn't match API. Expected ".concat(e.args.length," but got ").concat(o);s.push({message:c})}if(s.length)throw new g(s,i,e);return r}A.hasProperty=function(t,e){var i=e?this.eventArgs:this.args;if(!i||!i.length)return!1;for(var n=0,r=i.length;n<r;n++)if(t===i[n].name)return!0;return!1},A._format=function(t,e){var i="";if(e=e||"\t",t&&t.length){var n;i+="\n";for(var r=t.length,s=0;s<r;s++){i+=e+(n=t[s]).name+":";var o=n.type;Array.isArray(o)?i+="["+o.join(", ")+"]":i+=o,n.args&&(i+=" {",i+=this._format(n.args,e+"\t"),i+="\n"+e+"}"),s<r-1&&(i+=","),i+="\n"}}return i},A.toString=function(){return this.api+" ("+this._format(this.args)+")"};var M=function(t){function i(){var t;e(this,i),(t=u(this,s(i).call(this))).throwErrors=!1,t.catalog=new w,t._timers={},t.spec=null,t._movie=null,t._history=[],t.sessionId=null,t.resetSessionId(),t._level=null,t._round=null;var n=performance.now(),r=function(t){var e=t-n;this.updateTimers(e),n=t,this.destroyed||requestAnimationFrame(r)}.bind(l(l(t)));return requestAnimationFrame(r),t.on(C,t._onCalled.bind(l(l(t)))),t}return r(i,c),n(i,[{key:"enableLogging",value:function(){if(void 0===this.panel){var t=springroll.Application.instance;void 0!==t.loggingPanel?this.panel=new b(this,t.loggingPanel):console.warn("Logging panel plugin not configured. Bailing")}else console.warn("Logging panel already setup")}}]),i}(),C="called",I=M.prototype;I._handleError=function(t){if(this.trigger("learningError",t),M.throwErrors)throw t},I.addMap=function(t){if(t)try{this.catalog.add(t)}catch(t){this._handleError(t)}},I.updateTimers=function(t){for(var e in this._timers)this._timers[e]+=t},Object.defineProperty(I,"spec",{get:function(){return this._spec},set:function(t){if(this._spec=t,t){var e,i,n,r;for(r in t.events){(e=this.catalog.events[r])||(e="event"+r,this.catalog.events[r]=e),n=t.events[r],void 0===this[e]?(this[e]=this._specTrack.bind(this,e),i=n.args):i=w.args[r];var s=new S(r,e,i,n.args,n.info,n.endpoint);this[e].signature=s}this.trigger("learningSpecInitialized",this)}}}),I.setCustomFunctions=function(){if(this.custom)for(var t in this.custom)this[t]=this.custom[t]},I.startTimer=function(t){void 0===this._timers[t]?this._timers[t]=0:this._handleError("Timer exists matching '"+t+"', call stopTimer first")},I.pollTimer=function(t){if(void 0!==this._timers[t])return 0|this._timers[t];this._handleError("Timer doesn't exist matching '"+t+"'")},I.gameTime=function(){return this.pollTimer("_game")},I.stopTimer=function(t){var e=this.pollTimer(t);return this.removeTimer(t),e},I.removeTimer=function(t){void 0!==this._timers[t]&&delete this._timers[t]},I.resetSessionId=function(){this.sessionId=function(){var t=new Uint8Array(16);(window.crypto||window.msCrypto).getRandomValues(t),t[6]=64+(15&t[6]),t[8]=128+(63&t[8]);for(var e=[],i=0;i<t.length;i++)e.push(d(t[i]));return e[0]+e[1]+e[2]+e[3]+"-"+e[4]+e[5]+"-"+e[6]+e[7]+"-"+e[8]+e[9]+"-"+e[10]+e[11]+e[12]+e[13]+e[14]+e[15]}()},I._startMovie=function(t){this._movie?this._handleError("Movie is already started called skipMovie or endMovie first"):(this._movie=t,this.startTimer("_movie"),this._track("startMovie",this._movie))},I._skipMovie=function(){if(this.requires&&this.requires("startMovie")){var t=this._movie;t?(t.time_played=this.stopTimer("_movie"),this._movie=null,this._track("skipMovie",t)):this._handleError("No movie started, call startMovie first")}},I._endMovie=function(){if(this.requires&&this.requires("startMovie"))if(this._movie){this.removeTimer("_movie");var t=this._movie;this._movie=null,this._track("endMovie",t)}else this._handleError("No movie started, call startMovie first")},I.startMovie=I._startMovie,I.skipMovie=I._skipMovie,I.endMovie=I._endMovie,I._onCalled=function(t){},I._specTrack=function(t){var e=this[t].signature,i=Array.prototype.slice.call(arguments,1),n=function(t,e){var i,n,r=[],s={};for(i=0;i<t.length;i++)n=t[i],-1===w.globals.indexOf(n.name)&&r.push(n);for(i=0;i<r.length;i++)s[(n=r[i]).name]=e.shift();return s}(e.args,i);this._track(t,n)},I._track=function(t,e,i){if("startRound"===t&&null!==this._round)this._round++;else if("startLevel"===t&&null!==this._level)this._level++;else if("startGame"==t){var n=this.startGame.signature;if(!n)return void this._handleError("startGame: signature is undefined");n.hasProperty("round",!0)&&(this._round=0),n.hasProperty("level",!0)&&(this._level=0),this._history.length=0,this._history.push("startGame"),this.startTimer("_game")}else"endGame"==t&&(this._history.length=0);if(this.requires&&this.requires("startGame")){var r=this.catalog.lookup(t),s=this._spec.events[r],o=this[t].signature,a=null;if(void 0!==s){try{a=P(o,e)}catch(t){return void this._handleError(t)}this.trigger(C,t),null!==this._level&&(a.level=this._level),void 0!==i&&null!==i?a.round=i:null!==this._round&&(a.round=this._round),this._eventCounter=this._eventCounter||0,this._eventCounter++,a.event_count=this._eventCounter,a.game_time=this.gameTime(),a.event_code=parseInt(r),this._history.push(t),this.trigger(t,a),this.trigger("learningEvent",{game_id:this._spec.gameId,event_id:s.id,version:this._spec.version,game_session:this.sessionId,timestamp:(new Date).getTime(),event_data:a})}else this._handleError(new f("Supplied event code is invalid",r,t))}},I.requires=function(t){return-1!==this._history.indexOf(t)||(this._handleError(new Error("Learning API '"+t+"' needs to be called first")),!1)},I.destroy=function(){this.destroyed=!0,this.catalog&&(this.catalog.destroy(),this.catalog=null),this.off(C),this._timers=null,this._spec=null,this._history=null,this._movie=null};var O=function(){function t(){e(this,t),springroll.ApplicationPlugin.call(this,10),this.setup=t.prototype.setup,this.teardown=t.prototype.teardown}return n(t,[{key:"setup",value:function(){this.analyticsEmitter=new M(!0),this.once("configLoaded",function(t){t.spec&&(this.analyticsEmitter.addMap(t.specDictionary||null),this.analyticsEmitter.spec=t.spec)}),this.analyticsEmitter.on("learningEvent",function(t){t.play_options=this.playOptions,this.container&&this.container.send("learningEvent",t),this.trigger("learningEvent",t)}.bind(this))}},{key:"teardown",value:function(){this.analyticsEmitter&&(this.analyticsEmitter.destroy(),this.analyticsEmitter=null)}}]),t}();!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}('@charset "UTF-8";\n.logging-panel .accordion .accordion-trigger {\n  cursor: pointer; }\n  .logging-panel .accordion .accordion-trigger.closed .arrow:before {\n    content: ""; }\n  .logging-panel .accordion .accordion-trigger.closed .arrow.reversed:before {\n    content: ""; }\n  .logging-panel .accordion .accordion-trigger .arrow:before {\n    content: ""; }\n\n.logging-panel .accordion .accordion-content.closed {\n  display: none; }\n\n#learning-spec header.event-header, #learning-events header.event-header {\n  font-size: 1.2em;\n  color: white; }\n  #learning-spec header.event-header .code, #learning-spec header.event-header .event-name, #learning-events header.event-header .code, #learning-events header.event-header .event-name {\n    padding: 0.5em;\n    text-align: center; }\n  #learning-spec header.event-header .code, #learning-events header.event-header .code {\n    background-color: #66a743; }\n  #learning-spec header.event-header .event-name, #learning-events header.event-header .event-name {\n    background-color: #9bcb3c; }\n  #learning-spec header.event-header .event-name .arrow, #learning-events header.event-header .event-name .arrow {\n    float: right; }\n\n#learning-spec header.event-header.disabled .code, #learning-events header.event-header.disabled .code {\n  background-color: #71818e; }\n\n#learning-spec header.event-header.disabled .event-name, #learning-events header.event-header.disabled .event-name {\n  background-color: #b5b5b6; }\n\n#learning-spec header.event-header.error .code, #learning-events header.event-header.error .code {\n  background-color: #b31e56; }\n\n#learning-spec header.event-header.error .event-name, #learning-events header.event-header.error .event-name {\n  background-color: #c94a7d; }\n\n#learning-spec div.argument-view, #learning-events div.argument-view {\n  padding: 0.5em;\n  background-color: #c5e3ea;\n  font-style: italic;\n  color: black; }\n  #learning-spec div.argument-view .arrow, #learning-events div.argument-view .arrow {\n    font-style: initial;\n    color: #0a6ab2; }\n\n.logging-container#learning-spec p.event-data {\n  margin: 0.75em;\n  font-size: 13px; }\n\n.logging-container#learning-spec div.argument-view {\n  text-transform: uppercase; }\n\n.logging-container#learning-spec div.spec-argument {\n  padding: 0.5em 1em;\n  background-color: #ddf2f8; }\n  .logging-container#learning-spec div.spec-argument p.parameter-description {\n    margin: 0.5em 0 0 0; }\n\n#learning-events dl.element-data {\n  padding-left: 5px; }\n\n#learning-events dd.is-json {\n  margin: 0; }\n  #learning-events dd.is-json pre.is-json-data {\n    padding-left: 40px;\n    margin: 0;\n    max-height: 75vh; }\n'),new O}(),this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n)for(var r in i[(e+="_")+"constructor"]=n.constructor,n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r]);return t},this.createjs=this.createjs||{},createjs.deprecate=function(t,e){"use strict";return function(){var i="Deprecated property or method '"+e+"'. See docs for info.";return console&&(console.warn?console.warn(i):console.log(i)),t&&t.apply(this,arguments)}},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n,r=(n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{})[t];return r&&this.removeEventListener(t,e,i),(r=n[t])?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,o=r.length;o>s;s++)if(r[s]==e){1==o?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t,e,i){if("string"==typeof t){var n=this._listeners;if(!(e||n&&n[t]))return!0;t=new createjs.Event(t,e,i)}else t.target&&t.clone&&(t=t.clone());try{t.target=this}catch(t){}if(t.bubbles&&this.parent){for(var r=this,s=[r];r.parent;)s.push(r=r.parent);var o,a=s.length;for(o=a-1;o>=0&&!t.propagationStopped;o--)s[o]._dispatchEvent(t,1+(0==o));for(o=1;a>o&&!t.propagationStopped;o++)s[o]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return!t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n,r=2>=e?this._captureListeners:this._listeners;if(t&&r&&(n=r[t.type])&&(i=n.length)){try{t.currentTarget=this}catch(t){}try{t.eventPhase=0|e}catch(t){}t.removed=!1,n=n.slice();for(var s=0;i>s&&!t.immediatePropagationStopped;s++){var o=n[s];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}2===e&&this._dispatchEvent(t,2.1)},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t._setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.setInterval=createjs.deprecate(t._setInterval,"Ticker.setInterval"),t._getInterval=function(){return t._interval},t.getInterval=createjs.deprecate(t._getInterval,"Ticker.getInterval"),t._setFPS=function(e){t._setInterval(1e3/e)},t.setFPS=createjs.deprecate(t._setFPS,"Ticker.setFPS"),t._getFPS=function(){return 1e3/t._interval},t.getFPS=createjs.deprecate(t._getFPS,"Ticker.getFPS");try{Object.defineProperties(t,{interval:{get:t._getInterval,set:t._setInterval},framerate:{get:t._getFPS,set:t._setFPS}})}catch(t){console.log(t)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=t._pausedTime=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t._getFPS());for(var r=0;e>r;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t._getFPS()),1e3/((i[0]-i[e])/e))},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId){var e=t.timingMode;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e&&(t._pausedTicks++,t._pausedTime+=n),t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var e=window,i=e.performance.now||e.performance.mozNow||e.performance.msNow||e.performance.oNow||e.performance.webkitNow;t._getTime=function(){return(i&&i.call(e.performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.loop=0,this.useTicks=!1,this.reversed=!1,this.bounce=!1,this.timeScale=1,this.duration=0,this.position=0,this.rawPosition=-1,this._paused=!0,this._next=null,this._prev=null,this._parent=null,this._labels=null,this._labelList=null,t&&(this.useTicks=!!t.useTicks,this.ignoreGlobalPause=!!t.ignoreGlobalPause,this.loop=!0===t.loop?-1:t.loop||0,this.reversed=!!t.reversed,this.bounce=!!t.bounce,this.timeScale=t.timeScale||1,t.onChange&&this.addEventListener("change",t.onChange),t.onComplete&&this.addEventListener("complete",t.onComplete))}var e=createjs.extend(t,createjs.EventDispatcher);e._setPaused=function(t){return createjs.Tween._register(this,t),this},e.setPaused=createjs.deprecate(e._setPaused,"AbstractTween.setPaused"),e._getPaused=function(){return this._paused},e.getPaused=createjs.deprecate(e._getPaused,"AbstactTween.getPaused"),e._getCurrentLabel=function(t){var e=this.getLabels();null==t&&(t=this.position);for(var i=0,n=e.length;n>i&&!(t<e[i].position);i++);return 0===i?null:e[i-1].label},e.getCurrentLabel=createjs.deprecate(e._getCurrentLabel,"AbstractTween.getCurrentLabel");try{Object.defineProperties(e,{paused:{set:e._setPaused,get:e._getPaused},currentLabel:{get:e._getCurrentLabel}})}catch(t){}e.advance=function(t,e){this.setPosition(this.rawPosition+t*this.timeScale,e)},e.setPosition=function(t,e,i,n){var r=this.duration,s=this.loop,o=this.rawPosition,a=0,h=0,l=!1;if(0>t&&(t=0),0===r){if(l=!0,-1!==o)return l}else{if(h=t-(a=t/r|0)*r,(l=-1!==s&&t>=s*r+r)&&(t=(h=r)*(a=s)+r),t===o)return l;!this.reversed!=!(this.bounce&&a%2)&&(h=r-h)}this.position=h,this.rawPosition=t,this._updatePosition(i,l),l&&(this.paused=!0),n&&n(this),e||this._runActions(o,t,i,!i&&-1===o),this.dispatchEvent("change"),l&&this.dispatchEvent("complete")},e.calculatePosition=function(t){var e=this.duration,i=this.loop,n=0,r=0;return 0===e?0:(-1!==i&&t>=i*e+e?(r=e,n=i):0>t?r=0:r=t-(n=t/e|0)*e,!this.reversed!=!(this.bounce&&n%2)?e-r:r)},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.setLabels=function(t){this._labels=t,this._labelList=null},e.addLabel=function(t,e){this._labels||(this._labels={}),this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,r=i.length;r>n&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.gotoAndPlay=function(t){this.paused=!1,this._goto(t)},e.gotoAndStop=function(t){this.paused=!0,this._goto(t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels&&this._labels[t]),e},e.toString=function(){return"[AbstractTween]"},e.clone=function(){throw"AbstractTween can not be cloned."},e._init=function(t){t&&t.paused||(this.paused=!1),t&&null!=t.position&&this.setPosition(t.position)},e._updatePosition=function(){},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e,!1,!0)},e._runActions=function(t,e,i,n){if(this._actionHead||this.tweens){var r,s,o,a,h=this.duration,l=this.reversed,u=this.bounce,c=this.loop;if(0===h?(r=s=o=a=0,l=u=!1):(o=t-(r=t/h|0)*h,a=e-(s=e/h|0)*h),-1!==c&&(s>c&&(a=h,s=c),r>c&&(o=h,r=c)),i)return this._runActionsRange(a,a,i,n);if(r!==s||o!==a||i||n){-1===r&&(r=o=0);var d=e>=t,p=r;do{var f=p===r?o:d?0:h,g=p===s?a:d?h:0;if(!l!=!(u&&p%2)&&(f=h-f,g=h-g),u&&p!==r&&f===g);else if(this._runActionsRange(f,g,i,n||p!==r&&!u))return!0;n=!1}while(d&&++p<=s||!d&&--p>=s)}}},e._runActionsRange=function(){},createjs.AbstractTween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(i,n){this.AbstractTween_constructor(n),this.pluginData=null,this.target=i,this.passive=!1,this._stepHead=new e(null,0,0,{},null,!0),this._stepTail=this._stepHead,this._stepPosition=0,this._actionHead=null,this._actionTail=null,this._plugins=null,this._pluginIds=null,this._injected=null,n&&(this.pluginData=n.pluginData,n.override&&t.removeTweens(i)),this.pluginData||(this.pluginData={}),this._init(n)}function e(t,e,i,n,r,s){this.next=null,this.prev=t,this.t=e,this.d=i,this.props=n,this.ease=r,this.passive=s,this.index=t?t.index+1:0}var i=createjs.extend(t,createjs.AbstractTween);t.IGNORE={},t._tweens=[],t._plugins=null,t._tweenHead=null,t._tweenTail=null,t.get=function(e,i){return new t(e,i)},t.tick=function(e,i){for(var n=t._tweenHead;n;){var r=n._next;i&&!n.ignoreGlobalPause||n._paused||n.advance(n.useTicks?1:e),n=r}},t.handleEvent=function(t){"tick"===t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweenHead;i;){var n=i._next;i.target===e&&t._register(i,!0),i=n}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweenHead;e;){var i=e._next;e._paused=!0,e.target&&(e.target.tweenjs_count=0),e._next=e._prev=null,e=i}t._tweenHead=t._tweenTail=null},t.hasActiveTweens=function(e){return e?!!e.tweenjs_count:!!t._tweenHead},t._installPlugin=function(e){for(var i=e.priority=e.priority||0,n=t._plugins=t._plugins||[],r=0,s=n.length;s>r&&!(i<n[r].priority);r++);n.splice(r,0,e)},t._register=function(e,i){var n=e.target;if(!i&&e._paused){n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1);var r=t._tweenTail;r?(t._tweenTail=r._next=e,e._prev=r):t._tweenHead=t._tweenTail=e,!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0)}else if(i&&!e._paused){n&&n.tweenjs_count--;var s=e._next,o=e._prev;s?s._prev=o:t._tweenTail=o,o?o._next=s:t._tweenHead=s,e._next=e._prev=null}e._paused=i},i.wait=function(t,e){return t>0&&this._addStep(+t,this._stepTail.props,null,e),this},i.to=function(t,e,i){(null==e||0>e)&&(e=0);var n=this._addStep(+e,null,i);return this._appendProps(t,n),this},i.label=function(t){return this.addLabel(t,this.duration),this},i.call=function(t,e,i){return this._addAction(i||this.target,t,e||[this])},i.set=function(t,e){return this._addAction(e||this.target,this._set,[t])},i.play=function(t){return this._addAction(t||this,this._set,[{paused:!1}])},i.pause=function(t){return this._addAction(t||this,this._set,[{paused:!0}])},i.w=i.wait,i.t=i.to,i.c=i.call,i.s=i.set,i.toString=function(){return"[Tween]"},i.clone=function(){throw"Tween can not be cloned."},i._addPlugin=function(t){var e=this._pluginIds||(this._pluginIds={}),i=t.ID;if(i&&!e[i]){e[i]=!0;for(var n=this._plugins||(this._plugins=[]),r=t.priority||0,s=0,o=n.length;o>s;s++)if(r<n[s].priority)return void n.splice(s,0,t);n.push(t)}},i._updatePosition=function(t,e){var i=this._stepHead.next,n=this.position,r=this.duration;if(this.target&&i){for(var s=i.next;s&&s.t<=n;)s=(i=i.next).next;var o=e?0===r?1:n/r:(n-i.t)/i.d;this._updateTargetProps(i,o,e)}this._stepPosition=i?n-i.t:0},i._updateTargetProps=function(e,i,n){if(!(this.passive=!!e.passive)){var r,s,o,a,h=e.prev.props,l=e.props;(a=e.ease)&&(i=a(i,0,1,1));var u=this._plugins;t:for(var c in h){if(r=(s=h[c])!==(o=l[c])&&"number"==typeof s?s+(o-s)*i:i>=1?o:s,u)for(var d=0,p=u.length;p>d;d++){var f=u[d].change(this,e,c,r,i,n);if(f===t.IGNORE)continue t;void 0!==f&&(r=f)}this.target[c]=r}}},i._runActionsRange=function(t,e,i,n){var r=t>e,s=r?this._actionTail:this._actionHead,o=e,a=t;r&&(o=t,a=e);for(var h=this.position;s;){var l=s.t;if((l===e||l>a&&o>l||n&&l===t)&&(s.funct.apply(s.scope,s.params),h!==this.position))return!0;s=r?s.prev:s.next}},i._appendProps=function(e,i,n){var r,s,o,a,h,l=this._stepHead.props,u=this.target,c=t._plugins,d=i.prev,p=d.props,f=i.props||(i.props=this._cloneProps(p)),g={};for(r in e)if(e.hasOwnProperty(r)&&(g[r]=f[r]=e[r],void 0===l[r])){if(a=void 0,c)for(s=c.length-1;s>=0;s--)if(void 0!==(o=c[s].init(this,r,a))&&(a=o),a===t.IGNORE){delete f[r],delete g[r];break}a!==t.IGNORE&&(void 0===a&&(a=u[r]),p[r]=void 0===a?null:a)}for(r in g){o=e[r];for(var v,m=d;(v=m)&&(m=v.prev);)if(m.props!==v.props){if(void 0!==m.props[r])break;m.props[r]=p[r]}}if(!1!==n&&(c=this._plugins))for(s=c.length-1;s>=0;s--)c[s].step(this,i,g);(h=this._injected)&&(this._injected=null,this._appendProps(h,i,!1))},i._injectProp=function(t,e){(this._injected||(this._injected={}))[t]=e},i._addStep=function(t,i,n,r){var s=new e(this._stepTail,this.duration,t,i,n,r||!1);return this.duration+=t,this._stepTail=this._stepTail.next=s},i._addAction=function(t,e,i){var n=new function(t,e,i,n,r){this.next=null,this.prev=t,this.t=e,this.d=0,this.scope=i,this.funct=n,this.params=r}(this._actionTail,this.duration,t,e,i);return this._actionTail?this._actionTail.next=n:this._actionHead=n,this._actionTail=n,this},i._set=function(t){for(var e in t)this[e]=t[e]},i._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},createjs.Tween=createjs.promote(t,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t){var e,i;t instanceof Array||null==t&&arguments.length>1?(e=t,i=arguments[1],t=arguments[2]):t&&(e=t.tweens,i=t.labels),this.AbstractTween_constructor(t),this.tweens=[],e&&this.addTween.apply(this,e),this.setLabels(i),this._init(t)}var e=createjs.extend(t,createjs.AbstractTween);e.addTween=function(t){t._parent&&t._parent.removeTween(t);var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[e-1]}if(0===e)return null;this.tweens.push(t),t._parent=this,t.paused=!0;var n=t.duration;return t.loop>0&&(n*=t.loop+1),n>this.duration&&(this.duration=n),this.rawPosition>=0&&t.setPosition(this.rawPosition),t},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeTween(arguments[n]);return i}if(0===e)return!0;var r=this.tweens;for(n=r.length;n--;)if(r[n]===t)return r.splice(n,1),t._parent=null,t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.updateDuration=function(){this.duration=0;for(var t=0,e=this.tweens.length;e>t;t++){var i=this.tweens[t],n=i.duration;i.loop>0&&(n*=i.loop+1),n>this.duration&&(this.duration=n)}},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._updatePosition=function(t){for(var e=this.position,i=0,n=this.tweens.length;n>i;i++)this.tweens[i].setPosition(e,!0,t)},e._runActionsRange=function(t,e,i,n){for(var r=this.position,s=0,o=this.tweens.length;o>s;s++)if(this.tweens[s]._runActions(t,e,i,n),r!==this.position)return!0},createjs.Timeline=createjs.promote(t,"AbstractTween")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t?t=-1:t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*e*e*((t+1)*e-t):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}var e=t;e.priority=0,e.ID="MotionGuide",e.install=function(){return createjs.Tween._installPlugin(t),createjs.Tween.IGNORE},e.init=function(t,i){"guide"==i&&t._addPlugin(e)},e.step=function(t,i,n){for(var r in n)if("guide"===r){var s=i.props.guide,o=e._solveGuideData(n.guide,s);s.valid=!o;var a=s.endData;if(t._injectProp("x",a.x),t._injectProp("y",a.y),o||!s.orient)break;var h=void 0===i.prev.props.rotation?t.target.rotation||0:i.prev.props.rotation;if(s.startOffsetRot=h-s.startData.rotation,"fixed"==s.orient)s.endAbsRot=a.rotation+s.startOffsetRot,s.deltaRotation=0;else{var l=void 0===n.rotation?t.target.rotation||0:n.rotation,u=l-s.endData.rotation-s.startOffsetRot,c=u%360;switch(s.endAbsRot=l,s.orient){case"auto":s.deltaRotation=u;break;case"cw":s.deltaRotation=(c+360)%360+360*Math.abs(u/360|0);break;case"ccw":s.deltaRotation=(c-360)%360+-360*Math.abs(u/360|0)}}t._injectProp("rotation",s.endAbsRot)}},e.change=function(t,i,n,r,s){var o=i.props.guide;if(o&&i.props!==i.prev.props&&o!==i.prev.props.guide)return"guide"===n&&!o.valid||"x"==n||"y"==n||"rotation"===n&&o.orient?createjs.Tween.IGNORE:void e._ratioToPositionData(s,o,t.target)},e.debug=function(t,i,n){t=t.guide||t;var r=e._findPathProblems(t);if(r&&console.error("MotionGuidePlugin Error found: \n"+r),!i)return r;var s=t.path,o=s.length;for(i.save(),i.lineCap="round",i.lineJoin="miter",i.beginPath(),i.moveTo(s[0],s[1]),u=2;o>u;u+=4)i.quadraticCurveTo(s[u],s[u+1],s[u+2],s[u+3]);i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="white",i.lineWidth=3,i.stroke(),i.closePath();var a=n.length;if(n&&a){var h={},l={};e._solveGuideData(t,h);for(var u=0;a>u;u++)h.orient="fixed",e._ratioToPositionData(n[u],h,l),i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(l.x+9*Math.cos(.0174533*l.rotation),l.y+9*Math.sin(.0174533*l.rotation)),i.strokeStyle="black",i.lineWidth=4.5,i.stroke(),i.strokeStyle="red",i.lineWidth=3,i.stroke(),i.closePath()}return i.restore(),r},e._solveGuideData=function(t,i){var n;if(n=e.debug(t))return n;var r=i.path=t.path;i.orient=t.orient,i.subLines=[],i.totalLength=0,i.startOffsetRot=0,i.deltaRotation=0,i.startData={ratio:0},i.endData={ratio:1},i.animSpan=1;var s,o,a,h,l,u,c,d,p,f=r.length,g={};for(s=r[0],o=r[1],c=2;f>c;c+=4){a=r[c],h=r[c+1],l=r[c+2],u=r[c+3];var v={weightings:[],estLength:0,portion:0},m=s,y=o;for(d=1;10>=d;d++){e._getParamsForCurve(s,o,a,h,l,u,d/10,!1,g);var _=g.x-m,b=g.y-y;p=Math.sqrt(_*_+b*b),v.weightings.push(p),v.estLength+=p,m=g.x,y=g.y}for(i.totalLength+=v.estLength,d=0;10>d;d++)p=v.estLength,v.weightings[d]=v.weightings[d]/p;i.subLines.push(v),s=l,o=u}p=i.totalLength;var w=i.subLines.length;for(c=0;w>c;c++)i.subLines[c].portion=i.subLines[c].estLength/p;var x=isNaN(t.start)?0:t.start,T=isNaN(t.end)?1:t.end;e._ratioToPositionData(x,i,i.startData),e._ratioToPositionData(T,i,i.endData),i.startData.ratio=x,i.endData.ratio=T,i.animSpan=i.endData.ratio-i.startData.ratio},e._ratioToPositionData=function(t,i,n){var r,s,o,a,h,l=i.subLines,u=0,c=t*i.animSpan+i.startData.ratio;for(s=l.length,r=0;s>r;r++){if(u+(a=l[r].portion)>=c){h=r;break}u+=a}void 0===h&&(h=s-1,u-=a);var d=l[h].weightings,p=a;for(s=d.length,r=0;s>r&&!(u+(a=d[r]*p)>=c);r++)u+=a;h=4*h+2,o=r/10+(c-u)/a*.1;var f=i.path;return e._getParamsForCurve(f[h-2],f[h-1],f[h],f[h+1],f[h+2],f[h+3],o,i.orient,n),i.orient&&(t>=.99999&&1.00001>=t&&void 0!==i.endAbsRot?n.rotation=i.endAbsRot:n.rotation+=i.startOffsetRot+t*i.deltaRotation),n},e._getParamsForCurve=function(t,e,i,n,r,s,o,a,h){var l=1-o;h.x=l*l*t+2*l*o*i+o*o*r,h.y=l*l*e+2*l*o*n+o*o*s,a&&(h.rotation=57.2957795*Math.atan2((n-e)*l+(s-n)*o,(i-t)*l+(r-i)*o))},e._findPathProblems=function(t){var e=t.path,i=e&&e.length||0;if(6>i||(i-2)%4){var n="\tCannot parse 'path' array due to invalid number of entries in path. ";return n+="There should be an odd number of points, at least 3 points, and 2 entries per point (x & y). ",(n+="See 'CanvasRenderingContext2D.quadraticCurveTo' for details as 'path' models a quadratic bezier.\n\n")+"Only [ "+i+" ] values found. Expected: "+Math.max(4*Math.ceil((i-2)/4)+2,6)}for(var r=0;i>r;r++)if(isNaN(e[r]))return"All data in path array must be numeric";var s=t.start;if(isNaN(s)&&void 0!==s)return"'start' out of bounds. Expected 0 to 1, got: "+s;var o=t.end;if(isNaN(o)&&void 0!==o)return"'end' out of bounds. Expected 0 to 1, got: "+o;var a=t.orient;return a&&"fixed"!=a&&"auto"!=a&&"cw"!=a&&"ccw"!=a?'Invalid orientation value. Expected ["fixed", "auto", "cw", "ccw", undefined], got: '+a:void 0},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="1.0.0",t.buildDate="Thu, 14 Sep 2017 19:47:47 GMT"}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=t()}}(function(){return function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){return r(e[o][1][t]||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}}()({1:[function(t,e,i){"use strict";"use restrict";function n(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}i.INT_BITS=32,i.INT_MAX=2147483647,i.INT_MIN=-1<<31,i.sign=function(t){return(t>0)-(t<0)},i.abs=function(t){var e=t>>31;return(t^e)-e},i.min=function(t,e){return e^(t^e)&-(t<e)},i.max=function(t,e){return t^(t^e)&-(t<e)},i.isPow2=function(t){return!(t&t-1||!t)},i.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},i.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},i.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.countTrailingZeros=n,i.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},i.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},i.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var r=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,n=e,r=7;for(i>>>=1;i;i>>>=1)n<<=1,n|=1&i,--r;t[e]=n<<r&255}}(r),i.reverse=function(t){return r[255&t]<<24|r[t>>>8&255]<<16|r[t>>>16&255]<<8|r[t>>>24&255]},i.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},i.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},i.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},i.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},i.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],2:[function(t,e,i){"use strict";function n(t,e,i){i=i||2;var n,s,a,h,l,u,d,p=e&&e.length,f=p?e[0]*i:t.length,g=r(t,0,f,i,!0),v=[];if(!g||g.next===g.prev)return v;if(p&&(g=c(t,e,g,i)),t.length>80*i){n=a=t[0],s=h=t[1];for(var m=i;m<f;m+=i)l=t[m],u=t[m+1],l<n&&(n=l),u<s&&(s=u),l>a&&(a=l),u>h&&(h=u);d=0!==(d=Math.max(a-n,h-s))?1/d:0}return o(g,v,i,n,s,d),v}function r(t,e,i,n,r){var s,o;if(r===P(t,e,i,n)>0)for(s=e;s<i;s+=n)o=E(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=E(s,t[s],t[s+1],o);return o&&b(o,o.next)&&(S(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!b(n,n.next)&&0!==_(n.prev,n,n.next))n=n.next;else{if(S(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function o(t,e,i,n,r,c,d){if(t){!d&&c&&f(t,n,r,c);for(var p,g,v=t;t.prev!==t.next;)if(p=t.prev,g=t.next,c?h(t,n,r,c):a(t))e.push(p.i/i),e.push(t.i/i),e.push(g.i/i),S(t),t=g.next,v=g.next;else if((t=g)===v){d?1===d?o(t=l(t,e,i),e,i,n,r,c,2):2===d&&u(t,e,i,n,r,c):o(s(t),e,i,n,r,c,1);break}}}function a(t){var e=t.prev,i=t,n=t.next;if(_(e,i,n)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(m(e.x,e.y,i.x,i.y,n.x,n.y,r.x,r.y)&&_(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function h(t,e,i,n){var r=t.prev,s=t,o=t.next;if(_(r,s,o)>=0)return!1;for(var a=r.x<s.x?r.x<o.x?r.x:o.x:s.x<o.x?s.x:o.x,h=r.y<s.y?r.y<o.y?r.y:o.y:s.y<o.y?s.y:o.y,l=r.x>s.x?r.x>o.x?r.x:o.x:s.x>o.x?s.x:o.x,u=r.y>s.y?r.y>o.y?r.y:o.y:s.y>o.y?s.y:o.y,c=g(a,h,e,i,n),d=g(l,u,e,i,n),p=t.prevZ,f=t.nextZ;p&&p.z>=c&&f&&f.z<=d;){if(p!==t.prev&&p!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==t.prev&&f!==t.next&&m(r.x,r.y,s.x,s.y,o.x,o.y,f.x,f.y)&&_(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function l(t,e,i){var n=t;do{var r=n.prev,s=n.next.next;!b(r,s)&&w(r,n,n.next,s)&&x(r,s)&&x(s,r)&&(e.push(r.i/i),e.push(n.i/i),e.push(s.i/i),S(n),S(n.next),n=t=s),n=n.next}while(n!==t);return n}function u(t,e,i,n,r,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&y(h,l)){var u=T(h,l);return h=s(h,h.next),u=s(u,u.next),o(h,e,i,n,r,a),void o(u,e,i,n,r,a)}l=l.next}h=h.next}while(h!==t)}function c(t,e,i,n){var o,a,h,l=[];for(o=0,a=e.length;o<a;o++)(h=r(t,e[o]*n,o<a-1?e[o+1]*n:t.length,n,!1))===h.next&&(h.steiner=!0),l.push(v(h));for(l.sort(d),o=0;o<l.length;o++)p(l[o],i),i=s(i,i.next);return i}function d(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o){if(o=a,a===r){if(s===n.y)return n;if(s===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!i)return null;if(r===o)return i.prev;var h,l=i,u=i.x,c=i.y,d=1/0;for(n=i.next;n!==l;)r>=n.x&&n.x>=u&&r!==n.x&&m(s<c?r:o,s,u,c,s<c?o:r,s,n.x,n.y)&&((h=Math.abs(s-n.y)/(r-n.x))<d||h===d&&n.x>i.x)&&x(n,t)&&(i=n,d=h),n=n.next;return i}(t,e)){var i=T(e,t);s(i,i.next)}}function f(t,e,i,n){var r=t;do{null===r.z&&(r.z=g(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<l&&(a++,n=n.nextZ);e++);for(h=l;a>0||h>0&&n;)0!==a&&(0===h||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,h--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,l*=2}while(o>1)}(r)}function g(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function m(t,e,i,n,r,s,o,a){return(r-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(n-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(r-o)*(n-a)>=0}function y(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&w(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,i,n){return!!(b(t,e)&&b(i,n)||b(t,n)&&b(i,e))||_(t,e,i)>0!=_(t,e,n)>0&&_(i,n,t)>0!=_(i,n,e)>0}function x(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function T(t,e){var i=new A(t.i,t.x,t.y),n=new A(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function E(t,e,i,n){var r=new A(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}e.exports=n,e.exports.default=n,n.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(P(t,0,s,i));if(r)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(P(t,l,u,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},n.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},{}],3:[function(t,e,i){"use strict";function n(){}function r(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(){this._events=new n,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),s.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)o.call(t,e)&&i.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},s.prototype.listeners=function(t,e){var i=a?a+t:t,n=this._events[i];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,s=n.length,o=new Array(s);r<s;r++)o[r]=n[r].fn;return o},s.prototype.emit=function(t,e,i,n,r,s){var o=a?a+t:t;if(!this._events[o])return!1;var h,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,n),!0;case 5:return u.fn.call(u.context,e,i,n,r),!0;case 6:return u.fn.call(u.context,e,i,n,r,s),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},s.prototype.on=function(t,e,i){var n=new r(e,i||this),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.once=function(t,e,i){var n=new r(e,i||this,!0),s=a?a+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],n]:this._events[s].push(n):(this._events[s]=n,this._eventsCount++),this},s.prototype.removeListener=function(t,e,i,r){var s=a?a+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[s],this;var o=this._events[s];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[s]);else{for(var h=0,l=[],u=o.length;h<u;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&l.push(o[h]);l.length?this._events[s]=1===l.length?l[0]:l:0==--this._eventsCount?this._events=new n:delete this._events[s]}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=a,s.EventEmitter=s,void 0!==e&&(e.exports=s)},{}],4:[function(t,e,i){!function(t){function i(t,e){return t.test(e)}function n(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),n=e.split("[FBAN");void 0!==n[1]&&(e=n[0]),void 0!==(n=e.split("Twitter"))[1]&&(e=n[0]);var y={apple:{phone:i(r,e)&&!i(c,e),ipod:i(s,e),tablet:!i(r,e)&&i(o,e)&&!i(c,e),device:(i(r,e)||i(s,e)||i(o,e))&&!i(c,e)},amazon:{phone:i(l,e),tablet:!i(l,e)&&i(u,e),device:i(l,e)||i(u,e)},android:{phone:!i(c,e)&&i(l,e)||!i(c,e)&&i(a,e),tablet:!i(c,e)&&!i(l,e)&&!i(a,e)&&(i(u,e)||i(h,e)),device:!i(c,e)&&(i(l,e)||i(u,e)||i(a,e)||i(h,e))},windows:{phone:i(c,e),tablet:i(d,e),device:i(c,e)||i(d,e)},other:{blackberry:i(p,e),blackberry10:i(f,e),opera:i(g,e),firefox:i(m,e),chrome:i(v,e),device:i(p,e)||i(f,e)||i(g,e)||i(m,e)||i(v,e)}};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}var r=/iPhone/i,s=/iPod/i,o=/iPad/i,a=/\bAndroid(?:.+)Mobile\b/i,h=/Android/i,l=/\bAndroid(?:.+)SD4930UR\b/i,u=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,c=/Windows Phone/i,d=/\bWindows(?:.+)ARM\b/i,p=/BlackBerry/i,f=/BB10/i,g=/Opera Mini/i,v=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/\Mobile(?:.+)Firefox\b/i;void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=n:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=n():t.isMobile=n()}(this)},{}],5:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return s(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return s(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,i.default=a,e.exports=i.default},{}],6:[function(t,e,i){"use strict";var n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,o,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var l in i=Object(arguments[h]))r.call(i,l)&&(a[l]=i[l]);if(n){o=n(i);for(var u=0;u<o.length;u++)s.call(i,o[u])&&(a[o[u]]=i[o[u]])}}return a}},{}],7:[function(t,e,i){"use strict";e.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=i.parser[e.strictMode?"strict":"loose"].exec(t),r={},s=14;s--;)r[i.key[s]]=n[s]||"";return r[i.q.name]={},r[i.key[12]].replace(i.q.parser,function(t,e,n){e&&(r[i.q.name][e]=n)}),r}},{}],8:[function(t,e,i){(function(t){function e(t,e){for(var i=0,n=t.length-1;n>=0;n--){var r=t[n];"."===r?t.splice(n,1):".."===r?(t.splice(n,1),i++):i&&(t.splice(n,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}function n(t,e){if(t.filter)return t.filter(e);for(var i=[],n=0;n<t.length;n++)e(t[n],n,t)&&i.push(t[n]);return i}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(t){return r.exec(t).slice(1)};i.resolve=function(){for(var i="",r=!1,s=arguments.length-1;s>=-1&&!r;s--){var o=s>=0?arguments[s]:t.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(i=o+"/"+i,r="/"===o.charAt(0))}return i=e(n(i.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+i||"."},i.normalize=function(t){var r=i.isAbsolute(t),s="/"===o(t,-1);return(t=e(n(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&s&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(n(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},i.relative=function(t,e){function n(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var r=n(t.split("/")),s=n(e.split("/")),o=Math.min(r.length,s.length),a=o,h=0;h<o;h++)if(r[h]!==s[h]){a=h;break}var l=[];for(h=a;h<r.length;h++)l.push("..");return(l=l.concat(s.slice(a))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=s(t),i=e[0],n=e[1];return i||n?(n&&(n=n.substr(0,n.length-1)),i+n):"."},i.basename=function(t,e){var i=s(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return s(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:26}],9:[function(t,e,i){var n=new ArrayBuffer(0),r=function(t,e,i,r){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=r||t.STATIC_DRAW,this.data=n,i&&this.upload(i),this._updateID=0};r.prototype.upload=function(t,e,i){i||this.bind();var n=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?n.bufferSubData(this.type,e,t):n.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r},{}],10:[function(t,e,i){var n=t("./GLTexture"),r=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};r.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(t,e,i,n){this.bind();var r=this.gl;r.clearColor(t,e,i,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(t,e,i,s){var o=n.fromData(t,null,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},r.createFloat32=function(t,e,i,s){var o=new n.fromData(t,s,e,i);o.enableNearestScaling(),o.enableWrapClamp();var a=new r(t,e,i);return a.enableTexture(o),a.unbind(),a},e.exports=r},{"./GLTexture":12}],11:[function(t,e,i){var n=t("./shader/compileProgram"),r=t("./shader/extractAttributes"),s=t("./shader/extractUniforms"),o=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),h=function(t,e,i,h,l){this.gl=t,h&&(e=o(e,h),i=o(i,h)),this.program=n(t,e,i,l),this.attributes=r(t,this.program),this.uniformData=s(t,this.program),this.uniforms=a(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=h},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(t,e,i){var n=function(t,e,i,n,r){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=n||t.RGBA,this.type=r||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,n=t.videoHeight||t.height;n!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=n};var r=!1;n.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},n.fromSource=function(t,e,i){var r=new n(t);return r.premultiplyAlpha=i||!1,r.upload(e),r},n.fromData=function(t,e,i,r){var s=new n(t);return s.uploadData(e,i,r),s},e.exports=n},{}],13:[function(t,e,i){function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var r=t("./setVertexAttribArrays");n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,n,r,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:s||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var n=this.gl;return this.indexBuffer?n.drawElements(t,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(i||0)):n.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(t,e,i){e.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},{}],15:[function(t,e,i){var n={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=n)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(t,e,i){e.exports=function(t,e,i){var n;if(i){var r=i.tempAttribState,s=i.attribState;for(n=0;n<r.length;n++)r[n]=!1;for(n=0;n<e.length;n++)r[e[n].attribute.location]=!0;for(n=0;n<s.length;n++)s[n]!==r[n]&&(s[n]=r[n],i.attribState[n]?t.enableVertexAttribArray(n):t.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];t.enableVertexAttribArray(o.attribute.location)}}},{}],17:[function(t,e,i){var n=function(t,e,i){var n=t.createShader(e);return t.shaderSource(n,i),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};e.exports=function(t,e,i,r){var s=n(t,t.VERTEX_SHADER,e),o=n(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,s),t.attachShader(a,o),r)for(var h in r)t.bindAttribLocation(a,r[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(s),t.deleteShader(o),a}},{}],18:[function(t,e,i){var n=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return n(2*e);case"bvec3":return n(3*e);case"bvec4":return n(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],19:[function(t,e,i){var n=t("./mapType"),r=t("./mapSize"),s=function(t,e,i,n){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,n||0)};e.exports=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<o;a++){var h=t.getActiveAttrib(e,a),l=n(t,h.type);i[h.name]={type:l,size:r(l),location:t.getAttribLocation(e,h.name),pointer:s}}return i}},{"./mapSize":23,"./mapType":24}],20:[function(t,e,i){var n=t("./mapType"),r=t("./defaultValue");e.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),o=0;o<s;o++){var a=t.getActiveUniform(e,o),h=a.name.replace(/\[.*?\]/,""),l=n(t,a.type);i[h]={type:l,size:a.size,location:t.getUniformLocation(e,h),value:r(l,a.size)}}return i}},{"./defaultValue":18,"./mapType":24}],21:[function(t,e,i){function n(t,e){return function(i){this.data[t].value=i;var n=this.data[t].location;1===e.size?o[e.type](this.gl,n,i):a[e.type](this.gl,n,i)}}function r(t,e){for(var i=e,n=0;n<t.length-1;n++){var r=i[t[n]]||{data:{}};i[t[n]]=r,i=r}return i}var s=function(t){return function(){return this.data[t].value}},o={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},a={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};e.exports=function(t,e){var i={data:{}};i.gl=t;for(var o=Object.keys(e),a=0;a<o.length;a++){var h=o[a],l=h.split("."),u=l[l.length-1],c=r(l,i),d=e[h];c.data[u]=d,c.gl=t,Object.defineProperty(c,u,{get:s(u),set:n(u,d)})}return i}},{}],22:[function(t,e,i){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(t,e,i){var n={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return n[t]}},{}],24:[function(t,e,i){var n=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!n){var i=Object.keys(r);n={};for(var s=0;s<i.length;++s){var o=i[s];n[t[o]]=r[o]}}return n[e]}},{}],25:[function(t,e,i){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],26:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(){g&&p&&(g=!1,p.length?f=p.concat(f):v=-1,f.length&&a())}function a(){if(!g){var t=s(o);g=!0;for(var e=f.length;e;){for(p=f,f=[];++v<e;)p&&p[v].run();v=-1,e=f.length}p=null,g=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function l(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var p,f=[],g=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new h(t,e)),1!==f.length||g||s(a)},h.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],27:[function(t,e,i){(function(t){!function(n){function r(t){throw new RangeError(O[t])}function s(t,e){for(var i=t.length,n=[];i--;)n[i]=e(t[i]);return n}function o(t,e){var i=t.split("@"),n="";return i.length>1&&(n=i[0]+"@",t=i[1]),n+s((t=t.replace(I,".")).split("."),e).join(".")}function a(t){for(var e,i,n=[],r=0,s=t.length;r<s;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<s?56320==(64512&(i=t.charCodeAt(r++)))?n.push(((1023&e)<<10)+(1023&i)+65536):(n.push(e),r--):n.push(e);return n}function h(t){return s(t,function(t){var e="";return t>65535&&(e+=D((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+D(t)}).join("")}function l(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:b}function u(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function c(t,e,i){var n=0;for(t=i?L(t/E):t>>1,t+=L(t/e);t>R*x>>1;n+=b)t=L(t/R);return L(n+(R+1)*t/(t+T))}function d(t){var e,i,n,s,o,a,u,d,p,f,g=[],v=t.length,m=0,y=A,T=S;for((i=t.lastIndexOf(P))<0&&(i=0),n=0;n<i;++n)t.charCodeAt(n)>=128&&r("not-basic"),g.push(t.charCodeAt(n));for(s=i>0?i+1:0;s<v;){for(o=m,a=1,u=b;s>=v&&r("invalid-input"),((d=l(t.charCodeAt(s++)))>=b||d>L((_-m)/a))&&r("overflow"),m+=d*a,!(d<(p=u<=T?w:u>=T+x?x:u-T));u+=b)a>L(_/(f=b-p))&&r("overflow"),a*=f;T=c(m-o,e=g.length+1,0==o),L(m/e)>_-y&&r("overflow"),y+=L(m/e),m%=e,g.splice(m++,0,y)}return h(g)}function p(t){var e,i,n,s,o,h,l,d,p,f,g,v,m,y,T,E=[];for(v=(t=a(t)).length,e=A,i=0,o=S,h=0;h<v;++h)(g=t[h])<128&&E.push(D(g));for(n=s=E.length,s&&E.push(P);n<v;){for(l=_,h=0;h<v;++h)(g=t[h])>=e&&g<l&&(l=g);for(l-e>L((_-i)/(m=n+1))&&r("overflow"),i+=(l-e)*m,e=l,h=0;h<v;++h)if((g=t[h])<e&&++i>_&&r("overflow"),g==e){for(d=i,p=b;!(d<(f=p<=o?w:p>=o+x?x:p-o));p+=b)T=d-f,y=b-f,E.push(D(u(f+T%y,0))),d=L(T/y);E.push(D(u(d,0))),o=c(i,m,n==s),i=0,++n}++i,++e}return E.join("")}var f="object"==typeof i&&i&&!i.nodeType&&i,g="object"==typeof e&&e&&!e.nodeType&&e,v="object"==typeof t&&t;v.global!==v&&v.window!==v&&v.self!==v||(n=v);var m,y,_=2147483647,b=36,w=1,x=26,T=38,E=700,S=72,A=128,P="-",M=/^xn--/,C=/[^\x20-\x7E]/,I=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=b-w,L=Math.floor,D=String.fromCharCode;if(m={version:"1.4.1",ucs2:{decode:a,encode:h},decode:d,encode:p,toASCII:function(t){return o(t,function(t){return C.test(t)?"xn--"+p(t):t})},toUnicode:function(t){return o(t,function(t){return M.test(t)?d(t.slice(4).toLowerCase()):t})}},f&&g)if(e.exports==f)g.exports=m;else for(y in m)m.hasOwnProperty(y)&&(f[y]=m[y]);else n.punycode=m}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,i){"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,s){e=e||"&",i=i||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var l=t.length;h>0&&l>h&&(l=h);for(var u=0;u<l;++u){var c,d,p,f,g=t[u].replace(a,"%20"),v=g.indexOf(i);v>=0?(c=g.substr(0,v),d=g.substr(v+1)):(c=g,d=""),p=decodeURIComponent(c),f=decodeURIComponent(d),n(o,p)?r(o[p])?o[p].push(f):o[p]=[o[p],f]:o[p]=f}return o};var r=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],29:[function(t,e,i){"use strict";function n(t,e){if(t.map)return t.map(e);for(var i=[],n=0;n<t.length;n++)i.push(e(t[n],n));return i}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?n(o(t),function(o){var a=encodeURIComponent(r(o))+i;return s(t[o])?n(t[o],function(t){return a+encodeURIComponent(r(t))}).join(e):a+encodeURIComponent(r(t[o]))}).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],30:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":28,"./encode":29}],31:[function(t,e,i){"use strict";e.exports=function(t,e,i){var n,r=t.length;if(!(e>=r||0===i)){var s=r-(i=e+i>r?r-e:i);for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}}},{}],32:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.Loader=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(t("mini-signals")),a=n(t("parse-uri")),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("./async")),l=t("./Resource"),u=/(#[\w-]+)?$/,c=i.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=h.queue(this._boundLoadResource,n),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var r=0;r<t._defaultBeforeMiddleware.length;++r)this.pre(t._defaultBeforeMiddleware[r]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if("object"===(void 0===t?"undefined":r(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new l.Resource(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var o=i.parentResource,a=[],h=0;h<o.children.length;++h)o.children[h].isComplete||a.push(o.children[h]);var u=o.progressChunk*(a.length+1)/(a.length+2);o.children.push(this.resources[t]),o.progressChunk=u;for(var c=0;c<a.length;++c)a[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,a.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var n=u.exec(i)[0];-1!==(i=i.substr(0,i.length-n.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=n}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,h.eachSeries(this._beforeMiddleware,function(e,n){e.call(i,t,function(){n(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),h.eachSeries(this._afterMiddleware,function(i,n){i.call(e,t,n)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},s(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();c._defaultBeforeMiddleware=[],c._defaultAfterMiddleware=[],c.pre=function(t){return c._defaultBeforeMiddleware.push(t),c},c.use=function(t){return c._defaultAfterMiddleware.push(t),c}},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){}function s(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function o(t){return t.toString().replace("object ","")}i.__esModule=!0,i.Resource=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=n(t("parse-uri")),l=n(t("mini-signals")),u=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),c=null,d=i.Resource=function(){function t(e,i,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.timeout=n.timeout||0,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=r,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new l.default,this.onProgress=new l.default,this.onComplete=new l.default,this.onAfterMiddleware=new l.default}return t.setExtensionLoadType=function(e,i){s(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){s(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(i)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:u&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var n=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(n)?n[0]:n))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var n=document.createElement("source");return n.src=e,n.type=i,n},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(o(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(o(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(o(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",n=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===n&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?n=200:1223===n&&(n=204),2==(n/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var r=new DOMParser;this.data=r.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,c||(c=document.createElement("a")),c.href=t;var i=!(t=(0,h.default)(c.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,n=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?"),r=t.indexOf("#"),s=Math.min(n>-1?n:t.length,r>-1?r:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},a(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();d.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},d.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,svg:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE,mp3:d.LOAD_TYPE.AUDIO,ogg:d.LOAD_TYPE.AUDIO,wav:d.LOAD_TYPE.AUDIO,mp4:d.LOAD_TYPE.VIDEO,webm:d.LOAD_TYPE.VIDEO},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT,ttf:d.XHR_RESPONSE_TYPE.BUFFER,otf:d.XHR_RESPONSE_TYPE.BUFFER},d.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=d)},{"mini-signals":5,"parse-uri":7}],34:[function(t,e,i){"use strict";function n(){}function r(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}i.__esModule=!0,i.eachSeries=function(t,e,i,n){var r=0,s=t.length;!function o(a){a||r===s?i&&i(a):n?setTimeout(function(){e(t[r++],o)},1):e(t[r++],o)}()},i.queue=function(t,e){function i(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(a.started=!0,null==t&&a.idle())setTimeout(function(){return a.drain()},1);else{var r={data:t,callback:"function"==typeof i?i:n};e?a._tasks.unshift(r):a._tasks.push(r),setTimeout(function(){return a.process()},1)}}function s(t){return function(){o-=1,t.callback.apply(t,arguments),null!=arguments[0]&&a.error(arguments[0],t.data),o<=a.concurrency-a.buffer&&a.unsaturated(),a.idle()&&a.drain(),a.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,a={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){i(t,!1,e)},kill:function(){o=0,a.drain=n,a.started=!1,a._tasks=[]},unshift:function(t,e){i(t,!0,e)},process:function(){for(;!a.paused&&o<a.concurrency&&a._tasks.length;){var e=a._tasks.shift();0===a._tasks.length&&a.empty(),(o+=1)===a.concurrency&&a.saturated(),t(e.data,r(s(e)))}},length:function(){return a._tasks.length},running:function(){return o},idle:function(){return a._tasks.length+o===0},pause:function(){!0!==a.paused&&(a.paused=!0)},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=1;t<=a.concurrency;t++)a.process()}}};return a}},{}],35:[function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t.length;){for(var n=[0,0,0],s=[0,0,0,0],o=0;o<n.length;++o)i<t.length?n[o]=255&t.charCodeAt(i++):n[o]=0;switch(s[0]=n[0]>>2,s[1]=(3&n[0])<<4|n[1]>>4,s[2]=(15&n[1])<<2|n[2]>>6,s[3]=63&n[2],i-(t.length-1)){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var a=0;a<s.length;++a)e+=r.charAt(s[a])}return e}i.__esModule=!0,i.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0!==e&&(e.exports.default=n)},{}],36:[function(t,e,i){"use strict";var n=t("./Loader").Loader,r=t("./Resource").Resource,s=t("./async"),o=t("./b64");n.Resource=r,n.async=s,n.encodeBinary=o,n.base64=o,e.exports=n,e.exports.Loader=n,e.exports.default=n},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,i){"use strict";i.__esModule=!0,i.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===n.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=s.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){s.revokeObjectURL(i),t.data.onload=null,e()})}}else{var o=t.xhr.getResponseHeader("content-type");if(o&&0===o.indexOf("image"))return t.data=new Image,t.data.src="data:"+o+";base64,"+(0,r.encodeBinary)(t.xhr.responseText),t.type=n.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var n=t("../../Resource"),r=t("../../b64"),s=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(t,e,i){if(t&&o.isObject(t)&&t instanceof n)return t;var r=new n;return r.parse(t,e,i),r}var s=t("punycode"),o=t("./util");i.parse=r,i.resolve=function(t,e){return r(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?r(t,!1,!0).resolveObject(e):e},i.format=function(t){return o.isString(t)&&(t=r(t)),t instanceof n?t.format():n.prototype.format.call(t)},i.Url=n;var a=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),d=["%","/","?",";","#"].concat(c),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,g=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=t("querystring");n.prototype.parse=function(t,e,i){if(!o.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),r=-1!==n&&n<t.indexOf("#")?"?":"#",h=t.split(r);h[0]=h[0].replace(/\\/g,"/");var u=t=h.join(r);if(u=u.trim(),!i&&1===t.split("#").length){var b=l.exec(u);if(b)return this.path=u,this.href=u,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?_.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var w=a.exec(u);if(w){var x=(w=w[0]).toLowerCase();this.protocol=x,u=u.substr(w.length)}if(i||w||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===u.substr(0,2);!T||w&&m[w]||(u=u.substr(2),this.slashes=!0)}if(!m[w]&&(T||w&&!y[w])){for(var E=-1,S=0;S<p.length;S++){-1!==(M=u.indexOf(p[S]))&&(-1===E||M<E)&&(E=M)}var A,P;-1!==(P=-1===E?u.lastIndexOf("@"):u.lastIndexOf("@",E))&&(A=u.slice(0,P),u=u.slice(P+1),this.auth=decodeURIComponent(A)),E=-1;for(S=0;S<d.length;S++){var M;-1!==(M=u.indexOf(d[S]))&&(-1===E||M<E)&&(E=M)}-1===E&&(E=u.length),this.host=u.slice(0,E),u=u.slice(E),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var I=this.hostname.split(/\./),O=(S=0,I.length);S<O;S++){var R=I[S];if(R&&!R.match(f)){for(var L="",D=0,k=R.length;D<k;D++)R.charCodeAt(D)>127?L+="x":L+=R[D];if(!L.match(f)){var j=I.slice(0,S),N=I.slice(S+1),B=R.match(g);B&&(j.push(B[1]),N.unshift(B[2])),N.length&&(u="/"+N.join(".")+u),this.hostname=j.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=s.toASCII(this.hostname));var U=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+U,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!v[x])for(S=0,O=c.length;S<O;S++){var X=c[S];if(-1!==u.indexOf(X)){var V=encodeURIComponent(X);V===X&&(V=escape(X)),u=u.split(X).join(V)}}var H=u.indexOf("#");-1!==H&&(this.hash=u.substr(H),u=u.slice(0,H));var W=u.indexOf("?");if(-1!==W?(this.search=u.substr(W),this.query=u.substr(W+1),e&&(this.query=_.parse(this.query)),u=u.slice(0,W)):e&&(this.search="",this.query={}),u&&(this.pathname=u),y[x]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var Y=this.search||"";this.path=U+Y}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||y[e])&&!1!==r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):r||(r=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),e+r+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+n},n.prototype.resolve=function(t){return this.resolveObject(r(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(o.isString(t)){var e=new n;e.parse(t,!1,!0),t=e}for(var i=new n,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(i[u]=t[u])}return y[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!y[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),w=b||_||i.host&&t.pathname,x=w,T=i.pathname&&i.pathname.split("/")||[],E=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!y[i.protocol]);if(E&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),w=w&&(""===f[0]||""===T[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=f;else if(f.length)T||(T=[]),T.pop(),T=T.concat(f),i.search=t.search,i.query=t.query;else if(!o.isNullOrUndefined(t.search)){if(E)i.hostname=i.host=T.shift(),(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift());return i.search=t.search,i.query=t.query,o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var S=T.slice(-1)[0],A=(i.host||t.host||T.length>1)&&("."===S||".."===S)||""===S,P=0,M=T.length;M>=0;M--)"."===(S=T[M])?T.splice(M,1):".."===S?(T.splice(M,1),P++):P&&(T.splice(M,1),P--);if(!w&&!x)for(;P--;P)T.unshift("..");!w||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),A&&"/"!==T.join("/").substr(-1)&&T.push("");var C,I=""===T[0]||T[0]&&"/"===T[0].charAt(0);E&&(i.hostname=i.host=I?"":T.length?T.shift():"",(C=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=C.shift(),i.host=i.hostname=C.shift()));return(w=w||i.host&&T.length)&&!I&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),o.isNull(i.pathname)&&o.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:27,querystring:30}],39:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=n(t("ismobilejs")),o=n(t("./accessibleTarget"));r.utils.mixins.delayMixin(r.DisplayObject.prototype,o.default);var a=100,h=0,l=0,u=2,c=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),!s.default.tablet&&!s.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=a+"px",i.style.height=a+"px",i.style.position="absolute",i.style.top=h+"px",i.style.left=l+"px",i.style.zIndex=u,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var o=this.children[s];if(o.renderId!==this.renderId)o._accessibleActive=!1,r.utils.removeItems(this.children,s,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{n=o._accessibleDiv;var a=o.hitArea,h=o.worldTransform;o.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*i+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*i+"px"):(a=o.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px",n.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(n.title=o.accessibleTitle),n.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&n.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=a+"px",e.style.height=a+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=u,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();i.default=c,r.WebGLRenderer.registerPlugin("accessibility",c),r.CanvasRenderer.registerPlugin("accessibility",c)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,i){"use strict";i.__esModule=!0,i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var s=t("./AccessibilityManager");Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return n(s).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("./autoDetectRenderer"),o=n(t("./display/Container")),a=t("./ticker"),h=n(t("./settings")),l=t("./const"),u=function(){function t(e,i,n,r,l){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||h.default.RENDER_OPTIONS.height,forceCanvas:!!r,sharedTicker:!!l},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,s.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?a.shared:new a.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();i.default=u},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(t,e,i){"use strict";function n(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}i.__esModule=!0;var r=t("pixi-gl-core"),s=function(t){return t&&t.__esModule?t:{default:t}}(t("./settings")),o=function(t){function e(i,r,o,a,h){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n(r,h||s.default.PRECISION_VERTEX),n(o,h||s.default.PRECISION_FRAGMENT),void 0,a))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.GLShader);i.default=o},{"./settings":101,"pixi-gl-core":15}],45:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.autoDetectRenderer=function(t,e,i,n){var a=t&&t.forceCanvas;return void 0!==n&&(a=n),!a&&r.isWebGLSupported()?new o.default(t,e,i):new s.default(t,e,i)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("./utils")),s=n(t("./renderers/canvas/CanvasRenderer")),o=n(t("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(t,e,i){"use strict";i.__esModule=!0,i.VERSION="4.8.9",i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i.SCALE_MODES={LINEAR:0,NEAREST:1},i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},i.GC_MODES={AUTO:0,MANUAL:1},i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},i.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../math"),r=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:((t=t||new n.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[2],o=t[3],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[4],o=t[5],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,s=t[6],o=t[7],e=s<e?s:e,i=o<i?o:i,n=s>n?s:n,r=o>r?o:r,this.minX=e,this.minY=i,this.maxX=n,this.maxY=r},t.prototype.addFrame=function(t,e,i,n,r){var s=t.worldTransform,o=s.a,a=s.b,h=s.c,l=s.d,u=s.tx,c=s.ty,d=this.minX,p=this.minY,f=this.maxX,g=this.maxY,v=o*e+h*i+u,m=a*e+l*i+c;d=v<d?v:d,p=m<p?m:p,f=v>f?v:f,g=m>g?m:g,m=a*n+l*i+c,d=(v=o*n+h*i+u)<d?v:d,p=m<p?m:p,f=v>f?v:f,g=m>g?m:g,m=a*e+l*r+c,d=(v=o*e+h*r+u)<d?v:d,p=m<p?m:p,f=v>f?v:f,g=m>g?m:g,m=a*n+l*r+c,d=(v=o*n+h*r+u)<d?v:d,p=m<p?m:p,f=v>f?v:f,g=m>g?m:g,this.minX=d,this.minY=p,this.maxX=f,this.maxY=g},t.prototype.addVertices=function(t,e,i,n){for(var r=t.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,u=r.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,g=i;g<n;g+=2){var v=e[g],m=e[g+1],y=s*v+a*m+l,_=h*m+o*v+u;c=y<c?y:c,d=_<d?_:d,p=y>p?y:p,f=_>f?_:f}this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,n=this.maxX,r=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>r?t.maxY:r},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,n=t.minY>e.minY?t.minY:e.minY,r=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,n=t.minY>e.y?t.minY:e.y,r=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=r&&n<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=n<a?n:a,this.maxX=r>h?r:h,this.maxY=s>l?s:l}},t}();i.default=r},{"../math":70}],48:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../utils"),s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);this.children[i]=e,this.children[n]=t,this.onChildrenChange(i<n?i:n)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,r.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,(0,r.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,r.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,n="number"==typeof e?e:this.children.length,r=n-i,s=void 0;if(r>0&&r<=n){s=this.children.splice(i,r);for(var o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<s.length;++a)s[a].emit("removed",this);return s}if(0===r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var r=0,s=this.children.length;r<s;r++)this.children[r].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(i)for(var r=0;r<n.length;++r)n[r].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("./DisplayObject")).default);i.default=s,s.prototype.containerUpdateTransform=s.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(t("eventemitter3")),o=t("../const"),a=n(t("../settings")),h=n(t("./TransformStatic")),l=n(t("./Transform")),u=n(t("./Bounds")),c=t("../math"),d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),n=a.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?h.default:l.default;return i.tempDisplayObjectParent=null,i.transform=new n,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new u.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new c.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),t=this._localBoundsRect);var n=this.getBounds(!1,t);return this.parent=i,this.transform=e,n},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,n){return e&&(t=e.toGlobal(t,i,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=n||1,this.rotation=r,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(s.default);i.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../math"),s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new r.Point(0,0),i.scale=new r.Point(1,1),i.skew=new r.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new r.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("./TransformBase")).default);i.default=s},{"../math":70,"./TransformBase":51}],51:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../math"),r=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,n=this.localTransform;i.a=n.a*e.a+n.b*e.c,i.b=n.a*e.b+n.b*e.d,i.c=n.c*e.a+n.d*e.c,i.d=n.c*e.b+n.d*e.d,i.tx=n.tx*e.a+n.ty*e.c+e.tx,i.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();i.default=r,r.prototype.updateWorldTransform=r.prototype.updateTransform,r.IDENTITY=new r},{"../math":70}],52:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../math"),s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new r.ObservablePoint(i.onChange,i,0,0),i.scale=new r.ObservablePoint(i.onChange,i,1,1),i.pivot=new r.ObservablePoint(i.onChange,i,0,0),i.skew=new r.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,n=this.worldTransform;n.a=e.a*i.a+e.b*i.c,n.b=e.a*i.b+e.b*i.d,n.c=e.c*i.a+e.d*i.c,n.d=e.c*i.b+e.d*i.d,n.tx=e.tx*i.a+e.ty*i.c+i.tx,n.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("./TransformBase")).default);i.default=s},{"../math":70,"./TransformBase":51}],53:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../display/Container")),s=n(t("../textures/RenderTexture")),o=n(t("../textures/Texture")),a=n(t("./GraphicsData")),h=n(t("../sprites/Sprite")),l=t("../math"),u=t("../utils"),c=t("../const"),d=n(t("../display/Bounds")),p=n(t("./utils/bezierCurveTo")),f=n(t("../renderers/canvas/CanvasRenderer")),g=void 0,v=new l.Matrix,m=new l.Point,y=new Float32Array(4),_=new Float32Array(4),b=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n.fillAlpha=1,n.lineWidth=0,n.nativeLines=i,n.lineColor=0,n.lineAlignment=.5,n.graphicsData=[],n.tint=16777215,n._prevTint=16777215,n.blendMode=c.BLEND_MODES.NORMAL,n.currentPath=null,n._webGL={},n.isMask=!1,n.boundsPadding=0,n._localBounds=new d.default,n.dirty=0,n.fastRectDirty=-1,n.clearDirty=0,n.boundsDirty=-1,n.cachedSpriteDirty=!1,n._spriteRect=null,n._fastRect=!1,n._prevRectTint=null,n._prevRectFillColor=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,n,r,s){var o=t-2*i+r,a=e-2*n+s,h=2*i-2*t,l=2*n-2*e,u=4*(o*o+a*a),c=4*(o*h+a*l),d=h*h+l*l,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),g=2*u*f,v=2*Math.sqrt(d),m=c/f;return(g*p+f*c*(p-v)+(4*d*u-c*c)*Math.log((2*f+m+p)/(m+v)))/(4*g)},e.prototype._bezierCurveLength=function(t,e,i,n,r,s,o,a){for(var h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=0,v=0,m=0,y=0,_=t,b=e,w=1;w<=10;++w)m=_-(g=(f=(p=(d=1-(l=w/10))*d)*d)*t+3*p*l*i+3*d*(u=l*l)*r+(c=u*l)*o),y=b-(v=f*e+3*p*l*n+3*d*u*s+c*a),_=g,b=v,h+=Math.sqrt(m*m+y*y);return h},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=n,this.currentPath)if(this.currentPath.shape.points.length){var r=new l.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,n=i[i.length-2],r=i[i.length-1];return n===t&&r===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,o=0,a=0;0===s.length&&this.moveTo(0,0);for(var h=s[s.length-2],l=s[s.length-1],u=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,l,t,i,n,r)):20,c=1;c<=u;++c){var d=c/u;o=h+(t-h)*d,a=l+(i-l)*d,s.push(o+(t+(n-t)*d-o)*d,a+(i+(r-i)*d-a)*d)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,n,r,s,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,h=a[a.length-2],l=a[a.length-1];a.length-=2;var u=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,l,t,i,n,r,s,o)):20;return(0,p.default)(h,l,t,i,n,r,s,o,u,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,o=s[s.length-2],a=s[s.length-1]-e,h=o-t,l=n-e,u=i-t,c=Math.abs(a*u-h*l);if(c<1e-8||0===r)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var d=a*a+h*h,p=l*l+u*u,f=a*l+h*u,g=r*Math.sqrt(d)/c,v=r*Math.sqrt(p)/c,m=g*f/d,y=v*f/p,_=g*u+v*h,b=g*l+v*a,w=h*(v+m),x=a*(v+m),T=u*(g+y),E=l*(g+y),S=Math.atan2(x-b,w-_),A=Math.atan2(E-b,T-_);this.arc(_+t,b+e,r,S,A,h*l>u*a)}return this.dirty++,this},e.prototype.arc=function(t,i,n,r,s){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===s)return this;!o&&s<=r?s+=c.PI_2:o&&r<=s&&(r+=c.PI_2);var a=s-r,h=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*n):40*Math.ceil(Math.abs(a)/c.PI_2);if(0===a)return this;var l=t+Math.cos(r)*n,u=i+Math.sin(r)*n,d=this.currentPath?this.currentPath.shape.points:null;if(d){var p=Math.abs(d[d.length-2]-l),f=Math.abs(d[d.length-1]-u);p<.001&&f<.001||d.push(l,u)}else this.moveTo(l,u),d=this.currentPath.shape.points;for(var g=a/(2*h),v=2*g,m=Math.cos(g),y=Math.sin(g),_=h-1,b=_%1/_,w=0;w<=_;++w){var x=g+r+v*(w+b*w),T=Math.cos(x),E=-Math.sin(x);d.push((m*T+y*E)*n+t,(m*-E+y*T)*n+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,n){return this.drawShape(new l.Rectangle(t,e,i,n)),this},e.prototype.drawRoundedRect=function(t,e,i,n,r){return this.drawShape(new l.RoundedRectangle(t,e,i,n,r)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,n){return this.drawShape(new l.Ellipse(t,e,i,n)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var n=0;n<e.length;++n)e[n]=arguments[n]}var r=new l.Polygon(e);return r.closed=i,this.drawShape(r),this},e.prototype.drawStar=function(t,e,i,n,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;r=r||n/2;for(var o=-1*Math.PI/2+s,a=2*i,h=c.PI_2/a,l=[],u=0;u<a;u++){var d=u%2?r:n,p=u*h+o;l.push(t+d*Math.cos(p),e+d*Math.sin(p))}return this.drawPolygon(l)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===c.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new h.default(new o.default(o.default.WHITE)));var i=this._spriteRect,n=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=n;else if(this.tint!==this._prevRectTint||n!==this._prevRectFillColor){var r=y,s=_;(0,u.hex2rgb)(n,r),(0,u.hex2rgb)(this.tint,s),r[0]*=s[0],r[1]*=s[1],r[2]*=s[2],i.tint=(0,u.rgb2hex)(r),this._prevRectTint=this.tint,this._prevRectFillColor=n}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);for(var e=this.graphicsData,i=0;i<e.length;++i){var n=e[i];if(n.fill&&n.shape&&n.shape.contains(m.x,m.y)){var r=!1;if(n.holes)for(var s=0;s<n.holes.length;s++){if(n.holes[s].contains(m.x,m.y)){r=!0;break}}if(!r)return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r=0,s=0,o=0,a=0,h=0,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],d=u.type,p=u.lineWidth*u.lineAlignment;if(r=u.shape,d===c.SHAPES.RECT||d===c.SHAPES.RREC)s=r.x-p,o=r.y-p,a=r.width+2*p,h=r.height+2*p,t=s<t?s:t,e=s+a>e?s+a:e,i=o<i?o:i,n=o+h>n?o+h:n;else if(d===c.SHAPES.CIRC)s=r.x,o=r.y,a=r.radius+p,h=r.radius+p,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else if(d===c.SHAPES.ELIP)s=r.x,o=r.y,a=r.width+p,h=r.height+p,t=s-a<t?s-a:t,e=s+a>e?s+a:e,i=o-h<i?o-h:i,n=o+h>n?o+h:n;else for(var f=r.points,g=0,v=0,m=0,y=0,_=0,b=0,w=0,x=0,T=0;T+2<f.length;T+=2)s=f[T],o=f[T+1],g=f[T+2],v=f[T+3],m=Math.abs(g-s),y=Math.abs(v-o),h=2*p,(a=Math.sqrt(m*m+y*y))<1e-9||(b=(h/a*m+y)/2,x=(v+o)/2,t=(w=(g+s)/2)-(_=(h/a*y+m)/2)<t?w-_:t,e=w+_>e?w+_:e,i=x-b<i?x-b:i,n=x+b>n?x+b:n)}else t=0,e=0,i=0,n=0;var E=this.boundsPadding;this._localBounds.minX=t-E,this._localBounds.maxX=e+E,this._localBounds.minY=i-E,this._localBounds.maxY=n+E},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===c.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),n=s.default.create(i.width,i.height,t,e);g||(g=new f.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(v),v.invert(),v.tx-=i.x,v.ty-=i.y,g.render(this,n,!0,v);var r=o.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,t,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var n in this._webGL)for(var r=0;r<this._webGL[n].data.length;++r)this._webGL[n].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(r.default);i.default=b,b._SPRITE_TEXTURE=null,b.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e,i,n,r,s,o,a,h,l){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=a,this.lineColor=i,this.lineAlpha=n,this._lineTint=i,this.fillColor=r,this.fillAlpha=s,this._fillTint=r,this.fill=o,this.holes=[],this.shape=h,this.type=h.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();i.default=n},{}],55:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("../../renderers/canvas/CanvasRenderer")),r=t("../../const"),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldAlpha,s=t.transform.worldTransform,o=e.resolution;i.setTransform(s.a*o,s.b*o,s.c*o,s.d*o,s.tx*o,s.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],l=h.shape,u=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===r.SHAPES.POLY){i.beginPath();var d=l.points,p=h.holes,f=void 0,g=void 0,v=void 0,m=void 0;i.moveTo(d[0],d[1]);for(var y=2;y<d.length;y+=2)i.lineTo(d[y],d[y+1]);if(l.closed&&i.closePath(),p.length>0){f=0,v=d[0],m=d[1];for(var _=2;_+2<d.length;_+=2)f+=(d[_]-v)*(d[_+3]-m)-(d[_+2]-v)*(d[_+1]-m);for(var b=0;b<p.length;b++)if(d=p[b].points){g=0,v=d[0],m=d[1];for(var w=2;w+2<d.length;w+=2)g+=(d[w]-v)*(d[w+3]-m)-(d[w+2]-v)*(d[w+1]-m);if(g*f<0){i.moveTo(d[0],d[1]);for(var x=2;x<d.length;x+=2)i.lineTo(d[x],d[x+1])}else{i.moveTo(d[d.length-2],d[d.length-1]);for(var T=d.length-4;T>=0;T-=2)i.lineTo(d[T],d[T+1])}p[b].close&&i.closePath()}}h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===r.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(l.x,l.y,l.width,l.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(l.x,l.y,l.width,l.height));else if(h.type===r.SHAPES.CIRC)i.beginPath(),i.arc(l.x,l.y,l.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===r.SHAPES.ELIP){var E=2*l.width,S=2*l.height,A=l.x-E/2,P=l.y-S/2;i.beginPath();var M=E/2*.5522848,C=S/2*.5522848,I=A+E,O=P+S,R=A+E/2,L=P+S/2;i.moveTo(A,L),i.bezierCurveTo(A,L-C,R-M,P,R,P),i.bezierCurveTo(R+M,P,I,L-C,I,L),i.bezierCurveTo(I,L+C,R+M,O,R,O),i.bezierCurveTo(R-M,O,A,L+C,A,L),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===r.SHAPES.RREC){var D=l.x,k=l.y,j=l.width,N=l.height,B=l.radius,U=Math.min(j,N)/2|0;B=B>U?U:B,i.beginPath(),i.moveTo(D,k+B),i.lineTo(D,k+N-B),i.quadraticCurveTo(D,k+N,D+B,k+N),i.lineTo(D+j-B,k+N),i.quadraticCurveTo(D+j,k+N,D+j,k+N-B),i.lineTo(D+j,k+B),i.quadraticCurveTo(D+j,k,D+j-B,k),i.lineTo(D+B,k),i.quadraticCurveTo(D,k,D,k+B),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*n,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*n,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;++r){var s=t.graphicsData[r],o=0|s.fillColor,a=0|s.lineColor;s._fillTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*n*255,s._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var n=1;n<t.length/2;++n)i.lineTo(t[2*n],t[2*n+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=s,n.default.registerPlugin("graphics",s)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i,n,r,s,o,a,h){var l=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=0,c=0,d=0,p=0,f=0;l.push(t,e);for(var g=1,v=0;g<=h;++g)d=(c=(u=1-(v=g/h))*u)*u,f=(p=v*v)*v,l.push(d*t+3*c*v*i+3*u*p*r+f*o,d*e+3*c*v*n+3*u*p*s+f*a);return l}},{}],57:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("../../utils"),s=t("../../const"),o=n(t("../../renderers/webgl/utils/ObjectRenderer")),a=n(t("../../renderers/webgl/WebGLRenderer")),h=n(t("./WebGLGraphicsData")),l=n(t("./shaders/PrimitiveShader")),u=n(t("./utils/buildPoly")),c=n(t("./utils/buildRectangle")),d=n(t("./utils/buildRoundedRectangle")),p=n(t("./utils/buildCircle")),f=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=i.gl,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l.default(this.gl)},e.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,s=t._webGL[this.CONTEXT_UID];s&&t.dirty===s.dirty||(this.updateGraphics(t),s=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var a=0,h=s.data.length;a<h;a++){var l=(n=s.data[a]).shader;e.bindShader(l),l.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,r.hex2rgb)(t.tint),l.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var n=0;n<i.data.length;n++)this.graphicsDataPool.push(i.data[n]);i.data.length=0,i.lastIndex=0}for(var r=void 0,o=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var h=t.graphicsData[a];r=this.getWebGLData(i,0),h.nativeLines&&h.lineWidth&&(o=this.getWebGLData(i,0,!0),i.lastIndex++),h.type===s.SHAPES.POLY&&(0,u.default)(h,r,o),h.type===s.SHAPES.RECT?(0,c.default)(h,r,o):h.type===s.SHAPES.CIRC||h.type===s.SHAPES.ELIP?(0,p.default)(h,r,o):h.type===s.SHAPES.RREC&&(0,d.default)(h,r,o),i.lastIndex++}this.renderer.bindVao(null);for(var l=0;l<i.data.length;l++)(r=i.data[l]).dirty&&r.upload()},e.prototype.getWebGLData=function(t,e,i){var n=t.data[t.data.length-1];return(!n||n.nativeLines!==i||n.points.length>32e4)&&((n=this.graphicsDataPool.pop()||new h.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,n.reset(e),t.data.push(n)),n.dirty=!0,n},e}(o.default);i.default=f,a.default.registerPlugin("graphics",f)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("pixi-gl-core")),r=function(){function t(e,i,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new n.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();i.default=r},{"pixi-gl-core":15}],59:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("../../../Shader")).default);i.default=n},{"../../../Shader":44}],60:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var o=t.shape,a=o.x,h=o.y,l=void 0,u=void 0;if(t.type===r.SHAPES.CIRC?(l=o.radius,u=o.radius):(l=o.width,u=o.height),0!==l&&0!==u){var c=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),d=2*Math.PI/c;if(t.fill){var p=(0,s.hex2rgb)(t.fillColor),f=t.fillAlpha,g=p[0]*f,v=p[1]*f,m=p[2]*f,y=e.points,_=e.indices,b=y.length/6;_.push(b);for(var w=0;w<c+1;w++)y.push(a,h,g,v,m,f),y.push(a+Math.sin(d*w)*l,h+Math.cos(d*w)*u,g,v,m,f),_.push(b++,b++);_.push(b-1)}if(t.lineWidth){var x=t.points;t.points=[];for(var T=0;T<c;T++)t.points.push(a+Math.sin(d*-T)*l,h+Math.cos(d*-T)*u);t.points.push(t.points[0],t.points[1]),(0,n.default)(t,e,i),t.points=x}}};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./buildLine")),r=t("../../../const"),s=t("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){t.nativeLines?function(t,e){var i=0,n=t.points;if(0!==n.length){var s=e.points,o=n.length/2,a=(0,r.hex2rgb)(t.lineColor),h=t.lineAlpha,l=a[0]*h,u=a[1]*h,c=a[2]*h;for(i=1;i<o;i++){var d=n[2*(i-1)],p=n[2*(i-1)+1],f=n[2*i],g=n[2*i+1];s.push(d,p),s.push(l,u,c,h),s.push(f,g),s.push(l,u,c,h)}}}(t,i):function(t,e){var i=t.points;if(0!==i.length){var s=new n.Point(i[0],i[1]),o=new n.Point(i[i.length-2],i[i.length-1]);if(s.x===o.x&&s.y===o.y){(i=i.slice()).pop(),i.pop();var a=(o=new n.Point(i[i.length-2],i[i.length-1])).x+.5*(s.x-o.x),h=o.y+.5*(s.y-o.y);i.unshift(a,h),i.push(a,h)}var l=e.points,u=e.indices,c=i.length/2,d=i.length,p=l.length/6,f=t.lineWidth/2,g=(0,r.hex2rgb)(t.lineColor),v=t.lineAlpha,m=g[0]*v,y=g[1]*v,_=g[2]*v,b=i[0],w=i[1],x=i[2],T=i[3],E=0,S=0,A=-(w-T),P=b-x,M=0,C=0,I=0,O=0,R=Math.sqrt(A*A+P*P);A/=R,P/=R,A*=f,P*=f;var L=t.lineAlignment,D=2*(1-L),k=2*L;l.push(b-A*D,w-P*D,m,y,_,v),l.push(b+A*k,w+P*k,m,y,_,v);for(var j=1;j<c-1;++j){b=i[2*(j-1)],w=i[2*(j-1)+1],x=i[2*j],T=i[2*j+1],E=i[2*(j+1)],S=i[2*(j+1)+1],A=-(w-T),P=b-x,A/=R=Math.sqrt(A*A+P*P),P/=R,A*=f,P*=f,M=-(T-S),C=x-E,M/=R=Math.sqrt(M*M+C*C),C/=R;var N=-P+w-(-P+T),B=-A+x-(-A+b),U=(-A+b)*(-P+T)-(-A+x)*(-P+w),F=-(C*=f)+S-(-C+T),X=-(M*=f)+x-(-M+E),V=(-M+E)*(-C+T)-(-M+x)*(-C+S),H=N*X-F*B;if(Math.abs(H)<.1)H+=10.1,l.push(x-A*D,T-P*D,m,y,_,v),l.push(x+A*k,T+P*k,m,y,_,v);else{var W=(B*V-X*U)/H,Y=(F*U-N*V)/H;(W-x)*(W-x)+(Y-T)*(Y-T)>196*f*f?(I=A-M,O=P-C,I/=R=Math.sqrt(I*I+O*O),O/=R,I*=f,O*=f,l.push(x-I*D,T-O*D),l.push(m,y,_,v),l.push(x+I*k,T+O*k),l.push(m,y,_,v),l.push(x-I*k*D,T-O*D),l.push(m,y,_,v),d++):(l.push(x+(W-x)*D,T+(Y-T)*D),l.push(m,y,_,v),l.push(x-(W-x)*k,T-(Y-T)*k),l.push(m,y,_,v))}}b=i[2*(c-2)],w=i[2*(c-2)+1],x=i[2*(c-1)],A=-(w-(T=i[2*(c-1)+1])),P=b-x,A/=R=Math.sqrt(A*A+P*P),P/=R,A*=f,P*=f,l.push(x-A*D,T-P*D),l.push(m,y,_,v),l.push(x+A*k,T+P*k),l.push(m,y,_,v),u.push(p);for(var G=0;G<d;++G)u.push(p++);u.push(p-1)}}(t,e)};var n=t("../../../math"),r=t("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.default=function(t,e,i){t.points=t.shape.points.slice();var n=t.points;if(t.fill&&n.length>=6){for(var a=[],h=t.holes,l=0;l<h.length;l++){var u=h[l];a.push(n.length/2),n=n.concat(u.points)}var c=e.points,d=e.indices,p=n.length/2,f=(0,s.hex2rgb)(t.fillColor),g=t.fillAlpha,v=f[0]*g,m=f[1]*g,y=f[2]*g,_=(0,o.default)(n,a,2);if(!_)return;for(var b=c.length/6,w=0;w<_.length;w+=3)d.push(_[w]+b),d.push(_[w]+b),d.push(_[w+1]+b),d.push(_[w+2]+b),d.push(_[w+2]+b);for(var x=0;x<p;x++)c.push(n[2*x],n[2*x+1],v,m,y,g)}t.lineWidth>0&&(0,r.default)(t,e,i)};var r=n(t("./buildLine")),s=t("../../../utils"),o=n(t("earcut"))},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var s=t.shape,o=s.x,a=s.y,h=s.width,l=s.height;if(t.fill){var u=(0,r.hex2rgb)(t.fillColor),c=t.fillAlpha,d=u[0]*c,p=u[1]*c,f=u[2]*c,g=e.points,v=e.indices,m=g.length/6;g.push(o,a),g.push(d,p,f,c),g.push(o+h,a),g.push(d,p,f,c),g.push(o,a+l),g.push(d,p,f,c),g.push(o+h,a+l),g.push(d,p,f,c),v.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var y=t.points;t.points=[o,a,o+h,a,o+h,a+l,o,a+l,o,a],(0,n.default)(t,e,i),t.points=y}};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./buildLine")),r=t("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return t+(e-t)*i}function s(t,e,i,n,s,o){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=0,l=0,u=0,c=0,d=0,p=0,f=0,g=0;f<=20;++f)h=r(t,i,g=f/20),l=r(e,n,g),u=r(i,s,g),c=r(n,o,g),d=r(h,u,g),p=r(l,c,g),a.push(d,p);return a}i.__esModule=!0,i.default=function(t,e,i){var n=t.shape,r=n.x,l=n.y,u=n.width,c=n.height,d=n.radius,p=[];if(p.push(r+d,l),s(r+u-d,l,r+u,l,r+u,l+d,p),s(r+u,l+c-d,r+u,l+c,r+u-d,l+c,p),s(r+d,l+c,r,l+c,r,l+c-d,p),s(r,l+d,r,l,r+d+1e-10,l,p),t.fill){for(var f=(0,h.hex2rgb)(t.fillColor),g=t.fillAlpha,v=f[0]*g,m=f[1]*g,y=f[2]*g,_=e.points,b=e.indices,w=_.length/6,x=(0,o.default)(p,null,2),T=0,E=x.length;T<E;T+=3)b.push(x[T]+w),b.push(x[T]+w),b.push(x[T+1]+w),b.push(x[T+2]+w),b.push(x[T+2]+w);for(var S=0,A=p.length;S<A;S++)_.push(p[S],p[++S],v,m,y,g)}if(t.lineWidth){var P=t.points;t.points=p,(0,a.default)(t,e,i),t.points=P}};var o=n(t("earcut")),a=n(t("./buildLine")),h=t("../../../utils")},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.autoDetectRenderer=i.Application=i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.TextureMatrix=i.Texture=i.Spritesheet=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextMetrics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=void 0;var s=t("./const");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})});var o=t("./math");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return r(a).default}});var h=t("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return r(h).default}});var l=t("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return r(l).default}});var u=t("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return r(u).default}});var c=t("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return r(c).default}});var d=t("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return r(d).default}});var p=t("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return r(p).default}});var f=t("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return r(f).default}});var g=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(g).default}});var v=t("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return r(v).default}});var m=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var y=t("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return r(y).default}});var _=t("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return r(_).default}});var b=t("./text/TextMetrics");Object.defineProperty(i,"TextMetrics",{enumerable:!0,get:function(){return r(b).default}});var w=t("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return r(w).default}});var x=t("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return r(x).default}});var T=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return r(T).default}});var E=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(E).default}});var S=t("./textures/Spritesheet");Object.defineProperty(i,"Spritesheet",{enumerable:!0,get:function(){return r(S).default}});var A=t("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return r(A).default}});var P=t("./textures/TextureMatrix");Object.defineProperty(i,"TextureMatrix",{enumerable:!0,get:function(){return r(P).default}});var M=t("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return r(M).default}});var C=t("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return r(C).default}});var I=t("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return r(I).default}});var O=t("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return r(O).default}});var R=t("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return r(R).default}});var L=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(L).default}});var D=t("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return r(D).default}});var k=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return r(k).default}});var j=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return r(j).default}});var N=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return r(N).default}});var B=t("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return r(B).default}});var U=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(U).default}});var F=t("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return r(F).default}});var X=t("./Application");Object.defineProperty(i,"Application",{enumerable:!0,get:function(){return r(X).default}});var V=t("./autoDetectRenderer");Object.defineProperty(i,"autoDetectRenderer",{enumerable:!0,get:function(){return V.autoDetectRenderer}});var H=n(t("./utils")),W=n(t("./ticker")),Y=r(t("./settings")),G=r(t("./renderers/canvas/CanvasRenderer")),z=r(t("./renderers/webgl/WebGLRenderer"));i.settings=Y.default,i.utils=H,i.ticker=W,i.CanvasRenderer=G.default,i.WebGLRenderer=z.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(t,e,i){"use strict";function n(t){return t<0?-1:t>0?1:0}i.__esModule=!0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("./Matrix")),s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],u=[];!function(){for(var t=0;t<16;t++){var e=[];u.push(e);for(var i=0;i<16;i++)for(var c=n(s[t]*s[i]+a[t]*o[i]),d=n(o[t]*s[i]+h[t]*o[i]),p=n(s[t]*a[i]+a[t]*h[i]),f=n(o[t]*a[i]+h[t]*h[i]),g=0;g<16;g++)if(s[g]===c&&o[g]===d&&a[g]===p&&h[g]===f){e.push(g);break}}for(var v=0;v<16;v++){var m=new r.default;m.set(s[v],o[v],a[v],h[v],0,0),l.push(m)}}();var c={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return o[t]},vX:function(t){return a[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return u[t][e]},sub:function(t,e){return u[t][c.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?c.S:c.N:2*Math.abs(e)<=Math.abs(t)?t>0?c.E:c.W:e>0?t>0?c.SE:c.SW:t>0?c.NE:c.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=l[c.inv(e)];r.tx=i,r.ty=n,t.append(r)}};i.default=c},{"./Matrix":67}],67:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(t("./Point")),s=t("../const"),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.a=e,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=o,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,n,r,s){return this.a=t,this.b=e,this.c=i,this.d=n,this.tx=r,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new r.default;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new r.default;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=r*e-this.d*i,this.d=r*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,r=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*r,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*r,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*r+this.ty,this},t.prototype.setTransform=function(t,e,i,n,r,s,o,a,h){return this.a=Math.cos(o+h)*r,this.b=Math.sin(o+h)*r,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+n*this.c),this.ty=e-(i*this.b+n*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,n=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,n=this.c,r=this.d,o=-Math.atan2(-n,r),a=Math.atan2(i,e),h=Math.abs(o+a);return h<1e-5||Math.abs(s.PI_2-h)<1e-5?(t.rotation=a,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+r*r),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,n=this.d,r=this.tx,s=t*n-e*i;return this.a=n/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-n*r)/s,this.ty=-(t*this.ty-e*r)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();i.default=o},{"../const":46,"./Point":69}],68:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._x=n,this._y=r,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new t(e||this.cb,i||this.scope,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,n=e||(0!==e?i:0);this._x===i&&this._y===n||(this._x=i,this._y=n,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},n(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();i.default=r},{}],69:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();i.default=n},{}],70:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return n(r).default}});var s=t("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return n(s).default}});var o=t("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return n(o).default}});var a=t("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return n(a).default}});var h=t("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return n(h).default}});var l=t("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var u=t("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return n(u).default}});var c=t("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var d=t("./shapes/RoundedRectangle");Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return n(d).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Rectangle")),r=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=i,this.radius=n,this.type=r.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,n=this.x-t,r=this.y-e;return(n*=n)+(r*=r)<=i},t.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();i.default=s},{"../../const":46,"./Rectangle":74}],72:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Rectangle")),r=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=i,this.width=n,this.height=s,this.type=r.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return(i*=i)+(n*=n)<=1},t.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();i.default=s},{"../../const":46,"./Rectangle":74}],73:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("../Point")),r=t("../../const"),s=function(){function t(){for(var e=arguments.length,i=Array(e),s=0;s<e;s++)i[s]=arguments[s];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof n.default){for(var o=[],a=0,h=i.length;a<h;a++)o.push(i[a].x,i[a].y);i=o}this.closed=!0,this.points=i,this.type=r.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,n=this.points.length/2,r=0,s=n-1;r<n;s=r++){var o=this.points[2*r],a=this.points[2*r+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t}();i.default=s},{"../../const":46,"../Point":69}],74:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../../const"),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(n),this.height=Number(s),this.type=r.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),r=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(i-e,0),this.y=n,this.height=Math.max(r-n,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),r=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=n,this.height=r-n},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-e)*t)/t,n=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=n-this.y},n(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();i.default=s},{"../../const":46}],75:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../const"),r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x=e,this.y=i,this.width=r,this.height=s,this.radius=o,this.type=n.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),n=e-(this.y+this.radius),r=this.radius*this.radius;if(i*i+n*n<=r)return!0;if((i=t-(this.x+this.width-this.radius))*i+n*n<=r)return!0;if(i*i+(n=e-(this.y+this.height-this.radius))*n<=r)return!0;if((i=t-(this.x+this.radius))*i+n*n<=r)return!0}return!1},t}();i.default=r},{"../../const":46}],76:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../utils"),o=t("../math"),a=t("../const"),h=n(t("../settings")),l=n(t("../display/Container")),u=n(t("../textures/RenderTexture")),c=n(t("eventemitter3")),d=new o.Matrix,p=function(t){function e(i,n,r,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,s.sayHello)(i),"number"==typeof n&&(n=Object.assign({width:n,height:r||h.default.RENDER_OPTIONS.height},u)),n=Object.assign({},h.default.RENDER_OPTIONS,n),c.options=n,c.type=a.RENDERER_TYPE.UNKNOWN,c.screen=new o.Rectangle(0,0,n.width,n.height),c.view=n.view||document.createElement("canvas"),c.resolution=n.resolution||h.default.RESOLUTION,c.transparent=n.transparent,c.autoResize=n.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=n.preserveDrawingBuffer,c.clearBeforeRender=n.clearBeforeRender,c.roundPixels=n.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=n.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new l.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,n){n=n||t.getLocalBounds();var r=u.default.create(0|n.width,0|n.height,e,i);return d.tx=-n.x,d.ty=-n.y,this.render(t,r,!1,d,!!t.parent),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,s.hex2string)(t),(0,s.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(c.default);i.default=p},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../SystemRenderer")),s=n(t("./utils/CanvasMaskManager")),o=n(t("./utils/CanvasRenderTarget")),a=n(t("./utils/mapCanvasBlendModesToPixi")),h=t("../../utils"),l=t("../../const"),u=n(t("../../settings")),c=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,n,r));return o.type=l.RENDERER_TYPE.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new s.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,a.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!r){var h=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=h}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=l.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=u.default.SCALE_MODE===l.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);i.default=c,h.pluginTarget.mixin(c)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../../const"),r=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,n=t.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var r=0;r<i;r++){var s=t.graphicsData[r],o=s.shape;if(s.type===n.SHAPES.POLY){var a=o.points,h=s.holes,l=void 0,u=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),h.length>0){l=0;for(var d=0;d<a.length;d+=2)l+=a[d]*a[d+3]-a[d+1]*a[d+2];for(var p=0;p<h.length;p++){a=h[p].points,u=0;for(var f=0;f<a.length;f+=2)u+=a[f]*a[f+3]-a[f+1]*a[f+2];if(e.moveTo(a[0],a[1]),u*l<0)for(var g=2;g<a.length;g+=2)e.lineTo(a[g],a[g+1]);else for(var v=a.length-2;v>=2;v-=2)e.lineTo(a[v],a[v+1])}}}else if(s.type===n.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(s.type===n.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(s.type===n.SHAPES.ELIP){var m=2*o.width,y=2*o.height,_=o.x-m/2,b=o.y-y/2,w=m/2*.5522848,x=y/2*.5522848,T=_+m,E=b+y,S=_+m/2,A=b+y/2;e.moveTo(_,A),e.bezierCurveTo(_,A-x,S-w,b,S,b),e.bezierCurveTo(S+w,b,T,A-x,T,A),e.bezierCurveTo(T,A+x,S+w,E,S,E),e.bezierCurveTo(S-w,E,_,A+x,_,A),e.closePath()}else if(s.type===n.SHAPES.RREC){var P=o.x,M=o.y,C=o.width,I=o.height,O=o.radius,R=Math.min(C,I)/2|0;O=O>R?R:O,e.moveTo(P,M+O),e.lineTo(P,M+I-O),e.quadraticCurveTo(P,M+I,P+O,M+I),e.lineTo(P+C-O,M+I),e.quadraticCurveTo(P+C,M+I,P+C,M+I-O),e.lineTo(P+C,M+O),e.quadraticCurveTo(P+C,M,P+C-O,M),e.lineTo(P+O,M),e.quadraticCurveTo(P,M,P,M+O),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();i.default=r},{"../../../const":46}],79:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(t("../../../settings")),s=function(){function t(e,i,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||r.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();i.default=s},{"../../../settings":101}],80:[function(t,e,i){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}i.__esModule=!0,i.default=function(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(t,0,0),r.drawImage(e,2,0);var s=r.getImageData(2,0,1,1);if(!s)return!1;var o=s.data;return 255===o[0]&&0===o[1]&&0===o[2]}},{}],81:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,r.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var n=t("../../../const"),r=function(t){return t&&t.__esModule?t:{default:t}}(t("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../const"),r=function(t){return t&&t.__esModule?t:{default:t}}(t("../../settings")),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=r.default.GC_MAX_IDLE,this.checkCountMax=r.default.GC_MAX_CHECK_COUNT,this.mode=r.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&++this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,n=0;n<e.length;n++){var r=e[n];!r._glRenderTargets&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[n]=null,i=!0)}if(i){for(var s=0,o=0;o<e.length;o++)null!==e[o]&&(e[s++]=e[o]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();i.default=s},{"../../const":46,"../../settings":101}],83:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("pixi-gl-core"),r=t("../../const"),s=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/RenderTarget")),o=t("../../utils"),a=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,o=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<a.length;++h)if(a[h]===t){e=h;break}}a[e]=t,i.activeTexture(i.TEXTURE0+e);var l=t._glTextures[this.renderer.CONTEXT_UID];if(l)o?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):l.upload(t.source);else{if(o){var u=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,l=u.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(l=new n.GLTexture(this.gl,null,null,null,null)).bind(e),l.premultiplyAlpha=!0,l.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=l,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&l.enableMipmap(),t.wrapMode===r.WRAP_MODES.CLAMP?l.enableWrapClamp():t.wrapMode===r.WRAP_MODES.REPEAT?l.enableWrapRepeat():l.enableWrapMirrorRepeat()):l.enableWrapClamp(),t.scaleMode===r.SCALE_MODES.NEAREST?l.enableNearestScaling():l.enableLinearScaling()}return l},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var i=this.renderer,n=i.CONTEXT_UID,r=t._glTextures,s=t._glRenderTargets;if(r[n]&&(i.unbindTexture(t),r[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[n],!e)){var a=this._managedTextures.indexOf(t);-1!==a&&(0,o.removeItems)(this._managedTextures,a,1)}s&&s[n]&&(i._activeRenderTarget===s[n]&&i.bindRenderTarget(i.rootRenderTarget),s[n].destroy(),delete s[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();i.default=a},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../SystemRenderer")),s=n(t("./managers/MaskManager")),o=n(t("./managers/StencilManager")),a=n(t("./managers/FilterManager")),h=n(t("./utils/RenderTarget")),l=n(t("./utils/ObjectRenderer")),u=n(t("./TextureManager")),c=n(t("../../textures/BaseTexture")),d=n(t("./TextureGarbageCollector")),p=n(t("./WebGLState")),f=n(t("./utils/mapWebGLDrawModesToPixi")),g=n(t("./utils/validateContext")),v=t("../../utils"),m=n(t("pixi-gl-core")),y=t("../../const"),_=0,b=function(t){function e(i,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,n,r));return a.legacy=a.options.legacy,a.legacy&&(m.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=y.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new s.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new l.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,g.default)(a.options.context),a.gl=a.options.context||m.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=_++,a.state=new p.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,f.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new u.default(this),this.filterManager=new a.default(this),this.textureGC=new d.default(this),this.state.resetToDefault(),this.rootRenderTarget=new h.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new m.default.GLTexture.fromData(t,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0;r<e;r++){var s=new c.default;s._glTextures[this.CONTEXT_UID]=i,this.boundTextures[r]=n,this.emptyTextures[r]=s,this.bindTexture(null,r)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!r){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){r.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var n=t.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(i=n._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===t)return n;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var r=this.gl,s=t._glTextures[this.CONTEXT_UID];return s?(this.boundTextures[e]=t,r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,s.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);i.default=b,v.pluginTarget.mixin(b)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./utils/mapWebGLBlendModesToPixi")),r=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,n.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();i.default=r},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(t("./extractUniformsFromSrc")),o=t("../../../utils"),a=t("../../../const"),h=n(t("../../../settings")),l={},u=function(){function t(e,i,n){for(var r in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=a.BLEND_MODES.NORMAL,this.uniformData=n||(0,s.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[r]=this.uniformData[r].value,this.uniformData[r].type&&(this.uniformData[r].type=this.uniformData[r].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,n,r){t.applyFilter(this,e,i,n)},r(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();i.default=u},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(t,e,i){"use strict";function n(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},n=void 0,s=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<s.length;o++){var a=s[o].trim();if(a.indexOf("uniform")>-1){var h=a.split(" "),l=h[1],u=h[2],c=1;u.indexOf("[")>-1&&(u=(n=u.split(/\[|]/))[0],c*=Number(n[1])),u.match(e)||(i[u]={value:r(l,c),name:u,type:l})}}return i}i.__esModule=!0,i.default=function(t,e,i){var r=n(t),s=n(e);return Object.assign(r,s)};var r=function(t){return t&&t.__esModule?t:{default:t}}(t("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":15}],88:[function(t,e,i){"use strict";i.__esModule=!0,i.calculateScreenSpaceMatrix=function(t,e,i){var n=t.identity();return n.translate(e.x/i.width,e.y/i.height),n.scale(i.width,i.height),n},i.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var n=t.identity();n.translate(e.x/i.width,e.y/i.height);var r=i.width/e.width,s=i.height/e.height;return n.scale(r,s),n},i.calculateSpriteMatrix=function(t,e,i,r){var s=r._texture.orig,o=t.set(i.width,0,0,i.height,e.x,e.y),a=r.worldTransform.copy(n.Matrix.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o};var n=t("../../../math")},{"../../../math":70}],89:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../Filter")),s=t("../../../../math"),o=n((t("path"),t("../../../../textures/TextureMatrix"))),a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new s.Matrix,r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,r.maskSprite=i,r.maskMatrix=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){var r=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(s.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,n))},e}(r.default);i.default=a},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var s=n(t("./WebGLManager")),o=n(t("../utils/RenderTarget")),a=n(t("../utils/Quad")),h=t("../../../math"),l=n(t("../../../Shader")),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../filters/filterTransforms")),c=n(t("bit-twiddle")),d=function(){function t(){r(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new h.Rectangle,this.destinationFrame=new h.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),p=function(t){function e(i){r(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.gl=n.renderer.gl,n.quad=new a.default(n.gl,i.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n.renderer.on("prerender",n.onPrerender,n),n._screenWidth=i.view.width,n._screenHeight=i.view.height,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var r=new d;r.sourceFrame=r.destinationFrame=this.renderer._activeRenderTarget.size,r.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[r]},this.filterData=n}var s=n.stack[++n.index],o=n.stack[0].destinationFrame;s||(s=n.stack[n.index]=new d);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,l=0|e[0].padding,u=a?i.screen:t.filterArea||t.getBounds(!0),c=s.sourceFrame,p=s.destinationFrame;c.x=(u.x*h|0)/h,c.y=(u.y*h|0)/h,c.width=(u.width*h|0)/h,c.height=(u.height*h|0)/h,a||(n.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(o),c.pad(l)),p.width=c.width,p.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,h);s.target=t,s.filters=e,s.resolution=h,s.renderTarget=f,f.setFrame(p,c),i.bindRenderTarget(f),f.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var n=i.filters;if(1===n.length)n[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var r=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);s.setFrame(i.destinationFrame,i.sourceFrame),s.clear();var o=0;for(o=0;o<n.length-1;++o){n[o].apply(this,r,s,!0,i);var a=r;r=s,s=a}n[o].apply(this,r,e.renderTarget,!1,i),this.freePotRenderTarget(r),this.freePotRenderTarget(s)}i.clear(),0==--t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,n){var r=this.renderer,s=r.gl,o=t.glShaders[r.CONTEXT_UID];o||(t.glShaderKey?(o=this.shaderCache[t.glShaderKey])||(o=new l.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[r.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=o,this.managedFilters.push(t)):(o=t.glShaders[r.CONTEXT_UID]=new l.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),r.bindVao(null),this.quad.initVao(o)),r.bindVao(this.quad.vao),r.bindRenderTarget(i),n&&(s.disable(s.SCISSOR_TEST),r.clear(),s.enable(s.SCISSOR_TEST)),i===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(o);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(o,t),r.state.setBlendMode(t.blendMode),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,n=e.uniforms,r=1,s=void 0;if(t.uniforms.filterArea){s=this.filterData.stack[this.filterData.index];var o=t.uniforms.filterArea;o[0]=s.renderTarget.size.width,o[1]=s.renderTarget.size.height,o[2]=s.sourceFrame.x,o[3]=s.sourceFrame.y,t.uniforms.filterArea=o}if(t.uniforms.filterClamp){s=s||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,a[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,t.uniforms.filterClamp=a}for(var h in i)if(t.uniforms.data[h]){var l=i[h].type;if("sampler2d"===l&&0!==n[h]){if(n[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(n[h].baseTexture,r);else{t.uniforms[h]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[h].texture.bind()}r++}else if("mat3"===l)void 0!==n[h].a?t.uniforms[h]=n[h].toArray(!0):t.uniforms[h]=n[h];else if("vec2"===l)if(void 0!==n[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=n[h].x,c[1]=n[h].y,t.uniforms[h]=c}else t.uniforms[h]=n[h];else"float"===l?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=n[h]):t.uniforms[h]=n[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return n.setFrame(i.destinationFrame,i.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return u.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return u.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var n=0;n<i.length;n++)t||i[n].glShaders[e.CONTEXT_UID].destroy(),delete i[n].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,n){var r="screen";i*=n,(e*=n)===this._screenWidth&&i===this._screenHeight||(r=(65535&(e=c.default.nextPow2(e)))<<16|65535&(i=c.default.nextPow2(i))),this.pool[r]||(this.pool[r]=[]);var s=this.pool[r].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new o.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=n,s.defaultFrame.width=s.size.width=e/n,s.defaultFrame.height=s.size.height=i/n,s.filterPoolKey=r,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(s.default);i.default=p},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("./WebGLManager")),s=n(t("../filters/spriteMask/SpriteMaskFilter")),o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,n=Math.atan2(i.b,i.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new s.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var n=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),t.filterArea=n,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(i.root?i.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);i.default=o},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./WebGLManager")),r=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.stencilMaskStack=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){n.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(n.default);i.default=r},{"./WebGLManager":93}],93:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();i.default=n},{}],94:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(function(t){return t&&t.__esModule?t:{default:t}}(t("../managers/WebGLManager")).default);i.default=n},{"../managers/WebGLManager":93}],95:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("pixi-gl-core")),s=n(t("../../../utils/createIndicesForQuads")),o=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;n<4;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,s.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,n=0;return this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+e.width/t.width,this.uvs[3]=n,this.uvs[4]=i+e.width/t.width,this.uvs[5]=n+e.height/t.height,this.uvs[6]=i,this.uvs[7]=n+e.height/t.height,i=e.x,n=e.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+e.width,this.vertices[3]=n,this.vertices[4]=i+e.width,this.vertices[5]=n+e.height,this.vertices[6]=i,this.vertices[7]=n+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();i.default=o},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../../math"),r=t("../../../const"),s=function(t){return t&&t.__esModule?t:{default:t}}(t("../../../settings")),o=t("pixi-gl-core"),a=function(){function t(e,i,a,h,l,u){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=l||s.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==h?h:s.default.SCALE_MODE,this.root=u||!1,this.root?(this.frameBuffer=new o.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=o.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===r.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,a)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();i.default=a},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(t,e,i){"use strict";function n(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}i.__esModule=!0,i.default=function(t,e){var i=!e;if(i){var o=document.createElement("canvas");o.width=1,o.height=1,e=r.default.createContext(o)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var h=s.replace(/%forloop%/gi,n(t));if(e.shaderSource(a,h),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var r=function(t){return t&&t.__esModule?t:{default:t}}(t("pixi-gl-core")),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":15}],98:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[t.ONE,t.ONE],e[n.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e};var n=t("../../../const")},{"../../../const":46}],99:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=t.POINTS,e[n.DRAW_MODES.LINES]=t.LINES,e[n.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var n=t("../../../const")},{"../../../const":46}],100:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("./utils/maxRecommendedTextures")),s=n(t("./utils/canUploadSameBuffer"));i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,s.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=t("../math"),o=t("../utils"),a=t("../const"),h=n(t("../textures/Texture")),l=n(t("../display/Container")),u=new s.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._anchor=new s.ObservablePoint(n._onAnchorUpdate,n,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),n._texture=null,n._width=0,n._height=0,n._tint=null,n._tintRGB=null,n.tint=16777215,n.blendMode=a.BLEND_MODES.NORMAL,n.shader=null,n.cachedTint=16777215,n.texture=i||h.default.EMPTY,n.vertexData=new Float32Array(8),n.vertexTrimmedData=null,n._transformID=-1,n._textureID=-1,n._transformTrimmedID=-1,n._textureTrimmedID=-1,n.pluginName="sprite",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,n=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,h=this.vertexData,l=t.trim,u=t.orig,c=this._anchor,d=0,p=0,f=0,g=0;l?(d=(p=l.x-c._x*u.width)+l.width,f=(g=l.y-c._y*u.height)+l.height):(d=(p=-c._x*u.width)+u.width,f=(g=-c._y*u.height)+u.height),h[0]=i*p+r*g+o,h[1]=s*g+n*p+a,h[2]=i*d+r*g+o,h[3]=s*g+n*d+a,h[4]=i*d+r*f+o,h[5]=s*f+n*d+a,h[6]=i*p+r*f+o,h[7]=s*f+n*p+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,n=this._anchor,r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,h=r.d,l=r.tx,u=r.ty,c=-n._x*i.width,d=c+i.width,p=-n._y*i.height,f=p+i.height;e[0]=s*c+a*p+l,e[1]=h*p+o*c+u,e[2]=s*d+a*p+l,e[3]=h*p+o*d+u,e[4]=s*d+a*f+l,e[5]=h*f+o*d+u,e[6]=s*c+a*f+l,e[7]=h*f+o*c+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,n=-e*this.anchor.x,r=0;return u.x>=n&&u.x<n+e&&(r=-i*this.anchor.y,u.y>=r&&u.y<r+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(h.default.from(t))},e.fromFrame=function(t){var i=o.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,n){return new e(h.default.fromImage(t,i,n))},r(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||h.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(l.default);i.default=c},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../../renderers/canvas/CanvasRenderer")),s=t("../../const"),o=t("../../math"),a=n(t("./CanvasTinter")),h=new o.Matrix,l=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,n=e._frame.width,r=e._frame.height,l=t.transform.worldTransform,u=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(u=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(u=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(l.copy(h),l=h,o.GroupD8.matrixAppendRotationInv(l,e.rotate,u,c),u=0,c=0),u-=n/2,c-=r/2,i.roundPixels?(i.context.setTransform(l.a,l.b,l.c,l.d,l.tx*i.resolution|0,l.ty*i.resolution|0),u|=0,c|=0):i.context.setTransform(l.a,l.b,l.c,l.d,l.tx*i.resolution,l.ty*i.resolution);var p=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=a.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,n*p,r*p,u*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*p,e._frame.y*p,n*p,r*p,u*i.resolution,c*i.resolution,n*i.resolution,r*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();i.default=l,r.default.registerPlugin("sprite",l)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../../utils"),r={getTintedTexture:function(t,e){var i=t._texture,n="#"+("00000"+(0|(e=r.roundColor(e))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var s=i.tintCache[n],o=void 0;if(s){if(s.tintId===i._updateID)return i.tintCache[n];o=i.tintCache[n]}else o=r.canvas||document.createElement("canvas");if(r.tintMethod(i,e,o),o.tintId=i._updateID,r.convertTintToImage){var a=new Image;a.src=o.toDataURL(),i.tintCache[n]=a}else i.tintCache[n]=o,r.canvas=null;return o},tintWithMultiply:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithOverlay:function(t,e,i){var n=i.getContext("2d"),r=t._frame.clone(),s=t.baseTexture.resolution;r.x*=s,r.y*=s,r.width*=s,r.height*=s,i.width=Math.ceil(r.width),i.height=Math.ceil(r.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),s=t._frame.clone(),o=t.baseTexture.resolution;s.x*=o,s.y*=o,s.width*=o,s.height*=o,i.width=Math.ceil(s.width),i.height=Math.ceil(s.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.restore();for(var a=(0,n.hex2rgb)(e),h=a[0],l=a[1],u=a[2],c=r.getImageData(0,0,s.width,s.height),d=c.data,p=0;p<d.length;p+=4)d[p+0]*=h,d[p+1]*=l,d[p+2]*=u;r.putImageData(c,0,0)},roundColor:function(t){var e=r.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(t){return t&&t.__esModule?t:{default:t}}(t("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel,i.default=r},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();i.default=n},{}],106:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("../../renderers/webgl/utils/ObjectRenderer")),s=n(t("../../renderers/webgl/WebGLRenderer")),o=n(t("../../utils/createIndicesForQuads")),a=n(t("./generateMultiTextureShader")),h=n(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),l=n(t("./BatchBuffer")),u=n(t("../../settings")),c=t("../../utils"),d=n(t("pixi-gl-core")),p=n(t("bit-twiddle")),f=0,g=0,v=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=u.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var r=1;r<=p.default.nextPow2(n.size);r*=2)n.buffers.push(new l.default(4*r*n.vertByteSize));n.indices=(0,o.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var s=0;s<n.size;s++)n.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,h.default)(this.MAX_TEXTURES,t)),this.shader=(0,a.default)(t,this.MAX_TEXTURES),this.indexBuffer=d.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var n=this.vertexBuffers[i]=d.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(n,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(n,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=p.default.nextPow2(this.currentIndex),n=p.default.log2(i),r=this.buffers[n],s=this.sprites,o=this.groups,a=r.float32View,h=r.uint32View,l=this.boundTextures,v=this.renderer.boundTextures,m=this.renderer.textureGC.count,y=0,_=void 0,b=void 0,w=1,x=0,T=o[0],E=void 0,S=void 0,A=c.premultiplyBlendMode[s[0]._texture.baseTexture.premultipliedAlpha?1:0][s[0].blendMode];T.textureCount=0,T.start=0,T.blend=A,f++;var P=void 0;for(P=0;P<e;++P){var M=v[P];M._enabled!==f?(l[P]=M,M._virtalBoundId=P,M._enabled=f):l[P]=this.renderer.emptyTextures[P]}for(f++,P=0;P<this.currentIndex;++P){var C=s[P];s[P]=null,_=C._texture.baseTexture;var I=c.premultiplyBlendMode[Number(_.premultipliedAlpha)][C.blendMode];if(A!==I&&(A=I,b=null,x=e,f++),b!==_&&(b=_,_._enabled!==f)){if(x===e&&(f++,T.size=P-T.start,x=0,(T=o[w++]).blend=A,T.textureCount=0,T.start=P),_.touched=m,-1===_._virtalBoundId)for(var O=0;O<e;++O){var R=(O+g)%e,L=l[R];if(L._enabled!==f){g++,L._virtalBoundId=-1,_._virtalBoundId=R,l[R]=_;break}}_._enabled=f,T.textureCount++,T.ids[x]=_._virtalBoundId,T.textures[x++]=_}if(E=C.vertexData,S=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;a[y]=(E[0]*D|0)/D,a[y+1]=(E[1]*D|0)/D,a[y+5]=(E[2]*D|0)/D,a[y+6]=(E[3]*D|0)/D,a[y+10]=(E[4]*D|0)/D,a[y+11]=(E[5]*D|0)/D,a[y+15]=(E[6]*D|0)/D,a[y+16]=(E[7]*D|0)/D}else a[y]=E[0],a[y+1]=E[1],a[y+5]=E[2],a[y+6]=E[3],a[y+10]=E[4],a[y+11]=E[5],a[y+15]=E[6],a[y+16]=E[7];h[y+2]=S[0],h[y+7]=S[1],h[y+12]=S[2],h[y+17]=S[3];var k=Math.min(C.worldAlpha,1),j=k<1&&_.premultipliedAlpha?(0,c.premultiplyTint)(C._tintRGB,k):C._tintRGB+(255*k<<24);h[y+3]=h[y+8]=h[y+13]=h[y+18]=j,a[y+4]=a[y+9]=a[y+14]=a[y+19]=_._virtalBoundId,y+=20}if(T.size=P-T.start,u.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=d.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,N.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,N.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,N.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&U.addAttribute(B,N.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(P=0;P<e;++P)v[P]._virtalBoundId=-1;for(P=0;P<w;++P){for(var F=o[P],X=F.textureCount,V=0;V<X;V++)b=F.textures[V],v[F.ids[V]]!==b&&this.renderer.bindTexture(b,F.ids[V],!0),b._virtalBoundId=-1;this.renderer.state.setBlendMode(F.blend),t.drawElements(t.TRIANGLES,6*F.size,t.UNSIGNED_SHORT,6*F.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(r.default);i.default=v,s.default.registerPlugin("sprite",v)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=r;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var s=new n.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),o=[],a=0;a<e;a++)o[a]=a;return s.bind(),s.uniforms.uSamplers=o,s};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("../../Shader")),r=(t("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:8}],108:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(t("../sprites/Sprite")),o=n(t("../textures/Texture")),a=t("../math"),h=t("../utils"),l=t("../const"),u=n(t("../settings")),c=n(t("./TextStyle")),d=n(t("./TextMetrics")),p=n(t("../utils/trimCanvas")),f={texture:!0,children:!1,baseTexture:!0},g=function(t){function e(i,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(r=r||document.createElement("canvas")).width=3,r.height=3;var s=o.default.fromCanvas(r,u.default.SCALE_MODE,"text");s.orig=new a.Rectangle,s.trim=new a.Rectangle;var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,s));return o.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=r,h.context=h.canvas.getContext("2d"),h.resolution=u.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=n,h.localStyleID=-1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,n=d.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,s=n.height,o=n.lines,a=n.lineHeight,h=n.lineWidths,l=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil((Math.max(1,r)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var c=void 0,p=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var f=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,v=0;v<o.length;v++)c=e.strokeThickness/2,p=e.strokeThickness/2+v*a+u.ascent,"right"===e.align?c+=l-h[v]:"center"===e.align&&(c+=(l-h[v])/2),e.fill&&(this.drawLetterSpacing(o[v],c+f+e.padding,p+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[v],c+f+e.padding,p+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,o);for(var m=0;m<o.length;m++)c=e.strokeThickness/2,p=e.strokeThickness/2+m*a+u.ascent,"right"===e.align?c+=l-h[m]:"center"===e.align&&(c+=(l-h[m])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[m],c+e.padding,p+e.padding,!0),e.fill&&this.drawLetterSpacing(o[m],c+e.padding,p+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this._style.letterSpacing;if(0!==r)for(var s=String.prototype.split.call(t,""),o=e,a=0,h="",l=this.context.measureText(t).width,u=0;a<t.length;)h=s[a++],n?this.context.strokeText(h,o,i):this.context.fillText(h,o,i),o+=l-(u=this.context.measureText(t.substring(a)).width)+r,l=u;else n?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,p.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,n=this._style,r=n.trim?0:n.padding,s=i.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=t.width,s.realHeight=t.height,s.width=t.width/this.resolution,s.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-r,i.trim.y=-r,i.orig.width=i._frame.width-2*r,i.orig.height=i._frame.height-2*r,this._onTextureUpdate(),s.emit("update",s),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,n=void 0,r=void 0,s=void 0,o=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=h.length+1,d=1;d<c;++d)u.push(d/c);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(o/2,0,o/2,a),n=(h.length+1)*e.length,r=0;for(var p=0;p<e.length;p++){r+=1;for(var f=0;f<h.length;f++)s="number"==typeof u[f]?u[f]/e.length+p/e.length:r/n,i.addColorStop(s,h[f]),r++}}else{i=this.context.createLinearGradient(0,a/2,o,a/2),n=h.length+1,r=1;for(var g=0;g<h.length;g++)s="number"==typeof u[g]?u[g]:r/n,i.addColorStop(s,h[g]),r++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},f,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof c.default?this._style=t:this._style=new c.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(s.default);i.default=g},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e,i,n,r,s,o,a,h,l){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.text=e,this.style=i,this.width=n,this.height=r,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=l}return t.measureText=function(e,i,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;n=void 0===n||null===n?i.wordWrap:n;var s=i.toFontString(),o=t.measureFont(s),a=r.getContext("2d");a.font=s;for(var h=(n?t.wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),u=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;l[c]=d,u=Math.max(u,d)}var p=u+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||o.fontSize+i.strokeThickness,g=Math.max(f,o.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(g+=i.dropShadowDistance),new t(e,i,p,g,h,l,f+i.leading,u,o)},t.wordWrap=function(e,i){for(var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d"),r=0,s="",o="",a={},h=i.letterSpacing,l=i.whiteSpace,u=t.collapseSpaces(l),c=t.collapseNewlines(l),d=!u,p=i.wordWrapWidth+h,f=t.tokenize(e),g=0;g<f.length;g++){var v=f[g];if(t.isNewline(v)){if(!c){o+=t.addLine(s),d=!u,s="",r=0;continue}v=" "}if(u){var m=t.isBreakingSpace(v),y=t.isBreakingSpace(s[s.length-1]);if(m&&y)continue}var _=t.getFromCache(v,h,a,n);if(_>p)if(""!==s&&(o+=t.addLine(s),s="",r=0),t.canBreakWords(v,i.breakWords))for(var b=v.split(""),w=0;w<b.length;w++){for(var x=b[w],T=1;b[w+T];){var E=b[w+T],S=x[x.length-1];if(t.canBreakChars(S,E,v,w,i.breakWords))break;x+=E,T++}w+=x.length-1;var A=t.getFromCache(x,h,a,n);A+r>p&&(o+=t.addLine(s),d=!1,s="",r=0),s+=x,r+=A}else{s.length>0&&(o+=t.addLine(s),s="",r=0);var P=g===f.length-1;o+=t.addLine(v,!P),d=!1,s="",r=0}else _+r>p&&(d=!1,o+=t.addLine(s),s="",r=0),(s.length>0||!t.isBreakingSpace(v)||d)&&(s+=v,r+=_)}return o+t.addLine(s,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),i?e+"\n":e},t.getFromCache=function(t,e,i,n){var r=i[t];if(void 0===r){var s=t.length*e;r=n.measureText(t).width+s,i[t]=r}return r},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var n=e[i];if(!t.isBreakingSpace(n))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],n="";if("string"!=typeof e)return i;for(var r=0;r<e.length;r++){var s=e[r];t.isBreakingSpace(s)||t.isNewline(s)?(""!==n&&(i.push(n),n=""),i.push(s)):n+=s}return""!==n&&i.push(n),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,n,r){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},n=t._canvas,r=t._context;r.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(r.measureText(s).width),a=Math.ceil(r.measureText(t.BASELINE_SYMBOL).width),h=2*a;a=a*t.BASELINE_MULTIPLIER|0,n.width=o,n.height=h,r.fillStyle="#f00",r.fillRect(0,0,o,h),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText(s,0,a);var l=r.getImageData(0,0,o,h).data,u=l.length,c=4*o,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var g=0;g<c;g+=4)if(255!==l[p+g]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=u-c,f=!1,d=h;d>a;--d){for(var v=0;v<c;v+=4)if(255!==l[p+v]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();i.default=n;var r=document.createElement("canvas");r.width=r.height=10,n._canvas=r,n._context=r.getContext("2d"),n._fonts={},n.METRICS_STRING="|q",n.BASELINE_SYMBOL="M",n.BASELINE_MULTIPLIER=1.4,n._newlines=[10,13],n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(t,e,i){"use strict";function n(t){return"number"==typeof t?(0,h.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function r(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=n(t[e]);return t}return n(t)}function s(t,e,i){for(var n in i)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}i.__esModule=!0;var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),a=t("../const"),h=t("../utils"),l={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:a.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},u=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],c=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.styleID=0,this.reset(),s(this,e,e)}return t.prototype.clone=function(){var e={};return s(e,this,l),new t(e)},t.prototype.reset=function(){s(this,l,l)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var n=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&u.indexOf(n)<0&&(n='"'+n+'"'),e[i]=n}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},o(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=r(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=r(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=r(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();i.default=c},{"../const":46,"../utils":125}],111:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("./BaseTexture")),s=n(t("../settings")),o=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],o=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,r));return a.resolution=o||s.default.RESOLUTION,a.width=Math.ceil(i),a.height=Math.ceil(n),a.realWidth=a.width*a.resolution,a.realHeight=a.height*a.resolution,a.scaleMode=void 0!==r?r:s.default.SCALE_MODE,a.hasLoaded=!0,a._glRenderTargets={},a._canvasRenderTarget=null,a.valid=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);i.default=o},{"../settings":101,"./BaseTexture":112}],112:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("../utils"),s=n(t("../settings")),o=n(t("eventemitter3")),a=n(t("../utils/determineCrossOrigin")),h=n(t("bit-twiddle")),l=function(t){function e(i,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,r.uid)(),a.touched=0,a.resolution=o||s.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==n?n:s.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=s.default.MIPMAP_TEXTURES,a.wrapMode=s.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],i&&a.loadSource(i),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=h.default.isPow2(this.realWidth)&&h.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var n=this;if(t.onload=function(){if(n._updateImageType(),t.onload=null,t.onerror=null,n.isLoading){if(n.isLoading=!1,n._sourceLoaded(),"svg"===n.imageType)return void n._loadSvgSource();n.emit("loaded",n)}},t.onerror=function(){t.onload=null,t.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,r.getSvgSize)(t),n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(s*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,r.uid)(),o.getContext("2d").drawImage(this.source,0,0,n,s,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,s){var o=r.BaseTextureCache[t];if(!o){var h=new Image;void 0===i&&0!==t.indexOf("data:")?h.crossOrigin=(0,a.default)(t):i&&(h.crossOrigin="string"==typeof i?i:"anonymous"),(o=new e(h,n)).imageUrl=t,s&&(o.sourceScale=s),o.resolution=(0,r.getResolutionOfUrl)(t),h.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,r.uid)());var s=r.BaseTextureCache[t._pixiId];return s||(s=new e(t,i),e.addToCache(s,t._pixiId)),s},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var s=t.src,o=r.BaseTextureCache[s];return o||((o=new e(t,i)).imageUrl=s,n&&(o.sourceScale=n),o.resolution=(0,r.getResolutionOfUrl)(s),e.addToCache(o,s)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(o.default);i.default=l},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("./BaseRenderTexture")),s=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=null;if(!(i instanceof r.default)){var o=arguments[1],a=arguments[2],h=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+a+") instead of the ctor directly."),s=arguments[0],n=null,i=new r.default(o,a,h,l)}var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));return u.legacyRenderer=s,u.valid=!0,u._updateUvs(),u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,s){return new e(new r.default(t,i,n,s))},e}(n(t("./Texture")).default);i.default=s},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=t("../"),s=t("../utils"),o=function(){function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,n=t.BATCH_SIZE,s=this.baseTexture.sourceScale;i-e<n&&i<this._frameKeys.length;){var o=this._frameKeys[i],a=this._frames[o],h=a.frame;if(h){var l,u=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,d=new r.Rectangle(0,0,Math.floor(c.w*s)/this.resolution,Math.floor(c.h*s)/this.resolution);l=a.rotated?new r.Rectangle(Math.floor(h.x*s)/this.resolution,Math.floor(h.y*s)/this.resolution,Math.floor(h.h*s)/this.resolution,Math.floor(h.w*s)/this.resolution):new r.Rectangle(Math.floor(h.x*s)/this.resolution,Math.floor(h.y*s)/this.resolution,Math.floor(h.w*s)/this.resolution,Math.floor(h.h*s)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new r.Rectangle(Math.floor(a.spriteSourceSize.x*s)/this.resolution,Math.floor(a.spriteSourceSize.y*s)/this.resolution,Math.floor(h.w*s)/this.resolution,Math.floor(h.h*s)/this.resolution)),this.textures[o]=new r.Texture(this.baseTexture,l,d,u,a.rotated?2:0,a.anchor),r.Texture.addToCache(this.textures[o],o)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var i=t[e],n=Array.isArray(i),r=0;for(i=n?i:i[Symbol.iterator]();;){var s;if(n){if(r>=i.length)break;s=i[r++]}else{if((r=i.next()).done)break;s=r.value}var o=s;this.animations[e].push(this.textures[o])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();i.default=o},{"../":65,"../utils":125}],115:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(t("./BaseTexture")),a=n(t("./VideoBaseTexture")),h=n(t("./TextureUvs")),l=n(t("eventemitter3")),u=t("../math"),c=t("../utils"),d=n(t("../settings")),p=function(t){function e(i,n,r,s,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(h.noFrame=!1,n||(h.noFrame=!0,n=new u.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=n,h.trim=s,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=r||n,h._rotate=Number(o||0),!0===o)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(h.noFrame&&(n=new u.Rectangle(0,0,i.width,i.height),i.on("update",h.onBaseTextureUpdated,h)),h.frame=n):i.once("loaded",h.onBaseTextureLoaded,h),h.defaultAnchor=a?new u.Point(a.x,a.y):new u.Point(0,0),h._updateID=0,h.transform=null,h.textureCacheIds=[],h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new u.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(c.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new h.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,n,r){var s=c.TextureCache[t];return s||(s=new e(o.default.fromImage(t,i,n,r)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=c.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(o.default.fromCanvas(t,i,n))},e.fromVideo=function(t,i,n,r){return"string"==typeof t?e.fromVideoUrl(t,i,n,r):new e(a.default.fromVideo(t,i,r))},e.fromVideoUrl=function(t,i,n,r){return new e(a.default.fromUrl(t,i,n,r))},e.from=function(t){if("string"==typeof t){var i=c.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(o.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,d.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof o.default?new e(t):t},e.fromLoader=function(t,i,n){var r=new o.default(t,void 0,(0,c.getResolutionOfUrl)(i)),s=new e(r);return r.imageUrl=i,n||(n=i),o.default.addToCache(s.baseTexture,n),e.addToCache(s,n),n!==i&&(o.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),c.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=c.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete c.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)c.TextureCache[t.textureCacheIds[n]]===t&&delete c.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},s(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,n=t.width,r=t.height,s=e+n>this.baseTexture.width,o=i+r>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+i+" + "+r+" = "+(i+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=n&&r&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(l.default);i.default=p,p.EMPTY=new p(new o.default),r(p.EMPTY),r(p.EMPTY.baseTexture),p.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new p(new o.default(t))}(),r(p.WHITE),r(p.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(t("../math/Matrix")),s=new r.default,o=function(){function t(e,i){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._texture=e,this.mapCoord=new r.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,n=0;n<t.length;n+=2){var r=t[n],s=t[n+1];e[n]=r*i.a+s*i.c+i.tx,e[n+1]=r*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var n=e.orig,r=e.trim;r&&(s.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(s));var o=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(e._frame.x+h+l)/o.width,a[1]=(e._frame.y+h+l)/o.height,a[2]=(e._frame.x+e._frame.width-h+l)/o.width,a[3]=(e._frame.y+e._frame.height-h+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();i.default=o},{"../math/Matrix":67}],117:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("../math/GroupD8")),r=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var r=e.width,s=e.height;if(i){var o=t.width/2/r,a=t.height/2/s,h=t.x/r+o,l=t.y/s+a;i=n.default.add(i,n.default.NW),this.x0=h+o*n.default.uX(i),this.y0=l+a*n.default.uY(i),i=n.default.add(i,2),this.x1=h+o*n.default.uX(i),this.y1=l+a*n.default.uY(i),i=n.default.add(i,2),this.x2=h+o*n.default.uX(i),this.y2=l+a*n.default.uY(i),i=n.default.add(i,2),this.x3=h+o*n.default.uX(i),this.y3=l+a*n.default.uY(i)}else this.x0=t.x/r,this.y0=t.y/s,this.x1=(t.x+t.width)/r,this.y1=t.y/s,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/s,this.x3=t.x/r,this.y3=(t.y+t.height)/s;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();i.default=r},{"../math/GroupD8":66}],118:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!e){var i=t.split("?").shift().toLowerCase();e="video/"+i.substr(i.lastIndexOf(".")+1)}var n=document.createElement("source");return n.src=t,n.type=e,n}i.__esModule=!0;var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=n(t("./BaseTexture")),a=t("../utils"),h=t("../ticker"),l=t("../const"),u=n(t("../utils/determineCrossOrigin")),c=function(t){function e(i,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));return s.width=i.videoWidth,s.height=i.videoHeight,s._autoUpdate=!0,s._isAutoUpdating=!1,s.autoPlay=r,s.update=s.update.bind(s),s._onCanPlay=s._onCanPlay.bind(s),i.addEventListener("play",s._onPlayStart.bind(s)),i.addEventListener("pause",s._onPlayStop.bind(s)),s.hasLoaded=!1,s.__loaded=!1,s._isSourceReady()?s._onCanPlay():(i.addEventListener("canplay",s._onCanPlay),i.addEventListener("canplaythrough",s._onCanPlay)),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(h.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(h.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&h.shared.remove(this.update,this),this.source&&this.source._pixiId&&(o.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i,n){t._pixiId||(t._pixiId="video_"+(0,a.uid)());var r=a.BaseTextureCache[t._pixiId];return r||(r=new e(t,i,n),o.default.addToCache(r,t._pixiId)),r},e.fromUrl=function(t,i,n,s){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var a=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===n&&0!==a.indexOf("data:")?o.crossOrigin=(0,u.default)(a):n&&(o.crossOrigin="string"==typeof n?n:"anonymous"),Array.isArray(t))for(var h=0;h<t.length;++h)o.appendChild(r(t[h].src||t[h],t[h].mime));else o.appendChild(r(a,t.mime));return o.load(),e.fromVideo(o,i,s)},s(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(h.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(h.shared.add(this.update,this,l.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(o.default);i.default=c,c.fromUrls=c.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(t("../settings")),o=t("../const"),a=n(t("./TickerListener")),h=function(){function t(){var e=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s.default.TARGET_FPMS*this.speed;for(var i=this._head,n=i.next;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();i.default=h},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.fn=e,this.context=i,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();i.default=n},{}],121:[function(t,e,i){"use strict";i.__esModule=!0,i.Ticker=i.shared=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Ticker")),r=new n.default;r.autoStart=!0,r.destroy=function(){},i.shared=r,i.Ticker=n.default},{"./Ticker":119}],122:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=6*t,i=new Uint16Array(e),n=0,r=0;n<e;n+=6,r+=4)i[n+0]=r+0,i[n+1]=r+1,i[n+2]=r+2,i[n+3]=r+0,i[n+4]=r+2,i[n+5]=r+3;return i}},{}],124:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,r||(r=document.createElement("a")),r.href=t;var i=!(t=n.default.parse(r.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("url")),r=void 0},{url:38}],125:[function(t,e,i){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function r(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.premultiplyBlendMode=i.BaseTextureCache=i.TextureCache=i.earcut=i.mixins=i.pluginTarget=i.EventEmitter=i.removeItems=i.isMobile=void 0,i.uid=function(){return++f},i.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},i.hex2string=function(t){return t=t.toString(16),"#"+("000000".substr(0,6-t.length)+t)},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},i.getResolutionOfUrl=function(t,e){var i=o.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1},i.decomposeDataUri=function(t){var e=s.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},i.getUrlFileExtension=function(t){var e=s.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},i.getSvgSize=function(t){var e=s.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i},i.skipHello=function(){g=!0},i.sayHello=function(t){if(!g){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+s.VERSION+" -  "+t+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+s.VERSION+" - "+t+" - http://www.pixijs.com/");g=!0}},i.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var r=i.getExtension("WEBGL_lose_context");r&&r.loseContext()}return i=null,n}catch(t){return!1}},i.sign=function(t){return 0===t?0:t<0?-1:1},i.destroyTextureCache=function(){var t=void 0;for(t in v)v[t].destroy();for(t in m)m[t].destroy()},i.clearTextureCache=function(){var t=void 0;for(t in v)delete v[t];for(t in m)delete m[t]},i.correctBlendMode=function(t,e){return y[e?1:0][t]},i.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,n=t>>8&255,r=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((n=n*e+.5|0)<<8)+(r=r*e+.5|0)},i.premultiplyRgba=function(t,e,i,n){return i=i||new Float32Array(4),n||void 0===n?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i},i.premultiplyTintToRgba=function(t,e,i,n){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(n||void 0===n)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i};var s=t("../const"),o=r(t("../settings")),a=r(t("eventemitter3")),h=r(t("./pluginTarget")),l=n(t("./mixin")),u=n(t("ismobilejs")),c=r(t("remove-array-items")),d=r(t("./mapPremultipliedBlendModes")),p=r(t("earcut")),f=0,g=!1;i.isMobile=u,i.removeItems=c.default,i.EventEmitter=a.default,i.pluginTarget=h.default,i.mixins=l,i.earcut=p.default;var v=i.TextureCache=Object.create(null),m=i.BaseTextureCache=Object.create(null),y=i.premultiplyBlendMode=(0,d.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[n.BLEND_MODES.NORMAL_NPM]=n.BLEND_MODES.NORMAL,t[n.BLEND_MODES.ADD_NPM]=n.BLEND_MODES.ADD,t[n.BLEND_MODES.SCREEN_NPM]=n.BLEND_MODES.SCREEN,e[n.BLEND_MODES.NORMAL]=n.BLEND_MODES.NORMAL_NPM,e[n.BLEND_MODES.ADD]=n.BLEND_MODES.ADD_NPM,e[n.BLEND_MODES.SCREEN]=n.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r};var n=t("../const")},{"../const":46}],127:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){return n.default.tablet||n.default.phone?4:t};var n=function(t){return t&&t.__esModule?t:{default:t}}(t("ismobilejs"))},{ismobilejs:4}],128:[function(t,e,i){"use strict";function n(t,e){if(t&&e)for(var i=Object.keys(e),n=0;n<i.length;++n){var r=i[n];Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}}i.__esModule=!0,i.mixin=n,i.delayMixin=function(t,e){r.push(t,e)},i.performMixins=function(){for(var t=0;t<r.length;t+=2)n(r[t],r[t+1]);r.length=0};var r=[]},{}],129:[function(t,e,i){"use strict";i.__esModule=!0,i.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],130:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=t.width,i=t.height,n=t.getContext("2d"),r=n.getImageData(0,0,e,i).data,s=r.length,o={top:null,left:null,right:null,bottom:null},a=null,h=void 0,l=void 0,u=void 0;for(h=0;h<s;h+=4)0!==r[h+3]&&(l=h/4%e,u=~~(h/4/e),null===o.top&&(o.top=u),null===o.left?o.left=l:l<o.left&&(o.left=l),null===o.right?o.right=l+1:o.right<l&&(o.right=l+1),null===o.bottom?o.bottom=u:o.bottom<u&&(o.bottom=u));return null!==o.top&&(e=o.right-o.left,i=o.bottom-o.top+1,a=n.getImageData(o.left,o.top,e,i)),{height:i,width:e,data:a}}},{}],131:[function(t,e,i){"use strict";function n(t){if(!r[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),r[t]=!0}}i.__esModule=!0,i.default=function(t){var e=t.mesh,i=t.particles,r=t.extras,s=t.filters,o=t.prepare,a=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=0;u<l.length;u++)!function(e){var i=l[u];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})}();Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),r&&Object.defineProperties(r,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var s=0;s<i;++s)if(e[s].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[s];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var o=i+1;o<e.length;++o)this._fontFamily+=e[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(s,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),s.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var c=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=t},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var d=a.Resource,p=a.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var r={}},{}],132:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),r=new n.Rectangle,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,o=void 0,a=void 0;t&&(a=t instanceof n.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,s=a.baseTexture._canvasRenderTarget.resolution,o=a.frame):(i=e.rootContext,s=e.resolution,(o=r).width=this.renderer.width,o.height=this.renderer.height);var h=Math.floor(o.width*s+1e-4),l=Math.floor(o.height*s+1e-4),u=new n.CanvasRenderTarget(h,l,1),c=i.getImageData(o.x*s,o.y*s,h,l);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,o=void 0,a=void 0;return t&&(a=t instanceof n.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,s=a.baseTexture._canvasRenderTarget.resolution,o=a.frame):(i=e.rootContext,(o=r).width=e.width,o.height=e.height),i.getImageData(0,0,o.width*s,o.height*s).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=s,n.CanvasRenderer.registerPlugin("extract",s)},{"../../core":65}],133:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var s=t("./canvas/CanvasExtract");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(s).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),r=new n.Rectangle,s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,o=void 0,a=!1,h=void 0,l=!1;t&&(t instanceof n.RenderTexture?h=t:(h=this.renderer.generateTexture(t),l=!0)),h?(s=(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,o=h.frame,a=!1):(s=(i=this.renderer.rootRenderTarget).resolution,a=!0,(o=r).width=i.size.width,o.height=i.size.height);var u=Math.floor(o.width*s+1e-4),c=Math.floor(o.height*s+1e-4),d=new n.CanvasRenderTarget(u,c,1);if(i){e.bindRenderTarget(i);var p=new Uint8Array(4*u*c),f=e.gl;f.readPixels(o.x*s,o.y*s,u,c,f.RGBA,f.UNSIGNED_BYTE,p);var g=d.context.getImageData(0,0,u,c);g.data.set(p),d.context.putImageData(g,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return l&&h.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,o=void 0,a=void 0,h=!1;t&&(t instanceof n.RenderTexture?a=t:(a=this.renderer.generateTexture(t),h=!0)),a?(s=(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,o=a.frame):(s=(i=this.renderer.rootRenderTarget).resolution,(o=r).width=i.size.width,o.height=i.size.height);var l=o.width*s,u=o.height*s,c=new Uint8Array(4*l*u);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(o.x*s,o.y*s,l,u,d.RGBA,d.UNSIGNED_BYTE,c)}return h&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=s,n.WebGLRenderer.registerPlugin("extract",s)},{"../../core":65}],135:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof r.Texture?i[0]:i[0].texture));return s._textures=null,s._durations=null,s.textures=i,s._autoUpdate=!1!==n,s.animationSpeed=1,s.loop=!0,s.updateAnchor=!1,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s.playing=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&r.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&r.ticker.shared.add(this.update,this,r.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=e/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var r=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*r,this._currentTime+=r;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromFrame(t[n]));return new e(i)},e.fromImages=function(t){for(var i=[],n=0;n<t.length;++n)i.push(r.Texture.fromImage(t[n]));return new e(i)},n(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof r.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(r.Sprite);i.default=s},{"../core":65}],136:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=n(t("../core/math/ObservablePoint")),a=t("../core/utils"),h=n(t("../core/settings")),l=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==n.tint?n.tint:16777215,align:n.align||"left",name:null,size:0},r.font=n.font,r._text=i,r._maxWidth=0,r._maxLineHeight=0,r._letterSpacing=0,r._anchor=new o.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,n=new s.Point,r=[],o=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),h=a.length,l=this._maxWidth*t.size/this._font.size,u=null,c=0,d=0,p=0,f=-1,g=0,v=0,m=0,y=0;y<h;y++){var _=a.charCodeAt(y),b=a.charAt(y);if(/(?:\s)/.test(b)&&(f=y,g=c),"\r"!==b&&"\n"!==b){var w=t.chars[_];w&&(u&&w.kerning[u]&&(n.x+=w.kerning[u]),r.push({texture:w.texture,line:p,charCode:_,position:new s.Point(n.x+w.xOffset+this._letterSpacing/2,n.y+w.yOffset)}),n.x+=w.xAdvance+this._letterSpacing,c=n.x,m=Math.max(m,w.yOffset+w.texture.height),u=_,-1!==f&&l>0&&n.x>l&&(++v,s.utils.removeItems(r,1+f-v,1+y-f),y=f,f=-1,o.push(g),d=Math.max(d,g),p++,n.x=0,n.y+=t.lineHeight,u=null))}else o.push(c),d=Math.max(d,c),++p,++v,n.x=0,n.y+=t.lineHeight,u=null}var x=a.charAt(a.length-1);"\r"!==x&&"\n"!==x&&(/(?:\s)/.test(x)&&(c=g),o.push(c),d=Math.max(d,c));for(var T=[],E=0;E<=p;E++){var S=0;"right"===this._font.align?S=d-o[E]:"center"===this._font.align&&(S=(d-o[E])/2),T.push(S)}for(var A=r.length,P=this.tint,M=0;M<A;M++){var C=this._glyphs[M];C?C.texture=r[M].texture:(C=new s.Sprite(r[M].texture),this._glyphs.push(C)),C.position.x=(r[M].position.x+T[r[M].line])*i,C.position.y=r[M].position.y*i,C.scale.x=C.scale.y=i,C.tint=P,C.parent||this.addChild(C)}for(var I=A;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=d*i,this._textHeight=(n.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var O=0;O<A;O++)this._glyphs[O].x-=this._textWidth*this.anchor.x,this._glyphs[O].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var n={},r=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],l=t.getElementsByTagName("page"),u=(0,a.getResolutionOfUrl)(l[0].getAttribute("file"),h.default.RESOLUTION),c={};n.font=r.getAttribute("face"),n.size=parseInt(r.getAttribute("size"),10),n.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/u,n.chars={},i instanceof s.Texture&&(i=[i]);for(var d=0;d<l.length;d++){var p=l[d].getAttribute("id"),f=l[d].getAttribute("file");c[p]=i instanceof Array?i[d]:i[f]}for(var g=t.getElementsByTagName("char"),v=0;v<g.length;v++){var m=g[v],y=parseInt(m.getAttribute("id"),10),_=m.getAttribute("page")||0,b=new s.Rectangle(parseInt(m.getAttribute("x"),10)/u+c[_].frame.x/u,parseInt(m.getAttribute("y"),10)/u+c[_].frame.y/u,parseInt(m.getAttribute("width"),10)/u,parseInt(m.getAttribute("height"),10)/u);n.chars[y]={xOffset:parseInt(m.getAttribute("xoffset"),10)/u,yOffset:parseInt(m.getAttribute("yoffset"),10)/u,xAdvance:parseInt(m.getAttribute("xadvance"),10)/u,kerning:{},texture:new s.Texture(c[_].baseTexture,b),page:_}}for(var w=t.getElementsByTagName("kerning"),x=0;x<w.length;x++){var T=w[x],E=parseInt(T.getAttribute("first"),10)/u,S=parseInt(T.getAttribute("second"),10)/u,A=parseInt(T.getAttribute("amount"),10)/u;n.chars[S]&&(n.chars[S].kerning[E]=A)}return e.fonts[n.font]=n,n},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(s.Container);i.default=l,l.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=function(t){return t&&t.__esModule?t:{default:t}}(t("../core/sprites/canvas/CanvasTinter")),o=new r.Point,a=function(t){function e(i){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return o.tileTransform=new r.TransformStatic,o._width=n,o._height=s,o._canvasPattern=null,o.uvTransform=i.transform||new r.TextureMatrix(i),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,n=this.worldTransform,o=t.resolution,a=2===e.rotate,h=e.baseTexture,l=h.resolution,u=this.tilePosition.x/this.tileScale.x%e.orig.width*l,c=this.tilePosition.y/this.tileScale.y%e.orig.height*l;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var d=new r.CanvasRenderTarget(e.orig.width,e.orig.height,l);if(16777215!==this.tint)this.tintedTexture=s.default.getTintedTexture(this,this.tint),d.context.drawImage(this.tintedTexture,0,0);else{var p=e._frame.x*l,f=e._frame.y*l,g=e._frame.width*l,v=e._frame.height*l,m=(e.trim?e.trim.width:e.orig.width)*l,y=(e.trim?e.trim.height:e.orig.height)*l,_=(e.trim?e.trim.x:0)*l,b=(e.trim?e.trim.y:0)*l;a?(d.context.rotate(-Math.PI/2),d.context.translate(-y,0),d.context.drawImage(h.source,p,f,g,v,-b,_,y,m)):d.context.drawImage(h.source,p,f,g,v,_,b,m,y)}this.cachedTint=this.tint,this._canvasPattern=d.context.createPattern(d.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/l,this.tileScale.y/l);var w=this.anchor.x*-this._width*l,x=this.anchor.y*-this._height*l;this.uvRespectAnchor?(i.translate(u,c),i.fillRect(-u+w,-c+x,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l)):(i.translate(u+w,c+x),i.fillRect(-u,-c,this._width/this.tileScale.x*l,this._height/this.tileScale.y*l))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,n)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new r.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,o);var e=this._width,i=this._height,n=-e*this.anchor._x;if(o.x>=n&&o.x<n+e){var r=-i*this.anchor._y;if(o.y>=r&&o.y<r+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,n){return new e(r.Texture.from(t),i,n)},e.fromFrame=function(t,i,n){var s=r.utils.TextureCache[t];if(!s)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(s,i,n)},e.fromImage=function(t,i,n,s,o){return new e(r.Texture.fromImage(t,s,o),i,n)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(r.Sprite);i.default=a},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=n(t("../core/textures/Texture")),o=n(t("../core/textures/BaseTexture")),a=t("../core/utils"),h=r.DisplayObject,l=new r.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var u=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new u),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},h.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var n=this._filters[0].padding;i.pad(n)}i.ceil(r.settings.RESOLUTION);var h=t._activeRenderTarget,u=t.filterManager.filterStack,c=r.RenderTexture.create(i.width,i.height),d="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(c.baseTexture,d),s.default.addToCache(c,d);var p=l;p.tx=-i.x,p.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,p,!0),t.bindRenderTarget(h),t.filterManager.filterStack=u,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var f=new r.Sprite(c);f.transform.worldTransform=this.transform.worldTransform,f.anchor.x=-i.x/i.width,f.anchor.y=-i.y/i.height,f.alpha=e,f._bounds=this._bounds,this._cacheData.sprite=f,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=f.containsPoint.bind(f)}},h.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},h.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var n=t.context;e.ceil(r.settings.RESOLUTION);var h=r.RenderTexture.create(e.width,e.height),u="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=u,o.default.addToCache(h.baseTexture,u),s.default.addToCache(h,u);var c=l;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,h,!0,c,!1),t.context=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},h.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),s.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(t,e,i){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core"));n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":65}],140:[function(t,e,i){"use strict";var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":65}],141:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.AnimatedSprite=void 0;var r=t("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var s=t("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return n(s).default}});var o=t("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./BitmapText");Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),r=t("../../core/const"),s=(t("path"),new n.Matrix),o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.simpleShader=null,n.quad=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new n.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new n.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var o=i.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((o=i.uvs)[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y),i.upload();var a=t._texture,h=a.baseTexture,l=t.tileTransform.localTransform,u=t.uvTransform,c=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==r.WRAP_MODES.CLAMP:h.wrapMode===r.WRAP_MODES.CLAMP&&(h.wrapMode=r.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var p=a.width,f=a.height,g=t._width,v=t._height;s.set(l.a*p/g,l.b*p/v,l.c*f/g,l.d*f/v,l.tx/g,l.ty/v),s.invert(),c?s.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=s.toArray(!0),d.uniforms.uColor=n.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,h.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(n.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(n.ObjectRenderer);i.default=o,n.WebGLRenderer.registerPlugin("tilingSprite",o)},{"../../core":65,"../../core/const":46,path:8}],143:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return n.alpha=i,n.glShaderKey="alpha",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(r.Filter));i.default=s},{"../../core":65,path:8}],144:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=n(t("./BlurXFilter")),a=n(t("./BlurYFilter")),h=function(t){function e(i,n,r,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l.blurXFilter=new o.default(i,n,r,h),l.blurYFilter=new a.default(i,n,r,h),l.padding=0,l.resolution=r||s.settings.RESOLUTION,l.quality=n||4,l.blur=i||8,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var n=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,n,!0),this.blurYFilter.apply(t,n,i,!1),t.returnRenderTarget(n)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(s.Filter);i.default=h},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=n(t("./generateBlurVertSource")),a=n(t("./generateBlurFragSource")),h=n(t("./getMaxBlurKernelSize")),l=function(t){function e(i,n,r,h){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),h=h||5;var l=(0,o.default)(h,!0),u=(0,a.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,u));return c.resolution=r||s.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,h.default)(r);this.vertexSrc=(0,o.default)(s,!0),this.fragmentSrc=(0,a.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var l=t.getRenderTarget(!0),u=e,c=l,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,n),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(s.Filter);i.default=l},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=n(t("./generateBlurVertSource")),a=n(t("./generateBlurFragSource")),h=n(t("./getMaxBlurKernelSize")),l=function(t){function e(i,n,r,h){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),h=h||5;var l=(0,o.default)(h,!1),u=(0,a.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,l,u));return c.resolution=r||s.settings.RESOLUTION,c._quality=0,c.quality=n||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,n){if(this.firstRun){var r=t.renderer.gl,s=(0,h.default)(r);this.vertexSrc=(0,o.default)(s,!1),this.fragmentSrc=(0,a.default)(s),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,n);else{for(var l=t.getRenderTarget(!0),u=e,c=l,d=0;d<this.passes-1;d++){t.applyFilter(this,u,c,!0);var p=c;c=u,u=p}t.applyFilter(this,u,i,n),t.returnRenderTarget(l)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(s.Filter);i.default=l},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=n[t],i=e.length,s=r,o="",a=void 0,h=0;h<t;h++){var l="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);a=h,h>=i&&(a=t-h-1),o+=l=l.replace("%value%",e[a]),o+="\n"}return(s=s.replace("%blur%",o)).replace("%size%",t)};var n={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=Math.ceil(t/2),r=n,s="",o=void 0;o=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var h=o.replace("%index%",a);s+=h=h.replace("%sampleIndex%",a-(i-1)+".0"),s+="\n"}return(r=r.replace("%blur%",s)).replace("%size%",t)};var n=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}},{}],150:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),n=Math.sin(t),r=1/3,s=(0,Math.sqrt)(r),o=[i+(1-i)*r,r*(1-i)-s*n,r*(1-i)+s*n,0,0,r*(1-i)+s*n,i+r*(1-i),r*(1-i)-s*n,0,0,r*(1-i)-s*n,r*(1-i)+s*n,i+r*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,n=-.5*(i-1),r=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,n=-.5*(i-1),r=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(r,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,n,r){t=t||.2,e=e||.15;var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((n=n||3375104)>>16&255)/255,l=(n>>8&255)/255,u=(255&n)/255,c=[.3,.59,.11,0,0,s,o,a,t,0,h,l,u,e,0,s-h,o-l,a-u,0,0];this._loadMatrix(c,r)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(r.Filter));i.default=s,s.prototype.grayscale=s.prototype.greyscale},{"../../core":65,path:8}],151:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=new r.Matrix;i.renderable=!1;var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=i,o.maskMatrix=s,o.uniforms.mapSampler=i._texture,o.uniforms.filterMatrix=s,o.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),o.scale=new r.Point(n,n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},n(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(r.Filter));i.default=s},{"../../core":65,path:8}],152:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),r=(t("path"),function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.Filter));i.default=r},{"../../core":65,path:8}],153:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var s=t("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return n(s).default}});var o=t("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return n(o).default}});var a=t("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return n(a).default}});var h=t("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return n(h).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var u=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(u).default}});var c=t("./alpha/AlphaFilter");Object.defineProperty(i,"AlphaFilter",{enumerable:!0,get:function(){return n(c).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=(t("path"),function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=i,r.seed=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(r.Filter));i.default=s},{"../../core":65,path:8}],155:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();i.default=s},{"../core":65}],156:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();i.default=n},{}],157:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=n(t("./InteractionData")),a=n(t("./InteractionEvent")),h=n(t("./InteractionTrackingData")),l=n(t("eventemitter3")),u=n(t("./interactiveTarget"));s.utils.mixins.delayMixin(s.DisplayObject.prototype,u.default);var c=1,d={target:null,data:{global:null}},p=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n=n||{},r.renderer=i,r.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,r.interactionFrequency=n.interactionFrequency||10,r.mouse=new o.default,r.mouse.identifier=c,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[c]=r.mouse,r.interactionDataPool=[],r.eventData=new a.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new s.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return d.target=null,d.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(d,e,null,!0),d.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(s.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(t,e,i,n,r){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=r=e.interactive||r,h=!0;if(e.hitArea?(n&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(n=!1,h=!1)),a=!1):e._mask&&n&&(e._mask.containsPoint(s)||(n=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],d=this.processInteractive(t,c,i,n,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(n=!1),o=!0)}}return r&&(n&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);if(o.data.originalEvent=t,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===r.pointerType)this.emit("touchstart",o);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var n=t.data,r=t.data.identifier;if(i)if(e.trackedPointers[r]||(e.trackedPointers[r]=new h.default(r)),this.dispatchEvent(e,"pointerdown",t),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;s?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var n=this.normalizeToPointerData(t),r=n.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<r;o++){var a=n[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+s:"mouseup"+s,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(a.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,n=t.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var n=t.data,r=t.data.identifier,s=e.trackedPointers[r],o="touch"===n.pointerType,a="mouse"===n.pointerType||"pen"===n.pointerType,l=!1;if(a){var u=2===n.button,c=h.default.FLAGS,d=u?c.RIGHT_DOWN:c.LEFT_DOWN,p=void 0!==s&&s.flags&d;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),p&&(this.dispatchEvent(e,u?"rightclick":"click",t),l=!0)):p&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),s&&(u?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!l||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,n=0;n<i;n++){var r=e[n],s=this.getInteractionDataForPointerId(r),o=this.configureInteractionEventForDOMEvent(this.eventData,r,s);o.data.originalEvent=t;var a="touch"!==r.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",o),"touch"===r.pointerType&&this.emit("touchmove",o),"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var n=t.data,r="touch"===n.pointerType,s="mouse"===n.pointerType||"pen"===n.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),r&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var n=t.data,r=t.data.identifier,s="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];i&&!o&&(o=e.trackedPointers[r]=new h.default(r)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",t),s&&this.dispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,i);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===c||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,n=t.changedTouches.length;i<n;i++){var r=t.changedTouches[i];void 0===r.button&&(r.button=t.touches.length?1:0),void 0===r.buttons&&(r.buttons=t.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),void 0===r.twist&&(r.twist=0),void 0===r.tangentialPressure&&(r.tangentialPressure=0),void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=c),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(l.default);i.default=p,s.WebGLRenderer.registerPlugin("interaction",p),s.CanvasRenderer.registerPlugin("interaction",p)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},n(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();i.default=r,r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var s=t("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return n(s).default}});var o=t("./interactiveTarget");Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return n(o).default}});var a=t("./InteractionTrackingData");Object.defineProperty(i,"InteractionTrackingData",{enumerable:!0,get:function(){return n(a).default}});var h=t("./InteractionEvent");Object.defineProperty(i,"InteractionEvent",{enumerable:!0,get:function(){return n(h).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(t,e,i){"use strict";i.__esModule=!0,i.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(t,e,i){"use strict";function n(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}i.__esModule=!0,i.parse=n,i.default=function(){return function(t,e){if(t.data&&t.type===s.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":r.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var o=t.data.getElementsByTagName("page"),a={},h=function(i){a[i.metadata.pageFile]=i.texture,Object.keys(a).length===o.length&&(n(t,a),e())},l=0;l<o.length;++l){var u=o[l].getAttribute("file"),c=i+u,d=!1;for(var p in this.resources){var f=this.resources[p];if(f.url===c){f.metadata.pageFile=u,f.texture?h(f):f.onAfterMiddleware.add(h),d=!0;break}}if(!d){var g={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,h)}}}else e();else e()}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("path")),s=t("resource-loader"),o=t("../extras")},{"../extras":141,path:8,"resource-loader":36}],162:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0,i.shared=i.Resource=i.textureParser=i.getResourcePath=i.spritesheetParser=i.parseBitmapFontData=i.bitmapFontParser=i.Loader=void 0;var r=t("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var s=t("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return n(s).default}}),Object.defineProperty(i,"getResourcePath",{enumerable:!0,get:function(){return s.getResourcePath}});var o=t("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return n(o).default}});var a=t("resource-loader");Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return a.Resource}});var h=n(t("../core/Application")),l=n(t("./loader"));i.Loader=l.default;var u=new l.default;u.destroy=function(){},i.shared=u;var c=h.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new l.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("resource-loader")),s=t("resource-loader/lib/middlewares/parsing/blob"),o=n(t("eventemitter3")),a=n(t("./textureParser")),h=n(t("./spritesheetParser")),l=n(t("./bitmapFontParser")),u=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));o.default.call(r);for(var s=0;s<e._pixiMiddleware.length;++s)r.use(e._pixiMiddleware[s]());return r.onStart.add(function(t){return r.emit("start",t)}),r.onProgress.add(function(t,e){return r.emit("progress",t,e)}),r.onError.add(function(t,e,i){return r.emit("error",t,e,i)}),r.onLoad.add(function(t,e){return r.emit("load",t,e)}),r.onComplete.add(function(t,e){return r.emit("complete",t,e)}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(r.default);for(var c in i.default=u,o.default.prototype)u.prototype[c]=o.default.prototype[c];u._pixiMiddleware=[s.blobMiddlewareFactory,a.default,h.default,l.default];var d=r.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(t,e,i){"use strict";function n(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}i.__esModule=!0,i.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===r.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var s={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=n(t,this.baseUrl);this.add(i,a,s,function(i){if(i.error)e(i.error);else{var n=new o.Spritesheet(i.texture.baseTexture,t.data,t.url);n.parse(function(){t.spritesheet=n,t.textures=n.textures,e()})}})}else e()}},i.getResourcePath=n;var r=t("resource-loader"),s=function(t){return t&&t.__esModule?t:{default:t}}(t("url")),o=t("../core")},{"../core":65,"resource-loader":36,url:38}],165:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=r.default.fromLoader(t.data,t.url,t.name)),e()}};var n=t("resource-loader"),r=function(t){return t&&t.__esModule?t:{default:t}}(t("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=function(t){return t&&t.__esModule?t:{default:t}}(t("../core/textures/Texture")),o=new r.Point,a=new r.Polygon,h=function(t){function e(i,n,o,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return l._texture=i||s.default.EMPTY,l.uvs=o||new Float32Array([0,0,1,0,1,1,0,1]),l.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),l.indices=a||new Uint16Array([0,1,3,2]),l.dirty=0,l.indexDirty=0,l.vertexDirty=0,l.autoUpdate=!0,l.blendMode=r.BLEND_MODES.NORMAL,l.canvasPadding=r.settings.MESH_CANVAS_PADDING,l.drawMode=h||e.DRAW_MODES.TRIANGLE_MESH,l.shader=null,l.tintRgb=new Float32Array([1,1,1]),l._glDatas={},l._uvTransform=new r.TextureMatrix(l._texture),l.uploadUvTransform=!1,l.pluginName="mesh",l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,o);for(var i=this.vertices,n=a.points,r=this.indices,s=this.indices.length,h=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<s;l+=h){var u=2*r[l],c=2*r[l+1],d=2*r[l+2];if(n[0]=i[u],n[1]=i[u+1],n[2]=i[c],n[3]=i[c+1],n[4]=i[d],n[5]=i[d+1],a.contains(o.x,o.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var n=this._glDatas[i];n.destroy?n.destroy():(n.vertexBuffer&&(n.vertexBuffer.destroy(),n.vertexBuffer=null),n.indexBuffer&&(n.indexBuffer.destroy(),n.indexBuffer=null),n.uvBuffer&&(n.uvBuffer.destroy(),n.uvBuffer=null),n.vao&&(n.vao.destroy(),n.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return r.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=r.utils.hex2rgb(t,this.tintRgb)}}]),e}(r.Container);i.default=h,h.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=n(t("./Plane")),o=n(t("../core/sprites/canvas/CanvasTinter")),a=10,h=function(t){function e(i,n,r,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4));return h._origWidth=i.orig.width,h._origHeight=i.orig.height,h._width=h._origWidth,h._height=h._origHeight,h._leftWidth=void 0!==n?n:a,h._rightWidth=void 0!==s?s:a,h._topHeight=void 0!==r?r:a,h._bottomHeight=void 0!==o?o:a,h._cachedTint=16777215,h._tintedTexture=null,h._canvasUvs=null,h.refresh(!0),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,n=t.resolution,r=16777215!==this.tint,s=this._texture;r&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=r?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var h=this.vertices,l=this._canvasUvs,u=r?0:s.frame.x,c=r?0:s.frame.y,d=u+s.frame.width,p=c+s.frame.height;l[0]=u,l[1]=u+this._leftWidth,l[2]=d-this._rightWidth,l[3]=d,l[4]=c,l[5]=c+this._topHeight,l[6]=p-this._bottomHeight,l[7]=p;for(var f=0;f<8;f++)l[f]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):e.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n);for(var g=0;g<3;g++)for(var v=0;v<3;v++){var m=2*v+8*g,y=Math.max(1,l[v+1]-l[v]),_=Math.max(1,l[g+5]-l[g+4]),b=Math.max(1,h[m+10]-h[m]),w=Math.max(1,h[m+11]-h[m+1]);e.drawImage(a,l[v],l[g+4],y,_,h[m],h[m+1],b,w)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var n=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(s.default);i.default=h},{"../core/sprites/canvas/CanvasTinter":104,"./Plane":168}],168:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(t("./Mesh")),r=function(t){function e(i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return o._ready=!0,o.verticesX=r||10,o.verticesY=s||10,o.drawMode=n.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],n=[],r=[],s=this.verticesX-1,o=this.verticesY-1,a=t.width/s,h=t.height/o,l=0;l<e;l++){var u=l%this.verticesX,c=l/this.verticesX|0;i.push(u*a,c*h),n.push(u/s,c/o)}for(var d=s*o,p=0;p<d;p++){var f=p%s,g=p/s|0,v=g*this.verticesX+f,m=g*this.verticesX+f+1,y=(g+1)*this.verticesX+f,_=(g+1)*this.verticesX+f+1;r.push(v,m,y),r.push(m,_,y)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){n.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(n.default);i.default=r},{"./Mesh":166}],169:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.points=n,r.vertices=new Float32Array(4*n.length),r.uvs=new Float32Array(4*n.length),r.colors=new Float32Array(2*n.length),r.indices=new Uint16Array(2*n.length),r.autoUpdate=!0,r.refresh(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r=t.length,s=1;s<r;s++){var o=4*s,a=s/(r-1);e[o]=a,e[o+1]=0,e[o+2]=a,e[o+3]=1,n[o=2*s]=1,n[o+1]=1,i[o=2*s]=o,i[o+1]=o+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,n=0,r=0,s=this.vertices,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;r=-((i=a<t.length-1?t[a+1]:h).x-e.x),n=i.y-e.y;var u=10*(1-a/(o-1));u>1&&(u=1);var c=Math.sqrt(n*n+r*r),d=this._texture.height/2;n/=c,r/=c,n*=d,r*=d,s[l]=h.x+n,s[l+1]=h.y+r,s[l+2]=h.x-n,s[l+3]=h.y-r,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(function(t){return t&&t.__esModule?t:{default:t}}(t("./Mesh")).default);i.default=n},{"./Mesh":166}],170:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),r=function(t){return t&&t.__esModule?t:{default:t}}(t("../Mesh")),s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,n=t.worldTransform,s=e.resolution;e.roundPixels?i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s|0,n.ty*s|0):i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===r.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var n=2*i;this._renderDrawTriangle(t,n,n+2,n+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,n=0;n<i;n+=3){var r=2*e[n],s=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(t,r,s,o)}},t.prototype._renderDrawTriangle=function(t,e,i,n){var r=this.renderer.context,s=t.uvs,o=t.vertices,a=t._texture;if(a.valid){var h=a.baseTexture,l=h.source,u=h.width,c=h.height,d=void 0,p=void 0,f=void 0,g=void 0,v=void 0,m=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;d=(s[e]*y.a+s[e+1]*y.c+y.tx)*h.width,p=(s[i]*y.a+s[i+1]*y.c+y.tx)*h.width,f=(s[n]*y.a+s[n+1]*y.c+y.tx)*h.width,g=(s[e]*y.b+s[e+1]*y.d+y.ty)*h.height,v=(s[i]*y.b+s[i+1]*y.d+y.ty)*h.height,m=(s[n]*y.b+s[n+1]*y.d+y.ty)*h.height}else d=s[e]*h.width,p=s[i]*h.width,f=s[n]*h.width,g=s[e+1]*h.height,v=s[i+1]*h.height,m=s[n+1]*h.height;var _=o[e],b=o[i],w=o[n],x=o[e+1],T=o[i+1],E=o[n+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var A=S/Math.abs(t.worldTransform.a),P=S/Math.abs(t.worldTransform.d),M=(_+b+w)/3,C=(x+T+E)/3,I=_-M,O=x-C,R=Math.sqrt(I*I+O*O);_=M+I/R*(R+A),x=C+O/R*(R+P),O=T-C,b=M+(I=b-M)/(R=Math.sqrt(I*I+O*O))*(R+A),T=C+O/R*(R+P),O=E-C,w=M+(I=w-M)/(R=Math.sqrt(I*I+O*O))*(R+A),E=C+O/R*(R+P)}r.save(),r.beginPath(),r.moveTo(_,x),r.lineTo(b,T),r.lineTo(w,E),r.closePath(),r.clip();var L=d*v+g*f+p*m-v*f-g*p-d*m,D=_*v+g*w+b*m-v*w-g*b-_*m,k=d*b+_*f+p*w-b*f-_*p-d*w,j=d*v*w+g*b*f+_*p*m-_*v*f-g*p*w-d*b*m,N=x*v+g*E+T*m-v*E-g*T-x*m,B=d*T+x*f+p*E-T*f-x*p-d*E,U=d*v*E+g*T*f+x*p*m-x*v*f-g*p*E-d*T*m;r.transform(D/L,N/L,k/L,B/L,j/L,U/L),r.drawImage(l,0,0,u*h.resolution,c*h.resolution,0,0,u,c),r.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,n=i.length/2;e.beginPath();for(var r=1;r<n-2;++r){var s=2*r,o=i[s],a=i[s+1],h=i[s+2],l=i[s+3],u=i[s+4],c=i[s+5];e.moveTo(o,a),e.lineTo(h,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=s,n.CanvasRenderer.registerPlugin("mesh",s)},{"../../core":65,"../Mesh":166}],171:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var s=t("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return n(s).default}});var o=t("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var a=t("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return n(a).default}});var h=t("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return n(h).default}});var l=t("./Rope");Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=n(t("pixi-gl-core")),o=n(t("../Mesh")),a=(t("path"),r.Matrix.IDENTITY),h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=t._texture;if(n.valid){var h=t._glDatas[e.CONTEXT_UID];h||(e.bindVao(null),(h={shader:this.shader,vertexBuffer:s.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:s.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:s.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new s.default.VertexArrayObject(i).addIndex(h.indexBuffer).addAttribute(h.vertexBuffer,h.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(h.uvBuffer,h.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=h),e.bindVao(h.vao),t.dirty!==h.dirty&&(h.dirty=t.dirty,h.uvBuffer.upload(t.uvs)),t.indexDirty!==h.indexDirty&&(h.indexDirty=t.indexDirty,h.indexBuffer.upload(t.indices)),t.vertexDirty!==h.vertexDirty&&(h.vertexDirty=t.vertexDirty,h.vertexBuffer.upload(t.vertices)),e.bindShader(h.shader),h.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(r.utils.correctBlendMode(t.blendMode,n.baseTexture.premultipliedAlpha)),h.shader.uniforms.uTransform&&(t.uploadUvTransform?h.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):h.shader.uniforms.uTransform=a.toArray(!0)),h.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),h.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,h.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var l=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;h.vao.draw(l,t.indices.length,0)}},e}(r.ObjectRenderer);i.default=h,r.WebGLRenderer.registerPlugin("mesh",h)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=t("../core/utils"),o=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return s>16384&&(s=16384),s>i&&(s=i),a._properties=[!1,!0,!1,!1,!1],a._maxSize=i,a._batchSize=s,a._glBuffers={},a._bufferUpdateIDs=[],a._updateID=0,a.interactiveChildren=!1,a.blendMode=r.BLEND_MODES.NORMAL,a.autoResize=o,a.roundPixels=!0,a.baseTexture=null,a.setProperties(n),a._tint=0,a.tintRgb=new Float32Array(4),a.tint=16777215,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,n=!0,r=0,s=0,o=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var l=this.children[h];if(l.visible){var u=l._texture.frame;if(e.globalAlpha=this.worldAlpha*l.alpha,l.rotation%(2*Math.PI)==0)n&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),n=!1),r=l.anchor.x*(-u.width*l.scale.x)+l.position.x+.5,s=l.anchor.y*(-u.height*l.scale.y)+l.position.y+.5,o=u.width*l.scale.x,a=u.height*l.scale.y;else{n||(n=!0),l.displayObjectUpdateTransform();var c=l.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),r=l.anchor.x*-u.width+.5,s=l.anchor.y*-u.height+.5,o=u.width,a=u.height}var d=l._texture.baseTexture.resolution;e.drawImage(l._texture.baseTexture.source,u.x*d,u.y*d,u.width*d,u.height*d,r*t.resolution,s*t.resolution,o*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},n(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,s.hex2rgb)(t,this.tintRgb)}}]),e}(r.Container);i.default=o},{"../core":65,"../core/utils":125}],174:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var s=t("./webgl/ParticleRenderer");Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return n(s).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=n(t("pixi-gl-core")),s=n(t("../../core/utils/createIndicesForQuads")),o=function(){function t(e,i,n,r){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.gl=e,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var o=i[s];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},n[s]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,s.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var n=this.dynamicProperties[i];n.offset=e,e+=n.size,this.dynamicStride+=n.size}var o=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(o),this.dynamicDataUint32=new Uint32Array(o),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(t,o,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var h=0;h<this.staticProperties.length;++h){var l=this.staticProperties[h];l.offset=a,a+=l.size,this.staticStride+=l.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var p=0;p<this.staticProperties.length;++p){var f=this.staticProperties[p];f.unsignedByte?this.vao.addAttribute(this.staticBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*f.offset):this.vao.addAttribute(this.staticBuffer,f.attribute,t.FLOAT,!1,4*this.staticStride,4*f.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var n=0;n<this.dynamicProperties.length;n++){var r=this.dynamicProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,r.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var n=0;n<this.staticProperties.length;n++){var r=this.staticProperties[n];r.uploadFunction(t,e,i,r.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,r.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();i.default=o},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=n(t("./ParticleShader")),o=n(t("./ParticleBuffer")),a=t("../../core/utils"),h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new r.Matrix,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new s.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer,o=e.length;if(0!==o){o>i&&(o=i);var a=t._glBuffers[s.CONTEXT_UID];a||(a=t._glBuffers[s.CONTEXT_UID]=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha));var l=s.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(s._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha),this.shader.uniforms.uSampler=s.bindTexture(h);for(var c=!1,d=0,p=0;d<o;d+=n,p+=1){var f=o-d;if(f>n&&(f=n),p>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var g=a[p];g.uploadDynamic(e,d,f);var v=t._bufferUpdateIDs[p]||0;(c=c||g._updateID<v)&&(g._updateID=t._updateID,g.uploadStatic(e,d,f)),s.bindVao(g.vao),g.vao.draw(l.TRIANGLES,6*f)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],n=t._maxSize,r=t._batchSize,s=t._properties,a=0;a<n;a+=r)i.push(new o.default(e,this.properties,s,r));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,n=t._properties;return new o.default(e,this.properties,n,i)},e.prototype.uploadVertices=function(t,e,i,n,r,s){for(var o=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,p=c.scale.x,f=c.scale.y,g=d.trim,v=d.orig;g?(o=(a=g.x-c.anchor.x*v.width)+g.width,h=(l=g.y-c.anchor.y*v.height)+g.height):(o=v.width*(1-c.anchor.x),a=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),l=v.height*-c.anchor.y),n[s]=a*p,n[s+1]=l*f,n[s+r]=o*p,n[s+r+1]=l*f,n[s+2*r]=o*p,n[s+2*r+1]=h*f,n[s+3*r]=a*p,n[s+3*r+1]=h*f,s+=4*r}},e.prototype.uploadPosition=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].position;n[s]=a.x,n[s+1]=a.y,n[s+r]=a.x,n[s+r+1]=a.y,n[s+2*r]=a.x,n[s+2*r+1]=a.y,n[s+3*r]=a.x,n[s+3*r+1]=a.y,s+=4*r}},e.prototype.uploadRotation=function(t,e,i,n,r,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;n[s]=a,n[s+r]=a,n[s+2*r]=a,n[s+3*r]=a,s+=4*r}},e.prototype.uploadUvs=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(n[s]=a.x0,n[s+1]=a.y0,n[s+r]=a.x1,n[s+r+1]=a.y1,n[s+2*r]=a.x2,n[s+2*r+1]=a.y2,n[s+3*r]=a.x3,n[s+3*r+1]=a.y3,s+=4*r):(n[s]=0,n[s+1]=0,n[s+r]=0,n[s+r+1]=0,n[s+2*r]=0,n[s+2*r+1]=0,n[s+3*r]=0,n[s+3*r+1]=0,s+=4*r)}},e.prototype.uploadTint=function(t,e,i,n,r,s){for(var o=0;o<i;++o){var h=t[e+o],l=h._texture.baseTexture.premultipliedAlpha,u=h.alpha,c=u<1&&l?(0,a.premultiplyTint)(h._tintRGB,u):h._tintRGB+(255*u<<24);n[s]=c,n[s+r]=c,n[s+2*r]=c,n[s+3*r]=c,s+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(r.ObjectRenderer);i.default=h,r.WebGLRenderer.registerPlugin("particle",h)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("../../core/Shader")).default);i.default=n},{"../../core/Shader":44}],178:[function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},{}],179:[function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],180:[function(t,e,i){"use strict";var n=function(t){return t&&t.__esModule?t:{default:t}}(t("object-assign"));Object.assign||(Object.assign=n.default)},{"object-assign":6}],181:[function(t,e,i){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(t,e,i){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),n=["ms","moz","webkit","o"],r=0;r<n.length&&!t.requestAnimationFrame;++r){var s=n[r];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),n=16+i-e;return n<0&&(n=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},n)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(t,e,i){"use strict";function n(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var n=0;n<t._textures.length;n++)if(t._textures[n]instanceof u.Texture){var r=t._textures[n].baseTexture;-1===e.indexOf(r)&&(e.push(r),i=!0)}return i}function r(t,e){return t instanceof u.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function s(t,e){if(t._texture&&t._texture instanceof u.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function o(t,e){return e instanceof u.Text&&(e.updateText(!0),!0)}function a(t,e){if(e instanceof u.TextStyle){var i=e.toFontString();return u.TextMetrics.measureFont(i),!0}return!1}function h(t,e){if(t instanceof u.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function l(t,e){return t instanceof u.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}i.__esModule=!0;var u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),c=function(t){return t&&t.__esModule?t:{default:t}}(t("./limiters/CountLimiter")),d=u.ticker.shared;u.settings.UPLOADS_PER_FRAME=4;var p=function(){function t(e){var i=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.limiter=new c.default(u.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(h),this.registerFindHook(l),this.registerFindHook(n),this.registerFindHook(r),this.registerFindHook(s),this.registerUploadHook(o),this.registerUploadHook(a)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,d.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)d.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var s=0,o=r.length;s<o;s++)r[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof u.Container)for(var n=t.children.length-1;n>=0;n--)this.add(t.children[n]);return this},t.prototype.destroy=function(){this.ticking&&d.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();i.default=p},{"../core":65,"./limiters/CountLimiter":186}],184:[function(t,e,i){"use strict";function n(t,e){if(e instanceof r.BaseTexture){var i=e.source,n=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),s=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,n,s,0,0,t.canvas.width,t.canvas.height),!0}return!1}i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),s=16,o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=s,r.canvas.height=s,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(function(t){return t&&t.__esModule?t:{default:t}}(t("../BasePrepare")).default);i.default=o,r.CanvasRenderer.registerPlugin("prepare",o)},{"../../core":65,"../BasePrepare":183}],185:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}i.__esModule=!0;var r=t("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return n(r).default}});var s=t("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return n(s).default}});var o=t("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return n(o).default}});var a=t("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return n(a).default}});var h=t("./limiters/TimeLimiter");Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return n(h).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();i.default=n},{}],187:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();i.default=n},{}],188:[function(t,e,i){"use strict";function n(t,e){return e instanceof o.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function r(t,e){return e instanceof o.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function s(t,e){return t instanceof o.Graphics&&(e.push(t),!0)}i.__esModule=!0;var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return o.uploadHookHelper=o.renderer,o.registerFindHook(s),o.registerUploadHook(n),o.registerUploadHook(r),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(t){return t&&t.__esModule?t:{default:t}}(t("../BasePrepare")).default);i.default=a,o.WebGLRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":183}],189:[function(t,e,i){(function(e){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}i.__esModule=!0,i.loader=i.prepare=i.particles=i.mesh=i.loaders=i.interaction=i.filters=i.extras=i.extract=i.accessibility=void 0;var r=t("./polyfill");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})});var s=t("./core");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return s[t]}})});var o=function(t){return t&&t.__esModule?t:{default:t}}(t("./deprecation")),a=n(t("./accessibility")),h=n(t("./extract")),l=n(t("./extras")),u=n(t("./filters")),c=n(t("./interaction")),d=n(t("./loaders")),p=n(t("./mesh")),f=n(t("./particles")),g=n(t("./prepare"));s.utils.mixins.performMixins();var v=d.shared||null;i.accessibility=a,i.extract=h,i.extras=l,i.filters=u,i.interaction=c,i.loaders=d,i.mesh=p,i.particles=f,i.prepare=g,i.loader=v,"function"==typeof o.default&&(0,o.default)(i),e.PIXI=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)});var pixi_spine,__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){!function(t){var e,i=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,n,r,s,o,a){if(null==t)throw new Error("skeleton cannot be null.");n&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,i,r,s,o,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var n=0,r=t.length/i-2;if(0==r)return i;for(var s=r>>>1;;){if(t[(s+1)*i]<=e?n=s+1:r=s,n==r)return(n+1)*i;s=n+r>>>1}},t.linearSearch=function(t,e,i){for(var n=0,r=t.length-i;n<=r;n+=i)if(t[n]>e)return n;return-1},t}();t.Animation=i,function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix"}(e=t.TimelineType||(t.TimelineType={}));var n=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var n=this.curves[i];return n==e.LINEAR?e.LINEAR:n==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,n,r,s){var o=.03*(2*-i+r),a=.03*(2*-n+s),h=.006*(3*(i-r)+1),l=.006*(3*(n-s)+1),u=2*o+h,c=2*a+l,d=.3*i+o+.16666667*h,p=.3*n+a+.16666667*l,f=t*e.BEZIER_SIZE,g=this.curves;g[f++]=e.BEZIER;for(var v=d,m=p,y=f+e.BEZIER_SIZE-1;f<y;f+=2)g[f]=v,g[f+1]=m,d+=u,p+=c,u+=h,c+=l,v+=d,m+=p},e.prototype.getCurvePercent=function(i,n){n=t.MathUtils.clamp(n,0,1);var r=this.curves,s=i*e.BEZIER_SIZE,o=r[s];if(o==e.LINEAR)return n;if(o==e.STEPPED)return 0;for(var a=0,h=++s,l=s+e.BEZIER_SIZE-1;s<l;s+=2)if((a=r[s])>=n){var u=void 0,c=void 0;return s==h?(u=0,c=0):(u=r[s-2],c=r[s-1]),c+(r[s+1]-c)*(n-u)/(a-u)}var d=r[s-1];return d+(1-d)*(n-a)/(1-a)},e}();n.LINEAR=0,n.STEPPED=1,n.BEZIER=2,n.BEZIER_SIZE=19,t.CurveTimeline=n;var r=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e<<1),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.rotate<<24)+this.boneIndex},r.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+r.ROTATION]=i},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.bones[this.boneIndex];if(n<l[0])a&&(u.rotation=u.data.rotation);else if(n>=l[l.length-r.ENTRIES])if(a)u.rotation=u.data.rotation+l[l.length+r.PREV_ROTATION]*o;else{var c=u.data.rotation+l[l.length+r.PREV_ROTATION]-u.rotation;c-=360*(16384-(16384.499999999996-c/360|0)),u.rotation+=c*o}else{var d=i.binarySearch(l,n,r.ENTRIES),p=l[d+r.PREV_ROTATION],f=l[d],g=this.getCurvePercent((d>>1)-1,1-(n-f)/(l[d+r.PREV_TIME]-f)),v=l[d+r.ROTATION]-p;v=p+(v-=360*(16384-(16384.499999999996-v/360|0)))*g,a?(v-=360*(16384-(16384.499999999996-v/360|0)),u.rotation=u.data.rotation+v*o):(v=u.data.rotation+v-u.rotation,v-=360*(16384-(16384.499999999996-v/360|0)),u.rotation+=v*o)}},r}(n);r.ENTRIES=2,r.PREV_TIME=-2,r.PREV_ROTATION=-1,r.ROTATION=1,t.RotateTimeline=r;var s=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.translate<<24)+this.boneIndex},r.prototype.setFrame=function(t,e,i,n){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.X]=i,this.frames[t+r.Y]=n},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.bones[this.boneIndex];if(n<l[0])a&&(u.x=u.data.x,u.y=u.data.y);else{var c=0,d=0;if(n>=l[l.length-r.ENTRIES])c=l[l.length+r.PREV_X],d=l[l.length+r.PREV_Y];else{var p=i.binarySearch(l,n,r.ENTRIES);c=l[p+r.PREV_X],d=l[p+r.PREV_Y];var f=l[p],g=this.getCurvePercent(p/r.ENTRIES-1,1-(n-f)/(l[p+r.PREV_TIME]-f));c+=(l[p+r.X]-c)*g,d+=(l[p+r.Y]-d)*g}a?(u.x=u.data.x+c*o,u.y=u.data.y+d*o):(u.x+=(u.data.x+c-u.x)*o,u.y+=(u.data.y+d-u.y)*o)}},r}(n);s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,t.TranslateTimeline=s;var o=function(n){function r(t){return n.call(this,t)||this}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.scale<<24)+this.boneIndex},r.prototype.apply=function(e,n,s,o,a,h,l){var u=this.frames,c=e.bones[this.boneIndex];if(s<u[0])h&&(c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY);else{var d=0,p=0;if(s>=u[u.length-r.ENTRIES])d=u[u.length+r.PREV_X]*c.data.scaleX,p=u[u.length+r.PREV_Y]*c.data.scaleY;else{var f=i.binarySearch(u,s,r.ENTRIES);d=u[f+r.PREV_X],p=u[f+r.PREV_Y];var g=u[f],v=this.getCurvePercent(f/r.ENTRIES-1,1-(s-g)/(u[f+r.PREV_TIME]-g));d=(d+(u[f+r.X]-d)*v)*c.data.scaleX,p=(p+(u[f+r.Y]-p)*v)*c.data.scaleY}if(1==a)c.scaleX=d,c.scaleY=p;else{var m=0,y=0;h?(m=c.data.scaleX,y=c.data.scaleY):(m=c.scaleX,y=c.scaleY),l?(d=Math.abs(d)*t.MathUtils.signum(m),p=Math.abs(p)*t.MathUtils.signum(y)):(m=Math.abs(m)*t.MathUtils.signum(d),y=Math.abs(y)*t.MathUtils.signum(p)),c.scaleX=m+(d-m)*a,c.scaleY=y+(p-y)*a}}},r}(s);t.ScaleTimeline=o;var a=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.prototype.getPropertyId=function(){return(e.shear<<24)+this.boneIndex},n.prototype.apply=function(t,e,r,s,o,a,h){var l=this.frames,u=t.bones[this.boneIndex];if(r<l[0])a&&(u.shearX=u.data.shearX,u.shearY=u.data.shearY);else{var c=0,d=0;if(r>=l[l.length-n.ENTRIES])c=l[l.length+n.PREV_X],d=l[l.length+n.PREV_Y];else{var p=i.binarySearch(l,r,n.ENTRIES);c=l[p+n.PREV_X],d=l[p+n.PREV_Y];var f=l[p],g=this.getCurvePercent(p/n.ENTRIES-1,1-(r-f)/(l[p+n.PREV_TIME]-f));c+=(l[p+n.X]-c)*g,d+=(l[p+n.Y]-d)*g}a?(u.shearX=u.data.shearX+c*o,u.shearY=u.data.shearY+d*o):(u.shearX+=(u.data.shearX+c-u.shearX)*o,u.shearY+=(u.data.shearY+d-u.shearY)*o)}},n}(s);t.ShearTimeline=a;var h=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.color<<24)+this.slotIndex},r.prototype.setFrame=function(t,e,i,n,s,o){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.R]=i,this.frames[t+r.G]=n,this.frames[t+r.B]=s,this.frames[t+r.A]=o},r.prototype.apply=function(t,e,n,s,o,a,h){var l=t.slots[this.slotIndex],u=this.frames;if(n<u[0])a&&l.color.setFromColor(l.data.color);else{var c=0,d=0,p=0,f=0;if(n>=u[u.length-r.ENTRIES]){var g=u.length;c=u[g+r.PREV_R],d=u[g+r.PREV_G],p=u[g+r.PREV_B],f=u[g+r.PREV_A]}else{var v=i.binarySearch(u,n,r.ENTRIES);c=u[v+r.PREV_R],d=u[v+r.PREV_G],p=u[v+r.PREV_B],f=u[v+r.PREV_A];var m=u[v],y=this.getCurvePercent(v/r.ENTRIES-1,1-(n-m)/(u[v+r.PREV_TIME]-m));c+=(u[v+r.R]-c)*y,d+=(u[v+r.G]-d)*y,p+=(u[v+r.B]-p)*y,f+=(u[v+r.A]-f)*y}if(1==o)l.color.set(c,d,p,f);else{var _=l.color;a&&_.setFromColor(l.data.color),_.add((c-_.r)*o,(d-_.g)*o,(p-_.b)*o,(f-_.a)*o)}}},r}(n);h.ENTRIES=5,h.PREV_TIME=-5,h.PREV_R=-4,h.PREV_G=-3,h.PREV_B=-2,h.PREV_A=-1,h.R=1,h.G=2,h.B=3,h.A=4,t.ColorTimeline=h;var l=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return n.prototype.getPropertyId=function(){return(e.attachment<<24)+this.slotIndex},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},n.prototype.apply=function(t,e,n,r,s,o,a){var h=t.slots[this.slotIndex];if(a&&o){var l=h.data.attachmentName;h.setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))}else{var u=this.frames;if(n<u[0]){if(o){var c=h.data.attachmentName;h.setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var d=0;d=n>=u[u.length-1]?u.length-1:i.binarySearch(u,n,1)-1;var p=this.attachmentNames[d];t.slots[this.slotIndex].setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}},n}();t.AttachmentTimeline=l;var u=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e),i.frameVertices=new Array(e),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.deform<<24)+this.slotIndex},r.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},r.prototype.apply=function(e,n,r,s,o,a,h){var l=e.slots[this.slotIndex],u=l.getAttachment();if(u instanceof t.VertexAttachment&&u.applyDeform(this.attachment)){var c=this.frames,d=l.attachmentVertices;if(r<c[0])a&&t.Utils.setArraySize(d,0);else{var p=this.frameVertices,f=p[0].length;d.length!=f&&(o=1);var g=t.Utils.setArraySize(d,f);if(r>=c[c.length-1]){var v=p[c.length-1];if(1==o)t.Utils.arrayCopy(v,0,g,0,f);else if(a){if(null==(A=u).bones)for(var m=A.vertices,y=0;y<f;y++){var _=m[y];g[y]=_+(v[y]-_)*o}else for(y=0;y<f;y++)g[y]=v[y]*o}else for(y=0;y<f;y++)g[y]+=(v[y]-g[y])*o}else{var b=i.binarySearch(c,r),w=p[b-1],x=p[b],T=c[b],E=this.getCurvePercent(b-1,1-(r-T)/(c[b-1]-T));if(1==o)for(y=0;y<f;y++){var S=w[y];g[y]=S+(x[y]-S)*E}else if(a){var A;if(null==(A=u).bones)for(m=A.vertices,y=0;y<f;y++){S=w[y],_=m[y];g[y]=_+(S+(x[y]-S)*E-_)*o}else for(y=0;y<f;y++){S=w[y];g[y]=(S+(x[y]-S)*E)*o}}else for(y=0;y<f;y++){S=w[y];g[y]+=(S+(x[y]-S)*E-g[y])*o}}}}},r}(n);t.DeformTimeline=u;var c=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return n.prototype.getPropertyId=function(){return e.event<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},n.prototype.apply=function(t,e,n,r,s,o,a){if(null!=r){var h=this.frames,l=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,r,s,o,a),e=-1;else if(e>=h[l-1])return;if(!(n<h[0])){var u=0;if(e<h[0])u=0;else for(var c=h[u=i.binarySearch(h,e)];u>0&&h[u-1]==c;)u--;for(;u<l&&n>=h[u];u++)r.push(this.events[u])}}},n}();t.EventTimeline=c;var d=function(){function n(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return n.prototype.getPropertyId=function(){return e.drawOrder<<24},n.prototype.getFrameCount=function(){return this.frames.length},n.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},n.prototype.apply=function(e,n,r,s,o,a,h){var l=e.drawOrder,u=e.slots;if(h&&a)t.Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else{var c=this.frames;if(r<c[0])a&&t.Utils.arrayCopy(e.slots,0,e.drawOrder,0,e.slots.length);else{var d=0;d=r>=c[c.length-1]?c.length-1:i.binarySearch(c,r)-1;var p=this.drawOrders[d];if(null==p)t.Utils.arrayCopy(u,0,l,0,u.length);else for(var f=0,g=p.length;f<g;f++)l[f]=u[p[f]]}}},n}();t.DrawOrderTimeline=d;var p=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.ikConstraint<<24)+this.ikConstraintIndex},r.prototype.setFrame=function(t,e,i,n){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.MIX]=i,this.frames[t+r.BEND_DIRECTION]=n},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.ikConstraints[this.ikConstraintIndex];if(n<l[0])a&&(u.mix=u.data.mix,u.bendDirection=u.data.bendDirection);else if(n>=l[l.length-r.ENTRIES])a?(u.mix=u.data.mix+(l[l.length+r.PREV_MIX]-u.data.mix)*o,u.bendDirection=h?u.data.bendDirection:l[l.length+r.PREV_BEND_DIRECTION]):(u.mix+=(l[l.length+r.PREV_MIX]-u.mix)*o,h||(u.bendDirection=l[l.length+r.PREV_BEND_DIRECTION]));else{var c=i.binarySearch(l,n,r.ENTRIES),d=l[c+r.PREV_MIX],p=l[c],f=this.getCurvePercent(c/r.ENTRIES-1,1-(n-p)/(l[c+r.PREV_TIME]-p));a?(u.mix=u.data.mix+(d+(l[c+r.MIX]-d)*f-u.data.mix)*o,u.bendDirection=h?u.data.bendDirection:l[c+r.PREV_BEND_DIRECTION]):(u.mix+=(d+(l[c+r.MIX]-d)*f-u.mix)*o,h||(u.bendDirection=l[c+r.PREV_BEND_DIRECTION]))}},r}(n);p.ENTRIES=3,p.PREV_TIME=-3,p.PREV_MIX=-2,p.PREV_BEND_DIRECTION=-1,p.MIX=1,p.BEND_DIRECTION=2,t.IkConstraintTimeline=p;var f=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.transformConstraint<<24)+this.transformConstraintIndex},r.prototype.setFrame=function(t,e,i,n,s,o){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.ROTATE]=i,this.frames[t+r.TRANSLATE]=n,this.frames[t+r.SCALE]=s,this.frames[t+r.SHEAR]=o},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.transformConstraints[this.transformConstraintIndex];if(n<l[0]){if(a){var c=u.data;u.rotateMix=c.rotateMix,u.translateMix=c.rotateMix,u.scaleMix=c.scaleMix,u.shearMix=c.shearMix}}else{var d=0,p=0,f=0,g=0;if(n>=l[l.length-r.ENTRIES]){var v=l.length;d=l[v+r.PREV_ROTATE],p=l[v+r.PREV_TRANSLATE],f=l[v+r.PREV_SCALE],g=l[v+r.PREV_SHEAR]}else{var m=i.binarySearch(l,n,r.ENTRIES);d=l[m+r.PREV_ROTATE],p=l[m+r.PREV_TRANSLATE],f=l[m+r.PREV_SCALE],g=l[m+r.PREV_SHEAR];var y=l[m],_=this.getCurvePercent(m/r.ENTRIES-1,1-(n-y)/(l[m+r.PREV_TIME]-y));d+=(l[m+r.ROTATE]-d)*_,p+=(l[m+r.TRANSLATE]-p)*_,f+=(l[m+r.SCALE]-f)*_,g+=(l[m+r.SHEAR]-g)*_}if(a){c=u.data;u.rotateMix=c.rotateMix+(d-c.rotateMix)*o,u.translateMix=c.translateMix+(p-c.translateMix)*o,u.scaleMix=c.scaleMix+(f-c.scaleMix)*o,u.shearMix=c.shearMix+(g-c.shearMix)*o}else u.rotateMix+=(d-u.rotateMix)*o,u.translateMix+=(p-u.translateMix)*o,u.scaleMix+=(f-u.scaleMix)*o,u.shearMix+=(g-u.shearMix)*o}},r}(n);f.ENTRIES=5,f.PREV_TIME=-5,f.PREV_ROTATE=-4,f.PREV_TRANSLATE=-3,f.PREV_SCALE=-2,f.PREV_SHEAR=-1,f.ROTATE=1,f.TRANSLATE=2,f.SCALE=3,f.SHEAR=4,t.TransformConstraintTimeline=f;var g=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.pathConstraintPosition<<24)+this.pathConstraintIndex},r.prototype.setFrame=function(t,e,i){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.VALUE]=i},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(n<l[0])a&&(u.position=u.data.position);else{var c=0;if(n>=l[l.length-r.ENTRIES])c=l[l.length+r.PREV_VALUE];else{var d=i.binarySearch(l,n,r.ENTRIES);c=l[d+r.PREV_VALUE];var p=l[d],f=this.getCurvePercent(d/r.ENTRIES-1,1-(n-p)/(l[d+r.PREV_TIME]-p));c+=(l[d+r.VALUE]-c)*f}a?u.position=u.data.position+(c-u.data.position)*o:u.position+=(c-u.position)*o}},r}(n);g.ENTRIES=2,g.PREV_TIME=-2,g.PREV_VALUE=-1,g.VALUE=1,t.PathConstraintPositionTimeline=g;var v=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.prototype.getPropertyId=function(){return(e.pathConstraintSpacing<<24)+this.pathConstraintIndex},n.prototype.apply=function(t,e,r,s,o,a,h){var l=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(r<l[0])a&&(u.spacing=u.data.spacing);else{var c=0;if(r>=l[l.length-n.ENTRIES])c=l[l.length+n.PREV_VALUE];else{var d=i.binarySearch(l,r,n.ENTRIES);c=l[d+n.PREV_VALUE];var p=l[d],f=this.getCurvePercent(d/n.ENTRIES-1,1-(r-p)/(l[d+n.PREV_TIME]-p));c+=(l[d+n.VALUE]-c)*f}a?u.spacing=u.data.spacing+(c-u.data.spacing)*o:u.spacing+=(c-u.spacing)*o}},n}(g);t.PathConstraintSpacingTimeline=v;var m=function(n){function r(e){var i=n.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*r.ENTRIES),i}return __extends(r,n),r.prototype.getPropertyId=function(){return(e.pathConstraintMix<<24)+this.pathConstraintIndex},r.prototype.setFrame=function(t,e,i,n){t*=r.ENTRIES,this.frames[t]=e,this.frames[t+r.ROTATE]=i,this.frames[t+r.TRANSLATE]=n},r.prototype.apply=function(t,e,n,s,o,a,h){var l=this.frames,u=t.pathConstraints[this.pathConstraintIndex];if(n<l[0])a&&(u.rotateMix=u.data.rotateMix,u.translateMix=u.data.translateMix);else{var c=0,d=0;if(n>=l[l.length-r.ENTRIES])c=l[l.length+r.PREV_ROTATE],d=l[l.length+r.PREV_TRANSLATE];else{var p=i.binarySearch(l,n,r.ENTRIES);c=l[p+r.PREV_ROTATE],d=l[p+r.PREV_TRANSLATE];var f=l[p],g=this.getCurvePercent(p/r.ENTRIES-1,1-(n-f)/(l[p+r.PREV_TIME]-f));c+=(l[p+r.ROTATE]-c)*g,d+=(l[p+r.TRANSLATE]-d)*g}a?(u.rotateMix=u.data.rotateMix+(c-u.data.rotateMix)*o,u.translateMix=u.data.translateMix+(d-u.data.translateMix)*o):(u.rotateMix+=(c-u.rotateMix)*o,u.translateMix+=(d-u.translateMix)*o)}},r}(n);m.ENTRIES=3,m.PREV_TIME=-3,m.PREV_ROTATE=-2,m.PREV_TRANSLATE=-1,m.ROTATE=1,m.TRANSLATE=2,t.PathConstraintMixTimeline=m}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new r(this),this.propertyIDs=new t.IntSet,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool(function(){return new i}),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,n=e.length;i<n;i++){var r=e[i];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var s=t*r.timeScale;if(r.delay>0){if(r.delay-=s,r.delay>0)continue;s=-r.delay,r.delay=0}var o=r.next;if(null!=o){var a=r.trackLast-o.delay;if(a>=0){for(o.delay=0,o.trackTime=a+t*o.timeScale,r.trackTime+=s,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=s,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[i]=null,this.queue.end(r),this.disposeNext(r);continue}this.updateMixingFrom(r,t),r.trackTime+=s}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null!=i){if(this.updateMixingFrom(i,e),t.mixTime>=t.mixDuration&&null!=i.mixingFrom&&t.mixTime>0)return t.mixingFrom=null,void this.queue.end(i);i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=e*i.timeScale,t.mixTime+=e*i.timeScale}},e.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,n=this.tracks,r=0,s=n.length;r<s;r++){var o=n[r];if(!(null==o||o.delay>0)){var a=o.alpha;null!=o.mixingFrom?a*=this.applyMixingFrom(o,e):o.trackTime>=o.trackEnd&&(a=0);var h=o.animationLast,l=o.getAnimationTime(),u=o.animation.timelines.length,c=o.animation.timelines;if(1==a)for(var d=0;d<u;d++)c[d].apply(e,h,l,i,1,!0,!1);else{var p=0==o.timelinesRotation.length;p&&t.Utils.setArraySize(o.timelinesRotation,u<<1,null);var f=o.timelinesRotation,g=o.timelinesFirst;for(d=0;d<u;d++){var v=c[d];v instanceof t.RotateTimeline?this.applyRotateTimeline(v,e,l,a,g[d],f,d<<1,p):v.apply(e,h,l,i,a,g[d],!1)}}this.queueEvents(o,l),i.length=0,o.nextAnimationLast=l,o.nextTrackLast=o.trackTime}}this.queue.drain()},e.prototype.applyMixingFrom=function(e,i){var n=e.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,i);var r=0;0==e.mixDuration?r=1:(r=e.mixTime/e.mixDuration)>1&&(r=1);var s=r<n.eventThreshold?this.events:null,o=r<n.attachmentThreshold,a=r<n.drawOrderThreshold,h=n.animationLast,l=n.getAnimationTime(),u=n.animation.timelines.length,c=n.animation.timelines,d=n.timelinesFirst,p=n.alpha*e.mixAlpha*(1-r),f=0==n.timelinesRotation.length;f&&t.Utils.setArraySize(n.timelinesRotation,u<<1,null);for(var g=n.timelinesRotation,v=0;v<u;v++){var m=c[v],y=d[v];if(m instanceof t.RotateTimeline)this.applyRotateTimeline(m,i,l,p,y,g,v<<1,f);else{if(!y){if(!o&&m instanceof t.AttachmentTimeline)continue;if(!a&&m instanceof t.DrawOrderTimeline)continue}m.apply(i,h,l,s,p,y,!0)}}return e.mixDuration>0&&this.queueEvents(n,l),this.events.length=0,n.nextAnimationLast=l,n.nextTrackLast=n.trackTime,r},e.prototype.applyRotateTimeline=function(e,i,n,r,s,o,a,h){if(h&&(o[a]=0),1!=r){var l=e,u=l.frames,c=i.bones[l.boneIndex];if(n<u[0])s&&(c.rotation=c.data.rotation);else{var d=0;if(n>=u[u.length-t.RotateTimeline.ENTRIES])d=c.data.rotation+u[u.length+t.RotateTimeline.PREV_ROTATION];else{var p=t.Animation.binarySearch(u,n,t.RotateTimeline.ENTRIES),f=u[p+t.RotateTimeline.PREV_ROTATION],g=u[p],v=l.getCurvePercent((p>>1)-1,1-(n-g)/(u[p+t.RotateTimeline.PREV_TIME]-g));d=u[p+t.RotateTimeline.ROTATION]-f,d=f+(d-=360*(16384-(16384.499999999996-d/360|0)))*v+c.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var m=s?c.data.rotation:c.rotation,y=0,_=d-m;if(0==_)y=o[a];else{_-=360*(16384-(16384.499999999996-_/360|0));var b=0,w=0;h?(b=0,w=_):(b=o[a],w=o[a+1]);var x=_>0,T=b>=0;t.MathUtils.signum(w)!=t.MathUtils.signum(_)&&Math.abs(w)<=90&&(Math.abs(b)>180&&(b+=360*t.MathUtils.signum(b)),T=x),y=_+b-b%360,T!=x&&(y+=360*t.MathUtils.signum(b)),o[a]=y}o[a+1]=_,m+=y*r,c.rotation=m-360*(16384-(16384.499999999996-m/360|0))}}else e.apply(i,0,n,null,1,s,!1)},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,n=t.animationEnd,r=n-i,s=t.trackLast%r,o=this.events,a=0,h=o.length;a<h;a++){var l=o[a];if(l.time<s)break;l.time>n||this.queue.event(t,l)}for((t.loop?s>t.trackTime%r:e>=n&&t.animationLast<n)&&this.queue.complete(t);a<h;a++){o[a].time<i||this.queue.event(t,o[a])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var n=i.mixingFrom;if(null==n)break;this.queue.end(n),i.mixingFrom=null,i=n}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var n=this.expandToIndex(t);this.tracks[t]=e,null!=n&&(i&&this.queue.interrupt(n),e.mixingFrom=n,e.mixTime=0,n.timelinesRotation.length=0,null!=n.mixingFrom&&n.mixDuration>0&&(e.mixAlpha*=Math.min(n.mixTime/n.mixDuration,1))),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,n,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var n=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,n=!1):this.disposeNext(r));var s=this.trackEntry(t,e,i,r);return this.setCurrent(t,s,n),this.queue.drain(),s},e.prototype.addAnimation=function(t,e,i,n){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,i,n)},e.prototype.addAnimationWith=function(t,e,i,n){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var s=this.trackEntry(t,e,i,r);if(null==r)this.setCurrent(t,s,!0),this.queue.drain();else if(r.next=s,n<=0){var o=r.animationEnd-r.animationStart;0!=o?n+=o*(1+(r.trackTime/o|0))-this.data.getMix(r.animation,e):n=0}return s.delay=n,s},e.prototype.setEmptyAnimation=function(t,i){var n=this.setAnimationWith(t,e.emptyAnimation,!1);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.addEmptyAnimation=function(t,i,n){n<=0&&(n-=i);var r=this.addAnimationWith(t,e.emptyAnimation,!1,n);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,n=this.tracks.length;i<n;i++){var r=this.tracks[i];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,n){var r=this.trackEntryPool.obtain();return r.trackIndex=t,r.animation=e,r.loop=i,r.eventThreshold=0,r.attachmentThreshold=0,r.drawOrderThreshold=0,r.animationStart=0,r.animationEnd=e.duration,r.animationLast=-1,r.nextAnimationLast=-1,r.delay=0,r.trackTime=0,r.trackLast=-1,r.nextTrackLast=-1,r.trackEnd=Number.MAX_VALUE,r.timeScale=1,r.alpha=1,r.mixAlpha=1,r.mixTime=0,r.mixDuration=null==n?0:this.data.getMix(n.animation,e),r},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs,e=0,i=this.tracks.length;for(t.clear();e<i;e++){if(null!=(n=this.tracks[e])){this.setTimelinesFirst(n),e++;break}}for(;e<i;e++){var n;null!=(n=this.tracks[e])&&this.checkTimelinesFirst(n)}},e.prototype.setTimelinesFirst=function(e){if(null!=e.mixingFrom)return this.setTimelinesFirst(e.mixingFrom),void this.checkTimelinesUsage(e,e.timelinesFirst);for(var i=this.propertyIDs,n=e.animation.timelines,r=n.length,s=t.Utils.setArraySize(e.timelinesFirst,r,!1),o=0;o<r;o++)i.add(n[o].getPropertyId()),s[o]=!0},e.prototype.checkTimelinesFirst=function(t){null!=t.mixingFrom&&this.checkTimelinesFirst(t.mixingFrom),this.checkTimelinesUsage(t,t.timelinesFirst)},e.prototype.checkTimelinesUsage=function(e,i){for(var n=this.propertyIDs,r=e.animation.timelines,s=r.length,o=t.Utils.setArraySize(i,s),a=0;a<s;a++)o[a]=n.add(r[a].getPropertyId())},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,n){e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(t,i,n)},e.prototype.addAnimationByName=function(t,i,n,r){e.deprecatedWarning2||(e.deprecatedWarning2=!0,console.warn("Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(t,i,n,r)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0,console.warn("Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(t)},e}();e.emptyAnimation=new t.Animation("<empty>",[],0),e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,t.AnimationState=e;var i=function(){function t(){this.timelinesFirst=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelinesFirst.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!0,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t}();i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,t.TrackEntry=i;var n,r=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(n.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(n.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(n.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(n.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(n.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(n.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0,console.warn("Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,r=0;r<e.length;r+=2){var s=e[r],o=e[r+1];switch(s){case n.start:null!=o.listener&&o.listener.start&&o.listener.start(o);for(var a=0;a<i.length;a++)i[a].start&&i[a].start(o);o.onStart&&this.deprecateStuff()&&o.onStart(o.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(o.trackIndex);break;case n.interrupt:null!=o.listener&&o.listener.interrupt&&o.listener.interrupt(o);for(a=0;a<i.length;a++)i[a].interrupt&&i[a].interrupt(o);break;case n.end:null!=o.listener&&o.listener.end&&o.listener.end(o);for(a=0;a<i.length;a++)i[a].end&&i[a].end(o);o.onEnd&&this.deprecateStuff()&&o.onEnd(o.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(o.trackIndex);case n.dispose:null!=o.listener&&o.listener.dispose&&o.listener.dispose(o);for(a=0;a<i.length;a++)i[a].dispose&&i[a].dispose(o);this.animState.trackEntryPool.free(o);break;case n.complete:null!=o.listener&&o.listener.complete&&o.listener.complete(o);for(a=0;a<i.length;a++)i[a].complete&&i[a].complete(o);var h=t.MathUtils.toInt(o.loopsCount());o.onComplete&&this.deprecateStuff()&&o.onComplete(o.trackIndex,h),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(o.trackIndex,h);break;case n.event:var l=e[2+r++];null!=o.listener&&o.listener.event&&o.listener.event(o,l);for(a=0;a<i.length;a++)i[a].event&&i[a].event(o,l);o.onEvent&&this.deprecateStuff()&&o.onEvent(o.trackIndex,l),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(o.trackIndex,l)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e}();r.deprecatedWarning1=!1,t.EventQueue=r,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(n=t.EventType||(t.EventType={}));var s=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=s}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var n=this.skeletonData.findAnimation(t);if(null==n)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(n,r,i)},t.prototype.setMixByName=function(e,i,n){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,n)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var n=t.name+e.name;this.animationToMixTime[n]=i},t.prototype.getMix=function(t,e){var i=t.name+e.name,n=this.animationToMixTime[i];return void 0===n?this.defaultMix:n},t}();e.deprecatedWarning1=!1,t.AnimationStateData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (region attachment: "+i+")");var s=new t.RegionAttachment(i);return s.region=r,s},e.prototype.newMeshAttachment=function(e,i,n){var r=this.atlas.findRegion(n);if(null==r)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+i+")");var s=new t.MeshAttachment(i);return s.region=r,s},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t){if(null==t)throw new Error("name cannot be null.");this.name=t}}();t.Attachment=e;var i=function(t){function e(e){var i=t.call(this,e)||this;return i.worldVerticesLength=0,i}return __extends(e,t),e.prototype.computeWorldVertices=function(t,e){this.computeWorldVerticesWith(t,0,this.worldVerticesLength,e,0)},e.prototype.computeWorldVerticesWith=function(t,e,i,n,r){i+=r;var s=t.bone.skeleton,o=t.attachmentVertices,a=this.vertices,h=this.bones;if(null!=h){for(var l=0,u=0,c=0;c<e;c+=2){l+=(g=h[l])+1,u+=g}var d=s.bones;if(0==o.length)for(P=r,T=3*u;P<i;P+=2){var p=0,f=0,g=h[l++];for(g+=l;l<g;l++,T+=3){_=d[h[l]].matrix,M=a[T],C=a[T+1];var v=a[T+2];p+=(M*_.a+C*_.c+_.tx)*v,f+=(M*_.b+C*_.d+_.ty)*v}n[P]=p,n[P+1]=f}else for(var m=o,y=(P=r,T=3*u,u<<1);P<i;P+=2){p=0,f=0,g=h[l++];for(g+=l;l<g;l++,T+=3,y+=2){_=d[h[l]].matrix,M=a[T]+m[y],C=a[T+1]+m[y+1],v=a[T+2];p+=(M*_.a+C*_.c+_.tx)*v,f+=(M*_.b+C*_.d+_.ty)*v}n[P]=p,n[P+1]=f}}else{o.length>0&&(a=o);for(var _,b=(_=t.bone.matrix).tx,w=_.ty,x=_.a,T=_.c,E=_.b,S=_.d,A=e,P=r;P<i;A+=2,P+=2){var M=a[A],C=a[A+1];n[P]=M*x+C*T+b,n[P+1]=M*E+C*S+w}}},e.prototype.applyDeform=function(t){return this==t},e}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n}return __extends(i,e),i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.color=new t.Color(1,1,1,1),n.inheritDeform=!1,n.tempColor=new t.Color(0,0,0,0),n}return __extends(i,e),i.prototype.updateWorldVertices=function(t,e){return[]},i.prototype.updateUVs=function(e,i){var n=this.regionUVs.length;if(i&&i.length==n||(i=t.Utils.newFloatArray(n)),null!=e){for(var r=e.texture._uvs,s=e.width,o=e.height,a=e.originalWidth,h=e.originalHeight,l=e.offsetX,u=e.pixiOffsetY,c=0;c<n;c+=2){var d=this.regionUVs[c],p=this.regionUVs[c+1];d=(d*a-l)/s,p=(p*h-u)/o,i[c]=(r.x0*(1-d)+r.x1*d)*(1-p)+(r.x3*(1-d)+r.x2*d)*p,i[c+1]=(r.y0*(1-d)+r.y1*d)*(1-p)+(r.y3*(1-d)+r.y2*d)*p}return i}},i.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.closed=!1,n.constantSpeed=!1,n.color=new t.Color(1,1,1,1),n}return __extends(i,e),i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new t.Color(1,1,1,1),n}return __extends(i,e),i.prototype.updateWorldVertices=function(t,e){return[]},i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,n,r,s,o,a,h){this.ax=i,this.ay=n,this.arotation=r,this.ascaleX=s,this.ascaleY=o,this.ashearX=a,this.ashearY=h,this.appliedValid=!0;var l=this.parent,u=this.matrix;if(null==l){var c=r+90+h,d=t.MathUtils.cosDeg(r+a)*s,p=t.MathUtils.cosDeg(c)*o,f=t.MathUtils.sinDeg(r+a)*s,g=t.MathUtils.sinDeg(c)*o,v=this.skeleton;return v.flipX&&(i=-i,d=-d,p=-p),v.flipY!==e.yDown&&(n=-n,f=-f,g=-g),u.a=d,u.c=p,u.b=f,u.d=g,u.tx=i+v.x,void(u.ty=n+v.y)}var m=l.matrix.a,y=l.matrix.c,_=l.matrix.b,b=l.matrix.d;switch(u.tx=m*i+y*n+l.matrix.tx,u.ty=_*i+b*n+l.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:c=r+90+h,d=t.MathUtils.cosDeg(r+a)*s,p=t.MathUtils.cosDeg(c)*o,f=t.MathUtils.sinDeg(r+a)*s,g=t.MathUtils.sinDeg(c)*o;return u.a=m*d+y*f,u.c=m*p+y*g,u.b=_*d+b*f,void(u.d=_*p+b*g);case t.TransformMode.OnlyTranslation:c=r+90+h;u.a=t.MathUtils.cosDeg(r+a)*s,u.c=t.MathUtils.cosDeg(c)*o,u.b=t.MathUtils.sinDeg(r+a)*s,u.d=t.MathUtils.sinDeg(c)*o;break;case t.TransformMode.NoRotationOrReflection:var w=0;(E=m*m+_*_)>1e-4?(y=_*(E=Math.abs(m*b-y*_)/E),b=m*E,w=Math.atan2(_,m)*t.MathUtils.radDeg):(m=0,_=0,w=90-Math.atan2(b,y)*t.MathUtils.radDeg);var x=r+a-w,T=r+h-w+90;d=t.MathUtils.cosDeg(x)*s,p=t.MathUtils.cosDeg(T)*o,f=t.MathUtils.sinDeg(x)*s,g=t.MathUtils.sinDeg(T)*o;u.a=m*d-y*f,u.c=m*p-y*g,u.b=_*d+b*f,u.d=_*p+b*g;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var E,S=t.MathUtils.cosDeg(r),A=t.MathUtils.sinDeg(r),P=m*S+y*A,M=_*S+b*A;(E=Math.sqrt(P*P+M*M))>1e-5&&(E=1/E),P*=E,M*=E,E=Math.sqrt(P*P+M*M);var C=Math.PI/2+Math.atan2(M,P),I=Math.cos(C)*E,O=Math.sin(C)*E;d=t.MathUtils.cosDeg(a)*s,p=t.MathUtils.cosDeg(90+h)*o,f=t.MathUtils.sinDeg(a)*s,g=t.MathUtils.sinDeg(90+h)*o;return u.a=P*d+I*f,u.c=P*p+I*g,u.b=M*d+O*f,u.d=M*p+O*g,void((this.data.transformMode!=t.TransformMode.NoScaleOrReflection?m*b-y*_<0:this.skeleton.flipX!=this.skeleton.flipY!=e.yDown)&&(u.c=-u.c,u.d=-u.d))}this.skeleton.flipX&&(u.a=-u.a,u.c=-u.c),this.skeleton.flipY!=e.yDown&&(u.b=-u.b,u.d=-u.d)},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.worldToLocalRotationX=function(){var e=this.parent;if(null==e)return this.arotation;var i=e.matrix,n=this.matrix;return Math.atan2(i.a*n.b-i.b*n.a,i.d*n.a-i.c*n.b)*t.MathUtils.radDeg},e.prototype.worldToLocalRotationY=function(){var e=this.parent;if(null==e)return this.arotation;var i=e.matrix,n=this.matrix;return Math.atan2(i.a*n.d-i.b*n.c,i.d*n.c-i.c*n.d)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,n=this.matrix.a,r=i.c,s=i.b,o=i.d,a=t.MathUtils.cosDeg(e),h=t.MathUtils.sinDeg(e);i.a=a*n-h*s,i.c=a*r-h*o,i.b=h*n+a*s,i.d=h*r+a*o,this.appliedValid=!1},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var n=e.matrix,r=1/(n.a*n.d-n.b*n.c),s=i.tx-n.tx,o=i.ty-n.ty;this.ax=s*n.d*r-o*n.c*r,this.ay=o*n.a*r-s*n.b*r;var a=r*n.d,h=r*n.a,l=r*n.c,u=r*n.b,c=a*i.a-l*i.b,d=a*i.c-l*i.d,p=h*i.b-u*i.a,f=h*i.d-u*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+p*p),this.ascaleX>1e-4){var g=c*f-d*p;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*d+p*f,g)*t.MathUtils.radDeg,this.arotation=Math.atan2(p,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(d*d+f*f),this.ashearY=0,this.arotation=90-Math.atan2(f,d)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,n=e.c,r=e.b,s=e.d,o=1/(i*s-n*r),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*s*o-h*n*o,t.y=h*i*o-a*r*o,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,n=t.y;return t.x=i*e.a+n*e.c+e.tx,t.y=i*e.b+n*e.d+e.ty,t},e}();e.yDown=!1,t.Bone=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e,i=function(){return function(t,i,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,t<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");this.index=t,this.name=i,this.parent=n}}();t.BoneData=i,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e}}();t.Event=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t){this.name=t}}();t.EventData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t,e){if(this.mix=1,this.bendDirection=0,this.level=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(e,i,n,r){e.appliedValid||e.updateAppliedTransform();var s=e.parent.matrix,o=1/(s.a*s.d-s.b*s.c),a=i-s.tx,h=n-s.ty,l=(a*s.d-h*s.c)*o-e.ax,u=(h*s.a-a*s.b)*o-e.ay,c=Math.atan2(u,l)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*r,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,n,r,s,o){if(0!=o){e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var a=e.ax,h=e.ay,l=e.ascaleX,u=e.ascaleY,c=i.ascaleX,d=0,p=0,f=0;l<0?(l=-l,d=180,f=-1):(d=0,f=1),u<0&&(u=-u,f=-f),c<0?(c=-c,p=180):p=0;var g=e.matrix,v=i.ax,m=0,y=0,_=0,b=g.a,w=g.c,x=g.b,T=g.d,E=Math.abs(l-u)<=1e-4;E?(y=b*v+w*(m=i.ay)+g.tx,_=x*v+T*m+g.ty):(m=0,y=b*v+g.tx,_=x*v+g.ty);e.parent;var S=e.parent.matrix;b=S.a,w=S.c,x=S.b;var A=1/(b*(T=S.d)-w*x),P=n-S.tx,M=r-S.ty,C=(P*T-M*w)*A-a,I=(M*b-P*x)*A-h,O=((P=y-S.tx)*T-(M=_-S.ty)*w)*A-a,R=(M*b-P*x)*A-h,L=Math.sqrt(O*O+R*R),D=i.data.length*c,k=0,j=0;t:if(E){var N=(C*C+I*I-L*L-(D*=l)*D)/(2*L*D);N<-1?N=-1:N>1&&(N=1),j=Math.acos(N)*s,b=L+D*N,w=D*Math.sin(j),k=Math.atan2(I*b-C*w,C*b+I*w)}else{var B=(b=l*D)*b,U=(w=u*D)*w,F=C*C+I*I,X=Math.atan2(I,C),V=-2*U*L,H=U-B;if((T=V*V-4*H*(x=U*L*L+B*F-B*U))>=0){var W=Math.sqrt(T);V<0&&(W=-W);var Y=(W=-(V+W)/2)/H,G=x/W,z=Math.abs(Y)<Math.abs(G)?Y:G;if(z*z<=F){M=Math.sqrt(F-z*z)*s,k=X-Math.atan2(M,z),j=Math.atan2(M/u,(z-L)/l);break t}}var q=0,Z=Number.MAX_VALUE,J=0,K=0,Q=0,$=0,tt=0,et=0;(T=(P=L+b)*P)>$&&(Q=0,$=T,tt=P),(T=(P=L-b)*P)<Z&&(q=t.MathUtils.PI,Z=T,J=P);var it=Math.acos(-b*L/(B-U));(T=(P=b*Math.cos(it)+L)*P+(M=w*Math.sin(it))*M)<Z&&(q=it,Z=T,J=P,K=M),T>$&&(Q=it,$=T,tt=P,et=M),F<=(Z+$)/2?(k=X-Math.atan2(K*s,J),j=q*s):(k=X-Math.atan2(et*s,tt),j=Q*s)}var nt=Math.atan2(m,v)*f,rt=e.arotation;(k=(k-nt)*t.MathUtils.radDeg+d-rt)>180?k-=360:k<-180&&(k+=360),e.updateWorldTransformWith(a,h,rt+k*o,e.ascaleX,e.ascaleY,0,0),rt=i.arotation,(j=((j+nt)*t.MathUtils.radDeg-i.ashearX)*f+p-rt)>180?j-=360:j<-180&&(j+=360),i.updateWorldTransformWith(v,m,rt+j*o,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t}}();t.IkConstraintData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,n=t.bones.length;i<n;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof t.PathAttachment){var i=this.rotateMix,n=this.translateMix,r=i>0;if(n>0||r){var s=this.data,o=s.spacingMode,a=o==t.SpacingMode.Length,h=s.rotateMode,l=h==t.RotateMode.Tangent,u=h==t.RotateMode.ChainScale,c=this.bones.length,d=l?c:c+1,p=this.bones,f=t.Utils.setArraySize(this.spaces,d),g=null,v=this.spacing;if(u||a){u&&(g=t.Utils.setArraySize(this.lengths,c));for(var m=0,y=d-1;m<y;){var _=(I=p[m]).matrix,b=I.data.length,w=b*_.a,x=b*_.b;b=Math.sqrt(w*w+x*x),u&&(g[m]=b),f[++m]=a?Math.max(0,b+v):v}}else for(m=1;m<d;m++)f[m]=v;var T=this.computeWorldPositions(e,d,l,s.positionMode==t.PositionMode.Percent,o==t.SpacingMode.Percent),E=T[0],S=T[1],A=s.offsetRotation,P=!1;if(0==A)P=h==t.RotateMode.Chain;else{P=!1;var M=this.target.bone.matrix;A*=M.a*M.d-M.b*M.c>0?t.MathUtils.degRad:-t.MathUtils.degRad}m=0;for(var C=3;m<c;m++,C+=3){var I;(_=(I=p[m]).matrix).tx+=(E-_.tx)*n,_.ty+=(S-_.ty)*n;var O=(w=T[C])-E,R=(x=T[C+1])-S;if(u){var L=g[m];if(0!=L){var D=(Math.sqrt(O*O+R*R)/L-1)*i+1;_.a*=D,_.b*=D}}if(E=w,S=x,r){var k=_.a,j=_.c,N=_.b,B=_.d,U=0,F=0,X=0;if(U=l?T[C-1]:0==f[m+1]?T[C+2]:Math.atan2(R,O),U-=Math.atan2(N,k),P){F=Math.cos(U),X=Math.sin(U);var V=I.data.length;E+=(V*(F*k-X*N)-O)*i,S+=(V*(X*k+F*N)-R)*i}else U+=A;U>t.MathUtils.PI?U-=t.MathUtils.PI2:U<-t.MathUtils.PI&&(U+=t.MathUtils.PI2),U*=i,F=Math.cos(U),X=Math.sin(U),_.a=F*k-X*N,_.c=F*j-X*B,_.b=X*k+F*N,_.d=X*j+F*B}I.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,n,r,s,o){var a=this.target,h=this.position,l=this.spaces,u=t.Utils.setArraySize(this.positions,3*n+2),c=null,d=i.closed,p=i.worldVerticesLength,f=p/6,g=e.NONE;if(!i.constantSpeed){var v=i.lengths,m=v[f-=d?1:2];if(s&&(h*=m),o)for(var y=0;y<n;y++)l[y]*=m;c=t.Utils.setArraySize(this.world,8);y=0;for(var _=0,b=0;y<n;y++,_+=3){var w=h+=Y=l[y];if(d)(w%=m)<0&&(w+=m),b=0;else{if(w<0){g!=e.BEFORE&&(g=e.BEFORE,i.computeWorldVerticesWith(a,2,4,c,0)),this.addBeforePosition(w,c,0,u,_);continue}if(w>m){g!=e.AFTER&&(g=e.AFTER,i.computeWorldVerticesWith(a,p-6,4,c,0)),this.addAfterPosition(w-m,c,0,u,_);continue}}for(;;b++){var x=v[b];if(!(w>x)){if(0==b)w/=x;else w=(w-(Z=v[b-1]))/(x-Z);break}}b!=g&&(g=b,d&&b==f?(i.computeWorldVerticesWith(a,p-4,4,c,0),i.computeWorldVerticesWith(a,0,4,c,4)):i.computeWorldVerticesWith(a,6*b+2,8,c,0)),this.addCurvePosition(w,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],u,_,r||y>0&&0==Y)}return u}d?(p+=2,c=t.Utils.setArraySize(this.world,p),i.computeWorldVerticesWith(a,2,p-4,c,0),i.computeWorldVerticesWith(a,0,2,c,p-4),c[p-2]=c[0],c[p-1]=c[1]):(f--,p-=4,c=t.Utils.setArraySize(this.world,p),i.computeWorldVerticesWith(a,2,p,c,0));for(var T=t.Utils.setArraySize(this.curves,f),E=0,S=c[0],A=c[1],P=0,M=0,C=0,I=0,O=0,R=0,L=0,D=0,k=0,j=0,N=0,B=0,U=0,F=0,X=(y=0,2);y<f;y++,X+=6)P=c[X],M=c[X+1],C=c[X+2],I=c[X+3],O=c[X+4],R=c[X+5],N=2*(L=.1875*(S-2*P+C))+(k=.09375*(3*(P-C)-S+O)),B=2*(D=.1875*(A-2*M+I))+(j=.09375*(3*(M-I)-A+R)),U=.75*(P-S)+L+.16666667*k,F=.75*(M-A)+D+.16666667*j,E+=Math.sqrt(U*U+F*F),U+=N,F+=B,N+=k,B+=j,E+=Math.sqrt(U*U+F*F),U+=N,F+=B,E+=Math.sqrt(U*U+F*F),U+=N+k,F+=B+j,E+=Math.sqrt(U*U+F*F),T[y]=E,S=O,A=R;if(s&&(h*=E),o)for(y=0;y<n;y++)l[y]*=E;for(var V=this.segments,H=0,W=(y=0,_=0,b=0,0);y<n;y++,_+=3){var Y;w=h+=Y=l[y];if(d)(w%=E)<0&&(w+=E),b=0;else{if(w<0){this.addBeforePosition(w,c,0,u,_);continue}if(w>E){this.addAfterPosition(w-E,c,p-4,u,_);continue}}for(;;b++){var G=T[b];if(!(w>G)){if(0==b)w/=G;else w=(w-(Z=T[b-1]))/(G-Z);break}}if(b!=g){g=b;var z=6*b;for(S=c[z],A=c[z+1],P=c[z+2],M=c[z+3],C=c[z+4],I=c[z+5],O=c[z+6],R=c[z+7],N=2*(L=.03*(S-2*P+C))+(k=.006*(3*(P-C)-S+O)),B=2*(D=.03*(A-2*M+I))+(j=.006*(3*(M-I)-A+R)),U=.3*(P-S)+L+.16666667*k,F=.3*(M-A)+D+.16666667*j,H=Math.sqrt(U*U+F*F),V[0]=H,z=1;z<8;z++)U+=N,F+=B,N+=k,B+=j,H+=Math.sqrt(U*U+F*F),V[z]=H;U+=N,F+=B,H+=Math.sqrt(U*U+F*F),V[8]=H,U+=N+k,F+=B+j,H+=Math.sqrt(U*U+F*F),V[9]=H,W=0}for(w*=H;;W++){var q=V[W];if(!(w>q)){var Z;if(0==W)w/=q;else w=W+(w-(Z=V[W-1]))/(q-Z);break}}this.addCurvePosition(.1*w,S,A,P,M,C,I,O,R,u,_,r||y>0&&0==Y)}return u},e.prototype.addBeforePosition=function(t,e,i,n,r){var s=e[i],o=e[i+1],a=e[i+2]-s,h=e[i+3]-o,l=Math.atan2(h,a);n[r]=s+t*Math.cos(l),n[r+1]=o+t*Math.sin(l),n[r+2]=l},e.prototype.addAfterPosition=function(t,e,i,n,r){var s=e[i+2],o=e[i+3],a=s-e[i],h=o-e[i+1],l=Math.atan2(h,a);n[r]=s+t*Math.cos(l),n[r+1]=o+t*Math.sin(l),n[r+2]=l},e.prototype.addCurvePosition=function(t,e,i,n,r,s,o,a,h,l,u,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,p=d*t,f=1-t,g=f*f,v=g*f,m=f*t,y=3*m,_=f*y,b=y*t,w=e*v+n*_+s*b+a*p,x=i*v+r*_+o*b+h*p;l[u]=w,l[u+1]=x,c&&(l[u+2]=Math.atan2(x-(i*g+r*m*2+o*d),w-(e*g+n*m*2+s*d)))},e.prototype.getOrder=function(){return this.data.order},e}();e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,t.PathConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t){this.order=0,this.bones=new Array,this.name=t}}();t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var n=e.bones[i],r=void 0;if(null==n.parent)r=new t.Bone(n,this,null);else{var s=this.bones[n.parent.index];r=new t.Bone(n,this,s),s.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(i=0;i<e.slots.length;i++){var o=e.slots[i],a=(r=this.bones[o.boneData.index],new t.Slot(o,r));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(i=0;i<e.ikConstraints.length;i++){var h=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(h,this))}this.transformConstraints=new Array;for(i=0;i<e.transformConstraints.length;i++){var l=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(l,this))}this.pathConstraints=new Array;for(i=0;i<e.pathConstraints.length;i++){var u=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(u,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;var n=this.ikConstraints,r=this.transformConstraints,s=this.pathConstraints,o=n.length,a=r.length,h=s.length,l=o+a+h;t:for(e=0;e<l;e++){for(var u=0;u<o;u++){if((c=n[u]).data.order==e){this.sortIkConstraint(c);continue t}}for(u=0;u<a;u++){if((c=r[u]).data.order==e){this.sortTransformConstraint(c);continue t}}for(u=0;u<h;u++){var c;if((c=s[u]).data.order==e){this.sortPathConstraint(c);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var i=t.bones,n=i[0];if(this.sortBone(n),i.length>1){var r=i[i.length-1];this._updateCache.indexOf(r)>-1||this.updateCacheReset.push(r)}this._updateCache.push(t),this.sortReset(n.children),i[i.length-1].sorted=!0},e.prototype.sortPathConstraint=function(e){var i=e.target,n=i.data.index,r=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var s=0,o=this.data.skins.length;s<o;s++)this.sortPathConstraintAttachment(this.data.skins[s],n,r);var a=i.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,r);var h=e.bones,l=h.length;for(s=0;s<l;s++)this.sortBone(h[s]);this._updateCache.push(e);for(s=0;s<l;s++)this.sortReset(h[s].children);for(s=0;s<l;s++)h[s].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);for(var e=t.bones,i=e.length,n=0;n<i;n++)this.sortBone(e[n]);this._updateCache.push(t);for(n=0;n<i;n++)this.sortReset(e[n].children);for(n=0;n<i;n++)e[n].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,i){var n=t.attachments[e];if(n)for(var r in n)this.sortPathConstraintAttachmentWith(n[r],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var n=e.bones;if(null==n)this.sortBone(i);else for(var r=this.bones,s=0;s<n.length;)for(var o=n[s++],a=s+o;s<a;s++){var h=n[s];this.sortBone(r[h])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];n.sorted&&this.sortReset(n.children),n.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var n=t[e];n.ax=n.x,n.ay=n.y,n.arotation=n.rotation,n.ascaleX=n.scaleX,n.ascaleY=n.scaleY,n.ashearX=n.shearX,n.ashearY=n.shearY,n.appliedValid=!0}var r=this._updateCache;for(e=0,i=r.length;e<i;e++)r[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var n=this.ikConstraints;for(e=0,i=n.length;e<i;e++){(a=n[e]).bendDirection=a.data.bendDirection,a.mix=a.data.mix}var r=this.transformConstraints;for(e=0,i=r.length;e<i;e++){var s=(a=r[e]).data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}var o=this.pathConstraints;for(e=0,i=o.length;e<i;e++){var a;s=(a=o[e]).data;a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,n=e.length;i<n;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i],s=r.data.attachmentName;if(null!=s){var o=t.getAttachment(i,s);null!=o&&r.setAttachment(o)}}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,n=0,r=i.length;n<r;n++){var s=i[n];if(s.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(n,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.data.name==t)return r}return null},e.prototype.getBounds=function(e,i){if(null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var n=this.drawOrder,r=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=0,l=n.length;h<l;h++){var u=n[h],c=null,d=u.getAttachment();if(d instanceof t.RegionAttachment?c=d.updateWorldVertices(u,!1):d instanceof t.MeshAttachment&&(c=d.updateWorldVertices(u,!0)),null!=c)for(var p=0,f=c.length;p<f;p+=8){var g=c[p],v=c[p+1];r=Math.min(r,g),s=Math.min(s,v),o=Math.max(o,g),a=Math.max(a,v)}}e.set(r,s),i.set(o-r,a-s)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool(function(){return t.Utils.newFloatArray(16)})}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,s=this.polygonPool,o=e.slots,a=o.length;n.length=0,s.freeAll(r),r.length=0;for(var h=0;h<a;h++){var l=o[h],u=l.getAttachment();if(u instanceof t.BoundingBoxAttachment){var c=u;n.push(c);var d=s.obtain();d.length!=c.worldVerticesLength&&(d=t.Utils.newFloatArray(c.worldVerticesLength)),r.push(d),c.computeWorldVertices(l,d)}}i&&this.aabbCompute()},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=this.polygons,s=0,o=r.length;s<o;s++)for(var a=r[s],h=a,l=0,u=a.length;l<u;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),n=Math.max(n,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=n},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,n){var r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=r&&i<=r||e<=s&&n<=s||t>=o&&i>=o||e>=a&&n>=a)return!1;var h=(n-e)/(i-t),l=h*(r-t)+e;if(l>s&&l<a)return!0;if((l=h*(o-t)+e)>s&&l<a)return!0;var u=(s-e)/h+t;return u>r&&u<o||(u=(a-e)/h+t)>r&&u<o},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,n=0,r=i.length;n<r;n++)if(this.containsPointPolygon(i[n],t,e))return this.boundingBoxes[n];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var n=t,r=t.length,s=r-2,o=!1,a=0;a<r;a+=2){var h=n[a+1],l=n[s+1];if(h<i&&l>=i||l<i&&h>=i){var u=n[a];u+(i-h)/(l-h)*(n[s]-u)<e&&(o=!o)}s=a}return o},e.prototype.intersectsSegment=function(t,e,i,n){for(var r=this.polygons,s=0,o=r.length;s<o;s++)if(this.intersectsSegmentPolygon(r[s],t,e,i,n))return this.boundingBoxes[s];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,n,r){for(var s=t,o=t.length,a=e-n,h=i-r,l=e*r-i*n,u=s[o-2],c=s[o-1],d=0;d<o;d+=2){var p=s[d],f=s[d+1],g=u*f-c*p,v=u-p,m=c-f,y=a*m-h*v,_=(l*v-a*g)/y;if((_>=u&&_<=p||_>=p&&_<=u)&&(_>=e&&_<=n||_>=n&&_<=e)){var b=(l*m-h*g)/y;if((b>=c&&b<=f||b>=f&&b<=c)&&(b>=i&&b<=r||b>=r&&b<=i))return!0}u=p,c=f}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++){var r=e[i];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,n=e.length;i<n;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var n=this.scale,r=new t.SkeletonData,s="string"==typeof i?JSON.parse(i):i,o=s.skeleton;if(null!=o&&(r.hash=o.hash,r.version=o.spine,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images),s.bones)for(var a=0;a<s.bones.length;a++){var h=s.bones[a],l=null,u=this.getValue(h,"parent",null);if(null!=u&&null==(l=r.findBone(u)))throw new Error("Parent bone not found: "+u);(f=new t.BoneData(r.bones.length,h.name,l)).length=this.getValue(h,"length",0)*n,f.x=this.getValue(h,"x",0)*n,f.y=this.getValue(h,"y",0)*n,f.rotation=this.getValue(h,"rotation",0),f.scaleX=this.getValue(h,"scaleX",1),f.scaleY=this.getValue(h,"scaleY",1),f.shearX=this.getValue(h,"shearX",0),f.shearY=this.getValue(h,"shearY",0),h.hasOwnProperty("inheritScale")||h.hasOwnProperty("inheritRotation")?f.transformMode=e.transformModeLegacy(this.getValue(h,"inheritRotation",!0),this.getValue(h,"inheritScale",!0)):f.transformMode=e.transformModeFromString(this.getValue(h,"transform","normal")),r.bones.push(f)}if(s.slots)for(a=0;a<s.slots.length;a++){var c=(E=s.slots[a]).name,d=E.bone,p=r.findBone(d);if(null==p)throw new Error("Slot bone not found: "+d);var f=new t.SlotData(r.slots.length,c,p),g=this.getValue(E,"color",null);null!=g&&f.color.setFromString(g),f.attachmentName=this.getValue(E,"attachment",null),f.blendMode=e.blendModeFromString(this.getValue(E,"blend","normal")),r.slots.push(f)}if(s.ik)for(a=0;a<s.ik.length;a++){var v=s.ik[a];(f=new t.IkConstraintData(v.name)).order=this.getValue(v,"order",0);for(var m=0;m<v.bones.length;m++){d=v.bones[m];if(null==(_=r.findBone(d)))throw new Error("IK bone not found: "+d);f.bones.push(_)}var y=v.target;if(f.target=r.findBone(y),null==f.target)throw new Error("IK target bone not found: "+y);f.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,f.mix=this.getValue(v,"mix",1),r.ikConstraints.push(f)}if(s.transform)for(a=0;a<s.transform.length;a++){v=s.transform[a];(f=new t.TransformConstraintData(v.name)).order=this.getValue(v,"order",0);for(m=0;m<v.bones.length;m++){d=v.bones[m];if(null==(_=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);f.bones.push(_)}y=v.target;if(f.target=r.findBone(y),null==f.target)throw new Error("Transform constraint target bone not found: "+y);f.offsetRotation=this.getValue(v,"rotation",0),f.offsetX=this.getValue(v,"x",0)*n,f.offsetY=this.getValue(v,"y",0)*n,f.offsetScaleX=this.getValue(v,"scaleX",0),f.offsetScaleY=this.getValue(v,"scaleY",0),f.offsetShearY=this.getValue(v,"shearY",0),f.rotateMix=this.getValue(v,"rotateMix",1),f.translateMix=this.getValue(v,"translateMix",1),f.scaleMix=this.getValue(v,"scaleMix",1),f.shearMix=this.getValue(v,"shearMix",1),r.transformConstraints.push(f)}if(s.path)for(a=0;a<s.path.length;a++){v=s.path[a];(f=new t.PathConstraintData(v.name)).order=this.getValue(v,"order",0);for(m=0;m<v.bones.length;m++){var _;d=v.bones[m];if(null==(_=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);f.bones.push(_)}y=v.target;if(f.target=r.findSlot(y),null==f.target)throw new Error("Path target slot not found: "+y);f.positionMode=e.positionModeFromString(this.getValue(v,"positionMode","percent")),f.spacingMode=e.spacingModeFromString(this.getValue(v,"spacingMode","length")),f.rotateMode=e.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),f.offsetRotation=this.getValue(v,"rotation",0),f.position=this.getValue(v,"position",0),f.positionMode==t.PositionMode.Fixed&&(f.position*=n),f.spacing=this.getValue(v,"spacing",0),f.spacingMode!=t.SpacingMode.Length&&f.spacingMode!=t.SpacingMode.Fixed||(f.spacing*=n),f.rotateMix=this.getValue(v,"rotateMix",1),f.translateMix=this.getValue(v,"translateMix",1),r.pathConstraints.push(f)}if(s.skins)for(var b in s.skins){var w=s.skins[b],x=new t.Skin(b);for(var c in w){var T=r.findSlotIndex(c);if(-1==T)throw new Error("Slot not found: "+c);var E=w[c];for(var S in E){var A=this.readAttachment(E[S],x,T,S);null!=A&&x.addAttachment(T,S,A)}}r.skins.push(x),"default"==x.name&&(r.defaultSkin=x)}a=0;for(var P=this.linkedMeshes.length;a<P;a++){var M=this.linkedMeshes[a];if(null==(x=null==M.skin?r.defaultSkin:r.findSkin(M.skin)))throw new Error("Skin not found: "+M.skin);var C=x.getAttachment(M.slotIndex,M.parent);if(null==C)throw new Error("Parent mesh not found: "+M.parent);M.mesh.setParentMesh(C)}if(this.linkedMeshes.length=0,s.events)for(var I in s.events){var O=s.events[I];(f=new t.EventData(I)).intValue=this.getValue(O,"int",0),f.floatValue=this.getValue(O,"float",0),f.stringValue=this.getValue(O,"string",""),r.events.push(f)}if(s.animations)for(var R in s.animations){var L=s.animations[R];this.readAnimation(L,R,r)}return r},e.prototype.readAttachment=function(e,n,r,s){var o=this.scale;switch(s=this.getValue(e,"name",s),this.getValue(e,"type","region")){case"region":var a=this.getValue(e,"path",s),h=this.attachmentLoader.newRegionAttachment(n,s,a);return null==h?null:(h.path=a,h.x=this.getValue(e,"x",0)*o,h.y=this.getValue(e,"y",0)*o,h.scaleX=this.getValue(e,"scaleX",1),h.scaleY=this.getValue(e,"scaleY",1),h.rotation=this.getValue(e,"rotation",0),h.width=e.width*o,h.height=e.height*o,null!=(p=this.getValue(e,"color",null))&&h.color.setFromString(p),h);case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(n,s);return null==l?null:(this.readVertices(e,l,e.vertexCount<<1),null!=(p=this.getValue(e,"color",null))&&l.color.setFromString(p),l);case"weightedmesh":case"skinnedmesh":case"mesh":case"linkedmesh":a=this.getValue(e,"path",s);var u=this.attachmentLoader.newMeshAttachment(n,s,a);if(null==u)return null;u.path=a,null!=(p=this.getValue(e,"color",null))&&u.color.setFromString(p);var c=this.getValue(e,"parent",null);if(null!=c)return u.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new i(u,this.getValue(e,"skin",null),r,c)),u;var d=e.uvs;return this.readVertices(e,u,d.length),u.triangles=e.triangles,u.regionUVs=d,u.hullLength=2*this.getValue(e,"hull",0),u;case"path":if(null==(a=this.attachmentLoader.newPathAttachment(n,s)))return null;a.closed=this.getValue(e,"closed",!1),a.constantSpeed=this.getValue(e,"constantSpeed",!0);var p,f=e.vertexCount;this.readVertices(e,a,f<<1);for(var g=t.Utils.newArray(f/3,0),v=0;v<e.lengths.length;v++)g[v++]=e.lengths[v]*o;return a.lengths=g,null!=(p=this.getValue(e,"color",null))&&a.color.setFromString(p),a}return null},e.prototype.readVertices=function(e,i,n){var r=this.scale;i.worldVerticesLength=n;var s=e.vertices;if(n!=s.length){var o=new Array,a=new Array;for(u=0,c=s.length;u<c;){var h=s[u++];a.push(h);for(var l=u+4*h;u<l;u+=4)a.push(s[u]),o.push(s[u+1]*r),o.push(s[u+2]*r),o.push(s[u+3])}i.bones=a,i.vertices=t.Utils.toFloatArray(o)}else{if(1!=r)for(var u=0,c=s.length;u<c;u++)s[u]*=r;i.vertices=t.Utils.toFloatArray(s)}},e.prototype.readAnimation=function(e,i,n){var r=this.scale,s=new Array,o=0;if(e.slots)for(var a in e.slots){var h=e.slots[a];if(-1==(z=n.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var l in h){var u=h[l];if("color"==l){(y=new t.ColorTimeline(u.length)).slotIndex=z;for(var c=0,d=0;d<u.length;d++){var p=u[d],f=new t.Color;f.setFromString(p.color),y.setFrame(c,p.time,f.r,f.g,f.b,f.a),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if(!(l="attachment"))throw new Error("Invalid timeline type for a slot: "+l+" ("+a+")");(y=new t.AttachmentTimeline(u.length)).slotIndex=z;for(c=0,d=0;d<u.length;d++){p=u[d];y.setFrame(c++,p.time,p.name)}s.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}}}if(e.bones)for(var g in e.bones){var v=e.bones[g],m=n.findBoneIndex(g);if(-1==m)throw new Error("Bone not found: "+g);for(var l in v){u=v[l];if("rotate"===l){(y=new t.RotateTimeline(u.length)).boneIndex=m;for(c=0,d=0;d<u.length;d++){p=u[d];y.setFrame(c,p.time,p.angle),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==l&&"scale"!==l&&"shear"!==l)throw new Error("Invalid timeline type for a bone: "+l+" ("+g+")");var y=null,_=1;"scale"===l?y=new t.ScaleTimeline(u.length):"shear"===l?y=new t.ShearTimeline(u.length):(y=new t.TranslateTimeline(u.length),_=r),y.boneIndex=m;for(c=0,d=0;d<u.length;d++){p=u[d];var b=this.getValue(p,"x",0),w=this.getValue(p,"y",0);y.setFrame(c,p.time,b*_,w*_),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var x in e.ik){var T=e.ik[x],E=n.findIkConstraint(x);(y=new t.IkConstraintTimeline(T.length)).ikConstraintIndex=n.ikConstraints.indexOf(E);for(c=0,d=0;d<T.length;d++){p=T[d];y.setFrame(c,p.time,this.getValue(p,"mix",1),this.getValue(p,"bendPositive",!0)?1:-1),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var x in e.transform){T=e.transform[x],E=n.findTransformConstraint(x);(y=new t.TransformConstraintTimeline(T.length)).transformConstraintIndex=n.transformConstraints.indexOf(E);for(c=0,d=0;d<T.length;d++){p=T[d];y.setFrame(c,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1),this.getValue(p,"scaleMix",1),this.getValue(p,"shearMix",1)),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.paths)for(var x in e.paths){T=e.paths[x];var S=n.findPathConstraintIndex(x);if(-1==S)throw new Error("Path constraint not found: "+x);var A=n.pathConstraints[S];for(var l in T){u=T[l];if("position"===l||"spacing"===l){y=null,_=1;"spacing"===l?(y=new t.PathConstraintSpacingTimeline(u.length),A.spacingMode!=t.SpacingMode.Length&&A.spacingMode!=t.SpacingMode.Fixed||(_=r)):(y=new t.PathConstraintPositionTimeline(u.length),A.positionMode==t.PositionMode.Fixed&&(_=r)),y.pathConstraintIndex=S;for(c=0,d=0;d<u.length;d++){p=u[d];y.setFrame(c,p.time,this.getValue(p,l,0)*_),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===l){(y=new t.PathConstraintMixTimeline(u.length)).pathConstraintIndex=S;for(c=0,d=0;d<u.length;d++){p=u[d];y.setFrame(c,p.time,this.getValue(p,"rotateMix",1),this.getValue(p,"translateMix",1)),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[(y.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var P in e.deform){var M=e.deform[P],C=n.findSkin(P);if(null==C)throw new Error("Skin not found: "+P);for(var a in M){h=M[a];if(-1==(z=n.findSlotIndex(a)))throw new Error("Slot not found: "+h.name);for(var l in h){u=h[l];var I=C.getAttachment(z,l);if(null==I)throw new Error("Deform attachment not found: "+u.name);var O=null!=I.bones,R=I.vertices,L=O?R.length/3*2:R.length;(y=new t.DeformTimeline(u.length)).slotIndex=z,y.attachment=I;c=0;for(var D=0;D<u.length;D++){p=u[D];var k=void 0,j=this.getValue(p,"vertices",null);if(null==j)k=O?t.Utils.newFloatArray(L):R;else{k=t.Utils.newFloatArray(L);var N=this.getValue(p,"offset",0);if(t.Utils.arrayCopy(j,0,k,N,j.length),1!=r)for(var B=(d=N)+j.length;d<B;d++)k[d]*=r;if(!O)for(d=0;d<L;d++)k[d]+=R[d]}y.setFrame(c,p.time,k),this.readCurve(p,y,c),c++}s.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}}}var U=e.drawOrder;if(null==U&&(U=e.draworder),null!=U){y=new t.DrawOrderTimeline(U.length);var F=n.slots.length;for(c=0,D=0;D<U.length;D++){var X=U[D],V=null,H=this.getValue(X,"offsets",null);if(null!=H){V=t.Utils.newArray(F,-1);var W=t.Utils.newArray(F-H.length,0),Y=0,G=0;for(d=0;d<H.length;d++){var z,q=H[d];if(-1==(z=n.findSlotIndex(q.slot)))throw new Error("Slot not found: "+q.slot);for(;Y!=z;)W[G++]=Y++;V[Y+q.offset]=Y++}for(;Y<F;)W[G++]=Y++;for(d=F-1;d>=0;d--)-1==V[d]&&(V[d]=W[--G])}y.setFrame(c++,X.time,V)}s.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(e.events){for(y=new t.EventTimeline(e.events.length),c=0,d=0;d<e.events.length;d++){var Z=e.events[d],J=n.findEvent(Z.name);if(null==J)throw new Error("Event not found: "+Z.name);var K=new t.Event(Z.time,J);K.intValue=this.getValue(Z,"int",J.intValue),K.floatValue=this.getValue(Z,"float",J.floatValue),K.stringValue=this.getValue(Z,"string",J.stringValue),y.setFrame(c++,K)}s.push(y),o=Math.max(o,y.frames[y.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new t.Animation(i,s,o))},e.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var n=t.curve;e.setCurve(i,n[0],n[1],n[2],n[3])}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(t){if("multiply"===t)return PIXI.BLEND_MODES.MULTIPLY;if("additive"===t)return PIXI.BLEND_MODES.ADD;if("screen"===t)return PIXI.BLEND_MODES.SCREEN;if("normal"===t)return PIXI.BLEND_MODES.NORMAL;throw new Error("Unknown blend mode: "+t)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e.transformModeLegacy=function(e,i){return console.log("Deprecation Warning: re-export your model with spine 3.5, or downgrade to pixi-spine 1.1 branch. There were many breaking changes, place breakpoint here if you want to know which model is broken"),e&&i?t.TransformMode.Normal:e?t.TransformMode.NoScaleOrReflection:i?t.TransformMode.NoRotationOrReflection:t.TransformMode.OnlyTranslation},e}();t.SkeletonJson=e;var i=function(){return function(t,e,i,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=n}}()}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var n=this.attachments;t>=n.length&&(n.length=t+1),n[t]||(n[t]={}),n[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,n=0;n<t.slots.length;n++){var r=t.slots[n],s=r.getAttachment();if(s&&i<e.attachments.length){var o=e.attachments[i];for(var a in o){if(s==o[a]){var h=this.getAttachment(i,name);null!=h&&r.setAttachment(h);break}}}i++}},t}();t.Skin=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(e,i){if(this.attachmentVertices=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.blendMode=e.blendMode,this.setToSetupPose()}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(e,i,n){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=n}}();t.SlotData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e,i,n=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return i.MirroredRepeat;case"clamptoedge":return i.ClampToEdge;case"repeat":return i.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=n,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(i=t.TextureWrap||(t.TextureWrap={}));var r=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return console.warn("Deprecation Warning: @Hackerham: I guess, if you are using PIXI-SPINE ATLAS region.offsetY, you want a texture, right? Use region.texture from now on."),this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=r}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var s=this.pages,o=null,a=0;a<s.length;a++)if(s[a].baseTexture===i.baseTexture){o=s[a];break}if(null===o){(o=new n).name="texturePage";var h=i.baseTexture;o.width=h.realWidth,o.height=h.realHeight,o.baseTexture=h,o.minFilter=o.magFilter=t.TextureFilter.Nearest,o.uWrap=t.TextureWrap.ClampToEdge,o.vWrap=t.TextureWrap.ClampToEdge,s.push(o)}var l=new r;return l.name=e,l.page=o,l.texture=i,l.index=-1,this.regions.push(l),l},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,s,o){var a=this;if(null==s)throw new Error("textureLoader cannot be null.");var h=new i(e),l=new Array(4),u=null,c=function(){for(;;){var e=h.readLine();if(null==e)return o&&o(a);if(0==(e=e.trim()).length)u=null;else{if(!u){(u=new n).name=e,2==h.readTuple(l)&&(u.width=parseInt(l[0]),u.height=parseInt(l[1]),h.readTuple(l)),h.readTuple(l),u.minFilter=t.Texture.filterFromString(l[0]),u.magFilter=t.Texture.filterFromString(l[1]);var i=h.readValue();u.uWrap=t.TextureWrap.ClampToEdge,u.vWrap=t.TextureWrap.ClampToEdge,"x"==i?u.uWrap=t.TextureWrap.Repeat:"y"==i?u.vWrap=t.TextureWrap.Repeat:"xy"==i&&(u.uWrap=u.vWrap=t.TextureWrap.Repeat),s(e,function(t){u.baseTexture=t,t.hasLoaded||(t.width=u.width,t.height=u.height),a.pages.push(u),u.setFilters(),u.width&&u.height||(u.width=t.realWidth,u.height=t.realHeight,u.width&&u.height||console.log("ERROR spine atlas page "+u.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),c()}),a.pages.push(u);break}var d=new r;d.name=e,d.page=u;var p="true"==h.readValue()?6:0;h.readTuple(l);var f=parseInt(l[0]),g=parseInt(l[1]);h.readTuple(l);var v=parseInt(l[0]),m=parseInt(l[1]),y=u.baseTexture.resolution;f/=y,g/=y,v/=y,m/=y;var _=new PIXI.Rectangle(f,g,p?m:v,p?v:m);4==h.readTuple(l)&&4==h.readTuple(l)&&h.readTuple(l);var b=parseInt(l[0])/y,w=parseInt(l[1])/y;h.readTuple(l);var x=parseInt(l[0])/y,T=parseInt(l[1])/y,E=new PIXI.Rectangle(0,0,b,w),S=new PIXI.Rectangle(x,w-m-T,v,m);if("4"==PIXI.VERSION[0])d.texture=new PIXI.Texture(d.page.baseTexture,_,E,S,p);else{var A=new PIXI.Rectangle(f,g,v,m),P=A.clone();S.width=b,S.height=w,d.texture=new PIXI.Texture(d.page.baseTexture,A,P,S,p)}d.index=parseInt(h.readValue()),d.texture._updateUvs(),a.regions.push(d)}}};c()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var n=0,r=i+1;n<3;n++){var s=e.indexOf(",",r);if(-1==s)break;t[n]=e.substr(r,s-r).trim(),r=s+1}return t[n]=e.substring(r).trim(),n+1},t}(),n=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=n;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=r}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var n=0;n<e.bones.length;n++)this.bones.push(i.findBone(e.bones[n].name));this.target=i.findBone(e.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){for(var e=this.rotateMix,i=this.translateMix,n=this.scaleMix,r=this.shearMix,s=this.target,o=s.matrix.a,a=s.matrix.c,h=s.matrix.b,l=s.matrix.d,u=this.bones,c=0,d=u.length;c<d;c++){var p=u[c],f=p.matrix,g=!1;if(0!=e){var v=f.a,m=f.c,y=f.b,_=f.d;(S=Math.atan2(h,o)-Math.atan2(y,v)+this.data.offsetRotation*t.MathUtils.degRad)>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2),S*=e;var b=Math.cos(S),w=Math.sin(S);f.a=b*v-w*y,f.c=b*m-w*_,f.b=w*v+b*y,f.d=w*m+b*_,g=!0}if(0!=i){var x=this.temp;s.localToWorld(x.set(this.data.offsetX,this.data.offsetY)),f.tx+=(x.x-f.tx)*i,f.ty+=(x.y-f.ty)*i,g=!0}if(n>0){var T=Math.sqrt(f.a*f.a+f.b*f.b),E=Math.sqrt(o*o+h*h);T>1e-5&&(T=(T+(E-T+this.data.offsetScaleX)*n)/T),f.a*=T,f.b*=T,T=Math.sqrt(f.c*f.c+f.d*f.d),E=Math.sqrt(a*a+l*l),T>1e-5&&(T=(T+(E-T+this.data.offsetScaleY)*n)/T),f.c*=T,f.d*=T,g=!0}if(r>0){m=f.c,_=f.d;var S,A=Math.atan2(_,m);(S=Math.atan2(l,a)-Math.atan2(h,o)-(A-Math.atan2(f.b,f.a)))>t.MathUtils.PI?S-=t.MathUtils.PI2:S<-t.MathUtils.PI&&(S+=t.MathUtils.PI2),S=A+(S+this.data.offsetShearY*t.MathUtils.degRad)*r;T=Math.sqrt(m*m+_*_);f.c=Math.cos(S)*T,f.d=Math.sin(S)*T,g=!0}g&&(p.appliedValid=!1)}},e.prototype.getOrder=function(){return this.data.order},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){return function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,null==t)throw new Error("name cannot be null.");this.name=t}}();t.TransformConstraintData=e}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return void 0!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.r=t,this.g=e,this.b=i,this.a=n}return t.prototype.set=function(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,n){return this.r+=t,this.g+=e,this.b+=i,this.a+=n,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t}();i.WHITE=new i(1,1,1,1),i.RED=new i(1,0,0,1),i.GREEN=new i(0,1,0,1),i.BLUE=new i(0,0,1,1),i.MAGENTA=new i(1,0,1,1),t.Color=i;var n=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t}();n.PI=3.1415927,n.PI2=2*n.PI,n.radiansToDegrees=180/n.PI,n.radDeg=n.radiansToDegrees,n.degreesToRadians=n.PI/180,n.degRad=n.degreesToRadians,t.MathUtils=n;var r=function(){function t(){}return t.arrayCopy=function(t,e,i,n,r){for(var s=e,o=n;s<e+r;s++,o++)i[o]=t[s]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var n=t.length;if(n==e)return t;if(t.length=e,n<e)for(var r=n;r<e;r++)t[r]=i;return t},t.ensureArrayCapacity=function(e,i,n){return void 0===n&&(n=0),e.length>=i?e:t.setArraySize(e,i,n)},t.newArray=function(t,e){for(var i=new Array(t),n=0;n<t;n++)i[n]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),n=0;n<i.length;n++)i[n]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t}();r.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t.Utils=r;var s=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],n=i.matrix;console.log(i.data.name+", "+n.a+", "+n.b+", "+n.c+", "+n.d+", "+n.tx+", "+n.ty)}},t}();t.DebugUtils=s;var o=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=o;var a=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=a;var h=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=h}(t.core||(t.core={}))}(pixi_spine||(pixi_spine={})),function(t){function e(){return function(e,n){if(!e.data||!function(t){var e=PIXI.loaders.Resource.TYPE;return e?t.type===e.JSON:t.isJson}(e)||!e.data.bones)return n();var r=e.metadata?e.metadata.spineAtlas:null;if(!1===r)return n();if(r&&r.pages){var s=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(r)).readSkeletonData(e.data);return e.spineData=s,e.spineAtlas=r,n()}var o=".atlas";e.metadata&&e.metadata.spineAtlasSuffix&&(o=e.metadata.spineAtlasSuffix);var a=e.url.substr(0,e.url.lastIndexOf("."))+o;a=a.replace(this.baseUrl,"");var h={crossOrigin:e.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:e.metadata?e.metadata.spineMetadata:null,parentResource:e},l={crossOrigin:e.crossOrigin,metadata:e.metadata?e.metadata.imageMetadata:null,parentResource:e},u=e.url.substr(0,e.url.lastIndexOf("/")+1);u=u.replace(this.baseUrl,"");var c=i(this,e.name+"_atlas_page_",u,l);this.add(e.name+"_atlas",a,h,function(i){new t.core.TextureAtlas(i.xhr.responseText,c,function(i){var r=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(i)).readSkeletonData(e.data);e.spineData=r,e.spineAtlas=i,n()})})}}function i(t,e,i,n){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(r,s){var o=e+r,a=i+r;t.add(o,a,n,function(t){s(t.texture.baseTexture)})}}t.atlasParser=e,t.imageLoaderAdapter=i,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}},PIXI.loaders.Loader.addPixiMiddleware(e),PIXI.loader.use(e())}(pixi_spine||(pixi_spine={})),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],i=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e}(PIXI.Sprite);t.SpineSprite=i;var n=function(t){function e(e,i,n,r,s){return t.call(this,e,i,n,r,s)||this}return __extends(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=n;var r=function(r){function o(e){var i=r.call(this)||this;if(i.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var n=this.skeleton.findSlotIndex(t);return-1!=n&&this.hackTextureBySlotIndex(n,e,i)},!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[];for(var n=0,s=i.skeleton.slots.length;n<s;n++){var o=i.skeleton.slots[n],a=o.attachment,h=new PIXI.Container;if(i.slotContainers.push(h),i.addChild(h),a instanceof t.core.RegionAttachment){var l=a.region.name,u=i.createSprite(o,a,l);o.currentSprite=u,o.currentSpriteName=l,h.addChild(u)}else{if(!(a instanceof t.core.MeshAttachment))continue;var c=i.createMesh(o,a);o.currentMesh=c,o.currentMeshName=a.name,h.addChild(c)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return __extends(o,r),Object.defineProperty(o.prototype,"autoUpdate",{get:function(){return this.updateTransform===o.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?o.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),o.prototype.update=function(i){this.state.update(i),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();for(var n=this.skeleton.drawOrder,r=this.skeleton.slots,o=0,a=n.length;o<a;o++)this.children[o]=this.slotContainers[n[o].data.index];var h=this.tintRgb[0],l=this.tintRgb[1],u=this.tintRgb[2];for(o=0,a=r.length;o<a;o++){var c=r[o],d=c.attachment,p=this.slotContainers[o];if(d){var f=d.color;if(d instanceof t.core.RegionAttachment){var g=d.region;if(g){c.currentMesh&&(c.currentMesh.visible=!1,c.currentMesh=null,c.currentMeshName=void 0);var v=g;if(!c.currentSpriteName||c.currentSpriteName!==v.name){var m=v.name;if(c.currentSprite&&(c.currentSprite.visible=!1),c.sprites=c.sprites||{},void 0!==c.sprites[m])c.sprites[m].visible=!0;else{var y=this.createSprite(c,d,m);p.addChild(y)}c.currentSprite=c.sprites[m],c.currentSpriteName=m}}if(p.transform){var _=p.transform,b=_,w=void 0;b.matrix2d?(w=b.matrix2d,b._dirtyVersion++,b.version=b._dirtyVersion,b.isStatic=!0,b.operMode=0):(b.position&&(_=new PIXI.TransformBase,p.transform=_),w=_.localTransform),c.bone.matrix.copy(w)}else{var x=p.localTransform||new PIXI.Matrix;c.bone.matrix.copy(x),p.localTransform=x,p.displayObjectUpdateTransform=s}e[0]=h*c.color.r*f.r,e[1]=l*c.color.g*f.g,e[2]=u*c.color.b*f.b,c.currentSprite.tint=PIXI.utils.rgb2hex(e),c.currentSprite.blendMode=c.blendMode}else{if(!(d instanceof t.core.MeshAttachment)){p.visible=!1;continue}if(c.currentSprite&&(c.currentSprite.visible=!1,c.currentSprite=null,c.currentSpriteName=void 0,p.transform?p.transform=new PIXI.TransformStatic:(p.localTransform=new PIXI.Matrix,p.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform)),!c.currentMeshName||c.currentMeshName!==d.name){var T=d.name;if(c.currentMesh&&(c.currentMesh.visible=!1),c.meshes=c.meshes||{},void 0!==c.meshes[T])c.meshes[T].visible=!0;else{var E=this.createMesh(c,d);p.addChild(E)}c.currentMesh=c.meshes[T],c.currentMeshName=T}if(d.computeWorldVertices(c,c.currentMesh.vertices),"3"!==PIXI.VERSION[0]){var S=c.currentMesh.tintRgb;S[0]=h*c.color.r*f.r,S[1]=l*c.color.g*f.g,S[2]=u*c.color.b*f.b}c.currentMesh.blendMode=c.blendMode}p.visible=!0,p.alpha=c.color.a}else p.visible=!1}},o.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},o.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,t.updateUVs(i,e.uvs),e.dirty++},o.prototype.autoUpdateTransform=function(){if(o.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},o.prototype.createSprite=function(e,n,r){var s=n.region;e.tempAttachment===n&&(s=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var o=s.texture,a=new i(o);return a.rotation=n.rotation*t.core.MathUtils.degRad,a.anchor.x=.5,a.anchor.y=.5,a.position.x=n.x,a.position.y=n.y,a.alpha=n.color.a,a.region=n.region,this.setSpriteRegion(n,a,n.region),e.sprites=e.sprites||{},e.sprites[r]=a,a},o.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=new n(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return r.canvasPadding=1.5,r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,i),t.meshes=t.meshes||{},t.meshes[e.name]=r,r},o.prototype.hackTextureBySlotIndex=function(e,i,n){void 0===i&&(i=null),void 0===n&&(n=null);var r=this.skeleton.slots[e];if(!r)return!1;var s=r.attachment,o=s.region;return i&&((o=new t.core.TextureRegion).texture=i,o.size=n),r.currentSprite&&r.currentSprite.region!=o?(this.setSpriteRegion(s,r.currentSprite,o),r.currentSprite.region=o):r.currentMesh&&r.currentMesh.region!=o?this.setMeshRegion(s,r.currentMesh,o):(r.tempRegion=o,r.tempAttachment=s),!0},o}(PIXI.Container);function s(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}r.globalAutoUpdate=!0,t.Spine=r}(pixi_spine||(pixi_spine={})),PIXI.spine=pixi_spine,function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.decomp=t()}}(function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=i[o]={exports:{}};e[o][0].call(l.exports,function(t){var i=e[o][1][t];return r(i||t)},l,l.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){function n(t,e,i){i=i||0;var n,r,s,o,a,h,l,u=[0,0];return n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],s=n*t[0][0]+r*t[0][1],o=e[1][1]-e[0][1],a=e[0][0]-e[1][0],h=o*e[0][0]+a*e[0][1],y(l=n*a-o*r,0,i)||(u[0]=(a*s-r*h)/l,u[1]=(n*h-o*s)/l),u}function r(t,e,i,n){var r=e[0]-t[0],s=e[1]-t[1],o=n[0]-i[0],a=n[1]-i[1];if(o*s-a*r==0)return!1;var h=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(o*s-a*r),l=(o*(t[1]-i[1])+a*(i[0]-t[0]))/(a*r-o*s);return h>=0&&1>=h&&l>=0&&1>=l}function s(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(e[1]-t[1])}function o(t,e,i){return s(t,e,i)>0}function a(t,e,i){return s(t,e,i)>=0}function h(t,e,i){return s(t,e,i)<0}function l(t,e,i){return s(t,e,i)<=0}function u(t,e,i,n){if(n){var r=_,o=b;r[0]=e[0]-t[0],r[1]=e[1]-t[1],o[0]=i[0]-e[0],o[1]=i[1]-e[1];var a=r[0]*o[0]+r[1]*o[1],h=Math.sqrt(r[0]*r[0]+r[1]*r[1]),l=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return n>Math.acos(a/(h*l))}return 0===s(t,e,i)}function c(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function d(t,e){var i=t.length;return t[0>e?e%i+i:e%i]}function p(t,e,i,n){for(var r=i;n>r;r++)t.push(e[r])}function f(t,e){return h(d(t,e-1),d(t,e),d(t,e+1))}function g(t,e,i){var r,s,o=w,h=x;if(a(d(t,e+1),d(t,e),d(t,i))&&l(d(t,e-1),d(t,e),d(t,i)))return!1;s=c(d(t,e),d(t,i));for(var u=0;u!==t.length;++u)if((u+1)%t.length!==e&&u!==e&&a(d(t,e),d(t,i),d(t,u+1))&&l(d(t,e),d(t,i),d(t,u))&&(o[0]=d(t,e),o[1]=d(t,i),h[0]=d(t,u),h[1]=d(t,u+1),r=n(o,h),c(d(t,e),r)<s))return!1;return!0}function v(t,e,i,n){var r=n||[];if(function(t){t.length=0}(r),i>e)for(var s=e;i>=s;s++)r.push(t[s]);else{for(s=0;i>=s;s++)r.push(t[s]);for(s=e;s<t.length;s++)r.push(t[s])}return r}function m(t,e,i,n,r){r=r||0;var s=e[1]-t[1],o=t[0]-e[0],a=s*t[0]+o*t[1],h=n[1]-i[1],l=i[0]-n[0],u=h*i[0]+l*i[1],c=s*l-h*o;return y(c,0,r)?[0,0]:[(l*a-o*u)/c,(s*u-h*a)/c]}function y(t,e,i){return i=i||0,Math.abs(t-e)<i}e.exports={decomp:function(t){var e=function t(e){for(var i=[],n=[],r=[],s=[],o=Number.MAX_VALUE,a=0;a<e.length;++a)if(f(e,a))for(var h=0;h<e.length;++h)if(g(e,a,h)){n=t(v(e,a,h,s)),r=t(v(e,h,a,s));for(var l=0;l<r.length;l++)n.push(r[l]);n.length<o&&(i=n,o=n.length,i.push([d(e,a),d(e,h)]))}return i}(t);return e.length>0?function t(e,i){if(0===i.length)return[e];if(i instanceof Array&&i.length&&i[0]instanceof Array&&2===i[0].length&&i[0][0]instanceof Array){for(var n=[e],r=0;r<i.length;r++)for(var s=i[r],o=0;o<n.length;o++){var a=n[o],h=t(a,s);if(h){n.splice(o,1),n.push(h[0],h[1]);break}}return n}var s=i,r=e.indexOf(s[0]),o=e.indexOf(s[1]);return-1!==r&&-1!==o&&[v(e,r,o),v(e,o,r)]}(t,e):[t]},quickDecomp:function t(e,i,n,r,s,u,g){u=u||100,g=g||0,s=s||25,i=void 0!==i?i:[],n=n||[],r=r||[];var v=[0,0],y=[0,0],_=[0,0],b=0,w=0,x=0,T=0,E=0,S=0,A=0,P=[],M=[],C=e,I=e;if(I.length<3)return i;if(++g>u)return console.warn("quickDecomp: max level ("+u+") reached."),i;for(var O=0;O<e.length;++O)if(f(C,O)){n.push(C[O]),b=w=Number.MAX_VALUE;for(var R=0;R<e.length;++R)o(d(C,O-1),d(C,O),d(C,R))&&l(d(C,O-1),d(C,O),d(C,R-1))&&(_=m(d(C,O-1),d(C,O),d(C,R),d(C,R-1)),h(d(C,O+1),d(C,O),_)&&w>(x=c(C[O],_))&&(w=x,y=_,S=R)),o(d(C,O+1),d(C,O),d(C,R+1))&&l(d(C,O+1),d(C,O),d(C,R))&&(_=m(d(C,O+1),d(C,O),d(C,R),d(C,R+1)),o(d(C,O-1),d(C,O),_)&&b>(x=c(C[O],_))&&(b=x,v=_,E=R));if(S===(E+1)%e.length)_[0]=(y[0]+v[0])/2,_[1]=(y[1]+v[1])/2,r.push(_),E>O?(p(P,C,O,E+1),P.push(_),M.push(_),0!==S&&p(M,C,S,C.length),p(M,C,0,O+1)):(0!==O&&p(P,C,O,C.length),p(P,C,0,E+1),P.push(_),M.push(_),p(M,C,S,O+1));else{if(S>E&&(E+=e.length),T=Number.MAX_VALUE,S>E)return i;for(R=S;E>=R;++R)a(d(C,O-1),d(C,O),d(C,R))&&l(d(C,O+1),d(C,O),d(C,R))&&T>(x=c(d(C,O),d(C,R)))&&(T=x,A=R%e.length);A>O?(p(P,C,O,A+1),0!==A&&p(M,C,A,I.length),p(M,C,0,O+1)):(0!==O&&p(P,C,O,I.length),p(P,C,0,A+1),p(M,C,A,O+1))}return P.length<M.length?(t(P,i,n,r,s,u,g),t(M,i,n,r,s,u,g)):(t(M,i,n,r,s,u,g),t(P,i,n,r,s,u,g)),i}return i.push(e),i},isSimple:function(t){var e,i=t;for(e=0;e<i.length-1;e++)for(var n=0;e-1>n;n++)if(r(i[e],i[e+1],i[n],i[n+1]))return!1;for(e=1;e<i.length-2;e++)if(r(i[0],i[i.length-1],i[e],i[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var i=0,n=t.length-1;t.length>3&&n>=0;--n)u(d(t,n-1),d(t,n),d(t,n+1),e)&&(t.splice(n%t.length,1),i++);return i},makeCCW:function(t){for(var e=0,i=t,n=1;n<t.length;++n)(i[n][1]<i[e][1]||i[n][1]===i[e][1]&&i[n][0]>i[e][0])&&(e=n);o(d(t,e-1),d(t,e),d(t,e+1))||function(t){for(var e=[],i=t.length,n=0;n!==i;n++)e.push(t.pop());for(var n=0;n!==i;n++)t[n]=e[n]}(t)}};var _=[],b=[],w=[],x=[]},{}]},{},[1])(1)}),function(){"use strict";var t;!function(t){var e=include("PIXI.extras.BitmapText",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.align){case"center":this.pivot.x=this.textWidth/2;break;case"right":this.pivot.x=this.textWidth;break;default:this.pivot.x=0}}}}(),function(t){var e=include("PIXI.Container",!1);if(e){var i=e.prototype;i.useBoundsForSize=!0,i._width=0,i._height=0,Object.getOwnPropertyDescriptor(i,"width").configurable&&(Object.defineProperty(i,"width",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.x*this.getLocalBounds().width:this.scale.x*this._width},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}else 0===this._width?this._width=t/this.scale.x:this.scale.x=t/this._width}}),Object.defineProperty(i,"height",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.y*this.getLocalBounds().height:this.scale.y*this._height},set:function(t){if(this.useBoundsForSize){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}else 0===this._height?this._height=t/this.scale.y:this.scale.y=t/this._height}}))}}(),(t=include("PIXI.interaction.InteractionManager",!1))&&(t.prototype.removeClickEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0))}),function(t){var e=include("PIXI.Point",!1);if(e){var i=e.prototype;i.dotProd=function(t){return this.x*t.x+this.y*t.y},i.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},i.lengthSq=function(){return this.x*this.x+this.y*this.y},i.normalize=function(){var t=1/this.length();this.x*=t,this.y*=t},i.subtract=function(t){this.x-=t.x,this.y-=t.y},i.add=function(t){this.x+=t.x,this.y+=t.y},i.truncate=function(t){var e=this.length();if(e>t){var i=t/e;this.x*=i,this.y*=i}},i.scaleBy=function(t){this.x*=t,this.y*=t},i.distance=function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},i.distanceSq=function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},e.localToGlobal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toGlobal(n,n)},e.globalToLocal=function(t,e,i,n){return n||(n=new PIXI.Point),n.x=e,n.y=i,t.toLocal(n,null,n)},e.localToLocal=function(t,e,i,n,r){return r||(r=new PIXI.Point),r.x=i,r.y=n,e.toLocal(r,t,r)},i.toString=function(){return"("+this.x+", "+this.y+")"}}}(),function(t){var e=180/Math.PI,i=function(t,e,i,n,r){for(this.x=t||0,this.y=e||0,this.radius=i||0,this.startAngle=n||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=r||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},n=i.prototype;n.clone=function(){return new PIXI.Sector(this.x,this.y,this.radius,this.startAngle,this.endAngle)},n.contains=function(t,i){if(this.radius<=0)return!1;var n=this.x-t,r=this.y-i,s=this.radius*this.radius;if((n*=n)+(r*=r)>s)return!1;for(var o=Math.atan2(i-this.y,t-this.x)*e;o<this.startAngle;)o+=360;return o>=this.startAngle&&o<=this.endAngle},n.constructor=i,namespace("PIXI").Sector=i}(),function(t){var e=include("PIXI.Text",!1);if(e){var i=e.prototype;i.setPivotToAlign=!1,i._orig_updateText=i.updateText,i.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.style.align){case"center":this.pivot.x=this._width/2;break;case"right":this.pivot.x=this._width;break;default:this.pivot.x=0}}}}(),function(){var t,e=include("springroll.ColorAlphaTask"),i=include("springroll.Task"),n=include("PIXI.Texture"),r=include("PIXI.BaseTexture"),s=include("PIXI.utils"),o=include("springroll.Application"),a=function(e,n){t||(t=include("springroll.pixi.PixiDisplay")),i.call(this,e,n||e.image),this.image=this.filter(e.image),this.color=this.filter(e.color),this.alpha=this.filter(e.alpha),this.uploadToGPU=!!e.uploadToGPU},h=i.extend(a);a.test=function(t){return"pixi"==t.type&&(!!t.image||!!t.alpha&&!!t.color)},h.start=function(t){this.loadImage({},t)},h.loadImage=function(i,a,h){this.image?i._image=this.image:(i._color=this.color,i._alpha=this.alpha),this.load(i,function(i){var l;l=i._image?i._image:e.mergeAlpha(i._color,i._alpha);var u=this.original.scale;u&&1!==u||(u=s.getResolutionOfUrl(this.image||this.color));var c=new n(new r(l,null,u));if(c.baseTexture.imageUrl=this.image,this.cache&&!h){var d=this.id;s.useFilenamesForTextures||(d=this.image||this.color),s.TextureCache[d]=c,s.BaseTextureCache[d]=c.baseTexture,c.__T_destroy=c.destroy,c.destroy=function(){this.__destroyed||(this.__destroyed=!0,this.__T_destroy(!0),s.TextureCache[d]==this&&delete s.TextureCache[d])}}if(this.uploadToGPU){var p=o.instance.displays;for(var f in p){var g=p[f];if(g instanceof t&&g.isWebGL){g.renderer.updateTexture(c);break}}}a(c,i)}.bind(this))},h.destroy=function(){i.prototype.destroy.call(this)},namespace("springroll.pixi").TextureTask=a}(),function(t){var e=include("PIXI.Rectangle"),i=include("PIXI.Texture"),n=include("PIXI.utils"),r=function(t,r,s){this.baseTexture=t.baseTexture,this.texture=t,this.frames={};var o=r.meta&&"http://www.codeandweb.com/texturepacker"==r.meta.app,a=r.frames;for(var h in a){var l=a[h],u=h.lastIndexOf(".");u>0&&(h=h.substring(0,u)),(u=h.lastIndexOf("/"))>=0&&(h=h.substring(u+1));var c=l.frame;if(c){var d=null,p=null;d=l.rotated&&o?new e(c.x,c.y,c.h,c.w):new e(c.x,c.y,c.w,c.h),l.trimmed&&(p=new e(l.spriteSourceSize.x,l.spriteSourceSize.y,l.sourceSize.w,l.sourceSize.h)),this.frames[h]=new i(this.baseTexture,d,d.clone(),p,l.rotated),s&&(n.TextureCache[h]=this.frames[h])}}},s=extend(r);s.getFrame=function(t){return this.frames[t]||null},s.getFrames=function(t,e,i,n,r){void 0===n&&(n=4),n<0&&(n=0),r||(r=[]);var s,o,a=[],h=[];for(s=1;s<n;++s){var l="";o=1;for(var u=0;u<s;++u)l+="0",o*=10;a.unshift(l),h.push(o)}var c,d,p=h.length;for(s=e,d=i;s<=d;++s){var f=null;for(o=0;o<p;++o)if(s<h[o]){f=a[o]+s;break}f||(f=s.toString());var g=t.replace("#",f),v=this.frames[g];v&&(c=v),c&&r.push(c)}return r},s.destroy=function(){this.texture.destroy(!0),this.texture=null,this.baseTexture=null,this.frames=null},namespace("springroll.pixi").TextureAtlas=r}(),function(){var t=include("springroll.pixi.TextureTask"),e=(include("PIXI.Texture"),include("springroll.pixi.TextureAtlas")),i=(include("PIXI.utils"),function(e,i){t.call(this,e,i||e.atlas),this.atlas=this.filter(e.atlas)}),n=t.extend(i);i.test=function(e){return!!e.atlas&&t.test(e)},n.start=function(t){this.loadAtlas({},t)},n.loadAtlas=function(t,i,n){t._atlas=this.atlas,this.loadImage(t,function(t,r){var s=r._atlas,o=new e(t,s,this.cache&&!n);s.meta&&s.meta.scale&&1!=parseFloat(s.meta.scale)&&(t.baseTexture.resolution=parseFloat(r._atlas.meta.scale),t.baseTexture.update()),i(o,r)}.bind(this),!0)},namespace("springroll.pixi").TextureAtlasTask=i}(),function(){var t=include("springroll.pixi.TextureTask"),e=include("PIXI.Texture"),i=include("PIXI.Rectangle"),n=include("PIXI.extras.BitmapText",!1);if(include("PIXI.utils"),n){var r=function(e){t.call(this,e,e.font),this.font=this.filter(e.font)},s=t.extend(r);r.test=function(e){return!!e.font&&t.test(e)},s.start=function(t){this.loadImage({_font:this.font},function(r,s){var o=s._font,a={},h=o.getElementsByTagName("info")[0],l=o.getElementsByTagName("common")[0];a.font=h.getAttribute("face"),a.size=parseInt(h.getAttribute("size"),10),a.lineHeight=parseInt(l.getAttribute("lineHeight"),10),a.chars={};var u,c=o.getElementsByTagName("char");for(u=0;u<c.length;u++){var d=c[u],p=parseInt(d.getAttribute("id"),10),f=new i(parseInt(d.getAttribute("x"),10)+r.frame.x,parseInt(d.getAttribute("y"),10)+r.frame.y,parseInt(d.getAttribute("width"),10),parseInt(d.getAttribute("height"),10));a.chars[p]={xOffset:parseInt(d.getAttribute("xoffset"),10),yOffset:parseInt(d.getAttribute("yoffset"),10),xAdvance:parseInt(d.getAttribute("xadvance"),10),kerning:{},texture:new e(r.baseTexture,f)}}var g=o.getElementsByTagName("kerning");for(u=0;u<g.length;u++){var v=g[u],m=parseInt(v.getAttribute("first"),10),y=parseInt(v.getAttribute("second"),10),_=parseInt(v.getAttribute("amount"),10);a.chars[y].kerning[m]=_}this.cache&&n.fonts&&(n.fonts[a.font]=a),a.destroy=function(){a.chars=null,r.destroy()},t(a,s)}.bind(this),!0)},namespace("springroll.pixi").BitmapFontTask=r}}(),(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.TextureTask",60),this.assetManager.register("springroll.pixi.TextureAtlasTask",70),this.assetManager.register("springroll.pixi.BitmapFontTask",80),this.once("displayAdded",function(t){var e=this.options;!e.defaultAssetType&&t instanceof include("springroll.PixiDisplay")&&(e.defaultAssetType="pixi")})},function(t){var e={};e.Circle=include("PIXI.Circle"),e.Ellipse=include("PIXI.Ellipse"),e.Rectangle=include("PIXI.Rectangle"),e.Sector=include("PIXI.Sector"),e.Point=include("PIXI.Point"),e.Polygon=include("PIXI.Polygon"),e.useRadians=!0,e.getLocalBounds=function(t){var e,i=t.width,n=t.height;return(e=i&&n?new PIXI.Rectangle(-t.pivot.x,-t.pivot.y,i/t.scale.x,n/t.scale.y):new PIXI.Rectangle).right=e.x+e.width,e.bottom=e.y+e.height,e},e.getScale=function(e,i){return i!==t?e.scale[i]:e.scale},e.setPosition=function(e,i,n){return n!==t?e.position[n]=i:(i.x!==t&&(e.position.x=i.x),i.y!==t&&(e.position.y=i.y)),e},e.getPosition=function(e,i){return i!==t?e.position[i]:e.position},e.setScale=function(e,i,n){return n!==t?e.scale[n]=i:e.scale.x=e.scale.y=i,e},e.setPivot=function(e,i,n){return n!==t&&(e.pivot[n]=i),e.pivot=i,e},e.setHitArea=function(t,e){return t.hitArea=e,t},e.getBitmapSize=function(t){return{h:t.height/t.scale.y,w:t.width/t.scale.x}},e.removeChildren=function(t){t.removeChildren()},e.contains=function(t,e){for(;e;){if(e==t)return!0;e=e.parent}return!1},namespace("springroll.pixi").DisplayAdapter=e}(),function(t){var e=include("springroll.AbstractDisplay"),i=include("PIXI.Container"),n=include("PIXI.CanvasRenderer"),r=include("PIXI.WebGLRenderer"),s=include("PIXI.autoDetectRenderer"),o=function(t,o){e.call(this,t,o),o=o||{},this.keepMouseover=o.keepMouseover||!1,this._autoPreventDefault=!o.hasOwnProperty("autoPreventDefault")||o.autoPreventDefault,this.stage=new i,this.renderer=null;var a={view:this.canvas,transparent:!!o.transparent,antialias:!!o.antiAlias,preserveDrawingBuffer:!!o.preserveDrawingBuffer,clearBeforeRender:!!o.clearView,backgroundColor:o.backgroundColor||0,autoResize:!1},h=!!o.preMultAlpha;a.transparent&&!h&&(a.transparent="notMultiplied"),"webgl"!=o.forceContext&&window.navigator.userAgent.indexOf("Trident/7.0")>0&&(o.forceContext="canvas2d"),"canvas2d"==o.forceContext?this.renderer=new n(this.width,this.height,a):"webgl"==o.forceContext?this.renderer=new r(this.width,this.height,a):this.renderer=s(this.width,this.height,a),this.isWebGL=this.renderer instanceof r,this.adapter=include("springroll.pixi.DisplayAdapter"),this.autoPreventDefault=this._autoPreventDefault},a=e.prototype,h=e.extend(o);Object.defineProperty(h,"enabled",{get:function(){return this._enabled},set:function(t){Object.getOwnPropertyDescriptor(a,"enabled").set.call(this,t);var e=this.renderer.plugins.interaction;e&&(t?e.setTargetElement(this.canvas):this.keepMouseover?e.removeClickEvents():e.removeEvents())}}),Object.defineProperty(h,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(t){this._autoPreventDefault=!!t;var e=this.renderer.plugins.interaction;e&&(e.autoPreventDefault=this._autoPreventDefault)}}),h.resize=function(t,e){a.resize.call(this,t,e),this.renderer.resize(t,e)},h.render=function(t,e){(e||!this.paused&&this._visible)&&this.renderer.render(this.stage)},h.destroy=function(){this.stage.destroy(),a.destroy.call(this),this.renderer.destroy(),this.renderer=null},namespace("springroll").PixiDisplay=o,namespace("springroll.pixi").PixiDisplay=o}(),function(){function t(t){r+=t,e.update(r)}var e=include("PIXI.ticker.shared",!1),i=include("springroll.ApplicationPlugin");if(e){var n=new i,r=0;e.autoStart=!1,e.stop(),n.setup=function(){this.on("update",t,300)}}}(),function(t){var e=include("springroll.pixi.PixiDisplay"),i=include("springroll.Application");t.defineProperty(e.prototype,"animator",{get:function(){return i.instance.animator}})}(Object)}(),function(){"use strict";(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.SpineAtlasTask",40),this.assetManager.register("springroll.pixi.SpineAnimTask",40),this.animator.register("springroll.pixi.SpineInstance",10)},namespace("springroll.pixi").ParallelSpineData=function(t,e,i){this.anim=t,this.loop=!!e,this.speed=i>0?i:1},function(t){var e=(include("springroll.Application"),include("springroll.AnimatorInstance")),i=include("PIXI.spine.Spine",!1),n=include("springroll.pixi.ParallelSpineData");if(i){var r=function(){e.call(this),this.prevPosition=0},s=e.extend(r);s.init=function(t){t.autoUpdate=!1,this.clip=t,this.isLooping=!1,this.currentName=null,this.position=this.duration=0},s.beginAnim=function(t,e){var i=this.clip.state;i.clearTracks();var r=this.clip.stateData.skeletonData;this.isLooping=!!t.loop;var s,o=this.currentName=t.anim;if("string"==typeof o)this.duration=r.findAnimation(o).duration,i.setAnimationByName(0,o,this.isLooping);else if(o[0]instanceof n){this.duration=0;var a,h=0,l=0;for(s=0;s<o.length;++s){var u=o[s].loop;i.setAnimationByName(s,o[s].anim,u),a=r.findAnimation(o[s].anim).duration,u?a>l&&(l=a):a>h&&(h=a)}this.duration=h||l}else if(this.duration=r.findAnimation(o[0]).duration,1==o.length)i.setAnimationByName(0,o[0],this.isLooping);else for(i.setAnimationByName(0,o[0],!1),s=1;s<o.length;++s)i.addAnimationByName(0,o[s],this.isLooping&&s==o.length-1),this.duration+=r.findAnimation(o[s]).duration;if(e)this.position=0;else{var c=t.start||0;this.position=c<0?Math.random()*this.duration:c}this.clip.update(this.position)},s.endAnim=function(){this.clip.update(this.duration-this.position)},s.setPosition=function(t){t<this.position?this.clip.update(this.duration-this.position+t):this.clip.update(t-this.position),this.position=t},r.test=function(t){return t instanceof i},r.hasAnimation=function(t,e){var i,r=t.stateData.skeletonData;if("string"==typeof e)return!!r.findAnimation(e);if(Array.isArray(e)){if(e[0]instanceof n){for(i=0;i<e.length;++i)if(!r.findAnimation(e[i].anim))return!1}else for(i=0;i<e.length;++i)if(!r.findAnimation(e[i]))return!1;return!0}return!1},r.getDuration=function(t,e){var i,r=this.clip.stateData.skeletonData;if("string"==typeof anim)return r.findAnimation(anim).duration;if(Array.isArray(anim)){var s=0;if(anim[0]instanceof n){var o,a=0,h=0;for(i=0;i<anim.length;++i){var l=anim[i].loop;o=r.findAnimation(anim[i].anim).duration,l?o>h&&(h=o):o>a&&(a=o)}s=a||h}else if(s=r.findAnimation(anim[0]).duration,anim.length>1)for(i=1;i<anim.length;++i)s+=r.findAnimation(anim[i]).duration;return s}return 0},s.destroy=function(){this.clip=null},namespace("springroll.pixi").SpineInstance=r}}(),function(t){var e=include("PIXI.spine.SpineRuntime.AtlasReader",!1),i=include("PIXI.spine.SpineRuntime.AtlasPage",!1),n=include("PIXI.spine.SpineRuntime.AtlasRegion",!1),r=include("PIXI.spine.SpineRuntime.Atlas",!1);if(e){var s=function(t,s){if(this.pages=[],this.regions=[],t){var o=new e(t),a=[];a.length=4;for(var h=null;;){var l=o.readLine();if(null===l)break;if((l=o.trim(l)).length)if(h){var u=new n;u.name=l,u.page=h,u.rotate="true"==o.readValue(),o.readTuple(a);var c=parseInt(a[0]),d=parseInt(a[1]);o.readTuple(a);var p=parseInt(a[0]),f=parseInt(a[1]);u.u=c/h.width,u.v=d/h.height,u.rotate?(u.u2=(c+f)/h.width,u.v2=(d+p)/h.height):(u.u2=(c+p)/h.width,u.v2=(d+f)/h.height),u.x=c,u.y=d,u.width=Math.abs(p),u.height=Math.abs(f),4==o.readTuple(a)&&(u.splits=[parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],4==o.readTuple(a)&&(u.pads=[parseInt(a[0]),parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],o.readTuple(a))),u.originalWidth=parseInt(a[0]),u.originalHeight=parseInt(a[1]),o.readTuple(a),u.offsetX=parseInt(a[0]),u.offsetY=parseInt(a[1]),u.index=parseInt(o.readValue()),this.regions.push(u)}else{(h=new i).name=l,2==o.readTuple(a)&&(h.width=parseInt(a[0]),h.height=parseInt(a[1]),o.readTuple(a)),h.format=r.Format[a[0]],o.readTuple(a),h.minFilter=r.TextureFilter[a[0]],h.magFilter=r.TextureFilter[a[1]];var g=o.readValue();h.uWrap=r.TextureWrap.clampToEdge,h.vWrap=r.TextureWrap.clampToEdge,"x"==g?h.uWrap=r.TextureWrap.repeat:"y"==g?h.vWrap=r.TextureWrap.repeat:"xy"==g&&(h.uWrap=h.vWrap=r.TextureWrap.repeat),h.rendererObject=s[l].baseTexture,this.pages.push(h)}else h=null}}},o=extend(s);o.findRegion=function(t){for(var e=this.regions,i=0,n=e.length;i<n;i++)if(e[i].name==t)return e[i];return null},o.dispose=function(){for(var t=this.pages,e=0,i=t.length;e<i;e++)t[e].rendererObject.destroy(!0)},o.updateUVs=function(t){for(var e=this.regions,i=0,n=e.length;i<n;i++){var r=e[i];r.page==t&&(r.u=r.x/t.width,r.v=r.y/t.height,r.rotate?(r.u2=(r.x+r.height)/t.width,r.v2=(r.y+r.width)/t.height):(r.u2=(r.x+r.width)/t.width,r.v2=(r.y+r.height)/t.height))}},o.addImage=function(t,e){var s=new i;s.name=t,s.width=e.width,s.height=e.height,s.format="RGBA8888",s.minFilter=s.magFilter="Nearest",s.uWrap=r.TextureWrap.clampToEdge,s.vWrap=r.TextureWrap.clampToEdge,s.rendererObject=e.baseTexture,this.pages.push(s);var o=new n;o.name=t,o.page=s,o.rotate=!1,o.u=o.v=0,o.u2=o.v2=1,o.x=o.y=0,o.originalWidth=o.width=s.width,o.originalHeight=o.height=s.height,o.offsetX=o.offsetY=0,o.index=-1,this.regions.push(o)},o.fromTextureAtlas=function(t,e){var s=new i;for(e in s.name=e,s.width=t.baseTexture.width,s.height=t.baseTexture.height,s.format="RGBA8888",s.minFilter=s.magFilter="Nearest",s.uWrap=r.TextureWrap.clampToEdge,s.vWrap=r.TextureWrap.clampToEdge,s.rendererObject=t.baseTexture,this.pages.push(s),t.frames){var o=t.frames[e],a=new n;a.name=e,a.page=s,a.rotate=o.rotate;var h=o.crop.x,l=o.crop.y,u=o.crop.width,c=o.crop.height;a.u=h/s.width,a.v=l/s.height,a.rotate?(a.u2=(h+c)/s.width,a.v2=(l+u)/s.height):(a.u2=(h+u)/s.width,a.v2=(l+c)/s.height),a.x=h,a.y=l,a.width=Math.abs(u),a.height=Math.abs(c),a.originalWidth=o.width,a.originalHeight=o.height,o.trim?(a.offsetX=o.trim.x,a.offsetY=o.trim.y):a.offsetX=a.offsetY=0,a.index=-1,this.regions.push(a)}},o.destroy=function(){this.dispose(),this.pages=this.regions=null},namespace("springroll.pixi").SpineAtlas=s}}(),function(){var t=include("springroll.pixi.TextureTask"),e=include("springroll.pixi.SpineAtlas",!1);if(include("PIXI.utils"),e){var i=function(e,i){t.call(this,e,i||e.spineAtlas),this.spineAtlas=this.filter(e.spineAtlas),this.images=e.images},n=t.extend(i);i.test=function(e){return!!e.spineAtlas&&Array.isArray(e.images)&&t.test(e.images[0])},n.start=function(t){this.load({_atlas:this.spineAtlas,_images:this.images},function(i){t(new e(i._atlas,i._images),i)})},namespace("springroll.pixi").SpineAtlasTask=i}}(),function(){var t=include("springroll.Task"),e=include("springroll.pixi.TextureAtlasTask"),i=include("PIXI.spine.loaders.atlasParser",!1),n=include("PIXI.spine.SpineRuntime.SkeletonJsonParser",!1),r=include("PIXI.spine.SpineRuntime.AtlasAttachmentParser",!1),s=include("springroll.pixi.SpineAtlasTask",!1),o=include("springroll.pixi.SpineAtlas",!1);if(i){var a=function(e){t.call(this,e,e.spineAnim),this.spineAnim=this.filter(e.spineAnim),this.atlas=e.atlas,this.extraImages=e.extraImages},h=t.extend(a);a.test=function(t){return!(!t.spineAnim||t.atlas&&!e.test(t.atlas)&&!s.test(t.atlas)||!t.atlas&&!t.extraImages)},h.start=function(t){var e={_anim:this.spineAnim};this.atlas&&(e._atlas=this.atlas),this.extraImages&&(e._images={assets:this.extraImages}),this.load(e,function(e){var s=e._atlas;if(s||(s=new o),!(s instanceof o)){var a=s;(s=new o).fromTextureAtlas(a)}if(e._images)for(var h in e._images)s.addImage(h,e._images[h]);var l=new n(new r(s)).readSkeletonData(e._anim),u={id:this.id,spineData:l,spineAtlas:s};i.enableCaching&&this.cache&&(i.AnimCache[this.id]=l),u.destroy=function(){delete i.AnimCache[this.id],this.spineAtlas.destroy(),this.spineData=this.spineAtlas=null},t(u,e)}.bind(this))},h.destroy=function(){t.prototype.destroy.call(this)},namespace("springroll.pixi").SpineAnimTask=a}}()}(),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pako=t()}}(function(){return function t(e,i,n){function r(o,a){if(!i[o]){if(!e[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){return r(e[o][1][t]||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(t,e,i){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;i.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var i=e.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])}}return t},i.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,i,n,r){if(e.subarray&&t.subarray)t.set(e.subarray(i,i+n),r);else for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){var e,i,n,r,s,o;for(n=0,e=0,i=t.length;e<i;e++)n+=t[e].length;for(o=new Uint8Array(n),r=0,e=0,i=t.length;e<i;e++)s=t[e],o.set(s,r),r+=s.length;return o}},s={arraySet:function(t,e,i,n,r){for(var s=0;s<n;s++)t[r+s]=e[i+s]},flattenChunks:function(t){return[].concat.apply([],t)}};i.setTyped=function(t){t?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,r)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,s))},i.setTyped(n)},{}],2:[function(t,e,i){"use strict";function n(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&s))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var i="",n=0;n<e;n++)i+=String.fromCharCode(t[n]);return i}var r=t("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var a=new r.Buf8(256),h=0;h<256;h++)a[h]=h>=252?6:h>=248?5:h>=240?4:h>=224?3:h>=192?2:1;a[254]=a[254]=1,i.string2buf=function(t){var e,i,n,s,o,a=t.length,h=0;for(s=0;s<a;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),h+=i<128?1:i<2048?2:i<65536?3:4;for(e=new r.Buf8(h),o=0,s=0;o<h;s++)55296==(64512&(i=t.charCodeAt(s)))&&s+1<a&&56320==(64512&(n=t.charCodeAt(s+1)))&&(i=65536+(i-55296<<10)+(n-56320),s++),i<128?e[o++]=i:i<2048?(e[o++]=192|i>>>6,e[o++]=128|63&i):i<65536?(e[o++]=224|i>>>12,e[o++]=128|i>>>6&63,e[o++]=128|63&i):(e[o++]=240|i>>>18,e[o++]=128|i>>>12&63,e[o++]=128|i>>>6&63,e[o++]=128|63&i);return e},i.buf2binstring=function(t){return n(t,t.length)},i.binstring2buf=function(t){for(var e=new r.Buf8(t.length),i=0,n=e.length;i<n;i++)e[i]=t.charCodeAt(i);return e},i.buf2string=function(t,e){var i,r,s,o,h=e||t.length,l=new Array(2*h);for(r=0,i=0;i<h;)if((s=t[i++])<128)l[r++]=s;else if((o=a[s])>4)l[r++]=65533,i+=o-1;else{for(s&=2===o?31:3===o?15:7;o>1&&i<h;)s=s<<6|63&t[i++],o--;o>1?l[r++]=65533:s<65536?l[r++]=s:(s-=65536,l[r++]=55296|s>>10&1023,l[r++]=56320|1023&s)}return n(l,r)},i.utf8border=function(t,e){var i;for((e=e||t.length)>t.length&&(e=t.length),i=e-1;i>=0&&128==(192&t[i]);)i--;return i<0?e:0===i?e:i+a[t[i]]>e?i:e}},{"./common":1}],3:[function(t,e,i){"use strict";e.exports=function(t,e,i,n){for(var r=65535&t|0,s=t>>>16&65535|0,o=0;0!==i;){i-=o=i>2e3?2e3:i;do{s=s+(r=r+e[n++]|0)|0}while(--o);r%=65521,s%=65521}return r|s<<16|0}},{}],4:[function(t,e,i){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(t,e,i){"use strict";var n=function(){for(var t,e=[],i=0;i<256;i++){t=i;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[i]=t}return e}();e.exports=function(t,e,i,r){var s=n,o=r+i;t^=-1;for(var a=r;a<o;a++)t=t>>>8^s[255&(t^e[a])];return-1^t}},{}],6:[function(t,e,i){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],7:[function(t,e,i){"use strict";e.exports=function(t,e){var i,n,r,s,o,a,h,l,u,c,d,p,f,g,v,m,y,_,b,w,x,T,E,S,A;i=t.state,n=t.next_in,S=t.input,r=n+(t.avail_in-5),s=t.next_out,A=t.output,o=s-(e-t.avail_out),a=s+(t.avail_out-257),h=i.dmax,l=i.wsize,u=i.whave,c=i.wnext,d=i.window,p=i.hold,f=i.bits,g=i.lencode,v=i.distcode,m=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;t:do{f<15&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),_=g[p&m];e:for(;;){if(p>>>=b=_>>>24,f-=b,0==(b=_>>>16&255))A[s++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=g[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){i.mode=12;break t}t.msg="invalid literal/length code",i.mode=30;break t}w=65535&_,(b&=15)&&(f<b&&(p+=S[n++]<<f,f+=8),w+=p&(1<<b)-1,p>>>=b,f-=b),f<15&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),_=v[p&y];i:for(;;){if(p>>>=b=_>>>24,f-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=v[(65535&_)+(p&(1<<b)-1)];continue i}t.msg="invalid distance code",i.mode=30;break t}if(x=65535&_,f<(b&=15)&&(p+=S[n++]<<f,(f+=8)<b&&(p+=S[n++]<<f,f+=8)),(x+=p&(1<<b)-1)>h){t.msg="invalid distance too far back",i.mode=30;break t}if(p>>>=b,f-=b,x>(b=s-o)){if((b=x-b)>u&&i.sane){t.msg="invalid distance too far back",i.mode=30;break t}if(T=0,E=d,0===c){if(T+=l-b,b<w){w-=b;do{A[s++]=d[T++]}while(--b);T=s-x,E=A}}else if(c<b){if(T+=l+c-b,(b-=c)<w){w-=b;do{A[s++]=d[T++]}while(--b);if(T=0,c<w){w-=b=c;do{A[s++]=d[T++]}while(--b);T=s-x,E=A}}}else if(T+=c-b,b<w){w-=b;do{A[s++]=d[T++]}while(--b);T=s-x,E=A}for(;w>2;)A[s++]=E[T++],A[s++]=E[T++],A[s++]=E[T++],w-=3;w&&(A[s++]=E[T++],w>1&&(A[s++]=E[T++]))}else{T=s-x;do{A[s++]=A[T++],A[s++]=A[T++],A[s++]=A[T++],w-=3}while(w>2);w&&(A[s++]=A[T++],w>1&&(A[s++]=A[T++]))}break}}break}}while(n<r&&s<a);n-=w=f>>3,p&=(1<<(f-=w<<3))-1,t.next_in=n,t.next_out=s,t.avail_in=n<r?r-n+5:5-(n-r),t.avail_out=s<a?a-s+257:257-(s-a),i.hold=p,i.bits=f}},{}],8:[function(t,e,i){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function r(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=O,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new d.Buf32(lt),e.distcode=e.distdyn=new d.Buf32(ut),e.sane=1,e.back=-1,T):A}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,r(t)):A}function o(t,e){var i,n;return t&&t.state?(n=t.state,e<0?(i=0,e=-e):(i=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?A:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=i,n.wbits=e,s(t))):A}function a(t,e){var i,n;return t?(n=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},t.state=n,n.window=null,(i=o(t,e))!==T&&(t.state=null),i):A}function h(t){if(dt){var e;for(u=new d.Buf32(512),c=new d.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(v(y,t.lens,0,288,u,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;v(_,t.lens,0,32,c,0,t.work,{bits:5}),dt=!1}t.lencode=u,t.lenbits=9,t.distcode=c,t.distbits=5}function l(t,e,i,n){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new d.Buf8(s.wsize)),n>=s.wsize?(d.arraySet(s.window,e,i-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>n&&(r=n),d.arraySet(s.window,e,i-n,r,s.wnext),(n-=r)?(d.arraySet(s.window,e,i-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}var u,c,d=t("../utils/common"),p=t("./adler32"),f=t("./crc32"),g=t("./inffast"),v=t("./inftrees"),m=0,y=1,_=2,b=4,w=5,x=6,T=0,E=1,S=2,A=-2,P=-3,M=-4,C=-5,I=8,O=1,R=2,L=3,D=4,k=5,j=6,N=7,B=8,U=9,F=10,X=11,V=12,H=13,W=14,Y=15,G=16,z=17,q=18,Z=19,J=20,K=21,Q=22,$=23,tt=24,et=25,it=26,nt=27,rt=28,st=29,ot=30,at=31,ht=32,lt=852,ut=592,ct=15,dt=!0;i.inflateReset=s,i.inflateReset2=o,i.inflateResetKeep=r,i.inflateInit=function(t){return a(t,ct)},i.inflateInit2=a,i.inflate=function(t,e){var i,r,s,o,a,u,c,lt,ut,ct,dt,pt,ft,gt,vt,mt,yt,_t,bt,wt,xt,Tt,Et,St,At=0,Pt=new d.Buf8(4),Mt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return A;(i=t.state).mode===V&&(i.mode=H),a=t.next_out,s=t.output,c=t.avail_out,o=t.next_in,r=t.input,u=t.avail_in,lt=i.hold,ut=i.bits,ct=u,dt=c,Tt=T;t:for(;;)switch(i.mode){case O:if(0===i.wrap){i.mode=H;break}for(;ut<16;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(2&i.wrap&&35615===lt){i.check=0,Pt[0]=255&lt,Pt[1]=lt>>>8&255,i.check=f(i.check,Pt,2,0),lt=0,ut=0,i.mode=R;break}if(i.flags=0,i.head&&(i.head.done=!1),!(1&i.wrap)||(((255&lt)<<8)+(lt>>8))%31){t.msg="incorrect header check",i.mode=ot;break}if((15&lt)!==I){t.msg="unknown compression method",i.mode=ot;break}if(ut-=4,xt=8+(15&(lt>>>=4)),0===i.wbits)i.wbits=xt;else if(xt>i.wbits){t.msg="invalid window size",i.mode=ot;break}i.dmax=1<<xt,t.adler=i.check=1,i.mode=512&lt?F:V,lt=0,ut=0;break;case R:for(;ut<16;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(i.flags=lt,(255&i.flags)!==I){t.msg="unknown compression method",i.mode=ot;break}if(57344&i.flags){t.msg="unknown header flags set",i.mode=ot;break}i.head&&(i.head.text=lt>>8&1),512&i.flags&&(Pt[0]=255&lt,Pt[1]=lt>>>8&255,i.check=f(i.check,Pt,2,0)),lt=0,ut=0,i.mode=L;case L:for(;ut<32;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.head&&(i.head.time=lt),512&i.flags&&(Pt[0]=255&lt,Pt[1]=lt>>>8&255,Pt[2]=lt>>>16&255,Pt[3]=lt>>>24&255,i.check=f(i.check,Pt,4,0)),lt=0,ut=0,i.mode=D;case D:for(;ut<16;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.head&&(i.head.xflags=255&lt,i.head.os=lt>>8),512&i.flags&&(Pt[0]=255&lt,Pt[1]=lt>>>8&255,i.check=f(i.check,Pt,2,0)),lt=0,ut=0,i.mode=k;case k:if(1024&i.flags){for(;ut<16;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.length=lt,i.head&&(i.head.extra_len=lt),512&i.flags&&(Pt[0]=255&lt,Pt[1]=lt>>>8&255,i.check=f(i.check,Pt,2,0)),lt=0,ut=0}else i.head&&(i.head.extra=null);i.mode=j;case j:if(1024&i.flags&&((pt=i.length)>u&&(pt=u),pt&&(i.head&&(xt=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Array(i.head.extra_len)),d.arraySet(i.head.extra,r,o,pt,xt)),512&i.flags&&(i.check=f(i.check,r,pt,o)),u-=pt,o+=pt,i.length-=pt),i.length))break t;i.length=0,i.mode=N;case N:if(2048&i.flags){if(0===u)break t;pt=0;do{xt=r[o+pt++],i.head&&xt&&i.length<65536&&(i.head.name+=String.fromCharCode(xt))}while(xt&&pt<u);if(512&i.flags&&(i.check=f(i.check,r,pt,o)),u-=pt,o+=pt,xt)break t}else i.head&&(i.head.name=null);i.length=0,i.mode=B;case B:if(4096&i.flags){if(0===u)break t;pt=0;do{xt=r[o+pt++],i.head&&xt&&i.length<65536&&(i.head.comment+=String.fromCharCode(xt))}while(xt&&pt<u);if(512&i.flags&&(i.check=f(i.check,r,pt,o)),u-=pt,o+=pt,xt)break t}else i.head&&(i.head.comment=null);i.mode=U;case U:if(512&i.flags){for(;ut<16;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(lt!==(65535&i.check)){t.msg="header crc mismatch",i.mode=ot;break}lt=0,ut=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),t.adler=i.check=0,i.mode=V;break;case F:for(;ut<32;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}t.adler=i.check=n(lt),lt=0,ut=0,i.mode=X;case X:if(0===i.havedict)return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=u,i.hold=lt,i.bits=ut,S;t.adler=i.check=1,i.mode=V;case V:if(e===w||e===x)break t;case H:if(i.last){lt>>>=7&ut,ut-=7&ut,i.mode=nt;break}for(;ut<3;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}switch(i.last=1&lt,ut-=1,3&(lt>>>=1)){case 0:i.mode=W;break;case 1:if(h(i),i.mode=J,e===x){lt>>>=2,ut-=2;break t}break;case 2:i.mode=z;break;case 3:t.msg="invalid block type",i.mode=ot}lt>>>=2,ut-=2;break;case W:for(lt>>>=7&ut,ut-=7&ut;ut<32;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if((65535&lt)!=(lt>>>16^65535)){t.msg="invalid stored block lengths",i.mode=ot;break}if(i.length=65535&lt,lt=0,ut=0,i.mode=Y,e===x)break t;case Y:i.mode=G;case G:if(pt=i.length){if(pt>u&&(pt=u),pt>c&&(pt=c),0===pt)break t;d.arraySet(s,r,o,pt,a),u-=pt,o+=pt,c-=pt,a+=pt,i.length-=pt;break}i.mode=V;break;case z:for(;ut<14;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(i.nlen=257+(31&lt),lt>>>=5,ut-=5,i.ndist=1+(31&lt),lt>>>=5,ut-=5,i.ncode=4+(15&lt),lt>>>=4,ut-=4,i.nlen>286||i.ndist>30){t.msg="too many length or distance symbols",i.mode=ot;break}i.have=0,i.mode=q;case q:for(;i.have<i.ncode;){for(;ut<3;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.lens[Mt[i.have++]]=7&lt,lt>>>=3,ut-=3}for(;i.have<19;)i.lens[Mt[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Et={bits:i.lenbits},Tt=v(m,i.lens,0,19,i.lencode,0,i.work,Et),i.lenbits=Et.bits,Tt){t.msg="invalid code lengths set",i.mode=ot;break}i.have=0,i.mode=Z;case Z:for(;i.have<i.nlen+i.ndist;){for(;mt=(At=i.lencode[lt&(1<<i.lenbits)-1])>>>16&255,yt=65535&At,!((vt=At>>>24)<=ut);){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(yt<16)lt>>>=vt,ut-=vt,i.lens[i.have++]=yt;else{if(16===yt){for(St=vt+2;ut<St;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(lt>>>=vt,ut-=vt,0===i.have){t.msg="invalid bit length repeat",i.mode=ot;break}xt=i.lens[i.have-1],pt=3+(3&lt),lt>>>=2,ut-=2}else if(17===yt){for(St=vt+3;ut<St;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}ut-=vt,xt=0,pt=3+(7&(lt>>>=vt)),lt>>>=3,ut-=3}else{for(St=vt+7;ut<St;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}ut-=vt,xt=0,pt=11+(127&(lt>>>=vt)),lt>>>=7,ut-=7}if(i.have+pt>i.nlen+i.ndist){t.msg="invalid bit length repeat",i.mode=ot;break}for(;pt--;)i.lens[i.have++]=xt}}if(i.mode===ot)break;if(0===i.lens[256]){t.msg="invalid code -- missing end-of-block",i.mode=ot;break}if(i.lenbits=9,Et={bits:i.lenbits},Tt=v(y,i.lens,0,i.nlen,i.lencode,0,i.work,Et),i.lenbits=Et.bits,Tt){t.msg="invalid literal/lengths set",i.mode=ot;break}if(i.distbits=6,i.distcode=i.distdyn,Et={bits:i.distbits},Tt=v(_,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Et),i.distbits=Et.bits,Tt){t.msg="invalid distances set",i.mode=ot;break}if(i.mode=J,e===x)break t;case J:i.mode=K;case K:if(u>=6&&c>=258){t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=u,i.hold=lt,i.bits=ut,g(t,dt),a=t.next_out,s=t.output,c=t.avail_out,o=t.next_in,r=t.input,u=t.avail_in,lt=i.hold,ut=i.bits,i.mode===V&&(i.back=-1);break}for(i.back=0;mt=(At=i.lencode[lt&(1<<i.lenbits)-1])>>>16&255,yt=65535&At,!((vt=At>>>24)<=ut);){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(mt&&0==(240&mt)){for(_t=vt,bt=mt,wt=yt;mt=(At=i.lencode[wt+((lt&(1<<_t+bt)-1)>>_t)])>>>16&255,yt=65535&At,!(_t+(vt=At>>>24)<=ut);){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}lt>>>=_t,ut-=_t,i.back+=_t}if(lt>>>=vt,ut-=vt,i.back+=vt,i.length=yt,0===mt){i.mode=it;break}if(32&mt){i.back=-1,i.mode=V;break}if(64&mt){t.msg="invalid literal/length code",i.mode=ot;break}i.extra=15&mt,i.mode=Q;case Q:if(i.extra){for(St=i.extra;ut<St;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.length+=lt&(1<<i.extra)-1,lt>>>=i.extra,ut-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=$;case $:for(;mt=(At=i.distcode[lt&(1<<i.distbits)-1])>>>16&255,yt=65535&At,!((vt=At>>>24)<=ut);){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(0==(240&mt)){for(_t=vt,bt=mt,wt=yt;mt=(At=i.distcode[wt+((lt&(1<<_t+bt)-1)>>_t)])>>>16&255,yt=65535&At,!(_t+(vt=At>>>24)<=ut);){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}lt>>>=_t,ut-=_t,i.back+=_t}if(lt>>>=vt,ut-=vt,i.back+=vt,64&mt){t.msg="invalid distance code",i.mode=ot;break}i.offset=yt,i.extra=15&mt,i.mode=tt;case tt:if(i.extra){for(St=i.extra;ut<St;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}i.offset+=lt&(1<<i.extra)-1,lt>>>=i.extra,ut-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){t.msg="invalid distance too far back",i.mode=ot;break}i.mode=et;case et:if(0===c)break t;if(pt=dt-c,i.offset>pt){if((pt=i.offset-pt)>i.whave&&i.sane){t.msg="invalid distance too far back",i.mode=ot;break}pt>i.wnext?(pt-=i.wnext,ft=i.wsize-pt):ft=i.wnext-pt,pt>i.length&&(pt=i.length),gt=i.window}else gt=s,ft=a-i.offset,pt=i.length;pt>c&&(pt=c),c-=pt,i.length-=pt;do{s[a++]=gt[ft++]}while(--pt);0===i.length&&(i.mode=K);break;case it:if(0===c)break t;s[a++]=i.length,c--,i.mode=K;break;case nt:if(i.wrap){for(;ut<32;){if(0===u)break t;u--,lt|=r[o++]<<ut,ut+=8}if(dt-=c,t.total_out+=dt,i.total+=dt,dt&&(t.adler=i.check=i.flags?f(i.check,s,dt,a-dt):p(i.check,s,dt,a-dt)),dt=c,(i.flags?lt:n(lt))!==i.check){t.msg="incorrect data check",i.mode=ot;break}lt=0,ut=0}i.mode=rt;case rt:if(i.wrap&&i.flags){for(;ut<32;){if(0===u)break t;u--,lt+=r[o++]<<ut,ut+=8}if(lt!==(4294967295&i.total)){t.msg="incorrect length check",i.mode=ot;break}lt=0,ut=0}i.mode=st;case st:Tt=E;break t;case ot:Tt=P;break t;case at:return M;case ht:default:return A}return t.next_out=a,t.avail_out=c,t.next_in=o,t.avail_in=u,i.hold=lt,i.bits=ut,(i.wsize||dt!==t.avail_out&&i.mode<ot&&(i.mode<nt||e!==b))&&l(t,t.output,t.next_out,dt-t.avail_out)?(i.mode=at,M):(ct-=t.avail_in,dt-=t.avail_out,t.total_in+=ct,t.total_out+=dt,i.total+=dt,i.wrap&&dt&&(t.adler=i.check=i.flags?f(i.check,s,dt,t.next_out-dt):p(i.check,s,dt,t.next_out-dt)),t.data_type=i.bits+(i.last?64:0)+(i.mode===V?128:0)+(i.mode===J||i.mode===Y?256:0),(0===ct&&0===dt||e===b)&&Tt===T&&(Tt=C),Tt)},i.inflateEnd=function(t){if(!t||!t.state)return A;var e=t.state;return e.window&&(e.window=null),t.state=null,T},i.inflateGetHeader=function(t,e){var i;return t&&t.state?0==(2&(i=t.state).wrap)?A:(i.head=e,e.done=!1,T):A},i.inflateSetDictionary=function(t,e){var i,n=e.length;return t&&t.state?0!==(i=t.state).wrap&&i.mode!==X?A:i.mode===X&&p(1,e,n,0)!==i.check?P:l(t,e,n,n)?(i.mode=at,M):(i.havedict=1,T):A},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(t,e,i){"use strict";var n=t("../utils/common"),r=15,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,i,l,u,c,d,p){var f,g,v,m,y,_,b,w,x,T=p.bits,E=0,S=0,A=0,P=0,M=0,C=0,I=0,O=0,R=0,L=0,D=null,k=0,j=new n.Buf16(16),N=new n.Buf16(16),B=null,U=0;for(E=0;E<=r;E++)j[E]=0;for(S=0;S<l;S++)j[e[i+S]]++;for(M=T,P=r;P>=1&&0===j[P];P--);if(M>P&&(M=P),0===P)return u[c++]=20971520,u[c++]=20971520,p.bits=1,0;for(A=1;A<P&&0===j[A];A++);for(M<A&&(M=A),O=1,E=1;E<=r;E++)if(O<<=1,(O-=j[E])<0)return-1;if(O>0&&(0===t||1!==P))return-1;for(N[1]=0,E=1;E<r;E++)N[E+1]=N[E]+j[E];for(S=0;S<l;S++)0!==e[i+S]&&(d[N[e[i+S]]++]=S);if(0===t?(D=B=d,_=19):1===t?(D=s,k-=257,B=o,U-=257,_=256):(D=a,B=h,_=-1),L=0,S=0,E=A,y=c,C=M,I=0,v=-1,m=(R=1<<M)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){0,b=E-I,d[S]<_?(w=0,x=d[S]):d[S]>_?(w=B[U+d[S]],x=D[k+d[S]]):(w=96,x=0),f=1<<E-I,A=g=1<<C;do{u[y+(L>>I)+(g-=f)]=b<<24|w<<16|x|0}while(0!==g);for(f=1<<E-1;L&f;)f>>=1;if(0!==f?(L&=f-1,L+=f):L=0,S++,0==--j[E]){if(E===P)break;E=e[i+d[S]]}if(E>M&&(L&m)!==v){for(0===I&&(I=M),y+=A,O=1<<(C=E-I);C+I<P&&!((O-=j[C+I])<=0);)C++,O<<=1;if(R+=1<<C,1===t&&R>852||2===t&&R>592)return 1;u[v=L&m]=M<<24|C<<16|y-c|0}}return 0!==L&&(u[y+L]=E-I<<24|64<<16|0),p.bits=M,0}},{"../utils/common":1}],10:[function(t,e,i){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(t,e,i){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(t,e,i){"use strict";function n(t){if(!(this instanceof n))return new n(t);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var i=s.inflateInit2(this.strm,e.windowBits);if(i!==h.Z_OK)throw new Error(l[i]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function r(t,e){var i=new n(e);if(i.push(t,!0),i.err)throw i.msg;return i.result}var s=t("./zlib/inflate"),o=t("./utils/common"),a=t("./utils/strings"),h=t("./zlib/constants"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=t("./zlib/gzheader"),d=Object.prototype.toString;n.prototype.push=function(t,e){var i,n,r,l,u,c,p=this.strm,f=this.options.chunkSize,g=this.options.dictionary,v=!1;if(this.ended)return!1;n=e===~~e?e:!0===e?h.Z_FINISH:h.Z_NO_FLUSH,"string"==typeof t?p.input=a.binstring2buf(t):"[object ArrayBuffer]"===d.call(t)?p.input=new Uint8Array(t):p.input=t,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new o.Buf8(f),p.next_out=0,p.avail_out=f),(i=s.inflate(p,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&g&&(c="string"==typeof g?a.string2buf(g):"[object ArrayBuffer]"===d.call(g)?new Uint8Array(g):g,i=s.inflateSetDictionary(this.strm,c)),i===h.Z_BUF_ERROR&&!0===v&&(i=h.Z_OK,v=!1),i!==h.Z_STREAM_END&&i!==h.Z_OK)return this.onEnd(i),this.ended=!0,!1;p.next_out&&(0!==p.avail_out&&i!==h.Z_STREAM_END&&(0!==p.avail_in||n!==h.Z_FINISH&&n!==h.Z_SYNC_FLUSH)||("string"===this.options.to?(r=a.utf8border(p.output,p.next_out),l=p.next_out-r,u=a.buf2string(p.output,r),p.next_out=l,p.avail_out=f-l,l&&o.arraySet(p.output,p.output,r,l,0),this.onData(u)):this.onData(o.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(v=!0)}while((p.avail_in>0||0===p.avail_out)&&i!==h.Z_STREAM_END);return i===h.Z_STREAM_END&&(n=h.Z_FINISH),n===h.Z_FINISH?(i=s.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===h.Z_OK):n!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),p.avail_out=0,!0)},n.prototype.onData=function(t){this.chunks.push(t)},n.prototype.onEnd=function(t){t===h.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},i.Inflate=n,i.inflate=r,i.inflateRaw=function(t,e){return(e=e||{}).raw=!0,r(t,e)},i.ungzip=r},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),function(t,e,i){"use strict";var n={value:!1,writable:!0},r={},s=0;t.recycle={add:function(t,o,a,h){var l=t===i,u=[];return a&&r[a]&&console.warn('Recycle cache for "'+a+'" already exists.'),r[a||"cache-"+s++]=u,e.defineProperties(t,{setUp:{value:l?o?function(){var t=0,i=null;for(u.length?(i=u.pop()).recycled=!1:(i=[],e.defineProperty(i,"recycled",n)),t=0;t<arguments.length;t++)i.push(arguments[t]);return i}:function(){var t=0,e=null;for(e=u.length?u.pop():[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e}:o?function(){var t=null;return u.length?(t=u.pop()).recycled=!1:(t=e.create(this.prototype),e.defineProperty(t,"recycled",n)),this.apply(t,arguments),t}:function(){var t;return t=u.length?u.pop():e.create(this.prototype),this.apply(t,arguments),t}},recycle:{value:o?function(t){t.recycled?console.warn("WHOA! I have already been recycled!",t):(t.recycled=!0,u.push(t))}:function(t){u.push(t)}}}),e.defineProperty(t.prototype,"recycle",{value:h||(l?function(e){var i=0;if(e>1)for(i=this.length,e-=1;i--;)this[i].recycle(e);this.length=0,t.recycle(this)}:function(){t.recycle(this)})}),u},cache:r}}(window,Object,Array),this.platypus=this.platypus||{},function(t){"use strict";var e=function(){},i=navigator.userAgent.toLowerCase(),n=i.search("edge")>-1,r=i.search("ipod")>-1,s=i.search("iphone")>-1,o=i.search("ipad")>-1,a=i.search("android")>-1,h=i.search("silk")>-1,l=r||s||o,u=l||a||h;t.supports={touch:"undefined"!==window.ontouchstart,edge:n,iPod:r,iPhone:s,iPad:o,safari:i.search("safari")>-1&&!n,ie:i.search("msie")>-1||i.search("trident")>-1,firefox:i.search("firefox")>-1,android:a,chrome:i.search("chrome")>-1&&!n,silk:h,iOS:l,mobile:u,desktop:!u},t.debug=springroll.Debug||{error:e,log:e,olive:e,warn:e},t.version="1.0.1",t.buildDate="Tue, 16 Jun 2020 16:53:04 GMT"}(this.platypus),function(t,e){"use strict";var i=t.prototype;i.union||e.defineProperty(i,"union",{value:function(t){var e=0,i=t.length;for(e=0;e<i;e++)-1===this.indexOf(t[e])&&this.push(t[e]);return this}}),i.greenSlice||e.defineProperty(i,"greenSlice",{value:function(){var e=t.setUp(),i=0,n=this.length;for(i=0;i<n;i++)e[i]=this[i];return e}}),i.greenSplice||e.defineProperty(i,"greenSplice",{value:function(t){var e=0,i=this[t],n=this.length;if(t<0||t>=n)return null;for(e=t+1;e<n;e++)this[e-1]=this[e];return n&&(this.length-=1),i}}),recycle.add(t,!!springroll.Debug,"Array")}(Array,Object),function(){"use strict";var t=include("PIXI.Graphics").prototype;t.a=t.a||t.arc,t.at=t.at||t.arcTo,t.bt=t.bt||t.bezierCurveTo,t.c=t.c||t.clear,t.dc=t.dc||t.drawCircle,t.de=t.de||t.drawEllipse,t.dr=t.dr||t.drawRect,t.ef=t.ef||t.endFill,t.f=t.f||t.beginFill,t.lt=t.lt||t.lineTo,t.mt=t.mt||t.moveTo,t.qt=t.qt||t.quadraticCurveTo,t.r=t.r||t.drawRect,t.rr=t.rr||t.drawRoundedRect}(),function(t,e){"use strict";var i=t.prototype;i.greenSplit||e.defineProperty(i,"greenSplit",{value:function(t){var e=this.toString(),i=0,n=0,r=Array.setUp();if(t){for(n=e.indexOf(t),i=t.length;n>=0;)r.push(e.substr(0,n)),n=(e=e.substr(n+i)).indexOf(t);r.push(e)}else for(i=(n=this.length)-1;n--;)r.push(this[i-n]);return r}})}(String,Object),function(t){"use strict";var e=null,i=null,n=null;window.Map||(e={value:null},n=(i=function(){e.value={},t.defineProperty(this,"map",e)}).prototype,t.defineProperties(n,{get:{value:function(t){return this.map[t]}},has:{value:function(t){return this.map.hasOwnProperty(t)}},set:{value:function(t,e){return this.map[t]=e,this}},delete:{value:function(t){var e=this.map[t];return delete this.map[t],e}}}),window.Map=i)}(Object),platypus.Async=function(){"use strict";var t=function(t,e){var i=function(t){this.resolve=null,t(),this.recycle()}.bind(this,e),n=function(t){this.increment-=1,this.increment||(this.resolve=t,this.timeout=setTimeout(t,0))}.bind(this,i),r=t.length;if(r)for(this.increment=r,this.resolve=null;r--;)t[r](n);else i(),this.recycle()};return t.prototype.attemptResolution=function(){return!!this.resolve&&(clearTimeout(this.timeout),this.resolve(),!0)},recycle.add(t,!!springroll.Debug,"Async",function(){this.increment=0,this.resolve=null,this.timeout=0}),t}(),platypus.Data=function(){"use strict";var t=function(t){var e=arguments.length,i="";if(t)if("string"==typeof t)for(e%2&&(this[e]=null,e-=1);e;)this[arguments[e-2]]=arguments[e-1],e-=2;else for(i in t)t.hasOwnProperty(i)&&(this[i]=t[i])};return recycle.add(t,!!springroll.Debug,"Data",function(){var e="";for(e in this)this.hasOwnProperty(e)&&delete this[e];t.recycle(this)}),t}(),platypus.DataMap=function(){"use strict";var t=include("window.Map"),e={get:{value:null},has:{value:null},keys:{value:null},set:{value:null},delete:{value:null},clear:{value:null},toJSON:{value:null}},i=function(i){var n=arguments.length,r="",s=null,o=null,a=null;if(this.map||(a=e,o=this.map=new t,s=a.keys.value=Array.setUp(),a.get.value=o.get.bind(o),a.has.value=o.has.bind(o),a.set.value=function(t,e,i){return this.get(e)!==i&&(this.has(e)||t.push(e),this.set(e,i)),i}.bind(o,s),a.delete.value=function(t,e){var i=t.indexOf(e),n=this.get(e);return i>=0&&(t.greenSplice(i),this.delete(e)),n}.bind(o,s),a.clear.value=function(t){for(var e=t.length;e--;)this.delete(t[e]);t.length=0}.bind(o,s),a.toJSON.value=function(t){for(var e=t.length,i={};e--;)i[t[e]]=this.get(t[e]);return i}.bind(o,s),Object.defineProperties(this,a)),i)if(s=i.keys,"string"==typeof i)for(n%2&&(n-=1,this.set(arguments[n],null));n;)n-=2,this.set(arguments[n],arguments[n+1]);else if(s)for(n=s.length;n--;)this.set(s[n],i.get(s[n]));else for(r in i)i.hasOwnProperty(r)&&this.set(r,i[r])};return recycle.add(i,!!springroll.Debug,"DataMap",function(){this.clear(),i.recycle(this)}),i}(),function(){"use strict";var t=include("PIXI.BaseTexture"),e=include("PIXI.CanvasTinter"),i=include("platypus.Data"),n=include("PIXI.Point"),r=include("PIXI.Rectangle"),s=include("PIXI.Sprite"),o=include("PIXI.Texture"),a={},h={},l=function(){},u={texture:o.EMPTY,anchor:new n(0,0)},c=/[\[\]{},-]/g,d=function(e){var i=0,n=Array.setUp(),r=null,s=platypus.game.app.assetManager.cache,o=h,a=null;for(i=0;i<e.length;i++)if("string"==typeof(a=e[i])){if(!o[a]){if(!(r=s.read(a))){platypus.debug.warn('"'+a+'" is not a loaded asset.');break}o[a]=new t(r)}n.push(o[a])}else n.push(new t(a));return n},p=function(t,e){var n=Array.setUp(),r=0;for(r=0;r<t;r++)n.push(e[r]||u);return i.setUp("id","default","frames",n,"next","default","speed",1)},f=function(t,e){var n="",r=i.setUp(),s=0,o=null,a="";for(a in t)if(t.hasOwnProperty(a)){for(s=(o=(n=t[a]).frames.greenSlice()).length;s--;)o[s]=e[o[s]]||u;r[a]=i.setUp("id",a,"frames",o,"next",n.next,"speed",n.speed)}return r.default||(r.default=p(e.length,e)),r},g=function(t){var e=0,s=null,a=null,h=t.frames,l=t.images,u=null,c=Array.setUp(),g=d(l);for(e=0;e<h.length;e++)a=h[e],u=new o(g[a[4]],new r(a[0],a[1],a[2],a[3])),c.push({texture:u,anchor:new n((a[5]||0)/u.width,(a[6]||0)/u.height)});return(s=f(t.animations,c)).default||(s.default=p(c.length,c)),g.recycle(),i.setUp("textures",c,"animations",s)},v=function(t,e){var s,a=0,h=null,l=t.frames,u=t.images,c=null,p=Array.setUp(),g=d(u);for(a=0;a<l.length;a++)h=l[a],c=new o(g[h[4]],new r(h[0],h[1],h[2],h[3])),p.push({texture:c,anchor:new n((h[5]||0)/c.width,(h[6]||0)/c.height)});return s=f(t.animations,p),g.recycle(),i.setUp("textures",p,"animations",s,"viable",1,"cacheId",e)},m=function(t,e){var i=function(t){var e=0;if(t.id)return t.id;for(e=0;e<t.images.length;e++)if("string"!=typeof t.images[e])return"";return t.id=JSON.stringify(t).replace(c,""),t.id}(t),n=i?a[i]:null,r=(t.framerate||60)/60;i?n?(n.viable+=1,this.cacheId=i):(n=a[i]=v(t,i),this.cacheId=i):n=g(t),s.call(this,n.textures[0].texture),this._animations=n.animations,this._animation=null,this.animationSpeed=r,this.currentAnimation=null,this._currentTime=0,this.playing=!1,this._visible=!0,this._updating=!1,this.update=l,n.textures.length<2?this.gotoAndStop(e):this.gotoAndPlay(e)},y=m.prototype=Object.create(s.prototype);m.prototype.constructor=m,platypus.PIXIAnimation=m,Object.defineProperties(y,{visible:{get:function(){return this._visible},set:function(t){this._visible=t,this._syncUpdate()}},currentFrame:{get:function(){var t=this._animation.frames;return t[Math.floor(this._currentTime)%t.length]}},paused:{get:function(){return!this.playing},set:function(t){(t&&this.playing||!t&&!this.playing)&&(this.playing=!t,this._syncUpdate())}}}),y.stop=function(){this.paused=!0},y.play=function(){this.paused=!1},y._syncUpdate=function(){var t=function(t){var e="",i=0;this._currentTime+=this.animationSpeed*this._animation.speed*t*.06,(i=Math.floor(this._currentTime))<0&&(i=0),i<this._animation.frames.length?this.setFrame(i%this._animation.frames.length):i>=this._animation.frames.length&&(e=this._animation.id,this.gotoAndPlay(this._animation.next),this.emit("complete",e))};return function(){var e=this.playing&&this._visible;e!==this._updating&&(this._updating=e,this.update=e?t:l)}}(),y.gotoAndStop=function(t){this.stop(),this._currentTime=0,this._animation=this._animations[t],this._animation||(this._animation=this._animations.default),this.setFrame(0)},y.gotoAndPlay=function(t,e){this.currentAnimation===t&&!1===e||(this._currentTime=0,this._animation=this._animations[t],this.currentAnimation=t,this._animation||(this._animation=this._animations.default,this.currentAnimation="default"),this.setFrame(0)),this.play()},y.setFrame=function(t){var i=this._animation.frames[t];this._texture=i.texture,this.anchor=i.anchor,this.tintedTexture&&(this.tintedTexture=e.getTintedTexture(this,this.tint))},y.has=function(t){return!!this._animations[t]},y.destroy=function(){var t="";if(this.stop(),s.prototype.destroy.call(this),this.cacheId&&(a[this.cacheId].viable-=1,a[this.cacheId].viable<=0)){for(t in a[this.cacheId].textures.recycle(),a[this.cacheId].animations)a[this.cacheId].animations.hasOwnProperty(t)&&a[this.cacheId].animations[t].frames.recycle();delete a[this.cacheId]}},m.preloadBaseTextures=function(t){var e=h,i="";if(t.updateTexture)for(i in e)e.hasOwnProperty(i)&&t.updateTexture(e[i])},m.unloadBaseTextures=function(t){var e=h,i="";for(i in e)e.hasOwnProperty(i)&&e[i]&&(e[i].destroy(),e[i]=null)},m.EmptySpriteSheet={framerate:60,frames:[],images:[],animations:{},recycleSpriteSheet:function(){}},m.formatSpriteSheet=function(){var t=/([\w-]+)\.(\w+)$/,e=function(t,e,i,n,r){var o="";for(o in t)t.hasOwnProperty(o)&&(e[o]&&(e[o].frames.recycle(),e[o].recycle(),platypus.debug.olive('PIXIAnimation "'+r+'": Overwriting duplicate animation for "'+o+'".')),e[o]=s(o,t[o],i,n))},n=function(t){for(var e=t.length,i="",n="";e--;)i+=n+(t[e].src||t[e]).substring(0,128),n=",";return i},r=function(t,i){var r=null,s=i.animations,a=i.images,h=i.framerate||60,l=i.frames,u=0,c=Array.setUp(),p=a.length,f=l.length,g=t.animations,v=t.images,m=t.framerate||60,y=t.frames;for(i.id?i.id+=";"+(t.id||n(t.images)):i.id=t.id||n(t.images),u=0;u<v.length;u++)c.push(o(v[u])),a.push(c[u]);return Array.isArray(y)?function(t,e,i){var n=null,r=0;for(r=0;r<t.length;r++)n=t[r],e.push(Array.setUp(n[0],n[1],n[2],n[3],n[4]+i,n[5],n[6]))}(y,l,p):(function(t,e,i,n){var r=0,s=t.width,o=t.height,a=t.regX||0,h=t.regY||0,l=0,u=0,c=0,d=0;for(r=0;r<n.length;r++)for(l=n[r].realWidth-s,u=n[r].realHeight-o,d=0;d<=u;d+=o)for(c=0;c<=l;c+=s)e.push([c,d,s,o,r+i,a,h])}(y,l,p,r=d(c)),r.recycle()),e(g,s,m/h,f,i.id),c.recycle(),i},s=function(t,e,n,r){var s=0,o=0,a=Array.setUp(),h=0;if("number"==typeof e)return a.push(e+r),i.setUp("frames",a,"next",t,"speed",n);if(Array.isArray(e)){for(o=e[0]||0,h=(e[1]||o)+1+r,s=o+=r;s<h;s++)a.push(s);return i.setUp("frames",a,"next",e[2]||t,"speed",(e[3]||1)*n)}for(s=0;s<e.frames.length;s++)a.push(e.frames[s]+r);return i.setUp("frames",a,"next",e.next||t,"speed",(e.speed||1)*n)},o=function(e){var i=!1;return"string"==typeof e&&(i=e.match(t))?i[1]:e},a=function(){var t=this.animations,e="";for(e in t)t.hasOwnProperty(e)&&t[e].frames.recycle(),t[e].recycle();this.frames.recycle(2),this.images.recycle(),this.recycle()};return function(t){var e=m.EmptySpriteSheet,n=t;if("string"==typeof n&&(n=platypus.game.settings.spriteSheets[t]),n){if(e=i.setUp("animations",i.setUp(),"framerate",60,"frames",Array.setUp(),"id","","images",Array.setUp(),"recycleSpriteSheet",a),Array.isArray(n))return function(t,e){for(var i=t.length,n=null;i--;)"string"==typeof(n=t[i])&&(n=platypus.game.settings.spriteSheets[n]),n&&r(n,e);return e}(n,e);if(n)return r(n,e)}return e}}()}(),platypus.StateMap=function(){"use strict";var t=include("platypus.DataMap"),e=function(e){var i=arguments.length;i?1===i&&"string"==typeof e?(t.call(this),this.updateFromString(e)):t.apply(this,arguments):t.call(this)},i=extend(e,t);return Object.defineProperty(i,"updateFromString",{value:function(t){for(var e=t.greenSplit(","),i=e.length,n="";i--;)(n=e[i])&&("!"===n.substr(0,1)?this.set(n.substr(1),!1):this.set(n,!0));return e.recycle(),this}}),Object.defineProperty(i,"update",{value:function(t){for(var e=t.keys,i=e.length,n="",r=!1,s=!1;i--;)n=e[i],s=t.get(n),this.get(n)!==s&&(this.set(n,s),r=!0);return r}}),Object.defineProperty(i,"includes",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)!==t.get(n))return!1;return!0}}),Object.defineProperty(i,"intersects",{value:function(t){for(var e=t.keys,i=e.length,n="";i--;)if(n=e[i],this.get(n)===t.get(n))return!0;return!1}}),recycle.add(e,!!springroll.Debug,"StateMap",function(){this.clear(),e.recycle(this)}),e}(),platypus.Component=function(){"use strict";var t=include("platypus.Data"),e=function(){return Array.setUp()},i=function(e,i){this.type=e,this.owner=i,this.publicMethods=t.setUp(),this.listener=t.setUp("events",Array.setUp(),"messages",Array.setUp())},n=i.prototype;return n.toString=function(){return"[Component "+this.type+"]"},n.toJSON=null,n.destroy=function(){var t="";if(this.listener){for(t in this._destroy&&this._destroy(),this.publicMethods)this.publicMethods.hasOwnProperty(t)&&this.removeMethod(t);this.publicMethods.recycle(),this.removeEventListeners(),this.listener.events.recycle(),this.listener.messages.recycle(),this.listener.recycle(),this.listener=null}},n.removeEventListeners=function(t){var e=0,i=null,n=null;if(t)for(e=0;e<t.length;e++)this.removeEventListener(t[e]);else{for(i=this.listener.events,n=this.listener.messages,e=0;e<i.length;e++)this.owner.off(i[e],n[e]);i.length=0,n.length=0}},n.addEventListener=function(t,e,i){var n=e.bind(this);return this.listener.events.push(t),this.listener.messages.push(n),this.owner.on(t,n,i),n},n.addMethod=function(t,e){this.owner[t]?platypus.debug.warn(this.owner.type+': Entity already has a method called "'+t+'". Method not added.'):(this.owner[t]=function(){return e.apply(this,arguments)}.bind(this),this.publicMethods[t]=e)},n.removeEventListener=function(t,e){var i=0,n=this.listener.events,r=this.listener.messages;for(i=n.length-1;i>=0;i--)n[i]!==t||e&&r[i]!==e||(this.owner.off(t,r[i]),this.listener.events.greenSplice(i),this.listener.messages.greenSplice(i))},n.removeMethod=function(t){this.owner[t]?delete this.owner[t]:platypus.debug.warn(this.owner.type+': Entity does not have a method called "'+t+'".'),delete this.publicMethods[t]},i.getAssetList=e,i.getLateAssetList=e,i}(),platypus.Messenger=function(){"use strict";var t=include("springroll.EventDispatcher"),e=function(){t.call(this),this.loopCheck=Array.setUp()},i=!!springroll.Debug,n=i&&window.performance&&window.performance.mark&&window.performance.measure&&window.performance,r=extend(e,t);return r.toString=function(){return"[Messenger Object]"},r._trigger=r.trigger,r.trigger=function(t,e,i){var n=null,r=0,s=0,o=e,a=null;if("string"==typeof t){if(-1===t.indexOf(" "))return this.triggerEvent.apply(this,arguments);for(a=t.split(" "),n=Array.prototype.greenSlice.call(arguments),r=0;r<a.length;r++)n[0]=a[r],s+=this.triggerEvent.apply(this,n);return n.recycle(),s}if(Array.isArray(t)){for(n=Array.prototype.greenSlice.call(arguments),r=0;r<t.length;r++)n[0]=t[r],s+=this.trigger.apply(this,n);return n.recycle(),s}return t.event?(void 0!==t.message&&(o=t.message),this.triggerEvent(t.event,o,t.debug||i)):(platypus.debug.warn('Event incorrectly formatted: must be string, array, or object containing an "event" property.',t),0)},r.triggerEvent=function(t){var e=0,i=0,n=null,r=this._listeners,s=null;if(!this._destroyed&&r.hasOwnProperty(t)&&r[t]){for(r=r[t].greenSlice(),arguments.length>1&&(s=Array.prototype.greenSlice.call(arguments)).greenSplice(0),e=i=r.length;i--;)(n=r[i])._eventDispatcherOnce&&(delete n._eventDispatcherOnce,this.off(t,n)),n.apply(this,s);s&&s.recycle(),r.recycle()}return e},i&&(r._triggerEvent=r.triggerEvent,r.triggerEvent=function(t,e){var i=0,r=e&&e.debug,s=0,o=0;if(r||this.debug){for(i=0;i<this.loopCheck.length;i++)if(this.loopCheck[i]===t){if((s+=1)>5)throw"Endless loop detected for '"+t+"'.";platypus.debug.warn("Event '"+t+"' is nested inside another '"+t+"' event.")}return this.loopCheck.push(t),n&&n.mark("a"),o=this._triggerEvent.apply(this,arguments),n&&(n.mark("b"),n.measure(this.type+":"+t,"a","b")),this.loopCheck.length=this.loopCheck.length-1,r&&(o?platypus.debug.olive('Entity "'+this.type+'": Event "'+t+'" has '+o+" subscriber"+(o>1?"s":"")+".",e):platypus.debug.warn('Entity "'+this.type+'": Event "'+t+'" has no subscribers.',e)),o}return this._triggerEvent.apply(this,arguments)}),r.getMessageIds=function(){return Object.keys(this._listeners)},r.eventDispatcherDestroy=r.destroy,r.destroy=function(){this.loopCheck.recycle(),this.eventDispatcherDestroy()},e}(),platypus.Entity=function(){"use strict";var t=include("platypus.Data"),e=include("platypus.StateMap"),i=function(t,e,i){this.addComponent(new t(this,e,i))},n={},r=function(r,s,o,a){var h=0,l=null,u=Array.setUp(),c=t.setUp(r),d=c.components,p=t.setUp(c.properties),f=t.setUp(s),g=t.setUp(f.properties),v=Array.setUp(),m=Array.setUp();if(platypus.Messenger.call(this),this.components=Array.setUp(),this.type=c.id||"none",this.id=f.id||g.id,this.id?0===this.id.search(this.type+"-")&&(h=parseInt(this.id.substring(this.id.search("-")+1),10),isNaN(h)||n[this.type]&&!(n[this.type]<=h)||(n[this.type]=h+1)):(n[this.type]||(n[this.type]=0),this.id=this.type+"-"+n[this.type],n[this.type]+=1),this.setProperty(p),this.setProperty(g),this.on("set-property",function(t){this.setProperty(t)}.bind(this)),this.state=e.setUp(this.state),this.lastState=e.setUp(),a&&(this.parent=a),this.trigger=this.triggerEvent=function(t,e){return v.push(t),m.push(e),-1},d)for(h=0;h<d.length;h++)(l=d[h])&&(platypus.components[l.type]?u.push(i.bind(this,platypus.components[l.type],l)):platypus.debug.warn('Entity "'+this.type+'": Component "'+l.type+'" is not defined.',l));this.loadingComponents=platypus.Async.setUp(u,function(){for(this.loadingComponents=null,delete this.trigger,delete this.triggerEvent,h=0;h<v.length;h++)this.trigger(v[h],m[h]);v.recycle(),m.recycle(),this.triggerEvent("load"),o&&o(this)}.bind(this)),u.recycle(),c.recycle(),p.recycle(),f.recycle(),g.recycle()},s=r.prototype=new platypus.Messenger;return s.toString=function(){return"[Entity "+this.type+"]"},s.toJSON=function(t){var e=this.components,i={properties:{id:this.id,state:this.state.toJSON()}},n=0,r=null,s=i.properties;for(t?(i.id=this.type,i.components=[]):i.type=this.type,n=0;n<e.length;n++)r=e[n].toJSON(s),t&&r&&i.components.push(r);return i},s.addComponent=function(t){return this.components.push(t),this.triggerEvent("component-added",t),t},s.removeComponent=function(t){var e=0;if("string"==typeof t){for(e=0;e<this.components.length;e++)if(this.components[e].type===t)return t=this.components[e],this.components.greenSplice(e),this.triggerEvent("component-removed",t),t.destroy(),t}else for(e=0;e<this.components.length;e++)if(this.components[e]===t)return this.components.greenSplice(e),this.triggerEvent("component-removed",t),t.destroy(),t;return!1},s.setProperty=function(t){var e="";for(e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},s.messengerDestroy=s.destroy,s.destroy=function(){var t=this.components,e=0,i=t.length;if(!this._destroyed){for(e=0;e<i;e++)t[e].destroy();t.recycle(),this.state.recycle(),this.state=null,this.lastState.recycle(),this.lastState=null,this.messengerDestroy()}},r.getAssetList=function(t,e){var i=0,n=null,s=null,o=null,a=null;if(t.type)return(a=platypus.game.settings.entities[t.type])?r.getAssetList(a,t.properties):(platypus.debug.warn('Entity "'+t.type+'": This entity is not defined.',t),o);for(o=Array.setUp(),i=0;i<t.components.length;i++)(n=t.components[i]&&t.components[i].type&&platypus.components[t.components[i].type])&&(s=n.getAssetList(t.components[i],t.properties,e),o.union(s),s.recycle());return o},r.getLateAssetList=function(t,e,i){var n=0,s=null,o=null,a=null;if(t.type)return r.getLateAssetList(platypus.game.settings.entities[t.type],e,i);for(a=Array.setUp(),n=0;n<t.components.length;n++)(s=t.components[n]&&t.components[n].type&&platypus.components[t.components[n].type])&&(o=s.getLateAssetList(t.components[n],t.properties,e,i),a.union(o),o.recycle());return a},r}(),platypus.Scene=function(){"use strict";var t=include("platypus.Data"),e=include("platypus.Entity"),i=include("platypus.PIXIAnimation"),n=include("springroll.State"),r=/^(?:\w+:\/{2}\w+(?:\.\w+)*\/?)?(?:[\/.]*?(?:[^?]+)?\/)?(?:([^\/?]+)\.(\w+))(?:\?\S*)?$/,s=function(){var t=function(t,e){for(var i=e.length;i--;)if(e[i].id===t)return!0;return!1};return function(e,i){for(var n=null,r=platypus.game.app.assetManager.cache._cache,s=Array.setUp(),a=e.length;a--;)r[(n=o(e[a])).id]||t(n.id,i)?n.recycle():s.push(n);return s}}(),o=function(e){var i=e.match(r),n=t.setUp("id",e,"src",e);return i?n.id=i[1]:platypus.debug.warn("Scene: A listed asset should provide the entire file path."),n},a=function(t,i,n){this.layers.push(new e(t,{properties:i},n))},h=function(){var e=0,n="",r=Array.setUp(),s=this.layerDefinitions,o=!0,h=!1,l=null,u=null;for(this.holds=t.setUp("count",1,"release",function(){var t=this.holds;t.count-=1,t.count||(this.sceneLive(),t.recycle(),this.holds=null)}.bind(this)),this.storeMessages=!0,this.storedMessages=Array.setUp(),this.layers=Array.setUp(),e=0;e<s.length;e++){if(h=s[e],l={stage:this.stage,parent:this},h.properties)for(n in h.properties)h.properties.hasOwnProperty(n)&&(l[n]=h.properties[n]);if(h.type&&(h=platypus.game.settings.entities[h.type]),o=!0,h.filter){if(h.filter.includes)for(n in o=!1,h.filter.includes)h.filter.includes.hasOwnProperty(n)&&platypus.supports[h.filter.includes[n]]&&(o=!0);if(h.filter.excludes)for(n in h.filter.excludes)h.filter.excludes.hasOwnProperty(n)&&platypus.supports[h.filter.excludes[n]]&&(o=!1)}o&&r.push(a.bind(this,h,l))}for(platypus.Async.setUp(r,function(){var t=this.holds;platypus.debug.olive("Scene loaded: "+this.id),this.triggerOnChildren("scene-loaded",this.data,t),i.preloadBaseTextures(this.app.display.renderer),t.release()}.bind(this)),u=this.storedMessages,this.storeMessages=!1,e=0;e<u.length;e++)this.triggerOnChildren(u[e].message,u[e].value);u.recycle(),this.storedMessages=null,r.recycle()},l=function(t,e){var i=null;n.call(this,t,e.options),i=this.getAssetList(e),this.id=e.id,this.preload.union(i),this.layerDefinitions=e.layers,this.storeMessages=!1,this.storedMessages=null,this.stage=t,this.layers=null,this.assets=e.assets||null,this.holds=null,this.on("loading",function(t,e){var i=this.getLateAssetList(t);i.length?(e.union(i),this.once("exit",function(t){this.app.unload(t),t.recycle()}.bind(this,i))):i.recycle()}.bind(this,e)),this.on("loaded",h),i.recycle()},u=extend(l,n);return u.sceneLive=function(){platypus.game.currentScene=this,platypus.debug.olive("Scene live: "+this.id),this.triggerOnChildren("scene-live",this.data)},u.exitStart=function(){platypus.debug.olive("Scene ending: "+this.id),this.triggerOnChildren("scene-ended",this.data)},u.triggerOnChildren=function(t,e){var i=0;if(this.storeMessages)this.storedMessages.push({message:t,value:e});else for(i=0;i<this.layers.length;i++)this.layers[i].trigger.apply(this.layers[i],arguments)},u.getEntityById=function(t){var e=0,i=null;for(e=0;e<this.layers.length;e++){if(this.layers[e].id===t)return this.layers[e];if(this.layers[e].getEntityById&&(i=this.layers[e].getEntityById(t)))return i}return null},u.getEntitiesByType=function(t){var e=0,i=null,n=Array.setUp();for(e=0;e<this.layers.length;e++)this.layers[e].type===t&&n.push(this.layers[e]),this.layers[e].getEntitiesByType&&(i=this.layers[e].getEntitiesByType(t),n.union(i),i.recycle());return n},u.exit=function(){var t=0;for(t=0;t<this.layers.length;t++)this.layers[t].destroy();this.layers.recycle(),this.layers=null,i.unloadBaseTextures(),platypus.game.currentScene=null},u.getAssetList=function(t){var i=0,n=null,r=Array.setUp();for(t.assets&&r.union(t.assets),i=0;i<t.layers.length;i++)n=e.getAssetList(t.layers[i]),r.union(n),n.recycle();return n=s(r,this.preload),r.recycle(),n},u.getLateAssetList=function(t){var i=0,n=null,r=Array.setUp();for(i=0;i<t.layers.length;i++)n=e.getLateAssetList(t.layers[i],null,this.data),r.union(n),n.recycle();return n=s(r,this.preload),r.recycle(),n},l}(),platypus.Game=function(){"use strict";var t=include("PIXI.Container"),e=include("platypus.Scene"),i=include("window.XMLHttpRequest"),n=function(t,e){var n=new i;n.open("GET",t,!0),n.responseType="text",n.onload=function(){var i=null;if(200===n.status)try{i=JSON.parse(n.responseText)}catch(e){platypus.debug.warn('Error parsing "'+t+'": '+e.message)}else platypus.debug.warn('Error opening "'+t+'": '+n.description);e(i)},n.send()},r=function(t,e){var i=0,s="",o=0,a=function(){(o-=1)||e(t)},h=function(t,e,i){r(t[e],function(n){t[e]=n,i(n)})};if(t){if(Array.isArray(t)){if(o=t.length)for(i=0;i<t.length;i++)h(t,i,a);else e(t);return}if("object"==typeof t){if(t.src&&t.src.length>5&&".json"===t.src.substring(t.src.length-5).toLowerCase())r(t.src,function(i){t.src!==i&&(t=i),e(t)});else{for(s in t)t.hasOwnProperty(s)&&(o+=1);if(o)for(s in t)t.hasOwnProperty(s)&&h(t,s,a);else e(t)}return}if("string"==typeof t&&t.length>5&&".json"===t.substring(t.length-5).toLowerCase())return void n(t,function(t){"object"==typeof t?r(t,e):e(t)})}e(t)},s=function(i,n,s){var o=function(i){var n="",r=this.app.states||{};for(n in platypus.game=this,this.currentScene=null,this.settings=i,this.stage=this.app.display.stage,i.scenes)i.scenes.hasOwnProperty(n)&&(r[i.scenes[n].id=i.scenes[n].id||n]=new e(new t,i.scenes[n]));this.app.states||(this.app.states=r),s&&s(this),window.getEntityById=function(t){return this.getEntityById(t)}.bind(this),window.getEntitiesByType=function(t){return this.getEntitiesByType(t)}.bind(this),window.getVisibleSprites=function(t,e){var i=0;if(e=e||Array.setUp(),!(t=t||this.stage).texture&&t.visible){for(i=0;i<t.children.length;i++)window.getVisibleSprites(t.children[i],e);return e}return t.visible?(e.push(t),e):e}.bind(this)}.bind(this);i?(this.app=n,"string"==typeof i?r(i,o):o(i)):platypus.debug.warn("No game definition is supplied. Game not created.")},o=s.prototype;return o.tick=function(t){this.currentScene&&this.currentScene.triggerOnChildren("tick",t)},o.loadScene=function(){var i=function(i,n){var r="",s=null;i?"string"==typeof i?(this.app.states[i].data=n,this.app.manager.state=i):(r=i.id=i.id||"new-scene",(s=new e(new t,i)).data=n,this.app.manager.addState(r,s),this.stage.addChild(s.panel),this.app.trigger("stateAdded",r,s),this.app.manager.state=r):platypus.debug.warn("A scene id or scene definition must be provided to load a scene.")};return function(t,e){window.setTimeout(i.bind(this,t,e),1)}}(),o.getEntityById=function(t){return this.currentScene?this.currentScene.getEntityById(t):null},o.getEntitiesByType=function(t){return this.currentScene?this.currentScene.getEntitiesByType(t):Array.setUp()},o.destroy=function(){},s}(),platypus.Vector=function(){"use strict";var t=function(t,e,i){this.matrix?(this.matrix[0]=0,this.matrix[1]=0,this.matrix[2]=0):this.matrix=Array.setUp(0,0,0),this.set(t,e,i)},e=t.prototype;return Object.defineProperty(e,"x",{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}}),Object.defineProperty(e,"y",{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}}),Object.defineProperty(e,"z",{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}}),e.toString=function(){return"["+this.matrix.join(",")+"]"},e.set=function(t,e,i){return t&&t.matrix?this.setVector(t,e):t&&"number"==typeof t.x&&"number"==typeof t.y?this.setXYZ(t.x,t.y,t.z):t&&Array.isArray(t)?this.setArray(t,e):this.setXYZ(t,e,i)},e.setXYZ=function(t,e,i){var n=this.matrix;return n[0]=t||0,n[1]=e||0,n[2]=i||0,this},e.setVector=function(t,e){return this.setArray(t.matrix,e)},e.setArray=function(t,e){for(var i=e||t.length,n=this.matrix;i--;)n[i]=t[i];return this},e.equals=function(t,e,i){var n=null,r=0,s=this.matrix;if(t&&Array.isArray(t)){for(r=e||t.length;r--;)if(s[r]!==t[r])return!1;return!0}if(t&&t.matrix){for(n=t.matrix,r=e||n.length;r--;)if(s[r]!==n[r])return!1;return!0}return!("number"!=typeof t||s[0]!==t||"number"==typeof e&&s[1]!==e||"number"==typeof i&&s[2]!==i)},e.magnitude=function(t){var e=0,i=0;for(t=t||this.matrix.length,i=0;i<t;i++)e+=Math.pow(this.matrix[i],2);return Math.sqrt(e)},e.getAngle=function(){var t=this.magnitude(2),e=0;return 0!==t&&(e=Math.acos(this.x/t),this.y<0&&(e=2*Math.PI-e)),e},e.getUnit=function(){return platypus.Vector.setUp(this).normalize()},e.getInverse=function(){return platypus.Vector.setUp(this).multiply(-1)},e.normalize=function(){var t=this.magnitude();return 0===t?this:this.multiply(1/t)},e.cross=function(){var t=function(t,e,i,n){return t*n-e*i};return function(e){var i=t(this.y,this.z,e.y,e.z),n=-t(this.x,this.z,e.x,e.z),r=t(this.x,this.y,e.x,e.y);return this.x=i,this.y=n,this.z=r,this}}(),e.getCrossProduct=function(t){return platypus.Vector.setUp(this).cross(t)},e.rotate=function(t,e){var i,n,r,s=e,o=null,a=Math.cos(t),h=Math.sin(t),l=1-a,u=platypus.Vector.setUp();return s?"x"===s?s=u.setXYZ(1,0,0):"y"===s?s=u.setXYZ(0,1,0):"z"===s&&(s=u.setXYZ(0,0,1)):s=u.setXYZ(0,0,1),i=s.x,n=s.y,r=s.z,o=Array.setUp(Array.setUp(a+i*i*l,i*n*l-r*h,i*r*l+n*h),Array.setUp(n*i*l+r*h,a+n*n*l,n*r*l-i*h),Array.setUp(r*i*l-n*h,r*n*l+i*h,a+r*r*l)),this.multiply(o),u.recycle(),o.recycle(2),this},e.multiply=function(t,e){var i=0,n=0,r=null,s=0;if(Array.isArray(t)){for(r=this.matrix.greenSlice(),s=e||t.length,i=0;i<s;i++)for(this.matrix[i]=0,n=0;n<s;n++)this.matrix[i]+=r[n]*t[i][n];r.recycle()}else for(s=e||this.matrix.length,i=0;i<s;i++)this.matrix[i]*=t;return this},e.add=function(e,i,n){var r=e,s=0,o=0;for(Array.isArray(r)?s=i||this.matrix.length:r instanceof t?(r=r.matrix,s=i||this.matrix.length):(r=[e||0,i||0,n||0],s=this.matrix.length),o=0;o<s;o++)this.matrix[o]+=r[o];return this},e.addVector=function(t,e){return this.add(t,e)},e.subtractVector=function(t,e){return this.add(t.getInverse(),e)},e.scale=function(t,e){return this.multiply(t,e)},e.dot=function(t,e){var i=0,n=0,r=this.matrix,s=t.matrix;for(n=e||r.length;n--;)i+=r[n]*(s[n]||0);return i},e.angleTo=function(t){var e=this.getUnit(),i=t.getUnit(),n=0;return e.magnitude()&&i.magnitude()?n=Math.acos(e.dot(i)):(platypus.debug.warn("Vector: Attempted to find the angle of a zero-length vector."),n=NaN),e.recycle(),i.recycle(),n},e.signedAngleTo=function(t,e){var i,n=this.getUnit(),r=t.getUnit(),s=n.getCrossProduct(r);return i=0===s.magnitude()?0:s.dot(e)<0?-Math.acos(n.dot(r)):Math.acos(n.dot(r)),n.recycle(),r.recycle(),s.recycle(),i},e.scalarProjection=function(e){var i=null,n=0;return"number"==typeof e?this.magnitude(2)*Math.cos(e):(i=t.setUp(e).normalize(),n=this.dot(i),i.recycle(),n)},e.copy=function(){return platypus.Vector.setUp(this)},t.assign=function(){var t=function(t,e,i,n){var r=null,s=!1;"string"==typeof t&&void 0!==e[t]&&(r=e[t],delete e[t],s=!0),Object.defineProperty(e,t,{get:function(){return i.matrix[n]},set:function(t){i.matrix[n]=t},enumerable:!0}),s&&(e[t]=r)};return function(e,i){var n=0;if(e&&i){if(!e[i]){for(e[i]=platypus.Vector.setUp(),n=2;n<arguments.length;n++)arguments[n]!==i&&t(arguments[n],e,e[i],n-2);return null}return e[i]}return null}}(),recycle.add(t,!!springroll.Debug,"Vector",function(){this.matrix.length=0,t.recycle(this)}),t}(),platypus.AABB=function(){"use strict";var t=function(e,i,n,r){e instanceof t?this.set(e):(this.empty=!0,this.setAll(e,i,n,r))},e=t.prototype;return e.setAll=function(t,e,i,n){return this.empty=!1,this.x=t,this.y=e,this.resize(i,n),this},e.setBounds=function(t,e,i,n){return this.empty=!1,this.x=(i+t)/2,this.y=(e+n)/2,this.resize(i-t,n-e),this},e.set=function(t){return this.empty=t.empty,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this},e.toString=function(){return"[AABB: "+this.width+"x"+this.height+" ("+this.x+", "+this.y+")]"},e.reset=function(){return this.empty=!0,this},e.resize=function(t,e){var i=t||0,n=e||0,r=i/2,s=n/2;return this.width=i,this.height=n,this.halfWidth=r,this.halfHeight=s,"number"==typeof this.x?(this.left=-r+this.x,this.right=r+this.x):this.empty=!0,"number"==typeof this.y?(this.top=-s+this.y,this.bottom=s+this.y):this.empty=!0,this},e.include=function(t){return this.empty?this.set(t):(this.left>t.left&&(this.left=t.left),this.right<t.right&&(this.right=t.right),this.top>t.top&&(this.top=t.top),this.bottom<t.bottom&&(this.bottom=t.bottom),this.width=this.right-this.left,this.height=this.bottom-this.top,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=this.left+this.halfWidth,this.y=this.top+this.halfHeight),this},e.move=function(t,e){return this.moveX(t),this.moveY(e),this},e.moveX=function(t){return this.x=t,this.left=-this.halfWidth+t,this.right=this.halfWidth+t,this},e.moveY=function(t){return this.y=t,this.top=-this.halfHeight+t,this.bottom=this.halfHeight+t,this},e.moveXBy=function(t){return this.moveX(this.x+t)},e.moveYBy=function(t){return this.moveY(this.y+t)},e.equals=function(t){return!this.empty&&!t.empty&&this.left===t.left&&this.top===t.top&&this.right===t.right&&this.bottom===t.bottom},e.contains=function(t){return t.top>=this.top&&t.bottom<=this.bottom&&t.left>=this.left&&t.right<=this.right},e.containsVector=function(t){return this.containsPoint(t.x,t.y)},e.containsPoint=function(t,e){return e>=this.top&&e<=this.bottom&&t>=this.left&&t<=this.right},e.collides=function(t){return t.bottom>this.top&&t.top<this.bottom&&t.right>this.left&&t.left<this.right},e.collidesPoint=function(t,e){return e>this.top&&e<this.bottom&&t>this.left&&t<this.right},e.intersects=function(t){return t.bottom>=this.top&&t.top<=this.bottom&&t.right>=this.left&&t.left<=this.right},e.getIntersectionArea=function(t){var e=Math.max,i=Math.min;return this.intersects(t)?(i(this.bottom,t.bottom)-e(this.top,t.top))*(i(this.right,t.right)-e(this.left,t.left)):0},recycle.add(t,!!springroll.Debug,"AABB"),t}(),platypus.ActionState=function(){"use strict";var t=include("platypus.Data"),e=include("platypus.StateMap"),i=function(i,n,r){this.event=i,this.trigger=r,this.active=!1,this.wasActive=!1,this.valid=!0,this.wasValid=!0,this.states=e.setUp(n),this.inputs=Array.setUp(),this.stateSummary=t.setUp("pressed",!1,"released",!1,"triggered",!1)},n=function(t){return t},r=i.prototype;return r.update=function(t){var e=this.stateSummary;return this.valid=t.includes(this.states),this.active=this.inputs.some(n),e.pressed=this.valid&&this.active,e.released=this.wasActive&&(!this.valid&&this.wasValid||this.valid&&!this.active),e.triggered=this.valid&&this.active&&!this.wasActive,this.wasValid=this.valid,this.wasActive=this.active,e.pressed||e.released||e.triggered},r.resolve=function(){this.trigger(this.event,this.stateSummary)},recycle.add(i,!!springroll.Debug,"ActionState",function(){this.states.recycle(),this.stateSummary.recycle(),this.inputs.recycle(),i.recycle(this)}),i}(),platypus.CollisionData=function(){"use strict";var t=include("platypus.Vector"),e=function(i){this.vector||(this.vector=t.setUp()),i instanceof e?this.copy(i):this.set.apply(this,arguments)},i=e.prototype;return i.set=function(t,e,i,n,r,s,o,a,h){this.occurred=t||!1,this.direction=e||null,this.position=i||null,this.deltaMovement=n||null,this.aABB=r||null,this.thisShape=s||null,this.thatShape=o||null,this.vector.set(a),this.stuck=h||0},i.copy=function(t){this.occurred=t.occurred,this.direction=t.direction,this.position=t.position,this.deltaMovement=t.deltaMovement,this.aABB=t.aABB,this.thisShape=t.thisShape,this.thatShape=t.thatShape,this.vector.setVector(t.vector),this.stuck=t.stuck},recycle.add(e,!!springroll.Debug,"CollisionData"),e}(),platypus.CollisionDataContainer=function(){"use strict";var t=function(){this.xData||this.yData?this.reset():(this.xData=Array.setUp(),this.yData=Array.setUp(),this.xDeltaMovement=1/0,this.yDeltaMovement=1/0)},e=t.prototype;return e.tryToAddX=function(t){return!(t.deltaMovement>this.xDeltaMovement||(t.deltaMovement<this.xDeltaMovement&&this.resetX(t.deltaMovement),this.xData.push(t),0))},e.tryToAddY=function(t){return!(t.deltaMovement>this.yDeltaMovement||(t.deltaMovement<this.yDeltaMovement&&this.resetY(t.deltaMovement),this.yData.push(t),0))},e.reset=function(){this.resetX(1/0),this.resetY(1/0)},e.resetX=function(t){for(var e=this.xData,i=e.length;i--;)e[i].recycle();e.length=0,this.xDeltaMovement=t},e.resetY=function(t){for(var e=this.yData,i=e.length;i--;)e[i].recycle();e.length=0,this.yDeltaMovement=t},recycle.add(t,!!springroll.Debug,"CollisionDataContainer"),t}(),platypus.CollisionShape=function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.Vector"),i=function(t,e){var i=e.aABB,n=i.halfHeight,r=i.halfWidth,s=Math.abs,o=Math.pow,a=s(t.x-e.x),h=s(t.y-e.y),l=t.radius;return a<r||h<n||a<r+l&&h<n+l&&o(a-r,2)+o(h-n,2)<o(l,2)},n=function(t){var e=Math.pow;return this.aABB.collides(t.aABB)&&("rectangle"===t.type&&i(this,t)||"circle"===t.type&&e(this.x-t.x,2)+e(this.y-t.y,2)<=e(this.radius+t.radius,2))},r=function(){return!1},s=function(t){return this.aABB.collides(t.aABB)&&("rectangle"===t.type||"circle"===t.type&&i(t,this))},o=function(i,o,a){var h=o.regX,l=o.regY,u=o.width||2*o.radius||0,c=o.height||2*o.radius||0,d=o.radius||0,p=o.type||"rectangle";this.initialized||(this.initialized=!0,e.assign(this,"offset","offsetX","offsetY"),e.assign(this,"position","x","y"),e.assign(this,"size","width","height"),this.aABB=t.setUp()),this.owner=i,this.collisionType=a,this.type=p,this.subType="","circle"===p?(u=c=2*d,this.collides=n):this.collides="rectangle"===p?s:r,this.size.setXYZ(u,c),this.radius=d,"number"!=typeof h&&(h=u/2),"number"!=typeof l&&(l=c/2),this.offset.setXYZ(o.offsetX||u/2-h,o.offsetY||c/2-l),i?this.position.setXYZ(i.x,i.y).add(this.offset):this.position.setXYZ(o.x,o.y).add(this.offset),this.aABB.setAll(this.x,this.y,u,c)},a=o.prototype;return a.update=function(t,e){var i=t+this.offsetX,n=e+this.offsetY;this.position.setXYZ(i,n),this.aABB.move(i,n)},a.moveX=function(t){this.x=t,this.aABB.moveX(t)},a.moveY=function(t){this.y=t,this.aABB.moveY(t)},a.moveXY=function(t,e){this.x=t,this.y=e,this.aABB.move(t,e)},a.getAABB=function(){return this.aABB},a.setXWithEntityX=function(t){this.x=t+this.offsetX,this.aABB.moveX(this.x)},a.setYWithEntityY=function(t){this.y=t+this.offsetY,this.aABB.moveY(this.y)},a.multiply=function(t){var e=this.position,i=this.owner.position;e.subtractVector(i),e.multiply(t),this.offset.multiply(t),this.size.multiply(t),e.addVector(i),this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.aABB.setAll(this.x,this.y,this.width,this.height)},a.containsPoint=function(t,e){var i=Math.pow;return this.aABB.containsPoint(t,e)&&("rectangle"===this.type||"circle"===this.type&&i(this.x-t,2)+i(this.y-e,2)<=i(this.radius,2))},a.toJSON=function(){var t={},e=this.size.width,i=this.size.height;return e/2!==this.regX&&(t.regX=this.regX),i/2!==this.regY&&(t.regY=this.regY),this.offset.x!==e/2-this.regX&&(t.offsetX=this.offset.x),this.offset.y!==i/2-this.regY&&(t.offsetY=this.offset.y),"circle"===this.type?t.radius=this.radius:(t.width=e,t.height=i),t.type=this.type,t},recycle.add(o,!!springroll.Debug,"CollisionShape"),o}(),function(){"use strict";var t=include("platypus.Component"),e=include("springroll.Debug",!1),i="",n=0,r=function(){},s=function(t,e,i){Object.defineProperty(e,t,{get:function(){return i[t]},set:function(e){i[t]=e},enumerable:!0})},o=function(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}};platypus.components={},platypus.createComponentClass=function(a,h){var l=function(e,i,r){var o="",l="",u="",c="";if(t.call(this,a.id,e),h&&h.call(this),a.properties)for(o in a.properties)a.properties.hasOwnProperty(o)&&(i&&void 0!==i[o]?this[o]=i[o]:void 0!==this.owner[o]?this[o]=this.owner[o]:this[o]=a.properties[o]);if(a.publicProperties)for(o in a.publicProperties)a.publicProperties.hasOwnProperty(o)&&(s(o,this,e),i&&void 0!==i[o]?this[o]=i[o]:void 0!==this.owner[o]?this[o]=this.owner[o]:this[o]=a.publicProperties[o]);if(a.events)for(l in n-=1,a.events)if(a.events.hasOwnProperty(l)&&(this.addEventListener(l,a.events[l],n),i&&i.aliases))for(c in i.aliases)i.aliases.hasOwnProperty(c)&&i.aliases[c]===l&&this.addEventListener(c,a.events[l],n);if(a.publicMethods)for(l in a.publicMethods)if(a.publicMethods.hasOwnProperty(l)){if(u=l,i&&i.aliases)for(c in i.aliases)i.aliases.hasOwnProperty(c)&&i.aliases[c]===l&&(u=c);this.addMethod(u,a.publicMethods[l])}!this.initialize(i,r)&&r&&r()},u=null,c=l.prototype;if(h)for(i in c=extend(l,h),t.prototype)c[i]?c[i]=o(c[i],t.prototype[i]):c[i]=t.prototype[i];else c=extend(l,t);if(c.initialize=a.initialize||r,c.toJSON=function(){var t=!1,i=function(e,n){var r=null,s=!1,o="",a=!1,h=0,l=typeof e;if(t||(t=!0,s=!0),"function"===l)a=!0;else if("object"===l&&null!==e)if(e.toJSON)(r=n?n.greenSlice():Array.setUp()).push(e),i(e.toJSON(),r)||(a=!0);else if(Array.isArray(e))for(h=e.length;h--;){if(n&&n.indexOf(e[h])>=0){a=!0;break}if((r=n?n.greenSlice():Array.setUp()).push(e[h]),!i(e[h],r)){a=!0;break}}else for(o in e)if(e.hasOwnProperty(o)){if(n&&n.indexOf(e[o])>=0){a=!0;break}if((r=n?n.greenSlice():Array.setUp()).push(e[o]),!i(e[o],r)){a=!0;break}}return n&&n.recycle(),s&&(t=!1),!a};return e?function(e){var n=a.properties,r=a.publicProperties,s={type:this.type},o="";for(o in n)n.hasOwnProperty(o)&&n[o]!==this[o]&&(t||i(this[o])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON property value for "'+o+'" (type "'+typeof this[o]+'"). You may want to create a custom `toJSON` method for this component.',this[o]),s[o]=this[o]);for(o in r)r.hasOwnProperty(o)&&r[o]!==this.owner[o]&&void 0===e[o]&&(t||i(this.owner[o])||platypus.debug.warn('Component "'+this.type+'" includes a non-JSON public property value for "'+o+'" (type "'+typeof this.owner[o]+'"). You may want to create a custom `toJSON` method for this component.',this.owner[o]),e[o]=this.owner[o]);return s}:function(t){var e=a.properties,i=a.publicProperties,n={type:this.type},r="";for(r in e)e.hasOwnProperty(r)&&e[r]!==this[r]&&(n[r]=this[r]);for(r in i)i.hasOwnProperty(r)&&i[r]!==this.owner[r]&&(t[r]=this.owner[r]);return n}}(),a.methods)for(u in a.methods)a.methods.hasOwnProperty(u)&&("destroy"===u?c._destroy=a.methods[u]:c[u]=a.methods[u]);if(a.publicMethods)for(u in a.publicMethods)a.publicMethods.hasOwnProperty(u)&&(c[u]=a.publicMethods[u]);return l.getAssetList=a.getAssetList||t.getAssetList,l.getLateAssetList=a.getLateAssetList||t.getLateAssetList,platypus.components[a.id]=l,l}}(),function(){"use strict";var t=include("springroll.Application"),e=include("springroll.ApplicationPlugin"),i=include("window.PIXI",!1),n=include("createjs.Tween",!1),r=n?function(t,e,i){e.delta=i,n.tick(i),t.tick(e)}:function(t,e,i){e.delta=i,t.tick(e)},s=new e,o=function(t,e){t.currentScene&&t.currentScene.triggerOnChildren("resize",e)},a=function(){var e=function(t,e){return Math.floor(204*t/e)},n=function(t,i){var n,r=0,s=0,o=0,a=0,h=null;return i&&(h=i.greenSplit(".")),i&&3===h.length?(s=parseInt(h[0],10),o=parseInt(h[1],10),a=parseInt(h[2],10)):(s=t.charCodeAt(0)||0,o=t.charCodeAt(1)||0,a=t.charCodeAt(2)||0,s-=r=Math.min(s,o,a),o-=r,a-=r),h&&h.recycle(),n=Math.max(s,o,a,1),"color: #ffffff; line-height: 1.5em; border-radius: 6px; background-color: rgb("+e(s,n)+","+e(o,n)+","+e(a,n)+");"};return function(e,r){var s=window.createjs,o=r.options,a=o.author?"by "+o.author:"",h=i,l=r.name||document.title||"",u="Platypus "+platypus.version,c=o.version||"(?)",d=Array.setUp(),p=Array.setUp(),f=platypus.supports;o.hideHello||(d=Array.setUp("SpringRoll "+t.version),h&&(d.push("Pixi.js "+h.VERSION),h.animate&&d.push("PixiAnimate "+h.animate.VERSION)),s&&(s.EaselJS&&d.push("EaselJS "+s.EaselJS.version),s.PreloadJS&&d.push("PreloadJS "+s.PreloadJS.version),s.SoundJS&&d.push("SoundJS "+s.SoundJS.version),s.TweenJS&&d.push("TweenJS "+s.TweenJS.version)),"(?)"!==c&&(l+=" "+c),f.firefox||f.chrome?(console.log("%c "+l+" %c "+a,n(l,l.substr(l.lastIndexOf(" ")-l.length+1)),"line-height: 1.5em;"),d.push(u),p=function(t,e,i){var r=0,s="",o=Array.setUp(t);for(r=0;r<i.length;r++)s=i[r],o.push(n(s,s.substr(s.lastIndexOf(" ")-s.length+1)),"line-height: 1.5em;");return o}("Using %c "+d.join(" %c %c ")+" %c ",0,d),console.log.apply(console,p),p.recycle()):console.log('--- "'+l+'" '+a+" - Using "+d.join(", ")+", and "+u+" ---"),d.recycle()),platypus.debug.olive("Game config loaded.",e)}}(),h=function(t){var e=null,i=null,n=null,r={};for(e in t)if(t[e].id)r[e]=t[e];else for(n in i=h(t[e]))i.hasOwnProperty(n)&&(r[n]=i[n]);return r};i&&i.utils.skipHello(),s.setup=function(){var t="",e=document.getElementsByName("author"),i=this.options;e.length&&(t=e[0].getAttribute("content")||""),i.add("author",t,!0),i.add("hideHello",!1,!0)},s.preload=function(t){var e=this.config.platypus||this.config,i=null,n=!1;e?(this.options.debug&&(e.debug=!0),a(e,this),e.entities=h(e.entities),e.spriteSheets&&function(t){var e="";for(e in t)t.hasOwnProperty(e)&&(t[e].id=e)}(e.spriteSheets),i=this.platypusGame=new platypus.Game(e,this),Object.defineProperty(this,"platypus",{get:function(){return n||(platypus.debug.warn("Referencing `.platypus` to access the Platypus game instance on the SpringRoll Application has been deprecated in favor of `.platypusGame`."),n=!0),this.platypusGame}}),r=r.bind(null,i,{delta:0}),this.on("update",r,320),o=o.bind(null,i),this.on("resize",o)):platypus.debug.warn("PlatypusPlugin: Platypus requires a game configuration."),t()},s.teardown=function(){this.platypusGame&&(this.off("update",r),this.off("resize",o),this.platypusGame.destroy(),delete this.platypusGame)}}(),function(){"use strict";var t,e;platypus.createComponentClass({id:"EventRender",properties:{animationMap:null,component:null,restart:!0},initialize:(t=function(t,e){this.owner.triggerEvent("play-animation",t,e)},e=function(t,e){this.playAnimation(t,e)},function(){var i="",n=this.animationMap;for(i in n)n.hasOwnProperty(i)&&(this.component?this.addEventListener(i,e.bind(this.component,n[i],this.restart)):this.addEventListener(i,t.bind(this,n[i],this.restart)))}),methods:{toJSON:function(){return null}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("PIXI.Circle"),i=include("platypus.Data"),n=include("PIXI.Polygon"),r=include("PIXI.Rectangle"),s={};platypus.createComponentClass({id:"Interactive",properties:{container:null,hitArea:null,hover:!1,relativeToSelf:!1},publicProperties:{buttonMode:!1},initialize:function(){this.pressed=!1,this.camera=t.setUp(),this.hitArea&&(this.container.hitArea=this.setHitArea(this.hitArea))},events:{"camera-update":function(t){this.camera.set(t.viewport)},"handle-render":function(){this.buttonMode!==this.container.buttonMode&&(this.container.buttonMode=this.buttonMode)},"dispatch-event":function(t){this.sprite.dispatchEvent(this.sprite,t.event,t.data)},"input-on":function(){this.removeInputListeners||this.addInputs()},"input-off":function(){this.removeInputListeners&&this.removeInputListeners()}},methods:{addInputs:function(){var t=function(t){var e=t.data,i=e.originalEvent;return void 0!==i.pointerId?"point"+i.pointerId:i.type.substr(0,5)+(e.identifier||0)},e=function(t,e){var n=this.camera,r=this.container,s=null,o=null;r&&e.data.originalEvent&&(o=this.relativeToSelf?r.transform.worldTransform:r.parent.transform.worldTransform,s=i.setUp("event",e.data.originalEvent,"pixiEvent",e,"x",e.data.global.x/o.a+n.left,"y",e.data.global.y/o.d+n.top,"entity",this.owner),this.owner.trigger(t,s),s.recycle())},n=function(i){s[t(i)]=this,e.call(this,"pointerdown",i),i.currentTarget.mouseTarget=!0,this.pressed=!0},r=function(i){var n=t(i);s[n]===this&&(e.call(this,"pointermove",i),this.pressed&&(e.call(this,"pressmove",i),i.currentTarget.mouseTarget=!0))},o=function(t){e.call(this,"pointertap",t)},a=function(t){e.call(this,"pointerout",t)},h=function(t){e.call(this,"pointerover",t)},l=function(i){var n=t(i);s[n]===this&&(s[n]=null,this.pressed&&(e.call(this,"pressup",i),this.pressed=!1),e.call(this,"pointerup",i),i.currentTarget.mouseTarget=!1,i.currentTarget.removeDisplayObject&&i.currentTarget.removeDisplayObject())},u=function(i){var n=t(i);s[n]===this&&(s[n]=null,this.pressed&&(e.call(this,"pressup",i),this.pressed=!1),e.call(this,"pointerupoutside",i),i.currentTarget.mouseTarget=!1,i.currentTarget.removeDisplayObject&&i.currentTarget.removeDisplayObject())},c=function(i){var n=t(i);s[n]===this&&(s[n]=null,this.pressed&&(e.call(this,"pressup",i),this.pressed=!1),e.call(this,"pointercancel",i),i.currentTarget.mouseTarget=!1,i.currentTarget.removeDisplayObject&&i.currentTarget.removeDisplayObject())},d=function(t,e,i,n,r,o,a,h,l){var u="";for(u in s)s.hasOwnProperty(u)&&s[u]===this&&(s[u]=null);t.removeListener("pointerdown",e),t.removeListener("pointerup",i),t.removeListener("pointerupoutside",n),t.removeListener("pointercancel",r),t.removeListener("pointermove",o),t.removeListener("pointertap",a),this.hover&&(t.removeListener("pointerover",h),t.removeListener("pointerout",l)),t.interactive=!1,this.removeInputListeners=null};return function(){var t,e,i,s,p,f,g=this.container,v=null,m=null;g.interactive=!0,t=n.bind(this),e=r.bind(this),i=l.bind(this),s=u.bind(this),p=c.bind(this),f=o.bind(this),g.addListener("pointerdown",t),g.addListener("pointerup",i),g.addListener("pointerupoutside",s),g.addListener("pointercancel",p),g.addListener("pointermove",e),g.addListener("pointertap",f),this.hover&&(v=h.bind(this),m=a.bind(this),g.addListener("pointerover",v),g.addListener("pointerout",m)),this.removeInputListeners=d.bind(this,g,t,i,s,p,e,f,v,m)}}(),setHitArea:function(){var t={};return function(i){var s,o=null;return s=JSON.stringify(i),(o=t[s])||(o=Array.isArray(i)?new n(i):i.radius?new e(i.x||0,i.y||0,i.radius):new r(i.x||0,i.y||0,i.width||this.owner.width||0,i.height||this.owner.height||0),t[s]=o),o}}(),toJSON:function(){return null},destroy:function(){this.removeInputListeners&&this.removeInputListeners(),this.camera.recycle(),this.container.mouseTarget&&this.container.parent&&(this.container.visible=!1,this.container.removeDisplayObject=function(){this.container.parent.removeChild(this.container),this.container=null}.bind(this))}},publicMethods:{}})}(),function(){"use strict";var t=include("platypus.StateMap"),e=function(e,n){return"default"===e?i.bind(null,n):s.bind(null,n,t.setUp(e))},i=function(t){return t},n=function(t,e){this.component.playAnimation(t,e)},r=function(t){this.component.stopAnimation(t)},s=function(t,e,i){return!!i.includes(e)&&t},o=function(t,e){this.owner.triggerEvent("play-animation",t,e)},a=function(t){this.owner.triggerEvent("stop-animation",t)};platypus.createComponentClass({id:"StateRender",properties:{animationMap:null,component:null,forcePlayThrough:!1},initialize:function(){var t="",i="",s=this.animationMap;for(t in this.followThroughs={},this.checkStates=Array.setUp(),this.state=this.owner.state,this.stateChange=!0,this.lastState=-1,s)s.hasOwnProperty(t)&&("!"===(i=s[t])[i.length-1]?(i=i.substring(0,i.length-1),this.followThroughs[i]=!0):this.followThroughs[i]=!1,this.checkStates.push(e(t,i)));this.waitingAnimation=!1,this.waitingState=0,this.playWaiting=!1,this.animationFinished=!1,this.component?(this.playAnimation=n,this.stopAnimation=r):(this.playAnimation=o,this.stopAnimation=a)},events:{"state-changed":function(){this.stateChange=!0},"animation-ended":function(t){t===this.currentAnimation&&(this.waitingAnimation?(this.currentAnimation=this.waitingAnimation,this.waitingAnimation=!1,this.lastState=this.waitingState,this.animationFinished=!1,this.playAnimation(this.currentAnimation)):this.animationFinished=!0)},"update-animation":function(t){var e=0,i=!1;if(this.stateChange){if(this.state.has("visible")&&(this.visible=this.state.get("visible")),this.checkStates)for(e=0;e<this.checkStates.length;e++)if(i=this.checkStates[e](this.state)){this.currentAnimation!==i?!this.followThroughs[this.currentAnimation]&&(!this.forcePlaythrough||this.animationFinished||this.lastState>=+e)?(this.currentAnimation=i,this.lastState=+e,this.animationFinished=!1,t?this.playAnimation(this.currentAnimation):this.stopAnimation(this.currentAnimation)):(this.waitingAnimation=i,this.waitingState=+e):this.waitingAnimation&&!this.followThroughs[this.currentAnimation]&&(this.waitingAnimation=!1);break}this.stateChange=!1}}},methods:{toJSON:function(){return null},destroy:function(){this.checkStates.recycle(),this.followThroughs=null,this.state=null}},publicMethods:{}})}(),function(){"use strict";var t=include("platypus.Vector");platypus.createComponentClass({id:"AIChaser",properties:{accelerate:!1,chasing:!0},publicProperties:{speed:.3},initialize:function(){this.target=this.owner.target||null,this.offset=t.setUp(0,0),this.state=this.owner.state,this.state.set("chasing",!1)},events:{load:function(){this.owner.addMover?this.direction=this.owner.addMover({vector:[this.speed,0,0],event:"chase",accelerator:this.accelerate}).vector:platypus.debug.warn('The "AIChaser" component requires a "Mover" component to function correctly.')},"handle-ai":function(){var e=null,i=!1;this.target&&this.chasing&&((e=t.setUp(this.offset).add(this.target.position).subtractVector(this.owner.position)).magnitude(2)&&(i=!0,this.direction.setVector(e).normalize().multiply(this.speed)),e.recycle()),i!==this.state.get("chasing")&&(this.state.set("chasing",i),this.owner.triggerEvent("chase",i))},"set-target":function(t){this.target=t,this.offset.x=0,this.offset.y=0},"set-target-offset":function(t){this.offset.x=t.x,this.offset.y=t.y},"start-chasing":function(t){t&&(this.target=t),this.chasing=!0},"stop-chasing":function(){this.chasing=!1}},methods:{destroy:function(){this.target=null,this.offset.recycle(),this.state=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"AIPacer",properties:{movement:"both",direction:null},initialize:function(){this.lastDirection="",this.currentDirection=this.direction||("horizontal"===this.movement?"left":"up")},events:{"handle-ai":function(){this.currentDirection!==this.lastDirection&&(this.lastDirection=this.currentDirection,this.owner.triggerEvent("stop"),this.owner.triggerEvent("go-"+this.currentDirection))},"turn-around":function(t){"both"!==this.movement&&"horizontal"!==this.movement||(t.x>0?this.currentDirection="left":t.x<0&&(this.currentDirection="right")),"both"!==this.movement&&"vertical"!==this.movement||(t.y>0?this.currentDirection="up":t.y<0&&(this.currentDirection="down"))}}})}(),function(){"use strict";var t=include("platypus.Data"),e=include("platypus.StateMap"),i={interrupt:createjs.Sound.INTERRUPT_ANY,delay:0,offset:0,loop:0,volume:1,pan:0,mute:!1,paused:!1},n=function(e){var n="",r=null;return"string"==typeof e?(n=e,r={}):(n=e.sound,r={interrupt:e.interrupt,delay:e.delay,offset:e.offset,loop:e.loop,volume:e.volume,pan:e.pan,startTime:e.startTime,duration:e.duration,mute:e.mute,paused:e.paused}),function(e){var s=null;e=e||r,(s=t.setUp("interrupt",e.interrupt||r.interrupt||i.interrupt,"delay",e.delay||r.delay||i.delay,"loop",e.loop||r.loop||i.loop,"offset",e.offset||r.offset||i.offset,"volume",void 0!==e.volume?e.volume:void 0!==r.volume?r.volume:i.volume,"pan",e.pan||r.pan||i.pan,"mute",e.mute||r.mute||i.mute,"paused",e.paused||r.paused||i.paused)).complete=function(t){t.audio&&!this.owner.destroyed&&(this.removeClip(t.audio),this.owner.triggerEvent("clip-complete")),t.recycle()}.bind(this,s),s.audio=this.player.play(n,s),s.audio&&(s.audio.soundId=n,this.activeAudioClips.push(s.audio))}};platypus.createComponentClass({id:"AudioSFX",properties:{audioMap:null,forcePlayThrough:!0,eventBased:!0,stateBased:!1},initialize:function(t){var e="",i=null,r=null;if(this.activeAudioClips=Array.setUp(),this.state=this.owner.state,this.stateChange=!1,this.player=platypus.game.app.sound,t.audioMap)for(e in this.stateBased&&(this.checkStates=Array.setUp()),t.audioMap)t.audioMap.hasOwnProperty(e)&&(r=t.audioMap[e],i=n(r),r.sound&&(r=r.sound),this.eventBased&&this.addEventListener(e,i),this.stateBased&&this.addStateCheck(e,r,i));this.paused=!1},events:{"handle-render":function(){var t=0,e=null,i=this.state;if(!this.paused&&this.stateBased&&this.stateChange){for(t=(e=this.checkStates).length;t--;)e[t].check(i);this.stateChange=!1}},"state-changed":function(){this.stateChange=!0},"toggle-mute":function(t){this.handleClip(t,function(t){t&&(t.unmuted?(t.volume=t.unmuted,delete t.unmuted):(t.unmuted=t.volume,t.volume=0))})},"stop-audio":function(t){t?"string"==typeof t?this.stopAudio(t):this.stopAudio(t.audioId||!1,t.playthrough||!1):this.stopAudio()},"mute-audio":function(t){this.handleClip(t,function(t){t&&(t.unmuted=t.volume,t.volume=0)})},"unmute-audio":function(t){this.handleClip(t,function(t){t&&(t.volume=t.unmuted,delete t.unmuted)})},"pause-audio":function(t){this.handleClip(t,function(t){t&&t.pause()})},"unpause-audio":function(t){this.handleClip(t,function(t){t&&t.unpause()})},"set-pan":function(t,e){var i=e||"",n=function(t,e){e&&(e.pan=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))},"set-volume":function(t,e){var i=e||"",n=function(t,e){e&&(e.volume=t)};e?this.handleClip(i,n.bind(null,t)):this.getAllClips(n.bind(null,t))}},methods:{handleClip:function(t,e){"string"==typeof t?this.getClipById(t,e):this.getAllClips(e)},getClipById:function(t,e){var i=0,n=this.activeAudioClips;for(i=0;i<n.length;i++)if(n[i].soundId===t)return e&&e(n[i]),n[i];return e&&e(null),null},getAllClips:function(t){var e=0,i=this.activeAudioClips;if(t)for(e=0;e<i.length;e++)t(i[e]);return i},stopAudio:function(t,e){var i=this.activeAudioClips,n=function(t){this.stopAudioInstance(t.currentTarget)}.bind(this),r=i.length;if(t)for(;r--;)i[r].soundId===t&&(i[r].playthrough||e?i[r].addEventListener("loop",n):(i[r].stop(),i.greenSplice(r)));else{for(;r--;)e||i[r].playthrough?i[r].addEventListener("loop",n):i[r].stop();i.length=0}},stopAudioInstance:function(t){var e=this.activeAudioClips,i=e?e.indexOf(t):-1;i>=0&&e.greenSplice(i),t.stop()},removeClip:function(t){var e=this.activeAudioClips.indexOf(t);e>=0&&this.activeAudioClips.greenSplice(e)},addStateCheck:function(i,n,r){var s=e.setUp(i),o=t.setUp("states",s,"playing",!1);o.check=function(t,e,i,n){var r=n.includes(t.states);r!==t.playing&&(r?i():this.stopAudio(e,this.forcePlaythrough),t.playing=r)}.bind(this,o,n,r.bind(this)),this.checkStates.push(o)},destroy:function(){var t=this.checkStates,e=null,i=0;if(this.stopAudio(),this.activeAudioClips.recycle(),this.activeAudioClips=null,this.state=null,t){for(i=t.length;i--;)(e=t[i]).states.recycle(),e.recycle();t.recycle(),this.checkStates=null}}}})}(),function(){"use strict";var t=include("platypus.Data"),e=function(t,e){return t.time-e.time},i=function(i,n){var r=0;for(r=0;r<i.length;r++)n.push(t.setUp("event",i[r].event,"time",i[r].time||0,"message",i[r].message));return r&&n.sort(e),n},n=function(i,n,r){var s=0,o=r.getElapsed();for(s=0;s<i.length;s++)n.push(t.setUp("event",i[s].event,"time",(i[s].time||0)+o,"message",i[s].message||null));s&&n.sort(e)},r=function(t,e,i){var r=0,s=Array.setUp();for(r=0;r<t.length;r++)t[r].sound?(t[r].events&&s.push(n.bind(this,t[r].events,e,i)),s.push(t[r].sound)):s.push(t[r]);return s},s=function(t,e){this.playingAudio=!1,this.player.unloadSound(),this.owner.destroyed||(this.checkTimeEvents(!0),this.owner.triggerEvent("sequence-complete")),e.recycle()},o=function(t,e){var n=null,o=Array.setUp(),a=this.player;"string"==typeof t?n=Array.setUp(t):Array.isArray(t)?n=r(t,o,a):(t.events&&i(t.events,o),n=Array.isArray(t.sound)?r(t.sound,o,a):Array.setUp(t.sound)),e&&e.events&&i(e.events,o),a.play(n,s.bind(this,!0,n),s.bind(this,!1,n)),this.eventList.recycle(),this.eventList=o,this.playingAudio=!0};platypus.createComponentClass({id:"AudioVO",properties:{audioMap:null},initialize:function(){var t="";if(this.eventList=Array.setUp(),this.playingAudio=!1,this.player=platypus.game.app.voPlayer,this.player.trackSound=platypus.supports.iOS,this.audioMap)for(t in this.audioMap)this.audioMap.hasOwnProperty(t)&&this.addEventListener(t,o.bind(this,this.audioMap[t]));this.paused=!1},events:{"handle-render":function(){this.paused||this.checkTimeEvents(!1)},"stop-audio":function(){this.player.stop(),this.player.voList=[]}},methods:{checkTimeEvents:function(t){var e=null,i=this.eventList,n=0,r=this.owner;if(i&&i.length)for(n=this.player.getElapsed();i.length&&(t||i[0].time<=n);)e=i.greenSplice(0),r.trigger(e.event,e.message),e.recycle()},destroy:function(){this.playingAudio&&(this.player.stop(),this.player.voList=[]),this.eventList.recycle()}}})}(),function(){"use strict";var t=window.devicePixelRatio||1,e=include("platypus.AABB"),i=include("platypus.Data"),n=include("platypus.Vector"),r=function(t,i,n,r){var s=e.setUp(r.x+i,r.y+n,r.width,r.height),o=t.x,a=t.y;return s.top<t.top?a-=t.top-s.top:s.bottom>t.bottom&&(a+=t.bottom-s.bottom),s.left<t.left?o-=t.left-s.left:s.right>t.right&&(o+=t.right-s.right),s.recycle(),this.move(o,a,0)},s=function(){return!1},o=function(t){return t.clientX?t.clientX:t.touches&&t.touches[0]&&t.touches[0].clientX?t.touches[0].clientX:0},a=function(t){return t.clientY?t.clientY:t.touches&&t.touches[0]&&t.touches[0].clientY?t.touches[0].clientY:0};platypus.createComponentClass({id:"Camera",properties:{width:0,height:0,mode:"static",overflow:!1,stretch:!1,threshold:1,rotate:!1,x:0,y:0},publicProperties:{canvas:null,transitionX:400,transitionY:600,transitionAngle:600},initialize:function(t){var n=e.setUp(this.x,this.y,this.width,this.height),r=i.setUp("viewport",n,"orientation",t.orientation||0);this.viewport=e.setUp(0,0,0,0),this.worldCamera=r,this.worldDimensions=e.setUp(),this.message=i.setUp("viewport",e.setUp(),"scaleX",0,"scaleY",0,"orientation",0,"stationary",!1,"world",this.worldDimensions),this.cameraLoadedMessage=i.setUp("viewport",this.message.viewport,"world",this.worldDimensions),this.worldIsLoaded=!1,this.following=null,this.state="static","pan"===this.mode&&(this.state="mouse-pan"),this.boundingBox=e.setUp(n.x,n.y,n.width/2,n.height/2),this.lastX=n.x,this.lastY=n.y,this.lastOrientation=r.orientation,this.forwardX=0,this.forwardY=0,this.forwardAngle=0,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=0,this.offsetY=0,this.offsetAngle=0,this.forwardFollower=i.setUp("x",this.lastX,"y",this.lastY,"orientation",this.lastOrientation),this.lastFollow=i.setUp("entity",null,"mode",null,"offsetX",0,"offsetY",0,"begin",0),this.xMagnitude=0,this.yMagnitude=0,this.xWaveLength=0,this.yWaveLength=0,this.xShakeTime=0,this.yShakeTime=0,this.shakeTime=0,this.shakeIncrementor=0,this.direction=!0,this.stationary=!1,this.viewportUpdate=!1,this.owner.container?this.parentContainer=this.owner.container:this.owner.stage?(this.canvas=this.canvas||platypus.game.app.display.canvas,this.parentContainer=this.owner.stage,this.owner.width=this.canvas.width,this.owner.height=this.canvas.height):platypus.debug.warn("Camera: There appears to be no Container on this entity for the camera to display."),this.container=new PIXI.Container,this.container.visible=!1,this.parentContainer.addChild(this.container),this.movedCamera=!1},events:{load:function(){this.resize()},"render-world":function(t){this.world=t.world,this.container.addChild(this.world)},"child-entity-added":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-loaded",this.cameraLoadedMessage)},"child-entity-updated":function(t){this.viewportUpdate=!0,this.worldIsLoaded&&t.triggerEvent("camera-update",this.message)},"world-loaded":function(t){this.message.viewport.set(this.worldCamera.viewport),this.worldDimensions.set(t.world),this.worldIsLoaded=!0,t.camera&&this.follow(t.camera),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-loaded",this.cameraLoadedMessage),this.updateMovementMethods()},pointerdown:function(t){var e=this.worldCamera.viewport;"mouse-pan"===this.state&&(this.mouseVector||(this.mouseVector=n.setUp(),this.mouseWorldOrigin=n.setUp()),this.mouse=this.mouseVector,this.mouse.x=o(t.event),this.mouse.y=a(t.event),this.mouseWorldOrigin.x=e.x,this.mouseWorldOrigin.y=e.y,t.pixiEvent.stopPropagation())},pressmove:function(e){this.mouse&&this.move(this.mouseWorldOrigin.x+(this.mouse.x-o(e.event))*t/this.world.transform.worldTransform.a,this.mouseWorldOrigin.y+(this.mouse.y-a(e.event))*t/this.world.transform.worldTransform.d)&&(this.viewportUpdate=!0,this.movedCamera=!0,e.pixiEvent.stopPropagation())},pressup:function(t){this.mouse&&(this.mouse=null,this.movedCamera&&(this.movedCamera=!1,t.pixiEvent.stopPropagation()))},tick:function(t){var e=this.message,i=e.viewport,n=this.worldCamera;"following"===this.state&&this.followingFunction(this.following,t.delta)&&(this.viewportUpdate=!0),this.canvas&&(this.owner.width=this.canvas.width,this.owner.height=this.canvas.height),this.owner.width===this.lastWidth&&this.owner.height===this.lastHeight||(this.resize(),this.lastWidth=this.owner.width,this.lastHeight=this.owner.height),this.viewportUpdate?(this.viewportUpdate=!1,this.stationary=!1,e.stationary=!1,i.set(n.viewport),this.shakeIncrementor<this.shakeTime&&(this.viewportUpdate=!0,this.shakeIncrementor+=t.delta,this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime),this.shakeIncrementor<this.xShakeTime&&i.moveX(i.x+Math.sin(this.shakeIncrementor/this.xWaveLength*(2*Math.PI))*this.xMagnitude),this.shakeIncrementor<this.yShakeTime&&i.moveY(i.y+Math.sin(this.shakeIncrementor/this.yWaveLength*(2*Math.PI))*this.yMagnitude)),e.scaleX=this.windowPerWorldUnitWidth,e.scaleY=this.windowPerWorldUnitHeight,e.orientation=n.orientation,this.world.setTransform(-i.x,-i.y,1,1,0),this.container.setTransform(i.halfWidth*e.scaleX,i.halfHeight*e.scaleY,e.scaleX,e.scaleY,e.orientation),this.container.visible=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)):this.stationary||(this.stationary=!0,e.stationary=!0,this.owner.triggerEvent("camera-update",e),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",e)),this.lastFollow.begin&&this.lastFollow.begin<Date.now()&&this.follow(this.lastFollow)},"resize-camera":function(t){this.width=t.width,this.height=t.height,this.resize()},relocate:function(t){var e=null,i=this.worldCamera.viewport;t.time&&window.createjs&&createjs.Tween?(e=n.setUp(i.x,i.y),createjs.Tween.get(e).to({x:t.x,y:t.y},t.time,t.ease).on("change",function(t){this.move(t.x,t.y)&&(this.viewportUpdate=!0)}.bind(this,e)).call(function(){this.recycle()}.bind(e))):this.move(t.x,t.y)&&(this.viewportUpdate=!0)},follow:function(t){this.follow(t)},shake:function(t){var e=t||{},i=e.xMagnitude||0,n=e.yMagnitude||0,r=e.xFrequency||0,s=e.yFrequency||0,o=e.time||0;this.viewportUpdate=!0,this.shakeIncrementor=0,this.xMagnitude=i,this.yMagnitude=n,0===r?(this.xWaveLength=1,this.xShakeTime=0):(this.xWaveLength=1e3/r,this.xShakeTime=Math.ceil(o/this.xWaveLength)*this.xWaveLength),0===s?(this.yWaveLength=1,this.yShakeTime=0):(this.yWaveLength=1e3/s,this.yShakeTime=Math.ceil(o/this.yWaveLength)*this.yWaveLength),this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{follow:function(t){switch(t.time?(this.lastFollow.begin||(this.lastFollow.entity=this.following,this.lastFollow.mode=this.mode,this.lastFollow.offsetX=this.offsetX,this.lastFollow.offsetY=this.offsetY),this.lastFollow.begin=Date.now()+t.time):this.lastFollow.begin&&(this.lastFollow.begin=0),this.mode=t.mode,t.mode){case"locked":this.state="following",this.following=t.entity,this.followingFunction=this.lockedFollow,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0;break;case"forward":this.state="following",this.followFocused=!1,this.following=t.entity,this.lastX=t.entity.x-t.offsetX||0,this.lastY=t.entity.y-t.offsetY||0,this.lastOrientation=t.entity.orientation||0,this.forwardX=t.movementX||.1*this.transitionX,this.forwardY=t.movementY||.1*this.transitionY,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.followingFunction=this.forwardFollow;break;case"bounding":this.state="following",this.following=t.entity,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.offsetAngle=t.offsetAngle||0,this.boundingBox.setAll(t.x,t.y,t.width,t.height),this.followingFunction=this.boundingFollow;break;case"anchor-bound":this.state="following",this.following=t.entity,this.followingFunction=r.bind(this,t.anchorAABB,t.offsetX||0,t.offsetY||0);break;case"pan":this.state="mouse-pan",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0);break;default:this.state="static",this.following=null,this.followingFunction=null,t&&"number"==typeof t.x&&"number"==typeof t.y&&(this.move(t.x,t.y,t.orientation||0),this.viewportUpdate=!0)}t.begin&&(t.begin=0)},move:function(t,e,i){var n=this.moveX(t);return n=this.moveY(e)||n,this.rotate&&(n=this.reorient(i||0)||n),n},moveX:s,moveY:s,reorient:function(t){var e=this.worldCamera;return Math.abs(e.orientation-t)>1e-4&&(e.orientation=t,!0)},lockedFollow:function(){var t=Math.min,e=function(t,e,i){return i*e+(1-i)*t},i=function(e,i){return e?t(i/e,1):1};return function(t,n){var r=this.worldCamera,s=r.viewport,o=e(s.x,t.x+this.offsetX,i(this.transitionX,n)),a=e(s.y,t.y+this.offsetY,i(this.transitionY,n));return this.rotate?this.move(o,a,e(r.orientation,-(t.orientation||0),i(this.transitionAngle,n))):this.move(o,a,0)}}(),forwardFollow:function(t,e){var i=1-.9,n=this.forwardFollower,r=!1,s=15/e,o=this.worldCamera,a=o.viewport,h=t.x+this.offsetX,l=t.y+this.offsetY,u=(t.orientation||0)+this.offsetAngle;return this.followFocused&&this.lastX===h&&this.lastY===l?this.lockedFollow(n,e):(this.averageOffsetX*=.9,this.averageOffsetY*=.9,this.averageOffsetX+=i*(h-this.lastX)*s,this.averageOffsetY+=i*(l-this.lastY)*s,Math.abs(this.averageOffsetX)>a.width/(2*this.forwardX)&&(this.averageOffsetX=0),Math.abs(this.averageOffsetY)>a.height/(2*this.forwardY)&&(this.averageOffsetY=0),this.rotate&&(this.averageOffsetAngle*=.9,this.averageOffsetAngle+=i*(u-this.lastOrientation)*s,Math.abs(this.averageOffsetAngle)>o.orientation/(2*this.forwardAngle)&&(this.averageOffsetAngle=0)),n.x=this.averageOffsetX*this.forwardX+h,n.y=this.averageOffsetY*this.forwardY+l,n.orientation=this.averageOffsetAngle*this.forwardAngle+u,this.lastX=h,this.lastY=l,this.lastOrientation=u,r=this.lockedFollow(n,e),this.followFocused||r||(this.followFocused=!0),r)},boundingFollow:function(t,e){var i=0,n=0,r=this.transitionX?Math.min(e/this.transitionX,1):1,s=1-r,o=this.transitionY?Math.min(e/this.transitionY,1):1,a=1-o,h=this.worldCamera.viewport;return this.boundingBox.move(h.x,h.y),t.x>this.boundingBox.right?i=t.x-this.boundingBox.halfWidth:t.x<this.boundingBox.left&&(i=t.x+this.boundingBox.halfWidth),t.y>this.boundingBox.bottom?n=t.y-this.boundingBox.halfHeight:t.y<this.boundingBox.top&&(n=t.y+this.boundingBox.halfHeight),0!==i&&(i=this.moveX(r*i+s*h.x)),0!==n&&(n=this.moveY(o*n+a*h.y)),i||n},resize:function(){var t=this.width/this.height,e=this.owner.width/this.owner.height,i=this.worldCamera.viewport;this.viewport.setAll(this.owner.width/2,this.owner.height/2,this.owner.width,this.owner.height),this.stretch||(e>t?this.overflow?i.resize(this.height*e,this.height):this.viewport.resize(this.viewport.height*t,this.viewport.height):this.overflow?i.resize(this.width,this.width/e):this.viewport.resize(this.viewport.width,this.viewport.width/t)),this.worldPerWindowUnitWidth=i.width/this.viewport.width,this.worldPerWindowUnitHeight=i.height/this.viewport.height,this.windowPerWorldUnitWidth=this.viewport.width/i.width,this.windowPerWorldUnitHeight=this.viewport.height/i.height,this.container.setTransform(this.viewport.x-this.viewport.halfWidth,this.viewport.y-this.viewport.halfHeight),this.viewportUpdate=!0,this.updateMovementMethods()},updateMovementMethods:function(){var t=s,e=function(){var e=this.worldDimensions;return this.worldCamera.viewport.moveX(e.width/2+e.left),this.moveX=t,!0},i=function(){var e=this.worldDimensions;return this.worldCamera.viewport.moveY(e.height/2+e.top),this.moveY=t,!0},n=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.width,r=i.left;return Math.abs(e.x-t)>this.threshold&&(t+e.halfWidth>n+r?e.moveX(n-e.halfWidth+r):t<e.halfWidth+r?e.moveX(e.halfWidth+r):e.moveX(t),!0)},r=function(t){var e=this.worldCamera.viewport,i=this.worldDimensions,n=i.height,r=i.top;return Math.abs(e.y-t)>this.threshold&&(t+e.halfHeight>n+r?e.moveY(n-e.halfHeight+r):t<e.halfHeight+r?e.moveY(e.halfHeight+r):e.moveY(t),!0)},o=function(t){var e=this.worldCamera.viewport;return Math.abs(e.x-t)>this.threshold&&(e.moveX(t),!0)},a=function(t){var e=this.worldCamera.viewport;return Math.abs(e.y-t)>this.threshold&&(e.moveY(t),!0)};return function(){var t=this.threshold,s=this.worldCamera.viewport,h=this.worldDimensions,l=h.width,u=h.height;l?l<s.width?this.moveX=e:this.moveX=n:this.moveX=o,u?u<s.height?this.moveY=i:this.moveY=r:this.moveY=a,this.threshold=-1,this.moveX(s.x),this.moveY(s.y),this.threshold=t}}(),destroy:function(){this.parentContainer.removeChild(this.container),this.parentContainer=null,this.container=null,this.mouseVector&&(this.mouseVector.recycle(),this.mouseWorldOrigin.recycle()),this.boundingBox.recycle(),this.viewport.recycle(),this.worldCamera.viewport.recycle(),this.worldCamera.recycle(),this.message.viewport.recycle(),this.message.recycle(),this.cameraLoadedMessage.recycle(),this.worldDimensions.recycle(),this.forwardFollower.recycle(),this.lastFollow.recycle()}},publicMethods:{isOnCanvas:function(t){var e=this.canvas;return!t||!(t.x+t.width<0||t.x>e.width||t.y+t.height<0||t.y>e.height)},windowToWorld:function(t,e,i){var r=i||n.setUp();return r.x=t.x*this.worldPerWindowUnitWidth,r.y=t.y*this.worldPerWindowUnitHeight,!1!==e&&(r.x+=this.worldCamera.viewport.left,r.y+=this.worldCamera.viewport.top),r},worldToWindow:function(t,e,i){var r=i||n.setUp();return r.x=t.x*this.windowPerWorldUnitWidth,r.y=t.y*this.windowPerWorldUnitHeight,!1!==e&&(r.x+=this.viewport.x,r.y+=this.viewport.y),r}}})}(),function(){"use strict";var t=include("platypus.Data");platypus.createComponentClass({id:"CameraFollowMe",properties:{camera:{},mode:"forward",pause:!1},initialize:function(){this.pauseGame=this.pause&&this.camera.time?{time:this.camera.time}:null,this.camera=t.setUp("entity",this.owner,"mode",this.camera.mode||this.mode,"top",this.camera.top,"left",this.camera.left,"offsetX",this.camera.offsetX,"offsetY",this.camera.offsetY,"width",this.camera.width,"height",this.camera.height,"time",this.camera.time)},events:{"follow-me":function(e){var i=null;i=e?t.setUp("entity",this.owner,"mode",e.mode||this.camera.mode,"top",e.top||this.camera.top,"left",e.left||this.camera.left,"offsetX",e.offsetX||this.camera.offsetX,"offsetY",e.offsetY||this.camera.offsetY,"width",e.width||this.camera.width,"height",e.height||this.camera.height,"time",e.time||this.camera.time):t.setUp(this.camera),this.pauseGame&&(this.owner.parent.triggerEvent("pause-logic",this.pauseGame),this.owner.parent.triggerEvent("pause-render",this.pauseGame)),this.owner.parent.triggerEvent("follow",i),i.recycle()}},methods:{destroy:function(){this.camera.recycle()}}})}(),function(){"use strict";var t,e=include("platypus.AABB"),i=include("platypus.CollisionShape"),n=include("platypus.Data"),r=include("platypus.DataMap"),s=include("platypus.Vector"),o=function(t,e,i){return"string"==typeof e?function(t,e,i,n){n.myType===e&&n.hitType===i&&this.owner.triggerEvent(t,n)}.bind(t,e,t.collisionType,i):Array.isArray(e)?function(t,e,i,n){var r=0;if(n.myType===e&&n.hitType===i)for(r=0;r<t.length;r++)this.owner.triggerEvent(t[r],n)}.bind(t,e,t.collisionType,i):function(t,e,i,n){var r=n.x,s=n.y;!n.entity||r||s||(r=n.entity.x-this.owner.x,s=n.entity.y-this.owner.y),n.myType===e&&n.hitType===i&&(s>0&&t.bottom?this.owner.trigger(t.bottom,n):s<0&&t.top&&this.owner.trigger(t.top,n),r>0&&t.right?this.owner.trigger(t.right,n):r<0&&t.left&&this.owner.trigger(t.left,n),t.all&&this.owner.trigger(t.all,n))}.bind(t,e,t.collisionType,i)},a=(t=function(){var t=function(t,e,i){var n=0,r=e.stuck;r&&(n=t.magnitude(),e.thatShape.owner&&Math.abs(r)>1&&(r*=.05),(!n||n>Math.abs(r))&&(e.vector.x&&(t.x=r,t.y=0),e.vector.y&&(t.x=0,t.y=r),i.stuckWith&&i.stuckWith.recycle(),i.stuckWith=s.setUp(e.thatShape.x,e.thatShape.y)))},e={position:null,unstick:null};return function(i,n){var r=n.xData[0],o=n.yData[0],a=e,h=null;r&&(h=s.setUp(0,0,0),t(h,r,this)),o&&(h=h||s.setUp(0,0,0),t(h,o,this)),a.position=i,a.unstick=h,this.triggerEvent("relocate-entity",a),h&&h.recycle()}}(),function(i,s){var o=s.collisionFunctions;o||(o=s.collisionFunctions=r.setUp(),s.aabb=e.setUp(),s.getAABB=function(t,e,i){var n=e.keys,r=n.length,s=null;if(i)return(s=e.get(i))?s.getAABB():null;for(t.reset();r--;)t.include(e.get(n[r]).getAABB());return t}.bind(s,s.aabb,o),s.getPreviousAABB=function(t,e){var i=t.get(e);return i?i.getPreviousAABB():null}.bind(s,o),s.getShapes=function(t,e){var i=t.get(e);return i?i.getShapes():null}.bind(s,o),s.getPrevShapes=function(t,e){var i=t.get(e);return i?i.getPrevShapes():null}.bind(s,o),s.prepareCollision=function(t,e,i){for(var n=t.keys,r=n.length;r--;)t.get(n[r]).prepareCollision(e,i)}.bind(s,o),s.relocateEntity=t.bind(s),s.movePreviousX=function(t,e){for(var i=t.keys,n=i.length;n--;)t.get(i[n]).movePreviousX(e)}.bind(s,o),s.getCollisionTypes=function(){return this.collisionTypes}.bind(s),s.getSolidCollisions=function(){return this.solidCollisionMap}.bind(s)),o.set(i.collisionType,n.setUp("getAABB",function(){return this.getAABB()}.bind(i),"getPreviousAABB",function(){return this.getPreviousAABB()}.bind(i),"getShapes",function(){return this.getShapes()}.bind(i),"getPrevShapes",function(){return this.getPrevShapes()}.bind(i),"prepareCollision",function(t,e){this.prepareCollision(t,e)}.bind(i),"movePreviousX",function(t){this.movePreviousX(t)}.bind(i)))});platypus.createComponentClass({id:"CollisionBasic",properties:{collisionType:"none",shapeType:"rectangle",ignoreOrientation:!1,regX:null,regY:null,width:0,height:0,radius:0,softCollisions:null,solidCollisions:null,margin:0,shapes:null},publicProperties:{immobile:!1,bullet:!1,jumpThrough:!1},initialize:function(t){var n=null,h=0,l="",u=null,c=this.regX,d=this.regY,p=this.width,f=this.height,g=this.radius,v=0,m=0,y=0,_=0;for("number"==typeof this.margin?(v=this.margin,m=this.margin,y=this.margin,_=this.margin):(v=this.margin.left||0,m=this.margin.right||0,y=this.margin.top||0,_=this.margin.bottom||0),null===c&&(c=this.regX=p/2),null===d&&(d=this.regY=f/2),s.assign(this.owner,"position","x","y","z"),s.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.aabb=e.setUp(),this.prevAABB=e.setUp(),this.shapes?u=this.shapes:"circle"===this.shapeType?(g=g||((p||0)+(f||0))/4,u=[{regX:(isNaN(c)?g:c)-(m-v)/2,regY:(isNaN(d)?g:d)-(_-y)/2,radius:g,type:this.shapeType}]):u=[{regX:(isNaN(c)?(p||0)/2:c)+v,regY:(isNaN(d)?(f||0)/2:d)+y,points:t.points,width:(p||0)+v+m,height:(f||0)+y+_,type:this.shapeType}],this.owner.collisionTypes=this.owner.collisionTypes||Array.setUp(),this.owner.collisionTypes.push(this.collisionType),this.shapes=Array.setUp(),this.prevShapes=Array.setUp(),this.entities=null,h=0;h<u.length;h++)this.shapes.push(i.setUp(this.owner,u[h],this.collisionType)),this.prevShapes.push(i.setUp(this.owner,u[h],this.collisionType)),this.prevAABB.include(this.prevShapes[h].aABB),this.aabb.include(this.shapes[h].aABB);if(a(this,this.owner),this.owner.solidCollisionMap=this.owner.solidCollisionMap||r.setUp(),n=this.owner.solidCollisionMap.set(this.collisionType,Array.setUp()),this.solidCollisions)for(l in this.solidCollisions)this.solidCollisions.hasOwnProperty(l)&&(n.push(l),this.solidCollisions[l]&&this.addEventListener("hit-by-"+l,o(this,this.solidCollisions[l],"solid")));if(this.owner.softCollisionMap=this.owner.softCollisionMap||r.setUp(),n=this.owner.softCollisionMap.set(this.collisionType,Array.setUp()),this.softCollisions)for(l in this.softCollisions)this.softCollisions.hasOwnProperty(l)&&(n.push(l),this.softCollisions[l]&&this.addEventListener("hit-by-"+l,o(this,this.softCollisions[l],"soft")));this.active=!0,this.stuck=!1},events:{"collide-on":function(t){var e=this.owner,i=this.collisionType,n=e.collisionTypes;this.active||"string"==typeof t&&t!==i||(-1===n.indexOf(i)&&n.push(i),e.parent.triggerEvent("add-collision-entity",e),this.active=!0)},"collide-off":function(t){var e=0,i=this.owner,n=i.parent,r=this.collisionType,s=i.collisionTypes;!this.active||"string"==typeof t&&t!==r||(n.triggerEvent("remove-collision-entity",i),(e=s.indexOf(r))>=0&&s.greenSplice(e),this.active=!1,s.length&&n.triggerEvent("add-collision-entity",i))},"relocate-entity":function(t){var e,i,n=t.unstick,r=0,s=0,o=this.aabb,a=this.owner,h=null,l=this.shapes;for(n&&(r=n.magnitude()),this.move&&(this.move.recycle(),this.move=null),t.relative?a.position.setVector(a.previousPosition).add(t.position):a.position.setVector(t.position),this.stuck&&(r>0?a.position.add(n):this.stuck=!1),e=a.x,i=a.y,o.reset(),s=l.length;s--;)(h=l[s]).update(e,i),o.include(h.aABB);a.previousPosition.setVector(a.position),r>0&&(this.stuck||(this.stuck=!0),this.move=a.stuckWith.copy().add(-e,-i).normalize())},"handle-logic":function(){this.move&&this.owner.position.add(this.move)},"orientation-updated":function(t){var e=0;if(!this.ignoreOrientation)for(e=0;e<this.shapes.length;e++)this.shapes[e].multiply(t)}},methods:{getAABB:function(){return this.aabb},getPreviousAABB:function(){return this.prevAABB},getShapes:function(){return this.shapes},getPrevShapes:function(){return this.prevShapes},prepareCollision:function(t,e){var i=0,n=null,r=this.shapes,s=this.prevShapes,o=this.aabb;for(this.owner.x=t,this.owner.y=e,this.prevShapes=r,this.shapes=s,this.prevAABB.set(o),o.reset(),i=s.length;i--;)(n=s[i]).update(t,e),o.include(n.aABB)},movePreviousX:function(t){var e=0;for(this.prevAABB.moveX(t),e=0;e<this.prevShapes.length;e++)this.prevShapes[e].setXWithEntityX(t)},destroy:function(){var t=this.owner.collisionFunctions,e=this.collisionType,i=this.owner.collisionTypes.indexOf(e),n=this.owner;for(n.parent.triggerEvent("remove-collision-entity",n),this.aabb.recycle(),delete this.aabb,this.prevAABB.recycle(),delete this.prevAABB,i>=0&&n.collisionTypes.greenSplice(i),n.solidCollisionMap.has(e)&&n.solidCollisionMap.delete(e).recycle(),n.softCollisionMap.has(e)&&n.softCollisionMap.delete(e).recycle(),t.delete(e).recycle(),i=this.shapes.length;i--;)this.shapes[i].recycle(),this.prevShapes[i].recycle();this.shapes.recycle(),this.prevShapes.recycle(),delete this.shapes,delete this.prevShapes,delete this.entities,n.collisionTypes.length?n.parent.triggerEvent("add-collision-entity",n):(t.recycle(),n.collisionFunctions=null,n.solidCollisionMap.recycle(),n.solidCollisionMap=null,n.softCollisionMap.recycle(),n.softCollisionMap=null,n.aabb.recycle(),n.aabb=null)}}})}(),function(){"use strict";var t=function(t,e,i){this.state.get(t)&&this.trigger(e,i)},e=function(t,e,i){this.state.get(t)||this.trigger(e,i)};platypus.createComponentClass({id:"CollisionFilter",properties:{collisions:{},state:""},initialize:function(){var i="",n=this.collisions,r=this.state;if(n)if("!"===r[0])for(i in r=r.substring(1),n)n.hasOwnProperty(i)&&this.addEventListener(i,e.bind(this.owner,r,n[i]));else for(i in n)n.hasOwnProperty(i)&&this.addEventListener(i,t.bind(this.owner,r,n[i]))}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.DataMap"),i=include("platypus.Vector");platypus.createComponentClass({id:"CollisionGroup",initialize:function(){this.solidEntities=Array.setUp(),this.collisionTypes=Array.setUp(),this.shapes=Array.setUp(),this.prevShapes=Array.setUp(),this.terrain=null,this.aabb=t.setUp(this.owner.x,this.owner.y),this.prevAABB=t.setUp(this.owner.x,this.owner.y),this.filteredAABB=t.setUp(),i.assign(this.owner,"position","x","y","z"),i.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.collisionGroup=this.owner.collisionGroup={getAllEntities:function(){var t=0,e=0,i=null;for(t=0;t<this.solidEntities.length;t++)(i=this.solidEntities[t])!==this.owner&&i.collisionGroup?e+=i.collisionGroup.getAllEntities():e+=1;return e}.bind(this),getSize:function(){return this.solidEntities.length}.bind(this),getCollisionTypes:function(){return this.getCollisionTypes()}.bind(this),getSolidCollisions:function(){return this.getSolidCollisions()}.bind(this),getAABB:function(t){return this.getAABB(t)}.bind(this),getPreviousAABB:function(t){return this.getPreviousAABB(t)}.bind(this),getShapes:function(t){return this.getShapes(t)}.bind(this),getPrevShapes:function(t){return this.getPrevShapes(t)}.bind(this),prepareCollision:function(t,e){return this.prepareCollision(t,e)}.bind(this),relocateEntity:function(t,e){return this.relocateEntity(t,e)}.bind(this),movePreviousX:function(t){return this.movePreviousX(t)}.bind(this),getSolidEntities:function(){return this.solidEntities}.bind(this),jumpThrough:!1}},events:{"child-entity-added":function(t){this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"relocate-entity":function(){this.owner.previousPosition.setVector(this.owner.position),this.updateAABB()}},methods:{addCollisionEntity:function(t){var e=0,i=t.collisionTypes;if(i){for(e=i.length;e--;)t.solidCollisionMap.get(i[e]).length&&!t.immobile&&(this.solidEntities[this.solidEntities.length]=t);this.updateAABB()}},removeCollisionEntity:function(t){var e=0,i=0,n=t.collisionTypes;if(n){for(i=n.length;i--;)t.solidCollisionMap.get(n[i]).length&&(e=this.solidEntities.indexOf(t))>=0&&this.solidEntities.greenSplice(e);this.updateAABB()}},getCollisionTypes:function(){var t=null,e=this.collisionTypes,i=this.solidEntities,n=i.length;for(e.length=0;n--;)(t=i[n])!==this.owner&&t.collisionGroup&&(t=t.collisionGroup),e.union(t.getCollisionTypes());return e},getSolidCollisions:function(){var t=0,i="",n=null,r=null,s=e.setUp(),o=null,a=0,h=null,l=null,u=!1;for(t=0;t<this.solidEntities.length;t++){for(u=!1,(r=this.solidEntities[t])!==this.owner&&r.collisionGroup&&(r=r.collisionGroup,u=!0),a=(n=(o=r.getSolidCollisions()).keys).length;a--;)i=n[a],h=s.get(i),l=o.get(i),h||(h=s.set(i,Array.setUp())),h.union(l),u&&l.recycle();u&&o.recycle()}return s},getAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,s=this.solidEntities;if(t){for(i.reset(),e=s.length;e--;)(n=s[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getAABB(t))&&i.include(r);return i}return this.aabb},getPreviousAABB:function(t){var e=0,i=this.filteredAABB,n=null,r=null,s=this.solidEntities;if(t){for(i.reset(),e=s.length;e--;)(n=s[e])!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),(r=n.getPreviousAABB(t))&&i.include(r);return i}return this.prevAABB},updateAABB:function(){var t=this.aabb,e=this.solidEntities,i=null,n=e.length,r=this.owner;for(t.reset();n--;)i=e[n],t.include(i!==r&&i.getCollisionGroupAABB?i.getCollisionGroupAABB():i.getAABB())},getShapes:function(t){var e=0,i=null,n=this.shapes,r=null;for(n.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(r=i.getShapes(t))&&n.union(r);return n},getPrevShapes:function(t){var e=0,i=null,n=null,r=this.prevShapes;for(r.length=0,e=0;e<this.solidEntities.length;e++)(i=this.solidEntities[e])!==this.owner&&i.collisionGroup&&(i=i.collisionGroup),(n=i.getPrevShapes(t))&&r.union(n);return r},prepareCollision:function(t,e){var i=0,n=null,r=0,s=0;for(i=0;i<this.solidEntities.length;i++)(n=this.solidEntities[i]).saveDX=n.x-n.previousX,n.saveDY=n.y-n.previousY,r=n.saveOX=this.owner.previousX-n.previousX,s=n.saveOY=this.owner.previousY-n.previousY,n!==this.owner&&n.collisionGroup&&(n=n.collisionGroup),n.prepareCollision(t-r,e-s)},movePreviousX:function(t){var e=null,i=0,n=0;for(n=0;n<this.solidEntities.length;n++)i=(e=this.solidEntities[n]).saveOX,e!==this.owner&&e.collisionGroup&&(e=e.collisionGroup),e.movePreviousX(t-i)},relocateEntity:function(t,e){var n=null,r=null,s=0,o=null,a=this.owner,h=this.solidEntities,l=null;for(a.saveDX-=t.x-a.previousX,a.saveDY-=t.y-a.previousY,s=(o=e.xData).length;s--;)if(o[s].thisShape.owner===a){a.saveDX=0;break}for(s=(o=e.yData).length;s--;)if(o[s].thisShape.owner===a){a.saveDY=0;break}for(s=0;s<h.length;s++)(n=r=h[s])!==a&&n.collisionGroup&&(n=n.collisionGroup),l=i.setUp(t.x-r.saveOX,t.y-r.saveOY,n.z),n.relocateEntity(l,e),l.recycle(),r.x+=r.saveDX,r.y+=r.saveDY,r!==a&&(r.x+=a.saveDX,r.y+=a.saveDY)},destroy:function(){this.solidEntities.recycle(),this.collisionTypes.recycle(),this.shapes.recycle(),this.prevShapes.recycle(),this.aabb.recycle(),this.prevAABB.recycle(),this.filteredAABB.recycle()}},publicMethods:{getCollisionGroupAABB:function(){return this.getAABB()},getWorldEntities:function(){return this.owner.parent.getWorldEntities()},getWorldTerrain:function(){return this.owner.parent.getWorldTerrain()}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.CollisionShape"),i=include("platypus.Data"),n=536870912,r=2147483648,s=1073741824,o=268435455,a=function(){return this.collisionType},h=function(t){return this.collisionTypeMap[t&o]||this.collisionType},l=function(t){return 0===t?t:t^s^n},u=function(t){return 0===t?t:t^r^n},c=function(t){return 0===t?t:t^r},d=function(t){return 0===t?t:t^s},p=function(t){return 0===t?t:n&t?t^s^n:t^r^n},f=function(t){return 0===t?t:t^r^s},g=function(t){return 0===t?t:n&t?t^r^n:t^s^n},v=function(t,e,i,n,r){var s=0,o=0,a=Array.setUp();for(o=0;o<r;o++)for(a[o]=Array.setUp(),s=0;s<n;s++)a[o][s]=t[e+s][i+o];return a},m={diagonal:function(t,e,i,n,r){var s=v(t,e,i,n,r),o=l,a=0,h=0;for(a=0;a<n;a++)for(h=0;h<r;h++)t[e+a][i+h]=o(s[a][h]);return s.recycle(2),t},"diagonal-inverse":function(t,e,i,n,r){var s=v(t,e,i,n,r),o=u,a=0,h=0;for(a=0;a<n;a++)for(h=0;h<r;h++)t[e+n-a-1][i+r-h-1]=o(s[a][h]);return s.recycle(2),t},horizontal:function(t,e,i,n,r){var s=v(t,e,i,n,r),o=c,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+n-a-1][i+h]=o(s[h][a]);return s.recycle(2),t},vertical:function(t,e,i,n,r){var s=v(t,e,i,n,r),o=d,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+a][i+r-h-1]=o(s[h][a]);return s.recycle(2),t},"rotate-90":function(t,e,i,n,r){var s=v(t,e,i,n,r),o=p,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+r-h-1][i+a]=o(s[h][a]);return s.recycle(2),t},"rotate-180":function(t,e,i,n,r){var s=v(t,e,i,n,r),o=f,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+n-a-1][i+r-h-1]=o(s[h][a]);return s.recycle(2),t},"rotate-270":function(t,e,i,n,r){var s=v(t,e,i,n,r),o=g,a=0,h=0;for(h=0;h<r;h++)for(a=0;a<n;a++)t[e+h][i+n-a-1]=o(s[h][a]);return s.recycle(2),t},translate:function(t,e,i,n,r,s,o){var a=function(t,e,i,n,r){var s=0,o=0,a=Array.setUp();for(o=0;o<r;o++)for(a[o]=Array.setUp(),s=0;s<n;s++)a[o][s]=t[e+s][i+o],t[e+s][i+o]=-1;return a}(t,e,i,n,r),h=0,l=0;for(l=0;l<r;l++)for(h=0;h<n;h++)t[e+h+s][i+l+o]=a[l][h];return a.recycle(2),t}};platypus.createComponentClass({id:"CollisionTiles",properties:{collisionTypeMap:null,collisionType:"tiles",top:0,left:0},publicProperties:{collisionMap:[],tileWidth:10,tileHeight:10},initialize:function(){this.tileOffsetLeft=this.tileWidth/2+this.left,this.tileOffsetTop=this.tileHeight/2+this.top,this.columns=this.collisionMap.length,this.rows=this.collisionMap[0].length,this.shapeDefinition=i.setUp("x",0,"y",0,"type","rectangle","width",this.tileWidth,"height",this.tileHeight),this.storedTiles=Array.setUp(),this.serveTiles=Array.setUp(),this.storedTileIndex=0,this.aabb=t.setUp(),this.aabb.setBounds(this.left,this.top,this.tileWidth*this.columns+this.left,this.tileHeight*this.rows+this.top),this.collisionTypeMap?this.getType=h:this.getType=a},events:{transform:function(t){this.transform(t)},translate:function(t){this.translate(t)}},methods:{getShape:function(t,i,n){var r=this.storedTileIndex,s=null,o=this.storedTiles;return r===o.length?(s=e.setUp(null,this.shapeDefinition,n),o.push(s)):(s=o[r]).collisionType=n,s.update(t*this.tileWidth+this.tileOffsetLeft,i*this.tileHeight+this.tileOffsetTop),this.storedTileIndex+=1,s},addShape:function(t,e,i,a,h){var l=this.collisionMap[i][a],u=l&o,c=268435456,d=n,p=r,f=s;return l&&this.getType(u)===h&&((c&=l)?(f&=l,(d&=l)&&(p&=l)?e.left>=(i+1)*this.tileWidth+this.left&&t.push(this.getShape(i,a,h)):d?e.right<=i*this.tileWidth+this.left&&t.push(this.getShape(i,a,h)):f?e.top>=(a+1)*this.tileHeight+this.top&&t.push(this.getShape(i,a,h)):e.bottom<=a*this.tileHeight+this.top&&t.push(this.getShape(i,a,h))):t.push(this.getShape(i,a,h))),t},destroy:function(){var t=this.storedTiles,e=t.length;for(this.shapeDefinition.recycle(),delete this.shapeDefinition;e--;)t[e].recycle();t.recycle(),delete this.storedTiles,this.serveTiles.recycle(),delete this.serveTiles,this.aabb.recycle(),delete this.aabb}},publicMethods:{getAABB:function(){return this.aabb},isTile:function(t,e){return!(t<0||e<0||t>=this.columns||e>=this.rows||-1===this.collisionMap[t][e])},getTileShapes:function(t,e,i){var n=i||"tiles",r=this.left,s=this.top,o=this.tileHeight,a=this.tileWidth,h=Math.max(Math.floor((t.left-r)/a),0),l=Math.max(Math.floor((t.top-s)/o),0),u=Math.min(Math.ceil((t.right-r)/a),this.columns),c=Math.min(Math.ceil((t.bottom-s)/o),this.rows),d=0,p=0,f=this.serveTiles;for(f.length=0,this.storedTileIndex=0,d=h;d<u;d++)for(p=l;p<c;p++)this.addShape(f,e,d,p,n);return f},transform:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,s=e.height||this.columns,o=e.type||"horizontal";return m[o]?m[o](this.collisionMap,i,n,r,s):null},translate:function(t){var e=t||{},i=e.left||0,n=e.top||0,r=e.width||this.rows,s=e.height||this.columns,o=e.dx||0,a=e.dy||0;return m.translate(this.collisionMap,i,n,r,s,o,a)},getCollisionMatrix:function(t,e,i,n){return v(this.collisionMap,t,e,i,n)},setCollisionMatrix:function(t,e,i,n,r){return function(t,e,i,n,r,s){var o=0,a=0;for(a=0;a<s;a++)for(o=0;o<r;o++)t[i+o][n+a]=e[a][o];return t}(this.collisionMap,t,e,i,n,r)}}})}(),function(){"use strict";var t=function(t){this.switches.push(t)};platypus.createComponentClass({id:"ComponentSwitcher",properties:{componentMap:null},initialize:function(){var e="";if(this.switches=Array.setUp(),this.componentMap)for(e in this.componentMap)this.componentMap.hasOwnProperty(e)&&this.addEventListener(e,t.bind(this,e))},events:{"prepare-logic":function(){var t=0;if(this.switches.length){for(t=0;t<this.switches.length;t++)this.switchComponents(this.componentMap[this.switches[t]]);this.switches.length=0}}},methods:{switchComponents:function(t){var e=0,i=0,n=this.owner,r=n.components,s=t.remove,o=t.add;if(s)if(Array.isArray(s))for(e=0;e<s.length;e++)for(i=r.length-1;i>-1;i--)r[i].type===s[e]&&n.removeComponent(r[i]);else for(e=r.length-1;e>-1;e--)r[e].type===s&&n.removeComponent(r[e]);if(o)if(Array.isArray(o))for(e=0;e<o.length;e++)n.addComponent(new platypus.components[o[e].type](n,o[e]));else n.addComponent(new platypus.components[o.type](n,o));n.parent.triggerEvent("child-entity-updated",n),n.triggerEvent("add-remove-component-complete")},destroy:function(){this.switches.recycle()}},getAssetList:function(t,e,i){var n=t.componentMap||e.componentMap||i.componentMap,r="",s=0,o=null,a=Array.setUp(),h=null;for(r in n)if(n.hasOwnProperty(r))for(s=0;s<n[r].add.length;s++)(o=platypus.components[n[r].add[s].type])&&(h=o.getAssetList(n[r].add[s],e,i),a.union(h),h.recycle());return a}})}(),function(){"use strict";var t=include("platypus.Data");platypus.createComponentClass({id:"Counter",publicProperties:{total:0},initialize:function(){this.count=0,this.lastTotal=0,this.lastCount=0,this.message=t.setUp("text","")},events:{"handle-logic":function(){var t=!1,e=this.message;this.total!==this.lastTotal&&(this.lastTotal=this.total,t=!0),this.count!==this.lastCount&&(this.lastCount=this.count,t=!0),t&&(this.total?e.text=String(this.count)+"/"+String(this.total):e.text=String(this.count),this.owner.triggerEvent("update-content",e))},"change-total":function(t){this.total=t},"change-count":function(t){this.count=t},"increment-count":function(){this.count+=1}},methods:{destroy:function(){this.message.recycle()}}})}(),function(){"use strict";var t=include("platypus.Data"),e=include("platypus.Entity");platypus.createComponentClass({id:"EntityContainer",properties:{childEvents:[]},initialize:function(){var t=function(t,e){this.addEntity(t,e)};return function(e,i){var n,r=0,s=this.childEvents,o=null;for(this.newAdds=Array.setUp(),n=e.entities&&this.owner.entities?e.entities.concat(this.owner.entities):e.entities||this.owner.entities||null,this.owner.entities=this.entities=Array.setUp(),this.childEvents=Array.setUp(),r=0;r<s.length;r++)this.addNewPublicEvent(s[r]);if(this.addNewPrivateEvent("peer-entity-added"),this.addNewPrivateEvent("peer-entity-removed"),n){for(o=Array.setUp(),r=0;r<n.length;r++)o.push(t.bind(this,n[r]));return platypus.Async.setUp(o,function(){i()}),o.recycle(),!0}return!1}}(),events:{"add-entity":function(t,e){this.addEntity(t,e)},"remove-entity":function(t){this.removeEntity(t)},"child-entity-updated":function(t){this.updateChildEventListeners(t)},"logic-tick":function(){var t=null,e=this.newAdds,i=e.length,n=0,r=null;if(i){for(r=Array.setUp(),n=0;n<i;n++)((t=e[n]).destroyed||!t.loadingComponents||t.loadingComponents.attemptResolution())&&r.push(n);for(n=r.length;n--;)e.greenSplice(r[n]);r.recycle()}}},methods:{addNewPublicEvent:function(t){var e=0;for(this.addNewPrivateEvent(t),e=0;e<this.childEvents.length;e++)if(this.childEvents[e]===t)return!1;return this.childEvents.push(t),this.addEventListener(t,function(t){return function(e,i){this.triggerOnChildren(t,e,i)}}(t)),!0},addNewPrivateEvent:function(t){var e=0,i=0;if(this._listeners[t])return!1;for(this._listeners[t]=Array.setUp(),e=0;e<this.entities.length;e++)if(this.entities[e]._listeners[t])for(i=0;i<this.entities[e]._listeners[t].length;i++)this.addChildEventListener(this.entities[e],t,this.entities[e]._listeners[t][i]);return!0},updateChildEventListeners:function(t){this.removeChildEventListeners(t),this.addChildEventListeners(t)},addChildEventListeners:function(t){var e=0,i="";for(i in this._listeners)if(this._listeners.hasOwnProperty(i)&&t._listeners[i])for(e=0;e<t._listeners[i].length;e++)this.addChildEventListener(t,i,t._listeners[i][e])},removeChildEventListeners:function(t){var e=0,i=null,n=null;if(t.containerListener){for(i=t.containerListener.events,n=t.containerListener.messages,e=0;e<i.length;e++)this.removeChildEventListener(t,i[e],n[e]);i.recycle(),n.recycle(),t.containerListener.recycle(),t.containerListener=null}},addChildEventListener:function(e,i,n){e.containerListener||(e.containerListener=t.setUp("events",Array.setUp(),"messages",Array.setUp())),e.containerListener.events.push(i),e.containerListener.messages.push(n),this.on(i,n,n._priority||0)},removeChildEventListener:function(t,e,i){var n=0,r=t.containerListener.events,s=t.containerListener.messages;for(n=0;n<r.length;n++)r[n]!==e||i&&s[n]!==i||this.off(e,s[n])},destroy:function(){for(var t=this.entities.greenSlice(),e=t.length,i=null;e--;)i=t[e],this.removeChildEventListeners(i),i.destroy();t.recycle(),this.entities.recycle(),delete this.owner.entities,this.childEvents.recycle(),this.newAdds.recycle(),this.newAdds=null}},publicMethods:{getEntityById:function(t){var e=0,i=null;for(e=0;e<this.entities.length;e++){if(this.entities[e].id===t)return this.entities[e];if(this.entities[e].getEntityById&&(i=this.entities[e].getEntityById(t)))return i}return null},getEntitiesByType:function(t){var e=0,i=null,n=Array.setUp();for(e=0;e<this.entities.length;e++)this.entities[e].type===t&&n.push(this.entities[e]),this.entities[e].getEntitiesByType&&(i=this.entities[e].getEntitiesByType(t),n.union(i),i.recycle());return n},addEntity:function(){var t=function(t,e){var i=this.owner,n=this.entities,r=n.length;for(e.triggerEvent("adopted",e);r--&&e.triggerEvent("peer-entity-added",n[r]););this.triggerEventOnChildren("peer-entity-added",e),this.addChildEventListeners(e),n.push(e),i.triggerEvent("child-entity-added",e),t&&t(e)};return function(i,n){var r=null,s=this.owner;return i instanceof e?((r=i).parent=s,t.call(this,n,r)):(r="string"==typeof i?new e(platypus.game.settings.entities[i],null,t.bind(this,n),s):i.id?new e(i,null,t.bind(this,n),s):new e(platypus.game.settings.entities[i.type],i,t.bind(this,n),s),this.owner.triggerEvent("entity-created",r)),this.newAdds.push(r),r}}(),removeEntity:function(t){var e=this.entities.indexOf(t);return e>=0&&(this.removeChildEventListeners(t),this.entities.greenSplice(e),this.triggerEventOnChildren("peer-entity-removed",t),this.owner.triggerEvent("child-entity-removed",t),t.destroy(),t.parent=null,t)},triggerEventOnChildren:function(t,e,i){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.triggerEvent(t,e,i))},triggerOnChildren:function(t){return this.destroyed?0:(this._listeners[t]||this.addNewPrivateEvent(t),this.trigger.apply(this,arguments))}},getAssetList:function(t,i,n){var r=0,s=Array.setUp(),o=Array.setUp(),a=null;for(t.entities&&o.union(t.entities),i&&i.entities?o.union(i.entities):n&&n.entities&&o.union(n.entities),r=0;r<o.length;r++)a=e.getAssetList(o[r]),s.union(a),a.recycle();return o.recycle(),s}},platypus.Messenger)}(),function(){"use strict";var t=include("platypus.ActionState"),e=include("platypus.Data"),i=include("platypus.DataMap"),n=include("platypus.StateMap"),r=[null,null,null,null,["east","south","west","north"],null,null,null,["east","southeast","south","southwest","west","northwest","north","northeast"],null,null,null,null,null,null,null,["east","east-southeast","southeast","south-southeast","south","south-southwest","southwest","west-southwest","west","west-northwest","northwest","north-northwest","north","north-northeast","northeast","east-northeast"]],s=["left-button","middle-button","right-button"];platypus.createComponentClass({id:"EntityController",properties:{controlMap:{},joystick:null,stateMaps:{}},publicProperties:{paused:!1},initialize:function(t){var r="",s=null;if(this.actions=i.setUp(),this.stateMaps)for(r in this.stateMaps)this.stateMaps.hasOwnProperty(r)&&(s=n.setUp(r),this.addMap(this.stateMaps[r],r,s),s.recycle());this.addMap(this.controlMap,"default"),t.joystick&&(this.joystick=e.setUp("directions",t.joystick.directions||4,"handleEdge",t.joystick.handleEdge||!1,"innerRadius",t.joystick.innerRadius||0,"outerRadius",t.joystick.outerRadius||1/0))},events:{"handle-controller":function(){for(var t=this.actions,e=t.keys,i=e.length,n="",r=Array.setUp(),s=this.owner.state;i--;)(n=t.get(e[i])).update(s)&&r.push(n);for(i=r.length;i--;)r[i].resolve();r.recycle()},pointerdown:function(t){"mouse"===t.pixiEvent.data.pointerType&&this.owner.triggerEvent("mouse:"+s[t.event.button||0]+":down",t.event),this.joystick&&(this.owner.triggerEvent("joystick:down",t.event),this.handleJoy(t))},pressup:function(t){var e=this.owner;"mouse"===t.pixiEvent.data.pointerType&&e.triggerEvent("mouse:"+s[t.event.button||0]+":up",t.event),this.joystick&&(e.triggerEvent("joystick:up",t.event),e.triggerEvent("stop"))},pressmove:function(t){this.joystick&&this.handleJoy(t)},"pause-controls":function(){this.paused=!0},"unpause-controls":function(){this.paused=!1}},methods:{handleJoy:function(t){var e=this.joystick,i=this.owner,n=Math.PI/(e.directions/2),s=function(t,e){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}(i,t),o=0,a="",h="";s>e.outerRadius||s<e.innerRadius||this.paused||(o=function(t,e,i){var n=e.x-t.x,r=e.y-t.y,s=0,o=2*Math.PI;return i?(s=Math.acos(n/i),r<0&&(s=o-s),s):s}(i,t,s),a=r[e.directions][Math.floor((o+n/2)%(2*Math.PI)/n)],e.handleEdge&&(n=Math.PI/e.directions,(h=r[2*e.directions][Math.floor((o+n/2)%(2*Math.PI)/n)])!==a&&i.triggerEvent(h.replace(a,"").replace("-",""),t)),i.triggerEvent("stop"),i.triggerEvent(a,t),i.triggerEvent("joystick-orientation",o))},addController:function(e,i,n,r,s){var o=this.actions,a=i+"-"+n+"-"+(s||"all"),h=o.get(a);h||(h=s?o.set(a,t.setUp(n,r,function(t,e,i){!this.paused&&i[t]&&this.owner.trigger(e,i)}.bind(this,s))):o.set(a,t.setUp(n,r,function(t,e){this.paused||this.owner.trigger(t,e)}.bind(this)))),this.addEventListener(e+":up",function(t){this.inputs[t]=!1}.bind(h,h.inputs.length)),this.addEventListener(e+":down",function(t){this.inputs[t]=!0}.bind(h,h.inputs.length)),h.inputs.push(!1)},addMap:function(t,e,i){var n=null,r=0,s="",o="";for(o in t)if(t.hasOwnProperty(o))if("string"==typeof(n=t[o]))this.addController(o,e,n,i);else if(Array.isArray(n))for(r=0;r<n.length;r++)this.addController(o,e,n[r],i);else for(s in n)if(n.hasOwnProperty(s))if("string"==typeof n[s])this.addController(o,e,n[s],i,s);else for(r=0;r<n[s].length;r++)this.addController(o,e,n[s][r],i,s)},destroy:function(){for(var t=this.actions,e=t.keys,i=e.length;i--;)t.get(e[i]).recycle();t.recycle(),this.joystick&&this.joystick.recycle()}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.CollisionData"),i=include("platypus.CollisionDataContainer"),n=include("platypus.Data"),r=include("platypus.DataMap"),s=include("platypus.Vector"),o=function(t,e){return t<<16|65535&e},a=function(t,e,i){return o(t>>i,e>>i)},h={entity:null,target:null,type:null,x:0,y:0,hitType:null,myType:null},l=function(t,e){return t.collisionGroup.getAllEntities()-e.collisionGroup.getAllEntities()};platypus.createComponentClass({id:"HandlerCollision",properties:{gridBits:8},initialize:function(){this.againstGrid=n.setUp(),this.solidEntitiesLive=Array.setUp(),this.softEntitiesLive=Array.setUp(),this.allEntitiesLive=Array.setUp(),this.groupsLive=Array.setUp(),this.nonColliders=Array.setUp(),this.terrain=null,this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.relocationMessage=n.setUp("position",s.setUp(),"relative",!1)},events:{"child-entity-added":function(t){t.collideOff||this.addCollisionEntity(t)},"add-collision-entity":function(t){this.addCollisionEntity(t)},"child-entity-removed":function(t){this.removeCollisionEntity(t)},"remove-collision-entity":function(t){this.removeCollisionEntity(t)},"child-entity-updated":function(t){this.removeCollisionEntity(t),this.addCollisionEntity(t)},"check-collision-group":function(t){this.checkCamera(t.camera,t.entities),this.checkGroupCollisions(),this.checkSolidCollisions(),this.resolveNonCollisions(),this.checkSoftCollisions(t)}},methods:{mapDown:function(e){var i=t.setUp(),n=this.gridBits;return i.setBounds(e.left>>n,e.top>>n,e.right>>n,e.bottom>>n)},getAgainstGrid:function(t,e,i){var r=this.mapDown(e),s=null,a=n.setUp(),h=0,l=null,u=this.againstGrid,c=null,d="",p=0,f=0;if(t&&e.equals(t.againstAABB))return this.getEntityAgainstGrid(t,i);for(p=r.left;p<=r.right;p++)for(f=r.top;f<=r.bottom;f++)if(l=u[o(p,f)])for(h=i.length;h--;)d=i[h],(s=l.get(d))&&s.length&&((c=a[d])?c.union(s):a[d]=Array.setUp.apply(null,s));return r.recycle(),a},getEntityAgainstGrid:function(t,e){for(var i=t.againstGrid,r=null,s=n.setUp(),o=i.length,a=0,h=null,l=null,u="";o--;)for(h=i[o],a=e.length;a--;)u=e[a],(r=h.get(u))&&r.length&&((l=s[u])?l.union(r):s[u]=Array.setUp.apply(null,r));return s},removeAgainst:function(t){for(var e=t.againstGrid,i=t.collisionTypes,n=null,r=e.length,s=0,o=0,a=i.length,h=null;r--;)for(h=e[r],s=a;s--;)(n=h.get(i[s]))&&(o=n.indexOf(t))>=0&&n.greenSplice(o);e.length=0},updateAgainst:function(t){var e=null,i=0,n="",s=t.collisionTypes,a=this.mapDown(t.getAABB()),h=t.againstGrid,l=0,u=null,c=this.againstGrid,d=0,p=0;if(!a.equals(t.againstAABB))for(t.againstAABB.set(a),this.removeAgainst(t),d=a.left;d<=a.right;d++)for(p=a.top;p<=a.bottom;p++){for((u=c[l=o(d,p)])||(u=c[l]=r.setUp()),i=s.length;i--;)n=s[i],(e=u.get(n))||(e=u.set(n,Array.setUp())),e.push(t);h.push(u)}a.recycle()},addCollisionEntity:function(e){e.getTileShapes?this.terrain=e:e.collisionTypes&&!e.againstGrid&&(e.againstGrid=Array.setUp(),e.againstAABB=t.setUp(),this.updateAgainst(e))},removeCollisionEntity:function(t){t.againstGrid&&(this.removeAgainst(t),t.againstGrid.recycle(),t.againstGrid=null,t.againstAABB.recycle(),t.againstAABB=null)},checkCamera:function(t,e){var i=e.length,n=0,r=this.allEntitiesLive,s=this.softEntitiesLive,o=this.solidEntitiesLive,a=this.nonColliders,h=this.groupsLive,u=null,c=null,d=!1;for(r.length=0,o.length=0,s.length=0,a.length=0,h.length=0;i--;)if(d=!1,c=(u=e[i]).collisionTypes,!u.immobile&&c&&c.length){if(r.push(u),u!==this.owner)for(n=c.length;n--;)if(u.solidCollisionMap.get(c[n]).length){o.push(u),d=!0;break}for(n=c.length;n--;)if(u.softCollisionMap.get(c[n]).length){s.push(u);break}d||a.push(u),u.collisionGroup&&h.push(u)}h.sort(l)},resolveNonCollisions:function(){var t=null,e=this.relocationMessage,i=this.nonColliders,n=i.length;for(e.relative=!1;n--;)(t=i[n]).position.x===t.previousPosition.x&&t.position.y===t.previousPosition.y||(e.position.setVector(t.position),t.triggerEvent("relocate-entity",e),this.updateAgainst(t))},checkGroupCollisions:function(){var t=function(t,e,i,n,r,s,o,a){var l=h;l.entity=e,l.target=t,l.myType=i,l.type=n,l.x=r,l.y=s,l.direction=a,l.hitType=o,t.triggerEvent("hit-by-"+n,l),e&&(l.entity=t,l.target=e,l.type=i,l.myType=n,l.x=-r,l.y=-s,l.direction=a.getInverse(),l.hitType=o,e.triggerEvent("hit-by-"+i,l),l.direction.recycle())};return function(){for(var e=0,i=this.groupsLive,n=i.length,r=null,s=null,o=null,a=null;n--;)if((r=i[n]).collisionGroup.getSize()>1){for(e=(s=(a=this.checkSolidEntityCollision(r,r.collisionGroup)).xData).length;e--;)o=s[e],t(o.thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,o.direction,0,"solid",o.vector);for(e=(s=a.yData).length;e--;)o=s[e],t(o.thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,0,o.direction,"solid",o.vector);a.recycle()}}}(),checkSolidCollisions:function(){var t=function(t,e,i,n,r,s,o,a){var l=h;l.entity=e,l.target=t,l.myType=i,l.type=n,l.x=r,l.y=s,l.direction=a,l.hitType=o,t.triggerEvent("hit-by-"+n,l),e&&(l.entity=t,l.target=e,l.type=i,l.myType=n,l.x=-r,l.y=-s,l.direction=a.getInverse(),l.hitType=o,e.triggerEvent("hit-by-"+i,l),l.direction.recycle())};return function(){for(var e=0,i=this.solidEntitiesLive,n=i.length,r=null,s=null,o=null,a=null,h=t;n--;){for(r=i[n],e=(s=(a=this.checkSolidEntityCollision(r,r)).xData).length;e--;)h((o=s[e]).thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,o.direction,0,"solid",o.vector);for(e=(s=a.yData).length;e--;)h((o=s[e]).thisShape.owner,o.thatShape.owner,o.thisShape.collisionType,o.thatShape.collisionType,0,o.direction,"solid",o.vector);a.recycle()}}}(),checkSolidEntityCollision:function(t,e){var n=i.setUp(),r=0,o=null,a=null,h=t.previousX,l=t.previousY,u=t.x-h,c=t.y-l,d=1/0,p=1/0,f=e.getCollisionTypes(),g=0,v=!1,m=null;if(e.getSolidEntities&&(v=e.getSolidEntities()),o=s.setUp(t.position),u||c){if(t.bullet){for(m=Math.min,g=f.length;g--;)d=m(d,(a=e.getAABB(f[g])).width),p=m(p,a.height);for(u/=r=m(r=Math.ceil(Math.max(Math.abs(u)/d,Math.abs(c)/p)),100),c/=r;r--;){if(e.prepareCollision(t.previousX+u,t.previousY+c),(o=this.processCollisionStep(t,e,v,n,o.setVector(t.position),u,c,f)).x===t.previousX&&o.y===t.previousY){e.relocateEntity(o,n);break}e.relocateEntity(o,n)}}else e.prepareCollision(t.previousX+u,t.previousY+c),o=this.processCollisionStep(t,e,v,n,o,u,c,f),e.relocateEntity(o,n);o.x===h&&o.y===l||this.updateAgainst(t)}return o.recycle(),n},processCollisionStep:function(){var e=t.setUp(),i=function(t,e,i,n,r,s){var o=0;if(i===t)return!1;if(i.jumpThrough&&e.bottom>n.top)return!1;if(t.jumpThrough&&n.bottom>e.top)return!1;if(r)for(o=r.length;o--;)if(i===r[o])return!1;return s.collides(n)};return function(t,n,r,s,o,a,h,l){for(var u=l.length,c=0,d=0,p=0,f=i,g=!1,v=Array.setUp(),m=null,y=null,_=null,b=null,w=null,x="",T=null,E=null,S=this.terrain,A=null,P=n.getSolidCollisions(),M=null,C=e;u--;){for(v[u]=m=Array.setUp(),b=l[u],y=n.getPreviousAABB(b),_=n.getAABB(b),C.set(_),C.include(y),M=P.get(b),A=this.getAgainstGrid(t,C,M),c=M.length;c--;)if(E=A[x=M[c]]){for(d=E.length;d--;)if(f(t,y,w=E[d],w.getAABB(x),r,C)){for(p=(T=w.getShapes(x)).length;p--;)m.push(T[p]);g=!0}E.recycle()}else if(S)for(d=(T=S.getTileShapes(C,y,x)).length;d--;)m.push(T[d]),g=!0;A.recycle()}return g&&(o=this.resolveCollisionPosition(t,n,o,v,s,l,a,h)),v.recycle(2),o}}(),resolveCollisionPosition:function(t,e,i,n,r,s,o,a){var h=0,l=null;if(0!==o)for(h=s.length;h--;)(l=this.findMinAxisMovement(t,e,s[h],"x",n[h])).occurred&&r.tryToAddX(l)||l.recycle();if(l=r.xData[0],i.x=l?t.previousX+l.deltaMovement*l.direction:t.x,e.movePreviousX(i.x),0!==a)for(h=s.length;h--;)(l=this.findMinAxisMovement(t,e,s[h],"y",n[h])).occurred&&r.tryToAddY(l)||l.recycle();return l=r.yData[0],i.y=l?t.previousY+l.deltaMovement*l.direction:t.y,i},findMinAxisMovement:function(t,i,n,r,s){for(var o=e.setUp(),a=i.getShapes(n),h=i.getPrevShapes(n),l=null,u=a.length;u--;)(l=this.findMinShapeMovementCollision(h[u],a[u],r,s)).occurred&&(!o.occurred||l.deltaMovement<o.deltaMovement)?(o.recycle(),o=l):l.recycle();return o},findMinShapeMovementCollision:function(){var t={position:0,contactVector:s.setUp()},i=function(t,e){var i=Math.pow;return Math.sqrt(i(e,2)-i(t,2))},n=function(t,e,i){var n=t-e;return n-n/Math.abs(n)*i},r=function(t,e,r,s,o){var a=0,h=e.aABB,l=h.halfWidth,u=t.x,c=t.y;return c>=h.top&&c<=h.bottom?l+t.radius:(c=n(c,e.y,h.halfHeight),a=l+i(c,t.radius),r===t?(o.x=-n(u-s*a,e.x,l)/2,c=-c):o.x=n(u,e.x-s*a,l)/2,o.y=c,o.normalize(),a)},o=function(t,e,r,s,o){var a=0,h=e.aABB,l=h.halfHeight,u=t.x,c=t.y;return u>=h.left&&u<=h.right?l+t.radius:(u=n(u,e.x,h.halfWidth),a=l+i(u,t.radius),r===t?(u=-u,o.y=-n(c-s*a,e.y,l)/2):o.y=n(c,e.y-s*a,l)/2,o.x=u,o.normalize(),a)},a={x:{rectangle:{rectangle:function(e,i,n){var r=t;return r.position=n.x-e*(n.aABB.halfWidth+i.aABB.halfWidth),r.contactVector.setXYZ(e,0),r},circle:function(e,i,n){var s=t;return s.position=n.x-e*r(n,i,i,e,s.contactVector.setXYZ(e,0)),s}},circle:{rectangle:function(e,i,n){var s=t;return s.position=n.x-e*r(i,n,i,e,s.contactVector.setXYZ(e,0)),s},circle:function(e,n,r){var s=r.y-n.y,o=r.x-e*i(s,n.radius+r.radius),a=t;return a.contactVector.setXYZ(r.x-o,s).normalize(),a.position=o,a}}},y:{rectangle:{rectangle:function(e,i,n){var r=t;return r.position=n.y-e*(n.aABB.halfHeight+i.aABB.halfHeight),r.contactVector.setXYZ(0,e),r},circle:function(e,i,n){var r=t;return r.position=n.y-e*o(n,i,i,e,r.contactVector.setXYZ(0,e)),r}},circle:{rectangle:function(e,i,n){var r=t;return r.position=n.y-e*o(i,n,i,e,r.contactVector.setXYZ(0,e)),r},circle:function(e,n,r){var s=r.x-n.x,o=r.y-e*i(s,n.radius+r.radius),a=t;return a.contactVector.setXYZ(s,r.y-o).normalize(),a.position=o,a}}}};return function(t,i,n,r){var s=0,o=t[n],h=i[n],l=t,u=o<h?1:-1,c=h,d=null,p=e.setUp(),f=null,g=h,v=null;if(o!==h)for(v=a[n][l.type],"x"===n?l.moveX(h):"y"===n&&l.moveY(h),s=r.length;s--;)d=r[s],c=h,l.collides(d)&&(c=(f=v[d.type](u,l,d)).position,u>0?c<g&&(c<o&&(c=o),g=c,p.set(!0,u,g,Math.abs(g-o),d.aABB,i,d,f.contactVector,0)):c>g&&(c>o&&(c=o),g=c,p.set(!0,u,g,Math.abs(g-o),d.aABB,i,d,f.contactVector,0)));return p}}(),checkSoftCollisions:function(){var t=function(t){this.triggerEvent("hit-by-"+t.type,t)};return function(){for(var e=this.softEntitiesLive,i=null,n=e.length,r=t;n--;)i=e[n],this.checkEntityForSoftCollisions(i,r.bind(i))}}(),checkEntityForSoftCollisions:function(t,e){var i=null,n=null,r=h,s=t.collisionTypes.length,o=0,a=0,l=0,u=0,c=null,d=null,p=null,f=null,g=null,v=null,m=!1;for(r.x=0,r.y=0;s--;){for(c=t.collisionTypes[s],d=t.softCollisionMap.get(c),i=this.getEntityAgainstGrid(t,d),o=d.length;o--;)if(p=i[f=d[o]]){for(a=p.length;a--;)if((n=p[a])!==t&&t.getAABB(c).collides(n.getAABB(f)))for(m=!1,g=t.getShapes(c),v=n.getShapes(f),l=g.length;l--;){for(u=v.length;u--;)if(g[l].collides(v[u])){r.entity=n,r.target=t,r.type=f,r.myType=c,r.shape=v[u],r.hitType="soft",e(r),m=!0;break}if(m)break}p.recycle()}i.recycle()}},checkShapeForCollisions:function(t,e,i){var n=null,r=null,s=h,o=0,a=0,l=0,u=null,c=null,d=null;for(s.x=0,s.y=0,n=this.getAgainstGrid(null,t.getAABB(),e),o=e.length;o--;)if(u=n[c=e[o]]){for(a=u.length;a--;)if(r=u[a],t.getAABB().collides(r.getAABB(c)))for(l=(d=r.getShapes(c)).length;l--;)if(t.collides(d[l])){s.entity=r,s.target=null,s.type=c,s.myType="",s.shape=d[l],s.hitType="soft",i(s);break}u.recycle()}n.recycle()},checkPointForCollisions:function(t,e,i,n){var r=this.gridBits,s=this.againstGrid[a(t,e,r)],o=null,l=h,u=0,c=0,d=0,p=null,f=null,g=null;if(l.x=0,l.y=0,s)for(u=i.length;u--;)if(f=i[u],p=s.get(f))for(c=p.length;c--;)if((o=p[c]).getAABB(f).containsPoint(t,e))for(d=(g=o.getShapes(f)).length;d--;)if(g[d].containsPoint(t,e)){l.entity=o,l.target=null,l.type=f,l.myType="",l.shape=g[d],l.hitType="soft",n(l);break}},destroy:function(){var t=this.againstGrid,e=null,i="",n=null,r=0;for(i in this.groupsLive.recycle(),this.nonColliders.recycle(),this.allEntitiesLive.recycle(),this.softEntitiesLive.recycle(),this.solidEntitiesLive.recycle(),this.relocationMessage.position.recycle(),this.relocationMessage.recycle(),t)if(t.hasOwnProperty(i)){for(r=(n=(e=t[i]).keys).length;r--;)e.get(n[r]).recycle();e.recycle()}t.recycle(),this.againstGrid=null}},publicMethods:{getWorldEntities:function(){return this.allEntitiesLive},getWorldTerrain:function(){return this.terrain},getEntityCollisions:function(t){var e=Array.setUp();return this.checkEntityForSoftCollisions(t,function(t){e.push(n.setUp(t))}),e},getShapeCollisions:function(t,e){var i=Array.setUp();return this.checkShapeForCollisions(t,e,function(t){i.push(n.setUp(t))}),i},getPointCollisions:function(t,e,i){var r=Array.setUp();return this.checkPointForCollisions(t,e,i,function(t){r.push(n.setUp(t))}),r}}})}(),function(){"use strict";var t={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"};platypus.createComponentClass({id:"HandlerController",initialize:function(){this.callbackKeyUp=null,this.callbackKeyDown=null,platypus.game.settings.debug?(this.callbackKeyDown=function(t){this.keyDown(t)}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t)}.bind(this)):(this.callbackKeyDown=function(t){this.keyDown(t),t.preventDefault()}.bind(this),this.callbackKeyUp=function(t){this.keyUp(t),t.preventDefault()}.bind(this)),window.addEventListener("keydown",this.callbackKeyDown,!0),window.addEventListener("keyup",this.callbackKeyUp,!0)},events:{tick:function(t){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-controller",t)}},methods:{keyDown:function(e){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(t["kc"+e.keyCode]||"key-code-"+e.keyCode)+":down",e)},keyUp:function(e){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(t["kc"+e.keyCode]||"key-code-"+e.keyCode)+":up",e)},destroy:function(){window.removeEventListener("keydown",this.callbackKeyDown),window.removeEventListener("keyup",this.callbackKeyUp)}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=function(t,e){var i=t.length;for(e.length=0;i--;)e.push(t[i])},i=function(t,e){return t.alwaysOn||t.aabb&&e.collides(t.getAABB())||void 0===t.x||e.containsPoint(t.x,t.y)},n=function(t,e,n){var r=t.length,s=null;for(e.length=0;r--;)s=t[r],i(s,n)&&e.push(s)},r=function(t){return"handle-logic"===t||"handle-post-collision-logic"===t||"prepare-logic"===t||"state-changed"===t||"handle-movement"===t};platypus.createComponentClass({id:"HandlerLogic",properties:{alwaysOn:!1},publicProperties:{buffer:-1,stepLength:5,maxStepsPerTick:100,timeMultiplier:1},initialize:function(){this.entities=Array.setUp(),this.activeEntities=Array.setUp(),this.removals=Array.setUp(),this.inLogicLoop=!1,this.alwaysOn?(this.updateList=e,this.camera=null):(this.updateList=n,this.camera=t.setUp()),this.paused=0,this.leftoverTime=0,this.message={delta:this.stepLength,tick:null,camera:this.camera,entities:this.activeEntities}},events:{"child-entity-updated":function(t){var e=this.entities.indexOf(t),n=t.getMessageIds().some(r);n&&e<0?(this.entities.push(t),!this.inLogicLoop||this.camera&&!i(t,this.camera)||this.activeEntities.push(t)):!n&&e>=0&&(this.entities.greenSplice(e),this.inLogicLoop&&this.removals.push(t))},"child-entity-added":function(t){t.getMessageIds().some(r)&&(this.entities.push(t),!this.inLogicLoop||this.camera&&!i(t,this.camera)||this.activeEntities.push(t))},"child-entity-removed":function(t){var e=this.entities.indexOf(t);e>=0&&(this.entities.greenSplice(e),this.inLogicLoop&&this.removals.push(t))},"pause-logic":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-paused")},"unpause-logic":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-unpaused")},"camera-update":function(t){var e=this.buffer,i=this.camera,n=null;i&&(-1===e&&(e=t.viewport.width/10),n=t.viewport,i.setBounds(n.left-e,n.top-e,n.right+e,n.bottom+e))},tick:function(t){var e=0,i=0,n=0,r=null,s=this.message,o=this.activeEntities,a=this.removals,h=this.stepLength;for(this.leftoverTime+=t.delta*this.timeMultiplier,n=Math.floor(this.leftoverTime/h)||1,s.delta=h,this.leftoverTime=Math.max(this.leftoverTime-n*h,0),s.tick=t,this.updateList(this.entities,o,this.camera),n=Math.min(n,this.maxStepsPerTick);n--;)if(this.paused>0&&(this.paused-=h,this.paused<0&&(this.paused=0)),!this.paused){for(this.inLogicLoop=!0,this.owner.triggerEvent("logic-tick",s),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-ai",s),e=o.length;e--;)(r=o[e]).triggerEvent("prepare-logic",s),r.triggerEvent("handle-logic",s),r.triggerEvent("handle-movement",s);if(this.inLogicLoop=!1,a.length){for(e=a.length;e--;)(i=o.indexOf(a[e]))>=0&&o.greenSplice(i);a.length=0}if(e=o.length,this.owner.triggerEvent("check-collision-group",s))for(;e--;)(r=o[e]).triggerEvent("handle-post-collision-logic",s),r.lastState.update(r.state)&&r.triggerEvent("state-changed",r.state);else for(;e--;)(r=o[e]).lastState.update(r.state)&&r.triggerEvent("state-changed",r.state)}}},methods:{destroy:function(){this.entities.recycle(),this.activeEntities.recycle(),this.removals.recycle()}}})}(),function(){"use strict";var t=include("PIXI.Container"),e=include("platypus.Data"),i=include("platypus.components.Interactive");platypus.createComponentClass({id:"HandlerRender",properties:{interactive:!1},publicProperties:{worldContainer:null},initialize:function(){var n=null,r=this.owner.renderGroups=this.renderGroups=Array.setUp();this.worldContainer=this.worldContainer||new t,this.worldContainer.name="",r.push(this.worldContainer),this.interactive&&(n=e.setUp("container",this.worldContainer,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover,"relativeToSelf",!0),this.owner.addComponent(new i(this.owner,n)),n.recycle()),this.renderMessage=e.setUp("delta",0,"container",this.worldContainer,"renderGroups",r)},events:{load:function(){this.owner.triggerEvent("render-world",{world:this.worldContainer,renderGroups:this.renderGroups}),this.owner.triggerEvent("input-on")},"child-entity-added":function(t){t.triggerEvent("handle-render-load",this.renderMessage)},"pause-render":function(t){t&&t.time?this.paused=t.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-paused")},"unpause-render":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-unpaused")},tick:function(){var t=function(t,e){return t.z-e.z};return function(e){var i=this.renderMessage,n=null,r=this.renderGroups,s=r.length;for(i.delta=e.delta,this.paused>0&&(this.paused-=e.delta,this.paused<=0&&(this.paused=0)),!this.paused&&this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-render",i);s--;)(n=r[s]).reorder&&(n.reorder=!1,n.children.sort(t))}}()},methods:{destroy:function(){this.worldContainer=null,this.renderGroups.recycle(),this.renderGroups=null,this.renderMessage.recycle()}}})}(),function(){"use strict";var t=function(t,e,i,n,r,s){var o=0,a=0,h=0,l=t.greenSlice();if("horizontal"===s){for(a=r-1;a>=0;a--)for(o=a*n,h=0;o<(a+1)*n;o++,h++)l.splice((a+1)*e+h,0,i[o]);return l}return"vertical"===s?t.concat(i):null},e=function(t,e,i,n){var r=0,s="",o=t.greenSlice(),a=null;for(r=0;r<e.length;r++){for(s in a={},e[r])e[r].hasOwnProperty(s)&&(a[s]=e[r][s]);"horizontal"===n?a.x+=i:"vertical"===n&&(a.y+=i),o.push(a)}return o},i=function(i,n,r,s){var o=0,a="";for(i.tilewidth||i.tileheight?i.tilewidth===n.tilewidth&&i.tileheight===n.tileheight||platypus.debug.warn("Tiled-Loader: Your map has segments with different tile sizes. All tile sizes must match. Segment: "+n):(i.tilewidth=n.tilewidth,i.tileheight=n.tileheight),"horizontal"===r?0===i.height?i.height=n.height:i.height!==n.height&&platypus.debug.warn("Tiled-Loader: You are trying to merge segments with different heights. All segments need to have the same height. Level: "+i+" Segment: "+n):"vertical"===r&&(0===i.width?i.width=n.width:i.width!==n.width&&platypus.debug.warn("Tiled-Loader: You are trying to merge segments with different widths. All segments need to have the same width. Level: "+i+" Segment: "+n)),o=0;o<n.layers.length;o++)if(i.layers[o])i.layers[o].type===n.layers[o].type?i.layers[o].data&&n.layers[o].data?(s(n.layers[o]),"horizontal"===r?(i.layers[o].data=t(i.layers[o].data,i.width,n.layers[o].data,n.width,i.height,r),i.layers[o].width+=n.width):"vertical"===r&&(i.layers[o].data=t(i.layers[o].data,i.height,n.layers[o].data,n.height,i.width,r),i.layers[o].height+=n.height)):i.layers[o].objects&&n.layers[o].objects&&("horizontal"===r?i.layers[o].objects=e(i.layers[o].objects,n.layers[o].objects,i.width*i.tilewidth,r):"vertical"===r&&(i.layers[o].objects=e(i.layers[o].objects,n.layers[o].objects,i.height*i.tileheight,r))):platypus.debug.warn("Tiled-Loader: The layers in your level segments do not match. Level: "+i+" Segment: "+n);else for(a in s(n.layers[o]),i.layers[o]={},n.layers[o])n.layers[o].hasOwnProperty(a)&&(i.layers[o][a]=n.layers[o][a]);for(a in"horizontal"===r?i.width+=n.width:"vertical"===r&&(i.height+=n.height),n)n.hasOwnProperty(a)&&!i[a]&&(i[a]=n[a])},n=function(t,e){var n=0,r=0,s=platypus.game.settings.levels,o={height:0,width:0,layers:[]},a={height:0,width:0,layers:[]},h=t[n].length;for(n=0;n<t.length;n++){for(h!==t[n].length&&platypus.debug.warn("Tiled-Loader: Your map is not square. Maps must have an equal number of segments in every row."),o={height:0,width:0,layers:[]},r=0;r<t[n].length;r++)"string"==typeof t[n][r]?i(o,s[t[n][r]],"horizontal",e):i(o,t[n][r],"horizontal",e);i(a,o,"vertical",e)}return a};platypus.createComponentClass({id:"LevelBuilder",properties:{useUniques:!0,levelTemplate:null,levelPieces:null},publicProperties:{},initialize:function(){this.levelMessage={level:null,persistentData:null}},events:{"scene-loaded":function(t){var e=null,i=null,r="",s=0,o=0,a=0;if(this.levelMessage.persistentData=t,this.levelTemplate=t.levelTemplate||this.levelTemplate,this.useUniques=t.useUniques||this.useUniques,i=t.levelPieces||this.levelPieces,this.levelPieces={},i)for(r in i)if(i.hasOwnProperty(r))if("string"==typeof i[r])this.levelPieces[r]=i[r];else{if(!i[r].length)throw"Level Builder: Level pieces of incorrect type: "+i[r];for(this.levelPieces[r]=[],s=0;s<i[r].length;s++)this.levelPieces[r].push(i[r][s])}if(!this.levelTemplate)throw"Level Builder: There is no level template.";if(!this.levelTemplate)throw"Level Builder: Template is not defined";for(this.levelMessage.level=[],o=0;o<this.levelTemplate.length;o++)if("string"==typeof(e=this.levelTemplate[o]))this.levelMessage.level[o]=this.getLevelPiece(e);else{if(!e.length)throw"Level Builder: Template row is neither a string or array. What is it?";for(this.levelMessage.level[o]=[],a=0;a<e.length;a++)this.levelMessage.level[o][a]=this.getLevelPiece(e[a])}this.levelMessage.level&&(this.levelMessage.level=n(this.levelMessage.level,this.owner.decodeLayer),this.owner.triggerEvent("load-level",this.levelMessage))}},methods:{getLevelPiece:function(t){var e=this.levelPieces[t]||t,i=null,n=0;if(e){if("string"==typeof e)return this.useUniques?(i=e,this.levelPieces[t]=null,i):e;if(e.length)return n=Math.floor(Math.random()*e.length),this.useUniques?this.levelPieces[t].greenSplice(n):e[n];throw"Level Builder: There are no MORE level pieces of type: "+t}throw"Level Builder: There are no level pieces of type: "+t},destroy:function(){this.levelMessage.level=null,this.levelMessage.persistentData=null,this.levelMessage=null}},publicMethods:{mergeLevels:function(t){return n(t,this.owner.decodeLayer)}},getAssetList:function(t,e,i){var n=0,r=null,s=Array.setUp(),o="",a=null;if(t&&t.levelPieces?a=t.levelPieces:e&&e.levelPieces?a=e.levelPieces:i&&i.levelPieces&&(a=i.levelPieces),a)for(o in a)if(a.hasOwnProperty(o))if(Array.isArray(a[o]))for(n=0;n<a[o].length;n++)r=platypus.components.TiledLoader.getAssetList({level:a[o][n]},e,i),s.union(r),r.recycle();else r=platypus.components.TiledLoader.getAssetList({level:a[o]},e,i),s.union(r),r.recycle();return s}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicAngularMovement",properties:{maxVelocity:3,acceleration:.01,visualOffset:0,startAngle:0},publicProperties:{},initialize:function(){this.angle=this.startAngle,this.v=Array.setUp(0,0),this.moving=!1,this.piOverTwo=Math.PI/2,this.owner.rotation=this.owner.rotation||this.visualOffset},events:{"handle-logic":function(t){var e=Math.PI,i=Math.sin,n=Math.cos,r=Math.min,s=Math.max,o=t.delta,a=0;this.moving&&(this.v[0]+=this.acceleration*n(this.angle)*o,this.v[1]+=this.acceleration*i(this.angle)*o,0===this.v[0]?a=this.v[1]>0?this.piOverTwo:this.v[1]<0?-this.piOverTwo:this.angle:(a=Math.atan(this.v[1]/this.v[0]),this.v[0]<0&&(a=e+a)),this.v[0]>=0?this.v[0]=r(this.v[0],this.maxVelocity*n(a)):this.v[0]=s(this.v[0],this.maxVelocity*n(a)),this.v[1]>=0?this.v[1]=r(this.v[1],this.maxVelocity*i(a)):this.v[1]=s(this.v[1],this.maxVelocity*i(a)),this.owner.x+=this.v[0],this.owner.y+=this.v[1],this.owner.rotation=a*(180/e)+this.visualOffset)},"set-angle":function(t){this.angle=t},move:function(){this.moving=!0},stop:function(){this.moving=!1,this.v[0]=0,this.v[1]=0},"set-max-velocity":function(t){this.maxVelocity=t}},methods:{destroy:function(){this.v.recycle()}}})}(),function(){"use strict";var t=include("platypus.Entity"),e=function(){var t=this.attachment;t&&t.trigger.apply(t,arguments)};platypus.createComponentClass({id:"LogicAttachment",properties:{attachState:"attached",attachment:"",events:null,startAttached:!1,offsetX:0,offsetY:0,offsetZ:.01},initialize:function(){var t="",i=this.events;if(this.state=this.owner.state,this.state.set(this.attachState,this.startAttached),this.attachmentPosition={x:0,y:0,z:0,dx:0,dy:0},this.attachmentProperties={type:this.attachment,properties:this.attachmentPosition},this.attachment=null,this.isAttached=this.startAttached,i)for(t in i)i.hasOwnProperty(t)&&this.addEventListener(t,e.bind(this,i[t]))},events:{"handle-logic":function(){var t=0,e=this.state;this.isAttached?(this.attachment||(this.attachmentPosition.x=this.owner.x,this.attachmentPosition.y=this.owner.y,this.attachmentPosition.z=this.owner.z,this.attachment=this.owner.parent.addEntity(this.attachmentProperties)),this.attachment.destroyed?(this.owner.parent.removeEntity(this.attachment),this.attachment=null,this.isAttached=!1):(this.attachment.x=this.owner.x,t=this.offsetX,e.get("left")?(t*=-1,this.attachment.rotation=180):e.get("right")&&(this.attachment.rotation=0),this.attachment.x+=t,this.attachment.y=this.owner.y,t=this.offsetY,e.get("top")?(t*=-1,this.attachment.rotation=90):e.get("bottom")&&(this.attachment.rotation=-90),this.attachment.y+=t,this.attachment.z=this.owner.z,this.attachment.z+=this.offsetZ)):this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),e.set(this.attachState,this.isAttached)},attach:function(t){this.isAttached=!t||!1!==t.pressed},detach:function(){this.isAttached=!1},"change-attachment-offset":function(t){void 0!==t.x?this.offsetX=t.x:void 0!==t.y?this.offsetY=t.y:void 0!==t.z&&(this.offsetZ=t.z)}},methods:{destroy:function(){this.state.set(this.attachState,!1),this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),this.isAttached=!1,this.state=null}},getAssetList:function(e,i,n){var r=e.attachment||i.attachment||n.attachment;return r?t.getAssetList({type:r}):Array.setUp()}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.Data");platypus.createComponentClass({id:"LogicButton",properties:{onPress:"",onRelease:"",onCancel:"",onHover:"",useOnce:!1,disabled:!1,toggle:!1,pressed:!1},publicProperties:{bottom:null,left:null,right:null,top:null},initialize:function(){var e=this.owner.state;this.aabb=t.setUp(),this.lastBottom=null,this.lastLeft=null,this.lastRight=null,this.lastTop=null,this.state=e,e.set("disabled",this.disabled),e.set("released",!this.pressed),e.set("pressed",this.pressed),e.set("highlighted",!1),this.owner.buttonMode=!this.disabled,this.cancelled=!1,this.readyToToggle=!1},events:{"handle-logic":function(){var t=this.bottom,e=this.left,i=this.right,n=this.top;this.lastBottom===t&&this.lastLeft===e&&this.lastRight===i&&this.lastTop===n||(this.updatePosition(this.aabb),this.lastBottom=t,this.lastLeft=e,this.lastRight=i,this.lastTop=n)},"camera-update":function(t){this.aabb.set(t.viewport),this.updatePosition(this.aabb)},pointerdown:function(t){this.state.get("disabled")||(this.toggle?this.readyToToggle=!0:(this.onPress&&this.owner.trigger(this.onPress),this.updateStateAndTrigger("pressed"),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&this.removeEventListener("pointerdown")))},pressup:function(t){var e=this.state;e.get("disabled")||(this.cancelled?(this.onCancel&&this.owner.trigger(this.onCancel),this.updateStateAndTrigger("cancelled")):this.toggle?this.readyToToggle&&(e.get("pressed")?this.updateStateAndTrigger("released"):this.updateStateAndTrigger("pressed")):(this.onRelease&&this.owner.trigger(this.onRelease),this.updateStateAndTrigger("released")),t&&t.pixiEvent&&t.pixiEvent.stopPropagation&&t.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&(this.removeEventListener("pressup"),this.state.set("disabled",!0),this.owner.buttonMode=!1)),this.cancelled=!1,this.readyToToggle=!1},pointerover:function(){this.onHover&&this.owner.trigger(this.onHover),this.state.get("pressed")&&(this.cancelled=!1)},pointerout:function(){this.state.get("pressed")&&(this.cancelled=!0)},disable:function(){this.state.set("disabled",!0),this.owner.buttonMode=!1},enable:function(){this.state.set("disabled",!1),this.owner.buttonMode=!0},"toggle-disabled":function(){var t=this.state.get("disabled");this.owner.buttonMode=t,this.state.set("disabled",!t)},highlight:function(){this.state.set("highlighted",!0)},unhighlight:function(){this.state.set("highlighted",!1)},"toggle-highlight":function(){var t=this.state;t.set("highlighted",!t.get("highlighted"))}},methods:{updatePosition:function(t){var e=this.bottom,i=this.left,n=this.owner,r=this.right,s=this.top;"number"==typeof i?n.x=t.left+i:"number"==typeof r&&(n.x=t.right-r),"number"==typeof s?n.y=t.top+s:"number"==typeof e&&(n.y=t.bottom-e)},updateStateAndTrigger:function(t){var i=null,n=this.owner,r=this.state,s=r.get("pressed"),o=r.get("released"),a=!1;o&&"pressed"===t?(r.set("pressed",!0),r.set("released",!1),a=!0):!s||"released"!==t&&"cancelled"!==t||(r.set("pressed",!1),r.set("released",!0),a=!0),a&&(i=e.setUp("released",s,"pressed",o,"triggered",o,"entity",n),n.triggerEvent(t,i),i.recycle())},destroy:function(){this.aabb.recycle(),this.aabb=null,this.owner.buttonMode=!1,this.state=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicCarrier",initialize:function(){},events:{load:function(){this.owner.triggerEvent("add-collision-entity",this.owner)||(this.owner.addComponent(new platypus.components.CollisionGroup(this.owner,{})),this.owner.triggerEvent("add-collision-entity",this.owner))},"carry-me":function(t){this.owner.triggerEvent("add-collision-entity",t.entity)},"release-me":function(t){this.owner.triggerEvent("remove-collision-entity",t.entity)}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicDestroyMe",properties:{delay:0,destroyed:!1},events:{"prepare-logic":function(t){var e=t.delta;this.destroyed&&!this.owner.state.get("paused")&&(this.delay-=e,this.delay<=0&&this.owner.parent.removeEntity(this.owner))},"destroy-me":function(){this.destroyed=!0}}})}(),function(){"use strict";var t=function(t){return function(e){this[t]=!e||!1!==e.pressed}},e=function(){},i={x:function(t,e){t!==e&&(t>180&&e<=180||t<=180&&e>180)&&this.owner.triggerEvent("transform","vertical")},y:function(t,e){t!==e&&(t>90&&t<=270&&(e<=90||e>270)||(t<=90||t>270)&&e>90&&e<=270)&&this.owner.triggerEvent("transform","horizontal")},z:function(t,e){t!==e&&this.owner.triggerEvent("replace-transform","rotate-"+t)}};platypus.createComponentClass({id:"LogicDirectionalMovement",properties:{axis:"y",speed:.3},initialize:function(){var t=this.state=this.owner.state;"number"==typeof this.speed&&(this.speed=[this.speed,0,0]),this.initialVector=platypus.Vector.setUp(this.speed),this.reorient=i[this.axis],this.reorient||(this.reorient=e),this.moving=t.set("moving",!1),this.left=t.set("left",!1),this.right=t.set("right",!1),this.up=t.set("up",!1),this.down=t.set("down",!1),this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1,this.heading=0,this.owner.heading=this.owner.heading||0},events:{"component-added":function(t){if(t===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:this.speed,drag:0,friction:0,stopOnCollision:!1,orient:!1,aliases:{moving:"control-velocity"}}).velocity,this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.owner.heading/180*Math.PI),this.heading=this.owner.heading),this.owner.triggerEvent("moving",this.moving)}},"handle-logic":function(){var t=this.state,e=this.up||this.upLeft||this.upRight,i=this.upLeft||this.up&&this.left,n=this.left||this.upLeft||this.downLeft,r=this.downLeft||this.down&&this.left,s=this.down||this.downLeft||this.downRight,o=this.downRight||this.down&&this.right,a=this.right||this.upRight||this.downRight,h=this.upRight||this.up&&this.right;if(n&&a||e&&s)this.moving=!1;else if(i)this.moving=!0,this.heading=225;else if(h)this.moving=!0,this.heading=315;else if(r)this.moving=!0,this.heading=135;else if(o)this.moving=!0,this.heading=45;else if(n)this.moving=!0,this.heading=180;else if(a)this.moving=!0,this.heading=0;else if(e)this.moving=!0,this.heading=270;else if(s)this.moving=!0,this.heading=90;else switch(this.moving=!1,this.heading){case 270:e=!0;break;case 90:s=!0;break;case 180:n=!0;break;case 225:e=!0,n=!0;break;case 315:e=!0,a=!0;break;case 135:s=!0,n=!0;break;case 45:s=!0,a=!0;break;case 0:default:a=!0}this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.heading/180*Math.PI),this.reorient(this.heading,this.owner.heading),this.owner.heading=this.heading),t.get("moving")!==this.moving&&(this.owner.triggerEvent("moving",this.moving),t.set("moving",this.moving)),t.set("up",e),t.set("right",a),t.set("down",s),t.set("left",n)},"go-down":t("down"),"go-south":t("down"),"go-down-left":t("downLeft"),"go-southwest":t("downLeft"),"go-left":t("left"),"go-west":t("left"),"go-up-left":t("upLeft"),"go-northwest":t("upLeft"),"go-up":t("up"),"go-north":t("up"),"go-up-right":t("upRight"),"go-northeast":t("upRight"),"go-right":t("right"),"go-east":t("right"),"go-down-right":t("downRight"),"go-southeast":t("downRight"),stop:function(t){t&&!1===t.pressed||(this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1)},face:function(){var t={up:270,north:270,down:90,south:90,left:180,west:180,right:0,east:0,"up-left":225,northwest:225,"up-right":315,northeast:315,"down-left":135,southwest:135,"down-right":45,southeast:45};return function(e){this.heading=t[e]||0}}(),accelerate:function(t){this.initialVector.normalize().multiply(t),this.direction.normalize().multiply(t)}},methods:{destroy:function(){this.initialVector.recycle(),this.state=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicDragDrop",properties:{dragZ:1e4,stickyClick:!1},initialize:function(){this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=0,this.grabOffsetY=0,this.state=this.owner.state,this.state.set("dragging",!1),this.state.set("noDrop",!1),this.tryDrop=!1,this.hitSomething=!1,this.hasCollision=!1,platypus.supports.mobile&&(this.stickyClick=!1)},events:{"component-added":function(t){"CollisionBasic"===t.type&&(this.hasCollision=!0)},"handle-logic":function(){this.state.get("dragging")&&(this.owner.x=this.nextX,this.owner.y=this.nextY,this.owner.triggerEvent("hovering")),this.state.set("noDrop",!1)},"handle-post-collision-logic":function(){this.tryDrop?(this.tryDrop=!1,this.hitSomething?(this.dropFailed=!1,this.state.set("noDrop",!0),this.state.set("dragging",!0),this.owner.dragMode=!0):(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1)):this.hitSomething&&this.state.set("noDrop",!0),this.hitSomething=!1},pointerdown:function(t){this.sticking?(this.sticking=!1,this.release()):(this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=t.x-this.owner.x,this.grabOffsetY=t.y-this.owner.y,this.owner.z=this.dragZ,this.state.set("dragging",!0),this.owner.dragMode=!0,this.sticking=this.stickyClick),t.pixiEvent.stopPropagation()},pressup:function(t){this.sticking||this.release(),t.pixiEvent.stopPropagation()},pointermove:function(t){this.sticking&&(this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,t.event.preventDefault(),t.pixiEvent.stopPropagation())},pressmove:function(t){this.nextX=t.x-this.grabOffsetX,this.nextY=t.y-this.grabOffsetY,this.nextX===this.owner.x&&this.nextY===this.owner.y||(this.sticking=!1),t.event.preventDefault(),t.pixiEvent.stopPropagation()},"no-drop":function(){this.hitSomething=!0}},methods:{release:function(){this.hasCollision?this.tryDrop=!0:(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1,this.owner.z=this.lastZ)},destroy:function(){this.state.set("dragging",!1),this.owner.dragMode=!1,this.state.set("noDrop",!1),this.state=null,this.owner.z=this.lastZ}}})}(),function(){"use strict";var t=include("platypus.Vector");platypus.createComponentClass({id:"LogicImpactLaunch",properties:{accelerationX:-.3,accelerationY:-.8,flipX:!0,flipY:!1},initialize:function(t){this.stunState=t.state||"stunned",this.flipX=this.flipX?-1:1,this.flipY=this.flipY?-1:1,this.justJumped=!1,this.stunned=!1,this.state=this.owner.state,this.state.set("impact",!1),this.state.set(this.stunState,!1)},events:{"component-added":function(e){if(e===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:[0,0,0],orient:!1}).velocity,this.vector=t.setUp()}},"handle-logic":function(){this.state.set("impact",this.justJumped),this.state.set(this.stunState,this.stunned),this.justJumped&&(this.direction.setVector(this.vector),this.justJumped=!1,this.stunned=!0)},"impact-launch":function(t){var e=t.x,i=t.y;t.entity&&(e=t.entity.x-this.owner.x,i=t.entity.y-this.owner.y),this.stunned||(this.justJumped=!0,e>=0?this.vector.x=this.accelerationX:e<0&&(this.vector.x=this.accelerationX*this.flipX),i>=0?this.vector.y=this.accelerationY:i<0&&(this.vector.y=this.accelerationY*this.flipY))},"hit-solid":function(t){this.stunned&&t.y>0&&(this.direction.x=0,this.direction.y=0,this.stunned=!1)}},methods:{destroy:function(){this.vector.recycle(),this.state=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicPacingPlatform",initialize:function(t){this.ang=this.owner.angle||t.angle||0,this.dist=this.owner.distance||t.distance||128,this.dX=this.dist*Math.cos(this.ang),this.dY=this.dist*Math.sin(this.ang),this.period=this.owner.period||t.period||4e3,this.time=0,this.startPos=this.owner.startPos||t.startPos||0,this.offset=0,this.originX=this.owner.x,this.originY=this.owner.y},events:{"handle-logic":function(t){var e=this.period,i=t.delta;this.time+=i,this.time>e&&(this.time=this.time%e),this.offset=this.time/e*(2*Math.PI),this.owner.x=this.originX+Math.sin(this.offset+this.startPos)*this.dX,this.owner.y=this.originY+Math.sin(this.offset+this.startPos)*this.dY}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicPortable",properties:{portableDirections:{down:!0}},initialize:function(t){this.carrier=this.lastCarrier=null,this.message={entity:this.owner}},events:{"handle-logic":function(){var t=this.message;this.carrierConnected?(this.carrier!==this.lastCarrier&&(this.lastCarrier&&this.lastCarrier.triggerEvent("release-me",t),this.carrier.triggerEvent("carry-me",t)),this.carrierConnected=!1):this.carrier&&(this.carrier.triggerEvent("release-me",t),this.carrier=null),this.lastCarrier=this.carrier},"hit-solid":function(t){t.y>0?this.updateCarrier(t.entity,"down"):t.y<0?this.updateCarrier(t.entity,"up"):t.x<0?this.updateCarrier(t.entity,"left"):t.x>0&&this.updateCarrier(t.entity,"right")},"force-release":function(){this.carrier&&this.carrier.triggerEvent("release-me",this.message),this.carrier=null,this.lastCarrier=this.carrier,this.carrierConnected=!1}},methods:{updateCarrier:function(t,e){this.portableDirections[e]&&t&&(t!==this.carrier&&(this.carrier=t),this.carrierConnected=!0)}}})}(),function(){"use strict";var t=include("platypus.DataMap");platypus.createComponentClass({id:"LogicPortal",initialize:function(e){var i=0,n=e.entrants||e.entrant||"no one",r=this.owner.state;if(this.destination=this.owner.destination||e.destination,this.used=!1,this.ready=!1,this.wasReady=!1,this.entrants=t.setUp(),Array.isArray(n))for(i=0;i<n.length;i++)this.entrants.set(n[i],!1);else this.entrants.set(n,!1);this.state=r,r.set("occupied",!1),r.set("ready",!0)},events:{"handle-logic":function(){var t=this.entrants,e=t.keys,i=e.length,n=!1,r=!0,s=this.state;for(!this.used&&this.activated?(this.owner.triggerEvent("port-"+this.destination),this.used=!0):this.ready&&!this.wasReady?(this.owner.triggerEvent("portal-waiting"),this.wasReady=!0):this.wasReady&&!this.ready&&(this.owner.triggerEvent("portal-not-waiting"),this.wasReady=!1);i--;)t[e[i]]?(n=!0,t.set(e[i],!1)):r=!1;s.set("occupied",n),s.set("ready",r),this.ready=!1},"occupied-portal":function(t){var e=this.entrants,i=e.keys,n=i.length;for(e.set(t.entity.type,!0);n--;)if(!e.get(i[n]))return;this.ready=!0},"activate-portal":function(){this.activated=!0}},methods:{destroy:function(){this.state=null,this.entrants.recycle(),this.entrants=null}}})}(),function(){"use strict";var t=function(t,e){return t/Math.abs(t)*e};platypus.createComponentClass({id:"LogicPushable",initialize:function(t){this.yPush=t.push||t.yPush||0,this.xPush=t.push||t.xPush||.1,t.roll?(this.radius=t.radius||this.owner.radius||(this.owner.width||this.owner.height||2)/2,this.owner.orientation=this.owner.orientation||0):this.radius=0,this.currentPushX=0,this.currentPushY=0,this.lastX=this.owner.x,this.lastY=this.owner.y,this.pushers=Array.setUp()},events:{"handle-logic":function(e){var i=0,n=e.delta;for(this.currentPushY&&(this.owner.y+=t(this.currentPushY,this.yPush*n),this.currentPushY=0),this.currentPushX&&(this.owner.x+=t(this.currentPushX,this.xPush*n),this.currentPushX=0),this.lastX===this.owner.x&&this.lastY===this.owner.y||(this.radius&&(this.owner.orientation+=(this.owner.x+this.owner.y-this.lastX-this.lastY)/this.radius),this.lastX=this.owner.x,this.lastY=this.owner.y),i=0;i<this.pushers.length;i++)this.pushers[i].triggerEvent("pushed",this.owner);this.pushers.length=0},"push-entity":function(t){var e=t.x||0,i=t.y||0;this.currentPushX-=e,this.currentPushY-=i,(this.yPush&&i||this.xPush&&e)&&this.pushers.push(t.entity)},"hit-solid":function(t){return t.y>0&&this.vY>0||t.y<0&&this.vY<0?this.vY=0:(t.x<0&&this.vX<0||t.x>0&&this.vX>0)&&(this.vX=0),!0}},methods:{destroy:function(){this.pushers.recycle()}}})}(),function(){"use strict";var t=include("platypus.Vector");platypus.createComponentClass({id:"LogicRebounder",initialize:function(e){platypus.Vector.assign(this.owner,"velocity","dx","dy","dz"),this.owner.mass=this.owner.mass||e.mass||1,this.elasticity=e.elasticity||.8,this.v=t.setUp(0,0,0),this.incidentVector=t.setUp(0,0,0),this.staticCollisionOccurred=!1,this.nonStaticCollisionOccurred=!1,this.hitThisTick=Array.setUp(),this.otherV=t.setUp(0,0,0),this.otherVelocityData=Array.setUp()},events:{"handle-logic":function(){var t=0;for(this.hitThisTick.length=0,t=0;t<this.otherVelocityData.length;t++)this.otherVelocityData[t].velocity.recycle();this.otherVelocityData.length=0},"hit-static":function(t){var e,i=t.entity,n=0;for(n=0;n<this.hitThisTick.length;n++)if(i===this.hitThisTick[n])return;this.hitThisTick.push(i),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),e=this.v.scalarProjection(this.incidentVector),isNaN(e)||(this.incidentVector.scale(e*(1+this.elasticity)),this.v.subtractVector(this.incidentVector)),this.owner.velocity.setVector(this.v)},"hit-non-static":function(t){var e=0,i=t.entity,n=!1,r=0,s=0,o=0;if(!((e=this.hitThisTick.indexOf(i))>=0)){for(this.hitThisTick.push(i),e=0;e<this.otherVelocityData.length;e++)if(i===this.otherVelocityData[e].entity){this.otherV.setVector(this.otherVelocityData[e].velocity),n=!0;break}n||(this.otherV.setVector(i.velocity),i.triggerEvent("share-velocity",this.owner)),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(t.direction),r=this.v.scalarProjection(this.incidentVector),r=isNaN(r)?0:r,s=this.otherV.scalarProjection(this.incidentVector),s=isNaN(s)?0:s,o=(r*(this.owner.mass-i.mass)+2*i.mass*s)/(this.owner.mass+i.mass),this.incidentVector.scale(o-r),this.owner.velocity.setVector(this.incidentVector)}},"share-velocity":function(e){this.otherVelocityData.push({entity:e,velocity:t.setUp(e.velocity)})}},methods:{destroy:function(){this.v.recycle(),this.incidentVector.recycle(),this.otherV.recycle(),this.hitThisTick.recycle(),this.otherVelocityData.recycle()}},publicMethods:{}})}(),function(){"use strict";var t=include("platypus.Entity");platypus.createComponentClass({id:"LogicRegionSpawner",initialize:function(t){var e=0,i=0,n=1,r=1,s=0,o=0,a=0,h=0;if(this.spawnPosition={x:0,y:0},this.spawnProperties={type:t.spawn,properties:this.spawnPosition},this.regions=null,this.usedRegions=null,this.regionWidth=0,this.regionHeight=0,t.regions)for(this.regions=Array.setUp(),this.usedRegions=Array.setUp(),this.regionWidth=s=t.regions.width||this.owner.width,this.regionHeight=o=t.regions.height||this.owner.height,n=Math.round(this.owner.width/s),r=Math.round(this.owner.height/o),e=0;e<n;e++)for(i=0;i<r;i++)a=Math.min(s,this.owner.width-e*s),h=Math.min(o,this.owner.height-i*o),this.regions.push({x:e*s,y:i*o,width:a,height:h});this.interval=this.owner.interval||t.interval||1e3,this.time=0},events:{"handle-logic":function(t){var e=this.regions,i=null;this.time+=t.delta,this.time>this.interval&&(this.time-=this.interval,e?(e.length||(this.regions=this.usedRegions,this.usedRegions=e,e=this.regions),i=e[Math.floor(e.length*Math.random())],this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+(i.x+Math.random()*i.width),this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+(i.y+Math.random()*i.height)):(this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+Math.random()*this.owner.width,this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+Math.random()*this.owner.height),this.owner.parent.addEntity(this.spawnProperties))}},methods:{destroy:function(){this.regions&&(this.regions.recycle(),this.usedRegions.recycle())}},getAssetList:function(e,i,n){var r=e.spawn||i.spawn||n.spawn;return r?t.getAssetList({type:r}):Array.setUp()}})}(),function(){"use strict";var t=Math.cos,e=Math.sin,i=function(e,i){return e*t(i)},n=function(t,i){return t*e(i)};platypus.createComponentClass({id:"LogicRotationalMovement",properties:{speed:.3,angle:0,degree:1},initialize:function(){var t=this.owner.state;this.magnitude=0,this.state=t,t.set("moving",!1),t.set("turningRight",!1),t.set("turningLeft",!1),this.owner.orientation=0,this.moving=!1,this.turningRight=!1,this.turningLeft=!1},events:{"handle-logic":function(t){var e=this.state;this.turningRight&&(this.angle+=this.degree*t.delta/15),this.turningLeft&&(this.angle-=this.degree*t.delta/15),this.moving&&(this.owner.x+=i(this.magnitude,this.angle)*t.delta,this.owner.y+=n(this.magnitude,this.angle)*t.delta),e.set("moving",this.moving),e.set("turningLeft",this.turningLeft),e.set("turningRight",this.turningRight),this.owner.orientation!==this.angle&&(this.owner.orientation=this.angle*Math.PI/180,this.owner.triggerEvent("orientation-updated"))},rotate:function(t){this.angle+=t},"turn-right":function(t){this.turningRight=!t||t.pressed},"turn-left":function(t){this.turningLeft=!t||t.pressed},"go-forward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=this.speed):this.moving=!1},"go-backward":function(t){!t||t.pressed?(this.moving=!0,this.magnitude=-this.speed):this.moving=!1},stop:function(t){t&&!t.pressed||(this.moving=!1,this.turningLeft=!1,this.turningRight=!1)},"stop-moving":function(t){t&&!t.pressed||(this.moving=!1)},"stop-turning":function(t){t&&!t.pressed||(this.turningLeft=!1,this.turningRight=!1)}},methods:{destroy:function(){this.state=null}}})}(),function(){"use strict";var t=include("platypus.Entity");platypus.createComponentClass({id:"LogicSpawner",initialize:function(t){var e=this.owner.spawneeClass||t.spawneeClass,i="",n=0;if(this.state=this.owner.state,this.stateName=t.state||"spawning",this.originalZ=platypus.game.settings.entities[e]&&platypus.game.settings.entities[e].properties&&platypus.game.settings.entities[e].properties.z||0,this.speed=t.speed||this.owner.speed||0,this.state.set(this.stateName,!1),this.spawneeProperties={x:0,y:0,z:0,dx:0,dy:0,spawner:this.owner},t.passOnProperties)for(n=0;n<t.passOnProperties.length;n++)i=t.passOnProperties[n],this.owner[i]&&(this.spawneeProperties[i]=this.owner[i]);this.propertiesContainer={type:e,properties:this.spawneeProperties},this.offsetX=this.owner.offsetX||t.offsetX||0,this.offsetY=this.owner.offsetY||t.offsetY||0,this.firing=!1},events:{"handle-logic":function(){var t=0,e=this.state;this.firing&&(this.spawneeProperties.x=this.owner.x,this.spawneeProperties.y=this.owner.y,this.spawneeProperties.z=this.owner.z+this.originalZ,t=this.offsetX,e.get("left")&&(t*=-1),this.spawneeProperties.x+=t,t=this.offsetY,e.get("top")&&(t*=-1),this.spawneeProperties.y+=t,this.speed?(e.get("top")?this.spawneeProperties.dy=-this.speed:e.get("bottom")?this.spawneeProperties.dy=this.speed:delete this.spawneeProperties.dy,e.get("left")?this.spawneeProperties.dx=-this.speed:e.get("right")?this.spawneeProperties.dx=this.speed:delete this.spawneeProperties.dx):(delete this.spawneeProperties.dx,delete this.spawneeProperties.dy),this.parent.addEntity(this.propertiesContainer)),e.set(this.stateName,this.firing),this.firing=!1},spawn:function(t){this.firing=!t||!1!==t.pressed,this.parent=this.owner.parent}},methods:{destroy:function(){this.state=null}},getAssetList:function(e,i,n){var r=e.spawneeClass||i.spawneeClass||n.spawneeClass;return r?t.getAssetList({type:r}):Array.setUp()}})}(),function(){"use strict";var t=include("platypus.DataMap"),e=include("platypus.StateMap"),i=function(t,e){e.update(t)},n=function(t,e){e.set(t,!0)},r=null,s=null,o=function(e){var i=null,n="";if(!e||"object"!=typeof e||Array.isArray(e)||e.event)return e;for(n in i=t.setUp(),e)e.hasOwnProperty(n)&&i.set(n,o(e[n]));return i};r=function(t,e,i,n,o,a,h){var l,u=0,c="",d=n.message||0===n.message||!1===n.message,p=null;if(o){if("string"==typeof n)return void a.triggerEvent(n);if(Array.isArray(n)){for(u=0;u<n.length;u++)r(t,e,i,n[u],o,a,h);return}if(n.event&&(d||n.delay))return void(n.delay?h.push(n):a.trigger(n.event,n.message));n.get&&(p=n.get("true"))&&r(t,e,i,p,o,a,h)}if(l=n.keys)for(u=l.length;u--;)"true"!==(c=l[u])&&s(c,e,i,n.get(c),o,a,h)},s=function(t,e,i,n,s,o,a){var h=s,l=!1,u="",c=!1;"!"===t.charAt(0)?(u=t.substring(1),l=!1===(c=e.get(u)),"outputs"!==t&&i.get(u)!==c&&(h=!0)):(l=!0===(c=e.get(t)),"outputs"!==t&&i.get(t)!==c&&(h=!0)),(l||"outputs"===t)&&r(t,e,i,n,h,o,a)},platypus.createComponentClass({id:"LogicStateMachine",properties:{inputs:null,outputs:null},initialize:function(t){var r=0,s=this.inputs,a="",h=null,l=null,u=null,c=t["sustained-inputs"],d=this.owner.state;if(this.state=d,s){for(a in u=Array.setUp(),s)if(s.hasOwnProperty(a))for(l=e.setUp(s[a]),u.push(l),this.addEventListener(a,i.bind(this,l,d)),r=(h=l.keys).length;r--;)d.set(h[r],!1);this.stateObjects=u}if(this.sustainedState=e.setUp(),c)for(a in c)c.hasOwnProperty(a)&&(this.addEventListener(a,n.bind(this,c[a],this.sustainedState)),this.sustainedState.set(c[a],!1),d.set(c[a],!1));this.snapshot=e.setUp(),this.last=e.setUp(),this.queueTimes=Array.setUp(),this.queue=Array.setUp(),this.outputs=o(this.outputs)},events:{"handle-logic":function(t){for(var e=this.sustainedState,i="",n=e.keys,r=n.length,s=this.state;r--;)i=n[r],s.set(i,e.get(i)),e.set(i,!1);for(r=this.queue.length;r--;)this.queueTimes[r]-=t.delta,this.queueTimes[r]<=0&&(this.owner.trigger(this.queue[r].event,this.queue[r].message),this.queueTimes.greenSplice(r),this.queue.greenSplice(r))},"update-state":function(t){this.state.update(t)},"state-changed":function(t){var e=0,i=null,n=this.snapshot;if(this.outputs){for(n.update(t),i=Array.setUp(),s("outputs",n,this.last,this.outputs,!1,this.owner,i),e=i.length;e--;)this.queue.push(i[e]),this.queueTimes.push(i[e].delay);i.recycle(),this.last.update(n)}}},methods:{destroy:function(){var t=0,e=this.stateObjects;if(this.queueTimes.recycle(),this.queue.recycle(),e){for(t=e.length;t--;)e[t].recycle();e.recycle(),this.stateObjects=null}this.sustainedState.recycle(),this.snapshot.recycle(),this.last.recycle(),this.state=null,this.inputs=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicSwitch",initialize:function(t){this.state=this.owner.state,this.pressed=!1,this.wasPressed=this.pressed,this.sticky=t.sticky||!1,this.state.set("pressed",!1),this.initialPress=!0},events:{"handle-logic":function(){this.sticky?this.pressed&&!this.wasPressed&&(this.state.set("pressed",!0),this.wasPressed=!0,this.owner.triggerEvent("switch-on")):(this.pressed!==this.wasPressed&&(this.pressed?(this.state.set("pressed",!0),this.owner.triggerEvent("switch-on")):(this.state.set("pressed",!1),this.owner.triggerEvent("switch-off"))),this.wasPressed=this.pressed,this.pressed=!1)},"switch-pressed":function(){this.pressed=!0,this.initialPress&&(this.owner.triggerEvent("initial-press"),this.initialPress=!1)}},methods:{destroy:function(){this.state=null}}})}(),function(){"use strict";var t=include("platypus.Vector");platypus.createComponentClass({id:"LogicTeleportee",initialize:function(){this.teleportDestination=t.setUp(),this.teleportNow=!1,this.DestinationSet=!1,this.message={position:this.teleportDestination}},events:{"handle-logic":function(){this.teleportNow&&(this.owner.triggerEvent("relocate-entity",this.message),this.teleportNow=!1,this.owner.triggerEvent("teleport-complete"))},teleport:function(){this.destinationSet&&(this.teleportNow=!0)},"set-destination":function(t){this.setDestination(t)},"hit-telepoint":function(t){this.setDestination(t.entity)}},methods:{setDestination:function(t){this.teleportDestination.setXYZ(t.x,t.y,this.owner.z),this.destinationSet=!0},destroy:function(){this.teleportDestination.recycle()}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicTeleporter",initialize:function(t){this.destination=null,this.linkId=this.owner.teleportId||t.teleportId,this.facing=this.owner.facing||t.facing||!1,this.facing&&this.owner.state.set("facing-"+this.facing,!0)},events:{"peer-entity-added":function(t){this.destination||t.linkId!==this.linkId||(this.destination=t)},"teleport-entity":function(t){switch(this.facing){case"up":t.y<0&&t.entity.triggerEvent("teleport",this.destination);break;case"right":t.x>0&&t.entity.triggerEvent("teleport",this.destination);break;case"down":t.y>0&&t.entity.triggerEvent("teleport",this.destination);break;case"left":t.x<0&&t.entity.triggerEvent("teleport",this.destination);break;default:t.entity.triggerEvent("teleport",this.destination)}}},methods:{destroy:function(){this.destination=null}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicTimer",initialize:function(t){this.time=this.owner.time||t.time||0,this.prevTime=this.time,this.alarmTime=this.owner.alarmTime||t.alarmTime||0,this.isInterval=this.owner.isInterval||t.isInterval||!1,this.alarmMessage=this.owner.alarmMessage||t.alarmMessage||"",this.updateMessage=this.owner.updateMessage||t.updateMessage||"",this.isOn=this.owner.on||t.on||!0,this.isIncrementing=this.owner.isIncrementing||t.isIncrementing||!0,this.maxTime=this.owner.maxTime||t.maxTime||36e5},events:{"handle-logic":function(t){this.isOn&&(this.prevTime=this.time,this.isIncrementing?this.time+=t.delta:this.time-=t.delta,Math.abs(this.time)>this.maxTime&&(this.time>0?this.time=this.maxTime:this.time<0&&(this.time=-this.maxTime),this.triggerEvent("stop-timer")),0!==this.alarmTime&&(this.isInterval?this.isIncrementing?Math.floor(this.time/this.alarmTime)>Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):Math.floor(this.time/this.alarmTime)<Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):this.isIncrementing?this.time>this.alarmTime&&this.prevTime<this.alarmTime&&this.owner.trigger(this.alarmMessage):this.time<this.alarmTime&&this.prevTime>this.alarmTime&&this.owner.trigger(this.alarmMessage))),this.owner.trigger(this.updateMessage,{time:this.time})},"set-timer":function(t){this.time=t.time},"start-timer":function(){this.isOn=!0},"stop-timer":function(){this.isOn=!1}}})}(),function(){"use strict";platypus.createComponentClass({id:"LogicWindUpRacer",properties:{speed:.3,raceTime:5e3,windTime:500},initialize:function(){var t=this.owner.state;this.windProgress=0,this.winding=!1,this.racing=!1,this.blocked=!1,this.right=!1,this.left=!1,this.state=t,t.set("windingUp",!1),t.set("racing",!1),t.set("blocked",!1)},events:{"handle-logic":function(t){var e=this.state;this.racing?!this.blocked&&this.right&&e.get("right")?(this.owner.x+=this.speed*t.delta,this.owner.triggerEvent("racing")):!this.blocked&&this.left&&e.get("left")?(this.owner.x-=this.speed*t.delta,this.owner.triggerEvent("racing")):(this.racing=!1,this.owner.triggerEvent("stopped-racing")):this.winding?((this.right&&e.get("right")||this.left&&e.get("left"))&&(this.windProgress+=t.delta),this.owner.triggerEvent("winding",this.windProgress/this.windTime)):this.windProgress&&(this.windProgress>=this.windTime&&(this.racing=!0),this.windProgress=0,this.owner.triggerEvent("stopped-winding")),e.set("windingUp",this.winding),e.set("racing",this.racing),e.set("blocked",this.blocked),this.blocked=!1},"stop-racing":function(){this.racing=!1,this.owner.triggerEvent("stopped-racing")},"wind-up":function(t){this.winding=!t||!1!==t.pressed,this.right=this.state.get("right"),this.left=this.state.get("left")},"hit-solid":function(t){t.x&&this.racing&&(this.right&&t.x>0||this.left&&t.x<0)&&(this.blocked=!0,this.owner.triggerEvent("blocked",t))}},methods:{destroy:function(){this.state.set("windingUp",!1),this.state.set("racing",!1),this.state.set("blocked",!1),this.state=null}}})}(),function(){"use strict";var t=include("platypus.Vector"),e=function(){return!0},i=function(t,e){return t.get(e)},n=function(t,n){var r=t.owner.state,s=n.controlState?i.bind(null,r,n.controlState):e,o=n.instantState?i.bind(null,r,n.instantState):e;t.instant||n.instantState?(t.instant=!0,t.update=function(t,e,i){var n=t(),r=e();if(this.activeVelocity){if(this.enact&&!r&&(this.ready=!1),this.ready&&this.enact&&n)this.ready=!1,this.velocity.setVector(this.instant),i&&this.owner.triggerEvent(i);else if(this.ready||this.enact&&n){if(r)return null}else this.ready=!0,this.decay();return this.velocity}return null}.bind(t,o,s,n.instantSuccess)):t.update=function(t,e){return this.activeVelocity&&t()?(this.activeAcceleration&&this.move(e),this.velocity):null}.bind(t,s)};platypus.createComponentClass({id:"Motion",properties:{orient:!0,acceleration:0,activeAcceleration:!0,activeVelocity:!0,maxMagnitude:1/0,controlState:"",instant:!1,instantState:"",instantSuccess:"",instantDecay:null,velocity:0,stopOnCollision:!0,drag:-1,friction:-1},initialize:function(e){this.acceleration||(this.activeAcceleration=!1),this.acceleration=t.setUp(this.acceleration),this.velocity=t.setUp(this.velocity),this.triggered=!1,this.ready=!0,"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1,n(this,e),this.instant&&(this.enact=!1,this.instant=t.setUp(this.velocity),this.velocity.setXYZ(0,0,0)),this.orient&&(this.owner.triggerEvent("orient-vector",this.velocity),this.owner.triggerEvent("orient-vector",this.acceleration))},events:{"control-velocity":function(t){this.activeVelocity=t&&!1!==t.pressed},"stop-velocity":function(){this.activeVelocity=!1},"start-velocity":function(){this.activeVelocity=!0},"control-acceleration":function(t){this.activeAcceleration=t&&!1!==t.pressed},"stop-acceleration":function(){this.activeAcceleration=!1},"start-acceleration":function(){this.activeAcceleration=!0},"instant-motion":function(t){this.enact=t&&!1!==t.triggered},"instant-begin":function(){this.enact=!0},"instant-end":function(){this.enact=!1},"set-motion":function(t){t.acceleration&&this.acceleration.set(t.acceleration),t.velocity&&(this.velocity.set(t.velocity),"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1),"number"==typeof t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)}},methods:{move:function(e){var i=t.setUp(this.acceleration).multiply(e);return this.velocity.add(i),i.recycle(),this.velocity.magnitude()>this.maxMagnitude&&this.velocity.normalize().multiply(this.maxMagnitude),this.velocity},decay:function(){this.capMagnitude>=0&&this.velocity.magnitude()>this.capMagnitude&&this.velocity.normalize().multiply(this.capMagnitude)},destroy:function(){this.orient&&(this.owner.triggerEvent("remove-vector",this.acceleration),this.owner.triggerEvent("remove-vector",this.velocity)),this.acceleration.recycle(),this.velocity.recycle(),this.instant&&this.instant.recycle()}},publicMethods:{}})}(),function(){"use strict";var t=include("platypus.Vector"),e=t.setUp(),i=function(t,e,i,n){return t&&e!==i?e<i?Math.min(e+t*n,i):Math.max(e-t*n,i):e},n=function(t,e){var n=this.maxMagnitudeInterim=i(this.maxMagnitudeDelta,this.maxMagnitudeInterim,this.maxMagnitude,e);t.magnitude()>n&&t.normalize().multiply(n)},r=function(t,e){var n=this.maxMagnitude,r=this.maxMagnitudeDelta,s=this.maxMagnitudeInterim;s.up=i(r,s.up,n.up,e),s.right=i(r,s.right,n.right,e),s.down=i(r,s.down,n.down,e),s.left=i(r,s.left,n.left,e),t.x>0?t.x>s.right&&(t.x=s.right):t.x<0&&t.x<-s.left&&(t.x=-s.left),t.y>0?t.y>s.down&&(t.y=s.down):t.y<0&&t.y<-s.up&&(t.y=-s.up)};platypus.createComponentClass({id:"Mover",properties:{ground:[0,1]},publicProperties:{movers:[],gravity:0,jump:0,speed:0,drag:.01,friction:.06,maxMagnitude:1/0,maxMagnitudeDelta:0,reorientVelocities:!0},initialize:function(){var e=1/0,i=this.maxMagnitude,s=this.owner.state;platypus.Vector.assign(this.owner,"position","x","y","z"),platypus.Vector.assign(this.owner,"velocity","dx","dy","dz"),this.position=this.owner.position,this.velocity=this.owner.velocity,this.lastVelocity=t.setUp(this.velocity),this.collision=null,this.pause=!1,this.moversCopy=this.movers,this.movers=Array.setUp(),this.velocityChanges=Array.setUp(),this.velocityDirections=Array.setUp(),this.ground=t.setUp(this.ground),this.state=s,s.set("grounded",!1),Object.defineProperty(this.owner,"maxMagnitude",{get:function(){return e},set:function(t){"number"==typeof t?(this.clamp=n,e=t,this.maxMagnitudeDelta||(this.maxMagnitudeInterim=t)):(this.clamp=r,"number"==typeof e&&(e={up:e,right:e,down:e,left:e}),"number"==typeof t.up&&(e.up=t.up),"number"==typeof t.right&&(e.right=t.right),"number"==typeof t.down&&(e.down=t.down),"number"==typeof t.left&&(e.left=t.left),"number"==typeof this.maxMagnitudeInterim?this.maxMagnitudeDelta?this.maxMagnitudeInterim={up:this.maxMagnitudeInterim,right:this.maxMagnitudeInterim,down:this.maxMagnitudeInterim,left:this.maxMagnitudeInterim}:this.maxMagnitudeInterim={up:e.up,right:e.right,down:e.down,left:e.left}:this.maxMagnitudeDelta||(this.maxMagnitudeInterim.up=e.up,this.maxMagnitudeInterim.right=e.right,this.maxMagnitudeInterim.down=e.down,this.maxMagnitudeInterim.left=e.left))}.bind(this)}),this.maxMagnitudeInterim=0,this.maxMagnitude=i},events:{"component-added":function(t){"Motion"===t.type&&this.movers.push(t)},"component-removed":function(t){var e=0;"Motion"===t.type&&(e=this.movers.indexOf(t))>=0&&this.movers.greenSplice(e)},load:function(){var t=0,e=this.moversCopy;for(delete this.moversCopy,t=0;t<e.length;t++)this.addMover(e[t]);this.externalForces=this.addMover({velocity:[0,0,0],orient:!1}).velocity,this.speed&&(isNaN(this.speed)||(this.speed=[this.speed,0,0]),this.speed=this.addMover({velocity:this.speed,controlState:"moving"}).velocity),this.gravity&&(isNaN(this.gravity)||(this.gravity=[0,this.gravity,0]),this.gravity=this.addMover({acceleration:this.gravity,orient:!1,aliases:{gravitate:"control-acceleration"}}).acceleration),this.jump&&(isNaN(this.jump)||(this.jump=[0,this.jump,0]),this.jump=this.addMover({velocity:this.jump,instant:!0,controlState:"grounded",state:"jumping",instantSuccess:"just-jumped",instantDecay:.2,aliases:{jump:"instant-motion"}}).instant)},"handle-movement":function(e){var i=e.delta,n=null,r=this.state,s=null,o=this.velocity,a=this.position,h=this.movers,l=h.length;if(!r.get("paused")&&!this.paused){for(o.equals(this.lastVelocity,2)||this.externalForces.addVector(o).subtractVector(this.lastVelocity),o.setXYZ(0,0,0);l--;)(n=h[l].update(i))&&(this.grounded?-1!==h[l].friction?n.multiply(1-h[l].friction):n.multiply(1-this.friction):-1!==h[l].drag?n.multiply(1-h[l].drag):n.multiply(1-this.drag),o.add(n));this.clamp(o,i),this.lastVelocity.setVector(o),s=t.setUp(o).multiply(i),a.add(s),s.recycle(),r.set("grounded",this.grounded),this.grounded=!1}},"hit-solid":function(e){var i=0,n=0,r=e.entity&&e.entity.velocity,s=e.direction,o=!0,a=this.velocityChanges,h=this.velocityDirections,l=a.length;if(s.dot(this.ground)>0&&(this.grounded=!0),(i=this.velocity.scalarProjection(s))>0){for(r?i=(n=Math.max(r.scalarProjection(s),0))<i?n:0:i=0;l--;)if(i<a[l]&&h[l].dot(s)>0){a[l]=i,h[l].setVector(s),o=!1;break}o&&(a.push(i),h.push(t.setUp(s)))}},"handle-post-collision-logic":function(){var t=null,i=this.movers,n=this.velocityChanges,r=this.velocityDirections,s=n.length,o=i.length,a=null,h=0,l=null,u=e;if(s){for(l=Array.setUp();o--;)(a=i[o]).stopOnCollision&&l.push(a);for(;s--;){for(t=r[s],h=n[s]/(o=l.length);o--;)a=l[o],u.setVector(t).normalize().multiply(h-a.velocity.scalarProjection(t)),a.velocity.add(u);t.recycle()}n.length=0,r.length=0}},"set-mover":function(t){"number"==typeof t.maxMagnitudeDelta&&(this.maxMagnitudeDelta=t.maxMagnitudeDelta),t.maxMagnitude&&(this.maxMagnitude=t.maxMagnitude)},"pause-movement":function(){this.paused=!0},"unpause-movement":function(){this.paused=!1},"orientation-updated":function(t){this.reorientVelocities||this.lastVelocity.multiply(t)}},methods:{destroy:function(){var t=0,e=this.maxMagnitude;for(t=this.movers.length-1;t>=0;t--)this.removeMover(this.movers[t]);this.movers.recycle(),this.ground.recycle(),this.lastVelocity.recycle(),this.velocityChanges.recycle(),this.velocityDirections.recycle(),delete this.owner.maxMagnitude,this.owner.maxMagnitude=e,this.state=null}},publicMethods:{addMover:function(t){return this.owner.addComponent(new platypus.components.Motion(this.owner,t))},removeMover:function(t){this.owner.removeComponent(t)}}})}(),function(){"use strict";platypus.createComponentClass({id:"Node",publicProperties:{x:0,y:0,z:0},initialize:function(t){this.nodeId=t.nodeId||this.owner.nodeId||this.owner.id||String(Math.random()),"string"!=typeof this.nodeId&&this.nodeId.length&&(this.nodeId=t.nodeId.join("|")),this.owner.nodeId=this.nodeId,this.owner.isNode=!0,this.map=this.owner.map=this.owner.map||null,this.contains=this.owner.contains=Array.setUp(),this.edgesContain=this.owner.edgesContain=Array.setUp(),platypus.Vector.assign(this.owner,"position","x","y","z"),this.neighbors=this.owner.neighbors=t.neighbors||this.owner.neighbors||{}},events:{"add-neighbors":function(t){var e=0,i=null;for(i in t)t.hasOwnProperty(i)&&(this.neighbors[i]=t[i]);for(e=0;e<this.contains.length;e++)this.contains[e].triggerEvent("set-directions")},"remove-neighbor":function(t){var e=null,i=t;for(e in"string"!=typeof i&&(i=i.nodeId),this.neighbors)if(this.neighbors.hasOwnProperty(e))if("string"==typeof this.neighbors[e]){if(this.neighbors[e]===i){delete this.neighbors[e];break}}else if(this.neighbors[e].nodeId===i){delete this.neighbors[e];break}}},methods:{destroy:function(){this.contains.recycle(),this.edgesContain.recycle()}},publicMethods:{getNode:function(t){var e=null;if(!this.map&&this.owner.map&&(this.map=this.owner.map),this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(e.length&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},addToNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},removeFromNode:function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return this.contains.greenSplice(e);return!1},addToEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return!1;return this.edgesContain.push(t),t},removeFromEdge:function(t){var e=0;for(e=0;e<this.edgesContain.length;e++)if(this.edgesContain[e]===t)return this.edgesContain.greenSplice(e);return!1}}})}(),function(){"use strict";var t=include("platypus.Vector"),e=function(t,e){t.id?"string"==typeof t.id?this.id=t.id:Array.isArray(t.id)?this.id=t.id.join("|"):this.id=String(Math.random()):this.id=String(Math.random()),this.isNode=!0,this.map=e,this.contains=Array.setUp(),this.type=t.type||"",this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.neighbors=t.neighbors||{}},i=e.prototype;i.getNode=function(t){var e=null;if(this.neighbors[t]){if((e=this.neighbors[t]).isNode)return e;if("string"==typeof e){if(e=this.map.getNode(e))return this.neighbors[t]=e,e}else if(Array.isArray(e)&&(e=this.map.getNode(e.join("|"))))return this.neighbors[t]=e,e;return null}return null},i.add=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return!1;return this.contains.push(t),t},i.remove=function(t){var e=0;for(e=0;e<this.contains.length;e++)if(this.contains[e]===t)return this.contains.greenSplice(e);return!1},i.recycle=function(){this.contains.recycle(),this.recycle()},recycle.add(e,!!springroll.Debug,"Node"),platypus.createComponentClass({id:"NodeMap",publicProperties:{map:[]},initialize:function(){var t=0,i=this.map;for(this.map=Array.setUp(),this.nodes={},this.residentsAwaitingNode=Array.setUp(),t=0;t<i.length;t++)this.addNode(e.setUp(i[t],this))},events:{"add-node":function(t){var i=0,n=null,r=null;for(t.isNode?(r=t,t.map=this):r=e.setUp(t,this),this.addNode(r),i=this.residentsAwaitingNode.length-1;i>=0;i--)n=this.residentsAwaitingNode[i],r.id===n.nodeId&&(this.residentsAwaitingNode.greenSplice(i),n.node=this.getNode(n.nodeId),n.triggerEvent("on-node",n.node))},"child-entity-added":function(t){t.isNode?this.owner.triggerEvent("add-node",t):t.nodeId&&(t.node=this.getNode(t.nodeId),t.node?t.triggerEvent("on-node",t.node):this.residentsAwaitingNode.push(t))}},methods:{addNode:function(t){this.map.push(t),this.nodes[t.id]=t},destroy:function(){var t=0;for(t=0;t<this.map.length;t++)this.map[t]instanceof platypus.Entity||this.map[t].recycle();this.map.recycle(),this.residentsAwaitingNode.recycle()}},publicMethods:{getNode:function(){var t=0,e="",i="",n=arguments;if(1===n.length){if(n[0].isNode)return n[0];Array.isArray(n[0])&&(n=n[0])}for(t=0;t<n.length;t++)e+=i+n[t],i="|";return this.nodes[e]||null},getClosestNode:function(e,i,n){var r=0,s=t.setUp(e),o=t.setUp(),a=0,h=i||this.map,l=null,u=1/0;for(r=0;r<h.length;r++)if((a=o.setVector(s).subtractVector(h[r].position).magnitude())<u){if(n&&n.indexOf(h[r])>=0)break;u=a,l=h[r]}return s.recycle(),o.recycle(),l}}})}(),function(){"use strict";var t=function(t,e,i){return function(){var n=e.getNode(t);return!!this.isPassable(n)&&(this.destinationNodes.length=0,this.destinationNodes.push(n),this.node?this.onEdge(n):this.distance=0,this.progress=0,this.setState("going-"+i),!0)}},e=function(t,e){var i=e.x-t.x,n=e.y-t.y,r=e.z-t.z;return Math.sqrt(i*i+n*n+r*r)},i=function(t,e,i,n){var r=e.x-t.x,s=e.y-t.y,o=0;return t.rotation&&e.rotation?((r=(t.rotation+180)%360)*(1-n)+(s=(e.rotation+180)%360)*n+180)%360:i?(o=Math.acos(r/i),s<0&&(o=2*Math.PI-o),180*o/Math.PI):o},n=function(t,e,i,n){return e*(1-t)+i*t+n};platypus.createComponentClass({id:"NodeResident",publicProperties:{speed:0},initialize:function(t){var i=t.offset||this.owner.nodeOffset||{};this.nodeId=this.owner.nodeId=t.nodeId||this.owner.nodeId,this.neighbors={},this.friendlyNodes=t.nodes||null,this.friendlyEntities=t.shares||null,this.snapToNodes=t.snapToNodes||!1,this.updateOrientation=t.updateOrientation||!1,this.distance=0,this.buffer=t.buffer||0,this.progress=0,this.offset={x:i.x||0,y:i.y||0,z:i.z||0},this.destinationNodes=Array.setUp(),this.algorithm=t.algorithm||e,this.state=this.owner.state,this.state.set("moving",!1),this.state.set("on-node",!1),this.currentState=""},events:{"set-algorithm":function(t){this.algorithm=t||e},"handle-logic":function(t){var e=0,r=0,s=0,o=null,a=null;if(this.owner.node||(a=Array.setUp(this.owner.x,this.owner.y),this.owner.triggerEvent("on-node",this.owner.parent.getClosestNode(a)),a.recycle(),this.owner.triggerEvent("in-location",this.owner)),this.followEntity?(o=this.followEntity.node||this.followEntity)&&o.isNode&&o!==this.node?(this.lag=0,this.state.set("moving",this.gotoNode()),this.followDistance&&(s=this.lag)):this.followEntity=null:s=this.speed*t.delta,this.blocked&&(this.blocked=!1,this.goingToNode&&this.owner.triggerEvent("goto-closest-node",this.goingToNode)),this.destinationNodes.length){if(this.state.set("moving",0!==this.speed),this.node)this.onEdge(this.destinationNodes[0]);else if(!this.lastNode&&(this.owner.triggerEvent("on-node",this.destinationNodes[0]),this.destinationNodes.greenSplice(0),!this.destinationNodes.length))return void this.state.set("moving",!1);if(this.snapToNodes){for(e=0;e<this.destinationNodes.length;e++)this.owner.triggerEvent("on-node",this.destinationNodes[e]);this.destinationNodes.length=0}else for(;this.destinationNodes.length&&s;)this.progress+s>=this.distance?(o=this.destinationNodes[0],s-=this.distance-this.progress,this.progress=0,this.destinationNodes.greenSplice(0),this.owner.triggerEvent("on-node",o),this.destinationNodes.length&&s&&this.onEdge(this.destinationNodes[0])):(this.progress+=s,r=this.progress/this.distance,this.owner.x=n(r,this.lastNode.x,this.destinationNodes[0].x,this.offset.x),this.owner.y=n(r,this.lastNode.y,this.destinationNodes[0].y,this.offset.y),this.owner.z=n(r,this.lastNode.z,this.destinationNodes[0].z,this.offset.z),this.updateOrientation&&(this.owner.rotation=i(this.lastNode,this.destinationNodes[0],this.distance,r)),s=0)}else this.state.set("moving",!1)},"on-node":function(t){var e=0,i=null;for(this.owner.node=this.node=t,this.node.removeFromEdge(this.owner),this.lastNode&&this.lastNode.removeFromEdge(this.owner),this.node.addToNode(this.owner),this.setState("on-node"),this.owner.x=this.node.x+this.offset.x,this.owner.y=this.node.y+this.offset.y,this.owner.z=this.node.z+this.offset.z,this.updateOrientation&&this.node.rotation&&(this.owner.rotation=this.node.rotation),this.owner.triggerEvent("set-directions"),this.friendlyNodes&&this.friendlyNodes[t.type]&&this.owner.trigger(this.friendlyNodes[t.type],t),i=t.contains,e=0;e<i.length;e++)this.owner!==i[e]&&(i[e].triggerEvent("with-"+this.owner.type,this.owner),this.owner.triggerEvent("with-"+i[e].type,i[e]))},"leave-node":function(){this.node&&(this.node.removeFromNode(this.owner),this.owner.triggerEvent("left-node",this.node),this.owner.triggerEvent("remove-directions")),this.lastNode=this.node,this.node=null},"goto-node":function(t){this.gotoNode(t)},follow:function(t){t.entity?(this.followDistance=t.distance,this.followEntity=t.entity):(this.followDistance=0,this.followEntity=t)},"goto-closest-node":function(){var t=function(t,e){var i=0;for(i=0;i<e.length;i++)if(e[i]===t)return!0;return!1},e=function(t,e){return t.type===e},i=function(t,e){return t.type===e.type};return function(n){var r=null,s=this.node||this.lastNode,o=null,a=n.steps||0,h=null;this.goingToNode=n,o="string"==typeof n?e:"string"==typeof n.type?i:t,s&&n&&!o(s,n)&&(h=Array.setUp(),(r=this.traverseNode({depth:20,origin:s,position:s,test:o,destination:n,nodes:h,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,r.found?this.followEntity&&this.followDistance?r.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=r.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(r,a)):this.lag=0:this.setPath(r,a):r.blocked&&(this.blocked=!0),h.recycle())}}(),"set-directions":function(){var e="",i=0,n=null,r=this.node,s=null;for(e in this.owner.triggerEvent("remove-directions"),r.neighbors)if(r.neighbors.hasOwnProperty(e)&&(this.neighbors[e]=t(r.neighbors[e],r.map,e),this.addEventListener(e,this.neighbors[e]),s=r.map.getNode(r.neighbors[e])))for(n=s.contains,i=0;i<n.length;i++)n[i].triggerEvent("next-to-"+this.owner.type,this.owner),this.owner.triggerEvent("next-to-"+n[i].type,n[i])},"remove-directions":function(){var t="";for(t in this.neighbors)this.neighbors.hasOwnProperty(t)&&(this.removeEventListener(t,this.neighbors[t]),delete this.neighbors[t])}},methods:{gotoNode:function(){var t=function(t,e){return t===e};return function(e){var i=null,n=this.node||this.lastNode,r=null,s=!1;return!e&&this.followEntity&&(e=this.followEntity.node||this.followEntity.lastNode||this.followEntity),n&&e&&this.node!==e&&(r=Array.setUp(),(i=this.traverseNode({depth:20,origin:n,position:n,test:t,destination:e,nodes:r,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1})).distance-=this.progress,i.found?this.followEntity&&this.followDistance?i.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=i.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(i),s=!0):this.lag=0:(this.setPath(i),s=!0):i.blocked&&(this.blocked=!0),r.recycle()),s}}(),isPassable:function(t){return t&&this.node!==t&&(!this.friendlyNodes||void 0!==this.friendlyNodes[t.type])&&(!t.contains.length||function(t,e){var i=0,n=0,r=!1;if(null===e)return!0;for(i=0;i<t.length;i++){for(n=0;n<e.length;n++)t[i].type===e[n]&&(r=!0);if(!r)return!1;r=!1}return!0}(t.contains,this.friendlyEntities))},traverseNode:function(t){var i=1,n="",r=t.position.map,s=null,o=null,a=null,h=null,l=t.algorithm||e,u={shortestPath:1/0,found:!1,blocked:!1},c=!0,d=!1;if(0===t.depth||t.distance>t.shortestPath)return t;if(t.test(t.position,t.destination))return t.found=!0,t.shortestPath=t.distance,t;for(a=t.nodes,i=1;i<a.length-1;i++)if(a[i]===t.position)return t;for(n in s=t.position.neighbors)s.hasOwnProperty(n)&&(o=r.getNode(s[n]),d=!0,this.isPassable(o)&&((a=t.nodes.greenSlice()).push(o),h=this.traverseNode({depth:t.depth-1,origin:t.origin,position:o,destination:t.destination,test:t.test,algorithm:l,nodes:a,shortestPath:t.shortestPath,distance:t.distance+l(t.position,o),gateway:t.gateway||n,found:!1,blocked:!1}),a.recycle(),h.found&&u.shortestPath>h.shortestPath&&(u=h),c=!1));return u.blocked=d&&c,u},setPath:function(t,e){t.nodes[0]===this.node&&t.nodes.greenSplice(0),this.destinationNodes.recycle(),this.destinationNodes=t.nodes.greenSlice(),e&&(this.destinationNodes.length=Math.min(e,this.destinationNodes.length))},setState:function(t){"on-node"===t?this.state.set("on-node",!0):(this.state.set("on-node",!1),this.currentState&&this.state.set(this.currentState,!1),this.currentState=t,this.state.set(t,!0))},onEdge:function(t){this.distance=e(this.node,t),this.updateOrientation&&(this.owner.rotation=i(this.node,t,this.distance,this.progress/this.distance)),this.node.addToEdge(this.owner),t.addToEdge(this.owner),this.owner.triggerEvent("leave-node")},destroy:function(){this.destinationNodes.recycle(),this.state=null}}})}(),function(){"use strict";var t=include("platypus.Data"),e=include("platypus.Vector"),i=e.setUp(0,0,1),n=e.setUp(1,0,0),r={identity:[[1,0,0],[0,1,0],[0,0,1]],horizontal:[[-1,0,0],[0,1,0],[0,0,-1]],vertical:[[1,0,0],[0,-1,0],[0,0,-1]],diagonal:[[0,1,0],[1,0,0],[0,0,-1]],"diagonal-inverse":[[0,-1,0],[-1,0,0],[0,0,-1]],"rotate-90":[[0,-1,0],[1,0,0],[0,0,1]],"rotate-180":[[-1,0,0],[0,-1,0],[0,0,1]],"rotate-270":[[0,1,0],[-1,0,0],[0,0,1]]},s=function(){var t=function(t,e,i){var n=0,r=0;for(n=0;n<t.length;n++)r+=t[n]*i[n][e];return r};return function(e,i,n){var r=0,s=0,o=Array.setUp();for(r=0;r<e.length;r++)for(s=0;s<e[0].length;s++)o.push(t(e[r],s,i));for(r=0;r<e.length;r++)for(s=0;s<e[0].length;s++)n[r][s]=o.greenSplice(0);o.recycle()}}(),o=function(t){var e=0,i=0;for(e=0;e<3;e++)for(i=0;i<3;i++)t[e][i]=e===i?1:0;return t};platypus.createComponentClass({id:"Orientation",publicProperties:{scaleX:1,scaleY:1,rotation:0,orientation:0,orientationMatrix:null},initialize:function(){this.loadedOrientationMatrix=this.orientationMatrix,this.matrix=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1)),this.matrixTween=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1)),this.relocationMessage=t.setUp("position",null),this.vectors=Array.setUp(),this.inverses=Array.setUp(),this.tweens=Array.setUp(),this.orientationVector=function(t,r){var a=e.setUp(1,0,0),h=t.owner,l=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1));return Object.defineProperty(h,"orientationMatrix",{get:function(){return s(t.matrixTween,t.matrix,o(l)),l},enumerable:!0}),delete h.orientation,Object.defineProperty(h,"orientation",{get:function(){return a.signedAngleTo(n,i)},set:function(t){a.setVector(n).rotate(t)},enumerable:!0}),r&&("number"!=typeof r?a.set(r):a.rotate(r)),a}(this,this.orientation),this.owner.triggerEvent("orient-vector",this.orientationVector),this.owner.state.set("reorienting",!1)},events:{load:function(){this.loadedOrientationMatrix?this.transform(this.loadedOrientationMatrix):(this.scaleX&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.transform("horizontal")),this.scaleY&&this.scaleY<0&&(this.scaleY=-this.scaleY,this.transform("vertical")),this.rotation&&((this.rotation+270)%360==0?(this.rotation=0,this.transform("rotate-90")):(this.rotation+180)%360==0?(this.rotation=0,this.transform("rotate-180")):(this.rotation+90)%360==0&&(this.rotation=0,this.transform("rotate-270")))),delete this.loadedOrientationMatrix},"handle-logic":function(t){var e=this.tweens.length,i=t.delta,n=this.owner.state,r=null,s=null,a=this.relocationMessage;if(e){for(r=Array.setUp(),n.set("reorienting",!0),o(this.matrixTween);e--;)this.updateTween(this.tweens[e],i)&&r.push(this.tweens.greenSplice(e));for(e=this.vectors.length;e--;)this.updateVector(this.vectors[e],this.inverses[e]);for(e=r.length;e--;)s=r[e],this.transform(s.endMatrix),s.anchor&&(s.offset.multiply(s.endMatrix).addVector(s.anchor),a.position=s.offset,this.owner.triggerEvent("relocate-entity",a),s.recycleOffset&&s.offset.recycle()),s.onFinished(s.endMatrix),s.recycle();r.recycle()}else n.get("reorienting")&&(o(this.matrixTween),n.set("reorienting",!1))},"complete-tweens":function(){var t=0;for(t=0;t<this.tweens.length;t++)this.tweens[t].time=this.tweens[t].endTime},"drop-tweens":function(){var t=0;for(t=this.tweens.length;t--;)this.tweens[t].offset&&this.tweens[t].offset.recycle();for(this.tweens.length=0,t=this.vectors.length;t--;)this.updateVector(this.vectors[t],this.inverses[t])},"orient-vector":function(t){var i=t.aligned||!1;t.vector&&(t=t.vector),-1===this.vectors.indexOf(t)&&(i||t.multiply(this.matrix),this.vectors.push(t),this.inverses.push(e.setUp()))},"remove-vector":function(t){var e=this.vectors.indexOf(t);e>=0&&(this.vectors.greenSplice(e),this.inverses.greenSplice(e).recycle())},"tween-transform":function(){var e=function(){},i=function(){return!0},n=function(t){return t};return function(s){var o=null,a=s.angle||0,h=s.matrix,l=t.setUp("transform",s.transform,"anchor",s.anchor,"endTime",s.time||0,"time",0,"tween",s.tween||n,"onFinished",s.onFinished||e,"beforeTick",s.beforeTick||i,"afterTick",s.afterTick||e);if(h||(h=r[s.transform]),l.endMatrix=h,!a&&0===s.transform.indexOf("rotate"))switch(s.transform){case"rotate-90":a=Math.PI/2;break;case"rotate-180":a=Math.PI;break;case"rotate-270":a=-Math.PI/2;break;default:a=(o=s.transform.greenSplit("-"))[1]/180*Math.PI,o.recycle()}l.angle=a,s.anchor&&(l.offset=s.offset,l.offset||(l.offset=this.owner.position.copy().subtractVector(s.anchor,2),l.recycleOffset=!0)),this.tweens.push(l)}}(),transform:function(t){this.transform(t)},"prepend-transform":function(t){this.transform(t)},"append-transform":function(t){this.transform(t,!0)},"replace-transform":function(t){Array.isArray(t)?this.replace(t):"string"==typeof t&&r[t]&&this.replace(r[t])}},methods:{transform:function(t,e){Array.isArray(t)?this.multiply(t,e):"string"==typeof t&&r[t]&&this.multiply(r[t],e)},multiply:function(t,e){var i=0;for(e?s(this.matrix,t,this.matrix):s(t,this.matrix,this.matrix),i=0;i<this.vectors.length;i++)this.vectors[i].multiply(t),this.inverses[i].multiply(t);this.owner.triggerEvent("orientation-updated",t)},replace:function(){var t=function(t,e,i,n){return t*n-e*i},e=function(e){var i=Array.setUp(Array.setUp(),Array.setUp(),Array.setUp()),n=1/function(t){var e=0,i=0;for(e=0;e<3;e++)i+=t[e][0]*t[(e+1)%3][1]*t[(e+2)%3][2],i-=t[e][2]*t[(e+1)%3][1]*t[(e+2)%3][0];return i}(e);return i[0].push(t(e[1][1],e[1][2],e[2][1],e[2][2])*n),i[0].push(t(e[0][2],e[0][1],e[2][2],e[2][1])*n),i[0].push(t(e[0][1],e[0][2],e[1][1],e[1][2])*n),i[1].push(t(e[1][2],e[1][0],e[2][2],e[2][0])*n),i[1].push(t(e[0][0],e[0][2],e[2][0],e[2][2])*n),i[1].push(t(e[0][2],e[0][0],e[1][2],e[1][0])*n),i[2].push(t(e[1][0],e[1][1],e[2][0],e[2][1])*n),i[2].push(t(e[0][1],e[0][0],e[2][1],e[2][0])*n),i[2].push(t(e[0][0],e[0][1],e[1][0],e[1][1])*n),i};return function(t){var i=e(this.matrix);this.multiply(i),this.multiply(t),i.recycle(2)}}(),updateTween:function(){var t=function(t,e,i){return t*(1-i)+e*i};return function(i,n){var r=0,o=1,a=0,h=0,l=1,u=1,c=0,d=i.endMatrix,p=null,f=null,g=null;return i.beforeTick(i.time)&&(i.time+=n),i.time>=i.endTime||(r=i.tween(i.time/i.endTime),i.angle?(c=r*i.angle,o=l=Math.cos(c),h=-(a=Math.sin(c))):(o=t(o,d[0][0],r),a=t(a,d[1][0],r),h=t(h,d[0][1],r),l=t(l,d[1][1],r),u=t(u,d[2][2],r)),p=Array.setUp(Array.setUp(o,h,0),Array.setUp(a,l,0),Array.setUp(0,0,u)),s(this.matrixTween,p,this.matrixTween),i.anchor&&(f=e.setUp(i.offset).multiply(1-r),g=e.setUp(i.offset).multiply(r),this.owner.triggerEvent("relocate-entity",{position:f.add(g).multiply(p).addVector(i.anchor)}),f.recycle(),g.recycle()),i.afterTick(r,p),p.recycle(2),!1)}}(),updateVector:function(t,e){e.setVector(t.add(e)),t.multiply(this.matrixTween),e.subtractVector(t)},destroy:function(){this.vectors.recycle(),this.inverses.recycle(),this.tweens.recycle(),this.orientationVector.recycle(),this.orientationMatrix.recycle(2),this.matrix.recycle(2),this.matrixTween.recycle(2),this.relocationMessage.recycle()}}})}(),function(){"use strict";var t=function(t){return function(e,i){this.owner.trigger(t[Math.floor(Math.random()*t.length)],e,i)}};platypus.createComponentClass({id:"RandomEvents",initialize:function(e){var i="";if(e.events)for(i in e.events)e.events.hasOwnProperty(i)&&this.addEventListener(i,t(e.events[i]))}})}(),function(){"use strict";platypus.createComponentClass({id:"RelayFamily",properties:{events:null},initialize:function(){var t="";if(this.events)for(t in this.events)this.events.hasOwnProperty(t)&&this.addEventListener(t,this.broadcast.bind(this,null,this.events[t]));this.owner.familyLinks=Array.setUp(this.owner)},events:{"link-family":function(t){var e=0,i=this.owner.familyLinks,n=Array.setUp().union(t).union(i);for(e=0;e<n.length;e++)n[e].familyLinks=n;this.broadcast(t,"family-members-added",i),this.broadcast(i,"family-members-added",t),i.recycle()},"entity-created":function(t){t.triggerEvent("link-family",this.owner.familyLinks)||(t.addComponent(new platypus.components.RelayFamily(t,{})),t.triggerEvent("link-family",this.owner.familyLinks))}},methods:{broadcast:function(t){var e=t||this.owner.familyLinks,i=0,n=Array.prototype.greenSlice.call(arguments);for(n.greenSplice(0),i=0;i<e.length;i++)e[i].trigger.apply(e[i],n);n.recycle()},destroy:function(){var t=this.owner.familyLinks,e=t.indexOf(this.owner);e>=0&&t.greenSplice(e),this.broadcast(t,"family-member-removed",this.owner),this.events=null}}})}(),function(){"use strict";var t=function(){var t=platypus.game.currentScene;t.triggerOnChildren.apply(t,arguments)};platypus.createComponentClass({id:"RelayGame",properties:{events:null},initialize:function(){var e="",i=this.events;if(i)for(e in i)i.hasOwnProperty(e)&&this.addEventListener(e,t.bind(this,i[e]))}})}(),function(){"use strict";var t=function(){var t=0,e=null;for(t=0;t<this.links.length;t++)(e=this.links[t]).trigger.apply(e,arguments)};platypus.createComponentClass({id:"RelayLinker",properties:{linkId:"linked",events:null},initialize:function(){var e=0,i="";if(this.events)for(i in this.events)this.events.hasOwnProperty(i)&&this.addEventListener(i,t.bind(this,this.events[i]));if(this.owner.linkId||(this.owner.linkId=this.linkId),this.addEventListener("to-"+this.linkId+"-entities",t.bind(this,"from-"+this.linkId+"-entities")),this.addEventListener("from-"+this.linkId+"-entities",function(t){this.owner.trigger(t.message,t.value,t.debug)}.bind(this)),this.links=Array.setUp(),this.owner.linkEntities)for(e=0;e<this.owner.linkEntities.length;e++)this.links.push(this.owner.linkEntities[e]);this.message={message:"",value:null},this.linkMessage={entity:this.owner,linkId:this.linkId,reciprocate:!1}},events:{load:function(){for(var t=this.owner.parent;t.parent;)t=t.parent;this.linkMessage.reciprocate=!0,t.triggerOnChildren("link-entity",this.linkMessage)},"link-entity":function(t){t.linkId===this.linkId&&t.entity!==this.owner&&-1===this.links.indexOf(t.entity)&&(this.links.push(t.entity),t.reciprocate&&(this.linkMessage.reciprocate=!1,t.entity.triggerEvent("link-entity",this.linkMessage)))},"unlink-entity":function(t){var e=this.links.indexOf(t.entity);e>=0&&this.links.greenSplice(e)}},methods:{destroy:function(){var t=0;for(t=0;t<this.links.length;t++)this.links[t].triggerEvent("unlink-entity",this.linkMessage);this.links.recycle(),this.links=null,this.events=null}}})}(),function(){"use strict";var t=function(){var t=this.owner.parent;t&&t.trigger.apply(t,arguments)};platypus.createComponentClass({id:"RelayParent",properties:{events:null},initialize:function(){var e="",i=this.events;if(i)for(e in i)i.hasOwnProperty(e)&&this.addEventListener(e,t.bind(this,i[e]))}})}(),function(){"use strict";var t=function(){var t=this.owner;t.trigger.apply(t,arguments)};platypus.createComponentClass({id:"RelaySelf",properties:{events:null},initialize:function(){var e="",i=this.events;if(i)for(e in i)i.hasOwnProperty(e)&&this.addEventListener(e,t.bind(this,i[e]))}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("PIXI.animate.Animator",!1),i=include("platypus.Data"),n=include("platypus.components.EventRender"),r=include("PIXI.Graphics"),s=include("platypus.components.Interactive"),o=include("platypus.components.StateRender"),a=function(){var t=function(t,e){var i=0,n=e.indexOf("("),r=e.substring(0,n),s=e.substring(n+1,e.indexOf(")"));if(s.length){for(i=(s=s.greenSplit(",")).length;i--;)s[i]=+s[i];t[r].apply(t,s),s.recycle()}else t[r]()};return function(e,i){var n=0,r=i.greenSplit(".");for(n=0;n<r.length;n++)t(e,r[n]);r.recycle()}}();platypus.createComponentClass({id:"RenderAnimation",properties:{animation:"",animationMap:null,framerate:24,mask:null,interactive:!1,visible:!0,eventBased:!1,stateBased:!0,regX:0,regY:0,offsetZ:0},publicProperties:{scaleX:1,scaleY:1,x:0,y:0,z:0},initialize:function(){var e=function(t,e){var r=null,a=function(t,e,i,n){var r=i-1,s=null,o=e.length;for(n[0]=r;o--;)n[e[o].label]=r,r=e[o].label;if(t)return t;if(Array.isArray(e)&&1===e.length)return null;for(s={},o=e.length;o--;)s[e[o].label]=e[o].label;return s}(this.animationMap,e.labels,e.totalFrames,this.endings);this.instance=e,e.framerate=this.framerate,this.stateBased=a&&this.stateBased,this.eventBased=a&&this.eventBased,a&&(this.eventBased&&(r=i.setUp("animationMap",a,"restart",this.restart,"component",this),this.owner.addComponent(new n(this.owner,r)),r.recycle()),this.stateBased&&(r=i.setUp("animationMap",a,"forcePlayThrough",this.forcePlayThrough,"component",this),this.owner.addComponent(new o(this.owner,r)),r.recycle())),this.parentContainer&&(this.parentContainer.addChild(this.instance),this.ready=!0,this.mask&&this.setMask(this.mask),this.update()),this.interactive?(r=i.setUp("container",e,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new s(this.owner,r,function(){this.owner.triggerEvent("input-on"),t()}.bind(this))),r.recycle()):t()};return function(n,r){return this.endings=i.setUp(),this.instance=null,this.ready=!1,this.animation&&PIXI.animate.load(include(this.animation),e.bind(this,r)),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=t.setUp(),this.isOnCamera=!0,!0}}(),events:{"camera-update":function(t){this.camera.set(t.viewport),this.instance&&this.checkCameraBounds()},"handle-render-load":function(t){!this.parentContainer&&t&&t.container&&this.addStage(t.container)},"handle-render":function(t){this.ready||this.parentContainer||this.addStage(t.container),this.ready&&this.update()},"hide-animation":function(){this.visible=!1},"show-animation":function(){this.visible=!0},"set-mask":function(t){this.setMask(t)},"stop-animation":function(t){var i=this.instance;t&&i.has(t)?i.gotoAndStop(t):e.stop(i)},"play-animation":function(t,e){this.playAnimation(t,e)}},methods:{checkCameraBounds:function(){this.isOnCamera=this.owner.parent.isOnCanvas(this.instance.getBounds(!1))},addStage:function(t){return t?(this.parentContainer=t,this.instance&&(this.parentContainer.addChild(this.instance),this.ready=!0,this.mask&&this.setMask(this.mask)),this.playAnimation(0),t):null},playAnimation:function(t){var i=this.instance;e.fromTo(i,t,this.endings[t]||0,!1,function(t){this.playAnimation(t),this.owner.triggerEvent("animation-ended",t,this.instance)}.bind(this,t))},setMask:function(t){var e=null;this.mask&&this.parentContainer&&this.parentContainer.removeChild(this.mask),t?(t instanceof r?e=t:((e=new r).beginFill(0,1),"string"==typeof t?a(e,t):t.radius?e.dc(t.x||0,t.y||0,t.radius):t.width&&t.height&&e.r(t.x||0,t.y||0,t.width,t.height),e.endFill()),e.isMask=!0,this.mask=this.instance.mask=e,this.mask.z=0,this.parentContainer&&this.parentContainer.addChild(this.mask)):this.mask=this.instance.mask=null},update:function(){var t=this.instance,e=t.scale;e.x=this.scaleX,e.y=this.scaleY,t.x=this.x-this.regX*this.scaleX,t.y=this.y-this.regY*this.scaleY,t.z!==this.z+this.offsetZ&&(this.parentContainer&&(this.parentContainer.reorder=!0),t.z=this.z+this.offsetZ),(this.owner.opacity||0===this.owner.opacity)&&(this.instance.alpha=this.owner.opacity),this.instance&&(!this.wasVisible&&this.visible||this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&this.checkCameraBounds(),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.instance.visible=this.visible&&this.isOnCamera||this.dragMode},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.instance.mouseTarget?(this.parentContainer.removeChild(this.instance),this.parentContainer=null):this.cache||this.instance.destroy(),this.instance=null}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("PIXI.CanvasRenderer"),i=include("PIXI.filters.ColorMatrixFilter"),n=include("PIXI.Container"),r=include("platypus.Data"),s=include("PIXI.Graphics"),o=include("platypus.components.Interactive"),a=new(include("PIXI.Matrix")),h=function(t){return null===t?t:("string"==typeof t&&"#"===t[0]&&(t="0x"+t.substring(1)),+t)},l=function(){var t=function(t,e){var i=0,n=e.indexOf("("),r=e.substring(0,n),s=e.substring(n+1,e.indexOf(")"));if(s.length){for(i=(s=s.greenSplit(",")).length;i--;)s[i]=+s[i];t[r].apply(t,s),s.recycle()}else t[r]()};return function(e,i){var n=0,r=i.greenSplit(".");for(n=0;n<r.length;n++)t(e,r[n]);r.recycle()}}();platypus.createComponentClass({id:"RenderContainer",properties:{mask:null,interactive:!1,rotate:!1,mirror:!1,flip:!1,visible:!0,cache:!1,ignoreOpacity:!1,localMask:!1},publicProperties:{dragMode:!1,renderGroup:"",rotation:0,scaleX:1,scaleY:1,skewX:0,skewY:0,tint:null,x:0,y:0,z:0},initialize:function(){var s=this.container=this.owner.container=new n,a=null,l=this.tint;this.rootContainer=null,this.parentContainer=null,this.renderGroups=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=t.setUp(),this.isOnCamera=!0,this.needsCameraCheck=!0,this._tint=null,platypus.game.app.display.renderer instanceof e?Object.defineProperty(this.owner,"tint",{get:function(){return this._tint}.bind(this),set:function(t){var e=this.container.children,i=e.length,n=h(t);if(n!==this._tint){for(;i--;)e[i].tint=n;this._tint=n}}.bind(this)}):Object.defineProperty(this.owner,"tint",{get:function(){return this._tint}.bind(this),set:function(t){var e=this.container.filters,n=null,r=h(t);r!==this._tint&&(null===r?e&&(this.container.filters=null):(e||(e=this.container.filters=Array.setUp(new i)),(n=e[0].matrix)[0]=(16711680&r)/16711680,n[6]=(65280&r)/65280,n[12]=(255&r)/255),this._tint=r)}.bind(this)}),this.storedRenderGroup=this.renderGroup,this._renderGroup=null,Object.defineProperty(this.owner,"renderGroup",{get:function(){return this._renderGroup}.bind(this),set:function(t){var e=this.renderGroups,i=e.length,r=null,s=null;if(t!==this._renderGroup){for(this._renderGroup=t,this.mask&&(s=this.mask,this.setMask());i--;)if(e[i].name===t)return this.parentContainer=e[i],e[i].addChild(this.container),e[i].reorder=!0,void(s&&this.setMask(s));(r=new n).name=t,r.z=this.owner.z,e.push(r),this.rootContainer.addChild(r),this.rootContainer.reorder=!0,this.parentContainer=r,r.addChild(this.container),s&&this.setMask(s)}}.bind(this)}),null!==l&&(this.tint=l),this.interactive&&(a=r.setUp("container",s,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new o(this.owner,a)),a.recycle()),this.cache&&(this.updateSprite(!1),this.owner.cacheRender=this.container)},events:{cache:function(){this.updateSprite(!1),this.owner.cacheRender=this.container,this.cache=!0,this.owner.parent.triggerEventOnChildren?this.owner.parent.triggerEventOnChildren("cache-sprite",this.owner):platypus.debug.warn("Unable to cache sprite for "+this.owner.type)},"camera-update":function(t){this.camera.set(t.viewport),this.needsCameraCheck=!0},"handle-render-load":function(t){!this.rootContainer&&t&&t.container&&(this.addStage(t.container,t.renderGroups),this.updateSprite(!0))},"handle-render":function(t){this.container&&(!this.rootContainer&&t&&t.container&&this.addStage(t.container,t.renderGroups),this.updateSprite(!0))},"hide-sprite":function(){this.visible=!1},"show-sprite":function(){this.visible=!0},"set-mask":function(t){this.setMask(t)}},methods:{addStage:function(t,e){return t?(this.rootContainer=t,this.renderGroups=e,this.renderGroup=this.storedRenderGroup,this.mask&&this.setMask(this.mask),this.owner.triggerEvent("input-on"),t):null},updateSprite:function(){var t=function(t,e){return t.z-e.z};return function(e){var i,n,r=this.owner.orientationMatrix,s=0,o=a,h=1,l=1,u=null;i=this.owner.x,n=this.owner.y,this.rotate&&(s=this.rotation),this.container.z!==this.owner.z&&(this.parentContainer&&(this.parentContainer.reorder=!0),this.container.z=this.owner.z),this.ignoreOpacity||!this.owner.opacity&&0!==this.owner.opacity||(this.container.alpha=this.owner.opacity),this.container.reorder&&(this.container.reorder=!1,this.container.children.sort(t),this.needsCameraCheck=!0),(this.mirror||this.flip)&&(u=this.rotation%360,this.mirror&&u>90&&u<270&&(h=-1),this.flip&&u<180&&(l=-1)),r?(o.a=r[0][0],o.b=r[1][0],o.tx=i+r[0][2],o.c=r[0][1],o.d=r[1][1],o.ty=n+r[1][2],this.container.transform.setFromMatrix(o)):this.container.setTransform(i,n,this.scaleX*h,this.scaleY*l,s?s/180*Math.PI:0,this.skewX,this.skewY),this.needsCameraCheck||(this.needsCameraCheck=this.lastX!==this.owner.x||this.lastY!==this.owner.y),e&&this.container&&(this.needsCameraCheck||!this.wasVisible&&this.visible)&&(this.isOnCamera=this.owner.parent.isOnCanvas(this.container.getBounds(!1)),this.needsCameraCheck=!1),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.container.visible=this.visible&&this.isOnCamera||this.dragMode}}(),setMask:function(t){var e=null;this.mask&&(this.localMask?this.container.removeChild(this.mask):this.parentContainer&&this.parentContainer.removeChild(this.mask)),t?(t instanceof s?e=t:((e=new s).beginFill(0,1),"string"==typeof t?l(e,t):t.radius?e.dc(t.x||0,t.y||0,t.radius):t.width&&t.height&&e.r(t.x||0,t.y||0,t.width,t.height),e.endFill()),e.isMask=!0,this.mask=this.container.mask=e,this.mask.z=0,this.localMask?this.container.addChild(this.mask):this.parentContainer&&this.parentContainer.addChild(this.mask)):this.mask=this.container.mask=null},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.container.mouseTarget?(this.parentContainer.removeChild(this.container),this.parentContainer=null):this.cache||this.container.destroy(),this.container=null}}})}(),function(){"use strict";var t=include("PIXI.Graphics"),e=include("platypus.components.RenderContainer"),i=function(e,i,n,r,s,o,a,h){var l=(new t).beginFill(i,.1);switch(h&&l.lineStyle(h,i),e){case"rectangle":l.drawRect(n,r,s,o);break;case"circle":l.drawCircle(0,0,s)}return l.z=a,l},n=function(t){return"string"==typeof t?parseInt(t.replace("#",""),16):t};platypus.createComponentClass({id:"RenderDebug",properties:{aabbColor:16746751,collisionColor:16711935,groupColor:65280,renderColor:255,width:100,height:100,offsetZ:1e4},initialize:function(){this.shapes=Array.setUp(),this.isOutdated=!0,this.aabbColor=n(this.aabbColor),this.collisionColor=n(this.collisionColor),this.groupColor=n(this.groupColor),this.renderColor=n(this.renderColor)},events:{load:function(){platypus.game.settings.debug?this.owner.container||this.owner.addComponent(new e(this.owner,null)):this.owner.removeComponent(this)},"handle-render":function(){var t=null;this.isOutdated&&(this.updateSprites(),this.isOutdated=!1),this.owner.getCollisionGroupAABB&&(t=this.owner.getCollisionGroupAABB(),this.groupShape||(this.groupShape=i("rectangle",this.groupColor,-.5,-.5,1,1,this.offsetZ),this.owner.container.addChild(this.groupShape)),this.groupShape.scaleX=t.width,this.groupShape.scaleY=t.height,this.groupShape.x=t.x-this.owner.x,this.groupShape.y=t.y-this.owner.y)},"orientation-updated":function(){this.isOutdated=!0}},methods:{updateSprites:function(){var t=this.owner,e=this.offsetZ,n=0,r=0,s=this.width,o=this.height,a=null,h=null,l=null;for(n=0;n<this.shapes.length;n++)t.container.removeChild(this.shapes[n]);if(this.shapes.length=0,t.getAABB)for(r=0;r<t.collisionTypes.length;r++)for(h=t.getAABB(t.collisionTypes[r]),s=this.initialWidth=h.width,o=this.initialHeight=h.height,a=t.getShapes(t.collisionTypes[r]),l=i("rectangle",this.aabbColor,h.left-t.x,h.top-t.y,s,o,e--),this.shapes.push(l),t.container.addChild(l),this.addInput(l),n=0;n<a.length;n++)s=a[n].width-2,o=a[n].height-2,l=i(a[n].type,this.collisionColor,a[n].offsetX-s/2,a[n].offsetY-o/2,a[n].radius?a[n].radius-2:s,o,e--,2),this.shapes.push(l),t.container.addChild(l),this.addInput(l);else l=i("rectangle",this.renderColor,-s/2,-o/2,s,o,e--),this.shapes.push(l),t.container.addChild(l),this.addInput(l);t.container.reorder=!0},addInput:function(){var t=null,e=function(){return t!==this.owner&&(t=this.owner,platypus.debug.olive('Entity "'+t.type+'":',t)),!1};return function(t){t.interactive=!0,t.addListener("rightdown",e.bind(this))}}(),destroy:function(){var t=0;for(t=0;t<this.shapes.length;t++)this.owner.container.removeChild(this.shapes[t]);this.shapes.recycle()}}})}(),function(){"use strict";platypus.createComponentClass({id:"RenderDestroyMe",properties:{animationId:"",animationIds:null},initialize:function(t){this.animationId?this.animationIds=Array.setUp(t.animationId):this.animationIds&&(this.animationIds=this.animationIds.greenSlice())},events:{"animation-ended":function(t){(!this.animationIds||this.animationIds.indexOf(t)>=0)&&this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.animationIds&&(this.animationIds.recycle(),delete this.animationIds)}}})}(),function(){"use strict";platypus.createComponentClass({id:"RenderProgress",properties:{backgroundColor:0,color:16777215,rotate:!1,mirror:!1,flip:!1,width:100,height:20,regX:0,regY:0},publicProperties:{x:0,y:0,z:0},initialize:function(){var t=new PIXI.Graphics,e=new PIXI.Graphics,i=new PIXI.Container;this.parentContainer=null,this.background=t,this.progress=e,this.container=i,"string"==typeof this.backgroundColor&&(this.backgroundColor=+this.backgroundColor.replace("#","0x")),"string"==typeof this.color&&(this.color=+this.color.replace("#","0x")),t.f(this.backgroundColor).r(-this.regX,-this.regY,this.width,this.height),e.f(this.color).r(-this.regX,-this.regY,this.width,this.height),e.scale=new PIXI.Point(1e-4,1),i.addChild(t),i.addChild(e)},events:{"handle-render-load":function(t){!this.parentContainer&&t&&t.container&&(this.parentContainer=t.container,this.parentContainer.addChild(this.container))},"handle-render":function(t){this.container&&(this.parentContainer||(t&&t.container?(this.parentContainer=t.container,this.parentContainer.addChild(this.container)):(platypus.debug.warn('No PIXI Stage, removing ProgressRender component from "'+this.owner.type+'".'),this.owner.removeComponent(this))),this.container.x=this.x,this.container.y=this.y,this.container.z=this.z)},"update-progress":function(t){isNaN(t)?"number"==typeof t.fraction?this.progress.scale.x=t.fraction:"number"==typeof t.total&&"number"==typeof t.progress&&(this.progress.scale.x=t.progress/t.total):this.progress.scale.x=t}},methods:{destroy:function(){this.parentContainer&&(this.parentContainer.removeChild(this.container),this.parentContainer=null),this.container=null}}})}(),function(){"use strict";var t,e=include("PIXI.spine.core.TextureAtlas",!1),i=include("PIXI.spine.core.AtlasAttachmentLoader",!1),n=include("PIXI.BaseTexture"),r=include("platypus.Data"),s=include("platypus.components.EventRender"),o=include("platypus.components.RenderContainer"),a=include("PIXI.spine.core.SkeletonJson",!1),h=include("PIXI.spine.Spine",!1),l=include("platypus.components.StateRender"),u=function(t){var e;return(e=platypus.game.app.assetManager.cache.read(t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."))))||platypus.debug.warn('RenderSpine: "'+t+'" is not a loaded asset.'),new n(e)};h&&platypus.createComponentClass({id:"RenderSpine",properties:{animationMap:null,mask:null,interactive:!1,mixTimes:0,offsetX:0,offsetY:0,offsetZ:0,atlas:"",skeleton:null,rotate:!1,mirror:!1,flip:!1,visible:!0,eventBased:!1,stateBased:!0},publicProperties:{dragMode:!1,scaleX:1,scaleY:1,skewX:0,skewY:0,rotation:0,x:0,y:0,z:0},initialize:(t=function(t,e,i){var n=u(e);i(n),n.isLoading?n.on("loaded",t):t()},function(n,u){var c,d="",p=null,f=platypus.game.settings,g=f.atlases[this.atlas],v=f.skeletons[this.skeleton],m=new e(g,t.bind(null,u)),y=new a(new i(m)).readSkeletonData(v),_=this.spine=new h(y);return _.state.addListener({event:function(t,e){var i=e.data.name;this.playAnimation(i)&&this.spine.update(1e-6),this.owner.trigger(i,e.data)}.bind(this),complete:function(){this.owner.triggerEvent("animation-ended",this.currentAnimation)}.bind(this)}),_.autoUpdate=!1,c=function(t,e){var i=null,n="";if(t)return t;for(n in i={},e)e.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,v.animations),this.stateBased=c&&this.stateBased,this.eventBased=c&&this.eventBased,c&&(d=c.default||"",this.eventBased&&(p=r.setUp("animationMap",c,"component",this),this.owner.addComponent(new s(this.owner,p)),p.recycle()),this.stateBased&&(p=r.setUp("animationMap",c,"forcePlayThrough",this.forcePlayThrough,"component",this),this.owner.addComponent(new l(this.owner,p)),p.recycle())),this.mixTimes&&this.setMixTimes(this.mixTimes),d&&(this.currentAnimation=d,_.state.setAnimation(0,d,!0)),_.x=this.offsetX,_.y=this.offsetY,_.z=this.offsetZ,this.owner.container?this.addToContainer():(p=r.setUp("interactive",this.interactive,"mask",this.mask,"rotate",this.rotate,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY,"rotation",this.rotation),this.owner.addComponent(new o(this.owner,p,this.addToContainer.bind(this))),p.recycle()),!0}),events:{"handle-render":function(t){this.spine&&(this.owner.triggerEvent("update-animation",!0),this.spine.update(t.delta/1e3))},"set-mix-times":function(t){this.setMixTimes(t)},hide:function(){this.visible=!1},show:function(){this.visible=!0},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t){this.playAnimation(t)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.spine),t.reorder=!0},playAnimation:function(t){var e=this.spine;return!(!t||!e.state.hasAnimation(t)||(this.currentAnimation=t,e.state.setAnimation(0,t,!0),this.paused=!1,0))},stopAnimation:function(t){var e=this.spine;t&&e.state.hasAnimation(t)&&(this.currentAnimation=t,e.state.setAnimation(0,t,!1)),this.paused=!0},setMixTimes:function(t){var e=this.spine,i=e.spineData.animations,n=0,r=0,s=0,o="",a=e.stateData;if("number"==typeof t)for(r=i.length;r--;)for(s=i.length;s--;)r!==s&&a.setMix(i[r].name,i[s].name,t);else for(o in t)t.hasOwnProperty(o)&&(n=o.indexOf(":"))>=0&&a.setMix(o.substring(0,n),o.substring(n+1),t[o]);this.mixTimes=a.animationToMixTime},destroy:function(){this.owner.container.removeChild(this.spine),this.spine.destroy(),this.spine=null,this.mixTimes=null}},getAssetList:function(){var t=function(t,e){var i=Array.setUp(),n=null,r=0;if(t){if(1===(n=t.split("\n")).length){if(!(t=e[t]))return i;n=t.split("\n")}for(r=n.length;r--;)".png"===n[r].substr(n[r].length-4)&&i.push(n[r])}return i};return function(e,i,n){var r=null,s=0,o=null,a=platypus.game.settings.atlases,h=e.atlas||i.atlas||n.atlas;if(Array.isArray(h)){for(s=h.length,o=Array.setUp();s--;)r=t(h[s],a),o.union(r),r.recycle();return o}return t(h,a)}}()})}(),function(){"use strict";var t=(include("platypus.AABB"),include("platypus.Data")),e=include("platypus.components.EventRender"),i=include("platypus.components.RenderContainer"),n=include("platypus.PIXIAnimation"),r=include("platypus.components.StateRender");platypus.createComponentClass({id:"RenderSprite",properties:{spriteSheet:null,animationMap:null,mask:null,interactive:!1,offsetX:0,offsetY:0,offsetZ:0,restart:!0,rotate:!1,mirror:!1,flip:!1,visible:!0,eventBased:!1,stateBased:!0,cache:!1,forcePlayThrough:!1,ignoreOpacity:!1,scale:1,scaleX:1,scaleY:1,skew:0,skewX:0,skewY:0,rotation:0},initialize:function(){var s,o="",a=null,h=n.formatSpriteSheet(this.spriteSheet);h===n.EmptySpriteSheet&&platypus.debug.warn('Entity "'+this.owner.type+'": RenderSprite sprite sheet not defined.'),s=function(t,e){var i=null,n="";if(t)return t;if(Array.isArray(e.frames)&&1===e.frames.length)return null;for(n in i={},e.animations)e.animations.hasOwnProperty(n)&&(i[n]=n);return i}(this.animationMap,h),this.stateBased=s&&this.stateBased,this.eventBased=s&&this.eventBased,s&&(o=s.default||"",this.eventBased&&(a=t.setUp("animationMap",s,"restart",this.restart,"component",this),this.owner.addComponent(new e(this.owner,a)),a.recycle()),this.stateBased&&(a=t.setUp("animationMap",s,"forcePlayThrough",this.forcePlayThrough,"component",this),this.owner.addComponent(new r(this.owner,a)),a.recycle())),this.sprite=new n(h,o),this.sprite.on("complete",function(t){this.owner.triggerEvent("animation-ended",t)}.bind(this)),this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.owner.container?this.addToContainer():(a=t.setUp("interactive",this.interactive,"mask",this.mask,"rotate",this.rotate,"mirror",this.mirror,"flip",this.flip,"visible",this.visible,"cache",this.cache,"ignoreOpacity",this.ignoreOpacity,"scaleX",this.scaleX,"scaleY",this.scaleY,"skewX",this.skewX,"skewY",this.skewY,"rotation",this.rotation),this.owner.addComponent(new i(this.owner,a,this.addToContainer.bind(this))),a.recycle()),h.recycleSpriteSheet()},events:{"handle-render":function(t){this.sprite&&(this.owner.triggerEvent("update-animation",!0),this.sprite.update(t.delta))},"stop-animation":function(t){this.stopAnimation(t)},"play-animation":function(t,e){this.playAnimation(t,e)}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},playAnimation:function(t,e){var i=this.sprite;t&&i.has(t)?i.gotoAndPlay(t,e):i.play()},stopAnimation:function(t){var e=this.sprite;t&&e.has(t)?e.gotoAndStop(t):e.stop()},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}},getAssetList:function(){var t=function(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return e.images.greenSlice()}return Array.setUp()};return function(e,i,n){var r=null,s=0,o=null,a=platypus.game.settings.spriteSheets,h=e.spriteSheet||i.spriteSheet||n.spriteSheet;if(Array.isArray(h)){for(s=h.length,o=Array.setUp();s--;)r=t(h[s],a),o.union(r),r.recycle();return o}return t(h,a)}}()})}(),function(){"use strict";var t=include("platypus.components.RenderContainer"),e=include("PIXI.Text"),i={horizontal:{left:0,middle:.5,center:.5,right:1},vertical:{top:0,middle:.5,center:.5,bottom:1}};platypus.createComponentClass({id:"RenderText",properties:{offsetX:0,offsetY:0,offsetZ:0,text:"",style:null},initialize:function(n){var r=i.horizontal[this.style.align],s=i.vertical[this.style.verticalAlign];this.sprite=new e(this.text,this.style),this.sprite.anchor.x="number"==typeof r?r:.5,this.sprite.anchor.y="number"==typeof s?s:1,this.sprite.x=this.offsetX,this.sprite.y=this.offsetY,this.sprite.z=this.offsetZ,this.owner.container?this.addToContainer():this.owner.addComponent(new t(this.owner,n,this.addToContainer.bind(this)))},events:{"set-text":function(t){this.sprite.text=t}},methods:{addToContainer:function(){var t=this.owner.container;t.addChild(this.sprite),t.reorder=!0},destroy:function(){this.owner.container.removeChild(this.sprite),this.sprite.destroy(),this.sprite=null}}})}(),function(){"use strict";var t=include("platypus.AABB"),e=include("platypus.PIXIAnimation"),i=include("springroll.Application"),n=include("PIXI.CanvasRenderer"),r=include("PIXI.Container"),s=include("PIXI.Graphics"),o=r,a=include("PIXI.Rectangle"),h=include("platypus.components.RenderContainer"),l=include("PIXI.RenderTexture"),u=include("PIXI.Sprite"),c=function(t,e,i){var n=e.baseTexture._glRenderTargets[t.CONTEXT_UID];n&&n.clear(i)},d=function(){return null},p=t.setUp(),f=function(t,e){return t.z-e.z},g=function(t){for(var e=1;e<t;)e*=2;return e},v=function(t,e,i){this.id=e,this.instances=Array.setUp(),this.index=0,this.tileSpriteSheet=t,this.getNext=this.initializeAndGetNext,this.uninitializedTiles=i,i.push(this)},m={getNext:d,destroy:d},y=v.prototype;y.initializeAndGetNext=function(){return this.initialize(),this.index+=1,this.instances[0]},y.initialize=function(){var t=+this.id.substring(4),e="tile"+(268435455&t),i=new u((this.tileSpriteSheet._animations[e]||this.tileSpriteSheet._animations.default).texture);(function(t,e){var i=0;2147483648&t&&(e.scale.x=-1),1073741824&t&&(e.scale.y=-1),536870912&t&&(i=e.scale.x,e.scale.x=e.scale.y,e.scale.y=-i,e.rotation=Math.PI/2)})(t,i),i.template=this,this.instances.push(i),this.uninitializedTiles.greenSplice(this.uninitializedTiles.indexOf(this)),delete this.getNext},y.getNext=function(){var t=this.instances[this.index],e=null;return t||(e=this.instances[0],(t=this.instances[this.index]=new u(e.texture)).scale=e.scale,t.rotation=e.rotation,t.anchor=e.anchor),this.index+=1,t},y.clear=function(){this.index=0},y.destroy=function(){var t=0;for(t=0;t<this.instances.length;t++)this.instances[t].destroy();this.instances.recycle(),this.recycle()},recycle.add(v,!!springroll.Debug,"Template"),platypus.createComponentClass({id:"RenderTiles",properties:{buffer:0,cacheAll:!1,entityCache:!1,imageMap:[],maximumBuffer:2048,scaleX:1,scaleY:1,spriteSheet:null,tileCache:!0,tileHeight:10,tileWidth:10,top:0,left:0},initialize:function(s){var a=this.imageMap;this.doMap=null,this.cachedDisplayObjects=null,this.populate=this.populateTiles,this.tiles={},this.renderer=i.instance.display.renderer,this.tilesSprite=null,this.cacheTexture=null,this.mapContainer=null,this.laxCam=t.setUp(),this.worldWidth=this.tileWidth,this.worldHeight=this.tileHeight,this.cache=t.setUp(),this.cachePixels=t.setUp(),this.uninitializedTiles=Array.setUp(),this.spriteSheet=e.formatSpriteSheet(this.spriteSheet),this.tileSpriteSheet=new e(this.spriteSheet),this.tileContainer=this.spriteSheet.images.length>1||this.renderer instanceof n?new r:new o(15e3,{position:!0,rotation:!0,scale:!0}),this.mapContainer=new r,this.mapContainer.addChild(this.tileContainer),this.reorderedStage=!1,this.updateCache=!1,this.imageMap=Array.setUp(this.createMap(a)),this.tilesWidth=this.imageMap[0].length,this.tilesHeight=this.imageMap[0][0].length,this.layerWidth=this.tilesWidth*this.tileWidth,this.layerHeight=this.tilesHeight*this.tileHeight,this.cacheWidth=Math.min(g(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(g(this.layerHeight+2),this.maximumBuffer),this.tileCache||(this.buffer=0,this.cacheAll=!1),this.ready=!1,this.owner.container?this.addToContainer():this.owner.addComponent(new h(this.owner,s,this.addToContainer.bind(this)))},events:{"cache-sprite":function(t){this.cacheSprite(t)},"peer-entity-added":function(t){this.cacheSprite(t)},"add-tiles":function(t){var e=t.imageMap;e&&(this.imageMap.push(this.createMap(e)),this.updateCache=!0)},"change-tile":function(t,e,i,n){var r=this.imageMap;r&&(this.updateTile(t,r[n||0],e,i),this.updateCache=!0)},"camera-loaded":function(t){this.worldWidth=t.world.width,this.worldHeight=t.world.height,this.buffer&&!this.cacheAll&&this.updateBufferRegion(t.viewport)},"camera-update":function(t){this.ready&&this.updateCamera(t)},"handle-render":function(){this.updateCache?(this.updateCache=!1,this.cacheGrid?this.updateGrid():this.update(this.cacheTexture,this.cache)):this.uninitializedTiles.length&&this.uninitializedTiles[0].initialize()}},methods:{addToContainer:function(){var t=this.container=this.owner.container,e=this.mapContainer,i=null,n=this.owner.z;t.reorder=!0,this.ready=!0,this.updateRegion(0),this.tileCache?(this.mapContainerWrapper=new r,this.mapContainerWrapper.addChild(e),this.layerWidth<=this.cacheWidth&&this.layerHeight<=this.cacheHeight?(this.cacheAll=!0,this.render=this.renderCache,this.cacheTexture=l.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=i=new u(this.cacheTexture),i.scale.x=this.scaleX,i.scale.y=this.scaleY,i.z=n,this.cache.setBounds(0,0,this.tilesWidth-1,this.tilesHeight-1),this.update(this.cacheTexture,this.cache),t.addChild(i)):this.cacheAll||this.layerWidth<=2*this.cacheWidth&&this.layerHeight<=this.cacheHeight||this.layerWidth<=this.cacheWidth&&this.layerHeight<=2*this.cacheHeight?(this.cacheAll=!0,this.cacheWidth=Math.min(g(this.layerWidth+2),this.maximumBuffer),this.cacheHeight=Math.min(g(this.layerHeight+2),this.maximumBuffer),this.updateRegion(2),this.render=this.renderCacheWithExtrusion,this.cacheGrid=this.createGrid(t),this.updateCache=!0):(this.render=this.renderCache,this.cacheAll=!1,this.cacheTexture=l.create(this.cacheWidth,this.cacheHeight),this.tilesSprite=new u(this.cacheTexture),this.tilesSprite.scale.x=this.scaleX,this.tilesSprite.scale.y=this.scaleY,this.tilesSprite.z=n,this.cacheTexture.alternate=l.create(this.cacheWidth,this.cacheHeight),this.tilesSpriteCache=new u(this.cacheTexture.alternate),this.cacheTexture.alternate.alternate=this.cacheTexture,t.addChild(this.tilesSprite))):(this.render=d,e.scale.x=this.scaleX,e.scale.y=this.scaleY,e.x=this.left,e.y=this.top,e.z=n,t.addChild(e))},cacheSprite:function(t){var e=0,i=0,n=t.cacheRender,r=null,s=0,o=0,a=0,h=0;if(this.entityCache&&n){for(this.doMap||(this.doMap=Array.setUp(),this.cachedDisplayObjects=Array.setUp(),this.populate=this.populateTilesAndEntities),this.cachedDisplayObjects.push(n),(r=n.getBounds(n.transformMatrix)).x-=this.left,r.y-=this.top,s=Math.max(0,Math.floor(r.y/this.tileHeight)),o=Math.min(this.tilesHeight,Math.ceil((r.y+r.height)/this.tileHeight)),h=Math.max(0,Math.floor(r.x/this.tileWidth)),a=Math.min(this.tilesWidth,Math.ceil((r.x+r.width)/this.tileWidth)),e=h;e<a;e++)for(this.doMap[e]||(this.doMap[e]=Array.setUp()),i=s;i<o;i++)this.doMap[e][i]||(this.doMap[e][i]=Array.setUp()),this.doMap[e][i].push(n);t.removeComponent("RenderSprite"),this.updateCache=!0}},convertCamera:function(t){var e=this.worldWidth/this.scaleX,i=e-t.width,n=this.worldHeight/this.scaleY,r=n-t.height,s=this.laxCam;return e!==this.layerWidth&&i?s.moveX((t.left-this.left)*(this.layerWidth-t.width)/i+t.halfWidth+this.left):s.moveX(t.x),n!==this.layerHeight&&r?s.moveY((t.top-this.top)*(this.layerHeight-t.height)/r+t.halfHeight+this.top):s.moveY(t.y),t.width===s.width&&t.height===s.height||s.resize(t.width,t.height),s},createTile:function(t){return"tile-1"===t?m:v.setUp(this.tileSpriteSheet,t,this.uninitializedTiles)},createMap:function(t){var e=0,i=0,n="",r=null;if("string"!=typeof t[0][0])return t;for(r=Array.setUp(),e=0;e<t.length;e++)for(r[e]=Array.setUp(),i=0;i<t[e].length;i++)n=t[e][i],this.updateTile(n,r,e,i);return r},updateCamera:function(t){var e=0,i=0,n=!1,r=null,s=0,o=0,a=0,h=0,l=this.cache,u=this.cachePixels,c=t.viewport,d=this.buffer&&(c.width!==this.laxCam.width||c.height!==this.laxCam.height),f=p,g=this.convertCamera(c);if(!this.cacheAll&&(u.empty||!u.contains(g))&&this.imageMap.length>0&&(d&&this.updateBufferRegion(g),a=(s=this.cacheTilesWidth-1)/2,h=(o=this.cacheTilesHeight-1)/2,f.setAll(Math.round((g.x-this.left)/this.tileWidth-a)+a,Math.round((g.y-this.top)/this.tileHeight-h)+h,s,o),f.left<0?f.moveX(f.halfWidth):f.right>this.tilesWidth-1&&f.moveX(this.tilesWidth-1-f.halfWidth),f.top<0?f.moveY(f.halfHeight):f.bottom>this.tilesHeight-1&&f.moveY(this.tilesHeight-1-f.halfHeight),this.tileCache?!l.empty&&f.contains(l)||(this.tilesSpriteCache.texture=this.cacheTexture,this.cacheTexture=this.cacheTexture.alternate,this.tilesSprite.texture=this.cacheTexture,this.update(this.cacheTexture,f,this.tilesSpriteCache,l)):this.update(null,f),u.setAll((l.x+.5)*this.tileWidth+this.left,(l.y+.5)*this.tileHeight+this.top,(l.width+1)*this.tileWidth,(l.height+1)*this.tileHeight)),this.cacheGrid)for(e=0;e<this.cacheGrid.length;e++)for(i=0;i<this.cacheGrid[e].length;i++)r=this.cacheGrid[e][i],u.setAll((e+.5)*this.cacheClipWidth+this.left,(i+.5)*this.cacheClipHeight+this.top,this.cacheClipWidth,this.cacheClipHeight),n=u.intersects(g),r.visible&&!n?r.visible=!1:!r.visible&&n&&(r.visible=!0),r.visible&&n&&(r.x=c.left-g.left+e*this.cacheClipWidth+this.left,r.y=c.top-g.top+i*this.cacheClipHeight+this.top);else this.tileCache&&(this.tilesSprite.x=c.left-g.left+l.left*this.tileWidth+this.left,this.tilesSprite.y=c.top-g.top+l.top*this.tileHeight+this.top)},updateTile:function(t,e,i,n){var r=null,s=this.tiles;t.id&&(t=t.id),(r=s[t])||null===r||(r=s[t]=this.createTile(t)),e[i][n]=r},createGrid:function(t){var e=this.cacheHeight,i=this.cacheWidth,n=this.cacheTilesHeight,r=this.cacheTilesWidth,s=0,o=0,h=null,c=this.scaleX,d=this.scaleY,p=this.tileHeight,f=this.tileWidth,v=this.tilesHeight,m=this.tilesWidth,y=0,_=0,b=this.owner.z,w=null,x=null,T=Array.setUp();for(y=0;y<m;y+=r)for(w=Array.setUp(),T.push(w),_=0;_<v;_+=n)o=Math.min(g((m-y)*f+2),i),s=Math.min(g((v-_)*p+2),e),(h=l.create(o,s)).frame=new a(1,1,((o-2)/f>>0)*f+1,((s-2)/p>>0)*p+1),(x=new u(h)).z=b,x.scale.x=c,x.scale.y=d,w.push(x),t.addChild(x),b-=1e-6;return T},updateRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY,n=Math.min(this.tilesWidth,(this.cacheWidth-2)/e>>0),r=Math.min(this.tilesHeight,(this.cacheHeight-2)/i>>0);n||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+e+"px wide which is larger than "+(this.cacheWidth-2)+"px (maximum cache size of "+this.cacheWidth+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),r||platypus.debug.warn('"'+this.owner.type+'" RenderTiles: The tiles are '+i+"px high which is larger than "+(this.cacheHeight-2)+"px (maximum cache size of "+this.cacheHeight+"px minus a 2px edge bleed). Increase the maximum cache size or reduce tile size."),this.cacheTilesWidth=n,this.cacheTilesHeight=r,this.cacheClipWidth=n*e,this.cacheClipHeight=r*i,this.tileCache&&(this.mapContainer.mask=(new s).beginFill(0).drawRect(0,0,this.cacheClipWidth+t,this.cacheClipHeight+t).endFill())},updateBufferRegion:function(t){var e=this.tileWidth*this.scaleX,i=this.tileHeight*this.scaleY;this.cacheTilesWidth=Math.min(this.tilesWidth,Math.ceil((t.width+2*this.buffer)/e),this.cacheWidth/e>>0),this.cacheTilesHeight=Math.min(this.tilesHeight,Math.ceil((t.height+2*this.buffer)/i),this.cacheHeight/i>>0),this.cacheClipWidth=this.cacheTilesWidth*e,this.cacheClipHeight=this.cacheTilesHeight*i,this.mapContainer.mask=(new s).beginFill(0).drawRect(0,0,this.cacheClipWidth,this.cacheClipHeight).endFill()},update:function(t,e,i,n){this.populate(e,n),this.render(e,t,this.mapContainer,this.mapContainerWrapper,i,n),n&&n.set(e)},populateTiles:function(t,e){var i=0,n=0,r=0,s=0,o=null,a=Array.setUp();for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left)for(s=0;s<this.imageMap.length;s++)(o=this.imageMap[s][i][n].getNext())&&(o.template&&a.push(o.template),o.x=(i+.5)*this.tileWidth,o.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(o));for(r=0;r<a.length;r++)a[r].clear();a.recycle()},populateTilesAndEntities:function(t,e){var i=0,n=0,r=0,s=0,o=null,a=null,h=Array.setUp(),l=Array.setUp(),u=null;for(this.tileContainer.removeChildren(),i=t.left;i<=t.right;i++)for(n=t.top;n<=t.bottom;n++)if(!e||e.empty||n>e.bottom||n<e.top||i>e.right||i<e.left){for(s=0;s<this.imageMap.length;s++)(o=this.imageMap[s][i][n].getNext())&&(o.template&&l.push(o.template),o.x=(i+.5)*this.tileWidth,o.y=(n+.5)*this.tileHeight,this.tileContainer.addChild(o));if(this.doMap[i]&&this.doMap[i][n])for(u=this.doMap[i][n],r=0;r<u.length;r++)u[r].drawn||(u[r].drawn=!0,h.push(u[r]))}if(this.mapContainer.removeChildren(),this.mapContainer.addChild(this.tileContainer),h.length)for(h.sort(f),r=0;r<h.length;r++)delete(a=h[r]).drawn,this.mapContainer.addChild(a),a.mask&&this.mapContainer.addChild(a.mask);for(r=0;r<l.length;r++)l[r].clear();l.recycle(),h.recycle()},renderCache:function(t,e,i,n,r,s){var o=this.renderer;r&&!s.empty&&(r.x=s.left*this.tileWidth,r.y=s.top*this.tileHeight,i.addChild(r)),c(o,e),i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight,o.render(n,e),e.requiresUpdate=!0},renderCacheWithExtrusion:function(t,e,i,n){var r=new s,o=this.renderer;r.lineStyle(1,0),r.drawRect(.5,.5,this.cacheClipWidth+1,this.cacheClipHeight+1),c(o,e),n.mask=r,i.x=-t.left*this.tileWidth,i.y=-t.top*this.tileHeight+1,o.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight,o.render(n,e),i.x=-t.left*this.tileWidth+2,i.y=-t.top*this.tileHeight+1,o.render(n,e),i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+2,o.render(n,e),n.mask=null,i.x=-t.left*this.tileWidth+1,i.y=-t.top*this.tileHeight+1,o.render(n,e),e.requiresUpdate=!0},updateGrid:function(){var t=this.cache,e=this.cacheTilesHeight,i=this.cacheTilesWidth,n=this.tilesHeight-1,r=this.tilesWidth-1,s=0,o=0,a=this.cacheGrid;for(s=0;s<a.length;s++)for(o=0;o<a[s].length;o++)t.setBounds(s*i,o*e,Math.min((s+1)*i,r),Math.min((o+1)*e,n)),this.update(a[s][o].texture,t)},toJSON:function(){for(var t=this.imageMap[0],e=[],i=t.length,n=0;i--;)for(n=t[i].length,e[i]=[];n--;)e[i][n]=t[i][n].id;return{type:"RenderTiles",buffer:this.buffer,cacheAll:this.cacheAll,entityCache:this.entityCache,imageMap:e,maximumBuffer:this.maximumBuffer,scaleX:this.scaleX,scaleY:this.scaleY,spriteSheet:this.spriteSheet,tileCache:this.tileCache,tileHeight:this.tileHeight,tileWidth:this.tileWidth,top:this.top,left:this.left}},destroy:function(){var t=0,e=0,i="",n=this.cacheGrid,r=this.doMap,s=this.imageMap;if(n){for(t=0;t<n.length;t++)for(e=0;e<n[t].length;e++)n[t][e].texture.destroy(!0),this.container.removeChild(n[t][e]);n.recycle(2),delete this.cacheGrid}else this.tilesSprite?(this.tilesSprite.texture.alternate&&this.tilesSprite.texture.alternate.destroy(!0),this.tilesSprite.texture.destroy(!0),this.container.removeChild(this.tilesSprite)):this.container.removeChild(this.mapContainer);for(i in s.recycle(2),this.tiles)this.tiles.hasOwnProperty(i)&&this.tiles[i].destroy();if(this.tiles=null,this.container=null,this.tilesSprite=null,this.spriteSheet.recycleSpriteSheet(),r){for(t=0;t<this.cachedDisplayObjects.length;t++)this.cachedDisplayObjects[t].destroy();for(this.cachedDisplayObjects.recycle(),t=0;t<r.length;t++)if(r[t]){for(e=0;e<r.length;e++)r[t][e]&&r[t][e].recycle();r[t].recycle()}r.recycle()}this.laxCam.recycle(),this.cache.recycle(),this.cachePixels.recycle(),this.uninitializedTiles.recycle()}},getAssetList:function(){var t=function(e,i){if(e){if("string"==typeof e)return t(i[e],i);if(e.images)return e.images.greenSlice()}return Array.setUp()};return function(e,i,n){var r=null,s=0,o=null,a=platypus.game.settings.spriteSheets,h=e.spriteSheet||i.spriteSheet||n.spriteSheet;if(h){if("string"==typeof h&&"import"!==h)return t(h,a);if(Array.isArray(h)){for(s=h.length,o=Array.setUp();s--;)r=t(h[s],a),o.union(r),r.recycle();return o}if(h.images)return h.images.greenSlice()}return Array.setUp()}}()})}(),function(){"use strict";var t=include("platypus.Data");platypus.createComponentClass({id:"SceneChanger",properties:{scene:"",persistentData:null},initialize:function(){this.persistentData=t.setUp(this.persistentData)},events:{"new-scene":function(t){var e=t||this,i=e.scene||this.scene,n=e.persistentData||this.persistentData;platypus.game.loadScene(i,n)},"set-scene":function(t){this.scene=t},"set-persistent-scene-data":function(t){var e=this.persistentData,i="";for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}},methods:{destroy:function(){}}})}(),function(){"use strict";var t=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?(?:(([^\/?]+)\.(\w+))|([^\/?]+))(?:\?((?:(?:[^&]*?[\/=])?(?:((?:(?:[^\/?&=]+)\.(\w+)))\S*?)|\S+))?)?$/,e=include("platypus.AABB"),i=include("platypus.Data"),n=include("platypus.Entity"),r=268435455,s=function(){var t=function(t,e){return t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24)>>>0},e=function(t,e){return t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24)>>>0};return function(i,n){var r=4,s=[],o=atob(i.replace(/\\/g,""));if("zlib"===n)for(o=pako.inflate(o);r<=o.length;)s.push(e(o,r-4)),r+=4;else for(;r<=o.length;)s.push(t(o,r-4)),r+=4;return s}}(),o=function(e){var i=e.match(t);return i[5]||i[7]},a=function(t,n,r,s,o,a,h,l){var u=i.setUp("level",null,"world",e.setUp(),"tile",e.setUp(),"camera",null);u.level=t,u.camera=this.followEntity,u.width=s,u.height=o,u.world.setBounds(n,r,n+s,r+o),u.tile.setBounds(0,0,a,h),this.owner.triggerEvent("world-loaded",u),u.world.recycle(),u.tile.recycle(),u.recycle(),this.owner.removeComponent(this),l&&l()},h=function(t){for(var e=1;e<t;)e*=10;return e},l={x:1,y:1,id:-1},u=function(t,e){var i=0;if(t){if(Array.isArray(t)){for(i=t.length;i--;)if(t[i].name===e)return t[i].value;return null}return t[e]}return null},c=function(t,e,i){var n=0;if(t)if(Array.isArray(t)){for(n=t.length;n--;)if(t[n].name===e)return t[n].type=typeof i,void(t[n].value=i);t.push({name:e,type:typeof i,value:i})}else t[e]=i},d=function(t){var e=l,i=!!(1073741824&t),n=!!(2147483648&t);return e.id=r&t,e.x=1,e.y=1,i&&(e.y=-1),n&&(e.x=-1),e},p=function(t,e){var i=0,n=t.gid||-1,r={},s={gid:-1,transform:null,properties:r,type:""},o=null,a=null,h=0;for(-1!==n&&(s.transform=d(n),n=s.gid=l.id),i=0;i<e.length&&!(e[i].firstgid>n);i++)a=e[i];return a&&(h=n-a.firstgid,a.tileproperties&&a.tileproperties[h]&&(o=a.tileproperties[h]),a.tiles&&a.tiles[h]&&(s.type=a.tiles[h].type||"")),s.type=t.type||s.type,""===s.type&&(t.name?(s.type=t.name,platypus.debug.warn('Component TiledLoader (loading "'+s.type+'"): Defining the entity type using the "name" property has been deprecated. Define the type using the object\'s "type" property in Tiled instead.')):o&&(o.entity?(s.type=o.entity,platypus.debug.warn('Component TiledLoader (loading "'+s.type+'"): Defining the entity type using the "entity" property in the object properties has been deprecated. Define the type using the object\'s "type" property in Tiled instead.')):o.type&&(s.type=o.type,platypus.debug.warn('Component TiledLoader (loading "'+s.type+'"): Defining the entity type in the object properties has been deprecated. Define the type using the object\'s "type" property in Tiled instead.')))),s.type?(s.transform?(r.scaleX=s.transform.x,r.scaleY=s.transform.y):(r.scaleX=1,r.scaleY=1),f(o,s.properties),f(t.properties,s.properties),s):null},f=function(t,e){var i=0,n="";if(t&&e)if(Array.isArray(t))for(i=0;i<t.length;i++)c(e,t[i].name,g(t[i].value));else for(n in t)t.hasOwnProperty(n)&&c(e,n,g(t[n]));return e},g=function(t){var e=0;if("string"==typeof t){if(0===(e=parseFloat(t))||e)return e;if("true"===t)return!0;if("false"===t)return!1;if(t.length>1&&("{"===t[0]&&"}"===t[t.length-1]||"["===t[0]&&"]"===t[t.length-1]))try{return JSON.parse(t)}catch(t){}}return t},v=function(t,e){var r=0,s=0,o=Array.setUp(),a=null,h=Array.setUp(),l=null,c=null,d=null;if("string"==typeof t&&(t=platypus.game.settings.levels[t]),t)if(t.tilesets&&(t.tilesets=_(t.tilesets)),t.assets)h.union(t.assets);else if(t.layers){for(r=0;r<t.layers.length;r++)if("objectgroup"===t.layers[r].type)for(s=0;s<t.layers[r].objects.length;s++)(c=p(t.layers[r].objects[s],t.tilesets))&&(d=n.getAssetList(c),h.union(d),d.recycle());else"imagelayer"===t.layers[r].type?h.union([t.layers[r].image]):(c=u(t.layers[r].properties,"entity"))&&(l=i.setUp("type",c),a=n.getAssetList(l),h.union(a),a.recycle(),l.recycle());if(!e){for(r=0;r<t.tilesets.length;r++)o.push(t.tilesets[r].image);h.union(o),o.recycle()}t.assets=h.greenSlice()}return h},m={"render-layer":{id:"render-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import",entityCache:!0}]},"collision-layer":{id:"collision-layer",components:[{type:"CollisionTiles",collisionMap:"import"}]},"image-layer":{id:"image-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import"}]}},y=function(t){var e="",i=platypus.game.settings.levels[t.source.replace(".json","")];for(e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);return delete t.source,t},_=function(t){var e=0;for(e=0;e<t.length;e++)t[e].source&&(t[e]=y(t[e]));return t};platypus.createComponentClass({id:"TiledLoader",properties:{offsetMap:!1,showCollisionTiles:!1,images:null,layerIncrement:1e3,separateTiles:!1,spriteSheet:null},publicProperties:{level:null,unitsPerPixel:1,imagesScale:1,entityPositionX:"center",entityPositionY:"bottom",manuallyLoad:!1},initialize:function(){this.assetCache=platypus.game.app.assetManager.cache,this.layerZ=0,this.followEntity=!1},events:{"scene-loaded":function(t,e){this.manuallyLoad||(e.count+=1,this.loadLevel({level:this.level||t.level,persistentData:t},e.release))},"load-level":function(t,e){this.loadLevel(t,e)}},methods:{createLayer:function(t,e,i,s,o,a,h,l,c,d){var p=null,g=null,v=e.width,y=e.height,_=e.tileheight||a,b=e.tilewidth||o,w=0,x=0,T=0,E=0,S=0,A=JSON.parse(JSON.stringify(platypus.game.settings.entities[t]||m[t])),P={},M=[],C=[],I=[],O={images:e.image?[e.image]:l,frames:C,animations:P},R=!1,L=null,D=null,k=0,j=0,N=0,B="",U=null,F=function(t,e,i,n){var r=i.margin||0,s=i.spacing||0,o=i.tilewidth,a=i.tileheight,h=o/2,l=a/2,u=o+s,c=a+s,d=2*r-s,p=i.columns||i.imagewidth/u+d>>0,f=i.imageheight/c+d>>0,g=0,v=0;for(o*=n,a*=n,h*=n,l*=n,u*=n,c*=n,v=0;v<f;v++)for(g=0;g<p;g++)t.push([r+g*u,r+v*c,o,a,e,h,l])};if(this.decodeLayer(e),U=e.data,i+=e.offsetx||0,s+=e.offsety||0,A.properties=A.properties||{},e.properties){if((E=u(e.properties,"width"))&&(w=parseInt(E,10)),(T=u(e.properties,"height"))&&(x=parseInt(T,10)),w||x){for(w=w||v,x=x||y,U=[],j=0;j<w;j++)for(N=0;N<x;N++)U[j+N*w]=j<v&&N<y?e.data[j+N*v]:0;v=w,y=x}f(e.properties,A.properties)}if("collision-layer"===t)for(D=[],j=0;j<h.length;j++)if((L=h[j]).tileproperties)for(B in L.tileproperties)L.tileproperties.hasOwnProperty(B)&&L.tileproperties[B].jumpThrough&&D.push(L.firstgid+parseInt(B,10));if(A.properties.width=b*v*this.unitsPerPixel,A.properties.height=_*y*this.unitsPerPixel,A.properties.columns=v,A.properties.rows=y,A.properties.tileWidth=b*this.unitsPerPixel,A.properties.tileHeight=_*this.unitsPerPixel,A.properties.scaleX=this.imagesScale,A.properties.scaleY=this.imagesScale,A.properties.layerZ=this.layerZ,A.properties.left=A.properties.x||i,A.properties.top=A.properties.y||s,A.properties.z=A.properties.z||this.layerZ,h.length){for(j=0;j<h.length;j++)F(C,j,h[j],this.unitsPerPixel/this.imagesScale);for(S=(p=h[h.length-1]).firstgid+p.tilecount,j=-1;j<S;j++)P["tile"+j]=j}for(j=0;j<v;j++)for(M[j]=[],I[j]=[],N=0;N<y;N++)k=+U[j+N*v]-1,I[j][N]="tile"+k,k+=1,D&&D.length&&D[0]===(r&k)&&(k|=268435456),M[j][N]=k;for(j=0;j<A.components.length;j++)"RenderTiles"===A.components[j].type&&(R=A.components[j]),"import"===A.components[j].spriteSheet?A.components[j].spriteSheet=O:A.components[j].spriteSheet&&("string"==typeof A.components[j].spriteSheet&&platypus.game.settings.spriteSheets[A.components[j].spriteSheet]&&(A.components[j].spriteSheet=platypus.game.settings.spriteSheets[A.components[j].spriteSheet]),A.components[j].spriteSheet.animations||(A.components[j].spriteSheet.animations=P)),"import"===A.components[j].collisionMap&&(A.components[j].collisionMap=M),"import"===A.components[j].imageMap&&(A.components[j].imageMap=I);return this.layerZ+=this.layerIncrement,"render-layer"===t&&!this.separateTiles&&c&&c.tileHeight===_&&c.tileWidth===b&&c.columns===v&&c.rows===y?(c.triggerEvent("add-tiles",R),this.updateLoadingProgress(d),c):(g={},"render-layer"===t&&this.spriteSheet&&("string"==typeof this.spriteSheet?g.spriteSheet=platypus.game.settings.spriteSheets[this.spriteSheet]:g.spriteSheet=this.spriteSheet,g.spriteSheet.animations||(g.spriteSheet.animations=P)),this.owner.addEntity(new n(A,{properties:g},this.updateLoadingProgress.bind(this,d),this.owner)))},convertImageLayer:function(t){var e,i=null,n=0,r="",s=t.properties||{},a=u(s,"repeat"),h=u(s,"repeat-x"),l=u(s,"repeat-y"),c={data:[],image:"",height:1,name:t.name,type:"tilelayer",width:1,tileheight:1,tilewidth:1,x:t.x,y:t.y,properties:s};for(a&&(c.width=+a,c.height=+a),h&&(c.width=+h),l&&(c.height=+l),e=c.width*c.height,n=0;n<e;n++)c.data.push(1);return(i=this.assetCache.read(t.name))?(c.image=t.name,c.tileheight=i.height,c.tilewidth=i.width):(r=o(t.image),(i=this.assetCache.read(r))?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+t.name+'", so using "'+t.image+'" instead.'),c.image=r,c.tileheight=i.height,c.tilewidth=i.width):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+t.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+t.name+'".'),c.image=t.image)),c.tileset={columns:1,image:c.image,imageheight:c.tileheight,imagewidth:c.tilewidth,margin:0,name:t.name,spacing:0,tilecount:1,tileheight:c.tileheight,tilewidth:c.tilewidth,type:"tileset"},c},loadLevel:function(t,e){var n,r,s,l,c,d,p,g=!0,v=0,m="",y=null,b=null,w=null,x=null,T=i.setUp("count",0,"progress",0,"total",0),E=0,S=0;if(n=(r="string"==typeof t.level?platypus.game.settings.levels[t.level]:t.level).layers,l=_(r.tilesets),c=r.tilewidth,d=r.tileheight,r.properties&&f(r.properties,this.owner),0===(y=this.images?this.images.greenSlice():Array.setUp()).length)for(v=0;v<l.length;v++)x=l[v],this.assetCache.read(x.name)?y.push(x.name):(m=o(x.image),this.assetCache.read(m)?(platypus.debug.warn('Component TiledLoader: Did not find a spritesheet for "'+x.name+'", so using "'+x.image+'" instead.'),y.push(m)):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+x.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+x.name+'".'),y.push(x.image)));for(p=r.width*c*this.unitsPerPixel,s=r.height*d*this.unitsPerPixel,this.offsetMap&&(E=h(p),S=h(s)),T.total=v=n.length;v--;)"objectgroup"===n[v].type?T.total+=n[v].objects.length:!g||"collision"!==n[v].name&&"collision-layer"!==u(n[v].properties,"entity")||(g=!1);for(this.finishedLoading=a.bind(this,r,E,S,p,s,c,d,e),v=0;v<n.length;v++)switch(w=n[v],w.type){case"imagelayer":b=this.convertImageLayer(w),b=this.createLayer("image-layer",b,E,S,b.tilewidth,b.tileheight,[b.tileset],y,b,T);break;case"objectgroup":this.setUpEntities(w,E,S,c,d,l,T),b=null,this.updateLoadingProgress(T);break;case"tilelayer":b=this.setupLayer(w,g,b,E,S,c,d,l,y,T);break;default:platypus.debug.warn('Component TiledLoader: Platypus does not support Tiled layers of type "'+w.type+'". This layer will not be loaded.'),this.updateLoadingProgress(T)}},setUpEntities:function(t,e,i,r,s,o,a){var h=1e3,l=0,c=0,d=0,f=0,g=0,v=0,m=0,y=null,_=0,b=null,w=null,x=null,T=u(t.properties,"entityPositionX")||this.entityPositionX,E=u(t.properties,"entityPositionY")||this.entityPositionY,S="",A=-1,P=1/0,M=-1/0,C=1/0,I=-1/0,O=null,R=null,L=null,D=0,k=0;for(e+=t.offsetx||0,i+=t.offsety||0,_=0;_<t.objects.length;_++)if(b=t.objects[_],O=p(b,o)){if(A=O.gid,S=O.type,x=(w=platypus.game.settings.entities[S])&&w.properties||null,R=O.properties,b.polygon||b.polyline){for(P=1/0,M=-1/0,C=1/0,I=-1/0,L=null,b.polygon?L=b.polygon:b.polyline&&(L=b.polyline),d=0;d<L.length;d++)L[d].x>M&&(M=L[d].x),L[d].x<P&&(P=L[d].x),L[d].y>I&&(I=L[d].y),L[d].y<C&&(C=L[d].y);if(R.width=M-P,R.height=I-C,R.x=b.x+P,R.y=b.y+C,l=0,c=0,R.width=R.width*this.unitsPerPixel,R.height=R.height*this.unitsPerPixel,R.x=R.x*this.unitsPerPixel+e,R.y=R.y*this.unitsPerPixel+i,b.polygon)for(R.shape={},R.shape.type="polygon",R.shape.points=[],f=0;f<L.length;f++)R.shape.points.push({x:(L[f].x-P)*this.unitsPerPixel+e,y:(L[f].y-C)*this.unitsPerPixel+i});else if(b.polyline)for(R.shape={},R.shape.type="polyline",R.shape.points=[],f=0;f<L.length;f++)R.shape.points.push({x:(L[f].x-P)*this.unitsPerPixel+e,y:(L[f].y-C)*this.unitsPerPixel+i})}else D=r*this.unitsPerPixel,k=s*this.unitsPerPixel,l=0,c=0,R.width=(b.width||0)*this.unitsPerPixel,R.height=(b.height||0)*this.unitsPerPixel,x&&("number"==typeof x.width&&(R.width=x.width,l=D),"number"==typeof x.height&&(R.height=x.height,c=k)),b.point||(R.width||(R.width=D),R.height||(R.height=k),l=l||R.width,c=c||R.height),R.x=b.x*this.unitsPerPixel,R.y=b.y*this.unitsPerPixel,b.rotation&&(g=(b.width||D)/2,v=(b.height||k)/2,m=b.rotation/180%2*Math.PI,y=platypus.Vector.setUp(g,-v).rotate(m),R.rotation=b.rotation,R.x=Math.round((R.x+y.x-g)*h)/h,R.y=Math.round((R.y+y.y+v)*h)/h,y.recycle()),"left"===T?R.regX=0:"center"===T?(R.regX=R.width/2,R.x+=l/2):"right"===T&&(R.regX=R.width,R.x+=l),R.x+=e,-1===A&&(R.y+=R.height),"bottom"===E?R.regY=R.height:"center"===E?(R.regY=R.height/2,R.y-=c/2):"top"===E&&(R.regY=0,R.y-=c),R.y+=i,b.ellipse?(R.shape={},R.shape.type="circle",R.shape.width=R.width*this.unitsPerPixel,R.shape.height=R.height*this.unitsPerPixel,R.shape.radius=(R.width+R.height)*this.unitsPerPixel/4):b.width&&b.height&&(R.shape={},R.shape.type="rectangle",R.shape.width=R.width*this.unitsPerPixel,R.shape.height=R.height*this.unitsPerPixel);x?(R.scaleX*=this.imagesScale*(x.scaleX||1),R.scaleY*=this.imagesScale*(x.scaleY||1)):(R.scaleX*=this.imagesScale,R.scaleY*=this.imagesScale),R.layerZ=this.layerZ,R.z?R.z+=this.layerZ:x&&"number"==typeof x.z?R.z=this.layerZ+x.z:R.z=this.layerZ,(b=this.owner.addEntity(new n(w,{properties:R},this.updateLoadingProgress.bind(this,a),this.owner)))&&(b.camera&&(this.followEntity={entity:b,mode:b.camera}),this.owner.triggerEvent("entity-created",b))}else this.updateLoadingProgress(a);this.layerZ+=this.layerIncrement},setupLayer:function(t,e,i,n,r,s,o,a,h,l){var c,d=!1,p=u(t.properties,"entity"),f=p||"render-layer",g=0;if(p||("collision"===t.name?f="collision-layer":"action"===t.name&&(f=e?"tile-layer":"render-layer")),"tile-layer"===f||this.showCollisionTiles&&platypus.game.settings.debug)return l.count+=1,this.createLayer("collision-layer",t,n,r,s,o,a,h,i,l),this.createLayer("render-layer",t,n,r,s,o,a,h,i,l);if("collision-layer"===f)return this.createLayer("collision-layer",t,n,r,s,o,a,h,i,l),null;if(c=platypus.game.settings.entities[f])for(g=c.components.length;g--;)if("RenderTiles"===c.components[g].type){d=!0;break}return d?this.createLayer(f,t,n,r,s,o,a,h,i,l):(this.createLayer(f,t,n,r,s,o,a,h,i,l),null)},updateLoadingProgress:function(t){t.count+=1,t.progress=t.count/t.total,this.owner.triggerEvent("level-loading-progress",t),t.count===t.total&&(t.recycle(),this.finishedLoading())},destroy:function(){}},publicMethods:{decodeLayer:function(t){return"base64"===t.encoding&&(t.data=s(t.data,t.compression),t.encoding="csv"),t}},getAssetList:function(t,e,i){var n=e||{},r=i||{},s=t.spriteSheet||n.spriteSheet||r.spriteSheet,o=t.images||n.images||r.images,a=v(t.level||n.level||r.level,s);return s&&("string"==typeof s?a.union(platypus.game.settings.spriteSheets[s].images):a.union(s.images)),o&&a.union(o),a},getLateAssetList:function(t,e,i,n){var r=e||{},s=i||{},o=t.spriteSheet||r.spriteSheet||s.spriteSheet;return n&&n.level?v(n.level,o):Array.setUp()}})}(),function(){"use strict";var t=include("platypus.Data"),e=function(){this.active--},i=function(){this.active++},n=function(t){this.timelineInstances.push(this.createTimeStampedTimeline(this.timelines[t]))},r=function(t){for(var e=t.delta,i=null,n=this.timelineInstances,r=n.length;r--;)(i=n[r]).remove?(n.greenSplice(r),i.timeline.recycle(2),i.recycle()):i.active&&(0===i.timeline.length?(n.greenSplice(r),i.timeline.recycle(2),i.recycle()):this.progressTimeline(i,e))};platypus.createComponentClass({id:"Timeline",properties:{timelines:{}},initialize:function(){var t=0;for(t in this.timelineInstances=Array.setUp(),this.timelines)this.timelines.hasOwnProperty(t)&&this.addEventListener(t,n.bind(this,t))},events:{"logic-tick":r,"handle-logic":r,"stop-active-timelines":function(){for(var t=this.timelineInstances,e=t.length;e--;)t[e].remove=!0}},methods:{createTimeStampedTimeline:function(n){var r=Array.setUp(),s=0,o=0,a=null;for(s=0;s<n.length;s++)"number"==typeof(a=n[s])?o+=a:r.push(t.setUp("time",o,"value",a));return r.reverse(),t.setUp("timeline",r,"time",0,"active",1,"pause",e,"play",i,"remove",!1)},progressTimeline:function(t,e){var i=t.timeline,n=i.length,r=null,s=null,o=this.owner;for(t.time+=e;n--;){if(!((r=i[n]).time<=t.time))return;if("string"==typeof(s=r.value)?this.owner.triggerEvent(s):(s.entity&&((o=this.owner.getEntityById?this.owner.getEntityById(s.entity):this.owner.parent.getEntityById(s.entity))||(platypus.debug.warn("No entity of that id"),o=this.owner)),s.message?o.triggerEvent(s.event,s.message):o.trigger(s.event)),r.recycle(),i.pop(),!t.active)return;r=null,s=null,o=this.owner}},destroy:function(){for(var t=null,e=this.timelineInstances,i=e.length;i--;)(t=e[i]).timeline.recycle(2),t.recycle();e.recycle(),this.timelineInstances=null}}})}(),function(){"use strict";var t=function(t){var e=null;for(e in this.watchedEntities)t.type===e&&this.watchedEntities[e].push(t)},e=function(t){var e=0,i=t.type;for(e=this.watchedEntities[i].length-1;e>=0;e--)if(this.watchedEntities[i][e]===t){this.watchedEntities[i].splice(e,1);break}},i=function(t){var e=t.delta,i=0,n=null,r=null,s=-1,o=!1,a=null;for(i=0;i<this.tutorials.length;i++)if(o=!1,n=this.tutorials[i],this.playing||0!==this.theQueue.length?!this.playing&&this.theQueue.length>0&&n.priority>this.theQueue[0].priority?o=!0:this.playing&&this.playing.priority<n.priority?o=!0:n.queue&&(o=!0):o=!0,o&&this.checkRequirements(n.requirements)){if(n.replayDelay&&n.replayDelayTimer>0&&(n.replayDelayTimer-=e,n.replayDelayTimer>0))continue;(!r||r.priority<n.priority)&&(r=n,s=i)}r?(a=this.tutorials.splice(s,1)[0],this.playing?a.priority>this.playing.priority?(this.owner.triggerEvent("stop-audio"),this.play(a)):this.queue(a):this.theQueue.length>0?a.priority>this.theQueue[0].priority?this.play(a):(this.play(this.theQueue.splice(0,1)[0]),this.queue(a)):this.play(a)):!this.playing&&this.theQueue.length>0&&this.play(this.theQueue.splice(0,1)[0])};platypus.createComponentClass({id:"Tutorial",properties:{tutorialDefs:[]},publicProperties:{},initialize:function(){var t=0,e=null,i=null,n=null;for(this.playing=null,this.theQueue=[],this.watchedEntities={},this.tutorials=[],t=0;t<this.tutorialDefs.length;t++)if(n={},(i=this.tutorialDefs[t]).events){for(e in n.events=i.events.greenSlice(),n.originalEvents=i.events.greenSlice(),n.priority=i.priority||0,n.queue=i.queue||!1,n.timesToReplay="number"==typeof i.timesToReplay?i.timesToReplay:1/0,n.replayDelay=i.replayDelay||null,n.replayDelayTimer=n.replayDelay,n.level=i.level,n.requirements={},i.requirements)i.requirements.hasOwnProperty(e)&&(n.requirements[e]=i.requirements[e].greenSlice(),this.watchedEntities[e]||(this.watchedEntities[e]=[]));this.tutorials.push(n)}else platypus.debug.warn("Tutorial definition lacks events.")},events:{"child-entity-added":t,"peer-entity-added":t,"child-entity-removed":e,"peer-entity-removed":e,"logic-tick":i,"handle-logic":i,"sequence-complete":function(){this.playing.timesToReplay>=0&&this.tutorials.push(this.playing),this.playing=null}},methods:{play:function(t){var e;this.playing=t,0===this.playing.events.length&&(this.playing.events=this.playing.originalEvents.greenSlice()),e=this.playing.events.splice(Math.floor(Math.random()*this.playing.events.length),1)[0],this.owner.triggerEvent(e),t.timesToReplay-=1,t.replayDelayTimer=t.replayDelay},queue:function(t){var e=0,i=!1;for(e=0;e<this.theQueue.length;e++)if(this.theQueue[e].priority<t.priority){this.theQueue.splice(e,0,t),i=!0;break}i||this.theQueue.push(t)},checkRequirements:function(t){var e=0,i=0,n=null,r=null,s=null,o=!0;for(n in t)if(t.hasOwnProperty(n)){for(r=t[n],i=this.watchedEntities[n].length-1;i>=0;i--){for(s=this.watchedEntities[n][i],o=!0,e=0;e<r.length;e++)if(!s.state.get(r[e])){o=!1;break}if(o)break}if(!o)return!1}return!0},destroy:function(){this.watchedEntities=null,this.theQueue=null,this.playing=null,this.tutorials=null}}})}(),function(){"use strict";var t=include("createjs.Tween",!1),e={},i=function(t,e,i,r){var o=s(t,e,i);return o?"string"==typeof o?n(r,o):o:null},n=function(t,e,i,n){return function(){t.trigger(e,i,n)}},r=function(t,i){var r=0,s=this.owner,a=Array.isArray(t),h=a?t:t.tween,l=null,u=null,c=null,d=createjs.Tween.get(s,o(a?e:t,this,s));if(Array.isArray(i))h=i;else if(!Array.isArray(h))return void platypus.debug.warn("Tween: no array was supplied for this tween.");for(r=0;r<h.length;r++)"string"==typeof(l=h[r])?d.call(n(s,l)):Array.isArray(l)?"call"===l[0]&&"string"==typeof l[1]?d.call(n(s,l[1])):("to"===(u=l.greenSlice()).greenSplice(0)&&u[2]&&createjs.Ease[u[2]]&&(u.length>3?((c=u.greenSlice()).greenSplice(0),c.greenSplice(0),u[2]=createjs.Ease[c.greenSplice(0)].apply(null,c),c.recycle()):u[2]=createjs.Ease[u[2]]),d[l[0]].apply(d,u),u.recycle()):"call"===l.method&&"string"==typeof l.params?d.call(n(s,l.params)):d[l.method].apply(d,l.params)},s=function(t,e,i){return"undefined"!==t[e]?t[e]:i[e]},o=function(t,e,n){return{useTicks:s(t,"useTicks",e),ignoreGlobalPause:s(t,"ignoreGlobalPause",e),loop:s(t,"loop",e),reversed:s(t,"reversed",e),bounce:s(t,"bounce",e),timeScale:s(t,"timeScale",e),pluginData:s(t,"pluginData",e),paused:s(t,"paused",e),position:s(t,"position",e),onChange:i(t,"onChange",e,n),onComplete:i(t,"onComplete",e,n),override:s(t,"override",e)}};t?(t._inited=!0,platypus.createComponentClass({id:"Tween",properties:{events:null,useTicks:!1,ignoreGlobalPause:!1,loop:0,reversed:!1,bounce:!1,timeScale:1,pluginData:null,paused:!1,position:0,onChange:"",onComplete:"",override:!1},initialize:function(){var t="",e=this.events;if(e)for(t in e)e.hasOwnProperty(t)&&this.addEventListener(t,r.bind(this,e[t]))}})):platypus.createComponentClass({id:"Tween",initialize:function(){platypus.debug.warn("CreateJS Tween must be included in the project to use the Tween component.")}})}(),function(){"use strict";var t=include("platypus.components.AudioVO"),e=include("platypus.components.RenderAnimation"),i=include("platypus.components.RenderSprite"),n=function(t,e){return" "===e?t+"default":t+e},r=function(t,e,i){this.owner.addComponent(new t(this.owner,e,i))},s=function(t,e,i,r){var s=0,o="",a={},h=0,l="",u="",c=t.voice,d=t.mouthCues;if("string"==typeof t)a.sound=t,a.events=Array.setUp();else if("string"==typeof t.sound)a.sound=t.sound,a.events=Array.setUp();else{for(o in t.sound)t.sound.hasOwnProperty(o)&&(a[o]=t.sound[o]);a.events?a.events=a.events.greenSlice():a.events=Array.setUp()}if(c||d||!platypus.game.app.config.mouthCues||(d=platypus.game.app.config.mouthCues[a.sound]),c)for(c+=" ",s=0;s<c.length;s++)(u=c[s])!==l&&(l=u,a.events.push({time:h,event:n(i,u)})),h+=r;else if(d)for(s=0;s<d.length;s++)u=d[s],a.events.push({time:1e3*u.start,event:n(i,u.value)}),h+=r;return a},o=function(t,e,i,n){var r=0,o=Array.setUp();if(e[" "]||(e[" "]=e.default),Array.isArray(t)){for(r=0;r<t.length;r++)"number"==typeof t[r]?o.push(t[r]):o.push(s(t[r],0,i,n));return o}return s(t,0,i,n)};platypus.createComponentClass({id:"VoiceOver",properties:{animationMap:{default:"default"},renderComponent:"",frameLength:100,messagePrefix:"",voiceOverMap:{}},initialize:function(s,a){var h="",l=Array.setUp(),u={audioMap:{},aliases:s.aliases},c={acceptInput:s.acceptInput,aliases:s.aliases,animation:s.animation,animationMap:{},eventBased:!0,flip:s.flip,hidden:s.hidden,interactive:s.interactive,mask:s.mask,mirror:s.mirror,offsetZ:s.offsetZ,regX:s.regX,regY:s.regY,restart:s.restart,rotate:s.rotate,scaleX:s.scaleX,scaleY:s.scaleY,spriteSheet:s.spriteSheet,stateBased:s.stateBased||!1};for(h in this.messagePrefix?this.message=this.messagePrefix+"-":this.message="",this.animationMap)this.animationMap.hasOwnProperty(h)&&(c.animationMap[n(this.message,h)]=this.animationMap[h]);for(h in c.animationMap.default=this.animationMap.default,this.renderComponent?l.push(r.bind(this,platypus.components[this.renderComponent],c)):l.push(r.bind(this,s.animation?e:i,c)),this.voiceOverMap)this.voiceOverMap.hasOwnProperty(h)&&(u.audioMap[h]=o(this.voiceOverMap[h],this.animationMap,this.message,this.frameLength));return l.push(r.bind(this,t,u)),platypus.Async.setUp(l,a),l.recycle(),!0},events:{load:function(){this.owner.removeComponent(this)}},getAssetList:function(t,e,i){var n=t.spriteSheet||e.spriteSheet||i&&i.spriteSheet;return"string"==typeof n?platypus.game.settings.spriteSheets[n].images.greenSlice():n?n.images.greenSlice():Array.setUp()}})}(),function(){"use strict";var t=include("window.XMLHttpRequest");platypus.createComponentClass({id:"XHR",properties:{method:"GET",path:"",responseType:"text",withCredentials:!1},initialize:function(t){this.setProperties(t)},events:{request:function(t){if(this.setProperties(t),"GET"===this.method)this.get();else{if("POST"!==this.method)throw"Method must be GET or POST";this.post()}}},methods:{setProperties:function(t){var e="",i="",n=t||this;if(this.method=n.method||this.method||"GET",this.path=n.path||this.path||null,this.responseType=n.responseType||this.responseType||"text",this.withCredentials=n.withCredentials||this.withCredentials||!1,n!==this&&n.data)for(e in this.data="",n.data)n.data.hasOwnProperty(e)&&(this.data+=i+e+"="+n.data[e],i="&");else this.data="";this.onload=n.onload||this.onload||function(){200===this.status&&this.owner.triggerEvent("response",this.responseText)}.bind(this)},get:function(){var e=new t,i=this.path;this.data&&(i+="?"+this.data),e.open(this.method,i,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.onload=this.onload,e.send()},post:function(){var e=new t;e.open(this.method,this.path,!0),e.withCredentials=this.withCredentials,e.responseType=this.responseType,e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.onload=this.onload,e.send(this.data)}}})}();