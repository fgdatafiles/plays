namespace("fine_feathered_feast").Constants={MaxFeedRepeatCount:2,MaxBirdsRepeatCount:2,SecondsToMilliSeconds:1e3},function(){var t=include("springroll.pixi.Button"),e=function(e,i,s,n){t.call(this,i,s,n),this.app=e,this.on("buttonOver",this.onOver),this.on("buttonOut",this.buttonOut),this.on("buttonPress",this.onPress)},i=t.prototype,s=extend(e,t);s.onOver=function(){this.app.sound.play("Button_Rollover")},s.onPress=function(){this.app.sound.play("Button_Tap")},s.buttonOut=function(){this.rotation=0},s.destroy=function(){this.off("buttonOver",this.onOver),this.off("buttonPress",this.onPress),i.destroy.call(this),this.app=null},namespace("fine_feathered_feast").CustomButton=e}(),function(){var t=include("PIXI.Container"),e=include("springroll.pixi.AdvancedMovieClip"),i=function(e){t.call(this),this.app=e.app,this.panel=e,this.mc=null,this.states={idle:"idle",run:"run",chaos:"chaos"},this.faces={left:"left",right:"right"},this.startX=0,this.halfScreen=512,this.xOffset=256,this.yOffset=5,this.speed=this.app.config.data.squirrelsSpeed,this.active=!1,this.currentState=this.states.idle,this.squirrelsFrequency=this.app.config.levels[this.app.levelNo].squirrelsFrequency,this.squirrelsElapsedTime=Math.random()*this.squirrelsFrequency,this.init()},s=extend(i,t);s.init=function(){this.mc=new e(this.app.getCache("SquirrelAnim"),this.app.getCache("SquirrelAtlas")),this.mc.anchor.set(.4,.88),this.mc.scale.set(.7),this.addChild(this.mc)},s.getFeeders=function(){return this.panel.feeders.filter((function(t){return!t.hasSquirrel&&t.hasFeed()}))},s.onSquirrel=function(){if(!this.active){var t=this.getFeeders();if(t.length>0){var e=t[Math.round(Math.random()*(t.length-1))];this.moveTo(e)}}},s.update=function(t){this.squirrelsElapsedTime+=t,this.squirrelsElapsedTime>this.squirrelsFrequency&&(this.squirrelsElapsedTime=0,this.onSquirrel())},s.switchState=function(t){this.app.animator.play(this.mc,t,this.onAnimComplete.bind(this)),this.currentState=t},s.onAnimComplete=function(){this.currentState==this.states.chaos&&this.moveAway(1)},s.setFace=function(t){t==this.faces.right?this.scale.set(-1,1):this.scale.set(1,1)},s.getDuration=function(t,e,i){return Math.sqrt((t-e)*(t-e))/i},s.moveTo=function(t){this.switchState(this.states.run),this.visible=!0,this.active=!0,this.feeder=t,t.hasSquirrel=!0;var e=0;t.x>this.halfScreen?(this.x=2*this.halfScreen+this.xOffset,e=t.x+(30+20*Math.random()),this.setFace(this.faces.left)):(this.x=-this.xOffset,e=t.x+(-30-20*Math.random()),this.setFace(this.faces.right)),t.isHangingFeeder()?this.y=t.y-t.mc.height+this.yOffset:this.y=t.y,this.startX=this.x,this.startY=this.y,createjs.Tween.get(this,{loop:!1,override:!0}).wait(1e3*Math.random()).to({x:e},this.getDuration(e,this.x,this.speed),createjs.Ease.linear).call(this.playSquirrelAppearVO.bind(this)).wait(1e3+500*Math.random()).call(this.switchState.bind(this,this.states.run)).to({x:t.x},this.getDuration(t.x,e,this.speed),createjs.Ease.linear).call(this.moveComplete.bind(this)),this.footStepsSoundInstance=this.app.sound.play("Squirrel_Foot_Steps_Loop",{loop:-1})},s.playSquirrelAppearVO=function(){this.footStepsSoundInstance&&this.footStepsSoundInstance.stop(),this.app.sound.play("Squirrel_Chirp_"+[1,2].shuffle()[0]),this.switchState(this.states.idle),this.panel.squirrelAppeared||(this.app.voPlayer.play("Daisy_Tap_Squirrels"),this.panel.squirrelAppeared=!0)},s.moveAway=function(t){this.footStepsSoundInstance&&this.footStepsSoundInstance.stop(),this.footStepsSoundInstance=this.app.sound.play("Squirrel_Foot_Steps_Loop",{loop:-1}),this.switchState(this.states.run),createjs.Tween.removeTweens(this),this.y=this.startY,this.startX>this.x?this.setFace(this.faces.right):this.setFace(this.faces.left),createjs.Tween.get(this,{loop:!1,override:!0}).to({x:this.startX},this.getDuration(this.startX,this.x,this.speed*t),createjs.Ease.linear).call(this.moveAwayComplete.bind(this))},s.moveAwayComplete=function(){this.active=!1,this.visible=!1,this.feeder.hasSquirrel=!1,this.switchState(this.states.idle),this.squirrelsElapsedTime=0,this.footStepsSoundInstance&&this.footStepsSoundInstance.stop()},s.moveComplete=function(){this.footStepsSoundInstance&&this.footStepsSoundInstance.stop(),this.feeder.hasFeed()?this.stealFeed():this.moveAway(1)},s.stealFeed=function(){var t;this.app.sound.play("Fly_By_1",{complete:function(){this.app.sound.play("Spin_2")}.bind(this)}),t=this.feeder.isHangingFeeder()?this.feeder.y:this.feeder.y-.65*this.feeder.mc.height,this.switchState(this.states.chaos),createjs.Tween.get(this,{loop:!1,override:!0}).to({y:t},this.getDuration(this.y,t,1.2*this.speed),createjs.Ease.sineOut).call(this.jumpOnComplete.bind(this))},s.jumpOnComplete=function(){this.feeder.removeAllFeed()},s.reset=function(){this.app.animator.stop(this.mc,!0),createjs.Tween.removeTweens(this),this.active=!1,this.feeder.hasSquirrel=!1,this.x=this.y=0},s.clear=function(){this.app.animator.stop(this.mc,!0),createjs.Tween.removeTweens(this),this.removeChild(this.mc),this.mc=null},namespace("fine_feathered_feast").Squirrel=i}(),function(){var t=include("PIXI.Sprite"),e=function(e,i,s){this.app=e.panel.app,this.meterAtlas=this.app.getCache("MeterAtlas"),t.call(this,this.meterAtlas.getFrame(e.feedType+"_FeederMeter_Outside")),this.states={Empty:"Empty",Full:"Full"},this.currentState=this.states.Empty,this.x=i,this.y=s,this.anchor.set(.5,1),e.addChild(this),this.insideBar=new PIXI.Sprite(this.meterAtlas.getFrame(e.feedType+"_FeederMeter_InsideBar")),this.insideBar.anchor.set(.5,1),this.insideBar.y=-3,this.addChild(this.insideBar),this.setState(this.states.Empty),this.visible=!1},i=extend(e,t);i.setState=function(t){createjs.Tween.removeTweens(this),this.currentState=t,this.currentState==this.states.Full?this.insideBar.scale.y=1:this.insideBar.scale.y=0},i.reset=function(){createjs.Tween.removeTweens(this),this.setState(this.states.Empty),this.visible=!1},i.start=function(t){createjs.Tween.get(this.insideBar.scale,{loop:!1,override:!0}).to({y:0},t,createjs.Ease.linear)},i.clear=function(){createjs.Tween.removeTweens(this),this.removeChild(this.insideBar),this.insideBar=null},namespace("fine_feathered_feast").Meter=e}(),namespace("fine_feathered_feast").FeederSpot=function(t,e,i,s){this.feeder=t,this.meter=e,this.birdPosition=i,this.birdFace=s,this.bird=null,this.hasBird=!1,this.hasFeed=!1},function(){var t=include("PIXI.Container"),e=include("springroll.pixi.AdvancedMovieClip"),i=include("fine_feathered_feast.FeederSpot"),s=include("fine_feathered_feast.Meter"),n=function(i,s){t.call(this),this.panel=i,this.data=s,this.app=i.app,this.name=s.name,this.feedType=s.feedType,this.spots=s.spots,this.ncOffset=s.ncOffset||0,this.spotsFilled=0,this.hasBird=!1,this.hasSquirrel=!1,this.jumpNeeded=s.jumpNeeded,this.jumpHeight=s.jumpHeight,this.interactive=!0,this.buttonMode=!0,this.feederSpots=[],this.feedPiles=[],this.mc=null;var n=this.app.getCache(this.name);n.frames?(this.mc=new e(this.app.getCache(this.name+"_Anim"),n),this.mc.gotoAndStop("empty")):this.mc=new PIXI.Sprite(n),this.mc.anchor.set(.5,1),this.x=s.x,this.y=s.y,this.addChild(this.mc),this.addFeederSpots()},a=extend(n,t);a.reset=function(){this.spotsFilled=0,this.hasBird=!1,this.feederSpots.map((function(t){t.meter.reset(),t.hasBird=!1,t.hasFeed=!1}))},a.isHangingFeeder=function(){return"Seeds_JugFeeder_1"==this.name||"Seeds_BottleFeeder_2"==this.name},a.addFeedPile=function(t,e,i){var s=new PIXI.Sprite(this.app.getCache(t));s.x=e,s.y=i,s.visible=!1,this.addChild(s),this.feedPiles.push(s)},a.addFeederSpots=function(){for(var t=0;t<this.spots;t++)"Seeds_JugFeeder_1"==this.name?this.feederSpots.push(new i(this,new s(this,-45,-24),new PIXI.Point(this.x+20,this.y-5),"left")):"Seeds_BottleFeeder_2"==this.name?0===t?this.feederSpots.push(new i(this,new s(this,30,-98),new PIXI.Point(this.x-25,this.y-65),"right")):1==t&&this.feederSpots.push(new i(this,new s(this,-40,3),new PIXI.Point(this.x+25,this.y-17),"left")):"Nuts_Berries_FlatFeeder_2"==this.name?0===t?(this.feederSpots.push(new i(this,new s(this,95,-85),new PIXI.Point(this.x+60,this.y-82),"left")),this.addFeedPile("Nuts_Berries_FeedPile",7,-115)):1==t&&(this.feederSpots.push(new i(this,new s(this,-95,-85),new PIXI.Point(this.x-60,this.y-82),"right")),this.addFeedPile("Nuts_Berries_FeedPile",-34,-121)):"Worms_FlatFeeder_4"==this.name&&(0===t?(this.feederSpots.push(new i(this,new s(this,125,-116),new PIXI.Point(this.x+80,this.y-113),"left")),this.addFeedPile("Worms_FeedPile",43,-133)):1==t?(this.feederSpots.push(new i(this,new s(this,-46,-170),new PIXI.Point(this.x-40,this.y-130),"right")),this.addFeedPile("Worms_FeedPile",-19,-142)):2==t?(this.feederSpots.push(new i(this,new s(this,80,-56),new PIXI.Point(this.x+50,this.y-100),"left")),this.addFeedPile("Worms_FeedPile",14,-125)):3==t&&(this.feederSpots.push(new i(this,new s(this,-112,-116),new PIXI.Point(this.x-80,this.y-120),"right")),this.addFeedPile("Worms_FeedPile",-50,-135)))},a.hasFeed=function(){return this.feederSpots.filter((function(t){return t.hasFeed})).length>0},a.addFeed=function(){for(var t in this.feederSpots)if(!this.feederSpots[t].hasFeed){var e=this.feederSpots[t];e.hasFeed=!0,++this.spotsFilled,this.unhighlight(),this.updateFeed(),this.feederSpots[t].meter.visible=!0,this.feedPiles.length>0&&(this.feedPiles[t].visible=!0),e.meter.setState(e.meter.states.Full);break}},a.updateFeed=function(){if(this.mc.totalFrames)if(0===this.spotsFilled)this.mc.gotoAndStop("empty");else if(this.spotsFilled==this.spots)this.mc.gotoAndStop("full");else if(1==this.spotsFilled&&2==this.spots)for(var t=0;t<this.feederSpots.length;t++)this.feederSpots[t].hasFeed&&0===t?this.mc.gotoAndStop("top"):this.feederSpots[t].hasFeed&&1==t&&this.mc.gotoAndStop("bottom")},a.removeFeed=function(t){t.hasFeed&&(t.hasBird=!1,t.hasFeed=!1,t.meter.visible=!1,t.meter.reset(),this.feedPiles.length>0&&(this.feedPiles[this.feederSpots.indexOf(t)].visible=!1),--this.spotsFilled,this.updateFeed())},a.hasEmptySpot=function(){for(var t in this.feederSpots)if(!this.feederSpots[t].hasFeed)return!0;return!1},a.getFeedSpots=function(){var t=[];for(var e in this.feederSpots)this.feederSpots[e].hasFeed&&!this.feederSpots[e].hasBird&&t.push(this.feederSpots[e]);return t},a.removeAllFeed=function(){this.feederSpots.map(function(t){t.bird&&(t.bird.flyOff(),t.bird=null),this.removeFeed(t)}.bind(this))},a.highlight=function(t,e,i){void 0===e&&(e=!0),this.glow||(this.glow=new PIXI.Sprite);var s=this.app.getCache("HighlightsAtlas");this.glow.texture=s.getFrame(this.name+"_Yellow"),this.glow.anchor.set(.5,1),this.glow.y=.5*(this.glow.height-this.mc.height),this.addChild(this.glow),createjs.Tween.removeTweens(this.glow),e&&(i=i||250,createjs.Tween.get(this.glow,{loop:!1,override:!0}).wait(i).call(this.unhighlight.bind(this)))},a.unhighlight=function(){this.glow&&this.removeChild(this.glow)},a.clear=function(){this.feederSpots.map((function(t){t.meter.clear(),t.meter=null,t.feeder=null,t.bird=null})),this.feedPiles.map((function(t){t.parent.removeChild(t),t=null}))},namespace("fine_feathered_feast").Feeder=n}(),function(){var t=include("PIXI.Sprite"),e=function(e,i){this.panel=e,this.app=e.app,t.call(this,this.app.getCache(i.name)),this.anchor.set(.5,.8),this.x=i.x,this.y=i.y,this.feedType=i.feedType,this.name=i.name,this.interactive=!0,this.buttonMode=!0},i=extend(e,t);i.highlight=function(t,e,i){void 0===e&&(e=!0),this.glow||(this.glow=new PIXI.Sprite);var s=this.app.getCache("HighlightsAtlas");this.glow.texture=s.getFrame(this.name+"_Yellow"),this.glow.anchor.set(.5,.83),this.glow.y=.5*(this.glow.height-this.height),this.addChild(this.glow),createjs.Tween.removeTweens(this.glow),e&&(i=i||250,createjs.Tween.get(this.glow,{loop:!1,override:!0}).wait(i).call(this.unhighlight.bind(this)))},i.unhighlight=function(){this.glow&&this.removeChild(this.glow)},namespace("fine_feathered_feast").FeedBag=e}(),function(){var t=include("PIXI.Container"),e=include("fine_feathered_feast.FeedBag"),i=include("fine_feathered_feast.Feeder"),s=include("fine_feathered_feast.Squirrel"),n=function(e){t.call(this),this.panel=e,this.app=e.app,this.nc=null,this.states={idle:"idle",run:"run",scoop:"scoop",fill:"fill",jump_fill:"jump_fill",shrug:"shrug",somersault:"somersault"},this.faces={left:"left",right:"right"},this.startX=270,this.startY=650,this.feedingVOInterval=3,this.squirrelCatchDistance=10,this.moveSpeed=.38,this.jumpSpeed=.48,this.maxMoveY=550,this.jumpHeight=200,this.maxRightOffsetX=140,this.maxLeftOffsetX=180,this.signal=new springroll.EventDispatcher,this.isSquirrelVoCompleted=!0,this.init()},a=extend(n,t);a.init=function(){this.nc=this.app.getCache("NatureCat"),this.nc.anchor.set(.5,1),this.addChild(this.nc),this.isScoopEmpty=!0,this.feedingVOCount=3,this.nearFeeder=null,this.moveToGameObject=null,this.holdingFeedType=null,this.face=this.faces.right,this.move=!1,this.switchState(this.states.idle)},a.switchState=function(t){var e=t;this.isScoopEmpty||t!=this.states.idle&&t!=this.states.run&&t!=this.states.shrug||(e+="_scoop"),this.app.animator.play(this.nc,e,this.onAnimComplete.bind(this)),this.currentState=t,this.setBubblePosition()},a.onAnimComplete=function(){this.moveToGameObject instanceof i&&(this.currentState==this.states.jump_fill||this.currentState==this.states.fill)&&(this.app.sound.play("Fill_"+[1,2].shuffle()[0]),this.moveToGameObject.addFeed(),this.removeFeed(),this.signal&&this.signal.trigger("onMoveComplete",this.moveToGameObject.name)),this.moveToGameObject instanceof e&&this.currentState==this.states.scoop&&(this.addFeed(),this.app.sound.play("Scoop_1"),this.signal&&this.signal.trigger("onMoveComplete",this.moveToGameObject.name)),this.moveToGameObject instanceof e&&this.currentState==this.states.fill&&this.removeFeed(),this.currentState!=this.states.idle&&this.currentState!=this.states.run&&this.switchState(this.states.idle)},a.squirrelVOComplete=function(){this.isSquirrelVoCompleted=!0},a.moveTo=function(t){if(t instanceof s)return this.isSquirrelVoCompleted=!1,this.app.voPlayer.play("FFF_NC_Gameplay_Squirrels_"+[1,2,3].shuffle()[0],this.squirrelVOComplete.bind(this)),this.app.sound.play("Doink_"+[1,2,3,4,5].shuffle()[0]),t.moveAway(2),this.app.sound.play("Squirrel_React_"+[1,2].shuffle()[0],{delay:100}),void(this.signal&&this.signal.trigger("onMoveComplete","squirrel"));if(this.currentState==this.states.idle){this.moveToGameObject=t;var e,n=t.x;n<this.x?(this.setFace(this.faces.left),this.moveToGameObject instanceof i?(n=t.x+.5*Math.max(this.maxLeftOffsetX+this.moveToGameObject.ncOffset,t.width),e=this.moveToGameObject.isHangingFeeder()?this.y:t.y,this.playFeedingVO()):(n=t.x+.25*t.width,e=t.y-.5*t.height)):(this.setFace(this.faces.right),this.moveToGameObject instanceof i?(n=t.x-.5*Math.max(this.maxRightOffsetX,t.width),e=this.moveToGameObject.isHangingFeeder()?this.y:t.y,this.playFeedingVO()):(n=t.x-.25*t.width,e=t.y-.5*t.height)),this.app.sound.play("Feed_Feeder_Squirrel_Tap"),this.switchState(this.states.run);var a=n-this.x,h=e-this.y,o=Math.sqrt(a*a+h*h)/this.moveSpeed;createjs.Tween.get(this,{loop:!1}).to({x:n,y:e},o,createjs.Ease.linear).call(this.moveComplete.bind(this))}},a.playFeedingVO=function(){if(!this.isScoopEmpty&&!this.app.voPlayer.playing)if(this.feedingVOCount<this.feedingVOInterval)this.feedingVOCount++;else{var t=[1,2,3].shuffle()[0];this.app.voPlayer.play("FFF_NC_Gameplay_Running_"+t),this.feedingVOCount=1}},a.scoop=function(){this.isScoopEmpty=!1,this.holdingFeedType=this.moveToGameObject.feedType,this.switchState(this.states.scoop),this.moveToGameObject.unhighlight()},a.moveComplete=function(){this.nearFeeder=null,this.moveToGameObject instanceof e?this.scoop():this.moveToGameObject instanceof i?(this.nearFeeder=this.moveToGameObject,this.fillFeeder()):this.moveToGameObject instanceof s&&(this.jump(this.jumpHeight),this.switchState(this.states.somersault))},a.playVO=function(t){this.isSquirrelVoCompleted&&this.app.voPlayer.play(t)},a.fillFeeder=function(){if(this.isScoopEmpty)this.app.sound.play("Wrong_1"),this.switchState(this.states.shrug);else{var t=this.moveToGameObject.hasEmptySpot();this.moveToGameObject.feedType==this.holdingFeedType&&t?(this.isScoopEmpty=!0,this.holdingFeedType=null,this.moveToGameObject.jumpNeeded?(this.jump(this.moveToGameObject.jumpHeight),this.switchState(this.states.jump_fill)):this.switchState(this.states.fill)):(this.app.sound.play("Wrong_1"),this.switchState(this.states.shrug),t||(0===this.app.levelNo?this.playVO("FFF_NC_Gameplay_Try_to_fill_full_feeder_Level_1"):(this.playVO("FFF_NC_Gameplay_Try_to_fill_full_feeder"),this.app.manager.currentState.highlightFeeders(this.holdingFeedType,this.moveToGameObject))),this.moveToGameObject.feedType!=this.holdingFeedType&&(this.playVO("FFF_NC_Gameplay_Wrong_Feeder"),this.app.manager.currentState.highlightFeeders(this.holdingFeedType)))}},a.jump=function(t){this.app.sound.play("Doink_"+[1,4].shuffle()[0]);var e=this.y,i=e-t,s=i-this.y,n=Math.sqrt(s*s)/this.jumpSpeed;createjs.Tween.removeTweens(this),createjs.Tween.get(this,{loop:!1,override:!0}).to({y:i},n,createjs.Ease.sineOut).call(this.jumpUpComplete.bind(this)).to({y:e},n,createjs.Ease.sineIn)},a.jumpUpComplete=function(){this.moveToGameObject instanceof s&&(this.isScoopEmpty||(this.removeFeed(),this.isScoopEmpty=!0,this.holdingFeedType=null),this.app.sound.play("NC_Shoo_Squirrel"),this.moveToGameObject.moveAway(2),this.signal&&this.signal.trigger("onMoveComplete","squirrel"))},a.removeFeed=function(){this.feed&&this.removeChild(this.feed)},a.addFeed=function(){if(!this.feed){var t=new PIXI.filters.DropShadowFilter;t.alpha=.2,/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)&&(t.distance=5),this.feed=new PIXI.Sprite,this.feed.filters=[t]}this.feed.texture=this.app.getCache("BirdBubble_"+this.holdingFeedType),this.setBubblePosition(),this.addChild(this.feed)},a.setBubblePosition=function(){this.feed&&(this.currentState==this.states.fill?(this.feed.x=1.4*this.feed.width,this.feed.y=.8*-this.height):this.currentState==this.states.run?(this.feed.x=1.35*this.feed.width,this.feed.y=.8*-this.height):(this.feed.x=.98*this.feed.width,this.feed.y=.8*-this.height))},a.reset=function(){createjs.Tween.removeTweens(this),this.removeFeed(),this.switchState(this.states.idle),this.nearFeeder=null,this.moveToGameObject=null,this.holdingFeedType=null,this.isScoopEmpty=!0,this.x=this.startX,this.y=this.startY},a.setFace=function(t){t==this.faces.right?this.scale.set(1,1):this.scale.set(-1,1),this.face=t},a.update=function(t){if(this.move&&this.moveToGameObject instanceof s){var e=this.moveToGameObject.x,i=this.moveToGameObject.y;i<this.maxMoveY&&(i=this.maxMoveY);var n=e-this.x,a=i-this.y,h=Math.sqrt(n*n+a*a),o=h/this.moveSpeed;if(h<this.squirrelCatchDistance)return this.move=!1,void this.moveComplete();createjs.Tween.get(this,{loop:!1,override:!0}).to({x:e,y:i},o,createjs.Ease.linear)}},a.clear=function(){this.removeFeed(),this.app.animator.stop(this.nc,!0),this.removeChild(this.nc),this.nc=null,this.signal=null},namespace("fine_feathered_feast").NatureCat=n}(),function(){var t=include("PIXI.Container"),e=include("springroll.pixi.AdvancedMovieClip"),i=include("fine_feathered_feast.Constants"),s=function(e,i){t.call(this),this.app=e.app,this.data=i,this.panel=e,this.mc=null,this.states={idle:"idle",walk:"walk",eat:"eat",fly:"fly"},this.faces={left:"left",right:"right"},this.face=this.faces.right,this.active=!0,this.minYPosition=50,this.maxYPosition=450,this.moveLeftXPosition=-500,this.moveRightXPosition=1500,this.inLine=!1,this.foundFeed=!1,this.name=i.name,this.bubbleXPosition=i.bubbleXPosition,this.sfx=i.sfx,this.pivotY=i.pivotY,this.feedType=null,this.timeToFlyToFeeder=i.timeToFlyToFeeder,this.timeToEat=i.timeToEat,this.currentState=this.states.idle,this.signal=new springroll.EventDispatcher,this.init()},n=extend(s,t);n.pickRandomFeed=function(){if(this.panel.feedBags){var t=this.panel.feedBags[Math.round(Math.random()*(this.panel.feedBags.length-1))].feedType;if(this.panel.prevFeedType!=t&&(this.panel.repeatFeedCount=0),++this.panel.repeatFeedCount,this.panel.feedBags.length>1&&this.panel.repeatFeedCount>i.MaxFeedRepeatCount){this.panel.repeatFeedCount=1;var e=this.pickOtherFeed(t);e.length>0&&(t=e[Math.round(Math.random()*(e.length-1))].feedType)}this.feedType=t,this.panel.prevFeedType=t}},n.pickOtherFeed=function(t){return this.panel.feedBags.filter((function(e){return t!=e.feedType}))},n.init=function(){this.mc=new e(this.app.getCache(this.name+"Anim"),this.app.getCache(this.name+"Atlas")),this.mc.anchor.set(.5,this.pivotY),this.addChild(this.mc),this.pickRandomFeed(),this.switchState(this.states.idle)},n.switchState=function(t){this.currentState=t,this.currentState==this.states.idle?this.app.animator.play(this.mc,{anim:t,start:-1}):this.app.animator.play(this.mc,{anim:t,speed:.8},this.onAnimComplete.bind(this))},n.onAnimComplete=function(){if(this.currentState==this.states.eat){var t=["eat1","eat2","eat3","eat"].shuffle()[0],e=.4;"eat"==t&&(e=.8),this.app.animator.play(this.mc,{anim:t,speed:e},this.onAnimComplete.bind(this))}},n.flyIn=function(t){this.spot=t;var e=t.birdPosition;e.x<this.x?this.setFace(this.faces.left):this.setFace(this.faces.right),this.switchState(this.states.fly),createjs.Tween.get(this,{loop:!1,override:!0}).to({x:e.x,y:e.y},this.getDuration(this.x,e.x,this.y,e.y,this.timeToFlyToFeeder),createjs.Ease.linear).call(this.flyInComplete.bind(this)),this.birdFlyInClip="Bird_Fly_"+[1,2,3,4].shuffle()[0],this.app.sound.play("bird_leaves_branch_tweet_1",{complete:function(){this.flySoundInstance=this.app.sound.play(this.birdFlyInClip)}.bind(this)})},n.flyInComplete=function(){this.flySoundInstance&&this.flySoundInstance.stop(),this.panel.gameOver||(this.spot.hasFeed?(this.switchState(this.states.eat),this.spot.bird=this,this.spot.birdFace==this.faces.left?this.setFace(this.faces.left):this.setFace(this.faces.right),this.eatSoundInstance&&this.eatSoundInstance.stop(),this.eatSoundInstance=this.app.sound.play("Bird_Eat_"+[1,2,3,4].shuffle()[0],{loop:-1}),this.panel.isTutorialOn||this.startEatTimer()):this.flyOff())},n.startEatTimer=function(){this.spot.meter.start(this.timeToEat*i.SecondsToMilliSeconds),createjs.Tween.get(this,{loop:!1,override:!0}).wait(this.timeToEat*i.SecondsToMilliSeconds).call(this.eatComplete.bind(this))},n.eatComplete=function(){this.eatSoundInstance&&this.eatSoundInstance.stop(),this.panel.gameOver||(this.app.sound.play("Bird_Feeding_Completed"),this.app.sound.play(this.sfx+"_Long"),this.spot&&this.spot.feeder&&this.spot.feeder.removeFeed(this.spot),this.spot.bird=null,this.signal&&this.signal.trigger("onEatFeed"),this.flyOff())},n.getDuration=function(t,e,i,s,n){n=1/n;var a=t-e,h=i-s,o=Math.sqrt(a*a+h*h);return 0===n?0:o/n},n.flyOff=function(){if(this.eatSoundInstance&&this.eatSoundInstance.stop(),!this.panel.gameOver){var t=this.moveRightXPosition;this.face==this.faces.left&&(t=this.moveLeftXPosition);var e=this.minYPosition+Math.random()*this.maxYPosition;this.parent.addChild(this),this.switchState(this.states.fly),createjs.Tween.get(this,{loop:!1,override:!0}).to({x:t,y:e},this.getDuration(this.x,t,this.y,e,this.timeToFlyToFeeder),createjs.Ease.linear).call(this.flyOffComplete.bind(this)),this.flySoundInstance=this.app.sound.play(this.birdFlyInClip)}},n.flyOffComplete=function(){this.flySoundInstance&&this.flySoundInstance.stop(),this.kill()},n.reset=function(){createjs.Tween.removeTweens(this),this.switchState(this.states.idle),this.active=!0,this.inLine=!1,this.foundFeed=!1,this.setFace(this.faces.right),this.x=0,this.y=0,this.pickRandomFeed()},n.kill=function(){createjs.Tween.removeTweens(this),this.x=0,this.y=0,this.active=!1},n.setFace=function(t){t==this.faces.right?this.scale.set(1,1):this.scale.set(-1,1),this.face=t},n.clear=function(){createjs.Tween.removeTweens(this),this.app.animator.stop(this.mc,!0),this.removeChild(this.mc),this.signal=null,this.mc=null},namespace("fine_feathered_feast").Bird=s}(),function(){var t=include("PIXI.Container"),e=include("fine_feathered_feast.Constants"),i=function(e){t.call(this),this.hud=e,this.app=e.app,this.timerBar=new PIXI.Sprite(e.atlas.getFrame("TimerBar")),this.timerBar.anchor.set(0,.5),this.timerBar.x=34,this.addChild(this.timerBar),this.timerBar.scale.set(1,1),this.timerBar.tint=65280,this.timeIcon=new PIXI.Sprite(e.atlas.getFrame("TimeIcon")),this.timeIcon.anchor.set(0,.5),this.timeIcon.x=-6,this.addChild(this.timeIcon),this.timerMask=new PIXI.Graphics,this.timerMask.beginFill(65280),this.timerMask.drawRect(34,-30,this.timerBar.width,60),this.timerMask.endFill(),this.addChild(this.timerMask),this.timerBar.mask=this.timerMask,this.playedAudio=!1},s=extend(i,t);s.start=function(t){this.playedAudio=!1,this.timerTween=createjs.Tween.get(this.timerMask,{loop:!1,override:!0}).to({x:.98*-this.timerBar.width},t*e.SecondsToMilliSeconds,createjs.Ease.linear).call(this.finish.bind(this)),this.timerTween.addEventListener("change",this.update.bind(this))},s.pause=function(){this.timerTween&&this.timerTween.setPaused(!0)},s.resume=function(){this.timerTween&&this.timerTween.setPaused(!1)},s.update=function(t){!this.playedAudio&&t.currentTarget.duration-t.currentTarget.position<=1e4&&(this.app.sound.play("5Seconds",{loop:1}),this.playedAudio=!0,this.timerBar.tint=15348515),this.timerTween.removeEventListener("change",this.update.bind(this))},s.finish=function(){createjs.Tween.removeTweens(this.timerMask),this.hud.signal.trigger("onTimerComplete")},s.reset=function(){this.timerMask.x=0,createjs.Tween.removeTweens(this.timerMask)},s.clear=function(){createjs.Tween.removeTweens(this.timerMask),this.removeChild(this.timerBar),this.timerBar=null,this.removeChild(this.timerMask),this.timerMask=null,this.removeChild(this.timeIcon),this.timeIcon=null},namespace("fine_feathered_feast").ProgressBar=i}(),function(){var t=include("PIXI.Container"),e=include("fine_feathered_feast.ProgressBar"),i=function(i){t.call(this),this.panel=i,this.app=i.app,this.signal=new springroll.EventDispatcher,this.atlas=this.app.getCache("PopupAtlas"),this.bg=new PIXI.Sprite(this.atlas.getFrame("HUD_BG")),this.addChild(this.bg),this.progressBar=new e(this),this.progressBar.x=635.5,this.progressBar.y=47,this.addChild(this.progressBar),this.levelTime=this.app.config.levels[this.app.levelNo].levelTime,this.birdsCountText=new PIXI.extras.BitmapText("0",{font:"70px birdsCountFont",align:"center",tint:16575956}),this.birdsCountText.x=255,this.addChild(this.birdsCountText),this.acorns=[],this.addAcorns()},s=extend(i,t);s.acornEffect=function(t){createjs.Tween.get(t.scale,{loop:!1}).to({x:1,y:1},200,createjs.Ease.sineOut).to({x:.65,y:.65},200,createjs.Ease.sineIn),this.app.sound.play("Acorn_Awarded",{complete:function(){this.signal&&this.signal.trigger("onEarnAcorn")}.bind(this)})},s.addAcorns=function(){for(var t=this.app.config.levels[this.app.levelNo].stars,e=0;e<t.length;e++){var i=t[e],s=new PIXI.Sprite(this.atlas.getFrame("Acorn_Popup_Lose"));s.birds=i.birds,s.anchor.set(.5),s.scale.set(.65),s.x=390+74*e,s.y=46,this.addChild(s),s.isWon=!1,this.acorns.push(s)}},s.pauseTimer=function(){this.progressBar.pause()},s.resumeTimer=function(){this.progressBar.resume()},s.startTimer=function(t){this.progressBar.start(t)},s.formatTime=function(t){var e="0"+Math.floor(t/60),i="0"+(t-60*e);return e.substr(-2)+":"+i.substr(-2)},s.format=function(t){return t<=9&&0!==t?"0"+t:t},s.update=function(){this.birdsCountText.text=this.format(this.panel.birdsEatCount),this.panel.birdsEatCount>0&&(this.birdsCountText.x=250),this.acorns.map(function(t){!t.isWon&&this.panel.birdsEatCount>=t.birds&&(t.texture=this.atlas.getFrame("Acorn_Popup_Win"),t.isWon=!0,this.panel.acornsAwarded++,this.acornEffect(t))}.bind(this))},s.reset=function(){for(var t in this.progressBar.reset(),this.startTimer(this.levelTime),this.acorns){var e=this.acorns[t];e.texture=this.atlas.getFrame("Acorn_Popup_Lose"),e.isWon=!1}},s.clear=function(){for(var t in createjs.Tween.removeTweens(this),this.removeChild(this.bg),this.bg=null,this.progressBar.clear(),this.removeChild(this.progressBar),this.progressBar=null,this.removeChild(this.birdsCountText),this.birdsCountText=null,this.removeChild(this.levelText),this.levelText=null,this.acorns){var e=this.acorns[t];this.removeChild(e),e=null}this.acorns=null,this.signal=null},namespace("fine_feathered_feast").HUD=i}(),function(){var t=include("PIXI.Sprite"),e=function(e){this.panel=e,this.app=e.app,t.call(this),this.anchor.set(.5),this.setNotWon()},i=extend(e,t);i.setWon=function(t){t|=0,this.texture&&(this.texture=this.panel.atlas.getFrame("AcornWon"),1==t&&this.app.sound.play("Zoip_1"))},i.setNotWon=function(){this.texture=this.panel.atlas.getFrame("AcornNotWon")},i.show=function(t){t|=0,createjs.Tween.get(this.scale,{loop:!1}).wait(t).call(this.setWon.bind(this,1)).to({x:1.5,y:1.5},200,createjs.Ease.sineOut).to({x:1,y:1},200,createjs.Ease.sineIn)},i.clear=function(){createjs.Tween.removeTweens(this.scale)},namespace("fine_feathered_feast").Acorn=e}(),function(){var t=include("PIXI.Sprite"),e=function(e){this.panel=e,this.app=e.app,t.call(this,this.app.getCache("Arrow")),this.anchor.set(1,1),this.scale.set(-1,1)},i=extend(e,t);i.show=function(t,e,i,s,n){this.clear();i=i||0,s=s||0,n=n||0,this.x=t,this.y=e,this.rotation=n*Math.PI/180,createjs.Tween.get(this,{loop:!0,override:!0}).to({x:t+i,y:e+s},250,createjs.Ease.linear).to({x:t,y:e},250,createjs.Ease.linear)},i.clear=function(){createjs.Tween.removeTweens(this)},namespace("fine_feathered_feast").Arrow=e}(),function(){var t=include("fine_feathered_feast.CustomButton"),e=include("fine_feathered_feast.Acorn"),i=function(e,i){this.panel=e,this.app=e.app,this.levelNo=i+1,this.key="level_"+i;var s=this.panel.atlas.getFrame("Tree"+this.levelNo);t.call(this,this.app,{up:s,down:this.panel.atlas.getFrame("TreeGlow"+this.levelNo),highlighted:this.panel.atlas.getFrame("TreeGlow"+this.levelNo),priority:["highlighted","disabled","down","over","selected","up"]}),this.signal=new springroll.EventDispatcher;var n=.5*s.width;this.pivot=new PIXI.Point(n,.9*s.height),this.levelBoard=new PIXI.Sprite(this.panel.atlas.getFrame("Level"+this.levelNo+"-locked")),this.levelBoard.x=n+6,this.levelBoard.y=s.height-62,this.levelBoard.anchor.set(.5),this.addChild(this.levelBoard),this.acorns=[],this.isCompleted()&&(this.unlock(),this.addAcorns(n+6,s.height-202),this.addFeeders(n,s.height))},s=extend(i,t),n=t.prototype;s.unlock=function(){this.locked=!1,this.enabled=!0,this.levelBoard.texture=this.panel.atlas.getFrame("Level"+this.levelNo)},s.lock=function(){this.locked=!0},s.update=function(){for(var t=this.app.saveData[this.key]?this.app.saveData[this.key].acorns:0,e=this.app.saveData[this.key]?this.app.saveData[this.key].prevAcorns:0,i=0,s=0;i<3;i++){var n=this.acorns[i];t>e&&i<t&&i>=e&&(n.show(2e3+425*s),++s)}return this.app.saveData[this.key].prevAcorns=t,this.app.saveData[this.key].isShown=!0,this.app.save(),2e3+425*s},s.addFeeders=function(t,e){var i=this.app.config.data.feeders[this.levelNo-1];this.feeders=new PIXI.Sprite(this.panel.atlas.getFrame("Feeder-for-Tree-"+this.levelNo)),this.feeders.anchor.set(.5,0),this.feeders.x=t+i.x,this.feeders.y=e+i.y,this.addChild(this.feeders)},s.addAcorns=function(t,i){this.acornBoard=new PIXI.Sprite(this.panel.atlas.getFrame("AcornsBoard")),this.acornBoard.x=t,this.acornBoard.y=i,this.acornBoard.anchor.set(.5),this.addChild(this.acornBoard);for(var s=this.app.saveData[this.key]?this.app.saveData[this.key].prevAcorns:0,n=.25*-this.acornBoard.width,a=0;a<3;a++){var h=new e(this.panel);h.x=n+55*a,h.y=0,this.acornBoard.addChild(h),this.acorns.push(h),s>0&&a<s&&h.setWon()}},s.onOver=function(){this.locked||(n.onOver.call(),this.levelBoard.rotation=Math.PI/180*-15)},s.buttonOut=function(){this.levelBoard.rotation=0},s.onPress=function(){this.locked?this.app.voPlayer.play("Daisy_Level_Not_Ready"):(this.levelBoard.scale.set(.9),this.app.musicInstance&&this.app.musicInstance.stop(),n.onPress.call(),this.app.sound.fadeOut("Button_Tap",100),this.app.sound.play("Guitar_"+[1,2,3].shuffle()[0],{delay:100}),this.app.saveData[this.key]||(this.app.saveData[this.key]={},this.app.saveData[this.key].isShown=!1,this.app.saveData[this.key].prevAcorns=0),this.app.saveData[this.key].isPlayed=!0,this.app.save(),this.enabled=!1,new springroll.DelayedCall(this.onDelay.bind(this),1e3))},s.onDelay=function(){this.signal&&this.signal.trigger("onClick",this.levelNo-1)},s.isCompleted=function(){return!!this.app.saveData[this.key]&&this.app.saveData[this.key].isCompleted},s.isPlayed=function(){return!!this.app.saveData[this.key]&&this.app.saveData[this.key].isPlayed},s.isShown=function(){return!!this.app.saveData[this.key]&&this.app.saveData[this.key].isShown},s.updateNeeded=function(){return!!this.app.saveData[this.key]&&this.app.saveData[this.key].prevAcorns<this.app.saveData[this.key].acorns},s.clear=function(){for(var t=0;t<this.acorns.length;t++)this.acorns[t].parent&&(this.acorns[t].clear(),this.removeChild(this.acorns[t])),this.acorns[t]=null;this.removeChild(this.levelBoard),this.levelBoard=null,this.signal=null,this.feeders&&this.removeChild(this.feeders),this.feeders=null},namespace("fine_feathered_feast").Tree=i}(),function(){var t=include("PIXI.Container"),e=include("fine_feathered_feast.CustomButton"),i=function(e){t.call(this),this.app=e.app,this.panel=e,this.animObjects=[],this.animTime=250,this.animStartDelay=0,this.playBtn=null},s=extend(i,t);s.show=function(){this.addEventListeners(),this.panel.popupContainer.addChild(this),this.app.sound.play("Pop_Up_Display"),this.display()},s.display=function(){this.scale.set(.8),createjs.Tween.get(this.scale,{loop:!1,override:!0}).to({x:1,y:1},500,createjs.Ease.elasticOut).call(this.onComplete.bind(this))},s.onComplete=function(){this.showAnimObjects()},s.hide=function(t){this.removeEventListeners(),this.scale.set(1),createjs.Tween.get(this.scale,{loop:!1,override:!0}).to({x:.8,y:.8},500,createjs.Ease.elasticIn).call(this.remove.bind(this,t))},s.remove=function(t){this.panel.popupContainer.removeChild(this),this.app.sound.play("Pop_Up_Remove"),this.hideAnimObjects(),this.stopPulsate(),this.signal.trigger("onPopupClose",t)},s.addEventListeners=function(){},s.removeEventListeners=function(){},s.hideAnimObjects=function(){this.animObjects.map((function(t){t.visible=!1}))},s.showAnimObjects=function(){for(var t=0;t<this.animObjects.length;t++){var e=this.animObjects[t];this.animate(e,t+1)}},s.animate=function(t,i){createjs.Tween.get(this).wait(this.animStartDelay+this.animTime*i).call(function(){t.visible=!0,t instanceof e&&(this.app.sound.play("Button_Display"),i==this.animObjects.length-1&&this.buttonsShown())}.bind(this))},s.buttonsShown=function(){},s.voCompleted=function(){this.pulsate()},s.pulsate=function(){if(this.playBtn){createjs.Tween.get(this.playBtn.scale,{loop:!0,override:!0}).to({x:1.1,y:1.1},250,createjs.Ease.sineIn).to({x:1,y:1},250,createjs.Ease.sineOut)}},s.stopPulsate=function(){this.playBtn&&createjs.Tween.removeTweens(this.playBtn.scale)},s.clear=function(){this.animObjects=null,this.app=null,this.panel=null},namespace("fine_feathered_feast").BasePopup=i}(),function(){var t=include("fine_feathered_feast.BasePopup"),e=include("fine_feathered_feast.CustomButton"),i=function(e){t.call(this,e),this.onClose=this.onClose.bind(this),this.popupData=this.app.config.levels[this.app.levelNo].popup,this.signal=new springroll.EventDispatcher,this.bg=null,this.photo=null,this.offsetX=35,this.init()},s=extend(i,t),n=t.prototype;s.init=function(){this.textureAtlas=this.app.getCache("IntroAtlas"),this.bg=new PIXI.Sprite(this.textureAtlas.getFrame("Intro_BG")),this.bg.anchor.set(.5,.5),this.addChild(this.bg),this.photo=new PIXI.Sprite,this.photo.anchor.set(.5,.5),this.addChild(this.photo),this.daisyHand=new PIXI.Sprite(this.textureAtlas.getFrame("Daisy_Hand")),this.daisyHand.x=-250,this.daisyHand.y=-13,this.addChild(this.daisyHand),this.playBtn=this.getButton(this.app.getCache("PopupAtlas"),"Play_Btn_Big"),this.addChild(this.playBtn),this.playBtn.x=330,this.playBtn.y=204,this.showingPhoto=-1},s.getButton=function(t,i){var s=new e(this.app,{up:t.getFrame(i+"_Normal"),over:t.getFrame(i+"_Over"),down:t.getFrame(i+"_Down")}),n=t.getFrame(i+"_Normal");return s.pivot=new PIXI.Point(.5*n.width,.5*n.height),s},s.showPhoto=function(t){var e=this.popupData[t];this.frameName=e.name,this.photo.texture=this.textureAtlas.getFrame(this.frameName),this.photo.anchor.set(.5,.5),this.frameName.indexOf("feeder")>-1||this.frameName.indexOf("Squirrels")>-1?(this.playFeederIntro(),this.playBirdVO=!1):(this.playBirdIntro(),this.playBirdVO=!0),this.showingPhoto=t,this.photo.x=e.pos.x,this.photo.y=e.pos.y},s.playFeederIntro=function(){var t=this.app.levelNo+1;this.app.config.levels[this.app.levelNo].stars[0].birds;2==t?t=4:4==t&&(t=2);var e=["Daisy_Level_"+t+"_Intro_Pop_Up_Feed_Feeders",2==t?"FFF_NC_Tally_Ho":"FFF_NC_Level_"+t+"_Feed-Feeder_Intro"];this.app.voPlayer.play(e,this.voCompleted.bind(this))},s.playBirdIntro=function(){var t=this.app.levelNo+1,e=(this.app.config.levels[this.app.levelNo].stars[0].birds,1);e=1==t?[1,2,3,4,5].shuffle()[0]:8==t?[1,2,3].shuffle()[0]:9==t?[1,2].shuffle()[0]:[1,2,3,4].shuffle()[0];var i=["Daisy_Level_"+t+"_"+this.frameName,"Daisy_Level_"+t+"_Fun_Fact_"+e];this.popupData.length<=1&&i.push(2==t?"FFF_NC_Tally_Ho":"FFF_NC_Level_"+t+"_Feed-Feeder_Intro"),this.app.voPlayer.play(i,this.voCompleted.bind(this))},s.onClose=function(){if(n.hide.call(this,"target"),this.stopPulsate(),this.playBirdVO){var t=this.getBirdsDataByName(this.frameName);t&&t.length>0&&this.app.sound.play(t[0].sfx+"_Long",{volume:4})}},s.getBirdsDataByName=function(t){return this.birds=this.app.config.data.birds,this.birds.filter((function(e){return e.name==t}))},s.remove=function(t){this.removeEventListeners(),this.panel.popupContainer.removeChild(this),this.app.sound.play("Pop_Up_Remove");this.showingPhoto<this.popupData.length-1?new springroll.DelayedCall(this.showNextPhoto.bind(this),650):this.signal.trigger("onPopupClose",t)},s.showNextPhoto=function(){this.show(this.showingPhoto+1)},s.addEventListeners=function(){this.playBtn.enabled=!0,this.playBtn.on("buttonPress",this.onClose)},s.removeEventListeners=function(){this.playBtn.enabled=!1,this.playBtn.off("buttonPress",this.onClose)},s.show=function(t){t|=0,n.show.call(this),this.showPhoto(t)},s.clear=function(){this.removeChild(this.bg),this.removeChild(this.photo),this.removeChild(this.playBtn),this.removeChild(this.daisyHand),this.bg=null,this.daisyHand=null,this.photo=null,this.playBtn=null,n.clear.call(this)},namespace("fine_feathered_feast").GameStartPopup=i}(),function(){var t=include("fine_feathered_feast.BasePopup"),e=include("fine_feathered_feast.CustomButton"),i=function(e){t.call(this,e),this.onPlay=this.onPlay.bind(this),this.onReplay=this.onReplay.bind(this),this.onHome=this.onHome.bind(this),this.states={win:"win",lose:"lose"},this.bg=null,this.title=null,this.state=null,this.acorns=[],this.signal=new springroll.EventDispatcher,this.init()},s=extend(i,t),n=t.prototype;s.getText=function(t,e,i){var s=new PIXI.extras.BitmapText("",{font:"72px birdsCountFont",align:"center",tint:t});return s.x=e,s.y=i,s},s.init=function(){var t=this.app.getCache("PopupAtlas");this.bg=new PIXI.Sprite(t.getFrame("LevelEnd_BG_Win")),this.bg.anchor.set(.5,.5),this.addChild(this.bg),this.fedText=new PIXI.Sprite(t.getFrame("FeedText")),this.fedText.anchor.set(.5,.5),this.fedText.x=15,this.fedText.y=4,this.addChild(this.fedText),this.feedText=new PIXI.Sprite(t.getFrame("FeedText2")),this.feedText.anchor.set(.5,.5),this.feedText.x=17.5,this.feedText.y=90,this.addChild(this.feedText),this.acornsContainer=new PIXI.Container,this.addChild(this.acornsContainer),this.birdsCountText=this.getText(5321997,0,-54),this.birdsCountTextShadow=this.getText(14858617,2,2),this.fedText.addChild(this.birdsCountText),this.birdsCountText.addChild(this.birdsCountTextShadow),this.birdsNeedCountText=this.getText(5321997,-26,-54),this.birdsNeedCountTextShadow=this.getText(14858617,2,2),this.feedText.addChild(this.birdsNeedCountText),this.birdsNeedCountText.addChild(this.birdsNeedCountTextShadow),this.replayBtn=this.getButton(t,"Replay_Btn"),this.replayBtn.x=-105,this.addChild(this.replayBtn),this.playBtn=this.getButton(t,"Play_Btn_Small"),this.addChild(this.playBtn),this.homeBtn=this.getButton(t,"Home_Btn"),this.playBtn.x=this.homeBtn.x=135,this.addChild(this.homeBtn),this.playBtn.y=this.homeBtn.y=this.replayBtn.y=217,this.addAcorns(t),this.hideAnimObjects()},s.getButton=function(t,i){var s=new e(this.app,{up:t.getFrame(i+"_Normal"),over:t.getFrame(i+"_Over"),down:t.getFrame(i+"_Down")}),n=t.getFrame(i+"_Normal");return s.pivot=new PIXI.Point(.5*n.width,.5*n.height),s},s.addAcorns=function(t){this.acorns=[];for(var e=0;e<3;e++){var i=new PIXI.Sprite(t.getFrame("Acorn_Popup_Lose"));i.anchor.set(.5,.5),i.x=170*e-160,i.y=77,i.index=e,this.acornsContainer.addChild(i),this.acorns.push(i)}},s.removeAcorns=function(){for(var t=0;t<3;t++)this.removeChild(this.acorns[t]),this.acorns[t]=null},s.setWon=function(t){this.animStartDelay=1e3;var e=this.app.getCache("PopupAtlas");t.texture=e.getFrame("Acorn_Popup_Win"),this.app.sound.play("Zoip_1"),t.index==this.panel.acornsAwarded-1&&(this.animStartDelay=0,this.panel.acornsAwarded>=2?(this.app.sound.play("3_Acorns_Award"),createjs.Tween.get(this,{loop:!1}).wait(3e3).call(this.buttonsShown.bind(this))):this.buttonsShown())},s.showAcorn=function(t,e){e|=0,createjs.Tween.get(t.scale,{loop:!1}).wait(e).call(this.setWon.bind(this,t)).to({x:1.5,y:1.5},200,createjs.Ease.sineOut).to({x:1,y:1},200,createjs.Ease.sineIn)},s.setAcorns=function(t){for(var e=0;e<t;e++)this.acorns[e]&&this.acorns[e].texture&&this.showAcorn(this.acorns[e],0+425*e)},s.show=function(t){this.state=t;var e=this.app.getCache("PopupAtlas");this.birdsCountText.text=this.panel.birdsEatCount,this.birdsCountTextShadow.text=this.birdsCountText.text,this.birdsCountText.pivot.x=.5*this.birdsCountText.width;var i=this.app.config.levels[this.app.levelNo].stars[0].birds;this.birdsNeedCountText.text=i,this.birdsNeedCountTextShadow.text=this.birdsNeedCountText.text,this.birdsNeedCountText.pivot.x=.5*this.birdsNeedCountText.width,this.state==this.states.win?(this.fedText.y-=15,this.bg.texture=e.getFrame("LevelEnd_BG_Win"),this.homeBtn.interactive=this.homeBtn.visible=this.feedText.visible=!1,this.birdsNeedCountText.visible=!1,this.acornsContainer.visible=!1,this.playBtn.interactive=!0,this.animObjects=[],this.animObjects.push(this.acornsContainer)):(1==this.panel.birdsEatCount&&(this.fedText.texture=e.getFrame("FeedText1"),this.fedText.x=23),this.bg.texture=e.getFrame("LevelEnd_BG_Lose"),this.playBtn.interactive=!1,this.birdsNeedCountText.visible=this.homeBtn.interactive=!0,this.acornsContainer.visible=this.playBtn.visible=!1),n.show.call(this)},s.onComplete=function(){var t=null;if(this.state==this.states.win)this.app.sound.play("Level_Complete_Win"),t=[["Daisy_Win_1a","Daisy_Win_2a","Daisy_Win_3a"].shuffle()[0],"Daisy_You_Fed",this.panel.birdsEatCount<=30?"Daisy_"+this.panel.birdsEatCount:"Daisy_A_Lot_Of",1==this.panel.birdsEatCount?"Daisy_Bird":"Daisy_Birds"],this.app.voPlayer.play(t,this.setAcorns.bind(this,this.panel.acornsAwarded)),n.onComplete.call(this);else{this.app.sound.play("Fail_2");var e=this.app.config.levels[this.app.levelNo].stars[0].birds;t=["Daisy_You_Fed",this.panel.birdsEatCount<=30?"Daisy_"+this.panel.birdsEatCount:"Daisy_A_Lot_Of",1==this.panel.birdsEatCount?"Daisy_Bird":"Daisy_Birds","Daisy_We_Need_To_Feed","Daisy_"+e],this.app.levelNo<9?t.push("Daisy_Birdies_To_Get_To_Next"):t.push("Daisy_Birds"),this.animStartDelay=200,this.app.voPlayer.play(t,this.buttonsShown.bind(this)),this.sizeUp(this.fedText,0,2e3),this.sizeUp(this.feedText,2400,3e3)}},s.sizeUp=function(t,e,i){createjs.Tween.get(t.scale,{loop:!1}).wait(e).to({x:1.2,y:1.2},200,createjs.Ease.sineOut).wait(i).to({x:1,y:1},200,createjs.Ease.sineIn)},s.buttonsShown=function(){this.state==this.states.win?this.app.voPlayer.play(["Daisy_Win_1b","Daisy_Win_2b","Daisy_Win_3b"].shuffle()[0],this.voCompleted.bind(this)):this.app.voPlayer.play("Daisy_Fail_1",this.voCompleted.bind(this))},s.onReplay=function(){this.hide("replay")},s.onPlay=function(){this.app.levelNo>=9?this.hide("congrats"):this.hide("levels")},s.onHome=function(){this.hide("levels")},s.addEventListeners=function(){this.replayBtn.enabled=!0,this.playBtn.enabled=!0,this.homeBtn.enabled=!0,this.replayBtn.on("buttonPress",this.onReplay),this.playBtn.on("buttonPress",this.onPlay),this.homeBtn.on("buttonPress",this.onHome)},s.removeEventListeners=function(){this.replayBtn.enabled=!1,this.playBtn.enabled=!1,this.homeBtn.enabled=!1,this.replayBtn.off("buttonPress",this.onReplay),this.playBtn.off("buttonPress",this.onPlay),this.homeBtn.off("buttonPress",this.onHome)},s.clear=function(){this.removeAcorns(),this.removeEventListeners(),this.removeChild(this.bg),this.removeChild(this.title),this.birdsCountText.removeChild(this.birdsCountTextShadow),this.removeChild(this.birdsCountText),this.birdsNeedCountText.removeChild(this.birdsNeedCountTextShadow),this.removeChild(this.birdsNeedCountText),this.removeChild(this.replayBtn),this.removeChild(this.playBtn),this.removeChild(this.homeBtn),this.removeChild(this.fedText),this.removeChild(this.feedText),this.fedText=null,this.feedText=null,this.bg=null,this.title=null,this.birdsCountTextShadow=null,this.birdsNeedCountTextShadow=null,this.birdsCountText=null,this.birdsNeedCountText=null,this.replayBtn=null,this.playBtn=null,this.homeBtn=null,n.clear.call(this)},namespace("fine_feathered_feast").LevelEndPopup=i}(),function(){var t=include("fine_feathered_feast.BasePopup"),e=include("fine_feathered_feast.CustomButton"),i=function(e){t.call(this,e),this.onPlay=this.onPlay.bind(this),this.onReplay=this.onReplay.bind(this),this.onQuit=this.onQuit.bind(this),this.bg=null,this.signal=new springroll.EventDispatcher,this.init()},s=extend(i,t),n=t.prototype;s.init=function(){var t=this.app.getCache("PopupAtlas");this.bg=new PIXI.Sprite(t.getFrame("PauseBG")),this.bg.anchor.set(.5,.5),this.addChild(this.bg),this.playBtn=this.getButton(t,"Play_Btn_Big"),this.addChild(this.playBtn),this.playBtn.y=-82,this.replayBtn=this.getButton(t,"Replay_Btn"),this.replayBtn.x=-120,this.addChild(this.replayBtn),this.quitBtn=this.getButton(t,"Home_Btn"),this.quitBtn.x=120,this.addChild(this.quitBtn),this.quitBtn.y=this.replayBtn.y=105},s.getButton=function(t,i){var s=new e(this.app,{up:t.getFrame(i+"_Normal"),over:t.getFrame(i+"_Over"),down:t.getFrame(i+"_Down")}),n=t.getFrame(i+"_Normal");return s.pivot=new PIXI.Point(.5*n.width,.5*n.height),s},s.onReplay=function(){this.hide("replay")},s.onPlay=function(){this.hide("resume")},s.onQuit=function(){this.hide("levels")},s.addEventListeners=function(){this.replayBtn.enabled=!0,this.playBtn.enabled=!0,this.quitBtn.enabled=!0,this.replayBtn.on("buttonPress",this.onReplay),this.playBtn.on("buttonPress",this.onPlay),this.quitBtn.on("buttonPress",this.onQuit)},s.removeEventListeners=function(){this.replayBtn.enabled=!1,this.playBtn.enabled=!1,this.quitBtn.enabled=!1,this.replayBtn.off("buttonPress",this.onReplay),this.playBtn.off("buttonPress",this.onPlay),this.quitBtn.off("buttonPress",this.onQuit)},s.clear=function(){this.removeEventListeners(),this.removeChild(this.bg),this.removeChild(this.replayBtn),this.removeChild(this.playBtn),this.removeChild(this.quitBtn),this.bg=null,this.replayBtn=null,this.playBtn=null,this.quitBtn=null,n.clear.call(this)},namespace("fine_feathered_feast").PausePopup=i}(),function(){var t=include("fine_feathered_feast.BasePopup"),e=include("fine_feathered_feast.CustomButton"),i=function(e){t.call(this,e),this.onPlay=this.onPlay.bind(this),this.bg=null,this.signal=new springroll.EventDispatcher,this.init()},s=extend(i,t),n=t.prototype;s.init=function(){var t=this.app.getCache("PopupAtlas");this.bg=new PIXI.Sprite(t.getFrame("PauseBG")),this.bg.anchor.set(.5),this.bg.scale.set(.9),this.addChild(this.bg),this.text=new PIXI.Sprite(t.getFrame("TargetPopupText")),this.text.anchor.set(.5,1),this.text.x=13,this.text.y=-40,this.addChild(this.text),this.minBirds=this.app.config.levels[this.app.levelNo].stars[0].birds,this.birdsCountText=this.getText(5321997,-24,-130),this.birdsCountTextShadow=this.getText(14858617,2,2),this.addChild(this.birdsCountText),this.birdsCountText.addChild(this.birdsCountTextShadow),this.birdsCountText.text=this.birdsCountTextShadow.text=this.minBirds,this.birdsCountText.pivot.x=.5*this.birdsCountText.width,this.playBtn=this.getButton(t,"Play_Btn_Small"),this.addChild(this.playBtn),this.playBtn.x=15,this.playBtn.y=80},s.getText=function(t,e,i){var s=new PIXI.extras.BitmapText("",{font:"72px birdsCountFont",align:"center",tint:t});return s.x=e,s.y=i,s},s.getButton=function(t,i){var s=new e(this.app,{up:t.getFrame(i+"_Normal"),over:t.getFrame(i+"_Over"),down:t.getFrame(i+"_Down")}),n=t.getFrame(i+"_Normal");return s.pivot=new PIXI.Point(.5*n.width,.5*n.height),s},s.show=function(t){n.show.call(this);var e=["Daisy_We_Need_To_Feed","Daisy_"+this.minBirds];this.app.levelNo<9?e.push("Daisy_Birdies_To_Get_To_Next"):e.push("Daisy_Birds"),this.app.voPlayer.play(e,this.voCompleted.bind(this))},s.onPlay=function(){this.hide("start")},s.addEventListeners=function(){this.playBtn.enabled=!0,this.playBtn.on("buttonPress",this.onPlay)},s.removeEventListeners=function(){this.playBtn.enabled=!1,this.playBtn.off("buttonPress",this.onPlay)},s.clear=function(){this.removeEventListeners(),this.removeChild(this.bg),this.removeChild(this.playBtn),this.bg=null,this.playBtn=null,this.removeChild(this.text),this.text=null,this.removeChild(this.birdsCountText),this.birdsCountText=null,n.clear.call(this)},namespace("fine_feathered_feast").TargetPopup=i}(),function(){var t,e=include("PIXI.Container"),i=function(){t||(t=include("springroll.Application")),e.call(this),this.app=t.instance,this.config=this.app.config},s=extend(i,e);s.setup=function(){},s.teardown=function(){},s.cleanupChildren=function(t){var e,i,s=arguments.length;for(i=0;i<s;i++)(e=arguments[i])&&(Array.isArray(e)&&e.length>0?this.cleanupChildren.apply(this,e):(this.app.animator&&this.app.animator.stop(e,!0),e.stop&&e.stop(),e.destroy&&e.destroy(),e.children&&e.removeChildren()))},s.destroy=function(){this.app=null,this.config=null,this.children&&this.removeChildren()},namespace("springroll.pixi").BasePanel=i}(),function(){var t=include("springroll.pixi.BasePanel"),e=include("springroll.pixi.Button"),i=function(){t.call(this),this.background=null,this.sweetButton=null},s=t.prototype,n=extend(i,t);n.setup=function(){this.background=new PIXI.Sprite(this.app.getCache("CongratsBackground")),this.addChild(this.background),this.sweetButton=new e({up:this.app.getCache("SweetButton_Normal")}),this.addChild(this.sweetButton);var t=this.app.getCache("SweetButton_Normal");this.sweetButton.pivot=new PIXI.Point(.5*t.width,.5*t.height)},n.teardown=function(){s.teardown.call(this),this.removeChild(this.background),createjs.Tween.removeTweens(this.sweetButton),this.sweetButton.destroy(),this.removeChild(this.sweetButton),this.background=null,this.sweetButton=null},namespace("fine_feathered_feast").CongratsPanel=i}(),function(){var t=include("springroll.pixi.BasePanel"),e=include("fine_feathered_feast.CustomButton"),i=include("fine_feathered_feast.NatureCat"),s=include("fine_feathered_feast.GameStartPopup"),n=include("fine_feathered_feast.Squirrel"),a=include("fine_feathered_feast.FeedBag"),h=include("fine_feathered_feast.Feeder"),o=include("fine_feathered_feast.HUD"),r=include("fine_feathered_feast.PausePopup"),l=include("fine_feathered_feast.TargetPopup"),p=include("fine_feathered_feast.LevelEndPopup"),d=function(){t.call(this),this.maxBirdsQueue=4,this.bubbleXPosition=19,this.bubbleYPosition=-93,this.firstBubbleYPosition=-60,this.feeders=[],this.feedBags=[],this.squirrels=[],this.birdsBubbles=[],this.birds=[],this.line=[],this.background=null,this.startPopup=null,this.gameOver=!1,this.paused=!1,this.gameStarted=!1,this.squirrelAppeared=!1,this.birdsEatCount=0,this.repeatFeedCount=0,this.acornsAwarded=0,this.birdsRepeatCount=0},u=t.prototype,c=extend(d,t);c.setup=function(){this.background=new PIXI.Sprite(this.app.getCache("Background_Sky")),this.background.anchor.set(.5),this.addChild(this.background),this.clouds=new PIXI.Sprite(this.app.getCache("Background_Clouds")),this.clouds.anchor.set(.5),this.addChild(this.clouds);var t=parseInt(this.app.levelNo+1);this.seasonalOverlay=new PIXI.Sprite(this.app.getCache("SeasonalOverlay_All_Lvl"+t)),this.seasonalOverlay.anchor.set(.5),this.addChild(this.seasonalOverlay),this.branches=new PIXI.Sprite(this.app.getCache("Branches_All3_Lvl"+t)),this.branches.y=t>7?210:200,this.branches.anchor.set(.5),this.addChild(this.branches),this.gameLayer=new PIXI.Container,this.addChild(this.gameLayer),this.addFeeders(),this.addSquirrels(),this.addBirdBubble(),this.nc=new i(this),this.nc.x=this.nc.startX,this.nc.y=this.nc.startY,this.gameLayer.addChild(this.nc),this.addFeedBags(),this.hud=new o(this),this.addChild(this.hud),this.scrim=new PIXI.Graphics,this.scrim.beginFill(0),this.scrim.drawRect(-683,-450,1366,900),this.scrim.alpha=.4,this.popupContainer=new PIXI.Container,this.addChild(this.popupContainer),this.popupContainer.addChildAt(this.scrim,0),this.endPopup=new p(this),this.startPopup=new s(this),this.targetPopup=new l(this),this.pausePopup=new r(this);var n=this.app.getCache("PopupAtlas");this.pauseBtn=new e(this.app,{up:n.getFrame("Back_Btn_Normal"),over:n.getFrame("Back_Btn_Over"),down:n.getFrame("Back_Btn_Down"),disabled:n.getFrame("Back_Btn_Disabled")}),this.addChild(this.pauseBtn)},c.addGoText=function(){this.goText=new PIXI.Sprite,this.goText.anchor.set(.5),this.popupContainer.addChild(this.goText)},c.removeGoText=function(){this.popupContainer.removeChild(this.goText),this.goText=null},c.addBirdBubble=function(){var t=new PIXI.filters.DropShadowFilter;t.alpha=.2,/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent)&&(t.distance=5);for(var e=0;e<this.maxBirdsQueue;e++){var i=new PIXI.Sprite;i.anchor.set(0,1),i.x=this.bubbleXPosition,i.y=this.bubbleYPosition,this.birdsBubbles.push(i),0===e&&(i.scale.set(1.5),i.y=this.firstBubbleYPosition),i.filters=[t]}},c.addSquirrels=function(){this.squirrelAppeared=!1;for(var t=this.app.config.levels[this.app.levelNo].squirrels,e=0;e<t;e++){var i=new n(this);this.gameLayer.addChild(i),this.squirrels.push(i)}},c.addFeeders=function(){var t=this.app.config.levels[this.app.levelNo].feeders;for(var e in t){var i=t[e],s=new h(this,i);s.index=e,this.gameLayer.addChild(s),this.feeders.push(s)}},c.addFeedBags=function(){var t=this.app.config.levels[this.app.levelNo].feedBags;for(var e in t){var i=t[e],s=new a(this,i);s.index=e,this.gameLayer.addChild(s),this.feedBags.push(s)}},c.teardown=function(){u.teardown.call(this),this.removeChild(this.background),this.background=null,this.removeChild(this.clouds),this.clouds=null,this.removeChild(this.seasonalOverlay),this.seasonalOverlay=null,this.removeChild(this.branches),this.branches=null,this.removeChild(this.pauseBtn),this.pauseBtn=null,this.hud.clear(),this.removeChild(this.hud),this.hud=null,this.startPopup.clear(),this.startPopup=null,this.endPopup.clear(),this.endPopup=null,this.pausePopup.clear(),this.pausePopup=null,this.removeChild(this.popupContainer),this.popupContainer=null,this.nc.clear(),this.gameLayer.removeChild(this.nc),this.nc=null,this.remove(this.feedBags),this.remove(this.feeders),this.remove(this.squirrels),this.remove(this.birdsBubbles),this.remove(this.birds),this.remove(this.line),this.feeders=[],this.feedBags=[],this.squirrels=[],this.birdsBubbles=[],this.goText&&(this.removeChild(this.goText),this.goText=null),this.removeChild(this.gameLayer),this.gameLayer=null},c.remove=function(t){for(var e in t){var i=t[e];i.clear&&i.clear(),i.parent.removeChild(i),i=null}},namespace("fine_feathered_feast").GamePanel=d}(),function(){var t=include("springroll.pixi.BasePanel"),e=include("springroll.pixi.AdvancedMovieClip"),i=include("fine_feathered_feast.CustomButton"),s=function(){t.call(this),this.background=null},n=t.prototype,a=extend(s,t);a.setup=function(){this.background=new PIXI.Sprite(this.app.getCache("IntroBackground")),this.addChild(this.background),this.bluejay=new e(this.app.getCache("BluejayIntroAnim"),this.app.getCache("BluejayAtlas")),this.addChild(this.bluejay),this.femaleCardinal=new e(this.app.getCache("FemaleCardinalIntroAnim"),this.app.getCache("FemaleCardinalAtlas")),this.addChild(this.femaleCardinal),this.warbler=new e(this.app.getCache("YellowBreastedWarblerIntroAnim"),this.app.getCache("YellowBreastedWarblerAtlas")),this.addChild(this.warbler),this.chickadee=new e(this.app.getCache("ChickadeeIntroAnim"),this.app.getCache("ChickadeeAtlas")),this.addChild(this.chickadee),this.maleCardinal=new e(this.app.getCache("MaleCardinalIntroAnim"),this.app.getCache("MaleCardinalAtlas")),this.addChild(this.maleCardinal),this.daisy=new e(this.app.getCache("DaisyAnim")),this.addChild(this.daisy),this.nc=new e(this.app.getCache("NatureCatAnim")),this.addChild(this.nc);var t=this.app.getCache("PopupAtlas");this.startButton=this.getButton(t,"SkipButton"),this.addChild(this.startButton)},a.getButton=function(t,e){var s=new i(this.app,{up:t.getFrame(e+"_Normal"),over:t.getFrame(e+"_Over"),down:t.getFrame(e+"_Down")}),n=t.getFrame(e+"_Normal");return s.pivot=new PIXI.Point(.5*n.width,.5*n.height),s},a.teardown=function(){n.teardown.call(this),this.removeChild(this.background),this.background=null,this.removeChild(this.chickadee),this.chickadee=null,this.removeChild(this.maleCardinal),this.maleCardinal=null,this.removeChild(this.bluejay),this.bluejay=null,this.removeChild(this.femaleCardinal),this.femaleCardinal=null,this.removeChild(this.warbler),this.warbler=null,this.startButton.destroy(),this.removeChild(this.startButton)},namespace("fine_feathered_feast").IntroPanel=s}(),function(){var t=include("springroll.pixi.BasePanel"),e=include("fine_feathered_feast.Tree"),i=function(){t.call(this),this.background=null,this.trees=null,this.ncScale=.6,this.footprints=[],this.foots=[]},s=t.prototype,n=extend(i,t);n.setup=function(){this.background=new PIXI.Sprite(this.app.getCache("SelectBackground")),this.addChild(this.background),this.containerLayer=new PIXI.Container,this.addChild(this.containerLayer),this.atlas=this.app.getCache("LevelSelectionAtlas"),this.footprints=[],this.foots=[];var t=this.app.config.data.footprints,i=null,s=0;this.trees=[];var n=this.app.config.data.trees,a=null,h=[];for(s=0;s<n.length;s++){var o=new e(this,s);if(i=n[s],o.x=i.x,o.y=i.y,this.containerLayer.addChild(o),this.trees.push(o),o.isCompleted()&&o.isShown()&&s<=8){var r=new PIXI.Sprite(this.atlas.getFrame("Footprints_"+(s+1)+"_"+(s+2)));i=t[s],r.anchor.set(.5),r.x=i.x,r.y=i.y,this.containerLayer.addChildAt(r,0),this.footprints.push(r)}0===s||a&&a.isCompleted()||this.getParameterByName("debug")?(o.unlock(),o.isPlayed()||a&&!a.isShown()||(o.highlighted=!0)):o.lock(),a=o;var l={i:s,y:i.y};h.push(l)}h.sort((function(t,e){return t.y<e.y?-1:t.y>e.y?1:0})),h.forEach((function(t){this.containerLayer.addChild(this.trees[t.i])}),this),h=null,this.nc=this.app.getCache("NC"),this.nc.scale.set(this.ncScale),this.nc.anchor.set(.5,1),this.containerLayer.addChild(this.nc)},n.getParameterByName=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},n.teardown=function(){this.app.animator.stop(this.nc,!0),this.removeChild(this.background),this.removeChild(this.titleText),this.titleText=null,this.background=null;for(var t=0;t<this.trees.length;t++)this.trees[t].clear(),this.trees[t].destroy(),this.trees[t].parent&&this.containerLayer.removeChild(this.trees[t]),this.trees[t]=null;for(t=0;t<this.footprints.length;t++)this.footprints[t].parent&&this.containerLayer.removeChild(this.footprints[t]),this.footprints[t]=null;for(t=0;t<this.foots.length;t++)this.foots[t].parent&&this.containerLayer.removeChild(this.foots[t]),this.foots[t]=null;this.trees=null,this.footprints=null,this.foots=null,this.removeChild(this.containerLayer),this.containerLayer=null,s.teardown.call(this)},namespace("fine_feathered_feast").SelectPanel=i}(),function(){var t=include("springroll.pixi.BasePanel"),e=include("springroll.pixi.Button"),i=function(){t.call(this),this.background=null,this.startButton=null},s=t.prototype,n=extend(i,t);n.setup=function(){this.background=new PIXI.Sprite(this.app.getCache("TitleBackground")),this.addChild(this.background),this.startButton=new e({up:this.app.getCache("PlayButton_Normal"),down:this.app.getCache("PlayButton_Over")}),this.addChild(this.startButton);var t=this.app.getCache("PlayButton_Normal");this.startButton.pivot=new PIXI.Point(.5*t.width,.5*t.height)},n.teardown=function(){s.teardown.call(this),this.removeChild(this.background),this.startButton.destroy(),this.removeChild(this.startButton),this.background=null,this.startButton=null},namespace("fine_feathered_feast").TitlePanel=i}(),function(t){var e,i=include("springroll.State"),s=function(t,s){if(e||(e=include("springroll.pixi.BasePanel"),include("springroll.Debug",!1)),!(t instanceof e))throw"springroll.State requires the panel be a springroll.pixi.BasePanel";(s=s||{}).manifest&&(s.preload=s.manifest),i.call(this,t,s);this.on("loading",(function(t){}),100).on("loaded",(function(t){this.panel.setup()}),100).on("exit",(function(){this.panel.teardown()}),100)},n=i.prototype,a=i.extend(s);a.enterState=function(){},a.destroy=function(){this.panel.destroy(),n.destroy.call(this)},namespace("springroll.pixi").BaseState=s}(),function(){var t=include("springroll.pixi.BaseState"),e=include("fine_feathered_feast.CongratsPanel"),i=function(i){t.call(this,new e,i),this.onPlay=this.onPlay.bind(this),this.buttonOver=this.buttonOver.bind(this),this.buttonOut=this.buttonOut.bind(this),this.origScale=null},s=t.prototype,n=extend(i,t);n.enterState=function(){this.app.music="Splash_Loop",this.panel.sweetButton.on("buttonPress",this.onPlay),this.panel.sweetButton.on("buttonOver",this.buttonOver),this.panel.sweetButton.on("buttonOut",this.buttonOut),this.app.voPlayer.play("Daisy_Congrats_All_Level"),this.pulsate()},n.buttonOver=function(){this.app.sound.play("Button_Rollover"),this.stopPulsate(),createjs.Tween.removeTweens(this.panel.sweetButton);var t=Math.PI/180*2;createjs.Tween.get(this.panel.sweetButton,{loop:!0,override:!0}).to({rotation:t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear).to({rotation:-t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear)},n.pulsate=function(){if(this.panel.sweetButton){this.origScale=this.panel.sweetButton.scale.x;var t=1.05*this.origScale;createjs.Tween.get(this.panel.sweetButton.scale,{loop:!0,override:!0}).wait(1500).to({x:t,y:t},250,createjs.Ease.sineIn).to({x:this.origScale,y:this.origScale},250,createjs.Ease.sineOut).to({x:t,y:t},250,createjs.Ease.sineIn).to({x:this.origScale,y:this.origScale},250,createjs.Ease.sineOut)}},n.stopPulsate=function(){this.panel.sweetButton&&(createjs.Tween.removeTweens(this.panel.sweetButton.scale),this.origScale&&this.panel.sweetButton.scale.set(this.origScale))},n.buttonOut=function(){createjs.Tween.removeTweens(this.panel.sweetButton),this.panel.sweetButton.rotation=0,this.pulsate()},n.onPlay=function(){this.app.sound.play("ButtonClick"),this.manager.trigger("onCongrats"),this.manager.state="select"},n.exitStart=function(){createjs.Tween.removeTweens(this.panel.sweetButton),createjs.Tween.removeTweens(this.panel.sweetButton.scale),this.panel.sweetButton.off("buttonPress",this.onPlay),this.panel.sweetButton.off("buttonOver",this.buttonOver),this.panel.sweetButton.off("buttonOut",this.buttonOut),this.panel.sweetButton.enabled=!1,this.panel.sweetButton.interactive=!1},n.exit=function(){createjs.Tween.removeTweens(this.panel.sweetButton),createjs.Tween.removeTweens(this.panel.sweetButton.scale),this.panel.sweetButton.off("buttonPress",this.onPlay),this.panel.sweetButton.off("buttonOver",this.buttonOver),this.panel.sweetButton.off("buttonOut",this.buttonOut),this.panel.sweetButton.interactive=!1,this.panel.sweetButton.enabled=!1},n.destroy=function(){createjs.Tween.removeTweens(this.panel.sweetButton),createjs.Tween.removeTweens(this.panel.sweetButton.scale),this.panel.destroy(),s.destroy.call(this)},namespace("fine_feathered_feast").CongratsState=i}(),function(){var t=include("springroll.pixi.BaseState"),e=include("fine_feathered_feast.Bird"),i=include("fine_feathered_feast.Arrow"),s=include("fine_feathered_feast.GamePanel"),n=include("fine_feathered_feast.Constants"),a=function(e){t.call(this,new s,e),this.onPlay=this.onPlay.bind(this),this.update=this.update.bind(this),this.onLoading=this.onLoading.bind(this),this.onEatFeed=this.onEatFeed.bind(this),this.onEarnAcorn=this.onEarnAcorn.bind(this),this.onTimerComplete=this.onTimerComplete.bind(this),this.onPopupClose=this.onPopupClose.bind(this),this.onMoveComplete=this.onMoveComplete.bind(this),this.onPause=this.onPause.bind(this),this.birdQueueDelay=400,this.birdQueueStartX=460,this.birdQueueY=222,this.birdQueueOffsetX=100,this.goTextStartY=484,this.goAnimBounceTime=350,this.goAnimDelay=3*this.goAnimBounceTime,this.goAnimTexts=["3","2","1","Go"],this.currentGoAnimIndex=0,this.tutorials=[[{vo:"FFF_NC_Tutorial_VO_1",highlight:"FeedBag_Seeds",index:0},{vo:"FFF_NC_Tutorial_VO_2",highlight:"Seeds_JugFeeder_1",index:0},{vo:"FFF_NC_Tutorial_VO_3",highlight:"",continue:!0},{vo:"Daisy_Level_2_While_A_Bird",highlight:"Seeds_JugFeeder_1",index:0,continue:!0},{vo:"Daisy_Level_2_You_Can_Fill_This_Feeder",highlight:"Seeds_JugFeeder_1",index:1,continue:!0},{vo:"FFF_NC_Tutorial_VO_1",highlight:"FeedBag_Seeds",index:0},{vo:"FFF_NC_Tutorial_VO_2",highlight:"Seeds_JugFeeder_1",index:1}]],this.currentTutorialIndex=0,this.on("loading",this.onLoading)},h=t.prototype,o=extend(a,t);o.onLoading=function(t){var e=this.app.levelNo+1,i=e;e>3&&e<=6&&(i=3),e>9&&(i=9),this.levelAssets=[{id:"SeasonalOverlay_All_Lvl"+e,image:"assets/images/backgrounds/SeasonalOverlay_All_Lvl"+e+".png",type:"pixi"},{id:"Branches_All3_Lvl"+e,image:"assets/images/game/Branches_All3_Lvl"+i+".png",type:"pixi"}],this.levelAssets.map(function(e){t.push(e)}.bind(this))},o.enterState=function(){this.app.music=null,this.app.music="Game_Play_Loop_1",this.initListeners(this.panel.feeders),this.initListeners(this.panel.feedBags),this.initListeners(this.panel.squirrels),this.panel.birds=[],this.panel.line=[],this.panel.prevBirdType=null,this.panel.birdsRepeatCount=0,this.setInitLine(),this.isQueueCompleted=!0,this.addEventListeners(),this.panel.gameOver=!1,this.panel.gameLayer.interactiveChildren=!1,this.panel.gameStarted=!1,this.app.animator.resume(),this.pause(),createjs.Tween.get(this).wait(1e3).call(this.start.bind(this))},o.highlightFeeders=function(t,e){this.panel.feeders.map((function(i){e&&e==i||t!=i.feedType||i.highlight(null,!0,3e3)}))},o.start=function(){this.panel.popupContainer.addChildAt(this.panel.scrim,0),this.panel.startPopup.show()},o.startGoAnim=function(){this.panel.addGoText(),this.currentGoAnimIndex=0,this.onGoAnim(),this.goAnim=new springroll.DelayedCall(this.onGoAnim.bind(this),this.goAnimDelay,{repeat:!0})},o.addEventListeners=function(){this.panel.hud.signal.on("onTimerComplete",this.onTimerComplete),this.panel.hud.signal.on("onEarnAcorn",this.onEarnAcorn),this.panel.endPopup.signal.on("onPopupClose",this.onPopupClose),this.panel.targetPopup.signal.on("onPopupClose",this.onPopupClose),this.panel.startPopup.signal.on("onPopupClose",this.onPopupClose),this.panel.nc.signal.on("onMoveComplete",this.onMoveComplete),this.panel.pauseBtn.on("buttonPress",this.onPause),this.panel.pausePopup.signal.on("onPopupClose",this.onPopupClose),this.app.on("update",this.update)},o.removeEventListeners=function(){this.panel.hud.signal.off("onTimerComplete",this.onTimerComplete),this.panel.hud.signal.off("onEarnAcorn",this.onEarnAcorn),this.panel.endPopup.signal.off("onPopupClose",this.onPopupClose),this.panel.targetPopup.signal.off("onPopupClose",this.onPopupClose),this.panel.startPopup.signal.off("onPopupClose",this.onPopupClose),this.panel.nc.signal.off("onMoveComplete",this.onMoveComplete),this.panel.pauseBtn.off("buttonPress",this.onPause),this.panel.pausePopup.signal.off("onPopupClose",this.onPopupClose),this.app.off("update",this.update)},o.togglePopups=function(t){this.panel.endPopup.interactiveChildren=t,this.panel.startPopup.interactiveChildren=t,this.panel.targetPopup.interactiveChildren=t},o.onPause=function(){this.app.paused||(this.pause(),this.togglePopups(!1),this.panel.pauseBtn.enabled=!1,this.panel.scrim.parent?this.hasPopup=!0:this.hasPopup=!1,this.panel.popupContainer.addChild(this.panel.scrim),this.goAnim&&(this.goAnim.paused=!0),this.app.voPlayer.pause(),this.app.sound.pauseAll(),this.panel.pausePopup.show())},o.pause=function(){this.panel.paused=!0,this.panel.gameLayer.interactiveChildren=!1,this.pauseAllTweens(),this.app.animator.pause()},o.onResume=function(){this.resume(),this.togglePopups(!0),this.panel.pauseBtn.enabled=!0,this.hasPopup?this.panel.popupContainer.addChildAt(this.panel.scrim,0):this.panel.popupContainer.removeChild(this.panel.scrim),this.goAnim&&(this.goAnim.paused=!1),this.app.voPlayer.resume(),this.app.sound.resumeAll()},o.resume=function(){this.panel.paused=!1,this.panel.gameLayer.interactiveChildren=!0,this.resumeAllTweens(),this.app.animator.resume()},o.reset=function(){this.panel.gameStarted=!1,this.panel.gameOver=!1,this.panel.birdsEatCount=0,this.panel.acornsAwarded=0,this.app.sound.stopAll(),this.app.voPlayer.stop()},o.setState=function(t){switch(t){case"replay":this.reset(),this.manager.refresh();break;case"levels":this.reset(),this.manager.state="select";break;case"congrats":this.reset(),this.app.manager.state="congrats";break;case"resume":this.onResume();break;case"start":this.startGoAnim();break;case"target":new springroll.DelayedCall(this.showTargetPopup.bind(this),650)}},o.showTargetPopup=function(){this.panel.targetPopup.show()},o.pauseAllTweens=function(){this.pausedTweenObjs=[];for(var t,e=createjs.Tween._tweens.slice().reverse(),i=0;i<e.length;i++)t=e[i],this.pausedTweenObjs.push(t),t.setPaused(!0)},o.resumeAllTweens=function(){for(var t=0;t<this.pausedTweenObjs.length;t++)this.pausedTweenObjs[t].setPaused(!1);this.pausedTweenObjs.length=0},o.onPopupClose=function(t){this.setState(t)},o.onGoAnim=function(){if(this.currentGoAnimIndex==this.goAnimTexts.length)return this.goAnim.stop(),this.goAnim.destroy(),createjs.Tween.removeTweens(this.panel.goText.scale),this.panel.removeGoText(),void this.startGame();var t=this.app.getCache("GoAtlas");this.panel.goText.texture=t.getFrame(this.goAnimTexts[this.currentGoAnimIndex]),this.panel.goText.y=-this.goTextStartY;var e=this.currentGoAnimIndex;createjs.Tween.get(this.panel.goText,{loop:!1,override:!0}).to({y:0},this.goAnimBounceTime,createjs.Ease.getBackOut(1.2)).call(function(){this.app.voPlayer.play("FFF_NC_Level_Start_"+this.goAnimTexts[e]),3==e&&this.app.sound.play("Dinner_Bell_1")}.bind(this)).wait(this.goAnimBounceTime+200).to({y:this.goTextStartY},this.goAnimBounceTime-200,createjs.Ease.getBackOut(1.2)),this.currentGoAnimIndex++},o.startGame=function(){this.panel.gameLayer.interactiveChildren=!0,this.panel.popupContainer.removeChild(this.panel.scrim),this.panel.hud.startTimer(this.app.config.levels[this.app.levelNo].levelTime),this.panel.gameOver=!1,this.panel.paused=!1,this.panel.gameStarted=!0,this.playingInActivityVO=!1,this.panel.isTutorialOn=!1,this.currentTutorialIndex=0,this.elapsedTime=0,this.resume(),this.app.levelNo<1&&(this.currentTutorials=this.tutorials[this.app.levelNo],this.panel.isTutorialOn=!0,this.startTutorial())},o.startTutorial=function(){createjs.Tween.get(this).wait(500).call(this.onTutorial.bind(this))},o.onTutorial=function(){var t=this.currentTutorials[this.currentTutorialIndex];if(this.app.voPlayer.play(t.vo,this.onCompleteTutorialVO.bind(this)),t.highlight){this.panel.isTutorialOn=!0;var e=this.toggleHighlight(t,!0);t.continue||(this.pointArrow(e.x+.5*e.width,e.y,40),this.panel.hud.resumeTimer())}t.continue&&(this.panel.hud.pauseTimer(),this.removeArrow())},o.removeArrow=function(){this.panel.arrow&&(this.panel.gameLayer.removeChild(this.panel.arrow),this.panel.arrow=null)},o.pointArrow=function(t,e,s,n,a){this.panel.arrow||(this.panel.arrow=new i(this.panel),this.panel.gameLayer.addChild(this.panel.arrow)),this.panel.arrow.show(t,e,s,n,a)},o.toggleHighlight=function(t,e){var i=null;return t.highlight.indexOf("Feeder")>-1?i=this.getFeederByIndex(t.index):t.highlight.indexOf("FeedBag")>-1&&(i=this.getFeedbagByIndex(t.index)),i&&(e?i.highlight("Yellow",!1):i.unhighlight()),i},o.onCompleteTutorialVO=function(){if(!(this.currentTutorialIndex>=this.currentTutorials.length)){var t=this.currentTutorials[this.currentTutorialIndex];t.continue&&(this.toggleHighlight(t,!1),this.nextTutorial())}},o.getFeederByIndex=function(t){return(t=t||0)<this.panel.feeders.length?this.panel.feeders[t]:null},o.getFeedbagByIndex=function(t){return(t=t||0)<this.panel.feedBags.length?this.panel.feedBags[t]:null},o.nextTutorial=function(){if(++this.currentTutorialIndex,this.currentTutorialIndex<this.currentTutorials.length)this.onTutorial();else{this.panel.isTutorialOn=!1,this.removeArrow();var t=this.getBirdByIndex();t&&t.startEatTimer()}},o.getBirdByIndex=function(t){return(t=t||0)<this.panel.birds.length?this.panel.birds[t]:null},o.playInActivityVO=function(){var t;this.app.voPlayer.playing||(this.playingInActivityVO=!0,this.panel.nc.isScoopEmpty?(t="FFF_NC_Inactivity_Prompt",this.panel.feedBags.map((function(t){t.highlight("Yellow",!0,4e3)}))):(t="FFF_NC_Inactivity_Prompt_with_full_scoop",this.panel.feeders.map((function(t){t.highlight("Yellow",!0,2e3)}))),this.app.voPlayer.play(t,function(){this.playingInActivityVO=!1}.bind(this)),this.app.sound.play("Blink_1"))},o.resetBirds=function(){this.panel.birds.map((function(t){t.kill()}))},o.resetSquirrels=function(){this.panel.squirrels.map((function(t){t.reset()}))},o.resetFeeders=function(){for(var t in this.panel.feeders)this.panel.feeders[t].reset()},o.onTimerComplete=function(){this.app.music=null,this.panel.gameOver=!0,this.panel.gameLayer.interactiveChildren=!1,this.panel.gameLayer.cursor="pointer",this.pause(),this.app.sound.stopAll();var t=this.app.levelNo+1;this.panel.acornsAwarded>0?(this.saveProgress(),this.showPopup("win"),this.app.trackEvent("Level "+t,"Pass"),this.panel.acornsAwarded>=3&&this.app.trackEvent("Level "+t,"Three stars")):(this.showPopup("lose"),this.app.trackEvent("Level "+t,"Fail")),this.app.sound.play("Times_up_1"),this.app.voPlayer.stop("FFF_NC_Inactivity_Prompt"),this.app.voPlayer.stop("FFF_NC_Inactivity_Prompt_with_full_scoop")},o.showPopup=function(t){createjs.Tween.get(this).wait(1e3).call(function(){this.panel.popupContainer.addChildAt(this.panel.scrim,0),this.panel.endPopup.show(t)}.bind(this))},o.saveProgress=function(){var t="level_"+this.app.levelNo,e=0;this.app.saveData[t]&&this.app.saveData[t].acorns&&(e=this.app.saveData[t].acorns),e<this.panel.acornsAwarded&&(e=this.panel.acornsAwarded),this.app.saveData[t].acorns=e,this.app.saveData[t].isCompleted=!0,this.app.save()},o.initListeners=function(t){for(var e in t){var i=t[e];i.interactive=!0,i.buttonMode=!0,i.on("mousedown",this.onClick.bind(this,i)),i.on("touchend",this.onClick.bind(this,i))}},o.pulsate=function(t){this.origY=t.y;var e=this.origY-10;createjs.Tween.get(t,{loop:!0,override:!0}).wait(1500).to({y:e},250,createjs.Ease.sineIn).to({y:this.origY},250,createjs.Ease.sineOut).to({y:e},250,createjs.Ease.sineIn).to({y:this.origY},250,createjs.Ease.sineOut)},o.stopPulsate=function(t){createjs.Tween.removeTweens(t),this.origY&&(t.y=this.origY)},o.setInitLine=function(){this.panel.line=[];for(var t=0;t<this.panel.maxBirdsQueue;t++){var e=this.getRandomBird();if(e){e.inLine=!0,e.signal.on("onEatFeed",this.onEatFeed),this.panel.line.push(e);var i=t>0?t+1:t;e.x=this.birdQueueStartX-i*this.birdQueueOffsetX,e.y=this.birdQueueY,this.updateBirdBubbles(e,t)}}},o.updateBirds=function(){for(var t=0;t<this.panel.line.length;t++){var e=this.panel.line[t],i=t>0?t+1:t;this.updateBird(e,i),this.updateBirdBubbles(e,t)}},o.updateBirdBubbles=function(t,e){this.panel.birdsBubbles[e].texture=this.app.getCache("BirdBubble_"+t.feedType),this.panel.birdsBubbles[e].x=t.bubbleXPosition,t.addChildAt(this.panel.birdsBubbles[e],0),0===e&&(this.stopPulsate(this.panel.birdsBubbles[e]),this.pulsate(this.panel.birdsBubbles[e]))},o.updateBird=function(t,e){t.switchState(t.states.walk),createjs.Tween.get(t,{loop:!1,override:!0}).to({x:this.birdQueueStartX-e*this.birdQueueOffsetX,y:this.birdQueueY},this.birdQueueDelay,createjs.Ease.linear).call(function(){t.switchState(t.states.idle),t.inLine=!0,e==this.panel.maxBirdsQueue-1&&(this.isQueueCompleted=!0),0===e&&this.app.sound.play(t.sfx+"_Long",{volume:.8})}.bind(this))},o.pickOtherFeed=function(t,e,i){var s=-1;return t.filter((function(t){return++s<i&&e!=t.name}))},o.getRandomBird=function(){var t=this.app.config.levels[this.app.levelNo].birds,i=this.app.config.data.birds,s=i[Math.round(Math.random()*(t-1))];this.panel.prevBirdType!=s.name&&(this.panel.birdsRepeatCount=0),++this.panel.birdsRepeatCount,t>1&&this.panel.birdsRepeatCount>n.MaxBirdsRepeatCount&&(this.panel.repeatFeedCount=1,s=(i=this.pickOtherFeed(i,s.name,t))[Math.round(Math.random()*(i.length-1))]);var a=this.getBirdFromPool(s.name);return a||(a=new e(this.panel,s)),this.panel.gameLayer.addChild(a),this.panel.prevBirdType=s.name,a},o.getBirdFromPool=function(t){for(var e in this.panel.birds){var i=this.panel.birds[e];if(!i.active&&i.name==t)return i.signal.has("onEatFeed",this.onEatFeed)&&i.signal.off("onEatFeed",this.onEatFeed),i.reset(),this.panel.birds.splice(e,1),i}return null},o.update=function(t){var e=t/1e3;this.panel.gameOver||!this.panel.gameStarted||this.panel.paused||(this.playingInActivityVO||this.panel.isTutorialOn||(this.elapsedTime+=e),this.elapsedTime>this.app.config.data.inActivityTime&&(this.elapsedTime=0,this.playInActivityVO()),this.hasMatchingFeed(),this.panel.nc.update(e),this.panel.squirrels.length<0||this.panel.squirrels.map(function(t){t.update(e)}.bind(this)))},o.updateQueue=function(t){this.panel.line=this.panel.line.filter((function(e){return e!=t})),this.panel.birds.push(t);var e=this.getRandomBird();e&&(e.signal.on("onEatFeed",this.onEatFeed),this.panel.line.push(e)),this.updateBirds(),this.bringToTop(t)},o.acornWonVOCompleted=function(){this.resume(),this.removeArrow()},o.onEarnAcorn=function(){1==this.panel.acornsAwarded?0===this.app.levelNo?(this.app.voPlayer.play("Daisy_You_Won_An_Acorn",this.acornWonVOCompleted.bind(this)),this.pause(),this.pointArrow(280,750,0,-40,-90)):this.app.voPlayer.play("Daisy_You_Won_An_Acorn"):2==this.panel.acornsAwarded?this.app.voPlayer.play("Daisy_You_Won_Another_Acorn"):3==this.panel.acornsAwarded&&this.app.voPlayer.play("Daisy_Wow_3_Acorns")},o.onEatFeed=function(){if(!this.panel.gameOver&&(this.panel.birdsEatCount++,this.panel.hud.update(),1==this.panel.birdsEatCount&&1==this.app.levelNo)){var t=this.app.config.levels[this.app.levelNo].stars[0].birds-1;this.app.voPlayer.play(["Daisy_Level_1_Excellent_Feed","Daisy_"+t,"Daisy_Level_1_More_Birds"])}},o.hasMatchingFeed=function(){if(this.isQueueCompleted&&!(this.panel.line.length<1)){var t=this.panel.line[0];if(t.inLine&&!t.foundFeed)for(var e=0;e<this.panel.feeders.length;e++){var i=this.panel.feeders[e];if(i.feedType==t.feedType){var s=i.getFeedSpots();if(s.length>0){var n=s[Math.round(Math.random()*(s.length-1))];n.hasBird=!0,t.foundFeed=!0,t.flyIn(n),this.updateQueue(t),this.bringToTop(t),this.isQueueCompleted=!1;break}}}}},o.bringToTop=function(t){var e=this.panel.nc.parent.getChildIndex(this.panel.nc);this.panel.gameLayer.addChildAt(t,e-1)},o.onClick=function(t){if(this.panel.isTutorialOn){var e=this.currentTutorials[this.currentTutorialIndex];if(t.name!=e.highlight||t.index!=e.index||e.continue)return}!this.panel.gameOver&&this.panel.gameStarted&&(this.elapsedTime=0,this.panel.nc.moveTo(t))},o.onMoveComplete=function(t){(this.elapsedTime=0,0!==this.app.levelNo||this.currentTutorialIndex>=this.currentTutorials.length)||t==this.currentTutorials[this.currentTutorialIndex].highlight&&this.nextTutorial()},o.onPlay=function(){this.app.sound.play("ButtonClick"),this.nextState()},o.deInitListeners=function(t){for(var e in t){var i=t[e];i.off("mousedown",this.onClick.bind(this,i)),i.off("touchend",this.onClick.bind(this,i))}},o.exitStart=function(){createjs.Tween.removeAllTweens(),this.removeEventListeners(),this.deInitListeners(this.panel.feeders),this.deInitListeners(this.panel.feedBags),this.deInitListeners(this.panel.squirrels)},o.exit=function(){createjs.Tween.removeAllTweens(),this.removeEventListeners(),this.deInitListeners(this.panel.feeders),this.deInitListeners(this.panel.feedBags),this.deInitListeners(this.panel.squirrels),this.app.unload(this.levelAssets),this.levelAssets=null},o.destroy=function(){this.panel.destroy(),h.destroy.call(this)},namespace("fine_feathered_feast").GameState=a}(),function(){var t=include("springroll.pixi.BaseState"),e=include("fine_feathered_feast.IntroPanel"),i=function(i){t.call(this,new e,i),this.onPlay=this.onPlay.bind(this),this.buttonOver=this.buttonOver.bind(this),this.buttonOut=this.buttonOut.bind(this),this.playDaisyVO=this.playDaisyVO.bind(this)},s=t.prototype,n=extend(i,t);n.enterState=function(){this.app.music="Level_Selection_Loop_2",this.app.animator.play(this.panel.bluejay,"idle"),this.app.animator.play(this.panel.femaleCardinal,"idle"),this.app.animator.play(this.panel.warbler,"idle"),this.daisyDelay=new springroll.DelayedCall(this.startIntroAnim.bind(this),1e3),this.chickadeeDelay=new springroll.DelayedCall(function(){this.app.animator.play(this.panel.chickadee,{anim:"fly"},this.onComplete.bind(this,this.panel.chickadee))}.bind(this),2500),this.maleCardinalDelay=new springroll.DelayedCall(function(){this.app.animator.play(this.panel.maleCardinal,{anim:"fly"},this.onComplete.bind(this,this.panel.maleCardinal))}.bind(this),11e3),this.panel.startButton.on("buttonPress",this.onPlay),this.panel.startButton.on("buttonOver",this.buttonOver),this.panel.startButton.on("buttonOut",this.buttonOut)},n.startIntroAnim=function(){this.app.animator.play(this.panel.daisy,{anim:"idle",audio:{alias:"Daisy_Intro_Animation",start:9900}},this.onAnimComplete.bind(this)),this.app.animator.play(this.panel.nc,{anim:"go",audio:{alias:"FFF_NC_Introductory_Animation",start:300}})},n.buttonOver=function(){this.app.sound.play("Button_Rollover"),createjs.Tween.removeTweens(this.panel.startButton);var t=Math.PI/180*2;createjs.Tween.get(this.panel.startButton,{loop:!0,override:!0}).to({rotation:t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear).to({rotation:-t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear)},n.buttonOut=function(){createjs.Tween.removeTweens(this.panel.startButton),this.panel.startButton.rotation=0},n.onComplete=function(t){t.visible=!1},n.playDaisyVO=function(){this.app.voPlayer.play("Daisy_Intro_Animation")},n.onAnimComplete=function(){this.nextState()},n.onPlay=function(){this.app.sound.play("Button_Tap"),this.app.voPlayer.stop(),this.app.animator.stopAll(),this.nextState()},n.exitStart=function(){this.maleCardinalDelay&&this.maleCardinalDelay.destroy(),this.chickadeeDelay&&this.chickadeeDelay.destroy(),this.daisyDelay&&this.daisyDelay.destroy(),this.app.animator.stopAll(),this.app.voPlayer.stop(),this.panel.startButton.off("buttonPress",this.onPlay),this.panel.startButton.off("buttonOver",this.buttonOver),this.panel.startButton.off("buttonOut",this.buttonOut)},n.exit=function(){this.maleCardinalDelay&&this.maleCardinalDelay.destroy(),this.chickadeeDelay&&this.chickadeeDelay.destroy(),this.daisyDelay&&this.daisyDelay.destroy(),this.app.animator.stopAll(),this.app.voPlayer.stop(),this.panel.startButton.off("buttonPress",this.onPlay),this.panel.startButton.off("buttonOver",this.buttonOver),this.panel.startButton.off("buttonOut",this.buttonOut)},n.destroy=function(){this.maleCardinalDelay&&this.maleCardinalDelay.destroy(),this.chickadeeDelay&&this.chickadeeDelay.destroy(),this.daisyDelay&&this.daisyDelay.destroy(),this.panel.destroy(),s.destroy.call(this)},namespace("fine_feathered_feast").IntroState=i}(),function(){var t=include("springroll.pixi.BaseState"),e=include("fine_feathered_feast.SelectPanel"),i=include("fine_feathered_feast.Constants"),s=function(i){t.call(this,new e,i),this.onPlay=this.onPlay.bind(this)},n=t.prototype,a=extend(s,t);a.enterState=function(){this.app.music="Intro_Animation_Loop",this.app.sound.isPlaying("Ambient_Bird_Loop_1")||this.app.sound.play("Ambient_Bird_Loop_1",{loop:-1}),this.isLevel1=!0;for(var t=0;t<this.panel.trees.length;t++){var e=this.panel.trees[t];e&&e.signal.on("onClick",this.onPlay)}var i=this.panel.trees[0],s=this.app.config.data.ncPositions[0];this.panel.nc.x=s.x,this.panel.nc.y=s.y,this.panel.nc.atTree=i,this.app.animator.play(this.panel.nc,"idle"),this.update(),this.handleInactivity(),new springroll.DelayedCall(function(){this.isLevel1&&this.app.voPlayer.play("FFF_NC_Level_Select_Intro"),"congrats"==this.app.manager.previousState&&(this.app.voPlayer.play("Daisy_Keep_Feeding",this.unHighlightTrees.bind(this)),this.highlightTrees(),this.app.manager.previousState=null)}.bind(this),500)},a.unHighlightTrees=function(){this.panel.trees.map((function(t){t.highlighted=!1}))},a.highlightTrees=function(){this.panel.trees.map((function(t){t.highlighted=!0}))},a.update=function(){this.panel.trees&&this.panel.trees.map(function(t){if(t.isCompleted()&&!t.isShown()){var e=t.update();new springroll.DelayedCall(this.updateNC.bind(this),e)}else if(t.isCompleted()&&t.isShown()){if(t.updateNeeded()&&t.update(),t.levelNo>=10)return;var i=this.app.config.data.ncPositions[t.levelNo];this.panel.nc.x=i.x,this.panel.nc.y=i.y,this.panel.nc.atTree=this.panel.trees[t.levelNo],this.handleChange(),this.isLevel1=!1}}.bind(this))},a.addFootPrints=function(t,e,i){var s=new PIXI.Sprite(this.panel.atlas.getFrame("Footprint"));s.anchor.set(.5),s.x=t,s.y=e,s.visible=!1,s.rotation=i*(Math.PI/180),this.panel.containerLayer.addChildAt(s,0),this.panel.foots.push(s)},a.updateNC=function(){var t=this.panel.nc.atTree;if(!(t.levelNo>=10)&&this.panel.trees){for(var e=this.panel.trees[t.levelNo],i=this.app.config.data["footprints_"+t.levelNo+"_"+e.levelNo],s=0;s<i.length;s++){var n=i[s];this.addFootPrints(n.x,n.y,n.r)}this.panel.foots;this.app.animator.play(this.panel.nc,"run"),this.currentStep=0;var a=this.panel.foots[this.currentStep];this.moveTo(a)}},a.moveTo=function(t){t.x<this.panel.nc.x?this.panel.nc.scale.set(-this.panel.ncScale,this.panel.ncScale):this.panel.nc.scale.set(this.panel.ncScale);var e=t.x-this.panel.nc.x,i=t.y-this.panel.nc.y,s=Math.sqrt(e*e+i*i)/.2;this.ncWalkTween=createjs.Tween.get(this.panel.nc,{loop:!1,override:!0}).to({x:t.x,y:t.y},s,createjs.Ease.linear).call(this.stepComplete.bind(this,t)),this.ncWalkTween.addEventListener("change",this.handleChange.bind(this))},a.handleChange=function(){var t=[],e={};this.panel.trees.map((function(i){e={i:i.levelNo-1,y:i.y},t.push(e)})),e={i:-1,y:this.panel.nc.y},t.push(e),t.sort((function(t,e){return t.y<e.y?-1:t.y>e.y?1:0})),t.forEach((function(t){-1==t.i?this.panel.containerLayer.addChild(this.panel.nc):this.panel.containerLayer.addChild(this.panel.trees[t.i])}),this),t=null},a.stepComplete=function(t){if(this.fadeIn(t),++this.currentStep,this.currentStep>this.panel.foots.length){var e=this.panel.trees[this.panel.nc.atTree.levelNo];return e.unlock(),e.highlighted=!0,this.app.sound.play("sfx_fanfare_2"),this.panel.nc.scale.set(this.panel.ncScale),void this.app.animator.play(this.panel.nc,"idle")}var i=null;i=this.currentStep==this.panel.foots.length?this.app.config.data.ncPositions[this.panel.nc.atTree.levelNo]:this.panel.foots[this.currentStep],this.moveTo(i)},a.fadeIn=function(t){t.visible=!0,t.alpha=0,createjs.Tween.get(t,{loop:!1,override:!0}).to({alpha:1},50,createjs.Ease.linear)},a.moveComplete=function(){this.panel.nc.atTree.unlock(),this.panel.nc.scale.set(this.panel.ncScale),this.app.animator.play(this.panel.nc,"idle")},a.handleInactivity=function(){this.inActivityInterval=new springroll.DelayedCall(function(){this.app.voPlayer.playing||(this.app.voPlayer.play("FFF_NC_Level_Select_Inactivity",this.handleInactivity.bind(this)),this.app.sound.play("Blink_1"))}.bind(this),this.app.config.data.inActivityTime*i.SecondsToMilliSeconds)},a.onPlay=function(t){this.inActivityInterval&&(this.inActivityInterval.stop(),this.inActivityInterval.destroy()),this.app.voPlayer.stop("FFF_NC_Level_Select_Intro"),this.app.voPlayer.stop("FFF_NC_Level_Select_Inactivity"),this.app.levelNo=t,this.nextState()},a.exitStart=function(){createjs.Tween.removeAllTweens();for(var t=0;t<this.panel.trees.length;t++){var e=this.panel.trees[t];e&&e.signal.off("onClick",this.onPlay)}},a.exit=function(){createjs.Tween.removeAllTweens();for(var t=0;t<this.panel.trees.length;t++){var e=this.panel.trees[t];e&&e.signal.off("onClick",this.onPlay)}},a.destroy=function(){createjs.Tween.removeAllTweens(),this.panel.destroy(),n.destroy.call(this)},namespace("fine_feathered_feast").SelectState=s}(),function(){var t=include("springroll.pixi.BaseState"),e=include("fine_feathered_feast.TitlePanel"),i=function(i){t.call(this,new e,i),this.onPlay=this.onPlay.bind(this),this.buttonOver=this.buttonOver.bind(this),this.buttonOut=this.buttonOut.bind(this),this.onResize=this.onResize.bind(this),this.origScale=null},s=t.prototype,n=extend(i,t);n.enterDone=function(){this.app.music="Splash_Loop",this.panel.startButton.on("buttonPress",this.onPlay),this.panel.startButton.on("buttonOver",this.buttonOver),this.panel.startButton.on("buttonOut",this.buttonOut),this.app.on("resize",this.onResize),this.pulsate()},n.onResize=function(){this.stopPulsate(),this.panel.startButton.scale.set(this.app.scaling.scale),this.pulsate()},n.buttonOver=function(){this.app.sound.play("Button_Rollover"),this.stopPulsate(),createjs.Tween.removeTweens(this.panel.startButton);var t=Math.PI/180*2;createjs.Tween.get(this.panel.startButton,{loop:!0,override:!0}).to({rotation:t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear).to({rotation:-t},50,createjs.Ease.linear).to({rotation:0},50,createjs.Ease.linear)},n.pulsate=function(){if(this.panel.startButton){this.origScale=this.panel.startButton.scale.x;var t=1.05*this.origScale;createjs.Tween.get(this.panel.startButton.scale,{loop:!0,override:!0}).wait(1500).to({x:t,y:t},250,createjs.Ease.sineIn).to({x:this.origScale,y:this.origScale},250,createjs.Ease.sineOut).to({x:t,y:t},250,createjs.Ease.sineIn).to({x:this.origScale,y:this.origScale},250,createjs.Ease.sineOut)}},n.stopPulsate=function(){this.panel.startButton&&(createjs.Tween.removeTweens(this.panel.startButton.scale),this.origScale&&this.panel.startButton.scale.set(this.origScale))},n.buttonOut=function(){createjs.Tween.removeTweens(this.panel.startButton),this.panel.startButton.rotation=0,this.pulsate()},n.onPlay=function(){this.app.sound.play("Button_Tap"),this.manager.state="intro"},n.exitStart=function(){createjs.Tween.removeTweens(this.panel.startButton),createjs.Tween.removeTweens(this.panel.startButton.scale),this.panel.startButton.off("buttonPress",this.onPlay),this.panel.startButton.off("buttonOver",this.buttonOver),this.panel.startButton.off("buttonOut",this.buttonOut),this.app.off("resize",this.onResize),this.panel.startButton.enabled=!1,this.panel.startButton.interactive=!1},n.exit=function(){createjs.Tween.removeTweens(this.panel.startButton),createjs.Tween.removeTweens(this.panel.startButton.scale),this.panel.startButton.off("buttonPress",this.onPlay),this.panel.startButton.off("buttonOver",this.buttonOver),this.panel.startButton.off("buttonOut",this.buttonOut),this.app.off("resize",this.onResize),this.panel.startButton.interactive=!1,this.panel.startButton.enabled=!1},n.destroy=function(){createjs.Tween.removeTweens(this.panel.startButton),createjs.Tween.removeTweens(this.panel.startButton.scale),this.panel.destroy(),s.destroy.call(this),this.stopPulsate()},namespace("fine_feathered_feast").TitleState=i}(),function(){var t=include("fine_feathered_feast.TitleState"),e=include("fine_feathered_feast.SelectState"),i=include("fine_feathered_feast.IntroState"),s=include("fine_feathered_feast.GameState"),n=include("fine_feathered_feast.CongratsState"),a=new(include("springroll.Application"))({fps:60,name:"Fine Feathered Feast",state:"title",canvasId:"stage",configPath:"assets/config/config.json",manifestsPath:"assets/config/manifests.json",captionsPath:"assets/config/captions.json",display:include("springroll.PixiDisplay"),displayOptions:{clearView:!0,transparent:!0,antiAlias:!0},enableHiDPI:!0,preload:[{id:"saveData",cache:!1,async:function(t){a.userData.read("Levels_Progress",function(e){a.saveData=e,t()}.bind(this))}},{id:"LoadingBackground",image:"assets/images/backgrounds/Loading_Background.jpg",type:"pixi"},{id:"LoadingAtlas",image:"assets/images/LoadingAtlas.png",atlas:"assets/images/LoadingAtlas.json",type:"pixi"}]});a.save=function(){this.userData.write("Levels_Progress",this.saveData)},a.trackEvent=function(t,e){ga("send",{hitType:"event",eventCategory:"FFF",eventAction:t,eventLabel:e})},a.on("init",(function(){this.saveData||(this.saveData={});var a=this.config.assets,h=this.config.scaling;this.manifests;this.states={title:new t({next:"intro",preload:a.title,scaling:h.title}),select:new e({next:"game",preload:a.select,scaling:h.select}),intro:new i({next:"select",preload:a.intro,scaling:h.intro}),game:new s({next:"select",preload:a.game,scaling:h.game}),congrats:new n({preload:a.congrats,scaling:h.congrats})},this.background=new PIXI.Sprite(this.getCache("LoadingBackground")),this.loadingAtlas=this.getCache("LoadingAtlas"),this.feeder=new PIXI.Sprite(this.loadingAtlas.getFrame("Loading_feeder0")),this.feeder.anchor.set(.5,0),this.scoopHand=new PIXI.Sprite(this.loadingAtlas.getFrame("LoadingArmWseed_1")),this.scoopHand.x=512,this.scoopHand.y=this.display.renderer.height,this.maxScoops=4,this.manager.on("onLoadingStart",this.onLoadingStart.bind(this)),this.manager.on("onCongrats",this.onCongrats.bind(this)),this.sound.setContextVolume("music",this.config.data.musicVolume),this.sound.setContextVolume("sfx",this.config.data.sfxVolume),this.sound.setContextVolume("vo",this.config.data.voVolume),this.sound.addContext(this.config.sounds.birds),this.sound.setContextVolume("birds",this.config.data.birdCallsVolume)})),a.on("resize",(function(t,e){this.scoopStartY=e,this.scoopMoveY=.4*e})),a.onCongrats=function(){this.manager.previousState="congrats"},a.onLoadingStart=function(){this.resetScoop(),this.showLoading(),this.animateScoopHand(1)},a.resetScoop=function(){this.feeder&&(this.feeder.texture=this.loadingAtlas.getFrame("Loading_feeder0")),this.scoopHand&&(createjs.Tween.removeTweens(this.scoopHand),this.scoopHand.texture=this.loadingAtlas.getFrame("LoadingArmWseed_1"),this.scoopHand.y=this.scoopStartY)},a.animateScoopHand=function(t){this.scoopHand&&(this.scoopHand.texture=this.loadingAtlas.getFrame("LoadingArmWseed_1")),createjs.Tween.removeTweens(this.scoopHand),this.scoopHand.y=this.scoopStartY,createjs.Tween.get(this.scoopHand,{loop:!1,override:!0}).wait(1e3).to({y:this.scoopMoveY},500,createjs.Ease.sineOut).call(this.fillFeeder.bind(this,t)).to({y:this.scoopStartY},300,createjs.Ease.sineIn).call(this.fillComplete.bind(this,t))},a.fillComplete=function(t){if(!this.manager.isLoading&&this.manager.currentState.enabled)return createjs.Tween.removeTweens(this.scoopHand),this.hideLoading(),void this.manager.currentState.enterState();t>=this.maxScoops&&(t=0,this.feeder.texture=this.loadingAtlas.getFrame("Loading_feeder0")),this.animateScoopHand(t+1)},a.fillFeeder=function(t){this.sound.play("Scoop_1"),this.feeder&&(this.feeder.texture=this.loadingAtlas.getFrame("Loading_feeder"+t)),this.scoopHand&&(this.scoopHand.texture=this.loadingAtlas.getFrame("LoadingArmWseed_3"))},a.showLoading=function(){this.background&&this.display.stage.addChild(this.background),this.feeder&&this.display.stage.addChild(this.feeder),this.scoopHand&&this.display.stage.addChild(this.scoopHand)},a.hideLoading=function(){this.background&&this.background.parent&&this.display.stage.removeChild(this.background),this.feeder&&this.feeder.parent&&this.display.stage.removeChild(this.feeder),this.scoopHand&&this.scoopHand.parent&&this.display.stage.removeChild(this.scoopHand)},window.app=a}();