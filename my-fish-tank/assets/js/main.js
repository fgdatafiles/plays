!function(){function a(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))}var b=50,c=30,d=13,e=function(a){this._pupil=a,this._rest=new createjs.Point(this._pupil.x,this._pupil.y),this._parent=this._pupil.parent,this.trackMouseFrame(),springroll.Application.instance.on("update",this.trackMouseFrame.bind(this))},f=e.prototype={};f.destroy=function(){this._parent=null,this._pupil.x=this._rest.x,this._pupil.y=this._rest.y,this._pupil=null,this._rest=null},f.trackMouseFrame=function(){var e=Math.sqrt(Math.pow(app.display.stage.mouseX-this._rest.x,2)+Math.pow(app.display.stage.mouseY-this._rest.y,2)),f=this.interpolate(new createjs.Point(app.display.stage.mouseX,app.display.stage.mouseY),this._rest,Math.min(e,b)/b/c);this._pupil.x=a(app.display.stage.mouseX,0,app.display.width,this._rest.x-d,this._rest.x+d),this._pupil.y=Math.max(Math.min(f.y,this._rest.y+d),this._rest.y-d)},f.interpolate=function(a,b,c){var d=c*a.x+(1-c)*b.x,e=c*a.y+(1-c)*b.y;return new createjs.Point(d,e)},namespace("myFishTank").Eye=e}(),function(){var a=include("createjs.Bitmap"),b=function(b,c,d){this.x=b,this.y=c,this.id=Math.floor(4*Math.random()),this.pallet=new a(d[this.id]),this.pallet.x=b,this.pallet.y=c,this._target=null};b.prototype={};namespace("myFishTank").FoodParticle=b}(),function(){var a=include("myFishTank.FoodParticle");Bitmap=include("createjs.Bitmap");var b=440,c=1.5,d=300,e=605,f=function(a,c){this._graphics=a,this._food=[],this._floorFood=[],this._bmpData=c,this.FEED_DEPTH=b},g=f.prototype={};g.update=function(){this._graphics.clear();for(var a=null,d=this._food.length-1;d>=0;d--)a=this._food[d],a.y<b?(a.y+=c,a.pallet.y=a.y):(this._food.splice(d,1),this._floorFood.push(a));for(g=0;g<this._floorFood.length;g++)this._floorFood[g].y<e&&(this._floorFood[g].y+=c),this._floorFood[g].pallet.x=this._floorFood[g].x,this._floorFood[g].pallet.y=this._floorFood[g].y},g.add=function(b){this.foodParticle=new a(Math.min(Math.max(d,b),app.TANK_WIDTH-d+70),25,this._bmpData),springroll.Sound.instance.play("food_shake"),this._food.push(this.foodParticle),app.panel.addChild(this.foodParticle.pallet)},g.eat=function(){var a=this._food.shift();a.y=b,this.fishnoms(),app.panel.removeChild(a.pallet)},g.eatBottom=function(){var a=this._floorFood.shift();return a.y=b,app.panel.removeChild(a.pallet),0===this._floorFood.length},g.food=function(){return this._food.length>0?this._food[0]:null},g.bottomFood=function(){return this._floorFood.length>0?this._floorFood[0]:null},g.fishnoms=function(){switch(Math.floor(3*Math.random())){case 0:springroll.Sound.instance.play("fish_noms_01");break;case 1:springroll.Sound.instance.play("fish_noms_02");break;case 2:springroll.Sound.instance.play("fish_noms_03")}},namespace("myFishTank").FishFood=f}(),function(){var a=include("myFishTank.FishFood"),b=100,c=8,d=250,e=function(a,c,d,e,f,g,h){this._firstClick=[],this._speed=e,this._mouthOffset=f,this._hungry=b,this._right=!1,this._target=null,this._frames=0,d.children.length>1?this._asset=d.getChildAt(0):this._asset=d,this._holder=new createjs.Container,this._holder.addChild(d),this._position=new createjs.Point(a,c),this._holder.x=this._position.x,this._holder.y=this._position.y,this._asset.x=0,this._asset.y=0,"Crab"!==this._asset.name&&(this._asset.gotoAndStop("neutral_left"),this.playInstanceAnimation(this._asset.instance,{anim:"swim",loop:!0})),this._holder.addEventListener("mousedown",this.click.bind(this)),this._enabled=!0,this._wayPointsX=[];for(var i=0;50>i;i++)i%2===0?this._wayPointsX.push(Math.abs(i%2*app.TANK_WIDTH-(150*Math.random()+g/2))):this._wayPointsX.push(Math.abs(i%2*app.TANK_WIDTH-(150*Math.random()+h/2)));this._wayPoint=0,this._framesLoaded=!1,this._salt=Math.random(),this._isRollover=!1},f=e.prototype={};f.playInstanceAnimation=function(a,b,c,d){b.anim&&!a.doesHaveLabel(b.anim)&&(a.timeline.addLabel(b.anim,0),a.timeline.addLabel(b.anim+(b.loop===!0?"_loop":"_stop"),a.timeline.duration-1)),app.animator.play(a,b,c||null,d||null)},f.revertDelay=function(){this.revert()},f.click=function(){app.states.game._schoolFish._following?app.states.game._schoolFish.revert():(this._isRollover=!1,this.action(),this._holder.parent.addChild(this._holder),this._hungry++)},f.actionDelay=function(){this.action(),this._hungry++},f.action=function(){},f.revert=function(){},f.Update=function(e){var f=this._speed;this.currentLabel=null;if(this.currentLabel=this._asset.currentLabel,null!==this._target&&this._target.y>=(new a).FEED_DEPTH&&(this._target=null),this._right?(this._mouthOffsetX=this._mouthOffsetXRight,this._mouthOffsetY=this._mouthOffsetYRight):(this._mouthOffsetX=this._mouthOffsetXLeft,this._mouthOffsetY=this._mouthOffsetYLeft),this.isHungry()&&null!==e.food()&&Math.abs(e.food().x-this._position.x)>this._mouthOffsetX&&(null===e.food()._target||e.food()._target===this)?(this._right?this._target=new createjs.Point(e.food().x-this._mouthOffsetX,e.food().y+this._mouthOffsetY):this._target=new createjs.Point(e.food().x+this._mouthOffsetX,e.food().y+this._mouthOffsetY),e.food()._target=this,this._holder.parent.addChild(this._holder),f=c,this._right=this._source.x<this._target.x,this._chasing||(this._chasing=!0,this._source=new createjs.Point(this._position.x,this._position.y),this._frames=0)):this._chasing&&(this._chasing=!1,this._target=null),(null===this._target||this.distance(this._target,this._position)<2)&&(this._target=new createjs.Point(this._wayPointsX[this._wayPoint],Math.random()*(app.TANK_HEIGHT-d/2)+d/4),this._wayPoint=(this._wayPoint+1)%this._wayPointsX.length,this._source=new createjs.Point(this._position.x,this._position.y),this._right=this._source.x<this._target.x,this._frames=0,this.isHungry()&&null!==e.food()&&e.food()._target===this&&(e.eat(),this._hungry=b)),("neutral_left"===this.currentLabel||"neutral_right"===this.currentLabel)&&(this._position=this.interpolate(this._target,this._source,Math.min(1,this._frames*f/this.distance(this._target,this._source))),this._right&&"neutral_left"==this.currentLabel?(this._framesLoaded=!1,this._asset.gotoAndStop("neutral_left_to_right"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this._framesLoaded=!0}.bind(this))):this._right||"neutral_right"!=this.currentLabel||(this._framesLoaded=!1,this._asset.gotoAndStop("neutral_right_to_left"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this._framesLoaded=!0}.bind(this))),this._frames++,this._hungry>0&&this._hungry--),("neutral_left_to_right"===this.currentLabel||"neutral_right_to_left"===this.currentLabel)&&this._framesLoaded)switch(this.currentLabel){case"neutral_left_to_right":this._asset.gotoAndStop("neutral_right"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"});break;case"neutral_right_to_left":this._asset.gotoAndStop("neutral_left"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"})}this._holder.x=this._position.x,this._holder.y=this._position.y},f.isHungry=function(){return 0===this._hungry},f.interpolate=function(a,b,c){var d=c*a.x+(1-c)*b.x,e=c*a.y+(1-c)*b.y;return new createjs.Point(d,e)},f.interpolate1=function(a,b,c){var d=a.x+(b.x-a.x)*c,e=b.y+(b.y-a.y)*c;return x=d,y=e,new createjs.Point(x,y)},f.distance=function(a,b){var c=0,d=0;return null!==b&&(c=b.x-a.x,c*=c,d=b.y-a.y,d*=d),Math.sqrt(c+d)},f.playDialogOnce=function(a,b){if(null!==this._firstClick[a]&&this._firstClick[a])switch(b){case"playGiggle":app._daniel.playGiggle();break;case"playOoh":app._daniel.playOoh();break;case"playHide1":app._daniel.playHide1();break;case"playHide2":app._daniel.playHide2()}else this._firstClick[a]=app._daniel.playDialog(a)},f.reset=function(){this.revert()},f.setPosition=function(a,b){this._target=null,this._right=this._position.x<a,this._position.x=a,this._position.y=b,this._holder.x=this._position.x,this._holder.y=this._position.y},f.randomNum=function(a,b){var c=Math.floor(Math.random()*(b-a+1))+a;return c},namespace("myFishTank").SimpleFish=e}(),function(){var a=include("createjs.Bitmap"),b=2,c=2,d=3,e=200,f=function(f,g){this._path=[],this._bubble=new a(images.bubble),this._bubble.mouseEnabled=!1,this._bubble.mask=app.tankShape,this._bubble.x=f,this._bubble.y=g,this.amp=2*c+Math.random()*c,this.per=1/(d+10*Math.random()),this.scale=1.5/(Math.random()+1),this.speed=b+Math.random(),this.life=e,this._bubble.scaleX=this.scale,this._bubble.scaleY=this.scale,this.x=f,this.y=g,this._path=[];for(var h=0;h<this.life;h++)this._path.push(new createjs.Point(this.amp*Math.sin(h*this.per)+this.x,this.y-h*this.speed));this._path.reverse()},g=f.prototype={};g.update=function(){if(this._path.length>0){var a=this._path.pop();return this._bubble.x=a.x,this._bubble.y=a.y,!0}return!1},namespace("myFishTank").Bubble=f}(),function(){var a=include("createjs.Event"),b=function(a,b){this.BUBBLE_SPAWN="bubbleSpawn",this.x=a,this.y=b};p=extend(b,a),namespace("myFishTank").BubbleEvent=b}(),function(){var a=include("myFishTank.Bubble"),b=function(){this._popped=[],this._pushed=[]},c=b.prototype={};c.update=function(){for(var a=0;a<this._pushed.length;a++){var b=this._pushed[a];b.update()||this._popped.push(b)}for(;this._popped.length>0;){var c=this._popped.pop();app.panel.removeChild(c._bubble)}},c.spawnBubble=function(b,c){var d=new a(b,c),e=app.panel.getChildIndex(app.states.game.house_clip);this._pushed.push(d),app.panel.addChildAt(d._bubble,e+1)},namespace("myFishTank").BubbleMachine=b}(),function(){function a(a,b){a.scaleX=b||app.UPRES_SCALE,a.scaleY=b||app.UPRES_SCALE}var b=include("myFishTank.BubbleEvent"),c=20,d=function(b,c,d){this._cave=b,this._fishOut=null,this._fishIn=null,this._fishInIndex=6,this._fishOutIndex=5,this.shape=new createjs.Shape,this.shape.graphics.beginFill("#ff0000").drawRect(0,0,600,400),this.shape.x=600,this.shape.y=200,this._tempFishCanvas=new createjs.Container,this._tempFishCanvas.mask=this.shape,this._caveBack=this._cave.getChildAt(0),this._caveFront=this._cave.getChildAt(2),this._clickTarget=this._cave.getChildAt(1),app.panel.addChild(this._caveBack),app.panel.addChild(this._tempFishCanvas),app.panel.addChild(this._caveFront),app.panel.addChild(this._clickTarget),this._previousLabel="Idle",this._caveBack.gotoAndStop(this._previousLabel),this._caveFront.gotoAndStop(this._previousLabel),this._caveBack.x+=c,this._caveBack.y+=d,this._caveFront.x+=c,this._caveFront.y+=d,this._clickTarget.x+=c,this._clickTarget.y+=d,a(this._caveBack),a(this._caveFront),a(this._clickTarget),this._centerPoint=new createjs.Point(800,app.TANK_HEIGHT/2),this._endPoint=new createjs.Point(app.TANK_WIDTH,(app.TANK_HEIGHT+60)/2),this._clickTarget.alpha=.1,this._clickTarget.addEventListener("mousedown",this.click.bind(this)),this._clickTarget.addEventListener("mouseover",this.over.bind(this)),this._clickTarget.addEventListener("mouseout",this.out.bind(this)),app.hasTouch&&(this.timer=0)},e=d.prototype={};e.out=function(){this._previousLabel="RollOut",app.animator.play(this._caveBack,{anim:this._previousLabel}),app.animator.play(this._caveFront,{anim:this._previousLabel})},e.over=function(){app.hasTouch&&app.setTimeout(this.out.bind(this),3e3),this._previousLabel="RollOver",this._caveBack.gotoAndStop(this.RollOver),this._caveFront.gotoAndStop(this.RollOver),app.animator.play(this._caveBack,{anim:"RollOver"},function(){app.animator.play(this._caveBack,{anim:"Hold"})}.bind(this)),app.animator.play(this._caveFront,{anim:"RollOver"},function(){app.animator.play(this._caveFront,{anim:"Hold"})}.bind(this))},e.click=function(){app.states.game._schoolFish._following?app.states.game._schoolFish.revert():(this._cave.dispatchEvent("CHANGE"),app.hasTouch&&(this.timer=0))},e.swapFish=function(a,b){null===this._fishOut&&null===this._fishIn&&(springroll.Sound.instance.play("bubbles4"),a.reset(),b.right=b._holder.x<this._centerPoint.x,b.reset(),this._caveFront.gotoAndStop(this.RollOver),this._caveBack.gotoAndStop(this.RollOver),app.animator.play(this._caveBack,{anim:"RollOver"},function(){app.animator.play(this._caveBack,{anim:"Hold"})}.bind(this)),app.animator.play(this._caveFront,{anim:"RollOver"},function(){app.animator.play(this._caveFront,{anim:"Hold"})}.bind(this)),this._frames=0,this._fishIn=a,this._fishOut=b,this._startPoint=new createjs.Point(b._holder.x,b._holder.y))},e.update=function(){app.hasTouch&&(this.timer++,500===this.timer&&(this.timer=0,this.over()));var a=null;null!==this._fishOut&&(this.bubbling=!1,this._frames<c?a=this.interpolate(this._centerPoint,this._startPoint,this._frames/c):this._frames<2*c?(this.bubbling=!0,a=this.interpolate(this._endPoint,this._centerPoint,(this._frames-c)/c)):a=this._endPoint,this._fishOut.framesLoaded&&this._fishOut._asset.gotoAndStop("neutral_right"),a.x>250&&this._fishOut._asset.gotoAndStop("neutral_right"),"neutral_right"==this._fishOut._asset.currentLabel&&this._fishOut._holder.x-3>a.x&&this._fishOut._asset.gotoAndStop("neutral_left"),this._fishOut.setPosition(a.x,a.y),this._frames===c&&this._tempFishCanvas.addChild(this._fishOut._holder),this._frames===2*c&&(this._fishIn._asset.gotoAndStop("neutral_left"),this._fishIn.setPosition(this._endPoint.x,this._endPoint.y),this._tempFishCanvas.addChild(this._fishIn._holder)),this.bubbling===!1&&this._cave.dispatchEvent(new b(this._clickTarget.x+this._clickTarget.nominalBounds.width/2+(60*Math.random()-65),this._clickTarget.y+this._clickTarget.nominalBounds.height/2+(100*Math.random()-115)))),null!==this._fishIn&&(this._fishIn.isSwapping=!0,a=this.interpolate(this._centerPoint,this._endPoint,(this._frames-2*c)/c),this._fishIn.setPosition(a.x,a.y),a.x<this._clickTarget.x&&this._fishIn._holder.dispatchEvent(new b(a.x,a.y)),this._frames===3*c&&(this._tempFishCanvas.removeChild(this._fishOut._holder),this._fishOut=null,this._fishIn.isSwapping=!1,this._fishIn=null,this._previousLabel="RollOut",app.animator.play(this._caveBack,{anim:this._previousLabel}),app.animator.play(this._caveFront,{anim:this._previousLabel}),this._clickTarget.addEventListener("mousedown",this.click.bind(this)),this._clickTarget.addEventListener("mouseover",this.over.bind(this)),this._clickTarget.addEventListener("mouseout",this.out.bind(this)),this._cave.dispatchEvent("COMPLETE"))),this._frames++},e.interpolate=function(a,b,c){var d=c*a.x+(1-c)*b.x,e=c*a.y+(1-c)*b.y;return new createjs.Point(d,e)},namespace("myFishTank").Cave=d}(),function(){var a=include("springroll.Sound"),b=include("myFishTank.Eye"),c="neutral",d="ooh1",e="ooh2",f="ooh3",g="giggle1",h="giggle2",i="giggle3",j="hide1",k="hide2",l=18e3,m=function(a){this.DIALOG_IDLE="neutral",this.DIALOG_QUOTE="quote",this.DIALOG_AMBIENT1="ambient1",this.DIALOG_AMBIENT3="ambient3",this.DIALOG_OOH1="ooh1",this.DIALOG_OOH2="ooh2",this.DIALOG_OOH3="ooh3",this.DIALOG_GIGGLE1="giggle1",this.DIALOG_GIGGLE2="giggle2",this.DIALOG_GIGGLE3="giggle3",this.DIALOG_PLEASED1="pleased1",this.DIALOG_PLEASED2="pleased2",this.DIALOG_WONDERING="wondering",this.DIALOG_ENERGY="energy",this.DIALOG_EXCITED="excited",this.DIALOG_SCARED="scared",this.DIALOG_SEEK2="seek2",this.DIALOG_DISCOVER1="discover1",this.DIALOG_DISCOVER2="discover2",this.DIALOG_DISCOVER4="discover4",this.DIALOG_FAST="fast",this.DIALOG_FRIENDS="friends",this.DIALOG_COLOR1="color1",this.DIALOG_COLOR2="color2",this.DIALOG_COLOR3="color3",this.DIALOG_TRIGGER_UP="trigger2",this.DIALOG_HIDE1="hide1",this.DIALOG_HIDE2="hide2",this.DIALOG_TRIGGER="trigger",this.Daniel=a,this._head=a.daniel_look.Daniel_Head,this._headPlayback=c,this._head.gotoAndStop(this._headPlayback),this.attachEyes(),this.ambientDialog(),this.isPlaying=!1},n=m.prototype={};n.ambientDialog=function(){new springroll.DelayedCall(function(){this.playDialog("quote")}.bind(this),l)},n.playDialog=function(b){var c=!1;switch(b){case"neutral":this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("neutral"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.neutral,{anim:"neutral"});break;case"quote":if(this.isPlaying===!1){this.isPlaying=!0;var d=a.instance.isLoaded("Daniel_quote");if(d)this.Daniel.daniel_look.Daniel_Head.gotoAndStop("quote"),app.voPlayer.play("Daniel_quote"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.quote,{anim:"quote"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("pleased1")}.bind(this),l);else{this.isPlaying=!0;var e=["Daniel_quote"];a.instance.preload(e,function(){this.Daniel.daniel_look.Daniel_Head.gotoAndStop("quote"),app.voPlayer.play("Daniel_quote"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.quote,{anim:"quote"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("pleased1")}.bind(this),l)}.bind(this))}}break;case"pleased1":if(this.isPlaying===!1){this.isPlaying=!0;var f=a.instance.isLoaded("Daniel_pleased1");if(f)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("pleased1"),app.voPlayer.play("Daniel_pleased1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.pleased1,{anim:"pleased1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle3")}.bind(this),l);else{this.isPlaying=!0;var g=["Daniel_pleased1"];a.instance.preload(g,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("pleased1"),app.voPlayer.play("Daniel_pleased1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.pleased1,{anim:"pleased1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle3")}.bind(this),l)}.bind(this))}}break;case"giggle3":if(this.isPlaying===!1){this.isPlaying=!0;var h=a.instance.isLoaded("Daniel_giggle3");if(h)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle3"),app.voPlayer.play("Daniel_giggle3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle3,{anim:"giggle3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("ambient3")}.bind(this),l);else{this.isPlaying=!0;var i=["Daniel_giggle3"];a.instance.preload(i,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle3"),app.voPlayer.play("Daniel_giggle3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle3,{anim:"giggle3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("ambient3")}.bind(this),l)}.bind(this))}}break;case"ambient3":if(this.isPlaying===!1){this.isPlaying=!0;var j=a.instance.isLoaded("Daniel_ambient3");if(j)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ambient3"),app.voPlayer.play("Daniel_ambient3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ambient3,{anim:"ambient3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("wondering")}.bind(this),l);else{this.isPlaying=!0;var k=["Daniel_ambient3"];a.instance.preload(k,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ambient3"),app.voPlayer.play("Daniel_ambient3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ambient3,{anim:"ambient3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("wondering")}.bind(this),l)}.bind(this))}}break;case"wondering":if(this.isPlaying===!1){this.isPlaying=!0;var m=a.instance.isLoaded("Daniel_wondering");if(m)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("wondering"),app.voPlayer.play("Daniel_wondering"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.wondering,{anim:"wondering"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle2")}.bind(this),l);else{this.isPlaying=!0;var n=["Daniel_wondering"];a.instance.preload(n,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("wondering"),app.voPlayer.play("Daniel_wondering"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.wondering,{anim:"wondering"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle2")}.bind(this),l)}.bind(this))}}break;case"giggle2":if(this.isPlaying===!1){this.isPlaying=!0;var o=a.instance.isLoaded("Daniel_giggle2");if(o)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle2"),app.voPlayer.play("Daniel_giggle2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle2,{anim:"giggle2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("ambient1")}.bind(this),l);else{this.isPlaying=!0;var p=["Daniel_giggle2"];a.instance.preload(p,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle2"),app.voPlayer.play("Daniel_giggle2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle2,{anim:"giggle2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("ambient1")}.bind(this),l)}.bind(this))}}break;case"ambient1":if(this.isPlaying===!1){this.isPlaying=!0;var q=a.instance.isLoaded("Daniel_ambient1");if(q)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ambient1"),app.voPlayer.play("Daniel_ambient1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ambient1,{anim:"ambient1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("pleased2")}.bind(this),l);else{this.isPlaying=!0;var r=["Daniel_ambient1"];a.instance.preload(r,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ambient1"),app.voPlayer.play("Daniel_ambient1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ambient1,{anim:"ambient1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("pleased2")}.bind(this),l)}.bind(this))}}break;case"pleased2":if(this.isPlaying===!1){this.isPlaying=!0;var s=a.instance.isLoaded("Daniel_pleased2");if(s)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("pleased2"),app.voPlayer.play("Daniel_pleased2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.pleased2,{anim:"pleased2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle1")}.bind(this),l);else{this.isPlaying=!0;var t=["Daniel_pleased2"];a.instance.preload(t,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("pleased2"),app.voPlayer.play("Daniel_pleased2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.pleased2,{anim:"pleased2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("giggle1")}.bind(this),l)}.bind(this))}}break;case"giggle1":if(this.isPlaying===!1){this.isPlaying=!0;var u=a.instance.isLoaded("Daniel_giggle1");if(u)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle1"),app.voPlayer.play("Daniel_giggle1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle1,{anim:"giggle1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("quote")}.bind(this),l);else{this.isPlaying=!0;var v=["Daniel_giggle1"];a.instance.preload(v,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("giggle1"),app.voPlayer.play("Daniel_giggle1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.giggle1,{anim:"giggle1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),new springroll.DelayedCall(function(){this.playDialog("quote")}.bind(this),l)}.bind(this))}}break;case"excited":if(this.isPlaying===!1){this.isPlaying=!0;var w=a.instance.isLoaded("Daniel_excited");if(w)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("excited"),app.voPlayer.play("Daniel_excited"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.excited,{anim:"excited"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var x=["Daniel_excited"];c=!0,a.instance.preload(x,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("excited"),app.voPlayer.play("Daniel_excited"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.excited,{anim:"excited"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"trigger":if(this.isPlaying===!1){this.isPlaying=!0;var y=a.instance.isLoaded("Daniel_trigger");if(y)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("reorganize"),app.voPlayer.play("Daniel_trigger"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.reorganize,{anim:"reorganize"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var z=["Daniel_trigger"];c=!0,a.instance.preload(z,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("reorganize"),app.voPlayer.play("Daniel_trigger"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.reorganize,{anim:"reorganize"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"fast":if(this.isPlaying===!1){this.isPlaying=!0;var A=a.instance.isLoaded("Daniel_fast");if(A)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("fast"),app.voPlayer.play("Daniel_fast"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.fast,{anim:"fast"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var B=["Daniel_fast"];c=!0,a.instance.preload(B,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("fast"),app.voPlayer.play("Daniel_fast"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.fast,{anim:"fast"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"energy":if(this.isPlaying===!1){this.isPlaying=!0;var C=a.instance.isLoaded("Daniel_energy");if(C)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("energy"),app.voPlayer.play("Daniel_energy"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.energy,{anim:"energy"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var D=["Daniel_energy"];c=!0,a.instance.preload(D,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("energy"),app.voPlayer.play("Daniel_energy"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.energy,{anim:"energy"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"ooh1":if(this.isPlaying===!1){this.isPlaying=!0;var E=a.instance.isLoaded("Daniel_ooooh1");if(E)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh1"),app.voPlayer.play("Daniel_ooooh1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh1,{anim:"ooh1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var F=["Daniel_ooooh1"];c=!0,a.instance.preload(F,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh1"),app.voPlayer.play("Daniel_ooooh1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh1,{anim:"ooh1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"ooh2":if(this.isPlaying===!1){this.isPlaying=!0;var G=a.instance.isLoaded("Daniel_ooooh2");if(G)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh2"),app.voPlayer.play("Daniel_ooooh2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh2,{anim:"ooh2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var H=["Daniel_ooooh2"];c=!0,a.instance.preload(H,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh2"),app.voPlayer.play("Daniel_ooooh2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh2,{anim:"ooh2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"ooh3":if(this.isPlaying===!1){this.isPlaying=!0;var I=a.instance.isLoaded("Daniel_ooooh3");if(I)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh3"),app.voPlayer.play("Daniel_ooooh3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh3,{anim:"ooh3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var J=["Daniel_ooooh3"];c=!0,a.instance.preload(J,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("ooh3"),app.voPlayer.play("Daniel_ooooh3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.ooh3,{anim:"ooh3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"color1":if(this.isPlaying===!1){this.isPlaying=!0;var K=a.instance.isLoaded("Daniel_color1");if(K)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color1"),app.voPlayer.play("Daniel_color1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color1,{anim:"color1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var L=["Daniel_color1"];c=!0,a.instance.preload(L,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color1"),app.voPlayer.play("Daniel_color1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color1,{anim:"color1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"color2":if(this.isPlaying===!1){this.isPlaying=!0;var M=a.instance.isLoaded("Daniel_color2");if(M)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color2"),app.voPlayer.play("Daniel_color2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color2,{anim:"color2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var N=["Daniel_color2"];c=!0,a.instance.preload(N,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color2"),app.voPlayer.play("Daniel_color2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color2,{anim:"color2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"color3":if(this.isPlaying===!1){this.isPlaying=!0;var O=a.instance.isLoaded("Daniel_color3");if(O)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color3"),app.voPlayer.play("Daniel_color3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color3,{anim:"color3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var P=["Daniel_color3"];c=!0,a.instance.preload(P,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("color3"),
app.voPlayer.play("Daniel_color3"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.color3,{anim:"color3"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"scared":if(this.isPlaying===!1){this.isPlaying=!0;var Q=a.instance.isLoaded("Daniel_scared");if(Q)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("scared"),app.voPlayer.play("Daniel_scared"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.scared,{anim:"scared"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var R=["Daniel_scared"];c=!0,a.instance.preload(R,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("scared"),app.voPlayer.play("Daniel_scared"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.scared,{anim:"scared"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"hide2":if(this.isPlaying===!1){this.isPlaying=!0;var S=a.instance.isLoaded("Daniel_hide2");if(S)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("hide2"),app.voPlayer.play("Daniel_hide2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.hide2,{anim:"hide2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var T=["Daniel_hide2"];c=!0,a.instance.preload(T,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("hide2"),app.voPlayer.play("Daniel_hide2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.hide2,{anim:"hide2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"seek2":if(this.isPlaying===!1){this.isPlaying=!0;var U=a.instance.isLoaded("Daniel_Seek2");if(U)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("seek2"),app.voPlayer.play("Daniel_Seek2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.seek2,{anim:"seek2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var V=["Daniel_Seek2"];c=!0,a.instance.preload(V,function(){this.isPlaying=!0,this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("seek2"),app.voPlayer.play("Daniel_Seek2"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.seek2,{anim:"seek2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"hide1":if(this.isPlaying===!1){this.isPlaying=!0;var W=a.instance.isLoaded("Daniel_hide1");if(W)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("hide1"),app.voPlayer.play("Daniel_hide1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.hide1,{anim:"hide1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var X=["Daniel_hide1"];c=!0,a.instance.preload(X,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("hide1"),app.voPlayer.play("Daniel_hide1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.hide1,{anim:"hide1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"discover1":if(this.isPlaying===!1){this.isPlaying=!0;var Y=a.instance.isLoaded("Daniel_discover1");if(Y)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("discover1"),app.voPlayer.play("Daniel_discover1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.discover1,{anim:"discover1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!1;else{this.isPlaying=!0;var Z=["Daniel_discover1"];c=!1,a.instance.preload(Z,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("discover1"),app.voPlayer.play("Daniel_discover1"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.discover1,{anim:"discover1"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"discover4":if(this.isPlaying===!1){this.isPlaying=!0;var $=a.instance.isLoaded("Daniel_discover4");if($)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("discover4"),app.voPlayer.play("Daniel_discover4"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.discover4,{anim:"discover4"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!1;else{this.isPlaying=!0;var _=["Daniel_discover4"];c=!1,a.instance.preload(_,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("discover4"),app.voPlayer.play("Daniel_discover4"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.discover4,{anim:"discover4"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"trigger2":if(this.isPlaying===!1){this.isPlaying=!0;var aa=a.instance.isLoaded("Daniel_trigger_upAgain");if(aa)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("trigger2"),app.voPlayer.play("Daniel_trigger_upAgain"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.trigger2,{anim:"trigger2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var ba=["Daniel_trigger_upAgain"];c=!0,a.instance.preload(ba,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("trigger2"),app.voPlayer.play("Daniel_trigger_upAgain"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.trigger2,{anim:"trigger2"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}break;case"friends":if(this.isPlaying===!1){this.isPlaying=!0;var ca=a.instance.isLoaded("Daniel_friends");if(ca)this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("friends"),app.voPlayer.play("Daniel_friends"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.friends,{anim:"friends"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this)),c=!0;else{this.isPlaying=!0;var da=["Daniel_friends"];c=!0,a.instance.preload(da,function(){this.Daniel.daniel_look.gotoAndStop("daniel_look"),this.Daniel.daniel_look.Daniel_Head.gotoAndStop("friends"),app.voPlayer.play("Daniel_friends"),app.animator.play(this.Daniel.daniel_look.Daniel_Head.friends,{anim:"friends"},function(){this.playDialog("neutral"),this.isPlaying=!1}.bind(this))}.bind(this))}}}return c},n.destroyEyes=function(){null!==this._eyeL&&(this._eyeL.destroy(),this._eyeL=null),null!==this._eyeR&&(this._eyeR.destroy(),this._eyeR=null)},n.attachEyes=function(){var a=this._head.getChildAt(0);this._eyeL=new b(a.pupil_left),this._eyeR=new b(a.pupil_right)},n.playGiggle=function(){if(this.isPlaying===!1)switch(Math.floor(3*Math.random())){case 0:this.playDialog(g);break;case 1:this.playDialog(h);break;case 2:this.playDialog(i)}},n.playOoh=function(){if(this.isPlaying===!1)switch(Math.floor(3*Math.random())){case 0:this.playDialog(d);break;case 1:this.playDialog(e);break;case 2:this.playDialog(f)}},n.playHide2=function(){this.isPlaying===!1&&this.playDialog(k)},n.playHide1=function(){this.isPlaying===!1&&this.playDialog(j)},namespace("myFishTank").Daniel=m}(),function(){var b=include("myFishTank.FishFood"),c=100,d=8,e=250,f=function(b,d,f,g,h){if(this._firstClick=[],this._speed=g,this._mouthOffset=h,this._hungry=c,this._right=!1,this._target=null,this._frames=0,this._asset=f,this._holder=new createjs.Container,this._holder.addChild(f),f.x=f.width/-2,f.y=f.height/-2,this._position=new createjs.Point(b,d),this._holder.x=this._position.x,this._holder.y=this._position.y,this._asset.x=this._position.x,this._asset.y=this._position.y,this._asset.children.length>1)for(a=0;a<this._asset.children.length;a++)this._asset.children[a].gotoAndStop("neutral_left"),app.animator.play(this._asset.children[a].instance,{anim:"swim"});else"Crab"!==this._asset.name&&(this._asset.gotoAndStop("neutral_left"),app.animator.play(this._asset.instance,{anim:"swim"}));this._asset.addEventListener("mousedown",this.click.bind(this)),this._enabled=!0,this._wayPointsX=[];for(var i=0;50>i;i++)this._wayPointsX.push(Math.abs(i%2*app.TANK_WIDTH-(150*Math.random()+e/2)));this._wayPoint=0,this._salt=this.randomNum(0,5)},g=f.prototype={};g.revertDelay=function(){this.revert()},g.click=function(){this.action(),this._hungry++},g.actionDelay=function(){this.action(),this._hungry++},g.action=function(){},g.revert=function(){},g.Update=function(f){var g=this._speed;this.currentLabel=null;var h=-1;if(this._asset.children.length>1?(h=this._asset.children[0].currentLabel.indexOf("_stop"),h>0?this.currentLabel=this._asset.children[0].currentLabel.substr(0,h):this.currentLabel=this._asset.children[0].currentLabel):(h=this._asset.currentLabel.indexOf("_stop"),h>0?this.currentLabel=this._asset.currentLabel.substr(0,h):this.currentLabel=this._asset.currentLabel),null!==this._target&&this._target.y>=(new b).FEED_DEPTH&&(this._target=null),this.isHungry()&&null!==f.food()&&Math.abs(f.food().x-this._position.x)>this._mouthOffset.x&&(null===f.food()._target||f.food()._target===this)?(this._right?this._target=new createjs.Point(f.food().x-this._mouthOffset.x,f.food().y+this._mouthOffset.y):this._target=new createjs.Point(f.food().x+this._mouthOffset.x,f.food().y+this._mouthOffset.y),f.food()._target=this,g=d,this._right=this._source.x<this._target.x,this._chasing||(this._chasing=!0,this._source=new createjs.Point(this._position.x,this._position.y),this._frames=0)):this._chasing&&(this._chasing=!1,this._target=null),(null===this._target||this.distance(this._target,this._position)<2)&&(this._target=new createjs.Point(this._wayPointsX[this._wayPoint],Math.random()*(app.TANK_HEIGHT-e/2)+e/4),this._wayPoint=(this._wayPoint+1)%this._wayPointsX.length,this._source=new createjs.Point(this._position.x,this._position.y),this._right=this._source.x<this._target.x,this._frames=0,this.isHungry()&&null!==f.food()&&f.food()._target===this&&(f.eat(),this._hungry=c)),"neutral_left"===this.currentLabel||"neutral_right"===this.currentLabel){if(this._position=this.interpolate(this._target,this._source,Math.min(1,this._frames*g/this.distance(this._target,this._source))),this._right&&"neutral_left"==this.currentLabel)if(this._asset.children.length>1)for(a=0;a<this._asset.children.length;a++)this._asset.children[a].gotoAndStop("neutral_left_to_right"),app.animator.play(this._asset.children[a].instance_1,{anim:"turn"},function(){this.turnComplete()}.bind(this));else this._asset.gotoAndStop("neutral_left_to_right"),app.animator.play(this._asset.instance_1,{anim:"turn"},function(){this.turnComplete()}.bind(this));else if(this._right||"neutral_right"!=this.currentLabel)this._asset.x=this._position.x,this._asset.y=this._position.y;else if(this._asset.children.length>1)for(a=0;a<this._asset.children.length;a++)this._asset.children[a].gotoAndStop("neutral_right_to_left"),app.animator.play(this._asset.children[a].instance_1,{anim:"turn"},function(){this.turnComplete()}.bind(this));else this._asset.gotoAndStop("neutral_right_to_left"),app.animator.play(this._asset.instance_1,{anim:"turn"},function(){this.turnComplete()}.bind(this));this._frames++,this._hungry>0&&this._hungry--}else this._asset.x=this._position.x,this._asset.y=this._position.y},g.turnComplete=function(){if("neutral_left_to_right"===this.currentLabel||"neutral_right_to_left"===this.currentLabel)switch(this.currentLabel){case"neutral_left_to_right":if(this._asset.children.length>1)for(a=0;a<this._asset.children.length;a++)this._asset.children[a].gotoAndStop("neutral_right"),app.animator.play(this._asset.children[a].instance,{anim:"swim"});else this._asset.gotoAndStop("neutral_right"),app.animator.play(this._asset.instance,{anim:"swim"});break;case"neutral_right_to_left":if(this._asset.children.length>1)for(a=0;a<this._asset.children.length;a++)this._asset.children[a].gotoAndStop("neutral_left"),app.animator.play(this._asset.children[a].instance,{anim:"swim"});else this._asset.gotoAndStop("neutral_left"),app.animator.play(this._asset.instance,{anim:"swim"})}this._asset.x=this._position.x,this._asset.y=this._position.y},g.isHungry=function(){return 0===this._hungry},g.interpolate=function(a,b,c){var d=c*a.x+(1-c)*b.x,e=c*a.y+(1-c)*b.y;return new createjs.Point(d,e)},g.interpolate1=function(a,b,c){var d=a.x+(b.x-a.x)*c,e=b.y+(b.y-a.y)*c;return x=d,y=e,new createjs.Point(x,y)},g.distance=function(a,b){var c=0,d=0;return null!==b&&(c=b.x-a.x,c*=c,d=b.y-a.y,d*=d),Math.sqrt(c+d)},g.clampToTank=function(a){return new createjs.Point(Math.max(Math.min(a.x,app.TANK_WIDTH-this._asset.getBounds().width/2),this._asset.getBounds().width/2),Math.max(Math.min(a.y,app.TANK_HEIGHT-this._asset.getBounds().height/2),this._asset.getBounds().height/2))},g.playDialogOnce=function(a,b){if(null!==this._firstClick[a]&&this._firstClick[a])switch(b){case"playGiggle":app._daniel.playGiggle();break;case"playOoh":app._daniel.playOoh()}else this._firstClick[a]=app._daniel.playDialog(a)},g.reset=function(){this.revert()},g.setPosition=function(a,b){this._target=null,this._right=this._position.x<a,this._position.x=a,this._position.y=b,this._asset.x=this._position.x,this._asset.y=this._position.y},g.randomNum=function(a,b){var c=Math.floor(Math.random()*(b-a+1))+a;return c},namespace("myFishTank").Fish=f}(),function(){var a=include("myFishTank.SimpleFish"),b=2.3,c=80,d=-5,e=300,f=300,g=function(g,h,i,j,k){a.call(this,j,k,g,b,new createjs.Point(c,d),e,f),this._stateIndex=0,this._state=[],this._state.push(this._asset);var l=h;this._state.push(l),l=i,this._state.push(l),this._mouthOffsetXRight=148,this._mouthOffsetXLeft=4,this.name="gobyFish",this._mouthOffsetYRight=-16,this._mouthOffsetYLeft=-16},h=extend(g,a);h.action=function(){var a=this._asset.parent;a.removeChild(this._asset),this._stateIndex=(this._stateIndex+1)%this._state.length,this._asset=this._state[this._stateIndex],this._right?(this.framesLoaded=!1,this._asset.gotoAndStop("special_right_neutral"),this.playInstanceAnimation(this._asset.instance_2,{anim:"swim_glow"},function(){this.framesLoaded=!0}.bind(this))):(this.framesLoaded=!1,this._asset.gotoAndStop("special_left_neutral"),this.playInstanceAnimation(this._asset.instance_2,{anim:"swim_glow"},function(){this.framesLoaded=!0}.bind(this))),a.addChild(this._asset),this._light=30,springroll.Sound.instance.play("neonfish_glow",this.sfxComplete.bind(this))},h.sfxComplete=function(){switch(this._stateIndex){case 0:this.playDialogOnce(app._daniel.DIALOG_COLOR1,"playOoh");break;case 1:this.playDialogOnce(app._daniel.DIALOG_COLOR2,"playOoh");break;case 2:this.playDialogOnce(app._daniel.DIALOG_COLOR3,"playOoh")}},h.update=function(a){if(this.Update(a),"specialOUT"===this._asset.currentLabel.substr(0,10)||"special_left_to_right_neutral"===this._asset.currentLabel||"special_right_to_left_neutral"===this._asset.currentLabel){if(this.framesLoaded)switch(this._asset.currentLabel){case"special_right_to_left_neutral":this._asset.gotoAndStop("special_left_neutral"),this.playInstanceAnimation(this._asset.instance_2,{anim:"swim_glow"},function(){this.framesLoaded=!0}.bind(this));break;case"special_left_to_right_neutral":this._asset.gotoAndStop("special_right_neutral"),this.playInstanceAnimation(this._asset.instance_2,{anim:"swim_glow"},function(){this.framesLoaded=!0}.bind(this));break;case"specialOUT_left_neutral":this._asset.gotoAndStop("neutral_left"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"});break;case"specialOUT_right_neutral":this._asset.gotoAndStop("neutral_right"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"})}}else this._light>0&&(this._light--,0===this._light&&(this._right?(this.framesLoaded=!1,this._asset.gotoAndStop("specialOUT_right_neutral"),this.playInstanceAnimation(this._asset.instance_4,{anim:"glow_fade"},function(){this.framesLoaded=!0}.bind(this))):(this.framesLoaded=!1,this._asset.gotoAndStop("specialOUT_left_neutral"),this.playInstanceAnimation(this._asset.instance_4,{anim:"glow_fade"},function(){this.framesLoaded=!0}.bind(this)))));("specialOUT"===this._asset.currentLabel.substr(0,10)||"special_left_neutral"===this._asset.currentLabel||"special_right_neutral"===this._asset.currentLabel)&&(this._position=this.interpolate(this._target,this._source,Math.min(1,this._frames*this._speed/this.distance(this._target,this._source))),this._right&&"special_left_neutral"===this._asset.currentLabel?(this._asset.gotoAndStop("special_left_to_right_neutral"),this.playInstanceAnimation(this._asset.instance_3,{anim:"turn_glow"},function(){}.bind(this))):this._right||"special_right_neutral"!==this._asset.currentLabel?this._right&&"specialOUT_left_neutral"==this._asset.currentLabel?(this._asset.gotoAndStop("neutral_left_to_right"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){}.bind(this))):this._right||"specialOUT_right_neutral"!=this._asset.currentLabel||(this._asset.gotoAndStop("neutral_right_to_left"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){}.bind(this))):(this._asset.gotoAndStop("special_right_to_left_neutral"),this.playInstanceAnimation(this._asset.instance_3,{anim:"turn_glow"},function(){}.bind(this))),this._frames++)},h.exit=function(){},namespace("myFishTank").GobyFish=g}(),function(){var a=include("myFishTank.SimpleFish"),b=include("myFishTank.BubbleEvent"),c=1.7,d=-15,e=0,f=120,g=function(b,f,g){a.call(this,f,g,b,c,new createjs.Point(d,e)),this._asset.gotoAndStop("walk_left"),this.framesLoaded=!0,this.playInstanceAnimation(this._asset.instance_3,{anim:"walk_slow",loop:!0},function(){}.bind(this))},h=extend(g,a);h.action=function(){switch(this._asset.currentLabel){case"walk_left":case"run_left":case"eat_left":this._asset.gotoAndStop("into_shell_left"),this.framesLoaded=!1,this.playInstanceAnimation(this._asset.instance_6,{anim:"intoshell",audio:"crab_hide"},function(){this.framesLoaded=!0}.bind(this));break;case"walk_right":case"run_right":case"eat_right":this._asset.gotoAndStop("into_shell_right"),this.framesLoaded=!1,this.playInstanceAnimation(this._asset.instance_6,{anim:"intoshell",audio:"crab_hide"},function(){this.framesLoaded=!0}.bind(this))}this._frames=0},h.update=function(a){if(-1===this._asset.currentLabel.search(/shell/)&&null!==a.bottomFood()){var c=a.bottomFood().x-(this._position.x+40);Math.abs(c)<5?0>c?"eating_left"!==this._asset.currentLabel&&(this.framesLoaded=!1,this._asset.gotoAndStop("eating_left"),this.playInstanceAnimation(this._asset.instance_5,{anim:"eating"},function(){this.framesLoaded=!0}.bind(this))):"eating_right"!==this._asset.currentLabel&&(this.framesLoaded=!1,this._asset.gotoAndStop("eating_right"),this.playInstanceAnimation(this._asset.instance_5,{anim:"eating"},function(){this.framesLoaded=!0}.bind(this))):0>c?"run_left"!==this._asset.currentLabel&&(this._asset.gotoAndStop("run_left"),this.playInstanceAnimation(this._asset.instance_4,{anim:"walk_fast",loop:!0},function(){}.bind(this))):"run_right"!==this._asset.currentLabel&&(this._asset.gotoAndStop("run_right"),this.playInstanceAnimation(this._asset.instance_4,{anim:"walk_fast",loop:!0},function(){}.bind(this)))}var g=null;switch(this._asset.currentLabel){case"run_left":this._position.x>200?this._position.x=this._position.x-2*this._speed:this._asset.gotoAndStop("run_right");break;case"run_right":this._position.x<app.TANK_WIDTH-70?this._position.x=this._position.x+2*this._speed:this._asset.gotoAndStop("run_left");break;case"walk_left":this._position.x>200?this._position.x=this._position.x-this._speed:(this._asset.gotoAndStop("walk_left_to_right"),this.playInstanceAnimation(this._asset.instance_8,{anim:"turn"},function(){}.bind(this)));break;case"walk_right":this._position.x<app.TANK_WIDTH-85?this._position.x=this._position.x+this._speed:(this._asset.gotoAndStop("walk_right_to_left"),this.playInstanceAnimation(this._asset.instance_8,{anim:"turn"},function(){}.bind(this)));break;case"into_shell_left":this.framesLoaded&&this._asset.gotoAndStop("in_shell_idle_left");break;case"into_shell_right":this.framesLoaded&&this._asset.gotoAndStop("in_shell_idle_right");break;case"in_shell_idle_left":this._frames++===f&&(this.framesLoaded=!1,this._asset.gotoAndStop("out_of_shell_left"),this.playInstanceAnimation(this._asset.instance_1,{anim:"outof_shell",audio:"crab_appear"},function(){this.framesLoaded=!0,app._daniel.playGiggle()}.bind(this)));break;case"in_shell_idle_right":this._frames++===f&&(this.framesLoaded=!1,this._asset.gotoAndStop("out_of_shell_right"),this.playInstanceAnimation(this._asset.instance_1,{anim:"outof_shell",audio:"crab_appear"},function(){this.framesLoaded=!0,app._daniel.playGiggle()}.bind(this)));break;case"out_of_shell_left":this.framesLoaded&&this._asset.gotoAndStop("walk_left");break;case"out_of_shell_right":this.framesLoaded&&this._asset.gotoAndStop("walk_right");break;case"eating_left":g=this._asset.instance_5,g.currentFrame>6&&(this.crabnoms(),this._holder.dispatchEvent(new b(a.bottomFood.x,a.bottomFood.y)),a.eatBottom()&&this._asset.gotoAndStop("walk_left"));break;case"eating_right":g=this._asset.instance_5,g.currentFrame>6&&(this.crabnoms(),this._holder.dispatchEvent(new b(a.bottomFood.x,a.bottomFood.y)),a.eatBottom()&&this._asset.gotoAndStop("walk_right"));break;case"walk_right_to_left":this._asset.gotoAndStop("walk_left");break;case"walk_left_to_right":this._asset.gotoAndStop("walk_right")}this._holder.x=this._position.x,Math.random()<.01&&(this._right?this._holder.dispatchEvent(new b(this._holder.x+d,this._holder.y-e)):this._holder.dispatchEvent(new b(this._holder.x-d,this._holder.y-e)))},h.crabnoms=function(){switch(Math.floor(3*Math.random())){case 0:springroll.Sound.instance.play("crab_noms_01");break;case 1:springroll.Sound.instance.play("crab_noms_02");break;case 2:springroll.Sound.instance.play("crab_noms_03")}},namespace("myFishTank").HermitCrab=g}(),function(){function a(a){for(var b=0,c=a.length;c>b;b++)a[b].X*=app.UPRES_SCALE,a[b].X+=10,a[b].Y*=app.UPRES_SCALE}var b=include("springroll.Sound"),c=include("myFishTank.BubbleEvent"),d=function(a){_clip=a,_clip.x=390,_clip.y=555,_clip.addEventListener("click",this.bubble.bind(this)),this.addedToStage(_clip),this.houseTimer=0},e=d.prototype={};e.addedToStage=function(a){this._house_clip=a,this.houseAnimation(),this.bubble(),this.clicked=!1},e.houseAnimation=function(){switch(this._house_clip.name){case"Daniel":this.cordinates=[{X:230,Y:290},{X:243,Y:296},{X:235,Y:302},{X:248,Y:308},{X:233,Y:185},{X:225,Y:185},{X:242,Y:185}];break;case"Museum":this.cordinates=[{X:240,Y:228},{X:260,Y:228},{X:280,Y:228},{X:200,Y:228},{X:220,Y:228},{X:170,Y:315},{X:230,Y:315},{X:305,Y:305}];break;case"Tree":this.cordinates=[{X:245,Y:250},{X:175,Y:180},{X:219,Y:190},{X:255,Y:180},{X:300,Y:200},{X:200,Y:140},{X:280,Y:150},{X:315,Y:170}];break;case"Castle":this.cordinates=[{X:180,Y:270},{X:227,Y:287},{X:297,Y:287},{X:277,Y:242}]}a(this.cordinates)},e.houseanimationComplete=function(){b.instance.play("bubbles3"),this.bubblePlaying=!0,app.animator.play(this._house_clip,{anim:"Bubble"},this.bubbleanimationComplete.bind(this))},e.update=function(){if(this.houseTimer++,this.bubblePlaying)for(var a=this._house_clip.BubbleSpawner,b=0;b<a.children.length;b++){a.getChildAt(b);this._house_clip.dispatchEvent(new c(this.cordinates[b].X,this.cordinates[b].Y))}300===this.houseTimer&&this.bubble()},e.bubbleanimationComplete=function(){this.bubblePlaying=!1,app.animator.play(this._house_clip,{anim:"House2"},function(){this.clicked=!1,this.houseTimer=0}.bind(this))},e.bubble=function(){this.clicked||(this.clicked=!0,app.animator.play(this._house_clip,{anim:"House"},this.houseanimationComplete.bind(this)))},e.exit=function(){},namespace("myFishTank").House=d}(),function(){var a=function(a){this._asset=a,app.panel.addChild(this._asset),this._asset.gotoAndStop(0),app.animator.play(this._asset,{anim:"idle"}),this._asset.addEventListener("mouseover",this.onPlantMouseOut.bind(this)),isIdle=!0,this._seahorse=null,app.hasTouch&&this._asset.addEventListener("mousedown",this.onPlantMouseOut.bind(this))},b=a.prototype={};b.onPlantMouseOut=function(){isIdle&&(isIdle=!1,"leftPlant"===this._asset.name?app.animator.play(this._asset,{anim:"sway"},function(){new springroll.DelayedCall(function(){app.animator.play(this._asset,{anim:"idle"}),isIdle=!0}.bind(this),500)}.bind(this)):app.animator.play(this._asset,{anim:"sway_right"},function(){new springroll.DelayedCall(function(){app.animator.play(this._asset,{anim:"idle"}),isIdle=!0}.bind(this),500)}.bind(this))),null!==this._seahorse&&app.states.game._seahorse._enabled&&(app.states.game._seahorse.find(),this._seahorse=null)},b.seahorse=function(a){this._seahorse=a},namespace("myFishTank").Plant=a}(),function(){var a=include("myFishTank.SimpleFish"),b=include("myFishTank.BubbleEvent"),c=1.4,d=35,e=4,f=120,g=140,h=300,i=function(b,f,i){a.call(this,f,i,b,c,new createjs.Point(d,e),g,h),this.framesLoaded=!0,this._mouthOffsetXRight=75,this._mouthOffsetXLeft=-5,this._mouthOffsetYRight=-10,this._mouthOffsetYLeft=-10},j=extend(i,a);j.action=function(){switch(this._asset.currentLabel){case"neutral_right":this.framesLoaded=!1,this._asset.gotoAndStop("special_in_right"),this.playInstanceAnimation(this._asset.instance_2,{anim:"puffup"},function(){this.framesLoaded=!0}.bind(this)),this._puffTime=f,this._push=new createjs.Point(0,-.3),this._asset.rotation=10*Math.sin((this._position.x+this._position.y)/10),springroll.Sound.instance.play("puffer_inflate");break;case"neutral_left":this.framesLoaded=!1,this._asset.gotoAndStop("special_in_left"),this.playInstanceAnimation(this._asset.instance_2,{anim:"puffup"},function(){this.framesLoaded=!0}.bind(this)),this._puffTime=f,this._push=new createjs.Point(0,-.3),this._asset.rotation=10*Math.sin((this._position.x+this._position.y)/10),springroll.Sound.instance.play("puffer_inflate");break;case"special_right_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_right"),this.playInstanceAnimation(this._asset.instance_4,{anim:"puffdown"},function(){this.framesLoaded=!0}.bind(this)),this._asset.rotation=0,springroll.Sound.instance.play("puffer_deflate");break;case"special_left_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_left"),this.playInstanceAnimation(this._asset.instance_4,{anim:"puffdown"},function(){this.framesLoaded=!0}.bind(this)),springroll.Sound.instance.play("puffer_deflate"),this._asset.rotation=0}new springroll.DelayedCall(this.revert.bind(this),1e4)},j.revert=function(){switch(this._asset.currentLabel){case"special_right_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_right"),this.playInstanceAnimation(this._asset.instance_4,{anim:"puffdown"},function(){this.framesLoaded=!0,springroll.Sound.instance.play("puffer_deflate")}.bind(this)),this._holder.rotation=0;break;case"special_left_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_left"),this.playInstanceAnimation(this._asset.instance_4,{anim:"puffdown"},function(){this.framesLoaded=!0,springroll.Sound.instance.play("puffer_deflate")}.bind(this)),this._holder.rotation=0}},j.update=function(a){this.Update(a);var c=null,d=this._asset.currentLabel.indexOf("_stop");if(c=d>0?this._asset.currentLabel.substr(0,d):this._asset.currentLabel,("special_in_left"===c||"special_in_right"===c)&&(this.playDialogOnce(app._daniel.DIALOG_EXCITED,"playGiggle"),this.framesLoaded))switch(c){case"special_in_left":this._asset.gotoAndStop("special_left_neutral");break;case"special_in_right":this._asset.gotoAndStop("special_right_neutral")}if(("special_out_left"===c||"special_out_right"===c)&&(this._right?(this._position.x-=15*(25-this._asset.instance_4.currentFrame)/24,this._holder.dispatchEvent(new b(this._position.x+(this._mouthOffsetXRight+25),this._position.y-this._mouthOffsetYRight))):(this._position.x+=15*(25-this._asset.instance_4.currentFrame)/24,this._holder.dispatchEvent(new b(this._position.x-(this._mouthOffsetXLeft+25),this._position.y-this._mouthOffsetYLeft))),this._position=this.clampToTank(this._position),this.framesLoaded)){switch(c){case"special_out_left":this._asset.gotoAndStop("neutral_left");break;case"special_out_right":this._asset.gotoAndStop("neutral_right")}this._target=null}("special_left_neutral"===c||"special_right_neutral"===c)&&(this._holder.rotation=10*Math.sin((this._position.x+this._position.y)/10),this._position.x+=this._push.x*this._puffTime/(f/3),this._position.y+=this._push.y*this._puffTime/(f/3),this._position=this.clampToTank(this._position),this._puffTime>0&&this._puffTime--)},j.clampToTank=function(a){return new createjs.Point(Math.max(Math.min(a.x,app.TANK_WIDTH-80),this._asset.getBounds().width/4+30),Math.max(Math.min(a.y,app.TANK_HEIGHT),this._asset.getBounds().height/2))},namespace("myFishTank").PufferFish=i}(),function(){var a=include("myFishTank.SimpleFish"),b=include("myFishTank.BubbleEvent"),c=2.3,d=40,e=5,f=100,g=.1,h=280,k=180,l=function(b,f,g){a.call(this,f,g,b,c,new createjs.Point(d,e),h,k),this._schoolOffset=[-20,15,-15,10];for(var i=0,j=this._schoolOffset.length;j>i;i++)this._schoolOffset[i]*=2;for(this._following=!1,this.asset=b,this._fish=[],this._mouthOffsetXRight=40,this._mouthOffsetXLeft=35,this._mouthOffsetYRight=5,this._mouthOffsetYLeft=5;this.asset.children.length>1;)this._fish.push(this.asset.getChildAt(this.asset.children.length-1)),this.asset.removeChildAt(this.asset.children.length-1);for(this._offset=new createjs.Point(this.asset.getBounds().width/-2,this.asset.getBounds().height/-2),this.asset.x=this._offset.x,this.asset.y=this._offset.y,i=this._fish.length-1;i>=0;i--)this._holder.addChild(this._fish[i]),this._fish[i].x-=this._fish[i].getBounds().width,this._fish[i].y-=this._fish[i].getBounds().height;for(this._holder.addChild(this._holder.getChildAt(0).getChildAt(0)),this._holder.removeChildAt(0),this._positionHistory=[],this._frameHistory=[],i=0;101>i;i++)this._positionHistory.push(new createjs.Point(f-i,g+i)),this._frameHistory.push(this._asset.currentLabel);for(i=0;i<this._fish.length;i++)this._fish[i].x=this._positionHistory[10*(i+1)].x-this._holder.x+this._offset.x,this._fish[i].y=this._positionHistory[10*(i+1)].y-this._holder.y+this._offset.y+this._schoolOffset[i],this._fish[i].gotoAndStop(this._frameHistory[10*(i+1)])},m=extend(l,a);m.action=function(){if(this._following)this.revert();else{this._following=!0,this._frames=0;var a=app.pan.scalingContainer.globalToLocal(app.display.stage.mouseX,app.display.stage.mouseY);for(this._target=this.clampToTank(new createjs.Point(a.x,a.y)),springroll.Sound.instance.play("bubbles2",this.sfxComplete.bind(this)),this._holder.dispatchEvent(new b(this._holder.x,this._holder.y)),i=0;i<this._fish.length;i++)this._holder.dispatchEvent(new b(this._positionHistory[10*(i+1)].x,this._positionHistory[10*(i+1)].y))}},m.sfxComplete=function(a){this.playDialogOnce(app._daniel.DIALOG_FRIENDS,"playOoh")},m.revert=function(){this._following=!1,this._frames=0,this._target=null},m.update=function(a){if(this._following){var b=app.pan.scalingContainer.globalToLocal(app.display.stage.mouseX,app.display.stage.mouseY),c=this.clampToTank(new createjs.Point(f*Math.cos(g*this._frames)+b.x,f*Math.sin(g*this._frames)+b.y));if(this._right=c.x>this._position.x,this._right&&"neutral_left"===this._asset.currentLabel?(this._framesLoaded=!1,this._asset.gotoAndStop("neutral_left_to_right"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this._framesLoaded=!0}.bind(this))):this._right||"neutral_right"!==this._asset.currentLabel||(this._framesLoaded=!1,this._asset.gotoAndStop("neutral_right_to_left"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this._framesLoaded=!0}.bind(this))),("neutral_left_to_right"==this._asset.currentLabel||"neutral_right_to_left"==this._asset.currentLabel)&&this._framesLoaded)switch(this._asset.currentLabel){
case"neutral_left_to_right":this._asset.gotoAndStop("neutral_right"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"});break;case"neutral_right_to_left":this._asset.gotoAndStop("neutral_left"),this.playInstanceAnimation(this._asset.instance,{anim:"swim"})}this._position=this.interpolate(c,this._position,this.distance(c,this._position)/app.TANK_WIDTH),this._holder.x=this._position.x,this._holder.y=this._position.y,this._frames++,this._frames>275&&this.revert()}else this.Update(a);if(!this.isSwapping){if(this._positionHistory.length>100){for(var d=0;d<this._fish.length;d++)this._fish[d].x=this._positionHistory[10*(d+1)].x-this._holder.x,this._fish[d].y=this._positionHistory[10*(d+1)].y-this._holder.y+this._schoolOffset[d],this._fish[d].gotoAndStop(this._frameHistory[10*(d+1)]);this._frameHistory.pop(),this._positionHistory.pop()}else{for(var e=0;100>e;e++)this._positionHistory.push(new createjs.Point(this._position.x-e,this._position.y+e)),this._frameHistory.push(this._asset.currentLabel);for(j=0;j<this._fish.length;j++)this._fish[j].x=this._positionHistory[10*(j+1)].x-this._holder.x+this._offset.x,this._fish[j].y=this._positionHistory[10*(j+1)].y-this._holder.y+this._offset.y+this._schoolOffset[j],this._fish[j].gotoAndStop(this._frameHistory[10*(j+1)])}this._positionHistory.unshift(this._position),this._frameHistory.unshift(this._asset.currentLabel)}},m.clampToTank=function(a){return new createjs.Point(Math.max(Math.min(a.x,app.TANK_WIDTH+10),.75*this._asset.getBounds().width),Math.max(Math.min(a.y,app.TANK_HEIGHT),this._asset.getBounds().height/2))},m.setPosition=function(b,c){for(a.prototype.setPosition.call(this,b,c),this._following=!1,i=0;i<this._fish.length;i++)this._fish[i].x=this._asset.x,this._fish[i].y=this._asset.y+this._schoolOffset[i],this._fish[i].gotoAndStop(this._asset.currentLabel);this._positionHistory=[],this._positionHistory.length>100&&(this._frameHistory.pop(),this._positionHistory.pop())},namespace("myFishTank").SchoolFish=l}(),function(){var a=include("myFishTank.BubbleEvent"),b=include("myFishTank.SimpleFish"),c=.4,d=35,e=-15,f=220,g=160,h=function(a,h,i){void 0!==a&&(b.call(this,h,i,a,c,new createjs.Point(d,e),f,g),this._mouthOffsetXRight=45,this._mouthOffsetXLeft=-1,this._mouthOffsetYRight=-20,this._mouthOffsetYLeft=-25,this._enabled=!0,this._plants=[],this._hidding=!1,this._hidingSpot=0,this.framesLoaded=!0,this._found=!1,this.name="SeaHorse")},i=extend(h,b);i.action=function(){if(this._enabled){if(this._enabled=!1,this._right?(this.framesLoaded=!1,this._asset.gotoAndStop("special_right"),this.playInstanceAnimation(this._asset.instance_2,{anim:"jump"},function(){this.framesLoaded=!0}.bind(this))):(this.framesLoaded=!1,this._asset.gotoAndStop("special_left"),this.playInstanceAnimation(this._asset.instance_2,{anim:"jump"},function(){this.framesLoaded=!0}.bind(this))),this._hidding&&this._frames>10){springroll.Sound.instance.play("horse_startled",this.sfxComplete.bind(this)),this._found=!0,this._frames=0,this._target=new createjs.Point(app.TANK_WIDTH/2,app.TANK_HEIGHT/2),this._source=new createjs.Point(this._position.x,this._position.y),this._right=this._source.x<this._target.x;for(var b=0;b<this._plants.length;b++)this._plants[b].seahorse(null)}else springroll.Sound.instance.play("bubbles1");this._holder.dispatchEvent(new a(this._holder.x,this._holder.y)),this._holder.dispatchEvent(new a(this._holder.x,this._holder.y)),this._holder.dispatchEvent(new a(this._holder.x,this._holder.y)),this._holder.dispatchEvent(new a(this._holder.x,this._holder.y))}},i.sfxComplete=function(){Math.random()<.5?this.playDialogOnce(app._daniel.DIALOG_DISCOVER1):this.playDialogOnce(app._daniel.DIALOG_DISCOVER4)},i.revert=function(){this._hidding=!1,this._enabled=!0,this._frames=0,this._target=null,this._right?this._asset.gotoAndStop("neutral_right"):this._asset.gotoAndStop("neutral_left")},i.update=function(a){if(this._hidding){if(this.distance(this._position,this._target)>1?(this._position=this.interpolate(this._target,this._source,Math.min(1,10*this._frames/this.distance(this._target,this._source))),this._frames>300&&!this._isRollover&&this.revert()):this._enabled||(this._dialog?(this.playDialogOnce(app._daniel.DIALOG_SEEK2,"playHide1"),this._dialog=!1):(this.playDialogOnce(app._daniel.DIALOG_SCARED,"playHide2"),this._dialog=!0),this._enabled=!0),this._frames++,this._frames>300&&!this._isRollover&&this.revert(),this._holder.x=this._position.x,this._holder.y=this._position.y,("neutral_left"==this._asset.currentLabel||"neutral_right"==this._asset.currentLabel)&&(this._right&&"neutral_left"==this._asset.currentLabel?(this.framesLoaded=!1,this._asset.gotoAndStop("neutral_left_to_right"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this.framesLoaded=!0}.bind(this))):this._right||"neutral_right"!=this._asset.currentLabel||(this.framesLoaded=!1,this._asset.gotoAndStop("neutral_right_to_left"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this.framesLoaded=!0}.bind(this)))),("neutral_left_to_right"==this._asset.currentLabel||"neutral_right_to_left"==this._asset.currentLabel)&&this.framesLoaded)switch(this._asset.currentLabel){case"neutral_left_to_right":this._asset.gotoAndStop("neutral_right");break;case"neutral_right_to_left":this._asset.gotoAndStop("neutral_left")}}else this.Update(a);if(("special_left"==this._asset.currentLabel||"special_right"==this._asset.currentLabel)&&(this._found&&(this._position=this.interpolate(this._target,this._source,Math.min(1,3*this._frames/this.distance(this._target,this._source))),this._frames++,this._holder.x=this._position.x,this._holder.y=this._position.y),this.framesLoaded)){switch(this._found=!1,this._asset.currentLabel){case"special_left":this._asset.gotoAndStop("neutral_left");break;case"special_right":this._asset.gotoAndStop("neutral_right")}if(this._hidding=!this._hidding,this._hidding){var b=this._plants[this._hidingSpot];0===this._hidingSpot?this._target=new createjs.Point(b._asset.x+b._asset.getBounds().width/3,b._asset.y+b._asset.getBounds().height/3):1===this._hidingSpot?this._target=new createjs.Point(b._asset.x+29.25,b._asset.y+56.75):2===this._hidingSpot&&(this._target=new createjs.Point(b._asset.x+26.25,b._asset.y+51)),this._plants[this._hidingSpot].seahorse(this),this._source=this._position,this._frames=0,this._right=this._source.x<this._target.x,this._hidingSpot=(this._hidingSpot+1)%this._plants.length}else this._enabled=!0,this._target=null}},i.distance=function(a,b){var c=0,d=0;return null!==b&&(c=b.x-a.x,c*=c,d=b.y-a.y,d*=d),Math.sqrt(c+d)},i.pushPlant=function(a){this._plants.push(a)},i.find=function(){this._isRollover=!0,this.action()},namespace("myFishTank").Seahorse=h}(),function(){var a=include("myFishTank.SimpleFish"),b=include("myFishTank.BubbleEvent"),c=1.6,d=66,e=-12,f=220,g=320,h=function(b,h,i){a.call(this,h,i,b,c,new createjs.Point(d,e),f,g),this._faster=0,this._fastClick=!1,this.framesLoaded=!0,this._mouthOffsetXRight=138,this._mouthOffsetXLeft=-1,this._mouthOffsetYRight=-52,this._mouthOffsetYLeft=-52},i=extend(h,a);i.action=function(){2===this._faster?this._faster=0:this._faster++,this._speed=c+6*this._faster,0===this._faster?(this.framesLoaded=!1,this._right?(this._asset.gotoAndStop("slowdown_right"),this.playInstanceAnimation(this._asset.instance_3,{anim:"skidstop"},function(){this.framesLoaded=!0}.bind(this))):(this._asset.gotoAndStop("slowdown_left"),this.playInstanceAnimation(this._asset.instance_3,{anim:"skidstop"},function(){this.framesLoaded=!0}.bind(this))),springroll.Sound.instance.play("Tiger_Cooldown")):(this._source=this._position,this._frames=0,springroll.Sound.instance.play("Tiger_Dash",this.sfxComplete.bind(this))),new springroll.DelayedCall(this.revert.bind(this),1e4)},i.sfxComplete=function(){null!==this._firstClick[app._daniel.DIALOG_FAST]&&this._firstClick[app._daniel.DIALOG_FAST]?this._fastClick||2!=this._faster?app._daniel.playGiggle():this._fastClick=app._daniel.playDialog(app._daniel.DIALOG_ENERGY):this._firstClick[app._daniel.DIALOG_FAST]=app._daniel.playDialog(app._daniel.DIALOG_FAST)},i.revert=function(){this._faster>0&&(this._faster=0,this._speed=c,this.framesLoaded=!1,this._right?(this._asset.gotoAndStop("slowdown_right"),this.playInstanceAnimation(this._asset.instance_3,{anim:"skidstop"},function(){this.framesLoaded=!0}.bind(this))):(this._asset.gotoAndStop("slowdown_left"),this.playInstanceAnimation(this._asset.instance_3,{anim:"skidstop"},function(){this.framesLoaded=!0}.bind(this))))},i.update=function(a){if(this.Update(a),("slowdown_right"===this._asset.currentLabel||"slowdown_left"===this._asset.currentLabel||"antic_right"===this._asset.currentLabel||"antic_left"===this._asset.currentLabel)&&this.framesLoaded)switch(this._asset.currentLabel){case"slowdown_right":this._holder.dispatchEvent(new b(this._holder.x+d,this._holder.y-e)),app._daniel.playGiggle(),this._asset.gotoAndStop("neutral_right"),this._target=null;break;case"antic_right":this._asset.gotoAndStop("neutral_right"),this._target=null;break;case"slowdown_left":this._holder.dispatchEvent(new b(this._holder.x-d,this._holder.y-e)),app._daniel.playGiggle(),this._asset.gotoAndStop("neutral_left"),this._target=null;break;case"antic_left":this._asset.gotoAndStop("neutral_left"),this._target=null}},namespace("myFishTank").TigerFish=h}(),function(){var a=include("myFishTank.SimpleFish"),b=1.1,c=100,d=-10,e=160,f=500,g=function(g,h,i){a.call(this,h,i,g,b,new createjs.Point(c,d),e,f),this.framesLoaded=!0,this._mouthOffsetXRight=210,this._mouthOffsetXLeft=12,this._mouthOffsetYRight=-66,this._mouthOffsetYLeft=-66,this._revert=0},h=extend(g,a);h.action=function(){switch(this._asset.currentLabel){case"neutral_left":this.framesLoaded=!1,this._asset.gotoAndStop("special_in_left"),this.playInstanceAnimation(this._asset.instance_2,{anim:"flip"},function(){this.framesLoaded=!0}.bind(this)),springroll.Sound.instance.play("Trigger_flip");break;case"neutral_right":this.framesLoaded=!1,this._asset.gotoAndStop("special_in_right"),this.playInstanceAnimation(this._asset.instance_2,{anim:"flip"},function(){this.framesLoaded=!0}.bind(this)),springroll.Sound.instance.play("Trigger_flip");break;case"special_left_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_left"),this.playInstanceAnimation(this._asset.instance_4,{anim:"flipup"},function(){this.framesLoaded=!0}.bind(this)),springroll.Sound.instance.play("Trigger_flop");break;case"special_right_neutral":this.framesLoaded=!1,this._asset.gotoAndStop("special_out_right"),this.playInstanceAnimation(this._asset.instance_4,{anim:"flipup"},function(){this.framesLoaded=!0}.bind(this)),springroll.Sound.instance.play("Trigger_flop")}},h.revert=function(){switch(this._asset.currentLabel){case"special_left_neutral":case"special_right_neutral":this._right?(this.framesLoaded=!1,this._asset.gotoAndStop("special_out_right"),this.playInstanceAnimation(this._asset.instance_4,{anim:"flipup"},function(){this.framesLoaded=!0,this._revert=0}.bind(this))):(this.framesLoaded=!1,this._asset.gotoAndStop("special_out_left"),this.playInstanceAnimation(this._asset.instance_4,{anim:"flipup"},function(){this.framesLoaded=!0,this._revert=0}.bind(this)))}},h.update=function(a){if(this.Update(a),("special_in"===this._asset.currentLabel.substr(0,10)||"special_out"===this._asset.currentLabel.substr(0,11)||"special_left_to_right_neutral"===this._asset.currentLabel||"special_right_to_left_neutral"===this._asset.currentLabel)&&this.framesLoaded)switch(this._asset.currentLabel){case"special_in_left":this.playDialogOnce(app._daniel.DIALOG_TRIGGER,"playGiggle"),this._asset.gotoAndStop("special_left_neutral");break;case"special_right_to_left_neutral":this._asset.gotoAndStop("special_left_neutral");break;case"special_in_right":this.playDialogOnce(app._daniel.DIALOG_TRIGGER,"playGiggle"),this._asset.gotoAndStop("special_right_neutral");break;case"special_left_to_right_neutral":this._asset.gotoAndStop("special_right_neutral");break;case"special_out_left":this.playDialogOnce(app._daniel.DIALOG_TRIGGER_UP,"playGiggle"),this._asset.gotoAndStop("neutral_left");break;case"special_out_right":this.playDialogOnce(app._daniel.DIALOG_TRIGGER_UP,"playGiggle"),this._asset.gotoAndStop("neutral_right")}("special_left_neutral"===this._asset.currentLabel||"special_right_neutral"===this._asset.currentLabel)&&(this._position=this.interpolate(this._target,this._source,Math.min(1,this._frames*this._speed/this.distance(this._target,this._source))),this._right&&"special_left_neutral"===this._asset.currentLabel?(this.framesLoaded=!1,this._asset.gotoAndStop("special_left_to_right_neutral"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this.framesLoaded=!0}.bind(this)),app._daniel.playGiggle()):this._right||"special_right_neutral"!=this._asset.currentLabel||(this.framesLoaded=!1,this._asset.gotoAndStop("special_right_to_left_neutral"),this.playInstanceAnimation(this._asset.instance_1,{anim:"turn"},function(){this.framesLoaded=!0}.bind(this)),app._daniel.playGiggle()),this._frames++,this._revert++,this._revert>409&&this.revert())},namespace("myFishTank").TriggerFish=g}(),function(){function a(a,b){a.scaleX=b||app.UPRES_SCALE,a.scaleY=b||app.UPRES_SCALE}function b(a){a.x=a.x*app.UPRES_SCALE+214/(2+app.UPRES_SCALE),a.y*=app.UPRES_SCALE}var c=include("springroll.easeljs.BasePanel"),d=include("createjs.Bitmap"),e=include("springroll.easeljs.BitmapMovieClip"),f=function(){c.call(this),this._house=null,app.TANK_WIDTH=1357,app.TANK_HEIGHT=572},g=(c.prototype,extend(f,c));g.setup=function(){this.regX=832,this._tankCanvas=new createjs.Container,this._tankCanvas.setBounds(10,35,app.TANK_WIDTH,app.TANK_HEIGHT),this._tankCanvas.x=64,this.scalingContainer=this._tankCanvas,this.GameBackground=new d(images.GameBackground),this.GameBackground.name="GameBackground",a(this.GameBackground),this.addChild(this.GameBackground),this.Aquarium_Daniel_small=new Daniel.Aquarium_Daniel_small,this.Aquarium_Daniel_small.y=0,this.Aquarium_Daniel_small.x=120,this.Aquarium_Daniel_small.mouseEnabled=!1,this.addChild(this.Aquarium_Daniel_small),this.Aquarium_Daniel_small.daniel_look.Daniel_Head.stop(),a(this.Aquarium_Daniel_small),this.tank_back=new d(images.tank_back),this.tank_back.y=3,a(this.tank_back),this.tank_back.mouseEnabled=!1,this.tank_back.name="tank_back",this.addChild(this.tank_back),this.addChild(this._tankCanvas),this.plantA=app.getCache("PlantA"),this.plantA.name="leftPlant",this.plantA.x=150,this.plantA.y=60,this.plantA.scaleX=-1.1,this.plantA.scaleY=1.1,b(this.plantA),this.plantA1=e.clone(this.plantA),this.plantA1.name="leftPlant",this.plantA1.x=12,this.plantA1.y=20,a(this.plantA1,1.5),b(this.plantA1),this.plantB=app.getCache("PlantB"),this.plantB.name="rightPlant",this.plantB.x=803,this.plantB.y=177,this.plantB.scaleX=1.1,this.plantB.scaleY=1.1,b(this.plantB),this.plantB.y+=50,this.plantB1=e.clone(this.plantB),this.plantB1.name="rightPlant",this.plantB1.x=735,this.plantB1.y=185,this.plantB1.scaleX=1.4,this.plantB1.scaleY=1.4,b(this.plantB1),this.plantB1.x-=20,this.tank_glass=new createjs.Shape,this.tank_glass.graphics.beginFill("#99ccff").dr(0,0,1422,569),this.tank_glass.alpha=.1,this.tank_glass.x=58,this.tank_glass.y=60,this.tank_glass.name="tank_glass",this.foodData=[],this.foodData.push(images.FishTank_Food_PelletA),this.foodData.push(images.FishTank_Food_PelletB),this.foodData.push(images.FishTank_Food_PelletC),this.foodData.push(images.FishTank_Food_PelletD),this.FoodCan=new d(images.FishTank_Food_Can),this.FoodCan.mouseEnabled=!1,this.FoodCan.alpha=.1;var c=app.getAnimationLib("Seahorse");this.Seahorse=new c.Seahorse_ANIM,this.Seahorse.scaleX=this.Seahorse.scaleY=1.56,c=app.getAnimationLib("TigerFish"),this.TigerFish=new c.TigerFish_ANIM,this.TigerFish.scaleX=this.TigerFish.scaleY=.29,c=app.getAnimationLib("TriggerFish"),this.TriggerFish=new c.TriggerFish_ANIM,this.TriggerFish.scaleX=this.TriggerFish.scaleY=.38,this.TriggerFish.framerate=24,c=app.getAnimationLib("Pufferfish"),this.Pufferfish=new c.PufferFish_ANIM,this.Pufferfish.scaleX=this.Pufferfish.scaleY=2,c=app.getAnimationLib("HermitCrab"),this.HermitCrab=new c.HermitCrab_ANIM,this.HermitCrab.set({scaleX:1.56,scaleY:1.56}),this.HermitCrab.name="Crab",this.CaveObject=new libCave.FishTank_CaveObject,this.tank_top=new d(images.tank_top),this.tank_top.y=22,a(this.tank_top),b(this.tank_top),this.tank_top.x-=5,this.tank_top.mouseEnabled=!1,this._onResize(this.app.display.width,this.app.display.height),this.onResize=this._onResize.bind(this),this.app.on("resize",this.onResize)},g.LoadSchoolFish=function(){var a=app.getAnimationLib("SchoolFish");this.SchoolFish=new a.SchoolFish},g.LoadGobiFish=function(){var b=app.getAnimationLib("GobyFish1");this.GobyFish01=new b.Goby_ANIM,b=app.getAnimationLib("GobyFish2"),this.GobyFISH02=new b.Goby_ANIM,b=app.getAnimationLib("GobyFish3"),this.GobyFISH03=new b.Goby_ANIM,a(this.GobyFish01),a(this.GobyFISH02),a(this.GobyFISH03)},g.LoadHouses=function(b){var c=null;switch(b){case 0:this.DanielHouse=new libDanielHouse.Object_DanielHouse,this.DanielHouse.name="Daniel",this.DanielHouse.stop(),c=this.DanielHouse;break;case 1:this.MuseumGoRound=new libMuseum.Object_MuseumGoRound,this.MuseumGoRound.name="Museum",this.MuseumGoRound.stop(),c=this.MuseumGoRound;break;case 2:this.TreeHouse=new libTree.Object_TreeHouse,this.TreeHouse.name="Tree",this.TreeHouse.stop(),c=this.TreeHouse;break;case 3:this.Castle=new libCastle.Object_Castle,this.Castle.name="Castle",this.Castle.stop(),c=this.Castle}return a(c),c},g._onResize=function(a,b){this.x=a/2;var c=a/1500;if(1500>a){this.scaleX=c,this.scaleY=c;var d=this.GameBackground.getTransformedBounds().height*c,e=b-d;this.GameBackground.y=.7*-e/c,this.y=.7*e}else this.scaleX=this.scaleY=1,this.y=0,this.GameBackground.y=0},g.teardown=function(){this.app.off("resize",this.onResize)},namespace("myFishTank").GamePanel=f}(),function(){var a=include("springroll.easeljs.BasePanel"),b=include("createjs.Bitmap"),c=include("springroll.easeljs.SoundButton"),d=function(){a.call(this)},e=a.prototype,f=extend(d,a);f.setup=function(){this.scalingContainer=this,this.background=new b(images.TitleBackground),this.addChildAt(this.background,0),this.playButton=new c(images.PlayButton),this.playButton.x=832,this.playButton.y=600;var a=this.playButton.getBounds();this.playButton.set({regX:a.width/2,regY:a.height/2}),this.addChild(this.playButton),this._onResize(this.app.display.width,this.app.display.height),this.onResize=this._onResize.bind(this),this.app.on("resize",this.onResize)},f.teardown=function(){this.app.off("resize",this.onResize),e.teardown.call(this),this.background=null,this.playButton=null},f._onResize=function(a,b){this.x=-(this.app.options.maxWidth-a)/2},namespace("myFishTank").TitlePanel=d}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("myFishTank.GamePanel"),c=include("myFishTank.House"),d=include("myFishTank.Cave"),e=include("myFishTank.Daniel"),g=include("myFishTank.HermitCrab"),h=include("myFishTank.TriggerFish"),j=include("myFishTank.Seahorse"),k=include("myFishTank.TigerFish"),l=include("myFishTank.SchoolFish"),m=include("myFishTank.PufferFish"),n=include("myFishTank.GobyFish"),o=include("myFishTank.FishFood"),p=include("myFishTank.BubbleEvent"),q=include("myFishTank.BubbleMachine"),r=function(c){a.call(this,new b,c),this.initSpritesheets=this._initSpritesheets.bind(this),this.on("loaded",this.initSpritesheets,101),this.sound=this.game.sound,this.onPlay=this.onPlay.bind(this),this._fish=[],this.swap=!1},s=extend(r,a);s._initSpritesheets=function(a){for(var b in a)app.makeSpritesheetForAnimation(b,a[b])},s.onAssetsLoaded=function(){app.sound.preload("crab_hide"),this.initGame()},s.initGame=function(){switch(app.container.send("gameplay_started"),app.pan=this.panel,app._daniel=new e(this.panel.Aquarium_Daniel_small),app.panel=this.panel._tankCanvas,app.tankShape=new createjs.Shape,app.tankShape.graphics.beginFill("#ff0000").drawRect(70,55,app.TANK_WIDTH+42,app.TANK_HEIGHT),this._fish=[],this._seahorse=new j(this.panel.Seahorse,250*app.UPRES_SCALE,100*app.UPRES_SCALE),this._fish.push(this._seahorse),this._fish.push(new k(this.panel.TigerFish,450*app.UPRES_SCALE,200*app.UPRES_SCALE)),this._fish.push(new h(this.panel.TriggerFish,200*app.UPRES_SCALE,200*app.UPRES_SCALE)),this._fish.push(new m(this.panel.Pufferfish,300*app.UPRES_SCALE,300*app.UPRES_SCALE)),this._fish.sort(function(a,b){return a._salt-b._salt}),this.plant=new myFishTank.Plant(this.panel.plantA),this.cave=new d(this.panel.CaveObject,1e3,275),this.panel.CaveObject.addEventListener("CHANGE",this.swapFish.bind(this)),this.panel.CaveObject.addEventListener("COMPLETE",this.swapFishComplete.bind(this)),this.panel.CaveObject.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this)),this.house_clip=null,app.house){case 0:this.house_clip=this.panel.LoadHouses(0);break;case 1:this.house_clip=this.panel.LoadHouses(1);break;case 2:this.house_clip=this.panel.LoadHouses(2);break;case 3:this.house_clip=this.panel.LoadHouses(3)}this._house=new c(this.house_clip),this.panel._tankCanvas.addChild(this.house_clip),this.house_clip.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this)),this._fishCanvas=new createjs.Container,this._fishCanvas.setBounds(0,0,app.TANK_WIDTH,app.TANK_HEIGHT),this.panel._tankCanvas.addChild(this._fishCanvas),this._fishCanvas.mask=app.tankShape,this.plant1=new myFishTank.Plant(this.panel.plantA1),this.plant2=new myFishTank.Plant(this.panel.plantB),this.plant3=new myFishTank.Plant(this.panel.plantB1),this._seahorse.pushPlant(this.plant1),this._seahorse.pushPlant(this.plant3),this._seahorse.pushPlant(this.plant2);for(var a=0;a<this._fish.length;a++){var b=this._fish[a]._holder;b.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this))}for(this._fishIdx=0;this._fishIdx<3&&this._fishIdx<this._fish.length;this._fishIdx++){var f=this._fish[this._fishIdx]._holder;f.mask=app.tankShape,this._fishCanvas.addChildAt(f,0)}this._crab=new g(this.panel.HermitCrab,450,625),this.panel._tankCanvas.addChild(this._crab._holder),this._crab._holder.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this)),this._foodCanvas=new createjs.Shape,this._food=new o(this._foodCanvas.graphics,this.panel.foodData),this.panel._tankCanvas.addChild(this._foodCanvas),this.panel.tank_glass.mouseEnabled=!1,this.panel.tank_top.mouseEnabled=!1,this.panel._tankCanvas.addChild(this.panel.tank_glass),this.panel._tankCanvas.addChild(this.panel.tank_top),springroll.Application.instance.on("update",this.update.bind(this)),this._foodCan=this.panel.FoodCan,this._foodCan.alpha=0,this.panel.addChild(this._foodCan),this._bubbleMachineFG=new q},s.assetLoaded=function(a){for(var b=Object.keys(a),c=0;c<b.length;c++)window.images[b[c]]=a[b[c]]},s.enterDone=function(){this.stage=this.app.display.stage,this.stage.mouseEnabled=!0,this.panel.GameBackground.on("click",this.addFood.bind(this)),this.loadGobiFish(0)},s.loadGobiFish=function(a){switch(a){case 0:app.load(app.getAnimationManifest("SchoolFish"),this.gobiFishAssetLoaded.bind(this,1));break;case 1:app.load(app.getAnimationManifest("GobyFish1"),this.gobiFishAssetLoaded.bind(this,2));break;case 2:app.load(app.getAnimationManifest("GobyFish2"),this.gobiFishAssetLoaded.bind(this,3));break;case 3:app.load(app.getAnimationManifest("GobyFish3"),this.gobiFishAssetLoaded.bind(this,4))}},s.gobiFishAssetLoaded=function(a,b){if(this._initSpritesheets(b),1===a){this.panel.LoadSchoolFish(),this._schoolFish=new l(this.panel.SchoolFish,450,200),this._fish.push(this._schoolFish);var c=this._fish[4]._holder;c.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this)),this.loadGobiFish(a)}else if(4===a){this.panel.LoadGobiFish(),this._fish.push(new n(this.panel.GobyFish01,this.panel.GobyFISH02,this.panel.GobyFISH03,250,100));var d=this._fish[this._fish.length-1]._holder;d.addEventListener(p.BUBBLE_SPAWN,this.bubbleSpawnFG.bind(this))}else this.loadGobiFish(a)},s.addFood=function(a){if(a.target===this.panel.GameBackground)if(this._schoolFish._following)this._schoolFish.revert();else if(this._foodCan.alpha<=0){this.panel.GameBackground.removeAllEventListeners();var b=this.panel.globalToLocal(a.stageX,a.stageY);this._food.add(b.x),this._foodCan.alpha=3,this._foodCan.rotation=0,this._foodCan.x=Math.min(Math.max(300,b.x),app.TANK_WIDTH-300)}},s.update=function(a){if(app.gamePaused===!1){var b=1,c=this.panel.globalToLocal(app.display.stage.mouseX,app.display.stage.mouseY);for(this._foodCan.alpha>0?(this._foodCan.alpha-=.2,this._foodCan.y=5*Math.sin(3*this._foodCan.alpha)):(this._foodCan.x=Math.min(Math.max(101,c.x),app.TANK_WIDTH-101),this.panel.GameBackground.hasEventListener("click")||this.panel.GameBackground.addEventListener("click",this.addFood.bind(this))),this._food.update(),f=0;f<this._fish.length;f++)this._fish[f]._holder.parent===this._fishCanvas&&this._fish[f].update(this._food);if(this._crab.update(this._food),this.cave.update(),this._bubbleMachineFG.update(),this._house.update(),a>60)for(b=Math.ceil(a/50),i=0;i<b;i++)new springroll.DelayedCall(this.update2.bind(this),25*b)}},s.update2=function(){var a=this.panel.globalToLocal(app.display.stage.mouseX,app.display.stage.mouseY);for(this._foodCan.alpha>0?(this._foodCan.alpha-=.2,this._foodCan.y=5*Math.sin(3*this._foodCan.alpha)):this._foodCan.x=Math.min(Math.max(101,a.x),app.TANK_WIDTH-101),this._food.update(),f=0;f<this._fish.length;f++)this._fish[f]._holder.parent===this._fishCanvas&&this._fish[f].update(this._food);this._crab.update(this._food),this.cave.update(),this._bubbleMachineFG.update()},s.randomNum=function(a,b){var c=Math.floor(Math.random()*(b-a+1))+a;return c},s.swapFishComplete=function(){var a=this._fish[this._fishIdx];this._fishCanvas.addChildAt(a._holder,0),this._fishIdx=(this._fishIdx+1)%this._fish.length,this.swap=!1},s.swapFish=function(){this.swap===!1&&(this.swap=!0,this.cave.swapFish(this._fish[this._fishIdx],this._fish[(this._fishIdx+this._fish.length-3)%this._fish.length]))},s.bubbleSpawnFG=function(a){this._bubbleMachineFG.spawnBubble(a.x,a.y)},s.onPlay=function(){},s.exit=function(){},namespace("myFishTank").GameState=r}(),function(){var a=include("springroll.easeljs.BaseState"),b=include("myFishTank.TitlePanel"),c=function(c){a.call(this,new b,c),this.sound=this.game.sound,this.onPlay=this.onPlay.bind(this)},d=extend(c,a);d.enterDone=function(){this.panel.playButton.addEventListener("click",this.onPlay),this.panel.background.addEventListener("buttonPress",this.onPlay),app.isIOS?this.panel.background.addEventListener("click",function(){this.panel.background.removeAllEventListeners(),this.voPlayer.play("game_title")}.bind(this)):this.voPlayer.play("game_title")},d.onPlay=function(){this.nextState()},d.exit=function(){this.sound.stop("game_title"),this.panel.background.cursor=null,this.panel.background.removeEventListener("click",this.onPlay),this.panel.playButton.removeEventListener("click",this.onPlay)},namespace("myFishTank").TitleState=c}(),createjs.Sprite.prototype.initialize=createjs.Sprite,createjs.MovieClip.prototype.doesHaveLabel=function(a){var b=this.labels;for(var c in b)if(b[c].label===a)return!0;return!1},function(){function a(a,b){window.images[b.id]=a}function b(a){function b(a,b,d){c[b]=d}var c={};return window.location.href.replace(new RegExp("[?&]+([^=&]+)=([^&]*)","gi"),b),a in c?c[a]:null}function c(a){return m(a).getLibrary()}function d(a){for(var b=c(a).properties.manifest,d=0,e=b.length;e>d;d++)b[d].src=b[d].src.replace("images/","assets/sprites/");return b}function e(a,b){if(-1!==a.indexOf("_atlas_")){var d=a.replace("_atlas_",""),e=c(d).ssMetadata[0];e.images=[b],m(d).getSpriteSheet()[a]=new createjs.SpriteSheet(e)}}var f=include("myFishTank.TitleState"),g=include("myFishTank.GameState"),h=include("springroll.Application"),i=include("lib.Transition"),j=include("springroll.easeljs.EaselJSDisplay"),k=new i;k.framerate=24;var l=new h({fps:30,name:"myFishTank",state:"true"===b("playathome")?"game":"title",canvasId:"stage",configPath:"assets/config/config.json",manifestsPath:"assets/config/manifests.json",captionsPath:"assets/config/captions.json",captions:"captions",display:j,maxWidth:1664,maxHeight:768,preload:[{src:"assets/images/star1shape__daniel_outroALT.png",id:"star1shape__daniel_outroALT1",complete:a},{src:"assets/images/star2shape_daniel_outroALT.png",id:"star2shape_daniel_outroALT1",complete:a}]}),m=function(){var a={};if(window.AdobeAn&&window.AdobeAn.compositions){var b=window.AdobeAn.compositions;for(var c in b){var d=b[c].getLibrary().properties.manifest[0].id.replace("_atlas_","");a[d]=c}}return function(b){if(!a[b])throw new Error("No animation composition matching "+b);return window.AdobeAn.compositions[a[b]]}}();l.getAnimationCompByName=m,l.getQueryParam=b,l.getAnimationLib=c,l.getAnimationManifest=d,l.makeSpritesheetForAnimation=e,l.on("init",function(){var a=new lib.Transition;a.set({scaleX:1.56,scaleY:1.56}),this.options.transition=a,l.gamePaused=!1;var b=this.config.assets,c=this.config.sprites,e=this.manifests,h=[];h.push(l.manifests.HouseObject_DanielHouse),h.push(l.manifests.HouseObject_MuseumGoRound),h.push(l.manifests.HouseObject_TreeHouse),h.push(l.manifests.HouseObject_Castle),l.house=Math.floor(4*Math.random()),this.states={title:new f({next:"game",preload:b.title}),game:new g({next:"title",preload:[].concat(c.PlantA,c.PlantB,b.game,e.Aquarium_Daniel_small,h[l.house],e.FishTank_CaveObject,d("HermitCrab"),d("TriggerFish"),d("Seahorse"),d("TigerFish"),d("Pufferfish"))})}}),l.on("pause",function(){l.gamePaused=!0}),l.on("resumed",function(){l.gamePaused=!1}),window.app=l,l.UPRES_SCALE=768/490,window.playSound=function(){}}();