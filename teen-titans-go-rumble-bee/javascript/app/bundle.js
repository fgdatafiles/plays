!function(e){function t(t){for(var o,r,s=t[0],l=t[1],c=t[2],p=0,d=[];p<s.length;p++)r=s[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);for(u&&u(t);d.length;)d.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(o=!1)}o&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},i={app:0},a=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./dist/javascript/app/";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;a.push([123,"vendor"]),n()}({122:
/*!******************************************************************!*\
  !*** ./src/javascript/game/utils/webfontloader/webfontloader.js ***!
  \******************************************************************/
/*! no static exports found */
/*! exports used: load */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var o;!function(){function i(e,t,n){return e.call.apply(e.bind,arguments)}function a(e,t,n){if(!e)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function r(e,t,n){return(r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:a).apply(null,arguments)}var s=Date.now||function(){return+new Date};function l(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var c=!!window.FontFace;function u(e,t,n,o){if(t=e.c.createElement(t),n)for(var i in n)n.hasOwnProperty(i)&&("style"==i?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return o&&t.appendChild(e.c.createTextNode(o)),t}function p(e,t,n){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(n,e.lastChild)}function d(e){e.parentNode&&e.parentNode.removeChild(e)}function f(e,t,n){t=t||[],n=n||[];for(var o=e.className.split(/\s+/),i=0;i<t.length;i+=1){for(var a=!1,r=0;r<o.length;r+=1)if(t[i]===o[r]){a=!0;break}a||o.push(t[i])}for(t=[],i=0;i<o.length;i+=1){for(a=!1,r=0;r<n.length;r+=1)if(o[i]===n[r]){a=!0;break}a||t.push(o[i])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function h(e,t){for(var n=e.className.split(/\s+/),o=0,i=n.length;o<i;o++)if(n[o]==t)return!0;return!1}function g(e,t,n){function o(){s&&i&&a&&(s(r),s=null)}t=u(e,"link",{rel:"stylesheet",href:t,media:"all"});var i=!1,a=!0,r=null,s=n||null;c?(t.onload=function(){i=!0,o()},t.onerror=function(){i=!0,r=Error("Stylesheet failed to load"),o()}):setTimeout((function(){i=!0,o()}),0),p(e,"head",t)}function m(e,t,n,o){var i=e.c.getElementsByTagName("head")[0];if(i){var a=u(e,"script",{src:t}),r=!1;return a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,n&&n(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&i.removeChild(a))},i.appendChild(a),setTimeout((function(){r||(r=!0,n&&n(Error("Script load timeout")))}),o||5e3),a}return null}function y(){this.a=0,this.c=null}function _(e){return e.a++,function(){e.a--,b(e)}}function v(e,t){e.c=t,b(e)}function b(e){0==e.a&&e.c&&(e.c(),e.c=null)}function w(e){this.a=e||"-"}function T(e,t){this.c=e,this.f=4,this.a="n";var n=(t||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function E(e){var t=[];e=e.split(/,\s*/);for(var n=0;n<e.length;n++){var o=e[n].replace(/['"]/g,"");-1!=o.indexOf(" ")||/^\d/.test(o)?t.push("'"+o+"'"):t.push(o)}return t.join(",")}function S(e){return e.a+e.f}function A(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function O(e){var t=4,n="n",o=null;return e&&((o=e.match(/(normal|oblique|italic)/i))&&o[1]&&(n=o[1].substr(0,1).toLowerCase()),(o=e.match(/([1-9]00|normal|bold)/i))&&o[1]&&(/bold/i.test(o[1])?t=7:/[1-9]00/.test(o[1])&&(t=parseInt(o[1].substr(0,1),10)))),n+t}function I(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new w("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function x(e){if(e.g){var t=h(e.f,e.a.c("wf","active")),n=[],o=[e.a.c("wf","loading")];t||n.push(e.a.c("wf","inactive")),f(e.f,n,o)}k(e,"inactive")}function k(e,t,n){e.j&&e.h[t]&&(n?e.h[t](n.c,S(n)):e.h[t]())}function C(){this.c={}}function R(e,t){this.c=e,this.f=t,this.a=u(this.c,"span",{"aria-hidden":"true"},this.f)}function P(e){p(e.c,"body",e.a)}function N(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+E(e.c)+";font-style:"+A(e)+";font-weight:"+e.f+"00;"}function L(e,t,n,o,i,a){this.g=e,this.j=t,this.a=o,this.c=n,this.f=i||3e3,this.h=a||void 0}function D(e,t,n,o,i,a,r){this.v=e,this.B=t,this.c=n,this.a=o,this.s=r||"BESbswy",this.f={},this.w=i||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new R(this.c,this.s),this.h=new R(this.c,this.s),this.j=new R(this.c,this.s),this.m=new R(this.c,this.s),e=N(e=new T(this.a.c+",serif",S(this.a))),this.g.a.style.cssText=e,e=N(e=new T(this.a.c+",sans-serif",S(this.a))),this.h.a.style.cssText=e,e=N(e=new T("serif",S(this.a))),this.j.a.style.cssText=e,e=N(e=new T("sans-serif",S(this.a))),this.m.a.style.cssText=e,P(this.g),P(this.h),P(this.j),P(this.m)}w.prototype.c=function(e){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},L.prototype.start=function(){var e=this.c.o.document,t=this,n=s(),o=new Promise((function(o,i){!function a(){s()-n>=t.f?i():e.fonts.load(function(e){return A(e)+" "+e.f+"00 300px "+E(e.c)}(t.a),t.h).then((function(e){1<=e.length?o():setTimeout(a,25)}),(function(){i()}))}()})),i=null,a=new Promise((function(e,n){i=setTimeout(n,t.f)}));Promise.race([a,o]).then((function(){i&&(clearTimeout(i),i=null),t.g(t.a)}),(function(){t.j(t.a)}))};var F={D:"serif",C:"sans-serif"},M=null;function H(){if(null===M){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);M=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return M}function B(e,t,n){for(var o in F)if(F.hasOwnProperty(o)&&t===e.f[F[o]]&&n===e.f[F[o]])return!0;return!1}function j(e){var t,n=e.g.a.offsetWidth,o=e.h.a.offsetWidth;(t=n===e.f.serif&&o===e.f["sans-serif"])||(t=H()&&B(e,n,o)),t?s()-e.A>=e.w?H()&&B(e,n,o)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?G(e,e.v):G(e,e.B):function(e){setTimeout(r((function(){j(this)}),e),50)}(e):G(e,e.v)}function G(e,t){setTimeout(r((function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),t(this.a)}),e),0)}function W(e,t,n){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=n}D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),j(this)};var U=null;function X(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&f(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),k(e,"active")):x(e.a))}function Y(e){this.j=e,this.a=new C,this.h=0,this.f=this.g=!0}function V(e,t,n,o,i){var a=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=i||null,s=o||{};if(0===n.length&&a)x(t.a);else{t.f+=n.length,a&&(t.j=a);var l,c=[];for(l=0;l<n.length;l++){var u=n[l],p=s[u.c],d=t.a,h=u;if(d.g&&f(d.f,[d.a.c("wf",h.c,S(h).toString(),"loading")]),k(d,"fontloading",h),d=null,null===U)if(window.FontFace){h=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);U=h?42<parseInt(h[1],10):!g}else U=!1;d=U?new L(r(t.g,t),r(t.h,t),t.c,u,t.s,p):new D(r(t.g,t),r(t.h,t),t.c,u,t.s,e,p),c.push(d)}for(l=0;l<c.length;l++)c[l].start()}}),0)}function z(e,t){this.c=e,this.a=t}function q(e,t){this.c=e,this.a=t}function Z(e,t){this.c=e||K,this.a=[],this.f=[],this.g=t||""}W.prototype.g=function(e){var t=this.a;t.g&&f(t.f,[t.a.c("wf",e.c,S(e).toString(),"active")],[t.a.c("wf",e.c,S(e).toString(),"loading"),t.a.c("wf",e.c,S(e).toString(),"inactive")]),k(t,"fontactive",e),this.m=!0,X(this)},W.prototype.h=function(e){var t=this.a;if(t.g){var n=h(t.f,t.a.c("wf",e.c,S(e).toString(),"active")),o=[],i=[t.a.c("wf",e.c,S(e).toString(),"loading")];n||o.push(t.a.c("wf",e.c,S(e).toString(),"inactive")),f(t.f,o,i)}k(t,"fontinactive",e),X(this)},Y.prototype.load=function(e){this.c=new l(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,n){var o=[],i=n.timeout;!function(e){e.g&&f(e.f,[e.a.c("wf","loading")]),k(e,"loading")}(t);o=function(e,t,n){var o,i=[];for(o in t)if(t.hasOwnProperty(o)){var a=e.c[o];a&&i.push(a(t[o],n))}return i}(e.a,n,e.c);var a=new W(e.c,t,i);for(e.h=o.length,t=0,n=o.length;t<n;t++)o[t].load((function(t,n,o){V(e,a,t,n,o)}))}(this,new I(this.c,e),e)},z.prototype.load=function(e){var t=this,n=t.a.projectId,o=t.a.version;if(n){var i=t.c.o;m(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+n+".js"+(o?"?v="+o:""),(function(o){o?e([]):(i["__MonotypeConfiguration__"+n]=function(){return t.a},function t(){if(i["__mti_fntLst"+n]){var o,a=i["__mti_fntLst"+n](),r=[];if(a)for(var s=0;s<a.length;s++){var l=a[s].fontfamily;null!=a[s].fontStyle&&null!=a[s].fontWeight?(o=a[s].fontStyle+a[s].fontWeight,r.push(new T(l,o))):r.push(new T(l))}e(r)}else setTimeout((function(){t()}),50)}())})).id="__MonotypeAPIScript__"+n}else e([])},q.prototype.load=function(e){var t,n,o=this.a.urls||[],i=this.a.families||[],a=this.a.testStrings||{},r=new y;for(t=0,n=o.length;t<n;t++)g(this.c,o[t],_(r));var s=[];for(t=0,n=i.length;t<n;t++)if((o=i[t].split(":"))[1])for(var l=o[1].split(","),c=0;c<l.length;c+=1)s.push(new T(o[0],l[c]));else s.push(new T(o[0]));v(r,(function(){e(s,a)}))};var K="https://fonts.googleapis.com/css";function Q(e){this.f=e,this.a=[],this.c={}}var $={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},ee={i:"i",italic:"i",n:"n",normal:"n"},te=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ne(e,t){this.c=e,this.a=t}var oe={Arimo:!0,Cousine:!0,Tinos:!0};function ie(e,t){this.c=e,this.a=t}function ae(e,t){this.c=e,this.f=t,this.a=[]}ne.prototype.load=function(e){var t=new y,n=this.c,o=new Z(this.a.api,this.a.text),i=this.a.families;!function(e,t){for(var n=t.length,o=0;o<n;o++){var i=t[o].split(":");3==i.length&&e.f.push(i.pop());var a="";2==i.length&&""!=i[1]&&(a=":"),e.a.push(i.join(a))}}(o,i);var a=new Q(i);!function(e){for(var t=e.f.length,n=0;n<t;n++){var o=e.f[n].split(":"),i=o[0].replace(/\+/g," "),a=["n4"];if(2<=o.length){var r;if(r=[],s=o[1])for(var s,l=(s=s.split(",")).length,c=0;c<l;c++){var u;if((u=s[c]).match(/^[\w-]+$/))if(null==(d=te.exec(u.toLowerCase())))u="";else{if(u=null==(u=d[2])||""==u?"n":ee[u],null==(d=d[1])||""==d)d="4";else var p=J[d],d=p||(isNaN(d)?"4":d.substr(0,1));u=[u,d].join("")}else u="";u&&r.push(u)}0<r.length&&(a=r),3==o.length&&(r=[],0<(o=(o=o[2])?o.split(","):r).length&&(o=$[o[0]])&&(e.c[i]=o))}for(e.c[i]||(o=$[i])&&(e.c[i]=o),o=0;o<a.length;o+=1)e.a.push(new T(i,a[o]))}}(a),g(n,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,n=[],o=0;o<t;o++)n.push(e.a[o].replace(/ /g,"+"));return t=e.c+"?family="+n.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(o),_(t)),v(t,(function(){e(a.a,a.c,oe)}))},ie.prototype.load=function(e){var t=this.a.id,n=this.c.o;t?m(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){t=n.Typekit.config.fn;for(var o=[],i=0;i<t.length;i+=2)for(var a=t[i],r=t[i+1],s=0;s<r.length;s++)o.push(new T(a,r[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(o)}}),2e3):e([])},ae.prototype.load=function(e){var t=this.f.id,n=this.c.o,o=this;t?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[t]=function(t,n){for(var i=0,a=n.fonts.length;i<a;++i){var r=n.fonts[i];o.a.push(new T(r.name,O("font-weight:"+r.weight+";font-style:"+r.style)))}e(o.a)},m(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var re=new Y(window);re.a.c.custom=function(e,t){return new q(t,e)},re.a.c.fontdeck=function(e,t){return new ae(t,e)},re.a.c.monotype=function(e,t){return new z(t,e)},re.a.c.typekit=function(e,t){return new ie(t,e)},re.a.c.google=function(e,t){return new ne(t,e)};var se={load:r(re.load,re)};void 0===(o=function(){return se}.call(t,n,t,e))||(e.exports=o)}()},123:
/*!************************************************************!*\
  !*** multi @babel/polyfill ./src/javascript/game/index.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){n(/*! @babel/polyfill */124),e.exports=n(/*! /Users/RichardW/.jenkins/workspace/CNArcade/rumble_bee/dev/src/javascript/game/index.js */311)},28:
/*!*********************************************!*\
  !*** ./src/javascript/game/utils/Howler.js ***!
  \*********************************************/
/*! no static exports found */
/*! exports used: Howl, Howler */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){(function(n){var o;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */!function(){"use strict";var i=function(){this.init()};i.prototype={init:function(){var e=this||a;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||a;if(e=parseFloat(e),t.ctx||f(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var r=t._howls[n]._soundById(o[i]);r&&r._node&&(r._node.volume=r._volume*e)}return t}return t._volume},mute:function(e){var t=this||a;t.ctx||f(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,a.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var o=t._howls[n]._getSoundIds(),i=0;i<o.length;i++){var r=t._howls[n]._soundById(o[i]);r&&r._node&&(r._node.muted=!!e||r._muted)}return t},unload:function(){for(var e=this||a,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,f()),e},codecs:function(e){return(this||a)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||a;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||a,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),o=e._navigator&&e._navigator.userAgent.match(/OPR\/([0-6].)/g),i=o&&parseInt(o[0].split("/")[1],10)<33;return e._codecs={mp3:!(i||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||a;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function t(n){for(var o=0;o<e.html5PoolSize;o++)try{var i=new Audio;i._unlocked=!0,e._releaseHtml5Audio(i)}catch(n){e.noAudio=!0}for(o=0;o<e._howls.length;o++)if(!e._howls[o]._webAudio)for(var a=e._howls[o]._getSoundIds(),r=0;r<a.length;r++){var s=e._howls[o]._soundById(a[r]);s&&s._node&&!s._node._unlocked&&(s._node._unlocked=!0,s._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0);for(var n=0;n<e._howls.length;n++)e._howls[n]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),e}},_obtainHtml5Audio:function(){var e=this||a;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||a;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&a.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){e.autoSuspend&&(e._suspendTimer=null,e.state="suspending",e.ctx.suspend().then((function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())})))}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&a.usingWebAudio)return"running"===e.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var a=new i,r=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};r.prototype={init:function(e){var t=this;return a.ctx||f(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhrWithCredentials=e.xhrWithCredentials||!1,t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=a.usingWebAudio&&!t._html5,void 0!==a.ctx&&a.ctx&&a.autoUnlock&&a._unlockAudio(),a._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&t.load(),t},load:function(){var e=null;if(a.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var t=0;t<this._src.length;t++){var n,o;if(this._format&&this._format[t])n=this._format[t];else{if("string"!=typeof(o=this._src[t])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(n=/^data:audio\/([^;,]+);/i.exec(o))||(n=/\.([^.]+)$/.exec(o.split("?",1)[0])),n&&(n=n[1].toLowerCase())}if(n||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),n&&a.codecs(n)){e=this._src[t];break}}if(e)return this._src=e,this._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new s(this),this._webAudio&&c(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,o=null;if("number"==typeof e)o=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var i=0,r=0;r<n._sounds.length;r++)n._sounds[r]._paused&&!n._sounds[r]._ended&&(i++,o=n._sounds[r]._id);1===i?e=null:o=null}}var s=o?n._soundById(o):n._inactiveSound();if(!s)return null;if(o&&!e&&(e=s._sprite||"__default"),"loaded"!==n._state){s._sprite=e,s._ended=!1;var l=s._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(o&&!s._paused)return t||n._loadQueue("play"),s._id;n._webAudio&&a._autoResume();var c=Math.max(0,s._seek>0?s._seek:n._sprite[e][0]/1e3),u=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-c),p=1e3*u/Math.abs(s._rate),d=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;s._sprite=e,s._ended=!1;var h=function(){s._paused=!1,s._seek=c,s._start=d,s._stop=f,s._loop=!(!s._loop&&!n._sprite[e][2])};if(!(c>=f)){var g=s._node;if(n._webAudio){var m=function(){n._playLock=!1,h(),n._refreshBuffer(s);var e=s._muted||n._muted?0:s._volume;g.gain.setValueAtTime(e,a.ctx.currentTime),s._playStart=a.ctx.currentTime,void 0===g.bufferSource.start?s._loop?g.bufferSource.noteGrainOn(0,c,86400):g.bufferSource.noteGrainOn(0,c,u):s._loop?g.bufferSource.start(0,c,86400):g.bufferSource.start(0,c,u),p!==1/0&&(n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),p)),t||setTimeout((function(){n._emit("play",s._id),n._loadQueue()}),0)};"running"===a.state?m():(n._playLock=!0,n.once("resume",m),n._clearTimer(s._id))}else{var y=function(){g.currentTime=c,g.muted=s._muted||n._muted||a._muted||g.muted,g.volume=s._volume*a.volume(),g.playbackRate=s._rate;try{var o=g.play();if(o&&"undefined"!=typeof Promise&&(o instanceof Promise||"function"==typeof o.then)?(n._playLock=!0,h(),o.then((function(){n._playLock=!1,g._unlocked=!0,t||(n._emit("play",s._id),n._loadQueue())})).catch((function(){n._playLock=!1,n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),s._ended=!0,s._paused=!0}))):t||(n._playLock=!1,h(),n._emit("play",s._id),n._loadQueue()),g.playbackRate=s._rate,g.paused)return void n._emit("playerror",s._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||s._loop?n._endTimers[s._id]=setTimeout(n._ended.bind(n,s),p):(n._endTimers[s._id]=function(){n._ended(s),g.removeEventListener("ended",n._endTimers[s._id],!1)},g.addEventListener("ended",n._endTimers[s._id],!1))}catch(e){n._emit("playerror",s._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===g.src&&(g.src=n._src,g.load());var _=window&&window.ejecta||!g.readyState&&a._navigator.isCocoonJS;if(g.readyState>=3||_)y();else{n._playLock=!0;g.addEventListener(a._canPlayEvent,(function e(){y(),g.removeEventListener(a._canPlayEvent,e,!1)}),!1),n._clearTimer(s._id)}}return s._id}n._ended(s)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var n=t._getSoundIds(e),o=0;o<n.length;o++){t._clearTimer(n[o]);var i=t._soundById(n[o]);if(i&&!i._paused&&(i._seek=t.seek(n[o]),i._rateSeek=0,i._paused=!0,t._stopFade(n[o]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"stop",action:function(){n.stop(e)}}),n;for(var o=n._getSoundIds(e),i=0;i<o.length;i++){n._clearTimer(o[i]);var a=n._soundById(o[i]);a&&(a._seek=a._start||0,a._rateSeek=0,a._paused=!0,a._ended=!0,n._stopFade(o[i]),a._node&&(n._webAudio?a._node.bufferSource&&(void 0===a._node.bufferSource.stop?a._node.bufferSource.noteOff(0):a._node.bufferSource.stop(0),n._cleanBuffer(a._node)):isNaN(a._node.duration)&&a._node.duration!==1/0||(a._node.currentTime=a._start||0,a._node.pause(),a._node.duration===1/0&&n._clearSound(a._node))),t||n._emit("stop",a._id))}return n},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var o=n._getSoundIds(t),i=0;i<o.length;i++){var r=n._soundById(o[i]);r&&(r._muted=e,r._interval&&n._stopFade(r._id),n._webAudio&&r._node?r._node.gain.setValueAtTime(e?0:r._volume,a.ctx.currentTime):r._node&&(r._node.muted=!!a._muted||e),n._emit("mute",r._id))}return n},volume:function(){var e,t,n,o=this,i=arguments;if(0===i.length)return o._volume;if(1===i.length||2===i.length&&void 0===i[1]){var r=o._getSoundIds(),s=r.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else i.length>=2&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?o._soundById(t):o._sounds[0])?n._volume:0;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"volume",action:function(){o.volume.apply(o,i)}}),o;void 0===t&&(o._volume=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)(n=o._soundById(t[l]))&&(n._volume=e,i[2]||o._stopFade(t[l]),o._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,a.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*a.volume()),o._emit("volume",n._id));return o},fade:function(e,t,n,o){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"fade",action:function(){i.fade(e,t,n,o)}}),i;e=parseFloat(e),t=parseFloat(t),n=parseFloat(n),i.volume(e,o);for(var r=i._getSoundIds(o),s=0;s<r.length;s++){var l=i._soundById(r[s]);if(l){if(o||i._stopFade(r[s]),i._webAudio&&!l._muted){var c=a.ctx.currentTime,u=c+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,c),l._node.gain.linearRampToValueAtTime(t,u)}i._startFadeInterval(l,e,t,n,r[s],void 0===o)}}return i},_startFadeInterval:function(e,t,n,o,i,a){var r=this,s=t,l=n-t,c=Math.abs(l/.01),u=Math.max(4,c>0?o/c:o),p=Date.now();e._fadeTo=n,e._interval=setInterval((function(){var i=(Date.now()-p)/o;p=Date.now(),s+=l*i,s=Math.max(0,s),s=Math.min(1,s),s=Math.round(100*s)/100,r._webAudio?e._volume=s:r.volume(s,e._id,!0),a&&(r._volume=s),(n<t&&s<=n||n>t&&s>=n)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,r.volume(n,e._id),r._emit("fade",e._id))}),u)},_stopFade:function(e){var t=this._soundById(e);return t&&t._interval&&(this._webAudio&&t._node.gain.cancelScheduledValues(a.ctx.currentTime),clearInterval(t._interval),t._interval=null,this.volume(t._fadeTo,e),t._fadeTo=null,this._emit("fade",e)),this},loop:function(){var e,t,n,o=this,i=arguments;if(0===i.length)return o._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(n=o._soundById(parseInt(i[0],10)))&&n._loop;e=i[0],o._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var a=o._getSoundIds(t),r=0;r<a.length;r++)(n=o._soundById(a[r]))&&(n._loop=e,o._webAudio&&n._node&&n._node.bufferSource&&(n._node.bufferSource.loop=e,e&&(n._node.bufferSource.loopStart=n._start||0,n._node.bufferSource.loopEnd=n._stop)));return o},rate:function(){var e,t,n,o=this,i=arguments;if(0===i.length)t=o._sounds[0]._id;else if(1===i.length){var r=o._getSoundIds(),s=r.indexOf(i[0]);s>=0?t=parseInt(i[0],10):e=parseFloat(i[0])}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if("number"!=typeof e)return(n=o._soundById(t))?n._rate:o._rate;if("loaded"!==o._state||o._playLock)return o._queue.push({event:"rate",action:function(){o.rate.apply(o,i)}}),o;void 0===t&&(o._rate=e),t=o._getSoundIds(t);for(var l=0;l<t.length;l++)if(n=o._soundById(t[l])){o.playing(t[l])&&(n._rateSeek=o.seek(t[l]),n._playStart=o._webAudio?a.ctx.currentTime:n._playStart),n._rate=e,o._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,a.ctx.currentTime):n._node&&(n._node.playbackRate=e);var c=o.seek(t[l]),u=(o._sprite[n._sprite][0]+o._sprite[n._sprite][1])/1e3-c,p=1e3*u/Math.abs(n._rate);!o._endTimers[t[l]]&&n._paused||(o._clearTimer(t[l]),o._endTimers[t[l]]=setTimeout(o._ended.bind(o,n),p)),o._emit("rate",n._id)}return o},seek:function(){var e,t,n=this,o=arguments;if(0===o.length)t=n._sounds[0]._id;else if(1===o.length){var i=n._getSoundIds(),r=i.indexOf(o[0]);r>=0?t=parseInt(o[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(o[0]))}else 2===o.length&&(e=parseFloat(o[0]),t=parseInt(o[1],10));if(void 0===t)return n;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"seek",action:function(){n.seek.apply(n,o)}}),n;var s=n._soundById(t);if(s){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var l=n.playing(t)?a.ctx.currentTime-s._playStart:0,c=s._rateSeek?s._rateSeek-s._seek:0;return s._seek+(c+l*Math.abs(s._rate))}return s._node.currentTime}var u=n.playing(t);u&&n.pause(t,!0),s._seek=e,s._ended=!1,n._clearTimer(t),n._webAudio||!s._node||isNaN(s._node.duration)||(s._node.currentTime=e);var p=function(){n._emit("seek",t),u&&n.play(t,!0)};if(u&&!n._webAudio){var d=function e(){n._playLock?setTimeout(e,0):p()};setTimeout(d,0)}else p()}return n},playing:function(e){if("number"==typeof e){var t=this._soundById(e);return!!t&&!t._paused}for(var n=0;n<this._sounds.length;n++)if(!this._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this._duration,n=this._soundById(e);return n&&(t=this._sprite[n._sprite][1]/1e3),t},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(a._canPlayEvent,t[n]._loadFn,!1),a._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var o=a._howls.indexOf(e);o>=0&&a._howls.splice(o,1);var i=!0;for(n=0;n<a._howls.length;n++)if(a._howls[n]._src===e._src||e._src.indexOf(a._howls[n]._src)>=0){i=!1;break}return l&&i&&delete l[e._src],a.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,n,o){var i=this["_on"+e];return"function"==typeof t&&i.push(o?{id:n,fn:t,once:o}:{id:n,fn:t}),this},off:function(e,t,n){var o=this["_on"+e],i=0;if("number"==typeof t&&(n=t,t=null),t||n)for(i=0;i<o.length;i++){var a=n===o[i].id;if(t===o[i].fn&&a||!t&&a){o.splice(i,1);break}}else if(e)this["_on"+e]=[];else{var r=Object.keys(this);for(i=0;i<r.length;i++)0===r[i].indexOf("_on")&&Array.isArray(this[r[i]])&&(this[r[i]]=[])}return this},once:function(e,t,n){return this.on(e,t,n,1),this},_emit:function(e,t,n){for(var o=this["_on"+e],i=o.length-1;i>=0;i--)o[i].id&&o[i].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,n)}.bind(this,o[i].fn),0),o[i].once&&this.off(e,o[i].fn,o[i].id));return this._loadQueue(e),this},_loadQueue:function(e){if(this._queue.length>0){var t=this._queue[0];t.event===e&&(this._queue.shift(),this._loadQueue()),e||t.action()}return this},_ended:function(e){var t=e._sprite;if(!this._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(this._ended.bind(this,e),100),this;var n=!(!e._loop&&!this._sprite[t][2]);if(this._emit("end",e._id),!this._webAudio&&n&&this.stop(e._id,!0).play(e._id),this._webAudio&&n){this._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=a.ctx.currentTime;var o=1e3*(e._stop-e._start)/Math.abs(e._rate);this._endTimers[e._id]=setTimeout(this._ended.bind(this,e),o)}return this._webAudio&&!n&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,this._clearTimer(e._id),this._cleanBuffer(e._node),a._autoSuspend()),this._webAudio||n||this.stop(e._id,!0),this},_clearTimer:function(e){if(this._endTimers[e]){if("function"!=typeof this._endTimers[e])clearTimeout(this._endTimers[e]);else{var t=this._soundById(e);t&&t._node&&t._node.removeEventListener("ended",this._endTimers[e],!1)}delete this._endTimers[e]}return this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){this._drain();for(var e=0;e<this._sounds.length;e++)if(this._sounds[e]._ended)return this._sounds[e].reset();return new s(this)},_drain:function(){var e=this._pool,t=0,n=0;if(!(this._sounds.length<e)){for(n=0;n<this._sounds.length;n++)this._sounds[n]._ended&&t++;for(n=this._sounds.length-1;n>=0;n--){if(t<=e)return;this._sounds[n]._ended&&(this._webAudio&&this._sounds[n]._node&&this._sounds[n]._node.disconnect(0),this._sounds.splice(n,1),t--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],n=0;n<this._sounds.length;n++)t.push(this._sounds[n]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=a.ctx.createBufferSource(),e._node.bufferSource.buffer=l[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,a.ctx.currentTime),this},_cleanBuffer:function(e){var t=a._navigator&&a._navigator.vendor.indexOf("Apple")>=0;if(a._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=a._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(a._navigator&&a._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var s=function(e){this._parent=e,this.init()};s.prototype={init:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++a._counter,e._sounds.push(this),this.create(),this},create:function(){var e=this._parent,t=a._muted||this._muted||this._parent._muted?0:this._volume;return e._webAudio?(this._node=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),this._node.gain.setValueAtTime(t,a.ctx.currentTime),this._node.paused=!0,this._node.connect(a.masterGain)):a.noAudio||(this._node=a._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(a._canPlayEvent,this._loadFn,!1),this._node.src=e._src,this._node.preload="auto",this._node.volume=t*a.volume(),this._node.load()),this},reset:function(){var e=this._parent;return this._muted=e._muted,this._loop=e._loop,this._volume=e._volume,this._rate=e._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++a._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),this._node.removeEventListener(a._canPlayEvent,this._loadFn,!1)}};var l={},c=function(e){var t=e._src;if(l[t])return e._duration=l[t].duration,void d(e);if(/^data:[^;]+;base64,/.test(t)){for(var n=atob(t.split(",")[1]),o=new Uint8Array(n.length),i=0;i<n.length;++i)o[i]=n.charCodeAt(i);p(o.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.withCredentials=e._xhrWithCredentials,a.responseType="arraybuffer",a.onload=function(){var t=(a.status+"")[0];"0"===t||"2"===t||"3"===t?p(a.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+a.status+".")},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete l[t],e.load())},u(a)}},u=function(e){try{e.send()}catch(t){e.onerror()}},p=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},o=function(e){e&&t._sounds.length>0?(l[t._src]=e,d(t,e)):n()};"undefined"!=typeof Promise&&1===a.ctx.decodeAudioData.length?a.ctx.decodeAudioData(e).then(o).catch(n):a.ctx.decodeAudioData(e,o,n)},d=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},f=function(){if(a.usingWebAudio){try{"undefined"!=typeof AudioContext?a.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?a.ctx=new webkitAudioContext:a.usingWebAudio=!1}catch(e){a.usingWebAudio=!1}a.ctx||(a.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(a._navigator&&a._navigator.platform),t=a._navigator&&a._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var o=/safari/.test(a._navigator&&a._navigator.userAgent.toLowerCase());(a._navigator&&a._navigator.standalone&&!o||a._navigator&&!a._navigator.standalone&&!o)&&(a.usingWebAudio=!1)}a.usingWebAudio&&(a.masterGain=void 0===a.ctx.createGain?a.ctx.createGainNode():a.ctx.createGain(),a.masterGain.gain.setValueAtTime(a._muted?0:a._volume,a.ctx.currentTime),a.masterGain.connect(a.ctx.destination)),a._setup()}};void 0===(o=function(){return{Howler:a,Howl:r}}.apply(t,[]))||(e.exports=o),t.Howler=a,t.Howl=r,"undefined"!=typeof window?(window.HowlerGlobal=i,window.Howler=a,window.Howl=r,window.Sound=s):void 0!==n&&(n.HowlerGlobal=i,n.Howler=a,n.Howl=r,n.Sound=s)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.1.3
 *  howlerjs.com
 *
 *  (c) 2013-2019, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){"use strict";var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){if(!this.ctx||!this.ctx.listener)return this;for(var t=this._howls.length-1;t>=0;t--)this._howls[t].stereo(e);return this},HowlerGlobal.prototype.pos=function(e,t,n){return this.ctx&&this.ctx.listener?(t="number"!=typeof t?this._pos[1]:t,n="number"!=typeof n?this._pos[2]:n,"number"!=typeof e?this._pos:(this._pos=[e,t,n],void 0!==this.ctx.listener.positionX?(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this)):this},HowlerGlobal.prototype.orientation=function(e,t,n,o,i,a){if(!this.ctx||!this.ctx.listener)return this;var r=this._orientation;return t="number"!=typeof t?r[1]:t,n="number"!=typeof n?r[2]:n,o="number"!=typeof o?r[3]:o,i="number"!=typeof i?r[4]:i,a="number"!=typeof a?r[5]:a,"number"!=typeof e?r:(this._orientation=[e,t,n,o,i,a],void 0!==this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),this.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),this.ctx.listener.forwardZ.setTargetAtTime(n,Howler.ctx.currentTime,.1),this.ctx.listener.upX.setTargetAtTime(o,Howler.ctx.currentTime,.1),this.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),this.ctx.listener.upZ.setTargetAtTime(a,Howler.ctx.currentTime,.1)):this.ctx.listener.setOrientation(e,t,n,o,i,a),this)},Howl.prototype.init=(e=Howl.prototype.init,function(t){return this._orientation=t.orientation||[1,0,0],this._stereo=t.stereo||null,this._pos=t.pos||null,this._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},this._onstereo=t.onstereo?[{fn:t.onstereo}]:[],this._onpos=t.onpos?[{fn:t.onpos}]:[],this._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,n){var o=this;if(!o._webAudio)return o;if("loaded"!==o._state)return o._queue.push({event:"stereo",action:function(){o.stereo(e,n)}}),o;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===n){if("number"!=typeof e)return o._stereo;o._stereo=e,o._pos=[e,0,0]}for(var a=o._getSoundIds(n),r=0;r<a.length;r++){var s=o._soundById(a[r]);if(s){if("number"!=typeof e)return s._stereo;s._stereo=e,s._pos=[e,0,0],s._node&&(s._pannerAttr.panningModel="equalpower",s._panner&&s._panner.pan||t(s,i),"spatial"===i?void 0!==s._panner.positionX?(s._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):s._panner.setPosition(e,0,0):s._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),o._emit("stereo",s._id)}}return o},Howl.prototype.pos=function(e,n,o,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"pos",action:function(){a.pos(e,n,o,i)}}),a;if(n="number"!=typeof n?0:n,o="number"!=typeof o?-.5:o,void 0===i){if("number"!=typeof e)return a._pos;a._pos=[e,n,o]}for(var r=a._getSoundIds(i),s=0;s<r.length;s++){var l=a._soundById(r[s]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,n,o],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(o,Howler.ctx.currentTime)):l._panner.setPosition(e,n,o)),a._emit("pos",l._id)}}return a},Howl.prototype.orientation=function(e,n,o,i){var a=this;if(!a._webAudio)return a;if("loaded"!==a._state)return a._queue.push({event:"orientation",action:function(){a.orientation(e,n,o,i)}}),a;if(n="number"!=typeof n?a._orientation[1]:n,o="number"!=typeof o?a._orientation[2]:o,void 0===i){if("number"!=typeof e)return a._orientation;a._orientation=[e,n,o]}for(var r=a._getSoundIds(i),s=0;s<r.length;s++){var l=a._soundById(r[s]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,n,o],l._node&&(l._panner||(l._pos||(l._pos=a._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(o,Howler.ctx.currentTime)):l._panner.setOrientation(e,n,o)),a._emit("orientation",l._id)}}return a},Howl.prototype.pannerAttr=function(){var e,n,o,a=this,r=arguments;if(!a._webAudio)return a;if(0===r.length)return a._pannerAttr;if(1===r.length){if("object"!==i(r[0]))return(o=a._soundById(parseInt(r[0],10)))?o._pannerAttr:a._pannerAttr;e=r[0],void 0===n&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),a._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:a._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:a._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:a._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:a._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:a._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:a._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:a._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:a._panningModel})}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var s=a._getSoundIds(n),l=0;l<s.length;l++)if(o=a._soundById(s[l])){var c=o._pannerAttr;c={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:c.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:c.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:c.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:c.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:c.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:c.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:c.panningModel};var u=o._panner;u?(u.coneInnerAngle=c.coneInnerAngle,u.coneOuterAngle=c.coneOuterAngle,u.coneOuterGain=c.coneOuterGain,u.distanceModel=c.distanceModel,u.maxDistance=c.maxDistance,u.refDistance=c.refDistance,u.rolloffFactor=c.rolloffFactor,u.panningModel=c.panningModel):(o._pos||(o._pos=a._pos||[0,0,-.5]),t(o,"spatial"))}return a},Sound.prototype.init=function(e){return function(){var t=this._parent;this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,e.call(this),this._stereo?t.stereo(this._stereo):this._pos&&t.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this._parent;return this._orientation=t._orientation,this._stereo=t._stereo,this._pos=t._pos,this._pannerAttr=t._pannerAttr,this._stereo?t.stereo(this._stereo):this._pos?t.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,t._refreshBuffer(this)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}).call(this,n(/*! ./../../../../node_modules/webpack/buildin/global.js */310))},311:
/*!***************************************************!*\
  !*** ./src/javascript/game/index.js + 32 modules ***!
  \***************************************************/
/*! no exports provided */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./src/javascript/game/utils/Howler.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/javascript/game/utils/webfontloader/webfontloader.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var o=1665;o=(o=Math.max(window.innerHeight/window.innerWidth*768,window.innerWidth/window.innerHeight*768))>1663?1663:o;console.log("DEVICE PIXEL RATIO",1);var i={MEDIA_FONTS_PATH:"./media/fonts/",MEDIA_MAPS_PATH:"./media/maps/",MEDIA_IMAGE_PATH:"./media/images/",MEDIA_AUDIO_PATH:"./media/audio/",DEBUG_CHILDREN:0,DEBUG_ADVERTISEMENT:1,LOCAL_STORAGE_KEY:"rumble-bee",DEVICE_PIXEL_RATIO:1,RESOLUTION:"1x",SCALE:1,WIDTH:768,HEIGHT:o,THIRD_WIDTH:256,CENTER_X:384,CENTER_Y:o/2,ASPECT_RATIO:768/o,TILE_SIZE:68,TILE_X_OFFSET:10,MAP_X_COUNT:11,MAP_WIDTH:748,ROUND:1e4,HERO_SIZE:50,UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",EXIT:"Exit",WALL:"Walls",FLOOR:"Floor",FLOOR_ALPHA:.55,BEE_MONEY:"BeeMoney",BEE_MONEY_POINTS:100,COINS:"Coins",COINS_POINTS:50,TRAIL:"Trail",TRAIL_POINTS:10,SPIKES:"Spikes",BUMPER:"Bumpers",ZAPPER_WALLS:"ZapperWalls",GATE_BLOCKS:"GateBlocks",POWER_UPS:"PowerUps",EXPANDERS:"Expanders",EXPANDERS_DELAY:1e3,EXPANDERS_INTERVAL:4e3,EXPANDERS_ROTATE_COUNT:3,EXPANDERS_RADIUS:70,ELECTRIC_GATE:"ElectricGate",ELECTRIC_GATE_SPEED:100,ELECTRIC_GATE_CHARGE:1250,WARPS:"Warps",GATE:"Gate",GATE_SPEED:80,GATE_CLOSED_FRAME:"30-wall-a.png",STEP_SPEED:40,TRANSITION_DURATION:1e3,ARMOR:"Armor",ARMOR_COST:50,MAGNET:"Magnet",MAGNET_COST:100,MAGNET_RADIUS:225,BOOSTER:"Booster",BOOSTER_COST:150,ANTACID:"Antacid",ANTACID_COST:200,POWER_UP_DURATION:2e4,COOL_DOWN:2e4,MUSIC_ON:"musicOn",SOUNDS_ON:"soundsOn",BASE_SCENE:"BASE_SCENE",BG_COLORS:["bg-blue","bg-gold","bg-green","bg-orange","bg-pink","bg-purple","bg-red"],BILE:"Bile",BILE_START_SPEED:.5,BILE_MAX_SPEED:3,BILE_POWER_SPEED:1,BILE_SPEED_INCRAMNET:.3,BILE_REVERSE_SPEED:-1.5,BILE_START_DELAY:1e3,MAP:{HTP:"map-0",EASY:["map-1","map-2","map-3","map-4","map-5","map-6","map-7","map-8","map-9"],MEDIUM:["map-10","map-11","map-12","map-14","map-15","map-18","map-20"],HARD:["map-13","map-16","map-21","map-19","map-22","map-23"],INTERMISSION:["map-17","map-24","map-25","map-26"]},MAP_COUNT:{EASY:3,MEDIUM:3,HARD:3,INTERMISSION:1},SCORE_MEDIUM:5e3,SCORE_GREAT:1e4},a=function e(){if(e.prototype._singletonInstance)return e.prototype._singletonInstance;e.prototype._singletonInstance=this,this.score={active:0,high:0},this.state={musicOn:!0,soundsOn:!0,coinCount:0},this.session={checkPointScore:0,lastMapIndex:0,coinCount:0,beeMoneyCount:0,continueAvailable:!0},this.getSaveData()};a.prototype.checkHighScore=function(){this.score.active>this.score.high&&(this.score.high=this.score.active,this.setSaveData())},a.prototype.addPoints=function(e){this.score.active+=e},a.prototype.setScore=function(e){this.score.active=e},a.prototype.getScore=function(){return this.score.active},a.prototype.getHighScore=function(){return this.score.high},a.prototype.addCoins=function(e){this.session.coinCount+=e},a.prototype.setCoins=function(e){this.session.coinCount=e,this.saveCoins()},a.prototype.getCoins=function(){return this.session.coinCount},a.prototype.saveCoins=function(){this.setItem("coinCount",this.getCoins())},a.prototype.clearActiveScore=function(){this.score.active=0},a.prototype.setItem=function(e,t){this.state[e]=t,this.setSaveData()},a.prototype.getItem=function(e){return this.state[e]},a.prototype.setSessionItem=function(e,t){this.session[e]=t},a.prototype.getSessionItem=function(e){return this.session[e]},a.prototype.addAchievementProgress=function(e,t){},a.prototype.getAchievementProgress=function(e,t){},a.prototype.unlockAchievement=function(e){},a.prototype.setSaveData=function(){var e={score:this.score.high,musicOn:this.state.musicOn,soundsOn:this.state.soundsOn,coinCount:this.state.coinCount};localStorage.setItem("teen_titans_rumble_bee",JSON.stringify(e))},a.prototype.getSaveData=function(){var e=localStorage.getItem("teen_titans_rumble_bee");e&&(e=JSON.parse(e),this.score.high=e.score,this.state.musicOn=e.musicOn,this.state.soundsOn=e.soundsOn,this.state.coinCount=e.coinCount)};var r,s=a,l=n(28);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,Phaser.Scene);var t,n,o,i=f(a);function a(){var e;u(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return y(g(e=i.call.apply(i,[this].concat(n))),"OnWindowBlur",(function(){l.Howler.mute(!0)})),y(g(e),"OnWindowFocus",(function(){l.Howler.mute(!1)})),y(g(e),"OnVisibilityChange",(function(){"hidden"==document.visibilityState?this.OnWindowBlur():this.OnWindowFocus()})),e}return t=a,(n=[{key:"init",value:function(){r=new s}},{key:"create",value:function(){var e={},t=[],n={};_.each(a.cache,(function(o,i){if(0===i.indexOf("loop-"))e[i]=new l.Howl({src:o.src}),e[i].volume(0);else if(0===i.indexOf("array-")){var a=i.replace("array-",""),r=a.lastIndexOf("-");a=a.slice(0,r),n[a]||(n[a]=[]),n[a].push(i)}else t.push(i)})),this.assets={loops:e,sfxArrays:n,sfx:t,sfxCache:[],loopState:{activeLoop:null,activeLoopVolume:0,fadeOutLoop:null,fadeOutLoopVolume:0,isPaused:!1}},this.onWindowBlur=this.OnWindowBlur.bind(this),this.onWindowFocus=this.OnWindowFocus.bind(this),this.onVisibilityChange=this.OnVisibilityChange.bind(this),window.addEventListener("blur",this.onWindowBlur),window.addEventListener("focus",this.onWindowFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)}},{key:"update",value:function(){for(var e=this.assets,t=(e.loops,e.loopState),n=e.sfxCache,o=n.length-1;o>-1;o--){var i=n[o];this.isPlaying(i)||(i.stop(),n.splice(o,1))}if(!0===r.getItem("musicOn")&&!1===t.isPaused){if(t.activeLoop&&1!==t.activeLoopVolume){var a=Math.round(100*t.activeLoopVolume);a=a+1<100?a+1:100,t.activeLoopVolume=a/100}}else if(t.activeLoop&&0!==t.activeLoopVolume){var s=Math.round(100*t.activeLoopVolume);s=s-2>0?s-2:0,t.activeLoopVolume=s/100}if(t.fadeOutLoop&&0!==t.fadeOutLoopVolume){var l=Math.round(100*t.fadeOutLoopVolume);l=l-2>0?l-2:0,t.fadeOutLoopVolume=l/100}if(t.activeLoop){var c=t.activeLoop;c.volume!==t.activeLoopVolume&&c.volume(t.activeLoopVolume)}if(t.fadeOutLoop){var u=t.fadeOutLoop;0===u.volume?(u.stop(),t.fadeOutLoop=null):u.volume!==t.fadeOutLoopVolume&&u.volume(t.fadeOutLoopVolume)}}},{key:"toggleMusic",value:function(){var e=this.assets;e.loops,e.loopState,!0===r.getItem("musicOn")?r.setItem("musicOn",!1):r.setItem("musicOn",!0)}},{key:"toggleSounds",value:function(){!0===r.getItem("soundsOn")?r.setItem("soundsOn",!1):r.setItem("soundsOn",!0)}},{key:"isSoundsOn",value:function(){return r.getItem("soundsOn")}},{key:"isMusicOn",value:function(){return r.getItem("musicOn")}},{key:"playSound",value:function(e){var t=this.assets,n=t.sfxArrays,o=t.sfx,i=t.sfxCache;if(!0===this.isSoundsOn())if(o.indexOf(e)>-1){var r=new l.Howl({src:a.cache[e].src});r.play(),i.push(r)}else if(n[e]){var s=n[e],c=s[_.random(s.length-1)],u=new l.Howl({src:a.cache[c].src});u.play(),i.push(u)}else console.warn("sound does not exist".concat(e))}},{key:"playMusic",value:function(e){var t=this.assets,n=t.loops,o=t.loopState;n[e]?n[e]!==o.activeLoop&&(null!==o.activeLoop&&(null!==o.fadeOutLoop&&(o.fadeOutLoop.volume(0),o.fadeOutLoop.stop()),o.fadeOutLoop=o.activeLoop,o.fadeOutLoopVolume=o.fadeOutLoop.volume),o.activeLoop=n[e],this.isMusicOn()?(o.activeLoopVolume=o.activeLoop.volume,o.activeLoop.play(),o.activeLoop.loop(!0)):(o.activeLoop.volume(0),o.activeLoopVolume=0)):console.warn("loop does not exist".concat(e))}},{key:"pauseMusic",value:function(){var e=this.assets,t=e.loopState,n=e.sfxCache;e.sfxArrays,t.isPaused=!0,_.each(n,(function(e){e.stop()}))}},{key:"resumeMusic",value:function(){var e=this.assets.loopState;e.isPaused=!1,e.activeLoop&&!this.isPlaying(e.activeLoop)&&e.activeLoop.play()}},{key:"isPlaying",value:function(e){for(var t=0;t<e._sounds.length;t++)if(!e._sounds[t]._ended)return!0;return!1}}])&&p(t.prototype,n),o&&p(t,o),a}();y(v,"cache",{});var b=v;function w(e,t,n){if(e.width>t||e.height>n){var o=Math.max(e.width/t,e.height/n),i=parseInt(e.style.fontSize)/o;e.setFontSize(i-1)}}function T(e){var t=e.x,n=e.y,o=void 0===e.scaleX?1:e.scaleX,i=void 0===e.scaleY?1:e.scaleY,a=e.width*o,r=e.height*i;return void 0===t&&(t=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r=0),t-=a/2,n-=r/2,new Phaser.Geom.Rectangle(t,n,a,r)}function E(e,t){return t.x<=e.x&&e.x<=t.x+t.width&&t.y<=e.y&&e.y<=t.y+t.height}function S(e,t,n){var o;return function(){var i=this,a=arguments,r=function(){o=null,n||e.apply(i,a)},s=n&&!o;clearTimeout(o),o=setTimeout(r,t),s&&e.apply(i,a)}}var A=function(e){e.globalPauseActive=!1};function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=P(e);if(t){var i=P(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(r,Phaser.Scene);var t,n,o,a=C(r);function r(){return I(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(){var e=this;e.sys.game.canvas.classList.add("game-canvas"),e.sys.game.dataManager.setSessionItem(i.BASE_SCENE,"Boot"),A(e.sys.game)}},{key:"preload",value:function(){var e=this;e.load.path=i.MEDIA_IMAGE_PATH,e.load.image("intro-bg","intro-bg.jpg"),e.load.image("loader-bb","loader/bb.png"),e.load.image("loader-cyborg","loader/cyborg.png"),e.load.image("loader-bar","loader/loader-bar.png"),e.load.image("loader-logo","loader/logo.png"),e.load.image("loader-texture","loader/texture.png"),e.load.path="",e.load.json("config","config.json"),e.load.json("localisation","./media/data/localisation.json")}},{key:"create",value:function(){var e=this;e.scene.start("Preload"),e.game.gameConfig=this.cache.json.get("config"),e.game.localisationManager.SetLocalisationData(e.game.gameConfig.language,this.cache.json.get("localisation"))}}])&&x(t.prototype,n),o&&x(t,o),r}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=j(e);if(t){var i=j(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G,W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(r,Phaser.Scene);var t,n,o,a=H(r);function r(){return D(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(){var e=this;e.add.sprite(i.CENTER_X,i.CENTER_Y,"intro-bg"),e.add.sprite(i.CENTER_X+200,i.CENTER_Y+250,"loader-cyborg"),e.add.sprite(i.CENTER_X,i.HEIGHT,"loader-texture").setOrigin(.5,1),e.add.sprite(i.CENTER_X-200,i.CENTER_Y-80,"loader-bb"),e.add.sprite(i.CENTER_X,i.HEIGHT-350,"loader-logo").setScale(.8),e.add.sprite(i.CENTER_X,i.HEIGHT-150,"loader-bar").setScale(.8);var t=e.add.graphics();this.graphics={loaderBar:t},e.sys.game.dataManager.setSessionItem(i.BASE_SCENE,"Preload"),this.assetLoadProgress=0,this.audioLoadProgress=0,this.audioLoadCount=0,this.audioLoadTotal=0,this.finished=!1,e.load.on("progress",e.onLoadProgress,e)}},{key:"onLoadProgress",value:function(e){this.assetLoadProgress=e,this.updateLoadingBar()}},{key:"updateLoadingBar",value:function(){var e=this.graphics.loaderBar;e.clear(),e.fillStyle(6221888,1);var t=.75*this.assetLoadProgress+.25*this.audioLoadProgress;e.fillRoundedRect(i.CENTER_X-71,i.HEIGHT-155,144*t,7,4)}},{key:"preload",value:function(){var e=this;e.LoadAudioFiles(),e.load.path=i.MEDIA_MAPS_PATH,e.load.json("map-0","map-0.json"),e.load.json("map-1","map-1.json"),e.load.json("map-2","map-2.json"),e.load.json("map-3","map-3.json"),e.load.json("map-4","map-4.json"),e.load.json("map-5","map-5.json"),e.load.json("map-6","map-6.json"),e.load.json("map-7","map-7.json"),e.load.json("map-8","map-8.json"),e.load.json("map-9","map-9.json"),e.load.json("map-10","map-10.json"),e.load.json("map-11","map-11.json"),e.load.json("map-12","map-12.json"),e.load.json("map-13","map-13.json"),e.load.json("map-14","map-14.json"),e.load.json("map-15","map-15.json"),e.load.json("map-16","map-16.json"),e.load.json("map-17","map-17.json"),e.load.json("map-18","map-18.json"),e.load.json("map-19","map-19.json"),e.load.json("map-20","map-20.json"),e.load.json("map-21","map-21.json"),e.load.json("map-22","map-22.json"),e.load.json("map-23","map-23.json"),e.load.json("map-24","map-24.json"),e.load.json("map-25","map-25.json"),e.load.json("map-26","map-26.json"),e.load.path=i.MEDIA_IMAGE_PATH,e.load.atlas("intro-body","intro/body.png","intro/body.json"),e.load.atlas("intro-legs","intro/legs.png","intro/legs.json"),e.load.image("intro-bolt-left","intro/bolt-left.png"),e.load.image("intro-bolt-right","intro/bolt-right.png"),e.load.image("intro-cyborg-full","intro/cyborg-full.png"),e.load.image("brand-logo","intro/logos/brand_logo.png"),e.load.image("cn-logo","intro/logos/cn_logo.png"),e.load.image("intro-logo","intro/logos/logo_"+e.game.gameConfig.language+".png"),e.load.image("intro-play-btn","intro/play-btn.png"),e.load.image("intro-vortext","intro/vortext.png"),e.load.image("overlay-bg","overlay-bg.jpg"),e.load.atlas("continue-sprite","continue/sprite.png","continue/sprite.json"),e.load.atlas("continue-head","continue/head.png","continue/head.json"),e.load.atlas("continue-wing","continue/wings.png","continue/wings.json"),e.load.atlas("score-sprite","score/sprite.png","score/sprite.json"),e.load.atlas("score-eyes","score/eyes.png","score/eyes.json"),e.load.atlas("settings-sprite","settings/sprite.png","settings/sprite.json"),e.load.atlas("settings-bb","settings/bb.png","settings/bb.json"),e.load.atlas("store-sprite","store/sprite.png","store/sprite.json"),e.load.atlas("tilesheet","play/tilesheet2x.png","play/tilesheet2x.json"),e.load.atlas("powerup-icons","play/powerup-icons.png","play/powerup-icons.json"),e.load.atlas("bubbles","play/bubbles.png","play/bubbles.json"),e.load.atlas("magnet-animation","play/magnet-animation.png","play/magnet-animation.json"),e.load.atlas("coin","play/coin.png","play/coin.json"),e.load.atlas("booster-effect","play/booster-effect.png","play/booster-effect.json"),e.load.atlas("x2-bounce","play/x2-bounce.png","play/x2-bounce.json"),e.load.atlas("wall-charge","play/wall-charge2x.png","play/wall-charge2x.json"),e.load.atlas("bumblebee","play/bumblebee.png","play/bumblebee.json"),e.load.atlas("bumblebee-trail","play/trail.png","play/trail.json"),e.load.atlas("bee-money","play/bee-money.png","play/bee-money.json"),e.load.atlas("armor-burst","play/armor-burst.png","play/armor-burst.json"),e.load.atlas("gate-block","play/gate-block.png","play/gate-block.json"),e.load.atlas("warp-spin","play/warp-spin.png","play/warp-spin.json"),e.load.atlas("warp-enter-exit","play/warp-enter-exit.png","play/warp-enter-exit.json"),e.load.image("bumblebee-glow","play/bumblebee-glow.png"),e.load.image("htp-text","play/htp-text.png"),e.load.image("bile-top","play/bile/top.png"),e.load.image("bile-fill","play/bile/fill.png"),e.load.image("tubes","play/tubes.png"),e.load.image("bg-black","play/background/bg-blackout.jpg"),e.load.image("bg-blue","play/background/bg-blue.jpg"),e.load.image("bg-gold","play/background/bg-gold.jpg"),e.load.image("bg-green","play/background/bg-green.jpg"),e.load.image("bg-orange","play/background/bg-orange.jpg"),e.load.image("bg-pink","play/background/bg-pink.jpg"),e.load.image("bg-purple","play/background/bg-purple.jpg"),e.load.image("bg-red","play/background/bg-red.jpg"),e.load.atlas("nanite-expander","play/nanite-expander2x.png","play/nanite-expander2x.json"),e.load.atlas("electric-spikes","play/electric-spikes2x.png","play/electric-spikes2x.json"),e.load.atlas("bumper","play/bumper.png","play/bumper.json"),e.load.atlas("zap","play/zap.png","play/zap.json"),e.load.atlas("cake-particles","particles.png","particles.json"),e.load.rexWebFont("webfont",{key:"fredburger_black",type:"rexWebFont",custom:{families:["FredBurger Black"],urls:[i.MEDIA_FONTS_PATH+("ar"==e.sys.game.gameConfig.language?"fredburger_arabic.css":"fredburger.css")]}})}},{key:"create",value:function(){var e,t=this;e=t.anims.generateFrameNames("wall-charge",{prefix:"electric-wall-single-",start:0,end:53,suffix:".png",zeroPad:2}),t.anims.create({key:"wall-charge-single",frames:e}),e=t.anims.generateFrameNames("wall-charge",{prefix:"electric-wall-end-",start:0,end:53,suffix:".png",zeroPad:2}),t.anims.create({key:"wall-charge-end",frames:e}),e=t.anims.generateFrameNames("wall-charge",{prefix:"electric-wall-mid-",start:0,end:53,suffix:".png",zeroPad:2}),t.anims.create({key:"wall-charge-mid",frames:e}),e=t.anims.generateFrameNames("electric-spikes",{prefix:"straight-electric-spike-",start:0,end:39,suffix:".png",zeroPad:2}),t.anims.create({key:"electric-spikes-mid",frames:e,showOnStart:!0,hideOnComplete:!0}),e=t.anims.generateFrameNames("electric-spikes",{prefix:"corner-electric-spike-",start:0,end:39,suffix:".png",zeroPad:2}),t.anims.create({key:"electric-spikes-end",frames:e,showOnStart:!0,hideOnComplete:!0}),e=t.anims.generateFrameNames("bumblebee"),t.anims.create({key:"bumblebee-down",frames:e.slice(8,10),repeat:-1}),t.anims.create({key:"bumblebee-hover",frames:e.slice(10,12),repeat:-1}),t.anims.create({key:"bumblebee-side",frames:e.slice(12,14),repeat:-1}),t.anims.create({key:"bumblebee-death",frames:e.slice(14,16),repeat:-1}),t.anims.create({key:"bumblebee-up",frames:e.slice(16,18),repeat:-1}),t.anims.create({key:"armor-bumblebee-down",frames:e.slice(0,2),repeat:-1}),t.anims.create({key:"armor-bumblebee-hover",frames:e.slice(2,4),repeat:-1}),t.anims.create({key:"armor-bumblebee-side",frames:e.slice(4,6),repeat:-1}),t.anims.create({key:"armor-bumblebee-up",frames:e.slice(6,8),repeat:-1}),e=t.anims.generateFrameNames("zap"),t.anims.create({key:"wall-zap",frames:e,repeat:-1,showOnStart:!0,delay:0}),e=t.anims.generateFrameNames("nanite-expander",{prefix:"nanite-entender_",start:0,end:22,suffix:".png",zeroPad:2}),t.anims.create({key:"nanite-expander-open",frames:e}),e=t.anims.generateFrameNames("nanite-expander",{prefix:"nanite-entender_",start:23,end:28,suffix:".png",zeroPad:2}),t.anims.create({key:"nanite-expander-rotate",frames:e,repeat:i.EXPANDERS_ROTATE_COUNT}),e=t.anims.generateFrameNames("nanite-expander",{prefix:"nanite-entender_",start:95,end:111,suffix:".png",zeroPad:2}),t.anims.create({key:"nanite-expander-close",frames:e}),e=t.anims.generateFrameNames("bumper"),t.anims.create({key:"bump",frames:e}),e=t.anims.generateFrameNames("bumblebee-trail"),t.anims.create({key:"trail-reveal",frames:e}),e=t.anims.generateFrameNames("armor-burst"),t.anims.create({key:"armor-burst",frames:e}),e=t.anims.generateFrameNames("gate-block"),t.anims.create({key:"gate-block",frames:e}),e=t.anims.generateFrameNames("bubbles"),t.anims.create({key:"bubbling",frames:e,repeat:-1}),e=t.anims.generateFrameNames("magnet-animation"),t.anims.create({key:"magnet-animation",frames:e,repeat:-1}),e=t.anims.generateFrameNames("booster-effect"),t.anims.create({key:"booster-effect",frames:e,repeat:-1}),e=t.anims.generateFrameNames("x2-bounce"),t.anims.create({key:"x2-bounce",frames:e,repeat:-1}),e=t.anims.generateFrameNames("coin",{prefix:"coin-frame",start:1,end:7,suffix:".png"}),t.anims.create({key:"coin-spin",frames:e,repeat:-1,frameRate:12}),e=t.anims.generateFrameNames("warp-spin"),t.anims.create({key:"warp-spin",frames:e,repeat:-1}),e=t.anims.generateFrameNames("warp-enter-exit"),t.anims.create({key:"warp-enter-exit",frames:e,showOnStart:!0,hideOnComplete:!0}),e=t.anims.generateFrameNames("score-eyes"),t.anims.create({key:"score-eyes",frames:e,repeat:-1,repeatDelay:1e3}),e=t.anims.generateFrameNames("continue-head"),t.anims.create({key:"continue-head",frames:e}),e=t.anims.generateFrameNames("continue-wing"),t.anims.create({key:"continue-wing",frames:e}),e=t.anims.generateFrameNames("settings-bb",{prefix:"arm/arm down/arm_",start:108,end:150,suffix:".png",zeroPad:3}),t.anims.create({key:"settings-arm-down",frames:e}),e=t.anims.generateFrameNames("settings-bb",{prefix:"arm/arm up/arm_",start:0,end:20,suffix:".png",zeroPad:2}),t.anims.create({key:"settings-arm-up",frames:e}),e=t.anims.generateFrameNames("settings-bb",{prefix:"arm/finger pick/arm_",start:183,end:229,suffix:".png",zeroPad:2}),t.anims.create({key:"settings-finger-pick",frames:e}),e=t.anims.generateFrameNames("settings-bb",{prefix:"arm/finger wiggle/arm_",start:55,end:89,suffix:".png",zeroPad:2}),t.anims.create({key:"settings-finger-wiggle",frames:e}),e=t.anims.generateFrameNames("settings-bb",{prefix:"eyes/eyes_",start:30,end:39,suffix:".png",zeroPad:2}),t.anims.create({key:"settings-eyes",frames:e,repeat:-1,repeatDelay:3e3}),e=t.anims.generateFrameNames("settings-bb",{prefix:"foot/foot_",start:0,end:20,suffix:".png",zeroPad:2}),t.anims.create({key:"settings-foot",frames:e,repeat:-1}),e=t.anims.generateFrameNames("intro-body"),t.anims.create({key:"intro-body",frames:e,yoyo:!0,repeat:-1}),e=t.anims.generateFrameNames("intro-legs"),t.anims.create({key:"intro-legs",frames:e,yoyo:!0,repeat:-1}),e=t.anims.generateFrameNames("bee-money"),t.anims.create({key:"bee-money",frames:e})}},{key:"update",value:function(){this.sys.game.globalPauseActive||(0==this.load.totalToLoad&&(this.assetLoadProgress=1),this.updateLoadingBar(),!this.finished&&this.assetLoadProgress>=1&&this.audioLoadProgress>=1&&(this.finished=!0,this.scene.launch("SoundManager"),this.scene.start("Intro")))}},{key:"LoadAudioFiles",value:function(){var e=this;e.load.path=i.MEDIA_AUDIO_PATH,e.audioLoadProgress=0,e.audioLoadCount=0,e.audioLoadTotal=0,e.LoadAudio("loop-intro","loops/intro-loop.mp3"),e.LoadAudio("loop-EASY","loops/game-easy.mp3"),e.LoadAudio("loop-MEDIUM","loops/game-medium.mp3"),e.LoadAudio("loop-HARD","loops/game-hard.mp3"),e.LoadAudio("loop-INTERMISSION","loops/game-transition-loop.mp3"),e.LoadAudio("loop-end","loops/end-loop.mp3"),e.LoadAudio("armor-destroyed","sfx/armor-destroyed/armor-destroyed.mp3"),e.LoadAudio("bread-crumb","sfx/bread-crumb/bread-crumb.mp3"),e.LoadAudio("bumper","sfx/bumper/bumper.mp3"),e.LoadAudio("btn-play","sfx/btn-play/btn-play.mp3"),e.LoadAudio("btn-regular","sfx/btn-regular/btn-regular.mp3"),e.LoadAudio("coin-collected","sfx/coin-collected/coin-collected.mp3"),e.LoadAudio("electric-fence","sfx/electric-fence/electric-fence.mp3"),e.LoadAudio("electric-wall","sfx/electric-wall/electric-wall.mp3"),e.LoadAudio("array-gameover-splat-1","sfx/gameover-splat/gameover-splat1.mp3"),e.LoadAudio("array-gameover-splat-2","sfx/gameover-splat/gameover-splat2.mp3"),e.LoadAudio("array-gameover-splat-3","sfx/gameover-splat/gameover-splat3.mp3"),e.LoadAudio("goo-swim","sfx/goo-swim/goo-swim.mp3"),e.LoadAudio("array-move-swoosh-1","sfx/move-swoosh/move-swoosh1.mp3"),e.LoadAudio("array-move-swoosh-2","sfx/move-swoosh/move-swoosh2.mp3"),e.LoadAudio("bee-money","sfx/bee-collect/bee-collect2.mp3"),e.LoadAudio("nanite-cycle","sfx/nanite-cycle/nanite-cycle.mp3"),e.LoadAudio("portal-enter","sfx/portal-enter/portal-enter.mp3"),e.LoadAudio("portal-exit","sfx/portal-exit/portal-exit.mp3"),e.LoadAudio("powerup-enabled","sfx/powerup-enabled/powerup-enabled.mp3"),e.LoadAudio("wall-fill","sfx/wall-fill/wall-fill.mp3"),e.LoadAudio("vo-gameover-great","sfx/vo-gameover-great/vo-gameover-great.mp3"),e.LoadAudio("vo-gameover-poor","sfx/vo-gameover-poor/vo-gameover-poor.mp3")}},{key:"LoadAudio",value:function(e,t){b.cache[e]||(t=this.load.path+t,this.audioLoadTotal++,b.cache[e]={src:t},new l.Howl({src:t}).once("load",this.OnLoadedAudio.bind(this)))}},{key:"OnLoadedAudio",value:function(){this.audioLoadCount++,this.audioLoadProgress=this.audioLoadCount/this.audioLoadTotal}}])&&F(t.prototype,n),o&&F(t,o),r}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Z(e);if(t){var i=Z(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(r,Phaser.Scene);var t,n,o,a=z(r);function r(){return X(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(){(G=this.scene.get("SoundManager")).playMusic("loop-intro"),this.sys.game.dataManager.setSessionItem(i.BASE_SCENE,"Intro")}},{key:"create",value:function(){var e=this;e.add.sprite(i.CENTER_X,i.CENTER_Y,"intro-bg"),e.add.sprite(i.CENTER_X,i.CENTER_Y+560,"intro-cyborg-full");var t=e.add.sprite(i.CENTER_X-30,i.CENTER_Y+80,"intro-vortext"),n=e.add.sprite(i.CENTER_X-30,i.CENTER_Y+80,"intro-body");n.play("intro-body"),n.setScale(1),n.setAngle(-15);var o=e.add.sprite(i.CENTER_X-30,i.CENTER_Y+80,"intro-legs");o.play("intro-legs"),o.setScale(1),o.setAngle(-15);var a=[];a.push(n),a.push(o);var r=e.tweens.createTimeline();r.add({targets:a,angle:"5",scaleX:.5,scaleY:.5,duration:1e3,ease:"Back.easeOut"}),r.add({targets:a,angle:-5,duration:3e3,ease:"Quad.easeOut"}),r.add({targets:a,angle:5,repeat:-1,yoyo:!0,duration:3e3,ease:"Quad.easeInOut"}),r.play(),e.tweens.add({targets:t,angle:"360",repeat:-1,duration:1e4,ease:"Linear"});var s,l=e.add.sprite(i.CENTER_X,i.HEIGHT-230,"intro-play-btn"),c=e.add.text(l.x,l.y+20,e.game.localisationManager.GetString("play"),{fontFamily:"FredBurger Black",fontSize:"76px",color:"#5ef040",align:"center"});if(c.setOrigin(.5),c.setStroke("#000",12),w(c,200,100),e.add.sprite(i.CENTER_X-270,i.HEIGHT-170,"intro-bolt-left"),e.add.sprite(i.CENTER_X+270,i.HEIGHT-170,"intro-bolt-right"),e.add.sprite(i.CENTER_X+270,i.HEIGHT-80,"brand-logo"),e.add.sprite(i.CENTER_X-270,i.HEIGHT-80,"cn-logo"),0!==e.sys.game.dataManager.getHighScore()){var u=e.add.text(i.CENTER_X,i.HEIGHT-100,e.game.localisationManager.GetString("best"),{fontFamily:"FredBurger Black",fontSize:"28px",color:"#000",align:"center"});u.setOrigin(.5),u.setStroke("#FFF",3),w(u,300,100);var p=e.add.text(i.CENTER_X,i.HEIGHT-52,"ar"!=e.game.localisationManager.language?e.sys.game.dataManager.getHighScore().toLocaleString(e.game.localisationManager.language):e.sys.game.dataManager.getHighScore(),{fontFamily:"FredBurger Black",fontSize:"56px",color:"#ffef00",align:"center"});p.setOrigin(.5),p.setStroke("#000",8),w(p,400,100)}i.HEIGHT<=1024?s=e.add.sprite(i.CENTER_X,i.CENTER_Y-330,"intro-logo"):(s=e.add.sprite(i.CENTER_X,100,"intro-logo")).setOrigin(.5,0),s.x-=2;var d=e.add.sprite(i.WIDTH-80,80,"settings-sprite");d.setFrame("btn-settings.png"),l.setInteractive(),l.on("pointerdown",(function(){G.playSound("btn-play"),e.scene.start("Play",{isContinue:!1,queuedPause:!1,queuedPowerUp:!1})})),d.setInteractive(),d.on("pointerdown",(function(){e.scene.launch("Settings")})),e.events.off("resume"),e.events.on("resume",(function(e,t){console.log("On Intro Resume!!!"),G.resumeMusic()})),e.game.scale.refresh()}}])&&Y(t.prototype,n),o&&Y(t,o),r}();function Q(e,t){var n=this;n.DIRECTION_UP=1,n.DIRECTION_DOWN=2,n.DIRECTION_LEFT=4,n.DIRECTION_RIGHT=8,n.DIRECTION_UP_RIGHT=16,n.DIRECTION_UP_LEFT=32,n.DIRECTION_DOWN_RIGHT=64,n.DIRECTION_DOWN_LEFT=128,n.g=e,n.model=void 0!==t?t:null,n.dragLength=50,n.diagonalDelta=50,n.swiping=!1,n.direction=null,n.tmpDirection=null,n.tmpCallback=null,n.diagonalDisabled=!0,this.g.input.on("pointerdown",(function(){n.swiping=!0})),this.g.input.on("pointerup",(function(){n.swiping=!0})),this.setupKeyboard()}Q.prototype.setupKeyboard=function(){var e=this;this.g.input.keyboard.on("keydown_UP",(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_LEFT:e.direction=e.DIRECTION_UP_LEFT,null!==e.model&&e.model.upLeft&&e.model.upLeft();break;case e.DIRECTION_RIGHT:e.direction=e.DIRECTION_UP_RIGHT,null!==e.model&&e.model.upRight&&e.model.upRight();break;default:e.direction=e.DIRECTION_UP,null!==e.model&&e.model.up&&e.model.up()}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_UP,e.tmpCallback=null!==e.model&&e.model.up?e.model.up:null})),this.g.input.keyboard.on("keyup_UP",this.keyUp,this),this.g.input.keyboard.on("keydown_DOWN",(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_LEFT:e.direction=e.DIRECTION_DOWN_LEFT,null!==e.model&&e.model.downLeft&&e.model.downLeft();break;case e.DIRECTION_RIGHT:e.direction=e.DIRECTION_DOWN_RIGHT,null!==e.model&&e.model.downRight&&e.model.downRight();break;default:e.direction=e.DIRECTION_DOWN,null!==e.model&&e.model.down&&e.model.down()}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_DOWN,e.tmpCallback=null!==e.model&&e.model.down?e.model.down:null})),this.g.input.keyboard.on("keyup_DOWN",this.keyUp,this),this.g.input.keyboard.on("keydown_LEFT",(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_UP:e.direction=e.DIRECTION_UP_LEFT,null!==e.model&&e.model.upLeft&&e.model.upLeft();break;case e.DIRECTION_DOWN:e.direction=e.DIRECTION_DOWN_LEFT,null!==e.model&&e.model.downLeft&&e.model.downLeft();break;default:e.direction=e.DIRECTION_LEFT,null!==e.model&&e.model.left&&e.model.left()}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_LEFT,e.tmpCallback=null!==e.model&&e.model.left?e.model.left:null})),this.g.input.keyboard.on("keyup_LEFT",this.keyUp,this),this.g.input.keyboard.on("keydown_RIGHT",(function(){if(null!==e.tmpDirection){switch(e.tmpDirection){case e.DIRECTION_UP:e.direction=e.DIRECTION_UP_RIGHT,null!==e.model&&e.model.upRight&&e.model.upRight();break;case e.DIRECTION_DOWN:e.direction=e.DIRECTION_DOWN_RIGHT,null!==e.model&&e.model.downRight&&e.model.downRight();break;default:e.direction=e.DIRECTION_RIGHT,null!==e.model&&e.model.right&&e.model.right()}e.tmpDirection=null,e.tmpCallback=null}else e.tmpDirection=e.DIRECTION_RIGHT,e.tmpCallback=null!==e.model&&e.model.right?e.model.right:null})),this.g.input.keyboard.on("keyup_RIGHT",this.keyUp,this)},Q.prototype.keyUp=function(){this.direction=this.tmpDirection,this.tmpDirection=null,null!==this.tmpCallback&&(this.tmpCallback.call(this.model),this.tmpCallback=null)},Q.prototype.check=function(){if(null!==this.direction){var e={x:0,y:0,direction:this.direction};return this.direction=null,e}if(!this.swiping)return null;if(this.g.input.activePointer.getDistance()<this.dragLength)return null;this.swiping=!1;var t=null,n=this.g.input.activePointer.position.x-this.g.input.activePointer.downX,o=this.g.input.activePointer.position.y-this.g.input.activePointer.downY,i={x:this.g.input.activePointer.downX,y:this.g.input.activePointer.downY},a=Math.abs(n),r=Math.abs(o);return!this.diagonalDisabled&&a>this.dragLength-this.diagonalDelta&&r>this.dragLength-this.diagonalDelta?n>0&&o>0?(t=this.DIRECTION_DOWN_RIGHT,null!==this.model&&this.model.downRight&&this.model.downRight(i)):n>0&&o<0?(t=this.DIRECTION_UP_RIGHT,null!==this.model&&this.model.upRight&&this.model.upRight(i)):n<0&&o>0?(t=this.DIRECTION_DOWN_LEFT,null!==this.model&&this.model.downLeft&&this.model.downLeft(i)):n<0&&o<0&&(t=this.DIRECTION_UP_LEFT,null!==this.model&&this.model.upLeft&&this.model.upLeft(i)):(a>this.dragLength||r>this.dragLength)&&(a>r?n>0?(t=this.DIRECTION_RIGHT,null!==this.model&&this.model.right&&this.model.right(i)):n<0&&(t=this.DIRECTION_LEFT,null!==this.model&&this.model.left&&this.model.left(i)):o>0?(t=this.DIRECTION_DOWN,null!==this.model&&this.model.down&&this.model.down(i)):o<0&&(t=this.DIRECTION_UP,null!==this.model&&this.model.up&&this.model.up(i))),null!==t?(i.direction=t,i):null};var $,J=Q,ee=i.TILE_SIZE,te=i.UP,ne=i.DOWN,oe=i.LEFT,ie=i.RIGHT;function ae(e,t,n,o){var i={x:t,y:n};switch(e){case te:i.y-=ee*o;break;case ne:i.y+=ee*o;break;case oe:i.x-=ee*o;break;case ie:i.x+=ee*o}return i}function re(e){return{name:e,groups:{tiles:[]}}}function se(e){var t=this,n=this.g,o=[],a=[];$=n.scene.get("SoundManager");var r=n.anims.get("wall-charge-single").frames[0].frame.name;_.each(e.groups.tiles,(function(s){var l=s.frame.name.split("-").pop().replace(".png","");s.setVisible(!1),s.setActive(!1);var c=n.add.sprite(s.x,s.y,"wall-charge");if(c.setScale(.5),c.resetY=s.resetY,c.angle=function(e){var t=0;switch(e){case i.DOWN:t=90;break;case i.LEFT:t=180;break;case i.UP:t=270}return t}(l),c.setFrame(r),a.push(c),s.highlight=c,!s.claimed){var u;switch(l){case i.RIGHT:(u=n.add.sprite(s.x,s.y,"zap")).setScale(.5);break;case i.DOWN:(u=n.add.sprite(s.x,s.y,"zap")).angle=90,u.setScale(.5)}if(u){u.emitter=s;for(var p=!0,d=0,f=null,h=null;p;)d++,h=ae(l,u.x,u.y,d),(f=t.checkLayerTiles(h,e))&&(p=!1);-1===f||f.claimed?(u.reciever=null,console.warn("null reciever")):(f.claimed=!0,u.reciever=f,u.steps=d,u.setPosition(f.x,f.y)),u.setAlpha(0),o.push(u)}}})),_.each(o,(function(e){n.children.bringToTop(e.emitter.highlight),n.children.bringToTop(e.reciever.highlight)})),e.groups.hazzards=o,e.groups.highlights=a,ce.call(this,o)}var le=S((function(e,t){var n=new Phaser.Geom.Rectangle(0,e.cameras.main.scrollY,i.WIDTH,i.HEIGHT),o=T(t);Phaser.Geom.Intersects.RectangleToRectangle(n,o)&&$.playSound("electric-fence")}),250,!0);function ce(e){var t=this.g;_.each(e,(function(e){if(e.reciever){var n=e.emitter,o=e.reciever;e.setPosition(n.x,n.y),e.play("wall-zap"),e.location="emitter",e.tween=t.add.tween({targets:e,x:o.x,y:o.y,duration:e.steps*i.ELECTRIC_GATE_SPEED,delay:i.ELECTRIC_GATE_CHARGE,repeatDelay:i.ELECTRIC_GATE_CHARGE,hold:i.ELECTRIC_GATE_CHARGE,yoyo:!0,repeat:-1,onUpdate:function(){var i=e.x===n.x&&e.y===n.y,a=e.x===o.x&&e.y===o.y;i||a?e.setAlpha(0):e.setAlpha(1),"emitter"===e.location&&a&&(e.location="reciever",o.highlight.play("wall-charge-single"),le(t,o)),"reciever"===e.location&&i&&(e.location="emitter",n.highlight.play("wall-charge-single"),le(t,n))},onStart:function(){n.highlight.play("wall-charge-single")}})}}))}var ue,pe=i.TILE_SIZE;function de(e){var t=this.g,n=[],o=[];_.each(e.groups.tiles,(function(e){var a,r=e.frame.name.split("-"),s=r.slice(2,3)[0],l=r.pop().replace(".png",""),c=t.add.sprite(e.x,e.y,"wall-charge");c.resetY=e.resetY,e.setVisible(!1),e.setActive(!1),"mid"===l?(a=t.anims.get("wall-charge-mid").frames[0].frame.name,c.animKey="wall-charge-mid"):(a=t.anims.get("wall-charge-end").frames[0].frame.name,c.animKey="wall-charge-end"),c.setFrame(a),c.setScale(.5);var u=t.add.sprite(e.x,e.y,"electric-spikes");u.resetY=e.resetY,u.animKey="mid"===l?"electric-spikes-mid":"electric-spikes-end";var p={x:e.x,y:e.resetY,width:pe,height:pe};switch(u.hit=p,s){case i.LEFT:p.x-=pe,c.angle=180,u.angle=180,"bottom"===l&&(c.setScale(.5,-.5),u.setScale(1,-1));break;case i.RIGHT:p.x+=pe,"top"===l&&(c.setScale(.5,-.5),u.setScale(1,-1));break;case i.DOWN:p.y+=pe,c.angle=90,u.angle=90,"right"===l&&(c.setScale(.5,-.5),u.setScale(1,-1));break;case i.UP:p.y-=pe,c.angle=270,u.angle=270,"left"===l&&(c.setScale(.5,-.5),u.setScale(1,-1))}o.push(c),n.push(u)})),e.groups.triggers=n,e.groups.highlights=o}var fe=S((function(){ue.playSound("nanite-cycle")}),250,!0);function he(e){var t=this,n=this.g;ue=n.scene.get("SoundManager"),e.groups.tiles.sort((function(e,t){return e.y===t.y?e.x-t.x:e.y-t.y})),_.each(e.groups.tiles,(function(e,o){var a=o%2,r=i.EXPANDERS_DELAY+i.EXPANDERS_INTERVAL*a;e.timer=n.time.delayedCall(r,(function(){ge.call(t,e)}))}))}function ge(e){var t=this,n=this.g;e.play("nanite-expander-open"),e.once("animationcomplete",(function(){e.play("nanite-expander-rotate"),e.once("animationcomplete",(function(){e.play("nanite-expander-close"),e.once("animationcomplete",(function(){e.timer=n.time.delayedCall(i.EXPANDERS_INTERVAL,(function(){ge.call(t,e)}))}))}))}));var o=new Phaser.Geom.Rectangle(0,n.cameras.main.scrollY,i.WIDTH,i.HEIGHT),a=T(e);Phaser.Geom.Intersects.RectangleToRectangle(o,a)&&fe()}function me(e){var t=this.g,n=[];e.groups.tiles.sort((function(e,t){return e.y===t.y?e.x-t.x:e.y-t.y})),_.each(e.groups.tiles,(function(o,i){o.direction=o.frame.name.split("-").pop().replace(".png",""),o.warpTo=i%2==0?e.groups.tiles[i+1]:e.groups.tiles[i-1],o.play("warp-spin");var a=t.add.sprite(o.x,o.y,"warp-enter-exit");a.setScale(.5),a.setVisible(!1),a.resetY=o.resetY,n.push(a),o.highlight=a})),e.groups.highlights=n}i.TILE_SIZE;function ye(e){this.g;_.each(e.groups.tiles,(function(e){var t=e.frame.name.split("-").slice(2);switch(e.setTexture("bumper"),t[1]=t[1].replace(".png",""),e.bump=t,_.join(t,"-")){case"down-right":e.setAngle(180);break;case"down-left":e.setAngle(270);break;case"up-right":e.setAngle(90)}}))}function _e(e){this.g;_.each(e.groups.tiles,(function(e){e.play("coin-spin")}))}function ve(e){var t=this.g,n=!1;t.bile&&t.bile.speed&&(n=t.bile.speed>=i.BILE_POWER_SPEED),t.activePowerUp||t.coolDownActive||!n||t.isContinue?_.each(e.groups.tiles,(function(e){e.play("coin-spin"),e.isCoin=!0})):e.groups.tiles.length>1&&console.warn("More than collectable power up has been added to the map, you should not get this")}function be(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i,a=!0,r=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return a=e.done,e},e:function(e){r=!0,i=e},f:function(){try{a||null==o.return||o.return()}finally{if(r)throw i}}}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Te(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ee,Se,Ae=[i.FLOOR,i.EXPANDERS,i.TRAIL,i.COINS,i.BEE_MONEY,i.POWER_UPS],Oe=[i.COINS,i.TRAIL,i.POWER_UPS,i.BEE_MONEY],Ie=i.TILE_SIZE,xe=Ie/2,ke=["EASY","INTERMISSION","MEDIUM","INTERMISSION","HARD","INTERMISSION"],Ce={},Re={},Pe=!1,Ne=0,Le=0,De=S((function(){Ee.playSound("coin-collected")}),25,!0),Fe=S((function(){Ee.playSound("bread-crumb")}),25,!0),Me=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.g=t;var n=this.g;Se=n.sys.game.dataManager,Ee=n.scene.get("SoundManager"),Le=Se.getSessionItem("beeMoneyCount"),this.activeLevel=null,n.isContinue||(Ne=0,Ce.index=0,Ce.cleared=0),this.levelsCleared=Ne,this.htpCompleted=Pe,this.transitionActive=!1,this.nextLevel=null,this.beeMoneyText=[],this.frames=this.g.cache.json.get("tilesheet").frames,this.addNextLevel(!0),this.scroll={prev:0,current:0,distance:0,transition:0,offset:0},this.setCamera(),n.isContinue||this.showHtp()}var t,n,o;return t=e,(n=[{key:"getDifficulty",value:function(){return ke[Ce.index]}},{key:"addNextLevel",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(this.g,this.getMap()),o=n.layers;Se.setSessionItem("checkPointScore",Se.getScore());var a=n.height*Ie,r={},s=null,l=t?0:-a;(s=new Phaser.Geom.Rectangle(i.CENTER_X-xe,0,Ie,Ie)).layerName=i.EXIT;var c={height:a,layers:r,exit:s,isFirstLevel:t};t?this.activeLevel=c:this.nextLevel=c,_.each(o,(function(t){var n=new re(t.name);r[n.name]=n,e.paint(n.name,t.data,n.groups.tiles,l)})),r[i.POWER_UPS]&&ve.call(this,r[i.POWER_UPS]),r[i.COINS]&&_e.call(this,r[i.COINS]),r[i.BUMPER]&&ye.call(this,r[i.BUMPER]),r[i.WARPS]&&me.call(this,r[i.WARPS]),r[i.ZAPPER_WALLS]&&de.call(this,r[i.ZAPPER_WALLS]),r[i.EXPANDERS]&&he.call(this,r[i.EXPANDERS]),r[i.ELECTRIC_GATE]&&t&&se.call(this,r[i.ELECTRIC_GATE])}},{key:"getMap",value:function(){var e,t=this.g;if(t.isContinue)e=Se.getSessionItem("lastMapKey");else if(Pe){var n=ke[Ce.index];Ce.cleared<i.MAP_COUNT[n]||(Ce.index=Ce.index+1<ke.length?Ce.index+1:0,Ce.cleared=0,n=ke[Ce.index]),e=this.getKey(n),Ee.playMusic("loop-"+this.getDifficulty())}else e=i.MAP.HTP;return this.mapKey=e,Se.setSessionItem("lastMapKey",e),t.cache.json.get(e)}},{key:"getKey",value:function(e){return void 0!==Re[e]&&0!==Re[e].length||(Re[e]=Phaser.Utils.Array.Shuffle(_.clone(i.MAP[e]))),Re[e].pop()}},{key:"transition",value:function(){var e=this.g;Se.setSessionItem("beeMoneyCount",Le),Se.saveCoins(),this.mapKey===i.MAP.HTP?(Pe=!0,this.htpCompleted=!0):(Ne++,this.levelsCleared=Ne,Ce.cleared++),this.transitionActive=!0,this.scroll.transition=e.cameras.main.scrollY,e.tweens.add({targets:this.scroll,transition:"-="+i.HEIGHT,duration:i.TRANSITION_DURATION,ease:"Sine.easeOut"}),this.addNextLevel(),e.transitionBg(),this.tween(this.activeLevel),this.tween(this.nextLevel),e.bile.transition(),this.bringBeeMoneyTextToTop()}},{key:"onTransitionComplete",value:function(){var e=this.g;this.destroyLevel(this.activeLevel),this.activeLevel=this.nextLevel,this.nextLevel=null,this.setCamera(),this.resetLevelY();var t=this.activeLevel.layers;t[i.ELECTRIC_GATE]&&(se.call(this,t[i.ELECTRIC_GATE]),e.player.bringToTop()),e.bile.reset(),e.activePowerUp!==i.ANTACID&&e.bile.start(),e.bringFgToTop(),this.transitionActive=!1,this.bringBeeMoneyTextToTop()}},{key:"showHtp",value:function(){var e=this.g;if("map-0"===this.mapKey){this.activeLevel.textImage=e.add.sprite(i.CENTER_X,this.height-400,"htp-text"),this.activeLevel.textImage.setScale(.75);var t=e.game.localisationManager.GetString(e.game.isDesktop?"tutorial_desktop_01":"tutorial_mobile_01"),n=e.game.localisationManager.GetString("tutorial_02");this.activeLevel.text=e.add.text(i.CENTER_X,this.height-270,t+"\n"+n,{fontFamily:"FredBurger Black",fontSize:"24px",color:"#FFF",align:"center",wordWrap:{width:490}}),this.activeLevel.text.setOrigin(.5),w(this.activeLevel.text,this.activeLevel.text.style.wordWrapWidth,400)}}},{key:"updateScroll",value:function(){var e=this.g;if(e.cameras.main.scrollY>this.height-i.HEIGHT)return this.scroll.current=this.height-i.HEIGHT,this.scroll.prev=this.height-i.HEIGHT,void(this.scroll.distance=this.height-i.HEIGHT);this.transitionActive?this.scroll.current=this.scroll.transition:this.scroll.current=e.cameras.main.scrollY,this.scroll.distance+=this.scroll.current-this.scroll.prev,this.scroll.prev=this.scroll.current}},{key:"getScroll",value:function(){return this.g,this.g.cameras.main.scrollY}},{key:"getCollectables",value:function(){this.g;var e=this.activeLevel.layers,t=[];return _.each(Oe,(function(n){if(e[n]){var o=e[n];t.push(o.groups.tiles)}})),t=_.flatten(t)}},{key:"watch",value:function(e){var t=this,n=this.g,o=this.activeLevel.layers;if(this.updateScroll(),e.active&&e.visible&&!this.transitionActive){if(n.activePowerUp===i.MAGNET){var a=this.getCollectables(),r=new Phaser.Geom.Circle(e.x,e.y,i.MAGNET_RADIUS);_.each(a,(function(t){if(t.active&&!t.collected){if(t.tween&&t.tween.isPlaying())return t.tween.updateTo("x",e.x,!0),void t.tween.updateTo("y",e.y,!0);var o=T(t);Phaser.Geom.Intersects.CircleToRectangle(r,o)&&(t.tween=n.tweens.add({targets:t,x:e.x,y:e.y,ease:"Sine.easeIn",duration:1e3}))}}))}if(o[i.BEE_MONEY]){var s=o[i.BEE_MONEY];_.each(s.groups.tiles,(function(o){if(o.active&&!o.collected&&E(e,T(o))){Le=(Le=Se.getSessionItem("beeMoneyCount"))<10?Le+1:10;var a=i.BEE_MONEY_POINTS*Le;a=n.activePowerUp===i.BOOSTER?2*a:a,Se.addPoints(a),t.showBeeMoneyText(Le,a),Ee.playSound("bee-money"),o.tween&&(o.tween.stop(),o.tween=null),o.collected=!0,o.play("bee-money"),o.on("animationend",(function(){o.setActive(!1),o.setVisible(!1)}))}}))}if(o[i.COINS]){var l=o[i.COINS];_.each(l.groups.tiles,(function(t){t.active&&!t.collected&&E(e,T(t))&&(Se.addCoins(1),Se.addPoints(n.activePowerUp===i.BOOSTER?2*i.COINS_POINTS:i.COINS_POINTS),De(),t.tween&&(t.tween.stop(),t.tween=null),t.collected=!0,t.anims.stop(),t.setFrame("rays.png"),n.tweens.add({targets:t,scaleX:0,scaleY:0,duration:500,delay:100,ease:"Sine.easeOut",onComplete:function(){t.setActive(!1),t.setVisible(!1)}}))}))}if(o[i.POWER_UPS]){var c=o[i.POWER_UPS];_.each(c.groups.tiles,(function(t){if(t.active&&!t.collected&&E(e,T(t)))if(t.tween&&(t.tween.stop(),t.tween=null),t.isCoin)Se.addCoins(1),Se.addPoints(n.activePowerUp===i.BOOSTER?2*i.COINS_POINTS:i.COINS_POINTS),De(),t.collected=!0,t.anims.stop(),t.setFrame("rays.png"),n.tweens.add({targets:t,scaleX:0,scaleY:0,duration:500,delay:100,ease:"Sine.easeOut",onComplete:function(){t.setActive(!1),t.setVisible(!1)}});else{var o=t.frame.name;switch(t.setActive(!1),t.setVisible(!1),o){case"66-powerup-armor.png":n.activateArmor();break;case"68-powerup-x2.png":n.activateScoreBooster();break;case"67-powerup-magnet.png":n.activateMagnet();break;case"69-powerup-antacid.png":n.activateAntacid()}}}))}if(o[i.TRAIL]){var u=o[i.TRAIL];_.each(u.groups.tiles,(function(t){t.active&&E(e,T(t))&&(Se.addPoints(n.activePowerUp===i.BOOSTER?2*i.TRAIL_POINTS:i.TRAIL_POINTS),Fe(),t.tween&&(t.tween.stop(),t.tween=null),t.setActive(!1),t.setVisible(!1))}))}if(o[i.GATE_BLOCKS]){var p=o[i.GATE_BLOCKS];_.each(p.groups.tiles,(function(t){t.isClosed||t.active&&E(e,T(t))&&(t.tween&&(t.tween.stop(),t.tween=null),t.play("gate-block"),t.isClosed=!0)}))}if(!e.armorRecovery){if(E(e,n.bile)&&e.takeHit(i.BILE)&&n.bile.knockDown(),o[i.EXPANDERS]){var d=o[i.EXPANDERS];_.each(d.groups.tiles,(function(t){if(t.anims.isPlaying){var n=t.anims.getProgress(),o=T(e);if("nanite-expander-open"===t.anims.getCurrentKey()&&n>.4){var a=new Phaser.Geom.Circle(t.x,t.y,i.EXPANDERS_RADIUS*n);Phaser.Geom.Intersects.CircleToRectangle(a,o)&&e.takeHit(i.EXPANDERS)}if("nanite-expander-rotate"===t.anims.getCurrentKey()){var r=new Phaser.Geom.Circle(t.x,t.y,i.EXPANDERS_RADIUS);Phaser.Geom.Intersects.CircleToRectangle(r,o)&&e.takeHit(i.EXPANDERS)}if("nanite-expander-close"===t.anims.getCurrentKey()){var s=~~(100*(1-n))/100;if(n<.6){var l=new Phaser.Geom.Circle(t.x,t.y,i.EXPANDERS_RADIUS*s);Phaser.Geom.Intersects.CircleToRectangle(l,o)&&e.takeHit(i.EXPANDERS)}}}}))}if(o[i.ZAPPER_WALLS]){var f=o[i.ZAPPER_WALLS],h=f.groups.triggers,g=f.groups.highlights;_.each(h,(function(t,o){t.anims.isPlaying||g[o].anims.isPlaying||!E(e,T(t.hit))?t.anims.isPlaying&&t.anims.getProgress()>.1&&t.anims.getProgress()<.5&&E(e,T(t.hit))&&e.takeHit(i.ZAPPER_WALLS):(g[o].play(g[o].animKey),t.timer=n.time.delayedCall(1e3,(function(){t.timer.remove(!1),t.timer.destroy(),t.timer=null,t.play(t.animKey),Ee.playSound("electric-wall")})))}))}if(o[i.ELECTRIC_GATE]){var m=o[i.ELECTRIC_GATE].groups.hazzards;_.each(m,(function(t){1===t.alpha&&E(e,T(t))&&e.takeHit(i.ELECTRIC_GATE)}))}}}}},{key:"showBeeMoneyText",value:function(e,t){var n=this,o=this.g,a=o.player,r="X".concat(e,"  +").concat(t),s=o.add.text(a.x,a.y,r,{fontFamily:"FredBurger Black",fontSize:"44px",color:"#ff4f8d",align:"center"});s.setStroke("#FFF",12),a.x>i.CENTER_X?s.setOrigin(1,.5):s.setOrigin(.5,.5),this.beeMoneyText.push(s),s.tween=o.add.tween({targets:s,y:"-=200",duration:2e3,onComplete:function(){s.setActive(!1),s.setVisible(!1);for(var e=n.beeMoneyText.length-1;e>-1;e--){var t=n.beeMoneyText[e];t.active||(t.destroy(),n.beeMoneyText.splice(e,1))}}})}},{key:"bringBeeMoneyTextToTop",value:function(){var e=this.g;_.each(this.beeMoneyText,(function(t){e.children.bringToTop(t)}))}},{key:"resetLevelY",value:function(){var e=this.activeLevel.layers;_.each(e,(function(e){_.each(e.groups,(function(e){_.each(e,(function(e){e.y=e.resetY}))}))}))}},{key:"tween",value:function(e){var t=this.g,n=e.layers,o=[];_.each(n,(function(e){var t=[];_.each(e.groups,(function(e){t.push(e)})),t=_.flatten(t),o.push(t)})),o=_.flatten(o),e.text&&o.push(e.text),e.textImage&&o.push(e.textImage),t.tweens.add({targets:o,y:"+="+i.HEIGHT,duration:i.TRANSITION_DURATION,ease:"Sine.easeOut"})}},{key:"destroyLevel",value:function(e){var t=e.layers;e.text&&(e.text.destroy(),e.text=null),e.textImage&&(e.textImage.destroy(),e.textImage=null),_.each(t,(function(e){e.timer&&(e.timer.remove(!1),e.timer.destroy()),_.each(e.groups,(function(e){_.each(e,(function(e){e.timer&&(e.timer.remove(!1),e.timer.destroy()),e.tween&&e.tween.stop(),e.destroy()})),e.length=0}))}))}},{key:"checkAllTiles",value:function(e){var t=this.activeLevel,n=t.layers;if(E(e,t.exit))return{layerName:i.EXIT};for(var o in n)if(!(Ae.indexOf(o)>-1)&&(o!==i.GATE||n[o].isClosed)){var a,r=be(n[o].groups.tiles);try{for(r.s();!(a=r.n()).done;){var s=a.value;if((o!==i.GATE_BLOCKS||s.isClosed)&&E(e,T(s)))return s}}catch(e){r.e(e)}finally{r.f()}}return(e.x>i.WIDTH||e.x<0||e.y>this.height||e.y<0)&&(console.warn("checkAllTiles GHOSTING OFF THE MAP"),{layerName:i.WALL})}},{key:"checkLayerTiles",value:function(e,t){var n,o=be(t.groups.tiles);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(E(e,T(a)))return a}}catch(e){o.e(e)}finally{o.f()}return(e.x>i.WIDTH||e.x<0||e.y>this.height||e.y<0)&&(console.warn("checkLayerTiles GHOSTING OFF THE MAP"),-1)}},{key:"closeGate",value:function(){var e=this.g,t=this.activeLevel.layers[i.GATE];t.isClosed||(t.isClosed=!0,_.each(t.groups.tiles,(function(t,n){e.time.delayedCall(i.GATE_SPEED+i.GATE_SPEED*n,(function(){t.play("gate-block"),Ee.playSound("wall-fill")}))})))}},{key:"paint",value:function(e,t,n){var o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=this.g;_.each(t,(function(t,s){t--;var l,c=s%i.MAP_X_COUNT*Ie,u=~~(s/i.MAP_X_COUNT)*Ie;o.frames[t]&&((l=r.add.sprite(c+i.TILE_X_OFFSET+xe,u+xe+a,"tilesheet")).setScale(.5),l.setFrame(o.frames[t].filename),l.resetY=u+xe,l.layerName=e,e===i.FLOOR&&l.setAlpha(i.FLOOR_ALPHA),n.push(l))}))}},{key:"setCamera",value:function(){var e=this.g;e.cameras.main.setBounds(0,0,this.width,this.height),e.cameras.main.setScroll(0,this.height),0!==this.scroll.transition&&(this.scroll.offset+=this.scroll.transition-(this.height-i.HEIGHT))}},{key:"width",get:function(){return i.MAP_WIDTH}},{key:"height",get:function(){return this.activeLevel.height}},{key:"startY",get:function(){return this.height-xe}},{key:"startX",get:function(){return i.CENTER_X}}])&&Te(t.prototype,n),o&&Te(t,o),e}();function He(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}i.TILE_SIZE;var Be,je,Ge=i.UP,We=i.DOWN,Ue=i.LEFT,Xe=i.RIGHT,Ye="bumblebee",Ve="hover",ze=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.g=t;var n=this.g;Be=n.scene.get("SoundManager"),(je=n.sys.game.dataManager).setSessionItem("Bumps",0),Ye="bumblebee",Ve="hover",this.glowSprite=n.add.sprite(0,0,"bumblebee-glow"),this.sprite=n.add.sprite(0,0,"bumblebee"),this.sprite.setScale(.7),this.trailSprite=n.add.sprite(0,0,"bumblebee-trail"),this.trailSprite.setScale(.7),this.armorRecovery=!1,this.inMotion=!1,this.setPosition(n.levelManager.startX,n.levelManager.startY),this.startCameraFollow(),this.move(i.UP)}var t,n,o;return t=e,(n=[{key:"startCameraFollow",value:function(){this.g.cameras.main.startFollow(this.sprite,!1,.1,.1)}},{key:"stopCameraFollow",value:function(){this.g.cameras.main.stopFollow()}},{key:"move",value:function(e,t){this.inMotion&&!t||!this.active||(t||(this.startPosition={x:this.x,y:this.y}),this.calcMove(e))}},{key:"stop",value:function(){this.g.cameras.main.shake(250,.0025),this.inMotion=!1,this.sprite.setScale(.7),Ve="hover",this.sprite.play("".concat(Ye,"-").concat(Ve))}},{key:"calcAnimation",value:function(e){switch(e){case Ge:this.sprite.setScale(.7),Ve="up",this.sprite.play("".concat(Ye,"-").concat(Ve)),this.trailSprite.setAngle(270),this.trailSprite.setAlpha(1),this.trailSprite.play("trail-reveal");break;case We:this.sprite.setScale(.7),Ve="down",this.sprite.play("".concat(Ye,"-").concat(Ve)),this.trailSprite.setAngle(90),this.trailSprite.setAlpha(1),this.trailSprite.play("trail-reveal");break;case Ue:this.sprite.setScale(-.7,.7),Ve="side",this.sprite.play("".concat(Ye,"-").concat(Ve)),this.trailSprite.setAngle(180),this.trailSprite.setAlpha(1),this.trailSprite.play("trail-reveal");break;case Xe:this.sprite.setScale(.7),Ve="side",this.sprite.play("".concat(Ye,"-").concat(Ve)),this.trailSprite.setAngle(0),this.trailSprite.setAlpha(1),this.trailSprite.play("trail-reveal")}}},{key:"calcMove",value:function(e){for(var t=this.g,n=t.levelManager,o=!0,a=0,r=null,s=null;o;)a++,s=ae(e,this.x,this.y,a),(r=n.checkAllTiles(s))&&(o=!1);switch(r.layerName){case i.ELECTRIC_GATE:case i.ZAPPER_WALLS:case i.WALL:case i.GATE:case i.GATE_BLOCKS:a--;break;case i.EXIT:a++}a<1||(Be.playSound("move-swoosh"),this.inMotion=e,this.calcAnimation(e),s=ae(e,this.x,this.y,a),this.tween=t.tweens.add({targets:this.sprite,x:s.x,y:s.y,duration:i.STEP_SPEED*a,onComplete:this.onTweenComplete.bind(this,r)}))}},{key:"onTweenComplete",value:function(e){var t=this.g;switch(this.trailSprite.setAlpha(0),t.levelManager.closeGate(),e.layerName){case i.EXIT:this.exit();break;case i.BUMPER:this.bump(e);break;case i.WARPS:this.warp(e);break;case i.SPIKES:this.takeHit(i.SPIKES);break;case i.ELECTRIC_GATE:case i.ZAPPER_WALLS:case i.WALL:case i.GATE:case i.GATE_BLOCKS:this.stop();break;default:console.warn("No logic for tile layer",e.layerName),this.stop()}}},{key:"exit",value:function(){var e=this,t=this.g;this.stopCameraFollow(),t.levelManager.transition(),this.bringToTop(),t.bringFgToTop(),this.tween=t.tweens.add({targets:this.sprite,y:"+="+i.HEIGHT,duration:i.TRANSITION_DURATION,ease:"Sine.easeOut",onComplete:function(){t.levelManager.onTransitionComplete(),e.setPosition(t.levelManager.startX,t.levelManager.startY),e.startCameraFollow(),e.inMotion=!1,e.move(i.UP)}})}},{key:"bringToTop",value:function(){var e=this.g;e.children.bringToTop(this.glowSprite),e.children.bringToTop(this.sprite),e.children.bringToTop(this.trailSprite)}},{key:"warp",value:function(e){var t=this,n=this.g;Be.playSound("portal-enter"),e.highlight.play("warp-enter-exit"),this.sprite.setVisible(!1),this.glowSprite.setVisible(!1),this.trailSprite.setVisible(!1),this.tween=n.tweens.add({targets:this.sprite,x:e.warpTo.x,y:e.warpTo.y,duration:100,onComplete:function(){Be.playSound("portal-exit"),e.warpTo.highlight.play("warp-enter-exit"),t.sprite.setVisible(!0),t.glowSprite.setVisible(!0),t.trailSprite.setVisible(!0),t.move(e.warpTo.direction,!0)}})}},{key:"bump",value:function(e){e.play("bump"),Be.playSound("bumper");var t=je.getSessionItem("Bumps");switch(t++,je.setSessionItem("Bumps",t),this.inMotion){case i.LEFT:case i.RIGHT:this.move(e.bump[0],!0);break;case i.UP:case i.DOWN:this.move(e.bump[1],!0)}}},{key:"takeHit",value:function(e){var t=this,n=this.g;if(n.activePowerUp!==i.ARMOR)return this.explode(),!1;this.armorRecovery=!0,n.startCoolDown();var o=n.add.sprite(this.x,this.y,"armor-burst");return o.play("armor-burst"),o.once("animationcomplete",(function(){o.destroy()})),n.burstArmor(),Be.playSound("armor-destroyed"),this.inMotion?(this.tween.stop(),this.trailSprite.setAlpha(0),this.setPosition(this.startPosition.x,this.startPosition.y),n.time.delayedCall(500,(function(){t.inMotion=!1}))):e!==i.EXPANDERS&&e!==i.ZAPPER_WALLS&&e!==i.ELECTRIC_GATE||this.setPosition(this.startPosition.x,this.startPosition.y),Ye="bumblebee",Ve="hover",this.sprite.play("".concat(Ye,"-").concat(Ve)),n.cameras.main.shake(1e3,.01),n.tweens.add({targets:this.sprite,alpha:0,repeat:10,duration:100,repeatDelay:100,onComplete:function(){t.armorRecovery=!1,t.sprite.setAlpha(1)}}),!0}},{key:"explode",value:function(){var e=this.g;this.tween.stop(),this.glowSprite.setVisible(!1),this.glowSprite.setActive(!1),this.sprite.setVisible(!1),this.sprite.setActive(!1),this.trailSprite.setVisible(!1),this.trailSprite.setActive(!1);for(var t=e.add.particles("cake-particles").createEmitter({x:this.sprite.x,y:this.sprite.y,speed:{min:100,max:300},lifespan:3e3,on:!1}),n=[],o=0;o<7;o++){var a=o+1;n.push("particle-".concat(a,".png"))}t.setFrame(n),t.explode(30),e.cameras.main.shake(500,.005),Be.playSound("gameover-splat");var r=e.add.sprite(this.x,this.y,"bumblebee");r.play("bumblebee-death");var s=e.tweens.createTimeline();s.add({targets:r,y:"-=200",duration:500,ease:"Quad.easeOut"}),s.add({targets:r,y:"+="+i.HEIGHT,duration:1e3,ease:"Quad.easeIn",onComplete:function(){e.showContinue()}}),s.play()}},{key:"turnOnMagnet",value:function(){var e=this.g;this.glowSprite.setScale(0),this.glowSprite.setTexture("magnet-animation"),this.glowSprite.setAlpha(0),this.glowSprite.setScale(1),this.glowSprite.play("magnet-animation"),e.tweens.add({targets:this.glowSprite,alpha:.5,scaleX:2,scaleY:2,duration:300})}},{key:"turnOffMagnet",value:function(){this.g,this.glowSprite.anims.stop(),this.glowSprite.setTexture("bumblebee-glow"),this.glowSprite.setAlpha(1),this.glowSprite.setScale(1)}},{key:"turnOnArmor",value:function(){var e=this.g;Ye="armor-bumblebee",this.sprite.play("".concat(Ye,"-").concat(Ve));var t=e.add.sprite(this.x,this.y,"armor-burst");t.play("armor-burst"),t.once("animationcomplete",(function(){t.destroy()}))}},{key:"setPosition",value:function(e,t){this.x=e,this.y=t}},{key:"update",value:function(){this.glowSprite.setPosition(this.sprite.x,this.sprite.y),this.trailSprite.setPosition(this.sprite.x,this.sprite.y)}},{key:"x",get:function(){return this.sprite.x},set:function(e){this.sprite.x=e}},{key:"y",get:function(){return this.sprite.y},set:function(e){this.sprite.y=e}},{key:"width",get:function(){return i.HERO_SIZE}},{key:"height",get:function(){return i.HERO_SIZE}},{key:"active",get:function(){return this.sprite.active},set:function(e){this.sprite.setActive(e)}},{key:"visible",get:function(){return this.sprite.visible}}])&&He(t.prototype,n),o&&He(t,o),e}();function qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ze=0,Ke=i.CENTER_X-1022,Qe=i.CENTER_X+1022,$e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.g=t;var n,o=this.g;this.topFg=[],this.topBg=[],this.bottom=[],this.rising=!1,this.transitionActive=!1,this.receding=!1,Ze=0,this.speed=Ze,this.scrollY=o.levelManager.height,(n=o.add.sprite(i.CENTER_X,this.scrollY,"bile-top")).setScale(.5),n.setOrigin(.5,0),this.topBg.push(n),(n=o.add.sprite(i.CENTER_X-1022,this.scrollY,"bile-top")).setScale(.5),n.setOrigin(.5,0),this.topBg.push(n),(n=o.add.sprite(i.CENTER_X,this.scrollY,"bile-top")).setScale(.5),n.setOrigin(.5,0),this.topFg.push(n),(n=o.add.sprite(i.CENTER_X+1022,this.scrollY,"bile-top")).setScale(.5),n.setOrigin(.5,0),this.topFg.push(n),(n=o.add.sprite(i.CENTER_X,this.scrollY+1022,"bile-fill")).setScale(.5),n.setOrigin(.5,0),this.bottom.push(n),(n=o.add.sprite(i.CENTER_X,this.scrollY+1022,"bile-fill")).setScale(.5),n.setOrigin(.5,0),this.bottom.push(n)}var t,n,o;return t=e,(n=[{key:"update",value:function(){var e=this.g;!this.rising&&!this.receding||this.transitionActive||(this.updateScrollPosition(),this.scrollY-=Ze,this.scrollY<=e.cameras.main.scrollY&&(this.scrollY=e.cameras.main.scrollY),this.receding&&this.scrollY>e.levelManager.height&&(this.receding=!1,this.scrollY=e.levelManager.height))}},{key:"updateScrollPosition",value:function(){var e=this;_.each(this.topBg,(function(t){var n=t.x+2>=Qe?Ke:t.x+2;t.setPosition(n,e.scrollY)})),_.each(this.topFg,(function(t){var n=t.x-2<=Ke?Qe:t.x-2;t.setPosition(n,e.scrollY)})),_.each(this.bottom,(function(t){t.setY(e.scrollY+1022)}))}},{key:"start",value:function(){var e=this,t=this.g;this.rising||(this.rising=!0,this.receding=!1,t.time.delayedCall(i.BILE_START_DELAY,(function(){Ze=(Ze=i.BILE_START_SPEED+i.BILE_SPEED_INCRAMNET*t.levelManager.levelsCleared)<i.BILE_MAX_SPEED?Ze:i.BILE_MAX_SPEED,e.speed=Ze})))}},{key:"transition",value:function(){var e=this.g;this.transitionActive=!0;var t=[];_.each(this.topBg,(function(e){t.push(e)})),_.each(this.topFg,(function(e){t.push(e)})),_.each(this.bottom,(function(e){t.push(e)})),e.tweens.add({targets:t,y:"+="+i.HEIGHT,duration:i.TRANSITION_DURATION,ease:"Sine.easeOut"})}},{key:"reset",value:function(){var e=this,t=this.g;Ze=0,this.speed=Ze,this.receding=!1,this.rising=!1,this.scrollY=t.levelManager.height,this.updateScrollPosition(),_.each(this.topBg,(function(e){t.children.bringToTop(e)})),_.each(this.topFg,(function(e){t.children.bringToTop(e)})),_.each(this.bottom,(function(e){t.children.bringToTop(e)})),t.time.delayedCall(i.BILE_START_DELAY,(function(){e.transitionActive=!1}))}},{key:"knockDown",value:function(){this.g,this.scrollY+=512}},{key:"recede",value:function(){this.g,this.rising&&(this.receding=!0,this.rising=!1,Ze=i.BILE_REVERSE_SPEED,this.speed=Ze)}},{key:"x",get:function(){return 0}},{key:"y",get:function(){return this.scrollY+10}},{key:"width",get:function(){return i.WIDTH}},{key:"height",get:function(){return i.HEIGHT}}])&&qe(t.prototype,n),o&&qe(t,o),e}();function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=at(e);if(t){var i=at(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return it(this,n)}}function it(e,t){return!t||"object"!==Je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.TILE_SIZE;var rt,st,lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(r,Phaser.Scene);var t,n,o,a=ot(r);function r(){return et(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(e){var t=this;st=t.sys.game.dataManager,rt=t.scene.get("SoundManager"),1e3/t.sys.game.loop.targetFps,st.setSessionItem(i.BASE_SCENE,"Play"),t.isContinue=!!e.isContinue,t.queuedPause=!!e.queuedPause,t.queuedPowerUp=e.queuedPowerUp,t.getLastBg=t.isContinue,t.activePowerUp=!1,t.coolDownActive=!1}},{key:"create",value:function(){var e=this;e.bgDark=e.add.sprite(i.CENTER_X-1,-1800,"bg-black"),e.bgDark2=e.add.sprite(i.CENTER_X-1,0,"bg-black"),e.bgDark3=e.add.sprite(i.CENTER_X-1,1800,"bg-black");var t=e.getBgColor();if(e.bg=e.add.sprite(i.CENTER_X-1,-1800,t),e.bg2=e.add.sprite(i.CENTER_X-1,0,t),e.bg3=e.add.sprite(i.CENTER_X-1,1800,t),e.isContinue){var n=st.getSessionItem("checkPointScore");st.setScore(n),e.scoreValue=n}else st.setSessionItem("lastMapIndex",0),st.setSessionItem("checkPointScore",0),st.setScore(0),e.scoreValue=0;e.levelManager=new Me(e),e.player=new ze(e),e.bile=new $e(e),e.fg=[];var o=e.add.sprite(i.CENTER_X,-10,"tubes");o.setOrigin(.5,0),o.setScrollFactor(0),e.fg.push(o);var a=e.add.text(i.CENTER_X,130,"ar"!=e.game.localisationManager.language?e.scoreValue.toLocaleString(e.game.localisationManager.language):e.scoreValue,{fontFamily:"FredBurger Black",fontSize:"86px",color:"#ffef00",align:"center"});if(a.setStroke("#000",12),a.setOrigin(.5),a.setScrollFactor(0),e.fg.push(a),0!==st.getHighScore()){var r=e.add.text(i.CENTER_X,a.y+66,"ar"!=e.game.localisationManager.language?st.getHighScore().toLocaleString(e.game.localisationManager.language):st.getHighScore(),{fontFamily:"FredBurger Black",fontSize:"36px",color:"#FFF",align:"center"});r.setOrigin(.5),r.setScrollFactor(0),e.fg.push(r)}var s=e.add.sprite(i.WIDTH-80,80,"settings-sprite");s.setFrame("btn-pause.png"),s.setScrollFactor(0),s.setInteractive(),s.on("pointerdown",(function(){e.scene.launch("Settings")})),e.fg.push(s);var l={up:function(){e.player.move(i.UP)},down:function(){e.player.move(i.DOWN)},left:function(){e.player.move(i.LEFT)},right:function(){e.player.move(i.RIGHT)}};if(e.swipe=new J(e,l),e.sprites={score:a},rt.playMusic("loop-"+e.levelManager.getDifficulty()),e.events.off("resume"),e.events.on("resume",(function(){rt.resumeMusic()})),e.queuedPause&&(e.queuedPause=!1,e.scene.launch("Settings")),e.queuedPowerUp){switch(e.queuedPowerUp){case i.ARMOR:e.activateArmor();break;case i.MAGNET:e.activateMagnet();break;case i.BOOSTER:e.activateScoreBooster();break;case i.ANTACID:e.activateAntacid()}e.queuedPowerUp=!1}e.time.delayedCall(750,(function(){e.activePowerUp||e.bile.start()})),e.isContinue=!1}},{key:"activateScoreBooster",value:function(){var e=this;rt.playSound("powerup-enabled"),e.activePowerUp=i.BOOSTER;var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"powerup-icons");t.setScale(0),t.setScrollFactor(0),t.setFrame("Booster.png");var n=e.add.sprite(i.CENTER_X,130,"booster-effect");n.play("booster-effect"),n.setScrollFactor(0),n.setAlpha(0);var o=e.add.sprite(i.CENTER_X-e.sprites.score.width/2-25,150,"x2-bounce");o.setScrollFactor(0),o.setAlpha(0),o.play("x2-bounce"),e.fg.push(n),e.fg.push(o),e.fg.push(t);var a=e.tweens.createTimeline();e.tweens.add({targets:[n,o],alpha:1,duration:500,ease:"Quad.easeOut"}),a.add({targets:t,scaleX:.5,scaleY:.5,duration:500,ease:"Back.easeOut"}),a.add({targets:t,scaleX:0,scaleY:0,duration:250,delay:500,ease:"Back.easeIn",onComplete:function(){e.bile.start(),e.scoreBoosterActive=!0}}),a.add({targets:[n,o],delay:i.POWER_UP_DURATION,alpha:0,repeat:10,duration:100,repeatDelay:100,onComplete:function(){e.startCoolDown(),a.destroy(),t.setActive(!1),n.setActive(!1),o.setActive(!1)}}),a.play()}},{key:"activateArmor",value:function(){var e=this;rt.playSound("powerup-enabled"),e.activePowerUp=i.ARMOR,e.player.turnOnArmor();var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"powerup-icons");t.setScale(0),t.setScrollFactor(0),t.setFrame("Armor.png"),e.fg.push(t);var n=e.tweens.createTimeline();n.add({targets:t,scaleX:.5,scaleY:.5,duration:500,ease:"Back.easeOut"}),n.add({targets:t,scaleX:0,scaleY:0,duration:250,delay:500,ease:"Back.easeIn",onComplete:function(){n.destroy(),t.setActive(!1),e.bile.start()}}),n.play()}},{key:"burstArmor",value:function(){var e=this,t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"powerup-icons");t.setScrollFactor(0),t.setScale(.5),t.setFrame("Armor.png"),e.fg.push(t),e.tweens.add({targets:t,alpha:0,repeat:5,duration:100,repeatDelay:100,onComplete:function(){t.setActive(!1)}})}},{key:"activateMagnet",value:function(){var e=this;rt.playSound("powerup-enabled"),e.activePowerUp=i.MAGNET,e.player.turnOnMagnet();var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"powerup-icons");t.setScale(0),t.setScrollFactor(0),t.setFrame("Magnet.png"),e.fg.push(t);var n=e.tweens.createTimeline();n.add({targets:t,scaleX:.5,scaleY:.5,duration:500,ease:"Back.easeOut"}),n.add({targets:t,scaleX:0,scaleY:0,duration:250,delay:500,ease:"Back.easeIn",onComplete:function(){t.setActive(!1),e.bile.start()}}),n.add({targets:e.player.glowSprite,delay:i.POWER_UP_DURATION,alpha:0,repeat:10,duration:100,repeatDelay:100,onComplete:function(){e.startCoolDown(),n.destroy(),e.player.turnOffMagnet()}}),n.play()}},{key:"activateAntacid",value:function(){var e=this;rt.playSound("powerup-enabled"),e.activePowerUp=i.ANTACID,e.bile.recede();var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"powerup-icons");t.setScale(0),t.setScrollFactor(0),t.setFrame("Antacid.png"),e.fg.push(t);var n=e.add.sprite(i.CENTER_X,i.HEIGHT+200,"bubbles");n.setOrigin(.5,1),n.setScrollFactor(0),n.play("bubbling"),e.fg.push(n);var o=e.tweens.createTimeline();o.add({targets:t,scaleX:.5,scaleY:.5,duration:500,ease:"Back.easeOut"}),o.add({targets:t,y:"+="+i.HEIGHT,duration:500,delay:250,ease:"Quad.easeIn"}),o.add({targets:n,y:i.HEIGHT+70,duration:1e3,ease:"Quad.easeOut"}),o.add({targets:n,delay:i.POWER_UP_DURATION,alpha:0,repeat:10,duration:100,repeatDelay:100,onComplete:function(){e.startCoolDown(),o.destroy(),t.setActive(!1),n.setActive(!1),e.bile.start()}}),o.play()}},{key:"startCoolDown",value:function(){var e=this;e.activePowerUp=!1,e.coolDownActive=!0,e.time.delayedCall(i.COOL_DOWN,(function(){e.coolDownActive=!1}))}},{key:"update",value:function(e,t){var n=this;n.sys.game.stats&&n.sys.game.stats.begin(),n.swipe.check(),n.player.update(),n.bile.update(),n.levelManager.watch(n.player);var o=n.levelManager.getScroll();o=o,n.bgDark.y=o-1800,n.bg.y=o-1800,n.bgDark2.y=o,n.bg2.y=o,n.bgDark3.y=o+1800,n.bg3.y=o+1800;var a=st.getScore();n.scoreValue!==a&&(n.scoreValue=a,n.sprites.score.setText("ar"!=n.game.localisationManager.language?a.toLocaleString(n.game.localisationManager.language):a)),_.each(n.fg,(function(e){e.anims&&e.anims.currentAnim&&"x2-bounce"===e.anims.currentAnim.key&&e.setX(i.CENTER_X-n.sprites.score.width/2-25)})),n.sys.game.stats&&n.sys.game.stats.end()}},{key:"getBgColor",value:function(){var e,t=this;return t.getLastBg?(t.getLastBg=!1,void 0===(e=st.getSessionItem("bgColor"))&&(e=i.BG_COLORS[0],console.warn("getBgColor should not get this")),e):(void 0!==t.bgColors&&0!==t.bgColors.length||(t.bgColors=Phaser.Utils.Array.Shuffle(_.clone(i.BG_COLORS))),e=t.bgColors.pop(),st.setSessionItem("bgColor",e),e)}},{key:"transitionBg",value:function(){var e=this,t=e.getBgColor();e.tweens.add({targets:e.bg,alpha:0,duration:i.TRANSITION_DURATION/2,ease:"Cubic.easeOut",onComplete:function(){e.bg.setTexture(t),e.tweens.add({targets:e.bg,alpha:1,ease:"Cubic.easeIn",duration:i.TRANSITION_DURATION/2})}}),e.tweens.add({targets:e.bg2,alpha:0,duration:i.TRANSITION_DURATION/2,ease:"Cubic.easeOut",onComplete:function(){e.bg2.setTexture(t),e.tweens.add({targets:e.bg2,alpha:1,ease:"Cubic.easeIn",duration:i.TRANSITION_DURATION/2})}}),e.tweens.add({targets:e.bg3,alpha:0,duration:i.TRANSITION_DURATION/2,ease:"Cubic.easeOut",onComplete:function(){e.bg3.setTexture(t),e.tweens.add({targets:e.bg3,alpha:1,ease:"Cubic.easeIn",duration:i.TRANSITION_DURATION/2})}})}},{key:"onSdkResume",value:function(){this.scene.launch("Settings")}},{key:"showContinue",value:function(){var e=this;e.time.delayedCall(500,(function(){e.bile.speed=0,e.scene.launch("Score",{fadeBg:!0})}))}},{key:"bringFgToTop",value:function(){for(var e=this,t=e.fg.length-1;t>-1;t--){var n=e.fg[t];n.active||(n.destroy(),e.fg.splice(t,1))}_.each(e.fg,(function(t){e.children.bringToTop(t)}))}}])&&tt(t.prototype,n),o&&tt(t,o),r}();function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function dt(e,t){return(dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=gt(e);if(t){var i=gt(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return ht(this,n)}}function ht(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt,yt="slider-on.png",_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dt(e,t)}(r,Phaser.Scene);var t,n,o,a=ft(r);function r(){return ut(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(){var e=this;e.scene.get("SoundManager").pauseMusic(),mt=e.sys.game.dataManager,e.scene.pause(mt.getSessionItem(i.BASE_SCENE))}},{key:"create",value:function(){var e=this,t=[],n=e.add.sprite(i.CENTER_X,i.CENTER_Y,"overlay-bg");n.setAlpha(0);var o=-i.WIDTH/2,a=e.add.sprite(o,i.CENTER_Y+150,"settings-sprite");a.setFrame("window.png"),t.push(a);var r=e.add.sprite(o,a.y-336,"settings-bb","body/body_00.png");t.push(r);var s=e.add.sprite(r.x,r.y,"settings-bb");t.push(s),e.children.bringToTop(r);var l=e.add.sprite(r.x,r.y,"settings-bb");l.play("settings-eyes"),t.push(l);var c=e.add.sprite(r.x,r.y,"settings-bb");c.play("settings-foot"),t.push(c),function t(){s.play("settings-arm-up"),s.once("animationcomplete",(function(){s.play("settings-finger-wiggle"),s.once("animationcomplete",(function(){s.play("settings-arm-down"),s.once("animationcomplete",(function(){s.play("settings-finger-pick"),s.once("animationcomplete",(function(){e.time.delayedCall(1e3,(function(){t()}))}))}))}))}))}();var u=e.add.sprite(o,a.y+225,"settings-sprite");u.setFrame("btn-x.png"),t.push(u);var p=e.add.text(o,a.y-550,e.game.localisationManager.GetString("paused"),{fontFamily:"FredBurger Black",fontSize:"65px",color:"#FFF",align:"center"});p.setOrigin(.5),p.setStroke("#000",16),t.push(p),"Play"===mt.getSessionItem(i.BASE_SCENE)?p.setText(e.game.localisationManager.GetString("paused")):p.setText(e.game.localisationManager.GetString("settings")),w(p,e.scale.width,200);var d=mt.getItem(i.MUSIC_ON),f=mt.getItem(i.SOUNDS_ON),h=e.add.sprite(o+25,a.y-50,"settings-sprite");t.push(h),h.setFrame(d?yt:"slider-off.png"),h.setOrigin(0,.5);var g=e.add.text(o-100,h.y,e.game.localisationManager.GetString("music"),{fontFamily:"FredBurger Black",fontSize:"40px",color:"#000",align:"center"});g.setOrigin(.5),w(g,220,200),t.push(g);var m=e.add.sprite(o+25,a.y+55,"settings-sprite");t.push(m),m.setFrame(f?yt:"slider-off.png"),m.setOrigin(0,.5);var y=e.add.text(g.x,m.y,e.game.localisationManager.GetString("sfx"),{fontFamily:"FredBurger Black",fontSize:"40px",color:"#000",align:"center"});y.setOrigin(.5),w(y,220,200),t.push(y);var _=e.add.text(o+204,a.y+204,"v "+e.sys.game.gameConfig.version,{fontFamily:"FredBurger Black",fontSize:"24px",color:"#000",align:"center"});_.setOrigin(1,.5),t.push(_),h.setInteractive(),h.on("pointerdown",(function(){d=!d,mt.setItem(i.MUSIC_ON,d),h.setFrame(h.frame.name===yt?"slider-off.png":yt)})),m.setInteractive(),m.on("pointerdown",(function(){f=!f,mt.setItem(i.SOUNDS_ON,f),m.setFrame(m.frame.name===yt?"slider-off.png":yt)})),u.setInteractive(),u.once("pointerdown",(function(){e.tweens.add({targets:n,alpha:0,duration:250}),e.tweens.add({targets:t,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){e.scene.stop("Settings"),e.scene.resume(mt.getSessionItem(i.BASE_SCENE))}})})),e.tweens.add({targets:n,alpha:.9,duration:250}),e.tweens.add({targets:t,x:"+="+i.WIDTH,duration:500,ease:"Back.easeOut"})}}])&&pt(t.prototype,n),o&&pt(t,o),r}();function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=At(e);if(t){var i=At(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return St(this,n)}}function St(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.ARMOR,i.MAGNET,i.BOOSTER,i.ANTACID;var Ot,It,xt,kt,Ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(r,Phaser.Scene);var t,n,o,a=Et(r);function r(){return bt(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(){var e=this;e.transitionActive=!0,Ot=e.scene.get("SoundManager"),It=e.sys.game.dataManager}},{key:"create",value:function(){var e=this;e.events.off("resume"),e.events.on("resume",(function(e,t){console.log("On Store Resume!"),Ot.resumeMusic()}));var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"overlay-bg");t.setAlpha(.9);var n=[],o=-i.WIDTH/2,a=e.add.text(o,i.CENTER_Y-400,e.game.localisationManager.GetString("begin_powerup"),{fontFamily:"FredBurger Black",fontSize:"40px",color:"#000",align:"center"});a.setOrigin(.5),w(a,e.scale.width,200),n.push(a);var r=e.add.sprite(o-13,i.CENTER_Y-335,"store-sprite");r.setFrame("coin.png"),r.setOrigin(1,.5),n.push(r);var s=It.getCoins(),l=e.add.text(o-13,r.y,"ar"!=e.game.localisationManager.language?s.toLocaleString(e.game.localisationManager.language):s,{fontFamily:"FredBurger Black",fontSize:"44px",color:"#fcbd19",align:"center"});l.setOrigin(0,.5),l.setStroke("#FFF",12),n.push(l);var c=e.add.sprite(o-158,i.CENTER_Y-140,"store-sprite");c.setFrame("armor.png"),c.powerUp=i.ARMOR,c.cost=i.ARMOR_COST,c.setInteractive(),c.on("pointerdown",b);var u=e.add.text(c.x,c.y+56,i.ARMOR_COST,{fontFamily:"FredBurger Black",fontSize:"33px",color:"#000",align:"center"});u.setOrigin(0,.5),n.push(u),c.priceText=u;var p=e.add.text(c.x,c.y-95,e.game.localisationManager.GetString("armor"),{fontFamily:"FredBurger Black",fontSize:"24px",color:"#000",align:"center"});p.setOrigin(.5),w(p,270,100);var d=e.add.sprite(c.x,c.y,"store-sprite");d.setFrame("lock.png"),c.lock=d,n.push(c),n.push(u),n.push(p),n.push(d);var f=e.add.sprite(o+158,i.CENTER_Y-140,"store-sprite");f.setFrame("magnet.png"),f.powerUp=i.MAGNET,f.cost=i.MAGNET_COST,f.setInteractive(),f.on("pointerdown",b),(u=e.add.text(f.x,f.y+56,i.MAGNET_COST,{fontFamily:"FredBurger Black",fontSize:"33px",color:"#000",align:"center"})).setOrigin(0,.5),f.priceText=u;var h=e.add.text(f.x,f.y-95,e.game.localisationManager.GetString("magnet"),{fontFamily:"FredBurger Black",fontSize:"24px",color:"#000",align:"center"});h.setOrigin(.5),w(h,270,100),(d=e.add.sprite(f.x,f.y,"store-sprite")).setFrame("lock.png"),f.lock=d,n.push(f),n.push(u),n.push(h),n.push(d);var g=e.add.sprite(o-158,i.CENTER_Y+180,"store-sprite");g.setFrame("booster.png"),g.powerUp=i.BOOSTER,g.cost=i.BOOSTER_COST,g.setInteractive(),g.on("pointerdown",b),(u=e.add.text(g.x,g.y+56,i.BOOSTER_COST,{fontFamily:"FredBurger Black",fontSize:"33px",color:"#000",align:"center"})).setOrigin(0,.5),g.priceText=u;var m=e.add.text(g.x,g.y-95,e.game.localisationManager.GetString("score_booster"),{fontFamily:"FredBurger Black",fontSize:"24px",color:"#000",align:"center"});m.setOrigin(.5),w(m,270,100),(d=e.add.sprite(g.x,g.y,"store-sprite")).setFrame("lock.png"),g.lock=d,n.push(g),n.push(u),n.push(m),n.push(d);var y=e.add.sprite(o+158,i.CENTER_Y+180,"store-sprite");y.setFrame("antacid.png"),y.powerUp=i.ANTACID,y.cost=i.ANTACID_COST,y.setInteractive(),y.on("pointerdown",b),(u=e.add.text(y.x,y.y+56,i.ANTACID_COST,{fontFamily:"FredBurger Black",fontSize:"33px",color:"#000",align:"center"})).setOrigin(0,.5),y.priceText=u;var _=e.add.text(y.x,y.y-95,e.game.localisationManager.GetString("antacid"),{fontFamily:"FredBurger Black",fontSize:"24px",color:"#000",align:"center"});_.setOrigin(.5),w(_,270,100),(d=e.add.sprite(y.x,y.y,"store-sprite")).setFrame("lock.png"),y.lock=d,n.push(y),n.push(u),n.push(_),n.push(d);var v=e.add.sprite(o,i.CENTER_Y+390,"store-sprite");function b(){var o=this;if(!e.transitionActive){var a=It.getCoins();this.cost<=a&&(It.setCoins(a-this.cost),e.transitionActive=!0),e.transitionActive&&(e.tweens.add({targets:t,alpha:0,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){e.scene.stop("Store"),e.scene.stop("Play"),e.scene.start("Play",{isContinue:!1,queuedPause:!1,queuedPowerUp:o.powerUp})}}))}}v.setFrame("btn-play.png"),v.setInteractive(),v.on("pointerdown",(function(){e.transitionActive||(e.transitionActive=!0,Ot.playSound("btn-regular"),e.tweens.add({targets:t,alpha:0,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){e.scene.stop("Store"),e.scene.stop("Play"),e.scene.start("Play",{isContinue:!1,queuedPause:!1,queuedPowerUp:!1})}}))})),n.push(v),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:500,ease:"Back.easeOut",onComplete:function(){e.transitionActive=!1}}),e.assets={armor:c,magnet:f,booster:g,antacid:y}}},{key:"update",value:function(){var e=It.getCoins();_.each(this.assets,(function(t){("Adverstisement"===t.cost||t.lock.active&&e>=t.cost)&&t.lock.setVisible(!1)}))}}])&&wt(t.prototype,n),o&&wt(t,o),r}();function Rt(e){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=Mt(e);if(t){var i=Mt(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){return!t||"object"!==Rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ht,Bt,jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(r,Phaser.Scene);var t,n,o,a=Dt(r);function r(){return Pt(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(e){var t=this;t.transitionActive=!0,(xt=t.scene.get("SoundManager")).playMusic("loop-end"),(kt=t.sys.game.dataManager).saveCoins(),kt.setSessionItem("continueAvailable",!1),t.scene.pause(kt.getSessionItem(i.BASE_SCENE))}},{key:"create",value:function(){var e=this;e.events.off("resume"),e.events.on("resume",(function(e,t){console.log("On Continue Resume!"),xt.resumeMusic()}));var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"overlay-bg");t.setAlpha(0);var n=[],o=-i.WIDTH/2,a=e.add.sprite(o,i.CENTER_Y+172,"continue-sprite");a.setFrame("window.png"),n.push(a);var r=e.add.sprite(o,a.y-430,"continue-wing");n.push(r);var s=e.add.sprite(o,a.y-430,"continue-sprite","body.png");n.push(s);var l=e.add.sprite(o,a.y-430,"continue-head");n.push(l),function t(){r.play("continue-wing"),l.play("continue-head"),e.time.delayedCall(5e3,t)}();var c=e.add.sprite(o,a.y-620,"continue-sprite");c.setFrame("text-continue.png"),n.push(c);var u=e.add.sprite(o+16,a.y-180,"continue-sprite");u.setFrame("coin.png"),u.setOrigin(1,.5),n.push(u);var p=kt.getCoins(),d=e.add.bitmapText(o+8,u.y,"LondrinaSolid59_Yellow_BorderWhite","ar"!=e.game.localisationManager.language?p.toLocaleString(e.game.localisationManager.language):p,59,1);d.setOrigin(0,.5),n.push(d);var f=e.add.sprite(o,a.y-60,"continue-sprite");f.setFrame("btn-continue.png"),n.push(f),p>=200?(f.setInteractive(),f.on("pointerdown",(function(){e.transitionActive||(e.transitionActive=!0,e.tweens.add({targets:t,alpha:0,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){xt.playSound("btn-play"),kt.setCoins(p-200),e.scene.stop("Continue"),e.scene.stop("Play"),e.scene.start("Play",{isContinue:!0,queuedPause:!1,queuedPowerUp:i.BOOSTER})}}))}))):f.setAlpha(.25);var h=e.add.sprite(o,a.y+85,"continue-sprite");h.setFrame("btn-watch.png"),h.setInteractive(),h.on("pointerdown",(function(){e.transitionActive||(e.transitionActive=!0,apiManager.showAd().then((function(){e.tweens.add({targets:t,alpha:0,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){console.log("TODO: Show Ad (Pause game after ad has finished)"),e.scene.stop("Continue"),e.scene.stop("Play"),e.scene.start("Play",{isContinue:!0,queuedPause:!0,queuedPowerUp:i.BOOSTER})}})})))})),n.push(h);var g=e.add.sprite(o,a.y+260,"continue-sprite");g.setFrame("btn-x.png"),g.setInteractive(),g.on("pointerdown",(function(){e.transitionActive||(xt.playSound("btn-regular"),e.transitionActive=!0,e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){e.scene.stop("Continue"),e.scene.launch("Score",{fadeBg:!1})}}))})),n.push(g);var m=e.add.sprite(f.x+190,f.y,"continue-sprite","x2.png");m.setScale(.5),n.push(m),f.alpha<1&&m.setAlpha(0);var y=e.add.sprite(h.x+190,h.y,"continue-sprite","x2.png");y.setScale(1),n.push(y),e.tweens.add({targets:t,alpha:.9,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:500,ease:"Back.easeOut",onComplete:function(){e.transitionActive=!1,1===f.alpha&&e.tweens.add({targets:m,scaleX:1,scaleY:1,repeat:-1,yoyo:!0,ease:"Quad.easeInOut",duration:1e3}),e.tweens.add({targets:y,scaleX:.5,scaleY:.5,repeat:-1,yoyo:!0,ease:"Quad.easeInOut",duration:1e3})}})}}])&&Nt(t.prototype,n),o&&Nt(t,o),r}();function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Xt(e,t){return(Xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=zt(e);if(t){var i=zt(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Vt(this,n)}}function Vt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zt(e){return(zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xt(e,t)}(r,Phaser.Scene);var t,n,o,a=Yt(r);function r(){return Wt(this,r),a.apply(this,arguments)}return t=r,(n=[{key:"init",value:function(e){var t=this;t.transitionActive=!0,Ht=t.scene.get("SoundManager"),(Bt=t.sys.game.dataManager).setSessionItem("beeMoneyCount",0),Bt.setSessionItem("continueAvailable",!0),Bt.checkHighScore(),t.fadeBg=!!e.fadeBg,t.fadeBg&&(Ht.playMusic("loop-end"),Bt.saveCoins(),t.scene.pause(Bt.getSessionItem(i.BASE_SCENE)))}},{key:"create",value:function(){var e=this;e.events.off("resume"),e.events.on("resume",(function(e,t){console.log("On Score Resume!"),Ht.resumeMusic()}));var t=e.add.sprite(i.CENTER_X,i.CENTER_Y,"overlay-bg");t.setAlpha(e.fadeBg?0:.9);var n=[],o=-i.WIDTH/2,a=e.add.sprite(o,i.CENTER_Y+100,"score-sprite");a.setFrame("window.png"),n.push(a);var r=e.add.sprite(o,a.y-266,"score-sprite","body.png");n.push(r);var s=e.add.sprite(r.x,r.y,"score-sprite");s.play("score-eyes"),n.push(s),e.children.bringToTop(a);var l=e.add.text(o,a.y-500,e.game.localisationManager.GetString("game_over"),{fontFamily:"FredBurger Black",fontSize:"76px",color:"#FFF",align:"center"});l.setOrigin(.5),l.setStroke("#000",12),w(l,e.scale.width,100),n.push(l);var c=e.add.text(o,a.y-170,e.game.localisationManager.GetString("final_score"),{fontFamily:"FredBurger Black",fontSize:"36px",color:"#000",align:"center"});c.setOrigin(.5),w(c,400,100),n.push(c);var u=Bt.getScore(),p=e.add.text(o,a.y-95,"ar"!=e.game.localisationManager.language?u.toLocaleString(e.game.localisationManager.language):u,{fontFamily:"FredBurger Black",fontSize:"94px",color:"#ffef00",align:"center"});p.setOrigin(.5),p.setStroke("#000",12),w(p,400,200),n.push(p);var d=e.add.text(o,a.y-10,e.game.localisationManager.GetString("best"),{fontFamily:"FredBurger Black",fontSize:"32px",color:"#000",align:"center"});d.setOrigin(.5),w(d,400,100),n.push(d);var f=Bt.getHighScore(),h=e.add.text(o,a.y+30,"ar"!=e.game.localisationManager.language?f.toLocaleString(e.game.localisationManager.language):f,{fontFamily:"FredBurger Black",fontSize:"44px",color:"#000",align:"center"});h.setOrigin(.5),w(h,400,100),n.push(h);var g=e.add.sprite(o-13,a.y+120,"score-sprite");g.setFrame("coin.png"),g.setOrigin(1,.5),n.push(g);var m=Bt.getCoins(),y=e.add.text(o-13,g.y,"ar"!=e.game.localisationManager.language?m.toLocaleString(e.game.localisationManager.language):m,{fontFamily:"FredBurger Black",fontSize:"44px",color:"#fcbd19",align:"center"});y.setOrigin(0,.5),y.setStroke("#FFF",12),n.push(y);var _=e.add.sprite(o,a.y+254,"score-sprite");_.setFrame("btn-play.png"),_.setInteractive(),_.on("pointerdown",(function(){e.transitionActive||(Ht.playSound("btn-play"),e.transitionActive=!0,e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:250,ease:"Quad.easeOut",onComplete:function(){e.scene.stop("Score"),e.scene.launch("Store")}}))})),n.push(_),e.fadeBg&&e.tweens.add({targets:t,alpha:.9,duration:250}),e.tweens.add({targets:n,x:"+="+i.WIDTH,duration:500,ease:"Back.easeOut",onComplete:function(){e.transitionActive=!1;var t=Bt.getScore();e.time.delayedCall(500,(function(){t>=i.SCORE_GREAT?Ht.playSound("vo-gameover-great"):(i.SCORE_MEDIUM,Ht.playSound("vo-gameover-poor"))}))}})}}])&&Ut(t.prototype,n),o&&Ut(t,o),r}(),Zt=n(122);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=tn(e);if(t){var i=tn(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tn(e){return(tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nn=Phaser.Loader.FILE_POPULATED,on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(a,Phaser.Loader.File);var t,n,o,i=Jt(a);function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return t=a,(n=[{key:"load",value:function(){if(this.state===nn)this.loader.nextFile(this,!0);else{var e=this.config;e.active=this.onLoad.bind(this),e.inactive=this.onError.bind(this),e.fontactive=this.onFontActive.bind(this),e.fontinactive=this.onFontInactive.bind(this),window.WebFont?window.WebFont.load(e):Zt.load(e)}}},{key:"onLoad",value:function(){this.loader.nextFile(this,!0)}},{key:"onError",value:function(){this.loader.nextFile(this,!1)}},{key:"onFontActive",value:function(e,t){this.loader.emit("webfontactive",this,e)}},{key:"onFontInactive",value:function(e,t){this.loader.emit("webfontinactive",this,e)}}])&&Qt(t.prototype,n),o&&Qt(t,o),a}(),an=Phaser.Utils.Objects.IsPlainObject,rn=function(e,t){return an(e)?(t=e).hasOwnProperty("config")?(t.type="webfont",t.url=""):t={key:"webfont",type:"webfont",url:"",config:t}:t={type:"webfont",url:"",key:e,config:t},this.addFile(new on(this,t)),this};function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=dn(e);if(t){var i=dn(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return pn(this,n)}}function pn(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(a,Phaser.Plugins.BasePlugin);var t,n,o,i=un(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),e.registerFileType("rexWebFont",rn),t}return t=a,(n=[{key:"addToScene",value:function(e){e.sys.load.rexWebFont=rn}}])&&ln(t.prototype,n),o&&ln(t,o),a}();function hn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var gn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.Instance=this,this.language="en",this.localisationData={}}var t,n,o;return t=e,(n=[{key:"SetLocalisationData",value:function(e,t){this.language=e,this.localisationData=t}},{key:"GetString",value:function(e){if(!this.localisationData)return e;var t=this.localisationData[e];if(!t)return e;var n=t[this.language];return n||t.en}}])&&hn(t.prototype,n),o&&hn(t,o),e}();function mn(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var yn,_n=function(){function e(t,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isValidOrientation=!1,this.isLandscape=t,this.rotateElement=document.createElement("div"),this.rotateElement.id="rotate-screen",this.rotateElement.className="hidden",this.rotateElement.style.position="absolute",this.rotateElement.style.width="100%",this.rotateElement.style.height="100%",this.rotateElement.style.top="0",this.rotateElement.style.left="0",this.rotateElement.style.zIndex="2147483647",this.rotateElement.style.backgroundColor="#ff498b",this.rotateElement.style.backgroundImage="url('media/images/rotate.png')",this.rotateElement.style.backgroundRepeat="no-repeat",this.rotateElement.style.backgroundSize="contain",this.rotateElement.style.backgroundPosition="center",this.rotateElement.style.textIndent="-100%",this.rotateElement.innerHTML="please rotate your device",n.appendChild(this.rotateElement),this.onValidOrientation=o,this.onInvalidOrientation=i,window.addEventListener("resize",this.OnResize.bind(this)),window.addEventListener("orientationchange",this.CheckOrientation.bind(this)),this.CheckOrientation()}var t,n,o;return t=e,(n=[{key:"CheckOrientation",value:function(){this.isValidOrientation,this.isValidOrientation=this.isLandscape?window.innerWidth>window.innerHeight:window.innerWidth<window.innerHeight,this.rotateElement.style.display=this.isValidOrientation?"none":"block",this.isValidOrientation?this.onValidOrientation&&this.onValidOrientation.call():this.onInvalidOrientation&&this.onInvalidOrientation.call(),this.isValidOrientation}},{key:"OnResize",value:function(){setTimeout(function(){this.Resize()}.bind(this),50),this.Resize()}},{key:"Resize",value:function(){var e=window.innerWidth,t=window.innerHeight;this.rotateElement.style.width=e+"px",this.rotateElement.style.height=t+"px",this.CheckOrientation()}}])&&mn(t.prototype,n),o&&mn(t,o),e}(),vn=!1,bn=navigator.userAgent,wn=!/Mobi|Android|iP[ao]d|iPhone/i.test(bn)&&(!/Mac/.test(bn)||!navigator.maxTouchPoints||navigator.maxTouchPoints<=1);function Tn(){yn&&yn.scene.isActive("Play")&&yn.scene.getScene("Play").scene.launch("Settings")}function En(){Tn()}function Sn(){}function An(){"hidden"==document.visibilityState&&Tn()}function On(){if(!vn){vn=!0;var e=document.createElement("div");e.id="stage-container",e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",e.style["-webkit-touch-callout"]="none",e.style["-webkit-user-select"]="none",e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",document.body.appendChild(e);var t=Math.max(window.innerHeight/window.innerWidth*768,window.innerWidth/window.innerHeight*768);t=t>1663?1663:t,wn&&(t=1024),i.WIDTH=768,i.HEIGHT=t,i.THIRD_WIDTH=i.WIDTH/3,i.CENTER_X=i.WIDTH/2,i.CENTER_Y=i.HEIGHT/2,i.ASPECT_RATIO=i.WIDTH/i.HEIGHT,(yn=new Phaser.Game({type:Phaser.CANVAS,backgroundColor:3947580,resolution:i.DEVICE_PIXEL_RATIO,parent:e.id,scale:{mode:wn&&window.innerWidth>window.innerHeight?Phaser.Structs.Size.HEIGHT_CONTROLS_WIDTH:Phaser.Structs.Size.WIDTH_CONTROLS_HEIGHT,width:i.WIDTH,height:i.HEIGHT,autoRound:!0},plugins:{global:[{key:"WebFontLoader",plugin:fn,start:!0}]}})).dataManager=new s,yn.localisationManager=new gn,yn.scene.add("Boot",N),yn.scene.add("Preload",W),yn.scene.add("Intro",K),yn.scene.add("Play",lt),yn.scene.add("Settings",_t),yn.scene.add("Store",Ct),yn.scene.add("Continue",jt),yn.scene.add("Score",qt),yn.scene.add("SoundManager",b),yn.scene.start("Boot"),yn.isDesktop=wn,window.addEventListener("blur",En),window.addEventListener("focus",Sn),document.addEventListener("visibilitychange",An)}}!function(){if(wn)On();else new _n(!1,document.body,On,Tn)}()}});
//# sourceMappingURL=bundle.js.map