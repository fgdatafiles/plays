'use strict';(function(){var J,c,ca,i,l,f,E,s,m,g,$,j,R,C,T,P,S,U,X,K,x,y,N,p,h,d,I,n,O,w,z,H,F,Y,A,aa;function v(a,b){function e(){}
e.prototype=a;var c=new e,d;for(d in b)c[d]=b[d];return c}
function ea(a){return a instanceof Array?function(){return B.iter(a)}:"function"==typeof a.iterator?r(a,a.iterator):a.iterator}
function r(a,b){var e=function(){return e.method.apply(e.scope,arguments)};e.scope=a;e.method=b;return e}
var k={},q=function(){return K.__string_rec(this,"")},W=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};k.EReg=W;W.__name__=["EReg"];W.prototype={matchedPos:function(){if(null==this.r.m)throw "No string matched";return{pos:this.r.m.index,len:this.r.m[0].length}},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)a=this.r.m[a];else throw "EReg::matched";return a},match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},__class__:W};var G=function(){this.h={}};k.Hash=G;G.__name__=["Hash"];G.prototype={iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return B.iter(a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty("$"+a)},get:function(a){return this.h["$"+a]},set:function(a,b){this.h["$"+a]=b},__class__:G};var B=function(){};k.HxOverrides=B;B.__name__=["HxOverrides"];B.dateStr=function(a){var b=a.getMonth()+1,e=a.getDate(),c=a.getHours(),d=a.getMinutes(),f=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>e?"0"+e:""+e)+" "+(10>c?"0"+c:""+c)+":"+(10>d?"0"+d:""+d)+":"+(10>f?"0"+f:""+f)};B.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return a=a.split(" "),b=a[0].split("-"),a=a[1].split(":"),new Date(b[0],b[1]-1,b[2],a[0],a[1],a[2]);default:throw "Invalid date format : "+a;}};B.cca=function(a,b){var e=a.charCodeAt(b);return e!=e?void 0:e};B.substr=function(a,b,e){if(null!=b&&0!=b&&null!=e&&0>e)return "";null==e&&(e=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>e&&(e=a.length+e-b);return a.substr(b,e)};B.remove=function(a,b){for(var e=0,c=a.length;e<c;){if(a[e]==b)return a.splice(e,1),!0;e++}
return!1};B.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var V=function(){this.h={}};k.IntHash=V;V.__name__=["IntHash"];V.prototype={keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return B.iter(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},exists:function(a){return this.h.hasOwnProperty(a)},get:function(a){return this.h[a]},set:function(a,b){this.h[a]=b},__class__:V};var ba=function(){};k.Lambda=ba;ba.__name__=["Lambda"];ba.array=function(a){for(var b=[],a=ea(a)();a.hasNext();){var e=a.next();b.push(e)}
return b};ba.has=function(a,b,e){if(null==e)
for(e=ea(a)();e.hasNext();){if(a=e.next(),a==b)return!0}else
for(var c=ea(a)();c.hasNext();)
if(a=c.next(),e(a,b))return!0;return!1};ba.count=function(a,b){var e=0;if(null==b)
for(var c=ea(a)();c.hasNext();)c.next(),e++;else
for(c=ea(a)();c.hasNext();){var d=c.next();b(d)&&e++}
return e};var da=function(){this.length=0};k.List=da;da.__name__=["List"];da.prototype={iterator:function(){return{h:this.h,hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},__class__:da};var L=function(){};k.Reflect=L;L.__name__=["Reflect"];L.field=function(a,b){var e=null;try{e=a[b]}catch(c){}
return e};L.fields=function(a){var b=[];if(null!=a){var e=Object.prototype.hasOwnProperty,c;for(c in a)e.call(a,c)&&b.push(c)}
return b};L.isFunction=function(a){return "function"==typeof a&&!(a.__name__||a.__ename__)};L.compareMethods=function(a,b){return a==b?!0:!L.isFunction(a)||!L.isFunction(b)?!1:a.scope==b.scope&&a.method==b.method&&null!=a.method};var o=function(){};k.Std=o;o.__name__=["Std"];o.string=function(a){return K.__string_rec(a,"")};o.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==B.cca(a,1)||88==B.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};o.parseFloat=function(a){return parseFloat(a)};o.random=function(a){return Math.floor(Math.random()*a)};var Z=function(){this.b=""};k.StringBuf=Z;Z.__name__=["StringBuf"];Z.prototype={__class__:Z};var Q=function(){};k.StringTools=Q;Q.__name__=["StringTools"];Q.urlEncode=function(a){return encodeURIComponent(a)};Q.urlDecode=function(a){return decodeURIComponent(a.split("+").join(" "))};Q.startsWith=function(a,b){return a.length>=b.length&&B.substr(a,0,b.length)==b};Q.isSpace=function(a,b){var e=B.cca(a,b);return 9<=e&&13>=e||32==e};Q.ltrim=function(a){for(var b=a.length,e=0;e<b&&Q.isSpace(a,e);)e++;return 0<e?B.substr(a,e,b-e):a};Q.rtrim=function(a){for(var b=a.length,e=0;e<b&&Q.isSpace(a,b-e-1);)e++;return 0<e?B.substr(a,0,b-e):a};Q.trim=function(a){return Q.ltrim(Q.rtrim(a))};Q.replace=function(a,b,e){return a.split(b).join(e)};var D=k.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};D.TNull=["TNull",0];D.TNull.toString=q;D.TNull.__enum__=D;D.TInt=["TInt",1];D.TInt.toString=q;D.TInt.__enum__=D;D.TFloat=["TFloat",2];D.TFloat.toString=q;D.TFloat.__enum__=D;D.TBool=["TBool",3];D.TBool.toString=q;D.TBool.__enum__=D;D.TObject=["TObject",4];D.TObject.toString=q;D.TObject.__enum__=D;D.TFunction=["TFunction",5];D.TFunction.toString=q;D.TFunction.__enum__=D;D.TClass=function(a){a=["TClass",6,a];a.__enum__=D;a.toString=q;return a};D.TEnum=function(a){a=["TEnum",7,a];a.__enum__=D;a.toString=q;return a};D.TUnknown=["TUnknown",8];D.TUnknown.toString=q;D.TUnknown.__enum__=D;var M=function(){};k.Type=M;M.__name__=["Type"];M.getClassName=function(a){return a.__name__.join(".")};M.getEnumName=function(a){return a.__ename__.join(".")};M.resolveClass=function(a){a=k[a];return null==a||!a.__name__?null:a};M.resolveEnum=function(a){a=k[a];return null==a||!a.__ename__?null:a};M.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw "Too many arguments";}};M.createEmptyInstance=function(a){function b(){}
b.prototype=a.prototype;return new b};M.createEnum=function(a,b,e){var c=L.field(a,b);if(null==c)throw "No such constructor "+b;if(L.isFunction(c)){if(null==e)throw "Constructor "+b+" need parameters";return c.apply(a,e)}
if(null!=e&&0!=e.length)throw "Constructor "+b+" does not need parameters";return c};M.getEnumConstructs=function(a){return a.__constructs__.slice()};M["typeof"]=function(a){switch(typeof a){case "boolean":return D.TBool;case "string":return D.TClass(String);case "number":return Math.ceil(a)==a%2147483648?D.TInt:D.TFloat;case "object":if(null==a)return D.TNull;var b=a.__enum__;if(null!=b)return D.TEnum(b);a=a.__class__;return null!=a?D.TClass(a):D.TObject;case "function":return a.__name__||a.__ename__?D.TObject:D.TFunction;case "undefined":return D.TNull;default:return D.TUnknown}};var t=function(){};k.Xml=t;t.__name__=["Xml"];t.parse=function(a){return C.Parser.parse(a)};t.createElement=function(a){var b=new t;b.nodeType=t.Element;b._children=[];b._attributes=new G;b.setNodeName(a);return b};t.createPCData=function(a){var b=new t;b.nodeType=t.PCData;b.setNodeValue(a);return b};t.createCData=function(a){var b=new t;b.nodeType=t.CData;b.setNodeValue(a);return b};t.createComment=function(a){var b=new t;b.nodeType=t.Comment;b.setNodeValue(a);return b};t.createDocType=function(a){var b=new t;b.nodeType=t.DocType;b.setNodeValue(a);return b};t.createProlog=function(a){var b=new t;b.nodeType=t.Prolog;b.setNodeValue(a);return b};t.createDocument=function(){var a=new t;a.nodeType=t.Document;a._children=[];return a};t.prototype={toString:function(){if(this.nodeType==t.PCData)return this._nodeValue;if(this.nodeType==t.CData)return "<![CDATA["+this._nodeValue+"]]\>";if(this.nodeType==t.Comment)return "<\!--"+this._nodeValue+"--\>";if(this.nodeType==t.DocType)return "<!DOCTYPE "+this._nodeValue+
">";if(this.nodeType==t.Prolog)return "<?"+this._nodeValue+"?>";var a=new Z;if(this.nodeType==t.Element){a.b+=o.string("<");a.b+=o.string(this._nodeName);for(var b=this._attributes.keys();b.hasNext();){var e=b.next();a.b+=o.string(" ");a.b+=o.string(e);a.b+=o.string('="');a.b+=o.string(this._attributes.get(e));a.b+=o.string('"')}
if(0==this._children.length)return a.b+=o.string("/>"),a.b;a.b+=o.string(">")}
for(b=this.iterator();b.hasNext();)e=b.next(),a.b+=o.string(e.toString());this.nodeType==t.Element&&(a.b+=o.string("</"),a.b+=o.string(this._nodeName),a.b+=o.string(">"));return a.b},addChild:function(a){if(null==this._children)throw "bad nodetype";null!=a._parent&&B.remove(a._parent._children,a);a._parent=this;this._children.push(a)},firstElement:function(){if(null==this._children)throw "bad nodetype";for(var a=0,b=this._children.length;a<b;){var e=this._children[a];if(e.nodeType==t.Element)return e;a++}
return null},elementsNamed:function(a){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,e=this.x.length;b<e;){var c=this.x[b];if(c.nodeType==t.Element&&c._nodeName==a)break;b++}
this.cur=b;return b<e},next:function(){for(var b=this.cur,e=this.x.length;b<e;){var c=this.x[b];b++;if(c.nodeType==t.Element&&c._nodeName==a)return this.cur=b,c}
return null}}},elements:function(){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,b=this.x.length;a<b&&!(this.x[a].nodeType==t.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var e=this.x[a],a=a+1;if(e.nodeType==t.Element)return this.cur=a,e}
return null}}},iterator:function(){if(null==this._children)throw "bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},exists:function(a){if(this.nodeType!=t.Element)throw "bad nodeType";return this._attributes.exists(a)},set:function(a,b){if(this.nodeType!=t.Element)throw "bad nodeType";this._attributes.set(a,b)},get:function(a){if(this.nodeType!=t.Element)throw "bad nodeType";return this._attributes.get(a)},getParent:function(){return this._parent},setNodeValue:function(a){if(this.nodeType==t.Element||this.nodeType==t.Document)throw "bad nodeType";return this._nodeValue=a},getNodeValue:function(){if(this.nodeType==t.Element||this.nodeType==t.Document)throw "bad nodeType";return this._nodeValue},setNodeName:function(a){if(this.nodeType!=t.Element)throw "bad nodeType";return this._nodeName=a},getNodeName:function(){if(this.nodeType!=t.Element)throw "bad nodeType";return this._nodeName},__class__:t};J=function(){};c=void 0;ca=void 0;i=void 0;l=void 0;k["com.nick.spongeBob.capri_sun_adventure_desert.DocumentApp"]=J;J.__name__=["com","nick","spongeBob","capri_sun_adventure_desert","DocumentApp"];J.main=function(){y.init();J._fillEntity=new N;J._fillSprite=new p.FillSprite(0,960,560);J._fillEntity.add(J._fillSprite);y.root.addChild(J._fillEntity);f.WorkinCloud.instance._getAssets()._setBaseUrl(J.trimUrl(f.JSEmbedProxy.getBase()));f.WorkinCloud.instance._getDispatcher().addEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,J._onBootstrapLoad);f.WorkinCloud.instance._getAssets().addPackDef("bootstrap");f.WorkinCloud.instance._getAssets().loadPack("bootstrap")};J._onBootstrapLoad=function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,J._onBootstrapLoad);if(c.ConstantsApp.LOAD_FONT_EARLY){f.WorkinCloud.instance._getDispatcher().addEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,J._onFontLoad);var a=f.WorkinCloud.instance._getAssets().getXML(c.ConstantsApp.CONFIG_XML_PATH);f.WorkinCloud.instance.setString(E.ConstantsCloud.STRING_REGION_ID,o.string(a.node.resolve("localization").node.resolve("region").getInnerData()));f.WorkinCloud.instance._getAssets().addPackDef("fonts_"+f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID));f.WorkinCloud.instance._getAssets().loadPack("fonts_"+f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID))}else J._initServices(),T.delay(J._initMain,800)};J._onFontLoad=function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,J._onFontLoad);J._initServices();T.delay(J._initMain,800)};J._initMain=function(){J._main=new ca};J._initServices=function(){for(var a=f.WorkinCloud.instance._getAssets().getXML(c.ConstantsApp.CONFIG_XML_PATH).node.resolve("services").nodes.resolve("service").iterator();a.hasNext();){var b=a.next();switch(b.att.resolve("type").toString()){case "analytics":"true"==b.att.resolve("enabled").toString()&&(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initAnalytics"),s.ServiceAnalytics.init(b.att.resolve("id").toString()));break;case "canadaTracking":"true"==b.att.resolve("enabled").toString()&&(f.WorkinCloud.instance.log("[DocumentApp](_initServices) initCanadaTracking"),s.ServiceAnalytics.enableCanadaTracking(b.att.resolve("showGameTitle").toString()))}}};J.trimUrl=function(a){if(""==a)return "";if(0>a.indexOf("http"))return "/"==a.charAt(0)&&(a=B.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=B.substr(a,b,a.length-b);0>a.indexOf("assets")&&(a+="assets/");return a};ca=function(){this._RATE_REFRESH_SCALE=0.4;f.WorkinCloud.instance.log("[Main] Constructed");this._root=y.root;this._timeline=new N;this._root.addChild(this._timeline);y.uncaughtError.connect(r(this,this.errorHandler));f.WorkinCloud.instance._getInput().prime();this._scaleSprite=new p.Sprite;this._timeline.add(this._scaleSprite);this._layerWorld=new N;this._layerUI=new N;this._timeline.addChild(this._layerWorld);this._timeline.addChild(this._layerUI);this._dt=0;this._timerRefreshScale=0.0010;this._isUIActive=this._isWorldActive=!1;this._flagFirstPlay=!0;this._flagInitialLoadComplete=this._flagWebAudioUnlocked=!1;this._flagGameplayPaused=!0;this._flagJSEmbedExists=this._flagJSEmbedPauseState=!1;K.__instanceof(y._platform.getStage(),h.html.HtmlStage)&&(c.ConstantsApp.scaleFactor=K.__cast(y._platform.getStage(),h.html.HtmlStage).scaleFactor);this._flagJSEmbedExists=f.JSEmbedProxy.getExists();this._changeActions=[];this._flowstack=[];this._addEventListeners();this._beginEngine()};k["com.nick.spongeBob.capri_sun_adventure_desert.Main"]=ca;ca.__name__=["com","nick","spongeBob","capri_sun_adventure_desert","Main"];ca.prototype={_disposeWorld:function(){this._isWorldActive&&(this._isWorldActive=!1,this._world.dispose(),this._world=null)},_onEventInterfaceChange:function(a){this._executeInterfaceChange(a.flowId,a.screenId)},_handleWebAudioUnlock:function(){this._flagWebAudioUnlocked||(this._flagWebAudioUnlocked=!0,f.WorkinCloud.instance._getSound().playSound("audio/silent"))},_onEventFilesLoading:function(a){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LOADING_PROGRESS,a._getData().value)},_onEventInput:function(a){this._handleWebAudioUnlock();f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||this._ui.handleInput(a)&&this._isWorldActive&&this._world.handleInput(a)},_onFlowEvent:function(a){this._addFlowEvent(a.flowId)},_onMuteToggle:function(){f.WorkinCloud.instance.setValue(c.ConstantsApp.BOOL_MUTED,!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_MUTED));f.WorkinCloud.instance._getSound().setMute(f.WorkinCloud.instance.getValue(c.ConstantsApp.BOOL_MUTED))},_enableInput:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(m.WMEventInput.EVENT_INPUT,r(this,this._onEventInput))},_addEventListeners:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(m.WMEventUpdate.EVENT_UPDATE,r(this,this._onEventUpdate));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_MUTE_TOGGLE,r(this,this._onMuteToggle));f.WorkinCloud.instance._getDispatcher().addEventListener(m.WMEventFlow.EVENT_FLOW,r(this,this._onFlowEvent));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE,r(this,this._onWorldGenerationComplete));f.WorkinCloud.instance._getDispatcher().addEventListener(E.ConstantsCloud.EVENT_FILES_LOADING,r(this,this._onEventFilesLoading))},_executeInterfaceChange:function(a,b){for(var e=this._changeActions.length;0<e;)e--,this._changeActions[e]._getScreenId()==b&&this._changeActions[e]._getChangeEvent()==a&&(this._changeActions[e]._getAction()(),this._changeActions.splice(e,1))},_unpauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!1);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_UNPAUSE))},_pauseGameplay:function(a){null==a&&(a=!0);a&&(this._flagGameplayPaused=!0);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_PAUSE))},_executeFlowStack:function(a){if(!this._ui._getHasTransition())switch(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1),a){case c.ConstantsScreen.FLOW_SPLASH_PLAY:f.WorkinCloud.instance._getSound().playMusic("audio/spongebobsquarepants_grandsandfortress");s.ServiceAnalytics.sendCanadaTrackingCall("play");this._onGameNew();this._gotoAndPlayGame();break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP:this._ui.openScreen(c.ConstantsScreen.SCREEN_HELP,!1);s.ServiceAnalytics.sendMilestone("custom3");break;case c.ConstantsScreen.FLOW_HELP_CLOSE:this._ui.closeScreen(c.ConstantsScreen.SCREEN_HELP);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU:f.WorkinCloud.instance.log("[Main] Main Menu Flow Click");this._pauseGameplay();this._ui.openScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE:this._unpauseGameplay();this._ui.closeScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU);break;case c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT:this._ui.openScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES:null!=f.WorkinCloud.instance._getSound().getSound("crowd_charge")&&f.WorkinCloud.instance._getSound().getSound("crowd_charge").setFade(f.WMSound.FADE_OUT,10);this._resetFlagsResults();this._gotoEndGame(!0);break;case c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO:this._ui.closeScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM);break;case c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE:this._pauseGameplay();this._resetFlagsResults();this._gotoEndGame(!1);break;case c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN:this._disposeWorld();s.ServiceAnalytics.sendCanadaTrackingCall("replay");this._onGameNew();this._gotoAndPlayGame();break;case c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_OPEN:this._pauseGameplay();this._ui.openScreen(c.ConstantsScreen.SCREEN_TUTORIAL,!1);break;case c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_CLOSE:this._unpauseGameplay(),this._ui.closeScreen(c.ConstantsScreen.SCREEN_TUTORIAL)}},_runFlowStack:function(){if(0!=this._flowstack.length)
for(;0<this._flowstack.length;)this._executeFlowStack(this._flowstack[0]),this._flowstack.shift()},_addFlowEvent:function(a){this._flowstack.push(a)},_hideOrientationAlert:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Back to landscape."),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!1),f.JSEmbedProxy.unpause(),f.JSEmbedProxy.alertOff())},_showOrientationAlert:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(f.WorkinCloud.instance.log("[Main](_showOrientationAlert) Portrait mode!"),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!0),f.JSEmbedProxy.pause(),f.JSEmbedProxy.alertOn(f.WorkinCloud.instance._getLocalize().getData("orientation_landscape")._getString()))},_onEventUpdate:function(a){this._dt=a.getDt();0.12<this._dt&&(this._dt=0.12);if(this._flagJSEmbedExists&&(f.JSEmbedProxy.getIsPaused()!=this._flagJSEmbedPauseState&&((this._flagJSEmbedPauseState=f.JSEmbedProxy.getIsPaused())?this._pauseGameplay(!1):this._flagGameplayPaused||this._unpauseGameplay()),this._timerRefreshScale-=this._dt,0>=this._timerRefreshScale)){this._timerRefreshScale=this._RATE_REFRESH_SCALE;if(this._flagInitialLoadComplete&&f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)){if(f.JSEmbedProxy.getCanvasHeight()>f.JSEmbedProxy.getCanvasWidth()){this._showOrientationAlert();return}
if(f.WorkinCloud.instance.getValue(c.ConstantsApp.BOOL_ORIENTATION_ALERT)){this._hideOrientationAlert();return}}
this._flagJSEmbedExists&&(a=f.JSEmbedProxy.getCanvasScale()*c.ConstantsApp.scaleFactor,a!=this._scaleSprite.scaleX._value&&(this._scaleSprite.scaleX.set__(this._scaleSprite.scaleY.set__(a)),f.WorkinCloud.instance._getInput()._setScale(a)))}
g.tween.WorkinTweener._getInstance().update(this._dt);f.WorkinCloud.instance.update(this._dt);this._isUIActive&&this._ui.update(this._dt);this._isWorldActive&&(this._world.update(this._dt),this._world.render());f.WorkinCloud.instance._getSound().update(this._dt);f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_GAME_LOSE)?this._onFlowEvent(new m.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_GAME_WIN)?this._onFlowEvent(new m.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_GAME_WIN)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_LEVEL_LOSE)?this._onFlowEvent(new m.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE)):f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_LEVEL_WIN)&&this._onFlowEvent(new m.WMEventFlow(c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN));this._runFlowStack()},_generateWorld:function(){this._isWorldActive&&this._disposeWorld();f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!0);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,!1,c.ConstantsScreen.TRANSITION_SCROLL_UP);this._isWorldActive=!0;this._world=new i.World(this._layerWorld)},_resetFlagsResults:function(){f.WorkinCloud.instance.resetValue(c.ConstantsApp.BOOL_GAME_WIN);f.WorkinCloud.instance.resetValue(c.ConstantsApp.BOOL_GAME_LOSE);f.WorkinCloud.instance.resetValue(c.ConstantsApp.BOOL_LEVEL_WIN);f.WorkinCloud.instance.resetValue(c.ConstantsApp.BOOL_LEVEL_LOSE);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_POOL_PROGRESS,0)},_onGameNew:function(){this._resetFlagsResults()},_gotoEndGame:function(a){this._flagWonPreviousGame=a;this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_END_GAME,!1,c.ConstantsScreen.TRANSITION_SCROLL_DOWN);s.ServiceAnalytics.sendMilestone("custom7")},_gotoSplash:function(){this._enableInput();f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_SPLASH,!1,c.ConstantsScreen.TRANSITION_SCROLL_DOWN);s.ServiceAnalytics.sendMilestone("custom2")},_onWorldGenerationComplete:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1);this._world.start();this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,!1,c.ConstantsScreen.TRANSITION_SCROLL_DOWN);this._unpauseGameplay();s.ServiceAnalytics.sendMilestone("custom6")},_gotoAndPlayGame:function(){this._loadChunks(["gameplay"],r(this,this._eventLoadCompleteGameplay),800)&&(this._isWorldActive?f.WorkinCloud.instance.log("[Main](_gotoAndPlayGame) World already exists. Using existing world instead of creating new one."):this._generateWorld())},_generateUI:function(){this._isUIActive=!0;this._ui.addScreen(c.ConstantsScreen.SCREEN_LOADING,l.screens.ScreenLoading,"ui/SB_Loading");this._ui.addScreen(c.ConstantsScreen.SCREEN_LOADING_OVERLAY,l.screens.ScreenGeneric,"ui/loading_2/loading_overlay");this._ui.addScreen(c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS,l.screens.ScreenGeneric,"ui/cutscene/cutscene_border");this._ui.addScreen(c.ConstantsScreen.SCREEN_SPLASH,l.screens.ScreenSplash,"ui/splash/SpongeBobSplash_BG");this._ui.addScreen(c.ConstantsScreen.SCREEN_HELP,l.screens.ScreenHelp);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_MENU,l.screens.ScreenGameplayMenu);this._ui.addScreen(c.ConstantsScreen.SCREEN_QUIT_CONFIRM,l.screens.ScreenQuitConfirm);this._ui.addScreen(c.ConstantsScreen.SCREEN_GAMEPLAY_HUD,l.screens.ScreenGameplayHUD);this._ui.addScreen(c.ConstantsScreen.SCREEN_END_GAME,l.screens.ScreenEndGame,"ui/end_screen/SB_TryAgain_CorrectBG");this._ui.addScreen(c.ConstantsScreen.SCREEN_PAUSE_ALERT,l.screens.ScreenPauseAlert);this._ui.addScreen(c.ConstantsScreen.SCREEN_TUTORIAL,l.screens.ScreenTutorial);this._ui.addEventListener(m.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT,r(this,this._onEventInterfaceChange))},_registerInput:function(){f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_SPACE,[d.Key.Space]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_LEFT,[d.Key.Left,d.Key.A]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_RIGHT,[d.Key.Right,d.Key.D]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_UP,[d.Key.Up,d.Key.W]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_DOWN,[d.Key.Down,d.Key.S]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_Z,[d.Key.Z]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_X,[d.Key.X]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_C,[d.Key.C]);f.WorkinCloud.instance._getInput().registerInput(c.ConstantsApp.INPUT_P,[d.Key.P])},_setDefaults:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_MUTED,c.ConstantsApp.OPTION_SILENCE_AUDIO);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAMEOVER,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAME_WIN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAME_LOSE,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_LEVEL_WIN,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_LEVEL_LOSE,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT,!1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_TOUCH_DEVICE,y._platform.getTouch().get_supported());f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEALTH,3);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LIVES,3);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_SCORE,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LEVEL,1);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LOADING_PROGRESS,0);f.WorkinCloud.instance._getSound().setMute(f.WorkinCloud.instance.getValue(c.ConstantsApp.BOOL_MUTED))},_beginEngine:function(){f.WorkinCloud.instance.log("[Main](_beginEngine)");this._timeline.add(new $.ComponentUpdater);this._parseConfigXML();this._ui=new l.ScreenManager(this._layerUI);this._setDefaults();this._generateUI();this._registerInput();this._beginInitialLoad()},_eventLoadCompleteInitial:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);this._flagInitialLoadComplete=!0;T.delay(r(this,this._gotoSplash),800)},_eventLoadCompleteGameplay:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);T.delay(r(this,this._gotoAndPlayGame),800)},_loadChunksDelayCallback:function(){this._loadChunks(this._loadChunksCurrent,this._loadCallbackMethod,0)},_loadChunks:function(a,b,e){null==e&&(e=0);for(var u=0,d=!0;u<a.length;)f.WorkinCloud.instance._getAssets().isChunkLoaded(a[u])||(d=!1),u++;if(d)return!0;this._loadChunksCurrent=a;this._loadCallbackMethod=b;if(0<e)return T.delay(r(this,this._loadChunksDelayCallback),e),this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,!1,c.ConstantsScreen.TRANSITION_SCROLL_UP),!1;f.WorkinCloud.instance._getDispatcher().addEventListener(E.ConstantsCloud.EVENT_FILES_LOADED,this._loadCallbackMethod);for(u=0;u<a.length;)f.WorkinCloud.instance._getAssets().isChunkLoaded(a[u])||f.WorkinCloud.instance._getAssets().loadChunk(a[u]),u++;f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!0);this._ui.changeScreenTo(c.ConstantsScreen.SCREEN_LOADING,!1,c.ConstantsScreen.TRANSITION_SCROLL_UP);return!1},_beginInitialLoad:function(){f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_POOL_PROGRESS,6);this._loadChunks(["initial"],r(this,this._eventLoadCompleteInitial),800);f.WorkinCloud.instance._getAssets().loadFolder("fonts_"+f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID))},_parseConfigXML:function(){f.WorkinCloud.instance.log("[Main](_parseConfigXML) Parse Config XML: "+c.ConstantsApp.CONFIG_XML_PATH);for(var a=f.WorkinCloud.instance._getAssets().getXML(c.ConstantsApp.CONFIG_XML_PATH),b=a.node.resolve("packs").nodes.resolve("pack").iterator();b.hasNext();){for(var e=b.next(),u=[],d=e.nodes.resolve("flump").iterator();d.hasNext();){var g=d.next();u.push(g.att.resolve("id").toString())}
d=[];for(g=e.nodes.resolve("tiles").iterator();g.hasNext();){var h=g.next();d.push(h.att.resolve("id").toString())}
f.WorkinCloud.instance._getAssets().addPackDef(e.att.resolve("id").toString(),u,d)}
for(b=a.node.resolve("chunks").nodes.resolve("chunk").iterator();b.hasNext();)e=b.next(),f.WorkinCloud.instance._getAssets().addChunk(e.att.resolve("id").toString(),e);c.ConstantsApp.LOAD_FONT_EARLY||(f.WorkinCloud.instance.setString(E.ConstantsCloud.STRING_REGION_ID,o.string(a.node.resolve("localization").node.resolve("region").getInnerData())),f.WorkinCloud.instance.log("[Main] Localization : Set Region: "+f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID)))},errorHandler:function(a){f.WorkinCloud.instance.log("Error:"+a)},__class__:ca};c={ConstantsApp:function(){}};k["com.nick.spongeBob.capri_sun_adventure_desert.data.ConstantsApp"]=c.ConstantsApp;c.ConstantsApp.__name__="com,nick,spongeBob,capri_sun_adventure_desert,data,ConstantsApp".split(",");c.ConstantsApp.initPieces=function(){var a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(1,0));a.push(new i.elements.BlockDef(0,-1));a.push(new i.elements.BlockDef(-1,0));a.push(new i.elements.BlockDef(0,1));var b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(0,-1));b.push(new i.elements.BlockDef(-1,0));b.push(new i.elements.BlockDef(0,1));b.push(new i.elements.BlockDef(1,0));var e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(-1,0));e.push(new i.elements.BlockDef(0,1));e.push(new i.elements.BlockDef(1,0));e.push(new i.elements.BlockDef(0,-1));var u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(0,1));u.push(new i.elements.BlockDef(1,0));u.push(new i.elements.BlockDef(0,-1));u.push(new i.elements.BlockDef(-1,0));c.ConstantsApp.SquarePiece=[];c.ConstantsApp.SquarePiece.push(a);c.ConstantsApp.SquarePiece.push(b);c.ConstantsApp.SquarePiece.push(e);c.ConstantsApp.SquarePiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(0,-1));a.push(new i.elements.BlockDef(-1,-1));a.push(new i.elements.BlockDef(0,1));a.push(new i.elements.BlockDef(-1,1));b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(-1,0));b.push(new i.elements.BlockDef(-1,1));b.push(new i.elements.BlockDef(1,0));b.push(new i.elements.BlockDef(1,1));e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(0,1));e.push(new i.elements.BlockDef(1,1));e.push(new i.elements.BlockDef(0,-1));e.push(new i.elements.BlockDef(1,-1));u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(1,0));u.push(new i.elements.BlockDef(1,-1));u.push(new i.elements.BlockDef(-1,0));u.push(new i.elements.BlockDef(-1,-1));c.ConstantsApp.IPiece=[];c.ConstantsApp.IPiece.push(a);c.ConstantsApp.IPiece.push(b);c.ConstantsApp.IPiece.push(e);c.ConstantsApp.IPiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(1,0));a.push(new i.elements.BlockDef(0,-1));b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(0,-1));b.push(new i.elements.BlockDef(-1,0));e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(-1,0));e.push(new i.elements.BlockDef(0,1));u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(0,1));u.push(new i.elements.BlockDef(1,0));c.ConstantsApp.ZInvertPiece=[];c.ConstantsApp.ZInvertPiece.push(a);c.ConstantsApp.ZInvertPiece.push(b);c.ConstantsApp.ZInvertPiece.push(e);c.ConstantsApp.ZInvertPiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(0,1));a.push(new i.elements.BlockDef(1,-1));a.push(new i.elements.BlockDef(-1,-1));b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(1,0));b.push(new i.elements.BlockDef(-1,-1));b.push(new i.elements.BlockDef(-1,1));e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(0,-1));e.push(new i.elements.BlockDef(-1,1));e.push(new i.elements.BlockDef(1,1));u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(-1,0));u.push(new i.elements.BlockDef(1,1));u.push(new i.elements.BlockDef(1,-1));c.ConstantsApp.ZPiece=[];c.ConstantsApp.ZPiece.push(a);c.ConstantsApp.ZPiece.push(b);c.ConstantsApp.ZPiece.push(e);c.ConstantsApp.ZPiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(-1,-1));a.push(new i.elements.BlockDef(0,1));a.push(new i.elements.BlockDef(-1,2));b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(-1,1));b.push(new i.elements.BlockDef(1,0));b.push(new i.elements.BlockDef(2,1));e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(1,1));e.push(new i.elements.BlockDef(0,-1));e.push(new i.elements.BlockDef(1,-2));u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(1,-1));u.push(new i.elements.BlockDef(-1,0));u.push(new i.elements.BlockDef(-2,-1));c.ConstantsApp.TPiece=[];c.ConstantsApp.TPiece.push(a);c.ConstantsApp.TPiece.push(b);c.ConstantsApp.TPiece.push(e);c.ConstantsApp.TPiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));b=[];b.push(new i.elements.BlockDef(0,0));e=[];e.push(new i.elements.BlockDef(0,0));u=[];u.push(new i.elements.BlockDef(0,0));c.ConstantsApp.LPiece=[];c.ConstantsApp.LPiece.push(a);c.ConstantsApp.LPiece.push(b);c.ConstantsApp.LPiece.push(e);c.ConstantsApp.LPiece.push(u);a=[];a.push(new i.elements.BlockDef(0,0));a.push(new i.elements.BlockDef(0,-1));a.push(new i.elements.BlockDef(0,1));b=[];b.push(new i.elements.BlockDef(0,0));b.push(new i.elements.BlockDef(-1,0));b.push(new i.elements.BlockDef(1,0));e=[];e.push(new i.elements.BlockDef(0,0));e.push(new i.elements.BlockDef(0,1));e.push(new i.elements.BlockDef(0,-1));u=[];u.push(new i.elements.BlockDef(0,0));u.push(new i.elements.BlockDef(1,0));u.push(new i.elements.BlockDef(-1,0));c.ConstantsApp.LInvertPiece=[];c.ConstantsApp.LInvertPiece.push(a);c.ConstantsApp.LInvertPiece.push(b);c.ConstantsApp.LInvertPiece.push(e);c.ConstantsApp.LInvertPiece.push(u);c.ConstantsApp.PiecesDef=[];c.ConstantsApp.PiecesDef.push(c.ConstantsApp.LPiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.LInvertPiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.ZInvertPiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.ZPiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.TPiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.SquarePiece);c.ConstantsApp.PiecesDef.push(c.ConstantsApp.IPiece)};c.ConstantsApp.getPiecesDef=function(){return c.ConstantsApp.PiecesDef};c.ConstantsApp.initTutorialElements=function(){c.ConstantsApp._tutorialElements=[];c.ConstantsApp._tutorialElements.push(new j.TextLocalized(475,225,"tutorial1","",{origin:new g.WorkinPoint(0.5,0.5),center:!0,spacing:10}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(480,215,"tutorial2","",{origin:new g.WorkinPoint(0.5,0.5),center:!0,spacing:10}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(470,210,"controlsT","",{origin:new g.WorkinPoint(0.5,0.5)}));f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?(c.ConstantsApp._tutorialElements.push(new j.TextLocalized(450,250,"touchmoveT","",{origin:new g.WorkinPoint(0.5,0.5)})),c.ConstantsApp._tutorialElements.push(new j.TextLocalized(458,320,"taprotateT","",{origin:new g.WorkinPoint(0.5,0.5)})),c.ConstantsApp._tutorialElements.push(new j.Element({x:440,y:305,asset:"sb_desert_help_intro_mobile_instructions",origin:new g.WorkinPoint(0.5,0.5)}))):(c.ConstantsApp._tutorialElements.push(new j.TextLocalized(600,270,"keyArrowsT","",{origin:new g.WorkinPoint(0.5,0.5)})),c.ConstantsApp._tutorialElements.push(new j.TextLocalized(608,340,"keyRotateT","",{origin:new g.WorkinPoint(0.5,0.5)})),c.ConstantsApp._tutorialElements.push(new j.Element({x:390,y:305,asset:"sb_desert_help_intro_keys",origin:new g.WorkinPoint(0.5,0.5)})));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(480,205,"extraTimeT","",{origin:new g.WorkinPoint(0.5,0.5),center:!0,spacing:10}));c.ConstantsApp._tutorialElements.push(new j.Element({x:475,y:284,asset:"desert_blocks_mobile",origin:new g.WorkinPoint(0.5,0.5),scale:0.9}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(320,335,"someTimeT","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(475,335,"moreTimeT","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(628,335,"aLotOfTimeT","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(480,240,"plaktonText","",{origin:new g.WorkinPoint(0.5,0.5),center:!0,spacing:10}));c.ConstantsApp._tutorialElements.push(new j.Element({x:475,y:300,asset:"blocks",origin:new g.WorkinPoint(0.5,0.5)}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(338,260,"descBlock1at","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(338,340,"descBlock1bt","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(478,260,"descBlock2at","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(478,340,"descBlock2bt","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(615,260,"descBlock3at","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));c.ConstantsApp._tutorialElements.push(new j.TextLocalized(615,340,"descBlock3bt","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}))};c.ConstantsApp.getTutorialElements=function(){return c.ConstantsApp._tutorialElements};c.ConstantsApp.disposeTutorialElements=function(){for(var a=c.ConstantsApp._tutorialElements.length;0<a--;)c.ConstantsApp._tutorialElements.pop();c.ConstantsApp._tutorialElements=null};c.ConstantsScreen=function(){};k["com.nick.spongeBob.capri_sun_adventure_desert.data.ConstantsScreen"]=c.ConstantsScreen;c.ConstantsScreen.__name__="com,nick,spongeBob,capri_sun_adventure_desert,data,ConstantsScreen".split(",");m={};f=void 0;E=void 0;s=void 0;g=void 0;$=void 0;j=void 0;R=void 0;m.WMEventDispatcher=function(){this._signals=new G};k["com.workinman.events.WMEventDispatcher"]=m.WMEventDispatcher;m.WMEventDispatcher.__name__=["com","workinman","events","WMEventDispatcher"];m.WMEventDispatcher.prototype={dispose:function(){for(var a=this._signals.iterator();a.hasNext();)a.next().dispose();this._signals=null},dispatchEvent:function(a){this._signals.exists(a.getEventId())&&this._signals.get(a.getEventId()).dispatchEvent(a)},removeEventListener:function(a,b){this._signals.exists(a)&&(this._signals.get(a).removeEventListener(b),this._signals.get(a).isEmtpy()&&(this._signals.get(a).dispose(),this._signals.remove(a)))},addEventListener:function(a,b){this._signals.exists(a)||this._signals.set(a,new m._WMEventDispatcher.WMEventTracker);this._signals.get(a).addEventListener(b)},__class__:m.WMEventDispatcher};l={ScreenManager:function(a){m.WMEventDispatcher.call(this);this._container=a;this._layerScreen=new N;this._layerTransition=new N;this._container.addChild(this._layerScreen);this._container.addChild(this._layerTransition);this._isPaused=!1;this._screens=[];this._screensOpen=[];this._screensQueue=[];this._transitionType=-1;this._flagCloseAllScreensWhenBottomCloses=this._flagHasScreenshot=this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=this._flagHasTransition=!1;this._camera=new g.WorkinCamera(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y)}};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.ScreenManager"]=l.ScreenManager;l.ScreenManager.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,ScreenManager".split(",");l.ScreenManager.__super__=m.WMEventDispatcher;l.ScreenManager.prototype=v(m.WMEventDispatcher.prototype,{_transitionPlay:function(){this._transition.show();this._transition.start()},_removeTransition:function(){this._flagHasTransition&&(this._layerTransition.removeChild(this._transition._getEntity()),this._transition._getDispatcher().removeEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,r(this,this._onEventTransitionOutput)),this._transition.dispose(),this._transition=null,this._flagHasTransition=!1)},_addTransition:function(a,b){null==b&&(b=!0);if(this._flagHasTransition){if(!b)return;this._removeTransition()}
this._transition=new l.transitions.TransitionBase(a);this._transition.hide();this._transition._getDispatcher().addEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,r(this,this._onEventTransitionOutput));this._layerTransition.addChild(this._transition._getEntity());this._flagHasTransition=!0},_updateTransition:function(a){switch(this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:this._transitionScreenHeadedOut._getPos().x-=3E3*a;this._transitionScreenHeadedIn._getPos().x-=3E3*a;0>=this._transitionScreenHeadedIn._getPos().x&&(this._transitionScreenHeadedIn._getPos().x=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE)));break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._transitionScreenHeadedOut._getPos().y-=2E3*a;this._transitionScreenHeadedIn._getPos().y-=2E3*a;0>=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE)));break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._transitionScreenHeadedOut._getPos().y+=2E3*a;this._transitionScreenHeadedIn._getPos().y+=2E3*a;0<=this._transitionScreenHeadedIn._getPos().y&&(this._transitionScreenHeadedIn._getPos().y=0,this._flagHasTransition=!1,this._onTransitionCloseScreen(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE)));break;case c.ConstantsScreen.TRANSITION_FADE:this._transition.update(a),this._transition.flagDispose&&this._removeTransition()}},_removeScreenDisplay:function(a){this._layerScreen.removeChild(a)},_addScreenDisplay:function(a){this._layerScreen.addChild(a)},_dispatchEventChange:function(a,b){this.dispatchEvent(new m.WMEventInterfaceChange(a,b))},_onQueueConditionMet:function(a,b){null==b&&(b="");for(var e=0;e<this._screensQueue.length;)this._screensQueue[e].validateCondition(a,b)&&(this._generateScreen(this._screensQueue[e].screenData),this._screensQueue.splice(e,1)),e++},dispose:function(){for(var a=0;a<this._screensOpen.length;)this._disposeScreen(this._screensOpen[a].id),a++;this._screens=this._screensQueue=null;this._removeTransition();this._container.removeChild(this._layerScreen);this._container.removeChild(this._layerTransition);this._layerTransition=this._layerScreen=null;m.WMEventDispatcher.prototype.dispose.call(this)},_getScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return this._screens[b];b--}
f.WorkinCloud.instance.log("[ScreenManager](_getScreenData) ERROR: Screen >"+a+"< idoes not exist. getScreenData() returning NULL.");return null},_hasScreenData:function(a){for(var b=this._screens.length-1;0<=b;){if(this._screens[b].id==a)return!0;b--}
return!1},_removeScreenshot:function(){this._flagHasScreenshot&&(this._layerScreen.removeChild(this._screenshot._getEntity()),this._screenshot.dispose(),this._screenshot=null,this._flagHasScreenshot=!1)},_addScreenshot:function(){f.WorkinCloud.instance.log("[ScreenManager](_addScreenshot) ERROR: Screenshots not supported in HTML5 yet.")},_onTransitionCloseScreen:function(){this._flagCloseScreenAfterTransition&&(this.closeScreen(this._screenIdToCloseAfterTransition,!1),this._flagCloseScreenAfterTransition=!1);this._flagOpenScreenAfterTransition&&(this.openScreen(this._screenIdToOpenDuringTransition,!1),this._flagOpenScreenAfterTransition=!1)},_onEventTransitionOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?(f.WorkinCloud.instance.log("[ScreenManager] Transition Midway..."),this._onTransitionCloseScreen(),this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(f.WorkinCloud.instance.log("[ScreenManager] Transition Complete."),this._removeScreenshot(),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE))},_onEventScreenOutput:function(a){a.flowId==c.ConstantsScreen.OUTPUT_OPENED?this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,a.screenId):a.flowId==c.ConstantsScreen.OUTPUT_CLOSED&&(this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_COMPLETE,a.screenId),this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC,a.screenId),this._flagHasTransition&&this._transitionType==c.ConstantsScreen.TRANSITION_STAGED&&this._transitionPlay())},_disposeScreen:function(a){for(var b=0;b<this._screensOpen.length;){if(this._screensOpen[b].id==a){this._screensOpen[b]._getDispatcher().removeEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,r(this,this._onEventScreenOutput));this._removeScreenDisplay(this._screensOpen[b]._getEntity());this._screensOpen[b].dispose();this._screensOpen.splice(b,1);break}
b++}},_generateScreen:function(a){if(this.isScreenOpen(a.id))this.getScreen(a.id).reset(),this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id);else{var b=M.createInstance(a.screenClass,[a.id,a.assetClassName,a.data]);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_generateScreen) ERROR: Screen Class for >"+a.id+"< not found.");else{if(this._flagHasTransition)switch(this._transitionScreenHeadedIn=b,this._transitionType){case c.ConstantsScreen.TRANSITION_SCROLL:b._getPos().x=c.ConstantsApp.STAGE_WIDTH;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:b._getPos().y=c.ConstantsApp.STAGE_HEIGHT;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:b._getPos().y=-c.ConstantsApp.STAGE_HEIGHT}
this._screensOpen.push(b);b.renderPosition(this._camera);this._addScreenDisplay(b._getEntity());b._getDispatcher().addEventListener(m.WMEventScreenOut.EVENT_SCREEN_OUTPUT,r(this,this._onEventScreenOutput));b.open(!0);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a.id)}}},_addScreenToQueue:function(a,b,e){null==e&&(e="");this.hasQueuedScreen(a.id)||this._screensQueue.push(new l.screens.data.ScreenQueueData(a,b,e))},removeAllQueuedScreens:function(){for(var a=this._screensQueue.length-1;0<=a;)this._screensQueue.splice(a,1),a--},removeQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a){this._screensQueue.splice(b,1);break}
b--}},hasQueuedScreen:function(a){for(var b=this._screensQueue.length-1;0<=b;){if(this._screensQueue[b].screenData.id==a)return!0;b--}
return!1},isScreenOpen:function(a){for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return!0;b--}
return!1},getScreen:function(a){null==a&&(a="");if(0==this._screensOpen.length)return f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: no screens are open. Unable to getScreen()"),null;if(""==a)return this._screensOpen[this._screensOpen.length-1];for(var b=this._screensOpen.length-1;0<=b;){if(this._screensOpen[b].id==a)return this._screensOpen[b];b--}
f.WorkinCloud.instance.log("[ScreenManager](getScreen) ERROR: Screen >"+a+"< is not open or does not exist. getScreen() returning NULL.");return null},update:function(a){if(!this._isPaused){0.15<a&&(a=0.15);this._flagHasTransition&&this._updateTransition(a);for(this._loop=this._screensOpen.length-1;0<=this._loop;)this._screensOpen[this._loop].update(a),this._screensOpen[this._loop].renderPosition(this._camera),this._screensOpen[this._loop].flagDispose&&(this._disposeScreen(this._screensOpen[this._loop].id),0==this._screensOpen.length&&this._onQueueConditionMet(c.ConstantsScreen.CONDITION_CLOSED_ALL)),this._loop--}},_getHasTransition:function(){return this._flagHasTransition},changeScreenTo:function(a,b,e,u){null==u&&(u="");null==e&&(e=-1);null==b&&(b=!1);f.WorkinCloud.instance.log("[ScreenManager](changeTo) "+a);this.removeAllQueuedScreens();if(this.isScreenOpen(a)){f.WorkinCloud.instance.log("[ScreenManager](changeTo) Screen is already open.");for(b=this._screensOpen.length-1;0<=b;)this._screensOpen[b].id!=a&&this.closeScreen(this._screensOpen[b].id,!1,b),b--;this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_BEGIN,a);this._dispatchEventChange(c.ConstantsScreen.CHANGE_OPEN_COMPLETE,a)}else if(this._flagOpenScreenAfterTransition=this._flagCloseScreenAfterTransition=!1,0<this._screensOpen.length){f.WorkinCloud.instance.log("[ScreenManager](changeFrom) "+this._screensOpen[0].id);this._screensOpen[0].suspend();var d=c.ConstantsScreen.CONDITION_CLOSED_ALL;if(-1<e)switch(this._transitionType=e,this._transitionType){case c.ConstantsScreen.TRANSITION_SCREENSHOT:this._flagOpenScreenAfterTransition=!0;b=!1;this._addScreenshot();this._transitionPlay();break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_UP:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL_DOWN:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_SCROLL:this._flagHasTransition=!0;this._flagOpenScreenAfterTransition=!1;this._flagCloseScreenAfterTransition=!0;b=!1;this._transitionScreenHeadedOut=this._screensOpen[0];d=c.ConstantsScreen.CONDITION_IMMEDIATE;break;case c.ConstantsScreen.TRANSITION_FADE:this._addTransition(u,this._flagHasTransition?this._transition._getIsOutro()?!0:!1:!1),this._flagCloseScreenAfterTransition=!0,b=!1,this._transitionPlay(),d=c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY}
if(0<this._screensOpen.length&&(this._flagCloseScreenAfterTransition?this._screenIdToCloseAfterTransition=this._screensOpen[0].id:this.closeScreen(this._screensOpen[0].id,b,0),1<this._screensOpen.length))
for(b=1;b<this._screensOpen.length;)this.closeScreen(this._screensOpen[b].id,!1,this._screensOpen.length),b++;this._flagOpenScreenAfterTransition?(f.WorkinCloud.instance.log("[ScreenManager] Store Screen to open at transition midway: "+a),this._screenIdToOpenDuringTransition=a):this.openScreen(a,!0,d)}else this.openScreen(a,!1)},_moveScreenToTop:function(a){var b=this.getScreen(a);if(null==b)f.WorkinCloud.instance.log("[ScreenManager](_moveScreenToTop) ERROR: Screen >"+a+"< is not open or does not exist. Cancelling move.");else{b.isClosing()&&b.open(!1);for(var e=this._screensOpen.length-1;0<=e&&!(this._screensOpen[e].id==a);)e--;this._screensOpen.splice(e,1);b.reset();this._removeScreenDisplay(b._getEntity());this._addScreenDisplay(b._getEntity());this._screensOpen.push(b)}},openScreen:function(a,b,e,u){null==u&&(u="");null==e&&(e=0);null==b&&(b=!0);f.WorkinCloud.instance.log("[ScreenManager](openScreen) "+a);if(this._hasScreenData(a))
if(this.isScreenOpen(a))this._moveScreenToTop(a);else{if(e!=c.ConstantsScreen.CONDITION_IMMEDIATE&&b){if(0<this._screensOpen.length){this._addScreenToQueue(this._getScreenData(a),e,u);return}
if((e==c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE||e==c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY)&&this._flagHasTransition){this._addScreenToQueue(this._getScreenData(a),e,u);return}}
this._generateScreen(this._getScreenData(a))}
else f.WorkinCloud.instance.log("[ScreenManager](closeScreen) ERROR: Screen >"+a+"< does not exist. Cancelling open().")},closeScreen:function(a,b,e){null==e&&(e=-1);null==b&&(b=!0);null==a&&(a="");if(0==this._screensOpen.length)this.removeQueuedScreen(a);else{if(""==a)e=this._screensOpen[this._screensOpen.length-1];else if(0<=e&&e<this._screensOpen.length)e=this._screensOpen[e];else if(e=this.getScreen(a),null==e){this.removeQueuedScreen(a);return}
e.close(b);this._dispatchEventChange(c.ConstantsScreen.CHANGE_CLOSE_BEGIN,a)}},handleInput:function(a){for(var b=!0,e=this._screensOpen.length-1;0<=e&&b;)this._screensOpen[e].handleInput(a,e==this._screensOpen.length-1)||(b=!1),e--;return b},addScreen:function(a,b,e,c,d){null==c&&(c=0);null==e&&(e="");this._screens.push(new l.screens.data.ScreenData(a,b,e,c,d))},__class__:l.ScreenManager});j={IPoolable:function(){}};k["com.workinman.display.IPoolable"]=j.IPoolable;j.IPoolable.__name__=["com","workinman","display","IPoolable"];j.IPoolable.prototype={__class__:j.IPoolable};j.Poolable=function(){this._flagPooled=!0;this._flagActive=!1};k["com.workinman.display.Poolable"]=j.Poolable;j.Poolable.__name__=["com","workinman","display","Poolable"];j.Poolable.__interfaces__=[j.IPoolable];j.Poolable.prototype={_setIsActive:function(a){return this._flagActive=a},_getIsActive:function(){return this._flagActive},_setIsPooled:function(a){return this._flagPooled=a},_getIsPooled:function(){return this._flagPooled},dispose:function(){this.release()},release:function(){this._flagActive=!1},renew:function(){this._flagActive=!0},__class__:j.Poolable};j.Element=function(a){j.Poolable.call(this,a);this._entity=new N;this._display=new p.Sprite;this._entity.add(this._display);this._elements=[];this._textureEntity=new N;this._entity.addChild(this._textureEntity);this._texture=new p.Sprite;this._textureEntity.add(this._texture);this._dispatcher=new m.WMEventDispatcher;this._initPos=new g.WorkinPoint;this._pos=new g.WorkinPoint;this._velocity=new g.WorkinPoint;this._renderOffset=new g.WorkinPoint;this._renderOrigin=new g.WorkinPoint;this._render=new j.Renderable;this._uniqueId=E.ConstantsCloud.getUniqueId();this._layer=this._assetId="";this._useCamera=!0;this._type="";this._doDelete=!1;a.type&&(this._type=a.type);a.layer&&(this._layer=a.layer);a.x&&(this._initPos.x=this._pos.x=a.x);a.y&&(this._initPos.y=this._pos.y=a.y);a.rot&&(this._render.rotation=a.rot);a.scale&&(this._render.scaleX=this._render.scaleY=a.scale);null!=a.useCamera&&(this._useCamera=a.useCamera);a.origin?this.setOrigin(a.origin):this.setOrigin(new g.WorkinPoint(0,0));!0==a.pooled?this._setIsPooled(!0):(this._setIsPooled(!1),this.renew(a));this._tweener=new g.tween.WorkinTween;this._currentTextureRotation=this._flipState=0;this._rotationCat=3;this._addEventListeners()};k["com.workinman.display.Element"]=j.Element;j.Element.__name__=["com","workinman","display","Element"];j.Element.__super__=j.Poolable;j.Element.prototype=v(j.Poolable.prototype,{_removeEventListeners:function(){},_addEventListeners:function(){},rotateTexture:function(a,b){null==b&&(b=!1);null==a&&(a=!1);switch(this._flipState){case 0:var e=b?this._texture.x:this._texture.y;e.set__(e._value+c.ConstantsApp.BLOCK_SIZE);this._currentTextureRotation=this._texture.rotation.set__(b?this._texture.rotation._value+90:this._texture.rotation._value-90);this._flipState++;this._rotationCat=0;break;case 1:a?(e=b?this._texture.x:this._texture.y,e.set__(e._value-c.ConstantsApp.BLOCK_SIZE),this._currentTextureRotation=this._texture.rotation.set__(b?this._texture.rotation._value-90:this._texture.rotation._value+90),this._flipState=0):(e=this._texture.x,e.set__(e._value+c.ConstantsApp.BLOCK_SIZE),this._currentTextureRotation=function(a){a=a._texture.rotation;return a.set__(a._value-90)}(this),this._flipState++);this._rotationCat=1;break;case 2:e=this._texture.y;e.set__(e._value-c.ConstantsApp.BLOCK_SIZE);this._currentTextureRotation=function(a){a=a._texture.rotation;return a.set__(a._value-90)}(this);this._flipState++;this._rotationCat=2;break;case 3:e=this._texture.x,e.set__(e._value-c.ConstantsApp.BLOCK_SIZE),this._currentTextureRotation=function(a){a=a._texture.rotation;return a.set__(a._value-90)}(this),this._flipState=0,this._rotationCat=3}},setOrigin:function(a){this._renderOrigin.toPoint(a);this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},applyRenderable:function(){this._display.x.set__(this._render.x);this._display.y.set__(this._render.y);this._display.scaleX.set__(this._render.scaleX);this._display.scaleY.set__(this._render.scaleY);this._display.rotation.set__(this._render.rotation);this._display.alpha.set__(this._render.alpha);this._display.set_visible(this._render.visible)},renderPositionWithoutCamera:function(){this._render.x=this._pos.x+this._renderOffset.x;this._render.y=this._pos.y+this._renderOffset.y;this.applyRenderable()},renderPosition:function(a){null==a||!1==this._useCamera?(this._render.x=this._pos.x+this._renderOffset.x,this._render.y=this._pos.y+this._renderOffset.y):(this._render.x=this._pos.x-a._getPos().x+a._getScreenCenterX()+this._renderOffset.x,this._render.y=this._pos.y-a._getPos().y+a._getScreenCenterY()+this._renderOffset.y);for(var b=0,e=this._elements;b<e.length;){var c=e[b];++b;c.renderPosition(a)}
this.applyRenderable()},addElement:function(a){this._elements.push(a);this._entity.addChild(a._getEntity());return a},_addElement:function(a){this._elements.push(a);this._entity.addChild(a._getEntity());return a},_onTweensComplete:function(){},updatePosFromTweener:function(a){this._tweener.update(a);this._pos.to(this._tweener._getCurrent().x,this._tweener._getCurrent().y);this._tweener._getBoolAllTweensComplete()&&this._onTweensComplete()},updatePositionFromVelocity:function(a){this._pos.x+=this._velocity.x*a;this._pos.y+=this._velocity.y*a},update:function(a){for(var b=0,e=this._elements;b<e.length;){var c=e[b];++b;c.update(a)}},swapTexture:function(a){this._textureEntity.remove(this._texture);this._texture.dispose();this._texture=a;this._render.width=this._texture.getNaturalWidth();this._render.height=this._texture.getNaturalHeight();this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height));this._textureEntity.add(this._texture)},setTexture:function(a){""!=a&&(!1==f.WorkinCloud.instance._getAssets().hasAsset(a)?f.WorkinCloud.instance.log("[Element](setTexture) No asset named "+a+" exists!"):this.swapTexture(new p.ImageSprite(f.WorkinCloud.instance._getAssets().getTexture(a))))},_getTexture:function(){return this._texture},_getUniqueId:function(){return this._uniqueId},_setLayer:function(a){return this._layer=a},_getLayer:function(){return this._layer},_getDepth:function(){return this._pos.z},_getDispatcher:function(){return this._dispatcher},_getEntity:function(){return this._entity},_getRenderable:function(){return this._render},_setDoDelete:function(a){return this._doDelete=a},_getDoDelete:function(){return this._doDelete},_setPos:function(a){this._pos.toPoint(a);return this._pos},_getPos:function(){return this._pos},_getInitPos:function(){return this._initPos},_getType:function(){return this._type},dispose:function(){if(this._getIsPooled())this.release();else{for(var a=0,b=this._elements;a<b.length;){var e=b[a];++a;e.dispose()}
this._elements=null;this._removeEventListeners();this._dispatcher.dispose();this._dispatcher=null;this._entity.dispose();this._renderOrigin=this._renderOffset=this._render=this._textureEntity=this._display=this._texture=this._velocity=this._pos=this._entity=null;this._tweener.dispose();this._tweener=null}},release:function(){this._getIsPooled()&&j.Poolable.prototype.release.call(this)},renew:function(a){a.asset&&(this._assetId=a.asset,this.setTexture(this._assetId));this._doDelete=!1;a.type&&(this._type=a.type);a.layer&&(this._layer=a.layer);a.x&&(this._initPos.x=this._pos.x=a.x);a.y&&(this._initPos.y=this._pos.y=a.y);a.rot&&(this._render.rotation=a.rot);a.scale&&(this._render.scaleX=this._render.scaleY=a.scale);null!=a.useCamera&&(this._useCamera=a.useCamera);a.origin?this.setOrigin(a.origin):this.setOrigin(new g.WorkinPoint(0,0))},__class__:j.Element});l.buttons={};l.buttons.ButtonBase=function(a,b,e,c,d,f,h){null==h&&(h="");null==f&&(f="");null==d&&(d="");null==c&&(c="");this._DEBUG_SHOW_HITBOX=!1;null==e&&(e=new g.WorkinPoint(0.5,0.5));j.Element.call(this,{x:a,y:b,asset:this._assetUp,origin:e});this._assetUp=""==c?this._getDefaultAssetUp():c;this._assetOver=""==d?this._getDefaultAssetOver():d;this._assetDown=""==f?this._getDefaultAssetDown():f;this._assetDisabled=""==h?this._getDefaultAssetDisabled():h;this._flagDragged=this._flagClickTransition=this._flagDown=!1;this.enable();this._buildHitBox();this._buttonScale=new g.WorkinPoint(1,1)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.buttons.ButtonBase"]=l.buttons.ButtonBase;l.buttons.ButtonBase.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,buttons,ButtonBase".split(",");l.buttons.ButtonBase.__super__=j.Element;l.buttons.ButtonBase.prototype=v(j.Element.prototype,{_renderDisabled:function(){""!=this._assetDisabled&&this.setTexture(this._assetDisabled)},_renderReturnUp:function(){this._flagClickTransition||(g.tween.WorkinTweener._getInstance().tween(this._render,0.15,{scaleX:this._buttonScale.x,scaleY:this._buttonScale.y}).ease(g.tween.PennerManager.EASE_QUAD_OUT),this._renderUp())},_renderDown:function(){this._flagClickTransition||(g.tween.WorkinTweener._getInstance().tween(this._render,0.15,{scaleX:1.04*this._buttonScale.x,scaleY:1.04*this._buttonScale.y}).ease(g.tween.PennerManager.EASE_QUAD_OUT),""!=this._assetDown&&this.setTexture(this._assetDown))},_renderUp:function(){""!=this._assetUp&&this.setTexture(this._assetUp)},update:function(a){j.Element.prototype.update.call(this,a);this._flagDown&&!1==f.WorkinCloud.instance._getInput().getInput(c.ConstantsApp.INPUT_CLICK)&&(this._upConnection.dispose(),this._renderReturnUp())},_onCancelDrag:function(){this._flagDragged=!1;this._dispatch(l.buttons.ButtonBase.CANCEL_DRAG)},_onUp:function(){!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&this._flagDown&&(this._upConnection.dispose(),this._upConnection=null,this._flagDown=!1,this._renderReturnUp(),this._click(),this._flagDragged&&this._onCancelDrag(),this._dispatch(l.buttons.ButtonBase.UP))},_onDown:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)||(this._flagDown=!0,this._renderDown(),this._upConnection=this._hitBox.get_pointerUp().connect(r(this,this._onUpEvent)),this._dispatch(l.buttons.ButtonBase.DOWN))},setScale:function(a,b){this._buttonScale.x=a;this._buttonScale.y=b;this._render.scaleX=this._buttonScale.x;this._render.scaleY=this._buttonScale.y},_onClickTransitionComplete:function(){this._flagClickTransition=!1;f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!1);this._dispatch(l.buttons.ButtonBase.CLICK);""!=this._getClickFlow()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventFlow(this._getClickFlow()));""!=this._getClickEvent()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(this._getClickEvent()));g.tween.WorkinTweener._getInstance().stop(this._render);this._render.scaleX=this._buttonScale.x;this._render.scaleY=this._buttonScale.y},_click:function(){!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_INPUT_LOCK)&&!f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_ORIENTATION_ALERT)&&(this._flagClickTransition=!0,f.WorkinCloud.instance._getSound().playSound("button_click"),g.tween.WorkinTweener._getInstance().tween(this._render,0.25,{scaleX:0.96*this._buttonScale.x,scaleY:0.96*this._buttonScale.y}).ease(g.tween.PennerManager.EASE_QUAD_OUT),g.tween.WorkinTweener._getInstance().tween(this._render,0.25,{scaleX:0.99*this._buttonScale.x,scaleY:0.99*this._buttonScale.y},null,null,!1).ease(g.tween.PennerManager.EASE_ELASTIC_OUT).delay(0.25).onComplete(r(this,this._onClickTransitionComplete)),f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!0))},_dispatch:function(a){this._GET_DO_DISPATCH()&&this._dispatcher.dispatchEvent(new m.WMEvent(a))},_onUpEvent:function(a){this._onUp(a.viewX,a.viewY)},_onDownEvent:function(a){this._onDown(a.viewX,a.viewY)},_getClickFlow:function(){return ""},_getClickEvent:function(){return ""},_GET_DISABLE_FRAME:function(){return 1},_GET_CUSTOM_HIT_BOX:function(){return new I.Point(0,0)},_GET_DO_DISPATCH:function(){return!0},_getDefaultAssetDisabled:function(){return ""},_getDefaultAssetDown:function(){return ""},_getDefaultAssetOver:function(){return ""},_getDefaultAssetUp:function(){return ""},dispose:function(){this.disable();this._downConnection.dispose();this._downConnection=null;this._flagDown&&(this._upConnection.dispose(),this._upConnection=null);this._hitBox.dispose();this._buttonScale=null;j.Element.prototype.dispose.call(this)},_buildHitBox:function(){this._DEBUG_SHOW_HITBOX?this._hitBox=new p.FillSprite(16711680,this._render.width|0,this._render.height|0):(this._hitBox=new p.ImageSprite(y.createTexture(this._render.width|0,this._render.height|0)),this._hitBox.alpha.set__(0));var a=new N;a.add(this._hitBox);this._textureEntity.addChild(a);this._downConnection=this._hitBox.get_pointerDown().connect(r(this,this._onDownEvent))},disable:function(){this._flagEnabled=!1;this._renderDisabled()},enable:function(){this._flagEnabled=!0;this._renderUp()},__class__:l.buttons.ButtonBase});j.Display=function(a,b,e,c){null==e&&(e="");this._flagLocked=!1;j.Element.call(this,{x:a,y:b,asset:e,origin:c});this._addEventListeners()};k["com.workinman.display.Display"]=j.Display;j.Display.__name__=["com","workinman","display","Display"];j.Display.__super__=j.Element;j.Display.prototype=v(j.Element.prototype,{lock:function(){this._flagLocked=!0},dispose:function(){j.Element.prototype.dispose.call(this);this._removeEventListeners()},_updateValue:function(){return ""},_refresh:function(){},_onUpdateDisplay:function(a){this._flagLocked||a._getData().valueID==this._updateValue()&&this._refresh()},_removeEventListeners:function(){j.Element.prototype._removeEventListeners.call(this);f.WorkinCloud.instance._getDispatcher().removeEventListener(j.Display.EVENT_UPDATE_DISPLAY,r(this,this._onUpdateDisplay))},_addEventListeners:function(){j.Element.prototype._addEventListeners.call(this);f.WorkinCloud.instance._getDispatcher().addEventListener(j.Display.EVENT_UPDATE_DISPLAY,r(this,this._onUpdateDisplay))},__class__:j.Display});l.displays={};l.displays.DisplayLevel=function(a,b,e){null==e&&(e=0);j.Display.call(this,a,b,"",new g.WorkinPoint(0.5,0.5));this._addElement(new j.Element({x:5,y:5,asset:"sb_desert_help_level_backing",origin:new g.WorkinPoint(0.5,0.5)}));this._addElement(new j.TextLocalized(0,-25,"level","",{origin:new g.WorkinPoint(0.5,0.5)}));a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new j.TextBase(-10,10,o.string(a),f.WorkinCloud.instance._getLocalize().getData("level")._getFontName(),{origin:new g.WorkinPoint(0,0)}));this._textNum._getRenderable().scaleX=this._textNum._getRenderable().scaleY=0==e?f.WorkinCloud.instance._getLocalize().getData("level")._getScale():e;this._refresh();this._fadeIn=!0;this._fadeOut=!1;this._pauseTimer=0;f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SHOW_LEVEL,r(this,this._onEventShowLevel))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.displays.DisplayLevel"]=l.displays.DisplayLevel;l.displays.DisplayLevel.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,displays,DisplayLevel".split(",");l.displays.DisplayLevel.__super__=j.Display;l.displays.DisplayLevel.prototype=v(j.Display.prototype,{dispose:function(){this._textNum=null;f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SHOW_LEVEL,r(this,this._onEventShowLevel));j.Display.prototype.dispose.call(this)},_onEventShowLevel:function(a){0==a._getData().alpha?(this._fadeOut=!0,this._fadeIn=!1):(this._fadeOut=!1,this._fadeIn=!0)},_updateValue:function(){return c.ConstantsApp.INT_LEVEL},update:function(a){j.Display.prototype.update.call(this,a);0<this._pauseTimer&&(this._pauseTimer-=a,0>=this._pauseTimer&&(this._pauseTimer=0));this._fadeIn&&1>this._getRenderable().alpha&&0==this._pauseTimer?(this._getRenderable().alpha+=3*a,1<=this._getRenderable().alpha&&(this._getRenderable().alpha=1,this._pauseTimer=0.5)):this._fadeOut&&0<this._getRenderable().alpha&&0==this._pauseTimer&&(this._getRenderable().alpha-=2*a,0>=this._getRenderable().alpha&&(this._getRenderable().alpha=0))},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum._setText(o.string(a));19<a&&(this._textNum._getPos().x=this._textNum._getInitPos().x-15)},__class__:l.displays.DisplayLevel});l.displays.DisplayLoadingProgress=function(a,b){this._TWEEN_SPEED=5;j.Display.call(this,a,b,"",new g.WorkinPoint(0,0.5));this._bar=this._addElement(new j.Element({asset:"loading_fill"}));this._addElement(new j.Element({asset:"loading_wood",x:-27,y:-14}));this._addElement(new j.Element({asset:"loading_glass",x:-34,y:-15}));this._addElement(new j.Element({asset:"loading_brass",x:-27,y:-14}));this._bar._getRenderable().scaleX=0;this._currentScale=new g.WorkinPoint(0,1);this._newScale=new g.WorkinPoint(0,1);this._currentPoolNum=0};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.displays.DisplayLoadingProgress"]=l.displays.DisplayLoadingProgress;l.displays.DisplayLoadingProgress.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,displays,DisplayLoadingProgress".split(",");l.displays.DisplayLoadingProgress.__super__=j.Display;l.displays.DisplayLoadingProgress.prototype=v(j.Display.prototype,{dispose:function(){this._textNum=null;j.Display.prototype.dispose.call(this)},_updateValue:function(){return c.ConstantsApp.INT_LOADING_PROGRESS},update:function(a){this._currentPoolNum!=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_POOL_PROGRESS)&&(this._currentPoolNum=f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_POOL_PROGRESS),this._refresh());this._currentScale.x+=(this._newScale.x-this._currentScale.x)*a*this._TWEEN_SPEED;this._bar._getRenderable().scaleX=this._currentScale.x;j.Display.prototype.update.call(this,a)},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue());this._newScale.x=(60*(a/100)+(100<=a?40*(this._currentPoolNum/6):0))/100},__class__:l.displays.DisplayLoadingProgress});l.displays.DisplayScore=function(a,b,e,c){null==c&&(c=!1);null==e&&(e=0);j.Display.call(this,a,b);a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new j.TextBase(0,0,o.string(a),f.WorkinCloud.instance._getLocalize().getData("score")._getFontName(),{origin:new g.WorkinPoint(0,0)}));this._textNum._getRenderable().scaleX=this._textNum._getRenderable().scaleY=0==e?f.WorkinCloud.instance._getLocalize().getData("score")._getScale():e;!1==c&&this._addElement(new j.TextLocalized(95,17,"waves","",{origin:new g.WorkinPoint(0.5,0.5)}));this._refresh()};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.displays.DisplayScore"]=l.displays.DisplayScore;l.displays.DisplayScore.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,displays,DisplayScore".split(",");l.displays.DisplayScore.__super__=j.Display;l.displays.DisplayScore.prototype=v(j.Display.prototype,{dispose:function(){this._textNum=null;j.Display.prototype.dispose.call(this)},_updateValue:function(){return c.ConstantsApp.INT_LEVEL},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue())-1;this._textNum._setText(o.string(a))},__class__:l.displays.DisplayScore});l.displays.DisplayWinMessage=function(a,b,e){null==e&&(e=0);this._STATE_OUT=3;this._STATE_WAIT=2;this._STATE_IN=1;this._STATE_IDLE=0;j.Display.call(this,a,b);this._addElement(new j.Element({x:480,y:280,asset:"sb_desert_help_intro_backing",origin:new g.WorkinPoint(0.5,0.5)}));this._addElement(new j.TextLocalized(450,285,"winMessage","",{origin:new g.WorkinPoint(0.5,0.5)}));a=f.WorkinCloud.instance.getInt(this._updateValue());this._textNum=this._addElement(new j.TextBase(660,261,o.string(a),f.WorkinCloud.instance._getLocalize().getData("score")._getFontName(),{origin:new g.WorkinPoint(0.5,0.5)}));this._textNum._getRenderable().scaleX=this._textNum._getRenderable().scaleY=0==e?f.WorkinCloud.instance._getLocalize().getData("score")._getScale():e;this._refresh();f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));this._waitTimer=0;this._setState(this._STATE_IDLE)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.displays.DisplayWinMessage"]=l.displays.DisplayWinMessage;l.displays.DisplayWinMessage.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,displays,DisplayWinMessage".split(",");l.displays.DisplayWinMessage.__super__=j.Display;l.displays.DisplayWinMessage.prototype=v(j.Display.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));this._textNum=null;j.Display.prototype.dispose.call(this)},_updateValue:function(){return c.ConstantsApp.INT_LEVEL},_onEventKillAll:function(a){!0==a._getData().winState&&this._setState(this._STATE_IN)},update:function(a){switch(this._state){case this._STATE_IN:1>this._getRenderable().alpha&&(this._getRenderable().alpha+=2*a,1<=this._getRenderable().alpha&&(this._getRenderable().alpha=1,this._setState(this._STATE_WAIT)));break;case this._STATE_WAIT:0<this._waitTimer&&(this._waitTimer-=a,0>=this._waitTimer&&(this._waitTimer=0,this._setState(this._STATE_OUT)));break;case this._STATE_OUT:0<this._getRenderable().alpha&&(this._getRenderable().alpha-=2*a,0>=this._getRenderable().alpha&&(this._getRenderable().alpha=0,this._setState(this._STATE_IDLE)))}
j.Display.prototype.update.call(this,a)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IDLE:this._getPos().x=9999;this._getRenderable().alpha=0;break;case this._STATE_IN:this._getPos().x=this._getInitPos().x;break;case this._STATE_WAIT:this._waitTimer=1.5}},_refresh:function(){var a=f.WorkinCloud.instance.getInt(this._updateValue())-1;this._textNum._setText(o.string(a))},__class__:l.displays.DisplayWinMessage});l.screens={};l.screens.ScreenBase=function(a,b){this._STATE_SUSPENDED="suspend";this._STATE_OPENED="opened";this._STATE_OUT="out";this._STATE_IN="in";this.id=a;j.Element.call(this,{asset:b});this._clickWall=new N;var e=new p.FillSprite(16711680,c.ConstantsApp.STAGE_WIDTH,c.ConstantsApp.STAGE_HEIGHT);e.alpha.set__(0);this._clickWall.add(e);this._entity.addChild(this._clickWall);this._entity.addChild(this._textureEntity);this._buildButtons();this._flagStateAnimationComplete=this._flagStateCompleteTemp=this.flagDispose=!1;this._states=[];this._generateStates();this._stateIndex=this._states.length+
2;this._setFirstState();f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE,r(this,this._onEventScreenTransitionComplete))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenBase"]=l.screens.ScreenBase;l.screens.ScreenBase.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenBase".split(",");l.screens.ScreenBase.__super__=j.Element;l.screens.ScreenBase.prototype=v(j.Element.prototype,{_onStateComplete:function(){this._flagStateCompleteTemp=!1;""!=this._states[this._stateIndex].outFunc&&f.WorkinCloud.instance.log("[ScreenBase](_onStateComplete) Out Func not supported in HTML5 yet");switch(this._states[this._stateIndex].actionOnComplete){case l.screens.data.ScreenStateData.ACTION_OPENED:this._setOpenedState();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.ConstantsScreen.OUTPUT_OPENED,this.id));break;case l.screens.data.ScreenStateData.ACTION_CLOSED:this.setFlagDispose();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.ConstantsScreen.OUTPUT_CLOSED,this.id));break;case l.screens.data.ScreenStateData.ACTION_NEW_STATE:this._setState(this._states[this._stateIndex].actionData);break;case l.screens.data.ScreenStateData.ACTION_EVENT:this._dispatcher.dispatchEvent(new m.WMEvent(this._states[this._stateIndex].actionData));break;case l.screens.data.ScreenStateData.ACTION_FLOW:this._doFlowEvent(this._states[this._stateIndex].actionData)}},_findStateIndex:function(a){for(var b=this._states.length-1;0<=b;){if(this._states[b].id==a)return b;b--}
return-1},getState:function(){return this._states[this._stateIndex].id},_setState:function(a,b){null==b&&(b=!1);var e=this._findStateIndex(a);if(0>e)f.WorkinCloud.instance.log("[ScreenBase](_setState) ERROR : State >"+a+"< not found."),f.WorkinCloud.instance.log("[ScreenBase](_setState) cancelling setState().");else if(b||e!=this._stateIndex)this._flagStateAnimationComplete=this._flagStateCompleteTemp=!1,this._stateIndex=e},_addState:function(a,b,e,c,d,f){null==f&&(f="");null==d&&(d="");null==c&&(c="");null==e&&(e=0);this._states.push(new l.screens.data.ScreenStateData(a,b,e,c,d,f))},isClosing:function(){return this.getState()==this._STATE_OUT},close:function(){this.setFlagDispose();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.ConstantsScreen.OUTPUT_CLOSED,this.id))},suspend:function(){this._setState(this._STATE_SUSPENDED)},open:function(){this._setOpenedState();this._dispatcher.dispatchEvent(new m.WMEventScreenOut(c.ConstantsScreen.OUTPUT_OPENED,this.id))},dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE,r(this,this._onEventScreenTransitionComplete));this._states=null;j.Element.prototype.dispose.call(this)},reset:function(){this._setFirstState()},handleInput:function(a){var b=!0;switch(a.input){case c.ConstantsApp.INPUT_CLICK:switch(a.phase){case 1:this._onInputDown(a.x,a.y)||(b=!1);break;case 2:this._onInputMove(a.x,a.y)||(b=!1);break;case 0:this._onInputUp(a.x,a.y)||(b=!1)}
break;default:this._onInput(a)||(b=!1)}
return b},update:function(a){j.Element.prototype.update.call(this,a);this._flagStateCompleteTemp&&this._onStateComplete()},_doFlowEvent:function(a){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventFlow(a))},_buildButtons:function(){},_onInput:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputMove:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputUp:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_onInputDown:function(){return this.getState()!=this._STATE_OPENED?!1:!0},_generateStates:function(){this._addState(this._STATE_IN,"in",l.screens.data.ScreenStateData.ACTION_OPENED);this._addState(this._STATE_OUT,"out",l.screens.data.ScreenStateData.ACTION_CLOSED);this._addState(this._STATE_OPENED,"open");this._addState(this._STATE_SUSPENDED,"suspend")},_setOpenedState:function(){this._setState(this._STATE_OPENED)},_setFirstState:function(){this._setState(this._STATE_IN)},setFlagDispose:function(){this.flagDispose=!0},_onEventScreenTransitionComplete:function(){},__class__:l.screens.ScreenBase});l.screens.ScreenEndGame=function(a,b,e){null==b&&(b="");this._BLINK_TIME=1;l.screens.ScreenBase.call(this,a,b,e);this._blinkTimer=this._BLINK_TIME;"en"!=f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID)?(this._addElement(new j.TextLocalized(470,235,"dont_give_up","",{})),this._addElement(new j.TextLocalized(450,335,"you_made_it","",{})),this._addElement(new j.TextLocalized(660,435,"waves_end_game","",{})),a=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?"tap_anywhere_again":"click_anywhere_again",this._textClickToPlay=this._addElement(new j.TextLocalized(c.ConstantsApp.STAGE_CENTER_X,520,a,"",{origin:new g.WorkinPoint(0.5,0.5)}))):(this._addElement(new j.Element({x:470,y:235,asset:"SB_TryAgain_dontgiveup"})),this._addElement(new j.Element({x:450,y:335,asset:"SB_TryAgain_youmadeit"})),this._addElement(new j.Element({x:660,y:435,asset:"SB_TryAgain_waves"})),this._textClickToPlay=this._addElement(new j.Element({x:168,y:490,asset:"SB_TryAgain_Click"})));this._score=new l.displays.DisplayScore(540,410,0.7,!0);this._score.lock();this._addElement(this._score)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenEndGame"]=l.screens.ScreenEndGame;l.screens.ScreenEndGame.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenEndGame".split(",");l.screens.ScreenEndGame.__super__=l.screens.ScreenBase;l.screens.ScreenEndGame.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._score=this._buttonPlayAgain=this._textClickToPlay=null;l.screens.ScreenBase.prototype.dispose.call(this)},_onInputDown:function(){if(this.getState()!=this._STATE_OPENED)return!1;if(f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_INPUT_LOCK))return!0;this._doFlowEvent(c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_INPUT_LOCK,!0);return!1},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a);this._blinkTimer-=a;0>=this._blinkTimer&&(0==this._textClickToPlay._getRenderable().alpha?(this._blinkTimer=this._BLINK_TIME,this._textClickToPlay._getRenderable().alpha=1):(this._blinkTimer=this._BLINK_TIME/2,this._textClickToPlay._getRenderable().alpha=0))},__class__:l.screens.ScreenEndGame});l.screens.ScreenGameplayHUD=function(a,b,e){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,e);this._addElement(new l.displays.DisplayScore(785,150));this._addElement(new j.Element({x:786,y:34,asset:"sb_desert_HUD_nextpiece_glass"}));this._addElement(new l.buttons.ButtonBase(916,39,new g.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sb_desert_HUD_pause","ui/gameplay_hud/sb_desert_HUD_pause","ui/gameplay_hud/sb_desert_HUD_pause_dwn"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventPauseClick));this._pauseTimer=2;this._isDecreasing=!0;this._addElement(new l.displays.DisplayLevel(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y));this._winMessage=this._addElement(new l.displays.DisplayWinMessage(0,0,0.5))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenGameplayHUD"]=l.screens.ScreenGameplayHUD;l.screens.ScreenGameplayHUD.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenGameplayHUD".split(",");l.screens.ScreenGameplayHUD.__super__=l.screens.ScreenBase;l.screens.ScreenGameplayHUD.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._wavebar=null;l.screens.ScreenBase.prototype.dispose.call(this)},_onEventPauseClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU)},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a)},_onEventScreenTransitionComplete:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_OPEN)},__class__:l.screens.ScreenGameplayHUD});l.screens.ScreenGameplayMenu=function(a,b,e){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,e);this._addElement(new j.Element({asset:"ui/menu/sb_desert_menu_backing",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new g.WorkinPoint(0.5,0.5)}));this._addElement(new l.buttons.ButtonBase(399,255,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_menu_play_up","ui/menu/sb_desert_menu_play_down","ui/menu/sb_desert_menu_play_up"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventResumeClick));this._addElement(new l.buttons.ButtonBase(560,255,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_menu_help_up","ui/menu/sb_desert_menu_help_down","ui/menu/sb_desert_menu_help_up"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventHelpClick));this._buttonSoundOn=this._addElement(new l.buttons.ButtonBase(399,400,new g.WorkinPoint(0.5,0.5),"sb_desert_menu_soundon_up","sb_desert_menu_soundon_down","sb_desert_menu_soundon_up"));this._buttonSoundOn._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventSoundToggleClick));this._buttonSoundOff=this._addElement(new l.buttons.ButtonBase(399,400,new g.WorkinPoint(0.5,0.5),"sb_desert_menu_soundoff_up","sb_desert_menu_soundoff_down","sb_desert_menu_soundoff_up"));this._buttonSoundOff._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventSoundToggleClick));(this._soundIsMuted=f.WorkinCloud.instance._getSound().getMute())?(this._buttonSoundOn._getPos().x=9999,this._buttonSoundOff._getPos().x=399):(this._buttonSoundOn._getPos().x=399,this._buttonSoundOff._getPos().x=9999);this._addElement(new l.buttons.ButtonBase(560,400,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_menu_close_up","ui/menu/sb_desert_menu_close_down","ui/menu/sb_desert_menu_close_up"))._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventQuitClick));this._addElement(new j.TextLocalized(480,130,"menu","",{origin:new g.WorkinPoint(0.5,0.5)}))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenGameplayMenu"]=l.screens.ScreenGameplayMenu;l.screens.ScreenGameplayMenu.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenGameplayMenu".split(",");l.screens.ScreenGameplayMenu.__super__=l.screens.ScreenBase;l.screens.ScreenGameplayMenu.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._buttonSoundOff=this._buttonSoundOn=null;l.screens.ScreenBase.prototype.dispose.call(this)},_removeEventListeners:function(){l.screens.ScreenBase.prototype._removeEventListeners.call(this)},_addEventListeners:function(){l.screens.ScreenBase.prototype._addEventListeners.call(this)},_onEventQuitClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT)},_onEventResumeClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE)},_onEventSoundToggleClick:function(){!1==this._soundIsMuted?(this._soundIsMuted=!0,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn._getPos().x=9999,this._buttonSoundOff._getPos().x=399):(this._soundIsMuted=!1,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn._getPos().x=399,this._buttonSoundOff._getPos().x=9999)},_onEventHelpClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP)},__class__:l.screens.ScreenGameplayMenu});l.screens.ScreenGeneric=function(a,b,e){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,e);this._flagHasSpaceAction=!1};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenGeneric"]=l.screens.ScreenGeneric;l.screens.ScreenGeneric.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenGeneric".split(",");l.screens.ScreenGeneric.__super__=l.screens.ScreenBase;l.screens.ScreenGeneric.prototype=v(l.screens.ScreenBase.prototype,{_onInputMove:function(){return!1},_onInputUp:function(){return!1},_onInputDown:function(){return!1},__class__:l.screens.ScreenGeneric});l.screens.ScreenHelp=function(a,b,e){null==b&&(b="");this._STATE_PAGE2=2;this._STATE_PAGE1=1;l.screens.ScreenBase.call(this,a,b,e);this._addElement(new j.Element({x:32,y:11,asset:"sb_desert_help_backing"}));this._addElement(new j.TextLocalized(480,90,"help","",{origin:new g.WorkinPoint(0.5,0.5)}));this._page1=[];this._page2=[];this._page1.push(this._addElement(new j.TextLocalized(480,180,"desc1","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(480,210,"desc2","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(230,310,"descBlock1a","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(305,313,"descBlock1b","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(415,310,"descBlock2a","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(513,313,"descBlock2b","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(610,310,"descBlock3a","",{origin:new g.WorkinPoint(0.5,0.5)})));this._page1.push(this._addElement(new j.TextLocalized(710,313,"descBlock3b","",{origin:new g.WorkinPoint(0.5,0.5)})));f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?(this._page1.push(this._addElement(new j.Element({x:465,y:325,asset:"sb_desert_help_mobile_instructions",origin:new g.WorkinPoint(0.5,0.5)}))),this._page1.push(this._addElement(new j.TextLocalized(355,365,"touchmove","",{origin:new g.WorkinPoint(0.5,0.5)}))),this._page1.push(this._addElement(new j.TextLocalized(670,365,"taprotate","",{origin:new g.WorkinPoint(0.5,0.5)})))):(this._page1.push(this._addElement(new j.Element({x:465,y:325,asset:"sb_desert_help_mobile_instructions_half",origin:new g.WorkinPoint(0.5,0.5)}))),this._page1.push(this._addElement(new j.TextLocalized(335,430,"keyArrows","",{origin:new g.WorkinPoint(0.5,0.5)}))),this._page1.push(this._addElement(new j.TextLocalized(610,430,"keyRotate","",{origin:new g.WorkinPoint(0.5,0.5)}))));this._page2.push(this._addElement(new j.Element({x:470,y:300,asset:"sb_desert_help_page2",origin:new g.WorkinPoint(0.5,0.5)})));this._page2.push(this._addElement(new j.TextLocalized(475,190,"extraTime","",{origin:new g.WorkinPoint(0.5,0.5),center:!0})));this._page2.push(this._addElement(new j.TextLocalized(292,360,"someTime","",{origin:new g.WorkinPoint(0.5,0.5),center:!0})));this._page2.push(this._addElement(new j.TextLocalized(463,360,"moreTime","",{origin:new g.WorkinPoint(0.5,0.5),center:!0})));this._page2.push(this._addElement(new j.TextLocalized(645,360,"aLotOfTime","",{origin:new g.WorkinPoint(0.5,0.5),center:!0})));this._buttonNext=this._addElement(new l.buttons.ButtonBase(725,440,new g.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sb_desert_right_up","ui/gameplay_hud/sb_desert_right_down","ui/gameplay_hud/sb_desert_right_down"));this._buttonNext._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onNextClick));this._buttonNext.setScale(0.6,0.6);this._page1.push(this._buttonNext);this._buttonBack=this._addElement(new l.buttons.ButtonBase(220,440,new g.WorkinPoint(0.5,0.5),"ui/gameplay_hud/sb_desert_left_up","ui/gameplay_hud/sb_desert_left_down","ui/gameplay_hud/sb_desert_left_down"));this._buttonBack._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onBackClick));this._buttonBack.setScale(0.6,0.6);this._page2.push(this._buttonBack);this._addElement(new j.Element({x:796,y:421,asset:"sb_desert_close_backing"}));this._buttonClose=this._addElement(new l.buttons.ButtonBase(858,501,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_menu_close_up","ui/menu/sb_desert_menu_close_down","ui/menu/sb_desert_menu_close_up"));this._buttonClose._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onEventCloseClick));this._buttonClose.setScale(0.7,0.7);this._setHelpScreenlState(this._STATE_PAGE1)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenHelp"]=l.screens.ScreenHelp;l.screens.ScreenHelp.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenHelp".split(",");l.screens.ScreenHelp.__super__=l.screens.ScreenBase;l.screens.ScreenHelp.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._page2=this._page1=this._buttonBack=this._buttonNext=this._buttonClose=null;l.screens.ScreenBase.prototype.dispose.call(this)},_onBackClick:function(){this._setHelpScreenlState(this._STATE_PAGE1)},_onNextClick:function(){this._setHelpScreenlState(this._STATE_PAGE2)},_onEventCloseClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_HELP_CLOSE)},_moveOnScreen:function(a){for(var b=a.length;0<b--;)a[b]._getPos().x=a[b]._getInitPos().x},_moveOffScreen:function(a){for(var b=a.length;0<b--;)a[b]._getPos().x=9999},_setHelpScreenlState:function(a){this._helpScreenState=a;switch(this._helpScreenState){case this._STATE_PAGE1:this._moveOnScreen(this._page1);this._moveOffScreen(this._page2);break;case this._STATE_PAGE2:this._moveOffScreen(this._page1),this._moveOnScreen(this._page2)}},__class__:l.screens.ScreenHelp});l.screens.ScreenLoading=function(a,b,e){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,e);this._loadSpinner=this._addElement(new j.Element({x:c.ConstantsApp.STAGE_CENTER_X-30,y:c.ConstantsApp.STAGE_CENTER_Y+50,origin:new g.WorkinPoint(0.5,2.5),asset:"SB_Loading_Plankton"}));this._addElement(new j.Element({x:204,y:190,asset:"SB_Loading_Flowers"}));this._addElement(new j.TextLocalized(480,380,"loading","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));this._addElement(new j.Element({x:480,y:458,asset:"loading_backing",origin:new g.WorkinPoint(0.5,0.5)}));this._addElement(new l.displays.DisplayLoadingProgress(300,c.ConstantsApp.STAGE_CENTER_Y+165))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenLoading"]=l.screens.ScreenLoading;l.screens.ScreenLoading.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenLoading".split(",");l.screens.ScreenLoading.__super__=l.screens.ScreenBase;l.screens.ScreenLoading.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._loadSpinner=null;l.screens.ScreenBase.prototype.dispose.call(this)},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a);this._loadSpinner._getRenderable().rotation+=180*a},__class__:l.screens.ScreenLoading});l.screens.ScreenPauseAlert=function(a,b,e){null==b&&(b="");l.screens.ScreenBase.call(this,a,b,e);this._alertBox=new p.FillSprite(0,c.ConstantsApp.STAGE_WIDTH|0,c.ConstantsApp.STAGE_HEIGHT|0);a=new N;a.add(this._alertBox);this._textureEntity.addChild(a);this._textAlert=this._addElement(new j.TextLocalized(50,50,"orientation_portrait","",{origin:new g.WorkinPoint(0,0.5)}))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenPauseAlert"]=l.screens.ScreenPauseAlert;l.screens.ScreenPauseAlert.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenPauseAlert".split(",");l.screens.ScreenPauseAlert.__super__=l.screens.ScreenBase;l.screens.ScreenPauseAlert.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._alertBox=this._textAlert=null;l.screens.ScreenBase.prototype.dispose.call(this)},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a)},__class__:l.screens.ScreenPauseAlert});l.screens.ScreenQuitConfirm=function(a,b,e){l.screens.ScreenBase.call(this,a,b,e);this._addElement(new j.Element({asset:"ui/menu/sb_desert_menu_backing",x:c.ConstantsApp.STAGE_WIDTH/2,y:c.ConstantsApp.STAGE_HEIGHT/2,origin:new g.WorkinPoint(0.5,0.5)}));this._addElement(new j.TextLocalized(480,180,"quit_confirm_header","",{origin:new g.WorkinPoint(0.5,0.5),center:!0}));this._buttonYes=this._addElement(new l.buttons.ButtonBase(400,400,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_btn_blank_upstate","ui/menu/sb_desert_btn_blank_downstate","ui/menu/sb_desert_btn_blank_upstate"));this._buttonYes._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onYesClick));this._buttonYes.addElement(new j.TextLocalized(0,0,"yes","",{origin:new g.WorkinPoint(0.5,0.5)}));this._buttonNo=this._addElement(new l.buttons.ButtonBase(560,400,new g.WorkinPoint(0.5,0.5),"ui/menu/sb_desert_btn_blank_upstate","ui/menu/sb_desert_btn_blank_downstate","ui/menu/sb_desert_btn_blank_upstate"));this._buttonNo._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onNoClick));this._buttonNo.addElement(new j.TextLocalized(0,0,"no","",{origin:new g.WorkinPoint(0.5,0.5)}))};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenQuitConfirm"]=l.screens.ScreenQuitConfirm;l.screens.ScreenQuitConfirm.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenQuitConfirm".split(",");l.screens.ScreenQuitConfirm.__super__=l.screens.ScreenBase;l.screens.ScreenQuitConfirm.prototype=v(l.screens.ScreenBase.prototype,{_onNoClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO)},_onYesClick:function(){this.getState()==this._STATE_OPENED&&this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES)},dispose:function(){this._buttonNo=this._buttonYes=null;l.screens.ScreenBase.prototype.dispose.call(this)},__class__:l.screens.ScreenQuitConfirm});l.screens.ScreenScreenshot=function(){};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenScreenshot"]=l.screens.ScreenScreenshot;l.screens.ScreenScreenshot.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenScreenshot".split(",");l.screens.ScreenScreenshot.__super__=l.screens.ScreenBase;l.screens.ScreenScreenshot.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){l.screens.ScreenBase.prototype.dispose.call(this)},__class__:l.screens.ScreenScreenshot});l.screens.ScreenSplash=function(a,b,e){null==b&&(b="");this._BLINK_TIME=1;l.screens.ScreenBase.call(this,a,b,e);this._blinkTimer=this._BLINK_TIME;"en"!=f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID)?this._addElement(new j.TextLocalized(480,80,"title","",{origin:new g.WorkinPoint(0.5,0.5),center:!0})):(this._addElement(new j.Element({x:278,y:35,asset:"SpongeBobSplash_logo"})),this._addElement(new j.Element({x:440,y:25,asset:"SpongeBobSplash_Title"})),this._addElement(new j.Element({x:780,y:10,asset:"SpongeBobSplash-Nick_logo"})));a=f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?"tap_anywhere":"click_anywhere";this._textClickToPlay=this._addElement(new j.TextLocalized(c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_HEIGHT-50,a,"",{origin:new g.WorkinPoint(0.5,0.5)}));this._buttonSoundOn=new l.buttons.ButtonBase(920,520,new g.WorkinPoint(0.5,0.5),"sb_caprisun_desert_SoundOn","sb_caprisun_desert_SoundOn","sb_caprisun_desert_SoundOn");this._buttonSoundOn._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onSoundMute));this._buttonSoundOn.setScale(0.5,0.5);this._addElement(this._buttonSoundOn);this._buttonSoundOff=new l.buttons.ButtonBase(920,520,new g.WorkinPoint(0.5,0.5),"sb_caprisun_desert_SoundOff","sb_caprisun_desert_SoundOff","sb_caprisun_desert_SoundOff");this._buttonSoundOff.setScale(0.5,0.5);this._buttonSoundOff._getDispatcher().addEventListener(l.buttons.ButtonBase.CLICK,r(this,this._onSoundMute));this._addElement(this._buttonSoundOff);(this._soundIsMuted=f.WorkinCloud.instance._getSound().getMute())?(this._buttonSoundOn._getPos().x=9999,this._buttonSoundOff._getPos().x=920):(this._buttonSoundOn._getPos().x=920,this._buttonSoundOff._getPos().x=9999)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenSplash"]=l.screens.ScreenSplash;l.screens.ScreenSplash.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenSplash".split(",");l.screens.ScreenSplash.__super__=l.screens.ScreenBase;l.screens.ScreenSplash.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._buttonSoundOff=this._buttonSoundOn=this._textClickToPlay=null;l.screens.ScreenBase.prototype.dispose.call(this)},_onInputDown:function(a,b){if(this._soundIsMuted){if(a>this._buttonSoundOff._getPos().x-50&&a<this._buttonSoundOff._getPos().x+50&&b>this._buttonSoundOff._getPos().y-50&&b<this._buttonSoundOff._getPos().y+50)return!1}else if(a>this._buttonSoundOn._getPos().x-50&&a<this._buttonSoundOn._getPos().x+
50&&b>this._buttonSoundOn._getPos().y-50&&b<this._buttonSoundOn._getPos().y+50)return!1;if(this.getState()!=this._STATE_OPENED)return!1;this._doFlowEvent(c.ConstantsScreen.FLOW_SPLASH_PLAY);return!1},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a);this._blinkTimer-=a;0>=this._blinkTimer&&(0==this._textClickToPlay._getRenderable().alpha?(this._blinkTimer=this._BLINK_TIME,this._textClickToPlay._getRenderable().alpha=1):(this._blinkTimer=this._BLINK_TIME/2,this._textClickToPlay._getRenderable().alpha=0))},_onSoundMute:function(){!1==this._soundIsMuted?(this._soundIsMuted=!0,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn._getPos().x=9999,this._buttonSoundOff._getPos().x=920):(this._soundIsMuted=!1,f.WorkinCloud.instance._getSound().setMute(this._soundIsMuted),this._buttonSoundOn._getPos().x=920,this._buttonSoundOff._getPos().x=9999)},__class__:l.screens.ScreenSplash});l.screens.ScreenTutorial=function(a,b,e){null==b&&(b="");this._STATE_TUT4=5;this._STATE_TUT3=4;this._STATE_TUT2=3;this._STATE_TUT1=2;this._STATE_PLANKTON=1;l.screens.ScreenBase.call(this,a,b,e);this._addElement(new j.Element({x:480,y:280,asset:"sb_desert_help_intro_backing",origin:new g.WorkinPoint(0.5,0.5)}));this._tutorialPlankton=[];this._tutorial1=[];this._tutorial2=[];this._tutorial3=[];this._tutorial4=[];this._plankton=this._addElement(new i.elements.others.PlanktonTutorialElement({}));this._tutorialPlankton.push(this._addElement(c.ConstantsApp.getTutorialElements()[11]));this._tutorial1.push(this._addElement(c.ConstantsApp.getTutorialElements()[0]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[1]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[12]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[13]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[14]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[15]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[16]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[17]));this._tutorial2.push(this._addElement(c.ConstantsApp.getTutorialElements()[18]));this._tutorial3.push(this._addElement(c.ConstantsApp.getTutorialElements()[2]));this._tutorial3.push(this._addElement(c.ConstantsApp.getTutorialElements()[3]));this._tutorial3.push(this._addElement(c.ConstantsApp.getTutorialElements()[4]));f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE);this._tutorial3.push(this._addElement(c.ConstantsApp.getTutorialElements()[5]));this._tutorial4.push(this._addElement(c.ConstantsApp.getTutorialElements()[6]));this._tutorial4.push(this._addElement(c.ConstantsApp.getTutorialElements()[7]));this._tutorial4.push(this._addElement(c.ConstantsApp.getTutorialElements()[8]));this._tutorial4.push(this._addElement(c.ConstantsApp.getTutorialElements()[9]));this._tutorial4.push(this._addElement(c.ConstantsApp.getTutorialElements()[10]));this._setTutorialState(this._STATE_PLANKTON)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.ScreenTutorial"]=l.screens.ScreenTutorial;l.screens.ScreenTutorial.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,ScreenTutorial".split(",");l.screens.ScreenTutorial.__super__=l.screens.ScreenBase;l.screens.ScreenTutorial.prototype=v(l.screens.ScreenBase.prototype,{dispose:function(){this._tuto4e=this._tuto4d=this._tuto4c=this._tuto4b=this._tuto4a=this._tuto3d=this._tuto3c=this._tuto3b=this._tuto3a=this._tuto2a=this._tuto1a=this._tutorial4=this._tutorial3=this._tutorial2=this._tutorial1=this._buttonSoundOff=this._buttonSoundOn=this._textClickToPlay=null;l.screens.ScreenBase.prototype.dispose.call(this)},_onInputDown:function(){if(this.getState()!=this._STATE_OPENED)return!1;switch(this._tutorialState){case this._STATE_PLANKTON:this._setTutorialState(this._STATE_TUT1);break;case this._STATE_TUT1:this._setTutorialState(this._STATE_TUT2);break;case this._STATE_TUT2:this._setTutorialState(this._STATE_TUT3);break;case this._STATE_TUT3:this._setTutorialState(this._STATE_TUT4);break;case this._STATE_TUT4:this._doFlowEvent(c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_CLOSE)}
return!1},update:function(a){l.screens.ScreenBase.prototype.update.call(this,a)},_moveOnScreen:function(a){for(var b=a.length;0<b--;)a[b]._getPos().x=a[b]._getInitPos().x},_moveOffScreen:function(a){for(var b=a.length;0<b--;)a[b]._getPos().x=9999},_setTutorialState:function(a){this._tutorialState=a;switch(this._tutorialState){case this._STATE_PLANKTON:this._plankton.doIn();this._moveOffScreen(this._tutorial1);this._moveOffScreen(this._tutorial2);this._moveOffScreen(this._tutorial3);this._moveOffScreen(this._tutorial4);break;case this._STATE_TUT1:this._plankton.doOut();this._moveOffScreen(this._tutorialPlankton);this._moveOnScreen(this._tutorial1);break;case this._STATE_TUT2:this._moveOffScreen(this._tutorial1);this._moveOnScreen(this._tutorial3);break;case this._STATE_TUT3:this._moveOffScreen(this._tutorial3);this._moveOnScreen(this._tutorial2);break;case this._STATE_TUT4:this._moveOffScreen(this._tutorial2),this._moveOnScreen(this._tutorial4)}},__class__:l.screens.ScreenTutorial});l.screens.data={};l.screens.data.ChangeActionData=function(){};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.data.ChangeActionData"]=l.screens.data.ChangeActionData;l.screens.data.ChangeActionData.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,data,ChangeActionData".split(",");l.screens.data.ChangeActionData.prototype={_getAction:function(){return this._action},_getChangeEvent:function(){return this._changeEvent},_getScreenId:function(){return this._screenId},__class__:l.screens.data.ChangeActionData};l.screens.data.ScreenData=function(a,b,e,c,d){null==c&&(c=0);null==e&&(e="");this.id=a;this.screenClass=b;this.assetClassName=e;this.layer=c;this.data=null==d?new G:d};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.data.ScreenData"]=l.screens.data.ScreenData;l.screens.data.ScreenData.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,data,ScreenData".split(",");l.screens.data.ScreenData.prototype={__class__:l.screens.data.ScreenData};l.screens.data.ScreenQueueData=function(a,b,e){null==e&&(e="");this.screenData=a;this.openCondition=b;this.openTestString=e};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.data.ScreenQueueData"]=l.screens.data.ScreenQueueData;l.screens.data.ScreenQueueData.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,data,ScreenQueueData".split(",");l.screens.data.ScreenQueueData.prototype={validateCondition:function(a,b){null==b&&(b="");return this.openCondition==a?""==this.openTestString||this.openTestString==b:!1},__class__:l.screens.data.ScreenQueueData};l.screens.data.ScreenStateData=function(a,b,e,c,d,f){this.id=a;this.animation=b;this.actionOnComplete=e;this.actionData=c;this.inFunc=d;this.outFunc=f};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.screens.data.ScreenStateData"]=l.screens.data.ScreenStateData;l.screens.data.ScreenStateData.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,screens,data,ScreenStateData".split(",");l.screens.data.ScreenStateData.prototype={__class__:l.screens.data.ScreenStateData};l.transitions={};l.transitions.TransitionBase=function(a,b,e,c){null==c&&(c="");null==e&&(e=!1);null==b&&(b=!0);this._STATE_OUT=3;this._STATE_IDLE=2;this._STATE_IN=1;this._STATE_HIDDEN=0;this._transitionId=c;this._flagOutOnly=e;this.flagDispose=!1;j.Element.call(this,{asset:a});b?this._setState(this._STATE_HIDDEN):this._flagOutOnly?this._setState(this._STATE_OUT):this._setState(this._STATE_IN)};k["com.nick.spongeBob.capri_sun_adventure_desert.ui.transitions.TransitionBase"]=l.transitions.TransitionBase;l.transitions.TransitionBase.__name__="com,nick,spongeBob,capri_sun_adventure_desert,ui,transitions,TransitionBase".split(",");l.transitions.TransitionBase.__super__=j.Element;l.transitions.TransitionBase.prototype=v(j.Element.prototype,{dispose:function(){j.Element.prototype.dispose.call(this);this._mc=null},_setState:function(a){this._state=a;switch(this._state){case this._STATE_HIDDEN:this.hide()}},show:function(){this._mc.set_visible(!0)},hide:function(){this._mc.set_visible(!1)},start:function(){this.show();this._setState(this._STATE_IN)},update:function(a){j.Element.prototype.update.call(this,a)},_getIsOutro:function(){return this._state==this._STATE_OUT},__class__:l.transitions.TransitionBase});i={World:function(a){this.MOVE_LR_TIME=0.1;this._POOL_PARTICLES="_POOL_PARTICLES";this._STATE_GAMEPLAY=1;this._STATE_INITIALIZING=0;m.WMEventDispatcher.call(this);this._timeline=a;this._elementManager=new j.ElementManager(this._timeline,c.ConstantsApp.STAGE_CENTER_X,c.ConstantsApp.STAGE_CENTER_Y);this._elementManager.addLayer(c.ConstantsApp.LAYER_BG);this._elementManager.addLayer(c.ConstantsApp.LAYER_PLAYER);this._elementManager.addLayer(c.ConstantsApp.LAYER_FORTRESS);this._elementManager.addLayer(c.ConstantsApp.LAYER_FORTRESS_FG);this._elementManager.addLayer(c.ConstantsApp.LAYER_BLOCKER);this._elementManager.addLayer(c.ConstantsApp.LAYER_ENEMY);this._elementManager.addLayer(c.ConstantsApp.LAYER_FG);this._elementManager.addLayer(c.ConstantsApp.LAYER_HUD);f.WorkinCloud.instance.stack([r(this,this._initPools),r(this,this._initEnemyPool1),r(this,this._initEnemyPool2),r(this,this._initEnemyPool3),r(this,this._initEnemyPool4),r(this,this._initEnemyPool5),r(this,this._initTutorialElements),r(this,this._onGenerationComplete)]);this._setState(this._STATE_INITIALIZING)}};k["com.nick.spongeBob.capri_sun_adventure_desert.world.World"]=i.World;i.World.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,World".split(",");i.World.__super__=m.WMEventDispatcher;i.World.prototype=v(m.WMEventDispatcher.prototype,{_onGenerationComplete:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE))},_initTutorialElements:function(){c.ConstantsApp.initTutorialElements()},_onEventInitPoolComplete:function(){f.WorkinCloud.instance.modifyInt(c.ConstantsApp.INT_POOL_PROGRESS,1);f.WorkinCloud.instance._getDispatcher().removeEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));f.WorkinCloud.instance.unpauseStack()},_initEnemyPool5:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager.addPool(o.string(i.elements.enemies.EnemyPlanktonAir),i.elements.enemies.EnemyPlanktonAir,10);null},_initEnemyPool4:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager.addPool(o.string(i.elements.enemies.EnemyPlanktonShield),i.elements.enemies.EnemyPlanktonShield,10);null},_initEnemyPool3:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager.addPool(o.string(i.elements.enemies.EnemyPlanktonPogo),i.elements.enemies.EnemyPlanktonPogo,10);null},_initEnemyPool2:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager.addPool(o.string(i.elements.enemies.EnemyPlanktonStack),i.elements.enemies.EnemyPlanktonStack,10);null},_initEnemyPool1:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager.addPool(o.string(i.elements.enemies.EnemyPlankton),i.elements.enemies.EnemyPlankton,10);null},_initPools:function(){f.WorkinCloud.instance.pauseStack();f.WorkinCloud.instance._getDispatcher().addEventListener(j.PoolManager.ALL_POOLS_FULL,r(this,this._onEventInitPoolComplete));this._poolManager=new j.PoolManager;this._poolManager.addPool(this._POOL_PARTICLES,i.elements.Particle,50)},_onGameover:function(){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_GAME_LOSE)||f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_GAME_LOSE,!0)},_doInput:function(a,b){switch(a){case c.ConstantsApp.INPUT_CLICK:switch(b){case m.WMEventInput.PHASE_DOWN:f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)&&null!=this._fortress._getCurrentPiece()&&this._fortress._getCurrentPiece().testHitPoint(f.WorkinCloud.instance._getInput()._getPointer()._getCurrentPos())&&(this._dragPieceID=this._fortress._getCurrentPiece()._getTheBlocks()._getUniqueId(),this._startDrag=!0);this._startCounting=!0;break;case m.WMEventInput.PHASE_UP:f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)&&(this._dragPieceID="",this._startDrag=!1,this._fortress.doMoveRight(!1),this._fortress.doMoveLeft(!1),this._fortress.doMoveDown(!1),0.2>this._tapTimer&&this._fortress.doRotate(),this._startCounting=!1,this._tapTimer=0)}
break;case c.ConstantsApp.INPUT_LEFT:switch(b){case m.WMEventInput.PHASE_DOWN:this._fortress.doMoveLeft(!0);break;case m.WMEventInput.PHASE_UP:this._fortress.doMoveLeft(!1)}
break;case c.ConstantsApp.INPUT_RIGHT:switch(b){case m.WMEventInput.PHASE_DOWN:this._fortress.doMoveRight(!0);break;case m.WMEventInput.PHASE_UP:this._fortress.doMoveRight(!1)}
break;case c.ConstantsApp.INPUT_DOWN:switch(b){case m.WMEventInput.PHASE_DOWN:this._fortress.doMoveDown(!0);break;case m.WMEventInput.PHASE_UP:this._fortress.doMoveDown(!1)}
break;case c.ConstantsApp.INPUT_SPACE:switch(b){case m.WMEventInput.PHASE_DOWN:this._fortress.doRotate()}}},handleInput:function(a){f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_PAUSED)||this._state==this._STATE_INITIALIZING||this._doInput(a.input,a.phase)},_onEventMobileKeyInput:function(a){this._doInput(a._getData().input,a._getData().phase)},_unpause:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,!1)},_pause:function(){f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_PAUSED,!0)},_spawnParticle:function(a){var b=[];b.x=a.x;b.y=a.y;b.type=c.ConstantsApp.TYPE_PARTICLE;b.layer=a.layer?a.layer:c.ConstantsApp.LAYER_FG;switch(a.particle){case c.ConstantsApp.PARTICLE_BLOCK:b.movie=o.string(a.particle)+o.string(f.WorkinUtils.getRandom(1,3,!0));b.y+=(0.5<Math.random()?1:-1)*10*Math.random();b.vx=(200+o.random(250))*(0.5<Math.random()?1:-1)/2;b.vy=(-500-o.random(300))/2;b.gravity=1E3;b.rotRate=-500+o.random(1E3);b.fadeRate=5;b.origin=new g.WorkinPoint(0.5,0.5);break;case c.ConstantsApp.PARTICLE_BLOCK_CHUNK:4==a.blockType&&(a.blockType=1),b.movie=o.string(a.particle)+o.string(f.WorkinUtils.getRandom(1,2,!0))+"_"+o.string(a.blockType),b.y+=(0.5<Math.random()?1:-1)*10*Math.random(),b.vx=(200+o.random(250))*(0.5<Math.random()?1:-1)/2,b.vy=(-500-o.random(300))/2,b.gravity=1E3,b.rotRate=-500+o.random(1E3),b.fadeRate=1,b.origin=new g.WorkinPoint(0.5,0.5)}
this._elementManager.addElement(this._poolManager.createElement(this._POOL_PARTICLES,b))},_onEventSpawnParticle:function(a){this._spawnParticle(a._getData())},_onEventSpawnSpecial:function(a){!1==a._getData().boardIsFull&&f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_BUILDING_MODE)&&(this._elementManager.addElement(new i.elements.ShineEffect({x:a._getData().pos.x,y:a._getData().pos.y})),this._elementManager.addElement(new i.elements.SpecialTimer({x:a._getData().pos.x,y:a._getData().pos.y,specialType:a._getData().specialType})))},_onEventKillAll:function(a){var b=0;for(!0==a._getData().spawnParticles&&(b=4);0<b--;)a=f.WorkinUtils.getRandom(c.ConstantsApp.STAGE_CENTER_X-150,c.ConstantsApp.STAGE_CENTER_X+150,!0),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,{pos:new g.WorkinPoint(a,350+f.WorkinUtils.getRandom(100,150,!0))}));for(b=this._elementManager._getElements().length;0<b--;)
if(this._elementManager._getElements()[b]._getType()==c.ConstantsApp.TYPE_ENEMY){for(a=3;0<a--;){var e={x:this._elementManager._getElements()[b]._getPos().x,y:this._elementManager._getElements()[b]._getPos().y,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,e))}
K.__cast(this._elementManager._getElements()[b],i.elements.enemies.EnemyBase).deactivate()}},_onEventSpawnPatrick:function(){this._elementManager.addElement(new i.elements.Patrick({}))},_onEventSpawnCrumbleEffect:function(a){this._elementManager.addElement(new i.elements.CrumbleEffect({x:a._getData().pos.x-120,y:a._getData().pos.y-220}))},_onEventPlanktonDeactivate:function(a){switch(a._getData().enemyClass){case o.string(i.elements.enemies.EnemyPlankton):this._arrayNumOfEnemies[0]--;break;case o.string(i.elements.enemies.EnemyPlanktonStack):this._arrayNumOfEnemies[1]--;break;case o.string(i.elements.enemies.EnemyPlanktonPogo):this._arrayNumOfEnemies[2]--;break;case o.string(i.elements.enemies.EnemyPlanktonShield):this._arrayNumOfEnemies[3]--;break;case o.string(i.elements.enemies.EnemyPlanktonAir):this._arrayNumOfEnemies[4]--}
this._totalNumOfEnemies--},_spawnEnemy:function(a){this._elementManager.addElement(this._poolManager.createElement(o.string(a),{fortress:this._fortress}));this._totalNumOfEnemies++},_onEventSpawnRandomEnemy:function(){if(!(f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)&&10<=this._totalNumOfEnemies)){var a=i.elements.enemies.EnemyBase,a=f.WorkinUtils.getRandom(1,5,!0);1==f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)?a=1:2==f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)?a=f.WorkinUtils.getRandom(1,2,!0):3==f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)?a=f.WorkinUtils.getRandom(1,3,!0):4==f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)&&(a=f.WorkinUtils.getRandom(1,4,!0));var b=10;f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)&&(b=5);switch(a){case 1:a=i.elements.enemies.EnemyPlankton;this._arrayNumOfEnemies[0]<b&&(this._arrayNumOfEnemies[0]++,this._spawnEnemy(a));break;case 2:a=i.elements.enemies.EnemyPlanktonStack;this._arrayNumOfEnemies[0]<b&&(this._arrayNumOfEnemies[1]++,this._spawnEnemy(a));break;case 3:a=i.elements.enemies.EnemyPlanktonPogo;this._arrayNumOfEnemies[0]<b&&(this._arrayNumOfEnemies[2]++,this._spawnEnemy(a));break;case 4:a=i.elements.enemies.EnemyPlanktonShield;this._arrayNumOfEnemies[0]<b&&(this._arrayNumOfEnemies[3]++,this._spawnEnemy(a));break;case 5:a=i.elements.enemies.EnemyPlanktonAir,this._arrayNumOfEnemies[0]<b&&(this._arrayNumOfEnemies[4]++,this._spawnEnemy(a))}}},_onEventChangeLayer:function(a){for(var b=a._getData().elements.length;0<b--;)this._elementManager.changeElementLayer(a._getData().elements[b],c.ConstantsApp.LAYER_FORTRESS)},_onEventSpawnNewPiece:function(){for(var a=new i.elements.Piece({fortress:this._fortress}),b=0;b<a._getAllBlocks().length;)this._elementManager.addElement(a._getAllBlocks()[b]),b++;this._fortress.addToFortress(a)},_onEventStopDragging:function(){this._dragPieceID="";this._startDrag=!1;this._fortress.doMoveRight(!1);this._fortress.doMoveLeft(!1);this._fortress.doMoveDown(!1)},_onEventGameOver:function(){this._onGameover()},_onUnpause:function(){this._unpause()},_onPause:function(){this._pause()},_removeEventListeners:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_PAUSE,r(this,this._onPause));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_UNPAUSE,r(this,this._onUnpause));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE,r(this,this._onEventSpawnNewPiece));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_CHANGE_LAYER,r(this,this._onEventChangeLayer));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_RANDOM_ENEMY,r(this,this._onEventSpawnRandomEnemy));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,r(this,this._onEventSpawnCrumbleEffect));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_PARTICLE,r(this,this._onEventSpawnParticle));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_PATRICK,r(this,this._onEventSpawnPatrick));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_MOBILE_KEY_INPUT,r(this,this._onEventMobileKeyInput));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_SPECIAL,r(this,this._onEventSpawnSpecial));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_GAME_OVER,r(this,this._onEventGameOver));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_STOP_DRAGGING,r(this,this._onEventStopDragging));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,r(this,this._onEventPlanktonDeactivate))},_addEventListeners:function(){f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_PAUSE,r(this,this._onPause));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_UNPAUSE,r(this,this._onUnpause));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE,r(this,this._onEventSpawnNewPiece));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_CHANGE_LAYER,r(this,this._onEventChangeLayer));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_RANDOM_ENEMY,r(this,this._onEventSpawnRandomEnemy));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,r(this,this._onEventSpawnCrumbleEffect));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_PARTICLE,r(this,this._onEventSpawnParticle));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_PATRICK,r(this,this._onEventSpawnPatrick));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_MOBILE_KEY_INPUT,r(this,this._onEventMobileKeyInput));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_SPECIAL,r(this,this._onEventSpawnSpecial));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_GAME_OVER,r(this,this._onEventGameOver));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_STOP_DRAGGING,r(this,this._onEventStopDragging));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,r(this,this._onEventPlanktonDeactivate))},render:function(){this._elementManager.renderElements()},update:function(a){if(!(!0==f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_PAUSED)&&this._state!=this._STATE_INITIALIZING))switch(a=Math.round(1E3*a)/1E3,this._state){case this._STATE_INITIALIZING:null!=this._poolManager&&this._poolManager.update(a);break;case this._STATE_GAMEPLAY:this._elementManager.updateElements(a);f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)&&(this._startCounting&&(this._tapTimer+=a),null!=this._fortress._getCurrentPiece()&&this._startDrag?!1==this._fortress._getCurrentPiece().testHitPoint(f.WorkinCloud.instance._getInput()._getPointer()._getCurrentPos())&&this._dragPieceID!=this._fortress._getCurrentPiece()._getTheBlocks()._getUniqueId()&&(this._dragPieceID="",this._startDrag=!1,this._fortress.doMoveRight(!1),this._fortress.doMoveLeft(!1),this._fortress.doMoveDown(!1)):(this._dragPieceID="",this._startDrag=!1,this._fortress.doMoveRight(!1),this._fortress.doMoveLeft(!1),this._fortress.doMoveDown(!1)),null!=this._fortress._getCurrentPiece()&&this._startDrag&&0<this._moveLRTimeDelay&&(this._moveLRTimeDelay-=a,0>=this._moveLRTimeDelay?(this._moveLRTimeDelay=this.MOVE_LR_TIME,f.WorkinCloud.instance._getInput()._getPointer()._getCurrentPos().x-
this._fortress._getCurrentPiece()._getTheBlocks()._getPos().x>c.ConstantsApp.BLOCK_SIZE?this._fortress.doMoveRight(!0):f.WorkinCloud.instance._getInput()._getPointer()._getCurrentPos().x-this._fortress._getCurrentPiece()._getTheBlocks()._getPos().x<-c.ConstantsApp.BLOCK_SIZE?this._fortress.doMoveLeft(!0):f.WorkinCloud.instance._getInput()._getPointer()._getCurrentPos().y-this._fortress._getCurrentPiece()._getTheBlocks()._getPos().y>c.ConstantsApp.BLOCK_SIZE/2&&this._fortress.doMoveDown(!0)):(this._fortress.doMoveRight(!1),this._fortress.doMoveLeft(!1),this._fortress.doMoveDown(!1))));for(a=f.WorkinCloud.instance._getInput()._getMultiTouch().iterator();a.hasNext();){var b=a.next();if(!1==b._getConsumed())switch(b._getSwipe()){case b.SWIPE_UP:b._setConsumed(!0);break;case b.SWIPE_DOWN:b._setConsumed(!0);break;case b.SWIPE_LEFT:b._setConsumed(!0);break;case b.SWIPE_RIGHT:b._setConsumed(!0)}}}},_setState:function(a){this._state=a;switch(a){case this._STATE_INITIALIZING:f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEALTH,3);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_SCORE,0);f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LEVEL,1);f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HAS_PATRICK_BLOCK,!1);this._startDrag=!1;this._elementManager.addElement(new j.Element({layer:c.ConstantsApp.LAYER_BG,asset:"gameplay_bg"}));c.ConstantsApp.initPieces();this._fortress=new i.elements.Fortress({x:(c.ConstantsApp.STAGE_WIDTH-600)/2+70,y:50});this._elementManager.addElement(this._fortress);this._elementManager.addElement(new i.elements.TowerLeft({x:175,y:378}));this._elementManager.addElement(new i.elements.TowerRight({x:810,y:378}));this._elementManager.addElement(new j.Element({x:68,y:345,asset:"sb_desert_bg_sand_pile",layer:c.ConstantsApp.LAYER_FORTRESS_FG}));this._elementManager.addElement(new i.elements.WaveBar({x:10,y:16}));this._elementManager.addElement(new i.elements.SpongeBob({x:400,y:370}));this._elementManager.addElement(new i.elements.HealthUI({x:770,y:185,layer:c.ConstantsApp.LAYER_HUD}));this._elementManager.addElement(new j.Element({x:962,y:206,asset:"sb_desert_HUD_nextpiece_back",layer:c.ConstantsApp.LAYER_HUD}))._getRenderable().rotation=180;this._dragPieceID="";this._tapTimer=0;this._startCounting=!1;this._moveLRTimeDelay=this.MOVE_LR_TIME;this._arrayNumOfEnemies=[];this._arrayNumOfEnemies.push(0);this._arrayNumOfEnemies.push(0);this._arrayNumOfEnemies.push(0);this._arrayNumOfEnemies.push(0);this._arrayNumOfEnemies.push(0);this._totalNumOfEnemies=0;break;case this._STATE_GAMEPLAY:f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE)),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE))}},dispose:function(){c.ConstantsApp.disposeTutorialElements();this._arrayNumOfEnemies=null;this._elementManager.dispose();this._elementManager=null;this._poolManager.dispose();this._timeline=this._poolManager=null;this._removeEventListeners();this._fortress=null;m.WMEventDispatcher.prototype.dispose.call(this)},start:function(){this._addEventListeners();this._setState(this._STATE_GAMEPLAY)},__class__:i.World});i.elements={};i.elements.Block=function(a){var b=f.WorkinUtils.getRandom(1,50,!0);1==b&&!1==f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_HAS_PATRICK_BLOCK)&&0==f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)%3?(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HAS_PATRICK_BLOCK,!0),this._blockLife=this._blockLifeMAX=1,this._blockType=4):(b=f.WorkinUtils.getRandom(1,10,!0),10==b?this._blockLife=this._blockLifeMAX=this._blockType=3:(b=f.WorkinUtils.getRandom(1,3,!0),this._blockLife=3==b?this._blockLifeMAX=this._blockType=2:this._blockLifeMAX=this._blockType=1));a.asset=4==this._blockType?"blockpat_shine":"block"+o.string(this._blockType)+"_shine";a.layer=c.ConstantsApp.LAYER_HUD;a.origin=new g.WorkinPoint(0.5,0.5);j.Element.call(this,a);this._currentRowId=a.rowId?a.rowId:0;this._currentColId=a.colId?a.colId:0;this._fadeIn=this._doBlink=!1;this._fadeOut=!0;this._hasSpawnSpecial=!1;this._hitbox=new I.Rectangle(this._getPos().x-150,this._getPos().y-150,300,300);f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_ENEMY_WAVES_MODE,r(this,this._onEventEnemyWavesMode))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Block"]=i.elements.Block;i.elements.Block.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Block".split(",");i.elements.Block.__super__=j.Element;i.elements.Block.prototype=v(j.Element.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_ENEMY_WAVES_MODE,r(this,this._onEventEnemyWavesMode));this._hitbox=null;j.Element.prototype.dispose.call(this)},_onEventEnemyWavesMode:function(){this._getRenderable().alpha=1},doDestroy:function(){for(var a=3;0<a--;){var b={x:this._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
this._setDoDelete(!0)},testHitPoint:function(a){return a.x>this._hitbox.x&&a.x<this._hitbox.x+this._hitbox.width&&a.y>this._hitbox.y&&a.y<this._hitbox.y+this._hitbox.height?!0:!1},_setBlockLife:function(a){this._blockLife=a;if(1>this._blockLife/this._blockLifeMAX&&0<this._blockLife/this._blockLifeMAX)switch(a=new p.ImageSprite(f.WorkinCloud.instance._getAssets().getTexture("block"+o.string(this._blockType)+"_destroy")),this.swapTexture(a),a.rotation.set__(this._currentTextureRotation),this._rotationCat){case 0:var b=a.y;b.set__(b._value+c.ConstantsApp.BLOCK_SIZE);break;case 1:b=a.x;b.set__(b._value+c.ConstantsApp.BLOCK_SIZE);b=a.y;b.set__(b._value+c.ConstantsApp.BLOCK_SIZE);break;case 2:b=a.x,b.set__(b._value+c.ConstantsApp.BLOCK_SIZE)}else 0>=this._blockLife&&4==this._blockType&&(f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_HAS_PATRICK_BLOCK,!1),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_PATRICK)));return this._blockLife},_getBlockLife:function(){return this._blockLife},_getBlockType:function(){return this._blockType},_setCurrentColId:function(a){return this._currentColId=a},_getCurrentColId:function(){return this._currentColId},_setCurrentRowId:function(a){return this._currentRowId=a},_getCurrentRowId:function(){return this._currentRowId},_setHasSpawnSpecial:function(a){return this._hasSpawnSpecial=a},_getHasSpawnSpecial:function(){return this._hasSpawnSpecial},hasSpawnedSpecial:function(){this._hasSpawnSpecial=!0;this._getRenderable().alpha=0.5},setPos:function(a,b){this._getPos().x=a;this._getPos().y=b;this._hitbox.x=this._getPos().x-150;this._hitbox.y=this._getPos().y-150},moveDown:function(){this._getPos().y+=c.ConstantsApp.BLOCK_SIZE;this._hitbox.y+=c.ConstantsApp.BLOCK_SIZE},moveRight:function(){this._getPos().x+=c.ConstantsApp.BLOCK_SIZE;this._hitbox.x+=c.ConstantsApp.BLOCK_SIZE},moveLeft:function(){this._getPos().x-=c.ConstantsApp.BLOCK_SIZE;this._hitbox.x-=c.ConstantsApp.BLOCK_SIZE},_toggleFade:function(){this._fadeIn?(this._fadeIn=!1,this._fadeOut=!0):(this._fadeIn=!0,this._fadeOut=!1)},update:function(a){j.Element.prototype.update.call(this,a);this._doBlink&&(this._fadeIn&&1>this._getRenderable().alpha?(this._getRenderable().alpha+=3*a,1<=this._getRenderable().alpha&&(this._getRenderable().alpha=1,this._toggleFade())):this._fadeOut&&0<this._getRenderable().alpha&&(this._getRenderable().alpha-=3*a,0>=this._getRenderable().alpha&&(this._getRenderable().alpha=0,this._toggleFade())))},__class__:i.elements.Block});i.elements.BlockDef=function(a,b){this.row=a;this.col=b};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.BlockDef"]=i.elements.BlockDef;i.elements.BlockDef.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,BlockDef".split(",");i.elements.BlockDef.prototype={__class__:i.elements.BlockDef};i.elements.Cell=function(a){a.pos&&(this._pos=a.pos,this._rowId=a.rowId?a.rowId:0,this._colId=a.colId?a.colId:0,this._occupied=!1)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Cell"]=i.elements.Cell;i.elements.Cell.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Cell".split(",");i.elements.Cell.prototype={_getColId:function(){return this._colId},_getRowId:function(){return this._rowId},_setOccupied:function(a){return this._occupied=a},_getOccupied:function(){return this._occupied},_getPos:function(){return this._pos},_setBlock:function(a){return this._theBlock=a},_getBlock:function(){return this._theBlock},dispose:function(){this._theBlock=this._pos=null},__class__:i.elements.Cell};j.AnimatedElement=function(a){if(null!=a.movie&&""!=a.movie&&(null==a.library||""==a.library)&&(null==a.asset||""==a.asset))a.asset=a.movie;this._animations=new G;this._queuedAnimations=[];this._lastFrame=-1;this._currentFrame=0;this._currentAnimation="";this._fps=24;this._animationStopped=!0;this._library="";this._loopComplete=!1;this._symbol="";this._workFrame=0;this._currentAnimDef=null;j.Element.call(this,a);a.library&&a.movie&&this.setLibraryAndSymbol(a.library,a.movie)};k["com.workinman.display.AnimatedElement"]=j.AnimatedElement;j.AnimatedElement.__name__=["com","workinman","display","AnimatedElement"];j.AnimatedElement.__super__=j.Element;j.AnimatedElement.prototype=v(j.Element.prototype,{_onAnimationComplete:function(){},_setFrame:function(a){this._movie.set_position(Math.floor(a)/this._frames*this._duration)},_runAnimation:function(a){""!=this._currentAnimation&&!0==this._doLoop()&&!1==this._animationStopped&&(this._currentFrame=!1==this._currentAnimDef._getReverse()?this._currentFrame+this._fps*a:this._currentFrame-
this._fps*a,!1==this._currentAnimDef._getReverse()?Math.floor(this._currentFrame)>this._currentAnimDef._getEnd()&&(this._currentFrame=this._currentAnimDef._getStart()+(this._currentFrame-Math.floor(this._currentFrame)),this._loopComplete=!0):Math.ceil(this._currentFrame)<this._currentAnimDef._getStart()&&(this._currentFrame=this._currentAnimDef._getEnd()+(this._currentFrame-Math.ceil(this._currentFrame)),this._loopComplete=!0),!0==this._loopComplete&&(this._loopComplete=!1,this._currentLoop--,!1==this._doLoop()&&(this._animationStopped=!0,this._currentFrame=!1==this._currentAnimDef._getReverse()?this._currentAnimDef._getEnd():this._currentAnimDef._getStart(),0<this._queuedAnimations.length?(this._doAnimate(this._queuedAnimations[0]._getName(),this._queuedAnimations[0]._getLoops(),this._queuedAnimations[0]._getForce()),this._queuedAnimations.splice(0,1)):this._onAnimationComplete())),this._workFrame=!1==this._currentAnimDef._getReverse()?Math.floor(this._currentFrame):Math.ceil(this._currentFrame),null!=this._movie&&this._workFrame!=this._lastFrame&&(this._setFrame(this._workFrame),this._lastFrame=this._workFrame))},_doLoop:function(){return 0<this._currentLoop||this._flagLoop},update:function(a){j.Element.prototype.update.call(this,a);this._runAnimation(a)},clearQueue:function(){for(;0<this._queuedAnimations.length;)this._queuedAnimations.splice(0,1)},stopAnimation:function(){this._animationStopped=!0},setLoop:function(a){this._currentLoop=a;this._flagLoop=0==a;return this},_doAnimate:function(a,b,e){null==e&&(e=!1);null==b&&(b=0);this._currentAnimation==a&&!1==e||(null!=this._animations&&this._animations.exists(a)?(this._currentAnimDef=null,this._currentAnimDef=this._animations.get(a),this._currentFrame=this._currentAnimDef._getStart(),this._currentAnimation=a,this.setLoop(b),this._animationStopped=!1,this._setFrame(this._currentFrame)):f.WorkinCloud.instance.log("Animation not found: "+a))},animate:function(a,b,e){null==e&&(e=!1);null==b&&(b=0);this.clearQueue();this._doAnimate(a,b,e);return this},addAnimation:function(a,b,e){this._animations.set(a,new j.AnimationDef(a,b-1,e-1));return this},setLibraryAndSymbol:function(a,b){this._library=a;this._symbol=b;this._texture.dispose();var e=f.WorkinCloud.instance._getAssets().getLibrary(this._library)._symbols.get(this._symbol);this._duration=e.duration;this._frames=e.frames;this._movie=e.createSprite();this._movie.set_paused(!0);this._texture=this._movie;this._textureEntity.add(this._texture);return this},_setAnimationFrameRelative:function(a){this._currentFrame=this._currentAnimDef._getStart()+a;return this._getAnimationFrameRelative()},_getAnimationFrameRelative:function(){return this._currentFrame-this._currentAnimDef._getStart()|0},_setAnimationFrame:function(a){this._currentFrame=a;this._setFrame(this._currentFrame);this.stopAnimation();return this._currentFrame|0},_getAnimationFrame:function(){return this._currentFrame|0},_setAnimationRatio:function(a){a=Math.floor(a*(this._currentAnimDef._getEnd()-this._currentAnimDef._getStart())+this._currentAnimDef._getStart());a!=this._currentFrame&&this._setAnimationFrame(a);return this._getAnimationRatio()},_getAnimationRatio:function(){return(this._currentFrame-this._currentAnimDef._getStart())/(this._currentAnimDef._getEnd()-this._currentAnimDef._getEnd())},_setFps:function(a){return this._fps=a},_getFps:function(){return this._fps},_getCurrentAnimation:function(){return this._currentAnimation},renew:function(a){if(null!=a.movie&&""!=a.movie&&(null==a.library||""==a.library)&&(null==a.asset||""==a.asset))a.asset=a.movie;j.Element.prototype.renew.call(this,a);this._library!=a.library&&this._symbol!=a.movie&&a.library&&a.movie&&this.setLibraryAndSymbol(a.library,a.movie);a.fps&&(this._fps=a.fps)},dispose:function(){this._queuedAnimations=this._currentAnimDef=this._animations=this._movie=null;j.Element.prototype.dispose.call(this)},__class__:j.AnimatedElement});i.elements.CrumbleEffect=function(a){a.movie="_crumbling";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_FORTRESS_FG;j.AnimatedElement.call(this,a);this._addAnimation();this.animate("crumble",1)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.CrumbleEffect"]=i.elements.CrumbleEffect;i.elements.CrumbleEffect.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,CrumbleEffect".split(",");i.elements.CrumbleEffect.__super__=j.AnimatedElement;i.elements.CrumbleEffect.prototype=v(j.AnimatedElement.prototype,{_onAnimationComplete:function(){this._setDoDelete(!0)},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_addAnimation:function(){this.addAnimation("crumble",1,26)},__class__:i.elements.CrumbleEffect});i.elements.Fortress=function(a){this.MOVE_LR_TIME=0.1;this.MOVE_TIME=1.5;a.asset="grid";a.layer=c.ConstantsApp.LAYER_FORTRESS;a.origin=new g.WorkinPoint(0.015,0.02);j.Element.call(this,a);this._initGrid();this._listOfBlocks=[];this._moveTimeDelay=this.MOVE_TIME;this._moveLRTimeDelay=-1;this._moveDown=this._moveRight=this._moveLeft=this._hasActivePiece=!1;this._nextPiece=this._currentPiece=null;this._boardIsFull=!1;this._isBuildingMode=!0;f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_BUILDING_MODE,!0);this._startLevel=!0;this._specialSpawnPos=new g.WorkinPoint;this.isBeingAttack=!1;this._cellUpdateDelay=0.1;f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_ENEMY_WAVES_MODE,r(this,this._onEventEnemyWavesMode));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_BUILDING_MODE,r(this,this._onEventBuildingMode));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Fortress"]=i.elements.Fortress;i.elements.Fortress.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Fortress".split(",");i.elements.Fortress.__super__=j.Element;i.elements.Fortress.prototype=v(j.Element.prototype,{_getCurrentPiece:function(){return this._currentPiece},_checkForStoneCube:function(){for(var a=0;a<c.ConstantsApp.GRID_ROW-1;){for(var b=0;b<c.ConstantsApp.GRID_COL-1;){if(this._grid[a][b]._getOccupied()&&3==this._grid[a][b]._getBlock()._getBlockType()&&!1==this._grid[a][b]._getBlock()._getHasSpawnSpecial()){if(this._grid[a][b+1]._getOccupied()&&3==this._grid[a][b+1]._getBlock()._getBlockType()&&!1==this._grid[a][b+1]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b]._getOccupied()&&3==this._grid[a+1][b]._getBlock()._getBlockType()&&!1==this._grid[a+1][b]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b+1]._getOccupied()&&3==this._grid[a+1][b+1]._getBlock()._getBlockType()&&!1==this._grid[a+
1][b+1]._getBlock()._getHasSpawnSpecial())return this._grid[a][b]._getBlock().hasSpawnedSpecial(),this._grid[a][b+1]._getBlock().hasSpawnedSpecial(),this._grid[a+1][b]._getBlock().hasSpawnedSpecial(),this._grid[a+1][b+1]._getBlock().hasSpawnedSpecial(),this._specialSpawnPos=this._grid[a+1][b+1]._getPos(),3}else if(this._grid[a][b]._getOccupied()&&2==this._grid[a][b]._getBlock()._getBlockType()&&!1==this._grid[a][b]._getBlock()._getHasSpawnSpecial()){if(this._grid[a][b+1]._getOccupied()&&2==this._grid[a][b+
1]._getBlock()._getBlockType()&&!1==this._grid[a][b+1]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b]._getOccupied()&&2==this._grid[a+1][b]._getBlock()._getBlockType()&&!1==this._grid[a+1][b]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b+1]._getOccupied()&&2==this._grid[a+1][b+1]._getBlock()._getBlockType()&&!1==this._grid[a+1][b+1]._getBlock()._getHasSpawnSpecial())return this._grid[a][b]._getBlock().hasSpawnedSpecial(),this._grid[a][b+1]._getBlock().hasSpawnedSpecial(),this._grid[a+
1][b]._getBlock().hasSpawnedSpecial(),this._grid[a+1][b+1]._getBlock().hasSpawnedSpecial(),this._specialSpawnPos=this._grid[a+1][b+1]._getPos(),2}else if(this._grid[a][b]._getOccupied()&&1==this._grid[a][b]._getBlock()._getBlockType()&&!1==this._grid[a][b]._getBlock()._getHasSpawnSpecial()&&this._grid[a][b+1]._getOccupied()&&1==this._grid[a][b+1]._getBlock()._getBlockType()&&!1==this._grid[a][b+1]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b]._getOccupied()&&1==this._grid[a+1][b]._getBlock()._getBlockType()&&!1==this._grid[a+1][b]._getBlock()._getHasSpawnSpecial()&&this._grid[a+1][b+1]._getOccupied()&&1==this._grid[a+1][b+1]._getBlock()._getBlockType()&&!1==this._grid[a+1][b+1]._getBlock()._getHasSpawnSpecial())return this._grid[a][b]._getBlock().hasSpawnedSpecial(),this._grid[a][b+1]._getBlock().hasSpawnedSpecial(),this._grid[a+1][b]._getBlock().hasSpawnedSpecial(),this._grid[a+1][b+1]._getBlock().hasSpawnedSpecial(),this._specialSpawnPos=this._grid[a+1][b+1]._getPos(),1;b++}
a++}
return 0},doDeleteAll:function(){for(var a=0;a<c.ConstantsApp.GRID_ROW;){for(var b=0;b<c.ConstantsApp.GRID_COL;)this._grid[a][b]._getOccupied()&&(this._grid[a][b]._getBlock().doDestroy(),this._grid[a][b]._setBlock(null),this._grid[a][b]._setOccupied(!1)),b++;a++}},dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_ENEMY_WAVES_MODE,r(this,this._onEventEnemyWavesMode));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_BUILDING_MODE,r(this,this._onEventBuildingMode));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));for(var a=this._listOfBlocks.length;0<a--;)this._listOfBlocks.pop();this._listOfBlocks=null;for(a=this._grid.length;0<a--;){for(var b=this._grid[a].length;0<b--;)this._grid[a][b].dispose(),this._grid[a].pop();this._grid.pop()}
this._specialSpawnPos=this._nextPiece=this._currentPiece=this._grid=null;j.Element.prototype.dispose.call(this)},_onEventKillAll:function(){this.isBeingAttack=!1;this._cellUpdateDelay=0.1;this._startLevel=!0;this.doDeleteAll()},_onEventBuildingMode:function(){this._isBuildingMode=!0;f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_BUILDING_MODE,!0)},_onEventEnemyWavesMode:function(){this._isBuildingMode=!1;f.WorkinCloud.instance.setBool(c.ConstantsApp.BOOL_BUILDING_MODE,!1);this._startLevel=!1},_checkNumberOfRowsLeft:function(a){for(var b=0;b<c.ConstantsApp.GRID_ROW-a;){if(!1==this._isRowEmpty(b))return!1;b++}
return!0},_isRowEmpty:function(a){for(var b=0;b<c.ConstantsApp.GRID_COL;){if(this._grid[a][b]._getOccupied())return!1;b++}
return!0},_updateCellV2:function(){for(var a=c.ConstantsApp.GRID_ROW;0<a--;)
if(a!=c.ConstantsApp.GRID_ROW-1)
if(this._isRowEmpty(a+1))
for(var b=0;b<c.ConstantsApp.GRID_COL;)this._grid[a][b]._getOccupied()&&(this._grid[a][b]._getBlock().moveDown(),this._grid[a][b]._setOccupied(!1),this._grid[a+1][b]._setOccupied(!0),this._grid[a+1][b]._setBlock(this._grid[a][b]._getBlock()),this._grid[a][b]._setBlock(null)),b++;else
for(b=0;b<c.ConstantsApp.GRID_COL;){if(this._grid[a][b]._getOccupied()&&(1==this._grid[a][b]._getBlock()._getBlockType()||3==this._grid[a][b]._getBlock()._getBlockType())&&!1==this._grid[a+1][b]._getOccupied())this._grid[a][b]._getBlock().moveDown(),this._grid[a][b]._setOccupied(!1),this._grid[a+1][b]._setOccupied(!0),this._grid[a+1][b]._setBlock(this._grid[a][b]._getBlock()),this._grid[a][b]._setBlock(null);b++}},addToGrid:function(){for(var a=c.ConstantsApp.getPiecesDef()[this._currentPiece._getPieceType()][this._currentPiece._getPieceDirection()],b=0;b<a.length;){var e=a[b];this._grid[this._currentPiece._getCurrentRowId()+e.row][this._currentPiece._getCurrentColId()+e.col]._setOccupied(!0);for(var u=0;u<this._currentPiece._getAllBlocks().length;)this._currentPiece._getAllBlocks()[u]._getCurrentRowId()==this._currentPiece._getCurrentRowId()+e.row&&this._currentPiece._getAllBlocks()[u]._getCurrentColId()==this._currentPiece._getCurrentColId()+e.col&&this._grid[this._currentPiece._getCurrentRowId()+e.row][this._currentPiece._getCurrentColId()+
e.col]._setBlock(this._currentPiece._getAllBlocks()[u]),u++;b++}
f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_SCORE,f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_SCORE)+this._currentPiece._getScore());f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_STOP_DRAGGING));this._hasActivePiece=!1;this._currentPiece=this._nextPiece;this.isFigureValid()&&this._isBuildingMode?(this._currentPiece.activate(),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE))):(this._currentPiece=null,this._boardIsFull=!0,this._isBuildingMode&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_INSTANCE_UPDATE,{type:"decrease"})));f.WorkinCloud.instance._getSound().playSound("thub01")},isSquareValid:function(a,b){return 0<=a&&a<c.ConstantsApp.GRID_ROW&&0<=b&&b<c.ConstantsApp.GRID_COL&&!1==this._grid[a][b]._getOccupied()},isFigureValid:function(){for(var a=c.ConstantsApp.getPiecesDef()[this._currentPiece._getPieceType()][this._currentPiece._getPieceDirection()],b=0;b<a.length;){var e=a[b];if(!this.isSquareValid(this._currentPiece._getCurrentRowId()+e.row,this._currentPiece._getCurrentColId()+e.col))return!1;b++}
return!0},doRotate:function(){if(null!=this._currentPiece){var a=this._currentPiece,b=a._getPieceDirection();a._setPieceDirection(b+1);b;3<this._currentPiece._getPieceDirection()&&this._currentPiece._setPieceDirection(0);this.isFigureValid()?this._currentPiece.rotate():(a=this._currentPiece,b=a._getPieceDirection(),a._setPieceDirection(b-1),b,0>this._currentPiece._getPieceDirection()&&this._currentPiece._setPieceDirection(3))}},doMoveDown:function(a){this._moveDown=a;!0==this._moveDown&&(this.moveDown(),this._moveLRTimeDelay=this.MOVE_LR_TIME)},doMoveRight:function(a){this._moveRight=a;!0==this._moveRight&&(this.moveRight(),this._moveLRTimeDelay=this.MOVE_LR_TIME)},doMoveLeft:function(a){this._moveLeft=a;!0==this._moveLeft&&(this.moveLeft(),this._moveLRTimeDelay=this.MOVE_LR_TIME)},moveDown:function(){if(null!=this._currentPiece){this._currentPiece.currentRowIdIncrease();var a=this._currentPiece,b=a._getCurrentRowId();a._setCurrentRowId(b+1);b;this.isFigureValid()?this._currentPiece.moveDown():(this._currentPiece.currentRowIdDecrease(),a=this._currentPiece,b=a._getCurrentRowId(),a._setCurrentRowId(b-1),b,this.addToGrid())}},moveRight:function(){if(null!=this._currentPiece){this._currentPiece.currentColIdIncrease();var a=this._currentPiece,b=a._getCurrentColId();a._setCurrentColId(b+1);b;this.isFigureValid()?this._currentPiece.moveRight():(this._currentPiece.currentColIdDecrease(),a=this._currentPiece,b=a._getCurrentColId(),a._setCurrentColId(b-1),b)}},moveLeft:function(){if(null!=this._currentPiece){this._currentPiece.currentColIdDecrease();var a=this._currentPiece,b=a._getCurrentColId();a._setCurrentColId(b-1);b;this.isFigureValid()?this._currentPiece.moveLeft():(this._currentPiece.currentColIdIncrease(),a=this._currentPiece,b=a._getCurrentColId(),a._setCurrentColId(b+1),b)}},addToFortress:function(a){null==this._currentPiece?(this._hasActivePiece=!0,this._currentPiece=a,this._currentPiece.activate()):(this._hasActivePiece=!0,this._nextPiece=a)},getGrid:function(){return this._grid},getInitCell:function(){return this._grid[0][5]},_initGrid:function(){this._grid=[];for(var a=0;a<c.ConstantsApp.GRID_ROW;){for(var b=[],e=0;e<c.ConstantsApp.GRID_COL;)b.push(new i.elements.Cell({pos:new g.WorkinPoint(e*c.ConstantsApp.BLOCK_SIZE+this._getPos().x,a*c.ConstantsApp.BLOCK_SIZE+this._getPos().y),rowId:a,colId:e})),e++;this._grid.push(b);a++}},update:function(a){j.Element.prototype.update.call(this,a);this.isBeingAttack&&0<this._cellUpdateDelay&&(this._cellUpdateDelay-=a,0>=this._cellUpdateDelay&&(this._cellUpdateDelay=0.1,this._updateCellV2(a)));0<this._moveTimeDelay&&this._hasActivePiece&&(this._moveTimeDelay-=a,0>=this._moveTimeDelay&&(this._moveTimeDelay=this._isBuildingMode?this.MOVE_TIME:0.05,this.moveDown()));0<this._moveLRTimeDelay&&this._hasActivePiece&&(this._moveLRTimeDelay-=a,0>=this._moveLRTimeDelay&&(this._moveLRTimeDelay=this.MOVE_LR_TIME,this._moveLeft?this.moveLeft():this._moveRight&&this.moveRight(),this._moveDown&&this.moveDown()));this._checkNumberOfRowsLeft(4)&&!1==this._startLevel&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SB_STATE));this._checkNumberOfRowsLeft(0)&&!1==this._isBuildingMode&&!1==this._startLevel&&(this._startLevel=!0,f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_HEALTH,f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH)-1),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_INSTANCE_UPDATE,{type:"increase",winState:!1})));!1==this._boardIsFull&&this._isBuildingMode&&(a=this._checkForStoneCube(),1==a?f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_SPECIAL,{pos:this._specialSpawnPos,specialType:1,boardIsFull:this._boardIsFull})):2==a?f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_SPECIAL,{pos:this._specialSpawnPos,specialType:2,boardIsFull:this._boardIsFull})):3==a&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_SPECIAL,{pos:this._specialSpawnPos,specialType:3,boardIsFull:this._boardIsFull})));this._boardIsFull&&this._isBuildingMode&&(this._currentPiece=this._nextPiece,this.isFigureValid()?(this._boardIsFull=!1,this._currentPiece.activate(),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_NEW_PIECE))):this._currentPiece=null)},__class__:i.elements.Fortress});i.elements.HealthUI=function(a){this._STATE_IDLE4=0;this._STATE_IDLE3=1;this._STATE_IDLE2=2;this._STATE_IDLE1=3;a.movie="health_bar";a.library="gameplay_asset";j.AnimatedElement.call(this,a);this._addAnimation();f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));this._state=this._STATE_IDLE1;this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.HealthUI"]=i.elements.HealthUI;i.elements.HealthUI.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,HealthUI".split(",");i.elements.HealthUI.__super__=j.AnimatedElement;i.elements.HealthUI.prototype=v(j.AnimatedElement.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));j.AnimatedElement.prototype.dispose.call(this)},_onEventInstanceUpdate:function(){this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))},_onAnimationComplete:function(){switch(this._state){case this._STATE_IDLE4:f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_GAME_OVER))}},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state!=a&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,{pos:this._getPos()}));this._state=a;switch(this._state){case this._STATE_IDLE1:this.animate("idle1");break;case this._STATE_IDLE2:this.animate("idle2");break;case this._STATE_IDLE3:this.animate("idle3");break;case this._STATE_IDLE4:this.animate("idle4",1)}},_addAnimation:function(){this.addAnimation("idle1",1,2);this.addAnimation("idle2",3,4);this.addAnimation("idle3",5,6);this.addAnimation("idle4",7,15)},__class__:i.elements.HealthUI});i.elements.Particle=function(a){a.type=c.ConstantsApp.TYPE_PARTICLE;this._active=!1;j.AnimatedElement.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Particle"]=i.elements.Particle;i.elements.Particle.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Particle".split(",");i.elements.Particle.__super__=j.AnimatedElement;i.elements.Particle.prototype=v(j.AnimatedElement.prototype,{dispose:function(){j.AnimatedElement.prototype.dispose.call(this)},updatePositionFromVelocity:function(a){0!=this._gravity&&(this._velocity.y+=this._gravity*a);j.AnimatedElement.prototype.updatePositionFromVelocity.call(this,a)},_deactivate:function(){this._active=!1;this.release()},_doLifespanDecrement:function(a){0<this._lifespan&&(this._lifespan-=a,0>=this._lifespan&&this._deactivate())},update:function(a){this._active&&(0!=this._delayTimer?(this._delayTimer-=a,0>this._delayTimer&&(this._delayTimer=0,this._alpha=1,this._getRenderable().alpha=this._alpha)):(0!=this._fadeRate&&0!=this._alpha&&(this._alpha-=this._fadeRate*a,0>=this._alpha&&(this._alpha=0,this._deactivate()),this._getRenderable().alpha=this._alpha),0!=this._scaleRate&&(this._scaleX+=this._scaleRate*a,this._scaleY+=this._scaleRate*a,this._getRenderable().scaleX=this._scaleX,this._getRenderable().scaleY=this._scaleY),0!=this._rotRate&&(this._getRenderable().rotation+=this._rotRate*a),this._doLifespanDecrement(a),this.updatePositionFromVelocity(a)),j.AnimatedElement.prototype.update.call(this,a))},renderPosition:function(a){j.AnimatedElement.prototype.renderPosition.call(this,a)},renew:function(a){this._getPos().to(0,0);this._velocity.to(0,0,0);this._renderOffset.to(0,0);j.AnimatedElement.prototype.renew.call(this,a);a.vx&&(this._velocity.x=a.vx);a.vy&&(this._velocity.y=a.vy);this._active=!0;this._alpha=1;this._delayTimer=0;a.delayTimer&&(this._delayTimer=a.delayTimer,this._alpha=0);this._getRenderable().alpha=this._alpha;this._fadeRate=0;a.fadeRate&&(this._fadeRate=a.fadeRate);this._scaleX=this._getRenderable().scaleX;this._scaleY=this._getRenderable().scaleY;a.scale?this._scaleX=this._scaleY=a.scale:(this._scaleX=this._scaleY=0.75+0.5*Math.random(),this._getRenderable().scaleX=this._scaleX,this._getRenderable().scaleY=this._scaleY);a.scaleX&&(this._scaleX=a.scaleX,this._getRenderable().scaleX=this._scaleX);a.scaleY&&(this._scaleY=this._getRenderable().scaleY,this._getRenderable().scaleY=this._scaleY);this._scaleRate=0;a.scaleRate&&(this._scaleRate=a.scaleRate);this._rotRate=0;a.rotRate&&(this._rotRate=a.rotRate);this._gravity=0;a.gravity&&(this._gravity=a.gravity);this._lifespan=1;0<this._fadeRate?this._lifespan=0:a.lifespan&&(this._lifespan=a.lifespan)},__class__:i.elements.Particle});i.elements.Patrick=function(a){this._STATE_IDLE2=2;this._STATE_IDLE1=1;this._STATE_IDLE0=0;a.x=480;a.y=350;a.movie="pat_bomb";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_BLOCKER;j.AnimatedElement.call(this,a);this._addAnimation();this._setState(this._STATE_IDLE1)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Patrick"]=i.elements.Patrick;i.elements.Patrick.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Patrick".split(",");i.elements.Patrick.__super__=j.AnimatedElement;i.elements.Patrick.prototype=v(j.AnimatedElement.prototype,{_onAnimationComplete:function(){switch(this._state){case this._STATE_IDLE1:f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_KILL_ALL,{spawnParticles:!0}));f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_INSTANCE_UPDATE,{type:"increase"}));this._setState(this._STATE_IDLE2);break;case this._STATE_IDLE2:this._setDoDelete(!0)}},update:function(a){switch(this._state){case this._STATE_IDLE0:f.WorkinCloud.instance._getSound().getSound("whistle")._getPlayback().get_ended()&&this._setState(this._STATE_IDLE1)}
j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IDLE0:this.animate("idle0");f.WorkinCloud.instance._getSound().playSound("whistle",5);break;case this._STATE_IDLE1:this.animate("idle1",1);f.WorkinCloud.instance._getSound().playSound("whistle",5);break;case this._STATE_IDLE2:this.animate("idle2",1),f.WorkinCloud.instance._getSound().playSound("explosion",3)}},_addAnimation:function(){this.addAnimation("idle0",1,2);this.addAnimation("idle1",1,61);this.addAnimation("idle2",62,100)},__class__:i.elements.Patrick});i.elements.Piece=function(a){this._STATE_ACTIVE=1;this._STATE_WAIT=0;var b=1;switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)){case 1:case 2:b=4;break;case 3:case 4:b=3}
this._pieceType=f.WorkinUtils.getRandom(0,c.ConstantsApp.NUMBER_OF_PIECES-b,!0);switch(this._pieceType){case 0:this._pieceDirection=c.ConstantsApp.DIRECTION_SOUTH;this._score=100;break;case 1:case 2:this._pieceDirection=c.ConstantsApp.DIRECTION_SOUTH;this._score=150;break;case 3:case 4:this._pieceDirection=c.ConstantsApp.DIRECTION_SOUTH;this._score=200;break;case 5:case 6:this._pieceDirection=c.ConstantsApp.DIRECTION_SOUTH,this._score=250}
a.fortress&&(this._theFortress=a.fortress,this._initRowOffset=0,this._generatePiece(),this._setState(this._STATE_WAIT))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.Piece"]=i.elements.Piece;i.elements.Piece.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,Piece".split(",");i.elements.Piece.prototype={_getAllBlocks:function(){return this._theBlocks},_getTheBlocks:function(){return this._theBlocks[0]},_setCurrentColId:function(a){return this._currentColId=a},_getCurrentColId:function(){return this._currentColId},_setCurrentRowId:function(a){return this._currentRowId=a},_getCurrentRowId:function(){return this._currentRowId},_setPieceDirection:function(a){return this._pieceDirection=a},_getPieceDirection:function(){return this._pieceDirection},_getScore:function(){return this._score},_getPieceType:function(){return this._pieceType},testHitPoint:function(a){return this._theBlocks[0].testHitPoint(a)},currentColIdIncrease:function(){for(var a=0;a<this._theBlocks.length;){var b=this._theBlocks[a],e=b._getCurrentColId();b._setCurrentColId(e+1);e;a++}},currentColIdDecrease:function(){for(var a=0;a<this._theBlocks.length;){var b=this._theBlocks[a],e=b._getCurrentColId();b._setCurrentColId(e-1);e;a++}},currentRowIdIncrease:function(){for(var a=0;a<this._theBlocks.length;){var b=this._theBlocks[a],e=b._getCurrentRowId();b._setCurrentRowId(e+1);e;a++}},currentRowIdDecrease:function(){for(var a=0;a<this._theBlocks.length;){var b=this._theBlocks[a],e=b._getCurrentRowId();b._setCurrentRowId(e-1);e;a++}},moveDown:function(){for(var a=0;a<this._theBlocks.length;)this._theBlocks[a].moveDown(),a++},moveRight:function(){for(var a=0;a<this._theBlocks.length;)this._theBlocks[a].moveRight(),a++},moveLeft:function(){for(var a=0;a<this._theBlocks.length;)this._theBlocks[a].moveLeft(),a++},rotate:function(){switch(this._pieceType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:for(var a=c.ConstantsApp.getPiecesDef()[this._pieceType][this._pieceDirection],b=0;b<a.length;){var e=a[b];this._theBlocks[b]._getRenderable().rotation+=90;this._theBlocks[b].rotateTexture();this._theBlocks[b]._setCurrentRowId(this._currentRowId+e.row);this._theBlocks[b]._setCurrentColId(this._currentColId+e.col);b++}}
f.WorkinCloud.instance._getSound().playSound("thub03")},activate:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_CHANGE_LAYER,{elements:this._theBlocks}));this._setState(this._STATE_ACTIVE)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_ACTIVE:for(var a=c.ConstantsApp.getPiecesDef()[this._pieceType][this._pieceDirection],b=0;b<a.length;)this._theBlocks[b]._getRenderable().scaleX=1,this._theBlocks[b]._getRenderable().scaleY=1,0==b?this._theBlocks[b].setPos(this._theFortress.getInitCell()._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,this._theFortress.getInitCell()._getPos().y+c.ConstantsApp.BLOCK_SIZE/2+this._initRowOffset*c.ConstantsApp.BLOCK_SIZE):this._theBlocks[b].setPos(this._theBlocks[0]._getPos().x,this._theBlocks[0]._getPos().y),b++}},_generatePiece:function(){var a=c.ConstantsApp.getPiecesDef()[this._pieceType][this._pieceDirection];this._theBlocks=[];for(var b=0;b<a.length;){var e=a[b];if(0==b){var u=0,d=0;switch(this._pieceType){case 0:u=858;d=80;break;case 1:u=858;d=80;break;case 2:u=848;d=90;this._initRowOffset=1;break;case 3:u=852;d=83;this._initRowOffset=1;break;case 4:u=870;d=63;break;case 5:u=856;d=83;this._initRowOffset=1;break;case 6:u=858,d=65}
this._theBlocks.push(new i.elements.Block({x:u,y:d,rowId:this._theFortress.getInitCell()._getRowId()+this._initRowOffset+e.row,colId:this._theFortress.getInitCell()._getColId()+e.col}));this._theBlocks[this._theBlocks.length-1].setOrigin(new g.WorkinPoint(-1*e.col+0.5,-1*e.row+0.5));this._currentRowId=this._theFortress.getInitCell()._getRowId()+this._initRowOffset;this._currentColId=this._theFortress.getInitCell()._getColId()}else this._theBlocks.push(new i.elements.Block({x:this._theBlocks[0]._getPos().x,y:this._theBlocks[0]._getPos().y,rowId:this._currentRowId+
e.row,colId:this._currentColId+e.col})),this._theBlocks[this._theBlocks.length-1].setOrigin(new g.WorkinPoint(-1*e.col+0.5,-1*e.row+0.5));this._theBlocks[b]._getRenderable().scaleX=0.6;this._theBlocks[b]._getRenderable().scaleY=0.6;b++}},__class__:i.elements.Piece};i.elements.ShineEffect=function(a){this._STATE_IDLE1=0;a.movie="fx_shine";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_FORTRESS_FG;j.AnimatedElement.call(this,a);this._addAnimation();this._setState(this._STATE_IDLE1)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.ShineEffect"]=i.elements.ShineEffect;i.elements.ShineEffect.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,ShineEffect".split(",");i.elements.ShineEffect.__super__=j.AnimatedElement;i.elements.ShineEffect.prototype=v(j.AnimatedElement.prototype,{dispose:function(){j.AnimatedElement.prototype.dispose.call(this)},_onAnimationComplete:function(){switch(this._state){case this._STATE_IDLE1:this._setDoDelete(!0)}},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IDLE1:this.animate("idle1",1)}},_addAnimation:function(){this.addAnimation("idle1",1,15)},__class__:i.elements.ShineEffect});i.elements.SpecialTimer=function(a){this._STATE_IDLE2=2;this._STATE_IDLE1=1;a.movie="timer";a.library="gameplay_asset";a.origin=new g.WorkinPoint(0.5,0.5);a.type=c.ConstantsApp.TYPE_SPECIAL;a.layer=c.ConstantsApp.LAYER_FG;j.AnimatedElement.call(this,a);this._specialType=0;a.specialType&&(this._specialType=a.specialType);this._addAnimation();f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_BUILDING_MODE)?this._setState(this._STATE_IDLE1):this._setDoDelete(!0)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.SpecialTimer"]=i.elements.SpecialTimer;i.elements.SpecialTimer.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,SpecialTimer".split(",");i.elements.SpecialTimer.__super__=j.AnimatedElement;i.elements.SpecialTimer.prototype=v(j.AnimatedElement.prototype,{_onAnimationComplete:function(){switch(this._state){case this._STATE_IDLE1:this._setState(this._STATE_IDLE2);break;case this._STATE_IDLE2:this._setDoDelete(!0)}},dispose:function(){j.AnimatedElement.prototype.dispose.call(this)},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IDLE1:this.animate("idle1",1);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_ADD_TIMER,{specialType:this._specialType}));break;case this._STATE_IDLE2:this.animate("idle2",1),f.WorkinCloud.instance._getSound().playSound("addTimer")}},_addAnimation:function(){this.addAnimation("idle1",1,5);this.addAnimation("idle2",6,20)},__class__:i.elements.SpecialTimer});i.elements.SpongeBob=function(a){this._STATE_LOSE=5;this._STATE_WIN=4;this._STATE_LOOK_UP=3;this._STATE_IDLE2=2;this._STATE_IDLE1=1;a.movie="sb";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_PLAYER;j.AnimatedElement.call(this,a);this._addAnimation();this._prevState=this._state=-1;this._setState(this._STATE_IDLE2);f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SB_STATE,r(this,this._onEventSBState));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_SPAWN_PATRICK,r(this,this._onEventSpawnPatrick));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.SpongeBob"]=i.elements.SpongeBob;i.elements.SpongeBob.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,SpongeBob".split(",");i.elements.SpongeBob.__super__=j.AnimatedElement;i.elements.SpongeBob.prototype=v(j.AnimatedElement.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SB_STATE,r(this,this._onEventSBState));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_SPAWN_PATRICK,r(this,this._onEventSpawnPatrick));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_KILL_ALL,r(this,this._onEventKillAll));j.AnimatedElement.prototype.dispose.call(this)},_onAnimationComplete:function(){switch(this._state){case this._STATE_IDLE1:this._setState(this._STATE_IDLE2);break;case this._STATE_LOOK_UP:this._prevState==this._STATE_IDLE1?this._setState(this._STATE_IDLE1):this._setState(this._STATE_IDLE2);break;case this._STATE_WIN:this._setState(this._STATE_IDLE2);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SHOW_LEVEL,{alpha:1}));f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_BUILDING_MODE));break;case this._STATE_LOSE:this._setState(this._STATE_IDLE2),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SHOW_LEVEL,{alpha:1})),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_BUILDING_MODE))}},_onEventKillAll:function(a){!1==a._getData().winState?this._setState(this._STATE_LOSE):this._setState(this._STATE_WIN)},_onEventSpawnPatrick:function(){this._setState(this._STATE_LOOK_UP)},_onEventSBState:function(){this._state!=this._STATE_LOOK_UP&&this._state!=this._STATE_WIN&&this._setState(this._STATE_IDLE1)},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){if(this._state!=a)switch(this._prevState=this._state,this._state=a,this._state){case this._STATE_IDLE1:this.animate("idle1",1,!0);break;case this._STATE_IDLE2:this.animate("idle2",0,!0);break;case this._STATE_LOOK_UP:this.animate("look_up",1);break;case this._STATE_WIN:this.animate("win",5);break;case this._STATE_LOSE:this.animate("idle2",1,!0)}},_addAnimation:function(){this.addAnimation("idle1",1,73);this.addAnimation("idle2",74,114);this.addAnimation("look_up",115,136);this.addAnimation("win",137,151)},__class__:i.elements.SpongeBob});i.elements.TowerLeft=function(a){this._STATE_IDLE3=1;this._STATE_IDLE2=2;this._STATE_IDLE1=3;a.movie="_tower_left";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_FORTRESS_FG;j.AnimatedElement.call(this,a);this._addAnimation();f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));this._state=this._STATE_IDLE1;this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.TowerLeft"]=i.elements.TowerLeft;i.elements.TowerLeft.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,TowerLeft".split(",");i.elements.TowerLeft.__super__=j.AnimatedElement;i.elements.TowerLeft.prototype=v(j.AnimatedElement.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));j.AnimatedElement.prototype.dispose.call(this)},_onEventInstanceUpdate:function(){this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state!=a&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,{pos:this._getPos()}));this._state=a;switch(this._state){case this._STATE_IDLE1:this.animate("idle1");break;case this._STATE_IDLE2:this.animate("idle2");break;case this._STATE_IDLE3:this.animate("idle3")}},_addAnimation:function(){this.addAnimation("idle1",1,20);this.addAnimation("idle2",21,22);this.addAnimation("idle3",23,24)},__class__:i.elements.TowerLeft});i.elements.TowerRight=function(a){this._STATE_IDLE3=1;this._STATE_IDLE2=2;this._STATE_IDLE1=3;a.movie="_tower_right";a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_FORTRESS_FG;j.AnimatedElement.call(this,a);this._addAnimation();f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));this._state=this._STATE_IDLE1;this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.TowerRight"]=i.elements.TowerRight;i.elements.TowerRight.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,TowerRight".split(",");i.elements.TowerRight.__super__=j.AnimatedElement;i.elements.TowerRight.prototype=v(j.AnimatedElement.prototype,{dispose:function(){f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));j.AnimatedElement.prototype.dispose.call(this)},_onEventInstanceUpdate:function(){this._setState(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_HEALTH))},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(a){this._state!=a&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT,{pos:this._getPos()}));this._state=a;switch(this._state){case this._STATE_IDLE1:this.animate("idle1");break;case this._STATE_IDLE2:this.animate("idle2");break;case this._STATE_IDLE3:this.animate("idle3")}},_addAnimation:function(){this.addAnimation("idle1",1,20);this.addAnimation("idle2",21,22);this.addAnimation("idle3",23,24)},__class__:i.elements.TowerRight});i.elements.WaveBar=function(a){this._WAVE_FULL=this._PAUSE_TIMER=1;a.asset="wave_backing";a.layer=c.ConstantsApp.LAYER_HUD;j.Element.call(this,a);this._wavebar=this.addElement(new j.Element({x:41,y:445,asset:"wave_sand_fill",origin:new g.WorkinPoint(0.5,1)}));this._wavebar._getRenderable().scaleY=0;this._wavebar2=this.addElement(new j.Element({x:43,y:445,asset:"wave_green_fill",origin:new g.WorkinPoint(0.6,1)}));this._wavebar2._getRenderable().scaleY=0;this._wavebar2._getRenderable().alpha=0;this.addElement(new j.Element({x:0,y:0,asset:"wave_wood"}));this.addElement(new j.Element({x:0,y:0,asset:"wave_ropes"}));this.addElement(new j.Element({x:0,y:0,asset:"wave_glass"}));this.addElement(new j.TextLocalized(40,25,"wave","",{origin:new g.WorkinPoint(0.5,0.5)}));this._pauseTimer=this._PAUSE_TIMER;this._instance=this._isDecreasing=!1;this._spawnTimer=this._getSpawnTimer();this._waveBarPause=!1;this._winLevel=!0;f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_ADD_TIMER,r(this,this._onEventAddTimer));f.WorkinCloud.instance._getDispatcher().addEventListener(c.ConstantsApp.EVENT_BUILDING_MODE,r(this,this._onEventBuildingMode))};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.WaveBar"]=i.elements.WaveBar;i.elements.WaveBar.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,WaveBar".split(",");i.elements.WaveBar.__super__=j.Element;i.elements.WaveBar.prototype=v(j.Element.prototype,{dispose:function(){this._wavebar=null;f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_INSTANCE_UPDATE,r(this,this._onEventInstanceUpdate));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_ADD_TIMER,r(this,this._onEventAddTimer));f.WorkinCloud.instance._getDispatcher().removeEventListener(c.ConstantsApp.EVENT_BUILDING_MODE,r(this,this._onEventBuildingMode))},_onEventBuildingMode:function(){this._waveBarPause=!1},_onEventAddTimer:function(a){var b=0;switch(a._getData().specialType){case 1:b=10;break;case 2:b=25;break;case 3:b=50}
a=b/100*this._WAVE_FULL;this._wavebar._getRenderable().scaleY-=a;0>this._wavebar._getRenderable().scaleY&&(this._wavebar._getRenderable().scaleY=0)},_onEventInstanceUpdate:function(a){this._inDecreaseType="decrease"!=a._getData().type;this._instance=!0;this._winLevel=!1==a._getData().winState?!1:!0},_getSpeedRate:function(){switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)){case 1:return 50;case 2:return 45;case 3:return 35;case 4:case 5:case 6:case 7:return 20;case 8:case 9:case 10:return 18;case 11:case 12:case 13:case 14:case 15:return 14;case 16:case 17:case 18:case 19:case 20:return 10}
return 8},_getSpawnTimer:function(){switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)){case 1:return 1;case 2:case 3:return 0.8;case 4:case 5:case 6:case 7:return 0.4;case 8:case 9:case 10:return 0.3;case 11:case 12:case 13:case 14:case 15:return 0.2}
return 0.1},update:function(a){j.Element.prototype.update.call(this,a);if(!this._waveBarPause)
if(0<this._pauseTimer)this._pauseTimer-=a,0>=this._pauseTimer&&(this._pauseTimer=-1,f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SHOW_LEVEL,{alpha:0})));else if(0<this._wavebar2._getRenderable().scaleY&&this._isDecreasing){this._wavebar2._getRenderable().scaleY-=this._instance&&this._inDecreaseType?10*a:a/(f.WorkinCloud.instance.getBool(c.ConstantsApp.BOOL_TOUCH_DEVICE)?25:15);if(0<this._spawnTimer&&!1==this._instance){if(this._spawnTimer-=a,0>=this._spawnTimer){this._spawnTimer=this._getSpawnTimer();null!=f.WorkinCloud.instance._getSound().getSound("crowd_charge")&&12<=f.WorkinCloud.instance._getSound().getSound("crowd_charge")._getPlayback().get_position()?f.WorkinCloud.instance._getSound().playSound("crowd_charge",4):null==f.WorkinCloud.instance._getSound().getSound("crowd_charge")&&f.WorkinCloud.instance._getSound().playSound("crowd_charge",4);for(a=2;0<a--;)f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_SPAWN_RANDOM_ENEMY))}}else this._spawnTimer=this._getSpawnTimer();0>=this._wavebar2._getRenderable().scaleY&&(this._wavebar2._getRenderable().scaleY=0,this._isDecreasing=!1,this._pauseTimer=this._PAUSE_TIMER,this._wavebar2._getRenderable().alpha=0,this._wavebar._getRenderable().alpha=1,this._wavebar._getRenderable().scaleY=0,this._instance&&(this._instance=!1),null!=f.WorkinCloud.instance._getSound().getSound("crowd_charge")&&f.WorkinCloud.instance._getSound().getSound("crowd_charge").setFade(f.WMSound.FADE_OUT,10),f.WorkinCloud.instance.setInt(c.ConstantsApp.INT_LEVEL,f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)+1),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_KILL_ALL,{spawnParticles:!1,winState:this._winLevel})),this._waveBarPause=this._winLevel=!0,null)}else this._wavebar._getRenderable().scaleY<this._WAVE_FULL&&!1==this._isDecreasing&&(this._wavebar._getRenderable().scaleY+=this._instance&&!1==this._inDecreaseType?5*a:a/this._getSpeedRate(),this._wavebar._getRenderable().scaleY>=this._WAVE_FULL&&(this._wavebar._getRenderable().scaleY=this._WAVE_FULL,this._isDecreasing=!0,this._pauseTimer=this._PAUSE_TIMER,this._wavebar._getRenderable().alpha=0,this._wavebar2._getRenderable().alpha=1,this._wavebar2._getRenderable().scaleY=this._WAVE_FULL,this._instance&&(this._instance=!1),f.WorkinCloud.instance._getSound().playSound("crowd_charge",4),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(c.ConstantsApp.EVENT_ENEMY_WAVES_MODE)),null))},__class__:i.elements.WaveBar});i.elements.enemies={};i.elements.enemies.EnemyBase=function(a){a.library="gameplay_asset";a.layer=c.ConstantsApp.LAYER_ENEMY;a.type=c.ConstantsApp.TYPE_ENEMY;j.AnimatedElement.call(this,a);this._addAnimation();this._startPos=new g.WorkinPoint;this._setFps(30);this._state=-1;this._active=!1};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyBase"]=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyBase.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyBase".split(",");i.elements.enemies.EnemyBase.__super__=j.AnimatedElement;i.elements.enemies.EnemyBase.prototype=v(j.AnimatedElement.prototype,{dispose:function(){this._startPos=this._cellToAttack=this._theFortress=null;j.AnimatedElement.prototype.dispose.call(this)},_getSpeedRate:function(){switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)){case 1:case 2:return 1;case 3:return 1.5;case 4:case 5:case 6:return 2;case 7:case 8:case 9:case 10:return 2.5;case 11:case 12:case 13:case 14:case 15:return 3;case 16:case 17:case 18:case 19:case 20:return 4}
return 5},_getFrameSpeed:function(){switch(f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)){case 1:case 2:case 3:case 4:case 5:return 30;case 6:case 7:case 8:case 9:case 10:return 35;case 11:case 12:case 13:case 14:case 15:return 40;case 16:case 17:case 18:return 50}
return 60},_dispatchDeactivateEvent:function(){},deactivate:function(){this._cellToAttack=this._theFortress=null;this._getPos().x=9999;this._active=!1;this._state=-1;this._getRenderable().scaleX=1;this._getRenderable().scaleY=1;this.release();this._dispatchDeactivateEvent()},_setStartPos:function(){null!=this._cellToAttack&&(5>=this._cellToAttack._getColId()?this._getPos().x=f.WorkinUtils.getRandom(0,this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,!0):this._getPos().x=f.WorkinUtils.getRandom(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,960,!0),this._getPos().y=700,this._startPos.x=this._getPos().x,this._startPos.y=this._getPos().y)},_setFacingDirection:function(){},_getRandomCellToAttack:function(){var a=5==f.WorkinUtils.getRandom(1,5,!0);3<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)&&(a=!1);if(!1==a){for(var a=[],b=0;b<c.ConstantsApp.GRID_COL;)this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
1][b]._getOccupied()&&a.push(b),b++;0<a.length?(this._randomSelection=f.WorkinUtils.getRandom(0,a.length-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-1][a[this._randomSelection]]):(this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-1][this._randomSelection])}else this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
1][this._randomSelection]},update:function(a){j.AnimatedElement.prototype.update.call(this,a)},_setState:function(){},_addAnimation:function(){},renew:function(a){a.library="gameplay_asset";j.AnimatedElement.prototype.renew.call(this,a);a.fortress&&(this._theFortress=a.fortress);this._cellToAttack=this._theFortress.getGrid()[0][0];this._getRandomCellToAttack();this._setStartPos();this._setFps(this._getFrameSpeed());this._active=!0},__class__:i.elements.enemies.EnemyBase});i.elements.enemies.EnemyPlankton=function(a){this._STATE_FLEE=2;this._STATE_ATTACK=1;this._STATE_MOVE=0;a.movie="_plankton";i.elements.enemies.EnemyBase.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyPlankton"]=i.elements.enemies.EnemyPlankton;i.elements.enemies.EnemyPlankton.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyPlankton".split(",");i.elements.enemies.EnemyPlankton.__super__=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyPlankton.prototype=v(i.elements.enemies.EnemyBase.prototype,{_dispatchDeactivateEvent:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,{enemyClass:o.string(i.elements.enemies.EnemyPlankton)}))},_setFacingDirection:function(){switch(this._state){case this._STATE_MOVE:5>=this._cellToAttack._getColId()&&(this._getRenderable().scaleX*=-1);break;case this._STATE_FLEE:this._getRenderable().scaleX*=-1}},_onAnimationComplete:function(){switch(this._state){case this._STATE_ATTACK:if(null!=this._cellToAttack._getBlock()){for(var a=10;0<a--;){var b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
for(a=3;0<a--;)b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK_CHUNK,blockType:this._cellToAttack._getBlock()._getBlockType()},f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b));a=this._cellToAttack._getBlock();b=a._getBlockLife();a._setBlockLife(b-1);b;this._theFortress.isBeingAttack=!0;f.WorkinCloud.instance._getSound().playSound("blockHit");0==this._cellToAttack._getBlock()._getBlockLife()&&(this._cellToAttack._getBlock()._setDoDelete(!0),this._cellToAttack._setBlock(null),this._cellToAttack._setOccupied(!1))}
this._setState(this._STATE_FLEE)}},_onTweensComplete:function(){switch(this._state){case this._STATE_MOVE:this._setState(this._STATE_ATTACK);break;case this._STATE_FLEE:this.deactivate()}},update:function(a){if(!1!=this._active)switch(i.elements.enemies.EnemyBase.prototype.update.call(this,a),this._state){case this._STATE_MOVE:case this._STATE_FLEE:this.updatePosFromTweener(a)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_MOVE:this._setFacingDirection();this.animate("move");this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_ATTACK:null!=this._cellToAttack._getBlock()?this.animate("attack",1):this._setState(this._STATE_FLEE);break;case this._STATE_FLEE:this._setFacingDirection(),this.animate("flee"),this._tweener.clearTweens(),this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(this._startPos,g.WorkinMath.distBetweenPoints(this._getPos(),this._startPos)/this._speed,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},_addAnimation:function(){this.addAnimation("move",1,20);this.addAnimation("attack",21,32);this.addAnimation("flee",33,51)},renew:function(a){a.movie="_plankton";i.elements.enemies.EnemyBase.prototype.renew.call(this,a);this._isTrying=!1;this._speed=200*this._getSpeedRate();this._setState(this._STATE_MOVE)},__class__:i.elements.enemies.EnemyPlankton});i.elements.enemies.EnemyPlanktonAir=function(a){this._STATE_FLEE=5;this._STATE_FALL_POST=4;this._STATE_ATTACK=3;this._STATE_FALL_PRE=2;this._STATE_IMPACT=1;this._STATE_MOVE=0;a.movie="_airplankton";i.elements.enemies.EnemyBase.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyPlanktonAir"]=i.elements.enemies.EnemyPlanktonAir;i.elements.enemies.EnemyPlanktonAir.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyPlanktonAir".split(",");i.elements.enemies.EnemyPlanktonAir.__super__=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyPlanktonAir.prototype=v(i.elements.enemies.EnemyBase.prototype,{_dispatchDeactivateEvent:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,{enemyClass:o.string(i.elements.enemies.EnemyPlanktonAir)}))},_setStartPos:function(){null!=this._cellToAttack&&(5>=this._cellToAttack._getColId()?this._getPos().x=-200:this._getPos().x=1160,this._getPos().y=f.WorkinUtils.getRandom(this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2-5*c.ConstantsApp.BLOCK_SIZE,!0),this._startPos=new g.WorkinPoint(this._getPos().x,this._getPos().y))},_setFacingDirection:function(){switch(this._state){case this._STATE_MOVE:5<this._cellToAttack._getColId()&&(this._getRenderable().scaleX*=-1);break;case this._STATE_FLEE:this._getRenderable().scaleX*=-1}},_getRandomCellToAttack:function(){for(var a=[],b=0;b<c.ConstantsApp.GRID_ROW;){for(var e=0;e<c.ConstantsApp.GRID_COL;)this._theFortress.getGrid()[b][e]._getOccupied()&&a.push(this._theFortress.getGrid()[b][e]),e++;b++}
0<a.length&&(this._randomSelection=f.WorkinUtils.getRandom(0,a.length-1,!0),this._cellToAttack=this._theFortress.getGrid()[a[this._randomSelection]._getRowId()][a[this._randomSelection]._getColId()])},_onAnimationComplete:function(){switch(this._state){case this._STATE_IMPACT:this._setState(this._STATE_FALL_PRE);break;case this._STATE_ATTACK:if(null!=this._cellToAttack._getBlock()){for(var a=10;0<a--;){var b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
for(a=3;0<a--;)b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK_CHUNK,blockType:this._cellToAttack._getBlock()._getBlockType()},f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b));a=this._cellToAttack._getBlock();b=a._getBlockLife();a._setBlockLife(b-1);b;this._theFortress.isBeingAttack=!0;f.WorkinCloud.instance._getSound().playSound("blockHit");0==this._cellToAttack._getBlock()._getBlockLife()&&(this._cellToAttack._getBlock()._setDoDelete(!0),this._cellToAttack._setBlock(null),this._cellToAttack._setOccupied(!1))}
this._setState(this._STATE_FALL_POST)}},_onTweensComplete:function(){switch(this._state){case this._STATE_MOVE:this._setState(this._STATE_IMPACT);break;case this._STATE_FALL_PRE:this._setState(this._STATE_ATTACK);break;case this._STATE_FALL_POST:this._setState(this._STATE_FLEE);break;case this._STATE_FLEE:this.deactivate()}},update:function(a){if(!1!=this._active)switch(i.elements.enemies.EnemyBase.prototype.update.call(this,a),this._state){case this._STATE_MOVE:0.4<this._getRenderable().scaleX?(this._getRenderable().scaleX-=a,this._getRenderable().scaleY-=a,0.4>=this._getRenderable().scaleX&&(this._getRenderable().scaleX=this._getRenderable().scaleY=0.4)):-0.4>this._getRenderable().scaleX&&(this._getRenderable().scaleX+=a,this._getRenderable().scaleY-=a,-0.4<=this._getRenderable().scaleX&&(this._getRenderable().scaleX=-0.4,this._getRenderable().scaleY=0.4));this.updatePosFromTweener(a);break;case this._STATE_FALL_PRE:case this._STATE_FALL_POST:case this._STATE_FLEE:this.updatePosFromTweener(a)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_MOVE:this._getRenderable().scaleX=1;this._getRenderable().scaleY=1;this._setFacingDirection();this.animate("move");this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._cellToAttack._getPos().x+
c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y-c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y-c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_IMPACT:f.WorkinCloud.instance._getSound().playSound("paper_crumple",2);this.animate("impact",1);break;case this._STATE_FALL_PRE:this.animate("fall");this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._getPos().x,this._getPos().y+2*c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._getPos().x,this._getPos().y+2*c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_ATTACK:null!=this._cellToAttack._getBlock()?this.animate("attack",1):this._setState(this._STATE_FALL_POST);break;case this._STATE_FALL_POST:this.animate("fall");a=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-1][this._cellToAttack._getColId()]._getPos().y;this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._getPos().x,a+2*c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._getPos().x,a+2*c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_FLEE:this._setFacingDirection(),this.animate("flee"),this._tweener.clearTweens(),this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(new g.WorkinPoint(this._startPos.x,this._getPos().y),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._startPos.x,this._getPos().y))/this._speed,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},_addAnimation:function(){this.addAnimation("move",1,16);this.addAnimation("impact",17,20);this.addAnimation("fall",21,24);this.addAnimation("attack",25,36);this.addAnimation("flee",37,55)},renew:function(a){a.movie="_airplankton";i.elements.enemies.EnemyBase.prototype.renew.call(this,a);this._isTrying=!1;this._speed=150*this._getSpeedRate();this._setState(this._STATE_MOVE)},__class__:i.elements.enemies.EnemyPlanktonAir});i.elements.enemies.EnemyPlanktonPogo=function(a){this._STATE_FLEE=3;this._STATE_ATTACK_POST=2;this._STATE_ATTACK_PRE=1;this._STATE_MOVE=0;a.movie="_pogo_plankton";i.elements.enemies.EnemyBase.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyPlanktonPogo"]=i.elements.enemies.EnemyPlanktonPogo;i.elements.enemies.EnemyPlanktonPogo.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyPlanktonPogo".split(",");i.elements.enemies.EnemyPlanktonPogo.__super__=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyPlanktonPogo.prototype=v(i.elements.enemies.EnemyBase.prototype,{_dispatchDeactivateEvent:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,{enemyClass:o.string(i.elements.enemies.EnemyPlanktonPogo)}))},_setFacingDirection:function(){switch(this._state){case this._STATE_MOVE:5>=this._cellToAttack._getColId()&&(this._getRenderable().scaleX*=-1);break;case this._STATE_FLEE:this._getRenderable().scaleX*=-1}},_getRandomCellToAttack:function(){var a=5==f.WorkinUtils.getRandom(1,5,!0);9<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)&&(a=!1);if(!1==a){for(var a=[],b=0;b<c.ConstantsApp.GRID_COL;)this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
3][b]._getOccupied()&&a.push(b),b++;0<a.length?(this._randomSelection=f.WorkinUtils.getRandom(0,a.length-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-3][a[this._randomSelection]]):(this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-3][this._randomSelection])}else this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
3][this._randomSelection]},_onAnimationComplete:function(){switch(this._state){case this._STATE_ATTACK_PRE:if(null!=this._cellToAttack._getBlock()){for(var a=10;0<a--;){var b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
for(a=3;0<a--;)b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK_CHUNK,blockType:this._cellToAttack._getBlock()._getBlockType()},f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b));a=this._cellToAttack._getBlock();b=a._getBlockLife();a._setBlockLife(b-1);b;this._theFortress.isBeingAttack=!0;f.WorkinCloud.instance._getSound().playSound("blockHit");0==this._cellToAttack._getBlock()._getBlockLife()&&(this._cellToAttack._getBlock()._setDoDelete(!0),this._cellToAttack._setBlock(null),this._cellToAttack._setOccupied(!1))}
this._setState(this._STATE_ATTACK_POST);break;case this._STATE_ATTACK_POST:this._setState(this._STATE_FLEE)}},_onTweensComplete:function(){switch(this._state){case this._STATE_MOVE:this._setState(this._STATE_ATTACK_PRE);break;case this._STATE_FLEE:this.deactivate()}},update:function(a){if(!1!=this._active)switch(i.elements.enemies.EnemyBase.prototype.update.call(this,a),this._state){case this._STATE_MOVE:case this._STATE_FLEE:this.updatePosFromTweener(a)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_MOVE:this._setFacingDirection();this.animate("move");a=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-1][this._cellToAttack._getColId()]._getPos().y;this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,a+c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,a+c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_ATTACK_PRE:null!=this._cellToAttack._getBlock()?this.animate("attackpre",1):this._setState(this._STATE_FLEE);break;case this._STATE_ATTACK_POST:this.animate("attackpost",1);break;case this._STATE_FLEE:this._setFacingDirection(),this.animate("flee"),this._tweener.clearTweens(),this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(this._startPos,g.WorkinMath.distBetweenPoints(this._getPos(),this._startPos)/this._speed,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},_addAnimation:function(){this.addAnimation("move",1,14);this.addAnimation("attackpre",15,33);this.addAnimation("attackpost",34,44);this.addAnimation("flee",45,63)},renew:function(a){a.movie="_pogo_plankton";i.elements.enemies.EnemyBase.prototype.renew.call(this,a);this._isTrying=!1;this._speed=80*this._getSpeedRate();this._setState(this._STATE_MOVE)},__class__:i.elements.enemies.EnemyPlanktonPogo});i.elements.enemies.EnemyPlanktonShield=function(a){this._STATE_FLEE=3;this._STATE_ATTACK_POST=2;this._STATE_ATTACK_PRE=1;this._STATE_MOVE=0;a.movie="_bc_plankton";i.elements.enemies.EnemyBase.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyPlanktonShield"]=i.elements.enemies.EnemyPlanktonShield;i.elements.enemies.EnemyPlanktonShield.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyPlanktonShield".split(",");i.elements.enemies.EnemyPlanktonShield.__super__=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyPlanktonShield.prototype=v(i.elements.enemies.EnemyBase.prototype,{_dispatchDeactivateEvent:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,{enemyClass:o.string(i.elements.enemies.EnemyPlanktonShield)}))},_setFacingDirection:function(){switch(this._state){case this._STATE_MOVE:5>=this._cellToAttack._getColId()&&(this._getRenderable().scaleX*=-1);break;case this._STATE_FLEE:this._getRenderable().scaleX*=-1}},_onAnimationComplete:function(){switch(this._state){case this._STATE_ATTACK_PRE:if(null!=this._cellToAttack._getBlock()){for(var a=10;0<a--;){var b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
for(a=3;0<a--;)b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK_CHUNK,blockType:this._cellToAttack._getBlock()._getBlockType()},f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b));a=this._cellToAttack._getBlock();b=a._getBlockLife();a._setBlockLife(b-1);b;this._theFortress.isBeingAttack=!0;f.WorkinCloud.instance._getSound().playSound("clang");f.WorkinCloud.instance._getSound().playSound("blockHit");0==this._cellToAttack._getBlock()._getBlockLife()&&(this._cellToAttack._getBlock()._setDoDelete(!0),this._cellToAttack._setBlock(null),this._cellToAttack._setOccupied(!1))}
this._setState(this._STATE_ATTACK_POST);break;case this._STATE_ATTACK_POST:this._setState(this._STATE_FLEE)}},_onTweensComplete:function(){switch(this._state){case this._STATE_MOVE:this._setState(this._STATE_ATTACK_PRE);break;case this._STATE_FLEE:this.deactivate()}},update:function(a){if(!1!=this._active)switch(i.elements.enemies.EnemyBase.prototype.update.call(this,a),this._state){case this._STATE_MOVE:case this._STATE_FLEE:this.updatePosFromTweener(a)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_MOVE:this._setFacingDirection();this.animate("move");this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._cellToAttack._getPos().x+
c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_ATTACK_PRE:null!=this._cellToAttack._getBlock()?this.animate("attackpre",1):this._setState(this._STATE_FLEE);break;case this._STATE_ATTACK_POST:this.animate("attackpost",1);break;case this._STATE_FLEE:this._setFacingDirection(),this.animate("flee"),this._tweener.clearTweens(),this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(this._startPos,g.WorkinMath.distBetweenPoints(this._getPos(),this._startPos)/this._speed,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},_addAnimation:function(){this.addAnimation("move",1,20);this.addAnimation("attackpre",21,32);this.addAnimation("attackpost",33,37);this.addAnimation("flee",38,56)},renew:function(a){a.movie="_bc_plankton";i.elements.enemies.EnemyBase.prototype.renew.call(this,a);this._isTrying=!1;this._speed=100*this._getSpeedRate();this._setState(this._STATE_MOVE)},__class__:i.elements.enemies.EnemyPlanktonShield});i.elements.enemies.EnemyPlanktonStack=function(a){this._STATE_FLEE=3;this._STATE_ATTACK_POST=2;this._STATE_ATTACK_PRE=1;this._STATE_MOVE=0;a.movie="_stack_planktons";i.elements.enemies.EnemyBase.call(this,a)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.enemies.EnemyPlanktonStack"]=i.elements.enemies.EnemyPlanktonStack;i.elements.enemies.EnemyPlanktonStack.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,enemies,EnemyPlanktonStack".split(",");i.elements.enemies.EnemyPlanktonStack.__super__=i.elements.enemies.EnemyBase;i.elements.enemies.EnemyPlanktonStack.prototype=v(i.elements.enemies.EnemyBase.prototype,{_dispatchDeactivateEvent:function(){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE,{enemyClass:o.string(i.elements.enemies.EnemyPlanktonStack)}))},_setFacingDirection:function(){switch(this._state){case this._STATE_MOVE:5>=this._cellToAttack._getColId()&&(this._getRenderable().scaleX*=-1);break;case this._STATE_FLEE:this._getRenderable().scaleX*=-1}},_getRandomCellToAttack:function(){var a=5==f.WorkinUtils.getRandom(1,5,!0);6<f.WorkinCloud.instance.getInt(c.ConstantsApp.INT_LEVEL)&&(a=!1);if(!1==a){for(var a=[],b=0;b<c.ConstantsApp.GRID_COL;)this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
2][b]._getOccupied()&&a.push(b),b++;0<a.length?(this._randomSelection=f.WorkinUtils.getRandom(0,a.length-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-2][a[this._randomSelection]]):(this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-2][this._randomSelection])}else this._randomSelection=f.WorkinUtils.getRandom(0,c.ConstantsApp.GRID_COL-1,!0),this._cellToAttack=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-
2][this._randomSelection]},_onAnimationComplete:function(){switch(this._state){case this._STATE_ATTACK_PRE:if(null!=this._cellToAttack._getBlock()){for(var a=5;0<a--;){var b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK};f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b))}
for(a=3;0<a--;)b={x:this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,y:this._cellToAttack._getPos().y+c.ConstantsApp.BLOCK_SIZE/2,scale:1,layer:c.ConstantsApp.LAYER_FG,particle:c.ConstantsApp.PARTICLE_BLOCK_CHUNK,blockType:this._cellToAttack._getBlock()._getBlockType()},f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(c.ConstantsApp.EVENT_SPAWN_PARTICLE,b));a=this._cellToAttack._getBlock();b=a._getBlockLife();a._setBlockLife(b-1);b;this._theFortress.isBeingAttack=!0;f.WorkinCloud.instance._getSound().playSound("blockHit");0==this._cellToAttack._getBlock()._getBlockLife()&&(this._cellToAttack._getBlock()._setDoDelete(!0),this._cellToAttack._setBlock(null),this._cellToAttack._setOccupied(!1))}
this._setState(this._STATE_ATTACK_POST);break;case this._STATE_ATTACK_POST:this._setState(this._STATE_FLEE)}},_onTweensComplete:function(){switch(this._state){case this._STATE_MOVE:this._setState(this._STATE_ATTACK_PRE);break;case this._STATE_FLEE:this.deactivate()}},update:function(a){if(!1!=this._active)switch(i.elements.enemies.EnemyBase.prototype.update.call(this,a),this._state){case this._STATE_MOVE:case this._STATE_FLEE:this.updatePosFromTweener(a)}},_setState:function(a){this._state=a;switch(this._state){case this._STATE_MOVE:this._setFacingDirection();this.animate("move");a=this._theFortress.getGrid()[c.ConstantsApp.GRID_ROW-1][this._cellToAttack._getColId()]._getPos().y;this._tweener.clearTweens();this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,a+c.ConstantsApp.BLOCK_SIZE),g.WorkinMath.distBetweenPoints(this._getPos(),new g.WorkinPoint(this._cellToAttack._getPos().x+c.ConstantsApp.BLOCK_SIZE/2,a+c.ConstantsApp.BLOCK_SIZE))/this._speed,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_ATTACK_PRE:null!=this._cellToAttack._getBlock()?this.animate("attackpre",1):this._setState(this._STATE_FLEE);break;case this._STATE_ATTACK_POST:this.animate("attackpost",1);break;case this._STATE_FLEE:this._setFacingDirection(),this.animate("flee"),this._tweener.clearTweens(),this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(this._startPos,g.WorkinMath.distBetweenPoints(this._getPos(),this._startPos)/this._speed,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},_addAnimation:function(){this.addAnimation("move",1,20);this.addAnimation("attackpre",21,29);this.addAnimation("attackpost",30,31);this.addAnimation("flee",32,51)},renew:function(a){a.movie="_stack_planktons";i.elements.enemies.EnemyBase.prototype.renew.call(this,a);this._isTrying=!1;this._speed=150*this._getSpeedRate();this._setState(this._STATE_MOVE)},__class__:i.elements.enemies.EnemyPlanktonStack});i.elements.others={};i.elements.others.PlanktonTutorialElement=function(a){this._STATE_OUT=2;this._STATE_IN=1;this._STATE_IDLE=0;a.x=-60;a.y=160;a.asset="plankton";j.Element.call(this,a);this._setState(this._STATE_IDLE)};k["com.nick.spongeBob.capri_sun_adventure_desert.world.elements.others.PlanktonTutorialElement"]=i.elements.others.PlanktonTutorialElement;i.elements.others.PlanktonTutorialElement.__name__="com,nick,spongeBob,capri_sun_adventure_desert,world,elements,others,PlanktonTutorialElement".split(",");i.elements.others.PlanktonTutorialElement.__super__=j.Element;i.elements.others.PlanktonTutorialElement.prototype=v(j.Element.prototype,{doOut:function(){this._setState(this._STATE_OUT)},doIn:function(){this._setState(this._STATE_IN)},_onTweensComplete:function(){switch(this._state){case this._STATE_OUT:this._setState(this._STATE_IDLE)}},update:function(a){switch(this._state){case this._STATE_IN:case this._STATE_OUT:this.updatePosFromTweener(a)}
j.Element.prototype.update.call(this,a)},_setState:function(a){this._state=a;switch(this._state){case this._STATE_IDLE:this._getPos().x=9999;break;case this._STATE_IN:this._getPos().x=this._getInitPos().x-350;this._tweener.setStartFromPoint(this._getPos());this._tweener.addTween(this._getInitPos(),0.5,g.tween.PennerManager.EASE_LINEAR);this._tweener.start();break;case this._STATE_OUT:this._tweener.setStartFromPoint(this._getPos()),this._tweener.addTween(new g.WorkinPoint(this._getInitPos().x-350,this._getPos().y),0.5,g.tween.PennerManager.EASE_LINEAR),this._tweener.start()}},__class__:i.elements.others.PlanktonTutorialElement});y=void 0;N=void 0;p=void 0;h=void 0;d=void 0;I=void 0;n=void 0;O=void 0;w=void 0;z=void 0;H=void 0;F=void 0;Y=void 0;A=void 0;A=void 0;aa=void 0;A=void 0;A=void 0;n={Disposable:function(){}};k["flambe.util.Disposable"]=n.Disposable;n.Disposable.__name__=["flambe","util","Disposable"];n.Disposable.prototype={__class__:n.Disposable};O=function(){};k["flambe.Component"]=O;O.__name__=["flambe","Component"];O.__interfaces__=[n.Disposable];O.prototype={_internal_init:function(a,b){this.owner=a;this.next=b},get_name:function(){return null},dispose:function(){null!=this.owner&&this.owner.remove(this)},onUpdate:function(){},onRemoved:function(){},onAdded:function(){},__class__:O};$={ComponentUpdater:function(){this._paused=!1}};k["com.workinman.components.ComponentUpdater"]=$.ComponentUpdater;$.ComponentUpdater.__name__=["com","workinman","components","ComponentUpdater"];$.ComponentUpdater.__super__=O;$.ComponentUpdater.prototype=v(O.prototype,{setPaused:function(a){return this._paused=a},getPaused:function(){return this._paused},onUpdate:function(a){this._paused||f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventUpdate(a))},get_name:function(){return "ComponentUpdater_3"},__class__:$.ComponentUpdater});E={ConstantsCloud:function(){}};k["com.workinman.data.ConstantsCloud"]=E.ConstantsCloud;E.ConstantsCloud.__name__=["com","workinman","data","ConstantsCloud"];E.ConstantsCloud.getUniqueId=function(){return o.string(E.ConstantsCloud._uniqueId++)};j.QueuedAnimation=function(){};k["com.workinman.display.QueuedAnimation"]=j.QueuedAnimation;j.QueuedAnimation.__name__=["com","workinman","display","QueuedAnimation"];j.QueuedAnimation.prototype={_getForce:function(){return this._force},_getLoops:function(){return this._loops},_getName:function(){return this._name},__class__:j.QueuedAnimation};j.AnimationDef=function(a,b,e){this._id=a;this._startFrame=b;this._endFrame=e;this._playReverse=!1;b>e&&(this._playReverse=!0,this._startFrame=e,this._endFrame=b)};k["com.workinman.display.AnimationDef"]=j.AnimationDef;j.AnimationDef.__name__=["com","workinman","display","AnimationDef"];j.AnimationDef.prototype={_getId:function(){return this._id},_getReverse:function(){return this._playReverse},_getEnd:function(){return this._endFrame},_getStart:function(){return this._startFrame},__class__:j.AnimationDef};j.ElementManager=function(a,b,e){this._timeline=a;this._layers=new G;this._elements=[];this._camera=new g.WorkinCamera(b,e);this._zSortLayers=new G};k["com.workinman.display.ElementManager"]=j.ElementManager;j.ElementManager.__name__=["com","workinman","display","ElementManager"];j.ElementManager.prototype={renderElements:function(){for(var a=0,b=this._elements;a<b.length;){var e=b[a];++a;e.renderPosition(this._camera)}},updateElements:function(a){for(this._i=this._elements.length;0<this._i;)this._i--,this._elements[this._i].update(a),this._elements[this._i]._getDoDelete()&&this.removeElementAtIndex(this._i)},changeElementLayer:function(a,b){this._layers.get(a._getLayer()).removeChild(a._getEntity());a._setLayer(b);this._layers.get(a._getLayer()).addChild(a._getEntity())},removeElementAtIndex:function(a){this._elements[a]._getEntity().parent.removeChild(this._elements[a]._getEntity());this._elements[a]._setDoDelete(!0);this._elements[a].dispose();this._elements.splice(a,1)},addElement:function(a){if(!1==this._layers.exists(a._getLayer()))return f.WorkinCloud.instance.log("[ElementManager](addElement) Trying to add element to non-existant layer '"+a._getLayer()+"'!"),a;for(this._i=0;this._i<this._elements.length;){if(this._elements[this._i]._getUniqueId()==a._getUniqueId())return this._layers.get(a._getLayer()).addChild(a._getEntity()),a;this._i++}
this._elements.push(a);this._layers.get(a._getLayer()).addChild(a._getEntity());this._zSortLayers.exists(a._getLayer())&&this._zSortLayers.get(a._getLayer()).push(a);return a},addLayer:function(a,b){null==b&&(b=!1);if(this._layers.exists(a))this._timeline.removeChild(this._layers.get(a)),this._timeline.addChild(this._layers.get(a));else{var e=new N;this._timeline.addChild(e);this._layers.set(a,e);b&&this._zSortLayers.set(a,[])}},_getElements:function(){return this._elements},_getCamera:function(){return this._camera},dispose:function(){for(;0<this._elements.length;)this.removeElementAtIndex(this._elements.length-1);this._elements=null;this._camera.dispose();this._camera=null;for(var a=this._layers.iterator();a.hasNext();)a.next().dispose();this._timeline=this._layers=null},__class__:j.ElementManager};j.PoolManager=function(){this._pools=new G;this._flagAllPoolsFull=!1;this._numPools=0};k["com.workinman.display.PoolManager"]=j.PoolManager;j.PoolManager.__name__=["com","workinman","display","PoolManager"];j.PoolManager.prototype={createElement:function(a,b){if(!1==this._pools.exists(a))return f.WorkinCloud.instance.log("[PoolManager](createElement) Can't create element from pool '"+a+"' it doesn't exist!"),null;var e=this._pools.get(a).getElement();e.renew(b);return e},addPool:function(a,b,e,c){null==c&&(c=!1);null==e&&(e=8);this._pools.exists(a)?this._pools.get(a).changeCount(e,c):(this._flagAllPoolsFull=!1,b=new j.PoolData(b,e,c,this._numPools),this._pools.set(a,b),this._numPools++)},update:function(a){if(!this._flagAllPoolsFull){this._flagAllPoolsFull=!0;for(var b=this._pools.iterator();b.hasNext();){var e=b.next();e._getIsPoolFull()||(this._flagAllPoolsFull=!1,e.update(a))}
this._flagAllPoolsFull&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(j.PoolManager.ALL_POOLS_FULL))}},dispose:function(){for(var a=this._pools.iterator();a.hasNext();)a.next().dispose();this._pools=null},__class__:j.PoolManager};j.PoolData=function(a,b,e,c){null==c&&(c=0);null==e&&(e=!1);this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS=0.8;this._MAX_ELEMENTS_TO_CREATE_AT_ONCE=8;this._elements=[];this._class=a;this._poolProgress=0;this._flagPoolFull=!0;this._timerUpdateCreateElements=0;this._timerOffset=c;this.changeCount(b,e)};k["com.workinman.display.PoolData"]=j.PoolData;j.PoolData.__name__=["com","workinman","display","PoolData"];j.PoolData.prototype={dispose:function(){for(var a=0;a<this._elements.length;)this._elements[a]._setIsPooled(!1),this._elements[a].dispose(),a++;this._class=this._elements=null},_addPoolElements:function(a){null==a&&(a=!0);for(var b=0;this._poolProgress<this._poolElementsToAdd&&(!a||b<this._MAX_ELEMENTS_TO_CREATE_AT_ONCE);)b++,this._poolProgress++,this._elements.push(M.createInstance(this._class,[{pooled:!0}]));this._poolProgress<this._poolElementsToAdd?this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+0.2*this._timerOffset:(this._timerUpdateCreateElements=0,this._flagPoolFull=!0)},update:function(a){this._flagPoolFull||(this._timerUpdateCreateElements-=a,0>=this._timerUpdateCreateElements&&this._addPoolElements())},changeCount:function(a,b){null==b&&(b=!0);a!=this._elements.length&&(this._poolElementsToAdd=this._poolProgress=0,this._timerUpdateCreateElements=this._AVERAGE_DELAY_BETWEEN_CREATE_ELEMENTS+0.2*this._timerOffset,this._elements.length<a?(this._flagPoolFull=!1,this._poolElementsToAdd=a-this._elements.length,b&&this._addPoolElements(!1)):this._flagPoolFull=!0)},getElement:function(a){null==a&&(a=!1);for(var b=0;b<this._elements.length;){if(!this._elements[b]._getIsActive())return a=this._elements[b],this._elements.splice(b,1),this._elements.push(a),a;b++}
if(a)return this.changeCount(this._elements.length+1,!0),this._elements[this._elements.length-1];a=this._elements[0];this._elements.splice(0,1);a.release();this._elements.push(a);return a},_getIsPoolFull:function(){return this._flagPoolFull},__class__:j.PoolData};j.Renderable=function(a,b){null==b&&(b=1);null==a&&(a=1);this.rotation=this.y=this.x=0;this.scaleY=this.scaleX=1;this.width=a;this.height=b;this.alpha=1;this.visible=!0};k["com.workinman.display.Renderable"]=j.Renderable;j.Renderable.__name__=["com","workinman","display","Renderable"];j.Renderable.prototype={__class__:j.Renderable};j.TextBase=function(a,b,e,c,d){null==c&&(c="");null==d&&(d={});d.x=a;d.y=b;j.Element.call(this,d);""==c&&(c=E.ConstantsCloud.FONT_DEFAULT);this._textString=e;this._fontName=c;this._spacing=d.spacing?d.spacing:0;this._width=d.width?d.width:Math.POSITIVE_INFINITY;this._flagCenter=d.center?d.center:!1;this._textDisplay=[];this._textDisplay.push(new p.TextSprite(f.WorkinCloud.instance._getAssets().getFont(this._fontName),""));this.swapTexture(this._textDisplay[0]);this._textDisplay[0].set_pointerEnabled(!1);this.renderPositionWithoutCamera()};k["com.workinman.display.TextBase"]=j.TextBase;j.TextBase.__name__=["com","workinman","display","TextBase"];j.TextBase.__super__=j.Element;j.TextBase.prototype=v(j.Element.prototype,{_cleanUp:function(){for(;1<this._textDisplay.length;)this._textureEntity.removeChild(this._textDisplay.pop()._getEntity())},_renderTextToDisplay:function(){this._textDisplay[0].set_text(this._textString)},_renderFontToDisplay:function(){for(var a=0,b=this._textDisplay;a<b.length;){var e=b[a];++a;e.set_font(f.WorkinCloud.instance._getAssets().getFont(this._fontName))}},_setText:function(a){this._textString=a;this._renderTextToDisplay();return this._textString},_getText:function(){return this._textString},_setFont:function(a){if(""==a)return "";this._fontName=a;this._renderFontToDisplay();return this._fontName},_getFont:function(){return this._fontName},_updateTextDisplay:function(a,b){null==b&&(b=1);this._cleanUp();if(""==a)this._textDisplay[0].set_text(a);else{for(var a=Q.replace(a,"<br>","\\r\\n"),e=[],c=this._textDisplay[0]._font.getGlyphs(a),d=0,g=0,h=0;g<c.length;){var i=c[g];g++;if(g==c.length)d+=i.width*b;else if(d+=i.xAdvance*b+i.getKerning(c[g].charCode)*b,g<c.length-1&&(92==c[g-1].charCode||47==c[g-1].charCode)&&114==c[g].charCode&&(92==c[g+1].charCode||47==c[g+1].charCode)&&110==c[g+2].charCode)d=g-1,e.push(a.substring(h,d)),h=d+4,d=0;d>=this._width&&(i=!0,d=a.lastIndexOf(" ",g),-1==d?(i=!1,d=g-1):d++,e.push(a.substring(h,d)+(i?"":"-")),h=d,d=0);g==c.length&&e.push(a.substring(h,g))}
this._textDisplay[0].set_text(e.shift());this._texture.x.set__(-(this._renderOrigin.x*this._textDisplay[0].getNaturalWidth()));this._texture.y.set__(-(this._renderOrigin.y*this._textDisplay[0].getNaturalHeight()));for(c=0;c<e.length;)g=e[c],++c,this._textDisplay.push(new p.TextSprite(f.WorkinCloud.instance._getAssets().getFont(this._fontName),g)),this.addTextDisplay(this._textDisplay[this._textDisplay.length-1])}},addTextDisplay:function(a){this._flagCenter&&a.x.set__(this._renderOrigin.x*(this._texture.getNaturalWidth()-a.getNaturalWidth()));a.y.set__(this._render.height+this._textDisplay[0].getNaturalHeight()+this._spacing);this._render.height+=a.getNaturalHeight()+this._spacing;this._render.width=Math.max(this._render.width,a.getNaturalWidth());this._textureEntity.addChild((new N).add(a))},_getTextDisplay:function(){return this._textDisplay},__class__:j.TextBase});j.TextLocalized=function(a,b,e,c,d){null==c&&(c="");j.TextBase.call(this,a,b,e,c,d);this._renderTextToDisplay()};k["com.workinman.display.TextLocalized"]=j.TextLocalized;j.TextLocalized.__name__=["com","workinman","display","TextLocalized"];j.TextLocalized.__super__=j.TextBase;j.TextLocalized.prototype=v(j.TextBase.prototype,{setOrigin:function(a){this._renderOrigin.toPoint(a);this._texture.x.set__(-(this._renderOrigin.x*this._render.width));this._texture.y.set__(-(this._renderOrigin.y*this._render.height))},_renderTextToDisplay:function(){var a=f.WorkinCloud.instance._getLocalize().getData(this._textString);this._renderOffset.x=a._getOffsetX();this._renderOffset.y=a._getOffsetY();this._render.scaleX=a._getScale();this._render.scaleY=a._getScale();a._getFontName()!=this._fontName&&this._setFont(a._getFontName());this._updateTextDisplay(f.WorkinCloud.instance._getLocalize().getData(this._textString)._getString());1==this._textDisplay.length&&(this._render.width=this._textDisplay[0].getNaturalWidth(),this._render.height=this._textDisplay[0].getNaturalHeight());this._flagCenter||this.setOrigin(this._renderOrigin);this.renderPositionWithoutCamera()},__class__:j.TextLocalized});m.WMEvent=function(a){this._eventId=a};k["com.workinman.events.WMEvent"]=m.WMEvent;m.WMEvent.__name__=["com","workinman","events","WMEvent"];m.WMEvent.prototype={getEventId:function(){return this._eventId},__class__:m.WMEvent};m.WMEventData=function(a,b){m.WMEvent.call(this,a);this._data=b};k["com.workinman.events.WMEventData"]=m.WMEventData;m.WMEventData.__name__=["com","workinman","events","WMEventData"];m.WMEventData.__super__=m.WMEvent;m.WMEventData.prototype=v(m.WMEvent.prototype,{_getData:function(){return this._data},__class__:m.WMEventData});m._WMEventDispatcher={};m._WMEventDispatcher.WMEventTracker=function(){this._signalConnection=[];this._signal=new n.Signal1};k["com.workinman.events._WMEventDispatcher.WMEventTracker"]=m._WMEventDispatcher.WMEventTracker;m._WMEventDispatcher.WMEventTracker.__name__=["com","workinman","events","_WMEventDispatcher","WMEventTracker"];m._WMEventDispatcher.WMEventTracker.prototype={dispose:function(){this._signal=null;for(var a=0,b=this._signalConnection;a<b.length;){var e=b[a];++a;e.dispose()}
this._signalConnection=null},isEmtpy:function(){return null==this._signal._head},dispatchEvent:function(a){this._signal.emit1(a)},removeEventListener:function(a){for(var b=this._signalConnection.length;0<b;)b--,L.compareMethods(this._signalConnection[b]._getListener(),a)&&(this._signalConnection[b].dispose(),this._signalConnection.splice(b,1))},addEventListener:function(a){this._signalConnection.push(new m._WMEventDispatcher.SignalTracker(a,this._signal.connect(a)))},__class__:m._WMEventDispatcher.WMEventTracker};m._WMEventDispatcher.SignalTracker=function(a,b){this._function=a;this._connection=b};k["com.workinman.events._WMEventDispatcher.SignalTracker"]=m._WMEventDispatcher.SignalTracker;m._WMEventDispatcher.SignalTracker.__name__=["com","workinman","events","_WMEventDispatcher","SignalTracker"];m._WMEventDispatcher.SignalTracker.prototype={_getListener:function(){return this._function},dispose:function(){this._function=null;this._connection.dispose();this._connection=null},__class__:m._WMEventDispatcher.SignalTracker};m.WMEventFlow=function(a,b){null==b&&(b=!1);this.flowId=a;this.targetScreen=b;m.WMEvent.call(this,m.WMEventFlow.EVENT_FLOW)};k["com.workinman.events.WMEventFlow"]=m.WMEventFlow;m.WMEventFlow.__name__=["com","workinman","events","WMEventFlow"];m.WMEventFlow.__super__=m.WMEvent;m.WMEventFlow.prototype=v(m.WMEvent.prototype,{__class__:m.WMEventFlow});m.WMEventInput=function(a,b,e,c){m.WMEvent.call(this,m.WMEventInput.EVENT_INPUT);this.phase=a;this.input=b;this.x=e;this.y=c};k["com.workinman.events.WMEventInput"]=m.WMEventInput;m.WMEventInput.__name__=["com","workinman","events","WMEventInput"];m.WMEventInput.__super__=m.WMEvent;m.WMEventInput.prototype=v(m.WMEvent.prototype,{__class__:m.WMEventInput});m.WMEventInterfaceChange=function(a,b,e){null==b&&(b="");this.flowId=a;this.screenId=b;null==e&&(e=new G);this.customData=e;m.WMEvent.call(this,m.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT)};k["com.workinman.events.WMEventInterfaceChange"]=m.WMEventInterfaceChange;m.WMEventInterfaceChange.__name__=["com","workinman","events","WMEventInterfaceChange"];m.WMEventInterfaceChange.__super__=m.WMEvent;m.WMEventInterfaceChange.prototype=v(m.WMEvent.prototype,{__class__:m.WMEventInterfaceChange});m.WMEventScreenOut=function(a,b){this.flowId=a;this.screenId=b;m.WMEvent.call(this,m.WMEventScreenOut.EVENT_SCREEN_OUTPUT)};k["com.workinman.events.WMEventScreenOut"]=m.WMEventScreenOut;m.WMEventScreenOut.__name__=["com","workinman","events","WMEventScreenOut"];m.WMEventScreenOut.__super__=m.WMEvent;m.WMEventScreenOut.prototype=v(m.WMEvent.prototype,{__class__:m.WMEventScreenOut});m.WMEventUpdate=function(a){m.WMEvent.call(this,m.WMEventUpdate.EVENT_UPDATE);this._dt=a};k["com.workinman.events.WMEventUpdate"]=m.WMEventUpdate;m.WMEventUpdate.__name__=["com","workinman","events","WMEventUpdate"];m.WMEventUpdate.__super__=m.WMEvent;m.WMEventUpdate.prototype=v(m.WMEvent.prototype,{getDt:function(){return this._dt},__class__:m.WMEventUpdate});g={};g.WorkinCamera=function(a,b){this._screenCenterX=a;this._screenCenterY=b;this._pos=new g.WorkinPoint(a,b)};k["com.workinman.math.WorkinCamera"]=g.WorkinCamera;g.WorkinCamera.__name__=["com","workinman","math","WorkinCamera"];g.WorkinCamera.prototype={_getScreenCenterY:function(){return this._screenCenterY},_getScreenCenterX:function(){return this._screenCenterX},_getPos:function(){return this._pos},dispose:function(){this._pos=null},__class__:g.WorkinCamera};g.WorkinLine=function(a,b){this._p0=a.copy();this._p1=b.copy();this._calcProperties()};k["com.workinman.math.WorkinLine"]=g.WorkinLine;g.WorkinLine.__name__=["com","workinman","math","WorkinLine"];g.WorkinLine.prototype={_calcProperties:function(){this._length=Math.round(1E3*Math.sqrt((this._p0.x-this._p1.x)*(this._p0.x-this._p1.x)+(this._p0.y-
this._p1.y)*(this._p0.y-this._p1.y)))/1E3;this._vector=new g.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._slope=this._vector.y/this._vector.x;0==this._getVector().x&&(this._slope=1E5);this._yIntercept=this._getP0().y-this._slope*this._getP0().x;this._parametricDenom=new g.WorkinPoint(this._getP1().x-this._getP0().x,this._getP1().y-this._getP0().y);this._normal=this._vector.pseudoCross();this._normal.normalize()},endToPoint:function(a){this._p1.toPoint(a);this._calcProperties()},originToPoint:function(a){this._p0.toPoint(a);this._calcProperties()},to:function(a,b){this._p0.toPoint(a);this._p1.toPoint(b);this._calcProperties()},copy:function(){return new g.WorkinLine(this._p0,this._p1)},_setLength:function(a){if(0==this._getLength())return this._length;this._p1=new g.WorkinPoint(this._p0.x+this._vector.x*(a/this._getLength()),this._p0.y+this._vector.y*(a/this._getLength()));this._calcProperties();return this._length},_getLength:function(){return this._length},_getParametricDenom:function(){return this._parametricDenom},_getCenterY:function(){return this._p0.y+this._vector.y/2},_getCenterX:function(){return this._p0.x+this._vector.x/2},_getCenter:function(){return new g.WorkinPoint(this._p0.x+this._vector.x/2,this._p0.y+this._vector.y/2)},_getVector:function(){return this._vector},_getNormal:function(){return this._normal},_getYIntercept:function(){return this._yIntercept},_getSlope:function(){return this._slope},_getP1:function(){return this._p1},_getP0:function(){return this._p0},dispose:function(){this._parametricDenom=this._vector=this._normal=this._p1=this._p0=null},__class__:g.WorkinLine};g.WorkinMath=function(){};k["com.workinman.math.WorkinMath"]=g.WorkinMath;g.WorkinMath.__name__=["com","workinman","math","WorkinMath"];g.WorkinMath.diffBetweenPoints=function(a,b){return new g.WorkinPoint(b.x-a.x,b.y-a.y)};g.WorkinMath.distBetweenPoints=function(a,b){return Math.abs(Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)))};g.WorkinPoint=function(a,b,e){null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.x=Math.round(1E3*a)/1E3;this.y=Math.round(1E3*b)/1E3;this.z=Math.round(1E3*e)/1E3;this.calculateLength()};k["com.workinman.math.WorkinPoint"]=g.WorkinPoint;g.WorkinPoint.__name__=["com","workinman","math","WorkinPoint"];g.WorkinPoint.prototype={_getNormalizedMagnitude:function(){var a=this.normalizeCopy();return Math.sqrt(a.x*a.x+a.y*a.y)},calculateLength:function(){this._length=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},pseudoCross:function(){return new g.WorkinPoint(this.y,-this.x,this.z)},normalizeCopy:function(){return 0==this._length?new g.WorkinPoint(0,0,0):new g.WorkinPoint(this.x/this._length,this.y/this._length,this.z/this._length)},normalize:function(){0!=this._length&&(this.x/=this._length,this.y/=this._length,this.z/=this._length,this.calculateLength())},_setLength:function(a){if(0==this._length||0>=a)return this.to(0,0),this._length;this.multiply(a/this._length);return this._length},_getLength:function(){return this._length},copy:function(){return new g.WorkinPoint(this.x,this.y,this.z)},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;this.clean();this.calculateLength()},subtractPoint:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;this.calculateLength()},toPoint:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.calculateLength()},to:function(a,b,e){null==e&&(e=0);this.x=a;this.y=b;this.z=e;this.calculateLength()},clean:function(){this.x=Math.round(1E3*this.x)/1E3;this.y=Math.round(1E3*this.y)/1E3;this.z=Math.round(1E3*this.z)/1E3},_getAngle:function(){return 180*Math.atan2(this.y,this.x)/Math.PI},__class__:g.WorkinPoint};g.tween={};g.tween.PennerEasing=function(){};k["com.workinman.math.tween.PennerEasing"]=g.tween.PennerEasing;g.tween.PennerEasing.__name__=["com","workinman","math","tween","PennerEasing"];g.tween.PennerEasing.easeInQuad=function(a,b,e,c){return e*(a/=c)*a+b};g.tween.PennerEasing.easeOutQuad=function(a,b,e,c){return-e*(a/=c)*(a-2)+b};g.tween.PennerEasing.easeInOutQuad=function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a+b:-e/2*(--a*(a-2)-1)+b};g.tween.PennerEasing.easeInExpo=function(a,b,e,c){return 0==a?b:e*Math.pow(2,10*(a/c-1))+b};g.tween.PennerEasing.easeOutExpo=function(a,b,e,c){return a==c?b+e:e*(-Math.pow(2,-10*a/c)+1)+b};g.tween.PennerEasing.easeInOutExpo=function(a,b,e,c){return 0==a?b:a==c?b+e:1>(a/=c/2)?e/2*Math.pow(2,10*(a-1))+b:e/2*(-Math.pow(2,-10*--a)+2)+b};g.tween.PennerEasing.easeInElastic=function(a,b,e,c){return g.tween.PennerEasing.easeInElasticL(a,b,e,c)};g.tween.PennerEasing.easeInElasticL=function(a,b,e,c,d,f){null==f&&(f=-0.123456);null==d&&(d=-0.123456);if(0==a)return b;if(1==(a/=c))return b+e;-0.123456==f&&(f=0.3*c);-0.123456==d||d<Math.abs(e)?(d=e,e=f/4):e=f/(2*Math.PI)*Math.asin(e/d);return-(d*Math.pow(2,10*(a-=1))*Math.sin((a*c-e)*2*Math.PI/f))+b};g.tween.PennerEasing.easeOutElastic=function(a,b,e,c){return g.tween.PennerEasing.easeOutElasticL(a,b,e,c)};g.tween.PennerEasing.easeOutElasticL=function(a,b,e,c,d,f){null==f&&(f=-0.123456);null==d&&(d=-0.123456);var g;if(0==a)return b;if(1==(a/=c))return b+e;-0.123456==f&&(f=0.3*c);-0.123456==d||d<Math.abs(e)?(d=e,g=f/4):g=f/(2*Math.PI)*Math.asin(e/d);return d*Math.pow(2,-10*a)*Math.sin((a*c-g)*2*Math.PI/f)+e+b};g.tween.PennerEasing.easeInOutElastic=function(a,b,e,c){return g.tween.PennerEasing.easeInOutElasticL(a,b,e,c)};g.tween.PennerEasing.easeInOutElasticL=function(a,b,e,c,d,f){null==f&&(f=-0.123456);null==d&&(d=-0.123456);var g;if(0==a)return b;if(2==(a/=c/2))return b+e;-0.123456==f&&(f=c*0.3*1.5);-0.123456==d||d<Math.abs(e)?(d=e,g=f/4):g=f/(2*Math.PI)*Math.asin(e/d);return 1>a?-0.5*d*Math.pow(2,10*(a-=1))*Math.sin((a*c-g)*2*Math.PI/f)+b:0.5*d*Math.pow(2,-10*(a-=1))*Math.sin((a*c-g)*2*Math.PI/f)+e+b};g.tween.PennerEasing.easeInBack=function(a,b,e,c){return g.tween.PennerEasing.easeInBackL(a,b,e,c)};g.tween.PennerEasing.easeInBackL=function(a,b,e,c,d){null==d&&(d=-0.123456);-0.123456==d&&(d=1.70158);return e*(a/=c)*a*((d+1)*a-d)+b};g.tween.PennerEasing.easeInOutBack=function(a,b,e,c){return g.tween.PennerEasing.easeInOutBackL(a,b,e,c)};g.tween.PennerEasing.easeInOutBackL=function(a,b,e,c,d){null==d&&(d=-0.123456);-
0.123456==d&&(d=1.70158);return 1>(a/=c/2)?e/2*a*a*(((d*=1.525)+1)*a-d)+b:e/2*((a-=2)*a*(((d*=1.525)+1)*a+d)+2)+b};g.tween.PennerEasing.easeOutBounce=function(a,b,e,c){return(a/=c)<1/2.75?e*7.5625*a*a+b:a<2/2.75?e*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?e*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:e*(7.5625*(a-=2.625/2.75)*a+0.984375)+b};g.tween.PennerEasing.easeInBounce=function(a,b,e,c){return e-g.tween.PennerEasing.easeOutBounce(c-a,0,e,c)+b};g.tween.PennerEasing.easeInOutBounce=function(a,b,e,c){return a<c/2?0.5*g.tween.PennerEasing.easeInBounce(2*a,0,e,c)+b:0.5*g.tween.PennerEasing.easeOutBounce(2*a-c,0,e,c)+0.5*e+b};g.tween.PennerEasing.easeInCubic=function(a,b,e,c){return e*(a/=c)*a*a+b};g.tween.PennerEasing.easeOutCubic=function(a,b,e,c){return e*((a=a/c-1)*a*a+1)+b};g.tween.PennerEasing.easeInOutCubic=function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a+b:e/2*((a-=2)*a*a+2)+b};g.tween.PennerEasing.easeInQuart=function(a,b,e,c){return e*(a/=c)*a*a*a+b};g.tween.PennerEasing.easeOutQuart=function(a,b,e,c){return-e*((a=a/c-1)*a*a*a-1)+b};g.tween.PennerEasing.easeInOutQuart=function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a*a+b:-e/2*((a-=2)*a*a*a-2)+b};g.tween.PennerEasing.easeInQuint=function(a,b,e,c){return e*(a/=c)*a*a*a*a+b};g.tween.PennerEasing.easeOutQuint=function(a,b,e,c){return e*((a=a/c-1)*a*a*a*a+1)+b};g.tween.PennerEasing.easeInOutQuint=function(a,b,e,c){return 1>(a/=c/2)?e/2*a*a*a*a*a+b:e/2*((a-=2)*a*a*a*a+2)+b};g.tween.PennerEasing.easeInSine=function(a,b,e,c){return-e*Math.cos(a/c*(Math.PI/2))+e+b};g.tween.PennerEasing.easeOutSine=function(a,b,e,c){return e*Math.sin(a/c*(Math.PI/2))+b};g.tween.PennerEasing.easeInOutSine=function(a,b,e,c){return-e/2*(Math.cos(Math.PI*a/c)-1)+b};g.tween.PennerEasing.easeInCirc=function(a,b,e,c){return-e*(Math.sqrt(1-(a/=c)*a)-1)+b};g.tween.PennerEasing.easeOutCirc=function(a,b,e,c){return e*Math.sqrt(1-(a=a/c-1)*a)+b};g.tween.PennerEasing.easeInOutCirc=function(a,b,e,c){return 1>(a/=c/2)?-e/2*(Math.sqrt(1-a*a)-1)+b:e/2*(Math.sqrt(1-(a-=2)*a)+1)+b};g.tween.PennerManager=function(){};k["com.workinman.math.tween.PennerManager"]=g.tween.PennerManager;g.tween.PennerManager.__name__=["com","workinman","math","tween","PennerManager"];g.tween.PennerManager.getEaseFunction=function(a){switch(a){case g.tween.PennerManager.EASE_IN:case g.tween.PennerManager.EASE_QUAD_IN:return g.tween.PennerManager._tweenEaseIn;case g.tween.PennerManager.EASE_OUT:case g.tween.PennerManager.EASE_QUAD_OUT:return g.tween.PennerManager._tweenEaseOut;case g.tween.PennerManager.EASE:case g.tween.PennerManager.EASE_QUAD:return g.tween.PennerManager._tweenEaseBoth;case g.tween.PennerManager.EASE_EXPO:return g.tween.PennerManager._tweenExpoBoth;case g.tween.PennerManager.EASE_EXPO_IN:return g.tween.PennerManager._tweenExpoIn;case g.tween.PennerManager.EASE_EXPO_OUT:return g.tween.PennerManager._tweenExpoOut;case g.tween.PennerManager.EASE_ELASTIC:return g.tween.PennerManager._tweenElasticBoth;case g.tween.PennerManager.EASE_ELASTIC_IN:return g.tween.PennerManager._tweenElasticIn;case g.tween.PennerManager.EASE_ELASTIC_OUT:return g.tween.PennerManager._tweenElasticOut;case g.tween.PennerManager.EASE_BUMP:return g.tween.PennerManager._tweenBumpBoth;case g.tween.PennerManager.EASE_BUMP_IN:return g.tween.PennerManager._tweenBumpIn;case g.tween.PennerManager.EASE_BUMP_OUT:return g.tween.PennerManager._tweenBumpBoth;case g.tween.PennerManager.EASE_BOUNCE:return g.tween.PennerManager._tweenBounceBoth;case g.tween.PennerManager.EASE_BOUNCE_IN:return g.tween.PennerManager._tweenBounceIn;case g.tween.PennerManager.EASE_BOUNCE_OUT:return g.tween.PennerManager._tweenBounceOut;case g.tween.PennerManager.EASE_CUBIC:return g.tween.PennerManager._tweenCubicBoth;case g.tween.PennerManager.EASE_CUBIC_IN:return g.tween.PennerManager._tweenCubicIn;case g.tween.PennerManager.EASE_CUBIC_OUT:return g.tween.PennerManager._tweenCubicOut;case g.tween.PennerManager.EASE_SPACE:return g.tween.PennerManager._tweenSpaceBoth;case g.tween.PennerManager.EASE_SPACE_IN:return g.tween.PennerManager._tweenSpaceIn;case g.tween.PennerManager.EASE_SPACE_OUT:return g.tween.PennerManager._tweenSpaceOut;case g.tween.PennerManager.EASE_BLAST:return g.tween.PennerManager._tweenBlastBoth;case g.tween.PennerManager.EASE_BLAST_IN:return g.tween.PennerManager._tweenBlastIn;case g.tween.PennerManager.EASE_BLAST_OUT:return g.tween.PennerManager._tweenBlastOut;case g.tween.PennerManager.EASE_WAVE:return g.tween.PennerManager._tweenWaveBoth;case g.tween.PennerManager.EASE_WAVE_IN:return g.tween.PennerManager._tweenWaveIn;case g.tween.PennerManager.EASE_WAVE_OUT:return g.tween.PennerManager._tweenWaveOut;case g.tween.PennerManager.EASE_CIRCLE:return g.tween.PennerManager._tweenCircleBoth;case g.tween.PennerManager.EASE_CIRCLE_IN:return g.tween.PennerManager._tweenCircleIn;case g.tween.PennerManager.EASE_CIRCLE_OUT:return g.tween.PennerManager._tweenCircleOut;case g.tween.PennerManager.EASE_LINEAR:return g.tween.PennerManager._tweenLinear;default:return g.tween.PennerManager._tweenLinear}};g.tween.PennerManager._tweenLinear=function(a,b,e,c){return a+e/c*b};g.tween.PennerManager._tweenEaseBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutQuad(e,a,b,c)};g.tween.PennerManager._tweenEaseIn=function(a,b,e,c){return g.tween.PennerEasing.easeInQuad(e,a,b,c)};g.tween.PennerManager._tweenEaseOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutQuad(e,a,b,c)};g.tween.PennerManager._tweenExpoBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutExpo(e,a,b,c)};g.tween.PennerManager._tweenExpoIn=function(a,b,e,c){return g.tween.PennerEasing.easeInExpo(e,a,b,c)};g.tween.PennerManager._tweenExpoOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutExpo(e,a,b,c)};g.tween.PennerManager._tweenElasticBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutElastic(e,a,b,c)};g.tween.PennerManager._tweenElasticIn=function(a,b,e,c){return g.tween.PennerEasing.easeInElastic(e,a,b,c)};g.tween.PennerManager._tweenElasticOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutElastic(e,a,b,c)};g.tween.PennerManager._tweenBumpBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutBack(e,a,b,c)};g.tween.PennerManager._tweenBumpIn=function(a,b,e,c){return g.tween.PennerEasing.easeInBack(e,a,b,c)};g.tween.PennerManager._tweenBounceBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutBounce(e,a,b,c)};g.tween.PennerManager._tweenBounceIn=function(a,b,e,c){return g.tween.PennerEasing.easeInBounce(e,a,b,c)};g.tween.PennerManager._tweenBounceOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutBounce(e,a,b,c)};g.tween.PennerManager._tweenCubicBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutCubic(e,a,b,c)};g.tween.PennerManager._tweenCubicIn=function(a,b,e,c){return g.tween.PennerEasing.easeInCubic(e,a,b,c)};g.tween.PennerManager._tweenCubicOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutCubic(e,a,b,c)};g.tween.PennerManager._tweenSpaceBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutQuart(e,a,b,c)};g.tween.PennerManager._tweenSpaceIn=function(a,b,e,c){return g.tween.PennerEasing.easeInQuart(e,a,b,c)};g.tween.PennerManager._tweenSpaceOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutQuart(e,a,b,c)};g.tween.PennerManager._tweenBlastBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutQuint(e,a,b,c)};g.tween.PennerManager._tweenBlastIn=function(a,b,e,c){return g.tween.PennerEasing.easeInQuint(e,a,b,c)};g.tween.PennerManager._tweenBlastOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutQuint(e,a,b,c)};g.tween.PennerManager._tweenWaveBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutSine(e,a,b,c)};g.tween.PennerManager._tweenWaveIn=function(a,b,e,c){return g.tween.PennerEasing.easeInSine(e,a,b,c)};g.tween.PennerManager._tweenWaveOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutSine(e,a,b,c)};g.tween.PennerManager._tweenCircleBoth=function(a,b,e,c){return g.tween.PennerEasing.easeInOutCirc(e,a,b,c)};g.tween.PennerManager._tweenCircleIn=function(a,b,e,c){return g.tween.PennerEasing.easeInCirc(e,a,b,c)};g.tween.PennerManager._tweenCircleOut=function(a,b,e,c){return g.tween.PennerEasing.easeOutCirc(e,a,b,c)};g.tween.WorkinTween=function(){m.WMEventDispatcher.call(this);this._isRunning=!1;this._progress=0;this._tweens=[]};k["com.workinman.math.tween.WorkinTween"]=g.tween.WorkinTween;g.tween.WorkinTween.__name__=["com","workinman","math","tween","WorkinTween"];g.tween.WorkinTween.__super__=m.WMEventDispatcher;g.tween.WorkinTween.prototype=v(m.WMEventDispatcher.prototype,{dispose:function(){this.clearTweens();this._easingY=this._easingX=this._vector=this._goal=this._start=this._tweens=null;m.WMEventDispatcher.prototype.dispose.call(this)},_tweenComplete:function(){this._current.toPoint(this._tweens[0]._getGoal());this._tweens.splice(0,1);this._getBoolAllTweensComplete()?(this.dispatchEvent(new m.WMEvent(g.tween.WorkinTween.EVENT_TWEENS_ALL_COMPLETE)),this.stop()):(this.dispatchEvent(new m.WMEvent(g.tween.WorkinTween.EVENT_TWEEN_CURRENT_COMPLETE)),this._tweenNew())},_tweenNew:function(){this._start=this._current.copy();this._goal=this._tweens[0]._getGoal();this._vector=g.WorkinMath.diffBetweenPoints(this._start,this._goal);this._easingX=g.tween.PennerManager.getEaseFunction(this._tweens[0]._getEaseIdX());this._easingY=g.tween.PennerManager.getEaseFunction(this._tweens[0]._getEaseIdY());this._dur=this._tweens[0]._getDur();this._progress=0},update:function(a){this._isRunning&&(this._progress+=a,this._progress>this._dur&&(this._progress=this._dur),this._current.to(this._easingX(this._start.x,this._vector.x,this._progress,this._dur),this._easingY(this._start.y,this._vector.y,this._progress,this._dur)),this._progress==this._dur&&this._tweenComplete())},stop:function(){this._isRunning=!1},start:function(){null==this._current||0==this._tweens.length||(this._isRunning=!0,0==this._progress&&this._tweenNew())},clearTweens:function(){this._tweens=[];this._progress=0;this._isRunning=!1},addTween:function(a,b,e,c){null==c&&(c="");""==c&&(c=e);this._tweens.push(new g.tween.WorkinTweenStep(a.copy(),b,e,c))},setStartFromPoint:function(a){this.setStart(a.x,a.y)},setStart:function(a,b){this._current=new g.WorkinPoint(a,b);this._isRunning?this._tweenNew():this._progress=0},_getBoolCurrentTweenComplete:function(){return 1==this._getProgressRatio()},_getBoolAllTweensComplete:function(){return 0==this._tweens.length},_getPrevPos:function(){return 0==this._tweens.length?new g.WorkinPoint(0,0):this._tweens[this._tweens.length-1]._getGoal()},_getProgressRatio:function(){return this._progress/this._dur},_getCurrentVector:function(){return this._vector},_getCurrent:function(){return this._current},__class__:g.tween.WorkinTween});g.tween.WorkinTweenStep=function(a,b,e,c){this._goal=a;this._easeIdX=e;this._easeIdY=c;this._dur=b};k["com.workinman.math.tween.WorkinTweenStep"]=g.tween.WorkinTweenStep;g.tween.WorkinTweenStep.__name__=["com","workinman","math","tween","WorkinTweenStep"];g.tween.WorkinTweenStep.prototype={_getDur:function(){return this._dur},_getEaseIdY:function(){return this._easeIdY},_getEaseIdX:function(){return this._easeIdX},_getGoal:function(){return this._goal},__class__:g.tween.WorkinTweenStep};g.tween.WorkinTweener=function(){this._targets=[]};k["com.workinman.math.tween.WorkinTweener"]=g.tween.WorkinTweener;g.tween.WorkinTweener.__name__=["com","workinman","math","tween","WorkinTweener"];g.tween.WorkinTweener._getInstance=function(){null==g.tween.WorkinTweener._instance&&(g.tween.WorkinTweener._instance=new g.tween.WorkinTweener);return g.tween.WorkinTweener._instance};g.tween.WorkinTweener.prototype={stop:function(a){for(var b=this._targets.length;0<b;)
if(b--,this._targets[b]._getTarget()==a){this._targets[b].clearTweens();this._targets[b]._setIsComplete(!0);break}},tween:function(a,b,e,c,d,f,h,i,j){null==j&&(j=!1);null==i&&(i="");null==h&&(h=0);null==f&&(f=!1);null==d&&(d=0);null==c&&(c="linear");b=new g.tween._WorkinTweener.WorkinTweenDef(a,b,e,c,d,h,i);e=!1;c=0;for(d=this._targets;c<d.length;)i=d[c],++c,i._getTarget()==a&&(e=!0,f&&i.clearTweens(),i.addTween(b,h));!1==e&&(a=new g.tween._WorkinTweener.WorkinTweenTracker(a,j),this._targets.push(a),a.addTween(b,h));return b},update:function(a){for(var b=this._targets.length;0<b;)b--,this._targets[b].update(a),this._targets[b]._getIsComplete()&&(this._targets[b].dispose(),this._targets.splice(b,1))},__class__:g.tween.WorkinTweener};g.tween._WorkinTweener={};g.tween._WorkinTweener.WorkinTweenTracker=function(a,b){this._gameplayPause=b;this._target=a;this._tweens=[];this._isComplete=!1};k["com.workinman.math.tween._WorkinTweener.WorkinTweenTracker"]=g.tween._WorkinTweener.WorkinTweenTracker;g.tween._WorkinTweener.WorkinTweenTracker.__name__="com,workinman,math,tween,_WorkinTweener,WorkinTweenTracker".split(",");g.tween._WorkinTweener.WorkinTweenTracker.prototype={_decrementQueueIndeces:function(){for(var a=0,b=this._tweens;a<b.length;){var e=b[a];++a;if(0==e._getQueueIndex())return}
a=0;for(b=this._tweens;a<b.length;){e=b[a];++a;var c=e,d=c._getQueueIndex();c._setQueueIndex(d-1);d;0==e._getQueueIndex()&&e.start()}},addTween:function(a){this._tweens.push(a)},clearTweens:function(){for(var a=0,b=this._tweens;a<b.length;){var e=b[a];++a;e._setIsComplete(!0)}},_setGameplayPause:function(a){return this._gameplayPause=a},_getGameplayPause:function(){return this._gameplayPause},_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},_getTarget:function(){return this._target},_dispatchTweensAllComplete:function(a){f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(E.ConstantsCloud.EVENT_TWEENS_COMPLETE,{target:a}))},update:function(a){if(!this._gameplayPause||!f.WorkinCloud.instance.getBool("bool_paused")){for(var b=this._tweens.length;0<b;)b--,0==this._tweens[b]._getQueueIndex()&&(this._tweens[b].update(a),this._tweens[b]._getIsComplete()&&(this._tweens[b].dispose(),this._tweens.splice(b,1),this._decrementQueueIndeces()));1>this._tweens.length&&(this._isComplete=!0,this._dispatchTweensAllComplete(this._target))}},dispose:function(){this._target=null;for(var a=0,b=this._tweens;a<b.length;){var e=b[a];++a;e.dispose()}
this._tweens=null},__class__:g.tween._WorkinTweener.WorkinTweenTracker};g.tween._WorkinTweener.WorkinTweenDef=function(a,b,e,c,d,f,h){null==h&&(h="");null==f&&(f=0);null==d&&(d=0);null==c&&(c="linear");this._id=h;this._target=a;this._duration=b;this._delay=d;this._dest=e;this._queueIndex=f;this._easeFunction=g.tween.PennerManager.getEaseFunction(c);this._isComplete=!1;this._completionArgs=this._completionHandler=null;this._progress=0;this._origin={};0==f&&this.start()};k["com.workinman.math.tween._WorkinTweener.WorkinTweenDef"]=g.tween._WorkinTweener.WorkinTweenDef;g.tween._WorkinTweener.WorkinTweenDef.__name__="com,workinman,math,tween,_WorkinTweener,WorkinTweenDef".split(",");g.tween._WorkinTweener.WorkinTweenDef.prototype={onComplete:function(a,b){null==b&&(b=[]);this._completionHandler=a;this._completionArgs=b;return this},ease:function(a){this._easeFunction=g.tween.PennerManager.getEaseFunction(a);return this},delay:function(a){this._delay=a;return this},_getId:function(){return this._id},_setQueueIndex:function(a){return this._queueIndex=a},_getQueueIndex:function(){return this._queueIndex},_setIsComplete:function(a){return this._isComplete=a},_getIsComplete:function(){return this._isComplete},update:function(a){if(0<this._delay&&(this._delay-=a,0<this._delay))return;this._progress+=a;this._progress>this._duration&&(this._progress=this._duration);this.ratio=this._progress/this._duration;for(var b=0,e=L.fields(this._dest);b<e.length;){var c=e[b];++b;a=L.field(this._dest,c)-L.field(this._origin,c);this._target[c]=this._easeFunction(L.field(this._origin,c),a,this._progress,this._duration)}
this._progress>=this._duration&&(null!=this._completionHandler&&this._completionHandler.apply(this._completionHandler,this._completionArgs),this._isComplete=!0)},dispose:function(){this._dest=this._target=this._origin=null},start:function(){this._isComplete=!1;for(var a=0,b=L.fields(this._dest);a<b.length;){var e=b[a];++a;null!=L.field(this._target,e)&&(this._origin[e]=L.field(this._target,e))}},__class__:g.tween._WorkinTweener.WorkinTweenDef};R={WMSharedObject:function(){m.WMEventDispatcher.call(this);this._data={};this.sharedKey=""}};k["com.workinman.net.WMSharedObject"]=R.WMSharedObject;R.WMSharedObject.__name__=["com","workinman","net","WMSharedObject"];R.WMSharedObject.getLocalStorage=function(){return x.window.localStorage};R.WMSharedObject.getLocal=function(a,b){var e=x.window.location.href;null==b&&(b=e);e=new R.WMSharedObject;e.sharedKey=b+":"+a;var c=R.WMSharedObject.getLocalStorage().getItem(e.sharedKey);e._setData(""==c||null==c?{}:P.run(c));return e};R.WMSharedObject.__super__=m.WMEventDispatcher;R.WMSharedObject.prototype=v(m.WMEventDispatcher.prototype,{flush:function(){var a=S.run(this._getData());R.WMSharedObject.getLocalStorage().setItem(this.sharedKey,a);return R.SharedObjectFlushedStatus.FLUSHED},_setData:function(a){return this._data=a},_getData:function(){return this._data},dispose:function(){this._data=null;m.WMEventDispatcher.prototype.dispose.call(this)},__class__:R.WMSharedObject});R.SharedObjectFlushedStatus=function(){};k["com.workinman.net.SharedObjectFlushedStatus"]=R.SharedObjectFlushedStatus;R.SharedObjectFlushedStatus.__name__=["com","workinman","net","SharedObjectFlushedStatus"];s={ServiceAnalytics:function(){}};k["com.workinman.services.ServiceAnalytics"]=s.ServiceAnalytics;s.ServiceAnalytics.__name__=["com","workinman","services","ServiceAnalytics"];s.ServiceAnalytics.onAnalyticsLoad=function(){s.ServiceAnalytics._flagLoaded||(f.WorkinCloud.instance.log("[ServiceAnalytics](onAnalyticsLoad) Load complete"),s.ServiceAnalytics._flagLoaded=!0,T.delay(s.ServiceAnalytics._runQueuedCommands,1E3))};s.ServiceAnalytics.init=function(a,b){null==b&&(b="");s.ServiceAnalytics._flagInitted=!0;s.ServiceAnalytics._queuedCommands=[];"x"==a.toLowerCase()&&(s.ServiceAnalytics.OPTION_ENABLE_TRACKING=!1);s.ServiceAnalytics.OPTION_ENABLE_TRACKING&&(""==b&&(b=s.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID),s.ServiceAnalytics._flagStarted=!1,f.WorkinCloud.instance.log("[ServiceAnalytics](initAnalytics)"),s.ServiceAnalytics._appId=a,s.ServiceAnalytics._sharedObjectId=b,s.ServiceAnalytics._sharedObjectData=f.WorkinCloud.instance.sharedObjectGetData(s.ServiceAnalytics._sharedObjectId),s.ServiceAnalytics._generateSessionID(),null==s.ServiceAnalytics._sharedObjectData.userID||14>o.string(s.ServiceAnalytics._sharedObjectData.userID).length?(s.ServiceAnalytics._generateOfflineIDs(),s.ServiceAnalytics._sharedObjectData.userID=s.ServiceAnalytics._offlineUserId,s.ServiceAnalytics._sharedObjectData.trackingID=s.ServiceAnalytics._offlineTrackingId,f.WorkinCloud.instance.sharedObjectSetData(s.ServiceAnalytics._sharedObjectId,s.ServiceAnalytics._sharedObjectData)):(s.ServiceAnalytics._offlineUserId=s.ServiceAnalytics._sharedObjectData.userID,s.ServiceAnalytics._offlineTrackingId=s.ServiceAnalytics._sharedObjectData.trackingID),eval("\t\t\t\t\n\t\t\t\twindow._pnConfig = new Array();\n\t\t\t\twindow._pnConfig['userId'] = '"+s.ServiceAnalytics._offlineUserId+"';\n\t\t\t\t\n\t\t\t\tvar _pnAPIURL = document.location.protocol + '//js.a.playnomics.net/v1/api?a="+s.ServiceAnalytics._appId+"';\n\t\t\t\tvar _pnAPI = document.createElement('script');\t\t\t\t\n\t\t\t\t_pnAPI.type = 'text/javascript'; \n\t\t\t\t_pnAPI.async = false; \n\t\t\t\t_pnAPI.src = _pnAPIURL;\n\t\t\t\twindow.pnCallbackReference = _pnAPI;\t\t\t\t\n\t\t\t"),eval("window.pnCallbackReference").addEventListener("load",s.ServiceAnalytics.onAnalyticsLoad,!1),eval("document.body.appendChild(window.pnCallbackReference);"),s.ServiceAnalytics.sendUserInfo(),s.ServiceAnalytics.sendMilestone("custom1"))};s.ServiceAnalytics._runQueuedCommands=function(){for(;0<s.ServiceAnalytics._queuedCommands.length;)s.ServiceAnalytics.sendPlaynomicsEvent(s.ServiceAnalytics._queuedCommands[0].method,s.ServiceAnalytics._queuedCommands[0].params),s.ServiceAnalytics._queuedCommands.shift()};s.ServiceAnalytics.sendUserInfo=function(){var pnUserInfo=0;};s.ServiceAnalytics.sendMilestone=function(a){var pnMilestone=0;};s.ServiceAnalytics.sendPlaynomicsEvent=function(a,b){if(s.ServiceAnalytics.OPTION_ENABLE_TRACKING&&s.ServiceAnalytics._flagInitted)
if(s.ServiceAnalytics._flagLoaded){f.WorkinCloud.instance.log("[ServiceAnalytics](sendPlaynomicsEvent) "+
a);var e,c="";for(e=0;e<b.length;)c+="'"+b[e]+"'",e++,e<b.length&&(c+=",");eval(a+"("+c+")")}else s.ServiceAnalytics._queuedCommands.push({method:a,params:b})};s.ServiceAnalytics.enableCanadaTracking=function(a){s.ServiceAnalytics._flagCanadaTrackingEnabled=!0;s.ServiceAnalytics._canadaShowGameTitle=a};s.ServiceAnalytics.sendCanadaTrackingCall=function(a){if(s.ServiceAnalytics._flagCanadaTrackingEnabled)try{eval("trackFlashEvent('"+s.ServiceAnalytics._canadaShowGameTitle+"', '"+a+"', 'true');")}catch(b){}};s.ServiceAnalytics._generateSessionID=function(){for(var a="",b=11;-1<b;)a+=Math.floor(10*Math.random()),b--;s.ServiceAnalytics._sessionId=a};s.ServiceAnalytics._generateOfflineIDs=function(){s.ServiceAnalytics._offlineUserId="";s.ServiceAnalytics._offlineTrackingId="";for(var a=15;-1<a;){if(0.66>Math.random())s.ServiceAnalytics._offlineUserId+=o.string(Math.floor(10*Math.random()));else switch(Math.floor(10*Math.random())){case 0:s.ServiceAnalytics._offlineUserId+="a";break;case 1:s.ServiceAnalytics._offlineUserId+="b";break;case 2:s.ServiceAnalytics._offlineUserId+="c";break;case 3:s.ServiceAnalytics._offlineUserId+="d";break;case 4:s.ServiceAnalytics._offlineUserId+="e";break;case 5:s.ServiceAnalytics._offlineUserId+="f";break;case 6:s.ServiceAnalytics._offlineUserId+="g";break;case 7:s.ServiceAnalytics._offlineUserId+="h";break;case 8:s.ServiceAnalytics._offlineUserId+="i";break;case 9:s.ServiceAnalytics._offlineUserId+="j";break;default:s.ServiceAnalytics._offlineUserId+="z"}
a--}
s.ServiceAnalytics._offlineTrackingId="";for(a=15;-1<a;)s.ServiceAnalytics._offlineTrackingId+=Math.floor(10*Math.random()),a--};s.ServiceAnalytics.prototype={__class__:s.ServiceAnalytics};f={JSEmbedProxy:function(){}};k["com.workinman.utils.JSEmbedProxy"]=f.JSEmbedProxy;f.JSEmbedProxy.__name__=["com","workinman","utils","JSEmbedProxy"];f.JSEmbedProxy.alertOn=function(a){f.JSEmbedProxy.callJSEmbedMethod("addAlert('"+a+"', '')")};f.JSEmbedProxy.alertOff=function(){f.JSEmbedProxy.callJSEmbedMethod("removeAlert('')")};f.JSEmbedProxy.getExists=function(){return f.JSEmbedProxy.callJSEmbedMethod("exists()")};f.JSEmbedProxy.getParameters=function(){return f.JSEmbedProxy.callJSEmbedMethod("params()")};f.JSEmbedProxy.getAttributes=function(){return f.JSEmbedProxy.callJSEmbedMethod("attr()")};f.JSEmbedProxy.getBase=function(){return f.JSEmbedProxy.callJSEmbedMethod("baseUrl()")};f.JSEmbedProxy.getCanvasScale=function(){return o.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasScale()"))};f.JSEmbedProxy.getCanvasWidth=function(){return o.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasWidth()"))};f.JSEmbedProxy.getCanvasHeight=function(){return o.parseFloat(f.JSEmbedProxy.callJSEmbedMethod("canvasHeight()"))};f.JSEmbedProxy.getIsPaused=function(){return f.JSEmbedProxy.callJSEmbedMethod("isPaused()")};f.JSEmbedProxy.pause=function(){f.JSEmbedProxy.callJSEmbedMethod("pause()")};f.JSEmbedProxy.unpause=function(){f.JSEmbedProxy.callJSEmbedMethod("unpause()")};f.JSEmbedProxy.callJSEmbedMethod=function(a){try{var b=eval("jsembed."+a);return null==b?"":b}catch(e){}
return ""};f.JSEmbedProxy.prototype={__class__:f.JSEmbedProxy};f.WMAssetManager=function(){this._LOADING_CHANCES=3;this._baseUrl="";this._assets=new G;this._defs=new G;this._flump=new G;this._packs=new G;this._chunks=new G;this._manifests=new G;this._loadingProgress=this._loadingTotal=this._packsLoaded=this._packsMax=this._loadingChances=0;this._loadingPackProgress=new G};k["com.workinman.utils.WMAssetManager"]=f.WMAssetManager;f.WMAssetManager.__name__=["com","workinman","utils","WMAssetManager"];f.WMAssetManager.prototype={getFont:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFont) no asset named "+a+" exists! Returning null."),null):new p.Font(this._assets.get(a)._getPack(),a)},getLibrary:function(a){return!1==this._flump.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getLibrary) no library named "+a+" exists! Is it defined in config.xml?"),null):this._flump.get(a)},getSound:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[AssetManager](getSound) no asset named "+
a+" exists! Returning null."),null):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getSound(this._assets.get(a)._getPath(),!0)},getXML:function(a){if(!1==this._assets.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](getXML) no asset named "+a+" exists! Returning null."),null;a=t.parse(this.getFile(a));return new C.Fast(a.firstElement())},getFile:function(a){return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getFile) no asset named "+
a+" exists! Returning empty string."),""):this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getFile(this._assets.get(a)._getPath(),!0)},getTexture:function(a){a=a.split(".")[0];return!1==this._assets.exists(a)?(f.WorkinCloud.instance.log("[WMAssetManager](getTexture) no asset named "+a+" exists! Returning null."),null):!0==this._assets.get(a)._getConstructed()?this._assets.get(a)._getData():this._assets.get(a)._getPack().getTexture(this._assets.get(a)._getPath(),!0)},hasAsset:function(a){return this._assets.exists(a)},_parseSpritesheet:function(a){for(var b=this.getXML(a+".xml"),a=this.getTexture(a),e="",c=new I.Rectangle(0,0,0,0),d,b=b.nodes.resolve("SubTexture").iterator();b.hasNext();)d=b.next(),e=d.att.resolve("name").toString(),c.x=o.parseFloat(d.att.resolve("x").toString()),c.y=o.parseFloat(d.att.resolve("y").toString()),c.width=o.parseFloat(d.att.resolve("width").toString()),c.height=o.parseFloat(d.att.resolve("height").toString()),d=y.createTexture(c.width|0,c.height|0),d.get_graphics().drawSubImage(a,0,0,c.x|0,c.y|0,c.width|0,c.height|0),this.addConstructedAsset(e,d)},_onAllLoadComplete:function(){f.WorkinCloud.instance.log("[WMAssetManager](_onAllLoadComplete) all packs loaded!");f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(E.ConstantsCloud.EVENT_FILES_LOADED))},addConstructedAsset:function(a,b){new f._WMAssetManager.AssetDef(a,this._assets,b)},addPack:function(a){for(var b=B.iter(a.get_manifest()._entries);b.hasNext();){var e=b.next();new f._WMAssetManager.AssetDef(e.name,this._assets,a)}},isPackLoaded:function(a){return this._packs.exists(a)},_loadManifest:function(a,b,e,c){null==c&&(c=!0);null==e&&(e="");var d=this,g=y._platform.loadAssetPack(a);this._loadingTotal+=g._total;this._loadingPackProgress.set(b,0);g.error.connect(function(a){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed with error: "+a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEvent(E.ConstantsCloud.EVENT_FILES_ERROR));d._loadingChances--;!0==c?0<=d._loadingChances?T.delay(function(){f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Retrying. With "+d._loadingChances+" more chances.");d.loadPack(b,e,!1)},500):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading attempts timed out."):f.WorkinCloud.instance.log("[WMAssetManager](_onLoadingError) Loading failed, not attempting to retry.")});g.progressChanged.connect(function(){var a=g._progress-d._loadingPackProgress.get(b);d._loadingPackProgress.set(b,g._progress);d._loadingProgress+=a;a=Math.round(100*(d._loadingProgress/d._loadingTotal));f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(E.ConstantsCloud.EVENT_FILES_LOADING,{value:a}))});g.get(function(a){d.addPack(a);d._packsLoaded++;for(var e=0,c=d._defs.get(b)._getFlump();e<c.length;){var f=c[e];++e;d._flump.set(f,new w.Library(a,f))}
e=0;for(c=d._defs.get(b)._getTiles();e<c.length;)f=c[e],++e,d._parseSpritesheet(f);d._packs.set(b,a);d._packsLoaded>=d._packsMax&&d._onAllLoadComplete()})},loadPack:function(a,b,e){null==e&&(e=!0);null==b&&(b="");!1==this._defs.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadPack) Can't load pack "+a+" , define the pack in config.xml.");f.WorkinCloud.instance.log("[WMAssetManager](loadPack) "+a);e&&(this._loadingChances=this._LOADING_CHANCES,this._packsMax++);e=z.Manifest.build(a);""!=this._baseUrl&&e.set_relativeBasePath(this._baseUrl);this._loadManifest(e,a,b)},addPackDef:function(a,b,e){null==b&&(b=[]);null==e&&(e=[]);this._defs.set(a,new f._WMAssetManager.PackDef(a,b,e))},_parseChunk:function(a,b){for(var e=[],c=[],d=b.nodes.resolve("chunk").iterator();d.hasNext();){var g=d.next();e.push(g.getInnerData().toString())}
for(d=b.nodes.resolve("pack").iterator();d.hasNext();)g=d.next(),c.push(g.getInnerData().toString());return new f._WMAssetManager.ChunkDef(a,c,e)},loadFolder:function(a){f.WorkinCloud.instance.log("[WMAssetManager](loadFolder) "+a);this.isPackLoaded(a)||(this.addPackDef(a),this.loadPack(a))},loadChunk:function(a){!1==this._chunks.exists(a)&&f.WorkinCloud.instance.log("[WMAssetManager](loadChunk) No chunk named "+a+" defined.");for(var b=0,e=this._chunks.get(a)._getChunks();b<e.length;){var c=e[b];++b;this.loadChunk(c)}
this._packsLoaded>=this._packsMax&&(this._loadingProgress=this._loadingTotal=0,f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(E.ConstantsCloud.EVENT_FILES_LOADING,{value:0})));b=0;for(e=this._chunks.get(a)._getPacks();b<e.length;)c=e[b],++b,!1==this.isPackLoaded(c)&&this.loadPack(c)},isChunkLoaded:function(a){if(!1==this._chunks.exists(a))return f.WorkinCloud.instance.log("[WMAssetManager](isChunkLoaded) No chunk named "+a+" defined."),!1;for(var b=0,a=this._chunks.get(a)._getPacks();b<a.length;){var e=a[b];++b;if(!1==this.isPackLoaded(e))return!1}
return!0},addChunk:function(a,b){var e=this._parseChunk(a,b);this._chunks.set(a,e)},_setBaseUrl:function(a){this._baseUrl=a;f.WorkinCloud.instance.log("[WMAssetManager](setBaseUrl) Base Url set to '"+a+"'");return this._baseUrl},_getBaseUrl:function(){return this._baseUrl},__class__:f.WMAssetManager};f._WMAssetManager={};f._WMAssetManager.AssetDef=function(a,b,e){this._path=a;a=a.split("/");this._id=a[a.length-1].split(".")[0];this._constructed=!1;this._data=this._pack=null;K.__instanceof(e,z.AssetPack)?this._pack=e:(this._constructed=!0,this._data=e);this._hash=b;this._hash.set(this._path,this);this._path!=this._path.split(".")[0]&&this._hash.set(this._path.split(".")[0],this);this._hash.set(this._id,this)};k["com.workinman.utils._WMAssetManager.AssetDef"]=f._WMAssetManager.AssetDef;f._WMAssetManager.AssetDef.__name__=["com","workinman","utils","_WMAssetManager","AssetDef"];f._WMAssetManager.AssetDef.prototype={_getPack:function(){return this._pack},_getPath:function(){return this._path},_getData:function(){return this._data},_getConstructed:function(){return this._constructed},__class__:f._WMAssetManager.AssetDef};f._WMAssetManager.PackDef=function(a,b,e){this._id=a;this._flump=b;this._tiles=e};k["com.workinman.utils._WMAssetManager.PackDef"]=f._WMAssetManager.PackDef;f._WMAssetManager.PackDef.__name__=["com","workinman","utils","_WMAssetManager","PackDef"];f._WMAssetManager.PackDef.prototype={_getTiles:function(){return this._tiles},_getFlump:function(){return this._flump},__class__:f._WMAssetManager.PackDef};f._WMAssetManager.ChunkDef=function(a,b,e){this._id=a;this._packs=b;this._chunks=e};k["com.workinman.utils._WMAssetManager.ChunkDef"]=f._WMAssetManager.ChunkDef;f._WMAssetManager.ChunkDef.__name__=["com","workinman","utils","_WMAssetManager","ChunkDef"];f._WMAssetManager.ChunkDef.prototype={_getChunks:function(){return this._chunks},_getPacks:function(){return this._packs},__class__:f._WMAssetManager.ChunkDef};f.WMInput=function(){this._multiTouchAvail=!1;this._keycodes=new G;this._keydown=new G;this._touchList=new G;this._touchRemoval=[];this._keydown.set("input_click",!1);this._scale=1;this._offset=new g.WorkinPoint;this._pointer=new f.WMPointer("",0)};k["com.workinman.utils.WMInput"]=f.WMInput;f.WMInput.__name__=["com","workinman","utils","WMInput"];f.WMInput.prototype={_onPointerUp:function(a){this._keydown.set("input_click",!1);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.end(b,a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(0,"input_click",b,a))},_onPointerMove:function(a){var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.move(b,a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(2,"input_click",b,a))},_onPointerDown:function(a){this._keydown.set("input_click",!0);var b=a.viewX/this._scale,a=a.viewY/this._scale,b=b+this._offset.x,a=a+this._offset.y;this._pointer.begin(b,a);f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(1,"input_click",b,a))},_onTouchUp:function(a){var b=a.viewX/this._scale,e=a.viewY/this._scale,b=b+this._offset.x,e=e+this._offset.y;this._touchList.get(o.string(a.id)).end(b,e);0<this._touchList.get(o.string(a.id))._getIndex()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(0,"input_click",b,e))},_onTouchMove:function(a){var b=a.viewX/this._scale,e=a.viewY/this._scale,b=b+this._offset.x,e=e+this._offset.y;this._touchList.get(o.string(a.id)).move(b,e);0<this._touchList.get(o.string(a.id))._getIndex()&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(2,"input_click",b,e))},_onTouchDown:function(a){var b=0,e=!1;do
for(var e=!0,c=this._touchList.iterator();c.hasNext();){var d=c.next();if(b==d._getIndex()){b++;e=!1;break}}
while(!1==e);e=new f.WMPointer(o.string(a.id),b);this._touchList.set(e._getId(),e);c=a.viewX/this._scale;a=a.viewY/this._scale;c+=this._offset.x;a+=this._offset.y;e.begin(c,a);0<b&&f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(1,"input_click",c,a))},_onKeyUp:function(a){for(var b,e=this._keycodes.keys();e.hasNext();){var c=e.next();b=this._keycodes.get(c);for(var d=0;d<b.length;){var g=b[d];++d;g==a.key&&(this._keydown.set(c,!1),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(0,c,0,0)))}}},_onKeyDown:function(a){for(var b,e=this._keycodes.keys();e.hasNext();){var c=e.next();b=this._keycodes.get(c);for(var d=0;d<b.length;){var g=b[d];++d;g==a.key&&(this._keydown.set(c,!0),f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventInput(1,c,0,0)))}}
f.WorkinCloud.instance._getDispatcher().dispatchEvent(new m.WMEventData(E.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY,{key:a.key,state:1}))},getInput:function(a){return this._keydown.get(a)},registerInput:function(a,b){this._keycodes.set(a,b);this._keydown.set(a,!1)},prime:function(){this._multiTouchAvail=y._platform.getTouch().get_supported();y._platform.getKeyboard().down.connect(r(this,this._onKeyDown));y._platform.getKeyboard().up.connect(r(this,this._onKeyUp));this._multiTouchAvail&&(y._platform.getTouch().down.connect(r(this,this._onTouchDown)),y._platform.getTouch().move.connect(r(this,this._onTouchMove)),y._platform.getTouch().up.connect(r(this,this._onTouchUp)));y._platform.getPointer().down.connect(r(this,this._onPointerDown));y._platform.getPointer().move.connect(r(this,this._onPointerMove));y._platform.getPointer().up.connect(r(this,this._onPointerUp))},_getMultiTouch:function(){return this._touchList},_getPointer:function(){return this._pointer},_setOffset:function(a){return this._offset=a},_getOffset:function(){return this._offset},_setScale:function(a){this._scale=a;0==this._scale&&(this._scale=0.01);return this._scale},_getScale:function(){return this._scale},update:function(a){this._pointer.update(a);for(var b=this._touchList.iterator();b.hasNext();){var e=b.next();e.update(a);0==e._getPhase()&&this._touchRemoval.push(e._getId())}
a=0;for(b=this._touchRemoval;a<b.length;)e=b[a],++a,this._touchList.get(e).dispose(),this._touchList.remove(e);for(;0<this._touchRemoval.length;)this._touchRemoval.pop()},__class__:f.WMInput};f.WMPointer=function(a,b){this.SWIPE_DOWN=4;this.SWIPE_UP=3;this.SWIPE_RIGHT=2;this.SWIPE_LEFT=1;this.SWIPE_NONE=0;this._resetDeltaLine=!0;this._timer=f.WMPointer._DELTA_TIMEOUT;this._id=a;this._index=b;this._origin=new g.WorkinPoint(0,0);this._current=new g.WorkinPoint(0,0);this._last=new g.WorkinPoint(0,0);this._delta=new g.WorkinPoint(0,0);this._line=new g.WorkinLine(new g.WorkinPoint(0,0),new g.WorkinPoint(0,0));this._deltaLine=this._line.copy();this._camera=new g.WorkinCamera(0,0);this._phase=m.WMEventInput.PHASE_UP;this._swipe=this.SWIPE_NONE;this._consumed=!1};k["com.workinman.utils.WMPointer"]=f.WMPointer;f.WMPointer.__name__=["com","workinman","utils","WMPointer"];f.WMPointer.prototype={update:function(a){this._resetDeltaLine=!0;this._timer-=a;0>this._timer&&(this._timer=f.WMPointer._DELTA_TIMEOUT,this._deltaLine.originToPoint(this._current))},_updateInfo:function(a,b){this._last.toPoint(this._current);this._current.to(a,b);this._current.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._current.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._delta.toPoint(this._current);this._delta.subtractPoint(this._last)},end:function(a,b){this._phase=m.WMEventInput.PHASE_UP;this._updateInfo(a,b);this._line.endToPoint(this._current);this._swipe=this.SWIPE_NONE;this._consumed=!1},move:function(a,b){this._updateInfo(a,b);if(!1!=f.WorkinCloud.instance._getInput().getInput("input_click")){this._phase=m.WMEventInput.PHASE_MOVE;if(!1==this._consumed){var e=this._origin.x-this._current.x,c=this._origin.y-this._current.y;this._swipe=Math.abs(e)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(c)<f.WMPointer._DELTA_ALLOWANCE?0<e?this.SWIPE_LEFT:this.SWIPE_RIGHT:Math.abs(c)>=f.WMPointer._DELTA_ALLOWANCE&&Math.abs(e)<f.WMPointer._DELTA_ALLOWANCE?0<c?this.SWIPE_UP:this.SWIPE_DOWN:this.SWIPE_NONE}else this._swipe=this.SWIPE_NONE;this._line.endToPoint(this._current)}},begin:function(a,b){this._origin.to(a,b);this._origin.x+=this._camera._getPos().x-this._camera._getScreenCenterX();this._origin.y+=this._camera._getPos().y-this._camera._getScreenCenterY();this._current.toPoint(this._origin);this._last.toPoint(this._origin);this._delta.to(0,0);this._line.to(this._origin,this._current);this._deltaLine.to(this._origin,this._current);this._consumed=!1;this._phase=m.WMEventInput.PHASE_DOWN;this._swipe=this.SWIPE_NONE},_getDeltaLine:function(){if(!1==this._resetDeltaLine)return this._deltaLine;this._deltaLine.endToPoint(this._current);this._resetDeltaLine=!1;return this._deltaLine},_setIndex:function(a){return this._index=a},_getIndex:function(){return this._index},_getId:function(){return this._id},_setConsumed:function(a){return this._consumed=a},_getConsumed:function(){return this._consumed},_getSwipe:function(){return this._swipe},_getLine:function(){return this._line},_getDeltaPos:function(){return this._delta},_getLastPos:function(){return this._last},_getCurrentPos:function(){return this._current},_getOriginPos:function(){return this._origin},_getPhase:function(){return this._phase},dispose:function(){this._delta=this._last=this._current=this._origin=null;this._line.dispose();this._line=null;this._deltaLine.dispose();this._camera=this._deltaLine=null},__class__:f.WMPointer};f.WMLocalize=function(){};k["com.workinman.utils.WMLocalize"]=f.WMLocalize;f.WMLocalize.__name__=["com","workinman","utils","WMLocalize"];f.WMLocalize.prototype={getData:function(a,b){null==b&&(b="");""==b&&(b=E.ConstantsCloud.LOCALIZATION_XML_PATH+"translation_"+f.WorkinCloud.instance.getString(E.ConstantsCloud.STRING_REGION_ID)+".xml");for(var e=f.WorkinCloud.instance._getAssets().getXML(b).nodes.resolve("string").iterator();e.hasNext();){var c=e.next();if(c.att.resolve("id")==a)return new f.WMLocalizedData(c.att.resolve("id"),c.getInnerData(),c.att.resolve("fontName"),o.parseFloat(c.att.resolve("fontScale")),o.parseFloat(c.att.resolve("offsetX")),o.parseFloat(c.att.resolve("offsetY")))}
f.WorkinCloud.instance.log("[WMLocalize] ERROR: No localization data for : "+a);return new f.WMLocalizedData(a,"","",1,0,0)},__class__:f.WMLocalize};f.WMLocalizedData=function(a,b,e,c,d,f){this._id=a;this._string=b;this._fontName=e;this._scale=c;this._offsetX=d;this._offsetY=f};k["com.workinman.utils.WMLocalizedData"]=f.WMLocalizedData;f.WMLocalizedData.__name__=["com","workinman","utils","WMLocalizedData"];f.WMLocalizedData.prototype={_getOffsetY:function(){return this._offsetY},_getOffsetX:function(){return this._offsetX},_getScale:function(){return this._scale},_getFontName:function(){return this._fontName},_getString:function(){return this._string},_getId:function(){return this._id},__class__:f.WMLocalizedData};f.WMSound=function(){this._musicId="";this._musicGain=1;this._musicPlaying=null;this._isMuted=!1;this._mixer=new H.Mixer;this._sounds=[]};k["com.workinman.utils.WMSound"]=f.WMSound;f.WMSound.__name__=["com","workinman","utils","WMSound"];f.WMSound.prototype={_getMusicPlaying:function(){return this._musicPlaying},getSound:function(a){for(var b=0;b<this._sounds.length;){if(this._sounds[b].id==a)return this._sounds[b];b++}
return null},update:function(a){for(var b=0;b<this._sounds.length;){if(this._sounds[b]._getFade()==f.WMSound.FADE_OUT){if(0<this._sounds[b]._getPlayback().volume._value){var e=this._sounds[b]._getPlayback().volume;e.set__(e._value-a*this._sounds[b]._getFadeSpeed());0>=this._sounds[b]._getPlayback().volume._value&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(0))}}else this._sounds[b]._getFade()==f.WMSound.FADE_IN&&this._sounds[b]._getPlayback().volume._value<this._sounds[b].volume&&(e=this._sounds[b]._getPlayback().volume,e.set__(e._value+a*this._sounds[b]._getFadeSpeed()),this._sounds[b]._getPlayback().volume._value>=this._sounds[b].volume&&(this._sounds[b].setFade(f.WMSound.FADE_NONE),this._sounds[b]._getPlayback().volume.set__(this._sounds[b].volume)));b++}
null!=this._getMusicPlaying()&&(this._getMusicPlaying()._getFade()==f.WMSound.FADE_OUT?0<this._getMusicPlaying()._getPlayback().volume._value&&(e=this._getMusicPlaying()._getPlayback().volume,e.set__(e._value-a*this._getMusicPlaying()._getFadeSpeed()),0>=this._getMusicPlaying()._getPlayback().volume._value&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),this._getMusicPlaying()._getPlayback().volume.set__(0))):this._getMusicPlaying()._getFade()==f.WMSound.FADE_IN&&this._getMusicPlaying()._getPlayback().volume._value<this._getMusicPlaying().volume&&(e=this._getMusicPlaying()._getPlayback().volume,e.set__(e._value+a*this._getMusicPlaying()._getFadeSpeed()),this._getMusicPlaying()._getPlayback().volume._value>=this._getMusicPlaying().volume&&(this._getMusicPlaying().setFade(f.WMSound.FADE_NONE),this._getMusicPlaying()._getPlayback().volume.set__(this._getMusicPlaying().volume))))},_muteMusic:function(a){""!=this._musicId&&(a?this._musicPlaying=null:(this._musicPlaying=a=new f._WMSound.SoundDef(this._musicId,this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(this._musicId),1),!0),a.playSound(this._musicGain)))},playMusic:function(a,b){null==b&&(b=1);if(this._musicId!=a&&(this._musicId=a,this._musicGain=b,!(this._isMuted||""==a))){null!=this._musicPlaying&&this._musicPlaying.dispose();var e=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(this._musicId),1),!0);this._musicPlaying=e;e.playSound(b)}},playSound:function(a,b){null==b&&(b=1);if(!this._isMuted){for(var e=0;e<this._sounds.length;){if(this._sounds[e].id==a){this._sounds[e].playSound(b);return}
e++}
e=new f._WMSound.SoundDef(a,this._mixer.newSound(f.WorkinCloud.instance._getAssets().getSound(a),4),!1);this._sounds.push(e);e.playSound(b)}},setMute:function(a){if(a&&!1==this._isMuted){this._isMuted=!0;for(this._mixer.stopAll();0<this._sounds.length;)this._sounds.splice(0,1);this._muteMusic(this._isMuted)}else!1==a&&this._isMuted&&(this._isMuted=!1,this._muteMusic(this._isMuted))},getMute:function(){return this._isMuted},__class__:f.WMSound};f._WMSound={};f._WMSound.SoundDef=function(a,b,e){null==e&&(e=!1);this.id=a;this.isMusic=e;this.volume=1;this._flagPlayed=this._flagHasSound=!1;this._sound=b;this._fade=f.WMSound.FADE_NONE;this._fadeSpeed=1};k["com.workinman.utils._WMSound.SoundDef"]=f._WMSound.SoundDef;f._WMSound.SoundDef.__name__=["com","workinman","utils","_WMSound","SoundDef"];f._WMSound.SoundDef.prototype={playSound:function(a){null==a&&(a=1);this.volume=a;this._playback=this.isMusic?this._sound.loop(a):this._sound.play(a)},setFade:function(a,b){null==b&&(b=1);this._fade=a;this._fadeSpeed=b},_getFadeSpeed:function(){return this._fadeSpeed},_getFade:function(){return this._fade},_setPlayback:function(a){return this._playback=a},_getPlayback:function(){return this._playback},dispose:function(){this._playback.dispose();this._playback=null},__class__:f._WMSound.SoundDef};H={Mixer:function(){this._sounds=[]}};k["flambe.sound.Mixer"]=H.Mixer;H.Mixer.__name__=["flambe","sound","Mixer"];H.Mixer.__super__=O;H.Mixer.prototype=v(O.prototype,{onRemoved:function(){this.stopAll();this._sounds=[]},stopAll:function(){for(var a=0,b=this._sounds;a<b.length;){var e=b[a];++a;e.dispose()}},newSound:function(a,b){null==b&&(b=2147483647);var e=new H._Mixer.MixerSound(a,b);this._sounds.push(e);return e},get_name:function(){return "Mixer_2"},__class__:H.Mixer});f.WorkinCloud=function(){this._TIMER_STACK=0.1;this._values=new G;this._defaults=new G;this._dispatcher=new m.WMEventDispatcher;this._input=new f.WMInput;this._assets=new f.WMAssetManager;this._sound=new f.WMSound;this._localize=new f.WMLocalize;this._stack=[];this._timerStack=-1;this._flagStackPaused=!1;this.setString(E.ConstantsCloud.STRING_REGION_ID,"en")};k["com.workinman.utils.WorkinCloud"]=f.WorkinCloud;f.WorkinCloud.__name__=["com","workinman","utils","WorkinCloud"];f.WorkinCloud.prototype={_updateStack:function(a){1>this._stack.length||this._flagStackPaused||(this._timerStack-=a,0>this._timerStack&&(this._stack[0](),this._stack.shift(),this._timerStack=this._TIMER_STACK))},unpauseStack:function(){this._flagStackPaused=!1},pauseStack:function(){this._flagStackPaused=!0},update:function(a){this._updateStack(a);this._input.update(a)},stack:function(a){this._timerStack=this._TIMER_STACK;for(var b=0;b<a.length;){var e=a[b];++b;this._stack.push(e)}},_updateDisplays:function(a){this._dispatcher.dispatchEvent(new m.WMEventData(j.Display.EVENT_UPDATE_DISPLAY,{valueID:a}))},sharedObjectSetData:function(a,b){var e=R.WMSharedObject.getLocal(a);e._setData(b);e.flush();e.dispose()},sharedObjectGetData:function(a){var a=R.WMSharedObject.getLocal(a),b=a._getData();a.dispose();return b},resetValue:function(a){this._values.set(a,this._defaults.get(a));this._updateDisplays(a)},modifyValue:function(a,b){null==b&&(b=1);this._values.set(a,this.getFloat(a)+b);this._updateDisplays(a);return this.getFloat(a)},setValue:function(a,b){this._values.set(a,b);!1==this._defaults.exists(a)&&this.setDefault(a,b);this._updateDisplays(a)},getValue:function(a){return this._values.get(a)},setDefault:function(a,b){this._defaults.set(a,b);this.resetValue(a)},getString:function(a){return this._values.get(a)},setString:function(a,b){this.setValue(a,b)},getInt:function(a){return this._values.get(a)},modifyInt:function(a,b){return Math.floor(this.modifyValue(a,b))},setInt:function(a,b){this.setValue(a,b)},getFloat:function(a){return this._values.get(a)},getBool:function(a){return this._values.get(a)},setBool:function(a,b){this.setValue(a,b)},_getStackLength:function(){return this._stack.length},_getLocalize:function(){return this._localize},_getSound:function(){return this._sound},_getAssets:function(){return this._assets},_getInput:function(){return this._input},_getDispatcher:function(){return this._dispatcher},log:function(){null},__class__:f.WorkinCloud};f.WorkinUtils=function(){};k["com.workinman.utils.WorkinUtils"]=f.WorkinUtils;f.WorkinUtils.__name__=["com","workinman","utils","WorkinUtils"];f.WorkinUtils.getRandom=function(a,b,e){null==e&&(e=!0);var c=Math.random();1==c&&(c=0.99);return e?a+Math.floor(c*(b+1-a)):a+c*(b-a)};N=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};k["flambe.Entity"]=N;N.__name__=["flambe","Entity"];N.__interfaces__=[n.Disposable];N.prototype={dispose:function(){for(null!=this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},removeChild:function(a){for(var b=null,e=this.firstChild;null!=e;){var c=e.next;if(e==a){null==b?this.firstChild=c:b.next=c;e.parent=null;e.next=null;break}
b=e;e=c}},addChild:function(a,b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var e=null,c=this.firstChild;null!=c;)e=c,c=c.next;null!=e?e.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},remove:function(a){for(var b=null,e=this.firstComponent;null!=e;){var c=e.next;if(e==a){null==b?this.firstComponent=c:b._internal_init(this,c);delete this._compMap[e.get_name()];e.onRemoved();e._internal_init(null,null);break}
b=e;e=c}},add:function(a){a.dispose();var b=a.get_name(),e=this._compMap[b];null!=e&&this.remove(e);this._compMap[b]=a;b=null;for(e=this.firstComponent;null!=e;)b=e,e=e.next;null!=b?b.next=a:this.firstComponent=a;a._internal_init(this,null);a.onAdded();return this},__class__:N};n.PackageLog=function(){};k["flambe.util.PackageLog"]=n.PackageLog;n.PackageLog.__name__=["flambe","util","PackageLog"];h={Platform:function(){}};k["flambe.platform.Platform"]=h.Platform;h.Platform.__name__=["flambe","platform","Platform"];h.Platform.prototype={__class__:h.Platform};h.html={};h.html.HtmlPlatform=function(){};k["flambe.platform.html.HtmlPlatform"]=h.html.HtmlPlatform;h.html.HtmlPlatform.__name__=["flambe","platform","html","HtmlPlatform"];h.html.HtmlPlatform.__interfaces__=[h.Platform];h.html.HtmlPlatform.prototype={createRenderer:function(a){return new h.html.CanvasRenderer(a)},getY:function(a,b){return this._stage.scaleFactor*(a.clientY-b.top)},getX:function(a,b){return this._stage.scaleFactor*(a.clientX-b.left)},getRenderer:function(){return this._renderer},getExternal:function(){null==this._external&&(this._external=new h.html.HtmlExternal);return this._external},getWeb:function(){null==this._web&&(this._web=new h.html.HtmlWeb(this._container));return this._web},getKeyboard:function(){return this._keyboard},getTouch:function(){return this._touch},getMouse:function(){return this._mouse},getPointer:function(){return this._pointer},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer))},getTime:function(){return Date.now()/1E3},createLogHandler:function(){return null},getLocale:function(){var a=x.window.navigator.language;null==a&&(a=x.window.navigator.userLanguage);return a},getStorage:function(){if(null==this._storage){var a=null;try{a=x.window.localStorage}catch(b){}
this._storage=null!=a?new h.html.HtmlStorage(a):new h.DummyStorage}
return this._storage},getStage:function(){return this._stage},loadAssetPack:function(a){return(new h.html.HtmlAssetPackLoader(this,a)).promise},init:function(){var a=this,b=null;try{b=x.window.flambe.canvas}catch(e){}
b.setAttribute("tabindex","0");b.style.outlineStyle="none";b.setAttribute("moz-opaque","true");this._stage=new h.html.HtmlStage(b);this._pointer=new h.BasicPointer;this._mouse=new h.html.HtmlMouse(this._pointer,b);this._keyboard=new h.BasicKeyboard;this._renderer=this.createRenderer(b);y.hasGPU.set__(!0);this.mainLoop=new h.MainLoop;this._container=b.parentNode;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var c=0,d=function(e){if(!(1E3>e.timeStamp-c)){var d=b.getBoundingClientRect(),f=a.getX(e,d),d=a.getY(e,d);switch(e.type){case "mousedown":e.target==b&&(e.preventDefault(),a._mouse.submitDown(f,d,e.button),e.target.focus());break;case "mousemove":a._mouse.submitMove(f,d);break;case "mouseup":a._mouse.submitUp(f,d,e.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(f,d,"mousewheel"==e.type?e.wheelDelta/40:-e.detail)&&e.preventDefault()}}};window.addEventListener("mousedown",d,!1);window.addEventListener("mousemove",d,!1);window.addEventListener("mouseup",d,!1);b.addEventListener("mousewheel",d,!1);b.addEventListener("DOMMouseScroll",d,!1);var f="undefined"!=typeof x.window.ontouchstart,d="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(f||d){var g=new h.BasicTouch(this._pointer,d?window.navigator.msMaxTouchPoints:4);this._touch=g;d=function(b){var e=f?b.changedTouches:[b],d=b.target.getBoundingClientRect();c=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":b.preventDefault();h.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&h.html.HtmlUtil.hideMobileBrowser();for(b=0;b<e.length;){var i=e[b];++b;var j=a.getX(i,d),l=a.getY(i,d),i=(f?i.identifier:i.pointerId)|0;g.submitDown(i,j,l)}
break;case "touchmove":case "MSPointerMove":b.preventDefault();for(b=0;b<e.length;)i=e[b],++b,j=a.getX(i,d),l=a.getY(i,d),i=(f?i.identifier:i.pointerId)|0,g.submitMove(i,j,l);break;case "touchend":case "touchcancel":case "MSPointerUp":for(b=0;b<e.length;)i=e[b],++b,j=a.getX(i,d),l=a.getY(i,d),i=(f?i.identifier:i.pointerId)|0,g.submitUp(i,j,l)}};f?(b.addEventListener("touchstart",d,!1),b.addEventListener("touchmove",d,!1),b.addEventListener("touchend",d,!1),b.addEventListener("touchcancel",d,!1)):(b.addEventListener("MSPointerDown",d,!1),b.addEventListener("MSPointerMove",d,!1),b.addEventListener("MSPointerUp",d,!1))}else this._touch=new h.DummyTouch;d=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};b.addEventListener("keydown",d,!1);b.addEventListener("keyup",d,!1);var i=x.window.onerror;x.window.onerror=function(a,b,e){y.uncaughtError.emit1(a);return null!=i?i(a,b,e):!1};var j=h.html.HtmlUtil.loadExtension("hidden",x.document);null!=j.value&&(d=function(){y.hidden.set__(L.field(x.document,j.field))},d(),x.document.addEventListener(j.prefix+"visibilitychange",d,!1),y.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)}));this._lastUpdate=Date.now();this._skipFrame=!1;var l=h.html.HtmlUtil.loadExtension("requestAnimationFrame").value;if(null!=l){var k=x.window.performance,m=null!=k&&h.html.HtmlUtil.polyfill("now",k);m?this._lastUpdate=k.now():null;var n=null,n=function(e){a.update(m?k.now():e);l(n,b)};l(n,b)}else x.window.setInterval(function(){a.update(Date.now())},1E3/60)},__class__:h.html.HtmlPlatform};n.Value=function(a,b){this._value=a;null!=b&&(this._changed=new n.Signal2(b))};k["flambe.util.Value"]=n.Value;n.Value.__name__=["flambe","util","Value"];n.Value.prototype={get_changed:function(){null==this._changed&&(this._changed=new n.Signal2);return this._changed},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit2(a,b));return a},watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},__class__:n.Value};n.SignalConnection=function(a,b){this._internal_next=null;this._signal=a;this._internal_listener=b;this.stayInList=!0};k["flambe.util.SignalConnection"]=n.SignalConnection;n.SignalConnection.__name__=["flambe","util","SignalConnection"];n.SignalConnection.__interfaces__=[n.Disposable];n.SignalConnection.prototype={dispose:function(){null!=this._signal&&(this._signal._internal_disconnect(this),this._signal=null)},once:function(){this.stayInList=!1;return this},__class__:n.SignalConnection};n.SignalBase=function(a){this._head=null!=a?new n.SignalConnection(this,a):null;this._deferredTasks=null};k["flambe.util.SignalBase"]=n.SignalBase;n.SignalBase.__name__=["flambe","util","SignalBase"];n.SignalBase.prototype={listRemove:function(a){for(var b=null,e=this._head;null!=e;){if(e==a){a=e._internal_next;null==b?this._head=a:b._internal_next=a;break}
b=e;e=e._internal_next}},listAdd:function(a,b){if(b)a._internal_next=this._head,this._head=a;else{for(var e=null,c=this._head;null!=c;)e=c,c=c._internal_next;null!=e?e._internal_next=a:this._head=a}},didEmit:function(a){for(this._head=a;null!=this._deferredTasks;)this._deferredTasks.fn(),this._deferredTasks=this._deferredTasks.next},willEmit:function(){var a=this._head;this._head=n.SignalBase.DISPATCHING_SENTINEL;return a},defer:function(a){for(var b=null,e=this._deferredTasks;null!=e;)b=e,e=e.next;a=new n._SignalBase.Task(a);null!=b?b.next=a:this._deferredTasks=a},emit2:function(a,b){for(var e=this.willEmit(),c=e;null!=c;)c._internal_listener(a,b),c.stayInList||c.dispose(),c=c._internal_next;this.didEmit(e)},emit1:function(a){for(var b=this.willEmit(),e=b;null!=e;)e._internal_listener(a),e.stayInList||e.dispose(),e=e._internal_next;this.didEmit(b)},emit0:function(){for(var a=this.willEmit(),b=a;null!=b;)b._internal_listener(),b.stayInList||b.dispose(),b=b._internal_next;this.didEmit(a)},_internal_disconnect:function(a){var b=this;this._head==n.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},connectImpl:function(a,b){var e=this,c=new n.SignalConnection(this,a);this._head==n.SignalBase.DISPATCHING_SENTINEL?this.defer(function(){e.listAdd(c,b)}):this.listAdd(c,b);return c},__class__:n.SignalBase};n.Signal2=function(a){n.SignalBase.call(this,a)};k["flambe.util.Signal2"]=n.Signal2;n.Signal2.__name__=["flambe","util","Signal2"];n.Signal2.__super__=n.SignalBase;n.Signal2.prototype=v(n.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:n.Signal2});n.Signal1=function(a){n.SignalBase.call(this,a)};k["flambe.util.Signal1"]=n.Signal1;n.Signal1.__name__=["flambe","util","Signal1"];n.Signal1.__super__=n.SignalBase;n.Signal1.prototype=v(n.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:n.Signal1});F={AnimatedFloat:function(a,b){n.Value.call(this,a,b)}};k["flambe.animation.AnimatedFloat"]=F.AnimatedFloat;F.AnimatedFloat.__name__=["flambe","animation","AnimatedFloat"];F.AnimatedFloat.__super__=n.Value;F.AnimatedFloat.prototype=v(n.Value.prototype,{set_behavior:function(a){this._behavior=a;this.update(0);return a},update:function(a){null!=this._behavior&&(n.Value.prototype.set__.call(this,this._behavior.update(a)),this._behavior.isComplete()&&(this._behavior=null))},set__:function(a){this._behavior=null;return n.Value.prototype.set__.call(this,a)},__class__:F.AnimatedFloat});y=function(){};k["flambe.System"]=y;y.__name__=["flambe","System"];y.init=function(){y._calledInit||(y._platform.init(),y._calledInit=!0)};y.createTexture=function(a,b){return y._platform.getRenderer().createEmptyTexture(a,b)};n.Logger=function(a){this._handler=a};k["flambe.util.Logger"]=n.Logger;n.Logger.__name__=["flambe","util","Logger"];n.Logger.prototype={__class__:n.Logger};Y=function(){};k["flambe.Log"]=Y;Y.__name__=["flambe","Log"];Y.__super__=n.PackageLog;Y.prototype=v(n.PackageLog.prototype,{__class__:Y});A=function(a){null==a&&(a=1);this._internal_realDt=0;this.scale=new F.AnimatedFloat(a)};k["flambe.SpeedAdjuster"]=A;A.__name__=["flambe","SpeedAdjuster"];A.__super__=O;A.prototype=v(O.prototype,{onUpdate:function(a){0<this._internal_realDt&&(a=this._internal_realDt,this._internal_realDt=0);this.scale.update(a)},get_name:function(){return "SpeedAdjuster_5"},__class__:A});F.Behavior=function(){};k["flambe.animation.Behavior"]=F.Behavior;F.Behavior.__name__=["flambe","animation","Behavior"];F.Behavior.prototype={__class__:F.Behavior};F.Binding=function(){};k["flambe.animation.Binding"]=F.Binding;F.Binding.__name__=["flambe","animation","Binding"];F.Binding.__interfaces__=[F.Behavior];F.Binding.prototype={isComplete:function(){return!1},update:function(){var a=this._target._value;return null!=this._fn?this._fn(a):a},__class__:F.Binding};z={};z.AssetType=k["flambe.asset.AssetType"]={__ename__:["flambe","asset","AssetType"],__constructs__:["Image","Audio","Data"]};z.AssetType.Image=["Image",0];z.AssetType.Image.toString=q;z.AssetType.Image.__enum__=z.AssetType;z.AssetType.Audio=["Audio",1];z.AssetType.Audio.toString=q;z.AssetType.Audio.__enum__=z.AssetType;z.AssetType.Data=["Data",2];z.AssetType.Data.toString=q;z.AssetType.Data.__enum__=z.AssetType;z.AssetEntry=function(a,b,e,c){this.name=a;this.url=b;this.type=e;this.bytes=c};k["flambe.asset.AssetEntry"]=z.AssetEntry;z.AssetEntry.__name__=["flambe","asset","AssetEntry"];z.AssetEntry.prototype={getUrlExtension:function(){return n.Strings.getFileExtension(this.url.split("?")[0]).toLowerCase()},__class__:z.AssetEntry};z.AssetPack=function(){};k["flambe.asset.AssetPack"]=z.AssetPack;z.AssetPack.__name__=["flambe","asset","AssetPack"];z.AssetPack.prototype={__class__:z.AssetPack};K=void 0;x=void 0;K=function(){};k["js.Boot"]=K;K.__name__=["js","Boot"];K.__string_rec=function(a,b){if(null==a)return "null";if(5<=b.length)return "<...>";var e=typeof a;if("function"==e&&(a.__name__||a.__ename__))e="object";switch(e){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var e=a[0]+"(",b=b+"\t",c=2,d=a.length;c<d;)var f=c++,e=2!=f?e+(","+K.__string_rec(a[f],b)):e+K.__string_rec(a[f],b);return e+")"}
c=a.length;e="[";b+="\t";for(d=0;d<c;)f=d++,e+=(0<f?",":"")+K.__string_rec(a[f],b);return e+"]"}
try{d=a.toString}catch(g){return "???"}
if(null!=d&&d!=Object.toString&&(e=a.toString(),"[object Object]"!=e))return e;d=null;e="{\n";b+="\t";c=null!=a.hasOwnProperty;for(d in a)
if(!c||a.hasOwnProperty(d))"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=e.length&&(e+=", \n"),e+=b+d+" : "+K.__string_rec(a[d],b));b=b.substring(1);return e+("\n"+b+"}");case "function":return "<function>";case "string":return a;default:return ""+a}};K.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var e=a.__interfaces__;if(null!=e)
for(var c=0,d=e.length;c<d;){var f=c++,f=e[f];if(f==b||K.__interfLoop(f,b))return!0}
return K.__interfLoop(a.__super__,b)};K.__instanceof=function(a,b){try{if(a instanceof b)return b==Array?null==a.__enum__:!0;if(K.__interfLoop(a.__class__,b))return!0}catch(e){if(null==b)return!1}
switch(b){case ha:return Math.ceil(a%2147483648)===a;case fa:return "number"==typeof a;case ga:return!0===a||!1===a;case String:return "string"==typeof a;case ia:return!0;default:if(null==a)return!1;if(b==ja&&null!=a.__name__)return!0;null;if(b==ka&&null!=a.__ename__)return!0;null;return a.__enum__==b}};K.__cast=function(a,b){if(K.__instanceof(a,b))return a;throw "Cannot cast "+o.string(a)+" to "+o.string(b);};n.Strings=function(){};k["flambe.util.Strings"]=n.Strings;n.Strings.__name__=["flambe","util","Strings"];n.Strings.getFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?B.substr(a,b+1,null):null};n.Strings.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?B.substr(a,0,b):a};n.Strings.joinPath=function(a,b){47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};n.Strings.withFields=function(a,b){var e=b.length;if(0<e){for(var a=a+(0<a.length?" [":"["),c=0;c<e;){0<c&&(a+=", ");var d=b[c],f=b[c+1];if(K.__instanceof(f,Error)){var g=f.stack;null!=g&&(f=g)}
a+=d+"="+o.string(f);c+=2}
a+="]"}
return a};x=function(){};k["js.Lib"]=x;x.__name__=["js","Lib"];z.Manifest=function(){this._entries=[]};k["flambe.asset.Manifest"]=z.Manifest;z.Manifest.__name__=["flambe","asset","Manifest"];z.Manifest.build=function(a,b){null==b&&(b=!0);var e=z.Manifest._buildManifest.get(a);if(null==e){if(b)throw n.Strings.withFields("Missing asset pack",["name",a]);return null}
return e.clone()};z.Manifest.inferType=function(a){a=n.Strings.getFileExtension(a.split("?")[0]);if(null!=a)switch(a.toLowerCase()){case "png":case "jpg":case "gif":return z.AssetType.Image;case "ogg":case "m4a":case "mp3":case "wav":return z.AssetType.Audio}
return z.AssetType.Data};z.Manifest.createBuildManifests=function(){var a=new G;a.set("initial_load",[{name:"ui/splash/SpongeBobSplash_Title.png",md5:"6faf781bf5ddf8aecef22175e37d8e9c",bytes:69736},{name:"ui/splash/SpongeBobSplash_logo.png",md5:"8b2df2d4ff8a4fc77fcb3fe81aeaff9c",bytes:19107},{name:"ui/splash/SpongeBobSplash_BG.jpg",md5:"ac83e99822cbe21dce4cb5c9233e3dfb",bytes:98536},{name:"ui/splash/SpongeBobSplash-Nick_logo.png",md5:"cd0afa23811cf3f7e64b8ee1eda9527b",bytes:4755},{name:"ui/splash/sb_caprisun_desert_SoundOn.png",md5:"55651946e484758e121e3386b3d14e5f",bytes:7329},{name:"ui/splash/sb_caprisun_desert_SoundOff.png",md5:"0044286904eb4bdffc9022da242a7227",bytes:2858},{name:"audio/spongebobsquarepants_grandsandfortress.ogg",md5:"a500de41e95d20ca7be9dab1a5373e42",bytes:596491},{name:"audio/spongebobsquarepants_grandsandfortress.mp3",md5:"393cea3dfe679e1111114b34fb960aa8",bytes:732301},{name:"audio/button_click.ogg",md5:"ae333f53466d71e183f228042fc18b59",bytes:15649},{name:"audio/button_click.mp3",md5:"0f1c4a59e05427e17a52bbba7762bb6e",bytes:12981}]);a.set("gameplay_universal",[{name:"ui/tutorial/sb_desert_help_intro_mobile_instructions.png",md5:"5a379b564edaed5bdb6e38995260c09b",bytes:2904},{name:"ui/tutorial/sb_desert_help_intro_keys.png",md5:"9e92c681a4c87f5c980307a2f6de743d",bytes:11410},{name:"ui/tutorial/sb_desert_help_intro_backing.png",md5:"215460bc0751b0d34188b7afefba4309",bytes:183325},{name:"ui/tutorial/plankton.png",md5:"0f7a6b18454c28ec60e7d86cb3e4740f",bytes:44911},{name:"ui/tutorial/desert_blocks_mobile.png",md5:"6dbb79435e2539abccbd6b90347f8e27",bytes:41572},{name:"ui/tutorial/blocks.png",md5:"cd26f32ebc5adf27cfc823b5fc912495",bytes:15951},{name:"ui/menu/sb_desert_menu_soundon_up.png",md5:"9e7882221a2650ef9ee4bf71c9dcd7bb",bytes:28650},{name:"ui/menu/sb_desert_menu_soundon_down.png",md5:"f6329b2f6074864ffc7dda315961778c",bytes:28081},{name:"ui/menu/sb_desert_menu_soundoff_up.png",md5:"903101eec9d016b46273695ad4fe79af",bytes:24710},{name:"ui/menu/sb_desert_menu_soundoff_down.png",md5:"e8c33edaf1ba402d3c5e99c16195bc5c",bytes:25287},{name:"ui/menu/sb_desert_menu_play_up.png",md5:"fb624c91e8f4eec95e202e610ad90d32",bytes:25953},{name:"ui/menu/sb_desert_menu_play_down.png",md5:"0fc81b8c2f39d0bcbc3e7907bbf7ce47",bytes:25914},{name:"ui/menu/sb_desert_menu_help_up.png",md5:"3548fba18bb55f5bd8e7c241ae49d1c0",bytes:27001},{name:"ui/menu/sb_desert_menu_help_down.png",md5:"7bbc228f241c3dd6c1572ef5fc5b0330",bytes:27307},{name:"ui/menu/sb_desert_menu_close_up.png",md5:"0243af2c03202d67be60baabc1e03afe",bytes:26978},{name:"ui/menu/sb_desert_menu_close_down.png",md5:"e02f21adfbe07db337636c2568608f2e",bytes:27075},{name:"ui/menu/sb_desert_menu_backing.png",md5:"c33258411c5f1aaa31f84164fb0718f4",bytes:292654},{name:"ui/menu/sb_desert_btn_blank_upstate.png",md5:"f7017acf7342bfca86d67274dc5dd672",bytes:24009},{name:"ui/menu/sb_desert_btn_blank_downstate.png",md5:"e9237998abbcf48648f0e868c5503f73",bytes:24332},{name:"ui/help/sb_desert_help_page2.png",md5:"55bd763547002c7112339946f9550a25",bytes:42213},{name:"ui/help/sb_desert_help_mobile_instructions_half.png",md5:"b0d57eb0e59434dfa5813f4b49793e65",bytes:34188},{name:"ui/help/sb_desert_help_mobile_instructions.png",md5:"5c3ca696647128e4fca2683f21520f85",bytes:23987},{name:"ui/help/sb_desert_help_backing.png",md5:"c1dc9d6dcecbb79f9aa8589c3c0bd899",bytes:427199},{name:"ui/help/sb_desert_close_backing.png",md5:"0734aa25e6e55eb165497c00eff9abc1",bytes:27170},{name:"ui/gameplay_hud/wave_wood.png",md5:"fa264f1b51677e4576e06d355c372866",bytes:27778},{name:"ui/gameplay_hud/wave_sand_fill.png",md5:"ca066f873f01e8d0b6afbbe4d16ac9ab",bytes:6585},{name:"ui/gameplay_hud/wave_ropes.png",md5:"7255ea7776baf7759ead42d9857f3a97",bytes:27988},{name:"ui/gameplay_hud/wave_green_fill.png",md5:"a1f9176137416900e0a82aad8ee798a1",bytes:3068},{name:"ui/gameplay_hud/wave_glass.png",md5:"bc93c3aa30f67039a63d8cf00e32a2b4",bytes:3854},{name:"ui/gameplay_hud/wave_backing.png",md5:"4ff2fb77784aa40e6f51139a0e88c315",bytes:17966},{name:"ui/gameplay_hud/sb_desert_right_up.png",md5:"3c0a329992f96d4e2b4c9f2dc0bdac2e",bytes:16157},{name:"ui/gameplay_hud/sb_desert_right_down.png",md5:"fa06677effe4ae2b1eb5b28d705e97f9",bytes:14665},{name:"ui/gameplay_hud/sb_desert_left_up.png",md5:"c13ad64bcd44c5ff75483be46c20eadf",bytes:15953},{name:"ui/gameplay_hud/sb_desert_left_down.png",md5:"90a578402276b09c07ad4cd977b9f13a",bytes:14638},{name:"ui/gameplay_hud/sb_desert_HUD_pause_dwn.png",md5:"db20f7ce1d64f820010438f2ebc21413",bytes:6269},{name:"ui/gameplay_hud/sb_desert_HUD_pause.png",md5:"b2452d859bd3310f2c37e4dbd889e8ef",bytes:9983},{name:"ui/gameplay_hud/sb_desert_HUD_nextpiece_glass.png",md5:"86f568243a21262fb367db1fab40459f",bytes:5115},{name:"ui/gameplay_hud/sb_desert_HUD_nextpiece_back.png",md5:"31a52a6d4d09b7ea84db29478e72050b",bytes:58154},{name:"ui/gameplay_hud/sb_desert_help_level_backing.png",md5:"84803e873cb4e7a4d85fa3284324a583",bytes:62428},{name:"ui/end_screen/SB_TryAgain_youmadeit.png",md5:"e082a7d62a921a39fd9e9bdb2e1b6ca8",bytes:5236},{name:"ui/end_screen/SB_TryAgain_waves.png",md5:"b35ebf9573aa3cbb77abd906a8367cb9",bytes:2666},{name:"ui/end_screen/SB_TryAgain_dontgiveup.png",md5:"540095f2f5e6417c8693a59850ec17a8",bytes:14550},{name:"ui/end_screen/SB_TryAgain_CorrectBG.jpg",md5:"9d36705e9fb1ee14b0e6625be02f49fd",bytes:101995},{name:"ui/end_screen/SB_TryAgain_Click.png",md5:"1615d6d8b3fbe09676b79ca5f9ac85c1",bytes:16529},{name:"sb_desert_bg_sand_pile.png",md5:"94a9e09f0e9a621c8bc1b64ee1b82234",bytes:113718},{name:"particle_chunk_02_3.png",md5:"9a58e04905654e069a5a71dcb5d8e82f",bytes:1629},{name:"particle_chunk_02_2.png",md5:"8d3a68945ff6bd9d634853020e6e214c",bytes:1694},{name:"particle_chunk_02_1.png",md5:"c8b5c46bf3ef9bd3967e00390343468e",bytes:1509},{name:"particle_chunk_01_3.png",md5:"1e98466f5676a82d129ef20b35ddd02d",bytes:1894},{name:"particle_chunk_01_2.png",md5:"d074da2db4490abaf8b99303df3c8292",bytes:1844},{name:"particle_chunk_01_1.png",md5:"2e7eb19af8b8a971b4fc4af9d642ba7c",bytes:1450},{name:"particle_03.png",md5:"c881412cd8abd3dc8ffe08cde448d528",bytes:4390},{name:"particle_02.png",md5:"93688c41839dab426ae57df4bd11fe60",bytes:3901},{name:"particle_01.png",md5:"535c83ec46db471b4fae4160b4dc5c3c",bytes:4442},{name:"grid.png",md5:"ffaed945f3b96431a45b25ddfa9dd6d2",bytes:142930},{name:"gameplay_bg.jpg",md5:"5aafdd557075a257b66fcdb3bd21c438",bytes:383042},{name:"gameplay_asset/library.json",md5:"14f3d71dfac1469983b548013ff30c47",bytes:184277},{name:"gameplay_asset/atlas1.png",md5:"4e71b07f0a8e37652b6485c002ee0fd8",bytes:186950},{name:"gameplay_asset/atlas0.png",md5:"e4aee8371de9ee458d26905e68d84ac5",bytes:788294},{name:"blockpat_shine.png",md5:"26bdd29f66887d1df37c64a3ac455e95",bytes:7010},{name:"block3_shine.png",md5:"6402c920a92b662d4ec8e3e1cdb37af0",bytes:6799},{name:"block3_destroy.png",md5:"1220a25ce80b16006f1eefd39f699f6b",bytes:6951},{name:"block2_shine.png",md5:"792c797c3f09b44fdd8c8c570adca942",bytes:6752},{name:"block2_destroy.png",md5:"95b7a493eeacec14a5fafeec59a512fa",bytes:6947},{name:"block1_shine.png",md5:"0e17106609fdcb8aecc377b225726862",bytes:6427},{name:"block1_destroy.png",md5:"ef6638f2b599126bdb30f9c747b0e794",bytes:6616},{name:"audio/whistle.ogg",md5:"19e15154d571700162206605a8976353",bytes:32332},{name:"audio/whistle.mp3",md5:"4d259712df8ee41904f1f2331527ec3c",bytes:49527},{name:"audio/thub03.ogg",md5:"767d9e260a3d4ba4cf8a1d014f2d99ed",bytes:8280},{name:"audio/thub03.mp3",md5:"39e0d62a1c25fe3904d6808d49c0c56d",bytes:13238},{name:"audio/thub01.ogg",md5:"0b59c32441003f55d6c2cc8c8592a5aa",bytes:7022},{name:"audio/thub01.mp3",md5:"2264dbd87372d81f8135d45218d97276",bytes:9477},{name:"audio/paper_crumple.ogg",md5:"31217cf66d8a9dbd388a997bb804131f",bytes:16693},{name:"audio/paper_crumple.mp3",md5:"c3120bf1ba1da7258eb69c871e0d6ca2",bytes:13791},{name:"audio/explosion.ogg",md5:"c78df1f57a0f5cf357f16d7a6c35b908",bytes:39472},{name:"audio/explosion.mp3",md5:"aa18145ac17e867167dc12ee4fb6f88e",bytes:47019},{name:"audio/crowd_charge.ogg",md5:"70ba73a8ed6f0cb8d3efbafe4342ef83",bytes:246210},{name:"audio/crowd_charge.mp3",md5:"24bd72ff892776849ffc2f714a267842",bytes:349204},{name:"audio/crashboat.ogg",md5:"7dccc4f2170ed23d3b4f2d059068b151",bytes:39670},{name:"audio/crashboat.mp3",md5:"900c37d38188a4180ea70c2f7b9558d0",bytes:53953},{name:"audio/clang.ogg",md5:"87b4db49e5a3e8bbde80b6d9615f90d9",bytes:8686},{name:"audio/clang.mp3",md5:"913d37dbc223c7c3f39b64233c66ab88",bytes:10197},{name:"audio/blockHit.ogg",md5:"ea0b85d4f6604ad65a87b6ffb7123835",bytes:11039},{name:"audio/blockHit.mp3",md5:"649ffdfb392dfaaabecb963ca0a3f2e3",bytes:21315},{name:"audio/addTimer.ogg",md5:"f961c35b85d7aba77969472b944ee243",bytes:8954},{name:"audio/addTimer.mp3",md5:"750916b078a2f09c1e22702a81bbb53f",bytes:13867}]);a.set("fonts_la",[{name:"sb_desert_glyph_teal.png",md5:"630b02d746e1a31e526c0772002cff8c",bytes:813804},{name:"sb_desert_glyph_teal.fnt",md5:"14eb558fbfaa462483bb6e2ed094468f",bytes:24923},{name:"sb_desert_glyph_outside.png",md5:"e7b9687b58fdd1263333c44284e482a5",bytes:690037},{name:"sb_desert_glyph_outside.fnt",md5:"6f5c1c3be641589e0f36a1cba3d595db",bytes:23676},{name:"Basic.png",md5:"9612b2576ebcd1bf331f032ebc984c3e",bytes:640728},{name:"Basic.fnt",md5:"b45fa9bb4c9c15ff8d940beda0b16cb5",bytes:25155}]);a.set("fonts_kr",[{name:"sb_desert_glyph_teal.png",md5:"630b02d746e1a31e526c0772002cff8c",bytes:813804},{name:"sb_desert_glyph_teal.fnt",md5:"14eb558fbfaa462483bb6e2ed094468f",bytes:24923},{name:"sb_desert_glyph_outside.png",md5:"e7b9687b58fdd1263333c44284e482a5",bytes:690037},{name:"sb_desert_glyph_outside.fnt",md5:"6f5c1c3be641589e0f36a1cba3d595db",bytes:23676},{name:"Basic.png",md5:"9612b2576ebcd1bf331f032ebc984c3e",bytes:640728},{name:"Basic.fnt",md5:"b45fa9bb4c9c15ff8d940beda0b16cb5",bytes:25155}]);a.set("fonts_jp",[{name:"sb_desert_glyph_teal.png",md5:"630b02d746e1a31e526c0772002cff8c",bytes:813804},{name:"sb_desert_glyph_teal.fnt",md5:"14eb558fbfaa462483bb6e2ed094468f",bytes:24923},{name:"sb_desert_glyph_outside.png",md5:"e7b9687b58fdd1263333c44284e482a5",bytes:690037},{name:"sb_desert_glyph_outside.fnt",md5:"6f5c1c3be641589e0f36a1cba3d595db",bytes:23676},{name:"Basic.png",md5:"9612b2576ebcd1bf331f032ebc984c3e",bytes:640728},{name:"Basic.fnt",md5:"b45fa9bb4c9c15ff8d940beda0b16cb5",bytes:25155}]);a.set("fonts_en",[{name:"sb_desert_glyph_teal.png",md5:"3d3c82195391e14783ce034c2df6880e",bytes:472193},{name:"sb_desert_glyph_teal.fnt",md5:"9d855630bd81bf644bc74ae3db2ad424",bytes:11796},{name:"sb_desert_glyph_outside.png",md5:"24b5128ddac6837eb17b911e439e2209",bytes:416352},{name:"sb_desert_glyph_outside.fnt",md5:"f5208746baf61de8cb02416c6aaa4db1",bytes:11799},{name:"Basic.png",md5:"cf7a6a09922da8eff284000b0de322e7",bytes:275327},{name:"Basic.fnt",md5:"b8544d3108a0eb3b425441d6598fd234",bytes:12012}]);a.set("fonts_cn",[{name:"sb_desert_glyph_teal.png",md5:"630b02d746e1a31e526c0772002cff8c",bytes:813804},{name:"sb_desert_glyph_teal.fnt",md5:"14eb558fbfaa462483bb6e2ed094468f",bytes:24923},{name:"sb_desert_glyph_outside.png",md5:"e7b9687b58fdd1263333c44284e482a5",bytes:690037},{name:"sb_desert_glyph_outside.fnt",md5:"6f5c1c3be641589e0f36a1cba3d595db",bytes:23676},{name:"Basic.png",md5:"9612b2576ebcd1bf331f032ebc984c3e",bytes:640728},{name:"Basic.fnt",md5:"b45fa9bb4c9c15ff8d940beda0b16cb5",bytes:25155}]);a.set("bootstrap",[{name:"ui/SB_Loading_Plankton.png",md5:"8ab385a5a778c735468dace15d1884d6",bytes:12165},{name:"ui/SB_Loading_Flowers.png",md5:"815c32034ffe3b78f0abad75c79042e4",bytes:333800},{name:"ui/SB_Loading.jpg",md5:"dcfc4405c26f63723fda803180cb9db1",bytes:76010},{name:"ui/loading_wood.png",md5:"d478573ff41e09776f7d90b6ae98b9b0",bytes:24021},{name:"ui/loading_glass.png",md5:"901f6ebdabea7dfa6ec219a37ab9c305",bytes:4801},{name:"ui/loading_fill.png",md5:"00fea81b9c718a82cc31fb7d08cd4cdb",bytes:7502},{name:"ui/loading_brass.png",md5:"27e26545adbfe70ccc6d9d97f8a222e9",bytes:8819},{name:"ui/loading_backing.png",md5:"d1d87ee02b6079985d77616bdb881669",bytes:21177},{name:"config/translation_la.xml",md5:"7f19ec39585c753e051563134236eb58",bytes:12709},{name:"config/translation_kr.xml",md5:"7f19ec39585c753e051563134236eb58",bytes:12709},{name:"config/translation_jp.xml",md5:"7f19ec39585c753e051563134236eb58",bytes:12709},{name:"config/translation_en.xml",md5:"7f19ec39585c753e051563134236eb58",bytes:12709},{name:"config/translation_cn.xml",md5:"7f19ec39585c753e051563134236eb58",bytes:12709},{name:"config/config.xml",md5:"6a8d64da3daccfc991f0055d99023b8c",bytes:1010},{name:"audio/silent.ogg",md5:"3526550092a0e091f382852de5ef2315",bytes:5514},{name:"audio/silent.mp3",md5:"ba9e6829ba32e427142251a85cbd4fbb",bytes:2114}]);a.set("air",[{name:"icons/icon48.png",md5:"e310873f7870789ec2ddffb01e3b9c23",bytes:9187},{name:"icons/icon32.png",md5:"db4c0e02b46c24bfabbcf33c6807fbb8",bytes:6111},{name:"icons/icon16.png",md5:"9160a9857f1d99d4d1a5722de41941ba",bytes:3411},{name:"icons/icon128.png",md5:"0c8d573ff622474a53b7e4c76b75cda7",bytes:34016},{name:"Default.png",md5:"6617a9132c7566551711a15f42584d38",bytes:4588},{name:"Default-568h@2x.png",md5:"dc1b6528f2e9312e068aad2f53366b7e",bytes:4912}]);for(var b=new G,e=a.keys();e.hasNext();){var c=e.next(),d=new z.Manifest;d.set_relativeBasePath("assets");for(var f=0,g=a.get(c);f<g.length;){var h=g[f];++f;var i=h.name,j=c+"/"+i+"?v="+o.string(h.md5),l=z.Manifest.inferType(i);if(l==z.AssetType.Image||l==z.AssetType.Audio)i=n.Strings.removeFileExtension(i);d.add(i,j,h.bytes,l)}
b.set(c,d)}
return b};z.Manifest.prototype={set_externalBasePath:function(a){this._externalBasePath=a;null!=a&&null;return a},get_externalBasePath:function(){return this._externalBasePath},set_relativeBasePath:function(a){this._relativeBasePath=a;null!=a&&null;return a},get_relativeBasePath:function(){return this._relativeBasePath},getFullURL:function(a){var b=null!=this.get_externalBasePath()&&z.Manifest._supportsCrossOrigin?this.get_externalBasePath():this.get_relativeBasePath(),e=null!=this.get_externalBasePath()?this.get_externalBasePath():this.get_relativeBasePath();a.type==z.AssetType.Data&&(e=b);return null!=e?n.Strings.joinPath(e,a.url):a.url},clone:function(){var a=new z.Manifest;a.set_relativeBasePath(this.get_relativeBasePath());a.set_externalBasePath(this.get_externalBasePath());a._entries=this._entries.slice();return a},iterator:function(){return B.iter(this._entries)},add:function(a,b,e,c){null==e&&(e=0);null==c&&(c=z.Manifest.inferType(b));a=new z.AssetEntry(a,b,c,e);this._entries.push(a);return a},__class__:z.Manifest};p={};p.BlendMode=k["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:["Normal","Add","CopyExperimental"]};p.BlendMode.Normal=["Normal",0];p.BlendMode.Normal.toString=q;p.BlendMode.Normal.__enum__=p.BlendMode;p.BlendMode.Add=["Add",1];p.BlendMode.Add.toString=q;p.BlendMode.Add.__enum__=p.BlendMode;p.BlendMode.CopyExperimental=["CopyExperimental",2];p.BlendMode.CopyExperimental.toString=q;p.BlendMode.CopyExperimental.__enum__=p.BlendMode;I={Point:function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b}};k["flambe.math.Point"]=I.Point;I.Point.__name__=["flambe","math","Point"];I.Point.prototype={__class__:I.Point};p.Sprite=function(){this.blendMode=this.scissor=null;var a=this;this._flags=11;this._localMatrix=new I.Matrix;var b=function(){a._flags|=12};this.x=new F.AnimatedFloat(0,b);this.y=new F.AnimatedFloat(0,b);this.rotation=new F.AnimatedFloat(0,b);this.scaleX=new F.AnimatedFloat(1,b);this.scaleY=new F.AnimatedFloat(1,b);this.anchorX=new F.AnimatedFloat(0,b);this.anchorY=new F.AnimatedFloat(0,b);this.alpha=new F.AnimatedFloat(1)};k["flambe.display.Sprite"]=p.Sprite;p.Sprite.__name__=["flambe","display","Sprite"];p.Sprite.hitTest=function(a,b,e){var c=a._compMap.Sprite_1;if(null!=c){if(3!=(c._flags&3))return null;c.getLocalMatrix().inverseTransform(b,e,p.Sprite._scratchPoint)&&(b=p.Sprite._scratchPoint.x,e=p.Sprite._scratchPoint.y);var d=c.scissor;if(null!=d&&!d.contains(b,e))return null}
a=p.Sprite.hitTestBackwards(a.firstChild,b,e);return null!=a?a:null!=c&&c.containsLocal(b,e)?c:null};p.Sprite.render=function(a,b){var e=a._compMap.Sprite_1;if(null!=e){var c=e.alpha._value;if(0==(e._flags&1)||0>=c)return;b.save();1>c&&b.multiplyAlpha(c);null!=e.blendMode&&b.setBlendMode(e.blendMode);c=e.getLocalMatrix();b.transform(c.m00,c.m10,c.m01,c.m11,c.m02,c.m12);c=e.scissor;null!=c&&b.applyScissor(c.x,c.y,c.width,c.height);e.draw(b)}
c=a._compMap.Director_0;if(null!=c)
for(var c=c.occludedScenes,d=0;d<c.length;){var f=c[d];++d;p.Sprite.render(f,b)}
for(c=a.firstChild;null!=c;)d=c.next,p.Sprite.render(c,b),c=d;null!=e&&b.restore()};p.Sprite.hitTestBackwards=function(a,b,e){if(null!=a){var c=p.Sprite.hitTestBackwards(a.next,b,e);return null!=c?c:p.Sprite.hitTest(a,b,e)}
return null};p.Sprite.__super__=O;p.Sprite.prototype=v(O.prototype,{set_pointerEnabled:function(a){this._flags=n.BitSets.set(this._flags,2,a);return a},set_visible:function(a){this._flags=n.BitSets.set(this._flags,1,a);return a},get_pointerUp:function(){null==this._internal_pointerUp&&(this._internal_pointerUp=new n.Signal1);return this._internal_pointerUp},get_pointerMove:function(){null==this._internal_pointerMove&&(this._internal_pointerMove=new n.Signal1);return this._internal_pointerMove},get_pointerDown:function(){null==this._internal_pointerDown&&(this._internal_pointerDown=new n.Signal1);return this._internal_pointerDown},draw:function(){},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},getLocalMatrix:function(){0!=(this._flags&4)&&(this._flags&=-5,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getNaturalHeight:function(){return 0},getNaturalWidth:function(){return 0},get_name:function(){return "Sprite_1"},__class__:p.Sprite});p.FillSprite=function(a,b,e){p.Sprite.call(this);this.color=a;this.width=new F.AnimatedFloat(b);this.height=new F.AnimatedFloat(e)};k["flambe.display.FillSprite"]=p.FillSprite;p.FillSprite.__name__=["flambe","display","FillSprite"];p.FillSprite.__super__=p.Sprite;p.FillSprite.prototype=v(p.Sprite.prototype,{onUpdate:function(a){p.Sprite.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},getNaturalHeight:function(){return this.height._value},getNaturalWidth:function(){return this.width._value},draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},__class__:p.FillSprite});p.Font=function(a,b){this.name=b;this._glyphs=new V;for(var e=new p._Font.ConfigParser(a.getFile(b+".fnt")),c=new V,d=b.lastIndexOf("/"),d=0<=d?B.substr(b,0,d+1):"",f=e.keywords();f.hasNext();)switch(f.next()){case "info":for(var g=e.pairs();g.hasNext();){var h=g.next();switch(h.key){case "size":this.size=h.getInt()}}
break;case "page":for(var g=0,i=null,j=e.pairs();j.hasNext();)switch(h=j.next(),h.key){case "id":g=h.getInt();break;case "file":i=h.getString()}
c.set(g,a.getTexture(d+n.Strings.removeFileExtension(i)));break;case "char":g=null;for(i=e.pairs();i.hasNext();)switch(h=i.next(),h.key){case "id":g=new p.Glyph(h.getInt());break;case "x":g.x=h.getInt();break;case "y":g.y=h.getInt();break;case "width":g.width=h.getInt();break;case "height":g.height=h.getInt();break;case "page":g.page=c.get(h.getInt());break;case "xoffset":g.xOffset=h.getInt();break;case "yoffset":g.yOffset=h.getInt();break;case "xadvance":g.xAdvance=h.getInt()}
this._glyphs.set(g.charCode,g);break;case "kerning":g=null;i=-1;for(j=e.pairs();j.hasNext();)switch(h=j.next(),h.key){case "first":g=this._glyphs.get(h.getInt());break;case "second":i=h.getInt();break;case "amount":g._internal_setKerning(i,h.getInt())}}};k["flambe.display.Font"]=p.Font;p.Font.__name__=["flambe","display","Font"];p.Font.prototype={getGlyphs:function(a){for(var b=[],e=0,c=a.length;e<c;){var d=e++,d=this._glyphs.get(a.charCodeAt(d));null!=d?b.push(d):null}
return b},__class__:p.Font};p.Glyph=function(a){this.charCode=a};k["flambe.display.Glyph"]=p.Glyph;p.Glyph.__name__=["flambe","display","Glyph"];p.Glyph.prototype={_internal_setKerning:function(a,b){null==this._kernings&&(this._kernings=new V);this._kernings.set(a,b)},getKerning:function(a){return null!=this._kernings?this._kernings.get(a)|0:0},draw:function(a,b,e){0<this.width&&a.drawSubImage(this.page,b+this.xOffset,e+this.yOffset,this.x,this.y,this.width,this.height)},__class__:p.Glyph};p._Font={};p._Font.ConfigParser=function(a){this._configText=a;this._keywordPattern=new W("([a-z]+)(.*)","");this._pairPattern=new W('([a-z]+)=("[^"]*"|[^\\s]+)',"")};k["flambe.display._Font.ConfigParser"]=p._Font.ConfigParser;p._Font.ConfigParser.__name__=["flambe","display","_Font","ConfigParser"];p._Font.ConfigParser.advance=function(a,b){var e=b.matchedPos();return B.substr(a,e.pos+e.len,a.length)};p._Font.ConfigParser.prototype={pairs:function(){var a=this,b=this._pairText;return{next:function(){b=p._Font.ConfigParser.advance(b,a._pairPattern);return new p._Font.ConfigPair(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},keywords:function(){var a=this,b=this._configText;return{next:function(){b=p._Font.ConfigParser.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},__class__:p._Font.ConfigParser};p._Font.ConfigPair=function(a,b){this.key=a;this._value=b};k["flambe.display._Font.ConfigPair"]=p._Font.ConfigPair;p._Font.ConfigPair.__name__=["flambe","display","_Font","ConfigPair"];p._Font.ConfigPair.prototype={getString:function(){return 34!=this._value.charCodeAt(0)?null:B.substr(this._value,1,this._value.length-2)},getInt:function(){return o.parseInt(this._value)},__class__:p._Font.ConfigPair};p.Graphics=function(){};k["flambe.display.Graphics"]=p.Graphics;p.Graphics.__name__=["flambe","display","Graphics"];p.Graphics.prototype={__class__:p.Graphics};p.ImageSprite=function(a){p.Sprite.call(this);this.texture=a};k["flambe.display.ImageSprite"]=p.ImageSprite;p.ImageSprite.__name__=["flambe","display","ImageSprite"];p.ImageSprite.__super__=p.Sprite;p.ImageSprite.prototype=v(p.Sprite.prototype,{getNaturalHeight:function(){return this.texture.get_height()},getNaturalWidth:function(){return this.texture.get_width()},draw:function(a){a.drawImage(this.texture,0,0)},__class__:p.ImageSprite});p.Orientation=k["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};p.Orientation.Portrait=["Portrait",0];p.Orientation.Portrait.toString=q;p.Orientation.Portrait.__enum__=p.Orientation;p.Orientation.Landscape=["Landscape",1];p.Orientation.Landscape.toString=q;p.Orientation.Landscape.__enum__=p.Orientation;p.Stage=function(){};k["flambe.display.Stage"]=p.Stage;p.Stage.__name__=["flambe","display","Stage"];p.Stage.prototype={__class__:p.Stage};p.TextSprite=function(a,b){null==b&&(b="");this._width=this._height=0;this._glyphs=this._offsets=this._font=this._text=null;p.Sprite.call(this);this._font=a;this._text=b;this._flags|=32};k["flambe.display.TextSprite"]=p.TextSprite;p.TextSprite.__name__=["flambe","display","TextSprite"];p.TextSprite.__super__=p.Sprite;p.TextSprite.prototype=v(p.Sprite.prototype,{updateGlyphs:function(){if(0!=(this._flags&32)){this._flags&=-33;this._glyphs=this._font.getGlyphs(this._text);this._offsets=[0];for(var a=this._height=this._width=0,b=this._glyphs.length;a<b;){var e=this._glyphs[a];++a;a==b?this._width+=e.width:(this._width+=e.xAdvance+e.getKerning(this._glyphs[a].charCode),this._offsets.push(this._width));this._height=I.FMath.max(this._height,e.height+e.yOffset)}}},set_font:function(a){this._font=a;this._flags|=32;return a},set_text:function(a){this._text=a;this._flags|=32;return a},getNaturalHeight:function(){this.updateGlyphs();return this._height},getNaturalWidth:function(){this.updateGlyphs();return this._width},draw:function(a){this.updateGlyphs();for(var b=0,e=this._glyphs.length;b<e;)this._glyphs[b].draw(a,this._offsets[b],0),++b},__class__:p.TextSprite});p.Texture=function(){};k["flambe.display.Texture"]=p.Texture;p.Texture.__name__=["flambe","display","Texture"];p.Texture.prototype={__class__:p.Texture};A={External:function(){}};k["flambe.external.External"]=A.External;A.External.__name__=["flambe","external","External"];A.External.prototype={__class__:A.External};d={};d.Key=k["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};d.Key.A=["A",0];d.Key.A.toString=q;d.Key.A.__enum__=d.Key;d.Key.B=["B",1];d.Key.B.toString=q;d.Key.B.__enum__=d.Key;d.Key.C=["C",2];d.Key.C.toString=q;d.Key.C.__enum__=d.Key;d.Key.D=["D",3];d.Key.D.toString=q;d.Key.D.__enum__=d.Key;d.Key.E=["E",4];d.Key.E.toString=q;d.Key.E.__enum__=d.Key;d.Key.F=["F",5];d.Key.F.toString=q;d.Key.F.__enum__=d.Key;d.Key.G=["G",6];d.Key.G.toString=q;d.Key.G.__enum__=d.Key;d.Key.H=["H",7];d.Key.H.toString=q;d.Key.H.__enum__=d.Key;d.Key.I=["I",8];d.Key.I.toString=q;d.Key.I.__enum__=d.Key;d.Key.J=["J",9];d.Key.J.toString=q;d.Key.J.__enum__=d.Key;d.Key.K=["K",10];d.Key.K.toString=q;d.Key.K.__enum__=d.Key;d.Key.L=["L",11];d.Key.L.toString=q;d.Key.L.__enum__=d.Key;d.Key.M=["M",12];d.Key.M.toString=q;d.Key.M.__enum__=d.Key;d.Key.N=["N",13];d.Key.N.toString=q;d.Key.N.__enum__=d.Key;d.Key.O=["O",14];d.Key.O.toString=q;d.Key.O.__enum__=d.Key;d.Key.P=["P",15];d.Key.P.toString=q;d.Key.P.__enum__=d.Key;d.Key.Q=["Q",16];d.Key.Q.toString=q;d.Key.Q.__enum__=d.Key;d.Key.R=["R",17];d.Key.R.toString=q;d.Key.R.__enum__=d.Key;d.Key.S=["S",18];d.Key.S.toString=q;d.Key.S.__enum__=d.Key;d.Key.T=["T",19];d.Key.T.toString=q;d.Key.T.__enum__=d.Key;d.Key.U=["U",20];d.Key.U.toString=q;d.Key.U.__enum__=d.Key;d.Key.V=["V",21];d.Key.V.toString=q;d.Key.V.__enum__=d.Key;d.Key.W=["W",22];d.Key.W.toString=q;d.Key.W.__enum__=d.Key;d.Key.X=["X",23];d.Key.X.toString=q;d.Key.X.__enum__=d.Key;d.Key.Y=["Y",24];d.Key.Y.toString=q;d.Key.Y.__enum__=d.Key;d.Key.Z=["Z",25];d.Key.Z.toString=q;d.Key.Z.__enum__=d.Key;d.Key.Number0=["Number0",26];d.Key.Number0.toString=q;d.Key.Number0.__enum__=d.Key;d.Key.Number1=["Number1",27];d.Key.Number1.toString=q;d.Key.Number1.__enum__=d.Key;d.Key.Number2=["Number2",28];d.Key.Number2.toString=q;d.Key.Number2.__enum__=d.Key;d.Key.Number3=["Number3",29];d.Key.Number3.toString=q;d.Key.Number3.__enum__=d.Key;d.Key.Number4=["Number4",30];d.Key.Number4.toString=q;d.Key.Number4.__enum__=d.Key;d.Key.Number5=["Number5",31];d.Key.Number5.toString=q;d.Key.Number5.__enum__=d.Key;d.Key.Number6=["Number6",32];d.Key.Number6.toString=q;d.Key.Number6.__enum__=d.Key;d.Key.Number7=["Number7",33];d.Key.Number7.toString=q;d.Key.Number7.__enum__=d.Key;d.Key.Number8=["Number8",34];d.Key.Number8.toString=q;d.Key.Number8.__enum__=d.Key;d.Key.Number9=["Number9",35];d.Key.Number9.toString=q;d.Key.Number9.__enum__=d.Key;d.Key.Numpad0=["Numpad0",36];d.Key.Numpad0.toString=q;d.Key.Numpad0.__enum__=d.Key;d.Key.Numpad1=["Numpad1",37];d.Key.Numpad1.toString=q;d.Key.Numpad1.__enum__=d.Key;d.Key.Numpad2=["Numpad2",38];d.Key.Numpad2.toString=q;d.Key.Numpad2.__enum__=d.Key;d.Key.Numpad3=["Numpad3",39];d.Key.Numpad3.toString=q;d.Key.Numpad3.__enum__=d.Key;d.Key.Numpad4=["Numpad4",40];d.Key.Numpad4.toString=q;d.Key.Numpad4.__enum__=d.Key;d.Key.Numpad5=["Numpad5",41];d.Key.Numpad5.toString=q;d.Key.Numpad5.__enum__=d.Key;d.Key.Numpad6=["Numpad6",42];d.Key.Numpad6.toString=q;d.Key.Numpad6.__enum__=d.Key;d.Key.Numpad7=["Numpad7",43];d.Key.Numpad7.toString=q;d.Key.Numpad7.__enum__=d.Key;d.Key.Numpad8=["Numpad8",44];d.Key.Numpad8.toString=q;d.Key.Numpad8.__enum__=d.Key;d.Key.Numpad9=["Numpad9",45];d.Key.Numpad9.toString=q;d.Key.Numpad9.__enum__=d.Key;d.Key.NumpadAdd=["NumpadAdd",46];d.Key.NumpadAdd.toString=q;d.Key.NumpadAdd.__enum__=d.Key;d.Key.NumpadDecimal=["NumpadDecimal",47];d.Key.NumpadDecimal.toString=q;d.Key.NumpadDecimal.__enum__=d.Key;d.Key.NumpadDivide=["NumpadDivide",48];d.Key.NumpadDivide.toString=q;d.Key.NumpadDivide.__enum__=d.Key;d.Key.NumpadEnter=["NumpadEnter",49];d.Key.NumpadEnter.toString=q;d.Key.NumpadEnter.__enum__=d.Key;d.Key.NumpadMultiply=["NumpadMultiply",50];d.Key.NumpadMultiply.toString=q;d.Key.NumpadMultiply.__enum__=d.Key;d.Key.NumpadSubtract=["NumpadSubtract",51];d.Key.NumpadSubtract.toString=q;d.Key.NumpadSubtract.__enum__=d.Key;d.Key.F1=["F1",52];d.Key.F1.toString=q;d.Key.F1.__enum__=d.Key;d.Key.F2=["F2",53];d.Key.F2.toString=q;d.Key.F2.__enum__=d.Key;d.Key.F3=["F3",54];d.Key.F3.toString=q;d.Key.F3.__enum__=d.Key;d.Key.F4=["F4",55];d.Key.F4.toString=q;d.Key.F4.__enum__=d.Key;d.Key.F5=["F5",56];d.Key.F5.toString=q;d.Key.F5.__enum__=d.Key;d.Key.F6=["F6",57];d.Key.F6.toString=q;d.Key.F6.__enum__=d.Key;d.Key.F7=["F7",58];d.Key.F7.toString=q;d.Key.F7.__enum__=d.Key;d.Key.F8=["F8",59];d.Key.F8.toString=q;d.Key.F8.__enum__=d.Key;d.Key.F9=["F9",60];d.Key.F9.toString=q;d.Key.F9.__enum__=d.Key;d.Key.F10=["F10",61];d.Key.F10.toString=q;d.Key.F10.__enum__=d.Key;d.Key.F11=["F11",62];d.Key.F11.toString=q;d.Key.F11.__enum__=d.Key;d.Key.F12=["F12",63];d.Key.F12.toString=q;d.Key.F12.__enum__=d.Key;d.Key.F13=["F13",64];d.Key.F13.toString=q;d.Key.F13.__enum__=d.Key;d.Key.F14=["F14",65];d.Key.F14.toString=q;d.Key.F14.__enum__=d.Key;d.Key.F15=["F15",66];d.Key.F15.toString=q;d.Key.F15.__enum__=d.Key;d.Key.Left=["Left",67];d.Key.Left.toString=q;d.Key.Left.__enum__=d.Key;d.Key.Up=["Up",68];d.Key.Up.toString=q;d.Key.Up.__enum__=d.Key;d.Key.Right=["Right",69];d.Key.Right.toString=q;d.Key.Right.__enum__=d.Key;d.Key.Down=["Down",70];d.Key.Down.toString=q;d.Key.Down.__enum__=d.Key;d.Key.Alt=["Alt",71];d.Key.Alt.toString=q;d.Key.Alt.__enum__=d.Key;d.Key.Backquote=["Backquote",72];d.Key.Backquote.toString=q;d.Key.Backquote.__enum__=d.Key;d.Key.Backslash=["Backslash",73];d.Key.Backslash.toString=q;d.Key.Backslash.__enum__=d.Key;d.Key.Backspace=["Backspace",74];d.Key.Backspace.toString=q;d.Key.Backspace.__enum__=d.Key;d.Key.CapsLock=["CapsLock",75];d.Key.CapsLock.toString=q;d.Key.CapsLock.__enum__=d.Key;d.Key.Comma=["Comma",76];d.Key.Comma.toString=q;d.Key.Comma.__enum__=d.Key;d.Key.Command=["Command",77];d.Key.Command.toString=q;d.Key.Command.__enum__=d.Key;d.Key.Control=["Control",78];d.Key.Control.toString=q;d.Key.Control.__enum__=d.Key;d.Key.Delete=["Delete",79];d.Key.Delete.toString=q;d.Key.Delete.__enum__=d.Key;d.Key.End=["End",80];d.Key.End.toString=q;d.Key.End.__enum__=d.Key;d.Key.Enter=["Enter",81];d.Key.Enter.toString=q;d.Key.Enter.__enum__=d.Key;d.Key.Equals=["Equals",82];d.Key.Equals.toString=q;d.Key.Equals.__enum__=d.Key;d.Key.Escape=["Escape",83];d.Key.Escape.toString=q;d.Key.Escape.__enum__=d.Key;d.Key.Home=["Home",84];d.Key.Home.toString=q;d.Key.Home.__enum__=d.Key;d.Key.Insert=["Insert",85];d.Key.Insert.toString=q;d.Key.Insert.__enum__=d.Key;d.Key.LeftBracket=["LeftBracket",86];d.Key.LeftBracket.toString=q;d.Key.LeftBracket.__enum__=d.Key;d.Key.Minus=["Minus",87];d.Key.Minus.toString=q;d.Key.Minus.__enum__=d.Key;d.Key.PageDown=["PageDown",88];d.Key.PageDown.toString=q;d.Key.PageDown.__enum__=d.Key;d.Key.PageUp=["PageUp",89];d.Key.PageUp.toString=q;d.Key.PageUp.__enum__=d.Key;d.Key.Period=["Period",90];d.Key.Period.toString=q;d.Key.Period.__enum__=d.Key;d.Key.Quote=["Quote",91];d.Key.Quote.toString=q;d.Key.Quote.__enum__=d.Key;d.Key.RightBracket=["RightBracket",92];d.Key.RightBracket.toString=q;d.Key.RightBracket.__enum__=d.Key;d.Key.Semicolon=["Semicolon",93];d.Key.Semicolon.toString=q;d.Key.Semicolon.__enum__=d.Key;d.Key.Shift=["Shift",94];d.Key.Shift.toString=q;d.Key.Shift.__enum__=d.Key;d.Key.Slash=["Slash",95];d.Key.Slash.toString=q;d.Key.Slash.__enum__=d.Key;d.Key.Space=["Space",96];d.Key.Space.toString=q;d.Key.Space.__enum__=d.Key;d.Key.Tab=["Tab",97];d.Key.Tab.toString=q;d.Key.Tab.__enum__=d.Key;d.Key.Menu=["Menu",98];d.Key.Menu.toString=q;d.Key.Menu.__enum__=d.Key;d.Key.Search=["Search",99];d.Key.Search.toString=q;d.Key.Search.__enum__=d.Key;d.Key.Unknown=function(a){a=["Unknown",100,a];a.__enum__=d.Key;a.toString=q;return a};d.Keyboard=function(){};k["flambe.input.Keyboard"]=d.Keyboard;d.Keyboard.__name__=["flambe","input","Keyboard"];d.Keyboard.prototype={__class__:d.Keyboard};d.KeyboardEvent=function(){this._internal_init(0,null)};k["flambe.input.KeyboardEvent"]=d.KeyboardEvent;d.KeyboardEvent.__name__=["flambe","input","KeyboardEvent"];d.KeyboardEvent.prototype={_internal_init:function(a,b){this.id=a;this.key=b},__class__:d.KeyboardEvent};d.Mouse=function(){};k["flambe.input.Mouse"]=d.Mouse;d.Mouse.__name__=["flambe","input","Mouse"];d.Mouse.prototype={__class__:d.Mouse};d.MouseButton=k["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};d.MouseButton.Left=["Left",0];d.MouseButton.Left.toString=q;d.MouseButton.Left.__enum__=d.MouseButton;d.MouseButton.Middle=["Middle",1];d.MouseButton.Middle.toString=q;d.MouseButton.Middle.__enum__=d.MouseButton;d.MouseButton.Right=["Right",2];d.MouseButton.Right.toString=q;d.MouseButton.Right.__enum__=d.MouseButton;d.MouseButton.Unknown=function(a){a=["Unknown",3,a];a.__enum__=d.MouseButton;a.toString=q;return a};d.MouseCursor=k["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};d.MouseCursor.Default=["Default",0];d.MouseCursor.Default.toString=q;d.MouseCursor.Default.__enum__=d.MouseCursor;d.MouseCursor.Button=["Button",1];d.MouseCursor.Button.toString=q;d.MouseCursor.Button.__enum__=d.MouseCursor;d.MouseCursor.None=["None",2];d.MouseCursor.None.toString=q;d.MouseCursor.None.__enum__=d.MouseCursor;d.MouseEvent=function(){this._internal_init(0,0,0,null)};k["flambe.input.MouseEvent"]=d.MouseEvent;d.MouseEvent.__name__=["flambe","input","MouseEvent"];d.MouseEvent.prototype={_internal_init:function(a,b,e,c){this.id=a;this.viewX=b;this.viewY=e;this.button=c},__class__:d.MouseEvent};d.Pointer=function(){};k["flambe.input.Pointer"]=d.Pointer;d.Pointer.__name__=["flambe","input","Pointer"];d.Pointer.prototype={__class__:d.Pointer};d.EventSource=k["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};d.EventSource.Mouse=function(a){a=["Mouse",0,a];a.__enum__=d.EventSource;a.toString=q;return a};d.EventSource.Touch=function(a){a=["Touch",1,a];a.__enum__=d.EventSource;a.toString=q;return a};d.PointerEvent=function(){this._internal_init(0,0,0,null,null)};k["flambe.input.PointerEvent"]=d.PointerEvent;d.PointerEvent.__name__=["flambe","input","PointerEvent"];d.PointerEvent.prototype={_internal_init:function(a,b,e,c,d){this.id=a;this.viewX=b;this.viewY=e;this.hit=c;this.source=d;this._internal_stopped=!1},__class__:d.PointerEvent};d.Touch=function(){};k["flambe.input.Touch"]=d.Touch;d.Touch.__name__=["flambe","input","Touch"];d.Touch.prototype={__class__:d.Touch};d.TouchPoint=function(a){this.id=a;this._internal_source=d.EventSource.Touch(this)};k["flambe.input.TouchPoint"]=d.TouchPoint;d.TouchPoint.__name__=["flambe","input","TouchPoint"];d.TouchPoint.prototype={_internal_init:function(a,b){this.viewX=a;this.viewY=b},__class__:d.TouchPoint};I.FMath=function(){};k["flambe.math.FMath"]=I.FMath;I.FMath.__name__=["flambe","math","FMath"];I.FMath.max=function(a,b){return a>b?a:b};I.FMath.clamp=function(a,b,e){return a<b?b:a>e?e:a};I.Matrix=function(){this.identity()};k["flambe.math.Matrix"]=I.Matrix;I.Matrix.__name__=["flambe","math","Matrix"];I.Matrix.prototype={inverseTransform:function(a,b,e){var c=this.determinant();if(0==c)return!1;a-=this.m02;b-=this.m12;e.x=(a*this.m11-b*this.m01)/c;e.y=(b*this.m00-a*this.m10)/c;return!0},determinant:function(){return this.m00*this.m11-this.m01*this.m10},translate:function(a,b){this.m02+=this.m00*a+this.m01*b;this.m12+=this.m11*b+this.m10*a},compose:function(a,b,e,c,d){var f=Math.sin(d),d=Math.cos(d);this.set(d*e,f*e,-f*c,d*c,a,b)},identity:function(){this.set(1,0,0,1,0,0)},set:function(a,b,e,c,d,f){this.m00=a;this.m01=e;this.m02=d;this.m10=b;this.m11=c;this.m12=f},__class__:I.Matrix};I.Rectangle=function(a,b,e,c){null==c&&(c=0);null==e&&(e=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,e,c)};k["flambe.math.Rectangle"]=I.Rectangle;I.Rectangle.__name__=["flambe","math","Rectangle"];I.Rectangle.prototype={contains:function(a,b){a-=this.x;b-=this.y;return 0<=a&&0<=b&&a<=this.width&&b<=this.height},set:function(a,b,e,c){this.x=a;this.y=b;this.width=e;this.height=c},__class__:I.Rectangle};h.BasicAssetPackLoader=function(a,b){this._platform=a;this.promise=new n.Promise;this._bytesLoaded=new G;this._pack=new h._BasicAssetPackLoader.BasicAssetPack(b);var e=ba.array(b);if(0==e.length)this.handleSuccess();else{for(var c=0,d=new G,f=0;f<e.length;){var g=e[f];++f;var i=d.get(g.name);null==i&&(i=[],d.set(g.name,i));i.push(g)}
this._assetsRemaining=ba.count(d);for(e=d.iterator();e.hasNext();)
if(i=e.next(),i=1<i.length?this.pickBestEntry(i):i[0],d=this.createPlaceholder(i),null!=d)this.handleLoad(i,d);else{c+=i.bytes;d=b.getFullURL(i);try{this.loadEntry(d,i)}catch(j){this.handleError(i,"Unexpected error: "+o.string(j))}}
this.promise.set_total(c)}};k["flambe.platform.BasicAssetPackLoader"]=h.BasicAssetPackLoader;h.BasicAssetPackLoader.__name__=["flambe","platform","BasicAssetPackLoader"];h.BasicAssetPackLoader.prototype={handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},handleError:function(a,b){this.promise.error.emit1(n.Strings.withFields(b,["url",a.url]))},handleSuccess:function(){this.promise.set_result(this._pack)},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var e=0,c=this._bytesLoaded.iterator();c.hasNext();)var d=c.next(),e=e+d;this.promise.set_progress(e)},handleLoad:function(a,b){this.handleProgress(a,a.bytes);var e=a.name;switch(a.type[1]){case 0:this._pack.textures.set(e,b);break;case 1:this._pack.sounds.set(e,b);break;case 2:this._pack.files.set(e,b)}
this._assetsRemaining-=1;0>=this._assetsRemaining&&this.handleSuccess()},getAudioFormats:function(){return[]},loadEntry:function(){},createPlaceholder:function(a){switch(a.type[1]){case 1:if(!ba.has(this.getAudioFormats(),a.getUrlExtension()))return h.DummySound.getInstance()}
return null},pickBestEntry:function(a){switch(a[0].type[1]){case 1:for(var b=this.getAudioFormats(),e=0;e<b.length;){var c=b[e];++e;for(var d=0;d<a.length;){var f=a[d];++d;if(f.getUrlExtension()==c)return f}}}
return a[0]},__class__:h.BasicAssetPackLoader};h._BasicAssetPackLoader={};h._BasicAssetPackLoader.BasicAssetPack=function(a){this._manifest=a;this.textures=new G;this.sounds=new G;this.files=new G};k["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=h._BasicAssetPackLoader.BasicAssetPack;h._BasicAssetPackLoader.BasicAssetPack.__name__=["flambe","platform","_BasicAssetPackLoader","BasicAssetPack"];h._BasicAssetPackLoader.BasicAssetPack.__interfaces__=[z.AssetPack];h._BasicAssetPackLoader.BasicAssetPack.prototype={get_manifest:function(){return this._manifest},getFile:function(a,b){null==b&&(b=!0);var e=this.files.get(a);if(null==e&&b)throw n.Strings.withFields("Missing file",["name",a]);return e},getSound:function(a,b){null==b&&(b=!0);var e=this.sounds.get(a);if(null==e&&b)throw n.Strings.withFields("Missing sound",["name",a]);return e},getTexture:function(a,b){null==b&&(b=!0);var e=this.textures.get(a);if(null==e&&b)throw n.Strings.withFields("Missing texture",["name",a]);return e},__class__:h._BasicAssetPackLoader.BasicAssetPack};h.BasicKeyboard=function(){this.down=new n.Signal1;this.up=new n.Signal1;this.backButton=new n.Signal0;this._keyStates=new V};k["flambe.platform.BasicKeyboard"]=h.BasicKeyboard;h.BasicKeyboard.__name__=["flambe","platform","BasicKeyboard"];h.BasicKeyboard.__interfaces__=[d.Keyboard];h.BasicKeyboard.prototype={submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),h.BasicKeyboard._sharedEvent._internal_init(h.BasicKeyboard._sharedEvent.id+1,h.KeyCodes.toKey(a)),this.up.emit1(h.BasicKeyboard._sharedEvent))},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit0(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),h.BasicKeyboard._sharedEvent._internal_init(h.BasicKeyboard._sharedEvent.id+1,h.KeyCodes.toKey(a)),this.down.emit1(h.BasicKeyboard._sharedEvent));return!0},isDown:function(a){return this._keyStates.exists(h.KeyCodes.toKeyCode(a))},get_supported:function(){return!0},__class__:h.BasicKeyboard};h.BasicMouse=function(a){this._pointer=a;this._source=d.EventSource.Mouse(h.BasicMouse._sharedEvent);this.down=new n.Signal1;this.move=new n.Signal1;this.up=new n.Signal1;this.scroll=new n.Signal1;this._y=this._x=0;this._cursor=d.MouseCursor.Default;this._buttonStates=new V};k["flambe.platform.BasicMouse"]=h.BasicMouse;h.BasicMouse.__name__=["flambe","platform","BasicMouse"];h.BasicMouse.__interfaces__=[d.Mouse];h.BasicMouse.prototype={prepare:function(a,b,e){this._x=a;this._y=b;h.BasicMouse._sharedEvent._internal_init(h.BasicMouse._sharedEvent.id+1,a,b,e)},submitScroll:function(a,b,e){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit1(e);return!0},submitUp:function(a,b,e){this._buttonStates.exists(e)&&(this._buttonStates.remove(e),this.prepare(a,b,h.MouseCodes.toButton(e)),this._pointer.submitUp(a,b,this._source),this.up.emit1(h.BasicMouse._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit1(h.BasicMouse._sharedEvent)},submitDown:function(a,b,e){this._buttonStates.exists(e)||(this._buttonStates.set(e,!0),this.prepare(a,b,h.MouseCodes.toButton(e)),this._pointer.submitDown(a,b,this._source),this.down.emit1(h.BasicMouse._sharedEvent))},isDown:function(a){return this._buttonStates.exists(h.MouseCodes.toButtonCode(a))},set_cursor:function(a){return this._cursor=a},get_cursor:function(){return this._cursor},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:h.BasicMouse};h.BasicPointer=function(a,b,e){null==e&&(e=!1);null==b&&(b=0);null==a&&(a=0);this.down=new n.Signal1;this.move=new n.Signal1;this.up=new n.Signal1;this._x=a;this._y=b;this._isDown=e};k["flambe.platform.BasicPointer"]=h.BasicPointer;h.BasicPointer.__name__=["flambe","platform","BasicPointer"];h.BasicPointer.__interfaces__=[d.Pointer];h.BasicPointer.prototype={prepare:function(a,b,e,c){this._x=a;this._y=b;h.BasicPointer._sharedEvent._internal_init(h.BasicPointer._sharedEvent.id+1,a,b,e,c)},submitUp:function(a,b,e){if(this._isDown){this._isDown=!1;var c=[],d=p.Sprite.hitTest(y.root,a,b);if(null!=d){var f=d.owner;do{var g=f._compMap.Sprite_1;null!=g&&c.push(g);f=f.parent}while(null!=f)}
this.prepare(a,b,d,e);for(a=0;a<c.length;)
if(g=c[a],++a,g=g._internal_pointerUp,null!=g&&(g.emit1(h.BasicPointer._sharedEvent),h.BasicPointer._sharedEvent._internal_stopped))return;this.up.emit1(h.BasicPointer._sharedEvent)}},submitMove:function(a,b,e){var c=[],d=p.Sprite.hitTest(y.root,a,b);if(null!=d){var f=d.owner;do{var g=f._compMap.Sprite_1;null!=g&&c.push(g);f=f.parent}while(null!=f)}
this.prepare(a,b,d,e);for(a=0;a<c.length;)
if(g=c[a],++a,g=g._internal_pointerMove,null!=g&&(g.emit1(h.BasicPointer._sharedEvent),h.BasicPointer._sharedEvent._internal_stopped))return;this.move.emit1(h.BasicPointer._sharedEvent)},submitDown:function(a,b,e){if(!this._isDown){this._isDown=!0;var c=[],d=p.Sprite.hitTest(y.root,a,b);if(null!=d){var f=d.owner;do{var g=f._compMap.Sprite_1;null!=g&&c.push(g);f=f.parent}while(null!=f)}
this.prepare(a,b,d,e);for(a=0;a<c.length;)
if(g=c[a],++a,g=g._internal_pointerDown,null!=g&&(g.emit1(h.BasicPointer._sharedEvent),h.BasicPointer._sharedEvent._internal_stopped))return;this.down.emit1(h.BasicPointer._sharedEvent)}},isDown:function(){return this._isDown},get_y:function(){return this._y},get_x:function(){return this._x},get_supported:function(){return!0},__class__:h.BasicPointer};h.BasicTouch=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new V;this._points=[];this.down=new n.Signal1;this.move=new n.Signal1;this.up=new n.Signal1};k["flambe.platform.BasicTouch"]=h.BasicTouch;h.BasicTouch.__name__=["flambe","platform","BasicTouch"];h.BasicTouch.__interfaces__=[d.Touch];h.BasicTouch.prototype={submitUp:function(a,b,e){var c=this._pointMap.get(a);null!=c&&(c._internal_init(b,e),this._pointMap.remove(a),B.remove(this._points,c),this._pointerTouch==c&&(this._pointerTouch=null,this._pointer.submitUp(b,e,c._internal_source)),this.up.emit1(c))},submitMove:function(a,b,e){a=this._pointMap.get(a);null!=a&&(a._internal_init(b,e),this._pointerTouch==a&&this._pointer.submitMove(b,e,a._internal_source),this.move.emit1(a))},submitDown:function(a,b,e){if(!this._pointMap.exists(a)){var c=new d.TouchPoint(a);c._internal_init(b,e);this._pointMap.set(a,c);this._points.push(c);null==this._pointerTouch&&(this._pointerTouch=c,this._pointer.submitDown(b,e,c._internal_source));this.down.emit1(c)}},get_points:function(){return this._points.slice()},get_maxPoints:function(){return this._maxPoints},get_supported:function(){return!0},__class__:h.BasicTouch};H.Sound=function(){};k["flambe.sound.Sound"]=H.Sound;H.Sound.__name__=["flambe","sound","Sound"];H.Sound.prototype={__class__:H.Sound};h.DummySound=function(){this._playback=new h.DummyPlayback(this)};k["flambe.platform.DummySound"]=h.DummySound;h.DummySound.__name__=["flambe","platform","DummySound"];h.DummySound.__interfaces__=[H.Sound];h.DummySound.getInstance=function(){null==h.DummySound._instance&&(h.DummySound._instance=new h.DummySound);return h.DummySound._instance};h.DummySound.prototype={get_duration:function(){return 0},loop:function(){return this._playback},play:function(){return this._playback},__class__:h.DummySound};H.Playback=function(){};k["flambe.sound.Playback"]=H.Playback;H.Playback.__name__=["flambe","sound","Playback"];H.Playback.__interfaces__=[n.Disposable];H.Playback.prototype={__class__:H.Playback};h.DummyPlayback=function(a){this._sound=a;this.volume=new F.AnimatedFloat(0)};k["flambe.platform.DummyPlayback"]=h.DummyPlayback;h.DummyPlayback.__name__=["flambe","platform","DummyPlayback"];h.DummyPlayback.__interfaces__=[H.Playback];h.DummyPlayback.prototype={dispose:function(){},get_position:function(){return 0},get_ended:function(){return!0},set_paused:function(){return!0},get_paused:function(){return!0},get_sound:function(){return this._sound},__class__:h.DummyPlayback};aa={Storage:function(){}};k["flambe.storage.Storage"]=aa.Storage;aa.Storage.__name__=["flambe","storage","Storage"];aa.Storage.prototype={__class__:aa.Storage};h.DummyStorage=function(){this.clear()};k["flambe.platform.DummyStorage"]=h.DummyStorage;h.DummyStorage.__name__=["flambe","platform","DummyStorage"];h.DummyStorage.__interfaces__=[aa.Storage];h.DummyStorage.prototype={clear:function(){this._hash=new G},remove:function(a){this._hash.remove(a)},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):b},set:function(a,b){this._hash.set(a,b);return!0},get_supported:function(){return!1},__class__:h.DummyStorage};h.DummyTouch=function(){this.down=new n.Signal1;this.move=new n.Signal1;this.up=new n.Signal1};k["flambe.platform.DummyTouch"]=h.DummyTouch;h.DummyTouch.__name__=["flambe","platform","DummyTouch"];h.DummyTouch.__interfaces__=[d.Touch];h.DummyTouch.prototype={get_points:function(){return[]},get_maxPoints:function(){return 0},get_supported:function(){return!1},__class__:h.DummyTouch};h.EventGroup=function(){this._entries=[]};k["flambe.platform.EventGroup"]=h.EventGroup;h.EventGroup.__name__=["flambe","platform","EventGroup"];h.EventGroup.__interfaces__=[n.Disposable];h.EventGroup.prototype={dispose:function(){for(var a=0,b=this._entries;a<b.length;){var e=b[a];++a;e.dispatcher.removeEventListener(e.type,e.listener,!1)}
this._entries=[]},addDisposingListener:function(a,b,e){var c=this;this.addListener(a,b,function(a){c.dispose();e(a)})},addListener:function(a,b,e){a.addEventListener(b,e,!1);this._entries.push(new h._EventGroup.Entry(a,b,e))},__class__:h.EventGroup};h._EventGroup={};h._EventGroup.Entry=function(a,b,e){this.dispatcher=a;this.type=b;this.listener=e};k["flambe.platform._EventGroup.Entry"]=h._EventGroup.Entry;h._EventGroup.Entry.__name__=["flambe","platform","_EventGroup","Entry"];h._EventGroup.Entry.prototype={__class__:h._EventGroup.Entry};h.KeyCodes=function(){};k["flambe.platform.KeyCodes"]=h.KeyCodes;h.KeyCodes.__name__=["flambe","platform","KeyCodes"];h.KeyCodes.toKey=function(a){switch(a){case 65:return d.Key.A;case 66:return d.Key.B;case 67:return d.Key.C;case 68:return d.Key.D;case 69:return d.Key.E;case 70:return d.Key.F;case 71:return d.Key.G;case 72:return d.Key.H;case 73:return d.Key.I;case 74:return d.Key.J;case 75:return d.Key.K;case 76:return d.Key.L;case 77:return d.Key.M;case 78:return d.Key.N;case 79:return d.Key.O;case 80:return d.Key.P;case 81:return d.Key.Q;case 82:return d.Key.R;case 83:return d.Key.S;case 84:return d.Key.T;case 85:return d.Key.U;case 86:return d.Key.V;case 87:return d.Key.W;case 88:return d.Key.X;case 89:return d.Key.Y;case 90:return d.Key.Z;case 48:return d.Key.Number0;case 49:return d.Key.Number1;case 50:return d.Key.Number2;case 51:return d.Key.Number3;case 52:return d.Key.Number4;case 53:return d.Key.Number5;case 54:return d.Key.Number6;case 55:return d.Key.Number7;case 56:return d.Key.Number8;case 57:return d.Key.Number9;case 96:return d.Key.Numpad0;case 97:return d.Key.Numpad1;case 98:return d.Key.Numpad2;case 99:return d.Key.Numpad3;case 100:return d.Key.Numpad4;case 101:return d.Key.Numpad5;case 102:return d.Key.Numpad6;case 103:return d.Key.Numpad7;case 104:return d.Key.Numpad8;case 105:return d.Key.Numpad9;case 107:return d.Key.NumpadAdd;case 110:return d.Key.NumpadDecimal;case 111:return d.Key.NumpadDivide;case 108:return d.Key.NumpadEnter;case 106:return d.Key.NumpadMultiply;case 109:return d.Key.NumpadSubtract;case 112:return d.Key.F1;case 113:return d.Key.F2;case 114:return d.Key.F3;case 115:return d.Key.F4;case 116:return d.Key.F5;case 117:return d.Key.F6;case 118:return d.Key.F7;case 119:return d.Key.F8;case 120:return d.Key.F9;case 121:return d.Key.F10;case 122:return d.Key.F11;case 123:return d.Key.F12;case 37:return d.Key.Left;case 38:return d.Key.Up;case 39:return d.Key.Right;case 40:return d.Key.Down;case 18:return d.Key.Alt;case 192:return d.Key.Backquote;case 220:return d.Key.Backslash;case 8:return d.Key.Backspace;case 20:return d.Key.CapsLock;case 188:return d.Key.Comma;case 15:return d.Key.Command;case 17:return d.Key.Control;case 46:return d.Key.Delete;case 35:return d.Key.End;case 13:return d.Key.Enter;case 187:return d.Key.Equals;case 27:return d.Key.Escape;case 36:return d.Key.Home;case 45:return d.Key.Insert;case 219:return d.Key.LeftBracket;case 189:return d.Key.Minus;case 34:return d.Key.PageDown;case 33:return d.Key.PageUp;case 190:return d.Key.Period;case 222:return d.Key.Quote;case 221:return d.Key.RightBracket;case 186:return d.Key.Semicolon;case 16:return d.Key.Shift;case 191:return d.Key.Slash;case 32:return d.Key.Space;case 9:return d.Key.Tab;case 16777234:return d.Key.Menu;case 16777247:return d.Key.Search}
return d.Key.Unknown(a)};h.KeyCodes.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};h.MainLoop=function(){this._tickables=[]};k["flambe.platform.MainLoop"]=h.MainLoop;h.MainLoop.__name__=["flambe","platform","MainLoop"];h.MainLoop.updateEntity=function(a,b){var e=a._compMap.SpeedAdjuster_5;if(null!=e&&(e._internal_realDt=b,b*=e.scale._value,0>=b)){e.onUpdate(b);return}
for(var c=a.firstComponent;null!=c;)e=c.next,c.onUpdate(b),c=e;for(c=a.firstChild;null!=c;)e=c.next,h.MainLoop.updateEntity(c,b),c=e};h.MainLoop.prototype={addTickable:function(a){this._tickables.push(a)},render:function(a){var b=a.willRender();null!=b&&(p.Sprite.render(y.root,b),a.didRender())},update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}
y.volume.update(a);h.MainLoop.updateEntity(y.root,a)}},__class__:h.MainLoop};h.ManifestBuilder=function(){};k["flambe.platform.ManifestBuilder"]=h.ManifestBuilder;h.ManifestBuilder.__name__=["flambe","platform","ManifestBuilder"];h.MouseCodes=function(){};k["flambe.platform.MouseCodes"]=h.MouseCodes;h.MouseCodes.__name__=["flambe","platform","MouseCodes"];h.MouseCodes.toButton=function(a){switch(a){case 0:return d.MouseButton.Left;case 1:return d.MouseButton.Middle;case 2:return d.MouseButton.Right}
return d.MouseButton.Unknown(a)};h.MouseCodes.toButtonCode=function(a){switch(a[1]){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return a[2]}};h.Renderer=function(){};k["flambe.platform.Renderer"]=h.Renderer;h.Renderer.__name__=["flambe","platform","Renderer"];h.Renderer.prototype={__class__:h.Renderer};h.Tickable=function(){};k["flambe.platform.Tickable"]=h.Tickable;h.Tickable.__name__=["flambe","platform","Tickable"];h.Tickable.prototype={__class__:h.Tickable};h.html.CanvasGraphics=function(a){this._firstDraw=!1;this._canvasCtx=a.getContext("2d");this.clear()};k["flambe.platform.html.CanvasGraphics"]=h.html.CanvasGraphics;h.html.CanvasGraphics.__name__=["flambe","platform","html","CanvasGraphics"];h.html.CanvasGraphics.__interfaces__=[p.Graphics];h.html.CanvasGraphics.prototype={willRender:function(){this._firstDraw=!0},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|0,b|0,c|0,d|0);this._canvasCtx.clip()},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="source-over"}
this._canvasCtx.globalCompositeOperation=b},setAlpha:function(a){this._canvasCtx.globalAlpha=a},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},fillRect:function(a,b,c,d,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,f),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle="#"+("00000"+a.toString(16)).slice(-6),this._canvasCtx.fillRect(b|0,c|0,d|0,f|0))},drawPattern:function(a,b,c,d,f){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,f),this._canvasCtx.globalCompositeOperation="source-over"):(null==a.pattern&&(a.pattern=this._canvasCtx.createPattern(a.image,"repeat")),this._canvasCtx.fillStyle=a.pattern,this._canvasCtx.fillRect(b|0,c|0,d|0,f|0))},drawSubImage:function(a,b,c,d,f,g,h){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubImage(a,b,c,d,f,g,h),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,d|0,f|0,g|0,h|0,b|0,c|0,g|0,h|0)},drawImage:function(a,b,c){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawImage(a,b,c),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.image,b|0,c|0)},restore:function(){this._canvasCtx.restore()},transform:function(a,b,c,d,f,g){this._canvasCtx.transform(a,b,c,d,f|0,g|0)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*a/180)},scale:function(a,b){this._canvasCtx.scale(a,b)},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},save:function(){this._canvasCtx.save()},clear:function(){this._canvasCtx.fillStyle="#000000";this._canvasCtx.fillRect(0,0,this._canvasCtx.canvas.width,this._canvasCtx.canvas.height)},__class__:h.html.CanvasGraphics};h.html.CanvasRenderer=function(a){this._graphics=new h.html.CanvasGraphics(a);this._graphics.clear()};k["flambe.platform.html.CanvasRenderer"]=h.html.CanvasRenderer;h.html.CanvasRenderer.__name__=["flambe","platform","html","CanvasRenderer"];h.html.CanvasRenderer.__interfaces__=[h.Renderer];h.html.CanvasRenderer.prototype={didRender:function(){},willRender:function(){this._graphics.willRender();return this._graphics},createEmptyTexture:function(a,b){return new h.html.CanvasTexture(h.html.HtmlUtil.createEmptyCanvas(a,b))},createTexture:function(a){return new h.html.CanvasTexture(h.html.CanvasRenderer.CANVAS_TEXTURES?h.html.HtmlUtil.createCanvas(a):a)},__class__:h.html.CanvasRenderer};h.html.CanvasTexture=function(a){this._graphics=null;this.image=a};k["flambe.platform.html.CanvasTexture"]=h.html.CanvasTexture;h.html.CanvasTexture.__name__=["flambe","platform","html","CanvasTexture"];h.html.CanvasTexture.__interfaces__=[p.Texture];h.html.CanvasTexture.prototype={getContext2d:function(){K.__instanceof(this.image,HTMLCanvasElement)||(this.image=h.html.HtmlUtil.createCanvas(this.image));return this.image.getContext("2d")},get_graphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new h.html._CanvasTexture.InternalGraphics(this));return this._graphics},get_height:function(){return this.image.height},get_width:function(){return this.image.width},writePixels:function(a,b,c,d,f){var g=this.getContext2d(),h=g.createImageData(d,f),i=h.data;if(null!=i.set)i.set(a.b);else{d=4*d*f;for(f=0;f<d;){var j=f++;i[j]=a.b[j]}}
g.putImageData(h,b,c);this.pattern=null},readPixels:function(a,b,c,d){return U.Bytes.ofData(this.getContext2d().getImageData(a,b,c,d).data)},__class__:h.html.CanvasTexture};h.html._CanvasTexture={};h.html._CanvasTexture.InternalGraphics=function(a){h.html.CanvasGraphics.call(this,a.image);this._renderTarget=a};k["flambe.platform.html._CanvasTexture.InternalGraphics"]=h.html._CanvasTexture.InternalGraphics;h.html._CanvasTexture.InternalGraphics.__name__=["flambe","platform","html","_CanvasTexture","InternalGraphics"];h.html._CanvasTexture.InternalGraphics.__super__=h.html.CanvasGraphics;h.html._CanvasTexture.InternalGraphics.prototype=v(h.html.CanvasGraphics.prototype,{fillRect:function(a,b,c,d,f){h.html.CanvasGraphics.prototype.fillRect.call(this,a,b,c,d,f);this._renderTarget.pattern=null},drawPattern:function(a,b,c,d,f){h.html.CanvasGraphics.prototype.drawPattern.call(this,a,b,c,d,f);this._renderTarget.pattern=null},drawSubImage:function(a,b,c,d,f,g,i){h.html.CanvasGraphics.prototype.drawSubImage.call(this,a,b,c,d,f,g,i);this._renderTarget.pattern=null},drawImage:function(a,b,c){h.html.CanvasGraphics.prototype.drawImage.call(this,a,b,c);this._renderTarget.pattern=null},__class__:h.html._CanvasTexture.InternalGraphics});h.html.HtmlAssetPackLoader=function(a,b){h.BasicAssetPackLoader.call(this,a,b)};k["flambe.platform.html.HtmlAssetPackLoader"]=h.html.HtmlAssetPackLoader;h.html.HtmlAssetPackLoader.__name__=["flambe","platform","html","HtmlAssetPackLoader"];h.html.HtmlAssetPackLoader.detectAudioFormats=function(){var a=x.document.createElement("audio");if(null==a||null==a.canPlayType)return[];var b=new W("\\b(iPhone|iPod|iPad|Android)\\b","");if(!h.html.WebAudioSound.get_supported()&&b.match(x.window.navigator.userAgent))return[];for(var b=[{extension:"m4a",type:"audio/mp4; codecs=mp4a"},{extension:"mp3",type:"audio/mpeg"},{extension:"ogg",type:"audio/ogg; codecs=vorbis"},{extension:"wav",type:"audio/wav"}],c=[],d=0;d<b.length;){var f=b[d];++d;var g="";try{g=a.canPlayType(f.type)}catch(i){}
""!=g&&c.push(f.extension)}
return c};h.html.HtmlAssetPackLoader.supportsBlob=function(){if(h.html.HtmlAssetPackLoader._detectBlobSupport){h.html.HtmlAssetPackLoader._detectBlobSupport=!1;try{(new XMLHttpRequest).responseType="blob"}catch(a){return!1}
h.html.HtmlAssetPackLoader._URL=h.html.HtmlUtil.loadExtension("URL").value}
return null!=h.html.HtmlAssetPackLoader._URL&&null!=h.html.HtmlAssetPackLoader._URL.createObjectURL};h.html.HtmlAssetPackLoader.__super__=h.BasicAssetPackLoader;h.html.HtmlAssetPackLoader.prototype=v(h.BasicAssetPackLoader.prototype,{sendRequest:function(a,b,c,d){var f=this,g=new XMLHttpRequest,h=0,i=function(){h=Date.now();g.open("GET",a,!0);g.responseType=c;""==g.responseType&&(g.responseType="arraybuffer");g.send()},j=0;if("undefined"!=typeof g.onprogress){var l=4;g.onprogress=function(a){h=Date.now();f.handleProgress(b,a.loaded)};j=x.window.setInterval(function(){5E3<Date.now()-h&&(g.abort(),--l,0<l?i():(x.window.clearInterval(j),f.handleError(b,"Failed to load asset: timeout")))},1E3)}
g.onload=function(){x.window.clearInterval(j);var a=g.response;null==a?a=g.responseText:"blob"==c&&"arraybuffer"==g.responseType&&(a=new Blob([g.response]));d(a)};g.onerror=function(){x.window.clearInterval(j);f.handleError(b,"Failed to load asset: error #"+o.string(g.status))};i();return g},getAudioFormats:function(){null==h.html.HtmlAssetPackLoader._audioFormats&&(h.html.HtmlAssetPackLoader._audioFormats=h.html.HtmlAssetPackLoader.detectAudioFormats());return h.html.HtmlAssetPackLoader._audioFormats},loadEntry:function(a,b){var c=this;switch(b.type[1]){case 0:var d=new Image,f=new h.EventGroup;f.addDisposingListener(d,"load",function(){h.html.HtmlAssetPackLoader.supportsBlob()&&h.html.HtmlAssetPackLoader._URL.revokeObjectURL(d.src);var a=c._platform.getRenderer().createTexture(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});f.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});h.html.HtmlAssetPackLoader.supportsBlob()?this.sendRequest(a,b,"blob",function(a){d.src=h.html.HtmlAssetPackLoader._URL.createObjectURL(a)}):d.src=a;break;case 1:if(h.html.WebAudioSound.get_supported())this.sendRequest(a,b,"arraybuffer",function(a){h.html.WebAudioSound.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new h.html.WebAudioSound(a))},function(){c.handleLoad(b,h.DummySound.getInstance())})});else{var g=x.document.createElement("audio");g.preload="auto";var i=++h.html.HtmlAssetPackLoader._mediaRefCount;null==h.html.HtmlAssetPackLoader._mediaElements&&(h.html.HtmlAssetPackLoader._mediaElements=new V);h.html.HtmlAssetPackLoader._mediaElements.set(i,g);f=new h.EventGroup;f.addDisposingListener(g,"canplaythrough",function(){h.html.HtmlAssetPackLoader._mediaElements.remove(i);c.handleLoad(b,new h.html.HtmlSound(g))});f.addDisposingListener(g,"error",function(){h.html.HtmlAssetPackLoader._mediaElements.remove(i);var a=g.error.code;3==a||4==a?c.handleLoad(b,h.DummySound.getInstance()):c.handleError(b,"Failed to load audio: "+o.string(g.error.code))});f.addListener(g,"progress",function(){if(0<g.buffered.length&&0<g.duration){var a=g.buffered.end(0)/g.duration;c.handleProgress(b,a*b.bytes|0)}});g.src=a;g.load()}
break;case 2:this.sendRequest(a,b,"text",function(a){c.handleLoad(b,a)})}},__class__:h.html.HtmlAssetPackLoader});h.html.HtmlExternal=function(){};k["flambe.platform.html.HtmlExternal"]=h.html.HtmlExternal;h.html.HtmlExternal.__name__=["flambe","platform","html","HtmlExternal"];h.html.HtmlExternal.__interfaces__=[A.External];h.html.HtmlExternal.prototype={bind:function(a,b){x.window[a]=b},call:function(a,b){null==b&&(b=[]);return L.field(x.window,a).apply(null,b)},get_supported:function(){return!0},__class__:h.html.HtmlExternal};h.html.HtmlMouse=function(a,b){h.BasicMouse.call(this,a);this._canvas=b};k["flambe.platform.html.HtmlMouse"]=h.html.HtmlMouse;h.html.HtmlMouse.__name__=["flambe","platform","html","HtmlMouse"];h.html.HtmlMouse.__super__=h.BasicMouse;h.html.HtmlMouse.prototype=v(h.BasicMouse.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}
this._canvas.style.cursor=b;return h.BasicMouse.prototype.set_cursor.call(this,a)},__class__:h.html.HtmlMouse});h.html.HtmlSound=function(a){this.audioElement=a};k["flambe.platform.html.HtmlSound"]=h.html.HtmlSound;h.html.HtmlSound.__name__=["flambe","platform","html","HtmlSound"];h.html.HtmlSound.__interfaces__=[H.Sound];h.html.HtmlSound.prototype={get_duration:function(){return this.audioElement.duration},loop:function(a){null==a&&(a=1);return new h.html._HtmlSound.HtmlPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new h.html._HtmlSound.HtmlPlayback(this,a,!1)},__class__:h.html.HtmlSound};h.html._HtmlSound={};h.html._HtmlSound.HtmlPlayback=function(a,b,c){var d=this;this._sound=a;this._tickableAdded=!1;this._clonedElement=x.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new F.AnimatedFloat(b,function(){d.updateVolume()});this.updateVolume();this.playAudio()};k["flambe.platform.html._HtmlSound.HtmlPlayback"]=h.html._HtmlSound.HtmlPlayback;h.html._HtmlSound.HtmlPlayback.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];h.html._HtmlSound.HtmlPlayback.__interfaces__=[h.Tickable,H.Playback];h.html._HtmlSound.HtmlPlayback.prototype={updateVolume:function(){this._clonedElement.volume=y.volume._value*this.volume._value},playAudio:function(){var a=this;this._clonedElement.play();this._tickableAdded||(h.html.HtmlPlatform.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=y.volume.get_changed().connect(function(){a.updateVolume()}))},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return this._clonedElement.ended||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),!0):!1},get_position:function(){return this._clonedElement.currentTime},get_ended:function(){return this._clonedElement.ended},set_paused:function(a){this._clonedElement.paused!=a&&(a?this._clonedElement.pause():this.playAudio());return a},get_paused:function(){return this._clonedElement.paused},get_sound:function(){return this._sound},__class__:h.html._HtmlSound.HtmlPlayback};h.html.HtmlStage=function(a){var b=this;this._canvas=a;this.resize=new n.Signal0;this.scaleFactor=h.html.HtmlStage.computeScaleFactor();1!=this.scaleFactor&&(h.html.HtmlUtil.setVendorStyle(this._canvas,"transform-origin","top left"),h.html.HtmlUtil.setVendorStyle(this._canvas,"transform","scale("+1/this.scaleFactor+")"));h.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){h.html.HtmlUtil.callLater(r(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",r(this,this.onWindowResize),!1);this.onWindowResize();this.orientation=new n.Value(null);null!=window.orientation&&(window.addEventListener("orientationchange",r(this,this.onOrientationChange),!1),this.onOrientationChange());this.fullscreen=new n.Value(!1);h.html.HtmlUtil.addVendorListener(x.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};k["flambe.platform.html.HtmlStage"]=h.html.HtmlStage;h.html.HtmlStage.__name__=["flambe","platform","html","HtmlStage"];h.html.HtmlStage.__interfaces__=[p.Stage];h.html.HtmlStage.computeScaleFactor=function(){var a=window.devicePixelRatio;null==a&&(a=1);var b=x.document.createElement("canvas").getContext("2d"),b=h.html.HtmlUtil.loadExtension("backingStorePixelRatio",b).value;null==b&&(b=1);a/=b;b=screen.height;return 1136<a*screen.width||1136<a*b?1:a};h.html.HtmlStage.prototype={updateFullscreen:function(){this.fullscreen.set__(!0==h.html.HtmlUtil.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],x.document).value)},onOrientationChange:function(){this.orientation.set__(h.html.HtmlUtil.orientation(window.orientation))},hideMobileBrowser:function(){var a=this,b=x.document.documentElement.style;b.height=x.window.innerHeight+100+"px";b.width=x.window.innerWidth+"px";b.overflow="visible";h.html.HtmlUtil.callLater(function(){h.html.HtmlUtil.hideMobileBrowser();h.html.HtmlUtil.callLater(function(){b.height=x.window.innerHeight+"px";a.onWindowResize()},100)})},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c;this._canvas.height=d;this.resize.emit0();return!0},onWindowResize:function(){var a=this._canvas.parentNode.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},requestFullscreen:function(a){null==a&&(a=!0);if(a){var a=x.document.documentElement,b=h.html.HtmlUtil.loadFirstExtension(["requestFullscreen","requestFullScreen"],a).value;null!=b&&b.apply(a,[])}else a=h.html.HtmlUtil.loadFirstExtension(["cancelFullscreen","cancelFullScreen"],x.document).value,null!=a&&a.apply(x.document,[])},requestResize:function(a,b){if(this.resizeCanvas(a,b)){var c=this._canvas.parentNode;c.style.width=a+"px";c.style.height=b+"px"}},unlockOrientation:function(){},lockOrientation:function(){},get_fullscreenSupported:function(){return!0==h.html.HtmlUtil.loadFirstExtension(["fullscreenEnabled","fullScreenEnabled"],x.document).value},get_height:function(){return this._canvas.height},get_width:function(){return this._canvas.width},__class__:h.html.HtmlStage};h.html.HtmlStorage=function(a){this._storage=a};k["flambe.platform.html.HtmlStorage"]=h.html.HtmlStorage;h.html.HtmlStorage.__name__=["flambe","platform","html","HtmlStorage"];h.html.HtmlStorage.__interfaces__=[aa.Storage];h.html.HtmlStorage.prototype={clear:function(){try{this._storage.clear()}catch(a){null}},remove:function(a){try{this._storage.removeItem("flambe:"+a)}catch(b){null}},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){null}
if(null!=c)try{return P.run(c)}catch(f){null}
return b},set:function(a,b){var c;try{var d=new S;d.useCache=!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(f){return!1}
try{this._storage.setItem("flambe:"+a,c)}catch(g){return!1}
return!0},get_supported:function(){return!0},__class__:h.html.HtmlStorage};h.html.HtmlUtil=function(){};k["flambe.platform.html.HtmlUtil"]=h.html.HtmlUtil;h.html.HtmlUtil.__name__=["flambe","platform","html","HtmlUtil"];h.html.HtmlUtil.callLater=function(a,b){null==b&&(b=0);x.window.setTimeout(a,b)};h.html.HtmlUtil.hideMobileBrowser=function(){x.window.scrollTo(1,0)};h.html.HtmlUtil.loadExtension=function(a,b){null==b&&(b=x.window);var c=L.field(b,a);if(null!=c)return{prefix:null,field:a,value:c};for(var c=a.charAt(0).toUpperCase()+B.substr(a,1,null),d=0,f=h.html.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var g=f[d];++d;var i=g+c,j=L.field(b,i);if(null!=j)return{prefix:g,field:i,value:j}}
return{prefix:null,field:null,value:null}};h.html.HtmlUtil.loadFirstExtension=function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;d=h.html.HtmlUtil.loadExtension(d,b);if(null!=d.field)return d}
return{prefix:null,field:null,value:null}};h.html.HtmlUtil.polyfill=function(a,b){null==b&&(b=x.window);var c=h.html.HtmlUtil.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};h.html.HtmlUtil.setVendorStyle=function(a,b,c){for(var a=a.style,d=0,f=h.html.HtmlUtil.VENDOR_PREFIXES;d<f.length;){var g=f[d];++d;a.setProperty("-"+g+"-"+b,c)}
a.setProperty(b,c)};h.html.HtmlUtil.addVendorListener=function(a,b,c,d){for(var f=0,g=h.html.HtmlUtil.VENDOR_PREFIXES;f<g.length;){var i=g[f];++f;a.addEventListener(i+b,c,d)}
a.addEventListener(b,c,d)};h.html.HtmlUtil.orientation=function(a){switch(a){case-90:case 90:return p.Orientation.Landscape;default:return p.Orientation.Portrait}};h.html.HtmlUtil.createEmptyCanvas=function(a,b){var c=x.document.createElement("canvas");c.width=a;c.height=b;return c};h.html.HtmlUtil.createCanvas=function(a){var b=h.html.HtmlUtil.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};A={Web:function(){}};k["flambe.web.Web"]=A.Web;A.Web.__name__=["flambe","web","Web"];A.Web.prototype={__class__:A.Web};h.html.HtmlWeb=function(a){this._container=a};k["flambe.platform.html.HtmlWeb"]=h.html.HtmlWeb;h.html.HtmlWeb.__name__=["flambe","platform","html","HtmlWeb"];h.html.HtmlWeb.__interfaces__=[A.Web];h.html.HtmlWeb.prototype={openBrowser:function(a){x.window.open(a,"_blank")},createView:function(a,b,c,d){var f=x.document.createElement("iframe");f.style.position="absolute";f.style.border="0";f.scrolling="no";this._container.appendChild(f);a=new h.html.HtmlWebView(f,a,b,c,d);h.html.HtmlPlatform.instance.mainLoop.addTickable(a);return a},get_supported:function(){return!0},__class__:h.html.HtmlWeb};A.WebView=function(){};k["flambe.web.WebView"]=A.WebView;A.WebView.__name__=["flambe","web","WebView"];A.WebView.__interfaces__=[n.Disposable];A.WebView.prototype={__class__:A.WebView};h.html.HtmlWebView=function(a,b,c,d,f){var g=this;this.iframe=a;a=function(){g.updateBounds()};this.x=new F.AnimatedFloat(b,a);this.y=new F.AnimatedFloat(c,a);this.width=new F.AnimatedFloat(d,a);this.height=new F.AnimatedFloat(f,a);this.updateBounds();this.url=new n.Value(null,function(a){g.loadUrl(a)});this.error=new n.Signal1};k["flambe.platform.html.HtmlWebView"]=h.html.HtmlWebView;h.html.HtmlWebView.__name__=["flambe","platform","html","HtmlWebView"];h.html.HtmlWebView.__interfaces__=[h.Tickable,A.WebView];h.html.HtmlWebView.prototype={loadUrl:function(a){null!=this.iframe&&(this.iframe.src=a)},updateBounds:function(){null!=this.iframe&&(this.iframe.style.left=this.x._value+"px",this.iframe.style.top=this.y._value+"px",this.iframe.width=this.width._value,this.iframe.height=this.height._value)},update:function(a){this.x.update(a);this.y.update(a);this.width.update(a);this.height.update(a);return null==this.iframe},dispose:function(){null!=this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)},__class__:h.html.HtmlWebView};h.html.WebAudioSound=function(a){this.buffer=a};k["flambe.platform.html.WebAudioSound"]=h.html.WebAudioSound;h.html.WebAudioSound.__name__=["flambe","platform","html","WebAudioSound"];h.html.WebAudioSound.__interfaces__=[H.Sound];h.html.WebAudioSound.get_supported=function(){if(h.html.WebAudioSound._detectSupport){h.html.WebAudioSound._detectSupport=!1;var a=h.html.HtmlUtil.loadExtension("AudioContext").value;null!=a&&(h.html.WebAudioSound.ctx=new a,h.html.WebAudioSound.gain=(h.html.WebAudioSound.ctx.createGain)?h.html.WebAudioSound.ctx.createGain():h.html.WebAudioSound.ctx.createGainNode(),h.html.WebAudioSound.gain.connect(h.html.WebAudioSound.ctx.destination),y.volume.watch(function(a){h.html.WebAudioSound.gain.gain.value=a}))}
return null!=h.html.WebAudioSound.ctx};h.html.WebAudioSound.prototype={get_duration:function(){return this.buffer.duration},loop:function(a){null==a&&(a=1);return new h.html._WebAudioSound.WebAudioPlayback(this,a,!0)},play:function(a){null==a&&(a=1);return new h.html._WebAudioSound.WebAudioPlayback(this,a,!1)},__class__:h.html.WebAudioSound};h.html._WebAudioSound={};h.html._WebAudioSound.WebAudioPlayback=function(a,b,c){var d=this;this._sound=a;this._head=h.html.WebAudioSound.gain;this._sourceNode=h.html.WebAudioSound.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;(this._sourceNode.start)?this._sourceNode.start(0):this._sourceNode.noteOn(0);this.playAudio();this.volume=new F.AnimatedFloat(b,function(a){d.setVolume(a)});1!=b&&this.setVolume(b)};k["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=h.html._WebAudioSound.WebAudioPlayback;h.html._WebAudioSound.WebAudioPlayback.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];h.html._WebAudioSound.WebAudioPlayback.__interfaces__=[h.Tickable,H.Playback];h.html._WebAudioSound.WebAudioPlayback.prototype={playAudio:function(){this._sourceNode.connect(this._head);this._startedAt=h.html.WebAudioSound.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(this._tickableAdded=!0,h.html.HtmlPlatform.instance.mainLoop.addTickable(this))},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},setVolume:function(a){null==this._gainNode&&(this._gainNode=(h.html.WebAudioSound.ctx.createGain)?h.html.WebAudioSound.ctx.createGain():h.html.WebAudioSound.ctx.createGainNode(),this.insertNode(this._gainNode));this._gainNode.gain.value=a},dispose:function(){this.set_paused(!0)},update:function(a){this.volume.update(a);return 3==this._sourceNode.playbackState||0<=this._pausedAt?(this._tickableAdded=!1,!0):!1},get_position:function(){return 3==this._sourceNode.playbackState?this._sound.get_duration():0<=this._pausedAt?this._pausedAt:(h.html.WebAudioSound.ctx.currentTime-this._startedAt)%this._sound.get_duration()},get_ended:function(){return 3==this._sourceNode.playbackState},set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_paused:function(){return 0<=this._pausedAt},get_sound:function(){return this._sound},__class__:h.html._WebAudioSound.WebAudioPlayback};A={Director:function(){this._width=this._height=-1;this._transitor=null;this.scenes=[];this.occludedScenes=[];this._root=new N}};k["flambe.scene.Director"]=A.Director;A.Director.__name__=["flambe","scene","Director"];A.Director.__super__=O;A.Director.prototype=v(O.prototype,{get_height:function(){return 0>this._height?y._platform.getStage().get_height():this._height},get_width:function(){return 0>this._width?y._platform.getStage().get_width():this._width},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a],b=b._compMap.Scene_4;if(null==b||b.opaque)break}
this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,this.scenes.length-1):[];b=this.get_topScene();null!=b&&this.show(b)},show:function(a){a=a._compMap.Scene_4;null!=a&&a.shown.emit0()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}
this.scenes=[];this.occludedScenes=[];this._root.dispose()},onAdded:function(){this.owner.addChild(this._root)},get_name:function(){return "Director_0"},__class__:A.Director});A._Director={};A._Director.Transitor=function(){};k["flambe.scene._Director.Transitor"]=A._Director.Transitor;A._Director.Transitor.__name__=["flambe","scene","_Director","Transitor"];A._Director.Transitor.prototype={complete:function(){this._transition.complete();this._onComplete()},update:function(a){return this._transition.update(a)},__class__:A._Director.Transitor};A.Scene=function(a){null==a&&(a=!0);this.opaque=a;this.shown=new n.Signal0;this.hidden=new n.Signal0};k["flambe.scene.Scene"]=A.Scene;A.Scene.__name__=["flambe","scene","Scene"];A.Scene.__super__=O;A.Scene.prototype=v(O.prototype,{get_name:function(){return "Scene_4"},__class__:A.Scene});A.Transition=function(){};k["flambe.scene.Transition"]=A.Transition;A.Transition.__name__=["flambe","scene","Transition"];A.Transition.prototype={complete:function(){},update:function(){return!0},__class__:A.Transition};H._Mixer={};H._Mixer.MixerSound=function(a,b){this._source=a;this._channels=b;this._playbacks=[]};k["flambe.sound._Mixer.MixerSound"]=H._Mixer.MixerSound;H._Mixer.MixerSound.__name__=["flambe","sound","_Mixer","MixerSound"];H._Mixer.MixerSound.__interfaces__=[n.Disposable,H.Sound];H._Mixer.MixerSound.prototype={dispose:function(){for(var a=0,b=this._playbacks;a<b.length;){var c=b[a];++a;c.dispose()}
this._playbacks=[]},get_duration:function(){return this._source.get_duration()},findOpenChannel:function(){for(var a=0,b=this._channels;a<b;){var c=a++,d=this._playbacks[c];if(null==d||d.get_ended())return c}
return-1},playOrLoop:function(a,b){var c=this.findOpenChannel();if(0>c)return new h.DummyPlayback(this);var d=b?this._source.loop(a):this._source.play(a);return this._playbacks[c]=d},loop:function(a){null==a&&(a=1);return this.playOrLoop(a,!0)},play:function(a){null==a&&(a=1);return this.playOrLoop(a,!1)},__class__:H._Mixer.MixerSound};w={BitmapSprite:function(a){p.Sprite.call(this);this.symbol=a;this.anchorX.set__(a.anchorX);this.anchorY.set__(a.anchorY)}};k["flambe.swf.BitmapSprite"]=w.BitmapSprite;w.BitmapSprite.__name__=["flambe","swf","BitmapSprite"];w.BitmapSprite.__super__=p.Sprite;w.BitmapSprite.prototype=v(p.Sprite.prototype,{getNaturalHeight:function(){return this.symbol.height},getNaturalWidth:function(){return this.symbol.width},draw:function(a){a.drawSubImage(this.symbol.atlas,0,0,this.symbol.x,this.symbol.y,this.symbol.width,this.symbol.height)},__class__:w.BitmapSprite});w.Symbol=function(){};k["flambe.swf.Symbol"]=w.Symbol;w.Symbol.__name__=["flambe","swf","Symbol"];w.Symbol.prototype={__class__:w.Symbol};w.BitmapSymbol=function(a,b){this._name=a.symbol;this.atlas=b;var c=a.rect;this.x=c[0];this.y=c[1];this.width=c[2];this.height=c[3];c=a.origin;null!=c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};k["flambe.swf.BitmapSymbol"]=w.BitmapSymbol;w.BitmapSymbol.__name__=["flambe","swf","BitmapSymbol"];w.BitmapSymbol.__interfaces__=[w.Symbol];w.BitmapSymbol.prototype={get_name:function(){return this._name},createSprite:function(){return new w.BitmapSprite(this)},__class__:w.BitmapSymbol};w.Library=function(a,b){this._symbols=new G;var c=X.parse(a.getFile(b+"/library.json"));this.frameRate=c.frameRate;for(var d=[],f=0,g=c.movies;f<g.length;){var h=g[f];++f;h=new w.MovieSymbol(this,h);d.push(h);this._symbols.set(h.get_name(),h)}
f=c.textureGroups;(1!=f[0].scaleFactor||1<f.length)&&null;h=f[0].atlases;for(f=0;f<h.length;){c=h[f];++f;for(var i=a.getTexture(b+"/"+n.Strings.removeFileExtension(c.file)),g=0,c=c.textures;g<c.length;){var j=c[g];++g;j=new w.BitmapSymbol(j,i);this._symbols.set(j.get_name(),j)}}
for(f=0;f<d.length;){h=d[f];++f;g=0;for(c=h.layers;g<c.length;){h=c[g];++g;i=0;for(j=h.keyframes;i<j.length;){var l=j[i];++i;if(null!=l.symbolName){var k=this._symbols.get(l.symbolName);null==h.lastSymbol?h.lastSymbol=k:h.lastSymbol!=k&&(h.multipleSymbols=!0);l.symbol=k}}}}};k["flambe.swf.Library"]=w.Library;w.Library.__name__=["flambe","swf","Library"];w.Library.prototype={__class__:w.Library};w.MovieSprite=function(a){this._looped=null;p.Sprite.call(this);this.symbol=a;this.speed=new F.AnimatedFloat(1);this._animators=Array(a.layers.length);for(var b=0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new w._MovieSprite.LayerAnimator(a.layers[d])}
this._position=this._frame=0;this["goto"](1)};k["flambe.swf.MovieSprite"]=w.MovieSprite;w.MovieSprite.__name__=["flambe","swf","MovieSprite"];w.MovieSprite.__super__=p.Sprite;w.MovieSprite.prototype=v(p.Sprite.prototype,{get_looped:function(){null==this._looped&&(this._looped=new n.Signal0);return this._looped},set_paused:function(a){this._flags=n.BitSets.set(this._flags,16,a);return a},set_position:function(a){return this._position=I.FMath.clamp(a,0,this.symbol.duration)},"goto":function(a){if(this._frame!=a){if(a<this._frame)
for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.changedKeyframe=!0;d.keyframeIdx=0}
b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},onUpdate:function(a){p.Sprite.prototype.onUpdate.call(this,a);this.speed.update(a);var b=!1;0==(this._flags&16)&&(this._position+=this.speed._value*a,this._position>this.symbol.duration&&(this._position%=this.symbol.duration,b=!0));this["goto"](this._position*this.symbol.frameRate);b&&null!=this._looped&&this._looped.emit0()},onRemoved:function(){p.Sprite.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onAdded:function(){p.Sprite.prototype.onAdded.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},__class__:w.MovieSprite});w._MovieSprite={};w._MovieSprite.LayerAnimator=function(a){this._sprites=null;this.changedKeyframe=!1;this.keyframeIdx=0;this.layer=a;if(a.multipleSymbols){this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=b++,f=a.keyframes[d];this._sprites[d]=null!=f.symbol?f.symbol.createSprite():new p.Sprite}
a=this._sprites[0]}else a=null!=a.lastSymbol?a.lastSymbol.createSprite():new p.Sprite;this.content=(new N).add(a)};k["flambe.swf._MovieSprite.LayerAnimator"]=w._MovieSprite.LayerAnimator;w._MovieSprite.LayerAnimator.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];w._MovieSprite.LayerAnimator.prototype={composeFrame:function(a){for(var b=this.layer.keyframes,c=b.length-1;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.changedKeyframe=!0;var d;this.changedKeyframe&&null!=this._sprites?(d=this._sprites[this.keyframeIdx],this.content.add(d)):d=this.content._compMap.Sprite_1;this.changedKeyframe=!1;var f=b[this.keyframeIdx],g=f.visible&&null!=f.symbol;d.set_visible(g);if(g){var g=f.x,h=f.y,i=f.scaleX,j=f.scaleY,l=f.skewX,k=f.skewY,m=f.alpha;if(f.tweened&&this.keyframeIdx<c){a=(a-f.index)/f.duration;c=f.ease;if(0!=c){var n;0>c?(n=1-a,n=1-n*n,c=-c):n=a*a;a=c*n+(1-c)*a}
b=b[this.keyframeIdx+1];g+=(b.x-g)*a;h+=(b.y-h)*a;i+=(b.scaleX-i)*a;j+=(b.scaleY-j)*a;l+=(b.skewX-l)*a;k+=(b.skewY-k)*a;m+=(b.alpha-m)*a}
b=d.getLocalMatrix();a=Math.sin(l);l=Math.cos(l);c=Math.sin(k);k=Math.cos(k);b.set(k*i,c*i,-a*j,l*j,g,h);b.translate(-f.pivotX,-f.pivotY);d.alpha.set__(m)}},__class__:w._MovieSprite.LayerAnimator};w.MovieSymbol=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var f=c++,g=new w.MovieLayer(b.layers[f]);this.frames=Math.max(g.get_frames(),this.frames);this.layers[f]=g}
this.duration=this.frames/this.frameRate};k["flambe.swf.MovieSymbol"]=w.MovieSymbol;w.MovieSymbol.__name__=["flambe","swf","MovieSymbol"];w.MovieSymbol.__interfaces__=[w.Symbol];w.MovieSymbol.prototype={createSprite:function(){return new w.MovieSprite(this)},get_name:function(){return this._name},__class__:w.MovieSymbol};w.MovieLayer=function(a){this.multipleSymbols=!1;this.lastSymbol=null;this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var f=c++,b=new w.MovieKeyframe(a.keyframes[f],b);this.keyframes[f]=b}};k["flambe.swf.MovieLayer"]=w.MovieLayer;w.MovieLayer.__name__=["flambe","swf","MovieLayer"];w.MovieLayer.prototype={get_frames:function(){var a=this.keyframes[this.keyframes.length-1];return a.index+(a.duration|0)},__class__:w.MovieLayer};w.MovieKeyframe=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};k["flambe.swf.MovieKeyframe"]=w.MovieKeyframe;w.MovieKeyframe.__name__=["flambe","swf","MovieKeyframe"];w.MovieKeyframe.prototype={__class__:w.MovieKeyframe};n.Arrays=function(){};k["flambe.util.Arrays"]=n.Arrays;n.Arrays.__name__=["flambe","util","Arrays"];n.Assert=function(){};k["flambe.util.Assert"]=n.Assert;n.Assert.__name__=["flambe","util","Assert"];n.BitSets=function(){};k["flambe.util.BitSets"]=n.BitSets;n.BitSets.__name__=["flambe","util","BitSets"];n.BitSets.set=function(a,b,c){return c?a|b:a&~b};n.LogHandler=function(){};k["flambe.util.LogHandler"]=n.LogHandler;n.LogHandler.__name__=["flambe","util","LogHandler"];n.LogHandler.prototype={__class__:n.LogHandler};n.Promise=function(){this.success=new n.Signal1;this.error=new n.Signal1;this.progressChanged=new n.Signal0;this.hasResult=!1;this._total=this._progress=0};k["flambe.util.Promise"]=n.Promise;n.Promise.__name__=["flambe","util","Promise"];n.Promise.prototype={set_total:function(a){this._total!=a&&(this._total=a,this.progressChanged.emit0());return a},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit0());return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_result:function(a){if(this.hasResult)throw "Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit1(a);return a},get_result:function(){if(!this.hasResult)throw "Promise result not yet available";return this._result},__class__:n.Promise};n.Signal0=function(a){n.SignalBase.call(this,a)};k["flambe.util.Signal0"]=n.Signal0;n.Signal0.__name__=["flambe","util","Signal0"];n.Signal0.__super__=n.SignalBase;n.Signal0.prototype=v(n.SignalBase.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},__class__:n.Signal0});n._SignalBase={};n._SignalBase.Task=function(a){this.next=null;this.fn=a};k["flambe.util._SignalBase.Task"]=n._SignalBase.Task;n._SignalBase.Task.__name__=["flambe","util","_SignalBase","Task"];n._SignalBase.Task.prototype={__class__:n._SignalBase.Task};C=void 0;T=void 0;P=void 0;S=void 0;U=void 0;X=void 0;X=function(){};k["haxe.Json"]=X;X.__name__=["haxe","Json"];X.parse=function(a){return(new X).doParse(a)};X.prototype={parseString:function(){for(var a=this.pos,b=new Z;;){var c=this.str.charCodeAt(this.pos++);if(34==c)break;if(92==c){b.b+=B.substr(this.str,a,this.pos-a-1);c=this.str.charCodeAt(this.pos++);switch(c){case 114:b.b+=String.fromCharCode(13);break;case 110:b.b+=String.fromCharCode(10);break;case 116:b.b+=String.fromCharCode(9);break;case 98:b.b+=String.fromCharCode(8);break;case 102:b.b+=String.fromCharCode(12);break;case 47:case 92:case 34:b.b+=String.fromCharCode(c);break;case 117:a=o.parseInt("0x"+
B.substr(this.str,this.pos,4));this.pos+=4;b.b+=String.fromCharCode(a);break;default:throw "Invalid escape sequence \\"+String.fromCharCode(c)+" at position "+(this.pos-1);}
a=this.pos}else if(c!=c)throw "Unclosed string";}
b.b+=B.substr(this.str,a,this.pos-a-1);return b.b},parseRec:function(){for(;;)switch(this.str.charCodeAt(this.pos++)){case 32:case 13:case 10:case 9:break;case 123:for(var a={},b=null,c=null;;){var d=this.str.charCodeAt(this.pos++);switch(d){case 32:case 13:case 10:case 9:break;case 125:return(null!=b||!1==c)&&this.invalidChar(),a;case 58:null==b&&this.invalidChar();a[b]=this.parseRec();b=null;c=!0;break;case 44:c?c=!1:this.invalidChar();break;case 34:c&&this.invalidChar();b=this.parseString();break;default:this.invalidChar()}}
break;case 91:a=[];for(c=null;;)switch(d=this.str.charCodeAt(this.pos++),d){case 32:case 13:case 10:case 9:break;case 93:return!1==c&&this.invalidChar(),a;case 44:c?c=!1:this.invalidChar();break;default:c&&this.invalidChar(),this.pos--,a.push(this.parseRec()),c=!0}
break;case 116:c=this.pos;if(114!=this.str.charCodeAt(this.pos++)||117!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!0;case 102:c=this.pos;if(97!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||115!=this.str.charCodeAt(this.pos++)||101!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return!1;case 110:c=this.pos;if(117!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++)||108!=this.str.charCodeAt(this.pos++))this.pos=c,this.invalidChar();return null;case 34:return this.parseString();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 45:this.pos--;if(!this.reg_float.match(B.substr(this.str,this.pos,null)))throw "Invalid float at position "+this.pos;c=this.reg_float.matched(0);this.pos+=c.length;c=o.parseFloat(c);d=c|0;return d==c?d:c;default:this.invalidChar()}},invalidChar:function(){this.pos--;throw "Invalid char "+this.str.charCodeAt(this.pos)+" at position "+this.pos;},doParse:function(a){this.reg_float=new W("^-?(0|[1-9][0-9]*)(\\.[0-9]+)?([eE][+-]?[0-9]+)?","");this.str=a;this.pos=0;return this.parseRec()},__class__:X};S=function(){this.buf=new Z;this.cache=[];this.useCache=S.USE_CACHE;this.useEnumIndex=S.USE_ENUM_INDEX;this.shash=new G;this.scount=0};k["haxe.Serializer"]=S;S.__name__=["haxe","Serializer"];S.run=function(a){var b=new S;b.serialize(a);return b.toString()};S.prototype={serialize:function(a){var b=M["typeof"](a);switch(b[1]){case 0:this.buf.b+=o.string("n");break;case 1:if(0==a){this.buf.b+=o.string("z");break}
this.buf.b+=o.string("i");this.buf.b+=o.string(a);break;case 2:Math.isNaN(a)?this.buf.b+=o.string("k"):Math.isFinite(a)?(this.buf.b+=o.string("d"),this.buf.b+=o.string(a)):this.buf.b+=o.string(0>a?"m":"p");break;case 3:this.buf.b+=o.string(a?"t":"f");break;case 6:b=b[2];if(b==String){this.serializeString(a);break}
if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:var c=0;this.buf.b+=o.string("a");for(var d=a.length,f=0;f<d;)b=f++,null==a[b]?c++:(0<c&&(1==c?this.buf.b+=o.string("n"):(this.buf.b+=o.string("u"),this.buf.b+=o.string(c)),c=0),this.serialize(a[b]));0<c&&(1==c?this.buf.b+=o.string("n"):(this.buf.b+=o.string("u"),this.buf.b+=o.string(c)));this.buf.b+=o.string("h");break;case da:this.buf.b+=o.string("l");for(a=a.iterator();a.hasNext();)b=a.next(),this.serialize(b);this.buf.b+=o.string("h");break;case Date:this.buf.b+=o.string("v");this.buf.b+=o.string(B.dateStr(a));break;case G:this.buf.b+=o.string("b");for(c=a.keys();c.hasNext();)b=c.next(),this.serializeString(b),this.serialize(a.get(b));this.buf.b+=o.string("h");break;case V:this.buf.b+=o.string("q");for(c=a.keys();c.hasNext();)b=c.next(),this.buf.b+=o.string(":"),this.buf.b+=o.string(b),this.serialize(a.get(b));this.buf.b+=o.string("h");break;case U.Bytes:b=0;c=a.length-2;d=new Z;for(f=S.BASE64;b<c;){var g=a.b[b++],h=a.b[b++],i=a.b[b++];d.b+=o.string(f.charAt(g>>2));d.b+=o.string(f.charAt((g<<4|h>>4)&63));d.b+=o.string(f.charAt((h<<2|i>>6)&63));d.b+=o.string(f.charAt(i&63))}
b==c?(g=a.b[b++],h=a.b[b++],d.b+=o.string(f.charAt(g>>2)),d.b+=o.string(f.charAt((g<<4|h>>4)&63)),d.b+=o.string(f.charAt(h<<2&63))):b==c+1&&(g=a.b[b++],d.b+=o.string(f.charAt(g>>2)),d.b+=o.string(f.charAt(g<<4&63)));b=d.b;this.buf.b+=o.string("s");this.buf.b+=o.string(b.length);this.buf.b+=o.string(":");this.buf.b+=o.string(b);break;default:this.cache.pop(),null!=a.hxSerialize?(this.buf.b+=o.string("C"),this.serializeString(M.getClassName(b)),this.cache.push(a),a.hxSerialize(this),this.buf.b+=o.string("g")):(this.buf.b+=o.string("c"),this.serializeString(M.getClassName(b)),this.cache.push(a),this.serializeFields(a))}
break;case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+=o.string("o");this.serializeFields(a);break;case 7:b=b[2];if(this.useCache&&this.serializeRef(a))break;this.cache.pop();this.buf.b+=o.string(this.useEnumIndex?"j":"w");this.serializeString(M.getEnumName(b));this.useEnumIndex?(this.buf.b+=o.string(":"),this.buf.b+=o.string(a[1])):this.serializeString(a[0]);this.buf.b+=o.string(":");d=a.length;this.buf.b+=o.string(d-2);for(f=2;f<d;)b=f++,this.serialize(a[b]);this.cache.push(a);break;case 5:throw "Cannot serialize function";default:throw "Cannot serialize "+o.string(a);}},serializeFields:function(a){for(var b=0,c=L.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(L.field(a,d))}
this.buf.b+=o.string("g")},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var f=c++,g=this.cache[f];if(typeof g==b&&g==a)return this.buf.b+=o.string("r"),this.buf.b+=o.string(f),!0}
this.cache.push(a);return!1},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+=o.string("R"),this.buf.b+=o.string(b)):(this.shash.set(a,this.scount++),this.buf.b+=o.string("y"),a=Q.urlEncode(a),this.buf.b+=o.string(a.length),this.buf.b+=o.string(":"),this.buf.b+=o.string(a))},toString:function(){return this.buf.b},__class__:S};T=function(a){var b=this;this.id=window.setInterval(function(){b.run()},a)};k["haxe.Timer"]=T;T.__name__=["haxe","Timer"];T.delay=function(a,b){var c=new T(b);c.run=function(){c.stop();a()};return c};T.prototype={run:function(){},stop:function(){null!=this.id&&(window.clearInterval(this.id),this.id=null)},__class__:T};P=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=[];this.cache=[];a=P.DEFAULT_RESOLVER;null==a&&(a=M,P.DEFAULT_RESOLVER=a);this.setResolver(a)};k["haxe.Unserializer"]=P;P.__name__=["haxe","Unserializer"];P.initCodes=function(){for(var a=[],b=0,c=P.BASE64.length;b<c;){var d=b++;a[P.BASE64.charCodeAt(d)]=d}
return a};P.run=function(a){return(new P(a)).unserialize()};P.prototype={unserialize:function(){switch(this.buf.charCodeAt(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}
return o.parseFloat(B.substr(this.buf,a,this.pos-a));case 121:b=this.readDigits();if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw "Invalid string length";a=B.substr(this.buf,this.pos,b);this.pos+=b;a=Q.urlDecode(a);this.scache.push(a);return a;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:var c=this.buf,a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}
117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}
return a;case 111:return b={},this.cache.push(b),this.unserializeObject(b),b;case 114:b=this.readDigits();if(0>b||b>=this.cache.length)throw "Invalid reference";return this.cache[b];case 82:b=this.readDigits();if(0>b||b>=this.scache.length)throw "Invalid string reference";return this.scache[b];case 120:throw this.unserialize();case 99:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw "Class not found "+b;b=M.createEmptyInstance(a);this.cache.push(b);this.unserializeObject(b);return b;case 119:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw "Enum not found "+b;b=this.unserializeEnum(a,this.unserialize());this.cache.push(b);return b;case 106:b=this.unserialize();a=this.resolver.resolveEnum(b);if(null==a)throw "Enum not found "+b;this.pos++;var c=this.readDigits(),d=M.getEnumConstructs(a)[c];if(null==d)throw "Unknown enum index "+b+"@"+c;b=this.unserializeEnum(a,d);this.cache.push(b);return b;case 108:b=new da;for(this.cache.push(b);104!=this.buf.charCodeAt(this.pos);)b.add(this.unserialize());this.pos++;return b;case 98:c=new G;for(this.cache.push(c);104!=this.buf.charCodeAt(this.pos);)a=this.unserialize(),c.set(a,this.unserialize());this.pos++;return c;case 113:c=new V;this.cache.push(c);for(b=this.buf.charCodeAt(this.pos++);58==b;)a=this.readDigits(),c.set(a,this.unserialize()),b=this.buf.charCodeAt(this.pos++);if(104!=b)throw "Invalid IntHash format";return c;case 118:return b=B.strDate(B.substr(this.buf,this.pos,19)),this.cache.push(b),this.pos+=19,b;case 115:b=this.readDigits();c=this.buf;if(58!=this.buf.charCodeAt(this.pos++)||this.length-this.pos<b)throw "Invalid bytes length";d=P.CODES;null==d&&(d=P.initCodes(),P.CODES=d);for(var a=this.pos,f=b&3,g=a+(b-f),h=U.Bytes.alloc(3*(b>>2)+(2<=f?f-1:0)),i=0;a<g;){var j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)];h.b[i++]=(j<<2|l>>4)&255;j=d[c.charCodeAt(a++)];h.b[i++]=(l<<4|j>>2)&255;l=d[c.charCodeAt(a++)];h.b[i++]=(j<<6|l)&255}
2<=f&&(j=d[c.charCodeAt(a++)],l=d[c.charCodeAt(a++)],h.b[i++]=(j<<2|l>>4)&255,3==f&&(j=d[c.charCodeAt(a++)],h.b[i++]=(l<<4|j>>2)&255));this.pos+=b;this.cache.push(h);return h;case 67:b=this.unserialize();a=this.resolver.resolveClass(b);if(null==a)throw "Class not found "+b;b=M.createEmptyInstance(a);this.cache.push(b);b.hxUnserialize(this);if(103!=this.buf.charCodeAt(this.pos++))throw "Invalid custom data";return b}
this.pos--;throw "Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},unserializeEnum:function(a,b){if(58!=this.buf.charCodeAt(this.pos++))throw "Invalid enum format";var c=this.readDigits();if(0==c)return M.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return M.createEnum(a,b,d)},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw "Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if(!K.__instanceof(b,String))throw "Invalid object key";var c=this.unserialize();a[b]=c}
this.pos++},readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}
this.pos++}
b&&(a*=-1);return a},setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},__class__:P};U={Bytes:function(a,b){this.length=a;this.b=b}};k["haxe.io.Bytes"]=U.Bytes;U.Bytes.__name__=["haxe","io","Bytes"];U.Bytes.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new U.Bytes(a,b)};U.Bytes.ofData=function(a){return new U.Bytes(a.length,a)};U.Bytes.prototype={__class__:U.Bytes};C={_Fast:{}};C._Fast.NodeAccess=function(a){this.__x=a};k["haxe.xml._Fast.NodeAccess"]=C._Fast.NodeAccess;C._Fast.NodeAccess.__name__=["haxe","xml","_Fast","NodeAccess"];C._Fast.NodeAccess.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==t.Document?"Document":this.__x.getNodeName())+" is missing element "+a;return new C.Fast(b)},__class__:C._Fast.NodeAccess};C._Fast.AttribAccess=function(a){this.__x=a};k["haxe.xml._Fast.AttribAccess"]=C._Fast.AttribAccess;C._Fast.AttribAccess.__name__=["haxe","xml","_Fast","AttribAccess"];C._Fast.AttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==t.Document)throw "Cannot access document attribute "+a;var b=this.__x.get(a);if(null==b)throw this.__x.getNodeName()+" is missing attribute "+a;return b},__class__:C._Fast.AttribAccess};C._Fast.HasAttribAccess=function(a){this.__x=a};k["haxe.xml._Fast.HasAttribAccess"]=C._Fast.HasAttribAccess;C._Fast.HasAttribAccess.__name__=["haxe","xml","_Fast","HasAttribAccess"];C._Fast.HasAttribAccess.prototype={resolve:function(a){if(this.__x.nodeType==t.Document)throw "Cannot access document attribute "+
a;return this.__x.exists(a)},__class__:C._Fast.HasAttribAccess};C._Fast.HasNodeAccess=function(a){this.__x=a};k["haxe.xml._Fast.HasNodeAccess"]=C._Fast.HasNodeAccess;C._Fast.HasNodeAccess.__name__=["haxe","xml","_Fast","HasNodeAccess"];C._Fast.HasNodeAccess.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},__class__:C._Fast.HasNodeAccess};C._Fast.NodeListAccess=function(a){this.__x=a};k["haxe.xml._Fast.NodeListAccess"]=C._Fast.NodeListAccess;C._Fast.NodeListAccess.__name__=["haxe","xml","_Fast","NodeListAccess"];C._Fast.NodeListAccess.prototype={resolve:function(a){for(var b=new da,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new C.Fast(c))}
return b},__class__:C._Fast.NodeListAccess};C.Fast=function(a){if(a.nodeType!=t.Document&&a.nodeType!=t.Element)throw "Invalid nodeType "+o.string(a.nodeType);this.x=a;this.node=new C._Fast.NodeAccess(a);this.nodes=new C._Fast.NodeListAccess(a);this.att=new C._Fast.AttribAccess(a);this.has=new C._Fast.HasAttribAccess(a);this.hasNode=new C._Fast.HasNodeAccess(a)};k["haxe.xml.Fast"]=C.Fast;C.Fast.__name__=["haxe","xml","Fast"];C.Fast.prototype={getElements:function(){var a=this.x.elements();return{hasNext:r(a,a.hasNext),next:function(){var b=a.next();return null==b?null:new C.Fast(b)}}},getInnerHTML:function(){for(var a=new Z,b=this.x.iterator();b.hasNext();){var c=b.next();a.b+=o.string(c.toString())}
return a.b},getInnerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.getName()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==t.PCData&&c.nodeType==t.CData&&""==Q.trim(b.getNodeValue())&&(b=a.next(),null==b||b.nodeType==t.PCData&&""==Q.trim(b.getNodeValue())&&null==a.next()))return c.getNodeValue();throw this.getName()+" does not only have data";}
if(b.nodeType!=t.PCData&&b.nodeType!=t.CData)throw this.getName()+" does not have data";return b.getNodeValue()},getName:function(){return this.x.nodeType==t.Document?"Document":this.x.getNodeName()},__class__:C.Fast};C.Parser=function(){};k["haxe.xml.Parser"]=C.Parser;C.Parser.__name__=["haxe","xml","Parser"];C.Parser.parse=function(a){var b=t.createDocument();C.Parser.doParse(a,0,b);return b};C.Parser.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,f=1,g=1,h=null,i=0,j=0,l=0,k=a.charCodeAt(b);k==k;){switch(f){case 0:switch(k){case 10:case 13:case 9:case 32:break;default:f=g;continue}
break;case 1:switch(k){case 60:f=0;g=2;break;default:i=b;f=13;continue}
break;case 13:60==k&&(f=t.createPCData(B.substr(a,i,b-i)),c.addChild(f),j++,f=0,g=2);break;case 17:93==k&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(f=t.createCData(B.substr(a,i,b-i)),c.addChild(f),j++,b+=2,f=1);break;case 2:switch(k){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=B.substr(a,b,6).toUpperCase())throw "Expected <![CDATA[";b+=5;f=17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=B.substr(a,b+2,6).toUpperCase())throw "Expected <!DOCTYPE";b+=8;f=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw "Expected <\!--";b+=2;f=15}
i=b+1;break;case 63:f=14;i=b;break;case 47:if(null==c)throw "Expected node name";i=b+1;f=0;g=10;break;default:f=3;i=b;continue}
break;case 3:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(b==i)throw "Expected node name";d=t.createElement(B.substr(a,i,b-i));c.addChild(d);f=0;g=4;continue}
break;case 4:switch(k){case 47:f=11;j++;break;case 62:f=9;j++;break;default:f=5;i=b;continue}
break;case 5:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==b)throw "Expected attribute name";h=B.substr(a,i,b-i);if(d.exists(h))throw "Duplicate attribute";f=0;g=6;continue}
break;case 6:switch(k){case 61:f=0;g=7;break;default:throw "Expected =";}
break;case 7:switch(k){case 34:case 39:f=8;i=b;break;default:throw 'Expected "';}
break;case 8:k==a.charCodeAt(i)&&(g=B.substr(a,i+1,b-i-1),d.set(h,g),f=0,g=4);break;case 9:i=b=C.Parser.doParse(a,b,d);f=1;break;case 11:switch(k){case 62:f=1;break;default:throw "Expected >";}
break;case 12:switch(k){case 62:return 0==j&&c.addChild(t.createPCData("")),b;default:throw "Expected >";}
case 10:if(!(97<=k&&122>=k||65<=k&&90>=k||48<=k&&57>=k||58==k||46==k||95==k||45==k)){if(i==b)throw "Expected node name";if(B.substr(a,i,b-i)!=c.getNodeName())throw "Expected </"+c.getNodeName()+">";f=0;g=12;continue}
break;case 15:45==k&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(t.createComment(B.substr(a,i,b-i))),b+=2,f=1);break;case 16:91==k?l++:93==k?l--:62==k&&0==l&&(c.addChild(t.createDocType(B.substr(a,i,b-i))),f=1);break;case 14:63==k&&62==a.charCodeAt(b+1)&&(b++,f=B.substr(a,i+1,b-i-2),c.addChild(t.createProlog(f)),f=1)}
k=a.charCodeAt(++b)}
1==f&&(i=b,f=13);if(13==f)return(b!=i||0==j)&&c.addChild(t.createPCData(B.substr(a,i,b-i))),b;throw "Unexpected end";};Array.prototype.indexOf?B.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0}:null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;k.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=k.String=String;String.__name__=["String"];Array.prototype.__class__=k.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=k.Date=Date;Date.__name__=["Date"];var ha=k.Int={__name__:["Int"]},ia=k.Dynamic={__name__:["Dynamic"]},fa=k.Float=Number;fa.__name__=["Float"];var ga=k.Bool=Boolean;ga.__ename__=["Bool"];var ja=k.Class={__name__:["Class"]},ka={};t.Element="element";t.PCData="pcdata";t.CData="cdata";t.Comment="comment";t.DocType="doctype";t.Prolog="prolog";t.Document="document";"undefined"!=typeof document&&(x.document=document);"undefined"!=typeof window&&(x.window=window,x.window.onerror=function(a,b,c){var d=x.onerror;return null==d?!1:d(a,[b+":"+c])});"undefined"!=typeof JSON&&(X=JSON);c.ConstantsApp.OPTION_SILENCE_AUDIO=!1;c.ConstantsApp.LOAD_FONT_EARLY=!0;c.ConstantsApp.STAGE_WIDTH=960;c.ConstantsApp.STAGE_HEIGHT=560;c.ConstantsApp.STAGE_CENTER_X=480;c.ConstantsApp.STAGE_CENTER_Y=280;c.ConstantsApp.NUMBER_OF_PIECES=7;c.ConstantsApp.DIRECTION_SOUTH=2;c.ConstantsApp.LAYER_BG="layer_bg";c.ConstantsApp.LAYER_PLAYER="layer_player";c.ConstantsApp.LAYER_FORTRESS="layer_fortress";c.ConstantsApp.LAYER_FORTRESS_FG="layer_fortress_fg";c.ConstantsApp.LAYER_BLOCKER="layer_blocker";c.ConstantsApp.LAYER_ENEMY="layer_enemy";c.ConstantsApp.LAYER_FG="layer_fg";c.ConstantsApp.LAYER_HUD="layer_hud";c.ConstantsApp.EVENT_GAME_OVER="EVENT_GAME_OVER";c.ConstantsApp.EVENT_PAUSE="eventPause";c.ConstantsApp.EVENT_UNPAUSE="eventUnpause";c.ConstantsApp.EVENT_MUTE_TOGGLE="EVENT_MUTE_TOGGLE";c.ConstantsApp.EVENT_WORLD_GENERATION_COMPLETE="EVENT_WORLD_GENERATION_COMPLETE";c.ConstantsApp.EVENT_SPAWN_NEW_PIECE="EVENT_SPAWN_NEW_PIECE";c.ConstantsApp.EVENT_CHANGE_LAYER="EVENT_CHANGE_LAYER";c.ConstantsApp.EVENT_SPAWN_RANDOM_ENEMY="EVENT_SPAWN_RANDOM_ENEMY";c.ConstantsApp.EVENT_ENEMY_WAVES_MODE="EVENT_ENEMY_WAVES_MODE";c.ConstantsApp.EVENT_BUILDING_MODE="EVENT_BUILDING_MODE";c.ConstantsApp.EVENT_SPAWN_CRUMBLE_EFFECT="EVENT_SPAWN_CRUMBLE_EFFECT";c.ConstantsApp.EVENT_SPAWN_PARTICLE="EVENT_SPAWN_PARTICLE";c.ConstantsApp.EVENT_INSTANCE_UPDATE="EVENT_INSTANCE_UPDATE";c.ConstantsApp.EVENT_SHOW_LEVEL="EVENT_SHOW_LEVEL";c.ConstantsApp.EVENT_SPAWN_PATRICK="EVENT_SPAWN_PATRICK";c.ConstantsApp.EVENT_KILL_ALL="EVENT_KILL_ALL";c.ConstantsApp.EVENT_SB_STATE="EVENT_SB_STATE";c.ConstantsApp.EVENT_MOBILE_KEY_INPUT="EVENT_MOBILE_KEY_INPUT";c.ConstantsApp.EVENT_SCREEN_TRANSITION_COMPLETE="EVENT_SCREEN_TRANSITION_COMPLETE";c.ConstantsApp.EVENT_SPAWN_SPECIAL="EVENT_SPAWN_SPECIAL";c.ConstantsApp.EVENT_ADD_TIMER="EVENT_ADD_TIMER";c.ConstantsApp.EVENT_STOP_DRAGGING="EVENT_STOP_DRAGGING";c.ConstantsApp.EVENT_PLANKTON_DEACTIVATE="EVENT_PLANKTON_DEACTIVATE";c.ConstantsApp.BOOL_GAME_LOSE="bool_game_lose";c.ConstantsApp.BOOL_GAME_WIN="bool_game_win";c.ConstantsApp.BOOL_LEVEL_LOSE="bool_level_lose";c.ConstantsApp.BOOL_LEVEL_WIN="bool_level_win";c.ConstantsApp.BOOL_GAMEOVER="bool_gameover";c.ConstantsApp.BOOL_PAUSED="bool_paused";c.ConstantsApp.BOOL_MUTED="bool_muted";c.ConstantsApp.BOOL_INPUT_LOCK="bool_inputlock";c.ConstantsApp.BOOL_TOUCH_DEVICE="bool_touch_device";c.ConstantsApp.BOOL_ORIENTATION_ALERT="bool_orientation_alert";c.ConstantsApp.BOOL_HAS_PATRICK_BLOCK="bool_has_patrick_block";c.ConstantsApp.BOOL_BUILDING_MODE="bool_building_mode";c.ConstantsApp.INT_HEALTH="int_health";c.ConstantsApp.INT_LIVES="int_lives";c.ConstantsApp.INT_SCORE="int_score";c.ConstantsApp.INT_LEVEL="int_level";c.ConstantsApp.INT_LOADING_PROGRESS="int_loading_progress";c.ConstantsApp.INT_POOL_PROGRESS="int_pool_progress";c.ConstantsApp.INPUT_CLICK="input_click";c.ConstantsApp.INPUT_SPACE="input_space";c.ConstantsApp.INPUT_Z="input_z";c.ConstantsApp.INPUT_X="input_x";c.ConstantsApp.INPUT_C="input_c";c.ConstantsApp.INPUT_P="input_p";c.ConstantsApp.INPUT_UP="input_up";c.ConstantsApp.INPUT_DOWN="input_down";c.ConstantsApp.INPUT_LEFT="input_left";c.ConstantsApp.INPUT_RIGHT="input_right";c.ConstantsApp.CONFIG_XML_PATH="config/config.xml";c.ConstantsApp.scaleFactor=1;c.ConstantsApp.GRID_ROW=8;c.ConstantsApp.GRID_COL=12;c.ConstantsApp.BLOCK_SIZE=40;c.ConstantsApp.TYPE_PARTICLE="TYPE_PARTICLE";c.ConstantsApp.TYPE_ENEMY="TYPE_ENEMY";c.ConstantsApp.TYPE_SPECIAL="TYPE_SPECIAL";c.ConstantsApp.PARTICLE_BLOCK="particle_0";c.ConstantsApp.PARTICLE_BLOCK_CHUNK="particle_chunk_0";c.ConstantsScreen.SCREEN_LOADING="loadpanel";c.ConstantsScreen.SCREEN_LOADING_OVERLAY="loadoverlay";c.ConstantsScreen.SCREEN_SPLASH="splash";c.ConstantsScreen.SCREEN_HELP="help";c.ConstantsScreen.SCREEN_GAMEPLAY_HUD="gameplayhud";c.ConstantsScreen.SCREEN_GAMEPLAY_MENU="gameplaymenu";c.ConstantsScreen.SCREEN_QUIT_CONFIRM="quitconfirm";c.ConstantsScreen.SCREEN_END_GAME="endgame";c.ConstantsScreen.SCREEN_CUTSCENE_BORDERS="cutsceneborders";c.ConstantsScreen.SCREEN_PAUSE_ALERT="pause";c.ConstantsScreen.SCREEN_TUTORIAL="tutorial";c.ConstantsScreen.TRANSITION_FADE=0;c.ConstantsScreen.TRANSITION_SCROLL=1;c.ConstantsScreen.TRANSITION_SCROLL_DOWN=2;c.ConstantsScreen.TRANSITION_SCROLL_UP=3;c.ConstantsScreen.TRANSITION_STAGED=4;c.ConstantsScreen.TRANSITION_SCREENSHOT=5;c.ConstantsScreen.CHANGE_OPEN_BEGIN=0;c.ConstantsScreen.CHANGE_OPEN_COMPLETE=1;c.ConstantsScreen.CHANGE_CLOSE_BEGIN=2;c.ConstantsScreen.CHANGE_CLOSE_COMPLETE=3;c.ConstantsScreen.OUTPUT_OPENED=0;c.ConstantsScreen.OUTPUT_CLOSED=1;c.ConstantsScreen.CONDITION_CLOSED_ALL=0;c.ConstantsScreen.CONDITION_CLOSED_SPECIFIC=1;c.ConstantsScreen.CONDITION_TRANSITION_MIDWAY=2;c.ConstantsScreen.CONDITION_TRANSITION_COMPLETE=3;c.ConstantsScreen.CONDITION_IMMEDIATE=4;c.ConstantsScreen.FLOW_SPLASH_PLAY="FLOW_SPLASH_PLAY";c.ConstantsScreen.FLOW_HELP_CLOSE="FLOW_HELP_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU="FLOW_GAMEPLAY_MENU";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_CLOSE="FLOW_GAMEPLAY_MENU_CLOSE";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_HELP="FLOW_GAMEPLAY_MENU_HELP";c.ConstantsScreen.FLOW_GAMEPLAY_MENU_QUIT="FLOW_GAMEPLAY_MENU_QUIT";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_YES="FLOW_GAMEPLAY_QUIT_YES";c.ConstantsScreen.FLOW_GAMEPLAY_QUIT_NO="FLOW_GAMEPLAY_QUIT_NO";c.ConstantsScreen.FLOW_END_GAME_PLAY_AGAIN="FLOW_END_GAME_PLAY_AGAIN";c.ConstantsScreen.FLOW_BRANCH_GAME_WIN="FLOW_BRANCH_GAME_WIN";c.ConstantsScreen.FLOW_BRANCH_GAME_LOSE="FLOW_BRANCH_GAME_LOSE";c.ConstantsScreen.FLOW_BRANCH_LEVEL_WIN="FLOW_BRANCH_LEVEL_WIN";c.ConstantsScreen.FLOW_BRANCH_LEVEL_LOSE="FLOW_BRANCH_LEVEL_LOSE";c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_OPEN="FLOW_GAMEPLAY_TUTORIAL_OPEN";c.ConstantsScreen.FLOW_GAMEPLAY_TUTORIAL_CLOSE="FLOW_GAMEPLAY_TUTORIAL_CLOSE";l.buttons.ButtonBase.UP="workinBtnUp";l.buttons.ButtonBase.DOWN="workinBtnDown";l.buttons.ButtonBase.CLICK="workinBtnClick";l.buttons.ButtonBase.CANCEL_DRAG="workinBtnCancelDrag";j.Display.EVENT_UPDATE_DISPLAY="event_update_display";l.screens.data.ScreenStateData.ACTION_STOP=0;l.screens.data.ScreenStateData.ACTION_OPENED=1;l.screens.data.ScreenStateData.ACTION_EVENT=2;l.screens.data.ScreenStateData.ACTION_NEW_STATE=3;l.screens.data.ScreenStateData.ACTION_CLOSED=4;l.screens.data.ScreenStateData.ACTION_FLOW=5;E.ConstantsCloud.FONT_DEFAULT="Basic";E.ConstantsCloud.STRING_REGION_ID="cloudregionid";E.ConstantsCloud.LOCALIZATION_XML_PATH="config/";E.ConstantsCloud.EVENT_FILES_LOADED="EVENT_WORKINCLOUD_FILES_LOADED";E.ConstantsCloud.EVENT_FILES_LOADING="EVENT_FILES_LOADING";E.ConstantsCloud.EVENT_FILES_ERROR="EVENT_FILES_ERROR";E.ConstantsCloud.EVENT_TWEENS_COMPLETE="EVENT_TWEENS_COMPLETE";E.ConstantsCloud.EVENT_INPUT_ARBITRARY_KEY="EVENT_INPUT_ARBITRARY_KEY";E.ConstantsCloud._uniqueId=0;j.PoolManager.ALL_POOLS_FULL="PoolManager_ALL_POOLS_FULL";m.WMEventFlow.EVENT_FLOW="Nflow";m.WMEventInput.EVENT_INPUT="eventinput";m.WMEventInput.PHASE_DOWN=1;m.WMEventInput.PHASE_UP=0;m.WMEventInput.PHASE_MOVE=2;m.WMEventInterfaceChange.EVENT_INTERFACE_OUTPUT="Neio";m.WMEventScreenOut.EVENT_SCREEN_OUTPUT="Neso";m.WMEventUpdate.EVENT_UPDATE="eventupdate";g.tween.PennerManager.EASE_LINEAR="linear";g.tween.PennerManager.EASE="ease";g.tween.PennerManager.EASE_QUAD="quad";g.tween.PennerManager.EASE_IN="easeIn";g.tween.PennerManager.EASE_QUAD_IN="quadIn";g.tween.PennerManager.EASE_OUT="easeOut";g.tween.PennerManager.EASE_QUAD_OUT="quadOut";g.tween.PennerManager.EASE_EXPO="expo";g.tween.PennerManager.EASE_EXPO_IN="expoIn";g.tween.PennerManager.EASE_EXPO_OUT="expoOut";g.tween.PennerManager.EASE_ELASTIC="elastic";g.tween.PennerManager.EASE_ELASTIC_IN="elasticIn";g.tween.PennerManager.EASE_ELASTIC_OUT="elasticOut";g.tween.PennerManager.EASE_BUMP="bump";g.tween.PennerManager.EASE_BUMP_IN="bumpIn";g.tween.PennerManager.EASE_BUMP_OUT="bumpOut";g.tween.PennerManager.EASE_BOUNCE="bounce";g.tween.PennerManager.EASE_BOUNCE_IN="bounceIn";g.tween.PennerManager.EASE_BOUNCE_OUT="bounceOut";g.tween.PennerManager.EASE_CUBIC="cubic";g.tween.PennerManager.EASE_CUBIC_IN="cubicIn";g.tween.PennerManager.EASE_CUBIC_OUT="cubicOut";g.tween.PennerManager.EASE_SPACE="space";g.tween.PennerManager.EASE_SPACE_IN="spaceIn";g.tween.PennerManager.EASE_SPACE_OUT="spaceOut";g.tween.PennerManager.EASE_BLAST="blast";g.tween.PennerManager.EASE_BLAST_IN="blastIn";g.tween.PennerManager.EASE_BLAST_OUT="blastOut";g.tween.PennerManager.EASE_WAVE="wave";g.tween.PennerManager.EASE_WAVE_IN="waveIn";g.tween.PennerManager.EASE_WAVE_OUT="waveOut";g.tween.PennerManager.EASE_CIRCLE="circle";g.tween.PennerManager.EASE_CIRCLE_IN="circleIn";g.tween.PennerManager.EASE_CIRCLE_OUT="circleOut";g.tween.WorkinTween.EVENT_TWEEN_CURRENT_COMPLETE="wtETCC";g.tween.WorkinTween.EVENT_TWEENS_ALL_COMPLETE="wtETAC";s.ServiceAnalytics._offlineUserId="";s.ServiceAnalytics._offlineTrackingId="";s.ServiceAnalytics._appId="";s.ServiceAnalytics._sessionId="";s.ServiceAnalytics._canadaShowGameTitle="";s.ServiceAnalytics._flagInitted=!1;s.ServiceAnalytics._flagStarted=!1;s.ServiceAnalytics._flagLoaded=!1;s.ServiceAnalytics._flagCanadaTrackingEnabled=!1;s.ServiceAnalytics._DEFAULT_SHARED_OBJECT_ID="nkcimocuresid";s.ServiceAnalytics.OPTION_ENABLE_TRACKING=!0;f.WMPointer._DELTA_ALLOWANCE=30;f.WMPointer._DELTA_TIMEOUT=0.2;f.WMSound.FADE_NONE=0;f.WMSound.FADE_IN=1;f.WMSound.FADE_OUT=-1;f.WorkinCloud.instance=new f.WorkinCloud;h.html.HtmlPlatform.instance=new h.html.HtmlPlatform;n.SignalBase.DISPATCHING_SENTINEL=new n.SignalConnection(null,null);y.root=new N;y.uncaughtError=new n.Signal1;y.hidden=new n.Value(!1);y.hasGPU=new n.Value(!1);y.volume=new F.AnimatedFloat(1);y._platform=h.html.HtmlPlatform.instance;y._calledInit=!1;Y.logger=new n.Logger(y._platform.createLogHandler("flambe"));z.Manifest._buildManifest=z.Manifest.createBuildManifests();O=z.Manifest;Y=(new W("\\b(Android)\\b","")).match(x.window.navigator.userAgent)?!1:null!=(new XMLHttpRequest).withCredentials;O._supportsCrossOrigin=Y;p.Sprite._scratchPoint=new I.Point;h.BasicKeyboard._sharedEvent=new d.KeyboardEvent;h.BasicMouse._sharedEvent=new d.MouseEvent;h.BasicPointer._sharedEvent=new d.PointerEvent;h.html.CanvasRenderer.CANVAS_TEXTURES=(new W("(iPhone|iPod|iPad)","")).match(x.window.navigator.userAgent);h.html.HtmlAssetPackLoader._mediaRefCount=0;h.html.HtmlAssetPackLoader._detectBlobSupport=!0;h.html.HtmlUtil.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];h.html.HtmlUtil.SHOULD_HIDE_MOBILE_BROWSER=x.window.top==x.window&&(new W("Mobile(/.*)? Safari","")).match(x.window.navigator.userAgent);h.html.WebAudioSound._detectSupport=!0;S.USE_CACHE=!1;S.USE_ENUM_INDEX=!1;S.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";P.DEFAULT_RESOLVER=M;P.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";J.main()})();