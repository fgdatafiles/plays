!function(a,b){"use strict";function c(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function d(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=U++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var e=function(){};e.__name__=["HxOverrides"],e.substr=function(a,b,c){return null!=b&&0!=b&&null!=c&&0>c?"":(null==c&&(c=a.length),0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b),a.substr(b,c))},Math.__name__=["Math"];var f=function(){};f.__name__=["Reflect"],f.field=function(a,b){try{return a[b]}catch(c){return c instanceof l&&(c=c.val),null}};var g=function(){};g.__name__=["Std"],g.string=function(a){return m.__string_rec(a,"")};var h=function(){};h.__name__=["Type"],h.getClassName=function(a){var b=a.__name__;return null==b?null:b.join(".")};var i=function(){};i.__name__=["haxe","IMap"];var j=function(){this.h={}};j.__name__=["haxe","ds","StringMap"],j.__interfaces__=[i],j.prototype={set:function(a,b){null!=_[a]?this.setReserved(a,b):this.h[a]=b},get:function(a){return null!=_[a]?this.getReserved(a):this.h[a]},setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},remove:function(a){return null!=_[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},__class__:j};var k=function(){};k.__name__=["haxe","macro","Error"],k.prototype={toString:function(){return this.message},__class__:k};var l=function(a){Error.call(this),this.val=a,this.message=String(a),Error.captureStackTrace&&Error.captureStackTrace(this,l)};l.__name__=["js","_Boot","HaxeError"],l.__super__=Error,l.prototype=c(Error.prototype,{__class__:l});var m=function(){};m.__name__=["js","Boot"],m.getClass=function(a){if(a instanceof Array&&null==a.__enum__)return Array;var b=a.__class__;if(null!=b)return b;var c=m.__nativeClassName(a);return null!=c?m.__resolveNativeClass(c):null},m.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+m.__string_rec(a[g],b):m.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0;h>j;){var k=j++;i+=(k>0?",":"")+m.__string_rec(a[k],b)}return i+="]"}var n;try{n=a.toString}catch(o){return o instanceof l&&(o=o.val),"???"}if(null!=n&&n!=Object.toString&&"function"==typeof n){var p=a.toString();if("[object Object]"!=p)return p}var q=null,r="{\n";b+="	";var s=null!=a.hasOwnProperty;for(var q in a)(!s||a.hasOwnProperty(q))&&"prototype"!=q&&"__class__"!=q&&"__super__"!=q&&"__interfaces__"!=q&&"__properties__"!=q&&(2!=r.length&&(r+=", \n"),r+=b+q+" : "+m.__string_rec(a[q],b));return b=b.substring(1),r+="\n"+b+"}";case"function":return"<function>";case"string":return a;default:return String(a)}},m.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;e>d;){var f=d++,g=c[f];if(g==b||m.__interfLoop(g,b))return!0}return m.__interfLoop(a.__super__,b)},m.__instanceof=function(a,b){if(null==b)return!1;switch(b){case V:return(0|a)===a;case X:return"number"==typeof a;case Y:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case W:return!0;default:if(null==a)return!1;if("function"==typeof b){if(a instanceof b)return!0;if(m.__interfLoop(m.getClass(a),b))return!0}else if("object"==typeof b&&m.__isNativeObj(b)&&a instanceof b)return!0;return b==Z&&null!=a.__name__?!0:b==$&&null!=a.__ename__?!0:a.__enum__==b}},m.__cast=function(a,b){if(m.__instanceof(a,b))return a;throw new l("Cannot cast "+g.string(a)+" to "+g.string(b))},m.__nativeClassName=function(a){var b=m.__toStr.call(a).slice(8,-1);return"Object"==b||"Function"==b||"Math"==b||"JSON"==b?null:b},m.__isNativeObj=function(a){return null!=m.__nativeClassName(a)},m.__resolveNativeClass=function(a){return b[a]};var n=function(){};n.__name__=["pbsdaniel","Constants"];var o=function(){createjs.Container.call(this),this._bg=new createjs.Shape,this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,1280,800),this._bg.graphics.endFill(),this.addChild(this._bg),this._trolley=new createjs.Container,this.addChild(this._trolley),this._assets=new P(this.getImageManifest(),this.getAudioManifest(),d(this,this.onPackageReady)),this._assets.load()};o.__name__=["pbsdaniel","DTLoadingScreen"],o.__super__=createjs.Container,o.prototype=c(createjs.Container.prototype,{start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut)},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley)},onPackageReady:function(){var a=this._assets.getSpriteFromSheet("loadingTrolley","loadingScreenSheet"),b=this._assets.getSpriteFromSheet("loadingText","loadingScreenSheet");a.y=-1*a.getBounds().height,a.x=a.getBounds().width*-.5,this._trolley.addChild(a),this._trolley.x=640,this._trolley.y=400,this._text=b,this._text.x=.5*(1280-b.getBounds().width),this._text.y=.55*(800-b.getBounds().height),this.addChild(this._text)},getImageManifest:function(){var a=[];return a.push(P.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),a},getAudioManifest:function(){var a=[];return a},__class__:o});var p=function(a,b){null==b&&(b=!1);var c=this;p.SpringrollApp=a,1==a.options.debug?R.enabled=!0:R.enabled=!1,R.log("New DanielGame!",p),this._stage=a.display.stage,this._stage.enableMouseOver(10),window.SRApp=a,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,1280,800).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),b&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),a.on("update",function(a,b,d){c.update({delta:a})})};p.__name__=["sg","pbskids","daniel","SpringrollGame"],p.prototype={resize:function(a){R.green(g.string(a.width)+", "+g.string(a.height)),this.BG.graphics.clear(),this.BG.graphics.beginFill("orange").drawRect(0,0,a.width,a.height).endFill()},begin:function(){null!=p.SpringrollApp.scaling&&R.purple(p.SpringrollApp.scaling._items)},update:function(a){this._stage.update(a)},__class__:p};var q=function(a){p.call(this,a),q.Feelings=["sad","mad","happy","frustrated","brave"],this._loadingScreen=new o,this._loadingScreen.addEventListener("added",(T=this._loadingScreen,d(T,T.start))),this._loadingScreen.addEventListener("removed",(T=this._loadingScreen,d(T,T.freeze))),this._loadLayer.addChild(this._loadingScreen),q.globalAssets=new P(this.getGlobalData(),null,d(this,this.onGlobalAssetsRetrieved))};q.__name__=["pbsdaniel","feelings","DanielFeelings"],q.__super__=p,q.prototype=c(p.prototype,{begin:function(){p.prototype.begin.call(this),q.globalAssets.load()},getGlobalData:function(){var a=[];return a.push(P.makeManifestItem("gameData","assets/data/feelings_data.json","json")),a.push(P.makeManifestItem("charaterData","assets/data/character_data.json","json")),a.push(P.makeManifestItem("titlescreenData","assets/data/titlescreen_data.json","json")),a},onGlobalAssetsRetrieved:function(){this._gameData=q.globalAssets.getResult("gameData"),this._sceneDataMap=new j;for(var a=0,b=this._gameData.scenes;a<b.length;){var c=b[a];++a,this._sceneDataMap.set(c.name,c)}this._screen=new A(q.globalAssets.getResult("titlescreenData"),d(this,this.screenReady)),this._screen.addEventListener("sceneRequest",d(this,this.sceneLoadRequest))},sceneLoadRequest:function(a){this._loadStartTime=createjs.Ticker.getTime(!0),this._screen.removeEventListener("sceneRequest",d(this,this.sceneLoadRequest)),this._loadLayer.addChild(this._loadingScreen),this.container.addChild(this._loadLayer),this._gameLayer.removeAllChildren(),this._screen.destroy(),this._screen=null;var b=a.get_sceneId();switch(b){case"gameScene":this._screen=new z(this._sceneDataMap.get("gameScene"),d(this,this.screenReady)),this._screen.name=this._screen.sceneName}this._screen.addEventListener("sceneRequest",d(this,this.sceneLoadRequest))},screenReady:function(){createjs.Ticker.getTime(!0)-this._loadStartTime>500?this.startScreen():createjs.Tween.get(this).wait(500-(createjs.Ticker.getTime(!0)-this._loadStartTime),!0).call(d(this,this.startScreen))},startScreen:function(){this._gameLayer.addChild(this._screen),this._loadingScreen.parent==this._loadLayer&&this._loadLayer.removeChild(this._loadingScreen),this._screen.start()},update:function(a){p.prototype.update.call(this,a),null!=this._screen&&this._screen.update(a),dragonBones.animation.WorldClock.clock.advanceTime(a.delta/1e3)},__class__:q});var r=function(a){createjs.Event.call(this,a,!1,!1)};r.__name__=["pbsdaniel","feelings","EmotionEvent"],r.__super__=createjs.Event,r.prototype=c(createjs.Event.prototype,{__class__:r});var s=function(){this._touchID=-2,this._eraseThreshold=.7,this._autoDrawing=!1,this._scratchSFX=!1,this.DRAW_SIZE=60,this._drawing=!1,createjs.Container.call(this)};s.__name__=["pbsdaniel","feelings","EmotionsCard"],s.__super__=createjs.Container,s.prototype=c(createjs.Container.prototype,{addCardBack:function(a){this._back=a},addCardFront:function(a,b){this._front=new createjs.Container,m.__cast(this._front,createjs.Container).addChild(a),b.x=40,b.y=34,m.__cast(this._front,createjs.Container).addChild(b)},addCover:function(a){this._cover=new createjs.Container,a.x=40,a.y=34,this._cover.addChild(a),this._eraserObj=new createjs.Shape,this._cover.addChild(this._eraserObj),this._eraserObj.compositeOperation="destination-out",this._cover.cache(0,0,this._front.getBounds().width,this._front.getBounds().height),m.__cast(this._front,createjs.Container).addChild(this._cover)},addCallback:function(a){this._completeCallback=a},addFlipSFX:function(a){this._flipSFX=a},addScratchFX:function(a){this._fx=a},initialize:function(a,b,c){if(null==a&&(a=!0),this._fxes=[],this.DRAW_SIZE=z._sceneData.brushSize,this._origRot=10*Math.random()-5,this.rotation=this._origRot,this.scaleX=this.scaleY=.6,this._front.x=this._front.getBounds().width*-.5,this._front.y=this._front.getBounds().height*-.5,this._back.x=this._back.getBounds().width*-.5,this._back.y=this._back.getBounds().height*-.5,this._visibleSide="back",this.addChild(this._back),a&&this.jiggle(),null!=b){this._eraseThreshold=c,this._eraseRects=[],this._erasedRects=[];for(var d=this._front.getBounds().width/b.width,e=this._front.getBounds().height/b.height,f=0,g=Math.floor(b.width);g>f;)for(var h=f++,i=0,j=Math.floor(b.height);j>i;){var k=i++;this._eraseRects.push(new createjs.Rectangle(h*d,k*e,d,e))}}this.turnOn()},jiggle:function(){createjs.Tween.get(this).to({rotation:this._origRot+5},75).to({rotation:this._origRot-5},75).to({rotation:this._origRot+5},75).to({rotation:this._origRot-5},75).to({rotation:this._origRot+5},75).to({rotation:this._origRot-5},75).to({rotation:this._origRot+5},75).to({rotation:this._origRot},75).call(d(this,this.jiggleComplete))},jiggleComplete:function(){createjs.Tween.removeTweens(this),createjs.Tween.get(this).wait(S.randomRange(2200,4300),!0).call(d(this,this.jiggle))},turnOff:function(){this.removeEventListener("mousedown",d(this,this.onCardActivate)),window.removeEventListener("keydown",d(this,this.onCardActivate))},turnOn:function(){this.addEventListener("mousedown",d(this,this.onCardActivate)),window.addEventListener("keydown",d(this,this.onCardActivate))},forceFlip:function(){this.uncache(),this.onCardActivate()},destroy:function(){this.turnOff(),createjs.Tween.removeTweens(this),null!=this._totalEraser&&createjs.Tween.removeTweens(this._totalEraser),this._completeCallback=null,p.SpringrollApp.display.stage.removeEventListener("stagemousemove",d(this,this.drawingCheck))},update:function(a){this._autoDrawing&&(this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this.DRAW_SIZE,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(this._fingerPosition.x,this._fingerPosition.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._cover.updateCache(null),this._lastPosition.setValues(this._fingerPosition.x,this._fingerPosition.y)),this._autoComplete&&this._cover.updateCache(null)},onCardActivate:function(a){this.turnOff(),createjs.Tween.removeTweens(this);var b=this.rotation;Q.instance.playAudio(this._flipSFX),this._flipRotation=4*Math.random()-2+b,createjs.Tween.get(this).to({scaleX:.8,scaleY:0,rotation:this._flipRotation/2},300,createjs.Ease.backIn).call(d(this,this.adjustSides)).to({scaleX:.9,scaleY:.9,rotation:this._flipRotation},300,createjs.Ease.backOut).call(d(this,this.flipComplete))},flipComplete:function(){null!=this._completeCallback&&this._completeCallback()},adjustSides:function(){"front"==this._visibleSide?(this.addChild(this._back),this.removeChild(this._front)):(this.removeChild(this._back),this.addChild(this._front))},addScratchSFX:function(a){this._scratches=a;for(var b=[],c=0;c<a.length;){var d=a[c];++c,b.push(P.makeAudioManifestItem(d))}Q.instance.loadAudio(b)},startDraw:function(a,b){this._drawing||(this._touchID=a.pointerID,this._points=[],this._drawing=!0,this._lastPosition=new createjs.Point(b.x+.01,b.y+.01),this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this.DRAW_SIZE,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._cover.updateCache(null),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._points.push(this._lastPosition),this._lastTime=createjs.Ticker.getTime(),Q.instance.playAudio(this._scratches[S.randomIntRange(0,this._scratches.length,!1)],d(this,this.scratchDone)),p.SpringrollApp.display.stage.addEventListener("stagemouseup",d(this,this.onTouchOff)))},onTouchOff:function(a){var b=this._front.globalToLocal(a.localX,a.localY);this.onDrawComplete(a,b)},onDrawMove:function(a,b){if(a.pointerID==this._touchID){this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this.DRAW_SIZE,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._cover.updateCache(null),this._lastPosition=b,this._points.shift(),this._points.push(this._lastPosition);this.checkForDirectionChange()}},checkForDirectionChange:function(){var a=L.findAngle(this._points[0],this._points[3],this._points[6]);return a<.5*Math.PI&&!this._scratchSFX&&(this._scratchSFX=!0,Q.instance.playAudio(this._scratches[S.randomIntRange(0,this._scratches.length,!1)],d(this,this.scratchDone))),a},nukeFX:function(a){createjs.Tween.removeTweens(a),this._fxContainer.removeChild(a),a=null},scratchDone:function(){this._scratchSFX=!1},onDrawComplete:function(a,b){a.pointerID==this._touchID&&(p.SpringrollApp.display.stage.removeEventListener("stagemouseup",d(this,this.onTouchOff)),this._drawing=!1,this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this.DRAW_SIZE,"round").beginFill("#ffffff").moveTo(this._lastPosition.x,this._lastPosition.y).lineTo(b.x,b.y).endFill().endStroke(),this._eraserObj.compositeOperation="destination-out",this._cover.updateCache(null),this._touchID=-2)},autoDraw:function(){if(!this._suppressAutoDraw){var a=this._drawData.shift();this._fingerPosition=new createjs.Point,this._lastPosition=new createjs.Point,this._fingerPosition.setValues(a.x,a.y),this._eraserObj.graphics.beginStroke("#ffffff").setStrokeStyle(this.DRAW_SIZE,"round").beginFill("#ffffff").moveTo(a.x+.1,a.y+.1).lineTo(a.x,a.y).endFill().endStroke(),this._lastPosition.setValues(a.x,a.y),a=this._drawData.shift(),createjs.Tween.get(this._fingerPosition).to({x:a.x,y:a.y},a.t).call(d(this,this.drawNextLine)),this._autoDrawing=!0}},drawNextLine:function(){if(this._drawData.length>0){var a=this._drawData.shift();this._fingerPosition.setValues(a.x,a.y),createjs.Tween.get(this._fingerPosition).to({x:a.x,y:a.y},a.t).call(d(this,this.drawNextLine))}else this._autoDrawing=!1,p.SpringrollApp.display.stage.addEventListener("stagemousemove",d(this,this.drawingCheck))},drawingCheck:function(a){this._autoDrawing&&(this._autoDrawing=!1),this._suppressAutoDraw||(this._suppressAutoDraw=!0);var b=this._front.globalToLocal(a.localX,a.localY);this._front.getBounds().contains(b.x,b.y)?(this._drawing?createjs.Ticker.getTime()-this._lastTime>40&&(this.onDrawMove(a,b),this._lastTime=createjs.Ticker.getTime()):this.startDraw(a,b),null!=this._eraseRects&&this.eraseCheck(b)):this._drawing&&this.onDrawComplete(a,b)},eraseCheck:function(a){for(var b=0,c=this._eraseRects.length;c>b;){var e=b++;if(this._eraseRects[e].contains(a.x,a.y)){this._erasedRects.push(this._eraseRects.splice(e,1)[0]),this._erasedRects.length/(this._eraseRects.length+this._erasedRects.length)>this._eraseThreshold&&(p.SpringrollApp.display.stage.removeEventListener("stagemousemove",d(this,this.drawingCheck)),this._autoComplete=!0,this._totalEraser=new createjs.Shape,this._totalEraser.graphics.beginFill("#ffffff").drawRect(0,0,this._front.getBounds().width,this._front.getBounds().height).endFill(),this._cover.addChild(this._totalEraser),this._totalEraser.alpha=0,this._totalEraser.compositeOperation="destination-out",this._cover.updateCache(null),createjs.Tween.get(this._totalEraser).to({alpha:1},1500).call(d(this,this.totalEraseComplete)));break}}},totalEraseComplete:function(){this._autoComplete=!1},setAutoDrawData:function(a){this._drawData=a.slice()},allowDraw:function(){p.SpringrollApp.display.stage.addEventListener("stagemousemove",d(this,this.drawingCheck))},__class__:s});var t=function(a,b){this.completed=!1,createjs.Container.call(this),this._data=a;var c=[];c.push(a.skeleton),c.push(a.texture),c.push(a.textureJSON),this._assets=new P(c,null,d(this,this.chracterDataLoaded)),this._id=a.name,this._readyCallback=b,this._assets.load()};t.__name__=["sg","cjs","dragonbones","DBCharacterCJS"],t.__super__=createjs.Container,t.prototype=c(createjs.Container.prototype,{get_characterId:function(){return this._id},playAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){null!=b&&(this._currentCompleteCallback=b,this.armature.addEventListener(dragonBones.events.AnimationEvent.COMPLETE,d(this,this.onAnimationComplete)));this.armature.animation.gotoAndPlay(a)}else window.console.log("Animation does not contain label ["+a+"]")},loopAnimation:function(a,b){if(this.armature.animation.hasAnimation(a)){this.armature.animation.gotoAndPlay(a,-1,-1,1e3)}else window.console.log("Animation does not contain label ["+a+"]")},stopAnimation:function(a){null==a&&(a=!1),a&&(this._currentCompleteCallback=null,this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,d(this,this.onAnimationComplete))),this.armature.animation.stop()},onAnimationComplete:function(a){this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,d(this,this.onAnimationComplete)),this._currentCompleteCallback(a)},chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.build()},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null,this._assets.dispose(),this._assets=null},onTextureLoaded:function(a){this._filesToLoad--,this.charCreationCheck()},charCreationCheck:function(){this._filesToLoad<=0&&this.build()},onTextureDataLoaded:function(a){this._textureData=a,this._filesToLoad--,this.charCreationCheck()},onSkeletonDataLoaded:function(a){this._skeletonData=a,this._filesToLoad--,this.charCreationCheck()},build:function(){this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,d(this,this.omBoneFrameEvent)),this.completed=!0,null!=this._readyCallback&&this._readyCallback()},omBoneFrameEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?Q.instance.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?Q.instance.playAudio(a.frameLabel.split("sfx_")[1]):Q.instance.playAudio(a.frameLabel)},__class__:t});var u=function(a,b){t.call(this,a,b)};u.__name__=["sg","springroll","dragonbones","SRDBCharacter"],u.__super__=t,u.prototype=c(t.prototype,{chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.preloadAudio(this._skeletonData),this.build()},preloadAudio:function(a){var b=[];this._audioLoaded=!1;for(var c=0,f=a.armature;c<f.length;){var g=f[c];++c;for(var h=0,i=g.animation;h<i.length;){var j=i[h];++h;for(var k=0,l=j.timeline;k<l.length;){var m=l[k];++k;for(var n=0,o=m.frame;n<o.length;){var p=o[n];if(++n,null!=p.event){var q="";p.event.indexOf("vo_")>-1?q=e.substr(p.event,3,null):p.event.indexOf("sfx_")>-1&&(q=e.substr(p.event,4,null)),b.push(P.makeAudioManifestItem(q))}}}}}b.length>0?Q.instance.loadAudio(b,d(this,this.characterAudioLoaded)):(this._audioLoaded=!0,this.characterAudioLoaded())},characterAudioLoaded:function(){this._audioLoaded=!0,null!=this._readyCallback&&this.completed&&this._readyCallback()},build:function(){this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var a=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(a),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,d(this,this.omBoneFrameEvent)),this.completed=!0,null!=this._readyCallback&&this._audioLoaded&&this._readyCallback()},__class__:u});var v=function(a,b){u.call(this,a.dragonBonesData,b),this.anims=a.anims};v.__name__=["pbsdaniel","feelings","FeelingsCharacter"],v.__super__=u,v.prototype=c(u.prototype,{__class__:v});var w=function(){};w.__name__=["pbsdaniel","feelings","Main"],w.main=function(){window.SGGameButler=new O("GuessTheFeeling",w.start),w._isSpringroll="undefined"!=typeof springroll},w.start=function(a,b){w.SpringrollApp=a,w._bellhop=b,Q.init(w.SpringrollApp),window.focus(),w._game=new q(w.SpringrollApp),w._game.begin()},w.ga_call=function(a){try{w._bellhop.send("gacall",a)}catch(b){if(b instanceof l&&(b=b.val),!m.__instanceof(b,k))throw b;window.console.warn("Warning: "+g.string(b))}};var x=function(){};x.__name__=["pbsdaniel","feelings","defs","FeelingsGameSceneDataDef"],x.prototype={__class__:x};var y=function(){this.sceneName="unnamed",createjs.Container.call(this)};y.__name__=["sg","cjs","GameScreen"],y.__super__=createjs.Container,y.prototype=c(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){},getImageManifest:function(){var a=[];return a},getAudioManifest:function(){var a=[];return a},__class__:y});var z=function(a,b){y.call(this),this._readyCallback=b,this.sceneName=a.name,z._sceneData=a.data,this._shotDataMap=new j;for(var c=0,e=z._sceneData.shots;c<e.length;){var f=e[c];++c,this._shotDataMap.set(f.name,f)}var g=q.globalAssets.getResult("charaterData");this._unloadedCharacters=g.characters.length,z.characters=new j;for(var h=0,i=g.characters;h<i.length;){var k=i[h];++h;var l=new v(k,d(this,this.characterComplete));z.characters.set(k.dragonBonesData.name,l)}this.availableEmotions=[],this._assets=new P(a.manifestData.assetManifest,a.manifestData.audioManifest,d(this,this.onPackageReady)),this._assets.load()};z.__name__=["pbsdaniel","feelings","screens","FeelingsGameScene"],z.__super__=y,z.prototype=c(y.prototype,{start:function(){this._currentShot.start()},characterComplete:function(){this._unloadedCharacters-=1,this.checkForReady()},onPackageReady:function(){this.checkForReady()},checkForReady:function(){this._unloadedCharacters<=0&&this._assets.completed&&(z.CurrentEmotionAudioData=this.gatherEmotionalAudioData(),this._assets.loadPostManifest(this.getEmotionImageManifest(z.CurrentEmotionAudioData.emotion)),this.preloadAudioData(z.CurrentEmotionAudioData),this._currentShot=new F(this._assets,this._shotDataMap.get("wideShot"),z.CurrentEmotionAudioData),this._currentShot.addEventListener("shotChangeRequest",d(this,this.onShotChangeRequested)),this._currentShot.addEventListener("emotionChangeEvent",d(this,this.changeEmotionData)),this._currentShot.build(),this.addChild(this._currentShot),this._readyCallback())},getEmotionImageManifest:function(a){var b=[];switch(a){case"brave":b.push(P.makeManifestItem("cardCover",z._sceneData.emotionImages.path+z._sceneData.emotionImages.brave.cover,"image")),b.push(P.makeManifestItem("cardScene",z._sceneData.emotionImages.path+z._sceneData.emotionImages.brave.scenes[S.randomIntRange(0,z._sceneData.emotionImages.brave.scenes.length,!1)],"image"));break;case"frustrated":b.push(P.makeManifestItem("cardCover",z._sceneData.emotionImages.path+z._sceneData.emotionImages.frustrated.cover,"image")),b.push(P.makeManifestItem("cardScene",z._sceneData.emotionImages.path+z._sceneData.emotionImages.frustrated.scenes[S.randomIntRange(0,z._sceneData.emotionImages.brave.scenes.length,!1)],"image"));break;case"happy":b.push(P.makeManifestItem("cardCover",z._sceneData.emotionImages.path+z._sceneData.emotionImages.happy.cover,"image")),b.push(P.makeManifestItem("cardScene",z._sceneData.emotionImages.path+z._sceneData.emotionImages.happy.scenes[S.randomIntRange(0,z._sceneData.emotionImages.brave.scenes.length,!1)],"image"));break;case"mad":b.push(P.makeManifestItem("cardCover",z._sceneData.emotionImages.path+z._sceneData.emotionImages.mad.cover,"image")),b.push(P.makeManifestItem("cardScene",z._sceneData.emotionImages.path+z._sceneData.emotionImages.mad.scenes[S.randomIntRange(0,z._sceneData.emotionImages.brave.scenes.length,!1)],"image"));break;case"sad":b.push(P.makeManifestItem("cardCover",z._sceneData.emotionImages.path+z._sceneData.emotionImages.sad.cover,"image")),b.push(P.makeManifestItem("cardScene",z._sceneData.emotionImages.path+z._sceneData.emotionImages.sad.scenes[S.randomIntRange(0,z._sceneData.emotionImages.brave.scenes.length,!1)],"image"))}return b},onShotChangeRequested:function(a){this._currentShot.removeEventListener("emotionChangeEvent",d(this,this.changeEmotionData)),this._currentShot.removeEventListener("shotChangeRequest",d(this,this.onShotChangeRequested));var b=null,c=a.shotType;switch(c){case"closeupShot":b=new D(this._assets,this._shotDataMap.get("closeupShot"),a.data),b.build(),this.cutTransition(b);break;case"wideShot":z.Playthrough++,this.changeEmotionData(),b=new F(this._assets,this._shotDataMap.get("wideShot"),z.CurrentEmotionAudioData),m.__cast(b,F).addEventListener("emotionChangeEvent",d(this,this.changeEmotionData)),b.build(),this.fadeTransition(b);break;case"cardShot":b=new C(this._assets,this._shotDataMap.get("cardShot")),b.build(),this.fadeTransition(b)}},changeEmotionData:function(a){z.CurrentEmotionAudioData=this.gatherEmotionalAudioData(),this._assets.loadPostManifest(this.getEmotionImageManifest(z.CurrentEmotionAudioData.emotion)),this.preloadAudioData(z.CurrentEmotionAudioData)},preloadAudioData:function(a){for(var b=[],c=0,d=a.kidPrompts;c<d.length;){var e=d[c];++c,b.push(P.makeAudioManifestItem(e.id[0]))}for(var f=0,g=a.guesses;f<g.length;){var h=g[f];++f,b.push(P.makeAudioManifestItem(h.id[0]))}b.push(P.makeAudioManifestItem(a.harrietLinks.prompt[0])),b.push(P.makeAudioManifestItem(a.harrietLinks.request[0])),b.push(P.makeAudioManifestItem(a.harrietLinks.whisper[0])),b.push(a.song),b.push(a.songLoop),Q.instance.loadAudio(b)},gatherEmotionalAudioData:function(){var a={};0==this.availableEmotions.length&&(this.availableEmotions=z.emotions.slice());var b=this.availableEmotions.splice(S.randomIntRange(0,this.availableEmotions.length,!1),1)[0];a.emotion=b;var c=this._shotDataMap.get("cardShot").data;a.cardId=f.field(c.cards,b);var d=this._shotDataMap.get("closeupShot").data,e=[],g=this.getIdsForEmotion(b,d.audio.emotionPrompts);e.push(this.scrubAudioOptions(g)),e.push(this.scrubAudioOptions(g)),e.push(this.scrubAudioOptions(g)),a.kidPrompts=e;var h=[],i=this.getIdsForEmotion(b,d.audio.guesses);h.push(this.scrubAudioOptions(i)),h.push(this.scrubAudioOptions(i)),a.guesses=h;var j=this._shotDataMap.get("wideShot").data,k=j.playerTurnAudio.brave;switch(b){case"brave":k=j.playerTurnAudio.brave;break;case"frustrated":k=j.playerTurnAudio.frustrated;break;case"happy":k=j.playerTurnAudio.happy;break;case"mad":k=j.playerTurnAudio.mad;break;case"sad":k=j.playerTurnAudio.sad}k.prompt=k.prompt.splice(Math.floor(Math.random()*k.prompt.length),1),a.harrietLinks=k;var l=this.getEmotionSongLink(b,d);return a.song=l.song,a.songLoop=l.songLoop,a},scrubAudioOptions:function(a){var b=a.splice(Math.floor(Math.random()*a.length),1)[0];return b.id=b.id.splice(Math.floor(Math.random()*b.id.length),1),b},getEmotionSongLink:function(a,b){var c={};switch(a){case"brave":c.song=b.songs.brave,c.songLoop=b.songLoops.brave;break;case"frustrated":c.song=b.songs.frustrated,c.songLoop=b.songLoops.frustrated;break;case"happy":c.song=b.songs.happy,c.songLoop=b.songLoops.happy;break;case"mad":c.song=b.songs.mad,c.songLoop=b.songLoops.mad;break;case"sad":c.song=b.songs.sad,c.songLoop=b.songLoops.sad}return c},getIdsForEmotion:function(a,b){switch(a){case"brave":return b.brave.slice();case"frustrated":return b.frustrated.slice();case"happy":return b.happy.slice();case"mad":return b.mad.slice();case"sad":return b.sad.slice()}return null},fadeTransition:function(a,b){null==b&&(b=1e3),this.addChildAt(a,0),this._currentShot.pause(),this._currentShot.cache(0,0,this._currentShot.getBounds().width,this._currentShot.getBounds().height),createjs.Tween.get(this._currentShot).to({alpha:0},b).call(d(this,this.fadeTransitionComplete),[a])},fadeTransitionComplete:function(a){this.removeChild(this._currentShot),this._currentShot.destroy(),this._currentShot=a,this._currentShot.start(),this._currentShot.addEventListener("shotChangeRequest",d(this,this.onShotChangeRequested));
},cutTransition:function(a){this.addChildAt(a,0),this.removeChild(this._currentShot),this._currentShot.destroy(),this._currentShot=a,this._currentShot.start(),this._currentShot.addEventListener("shotChangeRequest",d(this,this.onShotChangeRequested))},update:function(a){y.prototype.update.call(this,a),null!=this._currentShot&&this._currentShot.update(a)},__class__:z});var A=function(a,b){y.call(this),this._readyCallback=b,this._data=a,this._assets=new P(this._data.manifestData.assetManifest,this._data.manifestData.audioManifest,d(this,this.onPackageReady)),this._assets.load()};A.__name__=["pbsdaniel","feelings","screens","TitleScreen"],A.__super__=y,A.prototype=c(y.prototype,{destroy:function(){createjs.Tween.removeTweens(this),this._bg=null,this._playButton.removeAllEventListeners(),this._playButton.destroy(),this._playButton=null,window.removeEventListener("keydown",d(this,this.onKeyDown)),Q.instance.killAll()},start:function(){createjs.Tween.get(this).wait(1500,!0).call((T=Q.instance,d(T,T.playVO)),[this._data.audio])},onPackageReady:function(){this._bg=this._assets.getBitmap(this._data.image),this.addChild(this._bg),this._playButton=new K(this._assets.getSpriteFromSheet(this._data.playButton.art.up,this._data.playButton.art.sheet),this._assets.getSpriteFromSheet(this._data.playButton.art.down,this._data.playButton.art.sheet)),this.addChild(this._playButton),"center"==this._data.playButton.align&&(this._playButton.x=1280*this._data.playButton.position.x-.5*this._playButton.getBounds().width,this._playButton.y=800*this._data.playButton.position.y-.5*this._playButton.getBounds().height),this._playButton.turnOn(),this._playButton.addEventListener("down",d(this,this.triggerAdvance)),this.addEventListener("mousedown",d(this,this.triggerAdvance),null),window.addEventListener("keydown",d(this,this.onKeyDown)),this._readyCallback()},onKeyDown:function(a){window.removeEventListener("keydown",d(this,this.onKeyDown)),this.triggerAdvance()},triggerAdvance:function(a){this.removeEventListener("mousedown",d(this,this.triggerAdvance),null),window.removeEventListener("keydown",d(this,this.onKeyDown)),this._playButton.removeEventListener("down",d(this,this.triggerAdvance)),this._playButton.turnOff(),createjs.Tween.removeTweens(this),Q.instance.killAll(),this.dispatchEvent(new I("sceneRequest","gameScene"))},__class__:A});var B=function(a,b){createjs.Container.call(this),this._assets=a,this._interactiveMap=new j,this._displayData=b};B.__name__=["pbsdaniel","feelings","screens","shots","Shot"],B.__super__=createjs.Container,B.prototype=c(createjs.Container.prototype,{update:function(a){},start:function(){},build:function(){for(var a=0,b=this._displayData.displayList.length;b>a;){var c=a++;if("image"==this._displayData.displayList[c].type){var d=this._assets.getBitmap(this._displayData.displayList[c].data.id);this.addChild(d),(null!=this._displayData.displayList[c].handle||""!=this._displayData.displayList[c].handle)&&this._interactiveMap.set(this._displayData.displayList[c].handle,d)}else if("character"==this._displayData.displayList[c].type){var e,f=this._displayData.displayList[c].data.id;e=z.characters.get(f),e.playAnimation(e.anims.idle),e.setTransform(this._displayData.displayList[c].data.position.x,this._displayData.displayList[c].data.position.y),this.addChild(e),(null!=this._displayData.displayList[c].handle||""!=this._displayData.displayList[c].handle)&&this._interactiveMap.set(this._displayData.displayList[c].handle,e)}else if("sprite"==this._displayData.displayList[c].type){var g=this._assets.getSpriteFromSheet(this._displayData.displayList[c].data.id,this._displayData.displayList[c].data.sheet);g.setTransform(this._displayData.displayList[c].data.position.x,this._displayData.displayList[c].data.position.y),this.addChild(g),(null!=this._displayData.displayList[c].handle||""!=this._displayData.displayList[c].handle)&&this._interactiveMap.set(this._displayData.displayList[c].handle,g)}else"custom"==this._displayData.displayList[c].type&&this.buildCustomObject(this._displayData.displayList[c])}},buildCustomObject:function(a){},destroy:function(){},pause:function(){},__class__:B});var C=function(a,b){B.call(this,a,b.display),this._data=b.data,this._audioData=z.CurrentEmotionAudioData,this._card=new s,this._card.addCardBack(this._assets.getBitmap("card_back")),this._card.addScratchSFX(b.data.scratches),this._card.addCardFront(this._assets.getBitmap("blank_front"),this._assets.getBitmap("cardScene")),this._card.addCover(this._assets.getBitmap("cardCover")),this._card.DRAW_SIZE=this._data.drawSize,this._doneBtn=new K(this._assets.getSpriteFromSheet("ui_next_button"),new J(this._assets.getSpriteFromSheet("ui_next_button"))),this._doneBtn.addEventListener("down",d(this,this.onNextClicked))};C.__name__=["pbsdaniel","feelings","screens","shots","CardShot"],C.__super__=B,C.prototype=c(B.prototype,{onNextClicked:function(a){Q.instance.stopVO(this._audioData.song.id),Q.instance.stopAudio(this._audioData.songLoop.id),this._doneBtn.removeEventListener("down",d(this,this.onNextClicked)),this._card.destroy(),this.dispatchEvent(new E("shotChangeRequest","wideShot"))},buildCustomObject:function(a){"interactive_card"==a.data.id&&(this._card.initialize(!0,this._data.eraseResolution,this._data.threshold),this._card.addFlipSFX(a.data.flipSound),this._card.addCallback(d(this,this.onCardFlipped)),this._card.setTransform(640,400,.6,.6),this._card.setAutoDrawData(this._data.drawData),this.addChild(this._card))},onCardFlipped:function(){this._card.allowDraw(),createjs.Tween.get(this).wait(1500,!1).call(d(this,this.playSong)).wait(1500,!1).call((T=this._card,d(T,T.autoDraw)))},playSong:function(){Q.instance.playVO(this._audioData.song.id,d(this,this.onSongComplete))},onSongComplete:function(){Q.instance.loopAudio(this._audioData.songLoop.id),this.addChild(this._doneBtn),this._doneBtn.setTransform(1280-this._doneBtn.getBounds().width-25,800-this._doneBtn.getBounds().height-25),this._doneBtn.turnOn()},start:function(){R.olive("Start Card Shot: "+this._audioData.emotion)},update:function(a){this._card.update(a)},__class__:C});var D=function(a,b,c){this._promptCount=0,this._characterID=c,this._data=b,this._shotData=b.data,B.call(this,a,b.display),this._audioData=z.CurrentEmotionAudioData};D.__name__=["pbsdaniel","feelings","screens","shots","CloseupShot"],D.__super__=B,D.prototype=c(B.prototype,{buildCustomObject:function(a){if("dynamic_character"==a.data.id){var b=a.data.position;this._character=z.characters.get(this._characterID),this._character.setTransform(b.x,b.y),this.addChild(this._character)}},start:function(){this._character.playAnimation(this._character.anims.drawCard,d(this,this.onCardDrawComplete));var a=this._audioData.emotion;switch(a){case"brave":this._animLabels=this._character.anims.brave;break;case"frustrated":this._animLabels=this._character.anims.frustrated;break;case"happy":this._animLabels=this._character.anims.happy;break;case"mad":this._animLabels=this._character.anims.mad;break;case"sad":this._animLabels=this._character.anims.sad}},onCardDrawComplete:function(a){this._character.playAnimation(this._animLabels.transitionIn,d(this,this.gotoEmotionIdle))},gotoEmotionIdle:function(a){this._character.loopAnimation(this._animLabels.idle),this._character.addEventListener("mousedown",d(this,this.triggerMegaEmotion),null),0==this._promptCount&&this.playPrompt()},triggerMegaEmotion:function(a){a.primary&&(this._character.removeEventListener("mousedown",d(this,this.triggerMegaEmotion),null),this._character.playAnimation(this._animLabels.megaIdle,d(this,this.gotoEmotionIdle)))},playPrompt:function(){if(this._promptCount<2)if(this._promptCount++,this._audioData.kidPrompts.length>0){var a=this._audioData.kidPrompts.splice(Math.floor(Math.random()*this._audioData.kidPrompts.length),1)[0];a.character==this._characterID&&(a=this._audioData.kidPrompts.splice(Math.floor(Math.random()*this._audioData.kidPrompts.length),1)[0]);var b=a.id[Math.floor(a.id.length*Math.random())];createjs.Tween.get(this).wait(S.randomIntRange(1e3,2500),!0).call((T=Q.instance,d(T,T.playVO)),[b,d(this,this.playPrompt)])}else this.playGuess();else this.playGuess()},playGuess:function(){var a=this._audioData.guesses.splice(Math.floor(Math.random()*this._audioData.guesses.length),1)[0];a.character==this._characterID&&(a=this._audioData.guesses.splice(Math.floor(Math.random()*this._audioData.guesses.length),1)[0]);var b=a.id[Math.floor(a.id.length*Math.random())];createjs.Tween.get(this).wait(S.randomIntRange(1e3,2500),!0).call((T=Q.instance,d(T,T.playVO)),[b,d(this,this.animateEmotion)])},animateEmotion:function(){this._character.removeEventListener("mousedown",d(this,this.triggerMegaEmotion),null),this._character.stopAnimation(!0),this._character.playAnimation(this._animLabels.stateEmotion,d(this,this.onEmotionAnimComplete))},onEmotionAnimComplete:function(a){this.dispatchEvent(new E("shotChangeRequest","cardShot",this._audioData.emotion))},__class__:D});var E=function(a,b,c){createjs.Event.call(this,a,!1,!1),this.shotType=b,this.data=c};E.__name__=["pbsdaniel","feelings","screens","shots","ShotEvent"],E.__super__=createjs.Event,E.prototype=c(createjs.Event.prototype,{__class__:E});var F=function(a,b,c){B.call(this,a,b.display),this._audioData=z.CurrentEmotionAudioData,this._name=b.name,this._data=b.data,this._rigs=new j;var d=z.characters.get("Daniel");this._rigs.set("Daniel",d);var e=z.characters.get("Elaina");this._rigs.set("Elaina",e);var f=z.characters.get("Katerina");this._rigs.set("Katerina",f);var g=z.characters.get("Owl");this._rigs.set("Owl",g);var h=z.characters.get("Wednesday");this._rigs.set("Wednesday",h)};F.__name__=["pbsdaniel","feelings","screens","shots","WideShot"],F.__super__=B,F.prototype=c(B.prototype,{destroy:function(){this._assets=null,this._data=null,this._name=null,this._rigs=null,this.removeAllChildren()},pause:function(){this._rigs.get("Daniel").stopAnimation(),this._rigs.get("Elaina").stopAnimation(),this._rigs.get("Katerina").stopAnimation(),this._rigs.get("Owl").stopAnimation(),this._rigs.get("Wednesday").stopAnimation()},buildCustomObject:function(a){if("deck"==a.data.id){var b=new createjs.Shape;b.graphics.beginFill("rgba(255,0,0,0.01)").drawRoundRect(a.data.position.x,a.data.position.y,a.data.size.w,a.data.size.h,3).endFill(),b.cache(a.data.position.x,a.data.position.y,a.data.size.w,a.data.size.h),b.name=a.handle,this.addChild(b),(null!=a.handle||""!=a.handle)&&this._interactiveMap.set(a.handle,b)}},onDeckClicked:function(a){this.turnOffDecks(),this._activeCharacter="Daniel",this._audioData=z.CurrentEmotionAudioData;var b;switch(b=m.__cast(a.target,createjs.DisplayObject).name){case"elaDeck":this._activeCharacter="Elaina",this.takeTurnWith();break;case"danDeck":this._activeCharacter="Daniel",this.takeTurnWith();break;case"katDeck":this._activeCharacter="Katerina",this.takeTurnWith();break;case"oDeck":this._activeCharacter="Owl",this.takeTurnWith();break;case"wedDeck":this._activeCharacter="Wednesday",this.takeTurnWith();break;case"playerDeck":this._activeCharacter="Player",this.triggerPlayerFlow()}},start:function(){if(this._rigs.get("Daniel").loopAnimation(this._rigs.get("Daniel").anims.idle),this._rigs.get("Elaina").loopAnimation(this._rigs.get("Elaina").anims.idle),this._rigs.get("Katerina").loopAnimation(this._rigs.get("Katerina").anims.idle),this._rigs.get("Owl").loopAnimation(this._rigs.get("Owl").anims.idle),this._rigs.get("Wednesday").loopAnimation(this._rigs.get("Wednesday").anims.idle),z.introSeen||this._data.debug){var a=S.randomIntRange(0,this._data.returnAudio.length,!1);createjs.Tween.get(this).wait(700,!0).call((T=Q.instance,d(T,T.playVO)),[this._data.returnAudio[a],d(this,this.startAutoPickTimer)])}else z.introSeen=!0,this._activeCharacter="Daniel",Q.instance.playVO(this._data.introAudio,d(this,this.introCharacterSelect))},startAutoPickTimer:function(){this.turnOnDecks(),createjs.Tween.removeTweens(this),createjs.Tween.get(this).wait(S.randomIntRange(this._data.minWait,this._data.maxWait),!0).call(d(this,this.pickRandomCharacter))},pickRandomCharacter:function(){this.turnOffDecks(),this._activeCharacter=z.Characters.splice(S.randomIntRange(0,z.Characters.length-z.Playthrough%z.Characters.length,!1),1)[0],z.Characters.push(this._activeCharacter),this.takeTurnWith()},sendDanToIdle:function(a){this._rigs.get("Daniel").playAnimation(this._rigs.get("Daniel").anims.idle)},turnOnDecks:function(){for(var a=0,b=this._data.decks.length;b>a;){var c=a++,e=this._interactiveMap.get(this._data.decks[c]);e.addEventListener("mousedown",d(this,this.onDeckClicked),null)}var f=this._rigs.get("Daniel");f.addEventListener("mousedown",d(this,this.onCharacterClicked),null);var g=this._rigs.get("Elaina");g.addEventListener("mousedown",d(this,this.onCharacterClicked),null);var h=this._rigs.get("Katerina");h.addEventListener("mousedown",d(this,this.onCharacterClicked),null);var i=this._rigs.get("Owl");i.addEventListener("mousedown",d(this,this.onCharacterClicked),null);var j=this._rigs.get("Wednesday");j.addEventListener("mousedown",d(this,this.onCharacterClicked),null)},onCharacterClicked:function(a){this.turnOffDecks();var b=m.__cast(a.currentTarget,v).get_characterId();switch(b){case"Daniel":this._activeCharacter="Daniel";break;case"Elaina":this._activeCharacter="Elaina";break;case"Katerina":this._activeCharacter="Katerina";break;case"Owl":this._activeCharacter="Owl";break;case"Wednesday":this._activeCharacter="Wednesday"}this.takeTurnWith()},turnOffDecks:function(){createjs.Tween.removeTweens(this);for(var a=0,b=this._data.decks.length;b>a;){var c=a++,e=this._interactiveMap.get(this._data.decks[c]);e.removeEventListener("mousedown",d(this,this.onDeckClicked),null)}var f=this._rigs.get("Daniel");f.removeEventListener("mousedown",d(this,this.onCharacterClicked),null);var g=this._rigs.get("Elaina");g.removeEventListener("mousedown",d(this,this.onCharacterClicked),null);var h=this._rigs.get("Katerina");h.removeEventListener("mousedown",d(this,this.onCharacterClicked),null);var i=this._rigs.get("Owl");i.removeEventListener("mousedown",d(this,this.onCharacterClicked),null);var j=this._rigs.get("Wednesday");j.removeEventListener("mousedown",d(this,this.onCharacterClicked),null)},introCharacterSelect:function(){this._rigs.get("Daniel").playAnimation(this._rigs.get("Daniel").anims.goFirst,d(this,this.triggerCloseShot))},triggerCloseShot:function(a){this.dispatchEvent(new E("shotChangeRequest","closeupShot",this._activeCharacter))},triggerPlayerFlow:function(){this.turnOffDecks(),this._playerCard=new s,this._playerCard.addCardBack(this._assets.getBitmap("card_back")),this._playerCard.addCardFront(this._assets.getBitmap("blank_front"),this._assets.getBitmap("cardScene")),this._playerCard.initialize(!1),this._playerCard.addFlipSFX(this._data.flipSFX),this._playerCard.DRAW_SIZE=z._sceneData.brushSize,this._playerCard.addCallback(d(this,this.onPlayerCardFlipped)),this._playerCard.setTransform(640,400,.1,.1),this._playerCard.alpha=0,this._playerCard.scaleX=this._playerCard.scaleY=.3,this.addChild(this._playerCard),createjs.Tween.get(this._playerCard).to({scaleX:.75,scaleY:.75,alpha:1},600,createjs.Ease.quadOut).wait(400,!0).call((T=this._playerCard,d(T,T.jiggle)))},onPlayerCardFlipped:function(){Q.instance.playVO(this._audioData.harrietLinks.whisper[0],d(this,this.onWaitForPlayerFace))},onWaitForPlayerFace:function(){this._playerCard.cache(this._playerCard.getBounds().width*-.5,this._playerCard.getBounds().height*-.5,this._playerCard.getBounds().width,this._playerCard.getBounds().height),createjs.Tween.removeTweens(this._playerCard),createjs.Tween.get(this._playerCard).to({y:500,scaleX:.3,scaleY:.3,rotation:0},600,createjs.Ease.quadIn).wait(3500,!0).call(d(this,this.teacherRequest))},teacherRequest:function(){createjs.Tween.removeTweens(this),Q.instance.playVO(this._audioData.harrietLinks.request[0],d(this,this.kidsReact))},kidsReact:function(){this._rigs.get("Daniel").playAnimation(f.field(this._rigs.get("Daniel").anims,this._audioData.emotion).wideShot,d(this,this.resetShot)),this._rigs.get("Elaina").playAnimation(f.field(this._rigs.get("Elaina").anims,this._audioData.emotion).wideShot),this._rigs.get("Katerina").playAnimation(f.field(this._rigs.get("Katerina").anims,this._audioData.emotion).wideShot),this._rigs.get("Owl").playAnimation(f.field(this._rigs.get("Owl").anims,this._audioData.emotion).wideShot),this._rigs.get("Wednesday").playAnimation(f.field(this._rigs.get("Wednesday").anims,this._audioData.emotion).wideShot),this.dispatchEvent(new r("emotionChangeEvent")),this._playerCard.addCallback(null),this._playerCard.turnOff(),createjs.Tween.get(this._playerCard).to({scaleX:.35,scaleY:0},200,createjs.Ease.backIn).call((T=this._playerCard,d(T,T.adjustSides))).to({scaleX:.3,scaleY:.3,alpha:0},200,createjs.Ease.backOut)},resetShot:function(a){createjs.Tween.removeTweens(this._playerCard),this.removeChild(this._playerCard),this._playerCard.destroy(),this._playerCard=null,this.start()},triggerCardShot:function(){createjs.Tween.removeTweens(this),this.dispatchEvent(new E("shotChangeRequest","cardShot",this._audioData.emotion))},takeTurnWith:function(){var a=this._rigs.get(this._activeCharacter).anims.myTurn;this._rigs.get(this._activeCharacter).playAnimation(a[Math.floor(a.length*Math.random())],d(this,this.triggerCloseShot))},dispose:function(){},addEmotionChangeCallback:function(a){this._emotionChangeCallback=a},__class__:F});var G=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};G.__name__=["sg","cjs","AssetLoader"],G.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",d(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b},__class__:G};var H=function(a,b,c,e,f){this._game=b,this._app=a,a.on("resize",d(this,this.onResize)),this.setBaseDimensions(new createjs.Rectangle(0,0,e,f)),this.onResize(c.canvas.width,c.canvas.height)};H.__name__=["sg","cjs","ScaleHandler"],H.prototype={setBaseDimensions:function(a){this._baseDimennsions=a},onResize:function(a,b){H.scale=a/this._baseDimennsions.width,this._game.scaleX=this._game.scaleY=H.scale,H.currentDimensions=new createjs.Rectangle(0,0,this._baseDimennsions.width*H.scale,this._baseDimennsions.height*H.scale)},__class__:H};var I=function(a,b,c,d,e){null==e&&(e=!1),null==d&&(d=!1),createjs.Event.call(this,a,d,e),this.sceneId=b,this.data=c};I.__name__=["sg","cjs","SceneLoadEvent"],I.__super__=createjs.Event,I.prototype=c(createjs.Event.prototype,{get_sceneId:function(){return this.sceneId},get_data:function(){return this.data},__class__:I});var J=function(a,b,c,d){null==d&&(d=5),null==c&&(c="#FFFFFF"),null==b&&(b=15),createjs.Container.call(this),this.x=a.x,this.y=a.y;for(var e=0;d>e;){var f=(e++,a.clone());this.addChild(f),f.x=0,f.y=0,f.shadow=new createjs.Shadow(c,0,0,b),f.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b)}this.cache(-b+a.getBounds().x,-b+a.getBounds().y,a.getBounds().width+2*b,a.getBounds().height+2*b),this.removeAllChildren()};J.__name__=["sg","cjs","ui","Glow"],J.__super__=createjs.Container,J.prototype=c(createjs.Container.prototype,{__class__:J});var K=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over?this._down=this._over:this._down=c,this.addChild(this._hitbox)};K.__name__=["sg","cjs","ui","HoverButton"],K.__super__=createjs.Container,K.prototype=c(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",d(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",d(this,this.onOver)),this._hitbox.addEventListener("mouseout",d(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",d(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",d(this,this.onOver)),this._hitbox.removeEventListener("mouseout",d(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(null!=this._over&&(this._over.visible=!1),this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:K});var L=function(){};L.__name__=["sg","cjs","utils","PointUtils"],L.findAngle=function(a,b,c){var d=Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2),e=Math.pow(b.x-c.x,2)+Math.pow(b.y-c.y,2),f=Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2);return Math.acos((e+d-f)/Math.sqrt(4*e*d))};var M=function(){G.call(this,M.manifest(),"loadingSpriteSheet","loadingData")};M.__name__=["sg","cjs","views","LoadingAnimation"],M.get_instance=function(){return null==M.instance&&(M.instance=new M),M.instance},M.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},M.load=function(a){M.get_instance().loadSpriteSheet(a)},M.loadingAnimation=function(){return new createjs.Sprite(M.get_instance()._spriteSheet,"Loading")},M.__super__=G,M.prototype=c(G.prototype,{__class__:M});var N=function(){y.call(this)};N.__name__=["sg","cjs","views","LoadingScreen"],N.__super__=y,N.prototype=c(y.prototype,{init:function(){this._assets=new P(this.getImageManifest(),this.getAudioManifest(),d(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:N});var O=function(a,b){this._started=!1,this.name=a,this._startCall=b};O.__name__=["sg","kit","PBSGameButler"],O.prototype={startGame:function(a,b){this._started||this._startCall(a,b)},get_name:function(){return this.name},__class__:O};var P=function(a,b,c,d){null==d&&(d=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=a,this._audioManifest=b,this._completeCallback=c,this._loadQueue=new createjs.LoadQueue(!0,d),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=Q.instance};P.__name__=["sg","pbskids","AssetPackage"],P.makeManifestItem=function(a,b,c){return{id:a,src:b,type:c}},P.makeAudioManifestItem=function(a){return{id:a}},P.prototype={load:function(){null!=this._audioManifest&&this._audioManifest.length>0?Q.instance.loadAudio(this._audioManifest,d(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(a,b){if(null!=b&&""!=b){var c=new createjs.Sprite(this._loadQueue.getResult(b),a);return c}for(var d=this._loadQueue.getItems(!0),e=0,f=d.length;f>e;){var g=e++;if("spritesheet"==d[g].item.type&&-1!=this._loadQueue.getResult(d[g].item.id).animations.indexOf(a)){var h=new createjs.Sprite(this._loadQueue.getResult(d[g].item.id),a);return h}}return null},getBitmap:function(a){var b=this._loadQueue.getResult(a);return new createjs.Bitmap(b)},getImage:function(a){return this._loadQueue.getResult(a)},getResult:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a){a.length>0?(this._loadQueue.addEventListener("complete",d(this,this.onQueueComplete),null),this._loadQueue.loadManifest(a)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(a){this._loadQueue.loadManifest(a)},onQueueComplete:function(a){this._loadQueue.removeEventListener("complete",d(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:P};var Q=function(a,b){this._callbacks=new j,this._soundMap=new j,this._sounds=new j,createjs.EventDispatcher.call(this),this._voPlayer=a,this._sound=b};Q.__name__=["sg","pbskids","audio","SRAudioManager"],Q.init=function(a){null==Q.instance&&(Q.instance=new Q(a.voPlayer,a.sound))},Q.__super__=createjs.EventDispatcher,Q.prototype=c(createjs.EventDispatcher.prototype,{playAudio:function(a,b){var c=this._sound.play(a,b);return c},loopAudio:function(a){var b={loop:-1},c=this._sound.play(a,b);return c},playVO:function(a,b,c){null==c&&(c=!0),c||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(a,b)):window.console.log("VO dropped due to conflicting VO playing. "+a+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(a){this._sound.stop(a)},stopVO:function(a){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(a){},handleComplete:function(a){null!=function(b){var c,d=a.currentTarget.uniqueId;return c=b._callbacks.get(d)}(this)&&function(b){var c,d=a.currentTarget.uniqueId;return c=b._callbacks.get(d)}(this)(),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).stop(),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).removeEventListener("complete",d(this,this.handleComplete)),function(b){var c,d=a.currentTarget.uniqueId;return c=b._sounds.get(d)}(this).removeEventListener("failed",d(this,this.handleFailed));var b=a.currentTarget.uniqueId;this._sounds.set(b,null);var c=a.currentTarget.uniqueId;this._sounds.remove(c);var e=a.currentTarget.uniqueId;this._callbacks.set(e,null);var f=a.currentTarget.uniqueId;this._callbacks.remove(f)},loadAudio:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}this._sound.preload(c,b)},queueLoaded:function(a){},__class__:Q});var R=function(){};R.__name__=["sg","springroll","logging","Logging"],R.log=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.log(a))},R.getCallerString=function(a){if(null==a)return"";var b=h.getClassName(a).split(".");return"["+b[b.length-1]+"] "},R.clear=function(){R.enabled&&springroll.Debug.clear()},R.debug=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.debug(a))},R.error=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.error(a))},R.info=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.info(a))},R.trace=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.trace(a))},R.aqua=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.aqua(a))},R.blue=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.blue(a))},R.gray=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.gray(a))},R.green=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.green(a))},R.lime=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.lime(a))},R.maroon=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.maroon(a))},R.navy=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.navy(a))},R.olive=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.olive(a))},R.orange=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.orange(a))},R.pink=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.pink(a))},R.purple=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.purple(a))},R.red=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.red(a))},R.silver=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.silver(a))},R.teal=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.teal(a))},R.yellow=function(a,b){R.enabled&&(null!=b&&(a=R.getCallerString(b)+g.string(a)),springroll.Debug.yellow(a))};var S=function(){};S.__name__=["sg","utils","MathUtils"],S.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)},S.randomIntRange=function(a,b,c){return null==c&&(c=!0),c&&b++,Math.floor(Math.random()*(b-a)+a)},S.randomRange=function(a,b){return Math.random()*(b-a)+a},S.prototype={__class__:S};var T,U=0;String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"];var V={__name__:["Int"]},W={__name__:["Dynamic"]},X=Number;X.__name__=["Float"];var Y=Boolean;Y.__ename__=["Bool"];var Z={__name__:["Class"]},$={};createjs.DisplayObject.prototype.setBounds=function(a,b,c,d){this._bounds=null!=a?(this._bounds||new createjs.Rectangle).setValues(a,b,c,d):null};var _={};m.__toStr={}.toString,n.GAME_WIDTH=1280,n.GAME_HEIGHT=800,n.GAME_INTRO="gameIntro",n.GAME_SCENE="gameScene",n.GAME_DATA="gameData",n.CHARATER_DATA="charaterData",n.TITLESCREEN_DATA="titlescreenData",n.WIDE_SHOT="wideShot",n.CLOSEUP_SHOT="closeupShot",n.CARD_SHOT="cardShot",n.IMAGE="image",n.CHARACTER="character",n.SPRITE="sprite",n.CUSTOM="custom",n.CHARACTER_DANIEL="Daniel",n.CHARACTER_KATERINA="Katerina",n.CHARACTER_O="Owl",n.CHARACTER_WEDNESDAY="Wednesday",n.CHARACTER_ELAINA="Elaina",n.CHARACTER_PLAYER="Player",n.EMOTION_MAD="mad",n.EMOTION_SAD="sad",n.EMOTION_HAPPY="happy",n.EMOTION_FRUSTRATED="frustrated",n.EMOTION_BRAVE="brave",o.DT_LOADING_SS="loadingScreenSheet",q.LOAD_MIN_TIME=500,q.Playthrough=0,r.CHANGE_EMOTION="emotionChangeEvent",s.FRONT="front",s.BACK="back",w.GAME_NAME="GuessTheFeeling",y.COMPLETE="complete",z.emotions=["mad","sad","happy","frustrated","brave"],z.Characters=["Daniel","Elaina","Katerina","Owl","Wednesday"],z.introSeen=!1,z.Playthrough=0,A.TITLE_SCREEN_SS="titleScreenSS",C.INTERACTIVE_CARD="interactive_card",D.TOTAL_PROMPTS=2,D.CHARACTER_ASSET="dynamic_character",E.SHOT_CHANGE_REQUEST="shotChangeRequest",E.CHANGE_EMOTION="changeEmotion",F.DISPLAY_DECK="deck",H.scale=1,I.SCENE_REQUEST="sceneRequest",K.ACTIVATED="activated",K.DOWN="down",K.OVER="over",M.SPRITESHEET="loadingSpriteSheet",M.DATA="loadingData",N.READY="ready",R.enabled=!0,w.main()}("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);