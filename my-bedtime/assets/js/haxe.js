!function(t){"use strict";function e(e,t){function i(){}i.prototype=e;var s=new i;for(var n in t)s[n]=t[n];return t.toString!==Object.prototype.toString&&(s.toString=t.toString),s}function m(){}m.__name__=["HxOverrides"],m.substr=function(e,t,i){if(null==i)i=e.length;else if(i<0){if(0!=t)return"";i=e.length+i}return e.substr(t,i)},Math.__name__=["Math"];function p(){}p.__name__=["Std"],p.string=function(e){return b.__string_rec(e,"")};function i(){}i.__name__=["Type"],i.getClassName=function(e){var t=e.__name__;return null==t?null:t.join(".")};function s(){}s.__name__=["haxe","IMap"];function f(){this.h={}}f.__name__=["haxe","ds","StringMap"],f.__interfaces__=[s],f.prototype={setReserved:function(e,t){null==this.rh&&(this.rh={}),this.rh["$"+e]=t},getReserved:function(e){return null==this.rh?null:this.rh["$"+e]},existsReserved:function(e){return null!=this.rh&&this.rh.hasOwnProperty("$"+e)},remove:function(e){return null!=P[e]?(e="$"+e,!(null==this.rh||!this.rh.hasOwnProperty(e))&&(delete this.rh[e],!0)):!!this.h.hasOwnProperty(e)&&(delete this.h[e],!0)},__class__:f};function n(){}n.__name__=["haxe","macro","Error"],n.prototype={toString:function(){return this.message},__class__:n};var a=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,a)};a.__name__=["js","_Boot","HaxeError"],a.wrap=function(e){return e instanceof Error?e:new a(e)},a.__super__=Error,a.prototype=e(Error.prototype,{__class__:a});var b=function(){};b.__name__=["js","Boot"],b.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var i=b.__nativeClassName(e);return null!=i?b.__resolveNativeClass(i):null},b.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var s=e[0]+"(";t+="\t";for(var n=2,a=e.length;n<a;){var o=n++;s+=2!=o?","+b.__string_rec(e[o],t):b.__string_rec(e[o],t)}return s+")"}var r="[";t+="\t";for(var l=0,_=e.length;l<_;){var h=l++;r+=(0<h?",":"")+b.__string_rec(e[h],t)}return r+="]"}var d;try{d=e.toString}catch(e){return"???"}if(null!=d&&d!=Object.toString&&"function"==typeof d){var g=e.toString();if("[object Object]"!=g)return g}var u=null,c="{\n";t+="\t";var m=null!=e.hasOwnProperty;for(var u in e)m&&!e.hasOwnProperty(u)||"prototype"!=u&&"__class__"!=u&&"__super__"!=u&&"__interfaces__"!=u&&"__properties__"!=u&&(2!=c.length&&(c+=", \n"),c+=t+u+" : "+b.__string_rec(e[u],t));return c+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},b.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var s=0,n=i.length;s<n;){var a=i[s++];if(a==t||b.__interfLoop(a,t))return!0}return b.__interfLoop(e.__super__,t)},b.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case L:return"boolean"==typeof e;case T:return!0;case B:return"number"==typeof e;case O:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(b.__interfLoop(b.getClass(e),t))return!0}else if("object"==typeof t&&b.__isNativeObj(t)&&e instanceof t)return!0;return t==j&&null!=e.__name__||(t==E&&null!=e.__ename__||e.__enum__==t)}},b.__cast=function(e,t){if(b.__instanceof(e,t))return e;throw new a("Cannot cast "+p.string(e)+" to "+p.string(t))},b.__nativeClassName=function(e){var t=b.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},b.__isNativeObj=function(e){return null!=b.__nativeClassName(e)},b.__resolveNativeClass=function(e){return t[e]};function o(){createjs.Container.call(this),this._bg=new createjs.Shape,this._drawBG(l.SpringrollApp.display.width,l.SpringrollApp.display.height),this.addChild(this._bg),this._trolleyContainer=new createjs.Container,this.addChild(this._trolleyContainer),this._trolley=new createjs.Container,this._trolleyContainer.addChild(this._trolley),this._assets=new k(this.getImageManifest(),this.getAudioManifest(),ve(this,this.onPackageReady)),this._assets.load()}o.__name__=["pbsdaniel","DTLoadingScreen"],o.__super__=createjs.Container,o.prototype=e(createjs.Container.prototype,{onResize:function(e,t){this._drawBG(e,t),this._trolleyContainer.set({x:e/2,y:t/2})},_drawBG:function(e,t){this._bg.graphics.clear(),this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,e,t),this._bg.graphics.endFill()},start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut),l.SpringrollApp.on("resize",ve(this,this.onResize))},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley),l.SpringrollApp.off("resize",ve(this,this.onResize))},onPackageReady:function(){var e=this._assets.getSpriteFromSheet("loadingTrolley");w.setRegs(e,.5,1.05),this._trolley.addChild(e),this._text=this._assets.getSpriteFromSheet("loadingText"),w.setRegs(this._text,.5,-.05),this._trolleyContainer.addChild(this._text),this.onResize(l.SpringrollApp.display.width,l.SpringrollApp.display.height)},getImageManifest:function(){var e=[];return e.push(k.makeManifestItem("loadingScreenSheet","assets/sheets/loading.json","spritesheet")),e},getAudioManifest:function(){return[]},__class__:o});function r(e){this.bedtime_bgPatchBathroomDoorOpen_frames=[0],this.switchOff_frames=[17],this.tigey_frames=[16],this.tigey_inBedasset_frames=[28],this.bedtime_nightlight_on_leftside_frames=[8],this.radio_asset_frames=[14],this.lampOn_frames=[1],this.farLeftStar_asset_frames=[24],this.farRightstar_asset_frames=[26],this.bedtime_nightlight_on_rightside_frames=[12],this.bedtime_bookshelf_without_book_frames=[9],this.radio_asset_on_frames=[15],this.bedtime_bgPatchEntrywayWithPortrait_frames=[2],this.sun_asset_frames=[21],this.tigey_asset_frames=[27],this.bedtime_deskDrawerClosed_frames=[23],this.moon_asset_frames=[22],this.leftStar_asset_frames=[19],this.bedtime_windowDaytime_frames=[7],this.bedtime_windowAtNight_frames=[4],this.bedtime_blankieOnBed_frames=[10],this.bedtime_bookshelf_withBook_frames=[5],this.bedtime_book_frames=[13],this.lampOff_frames=[6],this.tigey_hover_frames=[25],this.switchOn_frames=[18],this.rightStar_asset_frames=[20],this.bedtime_bgPatchBathroomDoorClosed_frames=[3],this.bedtime_deskdrawer_openwithBlanket_frames=[11],this.playBtn=e.getSpriteFromSheet("playBtn"),this.playBtn.name="playBtn",this.playBtnDown=e.getSpriteFromSheet("playBtnDown"),this.playBtnDown.name="playBtnDown",this.bedtime_deskdrawer_openwithBlanket=e.getSpriteFromSheet("bedtime_deskdrawer_openwithBlanket"),this.bedtime_deskdrawer_openwithBlanket.name="bedtime_deskdrawer_openwithBlanket",this.bedtime_bgPatchBathroomDoorClosed=e.getSpriteFromSheet("bedtime_bgPatchBathroomDoorClosed"),this.bedtime_bgPatchBathroomDoorClosed.name="bedtime_bgPatchBathroomDoorClosed",this.rightStar_asset=e.getSpriteFromSheet("rightStar_asset"),this.rightStar_asset.name="rightStar_asset",this.switchOn=e.getSpriteFromSheet("switchOn"),this.switchOn.name="switchOn",this.tigey_hover=e.getSpriteFromSheet("tigey_hover"),this.tigey_hover.name="tigey_hover",this.lampOff=e.getSpriteFromSheet("lampOff"),this.lampOff.name="lampOff",this.bedtime_book=e.getSpriteFromSheet("bedtime_book"),this.bedtime_book.name="bedtime_book",this.bedtime_bookshelf_withBook=e.getSpriteFromSheet("bedtime_bookshelf_withBook"),this.bedtime_bookshelf_withBook.name="bedtime_bookshelf_withBook",this.bedtime_blankieOnBed=e.getSpriteFromSheet("bedtime_blankieOnBed"),this.bedtime_blankieOnBed.name="bedtime_blankieOnBed",this.bedtime_windowAtNight=e.getSpriteFromSheet("bedtime_windowAtNight"),this.bedtime_windowAtNight.name="bedtime_windowAtNight",this.bedtime_windowDaytime=e.getSpriteFromSheet("bedtime_windowDaytime"),this.bedtime_windowDaytime.name="bedtime_windowDaytime",this.leftStar_asset=e.getSpriteFromSheet("leftStar_asset"),this.leftStar_asset.name="leftStar_asset",this.moon_asset=e.getSpriteFromSheet("moon_asset"),this.moon_asset.name="moon_asset",this.bedtime_deskDrawerClosed=e.getSpriteFromSheet("bedtime_deskDrawerClosed"),this.bedtime_deskDrawerClosed.name="bedtime_deskDrawerClosed",this.tigey_asset=e.getSpriteFromSheet("tigey_asset"),this.tigey_asset.name="tigey_asset",this.sun_asset=e.getSpriteFromSheet("sun_asset"),this.sun_asset.name="sun_asset",this.bedtime_bgPatchEntrywayWithPortrait=e.getSpriteFromSheet("bedtime_bgPatchEntrywayWithPortrait"),this.bedtime_bgPatchEntrywayWithPortrait.name="bedtime_bgPatchEntrywayWithPortrait",this.radio_asset_on=e.getSpriteFromSheet("radio_asset_on"),this.radio_asset_on.name="radio_asset_on",this.bedtime_bookshelf_without_book=e.getSpriteFromSheet("bedtime_bookshelf_without_book"),this.bedtime_bookshelf_without_book.name="bedtime_bookshelf_without_book",this.bedtime_nightlight_on_rightside=e.getSpriteFromSheet("bedtime_nightlight_on_rightside"),this.bedtime_nightlight_on_rightside.name="bedtime_nightlight_on_rightside",this.farRightstar_asset=e.getSpriteFromSheet("farRightstar_asset"),this.farRightstar_asset.name="farRightstar_asset",this.farLeftStar_asset=e.getSpriteFromSheet("farLeftStar_asset"),this.farLeftStar_asset.name="farLeftStar_asset",this.lampOn=e.getSpriteFromSheet("lampOn"),this.lampOn.name="lampOn",this.radio_asset=e.getSpriteFromSheet("radio_asset"),this.radio_asset.name="radio_asset",this.bedtime_nightlight_on_leftside=e.getSpriteFromSheet("bedtime_nightlight_on_leftside"),this.bedtime_nightlight_on_leftside.name="bedtime_nightlight_on_leftside",this.tigey_inBedasset=e.getSpriteFromSheet("tigey_inBedasset"),this.tigey_inBedasset.name="tigey_inBedasset",this.tigey=e.getSpriteFromSheet("tigey"),this.tigey.name="tigey",this.switchOff=e.getSpriteFromSheet("switchOff"),this.switchOff.name="switchOff",this.bedtime_bgPatchBathroomDoorOpen=e.getSpriteFromSheet("bedtime_bgPatchBathroomDoorOpen"),this.bedtime_bgPatchBathroomDoorOpen.name="bedtime_bgPatchBathroomDoorOpen",this.All=[this.playBtn,this.playBtnDown,this.bedtime_deskdrawer_openwithBlanket,this.bedtime_bgPatchBathroomDoorClosed,this.rightStar_asset,this.switchOn,this.tigey_hover,this.lampOff,this.bedtime_book,this.bedtime_bookshelf_withBook,this.bedtime_blankieOnBed,this.bedtime_windowAtNight,this.bedtime_windowDaytime,this.leftStar_asset,this.moon_asset,this.bedtime_deskDrawerClosed,this.tigey_asset,this.sun_asset,this.bedtime_bgPatchEntrywayWithPortrait,this.radio_asset_on,this.bedtime_bookshelf_without_book,this.bedtime_nightlight_on_rightside,this.farRightstar_asset,this.farLeftStar_asset,this.lampOn,this.radio_asset,this.bedtime_nightlight_on_leftside,this.tigey_inBedasset,this.tigey,this.switchOff,this.bedtime_bgPatchBathroomDoorOpen]}r.__name__=["pbsdaniel","bedtime","Assetizer"],r.prototype={__class__:r};function y(e,t,i,s){var o=this;window.console.log("Bedroom.new()"),this._daniel=t,this._stage=s,this._mobileParts=[],this._mobileY=[],this._reusePoint=new createjs.Point,this._reuseRect=new createjs.Rectangle,this._previousMousePoint=new createjs.Point,this._layer=i,this._darkBackground=this._layer.getChildAt(0).clone(),this._layer.addChildAt(this._darkBackground,1);var n=this._layer.getChildAt(0).getBounds();this._darkBackground.filters=[new createjs.ColorFilter(.3,.3,.3)],this._darkBackground.cache(0,0,n.width,n.height),this._darkBackground.alpha=0,this._a=e,this._tigeySlot=t.armature.getSlot("tigey"),this._tigeyDisplay=this._tigeySlot.getDisplay(),this._tigeyGlow=new fe(this._tigeyDisplay,60,"#FFFFFF",5,!0),this._tigeySlot.setDisplay(null),this._tigeyDisplay.on("mouseover",function(e){o._tigeyToggle.get_active()||o._tigeySlot.setDisplay(o._tigeyGlow)}),this._tigeyGlow.on("mouseout",function(e){o._tigeyToggle.get_active()||o._tigeySlot.setDisplay(o._tigeyDisplay)}),this._tigeyGlow.on("mousedown",function(e){o._tigeyToggle.get_active()||o._tigeyToggle.toggle()}),this._tigeyDisplay.on("mousedown",function(e){o._tigeyToggle.get_active()||o._tigeyToggle.toggle()});var a=e.tigey_asset,r=new be(a,new fe(a,15,"#FFFFFF"));r.name=a.name,r.turnOn(),null!=this._layer&&this._layer.addChild(r),this._tigeyToggle=new me(null,r,ve(this,this.tigeyToggle)),this._tigeyToggle.setActivateSound("bedtime_tigey_move_to_bed"),this._tigeyToggle.setDeactivateSound("bedtime_tigey_move_to_desk");var l=e.bedtime_bgPatchEntrywayWithPortrait,_=new be(l,new fe(l,15,"#FFFFFF"));_.name=l.name,_.turnOn(),null!=this._layer&&this._layer.addChild(_);var h=e.bedtime_bgPatchEntrywayWithPortrait,d=new be(h,new fe(h,15,"#FFFFFF"));d.name=h.name,d.turnOn(),null!=this._layer&&this._layer.addChild(d),this._bedroomDoorToggle=new me(_,d,ve(this,this.bedroomDoorToggle)),this._bedroomDoorToggle.setActivateSound("bedtime_parents_goodnight",!0,!1,!0);var g=e.bedtime_bgPatchBathroomDoorClosed,u=new be(g,new fe(g,15,"#FFFFFF"));u.name=g.name,u.turnOn(),null!=this._layer&&this._layer.addChild(u);var c=e.bedtime_bgPatchBathroomDoorOpen,m=new be(c,new fe(c,15,"#FFFFFF"));m.name=c.name,m.turnOn(),null!=this._layer&&this._layer.addChild(m),this._bathroomDoorToggle=new me(u,m),this._bathroomDoorToggle.setActivateSound("bedtime_bathroom_door_close"),this._bathroomDoorToggle.setDeactivateSound("bedtime_bathroom_door_close");var p=e.bedtime_windowDaytime,f=new be(p,new fe(p,15,"#FFFFFF"));f.name=p.name,f.turnOn(),null!=this._layer&&this._layer.addChild(f);var b=e.bedtime_windowAtNight,y=new be(b,new fe(b,15,"#FFFFFF"));y.name=b.name,y.turnOn(),null!=this._layer&&this._layer.addChild(y),this._windowToggle=new pe(f,y,null,.02,ve(this,this.checkLightState),ve(this,this.setDarkness)),this._windowToggle.setActivateSound("bedtime_window_day_to_night"),this._windowToggle.setDeactivateSound("bedtime_window_night_to_day");var v=e.bedtime_deskdrawer_openwithBlanket,w=new be(v,new fe(v,15,"#FFFFFF"));w.name=v.name,w.turnOn(),null!=this._layer&&this._layer.addChild(w);var S=e.bedtime_deskDrawerClosed,k=new be(S,new fe(S,15,"#FFFFFF"));k.name=S.name,k.turnOn(),null!=this._layer&&this._layer.addChild(k),this._blankieToggle=new me(w,k,ve(this,this.blankieToggle)),this._blankieToggle.setActivateSound("bedtime_blanket_move_to_bed"),this._blankieToggle.setDeactivateSound("bedtime_blanket_move_to_dresser"),t.armature.getSlot("blanket").setVisible(!1);var C=e.bedtime_bookshelf_withBook,F=new be(C,new fe(C,15,"#FFFFFF"));F.name=C.name,F.turnOn(),null!=this._layer&&this._layer.addChild(F);var D=e.bedtime_bookshelf_without_book,A=new be(D,new fe(D,15,"#FFFFFF"));A.name=D.name,A.turnOn(),null!=this._layer&&this._layer.addChild(A),this._bookToggle=new me(F,A,ve(this,this.bookToggle)),this._bookToggle.setActivateSound("DadSong",!0);var O=e.bedtime_book,T=new be(O,new fe(O,15,"#FFFFFF"));T.name=O.name,T.turnOn(),null!=this._layer&&this._layer.addChild(T),this._openBook=T,this._openBook.visible=!1,this._openBook.addEventListener("mousedown",function(e){o._bookToggle.toggle()},null);var B=e.lampOn,L=new be(B,new fe(B,15,"#FFFFFF"));L.name=B.name,L.turnOn(),null!=this._layer&&this._layer.addChild(L);var j=L,E=new createjs.Shape;E.graphics.beginFill("black").rect(34,33,92,170),j.hitArea=E;var P=e.lampOff,x=new be(P,new fe(P,15,"#FFFFFF"));x.name=P.name,x.turnOn(),null!=this._layer&&this._layer.addChild(x),this._nightlightToggle=new me(x,j,ve(this,this.checkRoomState)),this._nightlightToggle.setActivateSound("bedtime_switch_on"),this._nightlightToggle.setDeactivateSound("bedtime_switch_off");var M=e.switchOn,R=new be(M,new fe(M,15,"#FFFFFF"));R.name=M.name,R.turnOn(),null!=this._layer&&this._layer.addChild(R);var I=e.switchOff,N=new be(I,new fe(I,15,"#FFFFFF"));N.name=I.name,N.turnOn(),null!=this._layer&&this._layer.addChild(N),this._lightToggle=new me(R,N,ve(this,this.checkLightState)),this._lightToggle.setActivateSound("bedtime_switch_on"),this._lightToggle.setDeactivateSound("bedtime_switch_off");var G=e.radio_asset,Y=new be(G,new fe(G,15,"#FFFFFF"));Y.name=G.name,Y.turnOn(),null!=this._layer&&this._layer.addChild(Y);var Q=e.radio_asset_on,V=new be(Q,new fe(Q,15,"#FFFFFF"));V.name=Q.name,V.turnOn(),null!=this._layer&&this._layer.addChild(V),this._radioToggle=new me(Y,V,ve(this,this.radioToggle)),this._radioToggle.setActivateSound("bedtime_radio_on",!0,!1,!0),this._radioToggle.setDeactivateSound("bedtime_radio_off"),this._daniel.playAnimation("idle");var q=this._mobileParts,X=e.farLeftStar_asset,U=new be(X,new fe(X,15,"#FFFFFF"));U.name=X.name,U.turnOn(),null!=this._layer&&this._layer.addChild(U),q.push(U);var W=this._mobileParts,z=e.leftStar_asset,J=new be(z,new fe(z,15,"#FFFFFF"));J.name=z.name,J.turnOn(),null!=this._layer&&this._layer.addChild(J),W.push(J);var H=this._mobileParts,$=e.sun_asset,K=new be($,new fe($,15,"#FDDD3F"));K.name=$.name,K.turnOn(),null!=this._layer&&this._layer.addChild(K),H.push(K);var Z=this._mobileParts,ee=e.moon_asset,te=new be(ee,new fe(ee,15,"#FFFFFF"));te.name=ee.name,te.turnOn(),null!=this._layer&&this._layer.addChild(te),Z.push(te);var ie=this._mobileParts,se=e.rightStar_asset,ne=new be(se,new fe(se,15,"#FFFFFF"));ne.name=se.name,ne.turnOn(),null!=this._layer&&this._layer.addChild(ne),ie.push(ne);var ae=this._mobileParts,oe=e.farRightstar_asset,re=new be(oe,new fe(oe,15,"#FFFFFF"));re.name=oe.name,re.turnOn(),null!=this._layer&&this._layer.addChild(re),ae.push(re);for(var le=["bedtime_mobile_star_1","bedtime_mobile_star_2","bedtime_mobile_sun","bedtime_mobile_moon","bedtime_mobile_star_3","bedtime_mobile_star_4"],_e=0,he=le.length;_e<he;){var de=[_e++],ge=[function(i){return function(e){var t;ye.instance.playAudio(le[i[0]]),createjs.Tween.get(o._mobileParts[i[0]]).wait(777,!0).call((t=i,function(e){o._mobileParts[t[0]].forceOut()}))}}(de)];this._mobileParts[de[0]].on("plink",ge[0]),this._mobileY.push(0),this._mobileParts[de[0]].on("mousedown",function(n,a){return function(e){var t=o._mobileParts[a[0]];0==o._mobileY[a[0]]&&(o._mobileY[a[0]]=t.y),n[0](e);var i=o._mobileY[a[0]]+10,s=o._mobileY[a[0]];createjs.Tween.get(t).to({y:i},333,createjs.Ease.cubicOut).to({y:s},500,createjs.Ease.elasticInOut)}}(ge,de))}var ue=this._a.bedtime_blankieOnBed,ce=new be(ue,new fe(ue,15,"#FFFFFF"));ce.name=ue.name,ce.turnOn(),null!=this._layer&&this._layer.addChild(ce),this._bedBlankie=ce,this._bedBlankie.visible=!1,this._bedBlankie.on("mousedown",function(e){o._bedBlankie.forceOut(),o._blankieToggle.toggle()})}y.__name__=["pbsdaniel","bedtime","Bedroom"],y.prototype={RegisterStageMouseMove:function(){this._stage.on("stagemousemove",ve(this,this.onMouseMove))},ButtonUp:function(e,t){null==t&&(t="#FFFFFF");var i=new be(e,new fe(e,15,t));return i.name=e.name,i.turnOn(),null!=this._layer&&this._layer.addChild(i),i},update:function(e){this._windowToggle.update(e),this._daniel.squelchCC=ye.instance.get_voPlayer().playing},bedroomDoorToggle:function(){ye.instance.killAll(),this._radioToggle.get_active()&&this._radioToggle.toggle(!0),this._bookToggle.get_active()&&(this._bookToggle.toggle(!0),this._openBook.visible=!1)},radioToggle:function(){ye.instance.killAll(),window.console.log("radioToggle()"),this._bookToggle.get_active()&&(this._bookToggle.toggle(!0),this._openBook.visible=!1),this._bedroomDoorToggle.get_active()&&this._bedroomDoorToggle.toggle(!0)},bookToggle:function(){ye.instance.killAll(),window.console.log("bookToggle()"),this._openBook.visible=this._bookToggle.get_active(),this._radioToggle.get_active()&&this._radioToggle.toggle(!0),this._bedroomDoorToggle.get_active()&&this._bedroomDoorToggle.toggle(!0)},blankieToggle:function(){this._blankieToggle.get_active()?(this._bookToggle.get_active()&&(this._bookToggle.toggle(!0),this._openBook.visible=!1),this._bedroomDoorToggle.get_active()&&this._bedroomDoorToggle.toggle(!0),this._radioToggle.get_active()&&this._radioToggle.toggle(!0),this._bedBlankie.visible=!0,ye.instance.playVO("bedtime_daniel_blanket")):this._bedBlankie.visible=!1,this.checkRoomState()},tigeyToggle:function(){this._tigeyToggle.get_active()?this._tigeySlot.setDisplay(null):(this._bookToggle.get_active()&&(this._bookToggle.toggle(!0),this._openBook.visible=!1),this._bedroomDoorToggle.get_active()&&this._bedroomDoorToggle.toggle(!0),this._radioToggle.get_active()&&this._radioToggle.toggle(!0),ye.instance.playVO("bedtime_daniel_tigey"),this._tigeySlot.setDisplay(this._tigeyDisplay)),this.checkRoomState()},setDarkness:function(){var e=0;this._lightToggle.get_active()&&(e+=.5),0<this._windowToggle.get_activeAlpha()&&(e+=.5),this._windowToggle.get_clip1().mouseEnabled=this._windowToggle.get_clip2().mouseEnabled=!1;var t=createjs.Tween.get(this._darkBackground,{override:!0}).to({alpha:e},800),i=this._windowToggle.get_clip1(),s=this._windowToggle.get_clip1(),n=t.call(ve(i,i.set),[{mouseEnabled:!0}],s),a=this._windowToggle.get_clip2(),o=this._windowToggle.get_clip2();n.call(ve(a,a.set),[{mouseEnabled:!0}],o)},checkLightState:function(){this.setDarkness(),this.checkRoomState()},checkRoomState:function(){var t=this;this._oldScore=this._roomScore,this._roomScore=0,this._tigeyToggle.get_active()&&this._roomScore++,this._blankieToggle.get_active()&&this._roomScore++,this._nightlightToggle.get_active()&&this._roomScore++,this._lightToggle.get_active()&&this._roomScore++,this._windowToggle.get_active()&&this._roomScore++,this._radioToggle.get_active()&&this._roomScore++,window.console.log("_roomScore == "+this._roomScore),this._roomScore<2&&this._daniel.playAnimation("idle"),2==this._roomScore&&(1==this._oldScore?this._daniel.playAnimation("idleToDrowsy",function(e){t._daniel.playAnimation("drowsy")}):this._daniel.playAnimation("drowsy")),3==this._roomScore&&(2==this._oldScore?this._daniel.playAnimation("drowsyToLightsleep",function(e){t._daniel.playAnimation("lightsleep")}):this._daniel.playAnimation("lightsleep")),4==this._roomScore&&(3==this._oldScore?this._daniel.playAnimation("lightsleepToDeepsleep",function(e){t._daniel.playAnimation("deepsleep")}):this._daniel.playAnimation("deepsleep"))},keyPressReaction:function(){switch(this._keyCycle=(this._keyCycle+1)%5,this._keyCycle){case 0:this._tigeyToggle.toggle();break;case 1:this._blankieToggle.toggle();break;case 2:this._nightlightToggle.toggle();break;case 3:this._lightToggle.toggle();break;case 4:this._windowToggle.toggle()}},onMouseMove:function(e){if(e.stageY<140){var t=this._layer.globalToLocal(e.stageX,e.stageY,this._reusePoint);if(null!=this._previousMousePoint)for(var i=0,s=this._mobileParts;i<s.length;){var n=s[i];++i,this._reuseRect.x=n.x,this._reuseRect.width=n.getBounds().width,this._reuseRect.height=n.getBounds().height,!this._reuseRect.contains(this._previousMousePoint.x,this._previousMousePoint.y)&&this._reuseRect.contains(t.x,t.y)&&(n.dispatchEvent(new createjs.MouseEvent("plink",!0,!0,e.stageX,e.stageY,e,0,!0,e.stageX,e.stageY)),n.forceOver())}this._previousMousePoint.x=t.x,this._previousMousePoint.y=t.y}},ccw:function(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)},intersect:function(e,t,i,s){return this.ccw(e,i,s)!=this.ccw(t,i,s)&&this.ccw(e,t,i)!=this.ccw(e,t,s)},__class__:y};var l=function(e,t){null==t&&(t=!1);var s=this;1==(l.SpringrollApp=e).options.debug?F.enabled=!0:F.enabled=!1,F.log("New DanielGame!",l),this._stage=e.display.stage,this._stage.enableMouseOver(10),window.SRApp=e,this.BG=new createjs.Shape,this.BG.graphics.beginFill("orange").drawRect(0,0,e.options.maxWidth,e.options.maxHeight).endFill(),this._stage.addChild(this.BG),this.container=new createjs.Container,this.container.name="springrollGameContainer",this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._loadLayer.name="loadContainer",this._loadLayer.mouseChildren=!1,this._loadLayer.mouseEnabled=!1,this._gameLayer=new createjs.Container,this._gameLayer.name="gameContainer",this._debugLayer=new createjs.Container,this._debugLayer.mouseEnabled=!1,this._debugLayer.mouseChildren=!1,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),t&&this.container.addChild(this._debugLayer),createjs.Touch.enable(this._stage,!0),this.resize({width:e.display.width,height:e.display.height}),e.on("update",function(e,t,i){s.update({delta:e})}),e.on("resize",function(e,t){s.resize({width:e,height:t})})};l.__name__=["sg","pbskids","daniel","SpringrollGame"],l.prototype={resize:function(e){this._gameLayer.x=-(l.SpringrollApp.options.maxWidth-e.width)/2},begin:function(){null!=l.SpringrollApp.scaling&&F.purple(l.SpringrollApp.scaling._items)},update:function(e){this._stage.update(e)},__class__:l};var v=function(e,t){null==t&&(t=!1),this._audios=["bedtime_bathroom_door_close","bedtime_bedsheet_rustle","bedtime_blanket_move_to_bed","bedtime_blanket_move_to_dresser","bedtime_daniel_breathe_heavy","bedtime_daniel_snore_heavy","bedtime_daniel_snore_light","bedtime_desk_drawer_closing","bedtime_desk_drawer_open","bedtime_dresser_drawer_close","bedtime_dresser_drawer_open","bedtime_mobile_moon","bedtime_mobile_star_1","bedtime_mobile_star_2","bedtime_mobile_star_3","bedtime_mobile_star_4","bedtime_mobile_sun","bedtime_radio_off","bedtime_radio_on","bedtime_switch_off","bedtime_switch_on","bedtime_tigey_move_to_bed","bedtime_tigey_move_to_desk","bedtime_window_day_to_night","bedtime_window_night_to_day","bedtime_daniel_blanket","bedtime_daniel_tigey","bedtime_daniel_yawn","bedtime_parents_goodnight","bedtime_title","DadSong"],this._animations=["idle"],this._interaction=!1,this._editMode=!1,this._debug=!1,l.call(this,e,t),v.SpringrollApp=e,window.console.log("Make Loading screen"),this._loadingScreen=new o,this._loadingScreen.addEventListener("added",ve(D=this._loadingScreen,D.start)),this._loadingScreen.addEventListener("removed",ve(D=this._loadingScreen,D.freeze)),this._loadLayer.addChild(this._loadingScreen),window.console.log("Retrieve global assets"),this._globalAssets=new k(this.getGlobalData(),this._audios.map(k.makeAudioManifestItem),ve(this,this.onGlobalAssetsRetrieved)),this._globalAssets.load(),(this._debug=t)&&window.console.log("!debug!")};v.__name__=["pbsdaniel","bedtime","Bedtime"],v.__super__=l,v.prototype=e(l.prototype,{update:function(e){l.prototype.update.call(this,e),dragonBones.animation.WorldClock.clock.advanceTime(e.delta/1e3),null!=this._bedroom&&this._bedroom.update(e)},getGlobalData:function(){var e=[];return e.push(k.makeManifestItem("charaterData","assets/data/character_data.json","json")),e.push(k.makeManifestItem("bedtime-game","assets/sheets/bedtime-game.json","spritesheet")),e.push(k.makeManifestItem("just-the-play-button-spritesheet-yeah-woo","assets/sheets/titlescreen.json","spritesheet")),e.push(k.makeManifestItem("gameobjects","assets/data/gameobjects.json","text")),e.push(k.makeManifestItem("background","assets/images/environments/bedtime_background.jpg")),e.push(k.makeManifestItem("bedOverlay","assets/images/environments/trolley bed overlay.png")),e.push(k.makeManifestItem("intro","assets/images/environments/intro_bedtime.jpg")),e},onGlobalAssetsRetrieved:function(){window.console.log("global assets retrieved"),this._a=new r(this._globalAssets),this._loadLayer.removeAllChildren();var e=this._globalAssets.getResult("charaterData");window.console.log(e),this._danielDataMysteries=e.characters[0],window.console.log(this._danielDataMysteries),this._daniel=new C(this._danielDataMysteries,ve(this,this.onDanielLoaded))},onDanielLoaded:function(){var l=this;window.console.log("Daniel loaded"),this._daniel.scaleX=1,this._daniel.scaleY=1,window.document.onkeydown=function(e){e.keyCode;if(69==e.keyCode&&l._debug)if(l._editMode){for(var t=0,i=l._gameLayer.children;t<i.length;){var s=i[t];++t,s.removeEventListener("pressmove",ve(l,l.EditMoveHandler),null)}l._editMode=!1,window.console.log(l.GameObjectsToJSON()),l._bedroom.RegisterStageMouseMove()}else{for(var n=0,a=l._gameLayer.children;n<a.length;){var o=a[n];++n;var r=o;r.removeAllEventListeners(),r.addEventListener("pressmove",ve(l,l.EditMoveHandler),null)}l._editMode=!0}};var e=this._globalAssets.getBitmap("background");e.name="background",this._gameLayer.addChildAt(e,0),e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,window.console.log("bg bounds = "+p.string(e.getBounds())),this._gameLayer.addChild(this._daniel),this._daniel.x=200,this._daniel.y=500,this._daniel.name="daniel";var t=this._globalAssets.getBitmap("bedOverlay");t.name="bedOverlay",this._gameLayer.addChild(t),this._objects=[this._a.radio_asset_on,this._a.switchOff,this._a.bedtime_bookshelf_withBook,this._a.radio_asset,this._a.bedtime_blankieOnBed,this._a.bedtime_nightlight_on_leftside,this._a.bedtime_nightlight_on_rightside,this._a.lampOff,this._a.bedtime_bookshelf_without_book,this._a.bedtime_deskDrawerClosed,this._a.lampOn,this._a.sun_asset,this._a.bedtime_book,this._a.switchOn,this._a.leftStar_asset,this._a.farRightstar_asset,this._a.farLeftStar_asset,this._a.tigey_asset,this._a.moon_asset,this._a.rightStar_asset,this._a.bedtime_deskdrawer_openwithBlanket,this._a.tigey_inBedasset];for(var i=[this._a.bedtime_bgPatchEntrywayWithPortrait,this._a.bedtime_bgPatchBathroomDoorOpen,this._a.bedtime_bgPatchBathroomDoorClosed,this._a.bedtime_windowDaytime,this._a.bedtime_windowAtNight],s=0;s<i.length;){var n=i[s];++s,this._gameLayer.addChild(n),n.scaleX=1,n.scaleY=1}var a=JSON.parse(this._globalAssets.getResult("gameobjects"));this._positionMap=new f;for(var o=0;o<a.length;){var r=a[o];++o;var _=r.name,h=this._positionMap;null!=P[_]?h.setReserved(_,r):h.h[_]=r}this._stage.on("stagemousemove",function(e){l._cursX=e.stageX,l._cursY=e.stageY}),this._bedroom=new y(this._a,this._daniel,this._gameLayer,this._stage),this.PositionGameObjectsFromMap(this._positionMap);var d=this._globalAssets.getBitmap("intro"),g=new be(this._a.playBtn,this._a.playBtnDown,null,this._gameLayer.getBounds());g.set({scaleX:1.56,scaleY:1.56}),w.centerRegs(g);function u(e){ye.instance.killAll(),l._gameLayer.removeChild(d),l._gameLayer.removeChild(g),l._daniel.playAnimation("intro",function(e){l._daniel.loopAnimation("idle")}),l._bedroom.RegisterStageMouseMove()}this._gameLayer.addChild(d),d.name="introImage",this._gameLayer.addChild(g),g.x=d.getBounds().width/2;var c=d.getBounds().height;g.y=c-this._a.playBtn.getBounds().height,g.name="playButton",g.on("mousedown",u),d.on("mousedown",u),g.turnOn(),"true"==this.getQueryVariable("playathome")?(v.SpringrollApp.container.send("gameplay_started"),u()):ye.instance.playVO("bedtime_title")},getQueryVariable:function(e){for(var t=window.location.search.substring(1).split("&"),i=0,s=t.length;i<s;){var n=t[i++].split("=");if(n[0]==e)return n[1]}return""},GameObjectsToJSON:function(){for(var e=[],t=0,i=this._gameLayer.numChildren;t<i;){var s=t++,n=this._gameLayer.getChildAt(s),a={x:n.x,y:n.y,name:n.name,scaleX:n.scaleX,scaleY:n.scaleY};e.push(a)}return JSON.stringify(e)},PositionGameObjectsFromMap:function(e){for(var t=0,i=this._gameLayer.numChildren;t<i;){var s=t++,n=this._gameLayer.getChildAt(s),a=n.name;if(null!=P[a]?e.existsReserved(a):e.h.hasOwnProperty(a)){var o=n.name;n.x=(null!=P[o]?e.getReserved(o):e.h[o]).x;var r=n.name;n.y=(null!=P[r]?e.getReserved(r):e.h[r]).y;var l=n.name;if(null!=(null!=P[l]?e.getReserved(l):e.h[l]).scaleX){var _=n.name;n.scaleX=(null!=P[_]?e.getReserved(_):e.h[_]).scaleX}var h=n.name;if(null!=(null!=P[h]?e.getReserved(h):e.h[h]).scaleY){var d=n.name;n.scaleY=(null!=P[d]?e.getReserved(d):e.h[d]).scaleY}}}},EditMoveHandler:function(e){if(this._editMode){var t=b.__cast(e.currentTarget,createjs.DisplayObject).getBounds();e.currentTarget.x=e.stageX-t.width/2-t.x,e.currentTarget.y=e.stageY-t.height/2-t.y}},__class__:v});function _(){}_.__name__=["pbsdaniel","bedtime","Main"],_.main=function(){window.SGGameButler=new S("MyBedtime",_.start),_._isSpringroll="undefined"!=typeof springroll},_.start=function(e,t){_.SpringrollApp=e,_._bellhop=t,ye.init(_.SpringrollApp),window.focus(),_._game=new v(_.SpringrollApp,e.options.debug)},_.ga_call=function(e){try{_._bellhop.send("gacall",e)}catch(e){if(e instanceof a&&(e=e.val),!b.__instanceof(e,n))throw e;window.console.warn("Warning: "+p.string(e))}};function h(e,t,i){this._manifest=e,this._spriteSheetId=t,this._spriteSheetDataId=i}h.__name__=["sg","cjs","AssetLoader"],h.prototype={loadSpriteSheet:function(e){null!=this._queue?e():(this._callback=e,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",ve(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var e=this._queue.getResult(this._spriteSheetDataId);e.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(e),this._callback()},image:function(e){var t=new createjs.Sprite(this._spriteSheet);return t.gotoAndStop(e),t},__class__:h};function d(){this.sceneName="unnamed",createjs.Container.call(this)}d.__name__=["sg","cjs","GameScreen"],d.__super__=createjs.Container,d.prototype=e(createjs.Container.prototype,{update:function(e){},destroy:function(){},start:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:d});function g(e,t){this.squelchCC=!1,this.completed=!1,createjs.Container.call(this),this._data=e;var i=[];i.push(e.skeleton),i.push(e.texture),i.push(e.textureJSON),this._assets=new k(i,null,ve(this,this.chracterDataLoaded)),this._id=e.name,this._readyCallback=t,this._assets.load()}g.__name__=["sg","cjs","dragonbones","DBCharacterCJS"],g.__super__=createjs.Container,g.prototype=e(createjs.Container.prototype,{get_characterId:function(){return this._id},playAnimation:function(e,t){if(this.armature.animation.hasAnimation(e)){null!=t&&(this._currentCompleteCallback=t,this.armature.addEventListener(dragonBones.events.AnimationEvent.COMPLETE,ve(this,this.onAnimationComplete)));var i=this.armature.animation.gotoAndPlay(e);window.console.log(i)}else window.console.log("Animation does not contain label ["+e+"]")},loopAnimation:function(e,t){if(this.armature.animation.hasAnimation(e))this.armature.animation.gotoAndPlay(e,-1,-1,1e3);else window.console.log("Animation does not contain label ["+e+"]")},stopAnimation:function(e){null==e&&(e=!1),e&&(this._currentCompleteCallback=null,this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,ve(this,this.onAnimationComplete))),this.armature.animation.stop()},onAnimationComplete:function(e){window.console.log("Character ["+this._id+"] animation complete. Callback."),this.armature.removeEventListener(dragonBones.events.AnimationEvent.COMPLETE,ve(this,this.onAnimationComplete)),this._currentCompleteCallback(e)},chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.build()},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null,this._assets.dispose(),this._assets=null},onTextureLoaded:function(e){this._filesToLoad--,this.charCreationCheck()},charCreationCheck:function(){this._filesToLoad<=0&&this.build()},onTextureDataLoaded:function(e){this._textureData=e,this._filesToLoad--,this.charCreationCheck()},onSkeletonDataLoaded:function(e){this._skeletonData=e,this._filesToLoad--,this.charCreationCheck()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var e=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(e),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,ve(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._readyCallback()},omBoneFrameEvent:function(e){if(-1!=e.frameLabel.indexOf("vo_")){var t=e.frameLabel.split("vo_")[1];this.squelchCC?ye.instance.playAudio(t):ye.instance.playVO(t)}else-1!=e.frameLabel.indexOf("sfx_")?ye.instance.playAudio(e.frameLabel.split("sfx_")[1]):ye.instance.playAudio(e.frameLabel)},__class__:g});var me=function(e,t,i){var s=this;createjs.Container.call(this),this._clip1=e,this._clip2=t,this._function=i,null!=this._clip1&&(this._clip1.on("mousedown",function(e){s.toggle()}),null==this._clip1.parent&&this.addChild(e),this._clip1.visible=!0,this._clip2.visible=!1),this.UpdateClip2DownHandler(),this.name=this._clip2.name};me.__name__=["sg","cjs","ui","ToggleClip"],me.__super__=createjs.Container,me.prototype=e(createjs.Container.prototype,{setActivateSound:function(e,t,i,s){null==s&&(s=!1),null==i&&(i=!1),null==t&&(t=!1),this._sound2=e,this._sound2Loops=i,this._sound2ToggleOnComplete=s,this._sound2IsVO=t},setDeactivateSound:function(e,t,i,s){null==s&&(s=!1),null==i&&(i=!1),null==t&&(t=!1),this._sound1=e,this._sound1Loops=i,this._sound1ToggleOnComplete=s,this._sound1IsVO=t},toggleState:function(){this.toggle()},toggle:function(e){null==e&&(e=!1),this._clip2.visible=!this._clip2.visible,null!=this._clip1&&(this._clip1.visible=!this._clip2.visible);var t=this._clip1;null!=t&&t.forceOut(),null!=(t=this._clip2)&&t.forceOut(),e||null==this._function||this._function(),this._clip2.visible?null!=this._sound2&&(this._sound2IsVO?ye.instance.playVO(this._sound2,this._sound2ToggleOnComplete?ve(this,this.toggleState):null,!0):ye.instance.playAudio(this._sound2,this._sound2ToggleOnComplete?ve(this,this.toggleState):null)):null!=this._sound1&&(this._sound1IsVO?ye.instance.playVO(this._sound1,this._sound1ToggleOnComplete?ve(this,this.toggleState):null,!0):ye.instance.playAudio(this._sound1,this._sound1ToggleOnComplete?ve(this,this.toggleState):null))},get_active:function(){return this._clip2.visible},get_clip1:function(){return this._clip1},get_clip2:function(){return this._clip2},set_clip2:function(e){return this._clip2=e,this.UpdateClip2DownHandler(),this._clip2},UpdateClip2DownHandler:function(){var t=this;this._clip2.on("mousedown",function(e){t.toggle()}),null==this._clip2.parent&&this.addChild(this._clip2)},__class__:me});var pe=function(e,t,i,s,n,a){null==s&&(s=0),this.DEFAULT_FADE_AMOUNT=.05,me.call(this,e,t,i),this._fadeAmount=s,(this._fadeAmount<=0||1<this._fadeAmount)&&(this._fadeAmount=this.DEFAULT_FADE_AMOUNT),this._onComplete=n,this._onUpdate=a};pe.__name__=["sg","cjs","ui","FadingToggleClip"],pe.__super__=me,pe.prototype=e(me.prototype,{toggle:function(e){null==e&&(e=!1),me.prototype.toggle.call(this,e),this.get_active()?this.fade(this._clip2,this._clip1):this.fade(this._clip1,this._clip2)},get_activeAlpha:function(){return this._clip2.alpha*(this._clip2.visible?1:0)},fade:function(e,t){this._on=e,this._off=t,this._on.visible=!0,this._on.alpha=0,this._off.visible=!0,this._off.alpha=1},update:function(e){null!=this._on&&null!=this._off&&(this._on.alpha=Math.min(this._on.alpha+this._fadeAmount,1),this._off.alpha=1-this._on.alpha,null!=this._onUpdate&&this._onUpdate(),1==this._on.alpha&&(this._on.alpha=1,this._off.visible=!1,this._off.alpha=0,this._on=null,(this._off=null)!=this._onComplete&&this._onComplete()))},__class__:pe});var fe=function(e,t,i,s,n){null==n&&(n=!1),null==s&&(s=5),null==i&&(i="#FFFFFF"),null==t&&(t=15),createjs.Container.call(this),this.x=e.x,this.y=e.y;for(var a=0,o=s;a<o;){a++;var r=e.clone();this.addChild(r),r.setTransform(0,0,1,1,0,0,0,0,0),r.shadow=new createjs.Shadow(i,0,0,t),r.cache(-t+e.getBounds().x,-t+e.getBounds().y,e.getBounds().width+2*t,e.getBounds().height+2*t)}this.cache(-t+e.getBounds().x,-t+e.getBounds().y,e.getBounds().width+2*t,e.getBounds().height+2*t),n||this.removeAllChildren()};fe.__name__=["sg","cjs","ui","Glow"],fe.__super__=createjs.Container,fe.prototype=e(createjs.Container.prototype,{__class__:fe});var be=function(e,t,i,s){createjs.Container.call(this),null==s&&(s=e.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(s.x,s.y,s.width,s.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=e,this.addChildAt(this._off,0),null!=t&&this.addOver(t),null==i&&null!=this._over&&(this._down=this._over),this.addChild(this._hitbox)};be.__name__=["sg","cjs","ui","HoverButton"],be.__super__=createjs.Container,be.prototype=e(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",ve(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",ve(this,this.onOver)),this._hitbox.addEventListener("mouseout",ve(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",ve(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",ve(this,this.onOver)),this._hitbox.removeEventListener("mouseout",ve(this,this.onOut)))},onOut:function(e){this._over.visible=!1,this._off.visible=!0},onOver:function(e){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(e){null!=this._down&&(this._over.visible=!1,this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(e,t,i){null==i&&(i=!1),this._over=e,null!=t&&(this._over.x=t.x,this._over.y=t.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=i},destroy:function(){this.removeAllChildren(),this.turnOff()},__class__:be});var w=function(){};w.__name__=["sg","cjs","utils","DisplayObjectUtils"],w.centerRegs=function(e){w.setRegs(e,.5,.5)},w.setRegs=function(e,t,i){var s,n,a=e.getBounds();null!=a?(s=a.width*t,n=a.height*i,e.set({regX:s,regY:n})):window.console.log("Could not set reg points on displayObject, rectangular bounds are not set")};var u=function(){h.call(this,u.manifest(),"loadingSpriteSheet","loadingData")};u.__name__=["sg","cjs","views","LoadingAnimation"],u.get_instance=function(){return null==u.instance&&(u.instance=new u),u.instance},u.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},u.load=function(e){u.get_instance().loadSpriteSheet(e)},u.loadingAnimation=function(){return new createjs.Sprite(u.get_instance()._spriteSheet,"Loading")},u.__super__=h,u.prototype=e(h.prototype,{__class__:u});function c(){d.call(this)}c.__name__=["sg","cjs","views","LoadingScreen"],c.__super__=d,c.prototype=e(d.prototype,{init:function(){window.console.log("Load assets for LodaingScreen"),this._assets=new k(this.getImageManifest(),this.getAudioManifest(),ve(this,this.onPackageReady)),this._assets.load()},onPackageReady:function(){window.console.log("LoadingScreen: onPackageReady")},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]},__class__:c});var S=function(e,t){this._started=!1,this.name=e,this._startCall=t};S.__name__=["sg","kit","PBSGameButler"],S.prototype={startGame:function(e,t){this._started||(window.console.log("Butler starting game"),this._startCall(e,t),window.console.log("Start complete"))},get_name:function(){return this.name},__class__:S};var k=function(e,t,i,s){null==s&&(s=""),this.completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._imgManifest=e,this._audioManifest=t,this._completeCallback=i,this._loadQueue=new createjs.LoadQueue(!0,s),createjs.Sound.alternateExtensions=["mp3","wav"],this._loadQueue.installPlugin(createjs.Sound),this._audioManager=ye.instance};k.__name__=["sg","pbskids","AssetPackage"],k.makeManifestItem=function(e,t,i){return{id:e,src:t,type:i}},k.makeAudioManifestItem=function(e){return{id:e}},k.prototype={load:function(){null!=this._audioManifest&&0<this._audioManifest.length?ye.instance.loadAudio(this._audioManifest,ve(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(this._imgManifest)},dispose:function(){this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null,this._sheets=null,this._completeCallback=null},getSpriteFromSheet:function(e,t){if(null!=t&&""!=t)return new createjs.Sprite(this._loadQueue.getResult(t),e);for(var i=this._loadQueue.getItems(!0),s=0,n=i.length;s<n;){var a=s++;if("spritesheet"==i[a].item.type)if(-1!=this._loadQueue.getResult(i[a].item.id).animations.indexOf(e))return new createjs.Sprite(this._loadQueue.getResult(i[a].item.id),e)}return null},getBitmap:function(e){var t=this._loadQueue.getResult(e);return new createjs.Bitmap(t)},getImage:function(e){return this._loadQueue.getResult(e)},getResult:function(e){return this._loadQueue.getResult(e)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(e){0<e.length?(this._loadQueue.addEventListener("complete",ve(this,this.onQueueComplete),null),this._loadQueue.loadManifest(e)):(this._imagesLoaded=!0,this.checkForCompletion())},loadPostManifest:function(e){this._loadQueue.loadManifest(e)},onQueueComplete:function(e){this._loadQueue.removeEventListener("complete",ve(this,this.onQueueComplete),null),this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this.completed&&(this.completed=!0,this._completeCallback())},__class__:k};var ye=function(e,t){this._callbacks=new f,this._soundMap=new f,this._sounds=new f,createjs.EventDispatcher.call(this),this._voPlayer=e,this._sound=t};ye.__name__=["sg","pbskids","audio","SRAudioManager"],ye.init=function(e){null==ye.instance&&(ye.instance=new ye(e.voPlayer,e.sound))},ye.__super__=createjs.EventDispatcher,ye.prototype=e(createjs.EventDispatcher.prototype,{playAudio:function(e,t){return this._sound.play(e,t)},loopAudio:function(e){return this._sound.play(e,{loop:-1})},playVO:function(e,t,i){null==i&&(i=!0),i||!this._voPlayer.playing?(this._voCallback=null,this._voPlayer.play(e,t)):window.console.log("VO dropped due to conflicting VO playing. "+e+" --/-> "+this._voPlayer.currentVO)},stopAudio:function(e){this._sound.stop(e)},stopVO:function(e){this._voPlayer.stop()},killAll:function(){this._voPlayer.stop(),this._sound.stopAll()},handleFailed:function(e){},handleComplete:function(e){var t=e.currentTarget.uniqueId,i=this._callbacks;if(null!=(null!=P[t]?i.getReserved(t):i.h[t])){var s=e.currentTarget.uniqueId,n=this._callbacks;(null!=P[s]?n.getReserved(s):n.h[s])()}var a=e.currentTarget.uniqueId,o=this._sounds;(null!=P[a]?o.getReserved(a):o.h[a]).stop();var r=e.currentTarget.uniqueId,l=this._sounds;(null!=P[r]?l.getReserved(r):l.h[r]).removeEventListener("complete",ve(this,this.handleComplete));var _=e.currentTarget.uniqueId,h=this._sounds;(null!=P[_]?h.getReserved(_):h.h[_]).removeEventListener("failed",ve(this,this.handleFailed));var d=e.currentTarget.uniqueId,g=this._sounds;null!=P[d]?g.setReserved(d,null):g.h[d]=null,this._sounds.remove(e.currentTarget.uniqueId);var u=e.currentTarget.uniqueId,c=this._callbacks;null!=P[u]?c.setReserved(u,null):c.h[u]=null,this._callbacks.remove(e.currentTarget.uniqueId)},loadAudio:function(e,t){for(var i=[],s=0;s<e.length;){var n=e[s];++s,i.push(n.id)}window.console.log(i),window.console.log(this._sound),this._sound.preload(i,t)},get_voPlayer:function(){return this._voPlayer},queueLoaded:function(e){},__class__:ye});var C=function(e,t){g.call(this,e,t)};C.__name__=["sg","springroll","dragonbones","SRDBCharacter"],C.__super__=g,C.prototype=e(g.prototype,{chracterDataLoaded:function(){this._texture=this._assets.getImage(this._data.texture.id),this._textureData=this._assets.getResult(this._data.textureJSON.id),this._skeletonData=this._assets.getResult(this._data.skeleton.id),this._armatureName=this._data.armatureName,this.preloadAudio(this._skeletonData),this.build()},preloadAudio:function(e){var t=[];this._audioLoaded=!1;for(var i=0,s=e.armature;i<s.length;){var n=s[i];++i;for(var a=0,o=n.animation;a<o.length;){var r=o[a];++a;for(var l=0,_=r.timeline;l<_.length;){var h=_[l];++l;for(var d=0,g=h.frame;d<g.length;){var u=g[d];if(++d,null!=u.event){var c="";-1<u.event.indexOf("vo_")?c=m.substr(u.event,3,null):-1<u.event.indexOf("sfx_")&&(c=m.substr(u.event,4,null)),t.push(k.makeAudioManifestItem(c))}}}}}F.log("Audio from "+this.get_characterId()),F.log(t),0<t.length?ye.instance.loadAudio(t,ve(this,this.characterAudioLoaded)):(this._audioLoaded=!0,this.characterAudioLoaded())},characterAudioLoaded:function(){F.log("Audio from "+this.get_characterId()+" is preloaded"),this._audioLoaded=!0,null!=this._readyCallback&&this.completed&&this._readyCallback()},build:function(){window.console.log("BUILD "+this._data.name),this._factory=new dragonBones.factorys.CreateJSFactory,this._factory.addSkeletonData(dragonBones.objects.DataParser.parseSkeletonData(this._skeletonData));var e=new dragonBones.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(e),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),dragonBones.animation.WorldClock.clock.add(this.armature),this.armature.addEventListener(dragonBones.events.FrameEvent.BONE_FRAME_EVENT,ve(this,this.omBoneFrameEvent)),window.console.log("BUILT "+this._data.name),this.completed=!0,null!=this._readyCallback&&this._audioLoaded&&this._readyCallback()},__class__:C});var F=function(){};F.__name__=["sg","springroll","logging","Logging"],F.log=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.log(e))},F.getCallerString=function(e){if(null==e)return"";var t=i.getClassName(e).split(".");return"["+t[t.length-1]+"] "},F.clear=function(){F.enabled&&springroll.Debug.clear()},F.debug=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.debug(e))},F.error=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.error(e))},F.info=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.info(e))},F.trace=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.trace(e))},F.aqua=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.aqua(e))},F.blue=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.blue(e))},F.gray=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.gray(e))},F.green=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.green(e))},F.lime=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.lime(e))},F.maroon=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.maroon(e))},F.navy=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.navy(e))},F.olive=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.olive(e))},F.orange=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.orange(e))},F.pink=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.pink(e))},F.purple=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.purple(e))},F.red=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.red(e))},F.silver=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.silver(e))},F.teal=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.teal(e))},F.yellow=function(e,t){F.enabled&&(null!=t&&(e=F.getCallerString(t)+p.string(e)),springroll.Debug.yellow(e))};var D,A=0;function ve(e,t){return null==t?null:(null==t.__id__&&(t.__id__=A++),null==e.hx__closures__?e.hx__closures__={}:i=e.hx__closures__[t.__id__],null==i&&((i=function(){return i.method.apply(i.scope,arguments)}).scope=e,i.method=t,e.hx__closures__[t.__id__]=i),i);var i}String.prototype.__class__=String,String.__name__=["String"],Array.__name__=["Array"];var O={__name__:["Int"]},T={__name__:["Dynamic"]},B=Number;B.__name__=["Float"];var L=Boolean;L.__ename__=["Bool"];var j={__name__:["Class"]},E={};createjs.DisplayObject.prototype.setBounds=function(e,t,i,s){this._bounds=null!=e?(this._bounds||new createjs.Rectangle).setValues(e,t,i,s):null};var P={};b.__toStr={}.toString,o.DT_LOADING_SS="loadingScreenSheet",v.SPRITE_SCALE=1,_.GAME_NAME="MyBedtime",d.COMPLETE="complete",be.ACTIVATED="activated",be.DOWN="down",be.OVER="over",u.SPRITESHEET="loadingSpriteSheet",u.DATA="loadingData",c.READY="ready",F.enabled=!0,_.main()}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);