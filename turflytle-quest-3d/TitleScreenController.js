var SUPPORT_LOCAL_STORAGE=!0;pc.script.attribute("levelSelectSceneId","string",""),pc.script.attribute("gamePlaySceneId","string",""),pc.script.create("TitleScreenController",function(a){var b,c=.7,d=function(a){this.entity=a,this.flashTime=c,SUPPORT_LOCAL_STORAGE="undefined"!=typeof Storage},e="tmntsg_showtheme_openingloopv1",f=["player_mikey_opening_animation.json","player_mikey_opening_animation_trans_idle.json","player_mikey_idle.json"],g=0;return d.prototype={initialize:function(){if(window.nick_sdk_client&&nick_sdk_client.GameEventEmitter.sendGameEvent(nick_sdk_client.GameEventEmitter.ON_TITLE_SCREEN_START),!Storage.isSupport){var c=a.root.findByName("Warning");c.enabled=!0}this.loadingScreen=a.root.findByName("LoadingScreen"),this.title=a.root.findByName("Title"),this.idleTimer=0,this.musicComponent=a.root.findByName("Music").audiosource,this.isPlaying=!1;var d=a.root.findByName("Player");d.enabled&&(this.animationComponent=a.root.findByName("Player").findByName("mikeyTest").animation),this.playTextEntity=this.entity.findByName("PlayText"),this.playTextScript=this.playTextEntity.script.font_renderer,b=/iPad|iPhone|iPod/.test(navigator.platform),b||this.musicComponent.play(e+"."+AUDIO_TYPE);var f,g,h,i;a.touch?(f=textDic.Title.Mobile,this.playTextScript.text=f.value,g=f.offsetX,h=f.offsetY,i=f.size):(f=textDic.Title.Desktop,this.playTextScript.text=f.value,g=f.offsetX,h=f.offsetY,i=f.size),this.playTextScript.x=g,this.playTextScript.y=h,this.playTextScript.scaleX=this.playTextScript.scaleY=i},update:function(a){if(this.animationComponent&&(this.isIdle&&(this.idleTimer+=a,this.idleTimer>6&&(this.idleTimer=0,this.isIdle=!1,this.animationComponent.loop=!1,g=0,this.animationComponent.play(f[g],.4))),!this.animationComponent.loop&&this.animationComponent.currentTime>=this.animationComponent.duration)){g+=1;var b=0===g?.4:0;g===f.length-1&&(this.animationComponent.loop=!0,this.isIdle=!0),this.animationComponent.play(f[g],b)}},onEnable:function(){a.touch?a.touch.on("touchend",this.onTouchEnd,this):a.keyboard.on(pc.EVENT_KEYUP,this.onKeyUp,this)},onDisable:function(){a.touch?a.touch.off("touchend",this.onTouchEnd,this):a.keyboard.off(pc.EVENT_KEYUP,this.onKeyUp,this)},destroy:function(){},onTouchEnd:function(){b&&this.musicComponent&&!this.isPlaying&&(this.isPlaying=!0,this.musicComponent.play(e+"."+AUDIO_TYPE)),this._playHanlder()},onMouseUp:function(){this._playHanlder()},onKeyUp:function(a){a.key===pc.KEY_SPACE&&this._playHanlder()},_shouldLoadLevelSelect:function(){return Storage.getUnlockedLevel()},_disableTitleScreen:function(){this.playTextEntity.enabled=!1},_playHanlder:function(){textDic.Canada_Tracking&&window.trackFlashEvent&&window.trackFlashEvent("Show Title:Turflytle3D","play","true");var a,b="";Number(this._shouldLoadLevelSelect())>1?(b=this.levelSelectSceneId+".json",a="LevelSelect"):(b=this.gamePlaySceneId+".json",a="GamePlay"),window.nick_sdk_client&&nick_sdk_client.GameEventEmitter.sendGameEvent(nick_sdk_client.GameEventEmitter.ON_TITLE_SCREEN_END),this._disableTitleScreen(),this.loadingScreen.script.RuntimeLoading.loadNextScene(b,a,a+"_"+AUDIO_TYPE)},sendDeltaDNAEvent:function(){var a="81659969727582409467922325414605",b="http://collect8565gmssd.deltadna.net/collect/api",c=b+a+"/bulk";console.log("URL used: "+c)},generateUUID:function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})},getTimestamp:function(){var a=new Date;return a.getUTCFullYear()+"-"+(a.getUTCMonth()+1)+"-"+a.getUTCDate()+" "+a.getUTCHours()+":"+a.getUTCMinutes()+":"+a.getUTCSeconds()+"."+a.getUTCMilliseconds()},sendEventList:function(){return 0==eventList.length?void console.log("no events to send"):void 0},_resetHandler:function(){console.log("RESET!"),Storage.clear()}},d});