var _STRINGS={Game:{Win:"You win!",Lose:"You lose!",Score:"Score",Time:"Time"}},_COLORS={red:"rgba(255,0,0,1)",redAlpha50:"rgba(255,0,0,0.50)",turq:"rgba(0,255,255,1)",turqAlpha50:"rgba(0,255,255,0.5)",yellow:"rgba(255,255,0,1)",yellowAlpha50:"rgba(255,255,0,5)",green:"rgba(0,128,0,1)",lightgreen:"rgba(0,255,0,1)",black:"rgba(0,0,0,1)",white:"rgba(255,255,255,1)",whiteAlpha25:"rgba(255,255,255,0.25)",blue:"rgba(0,0,255,1)",blueAlpha50:"rgba(0,0,255,0.5)",gold:"rgba(255,215,0,1)",yellowAlpha50:"rgba(255,255,0,0.5)",
orange:"rgba(255,146,0,1)",greyOptions:"rgba(56,46,38,1)",musicSound:"rgba(101,85,76,1)",newGreen:"rgba(224,255,54,1)"};
_LEVELS=[[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,4,4,4,6,4,4,4,4,1,4,4,4,4,6,4,4,4,4,0],[0,0,0,4,1,4,0,0,4,1,4,0,0,4,1,4,0,0,1,0],[0,0,0,4,1,4,0,5,4,1,4,5,4,4,1,4,0,0,1,0],[0,0,0,4,1,4,8,7,4,1,4,8,9,4,1,4,0,0,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,4,4,4,15,1,1,1,1,1,1,1,15,1,4,4,4,6,6],[0,0,4,4,4,1,1,1,16,1,16,1,1,1,1,4,4,4,6,0],[0,1,5,4,4,1,19,1,18,
1,18,1,19,1,1,4,4,4,1,0],[0,1,5,9,1,1,1,1,1,1,1,1,1,1,1,19,1,4,1,0],[0,1,5,5,4,4,1,1,1,1,1,1,1,1,23,1,4,4,1,0],[0,1,1,1,1,11,1,11,1,1,1,11,1,11,1,1,1,1,1,0],[0,1,4,1,1,1,1,1,1,1,1,1,1,1,1,20,18,6,0,0],[0,1,4,4,6,5,5,15,1,17,1,16,1,14,1,0,19,0,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,6,6,17,1,8,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],
[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,6,6,1,1,1,1,1,1,1,1,1,6,6,1,6,0],[0,1,1,4,5,1,7,1,1,1,1,1,1,17,1,1,4,1,6,0],[0,1,1,4,5,8,1,1,1,1,1,1,1,1,8,1,4,1,6,0],[0,1,1,1,5,21,4,4,1,1,1,1,1,1,1,1,1,1,6,0],[0,1,1,4,4,1,4,4,4,4,4,4,4,4,4,4,4,1,6,0],[0,1,1,5,5,1,5,5,1,16,1,1,17,1,1,4,4,1,1,0],[0,1,8,1,17,1,11,1,10,1,10,1,19,1,18,1,17,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,4,4,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,18,1,14,1,1,1,1,1,1,1,0],[0,17,1,1,1,1,1,1,6,21,5,5,21,1,1,1,1,17,1,0],[0,1,17,1,1,1,1,17,1,1,5,5,1,17,1,1,1,6,1,0],[0,9,1,21,1,1,17,1,5,5,5,5,5,5,17,1,1,4,1,0],[0,1,20,1,1,
1,1,17,1,5,5,5,5,17,1,1,1,4,1,0],[0,17,1,6,6,4,1,1,17,1,5,5,17,1,1,1,4,17,1,0],[0,1,1,6,1,4,1,1,1,17,1,17,1,1,1,4,1,1,1,0],[0,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,4,1,1,0],[0,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,1,4,1,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],
[0,0,17,1,6,4,16,1,4,15,5,8,4,4,18,1,4,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,4,4,16,1,15,1,5,5,5,18,1,17,1,4,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,4,17,1,18,1,19,1,4,5,5,5,15,1,4,4,4,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,4,4,16,1,4,4,5,5,5,4,4,15,1,4,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,22,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,18,1,7,8,19,1,7,8,7,8,7,8,4,1,4,0],[0,1,1,1,20,1,1,1,20,1,1,1,6,1,1,1,4,1,4,0],[0,1,9,1,4,1,21,1,1,1,20,1,9,1,21,1,4,1,4,0],[0,1,10,1,9,1,1,1,21,1,1,1,20,1,1,1,4,1,4,0],[0,1,8,1,13,1,10,1,1,1,20,1,1,1,7,1,4,1,4,0],[0,1,7,1,1,1,12,1,1,1,1,1,1,1,8,1,1,1,4,0],[0,1,8,17,1,16,1,15,1,14,1,13,12,11,10,7,9,8,0,0],[0,1,7,5,7,5,8,5,7,5,9,5,12,5,13,5,6,6,
0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,6,9,14,1,1,1,21,18,1,19,1,15,1,15,1,16,4,0],[0,0,1,1,1,20,1,1,1,1,1,1,1,1,1,1,1,1,4,0],[0,6,1,20,1,1,1,4,5,1,20,17,1,18,1,4,1,1,4,0],[0,7,1,1,1,8,1,21,5,
1,1,1,1,1,5,4,1,1,4,0],[0,8,1,21,1,20,1,1,5,1,1,1,20,1,5,4,1,1,4,0],[0,9,1,1,1,1,1,1,14,1,15,1,1,1,4,4,1,1,4,0],[0,10,1,8,1,1,7,1,1,1,1,1,1,1,21,1,1,4,6,0],[0,11,1,8,4,1,1,8,9,17,1,7,8,7,1,1,4,6,0,0],[0,12,1,7,5,8,1,1,1,1,1,1,1,1,1,1,4,1,0,0],[0,4,1,14,1,4,4,4,17,1,4,4,4,4,4,4,4,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,
0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,14,1,1,15,1,16,1,5,7,8,6,5,13,4,4,14,4,0],[0,0,8,4,1,21,1,1,1,21,1,1,1,8,1,1,1,1,4,0],[0,0,7,4,1,1,1,20,1,1,1,20,1,7,1,9,5,1,4,0],[0,0,8,4,1,1,1,1,1,1,1,1,1,1,1,10,5,1,4,0],[0,0,7,5,4,4,4,5,7,8,7,5,12,12,11,9,5,1,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,4,0],[0,1,4,4,8,4,9,7,12,13,11,4,10,9,7,6,4,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,23,1,22,1,24,1,25,1,22,1,24,1,23,1,8,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,7,1,1,0,0],[0,0,3,3,3,3,3,3,3,
3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,8,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,9,6,6,7,8,8,7,1,7,7,8,1,11,10,12,6,6,0],[0,0,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,4,14,4,6,12,1,1,13,4,13,4,6,4,1,1,1,4,4,0],[0,1,1,1,1,1,1,1,13,5,5,5,5,13,1,1,1,1,1,0],[0,1,4,4,4,4,4,4,4,16,1,16,1,4,4,4,4,4,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,
17,1,16,1,16,1,17,1,1,1,1,17,1,18,1,18,1,4,0],[0,1,1,5,5,20,1,1,1,1,1,1,1,20,5,5,1,1,0,0],[0,4,4,4,10,1,1,1,1,1,1,1,1,1,10,4,4,4,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,14,1,1,1,1,1,4,4,1,1,1,1,
1,4,4,1,1,0],[0,0,17,1,1,1,1,4,16,1,4,1,1,1,4,16,1,4,1,0],[0,1,5,7,1,1,4,20,5,5,21,4,1,4,20,5,5,21,4,0],[0,1,5,8,1,1,4,1,5,5,1,4,1,4,1,5,5,1,4,0],[0,1,15,1,1,1,1,4,17,1,4,1,1,1,4,17,1,4,1,0],[0,1,7,8,1,1,1,1,4,4,1,1,1,1,1,4,4,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,8,1,17,1,11,1,10,1,9,1,17,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,
1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,20,1,4,1,1,1,1,1,1,1,1,1,1,4,1,21,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,6,4,4,21,1,1,1,1,6,8,7,8,7,10,23,1,0],[0,1,1,1,1,1,1,4,4,20,1,1,1,4,6,5,5,1,1,0],[0,1,1,17,1,1,1,1,1,1,20,1,1,1,4,5,5,4,4,0],[0,1,1,5,5,16,1,4,1,1,1,17,1,1,1,4,17,1,4,0],[0,1,1,1,1,5,5,15,1,1,1,1,17,1,1,1,4,4,4,0],[0,1,1,1,1,1,1,5,5,23,1,1,1,4,1,1,1,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,4,1,1,1,1,1,4,0,0],[0,1,1,1,1,1,1,1,1,1,1,24,1,23,1,22,
1,7,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,4,19,1,1,19,1,14,1,6,1,8,4,9,1,9,22,1,4,0],[0,4,5,4,1,4,5,5,4,1,1,4,5,4,1,10,1,1,4,0],[0,4,5,4,1,4,5,5,4,17,1,
6,5,6,1,9,23,1,4,0],[0,12,7,8,1,4,15,1,4,1,1,8,7,10,1,10,1,1,4,0],[0,11,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,5,1,1,1,1,5,5,1,1,1,5,1,1,1,0,0],[0,1,1,1,8,1,1,1,1,19,1,1,1,1,10,1,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,7,8,7,1,1,1,1,1,1,1,1,1,5,4,1,9,0],[0,0,1,17,
1,17,1,1,7,8,7,8,7,8,1,4,4,1,10,0],[0,0,1,1,1,20,1,1,4,1,1,1,1,21,1,1,1,1,11,0],[0,1,1,1,1,1,1,1,1,1,23,1,1,1,4,4,5,5,12,0],[0,1,21,1,1,4,14,4,14,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,7,8,12,7,8,6,7,1,0],[0,1,16,1,17,1,4,18,1,4,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,4,9,11,9,4,4,10,11,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,7,5,5,5,9,1,0,0],[0,4,4,4,4,4,4,4,4,4,4,1,9,8,5,5,7,4,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,1,1,1,1,1,1,1,
1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,21,6,20,1,7,8,7,1,7,9,10,1,14,1,13,1,0],[0,0,1,1,6,1,1,8,6,8,1,8,6,11,1,12,6,13,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,17,1,1,0],[0,10,9,21,20,21,7,20,1,21,9,10,1,7,19,1,1,7,10,0],[0,11,6,1,1,1,6,1,1,1,5,11,1,8,6,7,1,7,1,0],[0,1,1,1,1,1,1,1,1,7,17,1,1,1,1,1,1,1,1,0],[0,18,1,4,4,4,1,4,4,4,1,4,4,4,1,4,4,4,1,0],[0,19,
1,4,5,4,1,4,5,4,1,4,5,4,1,4,5,4,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,4,4,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,4,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,4,1,1,1,0],[0,0,1,1,1,7,6,21,1,4,1,5,4,1,5,4,1,1,4,0],[0,0,5,5,21,8,5,1,1,4,1,5,4,1,5,4,1,1,4,0],[0,7,7,8,1,5,4,1,1,4,1,5,4,1,5,4,1,1,4,0],
[0,1,1,1,1,4,1,1,4,1,1,4,1,1,4,1,1,4,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,22,1,24,1,25,1,23,1,22,1,7,9,10,12,7,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,9,10,12,13,12,1,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],[[1,1,1,1,1,1,1,23,1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],[0,0,0,1,1,1,1,17,1,1,1,1,1,1,1,1,1,1,0,0],[0,0,0,0,1,0,0,0,0,0,0,0,
0,0,0,0,0,1,0,0],[0,0,1,1,1,1,1,22,1,1,1,1,1,1,1,1,1,1,20,0],[0,0,18,1,6,1,1,1,1,1,1,13,1,1,1,1,17,1,1,0],[0,0,1,1,1,7,1,1,1,1,12,1,6,1,1,1,1,1,21,0],[0,1,1,4,1,1,8,5,5,11,1,1,1,7,5,5,8,1,1,0],[0,1,1,5,4,1,1,9,10,1,1,4,1,1,14,1,1,1,20,0],[0,1,1,5,7,1,1,1,1,1,7,24,1,1,1,1,1,1,4,0],[0,1,1,5,8,6,7,8,7,8,4,1,1,4,4,4,4,4,4,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,14,1,10,7,8,7,8,9,10,9,11,15,1,5,5,6,1,0,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0],[0,1,1,1,8,1,18,1,19,1,17,1,14,1,15,1,7,8,0,0],
[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]]];_TURRETSCOST={zapTurret:10,lightningTurret:20,pillowcannon:30,fridgeorator:30,perrynator:50,boxomator:60,mineninator:50};
_WAVES={Level0:{generator1:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:0.5,enemyHealth:5,enemySpeed:0.4,enemyDamage:50,enemyStars:5,numZombies:3}]},generator2:{grid:{row:0,col:5},spawn:[{waitTime:2,spawnTime:0.5,enemyHealth:5,enemySpeed:0.4,enemyDamage:50,enemyStars:5,numZombies:3},{waitTime:4,spawnTime:2,enemyHealth:200,enemySpeed:0.4,enemyDamage:50,enemyStars:5,numZombiesBoss:1}]}},Level1:{generator1:{grid:{row:0,col:8},spawn:[{waitTime:2,spawnTime:1,enemyHealth:150,enemySpeed:0.4,enemyDamage:50,
enemyStars:1,numZombies:5},{waitTime:4,spawnTime:1,enemyHealth:150,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:5},{waitTime:4,spawnTime:0.4,enemyHealth:150,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:7},{waitTime:8,spawnTime:0.3,enemyHealth:500,enemySpeed:0.3,enemyDamage:250,enemyStars:10,numZombiesBoss:1},{waitTime:1,spawnTime:0.3,enemyHealth:150,enemySpeed:0.3,enemyDamage:50,enemyStars:1,numZombies:7}]},generator2:{grid:{row:0,col:13},spawn:[{waitTime:2,spawnTime:0.4,enemyHealth:175,
enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:4},{waitTime:8,spawnTime:1,enemyHealth:175,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:3},{waitTime:8,spawnTime:0.3,enemyHealth:175,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:5},{waitTime:10,spawnTime:0.3,enemyHealth:150,enemySpeed:0.3,enemyDamage:50,enemyStars:1,numZombies:7}]}},Level2:{generator1:{grid:{row:0,col:8},spawn:[{waitTime:2,spawnTime:1,enemyHealth:120,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numZombies:5},{waitTime:2,
spawnTime:1.5,enemyHealth:120,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numZombies:5},{waitTime:4,spawnTime:1,enemyHealth:120,enemySpeed:0.5,enemyDamage:80,enemyStars:1,numZombies:4},{waitTime:1,spawnTime:1,enemyHealth:1300,enemySpeed:0.25,enemyDamage:160,enemyStars:10,numZombiesBoss:2},{waitTime:4,spawnTime:1,enemyHealth:120,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numZombies:5}]},generator2:{grid:{row:0,col:15},spawn:[{waitTime:4,spawnTime:1,enemyHealth:240,enemySpeed:0.55,enemyDamage:25,enemyStars:1,
numFastZombies:8},{waitTime:4,spawnTime:0.5,enemyHealth:240,enemySpeed:0.55,enemyDamage:50,enemyStars:1,numFastZombies:8}]}},Level3:{generator1:{grid:{row:0,col:9},spawn:[{waitTime:4,spawnTime:0.3,enemyHealth:80,enemySpeed:0.5,enemyDamage:50,enemyStars:4,numZombies:5},{waitTime:5,spawnTime:0.3,enemyHealth:2600,enemySpeed:0.5,enemyDamage:250,enemyStars:5,numZombiesBoss:3}]},generator2:{grid:{row:0,col:10},spawn:[{waitTime:2,spawnTime:1,enemyHealth:80,enemySpeed:0.5,enemyDamage:50,enemyStars:4,numZombies:5},
{waitTime:1,spawnTime:0.5,enemyHealth:80,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5}]},generator3:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:80,enemySpeed:0.5,enemyDamage:50,enemyStars:4,numZombies:5},{waitTime:1,spawnTime:0.5,enemyHealth:80,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5}]},generator4:{grid:{row:0,col:12},spawn:[{waitTime:2,spawnTime:2,enemyHealth:80,enemySpeed:0.6,enemyDamage:50,enemyStars:2,numZombies:5},{waitTime:1,spawnTime:1,enemyHealth:80,
enemySpeed:0.6,enemyDamage:50,enemyStars:4,numZombies:5}]}},Level4:{generator1:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:25E3,enemySpeed:0.2,enemyDamage:250,enemyStars:10,numZombies:0,numFastZombies:0,numZombiesBoss:2,numNormbots:0,numClones:0},{waitTime:2,spawnTime:1,enemyHealth:150,enemySpeed:0.25,enemyDamage:50,enemyStars:1,numZombies:10,numFastZombies:2,numNormbots:20,numClones:0}]},generator2:{grid:{row:0,col:11},spawn:[{waitTime:10,spawnTime:1,enemyHealth:25E3,enemySpeed:0.15,
enemyDamage:250,enemyStars:10,numZombies:0,numFastZombies:0,numZombiesBoss:1,numNormbots:0,numClones:0},{waitTime:2,spawnTime:1,enemyHealth:150,enemySpeed:0.25,enemyDamage:50,enemyStars:1,numZombies:20,numFastZombies:2,numZombiesBoss:0,numNormbots:20,numClones:0},{waitTime:8,spawnTime:0.5,enemyHealth:750,enemySpeed:0.2,enemyDamage:50,enemyStars:1,numZombies:0,numFastZombies:5,numZombiesBoss:0,numNormbots:20,numClones:0}]}},Level5:{generator1:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:500,
enemySpeed:0.3,enemyDamage:50,enemyStars:1,numZombies:10,numNormbots:5},{waitTime:1,spawnTime:4,enemyHealth:2E4,enemySpeed:0.2,enemyDamage:250,enemyStars:5,numZombiesBoss:2},{waitTime:2,spawnTime:1,enemyHealth:500,enemySpeed:0.2,enemyDamage:50,enemyStars:1,numZombies:0,numFastZombies:30,numNormbots:0}]},generator2:{grid:{row:0,col:11},spawn:[{waitTime:4,spawnTime:2,enemyHealth:50,enemySpeed:0.4,enemyDamage:500,enemyStars:1,numZombies:10,numNormbots:20,numFastZombies:8}]}},Level6:{generator1:{grid:{row:0,
col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:210,enemySpeed:0.3,enemyDamage:50,enemyStars:1,numZombies:10,numNormbots:15,numFastZombies:10},{waitTime:1,spawnTime:4,enemyHealth:18E3,enemySpeed:0.2,enemyDamage:250,enemyStars:5,numZombiesBoss:2},{waitTime:1,spawnTime:1,enemyHealth:9E3,enemySpeed:0.2,enemyDamage:170,enemyStars:5,numNormbots:0,numBigbots:5}]},generator2:{grid:{row:0,col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:210,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numZombies:10,numNormbots:20,
numFastZombies:8},{waitTime:2,spawnTime:1,enemyHealth:1E3,enemySpeed:0.2,enemyDamage:50,enemyStars:1,numFastZombies:25}]}},Level7:{generator1:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:600,enemySpeed:0.2,enemyDamage:150,enemyStars:1,numNormbots:40}]},generator2:{grid:{row:0,col:11},spawn:[{waitTime:1,spawnTime:0.5,enemyHealth:600,enemySpeed:0.2,enemyDamage:150,enemyStars:1,numNormbots:40},{waitTime:2,spawnTime:2,enemyHealth:15E3,enemySpeed:0.18,enemyDamage:170,enemyStars:50,numBigbots:5}]}},
Level8:{generator1:{grid:{row:0,col:12},spawn:[{waitTime:2,spawnTime:1,enemyHealth:800,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numZombies:10},{waitTime:2,spawnTime:1,enemyHealth:400,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:4E3,enemySpeed:0.4,enemyDamage:250,enemyStars:5,numZombiesBoss:1},{waitTime:1,spawnTime:0.5,enemyHealth:600,enemySpeed:0.4,enemyDamage:150,enemyStars:1,numNormbots:20}]},generator2:{grid:{row:0,col:6},spawn:[{waitTime:2,
spawnTime:1,enemyHealth:400,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numZombies:10},{waitTime:1,spawnTime:0.5,enemyHealth:600,enemySpeed:0.4,enemyDamage:150,enemyStars:1,numNormbots:20},{waitTime:2,spawnTime:1,enemyHealth:4E3,enemySpeed:0.4,enemyDamage:250,enemyStars:5,numZombiesBoss:1},{waitTime:2,spawnTime:1,enemyHealth:400,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numFastZombies:10}]}},Level9:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:300,enemySpeed:0.5,enemyDamage:50,
enemyStars:1,numZombies:10,numNormbots:20},{waitTime:2,spawnTime:1,enemyHealth:5E3,enemySpeed:0.4,enemyDamage:200,enemyStars:20,numBigbots:3}]},generator2:{grid:{row:0,col:11},spawn:[{waitTime:2,spawnTime:1,enemyHealth:5E3,enemySpeed:0.4,enemyDamage:160,enemyStars:20,numBigbots:3},{waitTime:25,spawnTime:1,enemyHealth:400,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numZombies:5,numNormbots:8}]}},Level10:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:800,enemySpeed:0.4,enemyDamage:50,
enemyStars:1,numFastZombies:15},{waitTime:6,spawnTime:1,enemyHealth:1200,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8}]},generator2:{grid:{row:0,col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:800,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:25E3,enemySpeed:0.4,enemyDamage:160,enemyStars:20,numBigbots:4},{waitTime:6,spawnTime:1,enemyHealth:800,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numFastZombies:15}]}},Level11:{generator1:{grid:{row:0,
col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:300,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numFastZombies:15},{waitTime:6,spawnTime:1,enemyHealth:600,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8}]},generator2:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:300,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:4600,enemySpeed:0.4,enemyDamage:160,enemyStars:20,numBigbots:3},{waitTime:6,spawnTime:1,enemyHealth:400,
enemySpeed:0.4,enemyDamage:80,enemyStars:1,numFastZombies:15},{waitTime:1,spawnTime:0.3,enemyHealth:600,enemySpeed:0.3,enemyDamage:50,enemyStars:2,numNormbots:10}]}},Level12:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:800,enemySpeed:0.3,enemyDamage:50,enemyStars:1,numFastZombies:17},{waitTime:6,spawnTime:1,enemyHealth:1200,enemySpeed:0.3,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8},{waitTime:1,spawnTime:1,enemyHealth:1200,enemySpeed:0.5,enemyDamage:50,enemyStars:2,
numClones:10}]},generator2:{grid:{row:0,col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:800,enemySpeed:0.3,enemyDamage:50,enemyStars:1,numFastZombies:15},{waitTime:2,spawnTime:1,enemyHealth:25E3,enemySpeed:0.3,enemyDamage:160,enemyStars:20,numZombiesBoss:4},{waitTime:6,spawnTime:1,enemyHealth:800,enemySpeed:0.3,enemyDamage:80,enemyStars:1,numFastZombies:15}]},generator3:{grid:{row:0,col:11},spawn:[{waitTime:4,spawnTime:2,enemyHealth:800,enemySpeed:0.3,enemyDamage:80,enemyStars:1,numFastZombies:10},
{waitTime:1,spawnTime:2,enemyHealth:12500,enemySpeed:0.4,enemyDamage:160,enemyStars:5,numBigbots:3},{waitTime:1,spawnTime:2,enemyHealth:800,enemySpeed:0.2,enemyDamage:50,enemyStars:1,numFastZombies:30}]}},Level13:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:300,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numFastZombies:8},{waitTime:6,spawnTime:1,enemyHealth:500,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:7},{waitTime:2,spawnTime:1,enemyHealth:5E3,
enemySpeed:0.5,enemyDamage:160,enemyStars:20,numClones:1},{waitTime:2,spawnTime:0.5,enemyHealth:300,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numNormbots:5}]},generator2:{grid:{row:0,col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:300,enemySpeed:0.5,enemyDamage:50,enemyStars:1,numFastZombies:8},{waitTime:2,spawnTime:1,enemyHealth:5E3,enemySpeed:0.4,enemyDamage:160,enemyStars:20,numBigbots:3},{waitTime:6,spawnTime:1,enemyHealth:300,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numFastZombies:7},{waitTime:4,
spawnTime:1,enemyHealth:500,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8,numFastZombies:5}]}},Level14:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:1,enemyHealth:600,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:15},{waitTime:6,spawnTime:1,enemyHealth:1E3,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8},{waitTime:6,spawnTime:1,enemyHealth:600,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,
enemyHealth:1200,enemySpeed:0.5,enemyDamage:50,enemyStars:2,numClones:10}]},generator2:{grid:{row:0,col:14},spawn:[{waitTime:2,spawnTime:1,enemyHealth:600,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:12500,enemySpeed:0.4,enemyDamage:160,enemyStars:20,numBigbots:4},{waitTime:6,spawnTime:1,enemyHealth:600,enemySpeed:0.4,enemyDamage:80,enemyStars:1,numFastZombies:15}]}},Level15:{generator1:{grid:{row:0,col:6},spawn:[{waitTime:2,spawnTime:0.8,enemyHealth:800,
enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:15},{waitTime:6,spawnTime:0.5,enemyHealth:1E3,enemySpeed:0.4,enemyDamage:50,enemyStars:2,numZombies:5,numNormbots:8},{waitTime:6,spawnTime:0.8,enemyHealth:800,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:12E3,enemySpeed:0.25,enemyDamage:250,enemyStars:2,numClones:1},{waitTime:6,spawnTime:0.8,enemyHealth:800,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10}]},generator2:{grid:{row:0,
col:14},spawn:[{waitTime:2,spawnTime:0.8,enemyHealth:800,enemySpeed:0.4,enemyDamage:50,enemyStars:1,numFastZombies:10},{waitTime:2,spawnTime:1,enemyHealth:12500,enemySpeed:0.25,enemyDamage:160,enemyStars:20,numBigbots:4},{waitTime:6,spawnTime:0.8,enemyHealth:1E3,enemySpeed:0.3,enemyDamage:80,enemyStars:1,numFastZombies:15},{waitTime:1,spawnTime:1,enemyHealth:12E3,enemySpeed:0.25,enemyDamage:160,enemyStars:5,numZombiesBoss:4}]},generator3:{grid:{row:0,col:14},spawn:[{waitTime:20,spawnTime:0.8,enemyHealth:300,
enemySpeed:0.3,enemyDamage:50,enemyStars:1,numFastZombies:15}]}}};
_SPRITES={gameSprites:{path:"media/graphics/sprites.png",graphics:[{name:"bed.png",sx:328,sy:52,sw:92,sh:75},{name:"boombox-large.png",sx:244,sy:323,sw:97,sh:79},{name:"boombox-small.png",sx:427,sy:199,sw:49,sh:49},{name:"boxes1.png",sx:424,sy:0,sw:50,sh:50},{name:"boxes2.png",sx:345,sy:265,sw:50,sh:50},{name:"boxes3.png",sx:345,sy:214,sw:80,sh:49},{name:"chair1.png",sx:403,sy:462,sw:49,sh:47},{name:"chair2.png",sx:404,sy:150,sw:49,sh:47},{name:"chair3.png",sx:455,sy:404,sw:44,sh:49},{name:"chair4.png",
sx:455,sy:353,sw:44,sh:49},{name:"chair5.png",sx:397,sy:265,sw:50,sh:50},{name:"ferb-button-loading-bar.png",sx:0,sy:285,sw:120,sh:79},{name:"ferb-button-loading-base.png",sx:206,sy:0,sw:120,sh:79},{name:"ferb-button-loading-txt.png",sx:0,sy:447,sw:101,sh:39},{name:"ferb-button-ready.png",sx:122,sy:285,sw:120,sh:79},{name:"overlay-tree.png",sx:0,sy:0,sw:204,sh:283},{name:"phineas-button-loading-bar.png",sx:122,sy:366,sw:120,sh:79},{name:"phineas-button-loading-base.png",sx:206,sy:81,sw:120,sh:79},
{name:"phineas-button-loading-txt.png",sx:343,sy:323,sw:86,sh:39},{name:"phineas-button-ready.png",sx:0,sy:366,sw:120,sh:79},{name:"sandbag1.png",sx:449,sy:250,sw:48,sh:49},{name:"sandbag2.png",sx:449,sy:301,sw:48,sh:50},{name:"sofa.png",sx:305,sy:404,sw:96,sh:50},{name:"spot.png",sx:305,sy:456,sw:96,sh:51},{name:"table1.png",sx:103,sy:447,sw:100,sh:50},{name:"table2.png",sx:328,sy:0,sw:94,sh:50},{name:"table3.png",sx:308,sy:162,sw:94,sh:50},{name:"table4.png",sx:205,sy:447,sw:98,sh:50},{name:"table5.png",
sx:422,sy:52,sw:50,sh:96},{name:"table6.png",sx:403,sy:364,sw:50,sh:96},{name:"tv.png",sx:206,sy:162,sw:100,sh:65},{name:"wardrobe.png",sx:244,sy:229,sw:99,sh:92}]},guiSprites:{path:"media/graphics/gui.png",graphics:[{name:"backyard.png",sx:0,sy:0,sw:660,sh:284},{name:"button-base.png",sx:317,sy:717,sw:263,sh:277},{name:"defense.png",sx:0,sy:286,sw:560,sh:244},{name:"frdge-o-rator-icon.png",sx:823,sy:602,sw:62,sh:81},{name:"level-base.png",sx:770,sy:858,sw:143,sh:149},{name:"life-bar-empty.png",sx:0,
sy:786,sw:241,sh:30},{name:"life-bar-full.png",sx:0,sy:818,sw:236,sh:26},{name:"life-icon.png",sx:867,sy:371,sw:40,sh:41},{name:"light-overlay.png",sx:197,sy:960,sw:110,sh:44},{name:"lvl-base-locked.png",sx:662,sy:132,sw:143,sh:152},{name:"menu-icon.png",sx:867,sy:318,sw:46,sh:51},{name:"next.png",sx:782,sy:768,sw:122,sh:60},{name:"options.png",sx:0,sy:960,sw:195,sh:56},{name:"p+f-logo.png",sx:358,sy:532,sw:215,sh:163},{name:"pillow-cannon-icon.png",sx:807,sy:132,sw:62,sh:77},{name:"play.png",sx:662,
sy:65,sw:157,sh:65},{name:"play2.png",sx:582,sy:768,sw:198,sh:88},{name:"popup-menu-base.png",sx:562,sy:286,sw:239,sh:239},{name:"popup-menu-close.png",sx:234,sy:846,sw:69,sh:69},{name:"price-star.png",sx:197,sy:1006,sw:16,sh:16},{name:"scroll-arrow-down.png",sx:807,sy:211,sw:57,sh:47},{name:"scroll-arrow-up.png",sx:243,sy:786,sw:57,sh:48},{name:"scroll-base.png",sx:915,sy:266,sw:28,sh:580},{name:"scroll-drag.png",sx:887,sy:414,sw:23,sh:158},{name:"select-level-header.png",sx:0,sy:717,sw:315,sh:55},
{name:"speech-baloon-large.png",sx:0,sy:532,sw:356,sh:183},{name:"speech-baloon-small.png",sx:0,sy:846,sw:232,sh:112},{name:"stars-icon.png",sx:234,sy:917,sw:40,sh:41},{name:"trash-icon.png",sx:823,sy:685,sw:62,sh:77},{name:"upgrade-icon.png",sx:803,sy:365,sw:62,sh:77},{name:"zapper-icon.png",sx:803,sy:286,sw:62,sh:77},{name:"restart.png",sx:662,sy:0,sw:162,sh:63},{name:"resume.png",sx:582,sy:858,sw:186,sh:73},{name:"sound-icon.png",sx:821,sy:79,sw:51,sh:47},{name:"music-icon.png",sx:867,sy:266,sw:46,
sh:50},{name:"slider-base.png",sx:0,sy:774,sw:301,sh:10},{name:"slider-knob.png",sx:866,sy:211,sw:52,sh:53},{name:"boxinator-icon.png",sx:803,sy:444,sw:62,sh:77},{name:"perrynator-icon.png",sx:826,sy:0,sw:62,sh:77},{name:"mininator-icon.png",sx:823,sy:523,sw:62,sh:77},{name:"back-button.png",sx:582,sy:933,sw:186,sh:73},{name:"popup-menu-base-insufficient.png",sx:582,sy:527,sw:239,sh:239}]},endSprites:{path:"media/graphics/end.png",graphics:[{name:"button-base.png",sx:0,sy:601,sw:186,sh:73},{name:"checkbox-empty.png",
sx:0,sy:730,sw:47,sh:36},{name:"checkbox-full.png",sx:0,sy:676,sw:65,sh:52},{name:"scorecard.png",sx:0,sy:0,sw:485,sh:599}]}};(function(a){Number.prototype.map=function(a,b,c,d){return c+(d-c)*((this-a)/(b-a))};Number.prototype.limit=function(a,b){return Math.min(b,Math.max(a,this))};Number.prototype.round=function(a){a=Math.pow(10,a||0);return Math.round(this*a)/a};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Object.defineProperty(Array.prototype,"erase",{value:function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this}});Object.defineProperty(Array.prototype,"random",{value:function(){return this[Math.floor(Math.random()*this.length)]}});Function.prototype.bind=Function.prototype.bind||function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,
d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};d.prototype=this.prototype;e.prototype=new d;return e};a.ig={game:null,debug:null,version:"1.24",global:a,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:a.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(a){return"#"==a.charAt(0)?document.getElementById(a.substr(1)):document.getElementsByTagName(a)},$new:function(a){return document.createElement(a)},
copy:function(a){if(!a||"object"!=typeof a||a instanceof HTMLElement||a instanceof ig.Class)return a;if(a instanceof Array)for(var b=[],c=0,d=a.length;c<d;c++)b[c]=ig.copy(a[c]);else for(c in b={},a)b[c]=ig.copy(a[c]);return b},merge:function(a,b){for(var c in b){var d=b[c];if("object"!=typeof d||d instanceof HTMLElement||d instanceof ig.Class||null===d)a[c]=d;else{if(!a[c]||"object"!=typeof a[c])a[c]=d instanceof Array?[]:{};ig.merge(a[c],d)}}return a},ksort:function(a){if(!a||"object"!=typeof a)return[];
var b=[],c=[],d;for(d in a)b.push(d);b.sort();for(d=0;d<b.length;d++)c.push(a[b[d]]);return c},setVendorAttribute:function(a,b,c){var d=b.charAt(0).toUpperCase()+b.substr(1);a[b]=a["ms"+d]=a["moz"+d]=a["webkit"+d]=a["o"+d]=c},getVendorAttribute:function(a,b){var c=b.charAt(0).toUpperCase()+b.substr(1);return a[b]||a["ms"+c]||a["moz"+c]||a["webkit"+c]||a["o"+c]},normalizeVendorAttribute:function(a,b){var c=ig.getVendorAttribute(a,b);!a[b]&&c&&(a[b]=c)},getImagePixels:function(a,b,c,d,e){var f=ig.$new("canvas");
f.width=a.width;f.height=a.height;var h=f.getContext("2d");ig.System.SCALE.CRISP(f,h);var r=ig.getVendorAttribute(h,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(h,"getImageDataHD");var q=a.width/r,t=a.height/r;f.width=Math.ceil(q);f.height=Math.ceil(t);h.drawImage(a,0,0,q,t);return 1===r?h.getImageData(b,c,d,e):h.getImageDataHD(b,c,d,e)},module:function(a){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[a]&&ig.modules[a].body)throw"Module '"+a+"' is already defined";
ig._current={name:a,requires:[],loaded:!1,body:null};ig.modules[a]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(a){ig._current.body=a;ig._current=null;ig._initDOMReady()},addResource:function(a){ig.resources.push(a)},setNocache:function(a){ig.nocache=a?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(a,b){ig.modules[a]=
{name:a,requires:[],loaded:!1,body:null};ig._waitForOnload++;var c=ig.prefix+ig.lib+a.replace(/\./g,"/")+".js"+ig.nocache,d=ig.$new("script");d.type="text/javascript";d.src=c;d.onload=function(){ig._waitForOnload--;ig._execModules()};d.onerror=function(){throw"Failed to load module "+a+" at "+c+" required from "+b;};ig.$("head")[0].appendChild(d)},_execModules:function(){for(var a=!1,b=0;b<ig._loadQueue.length;b++){for(var c=ig._loadQueue[b],d=!0,e=0;e<c.requires.length;e++){var f=c.requires[e];ig.modules[f]?
ig.modules[f].loaded||(d=!1):(d=!1,ig._loadScript(f,c.name))}d&&c.body&&(ig._loadQueue.splice(b,1),c.loaded=!0,c.body(),a=!0,b--)}if(a)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){a=[];for(b=0;b<ig._loadQueue.length;b++){d=[];f=ig._loadQueue[b].requires;for(e=0;e<f.length;e++)c=ig.modules[f[e]],(!c||!c.loaded)&&d.push(f[e]);a.push(ig._loadQueue[b].name+" (requires: "+d.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+
a.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=a.devicePixelRatio||1;ig.ua.viewport={width:a.innerWidth,height:a.innerHeight};ig.ua.screen={width:a.screen.availWidth*ig.ua.pixelRatio,height:a.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone/i.test(navigator.userAgent);
ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in a||a.navigator.msMaxTouchPoints},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],
loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),a.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(a,"requestAnimationFrame");if(a.requestAnimationFrame){var b=1,c={};a.ig.setAnimation=function(d,e){var f=b++;c[f]=!0;var h=function(){c[f]&&(a.requestAnimationFrame(h,e),d())};a.requestAnimationFrame(h,e);return f};a.ig.clearAnimation=function(a){delete c[a]}}else a.ig.setAnimation=
function(b){return a.setInterval(b,1E3/60)},a.ig.clearAnimation=function(b){a.clearInterval(b)};var d=!1,e=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,f=0;a.ig.Class=function(){};var h=function(a){var b=this.prototype,c={},d;for(d in a)"function"==typeof a[d]&&"function"==typeof b[d]&&e.test(a[d])?(c[d]=b[d],b[d]=function(a,b){return function(){var d=this.parent;this.parent=c[a];var e=b.apply(this,arguments);this.parent=d;return e}}(d,a[d])):b[d]=a[d]};a.ig.Class.extend=function(b){function c(){if(!d){if(this.staticInstantiate){var a=
this.staticInstantiate.apply(this,arguments);if(a)return a}for(var b in this)"object"==typeof this[b]&&(this[b]=ig.copy(this[b]));this.init&&this.init.apply(this,arguments)}return this}var k=this.prototype;d=!0;var n=new this;d=!1;for(var l in b)n[l]="function"==typeof b[l]&&"function"==typeof k[l]&&e.test(b[l])?function(a,b){return function(){var c=this.parent;this.parent=k[a];var d=b.apply(this,arguments);this.parent=c;return d}}(l,b[l]):b[l];c.prototype=n;c.prototype.constructor=c;c.extend=a.ig.Class.extend;
c.inject=h;c.classId=n.classId=++f;return c};a.ImpactMixin&&ig.merge(ig,a.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(a){return ig.Image.cache[a]||null},init:function(a){this.path=a;this.load()},load:function(a){this.loaded?a&&a(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=a||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0)},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)},resize:function(a){var b=ig.getImagePixels(this.data,0,0,this.width,
this.height),c=this.width*a,d=this.height*a,e=ig.$new("canvas");e.width=c;e.height=d;for(var f=e.getContext("2d"),h=f.getImageData(0,0,c,d),g=0;g<d;g++)for(var j=0;j<c;j++){var k=4*(Math.floor(g/a)*this.width+Math.floor(j/a)),n=4*(g*c+j);h.data[n]=b.data[k];h.data[n+1]=b.data[k+1];h.data[n+2]=b.data[k+2];h.data[n+3]=b.data[k+3]}f.putImageData(h,0,0);this.data=e},draw:function(a,b,c,d,e,f){if(this.loaded){var h=ig.system.scale;e=(e?e:this.width)*h;f=(f?f:this.height)*h;ig.system.context.drawImage(this.data,
c?c*h:0,d?d*h:0,e,f,ig.system.getDrawPos(a),ig.system.getDrawPos(b),e,f);ig.Image.drawCount++}},drawTile:function(a,b,c,d,e,f,h){e=e?e:d;if(this.loaded&&!(d>this.width||e>this.height)){var g=ig.system.scale,j=Math.floor(d*g),k=Math.floor(e*g),n=f?-1:1,l=h?-1:1;if(f||h)ig.system.context.save(),ig.system.context.scale(n,l);ig.system.context.drawImage(this.data,Math.floor(c*d)%this.width*g,Math.floor(c*d/this.width)*e*g,j,k,ig.system.getDrawPos(a)*n-(f?j:0),ig.system.getDrawPos(b)*l-(h?k:0),j,k);(f||
h)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var a in ig.Image.cache)ig.Image.cache[a].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(a){this._loadMetrics(this.data);this.parent(a)},widthForString:function(a){if(-1!==a.indexOf("\n")){a=a.split("\n");for(var b=0,c=0;c<a.length;c++)b=Math.max(b,this._widthForLine(a[c]));return b}return this._widthForLine(a)},_widthForLine:function(a){for(var b=0,c=0;c<a.length;c++)b+=this.widthMap[a.charCodeAt(c)-this.firstChar]+
this.letterSpacing;return b},heightForString:function(a){return a.split("\n").length*(this.height+this.lineSpacing)},draw:function(a,b,c,d){"string"!=typeof a&&(a=a.toString());if(-1!==a.indexOf("\n")){a=a.split("\n");for(var e=this.height+this.lineSpacing,f=0;f<a.length;f++)this.draw(a[f],b,c+f*e,d)}else{if(d==ig.Font.ALIGN.RIGHT||d==ig.Font.ALIGN.CENTER)f=this._widthForLine(a),b-=d==ig.Font.ALIGN.CENTER?f/2:f;1!==this.alpha&&(ig.system.context.globalAlpha=this.alpha);for(f=0;f<a.length;f++)d=a.charCodeAt(f),
b+=this._drawChar(d-this.firstChar,b,c);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=a.length}},_drawChar:function(a,b,c){if(!this.loaded||0>a||a>=this.indices.length)return 0;var d=ig.system.scale,e=this.widthMap[a]*d,f=(this.height-2)*d;ig.system.context.drawImage(this.data,this.indices[a]*d,0,e,f,ig.system.getDrawPos(b),ig.system.getDrawPos(c),e,f);return this.widthMap[a]+this.letterSpacing},_loadMetrics:function(a){this.height=a.height-1;this.widthMap=[];this.indices=
[];for(var b=ig.getImagePixels(a,0,a.height-1,a.width,1),c=0,d=0,e=0;e<a.width;e++){var f=4*e+3;127<b.data[f]?d++:128>b.data[f]&&d&&(this.widthMap.push(d),this.indices.push(e-d),c++,d=0)}this.widthMap.push(d);this.indices.push(e-d)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var a=new Audio,b=0;b<ig.Sound.use.length;b++){var c=ig.Sound.use[b];if(a.canPlayType(c.mime)){this.format=c;break}}this.format||(ig.Sound.enabled=!1);ig.Sound.enabled&&ig.Sound.useWebAudio&&(this.audioContext=new AudioContext,this.boundWebAudioUnlock=this.unlockWebAudio.bind(this),document.addEventListener("touchstart",
this.boundWebAudioUnlock,!1))}},unlockWebAudio:function(){document.removeEventListener("touchstart",this.boundWebAudioUnlock,!1);var a=this.audioContext.createBuffer(1,1,22050),b=this.audioContext.createBufferSource();b.buffer=a;b.connect(this.audioContext.destination);b.start(0)},load:function(a,b,c){return b&&ig.Sound.useWebAudio?this.loadWebAudio(a,b,c):this.loadHTML5Audio(a,b,c)},loadWebAudio:function(a,b,c){b=ig.prefix+a.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[a])return this.clips[a];
var d=new ig.Sound.WebAudioSource;this.clips[a]=d;var e=new XMLHttpRequest;e.open("GET",b,!0);e.responseType="arraybuffer";var f=this;e.onload=function(b){f.audioContext.decodeAudioData(e.response,function(e){d.buffer=e;c&&c(a,!0,b)},function(b){c&&c(a,!1,b)})};e.onerror=function(b){c(a,!1,b)};e.send();return d},loadHTML5Audio:function(a,b,c){var d=ig.prefix+a.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[a]){if(this.clips[a]instanceof ig.Sound.WebAudioSource)return this.clips[a];if(b&&
this.clips[a].length<ig.Sound.channels)for(b=this.clips[a].length;b<ig.Sound.channels;b++){var e=new Audio(d);e.load();this.clips[a].push(e)}return this.clips[a][0]}var f=new Audio(d);c&&(ig.ua.mobile?setTimeout(function(){c(a,!0,null)},0):(f.addEventListener("canplaythrough",function g(b){f.removeEventListener("canplaythrough",g,!1);c(a,!0,b)},!1),f.addEventListener("error",function(b){c(a,!1,b)},!1)));f.preload="auto";f.load();this.clips[a]=[f];if(b)for(b=1;b<ig.Sound.channels;b++)e=new Audio(d),
e.load(),this.clips[a].push(e);return f},get:function(a){if((a=this.clips[a])&&a instanceof ig.Sound.WebAudioSource)return a;for(var b=0,c;c=a[b++];)if(c.paused||c.ended)return c.ended&&(c.currentTime=0),c;a[0].pause();a[0].currentTime=0;return a[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,
"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})},add:function(a,b){if(ig.Sound.enabled){var c=a instanceof ig.Sound?a.path:a,d=ig.soundManager.load(c,!1);if(d instanceof ig.Sound.WebAudioSource)throw ig.system.stopRunLoop(),"Sound '"+c+"' loaded as Multichannel but used for Music. Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)";d.loop=this._loop;
d.volume=this._volume;d.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(d);b&&(this.namedTracks[b]=d);this.currentTrack||(this.currentTrack=d)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),
this.currentTrack.currentTime=0)},play:function(a){if(a&&this.namedTracks[a])a=this.namedTracks[a],a!=this.currentTrack&&(this.stop(),this.currentTrack=a);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a;for(var b in this.tracks)this.tracks[b].loop=a},getVolume:function(){return this._volume},setVolume:function(a){this._volume=a.limit(0,1);for(var b in this.tracks)this.tracks[b].volume=this._volume},fadeOut:function(a){this.currentTrack&&
(clearInterval(this._fadeInterval),this.fadeTimer=new ig.Timer(a),this._fadeInterval=setInterval(this._fadeStep.bind(this),50))},_fadeStep:function(){var a=this.fadeTimer.delta().map(-this.fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=a?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):this.currentTrack.volume=a},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,_loop:!1,
init:function(a,b){this.path=a;this.multiChannel=!1!==b;Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load()},getLooping:function(){return this._loop},setLooping:function(a){this._loop=a;this.currentClip&&(this.currentClip.loop=a)},load:function(a){ig.Sound.enabled?ig.ready?ig.soundManager.load(this.path,this.multiChannel,a):ig.addResource(this):a&&a(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),
this.currentClip.loop=this._loop,this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:!1,init:function(){this.gain=ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});
Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)})},play:function(){if(this.buffer){var a=ig.soundManager.audioContext.createBufferSource();a.buffer=this.buffer;a.connect(this.gain);a.loop=this._loop;var b=this;this.sources.push(a);a.onended=function(){b.sources.erase(a)};a.start(0)}},pause:function(){for(var a=0;a<this.sources.length;a++)try{this.sources[a].stop()}catch(b){}},getLooping:function(){return this._loop},setLooping:function(a){this._loop=
a;for(var b=0;b<this.sources.length;b++)this.sources[b].loop=a},getVolume:function(){return this.gain.gain.value},setVolume:function(a){this.gain.gain.value=a}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0;ig.normalizeVendorAttribute(window,
"AudioContext");ig.Sound.useWebAudio=!!window.AudioContext&&!window.nwf});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(a,b){this.gameClass=a;this.resources=b;this._loadCallbackBound=this._loadCallback.bind(this);for(var c=0;c<this.resources.length;c++)this._unloaded.push(this.resources[c].path);ig.system.refit(ig.system.RESIZE_CONTEXT.FULL_SCREEN);window.addEventListener("resize",
function(){ig.system.refit(ig.system.RESIZE_CONTEXT.FULL_SCREEN)})},load:function(){ig.system.clear("#000");if(this.resources.length){for(var a=0;a<this.resources.length;a++)this.loadResource(this.resources[a]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(a){a.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId),ig.system.setGame(this.gameClass))},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/
5;var a=ig.system.scale,b=0.6*ig.system.width,c=0.1*ig.system.height,d=0.5*ig.system.width-b/2,e=0.5*ig.system.height-c/2;ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,480,320);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(d*a,e*a,b*a,c*a);ig.system.context.fillStyle="#000";ig.system.context.fillRect(d*a+a,e*a+a,b*a-a-a,c*a-a-a);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(d*a,e*a,b*a*this._drawStatus,c*a)},_loadCallback:function(a,b){if(b)this._unloaded.erase(a);
else throw"Failed to load resource: "+a;this.status=1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(a){this.last=this.base=ig.Timer.time;this.target=a||0},set:function(a){this.target=a||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var a=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:a},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||
(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var a=Date.now();ig.Timer.time+=Math.min((a-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=a}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,bgcanvas:null,bgcontext:null,RESIZE_CONTEXT:{FULL_SCREEN:1,SCALE_ASPECT_TO_FIT:2,SCALE_ASPECT_TO_FILL:3},init:function(a,b,c,d,e){this.fps=b;this.clock=new ig.Timer;this.canvas=ig.$(a);ig.global.wm||(this.bgcanvas=ig.$("#bgcanvas"),
this.bgcontext=this.bgcanvas.getContext("2d"));this.resize(c,d,e);this.context=this.canvas.getContext("2d");this.canvas.screencanvas=!0;this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);ig.System.scaleMode(this.canvas,this.context)},resize:function(a,b,c){this.width=a;this.height=b;this.scale=c||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=~~this.realWidth;this.canvas.height=~~this.realHeight;ig.global.wm||
(this.bgcanvas.width=~~this.realWidth,this.bgcanvas.height=~~this.realHeight)},refit:function(a){switch(a){case this.RESIZE_CONTEXT.FULL_SCREEN:this.canvas.style.cssText="idtkscale:ScaleToFill";ig.global.wm||(this.bgcanvas.style.cssText="idtkscale:ScaleToFill");break;case this.RESIZE_CONTEXT.SCALE_ASPECT_TO_FIT:this.canvas.style.cssText="idtkscale:ScaleAspectFit";ig.global.wm||(this.bgcanvas.style.cssText="idtkscale:ScaleAspectFit");break;case this.RESIZE_CONTEXT.SCALE_ASPECT_TO_FILL:this.canvas.style.cssText=
"idtkscale:ScaleAspectFill",ig.global.wm||(this.bgcanvas.style.cssText="idtkscale:ScaleAspectFill")}},setGame:function(a){this.running?this.newGameClass=a:this.setGameNow(a)},setGameNow:function(a){ig.game=new a;ig.system.setDelegate(ig.game)},setDelegate:function(a){if("function"==typeof a.run)this.delegate=a,this.startRunLoop();else throw"System.setDelegate: No run() function in object";},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();
this.animationId=ig.setAnimation(this.run.bind(this),this.canvas);this.running=!0},clear:function(a){this.context.fillStyle=a;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getBrowserWidth:function(){return window.innerWidth?window.innerWidth:document.documentElement&&0!=document.documentElement.clientWidth?
document.documentElement.clientWidth:document.body?document.body.clientWidth:0},getBrowserHeight:function(){return window.innerHeight?window.innerHeight:document.documentElement&&0!=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:0},getDrawPos:null});ig.System.DRAW={AUTHENTIC:function(a){return Math.round(a)*this.scale},SMOOTH:function(a){return Math.round(a*this.scale)},SUBPIXEL:function(a){return a*this.scale}};ig.System.drawMode=
ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(a,b){ig.setVendorAttribute(b,"imageSmoothingEnabled",!1);a.style.imageRendering="-moz-crisp-edges";a.style.imageRendering="-o-crisp-edges";a.style.imageRendering="-webkit-optimize-contrast";a.style.imageRendering="crisp-edges";a.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(a,b){ig.setVendorAttribute(b,"imageSmoothingEnabled",!0);a.style.imageRendering="";a.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});
ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},initMouse:function(){this.isUsingMouse||
(this.isUsingMouse=!0,this.mousewheel.bind(this),ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),
!1)),ig.global.wm||(ig.system.bgcanvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.bgcanvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.bgcanvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.bgcanvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.bgcanvas.addEventListener("touchend",this.keyup.bind(this),!1),ig.system.bgcanvas.addEventListener("touchmove",this.mousemove.bind(this),!1))))},initKeyboard:function(){this.isUsingKeyboard||
(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||(this.isUsingAccelerometer=!0,window.addEventListener("devicemotion",this.devicemotion.bind(this),!1))},mousewheel:function(a){var b=this.bindings[0<(a.wheelDelta?a.wheelDelta:-1*a.detail)?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];b&&(this.actions[b]=!0,this.presses[b]=!0,this.delayedKeyup[b]=!0,a.stopPropagation(),
a.preventDefault())},mousemove:function(a){parseInt(ig.system.canvas.offsetWidth);var b={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(b=ig.system.canvas.getBoundingClientRect());a=a.touches?a.touches[0]:a;this.mouse.x=a.clientX-b.left;this.mouse.y=a.clientY-b.top},contextmenu:function(a){this.bindings[ig.KEY.MOUSE2]&&(a.stopPropagation(),a.preventDefault())},keydown:function(a){var b=a.target.tagName;if(!("INPUT"==b||"TEXTAREA"==b))if(b="keydown"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:
ig.KEY.MOUSE1,0>b&&!ig.ua.mobile&&window.focus(),("touchstart"==a.type||"mousedown"==a.type)&&this.mousemove(a),b=this.bindings[b])this.actions[b]=!0,this.locks[b]||(this.presses[b]=!0,this.locks[b]=!0),a.preventDefault()},keyup:function(a){var b=a.target.tagName;if(!("INPUT"==b||"TEXTAREA"==b))if(b=this.bindings["keyup"==a.type?a.keyCode:2==a.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[b]=!0,a.preventDefault()},devicemotion:function(a){this.accel=a.accelerationIncludingGravity},bind:function(a,
b){0>a?this.initMouse():0<a&&this.initKeyboard();this.bindings[a]=b},bindTouch:function(a,b){var c=ig.$(a),d=this;c.addEventListener("touchstart",function(a){d.touchStart(a,b)},!1);c.addEventListener("touchend",function(a){d.touchEnd(a,b)},!1);c.addEventListener("MSPointerDown",function(a){d.touchStart(a,b)},!1);c.addEventListener("MSPointerUp",function(a){d.touchEnd(a,b)},!1)},unbind:function(a){this.delayedKeyup[this.bindings[a]]=!0;this.bindings[a]=null},unbindAll:function(){this.bindings={};this.actions=
{};this.presses={};this.locks={};this.delayedKeyup={}},state:function(a){return this.actions[a]},pressed:function(a){return this.presses[a]},released:function(a){return!!this.delayedKeyup[a]},clearPressed:function(){for(var a in this.delayedKeyup)this.actions[a]=!1,this.locks[a]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(a,b){this.actions[b]=!0;this.presses[b]=!0;a.stopPropagation();a.preventDefault();return!1},touchEnd:function(a,b){this.delayedKeyup[b]=!0;a.stopPropagation();a.preventDefault();
return!1}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").defines(function(){ig.SoundHandler=ig.Class.extend({formats:{ogg:".ogg",mp3:".mp3"},bgmPlaying:!1,bgmStarted:!1,muted:!1,SOUNDID:{},MUSICID:{},sfxSoundsLoaded:[],sfxSoundsToLoad:[{name:"energy",path:"media/audio/sfx/energy"},{name:"thwop",path:"media/audio/sfx/thwop"},{name:"zombie",path:"media/audio/sfx/zombie4"},{name:"vacuum",path:"media/audio/sfx/vacuum"},{name:"bzz",path:"media/audio/sfx/bzz"},{name:"bzzlong",path:"media/audio/sfx/bzzlong"},{name:"poof",
path:"media/audio/sfx/poof"},{name:"cannon",path:"media/audio/sfx/toycannon"},{name:"fridge",path:"media/audio/sfx/snowball"},{name:"swoosh",path:"media/audio/sfx/swoosh"},{name:"thunder",path:"media/audio/sfx/thunder"}],bgmLoaded:[],bgmToLoad:[{name:"background",path:"media/audio/bgm/bgm"}],forceMuted:!1,soundBuffer:[],bzzLongCount:0,soundSliderRatio:1,musicSliderRatio:1,init:function(){ig.Sound.enabled=!0;this.setupMusic();this.setupSound();this.setupWindowHandler()},setupWindowHandler:function(){CocoonJS&&
CocoonJS.App&&(CocoonJS.App.onSuspended.addEventListener(function(){ig.soundHandler&&(ig.soundHandler.forceMuted||ig.soundHandler.mute());ig.game&&ig.game.pauseGame()}.bind(this)),CocoonJS.App.onActivated.addEventListener(function(){ig.soundHandler&&(ig.soundHandler.forceMuted||ig.soundHandler.unmute());ig.game&&ig.game.unpauseGame()}.bind(this)));window.onfocus=function(){ig.soundHandler&&(ig.soundHandler.forceMuted||ig.soundHandler.unmute());ig.game&&!ig.game.forcePause&&!ig.game.tutorialPause&&
ig.game.unpauseGame()};window.onblur=function(){ig.soundHandler&&(ig.soundHandler.forceMuted||ig.soundHandler.mute());ig.game&&!ig.game.forcePause&&!ig.game.tutorialPause&&ig.game.pauseGame()}},setupMusic:function(){ig.music.setLooping(!0);for(index=0;index<this.bgmToLoad.length;index++)this.addBgm(this.bgmToLoad[index].name,this.bgmToLoad[index].path)},setupSound:function(){for(index=0;index<this.sfxSoundsToLoad.length;index++){var a=function(a){this.sfxSoundsLoaded.push(this[a])}.bind(this,this.sfxSoundsToLoad[index].name);
this.addSound(this.sfxSoundsToLoad[index].name,this.sfxSoundsToLoad[index].path,a)}},addBgm:function(a,b){this.MUSICID[a]=a;ig.music.add(b+".*",a);ig.music.setLooping(!0)},addSound:function(a,b){this.SOUNDID[a]=a;this[a]=new ig.Sound(b+".*")},playSound:function(a){var b=this[a];b&&!this.muted&&("bzzlong"===a?1>this.bzzLongCount&&(b.setLooping(!0),b.play(),this.bzzLongCount++):b.play())},stopSound:function(a){var b=this[a];b&&("bzzlong"===a?(b.setLooping(!1),b.stop(),this.bzzLongCount--,0>this.bzzLongCount&&
(this.bzzLongCount=0)):b.stop())},stopAllSounds:function(){for(var a=0;a<this.sfxSoundsToLoad.length;a++)this.stopSound(this.sfxSoundsToLoad[a].name)},mute:function(){this.muteSound();this.muteMusic()},unmute:function(){this.unmuteSound();this.unmuteMusic()},playBgm:function(a){this.bgmPlaying||(this.bgmStarted=!0,ig.music.play(a),this.bgmPlaying=!0)},bgmFadeOut:function(a){ig.music.fadeOut(a)},adjustSound:function(a){0>=a?this.muteSound():this.unmuteSound();ig.soundManager.volume=~~(100*a)/100;this.soundSliderRatio=
ig.soundManager.volume},adjustMusic:function(a){0>=a?this.muteMusic():this.unmuteMusic();ig.music.volume=~~(100*a)/100;this.musicSliderRatio=ig.music.volume},muteSound:function(){ig.Sound.enabled=!1;this.stopAllSounds()},muteMusic:function(){ig.music.pause()},unmuteSound:function(){ig.Sound.enabled=!0},unmuteMusic:function(){ig.music.play()}})});ig.baked=!0;
ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound","plugins.audio.sound-handler").defines(function(){ig.main=function(a,b,c,d,e,f,h){ig.system=new ig.System(a,c,d,e,f||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;ig.soundHandler=new ig.SoundHandler;(new (h||ig.Loader)(b,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(a,b,c){this.width=b;this.height=c;this.image=new ig.Image(a)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frame:0,tile:0,loopCount:0,alpha:1,angle:0,currentGlobalComposite:"source-over",init:function(a,b,c,d){this.sheet=a;this.pivot={x:a.width/2,y:a.height/2};this.timer=new ig.Timer;
this.frameTime=b;this.sequence=c;this.stop=!!d;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(a){this.timer.set(this.frameTime*-a-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var a=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(a/this.sequence.length);this.frame=this.stop&&0<this.loopCount?
this.sequence.length-1:a%this.sequence.length;this.tile=this.sequence[this.frame]},draw:function(a,b){var c=Math.max(this.sheet.width,this.sheet.height);a>ig.system.width||b>ig.system.height||(0>a+c||0>b+c)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(a,b,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(a+this.pivot.x),ig.system.getDrawPos(b+this.pivot.y)),
ig.system.context.rotate(this.angle),ig.system.context.globalComposite=this.currentGlobalComposite,this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(a,
b,c){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=a;this.pos.y=this.last.y=b;ig.merge(this,c)},reset:function(a,b,c){var d=this.constructor.prototype;this.pos.x=a;this.pos.y=b;this.last.x=a;this.last.y=b;this.vel.x=d.vel.x;this.vel.y=d.vel.y;this.accel.x=d.accel.x;this.accel.y=d.accel.y;this.health=d.health;this._killed=d._killed;this.standing=d.standing;this.type=d.type;this.checkAgainst=d.checkAgainst;this.collides=d.collides;ig.merge(this,c)},addAnim:function(a,b,c,d){if(!this.animSheet)throw"No animSheet to add the animation "+
a+" to.";b=new ig.Animation(this.animSheet,b,c,d);this.anims[a]=b;this.currentAnim||(this.currentAnim=b);return b},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var a=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(a);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(a,b,c,d){return b?(a+b*ig.system.tick).limit(-d,d):c?(b=c*ig.system.tick,0<a-b?a-b:0>a+b?a+b:0):a.limit(-d,d)},handleMovementTrace:function(a){this.standing=!1;a.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));a.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(a.collision.slope){var b=a.collision.slope;if(0<this.bounciness){var c=this.vel.x*b.nx+this.vel.y*b.ny;this.vel.x=(this.vel.x-2*b.nx*c)*this.bounciness;this.vel.y=(this.vel.y-2*b.ny*c)*this.bounciness}else c=(this.vel.x*b.x+this.vel.y*b.y)/(b.x*b.x+b.y*b.y),this.vel.x=b.x*c,this.vel.y=b.y*c,b=Math.atan2(b.x,b.y),b>this.slopeStanding.min&&b<this.slopeStanding.max&&(this.standing=!0)}this.pos=a.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(a){this.health-=a;0>=this.health&&this.kill()},touches:function(a){return!(this.pos.x>=a.pos.x+a.size.x||this.pos.x+this.size.x<=a.pos.x||this.pos.y>=a.pos.y+a.size.y||this.pos.y+this.size.y<=a.pos.y)},distanceTo:function(a){var b=this.pos.x+this.size.x/2-(a.pos.x+a.size.x/2);a=this.pos.y+this.size.y/2-(a.pos.y+a.size.y/2);return Math.sqrt(b*b+a*a)},angleTo:function(a){return Math.atan2(a.pos.y+
a.size.y/2-(this.pos.y+this.size.y/2),a.pos.x+a.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(a,b){a.checkAgainst&b.type&&a.check(b);b.checkAgainst&a.type&&b.check(a);a.collides&&b.collides&&a.collides+b.collides>ig.Entity.COLLIDES.ACTIVE&&ig.Entity.solveCollision(a,b)};ig.Entity.solveCollision=
function(a,b){var c=null;if(a.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)c=a;else if(b.collides==ig.Entity.COLLIDES.LITE||a.collides==ig.Entity.COLLIDES.FIXED)c=b;a.last.x+a.size.x>b.last.x&&a.last.x<b.last.x+b.size.x?(a.last.y<b.last.y?ig.Entity.seperateOnYAxis(a,b,c):ig.Entity.seperateOnYAxis(b,a,c),a.collideWith(b,"y"),b.collideWith(a,"y")):a.last.y+a.size.y>b.last.y&&a.last.y<b.last.y+b.size.y&&(a.last.x<b.last.x?ig.Entity.seperateOnXAxis(a,b,c):ig.Entity.seperateOnXAxis(b,
a,c),a.collideWith(b,"x"),b.collideWith(a,"x"))};ig.Entity.seperateOnXAxis=function(a,b,c){var d=a.pos.x+a.size.x-b.pos.x;c?(c.vel.x=-c.vel.x*c.bounciness+(a===c?b:a).vel.x,b=ig.game.collisionMap.trace(c.pos.x,c.pos.y,c==a?-d:d,0,c.size.x,c.size.y),c.pos.x=b.pos.x):(c=(a.vel.x-b.vel.x)/2,a.vel.x=-c,b.vel.x=c,c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,-d/2,0,a.size.x,a.size.y),a.pos.x=Math.floor(c.pos.x),a=ig.game.collisionMap.trace(b.pos.x,b.pos.y,d/2,0,b.size.x,b.size.y),b.pos.x=Math.ceil(a.pos.x))};
ig.Entity.seperateOnYAxis=function(a,b,c){var d=a.pos.y+a.size.y-b.pos.y;if(c){b=a===c?b:a;c.vel.y=-c.vel.y*c.bounciness+b.vel.y;var e=0;c==a&&Math.abs(c.vel.y-b.vel.y)<c.minBounceVelocity&&(c.standing=!0,e=b.vel.x*ig.system.tick);a=ig.game.collisionMap.trace(c.pos.x,c.pos.y,e,c==a?-d:d,c.size.x,c.size.y);c.pos.y=a.pos.y;c.pos.x=a.pos.x}else ig.game.gravity&&(b.standing||0<a.vel.y)?(c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,0,-(a.pos.y+a.size.y-b.pos.y),a.size.x,a.size.y),a.pos.y=c.pos.y,0<a.bounciness&&
a.vel.y>a.minBounceVelocity?a.vel.y*=-a.bounciness:(a.standing=!0,a.vel.y=0)):(c=(a.vel.y-b.vel.y)/2,a.vel.y=-c,b.vel.y=c,e=b.vel.x*ig.system.tick,c=ig.game.collisionMap.trace(a.pos.x,a.pos.y,e,-d/2,a.size.x,a.size.y),a.pos.y=c.pos.y,a=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,d/2,b.size.x,b.size.y),b.pos.y=a.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,data:[[]],name:null,init:function(a,b){this.tilesize=a;this.data=b;this.height=b.length;this.width=b[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(a,b){var c=Math.floor(a/this.tilesize),d=Math.floor(b/this.tilesize);return 0<=c&&c<this.width&&0<=d&&d<this.height?this.data[d][c]:0},setTile:function(a,b,c){a=Math.floor(a/this.tilesize);b=Math.floor(b/
this.tilesize);0<=a&&a<this.width&&0<=b&&b<this.height&&(this.data[b][a]=c)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(a,b,e){this.parent(a,b);this.tiledef=e||ig.CollisionMap.defaultTileDef;for(var f in this.tiledef)f|0>this.lastSlope&&(this.lastSlope=f|0)},trace:function(a,b,e,f,h,g){var j={collision:{x:!1,y:!1,slope:!1},pos:{x:a,y:b},tile:{x:0,y:0}},k=Math.ceil(Math.max(Math.abs(e),Math.abs(f))/this.tilesize);if(1<k)for(var n=e/k,l=f/k,m=0;m<k&&(n||l)&&!(this._traceStep(j,
a,b,n,l,h,g,e,f,m),a=j.pos.x,b=j.pos.y,j.collision.x&&(e=n=0),j.collision.y&&(f=l=0),j.collision.slope);m++);else this._traceStep(j,a,b,e,f,h,g,e,f,0);return j},_traceStep:function(a,b,e,f,h,g,j,k,n,l){a.pos.x+=f;a.pos.y+=h;var m=0;if(f){var p=0<f?g:0,r=0>f?this.tilesize:0,m=Math.max(Math.floor(e/this.tilesize),0),q=Math.min(Math.ceil((e+j)/this.tilesize),this.height);f=Math.floor((a.pos.x+p)/this.tilesize);var t=Math.floor((b+p)/this.tilesize);if(0<l||f==t||0>t||t>=this.width)t=-1;if(0<=f&&f<this.width)for(var s=
m;s<q&&!(-1!=t&&(m=this.data[s][t],1<m&&m<=this.lastSlope&&this._checkTileDef(a,m,b,e,k,n,g,j,t,s)));s++)if(m=this.data[s][f],1==m||m>this.lastSlope||1<m&&this._checkTileDef(a,m,b,e,k,n,g,j,f,s)){if(1<m&&m<=this.lastSlope&&a.collision.slope)break;a.collision.x=!0;a.tile.x=m;b=a.pos.x=f*this.tilesize-p+r;k=0;break}}if(h){p=0<h?j:0;h=0>h?this.tilesize:0;m=Math.max(Math.floor(a.pos.x/this.tilesize),0);r=Math.min(Math.ceil((a.pos.x+g)/this.tilesize),this.width);s=Math.floor((a.pos.y+p)/this.tilesize);
q=Math.floor((e+p)/this.tilesize);if(0<l||s==q||0>q||q>=this.height)q=-1;if(0<=s&&s<this.height)for(f=m;f<r&&!(-1!=q&&(m=this.data[q][f],1<m&&m<=this.lastSlope&&this._checkTileDef(a,m,b,e,k,n,g,j,f,q)));f++)if(m=this.data[s][f],1==m||m>this.lastSlope||1<m&&this._checkTileDef(a,m,b,e,k,n,g,j,f,s)){if(1<m&&m<=this.lastSlope&&a.collision.slope)break;a.collision.y=!0;a.tile.y=m;a.pos.y=s*this.tilesize-p+h;break}}},_checkTileDef:function(a,b,e,f,h,g,j,k,n,l){var m=this.tiledef[b];if(!m)return!1;b=(m[2]-
m[0])*this.tilesize;var p=(m[3]-m[1])*this.tilesize,r=m[4];j=e+h+(0>p?j:0)-(n+m[0])*this.tilesize;k=f+g+(0<b?k:0)-(l+m[1])*this.tilesize;if(0<b*k-p*j){if(0>h*-p+g*b)return r;n=Math.sqrt(b*b+p*p);l=p/n;n=-b/n;var q=j*l+k*n,m=l*q,q=n*q;if(m*m+q*q>=h*h+g*g)return r||0.5>b*(k-g)-p*(j-h);a.pos.x=e+h-m;a.pos.y=f+g-q;a.collision.slope={x:b,y:p,nx:l,ny:n};return!0}return!1}});var a=1/3,b=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,b,!0],6:[0,b,1,a,!0],7:[0,a,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[b,1,1,0,!0],43:[a,1,b,0,!0],54:[0,1,a,0,!0],27:[0,0,1,a,!0],28:[0,a,1,b,!0],29:[0,b,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,a,1,!0],44:[a,0,b,1,!0],55:[b,0,1,1,!0],16:[1,a,0,0,!0],17:[1,b,0,a,!0],18:[1,1,0,b,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[a,1,0,0,!0],41:[b,1,a,0,!0],52:[1,1,b,0,!0],38:[1,b,0,1,!0],39:[1,a,0,b,!0],40:[1,0,
0,a,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,b,1,!0],42:[b,0,a,1,!0],53:[a,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(a,b,e,f){return{collision:{x:!1,y:!1,slope:!1},pos:{x:a+e,y:b+f},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(a,b,c){this.parent(a,b);this.setTileset(c)},setTileset:function(a){this.tilesetName=a instanceof ig.Image?a.path:a;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(a,
b){this.scroll.x=a/this.distance;this.scroll.y=b/this.distance},preRenderMapToChunks:function(){var a=this.width*this.tilesize*ig.system.scale,b=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(a,b),this.chunkSize);var c=Math.ceil(a/this.chunkSize),d=Math.ceil(b/this.chunkSize);this.preRenderedChunks=[];for(var e=0;e<d;e++){this.preRenderedChunks[e]=[];for(var f=0;f<c;f++)this.preRenderedChunks[e][f]=this.preRenderChunk(f,e,f==c-1?a-f*this.chunkSize:this.chunkSize,e==d-1?
b-e*this.chunkSize:this.chunkSize)}},preRenderChunk:function(a,b,c,d){var e=c/this.tilesize/ig.system.scale+1,f=d/this.tilesize/ig.system.scale+1,h=a*this.chunkSize/ig.system.scale%this.tilesize,g=b*this.chunkSize/ig.system.scale%this.tilesize;a=Math.floor(a*this.chunkSize/this.tilesize/ig.system.scale);b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);var j=ig.$new("canvas");j.width=c;j.height=d;j.retinaResolutionEnabled=!1;d=j.getContext("2d");ig.System.scaleMode(j,d);c=ig.system.context;
ig.system.context=d;for(d=0;d<e;d++)for(var k=0;k<f;k++)if(d+a<this.width&&k+b<this.height){var n=this.data[k+b][d+a];n&&this.tiles.drawTile(d*this.tilesize-h,k*this.tilesize-g,n-1,this.tilesize)}ig.system.context=c;return j},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var a=ig.system.getDrawPos(this.scroll.x),b=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var c=
this.width*this.tilesize*ig.system.scale,a=(a%c+c)%c,c=this.height*this.tilesize*ig.system.scale,b=(b%c+c)%c;var c=Math.max(Math.floor(a/this.chunkSize),0),d=Math.max(Math.floor(b/this.chunkSize),0),e=Math.ceil((a+ig.system.realWidth)/this.chunkSize),f=Math.ceil((b+ig.system.realHeight)/this.chunkSize),h=this.preRenderedChunks[0].length,g=this.preRenderedChunks.length;this.repeat||(e=Math.min(e,h),f=Math.min(f,g));for(var j=0;d<f;d++){for(var k=0,n=c;n<e;n++){var l=this.preRenderedChunks[d%g][n%h],
m=-a+n*this.chunkSize-k,p=-b+d*this.chunkSize-j;ig.system.context.drawImage(l,m,p);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(m,p,this.chunkSize,this.chunkSize));this.repeat&&l.width<this.chunkSize&&m+l.width<ig.system.realWidth&&(k+=this.chunkSize-l.width,e++)}this.repeat&&l.height<this.chunkSize&&p+l.height<ig.system.realHeight&&(j+=this.chunkSize-l.height,f++)}},drawTiled:function(){for(var a=0,b=null,c=(this.scroll.x/this.tilesize).toInt(),
d=(this.scroll.y/this.tilesize).toInt(),e=this.scroll.x%this.tilesize,f=this.scroll.y%this.tilesize,h=-e-this.tilesize,e=ig.system.width+this.tilesize-e,g=ig.system.height+this.tilesize-f,j=-1,f=-f-this.tilesize;f<g;j++,f+=this.tilesize){var k=j+d;if(k>=this.height||0>k){if(!this.repeat)continue;k=(k%this.height+this.height)%this.height}for(var n=-1,l=h;l<e;n++,l+=this.tilesize){a=n+c;if(a>=this.width||0>a){if(!this.repeat)continue;a=(a%this.width+this.width)%this.width}if(a=this.data[k][a])(b=this.anims[a-
1])?b.draw(l,f):this.tiles.drawTile(l,f,a-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,entitiesInView:[],staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(a){this.screen={x:0,y:0};this.entities=[];this.namedEntities={};for(var b=0;b<a.entities.length;b++){var c=a.entities[b];this.spawnEntity(c.type,c.x,c.y,c.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(b=0;b<a.layer.length;b++)if(c=a.layer[b],"collision"==c.name)this.collisionMap=new ig.CollisionMap(c.tilesize,c.data);else{var d=new ig.BackgroundMap(c.tilesize,c.data,c.tilesetName);d.anims=this.backgroundAnims[c.tilesetName]||
{};d.repeat=c.repeat;d.distance=c.distance;d.foreground=!!c.foreground;d.preRender=!!c.preRender;d.name=c.name;this.backgroundMaps.push(d)}for(b=0;b<this.entities.length;b++)this.entities[b].ready()},loadLevelDeferred:function(a){this._levelToLoad=a},getMapByName:function(a){if("collision"==a)return this.collisionMap;for(var b=0;b<this.backgroundMaps.length;b++)if(this.backgroundMaps[b].name==a)return this.backgroundMaps[b];return null},getEntityByName:function(a){return this.namedEntities[a]},getEntitiesByType:function(a){a=
"string"===typeof a?ig.global[a]:a;for(var b=[],c=0;c<this.entities.length;c++){var d=this.entities[c];d instanceof a&&!d._killed&&b.push(d)}return b},spawnEntity:function(a,b,c,d){var e="string"===typeof a?ig.global[a]:a;if(!e)throw"Can't spawn entity of type "+a;a=new e(b,c,d||{});this.entities.push(a);a.name&&(this.namedEntities[a.name]=a);return a},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(a){a.name&&
delete this.namedEntities[a.name];a._killed=!0;a.type=ig.Entity.TYPE.NONE;a.checkAgainst=ig.Entity.TYPE.NONE;a.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(a)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var a=0;a<this._deferredKill.length;a++)this._deferredKill[a].erase(),this.entities.erase(this._deferredKill[a]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var b in this.backgroundAnims){var a=this.backgroundAnims[b],c;for(c in a)a[c].update()}},updateEntities:function(){for(;0<this.entitiesInView.length;)this.entitiesInView.pop();for(var a=0;a<this.entities.length;a++){var b=this.entities[a];b.inView&&this.entitiesInView.push(b);b._killed||b.update()}},draw:function(){ig.system.context.clearRect(0,0,ig.system.canvas.width,ig.system.canvas.height);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/
ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var a;for(a=0;a<this.backgroundMaps.length;a++){var b=this.backgroundMaps[a];if(b.foreground)break;b.setScreenPos(this.screen.x,this.screen.y);b.draw()}this.drawEntities();for(a;a<this.backgroundMaps.length;a++)b=this.backgroundMaps[a],b.setScreenPos(this.screen.x,this.screen.y),b.draw()},drawEntities:function(){for(var a=0;a<this.entitiesInView.length;a++)this.entitiesInView[a].draw()},checkEntities:function(){for(var a=
{},b=0;b<this.entities.length;b++){var c=this.entities[b];if(!(c.type==ig.Entity.TYPE.NONE&&c.checkAgainst==ig.Entity.TYPE.NONE&&c.collides==ig.Entity.COLLIDES.NEVER))for(var d={},e=Math.floor(c.pos.y/this.cellSize),f=Math.floor((c.pos.x+c.size.x)/this.cellSize)+1,h=Math.floor((c.pos.y+c.size.y)/this.cellSize)+1,g=Math.floor(c.pos.x/this.cellSize);g<f;g++)for(var j=e;j<h;j++)if(a[g])if(a[g][j]){for(var k=a[g][j],n=0;n<k.length;n++)c.touches(k[n])&&!d[k[n].id]&&(d[k[n].id]=!0,ig.Entity.checkPair(c,
k[n]));k.push(c)}else a[g][j]=[c];else a[g]={},a[g][j]=[c]}}});ig.Game.SORT={Z_INDEX:function(a,b){return a.zIndex-b.zIndex},POS_X:function(a,b){return a.pos.x+a.size.x-(b.pos.x+b.size.x)},POS_Y:function(a,b){return a.pos.y+a.size.y-(b.pos.y+b.size.y)}}});ig.baked=!0;
ig.module("plugins.helper.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(a,b){this.game=a;this.levels=[];this.currentLevel=0;this.append(b)},loadLevel:function(a){this.currentLevel=a;this.game.loadLevel(this.levels[a]);return!0},loadLevelWithoutEntities:function(a){this.currentLevel=a;this.game.loadLevelWithoutEntities(this.levels[a]);return!0},append:function(a){newLevels=[];return"object"===typeof a?(a.constructor===[].constructor?newLevels=a:
newLevels[0]=a,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(a){var b=null;for(i=0;i<this.levels.length;i++)this.levels[i]==a&&(b=i);return 0<=b?this.loadLevel(b):!1},firstLevel:function(){return this.loadLevel(0)},lastLevel:function(){return this.loadLevel(this.levels.length-1)},
reloadLevel:function(){return this.loadLevel(this.currentLevel)},getLevelNumber:function(a){var b=null;for(i=0;i<this.levels.length;i++)this.levels[i]==a&&(b=i);return 0<=b?b:!1}})});ig.baked=!0;
ig.module("plugins.helper.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(a){return null!==this.get(a)},initUnset:function(a,b){null===this.get(a)&&this.set(a,b)},get:function(a){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(a))}catch(b){return window.localStorage.getItem(a)}},
getInt:function(a){return~~this.get(a)},getFloat:function(a){return parseFloat(this.get(a))},getBool:function(a){return!!this.get(a)},key:function(a){return this.isCapable()?window.localStorage.key(a):null},set:function(a,b){if(!this.isCapable())return null;try{window.localStorage.setItem(a,JSON.stringify(b))}catch(c){console.log(c)}},setHighest:function(a,b){b>this.getFloat(a)&&this.set(a,b)},remove:function(a){if(!this.isCapable())return null;window.localStorage.removeItem(a)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.helper.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0;b<this.length;++b)if(this[b]===a)return b;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var a=[],b=0;b<this.tweens.length;b++)this.tweens[b].update(),this.tweens[b].complete||a.push(this.tweens[b]);this.tweens=
a}};ig.Entity.prototype.tween=function(a,b,c){a=new ig.Tween(this,a,b,c);this.tweens.push(a);return a};ig.Entity.prototype.pauseTweens=function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].pause()};ig.Entity.prototype.resumeTweens=function(){for(var a=0;a<this.tweens.length;a++)this.tweens[a].resume()};ig.Entity.prototype.stopTweens=function(a){for(var b=0;b<this.tweens.length;b++)this.tweens[b].stop(a)};ig.Tween=function(a,b,c,d){var e={},f={},h={},g=0,j=!1,k=!1,n=!1;this.duration=c;this.paused=
this.complete=!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,d);this.loopNum=this.loopCount;this.chain=function(a){n=a};this.initEnd=function(a,b,c){if("object"!==typeof b[a])c[a]=b[a];else for(subprop in b[a])c[a]||(c[a]={}),this.initEnd(subprop,b[a],c[a])};this.initStart=function(a,b,c,d){if("object"!==typeof c[a])"undefined"!==typeof b[a]&&(d[a]=c[a]);else for(subprop in c[a])d[a]||(d[a]={}),"undefined"!==typeof b[a]&&this.initStart(subprop,
b[a],c[a],d[a])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;g=0;-1==a.tweens.indexOf(this)&&a.tweens.push(this);k=!0;j=new ig.Timer;for(var c in b)this.initEnd(c,b,f);for(c in f)this.initStart(c,f,a,e),this.initDelta(c,h,a,f)};this.initDelta=function(a,b,c,d){if("object"!==typeof d[a])b[a]=d[a]-c[a];else for(subprop in d[a])b[a]||(b[a]={}),this.initDelta(subprop,b[a],c[a],d[a])};this.propUpdate=function(a,b,c,d,e){if("object"!==typeof c[a])b[a]="undefined"!=typeof c[a]?
c[a]+d[a]*e:b[a];else for(subprop in c[a])this.propUpdate(subprop,b[a],c[a],d[a],e)};this.propSet=function(a,b,c){if("object"!==typeof b[a])c[a]=b[a];else for(subprop in b[a])c[a]||(c[a]={}),this.propSet(subprop,b[a],c[a])};this.update=function(){if(!k)return!1;if(this.delay){if(j.delta()<this.delay)return;this.delay=0;j.reset()}if(this.paused||this.complete)return!1;var b=(j.delta()+g)/this.duration,b=1<b?1:b,c=this.easing(b);for(property in h)this.propUpdate(property,a,e,h,c);if(1<=b){if(0==this.loopNum||
!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();n&&n.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in e)this.propSet(property,e,a);g=0;j.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){b={};c={};ig.merge(b,f);ig.merge(c,e);ig.merge(e,b);ig.merge(f,c);for(property in f)this.initDelta(property,h,a,f);g=0;j.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;g+=j.delta()};this.resume=function(){this.paused=
!1;j.reset()};this.stop=function(a){a&&(this.loop=this.complete=this.paused=!1,g+=c,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(a){return a};ig.Tween.Easing.Quadratic.EaseIn=function(a){return a*a};ig.Tween.Easing.Quadratic.EaseOut=function(a){return-a*(a-2)};ig.Tween.Easing.Quadratic.EaseInOut=
function(a){return 1>(a*=2)?0.5*a*a:-0.5*(--a*(a-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(a){return a*a*a};ig.Tween.Easing.Cubic.EaseOut=function(a){return--a*a*a+1};ig.Tween.Easing.Cubic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a:0.5*((a-=2)*a*a+2)};ig.Tween.Easing.Quartic.EaseIn=function(a){return a*a*a*a};ig.Tween.Easing.Quartic.EaseOut=function(a){return-(--a*a*a*a-1)};ig.Tween.Easing.Quartic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a*a:-0.5*((a-=2)*a*a*a-2)};ig.Tween.Easing.Quintic.EaseIn=
function(a){return a*a*a*a*a};ig.Tween.Easing.Quintic.EaseOut=function(a){return(a-=1)*a*a*a*a+1};ig.Tween.Easing.Quintic.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*a*a*a:0.5*((a-=2)*a*a*a*a+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(a){return-Math.cos(a*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(a){return Math.sin(a*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};ig.Tween.Easing.Exponential.EaseIn=function(a){return 0==a?0:Math.pow(2,
10*(a-1))};ig.Tween.Easing.Exponential.EaseOut=function(a){return 1==a?1:-Math.pow(2,-10*a)+1};ig.Tween.Easing.Exponential.EaseInOut=function(a){return 0==a?0:1==a?1:1>(a*=2)?0.5*Math.pow(2,10*(a-1)):0.5*(-Math.pow(2,-10*(a-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(a){return-(Math.sqrt(1-a*a)-1)};ig.Tween.Easing.Circular.EaseOut=function(a){return Math.sqrt(1- --a*a)};ig.Tween.Easing.Circular.EaseInOut=function(a){return 1>(a/=0.5)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)};ig.Tween.Easing.Elastic.EaseIn=
function(a){var b,c=0.1,d=0.4;if(0==a)return 0;if(1==a)return 1;d||(d=0.3);!c||1>c?(c=1,b=d/4):b=d/(2*Math.PI)*Math.asin(1/c);return-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d))};ig.Tween.Easing.Elastic.EaseOut=function(a){var b,c=0.1,d=0.4;if(0==a)return 0;if(1==a)return 1;d||(d=0.3);!c||1>c?(c=1,b=d/4):b=d/(2*Math.PI)*Math.asin(1/c);return c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/d)+1};ig.Tween.Easing.Elastic.EaseInOut=function(a){var b,c=0.1,d=0.4;if(0==a)return 0;if(1==a)return 1;
d||(d=0.3);!c||1>c?(c=1,b=d/4):b=d/(2*Math.PI)*Math.asin(1/c);return 1>(a*=2)?-0.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d):0.5*c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)+1};ig.Tween.Easing.Back.EaseIn=function(a){return a*a*(2.70158*a-1.70158)};ig.Tween.Easing.Back.EaseOut=function(a){return(a-=1)*a*(2.70158*a+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(a){return 1>(a*=2)?0.5*a*a*(3.5949095*a-2.5949095):0.5*((a-=2)*a*(3.5949095*a+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=
function(a){return 1-ig.Tween.Easing.Bounce.EaseOut(1-a)};ig.Tween.Easing.Bounce.EaseOut=function(a){return(a/=1)<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(a){return 0.5>a?0.5*ig.Tween.Easing.Bounce.EaseIn(2*a):0.5*ig.Tween.Easing.Bounce.EaseOut(2*a-1)+0.5}});ig.baked=!0;
ig.module("plugins.helper.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({loadingBG:new ig.Image("media/graphics/loading-BG.jpg"),loadingBar:new ig.Image("media/graphics/loading-bar.png"),font48:new ig.Font("media/font48-black.png"),GAMELEVELSKEY:"PHINEASANDFERBKEY",GAMESOUNDSKEY:"PHINEASANDFERBSOUNDKEY",init:function(a,b){this.parent(a,b);if(this.supports_local_storage&&window.localStorage.getItem(this.GAMESOUNDSKEY)){var c=window.localStorage.getItem(this.GAMESOUNDSKEY);
ig.soundHandler.adjustSound(c.soundVolume);ig.soundHandler.adjustMusic(c.musicVolume)}},end:function(){this.parent()},supports_local_storage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;ig.system.context.clearRect(0,0,ig.system.canvas.width,ig.system.canvas.height);this.loadingBG.draw(0,0);var a=~~(100*this._drawStatus),
b=~~((this._drawStatus-0.05)*ig.system.width*ig.system.scale);823<b&&(b=823);this.font48.draw(a,480,305,ig.Font.ALIGN.LEFT);0<b&&ig.system.context.drawImage(this.loadingBar.data,0,0,823,17,100,375,b,17)}})});ig.baked=!0;
ig.module("plugins.components.control").requires("impact.entity").defines(function(){EntityControl=ig.Entity.extend({size:{x:48,y:48},zIndex:10,inView:!0,ignorePause:!0,redraw:!1,guiImage:new ig.Image(_SPRITES.guiSprites.path),endImage:new ig.Image(_SPRITES.endSprites.path),init:function(a,b,c){this.parent(a,b,c)},ready:function(){},update:function(){this.parent();this.redraw&&(this.redrawBgCanvas(),this.redraw=!1)},redrawBg:function(a){if(a){if(0>a.length)return!1;for(var b=0;b<a.length;b++)a[b].drawWithContext(ig.system.bgcontext);
return!0}return!1},pauseTimer:function(){},unpauseTimer:function(){},flagToRedraw:function(){this.redraw=!0},redrawBgCanvas:function(){}})});ig.baked=!0;
ig.module("plugins.components.in-game").requires("impact.entity").defines(function(){EntityInGame=ig.Entity.extend({size:{x:48,y:48},additionalOffset:{widthRight:0,widthLeft:-260,heightAbove:-140,heightBelow:200},zIndex:1,ignoreInView:!1,ignorePause:!1,inView:!0,name:"in game",gameImage:new ig.Image(_SPRITES.gameSprites.path),guiImage:new ig.Image(_SPRITES.guiSprites.path),endImage:new ig.Image(_SPRITES.endSprites.path),init:function(a,b,c){this.parent(a,b,c)},setSize:function(a,b){this.size.x=a;
this.size.y=b},update:function(){this.parent();this.ignoreInView||(this.inView=this.pos.x<this.additionalOffset.widthLeft+ig.game.screen.x||this.pos.x>ig.system.width+ig.game.screen.x||this.pos.y<this.additionalOffset.heightAbove+ig.game.screen.y||this.pos.y>ig.system.height+this.additionalOffset.heightBelow+ig.game.screen.y?!1:!0)},checkOverlapWithPointer:function(){var a=ig.input.mouse.x,b=ig.input.mouse.y;return a>this.pos.x+this.size.x||a<this.pos.x||b>this.pos.y+this.size.y||b<this.pos.y?!1:
!0},supports_local_storage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},pauseTimer:function(){},unpauseTimer:function(){},writeText:function(a,b,c){a=a.split("\n");for(var d=0;d<a.length;d++)ig.system.context.fillText(a[d],b,c+40*d)}})});ig.baked=!0;
ig.module("plugins.components.button").requires("plugins.components.in-game").defines(function(){EntityButton=EntityInGame.extend({oriSize:{x:86,y:41},zIndex:2100,ignoreInView:!0,hoverable:!1,hover:!1,clickState:[!1,!1,!1,!1],clickStates:{click:0,hover:1,hold:2,release:3},clickScale:0.9,clickTimer:null,redirectable:!0,ignorePause:!0,hide:!1,clickable:!0,sizeFont:20,oriFontSize:20,state:0,clickAnchor:{x:0,y:0},anchorType:1,anchorTypes:{center:1,topLeft:2},init:function(a,b,c){this.parent(a,b,c)},setOriSize:function(a,
b){this.oriSize.x=a;this.oriSize.y=b},update:function(){this.parent();if(!this.hide&&!ig.game.paused&&this.clickable){if((this.oriSize.x==this.size.x||this.size.y==this.oriSize.y)&&ig.input.pressed("click")&&this.checkOverlapWithPointer())this.onAClick();if(this.hoverable&&this.checkHover())this.onAHover();if(this.clickTimer&&0.1<this.clickTimer.delta())this.onRelease()}else this.checkClickOnPause()},checkHover:function(){return this.checkOverlapWithPointer()?this.clickState[this.clickStates.hover]=
!0:this.clickState[this.clickStates.hover]=!1},onAClick:function(){this.clickState[this.clickStates.click]=!0;this.clickState[this.clickStates.release]=!1;this.oriSize.x=this.size.x+0;this.oriSize.y=this.size.y+0;this.size.x*=this.clickScale;this.size.y*=this.clickScale;if(this.anchorType==this.anchorTypes.center){var a=(this.oriSize.y-this.size.y)/2;this.clickAnchor.x=(this.oriSize.x-this.size.x)/2;this.clickAnchor.y=a;this.pos.x+=this.clickAnchor.x;this.pos.y+=this.clickAnchor.y}this.sizeFont*=
this.clickScale;null==this.clickTimer&&(this.clickTimer=new ig.Timer);ig.soundHandler.playSound(ig.soundHandler.SOUNDID.thwop)},onAHover:function(){},onRelease:function(){this.size.x=this.oriSize.x;this.size.y=this.oriSize.y;this.sizeFont=this.oriFontSize;this.anchorType==this.anchorTypes.center&&(this.pos.x-=this.clickAnchor.x,this.pos.y-=this.clickAnchor.y,this.clickAnchor.x=0,this.clickAnchor.y=0);this.clickState[this.clickStates.click]=!1;this.clickState[this.clickStates.release]=!0;this.clickTimer&&
(this.clickTimer=null,this.redirectable&&this.redirect())},onHold:function(){this.debug&&console.log("hold "+this.name)},readjustScale:function(a,b){this.newScale.x=a;this.newScale.y=b;this.size.x=this.oriSize.x*this.newScale.x;this.size.y=this.oriSize.y*this.newScale.y},redirect:function(){this.clickTimer=null},checkClickOnPause:function(){if(ig.game.paused&&this.clickable)if(ig.input.pressed("click")){if(this.checkOverlapWithPointer())this.onAClick()}else if(ig.input.released("click"))this.onRelease()},
disableButton:function(){this.clickable=!1;this.size.x=this.oriSize.x;this.size.y=this.oriSize.y;this.sizeFont=this.oriFontSize;this.anchorType==this.anchorTypes.center&&(this.pos.x-=this.clickAnchor.x,this.pos.y-=this.clickAnchor.y,this.clickAnchor.x=0,this.clickAnchor.y=0);this.clickState[this.clickStates.click]=!1;this.clickState[this.clickStates.release]=!0},enableButton:function(){this.clickable=!0}})});ig.baked=!0;
ig.module("game.buttons.level-button").requires("plugins.components.button").defines(function(){EntityLevelButton=EntityButton.extend({size:{x:143,y:149},unlockedSize:{x:143,y:149},lockedSize:{x:143,y:152},ignorePause:!0,name:"levelButton",levelNumber:1,lockedLevel:!0,zIndex:1E3,clickable:!0,ignoreInView:!0,inView:!0,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.levelNumber&&(this.levelNumber=c.levelNumber)},draw:function(){this.parent();this.clickable&&(this.lockedLevel?
ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[9].sx,_SPRITES.guiSprites.graphics[9].sy,_SPRITES.guiSprites.graphics[9].sw,_SPRITES.guiSprites.graphics[9].sh,this.pos.x,this.pos.y,this.size.x,this.size.y):ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[4].sx,_SPRITES.guiSprites.graphics[4].sy,_SPRITES.guiSprites.graphics[4].sw,_SPRITES.guiSprites.graphics[4].sh,this.pos.x,this.pos.y,this.size.x,this.size.y),0===this.levelNumber?ig.game.font24.draw("Tutorial",
this.pos.x+10,this.pos.y+55,ig.Font.ALIGN.LEFT):10>this.levelNumber?ig.game.font48.draw(this.levelNumber,this.pos.x+50,this.pos.y+40,ig.Font.ALIGN.LEFT):ig.game.font48.draw(this.levelNumber,this.pos.x+40,this.pos.y+40,ig.Font.ALIGN.LEFT))},redirect:function(){}})});ig.baked=!0;
ig.module("game.controllers.level-controller").requires("plugins.components.control","game.buttons.level-button").defines(function(){EntityLevelController=EntityControl.extend({size:{x:48,y:48},name:"levelcontrol",bg:new ig.Image("media/graphics/lvlselectbg.jpg"),ignoreInView:!0,inView:!0,roof:null,levelButtons:[],offsetPosX:170,offsetPosY:160,zIndex:101,init:function(a,b,c){this.parent(a,b,c);if(ig.game.supports_local_storage())if(ig.game.storage.isSet(ig.game.GAMELEVELSKEY))var d=ig.game.storage.get(ig.game.GAMELEVELSKEY);
else ig.game.storage.set(ig.game.GAMELEVELSKEY,{Level0:!0,Level1:!0}),d=ig.game.storage.get(ig.game.GAMELEVELSKEY);for(a=0;a<_LEVELS.length;a++)this.levelButtons.push(ig.game.spawnEntity(EntityLevelButton,1224,0,{levelNumber:a})),0===a?(b="Level"+a,d&&d[b]&&(this.levelButtons[a].lockedLevel=!1),this.levelButtons[a].redirect=function(a){a.lockedLevel||(ig.game.currentLevel=a.levelNumber,ig.game.director.jumpTo(LevelTutorial))}.bind(this,this.levelButtons[a])):(b="Level"+a,d&&d[b]&&(this.levelButtons[a].lockedLevel=
!1),this.levelButtons[a].redirect=function(a){a.lockedLevel||(ig.game.currentLevel=a.levelNumber,ig.game.clearEnemiesArray(),ig.game.director.jumpTo(LevelGame))}.bind(this,this.levelButtons[a])),this.levelButtons[a].enableButton();ig.game.sortEntitiesDeferred()},update:function(){this.parent();if(this.pos.x!==this.last.x)for(var a=0,b=0;b<this.levelButtons.length;b++)5<a&&(a=0),this.levelButtons[b]&&(this.levelButtons[b].pos.x=this.pos.x+20+this.offsetPosX*a,this.levelButtons[b].pos.y=this.pos.y+
80+this.offsetPosY*~~(b/6)),a++},draw:function(){this.parent();ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[24].sx,_SPRITES.guiSprites.graphics[24].sy,_SPRITES.guiSprites.graphics[24].sw,_SPRITES.guiSprites.graphics[24].sh,this.pos.x+380,this.pos.y+18,_SPRITES.guiSprites.graphics[24].sw,_SPRITES.guiSprites.graphics[24].sh)},drawWithContext:function(a){a.drawImage(this.bg.data,0,0,this.bg.data.width,this.bg.data.height,this.pos.x,this.pos.y,ig.system.bgcanvas.width,ig.system.bgcanvas.height)}})});
ig.baked=!0;
ig.module("game.buttons.start-button").requires("plugins.components.button").defines(function(){EntityStartButton=EntityButton.extend({size:{x:198,y:88},ignorePause:!0,name:"startbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[16].sx,_SPRITES.guiSprites.graphics[16].sy,_SPRITES.guiSprites.graphics[16].sw,_SPRITES.guiSprites.graphics[16].sh,this.pos.x,
this.pos.y,this.size.x,this.size.y)},redirect:function(){ig.game.director.jumpTo(LevelTutorial)}})});ig.baked=!0;
ig.module("game.buttons.slider-button").requires("plugins.components.button").defines(function(){EntitySliderButton=EntityButton.extend({size:{x:69,y:69},ignorePause:!0,zIndex:2500,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&(this.size={x:_SPRITES.guiSprites.graphics[36].sw,y:_SPRITES.guiSprites.graphics[36].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[36].sx,
_SPRITES.guiSprites.graphics[36].sy,_SPRITES.guiSprites.graphics[36].sw,_SPRITES.guiSprites.graphics[36].sh,this.pos.x,this.pos.y,this.size.x,this.size.y))}})});ig.baked=!0;
ig.module("game.buttons.restart-button").requires("plugins.components.button").defines(function(){EntityRestartButton=EntityButton.extend({size:{x:69,y:69},ignorePause:!0,inView:!0,zIndex:5100,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&(this.size={x:_SPRITES.guiSprites.graphics[31].sw,y:_SPRITES.guiSprites.graphics[31].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[31].sx,
_SPRITES.guiSprites.graphics[31].sy,_SPRITES.guiSprites.graphics[31].sw,_SPRITES.guiSprites.graphics[31].sh,this.pos.x,this.pos.y,this.size.x,this.size.y))}})});ig.baked=!0;
ig.module("game.buttons.resume-button").requires("plugins.components.button").defines(function(){EntityResumeButton=EntityButton.extend({size:{x:69,y:69},ignorePause:!0,inView:!0,zIndex:5100,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);ig.game.sortEntitiesDeferred()},draw:function(){this.parent();this.clickable&&(this.size={x:_SPRITES.guiSprites.graphics[32].sw,y:_SPRITES.guiSprites.graphics[32].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,
_SPRITES.guiSprites.graphics[32].sx,_SPRITES.guiSprites.graphics[32].sy,_SPRITES.guiSprites.graphics[32].sw,_SPRITES.guiSprites.graphics[32].sh,this.pos.x,this.pos.y,this.size.x,this.size.y))}})});ig.baked=!0;
ig.module("game.buttons.back-button").requires("plugins.components.button").defines(function(){EntityBackButton=EntityButton.extend({size:{x:69,y:69},ignorePause:!0,inView:!0,zIndex:5100,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},redirect:function(){ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);ig.game.paused=!1;ig.game.clearEnemiesArray();ig.game.director.jumpTo(LevelMainMenu)},draw:function(){this.parent();this.clickable&&(this.size={x:_SPRITES.guiSprites.graphics[31].sw,
y:_SPRITES.guiSprites.graphics[31].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[40].sx,_SPRITES.guiSprites.graphics[40].sy,_SPRITES.guiSprites.graphics[40].sw,_SPRITES.guiSprites.graphics[40].sh,this.pos.x,this.pos.y,this.size.x,this.size.y))}})});ig.baked=!0;
ig.module("game.controllers.settings-controller").requires("plugins.components.control","game.buttons.slider-button","game.buttons.restart-button","game.buttons.resume-button","game.buttons.back-button").defines(function(){EntitySettingsController=EntityControl.extend({size:{x:485,y:496},ignorePause:!0,musicIconSliderButton:null,soundIconSliderButton:null,callbackButton:null,restartButton:null,resumeButton:null,backButton:null,zIndex:2300,maxSliderDistance:270,buttonDragFlags:{sound:!1,music:!1},
tweenTime:0.2,init:function(a,b,c){this.parent(a,b,c);c.callbackButton&&(this.musicIconSliderButton=ig.game.spawnEntity(EntitySliderButton,a,b+110),this.soundIconSliderButton=ig.game.spawnEntity(EntitySliderButton,a,b+240),"optionsButton"===c.callbackButton.name?(this.resumeButton=ig.game.spawnEntity(EntityResumeButton,a+100,b+320),this.resumeButton.redirect=function(){this.tweenOut()}.bind(this)):(this.backButton=ig.game.spawnEntity(EntityBackButton,a+50,b+420),this.restartButton=ig.game.spawnEntity(EntityRestartButton,
a+250,b+420),this.restartButton.redirect=function(){ig.game.paused=!1;ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);ig.game.clearEnemiesArray();0===ig.game.currentLevel?ig.game.director.jumpTo(LevelTutorial):ig.game.director.jumpTo(LevelGame)}.bind(this),this.resumeButton=ig.game.spawnEntity(EntityResumeButton,a+100,b+320),this.resumeButton.redirect=function(){ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);this.tweenOut()}.bind(this)),this.callbackButton=c.callbackButton,
this.tweenIn())},update:function(){this.parent();this.checkPressed();this.checkState();this.checkReleased()},checkPressed:function(){ig.input.pressed("click")&&(this.musicIconSliderButton.checkOverlapWithPointer()&&(this.buttonDragFlags.music=!0),this.soundIconSliderButton.checkOverlapWithPointer()&&(this.buttonDragFlags.sound=!0))},checkState:function(){if(ig.input.state("click")){if(this.buttonDragFlags.music){var a=ig.input.mouse,b=a.x-(this.musicIconSliderButton.pos.x+this.musicIconSliderButton.size.x/
2),c=370+this.maxSliderDistance,a=370;this.musicIconSliderButton.pos.x+=b;this.musicIconSliderButton.pos.x>c?(this.musicIconSliderButton.pos.x=c,ig.soundHandler.adjustMusic(1)):this.musicIconSliderButton.pos.x<a?(this.musicIconSliderButton.pos.x=a,ig.soundHandler.adjustMusic(0)):(b=(this.musicIconSliderButton.pos.x-a)/(c-a),ig.soundHandler.adjustMusic(b),this.musicIconSliderButton.pos.x=~~(a+b*this.maxSliderDistance))}this.buttonDragFlags.sound&&(a=ig.input.mouse,b=a.x-(this.soundIconSliderButton.pos.x+
this.soundIconSliderButton.size.x/2),c=370+this.maxSliderDistance,a=370,this.soundIconSliderButton.pos.x+=b,this.soundIconSliderButton.pos.x>c?(this.soundIconSliderButton.pos.x=c,ig.soundHandler.adjustSound(1)):this.soundIconSliderButton.pos.x<a?(this.soundIconSliderButton.pos.x=a,ig.soundHandler.adjustSound(0)):(b=(this.soundIconSliderButton.pos.x-a)/(c-a),ig.soundHandler.adjustSound(b),this.soundIconSliderButton.pos.x=~~(a+b*this.maxSliderDistance)))}},checkReleased:function(){ig.input.released("click")&&
(this.buttonDragFlags.music&&(this.buttonDragFlags.music=!1),this.buttonDragFlags.sound&&(this.buttonDragFlags.sound=!1,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.thwop)),ig.game.supports_local_storage()&&(ig.game.storage.isSet(ig.game.GAMESOUNDSKEY),ig.game.storage.set(ig.game.GAMESOUNDSKEY,{soundVolume:ig.soundHandler.soundSliderRatio,musicVolume:ig.soundHandler.musicSliderRatio})))},moveButton:function(a,b){var c=a.x+b;a.x=c<a.minX?a.minX:c>a.maxX?a.maxX:a.x+b},draw:function(){this.parent();
0<=this.pos.x&&this.pos.x<=ig.system.canvas.width&&(ig.system.context.fillStyle="rgba(0,0,0,0.5)",ig.system.context.fillRect(0,0,ig.system.canvas.width,ig.system.canvas.height));ig.system.context.drawImage(this.endImage.data,_SPRITES.endSprites.graphics[3].sx,_SPRITES.endSprites.graphics[3].sy,_SPRITES.endSprites.graphics[3].sw,_SPRITES.endSprites.graphics[3].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[34].sx,_SPRITES.guiSprites.graphics[34].sy,
_SPRITES.guiSprites.graphics[34].sw,_SPRITES.guiSprites.graphics[34].sh,this.pos.x+50,this.pos.y+110,_SPRITES.guiSprites.graphics[34].sw,_SPRITES.guiSprites.graphics[34].sh);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[35].sx,_SPRITES.guiSprites.graphics[35].sy,_SPRITES.guiSprites.graphics[35].sw,_SPRITES.guiSprites.graphics[35].sh,this.pos.x+110,this.pos.y+130,_SPRITES.guiSprites.graphics[35].sw,_SPRITES.guiSprites.graphics[35].sh);ig.system.context.drawImage(this.guiImage.data,
_SPRITES.guiSprites.graphics[33].sx,_SPRITES.guiSprites.graphics[33].sy,_SPRITES.guiSprites.graphics[33].sw,_SPRITES.guiSprites.graphics[33].sh,this.pos.x+50,this.pos.y+240,_SPRITES.guiSprites.graphics[33].sw,_SPRITES.guiSprites.graphics[33].sh);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[35].sx,_SPRITES.guiSprites.graphics[35].sy,_SPRITES.guiSprites.graphics[35].sw,_SPRITES.guiSprites.graphics[35].sh,this.pos.x+110,this.pos.y+260,_SPRITES.guiSprites.graphics[35].sw,
_SPRITES.guiSprites.graphics[35].sh);ig.game.font32.draw("Settings",this.pos.x+165,this.pos.y+35,ig.Font.ALIGN.LEFT)},tweenIn:function(){this.tween({pos:{x:270}},this.tweenTime,{onComplete:function(){ig.game.tutorialPause||(ig.game.paused=!0,ig.game.forcePause=!0)}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.backButton&&this.backButton.tween({pos:{x:320}},this.tweenTime,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.restartButton&&
this.restartButton.tween({pos:{x:550}},this.tweenTime,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.resumeButton&&this.resumeButton.tween({pos:{x:420}},this.tweenTime,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.musicIconSliderButton&&this.musicIconSliderButton.tween({pos:{x:370+ig.soundHandler.musicSliderRatio*this.maxSliderDistance}},this.tweenTime,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();
this.soundIconSliderButton&&this.soundIconSliderButton.tween({pos:{x:370+ig.soundHandler.soundSliderRatio*this.maxSliderDistance}},this.tweenTime,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start()},tweenOut:function(){this.tween({pos:{x:1280}},this.tweenTime,{onComplete:function(){this.callbackButton.control&&(this.callbackButton.control.phineasBar&&this.callbackButton.control.phineasBar.unpauseTimer(!0),this.callbackButton.control.ferbBar&&this.callbackButton.control.ferbBar.unpauseTimer(!0),
this.callbackButton.control.startButton&&this.callbackButton.control.startButton.enableButton());ig.game.tutorialPause||(ig.game.forcePause=!1,ig.game.paused=!1);this.callbackButton.settingsControl=null;this.kill()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.backButton&&this.backButton.tween({pos:{x:1330}},this.tweenTime,{onComplete:function(){this.backButton.kill()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.restartButton&&this.restartButton.tween({pos:{x:1330}},
this.tweenTime,{onComplete:function(){this.restartButton.kill()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.resumeButton&&this.resumeButton.tween({pos:{x:1530}},this.tweenTime,{onComplete:function(){this.resumeButton.kill()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.musicIconSliderButton&&this.musicIconSliderButton.tween({pos:{x:1380+ig.soundHandler.musicSliderRatio*this.maxSliderDistance}},this.tweenTime,{onComplete:function(){this.musicIconSliderButton.kill()}.bind(this),
easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.soundIconSliderButton&&this.soundIconSliderButton.tween({pos:{x:1380+ig.soundHandler.soundSliderRatio*this.maxSliderDistance}},this.tweenTime,{onComplete:function(){this.soundIconSliderButton.kill()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start()}})});ig.baked=!0;
ig.module("game.buttons.options-button").requires("plugins.components.button","game.controllers.settings-controller").defines(function(){EntityOptionsButton=EntityButton.extend({size:{x:195,y:56},ignorePause:!0,name:"optionsButton",settingsControl:null,control:null,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.control&&(this.control=c.control)},draw:function(){this.parent();this.clickable&&ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[12].sx,
_SPRITES.guiSprites.graphics[12].sy,_SPRITES.guiSprites.graphics[12].sw,_SPRITES.guiSprites.graphics[12].sh,this.pos.x,this.pos.y,this.size.x,this.size.y)},redirect:function(){null==this.settingsControl?(this.control.startButton.disableButton(),this.settingsControl=ig.game.spawnEntity(EntitySettingsController,-500,136,{callbackButton:this})):this.settingsControl.tweenOut()}})});ig.baked=!0;
ig.module("game.controllers.main-menu-control").requires("plugins.components.control","game.controllers.level-controller","game.buttons.start-button","game.buttons.options-button").defines(function(){EntityMainMenuControl=EntityControl.extend({size:{x:48,y:48},flagToRedraw:!1,bg:new ig.Image("media/graphics/mainbg.jpg"),startButton:null,levelControl:null,zIndex:100,basePos:{x:365,y:490},bouncingBaseTimer:null,currentOffsetY:2,ignoreInView:!0,inView:!0,logoSizeOffset:{x1:0,x2:0,x3:0,y1:0,y2:0,y3:0},
scaleUpLogo:!0,init:function(a,b,c){this.parent(a,b,c);ig.global.wm||(this.bouncingBaseTimer=new ig.Timer,ig.system.bgcontext.clearRect(0,0,ig.system.bgcanvas.width,ig.system.bgcanvas.height),ig.system.bgcontext.drawImage(this.bg.data,0,0,this.bg.data.width,this.bg.data.height,this.pos.x,this.pos.y,ig.system.bgcanvas.width,ig.system.bgcanvas.height))},ready:function(){this.levelControl=ig.game.getEntityByName("levelcontrol");this.startButton=ig.game.spawnEntity(EntityStartButton,410,560);this.optionsButton=
ig.game.spawnEntity(EntityOptionsButton,410,670,{control:this});this.startButton.redirect=function(){ig.game.paused||(this.tweenInLevelControl(),this.startButton.tween({pos:{x:-300}},0.5,{onComplete:function(){this.startButton.disableButton()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start(),this.optionsButton.tween({pos:{x:-300}},0.5,{onComplete:function(){this.optionsButton.disableButton()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start(),this.startButton.disableButton(),
this.optionsButton.disableButton())}.bind(this)},update:function(){this.parent();this.levelControl.pos.x!=this.levelControl.last.x&&(this.flagToRedraw=!0);this.flagToRedraw&&(this.redrawBg([this,this.levelControl]),this.flagToRedraw=!1);this.scaleUpLogo?(this.logoSizeOffset.x1+=1,10<this.logoSizeOffset.x1&&(this.logoSizeOffset.x1=10),this.logoSizeOffset.x2+=2,this.logoSizeOffset.x3+=1,this.logoSizeOffset.y1+=1,10<this.logoSizeOffset.y1&&(this.logoSizeOffset.y1=10),this.logoSizeOffset.y2+=2,this.logoSizeOffset.y3+=
1):(this.logoSizeOffset.x1-=1,-10>this.logoSizeOffset.x1&&(this.logoSizeOffset.x1=-10),this.logoSizeOffset.x2-=2,this.logoSizeOffset.x3-=1,this.logoSizeOffset.y1-=1,-10>this.logoSizeOffset.y1&&(this.logoSizeOffset.y1=-10),this.logoSizeOffset.y2-=2,this.logoSizeOffset.y3-=1);this.bouncingBaseTimer&&0.05<this.bouncingBaseTimer.delta()&&(500<this.basePos.y?(this.currentOffsetY=-1,this.scaleUpLogo=!0):492>this.basePos.y&&(this.currentOffsetY=1,this.scaleUpLogo=!1),this.basePos.y+=this.currentOffsetY,
this.bouncingBaseTimer.reset())},draw:function(){this.parent();ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[13].sx,_SPRITES.guiSprites.graphics[13].sy,_SPRITES.guiSprites.graphics[13].sw,_SPRITES.guiSprites.graphics[13].sh,this.pos.x+38-this.logoSizeOffset.x1/2,this.pos.y+18-this.logoSizeOffset.y1/2,_SPRITES.guiSprites.graphics[13].sw+this.logoSizeOffset.x1,_SPRITES.guiSprites.graphics[13].sh+this.logoSizeOffset.y1);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[0].sx,
_SPRITES.guiSprites.graphics[0].sy,_SPRITES.guiSprites.graphics[0].sw,_SPRITES.guiSprites.graphics[0].sh,this.pos.x+180-this.logoSizeOffset.x2/2,this.pos.y-40-this.logoSizeOffset.y2/2,_SPRITES.guiSprites.graphics[0].sw+this.logoSizeOffset.x2,_SPRITES.guiSprites.graphics[0].sh+this.logoSizeOffset.y2);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[2].sx,_SPRITES.guiSprites.graphics[2].sy,_SPRITES.guiSprites.graphics[2].sw,_SPRITES.guiSprites.graphics[2].sh,this.pos.x+244-
this.logoSizeOffset.x3/2,this.pos.y+100-this.logoSizeOffset.y3/2,_SPRITES.guiSprites.graphics[2].sw+this.logoSizeOffset.x3,_SPRITES.guiSprites.graphics[2].sh+this.logoSizeOffset.y3);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[1].sx,_SPRITES.guiSprites.graphics[1].sy,_SPRITES.guiSprites.graphics[1].sw,_SPRITES.guiSprites.graphics[1].sh,this.pos.x+this.basePos.x,this.basePos.y,_SPRITES.guiSprites.graphics[1].sw,_SPRITES.guiSprites.graphics[1].sh)},tweenInLevelControl:function(){this.tween({pos:{x:-1024}},
0.5,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start();this.levelControl.tween({pos:{x:0}},0.5,{onComplete:function(){}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start()},drawWithContext:function(a){a.drawImage(this.bg.data,0,0,this.bg.data.width,this.bg.data.height,this.pos.x,this.pos.y,ig.system.bgcanvas.width,ig.system.bgcanvas.height)}})});ig.baked=!0;
ig.module("game.levels.main-menu").requires("impact.image","game.controllers.main-menu-control","game.controllers.level-controller").defines(function(){LevelMainMenu={entities:[{type:"EntityMainMenuControl",x:0,y:0},{type:"EntityLevelController",x:1024,y:0}],layer:[]}});ig.baked=!0;ig.module("game.levels.select").requires("impact.image").defines(function(){LevelSelect={entities:[],layer:[]}});ig.baked=!0;
ig.module("game.buttons.turret-button").requires("plugins.components.button").defines(function(){EntityTurretButton=EntityButton.extend({size:{x:124,y:136},ignorePause:!0,placement:null,cost:10,turretType:0,init:function(a,b,c){this.parent(a,b,c);c.placement&&(this.placement=c.placement);c.turretType&&(this.turretType=c.turretType);c.cost&&(this.cost=c.cost);this.setOriSize(this.size.x,this.size.y);this.placement&&(this.setSize(1.1*this.size.x,1.1*this.size.y),this.setOriSize(this.size.x,this.size.y))},
draw:function(){this.parent();if(this.clickable&&this.turretType)switch(this.turretType){case "EntityZapTurret":this.size={x:_SPRITES.guiSprites.graphics[30].sw,y:_SPRITES.guiSprites.graphics[30].sh};this.setOriSize(this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[30].sx,_SPRITES.guiSprites.graphics[30].sy,_SPRITES.guiSprites.graphics[30].sw,_SPRITES.guiSprites.graphics[30].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,
this.pos.x+10,this.pos.y+2,ig.Font.ALIGN.LEFT);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+6,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh);break;case "EntityLightningTurret":this.size={x:_SPRITES.guiSprites.graphics[30].sw,y:_SPRITES.guiSprites.graphics[30].sh};this.setOriSize(this.size.x,this.size.y);
ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[30].sx,_SPRITES.guiSprites.graphics[30].sy,_SPRITES.guiSprites.graphics[30].sw,_SPRITES.guiSprites.graphics[30].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+2,ig.Font.ALIGN.LEFT);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,
this.pos.x+38,this.pos.y+6,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh);break;case "EntityPillowCannon":this.size={x:_SPRITES.guiSprites.graphics[14].sw,y:_SPRITES.guiSprites.graphics[14].sh};this.setOriSize(this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[14].sx,_SPRITES.guiSprites.graphics[14].sy,_SPRITES.guiSprites.graphics[14].sw,_SPRITES.guiSprites.graphics[14].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,
this.pos.x+10,this.pos.y+52,ig.Font.ALIGN.LEFT);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+56,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh);break;case "EntityFridgeORator":this.size={x:_SPRITES.guiSprites.graphics[3].sw,y:_SPRITES.guiSprites.graphics[3].sh};this.setOriSize(this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,
_SPRITES.guiSprites.graphics[3].sx,_SPRITES.guiSprites.graphics[3].sy,_SPRITES.guiSprites.graphics[3].sw,_SPRITES.guiSprites.graphics[3].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+2,ig.Font.ALIGN.LEFT);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+6,_SPRITES.guiSprites.graphics[19].sw,
_SPRITES.guiSprites.graphics[19].sh);break;case "EntityPerrynator":this.size={x:_SPRITES.guiSprites.graphics[38].sw,y:_SPRITES.guiSprites.graphics[38].sh};this.setOriSize(this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[38].sx,_SPRITES.guiSprites.graphics[38].sy,_SPRITES.guiSprites.graphics[38].sw,_SPRITES.guiSprites.graphics[38].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+52,ig.Font.ALIGN.LEFT);
ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+56,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh);break;case "EntityBoxomator":this.size={x:_SPRITES.guiSprites.graphics[37].sw,y:_SPRITES.guiSprites.graphics[37].sh};this.setOriSize(this.size.x,this.size.y);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[37].sx,
_SPRITES.guiSprites.graphics[37].sy,_SPRITES.guiSprites.graphics[37].sw,_SPRITES.guiSprites.graphics[37].sh,this.pos.x,this.pos.y,this.size.x,this.size.y);ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+2,ig.Font.ALIGN.LEFT);ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+6,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh);
break;case "EntityMineninator":this.size={x:_SPRITES.guiSprites.graphics[39].sw,y:_SPRITES.guiSprites.graphics[39].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[39].sx,_SPRITES.guiSprites.graphics[39].sy,_SPRITES.guiSprites.graphics[39].sw,_SPRITES.guiSprites.graphics[39].sh,this.pos.x,this.pos.y,this.size.x,this.size.y),ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+52,ig.Font.ALIGN.LEFT),ig.system.context.drawImage(this.guiImage.data,
_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+56,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh)}},drawWithContext:function(a){a.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y)}})});ig.baked=!0;
ig.module("plugins.components.binary-heap").defines(function(){BinaryHeap=ig.Class.extend({list:[],scoreFunction:null,init:function(a){this.scoreFunction=a},push:function(a){this.list.push(a);this.bubbleUp(this.list.length-1)},pop:function(){var a=this.list[0],b=this.list.pop();0<this.list.length&&(this.list[0]=b,this.sinkDown(0));return a},remove:function(a){for(var b=this.list.length,c=0;c<b;c++)if(this.list[c]==a){a=this.list.pop();if(c==b-1)break;this.list[c]=a;this.bubbleUp(c);this.sinkDown(c);
break}},bubbleUp:function(a){for(var b=this.list[a],c=this.scoreFunction(b);0<a;){var d=Math.floor((a+1)/2)-1,e=this.list[d];if(c>=this.scoreFunction(e))break;this.list[d]=b;this.list[a]=e;a=d}},sinkDown:function(a){for(var b=this.list.length,c=this.list[a],d=this.scoreFunction(c);;){var e=2*(a+1),f=e-1,h=null;if(f<b){var g=this.scoreFunction(this.list[f]);g<d&&(h=f)}if(e<b&&this.scoreFunction(this.list[e])<(null==h?d:g))h=e;if(null==h)break;this.list[a]=this.list[h];this.list[h]=c;a=h}},size:function(){return this.list.length},
rescoreElement:function(a){this.sinkDown(this.list.indexOf(a))}})});ig.baked=!0;
ig.module("plugins.components.a-star").requires("plugins.components.binary-heap").defines(function(){AStar=ig.Class.extend({graph:null,start:null,end:null,init:function(a){this.graph=a},setStart:function(a,b){this.graph.grid[a]&&this.graph.grid[a][b]&&(this.start=this.graph.grid[a][b])},setGoal:function(a,b){this.graph.grid[a]&&this.graph.grid[a][b]&&(this.end=this.graph.grid[a][b])},startSearch:function(){return this.start&&this.end?this.findPath(this.graph,this.start,this.end,{closest:!0,ignoreTurret:!1}):
[]},startSearchIgnoreTurret:function(){return this.start&&this.end?this.findPath(this.graph,this.start,this.end,{closest:!0,ignoreTurret:!0}):[]},findPath:function(a,b,c,d){a.cleanDirty();d=d||{};var e=d.heuristic||this.manhattan,f=d.closest||!1,h=this.getHeap(),g=b;b.h=e(b,c);for(h.push(b);0<h.size();){b=h.pop();if(b===c)return this.pathTo(b);b.closed=!0;var j=a.neighbors(b);a.markDirty(b);for(var k=0,n=j.length;k<n;++k){var l=j[k];if(d.ignoreTurret){if(l.closed||l.isWall()||l.isSandbag()||l.isPlacement())continue}else if(l.closed||
l.isObstacle())continue;var m=b.g+l.getCost(b),p=l.visited;if(!p||m<l.g){l.visited=!0;l.parent=b;l.h=l.h||e(l,c);l.g=m;l.f=l.g+l.h;a.markDirty(l);if(f&&(l.h<g.h||l.h===g.h&&l.g<g.g))g=l;p?h.rescoreElement(l):h.push(l)}}}return f?this.pathTo(g):[]},pathTo:function(a){for(var b=[];a.parent;)b.push(a),a=a.parent;return b},getHeap:function(){return new BinaryHeap(function(a){return a.f})},manhattan:function(a,b){var c=Math.abs(b.x-a.x),d=Math.abs(b.y-a.y);return c+d},diagonal:function(a,b){var c=Math.sqrt(2),
d=Math.abs(b.x-a.x),e=Math.abs(b.y-a.y);return 1*(d+e)+(c-2)*Math.min(d,e)}})});ig.baked=!0;
ig.module("impact.entity-pool").requires("impact.game").defines(function(){ig.EntityPool={pools:{},mixin:{staticInstantiate:function(a,b,c){return ig.EntityPool.getFromPool(this.classId,a,b,c)},erase:function(){ig.EntityPool.putInPool(this)}},enableFor:function(a){a.inject(this.mixin)},getFromPool:function(a,b,c,d){a=this.pools[a];if(!a||!a.length)return null;a=a.pop();a.reset(b,c,d);return a},putInPool:function(a){this.pools[a.classId]?this.pools[a.classId].push(a):this.pools[a.classId]=[a]},drainPool:function(a){delete this.pools[a]},
drainAllPools:function(){this.pools={}}};ig.Game.inject({loadLevel:function(a){ig.EntityPool.drainAllPools();this.parent(a)}})});ig.baked=!0;
ig.module("game.entities.decals.star").requires("plugins.components.in-game","impact.entity-pool").defines(function(){EntityStar=EntityInGame.extend({size:{x:32,y:32},targetAngle:0,tweenTime:0.8,completeCallback:null,init:function(a,b,c){this.parent(a,b,c);this.targetAngle=0;this.tween({pos:{x:30,y:30},targetAngle:360},this.tweenTime,{onComplete:function(){this.completeCallback();this.kill()}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start()},update:function(){this.parent()},draw:function(){this.parent();
var a=ig.system.context;a.translate(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);var b=this.targetAngle*Math.PI/180;a.rotate(b);a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,-this.size.x/2,-this.size.y/2,this.size.x,this.size.y);a.rotate(-b);a.translate(-(this.pos.x+this.size.x/2),-(this.pos.y+this.size.y/2))},reset:function(a,b,c){this.parent(a,b,c);this.targetAngle=
0;this.tween({pos:{x:30,y:30},targetAngle:360},this.tweenTime,{onComplete:function(){this.completeCallback();this.kill()}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start()}});ig.EntityPool.enableFor(EntityStar)});ig.baked=!0;
ig.module("game.entities.decals.effect").requires("plugins.components.in-game","impact.entity-pool").defines(function(){EntityEffect=EntityInGame.extend({size:{x:108,y:39},maxVel:{x:4E3,y:4E3},zIndex:1600,name:"effects",init:function(a,b,c){this.parent(a,b,c)},reset:function(a,b,c){this.parent(a,b,c)}});ig.EntityPool.enableFor(EntityEffect)});ig.baked=!0;
ig.module("game.entities.decals.perry-attack").requires("game.entities.decals.effect").defines(function(){EntityPerryAttack=EntityEffect.extend({size:{x:48,y:48},animSheet:new ig.AnimationSheet("media/graphics/perry-attack.png",48,35),ttl:20,damage:25,zIndex:1200,attackTimer:null,init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3]);c.enemy&&(this.enemy=c.enemy);c.damage&&(this.damage=c.damage);this.attackTimer=new ig.Timer;this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();
this.attackTimer&&1.6<this.attackTimer.delta()?this.kill():this.enemy.checkDeath()?this.kill():(this.pos.x=this.enemy.pos.x-this.enemy.headOffset.x,this.pos.y=this.enemy.pos.y-this.enemy.headOffset.y,this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.soundHandler.playSound(ig.soundHandler.SOUNDID.poof),this.currentAnim.rewind(),this.enemy.damage(this.damage),this.enemy.slow()))},reset:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3]);c.enemy&&(this.enemy=c.enemy);
c.damage&&(this.damage=c.damage);this.attackTimer=new ig.Timer;this.currentAnim=this.anims.idle.rewind()}})});ig.baked=!0;
ig.module("game.entities.characters.character").requires("plugins.components.in-game","plugins.components.a-star","game.entities.decals.star","game.entities.decals.perry-attack").defines(function(){EntityCharacter=EntityInGame.extend({size:{x:48,y:48},vel:{x:0,y:0},control:null,type:ig.Entity.TYPE.A,health:1E3,maxHealth:1E3,generator:null,recheck:!1,checkZone:{bottom:{row:1,col:0},top:{row:-1,col:0},left:{row:0,col:-1},right:{row:0,col:1}},direction:1,lastDirection:1,directions:{bottom:1,left:2,top:3,
right:4},collisionCheck:[{x:0,y:0}],aStar:null,hardCollide:!1,softCollide:!1,pathToWalk:[],pathIgnoreWalk:[],currentGridPos:{x:0,y:0},distanceTravel:49,destinationTile:null,tweenTime:0.5,canMove:!0,firstTime:!0,ignoreTurret:!1,stuckcount:0,stuckThreshold:5,baseDamage:10,starPoints:10,frozen:!1,freezeLength:0.8,chilled:!1,chilledLength:1,originalTweenTime:0.5,beingActedOn:!1,targetAngle:0,immuneToPillowDamage:!1,immuneToMineDamage:!1,oriX:0,shakeAngle:0,perryTimer:null,perry:null,healthWidth:0,healthHeight:5,
init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control,this.aStar=new AStar(this.control.grid.graph));c.size&&(this.size=c.size);c.generator&&(this.generator=c.generator);this.baseDamage=c.attackDamage;this.maxHealth=this.health=c.health;this.starPoints=c.enemyStars;this.tweenTime=c.speed+0;this.originalTweenTime=c.speed+0},update:function(){this.parent();this.zIndex=this.pos.y;this.damageTimer?(this.offset.x=this.oriOffset.x+0,this.offset.y=this.oriOffset.y+0,this.offset.x+=Math.floor(5*
Math.sin(this.shakeAngle*(Math.PI/180)))+20-this.size.x/2,this.shakeAngle+=45):(this.offset.x=this.oriOffset.x+0,this.offset.y=this.oriOffset.y+0);ig.game.paused?this.chillTimer&&this.chillTimer.pause():this.chillTimer&&this.chillTimer.unpause();this.beingActedOn?this.canMove=!1:!this.checkDeath()&&this.frozen?(this.currentAnim=this.anims.frozen.rewind(),this.freezeTimer&&this.freezeTimer.delta()>this.freezeLength?(this.resetTweenTime(),this.frozen=!1,this.canMove=!0,this.freezeTimer=null):this.canMove=
!1):this.chilled&&this.chillTimer&&this.chillTimer.delta()>this.chilledLength&&(this.resetTweenTime(),this.chilled=!1,this.chillTimer=null)},increaseTweenTime:function(a){this.tweenTime+=a},resetTweenTime:function(){this.tweenTime=this.originalTweenTime+0},checkBlock:function(a){return this.ignoreTurret?a===ig.game.terraintypes.unwalkable||a===ig.game.terraintypes.sandbag?!0:!1:a===ig.game.terraintypes.turretBuilt||a===ig.game.terraintypes.unwalkable||a===ig.game.terraintypes.sandbag?!0:!1},checkCanMove:function(a,
b){if(this.canMove){switch(a){case this.directions.bottom:this.checkBlock(this.control.grid.getModel(b.row+this.checkZone.bottom.row,b.col+this.checkZone.bottom.col))&&(this.hardCollide=!0,this.stuckcount++,this.stuckcount>this.stuckThreshold&&(this.moveDown(),this.stuckcount=0));break;case this.directions.left:this.checkBlock(this.control.grid.getModel(b.row+this.checkZone.left.row,b.col+this.checkZone.left.col))&&(this.hardCollide=!0,this.stuckcount++,this.stuckcount>this.stuckThreshold&&(this.moveLeft(),
this.stuckcount=0));break;case this.directions.top:this.checkBlock(this.control.grid.getModel(b.row+this.checkZone.top.row,b.col+this.checkZone.top.col))&&(this.hardCollide=!0,this.stuckcount++,this.stuckcount>this.stuckThreshold&&(this.moveUp(),this.stuckcount=0));break;case this.directions.right:this.checkBlock(this.control.grid.getModel(b.row+this.checkZone.right.row,b.col+this.checkZone.right.col))&&(this.hardCollide=!0,this.stuckcount++,this.stuckcount>this.stuckThreshold&&(this.moveRight(),
this.stuckcount=0))}return this.hardCollide?!1:!0}},moveDown:function(){this.canMove=!1;this.currentGridPos.row+=1;this.tween({pos:{x:this.pos.x,y:this.pos.y+48}},this.tweenTime,{onComplete:function(){this.canMove=!0}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start();this.direction=1},moveLeft:function(){this.canMove=!1;this.currentGridPos.col-=1;this.tween({pos:{x:this.pos.x-48,y:this.pos.y}},this.tweenTime,{onComplete:function(){this.canMove=!0}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start();
this.direction=2},moveUp:function(){this.currentGridPos.row-=1;this.canMove=!1;this.tween({pos:{x:this.pos.x,y:this.pos.y-48}},this.tweenTime,{onComplete:function(){this.canMove=!0}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start();this.direction=3},moveRight:function(){this.currentGridPos.col+=1;this.canMove=!1;this.tween({pos:{x:this.pos.x+48,y:this.pos.y}},this.tweenTime,{onComplete:function(){this.canMove=!0}.bind(this),easing:ig.Tween.Easing.Linear.EaseNone}).start();this.direction=
4},checkDeath:function(){return 0>this.health?(this.generator.pruneHeap(),!0):0>this.pos.x?!0:!1},damage:function(a){this.health-=a;this.damageTimer=new ig.Timer},checkDamage:function(){return this.damageTimer&&0.3<this.damageTimer.delta()?(this.damageTimer=null,!0):!1},noLongerActOn:function(){this.beingActedOn=!1},slow:function(){this.chilled=!0;this.chillTimer=new ig.Timer;2>this.tweenTime&&this.increaseTweenTime(0.2)},freeze:function(){this.frozen=!0;null==this.freezeTimer&&(this.freezeTimer=
new ig.Timer)},drawHealthBar:function(){0<this.healthWidth&&ig.system.context.fillRect(this.pos.x,this.pos.y-this.offset.y,this.healthWidth,this.healthHeight)}})});ig.baked=!0;
ig.module("game.entities.characters.zombie").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityZombie=EntityCharacter.extend({size:{x:48,y:48},offset:{x:20,y:30},animSheet:new ig.AnimationSheet("media/graphics/zombie.png",80,75),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"zombie",oriOffset:{x:0,y:0},headOffset:{x:0,y:20},star:null,regenTimer:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();
this.addAnim("idle",0.1,[9]);this.addAnim("walk",0.1,[9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]);this.addAnim("frozen",0.1,[8]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0;this.regenTimer=new ig.Timer},update:function(){this.parent();if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),
this.currentAnim=this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.zombiesKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{this.health<this.maxHealth&&this.regenTimer&&0.9<this.regenTimer.delta()&&(this.health+=1,this.regenTimer.reset());if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=
this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2),b=a.row-this.destinationTile.x,c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),
this.moveLeft(),this.destinationTile=null):0>c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(console.log("stuck"),this.control.flagToRedraw(),this.stuckcount=
0,this.ignoreTurret=!1));this.checkDamage()}},draw:function(){this.parent();var a=this.health/this.maxHealth;ig.system.context.fillStyle=0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+22,this.pos.y+30,48,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,
0,0,this.img.data.width,this.img.data.height,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y)},zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.damageHealth(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(console.log("turret destroyed"),
this.pathToWalk=[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,
a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;
this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("game.entities.characters.fast-zombie").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityFastZombie=EntityCharacter.extend({size:{x:48,y:48},offset:{x:20,y:30},animSheet:new ig.AnimationSheet("media/graphics/fastzombie.png",75,71),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"fastzombie",oriOffset:{x:0,y:0},headOffset:{x:20,y:20},star:null,regenTimer:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();
this.addAnim("idle",0.1,[12]);this.addAnim("walk",0.1,[12,11,10,15,14,13]);this.addAnim("frozen",0.1,[9]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7,8]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0;this.regenTimer=new ig.Timer},update:function(){this.parent();if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),
this.currentAnim=this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.zombiesKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{this.health<this.maxHealth&&this.regenTimer&&1.2<this.regenTimer.delta()&&(this.health+=1,this.regenTimer.reset());if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=
this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2),b=a.row-this.destinationTile.x,c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),
this.moveLeft(),this.destinationTile=null):0>c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(this.control.flagToRedraw(),this.stuckcount=0,this.ignoreTurret=
!1));this.checkDamage()}},draw:function(){this.parent();var a=this.health/this.maxHealth;ig.system.context.fillStyle=0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+22,this.pos.y+30,48,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,
0,0,this.img.data.width,this.img.data.height,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y)},zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.healthBar.reduce(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(console.log("turret destroyed"),
this.pathToWalk=[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,
a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;
this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("game.entities.characters.zombie-boss").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityZombieBoss=EntityCharacter.extend({size:{x:48,y:48},offset:{x:20,y:70},animSheet:new ig.AnimationSheet("media/graphics/zombieboss.png",85,120),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"zombieboss",oriOffset:{x:0,y:0},headOffset:{x:-5,y:45},star:null,regenTimer:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();
this.addAnim("idle",0.1,[17]);this.addAnim("walk",0.1,[17,16,15,14,13,12,11,10,17,18,19,20,21,22,23]);this.addAnim("frozen",0.1,[9]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7,8]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0;this.regenTimer=new ig.Timer},update:function(){this.parent();if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),
this.currentAnim=this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.zombiesKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{this.health<this.maxHealth&&this.regenTimer&&0.8<this.regenTimer.delta()&&(this.health+=1,this.regenTimer.reset());if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=
this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2),b=a.row-this.destinationTile.x,c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),
this.moveLeft(),this.destinationTile=null):0>c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(console.log("stuck"),this.control.flagToRedraw(),this.stuckcount=
0,this.ignoreTurret=!1));this.checkDamage()}},draw:function(){this.parent();var a=this.health/this.maxHealth;ig.system.context.fillStyle=0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+15,this.pos.y+30,54,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,
0,0,this.img.data.width,this.img.data.height,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y)},zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.healthBar.reduce(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(console.log("turret destroyed"),
this.pathToWalk=[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,
a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;
this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("game.entities.characters.clone").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityClone=EntityCharacter.extend({size:{x:48,y:48},offset:{x:8,y:78},animSheet:new ig.AnimationSheet("media/graphics/clone.png",85,127),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"clone",oriOffset:{x:0,y:0},headOffset:{x:-10,y:50},star:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();this.addAnim("idle",
0.1,[10]);this.addAnim("walk",0.1,[17,16,15,16,17,18,19,20,19,18]);this.addAnim("frozen",0.1,[9]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7,8]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0},update:function(){this.parent();this.perry&&(this.perry.pos.x=this.pos.x-this.headOffset.x,this.perry.pos.y=this.pos.y-this.headOffset.y);if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=
function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),this.currentAnim=this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.clonesKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=this.control.grid.getTileFromCoordinates(this.pos.x+
this.size.x/2,this.pos.y+this.size.y/2),b=a.row-this.destinationTile.x,c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveLeft(),this.destinationTile=null):0>
c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(console.log("stuck"),this.control.flagToRedraw(),this.stuckcount=0,this.ignoreTurret=!0));this.checkDamage()}},
draw:function(){this.parent();var a=this.health/this.maxHealth;ig.system.context.fillStyle=0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+3,this.pos.y+30,58,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,0,0,this.img.data.width,
this.img.data.height,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y)},zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.healthBar.reduce(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(console.log("turret destroyed"),this.pathToWalk=
[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);
for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=
a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("game.entities.characters.normbot").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityNormbot=EntityCharacter.extend({size:{x:48,y:48},offset:{x:36,y:44},animSheet:new ig.AnimationSheet("media/graphics/normbot.png",120,96),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"normbot",oriOffset:{x:0,y:0},headOffset:{x:-10,y:25},star:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();this.addAnim("idle",
0.1,[13]);this.addAnim("walk",0.1,[13,14,15,16,17,18,19,20,21,22,23]);this.addAnim("frozen",0.1,[12]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7,8,9,10,11]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0},update:function(){this.parent();if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),
this.currentAnim=this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.robotsKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2),b=a.row-
this.destinationTile.x,c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveLeft(),this.destinationTile=null):0>c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=
this.anims.walk.rewind(),this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(console.log("stuck"),this.control.flagToRedraw(),this.stuckcount=0,this.ignoreTurret=!1));this.checkDamage()}},draw:function(){this.parent();var a=this.health/
this.maxHealth;ig.system.context.fillStyle=0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+35,this.pos.y+30,48,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x-this.offset.x,this.pos.y-
this.offset.y,this.size.x,this.size.y)},zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.healthBar.reduce(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(console.log("turret destroyed"),this.pathToWalk=[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=
!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-
1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=
0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("game.entities.characters.bigbot").requires("game.entities.characters.character","plugins.components.a-star").defines(function(){EntityBigbot=EntityCharacter.extend({size:{x:48,y:48},offset:{x:40,y:64},animSheet:new ig.AnimationSheet("media/graphics/bigbot.png",120,116),shadow:new ig.Image("media/graphics/zombie-shadow.png"),sizeRadius:48,name:"bigbot",oriOffset:{x:0,y:0},headOffset:{x:-10,y:44},star:null,init:function(a,b,c){this.parent(a,b,c);ig.game.sortEntitiesDeferred();this.addAnim("idle",
0.1,[9]);this.addAnim("walk",0.1,[9,10,11,12,13,14,15,16,17,18,19]);this.addAnim("frozen",0.1,[8]);this.addAnim("death",0.1,[0,1,2,3,4,5,6,7]);this.oriOffset.x=this.offset.x+0;this.oriOffset.y=this.offset.y+0},update:function(){this.parent();if(this.checkDeath())this.currentAnim!==this.anims.death&&(null==this.star&&(this.star=ig.game.spawnEntity(EntityStar,this.pos.x,this.pos.y),this.star.completeCallback=function(){this.control.playerHandler.increaseStars(this.starPoints)}.bind(this)),this.currentAnim=
this.anims.death.rewind()),this.currentAnim.frame>=this.currentAnim.sequence.length-1&&(ig.game.robotsKilled++,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.zombie),this.kill());else{if(this.canMove)if(this.ignoreTurret?(this.zombieAI(),this.calculateAStarIgnoreTurret()):(this.zombieAI(),this.hardCollide&&(this.calculateAStar(),this.hardCollide=!1)),this.destinationTile){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2),b=a.row-this.destinationTile.x,
c=a.col-this.destinationTile.y;0<b?this.checkCanMove(this.directions.top,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveUp(),this.destinationTile=null):0>b?this.checkCanMove(this.directions.bottom,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveDown(),this.destinationTile=null):0<c?this.checkCanMove(this.directions.left,a)&&(this.currentAnim=this.anims.walk.rewind(),this.moveLeft(),this.destinationTile=null):0>c?this.checkCanMove(this.directions.right,a)&&(this.currentAnim=this.anims.walk.rewind(),
this.moveRight(),this.destinationTile=null):this.destinationTile=null}else 0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop(),this.stuckcount=0),0<this.pathIgnoreWalk.length?(this.destinationTile=this.pathIgnoreWalk.pop(),this.stuckcount=0):(this.stuckcount++,this.stuckcount>this.stuckThreshold&&(console.log("stuck"),this.control.flagToRedraw(),this.stuckcount=0,this.ignoreTurret=!1));this.checkDamage()}},draw:function(){this.parent();var a=this.health/this.maxHealth;ig.system.context.fillStyle=
0.5<a?"rgba(0,255,0,1)":0.25<a?"rgba(255,255,0,1)":"rgba(255,0,0,1)";this.healthWidth=~~(48*a);this.currentAnim.angle=this.targetAngle*Math.PI/180;this.beingActedOn||ig.system.context.drawImage(this.shadow.data,0,0,this.shadow.data.width,this.shadow.data.height,this.pos.x-this.offset.x+38,this.pos.y+30,48,23);this.drawHealthBar()},drawWithContext:function(a){a.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y)},
zombieAI:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.base?(this.generator.increaseEnemiesPass(),this.control.healthBar.reduce(this.baseDamage),this.kill()):this.control.grid.getModel(a.row,a.col)===ig.game.terraintypes.turretBuilt?(this.pathToWalk=[],this.pathIgnoreWalk=[],this.hardCollide=!0,this.ignoreTurret=!1,this.control.grid.removeTurret(a.row,a.col),this.control.flagToRedraw()):
2==Math.abs(a.row-this.control.grid.model.length)?this.hardCollide=!0:this.firstTime&&(this.calculateAStar(),this.firstTime=!1)},calculateAStar:function(){this.pathToWalk=[];var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-
1,a.col+b);this.pathToWalk=this.aStar.startSearch();0<this.pathToWalk.length&&(this.destinationTile=this.pathToWalk.pop());this.control.flagToRedraw()},calculateAStarIgnoreTurret:function(){var a=this.control.grid.getTileFromCoordinates(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2);this.currentGridPos.row=a.row;this.currentGridPos.col=a.col;this.aStar.setStart(a.row,a.col);for(var b=0;3!=this.control.grid.model[this.control.grid.model.length-1][a.col+b];)a.col>this.control.grid.model.length/
2?b--:b++;this.aStar.setGoal(this.control.grid.model.length-1,a.col+b);this.pathIgnoreWalk=this.aStar.startSearchIgnoreTurret();0<this.pathIgnoreWalk.length&&(this.destinationTile=this.pathIgnoreWalk.pop());this.control.flagToRedraw()}})});ig.baked=!0;
ig.module("plugins.components.generator").requires("plugins.components.in-game","plugins.components.binary-heap","game.entities.characters.zombie","game.entities.characters.fast-zombie","game.entities.characters.zombie-boss","game.entities.characters.clone","game.entities.characters.normbot","game.entities.characters.bigbot").defines(function(){EntityGenerator=EntityInGame.extend({size:{x:48,y:48},heap:null,timer:null,waitTimer:null,numberToSpawn:1,zIndex:100,enemiesSpawned:0,enemiesPassed:0,control:null,
stopSpawn:!1,enemiesSpawned:0,waveList:[],currentWaveIndex:0,currentWaveList:[],init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);c.wave&&this.copyWaveList(c.wave);this.heap=new BinaryHeap(function(a){return a._killed?1:2});this.waitTimer=new ig.Timer;this.currentWaveList=this.waveList[this.currentWaveIndex].wave},setWaveList:function(a){this.waveList=a;this.currentWaveIndex=0;this.currentWaveList=this.waveList[this.currentWaveIndex].wave},pruneHeap:function(){var a=this.heap.pop();
if(a)if(a._killed){if(a)for(;a&&a._killed;)a=this.heap.pop();a&&!a._killed&&this.heap.push(a)}else this.heap.push(a)},update:function(){this.parent();this.isSpawnOver()||(this.waitTimer&&this.waitTimer.delta()>this.waveList[this.currentWaveIndex].waitTime&&(null==this.timer&&(this.timer=new ig.Timer),this.waitTimer=null),this.timer&&this.timer.delta()>this.waveList[this.currentWaveIndex].spawnTime&&(this.spawn(this.numberToSpawn),this.stopSpawn?this.timer=null:this.timer&&this.timer.reset()))},isSpawnOver:function(){return this.currentWaveIndex>=
this.waveList.length?!0:!1},spawn:function(a){if(0<this.currentWaveList.length)for(var b=this.currentWaveList.pop(),c=0;c<a;){var d=this.waveList[this.currentWaveIndex].enemyHealth,e=this.waveList[this.currentWaveIndex].enemySpeed,f=this.waveList[this.currentWaveIndex].enemyDamage,h=this.waveList[this.currentWaveIndex].enemyStars;"EntityFastZombie"===b.enemyType&&(d=this.waveList[this.currentWaveIndex].enemyHealth,e=this.waveList[this.currentWaveIndex].enemySpeed/2,f=this.waveList[this.currentWaveIndex].enemyDamage,
h=this.waveList[this.currentWaveIndex].enemyStars);d=ig.game.spawnEntity(b.enemyType,this.pos.x,this.pos.y,{control:this.control,size:this.size,generator:this,health:d,speed:e,attackDamage:f,enemyStars:h});this.heap.push(d);ig.game.allEnemies.push(d);c++;this.enemiesSpawned++}else this.currentWaveIndex++,this.currentWaveIndex>this.waveList.length-1?this.currentWaveIndex=this.waveList.length:(this.currentWaveList=this.waveList[this.currentWaveIndex].wave,this.timer&&(this.timer=null),this.waitTimer=
new ig.Timer)},increaseEnemiesPass:function(){this.enemiesPassed++},pause:function(){this.timer&&this.timer.pause();this.waitTimer&&this.waitTimer.pause()},unpause:function(){this.timer&&this.timer.unpause();this.waitTimer&&this.waitTimer.unpause()},stopSpawning:function(){this.stopSpawn=!0},restartSpawning:function(){this.stopSpawn=!1},addWave:function(){},checkDoneWithWavelist:function(){return this.currentWaveIndex>=this.waveList.length},getSize:function(){return this.heap.size()},copyWaveList:function(a){for(;0<
this.waveList.length;)this.waveList.pop();for(var b=0;b<a.length;b++){this.waveList.push({waitTime:a[b].waitTime+0,spawnTime:a[b].spawnTime+0,enemyHealth:a[b].enemyHealth+0,enemySpeed:a[b].enemySpeed+0,enemyDamage:a[b].enemyDamage+0,enemyStars:a[b].enemyStars+0,wave:[]});if(a[b].numZombies)for(var c=0;c<a[b].numZombies;c++)this.waveList[b].wave.push({enemyType:"EntityZombie"});if(a[b].numRobots)for(c=0;c<a[b].numRobots;c++)this.waveList[b].wave.push({enemyType:"EntityRobot"});if(a[b].numFastZombies)for(c=
0;c<a[b].numFastZombies;c++)this.waveList[b].wave.push({enemyType:"EntityFastZombie"});if(a[b].numZombiesBoss)for(c=0;c<a[b].numZombiesBoss;c++)this.waveList[b].wave.push({enemyType:"EntityZombieBoss"});if(a[b].numClones)for(c=0;c<a[b].numClones;c++)this.waveList[b].wave.push({enemyType:"EntityClone"});if(a[b].numNormbots)for(c=0;c<a[b].numNormbots;c++)this.waveList[b].wave.push({enemyType:"EntityNormbot"});if(a[b].numBigbots)for(c=0;c<a[b].numBigbots;c++)this.waveList[b].wave.push({enemyType:"EntityBigbot"})}}})});
ig.baked=!0;
ig.module("game.buttons.sell-button").requires("plugins.components.button").defines(function(){EntitySellButton=EntityButton.extend({size:{x:62,y:77},ignorePause:!0,name:"sellbutton",placement:null,cost:10,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.placement&&(this.placement=c.placement);c.cost&&(this.cost=c.cost)},draw:function(){this.parent();this.clickable&&(ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[28].sx,_SPRITES.guiSprites.graphics[28].sy,_SPRITES.guiSprites.graphics[28].sw,
_SPRITES.guiSprites.graphics[28].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y),ig.game.font24.draw(this.cost,this.pos.x+12,this.pos.y+3,ig.Font.ALIGN.LEFT),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+6,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh))}})});ig.baked=!0;
ig.module("game.buttons.upgrade-button").requires("plugins.components.button").defines(function(){EntityUpgradeButton=EntityButton.extend({size:{x:62,y:77},ignorePause:!0,name:"upgradebutton",placement:null,cost:10,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.placement&&(this.placement=c.placement);c.cost&&(this.cost=c.cost)},draw:function(){this.parent();this.clickable&&(ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[29].sx,_SPRITES.guiSprites.graphics[29].sy,
_SPRITES.guiSprites.graphics[29].sw,_SPRITES.guiSprites.graphics[29].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y),ig.game.font24.draw(this.cost,this.pos.x+10,this.pos.y+55,ig.Font.ALIGN.LEFT),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[19].sx,_SPRITES.guiSprites.graphics[19].sy,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh,this.pos.x+38,this.pos.y+57,_SPRITES.guiSprites.graphics[19].sw,_SPRITES.guiSprites.graphics[19].sh))}})});
ig.baked=!0;
ig.module("game.buttons.cancel-button").requires("plugins.components.button").defines(function(){EntityCancelButton=EntityButton.extend({size:{x:69,y:69},ignorePause:!0,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&(this.size={x:_SPRITES.guiSprites.graphics[18].sw,y:_SPRITES.guiSprites.graphics[18].sh},this.setOriSize(this.size.x,this.size.y),ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[18].sx,_SPRITES.guiSprites.graphics[18].sy,
_SPRITES.guiSprites.graphics[18].sw,_SPRITES.guiSprites.graphics[18].sh,this.pos.x,this.pos.y,this.size.x,this.size.y))},drawWithContext:function(a){a.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x,this.pos.y,this.size.x,this.size.y)}})});ig.baked=!0;
ig.module("game.controllers.turret-option-wheel-controller").requires("plugins.components.control","game.buttons.sell-button","game.buttons.upgrade-button","game.buttons.cancel-button").defines(function(){EntityTurretOptionWheelController=EntityControl.extend({size:{x:48,y:48},offset:{x:119,y:119},showWheel:!1,radius:90,zIndex:2099,sellButton:null,upgradeButton:null,anglesForButtons:[270,315,0,45,90,135,180,225],radiansForButtons:[4.71239,5.49779,0,0.7854,1.5708,2.35619,3.14159,3.92699],control:null,
currentTurret:null,init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);this.closeButton=ig.game.spawnEntity(EntityCancelButton,0,0);this.closeButton.redirect=function(){this.control.hideTurretOptionWheel()}.bind(this);this.closeButton.disableButton();this.sellButton=ig.game.spawnEntity(EntitySellButton,0,0);this.sellButton.redirect=function(){console.log("selling turret");switch(this.currentTurret.name){case "zapturret":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.zapTurret/
2));break;case "lightningturret":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.zapTurret/2));break;case "pillowcannon":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.pillowcannon/2));break;case "fridgeorator":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.fridgeorator/2));break;case "perrynator":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.perrynator/2));break;case "mineninator":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.mineninator/2));break;
case "boxomator":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.boxomator/2))}this.control.grid.removeTurret(this.currentTurret.gridPos.row,this.currentTurret.gridPos.col);this.control.hideTurretOptionWheel()}.bind(this)},update:function(){this.parent();this.sellButton.pos.x=this.pos.x-this.sellButton.size.x/2+~~(this.radius*Math.cos(this.radiansForButtons[this.radiansForButtons.length-8]));this.sellButton.pos.y=this.pos.y-this.sellButton.size.y/2+~~(this.radius*Math.sin(this.radiansForButtons[this.radiansForButtons.length-
8]));this.upgradeButton&&(this.upgradeButton.pos.x=this.pos.x-this.sellButton.size.x/2+~~(this.radius*Math.cos(this.radiansForButtons[this.radiansForButtons.length-4])),this.upgradeButton.pos.y=this.pos.y-this.sellButton.size.y/2+~~(this.radius*Math.sin(this.radiansForButtons[this.radiansForButtons.length-4])));this.closeButton.pos.x=this.pos.x-this.closeButton.size.x/2;this.closeButton.pos.y=this.pos.y-this.closeButton.size.y/2},draw:function(){this.parent();if(this.showWheel){var a=ig.system.context;
this.control.notEnoughStarsTimer?a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[41].sx,_SPRITES.guiSprites.graphics[41].sy,_SPRITES.guiSprites.graphics[41].sw,_SPRITES.guiSprites.graphics[41].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,_SPRITES.guiSprites.graphics[41].sw,_SPRITES.guiSprites.graphics[41].sh):a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[17].sx,_SPRITES.guiSprites.graphics[17].sy,_SPRITES.guiSprites.graphics[17].sw,_SPRITES.guiSprites.graphics[17].sh,
this.pos.x-this.offset.x,this.pos.y-this.offset.y,_SPRITES.guiSprites.graphics[17].sw,_SPRITES.guiSprites.graphics[17].sh)}},hideOptions:function(){this.sellButton.disableButton();this.upgradeButton&&(this.upgradeButton.disableButton(),this.upgradeButton.kill(),this.upgradeButton=null);this.closeButton.disableButton()},showOptions:function(){this.currentTurret&&"zapturret"==this.currentTurret.name?(null==this.upgradeButton&&(this.upgradeButton=ig.game.spawnEntity(EntityUpgradeButton,0,0),this.upgradeButton.redirect=
function(){switch(this.currentTurret.name){case "zapturret":this.control.playerHandler.stars>=_TURRETSCOST.lightningTurret?(this.control.playerHandler.decreaseStars(_TURRETSCOST.lightningTurret),this.installTurret("EntityLightningTurret",this.currentTurret.pos.x,this.currentTurret.pos.y,this.currentTurret.gridPos.row,this.currentTurret.gridPos.col),this.upgradeButton&&(this.upgradeButton.kill(),this.upgradeButton=null)):this.control.displayNotEnoughStars()}this.control.flagToRedraw()}.bind(this)),
this.sellButton.cost=~~(_TURRETSCOST.zapTurret/2),this.upgradeButton.cost=_TURRETSCOST.lightningTurret):this.currentTurret&&"lightningturret"==this.currentTurret.name?this.sellButton.cost=~~(_TURRETSCOST.lightningTurret/2):this.currentTurret&&"fridgeorator"==this.currentTurret.name?this.sellButton.cost=~~(_TURRETSCOST.fridgeorator/2):this.currentTurret&&"perrynator"==this.currentTurret.name?this.sellButton.cost=~~(_TURRETSCOST.perrynator/2):this.currentTurret&&"mineninator"==this.currentTurret.name?
this.sellButton.cost=~~(_TURRETSCOST.mineninator/2):this.currentTurret&&"boxomator"==this.currentTurret.name?this.sellButton.cost=~~(_TURRETSCOST.boxomator/2):this.currentTurret&&"pillowcannon"==this.currentTurret.name&&(this.sellButton.cost=~~(_TURRETSCOST.pillowcannon/2));this.sellButton.enableButton();this.upgradeButton&&this.upgradeButton.enableButton();this.closeButton.enableButton()},installTurret:function(a,b,c,d,e){this.control.grid.removeTurret(d,e);this.currentTurret=a=ig.game.spawnEntity(a,
b,c,{row:d,col:e,control:this.control});this.control.grid.installTurret(a);a.zIndex=d+e;ig.game.sortEntitiesDeferred();this.control.hideTurretOptionWheel()},checkButtons:function(){return this.sellButton.checkOverlapWithPointer()||this.upgradeButton&&this.upgradeButton.checkOverlapWithPointer()||this.closeButton.checkOverlapWithPointer()?!0:!1},checkButtonsExcludeClose:function(){return this.sellButton.checkOverlapWithPointer()||this.upgradeButton&&this.upgradeButton.checkOverlapWithPointer()?!0:
!1}})});ig.baked=!0;
ig.module("game.entities.turrets.turret").requires("plugins.components.button","game.controllers.turret-option-wheel-controller").defines(function(){EntityTurret=EntityButton.extend({attackCooldown:1,idleTimer:null,idleCooldown:0.3,buildPlaceHolder:!1,invalid:!1,gridPos:{row:1,col:1},control:null,forceStopAttack:!1,init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);c.placeholder&&(this.buildPlaceHolder=c.placeholder);0<=c.row&&(this.gridPos.row=c.row);0<=c.col&&(this.gridPos.col=
c.col);this.currentTarget=null},redirect:function(){!this.buildPlaceHolder&&!this.control.isTutorialOptionLock&&!ig.game.paused&&!this.control.turretSelectionControl.showWheel&&!this.control.turretOptionControl.checkButtons()&&(this.control.turretOptionControl.currentTurret=this,this.control.showTurretOptionWheel(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2))},update:function(){this.parent();ig.game.paused?this.idleTimer&&this.idleTimer.pause():(this.idleTimer&&this.idleTimer.unpause(),this.idleTimer?
(this.currentAnim=this.anims.idle,this.idleTimer.delta()>this.idleCooldown&&(this.idleTimer=null)):this.forceStopAttack?this.currentAnim=this.anims.idle:this.attack())},stopFiring:function(){this.idleTimer=new ig.Timer;this.currentAnim=this.anims.idle},pauseTimer:function(){},unpauseTimer:function(){},searchEnemy:function(a,b){var c=ig.game.allEnemies;this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();for(var d=0;d<c.length;d++)if(c[d]&&!c[d]._killed&&!c[d].checkDeath()){var e=a-(c[d].pos.x+
c[d].size.x/2),f=b-(c[d].pos.y+c[d].size.y/2);if(e*e+f*f<=this.attackRadius){this.currentTarget=c[d];break}}else if(0<c.length&&(c[d].checkDeath()||c[d]._killed))c.splice(d,1),d--}})});ig.baked=!0;
ig.module("game.entities.projectiles.projectile").requires("plugins.components.in-game","impact.entity-pool").defines(function(){EntityProjectile=EntityInGame.extend({size:{x:108,y:39},maxVel:{x:4E3,y:4E3},zIndex:1500,name:"projectile",init:function(a,b,c){this.parent(a,b,c)},reset:function(a,b,c){this.parent(a,b,c)}});ig.EntityPool.enableFor(EntityProjectile)});ig.baked=!0;
ig.module("game.entities.decals.spark-effect").requires("game.entities.decals.effect").defines(function(){EntitySparkEffect=EntityEffect.extend({size:{x:48,y:48},inView:!0,ignoreInView:!0,animSheet:new ig.AnimationSheet("media/graphics/sparks-collision.png",98,69),zIndex:1501,init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2],!0);this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();1<=this.currentAnim.loopCount&&this.kill()},reset:function(a,b,c){this.parent(a,
b,c);this.addAnim("idle",0.1,[0,1,2],!0);this.currentAnim=this.anims.idle.rewind()}})});ig.baked=!0;
ig.module("game.entities.projectiles.zap").requires("game.entities.projectiles.projectile","game.entities.decals.spark-effect").defines(function(){EntityZap=EntityProjectile.extend({size:{x:20,y:20},offset:{x:36,y:19},animSheet:new ig.AnimationSheet("media/graphics/zapanim.png",73,38),checkAgainst:ig.Entity.TYPE.A,damage:60,inView:!0,ignoreInView:!0,attackTarget:null,speed:0,init:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1,2]);c.target&&(this.attackTarget=
c.target)},update:function(){this.parent();(0>this.pos.y||this.pos.y>ig.system.canvas.height||0>this.pos.x||this.pos.x>ig.system.canvas.width)&&this.kill();if(!ig.game.paused&&this.attackTarget)if(this.attackTarget._killed)this.attackTarget=null,this.kill();else{var a=Math.atan2(this.attackTarget.pos.y+this.attackTarget.size.y/2-this.pos.y+this.size.y/2,this.attackTarget.pos.x+this.attackTarget.size.x/2-this.pos.x+this.size.x/2),a=0<a?a:a+2*Math.PI;this.vel.y=Math.sin(a)*this.speed;this.vel.x=Math.cos(a)*
this.speed;this.targetAngle=Math.atan(this.vel.y/this.vel.x);this.currentAnim.angle=this.targetAngle}},draw:function(){this.parent()},reset:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1,2]);c.target&&(this.attackTarget=c.target)},check:function(a){this.pos.x>=a.pos.x+a.size.x/10&&this.pos.x<=a.pos.x+a.size.x-a.size.x/10&&(ig.game.spawnEntity(EntitySparkEffect,this.pos.x-49,this.pos.y-35),this.kill(),a.damage(this.damage))}})});ig.baked=!0;
ig.module("game.entities.turrets.zap-turret").requires("game.entities.turrets.turret","game.entities.projectiles.zap").defines(function(){EntityZapTurret=EntityTurret.extend({size:{x:48,y:48},offset:{x:18,y:40,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/zapper-anim.png",80,91),target:null,idleCooldown:0.4,invalid:!1,classType:"EntityZapTurret",name:"zapturret",gridPos:{row:1,col:1},projectileVector:{x:0,y:-10},firingAngle:0,attackRadius:8E4,currentTarget:null,fireOffset:{x:-20,y:22},
fixPos:{x:0,y:0},init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4,5]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col;this.projectileVector.y=-1E3;this.projectileVector.x=0;this.fixPos.x=this.pos.x;this.fixPos.y=this.pos.y},update:function(){this.parent()},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.searchEnemy(a,
b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},
attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(this.currentAnim=this.anims.fire.rewind(),ig.game.spawnEntity(EntityZap,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{speed:1E3,target:this.currentTarget}),ig.soundHandler.playSound(ig.soundHandler.SOUNDID.bzz),this.idleTimer=
new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();if(this.buildPlaceHolder){var a=ig.system.context;a.beginPath();a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI);a.lineWidth=4;a.closePath();a.fillStyle="rgba(255,0,0,0.5)";a.fill()}},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){}})});ig.baked=!0;
ig.module("game.entities.decals.ice-effect").requires("game.entities.decals.effect").defines(function(){EntityIceEffect=EntityEffect.extend({size:{x:138,y:64},inView:!0,ignoreInView:!0,animSheet:new ig.AnimationSheet("media/graphics/ice-collision.png",138,58),zIndex:1501,checkAgainst:ig.Entity.TYPE.A,otherArray:[],init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3],!0);this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();1<=this.currentAnim.loopCount&&this.kill()},
reset:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3],!0);this.currentAnim=this.anims.idle.rewind()},check:function(a){for(var b=0;b<this.otherArray.length;b++)if(this.otherArray[b]===a)return;a.slow();a.damage(2);this.otherArray.push(a)}})});ig.baked=!0;
ig.module("game.entities.projectiles.frost-bolt").requires("game.entities.projectiles.projectile","game.entities.decals.ice-effect").defines(function(){EntityFrostBolt=EntityProjectile.extend({size:{x:20,y:20},offset:{x:36,y:19},animSheet:new ig.AnimationSheet("media/graphics/freeze-ball.png",44,48),checkAgainst:ig.Entity.TYPE.A,damage:15,inView:!0,ignoreInView:!0,attackTarget:null,speed:0,init:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1,2,3]);c.target&&
(this.attackTarget=c.target)},update:function(){this.parent();(0>this.pos.y||this.pos.y>ig.system.canvas.height||0>this.pos.x||this.pos.x>ig.system.canvas.width)&&this.kill();if(this.attackTarget)if(this.attackTarget._killed)this.attackTarget=null,this.kill();else{var a=Math.atan2(this.attackTarget.pos.y+this.attackTarget.size.y/2-this.pos.y+this.size.y/2,this.attackTarget.pos.x+this.attackTarget.size.x/2-this.pos.x+this.size.x/2),a=0<a?a:a+2*Math.PI;this.vel.y=Math.sin(a)*this.speed;this.vel.x=Math.cos(a)*
this.speed;this.targetAngle=Math.atan(this.vel.y/this.vel.x);this.currentAnim.angle=this.targetAngle}},draw:function(){this.parent()},reset:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1,2,3]);c.target&&(this.attackTarget=c.target)},check:function(a){this.pos.x>=a.pos.x+a.size.x/10&&this.pos.x<=a.pos.x+a.size.x-a.size.x/10&&(ig.game.spawnEntity(EntityIceEffect,this.pos.x-69,this.pos.y-29),a.damage(this.damage),a.slow(),a.freeze(),this.kill())}})});
ig.baked=!0;
ig.module("game.entities.turrets.fridge-o-rator").requires("game.entities.projectiles.frost-bolt","game.entities.turrets.turret").defines(function(){EntityFridgeORator=EntityTurret.extend({size:{x:48,y:48},offset:{x:12,y:45,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/fridge-anim.png",80,99),target:null,idleCooldown:0.2,invalid:!1,classType:"EntityFridgeORator",name:"fridgeorator",gridPos:{row:1,col:1},projectileVector:{x:0,y:-10},firingAngle:0,attackRadius:9E4,currentTarget:null,fireOffset:{x:-28,
y:34},fixPos:{x:0,y:0},init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4,5]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col;this.projectileVector.y=-1E3;this.projectileVector.x=0;this.fixPos.x=this.pos.x;this.fixPos.y=this.pos.y},update:function(){this.parent()},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.currentAnim=
this.anims.idle.rewind(),this.searchEnemy(a,b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-
2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(this.currentAnim=this.anims.fire.rewind(),ig.game.spawnEntity(EntityFrostBolt,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{speed:500,target:this.currentTarget}),
ig.soundHandler.playSound(ig.soundHandler.SOUNDID.fridge),this.idleTimer=new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();if(this.buildPlaceHolder){var a=ig.system.context;a.beginPath();a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI);a.lineWidth=4;a.closePath();a.fillStyle="rgba(255,0,0,0.5)";a.fill()}},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){}})});ig.baked=!0;
ig.module("game.entities.projectiles.pillow").requires("game.entities.projectiles.projectile").defines(function(){EntityPillow=EntityProjectile.extend({size:{x:32,y:29},img:new ig.Image("media/graphics/pillow.png"),checkAgainst:ig.Entity.TYPE.A,damage:60,inView:!0,ignoreInView:!0,velocityVector:{x:0,y:0,z:0},angleVector:{xy:0,yz:0,xz:0},gravityVector:{x:0,y:500,z:1E3},launchSpeed:500,currentHeight:0,targetAngle:0,attackTarget:null,entitiesTouched:[],init:function(a,b,c){this.parent(a,b,c);this.size=
{x:64,y:58};this.currentHeight=0;this.entitiesTouched=[];c.target&&(this.attackTarget=c.target);c.velocity&&(this.velocityVector=c.velocity,this.launchSpeed=Math.sqrt(this.velocityVector.y*this.velocityVector.y+this.velocityVector.z*this.velocityVector.z));this.angleVector.xy=this.velocityVector.x/this.velocityVector.y;this.angleVector.yz=this.velocityVector.z/this.velocityVector.y;0<this.velocityVector.x&&(this.angleVector.xz=this.velocityVector.z/this.velocityVector.x)},update:function(){this.parent();
var a=this.velocityVector.z*ig.system.tick;this.velocityVector.z-=this.gravityVector.z*ig.system.tick;this.currentHeight+=this.velocityVector.z*ig.system.tick;if(this.attackTarget){var b=this.attackTarget.pos.x+this.attackTarget.size.x/2-(this.pos.x+this.size.x/2),c=this.attackTarget.pos.y+this.attackTarget.size.y/2-(this.pos.y+this.size.y/2),d=Math.atan2(c,b),e=600*Math.sin(Math.PI/2)/this.gravityVector.z,d=0<d?d:d+2*Math.PI,b=Math.sqrt(b*b+c*c)/(e/2);this.velocityVector.y=Math.sin(d)*b;this.velocityVector.x=
Math.cos(d)*b;this.pos.x+=this.velocityVector.x*ig.system.tick-a/2;this.pos.y+=this.velocityVector.y*ig.system.tick-a/2}if(0>this.size.x||0>this.size.y||0>this.currentHeight&&0>this.velocityVector.z){for(a=0;a<this.entitiesTouched.length;a++)this.entitiesTouched[a].immuneToPillowDamage=!1;this.kill()}},draw:function(){this.parent();var a=ig.system.context;a.translate(this.pos.x+this.size.x/4+this.size.x/8,this.pos.y+this.size.y/4+this.size.y/8);var b=this.targetAngle++*Math.PI/180;a.rotate(b);a.drawImage(this.img.data,
0,0,this.img.data.width,this.img.data.height,-this.size.x/4,-this.size.y/4,this.size.x/2,this.size.y/2);a.rotate(-b);a.translate(-(this.pos.x+this.size.x/4+this.size.x/8),-(this.pos.y+this.size.y/4+this.size.y/8))},reset:function(a,b,c){this.parent(a,b,c);this.size={x:64,y:58};this.currentHeight=0;this.entitiesTouched=[];c.target&&(this.attackTarget=c.target);c.velocity&&(this.velocityVector=c.velocity,this.launchSpeed=Math.sqrt(this.velocityVector.y*this.velocityVector.y+this.velocityVector.z*this.velocityVector.z));
this.angleVector.xy=this.velocityVector.x/this.velocityVector.y;this.angleVector.yz=this.velocityVector.z/this.velocityVector.y;0<this.velocityVector.x&&(this.angleVector.xz=this.velocityVector.z/this.velocityVector.x)},check:function(a){20>this.currentHeight&&0>this.velocityVector.z&&!a.immuneToPillowDamage&&(ig.soundHandler.playSound(ig.soundHandler.SOUNDID.poof),this.entitiesTouched.push(a),a.damage(this.damage),a.immuneToPillowDamage=!0)}})});ig.baked=!0;
ig.module("game.entities.turrets.pillow-cannon").requires("game.entities.turrets.turret","game.entities.projectiles.pillow").defines(function(){EntityPillowCannon=EntityTurret.extend({size:{x:48,y:48},offset:{x:8,y:65,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/pillow-cannon-anim.png",68,124),target:null,idleCooldown:0.8,invalid:!1,classType:"EntityPillowCannon",name:"pillowcannon",gridPos:{row:1,col:1},attackRadius:21E4,currentTarget:null,fireOffset:{x:-28,y:64},pillowProjectile:null,
firingAngle:0,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4,5,6,7]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.currentAnim=this.anims.idle.rewind(),this.searchEnemy(a,b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():
this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=
null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(this.firingAngle=270,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.cannon),ig.game.spawnEntity(EntityPillow,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{velocity:{x:0,y:0,z:400},target:this.currentTarget}),this.idleTimer=new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();var a=ig.system.context;this.buildPlaceHolder&&
(a.beginPath(),a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI),a.lineWidth=4,a.closePath(),a.fillStyle="rgba(255,0,0,0.5)",a.fill())},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){},searchEnemy:function(a,b){var c=ig.game.allEnemies;this.currentAnim=this.anims.idle.rewind();for(var d=0;d<c.length;d++)if(c[d]&&!c[d]._killed&&!c[d].checkDeath()){var e=a-(c[d].pos.x+c[d].size.x/2),f=b-(c[d].pos.y+c[d].size.y/2);if(e*e+f*
f<this.attackRadius){this.currentTarget=c[d];break}}else if(0<c.length&&(c[d].checkDeath()||c[d]._killed))c.splice(d,1),d--}})});ig.baked=!0;
ig.module("plugins.components.input-handler").requires("game.entities.turrets.zap-turret","game.entities.turrets.fridge-o-rator","game.entities.turrets.pillow-cannon").defines(function(){InputHandler=ig.Class.extend({control:null,init:function(a){this.control=a},handleInput:function(){if(this.control.turretSelectionControl.currentTurret){var a=this.control.grid.getTileFromCoordinates(ig.input.mouse.x,ig.input.mouse.y),b=this.control.grid.getCoordinatesFromTiles(a.row,a.col);this.control.turretSelectionControl.currentTurret.pos.x=
b.x;this.control.turretSelectionControl.currentTurret.pos.y=b.y;if(0<=a.row&&0<=a.col&&a.row<this.control.grid.model.length&&a.col<this.control.grid.model[0].length)if(this.control.grid.model[a.row][a.col]==ig.game.terraintypes.placement){if(ig.input.pressed("click")){switch(this.control.turretSelectionControl.currentTurret.name){case "zapturret":this.control.playerHandler.stars>=_TURRETSCOST.zapTurret?(this.control.playerHandler.decreaseStars(_TURRETSCOST.zapTurret),this.installTurret(this.control.turretSelectionControl.currentTurret.classType,
b.x,b.y,a.row,a.col)):this.control.displayNotEnoughStars();break;case "lightningturret":this.control.playerHandler.stars>=_TURRETSCOST.lightningTurret?(this.control.playerHandler.decreaseStars(_TURRETSCOST.lightningTurret),this.installTurret(this.control.turretSelectionControl.currentTurret.classType,b.x,b.y,a.row,a.col)):this.control.displayNotEnoughStars();break;case "pillowcannon":this.control.playerHandler.stars>=_TURRETSCOST.pillowcannon?(this.control.playerHandler.decreaseStars(_TURRETSCOST.pillowcannon),
this.installTurret(this.control.turretSelectionControl.currentTurret.classType,b.x,b.y,a.row,a.col)):this.control.displayNotEnoughStars();break;case "fridgeorator":this.control.playerHandler.stars>=_TURRETSCOST.fridgeorator?(this.control.playerHandler.decreaseStars(_TURRETSCOST.fridgeorator),this.installTurret(this.control.turretSelectionControl.currentTurret.classType,b.x,b.y,a.row,a.col)):this.control.displayNotEnoughStars()}this.control.flagToRedraw()}this.control.turretSelectionControl.currentTurret.invalid=
!1;this.control.turretSelectionControl.currentTurret.buildable=!0}else if(this.control.grid.model[a.row][a.col]==ig.game.terraintypes.turretBuilt){if(ig.input.pressed("click"))switch(this.control.turretSelectionControl.currentTurret.name){case "sellbutton":b=this.control.grid.getTurret(a.row,a.col),this.sellTurret(b.name,a.row,a.col)}this.control.turretSelectionControl.currentTurret.invalid=!0;this.control.turretSelectionControl.currentTurret.buildable=!1}else if((!this.control.turretSelectionControl.checkTurretButtons()||
!this.control.turretSelectionControl.checkButtons())&&ig.input.pressed("click"))this.control.turretSelectionControl.currentTurret&&(this.control.turretSelectionControl.currentTurret.kill(),this.control.turretSelectionControl.currentTurret=null),this.control.hideTurretOptionWheel()}else this.control.isTutorial?this.tutorialClick():ig.game.paused||this.noPlaceholderTurretClick()},noPlaceholderTurretClick:function(){if(ig.input.pressed("click"))if(this.control.nextButton.checkOverlapWithPointer()&&this.control.nextButton.clickable)this.control.currentSize.x=
0,this.control.gameState===this.control.gameStates.endDialog?this.control.nextEndDialog():this.control.nextDialog();else{var a=this.control.grid.getTileFromCoordinates(ig.input.mouse.x,ig.input.mouse.y);this.control.grid.getCoordinatesFromTiles(a.row,a.col);0<=a.row&&0<=a.col&&a.row<this.control.grid.model.length&&a.col<this.control.grid.model[0].length&&this.control.grid.model[a.row][a.col]!=ig.game.terraintypes.placement&&this.control.grid.model[a.row][a.col]!=ig.game.terraintypes.turretBuilt&&
(!this.control.turretOptionControl.checkButtons()&&!this.control.turretSelectionControl.checkButtons())&&(this.control.turretOptionControl.showWheel&&this.control.hideTurretOptionWheel(),this.control.turretSelectionControl.showWheel&&this.control.hideTurretSelectionWheel())}},installTurret:function(a,b,c,d,e){a=ig.game.spawnEntity(a,b,c,{row:d,col:e,control:this.control});this.control.grid.installTurret(a);a.zIndex=d+e;ig.game.sortEntitiesDeferred()},sellTurret:function(a,b,c){switch(a){case "zapturret":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.zapTurret/
2));break;case "lightningturret":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.lightningTurret/2));break;case "perrynator":this.control.playerHandler.increaseStars(~~(_TURRETSCOST.perrynator/2))}this.control.grid.removeTurret(b,c);this.control.flagToRedraw()},tutorialClick:function(){if(ig.input.pressed("click")){var a=this.control.grid.getTileFromCoordinates(ig.input.mouse.x,ig.input.mouse.y);this.control.grid.getCoordinatesFromTiles(a.row,a.col);0<=a.row&&0<=a.col&&a.row<this.control.grid.model.length&&
a.col<this.control.grid.model[0].length?this.control.grid.model[a.row][a.col]==ig.game.terraintypes.placement?4===this.control.dialogIndex&&(this.control.currentSize.x=0,this.control.turretSelectionControl.closeButton.disableButton(),this.control.nextDialog()):this.control.grid.model[a.row][a.col]!=ig.game.terraintypes.turretBuilt&&!this.control.turretOptionControl.checkButtons()&&(this.control.turretSelectionControl.checkTurretButtons()?5===this.control.dialogIndex&&(this.control.currentSize.x=0,
this.control.playButton.enableButton(),this.control.nextDialog()):!this.control.turretSelectionControl.checkButtons()&&5!==this.control.dialogIndex&&(this.control.turretOptionControl.showWheel&&this.control.hideTurretOptionWheel(),this.control.turretSelectionControl.showWheel&&this.control.hideTurretSelectionWheel())):this.control.nextButton.checkOverlapWithPointer()&&this.control.nextButton.clickable?(this.control.currentSize.x=0,this.control.nextDialog()):this.control.playButton.checkOverlapWithPointer()&&
this.control.playButton.clickable&&this.control.nextDialog()}}})});ig.baked=!0;
ig.module("game.entities.sandbag").requires("plugins.components.in-game").defines(function(){EntitySandbag=EntityInGame.extend({size:{x:48,y:48},offset:{x:0,y:0,w:0,h:0},init:function(a,b,c){this.parent(a,b,c)},drawWithContext:function(a){a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[20].sx,_SPRITES.gameSprites.graphics[20].sy,_SPRITES.gameSprites.graphics[20].sw,_SPRITES.gameSprites.graphics[20].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x,this.size.y+this.offset.h)}})});
ig.baked=!0;
ig.module("game.buttons.placement").requires("plugins.components.button").defines(function(){EntityPlacement=EntityButton.extend({size:{x:48,y:48},gridPos:{row:0,col:0},control:null,zIndex:1,turretBuildOver:!1,init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);this.setOriSize(this.size.x,this.size.y);0<=c.row&&(this.gridPos.row=c.row);0<=c.col&&(this.gridPos.col=c.col)},redirect:function(){this.control&&!this.control.isTutorialSelectLock&&!ig.game.paused&&!this.turretBuiltOver&&(!this.control.turretSelectionControl.checkButtons()&&
!this.control.turretOptionControl.showWheel)&&(this.control.turretSelectionControl.currentPlacement=this,this.control.showTurretSelectionWheel(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2))},draw:function(){this.parent();this.turretBuiltOver||ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[23].sx,_SPRITES.gameSprites.graphics[23].sy,_SPRITES.gameSprites.graphics[23].sw,_SPRITES.gameSprites.graphics[23].sh,this.pos.x,this.pos.y,this.size.x,this.size.y)},checkOverlapWithPoint:function(a,
b){return a>this.pos.x+this.size.x||a<this.pos.x||b>this.pos.y+this.size.y||b<this.pos.y?!1:!0}})});ig.baked=!0;
ig.module("plugins.components.grid-node").defines(function(){GridNode=ig.Class.extend({x:0,y:0,weight:0,init:function(a,b,c){this.x=a;this.y=b;this.weight=c},getString:function(){return"["+this.x+" "+this.y+"]"},getCost:function(a){return a&&a.x!=this.x&&a.y!=this.y?1.41421*this.weight:this.weight},isObstacle:function(){return this.isWall()||this.isTurret()||this.isSandbag()||this.isPlacement()?!0:!1},isWall:function(){return this.weight===ig.game.terraintypes.unwalkable?!0:!1},isTurret:function(){return this.weight===
ig.game.terraintypes.turretBuilt?!0:!1},isSandbag:function(){return this.weight===ig.game.terraintypes.sandbag?!0:!1},isPlacement:function(){return this.weight===ig.game.terraintypes.placement?!0:!1}})});ig.baked=!0;
ig.module("plugins.components.graph").requires("plugins.components.grid-node").defines(function(){Graph=ig.Class.extend({nodes:[],diagonal:!1,grid:[],dirtyNodes:[],init:function(a,b){b=b||{};this.nodes=[];this.diagonal=!!b.diagonal;this.grid=[];for(var c=0;c<a.length;c++){this.grid[c]=[];for(var d=0,e=a[c];d<e.length;d++){var f=new GridNode(c,d,e[d]);this.grid[c][d]=f;this.nodes.push(f)}}this.dirtyNodes=[];for(c=0;c<this.nodes.length;c++)this.cleanNode(this.nodes[c])},adjustGraph:function(a,b,c){c=
new GridNode(a,b,c);this.grid[a][b]=c;a=a*this.grid.length+b;this.nodes[a]=c;this.cleanNode(this.nodes[a])},cleanAll:function(){for(var a=0;a<this.nodes.length;a++)this.cleanNode(this.nodes[a])},cleanNode:function(a){a.f=0;a.g=0;a.h=0;a.visited=!1;a.closed=!1;a.parent=null},cleanDirty:function(){for(var a=0;a<this.dirtyNodes.length;a++)this.cleanNode(this.dirtyNodes[a]);this.dirtyNodes=[]},markDirty:function(a){this.dirtyNodes.push(a)},neighbors:function(a){var b=[],c=a.x;a=a.y;var d=this.grid;d[c-
1]&&d[c-1][a]&&b.push(d[c-1][a]);d[c+1]&&d[c+1][a]&&b.push(d[c+1][a]);d[c]&&d[c][a-1]&&b.push(d[c][a-1]);d[c]&&d[c][a+1]&&b.push(d[c][a+1]);this.diagonal&&(d[c-1]&&d[c-1][a-1]&&b.push(d[c-1][a-1]),d[c+1]&&d[c+1][a-1]&&b.push(d[c+1][a-1]),d[c-1]&&d[c-1][a+1]&&b.push(d[c-1][a+1]),d[c+1]&&d[c+1][a+1]&&b.push(d[c+1][a+1]));return b},getString:function(){for(var a=[],b=this.grid,c,d,e,f,h=0,g=b.length;h<g;h++){c=[];d=b[h];e=0;for(f=d.length;e<f;e++)c.push(d[e].weight);a.push(c.join(" "))}return a.join("\n")}})});
ig.baked=!0;
ig.module("game.entities.obstacle").requires("plugins.components.in-game").defines(function(){EntityObstacle=EntityInGame.extend({size:{x:48,y:48},offset:{x:0,y:0,w:0,h:0},gridSize:{row:2,col:2},gridPos:{row:0,col:0},init:function(a,b,c){this.parent(a,b,c);c.typeOfObstacle&&(this.gridSize=6<=c.typeOfObstacle&&13>=c.typeOfObstacle?{row:1,col:1}:22<=c.typeOfObstacle&&25>=c.typeOfObstacle?{row:2,col:2}:14<=c.typeOfObstacle&&19>=c.typeOfObstacle?{row:1,col:2}:{row:2,col:1},this.obstacleType=c.typeOfObstacle);
c.row&&(this.gridPos.row=c.row);c.col&&(this.gridPos.col=c.col)},drawWithContext:function(a){switch(this.obstacleType){case ig.game.terraintypes.obstacle1:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[2].sx,_SPRITES.gameSprites.graphics[2].sy,_SPRITES.gameSprites.graphics[2].sw,_SPRITES.gameSprites.graphics[2].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle2:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[3].sx,_SPRITES.gameSprites.graphics[3].sy,_SPRITES.gameSprites.graphics[3].sw,_SPRITES.gameSprites.graphics[3].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle3:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[4].sx,_SPRITES.gameSprites.graphics[4].sy,_SPRITES.gameSprites.graphics[4].sw,_SPRITES.gameSprites.graphics[4].sh,this.pos.x-this.offset.x,
this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle4:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[6].sx,_SPRITES.gameSprites.graphics[6].sy,_SPRITES.gameSprites.graphics[6].sw,_SPRITES.gameSprites.graphics[6].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle5:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[7].sx,_SPRITES.gameSprites.graphics[7].sy,_SPRITES.gameSprites.graphics[7].sw,_SPRITES.gameSprites.graphics[7].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle6:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[8].sx,_SPRITES.gameSprites.graphics[8].sy,_SPRITES.gameSprites.graphics[8].sw,_SPRITES.gameSprites.graphics[8].sh,this.pos.x-this.offset.x,
this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle7:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[9].sx,_SPRITES.gameSprites.graphics[9].sy,_SPRITES.gameSprites.graphics[9].sw,_SPRITES.gameSprites.graphics[9].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle8:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[10].sx,_SPRITES.gameSprites.graphics[10].sy,_SPRITES.gameSprites.graphics[10].sw,_SPRITES.gameSprites.graphics[10].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle9:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[5].sx,_SPRITES.gameSprites.graphics[5].sy,_SPRITES.gameSprites.graphics[5].sw,_SPRITES.gameSprites.graphics[5].sh,this.pos.x-
this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle10:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[22].sx,_SPRITES.gameSprites.graphics[22].sy,_SPRITES.gameSprites.graphics[22].sw,_SPRITES.gameSprites.graphics[22].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle11:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[24].sx,_SPRITES.gameSprites.graphics[24].sy,_SPRITES.gameSprites.graphics[24].sw,_SPRITES.gameSprites.graphics[24].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle12:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[25].sx,_SPRITES.gameSprites.graphics[25].sy,_SPRITES.gameSprites.graphics[25].sw,_SPRITES.gameSprites.graphics[25].sh,this.pos.x-
this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle13:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[26].sx,_SPRITES.gameSprites.graphics[26].sy,_SPRITES.gameSprites.graphics[26].sw,_SPRITES.gameSprites.graphics[26].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle14:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[27].sx,_SPRITES.gameSprites.graphics[27].sy,_SPRITES.gameSprites.graphics[27].sw,_SPRITES.gameSprites.graphics[27].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle15:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[28].sx,_SPRITES.gameSprites.graphics[28].sy,_SPRITES.gameSprites.graphics[28].sw,_SPRITES.gameSprites.graphics[28].sh,this.pos.x-
this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle16:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[29].sx,_SPRITES.gameSprites.graphics[29].sy,_SPRITES.gameSprites.graphics[29].sw,_SPRITES.gameSprites.graphics[29].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle17:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[0].sx,_SPRITES.gameSprites.graphics[0].sy,_SPRITES.gameSprites.graphics[0].sw,_SPRITES.gameSprites.graphics[0].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle18:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[1].sx,_SPRITES.gameSprites.graphics[1].sy,_SPRITES.gameSprites.graphics[1].sw,_SPRITES.gameSprites.graphics[1].sh,this.pos.x-this.offset.x,
this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle19:a.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[30].sx,_SPRITES.gameSprites.graphics[30].sy,_SPRITES.gameSprites.graphics[30].sw,_SPRITES.gameSprites.graphics[30].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h);break;case ig.game.terraintypes.obstacle20:a.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[31].sx,_SPRITES.gameSprites.graphics[31].sy,_SPRITES.gameSprites.graphics[31].sw,_SPRITES.gameSprites.graphics[31].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,this.size.x*this.gridSize.col,this.size.y*this.gridSize.row+this.offset.h)}}})});ig.baked=!0;
ig.module("plugins.components.grid").requires("plugins.components.binary-heap","game.entities.sandbag","game.buttons.placement","plugins.components.graph","game.entities.obstacle").defines(function(){Grid=ig.Class.extend({pos:{x:14,y:-88},tileSize:{x:48,y:48},maxSize:{x:17,y:9},model:[[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,
1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0],[0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0]],skipTiles:[],graph:null,turretsAvail:null,sandbags:[],
placements:[],obstacles:[],control:null,init:function(a){this.control=a;this.graph=new Graph(this.model);for(a=0;a<this.model.length;a++)for(var b=0;b<this.model[a].length;b++){for(var c=!1,d=0;d<this.skipTiles.length;d++)a==this.skipTiles[d].row&&b==this.skipTiles[d].col&&(c=!0);c||(this.model[a][b]=_LEVELS[ig.game.currentLevel][a][b]+0,this.graph.adjustGraph(a,b,_LEVELS[ig.game.currentLevel][a][b]+0));this.model[a][b]==ig.game.terraintypes.sandbag&&this.installSandbag(a,b);this.model[a][b]==ig.game.terraintypes.placement&&
this.installPlacement(a,b);this.model[a][b]>=ig.game.terraintypes.obstacle1&&this.model[a][b]<=ig.game.terraintypes.obstacle20&&this.installObstacle(this.model[a][b],a,b)}for(this.turretsAvail=new BinaryHeap(function(a){return a._killed?1:2});0<this.skipTiles.length;)this.skipTiles.pop()},drawGrid:function(a){for(var b=0;b<this.model.length;b++)for(var c=0;c<this.model[b].length;c++)this.model[b][c]===ig.game.terraintypes.unwalkable?a.fillStyle="rgba(255,0,0,0.5)":this.model[b][c]===ig.game.terraintypes.walkable?
a.fillStyle="rgba(0,0,255,0.5)":this.model[b][c]===ig.game.terraintypes.turretBuilt?a.fillStyle="rgba(255,0,0,0.5)":this.model[b][c]===ig.game.terraintypes.base?a.fillStyle="rgba(255,255,0,0.5)":this.model[b][c]===ig.game.terraintypes.sandbag?a.fillStyle="rgba(255,0,255,0.5)":this.model[b][c]===ig.game.terraintypes.placement&&(a.fillStyle="rgba(125,255,255,0.5)"),a.fillRect(this.pos.x+this.tileSize.x*c,this.pos.y+this.tileSize.y*b,this.tileSize.x,this.tileSize.y);this.drawTurrets(a);this.drawSandbags(a)},
drawSandbags:function(a){for(var b=0;b<this.sandbags.length;b++)this.sandbags[b].drawWithContext(a)},drawObstacles:function(a){for(var b=0;b<this.obstacles.length;b++)this.obstacles[b].drawWithContext(a)},drawTurrets:function(a){for(var b=0;b<this.turretsAvail.size();b++)this.turretsAvail.list[b].drawWithContext(a)},getTileFromCoordinates:function(a,b){return{row:Math.floor(b/this.tileSize.y-this.pos.y/this.tileSize.y),col:Math.floor(a/this.tileSize.x-this.pos.x/this.tileSize.x)}},getCoordinatesFromTiles:function(a,
b){return{x:Math.floor(b*this.tileSize.x)+this.pos.x,y:Math.floor(a*this.tileSize.y)+this.pos.y}},installTurret:function(a){this.model[a.gridPos.row][a.gridPos.col]=ig.game.terraintypes.turretBuilt;this.turretsAvail.push(a);this.removePlacement(a.gridPos.row,a.gridPos.col);this.graph.adjustGraph(a.gridPos.row,a.gridPos.col,ig.game.terraintypes.turretBuilt)},removeTurret:function(a,b){for(var c=0;c<this.turretsAvail.list.length;c++)if(this.turretsAvail.list[c].gridPos.row==a&&this.turretsAvail.list[c].gridPos.col==
b){this.turretsAvail.list[c].stopFiring();this.turretsAvail.list[c].kill();this.turretsAvail.list.splice(c,1);this.model[a][b]=ig.game.terraintypes.placement;this.installPlacement(a,b);return}this.graph.adjustGraph(a,b,ig.game.terraintypes.walkable)},installSandbag:function(a,b){this.model[a][b]=ig.game.terraintypes.sandbag;var c=this.getCoordinatesFromTiles(a,b);this.sandbags.push(ig.game.spawnEntity(EntitySandbag,c.x,c.y,{row:a,col:b}));this.graph.adjustGraph(a,b,ig.game.terraintypes.sandbag)},
installPlacement:function(a,b){this.model[a][b]=ig.game.terraintypes.placement;var c=this.getCoordinatesFromTiles(a,b);this.getPlacement(a,b)?this.placements[placementIndex].turretBuiltOver=!1:this.placements.push(ig.game.spawnEntity(EntityPlacement,c.x,c.y,{row:a,col:b,control:this.control}));this.graph.adjustGraph(a,b,ig.game.terraintypes.placement)},removePlacement:function(a,b){for(var c=0;c<this.placements.length;c++)if(this.placements[c].gridPos.row==a&&this.placements[c].gridPos.col==b){this.placements[c].turretBuiltOver=
!0;this.placements.splice(c,1);break}},installObstacle:function(a,b,c){if(6<=a&&13>=a){this.model[b][c]=ig.game.terraintypes.unwalkable;var d=this.getCoordinatesFromTiles(b,c);this.obstacles.push(ig.game.spawnEntity(EntityObstacle,d.x,d.y,{typeOfObstacle:a,row:b,col:c}));this.graph.adjustGraph(b,c,ig.game.terraintypes.unwalkable)}else 22<=a&&25>=a?(this.model[b][c]=ig.game.terraintypes.unwalkable,this.model[b+1][c]=ig.game.terraintypes.unwalkable,this.skipTiles.push({row:b+1,col:c}),this.model[b][c+
1]=ig.game.terraintypes.unwalkable,this.skipTiles.push({row:b,col:c+1}),this.model[b+1][c+1]=ig.game.terraintypes.unwalkable,this.skipTiles.push({row:b+1,col:c+1}),d=this.getCoordinatesFromTiles(b,c),this.obstacles.push(ig.game.spawnEntity(EntityObstacle,d.x,d.y,{typeOfObstacle:a,row:b,col:c})),this.graph.adjustGraph(b,c,ig.game.terraintypes.unwalkable),this.graph.adjustGraph(b,c+1,ig.game.terraintypes.unwalkable),this.graph.adjustGraph(b+1,c,ig.game.terraintypes.unwalkable),this.graph.adjustGraph(b+
1,c+1,ig.game.terraintypes.unwalkable)):14<=a&&19>=a?(this.model[b][c]=ig.game.terraintypes.unwalkable,this.model[b][c+1]=ig.game.terraintypes.unwalkable,this.skipTiles.push({row:b,col:c+1}),d=this.getCoordinatesFromTiles(b,c),this.obstacles.push(ig.game.spawnEntity(EntityObstacle,d.x,d.y,{typeOfObstacle:a,row:b,col:c})),this.graph.adjustGraph(b,c,ig.game.terraintypes.unwalkable),this.graph.adjustGraph(b,c+1,ig.game.terraintypes.unwalkable)):(this.model[b][c]=ig.game.terraintypes.unwalkable,this.model[b+
1][c]=ig.game.terraintypes.unwalkable,this.skipTiles.push({row:b+1,col:c}),d=this.getCoordinatesFromTiles(b,c),this.obstacles.push(ig.game.spawnEntity(EntityObstacle,d.x,d.y,{typeOfObstacle:a,row:b,col:c})),this.graph.adjustGraph(b,c,ig.game.terraintypes.unwalkable),this.graph.adjustGraph(b+1,c,ig.game.terraintypes.unwalkable))},getModel:function(a,b){return!this.checkWithinModelRange(a,b)?0:this.model[a][b]},checkWithinModelRange:function(a,b){return 0>a||a>this.model.length-1||0>b||b>this.model[0].length-
1?!1:!0},getPlacement:function(a,b){for(var c=0;c<this.placements.length;c++)if(a==this.placements[c].gridPos.row&&b==this.placements[c].gridPos.col)return this.placements[c].gridPos;return!1},getTurret:function(a,b){for(var c=0;c<this.turretsAvail.list.length;c++)if(a==this.turretsAvail.list[c].gridPos.row&&b==this.turretsAvail.list[c].gridPos.col)return this.turretsAvail.list[c];return!1},checkPlacementClick:function(a,b,c,d){for(var e=0;e<this.placements.length;e++)if(c!=this.placements[e].gridPos.row&&
d!=this.placements[e].gridPos.col&&this.placements[e].checkOverlapWithPoint(a,b))return!0;return!1},stopAllTurrets:function(){for(var a=0;a<this.turretsAvail.list.length;a++)this.turretsAvail.list[a].forceStopAttack=!0},makePlacementUnclickable:function(){for(var a=0;a<this.placements.length;a++)this.placements[a].clickable=!1}})});ig.baked=!0;
ig.module("game.entities.time-bar").requires("plugins.components.in-game").defines(function(){EntityTimeBar=EntityInGame.extend({size:{x:200,y:30},timer:null,maxTime:5,timeRemaining:null,percentage:0,barType:2,barTypes:{decrement:1,increment:2},widthToDraw:0,zIndex:2101,barColor:"rgba(0,0,125,1)",forcePause:!1,init:function(a,b,c){this.parent(a,b,c);c.callback&&(this.callback=c.callback);this.timer=new ig.Timer},update:function(){this.parent();if(this.timer){switch(this.barType){case this.barTypes.decrement:this.timeRemaining=
(this.maxTime-this.timer.delta()).toFixed(2);0>this.timeRemaining&&(this.timeRemaining=0);this.percentage=(this.maxTime-this.timer.delta())/this.maxTime;this.widthToDraw=~~(this.percentage*this.size.x);break;case this.barTypes.increment:this.percentage=this.timer.delta()/this.maxTime,this.widthToDraw=~~(this.percentage*this.size.x)}this.timer.delta()>this.maxTime&&(this.callback(),this.timer.reset(),this.timerEndHandle())}},draw:function(){this.parent()},callback:function(){},timerEndHandle:function(){switch(this.barType){case this.barTypes.increment:this.timer=
null;break;case this.barTypes.decrement:this.timer=null}},pauseTimer:function(a){a&&(this.forcePause=a);this.timer&&this.forcePause&&this.timer.pause();a&&(this.forcePause=!a)},unpauseTimer:function(a){a&&(this.forcePause=a);this.timer&&this.forcePause&&this.timer.unpause();a&&(this.forcePause=!a)},flushBar:function(){this.timer?this.timer.reset():this.timer=new ig.Timer}})});ig.baked=!0;
ig.module("game.entities.health-bar").requires("plugins.components.in-game").defines(function(){EntityHealthBar=EntityInGame.extend({size:{x:236,y:26},barColor:"rgba(0,255,0,1)",zIndex:2E3,player:null,stackValue:0,finalHealthPos:0,remainder:0,finalHealthValue:0,init:function(a,b,c){this.parent(a,b,c);c.player&&(this.player=c.player);this.finalHealthValue=this.player.health+0;this.finalHealthPos=this.pos.x-this.offset.x+30+this.size.x},update:function(){this.parent();this.takeValue1AtATime();this.takeValue1AtATime();
this.takeValue1AtATime();this.takeValue1AtATime();this.takeValue1AtATime()},draw:function(){this.parent();this.drawBar()},drawBar:function(){var a=ig.system.context,b=this.pos.x-this.offset.x+30;a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[5].sx,_SPRITES.guiSprites.graphics[5].sy,_SPRITES.guiSprites.graphics[5].sw,_SPRITES.guiSprites.graphics[5].sh,b,this.pos.y-this.offset.y+6,_SPRITES.guiSprites.graphics[5].sw,_SPRITES.guiSprites.graphics[5].sh);var c=this.player.health/this.player.maxHealth;
a.fillStyle=0.5<c?"rgba(0,255,0,1)":0.25<c?"rgba(255,255,0,1)":"rgba(255,0,0,1)";var d=~~(c*this.size.x);1<c&&(d=this.size.x);this.remainder=d-(this.finalHealthPos-b);0<d&&(a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[6].sx,_SPRITES.guiSprites.graphics[6].sy,d,_SPRITES.guiSprites.graphics[6].sh,b,this.pos.y-this.offset.y+6,d,_SPRITES.guiSprites.graphics[6].sh),a.fillStyle="rgba(255,0,0,0.5)",c=this.remainder,this.finalHealthPos<b&&(this.finalHealthPos=b,c=d),a.fillRect(this.finalHealthPos,
this.pos.y-this.offset.y+6,c,_SPRITES.guiSprites.graphics[6].sh));a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[7].sx,_SPRITES.guiSprites.graphics[7].sy,_SPRITES.guiSprites.graphics[7].sw,_SPRITES.guiSprites.graphics[7].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,_SPRITES.guiSprites.graphics[7].sw,_SPRITES.guiSprites.graphics[7].sh)},reduce:function(a){this.stackValue+=a;this.finalHealthValue-=a;a=this.finalHealthValue/this.player.maxHealth;var b=~~(a*this.size.x);1<a&&(b=this.size.x);
this.finalHealthPos=this.pos.x-this.offset.x+30+b},takeValue1AtATime:function(){0<this.stackValue&&(this.stackValue--,this.player.decreaseHealth(1))}})});ig.baked=!0;ig.module("plugins.components.player-handler").defines(function(){PlayerHandler=ig.Class.extend({turretList:[],health:500,maxHealth:500,stars:200,init:function(){},increaseStars:function(a){this.stars+=a},decreaseStars:function(a){this.stars-=a},increaseHealth:function(a){this.health+=a},decreaseHealth:function(a){this.health-=a}})});
ig.baked=!0;
ig.module("plugins.components.ai-handler").defines(function(){AiHandler=ig.Class.extend({waveNumber:0,generators:[],init:function(){},addGenerator:function(a){this.generators.push(a)},getEnemiesCrossed:function(){for(var a=0,b=0;b<this.generators.length;b++)a+=this.generators[b].enemiesPassed;return a},pauseSpawning:function(){for(var a=0;a<this.generators.length;a++)this.generators[a].pause()},unpauseSpawning:function(){for(var a=0;a<this.generators.length;a++)this.generators[a].unpause()},getGeneratorsTotalHeapSize:function(){for(var a=
0,b=0;b<this.generators.length;b++)a+=this.generators[b].getSize();return a},emptyHeap:function(){for(var a=0;a<this.generators.length;a++)if(0<this.generators[a].heap.size()){var b=this.generators[a].heap.pop();b._killed||this.generators[a].heap.push(b)}},checkAllGeneratorsEmpty:function(){for(var a=!1,b=0,c=0;c<this.generators.length;c++)this.generators[c].checkDoneWithWavelist()&&b++;b>=this.generators.length&&(a=!0);return a},stopSpawning:function(){for(var a=0;a<this.generators.length;a++)this.generators[a].stopSpawning()},
speedUpAllMinions:function(){for(var a=0;a<this.generators.length;a++)if(0<this.generators[a].heap.size())for(var b=0;b<this.generators[a].heap.list.length;b++)this.generators[a].heap.list[b].tweenTime=0.05},getEnemiesLeft:function(){for(var a=[],b=0;b<this.generators.length;b++)if(0<this.generators[b].heap.size())for(var c=0;c<this.generators[b].heap.list.length;c++)a.push(this.generators[b].heap.list[c]);return a}})});ig.baked=!0;
ig.module("game.buttons.phineas-button").requires("plugins.components.button").defines(function(){EntityPhineasButton=EntityButton.extend({size:{x:120,y:92},ignorePause:!0,drawText:!1,textTimer:null,head:null,randomPhrase:0,currentSize:{x:0,y:0},maxSize:{x:0,y:0},control:null,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.bar&&this.setBar(c.bar);c.head&&(this.head=c.head);c.control&&(this.control=c.control)},update:function(){this.parent();this.currentSize.x<this.maxSize.x&&
(this.currentSize.x+=40)},setBar:function(a){this.bar=a;this.bar.callback=function(){this.clickable=!0}.bind(this)},draw:function(){this.parent();if(this.clickable)ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[19].sx,_SPRITES.gameSprites.graphics[19].sy,_SPRITES.gameSprites.graphics[19].sw,_SPRITES.gameSprites.graphics[19].sh,this.pos.x,this.pos.y,_SPRITES.gameSprites.graphics[19].sw,_SPRITES.gameSprites.graphics[19].sh);else if(ig.system.context.drawImage(this.gameImage.data,
_SPRITES.gameSprites.graphics[17].sx,_SPRITES.gameSprites.graphics[17].sy,_SPRITES.gameSprites.graphics[17].sw,_SPRITES.gameSprites.graphics[17].sh,this.pos.x,this.pos.y,_SPRITES.gameSprites.graphics[17].sw,_SPRITES.gameSprites.graphics[17].sh),this.bar&&0<this.bar.percentage){var a=~~(this.bar.percentage*_SPRITES.gameSprites.graphics[17].sw);1<this.bar.percentage&&(a=_SPRITES.gameSprites.graphics[17].sw);ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[16].sx+_SPRITES.gameSprites.graphics[16].sw-
a,_SPRITES.gameSprites.graphics[16].sy,a,_SPRITES.gameSprites.graphics[16].sh,this.pos.x+_SPRITES.gameSprites.graphics[16].sw-a,this.pos.y,a,_SPRITES.gameSprites.graphics[16].sh);ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[18].sx,_SPRITES.gameSprites.graphics[18].sy,_SPRITES.gameSprites.graphics[18].sw,_SPRITES.gameSprites.graphics[18].sh,this.pos.x+10,this.pos.y+32,_SPRITES.gameSprites.graphics[18].sw,_SPRITES.gameSprites.graphics[18].sh)}this.drawText&&this.control.gameState==
this.control.gameStates.run&&(ig.system.context.fillStyle="rgba(255,255,255,1)",this.drawPhineasDialogBox(this.pos.x,this.pos.y-250,510,150),this.currentSize.x>=this.maxSize.x&&(1<=this.randomPhrase?(ig.game.font24.draw("We're gonna need a blow torch ",this.pos.x+20,this.pos.y-230+0,ig.Font.ALIGN.LEFT),ig.game.font24.draw("and some more peanut butter. ",this.pos.x+20,this.pos.y-230+28,ig.Font.ALIGN.LEFT)):ig.game.font24.draw("Yippee ki-yay ",this.pos.x+20,this.pos.y-230+0,ig.Font.ALIGN.LEFT)),this.textTimer&&
3<this.textTimer.delta()&&(this.drawText=!1,this.textTimer=null))},redirect:function(){ig.game.paused||(this.randomPhrase=0===this.randomPhrase?1:0,this.bar.flushBar(),this.clickable=!1,this.textTimer=new ig.Timer,this.drawText=!0,this.head.fire(),this.currentSize.x=0)},drawPhineasDialogBox:function(a,b,c,d){this.maxSize.x=c;this.maxSize.y=d;ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[25].sx,_SPRITES.guiSprites.graphics[25].sy,_SPRITES.guiSprites.graphics[25].sw,_SPRITES.guiSprites.graphics[25].sh,
a,b,this.currentSize.x,this.maxSize.y)}})});ig.baked=!0;
ig.module("game.buttons.ferb-button").requires("plugins.components.button").defines(function(){EntityFerbButton=EntityButton.extend({size:{x:120,y:92},ignorePause:!0,textTimer:null,drawText:!1,randomPhrase:0,head:null,currentSize:{x:0,y:0},maxSize:{x:0,y:0},init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.bar&&this.setBar(c.bar);c.head&&(this.head=c.head)},update:function(){this.parent();this.currentSize.x<this.maxSize.x&&(this.currentSize.x+=40)},setBar:function(a){this.bar=
a;this.bar.callback=function(){this.clickable=!0}.bind(this)},draw:function(){this.parent();if(this.clickable)ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[14].sx,_SPRITES.gameSprites.graphics[14].sy,_SPRITES.gameSprites.graphics[14].sw,_SPRITES.gameSprites.graphics[14].sh,this.pos.x,this.pos.y,_SPRITES.gameSprites.graphics[14].sw,_SPRITES.gameSprites.graphics[14].sh);else if(ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[12].sx,_SPRITES.gameSprites.graphics[12].sy,
_SPRITES.gameSprites.graphics[12].sw,_SPRITES.gameSprites.graphics[12].sh,this.pos.x,this.pos.y,_SPRITES.gameSprites.graphics[12].sw,_SPRITES.gameSprites.graphics[12].sh),this.bar&&0<this.bar.percentage){var a=~~(this.bar.percentage*_SPRITES.gameSprites.graphics[12].sw);1<this.bar.percentage&&(a=_SPRITES.gameSprites.graphics[12].sw);ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[11].sx,_SPRITES.gameSprites.graphics[11].sy,a,_SPRITES.gameSprites.graphics[11].sh,this.pos.x,
this.pos.y,a,_SPRITES.gameSprites.graphics[11].sh);ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[13].sx,_SPRITES.gameSprites.graphics[13].sy,_SPRITES.gameSprites.graphics[13].sw,_SPRITES.gameSprites.graphics[13].sh,this.pos.x+10,this.pos.y+32,_SPRITES.gameSprites.graphics[13].sw,_SPRITES.gameSprites.graphics[13].sh)}this.drawText&&(ig.system.context.fillStyle="rgba(255,255,255,1)",this.drawFerbDialogBox(this.pos.x-320,this.pos.y-250,440,150),this.currentSize.x>=this.maxSize.x&&
(1<=this.randomPhrase?(ig.game.font24.draw("Often, the most fun can be",this.pos.x-300,this.pos.y-230+0,ig.Font.ALIGN.LEFT),ig.game.font24.draw("found in your own backyard.",this.pos.x-300,this.pos.y-230+28,ig.Font.ALIGN.LEFT)):(ig.game.font24.draw("Time to change the batteries",this.pos.x-300,this.pos.y-230+0,ig.Font.ALIGN.LEFT),ig.game.font24.draw("on the tiger excluder.",this.pos.x-300,this.pos.y-230+28,ig.Font.ALIGN.LEFT))),this.textTimer&&3<this.textTimer.delta()&&(this.drawText=!1,this.textTimer=
null))},redirect:function(){ig.game.paused||(this.randomPhrase=0===this.randomPhrase?1:0,this.bar.flushBar(),this.clickable=!1,this.textTimer=new ig.Timer,this.drawText=!0,this.head.fire(),this.currentSize.x=0)},drawFerbDialogBox:function(a,b,c,d){this.maxSize.x=c;this.maxSize.y=d;ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[25].sx,_SPRITES.guiSprites.graphics[25].sy,_SPRITES.guiSprites.graphics[25].sw,_SPRITES.guiSprites.graphics[25].sh,a,b,this.currentSize.x,this.maxSize.y)}})});
ig.baked=!0;
ig.module("game.buttons.reset-button").requires("plugins.components.button").defines(function(){EntityResetButton=EntityButton.extend({size:{x:90,y:68},ignorePause:!0,name:"resetbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&(ig.system.context.fillStyle="rgba(0,0,255,0.5)",ig.system.context.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y),ig.system.context.fillStyle="rgba(255,255,255,1)",ig.system.context.fillText("Reset",this.pos.x,
this.pos.y+this.size.y-10))},redirect:function(){console.log("click");ig.game.clearEnemiesArray();ig.game.director.jumpTo(LevelGame)}})});ig.baked=!0;
ig.module("game.buttons.play-button").requires("plugins.components.button").defines(function(){EntityPlayButton=EntityButton.extend({size:{x:157,y:65},ignorePause:!0,name:"playbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[15].sx,_SPRITES.guiSprites.graphics[15].sy,_SPRITES.guiSprites.graphics[15].sw,_SPRITES.guiSprites.graphics[15].sh,
this.pos.x,this.pos.y,this.size.x,this.size.y)},redirect:function(){}})});ig.baked=!0;
ig.module("game.entities.projectiles.zap-lightning").requires("game.entities.projectiles.projectile").defines(function(){EntityZapLightning=EntityProjectile.extend({size:{x:10,y:10},checkAgainst:ig.Entity.TYPE.A,damage:3,inView:!0,ignoreInView:!0,growTimer:null,attackTarget:null,speed:0,speedVector:{x:0,y:0},origin:null,ignoreRange:!1,powerCount:0,numTicks:0,ignorePause:!0,init:function(a,b,c){this.parent(a,b,c);this.aliveTimer=c.onTimer?new ig.Timer:null;c.ignoreRange&&(this.ignoreRange=c.ignoreRange);
c.origin&&(this.origin=c.origin);c.speed&&(this.speed=c.speed);this.attackTarget=c.target?c.target:null;this.growTimer=new ig.Timer;this.dotTimer=new ig.Timer;this.soundTimer=new ig.Timer},update:function(){this.parent();if(this.aliveTimer){if(ig.game.paused){this.aliveTimer.pause();return}this.aliveTimer.unpause();5<this.aliveTimer.delta()&&(this.aliveTimer=null,this.kill())}this.attackTarget&&(this.attackTarget._killed||this.attackTarget.checkDeath()?(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),
this.attackTarget=null,this.kill()):(this.pos.x=this.attackTarget.pos.x+this.attackTarget.size.x/2,this.pos.y=this.attackTarget.pos.y+this.attackTarget.size.y/2))},draw:function(){this.parent();this.lightningStrike(this.origin.pos.x-this.origin.fireOffset.x,this.origin.pos.y-this.origin.fireOffset.y,this.pos.x,this.pos.y,"#ffffff","#cfefff",!0)},lightningStrike:function(a,b,c,d,e,f,h){var g=ig.system.context,j=c-a,k=d-b,j=Math.sqrt(j*j+k*k),k=j/3,n=a,l=b;h&&(g.strokeStyle=e,g.fillStyle=e,g.lineWidth=
1,g.beginPath(),g.arc(a,b,7+4*Math.random(),0,2*Math.PI,!1),g.fill());for(var m=0;3>=m;m++){var p=k*m/j,r=p*c+(1-p)*a,p=p*d+(1-p)*b;0!==m&&3!==m&&(r+=Math.random()*k-k/2,p+=Math.random()*k-k/2);g.strokeStyle=e;g.lineWidth=6;g.beginPath();g.moveTo(n,l);g.lineTo(r,p);g.closePath();g.stroke();g.fillStyle=e;g.beginPath();g.arc(r,p,3,0,2*Math.PI,!1);g.fill();n=r;l=p}h&&(g.strokeStyle=f,g.fillStyle=f,g.lineWidth=2,g.beginPath(),g.arc(a,b,4+4*Math.random(),0,2*Math.PI,!1),g.fill())},reset:function(a,b,c){this.parent(a,
b,c);this.aliveTimer=c.onTimer?new ig.Timer:null;c.ignoreRange&&(this.ignoreRange=c.ignoreRange);c.origin&&(this.origin=c.origin);c.speed&&(this.speed=c.speed);this.attackTarget=c.target?c.target:null;this.growTimer=new ig.Timer;this.dotTimer=new ig.Timer;this.soundTimer=new ig.Timer},check:function(a){a===this.attackTarget&&this.dotTimer&&0.05<this.dotTimer.delta()&&(ig.game.forceStopLightningSFX||ig.soundHandler.playSound(ig.soundHandler.SOUNDID.bzzlong),a.damage(this.damage+this.powerCount),2>
this.numTicks?this.numTicks++:(this.numTicks=0,this.powerCount+=1,6<=this.powerCount&&(this.powerCount=6)),this.dotTimer.reset());if(!this.ignoreRange){a=this.origin.pos.x+this.origin.size.x/2-this.pos.x;var b=this.origin.pos.y+this.origin.size.y/2-this.pos.y;a*a+b*b<this.origin.attackRadius||this.kill()}}})});ig.baked=!0;
ig.module("game.entities.turrets.lightning-turret").requires("game.entities.turrets.turret","game.entities.projectiles.zap-lightning").defines(function(){EntityLightningTurret=EntityTurret.extend({size:{x:48,y:48},offset:{x:18,y:40,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/zapper-anim.png",80,91),target:null,idleCooldown:0.9,invalid:!1,classType:"EntityLightningTurret",name:"lightningturret",gridPos:{row:1,col:1},attackRadius:12E4,currentTarget:null,fireOffset:{x:-22,y:14},lightningProjectile:null,
init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4,5]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col},stopFiring:function(){this.parent();this.lightningProjectile&&(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),this.lightningProjectile.kill(),this.lightningProjectile=null,this.idleTimer=new ig.Timer)},attack:function(){var a=this.pos.x+this.size.x/2,
b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.currentAnim=this.anims.idle.rewind(),this.searchEnemy(a,b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.idleTimer=new ig.Timer;this.lightningProjectile=this.currentTarget=null;ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);
return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.idleTimer=new ig.Timer,this.currentTarget=this.lightningProjectile=null,this.currentAnim=this.anims.idle.rewind(),ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);else{this.currentAnim=this.anims.fire.rewind();
var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(this.firingAngle=Math.atan2(-d,-c)*(180/Math.PI),this.firingAngle=0<this.firingAngle?this.firingAngle:this.firingAngle+360,null==this.lightningProjectile?(this.currentAnim=this.anims.fire.rewind(),this.lightningProjectile=ig.game.spawnEntity(EntityZapLightning,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{target:this.currentTarget,origin:this,
onTimer:!0})):this.lightningProjectile._killed&&(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),this.lightningProjectile=null)):(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),this.idleTimer=new ig.Timer,this.currentTarget=this.lightningProjectile=null)}},draw:function(){this.parent();if(this.buildPlaceHolder){var a=ig.system.context;a.beginPath();a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI);a.lineWidth=4;a.closePath();a.fillStyle=
"rgba(255,0,0,0.5)";a.fill()}},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){}})});ig.baked=!0;
ig.module("game.entities.projectiles.perry-platypus").requires("game.entities.projectiles.projectile").defines(function(){EntityPerryPlatypus=EntityProjectile.extend({size:{x:48,y:128},offset:{x:0,y:0},animSheet:new ig.AnimationSheet("media/graphics/perry-flying.png",48,26),checkAgainst:ig.Entity.TYPE.A,damage:240,inView:!0,ignoreInView:!0,velocityVector:{x:0,y:0,z:0},angleVector:{xy:0,yz:0,xz:0},gravityVector:{x:0,y:500,z:1E3},launchSpeed:500,currentHeight:0,targetAngle:0,attackTarget:null,entitiesTouched:[],
init:function(a,b,c){this.parent(a,b,c);this.size={x:60,y:96};this.currentHeight=0;this.entitiesTouched=[];c.target&&(this.attackTarget=c.target);c.velocity&&(this.velocityVector=c.velocity,this.launchSpeed=Math.sqrt(this.velocityVector.y*this.velocityVector.y+this.velocityVector.z*this.velocityVector.z));this.angleVector.xy=this.velocityVector.x/this.velocityVector.y;this.angleVector.yz=this.velocityVector.z/this.velocityVector.y;0<this.velocityVector.x&&(this.angleVector.xz=this.velocityVector.z/
this.velocityVector.x);this.addAnim("idle",0.1,[0,1,2])},update:function(){this.parent();var a=this.velocityVector.z*ig.system.tick;this.velocityVector.z-=this.gravityVector.z*ig.system.tick;this.currentHeight+=this.velocityVector.z*ig.system.tick;if(this.attackTarget){this.attackTarget.checkDeath()&&this.kill();var b=this.attackTarget.pos.x+this.attackTarget.size.x/2-this.attackTarget.headOffset.x-(this.pos.x+this.size.x/2),c=this.attackTarget.pos.y+this.attackTarget.size.y/2-2*this.attackTarget.headOffset.y-
(this.pos.y+this.size.y/2);this.size.x=Math.abs(b)+30;this.size.y=Math.abs(c)+(this.attackTarget.headOffset.y+20);var d=Math.atan2(c,b),e=700*Math.sin(Math.PI/2)/this.gravityVector.z,d=0<d?d:d+2*Math.PI;this.currentAnim.flip.x=d>=Math.PI?!0:!1;b=Math.sqrt(b*b+c*c)/(e/2);this.velocityVector.y=Math.sin(d)*b;this.velocityVector.x=Math.cos(d)*b;this.pos.x+=this.velocityVector.x*ig.system.tick-a/2-5;this.pos.y+=this.velocityVector.y*ig.system.tick-a/2}0>this.currentHeight&&0>this.velocityVector.z&&this.kill();
d+=Math.PI/2;this.currentAnim.angle=d},reset:function(a,b,c){this.parent(a,b,c);this.size={x:60,y:96};this.currentHeight=0;this.entitiesTouched=[];c.target&&(this.attackTarget=c.target);c.velocity&&(this.velocityVector=c.velocity,this.launchSpeed=Math.sqrt(this.velocityVector.y*this.velocityVector.y+this.velocityVector.z*this.velocityVector.z));this.angleVector.xy=this.velocityVector.x/this.velocityVector.y;this.angleVector.yz=this.velocityVector.z/this.velocityVector.y;0<this.velocityVector.x&&(this.angleVector.xz=
this.velocityVector.z/this.velocityVector.x)},check:function(a){30>this.currentHeight&&0>this.velocityVector.z&&a===this.attackTarget&&(ig.game.spawnEntity(EntityPerryAttack,a.pos.x,a.pos.y,{enemy:a,damage:this.damage}),this.kill())}})});ig.baked=!0;
ig.module("game.entities.turrets.perrynator").requires("game.entities.turrets.turret","game.entities.projectiles.perry-platypus").defines(function(){EntityPerrynator=EntityTurret.extend({size:{x:48,y:48},offset:{x:-4,y:20,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/perrynator-anim.png",52,65),target:null,idleCooldown:3,invalid:!1,classType:"EntityPerrynator",name:"perrynator",gridPos:{row:1,col:1},attackRadius:14E4,currentTarget:null,fireOffset:{x:-28,y:54},perry:null,firingAngle:0,init:function(a,
b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4,5]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.currentAnim=this.anims.idle.rewind(),this.searchEnemy(a,b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=
this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=
null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(this.firingAngle=270,ig.soundHandler.playSound(ig.soundHandler.SOUNDID.swoosh),ig.game.spawnEntity(EntityPerryPlatypus,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{velocity:{x:0,y:0,z:700},target:this.currentTarget}),this.idleTimer=new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();var a=ig.system.context;this.buildPlaceHolder&&
(a.beginPath(),a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI),a.lineWidth=4,a.closePath(),a.fillStyle="rgba(255,0,0,0.5)",a.fill())},pauseTimer:function(){},unpauseTimer:function(){}})});ig.baked=!0;
ig.module("game.entities.decals.glove-explode").requires("game.entities.decals.effect").defines(function(){EntityGloveExplode=EntityEffect.extend({size:{x:48,y:48},inView:!0,ignoreInView:!0,animSheet:new ig.AnimationSheet("media/graphics/glove-explode.png",120,146),zIndex:1600,init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4,5,6,7],!0);this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();1<=this.currentAnim.loopCount&&this.kill()},reset:function(a,b,
c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4,5,6,7],!0);this.currentAnim=this.anims.idle.rewind()}})});ig.baked=!0;
ig.module("game.entities.projectiles.rocket-glove").requires("game.entities.projectiles.projectile","game.entities.decals.glove-explode").defines(function(){EntityRocketGlove=EntityProjectile.extend({size:{x:20,y:20},offset:{x:32,y:17},animSheet:new ig.AnimationSheet("media/graphics/rocket-glove.png",64,35),checkAgainst:ig.Entity.TYPE.A,damage:340,inView:!0,ignoreInView:!0,attackTarget:null,speed:0,init:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1]);
c.target&&(this.attackTarget=c.target)},update:function(){this.parent();(0>this.pos.y||this.pos.y>ig.system.canvas.height||0>this.pos.x||this.pos.x>ig.system.canvas.width)&&this.kill();if(!ig.game.paused&&this.attackTarget)if(this.attackTarget._killed)this.attackTarget=null,this.kill();else{var a=Math.atan2(this.attackTarget.pos.y+this.attackTarget.size.y/2-this.pos.y+this.size.y/2,this.attackTarget.pos.x+this.attackTarget.size.x/2-this.pos.x+this.size.x/2),a=0<a?a:a+2*Math.PI;this.currentAnim.angle=
a+Math.PI;this.vel.y=Math.sin(a)*this.speed;this.vel.x=Math.cos(a)*this.speed;this.targetAngle=Math.atan(this.vel.y/-this.vel.x)}},draw:function(){this.parent()},reset:function(a,b,c){this.parent(a,b,c);c.speed&&(this.speed=c.speed);this.addAnim("idle",0.1,[0,1,2]);c.target&&(this.attackTarget=c.target)},check:function(a){this.pos.x>=a.pos.x+a.size.x/10&&this.pos.x<=a.pos.x+a.size.x-a.size.x/10&&(ig.game.spawnEntity(EntityGloveExplode,this.pos.x-60,this.pos.y-73),this.kill(),a.damage(this.damage))}})});
ig.baked=!0;
ig.module("game.entities.turrets.boxomator").requires("game.entities.turrets.turret","game.entities.projectiles.rocket-glove").defines(function(){EntityBoxomator=EntityTurret.extend({size:{x:48,y:48},offset:{x:25,y:20,w:0,h:8},animSheet:new ig.AnimationSheet("media/graphics/boxomator-anim.png",82,67),target:null,idleCooldown:0.4,invalid:!1,classType:"EntityBoxomator",name:"boxomator",gridPos:{row:1,col:1},projectileVector:{x:0,y:-10},firingAngle:0,attackRadius:18E4,currentTarget:null,fireOffset:{x:0,
y:22},fixPos:{x:0,y:0},init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[0]);this.addAnim("fire",0.1,[0,1,2,3,4]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col;this.projectileVector.y=-1E3;this.projectileVector.x=0;this.fixPos.x=this.pos.x;this.fixPos.y=this.pos.y},update:function(){this.parent()},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.searchEnemy(a,
b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},
attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius&&this.currentTarget.pos.y<this.pos.y?(this.currentAnim=this.anims.fire.rewind(),ig.game.spawnEntity(EntityRocketGlove,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{speed:2E3,target:this.currentTarget}),ig.soundHandler.playSound(ig.soundHandler.SOUNDID.swoosh),
this.idleTimer=new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();if(this.buildPlaceHolder){var a=ig.system.context;a.beginPath();a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI);a.lineWidth=4;a.closePath();a.fillStyle="rgba(255,0,0,0.5)";a.fill()}},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){},searchEnemy:function(a,b){var c=ig.game.allEnemies;this.currentAnim=this.anims.idle.rewind();for(var d=0;d<
c.length;d++)if(c[d]&&!c[d]._killed&&c[d].pos.y<this.pos.y){var e=a-(c[d].pos.x+c[d].size.x/2),f=b-(c[d].pos.y+c[d].size.y/2);if(e*e+f*f<this.attackRadius){this.currentTarget=c[d];break}}else if(0<c.length&&(c[d].checkDeath()||c[d]._killed))c.splice(d,1),d--}})});ig.baked=!0;
ig.module("game.entities.decals.mine-explode").requires("game.entities.decals.effect").defines(function(){EntityMineExplode=EntityEffect.extend({size:{x:121,y:174},offset:{x:60,y:0},inView:!0,ignoreInView:!0,animSheet:new ig.AnimationSheet("media/graphics/mine-explode.png",242,348),zIndex:2E3,damage:30,checkAgainst:ig.Entity.TYPE.A,entitiesTouched:[],init:function(a,b,c){this.parent(a,b,c);this.entitiesTouched=[];this.addAnim("idle",0.1,[0,1,2,3,4,5],!0);this.currentAnim=this.anims.idle.rewind();
c.damage&&(this.damage=c.damage);ig.soundHandler.playSound(ig.soundHandler.SOUNDID.thunder)},update:function(){this.parent();if(1<=this.currentAnim.loopCount){for(var a=0;a<this.entitiesTouched.length;a++)this.entitiesTouched[a].immuneToMineDamage=!1;this.kill()}},reset:function(a,b,c){this.parent(a,b,c);this.entitiesTouched=[];this.addAnim("idle",0.1,[0,1,2,3,4,5],!0);this.currentAnim=this.anims.idle.rewind();c.damage&&(this.damage=c.damage);ig.soundHandler.playSound(ig.soundHandler.SOUNDID.thunder)},
check:function(a){a.immuneToMineDamage||(this.entitiesTouched.push(a),a.damage(this.damage),a.immuneToMineDamage=!0)}})});ig.baked=!0;
ig.module("game.entities.projectiles.mine").requires("game.entities.projectiles.projectile","game.entities.decals.mine-explode").defines(function(){EntityMine=EntityProjectile.extend({size:{x:10,y:10},offset:{x:10,y:40},checkAgainst:ig.Entity.TYPE.A,inView:!0,ignoreInView:!0,growTimer:null,attackTarget:null,speed:0,speedVector:{x:0,y:0},origin:null,ignoreRange:!1,powerCount:0,numTicks:0,ignorePause:!0,animSheet:new ig.AnimationSheet("media/graphics/mine-tele.png",46,96),detonationTimer:null,attackRadius:5E4,
damage:100,init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4],!0);c.speed&&(this.speed=c.speed);c.target?(this.attackTarget=c.target,this.zIndex=this.attackTarget.zIndex-1,ig.game.sortEntitiesDeferred()):this.attackTarget=null},update:function(){this.parent();(0>this.pos.y||this.pos.y>ig.system.canvas.height||0>this.pos.x||this.pos.x>ig.system.canvas.width)&&this.kill();1<=this.currentAnim.loopCount&&(this.detonationTimer?1<this.detonationTimer.delta()&&(ig.game.spawnEntity(EntityMineExplode,
this.pos.x+this.size.x-60,this.pos.y+this.size.y-150,{damage:this.damage}),this.detonate(),this.detonationTimer=null,this.kill()):this.detonationTimer=new ig.Timer)},detonate:function(){},reset:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4],!0);c.speed&&(this.speed=c.speed);c.target?(this.attackTarget=c.target,this.zIndex=this.attackTarget.zIndex-1,ig.game.sortEntitiesDeferred()):this.attackTarget=null;this.currentAnim=this.anims.idle.rewind()},check:function(){}})});
ig.baked=!0;
ig.module("game.entities.turrets.mineninator").requires("game.entities.turrets.turret","game.entities.projectiles.mine").defines(function(){EntityMineninator=EntityTurret.extend({size:{x:48,y:48},offset:{x:0,y:20,w:0,h:0},animSheet:new ig.AnimationSheet("media/graphics/mineninator-anim.png",50,69),target:null,idleCooldown:0.4,invalid:!1,classType:"EntityMineninator",name:"mineninator",gridPos:{row:1,col:1},projectileVector:{x:0,y:-10},firingAngle:0,attackRadius:1E5,currentTarget:null,fireOffset:{x:-20,
y:22},fixPos:{x:0,y:0},init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);this.addAnim("idle",0.1,[7]);this.addAnim("fire",0.1,[6,5,4,3,2,1,0]);this.currentAnim=this.anims.idle.rewind();this.zIndex=this.gridPos.row+this.gridPos.col;this.projectileVector.y=-1E3;this.projectileVector.x=0;this.fixPos.x=this.pos.x;this.fixPos.y=this.pos.y},update:function(){this.parent()},attack:function(){var a=this.pos.x+this.size.x/2,b=this.pos.y+this.size.y/2;if(null==this.currentTarget)this.searchEnemy(a,
b),this.currentTarget&&(this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b));else{if(this.currentTarget._killed||this.currentTarget.checkDeath()){this.currentTarget=null;this.currentAnim=this.anims.idle.rewind();return}this.currentAnim!==this.anims.fire?this.currentAnim=this.anims.fire.rewind():this.currentAnim.frame>=this.currentAnim.sequence.length-2&&this.attackEnemyTarget(a,b)}ig.game.sortEntitiesDeferred()},
attackEnemyTarget:function(a,b){if(this.currentTarget._killed||this.currentTarget.checkDeath())this.currentTarget=null;else{var c=a-(this.currentTarget.pos.x+this.currentTarget.size.x/2),d=b-(this.currentTarget.pos.y+this.currentTarget.size.y/2);c*c+d*d<=this.attackRadius?(ig.game.spawnEntity(EntityMine,this.currentTarget.pos.x+this.currentTarget.size.x/2-5,this.currentTarget.pos.y+this.currentTarget.size.y-10,{target:this.currentTarget}),this.idleTimer=new ig.Timer):this.currentTarget=null}},draw:function(){this.parent();
if(this.buildPlaceHolder){var a=ig.system.context;a.beginPath();a.arc(this.pos.x+this.size.x/2,this.pos.y+this.size.y/2,Math.sqrt(this.attackRadius),0,2*Math.PI);a.lineWidth=4;a.closePath();a.fillStyle="rgba(255,0,0,0.5)";a.fill()}},drawWithContext:function(){},pauseTimer:function(){},unpauseTimer:function(){}})});ig.baked=!0;
ig.module("game.controllers.turret-selection-controller").requires("plugins.components.control","game.buttons.turret-button","game.buttons.sell-button","game.entities.turrets.zap-turret","game.entities.turrets.lightning-turret","game.entities.turrets.perrynator","game.buttons.cancel-button","game.entities.turrets.boxomator","game.entities.turrets.mineninator").defines(function(){EntityTurretSelectionController=EntityControl.extend({size:{x:239,y:239},offset:{x:119,y:119},showWheel:!1,radius:80,zIndex:2099,
turretButtons:[],sellButton:null,anglesForButtons:[270,330,30,90,150,210],radiansForButtons:[4.71239,5.7596,0.5236,1.5707,2.618,3.665],currentTurret:null,currentPlacement:null,control:null,init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);this.closeButton=ig.game.spawnEntity(EntityCancelButton,0,0);this.closeButton.redirect=function(){this.control.hideTurretSelectionWheel()}.bind(this);this.closeButton.disableButton();this.defineTurrets()},update:function(){this.parent();
for(var a=0;a<this.radiansForButtons.length;a++)this.turretButtons[a]&&(this.turretButtons[a].pos.x=this.pos.x-this.turretButtons[a].size.x/2+~~(this.radius*Math.cos(this.radiansForButtons[a])),this.turretButtons[a].pos.y=this.pos.y-this.turretButtons[a].size.y/2+~~(this.radius*Math.sin(this.radiansForButtons[a])));this.closeButton.pos.x=this.pos.x-this.closeButton.size.x/2;this.closeButton.pos.y=this.pos.y-this.closeButton.size.y/2},draw:function(){this.parent();if(this.showWheel){var a=ig.system.context;
this.control.notEnoughStarsTimer?a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[41].sx,_SPRITES.guiSprites.graphics[41].sy,_SPRITES.guiSprites.graphics[41].sw,_SPRITES.guiSprites.graphics[41].sh,this.pos.x-this.offset.x,this.pos.y-this.offset.y,_SPRITES.guiSprites.graphics[41].sw,_SPRITES.guiSprites.graphics[41].sh):a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[17].sx,_SPRITES.guiSprites.graphics[17].sy,_SPRITES.guiSprites.graphics[17].sw,_SPRITES.guiSprites.graphics[17].sh,
this.pos.x-this.offset.x,this.pos.y-this.offset.y,_SPRITES.guiSprites.graphics[17].sw,_SPRITES.guiSprites.graphics[17].sh)}},hideTurrets:function(){for(var a=0;a<this.turretButtons.length;a++)this.turretButtons[a].disableButton();this.control.isTutorialCloseButtonLock||this.closeButton.disableButton()},showTurrets:function(){for(var a=0;a<this.turretButtons.length;a++)this.turretButtons[a].enableButton();this.control.isTutorialCloseButtonLock||this.closeButton.enableButton()},installTurret:function(a,
b,c,d,e){a=ig.game.spawnEntity(a,b,c,{row:d,col:e,control:this.control});this.control.grid.installTurret(a);a.zIndex=d+e;ig.game.sortEntitiesDeferred()},checkTurretButtons:function(){for(var a=0;a<this.turretButtons.length;a++)if(this.turretButtons[a].checkOverlapWithPointer())return!0;return!1},checkButtons:function(){return this.closeButton.checkOverlapWithPointer()||this.checkTurretButtons()?!0:!1},defineTurrets:function(){var a=6;this.control.isTutorial&&(a=1);switch(ig.game.currentLevel){case 1:a=
1;break;case 2:a=2;break;case 3:a=3;break;case 4:a=4;break;case 5:a=5}for(var b="EntityLightningTurret EntityFridgeORator EntityPillowCannon EntityPerrynator EntityMineninator EntityBoxomator".split(" "),c=0;c<a;c++){var d=b[c];switch(d){case "EntityZapTurret":var e=_TURRETSCOST.zapTurret;break;case "EntityLightningTurret":e=_TURRETSCOST.zapTurret;break;case "EntityPillowCannon":e=_TURRETSCOST.pillowcannon;break;case "EntityFridgeORator":e=_TURRETSCOST.fridgeorator;break;case "EntityPerrynator":e=
_TURRETSCOST.perrynator;break;case "EntityBoxomator":e=_TURRETSCOST.boxomator;break;case "EntityMineninator":e=_TURRETSCOST.mineninator}this.turretButtons.push(ig.game.spawnEntity(EntityTurretButton,0,0,{turretType:d,cost:e}));this.turretButtons[c].redirect=function(a,b){this.control.playerHandler.stars>=a?this.control.grid.model[this.currentPlacement.gridPos.row][this.currentPlacement.gridPos.col]==ig.game.terraintypes.placement&&(this.control.playerHandler.decreaseStars(a),this.installTurret(b,
this.currentPlacement.pos.x,this.currentPlacement.pos.y,this.currentPlacement.gridPos.row,this.currentPlacement.gridPos.col),this.control.hideTurretSelectionWheel()):this.control.displayNotEnoughStars()}.bind(this,e,d);this.turretButtons[c].setSize(79,92);this.turretButtons[c].setOriSize(79,92);this.turretButtons[c].disableButton()}}})});ig.baked=!0;
ig.module("game.entities.tree").requires("plugins.components.in-game").defines(function(){EntityTree=EntityInGame.extend({size:{x:48,y:48},zIndex:1101,init:function(a,b,c){this.parent(a,b,c)},draw:function(){this.parent();ig.system.context.drawImage(this.gameImage.data,_SPRITES.gameSprites.graphics[15].sx,_SPRITES.gameSprites.graphics[15].sy,_SPRITES.gameSprites.graphics[15].sw,_SPRITES.gameSprites.graphics[15].sh,this.pos.x,this.pos.y,_SPRITES.gameSprites.graphics[15].sw,_SPRITES.gameSprites.graphics[15].sh)}})});
ig.baked=!0;
ig.module("game.buttons.wheel-button").requires("plugins.components.button").defines(function(){EntityWheelButton=EntityButton.extend({size:{x:250,y:68},ignorePause:!0,name:"wheelbutton",init:function(a,b,c){this.parent(a,b,c);c.control&&(this.control=c.control);this.setOriSize(this.size.x,this.size.y)},redirect:function(){},draw:function(){this.parent();this.clickable&&(ig.system.context.fillStyle=this.control.turretSelectionControl.showWheel?"rgba(0,255,255,0.5)":"rgba(0,0,255,0.5)",ig.system.context.fillRect(this.pos.x,
this.pos.y,this.size.x,this.size.y),ig.system.context.fillStyle="rgba(255,255,255,1)",ig.system.context.fillText("Select Turrets",this.pos.x+22,this.pos.y+this.size.y-12))}})});ig.baked=!0;
ig.module("game.entities.decals.phineas-effect").requires("game.entities.decals.effect").defines(function(){EntityPhineasEffect=EntityEffect.extend({size:{x:48,y:48},inView:!0,ignoreInView:!0,pullSheet:new ig.AnimationSheet("media/graphics/phineas-pull.png",173,161),pushSheet:new ig.AnimationSheet("media/graphics/phineas-push.png",211,118),zIndex:1501,init:function(a,b,c){this.parent(a,b,c);this.animSheet=this.pullSheet;this.addAnim("pull",0.1,[0,1,2,3]);this.animSheet=this.pushSheet;this.addAnim("push",
0.15,[0,1,2,3,4]);this.setPull()},setPull:function(){this.currentAnim=this.anims.pull.rewind()},setPush:function(){this.currentAnim=this.anims.push.rewind()},reset:function(a,b,c){this.parent(a,b,c);this.animSheet=this.pullSheet;this.addAnim("pull",0.1,[0,1,2,3]);this.animSheet=this.pushSheet;this.addAnim("push",0.15,[0,1,2,3,4]);this.setPull()}})});ig.baked=!0;
ig.module("game.entities.phineas-head").requires("plugins.components.in-game","game.entities.decals.phineas-effect").defines(function(){EntityPhineasHead=EntityInGame.extend({size:{x:86,y:137},idleAnimSheet:new ig.AnimationSheet("media/graphics/phineas-idle.png",123,97),fireAnimSheet:new ig.AnimationSheet("media/graphics/phineas-fire.png",117,100),zIndex:1201,init:function(a,b,c){this.parent(a,b,c);this.animSheet=this.idleAnimSheet;this.addAnim("idle",0.1,[0,1,2,3,3,3,2,1,0]);this.animSheet=this.fireAnimSheet;
this.addAnim("fire",0.15,[0,1,2,3]);this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();this.currentAnim===this.anims.fire&&0<this.currentAnim.loopCount&&(this.currentAnim=this.anims.idle.rewind(),this.offset={x:0,y:0})},fire:function(){ig.soundHandler.playSound(ig.soundHandler.SOUNDID.vacuum);this.offset={x:6,y:5};this.currentAnim=this.anims.fire.rewind();this.currentAnim.angle=10*Math.PI/180;null==this.phineasEffect&&(this.phineasEffect=ig.game.spawnEntity(EntityPhineasEffect,
this.pos.x+180,this.pos.y-50));for(var a=this.getAllEnemies(),b=0;b<a.length;b++){var c=a[b];c.stopTweens();c.hardCollide=!0;c.beingActedOn=!0;c.tween({pos:{x:this.pos.x+250,y:this.pos.y},targetAngle:360},0.4,{onComplete:function(a){var b=48*~~(5*Math.random())+480;this.phineasEffect.setPush();a.tween({pos:{x:b,y:-96},targetAngle:0},0.5,{onComplete:function(a){this.phineasEffect&&(this.phineasEffect.kill(),this.phineasEffect=null);a.beingActedOn=!1;a.canMove=!0;a.damage(Math.floor(0.2*a.maxHealth))}.bind(this,
a),easing:ig.Tween.Easing.Linear.EaseNone}).start()}.bind(this,c),easing:ig.Tween.Easing.Linear.EaseNone}).start()}},getAllEnemies:function(){return ig.game.allEnemies}})});ig.baked=!0;
ig.module("game.entities.decals.ferb-effect").requires("game.entities.decals.effect").defines(function(){EntityFerbEffect=EntityInGame.extend({size:{x:48,y:48},inView:!0,ignoreInView:!0,animSheet:new ig.AnimationSheet("media/graphics/ferb-weapon-spark.png",205,202),lightning:null,zIndex:1501,aliveTimer:null,init:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4,5,6]);this.currentAnim=this.anims.idle.rewind();c.lightning&&(this.lightning=c.lightning);this.aliveTimer=new ig.Timer},
update:function(){this.parent();this.aliveTimer&&5<this.aliveTimer.delta()&&(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),this.kill())},reset:function(a,b,c){this.parent(a,b,c);this.addAnim("idle",0.1,[0,1,2,3,4,5,6]);this.currentAnim=this.anims.idle.rewind();c.lightning&&(this.lightning=c.lightning);this.aliveTimer=new ig.Timer}})});ig.baked=!0;
ig.module("game.entities.ferb-head").requires("plugins.components.in-game","game.entities.projectiles.zap-lightning","game.entities.decals.ferb-effect").defines(function(){EntityFerbHead=EntityInGame.extend({size:{x:48,y:48},idleAnimSheet:new ig.AnimationSheet("media/graphics/ferb-idle.png",86,137),fireAnimSheet:new ig.AnimationSheet("media/graphics/ferb-fire.png",77,129),zIndex:1201,fireOffset:{x:180,y:-70},lightningArray:[],init:function(a,b,c){this.parent(a,b,c);this.animSheet=this.idleAnimSheet;
this.addAnim("idle",0.1,[0,1,2,3,3,3,2,1]);this.animSheet=this.fireAnimSheet;this.addAnim("fire",0.15,[0,1,2,3]);this.currentAnim=this.anims.idle.rewind()},update:function(){this.parent();this.currentAnim===this.anims.fire&&0<this.currentAnim.loopCount&&(this.currentAnim=this.anims.idle.rewind(),this.offset={x:0,y:0},this.currentAnim.angle=0)},fire:function(){this.ferbEffect&&this.ferbEffect.kill();this.offset={x:-3,y:-8};this.currentAnim=this.anims.fire.rewind();this.currentAnim.angle=10*Math.PI/
180;for(var a=this.getAllEnemies(),b=[],c=0;c<a.length;c++)b.push(ig.game.spawnEntity(EntityZapLightning,this.pos.x-this.fireOffset.x,this.pos.y-this.fireOffset.y,{target:a[c],origin:this,ignoreRange:!0,onTimer:!0}));this.ferbEffect=ig.game.spawnEntity(EntityFerbEffect,this.pos.x-this.fireOffset.x-100,this.pos.y-this.fireOffset.y-100,{lightning:b})},getAllEnemies:function(){return ig.game.allEnemies}})});ig.baked=!0;
ig.module("game.entities.roof").requires("plugins.components.in-game","game.entities.phineas-head","game.entities.ferb-head").defines(function(){EntityRoof=EntityInGame.extend({size:{x:1024,y:175},img:new ig.Image("media/graphics/roof.png"),zIndex:1200,phineasHead:null,ferbHead:null,drawArrowOverRoof:!1,yOffset:0,toOffset:2,offsetTimer:null,init:function(a,b,c){this.parent(a,b,c);this.phineasHead=ig.game.spawnEntity(EntityPhineasHead,74,550);this.ferbHead=ig.game.spawnEntity(EntityFerbHead,820,538);
this.offsetTimer=new ig.Timer},update:function(){this.parent();this.offsetTimer&&0.05<this.offsetTimer.delta()&&(this.yOffset+=this.toOffset,5<this.yOffset?this.toOffset=-2:-5>this.yOffset&&(this.toOffset=2),this.offsetTimer.reset())},draw:function(){this.parent();ig.system.context.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x,this.pos.y,ig.system.canvas.width,this.img.data.height);this.drawArrowOverRoof&&this.drawArrow(512,690)},drawArrow:function(a,b){ig.system.context.translate(a,
b+this.yOffset);ig.system.context.rotate(Math.PI);ig.system.context.beginPath();ig.system.context.moveTo(0,0);ig.system.context.lineTo(10,25);ig.system.context.lineTo(-10,25);ig.system.context.closePath();ig.system.context.fillStyle="rgba(0,0,0,0.8)";ig.system.context.fill();ig.system.context.rotate(-Math.PI);ig.system.context.translate(-a,-(b+this.yOffset))},drawBg:function(){}})});ig.baked=!0;
ig.module("game.entities.light-overlay").requires("plugins.components.in-game").defines(function(){EntityLightOverlay=EntityInGame.extend({size:{x:48,y:48},img:new ig.Image("media/graphics/overlay-light.png"),init:function(a,b,c){this.parent(a,b,c)},draw:function(){this.parent();ig.system.context.drawImage(this.img.data,0,0,this.img.data.width,this.img.data.height,this.pos.x,this.pos.y,this.img.data.width,this.img.data.height)}})});ig.baked=!0;
ig.module("game.buttons.prev-level-button").requires("plugins.components.button").defines(function(){EntityPrevLevelButton=EntityButton.extend({size:{x:80,y:48},ignorePause:!0,name:"playbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();ig.system.context.fillStyle="rgba(0,0,255,0.5)";ig.system.context.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y);ig.system.context.fillStyle="rgba(255,255,255,1)";ig.system.context.fillText("Prev",
this.pos.x,this.pos.y+this.size.y-10)},redirect:function(){ig.game.currentLevel--;0>ig.game.currentLevel&&(ig.game.currentLevel=15);ig.game.clearEnemiesArray();ig.game.director.jumpTo(LevelGame)}})});ig.baked=!0;
ig.module("game.buttons.next-level-button").requires("plugins.components.button").defines(function(){EntityNextLevelButton=EntityButton.extend({size:{x:80,y:48},ignorePause:!0,name:"playbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&(ig.system.context.fillStyle="rgba(0,0,255,0.5)",ig.system.context.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y),ig.system.context.fillStyle="rgba(255,255,255,1)",ig.system.context.fillText("Next",
this.pos.x,this.pos.y+this.size.y-10))},redirect:function(){ig.game.currentLevel++;15<ig.game.currentLevel&&(ig.game.currentLevel=0);ig.game.clearEnemiesArray();ig.game.director.jumpTo(LevelGame)}})});ig.baked=!0;
ig.module("game.buttons.mute-button").requires("plugins.components.button").defines(function(){EntityMuteButton=EntityButton.extend({size:{x:110,y:68},ignorePause:!0,name:"resetbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();ig.system.context.fillStyle="rgba(0,0,255,0.5)";ig.system.context.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y);ig.system.context.fillStyle="rgba(255,255,255,1)";ig.soundHandler.forceMuted?ig.system.context.fillText("UnMute",
this.pos.x,this.pos.y+this.size.y-10):ig.system.context.fillText("Mute",this.pos.x,this.pos.y+this.size.y-10)},redirect:function(){ig.soundHandler.forceMuted=!ig.soundHandler.forceMuted;ig.soundHandler.forceMuted?ig.soundHandler.mute():ig.soundHandler.unmute()}})});ig.baked=!0;
ig.module("game.buttons.settings-button").requires("plugins.components.button","game.controllers.settings-controller").defines(function(){EntitySettingsButton=EntityButton.extend({size:{x:46,y:51},ignorePause:!0,name:"settingsbutton",settingsControl:null,control:null,init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.control&&(this.control=c.control)},draw:function(){this.parent();this.clickable&&ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[10].sx,
_SPRITES.guiSprites.graphics[10].sy,_SPRITES.guiSprites.graphics[10].sw,_SPRITES.guiSprites.graphics[10].sh,this.pos.x,this.pos.y,this.size.x,this.size.y)},redirect:function(){ig.game.sortEntitiesDeferred();ig.game.tutorialPause||(null==this.settingsControl?(ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong),this.settingsControl=ig.game.spawnEntity(EntitySettingsController,-500,136,{callbackButton:this}),this.control.phineasBar&&this.control.phineasBar.pauseTimer(!0),this.control.ferbBar&&
this.control.ferbBar.pauseTimer(!0)):this.settingsControl.tweenOut())}})});ig.baked=!0;
ig.module("game.buttons.end-button").requires("plugins.components.button").defines(function(){EntityEndButton=EntityButton.extend({size:{x:206,y:73},ignorePause:!0,inView:!0,ignoreInView:!0,name:"endbutton",zIndex:5100,textOnButton:"Retry",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y);c.text&&(this.textOnButton=c.text)},draw:function(){this.parent();this.clickable&&(ig.system.context.drawImage(this.endImage.data,_SPRITES.endSprites.graphics[0].sx,_SPRITES.endSprites.graphics[0].sy,
_SPRITES.endSprites.graphics[0].sw,_SPRITES.endSprites.graphics[0].sh,this.pos.x,this.pos.y,this.size.x,this.size.y),"Retry"===this.textOnButton?ig.game.font32.draw(this.textOnButton,this.pos.x+55,this.pos.y+25,ig.Font.ALIGN.LEFT):"Next Level"===this.textOnButton&&ig.game.font32.draw(this.textOnButton,this.pos.x+15,this.pos.y+25,ig.Font.ALIGN.LEFT))},redirect:function(){}})});ig.baked=!0;
ig.module("game.entities.decals.check-mark").requires("plugins.components.in-game").defines(function(){EntityCheckMark=EntityInGame.extend({size:{x:47,y:36},inView:!0,ignoreInView:!0,checkedOn:!1,zIndex:5200,textOnMark:"Retry",stringArray:[],init:function(a,b,c){this.parent(a,b,c);c.text&&(this.textOnMark=c.text)},update:function(){this.parent()},draw:function(){this.parent();this.stringArray=this.textOnMark.split("\n");if(this.checkedOn){this.size={x:65,y:52};ig.system.context.drawImage(this.endImage.data,
_SPRITES.endSprites.graphics[2].sx,_SPRITES.endSprites.graphics[2].sy,_SPRITES.endSprites.graphics[2].sw,_SPRITES.endSprites.graphics[2].sh,this.pos.x,this.pos.y-16,this.size.x,this.size.y);for(var a=0;a<this.stringArray.length;a++)ig.game.font32.draw(this.stringArray[a],this.pos.x+65,this.pos.y+50*a,ig.Font.ALIGN.LEFT)}else for(a=0;a<this.stringArray.length;a++)ig.game.font32.draw(this.stringArray[a],this.pos.x+25,this.pos.y+50*a,ig.Font.ALIGN.LEFT)}})});ig.baked=!0;
ig.module("game.controllers.score-control").requires("plugins.components.control","game.buttons.end-button","game.entities.decals.check-mark").defines(function(){EntityScoreControl=EntityControl.extend({size:{x:585,y:599},victory:!1,endButton:null,zIndex:5E3,checkMarks:[],checkAll:!1,init:function(a,b,c){this.parent(a,b,c);var d=[];ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);if(c.win)if(d.push("Celebrate!"),0<ig.game.zombiesKilled&&(c=1==ig.game.zombiesKilled?ig.game.zombiesKilled+
" zombie defeated!":ig.game.zombiesKilled+" zombies defeated!",d.push(c)),0<ig.game.robotsKilled&&(c=1==ig.game.robotsKilled?ig.game.robotsKilled+" robot defeated!":ig.game.robotsKilled+" robots defeated!",d.push(c)),0<ig.game.clonesKilled&&(c=1==ig.game.clonesKilled?ig.game.clonesKilled+" clone defeated!":ig.game.clonesKilled+" clones defeated!",d.push(c)),this.victory=!0,ig.game.currentLevel===_LEVELS.length-1){d.push("Successfully prevented \nDr. Heinz \nDoofenshmirtz!");for(c=0;c<d.length;c++)this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,
a,b,{text:d[c]})),this.checkTargetMark(c)}else{for(c=0;c<d.length;c++)this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,a,b,{text:d[c]})),this.checkTargetMark(c);this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,a,b,{text:"Prepare for the next \nwave!"}))}else{for(c=0;c<d.length;c++)this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,a,b,{text:d[c]})),this.checkTargetMark(c);this.victory=!1;this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,a,b,{text:"To do better!"}));this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,
a,b,{text:"To not give up!"}));this.checkMarks.push(ig.game.spawnEntity(EntityCheckMark,a,b,{text:"Retry!"}))}this.tween({pos:{x:220}},0.5,{onComplete:function(){ig.game.sortEntitiesDeferred()}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.endButton=this.victory?ig.game.spawnEntity(EntityEndButton,0,0,{text:"Next Level"}):ig.game.spawnEntity(EntityEndButton,0,0,{text:"Retry"});this.endButton.redirect=function(){this.tweenOut();ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong)}.bind(this)},
update:function(){this.parent();this.endButton&&(this.endButton.pos.x=this.pos.x+205,this.endButton.pos.y=this.pos.y+540);this.repositionCheckMarks()},draw:function(){this.parent();ig.system.context.fillStyle="rgba(0,0,0,0.5)";ig.system.context.fillRect(0,0,ig.system.canvas.width,ig.system.canvas.height);ig.system.context.drawImage(this.endImage.data,_SPRITES.endSprites.graphics[3].sx,_SPRITES.endSprites.graphics[3].sy,_SPRITES.endSprites.graphics[3].sw,_SPRITES.endSprites.graphics[3].sh,this.pos.x,
this.pos.y,this.size.x,this.size.y);this.victory?ig.game.font32.draw("Victory",this.pos.x+225,this.pos.y+35,ig.Font.ALIGN.LEFT):ig.game.font32.draw("Defeat",this.pos.x+235,this.pos.y+35,ig.Font.ALIGN.LEFT)},tweenOut:function(){this.tween({pos:{x:1280}},0.5,{onComplete:function(){ig.game.forceStopLightningSFX=!1;ig.soundHandler.stopSound(ig.soundHandler.SOUNDID.bzzlong);ig.game.resetStats();if(this.victory){ig.game.currentLevel++;var a=ig.game.currentLevel+0;ig.game.currentLevel>_LEVELS.length-1&&
(ig.game.currentLevel=1);if(ig.game.supports_local_storage()){if(ig.game.storage.isSet(ig.game.GAMELEVELSKEY))var b="Level"+ig.game.currentLevel,c=ig.game.storage.get(ig.game.GAMELEVELSKEY);else ig.game.storage.set(ig.game.GAMELEVELSKEY,{Level0:!0,Level1:!0}),b="Level"+ig.game.currentLevel,c=ig.game.storage.get(ig.game.GAMELEVELSKEY);c[b]=!0;ig.game.storage.set(ig.game.GAMELEVELSKEY,c)}a>_LEVELS.length-1?ig.game.director.jumpTo(LevelCongrats):(ig.game.clearEnemiesArray(),ig.game.director.jumpTo(LevelGame))}else ig.game.clearEnemiesArray(),
ig.game.director.jumpTo(LevelGame)}.bind(this),easing:ig.Tween.Easing.Exponential.EaseOut}).start()},repositionCheckMarks:function(){for(var a=0;a<this.checkMarks.length;a++)this.checkMarks[a].pos.x=this.pos.x+40,this.checkMarks[a].pos.y=this.pos.y+130+55*a},checkAllMarks:function(){for(var a=0;a<this.checkMarks.length;a++)this.checkMarks[a].checkedOn=!0;this.checkAll=!0},uncheckAllMarks:function(){for(var a=0;a<this.checkMarks.length;a++)this.checkMarks[a].checkedOn=!1;this.checkAll=!1},checkTargetMark:function(a){this.checkMarks[a].checkedOn=
!0}})});ig.baked=!0;
ig.module("game.controllers.game-controller").requires("plugins.components.control","game.buttons.turret-button","plugins.components.generator","plugins.components.input-handler","plugins.components.grid","game.entities.time-bar","game.entities.health-bar","plugins.components.player-handler","plugins.components.ai-handler","game.buttons.phineas-button","game.buttons.ferb-button","game.buttons.reset-button","game.buttons.play-button","game.controllers.turret-selection-controller","game.controllers.turret-option-wheel-controller",
"game.entities.tree","game.buttons.wheel-button","game.entities.roof","game.entities.light-overlay","game.buttons.prev-level-button","game.buttons.next-level-button","game.buttons.mute-button","game.buttons.settings-button","game.controllers.score-control").defines(function(){EntityGameController=EntityControl.extend({size:{x:48,y:48},inputHandler:null,grid:null,bg:new ig.Image("media/graphics/bg.jpg"),phineasBar:null,ferbBar:null,playerHandler:null,aiHandler:null,zIndex:1102,name:"game controller",
gameState:1,gameStates:{start:1,run:2,end:3,lose:4,win:5,endDialog:6,tutorialSuperweapon:7},healthBar:null,tree:null,turretSelectionControl:null,turretOptionControl:null,roof:null,debugModeOn:!1,levelCompleteTimer:null,levelFailTimer:null,phineasButton:null,ferbButton:null,isTutorial:!1,playButton:null,settingsButton:null,resetButton:null,nextButton:null,dialogIndex:0,dialogIndexes:[],phineasDialogs:[],ferbDialogs:[],endDialogIndex:0,endDialogIndexes:[],phineasEndDialogs:[],ferbEndDialogs:[],maxSize:{x:0,
y:0},currentSize:{x:0,y:0},damageTimer:null,alphaFadeIn:0,init:function(a,b,c){this.parent(a,b,c);if(!ig.global.wm)switch(ig.game.clearEnemiesArray(),this.defineExternalElements(),ig.game.sortEntitiesDeferred(),this.flagToRedraw(),this.nextButton=ig.game.spawnEntity(EntityNextButton,this.playButton.pos.x-150,this.playButton.pos.y),this.nextButton.disableButton(),this.dialogIndex=0,ig.game.currentLevel){case 1:this.dialogIndexes=[{phineas:1},{ferb:1},{ferb:2},{phineas:2},{phineas:3}];this.phineasDialogs=
["Hmm.. Something does not \nlook right over our \nbackyard's fence.","Ferb, I know what \nwe're gonna do today!","You can prepare before starting.\nRemember to hit play when ready."];this.ferbDialogs=["Well... actually","It looks like there \nis an army of zombies\nheaded our way."];this.endDialogIndexes=[{phineas:1},{ferb:1}];this.phineasEndDialogs=["Looks like we won this round."];this.ferbEndDialogs=["They will be back."];this.nextButton.enableButton();this.playButton.disableButton();break;case 2:this.dialogIndexes=
[{phineas:1},{ferb:1},{phineas:2}];this.phineasDialogs=["Hi again. We have a new turret.\nIt's called the \n Fridge-O-Rator.","Give it a try! \nAnd remember to hit play \nwhen ready."];this.ferbDialogs=["This turret has the \ncapability to freeze minions."];this.nextButton.enableButton();this.playButton.disableButton();break;case 3:this.dialogIndexes=[{phineas:1},{ferb:1},{phineas:2}];this.phineasDialogs=["We have a new toy.\nIt's called the Pillow Cannon","Give it a try! \nAnd remember to hit play \nwhen ready."];
this.ferbDialogs=["This turret has the \ncapability to hit \nmultiple minions"];this.nextButton.enableButton();this.playButton.disableButton();break;case 4:this.dialogIndexes=[{phineas:1},{ferb:1},{phineas:2}];this.phineasDialogs=["What is that?","Hey Ferb, \nhave you seen Perry?"];this.ferbDialogs=["It looks like a \nsecret base of some kind."];this.nextButton.enableButton();this.playButton.disableButton();break;case 5:this.dialogIndexes=[{phineas:1},{phineas:2},{ferb:1},{phineas:3},{phineas:4}];
this.phineasDialogs=["We have been working on \nupping our game a little.","I present to you the \ncombustive-trap-teleporter!","The traps will explode after \nawhile due to the effects of \nspace-time manipulation","Give it a try! \nAnd remember to hit play \nwhen ready."];this.ferbDialogs=["This turret has the \ncapability to teleport traps\ninto the midst of minions"];this.nextButton.enableButton();this.playButton.disableButton();break;case 6:this.dialogIndexes=[{phineas:1},{ferb:1},{phineas:2}];
this.phineasDialogs=["Our latest masterpiece,\nthe Rocket Glove Launcher \nis now ready","Give it a try! \nAnd remember to hit play \nwhen ready."];this.ferbDialogs=["Crude...but effective.\n It only can fire at minions \nin front of it"];this.nextButton.enableButton();this.playButton.disableButton();break;case 7:this.dialogIndexes=[{phineas:1},{ferb:1},{phineas:2}];this.phineasDialogs=["It looks like they \nare getting serious.","Here they come again!"];this.ferbDialogs=["Yes... they seem a little \nflabbergasted at how long \nwe have lasted."];
this.nextButton.enableButton();this.playButton.disableButton();break;case 15:this.endDialogIndexes=[{phineas:1}],this.phineasEndDialogs=["It seems like we have won at last."],this.ferbEndDialogs=[],this.nextButton.enableButton(),this.playButton.disableButton()}},update:function(){this.parent();this.currentSize.x<this.maxSize.x&&(this.currentSize.x+=40);this.notEnoughStarsTimer&&0.1<this.notEnoughStarsTimer.delta()&&(this.notEnoughStarsTimer=null);switch(this.gameState){case this.gameStates.start:this.inputHandler&&
this.inputHandler.handleInput();break;case this.gameStates.run:null===this.phineasBar&&!this.isTutorial&&(this.phineasBar=ig.game.spawnEntity(EntityTimeBar,100,740),this.phineasBar.maxTime=20,this.phineasBar.name="phineasBar",this.phineasBar.flushBar(),this.phineasButton.setBar(this.phineasBar),this.phineasButton.disableButton());null===this.ferbBar&&!this.isTutorial&&(this.ferbBar=ig.game.spawnEntity(EntityTimeBar,900,740),this.ferbBar.maxTime=20,this.ferbBar.name="ferbBar",this.ferbBar.flushBar(),
this.ferbButton.setBar(this.ferbBar),this.ferbButton.disableButton());this.inputHandler&&this.inputHandler.handleInput();if(this.checkLoseCondition()){this.resolveLose();break}if(this.checkWinCondition()){this.resolveWin();break}break;case this.gameStates.end:if(this.checkLoseCondition()){this.levelFailTimer&&(this.levelFailTimer=null);this.endDialogIndex<this.endDialogIndexes.length?(this.nextButton.enableButton(),this.gameState=this.gameStates.endDialog):this.gameState=this.gameStates.lose;break}if(this.checkWinCondition()){this.levelCompleteTimer&&
(this.levelCompleteTimer=null);this.endDialogIndex<this.endDialogIndexes.length?(this.nextButton.enableButton(),this.gameState=this.gameStates.endDialog):this.gameState=this.gameStates.win;break}break;case this.gameStates.endDialog:if(this.checkLoseCondition()){this.gameState=this.gameStates.lose;break}if(this.checkWinCondition()){ig.input.pressed("click")&&this.nextButton.checkOverlapWithPointer()&&this.nextButton.clickable&&(this.nextEndDialog(),this.endDialogIndex>=this.endDialogIndexes.length&&
(this.gameState=this.gameStates.win));break}break;case this.gameStates.lose:this.nextButton.clickable&&this.nextButton.disableButton();this.phineasButton.clickable=!1;this.ferbButton.clickable=!1;null==this.scoreControl&&(this.settingsButton.disableButton(),this.scoreControl=ig.game.spawnEntity(EntityScoreControl,-500,100,{win:!1}));break;case this.gameStates.win:this.nextButton.clickable&&this.nextButton.disableButton();this.phineasButton.clickable=!1;this.ferbButton.clickable=!1;null==this.scoreControl&&
(this.settingsButton.disableButton(),this.scoreControl=ig.game.spawnEntity(EntityScoreControl,-500,100,{win:!0}));break;case this.gameStates.tutorialSuperweapon:null===this.phineasBar&&this.isTutorial&&(this.phineasBar=ig.game.spawnEntity(EntityTimeBar,100,740),this.phineasBar.maxTime=20,this.phineasBar.name="phineasBar",this.phineasButton.setBar(this.phineasBar),this.phineasButton.clickable=!0),null===this.ferbBar&&this.isTutorial&&(this.ferbBar=ig.game.spawnEntity(EntityTimeBar,900,740),this.ferbBar.maxTime=
20,this.ferbBar.name="ferbBar",this.ferbButton.setBar(this.ferbBar),this.ferbButton.clickable=!1),ig.input.pressed("click")&&this.phineasButton&&this.phineasButton.checkOverlapWithPointer()&&(ig.game.forcedPause=!1,ig.game.paused=!1,ig.game.tutorialPause=!1,this.nextDialog(),this.gameState=this.gameStates.run)}},draw:function(){this.parent();if(!ig.global.wm){var a=ig.system.context;this.damageTimer&&(0.1<this.damageTimer.delta()?this.damageTimer=null:(a.fillStyle="rgba(255,0,0,"+this.alphaFadeIn.toFixed(2)+
")",this.alphaFadeIn+=0.025,0.4<this.alphaFadeIn&&(this.alphaFadeIn=0.4),a.fillRect(this.pos.x,this.pos.y,ig.system.canvas.width,ig.system.canvas.height)));a.font="30px Arial";a.fillStyle="rgba(255,255,0,1)";a.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[27].sx,_SPRITES.guiSprites.graphics[27].sy,_SPRITES.guiSprites.graphics[27].sw,_SPRITES.guiSprites.graphics[27].sh,this.pos.x+20,this.pos.y+20,_SPRITES.guiSprites.graphics[27].sw,_SPRITES.guiSprites.graphics[27].sh);0<ig.game.currentLevel?
(ig.game.font32.draw(this.playerHandler.stars,this.pos.x+65,this.pos.y+25,ig.Font.ALIGN.LEFT),ig.game.font32.draw("Level "+ig.game.currentLevel,this.pos.x+185,this.pos.y+25,ig.Font.ALIGN.LEFT)):(ig.game.font32.draw(this.playerHandler.stars,this.pos.x+65,this.pos.y+25,ig.Font.ALIGN.LEFT),ig.game.font32.draw("Tutorial",this.pos.x+185,this.pos.y+25,ig.Font.ALIGN.LEFT));this.dialogIndex<this.dialogIndexes.length?(this.drawPhineasDialogs(this.pos.x+20,this.pos.y+430,510,150),this.drawFerbDialogs(this.pos.x+
560,this.pos.y+430,410,150),this.gameState==this.gameStates.start&&this.dialogIndex===this.dialogIndexes.length-1&&1===ig.game.currentLevel&&(this.nextButton.disableButton(),this.playButton.enableButton())):this.gameState==this.gameStates.start&&(this.nextButton.disableButton(),this.playButton.enableButton());this.gameState===this.gameStates.endDialog&&this.endDialogIndex<this.endDialogIndexes.length&&(this.drawPhineasEndDialogs(this.pos.x+20,this.pos.y+430,510,150),this.drawFerbEndDialogs(this.pos.x+
560,this.pos.y+430,410,150))}},drawWithContext:function(a){a.clearRect(0,0,ig.system.bgcanvas.width,ig.system.bgcanvas.height);a.drawImage(this.bg.data,0,0,this.bg.data.width,this.bg.data.height,0,0,ig.system.bgcanvas.width,ig.system.bgcanvas.height)},resolveLose:function(){this.hideTurretSelectionWheel();this.hideTurretOptionWheel();this.grid.makePlacementUnclickable();this.grid.stopAllTurrets();this.phineasButton.disableButton();this.ferbButton.disableButton();this.notEnoughStarsTimer&&(this.notEnoughStarsTimer=
null);this.aiHandler.pauseSpawning();this.aiHandler.stopSpawning();this.levelFailTimer=new ig.Timer;this.gameState=this.gameStates.end;ig.game.forceStopLightningSFX=!0},resolveWin:function(){this.hideTurretSelectionWheel();this.hideTurretOptionWheel();this.grid.makePlacementUnclickable();ig.game.forceStopLightningSFX=!0;0<this.aiHandler.getGeneratorsTotalHeapSize()?this.aiHandler.emptyHeap():(this.notEnoughStarsTimer&&(this.notEnoughStarsTimer=null),this.levelCompleteTimer=new ig.Timer,this.gameState=
this.gameStates.end)},checkWinCondition:function(){return this.aiHandler.checkAllGeneratorsEmpty()?!0:!1},checkLoseCondition:function(){return 0>=Math.floor(this.healthBar.player.health)?!0:!1},flagToRedraw:function(){this.redraw=!0},drawPath:function(a){for(var b=0;b<a.length;b++)ig.system.bgcontext.fillStyle="rgba(255,255,255,0.5)",ig.system.bgcontext.fillRect(48*a[b].y+this.grid.pos.x,48*a[b].x+this.grid.pos.y,48,48)},redrawBgCanvas:function(){this.redrawBg([this]);this.grid.drawSandbags(ig.system.bgcontext);
this.grid.drawObstacles(ig.system.bgcontext);this.debugModeOn&&this.grid.drawGrid(ig.system.bgcontext)},defineGenerators:function(){this.aiHandler=new AiHandler;var a=0,b;for(b in _WAVES){if(a===ig.game.currentLevel){for(var c in _WAVES[b])a=this.grid.getCoordinatesFromTiles(_WAVES[b][c].grid.row,_WAVES[b][c].grid.col),this.aiHandler.addGenerator(ig.game.spawnEntity(EntityGenerator,a.x,a.y,{control:this,wave:_WAVES[b][c].spawn}));break}a++}},defineButtons:function(){this.settingsButton=ig.game.spawnEntity(EntitySettingsButton,
20,75,{control:this});this.playButton=ig.game.spawnEntity(EntityPlayButton,434,690);this.playButton.redirect=function(a){this.roof.drawArrowOverRoof=!1;this.gameState!==this.gameStates.end&&(this.defineGenerators(),this.gameState=this.gameStates.run,this.nextDialog());a.disableButton()}.bind(this,this.playButton);this.debugModeOn&&(ig.game.spawnEntity(EntityNextLevelButton,944,0),ig.game.spawnEntity(EntityPrevLevelButton,0,0))},showTurretSelectionWheel:function(a,b){this.turretSelectionControl.pos.x=
a;this.turretSelectionControl.pos.y=b;this.turretSelectionControl.showWheel=!0;this.turretSelectionControl.showTurrets()},hideTurretSelectionWheel:function(){this.turretSelectionControl.pos.x=0;this.turretSelectionControl.pos.y=-100;this.turretSelectionControl.showWheel=!1;this.turretSelectionControl.hideTurrets();ig.game.sortEntitiesDeferred()},showTurretOptionWheel:function(a,b){this.turretOptionControl.pos.x=a;this.turretOptionControl.pos.y=b;this.turretOptionControl.showWheel=!0;this.turretOptionControl.showOptions()},
hideTurretOptionWheel:function(){this.turretOptionControl.pos.x=-0;this.turretOptionControl.pos.y=-100;this.turretOptionControl.showWheel=!1;this.turretOptionControl.hideOptions();ig.game.sortEntitiesDeferred()},definePlayerStars:function(){this.playerHandler.health=500;this.playerHandler.maxhealth=500;switch(ig.game.currentLevel){case 0:this.playerHandler.stars=0;break;case 1:this.playerHandler.stars=90;break;case 2:this.playerHandler.stars=160;break;case 3:this.playerHandler.stars=180;break;case 4:this.playerHandler.stars=
190;break;case 5:this.playerHandler.stars=190;break;case 6:this.playerHandler.stars=200;break;case 7:this.playerHandler.stars=200;break;case 8:this.playerHandler.stars=200;break;case 9:this.playerHandler.stars=200;break;case 10:this.playerHandler.stars=200;break;case 11:this.playerHandler.stars=200;break;case 12:this.playerHandler.stars=200;break;case 13:this.playerHandler.stars=200;break;case 14:this.playerHandler.stars=200;break;case 15:this.playerHandler.stars=200}},defineExternalElements:function(){this.roof=
ig.game.spawnEntity(EntityRoof,0,ig.system.canvas.height-175);this.light=ig.game.spawnEntity(EntityLightOverlay,0,0);this.tree=ig.game.spawnEntity(EntityTree,820,210);this.turretSelectionControl=ig.game.spawnEntity(EntityTurretSelectionController,0,0,{control:this});this.turretOptionControl=ig.game.spawnEntity(EntityTurretOptionWheelController,0,0,{control:this});this.playerHandler=new PlayerHandler;this.grid=new Grid(this);this.inputHandler=new InputHandler(this);this.definePlayerStars();this.defineButtons();
this.healthBar=ig.game.spawnEntity(EntityHealthBar,400,20,{player:this.playerHandler});null===this.phineasButton&&(this.phineasButton=ig.game.spawnEntity(EntityPhineasButton,26,684,{head:this.roof.phineasHead,control:this}),this.phineasButton.clickable=!1);null===this.ferbBar&&(this.ferbButton=ig.game.spawnEntity(EntityFerbButton,882,684,{head:this.roof.ferbHead,control:this}),this.ferbButton.clickable=!1)},displayNotEnoughStars:function(){null==this.notEnoughStarsTimer&&(this.notEnoughStarsTimer=
new ig.Timer)},drawPhineasDialogBox:function(a,b,c,d){this.maxSize.x=c;this.maxSize.y=d;ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[25].sx,_SPRITES.guiSprites.graphics[25].sy,_SPRITES.guiSprites.graphics[25].sw,_SPRITES.guiSprites.graphics[25].sh,a,b,this.currentSize.x,d)},drawFerbDialogBox:function(a,b,c,d){this.maxSize.x=c;this.maxSize.y=d;ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[25].sx,_SPRITES.guiSprites.graphics[25].sy,_SPRITES.guiSprites.graphics[25].sw,
_SPRITES.guiSprites.graphics[25].sh,a,b,this.currentSize.x,d)},drawPhineasDialogs:function(a,b,c,d){var e=this.dialogIndexes[this.dialogIndex].phineas;if(e<=this.phineasDialogs.length&&(1<=this.phineasDialogs[e-1].length&&this.drawPhineasDialogBox(a,b,c,d),this.currentSize.x>this.maxSize.x)){c=this.phineasDialogs[e-1].split("\n");for(d=0;d<c.length;d++)ig.game.font24.draw(c[d],a+20,b+15+28*d,ig.Font.ALIGN.LEFT)}},drawFerbDialogs:function(a,b,c,d){var e=this.dialogIndexes[this.dialogIndex].ferb;if(e<=
this.ferbDialogs.length&&(1<=this.ferbDialogs[e-1].length&&this.drawFerbDialogBox(a,b,c,d),this.currentSize.x>this.maxSize.x)){c=this.ferbDialogs[e-1].split("\n");for(d=0;d<c.length;d++)ig.game.font24.draw(c[d],a+20,b+15+28*d,ig.Font.ALIGN.LEFT)}},drawPhineasEndDialogs:function(a,b,c,d){var e=this.endDialogIndexes[this.endDialogIndex].phineas;if(e<=this.phineasEndDialogs.length&&(1<=this.phineasEndDialogs[e-1].length&&this.drawPhineasDialogBox(a,b,c,d),this.currentSize.x>this.maxSize.x)){c=this.phineasEndDialogs[e-
1].split("\n");for(d=0;d<c.length;d++)ig.game.font24.draw(c[d],a+20,b+15+28*d,ig.Font.ALIGN.LEFT)}},drawFerbEndDialogs:function(a,b,c,d){var e=this.endDialogIndexes[this.endDialogIndex].ferb;if(e<=this.ferbEndDialogs.length&&(1<=this.ferbEndDialogs[e-1].length&&this.drawFerbDialogBox(a,b,c,d),this.currentSize.x>this.maxSize.x)){c=this.ferbEndDialogs[e-1].split("\n");for(d=0;d<c.length;d++)ig.game.font24.draw(c[d],a+20,b+15+28*d,ig.Font.ALIGN.LEFT)}},nextDialog:function(){this.dialogIndex++},nextEndDialog:function(){this.currentSize.x=
0;this.endDialogIndex++},damageHealth:function(a){this.alphaFadeIn=0;this.healthBar.reduce(a);this.damageTimer=new ig.Timer}})});ig.baked=!0;ig.module("game.levels.game").requires("impact.image","game.controllers.game-controller").defines(function(){LevelGame={entities:[{type:"EntityGameController",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("game.controllers.congrats-controller").requires("plugins.components.control","game.buttons.back-button").defines(function(){EntityCongratsController=EntityControl.extend({size:{x:48,y:48},timer:null,timePlay:1,bg:new ig.Image("media/graphics/end-bg.jpg"),backButton:null,init:function(a,b,c){this.parent(a,b,c);ig.global.wm||(ig.system.bgcontext.clearRect(0,0,ig.system.bgcanvas.width,ig.system.bgcanvas.height),ig.system.bgcontext.drawImage(this.bg.data,0,0,this.bg.data.width,this.bg.data.height,
this.pos.x,this.pos.y,ig.system.bgcanvas.width,ig.system.bgcanvas.height),this.timer=new ig.Timer,this.backButton=ig.game.spawnEntity(EntityBackButton,a+830,b+640))},update:function(){this.parent();this.timer&&this.timer.delta()>this.timePlay&&this.timer.reset()},draw:function(){this.parent()}})});ig.baked=!0;ig.module("game.levels.congrats").requires("impact.image","game.controllers.congrats-controller").defines(function(){LevelCongrats={entities:[{type:"EntityCongratsController",x:0,y:0}],layer:[]}});
ig.baked=!0;
ig.module("game.buttons.next-button").requires("plugins.components.button").defines(function(){EntityNextButton=EntityButton.extend({size:{x:122,y:60},ignorePause:!0,name:"nextbutton",init:function(a,b,c){this.parent(a,b,c);this.setOriSize(this.size.x,this.size.y)},draw:function(){this.parent();this.clickable&&ig.system.context.drawImage(this.guiImage.data,_SPRITES.guiSprites.graphics[11].sx,_SPRITES.guiSprites.graphics[11].sy,_SPRITES.guiSprites.graphics[11].sw,_SPRITES.guiSprites.graphics[11].sh,this.pos.x,
this.pos.y,this.size.x,this.size.y)},redirect:function(){}})});ig.baked=!0;
ig.module("game.controllers.tutorial-controller").requires("game.controllers.game-controller","game.buttons.next-button").defines(function(){EntityTutorialController=EntityGameController.extend({dialogTimer:null,isTutorial:!0,isTutorialSelectLock:!0,isTutorialCloseButtonLock:!0,isTutorialOptionLock:!0,dialogIndex:0,dialogIndexes:[{phineas:1},{phineas:2},{ferb:1},{phineas:3},{phineas:4},{phineas:5},{phineas:6},{phineas:7},{}],phineasDialogs:"Hi there. \nI am Phineas \nand over there is my brother \nFerb.;Say Hi Ferb.;Welcome to our backyard.\nWe will teach you \nhow to play the game.;To start, you can tap or click \non the brown patches. \nGo ahead and give it a try.;Select a turret to build.;Congratulations!\nWe now have our first turret.\nPress play to start the game.;".split(";"),
ferbDialogs:["Hello."],yOffset:0,toOffset:2,offsetTimer:null,explainSuperweapon:!1,init:function(a,b,c){this.parent(a,b,c);ig.global.wm||(this.dialogTimer=new ig.Timer,this.playButton.disableButton(),this.offsetTimer=new ig.Timer,this.nextButton.enableButton())},update:function(){this.parent();4===this.dialogIndex&&(this.isTutorialSelectLock=!1,this.playerHandler.stars=20,this.nextButton.disableButton());this.offsetTimer&&0.05<this.offsetTimer.delta()&&(this.yOffset+=this.toOffset,5<this.yOffset?
this.toOffset=-2:-5>this.yOffset&&(this.toOffset=2),this.offsetTimer.reset());ig.game.tutorialPause&&(ig.game.paused=!0);if(this.gameState!==this.gameStates.tutorialSuperweapon&&!this.explainSuperweapon&&this.aiHandler&&1===this.aiHandler.getGeneratorsTotalHeapSize()){var a=this.aiHandler.getEnemiesLeft();1<=a.length&&"zombieboss"===a[0].name&&(ig.game.tutorialPause=!0,ig.game.forcePause=!0,ig.game.paused=!0,this.gameState=this.gameStates.tutorialSuperweapon,this.explainSuperweapon=!0,this.dialogIndex=
0,this.dialogIndexes=[{phineas:1}],this.phineasDialogs=["That minion seems tough. \nUse our special contraptions."],this.ferbDialogs=[])}},draw:function(){this.parent();ig.global.wm||(4===this.dialogIndex&&(this.drawArrow(372,350),this.drawArrow(564,350)),5===this.dialogIndex&&this.turretSelectionControl.showWheel&&(500>this.turretSelectionControl.pos.x?this.drawArrow(372,254):this.drawArrow(564,254)),6===this.dialogIndex&&(this.roof.drawArrowOverRoof=!0),this.gameState===this.gameStates.tutorialSuperweapon&&
this.drawArrow(100,650))},drawArrow:function(a,b){ig.system.context.translate(a,b+this.yOffset);ig.system.context.rotate(Math.PI);ig.system.context.beginPath();ig.system.context.moveTo(0,0);ig.system.context.lineTo(10,25);ig.system.context.lineTo(-10,25);ig.system.context.closePath();ig.system.context.fillStyle="rgba(0,0,0,0.8)";ig.system.context.fill();ig.system.context.rotate(-Math.PI);ig.system.context.translate(-a,-(b+this.yOffset))}})});ig.baked=!0;
ig.module("game.levels.tutorial").requires("impact.image","game.controllers.tutorial-controller").defines(function(){LevelTutorial={entities:[{type:"EntityTutorialController",x:0,y:0}],layer:[]}});ig.baked=!0;
ig.module("plugins.helper.disney-api").defines(function(){DisneyApi=ig.Class.extend({disneyID:null,init:function(a){console.log("init Disney Ads");this.disneyID=a;this.overrideApiLoadComplete()},overrideApiLoadComplete:function(a){abcdm.abc.com.GameApis.apiLoadComplete=a?a:function(){console.log("load complete");abcdm.abc.com.GameApis.initOmniture(this.disneyID)}},overrideApiLoadFailed:function(a){abcdm.abc.com.GameApis.apiLoadFailed=a?a:function(){}},overrideOmnitureInitComplete:function(a){abcdm.abc.com.GameApis.omnitureInitComplete=
a?a:function(){}},trackPage:function(a,b,c){abcdm.abc.com.GameApis.trackPage(a,b,c)},trackLink:function(a,b,c){abcdm.abc.com.GameApis.trackLink(a,b,c)},notify:function(a){a?abcdm.abc.com.GameApis.sendNotification(a):abcdm.abc.com.GameApis.sendNotification({notification:{type:"error",payload:{message:"ErrorXYZhadoccurred"}}})},overrideOmnitureError:function(a){abcdm.abc.com.GameApis.omnitureError=a?a:function(a){this.log("omniture error: "+a)}},overrideAdPlaybackComplete:function(a){abcdm.abc.com.GameApis.adPlaybackComplete=
a?a:function(){this.log("ads playback complete")}},overrideAdPlaybackError:function(a){abcdm.abc.com.GameApis.adPlaybackError=a?a:function(a){this.log("ads error: "+a)}},overrideOnClose:function(a){abcdm.abc.com.GameApis.onClose=a?a:function(){this.log("on close")}},overrideOnActivated:function(a){a||(abcdm.abc.com.GameApis.onActivated=function(){this.log("on activated")})},overrideOnSuspended:function(a){a||(abcdm.abc.com.GameApis.onSuspended=function(){this.log("on suspended")})},gameCloseComplete:function(){abcdm.abc.com.GameApis.gameCloseComplete()},
playPrerollAds:function(){abcdm.abc.com.GameApis.apiLoadComplete&&abcdm.abc.com.GameApis.startAd("preRoll")},playMidRollAds:function(){abcdm.abc.com.GameApis.apiLoadComplete&&abcdm.abc.com.GameApis.startAd("midRoll")}})});ig.baked=!0;
ig.module("game.main").requires("impact.game","impact.font","plugins.helper.director","plugins.helper.impact-storage","plugins.helper.tween","plugins.helper.splash-loader","game.levels.main-menu","game.levels.select","game.levels.game","game.levels.congrats","game.levels.tutorial","plugins.helper.disney-api").defines(function(){MyGame=ig.Game.extend({version:"05-Jun-2015",font24:new ig.Font("media/font24.png"),font32:new ig.Font("media/font32.png"),font48:new ig.Font("media/font48.png"),storage:null,
director:null,paused:!1,currentLevel:0,terraintypes:{unwalkable:0,walkable:1,turretBuilt:2,base:3,sandbag:4,placement:5,obstacle1:6,obstacle2:7,obstacle3:8,obstacle4:9,obstacle5:10,obstacle6:11,obstacle7:12,obstacle8:13,obstacle9:14,obstacle10:15,obstacle11:16,obstacle12:17,obstacle13:18,obstacle14:19,obstacle15:20,obstacle16:21,obstacle17:22,obstacle18:23,obstacle19:24,obstacle20:25},disneyApi:null,zapCanvas:null,tickAvg:0.16,realTime:0,realPause:!1,allEnemies:[],zombiesKilled:0,robotsKilled:0,clonesKilled:0,
GAMELEVELSKEY:"PHINEASANDFERBKEY",GAMESOUNDSKEY:"PHINEASANDFERBSOUNDKEY",forceStopLightningSFX:!1,forcePause:!1,testText:"wagagagaga",init:function(){this.setupControls();this.setupStorage();this.setupDirector();this.initDisneyApi();this.startGame();if(this.supports_local_storage()&&this.storage.isSet(this.GAMESOUNDSKEY)){var a=this.storage.get(this.GAMESOUNDSKEY);ig.soundHandler.adjustSound(a.soundVolume);ig.soundHandler.adjustMusic(a.musicVolume)}ig.soundHandler.playBgm(ig.soundHandler.MUSICID.background);
ig.soundHandler.forceMuted=!1;this.swipeTimer=new ig.Timer},clearEnemiesArray:function(){for(;0<this.allEnemies.length;)this.allEnemies.pop()},resetStats:function(){this.clonesKilled=this.robotsKilled=this.zombiesKilled=0},initDisneyApi:function(){this.disneyApi=new DisneyApi(null)},update:function(){if(ig.game.paused)for(var a=0;a<this.entities.length;a++)this.entities[a].ignorePause&&this.entities[a].update();else this.parent()},draw:function(){this.parent()},setupStorage:function(){this.storage=
new ig.Storage},setupDirector:function(){this.director=new ig.Director(this,[LevelMainMenu,LevelTutorial,LevelGame,LevelSelect,LevelCongrats])},startGame:function(){this.director.loadLevel(this.director.currentLevel)},setupControls:function(){ig.input.unbindAll();ig.input.initMouse();ig.input.bind(ig.KEY.MOUSE1,"click")},drawFpsCounter:function(){var a=ig.system.context;a.font="30px Arial";a.fillStyle=_COLORS.white;a.fillText(Math.round(1E3/this.tickAvg),40,40)},beforeRun:function(){var a=Date.now();
this.tickAvg=0.8*this.tickAvg+0.2*(a-this.realTime);this.realTime=a},drawCursor:function(){ig.system.context.fillStyle="rgba(0,0,255,1)";ig.system.context.fillRect(ig.input.mouse.x-24,ig.input.mouse.y-48,48,48)},pauseGame:function(){ig.system.stopRunLoop.call(ig.system);if(!ig.game.paused){for(var a=0;a<this.entities.length;a++)this.entities[a].ignorePause||this.entities[a].pauseTimer();ig.game.paused=!0}},unpauseGame:function(){ig.system.startRunLoop.call(ig.system);if(ig.game.paused){for(var a=
0;a<this.entities.length;a++)this.entities[a].ignorePause||this.entities[a].unpauseTimer();ig.game.paused=!1}},supports_local_storage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),"localStorage"in window&&null!==window.localStorage}catch(a){return!1}}});ig.main("#canvas",MyGame,60,1024,768,1,ig.SplashLoader)});
